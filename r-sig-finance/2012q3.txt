From yaoheling at gmail.com  Sun Jul  1 11:40:23 2012
From: yaoheling at gmail.com (Heling Yao)
Date: Sun, 1 Jul 2012 17:40:23 +0800
Subject: [R-SIG-Finance] adapting quantstrat/demo/luxor code
Message-ID: <CAF157huJ96pnKW39GyyEYYF9Zp-KskPLc_Lv-+xydDv2BQ5oLA@mail.gmail.com>

Hi,

I'm trying to adapt luxor to load audusd H1 data, and changed the
symbol loading code to the following:

fx_str = 'AUDUSD'
exchange_rate(c(fx_str), tick_size=0.0001)

#getSymbols('AUDUSD', from=.from, to=.to, verbose=FALSE)
data.csv = read.csv('/opt/data/H1/tp/AUDUSD.csv', sep=',', header=TRUE)
data.xts = as.xts(data.csv[,2:6], as.POSIXct(strptime(data.csv[,1],
'%Y-%m-%d %H:%M:%S')))
colnames(data.xts) <- c('Open','High','Low','Close','Volume')
assign(fx_str, data.xts)


When I ran the code, I get:

[1] "AUD" "USD"
[1] "AUDUSD"
[1] "forex"
[1] "IB1"
[1] "2004-11-02 07:00:00 AUDUSD -1e+05 @ 0.7434"
[1] "2004-11-03 13:00:00 AUDUSD 1e+05 @ 0.7556"
[1] "2004-11-03 13:00:00 AUDUSD 1e+05 @ 0.754"
[1] "2004-11-08 23:00:00 AUDUSD -1e+05 @ 0.757"
[1] "2004-11-10 10:00:00 AUDUSD 1e+05 @ 0.7612"
[1] "2004-11-11 11:00:00 AUDUSD -1e+05 @ 0.7583"
[1] "2004-11-11 15:00:00 AUDUSD 1e+05 @ 0.7617"
[1] "2004-11-23 05:00:00 AUDUSD -1e+05 @ 0.7795"
[1] "2004-11-24 08:00:00 AUDUSD 1e+05 @ 0.7883"
[1] "2004-11-29 04:00:00 AUDUSD -1e+05 @ 0.7865"
[1] "2004-11-29 09:00:00 AUDUSD -1e+05 @ 0.7837"
[1] "2004-12-04 04:00:00 AUDUSD 1e+05 @ 0.7818"
Error in getPrice(Prices, Symbol) :
  subscript out of bounds: no column name containing AUDUSD
Calls: updatePortf -> .updatePosPL -> getPrice
Execution halted

But when I add:
AUDUSD = to.hourly(AUDUSD)
AUDUSD = align.time(to.hourly(AUDUSD), 60*60)

It runs fine. But I guess the above is not necessary for H1 data?

sample data:
Time,Open,High,Low,Close,Volume
2004-10-25 00:00:00,0.7429,0.7446,0.7426,0.7438,1445.0
2004-10-25 01:00:00,0.7436,0.7447,0.743,0.7436,1209.0
2004-10-25 02:00:00,0.7436,0.7444,0.7431,0.744,1011.0
2004-10-25 03:00:00,0.7438,0.7448,0.7433,0.7444,1078.0
2004-10-25 04:00:00,0.7444,0.7449,0.7436,0.7442,838.0
2004-10-25 05:00:00,0.7443,0.7454,0.7431,0.7444,1126.0
2004-10-25 06:00:00,0.7445,0.7456,0.7437,0.7443,1542.0
2004-10-25 07:00:00,0.7443,0.7469,0.7433,0.7468,1834.0
2004-10-25 08:00:00,0.7469,0.7486,0.7466,0.7483,2098.0


After googling, I guess it could be timezone related. But still could
not solve the problem.


Thanks in advance,

Heling


From jan at opentrades.nl  Sun Jul  1 13:31:34 2012
From: jan at opentrades.nl (OpenTrades)
Date: Sun, 01 Jul 2012 13:31:34 +0200
Subject: [R-SIG-Finance] adapting quantstrat/demo/luxor code
In-Reply-To: <CAF157huJ96pnKW39GyyEYYF9Zp-KskPLc_Lv-+xydDv2BQ5oLA@mail.gmail.com>
References: <CAF157huJ96pnKW39GyyEYYF9Zp-KskPLc_Lv-+xydDv2BQ5oLA@mail.gmail.com>
Message-ID: <4FF03516.4090702@opentrades.nl>

Did you compare AUDUSD before and after applying to.hourly() and 
align.time() ?

After reading from csv, try:

> head(AUDUSD)
>
> AUDUSD=to.hourly(AUDUSD)
> AUDUSD=align.time(AUDUSD, 60*60)
>
> head(AUDUSD)

HTH,

Jan Humme.



On 01-07-12 11:40, Heling Yao wrote:
> Hi,
>
> I'm trying to adapt luxor to load audusd H1 data, and changed the
> symbol loading code to the following:
>
> fx_str = 'AUDUSD'
> exchange_rate(c(fx_str), tick_size=0.0001)
>
> #getSymbols('AUDUSD', from=.from, to=.to, verbose=FALSE)
> data.csv = read.csv('/opt/data/H1/tp/AUDUSD.csv', sep=',', header=TRUE)
> data.xts = as.xts(data.csv[,2:6], as.POSIXct(strptime(data.csv[,1],
> '%Y-%m-%d %H:%M:%S')))
> colnames(data.xts) <- c('Open','High','Low','Close','Volume')
> assign(fx_str, data.xts)
>
>
> When I ran the code, I get:
>
> [1] "AUD" "USD"
> [1] "AUDUSD"
> [1] "forex"
> [1] "IB1"
> [1] "2004-11-02 07:00:00 AUDUSD -1e+05 @ 0.7434"
> [1] "2004-11-03 13:00:00 AUDUSD 1e+05 @ 0.7556"
> [1] "2004-11-03 13:00:00 AUDUSD 1e+05 @ 0.754"
> [1] "2004-11-08 23:00:00 AUDUSD -1e+05 @ 0.757"
> [1] "2004-11-10 10:00:00 AUDUSD 1e+05 @ 0.7612"
> [1] "2004-11-11 11:00:00 AUDUSD -1e+05 @ 0.7583"
> [1] "2004-11-11 15:00:00 AUDUSD 1e+05 @ 0.7617"
> [1] "2004-11-23 05:00:00 AUDUSD -1e+05 @ 0.7795"
> [1] "2004-11-24 08:00:00 AUDUSD 1e+05 @ 0.7883"
> [1] "2004-11-29 04:00:00 AUDUSD -1e+05 @ 0.7865"
> [1] "2004-11-29 09:00:00 AUDUSD -1e+05 @ 0.7837"
> [1] "2004-12-04 04:00:00 AUDUSD 1e+05 @ 0.7818"
> Error in getPrice(Prices, Symbol) :
>    subscript out of bounds: no column name containing AUDUSD
> Calls: updatePortf -> .updatePosPL -> getPrice
> Execution halted
>
> But when I add:
> AUDUSD = to.hourly(AUDUSD)
> AUDUSD = align.time(to.hourly(AUDUSD), 60*60)
>
> It runs fine. But I guess the above is not necessary for H1 data?
>
> sample data:
> Time,Open,High,Low,Close,Volume
> 2004-10-25 00:00:00,0.7429,0.7446,0.7426,0.7438,1445.0
> 2004-10-25 01:00:00,0.7436,0.7447,0.743,0.7436,1209.0
> 2004-10-25 02:00:00,0.7436,0.7444,0.7431,0.744,1011.0
> 2004-10-25 03:00:00,0.7438,0.7448,0.7433,0.7444,1078.0
> 2004-10-25 04:00:00,0.7444,0.7449,0.7436,0.7442,838.0
> 2004-10-25 05:00:00,0.7443,0.7454,0.7431,0.7444,1126.0
> 2004-10-25 06:00:00,0.7445,0.7456,0.7437,0.7443,1542.0
> 2004-10-25 07:00:00,0.7443,0.7469,0.7433,0.7468,1834.0
> 2004-10-25 08:00:00,0.7469,0.7486,0.7466,0.7483,2098.0
>
>
> After googling, I guess it could be timezone related. But still could
> not solve the problem.
>
>
> Thanks in advance,
>
> Heling
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


-- 
Jan Humme - OpenTrades

WWW:     http://www.opentrades.nl
Email:   jan at opentrades.nl
Twitter: @opentrades


From yaoheling at gmail.com  Sun Jul  1 15:05:55 2012
From: yaoheling at gmail.com (Heling Yao)
Date: Sun, 1 Jul 2012 21:05:55 +0800
Subject: [R-SIG-Finance] adapting quantstrat/demo/luxor code
In-Reply-To: <4FF03516.4090702@opentrades.nl>
References: <CAF157huJ96pnKW39GyyEYYF9Zp-KskPLc_Lv-+xydDv2BQ5oLA@mail.gmail.com>
	<4FF03516.4090702@opentrades.nl>
Message-ID: <CAF157ht3MCKTxfwnfaX8qQO=y2jL3pfN9si=jujOsdrE7CJffQ@mail.gmail.com>

Before applying to.hourly() and align.time():

> class(AUDUSD)
[1] "xts" "zoo"
> head(AUDUSD)
                      Open   High    Low  Close Volume
2004-10-25 00:00:00 0.7429 0.7446 0.7426 0.7438   1445
2004-10-25 01:00:00 0.7436 0.7447 0.7430 0.7436   1209
2004-10-25 02:00:00 0.7436 0.7444 0.7431 0.7440   1011
2004-10-25 03:00:00 0.7438 0.7448 0.7433 0.7444   1078
2004-10-25 04:00:00 0.7444 0.7449 0.7436 0.7442    838
2004-10-25 05:00:00 0.7443 0.7454 0.7431 0.7444   1126

and after:                    AUDUSD.Open AUDUSD.High AUDUSD.Low AUDUSD.Close
2004-10-25 01:00:00      0.7429      0.7446     0.7426       0.7438
2004-10-25 02:00:00      0.7436      0.7447     0.7430       0.7436
2004-10-25 03:00:00      0.7436      0.7444     0.7431       0.7440
2004-10-25 04:00:00      0.7438      0.7448     0.7433       0.7444
2004-10-25 05:00:00      0.7444      0.7449     0.7436       0.7442
2004-10-25 06:00:00      0.7443      0.7454     0.7431       0.7444

AUDUSD.Volume
2004-10-25 01:00:00          1445
2004-10-25 02:00:00          1209
2004-10-25 03:00:00          1011
2004-10-25 04:00:00          1078
2004-10-25 05:00:00           838
2004-10-25 06:00:00          1126

Length of AUDUSD's the same. So I changed the following line:
col_names = c('Open','High','Low','Close','Volume')

to:
colnames(data.xts) <-
c('AUDUSD.Open','AUDUSD.High','AUDUSD.Low','AUDUSD.Close','AUDUSD.Volume')

and viola, it works now without using to.hourly() and align.time()!

I don't know if this is the correct way though.


Thanks for your help,


On Sun, Jul 1, 2012 at 7:31 PM, OpenTrades <jan at opentrades.nl> wrote:
> Did you compare AUDUSD before and after applying to.hourly() and
> align.time() ?
>
> After reading from csv, try:
>
>> head(AUDUSD)
>>
>> AUDUSD=to.hourly(AUDUSD)
>> AUDUSD=align.time(AUDUSD, 60*60)
>>
>> head(AUDUSD)
>
>
> HTH,
>
> Jan Humme.
>
>
>
>
> On 01-07-12 11:40, Heling Yao wrote:
>>
>> Hi,
>>
>> I'm trying to adapt luxor to load audusd H1 data, and changed the
>> symbol loading code to the following:
>>
>> fx_str = 'AUDUSD'
>> exchange_rate(c(fx_str), tick_size=0.0001)
>>
>> #getSymbols('AUDUSD', from=.from, to=.to, verbose=FALSE)
>> data.csv = read.csv('/opt/data/H1/tp/AUDUSD.csv', sep=',', header=TRUE)
>> data.xts = as.xts(data.csv[,2:6], as.POSIXct(strptime(data.csv[,1],
>> '%Y-%m-%d %H:%M:%S')))
>> colnames(data.xts) <- c('Open','High','Low','Close','Volume')
>> assign(fx_str, data.xts)
>>
>>
>> When I ran the code, I get:
>>
>> [1] "AUD" "USD"
>> [1] "AUDUSD"
>> [1] "forex"
>> [1] "IB1"
>> [1] "2004-11-02 07:00:00 AUDUSD -1e+05 @ 0.7434"
>> [1] "2004-11-03 13:00:00 AUDUSD 1e+05 @ 0.7556"
>> [1] "2004-11-03 13:00:00 AUDUSD 1e+05 @ 0.754"
>> [1] "2004-11-08 23:00:00 AUDUSD -1e+05 @ 0.757"
>> [1] "2004-11-10 10:00:00 AUDUSD 1e+05 @ 0.7612"
>> [1] "2004-11-11 11:00:00 AUDUSD -1e+05 @ 0.7583"
>> [1] "2004-11-11 15:00:00 AUDUSD 1e+05 @ 0.7617"
>> [1] "2004-11-23 05:00:00 AUDUSD -1e+05 @ 0.7795"
>> [1] "2004-11-24 08:00:00 AUDUSD 1e+05 @ 0.7883"
>> [1] "2004-11-29 04:00:00 AUDUSD -1e+05 @ 0.7865"
>> [1] "2004-11-29 09:00:00 AUDUSD -1e+05 @ 0.7837"
>> [1] "2004-12-04 04:00:00 AUDUSD 1e+05 @ 0.7818"
>> Error in getPrice(Prices, Symbol) :
>> ? subscript out of bounds: no column name containing AUDUSD
>> Calls: updatePortf -> .updatePosPL -> getPrice
>> Execution halted
>>
>> But when I add:
>> AUDUSD = to.hourly(AUDUSD)
>> AUDUSD = align.time(to.hourly(AUDUSD), 60*60)
>>
>> It runs fine. But I guess the above is not necessary for H1 data?
>>
>> sample data:
>> Time,Open,High,Low,Close,Volume
>> 2004-10-25 00:00:00,0.7429,0.7446,0.7426,0.7438,1445.0
>> 2004-10-25 01:00:00,0.7436,0.7447,0.743,0.7436,1209.0
>> 2004-10-25 02:00:00,0.7436,0.7444,0.7431,0.744,1011.0
>> 2004-10-25 03:00:00,0.7438,0.7448,0.7433,0.7444,1078.0
>> 2004-10-25 04:00:00,0.7444,0.7449,0.7436,0.7442,838.0
>> 2004-10-25 05:00:00,0.7443,0.7454,0.7431,0.7444,1126.0
>> 2004-10-25 06:00:00,0.7445,0.7456,0.7437,0.7443,1542.0
>> 2004-10-25 07:00:00,0.7443,0.7469,0.7433,0.7468,1834.0
>> 2004-10-25 08:00:00,0.7469,0.7486,0.7466,0.7483,2098.0
>>
>>
>> After googling, I guess it could be timezone related. But still could
>> not solve the problem.
>>
>>
>> Thanks in advance,
>>
>> Heling
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>
> --
> Jan Humme - OpenTrades
>
> WWW: ? ? http://www.opentrades.nl
> Email: ? jan at opentrades.nl
> Twitter: @opentrades
>


From jan at opentrades.nl  Sun Jul  1 17:51:02 2012
From: jan at opentrades.nl (OpenTrades)
Date: Sun, 01 Jul 2012 17:51:02 +0200
Subject: [R-SIG-Finance] adapting quantstrat/demo/luxor code
In-Reply-To: <CAF157ht3MCKTxfwnfaX8qQO=y2jL3pfN9si=jujOsdrE7CJffQ@mail.gmail.com>
References: <CAF157huJ96pnKW39GyyEYYF9Zp-KskPLc_Lv-+xydDv2BQ5oLA@mail.gmail.com>
	<4FF03516.4090702@opentrades.nl>
	<CAF157ht3MCKTxfwnfaX8qQO=y2jL3pfN9si=jujOsdrE7CJffQ@mail.gmail.com>
Message-ID: <4FF071E6.4060402@opentrades.nl>

I think that the problem is in the following line in Luxor:

> updatePortf(p, Symbols='GBPUSD', 
> ,Dates=paste('::',as.Date(Sys.time()),sep=''), Prices=GBPUSD)

Can you try and omit the prices parameter?

> updatePortf(p, Symbols='GBPUSD', 
> ,Dates=paste('::',as.Date(Sys.time()),sep=''))



On 01-07-12 15:05, Heling Yao wrote:
> Before applying to.hourly() and align.time():
>
>> class(AUDUSD)
> [1] "xts" "zoo"
>> head(AUDUSD)
>                        Open   High    Low  Close Volume
> 2004-10-25 00:00:00 0.7429 0.7446 0.7426 0.7438   1445
> 2004-10-25 01:00:00 0.7436 0.7447 0.7430 0.7436   1209
> 2004-10-25 02:00:00 0.7436 0.7444 0.7431 0.7440   1011
> 2004-10-25 03:00:00 0.7438 0.7448 0.7433 0.7444   1078
> 2004-10-25 04:00:00 0.7444 0.7449 0.7436 0.7442    838
> 2004-10-25 05:00:00 0.7443 0.7454 0.7431 0.7444   1126
>
> and after:                    AUDUSD.Open AUDUSD.High AUDUSD.Low AUDUSD.Close
> 2004-10-25 01:00:00      0.7429      0.7446     0.7426       0.7438
> 2004-10-25 02:00:00      0.7436      0.7447     0.7430       0.7436
> 2004-10-25 03:00:00      0.7436      0.7444     0.7431       0.7440
> 2004-10-25 04:00:00      0.7438      0.7448     0.7433       0.7444
> 2004-10-25 05:00:00      0.7444      0.7449     0.7436       0.7442
> 2004-10-25 06:00:00      0.7443      0.7454     0.7431       0.7444
>
> AUDUSD.Volume
> 2004-10-25 01:00:00          1445
> 2004-10-25 02:00:00          1209
> 2004-10-25 03:00:00          1011
> 2004-10-25 04:00:00          1078
> 2004-10-25 05:00:00           838
> 2004-10-25 06:00:00          1126
>
> Length of AUDUSD's the same. So I changed the following line:
> col_names = c('Open','High','Low','Close','Volume')
>
> to:
> colnames(data.xts) <-
> c('AUDUSD.Open','AUDUSD.High','AUDUSD.Low','AUDUSD.Close','AUDUSD.Volume')
>
> and viola, it works now without using to.hourly() and align.time()!
>
> I don't know if this is the correct way though.
>
>
> Thanks for your help,
>
>
> On Sun, Jul 1, 2012 at 7:31 PM, OpenTrades <jan at opentrades.nl> wrote:
>> Did you compare AUDUSD before and after applying to.hourly() and
>> align.time() ?
>>
>> After reading from csv, try:
>>
>>> head(AUDUSD)
>>>
>>> AUDUSD=to.hourly(AUDUSD)
>>> AUDUSD=align.time(AUDUSD, 60*60)
>>>
>>> head(AUDUSD)
>>
>> HTH,
>>
>> Jan Humme.
>>
>>
>>
>>
>> On 01-07-12 11:40, Heling Yao wrote:
>>> Hi,
>>>
>>> I'm trying to adapt luxor to load audusd H1 data, and changed the
>>> symbol loading code to the following:
>>>
>>> fx_str = 'AUDUSD'
>>> exchange_rate(c(fx_str), tick_size=0.0001)
>>>
>>> #getSymbols('AUDUSD', from=.from, to=.to, verbose=FALSE)
>>> data.csv = read.csv('/opt/data/H1/tp/AUDUSD.csv', sep=',', header=TRUE)
>>> data.xts = as.xts(data.csv[,2:6], as.POSIXct(strptime(data.csv[,1],
>>> '%Y-%m-%d %H:%M:%S')))
>>> colnames(data.xts) <- c('Open','High','Low','Close','Volume')
>>> assign(fx_str, data.xts)
>>>
>>>
>>> When I ran the code, I get:
>>>
>>> [1] "AUD" "USD"
>>> [1] "AUDUSD"
>>> [1] "forex"
>>> [1] "IB1"
>>> [1] "2004-11-02 07:00:00 AUDUSD -1e+05 @ 0.7434"
>>> [1] "2004-11-03 13:00:00 AUDUSD 1e+05 @ 0.7556"
>>> [1] "2004-11-03 13:00:00 AUDUSD 1e+05 @ 0.754"
>>> [1] "2004-11-08 23:00:00 AUDUSD -1e+05 @ 0.757"
>>> [1] "2004-11-10 10:00:00 AUDUSD 1e+05 @ 0.7612"
>>> [1] "2004-11-11 11:00:00 AUDUSD -1e+05 @ 0.7583"
>>> [1] "2004-11-11 15:00:00 AUDUSD 1e+05 @ 0.7617"
>>> [1] "2004-11-23 05:00:00 AUDUSD -1e+05 @ 0.7795"
>>> [1] "2004-11-24 08:00:00 AUDUSD 1e+05 @ 0.7883"
>>> [1] "2004-11-29 04:00:00 AUDUSD -1e+05 @ 0.7865"
>>> [1] "2004-11-29 09:00:00 AUDUSD -1e+05 @ 0.7837"
>>> [1] "2004-12-04 04:00:00 AUDUSD 1e+05 @ 0.7818"
>>> Error in getPrice(Prices, Symbol) :
>>>    subscript out of bounds: no column name containing AUDUSD
>>> Calls: updatePortf -> .updatePosPL -> getPrice
>>> Execution halted
>>>
>>> But when I add:
>>> AUDUSD = to.hourly(AUDUSD)
>>> AUDUSD = align.time(to.hourly(AUDUSD), 60*60)
>>>
>>> It runs fine. But I guess the above is not necessary for H1 data?
>>>
>>> sample data:
>>> Time,Open,High,Low,Close,Volume
>>> 2004-10-25 00:00:00,0.7429,0.7446,0.7426,0.7438,1445.0
>>> 2004-10-25 01:00:00,0.7436,0.7447,0.743,0.7436,1209.0
>>> 2004-10-25 02:00:00,0.7436,0.7444,0.7431,0.744,1011.0
>>> 2004-10-25 03:00:00,0.7438,0.7448,0.7433,0.7444,1078.0
>>> 2004-10-25 04:00:00,0.7444,0.7449,0.7436,0.7442,838.0
>>> 2004-10-25 05:00:00,0.7443,0.7454,0.7431,0.7444,1126.0
>>> 2004-10-25 06:00:00,0.7445,0.7456,0.7437,0.7443,1542.0
>>> 2004-10-25 07:00:00,0.7443,0.7469,0.7433,0.7468,1834.0
>>> 2004-10-25 08:00:00,0.7469,0.7486,0.7466,0.7483,2098.0
>>>
>>>
>>> After googling, I guess it could be timezone related. But still could
>>> not solve the problem.
>>>
>>>
>>> Thanks in advance,
>>>
>>> Heling
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>>
>>
>> --
>> Jan Humme - OpenTrades
>>
>> WWW:     http://www.opentrades.nl
>> Email:   jan at opentrades.nl
>> Twitter: @opentrades
>>


-- 
Jan Humme - OpenTrades

WWW:     http://www.opentrades.nl
Email:   jan at opentrades.nl
Twitter: @opentrades


From ankur_dps at yahoo.com  Mon Jul  2 02:11:43 2012
From: ankur_dps at yahoo.com (ankur singh)
Date: Sun, 1 Jul 2012 17:11:43 -0700 (PDT)
Subject: [R-SIG-Finance] multivariate egarch question
Message-ID: <1341187903.40852.YahooMailClassic@web161806.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120701/ba5a8782/attachment.pl>

From yaoheling at gmail.com  Mon Jul  2 04:14:58 2012
From: yaoheling at gmail.com (Heling Yao)
Date: Mon, 2 Jul 2012 10:14:58 +0800
Subject: [R-SIG-Finance] adapting quantstrat/demo/luxor code
In-Reply-To: <4FF071E6.4060402@opentrades.nl>
References: <CAF157huJ96pnKW39GyyEYYF9Zp-KskPLc_Lv-+xydDv2BQ5oLA@mail.gmail.com>
	<4FF03516.4090702@opentrades.nl>
	<CAF157ht3MCKTxfwnfaX8qQO=y2jL3pfN9si=jujOsdrE7CJffQ@mail.gmail.com>
	<4FF071E6.4060402@opentrades.nl>
Message-ID: <CAF157huVnLdXOR8bP9+CmPQ7MtKRTAQjnnZuF=qb6q8CQ2J-Wg@mail.gmail.com>

Yes, omitting the Prices parameter doesn't the trick. I can use

col_names = c('Open','High','Low','Close','Volume')

instead of:
colnames(data.xts) <-
c('AUDUSD.Open','AUDUSD.High','AUDUSD.Low','AUDUSD.Close','AUDUSD.Volume')

Thank you!




On Sun, Jul 1, 2012 at 11:51 PM, OpenTrades <jan at opentrades.nl> wrote:
> I think that the problem is in the following line in Luxor:
>
>> updatePortf(p, Symbols='GBPUSD',
>> ,Dates=paste('::',as.Date(Sys.time()),sep=''), Prices=GBPUSD)
>
>
> Can you try and omit the prices parameter?
>
>> updatePortf(p, Symbols='GBPUSD',
>> ,Dates=paste('::',as.Date(Sys.time()),sep=''))
>
>
>
>
> On 01-07-12 15:05, Heling Yao wrote:
>>
>> Before applying to.hourly() and align.time():
>>
>>> class(AUDUSD)
>>
>> [1] "xts" "zoo"
>>>
>>> head(AUDUSD)
>>
>> ? ? ? ? ? ? ? ? ? ? ? Open ? High ? ?Low ?Close Volume
>> 2004-10-25 00:00:00 0.7429 0.7446 0.7426 0.7438 ? 1445
>> 2004-10-25 01:00:00 0.7436 0.7447 0.7430 0.7436 ? 1209
>> 2004-10-25 02:00:00 0.7436 0.7444 0.7431 0.7440 ? 1011
>> 2004-10-25 03:00:00 0.7438 0.7448 0.7433 0.7444 ? 1078
>> 2004-10-25 04:00:00 0.7444 0.7449 0.7436 0.7442 ? ?838
>> 2004-10-25 05:00:00 0.7443 0.7454 0.7431 0.7444 ? 1126
>>
>> and after: ? ? ? ? ? ? ? ? ? ?AUDUSD.Open AUDUSD.High AUDUSD.Low
>> AUDUSD.Close
>> 2004-10-25 01:00:00 ? ? ?0.7429 ? ? ?0.7446 ? ? 0.7426 ? ? ? 0.7438
>> 2004-10-25 02:00:00 ? ? ?0.7436 ? ? ?0.7447 ? ? 0.7430 ? ? ? 0.7436
>> 2004-10-25 03:00:00 ? ? ?0.7436 ? ? ?0.7444 ? ? 0.7431 ? ? ? 0.7440
>> 2004-10-25 04:00:00 ? ? ?0.7438 ? ? ?0.7448 ? ? 0.7433 ? ? ? 0.7444
>> 2004-10-25 05:00:00 ? ? ?0.7444 ? ? ?0.7449 ? ? 0.7436 ? ? ? 0.7442
>> 2004-10-25 06:00:00 ? ? ?0.7443 ? ? ?0.7454 ? ? 0.7431 ? ? ? 0.7444
>>
>> AUDUSD.Volume
>> 2004-10-25 01:00:00 ? ? ? ? ?1445
>> 2004-10-25 02:00:00 ? ? ? ? ?1209
>> 2004-10-25 03:00:00 ? ? ? ? ?1011
>> 2004-10-25 04:00:00 ? ? ? ? ?1078
>> 2004-10-25 05:00:00 ? ? ? ? ? 838
>> 2004-10-25 06:00:00 ? ? ? ? ?1126
>>
>> Length of AUDUSD's the same. So I changed the following line:
>> col_names = c('Open','High','Low','Close','Volume')
>>
>> to:
>> colnames(data.xts) <-
>> c('AUDUSD.Open','AUDUSD.High','AUDUSD.Low','AUDUSD.Close','AUDUSD.Volume')
>>
>> and viola, it works now without using to.hourly() and align.time()!
>>
>> I don't know if this is the correct way though.
>>
>>
>> Thanks for your help,
>>
>>
>> On Sun, Jul 1, 2012 at 7:31 PM, OpenTrades <jan at opentrades.nl> wrote:
>>>
>>> Did you compare AUDUSD before and after applying to.hourly() and
>>> align.time() ?
>>>
>>> After reading from csv, try:
>>>
>>>> head(AUDUSD)
>>>>
>>>> AUDUSD=to.hourly(AUDUSD)
>>>> AUDUSD=align.time(AUDUSD, 60*60)
>>>>
>>>> head(AUDUSD)
>>>
>>>
>>> HTH,
>>>
>>> Jan Humme.
>>>
>>>
>>>
>>>
>>> On 01-07-12 11:40, Heling Yao wrote:
>>>>
>>>> Hi,
>>>>
>>>> I'm trying to adapt luxor to load audusd H1 data, and changed the
>>>> symbol loading code to the following:
>>>>
>>>> fx_str = 'AUDUSD'
>>>> exchange_rate(c(fx_str), tick_size=0.0001)
>>>>
>>>> #getSymbols('AUDUSD', from=.from, to=.to, verbose=FALSE)
>>>> data.csv = read.csv('/opt/data/H1/tp/AUDUSD.csv', sep=',', header=TRUE)
>>>> data.xts = as.xts(data.csv[,2:6], as.POSIXct(strptime(data.csv[,1],
>>>> '%Y-%m-%d %H:%M:%S')))
>>>> colnames(data.xts) <- c('Open','High','Low','Close','Volume')
>>>> assign(fx_str, data.xts)
>>>>
>>>>
>>>> When I ran the code, I get:
>>>>
>>>> [1] "AUD" "USD"
>>>> [1] "AUDUSD"
>>>> [1] "forex"
>>>> [1] "IB1"
>>>> [1] "2004-11-02 07:00:00 AUDUSD -1e+05 @ 0.7434"
>>>> [1] "2004-11-03 13:00:00 AUDUSD 1e+05 @ 0.7556"
>>>> [1] "2004-11-03 13:00:00 AUDUSD 1e+05 @ 0.754"
>>>> [1] "2004-11-08 23:00:00 AUDUSD -1e+05 @ 0.757"
>>>> [1] "2004-11-10 10:00:00 AUDUSD 1e+05 @ 0.7612"
>>>> [1] "2004-11-11 11:00:00 AUDUSD -1e+05 @ 0.7583"
>>>> [1] "2004-11-11 15:00:00 AUDUSD 1e+05 @ 0.7617"
>>>> [1] "2004-11-23 05:00:00 AUDUSD -1e+05 @ 0.7795"
>>>> [1] "2004-11-24 08:00:00 AUDUSD 1e+05 @ 0.7883"
>>>> [1] "2004-11-29 04:00:00 AUDUSD -1e+05 @ 0.7865"
>>>> [1] "2004-11-29 09:00:00 AUDUSD -1e+05 @ 0.7837"
>>>> [1] "2004-12-04 04:00:00 AUDUSD 1e+05 @ 0.7818"
>>>> Error in getPrice(Prices, Symbol) :
>>>> ? subscript out of bounds: no column name containing AUDUSD
>>>> Calls: updatePortf -> .updatePosPL -> getPrice
>>>> Execution halted
>>>>
>>>> But when I add:
>>>> AUDUSD = to.hourly(AUDUSD)
>>>> AUDUSD = align.time(to.hourly(AUDUSD), 60*60)
>>>>
>>>> It runs fine. But I guess the above is not necessary for H1 data?
>>>>
>>>> sample data:
>>>> Time,Open,High,Low,Close,Volume
>>>> 2004-10-25 00:00:00,0.7429,0.7446,0.7426,0.7438,1445.0
>>>> 2004-10-25 01:00:00,0.7436,0.7447,0.743,0.7436,1209.0
>>>> 2004-10-25 02:00:00,0.7436,0.7444,0.7431,0.744,1011.0
>>>> 2004-10-25 03:00:00,0.7438,0.7448,0.7433,0.7444,1078.0
>>>> 2004-10-25 04:00:00,0.7444,0.7449,0.7436,0.7442,838.0
>>>> 2004-10-25 05:00:00,0.7443,0.7454,0.7431,0.7444,1126.0
>>>> 2004-10-25 06:00:00,0.7445,0.7456,0.7437,0.7443,1542.0
>>>> 2004-10-25 07:00:00,0.7443,0.7469,0.7433,0.7468,1834.0
>>>> 2004-10-25 08:00:00,0.7469,0.7486,0.7466,0.7483,2098.0
>>>>
>>>>
>>>> After googling, I guess it could be timezone related. But still could
>>>> not solve the problem.
>>>>
>>>>
>>>> Thanks in advance,
>>>>
>>>> Heling
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions
>>>> should go.
>>>>
>>>
>>> --
>>> Jan Humme - OpenTrades
>>>
>>> WWW: ? ? http://www.opentrades.nl
>>> Email: ? jan at opentrades.nl
>>> Twitter: @opentrades
>>>
>
>
> --
> Jan Humme - OpenTrades
>
> WWW: ? ? http://www.opentrades.nl
> Email: ? jan at opentrades.nl
> Twitter: @opentrades
>


From s.n.stoyanov at gmail.com  Mon Jul  2 16:54:39 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Mon, 2 Jul 2012 07:54:39 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH eGARCH and variance targeting
In-Reply-To: <4FEDF211.4020305@4dscape.com>
References: <1340983449860-4634896.post@n4.nabble.com>
	<4FEDCD6B.2020405@4dscape.com>
	<1340991931973-4634911.post@n4.nabble.com>
	<4FEDF211.4020305@4dscape.com>
Message-ID: <1341240879262-4635142.post@n4.nabble.com>

Thank you Alexios. I may have come across yet another but with the eGARCH
specification. It is NOT connected with variance targeting. I tried posting
it on the project's bug forum but it may have not gotten through. Just in
case:

I fit an eGARCH model to daily adjusted returns and bootstrap a forecast.
The forecast looks fine with n.ahead with values of 100 or higher but is
completely off with lower values of the forecast period (the difference
between a 99 and a 100-period-ahead forecast is striking). I can't see a
reason for that other than a bug (correct me if I'm wrong).

Here is the code:

spec=ugarchspec(variance.model=list(model="eGARCH", garchOrder=c(1,1),
                                    submodel=NULL, external.regressors=NULL,
variance.targeting=FALSE),
                mean.model=list(armaOrder=c(2,0), include.mean=TRUE,
archm=TRUE, 
                                archpow=1, arfima=FALSE,
external.regressors=NULL, archex=FALSE),
                distribution.model = "std", start.pars=list(),
fixed.pars=list())

fit=ugarchfit(spec, data, out.sample=100, solver="solnp",
solver.control=list(), 
                fit.control=list(stationarity=1, fixed.se=0, scale=0))

boot.pred=ugarchboot(fit, data=NULL, method="partial", n.ahead=99, 
                       n.bootfit=100, n.bootpred=500, out.sample=0,
rseed=NA, solver="solnp", 
                       solver.control=list(), fit.control=list(), 
                       external.forecasts=list(mregfor=NULL, vregfor=NULL),
parallel=TRUE, 
                       parallel.control=list(pkg="snowfall", cores=2))

Please let me know if you need a sample of the code or a copy of the
forecast.

Thanks,
Stoyan

-----
Stoyan Stoyanov
The University of Chicago Booth School of Business
MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-eGARCH-and-variance-targeting-tp4634896p4635142.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Mon Jul  2 17:13:03 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Mon, 02 Jul 2012 16:13:03 +0100
Subject: [R-SIG-Finance] RUGARCH eGARCH and variance targeting
In-Reply-To: <1341240879262-4635142.post@n4.nabble.com>
References: <1340983449860-4634896.post@n4.nabble.com>
	<4FEDCD6B.2020405@4dscape.com>
	<1340991931973-4634911.post@n4.nabble.com>
	<4FEDF211.4020305@4dscape.com>
	<1341240879262-4635142.post@n4.nabble.com>
Message-ID: <4FF1BA7F.4070507@4dscape.com>

Stoyan,

Thanks for the bug report. Please be patient and only post in one place 
(the bug report was received but you really shouldn't expect an instant
reply).

This bug seems to stem from the c++ code (for n.ahead>100 and m.sim<100 
it uses c code). I'll investigate and issue a fix soon.

-Alexios

On 02/07/2012 15:54, stoyan.stoyanov wrote:
> Thank you Alexios. I may have come across yet another but with the eGARCH
> specification. It is NOT connected with variance targeting. I tried posting
> it on the project's bug forum but it may have not gotten through. Just in
> case:
>
> I fit an eGARCH model to daily adjusted returns and bootstrap a forecast.
> The forecast looks fine with n.ahead with values of 100 or higher but is
> completely off with lower values of the forecast period (the difference
> between a 99 and a 100-period-ahead forecast is striking). I can't see a
> reason for that other than a bug (correct me if I'm wrong).
>
> Here is the code:
>
> spec=ugarchspec(variance.model=list(model="eGARCH", garchOrder=c(1,1),
>                                      submodel=NULL, external.regressors=NULL,
> variance.targeting=FALSE),
>                  mean.model=list(armaOrder=c(2,0), include.mean=TRUE,
> archm=TRUE,
>                                  archpow=1, arfima=FALSE,
> external.regressors=NULL, archex=FALSE),
>                  distribution.model = "std", start.pars=list(),
> fixed.pars=list())
>
> fit=ugarchfit(spec, data, out.sample=100, solver="solnp",
> solver.control=list(),
>                  fit.control=list(stationarity=1, fixed.se=0, scale=0))
>
> boot.pred=ugarchboot(fit, data=NULL, method="partial", n.ahead=99,
>                         n.bootfit=100, n.bootpred=500, out.sample=0,
> rseed=NA, solver="solnp",
>                         solver.control=list(), fit.control=list(),
>                         external.forecasts=list(mregfor=NULL, vregfor=NULL),
> parallel=TRUE,
>                         parallel.control=list(pkg="snowfall", cores=2))
>
> Please let me know if you need a sample of the code or a copy of the
> forecast.
>
> Thanks,
> Stoyan
>
> -----
> Stoyan Stoyanov
> The University of Chicago Booth School of Business
> MBA Class of 2013
> (312) 532-0120 | stoyanov at chicagobooth.edu
> --
> View this message in context: http://r.789695.n4.nabble.com/RUGARCH-eGARCH-and-variance-targeting-tp4634896p4635142.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From drew.harris.nz at gmail.com  Tue Jul  3 04:13:16 2012
From: drew.harris.nz at gmail.com (Drew Harris)
Date: Mon, 2 Jul 2012 19:13:16 -0700 (PDT)
Subject: [R-SIG-Finance] Calculating Hasbrouck's information share and
 Gonzalo-Granger weights on R
In-Reply-To: <CAP48nPaECC7pGJW=BVH4cwkWjgge+tJrZH6WouHWV0uiPrEsuQ@mail.gmail.com>
References: <AANLkTinWNEvAVUjk8TYVd_28mEUS_dKnezCPtX64v4Lo@mail.gmail.com>
	<1326111160519-4278272.post@n4.nabble.com>
	<CAP48nPaECC7pGJW=BVH4cwkWjgge+tJrZH6WouHWV0uiPrEsuQ@mail.gmail.com>
Message-ID: <1341281596166-4635222.post@n4.nabble.com>

Hi Nidhi,

I am a new R user and also trying to get my head around the price discovery
calculations to hopefully include in my University research. Your code is
very helpful for anything with 2 variables and I was hoping to extend it to
three but I cant get my head around how to construct the alpha_ort and
beta_ort. Do you have any ideas/tips? I have been reading the literature and
so far I have only found 2 dimensional instances of alpha and beta ort.

Kind Regards,

Drew

--
View this message in context: http://r.789695.n4.nabble.com/Calculating-Hasbrouck-s-information-share-and-Gonzalo-Granger-weights-on-R-tp2395838p4635222.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From Gordon.Morrison at ftse.com  Tue Jul  3 16:00:23 2012
From: Gordon.Morrison at ftse.com (Gordon Morrison)
Date: Tue, 3 Jul 2012 15:00:23 +0100
Subject: [R-SIG-Finance] Rbbg - curious performance of bdh?
Message-ID: <887B4B788BA1F0429670B96750DA450401D73E06BD@EXCH07B.ftse.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120703/e66c54cb/attachment.pl>

From j_cuisinier at hotmail.com  Tue Jul  3 16:30:03 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Tue, 3 Jul 2012 16:30:03 +0200
Subject: [R-SIG-Finance] Rbbg - curious performance of bdh?
In-Reply-To: <887B4B788BA1F0429670B96750DA450401D73E06BD@EXCH07B.ftse.com>
References: <887B4B788BA1F0429670B96750DA450401D73E06BD@EXCH07B.ftse.com>
Message-ID: <COL102-W34E63D8141509E0017FF668FE90@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120703/7d7e232b/attachment.pl>

From ccquant at gmail.com  Tue Jul  3 19:21:22 2012
From: ccquant at gmail.com (Ben quant)
Date: Tue, 3 Jul 2012 11:21:22 -0600
Subject: [R-SIG-Finance] financial data on flat matrix
In-Reply-To: <CABDUZc99hyt3QSU6Q0MqzGD_hR-vW0viyPanK8-cBUwLJjrOdA@mail.gmail.com>
References: <CAG2PC+e_YC=aW2me_RE2MfOt8MEoZQk_s6htcW2-3ZNDiwwjOQ@mail.gmail.com>
	<CABDUZc99hyt3QSU6Q0MqzGD_hR-vW0viyPanK8-cBUwLJjrOdA@mail.gmail.com>
Message-ID: <CAG2PC+dv3SEAGj+GbRor=hUj2LgNNs1=9YQnvCfZZ8WHhnfOVg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120703/a932dd94/attachment.pl>

From ccquant at gmail.com  Tue Jul  3 20:32:33 2012
From: ccquant at gmail.com (Ben quant)
Date: Tue, 3 Jul 2012 12:32:33 -0600
Subject: [R-SIG-Finance] financial data on flat matrix
In-Reply-To: <CAG2PC+dv3SEAGj+GbRor=hUj2LgNNs1=9YQnvCfZZ8WHhnfOVg@mail.gmail.com>
References: <CAG2PC+e_YC=aW2me_RE2MfOt8MEoZQk_s6htcW2-3ZNDiwwjOQ@mail.gmail.com>
	<CABDUZc99hyt3QSU6Q0MqzGD_hR-vW0viyPanK8-cBUwLJjrOdA@mail.gmail.com>
	<CAG2PC+dv3SEAGj+GbRor=hUj2LgNNs1=9YQnvCfZZ8WHhnfOVg@mail.gmail.com>
Message-ID: <CAG2PC+cYKahN6MhmZEve0pVj4Am0gomFHQwLCg-jKgBnwDfwxA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120703/77411d7a/attachment.pl>

From ccquant at gmail.com  Tue Jul  3 20:38:04 2012
From: ccquant at gmail.com (Ben quant)
Date: Tue, 3 Jul 2012 12:38:04 -0600
Subject: [R-SIG-Finance] financial data on flat matrix
In-Reply-To: <CAG2PC+cYKahN6MhmZEve0pVj4Am0gomFHQwLCg-jKgBnwDfwxA@mail.gmail.com>
References: <CAG2PC+e_YC=aW2me_RE2MfOt8MEoZQk_s6htcW2-3ZNDiwwjOQ@mail.gmail.com>
	<CABDUZc99hyt3QSU6Q0MqzGD_hR-vW0viyPanK8-cBUwLJjrOdA@mail.gmail.com>
	<CAG2PC+dv3SEAGj+GbRor=hUj2LgNNs1=9YQnvCfZZ8WHhnfOVg@mail.gmail.com>
	<CAG2PC+cYKahN6MhmZEve0pVj4Am0gomFHQwLCg-jKgBnwDfwxA@mail.gmail.com>
Message-ID: <CAG2PC+d163hpHz2mF0Za+cEuD1+zyDafOp2CsXN-TsR=7ExLKA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120703/c27b69ce/attachment.pl>

From drew.harris.nz at gmail.com  Wed Jul  4 06:34:52 2012
From: drew.harris.nz at gmail.com (Drew Harris)
Date: Tue, 3 Jul 2012 21:34:52 -0700 (PDT)
Subject: [R-SIG-Finance] Calculating Hasbrouck's information share and
 Gonzalo-Granger weights on R
In-Reply-To: <CAP48nPYK-+=d7UCGeBA2t-U4tj4+0TxkKs_E+eyqVETzmLdPRQ@mail.gmail.com>
References: <AANLkTinWNEvAVUjk8TYVd_28mEUS_dKnezCPtX64v4Lo@mail.gmail.com>
	<1320790767748-4017779.post@n4.nabble.com>
	<1321183293280-4036386.post@n4.nabble.com>
	<1321211518522-4037279.post@n4.nabble.com>
	<CAP48nPYK-+=d7UCGeBA2t-U4tj4+0TxkKs_E+eyqVETzmLdPRQ@mail.gmail.com>
Message-ID: <1341376492947-4635353.post@n4.nabble.com>

Hi Nidhi,

I have been attempting to expand your code above into an n dimensional
format. I am having a bit of trouble getting my Beta and Alpha orthogonal
components to generate and they are giving me (I believe) extremely
unbalanced IS measures. The following is what I tried to implement:

    ## the beta_orthogonal and alpha_orthogonal vectors :
	beta_ortt <- matrix(0, nrow = n, ncol=n)
	for (l in 1:n) {
		for (j in 1:n) {
			beta_ortt[j, l] <- if((n+1-j)==l) {cointest at V[(n+1-j),l]}
			else { -cointest at V[(n+1-j),l]	}
			}}
	
	alpha_ortt <- matrix(0, nrow = n, ncol=n)
	for (l in 1:n) {
		for (j in 1:n) {
			alpha_ortt[j, l] <- if((n+1-j)==l) {cointest at W[(n+1-j),l]}
			else { -cointest at W[(n+1-j),l]	}
			}}
	
   ## Gamma matrix construction
	gammat <- matrix(0, nrow = n, ncol=n)
	Identity <- diag(1, n)
    for (l in 1:n) {
		for (j in 1:n) {
			for (i in 1:(k-2)) {
				gammat[j,l] <- gammat[j,l] +vecm$rlm$coefficients[((n*i)+(l-1)),j]			
	}}}

--
View this message in context: http://r.789695.n4.nabble.com/Calculating-Hasbrouck-s-information-share-and-Gonzalo-Granger-weights-on-R-tp2395838p4635353.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From hideyoshi.maeda at gmail.com  Thu Jul  5 00:46:11 2012
From: hideyoshi.maeda at gmail.com (Hideyoshi Maeda)
Date: Thu, 5 Jul 2012 08:46:11 +1000
Subject: [R-SIG-Finance] addTxns addfees
In-Reply-To: <7D90F5C3-0038-4012-BEC1-B201D24E9AF7@gmail.com>
References: <mailman.3.1341396002.11535.r-sig-finance@r-project.org>
	<7D90F5C3-0038-4012-BEC1-B201D24E9AF7@gmail.com>
Message-ID: <A9D8FB53-2C15-4C38-A894-25186DE804C5@gmail.com>

If an example is required 

Here is an example:

rm(list=ls(pos=.blotter),pos=.blotter)
rm(list=ls(pos=.instrument),pos=.instrument)
rm(list=ls(pos=.strategy),pos=.strategy)

currency('USD')
stock("SPY", currency="USD", mulitplier=1)

getSymbols('SPY', from='2012-03-01', to='2012-07-04')

portf.name <- "dummy.Portfolio"  

initPortf(portf.name, 'SPY', initDate='2012-02-29')
initAcct(portf.name, portf.name, initDate='2012-02-29', initEq=1e6)

qty <- rep(c(1,-1), nrow(SPY)/2)
price <- SPY[,4]
txnfees <- rep(-5, nrow(SPY))
txndata <- cbind(qty, price, txnfees)
colnames(txndata) <- c("Quantity","Price","txnfees")

blotter:::addTxns(Portfolio=portf.name, Symbol='SPY', TxnData=txndata )

txns <- getTxns(Portfolio=portf.name, Symbol='SPY')

head(txns)
This will show the buying and selling of 1 share on alternate days at the close but will not show any of the fees relating to each transaction.

Thanks

HLM

On 5 Jul 2012, at 01:48, Hideyoshi Maeda wrote:

> Hi I am looking at the addTxns function in blotter, and I would like to add fees data/information in the TxnData argument (as a column).
> 
> When looking at the function, by running
> 
> blotter:::addTxns
> it seems to use the column names "Price" and "Quantity" but automatically sets/assigns the TxnFees to zero.
> 
> Is there a way of overwriting this, so that it can be included in my analysis?
> 
> 
> On 4 Jul 2012, at 20:00, r-sig-finance-request at r-project.org wrote:
> 
>> Send R-SIG-Finance mailing list submissions to
>> 	r-sig-finance at r-project.org
>> 
>> To subscribe or unsubscribe via the World Wide Web, visit
>> 	https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> or, via email, send a message with subject or body 'help' to
>> 	r-sig-finance-request at r-project.org
>> 
>> You can reach the person managing the list at
>> 	r-sig-finance-owner at r-project.org
>> 
>> When replying, please edit your Subject line so it is more specific
>> than "Re: Contents of R-SIG-Finance digest..."
>> 
>> 
>> Today's Topics:
>> 
>>  1. Rbbg - curious performance of bdh? (Gordon Morrison)
>>  2. Re: Rbbg - curious performance of bdh? (julien cuisinier)
>>  3. Re: financial data on flat matrix (Ben quant)
>>  4. Re: financial data on flat matrix (Ben quant)
>>  5. Re: financial data on flat matrix (Ben quant)
>>  6. Re: Calculating Hasbrouck's information share and
>>     Gonzalo-Granger weights on R (Drew Harris)
>> 
>> 
>> ----------------------------------------------------------------------
>> 
>> Message: 1
>> Date: Tue, 3 Jul 2012 15:00:23 +0100
>> From: Gordon Morrison <Gordon.Morrison at ftse.com>
>> To: "'R-SIG-Finance at r-project.org'" <R-SIG-Finance at r-project.org>
>> Subject: [R-SIG-Finance] Rbbg - curious performance of bdh?
>> Message-ID:
>> 	<887B4B788BA1F0429670B96750DA450401D73E06BD at EXCH07B.ftse.com>
>> Content-Type: text/plain
>> 
>> I seem to be getting some surprising results when I run the function "bdh". The code I am running is as follows
>> 
>> 
>>> library(RBloomberg)
>> 
>> Loading required package: rJava
>> 
>>> conn <- blpConnect()
>> 
>> R version 2.15.0 (2012-03-30)
>> 
>> rJava Version 0.9-3
>> 
>> RBloomberg Version 0.4-151
>> 
>> Java environment initialized successfully.
>> 
>> Looking for most recent blpapi3.jar file...
>> 
>> Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
>> 
>> Bloomberg API Version 3.4.8.1
>> 
>> The connection seems to work OK
>> 
>>> bdp(conn, "AMZN US Equity", "NAME")
>> 
>>                        NAME
>> 
>> AMZN US Equity AMAZON.COM INC
>> 
>> And I can download a time series of sales/revenue - as shown below
>> 
>> 
>>> bdh(conn, "FP FP Equity", "SALES_REV_TURN", start_date = "20080101")
>> 
>>                date SALES_REV_TURN
>> 
>> 2008-03-31 2008-03-31          39287
>> 
>> 2008-06-30 2008-06-30          43300
>> 
>> 2008-09-30 2008-09-30          44039
>> 
>> 2008-12-31 2008-12-31          33705
>> 
>> 2009-03-31 2009-03-31          25468
>> 
>> 2009-06-30 2009-06-30          26574
>> 
>> 2009-09-30 2009-09-30          28816
>> 
>> 2009-12-31 2009-12-31          31295
>> 
>> 2010-03-31 2010-03-31          33161
>> 
>> 2010-06-30 2010-06-30          36327
>> 
>> 2010-09-30 2010-09-30          35228
>> 
>> 2010-12-31 2010-12-31          35760
>> 
>> 2011-03-31 2011-03-31          41602
>> 
>> 2011-06-30 2011-06-30          40465
>> 
>> 2011-09-30 2011-09-30          41525
>> 
>> 2011-12-31 2011-12-31          42958
>> 
>> 2012-03-31 2012-03-31          46775
>> 
>> ... and even get the same data for historic fiscal years
>> 
>>> bdh(conn, "FP FP Equity", "SALES_REV_TURN", start_date = "-4fy")
>> 
>>                date SALES_REV_TURN
>> 
>> 2007-12-31 2007-12-31          37697
>> 
>> 2008-03-31 2008-03-31          39287
>> 
>> 2008-06-30 2008-06-30          43300
>> 
>> 2008-09-30 2008-09-30          44039
>> 
>> 2008-12-31 2008-12-31          33705
>> 
>> 2009-03-31 2009-03-31          25468
>> 
>> 2009-06-30 2009-06-30          26574
>> 
>> 2009-09-30 2009-09-30          28816
>> 
>> 2009-12-31 2009-12-31          31295
>> 
>> 2010-03-31 2010-03-31          33161
>> 
>> 2010-06-30 2010-06-30          36327
>> 
>> 2010-09-30 2010-09-30          35228
>> 
>> 2010-12-31 2010-12-31          35760
>> 
>> 2011-03-31 2011-03-31          41602
>> 
>> 2011-06-30 2011-06-30          40465
>> 
>> 2011-09-30 2011-09-30          41525
>> 
>> 2011-12-30 2011-12-30          42958
>> 
>> 2012-03-30 2012-03-30          46775
>> 
>> But when I run the same function for "ENERGY_CONSUMPTION" it returns an empty dataset
>> 
>>> bdh(conn, "FP FP Equity", "ENERGY_CONSUMPTION", start_date = "20080101")
>> 
>> [1] date               ENERGY_CONSUMPTION
>> 
>> <0 rows> (or 0-length row.names)
>> 
>> 
>>> bdh(conn, "FP FP Equity", "ENERGY_CONSUMPTION", start_date = "-4fy")
>> 
>> [1] date               ENERGY_CONSUMPTION
>> 
>> <0 rows> (or 0-length row.names)
>> 
>> The data does exist in Bloomberg as I can use the same function to download the data into Excel and even see it on the Bloomberg terminal.
>> 
>> Does anyone have any ideas?
>> 
>> 
>> Gordon Morrison
>> 
>> 
>> ______________________________________________________________________
>> This e-mail and any attachments may contain confidential...{{dropped:24}}
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 2
>> Date: Tue, 3 Jul 2012 16:30:03 +0200
>> From: julien cuisinier <j_cuisinier at hotmail.com>
>> To: <gordon.morrison at ftse.com>, <r-sig-finance at r-project.org>
>> Subject: Re: [R-SIG-Finance] Rbbg - curious performance of bdh?
>> Message-ID: <COL102-W34E63D8141509E0017FF668FE90 at phx.gbl>
>> Content-Type: text/plain
>> 
>> 
>> Have the same in Rbbg, but when trying in XL:
>> =BDH("FP FP Equity","ENERGY_CONSUMPTION","-4FY")
>> 
>> I am getting:
>> 
>> #N/A N/A
>> 
>> ???
>> 
>> 
>>> From: Gordon.Morrison at ftse.com
>>> To: R-SIG-Finance at r-project.org
>>> Date: Tue, 3 Jul 2012 15:00:23 +0100
>>> Subject: [R-SIG-Finance] Rbbg - curious performance of bdh?
>>> 
>>> I seem to be getting some surprising results when I run the function "bdh". The code I am running is as follows
>>> 
>>> 
>>>> library(RBloomberg)
>>> 
>>> Loading required package: rJava
>>> 
>>>> conn <- blpConnect()
>>> 
>>> R version 2.15.0 (2012-03-30)
>>> 
>>> rJava Version 0.9-3
>>> 
>>> RBloomberg Version 0.4-151
>>> 
>>> Java environment initialized successfully.
>>> 
>>> Looking for most recent blpapi3.jar file...
>>> 
>>> Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
>>> 
>>> Bloomberg API Version 3.4.8.1
>>> 
>>> The connection seems to work OK
>>> 
>>>> bdp(conn, "AMZN US Equity", "NAME")
>>> 
>>>                        NAME
>>> 
>>> AMZN US Equity AMAZON.COM INC
>>> 
>>> And I can download a time series of sales/revenue - as shown below
>>> 
>>> 
>>>> bdh(conn, "FP FP Equity", "SALES_REV_TURN", start_date = "20080101")
>>> 
>>>                date SALES_REV_TURN
>>> 
>>> 2008-03-31 2008-03-31          39287
>>> 
>>> 2008-06-30 2008-06-30          43300
>>> 
>>> 2008-09-30 2008-09-30          44039
>>> 
>>> 2008-12-31 2008-12-31          33705
>>> 
>>> 2009-03-31 2009-03-31          25468
>>> 
>>> 2009-06-30 2009-06-30          26574
>>> 
>>> 2009-09-30 2009-09-30          28816
>>> 
>>> 2009-12-31 2009-12-31          31295
>>> 
>>> 2010-03-31 2010-03-31          33161
>>> 
>>> 2010-06-30 2010-06-30          36327
>>> 
>>> 2010-09-30 2010-09-30          35228
>>> 
>>> 2010-12-31 2010-12-31          35760
>>> 
>>> 2011-03-31 2011-03-31          41602
>>> 
>>> 2011-06-30 2011-06-30          40465
>>> 
>>> 2011-09-30 2011-09-30          41525
>>> 
>>> 2011-12-31 2011-12-31          42958
>>> 
>>> 2012-03-31 2012-03-31          46775
>>> 
>>> ... and even get the same data for historic fiscal years
>>> 
>>>> bdh(conn, "FP FP Equity", "SALES_REV_TURN", start_date = "-4fy")
>>> 
>>>                date SALES_REV_TURN
>>> 
>>> 2007-12-31 2007-12-31          37697
>>> 
>>> 2008-03-31 2008-03-31          39287
>>> 
>>> 2008-06-30 2008-06-30          43300
>>> 
>>> 2008-09-30 2008-09-30          44039
>>> 
>>> 2008-12-31 2008-12-31          33705
>>> 
>>> 2009-03-31 2009-03-31          25468
>>> 
>>> 2009-06-30 2009-06-30          26574
>>> 
>>> 2009-09-30 2009-09-30          28816
>>> 
>>> 2009-12-31 2009-12-31          31295
>>> 
>>> 2010-03-31 2010-03-31          33161
>>> 
>>> 2010-06-30 2010-06-30          36327
>>> 
>>> 2010-09-30 2010-09-30          35228
>>> 
>>> 2010-12-31 2010-12-31          35760
>>> 
>>> 2011-03-31 2011-03-31          41602
>>> 
>>> 2011-06-30 2011-06-30          40465
>>> 
>>> 2011-09-30 2011-09-30          41525
>>> 
>>> 2011-12-30 2011-12-30          42958
>>> 
>>> 2012-03-30 2012-03-30          46775
>>> 
>>> But when I run the same function for "ENERGY_CONSUMPTION" it returns an empty dataset
>>> 
>>>> bdh(conn, "FP FP Equity", "ENERGY_CONSUMPTION", start_date = "20080101")
>>> 
>>> [1] date               ENERGY_CONSUMPTION
>>> 
>>> <0 rows> (or 0-length row.names)
>>> 
>>> 
>>>> bdh(conn, "FP FP Equity", "ENERGY_CONSUMPTION", start_date = "-4fy")
>>> 
>>> [1] date               ENERGY_CONSUMPTION
>>> 
>>> <0 rows> (or 0-length row.names)
>>> 
>>> The data does exist in Bloomberg as I can use the same function to download the data into Excel and even see it on the Bloomberg terminal.
>>> 
>>> Does anyone have any ideas?
>>> 
>>> 
>>> Gordon Morrison
>>> 
>>> 
>>> ______________________________________________________________________
>>> This e-mail and any attachments may contain confidential...{{dropped:24}}
>>> 
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>> 		 	   		  
>> 	[[alternative HTML version deleted]]
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 3
>> Date: Tue, 3 Jul 2012 11:21:22 -0600
>> From: Ben quant <ccquant at gmail.com>
>> To: Jeffrey Ryan <jeffrey.ryan at lemnica.com>
>> Cc: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] financial data on flat matrix
>> Message-ID:
>> 	<CAG2PC+dv3SEAGj+GbRor=hUj2LgNNs1=9YQnvCfZZ8WHhnfOVg at mail.gmail.com>
>> Content-Type: text/plain
>> 
>> xts endpoints uses 'existing' dates in the data. I want to use my dates and
>> put data on the correct row.
>> 
>> Here are the details of some sample data...
>> 
>> library('Rbbg')
>> library('stringr')
>> 
>> conn <- blpConnect(throw.ticker.errors = F)
>> 
>> daysback<- (261 * 7) # or whatever
>> start.date <- as.POSIXct(Sys.Date()-daysback)
>> end.date <- as.POSIXct(Sys.Date())
>> tickers<- c("A US Equity", "AA US Equity")
>> 
>> fields<-c("SALES_REV_TURN")
>> o_names = c("periodicitySelection")
>> o_values = c("QUARTERLY")
>> 
>> dat1<-bdh(conn, tickers, fields, start.date,end.date,option_names =
>> o_names, option_values = o_values,
>>         always.display.tickers = TRUE,include.non.trading.days = T)
>> 
>>> dat1
>>        ticker       date SALES_REV_TURN
>> 1   A US Equity 2007-07-31           1374
>> 2   A US Equity 2007-10-31           1446
>> 3   A US Equity 2008-01-31           1393
>> 4   A US Equity 2008-04-30           1456
>> 5   A US Equity 2008-07-31           1444
>> 6   A US Equity 2008-10-31           1481
>> 7   A US Equity 2009-01-31           1166
>> 8   A US Equity 2009-04-30           1091
>> 9   A US Equity 2009-07-31           1057
>> 10  A US Equity 2009-10-31           1167
>> 11  A US Equity 2010-01-31           1213
>> 12  A US Equity 2010-04-30           1271
>> 13  A US Equity 2010-07-31           1384
>> 14  A US Equity 2010-10-31           1576
>> 15  A US Equity 2011-01-31           1519
>> 16  A US Equity 2011-04-30           1677
>> 17  A US Equity 2011-07-31           1691
>> 18  A US Equity 2011-10-31           1728
>> 19  A US Equity 2012-01-31           1635
>> 20  A US Equity 2012-04-30           1733
>> 21 AA US Equity 2007-09-30           7387
>> 22 AA US Equity 2007-12-31           5919
>> 23 AA US Equity 2008-03-31           6998
>> 24 AA US Equity 2008-06-30           7245
>> 25 AA US Equity 2008-09-30           6970
>> 26 AA US Equity 2008-12-31           5688
>> 27 AA US Equity 2009-03-31           4147
>> 28 AA US Equity 2009-06-30           4244
>> 29 AA US Equity 2009-09-30           4615
>> 30 AA US Equity 2009-12-31           5433
>> 31 AA US Equity 2010-03-31           4887
>> 32 AA US Equity 2010-06-30           5187
>> 33 AA US Equity 2010-09-30           5287
>> 34 AA US Equity 2010-12-31           5652
>> 35 AA US Equity 2011-03-31           5958
>> 36 AA US Equity 2011-06-30           6585
>> 37 AA US Equity 2011-09-30           6419
>> 38 AA US Equity 2011-12-31           5989
>> 39 AA US Equity 2012-03-31           6006
>> 
>> So, for example, I'd like these two values on the same row:
>> A US Equity 2012-04-30           1733
>> AA US Equity 2012-03-31           6006
>> 
>> ...and the row name would be 2012-03-31. A's value should be on the
>> 2012-03-31 row (despite having a date of 2012-04-30) because I'm putting
>> everything on 'normal' quarter end dates. Therefore, all of A's values
>> would shift back one in date. It has to be a general solution that puts
>> 'abnormal' fiscal quarter end company data on the same row as 'normal'
>> quarter end dates. (I understand this introduces look-ahead bias, but I
>> correct for it later when applicable.)  Is there a function out there that
>> does this already?
>> 
>> Again here is how I produce the 'normal' fiscal quarter end dates that I
>> want as row names:
>> to_date = as.Date(Sys.time())
>> from_date = as.Date(to_date - (daysback + 100))
>> get_dates <- function(Start, End,end_of,every)
>> {
>> Vec <- as.Date(levels(cut(seq.Date(Start, End, by = end_of),breaks =
>> every)))
>> Vec[-1] - 1
>> }
>> qtrs = get_dates(from_date, to_date,end_of= "month",every = "quarter")
>> qtrs = qtrs[length(qtrs):1]
>>> qtrs
>> [1] "2012-03-31" "2011-12-31" "2011-09-30" "2011-06-30" "2011-03-31"
>> "2010-12-31" "2010-09-30" "2010-06-30" "2010-03-31"
>> [10] "2009-12-31" "2009-09-30" "2009-06-30" "2009-03-31" "2008-12-31"
>> "2008-09-30" "2008-06-30" "2008-03-31" "2007-12-31"
>> [19] "2007-09-30" "2007-06-30" "2007-03-31"
>> 
>> On Sat, Jun 30, 2012 at 1:10 PM, Jeffrey Ryan <jeffrey.ryan at lemnica.com>wrote:
>> 
>>> You can look into ?endpoints in xts, but you haven't exactly provided
>>> a _reproducible_ example as requested in the posting guidelines.  Not
>>> personally sure what "flat matrix" is for instance.
>>> 
>>> Also likely why no one has responded thus far.  If you make it _easy_
>>> to answer (simple examples which we can try and run), people tend to
>>> answer.
>>> 
>>> Jeff
>>> 
>>> On Thu, Jun 28, 2012 at 11:42 AM, Ben quant <ccquant at gmail.com> wrote:
>>>> Hello,
>>>> 
>>>> I'm using the Rbbg package (please suggest an alternative that is faster
>>> if
>>>> you know of one). I'd like to get my data into a flat matrix where row
>>>> names are found like this for quarterly data:
>>>> 
>>>> get_dates <- function(Start, End,end_of,every)
>>>> {
>>>> Vec <- as.Date(levels(cut(seq.Date(Start, End, by = end_of),breaks =
>>>> every)))
>>>> Vec[-1] - 1
>>>> }
>>>> qtrs = get_dates(from_date, to_date,end_of= "month",every = "quarter")
>>>> qtrs = qtrs[length(qtrs):1]
>>>>> qtrs
>>>> [1] "2012-03-31" "2011-12-31" "2011-09-30" "2011-06-30" "2011-03-31"
>>>> "2010-12-31" "2010-09-30" "2010-06-30" "2010-03-31" "2009-12-31"
>>>> [11] "2009-09-30" "2009-06-30" "2009-03-31" "2008-12-31" "2008-09-30"
>>>> "2008-06-30" "2008-03-31" "2007-12-31" "2007-09-30" "2007-06-30"
>>>> 
>>>> ...and all companies that report after the quarter end date (above) and
>>>> before the next one are moved back one. For example, if a company
>>> reporting
>>>> period ended in Jan. 2012, those values would be on the 2011-12-31 row.
>>>> (These are then adjusted for look-ahead using the actual report date.)
>>>> 
>>>> Is there a function that will do this in zoo or another package?
>>>> 
>>>> Thanks!
>>>> 
>>>> Ben
>>>> 
>>>>       [[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>> 
>>> 
>>> 
>>> --
>>> Jeffrey Ryan
>>> jeffrey.ryan at lemnica.com
>>> 
>>> www.lemnica.com
>>> www.esotericR.com
>>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 4
>> Date: Tue, 3 Jul 2012 12:32:33 -0600
>> From: Ben quant <ccquant at gmail.com>
>> To: Jeffrey Ryan <jeffrey.ryan at lemnica.com>
>> Cc: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] financial data on flat matrix
>> Message-ID:
>> 	<CAG2PC+cYKahN6MhmZEve0pVj4Am0gomFHQwLCg-jKgBnwDfwxA at mail.gmail.com>
>> Content-Type: text/plain
>> 
>> dat = do.call(cbind, lapply(dat2, function(.vec){
>>                                                 if(length(.vec) >= 20){
>>                                                   .vec[1:20]
>>                                                 }else if(length(.vec) <
>> 20){
>>                                                   c(rep(NaN, 20 -
>> length(.vec)),.vec)
>>                                                 }
>>                                               }
>>                           )
>>             )
>> 
>> 
>> On Tue, Jul 3, 2012 at 11:21 AM, Ben quant <ccquant at gmail.com> wrote:
>> 
>>> xts endpoints uses 'existing' dates in the data. I want to use my dates
>>> and put data on the correct row.
>>> 
>>> Here are the details of some sample data...
>>> 
>>> library('Rbbg')
>>> library('stringr')
>>> 
>>> conn <- blpConnect(throw.ticker.errors = F)
>>> 
>>> daysback<- (261 * 7) # or whatever
>>> start.date <- as.POSIXct(Sys.Date()-daysback)
>>> end.date <- as.POSIXct(Sys.Date())
>>> tickers<- c("A US Equity", "AA US Equity")
>>> 
>>> fields<-c("SALES_REV_TURN")
>>> o_names = c("periodicitySelection")
>>> o_values = c("QUARTERLY")
>>> 
>>> dat1<-bdh(conn, tickers, fields, start.date,end.date,option_names =
>>> o_names, option_values = o_values,
>>>         always.display.tickers = TRUE,include.non.trading.days = T)
>>> 
>>>> dat1
>>>        ticker       date SALES_REV_TURN
>>> 1   A US Equity 2007-07-31           1374
>>> 2   A US Equity 2007-10-31           1446
>>> 3   A US Equity 2008-01-31           1393
>>> 4   A US Equity 2008-04-30           1456
>>> 5   A US Equity 2008-07-31           1444
>>> 6   A US Equity 2008-10-31           1481
>>> 7   A US Equity 2009-01-31           1166
>>> 8   A US Equity 2009-04-30           1091
>>> 9   A US Equity 2009-07-31           1057
>>> 10  A US Equity 2009-10-31           1167
>>> 11  A US Equity 2010-01-31           1213
>>> 12  A US Equity 2010-04-30           1271
>>> 13  A US Equity 2010-07-31           1384
>>> 14  A US Equity 2010-10-31           1576
>>> 15  A US Equity 2011-01-31           1519
>>> 16  A US Equity 2011-04-30           1677
>>> 17  A US Equity 2011-07-31           1691
>>> 18  A US Equity 2011-10-31           1728
>>> 19  A US Equity 2012-01-31           1635
>>> 20  A US Equity 2012-04-30           1733
>>> 21 AA US Equity 2007-09-30           7387
>>> 22 AA US Equity 2007-12-31           5919
>>> 23 AA US Equity 2008-03-31           6998
>>> 24 AA US Equity 2008-06-30           7245
>>> 25 AA US Equity 2008-09-30           6970
>>> 26 AA US Equity 2008-12-31           5688
>>> 27 AA US Equity 2009-03-31           4147
>>> 28 AA US Equity 2009-06-30           4244
>>> 29 AA US Equity 2009-09-30           4615
>>> 30 AA US Equity 2009-12-31           5433
>>> 31 AA US Equity 2010-03-31           4887
>>> 32 AA US Equity 2010-06-30           5187
>>> 33 AA US Equity 2010-09-30           5287
>>> 34 AA US Equity 2010-12-31           5652
>>> 35 AA US Equity 2011-03-31           5958
>>> 36 AA US Equity 2011-06-30           6585
>>> 37 AA US Equity 2011-09-30           6419
>>> 38 AA US Equity 2011-12-31           5989
>>> 39 AA US Equity 2012-03-31           6006
>>> 
>>> So, for example, I'd like these two values on the same row:
>>> A US Equity 2012-04-30           1733
>>> AA US Equity 2012-03-31           6006
>>> 
>>> ...and the row name would be 2012-03-31. A's value should be on the
>>> 2012-03-31 row (despite having a date of 2012-04-30) because I'm putting
>>> everything on 'normal' quarter end dates. Therefore, all of A's values
>>> would shift back one in date. It has to be a general solution that puts
>>> 'abnormal' fiscal quarter end company data on the same row as 'normal'
>>> quarter end dates. (I understand this introduces look-ahead bias, but I
>>> correct for it later when applicable.)  Is there a function out there that
>>> does this already?
>>> 
>>> Again here is how I produce the 'normal' fiscal quarter end dates that I
>>> want as row names:
>>> to_date = as.Date(Sys.time())
>>> from_date = as.Date(to_date - (daysback + 100))
>>> 
>>> get_dates <- function(Start, End,end_of,every)
>>> {
>>> Vec <- as.Date(levels(cut(seq.Date(Start, End, by = end_of),breaks =
>>> every)))
>>> Vec[-1] - 1
>>> }
>>> qtrs = get_dates(from_date, to_date,end_of= "month",every = "quarter")
>>> qtrs = qtrs[length(qtrs):1]
>>>> qtrs
>>> [1] "2012-03-31" "2011-12-31" "2011-09-30" "2011-06-30" "2011-03-31"
>>> "2010-12-31" "2010-09-30" "2010-06-30" "2010-03-31"
>>> [10] "2009-12-31" "2009-09-30" "2009-06-30" "2009-03-31" "2008-12-31"
>>> "2008-09-30" "2008-06-30" "2008-03-31" "2007-12-31"
>>> [19] "2007-09-30" "2007-06-30" "2007-03-31"
>>> 
>>> 
>>> On Sat, Jun 30, 2012 at 1:10 PM, Jeffrey Ryan <jeffrey.ryan at lemnica.com>wrote:
>>> 
>>>> You can look into ?endpoints in xts, but you haven't exactly provided
>>>> a _reproducible_ example as requested in the posting guidelines.  Not
>>>> personally sure what "flat matrix" is for instance.
>>>> 
>>>> Also likely why no one has responded thus far.  If you make it _easy_
>>>> to answer (simple examples which we can try and run), people tend to
>>>> answer.
>>>> 
>>>> Jeff
>>>> 
>>>> On Thu, Jun 28, 2012 at 11:42 AM, Ben quant <ccquant at gmail.com> wrote:
>>>>> Hello,
>>>>> 
>>>>> I'm using the Rbbg package (please suggest an alternative that is
>>>> faster if
>>>>> you know of one). I'd like to get my data into a flat matrix where row
>>>>> names are found like this for quarterly data:
>>>>> 
>>>>> get_dates <- function(Start, End,end_of,every)
>>>>> {
>>>>> Vec <- as.Date(levels(cut(seq.Date(Start, End, by = end_of),breaks =
>>>>> every)))
>>>>> Vec[-1] - 1
>>>>> }
>>>>> qtrs = get_dates(from_date, to_date,end_of= "month",every = "quarter")
>>>>> qtrs = qtrs[length(qtrs):1]
>>>>>> qtrs
>>>>> [1] "2012-03-31" "2011-12-31" "2011-09-30" "2011-06-30" "2011-03-31"
>>>>> "2010-12-31" "2010-09-30" "2010-06-30" "2010-03-31" "2009-12-31"
>>>>> [11] "2009-09-30" "2009-06-30" "2009-03-31" "2008-12-31" "2008-09-30"
>>>>> "2008-06-30" "2008-03-31" "2007-12-31" "2007-09-30" "2007-06-30"
>>>>> 
>>>>> ...and all companies that report after the quarter end date (above) and
>>>>> before the next one are moved back one. For example, if a company
>>>> reporting
>>>>> period ended in Jan. 2012, those values would be on the 2011-12-31 row.
>>>>> (These are then adjusted for look-ahead using the actual report date.)
>>>>> 
>>>>> Is there a function that will do this in zoo or another package?
>>>>> 
>>>>> Thanks!
>>>>> 
>>>>> Ben
>>>>> 
>>>>>       [[alternative HTML version deleted]]
>>>>> 
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions
>>>> should go.
>>>> 
>>>> 
>>>> 
>>>> --
>>>> Jeffrey Ryan
>>>> jeffrey.ryan at lemnica.com
>>>> 
>>>> www.lemnica.com
>>>> www.esotericR.com
>>>> 
>>> 
>>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 5
>> Date: Tue, 3 Jul 2012 12:38:04 -0600
>> From: Ben quant <ccquant at gmail.com>
>> To: Jeffrey Ryan <jeffrey.ryan at lemnica.com>
>> Cc: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] financial data on flat matrix
>> Message-ID:
>> 	<CAG2PC+d163hpHz2mF0Za+cEuD1+zyDafOp2CsXN-TsR=7ExLKA at mail.gmail.com>
>> Content-Type: text/plain
>> 
>> forgot this part:
>> frmla = as.formula(paste(fields,"~","ticker"))
>> dat2<- unstack(dat1, frmla)
>> 
>> dat = do.call(cbind, lapply(dat2, function(.vec){
>> 
>>> 
>>>                   if(length(.vec) >= 20){
>>>                                                   .vec[1:20]
>>>                                                 }else if(length(.vec) <
>>> 20){
>>>                                                   c(rep(NaN, 20 -
>>> length(.vec)),.vec)
>>>                                                 }
>>>                                               }
>>>                           )
>>>             )
>> 
>> 
>> 
>> On Tue, Jul 3, 2012 at 12:32 PM, Ben quant <ccquant at gmail.com> wrote:
>> 
>>> dat = do.call(cbind, lapply(dat2, function(.vec){
>>>                                                 if(length(.vec) >= 20){
>>>                                                   .vec[1:20]
>>>                                                 }else if(length(.vec) <
>>> 20){
>>>                                                   c(rep(NaN, 20 -
>>> length(.vec)),.vec)
>>>                                                 }
>>>                                               }
>>>                           )
>>>             )
>>> 
>>> 
>>> 
>>> On Tue, Jul 3, 2012 at 11:21 AM, Ben quant <ccquant at gmail.com> wrote:
>>> 
>>>> xts endpoints uses 'existing' dates in the data. I want to use my dates
>>>> and put data on the correct row.
>>>> 
>>>> Here are the details of some sample data...
>>>> 
>>>> library('Rbbg')
>>>> library('stringr')
>>>> 
>>>> conn <- blpConnect(throw.ticker.errors = F)
>>>> 
>>>> daysback<- (261 * 7) # or whatever
>>>> start.date <- as.POSIXct(Sys.Date()-daysback)
>>>> end.date <- as.POSIXct(Sys.Date())
>>>> tickers<- c("A US Equity", "AA US Equity")
>>>> 
>>>> fields<-c("SALES_REV_TURN")
>>>> o_names = c("periodicitySelection")
>>>> o_values = c("QUARTERLY")
>>>> 
>>>> dat1<-bdh(conn, tickers, fields, start.date,end.date,option_names =
>>>> o_names, option_values = o_values,
>>>>         always.display.tickers = TRUE,include.non.trading.days = T)
>>>> 
>>>>> dat1
>>>>        ticker       date SALES_REV_TURN
>>>> 1   A US Equity 2007-07-31           1374
>>>> 2   A US Equity 2007-10-31           1446
>>>> 3   A US Equity 2008-01-31           1393
>>>> 4   A US Equity 2008-04-30           1456
>>>> 5   A US Equity 2008-07-31           1444
>>>> 6   A US Equity 2008-10-31           1481
>>>> 7   A US Equity 2009-01-31           1166
>>>> 8   A US Equity 2009-04-30           1091
>>>> 9   A US Equity 2009-07-31           1057
>>>> 10  A US Equity 2009-10-31           1167
>>>> 11  A US Equity 2010-01-31           1213
>>>> 12  A US Equity 2010-04-30           1271
>>>> 13  A US Equity 2010-07-31           1384
>>>> 14  A US Equity 2010-10-31           1576
>>>> 15  A US Equity 2011-01-31           1519
>>>> 16  A US Equity 2011-04-30           1677
>>>> 17  A US Equity 2011-07-31           1691
>>>> 18  A US Equity 2011-10-31           1728
>>>> 19  A US Equity 2012-01-31           1635
>>>> 20  A US Equity 2012-04-30           1733
>>>> 21 AA US Equity 2007-09-30           7387
>>>> 22 AA US Equity 2007-12-31           5919
>>>> 23 AA US Equity 2008-03-31           6998
>>>> 24 AA US Equity 2008-06-30           7245
>>>> 25 AA US Equity 2008-09-30           6970
>>>> 26 AA US Equity 2008-12-31           5688
>>>> 27 AA US Equity 2009-03-31           4147
>>>> 28 AA US Equity 2009-06-30           4244
>>>> 29 AA US Equity 2009-09-30           4615
>>>> 30 AA US Equity 2009-12-31           5433
>>>> 31 AA US Equity 2010-03-31           4887
>>>> 32 AA US Equity 2010-06-30           5187
>>>> 33 AA US Equity 2010-09-30           5287
>>>> 34 AA US Equity 2010-12-31           5652
>>>> 35 AA US Equity 2011-03-31           5958
>>>> 36 AA US Equity 2011-06-30           6585
>>>> 37 AA US Equity 2011-09-30           6419
>>>> 38 AA US Equity 2011-12-31           5989
>>>> 39 AA US Equity 2012-03-31           6006
>>>> 
>>>> So, for example, I'd like these two values on the same row:
>>>> A US Equity 2012-04-30           1733
>>>> AA US Equity 2012-03-31           6006
>>>> 
>>>> ...and the row name would be 2012-03-31. A's value should be on the
>>>> 2012-03-31 row (despite having a date of 2012-04-30) because I'm putting
>>>> everything on 'normal' quarter end dates. Therefore, all of A's values
>>>> would shift back one in date. It has to be a general solution that puts
>>>> 'abnormal' fiscal quarter end company data on the same row as 'normal'
>>>> quarter end dates. (I understand this introduces look-ahead bias, but I
>>>> correct for it later when applicable.)  Is there a function out there
>>>> that does this already?
>>>> 
>>>> Again here is how I produce the 'normal' fiscal quarter end dates that I
>>>> want as row names:
>>>> to_date = as.Date(Sys.time())
>>>> from_date = as.Date(to_date - (daysback + 100))
>>>> 
>>>> get_dates <- function(Start, End,end_of,every)
>>>> {
>>>> Vec <- as.Date(levels(cut(seq.Date(Start, End, by = end_of),breaks =
>>>> every)))
>>>> Vec[-1] - 1
>>>> }
>>>> qtrs = get_dates(from_date, to_date,end_of= "month",every = "quarter")
>>>> qtrs = qtrs[length(qtrs):1]
>>>>> qtrs
>>>> [1] "2012-03-31" "2011-12-31" "2011-09-30" "2011-06-30" "2011-03-31"
>>>> "2010-12-31" "2010-09-30" "2010-06-30" "2010-03-31"
>>>> [10] "2009-12-31" "2009-09-30" "2009-06-30" "2009-03-31" "2008-12-31"
>>>> "2008-09-30" "2008-06-30" "2008-03-31" "2007-12-31"
>>>> [19] "2007-09-30" "2007-06-30" "2007-03-31"
>>>> 
>>>> 
>>>> On Sat, Jun 30, 2012 at 1:10 PM, Jeffrey Ryan <jeffrey.ryan at lemnica.com>wrote:
>>>> 
>>>>> You can look into ?endpoints in xts, but you haven't exactly provided
>>>>> a _reproducible_ example as requested in the posting guidelines.  Not
>>>>> personally sure what "flat matrix" is for instance.
>>>>> 
>>>>> Also likely why no one has responded thus far.  If you make it _easy_
>>>>> to answer (simple examples which we can try and run), people tend to
>>>>> answer.
>>>>> 
>>>>> Jeff
>>>>> 
>>>>> On Thu, Jun 28, 2012 at 11:42 AM, Ben quant <ccquant at gmail.com> wrote:
>>>>>> Hello,
>>>>>> 
>>>>>> I'm using the Rbbg package (please suggest an alternative that is
>>>>> faster if
>>>>>> you know of one). I'd like to get my data into a flat matrix where row
>>>>>> names are found like this for quarterly data:
>>>>>> 
>>>>>> get_dates <- function(Start, End,end_of,every)
>>>>>> {
>>>>>> Vec <- as.Date(levels(cut(seq.Date(Start, End, by = end_of),breaks =
>>>>>> every)))
>>>>>> Vec[-1] - 1
>>>>>> }
>>>>>> qtrs = get_dates(from_date, to_date,end_of= "month",every = "quarter")
>>>>>> qtrs = qtrs[length(qtrs):1]
>>>>>>> qtrs
>>>>>> [1] "2012-03-31" "2011-12-31" "2011-09-30" "2011-06-30" "2011-03-31"
>>>>>> "2010-12-31" "2010-09-30" "2010-06-30" "2010-03-31" "2009-12-31"
>>>>>> [11] "2009-09-30" "2009-06-30" "2009-03-31" "2008-12-31" "2008-09-30"
>>>>>> "2008-06-30" "2008-03-31" "2007-12-31" "2007-09-30" "2007-06-30"
>>>>>> 
>>>>>> ...and all companies that report after the quarter end date (above) and
>>>>>> before the next one are moved back one. For example, if a company
>>>>> reporting
>>>>>> period ended in Jan. 2012, those values would be on the 2011-12-31 row.
>>>>>> (These are then adjusted for look-ahead using the actual report date.)
>>>>>> 
>>>>>> Is there a function that will do this in zoo or another package?
>>>>>> 
>>>>>> Thanks!
>>>>>> 
>>>>>> Ben
>>>>>> 
>>>>>>       [[alternative HTML version deleted]]
>>>>>> 
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R
>>>>> questions should go.
>>>>> 
>>>>> 
>>>>> 
>>>>> --
>>>>> Jeffrey Ryan
>>>>> jeffrey.ryan at lemnica.com
>>>>> 
>>>>> www.lemnica.com
>>>>> www.esotericR.com
>>>>> 
>>>> 
>>>> 
>>> 
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> 
>> 
>> ------------------------------
>> 
>> Message: 6
>> Date: Tue, 3 Jul 2012 21:34:52 -0700 (PDT)
>> From: Drew Harris <drew.harris.nz at gmail.com>
>> To: r-sig-finance at r-project.org
>> Subject: Re: [R-SIG-Finance] Calculating Hasbrouck's information share
>> 	and Gonzalo-Granger weights on R
>> Message-ID: <1341376492947-4635353.post at n4.nabble.com>
>> Content-Type: text/plain; charset=us-ascii
>> 
>> Hi Nidhi,
>> 
>> I have been attempting to expand your code above into an n dimensional
>> format. I am having a bit of trouble getting my Beta and Alpha orthogonal
>> components to generate and they are giving me (I believe) extremely
>> unbalanced IS measures. The following is what I tried to implement:
>> 
>>   ## the beta_orthogonal and alpha_orthogonal vectors :
>> 	beta_ortt <- matrix(0, nrow = n, ncol=n)
>> 	for (l in 1:n) {
>> 		for (j in 1:n) {
>> 			beta_ortt[j, l] <- if((n+1-j)==l) {cointest at V[(n+1-j),l]}
>> 			else { -cointest at V[(n+1-j),l]	}
>> 			}}
>> 	
>> 	alpha_ortt <- matrix(0, nrow = n, ncol=n)
>> 	for (l in 1:n) {
>> 		for (j in 1:n) {
>> 			alpha_ortt[j, l] <- if((n+1-j)==l) {cointest at W[(n+1-j),l]}
>> 			else { -cointest at W[(n+1-j),l]	}
>> 			}}
>> 	
>>  ## Gamma matrix construction
>> 	gammat <- matrix(0, nrow = n, ncol=n)
>> 	Identity <- diag(1, n)
>>   for (l in 1:n) {
>> 		for (j in 1:n) {
>> 			for (i in 1:(k-2)) {
>> 				gammat[j,l] <- gammat[j,l] +vecm$rlm$coefficients[((n*i)+(l-1)),j]			
>> 	}}}
>> 
>> --
>> View this message in context: http://r.789695.n4.nabble.com/Calculating-Hasbrouck-s-information-share-and-Gonzalo-Granger-weights-on-R-tp2395838p4635353.html
>> Sent from the Rmetrics mailing list archive at Nabble.com.
>> 
>> 
>> 
>> ------------------------------
>> 
>> _______________________________________________
>> R-SIG-Finance mailing list
>> R-SIG-Finance at r-project.org
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> 
>> 
>> End of R-SIG-Finance Digest, Vol 98, Issue 4
>> ********************************************
> 


From gsee000 at gmail.com  Thu Jul  5 01:15:31 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 4 Jul 2012 18:15:31 -0500
Subject: [R-SIG-Finance] addTxns addfees
In-Reply-To: <A9D8FB53-2C15-4C38-A894-25186DE804C5@gmail.com>
References: <mailman.3.1341396002.11535.r-sig-finance@r-project.org>
	<7D90F5C3-0038-4012-BEC1-B201D24E9AF7@gmail.com>
	<A9D8FB53-2C15-4C38-A894-25186DE804C5@gmail.com>
Message-ID: <CA+xi=qbzCwYHUNVG-q1FNMNLC7-xt_ZsVsi9Bk9TqUkhUNKmLQ@mail.gmail.com>

Hi Hideyoshi,

addTxn is not vectorized, and it does not have a txnData argument.  To
see how the function is intended to be used, please read

?addTxn

Then look at the demos that are included with blotter as well as the
examples in ?blotter.

HTH,
Garrett

On Wed, Jul 4, 2012 at 5:46 PM, Hideyoshi Maeda
<hideyoshi.maeda at gmail.com> wrote:
> If an example is required
>
> Here is an example:
>
> rm(list=ls(pos=.blotter),pos=.blotter)
> rm(list=ls(pos=.instrument),pos=.instrument)
> rm(list=ls(pos=.strategy),pos=.strategy)
>
> currency('USD')
> stock("SPY", currency="USD", mulitplier=1)
>
> getSymbols('SPY', from='2012-03-01', to='2012-07-04')
>
> portf.name <- "dummy.Portfolio"
>
> initPortf(portf.name, 'SPY', initDate='2012-02-29')
> initAcct(portf.name, portf.name, initDate='2012-02-29', initEq=1e6)
>
> qty <- rep(c(1,-1), nrow(SPY)/2)
> price <- SPY[,4]
> txnfees <- rep(-5, nrow(SPY))
> txndata <- cbind(qty, price, txnfees)
> colnames(txndata) <- c("Quantity","Price","txnfees")
>
> blotter:::addTxns(Portfolio=portf.name, Symbol='SPY', TxnData=txndata )
>
> txns <- getTxns(Portfolio=portf.name, Symbol='SPY')
>
> head(txns)
> This will show the buying and selling of 1 share on alternate days at the close but will not show any of the fees relating to each transaction.
>
> Thanks
>
> HLM
>
> On 5 Jul 2012, at 01:48, Hideyoshi Maeda wrote:
>
>> Hi I am looking at the addTxns function in blotter, and I would like to add fees data/information in the TxnData argument (as a column).
>>
>> When looking at the function, by running
>>
>> blotter:::addTxns
>> it seems to use the column names "Price" and "Quantity" but automatically sets/assigns the TxnFees to zero.
>>
>> Is there a way of overwriting this, so that it can be included in my analysis?
>>


From hideyoshi.maeda at gmail.com  Thu Jul  5 01:24:22 2012
From: hideyoshi.maeda at gmail.com (Hideyoshi Maeda)
Date: Thu, 5 Jul 2012 09:24:22 +1000
Subject: [R-SIG-Finance] addTxns addfees
In-Reply-To: <CA+xi=qbzCwYHUNVG-q1FNMNLC7-xt_ZsVsi9Bk9TqUkhUNKmLQ@mail.gmail.com>
References: <mailman.3.1341396002.11535.r-sig-finance@r-project.org>
	<7D90F5C3-0038-4012-BEC1-B201D24E9AF7@gmail.com>
	<A9D8FB53-2C15-4C38-A894-25186DE804C5@gmail.com>
	<CA+xi=qbzCwYHUNVG-q1FNMNLC7-xt_ZsVsi9Bk9TqUkhUNKmLQ@mail.gmail.com>
Message-ID: <79C7717E-1216-4B81-AC49-3EEC3ACC0101@gmail.com>

Thanks for your response.

I am aware that addTxn is not vectorized...

but what I am using below is addTxns...(note the 's' after Txn)

This allows transaction data through the TxnData argument

It is, in effect, a vectorised version of addTxn...even the blotter demo from

demo(amzn_test)

uses this....

However unlike the demo...i wanted to include Transaction fees, and wanted to know if this was possible...as the function for addTxns automatically assigns this to zero...



On 5 Jul 2012, at 09:15, G See wrote:

> Hi Hideyoshi,
> 
> addTxn is not vectorized, and it does not have a txnData argument.  To
> see how the function is intended to be used, please read
> 
> ?addTxn
> 
> Then look at the demos that are included with blotter as well as the
> examples in ?blotter.
> 
> HTH,
> Garrett
> 
> On Wed, Jul 4, 2012 at 5:46 PM, Hideyoshi Maeda
> <hideyoshi.maeda at gmail.com> wrote:
>> If an example is required
>> 
>> Here is an example:
>> 
>> rm(list=ls(pos=.blotter),pos=.blotter)
>> rm(list=ls(pos=.instrument),pos=.instrument)
>> rm(list=ls(pos=.strategy),pos=.strategy)
>> 
>> currency('USD')
>> stock("SPY", currency="USD", mulitplier=1)
>> 
>> getSymbols('SPY', from='2012-03-01', to='2012-07-04')
>> 
>> portf.name <- "dummy.Portfolio"
>> 
>> initPortf(portf.name, 'SPY', initDate='2012-02-29')
>> initAcct(portf.name, portf.name, initDate='2012-02-29', initEq=1e6)
>> 
>> qty <- rep(c(1,-1), nrow(SPY)/2)
>> price <- SPY[,4]
>> txnfees <- rep(-5, nrow(SPY))
>> txndata <- cbind(qty, price, txnfees)
>> colnames(txndata) <- c("Quantity","Price","txnfees")
>> 
>> blotter:::addTxns(Portfolio=portf.name, Symbol='SPY', TxnData=txndata )
>> 
>> txns <- getTxns(Portfolio=portf.name, Symbol='SPY')
>> 
>> head(txns)
>> This will show the buying and selling of 1 share on alternate days at the close but will not show any of the fees relating to each transaction.
>> 
>> Thanks
>> 
>> HLM
>> 
>> On 5 Jul 2012, at 01:48, Hideyoshi Maeda wrote:
>> 
>>> Hi I am looking at the addTxns function in blotter, and I would like to add fees data/information in the TxnData argument (as a column).
>>> 
>>> When looking at the function, by running
>>> 
>>> blotter:::addTxns
>>> it seems to use the column names "Price" and "Quantity" but automatically sets/assigns the TxnFees to zero.
>>> 
>>> Is there a way of overwriting this, so that it can be included in my analysis?
>>> 


From gsee000 at gmail.com  Thu Jul  5 01:29:48 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 4 Jul 2012 18:29:48 -0500
Subject: [R-SIG-Finance] addTxns addfees
In-Reply-To: <79C7717E-1216-4B81-AC49-3EEC3ACC0101@gmail.com>
References: <mailman.3.1341396002.11535.r-sig-finance@r-project.org>
	<7D90F5C3-0038-4012-BEC1-B201D24E9AF7@gmail.com>
	<A9D8FB53-2C15-4C38-A894-25186DE804C5@gmail.com>
	<CA+xi=qbzCwYHUNVG-q1FNMNLC7-xt_ZsVsi9Bk9TqUkhUNKmLQ@mail.gmail.com>
	<79C7717E-1216-4B81-AC49-3EEC3ACC0101@gmail.com>
Message-ID: <CA+xi=qa0WDWu6H81KRZfHAwQveA0Z_ifpqi-oCx1Q7kuHCNPMw@mail.gmail.com>

My apologies.  I see what you are talking about, and I see where that
is hardcoded in.  So, you would need to replace

TxnFee <- 0

with

TxnFee <- as.numeric(TxnData[row, "txnfees"])


On Wed, Jul 4, 2012 at 6:24 PM, Hideyoshi Maeda
<hideyoshi.maeda at gmail.com> wrote:
> Thanks for your response.
>
> I am aware that addTxn is not vectorized...
>
> but what I am using below is addTxns...(note the 's' after Txn)
>
> This allows transaction data through the TxnData argument
>
> It is, in effect, a vectorised version of addTxn...even the blotter demo from
>
> demo(amzn_test)
>
> uses this....
>
> However unlike the demo...i wanted to include Transaction fees, and wanted to know if this was possible...as the function for addTxns automatically assigns this to zero...
>
>
>
> On 5 Jul 2012, at 09:15, G See wrote:
>
>> Hi Hideyoshi,
>>
>> addTxn is not vectorized, and it does not have a txnData argument.  To
>> see how the function is intended to be used, please read
>>
>> ?addTxn
>>
>> Then look at the demos that are included with blotter as well as the
>> examples in ?blotter.
>>
>> HTH,
>> Garrett
>>
>> On Wed, Jul 4, 2012 at 5:46 PM, Hideyoshi Maeda
>> <hideyoshi.maeda at gmail.com> wrote:
>>> If an example is required
>>>
>>> Here is an example:
>>>
>>> rm(list=ls(pos=.blotter),pos=.blotter)
>>> rm(list=ls(pos=.instrument),pos=.instrument)
>>> rm(list=ls(pos=.strategy),pos=.strategy)
>>>
>>> currency('USD')
>>> stock("SPY", currency="USD", mulitplier=1)
>>>
>>> getSymbols('SPY', from='2012-03-01', to='2012-07-04')
>>>
>>> portf.name <- "dummy.Portfolio"
>>>
>>> initPortf(portf.name, 'SPY', initDate='2012-02-29')
>>> initAcct(portf.name, portf.name, initDate='2012-02-29', initEq=1e6)
>>>
>>> qty <- rep(c(1,-1), nrow(SPY)/2)
>>> price <- SPY[,4]
>>> txnfees <- rep(-5, nrow(SPY))
>>> txndata <- cbind(qty, price, txnfees)
>>> colnames(txndata) <- c("Quantity","Price","txnfees")
>>>
>>> blotter:::addTxns(Portfolio=portf.name, Symbol='SPY', TxnData=txndata )
>>>
>>> txns <- getTxns(Portfolio=portf.name, Symbol='SPY')
>>>
>>> head(txns)
>>> This will show the buying and selling of 1 share on alternate days at the close but will not show any of the fees relating to each transaction.
>>>
>>> Thanks
>>>
>>> HLM
>>>
>>> On 5 Jul 2012, at 01:48, Hideyoshi Maeda wrote:
>>>
>>>> Hi I am looking at the addTxns function in blotter, and I would like to add fees data/information in the TxnData argument (as a column).
>>>>
>>>> When looking at the function, by running
>>>>
>>>> blotter:::addTxns
>>>> it seems to use the column names "Price" and "Quantity" but automatically sets/assigns the TxnFees to zero.
>>>>
>>>> Is there a way of overwriting this, so that it can be included in my analysis?
>>>>
>


From gsee000 at gmail.com  Thu Jul  5 01:36:11 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 4 Jul 2012 18:36:11 -0500
Subject: [R-SIG-Finance] addTxns addfees
In-Reply-To: <CA+xi=qa0WDWu6H81KRZfHAwQveA0Z_ifpqi-oCx1Q7kuHCNPMw@mail.gmail.com>
References: <mailman.3.1341396002.11535.r-sig-finance@r-project.org>
	<7D90F5C3-0038-4012-BEC1-B201D24E9AF7@gmail.com>
	<A9D8FB53-2C15-4C38-A894-25186DE804C5@gmail.com>
	<CA+xi=qbzCwYHUNVG-q1FNMNLC7-xt_ZsVsi9Bk9TqUkhUNKmLQ@mail.gmail.com>
	<79C7717E-1216-4B81-AC49-3EEC3ACC0101@gmail.com>
	<CA+xi=qa0WDWu6H81KRZfHAwQveA0Z_ifpqi-oCx1Q7kuHCNPMw@mail.gmail.com>
Message-ID: <CA+xi=qb0LuEELPigv-Y=ayq6m2tJk6Mdw_Zrk+GXWRX+h2QyXw@mail.gmail.com>

If you look at the code in the repository,

https://r-forge.r-project.org/scm/viewvc.php/pkg/blotter/R/addTxn.R?view=markup&revision=1081&root=blotter

you can see that there are comments saying that this isn't yet supported.

        TxnFee <- 0 #TODO FIXME support transaction fees in addTxns
        #TxnFee <- ifelse( is.function(TxnFees), TxnFees(TxnQty,
TxnPrice), TxnFees)

Sorry,
Garrett

On Wed, Jul 4, 2012 at 6:29 PM, G See <gsee000 at gmail.com> wrote:
> My apologies.  I see what you are talking about, and I see where that
> is hardcoded in.  So, you would need to replace
>
> TxnFee <- 0
>
> with
>
> TxnFee <- as.numeric(TxnData[row, "txnfees"])
>
>
> On Wed, Jul 4, 2012 at 6:24 PM, Hideyoshi Maeda
> <hideyoshi.maeda at gmail.com> wrote:
>> Thanks for your response.
>>
>> I am aware that addTxn is not vectorized...
>>
>> but what I am using below is addTxns...(note the 's' after Txn)
>>
>> This allows transaction data through the TxnData argument
>>
>> It is, in effect, a vectorised version of addTxn...even the blotter demo from
>>
>> demo(amzn_test)
>>
>> uses this....
>>
>> However unlike the demo...i wanted to include Transaction fees, and wanted to know if this was possible...as the function for addTxns automatically assigns this to zero...
>>
>>
>>
>> On 5 Jul 2012, at 09:15, G See wrote:
>>
>>> Hi Hideyoshi,
>>>
>>> addTxn is not vectorized, and it does not have a txnData argument.  To
>>> see how the function is intended to be used, please read
>>>
>>> ?addTxn
>>>
>>> Then look at the demos that are included with blotter as well as the
>>> examples in ?blotter.
>>>
>>> HTH,
>>> Garrett
>>>
>>> On Wed, Jul 4, 2012 at 5:46 PM, Hideyoshi Maeda
>>> <hideyoshi.maeda at gmail.com> wrote:
>>>> If an example is required
>>>>
>>>> Here is an example:
>>>>
>>>> rm(list=ls(pos=.blotter),pos=.blotter)
>>>> rm(list=ls(pos=.instrument),pos=.instrument)
>>>> rm(list=ls(pos=.strategy),pos=.strategy)
>>>>
>>>> currency('USD')
>>>> stock("SPY", currency="USD", mulitplier=1)
>>>>
>>>> getSymbols('SPY', from='2012-03-01', to='2012-07-04')
>>>>
>>>> portf.name <- "dummy.Portfolio"
>>>>
>>>> initPortf(portf.name, 'SPY', initDate='2012-02-29')
>>>> initAcct(portf.name, portf.name, initDate='2012-02-29', initEq=1e6)
>>>>
>>>> qty <- rep(c(1,-1), nrow(SPY)/2)
>>>> price <- SPY[,4]
>>>> txnfees <- rep(-5, nrow(SPY))
>>>> txndata <- cbind(qty, price, txnfees)
>>>> colnames(txndata) <- c("Quantity","Price","txnfees")
>>>>
>>>> blotter:::addTxns(Portfolio=portf.name, Symbol='SPY', TxnData=txndata )
>>>>
>>>> txns <- getTxns(Portfolio=portf.name, Symbol='SPY')
>>>>
>>>> head(txns)
>>>> This will show the buying and selling of 1 share on alternate days at the close but will not show any of the fees relating to each transaction.
>>>>
>>>> Thanks
>>>>
>>>> HLM
>>>>
>>>> On 5 Jul 2012, at 01:48, Hideyoshi Maeda wrote:
>>>>
>>>>> Hi I am looking at the addTxns function in blotter, and I would like to add fees data/information in the TxnData argument (as a column).
>>>>>
>>>>> When looking at the function, by running
>>>>>
>>>>> blotter:::addTxns
>>>>> it seems to use the column names "Price" and "Quantity" but automatically sets/assigns the TxnFees to zero.
>>>>>
>>>>> Is there a way of overwriting this, so that it can be included in my analysis?
>>>>>
>>


From hideyoshi.maeda at gmail.com  Thu Jul  5 01:42:46 2012
From: hideyoshi.maeda at gmail.com (Hideyoshi Maeda)
Date: Thu, 5 Jul 2012 09:42:46 +1000
Subject: [R-SIG-Finance] addTxns addfees
In-Reply-To: <CA+xi=qb0LuEELPigv-Y=ayq6m2tJk6Mdw_Zrk+GXWRX+h2QyXw@mail.gmail.com>
References: <mailman.3.1341396002.11535.r-sig-finance@r-project.org>
	<7D90F5C3-0038-4012-BEC1-B201D24E9AF7@gmail.com>
	<A9D8FB53-2C15-4C38-A894-25186DE804C5@gmail.com>
	<CA+xi=qbzCwYHUNVG-q1FNMNLC7-xt_ZsVsi9Bk9TqUkhUNKmLQ@mail.gmail.com>
	<79C7717E-1216-4B81-AC49-3EEC3ACC0101@gmail.com>
	<CA+xi=qa0WDWu6H81KRZfHAwQveA0Z_ifpqi-oCx1Q7kuHCNPMw@mail.gmail.com>
	<CA+xi=qb0LuEELPigv-Y=ayq6m2tJk6Mdw_Zrk+GXWRX+h2QyXw@mail.gmail.com>
Message-ID: <560A721B-B930-4A83-8219-DAD3673757C5@gmail.com>

Ah ok, I didn't look at the repository...is that expected to go in any time soon given its simplicity in adjustment?

On 5 Jul 2012, at 09:36, G See wrote:

> If you look at the code in the repository,
> 
> https://r-forge.r-project.org/scm/viewvc.php/pkg/blotter/R/addTxn.R?view=markup&revision=1081&root=blotter
> 
> you can see that there are comments saying that this isn't yet supported.
> 
>        TxnFee <- 0 #TODO FIXME support transaction fees in addTxns
>        #TxnFee <- ifelse( is.function(TxnFees), TxnFees(TxnQty,
> TxnPrice), TxnFees)
> 
> Sorry,
> Garrett
> 
> On Wed, Jul 4, 2012 at 6:29 PM, G See <gsee000 at gmail.com> wrote:
>> My apologies.  I see what you are talking about, and I see where that
>> is hardcoded in.  So, you would need to replace
>> 
>> TxnFee <- 0
>> 
>> with
>> 
>> TxnFee <- as.numeric(TxnData[row, "txnfees"])
>> 
>> 
>> On Wed, Jul 4, 2012 at 6:24 PM, Hideyoshi Maeda
>> <hideyoshi.maeda at gmail.com> wrote:
>>> Thanks for your response.
>>> 
>>> I am aware that addTxn is not vectorized...
>>> 
>>> but what I am using below is addTxns...(note the 's' after Txn)
>>> 
>>> This allows transaction data through the TxnData argument
>>> 
>>> It is, in effect, a vectorised version of addTxn...even the blotter demo from
>>> 
>>> demo(amzn_test)
>>> 
>>> uses this....
>>> 
>>> However unlike the demo...i wanted to include Transaction fees, and wanted to know if this was possible...as the function for addTxns automatically assigns this to zero...
>>> 
>>> 
>>> 
>>> On 5 Jul 2012, at 09:15, G See wrote:
>>> 
>>>> Hi Hideyoshi,
>>>> 
>>>> addTxn is not vectorized, and it does not have a txnData argument.  To
>>>> see how the function is intended to be used, please read
>>>> 
>>>> ?addTxn
>>>> 
>>>> Then look at the demos that are included with blotter as well as the
>>>> examples in ?blotter.
>>>> 
>>>> HTH,
>>>> Garrett
>>>> 
>>>> On Wed, Jul 4, 2012 at 5:46 PM, Hideyoshi Maeda
>>>> <hideyoshi.maeda at gmail.com> wrote:
>>>>> If an example is required
>>>>> 
>>>>> Here is an example:
>>>>> 
>>>>> rm(list=ls(pos=.blotter),pos=.blotter)
>>>>> rm(list=ls(pos=.instrument),pos=.instrument)
>>>>> rm(list=ls(pos=.strategy),pos=.strategy)
>>>>> 
>>>>> currency('USD')
>>>>> stock("SPY", currency="USD", mulitplier=1)
>>>>> 
>>>>> getSymbols('SPY', from='2012-03-01', to='2012-07-04')
>>>>> 
>>>>> portf.name <- "dummy.Portfolio"
>>>>> 
>>>>> initPortf(portf.name, 'SPY', initDate='2012-02-29')
>>>>> initAcct(portf.name, portf.name, initDate='2012-02-29', initEq=1e6)
>>>>> 
>>>>> qty <- rep(c(1,-1), nrow(SPY)/2)
>>>>> price <- SPY[,4]
>>>>> txnfees <- rep(-5, nrow(SPY))
>>>>> txndata <- cbind(qty, price, txnfees)
>>>>> colnames(txndata) <- c("Quantity","Price","txnfees")
>>>>> 
>>>>> blotter:::addTxns(Portfolio=portf.name, Symbol='SPY', TxnData=txndata )
>>>>> 
>>>>> txns <- getTxns(Portfolio=portf.name, Symbol='SPY')
>>>>> 
>>>>> head(txns)
>>>>> This will show the buying and selling of 1 share on alternate days at the close but will not show any of the fees relating to each transaction.
>>>>> 
>>>>> Thanks
>>>>> 
>>>>> HLM
>>>>> 
>>>>> On 5 Jul 2012, at 01:48, Hideyoshi Maeda wrote:
>>>>> 
>>>>>> Hi I am looking at the addTxns function in blotter, and I would like to add fees data/information in the TxnData argument (as a column).
>>>>>> 
>>>>>> When looking at the function, by running
>>>>>> 
>>>>>> blotter:::addTxns
>>>>>> it seems to use the column names "Price" and "Quantity" but automatically sets/assigns the TxnFees to zero.
>>>>>> 
>>>>>> Is there a way of overwriting this, so that it can be included in my analysis?
>>>>>> 
>>> 


From gsee000 at gmail.com  Thu Jul  5 02:01:05 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 4 Jul 2012 19:01:05 -0500
Subject: [R-SIG-Finance] addTxns addfees
In-Reply-To: <560A721B-B930-4A83-8219-DAD3673757C5@gmail.com>
References: <mailman.3.1341396002.11535.r-sig-finance@r-project.org>
	<7D90F5C3-0038-4012-BEC1-B201D24E9AF7@gmail.com>
	<A9D8FB53-2C15-4C38-A894-25186DE804C5@gmail.com>
	<CA+xi=qbzCwYHUNVG-q1FNMNLC7-xt_ZsVsi9Bk9TqUkhUNKmLQ@mail.gmail.com>
	<79C7717E-1216-4B81-AC49-3EEC3ACC0101@gmail.com>
	<CA+xi=qa0WDWu6H81KRZfHAwQveA0Z_ifpqi-oCx1Q7kuHCNPMw@mail.gmail.com>
	<CA+xi=qb0LuEELPigv-Y=ayq6m2tJk6Mdw_Zrk+GXWRX+h2QyXw@mail.gmail.com>
	<560A721B-B930-4A83-8219-DAD3673757C5@gmail.com>
Message-ID: <CA+xi=qbwd08GDv=y_+4CRg9t0EqPQPTDOhRoLh6nyFMKpG5Ewg@mail.gmail.com>

Yeah, yeah, ok. Patched in Rev. 1100.

Your TxnData object must have  a column named "TxnFees" (instead  of
"TxnFee" because both addTxn and .calcTxnValue use "TxnFees").

If you need help checking out and building the current source code,
see here (http://stackoverflow.com/questions/11105131/cannot-install-r-forge-package-using-install-packages)

After updated, this should do what you want:

    library(blotter)
    currency('USD')
    stock("SPY", currency="USD", mulitplier=1)
    getSymbols('SPY', from='2012-03-01', to='2012-07-04')
    portf.name <- "dummy.Portfolio"
    initPortf(portf.name, 'SPY', initDate='2012-02-29')
    initAcct(portf.name, portf.name, initDate='2012-02-29', initEq=1e6)
    qty <- rep(c(1,-1), nrow(SPY)/2)
    price <- SPY[,4]
    txnfees <- rep(-5, nrow(SPY))
    txndata <- cbind(qty, price, txnfees)
    colnames(txndata) <- c("Quantity","Price","TxnFees")
    blotter:::addTxns(Portfolio=portf.name, Symbol='SPY', TxnData=txndata )
    txns <- getTxns(Portfolio=portf.name, Symbol='SPY')
    head(txns)

Best,
Garrett

On Wed, Jul 4, 2012 at 6:42 PM, Hideyoshi Maeda
<hideyoshi.maeda at gmail.com> wrote:
> Ah ok, I didn't look at the repository...is that expected to go in any time soon given its simplicity in adjustment?
>
> On 5 Jul 2012, at 09:36, G See wrote:
>
>> If you look at the code in the repository,
>>
>> https://r-forge.r-project.org/scm/viewvc.php/pkg/blotter/R/addTxn.R?view=markup&revision=1081&root=blotter
>>
>> you can see that there are comments saying that this isn't yet supported.
>>
>>        TxnFee <- 0 #TODO FIXME support transaction fees in addTxns
>>        #TxnFee <- ifelse( is.function(TxnFees), TxnFees(TxnQty,
>> TxnPrice), TxnFees)
>>
>> Sorry,
>> Garrett
>>
>> On Wed, Jul 4, 2012 at 6:29 PM, G See <gsee000 at gmail.com> wrote:
>>> My apologies.  I see what you are talking about, and I see where that
>>> is hardcoded in.  So, you would need to replace
>>>
>>> TxnFee <- 0
>>>
>>> with
>>>
>>> TxnFee <- as.numeric(TxnData[row, "txnfees"])
>>>
>>>
>>> On Wed, Jul 4, 2012 at 6:24 PM, Hideyoshi Maeda
>>> <hideyoshi.maeda at gmail.com> wrote:
>>>> Thanks for your response.
>>>>
>>>> I am aware that addTxn is not vectorized...
>>>>
>>>> but what I am using below is addTxns...(note the 's' after Txn)
>>>>
>>>> This allows transaction data through the TxnData argument
>>>>
>>>> It is, in effect, a vectorised version of addTxn...even the blotter demo from
>>>>
>>>> demo(amzn_test)
>>>>
>>>> uses this....
>>>>
>>>> However unlike the demo...i wanted to include Transaction fees, and wanted to know if this was possible...as the function for addTxns automatically assigns this to zero...
>>>>
>>>>
>>>>
>>>> On 5 Jul 2012, at 09:15, G See wrote:
>>>>
>>>>> Hi Hideyoshi,
>>>>>
>>>>> addTxn is not vectorized, and it does not have a txnData argument.  To
>>>>> see how the function is intended to be used, please read
>>>>>
>>>>> ?addTxn
>>>>>
>>>>> Then look at the demos that are included with blotter as well as the
>>>>> examples in ?blotter.
>>>>>
>>>>> HTH,
>>>>> Garrett
>>>>>
>>>>> On Wed, Jul 4, 2012 at 5:46 PM, Hideyoshi Maeda
>>>>> <hideyoshi.maeda at gmail.com> wrote:
>>>>>> If an example is required
>>>>>>
>>>>>> Here is an example:
>>>>>>
>>>>>> rm(list=ls(pos=.blotter),pos=.blotter)
>>>>>> rm(list=ls(pos=.instrument),pos=.instrument)
>>>>>> rm(list=ls(pos=.strategy),pos=.strategy)
>>>>>>
>>>>>> currency('USD')
>>>>>> stock("SPY", currency="USD", mulitplier=1)
>>>>>>
>>>>>> getSymbols('SPY', from='2012-03-01', to='2012-07-04')
>>>>>>
>>>>>> portf.name <- "dummy.Portfolio"
>>>>>>
>>>>>> initPortf(portf.name, 'SPY', initDate='2012-02-29')
>>>>>> initAcct(portf.name, portf.name, initDate='2012-02-29', initEq=1e6)
>>>>>>
>>>>>> qty <- rep(c(1,-1), nrow(SPY)/2)
>>>>>> price <- SPY[,4]
>>>>>> txnfees <- rep(-5, nrow(SPY))
>>>>>> txndata <- cbind(qty, price, txnfees)
>>>>>> colnames(txndata) <- c("Quantity","Price","txnfees")
>>>>>>
>>>>>> blotter:::addTxns(Portfolio=portf.name, Symbol='SPY', TxnData=txndata )
>>>>>>
>>>>>> txns <- getTxns(Portfolio=portf.name, Symbol='SPY')
>>>>>>
>>>>>> head(txns)
>>>>>> This will show the buying and selling of 1 share on alternate days at the close but will not show any of the fees relating to each transaction.
>>>>>>
>>>>>> Thanks
>>>>>>
>>>>>> HLM
>>>>>>
>>>>>> On 5 Jul 2012, at 01:48, Hideyoshi Maeda wrote:
>>>>>>
>>>>>>> Hi I am looking at the addTxns function in blotter, and I would like to add fees data/information in the TxnData argument (as a column).
>>>>>>>
>>>>>>> When looking at the function, by running
>>>>>>>
>>>>>>> blotter:::addTxns
>>>>>>> it seems to use the column names "Price" and "Quantity" but automatically sets/assigns the TxnFees to zero.
>>>>>>>
>>>>>>> Is there a way of overwriting this, so that it can be included in my analysis?
>>>>>>>
>>>>
>


From hideyoshi.maeda at gmail.com  Thu Jul  5 02:17:46 2012
From: hideyoshi.maeda at gmail.com (Hideyoshi Maeda)
Date: Thu, 5 Jul 2012 10:17:46 +1000
Subject: [R-SIG-Finance] addTxns addfees
In-Reply-To: <CA+xi=qbwd08GDv=y_+4CRg9t0EqPQPTDOhRoLh6nyFMKpG5Ewg@mail.gmail.com>
References: <mailman.3.1341396002.11535.r-sig-finance@r-project.org>
	<7D90F5C3-0038-4012-BEC1-B201D24E9AF7@gmail.com>
	<A9D8FB53-2C15-4C38-A894-25186DE804C5@gmail.com>
	<CA+xi=qbzCwYHUNVG-q1FNMNLC7-xt_ZsVsi9Bk9TqUkhUNKmLQ@mail.gmail.com>
	<79C7717E-1216-4B81-AC49-3EEC3ACC0101@gmail.com>
	<CA+xi=qa0WDWu6H81KRZfHAwQveA0Z_ifpqi-oCx1Q7kuHCNPMw@mail.gmail.com>
	<CA+xi=qb0LuEELPigv-Y=ayq6m2tJk6Mdw_Zrk+GXWRX+h2QyXw@mail.gmail.com>
	<560A721B-B930-4A83-8219-DAD3673757C5@gmail.com>
	<CA+xi=qbwd08GDv=y_+4CRg9t0EqPQPTDOhRoLh6nyFMKpG5Ewg@mail.gmail.com>
Message-ID: <43D7A2A2-347F-4BFF-B181-5C1508FADD96@gmail.com>

Thats amazing! Thank you very much! and thanks to all of you guys that help build such a great resource for all to use!

On 5 Jul 2012, at 10:01, G See wrote:

> Yeah, yeah, ok. Patched in Rev. 1100.
> 
> Your TxnData object must have  a column named "TxnFees" (instead  of
> "TxnFee" because both addTxn and .calcTxnValue use "TxnFees").
> 
> If you need help checking out and building the current source code,
> see here (http://stackoverflow.com/questions/11105131/cannot-install-r-forge-package-using-install-packages)
> 
> After updated, this should do what you want:
> 
>    library(blotter)
>    currency('USD')
>    stock("SPY", currency="USD", mulitplier=1)
>    getSymbols('SPY', from='2012-03-01', to='2012-07-04')
>    portf.name <- "dummy.Portfolio"
>    initPortf(portf.name, 'SPY', initDate='2012-02-29')
>    initAcct(portf.name, portf.name, initDate='2012-02-29', initEq=1e6)
>    qty <- rep(c(1,-1), nrow(SPY)/2)
>    price <- SPY[,4]
>    txnfees <- rep(-5, nrow(SPY))
>    txndata <- cbind(qty, price, txnfees)
>    colnames(txndata) <- c("Quantity","Price","TxnFees")
>    blotter:::addTxns(Portfolio=portf.name, Symbol='SPY', TxnData=txndata )
>    txns <- getTxns(Portfolio=portf.name, Symbol='SPY')
>    head(txns)
> 
> Best,
> Garrett
> 
> On Wed, Jul 4, 2012 at 6:42 PM, Hideyoshi Maeda
> <hideyoshi.maeda at gmail.com> wrote:
>> Ah ok, I didn't look at the repository...is that expected to go in any time soon given its simplicity in adjustment?
>> 
>> On 5 Jul 2012, at 09:36, G See wrote:
>> 
>>> If you look at the code in the repository,
>>> 
>>> https://r-forge.r-project.org/scm/viewvc.php/pkg/blotter/R/addTxn.R?view=markup&revision=1081&root=blotter
>>> 
>>> you can see that there are comments saying that this isn't yet supported.
>>> 
>>>       TxnFee <- 0 #TODO FIXME support transaction fees in addTxns
>>>       #TxnFee <- ifelse( is.function(TxnFees), TxnFees(TxnQty,
>>> TxnPrice), TxnFees)
>>> 
>>> Sorry,
>>> Garrett
>>> 
>>> On Wed, Jul 4, 2012 at 6:29 PM, G See <gsee000 at gmail.com> wrote:
>>>> My apologies.  I see what you are talking about, and I see where that
>>>> is hardcoded in.  So, you would need to replace
>>>> 
>>>> TxnFee <- 0
>>>> 
>>>> with
>>>> 
>>>> TxnFee <- as.numeric(TxnData[row, "txnfees"])
>>>> 
>>>> 
>>>> On Wed, Jul 4, 2012 at 6:24 PM, Hideyoshi Maeda
>>>> <hideyoshi.maeda at gmail.com> wrote:
>>>>> Thanks for your response.
>>>>> 
>>>>> I am aware that addTxn is not vectorized...
>>>>> 
>>>>> but what I am using below is addTxns...(note the 's' after Txn)
>>>>> 
>>>>> This allows transaction data through the TxnData argument
>>>>> 
>>>>> It is, in effect, a vectorised version of addTxn...even the blotter demo from
>>>>> 
>>>>> demo(amzn_test)
>>>>> 
>>>>> uses this....
>>>>> 
>>>>> However unlike the demo...i wanted to include Transaction fees, and wanted to know if this was possible...as the function for addTxns automatically assigns this to zero...
>>>>> 
>>>>> 
>>>>> 
>>>>> On 5 Jul 2012, at 09:15, G See wrote:
>>>>> 
>>>>>> Hi Hideyoshi,
>>>>>> 
>>>>>> addTxn is not vectorized, and it does not have a txnData argument.  To
>>>>>> see how the function is intended to be used, please read
>>>>>> 
>>>>>> ?addTxn
>>>>>> 
>>>>>> Then look at the demos that are included with blotter as well as the
>>>>>> examples in ?blotter.
>>>>>> 
>>>>>> HTH,
>>>>>> Garrett
>>>>>> 
>>>>>> On Wed, Jul 4, 2012 at 5:46 PM, Hideyoshi Maeda
>>>>>> <hideyoshi.maeda at gmail.com> wrote:
>>>>>>> If an example is required
>>>>>>> 
>>>>>>> Here is an example:
>>>>>>> 
>>>>>>> rm(list=ls(pos=.blotter),pos=.blotter)
>>>>>>> rm(list=ls(pos=.instrument),pos=.instrument)
>>>>>>> rm(list=ls(pos=.strategy),pos=.strategy)
>>>>>>> 
>>>>>>> currency('USD')
>>>>>>> stock("SPY", currency="USD", mulitplier=1)
>>>>>>> 
>>>>>>> getSymbols('SPY', from='2012-03-01', to='2012-07-04')
>>>>>>> 
>>>>>>> portf.name <- "dummy.Portfolio"
>>>>>>> 
>>>>>>> initPortf(portf.name, 'SPY', initDate='2012-02-29')
>>>>>>> initAcct(portf.name, portf.name, initDate='2012-02-29', initEq=1e6)
>>>>>>> 
>>>>>>> qty <- rep(c(1,-1), nrow(SPY)/2)
>>>>>>> price <- SPY[,4]
>>>>>>> txnfees <- rep(-5, nrow(SPY))
>>>>>>> txndata <- cbind(qty, price, txnfees)
>>>>>>> colnames(txndata) <- c("Quantity","Price","txnfees")
>>>>>>> 
>>>>>>> blotter:::addTxns(Portfolio=portf.name, Symbol='SPY', TxnData=txndata )
>>>>>>> 
>>>>>>> txns <- getTxns(Portfolio=portf.name, Symbol='SPY')
>>>>>>> 
>>>>>>> head(txns)
>>>>>>> This will show the buying and selling of 1 share on alternate days at the close but will not show any of the fees relating to each transaction.
>>>>>>> 
>>>>>>> Thanks
>>>>>>> 
>>>>>>> HLM
>>>>>>> 
>>>>>>> On 5 Jul 2012, at 01:48, Hideyoshi Maeda wrote:
>>>>>>> 
>>>>>>>> Hi I am looking at the addTxns function in blotter, and I would like to add fees data/information in the TxnData argument (as a column).
>>>>>>>> 
>>>>>>>> When looking at the function, by running
>>>>>>>> 
>>>>>>>> blotter:::addTxns
>>>>>>>> it seems to use the column names "Price" and "Quantity" but automatically sets/assigns the TxnFees to zero.
>>>>>>>> 
>>>>>>>> Is there a way of overwriting this, so that it can be included in my analysis?
>>>>>>>> 
>>>>> 
>> 


From aidan.corcoran11 at gmail.com  Thu Jul  5 11:29:57 2012
From: aidan.corcoran11 at gmail.com (Aidan Corcoran)
Date: Thu, 5 Jul 2012 10:29:57 +0100
Subject: [R-SIG-Finance] specify currency in rbloomberg bdp call
Message-ID: <CADv5Py6GQD6WVFQ4290=-X7hEi+VaMg45PiwCeYyf0imOJA=4w@mail.gmail.com>

Dear all,

I was wondering if there is a way of specifying currency in a bdp
request in rbloomberg. I can do it in bdh:

conn <- blpConnect()
start.date <- as.Date("1jan1990", "%d%b%Y")
end.date <- as.Date("1jan2013", "%d%b%Y")
o_names = c("periodicitySelection","currency")
o_values = c("YEARLY","EUR")
d<-bdh(conn, "ubsn vx equity", "bs_tot_asset",
start.date,end.date,option_names = o_names, option_values = o_values)


but not in bdp. I can do it in excel with bdp (the option is
EQY_FUND_CRNCY) so I was wondering if rbloomberg's bdp might be able
to do it too but can't figure out how.

thanks for your help!


From pgilbert902 at gmail.com  Thu Jul  5 19:33:50 2012
From: pgilbert902 at gmail.com (Paul Gilbert)
Date: Thu, 05 Jul 2012 13:33:50 -0400
Subject: [R-SIG-Finance] yahoo dates
Message-ID: <4FF5CFFE.7010404@gmail.com>

Occasionally this week it seems that yahoo is using the previous day's 
date on holidays (I believe, at least yesterday evening there were two 
entries dated July 3). There is a possible logic to this, since holiday 
data may be just adjustments to the previous day's data. However, in 
some downloads this is done, and other downloads of the same data it 
seems the holiday is simply removed, suggesting that it is really a bug 
at yahoo.  For example, the evening of July 4 the data for "^gspc" was

         Date    Open    High     Low   Close     Volume Adj.Close
1 2012-07-03 1365.75 1374.81 1363.53 1373.97  277158200   1374.02
2 2012-07-03 1365.75 1374.81 1363.53 1374.02 2116390000   1374.02
3 2012-07-02 1362.33 1366.35 1355.70 1365.51 3301650000   1365.51
4 2012-06-29 1330.12 1362.17 1330.12 1362.16 4590480000   1362.16
5 2012-06-28 1331.52 1331.52 1313.29 1329.04 3969370000   1329.04
...

whereas this morning, July 5, it is
         Date    Open    High     Low   Close     Volume Adj.Close
1 2012-07-03 1365.75 1374.81 1363.53 1374.02 2116390000   1374.02
2 2012-07-02 1362.33 1366.35 1355.70 1365.51 3301650000   1365.51
3 2012-06-29 1330.12 1362.17 1330.12 1362.16 4590480000   1362.16
4 2012-06-28 1331.52 1331.52 1313.29 1329.04 3969370000   1329.04
...

The holiday with the previous days date causes duplicate index entries, 
which causes zoo to issue warnings, and causes a failure when there is 
an attempt to put two series together into a multivariate series.

Does anyone know what is going on at yahoo?  What is the convention at 
other data suppliers for adjustment data on holidays, or are these  real 
prices and volume that occurred after July 3?

Paul


From john.laing at gmail.com  Thu Jul  5 19:38:44 2012
From: john.laing at gmail.com (John Laing)
Date: Thu, 5 Jul 2012 13:38:44 -0400
Subject: [R-SIG-Finance] specify currency in rbloomberg bdp call
In-Reply-To: <CADv5Py6GQD6WVFQ4290=-X7hEi+VaMg45PiwCeYyf0imOJA=4w@mail.gmail.com>
References: <CADv5Py6GQD6WVFQ4290=-X7hEi+VaMg45PiwCeYyf0imOJA=4w@mail.gmail.com>
Message-ID: <CAA3Wa=tDngJDVn1_jdYFConWEbKRFahWR7H7u66vG3mRAQrURA@mail.gmail.com>

Hi Aidan,

The eqy_fund_crncy field should be passed to bdp as an override, not an option:

bdp(conn, "ubsn vx equity", "bs_tot_asset", override_fields =
"eqy_fund_crncy", override_values = "eur")

I think the Excel implementation might blur the distinction between
options and overrides.

-John


On Thu, Jul 5, 2012 at 5:29 AM, Aidan Corcoran
<aidan.corcoran11 at gmail.com> wrote:
> Dear all,
>
> I was wondering if there is a way of specifying currency in a bdp
> request in rbloomberg. I can do it in bdh:
>
> conn <- blpConnect()
> start.date <- as.Date("1jan1990", "%d%b%Y")
> end.date <- as.Date("1jan2013", "%d%b%Y")
> o_names = c("periodicitySelection","currency")
> o_values = c("YEARLY","EUR")
> d<-bdh(conn, "ubsn vx equity", "bs_tot_asset",
> start.date,end.date,option_names = o_names, option_values = o_values)
>
>
> but not in bdp. I can do it in excel with bdp (the option is
> EQY_FUND_CRNCY) so I was wondering if rbloomberg's bdp might be able
> to do it too but can't figure out how.
>
> thanks for your help!
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From motleyfool at dawgstar.org  Thu Jul  5 23:47:58 2012
From: motleyfool at dawgstar.org (Motley Fool)
Date: Thu, 5 Jul 2012 15:47:58 -0600
Subject: [R-SIG-Finance] yahoo dates
In-Reply-To: <4FF5CFFE.7010404@gmail.com>
References: <4FF5CFFE.7010404@gmail.com>
Message-ID: <CAN24TLcup+agxRrXKrAAXvioyTLbe0i9Ef8JgJQ2qNwZ2KeQLQ@mail.gmail.com>

On Thu, Jul 5, 2012 at 11:33 AM, Paul Gilbert <pgilbert902 at gmail.com> wrote:
> Occasionally this week it seems that yahoo is using the previous day's date
SNIP
>
> Does anyone know what is going on at yahoo?  What is the convention at other
> data suppliers for adjustment data on holidays, or are these  real prices
> and volume that occurred after July 3?
>
> Paul

Paul

I saw this start Tueday, the closing $amount for the previous day is
the same, but
the volume is different.  I've used Yahoo data though Holiday periods
before and
this is the first time I've seen this happen.

diana


From aidan.corcoran11 at gmail.com  Fri Jul  6 09:47:07 2012
From: aidan.corcoran11 at gmail.com (Aidan Corcoran)
Date: Fri, 6 Jul 2012 08:47:07 +0100
Subject: [R-SIG-Finance] specify currency in rbloomberg bdp call
In-Reply-To: <CAA3Wa=tDngJDVn1_jdYFConWEbKRFahWR7H7u66vG3mRAQrURA@mail.gmail.com>
References: <CADv5Py6GQD6WVFQ4290=-X7hEi+VaMg45PiwCeYyf0imOJA=4w@mail.gmail.com>
	<CAA3Wa=tDngJDVn1_jdYFConWEbKRFahWR7H7u66vG3mRAQrURA@mail.gmail.com>
Message-ID: <CADv5Py7wnWpEUOKT_LafVRAqghiR+CgEcUMHc4LXdgCSAm4jBg@mail.gmail.com>

Perfect, thanks John!

On Thu, Jul 5, 2012 at 6:38 PM, John Laing <john.laing at gmail.com> wrote:
> Hi Aidan,
>
> The eqy_fund_crncy field should be passed to bdp as an override, not an option:
>
> bdp(conn, "ubsn vx equity", "bs_tot_asset", override_fields =
> "eqy_fund_crncy", override_values = "eur")
>
> I think the Excel implementation might blur the distinction between
> options and overrides.
>
> -John
>
>
> On Thu, Jul 5, 2012 at 5:29 AM, Aidan Corcoran
> <aidan.corcoran11 at gmail.com> wrote:
>> Dear all,
>>
>> I was wondering if there is a way of specifying currency in a bdp
>> request in rbloomberg. I can do it in bdh:
>>
>> conn <- blpConnect()
>> start.date <- as.Date("1jan1990", "%d%b%Y")
>> end.date <- as.Date("1jan2013", "%d%b%Y")
>> o_names = c("periodicitySelection","currency")
>> o_values = c("YEARLY","EUR")
>> d<-bdh(conn, "ubsn vx equity", "bs_tot_asset",
>> start.date,end.date,option_names = o_names, option_values = o_values)
>>
>>
>> but not in bdp. I can do it in excel with bdp (the option is
>> EQY_FUND_CRNCY) so I was wondering if rbloomberg's bdp might be able
>> to do it too but can't figure out how.
>>
>> thanks for your help!
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.


From omerle at laposte.net  Fri Jul  6 12:37:53 2012
From: omerle at laposte.net (omerle)
Date: Fri, 06 Jul 2012 12:37:53 +0200
Subject: [R-SIG-Finance]  twsFuture in reqContractDetails
In-Reply-To: <CABDUZc8OkAZzK70a8zru9V73o3bMnm=9RuM2GYZGBpzGjMyXFg@mail.gmail.com>
References: <CA+MzGhZrv8Tj4A5sX6AJLyvSOFsRUQu9aVtPc_QuopybNLWd=w@mail.gmail.com>
	<CABDUZc8OkAZzK70a8zru9V73o3bMnm=9RuM2GYZGBpzGjMyXFg@mail.gmail.com>
Message-ID: <1348524615.1015282.1341571073365.JavaMail.www@wwinf8307>

Hi everyone,

Is there any workaround to get reqContractDetails working for a future contract without 
knowing exactly the expiry ?

For instance if I launch

Contract=twsFUT(symbol="EBM",exch="MATIF",expiry="20130311",currency="EUR")
reqContractDetails(conn=getOption("ib"),Contract=Contract)

It works but if I have a future without knowing exactly the expiry it doesn't work.
Or, is there a function to get all the expiries of a given future (for instance EBM).

Thanks,


Olivier

Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
Je cr?e ma bo?te mail www.laposte.net


From jeffrey.ryan at lemnica.com  Fri Jul  6 14:32:49 2012
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Fri, 6 Jul 2012 07:32:49 -0500
Subject: [R-SIG-Finance] twsFuture in reqContractDetails
In-Reply-To: <1348524615.1015282.1341571073365.JavaMail.www@wwinf8307>
References: <CA+MzGhZrv8Tj4A5sX6AJLyvSOFsRUQu9aVtPc_QuopybNLWd=w@mail.gmail.com>
	<CABDUZc8OkAZzK70a8zru9V73o3bMnm=9RuM2GYZGBpzGjMyXFg@mail.gmail.com>
	<1348524615.1015282.1341571073365.JavaMail.www@wwinf8307>
Message-ID: <CABDUZc9CM72X5oCuUH-K2DcHFG--UFR5LHe7LvurGz8ZoM7qkA@mail.gmail.com>

Olivier,

You can set the fields that you are seeking to ="" to act as a wildcard.  i.e.

> EBMcons <- reqContractDetails(ibg, twsFUT(symbol="EBM",exch="MATIF",currency="EUR",expiry=""))
> length(EBMcons)
[1] 12
> sapply(EBMcons, function(X) as.twsContract(X)$expiry)
 [1] "20120810" "20121112" "20130110" "20130311" "20130510" "20131111"
 [7] "20140110" "20140310" "20140512" "20141110" "20150112" "20150310"


HTH
Jeff

On Fri, Jul 6, 2012 at 5:37 AM, omerle <omerle at laposte.net> wrote:
> Hi everyone,
>
> Is there any workaround to get reqContractDetails working for a future contract without
> knowing exactly the expiry ?
>
> For instance if I launch
>
> Contract=twsFUT(symbol="EBM",exch="MATIF",expiry="20130311",currency="EUR")
> reqContractDetails(conn=getOption("ib"),Contract=Contract)
>
> It works but if I have a future without knowing exactly the expiry it doesn't work.
> Or, is there a function to get all the expiries of a given future (for instance EBM).
>
> Thanks,
>
>
> Olivier
>
> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> Je cr?e ma bo?te mail www.laposte.net
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From optionsraghu at gmail.com  Mon Jul  9 00:35:40 2012
From: optionsraghu at gmail.com (Raghuraman Ramachandran)
Date: Sun, 8 Jul 2012 23:35:40 +0100
Subject: [R-SIG-Finance] Interesting issue in MACD calculation
Message-ID: <CADgEnD=dYcVS3zRGCHYD6pV5H=kjCKwGZW-_+SNU6OCdNfYOsw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120708/6237e698/attachment.pl>

From pierrelap at gmail.com  Mon Jul  9 00:51:20 2012
From: pierrelap at gmail.com (Pierre Lapointe)
Date: Sun, 8 Jul 2012 18:51:20 -0400
Subject: [R-SIG-Finance] Portfolio turnover ratio calculation
Message-ID: <CAHjr2U8uszcsHqd8fRRuqw2z00KbBi6=16qCYCnH_1BFqJsDFg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120708/943aca4d/attachment.pl>

From josh.m.ulrich at gmail.com  Mon Jul  9 00:55:00 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sun, 8 Jul 2012 17:55:00 -0500
Subject: [R-SIG-Finance] Interesting issue in MACD calculation
In-Reply-To: <CADgEnD=dYcVS3zRGCHYD6pV5H=kjCKwGZW-_+SNU6OCdNfYOsw@mail.gmail.com>
References: <CADgEnD=dYcVS3zRGCHYD6pV5H=kjCKwGZW-_+SNU6OCdNfYOsw@mail.gmail.com>
Message-ID: <CAPPM_gQw-p70fZdW+h3hp2mp4T3RpOLoCvEvin4CFcfBQ+S1AA@mail.gmail.com>

On Sun, Jul 8, 2012 at 5:35 PM, Raghuraman Ramachandran
<optionsraghu at gmail.com> wrote:
> Dear guRus
>
> A very simple issue that I thought I will bring to your notice.
>
> I have a dataframe called testdata:
> str(testdata)
> 'data.frame': 748 obs. of  5 variables:
>  $ Date : Date, format: "2009-07-13" "2009-07-14" ...
>  $ Open : num  750 760 793 810 794 ...
>  $ High : num  764 802 811 832 821 ...
>  $ Low  : num  725 760 792 786 790 ...
>  $ Close: num  758 790 807 795 811 ...
>
> When I calculate MACD using the TTR on the closes I get a value which is
> different from what I get when I convert the same object into XTS. (-2.33
> when a simple dataframe and 4.82 for xts). I am using percent=FALSE in both
> cases.

It is extremely difficult to help diagnose odd results like this
without a minimal reproducible example.  See this question on Stack
Overflow for instructions to create a minimal reproducible example:
http://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example

> To get to the root of the issue I tried an excel run of the same and to my
> surprise my MACD using Excel is different.
>
> Wondering which is the truth! Intuitively I think the xts result is
> correct. I even tried doing an EMA12-EMA26 on the non-xts and still got the
> different answer of -2.33.
>
> I was thinking I will attach the excel here but not sure if its an
> allowable conduct in a large forum.
>
This is an R forum, so please do not attach an Excel file.

> Thx for looking
> Raghu
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

Best,
--
Joshua Ulrich  |  FOSS Trading: www.fosstrading.com


From weihanliu2002 at yahoo.com  Mon Jul  9 10:17:27 2012
From: weihanliu2002 at yahoo.com (Wei-han Liu)
Date: Mon, 9 Jul 2012 01:17:27 -0700 (PDT)
Subject: [R-SIG-Finance] (no subject)
Message-ID: <1341821847.68662.YahooMailNeo@web161303.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120709/7ab09b24/attachment.pl>

From gsee000 at gmail.com  Mon Jul  9 22:27:06 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 9 Jul 2012 15:27:06 -0500
Subject: [R-SIG-Finance] yahoo dates
In-Reply-To: <CAN24TLcup+agxRrXKrAAXvioyTLbe0i9Ef8JgJQ2qNwZ2KeQLQ@mail.gmail.com>
References: <4FF5CFFE.7010404@gmail.com>
	<CAN24TLcup+agxRrXKrAAXvioyTLbe0i9Ef8JgJQ2qNwZ2KeQLQ@mail.gmail.com>
Message-ID: <CA+xi=qY+fjDiOrmdT4xSDoDAU7H=S+aT178CcfpqYtM20mH3AA@mail.gmail.com>

FWIW, I download 33 fields from yahoo every night at 10 p.m. CDT using
quantmod::getQuote, and the prices and volumes (and everything else
except 50-day MA, 200-day MA and Ave. Daily Volume) reported by
getQuote at 10 p.m. CDT on 2012-07-03 were the same as those reported
at 10 p.m. CDT on 2012-07-04

I only download data for stocks (not stock indexes), but using SPY as
an example, the Volume as reported by getQuote was 80450168 on both
dates.  If I use getSymbols now, it tells me that the volume was
80450000 (i.e. the same, but rounded).

getQuote reported the same volume on both days for all of the roughly
7500 stocks and ETFs that are listed in the U.S. for which I collect
data.

So, at least for stocks, the extra volume never showed up using
getQuote.  But, since I wasn't downloading data for indexes, I can't
say whether it would have shown up there.

Regards,
Garrett

On Thu, Jul 5, 2012 at 4:47 PM, Motley Fool <motleyfool at dawgstar.org> wrote:
> On Thu, Jul 5, 2012 at 11:33 AM, Paul Gilbert <pgilbert902 at gmail.com> wrote:
>> Occasionally this week it seems that yahoo is using the previous day's date
> SNIP
>>
>> Does anyone know what is going on at yahoo?  What is the convention at other
>> data suppliers for adjustment data on holidays, or are these  real prices
>> and volume that occurred after July 3?
>>
>> Paul
>
> Paul
>
> I saw this start Tueday, the closing $amount for the previous day is
> the same, but
> the volume is different.  I've used Yahoo data though Holiday periods
> before and
> this is the first time I've seen this happen.
>
> diana
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From hideyoshi.maeda at gmail.com  Tue Jul 10 02:44:26 2012
From: hideyoshi.maeda at gmail.com (Hideyoshi Maeda)
Date: Tue, 10 Jul 2012 10:44:26 +1000
Subject: [R-SIG-Finance] blotter updatePortf issues
Message-ID: <3D188481-180E-4ACA-AD77-EA8D5A7376C7@gmail.com>

Hi guys,

I am having a few issues with the updatePortf function...this error seems to keep re-occuring...but have managed to make a reproducible example...that occurs on the demos...fyi this error does not occur when running blotter version 0.8.9

when running
demo(macd)

the code stops with this error...

> updatePortf(Portfolio=portfolio.st,Dates=paste('::',as.Date(Sys.time()),sep=''))
Error in if (length(c(year, month, day, hour, min, sec)) == 6 && c(year,  : 
  missing value where TRUE/FALSE needed
In addition: Warning message:
In as_numeric(YYYY) : NAs introduced by coercion

and running traceback() it shows this...

> traceback()
14: function (year = 1970, month = 12, day = 31, hour = 23, min = 59, 
        sec = 59, subsec = 0.99999, tz = "") 
    {
        if (!missing(sec) && sec%%1 != 0) 
            subsec <- 0
        sec <- ifelse(year < 1970, sec, sec + subsec)
        mon.lengths <- c(31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 
            30, 31)
        if (missing(day)) {
            day <- ifelse(month %in% 2, ifelse(((year%%4 %in% 0 & 
                !year%%100 %in% 0) | (year%%400 %in% 0)), 29, 28), 
                mon.lengths[month])
        }
        if (length(c(year, month, day, hour, min, sec)) == 6 && c(year, 
            month, day, hour, min, sec) == c(1969, 12, 31, 23, 59, 
            59) && Sys.getenv("TZ") %in% c("", "GMT", "UTC")) 
            sec <- sec - 1
        ISOdatetime(year, month, day, hour, min, sec, tz)
    }(year = NA_real_, tz = "")
13: do.call(lastof, parse.side(intervals[2], intervals[1]))
12: as.POSIXlt(do.call(lastof, parse.side(intervals[2], intervals[1])))
11: .parseISO8601(ii, .index(x)[1], .index(x)[nr], tz = tz)
10: `[.xts`(prices, paste("/", .parseISO8601(Dates)$last.time, sep = ""))
9: prices[paste("/", .parseISO8601(Dates)$last.time, sep = "")]
8: index(prices[paste("/", .parseISO8601(Dates)$last.time, sep = "")])
7: .updatePosPL(Portfolio = pname, Symbol = as.character(symbol), 
       Dates = Dates, Prices = Prices, ... = ...)
6: updatePortf(Portfolio = portfolio.st, Dates = paste("::", as.Date(Sys.time()), 
       sep = "")) at macd.R#80
5: eval(expr, envir, enclos)
4: eval(ei, envir)
3: withVisible(eval(ei, envir))
2: source(available, echo = echo, max.deparse.length = Inf, keep.source = TRUE)
1: demo(macd)

Other discussions have related the error messages to a non-updated version of xts...I think everything is pretty much up-to-date, but just in case here is my sessionInfo()

> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] C/en_US.UTF-8/C/C/C/C

attached base packages:
[1] tools     parallel  stats     graphics  grDevices utils     datasets  methods  
[9] base     

other attached packages:
 [1] XML_3.9-4                    Rook_1.0-5                  
 [3] brew_1.0-6                   lubridate_1.1.0             
 [5] knitr_0.6.3                  rJava_0.9-3                 
 [7] googleVis_0.2.16             RJSONIO_0.98-1              
 [9] timeDate_2160.95             plyr_1.7.1                  
[11] PerformanceAnalytics_1.0.4.4 quantstrat_0.6.8            
[13] blotter_0.8.10               FinancialInstrument_0.15.1  
[15] quantmod_0.3-19              Defaults_1.1-1              
[17] TTR_0.21-1                   xts_0.8-6                   
[19] zoo_1.7-7                   

loaded via a namespace (and not attached):
[1] digest_0.5.2   evaluate_0.4.2 formatR_0.5    grid_2.15.1    lattice_0.20-6
[6] stringr_0.6   

Any help would be greatly appreciated!

And thanks again to you guys who put in so much hard work to build this amazing software!

Thanks


From jan at opentrades.nl  Tue Jul 10 11:12:25 2012
From: jan at opentrades.nl (OpenTrades)
Date: Tue, 10 Jul 2012 11:12:25 +0200
Subject: [R-SIG-Finance] blotter updatePortf issues
In-Reply-To: <3D188481-180E-4ACA-AD77-EA8D5A7376C7@gmail.com>
References: <3D188481-180E-4ACA-AD77-EA8D5A7376C7@gmail.com>
Message-ID: <4FFBF1F9.8010302@opentrades.nl>

Hi Hideyoshi,

On 10-07-12 02:44, Hideyoshi Maeda wrote:
> Hi guys,
>
> I am having a few issues with the updatePortf function...this error seems to keep re-occuring...but have managed to make a reproducible example...that occurs on the demos...fyi this error does not occur when running blotter version 0.8.9
>
> when running
> demo(macd)
>
> the code stops with this error...
>
>> updatePortf(Portfolio=portfolio.st,Dates=paste('::',as.Date(Sys.time()),sep=''))
> Error in if (length(c(year, month, day, hour, min, sec)) == 6 && c(year,  :
>    missing value where TRUE/FALSE needed
> In addition: Warning message:
> In as_numeric(YYYY) : NAs introduced by coercion

Looks like you hit the same bug that I filed a couple of weeks ago, see: 
http://r-forge.r-project.org/tracker/index.php?func=detail&aid=2116&group_id=118&atid=516 
for a description and a workaround.

Please attach your reproducible example to my bug report, so the 
developers can fix the bug.

HTH,

Jan.

>
> and running traceback() it shows this...
>
>> traceback()
> 14: function (year = 1970, month = 12, day = 31, hour = 23, min = 59,
>          sec = 59, subsec = 0.99999, tz = "")
>      {
>          if (!missing(sec) && sec%%1 != 0)
>              subsec <- 0
>          sec <- ifelse(year < 1970, sec, sec + subsec)
>          mon.lengths <- c(31, 28, 31, 30, 31, 30, 31, 31, 30, 31,
>              30, 31)
>          if (missing(day)) {
>              day <- ifelse(month %in% 2, ifelse(((year%%4 %in% 0 &
>                  !year%%100 %in% 0) | (year%%400 %in% 0)), 29, 28),
>                  mon.lengths[month])
>          }
>          if (length(c(year, month, day, hour, min, sec)) == 6 && c(year,
>              month, day, hour, min, sec) == c(1969, 12, 31, 23, 59,
>              59) && Sys.getenv("TZ") %in% c("", "GMT", "UTC"))
>              sec <- sec - 1
>          ISOdatetime(year, month, day, hour, min, sec, tz)
>      }(year = NA_real_, tz = "")
> 13: do.call(lastof, parse.side(intervals[2], intervals[1]))
> 12: as.POSIXlt(do.call(lastof, parse.side(intervals[2], intervals[1])))
> 11: .parseISO8601(ii, .index(x)[1], .index(x)[nr], tz = tz)
> 10: `[.xts`(prices, paste("/", .parseISO8601(Dates)$last.time, sep = ""))
> 9: prices[paste("/", .parseISO8601(Dates)$last.time, sep = "")]
> 8: index(prices[paste("/", .parseISO8601(Dates)$last.time, sep = "")])
> 7: .updatePosPL(Portfolio = pname, Symbol = as.character(symbol),
>         Dates = Dates, Prices = Prices, ... = ...)
> 6: updatePortf(Portfolio = portfolio.st, Dates = paste("::", as.Date(Sys.time()),
>         sep = "")) at macd.R#80
> 5: eval(expr, envir, enclos)
> 4: eval(ei, envir)
> 3: withVisible(eval(ei, envir))
> 2: source(available, echo = echo, max.deparse.length = Inf, keep.source = TRUE)
> 1: demo(macd)
>
> Other discussions have related the error messages to a non-updated version of xts...I think everything is pretty much up-to-date, but just in case here is my sessionInfo()
>
>> sessionInfo()
> R version 2.15.1 (2012-06-22)
> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>
> locale:
> [1] C/en_US.UTF-8/C/C/C/C
>
> attached base packages:
> [1] tools     parallel  stats     graphics  grDevices utils     datasets  methods
> [9] base
>
> other attached packages:
>   [1] XML_3.9-4                    Rook_1.0-5
>   [3] brew_1.0-6                   lubridate_1.1.0
>   [5] knitr_0.6.3                  rJava_0.9-3
>   [7] googleVis_0.2.16             RJSONIO_0.98-1
>   [9] timeDate_2160.95             plyr_1.7.1
> [11] PerformanceAnalytics_1.0.4.4 quantstrat_0.6.8
> [13] blotter_0.8.10               FinancialInstrument_0.15.1
> [15] quantmod_0.3-19              Defaults_1.1-1
> [17] TTR_0.21-1                   xts_0.8-6
> [19] zoo_1.7-7
>
> loaded via a namespace (and not attached):
> [1] digest_0.5.2   evaluate_0.4.2 formatR_0.5    grid_2.15.1    lattice_0.20-6
> [6] stringr_0.6
>
> Any help would be greatly appreciated!
>
> And thanks again to you guys who put in so much hard work to build this amazing software!
>
> Thanks
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


-- 
Jan Humme - OpenTrades

WWW:     http://www.opentrades.nl
Email:   jan at opentrades.nl
Twitter: @opentrades


From Achim.Zeileis at uibk.ac.at  Tue Jul 10 11:56:37 2012
From: Achim.Zeileis at uibk.ac.at (Achim Zeileis)
Date: Tue, 10 Jul 2012 11:56:37 +0200 (CEST)
Subject: [R-SIG-Finance] yahoo dates
In-Reply-To: <CA+xi=qY+fjDiOrmdT4xSDoDAU7H=S+aT178CcfpqYtM20mH3AA@mail.gmail.com>
References: <4FF5CFFE.7010404@gmail.com>
	<CAN24TLcup+agxRrXKrAAXvioyTLbe0i9Ef8JgJQ2qNwZ2KeQLQ@mail.gmail.com>
	<CA+xi=qY+fjDiOrmdT4xSDoDAU7H=S+aT178CcfpqYtM20mH3AA@mail.gmail.com>
Message-ID: <alpine.DEB.2.02.1207101142180.7601@paninaro.uibk.ac.at>

On Mon, 9 Jul 2012, G See wrote:

> FWIW, I download 33 fields from yahoo every night at 10 p.m. CDT using

I'm not sure but maybe that is still too early. The problem is real and 
occurs for me "now" (around 10:00 GMT), both for individual stocks and 
indexes:

R> library("quantmod")
R> getSymbols(c("^GSPC", "IBM"))
R> tail(GSPC, 3)
            GSPC.Open GSPC.High GSPC.Low GSPC.Close GSPC.Volume GSPC.Adjusted
2012-07-06   1367.09   1367.09  1348.03    1354.68  2745140000       1354.68
2012-07-09   1354.66   1354.87  1346.65    1352.51   399252300       1352.46
2012-07-09   1354.66   1354.87  1346.65    1352.46  2904860000       1352.46
R> tail(IBM, 3)
            IBM.Open IBM.High IBM.Low IBM.Close IBM.Volume IBM.Adjusted
2012-07-06   193.92   193.94  189.74    191.41    4952900       191.41
2012-07-09   190.66   191.00  188.05    189.65    3569800       189.67
2012-07-09   190.76   191.00  188.05    189.67    3988100       189.67

Note the last line in both cases, especially the volume. The same is 
visible, of course, at the Yahoo! Finance site:

http://finance.yahoo.com/q/hp?s=^GSPC+Historical+Prices
http://finance.yahoo.com/q/hp?s=IBM+Historical+Prices

Users of Yahoo! Finance also complained about this in the user forum. But 
as nobody could offer a good explanation for this, we implemented a patch 
in tseries' get.hist.quote() that omits the last observation in case its 
date is dupblicated:

R> library("tseries")
R> tail(get.hist.quote("IBM"), 3)
              Open   High    Low  Close
2012-07-05 194.88 196.85 193.63 195.29
2012-07-06 193.92 193.94 189.74 191.41
2012-07-09 190.76 191.00 188.05 189.67
Warning message:
In get.hist.quote("IBM") : first date duplicated, first instance omitted

Best,
Z

> quantmod::getQuote, and the prices and volumes (and everything else
> except 50-day MA, 200-day MA and Ave. Daily Volume) reported by
> getQuote at 10 p.m. CDT on 2012-07-03 were the same as those reported
> at 10 p.m. CDT on 2012-07-04
>
> I only download data for stocks (not stock indexes), but using SPY as
> an example, the Volume as reported by getQuote was 80450168 on both
> dates.  If I use getSymbols now, it tells me that the volume was
> 80450000 (i.e. the same, but rounded).
>
> getQuote reported the same volume on both days for all of the roughly
> 7500 stocks and ETFs that are listed in the U.S. for which I collect
> data.
>
> So, at least for stocks, the extra volume never showed up using
> getQuote.  But, since I wasn't downloading data for indexes, I can't
> say whether it would have shown up there.
>
> Regards,
> Garrett
>
> On Thu, Jul 5, 2012 at 4:47 PM, Motley Fool <motleyfool at dawgstar.org> wrote:
>> On Thu, Jul 5, 2012 at 11:33 AM, Paul Gilbert <pgilbert902 at gmail.com> wrote:
>>> Occasionally this week it seems that yahoo is using the previous day's date
>> SNIP
>>>
>>> Does anyone know what is going on at yahoo?  What is the convention at other
>>> data suppliers for adjustment data on holidays, or are these  real prices
>>> and volume that occurred after July 3?
>>>
>>> Paul
>>
>> Paul
>>
>> I saw this start Tueday, the closing $amount for the previous day is
>> the same, but
>> the volume is different.  I've used Yahoo data though Holiday periods
>> before and
>> this is the first time I've seen this happen.
>>
>> diana
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From gsee000 at gmail.com  Tue Jul 10 15:20:31 2012
From: gsee000 at gmail.com (G See)
Date: Tue, 10 Jul 2012 08:20:31 -0500
Subject: [R-SIG-Finance] blotter updatePortf issues
In-Reply-To: <4FFBF1F9.8010302@opentrades.nl>
References: <3D188481-180E-4ACA-AD77-EA8D5A7376C7@gmail.com>
	<4FFBF1F9.8010302@opentrades.nl>
Message-ID: <CA+xi=qbG9AC95WqC70LqNxqxD5uQ7DGdc6r1Z-Ew19vgh_v32Q@mail.gmail.com>

This does not have anything to do with xts.  It is a blotter bug that
was introduced in Rev. 1027
(http://r-forge.r-project.org/scm/viewvc.php/pkg/blotter/R/updatePosPL.R?sortby=rev&root=blotter&r1=1027&r2=1026&pathrev=1027)

You can see from Hideyoshi's traceback, that updatePortf was called
with Dates=paste("::", as.Date(Sys.time()))

6: updatePortf(Portfolio = portfolio.st, Dates = paste("::",
as.Date(Sys.time()),
       sep = "")) at macd.R#80

Then, later, in .updatePosPL, a "/" is added to the date string

8: index(prices[paste("/", .parseISO8601(Dates)$last.time, sep = "")])

So, it's trying to parse something that looks sort of like this "/::2012-07-10"

That said, I'm not sure how to patch.

Best,
Garrett

On Tue, Jul 10, 2012 at 4:12 AM, OpenTrades <jan at opentrades.nl> wrote:
> Hi Hideyoshi,
>
>
> On 10-07-12 02:44, Hideyoshi Maeda wrote:
>>
>> Hi guys,
>>
>> I am having a few issues with the updatePortf function...this error seems
>> to keep re-occuring...but have managed to make a reproducible example...that
>> occurs on the demos...fyi this error does not occur when running blotter
>> version 0.8.9
>>
>> when running
>> demo(macd)
>>
>> the code stops with this error...
>>
>>>
>>> updatePortf(Portfolio=portfolio.st,Dates=paste('::',as.Date(Sys.time()),sep=''))
>>
>> Error in if (length(c(year, month, day, hour, min, sec)) == 6 && c(year,
>> :
>>    missing value where TRUE/FALSE needed
>> In addition: Warning message:
>> In as_numeric(YYYY) : NAs introduced by coercion
>
>
> Looks like you hit the same bug that I filed a couple of weeks ago, see:
> http://r-forge.r-project.org/tracker/index.php?func=detail&aid=2116&group_id=118&atid=516
> for a description and a workaround.
>
> Please attach your reproducible example to my bug report, so the developers
> can fix the bug.
>
> HTH,
>
> Jan.
>
>
>>
>> and running traceback() it shows this...
>>
>>> traceback()
>>
>> 14: function (year = 1970, month = 12, day = 31, hour = 23, min = 59,
>>          sec = 59, subsec = 0.99999, tz = "")
>>      {
>>          if (!missing(sec) && sec%%1 != 0)
>>              subsec <- 0
>>          sec <- ifelse(year < 1970, sec, sec + subsec)
>>          mon.lengths <- c(31, 28, 31, 30, 31, 30, 31, 31, 30, 31,
>>              30, 31)
>>          if (missing(day)) {
>>              day <- ifelse(month %in% 2, ifelse(((year%%4 %in% 0 &
>>                  !year%%100 %in% 0) | (year%%400 %in% 0)), 29, 28),
>>                  mon.lengths[month])
>>          }
>>          if (length(c(year, month, day, hour, min, sec)) == 6 && c(year,
>>              month, day, hour, min, sec) == c(1969, 12, 31, 23, 59,
>>              59) && Sys.getenv("TZ") %in% c("", "GMT", "UTC"))
>>              sec <- sec - 1
>>          ISOdatetime(year, month, day, hour, min, sec, tz)
>>      }(year = NA_real_, tz = "")
>> 13: do.call(lastof, parse.side(intervals[2], intervals[1]))
>> 12: as.POSIXlt(do.call(lastof, parse.side(intervals[2], intervals[1])))
>> 11: .parseISO8601(ii, .index(x)[1], .index(x)[nr], tz = tz)
>> 10: `[.xts`(prices, paste("/", .parseISO8601(Dates)$last.time, sep = ""))
>> 9: prices[paste("/", .parseISO8601(Dates)$last.time, sep = "")]
>> 8: index(prices[paste("/", .parseISO8601(Dates)$last.time, sep = "")])
>> 7: .updatePosPL(Portfolio = pname, Symbol = as.character(symbol),
>>         Dates = Dates, Prices = Prices, ... = ...)
>> 6: updatePortf(Portfolio = portfolio.st, Dates = paste("::",
>> as.Date(Sys.time()),
>>         sep = "")) at macd.R#80
>> 5: eval(expr, envir, enclos)
>> 4: eval(ei, envir)
>> 3: withVisible(eval(ei, envir))
>> 2: source(available, echo = echo, max.deparse.length = Inf, keep.source =
>> TRUE)
>> 1: demo(macd)
>>
>> Other discussions have related the error messages to a non-updated version
>> of xts...I think everything is pretty much up-to-date, but just in case here
>> is my sessionInfo()
>>
>>> sessionInfo()
>>
>> R version 2.15.1 (2012-06-22)
>> Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)
>>
>> locale:
>> [1] C/en_US.UTF-8/C/C/C/C
>>
>> attached base packages:
>> [1] tools     parallel  stats     graphics  grDevices utils     datasets
>> methods
>> [9] base
>>
>> other attached packages:
>>   [1] XML_3.9-4                    Rook_1.0-5
>>   [3] brew_1.0-6                   lubridate_1.1.0
>>   [5] knitr_0.6.3                  rJava_0.9-3
>>   [7] googleVis_0.2.16             RJSONIO_0.98-1
>>   [9] timeDate_2160.95             plyr_1.7.1
>> [11] PerformanceAnalytics_1.0.4.4 quantstrat_0.6.8
>> [13] blotter_0.8.10               FinancialInstrument_0.15.1
>> [15] quantmod_0.3-19              Defaults_1.1-1
>> [17] TTR_0.21-1                   xts_0.8-6
>> [19] zoo_1.7-7
>>
>> loaded via a namespace (and not attached):
>> [1] digest_0.5.2   evaluate_0.4.2 formatR_0.5    grid_2.15.1
>> lattice_0.20-6
>> [6] stringr_0.6
>>
>> Any help would be greatly appreciated!
>>
>> And thanks again to you guys who put in so much hard work to build this
>> amazing software!
>>
>> Thanks
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>
> --
> Jan Humme - OpenTrades
>
> WWW:     http://www.opentrades.nl
> Email:   jan at opentrades.nl
> Twitter: @opentrades
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From gsee000 at gmail.com  Tue Jul 10 16:52:59 2012
From: gsee000 at gmail.com (G See)
Date: Tue, 10 Jul 2012 09:52:59 -0500
Subject: [R-SIG-Finance] blotter updatePortf issues
In-Reply-To: <CA+xi=qbG9AC95WqC70LqNxqxD5uQ7DGdc6r1Z-Ew19vgh_v32Q@mail.gmail.com>
References: <3D188481-180E-4ACA-AD77-EA8D5A7376C7@gmail.com>
	<4FFBF1F9.8010302@opentrades.nl>
	<CA+xi=qbG9AC95WqC70LqNxqxD5uQ7DGdc6r1Z-Ew19vgh_v32Q@mail.gmail.com>
Message-ID: <CA+xi=qZjmFofp5qK69Xtpa8Zr+BCrLrah1+K5at3FPDBH2CWyA@mail.gmail.com>

Apologies for the misinformation.  blotter was version 0.8.9 at Rev.
1027, and according to the OP version 0.8.9 does not have the error.

I am unable to reproduce the error.

Garrett

On Tue, Jul 10, 2012 at 8:20 AM, G See <gsee000 at gmail.com> wrote:
> This does not have anything to do with xts.  It is a blotter bug that
> was introduced in Rev. 1027
> (http://r-forge.r-project.org/scm/viewvc.php/pkg/blotter/R/updatePosPL.R?sortby=rev&root=blotter&r1=1027&r2=1026&pathrev=1027)
>
> You can see from Hideyoshi's traceback, that updatePortf was called
> with Dates=paste("::", as.Date(Sys.time()))
>
> 6: updatePortf(Portfolio = portfolio.st, Dates = paste("::",
> as.Date(Sys.time()),
>        sep = "")) at macd.R#80
>
> Then, later, in .updatePosPL, a "/" is added to the date string
>
> 8: index(prices[paste("/", .parseISO8601(Dates)$last.time, sep = "")])
>
> So, it's trying to parse something that looks sort of like this "/::2012-07-10"
>
> That said, I'm not sure how to patch.
>
> Best,
> Garrett
>


From hifin at live.com  Wed Jul 11 04:15:28 2012
From: hifin at live.com (hifin)
Date: Tue, 10 Jul 2012 19:15:28 -0700 (PDT)
Subject: [R-SIG-Finance] quantstrat maCross demo problem
Message-ID: <1341972928096-4636089.post@n4.nabble.com>

I'm using R 2.15.1 and latest version of all packages. When I ran the maCross
demo, (AAPL from 1999-12-31 and LONG only), I got the following results:

[1] "2001-06-27 00:00:00 AAPL 100 @ 11.67"
[1] "2001-09-07 00:00:00 AAPL -100 @ 8.64"
[1] "2002-01-07 00:00:00 AAPL 100 @ 11.45"
[1] "2002-07-10 00:00:00 AAPL -100 @ 8.66"
[1] "2003-05-16 00:00:00 AAPL 100 @ 9.4"
[1] "2006-06-22 00:00:00 AAPL -100 @ 59.58"
[1] "2006-09-26 00:00:00 AAPL 100 @ 77.61"
[1] "2008-03-07 00:00:00 AAPL -100 @ 122.25"
[1] "2008-05-19 00:00:00 AAPL 100 @ 183.6"
[1] "2008-09-24 00:00:00 AAPL -100 @ 128.71"
[1] "2009-05-14 00:00:00 AAPL 100 @ 122.95"

However, when I change the startdate from 1999-12-31 to 2005-12-31, it
returns

[1] "2008-03-07 00:00:00 AAPL -100 @ 122.25"
[1] "2008-05-19 00:00:00 AAPL 100 @ 183.6"
[1] "2008-09-24 00:00:00 AAPL -100 @ 128.71"
[1] "2009-05-14 00:00:00 AAPL 100 @ 122.95"

It starts with a SHORT position while the demo code should be LONG ONLY. 
Can anybody tell me what the problem is? Thanks!



--
View this message in context: http://r.789695.n4.nabble.com/quantstrat-maCross-demo-problem-tp4636089.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From drew.harris.nz at gmail.com  Wed Jul 11 05:25:04 2012
From: drew.harris.nz at gmail.com (Drew Harris)
Date: Wed, 11 Jul 2012 13:25:04 +1000
Subject: [R-SIG-Finance] Hasbroucks Information Share in R
Message-ID: <CAG1z5ixraua7NBURcf=xPAp7x+K5abTUCwmkE0nUXv=cMzdGWQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120711/27502f33/attachment.pl>

From brian at braverock.com  Wed Jul 11 15:31:57 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 11 Jul 2012 08:31:57 -0500
Subject: [R-SIG-Finance] Hasbroucks Information Share in R
In-Reply-To: <CAG1z5ixraua7NBURcf=xPAp7x+K5abTUCwmkE0nUXv=cMzdGWQ@mail.gmail.com>
References: <CAG1z5ixraua7NBURcf=xPAp7x+K5abTUCwmkE0nUXv=cMzdGWQ@mail.gmail.com>
Message-ID: <4FFD804D.4070505@braverock.com>

On 07/10/2012 10:25 PM, Drew Harris wrote:
> I am a recent R converter so please bare with me if I ask any stupid
> questions. I am open to both constructive criticism and blatant mockery. I
> have been working on converting the Joel Hasbrouck Information share code
> originally for SAS and Implementing it into R. I have a working code but
> for some reason I am about 10% of the actual values, if there is anyone
> more experienced in this area I would much appreciate any advice availlable.

Drew,

Thanks for taking the time to provide code and describe your problem, 
but what you've provided isn't reproducible.

You'll need to provide a small data set and expected results (presumably 
from the SAS code) before anyone will be able to examine your code and 
sort out why they differ.

You say 'about 10%', so I assume that this doesn't mean 'precisely 10%' 
which would likely be a simple multiplier change.

Have you looked at all the intermediary steps in the original SAS code 
and compared these to the R code?  obviously this won't be possible at 
every step. but I'd assume it should be at most.

etc etc etc.

much easier to help if people had data to compare to.

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From pgilbert902 at gmail.com  Wed Jul 11 19:49:02 2012
From: pgilbert902 at gmail.com (Paul Gilbert)
Date: Wed, 11 Jul 2012 13:49:02 -0400
Subject: [R-SIG-Finance] TSE ticker problems
Message-ID: <4FFDBC8E.2080809@gmail.com>

I have been having trouble retrieving some TSE series from yahoo:

 > require("quantmod")
 > getSymbols("BMO.TO", dbname="yahoo")

works but

 > getSymbols("COS.TO", dbname="yahoo")

appears to have worked but has actually failed:

 > str(COS.TO)
An 'xts' object of zero-width

It seems to be getting the header, but no data. I have also tried with 
Google Finance:

 > getSymbols("TSE:COS", dbname="google")
  Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", 
from.m,  :
   cannot open URL 
'http://chart.yahoo.com/table.csv?s=TSE:COS&a=0&b=01&c=2007&d=6&e=11&f=2012&g=d&q=q&y=0&z=TSE:COS&x=.csv'
In addition: Warning message:
In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
   cannot open: HTTP status was '404 Not Found'

I'm not sure if I have the syntax correct for indicating an exchange on 
google. Does anyone have suggestions?

Thanks,
Paul


From michael.weylandt at gmail.com  Wed Jul 11 20:03:39 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Wed, 11 Jul 2012 13:03:39 -0500
Subject: [R-SIG-Finance] TSE ticker problems
In-Reply-To: <4FFDBC8E.2080809@gmail.com>
References: <4FFDBC8E.2080809@gmail.com>
Message-ID: <CAAmySGN7OQ0VBZwv1z6gqdyDe4tLODeqzkkSai9uAdfgGX_x-w@mail.gmail.com>

Hi Paul,

Are you sure you're not looking for the src= argument of getSymbols()?

Best,
Michael

On Wed, Jul 11, 2012 at 12:49 PM, Paul Gilbert <pgilbert902 at gmail.com> wrote:
> I have been having trouble retrieving some TSE series from yahoo:
>
>> require("quantmod")
>> getSymbols("BMO.TO", dbname="yahoo")
>
> works but
>
>> getSymbols("COS.TO", dbname="yahoo")
>
> appears to have worked but has actually failed:
>
>> str(COS.TO)
> An 'xts' object of zero-width
>
> It seems to be getting the header, but no data. I have also tried with
> Google Finance:
>
>> getSymbols("TSE:COS", dbname="google")
>  Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,
> :
>   cannot open URL
> 'http://chart.yahoo.com/table.csv?s=TSE:COS&a=0&b=01&c=2007&d=6&e=11&f=2012&g=d&q=q&y=0&z=TSE:COS&x=.csv'
> In addition: Warning message:
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   cannot open: HTTP status was '404 Not Found'
>
> I'm not sure if I have the syntax correct for indicating an exchange on
> google. Does anyone have suggestions?
>
> Thanks,
> Paul
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From gsee000 at gmail.com  Wed Jul 11 20:06:37 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 11 Jul 2012 13:06:37 -0500
Subject: [R-SIG-Finance] TSE ticker problems
In-Reply-To: <4FFDBC8E.2080809@gmail.com>
References: <4FFDBC8E.2080809@gmail.com>
Message-ID: <CA+xi=qZtn2b1+qZuDz_rbNHhfDOT4FoVm3ZBRbMtjCuL2rLdcA@mail.gmail.com>

I don't have a good answer, but "dbname" is not an argument for either
getSymbols or getSymbols.yahoo.  It's pretty clear that you meant to
use src="yahoo" and src="google"

Note that the error that you got from
    getSymbols("TSE:COS", dbname="google")
shows that it couldn't find http://chart.yahoo.com/....

That's because it's using the default value of src="yahoo" which means
getSymbols.yahoo is being called.

Anyway, if you go into the source of getSymbols.yahoo, and change

    yahoo.URL <- "http://chart.yahoo.com/table.csv?
To
    yahoo.URL <- "http://ichart.finance.yahoo.com/table.csv?"

Then it will work.  But, I have no idea whether this will work for
other symbols.

> getSymbols("COS.TO", src='yahoo'
[1] "COS.TO"
> head(COS.TO)
           COS.TO.Open COS.TO.High COS.TO.Low COS.TO.Close COS.TO.Volume
2007-01-02       32.61       33.00      32.20        32.39        368500
2007-01-03       31.88       32.00      30.15        30.16       1654000
2007-01-04       29.75       29.75      28.50        28.87       1905400
2007-01-05       29.10       29.56      28.47        28.89       2521000
2007-01-08       29.38       29.49      28.50        28.60       1361300
2007-01-09       28.05       28.15      27.50        27.85       1703500
           COS.TO.Adjusted
2007-01-02           24.12
2007-01-03           22.46
2007-01-04           21.50
2007-01-05           21.52
2007-01-08           21.30
2007-01-09           20.74

HTH,
Garrett

On Wed, Jul 11, 2012 at 12:49 PM, Paul Gilbert <pgilbert902 at gmail.com> wrote:
> I have been having trouble retrieving some TSE series from yahoo:
>
>> require("quantmod")
>> getSymbols("BMO.TO", dbname="yahoo")
>
> works but
>
>> getSymbols("COS.TO", dbname="yahoo")
>
> appears to have worked but has actually failed:
>
>> str(COS.TO)
> An 'xts' object of zero-width
>
> It seems to be getting the header, but no data. I have also tried with
> Google Finance:
>
>> getSymbols("TSE:COS", dbname="google")
>  Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,
> :
>   cannot open URL
> 'http://chart.yahoo.com/table.csv?s=TSE:COS&a=0&b=01&c=2007&d=6&e=11&f=2012&g=d&q=q&y=0&z=TSE:COS&x=.csv'
> In addition: Warning message:
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   cannot open: HTTP status was '404 Not Found'
>
> I'm not sure if I have the syntax correct for indicating an exchange on
> google. Does anyone have suggestions?
>
> Thanks,
> Paul
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From pgilbert902 at gmail.com  Wed Jul 11 20:57:08 2012
From: pgilbert902 at gmail.com (Paul Gilbert)
Date: Wed, 11 Jul 2012 14:57:08 -0400
Subject: [R-SIG-Finance] TSE ticker problems
In-Reply-To: <CA+xi=qZtn2b1+qZuDz_rbNHhfDOT4FoVm3ZBRbMtjCuL2rLdcA@mail.gmail.com>
References: <4FFDBC8E.2080809@gmail.com>
	<CA+xi=qZtn2b1+qZuDz_rbNHhfDOT4FoVm3ZBRbMtjCuL2rLdcA@mail.gmail.com>
Message-ID: <4FFDCC84.3010002@gmail.com>

My bad. Indeed the examples should have been:

 > getSymbols("BMO.TO", src="yahoo")
 > getSymbols("COS.TO", src="yahoo")
 > getSymbols("TSE:COS", src="google")

They lost something in translation from my code. The problem is not 
resolved by this correction, however the yahoo retrieval is fixed by the 
getSymbols.yahoo URL change suggested.

The google retrieval still causes problems:

 > getSymbols("TSE:COS", src="google")
Error in download.file(paste(google.URL, "q=", Symbols.name, 
"&startdate=",  :
   cannot open URL 
'http://finance.google.com/finance/historical?q=TSE:COS&startdate=Jan+01,+2007&enddate=Jul+11,+2012&output=csv'
In addition: Warning message:
In download.file(paste(google.URL, "q=", Symbols.name, "&startdate=",  :
   cannot open: HTTP status was '404 Not Found'
 >

Any further suggestions appreciated.

Thanks,
Paul

On 12-07-11 02:06 PM, G See wrote:
> I don't have a good answer, but "dbname" is not an argument for either
> getSymbols or getSymbols.yahoo.  It's pretty clear that you meant to
> use src="yahoo" and src="google"
>
> Note that the error that you got from
>      getSymbols("TSE:COS", dbname="google")
> shows that it couldn't find http://chart.yahoo.com/....
>
> That's because it's using the default value of src="yahoo" which means
> getSymbols.yahoo is being called.
>
> Anyway, if you go into the source of getSymbols.yahoo, and change
>
>      yahoo.URL <- "http://chart.yahoo.com/table.csv?
> To
>      yahoo.URL <- "http://ichart.finance.yahoo.com/table.csv?"
>
> Then it will work.  But, I have no idea whether this will work for
> other symbols.
>
>> getSymbols("COS.TO", src='yahoo'
> [1] "COS.TO"
>> head(COS.TO)
>             COS.TO.Open COS.TO.High COS.TO.Low COS.TO.Close COS.TO.Volume
> 2007-01-02       32.61       33.00      32.20        32.39        368500
> 2007-01-03       31.88       32.00      30.15        30.16       1654000
> 2007-01-04       29.75       29.75      28.50        28.87       1905400
> 2007-01-05       29.10       29.56      28.47        28.89       2521000
> 2007-01-08       29.38       29.49      28.50        28.60       1361300
> 2007-01-09       28.05       28.15      27.50        27.85       1703500
>             COS.TO.Adjusted
> 2007-01-02           24.12
> 2007-01-03           22.46
> 2007-01-04           21.50
> 2007-01-05           21.52
> 2007-01-08           21.30
> 2007-01-09           20.74
>
> HTH,
> Garrett
>
> On Wed, Jul 11, 2012 at 12:49 PM, Paul Gilbert <pgilbert902 at gmail.com> wrote:
>> I have been having trouble retrieving some TSE series from yahoo:
>>
>>> require("quantmod")
>>> getSymbols("BMO.TO", dbname="yahoo")
>>
>> works but
>>
>>> getSymbols("COS.TO", dbname="yahoo")
>>
>> appears to have worked but has actually failed:
>>
>>> str(COS.TO)
>> An 'xts' object of zero-width
>>
>> It seems to be getting the header, but no data. I have also tried with
>> Google Finance:
>>
>>> getSymbols("TSE:COS", dbname="google")
>>   Error in download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,
>> :
>>    cannot open URL
>> 'http://chart.yahoo.com/table.csv?s=TSE:COS&a=0&b=01&c=2007&d=6&e=11&f=2012&g=d&q=q&y=0&z=TSE:COS&x=.csv'
>> In addition: Warning message:
>> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>>    cannot open: HTTP status was '404 Not Found'
>>
>> I'm not sure if I have the syntax correct for indicating an exchange on
>> google. Does anyone have suggestions?
>>
>> Thanks,
>> Paul
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.


From michael.weylandt at gmail.com  Wed Jul 11 21:02:55 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Wed, 11 Jul 2012 14:02:55 -0500
Subject: [R-SIG-Finance] Hasbroucks Information Share in R
In-Reply-To: <CAG1z5ixraua7NBURcf=xPAp7x+K5abTUCwmkE0nUXv=cMzdGWQ@mail.gmail.com>
References: <CAG1z5ixraua7NBURcf=xPAp7x+K5abTUCwmkE0nUXv=cMzdGWQ@mail.gmail.com>
Message-ID: <CAAmySGO-TuSJ7Bkpj5YqpP5QO9piTVyeqQr9PLU8XmetDH67Gg@mail.gmail.com>

Hi Drew,

In addition to Brian's comments, a few stylistic / performance notes
below. I can't check content, but hopefully you'll find the resulting
code a little clearer and more idiomatic.

On Tue, Jul 10, 2012 at 10:25 PM, Drew Harris <drew.harris.nz at gmail.com> wrote:
> Hi all,
>
> I am a recent R converter so please bare with me if I ask any stupid
> questions. I am open to both constructive criticism and blatant mockery. I
> have been working on converting the Joel Hasbrouck Information share code
> originally for SAS and Implementing it into R. I have a working code but
> for some reason I am about 10% of the actual values, if there is anyone
> more experienced in this area I would much appreciate any advice availlable.
>
> I know there is a better method in a previous post by Niddhi Aggarwaul with
> a very coherent code for calculating a 2 dimensional case but I really need
> an n dimensional case which should be represented by my code being ideally
> the same as Hasbrouk's. My code is below, x refers to a matrix of parallel
> midpoint stock quotes of n markets.
>
> #find the optimal lag length
> lags <- VARselect(x, lag.max=100)$selection[1]
>
> #Johansens Cointegration test is applied and then estimates the VECM with
> the estimated Beta
> cointest <- ca.jo(x, K=lags, type="eigen", ecdet="const",
> spec="transitory")
> #summary(cointest)
>     vecm <- cajorls(cointest)
>
> #Breaks the VECM down into VAR by levels as in Hasbrouck
>     var <- vec2var(cointest)
> #covariance of forecast error response
> FER <- fevd(var, n.ahead=ImpulseResponse,cumulative=TRUE, boot=FALSE)
>
>
> #covariance matrix of innovations
> d <- dim(FER[[1]])
> for (i in 1:n) {
> errvar <- FER[[i]]
> if (i == 1) {CovIn <- errvar[(d[1]),]}
> if (i != 1) {CovIn <- rbind(CovIn, errvar[(d[1]),])}
> }

It's generally going to give you worlds better performance to make a
list of objects and then rbind() them all at once. (Consider the
equivalent C level operations of malloc()ing and free()ing on each
iteration, with all the work that entails) You can also avoid an
(explicit) for loop by doing something like:

do.call(rbind, lapply(FER, function(x) x[d[1],]))

> #long run cumulative response functions
> CRF <- irf(var, n.ahead=ImpulseResponse, ortho=TRUE, cumulative=FALSE,
> boot=FALSE)
> #matrix of long run cumulative response functions
> d <- dim(CRF$irf[[1]])
> for (i in 1:n) {
> lrcrf <- CRF$irf[[i]]
> if (i == 1) {LRCoeffs <- lrcrf[(d[1]),]}
> if (i != 1) {LRCoeffs <- rbind(LRCoeffs, lrcrf[(d[1]),])}
> }

As before, something like

do.call(rbind, lapply(CRF, function(x) x[d[1],]))

>  Cdiag  <- diag(CovIn)
> sqrtd <- sqrt(Cdiag)
> sd  <- diag(sqrt(sqrtd)

Are you sure you mean to sqrt() twice in here?

> cor   <- sd %*% CovIn %*% sd
> cd  <- t(chol(cor))
> VarContrib     <- LRCoeffs %*% cd

Probably a little easier to use the tcrossprod() function:

VarContrib <- tcrossprod(LRCoeffs, chol(cor))

> VarTotal       <- colSums(VarContrib)
> VarTotalMatrix <- VarTotal
>  for (i in 1:(VectorCount-1)) {

See below, but this sort of syntax is sometimes fraught with peril
because it gives a loop of length 2, not 0 if VectorCount = 1;
specifically, it loops for i = 1 and then i = 0.

> VarTotalMatrix <- rbind(VarTotalMatrix,VarTotal)}
> PC <- VarContrib / (VarTotalMatrix)
>  if (j == 1) {
> PropCont <- colMeans(t(PC))}
> if (j != 1) {
> PropCont <- rbind(PropCont, colMeans(t(PC)))}
> }

I'll let you modify this one like above, but note there's also a
rowMeans() function which will be faster than colMeans(t(...))

> rm(InformationShares)
> colnames(PropCont) <- InputVectors
> InformationShares  <-colMeans(PropCont)

I'd recommend you wrap this all up in a function: then you don't have
to worry about freeing memory with rm() [It just happens when the
function call ends] and your code will be more reusable. If you do so,
it's not totally necessary, but it'll be easier to read if you add
return(InformationShares) at the end. [Some prefer just
InformationShares without a return statement but I find that
marginally less obvious: you actually wouldn't need either here
because of some subtleties about <- being a function as well, but
don't worry about that here.]

Disclaimer: I did the do.call(rbind, ...) bits real quick: they might
not be quite perfect.

Best,
Michael


>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Wed Jul 11 21:03:32 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 11 Jul 2012 14:03:32 -0500
Subject: [R-SIG-Finance] TSE ticker problems
In-Reply-To: <4FFDCC84.3010002@gmail.com>
References: <4FFDBC8E.2080809@gmail.com>
	<CA+xi=qZtn2b1+qZuDz_rbNHhfDOT4FoVm3ZBRbMtjCuL2rLdcA@mail.gmail.com>
	<4FFDCC84.3010002@gmail.com>
Message-ID: <CA+xi=qY5BsCvic8syeT5g755Z3Q2rVPVOKm=+v4XRqiwdv50nA@mail.gmail.com>

I don't think google provides that data in a nice format (i.e. CSV)

If you go to http://www.google.com/finance/historical?q=NYSEARCA:SPY
you can see that on the right side of the page there is a section
called "Export" with a link called "Download to spreadsheet"

However, if you go the analogous page for COS, there is no such link.
http://www.google.com/finance/historical?q=TSE:COS

On Wed, Jul 11, 2012 at 1:57 PM, Paul Gilbert <pgilbert902 at gmail.com> wrote:
> My bad. Indeed the examples should have been:
>
>> getSymbols("BMO.TO", src="yahoo")
>> getSymbols("COS.TO", src="yahoo")
>> getSymbols("TSE:COS", src="google")
>
> They lost something in translation from my code. The problem is not resolved
> by this correction, however the yahoo retrieval is fixed by the
> getSymbols.yahoo URL change suggested.
>
> The google retrieval still causes problems:
>
>> getSymbols("TSE:COS", src="google")
> Error in download.file(paste(google.URL, "q=", Symbols.name, "&startdate=",
> :
>   cannot open URL
> 'http://finance.google.com/finance/historical?q=TSE:COS&startdate=Jan+01,+2007&enddate=Jul+11,+2012&output=csv'
> In addition: Warning message:
> In download.file(paste(google.URL, "q=", Symbols.name, "&startdate=",  :
>
>   cannot open: HTTP status was '404 Not Found'
>>
>
> Any further suggestions appreciated.
>
> Thanks,
> Paul
>
>


From dougedmunds at gmail.com  Wed Jul 11 21:39:30 2012
From: dougedmunds at gmail.com (Doug Edmunds)
Date: Wed, 11 Jul 2012 12:39:30 -0700
Subject: [R-SIG-Finance] TSE ticker problems
Message-ID: <4FFDD672.7000003@gmail.com>

On http://finance.yahoo.com/q/hp?s=COS.TO ,
the link to Historical Prices has no data.

Probably why you only get headers.


 >>> getSymbols("COS.TO", src="yahoo")


From gsee000 at gmail.com  Wed Jul 11 21:42:21 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 11 Jul 2012 14:42:21 -0500
Subject: [R-SIG-Finance] TSE ticker problems
In-Reply-To: <4FFDD672.7000003@gmail.com>
References: <4FFDD672.7000003@gmail.com>
Message-ID: <CA+xi=qZUBxHAAZrWNMiLDETN0KUmwskpSauZioo3OeSb_16mug@mail.gmail.com>

But... I see plenty of data there...  including a link to "Download to
Spreadsheet"
http://ichart.finance.yahoo.com/table.csv?s=COS.TO&d=6&e=11&f=2012&g=d&a=7&b=13&c=1996&ignore=.csv

On Wed, Jul 11, 2012 at 2:39 PM, Doug Edmunds <dougedmunds at gmail.com> wrote:
> On http://finance.yahoo.com/q/hp?s=COS.TO ,
> the link to Historical Prices has no data.
>
> Probably why you only get headers.
>
>
>>>> getSymbols("COS.TO", src="yahoo")
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From jeffrey.ryan at lemnica.com  Wed Jul 11 22:07:39 2012
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Wed, 11 Jul 2012 15:07:39 -0500
Subject: [R-SIG-Finance] TSE ticker problems
In-Reply-To: <CA+xi=qZUBxHAAZrWNMiLDETN0KUmwskpSauZioo3OeSb_16mug@mail.gmail.com>
References: <4FFDD672.7000003@gmail.com>
	<CA+xi=qZUBxHAAZrWNMiLDETN0KUmwskpSauZioo3OeSb_16mug@mail.gmail.com>
Message-ID: <CABDUZc9FK=yL13a3V_BTXTeSa6AYbNqCLfM3Gm2uw94qdR1uNA@mail.gmail.com>

The format that getSymbols uses internally is:

http://chart.yahoo.com/table.csv?s=COS.TO&a=0&b=01&c=2007&d=6&e=11&f=2012&g=d&q=q&y=0&z=COS.TO&x=.csv

Which somehow doesn't resolve to the data in this instance.  I'll investigate.

Thanks,
Jeff

On Wed, Jul 11, 2012 at 2:42 PM, G See <gsee000 at gmail.com> wrote:
> But... I see plenty of data there...  including a link to "Download to
> Spreadsheet"
> http://ichart.finance.yahoo.com/table.csv?s=COS.TO&d=6&e=11&f=2012&g=d&a=7&b=13&c=1996&ignore=.csv
>
> On Wed, Jul 11, 2012 at 2:39 PM, Doug Edmunds <dougedmunds at gmail.com> wrote:
>> On http://finance.yahoo.com/q/hp?s=COS.TO ,
>> the link to Historical Prices has no data.
>>
>> Probably why you only get headers.
>>
>>
>>>>> getSymbols("COS.TO", src="yahoo")
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From gsee000 at gmail.com  Wed Jul 11 23:19:53 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 11 Jul 2012 16:19:53 -0500
Subject: [R-SIG-Finance] TSE ticker problems
In-Reply-To: <4FFDCC84.3010002@gmail.com>
References: <4FFDBC8E.2080809@gmail.com>
	<CA+xi=qZtn2b1+qZuDz_rbNHhfDOT4FoVm3ZBRbMtjCuL2rLdcA@mail.gmail.com>
	<4FFDCC84.3010002@gmail.com>
Message-ID: <CA+xi=qaHd2u055h7NArsqMHijjMWXatKFTLqKkYcYydroUHXKA@mail.gmail.com>

Paul,

Although, changing the yahoo URL seemed to work to get yahoo's data
for COS.TO, beware that there is a 4+ month gap in their data in 2012.

tail(COS.TO)
           COS.TO.Open COS.TO.High COS.TO.Low COS.TO.Close COS.TO.Volume
2012-02-22       23.25       23.61      23.23        23.61       1473800
2012-02-23       23.68       23.75      23.41        23.62       1560800
2012-02-24       23.74       23.96      23.62        23.66       1639300
2012-02-27       23.60       23.60      23.26        23.34       1261100
2012-02-28       23.34       23.70      23.27        23.34       2038900
2012-07-11       19.13       19.59      18.92        19.40       1286400
           COS.TO.Adjusted
2012-02-22           23.61
2012-02-23           23.62
2012-02-24           23.66
2012-02-27           23.34
2012-02-28           23.34
2012-07-11           23.34

Garrett


On Wed, Jul 11, 2012 at 1:57 PM, Paul Gilbert <pgilbert902 at gmail.com> wrote:
<snip>
> however the yahoo retrieval is fixed by the
> getSymbols.yahoo URL change suggested.


From pgilbert902 at gmail.com  Wed Jul 11 23:35:22 2012
From: pgilbert902 at gmail.com (Paul Gilbert)
Date: Wed, 11 Jul 2012 17:35:22 -0400
Subject: [R-SIG-Finance] TSE ticker problems
In-Reply-To: <CABDUZc9FK=yL13a3V_BTXTeSa6AYbNqCLfM3Gm2uw94qdR1uNA@mail.gmail.com>
References: <4FFDD672.7000003@gmail.com>
	<CA+xi=qZUBxHAAZrWNMiLDETN0KUmwskpSauZioo3OeSb_16mug@mail.gmail.com>
	<CABDUZc9FK=yL13a3V_BTXTeSa6AYbNqCLfM3Gm2uw94qdR1uNA@mail.gmail.com>
Message-ID: <4FFDF19A.2060703@gmail.com>

Jeff

I've switched back and forth between chart.yahoo.com and 
ichart.finance.yahoo.com. Some things seem to fail on one or the other. 
I made yahoo.URL an argument so I could pass it, and looped through a 
list trying the second if the first failed. Currently  BBD.B.TO fails 
with both, but it worked on the default URL yesterday. I'm pausing for 2 
seconds between each retrieval, so I don't think yahoo should be 
blocking me.

In addition, I had not noticed the gap that Garrett just pointed out.

Paul

On 12-07-11 04:07 PM, Jeffrey Ryan wrote:
> The format that getSymbols uses internally is:
>
> http://chart.yahoo.com/table.csv?s=COS.TO&a=0&b=01&c=2007&d=6&e=11&f=2012&g=d&q=q&y=0&z=COS.TO&x=.csv
>
> Which somehow doesn't resolve to the data in this instance.  I'll investigate.
>
> Thanks,
> Jeff
>
> On Wed, Jul 11, 2012 at 2:42 PM, G See <gsee000 at gmail.com> wrote:
>> But... I see plenty of data there...  including a link to "Download to
>> Spreadsheet"
>> http://ichart.finance.yahoo.com/table.csv?s=COS.TO&d=6&e=11&f=2012&g=d&a=7&b=13&c=1996&ignore=.csv
>>
>> On Wed, Jul 11, 2012 at 2:39 PM, Doug Edmunds <dougedmunds at gmail.com> wrote:
>>> On http://finance.yahoo.com/q/hp?s=COS.TO ,
>>> the link to Historical Prices has no data.
>>>
>>> Probably why you only get headers.
>>>
>>>
>>>>>> getSymbols("COS.TO", src="yahoo")
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions
>>> should go.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
>
>


From hifin at live.com  Thu Jul 12 05:04:56 2012
From: hifin at live.com (hifin)
Date: Wed, 11 Jul 2012 20:04:56 -0700 (PDT)
Subject: [R-SIG-Finance] quantstrat maCross demo problem
In-Reply-To: <1341972928096-4636089.post@n4.nabble.com>
References: <1341972928096-4636089.post@n4.nabble.com>
Message-ID: <1342062296203-4636249.post@n4.nabble.com>

The demo code specifies that the strategy enters and exits on the long side.
How come it also enters on the short side. Is this a bug? 

stratMACROSS <- add.rule(strategy = stratMACROSS,name='ruleSignal',
arguments = list(sigcol="ma50.gt.ma200",sigval=TRUE, orderqty=100,
ordertype='market', orderside='long'),type='enter')

stratMACROSS <- add.rule(strategy = stratMACROSS,name='ruleSignal',
arguments = list(sigcol="ma50.lt.ma200",sigval=TRUE, orderqty=-100,
ordertype='market', orderside='long'),type='exit')



--
View this message in context: http://r.789695.n4.nabble.com/quantstrat-maCross-demo-problem-tp4636089p4636249.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Thu Jul 12 16:06:35 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 12 Jul 2012 09:06:35 -0500
Subject: [R-SIG-Finance] yahoo dates
In-Reply-To: <alpine.DEB.2.02.1207101142180.7601@paninaro.uibk.ac.at>
References: <4FF5CFFE.7010404@gmail.com>
	<CAN24TLcup+agxRrXKrAAXvioyTLbe0i9Ef8JgJQ2qNwZ2KeQLQ@mail.gmail.com>
	<CA+xi=qY+fjDiOrmdT4xSDoDAU7H=S+aT178CcfpqYtM20mH3AA@mail.gmail.com>
	<alpine.DEB.2.02.1207101142180.7601@paninaro.uibk.ac.at>
Message-ID: <CA+xi=qbifa2jOALRJ=TcZ1zvypeTOjXS2du+nzcT7k2z3tprTw@mail.gmail.com>

The workaround for get.hist.quote sounds like a good one, and I would
love to see something similar added to getSymbols.yahoo.

I did not mean to suggest that there's not a problem; the point I was
trying to get at is that I think it only occurs with historical data,
not "current" data.  So, the user could record their own data.  I
realize that's a little off topic to the question though.

To test my theory, I've been "streaming" quotes from yahoo for the
past couple days by repeatedly requesting current quotes.  I've found
that the extra volume never appears using this method.  When the
market closes, the Volume stops changing.  When the market opens, the
volume jumps to zero (or close to it).  So, one workaround might be to
replace the last day (and it's duplicate if there is a duplicate) with
the data returned by `getQuote`

For reference, here's the code I used to collect data.  Although, it
probably shouldn't be used because Yahoo probably doesn't like folks
hitting their server this hard.

library(quantmod)
filename <- "~/GSPCintra.csv"
file.create(filename)
# Add headers
cat(paste0("Sys.time,", paste(make.names(colnames(getQuote("^GSPC"))),
                              collapse=","), "\n"), file=filename)

# record data; break with ctrl-c
while(TRUE) {
  try(cat(paste0(Sys.time(), ",", paste(getQuote("^GSPC")[1, ], collapse=","),
                                    "\n"), file=filename, append=TRUE))
}

# retrieve
tmp <- read.table(filename, stringsAsFactors=FALSE, sep=",", header=TRUE)
x <- xts(tmp[, c(6:8, 3, 9)], as.POSIXct(tmp[, 1]))

Cheers,
Garrett

On Tue, Jul 10, 2012 at 4:56 AM, Achim Zeileis <Achim.Zeileis at uibk.ac.at> wrote:
> On Mon, 9 Jul 2012, G See wrote:
>
>> FWIW, I download 33 fields from yahoo every night at 10 p.m. CDT using
>
>
> I'm not sure but maybe that is still too early. The problem is real and
> occurs for me "now" (around 10:00 GMT), both for individual stocks and
> indexes:
>
> R> library("quantmod")
> R> getSymbols(c("^GSPC", "IBM"))
> R> tail(GSPC, 3)
>            GSPC.Open GSPC.High GSPC.Low GSPC.Close GSPC.Volume GSPC.Adjusted
> 2012-07-06   1367.09   1367.09  1348.03    1354.68  2745140000       1354.68
> 2012-07-09   1354.66   1354.87  1346.65    1352.51   399252300       1352.46
> 2012-07-09   1354.66   1354.87  1346.65    1352.46  2904860000       1352.46
> R> tail(IBM, 3)
>            IBM.Open IBM.High IBM.Low IBM.Close IBM.Volume IBM.Adjusted
> 2012-07-06   193.92   193.94  189.74    191.41    4952900       191.41
> 2012-07-09   190.66   191.00  188.05    189.65    3569800       189.67
> 2012-07-09   190.76   191.00  188.05    189.67    3988100       189.67
>
> Note the last line in both cases, especially the volume. The same is
> visible, of course, at the Yahoo! Finance site:
>
> http://finance.yahoo.com/q/hp?s=^GSPC+Historical+Prices
> http://finance.yahoo.com/q/hp?s=IBM+Historical+Prices
>
> Users of Yahoo! Finance also complained about this in the user forum. But as
> nobody could offer a good explanation for this, we implemented a patch in
> tseries' get.hist.quote() that omits the last observation in case its date
> is dupblicated:
>

This sounds like something quantmod should consider doing

> R> library("tseries")
> R> tail(get.hist.quote("IBM"), 3)
>              Open   High    Low  Close
> 2012-07-05 194.88 196.85 193.63 195.29
> 2012-07-06 193.92 193.94 189.74 191.41
> 2012-07-09 190.76 191.00 188.05 189.67
> Warning message:
> In get.hist.quote("IBM") : first date duplicated, first instance omitted
>
> Best,
>
> Z
>


From brian at braverock.com  Thu Jul 12 22:56:42 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 12 Jul 2012 15:56:42 -0500
Subject: [R-SIG-Finance] quantstrat maCross demo problem
In-Reply-To: <1341972928096-4636089.post@n4.nabble.com>
References: <1341972928096-4636089.post@n4.nabble.com>
Message-ID: <4FFF3A0A.4040309@braverock.com>

On 07/10/2012 09:15 PM, hifin wrote:
> I'm using R 2.15.1 and latest version of all packages. When I ran the maCross
> demo, (AAPL from 1999-12-31 and LONG only), I got the following results:
<snip>
> However, when I change the startdate from 1999-12-31 to 2005-12-31, it
> returns
<snip>
> It starts with a SHORT position while the demo code should be LONG ONLY.
> Can anybody tell me what the problem is? Thanks!

I don't know what the root cause it yet, but I was able to replicate it. 
  As a short workaround, using orderqty='all' for the exit order solves 
the problem, as does using osMaxPos.  I'll dig deeper on the root cause 
of why the exit order fires there when I have a bit more time.

Regards,

Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From hifin at live.com  Fri Jul 13 03:53:25 2012
From: hifin at live.com (hifin)
Date: Thu, 12 Jul 2012 18:53:25 -0700 (PDT)
Subject: [R-SIG-Finance] quantstrat maCross demo problem
In-Reply-To: <4FFF3A0A.4040309@braverock.com>
References: <1341972928096-4636089.post@n4.nabble.com>
	<4FFF3A0A.4040309@braverock.com>
Message-ID: <1342144405594-4636384.post@n4.nabble.com>

Thanks Brian. Setting orderqty='all' on the exit side solves the problem.
just wonder if this is a solution for this demo only or if it will cause
other problems when the strategy is more complicated. 

For the root cause, a previous thread mentioned a problem of how applyRules
handle the order of order types ("entry", "exit", etc). The thread is here
http://r.789695.n4.nabble.com/quantstrat-tp3208477p3237429.html


--
View this message in context: http://r.789695.n4.nabble.com/quantstrat-maCross-demo-problem-tp4636089p4636384.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From brian at braverock.com  Fri Jul 13 13:28:02 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 13 Jul 2012 06:28:02 -0500
Subject: [R-SIG-Finance] quantstrat maCross demo problem
In-Reply-To: <1342144405594-4636384.post@n4.nabble.com>
References: <1341972928096-4636089.post@n4.nabble.com>
	<4FFF3A0A.4040309@braverock.com>
	<1342144405594-4636384.post@n4.nabble.com>
Message-ID: <50000642.1020205@braverock.com>

On 07/12/2012 08:53 PM, hifin wrote:
> Thanks Brian. Setting orderqty='all' on the exit side solves the problem.
> just wonder if this is a solution for this demo only or if it will cause
> other problems when the strategy is more complicated.

We've tried to correctly process orderqty='all' for risk and exit rules.

I suspect that the issue the -100 fires is that rcit orders can be 
entered before a position exists.  I think another 'fix' for this would 
be to use order sets.  This would give applyRules a 'hint' that the exit 
is tied to an enter that might not already exist.  As I said in my prior 
email, I haven't had/taken the time to look more closely at the root 
cause yet.

> For the root cause, a previous thread mentioned a problem of how applyRules
> handle the order of order types ("entry", "exit", etc). The thread is here
> http://r.789695.n4.nabble.com/quantstrat-tp3208477p3237429.html

Order of operations can always affect things, of course, but I don't 
think it is an issue in this case, as there is no 'enter' rule trying to 
fire on the same timestamp.  Order of operations should be most 
carefully considered on 'stop and reverse' type strategies.

Regards,

   - Brian


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From costas.vorlow at gmail.com  Fri Jul 13 20:50:39 2012
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Fri, 13 Jul 2012 21:50:39 +0300
Subject: [R-SIG-Finance] XTS plot of intra-daily stock prices
Message-ID: <CABfqsR8EtsxRJsA4GTABZJJf8px74vHQTR+sQ_Oc8r-FmgeZxQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120713/09dbcb72/attachment.pl>

From jeffrey.ryan at lemnica.com  Fri Jul 13 21:35:55 2012
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Fri, 13 Jul 2012 14:35:55 -0500
Subject: [R-SIG-Finance] XTS plot of intra-daily stock prices
In-Reply-To: <CABfqsR8EtsxRJsA4GTABZJJf8px74vHQTR+sQ_Oc8r-FmgeZxQ@mail.gmail.com>
References: <CABfqsR8EtsxRJsA4GTABZJJf8px74vHQTR+sQ_Oc8r-FmgeZxQ@mail.gmail.com>
Message-ID: <CABDUZc-X=OgxMAUuphMPn-LX7H7UkqkS6qNHtLd=KH02FYLf0A@mail.gmail.com>

plot.xts is designed to have time intervals properly represented on
the x-axis, whereas something like chart_Series will simply use
1:length(x) for the spacing (i.e. constant delta).  This is useful as
it faithfully represents the intervals between events, but in some
cases (weekend in market data), it can look a bit sketchy.

You can either use chart_Series or remove the 'xts' part via coredata,
and use a generic plot command.

HTH
Jeff

On Fri, Jul 13, 2012 at 1:50 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
> Hello,
>
> When I plot more than a day's xts time series data on a stock (intra-daily
> frequency) I get gaps during the non-trading hours.
>
> I placed some examples here:
>
> http://users.hol.gr/~laurarvc/Costas/R/
>
>
> Can I homogenize the plots i.e., skip those gaps so I have more continuous
> plots of high frequency prices?
> I can't find something on the help page of the relevant plot command...
>
> Best regards,
> Costas
>
> --
>
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From michael.weylandt at gmail.com  Fri Jul 13 21:49:47 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Fri, 13 Jul 2012 14:49:47 -0500
Subject: [R-SIG-Finance] XTS plot of intra-daily stock prices
In-Reply-To: <CABfqsR8EtsxRJsA4GTABZJJf8px74vHQTR+sQ_Oc8r-FmgeZxQ@mail.gmail.com>
References: <CABfqsR8EtsxRJsA4GTABZJJf8px74vHQTR+sQ_Oc8r-FmgeZxQ@mail.gmail.com>
Message-ID: <CAAmySGPz1S+eL8gEQDMbX=VgRBwE=dpemy04XParQpeF4pjUzA@mail.gmail.com>

Hi Costas,

Unfortunately, I think this isn't exactly a trivial thing to do: R
doesn't by default support broken axis plots (which I think is more or
less what you are looking for). I'm interested in helping you out with
this, but just to make sure I understand what you are looking for,
your data is something like

tm <- as.POSIXct(1342207451, origin = "1970-01-01")
x <- xts(rnorm(100), tm+ 100*c(0:49, 0:49 + 5e2))
plot(x)

and you want that long flat bit omitted?

Here's a cheap hack to work around if I understand the problem:

plot.by.day <- function(x, ...){
    ti <- deparse(substitute(x))
    x2 <- split(x, as.Date(index(x), tz = ""))
    op <- par(no.readonly = TRUE)
    par(mfrow = c(1, length(x2)), mar = c(5.1, 0, 4.1, 0), oma = c(0,
4.1, 1, 2.1))
    for(x3 in x2) xts::plot.xts(as.xts(x3), yaxt = "n", main = "",
ylim = range(x), ...)
    mtext(ti, outer = TRUE, cex = 2, line = -2)
}

It could use some more work though. (and I just wipped it up, so it
will probably break in all sorts of unpleasant ways) Lemme know how it
goes for you and I might start polishing it.

Best,
Michael


On Fri, Jul 13, 2012 at 1:50 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
> Hello,
>
> When I plot more than a day's xts time series data on a stock (intra-daily
> frequency) I get gaps during the non-trading hours.
>
> I placed some examples here:
>
> http://users.hol.gr/~laurarvc/Costas/R/
>
>
> Can I homogenize the plots i.e., skip those gaps so I have more continuous
> plots of high frequency prices?
> I can't find something on the help page of the relevant plot command...
>
> Best regards,
> Costas
>
> --
>
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
> |c|o|s|t|a|s|@|v|o|r|l|o|w|.|o|r|g|
> +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From unsown at gmail.com  Sat Jul 14 16:59:39 2012
From: unsown at gmail.com (unsown)
Date: Sat, 14 Jul 2012 07:59:39 -0700 (PDT)
Subject: [R-SIG-Finance] qsiblive,
	how to debug code with source() as sub procedure
Message-ID: <1342277979105-4636519.post@n4.nabble.com>

I'm not an experienced R user and I'm currently trying with the psiblive demo
codes. I found the source() command has been used in quite a few places  in
the codes. I understand that by using this a long procedure can be separated
into several modules, but  I found it is not easy to debug. One of the
difficulty is that it seems not easy to find out which file and which line
the error belonged to. I tried commands such as debug, browser, trace and
recover, but often ended up with nowhere. It takes me a lot time to locate
where the problem is. So I wondered if there is any standard way or
procedure to debug code with many files sourced into it?

And as far as I know the R will interpret the sourced codes by aggregating
them into a single procedure. I wondered if it would be safer and clearer to
just use functions for the same purpose of source()?

--
View this message in context: http://r.789695.n4.nabble.com/qsiblive-how-to-debug-code-with-source-as-sub-procedure-tp4636519.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Sat Jul 14 17:03:40 2012
From: gsee000 at gmail.com (G See)
Date: Sat, 14 Jul 2012 10:03:40 -0500
Subject: [R-SIG-Finance] qsiblive,
	how to debug code with source() as sub procedure
In-Reply-To: <1342277979105-4636519.post@n4.nabble.com>
References: <1342277979105-4636519.post@n4.nabble.com>
Message-ID: <CA+xi=qZsKHaW6A+zXEMMhojYkboT-ZtV6t-AAk9XK6z7kjLfMg@mail.gmail.com>

On Sat, Jul 14, 2012 at 9:59 AM, unsown <unsown at gmail.com> wrote:
> I'm not an experienced R user and I'm currently trying with the psiblive demo
> codes. I found the source() command has been used in quite a few places  in
> the codes. I understand that by using this a long procedure can be separated
> into several modules, but  I found it is not easy to debug. One of the
> difficulty is that it seems not easy to find out which file and which line
> the error belonged to.

Maybe ?getSrcFilename can help with this

Regards,
Garrett


From unsown at gmail.com  Sun Jul 15 02:53:51 2012
From: unsown at gmail.com (unsown)
Date: Sat, 14 Jul 2012 17:53:51 -0700 (PDT)
Subject: [R-SIG-Finance] qsiblive,
	how to debug code with source() as sub procedure
In-Reply-To: <CA+xi=qZsKHaW6A+zXEMMhojYkboT-ZtV6t-AAk9XK6z7kjLfMg@mail.gmail.com>
References: <1342277979105-4636519.post@n4.nabble.com>
	<CA+xi=qZsKHaW6A+zXEMMhojYkboT-ZtV6t-AAk9XK6z7kjLfMg@mail.gmail.com>
Message-ID: <1342313631714-4636533.post@n4.nabble.com>

Thanks for your reply. But what if the error occurs in an expression instead
of in a function defined in the source code?

--
View this message in context: http://r.789695.n4.nabble.com/qsiblive-how-to-debug-code-with-source-as-sub-procedure-tp4636519p4636533.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From dangthanhtung91 at gmail.com  Sun Jul 15 19:24:13 2012
From: dangthanhtung91 at gmail.com (tung110891)
Date: Sun, 15 Jul 2012 10:24:13 -0700 (PDT)
Subject: [R-SIG-Finance] Application of forecasting result in GARCH model
Message-ID: <1342373053556-4636576.post@n4.nabble.com>

Hello Everyone, 
Recently, I have been studying GARCH model and some its application in stock
market. I have used Rugarch package and receive final result of GARCH model.
For example:
> spec = ugarchspec()
> data(sp500ret)
> fit = ugarchfit(spec = spec, data = sp500ret, solver.control = list(trace
> = 0))
> forc = ugarchforecast(fit, n.ahead=10)
> forc

*------------------------------------*
* GARCH Model Forecast    *
*------------------------------------*
Model: sGARCH
Horizon: 10
Roll Steps: 0
Out of Sample: 0

0-roll forecast: 
                    sigma    series
2009-02-02 0.02477 0.0016170
2009-02-03 0.02471 0.0014362
2009-02-04 0.02465 0.0012851
2009-02-05 0.02458 0.0011588
2009-02-06 0.02452 0.0010532
2009-02-09 0.02446 0.0009650
2009-02-10 0.02440 0.0008913
2009-02-11 0.02434 0.0008297
2009-02-12 0.02427 0.0007783
2009-02-13 0.02421 0.0007353
But, I do not know method to use these final results. 
Can someone teach me some methods to these results in stock market ? 
Many Thanks, 
Tung

--
View this message in context: http://r.789695.n4.nabble.com/Application-of-forecasting-result-in-GARCH-model-tp4636576.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From dangthanhtung91 at gmail.com  Mon Jul 16 04:05:06 2012
From: dangthanhtung91 at gmail.com (tung110891)
Date: Sun, 15 Jul 2012 19:05:06 -0700 (PDT)
Subject: [R-SIG-Finance] Application of forecasting result in GARCH model
In-Reply-To: <1342373053556-4636576.post@n4.nabble.com>
References: <1342373053556-4636576.post@n4.nabble.com>
Message-ID: <1342404306802-4636603.post@n4.nabble.com>

In introduction of some books related with GARCH model, authors usually
recommend lots of application of GARCH model, for instant, you can apply
GARCH model to diverse fields as risk management, portfolio management and
asset allocation, option price, foreign exchange. However, they do not teach
real method in order to use forecasting results of GARCH model in above
applications. 
I take a lot of difficulties to apply these forecasting results. Can someone
recommend me some books or materials related with above problems? 
Thank you very much for any answer you provide.


--
View this message in context: http://r.789695.n4.nabble.com/Application-of-forecasting-result-in-GARCH-model-tp4636576p4636603.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From me at censix.com  Mon Jul 16 11:47:14 2012
From: me at censix.com (soren wilkening)
Date: Mon, 16 Jul 2012 02:47:14 -0700 (PDT)
Subject: [R-SIG-Finance] qsiblive,
	how to debug code with source() as sub procedure
In-Reply-To: <1342313631714-4636533.post@n4.nabble.com>
References: <1342277979105-4636519.post@n4.nabble.com>
	<CA+xi=qZsKHaW6A+zXEMMhojYkboT-ZtV6t-AAk9XK6z7kjLfMg@mail.gmail.com>
	<1342313631714-4636533.post@n4.nabble.com>
Message-ID: <1342432034776-4636623.post@n4.nabble.com>

Hi

interesting question. I guess that when I started writing qsiblive I was
debugging/testing the source files individually, with small test scripts, so
by the time I would run the whole package at once, the likelihood of having
an error in any of the source files was very small.

Whenever there was an error while testing the whole package, I suppose that
I more or less knew where to look, depending on what the error actually was.
I never used the standard R debugging tools for this. I guess one way to do
it differently would  be to just include all the separated source files into
one main file that you can then debug with the usual R tools ... (never done
it, though)

If you want, share the error either here or with me directly (use email
given on censix.com) and I may have a look at it and will see if divine
intuition tells me something about it origin :)

Cheers

Soren

-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/qsiblive-how-to-debug-code-with-source-as-sub-procedure-tp4636519p4636623.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From junkmanu at free.fr  Mon Jul 16 14:26:16 2012
From: junkmanu at free.fr (manulemalin)
Date: Mon, 16 Jul 2012 05:26:16 -0700 (PDT)
Subject: [R-SIG-Finance] Application of forecasting result in GARCH model
In-Reply-To: <1342404306802-4636603.post@n4.nabble.com>
References: <1342373053556-4636576.post@n4.nabble.com>
	<1342404306802-4636603.post@n4.nabble.com>
Message-ID: <1342441576512-4636640.post@n4.nabble.com>

hi

if you can read some french
gourieroux c, scaillet o, sfararz a " econometrie de la finance, analyses
historiques' , economica, collection ' economie et statistiques avancees',
1997

mostly ( high level) econometrics, but with applications to the pbs you want
to solve ( capm, options, black scholes formula, smile effect...)


--
View this message in context: http://r.789695.n4.nabble.com/Application-of-forecasting-result-in-GARCH-model-tp4636576p4636640.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jdargent at dci.com  Thu Jul 19 02:01:13 2012
From: jdargent at dci.com (Julien Dargent)
Date: Thu, 19 Jul 2012 00:01:13 +0000
Subject: [R-SIG-Finance] Question on Backtest package
Message-ID: <6E8F9E3388308F4999894419540A353242363043@DCIEXCBE01.dcinv.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120719/38bf17f4/attachment.pl>

From agupta28 at gmail.com  Thu Jul 19 13:57:21 2012
From: agupta28 at gmail.com (Abhishek Gupta)
Date: Thu, 19 Jul 2012 17:27:21 +0530
Subject: [R-SIG-Finance] rugarch vs fgarch
Message-ID: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120719/0ed8ec5a/attachment.pl>

From omerle at laposte.net  Thu Jul 19 15:18:47 2012
From: omerle at laposte.net (omerle)
Date: Thu, 19 Jul 2012 15:18:47 +0200
Subject: [R-SIG-Finance]  IBrokers : quotes from futures combo and reqIds
In-Reply-To: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
References: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
Message-ID: <30246548.929111.1342703927006.JavaMail.www@wwinf8225>

Dear,

1 - Quotes from futures combo

I need quotes from futures combo but I cant find how to find these quotes.
I can place combo orders but I can't find how to get the quotes. For instance, I would 
like to have the quotes of the combo between ECO AUG12 (83617918) and ECO NOV12 
(87689647).
Do you have any idea ? 
Which part of the IB API documentation should I check ?
That's quite important for me !

2 - reqIds

If I understand well reqIds, it doesnt give the next iDs from Interactive Broker but the 
last iDs + 1 of the R session or TWS. Sometimes it doesn't work for me because when I 
relaunch R or TWS it forgets the real last iDs.
When the iDs count is relaunch ? How can I relaunch it ?


Thanks a lot,

Olivier MERLE

Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
Je cr?e ma bo?te mail www.laposte.net


From alexios at 4dscape.com  Thu Jul 19 15:40:26 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 19 Jul 2012 14:40:26 +0100
Subject: [R-SIG-Finance] rugarch vs fgarch
In-Reply-To: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
References: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
Message-ID: <50080E4A.3030101@4dscape.com>

You can do this with rugarch (and possibly fGarch) by passing the 
external regressors (factors) in the conditional mean equation. The 
documentation and vignette should provide enough information to enable 
you to figure out how to do this. You can also adopt a 2-stage approach 
in which case any GARCH package can do this (by passing the residuals 
from a first stage regression).

-Alexios

On 19/07/2012 12:57, Abhishek Gupta wrote:
> rugarch is a package that allows you to do Univariate GARCH.
> What package should I be using if I want to estimated a multi-factor
> univariate GARCH model.
>
> For example:
> sp_ret = alpha_0 + alpha1*(market_index_ret) +alpha2*(exchange_rate_return)
> + error
> sigma^2 = gamma_0 + gamm1*(error^2_{t-1}) + gamma2*(sigma^2_{t-1})
>
> Thanks.
>


From gsee000 at gmail.com  Thu Jul 19 16:37:35 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 19 Jul 2012 09:37:35 -0500
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
In-Reply-To: <30246548.929111.1342703927006.JavaMail.www@wwinf8225>
References: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
	<30246548.929111.1342703927006.JavaMail.www@wwinf8225>
Message-ID: <CA+xi=qZ+Laum=gNNg6A-ec3Si3RRuA0H4B24U=GO+BTcf+26ig@mail.gmail.com>

I don't have a complete answer, but I don't think you directly request
a quote for a twsBAG.  You could get a quote for each leg and
calculate it yourself.  Below is an example.  I hope you don't mind if
I use the get_quote function from my twsInstrument package
(https://r-forge.r-project.org/R/?group_id=1113).  I don't know how IB
calculates the BidSize and AskSize of a combo, but you can look at how
I calculated it and see if it makes sense.

[I don't trade subscribe to market data for MATIF, so below I'll make
a combo between SPY and DIA.  Note that the ratio I chose is by no
means a recommendation -- I just picked a number that would make the
spread close to dollar neutral]

require("twsInstrument")
bag <- twsBAG(
    twsComboLeg(
        conId = "756733", #conId("SPY"),
        ratio = "1",
        action = "BUY",
        exchange = "SMART"
    )   ,
    twsComboLeg(
        conId = "73128548", #conId("DIA"),
        ratio = "1.06",
        action = "SELL",
        exchange = "SMART"
    )
)

## Get a quote for both legs

(tmp <- get_quote(c(bag$comboleg[[1]]$conId, bag$comboleg[[2]]$conId)))
#    BidSize BidPrice AskPrice AskSize   Last LastSize Volume
#SPY     108   137.45   137.46     138 137.45        3 385111
#DIA      25   129.10   129.11      23 129.09        1  10656

data.frame(BidSize=min(c(as.numeric(bag$comboleg[[1]]$ratio) * tmp$BidSize[1],
                   as.numeric(bag$comboleg[[2]]$ratio) * tmp$AskSize[2])),
           BidPrice=as.numeric(bag$comboleg[[1]]$ratio) * tmp$BidPrice[1] -
                    as.numeric(bag$comboleg[[2]]$ratio) * tmp$AskPrice[2],
           AskPrice=as.numeric(bag$comboleg[[1]]$ratio) * tmp$AskPrice[1] -
                    as.numeric(bag$comboleg[[2]]$ratio) * tmp$BidPrice[2],
           AskSize=min(c(as.numeric(bag$comboleg[[1]]$ratio) * tmp$AskSize[1],
                   as.numeric(bag$comboleg[[2]]$ratio) * tmp$BidSize[2])),
           row.names=paste(rownames(tmp), collapse="."))

#        BidSize BidPrice AskPrice AskSize
#SPY.DIA   24.38   0.5934    0.614    26.5

HTH,
Garrett


On Thu, Jul 19, 2012 at 8:18 AM, omerle <omerle at laposte.net> wrote:
> Dear,
>
> 1 - Quotes from futures combo
>
> I need quotes from futures combo but I cant find how to find these quotes.
> I can place combo orders but I can't find how to get the quotes. For instance, I would
> like to have the quotes of the combo between ECO AUG12 (83617918) and ECO NOV12
> (87689647).
> Do you have any idea ?
> Which part of the IB API documentation should I check ?
> That's quite important for me !
>
> 2 - reqIds
>
> If I understand well reqIds, it doesnt give the next iDs from Interactive Broker but the
> last iDs + 1 of the R session or TWS. Sometimes it doesn't work for me because when I
> relaunch R or TWS it forgets the real last iDs.
> When the iDs count is relaunch ? How can I relaunch it ?
>
>
> Thanks a lot,
>
> Olivier MERLE
>
> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> Je cr?e ma bo?te mail www.laposte.net
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From stergios_marinopoulos at yahoo.com  Thu Jul 19 17:09:11 2012
From: stergios_marinopoulos at yahoo.com (Stergios Marinopoulos)
Date: Thu, 19 Jul 2012 08:09:11 -0700 (PDT)
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
In-Reply-To: <CA+xi=qZ+Laum=gNNg6A-ec3Si3RRuA0H4B24U=GO+BTcf+26ig@mail.gmail.com>
References: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
	<30246548.929111.1342703927006.JavaMail.www@wwinf8225>
	<CA+xi=qZ+Laum=gNNg6A-ec3Si3RRuA0H4B24U=GO+BTcf+26ig@mail.gmail.com>
Message-ID: <1342710551.76206.YahooMailNeo@web162904.mail.bf1.yahoo.com>

In Java, if you create a proper BAG Contract you can use it with reqMktData() or
reqHistoricalData(). ?I imagine the same holds true in R as well. ?(I can send Java examples if interested.)

Try using IBrokers twsBAG() function to create a combo contract, and use the returned object as the contract?to IBrokers's equivalent of reqMktData() and data should start streaming.

--
Stergios Marinopoulos


________________________________
From: G See <gsee000 at gmail.com>
To: omerle <omerle at laposte.net> 
Cc: r-sig-finance at r-project.org 
Sent: Thursday, July 19, 2012 10:37 AM
Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds

I don't have a complete answer, but I don't think you directly request
a quote for a twsBAG.? You could get a quote for each leg and
calculate it yourself.? Below is an example.? I hope you don't mind if
I use the get_quote function from my twsInstrument package
(https://r-forge.r-project.org/R/?group_id=1113).? I don't know how IB
calculates the BidSize and AskSize of a combo, but you can look at how
I calculated it and see if it makes sense.

[I don't trade subscribe to market data for MATIF, so below I'll make
a combo between SPY and DIA.? Note that the ratio I chose is by no
means a recommendation -- I just picked a number that would make the
spread close to dollar neutral]

require("twsInstrument")
bag <- twsBAG(
? ? twsComboLeg(
? ? ? ? conId = "756733", #conId("SPY"),
? ? ? ? ratio = "1",
? ? ? ? action = "BUY",
? ? ? ? exchange = "SMART"
? ? )???,
? ? twsComboLeg(
? ? ? ? conId = "73128548", #conId("DIA"),
? ? ? ? ratio = "1.06",
? ? ? ? action = "SELL",
? ? ? ? exchange = "SMART"
? ? )
)

## Get a quote for both legs

(tmp <- get_quote(c(bag$comboleg[[1]]$conId, bag$comboleg[[2]]$conId)))
#? ? BidSize BidPrice AskPrice AskSize???Last LastSize Volume
#SPY? ???108???137.45???137.46? ???138 137.45? ? ? ? 3 385111
#DIA? ? ? 25???129.10???129.11? ? ? 23 129.09? ? ? ? 1? 10656

data.frame(BidSize=min(c(as.numeric(bag$comboleg[[1]]$ratio) * tmp$BidSize[1],
? ? ? ? ? ? ? ? ???as.numeric(bag$comboleg[[2]]$ratio) * tmp$AskSize[2])),
? ? ? ? ???BidPrice=as.numeric(bag$comboleg[[1]]$ratio) * tmp$BidPrice[1] -
? ? ? ? ? ? ? ? ? ? as.numeric(bag$comboleg[[2]]$ratio) * tmp$AskPrice[2],
? ? ? ? ???AskPrice=as.numeric(bag$comboleg[[1]]$ratio) * tmp$AskPrice[1] -
? ? ? ? ? ? ? ? ? ? as.numeric(bag$comboleg[[2]]$ratio) * tmp$BidPrice[2],
? ? ? ? ???AskSize=min(c(as.numeric(bag$comboleg[[1]]$ratio) * tmp$AskSize[1],
? ? ? ? ? ? ? ? ???as.numeric(bag$comboleg[[2]]$ratio) * tmp$BidSize[2])),
? ? ? ? ???row.names=paste(rownames(tmp), collapse="."))

#? ? ? ? BidSize BidPrice AskPrice AskSize
#SPY.DIA???24.38???0.5934? ? 0.614? ? 26.5

HTH,
Garrett


On Thu, Jul 19, 2012 at 8:18 AM, omerle <omerle at laposte.net> wrote:
> Dear,
>
> 1 - Quotes from futures combo
>
> I need quotes from futures combo but I cant find how to find these quotes.
> I can place combo orders but I can't find how to get the quotes. For instance, I would
> like to have the quotes of the combo between ECO AUG12 (83617918) and ECO NOV12
> (87689647).
> Do you have any idea ?
> Which part of the IB API documentation should I check ?
> That's quite important for me !
>
> 2 - reqIds
>
> If I understand well reqIds, it doesnt give the next iDs from Interactive Broker but the
> last iDs + 1 of the R session or TWS. Sometimes it doesn't work for me because when I
> relaunch R or TWS it forgets the real last iDs.
> When the iDs count is relaunch ? How can I relaunch it ?
>
>
> Thanks a lot,
>
> Olivier MERLE
>
> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> Je cr?e ma bo?te mail www.laposte.net
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Thu Jul 19 17:11:56 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 19 Jul 2012 10:11:56 -0500
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
In-Reply-To: <1342710551.76206.YahooMailNeo@web162904.mail.bf1.yahoo.com>
References: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
	<30246548.929111.1342703927006.JavaMail.www@wwinf8225>
	<CA+xi=qZ+Laum=gNNg6A-ec3Si3RRuA0H4B24U=GO+BTcf+26ig@mail.gmail.com>
	<1342710551.76206.YahooMailNeo@web162904.mail.bf1.yahoo.com>
Message-ID: <CA+xi=qYxCuxe-QBZft2JbWd_fDdUauaX_fuMsCgkZGhFXDQFaw@mail.gmail.com>

On Thu, Jul 19, 2012 at 10:09 AM, Stergios Marinopoulos
<stergios_marinopoulos at yahoo.com> wrote:
> In Java, if you create a proper BAG Contract you can use it with reqMktData() or
> reqHistoricalData().  I imagine the same holds true in R as well.  (I can send Java examples if interested.)
>
> Try using IBrokers twsBAG() function to create a combo contract, and use the returned object as the contract to IBrokers's equivalent of reqMktData() and data should start streaming.
>

I'm unable to get that to work.  If anyone else can get it to work,
please share your secret.

Thanks,
Garrett


From stergios_marinopoulos at yahoo.com  Thu Jul 19 17:28:17 2012
From: stergios_marinopoulos at yahoo.com (Stergios Marinopoulos)
Date: Thu, 19 Jul 2012 08:28:17 -0700 (PDT)
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
In-Reply-To: <CA+xi=qYxCuxe-QBZft2JbWd_fDdUauaX_fuMsCgkZGhFXDQFaw@mail.gmail.com>
References: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
	<30246548.929111.1342703927006.JavaMail.www@wwinf8225>
	<CA+xi=qZ+Laum=gNNg6A-ec3Si3RRuA0H4B24U=GO+BTcf+26ig@mail.gmail.com>
	<1342710551.76206.YahooMailNeo@web162904.mail.bf1.yahoo.com>
	<CA+xi=qYxCuxe-QBZft2JbWd_fDdUauaX_fuMsCgkZGhFXDQFaw@mail.gmail.com>
Message-ID: <1342711697.11631.YahooMailNeo@web162901.mail.bf1.yahoo.com>

I took Garrett's example and tried to get it working using IBrokers. ?It's starts writing data to a file as expected, but then the error below is produced and quote data is no longer written to the file.?

2 1 320 Error reading request:-'wc' : cause - Unable format field -?




Here's the code:

library(IBrokers) ;
tws <- twsConnect(1)
bag <- twsBAG(
? ? twsComboLeg(
? ? ? ? conId = "756733", #conId("SPY"),
? ? ? ? ratio = "1",
? ? ? ? action = "BUY",
? ? ? ? exchange = "SMART"
? ? ) ?,
? ? twsComboLeg(
? ? ? ? conId = "73128548", #conId("DIA"),
? ? ? ? ratio = "1.06",
? ? ? ? action = "SELL",
? ? ? ? exchange = "SMART"
? ? )
)
bag.csv <- file("~/bag.csv", open="w")
reqMktData(tws, bag,?
? ? ? ? ? ?eventWrapper=eWrapper.MktData.CSV(1),?
? ? ? ? ? ?file=bag.csv)


--
Stergios Marinopoulos


----- Original Message -----
From: G See <gsee000 at gmail.com>
To: Stergios Marinopoulos <stergios_marinopoulos at yahoo.com>
Cc: omerle <omerle at laposte.net>; "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
Sent: Thursday, July 19, 2012 11:11 AM
Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds

On Thu, Jul 19, 2012 at 10:09 AM, Stergios Marinopoulos
<stergios_marinopoulos at yahoo.com> wrote:
> In Java, if you create a proper BAG Contract you can use it with reqMktData() or
> reqHistoricalData().? I imagine the same holds true in R as well.? (I can send Java examples if interested.)
>
> Try using IBrokers twsBAG() function to create a combo contract, and use the returned object as the contract to IBrokers's equivalent of reqMktData() and data should start streaming.
>

I'm unable to get that to work.? If anyone else can get it to work,
please share your secret.

Thanks,
Garrett


From me at censix.com  Thu Jul 19 18:36:46 2012
From: me at censix.com (me)
Date: Thu, 19 Jul 2012 18:36:46 +0200
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
In-Reply-To: <1342711697.11631.YahooMailNeo@web162901.mail.bf1.yahoo.com>
References: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
	<30246548.929111.1342703927006.JavaMail.www@wwinf8225>
	<CA+xi=qZ+Laum=gNNg6A-ec3Si3RRuA0H4B24U=GO+BTcf+26ig@mail.gmail.com>
	<1342710551.76206.YahooMailNeo@web162904.mail.bf1.yahoo.com>
	<CA+xi=qYxCuxe-QBZft2JbWd_fDdUauaX_fuMsCgkZGhFXDQFaw@mail.gmail.com>
	<1342711697.11631.YahooMailNeo@web162901.mail.bf1.yahoo.com>
Message-ID: <20120719183646.690343e7@desktop1>

Hi Stergios

I believe it is your ratios. They have to be integers.
your second one is      

ratio = "1.06"

You will have to calculate the most feasible rational approximation to
your beta of

-1.06/1

One solution would be

-21/20   ~   -1.05

So you could set

leg1: ratio = "21"
leg2: ratio = "20"

That should do it.

Cheers

Soren

http://censix.com


On Thu, 19 Jul 2012 08:28:17 -0700 (PDT)
Stergios Marinopoulos <stergios_marinopoulos at yahoo.com> wrote:

> I took Garrett's example and tried to get it working using IBrokers.
> ?It's starts writing data to a file as expected, but then the error
> below is produced and quote data is no longer written to the file.?
> 
> 2 1 320 Error reading request:-'wc' : cause - Unable format field -?
> 
> 
> 
> 
> Here's the code:
> 
> library(IBrokers) ;
> tws <- twsConnect(1)
> bag <- twsBAG(
> ? ? twsComboLeg(
> ? ? ? ? conId = "756733", #conId("SPY"),
> ? ? ? ? ratio = "1",
> ? ? ? ? action = "BUY",
> ? ? ? ? exchange = "SMART"
> ? ? ) ?,
> ? ? twsComboLeg(
> ? ? ? ? conId = "73128548", #conId("DIA"),
> ? ? ? ? ratio = "1.06",
> ? ? ? ? action = "SELL",
> ? ? ? ? exchange = "SMART"
> ? ? )
> )
> bag.csv <- file("~/bag.csv", open="w")
> reqMktData(tws, bag,?
> ? ? ? ? ? ?eventWrapper=eWrapper.MktData.CSV(1),?
> ? ? ? ? ? ?file=bag.csv)
> 
> 
> --
> Stergios Marinopoulos
> 
> 
> ----- Original Message -----
> From: G See <gsee000 at gmail.com>
> To: Stergios Marinopoulos <stergios_marinopoulos at yahoo.com>
> Cc: omerle <omerle at laposte.net>; "r-sig-finance at r-project.org"
> <r-sig-finance at r-project.org> Sent: Thursday, July 19, 2012 11:11 AM
> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and
> reqIds
> 
> On Thu, Jul 19, 2012 at 10:09 AM, Stergios Marinopoulos
> <stergios_marinopoulos at yahoo.com> wrote:
> > In Java, if you create a proper BAG Contract you can use it with
> > reqMktData() or reqHistoricalData().? I imagine the same holds true
> > in R as well.? (I can send Java examples if interested.)
> >
> > Try using IBrokers twsBAG() function to create a combo contract,
> > and use the returned object as the contract to IBrokers's
> > equivalent of reqMktData() and data should start streaming.
> >
> 
> I'm unable to get that to work.? If anyone else can get it to work,
> please share your secret.
> 
> Thanks,
> Garrett
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R
> questions should go.



------------------------------------------------------------------
Soren Wilkening

http://censix.com


From gsee000 at gmail.com  Thu Jul 19 19:20:42 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 19 Jul 2012 12:20:42 -0500
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
In-Reply-To: <20120719183646.690343e7@desktop1>
References: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
	<30246548.929111.1342703927006.JavaMail.www@wwinf8225>
	<CA+xi=qZ+Laum=gNNg6A-ec3Si3RRuA0H4B24U=GO+BTcf+26ig@mail.gmail.com>
	<1342710551.76206.YahooMailNeo@web162904.mail.bf1.yahoo.com>
	<CA+xi=qYxCuxe-QBZft2JbWd_fDdUauaX_fuMsCgkZGhFXDQFaw@mail.gmail.com>
	<1342711697.11631.YahooMailNeo@web162901.mail.bf1.yahoo.com>
	<20120719183646.690343e7@desktop1>
Message-ID: <CA+xi=qboW1F_9_uc=kM7xHzockyborfR0Z7NbQoftCuVyGAaGw@mail.gmail.com>

:-( I'm afraid it doesn't even work with "1" and "1"

Were you able to get market data for a twsBAG, Soren?

In May, Jeff suggested it doesn't work:
https://stat.ethz.ch/pipermail/r-sig-finance/2012q2/010258.html


On Thu, Jul 19, 2012 at 11:36 AM, me <me at censix.com> wrote:
> Hi Stergios
>
> I believe it is your ratios. They have to be integers.
> your second one is
>
> ratio = "1.06"
>
> You will have to calculate the most feasible rational approximation to
> your beta of
>
> -1.06/1
>
> One solution would be
>
> -21/20   ~   -1.05
>
> So you could set
>
> leg1: ratio = "21"
> leg2: ratio = "20"
>
> That should do it.
>
> Cheers
>
> Soren
>
> http://censix.com
>
>
> On Thu, 19 Jul 2012 08:28:17 -0700 (PDT)
> Stergios Marinopoulos <stergios_marinopoulos at yahoo.com> wrote:
>
>> I took Garrett's example and tried to get it working using IBrokers.
>>  It's starts writing data to a file as expected, but then the error
>> below is produced and quote data is no longer written to the file.
>>
>> 2 1 320 Error reading request:-'wc' : cause - Unable format field -
>>
>>
>>
>>
>> Here's the code:
>>
>> library(IBrokers) ;
>> tws <- twsConnect(1)
>> bag <- twsBAG(
>>     twsComboLeg(
>>         conId = "756733", #conId("SPY"),
>>         ratio = "1",
>>         action = "BUY",
>>         exchange = "SMART"
>>     )  ,
>>     twsComboLeg(
>>         conId = "73128548", #conId("DIA"),
>>         ratio = "1.06",
>>         action = "SELL",
>>         exchange = "SMART"
>>     )
>> )
>> bag.csv <- file("~/bag.csv", open="w")
>> reqMktData(tws, bag,
>>            eventWrapper=eWrapper.MktData.CSV(1),
>>            file=bag.csv)
>>
>>
>> --
>> Stergios Marinopoulos
>>
>>
>> ----- Original Message -----
>> From: G See <gsee000 at gmail.com>
>> To: Stergios Marinopoulos <stergios_marinopoulos at yahoo.com>
>> Cc: omerle <omerle at laposte.net>; "r-sig-finance at r-project.org"
>> <r-sig-finance at r-project.org> Sent: Thursday, July 19, 2012 11:11 AM
>> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and
>> reqIds
>>
>> On Thu, Jul 19, 2012 at 10:09 AM, Stergios Marinopoulos
>> <stergios_marinopoulos at yahoo.com> wrote:
>> > In Java, if you create a proper BAG Contract you can use it with
>> > reqMktData() or reqHistoricalData().  I imagine the same holds true
>> > in R as well.  (I can send Java examples if interested.)
>> >
>> > Try using IBrokers twsBAG() function to create a combo contract,
>> > and use the returned object as the contract to IBrokers's
>> > equivalent of reqMktData() and data should start streaming.
>> >
>>
>> I'm unable to get that to work.  If anyone else can get it to work,
>> please share your secret.
>>
>> Thanks,
>> Garrett
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R
>> questions should go.
>
>
>
> ------------------------------------------------------------------
> Soren Wilkening
>
> http://censix.com


From stergios_marinopoulos at yahoo.com  Thu Jul 19 19:21:50 2012
From: stergios_marinopoulos at yahoo.com (Stergios Marinopoulos)
Date: Thu, 19 Jul 2012 10:21:50 -0700 (PDT)
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
In-Reply-To: <1342711697.11631.YahooMailNeo@web162901.mail.bf1.yahoo.com>
References: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
	<30246548.929111.1342703927006.JavaMail.www@wwinf8225>
	<CA+xi=qZ+Laum=gNNg6A-ec3Si3RRuA0H4B24U=GO+BTcf+26ig@mail.gmail.com>
	<1342710551.76206.YahooMailNeo@web162904.mail.bf1.yahoo.com>
	<CA+xi=qYxCuxe-QBZft2JbWd_fDdUauaX_fuMsCgkZGhFXDQFaw@mail.gmail.com>
	<1342711697.11631.YahooMailNeo@web162901.mail.bf1.yahoo.com>
Message-ID: <1342718510.75497.YahooMailNeo@web162902.mail.bf1.yahoo.com>

I think see the problem. ?Looking at the TWS error log, I can see that IBrokers reqMkData() is requesting the following generic tick types by default: "100,101,104,106,165,221,225,236", (and this is documented in IBroker's reqMktData() DOH!!!) where

100:?Option Volume
101:?Option Open Interest 104:?Historical Volatility 106:?Option Implied Volatility 165:?Miscellaneous Stats 221:?Mark Price225:?Auction values236:?Shortable

Those tick types do not make sense for this BAG contract. ?The only thing that makes sense for this BAG contract is the spreads between bid, ask, or last. ? So when you call reqMktData() set?tickGenerics="". ?But when I try it, however, nothing seems to be happen.

I believe the eventWrapper argument or the CALLBACK argument to reqMktData() needs to be used in order to receive the (Java equivalent) tickPrice() events. ?Maybe someone with experience with those arguments can chime in.

--
Stergios Marinopoulos




----- Original Message -----
From: Stergios Marinopoulos <stergios_marinopoulos at yahoo.com>
To: G See <gsee000 at gmail.com>
Cc: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
Sent: Thursday, July 19, 2012 11:28 AM
Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds

I took Garrett's example and tried to get it working using IBrokers. ?It's starts writing data to a file as expected, but then the error below is produced and quote data is no longer written to the file.?

2 1 320 Error reading request:-'wc' : cause - Unable format field -?




Here's the code:

library(IBrokers) ;
tws <- twsConnect(1)
bag <- twsBAG(
? ? twsComboLeg(
? ? ? ? conId = "756733", #conId("SPY"),
? ? ? ? ratio = "1",
? ? ? ? action = "BUY",
? ? ? ? exchange = "SMART"
? ? ) ?,
? ? twsComboLeg(
? ? ? ? conId = "73128548", #conId("DIA"),
? ? ? ? ratio = "1.06",
? ? ? ? action = "SELL",
? ? ? ? exchange = "SMART"
? ? )
)
bag.csv <- file("~/bag.csv", open="w")
reqMktData(tws, bag,?
? ? ? ? ? ?eventWrapper=eWrapper.MktData.CSV(1),?
? ? ? ? ? ?file=bag.csv)


--
Stergios Marinopoulos


----- Original Message -----
From: G See <gsee000 at gmail.com>
To: Stergios Marinopoulos <stergios_marinopoulos at yahoo.com>
Cc: omerle <omerle at laposte.net>; "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
Sent: Thursday, July 19, 2012 11:11 AM
Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds

On Thu, Jul 19, 2012 at 10:09 AM, Stergios Marinopoulos
<stergios_marinopoulos at yahoo.com> wrote:
> In Java, if you create a proper BAG Contract you can use it with reqMktData() or
> reqHistoricalData().? I imagine the same holds true in R as well.? (I can send Java examples if interested.)
>
> Try using IBrokers twsBAG() function to create a combo contract, and use the returned object as the contract to IBrokers's equivalent of reqMktData() and data should start streaming.
>

I'm unable to get that to work.? If anyone else can get it to work,
please share your secret.

Thanks,
Garrett

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.



From jeffrey.ryan at lemnica.com  Thu Jul 19 19:57:21 2012
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Thu, 19 Jul 2012 12:57:21 -0500
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
In-Reply-To: <1342718510.75497.YahooMailNeo@web162902.mail.bf1.yahoo.com>
References: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
	<30246548.929111.1342703927006.JavaMail.www@wwinf8225>
	<CA+xi=qZ+Laum=gNNg6A-ec3Si3RRuA0H4B24U=GO+BTcf+26ig@mail.gmail.com>
	<1342710551.76206.YahooMailNeo@web162904.mail.bf1.yahoo.com>
	<CA+xi=qYxCuxe-QBZft2JbWd_fDdUauaX_fuMsCgkZGhFXDQFaw@mail.gmail.com>
	<1342711697.11631.YahooMailNeo@web162901.mail.bf1.yahoo.com>
	<1342718510.75497.YahooMailNeo@web162902.mail.bf1.yahoo.com>
Message-ID: <CABDUZc-uO6O+p44LTJbij7+zT=3tAw3Vb-ATJP13eJigT7z2=w@mail.gmail.com>

Version mismatches from IB/etc may be the cause here, though I am out
of the office this week so am not able to try to debug.

Make sure you are running the latest of all (including the googlecode
version of IBrokers - which you must build from source at this point).
 If not, it will be a little difficult to narrow down where the
problem is.

Thanks,
Jeff

On Thu, Jul 19, 2012 at 12:21 PM, Stergios Marinopoulos
<stergios_marinopoulos at yahoo.com> wrote:
> I think see the problem.  Looking at the TWS error log, I can see that IBrokers reqMkData() is requesting the following generic tick types by default: "100,101,104,106,165,221,225,236", (and this is documented in IBroker's reqMktData() DOH!!!) where
>
> 100: Option Volume
> 101: Option Open Interest 104: Historical Volatility 106: Option Implied Volatility 165: Miscellaneous Stats 221: Mark Price225: Auction values236: Shortable
>
> Those tick types do not make sense for this BAG contract.  The only thing that makes sense for this BAG contract is the spreads between bid, ask, or last.   So when you call reqMktData() set tickGenerics="".  But when I try it, however, nothing seems to be happen.
>
> I believe the eventWrapper argument or the CALLBACK argument to reqMktData() needs to be used in order to receive the (Java equivalent) tickPrice() events.  Maybe someone with experience with those arguments can chime in.
>
> --
> Stergios Marinopoulos
>
>
>
>
> ----- Original Message -----
> From: Stergios Marinopoulos <stergios_marinopoulos at yahoo.com>
> To: G See <gsee000 at gmail.com>
> Cc: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> Sent: Thursday, July 19, 2012 11:28 AM
> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
>
> I took Garrett's example and tried to get it working using IBrokers.  It's starts writing data to a file as expected, but then the error below is produced and quote data is no longer written to the file.
>
> 2 1 320 Error reading request:-'wc' : cause - Unable format field -
>
>
>
>
> Here's the code:
>
> library(IBrokers) ;
> tws <- twsConnect(1)
> bag <- twsBAG(
>     twsComboLeg(
>         conId = "756733", #conId("SPY"),
>         ratio = "1",
>         action = "BUY",
>         exchange = "SMART"
>     )  ,
>     twsComboLeg(
>         conId = "73128548", #conId("DIA"),
>         ratio = "1.06",
>         action = "SELL",
>         exchange = "SMART"
>     )
> )
> bag.csv <- file("~/bag.csv", open="w")
> reqMktData(tws, bag,
>            eventWrapper=eWrapper.MktData.CSV(1),
>            file=bag.csv)
>
>
> --
> Stergios Marinopoulos
>
>
> ----- Original Message -----
> From: G See <gsee000 at gmail.com>
> To: Stergios Marinopoulos <stergios_marinopoulos at yahoo.com>
> Cc: omerle <omerle at laposte.net>; "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> Sent: Thursday, July 19, 2012 11:11 AM
> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
>
> On Thu, Jul 19, 2012 at 10:09 AM, Stergios Marinopoulos
> <stergios_marinopoulos at yahoo.com> wrote:
>> In Java, if you create a proper BAG Contract you can use it with reqMktData() or
>> reqHistoricalData().  I imagine the same holds true in R as well.  (I can send Java examples if interested.)
>>
>> Try using IBrokers twsBAG() function to create a combo contract, and use the returned object as the contract to IBrokers's equivalent of reqMktData() and data should start streaming.
>>
>
> I'm unable to get that to work.  If anyone else can get it to work,
> please share your secret.
>
> Thanks,
> Garrett
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From jeffrey.ryan at lemnica.com  Thu Jul 19 20:41:58 2012
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Thu, 19 Jul 2012 13:41:58 -0500
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
In-Reply-To: <CABDUZc-uO6O+p44LTJbij7+zT=3tAw3Vb-ATJP13eJigT7z2=w@mail.gmail.com>
References: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
	<30246548.929111.1342703927006.JavaMail.www@wwinf8225>
	<CA+xi=qZ+Laum=gNNg6A-ec3Si3RRuA0H4B24U=GO+BTcf+26ig@mail.gmail.com>
	<1342710551.76206.YahooMailNeo@web162904.mail.bf1.yahoo.com>
	<CA+xi=qYxCuxe-QBZft2JbWd_fDdUauaX_fuMsCgkZGhFXDQFaw@mail.gmail.com>
	<1342711697.11631.YahooMailNeo@web162901.mail.bf1.yahoo.com>
	<1342718510.75497.YahooMailNeo@web162902.mail.bf1.yahoo.com>
	<CABDUZc-uO6O+p44LTJbij7+zT=3tAw3Vb-ATJP13eJigT7z2=w@mail.gmail.com>
Message-ID: <CABDUZc8dxFyYRXqow=wkRRDn3a4FVO9Jd486Y8twHihSobhTUw@mail.gmail.com>

Further investigation leads me to think this is just not supported as
of yet.  I'll have to see how the API handles this for market data,
and add it into IBrokers.

At present, the contract is simply getting sent as a BAG, with no
further effort to pass along the comboLegs themselves.  I don't know
technically where it is failing yet, but at this point I can see it
simply can't succeed as is.  I will fix.

Thanks,
Jeff

On Thu, Jul 19, 2012 at 12:57 PM, Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
> Version mismatches from IB/etc may be the cause here, though I am out
> of the office this week so am not able to try to debug.
>
> Make sure you are running the latest of all (including the googlecode
> version of IBrokers - which you must build from source at this point).
>  If not, it will be a little difficult to narrow down where the
> problem is.
>
> Thanks,
> Jeff
>
> On Thu, Jul 19, 2012 at 12:21 PM, Stergios Marinopoulos
> <stergios_marinopoulos at yahoo.com> wrote:
>> I think see the problem.  Looking at the TWS error log, I can see that IBrokers reqMkData() is requesting the following generic tick types by default: "100,101,104,106,165,221,225,236", (and this is documented in IBroker's reqMktData() DOH!!!) where
>>
>> 100: Option Volume
>> 101: Option Open Interest 104: Historical Volatility 106: Option Implied Volatility 165: Miscellaneous Stats 221: Mark Price225: Auction values236: Shortable
>>
>> Those tick types do not make sense for this BAG contract.  The only thing that makes sense for this BAG contract is the spreads between bid, ask, or last.   So when you call reqMktData() set tickGenerics="".  But when I try it, however, nothing seems to be happen.
>>
>> I believe the eventWrapper argument or the CALLBACK argument to reqMktData() needs to be used in order to receive the (Java equivalent) tickPrice() events.  Maybe someone with experience with those arguments can chime in.
>>
>> --
>> Stergios Marinopoulos
>>
>>
>>
>>
>> ----- Original Message -----
>> From: Stergios Marinopoulos <stergios_marinopoulos at yahoo.com>
>> To: G See <gsee000 at gmail.com>
>> Cc: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
>> Sent: Thursday, July 19, 2012 11:28 AM
>> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
>>
>> I took Garrett's example and tried to get it working using IBrokers.  It's starts writing data to a file as expected, but then the error below is produced and quote data is no longer written to the file.
>>
>> 2 1 320 Error reading request:-'wc' : cause - Unable format field -
>>
>>
>>
>>
>> Here's the code:
>>
>> library(IBrokers) ;
>> tws <- twsConnect(1)
>> bag <- twsBAG(
>>     twsComboLeg(
>>         conId = "756733", #conId("SPY"),
>>         ratio = "1",
>>         action = "BUY",
>>         exchange = "SMART"
>>     )  ,
>>     twsComboLeg(
>>         conId = "73128548", #conId("DIA"),
>>         ratio = "1.06",
>>         action = "SELL",
>>         exchange = "SMART"
>>     )
>> )
>> bag.csv <- file("~/bag.csv", open="w")
>> reqMktData(tws, bag,
>>            eventWrapper=eWrapper.MktData.CSV(1),
>>            file=bag.csv)
>>
>>
>> --
>> Stergios Marinopoulos
>>
>>
>> ----- Original Message -----
>> From: G See <gsee000 at gmail.com>
>> To: Stergios Marinopoulos <stergios_marinopoulos at yahoo.com>
>> Cc: omerle <omerle at laposte.net>; "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
>> Sent: Thursday, July 19, 2012 11:11 AM
>> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
>>
>> On Thu, Jul 19, 2012 at 10:09 AM, Stergios Marinopoulos
>> <stergios_marinopoulos at yahoo.com> wrote:
>>> In Java, if you create a proper BAG Contract you can use it with reqMktData() or
>>> reqHistoricalData().  I imagine the same holds true in R as well.  (I can send Java examples if interested.)
>>>
>>> Try using IBrokers twsBAG() function to create a combo contract, and use the returned object as the contract to IBrokers's equivalent of reqMktData() and data should start streaming.
>>>
>>
>> I'm unable to get that to work.  If anyone else can get it to work,
>> please share your secret.
>>
>> Thanks,
>> Garrett
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
>
>
> --
> Jeffrey Ryan
> jeffrey.ryan at lemnica.com
>
> www.lemnica.com
> www.esotericR.com



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From jeffrey.ryan at lemnica.com  Thu Jul 19 21:10:46 2012
From: jeffrey.ryan at lemnica.com (Jeffrey Ryan)
Date: Thu, 19 Jul 2012 14:10:46 -0500
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
In-Reply-To: <CABDUZc8dxFyYRXqow=wkRRDn3a4FVO9Jd486Y8twHihSobhTUw@mail.gmail.com>
References: <CACrVvLMs5=AMgW6rvPYL0qf_zX-QdP=aPyuf+YNFoCuoNY7Bgg@mail.gmail.com>
	<30246548.929111.1342703927006.JavaMail.www@wwinf8225>
	<CA+xi=qZ+Laum=gNNg6A-ec3Si3RRuA0H4B24U=GO+BTcf+26ig@mail.gmail.com>
	<1342710551.76206.YahooMailNeo@web162904.mail.bf1.yahoo.com>
	<CA+xi=qYxCuxe-QBZft2JbWd_fDdUauaX_fuMsCgkZGhFXDQFaw@mail.gmail.com>
	<1342711697.11631.YahooMailNeo@web162901.mail.bf1.yahoo.com>
	<1342718510.75497.YahooMailNeo@web162902.mail.bf1.yahoo.com>
	<CABDUZc-uO6O+p44LTJbij7+zT=3tAw3Vb-ATJP13eJigT7z2=w@mail.gmail.com>
	<CABDUZc8dxFyYRXqow=wkRRDn3a4FVO9Jd486Y8twHihSobhTUw@mail.gmail.com>
Message-ID: <CABDUZc8Sjn-Z6zF4Qos=N+VRMnhLF9pZre1MRRKZf8XudXOsVQ@mail.gmail.com>

I've added in support for sending a BAG contract, though I haven't
figured out the proper params to verify all the messages are being
sent correctly; i.e. still failing, just now for less obvious causes
;-)

At rev 156 on googlecode

HTH
Jeff

On Thu, Jul 19, 2012 at 1:41 PM, Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
> Further investigation leads me to think this is just not supported as
> of yet.  I'll have to see how the API handles this for market data,
> and add it into IBrokers.
>
> At present, the contract is simply getting sent as a BAG, with no
> further effort to pass along the comboLegs themselves.  I don't know
> technically where it is failing yet, but at this point I can see it
> simply can't succeed as is.  I will fix.
>
> Thanks,
> Jeff
>
> On Thu, Jul 19, 2012 at 12:57 PM, Jeffrey Ryan <jeffrey.ryan at lemnica.com> wrote:
>> Version mismatches from IB/etc may be the cause here, though I am out
>> of the office this week so am not able to try to debug.
>>
>> Make sure you are running the latest of all (including the googlecode
>> version of IBrokers - which you must build from source at this point).
>>  If not, it will be a little difficult to narrow down where the
>> problem is.
>>
>> Thanks,
>> Jeff
>>
>> On Thu, Jul 19, 2012 at 12:21 PM, Stergios Marinopoulos
>> <stergios_marinopoulos at yahoo.com> wrote:
>>> I think see the problem.  Looking at the TWS error log, I can see that IBrokers reqMkData() is requesting the following generic tick types by default: "100,101,104,106,165,221,225,236", (and this is documented in IBroker's reqMktData() DOH!!!) where
>>>
>>> 100: Option Volume
>>> 101: Option Open Interest 104: Historical Volatility 106: Option Implied Volatility 165: Miscellaneous Stats 221: Mark Price225: Auction values236: Shortable
>>>
>>> Those tick types do not make sense for this BAG contract.  The only thing that makes sense for this BAG contract is the spreads between bid, ask, or last.   So when you call reqMktData() set tickGenerics="".  But when I try it, however, nothing seems to be happen.
>>>
>>> I believe the eventWrapper argument or the CALLBACK argument to reqMktData() needs to be used in order to receive the (Java equivalent) tickPrice() events.  Maybe someone with experience with those arguments can chime in.
>>>
>>> --
>>> Stergios Marinopoulos
>>>
>>>
>>>
>>>
>>> ----- Original Message -----
>>> From: Stergios Marinopoulos <stergios_marinopoulos at yahoo.com>
>>> To: G See <gsee000 at gmail.com>
>>> Cc: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
>>> Sent: Thursday, July 19, 2012 11:28 AM
>>> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
>>>
>>> I took Garrett's example and tried to get it working using IBrokers.  It's starts writing data to a file as expected, but then the error below is produced and quote data is no longer written to the file.
>>>
>>> 2 1 320 Error reading request:-'wc' : cause - Unable format field -
>>>
>>>
>>>
>>>
>>> Here's the code:
>>>
>>> library(IBrokers) ;
>>> tws <- twsConnect(1)
>>> bag <- twsBAG(
>>>     twsComboLeg(
>>>         conId = "756733", #conId("SPY"),
>>>         ratio = "1",
>>>         action = "BUY",
>>>         exchange = "SMART"
>>>     )  ,
>>>     twsComboLeg(
>>>         conId = "73128548", #conId("DIA"),
>>>         ratio = "1.06",
>>>         action = "SELL",
>>>         exchange = "SMART"
>>>     )
>>> )
>>> bag.csv <- file("~/bag.csv", open="w")
>>> reqMktData(tws, bag,
>>>            eventWrapper=eWrapper.MktData.CSV(1),
>>>            file=bag.csv)
>>>
>>>
>>> --
>>> Stergios Marinopoulos
>>>
>>>
>>> ----- Original Message -----
>>> From: G See <gsee000 at gmail.com>
>>> To: Stergios Marinopoulos <stergios_marinopoulos at yahoo.com>
>>> Cc: omerle <omerle at laposte.net>; "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
>>> Sent: Thursday, July 19, 2012 11:11 AM
>>> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
>>>
>>> On Thu, Jul 19, 2012 at 10:09 AM, Stergios Marinopoulos
>>> <stergios_marinopoulos at yahoo.com> wrote:
>>>> In Java, if you create a proper BAG Contract you can use it with reqMktData() or
>>>> reqHistoricalData().  I imagine the same holds true in R as well.  (I can send Java examples if interested.)
>>>>
>>>> Try using IBrokers twsBAG() function to create a combo contract, and use the returned object as the contract to IBrokers's equivalent of reqMktData() and data should start streaming.
>>>>
>>>
>>> I'm unable to get that to work.  If anyone else can get it to work,
>>> please share your secret.
>>>
>>> Thanks,
>>> Garrett
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>
>>
>>
>> --
>> Jeffrey Ryan
>> jeffrey.ryan at lemnica.com
>>
>> www.lemnica.com
>> www.esotericR.com
>
>
>
> --
> Jeffrey Ryan
> jeffrey.ryan at lemnica.com
>
> www.lemnica.com
> www.esotericR.com



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com
www.esotericR.com


From samo.pahor at gmail.com  Thu Jul 19 21:48:50 2012
From: samo.pahor at gmail.com (Samo Pahor)
Date: Thu, 19 Jul 2012 15:48:50 -0400
Subject: [R-SIG-Finance] quantstrat order execution
Message-ID: <CAFNBy2mYgXvB4VgAPhfe5jg+zwJWnTdsbOOfrOLQ3Xgh1H9+vg@mail.gmail.com>

Hi,

I am trying to "persuade" quantstrat, working with daily data, to execute
orders at the close on the day that signal is telling "short" and
exit(cover short) a day after "move to cash" signal is generated.
Unfortunately, quantstrat does is not easily presuaded to do this...

I have searched all possible lists and e-mails but it seems to me that
either quantstrat was not designed for delaying order execution on daily
data with prefer option column or there is a bug in quantstrat or my
understanding is limited(again)... I tried to play with all possible
combinations of delay (-1, 0, 1) and prefer (Open, PreviousOpen) arguments
but without success (following discussion here
https://stat.ethz.ch/pipermail/r-sig-finance/2011q3/008356.html and here
https://stat.ethz.ch/pipermail/r-sig-finance/2012q2/010224.html)... Am I
missing something here or I do not understand something about quantstrat?

I have prepared a reproducible example (based on Jan Humme excellent
demos). It also contains expected result and actual result from quantstrat.
Please see attached R script file. Looking at OrderBook, txns and maktdata
it just does not make sense to me...

> print(getOrderBook(p))
$qs.test
$qs.test$VXX
           Order.Qty Order.Price Order.Type Order.Side Order.Threshold
Order.Status Order.StatusTime      Prefer  Order.Set Txn.Fees
Rule
2009-01-30 "0"       NA          "init"     "long"     "0"
"closed"     "2009-01-30"          ""      ""        "0"
""
2009-02-10 "-1"      "418.4"     "market"   "short"    NA
"closed"     "2009-02-11 00:00:00" "Close" NA        "-1.9"
"EnterSHORT"
2009-02-12 "all"     "421"       "market"   "short"    NA
"closed"     "2009-02-12 00:00:00" "NextO" NA        "-1.9"
"ExitShort2CASH"


attr(,"class")
[1] "order_book"
>
> txns <- getTxns(p, "VXX")
> txns
           Txn.Qty Txn.Price Txn.Fees Txn.Value Txn.Avg.Cost
Net.Txn.Realized.PL
2009-01-30       0      0.00      0.0      0.00         0.00
0.00
2009-02-11      -1    412.28     -1.9   -412.28       412.28
-1.90
2009-02-12       1    411.04     -1.9    411.04       411.04
-0.66
>
> mktdata["2009-02-10/2009-02-12"]
           VXX.Open VXX.High VXX.Low VXX.Close VXX.Volume VXX.Adjusted
PreviousC  NextO signal cash long short
2009-02-10    404.0   422.64  395.12    418.40      64200       418.40
397.32 416.20     -1    0    0     1
2009-02-11    416.2   419.32  408.40    412.28      21500       412.28
418.40 421.00      0    1    0     0
2009-02-12    421.0   432.00  411.04    411.04      25500       411.04
412.28 412.96      0    0    0     0


I would appreciate any hints on how to accomplish what I want.

Best,
Samo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120719/9ff766a5/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: quantstrat_test.R
Type: application/octet-stream
Size: 6338 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120719/9ff766a5/attachment.obj>

From unsown at gmail.com  Fri Jul 20 05:53:25 2012
From: unsown at gmail.com (unsown)
Date: Thu, 19 Jul 2012 20:53:25 -0700 (PDT)
Subject: [R-SIG-Finance] qsiblive,
	how to debug code with source() as sub procedure
In-Reply-To: <1342432034776-4636623.post@n4.nabble.com>
References: <1342277979105-4636519.post@n4.nabble.com>
	<CA+xi=qZsKHaW6A+zXEMMhojYkboT-ZtV6t-AAk9XK6z7kjLfMg@mail.gmail.com>
	<1342313631714-4636533.post@n4.nabble.com>
	<1342432034776-4636623.post@n4.nabble.com>
Message-ID: <1342756405569-4637147.post@n4.nabble.com>

Thanks for your suggestion, Soren.  After getting familiar with the debugging
tools of R and the codes by you, I'm now able to looking into the codes line
by line. The command traceback() and browser() work best for me. 

BTW. I might have identified a problem with IBrokers during the debugging.
Here is the version I'm using: 
IBrokers version 0.9-3:
Implementing API Version 9.64

After building a connection. the "nextId" filed of the returned connection
is actually the account name instead of an integer number, which cause a
problem when place an order. 

The latest IB API is version 9.66. I thought it might because of my IBrokers
is out of date and I found there is another version of IBrokers on Google
Code. But it looks like that version is even older (0.9-0). 


--
View this message in context: http://r.789695.n4.nabble.com/qsiblive-how-to-debug-code-with-source-as-sub-procedure-tp4636519p4637147.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From gsee000 at gmail.com  Fri Jul 20 06:13:58 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 19 Jul 2012 23:13:58 -0500
Subject: [R-SIG-Finance] qsiblive,
	how to debug code with source() as sub procedure
In-Reply-To: <1342756405569-4637147.post@n4.nabble.com>
References: <1342277979105-4636519.post@n4.nabble.com>
	<CA+xi=qZsKHaW6A+zXEMMhojYkboT-ZtV6t-AAk9XK6z7kjLfMg@mail.gmail.com>
	<1342313631714-4636533.post@n4.nabble.com>
	<1342432034776-4636623.post@n4.nabble.com>
	<1342756405569-4637147.post@n4.nabble.com>
Message-ID: <CA+xi=qbdeF4MO6dQ7=Q9W_52ZWLwPY-cG8HRgJzvKSuQgqx6UA@mail.gmail.com>

Please see this thread:
https://stat.ethz.ch/pipermail/r-sig-finance/2012q2/010264.html

If you're still unable to checkout, build and install the latest code,
then see this SO post: http://stackoverflow.com/a/11105132

Don't give up until you see
packageVersion("IBrokers")
[1] ?0.9.7?

Garrett

On Thu, Jul 19, 2012 at 10:53 PM, unsown <unsown at gmail.com> wrote:
> Thanks for your suggestion, Soren.  After getting familiar with the debugging
> tools of R and the codes by you, I'm now able to looking into the codes line
> by line. The command traceback() and browser() work best for me.
>
> BTW. I might have identified a problem with IBrokers during the debugging.
> Here is the version I'm using:
> IBrokers version 0.9-3:
> Implementing API Version 9.64
>
> After building a connection. the "nextId" filed of the returned connection
> is actually the account name instead of an integer number, which cause a
> problem when place an order.
>
> The latest IB API is version 9.66. I thought it might because of my IBrokers
> is out of date and I found there is another version of IBrokers on Google
> Code. But it looks like that version is even older (0.9-0).
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/qsiblive-how-to-debug-code-with-source-as-sub-procedure-tp4636519p4637147.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From unsown at gmail.com  Fri Jul 20 06:18:04 2012
From: unsown at gmail.com (Laser Yuan)
Date: Fri, 20 Jul 2012 12:18:04 +0800
Subject: [R-SIG-Finance] qsiblive,
	how to debug code with source() as sub procedure
In-Reply-To: <CA+xi=qbdeF4MO6dQ7=Q9W_52ZWLwPY-cG8HRgJzvKSuQgqx6UA@mail.gmail.com>
References: <1342277979105-4636519.post@n4.nabble.com>
	<CA+xi=qZsKHaW6A+zXEMMhojYkboT-ZtV6t-AAk9XK6z7kjLfMg@mail.gmail.com>
	<1342313631714-4636533.post@n4.nabble.com>
	<1342432034776-4636623.post@n4.nabble.com>
	<1342756405569-4637147.post@n4.nabble.com>
	<CA+xi=qbdeF4MO6dQ7=Q9W_52ZWLwPY-cG8HRgJzvKSuQgqx6UA@mail.gmail.com>
Message-ID: <CAPs9Ddc=MLTXHGWab7m3vzYZYrCRQ=Xdpo=kPGm1J7C7MJhDbg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120720/3b8e54f3/attachment.pl>

From jan at opentrades.nl  Fri Jul 20 15:14:36 2012
From: jan at opentrades.nl (OpenTrades)
Date: Fri, 20 Jul 2012 15:14:36 +0200
Subject: [R-SIG-Finance] quantstrat order execution
In-Reply-To: <CAFNBy2mYgXvB4VgAPhfe5jg+zwJWnTdsbOOfrOLQ3Xgh1H9+vg@mail.gmail.com>
References: <CAFNBy2mYgXvB4VgAPhfe5jg+zwJWnTdsbOOfrOLQ3Xgh1H9+vg@mail.gmail.com>
Message-ID: <500959BC.6020603@opentrades.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120720/850991c4/attachment.pl>

From francois.cocquemas at gmail.com  Sun Jul 22 23:57:14 2012
From: francois.cocquemas at gmail.com (Francois Cocquemas)
Date: Sun, 22 Jul 2012 23:57:14 +0200
Subject: [R-SIG-Finance] RDatastream released, feedback wanted
Message-ID: <BB661CEC65C044609883EC2559DD9CD5@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120722/5c2aaeb4/attachment.pl>

From samo.pahor at gmail.com  Mon Jul 23 02:12:03 2012
From: samo.pahor at gmail.com (Samo Pahor)
Date: Sun, 22 Jul 2012 20:12:03 -0400
Subject: [R-SIG-Finance] quantstrat order execution
Message-ID: <CAFNBy2k-F+w1kTB6GVmJGhp7O8cwnipHC8Z2+0m17JCaC8tUaw@mail.gmail.com>

Hi Jan,

Thanks for your answer.

I have been searching all over the quantstrat code for the "switch" where I
could change (that daily data would be processed in the same way as
monthly, quarterly and yearly) default behaviour as you described it:
"=> for monthly, quarterly and yearly data, quantstrat will use the current
bar to get the price. => for anything with a higher frequency (eg. weekly,
daily, intraday), quantstrat will use the next bar to get the price."
The more I looked the more it seems to me there is no such "switch" since
it seems to me that the whole logic of quantstrat::applyRules is based on
nextIndex. I could not find a way to change quantstrat::applyRules in such
a way that would solve my "problem". Any hint on what and how to change
highly appreciated.

Next, I still do not get the prefer option. For me it still does not work
as I would like to. I have modified the script I attached with my first
post (please see attachment) in such a way that I have lagged signals so
that I now get transactions occurring on the correct date (on the same bar
as true signal occurs). But, then looking at the transactions, they are
still done at the close (quntstrat ignoring prefer option). I have used
prefer='Open' when using addRule, but it is ignored and transaction happens
on Close price.

> print(getOrderBook(p))
$qs.test
$qs.test$VXX
           Order.Qty Order.Price Order.Type Order.Side Order.Threshold
Order.Status Order.StatusTime      Prefer  Order.Set Txn.Fees
Rule
2011-02-01 "0"       NA          "init"     "long"     "0"
"closed"     "2011-02-01"          ""      ""        "0"
""
2011-02-08 "-1"      "28.42"     "market"   "short"    NA
"closed"     "2011-02-09 00:00:00" "Close" NA        "-1.9"
"EnterSHORT"
2011-02-10 "all"     "29.14"     "market"   "short"    NA
"closed"     "2011-02-11 00:00:00" "Open"  NA        "-1.9"
"ExitShort2CASH"


attr(,"class")
[1] "order_book"
>
> txns <- getTxns(p, "VXX")
> txns
           Txn.Qty Txn.Price Txn.Fees Txn.Value Txn.Avg.Cost
Net.Txn.Realized.PL
2011-02-01       0      0.00      0.0      0.00         0.00
0.00
2011-02-09      -1     28.51     -1.9    -28.51        28.51
-1.90
2011-02-11       1     28.02     -1.9     28.02        28.02
-1.41
>
> mktdata["2011-02-08/2011-02-11"]
           VXX.Open VXX.High VXX.Low VXX.Close VXX.Volume VXX.Adjusted
PreviousC NextO signal.enter signal.exit cash short
2011-02-08    28.62    29.19   28.25     28.42   13997600        28.42
28.77 28.69           -1           0    0     1
2011-02-09    28.69    29.11   28.35     28.51   18603000        28.51
28.42 29.14            0          -1    0     0
2011-02-10    29.14    29.25   28.30     28.51   17734000        28.51
28.51 28.75            0           0    1     0
2011-02-11    28.75    28.80   27.93     28.02   14826100        28.02
28.51 28.00            0           0    0     0

I would appreciate any help to sort this prefer option thing. Thnx.

Best regards,
Samo


__________________________________________________

Hi Samo,

Currently, the following is hard-coded in the quantstrat software:
=> for monthly, quarterly and yearly data, quantstrat will use the
current bar to get the price.
=> for anything with a higher frequency (eg. weekly, daily, intraday),
quantstrat will use the next bar to get the price.

The idea is that you once a bar is complete, there is no more trading
possible within that bar, so you can only trade within the next bar.

I suggest that you use prefer='Open' to use the opening rate of the next
bar instead. Be aware that your results will be unrealistic though,
because in practice you will usually not get the opening price of the
next bar.

Another option is to adjust your strategy a bit, and use higher
frequency data, for example 15min rates, and decide on the on-but-last
bar of the day, then trade on the last one.

HTH,

Jan.



Quantstrat

On 19-07-12 21:48, Samo Pahor wrote:
> Hi,
>
> I am trying to "persuade" quantstrat, working with daily data, to
> execute orders at the close on the day that signal is telling "short"
> and exit(cover short) a day after "move to cash" signal is generated.
> Unfortunately, quantstrat does is not easily presuaded to do this...
>
> I have searched all possible lists and e-mails but it seems to me that
> either quantstrat was not designed for delaying order execution on
> daily data with prefer option column or there is a bug in quantstrat
> or my understanding is limited(again)... I tried to play with all
> possible combinations of delay (-1, 0, 1) and prefer (Open,
> PreviousOpen) arguments but without success (following discussion here
> https://stat.ethz.ch/pipermail/r-sig-finance/2011q3/008356.html and
> here https://stat.ethz.ch/pipermail/r-sig-finance/2012q2/010224.html).
> <https://stat.ethz.ch/pipermail/r-sig-finance/2012q2/010224.html%29.>.. Am
> I missing something here or I do not understand something about
> quantstrat?
>
> I have prepared a reproducible example (based on Jan Humme excellent
> demos). It also contains expected result and actual result from
> quantstrat. Please see attached R script file. Looking at OrderBook,
> txns and maktdata it just does not make sense to me...
>
> > print(getOrderBook(p))
> $qs.test
> $qs.test$VXX
>            Order.Qty Order.Price Order.Type Order.Side Order.Threshold
> Order.Status Order.StatusTime      Prefer Order.Set Txn.Fees Rule
> 2009-01-30 "0"       NA          "init"     "long" "0"
> "closed"     "2009-01-30"          "" ""        "0"      ""
> 2009-02-10 "-1"      "418.4"     "market"   "short" NA
> "closed"     "2009-02-11 00:00:00" "Close" NA        "-1.9"
> "EnterSHORT"
> 2009-02-12 "all"     "421"       "market"   "short" NA
> "closed"     "2009-02-12 00:00:00" "NextO" NA        "-1.9"
> "ExitShort2CASH"
>
>
> attr(,"class")
> [1] "order_book"
> >
> > txns <- getTxns(p, "VXX")
> > txns
>            Txn.Qty Txn.Price Txn.Fees Txn.Value Txn.Avg.Cost
> Net.Txn.Realized.PL <http://Net.Txn.Realized.PL>
> 2009-01-30       0      0.00      0.0      0.00 0.00                0.00
> 2009-02-11      -1    412.28     -1.9   -412.28 412.28               -1.90
> 2009-02-12       1    411.04     -1.9    411.04 411.04               -0.66
> >
> > mktdata["2009-02-10/2009-02-12"]
>            VXX.Open VXX.High VXX.Low VXX.Close VXX.Volume VXX.Adjusted
> PreviousC  NextO signal cash long short
> 2009-02-10    404.0   422.64  395.12    418.40      64200 418.40
> 397.32 416.20     -1    0    0     1
> 2009-02-11    416.2   419.32  408.40    412.28      21500 412.28
> 418.40 421.00      0    1    0     0
> 2009-02-12    421.0   432.00  411.04    411.04      25500 411.04
> 412.28 412.96      0    0    0     0
>
>
> I would appreciate any hints on how to accomplish what I want.
>
> Best,
> Samo
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


-- 
Jan Humme - OpenTrades

WWW:     http://www.opentrades.nl
Email:   jan at opentrades.nl
Twitter: @opentrades


	[[alternative HTML version deleted]]
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120722/f436f019/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: quantstrat_test.R
Type: application/octet-stream
Size: 6992 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120722/f436f019/attachment.obj>

From jan at opentrades.nl  Mon Jul 23 02:23:17 2012
From: jan at opentrades.nl (OpenTrades)
Date: Mon, 23 Jul 2012 02:23:17 +0200
Subject: [R-SIG-Finance] quantstrat order execution
In-Reply-To: <CAFNBy2k-F+w1kTB6GVmJGhp7O8cwnipHC8Z2+0m17JCaC8tUaw@mail.gmail.com>
References: <CAFNBy2k-F+w1kTB6GVmJGhp7O8cwnipHC8Z2+0m17JCaC8tUaw@mail.gmail.com>
Message-ID: <500C9975.4020600@opentrades.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120723/ed30e6d4/attachment.pl>

From unsown at gmail.com  Mon Jul 23 16:17:32 2012
From: unsown at gmail.com (unsown)
Date: Mon, 23 Jul 2012 07:17:32 -0700 (PDT)
Subject: [R-SIG-Finance] blotter updatePortf issues
In-Reply-To: <CA+xi=qZjmFofp5qK69Xtpa8Zr+BCrLrah1+K5at3FPDBH2CWyA@mail.gmail.com>
References: <3D188481-180E-4ACA-AD77-EA8D5A7376C7@gmail.com>
	<4FFBF1F9.8010302@opentrades.nl>
	<CA+xi=qbG9AC95WqC70LqNxqxD5uQ7DGdc6r1Z-Ew19vgh_v32Q@mail.gmail.com>
	<CA+xi=qZjmFofp5qK69Xtpa8Zr+BCrLrah1+K5at3FPDBH2CWyA@mail.gmail.com>
Message-ID: <1343053052215-4637443.post@n4.nabble.com>

Hi,

I seem to have exactly the same problem as Hideyoshi described. Here is the
code that produce the problem. 
http://r.789695.n4.nabble.com/file/n4637443/quantstrat_test.R
quantstrat_test.R 

The sessionInfo is:
R version 2.15.1 (2012-06-22)
Platform: i386-pc-mingw32/i386 (32-bit)

locale:
[1] LC_COLLATE=Chinese (Simplified)_People's Republic of China.936 
[2] LC_CTYPE=Chinese (Simplified)_People's Republic of China.936   
[3] LC_MONETARY=Chinese (Simplified)_People's Republic of China.936
[4] LC_NUMERIC=C                                                   
[5] LC_TIME=Chinese (Simplified)_People's Republic of China.936    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] quantstrat_0.6.8           blotter_0.8.10            
[3] FinancialInstrument_0.15.1 quantmod_0.3-17           
[5] Defaults_1.1-1             TTR_0.21-1                
[7] xts_0.8-6                  zoo_1.7-7                 

loaded via a namespace (and not attached):
[1] grid_2.15.1    lattice_0.20-6 tools_2.15.1



--
View this message in context: http://r.789695.n4.nabble.com/blotter-updatePortf-issues-tp4635933p4637443.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jdargent at dci.com  Wed Jul 25 05:52:09 2012
From: jdargent at dci.com (Julien Dargent)
Date: Wed, 25 Jul 2012 03:52:09 +0000
Subject: [R-SIG-Finance] PerformanceAnalytics issue
Message-ID: <6E8F9E3388308F4999894419540A35324237B901@DCIEXCBE01.dcinv.com>

Dear all:

I am facing a disconcerting issue with the functions CalculateReturns() and chart.CumReturns() of the PerformanceAnalytics package.

First, when I try to use CalculateReturns() to back out the returns from the total return indices values, the resulting returns do not add up:

Indices.ts <- as.timeSeries(CalculateReturns(indices, method = "compound"))
#Note that the method = "simple" option only returns zeros for me.

Running the code above on the data in the "indices" CSV file attached, I obtain suspicious returns (for instance the total return for S&P 500 is 17% while it is actually close to 40%).

Second, when I do the reverse and use chart.CumReturns() with the correct returns calculated manually in the "returns" CSV file attached, I also obtain wrong cumulative returns.

Returns.ts <-      chart.CumReturns(returns[,c(1:5), drop = FALSE],
                                                main="Cumulative Returns",
                                                begin="axis",
                                                 legend.loc = "topleft",
                                                 geometric = TRUE,
                                                 wealth.index = TRUE,
                                                colorset = rainbow6equal)

Running this code plots for instance the Barclays US Agg Corporate in my sample above the Barclays Global Agg whereas the later outperformed it.

[cid:image001.png at 01CD69DE.3138E1C0]

I spent a fair amount of time trying to resolve this by myself but it appears that something is amiss.

Thanks in advance for your much appreciated help!

Julien



This e-mail and its attachments are intended only for the individual or entity to whom it is addressed and may contain information that is confidential, privileged, inside information, or subject to other restrictions on use or disclosure. If you have received this transmission in error, please notify the sender immediately by return e-mail, and permanently delete or destroy this e-mail, any attachments, and all copies. Any unauthorized use, dissemination or copying of this transmission or the information may be unlawful. This message is provided for informational purposes and should not be construed as an invitation or offer to buy or sell any securities or related financial instruments.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120725/c06eb416/attachment.html>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 21224 bytes
Desc: image001.png
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120725/c06eb416/attachment.png>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: Indices.csv
Type: application/octet-stream
Size: 84398 bytes
Desc: Indices.csv
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120725/c06eb416/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: returns.csv
Type: application/octet-stream
Size: 47109 bytes
Desc: returns.csv
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120725/c06eb416/attachment-0001.obj>

From j_cuisinier at hotmail.com  Wed Jul 25 11:16:46 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Wed, 25 Jul 2012 11:16:46 +0200
Subject: [R-SIG-Finance] PerformanceAnalytics issue
In-Reply-To: <6E8F9E3388308F4999894419540A35324237B901@DCIEXCBE01.dcinv.com>
References: <6E8F9E3388308F4999894419540A35324237B901@DCIEXCBE01.dcinv.com>
Message-ID: <COL102-W9DFA106A24F9FE857E0CD8FC30@phx.gbl>


Bonjour Julien,



Just as  FYI, entering the dates in your first column as DD/MM/YYYY is not ideal - best to format them as YYYY-MM-DD as unambigous format R can understand

I can have the method "compound" work as it should personally but still have the simple method giving me zeros - ???

AFTER changing the csv first column dates with format YYYY-MM-DD

> dfPrices <- read.csv("Indices.csv",header=TRUE,row.names=1,as.is=TRUE)
> testSimple <- CalculateReturns(dfPrices,method="simple")
> write.csv(testSimple,"testSimple.csv")
> testCompound <- CalculateReturns(dfPrices,method="compound")
> write.csv(testCompound,"testCompound.csv")

attached the csv I got from that code - weirdly I have simple returns as zeros but compound returns OK? 


I am suspecting the second issue might be related? thhanks to report back to the list if it is the case



Rgds,
Julien



Just to confirm testing the below & I am getting the same... I am guessing we do not use it proprely although it should be simple - focusing ont he CalculateRetuurns() function: 

> dfPrices <- read.csv("Indices.csv",header=TRUE,row.names=1,as.is=TRUE)
test <- CalculateReturns(dfPrices,method="compound")
Warning message:
In data.row.names(row.names, rowsi, i) :
  some row.names duplicated: 3,6,9,11,13,16,20,23,25,27,30,33,37,40,45,49,51,54,56,58,60,62,64,66,68,73,78,84,86,89,91,93,95,98,100,102,104,106,112,115,118,124,126,130,133,136,138,140,143,147,150,152,154,157,160,164,167,172,176,178,181,183,185,187,189,191,193,195,200,205,211,213,216,218,220,222,225,227,229,231,233,239,242,245,251,253,257,260,263,265,267,270,274,277,279,281,284,287,291,294,299,303,305,308,310,312,314,316,318,320,322,327,332,338,340,343,345,347,349,352,354,356,358,360,366,369,372,378,380,384,387,390,392,394,397,401,404,406,408,411,414,418,421,426,430,432,435,437,439,441,443,445,447,449,454,459,465,467,470,472,474,476,479,481,483,486,492,495,498,504,506,512,515,517,519,522,526,528,530,532,535,538,542,549,551 --> row.names NOT used


Not sure what the warning is about as I do not have duplicated 

From: jdargent at dci.com
To: r-sig-finance at r-project.org
Date: Wed, 25 Jul 2012 03:52:09 +0000
Subject: [R-SIG-Finance] PerformanceAnalytics issue








Dear all:
 
I am facing a disconcerting issue with the functions CalculateReturns() and chart.CumReturns() of the PerformanceAnalytics package.
 
First, when I try to use CalculateReturns() to back out the returns from the total return indices values, the resulting returns do not add up:
 
Indices.ts <- as.timeSeries(CalculateReturns(indices, method = "compound"))
#Note that the method = ?simple? option only returns zeros for me.
 
Running the code above on the data in the ?indices? CSV file attached, I obtain suspicious returns (for instance the total return for S&P 500 is 17% while it is actually close to 40%).
 
Second, when I do the reverse and use chart.CumReturns() with the correct returns calculated manually in the ?returns? CSV file attached, I also obtain wrong cumulative returns.

 
Returns.ts <-      chart.CumReturns(returns[,c(1:5), drop = FALSE],

                                                main="Cumulative Returns",

                                                begin="axis",
                                                 legend.loc = "topleft",

                                                 geometric = TRUE,
                                                 wealth.index = TRUE,
                                                colorset = rainbow6equal)
 
Running this code plots for instance the Barclays US Agg Corporate in my sample above the Barclays Global Agg whereas the later outperformed it.

 

 
I spent a fair amount of time trying to resolve this by myself but it appears that something is amiss.
 
Thanks in advance for your much appreciated help!
 
Julien
 





This e-mail and its attachments are intended only for the individual or entity to whom it is addressed and may contain information that is confidential, privileged, inside information, or subject to other restrictions on use or disclosure. If you have received
 this transmission in error, please notify the sender immediately by return e-mail, and permanently delete or destroy this e-mail, any attachments, and all copies. Any unauthorized use, dissemination or copying of this transmission or the information may be
 unlawful. This message is provided for informational purposes and should not be construed as an invitation or offer to buy or sell any securities or related financial instruments.



_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go. 		 	   		  
-------------- next part --------------
Content-Transfer-Encoding: quoted-printable

<html>
<head>
<style><!--
.hmmessage P
{
margin:0px=3B
padding:0px
}
body.hmmessage
{
font-size: 10pt=3B
font-family:Tahoma
}
--></style></head>
<body class=3D'hmmessage'><div dir=3D'ltr'>
Bonjour Julien=2C<br><br><br><br>Just as&nbsp=3B FYI=2C entering the dates =
in your first column as DD/MM/YYYY is not ideal - best to format them as YY=
YY-MM-DD as unambigous format R can understand<br><br>I can have the method=
 "compound" work as it should personally but still have the simple method g=
iving me zeros - ???<br><br>AFTER changing the csv first column dates with =
format YYYY-MM-DD<br><br>&gt=3B dfPrices &lt=3B- read.csv("Indices.csv"=2Ch=
eader=3DTRUE=2Crow.names=3D1=2Cas.is=3DTRUE)<br>&gt=3B testSimple &lt=3B- C=
alculateReturns(dfPrices=2Cmethod=3D"simple")<br>&gt=3B write.csv(testSimpl=
e=2C"testSimple.csv")<br>&gt=3B testCompound &lt=3B- CalculateReturns(dfPri=
ces=2Cmethod=3D"compound")<br>&gt=3B write.csv(testCompound=2C"testCompound=
.csv")<br><br>attached the csv I got from that code - weirdly I have simple=
 returns as zeros but compound returns OK? <br><br><br>I am suspecting the =
second issue might be related? thhanks to report back to the list if it is =
the case<br><br><br><br>Rgds=2C<br>Julien<br><br><br><br>Just to confirm te=
sting the below &amp=3B I am getting the same... I am guessing we do not us=
e it proprely although it should be simple - focusing ont he CalculateRetuu=
rns() function: <br><br>&gt=3B dfPrices &lt=3B- read.csv("Indices.csv"=2Che=
ader=3DTRUE=2Crow.names=3D1=2Cas.is=3DTRUE)<br>test &lt=3B- CalculateReturn=
s(dfPrices=2Cmethod=3D"compound")<br>Warning message:<br>In data.row.names(=
row.names=2C rowsi=2C i) :<br>&nbsp=3B some row.names duplicated: 3=2C6=2C9=
=2C11=2C13=2C16=2C20=2C23=2C25=2C27=2C30=2C33=2C37=2C40=2C45=2C49=2C51=2C54=
=2C56=2C58=2C60=2C62=2C64=2C66=2C68=2C73=2C78=2C84=2C86=2C89=2C91=2C93=2C95=
=2C98=2C100=2C102=2C104=2C106=2C112=2C115=2C118=2C124=2C126=2C130=2C133=2C1=
36=2C138=2C140=2C143=2C147=2C150=2C152=2C154=2C157=2C160=2C164=2C167=2C172=
=2C176=2C178=2C181=2C183=2C185=2C187=2C189=2C191=2C193=2C195=2C200=2C205=2C=
211=2C213=2C216=2C218=2C220=2C222=2C225=2C227=2C229=2C231=2C233=2C239=2C242=
=2C245=2C251=2C253=2C257=2C260=2C263=2C265=2C267=2C270=2C274=2C277=2C279=2C=
281=2C284=2C287=2C291=2C294=2C299=2C303=2C305=2C308=2C310=2C312=2C314=2C316=
=2C318=2C320=2C322=2C327=2C332=2C338=2C340=2C343=2C345=2C347=2C349=2C352=2C=
354=2C356=2C358=2C360=2C366=2C369=2C372=2C378=2C380=2C384=2C387=2C390=2C392=
=2C394=2C397=2C401=2C404=2C406=2C408=2C411=2C414=2C418=2C421=2C426=2C430=2C=
432=2C435=2C437=2C439=2C441=2C443=2C445=2C447=2C449=2C454=2C459=2C465=2C467=
=2C470=2C472=2C474=2C476=2C479=2C481=2C483=2C486=2C492=2C495=2C498=2C504=2C=
506=2C512=2C515=2C517=2C519=2C522=2C526=2C528=2C530=2C532=2C535=2C538=2C542=
=2C549=2C551 --&gt=3B row.names NOT used<br><br><br>Not sure what the warni=
ng is about as I do not have duplicated <br><br><div><div id=3D"SkyDrivePla=
ceholder"></div><hr id=3D"stopSpelling">From: jdargent at dci.com<br>To: r-sig=
-finance at r-project.org<br>Date: Wed=2C 25 Jul 2012 03:52:09 +0000<br>Subjec=
t: [R-SIG-Finance] PerformanceAnalytics issue<br><br>


<style><!--
.ExternalClass p.ecxMsoNormal=2C .ExternalClass li.ecxMsoNormal=2C .Externa=
lClass div.ecxMsoNormal
{margin-bottom:.0001pt=3Bfont-size:11.0pt=3Bfont-family:"Calibri"=2C"sans-s=
erif"=3B}
.ExternalClass a:link=2C .ExternalClass span.ecxMsoHyperlink
{color:blue=3Btext-decoration:underline=3B}
.ExternalClass a:visited=2C .ExternalClass span.ecxMsoHyperlinkFollowed
{color:purple=3Btext-decoration:underline=3B}
.ExternalClass p.ecxMsoAcetate=2C .ExternalClass li.ecxMsoAcetate=2C .Exter=
nalClass div.ecxMsoAcetate
{margin-bottom:.0001pt=3Bfont-size:8.0pt=3Bfont-family:"Tahoma"=2C"sans-ser=
if"=3B}
.ExternalClass span.ecxEmailStyle17
{font-family:"Calibri"=2C"sans-serif"=3Bcolor:windowtext=3B}
.ExternalClass span.ecxBalloonTextChar
{font-family:"Tahoma"=2C"sans-serif"=3B}
.ExternalClass .ecxMsoChpDefault
{=3B}
@page WordSection1
{=3B}
.ExternalClass div.ecxWordSection1
{=3B}

--></style>


<div class=3D"ecxWordSection1">
<p class=3D"ecxMsoNormal">Dear all:</p>
<p class=3D"ecxMsoNormal">&nbsp=3B</p>
<p class=3D"ecxMsoNormal">I am facing a disconcerting issue with the functi=
ons CalculateReturns() and chart.CumReturns() of the PerformanceAnalytics p=
ackage.</p>
<p class=3D"ecxMsoNormal">&nbsp=3B</p>
<p class=3D"ecxMsoNormal">First=2C when I try to use CalculateReturns() to =
back out the returns from the total return indices values=2C the resulting =
returns do not add up:</p>
<p class=3D"ecxMsoNormal">&nbsp=3B</p>
<p class=3D"ecxMsoNormal" style=3D"text-indent:.5in">Indices.ts &lt=3B- as.=
timeSeries(CalculateReturns(indices=2C method =3D "compound"))</p>
<p class=3D"ecxMsoNormal" style=3D"text-indent:.5in">#Note that the method =
=3D =93simple=94 option only returns zeros for me.</p>
<p class=3D"ecxMsoNormal">&nbsp=3B</p>
<p class=3D"ecxMsoNormal">Running the code above on the data in the =93indi=
ces=94 CSV file attached=2C I obtain suspicious returns (for instance the t=
otal return for S&amp=3BP 500 is 17% while it is actually close to 40%).</p=
>
<p class=3D"ecxMsoNormal">&nbsp=3B</p>
<p class=3D"ecxMsoNormal">Second=2C when I do the reverse and use chart.Cum=
Returns() with the correct returns calculated manually in the =93returns=94=
 CSV file attached=2C I also obtain wrong cumulative returns.
</p>
<p class=3D"ecxMsoNormal">&nbsp=3B</p>
<p class=3D"ecxMsoNormal" style=3D"text-indent:.5in">Returns.ts &lt=3B- &nb=
sp=3B&nbsp=3B&nbsp=3B&nbsp=3B chart.CumReturns(returns[=2Cc(1:5)=2C drop =
=3D FALSE]=2C
</p>
<p class=3D"ecxMsoNormal">&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&=
nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbs=
p=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=
=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B &nbsp=3B&nbsp=3B&nbsp=
=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B=
&nbsp=3B&nbsp=3B&nbsp=3B main=3D"Cumulative Returns"=2C
</p>
<p class=3D"ecxMsoNormal">&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&=
nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbs=
p=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=
=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B &nbsp=3B&nbsp=3B&nbsp=
=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B=
&nbsp=3B&nbsp=3B&nbsp=3B begin=3D"axis"=2C</p>
<p class=3D"ecxMsoNormal">&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&=
nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B &nb=
sp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=
=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B=
&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nb=
sp=3B&nbsp=3B&nbsp=3B &nbsp=3Blegend.loc =3D "topleft"=2C
</p>
<p class=3D"ecxMsoNormal">&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&=
nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbs=
p=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=
=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B=
&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nb=
sp=3B&nbsp=3B&nbsp=3B&nbsp=3B &nbsp=3Bgeometric =3D TRUE=2C</p>
<p class=3D"ecxMsoNormal">&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&=
nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B &nb=
sp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=
=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B=
&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nb=
sp=3B&nbsp=3B&nbsp=3B &nbsp=3Bwealth.index =3D TRUE=2C</p>
<p class=3D"ecxMsoNormal">&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&=
nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbs=
p=3B &nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=
=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B=
&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nbsp=3B&nb=
sp=3B&nbsp=3B&nbsp=3B colorset =3D rainbow6equal)</p>
<p class=3D"ecxMsoNormal">&nbsp=3B</p>
<p class=3D"ecxMsoNormal">Running this code plots for instance the Barclays=
 US Agg Corporate in my sample above the Barclays Global Agg whereas the la=
ter outperformed it.
</p>
<p class=3D"ecxMsoNormal">&nbsp=3B</p>
<p class=3D"ecxMsoNormal"><img id=3D"ecxPicture_x0020_1" src=3D"cid:image00=
1.png at 01CD69DE.3138E1C0" width=3D"550" height=3D"450"></p>
<p class=3D"ecxMsoNormal">&nbsp=3B</p>
<p class=3D"ecxMsoNormal">I spent a fair amount of time trying to resolve t=
his by myself but it appears that something is amiss.</p>
<p class=3D"ecxMsoNormal">&nbsp=3B</p>
<p class=3D"ecxMsoNormal">Thanks in advance for your much appreciated help!=
</p>
<p class=3D"ecxMsoNormal">&nbsp=3B</p>
<p class=3D"ecxMsoNormal">Julien</p>
<p class=3D"ecxMsoNormal">&nbsp=3B</p>
</div>
<br>
<br>
This e-mail and its attachments are intended only for the individual or ent=
ity to whom it is addressed and may contain information that is confidentia=
l=2C privileged=2C inside information=2C or subject to other restrictions o=
n use or disclosure. If you have received
 this transmission in error=2C please notify the sender immediately by retu=
rn e-mail=2C and permanently delete or destroy this e-mail=2C any attachmen=
ts=2C and all copies. Any unauthorized use=2C dissemination or copying of t=
his transmission or the information may be
 unlawful. This message is provided for informational purposes and should n=
ot be construed as an invitation or offer to buy or sell any securities or =
related financial instruments.


<br>_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post=2C subscribe first.
-- Also note that this is not the r-help list where general R questions sho=
uld go.</div> 		 	   		  </div></body>
</html>=
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testSimple.csv
Type: application/octet-stream
Size: 19544 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120725/ee844f53/attachment.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: testCompound.csv
Type: application/octet-stream
Size: 158011 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120725/ee844f53/attachment-0001.obj>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: image001.png
Type: image/png
Size: 21224 bytes
Desc: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120725/ee844f53/attachment.png>

From peter at braverock.com  Wed Jul 25 17:45:30 2012
From: peter at braverock.com (Peter Carl)
Date: Wed, 25 Jul 2012 10:45:30 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics issue
In-Reply-To: <6E8F9E3388308F4999894419540A35324237B901@DCIEXCBE01.dcinv.com>
References: <6E8F9E3388308F4999894419540A35324237B901@DCIEXCBE01.dcinv.com>
Message-ID: <b53fd76e8da3daaf2ed66a2a800ecd75.squirrel@mail.braverock.com>

Look at your returns.csv file - all your monthly returns are rounded to
the nearest 1%, so the graph is not going to be anywhere close to your
expectations.

Your issue with method = "simple" has been reported before to this list
and was corrected in r-forge.  Check that you are using the most
up-to-date CRAN release, and if not then try updating.

pcc
-- 
Peter Carl
http://www.braverock.com/peter

> Dear all:
>
> I am facing a disconcerting issue with the functions CalculateReturns()
> and chart.CumReturns() of the PerformanceAnalytics package.
>
> First, when I try to use CalculateReturns() to back out the returns from
> the total return indices values, the resulting returns do not add up:
>
> Indices.ts <- as.timeSeries(CalculateReturns(indices, method =
> "compound"))
> #Note that the method = "simple" option only returns zeros for me.
>
> Running the code above on the data in the "indices" CSV file attached, I
> obtain suspicious returns (for instance the total return for S&P 500 is
> 17% while it is actually close to 40%).
>
> Second, when I do the reverse and use chart.CumReturns() with the correct
> returns calculated manually in the "returns" CSV file attached, I also
> obtain wrong cumulative returns.
>
> Returns.ts <-      chart.CumReturns(returns[,c(1:5), drop = FALSE],
>                                                 main="Cumulative Returns",
>                                                 begin="axis",
>                                                  legend.loc = "topleft",
>                                                  geometric = TRUE,
>                                                  wealth.index = TRUE,
>                                                 colorset = rainbow6equal)
>
> Running this code plots for instance the Barclays US Agg Corporate in my
> sample above the Barclays Global Agg whereas the later outperformed it.
>
> [cid:image001.png at 01CD69DE.3138E1C0]
>
> I spent a fair amount of time trying to resolve this by myself but it
> appears that something is amiss.
>
> Thanks in advance for your much appreciated help!
>
> Julien
>
>
>
> This e-mail and its attachments are intended only for the individual or
> entity to whom it is addressed and may contain information that is
> confidential, privileged, inside information, or subject to other
> restrictions on use or disclosure. If you have received this transmission
> in error, please notify the sender immediately by return e-mail, and
> permanently delete or destroy this e-mail, any attachments, and all
> copies. Any unauthorized use, dissemination or copying of this
> transmission or the information may be unlawful. This message is provided
> for informational purposes and should not be construed as an invitation or
> offer to buy or sell any securities or related financial instruments.
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From brian at braverock.com  Wed Jul 25 17:56:19 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 25 Jul 2012 10:56:19 -0500
Subject: [R-SIG-Finance] PerformanceAnalytics issue
In-Reply-To: <b53fd76e8da3daaf2ed66a2a800ecd75.squirrel@mail.braverock.com>
References: <6E8F9E3388308F4999894419540A35324237B901@DCIEXCBE01.dcinv.com>
	<b53fd76e8da3daaf2ed66a2a800ecd75.squirrel@mail.braverock.com>
Message-ID: <50101723.2010809@braverock.com>

On 07/25/2012 10:45 AM, Peter Carl wrote:
> Your issue with method = "simple" has been reported before to this list
> and was corrected in r-forge.  Check that you are using the most
> up-to-date CRAN release, and if not then try updating.

THe bug was fixed on 2 Apr, 2012, in svn r1894, which is *after* the 
last CRAN release.  You should use the R-Forge version, currently here:

install.packages("PerformanceAnalytics", repos= 
c("http://R-Forge.R-project.org", getOption("repos")))

(assuming that the R-Forge build process hasn't failed, as it often 
seems to)

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From omerle at laposte.net  Wed Jul 25 18:31:25 2012
From: omerle at laposte.net (omerle)
Date: Wed, 25 Jul 2012 18:31:25 +0200
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
Message-ID: <1462552770.2076168.1343233882158.JavaMail.www@wwinf8218>

Thanks a lof for your kind answers ! I am again amazed by the R community.

I might have under explain my problem.

1 - My original question :

"I need quotes from futures combo but I cant find how to find these quotes. I can place 
combo orders but I can't find how to get the quotes. For instance, I would like to have 
the quotes of the combo between ECO AUG12 (83617918) and ECO NOV12 (87689647). Do you 
have any idea ? Which part of the IB API documentation should I check ? That's quite 
important for me !"

2 - Additional elements :

=> In most futures market, combo orders/quotes are another market not only the 
combinaison of the two markets underlyings.

For instance :
ECO AUG12 (83617918)
Bid - Ask
100 - 102
ECO NOV12 (87689647)
Bid - Ask
104 - 105

The implied combo Bid-Ask market would be :
Bid - Ask
2 - 5

The combo market could be anything inside this implied B/A (because people place order 
inside the combo market). For instance, I could have :
Bid - Ask
2.5 - 3

3 - What I can currently do :

Using twsContract and the parameter comboleg to send a combo order inside the combo 
market.
I think that if IB implemented orders in the combo market the API could also do the work 
to retrieve the data.

4 - What I would like to do :

Get the quotes of the combo market.

5 - What I tried :

I tried to put my twsContract (which was used in placeOrder) in reqMktData but I didn't 
get any data.

PS : To stergios_marinopoulos at yahoo.com

When you said it works in Java you mean for quotes from the combo market ? or just 
implied quotes ?


Thanks,


Olivier
> I've added in support for sending a BAG contract, though I haven't
> figured out the proper params to verify all the messages are being
> sent correctly; i.e. still failing, just now for less obvious causes
> ;-)
>
> At rev 156 on googlecode
>
> HTH
> Jeff
>
> On Thu, Jul 19, 2012 at 1:41 PM, Jeffrey Ryan  wrote:
>> Further investigation leads me to think this is just not supported as
>> of yet. I'll have to see how the API handles this for market data,
>> and add it into IBrokers.
>>
>> At present, the contract is simply getting sent as a BAG, with no
>> further effort to pass along the comboLegs themselves. I don't know
>> technically where it is failing yet, but at this point I can see it
>> simply can't succeed as is. I will fix.
>>
>> Thanks,
>> Jeff
>>
>> On Thu, Jul 19, 2012 at 12:57 PM, Jeffrey Ryan  wrote:
>>> Version mismatches from IB/etc may be the cause here, though I am out
>>> of the office this week so am not able to try to debug.
>>>
>>> Make sure you are running the latest of all (including the googlecode
>>> version of IBrokers - which you must build from source at this point).
>>> If not, it will be a little difficult to narrow down where the
>>> problem is.
>>>
>>> Thanks,
>>> Jeff
>>>
>>> On Thu, Jul 19, 2012 at 12:21 PM, Stergios Marinopoulos
>>>  wrote:
>>>> I think see the problem. Looking at the TWS error log, I can see that IBrokers 
reqMkData() is requesting the following generic tick types by default: 
"100,101,104,106,165,221,225,236", (and this is documented in IBroker's reqMktData() 
DOH!!!) where
>>>>
>>>> 100: Option Volume
>>>> 101: Option Open Interest 104: Historical Volatility 106: Option Implied Volatility 
165: Miscellaneous Stats 221: Mark Price225: Auction values236: Shortable
>>>>
>>>> Those tick types do not make sense for this BAG contract. The only thing that makes 
sense for this BAG contract is the spreads between bid, ask, or last. So when you call 
reqMktData() set tickGenerics="". But when I try it, however, nothing seems to be 
happen.
>>>>
>>>> I believe the eventWrapper argument or the CALLBACK argument to reqMktData() needs 
to be used in order to receive the (Java equivalent) tickPrice() events. Maybe someone 
with experience with those arguments can chime in.
>>>>
>>>> --
>>>> Stergios Marinopoulos
>>>>
>>>>
>>>>
>>>>
>>>> ----- Original Message -----
>>>> From: Stergios Marinopoulos 
>>>> To: G See 
>>>> Cc: "r-sig-finance at r-project.org" 
>>>> Sent: Thursday, July 19, 2012 11:28 AM
>>>> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
>>>>
>>>> I took Garrett's example and tried to get it working using IBrokers. It's starts 
writing data to a file as expected, but then the error below is produced and quote data 
is no longer written to the file.
>>>>
>>>> 2 1 320 Error reading request:-'wc' : cause - Unable format field -
>>>>
>>>>
>>>>
>>>>
>>>> Here's the code:
>>>>
>>>> library(IBrokers) ;
>>>> tws <- twsConnect(1)
>>>> bag <- twsBAG(
>>>> twsComboLeg(
>>>> conId = "756733", #conId("SPY"),
>>>> ratio = "1",
>>>> action = "BUY",
>>>> exchange = "SMART"
>>>> ) ,
>>>> twsComboLeg(
>>>> conId = "73128548", #conId("DIA"),
>>>> ratio = "1.06",
>>>> action = "SELL",
>>>> exchange = "SMART"
>>>> )
>>>> )
>>>> bag.csv <- file("~/bag.csv", open="w")
>>>> reqMktData(tws, bag,
>>>> eventWrapper=eWrapper.MktData.CSV(1),
>>>> file=bag.csv)
>>>>
>>>>
>>>> --
>>>> Stergios Marinopoulos
>>>>
>>>>
>>>> ----- Original Message -----
>>>> From: G See 
>>>> To: Stergios Marinopoulos 
>>>> Cc: omerle ; "r-sig-finance at r-project.org" 
>>>> Sent: Thursday, July 19, 2012 11:11 AM
>>>> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
>>>>
>>>> On Thu, Jul 19, 2012 at 10:09 AM, Stergios Marinopoulos
>>>>  wrote:
>>>>> In Java, if you create a proper BAG Contract you can use it with reqMktData() or
>>>>> reqHistoricalData(). I imagine the same holds true in R as well. (I can send Java 
examples if interested.)
>>>>>
>>>>> Try using IBrokers twsBAG() function to create a combo contract, and use the 
returned object as the contract to IBrokers's equivalent of reqMktData() and data should 
start streaming.
>>>>>
>>>>
>>>> I'm unable to get that to work. If anyone else can get it to work,
>>>> please share your secret.
>>>>
>>>> Thanks,
>>>> Garrett
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>>
>>>
>>> --
>>> Jeffrey Ryan
>>> jeffrey.ryan at lemnica.com
>>>
>>> www.lemnica.com
>>> www.esotericR.com
>>
>>
>>
>> --
>> Jeffrey Ryan
>> jeffrey.ryan at lemnica.com
>>
>> www.lemnica.com
>> www.esotericR.com
>
>
>


Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
Je cr?e ma bo?te mail www.laposte.net


From gps at asu.edu  Wed Jul 25 19:18:53 2012
From: gps at asu.edu (Geoffrey Smith)
Date: Wed, 25 Jul 2012 12:18:53 -0500
Subject: [R-SIG-Finance] ugarchfit-class methods (rugarch)
Message-ID: <CAGRravbg0XDYPDEgBNjGBWQAvnPvaz9M1oYCQThk=Qr538G--Q@mail.gmail.com>

Hello, are there any methods to extract the robust standard errors and
t-values from a ugarchfit-class object created by the rugarch package?
 Thank you.  Geoff


From alexios at 4dscape.com  Wed Jul 25 19:25:35 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Wed, 25 Jul 2012 18:25:35 +0100
Subject: [R-SIG-Finance] ugarchfit-class methods (rugarch)
In-Reply-To: <CAGRravbg0XDYPDEgBNjGBWQAvnPvaz9M1oYCQThk=Qr538G--Q@mail.gmail.com>
References: <CAGRravbg0XDYPDEgBNjGBWQAvnPvaz9M1oYCQThk=Qr538G--Q@mail.gmail.com>
Message-ID: <50102C0F.5010405@4dscape.com>

A couple:

1. vcov(fit, robust=TRUE) [The robust parameter covariance matrix]
2. fit at fit$robust.matcoef (coef|s.e.|t-values|p-values)

Regards,
Alexios

On 25/07/2012 18:18, Geoffrey Smith wrote:
> Hello, are there any methods to extract the robust standard errors and
> t-values from a ugarchfit-class object created by the rugarch package?
>   Thank you.  Geoff
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From wotuzu17 at gmail.com  Thu Jul 26 07:46:33 2012
From: wotuzu17 at gmail.com (Andreas Voellenklee)
Date: Thu, 26 Jul 2012 07:46:33 +0200
Subject: [R-SIG-Finance] PerformanceAnalytics issue
In-Reply-To: <50101723.2010809@braverock.com>
References: <6E8F9E3388308F4999894419540A35324237B901@DCIEXCBE01.dcinv.com>
	<b53fd76e8da3daaf2ed66a2a800ecd75.squirrel@mail.braverock.com>
	<50101723.2010809@braverock.com>
Message-ID: <CAKC0BhndD=oiLeHR2M2JSJH8OPGF1E3-e=QmCfor=eQzwghP7g@mail.gmail.com>

> (assuming that the R-Forge build process hasn't failed, as it often seems to)


There are a couple of warnings and a error during the running of an
example at the windows package. Probably that's the reason why it
failed to build. Details at

https://r-forge.r-project.org/R/?group_id=579&log=check_x86_64_windows&pkg=PerformanceAnalytics&flavor=patched


Regards,
Andreas


From jdargent at dci.com  Thu Jul 26 14:56:59 2012
From: jdargent at dci.com (Julien Dargent)
Date: Thu, 26 Jul 2012 12:56:59 +0000
Subject: [R-SIG-Finance] PerformanceAnalytics issue
In-Reply-To: <50101723.2010809@braverock.com>
References: <6E8F9E3388308F4999894419540A35324237B901@DCIEXCBE01.dcinv.com>
	<b53fd76e8da3daaf2ed66a2a800ecd75.squirrel@mail.braverock.com>
	<50101723.2010809@braverock.com>
Message-ID: <6E8F9E3388308F4999894419540A35324237FBFF@DCIEXCBE01.dcinv.com>

Brian, Peter & Others,

Thank you very much for your help. The rounding was definitely part of the problem with chart.CumReturns and I had also wrongly assumed CumReturns would work with compound/log return whereas it takes in actual/simple returns.

Thanks again for the great package.

Julien

-----Original Message-----
From: r-sig-finance-bounces at r-project.org [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Brian G. Peterson
Sent: Wednesday, July 25, 2012 8:56 AM
To: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] PerformanceAnalytics issue

On 07/25/2012 10:45 AM, Peter Carl wrote:
> Your issue with method = "simple" has been reported before to this list
> and was corrected in r-forge.  Check that you are using the most
> up-to-date CRAN release, and if not then try updating.

THe bug was fixed on 2 Apr, 2012, in svn r1894, which is *after* the
last CRAN release.  You should use the R-Forge version, currently here:

install.packages("PerformanceAnalytics", repos=
c("http://R-Forge.R-project.org", getOption("repos")))

(assuming that the R-Forge build process hasn't failed, as it often
seems to)

Regards,

    - Brian

--
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go.


This e-mail and its attachments are intended only for the individual or entity to whom it is addressed and may contain information that is confidential, privileged, inside information, or subject to other restrictions on use or disclosure. If you have received this transmission in error, please notify the sender immediately by return e-mail, and permanently delete or destroy this e-mail, any attachments, and all copies. Any unauthorized use, dissemination or copying of this transmission or the information may be unlawful. This message is provided for informational purposes and should not be construed as an invitation or offer to buy or sell any securities or related financial instruments.


From lloyd.b.spencer at gmail.com  Thu Jul 26 16:13:26 2012
From: lloyd.b.spencer at gmail.com (Lloyd Spencer)
Date: Thu, 26 Jul 2012 10:13:26 -0400
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
	(omerle)
In-Reply-To: <mailman.3.1343296802.25061.r-sig-finance@r-project.org>
References: <mailman.3.1343296802.25061.r-sig-finance@r-project.org>
Message-ID: <50115091.c6c7e00a.5a6a.753b@mx.google.com>

Hi,

First time posting a reply so apologies in advance if this is the wrong way
to do it / format etc.  Regarding futures combos, I trade calendar spreads
on commodity futures and finally got this working on IB with the plan to
migrate to this platform.  It is possible to get quotes for the exchange
traded spread trade (as opposed to the combination of the two outrights).
However you have to play around with the exchange parameters you send on
each leg of the combo trade.  In my case for example with NG spreads on
NYMEX/Globex I have to use Exchange="NYMEX" on both the individual comboLegs
as well as the spread itself.

Here is my code in C# (I am using the Krs.Ats.IBNet.dll).  First I get the
set of all underlying contracts and then here I create the spreads:

ComboLeg leg1 = new ComboLeg(allContracts[ii].ContractId, 1, ActionSide.Buy,
"NYMEX", ComboOpenClose.Unknown, ShortSaleSlot.Unapplicable, "");
ComboLeg leg2 = new ComboLeg(allContracts[jj].ContractId, 1,
ActionSide.Sell, "NYMEX", ComboOpenClose.Unknown,
ShortSaleSlot.Unapplicable, "");
Contract spread = new Contract();
spread.Symbol = "NG";
spread.Exchange = "NYMEX";
spread.Currency = "USD";
spread.SecIdType = SecurityIdType.None;
spread.SecurityType = SecurityType.Bag;
spread.ComboLegs.Add(leg1);
spread.ComboLegs.Add(leg2);
allContracts.Add(spread);

This works, it gets market data for the correct exchange traded spread
contract rather than the "combo" of the two underlyings.  I have cross
checked it all against my other futures trading platform, which is better
than IB but more expensive of course.

I think this means I will pay more in brokerage since the spreads are
directed rather than "SMART" (with an emphasis on the "")... but it is much
cheaper than paying 10 more ticks trading the two outrights!

Let me know if this helps.

Regards,
Lloyd Spencer.

Lloyd.spencer at kahutrading.com


From s.n.stoyanov at gmail.com  Thu Jul 26 17:34:46 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Thu, 26 Jul 2012 08:34:46 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH ugarchfilter
Message-ID: <1343316886336-4637949.post@n4.nabble.com>

Hi all,

A question for Alexios or someone else who has some experience with rugarch.
I am having a hard time understanding the functionality of the ugarchfilter
class in the rugarch package. My understanding is that you should be able to
use it to apply the estimated coefficients of an old fit to a dataset
including new points (fixing the already estimated parameters and only
adding the effect of the new data points to arrive at updated parameter
estimates). I am not entirely sure that this is correct. 

Either way, the new resulting object produces a list of coefficients (among
other things) which are different from the fit coefficients. If i am
correct, these are the coefficients I want to be using for forecasting when
I have added a single data point to my series and I am looking for speed.
However, the ugarchforecast and ugarchboot functions can only be applied to
ugarchspec and ugarchfit classes.
Does that mean that in order to forecast, I need to transform my filter
object into a spec object and then into a fit object (through using the
fixed.pars method in ugarchspec)?
I get the feeling that this is a bit complicated to be true, so I am
probably misunderstanding the functionality intended for the filter
function.
Also, any additional clarification on the n.old method would be appreciated
- I am having a hard time interpreting the explanation in the package
documentation (which might be owed to my faulty interpretation of the
object's functionality).

Thanks in advance.

Stoyan



-----
Stoyan Stoyanov
The University of Chicago Booth School of Business
MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-ugarchfilter-tp4637949.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From alexios at 4dscape.com  Thu Jul 26 18:11:13 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Thu, 26 Jul 2012 17:11:13 +0100
Subject: [R-SIG-Finance] RUGARCH ugarchfilter
In-Reply-To: <1343316886336-4637949.post@n4.nabble.com>
References: <1343316886336-4637949.post@n4.nabble.com>
Message-ID: <50116C21.6070100@4dscape.com>

On 26/07/2012 16:34, stoyan.stoyanov wrote:
> Hi all,
>
> A question for Alexios or someone else who has some experience with rugarch.
> I am having a hard time understanding the functionality of the ugarchfilter
> class in the rugarch package. My understanding is that you should be able to
> use it to apply the estimated coefficients of an old fit to a dataset
> including new points (fixing the already estimated parameters and only
> adding the effect of the new data points to arrive at updated parameter
> estimates). I am not entirely sure that this is correct.

No. It does not "arrive at updated parameter estimates". The 
ugarchfilter method simply "filters" the new dataset with the existing 
estimated parameters to generate an "updated" conditional mean and 
variance. It is exactly like performing a 1-step ahead rolling forecast 
(since the filter generates t+1|t..)
>
> Either way, the new resulting object produces a list of coefficients (among
> other things) which are different from the fit coefficients.
That is NOT what happens. It does not estimate any new coefficients so 
the list of coefficients is EXACTLY what you provided through the 
uGARCHspec object (with fixed parameters).

> If i am
> correct, these are the coefficients I want to be using for forecasting when
> I have added a single data point to my series and I am looking for speed.
> However, the ugarchforecast and ugarchboot functions can only be applied to
> ugarchspec and ugarchfit classes.
You are not forecasting coefficients. You are forecasting the 
conditional mean and variance.
> Does that mean that in order to forecast, I need to transform my filter
> object into a spec object and then into a fit object (through using the
> fixed.pars method in ugarchspec)?
> I get the feeling that this is a bit complicated to be true, so I am
> probably misunderstanding the functionality intended for the filter
> function.
Definitely misunderstanding it. I hope the previous comments clarify. 
You forecast from either a uGARCHfit-class object or a uGARCHspec-class 
object (with fixed parameters).
> Also, any additional clarification on the n.old method would be appreciated
> - I am having a hard time interpreting the explanation in the package
> documentation (which might be owed to my faulty interpretation of the
> object's functionality).
>
GARCH models require an estimate of the t_0 variance (usually the mean 
of the squared residuals) to initialize the recursion. If you are 
providing a dataset (length T) which is simply the old dataset (length 
N) augmented by new data (length M), then you might want to use the 
original t_0 value to filter the data (n.old=N) so that:
1. You do not have look ahead bias by using n.old=T (the bias is usually 
very small, but it does not hurt to control for it).
2. Conditional variance values agree exactly (used internally in a 
variety of cases where this is important to control for).


> Thanks in advance.
>
> Stoyan
>
>
>
> -----
> Stoyan Stoyanov
> The University of Chicago Booth School of Business
> MBA Class of 2013
> (312) 532-0120 | stoyanov at chicagobooth.edu
> --
> View this message in context: http://r.789695.n4.nabble.com/RUGARCH-ugarchfilter-tp4637949.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
>
- Alexios


From ezivot at u.washington.edu  Thu Jul 26 18:34:20 2012
From: ezivot at u.washington.edu (Eric Zivot)
Date: Thu, 26 Jul 2012 09:34:20 -0700
Subject: [R-SIG-Finance] RUGARCH ugarchfilter
In-Reply-To: <50116C21.6070100@4dscape.com>
References: <1343316886336-4637949.post@n4.nabble.com>
	<50116C21.6070100@4dscape.com>
Message-ID: <004f01cd6b4c$81d3cb80$857b6280$@washington.edu>

Given the recent posts on the use of the very nice rugarch package, I
thought I would point out my lecture notes on GARCH from my Quantitative
Risk Management course at UW. I use the rugarch and rmgarch packages
extensively in the course and I have a number of R examples and powerpoint
slides that illustrate the use of rugarch and rmgarch. I am also writing the
univariate GARCH and multivariate GARCH chapters in my new book Modeling
Financial Time Series with R to use the rugarch and rmgarch packages (among
others). 

http://faculty.washington.edu/ezivot/econ589/589syllabus.htm


From s.n.stoyanov at gmail.com  Thu Jul 26 18:43:36 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Thu, 26 Jul 2012 09:43:36 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH ugarchfilter
In-Reply-To: <50116C21.6070100@4dscape.com>
References: <1343316886336-4637949.post@n4.nabble.com>
	<50116C21.6070100@4dscape.com>
Message-ID: <1343321016009-4637973.post@n4.nabble.com>

Thanks Alexios,

This clarifies things. Please note that by:

"these are the coefficients I want to be using for forecasting when I have
added a single data point to my series and I am looking for speed"

I never meant that I will be forecasting coefficients. I simply thought
that, in addition to updating the uncmean and uncvariance, the filter
function would correct coefficient estimates, which could then be used in
forecasting the series and its volatility. Now I know that this is not the
case.

I guess manipulating the coefficient estimates in such a way is not trivial
and would require a re-fitting of the model to include the new data points.
In this case, when I am looking for speed, I could simply use a fixed set of
previously estimated parameters, rather than refitting the model at each
step.

Also, thanks for the clarification on the n.old method. It makes more sense
now.

Stoyan



-----
Stoyan Stoyanov
The University of Chicago Booth School of Business
MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-ugarchfilter-tp4637949p4637973.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From s.n.stoyanov at gmail.com  Thu Jul 26 19:57:09 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Thu, 26 Jul 2012 10:57:09 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH ugarchfilter
In-Reply-To: <004f01cd6b4c$81d3cb80$857b6280$@washington.edu>
References: <1343316886336-4637949.post@n4.nabble.com>
	<50116C21.6070100@4dscape.com>
	<004f01cd6b4c$81d3cb80$857b6280$@washington.edu>
Message-ID: <1343325429555-4637987.post@n4.nabble.com>

Eric,

Thanks for the link. This is very valuable indeed. It would have saved me
days of work if I had seen your slides earlier. Much appreciated.

Stoyan



-----
Stoyan Stoyanov
The University of Chicago Booth School of Business
MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-ugarchfilter-tp4637949p4637987.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From samo.pahor at gmail.com  Sat Jul 28 23:50:31 2012
From: samo.pahor at gmail.com (Samo Pahor)
Date: Sat, 28 Jul 2012 17:50:31 -0400
Subject: [R-SIG-Finance] quantstrat order execution
In-Reply-To: <500C9975.4020600@opentrades.nl>
References: <CAFNBy2k-F+w1kTB6GVmJGhp7O8cwnipHC8Z2+0m17JCaC8tUaw@mail.gmail.com>
	<500C9975.4020600@opentrades.nl>
Message-ID: <CAFNBy2=MjOKHPrWySbrU4bCj6oqr2QL0oZR7x6tLfd=D+zwJ5A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120728/36920dbd/attachment.pl>

From brian at braverock.com  Sun Jul 29 03:08:34 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 28 Jul 2012 20:08:34 -0500
Subject: [R-SIG-Finance] quantstrat order execution
In-Reply-To: <CAFNBy2=MjOKHPrWySbrU4bCj6oqr2QL0oZR7x6tLfd=D+zwJ5A@mail.gmail.com>
References: <CAFNBy2k-F+w1kTB6GVmJGhp7O8cwnipHC8Z2+0m17JCaC8tUaw@mail.gmail.com>
	<500C9975.4020600@opentrades.nl>
	<CAFNBy2=MjOKHPrWySbrU4bCj6oqr2QL0oZR7x6tLfd=D+zwJ5A@mail.gmail.com>
Message-ID: <50148D12.1050508@braverock.com>

On 07/28/2012 04:50 PM, Samo Pahor wrote:
> Any plans to parameterise this? I mean, so that users are able to
> set up to which frequencies trades should be done on the close of the bar
> of the signal instead on next bar...

No.  Instant execution is a myth.

If you want execution at higher frequencies, use higher frequency data.

-- 
Brian


From stergios_marinopoulos at yahoo.com  Sun Jul 29 21:06:13 2012
From: stergios_marinopoulos at yahoo.com (Stergios Marinopoulos)
Date: Sun, 29 Jul 2012 12:06:13 -0700 (PDT)
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
In-Reply-To: <1462552770.2076168.1343233882158.JavaMail.www@wwinf8218>
References: <1462552770.2076168.1343233882158.JavaMail.www@wwinf8218>
Message-ID: <1343588773.45793.YahooMailNeo@web160401.mail.bf1.yahoo.com>



> PS : To stergios_marinopoulos at yahoo.com
>??
>??When you said it works in Java you mean for quotes from the combo market ? or just 
>??implied quotes ?

reqMktData() when given a BAG contract returns the spreads on the bid and the ask. It also returns some size information, which I assume is the spread on the sizes when the spread on the bid/ask changes, although I am not sure about this aspect.

Attached is a short working example in Java based on the "ExampleBase" series of examples included in the IB API source code. ?Just replace the hard-coded IP address to one wihch works for you. ?This example creates an ES calendar spread, and then calls reqMktData() on the BAG contract; the rest of the program simply prints the bid/ask spread to stdout.

sm


--
Stergios Marinopoulos


Thanks,


Olivier
> I've added in support for sending a BAG contract, though I haven't
> figured out the proper params to verify all the messages are being
> sent correctly; i.e. still failing, just now for less obvious causes
> ;-)
>
> At rev 156 on googlecode
>
> HTH
> Jeff
>
> On Thu, Jul 19, 2012 at 1:41 PM, Jeffrey Ryan? wrote:
>> Further investigation leads me to think this is just not supported as
>> of yet. I'll have to see how the API handles this for market data,
>> and add it into IBrokers.
>>
>> At present, the contract is simply getting sent as a BAG, with no
>> further effort to pass along the comboLegs themselves. I don't know
>> technically where it is failing yet, but at this point I can see it
>> simply can't succeed as is. I will fix.
>>
>> Thanks,
>> Jeff
>>
>> On Thu, Jul 19, 2012 at 12:57 PM, Jeffrey Ryan? wrote:
>>> Version mismatches from IB/etc may be the cause here, though I am out
>>> of the office this week so am not able to try to debug.
>>>
>>> Make sure you are running the latest of all (including the googlecode
>>> version of IBrokers - which you must build from source at this point).
>>> If not, it will be a little difficult to narrow down where the
>>> problem is.
>>>
>>> Thanks,
>>> Jeff
>>>
>>> On Thu, Jul 19, 2012 at 12:21 PM, Stergios Marinopoulos
>>>? wrote:
>>>> I think see the problem. Looking at the TWS error log, I can see that IBrokers 
reqMkData() is requesting the following generic tick types by default: 
"100,101,104,106,165,221,225,236", (and this is documented in IBroker's reqMktData() 
DOH!!!) where
>>>>
>>>> 100: Option Volume
>>>> 101: Option Open Interest 104: Historical Volatility 106: Option Implied Volatility 
165: Miscellaneous Stats 221: Mark Price225: Auction values236: Shortable
>>>>
>>>> Those tick types do not make sense for this BAG contract. The only thing that makes 
sense for this BAG contract is the spreads between bid, ask, or last. So when you call 
reqMktData() set tickGenerics="". But when I try it, however, nothing seems to be 
happen.
>>>>
>>>> I believe the eventWrapper argument or the CALLBACK argument to reqMktData() needs 
to be used in order to receive the (Java equivalent) tickPrice() events. Maybe someone 
with experience with those arguments can chime in.
>>>>
>>>> --
>>>> Stergios Marinopoulos
>>>>
>>>>
>>>>
>>>>
>>>> ----- Original Message -----
>>>> From: Stergios Marinopoulos 
>>>> To: G See 
>>>> Cc: "r-sig-finance at r-project.org" 
>>>> Sent: Thursday, July 19, 2012 11:28 AM
>>>> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
>>>>
>>>> I took Garrett's example and tried to get it working using IBrokers. It's starts 
writing data to a file as expected, but then the error below is produced and quote data 
is no longer written to the file.
>>>>
>>>> 2 1 320 Error reading request:-'wc' : cause - Unable format field -
>>>>
>>>>
>>>>
>>>>
>>>> Here's the code:
>>>>
>>>> library(IBrokers) ;
>>>> tws <- twsConnect(1)
>>>> bag <- twsBAG(
>>>> twsComboLeg(
>>>> conId = "756733", #conId("SPY"),
>>>> ratio = "1",
>>>> action = "BUY",
>>>> exchange = "SMART"
>>>> ) ,
>>>> twsComboLeg(
>>>> conId = "73128548", #conId("DIA"),
>>>> ratio = "1.06",
>>>> action = "SELL",
>>>> exchange = "SMART"
>>>> )
>>>> )
>>>> bag.csv <- file("~/bag.csv", open="w")
>>>> reqMktData(tws, bag,
>>>> eventWrapper=eWrapper.MktData.CSV(1),
>>>> file=bag.csv)
>>>>
>>>>
>>>> --
>>>> Stergios Marinopoulos
>>>>
>>>>
>>>> ----- Original Message -----
>>>> From: G See 
>>>> To: Stergios Marinopoulos 
>>>> Cc: omerle ; "r-sig-finance at r-project.org" 
>>>> Sent: Thursday, July 19, 2012 11:11 AM
>>>> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
>>>>
>>>> On Thu, Jul 19, 2012 at 10:09 AM, Stergios Marinopoulos
>>>>? wrote:
>>>>> In Java, if you create a proper BAG Contract you can use it with reqMktData() or
>>>>> reqHistoricalData(). I imagine the same holds true in R as well. (I can send Java 
examples if interested.)
>>>>>
>>>>> Try using IBrokers twsBAG() function to create a combo contract, and use the 
returned object as the contract to IBrokers's equivalent of reqMktData() and data should 
start streaming.
>>>>>
>>>>
>>>> I'm unable to get that to work. If anyone else can get it to work,
>>>> please share your secret.
>>>>
>>>> Thanks,
>>>> Garrett
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>>
>>>
>>> --
>>> Jeffrey Ryan
>>> jeffrey.ryan at lemnica.com
>>>
>>> www.lemnica.com
>>> www.esotericR.com
>>
>>
>>
>> --
>> Jeffrey Ryan
>> jeffrey.ryan at lemnica.com
>>
>> www.lemnica.com
>> www.esotericR.com
>
>
>


Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
Je cr?e ma bo?te mail www.laposte.net

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions should go. 
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Example9.java
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120729/a38fcb29/attachment.pl>

From jeff.a.ryan at gmail.com  Sun Jul 29 22:14:33 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sun, 29 Jul 2012 15:14:33 -0500
Subject: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
In-Reply-To: <1343588773.45793.YahooMailNeo@web160401.mail.bf1.yahoo.com>
References: <1462552770.2076168.1343233882158.JavaMail.www@wwinf8218>
	<1343588773.45793.YahooMailNeo@web160401.mail.bf1.yahoo.com>
Message-ID: <CABDUZc_Cy0Wo8yyvSSm7yjRJ2uSyoDiH0nxC_cYL7PbXEF0aow@mail.gmail.com>

Thanks for passing a working Java example.  I'll use this to
test/adjust the code in IBrokers so it will do the same.

Best,
Jeff


On Sun, Jul 29, 2012 at 2:06 PM, Stergios Marinopoulos
<stergios_marinopoulos at yahoo.com> wrote:
>
>
>> PS : To stergios_marinopoulos at yahoo.com
>>
>>  When you said it works in Java you mean for quotes from the combo market ? or just
>>  implied quotes ?
>
> reqMktData() when given a BAG contract returns the spreads on the bid and the ask. It also returns some size information, which I assume is the spread on the sizes when the spread on the bid/ask changes, although I am not sure about this aspect.
>
> Attached is a short working example in Java based on the "ExampleBase" series of examples included in the IB API source code.  Just replace the hard-coded IP address to one wihch works for you.  This example creates an ES calendar spread, and then calls reqMktData() on the BAG contract; the rest of the program simply prints the bid/ask spread to stdout.
>
> sm
>
>
> --
> Stergios Marinopoulos
>
>
> Thanks,
>
>
> Olivier
>> I've added in support for sending a BAG contract, though I haven't
>> figured out the proper params to verify all the messages are being
>> sent correctly; i.e. still failing, just now for less obvious causes
>> ;-)
>>
>> At rev 156 on googlecode
>>
>> HTH
>> Jeff
>>
>> On Thu, Jul 19, 2012 at 1:41 PM, Jeffrey Ryan  wrote:
>>> Further investigation leads me to think this is just not supported as
>>> of yet. I'll have to see how the API handles this for market data,
>>> and add it into IBrokers.
>>>
>>> At present, the contract is simply getting sent as a BAG, with no
>>> further effort to pass along the comboLegs themselves. I don't know
>>> technically where it is failing yet, but at this point I can see it
>>> simply can't succeed as is. I will fix.
>>>
>>> Thanks,
>>> Jeff
>>>
>>> On Thu, Jul 19, 2012 at 12:57 PM, Jeffrey Ryan  wrote:
>>>> Version mismatches from IB/etc may be the cause here, though I am out
>>>> of the office this week so am not able to try to debug.
>>>>
>>>> Make sure you are running the latest of all (including the googlecode
>>>> version of IBrokers - which you must build from source at this point).
>>>> If not, it will be a little difficult to narrow down where the
>>>> problem is.
>>>>
>>>> Thanks,
>>>> Jeff
>>>>
>>>> On Thu, Jul 19, 2012 at 12:21 PM, Stergios Marinopoulos
>>>>  wrote:
>>>>> I think see the problem. Looking at the TWS error log, I can see that IBrokers
> reqMkData() is requesting the following generic tick types by default:
> "100,101,104,106,165,221,225,236", (and this is documented in IBroker's reqMktData()
> DOH!!!) where
>>>>>
>>>>> 100: Option Volume
>>>>> 101: Option Open Interest 104: Historical Volatility 106: Option Implied Volatility
> 165: Miscellaneous Stats 221: Mark Price225: Auction values236: Shortable
>>>>>
>>>>> Those tick types do not make sense for this BAG contract. The only thing that makes
> sense for this BAG contract is the spreads between bid, ask, or last. So when you call
> reqMktData() set tickGenerics="". But when I try it, however, nothing seems to be
> happen.
>>>>>
>>>>> I believe the eventWrapper argument or the CALLBACK argument to reqMktData() needs
> to be used in order to receive the (Java equivalent) tickPrice() events. Maybe someone
> with experience with those arguments can chime in.
>>>>>
>>>>> --
>>>>> Stergios Marinopoulos
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> ----- Original Message -----
>>>>> From: Stergios Marinopoulos
>>>>> To: G See
>>>>> Cc: "r-sig-finance at r-project.org"
>>>>> Sent: Thursday, July 19, 2012 11:28 AM
>>>>> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
>>>>>
>>>>> I took Garrett's example and tried to get it working using IBrokers. It's starts
> writing data to a file as expected, but then the error below is produced and quote data
> is no longer written to the file.
>>>>>
>>>>> 2 1 320 Error reading request:-'wc' : cause - Unable format field -
>>>>>
>>>>>
>>>>>
>>>>>
>>>>> Here's the code:
>>>>>
>>>>> library(IBrokers) ;
>>>>> tws <- twsConnect(1)
>>>>> bag <- twsBAG(
>>>>> twsComboLeg(
>>>>> conId = "756733", #conId("SPY"),
>>>>> ratio = "1",
>>>>> action = "BUY",
>>>>> exchange = "SMART"
>>>>> ) ,
>>>>> twsComboLeg(
>>>>> conId = "73128548", #conId("DIA"),
>>>>> ratio = "1.06",
>>>>> action = "SELL",
>>>>> exchange = "SMART"
>>>>> )
>>>>> )
>>>>> bag.csv <- file("~/bag.csv", open="w")
>>>>> reqMktData(tws, bag,
>>>>> eventWrapper=eWrapper.MktData.CSV(1),
>>>>> file=bag.csv)
>>>>>
>>>>>
>>>>> --
>>>>> Stergios Marinopoulos
>>>>>
>>>>>
>>>>> ----- Original Message -----
>>>>> From: G See
>>>>> To: Stergios Marinopoulos
>>>>> Cc: omerle ; "r-sig-finance at r-project.org"
>>>>> Sent: Thursday, July 19, 2012 11:11 AM
>>>>> Subject: Re: [R-SIG-Finance] IBrokers : quotes from futures combo and reqIds
>>>>>
>>>>> On Thu, Jul 19, 2012 at 10:09 AM, Stergios Marinopoulos
>>>>>  wrote:
>>>>>> In Java, if you create a proper BAG Contract you can use it with reqMktData() or
>>>>>> reqHistoricalData(). I imagine the same holds true in R as well. (I can send Java
> examples if interested.)
>>>>>>
>>>>>> Try using IBrokers twsBAG() function to create a combo contract, and use the
> returned object as the contract to IBrokers's equivalent of reqMktData() and data should
> start streaming.
>>>>>>
>>>>>
>>>>> I'm unable to get that to work. If anyone else can get it to work,
>>>>> please share your secret.
>>>>>
>>>>> Thanks,
>>>>> Garrett
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>
>>>>
>>>>
>>>> --
>>>> Jeffrey Ryan
>>>> jeffrey.ryan at lemnica.com
>>>>
>>>> www.lemnica.com
>>>> www.esotericR.com
>>>
>>>
>>>
>>> --
>>> Jeffrey Ryan
>>> jeffrey.ryan at lemnica.com
>>>
>>> www.lemnica.com
>>> www.esotericR.com
>>
>>
>>
>
>
> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> Je cr?e ma bo?te mail www.laposte.net
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From s.n.stoyanov at gmail.com  Mon Jul 30 19:59:54 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Mon, 30 Jul 2012 10:59:54 -0700 (PDT)
Subject: [R-SIG-Finance] RUGARCH multi-period ahead forecasting
Message-ID: <1343671194197-4638396.post@n4.nabble.com>

Hi all,

I am trying to produce multi period ahead volatility forecasts using the
rugarch package and specifically the ugarchboot function, and using daily
returns. I would like to be able to report my forecasts in units of
annualized volatility.

My initial intuition to create a forecast for the period covering the next 5
trading days was to use the ugarchboot function in the following way:
boot.pred=ugarchboot(fit, data=NULL, method="partial", n.ahead=5,
n.bootfit=100, n.bootpred=500, out.sample=0,     solver="solnp")
sigma=as.data.frame(boot.pred, which="sigma",
type="summary")[3,5]*sqrt(252)*100

However, after thinking about it more carefully, I am starting to convince
myself that this will only report the annualized volatility predicted for
one single period (t+5) and not over the 5-day period I am interested in.
Thus, I am now computing the 5-day volatility forecast in the following way:

sigma=sqrt(sum(as.data.frame(boot.pred, which="sigma",
type="summary")[3,1:5]^2))*sqrt(252/5)*100

This essentially sums the 5 daily variance forecasts, takes the square root
of the sum,  and annualizes it.

Although I feel somewhat confident that this approach is correct, I am
confused by a couple of issues:
1. My annualized measure for the multi-period volatility, should be at least
as big as any of the single-day annualized volatility forecasts. Either this
statement is incorrect or I am not annualizing correctly. In cases when
single-period volatility forecasts are decreasing (unconditional variance <
conditional variance), I see my multi-period annualized forecast being lower
than my 1-period annualized forecast. The fact that I forecast volatility
over the next one day to be higher than volatility over the next five days
makes me uneasy.

2. The forecast numbers produced by the two methods above are strikingly
close (across a variaty of datasets and different forecast horizons). I am
really not sure how to make sense of this, so any explanations would be
greatly appreciated.

3. Finally, am I correct to think that ugarchboot creates 1-period ahead
forecasts and does not aggregate them?

Thanks in advance.

Best,
Stoyan



-----
Stoyan Stoyanov
The University of Chicago Booth School of Business
MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context: http://r.789695.n4.nabble.com/RUGARCH-multi-period-ahead-forecasting-tp4638396.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From xin.chau at gmail.com  Wed Aug  1 09:06:38 2012
From: xin.chau at gmail.com (Xin Chou)
Date: Wed, 1 Aug 2012 15:06:38 +0800
Subject: [R-SIG-Finance] Can Anybody Give Me A Help:Using R As a Trade
 Platform in *nix OS, and even In console/terminal/commandline?
Message-ID: <CALoPaFN=_TYx_ugqVd4ip1vywVfjmZT1_5bjWvrAtw9xkcfABw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120801/c783b4a2/attachment.pl>

From fxongoing at hotmail.com  Wed Aug  1 14:08:27 2012
From: fxongoing at hotmail.com (FX Going)
Date: 1 Aug 2012 05:08:27 -0700
Subject: [R-SIG-Finance] (no subject)
Message-ID: <COL401-EAS13361E951A82552831F0A03B8C40@phx.gbl>

http://shopwwwship.com/wp-admin/rhogn.html?dhjs=acfyay

From me at censix.com  Wed Aug  1 18:22:26 2012
From: me at censix.com (soren wilkening)
Date: Wed, 1 Aug 2012 09:22:26 -0700 (PDT)
Subject: [R-SIG-Finance] xts and Sys.time()  - very stange behaviour
Message-ID: <1343838146319-4638714.post@n4.nabble.com>

#I wasn't sure whether to post this to R.help, but since it involves xts() I
thought I would start here.
#I have attached a self explanatory code sample that does consistently
reproduce the problem on my #system (and it is driving me crazy)
#
#The code will generate some data based on Sys.time(), perform a test and if
it succeeds to reproduce the #problem, the loop will exit. Takes about 5
seconds on my system. So if the loop runs for a long time on #your machine,
your system is probably unaffected. you will have to interrupt it with
ctrl+c


require(xts)

options(digits.secs=3)

okok<-TRUE

while(okok){

initdate <- "2000-01-31 13:45:02.437" #some date
ob <- xts(as.matrix(t(c(0, NA, "aaaaa", "bbbb",  0, "ccccc",
as.character(as.POSIXct(initdate)), 1, 0))), order.by = as.POSIXct(initdate)
) 


#get some timestamps, with subsecond accuracy truncated to microseconds
t0 <- as.POSIXct( strftime(Sys.time(), "%Y-%m-%d %H:%M:%OS3") )  
Sys.sleep(0.3)
t1 <- as.POSIXct( strftime(Sys.time(), "%Y-%m-%d %H:%M:%OS3") )
Sys.sleep(0.7)
t2 <- as.POSIXct( strftime(Sys.time(), "%Y-%m-%d %H:%M:%OS3") )
Sys.sleep(0.2)


# use the timestamps to add rows to the 'ob'
order <- NULL

ordertime1 <- t0 + 1e-3
neworder <- xts(as.matrix(t(c(1, 2, 'aa', 'bb', 13.4, 'o', NA, NA, 0))),
order.by = (ordertime1))
if (is.null(order)) order <- neworder else order <- rbind(order, neworder)

ordertime2 <- t1 + 1e-3
neworder <- xts(as.matrix(t(c(2, 2, 'aa', 'bb', 13.4, 'o', NA, NA, 0))),
order.by = (ordertime2))
if (is.null(order)) order <- neworder else order <- rbind(order, neworder)

ordertime3 <- t2 + 1e-3
neworder <- xts(as.matrix(t(c(3, 2, 'aa', 'bb', 13.4, 'o', NA, NA, 0))),
order.by = (ordertime3))
if (is.null(order)) order <- neworder else order <- rbind(order, neworder)
tmpneworder <- neworder

ob <- rbind(ob,order)

key <- as.character(index(tmpneworder))

okok<- nrow( ob[ key ] ) == 1 # does access work ?
}

print(ob)
print(paste('problem: ob[\'',key,'\']  is empty, but should not be
!!',sep=''))

# ob should have 4 rows and each should be accessible by using the
timestamp, i.e.:  ob['2012-08-01 18:08:39.298'] or similar.  But for some
reason this wont work for the last row !!! ????
#
#Thanks for some help
# Soren



-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/xts-and-Sys-time-very-stange-behaviour-tp4638714.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Wed Aug  1 18:40:58 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 1 Aug 2012 11:40:58 -0500
Subject: [R-SIG-Finance] xts and Sys.time() - very stange behaviour
In-Reply-To: <1343838146319-4638714.post@n4.nabble.com>
References: <1343838146319-4638714.post@n4.nabble.com>
Message-ID: <CABDUZc84d8jM2ePJ5n2kqS7bcb_iCQWiJokvmb8RVUYeoP8tDw@mail.gmail.com>

Your example, while reproducible is anything but minimal.

Can you distill it to something without all the order/etc stuff so we
can properly see what might be happening.  IIRC subsecond selection
isn't supported in some cases, but it is hard to find the time to
understand your code before even getting to the root of the issue.

Best,
Jeff

On Wed, Aug 1, 2012 at 11:22 AM, soren wilkening <me at censix.com> wrote:
> #I wasn't sure whether to post this to R.help, but since it involves xts() I
> thought I would start here.
> #I have attached a self explanatory code sample that does consistently
> reproduce the problem on my #system (and it is driving me crazy)
> #
> #The code will generate some data based on Sys.time(), perform a test and if
> it succeeds to reproduce the #problem, the loop will exit. Takes about 5
> seconds on my system. So if the loop runs for a long time on #your machine,
> your system is probably unaffected. you will have to interrupt it with
> ctrl+c
>
>
> require(xts)
>
> options(digits.secs=3)
>
> okok<-TRUE
>
> while(okok){
>
> initdate <- "2000-01-31 13:45:02.437" #some date
> ob <- xts(as.matrix(t(c(0, NA, "aaaaa", "bbbb",  0, "ccccc",
> as.character(as.POSIXct(initdate)), 1, 0))), order.by = as.POSIXct(initdate)
> )
>
>
> #get some timestamps, with subsecond accuracy truncated to microseconds
> t0 <- as.POSIXct( strftime(Sys.time(), "%Y-%m-%d %H:%M:%OS3") )
> Sys.sleep(0.3)
> t1 <- as.POSIXct( strftime(Sys.time(), "%Y-%m-%d %H:%M:%OS3") )
> Sys.sleep(0.7)
> t2 <- as.POSIXct( strftime(Sys.time(), "%Y-%m-%d %H:%M:%OS3") )
> Sys.sleep(0.2)
>
>
> # use the timestamps to add rows to the 'ob'
> order <- NULL
>
> ordertime1 <- t0 + 1e-3
> neworder <- xts(as.matrix(t(c(1, 2, 'aa', 'bb', 13.4, 'o', NA, NA, 0))),
> order.by = (ordertime1))
> if (is.null(order)) order <- neworder else order <- rbind(order, neworder)
>
> ordertime2 <- t1 + 1e-3
> neworder <- xts(as.matrix(t(c(2, 2, 'aa', 'bb', 13.4, 'o', NA, NA, 0))),
> order.by = (ordertime2))
> if (is.null(order)) order <- neworder else order <- rbind(order, neworder)
>
> ordertime3 <- t2 + 1e-3
> neworder <- xts(as.matrix(t(c(3, 2, 'aa', 'bb', 13.4, 'o', NA, NA, 0))),
> order.by = (ordertime3))
> if (is.null(order)) order <- neworder else order <- rbind(order, neworder)
> tmpneworder <- neworder
>
> ob <- rbind(ob,order)
>
> key <- as.character(index(tmpneworder))
>
> okok<- nrow( ob[ key ] ) == 1 # does access work ?
> }
>
> print(ob)
> print(paste('problem: ob[\'',key,'\']  is empty, but should not be
> !!',sep=''))
>
> # ob should have 4 rows and each should be accessible by using the
> timestamp, i.e.:  ob['2012-08-01 18:08:39.298'] or similar.  But for some
> reason this wont work for the last row !!! ????
> #
> #Thanks for some help
> # Soren
>
>
>
> -----
> http://censix.com
> --
> View this message in context: http://r.789695.n4.nabble.com/xts-and-Sys-time-very-stange-behaviour-tp4638714.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From jeff.a.ryan at gmail.com  Wed Aug  1 18:49:01 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 1 Aug 2012 11:49:01 -0500
Subject: [R-SIG-Finance] Can Anybody Give Me A Help:Using R As a Trade
 Platform in *nix OS, and even In console/terminal/commandline?
In-Reply-To: <CALoPaFN=_TYx_ugqVd4ip1vywVfjmZT1_5bjWvrAtw9xkcfABw@mail.gmail.com>
References: <CALoPaFN=_TYx_ugqVd4ip1vywVfjmZT1_5bjWvrAtw9xkcfABw@mail.gmail.com>
Message-ID: <CABDUZc9LGi9b8wPhDyfS9Fz3D+29GFCu5qOXejWghP2KdQR+Qw@mail.gmail.com>

Take a look at the packages most talked about on this list.  Some ones
that may get you started include quantmod, xts, TTR, quantstrat,
blotter, and IBrokers.

All are non-GUI, and are very powerful for various aspects of a trading system.

I realize that English isn't your native language, but if you could be
more specific in terms of _what_ you want to do once you've looked
over the details of the above packages, many on the list would be glad
to give further guidance.

Best,
Jeff

On Wed, Aug 1, 2012 at 2:06 AM, Xin Chou <xin.chau at gmail.com> wrote:
> Hello everyone,I'm always searching for a effective?powerful?flexible(using
> stratigies and algo trading)  trading platform for a long long time,all the
> trade platform existed now are sucks,all I want is something powerful just
> like the editor *VIM or Shell in Linux*.Now I meet R,and I'm wondering if
> it is necessary to meet my demand.
>
> First let me describe my thoughts briefly:
>
> I.Input 'R' in Command Line
>
> II.Import something trade platform packges under R envoriment,*not gui*,but
> cml
>
> III.Login into my account using the broker's api
>
> IV.The most powerful places:very many tools which I can quote,see my
> account's positions,send buy/sell orders to the market and so on.And I can
> use all these commands together to get more powerful results,just like
> shell,you can use some commands together.
>
> V.I can treat every single stratgies as a plugin,and can use it
> flexiblely,just like something 'BUY IBM 100,000 Shares In exameplestrategy"
>
>
>
> Well,I think that is a good trade platform,not today's existed product in
> GUI,they are too slow and can not make trader(s) focus on markets.Maybe
> many spirits in linux can bring to this area.
>
> Can anyone give me a hint?  Thanks very much
>
>         [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From me at censix.com  Wed Aug  1 20:08:58 2012
From: me at censix.com (soren wilkening)
Date: Wed, 1 Aug 2012 11:08:58 -0700 (PDT)
Subject: [R-SIG-Finance] xts and Sys.time() - very stange behaviour
In-Reply-To: <CABDUZc84d8jM2ePJ5n2kqS7bcb_iCQWiJokvmb8RVUYeoP8tDw@mail.gmail.com>
References: <1343838146319-4638714.post@n4.nabble.com>
	<CABDUZc84d8jM2ePJ5n2kqS7bcb_iCQWiJokvmb8RVUYeoP8tDw@mail.gmail.com>
Message-ID: <1343844538969-4638728.post@n4.nabble.com>

require(xts)
options(digits.secs=3)

ob <- xts(as.matrix(t(c("aa", "bb"))), order.by = as.POSIXct("2000-01-31
13:45:02.437") ) 
#get t0 as an arbitrary timestamp, with subsecond accuracy, truncated to
microseconds
t0 <- as.POSIXct( strftime(Sys.time(), "%Y-%m-%d %H:%M:%OS3") ) 
#add a microsecond 
ordertime1 <- t0 + 1e-3
neworder <- xts(as.matrix(t(c('aaaa', 'bbbb'))), order.by = (ordertime1))
ob <- rbind(ob,neworder)
key <- as.character(index(neworder))

#returns 1 row
ob[ "2000-01-31 13:45:02.437" ]  

# sometimes returns nothing ???
ob[ key ] 





The last line should normally return the last row of 'ob'. If I run the
entire code snippet about 5 times
I get at least one run where it returns an empty row. But that should never
happen.?! Here is my sessionInfo.

1> sessionInfo()
R version 2.12.0 (2010-10-15)
Platform: i686-pc-linux-gnu (32-bit)

locale:
 [1] LC_CTYPE=en_US.utf8       LC_NUMERIC=C             
 [3] LC_TIME=en_US.utf8        LC_COLLATE=en_US.utf8    
 [5] LC_MONETARY=C             LC_MESSAGES=en_US.utf8   
 [7] LC_PAPER=en_US.utf8       LC_NAME=C                
 [9] LC_ADDRESS=C              LC_TELEPHONE=C           
[11] LC_MEASUREMENT=en_US.utf8 LC_IDENTIFICATION=C      

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] xts_0.7-6.9 zoo_1.7-0  

loaded via a namespace (and not attached):
[1] grid_2.12.0     lattice_0.19-13


I have just noticed that when I change the line:
ordertime1 <- t0 + 1e-3
to
ordertime1 <- t0 
Things seem to work fine. That however is not a solution since the addition
is an essential component here.



-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/xts-and-Sys-time-very-stange-behaviour-tp4638714p4638728.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Wed Aug  1 20:16:37 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 1 Aug 2012 13:16:37 -0500
Subject: [R-SIG-Finance] xts and Sys.time() - very stange behaviour
In-Reply-To: <1343844538969-4638728.post@n4.nabble.com>
References: <1343838146319-4638714.post@n4.nabble.com>
	<CABDUZc84d8jM2ePJ5n2kqS7bcb_iCQWiJokvmb8RVUYeoP8tDw@mail.gmail.com>
	<1343844538969-4638728.post@n4.nabble.com>
Message-ID: <CABDUZc-4MRD_4pYL7pXN3bkBgaorFOA3KznyghWVZSUSh=BKzw@mail.gmail.com>

2.12!    It's 2012 man, not 2010!!!!  ;-)

Joking aside, I can't replicate using a more modern version of all the tools:

> ob[ key ]
                        [,1]   [,2]
2012-08-01 13:13:32.638 "aaaa" "bbbb"

> sessionInfo()
R version 2.15.0 (2012-03-30)
Platform: x86_64-apple-darwin10.8.0 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] xts_0.8-7 zoo_1.7-6

loaded via a namespace (and not attached):
[1] grid_2.15.0     lattice_0.19-17


On Wed, Aug 1, 2012 at 1:08 PM, soren wilkening <me at censix.com> wrote:
> require(xts)
> options(digits.secs=3)
>
> ob <- xts(as.matrix(t(c("aa", "bb"))), order.by = as.POSIXct("2000-01-31
> 13:45:02.437") )
> #get t0 as an arbitrary timestamp, with subsecond accuracy, truncated to
> microseconds
> t0 <- as.POSIXct( strftime(Sys.time(), "%Y-%m-%d %H:%M:%OS3") )
> #add a microsecond
> ordertime1 <- t0 + 1e-3
> neworder <- xts(as.matrix(t(c('aaaa', 'bbbb'))), order.by = (ordertime1))
> ob <- rbind(ob,neworder)
> key <- as.character(index(neworder))
>
> #returns 1 row
> ob[ "2000-01-31 13:45:02.437" ]
>
> # sometimes returns nothing ???
> ob[ key ]
>
>
>
>
>
> The last line should normally return the last row of 'ob'. If I run the
> entire code snippet about 5 times
> I get at least one run where it returns an empty row. But that should never
> happen.?! Here is my sessionInfo.
>
> 1> sessionInfo()
> R version 2.12.0 (2010-10-15)
> Platform: i686-pc-linux-gnu (32-bit)
>
> locale:
>  [1] LC_CTYPE=en_US.utf8       LC_NUMERIC=C
>  [3] LC_TIME=en_US.utf8        LC_COLLATE=en_US.utf8
>  [5] LC_MONETARY=C             LC_MESSAGES=en_US.utf8
>  [7] LC_PAPER=en_US.utf8       LC_NAME=C
>  [9] LC_ADDRESS=C              LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.utf8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] xts_0.7-6.9 zoo_1.7-0
>
> loaded via a namespace (and not attached):
> [1] grid_2.12.0     lattice_0.19-13
>
>
> I have just noticed that when I change the line:
> ordertime1 <- t0 + 1e-3
> to
> ordertime1 <- t0
> Things seem to work fine. That however is not a solution since the addition
> is an essential component here.
>
>
>
> -----
> http://censix.com
> --
> View this message in context: http://r.789695.n4.nabble.com/xts-and-Sys-time-very-stange-behaviour-tp4638714p4638728.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From me at censix.com  Wed Aug  1 20:22:01 2012
From: me at censix.com (soren wilkening)
Date: Wed, 1 Aug 2012 11:22:01 -0700 (PDT)
Subject: [R-SIG-Finance] xts and Sys.time() - very stange behaviour
In-Reply-To: <CABDUZc-4MRD_4pYL7pXN3bkBgaorFOA3KznyghWVZSUSh=BKzw@mail.gmail.com>
References: <1343838146319-4638714.post@n4.nabble.com>
	<CABDUZc84d8jM2ePJ5n2kqS7bcb_iCQWiJokvmb8RVUYeoP8tDw@mail.gmail.com>
	<1343844538969-4638728.post@n4.nabble.com>
	<CABDUZc-4MRD_4pYL7pXN3bkBgaorFOA3KznyghWVZSUSh=BKzw@mail.gmail.com>
Message-ID: <1343845321225-4638731.post@n4.nabble.com>

I don't think its the R version. you are on a 64 bit system, I am on a 32 bit
system. that would have been my first guess!



-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/xts-and-Sys-time-very-stange-behaviour-tp4638714p4638731.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Wed Aug  1 20:28:28 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 1 Aug 2012 13:28:28 -0500
Subject: [R-SIG-Finance] xts and Sys.time() - very stange behaviour
In-Reply-To: <1343845321225-4638731.post@n4.nabble.com>
References: <1343838146319-4638714.post@n4.nabble.com>
	<CABDUZc84d8jM2ePJ5n2kqS7bcb_iCQWiJokvmb8RVUYeoP8tDw@mail.gmail.com>
	<1343844538969-4638728.post@n4.nabble.com>
	<CABDUZc-4MRD_4pYL7pXN3bkBgaorFOA3KznyghWVZSUSh=BKzw@mail.gmail.com>
	<1343845321225-4638731.post@n4.nabble.com>
Message-ID: <CABDUZc9Dj7dg9vRgaZwW7_PR_SgUTzaSLPm+VhRA7HJatvnBHw@mail.gmail.com>

Yes, there is something wrong - since your previous example also
failed in my env.  I just couldn't resist the vintage jab...

Josh is on this as well, so we'll see.

Apologies to the list for the noise.



On Wed, Aug 1, 2012 at 1:22 PM, soren wilkening <me at censix.com> wrote:
> I don't think its the R version. you are on a 64 bit system, I am on a 32 bit
> system. that would have been my first guess!
>
>
>
> -----
> http://censix.com
> --
> View this message in context: http://r.789695.n4.nabble.com/xts-and-Sys-time-very-stange-behaviour-tp4638714p4638731.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From josh.m.ulrich at gmail.com  Wed Aug  1 20:39:31 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Wed, 1 Aug 2012 13:39:31 -0500
Subject: [R-SIG-Finance] xts and Sys.time() - very stange behaviour
In-Reply-To: <1343844538969-4638728.post@n4.nabble.com>
References: <1343838146319-4638714.post@n4.nabble.com>
	<CABDUZc84d8jM2ePJ5n2kqS7bcb_iCQWiJokvmb8RVUYeoP8tDw@mail.gmail.com>
	<1343844538969-4638728.post@n4.nabble.com>
Message-ID: <CAPPM_gSLLeTqMVrW03A5gZuj4BCrAmYvYnDG5PPyLNoFaKkr2w@mail.gmail.com>

This is an issue with precision and formatting when you convert to
character.  Here's a truly reproducible example:

require(xts)
options(digits.secs=6)
x <- xts(1, .POSIXct(1343845073.618 + 1e-3))
# Note that the index is correct, given the construction above
sprintf("%15.5f",.index(x))
# But also note that it doesn't print "correctly"
# (due to rounding/precision issues)
print(x)
# You can see how it's actually stored by using format
key <- as.character(index(x), format="%Y-%m-%d %H:%M:%OS6")
# There's the problem
print(key)

I don't know of a solution, other than "don't do that".

Best,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Wed, Aug 1, 2012 at 1:08 PM, soren wilkening <me at censix.com> wrote:
> require(xts)
> options(digits.secs=3)
>
> ob <- xts(as.matrix(t(c("aa", "bb"))), order.by = as.POSIXct("2000-01-31
> 13:45:02.437") )
> #get t0 as an arbitrary timestamp, with subsecond accuracy, truncated to
> microseconds
> t0 <- as.POSIXct( strftime(Sys.time(), "%Y-%m-%d %H:%M:%OS3") )
> #add a microsecond
> ordertime1 <- t0 + 1e-3
> neworder <- xts(as.matrix(t(c('aaaa', 'bbbb'))), order.by = (ordertime1))
> ob <- rbind(ob,neworder)
> key <- as.character(index(neworder))
>
> #returns 1 row
> ob[ "2000-01-31 13:45:02.437" ]
>
> # sometimes returns nothing ???
> ob[ key ]
>
>
>
>
>
> The last line should normally return the last row of 'ob'. If I run the
> entire code snippet about 5 times
> I get at least one run where it returns an empty row. But that should never
> happen.?! Here is my sessionInfo.
>
> 1> sessionInfo()
> R version 2.12.0 (2010-10-15)
> Platform: i686-pc-linux-gnu (32-bit)
>
> locale:
>  [1] LC_CTYPE=en_US.utf8       LC_NUMERIC=C
>  [3] LC_TIME=en_US.utf8        LC_COLLATE=en_US.utf8
>  [5] LC_MONETARY=C             LC_MESSAGES=en_US.utf8
>  [7] LC_PAPER=en_US.utf8       LC_NAME=C
>  [9] LC_ADDRESS=C              LC_TELEPHONE=C
> [11] LC_MEASUREMENT=en_US.utf8 LC_IDENTIFICATION=C
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] xts_0.7-6.9 zoo_1.7-0
>
> loaded via a namespace (and not attached):
> [1] grid_2.12.0     lattice_0.19-13
>
>
> I have just noticed that when I change the line:
> ordertime1 <- t0 + 1e-3
> to
> ordertime1 <- t0
> Things seem to work fine. That however is not a solution since the addition
> is an essential component here.
>
>
>
> -----
> http://censix.com
> --
> View this message in context: http://r.789695.n4.nabble.com/xts-and-Sys-time-very-stange-behaviour-tp4638714p4638728.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From brian at braverock.com  Wed Aug  1 20:57:23 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 01 Aug 2012 13:57:23 -0500
Subject: [R-SIG-Finance] xts and Sys.time() - very stange behaviour
In-Reply-To: <CAPPM_gSLLeTqMVrW03A5gZuj4BCrAmYvYnDG5PPyLNoFaKkr2w@mail.gmail.com>
References: <1343838146319-4638714.post@n4.nabble.com>
	<CABDUZc84d8jM2ePJ5n2kqS7bcb_iCQWiJokvmb8RVUYeoP8tDw@mail.gmail.com>
	<1343844538969-4638728.post@n4.nabble.com>
	<CAPPM_gSLLeTqMVrW03A5gZuj4BCrAmYvYnDG5PPyLNoFaKkr2w@mail.gmail.com>
Message-ID: <50197C13.1000006@braverock.com>

On 08/01/2012 01:39 PM, Joshua Ulrich wrote:
> This is an issue with precision and formatting when you convert to
> character.
<...>
> I don't know of a solution, other than "don't do that".

I found that keeping the POSIXct object, and modifying that directly, 
massively improves both speed and correctness of matching over using the 
character representation with sub-second data.  This of course makes 
sense, as you are matching a number to a number, rather than a number to 
a string converted to a number.

Regards,

    - Brian


From me at censix.com  Wed Aug  1 21:40:27 2012
From: me at censix.com (soren wilkening)
Date: Wed, 1 Aug 2012 12:40:27 -0700 (PDT)
Subject: [R-SIG-Finance] xts and Sys.time() - very stange behaviour
In-Reply-To: <CAPPM_gSLLeTqMVrW03A5gZuj4BCrAmYvYnDG5PPyLNoFaKkr2w@mail.gmail.com>
References: <1343838146319-4638714.post@n4.nabble.com>
	<CABDUZc84d8jM2ePJ5n2kqS7bcb_iCQWiJokvmb8RVUYeoP8tDw@mail.gmail.com>
	<1343844538969-4638728.post@n4.nabble.com>
	<CAPPM_gSLLeTqMVrW03A5gZuj4BCrAmYvYnDG5PPyLNoFaKkr2w@mail.gmail.com>
Message-ID: <1343850027165-4638743.post@n4.nabble.com>

ok. I understand now that I will have to rewrite some of my code , in order
to avoid using character representations of POSIXct objects at all cost,
except for maybe text output etc.

Thanks everyone.

PD: I have arrived in the present and updated to R 2.15.1 :)



-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/xts-and-Sys-time-very-stange-behaviour-tp4638714p4638743.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From jeff.a.ryan at gmail.com  Wed Aug  1 22:00:38 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 1 Aug 2012 15:00:38 -0500
Subject: [R-SIG-Finance] xts and Sys.time() - very stange behaviour
In-Reply-To: <50197C13.1000006@braverock.com>
References: <1343838146319-4638714.post@n4.nabble.com>
	<CABDUZc84d8jM2ePJ5n2kqS7bcb_iCQWiJokvmb8RVUYeoP8tDw@mail.gmail.com>
	<1343844538969-4638728.post@n4.nabble.com>
	<CAPPM_gSLLeTqMVrW03A5gZuj4BCrAmYvYnDG5PPyLNoFaKkr2w@mail.gmail.com>
	<50197C13.1000006@braverock.com>
Message-ID: <CABDUZc8DDmr0pHPBy+7hbDcFpZqNi6BQLUpJZSUaooc4RmWUEg@mail.gmail.com>

On Wed, Aug 1, 2012 at 1:57 PM, Brian G. Peterson <brian at braverock.com> wrote:
> On 08/01/2012 01:39 PM, Joshua Ulrich wrote:
>>
>> This is an issue with precision and formatting when you convert to
>> character.
>
> <...>
>
>> I don't know of a solution, other than "don't do that".
>
>
> I found that keeping the POSIXct object, and modifying that directly,
> massively improves both speed and correctness of matching over using the
> character representation with sub-second data.  This of course makes sense,
> as you are matching a number to a number, rather than a number to a string
> converted to a number.

Note that this isn't likely the cause, unless you are concurrently
doing something like as.character(index(x))=="2001-01-01 08:30:01.999"
with an xts object.  That will convert the internal representation of
the _entire_ index from double to "time", whatever class that may be,
and then to character!.

If you use xts subsetting itself, the 'character' turns into a POSIXct
for the value you are trying to match against.  So you only incur
_one_ conversion (instantaneous).  This numeric value is then search
for via binary search (i.e. O(log n) cost - more or less).  For
anything like tick data, binary search is going to be much faster than
a linear scan.

Anyway, all the above still fails you if you catch a floating point
issue.  I've got some ideas (no code) on a better way to do this of
course...

Jeff
>
> Regards,
>
>    - Brian
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From daniel.cegielka at gmail.com  Wed Aug  1 22:22:50 2012
From: daniel.cegielka at gmail.com (=?ISO-8859-2?Q?Daniel_Cegie=B3ka?=)
Date: Wed, 1 Aug 2012 22:22:50 +0200
Subject: [R-SIG-Finance] xts and Sys.time() - very stange behaviour
In-Reply-To: <CABDUZc8DDmr0pHPBy+7hbDcFpZqNi6BQLUpJZSUaooc4RmWUEg@mail.gmail.com>
References: <1343838146319-4638714.post@n4.nabble.com>
	<CABDUZc84d8jM2ePJ5n2kqS7bcb_iCQWiJokvmb8RVUYeoP8tDw@mail.gmail.com>
	<1343844538969-4638728.post@n4.nabble.com>
	<CAPPM_gSLLeTqMVrW03A5gZuj4BCrAmYvYnDG5PPyLNoFaKkr2w@mail.gmail.com>
	<50197C13.1000006@braverock.com>
	<CABDUZc8DDmr0pHPBy+7hbDcFpZqNi6BQLUpJZSUaooc4RmWUEg@mail.gmail.com>
Message-ID: <CAPLrYEQ29ybmJ=Kt_ZmAPb+zZpyV5ONK2xvMD0B+idZ6bAQTiQ@mail.gmail.com>

> Note that this isn't likely the cause, unless you are concurrently
> doing something like as.character(index(x))=="2001-01-01 08:30:01.999"
> with an xts object.  That will convert the internal representation of
> the _entire_ index from double to "time", whatever class that may be,
> and then to character!.
>
> If you use xts subsetting itself, the 'character' turns into a POSIXct
> for the value you are trying to match against.  So you only incur
> _one_ conversion (instantaneous).  This numeric value is then search
> for via binary search (i.e. O(log n) cost - more or less).  For
> anything like tick data, binary search is going to be much faster than
> a linear scan.
>
> Anyway, all the above still fails you if you catch a floating point
> issue.  I've got some ideas (no code) on a better way to do this of
> course...

Interesting discussion. This can be solved by using a uint64_t for the
timestamp index (date+time) - fast binary search would be still
available. Package providing int64 types in R:

http://cran.r-project.org/web/packages/int64/index.html

Daniel


From yaoheling at gmail.com  Thu Aug  2 02:19:04 2012
From: yaoheling at gmail.com (Heling Yao)
Date: Thu, 2 Aug 2012 08:19:04 +0800
Subject: [R-SIG-Finance] xts and Sys.time() - very stange behaviour
In-Reply-To: <CAPLrYEQ29ybmJ=Kt_ZmAPb+zZpyV5ONK2xvMD0B+idZ6bAQTiQ@mail.gmail.com>
References: <1343838146319-4638714.post@n4.nabble.com>
	<CABDUZc84d8jM2ePJ5n2kqS7bcb_iCQWiJokvmb8RVUYeoP8tDw@mail.gmail.com>
	<1343844538969-4638728.post@n4.nabble.com>
	<CAPPM_gSLLeTqMVrW03A5gZuj4BCrAmYvYnDG5PPyLNoFaKkr2w@mail.gmail.com>
	<50197C13.1000006@braverock.com>
	<CABDUZc8DDmr0pHPBy+7hbDcFpZqNi6BQLUpJZSUaooc4RmWUEg@mail.gmail.com>
	<CAPLrYEQ29ybmJ=Kt_ZmAPb+zZpyV5ONK2xvMD0B+idZ6bAQTiQ@mail.gmail.com>
Message-ID: <CAF157htoTR1-q=zq=8R+sUWd-k2sZSPz5Nc30bsUGpyXDQ75Hw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120802/58b08e65/attachment.pl>

From john.kerpel at gmail.com  Thu Aug  2 17:37:44 2012
From: john.kerpel at gmail.com (John Kerpel)
Date: Thu, 2 Aug 2012 10:37:44 -0500
Subject: [R-SIG-Finance] Rbbg Java out-of-heap-space error
Message-ID: <CAALU2hvxqFOh_AvkSTHG8mYbe4B9e0C079rvqO9oBhbcUCqwjQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120802/5ad5f77e/attachment.pl>

From john.laing at gmail.com  Thu Aug  2 18:06:18 2012
From: john.laing at gmail.com (John Laing)
Date: Thu, 2 Aug 2012 12:06:18 -0400
Subject: [R-SIG-Finance] Rbbg Java out-of-heap-space error
In-Reply-To: <CAALU2hvxqFOh_AvkSTHG8mYbe4B9e0C079rvqO9oBhbcUCqwjQ@mail.gmail.com>
References: <CAALU2hvxqFOh_AvkSTHG8mYbe4B9e0C079rvqO9oBhbcUCqwjQ@mail.gmail.com>
Message-ID: <CAA3Wa=vCA09R3aniT_4aUAL9+0vd7UOsx7kFGH_oNez8SRVutw@mail.gmail.com>

John,

I've done some work on a patch for this issue, but as I've never
encountered it myself I have no good way to test. Can you send an
example of the sort of data you're pulling that triggers the memory
error?

-John

On Thu, Aug 2, 2012 at 11:37 AM, John Kerpel <john.kerpel at gmail.com> wrote:
> I'm getting the same Java out-of-heap-space error some others have
> mentioned on this list.  Is there a workaround?  Code that used to work no
> longer does and I'm clueless about these kinds of issues.
>
> Thanks for your help!
>
> John
>
>
>> sessionInfo()R version 2.15.1 (2012-06-22)
> Platform: x86_64-pc-mingw32/x64 (64-bit)
>
> locale:
> [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
> States.1252    LC_MONETARY=English_United States.1252
> [4] LC_NUMERIC=C                           LC_TIME=English_United
> States.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
>  [1] Rbbg_0.4-153
> loaded via a namespace (and not attached):
> [1] grid_2.15.1    lattice_0.20-6 tools_2.15.1
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From thomas.fuller at coherentlogic.com  Thu Aug  2 19:34:37 2012
From: thomas.fuller at coherentlogic.com (Thomas P. Fuller)
Date: Thu, 2 Aug 2012 10:34:37 -0700 (PDT)
Subject: [R-SIG-Finance] Would you be interested in testing an R package for
	receiving market data from Thomson Reuters?
Message-ID: <1343928877.98814.YahooMailNeo@web2819.biz.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120802/06e30689/attachment.pl>

From stuart.greenlee at gmail.com  Thu Aug  2 23:20:17 2012
From: stuart.greenlee at gmail.com (sgreenl2)
Date: Thu, 2 Aug 2012 14:20:17 -0700 (PDT)
Subject: [R-SIG-Finance] Better Hedge Ratios for Spread Trading
In-Reply-To: <1322617655.14637.YahooMailNeo@web65908.mail.ac4.yahoo.com>
References: <6D6B3AA826544E20BB09E056163FD4DE@XI>
	<CA+xi=qaGrK88hOtxmHi+NZ0r4morfOS7+4y4gA01OVtPeEgdGQ@mail.gmail.com>
	<CA+xi=qZ0ZdGnjowjc5sB+x0A0axa--=Hza+Tr06ydahFd_4QFg@mail.gmail.com>
	<1322617655.14637.YahooMailNeo@web65908.mail.ac4.yahoo.com>
Message-ID: <1343942417581-4638960.post@n4.nabble.com>

Paul,

Thank you very much for this simple way to get TLS ratios. Do you have any
examples of a multiple-leg TLS ratio calculation? 





--
View this message in context: http://r.789695.n4.nabble.com/Better-Hedge-Ratios-for-Spread-Trading-tp4120156p4638960.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From dannyd49 at gmail.com  Fri Aug  3 00:16:07 2012
From: dannyd49 at gmail.com (Danny D)
Date: Thu, 2 Aug 2012 18:16:07 -0400
Subject: [R-SIG-Finance] Quantstrat's TxnFees argument providing error when
 pennyPerShare function is passed
Message-ID: <CAB_TmjVpZwsUJfi0_i3HTwiwZLY7cit0O4c_vfk5UghYfQdnyg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120802/3087cea1/attachment.pl>

From josh.m.ulrich at gmail.com  Fri Aug  3 01:43:10 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 2 Aug 2012 18:43:10 -0500
Subject: [R-SIG-Finance] Would you be interested in testing an R package
 for receiving market data from Thomson Reuters?
In-Reply-To: <1343928877.98814.YahooMailNeo@web2819.biz.mail.ne1.yahoo.com>
References: <1343928877.98814.YahooMailNeo@web2819.biz.mail.ne1.yahoo.com>
Message-ID: <CAPPM_gSi6zOQw3OtDo5yPxPzWvH2gJdm5f0Kx1mguoBv7Lzmgg@mail.gmail.com>

Hi Tom,

On Thu, Aug 2, 2012 at 12:34 PM, Thomas P. Fuller
<thomas.fuller at coherentlogic.com> wrote:
> Hi Folks,
>
>
> We are currently developing a package, called the Coherent Datafeed, for accessing real-time market data from Thomson Reuters using the R
> Project for Statistical Computing.
>
> I'd like to ask the members in this group if they would like to help test this software?
>
> If you're interested in helping, it would be nice if you could follow
> the Twitter account we have set up for this (@CoherentMktData), and
> we'll let you know when it's available (should be late Q3 or early Q4 of
>  this year); the link below includes more information.
>
> http://www.coherentlogic.com/wordpress/?page_id=1575
>
> If you don't use Twitter, you can always respond to this discussion, or send an email, and let me know.
>
> You will need to have a Thomson Reuters account in order to use this software.
>
You will also need a license to use the Coherent Datafeed package,
correct?  Will the license for beta-testers continue to be free after
the product is launched?

> If you're reading this and you don't use Thomson Reuters, but like the
> idea and would like a package written for another datafeed provider,
> please do let me know as this would be very helpful information (we're
> planning to write a package for Bloomberg too).
>
>
> Questions and comments are welcomed.
>
> Thanks,
>
>
> Tom
>
>
> Thomas P. Fuller,  MSc
> Managing Director
>
> Coherent Logic Limited
> High Performance  Software Engineering
>
> thomas.fuller at coherentlogic.com
> IM:  thospfuller (Yahoo)
>
> Registered in England, #05560634
>
>
>
> 145-157 St.  John Street
> London, EC1V 4PY United Kingdom
>
> work:   44.[0]207.788.7654
> mobile:  44.[0]781.828.7465
>         [[alternative HTML version deleted]]
>
>

Best,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From thomas.fuller at coherentlogic.com  Fri Aug  3 12:34:07 2012
From: thomas.fuller at coherentlogic.com (Thomas P. Fuller)
Date: Fri, 3 Aug 2012 03:34:07 -0700 (PDT)
Subject: [R-SIG-Finance] Would you be interested in testing an R package
	for receiving market data from Thomson Reuters?
In-Reply-To: <CAPPM_gSi6zOQw3OtDo5yPxPzWvH2gJdm5f0Kx1mguoBv7Lzmgg@mail.gmail.com>
References: <1343928877.98814.YahooMailNeo@web2819.biz.mail.ne1.yahoo.com>
	<CAPPM_gSi6zOQw3OtDo5yPxPzWvH2gJdm5f0Kx1mguoBv7Lzmgg@mail.gmail.com>
Message-ID: <1343990047.16542.YahooMailNeo@web2812.biz.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120803/29a14fc7/attachment.pl>

From roger.bos at rothschild.com  Fri Aug  3 16:16:44 2012
From: roger.bos at rothschild.com (Bos, Roger)
Date: Fri, 3 Aug 2012 14:16:44 +0000
Subject: [R-SIG-Finance] Downloading data from ALFRED (ArchivaL FRED)
Message-ID: <0765308CD028654885F30322557308D82D815D@NYCSM0208.rth.ad.rothschild.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120803/346d50e9/attachment.pl>

From pgilbert902 at gmail.com  Fri Aug  3 16:35:34 2012
From: pgilbert902 at gmail.com (Paul Gilbert)
Date: Fri, 03 Aug 2012 10:35:34 -0400
Subject: [R-SIG-Finance] Downloading data from ALFRED (ArchivaL FRED)
In-Reply-To: <0765308CD028654885F30322557308D82D815D@NYCSM0208.rth.ad.rothschild.com>
References: <0765308CD028654885F30322557308D82D815D@NYCSM0208.rth.ad.rothschild.com>
Message-ID: <501BE1B6.30002@gmail.com>

Roger

Michael Cassidy at the St Louis Fed is working on an R package to 
interface with their API, and I am sure he would be happy to know about 
your efforts, and possibly collaborate. His expertise may be more with 
the xml than the R, but that seems to be the part where you are stuck.

Paul

On 12-08-03 10:16 AM, Bos, Roger wrote:
> All,
>
> I know that quantmod has a function getSymbols to download data from the Fed's FRED database, but the Fed also has a second version of the FRED database called ALFRED that allows you to get data by vintage date (before revisions).  Is there a function to access that database?  I tried to modify the function but couldn't figure out the comparable URL for the ALFRED databse.
>
> So I took a look at their API offering ( http://api.stlouisfed.org/docs/fred/ ).  Its easy to use, but I am having trouble getting the resulting XML data into a data frame I can actually work with.  The code below works, but I am hesitant to give out my key, so I have XXXX'ed it out.  You can get an API key for free in less than 60 seconds.
>
> library(XML)
> fred.url <- "http://api.stlouisfed.org/fred/series/observations?series_id=PSAVERT&file_type=xml&output_type=2&observation_start=2012-03-28&observation_end=2012-06-28&vintage_date=1960-09-28&api_key=XXXX"
> doc <- xmlParse(fred.url)
> doc
> xmlToDataFrame(doc)
> out <- xmlToList(doc)
> unlist(out)
>
> Even without running the code, someone might be able to help me out.  The XML examples work so well, but it seems the XML output from the AFLRED site is slightly different.   Here is what it looks like:
>
>>   doc <- xmlParse(fred.url)
>
>>   doc
> <?xml version="1.0" encoding="utf-8"?>
> <observations realtime_start="2012-08-03" realtime_end="2012-08-03" observation_start="2012-03-28" observation_end="2012-06-28" units="lin" output_type="2" file_type="xml" order_by="observation_date" sort_order="asc" count="3" offset="0" limit="100000">
>    <observation date="2012-04-01" PSAVERT_20120803="3.6"/>
>    <observation date="2012-05-01" PSAVERT_20120803="4.0"/>
>    <observation date="2012-06-01" PSAVERT_20120803="4.4"/>
> </observations>
>
> That looks very reasonable to me, but when I try to convert it to a data frame, I get an error that 'data' must be of a vector type:
>
>> xmlToDataFrame(doc)
> Error in matrix(vals, length(nfields), byrow = TRUE) :
>    'data' must be of a vector type
>>
>
> xmlToList almost gets me there, and I could probably write some code to extract the data and put it into a data frame, but there is probably a much easier way and I am just missing something because this is my first time parsing XML.
>
>> out <- xmlToList(doc)
>
>>   out
> $observation
>              date PSAVERT_20120803
>      "2012-04-01"            "3.6"
>
> $observation
>              date PSAVERT_20120803
>      "2012-05-01"            "4.0"
>
> $observation
>              date PSAVERT_20120803
>      "2012-06-01"            "4.4"
>
> $.attrs
>      realtime_start       realtime_end  observation_start    observation_end              units        output_type
>        "2012-08-03"       "2012-08-03"       "2012-03-28"       "2012-06-28"              "lin"                "2"
>           file_type           order_by         sort_order              count             offset              limit
>               "xml" "observation_date"              "asc"                "3"                "0"           "100000"
>
>
> I am open to any advice anyone has.
>
> Thanks,
>
> Roger
>
>
>
> Roger J. Bos, CFA
> Rothschild Asset Management, Inc.
> Tel     +1 (212) 405-5471
> Email roger.bos at rothschild.com<mailto:roger.bos at rothschild.com>
> 1251 Avenue of the Americas, NY, NY  10020
>
>
> ***************************************************************
>
> This message is for the named person's use only. It may\...{{dropped:15}}
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From zach.mayer at gmail.com  Fri Aug  3 16:49:01 2012
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Fri, 3 Aug 2012 10:49:01 -0400
Subject: [R-SIG-Finance] Downloading data from ALFRED (ArchivaL FRED)
In-Reply-To: <0765308CD028654885F30322557308D82D815D@NYCSM0208.rth.ad.rothschild.com>
References: <0765308CD028654885F30322557308D82D815D@NYCSM0208.rth.ad.rothschild.com>
Message-ID: <CAEr64e_MYa=6YUziT0M4S6Yf2SCLMzf2A3GgRiQnidx9+zS3GA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120803/82e1014b/attachment.pl>

From thomas.fuller at coherentlogic.com  Fri Aug  3 17:05:45 2012
From: thomas.fuller at coherentlogic.com (Thomas P. Fuller)
Date: Fri, 3 Aug 2012 08:05:45 -0700 (PDT)
Subject: [R-SIG-Finance] Downloading data from ALFRED (ArchivaL FRED)
In-Reply-To: <CAEr64e_MYa=6YUziT0M4S6Yf2SCLMzf2A3GgRiQnidx9+zS3GA@mail.gmail.com>
References: <0765308CD028654885F30322557308D82D815D@NYCSM0208.rth.ad.rothschild.com>
	<CAEr64e_MYa=6YUziT0M4S6Yf2SCLMzf2A3GgRiQnidx9+zS3GA@mail.gmail.com>
Message-ID: <1344006345.204.YahooMailNeo@web2808.biz.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120803/d5c04650/attachment.pl>

From pgilbert902 at gmail.com  Fri Aug  3 20:03:27 2012
From: pgilbert902 at gmail.com (Paul Gilbert)
Date: Fri, 03 Aug 2012 14:03:27 -0400
Subject: [R-SIG-Finance] Would you be interested in testing an R package
 for receiving market data from Thomson Reuters?
In-Reply-To: <1343990047.16542.YahooMailNeo@web2812.biz.mail.ne1.yahoo.com>
References: <1343928877.98814.YahooMailNeo@web2819.biz.mail.ne1.yahoo.com>
	<CAPPM_gSi6zOQw3OtDo5yPxPzWvH2gJdm5f0Kx1mguoBv7Lzmgg@mail.gmail.com>
	<1343990047.16542.YahooMailNeo@web2812.biz.mail.ne1.yahoo.com>
Message-ID: <501C126F.9080508@gmail.com>

I am a bit confused about what one would need to pay for in the end, 
after the free testing. Does the "Coherent Datafeed package" include 
re-licencing of the API code from Reuters (possibly something from 
https://customers.reuters.com/developer/choosingtherightapi.aspx), or is 
that needed too, so the package is just the R part of the mix? I'm 
guessing it does not actually include data, for which one would need to 
pay Reuters?

Paul

On 12-08-03 06:34 AM, Thomas P. Fuller wrote:
> Hi Joshua,
>
> Thanks for your questions.
>
>
> Re: "You will also need a license to use the Coherent Datafeed package, correct?"
>
> This is correct.
>
>
> "Will the license for beta-testers continue to be free after the product is launched?"
>
>
> It's not our intention to keep this free forever for beta testers, and once the product goes to production it would make sense (IMO, of course) for users who continue to get value from it to convert to paying customers.
>
> Does this help?
>
> Tom
>
>
> Thomas P. Fuller,  MSc
> Managing Director
>
> Coherent Logic Limited
> High Performance  Software Engineering
>
> thomas.fuller at coherentlogic.com
> IM:  thospfuller (Yahoo)
>
> Registered in England, #05560634
>
>
>
> 145-157 St.  John Street
> London, EC1V 4PY United Kingdom
>
> work:   44.[0]207.788.7654
> mobile:  44.[0]781.828.7465
>
>
>
> ________________________________
>   From: Joshua Ulrich <josh.m.ulrich at gmail.com>
> To: Thomas P. Fuller <thomas.fuller at coherentlogic.com>
> Cc: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> Sent: Friday, 3 August 2012, 0:43
> Subject: Re: [R-SIG-Finance] Would you be interested in testing an R package for receiving market data from Thomson Reuters?
>
> Hi Tom,
>
> On Thu, Aug 2, 2012 at 12:34 PM, Thomas P. Fuller
> <thomas.fuller at coherentlogic.com> wrote:
>> Hi Folks,
>>
>>
>> We are currently developing a package, called the Coherent Datafeed, for accessing real-time market data from Thomson Reuters using the R
>> Project for Statistical Computing.
>>
>> I'd like to ask the members in this group if they would like to help test this software?
>>
>> If you're interested in helping, it would be nice if you could follow
>> the Twitter account we have set up for this (@CoherentMktData), and
>> we'll let you know when it's available (should be late Q3 or early Q4 of
>>    this year); the link below includes more information.
>>
>> http://www.coherentlogic.com/wordpress/?page_id=1575
>>
>> If you don't use Twitter, you can always respond to this discussion, or send an email, and let me know.
>>
>> You will need to have a Thomson Reuters account in order to use this software.
>>
> You will also need a license to use the Coherent Datafeed package,
> correct?  Will the license for beta-testers continue to be free after
> the product is launched?
>
>> If you're reading this and you don't use Thomson Reuters, but like the
>> idea and would like a package written for another datafeed provider,
>> please do let me know as this would be very helpful information (we're
>> planning to write a package for Bloomberg too).
>>
>>
>> Questions and comments are welcomed.
>>
>> Thanks,
>>
>>
>> Tom
>>
>>
>> Thomas P. Fuller,  MSc
>> Managing Director
>>
>> Coherent Logic Limited
>> High Performance  Software Engineering
>>
>> thomas.fuller at coherentlogic.com
>> IM:  thospfuller (Yahoo)
>>
>> Registered in England, #05560634
>>
>>
>>
>> 145-157 St.  John Street
>> London, EC1V 4PY United Kingdom
>>
>> work:   44.[0]207.788.7654
>> mobile:  44.[0]781.828.7465
>>           [[alternative HTML version deleted]]
>>
>>
>
> Best,
> --
> Joshua Ulrich  |  about.me/joshuaulrich
> FOSS Trading  |  www.fosstrading.com
> 	[[alternative HTML version deleted]]
>
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From thomas.fuller at coherentlogic.com  Fri Aug  3 21:32:54 2012
From: thomas.fuller at coherentlogic.com (Thomas P. Fuller)
Date: Fri, 3 Aug 2012 12:32:54 -0700 (PDT)
Subject: [R-SIG-Finance] Would you be interested in testing an R package
	for receiving market data from Thomson Reuters?
In-Reply-To: <501C126F.9080508@gmail.com>
References: <1343928877.98814.YahooMailNeo@web2819.biz.mail.ne1.yahoo.com>
	<CAPPM_gSi6zOQw3OtDo5yPxPzWvH2gJdm5f0Kx1mguoBv7Lzmgg@mail.gmail.com>
	<1343990047.16542.YahooMailNeo@web2812.biz.mail.ne1.yahoo.com>
	<501C126F.9080508@gmail.com>
Message-ID: <1344022374.23540.YahooMailNeo@web2818.biz.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120803/80f1e5d1/attachment.pl>

From matt at considine.net  Sat Aug  4 18:30:58 2012
From: matt at considine.net (Matt Considine)
Date: Sat, 04 Aug 2012 12:30:58 -0400
Subject: [R-SIG-Finance] Downloading data from ALFRED (ArchivaL FRED)
In-Reply-To: <mailman.2.1344074402.26688.r-sig-finance@r-project.org>
References: <mailman.2.1344074402.26688.r-sig-finance@r-project.org>
Message-ID: <501D4E42.3040007@considine.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120804/6c4e7bef/attachment.pl>

From dougedmunds at gmail.com  Sat Aug  4 23:44:48 2012
From: dougedmunds at gmail.com (Doug Edmunds)
Date: Sat, 04 Aug 2012 14:44:48 -0700
Subject: [R-SIG-Finance] Differences between data sources
Message-ID: <501D97D0.4060200@gmail.com>

Can someone explain why there are differences between Google and Yahoo 
in openings, lows, volume) are occurring, and which source is correct? 
(data downloaded 2012-08-04 2:40pm PDT)

 > library("blotter")
Loading required package: xts
Loading required package: zoo

Attaching package: ?zoo?

The following object(s) are masked from ?package:base?:

     as.Date, as.Date.numeric

Loading required package: FinancialInstrument
Loading required package: quantmod
Loading required package: Defaults
Loading required package: TTR
 > getSymbols("IBM", from="2012-08-01", src="yahoo")
[1] "IBM"
Warning message:
In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
   downloaded length 258 != reported length 200
 > IBM
            IBM.Open IBM.High IBM.Low IBM.Close IBM.Volume IBM.Adjusted
2012-08-01   196.96   197.85  194.72    195.18    2559300       195.18
2012-08-02   194.16   196.60  193.02    194.45    2812600       194.45
2012-08-03   196.48   198.95  196.16    198.50    2668200       198.52
2012-08-03   196.48   198.95  196.16    198.52    3278100       198.52
 > getSymbols("IBM", from="2012-08-01", src="google")
[1] "IBM"
Warning message:
In download.file(paste(google.URL, "q=", Symbols.name, "&startdate=",  :
   downloaded length 169 != reported length 200
 > IBM
            IBM.Open IBM.High IBM.Low IBM.Close IBM.Volume
2012-08-01   196.96   197.85  194.72    195.18    2559365
2012-08-02   194.12   196.60  193.02    194.45    2812511
2012-08-03   196.73   198.95  196.18    198.52     736918


From junzhu98 at yahoo.com  Sun Aug  5 06:15:58 2012
From: junzhu98 at yahoo.com (Jun Zhu)
Date: Sat, 4 Aug 2012 21:15:58 -0700 (PDT)
Subject: [R-SIG-Finance] Differences between data sources
In-Reply-To: <501D97D0.4060200@gmail.com>
Message-ID: <1344140158.90152.YahooMailClassic@web125204.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120804/aa2fa664/attachment.pl>

From s.n.stoyanov at gmail.com  Mon Aug  6 16:11:22 2012
From: s.n.stoyanov at gmail.com (stoyan.stoyanov)
Date: Mon, 6 Aug 2012 07:11:22 -0700 (PDT)
Subject: [R-SIG-Finance] Modeling sharp drops in volatility
Message-ID: <1344262282476-4639284.post@n4.nabble.com>

Hi all,

This is less of a programming question and more of a theoretical issue, but
hopefully someone can help. How would you suggest going about modeling a
sharp drop in volatility using a univariate GARCH model? What I am trying to
capture is the overstatement of volatility forecasts that occurs after
earnings announcements. As you surely know, the memory of GARCH models
incorporates recent (and not so recent) swings in volatility into the
variance of the stock price process. As a result, in the periods following
an earnings event volatility forecasts will be severely overstated.
I have been able to predict future increases in volatility owed to an
earnings event, through a binary event day dummy. However, the effects of
such single big moves persist in my process much longer than they should.
Instead of having my GARCH model take an isolated big move as significant
information affecting volatility in future periods, I am trying to model a
very sharp reversal back to levels observed before the earnings event.
I guess this is to be expected with GARCH models, but I am wondering if
there is a common technique to deal with this.

I am using the rugarch package to do build my model.

Thanks in advance for any suggestions.

Stoyan



-----
Stoyan Stoyanov
The University of Chicago Booth School of Business
MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context: http://r.789695.n4.nabble.com/Modeling-sharp-drops-in-volatility-tp4639284.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From dannyd49 at gmail.com  Tue Aug  7 07:32:47 2012
From: dannyd49 at gmail.com (Danny D)
Date: Tue, 7 Aug 2012 01:32:47 -0400
Subject: [R-SIG-Finance] pennyPerShare function not working with Quantstrat
	rules
Message-ID: <CAB_TmjVcYWOdYT7X7HgE41y4RA5UButQifBfbrGTMag8Um0zqA@mail.gmail.com>

Hello,

I have been trying to figure out why the TxnFees argument does not
evaluate the pennyPerShare function when it is passed via add.rule. I
receive the following error..

out<-try(applyStrategy(strategy=stratBBands ,
portfolios='bbands',parameters=list(sd=SD,n=N)) )
Error in rbind(deparse.level, ...) :
  (list) object cannot be coerced to type 'double'
In addition: Warning messages:
1: In rbind(deparse.level, ...) :
  mismatched types: converting objects to numeric
2: In rbind(deparse.level, ...) : NAs introduced by coercion

I am using the BBands demo to demonstrate below.

Am I doing something wrong or is there something wrong with the code?
Thank you for taking the time to help.

I am using R (2.15.1 x64), Quantstrat (0.6.8), blotter (0.8.10),
FinancialInstrument (0.15.2)

Dan



require(quantstrat)
suppressWarnings(rm("order_book.bbands",pos=.strategy))
suppressWarnings(rm("account.bbands","portfolio.bbands",pos=.blotter))
suppressWarnings(rm("account.st","portfolio.st","stock.str","stratBBands","initDate","initEq",'start_t','end_t'))

# some things to set up here
stock.str='IBM' # what are we trying it on

# we'll pass these
SD = 2 # how many standard deviations, traditionally 2
N = 20 # how many periods for the moving average, traditionally 20


currency('USD')
stock(stock.str,currency='USD',multiplier=1)

 initDate='2006-12-31'
initEq=1000000

portfolio.st='bbands'
account.st='bbands'

initPortf(portfolio.st,symbols=stock.str, initDate=initDate)
initAcct(account.st,portfolios='bbands', initDate=initDate)
initOrders(portfolio=portfolio.st,initDate=initDate)
addPosLimit(portfolio.st, stock.str, initDate, 200, 2 ) #set max pos
stratBBands <- strategy("bbands")

#one indicator
stratBBands <- add.indicator(strategy = stratBBands, name = "BBands",
arguments = list(HLC = quote(HLC(mktdata)), maType='SMA'))


#add signals:
stratBBands <- add.signal(stratBBands,name="sigCrossover",arguments =
list(columns=c("Close","up"),relationship="gt"),label="Cl.gt.UpperBand")
stratBBands <- add.signal(stratBBands,name="sigCrossover",arguments =
list(columns=c("Close","dn"),relationship="lt"),label="Cl.lt.LowerBand")
stratBBands <- add.signal(stratBBands,name="sigCrossover",arguments =
list(columns=c("High","Low","mavg"),relationship="op"),label="Cross.Mid")

# lets add some rules
stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
list(sigcol="Cl.gt.UpperBand",sigval=TRUE, orderqty=-100,
ordertype='market', orderside=NULL, threshold=NULL,osFUN=osMaxPos,
TxnFees=pennyPerShare),type='enter')
stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
list(sigcol="Cl.lt.LowerBand",sigval=TRUE, orderqty= 100,
ordertype='market', orderside=NULL, threshold=NULL,osFUN=osMaxPos,
TxnFees=pennyPerShare),type='enter')
stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
list(sigcol="Cross.Mid",sigval=TRUE, orderqty= 'all',
ordertype='market', orderside=NULL, threshold=NULL,osFUN=osMaxPos,
TxnFees=pennyPerShare),type='exit')

#alternately, to exit at the opposite band, the rules would be...
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
list(data=quote(mktdata),sigcol="Lo.gt.UpperBand",sigval=TRUE,
orderqty= 'all', ordertype='market', orderside=NULL,
threshold=NULL),type='exit')
#stratBBands <- add.rule(stratBBands,name='ruleSignal', arguments =
list(data=quote(mktdata),sigcol="Hi.lt.LowerBand",sigval=TRUE,
orderqty= 'all', ordertype='market', orderside=NULL,
threshold=NULL),type='exit')

#TODO add thresholds and stop-entry and stop-exit handling to test

getSymbols(stock.str,from=initDate,index.class=c('POSIXt','POSIXct'))
start_t<-Sys.time()
out<-try(applyStrategy(strategy=stratBBands ,
portfolios='bbands',parameters=list(sd=SD,n=N)) )

# look at the order book
#getOrderBook('bbands')
end_t<-Sys.time()
print("strat execution time:")
print(end_t-start_t)

start_t<-Sys.time()
updatePortf(Portfolio='bbands',Dates=paste('::',as.Date(Sys.time()),sep=''))
end_t<-Sys.time()
print("updatePortf execution time:")
print(end_t-start_t)

chart.Posn(Portfolio='bbands',Symbol=stock.str)
plot(add_BBands(on=1,sd=SD,n=N))


From brian at braverock.com  Tue Aug  7 10:39:44 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Tue, 07 Aug 2012 03:39:44 -0500
Subject: [R-SIG-Finance] pennyPerShare function not working with
 Quantstrat rules
In-Reply-To: <CAB_TmjVcYWOdYT7X7HgE41y4RA5UButQifBfbrGTMag8Um0zqA@mail.gmail.com>
References: <CAB_TmjVcYWOdYT7X7HgE41y4RA5UButQifBfbrGTMag8Um0zqA@mail.gmail.com>
Message-ID: <5020D450.3010307@braverock.com>

On 08/07/2012 12:32 AM, Danny D wrote:
> I have been trying to figure out why the TxnFees argument does not
> evaluate the pennyPerShare function when it is passed via add.rule. I
> receive the following error..
>
> out<-try(applyStrategy(strategy=stratBBands ,
> portfolios='bbands',parameters=list(sd=SD,n=N)) )
> Error in rbind(deparse.level, ...) :
>    (list) object cannot be coerced to type 'double'
> In addition: Warning messages:
> 1: In rbind(deparse.level, ...) :
>    mismatched types: converting objects to numeric
> 2: In rbind(deparse.level, ...) : NAs introduced by coercion
>
> I am using the BBands demo to demonstrate below.
>
> Am I doing something wrong or is there something wrong with the code?
> Thank you for taking the time to help.

It's a bug (more precisely a missing feature).  We'll try to fix this week.

addTxn takes either a numeric TxnFees argument or a function.  It does 
not evaluate a string *name* of a function to locate the function via 
match.fun.  We'll try to add that feature shortly.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From Olivier.Martin at avignon.inra.fr  Tue Aug  7 18:22:28 2012
From: Olivier.Martin at avignon.inra.fr (Olivier MARTIN)
Date: Tue, 07 Aug 2012 18:22:28 +0200
Subject: [R-SIG-Finance] about quantmod and shaded region
Message-ID: <502140C4.3010706@avignon.inra.fr>

Hi all,

I am a new user of quantmod package (version 0.3-8) and I have some 
problems.
I would like to add shaded regions to a chart.

1. I tried the following commands  (from slide presentation of Jeff Ryan)

getSymbols('^FCHI',source="yahoo")
CAC=FCHI
candleChart(CAC,theme="white",subset='2012-05::2012-08',TA=NULL)
addTA(RSI(Cl(CAC))>50,col="green",border=NA,on=-1)
addTA(RSI(Cl(CAC))>40 & RSI(Cl(CAC))<50 ,col="red",border=NA,on=-1)
addTA(RSI(Cl(CAC)) ,on=NA)

So the first region RSI(Cl(CAC))>50 is correctly shaded, but the second 
region
RSI(Cl(CAC))>40 & RSI(Cl(CAC))<50 isn't. So I supposed a bug with 
bollean vectors
with addTA() ?


2. On the web, I found a mail from Jeff Ryan and he proposed to use the 
function xts()

>times <- timeBasedSeq(20071001/2007)  # create a Date sequence from 2007-10-01 to 2007-12-31
>addTA(xts(rep(TRUE,length(times)), times), on=-1, col="#333333", border=NA)

Nevertheless, this command gives me an error concerning the function rect().


3. I also tried to use the function newAT() without success.. :-(


Best Regards,
O.


From Samuel.Meichtry at bkw-fmb.ch  Wed Aug  8 11:41:27 2012
From: Samuel.Meichtry at bkw-fmb.ch (Samuel.Meichtry at bkw-fmb.ch)
Date: Wed, 8 Aug 2012 09:41:27 +0000
Subject: [R-SIG-Finance] Conditional Regression in Gnu R?
Message-ID: <201208080941.q789fV6t006501@hypatia.math.ethz.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120808/75098915/attachment.pl>

From j_cuisinier at hotmail.com  Wed Aug  8 12:11:51 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Wed, 8 Aug 2012 12:11:51 +0200
Subject: [R-SIG-Finance] Conditional Regression in Gnu R?
In-Reply-To: <201208080941.q789fV6t006501@hypatia.math.ethz.ch>
References: <201208080941.q789fV6t006501@hypatia.math.ethz.ch>
Message-ID: <COL102-W39A48847E7967CCB6355458FCD0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120808/cfea0dea/attachment.pl>

From Samuel.Meichtry at bkw-fmb.ch  Wed Aug  8 13:30:03 2012
From: Samuel.Meichtry at bkw-fmb.ch (Samuel.Meichtry at bkw-fmb.ch)
Date: Wed, 8 Aug 2012 11:30:03 +0000
Subject: [R-SIG-Finance] Conditional Regression in Gnu R?
In-Reply-To: <COL102-W39A48847E7967CCB6355458FCD0@phx.gbl>
References: <201208080941.q789fV6t006501@hypatia.math.ethz.ch>
	<COL102-W39A48847E7967CCB6355458FCD0@phx.gbl>
Message-ID: <201208081130.q78BU95R012677@hypatia.math.ethz.ch>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120808/4aef5992/attachment.pl>

From matt at considine.net  Wed Aug  8 15:45:20 2012
From: matt at considine.net (matt at considine.net)
Date: Wed, 08 Aug 2012 08:45:20 -0500
Subject: [R-SIG-Finance] Fiscal year version of table.CalendarReturns from
 PerformanceAnalytics
Message-ID: <20120808084520.10482k9zxrqnca5s@webmail.considine.net>

I needed to corroborate some fiscal year return numbers and turned to  
PerformanceAnalytics to see what was available.  table.CalendarReturns  
had the output I needed, but is set up for - predictably - calendar  
year returns.

Below is what I hacked up to output fiscal year returns.  The idea was  
to try to change the base code as little as possible and found I could  
accomplish that by playing with the date indexes and month labels.

Obviously, this is a kludge.  If anyone has more elegant ways or ideas  
of dealing with non-December fiscal years, I'd be interested in  
hearing about them.  In the meantime, I hope what's below helps  
someone (my changes are identified by "MattC").  If there are errors  
anyone sees, I'd appreciate hearing about them.
Rgds,
Matt

#e.g. table.FiscalReturns(total.ret,digits=2,FYendmonth=6)
#  to show table of returns to two digits for FYrs ending June using a
#  dataset named "total.ret"
table.FiscalReturns <- function(R, digits=1,
                                 as.perc=TRUE,
                                 geometric=TRUE,
                                 FYendmonth=6)  ##MattC
{
   ri = checkData(R, method = "zoo")
   columns = ncol(ri)
   columnnames = colnames(ri)
   rownames = rownames(ri)
   firstyear =  
as.numeric(format(strptime(as.POSIXct(time(ri)[1]),"%Y-%m-%d"), "%Y"))
   lastyear =  
as.numeric(format(strptime(as.POSIXct(time(ri)[length(ri[,1])]),  
"%Y-%m-%d"), "%Y"))
   #start MattC
   if (FYendmonth != 12) {
     firstyrmo =  
as.numeric(format(strptime(as.POSIXct(time(ri)[1]),"%Y-%m-%d"), "%m"))
     lastyrmo =  
as.numeric(format(strptime(as.POSIXct(time(ri)[length(ri[,1])]),  
"%Y-%m-%d"), "%m"))
     if (firstyrmo>FYendmonth) firstyear <- firstyear+1
     if (lastyrmo>FYendmonth) lastyear <- lastyear+1
     newdates<-as.Date(as.yearmon(index(ri))+(firstyrmo-FYendmonth)/12,frac=1)
     index(ri)<-newdates
   }
   #end MattC
   year = format(strptime(as.POSIXct(time(ri)), "%Y-%m-%d"),"%Y")
   month = format(strptime(as.POSIXct(time(ri)), "%Y-%m-%d"),"%b")
   monthlabels =  
strftime(seq.Date(as.Date(paste("2000-01-01",sep="")), length.out = 12,
                                 by = "months"), format = "%b")
   rowlabels = (firstyear:lastyear)
   for (column in 1:columns) {
     target.df = as.data.frame(matrix(data = as.numeric(NA),
                 length(rowlabels), length(monthlabels), dimnames =  
list(rowlabels, monthlabels)))
     for (i in 1:length(ri[, 1])) {
       if (!is.na(ri[i, column])) {
         target.df[year[i], month[i]] = ri[i, column]
       }
     }
     yearcol = as.data.frame(matrix(data = as.numeric(NA),
             length(rowlabels), 1, dimnames = list(rowlabels,  
columnnames[column])))
     for (i in 1:length(yearcol[, 1])) {
       if (geometric)
         yearcol[i, columnnames[column]] = prod(1 +  
na.omit(as.numeric(target.df[i,]))) - 1
       else yearcol[i, columnnames[column]] =  
sum(as.numeric(target.df[i,]), na.rm = TRUE)
       if (yearcol[i, columnnames[column]] == 0)
         yearcol[i, columnnames[column]] = NA
     }
     target.df = cbind(target.df, yearcol)
     if (as.perc)
       multiplier = 100
     else multiplier = 1
     target.df = target.df * multiplier
     target.df = base::round(target.df, digits)
     if (column == 1)
       result.df = target.df
     else {
       result.df = cbind(result.df, target.df[, 13])
     }
   }
   #start MattC
   if (FYendmonth != 12) {
     monthlabels =  
strftime(seq.Date(as.Date(paste("2000-",FYendmonth+1,"-01",sep="")),  
length.out = 12,  by = "months"), format = "%b")
   }
   #end MattC
   colnames(result.df) = c(monthlabels, columnnames)
   result.df
}


From Olivier.Martin at avignon.inra.fr  Wed Aug  8 17:05:11 2012
From: Olivier.Martin at avignon.inra.fr (Olivier MARTIN)
Date: Wed, 08 Aug 2012 17:05:11 +0200
Subject: [R-SIG-Finance] quantmod bug ?
Message-ID: <50228027.8030300@avignon.inra.fr>

Hi all,

I recently posted a problem concerning shaded regions with quantmod 
package. More precisely,
I used the function addTA with a boolean vector: for example
addTA(vecB,col="green",border=NA,on=-1)
where vecB is the boolean vector.

In some cases, the shading result was not conform
with the boolean vector. I checked the R source  program, and more
precisely the function chartTA() in TA.R file. So in the function
chartTA, it seems that there is a mistake with the vector x.pos.
the vector is given by
  x.pos <- 1 + spacing * (1:length(x.range))
and it seems that this vector should be
x.pos <- 1:(spacing*x.range[2])

So I hope this indication would be  relevant for people who work on
the improvements of this package.

Best regards.
O.


From brian at braverock.com  Wed Aug  8 17:11:21 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 08 Aug 2012 10:11:21 -0500
Subject: [R-SIG-Finance] quantmod bug ?
In-Reply-To: <50228027.8030300@avignon.inra.fr>
References: <50228027.8030300@avignon.inra.fr>
Message-ID: <50228199.8000002@braverock.com>

On 08/08/2012 10:05 AM, Olivier MARTIN wrote:
> I recently posted a problem concerning shaded regions with quantmod
> package. More precisely, I used the function addTA with a boolean vector:

As has been posted to this list many times in the past year, development 
of graphics in quantmod has moved wholly to chart_Series and add_TA, and 
the older chartSeries and addTA are unlikely to get much (any) 
attention.  The old code is just too difficult to maintain.

If you can replicate your problem with the newer functions, you're much 
more likely to get a response from someone with commit access to the code.

Regards,

   - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From gsee000 at gmail.com  Wed Aug  8 17:16:55 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 8 Aug 2012 10:16:55 -0500
Subject: [R-SIG-Finance] quantmod bug ?
In-Reply-To: <50228199.8000002@braverock.com>
References: <50228027.8030300@avignon.inra.fr> <50228199.8000002@braverock.com>
Message-ID: <CA+xi=qYm72AU8kGZEkSrZpEfS1eQyOFuRoTsng1nYPz0L=n1cA@mail.gmail.com>

chartSeries is on CRAN and ?chart_Series says it's "highly experimental."

IMHO it's really not fair to tell people that they should use
undocumented code.

Garrett

On Wed, Aug 8, 2012 at 10:11 AM, Brian G. Peterson <brian at braverock.com> wrote:
> On 08/08/2012 10:05 AM, Olivier MARTIN wrote:
>>
>> I recently posted a problem concerning shaded regions with quantmod
>> package. More precisely, I used the function addTA with a boolean vector:
>
>
> As has been posted to this list many times in the past year, development of
> graphics in quantmod has moved wholly to chart_Series and add_TA, and the
> older chartSeries and addTA are unlikely to get much (any) attention.  The
> old code is just too difficult to maintain.
>
> If you can replicate your problem with the newer functions, you're much more
> likely to get a response from someone with commit access to the code.
>
> Regards,
>
>   - Brian
>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From gsee000 at gmail.com  Wed Aug  8 17:18:07 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 8 Aug 2012 10:18:07 -0500
Subject: [R-SIG-Finance] quantmod bug ?
In-Reply-To: <CA+xi=qYm72AU8kGZEkSrZpEfS1eQyOFuRoTsng1nYPz0L=n1cA@mail.gmail.com>
References: <50228027.8030300@avignon.inra.fr> <50228199.8000002@braverock.com>
	<CA+xi=qYm72AU8kGZEkSrZpEfS1eQyOFuRoTsng1nYPz0L=n1cA@mail.gmail.com>
Message-ID: <CA+xi=qYKEZZm-U69DrwOoCFyq9XzUqFVJ8=qWrmV78XP7sD9cA@mail.gmail.com>

Also, shouldn't patches be encouraged?

On Wed, Aug 8, 2012 at 10:16 AM, G See <gsee000 at gmail.com> wrote:
> chartSeries is on CRAN and ?chart_Series says it's "highly experimental."
>
> IMHO it's really not fair to tell people that they should use
> undocumented code.
>
> Garrett


From jeff.a.ryan at gmail.com  Wed Aug  8 17:25:40 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Wed, 8 Aug 2012 10:25:40 -0500
Subject: [R-SIG-Finance] quantmod bug ?
In-Reply-To: <50228027.8030300@avignon.inra.fr>
References: <50228027.8030300@avignon.inra.fr>
Message-ID: <CABDUZc8KEP6NmmN84v6C2Y-8Wox1vvHDOgESX=7vL2uT2ACZJg@mail.gmail.com>

Hi O,

I'll check and patch.  CRAN is in desperate need of a quantmod update
- and one is coming.  For now though, the change to watch for will be
on R-forge.

Thanks!,
Jeff

On Wed, Aug 8, 2012 at 10:05 AM, Olivier MARTIN
<Olivier.Martin at avignon.inra.fr> wrote:
> Hi all,
>
> I recently posted a problem concerning shaded regions with quantmod package.
> More precisely,
> I used the function addTA with a boolean vector: for example
> addTA(vecB,col="green",border=NA,on=-1)
> where vecB is the boolean vector.
>
> In some cases, the shading result was not conform
> with the boolean vector. I checked the R source  program, and more
> precisely the function chartTA() in TA.R file. So in the function
> chartTA, it seems that there is a mistake with the vector x.pos.
> the vector is given by
>  x.pos <- 1 + spacing * (1:length(x.range))
> and it seems that this vector should be
> x.pos <- 1:(spacing*x.range[2])
>
> So I hope this indication would be  relevant for people who work on
> the improvements of this package.
>
> Best regards.
> O.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From David.Reiner at xrtrading.com  Wed Aug  8 18:17:46 2012
From: David.Reiner at xrtrading.com (David Reiner)
Date: Wed, 8 Aug 2012 11:17:46 -0500
Subject: [R-SIG-Finance] getEndOfMonth and getEndOfBizWeek in RcppBDT broken?
Message-ID: <9DE405308A6AA24AA794B76282C6C00F0DF265CEC1@HQ-POST1>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120808/29363b9a/attachment.pl>

From valapet.badri at gmail.com  Wed Aug  8 19:20:08 2012
From: valapet.badri at gmail.com (Valapet Badri)
Date: Wed, 8 Aug 2012 13:20:08 -0400
Subject: [R-SIG-Finance] Modeling sharp drops in volatility
Message-ID: <006101cd758a$101e24c0$305a6e40$@gmail.com>

Stoyan,
	Your question falls between theory and practical use of GARCH and
its stated and unstated use(vol forecasting, Risk, pricing prediction) . A
practical and common sense  approach followed in the industry is to look at
volatility for past X periods (days) and extrapolate factoring in news
impact (keep models simple) , MACRO scenarios as viewed by the Trader. This
is used commonly in systematic and manual trading scenarios. This type of
simplicity may not sit well in theoretical world -:)

As always, after all the theory crammed in MBA, FE or PhD program we should
not forget at the end of day,  we are trying to model and  "FORECAST  some
random variable". Please remember your basic assumption from your
"Stochastic process classes" in deriving your pricing equation of
derivatives, while performing modeling in the real world.

1, Price of an equity is modeled as a "stochastic process" 
2, Its not moving $0 - $Infinity every a day but are range bound behavior,
with varying ranges.
3, Enter the concept regime switching models and behavioral economics 

You see the basic assumption in theory falling apart already -:) Guess I
digressed quite a bit ..

My 2 cents worth...!

Badri

-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of stoyan.stoyanov
Sent: Monday, August 06, 2012 10:11 AM
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] Modeling sharp drops in volatility

Hi all,

This is less of a programming question and more of a theoretical issue, but
hopefully someone can help. How would you suggest going about modeling a
sharp drop in volatility using a univariate GARCH model? What I am trying to
capture is the overstatement of volatility forecasts that occurs after
earnings announcements. As you surely know, the memory of GARCH models
incorporates recent (and not so recent) swings in volatility into the
variance of the stock price process. As a result, in the periods following
an earnings event volatility forecasts will be severely overstated.
I have been able to predict future increases in volatility owed to an
earnings event, through a binary event day dummy. However, the effects of
such single big moves persist in my process much longer than they should.
Instead of having my GARCH model take an isolated big move as significant
information affecting volatility in future periods, I am trying to model a
very sharp reversal back to levels observed before the earnings event.
I guess this is to be expected with GARCH models, but I am wondering if
there is a common technique to deal with this.

I am using the rugarch package to do build my model.

Thanks in advance for any suggestions.

Stoyan



-----
Stoyan Stoyanov
The University of Chicago Booth School of Business MBA Class of 2013
(312) 532-0120 | stoyanov at chicagobooth.edu
--
View this message in context:
http://r.789695.n4.nabble.com/Modeling-sharp-drops-in-volatility-tp4639284.h
tml
Sent from the Rmetrics mailing list archive at Nabble.com.

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From edd at debian.org  Wed Aug  8 19:42:52 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 8 Aug 2012 12:42:52 -0500
Subject: [R-SIG-Finance] getEndOfMonth and getEndOfBizWeek in RcppBDT
	broken?
In-Reply-To: <9DE405308A6AA24AA794B76282C6C00F0DF265CEC1@HQ-POST1>
References: <9DE405308A6AA24AA794B76282C6C00F0DF265CEC1@HQ-POST1>
Message-ID: <20514.42268.459749.281815@max.nulle.part>


On 8 August 2012 at 11:17, David Reiner wrote:
| At least on my setup, they don't seem to work:
| 
| > getEndOfBizWeek(date=as.Date('2012-09-05'))
| [1] "2012-08-10"
| > getEndOfMonth(date=as.Date('2012-09-05'))
| [1] "2012-08-31"

Dang. The functions hang off a package-global instance of the BDT module
class, and that one doesn't seem to get updated from the date you feed. Not
good.

Workaround: init a new object using the explicit constructor with the date
you want and compute off that:

R> mynewdate <- new(bdtDate, 2012,9,5)
R> mynewdate
[1] "2012-09-05"
R> mynewdate$getEndOfBizWeek( )
[1] "2012-09-07"
R> mynewdate$getEndOfMonth( )
[1] "2012-09-30"
R> 
R> 

Dirk

 
| > sessionInfo()
| R version 2.15.1 Patched (2012-06-25 r59634)
| Platform: x86_64-pc-mingw32/x64 (64-bit)
| 
| locale:
| [1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United States.1252    LC_MONETARY=English_United States.1252
| [4] LC_NUMERIC=C                           LC_TIME=English_United States.1252
| 
| attached base packages:
| [1] stats     graphics  grDevices utils     datasets  methods   base
| 
| other attached packages:
| [1] RcppBDT_0.2.0 Rcpp_0.9.13
| 
| loaded via a namespace (and not attached):
| [1] codetools_0.2-8 tools_2.15.1
| 
| Many thanks to Dirk for all of his contributions to our community!
| (and to anyone else who can help here!)
| -- David
| 
| 
| 
| This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.
| 
| THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.
| 
| 	[[alternative HTML version deleted]]
| 
| _______________________________________________
| R-SIG-Finance at r-project.org mailing list
| https://stat.ethz.ch/mailman/listinfo/r-sig-finance
| -- Subscriber-posting only. If you want to post, subscribe first.
| -- Also note that this is not the r-help list where general R questions should go.

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From edd at debian.org  Wed Aug  8 20:01:33 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 8 Aug 2012 13:01:33 -0500
Subject: [R-SIG-Finance] getEndOfMonth and getEndOfBizWeek in RcppBDT
	broken?
In-Reply-To: <9DE405308A6AA24AA794B76282C6C00F0DF265CEC1@HQ-POST1>
References: <9DE405308A6AA24AA794B76282C6C00F0DF265CEC1@HQ-POST1>
Message-ID: <20514.43389.585379.780887@max.nulle.part>


Ok, bug found.  In the R file definining the convenience functions

getEndOfBizWeek <- function(date = Sys.Date()) {
    stopifnot(inherits(date, "Date"))
    bdt$getEndOfBizWeek(date)
}

getEndOfMonth <- function(date = Sys.Date()) {
    stopifnot(inherits(date, "Date"))
    bdt$getEndOfMonth(date)
}

both of these miss the crucial 

    bdt$fromDate(date)

to actually set the date you supply.  You could write yourself a local
variant til the updated package comes through.

Thanks for spotting this.

Dirk

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From David.Reiner at xrtrading.com  Wed Aug  8 23:01:29 2012
From: David.Reiner at xrtrading.com (David Reiner)
Date: Wed, 8 Aug 2012 16:01:29 -0500
Subject: [R-SIG-Finance] getEndOfMonth and getEndOfBizWeek in RcppBDT
 broken?
In-Reply-To: <20514.43389.585379.780887@max.nulle.part>
References: <9DE405308A6AA24AA794B76282C6C00F0DF265CEC1@HQ-POST1>
	<20514.43389.585379.780887@max.nulle.part>
Message-ID: <9DE405308A6AA24AA794B76282C6C00F0DF265CEE4@HQ-POST1>

Thanks, Dirk. You're the best!

-- David


-----Original Message-----
From: Dirk Eddelbuettel [mailto:edd at debian.org]
Sent: Wednesday, August 08, 2012 1:02 PM
To: David Reiner
Cc: r-sig-finance at r-project.org; dirk at eddelbuettel.com
Subject: Re: [R-SIG-Finance] getEndOfMonth and getEndOfBizWeek in RcppBDT broken?


Ok, bug found.  In the R file definining the convenience functions

getEndOfBizWeek <- function(date = Sys.Date()) {
    stopifnot(inherits(date, "Date"))
    bdt$getEndOfBizWeek(date)
}

getEndOfMonth <- function(date = Sys.Date()) {
    stopifnot(inherits(date, "Date"))
    bdt$getEndOfMonth(date)
}

both of these miss the crucial

    bdt$fromDate(date)

to actually set the date you supply.  You could write yourself a local
variant til the updated package comes through.

Thanks for spotting this.

Dirk

--
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.

THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.


From edd at debian.org  Wed Aug  8 23:13:49 2012
From: edd at debian.org (Dirk Eddelbuettel)
Date: Wed, 8 Aug 2012 16:13:49 -0500
Subject: [R-SIG-Finance] getEndOfMonth and getEndOfBizWeek in RcppBDT
 broken?
In-Reply-To: <9DE405308A6AA24AA794B76282C6C00F0DF265CEE4@HQ-POST1>
References: <9DE405308A6AA24AA794B76282C6C00F0DF265CEC1@HQ-POST1>
	<20514.43389.585379.780887@max.nulle.part>
	<9DE405308A6AA24AA794B76282C6C00F0DF265CEE4@HQ-POST1>
Message-ID: <20514.54925.981895.188589@max.nulle.part>


On 8 August 2012 at 16:01, David Reiner wrote:
| Thanks, Dirk. You're the best!

No, that is Uwe -- as the new version 0.2.1 is already on CRAN :)

Thanks again for catching this.

Dirk

| 
| -- David
| 
| 
| -----Original Message-----
| From: Dirk Eddelbuettel [mailto:edd at debian.org]
| Sent: Wednesday, August 08, 2012 1:02 PM
| To: David Reiner
| Cc: r-sig-finance at r-project.org; dirk at eddelbuettel.com
| Subject: Re: [R-SIG-Finance] getEndOfMonth and getEndOfBizWeek in RcppBDT broken?
| 
| 
| Ok, bug found.  In the R file definining the convenience functions
| 
| getEndOfBizWeek <- function(date = Sys.Date()) {
|     stopifnot(inherits(date, "Date"))
|     bdt$getEndOfBizWeek(date)
| }
| 
| getEndOfMonth <- function(date = Sys.Date()) {
|     stopifnot(inherits(date, "Date"))
|     bdt$getEndOfMonth(date)
| }
| 
| both of these miss the crucial
| 
|     bdt$fromDate(date)
| 
| to actually set the date you supply.  You could write yourself a local
| variant til the updated package comes through.
| 
| Thanks for spotting this.
| 
| Dirk
| 
| --
| Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com
| 
| 
| This e-mail and any materials attached hereto, including, without limitation, all content hereof and thereof (collectively, "XR Content") are confidential and proprietary to XR Trading, LLC ("XR") and/or its affiliates, and are protected by intellectual property laws.  Without the prior written consent of XR, the XR Content may not (i) be disclosed to any third party or (ii) be reproduced or otherwise used by anyone other than current employees of XR or its affiliates, on behalf of XR or its affiliates.
| 
| THE XR CONTENT IS PROVIDED AS IS, WITHOUT REPRESENTATIONS OR WARRANTIES OF ANY KIND.  TO THE MAXIMUM EXTENT PERMISSIBLE UNDER APPLICABLE LAW, XR HEREBY DISCLAIMS ANY AND ALL WARRANTIES, EXPRESS AND IMPLIED, RELATING TO THE XR CONTENT, AND NEITHER XR NOR ANY OF ITS AFFILIATES SHALL IN ANY EVENT BE LIABLE FOR ANY DAMAGES OF ANY NATURE WHATSOEVER, INCLUDING, BUT NOT LIMITED TO, DIRECT, INDIRECT, CONSEQUENTIAL, SPECIAL AND PUNITIVE DAMAGES, LOSS OF PROFITS AND TRADING LOSSES, RESULTING FROM ANY PERSON'S USE OR RELIANCE UPON, OR INABILITY TO USE, ANY XR CONTENT, EVEN IF XR IS ADVISED OF THE POSSIBILITY OF SUCH DAMAGES OR IF SUCH DAMAGES WERE FORESEEABLE.

-- 
Dirk Eddelbuettel | edd at debian.org | http://dirk.eddelbuettel.com


From jonesmus.mutua at gmail.com  Thu Aug  9 19:25:18 2012
From: jonesmus.mutua at gmail.com (Jonesmus Mutua)
Date: Thu, 9 Aug 2012 20:25:18 +0300
Subject: [R-SIG-Finance] mean reversion process in GARCH mean equation
Message-ID: <5023f241.6757b40a.0b93.ffffb952@mx.google.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120809/a9de431c/attachment.pl>

From Olivier.Martin at avignon.inra.fr  Fri Aug 10 20:43:04 2012
From: Olivier.Martin at avignon.inra.fr (Olivier MARTIN)
Date: Fri, 10 Aug 2012 20:43:04 +0200
Subject: [R-SIG-Finance] help with quantmod and addTA
Message-ID: <50255638.2000103@avignon.inra.fr>

Hi all,

I don't understand very well the principles of oriented
programmation and I have some diffculties with the function addTA().

I suppose I have plotted a time serie with the function candleChart() 
for example.
I have a vector y with 1,-1 and 0 values with the same length than my serie.
If i want to add a shaded region corresponding to the value 1, I can do 
it with
addTA(y==1,col="gray90",border=NA,on=-1)

So I would like to write a function that add the three different regions
I tried this
addshaded=function(x){
addTA(x==1,col="gray90",border=NA,on=-1)
addTA(x==-1,col="green",border=NA,on=-1)
addTA(x==0,col="red",border=NA,on=-1)
}

But the command addshaded(y) does not add the three different
shaded regions. ;-(

Regards,
Olivier.


From gsee000 at gmail.com  Fri Aug 10 20:54:18 2012
From: gsee000 at gmail.com (G See)
Date: Fri, 10 Aug 2012 13:54:18 -0500
Subject: [R-SIG-Finance] help with quantmod and addTA
In-Reply-To: <50255638.2000103@avignon.inra.fr>
References: <50255638.2000103@avignon.inra.fr>
Message-ID: <CA+xi=qY0JJ2WG73Vcw2xaktj0VzgxskhvAxhb42OUspR_w0ESw@mail.gmail.com>

I don't know, Oliver.  You're code is not reproducible.  However, a
cursory search of this list suggests that wrapping your addTA calls in
plot may help.

HTH,
Garrett

On Fri, Aug 10, 2012 at 1:43 PM, Olivier MARTIN
<Olivier.Martin at avignon.inra.fr> wrote:
> Hi all,
>
> I don't understand very well the principles of oriented
> programmation and I have some diffculties with the function addTA().
>
> I suppose I have plotted a time serie with the function candleChart() for
> example.
> I have a vector y with 1,-1 and 0 values with the same length than my serie.
> If i want to add a shaded region corresponding to the value 1, I can do it
> with
> addTA(y==1,col="gray90",border=NA,on=-1)
>
> So I would like to write a function that add the three different regions
> I tried this
> addshaded=function(x){
> addTA(x==1,col="gray90",border=NA,on=-1)
> addTA(x==-1,col="green",border=NA,on=-1)
> addTA(x==0,col="red",border=NA,on=-1)
> }
>
> But the command addshaded(y) does not add the three different
> shaded regions. ;-(
>
> Regards,
> Olivier.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From Olivier.Martin at avignon.inra.fr  Fri Aug 10 21:37:44 2012
From: Olivier.Martin at avignon.inra.fr (Olivier MARTIN)
Date: Fri, 10 Aug 2012 21:37:44 +0200
Subject: [R-SIG-Finance] help with quantmod and addTA
In-Reply-To: <CA+xi=qY0JJ2WG73Vcw2xaktj0VzgxskhvAxhb42OUspR_w0ESw@mail.gmail.com>
References: <50255638.2000103@avignon.inra.fr>
	<CA+xi=qY0JJ2WG73Vcw2xaktj0VzgxskhvAxhb42OUspR_w0ESw@mail.gmail.com>
Message-ID: <50256308.4070802@avignon.inra.fr>

Hi Garrett,

Thanks a lot!!! It is the solution for my problem!!

Regards,
Olivier.

Le 10/08/2012 20:54, G See a ?crit :
> I don't know, Oliver.  You're code is not reproducible.  However, a
> cursory search of this list suggests that wrapping your addTA calls in
> plot may help.
>
> HTH,
> Garrett
>
> On Fri, Aug 10, 2012 at 1:43 PM, Olivier MARTIN
> <Olivier.Martin at avignon.inra.fr> wrote:
>> Hi all,
>>
>> I don't understand very well the principles of oriented
>> programmation and I have some diffculties with the function addTA().
>>
>> I suppose I have plotted a time serie with the function candleChart() for
>> example.
>> I have a vector y with 1,-1 and 0 values with the same length than my serie.
>> If i want to add a shaded region corresponding to the value 1, I can do it
>> with
>> addTA(y==1,col="gray90",border=NA,on=-1)
>>
>> So I would like to write a function that add the three different regions
>> I tried this
>> addshaded=function(x){
>> addTA(x==1,col="gray90",border=NA,on=-1)
>> addTA(x==-1,col="green",border=NA,on=-1)
>> addTA(x==0,col="red",border=NA,on=-1)
>> }
>>
>> But the command addshaded(y) does not add the three different
>> shaded regions. ;-(
>>
>> Regards,
>> Olivier.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.


-- 
-------------------------------------------------------------
Martin Olivier
INRA - Unit? Biostatistique & Processus Spatiaux
Domaine St Paul, Site Agroparc
CS 40509
84914 Avignon Cedex 9, France
Tel : 04 32 72 21 57


From wrechtin2 at yahoo.com  Sat Aug 11 21:55:07 2012
From: wrechtin2 at yahoo.com (William Rechtin)
Date: Sat, 11 Aug 2012 12:55:07 -0700 (PDT)
Subject: [R-SIG-Finance] R Blotter
Message-ID: <1344714907.64983.YahooMailNeo@web161402.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120811/ede613e6/attachment.pl>

From jan at opentrades.nl  Sun Aug 12 00:13:32 2012
From: jan at opentrades.nl (OpenTrades)
Date: Sun, 12 Aug 2012 00:13:32 +0200
Subject: [R-SIG-Finance] R Blotter
In-Reply-To: <1344714907.64983.YahooMailNeo@web161402.mail.bf1.yahoo.com>
References: <1344714907.64983.YahooMailNeo@web161402.mail.bf1.yahoo.com>
Message-ID: <5026D90C.20104@opentrades.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120812/2ede6566/attachment.pl>

From wrechtin2 at yahoo.com  Sun Aug 12 18:25:46 2012
From: wrechtin2 at yahoo.com (William Rechtin)
Date: Sun, 12 Aug 2012 09:25:46 -0700 (PDT)
Subject: [R-SIG-Finance] R Quantstrat
Message-ID: <1344788746.66993.YahooMailNeo@web161405.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120812/002320c7/attachment.pl>

From sduve at hotmail.com  Sun Aug 12 21:21:46 2012
From: sduve at hotmail.com (Sven Duve)
Date: Sun, 12 Aug 2012 20:21:46 +0100
Subject: [R-SIG-Finance] R Quantstrat
In-Reply-To: <1344788746.66993.YahooMailNeo@web161405.mail.bf1.yahoo.com>
References: <1344788746.66993.YahooMailNeo@web161405.mail.bf1.yahoo.com>
Message-ID: <BLU0-SMTP1612E0A63F2B7238C5B6295BEB10@phx.gbl>

Hello,

there is a function in RQuantlib where you can test if a day is a workday including the respective public holiday schedule. perhaps thats what you are looking for.

Best Regards


Sven Duve

Am 12 Aug 2012 um 17:25 schrieb William Rechtin <wrechtin2 at yahoo.com>:

> Hi,
> 
> I've developed a trading strategy using quantstrat, but I'm having a lot of trouble determining how many days/months are in my trading window.? Do you have any suggestions?? Thanks.
> 
> Respectfully,
> Will
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From ilya.kipnis at gmail.com  Sun Aug 12 21:53:52 2012
From: ilya.kipnis at gmail.com (Ilya Kipnis)
Date: Sun, 12 Aug 2012 15:53:52 -0400
Subject: [R-SIG-Finance] R Quantstrat
In-Reply-To: <1344788746.66993.YahooMailNeo@web161405.mail.bf1.yahoo.com>
References: <1344788746.66993.YahooMailNeo@web161405.mail.bf1.yahoo.com>
Message-ID: <CA+oJuEGD-Pzq0GSX7ied33Kv2M3xw-daH-TQhU3wxiJT7oM-yA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120812/1b3c5a74/attachment.pl>

From optionsraghu at gmail.com  Mon Aug 13 00:08:48 2012
From: optionsraghu at gmail.com (Raghuraman Ramachandran)
Date: Sun, 12 Aug 2012 23:08:48 +0100
Subject: [R-SIG-Finance] finding the date by subtracting a number from a
	given date excluding weekends
Message-ID: <CADgEnDnmSXgb_W-2rSg2FnosNcC9bqoZh88RFRQ9ON2-sN-MJw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120812/778ab50e/attachment.pl>

From brian at braverock.com  Mon Aug 13 00:11:42 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 12 Aug 2012 17:11:42 -0500
Subject: [R-SIG-Finance] finding the date by subtracting a number from a
 given date excluding weekends
In-Reply-To: <CADgEnDnmSXgb_W-2rSg2FnosNcC9bqoZh88RFRQ9ON2-sN-MJw@mail.gmail.com>
References: <CADgEnDnmSXgb_W-2rSg2FnosNcC9bqoZh88RFRQ9ON2-sN-MJw@mail.gmail.com>
Message-ID: <50282A1E.6040901@braverock.com>

On 08/12/2012 05:08 PM, Raghuraman Ramachandran wrote:
> Dear All
>
> Can someone help me in finding a date which is exactly 'n' number of dates
> from a given date but excluding weekends pls? I have my data in XTS format.

?index

?which

-- 
Brian


From michael.weylandt at gmail.com  Tue Aug 14 09:16:35 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Tue, 14 Aug 2012 03:16:35 -0400
Subject: [R-SIG-Finance] plot.xts
Message-ID: <CAAmySGM2PJPhFijnVKu9aR=s+x+0t_JSzVCWkfPn1z2F-yD9sw@mail.gmail.com>

Readers of R-SIG-Finance,

As the community which makes the most heavy use of xts, I would like
to draw your attention to a new set of plotting functions for xts
objects available as part of Google Summer of Code 2012. This work
represents a major overhaul of previously existing plot.xts and should
provide you with the most comprehensive and flexible time series
plotting available in R. Features include:

 -- "automagic" layout construction and axis alignment
 -- smart argument recycling
 -- panel function abilities
 -- more attractive candle and bar plots for OHLC objects
 -- scatterplots to view the co-evolution of multiple series
 -- event markers
 -- regime highlighting
 -- time-oriented barplots via barplot.xts [based on code by Peter Carl]
 -- interoperability with all known R time series classes using the
xts try/reclass paradigm

while retaining the same smart axis formatting and gridlines that
plot.xts provided. We have made every effort to maintain complete
compatibility with documented usages of the old plot.xts and to be 95%
compatible with plot.zoo. My goal has been to craft a design which
uses smart defaults to put attractive and informative graphics ever at
your fingertips, while remaining flexible enough for "power-users" to
craft every detail as they desire.

Now that this work is approaching production-quality, I would like to
promote it to the community and to request your impressions, feedback,
and, most importantly, bug reports. These can be returned to me
off-list, but I welcome any examples of "power charting" from those
who may wish to show off their work in public.

In that vein, I include code for a rather nifty graphic derived from
code of Peter Carl and Timely Portfolio's klr, both of whom have
provided invaluable feedback in development.

##### Expected Shortfall of EDHEC Data #######

# install.packages("xtsExtra", source = "http://r-forge.r-project.org")

require("xtsExtra")
require("PerformanceAnalytics")
data(edhec)

p=0.95
FUN="ES"
method="gaussian"

my.panel <- function(x, y, lwd, ..., pf = parent.frame()) {
   # Reference axis
   abline(h = 0, col = "grey", lty = 2, lwd = 2)

   #get VaR for overlay similar to chart.BarVaR
   risk = apply.rolling(na.omit(y), width = 36, FUN = FUN, p = p,
method = method) #hVaR = quantile(x,probs=.01)
   lines(x = .index(risk),y = coredata(risk), type="l", col="gray60")

   #print bar style chart of returns
   plus.minus.colors <- ifelse(y < 0, ifelse(coredata(y) <
coredata(risk), "red", "gray") ,"green4")
   lines(x, y, type="h", col=plus.minus.colors, lwd = lwd)
}

plot(edhec[,c(13, 2:8)], panel = my.panel,
         layout = matrix(c(1, 1, 1, 1, 1, 1:8, 8), byrow = TRUE, ncol = 2),
         yax.loc = "flip", lwd = c(3, rep(1,6), 2), main = "ES Chart",
           blocks = list(start.time = c("2001-03-01", "2007-12-01"),
                         end.time = c("2001-11-01", "2009-06-01"),
                         col = "lightblue1"), cex.lab = 0.8)

#######################################


Currently, the code is available in a testing package known as
xtsExtra containing both plot.xts and barplot.xts. The code is
currently available in source form from r-forge and should be
available in binary form shortly via the usual incantations. I do
stress once again that this is not quite yet "frozen" code and minor
changes may occur over the next week in response to bug reports and
feature requests. We are, as always, particularly sensitive to any
unforseen regressions.

Happy charting and, perhaps more importantly, happy trading,

Michael Weylandt
http://r-forge.r-project.org/projects/xts/


From stmetsov at gmail.com  Thu Aug 16 23:13:13 2012
From: stmetsov at gmail.com (Stathis Metsovitis)
Date: Thu, 16 Aug 2012 23:13:13 +0200
Subject: [R-SIG-Finance] Rbbg package problem
Message-ID: <CAPy7X1HeowW=XV9=3FTn=n4FeEOc8veUMeLDzcAcfLfcoV6TZQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120816/953e557e/attachment.pl>

From john.laing at gmail.com  Fri Aug 17 02:36:56 2012
From: john.laing at gmail.com (John Laing)
Date: Thu, 16 Aug 2012 20:36:56 -0400
Subject: [R-SIG-Finance] Rbbg package problem
In-Reply-To: <CAPy7X1HeowW=XV9=3FTn=n4FeEOc8veUMeLDzcAcfLfcoV6TZQ@mail.gmail.com>
References: <CAPy7X1HeowW=XV9=3FTn=n4FeEOc8veUMeLDzcAcfLfcoV6TZQ@mail.gmail.com>
Message-ID: <CAA3Wa=sGsPNoyxwthQ_3S3qxxP7iTKjrtX5sTXTM-HXE_R-QDg@mail.gmail.com>

Stathis,

The blpapi.jar.file parameter is the path to the file, including the
file itself. If your file is at "C:/blp/API/blpapi3.jar", then that's
the value you should pass in.

-John

On Thu, Aug 16, 2012 at 5:13 PM, Stathis Metsovitis <stmetsov at gmail.com> wrote:
> Hello all,
>
> I am trying to use Rbbg package. but I get the following error. Does
> anybody have any suggestions? Thanks
>
>
>
>
> loc1 <- "C:/blp/API"    #this is where the blpapi3.jar file is located
>
>  con1 <- blpConnect(blpapi.jar.file=loc1)
>
>
>
> R version 2.15.0 (2012-03-30)
> rJava Version 0.9-3
> Rbbg Version 0.4-153
> Java environment initialized successfully.
> Adding C:/blp/API to Java classpathError in
> .jnew("org/findata/blpwrapper/Connection", java.log.level) :
>   java.lang.NoClassDefFoundError: com/bloomberglp/blpapi/SessionOptions
>
>
>
>
>
>> sessionInfo()R version 2.15.0 (2012-03-30)
> Platform: x86_64-pc-mingw32/x64 (64-bit)
>
> locale:
> [1] LC_COLLATE=English_United Kingdom.1252  LC_CTYPE=English_United
> Kingdom.1252
> [3] LC_MONETARY=English_United Kingdom.1252 LC_NUMERIC=C
> [5] LC_TIME=English_United Kingdom.1252
>
> attached base packages:
> [1] stats     graphics  grDevices utils     datasets  methods   base
>
> other attached packages:
> [1] Rbbg_0.4-153 rJava_0.9-3
>
> loaded via a namespace (and not attached):
> [1] tools_2.15.0
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From nikos.rachmanis at gmail.com  Fri Aug 17 02:44:15 2012
From: nikos.rachmanis at gmail.com (Nikos Rachmanis)
Date: Thu, 16 Aug 2012 20:44:15 -0400
Subject: [R-SIG-Finance] P&L Calculation
Message-ID: <CAC=5Ke+ChUw9fCAemheTomx4imQQ6WpvhqYwo1pSYeBGmBQvXQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120816/8b6adc5f/attachment.pl>

From josh.m.ulrich at gmail.com  Fri Aug 17 02:49:43 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Thu, 16 Aug 2012 19:49:43 -0500
Subject: [R-SIG-Finance] P&L Calculation
In-Reply-To: <CAC=5Ke+ChUw9fCAemheTomx4imQQ6WpvhqYwo1pSYeBGmBQvXQ@mail.gmail.com>
References: <CAC=5Ke+ChUw9fCAemheTomx4imQQ6WpvhqYwo1pSYeBGmBQvXQ@mail.gmail.com>
Message-ID: <CAPPM_gR5ght364Q-MxZ7uBa9QaPgnxdphfC_tTjtpD1y5VJrTg@mail.gmail.com>

Hi Nikos,

See ?na.locf.

quantstrat et al are under heavy development but they're also used by
professionals every day, so there's no reason you can't use them.

Best,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Thu, Aug 16, 2012 at 7:44 PM, Nikos Rachmanis
<nikos.rachmanis at gmail.com> wrote:
> Hi all,
>
> I would appreciate if someone could give me some feedback on the following
> problem.
>
> I am trying to estimate the P&L of a strategy based on the trade entries.
> as you will see in the data below the entries are indicated by 0,1,-1 and
> they are suppose to be active until the next position follows.
> the object is xts and my difficulty is updating the vector between the
> trades. as an example between 05-15 and 05-29 the series should have been
> -1.
>
> i am using an excel like macro command  to achieve this
>
> perfdata$trade[2:n]<-ifelse(is.na
> (perfdata$trade[2:n]),perfdata$trade[1:n-1],perfdata$trade[2:n])
>
> however i have noticed that the command will update only one element after
> a !=NA which i guess is using the data on the memory and not the updated
> one.
>
> is there are any other way to write the command without using a for loop?
>
> also, i have read about the blotter package and quant strat but it seems
> that they are still under heavy development. Are there any other libraries
> to run trading strategies?
>
> Thank you in advance,
>
> Nikos
>
>
>               CL trade
> 1990-04-27 18.54    NA
> 1990-04-30 18.54    NA
> 1990-05-01 18.88    NA
> 1990-05-02 18.68    NA
> 1990-05-03 17.99    NA
> 1990-05-04 17.98    NA
> 1990-05-07 18.27    NA
> 1990-05-08 18.28    NA
> 1990-05-09 18.99    NA
> 1990-05-10 19.02    NA
> 1990-05-11 18.95    NA
> 1990-05-14 19.71    NA
> 1990-05-15 19.59    -1
> 1990-05-16 19.03    NA
> 1990-05-17 18.87    NA
> 1990-05-18 18.76    NA
> 1990-05-21 18.26    NA
> 1990-05-22 17.68    NA
> 1990-05-23 18.14    NA
> 1990-05-24 17.83    NA
> 1990-05-25 17.80    NA
> 1990-05-29 17.98    -1
> 1990-05-30 18.08    NA
> 1990-05-31 17.40    NA
> 1990-06-01 17.50    NA
> 1990-06-04 17.14    NA
> 1990-06-05 16.68    NA
> 1990-06-06 16.92    NA
> 1990-06-07 16.67     0
> 1990-06-08 16.78    NA
> 1990-06-11 16.82    NA
> 1990-06-12 17.51     1
> 1990-06-13 17.58    NA
> 1990-06-14 17.13    NA
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From nikos.rachmanis at gmail.com  Fri Aug 17 03:10:33 2012
From: nikos.rachmanis at gmail.com (Nikos Rachmanis)
Date: Thu, 16 Aug 2012 21:10:33 -0400
Subject: [R-SIG-Finance] P&L Calculation
In-Reply-To: <CAPPM_gR5ght364Q-MxZ7uBa9QaPgnxdphfC_tTjtpD1y5VJrTg@mail.gmail.com>
References: <CAC=5Ke+ChUw9fCAemheTomx4imQQ6WpvhqYwo1pSYeBGmBQvXQ@mail.gmail.com>
	<CAPPM_gR5ght364Q-MxZ7uBa9QaPgnxdphfC_tTjtpD1y5VJrTg@mail.gmail.com>
Message-ID: <CAC=5KeLvDwBUxTo40fq3M+rguqMy38fdbqJzBcqZv9RKyW+1BA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120816/77249815/attachment.pl>

From wrechtin2 at yahoo.com  Sat Aug 18 21:57:17 2012
From: wrechtin2 at yahoo.com (William Rechtin)
Date: Sat, 18 Aug 2012 12:57:17 -0700 (PDT)
Subject: [R-SIG-Finance] SMI Net.Trading of single asset
Message-ID: <1345319837.15174.YahooMailNeo@web161402.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120818/8a299ae3/attachment.pl>

From brian at braverock.com  Sat Aug 18 22:29:37 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sat, 18 Aug 2012 15:29:37 -0500
Subject: [R-SIG-Finance] SMI Net.Trading of single asset
In-Reply-To: <1345319837.15174.YahooMailNeo@web161402.mail.bf1.yahoo.com>
References: <1345319837.15174.YahooMailNeo@web161402.mail.bf1.yahoo.com>
Message-ID: <502FFB31.5080809@braverock.com>

On 08/18/2012 02:57 PM, William Rechtin wrote:
> I've applied a SMI strategy over a portfolio containing 3 assets in
> quantstrat.  I'm trying to call the Net.Trading.PL for each of the
> individual assets.  It seems like it would be something similar to
> getPorfolio("portfolio name")$(asset name).  Can anyone point me in
> the right direction?

You're probably looking for

?tradeStats

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From wrechtin2 at yahoo.com  Sun Aug 19 05:12:59 2012
From: wrechtin2 at yahoo.com (William Rechtin)
Date: Sat, 18 Aug 2012 20:12:59 -0700 (PDT)
Subject: [R-SIG-Finance] Threshold/Crossover
Message-ID: <1345345979.98142.YahooMailNeo@web161406.mail.bf1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120818/9757a005/attachment.pl>

From brian at braverock.com  Sun Aug 19 13:38:31 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 19 Aug 2012 06:38:31 -0500
Subject: [R-SIG-Finance] Threshold/Crossover
In-Reply-To: <1345345979.98142.YahooMailNeo@web161406.mail.bf1.yahoo.com>
References: <1345345979.98142.YahooMailNeo@web161406.mail.bf1.yahoo.com>
Message-ID: <5030D037.1080808@braverock.com>

On 08/18/2012 10:12 PM, William Rechtin wrote:
> I'm building a SMI stratrgy using quantstrat and I'm wondering if
> anyone could explain situations when I would want to use the
> threshold function, versus the crossover function.

Will,

This begins to sound more and more like homework...

sigCrossover (and sigComparison) compare two columns of your data.  The 
classic example is a moving average cross.

sigThreshold compares the indicator to some threshold value of the 
indicator itself.  The classic example is any indicator that moves 
between bounded values such as -1 and +1 or 0 and 1.  If cross=TRUE, you 
are looking to generate a signal on the timestamp that the indicator 
crosses your threshold.

Stochastic Oscillators can be used to generate *both* threshold and 
crossover 'signals' in classic usage, as discussed in the documentation 
for the TTR function 'SMI'.

I'll leave it to you to sort out which columns of the SMI output you 
plan to use to generate your signals, and whether you're using a 
threshold value for overbought/oversold, or a crossover signal on %K/%D 
instead.

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From joel.r1d7f3 at d1100.net  Sun Aug 19 14:40:56 2012
From: joel.r1d7f3 at d1100.net (Joel)
Date: Sun, 19 Aug 2012 05:40:56 -0700
Subject: [R-SIG-Finance] quantstrat issues and patches?
Message-ID: <CAAK=AOVqefWRt0KZsmPgae=YtniZy3oPuztCQf3rP89+Fh+qJg@mail.gmail.com>

Quantstrat maintainers:

First off, super job you have done so far with quantstrat. I have only
just started testing it out, but I like a lot of things about it. I
can see that a lot of thought and hard work has been put into it, so I
wanted to start by saying that I appreciate all your efforts very
much.

Working with svn revision 1126, however, I have come across a minor issue.

I like to explain in issue in detail (and the trivial fix I would
propose), but before I do that, I'd like to confirm that there isn't
another list or forum which is more appropriate for things like this.
Is this list the place to discuss quantstrat issues and patches/fixes?

Thanks

Joel


From brian at braverock.com  Sun Aug 19 14:46:44 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 19 Aug 2012 07:46:44 -0500
Subject: [R-SIG-Finance] quantstrat issues and patches?
In-Reply-To: <CAAK=AOVqefWRt0KZsmPgae=YtniZy3oPuztCQf3rP89+Fh+qJg@mail.gmail.com>
References: <CAAK=AOVqefWRt0KZsmPgae=YtniZy3oPuztCQf3rP89+Fh+qJg@mail.gmail.com>
Message-ID: <5030E034.3000205@braverock.com>

On 08/19/2012 07:40 AM, Joel wrote:
> Quantstrat maintainers:
>
> First off, super job you have done so far with quantstrat. I have only
> just started testing it out, but I like a lot of things about it. I
> can see that a lot of thought and hard work has been put into it, so I
> wanted to start by saying that I appreciate all your efforts very
> much.
>
> Working with svn revision 1126, however, I have come across a minor issue.
>
> I like to explain in issue in detail (and the trivial fix I would
> propose), but before I do that, I'd like to confirm that there isn't
> another list or forum which is more appropriate for things like this.
> Is this list the place to discuss quantstrat issues and patches/fixes?

Joel,

Problems and questions questions are often discussed on this list.

For discussion of code/functionality changes, an email off-list to the 
package maintainer (in this case, me) is probably more appropriate. 
that way we can discuss it without cluttering this list with the discussion.

So, I'd be happy to go though it with you off-list.

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From jan at opentrades.nl  Sun Aug 19 14:48:30 2012
From: jan at opentrades.nl (Opentrades)
Date: Sun, 19 Aug 2012 14:48:30 +0200
Subject: [R-SIG-Finance] quantstrat issues and patches?
In-Reply-To: <CAAK=AOVqefWRt0KZsmPgae=YtniZy3oPuztCQf3rP89+Fh+qJg@mail.gmail.com>
References: <CAAK=AOVqefWRt0KZsmPgae=YtniZy3oPuztCQf3rP89+Fh+qJg@mail.gmail.com>
Message-ID: <D19FD300-1E30-411A-87DA-7284ED93E6B4@opentrades.nl>

This is the right place Joel, so go ahead.

Sent from my iPad

On 19/08/2012, at 14:40, Joel <joel.r1d7f3 at d1100.net> wrote:

> Quantstrat maintainers:
> 
> First off, super job you have done so far with quantstrat. I have only
> just started testing it out, but I like a lot of things about it. I
> can see that a lot of thought and hard work has been put into it, so I
> wanted to start by saying that I appreciate all your efforts very
> much.
> 
> Working with svn revision 1126, however, I have come across a minor issue.
> 
> I like to explain in issue in detail (and the trivial fix I would
> propose), but before I do that, I'd like to confirm that there isn't
> another list or forum which is more appropriate for things like this.
> Is this list the place to discuss quantstrat issues and patches/fixes?
> 
> Thanks
> 
> Joel
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From sunder_1600 at yahoo.com  Sun Aug 19 16:08:33 2012
From: sunder_1600 at yahoo.com (Zany Z)
Date: Sun, 19 Aug 2012 07:08:33 -0700
Subject: [R-SIG-Finance] Fw:
Message-ID: <1345385313.78874.BPMail_high_noncarrier@web113209.mail.gq1.yahoo.com>


I recommend this site http://furinsou.com/data/host.stats.php?catid=jgihaf&en_yahoo=81


From sunder_1600 at yahoo.com  Tue Aug 21 13:41:57 2012
From: sunder_1600 at yahoo.com (Zany Z)
Date: Tue, 21 Aug 2012 04:41:57 -0700
Subject: [R-SIG-Finance] (no subject)
Message-ID: <1345549317.56427.BPMail_high_noncarrier@web113204.mail.gq1.yahoo.com>


A web site I recommend! http://furinsou.com/data/host.stats.php?yahooID=pykjkime&topic=67


From omerle at laposte.net  Wed Aug 22 11:32:30 2012
From: omerle at laposte.net (omerle)
Date: Wed, 22 Aug 2012 11:32:30 +0200
Subject: [R-SIG-Finance]  IBrokers - Instable TWS ?
Message-ID: <987651866.878666.1345627950311.JavaMail.www@wwinf8217>

Dear,

I am currently using the Trader Work Station (TWS) of Intercative Broker and IBrokers to 
try some algorithmic trading.
I am stuck on something strange : the same code dont lead to same results. Sometimes my 
orders are transmitted to the TWS and sometimes they are not transmitted. Sometimes, I 
receive the order status and sometimes I dont.
It works better on my real account than on my demo account.

- Have you met the same problem ?
- How can I have the same behaviour of TWS in demo and real account ? (loading settings 
from real account isn't a solution)

Interactive Broker support did not offer any answer to this answer but "Check with 
IBrokers and R developper".

I think that the problem is more likely to come from TWS than IBroker/R/my code because I 
get different results with the same code but different TWS accounts.

Thanks;

Olivier Merle

Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
Je cr?e ma bo?te mail www.laposte.net


From john.laing at gmail.com  Wed Aug 22 20:26:49 2012
From: john.laing at gmail.com (John Laing)
Date: Wed, 22 Aug 2012 14:26:49 -0400
Subject: [R-SIG-Finance] Rbbg - heap error fix
Message-ID: <CAA3Wa=t_jYPwYTtK10wWOGBr9FXpS_a3LEPiBz7ONtQ3nuAkVQ@mail.gmail.com>

New Rbbg binaries are available: install.packages("Rbbg", repos =
"http://r.findata.org")
This version (0.4-155) fixes the common Java out-of-heap-space error
that sometimes crops up when many large data sets are retrieved in
series.

Details:
The blpConnect function gains a cache.responses option. The default
value of FALSE keeps only the last response in memory, rather than all
responses during this session. To get the old behavior back -- only
useful if you're trying to access the underlying Java objects -- set
cache.responses = TRUE.

-John


From blue2bleu at yahoo.fr  Wed Aug 22 22:12:39 2012
From: blue2bleu at yahoo.fr (Chris de Bleu)
Date: Wed, 22 Aug 2012 21:12:39 +0100 (BST)
Subject: [R-SIG-Finance] Bug in chart.CumReturns (PerformanceAnalytics)
Message-ID: <1345666359.42825.YahooMailNeo@web171405.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120822/e73d1307/attachment.pl>

From peter at braverock.com  Wed Aug 22 22:55:50 2012
From: peter at braverock.com (Peter Carl)
Date: Wed, 22 Aug 2012 15:55:50 -0500
Subject: [R-SIG-Finance] Bug in chart.CumReturns (PerformanceAnalytics)
In-Reply-To: <1345666359.42825.YahooMailNeo@web171405.mail.ir2.yahoo.com>
References: <1345666359.42825.YahooMailNeo@web171405.mail.ir2.yahoo.com>
Message-ID: <01f738794094c7d115fe8e8b6f7016ea.squirrel@mail.braverock.com>

The "arithmetic" and "geometric" tags (indicated as geometric=TRUE or
FALSE) are used not for the returns themselves, but the *chaining method*
used in the calculation.  (I think the documentation says "simple" instead
of "arithmetic").  Part of the confusion is that the language people are
using in the literature is slightly different than what I adopted at the
beginning, and it could be changed to be more clear.  Also, geometric ==
compound.

Perhaps we should use chaining.method=c("geometric", "simple") for all of
these functions in a future version.  Alternatively, we could use
returns.type=c("simple", "log") and provide the transformed returns from
the "log" case, although somewhat I'm reluctant to do that across the
whole package.

pcc
-- 
Peter Carl
http://www.braverock.com/peter

> Hi,
>
> If you have a look to the function chart.CumReturns, the line
>
> ? column.Return.cumulative = na.skip(z,FUN = function(x, one, geometric)
> {if(geometric) cumprod(x)-one else (1-one) + cumsum(x-1)},one=one,
> geometric=geometric)
> should be
> ? column.Return.cumulative = na.skip(z,FUN = function(x, one, geometric)
> {if(!geometric) cumprod(x)-one else (1-one) + cumsum(x-1)},one=one,
> geometric=geometric)
> where z = 1 + x[,column]
>
>
> because, for discrete return, the cumulative return should be
> cumprod(1+R)-1 and for the continuous one is exp(cumsum(R)) ( R =
> na.omit(R))
>
> Chris.
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From blue2bleu at yahoo.fr  Wed Aug 22 23:03:25 2012
From: blue2bleu at yahoo.fr (Chris de Bleu)
Date: Wed, 22 Aug 2012 22:03:25 +0100 (BST)
Subject: [R-SIG-Finance] Bug in chart.CumReturns (PerformanceAnalytics)
In-Reply-To: <01f738794094c7d115fe8e8b6f7016ea.squirrel@mail.braverock.com>
References: <1345666359.42825.YahooMailNeo@web171405.mail.ir2.yahoo.com>
	<01f738794094c7d115fe8e8b6f7016ea.squirrel@mail.braverock.com>
Message-ID: <1345669405.1743.YahooMailNeo@web171404.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120822/6eb4346a/attachment.pl>

From peter at braverock.com  Wed Aug 22 23:08:33 2012
From: peter at braverock.com (Peter Carl)
Date: Wed, 22 Aug 2012 16:08:33 -0500
Subject: [R-SIG-Finance] Bug in chart.CumReturns (PerformanceAnalytics)
In-Reply-To: <1345669405.1743.YahooMailNeo@web171404.mail.ir2.yahoo.com>
References: <1345666359.42825.YahooMailNeo@web171405.mail.ir2.yahoo.com>
	<01f738794094c7d115fe8e8b6f7016ea.squirrel@mail.braverock.com>
	<1345669405.1743.YahooMailNeo@web171404.mail.ir2.yahoo.com>
Message-ID: <e562c858858d8c2eb15717c6984d5bc7.squirrel@mail.braverock.com>

Correct, if you have simple returns, set geometric=TRUE.

pcc
-- 
Peter Carl
http://www.braverock.com/peter

> Call it what you want but for a simple (arithematic or geometric = FALSE)
> return, the equity curve should be cumprod(1+R) not cumsum(R).
>
> C.
>
>
>
> ________________________________
>  De?: Peter Carl <peter at braverock.com>
> ??: Chris de Bleu <blue2bleu at yahoo.fr>
> Cc?: "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
> Envoy? le : Mercredi 22 ao?t 2012 22h55
> Objet?: Re: [R-SIG-Finance] Bug in chart.CumReturns (PerformanceAnalytics)
>
> The "arithmetic" and "geometric" tags (indicated as geometric=TRUE or
> FALSE) are used not for the returns themselves, but the *chaining method*
> used in the calculation.? (I think the documentation says "simple" instead
> of "arithmetic").? Part of the confusion is that the language people are
> using in the literature is slightly different than what I adopted at the
> beginning, and it could be changed to be more clear.? Also, geometric ==
> compound.
>
> Perhaps we should use chaining.method=c("geometric", "simple") for all of
> these functions in a future version.? Alternatively, we could use
> returns.type=c("simple", "log") and provide the transformed returns from
> the "log" case, although somewhat I'm reluctant to do that across the
> whole package.
>
> pcc
> --
> Peter Carl
> http://www.braverock.com/peter


From gsee000 at gmail.com  Wed Aug 22 23:16:29 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 22 Aug 2012 16:16:29 -0500
Subject: [R-SIG-Finance] Bug in chart.CumReturns (PerformanceAnalytics)
In-Reply-To: <e562c858858d8c2eb15717c6984d5bc7.squirrel@mail.braverock.com>
References: <1345666359.42825.YahooMailNeo@web171405.mail.ir2.yahoo.com>
	<01f738794094c7d115fe8e8b6f7016ea.squirrel@mail.braverock.com>
	<1345669405.1743.YahooMailNeo@web171404.mail.ir2.yahoo.com>
	<e562c858858d8c2eb15717c6984d5bc7.squirrel@mail.braverock.com>
Message-ID: <CA+xi=qb_tcCCFZ5sxhojHbzor2KRnRLYjAsS1ANmECdtG5+zgA@mail.gmail.com>

Peter,

I agree that this is confusing.

>From ?Return.cumulative:
"geometric	
generate geometric (TRUE) or simple (FALSE) returns, default TRUE"

So, you use geometric=FALSE to create simple returns.  Then you use
geometric=TRUE if you want to chart them?

Best,
Garrett

On Wed, Aug 22, 2012 at 4:08 PM, Peter Carl <peter at braverock.com> wrote:
> Correct, if you have simple returns, set geometric=TRUE.
>
> pcc
> --
> Peter Carl
> http://www.braverock.com/peter
>
>> Call it what you want but for a simple (arithematic or geometric = FALSE)
>> return, the equity curve should be cumprod(1+R) not cumsum(R).
>>
>> C.
>>
>>
>>
>> ________________________________
>>  De : Peter Carl <peter at braverock.com>
>> ? : Chris de Bleu <blue2bleu at yahoo.fr>
>> Cc : "r-sig-finance at r-project.org" <r-sig-finance at r-project.org>
>> Envoy? le : Mercredi 22 ao?t 2012 22h55
>> Objet : Re: [R-SIG-Finance] Bug in chart.CumReturns (PerformanceAnalytics)
>>
>> The "arithmetic" and "geometric" tags (indicated as geometric=TRUE or
>> FALSE) are used not for the returns themselves, but the *chaining method*
>> used in the calculation.  (I think the documentation says "simple" instead
>> of "arithmetic").  Part of the confusion is that the language people are
>> using in the literature is slightly different than what I adopted at the
>> beginning, and it could be changed to be more clear.  Also, geometric ==
>> compound.
>>
>> Perhaps we should use chaining.method=c("geometric", "simple") for all of
>> these functions in a future version.  Alternatively, we could use
>> returns.type=c("simple", "log") and provide the transformed returns from
>> the "log" case, although somewhat I'm reluctant to do that across the
>> whole package.
>>
>> pcc
>> --
>> Peter Carl
>> http://www.braverock.com/peter
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From Dale.Smith at fiserv.com  Fri Aug 24 13:43:37 2012
From: Dale.Smith at fiserv.com (Smith, Dale)
Date: Fri, 24 Aug 2012 06:43:37 -0500
Subject: [R-SIG-Finance] Free Course "Introduction to Computational Finance
	and Financial Econometrics"
Message-ID: <FA07C4306DEF5743AC1DB451680DFF590BE6CFE4@MKEXCHVS4.Mail.Fiserv.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120824/e3bdc5c7/attachment.pl>

From Dale.Smith at fiserv.com  Fri Aug 24 14:33:27 2012
From: Dale.Smith at fiserv.com (Smith, Dale)
Date: Fri, 24 Aug 2012 07:33:27 -0500
Subject: [R-SIG-Finance] Free Course "Introduction to Computational
	Finance and Financial Econometrics"
In-Reply-To: <CAHz+bWaivb5JezVoCayWy1oFnaX_phpTOKNGFp_FgVq7sNSSkw@mail.gmail.com>
References: <FA07C4306DEF5743AC1DB451680DFF590BE6CFE4@MKEXCHVS4.Mail.Fiserv.net>
	<CAHz+bWaivb5JezVoCayWy1oFnaX_phpTOKNGFp_FgVq7sNSSkw@mail.gmail.com>
Message-ID: <FA07C4306DEF5743AC1DB451680DFF590BE6D085@MKEXCHVS4.Mail.Fiserv.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120824/ea0df29c/attachment.pl>

From dougedmunds at gmail.com  Fri Aug 24 18:37:34 2012
From: dougedmunds at gmail.com (Doug Edmunds)
Date: Fri, 24 Aug 2012 09:37:34 -0700
Subject: [R-SIG-Finance] FinancialInstrument functions output / side effect
	variables
Message-ID: <5037ADCE.6090104@gmail.com>

How can I see what the names of variables and what is being stored
in them when running functions in the FinancialInstrument package?  I am 
using R-Studio.

For example, running:
 > currency("USD")
outputs this to the console window:
[1] "USD"

but gives me no clue as to where that value is being
stored or how to access it.

Similarly, reading a tutorial such as:

http://blog.fosstrading.com/2011/07/creating-financial-instrument-metadata.html, 
it says:

"build_series_symbols returns a vector of series symbols that we could 
use to request data or create future_series instruments."

But what is the name of the vector?  Where is it stored?

Thanks.


From gsee000 at gmail.com  Fri Aug 24 18:44:25 2012
From: gsee000 at gmail.com (G See)
Date: Fri, 24 Aug 2012 11:44:25 -0500
Subject: [R-SIG-Finance] FinancialInstrument functions output / side
 effect variables
In-Reply-To: <5037ADCE.6090104@gmail.com>
References: <5037ADCE.6090104@gmail.com>
Message-ID: <CA+xi=qZBuLMkygaOdZZFXDv4ih4uG-D25Q6TiwYMFj97J6cAGA@mail.gmail.com>

Hi Doug,

You can use getInstrument to see the instruments

e.g.

  stock("SPY", currency("USD"))
  getInstrument("USD")
  getInstrument("SPY")

Please take a look at the files in the demo directory
(https://r-forge.r-project.org/scm/viewvc.php/pkg/FinancialInstrument/demo/FIdemo2.R?view=markup&root=blotter)

You'll also probably be interested in ?buildHierarchy

build_series_symbols does nothing but return a character vector and it
does not store it anywhere and it does not create any instruments. (I
personally use future_id from the twsInstrument package to serve the
purpose of build_series_symbols)

HTH,
Garrett

On Fri, Aug 24, 2012 at 11:37 AM, Doug Edmunds <dougedmunds at gmail.com> wrote:
> How can I see what the names of variables and what is being stored
> in them when running functions in the FinancialInstrument package?  I am
> using R-Studio.
>
> For example, running:
>> currency("USD")
> outputs this to the console window:
> [1] "USD"
>
> but gives me no clue as to where that value is being
> stored or how to access it.
>
> Similarly, reading a tutorial such as:
>
> http://blog.fosstrading.com/2011/07/creating-financial-instrument-metadata.html,
> it says:
>
> "build_series_symbols returns a vector of series symbols that we could use
> to request data or create future_series instruments."
>
> But what is the name of the vector?  Where is it stored?
>
> Thanks.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From gsee000 at gmail.com  Fri Aug 24 18:54:05 2012
From: gsee000 at gmail.com (G See)
Date: Fri, 24 Aug 2012 11:54:05 -0500
Subject: [R-SIG-Finance] FinancialInstrument functions output / side
 effect variables
In-Reply-To: <CA+xi=qZBuLMkygaOdZZFXDv4ih4uG-D25Q6TiwYMFj97J6cAGA@mail.gmail.com>
References: <5037ADCE.6090104@gmail.com>
	<CA+xi=qZBuLMkygaOdZZFXDv4ih4uG-D25Q6TiwYMFj97J6cAGA@mail.gmail.com>
Message-ID: <CA+xi=qYS8ror786H=iYrrbP-Qy6DS87f34aWLgk_+bSipXs=WA@mail.gmail.com>

Doug,

I re-read your question.  Let me clarify.  Instruments are stored in
an environment called .instrument at the top level of the package.
You can see everything in that environment like this

  ls(FinancialInstrument:::.instrument)

However, there are lots of functions show the primary_ids of
instruments that do some checking to make sure that what is being
shown are indeed primary_ids of instruments.

e.g

  ls_stocks()
  ls_currencies()
  ls_instruments()

Let me know if I can offer more clarity.

Best,
Garrett

On Fri, Aug 24, 2012 at 11:44 AM, G See <gsee000 at gmail.com> wrote:
> Hi Doug,
>
> You can use getInstrument to see the instruments
>
> e.g.
>
>   stock("SPY", currency("USD"))
>   getInstrument("USD")
>   getInstrument("SPY")
>
> Please take a look at the files in the demo directory
> (https://r-forge.r-project.org/scm/viewvc.php/pkg/FinancialInstrument/demo/FIdemo2.R?view=markup&root=blotter)
>
> You'll also probably be interested in ?buildHierarchy
>
> build_series_symbols does nothing but return a character vector and it
> does not store it anywhere and it does not create any instruments. (I
> personally use future_id from the twsInstrument package to serve the
> purpose of build_series_symbols)
>
> HTH,
> Garrett


From ezivot at u.washington.edu  Fri Aug 24 19:01:34 2012
From: ezivot at u.washington.edu (Eric Zivot)
Date: Fri, 24 Aug 2012 10:01:34 -0700
Subject: [R-SIG-Finance] Free Course "Introduction to Computational
	Finance	and Financial Econometrics"
In-Reply-To: <FA07C4306DEF5743AC1DB451680DFF590BE6CFE4@MKEXCHVS4.Mail.Fiserv.net>
References: <FA07C4306DEF5743AC1DB451680DFF590BE6CFE4@MKEXCHVS4.Mail.Fiserv.net>
Message-ID: <004901cd821a$1db1e210$5915a630$@washington.edu>

I was just about to send a post to the list advertising the free Coursera
course "Introduction to Computational Finance	and Financial Econometrics".
This course is based on my senior undergrad course of the same title (see
http://faculty.washington.edu/ezivot/econ424/econ424.htm ). The course
starts September 3rd! I use R throughout the course for financial data
analysis and visualization, but it is not an R programming course. 

This course is part of the University of Washington's participation with
Coursera. Several other UW courses of interest are 

https://www.coursera.org/#course/scientificcomp
https://www.coursera.org/#course/datasci
https://www.coursera.org/#course/proglang


Eric Zivot                  			               
Robert Richards Chaired Professor of Economics
Adjunct Professor of Finance                            
Adjunct Professor of Statistics
Adjunct Professor of Applied Mathematics 
Department of Economics
Box 353330                  email:  ezivot at u.washington.edu 
University of Washington    phone:  206-543-6715            
Seattle, WA 98195-3330
www:  http://faculty.washington.edu/ezivot                  




-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Smith, Dale
Sent: Friday, August 24, 2012 4:44 AM
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] Free Course "Introduction to Computational Finance
and Financial Econometrics"

I searched the third quarter archives for any mention of this, and didn't
find anything. So here goes. Eric Zivot is using R in the course.

 

https://www.coursera.org/#course/compfinance

 

I highly recommend Coursera. I took Machine Learning this past spring and
highly recommend it and other courses. Alas, I can't sign up as I'm signed
up for Computing for Data Analysis (another course using R).

 

https://www.coursera.org/#course/compdata

 

Thanks,

Dale Smith, Ph.D.

Senior Financial Quantitative Analyst

Risk & Compliance

Fiserv.

107 Technology Park

Norcross, GA 30092

Office: 678-375-5315

Mail: dale.smith at fiserv.com <mailto:dale.smith at fiserv.com> 

www.fiserv.com <http://www.fiserv.com/> 

 


	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From jaeyoung at contingentmacro.com  Sun Aug 26 06:35:11 2012
From: jaeyoung at contingentmacro.com (Jaeyoung Ahn)
Date: Sat, 25 Aug 2012 21:35:11 -0700
Subject: [R-SIG-Finance] Quantstrat - external parameters
Message-ID: <CABG5LcZgocp1BjmcfXAyro3FGze5U5XK0CZnTLfACYLF7j15YA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120825/2df9f7b6/attachment.pl>

From brian at braverock.com  Sun Aug 26 14:31:02 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 26 Aug 2012 07:31:02 -0500
Subject: [R-SIG-Finance] Quantstrat - external parameters
In-Reply-To: <CABG5LcZgocp1BjmcfXAyro3FGze5U5XK0CZnTLfACYLF7j15YA@mail.gmail.com>
References: <CABG5LcZgocp1BjmcfXAyro3FGze5U5XK0CZnTLfACYLF7j15YA@mail.gmail.com>
Message-ID: <503A1706.6050507@braverock.com>

On 08/25/2012 11:35 PM, Jaeyoung Ahn wrote:
> First of all, I appreciate all the hard works the developers have poured
> for this package. Is there anyone who could help me with this?
>
> I have searched this question and got to the following answer provided by
> Braverock.
> http://r.789695.n4.nabble.com/Parameters-setting-for-multiple-indicators-with-the-same-argument-names-td3793443.html
>
> I tried to follow his recommendation but couldn't get it work. My codes are
> as follows. It appears that only the first set of parameters are repeated
> over and over. External parameters (shortMA and longMA) don't seem like to
> be updated at all.

At this point I'm going to recommend that you look at

?setParameterDistribution
?setParameterConstraint
?applyParameters

and demo files luxor.3.R and luxor.3.Parameters.R

Like your example below, these demos are for a modified 2-MA cross 
strategy taken from the Tomasini book.  The numbers are chapter numbers, 
as in the book.

Lines 40-43 in luxor.3.Parameters.R set the distributions for each MA, 
and then define the relationship that nFast be less than ('lt') nSlow.

If you want to run these demos yourself, you'll need to choose an 
appropriate parallel backend for foreach.  On Windows, I'd recommend 
doParallel as the easiest place to start.

At the time of the prior thread, referenced above, there was no demo 
code for this type of strategy.  Right now, I think you're better off 
starting with applyParameters than writing your own loop.

Te model you outline below should work, it is likely failing do to a 
misplaced quote() somewhere, though the exact cause isn't obvious to me 
without more study.

One problem that I see immediately is that you are deleting the 
portfolio in each loop iteration, so you would only see the last results 
anyway.  It seems that it would make more sense to create a portfolio 
for each loop index, i, if shortMA<longMA so that you can collect all 
the results.

However, applyParameters does all this for you, so it seems that you'd 
be better off studying these demos instead.

Regards,

    - Brian

> input_data <- read.csv('mktdata.csv')
> EURUSD <- xts(input_data[,3:6], as.POSIXct(input_data[,'Date'], tz='PST',
> format='%Y-%m-%d', drop.time=F))
> names(EURUSD) <- c("OPEN","HIGH","LOW","CLOSE")
>
> shortMA = 5
> longMA = 10
>
> initDate <- as.Date('2000-01-02') - 1
>
> stock.str <- 'EURUSD'
> strat.name <- 'MAX'
> initEq=1000000
>
> dummy <- initPortf(name=strat.name,symbols=stock.str, initDate=initDate)
> dummy <- initAcct(name=strat.name,portfolios=strat.name,
>                    initDate=initDate, initEq=initEq)
> initOrders(portfolio=strat.name,initDate=initDate)
> strat <- strategy(strat.name)
>
> *#indicators:*
> strat <- add.indicator(strategy = strat, name = "SMA", arguments =
> list(x=quote(Cl(mktdata)), *n=quote(shortMA))*,label= "ma_sn" )
> strat <- add.indicator(strategy = strat, name = "SMA", arguments =
> list(x=quote(Cl(mktdata)), *n=quote(longMA))*,label= "ma_ln")
>
> # signals:
> strat <- add.signal(strategy = strat,name="sigCrossover",
>                      arguments = list(columns=c("ma_sn","ma_ln"),
> relationship="gte"),
>                      label="ma_sn.gt.ma_ln")
> strat <- add.signal(strategy = strat,name="sigCrossover",
>                      arguments =
> list(column=c("ma_sn","ma_ln"),relationship="lt"),
>                      label="ma_sn.lt.ma_ln")
>
> # rules:
> strat <- add.rule(strategy = strat,name='ruleSignal',
>                    arguments = list(sigcol="ma_sn.gt.ma_ln",sigval=TRUE,
> orderqty=1000000,
>                                     ordertype='market',
> orderside='long',pricemethod='market'),type='enter',path.dep=T)
> strat <- add.rule(strategy = strat,name='ruleSignal',
>                    arguments = list(sigcol="ma_sn.lt.ma_ln",sigval=TRUE,
> orderqty=-1000000,
>                                     ordertype='market',
> orderside='long',pricemethod='market'),type='exit',path.deop=T)
>
>
> library(PerformanceAnalytics)
>
> ShortM <- c(5,10,15) #,20)
> LongM <- c(20, 40) #, 50,60,100)
>
> parm.comb <- expand.grid(ShortM=ShortM,LongM=LongM)
> num.opts <- nrow(parm.comb)
> res.vec <- rep(NA,num.opts)
> res.vec2 <- res.vec
>
>
> for(i in 1:num.opts) {
>
>    # initialize portfolio and orders
>    try(rm(list=ls(pos=.blotter),pos=.blotter),silent=TRUE)
>    try(rm(list=ls(pos=.strategy),pos=.strategy),silent=TRUE)
>    dummy <- initPortf(name=strat.name,symbols=stock.str, initDate=initDate)
>    initOrders(portfolio=strat.name,initDate=initDate)
>
>    # apply strategy
>    ShortMA <- parm.comb[i,"ShortM"]
>    LongMA <- parm.comb[i,"LongM"]
>
>    if (ShortMA<LongMA) {
>      out<-try(applyStrategy(strategy=strat, portfolios=strat.name,
> verbose=F, parameters=list(shortMA=ShortMA, longMA= LongMA)))
>
>      # calculate performance matric
>      dummy <- updatePortf(Portfolio=strat.name,
> Dates=paste('::',as.Date('2012-08-17'),sep=""))
>
>      trading.pl <- getPortfolio(strat.name)$summary$Net.Trading.PL
>      rets <- trading.pl/initEq
>      omega <- as.numeric(Omega(rets))
>      res.vec[i] <- omega
>
>    }
> }
>
>


From krassimir.kostadinov at gmail.com  Mon Aug 27 12:05:56 2012
From: krassimir.kostadinov at gmail.com (Krassimir Kostadinov)
Date: Mon, 27 Aug 2012 12:05:56 +0200
Subject: [R-SIG-Finance] RQuantLib DiscountFactor
Message-ID: <CAEaUc7cmYEtXtdEg7ow1xAw90EnztL6Jc56MpiG+gpxdsiTDnA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120827/937c7c18/attachment.pl>

From sjansevanrensburg at gmail.com  Mon Aug 27 12:16:05 2012
From: sjansevanrensburg at gmail.com (Stefan Janse van Rensburg)
Date: Mon, 27 Aug 2012 12:16:05 +0200
Subject: [R-SIG-Finance] Free Course "Introduction to,
 Computational Finance	and Financial Econometrics"
In-Reply-To: <mailman.3.1345888802.22555.r-sig-finance@r-project.org>
References: <mailman.3.1345888802.22555.r-sig-finance@r-project.org>
Message-ID: <503B48E5.1090103@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120827/b1bdb0c1/attachment.pl>

From omerle at laposte.net  Mon Aug 27 17:12:40 2012
From: omerle at laposte.net (omerle)
Date: Mon, 27 Aug 2012 17:12:40 +0200
Subject: [R-SIG-Finance] Tr: IBrokers - Instable TWS ? - No idea ?
Message-ID: <927254524.1146910.1346080360199.JavaMail.www@wwinf8221>

Dear,

Without any answer, I try again !

> Message du 22/08/12 11:32
> De : "omerle" 
> A : R-SIG-Finance at r-project.org
> Copie ? : 
> Objet : [R-SIG-Finance] IBrokers - Instable TWS ?
>
> Dear,
> 
> I am currently using the Trader Work Station (TWS) of Intercative Broker and IBrokers 
to 
> try some algorithmic trading.
> I am stuck on something strange : the same code dont lead to same results. Sometimes my 
> orders are transmitted to the TWS and sometimes they are not transmitted. Sometimes, I 
> receive the order status and sometimes I dont.
> It works better on my real account than on my demo account.
> 
> - Have you met the same problem ?
> - How can I have the same behaviour of TWS in demo and real account ? (loading settings 
> from real account isn't a solution)
> 
> Interactive Broker support did not offer any answer to this answer but "Check with 
> IBrokers and R developper".
> 
> I think that the problem is more likely to come from TWS than IBroker/R/my code because 
I 
> get different results with the same code but different TWS accounts.
> 
> Thanks;
> 
> Olivier Merle
> 
> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> Je cr?e ma bo?te mail www.laposte.net
> 

Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
Je cr?e ma bo?te mail www.laposte.net


From jeff.a.ryan at gmail.com  Mon Aug 27 20:03:11 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Mon, 27 Aug 2012 13:03:11 -0500
Subject: [R-SIG-Finance] Tr: IBrokers - Instable TWS ? - No idea ?
In-Reply-To: <927254524.1146910.1346080360199.JavaMail.www@wwinf8221>
References: <927254524.1146910.1346080360199.JavaMail.www@wwinf8221>
Message-ID: <92F58703-5989-4457-A4CE-6F62B5E6F461@gmail.com>

This isn't really an R question, or even a question for that matter. 

You'll need to provide (off list) something reproducible but note that support is somewhat "self serve", or may be possible on a paid basis, but won't be automatic. 

Demo is far from fully functional, paper is closer and live is once again different.  The underlying code is the same but the TWS may not be offering the same response. You are also strongly advised to understand the internals of IBrokers and the raw API before using it. Package won't enforce your understanding, the market will :-)

Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Aug 27, 2012, at 10:12 AM, omerle <omerle at laposte.net> wrote:

> Dear,
> 
> Without any answer, I try again !
> 
>> Message du 22/08/12 11:32
>> De : "omerle" 
>> A : R-SIG-Finance at r-project.org
>> Copie ? : 
>> Objet : [R-SIG-Finance] IBrokers - Instable TWS ?
>> 
>> Dear,
>> 
>> I am currently using the Trader Work Station (TWS) of Intercative Broker and IBrokers 
> to 
>> try some algorithmic trading.
>> I am stuck on something strange : the same code dont lead to same results. Sometimes my 
>> orders are transmitted to the TWS and sometimes they are not transmitted. Sometimes, I 
>> receive the order status and sometimes I dont.
>> It works better on my real account than on my demo account.
>> 
>> - Have you met the same problem ?
>> - How can I have the same behaviour of TWS in demo and real account ? (loading settings 
>> from real account isn't a solution)
>> 
>> Interactive Broker support did not offer any answer to this answer but "Check with 
>> IBrokers and R developper".
>> 
>> I think that the problem is more likely to come from TWS than IBroker/R/my code because 
> I 
>> get different results with the same code but different TWS accounts.
>> 
>> Thanks;
>> 
>> Olivier Merle
>> 
>> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
>> Je cr?e ma bo?te mail www.laposte.net
>> 
> 
> Une messagerie gratuite, garantie ? vie et des services en plus, ?a vous tente ?
> Je cr?e ma bo?te mail www.laposte.net
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From optionsraghu at gmail.com  Thu Aug 30 23:37:58 2012
From: optionsraghu at gmail.com (Raghuraman Ramachandran)
Date: Thu, 30 Aug 2012 22:37:58 +0100
Subject: [R-SIG-Finance] Technical understanding for backtesting
Message-ID: <CADgEnDkPcx5H5wX2pO9iNgnWLTuqWwH8R0z8D=xiRV5pLzRssw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120830/ba978ab0/attachment.pl>

From rstatistics.user at gmail.com  Fri Aug 31 17:55:43 2012
From: rstatistics.user at gmail.com (Max Frisch)
Date: Fri, 31 Aug 2012 17:55:43 +0200
Subject: [R-SIG-Finance] Creating an array from correlation matrices
In-Reply-To: <CADgEnDkPcx5H5wX2pO9iNgnWLTuqWwH8R0z8D=xiRV5pLzRssw@mail.gmail.com>
References: <CADgEnDkPcx5H5wX2pO9iNgnWLTuqWwH8R0z8D=xiRV5pLzRssw@mail.gmail.com>
Message-ID: <8009B182-E494-4306-B8D2-6848F9DA0233@gmail.com>

Hello everyone,

a hopefully easy to solve problem from an R novice...

I try to calculate a number of correlation matrices that finally should be combined in a three-dimensional array.


Here the my code with an R dataset as an example.

## Creation an array of correlation matrices from a rolling window application

TS <- EuStockMarkets
# Load internal dataset

n <- 30
# Choose size of rolling time window

T <- c(1:nrow(TS))
# Define number of steps

X <- array(data = NA, dim = c(ncol(TS), ncol(TS), nrow(TS)))
# Create data array

for (t in T[1:(length(T)-n)]){
  X[t] = cor(TS[t:(t+n), 1:ncol(TS)], use = "pairwise.complete.obs")
}
# Calculate correlation matrices


Unfortunately, I only get a warning that the dimensions do not fit... Where is the mistake?

THANKS A LOT!

Nico

From j_cuisinier at hotmail.com  Fri Aug 31 18:11:08 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Fri, 31 Aug 2012 18:11:08 +0200
Subject: [R-SIG-Finance] Creating an array from correlation matrices
In-Reply-To: <8009B182-E494-4306-B8D2-6848F9DA0233@gmail.com>
References: <CADgEnDkPcx5H5wX2pO9iNgnWLTuqWwH8R0z8D=xiRV5pLzRssw@mail.gmail.com>,
	<8009B182-E494-4306-B8D2-6848F9DA0233@gmail.com>
Message-ID: <COL102-W359ACD00370A5AF96C05188FA60@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120831/d6b4c0ec/attachment.pl>

From bogaso.christofer at gmail.com  Sat Sep  1 17:24:34 2012
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Sat, 1 Sep 2012 21:09:34 +0545
Subject: [R-SIG-Finance] Incomplete Forward Curve
Message-ID: <CA+dpOJ==9t7j-pd6OYGQ86Xvit9Wo+9ND8V3soJbpkVs+2ab=g@mail.gmail.com>

Dear all, let say I have a Forward Curve with few missing data for a
particular day. Means, let say on 01-09-2010 I have the Forward prices
for a stock for each months: M1, M2, ..., M24, but M10-M13 are
missing. In such case, what is best way to estimate those missing
quote, given the quotes of other months?

To say best, I mean in Finance-Industry which method is used mostly?
Is it just 'Cubic spline'? or anything else?

Can people here share their experiences on that?

Thanks and regards,


From rory.winston at gmail.com  Sun Sep  2 13:54:11 2012
From: rory.winston at gmail.com (Rory Winston)
Date: Sun, 2 Sep 2012 21:54:11 +1000
Subject: [R-SIG-Finance] Incomplete Forward Curve
In-Reply-To: <mailman.3.1346580002.22186.r-sig-finance@r-project.org>
References: <mailman.3.1346580002.22186.r-sig-finance@r-project.org>
Message-ID: <4637D4FA-6B06-4E35-8684-8CF13AA45BF3@gmail.com>


On 02/09/2012, at 8:00 PM, r-sig-finance-request at r-project.org wrote:


Simple linear interpolation or cubic spline are generally used in practise. Either should be sufficient for your use case.

Thanks
-- Rory

> 
> 
> Dear all, let say I have a Forward Curve with few missing data for a
> particular day. Means, let say on 01-09-2010 I have the Forward prices
> for a stock for each months: M1, M2, ..., M24, but M10-M13 are
> missing. In such case, what is best way to estimate those missing
> quote, given the quotes of other months?
> 
> To say best, I mean in Finance-Industry which method is used mostly?
> Is it just 'Cubic spline'? or anything else?
> 
> Can people here share their experiences on that?
> 
> Thanks and regards,
> 


From mcooganj at gmail.com  Sun Sep  2 22:31:18 2012
From: mcooganj at gmail.com (Matthew Johnson)
Date: Mon, 3 Sep 2012 06:31:18 +1000
Subject: [R-SIG-Finance] R-SIG-Finance Digest, Vol 100, Issue 2
In-Reply-To: <mailman.3.1346580002.22186.r-sig-finance@r-project.org>
References: <mailman.3.1346580002.22186.r-sig-finance@r-project.org>
Message-ID: <-1283801901231847080@unknownmsgid>

If you have longer and shorter forwards, as you describe, the missing
rates are implied by what you know and you can solve for the no arb
value.

If you have a lot of data, with a sprinkling of missingness, I would
use PCA as my first 'fix'. The quotes won't be a good as what you get
from a curve build, but it is fast and efficient.



On 02/09/2012, at 8:03 PM, "r-sig-finance-request at r-project.org"
<r-sig-finance-request at r-project.org> wrote:

> Send R-SIG-Finance mailing list submissions to
>    r-sig-finance at r-project.org
>
> To subscribe or unsubscribe via the World Wide Web, visit
>    https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> or, via email, send a message with subject or body 'help' to
>    r-sig-finance-request at r-project.org
>
> You can reach the person managing the list at
>    r-sig-finance-owner at r-project.org
>
> When replying, please edit your Subject line so it is more specific
> than "Re: Contents of R-SIG-Finance digest..."
>
>
> Today's Topics:
>
>   1. Incomplete Forward Curve (Christofer Bogaso)
>
>
> ----------------------------------------------------------------------
>
> Message: 1
> Date: Sat, 1 Sep 2012 21:09:34 +0545
> From: Christofer Bogaso <bogaso.christofer at gmail.com>
> To: r-sig-finance at r-project.org
> Subject: [R-SIG-Finance] Incomplete Forward Curve
> Message-ID:
>    <CA+dpOJ==9t7j-pd6OYGQ86Xvit9Wo+9ND8V3soJbpkVs+2ab=g at mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> Dear all, let say I have a Forward Curve with few missing data for a
> particular day. Means, let say on 01-09-2010 I have the Forward prices
> for a stock for each months: M1, M2, ..., M24, but M10-M13 are
> missing. In such case, what is best way to estimate those missing
> quote, given the quotes of other months?
>
> To say best, I mean in Finance-Industry which method is used mostly?
> Is it just 'Cubic spline'? or anything else?
>
> Can people here share their experiences on that?
>
> Thanks and regards,
>
>
>
> ------------------------------
>
> _______________________________________________
> R-SIG-Finance mailing list
> R-SIG-Finance at r-project.org
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>
>
> End of R-SIG-Finance Digest, Vol 100, Issue 2
> *********************************************


From pietrader at gmail.com  Mon Sep  3 06:27:57 2012
From: pietrader at gmail.com (pie trader)
Date: Sun, 2 Sep 2012 21:27:57 -0700
Subject: [R-SIG-Finance] blotter updatePortf issue..
Message-ID: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120902/b8e3d864/attachment.pl>

From me at censix.com  Mon Sep  3 08:30:01 2012
From: me at censix.com (me)
Date: Mon, 3 Sep 2012 08:30:01 +0200
Subject: [R-SIG-Finance] blotter updatePortf issue..
In-Reply-To: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>
References: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>
Message-ID: <20120903083001.52eb725e@desktop1>


The post that mentions your error

http://r.789695.n4.nabble.com/blotter-updatePortf-issues-tp4635933.html

also mentions a workaround:

http://r-forge.r-project.org/tracker/index.php?func=detail&aid=2116&group_id=118&atid=516

Detailed description
While running demo/macd.R in the quantstrat package with --vanilla, I
got the following error:

Error in if (length(c(year, month, day, hour, min, sec)) == 6 &&
c(year, : missing value where TRUE/FALSE needed

It appears that this error is generated by .parse8061(), because there
is no TZ defined. Although there is a test for TZ=='' in
the .parse8061() function, that does not seem to work .... (didn't look
any deeper, sorry ;-) )

Setting TZ to eg. "UTC" fixes the problem.






------------------------------------------------------------------
Soren Wilkening

http://censix.com


From zhucai4 at gmail.com  Mon Sep  3 10:33:50 2012
From: zhucai4 at gmail.com (cai zhu)
Date: Mon, 3 Sep 2012 16:33:50 +0800
Subject: [R-SIG-Finance] A question about function: dccsim in rmgarch package
Message-ID: <CAPTFotgwse8=0c7s_-XQouoz2UUKC0gVxRrXK1YOPLj+SAV4YQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120903/b570dc62/attachment.pl>

From alexios at 4dscape.com  Mon Sep  3 13:24:53 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Mon, 03 Sep 2012 12:24:53 +0100
Subject: [R-SIG-Finance] A question about function: dccsim in rmgarch
 package
In-Reply-To: <CAPTFotgwse8=0c7s_-XQouoz2UUKC0gVxRrXK1YOPLj+SAV4YQ@mail.gmail.com>
References: <CAPTFotgwse8=0c7s_-XQouoz2UUKC0gVxRrXK1YOPLj+SAV4YQ@mail.gmail.com>
Message-ID: <50449385.1020305@4dscape.com>

Hi ZHU Cai,

The returned object is of class "DCCsim" and more generally "mGARCHsim". 
All mGARCHsim classes have an "msim" and "model" slot:
slotNames(dccsim)
[1] "msim"  "model"

names(dccsim at msim)
[1] "simH"   "simR"   "simQ"   "simX"   "simZ"   "simRes" "rseed"

- simH (conditional covariance) is a list of 3d arrays of length m.sim 
and array length no.assets x no.assets x n.sim

- simR (conditional correlation) is a list of 3d arrays of length m.sim 
and array length no.assets x no.assets x n.sim

- simQ (conditional correlation DCC proxy process) is a list of 3d 
arrays of length m.sim and array length no.assets x no.assets x n.sim

- simX (conditional mean)  is a list of matrices of length m.sim and 
dimensions n.sim x no.assets.

Therefore, to obtain the m.sim x no.assets matrix of the simulated 
1-ahead conditional mean:

t(sapply(dccsim at msim$simX, FUN = function(x) x))


Regards,
Alexios

On 03/09/2012 09:33, cai zhu wrote:
> Dear All:
>
> Recently, I need to do a asset allocation exercise in R using rmgarch
> package. One-step ahead out of sample returns is needed. I use the
> following code:
>
> uspec <- ugarchspec(mean.model=list(armaOrder=c(1,0), include.mean=FALSE),
>                      variance.model=list(garchOrder=c(1,1), model="sGARCH"),
>                      distribution.model="norm")
>
> mspec <- multispec(replicate(2, uspec))
>
> dspec <- dccspec(mspec, VAR=FALSE, robust=FALSE, lag=1,
>                   dccOrder=c(1, 1), asymmetric=FALSE, type="2-step",
>                   distribution = "mvnorm")
>
> dccgarch <- dccfit(dspec, subdata, solver="solnp",
> solver.control=list(trace=TRUE))
> dccsim <- dccsim(dccgarch, n.sim=1, m.sim=10000, startMethod="sample")
>
> Basically, I need 10000 different 1-step ahead returns for a 2-dimension
> time series. However, I do not know how to extract simulated returns from
> dccsim. I have read the rmgarch.tests, but still get no clue about it. Any
> help is appreciated. Thank you very much.
>
> Regards
>                              ZHU Cai
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From pietrader at gmail.com  Mon Sep  3 18:46:37 2012
From: pietrader at gmail.com (pie trader)
Date: Mon, 3 Sep 2012 09:46:37 -0700
Subject: [R-SIG-Finance] blotter updatePortf issue..
In-Reply-To: <20120903083001.52eb725e@desktop1>
References: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>
	<20120903083001.52eb725e@desktop1>
Message-ID: <CAG5Ec03ZMJ8ja+NBrsNKWMYncSWuLCEsKB2kg6hj7szbRdkFrw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120903/f57787f9/attachment.pl>

From pietrader at gmail.com  Mon Sep  3 19:10:17 2012
From: pietrader at gmail.com (pie trader)
Date: Mon, 3 Sep 2012 10:10:17 -0700
Subject: [R-SIG-Finance] blotter updatePortf issue..
In-Reply-To: <20120903083001.52eb725e@desktop1>
References: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>
	<20120903083001.52eb725e@desktop1>
Message-ID: <CAG5Ec02C-he1FNjNr+J8QfEeYM_8UDzKo8Fx0CSv55BMCVj7Nw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120903/592debe9/attachment.pl>

From gsee000 at gmail.com  Mon Sep  3 21:14:52 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 3 Sep 2012 14:14:52 -0500
Subject: [R-SIG-Finance] blotter updatePortf issue..
In-Reply-To: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>
References: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>
Message-ID: <CA+xi=qYCcNehZw5xRH6FTVpZvegvTSnngw6-Wmtc=G+FMW_Wqw@mail.gmail.com>

Hi Pie,

Thanks for providing reproducible code.  I committed a patch in Rev.
1151 that I believe will fix your problem.  If you need help checking
out and building the latest revision, see this post on SO:
http://stackoverflow.com/a/11105132/967840

Internally, the code was checking to see if "Dates" was timeBased.  If
it wasn't, it was being converted to a timeBased vector.  But, later,
the code was treating "Dates" as if it were not timeBased.  Hopefully
my patch fixes your problem and doesn't create others.

There are a couple other things to mention.  First, these lines are
not going to work:

    updateAcct(account, Dates=paste('::',as.Date(Sys.time()),sep=''))
    updateEndEq(account, Dates=paste('::',as.Date(Sys.time()),sep=''))

These functions do not support that type of "Dates" strings.  You'll
have to either use Dates=NULL, or supply both starting and ending
dates like this:

    updateAcct(account, Dates=paste(initDate, as.Date(Sys.time()),sep='::') )
    updateEndEq(account, Dates=paste(initDate, as.Date(Sys.time()),sep='::') )


Second, I didn't get these warnings that you got

>> > getSymbols(symbols, src='yahoo',
>> index.class=c("POSIXt","POSIXct"),from='2001-01-01')
>> [1] "QQQ" "IWM"
>> Warning messages:
>> 1: In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>>   downloaded length 147933 != reported length 200
>> 2: In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>>   downloaded length 147996 != reported length 200

I'm not sure why you get those warnings, but your version of quantmod
is a little older than mine (the R-forge version).

HTH,
Garrett


On Sun, Sep 2, 2012 at 11:27 PM, pie trader <pietrader at gmail.com> wrote:
> Hi,
> Currently I am stuck on an error with updatePortf function in blotter. The
> error message is same as the issue mentioned on R-sig-finance previously
> i.e.,
> http://r.789695.n4.nabble.com/blotter-updatePortf-issues-tp4635933.html
>
>>
>> updatePortf(Portfolio=portfolio,Dates=paste('::',as.Date(Sys.time()),sep=''))
>> Error in if (length(c(year, month, day, hour, min, sec)) == 6 && c(year,
>>  :
>>   missing value where TRUE/FALSE needed
>> In addition: Warning message:
>> In as_numeric(YYYY) : NAs introduced by coercion
>
>


From me at censix.com  Mon Sep  3 21:36:05 2012
From: me at censix.com (soren wilkening)
Date: Mon, 3 Sep 2012 12:36:05 -0700 (PDT)
Subject: [R-SIG-Finance] blotter updatePortf issue..
In-Reply-To: <CAG5Ec03ZMJ8ja+NBrsNKWMYncSWuLCEsKB2kg6hj7szbRdkFrw@mail.gmail.com>
References: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>
	<20120903083001.52eb725e@desktop1>
	<CAG5Ec03ZMJ8ja+NBrsNKWMYncSWuLCEsKB2kg6hj7szbRdkFrw@mail.gmail.com>
Message-ID: <1346700965441-4642083.post@n4.nabble.com>

since Jeff wasn't able to reproduce the error, according to the earlier post,
I can only guess (and that won't help you). It may just have to do with the
fact that you are running R on Windows.... (mingw32). When it comes to R,
things work best on Linux, and they *mostly* work on Windows. (my
experience)



-----
http://censix.com
--
View this message in context: http://r.789695.n4.nabble.com/blotter-updatePortf-issue-tp4642046p4642083.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From pietrader at gmail.com  Mon Sep  3 22:14:23 2012
From: pietrader at gmail.com (pie trader)
Date: Mon, 3 Sep 2012 13:14:23 -0700
Subject: [R-SIG-Finance] blotter updatePortf issue..
In-Reply-To: <CA+xi=qYCcNehZw5xRH6FTVpZvegvTSnngw6-Wmtc=G+FMW_Wqw@mail.gmail.com>
References: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>
	<CA+xi=qYCcNehZw5xRH6FTVpZvegvTSnngw6-Wmtc=G+FMW_Wqw@mail.gmail.com>
Message-ID: <CAG5Ec03_bQ-kNYzPJrqAT4fKL-ZyW0rc-2Xip+A2v5LgQdXRdg@mail.gmail.com>

Hi Garrett,
Thank you for both the fix as well as for your guidance. I will go
through the links and try to build the latest version and try again
along with the changes suggested.

Regarding warning messages (while downloading data from Yahoo), I have
been getting these messages right from the time I started using R
(including on demo code). So I just assumed it was a harmless message
everyone gets. I will check it out.

Regards,
Pie

On Mon, Sep 3, 2012 at 12:14 PM, G See <gsee000 at gmail.com> wrote:
>
> Hi Pie,
>
> Thanks for providing reproducible code.  I committed a patch in Rev.
> 1151 that I believe will fix your problem.  If you need help checking
> out and building the latest revision, see this post on SO:
> http://stackoverflow.com/a/11105132/967840
>
> Internally, the code was checking to see if "Dates" was timeBased.  If
> it wasn't, it was being converted to a timeBased vector.  But, later,
> the code was treating "Dates" as if it were not timeBased.  Hopefully
> my patch fixes your problem and doesn't create others.
>
> There are a couple other things to mention.  First, these lines are
> not going to work:
>
>     updateAcct(account, Dates=paste('::',as.Date(Sys.time()),sep=''))
>     updateEndEq(account, Dates=paste('::',as.Date(Sys.time()),sep=''))
>
> These functions do not support that type of "Dates" strings.  You'll
> have to either use Dates=NULL, or supply both starting and ending
> dates like this:
>
>     updateAcct(account, Dates=paste(initDate, as.Date(Sys.time()),sep='::') )
>     updateEndEq(account, Dates=paste(initDate, as.Date(Sys.time()),sep='::') )
>
>
> Second, I didn't get these warnings that you got
>
> >> > getSymbols(symbols, src='yahoo',
> >> index.class=c("POSIXt","POSIXct"),from='2001-01-01')
> >> [1] "QQQ" "IWM"
> >> Warning messages:
> >> 1: In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
> >>   downloaded length 147933 != reported length 200
> >> 2: In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
> >>   downloaded length 147996 != reported length 200
>
> I'm not sure why you get those warnings, but your version of quantmod
> is a little older than mine (the R-forge version).
>
> HTH,
> Garrett
>
>
> On Sun, Sep 2, 2012 at 11:27 PM, pie trader <pietrader at gmail.com> wrote:
> > Hi,
> > Currently I am stuck on an error with updatePortf function in blotter. The
> > error message is same as the issue mentioned on R-sig-finance previously
> > i.e.,
> > http://r.789695.n4.nabble.com/blotter-updatePortf-issues-tp4635933.html
> >
> >>
> >> updatePortf(Portfolio=portfolio,Dates=paste('::',as.Date(Sys.time()),sep=''))
> >> Error in if (length(c(year, month, day, hour, min, sec)) == 6 && c(year,
> >>  :
> >>   missing value where TRUE/FALSE needed
> >> In addition: Warning message:
> >> In as_numeric(YYYY) : NAs introduced by coercion
> >
> >


From bogaso.christofer at gmail.com  Mon Sep  3 22:20:47 2012
From: bogaso.christofer at gmail.com (Christofer Bogaso)
Date: Tue, 4 Sep 2012 02:05:47 +0545
Subject: [R-SIG-Finance] A question on VaR
Message-ID: <CA+dpOJ=QG+1eNROsLz6mabDiqtDGK7utXdHfMv1zPjCHF=RFgg@mail.gmail.com>

Dear all, I am preparing a presentation to demonstate why
Value-at-Risk (VaR) is not a good measure for Risk. Basically, my
intention is to show that: For 2 drastically different distributions,
the VaR (i.e. 5th percentiles) can be just same.

Can somebody help me to find such drastically different two
statistical distributions which have same 5th percentile?

Thanks for your help.


From rhelpacc at gmail.com  Tue Sep  4 03:10:00 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Mon, 3 Sep 2012 21:10:00 -0400
Subject: [R-SIG-Finance] RBloomberg package
Message-ID: <CAA7=MyUAVGtO4K2XovAgT=-t8iUqS6MZjB1DuLVOHhCgg-B3aw@mail.gmail.com>

Hi,

I am wondering what the best way to interact with Bloomberg from
within R now. I am trying to download RBloomberg by following
instruction at the following website from findata.org. It turns out
that the instruction seems stale. I cannot locate the package.

http://findata.org/rbloomberg/rbloomberg-manual-0-4-144.pdf

> install.packages("RBloomberg", repos="http://r.findata.org")
Installing package(s) into ?C:/Users/chibi/Documents/R/win-library/2.15?
(as ?lib? is unspecified)
Warning in install.packages :
  package ?RBloomberg? is not available (for R version 2.15.1)

I am wondering the package no longer exists? If not, what other
choices do I have? Thank you.

Robert


From n-e-w at qtradr.net  Tue Sep  4 03:22:18 2012
From: n-e-w at qtradr.net (Nick White)
Date: Tue, 4 Sep 2012 11:22:18 +1000
Subject: [R-SIG-Finance] A question on VaR
In-Reply-To: <CA+dpOJ=QG+1eNROsLz6mabDiqtDGK7utXdHfMv1zPjCHF=RFgg@mail.gmail.com>
References: <CA+dpOJ=QG+1eNROsLz6mabDiqtDGK7utXdHfMv1zPjCHF=RFgg@mail.gmail.com>
Message-ID: <CAH+4RFv0k4GjEE34xO497JwM5mF-r9K0mP7Cw4JZVGwpUnTqjg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120904/e0193788/attachment.pl>

From rhelpacc at gmail.com  Tue Sep  4 03:31:11 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Mon, 3 Sep 2012 21:31:11 -0400
Subject: [R-SIG-Finance] RBloomberg package
In-Reply-To: <CAH+4RFt65p3dR4e=irM44DscMTF8EHOkMET1TgUZD2s9pUKQtw@mail.gmail.com>
References: <CAA7=MyUAVGtO4K2XovAgT=-t8iUqS6MZjB1DuLVOHhCgg-B3aw@mail.gmail.com>
	<CAH+4RFt65p3dR4e=irM44DscMTF8EHOkMET1TgUZD2s9pUKQtw@mail.gmail.com>
Message-ID: <CAA7=MyWOQeqAgC7+BS-fn_izuCSrMQpB+Q-5457XQ9kRypzRTQ@mail.gmail.com>

May I ask another question? I pass the installation. But when I try to
load the package, it keeps saying that Rbdg does not exist which is
weird to me.

Just wondering you ran into the same issue? My R version is 2.15.1. Thank you.

> library(Rbdg)
Error in library(Rbdg) : there is no package called ?Rbdg?



On Mon, Sep 3, 2012 at 9:18 PM, Nick White <n-e-w at qtradr.net> wrote:
> RBloomberg has been superseded by 'Rbbg' (a quick google search will explain
> the backstory)
>
> You can install the latest version by entering the following command in your
> R session:
>
> install.packages('Rbbg',repos='http://r.findata.org')
>
> The documentation should ably get you started.
>
> On Tue, Sep 4, 2012 at 11:10 AM, Robert A'gata <rhelpacc at gmail.com> wrote:
>>
>> Hi,
>>
>> I am wondering what the best way to interact with Bloomberg from
>> within R now. I am trying to download RBloomberg by following
>> instruction at the following website from findata.org. It turns out
>> that the instruction seems stale. I cannot locate the package.
>>
>> http://findata.org/rbloomberg/rbloomberg-manual-0-4-144.pdf
>>
>> > install.packages("RBloomberg", repos="http://r.findata.org")
>> Installing package(s) into ?C:/Users/chibi/Documents/R/win-library/2.15?
>> (as ?lib? is unspecified)
>> Warning in install.packages :
>>   package ?RBloomberg? is not available (for R version 2.15.1)
>>
>> I am wondering the package no longer exists? If not, what other
>> choices do I have? Thank you.
>>
>> Robert
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>


From rex at nosyntax.net  Tue Sep  4 03:35:33 2012
From: rex at nosyntax.net (rex)
Date: Mon, 3 Sep 2012 18:35:33 -0700
Subject: [R-SIG-Finance] RBloomberg package
In-Reply-To: <CAA7=MyWOQeqAgC7+BS-fn_izuCSrMQpB+Q-5457XQ9kRypzRTQ@mail.gmail.com>
References: <CAA7=MyUAVGtO4K2XovAgT=-t8iUqS6MZjB1DuLVOHhCgg-B3aw@mail.gmail.com>
	<CAH+4RFt65p3dR4e=irM44DscMTF8EHOkMET1TgUZD2s9pUKQtw@mail.gmail.com>
	<CAA7=MyWOQeqAgC7+BS-fn_izuCSrMQpB+Q-5457XQ9kRypzRTQ@mail.gmail.com>
Message-ID: <20120904013533.GB3650@ninja.nosyntax.net>

Robert A'gata <rhelpacc at gmail.com> [2012-09-03 18:31]:
>May I ask another question? I pass the installation. But when I try to
>load the package, it keeps saying that Rbdg does not exist which is
>weird to me.
>
>Just wondering you ran into the same issue? My R version is 2.15.1. Thank you.
>
>> library(Rbdg)
>Error in library(Rbdg) : there is no package called ?Rbdg?

Rbdg != Rbbg

-rex

>> RBloomberg has been superseded by 'Rbbg' (a quick google search will explain
>> the backstory)
>>
>> You can install the latest version by entering the following command in your
>> R session:
>>
>> install.packages('Rbbg',repos='http://r.findata.org')


From n-e-w at qtradr.net  Tue Sep  4 03:37:10 2012
From: n-e-w at qtradr.net (Nick White)
Date: Tue, 4 Sep 2012 11:37:10 +1000
Subject: [R-SIG-Finance] RBloomberg package
In-Reply-To: <CAA7=MyWOQeqAgC7+BS-fn_izuCSrMQpB+Q-5457XQ9kRypzRTQ@mail.gmail.com>
References: <CAA7=MyUAVGtO4K2XovAgT=-t8iUqS6MZjB1DuLVOHhCgg-B3aw@mail.gmail.com>
	<CAH+4RFt65p3dR4e=irM44DscMTF8EHOkMET1TgUZD2s9pUKQtw@mail.gmail.com>
	<CAA7=MyWOQeqAgC7+BS-fn_izuCSrMQpB+Q-5457XQ9kRypzRTQ@mail.gmail.com>
Message-ID: <CAH+4RFuDG_Hj05winK8FWC+ww_rqCAFYth_qJN4G-TZBjj1OcA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120904/a605bd27/attachment.pl>

From n-e-w at qtradr.net  Tue Sep  4 03:38:43 2012
From: n-e-w at qtradr.net (Nick White)
Date: Tue, 4 Sep 2012 11:38:43 +1000
Subject: [R-SIG-Finance] RBloomberg package
In-Reply-To: <CAH+4RFuDG_Hj05winK8FWC+ww_rqCAFYth_qJN4G-TZBjj1OcA@mail.gmail.com>
References: <CAA7=MyUAVGtO4K2XovAgT=-t8iUqS6MZjB1DuLVOHhCgg-B3aw@mail.gmail.com>
	<CAH+4RFt65p3dR4e=irM44DscMTF8EHOkMET1TgUZD2s9pUKQtw@mail.gmail.com>
	<CAA7=MyWOQeqAgC7+BS-fn_izuCSrMQpB+Q-5457XQ9kRypzRTQ@mail.gmail.com>
	<CAH+4RFuDG_Hj05winK8FWC+ww_rqCAFYth_qJN4G-TZBjj1OcA@mail.gmail.com>
Message-ID: <CAH+4RFtAF-U+6_zHkj919i96_GJD_qLkHJbU5sJu1umQ91VNXg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120904/a9be6d76/attachment.pl>

From nikos.rachmanis at gmail.com  Tue Sep  4 04:02:44 2012
From: nikos.rachmanis at gmail.com (Nikos Rachmanis)
Date: Mon, 3 Sep 2012 22:02:44 -0400
Subject: [R-SIG-Finance] Performance Analytics Calendar Returns
Message-ID: <CAC=5KeJWMYfhePhj7nBXARpUYv4Ej-BAHONfO61Y60BU3Fs4ag@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120903/8613a186/attachment.pl>

From pietrader at gmail.com  Tue Sep  4 08:46:02 2012
From: pietrader at gmail.com (pie trader)
Date: Mon, 3 Sep 2012 23:46:02 -0700
Subject: [R-SIG-Finance] blotter updatePortf issue..
In-Reply-To: <CA+xi=qYqSzg=xbjEOqCr+0j-fFWbS2QL1P107dhuhbDLhKSOJw@mail.gmail.com>
References: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>
	<CA+xi=qYCcNehZw5xRH6FTVpZvegvTSnngw6-Wmtc=G+FMW_Wqw@mail.gmail.com>
	<CAG5Ec03_bQ-kNYzPJrqAT4fKL-ZyW0rc-2Xip+A2v5LgQdXRdg@mail.gmail.com>
	<CA+xi=qZZOjycw5ztCpxyWO2D3mKfh=bAbCshM3dg5J-amccJKw@mail.gmail.com>
	<CA+xi=qYqSzg=xbjEOqCr+0j-fFWbS2QL1P107dhuhbDLhKSOJw@mail.gmail.com>
Message-ID: <CAG5Ec01EOFxOi44qb7V+4UBPT6DfigmC2_vPxx7vN6k3qqkZWw@mail.gmail.com>

Hi Garrett,
Thank you very much for the patch and the instructions. I was able to
execute the updatePortf, updateAcct and updateEndEq without any errors
after updating the package followed by date changes you suggested.

Regards,
Pie

On Mon, Sep 3, 2012 at 5:11 PM, G See <gsee000 at gmail.com> wrote:
> FYI, R-Forge has built Rev. 1151.  So, you should be able to install with
>
>     install.packages("blotter", repos="http://R-Forge.R-project.org")
>
> On Mon, Sep 3, 2012 at 3:37 PM, G See <gsee000 at gmail.com> wrote:
>> If you are able to checkout the code using an svn client, but can't
>> figure out how to build it, you can probably install it with something
>> similar to this:
>>
>>     install.packages("/path/to/svn/blotter/pkg/blotter/", repos=NULL,
>> type='source')
>>
>> You want to see
>>     > packageVersion("blotter")
>>     [1] ?0.8.11?
>>
>> Good luck,
>> Garrett
>>
>> On Mon, Sep 3, 2012 at 3:14 PM, pie trader <pietrader at gmail.com> wrote:
>>> Hi Garrett,
>>> Thank you for both the fix as well as for your guidance. I will go
>>> through the links and try to build the latest version and try again
>>> along with the changes suggested.
>>>
>>> Regarding warning messages (while downloading data from Yahoo), I have
>>> been getting these messages right from the time I started using R
>>> (including on demo code). So I just assumed it was a harmless message
>>> everyone gets. I will check it out.
>>>
>>> Regards,
>>> Pie
>>>
>>> On Mon, Sep 3, 2012 at 12:14 PM, G See <gsee000 at gmail.com> wrote:
>>>>
>>>> Hi Pie,
>>>>
>>>> Thanks for providing reproducible code.  I committed a patch in Rev.
>>>> 1151 that I believe will fix your problem.  If you need help checking
>>>> out and building the latest revision, see this post on SO:
>>>> http://stackoverflow.com/a/11105132/967840
>>>>
>>>> Internally, the code was checking to see if "Dates" was timeBased.  If
>>>> it wasn't, it was being converted to a timeBased vector.  But, later,
>>>> the code was treating "Dates" as if it were not timeBased.  Hopefully
>>>> my patch fixes your problem and doesn't create others.
>>>>
>>>> There are a couple other things to mention.  First, these lines are
>>>> not going to work:
>>>>
>>>>     updateAcct(account, Dates=paste('::',as.Date(Sys.time()),sep=''))
>>>>     updateEndEq(account, Dates=paste('::',as.Date(Sys.time()),sep=''))
>>>>
>>>> These functions do not support that type of "Dates" strings.  You'll
>>>> have to either use Dates=NULL, or supply both starting and ending
>>>> dates like this:
>>>>
>>>>     updateAcct(account, Dates=paste(initDate, as.Date(Sys.time()),sep='::') )
>>>>     updateEndEq(account, Dates=paste(initDate, as.Date(Sys.time()),sep='::') )
>>>>
>>>>
>>>> Second, I didn't get these warnings that you got
>>>>
>>>> >> > getSymbols(symbols, src='yahoo',
>>>> >> index.class=c("POSIXt","POSIXct"),from='2001-01-01')
>>>> >> [1] "QQQ" "IWM"
>>>> >> Warning messages:
>>>> >> 1: In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>>>> >>   downloaded length 147933 != reported length 200
>>>> >> 2: In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>>>> >>   downloaded length 147996 != reported length 200
>>>>
>>>> I'm not sure why you get those warnings, but your version of quantmod
>>>> is a little older than mine (the R-forge version).
>>>>
>>>> HTH,
>>>> Garrett
>>>>
>>>>
>>>> On Sun, Sep 2, 2012 at 11:27 PM, pie trader <pietrader at gmail.com> wrote:
>>>> > Hi,
>>>> > Currently I am stuck on an error with updatePortf function in blotter. The
>>>> > error message is same as the issue mentioned on R-sig-finance previously
>>>> > i.e.,
>>>> > http://r.789695.n4.nabble.com/blotter-updatePortf-issues-tp4635933.html
>>>> >
>>>> >>
>>>> >> updatePortf(Portfolio=portfolio,Dates=paste('::',as.Date(Sys.time()),sep=''))
>>>> >> Error in if (length(c(year, month, day, hour, min, sec)) == 6 && c(year,
>>>> >>  :
>>>> >>   missing value where TRUE/FALSE needed
>>>> >> In addition: Warning message:
>>>> >> In as_numeric(YYYY) : NAs introduced by coercion
>>>> >
>>>> >


From kk2250 at optonline.net  Tue Sep  4 13:39:52 2012
From: kk2250 at optonline.net (Kris)
Date: Tue, 04 Sep 2012 07:39:52 -0400
Subject: [R-SIG-Finance] Performance Analytics Calendar Returns
In-Reply-To: <CAC=5KeJWMYfhePhj7nBXARpUYv4Ej-BAHONfO61Y60BU3Fs4ag@mail.gmail.com>
References: <CAC=5KeJWMYfhePhj7nBXARpUYv4Ej-BAHONfO61Y60BU3Fs4ag@mail.gmail.com>
Message-ID: <16E755C4-F88D-487E-892D-B4E8231A3EE2@optonline.net>


> 
> I am trying to use the table.CalendarReturns from the Performance Analytics
> package with daily returns.
> 

Last I checked the help/usage file states that it expects monthly return data. There are some zOo and xts functions that do this..

?to.monthly

?table.Annualizedreturns

Cheers
Krishna


> t(table.CalendarReturns(tradedata$daily.pnl.norm["1998/2012"],as.perc=TRUE,digits=4,geometric=TRUE))
> 
> 1) is there anything wrong with my command? if not, is there any way to
> transform the daily results to monthly?
> 
> 2) is there a function that would give me the same table for volatility and
> sharpe?
> 
> Thank you all in advance,
> 
> Nikos
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From nikos.rachmanis at gmail.com  Wed Sep  5 07:21:06 2012
From: nikos.rachmanis at gmail.com (Nikos Rachmanis)
Date: Wed, 5 Sep 2012 01:21:06 -0400
Subject: [R-SIG-Finance] Performance Analytics Calendar Returns
In-Reply-To: <16E755C4-F88D-487E-892D-B4E8231A3EE2@optonline.net>
References: <CAC=5KeJWMYfhePhj7nBXARpUYv4Ej-BAHONfO61Y60BU3Fs4ag@mail.gmail.com>
	<16E755C4-F88D-487E-892D-B4E8231A3EE2@optonline.net>
Message-ID: <CAC=5Ke+Vsp+wqYDDyfnz-U18KHkWSH8ayiL-a391mw_jLCK4Cw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120905/e679d33b/attachment.pl>

From Ankit.Mital at thesmartcube.com  Wed Sep  5 11:02:16 2012
From: Ankit.Mital at thesmartcube.com (Ankit Mital)
Date: Wed, 5 Sep 2012 09:02:16 +0000
Subject: [R-SIG-Finance] EGARCH on Rexcel
Message-ID: <8A7830D3FDD8BE4BA831472E6AD3C9284B237F@SIXPRD0410MB394.apcprd04.prod.outlook.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120905/61a9080e/attachment.pl>

From dougedmunds at gmail.com  Wed Sep  5 17:59:27 2012
From: dougedmunds at gmail.com (Doug Edmunds)
Date: Wed, 05 Sep 2012 08:59:27 -0700
Subject: [R-SIG-Finance] blotter updatePortf issue..
In-Reply-To: <CA+xi=qYCcNehZw5xRH6FTVpZvegvTSnngw6-Wmtc=G+FMW_Wqw@mail.gmail.com>
References: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>
	<CA+xi=qYCcNehZw5xRH6FTVpZvegvTSnngw6-Wmtc=G+FMW_Wqw@mail.gmail.com>
Message-ID: <504776DF.6020505@gmail.com>

On 9/3/2012 12:14 PM, G See wrote:

> Second, I didn't get these warnings that you got


Perhaps you have warnings set to a negative number.
On Windows (XP,7) I get warnings using getSymbol, with both
the CRAN and newer Rforge versions of quantmod.

Try setting warnings to the default of 0
   options(warn=0)


> install.packages("quantmod", repos="http://R-Forge.R-project.org")
Installing package(s) into ?C:/R/library?
(as ?lib? is unspecified)
trying URL 
'http://R-Forge.R-project.org/bin/windows/contrib/2.15/quantmod_0.3-20.zip'
Content type 'application/zip' length 448957 bytes (438 Kb)
opened URL
downloaded 438 Kb

package ?quantmod? successfully unpacked and MD5 sums checked

The downloaded binary packages are in
	C:\Documents and Settings\dae\Local 
Settings\Temp\RtmpcZmZ3k\downloaded_packages
> library("quantmod")
Loading required package: Defaults
Loading required package: xts
Loading required package: zoo

Attaching package: ?zoo?

The following object(s) are masked from ?package:base?:

     as.Date, as.Date.numeric

Loading required package: TTR
> getSymbols("QQQ")
[1] "QQQ"
Warning message:
In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
   downloaded length 72200 != reported length 200
> getSymbols("IWM")
[1] "IWM"
Warning message:
In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
   downloaded length 71729 != reported length 200


From pietrader at gmail.com  Wed Sep  5 19:19:40 2012
From: pietrader at gmail.com (pie trader)
Date: Wed, 5 Sep 2012 10:19:40 -0700
Subject: [R-SIG-Finance] blotter updatePortf issue..
In-Reply-To: <504776DF.6020505@gmail.com>
References: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>
	<CA+xi=qYCcNehZw5xRH6FTVpZvegvTSnngw6-Wmtc=G+FMW_Wqw@mail.gmail.com>
	<504776DF.6020505@gmail.com>
Message-ID: <CAG5Ec02d6XLLGDzU6MFoFDxSxRZxNDwzXMoKJWsvh65PrUqTWA@mail.gmail.com>

Hi Doug,
Thanks. I tried by setting options(warn=0) but I still get the warning
message with getSymbol. Following is the sessionInfo() and code I
executed.

> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252  LC_CTYPE=English_United
States.1252
[3] LC_MONETARY=English_United States.1252 LC_NUMERIC=C
[5] LC_TIME=English_United States.1252

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] blotter_0.8.11               FinancialInstrument_1.0
quantmod_0.3-20
[4] PerformanceAnalytics_1.0.4.4 TTR_0.21-1
Defaults_1.1-1
[7] xts_0.8-6                    zoo_1.7-7

loaded via a namespace (and not attached):
[1] grid_2.15.1     lattice_0.20-10 tools_2.15.1
> options(warn=0)
> getSymbols("SPY", src='yahoo', index.class=c("POSIXt","POSIXct"), from='2000-01-01')
[1] "SPY"
Warning message:
In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
  downloaded length 173389 != reported length 200
>

Regards,
Durga

On Wed, Sep 5, 2012 at 8:59 AM, Doug Edmunds <dougedmunds at gmail.com> wrote:
> On 9/3/2012 12:14 PM, G See wrote:
>
>> Second, I didn't get these warnings that you got
>
>
>
> Perhaps you have warnings set to a negative number.
> On Windows (XP,7) I get warnings using getSymbol, with both
> the CRAN and newer Rforge versions of quantmod.
>
> Try setting warnings to the default of 0
>   options(warn=0)
>
>
>> install.packages("quantmod", repos="http://R-Forge.R-project.org")
>
> Installing package(s) into ?C:/R/library?
> (as ?lib? is unspecified)
> trying URL
> 'http://R-Forge.R-project.org/bin/windows/contrib/2.15/quantmod_0.3-20.zip'
> Content type 'application/zip' length 448957 bytes (438 Kb)
> opened URL
> downloaded 438 Kb
>
> package ?quantmod? successfully unpacked and MD5 sums checked
>
> The downloaded binary packages are in
>         C:\Documents and Settings\dae\Local
> Settings\Temp\RtmpcZmZ3k\downloaded_packages
>>
>> library("quantmod")
>
> Loading required package: Defaults
> Loading required package: xts
> Loading required package: zoo
>
> Attaching package: ?zoo?
>
> The following object(s) are masked from ?package:base?:
>
>     as.Date, as.Date.numeric
>
> Loading required package: TTR
>>
>> getSymbols("QQQ")
>
> [1] "QQQ"
> Warning message:
>
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   downloaded length 72200 != reported length 200
>>
>> getSymbols("IWM")
>
> [1] "IWM"
> Warning message:
>
> In download.file(paste(yahoo.URL, "s=", Symbols.name, "&a=", from.m,  :
>   downloaded length 71729 != reported length 200
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From pietrader at gmail.com  Wed Sep  5 20:12:33 2012
From: pietrader at gmail.com (pie trader)
Date: Wed, 5 Sep 2012 11:12:33 -0700
Subject: [R-SIG-Finance] Performance Analytics Calendar Returns
In-Reply-To: <CAC=5Ke+Vsp+wqYDDyfnz-U18KHkWSH8ayiL-a391mw_jLCK4Cw@mail.gmail.com>
References: <CAC=5KeJWMYfhePhj7nBXARpUYv4Ej-BAHONfO61Y60BU3Fs4ag@mail.gmail.com>
	<16E755C4-F88D-487E-892D-B4E8231A3EE2@optonline.net>
	<CAC=5Ke+Vsp+wqYDDyfnz-U18KHkWSH8ayiL-a391mw_jLCK4Cw@mail.gmail.com>
Message-ID: <CAG5Ec02XfjsJFoz2DwpBdWGxX=oX+f86YU1v961b6q1B-PO3Sw@mail.gmail.com>

Hi Nikos,
See if following helps...(note: you need to install chron package).

> df
                 Profit
2011-11-04  0.009513150
2011-12-23 -0.050548660
2012-01-27  0.031123389
2012-02-03  0.010962336
2012-03-16  0.000681096
2012-04-06  0.023744912
2012-04-13 -0.018906776
2012-05-11 -0.004662004
2012-08-17  0.020979889
2012-08-24  0.017647059
> dts = index(df)
> mdts = cut(dts, "months")
> mdts
 [1] 2011-11-01 2011-12-01 2012-01-01 2012-02-01 2012-03-01 2012-04-01
2012-04-01 2012-05-01 2012-08-01
[10] 2012-08-01
10 Levels: 2011-11-01 2011-12-01 2012-01-01 2012-02-01 2012-03-01
2012-04-01 2012-05-01 ... 2012-08-01
> mdts = as.Date(cut(dts, "months"))
> mdts
 [1] "2011-11-01" "2011-12-01" "2012-01-01" "2012-02-01" "2012-03-01"
"2012-04-01" "2012-04-01"
 [8] "2012-05-01" "2012-08-01" "2012-08-01"
> index(df) = mdts
> df
                 Profit
2011-11-01  0.009513150
2011-12-01 -0.050548660
2012-01-01  0.031123389
2012-02-01  0.010962336
2012-03-01  0.000681096
2012-04-01  0.023744912
2012-04-01 -0.018906776
2012-05-01 -0.004662004
2012-08-01  0.020979889
2012-08-01  0.017647059
> aggregate(df, by=index(df))

2011-11-01  0.009513150
2011-12-01 -0.050548660
2012-01-01  0.031123389
2012-02-01  0.010962336
2012-03-01  0.000681096
2012-04-01  0.004838136
2012-05-01 -0.004662004
2012-08-01  0.038626948

Regards
PieT

On Tue, Sep 4, 2012 at 10:21 PM, Nikos Rachmanis
<nikos.rachmanis at gmail.com> wrote:
> hi Krishna,
>
> thank you for the reply. i believe the solution you suggested would work
> well for a price based timeseries.
>
> However, I am trying to transform the daily returns of my P&L (which also
> include gaps) to monthly and unfortunately the to.monthly does not work
> very well.
>
> i am currently trying table.TrailingPeriods and rollapply.
>
> Any other ideas or functions?
>
> Thank
>
> On Tue, Sep 4, 2012 at 7:39 AM, Kris <kk2250 at optonline.net> wrote:
>
>>
>> >
>> > I am trying to use the table.CalendarReturns from the Performance
>> Analytics
>> > package with daily returns.
>> >
>>
>> Last I checked the help/usage file states that it expects monthly return
>> data. There are some zOo and xts functions that do this..
>>
>> ?to.monthly
>>
>> ?table.Annualizedreturns
>>
>> Cheers
>> Krishna
>>
>>
>> >
>> t(table.CalendarReturns(tradedata$daily.pnl.norm["1998/2012"],as.perc=TRUE,digits=4,geometric=TRUE))
>> >
>> > 1) is there anything wrong with my command? if not, is there any way to
>> > transform the daily results to monthly?
>> >
>> > 2) is there a function that would give me the same table for volatility
>> and
>> > sharpe?
>> >
>> > Thank you all in advance,
>> >
>> > Nikos
>> >
>> >    [[alternative HTML version deleted]]
>> >
>> > _______________________________________________
>> > R-SIG-Finance at r-project.org mailing list
>> > https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> > -- Subscriber-posting only. If you want to post, subscribe first.
>> > -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Wed Sep  5 20:16:49 2012
From: gsee000 at gmail.com (G See)
Date: Wed, 5 Sep 2012 13:16:49 -0500
Subject: [R-SIG-Finance] Performance Analytics Calendar Returns
In-Reply-To: <CAC=5Ke+Vsp+wqYDDyfnz-U18KHkWSH8ayiL-a391mw_jLCK4Cw@mail.gmail.com>
References: <CAC=5KeJWMYfhePhj7nBXARpUYv4Ej-BAHONfO61Y60BU3Fs4ag@mail.gmail.com>
	<16E755C4-F88D-487E-892D-B4E8231A3EE2@optonline.net>
	<CAC=5Ke+Vsp+wqYDDyfnz-U18KHkWSH8ayiL-a391mw_jLCK4Cw@mail.gmail.com>
Message-ID: <CA+xi=qbKYqsHq1DrBkuKkmxY-uS+vZ+qh34YX-=CooV78R2-bQ@mail.gmail.com>

On Wed, Sep 5, 2012 at 12:21 AM, Nikos Rachmanis
<nikos.rachmanis at gmail.com> wrote:
> However, I am trying to transform the daily returns of my P&L (which also
> include gaps) to monthly and unfortunately the to.monthly does not work
> very well.
>
> i am currently trying table.TrailingPeriods and rollapply.
>
> Any other ideas or functions?

?apply.monthly

apply.monthly(PnL, sum)

-Garrett


From pietrader at gmail.com  Wed Sep  5 20:44:27 2012
From: pietrader at gmail.com (Pie T)
Date: Wed, 5 Sep 2012 11:44:27 -0700
Subject: [R-SIG-Finance] Performance Analytics Calendar Returns
In-Reply-To: <CA+xi=qbKYqsHq1DrBkuKkmxY-uS+vZ+qh34YX-=CooV78R2-bQ@mail.gmail.com>
References: <CAC=5KeJWMYfhePhj7nBXARpUYv4Ej-BAHONfO61Y60BU3Fs4ag@mail.gmail.com>
	<16E755C4-F88D-487E-892D-B4E8231A3EE2@optonline.net>
	<CAC=5Ke+Vsp+wqYDDyfnz-U18KHkWSH8ayiL-a391mw_jLCK4Cw@mail.gmail.com>
	<CA+xi=qbKYqsHq1DrBkuKkmxY-uS+vZ+qh34YX-=CooV78R2-bQ@mail.gmail.com>
Message-ID: <CAG5Ec03jqZH77zZY-pQ5-=ThyVMCNOyvpZb3DemPO+oE0hP-YQ@mail.gmail.com>

Nice and elegant. Thanks.

On Wed, Sep 5, 2012 at 11:16 AM, G See <gsee000 at gmail.com> wrote:
> On Wed, Sep 5, 2012 at 12:21 AM, Nikos Rachmanis
> <nikos.rachmanis at gmail.com> wrote:
>> However, I am trying to transform the daily returns of my P&L (which also
>> include gaps) to monthly and unfortunately the to.monthly does not work
>> very well.
>>
>> i am currently trying table.TrailingPeriods and rollapply.
>>
>> Any other ideas or functions?
>
> ?apply.monthly
>
> apply.monthly(PnL, sum)
>
> -Garrett
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From dougedmunds at gmail.com  Wed Sep  5 21:05:56 2012
From: dougedmunds at gmail.com (Doug Edmunds)
Date: Wed, 05 Sep 2012 12:05:56 -0700
Subject: [R-SIG-Finance] blotter updatePortf issue..
In-Reply-To: <CAG5Ec01EOFxOi44qb7V+4UBPT6DfigmC2_vPxx7vN6k3qqkZWw@mail.gmail.com>
References: <CAG5Ec01EGYUi6mPfSw_hpeeieY_fmUzmMypfxFfcrO7WUaN6MQ@mail.gmail.com>
	<CA+xi=qYCcNehZw5xRH6FTVpZvegvTSnngw6-Wmtc=G+FMW_Wqw@mail.gmail.com>
	<CAG5Ec03_bQ-kNYzPJrqAT4fKL-ZyW0rc-2Xip+A2v5LgQdXRdg@mail.gmail.com>
	<CA+xi=qZZOjycw5ztCpxyWO2D3mKfh=bAbCshM3dg5J-amccJKw@mail.gmail.com>
	<CA+xi=qYqSzg=xbjEOqCr+0j-fFWbS2QL1P107dhuhbDLhKSOJw@mail.gmail.com>
	<CAG5Ec01EOFxOi44qb7V+4UBPT6DfigmC2_vPxx7vN6k3qqkZWw@mail.gmail.com>
Message-ID: <5047A294.4070400@gmail.com>

On further testing, I only see warning messages with getSymbol() running 
RStudio, but not when running the RGUI interface shipped
with R.

So maybe it's an RStudio issue?

Clarification:
options(warn = 0) # is the default, shows warnings, if any
options(warn = -1) # turns off warnings (use as workaround for RStudio)


--dae
XP, Win7


From rvince99 at gmail.com  Thu Sep  6 03:39:04 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Wed, 5 Sep 2012 21:39:04 -0400
Subject: [R-SIG-Finance] Equities Data
Message-ID: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>

I'm looking for a reliable vendor of equity data, one that also
provides information regarding corporate actions (dividends, splits,
ex-dates, etc). Anyone know of any good sources? R. Vince


From nikos.rachmanis at gmail.com  Thu Sep  6 04:57:00 2012
From: nikos.rachmanis at gmail.com (Nikos Rachmanis)
Date: Wed, 5 Sep 2012 22:57:00 -0400
Subject: [R-SIG-Finance] Performance Analytics Calendar Returns
In-Reply-To: <CA+xi=qbKYqsHq1DrBkuKkmxY-uS+vZ+qh34YX-=CooV78R2-bQ@mail.gmail.com>
References: <CAC=5KeJWMYfhePhj7nBXARpUYv4Ej-BAHONfO61Y60BU3Fs4ag@mail.gmail.com>
	<16E755C4-F88D-487E-892D-B4E8231A3EE2@optonline.net>
	<CAC=5Ke+Vsp+wqYDDyfnz-U18KHkWSH8ayiL-a391mw_jLCK4Cw@mail.gmail.com>
	<CA+xi=qbKYqsHq1DrBkuKkmxY-uS+vZ+qh34YX-=CooV78R2-bQ@mail.gmail.com>
Message-ID: <CAC=5KeL-EyDG8mCsCyavfFf+TEA0JTfKn5YLwqJH3kdUO5F8Gw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120905/b435cd98/attachment.pl>

From junzhu98 at yahoo.com  Thu Sep  6 08:17:28 2012
From: junzhu98 at yahoo.com (Jun Zhu)
Date: Wed, 5 Sep 2012 23:17:28 -0700 (PDT)
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
Message-ID: <1346912248.73386.YahooMailClassic@web125203.mail.ne1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120905/f70d5589/attachment.pl>

From j_cuisinier at hotmail.com  Thu Sep  6 10:03:24 2012
From: j_cuisinier at hotmail.com (julien cuisinier)
Date: Thu, 6 Sep 2012 10:03:24 +0200
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <1346912248.73386.YahooMailClassic@web125203.mail.ne1.yahoo.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>,
	<1346912248.73386.YahooMailClassic@web125203.mail.ne1.yahoo.com>
Message-ID: <COL102-W28933F2C7986AA098948E8FA80@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120906/d25f55b1/attachment.pl>

From htrahdis at gmail.com  Thu Sep  6 11:24:01 2012
From: htrahdis at gmail.com (sidharth mallik)
Date: Thu, 6 Sep 2012 14:54:01 +0530
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <COL102-W28933F2C7986AA098948E8FA80@phx.gbl>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<1346912248.73386.YahooMailClassic@web125203.mail.ne1.yahoo.com>
	<COL102-W28933F2C7986AA098948E8FA80@phx.gbl>
Message-ID: <CAJXbfOJ85EVGiRtpVKfbn=n8WdCvzYbCr_PNwbLRd_BNeWExHg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120906/202c8614/attachment.pl>

From chicagobrownblue at hotmail.com  Thu Sep  6 12:48:11 2012
From: chicagobrownblue at hotmail.com (FJ M)
Date: Thu, 6 Sep 2012 10:48:11 +0000
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
Message-ID: <BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120906/1a9f9e65/attachment.pl>

From rvince99 at gmail.com  Thu Sep  6 15:00:51 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Thu, 6 Sep 2012 09:00:51 -0400
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAJXbfOJ85EVGiRtpVKfbn=n8WdCvzYbCr_PNwbLRd_BNeWExHg@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<1346912248.73386.YahooMailClassic@web125203.mail.ne1.yahoo.com>
	<COL102-W28933F2C7986AA098948E8FA80@phx.gbl>
	<CAJXbfOJ85EVGiRtpVKfbn=n8WdCvzYbCr_PNwbLRd_BNeWExHg@mail.gmail.com>
Message-ID: <CAAHNhKXcohs3L9+jYkv=A-y9-gmC3QeOpaWQbU5XWLQ3Fiv46w@mail.gmail.com>

Hi Sidarth,

I don't promote any criterion per se, but rather promote satisfying
YOUR criteria based on where you (unavaoidably!) are and what path you
are unavoidably travelling in the N (component, i.e. axes) of the N+1
dimensional space of leverage space. Ralph Vince

On Thu, Sep 6, 2012 at 5:24 AM, sidharth mallik <htrahdis at gmail.com> wrote:
> Hi Ralph
>
> are you the same Ralph Vince who promotes the optimal f criterion ?
>
> cheers
> Sidharth
>
>
> On Thu, Sep 6, 2012 at 1:33 PM, julien cuisinier <j_cuisinier at hotmail.com>
> wrote:
>>
>>
>> Hi Ralph,
>>
>>
>> You question does not have much to do with R...
>>
>> BUT your question must be much more specific than that to have meaningful
>> replies:
>> (1) what data are you after (prices? intraday or end of day?,
>> fundamentals?,, etc.)
>> (2) what is your budget if any >> if unlimited buddget just get a Factset
>> or bloomberg license (the ones I know best) and you are covered. If you are
>> after free data, well look at quantmod & its API to yahoo finance (which
>> does split adjustment), google finance etc., if personal use kind of budget
>> & only looking for end of day prices (& may be some fundamentals) I had a
>> look at eoddata.com some time ago & found it good value for money (never
>> compared to BBG / Factset like though) and I believe they do provide
>> corporate action info
>>
>>
>> HTH,
>> Julien
>>
>>
>>
>> Date: Wed, 5 Sep 2012 23:17:28 -0700
>> From: junzhu98 at yahoo.com
>> To: r-sig-finance at r-project.org; rvince99 at gmail.com
>> Subject: Re: [R-SIG-Finance] Equities Data
>>
>> For US market, a good source of equity data is from CRSP of University of
>> Chicago.  The data is historical only and well cleaned. It costs about
>> 20-30k per year.
>> For global equity data, bloomberg and reuters are two good sources.
>> J. Zhu
>>
>> --- On Wed, 9/5/12, Ralph Vince <rvince99 at gmail.com> wrote:
>>
>> From: Ralph Vince <rvince99 at gmail.com>
>> Subject: [R-SIG-Finance] Equities Data
>> To: r-sig-finance at r-project.org
>> Date: Wednesday, September 5, 2012, 8:39 PM
>>
>> I'm looking for a reliable vendor of equity data, one that also
>> provides information regarding corporate actions (dividends, splits,
>> ex-dates, etc). Anyone know of any good sources? R. Vince
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>>         [[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>         [[alternative HTML version deleted]]
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>
>


From rvince99 at gmail.com  Thu Sep  6 15:02:46 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Thu, 6 Sep 2012 09:02:46 -0400
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
Message-ID: <CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>

Thanks for the replies. I'm not looking for data adjusted for splits
and dividends, but rather the ex-dates when the dividend or split will
be affecting prices, and the amount of the dividends/ splits. It
appears Yahoo finance might have this information, Im just not sure
how, in R, to extract anything other than prices in R. Ralph Vince

On Thu, Sep 6, 2012 at 6:48 AM, FJ M <chicagobrownblue at hotmail.com> wrote:
> Tickdata provides daily and intraday data very early the next morning. Their
> 1-minute intraday data is cheaper than every single trade data. Tickdata.com
>
> Yahoo Finance provides daily data available between 7 PM CST and 9 PM each
> evening.
>
> Google Finance provides daily data also, not sure about when it is
> available.
>
> Dividend adjusted data is problematic. If you want just log normal price
> returns, you will want to exclude the dividend from the close on ex-dividend
> eve when calculating the return on ex-dividend day. If you are looking to
> calculate your cost basis by subtracting out the cumulative dividend, you
> need to pick a starting point. If you want the cumulative return you can add
> the dividend to the stock price, but you need to pick a starting point. If
> you want to re-invest the dividend, you will need to keep track of both the
> dividend, the pay date to be accurate and pick a start date. Yahoo Finance
> provides the dividend on the ex-dividend date. I do not have a source for
> the pay date. I suspect most analysts re-invest the dividend on the
> ex-dividend date at the ex-dividend price.
>
> Good luck.
>
>
>> Date: Wed, 5 Sep 2012 21:39:04 -0400
>> From: rvince99 at gmail.com
>> To: r-sig-finance at r-project.org
>> Subject: [R-SIG-Finance] Equities Data
>
>>
>> I'm looking for a reliable vendor of equity data, one that also
>> provides information regarding corporate actions (dividends, splits,
>> ex-dates, etc). Anyone know of any good sources? R. Vince
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.


From gsee000 at gmail.com  Thu Sep  6 15:05:10 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 6 Sep 2012 08:05:10 -0500
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
Message-ID: <CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>

On Thu, Sep 6, 2012 at 8:02 AM, Ralph Vince <rvince99 at gmail.com> wrote:
> Thanks for the replies. I'm not looking for data adjusted for splits
> and dividends, but rather the ex-dates when the dividend or split will
> be affecting prices, and the amount of the dividends/ splits. It
> appears Yahoo finance might have this information, Im just not sure
> how, in R, to extract anything other than prices in R. Ralph Vince

library(quantmod)
?getDividends
?getSplits
?adjRatios
?getQuote
?yahooQF

That is much more on topic that "can someone tell me where to get some
data?" ;-)

Best,
Garrett


From rvince99 at gmail.com  Thu Sep  6 15:18:08 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Thu, 6 Sep 2012 09:18:08 -0400
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
Message-ID: <CAAHNhKWe9M8Sk9DmJwqgrDRtFZ271TKywabYzp7u1Z+LCcdnNw@mail.gmail.com>

Ah, thank you! It must be in the Quantmod API / Thank you. Ralph Vince

On Thu, Sep 6, 2012 at 9:05 AM, G See <gsee000 at gmail.com> wrote:
> On Thu, Sep 6, 2012 at 8:02 AM, Ralph Vince <rvince99 at gmail.com> wrote:
>> Thanks for the replies. I'm not looking for data adjusted for splits
>> and dividends, but rather the ex-dates when the dividend or split will
>> be affecting prices, and the amount of the dividends/ splits. It
>> appears Yahoo finance might have this information, Im just not sure
>> how, in R, to extract anything other than prices in R. Ralph Vince
>
> library(quantmod)
> ?getDividends
> ?getSplits
> ?adjRatios
> ?getQuote
> ?yahooQF
>
> That is much more on topic that "can someone tell me where to get some
> data?" ;-)
>
> Best,
> Garrett


From gsee000 at gmail.com  Thu Sep  6 15:19:54 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 6 Sep 2012 08:19:54 -0500
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKWe9M8Sk9DmJwqgrDRtFZ271TKywabYzp7u1Z+LCcdnNw@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKWe9M8Sk9DmJwqgrDRtFZ271TKywabYzp7u1Z+LCcdnNw@mail.gmail.com>
Message-ID: <CA+xi=qY62EN-6RXb8LQXOTp9ScGZn9OOKFN5s4q8Xt=4MvN+YQ@mail.gmail.com>

Also in quantmod, there is `getFinancials` if you want financial statements

In qmao (https://r-forge.r-project.org/R/?group_id=1113), there's

`getEarnings` which will give you historic analyst estimates and
actual earnings numbers
`getEarningsCalendar` will show you all stocks (U.S. and non-U.S.)
that report earnings.  It supports "from" and "to" arguments.
`getDividendsCalendar` will show you all stocks that go Ex-Div today
(although it also supports from and to if you want to see historic
calendars)
`getEconomicCalendar` shows the calendar of economic number releases
`getMergersCalendar` shows mergers/acquisitions

-Garrett

On Thu, Sep 6, 2012 at 8:18 AM, Ralph Vince <rvince99 at gmail.com> wrote:
> Ah, thank you! It must be in the Quantmod API / Thank you. Ralph Vince
>
> On Thu, Sep 6, 2012 at 9:05 AM, G See <gsee000 at gmail.com> wrote:
>> On Thu, Sep 6, 2012 at 8:02 AM, Ralph Vince <rvince99 at gmail.com> wrote:
>>> Thanks for the replies. I'm not looking for data adjusted for splits
>>> and dividends, but rather the ex-dates when the dividend or split will
>>> be affecting prices, and the amount of the dividends/ splits. It
>>> appears Yahoo finance might have this information, Im just not sure
>>> how, in R, to extract anything other than prices in R. Ralph Vince
>>
>> library(quantmod)
>> ?getDividends
>> ?getSplits
>> ?adjRatios
>> ?getQuote
>> ?yahooQF
>>
>> That is much more on topic that "can someone tell me where to get some
>> data?" ;-)
>>
>> Best,
>> Garrett


From jctoll at gmail.com  Thu Sep  6 16:25:26 2012
From: jctoll at gmail.com (J Toll)
Date: Thu, 6 Sep 2012 09:25:26 -0500
Subject: [R-SIG-Finance] sufficient n for a binomial option pricing model
Message-ID: <CA+nJqYM5uyrSP5gfgmUudDthLxiok5J0BAVqOiix+RbrtJmOMQ@mail.gmail.com>

Hi,

I have a question regarding the selection of n, the number of time
steps, in a binomial option pricing model.  I suppose my question is
not strictly related to R.  As larger values should be more accurate,
what I've read on the subject simply suggests that you use a
sufficiently large value for your purposes.  So I've been trying to
evaluate what is a sufficiently large value of n for my purposes.  Is
there any rule of thumb regarding the value of n?

When using the fOptions package CRRBinomialTreeOption function, with
varying n, the price oscillates back and forth converging on a price.
This can be clearly seen through plotting.

require(fOptions)

x <- function(n) {

  CRRBinomialTreeOption(TypeFlag = "ca",
                        S = 50,
                        X = 50,
                        Time = 1/12,
                        r = 0.02,
                        b = 0.02,
                        sigma = 0.18,
                        n = n)@price
}

y <- sapply(1:100, x)               # mean(y) == 1.079693
plot(y)

Given this oscillation, my question is whether it would be "better" to
compute two prices using two smaller, consecutive values of n rather
than one large value?  Or is there some other better way?

For example, using n =1000 or 1001, the option prices are within 5
hundredths of a cent, but the calculation is extremely slow for
either.

x(1000)                                    # 1.077408
x(1001)                                    # 1.077926

mean(sapply(1000:1001, x))      # 1.077667

Comparatively, taking the mean of n= 40 and 41 yields a value very
close to the middle of the range, yet is much faster.

mean(sapply(40:41, x))             # 1.0776

It seems like averaging two smaller, consecutive values of n is
basically as accurate and far faster than using large values of n.  I
was hoping someone might have some insight into why this might or
might not be a valid approach.  Thanks.


James


From Dale.Smith at fiserv.com  Thu Sep  6 16:40:35 2012
From: Dale.Smith at fiserv.com (Smith, Dale)
Date: Thu, 6 Sep 2012 09:40:35 -0500
Subject: [R-SIG-Finance] sufficient n for a binomial option pricing model
In-Reply-To: <CA+nJqYM5uyrSP5gfgmUudDthLxiok5J0BAVqOiix+RbrtJmOMQ@mail.gmail.com>
References: <CA+nJqYM5uyrSP5gfgmUudDthLxiok5J0BAVqOiix+RbrtJmOMQ@mail.gmail.com>
Message-ID: <FA07C4306DEF5743AC1DB451680DFF590C363DCA@MKEXCHVS4.Mail.Fiserv.net>

One way to terminate is to look at the consecutive differences between
the averages and terminate if the difference is less than your
tolerance. However, you should guard against the case where the
consecutive differences are never less than the tolerance. In this case,
just put in a maximum number of steps n and log the last average, the
number of steps, and a message. This allows the user to determine
whether they want to accept or reject the result.

Thanks,
Dale Smith, Ph.D.
Senior Financial Quantitative Analyst
Risk & Compliance
Fiserv.
107 Technology Park
Norcross, GA 30092
Office: 678-375-5315
Mail: dale.smith at fiserv.com
www.fiserv.com

-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of J Toll
Sent: Thursday, September 06, 2012 10:25 AM
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] sufficient n for a binomial option pricing
model

Hi,

I have a question regarding the selection of n, the number of time
steps, in a binomial option pricing model.  I suppose my question is not
strictly related to R.  As larger values should be more accurate, what
I've read on the subject simply suggests that you use a sufficiently
large value for your purposes.  So I've been trying to evaluate what is
a sufficiently large value of n for my purposes.  Is there any rule of
thumb regarding the value of n?

When using the fOptions package CRRBinomialTreeOption function, with
varying n, the price oscillates back and forth converging on a price.
This can be clearly seen through plotting.

require(fOptions)

x <- function(n) {

  CRRBinomialTreeOption(TypeFlag = "ca",
                        S = 50,
                        X = 50,
                        Time = 1/12,
                        r = 0.02,
                        b = 0.02,
                        sigma = 0.18,
                        n = n)@price
}

y <- sapply(1:100, x)               # mean(y) == 1.079693
plot(y)

Given this oscillation, my question is whether it would be "better" to
compute two prices using two smaller, consecutive values of n rather
than one large value?  Or is there some other better way?

For example, using n =1000 or 1001, the option prices are within 5
hundredths of a cent, but the calculation is extremely slow for either.

x(1000)                                    # 1.077408
x(1001)                                    # 1.077926

mean(sapply(1000:1001, x))      # 1.077667

Comparatively, taking the mean of n= 40 and 41 yields a value very close
to the middle of the range, yet is much faster.

mean(sapply(40:41, x))             # 1.0776

It seems like averaging two smaller, consecutive values of n is
basically as accurate and far faster than using large values of n.  I
was hoping someone might have some insight into why this might or might
not be a valid approach.  Thanks.


James

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From rvince99 at gmail.com  Thu Sep  6 17:45:26 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Thu, 6 Sep 2012 11:45:26 -0400
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
Message-ID: <CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>

I don't think this is going to do what I'm trying to accomplish here,
which is determine the next, future, pending ex-date for dividends or
splits, if there is one announced, so that I can prepare the systems
for this in advance. It seems to be an nasty problem and  I'm trying
to get out of maintaining this by hand!

On Thu, Sep 6, 2012 at 9:05 AM, G See <gsee000 at gmail.com> wrote:
> On Thu, Sep 6, 2012 at 8:02 AM, Ralph Vince <rvince99 at gmail.com> wrote:
>> Thanks for the replies. I'm not looking for data adjusted for splits
>> and dividends, but rather the ex-dates when the dividend or split will
>> be affecting prices, and the amount of the dividends/ splits. It
>> appears Yahoo finance might have this information, Im just not sure
>> how, in R, to extract anything other than prices in R. Ralph Vince
>
> library(quantmod)
> ?getDividends
> ?getSplits
> ?adjRatios
> ?getQuote
> ?yahooQF
>
> That is much more on topic that "can someone tell me where to get some
> data?" ;-)
>
> Best,
> Garrett


From gsee000 at gmail.com  Thu Sep  6 17:53:24 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 6 Sep 2012 10:53:24 -0500
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
Message-ID: <CA+xi=qaQrRizXbqwD0CacwhGQrF9qM9+9xdqq8rY33PaSWEWBA@mail.gmail.com>

That data is expensive, but your prime broker will probably provide it for free.

Otherwise, qmao::getDividendsCalendar can do it, but it's inefficient.
 You'd have to get the dividends calendar for future dates, and look
for your symbols.  Keep in mind that the local symbol will be used
even if the stock also trades in the U.S.  (i.e. BMW.DE instead of
BMW)

Good luck,
Garrett

On Thu, Sep 6, 2012 at 10:45 AM, Ralph Vince <rvince99 at gmail.com> wrote:
> I don't think this is going to do what I'm trying to accomplish here,
> which is determine the next, future, pending ex-date for dividends or
> splits, if there is one announced, so that I can prepare the systems
> for this in advance. It seems to be an nasty problem and  I'm trying
> to get out of maintaining this by hand!
>
> On Thu, Sep 6, 2012 at 9:05 AM, G See <gsee000 at gmail.com> wrote:
>> On Thu, Sep 6, 2012 at 8:02 AM, Ralph Vince <rvince99 at gmail.com> wrote:
>>> Thanks for the replies. I'm not looking for data adjusted for splits
>>> and dividends, but rather the ex-dates when the dividend or split will
>>> be affecting prices, and the amount of the dividends/ splits. It
>>> appears Yahoo finance might have this information, Im just not sure
>>> how, in R, to extract anything other than prices in R. Ralph Vince
>>
>> library(quantmod)
>> ?getDividends
>> ?getSplits
>> ?adjRatios
>> ?getQuote
>> ?yahooQF
>>
>> That is much more on topic that "can someone tell me where to get some
>> data?" ;-)
>>
>> Best,
>> Garrett


From brian at braverock.com  Thu Sep  6 17:54:07 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Thu, 06 Sep 2012 10:54:07 -0500
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
Message-ID: <5048C71F.8030705@braverock.com>

On 09/06/2012 10:45 AM, Ralph Vince wrote:
> I don't think this is going to do what I'm trying to accomplish here,
> which is determine the next, future, pending ex-date for dividends or
> splits, if there is one announced, so that I can prepare the systems
> for this in advance. It seems to be an nasty problem and  I'm trying
> to get out of maintaining this by hand!

The only way I know of to get out of maintaining it by hand is to pay 
for data.

On the GUI side, Bloomberg, Factset, and Reuters have all been mentioned 
already I think.  Rbbg of course talks to Bloomberg.

On the other vendor side, I think Interactive Brokers has this data, and 
it may be available via the IBrokers package if it is available via the 
IB API.  Additional vendors, such as CSIdata, tickdata.com, Reuters, 
CRSP, Telekurs, etc all sell this data, at varying prices and quality.

Regards,

- Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From gsee000 at gmail.com  Thu Sep  6 18:04:52 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 6 Sep 2012 11:04:52 -0500
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <5048C71F.8030705@braverock.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
Message-ID: <CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>

On Thu, Sep 6, 2012 at 10:54 AM, Brian G. Peterson <brian at braverock.com> wrote:
> The only way I know of to get out of maintaining it by hand is to pay for
> data.
>
> On the GUI side, Bloomberg, Factset, and Reuters have all been mentioned
> already I think.  Rbbg of course talks to Bloomberg.
>
> On the other vendor side, I think Interactive Brokers has this data, and it
> may be available via the IBrokers package if it is available via the IB API.
> Additional vendors, such as CSIdata, tickdata.com, Reuters, CRSP, Telekurs,
> etc all sell this data, at varying prices and quality.

Interactive Brokers does provide an "Upcoming Dividend Schedule" for
stocks, but it is a rough estimate that is often wrong.  Also, I don't
think you can get it from their API (although if someone knows how,
please speak up).  I think you have to go into the GUI, right-click a
stock and select Dividend Schedule.

-Garrett


From rvince99 at gmail.com  Thu Sep  6 18:13:57 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Thu, 6 Sep 2012 12:13:57 -0400
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
Message-ID: <CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>

Yes, I'm willing to pay for it, but I would like to get it
automatically into a format I can parse and use, not even sure where
that exists at the moment. (Doesn't Yahoo Finance get their data from
CSI?) Ralph Vince

On Thu, Sep 6, 2012 at 12:04 PM, G See <gsee000 at gmail.com> wrote:
> On Thu, Sep 6, 2012 at 10:54 AM, Brian G. Peterson <brian at braverock.com> wrote:
>> The only way I know of to get out of maintaining it by hand is to pay for
>> data.
>>
>> On the GUI side, Bloomberg, Factset, and Reuters have all been mentioned
>> already I think.  Rbbg of course talks to Bloomberg.
>>
>> On the other vendor side, I think Interactive Brokers has this data, and it
>> may be available via the IBrokers package if it is available via the IB API.
>> Additional vendors, such as CSIdata, tickdata.com, Reuters, CRSP, Telekurs,
>> etc all sell this data, at varying prices and quality.
>
> Interactive Brokers does provide an "Upcoming Dividend Schedule" for
> stocks, but it is a rough estimate that is often wrong.  Also, I don't
> think you can get it from their API (although if someone knows how,
> please speak up).  I think you have to go into the GUI, right-click a
> stock and select Dividend Schedule.
>
> -Garrett
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jeff.a.ryan at gmail.com  Thu Sep  6 18:15:47 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Thu, 6 Sep 2012 11:15:47 -0500
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
	<CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
Message-ID: <CABDUZc-fEwH9deS38cnLOVf0DikH-G8bhJ7CqkaB5ZxQwHRzjg@mail.gmail.com>

You might be able to use this:

http://www.dividend.com/ex-dividend-dates.php

Jeff

On Thu, Sep 6, 2012 at 11:13 AM, Ralph Vince <rvince99 at gmail.com> wrote:
> Yes, I'm willing to pay for it, but I would like to get it
> automatically into a format I can parse and use, not even sure where
> that exists at the moment. (Doesn't Yahoo Finance get their data from
> CSI?) Ralph Vince
>
> On Thu, Sep 6, 2012 at 12:04 PM, G See <gsee000 at gmail.com> wrote:
>> On Thu, Sep 6, 2012 at 10:54 AM, Brian G. Peterson <brian at braverock.com> wrote:
>>> The only way I know of to get out of maintaining it by hand is to pay for
>>> data.
>>>
>>> On the GUI side, Bloomberg, Factset, and Reuters have all been mentioned
>>> already I think.  Rbbg of course talks to Bloomberg.
>>>
>>> On the other vendor side, I think Interactive Brokers has this data, and it
>>> may be available via the IBrokers package if it is available via the IB API.
>>> Additional vendors, such as CSIdata, tickdata.com, Reuters, CRSP, Telekurs,
>>> etc all sell this data, at varying prices and quality.
>>
>> Interactive Brokers does provide an "Upcoming Dividend Schedule" for
>> stocks, but it is a rough estimate that is often wrong.  Also, I don't
>> think you can get it from their API (although if someone knows how,
>> please speak up).  I think you have to go into the GUI, right-click a
>> stock and select Dividend Schedule.
>>
>> -Garrett
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From ustaudinger at activequant.com  Thu Sep  6 18:20:15 2012
From: ustaudinger at activequant.com (Ulrich Staudinger)
Date: Thu, 6 Sep 2012 18:20:15 +0200
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
	<CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
Message-ID: <CAMrz3D0E9ziamr9tRHCuLoCf=MAtLng8ta9zbw4iYS2gciLMig@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120906/60d22769/attachment.pl>

From rvince99 at gmail.com  Thu Sep  6 19:44:02 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Thu, 6 Sep 2012 13:44:02 -0400
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CABDUZc-fEwH9deS38cnLOVf0DikH-G8bhJ7CqkaB5ZxQwHRzjg@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
	<CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
	<CABDUZc-fEwH9deS38cnLOVf0DikH-G8bhJ7CqkaB5ZxQwHRzjg@mail.gmail.com>
Message-ID: <CAAHNhKXWJGRNM4F4VZadNbgkvcJORD8MFXqepCSTu-Arbz0k2Q@mail.gmail.com>

Hi Jeff,

Yes, but they only offer dividends not splits. I;ve been working off
of sites like this and looking to automate it somehow, hopefully
through R.


On Thu, Sep 6, 2012 at 12:15 PM, Jeff Ryan <jeff.a.ryan at gmail.com> wrote:
> You might be able to use this:
>
> http://www.dividend.com/ex-dividend-dates.php
>
> Jeff
>
> On Thu, Sep 6, 2012 at 11:13 AM, Ralph Vince <rvince99 at gmail.com> wrote:
>> Yes, I'm willing to pay for it, but I would like to get it
>> automatically into a format I can parse and use, not even sure where
>> that exists at the moment. (Doesn't Yahoo Finance get their data from
>> CSI?) Ralph Vince
>>
>> On Thu, Sep 6, 2012 at 12:04 PM, G See <gsee000 at gmail.com> wrote:
>>> On Thu, Sep 6, 2012 at 10:54 AM, Brian G. Peterson <brian at braverock.com> wrote:
>>>> The only way I know of to get out of maintaining it by hand is to pay for
>>>> data.
>>>>
>>>> On the GUI side, Bloomberg, Factset, and Reuters have all been mentioned
>>>> already I think.  Rbbg of course talks to Bloomberg.
>>>>
>>>> On the other vendor side, I think Interactive Brokers has this data, and it
>>>> may be available via the IBrokers package if it is available via the IB API.
>>>> Additional vendors, such as CSIdata, tickdata.com, Reuters, CRSP, Telekurs,
>>>> etc all sell this data, at varying prices and quality.
>>>
>>> Interactive Brokers does provide an "Upcoming Dividend Schedule" for
>>> stocks, but it is a rough estimate that is often wrong.  Also, I don't
>>> think you can get it from their API (although if someone knows how,
>>> please speak up).  I think you have to go into the GUI, right-click a
>>> stock and select Dividend Schedule.
>>>
>>> -Garrett
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
>
>
> --
> Jeffrey Ryan
> jeffrey.ryan at lemnica.com
>
> www.lemnica.com


From rvince99 at gmail.com  Thu Sep  6 19:56:25 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Thu, 6 Sep 2012 13:56:25 -0400
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKXWJGRNM4F4VZadNbgkvcJORD8MFXqepCSTu-Arbz0k2Q@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
	<CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
	<CABDUZc-fEwH9deS38cnLOVf0DikH-G8bhJ7CqkaB5ZxQwHRzjg@mail.gmail.com>
	<CAAHNhKXWJGRNM4F4VZadNbgkvcJORD8MFXqepCSTu-Arbz0k2Q@mail.gmail.com>
Message-ID: <CAAHNhKX8PsRqc8_T3QxK05-FfpqqrVAPZ7nafmM8Ww1yg0DroQ@mail.gmail.com>

THis looks pretty good, and could be parsed -- I just wish they had it
for cash dividends as well;
http://biz.yahoo.com/c/s.html
Ralph Vince

On Thu, Sep 6, 2012 at 1:44 PM, Ralph Vince <rvince99 at gmail.com> wrote:
> Hi Jeff,
>
> Yes, but they only offer dividends not splits. I;ve been working off
> of sites like this and looking to automate it somehow, hopefully
> through R.
>
>
> On Thu, Sep 6, 2012 at 12:15 PM, Jeff Ryan <jeff.a.ryan at gmail.com> wrote:
>> You might be able to use this:
>>
>> http://www.dividend.com/ex-dividend-dates.php
>>
>> Jeff
>>
>> On Thu, Sep 6, 2012 at 11:13 AM, Ralph Vince <rvince99 at gmail.com> wrote:
>>> Yes, I'm willing to pay for it, but I would like to get it
>>> automatically into a format I can parse and use, not even sure where
>>> that exists at the moment. (Doesn't Yahoo Finance get their data from
>>> CSI?) Ralph Vince
>>>
>>> On Thu, Sep 6, 2012 at 12:04 PM, G See <gsee000 at gmail.com> wrote:
>>>> On Thu, Sep 6, 2012 at 10:54 AM, Brian G. Peterson <brian at braverock.com> wrote:
>>>>> The only way I know of to get out of maintaining it by hand is to pay for
>>>>> data.
>>>>>
>>>>> On the GUI side, Bloomberg, Factset, and Reuters have all been mentioned
>>>>> already I think.  Rbbg of course talks to Bloomberg.
>>>>>
>>>>> On the other vendor side, I think Interactive Brokers has this data, and it
>>>>> may be available via the IBrokers package if it is available via the IB API.
>>>>> Additional vendors, such as CSIdata, tickdata.com, Reuters, CRSP, Telekurs,
>>>>> etc all sell this data, at varying prices and quality.
>>>>
>>>> Interactive Brokers does provide an "Upcoming Dividend Schedule" for
>>>> stocks, but it is a rough estimate that is often wrong.  Also, I don't
>>>> think you can get it from their API (although if someone knows how,
>>>> please speak up).  I think you have to go into the GUI, right-click a
>>>> stock and select Dividend Schedule.
>>>>
>>>> -Garrett
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>
>>
>>
>> --
>> Jeffrey Ryan
>> jeffrey.ryan at lemnica.com
>>
>> www.lemnica.com


From gsee000 at gmail.com  Thu Sep  6 19:57:54 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 6 Sep 2012 12:57:54 -0500
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKX8PsRqc8_T3QxK05-FfpqqrVAPZ7nafmM8Ww1yg0DroQ@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
	<CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
	<CABDUZc-fEwH9deS38cnLOVf0DikH-G8bhJ7CqkaB5ZxQwHRzjg@mail.gmail.com>
	<CAAHNhKXWJGRNM4F4VZadNbgkvcJORD8MFXqepCSTu-Arbz0k2Q@mail.gmail.com>
	<CAAHNhKX8PsRqc8_T3QxK05-FfpqqrVAPZ7nafmM8Ww1yg0DroQ@mail.gmail.com>
Message-ID: <CA+xi=qYCwarfhhiMaUq=T0v9avXm=Axhtb90Nd-6fYKOOZ-0HQ@mail.gmail.com>

On Thu, Sep 6, 2012 at 12:56 PM, Ralph Vince <rvince99 at gmail.com> wrote:
> THis looks pretty good, and could be parsed -- I just wish they had it
> for cash dividends as well;
> http://biz.yahoo.com/c/s.html
> Ralph Vince

They do.  Please look at
library(qmao)
?getDividendsCalendar

I think I've mentioned this before...
Garrett


From gsee000 at gmail.com  Thu Sep  6 20:00:49 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 6 Sep 2012 13:00:49 -0500
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CA+xi=qYCwarfhhiMaUq=T0v9avXm=Axhtb90Nd-6fYKOOZ-0HQ@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
	<CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
	<CABDUZc-fEwH9deS38cnLOVf0DikH-G8bhJ7CqkaB5ZxQwHRzjg@mail.gmail.com>
	<CAAHNhKXWJGRNM4F4VZadNbgkvcJORD8MFXqepCSTu-Arbz0k2Q@mail.gmail.com>
	<CAAHNhKX8PsRqc8_T3QxK05-FfpqqrVAPZ7nafmM8Ww1yg0DroQ@mail.gmail.com>
	<CA+xi=qYCwarfhhiMaUq=T0v9avXm=Axhtb90Nd-6fYKOOZ-0HQ@mail.gmail.com>
Message-ID: <CA+xi=qasVZAhd9snYGG3eu7xh40yUJxjd-vvXCHqCoZr7HqEpA@mail.gmail.com>

Oh. Sorry. getDividendsCalendar gets it's data from earnings.com.

I was confused because getMergersCalendar, getEarningsCalendar and
.getEconomicCalendarYahoo use analogous yahoo sites.

Oops,
Garrett

On Thu, Sep 6, 2012 at 12:57 PM, G See <gsee000 at gmail.com> wrote:
> On Thu, Sep 6, 2012 at 12:56 PM, Ralph Vince <rvince99 at gmail.com> wrote:
>> THis looks pretty good, and could be parsed -- I just wish they had it
>> for cash dividends as well;
>> http://biz.yahoo.com/c/s.html
>> Ralph Vince
>
> They do.  Please look at
> library(qmao)
> ?getDividendsCalendar
>
> I think I've mentioned this before...
> Garrett


From gsee000 at gmail.com  Thu Sep  6 20:27:33 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 6 Sep 2012 13:27:33 -0500
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKX8PsRqc8_T3QxK05-FfpqqrVAPZ7nafmM8Ww1yg0DroQ@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
	<CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
	<CABDUZc-fEwH9deS38cnLOVf0DikH-G8bhJ7CqkaB5ZxQwHRzjg@mail.gmail.com>
	<CAAHNhKXWJGRNM4F4VZadNbgkvcJORD8MFXqepCSTu-Arbz0k2Q@mail.gmail.com>
	<CAAHNhKX8PsRqc8_T3QxK05-FfpqqrVAPZ7nafmM8Ww1yg0DroQ@mail.gmail.com>
Message-ID: <CA+xi=qYc7ngOcrkEbwzutjV-e-9M0P3XP=W03VuHEePNLwToqA@mail.gmail.com>

Ralph,

This will parse that yahoo link you provided.  I'll add it (along with
a wrapper) to the qmao package tonight.

.getSplitsCalendar <- function(YM=format(Sys.Date(), "%Y%m")) {
  stopifnot(length(YM) == 1)
  if (is.timeBased(YM) || nchar(YM) == 10) {
    YM <- format(as.Date(YM), "%Y%m")
  } else if (nchar(YM) == 5) {
    YM <- paste0(substr(YM, 1, 4), 0, substr(YM, 5, 5))
  } else if (nchar(YM) == 7 && length(grep("-", YM) == 1)) {
    YM <- sub("-", "", YM)
  }
  if (nchar(YM) != 6) stop("'YM' should be 6 digits or a Date")
  Y <- substr(YM, 3, 4)
  M <- as.numeric(substr(YM, 5, 6))
  # there is a different URL for the current month than for other months
  URL <- if (identical(format(Sys.Date(), "%Y%m"), YM)) {
    "http://biz.yahoo.com/c/s.html"
  } else paste0("http://biz.yahoo.com/c/", Y, "/s", M, ".html")
  rt <- try(readHTMLTable(URL, stringsAsFactors=FALSE), silent=TRUE)
  if (inherits(rt, 'try-error')) return(NULL)
  dat <- rt[[which.max(sapply(rt, nrow))]]
  colnames(dat) <- make.names(dat[1, ])
  dat <- dat[-c(1,2), -NCOL(dat)]
  #read.zoo(dat, index.column=1:2

  dat[[1]] <- as.Date(paste(substr(YM, 1, 4), dat[[1]]), "%Y %b %d")
  dat[[2]] <- as.Date(paste(substr(YM, 1, 4), dat[[2]]), "%Y %b %d")
  dat[, NCOL(dat)] <- as.Date(paste(substr(YM, 1, 4), dat[, NCOL(dat)]),
                              "%Y %b %d")
  dat
}


R> .getSplitsCalendar()
     Payable    Ex.Date      Company Symbol Optionable. Ratio  Announced
3 2012-09-07 2012-09-10 Old Dominion   ODFL           Y   3-2 2012-08-13
4 2012-09-18 2012-09-19          LKQ    LKQ           Y   2-1 2012-08-17
5 2012-09-21 2012-09-24   Medivation   MDVN           Y   2-1 2012-08-28

R> .getSplitsCalendar('201208')
     Payable    Ex.Date            Company Symbol Optionable. Ratio  Announced
3 2012-08-10 2012-08-13       Brown-Forman   BF.B           Y   3-2 2012-06-14
4       <NA> 2012-08-13          Coca-Cola     KO           Y   2-1 2012-04-25
5 2012-08-14 2012-08-15              Oi SA   OIBR           Y   3-1 2012-08-10
6 2012-08-21 2012-08-22 Schweitzer-Mauduit    SWM           Y   2-1 2012-08-01


getDividendsCalendar gets it's data from earnings.com which is Reuters
data.  So, it should be good (except that it's way too much data if
you only want to know the dividend date of a particular ticker)

Regards,
Garrett


On Thu, Sep 6, 2012 at 12:56 PM, Ralph Vince <rvince99 at gmail.com> wrote:
> THis looks pretty good, and could be parsed -- I just wish they had it
> for cash dividends as well;
> http://biz.yahoo.com/c/s.html
> Ralph Vince
>
> On Thu, Sep 6, 2012 at 1:44 PM, Ralph Vince <rvince99 at gmail.com> wrote:
>> Hi Jeff,
>>
>> Yes, but they only offer dividends not splits. I;ve been working off
>> of sites like this and looking to automate it somehow, hopefully
>> through R.
>>
>>
>> On Thu, Sep 6, 2012 at 12:15 PM, Jeff Ryan <jeff.a.ryan at gmail.com> wrote:
>>> You might be able to use this:
>>>
>>> http://www.dividend.com/ex-dividend-dates.php
>>>
>>> Jeff
>>>
>>> On Thu, Sep 6, 2012 at 11:13 AM, Ralph Vince <rvince99 at gmail.com> wrote:
>>>> Yes, I'm willing to pay for it, but I would like to get it
>>>> automatically into a format I can parse and use, not even sure where
>>>> that exists at the moment. (Doesn't Yahoo Finance get their data from
>>>> CSI?) Ralph Vince
>>>>
>>>> On Thu, Sep 6, 2012 at 12:04 PM, G See <gsee000 at gmail.com> wrote:
>>>>> On Thu, Sep 6, 2012 at 10:54 AM, Brian G. Peterson <brian at braverock.com> wrote:
>>>>>> The only way I know of to get out of maintaining it by hand is to pay for
>>>>>> data.
>>>>>>
>>>>>> On the GUI side, Bloomberg, Factset, and Reuters have all been mentioned
>>>>>> already I think.  Rbbg of course talks to Bloomberg.
>>>>>>
>>>>>> On the other vendor side, I think Interactive Brokers has this data, and it
>>>>>> may be available via the IBrokers package if it is available via the IB API.
>>>>>> Additional vendors, such as CSIdata, tickdata.com, Reuters, CRSP, Telekurs,
>>>>>> etc all sell this data, at varying prices and quality.
>>>>>
>>>>> Interactive Brokers does provide an "Upcoming Dividend Schedule" for
>>>>> stocks, but it is a rough estimate that is often wrong.  Also, I don't
>>>>> think you can get it from their API (although if someone knows how,
>>>>> please speak up).  I think you have to go into the GUI, right-click a
>>>>> stock and select Dividend Schedule.
>>>>>
>>>>> -Garrett
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>>
>>>
>>> --
>>> Jeffrey Ryan
>>> jeffrey.ryan at lemnica.com
>>>
>>> www.lemnica.com


From rvince99 at gmail.com  Thu Sep  6 20:34:35 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Thu, 6 Sep 2012 14:34:35 -0400
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CA+xi=qYc7ngOcrkEbwzutjV-e-9M0P3XP=W03VuHEePNLwToqA@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
	<CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
	<CABDUZc-fEwH9deS38cnLOVf0DikH-G8bhJ7CqkaB5ZxQwHRzjg@mail.gmail.com>
	<CAAHNhKXWJGRNM4F4VZadNbgkvcJORD8MFXqepCSTu-Arbz0k2Q@mail.gmail.com>
	<CAAHNhKX8PsRqc8_T3QxK05-FfpqqrVAPZ7nafmM8Ww1yg0DroQ@mail.gmail.com>
	<CA+xi=qYc7ngOcrkEbwzutjV-e-9M0P3XP=W03VuHEePNLwToqA@mail.gmail.com>
Message-ID: <CAAHNhKW0afW9CF2=us3hCKGgTSBOMetMfDz5kJc4U0SdoVWBUQ@mail.gmail.com>

Garrett,

This is great. Do you think it would be possible to pass in a given
ticker to get that informatoin, rather than getting the whole gulp?
Ralph Vince

On Thu, Sep 6, 2012 at 2:27 PM, G See <gsee000 at gmail.com> wrote:
> Ralph,
>
> This will parse that yahoo link you provided.  I'll add it (along with
> a wrapper) to the qmao package tonight.
>
> .getSplitsCalendar <- function(YM=format(Sys.Date(), "%Y%m")) {
>   stopifnot(length(YM) == 1)
>   if (is.timeBased(YM) || nchar(YM) == 10) {
>     YM <- format(as.Date(YM), "%Y%m")
>   } else if (nchar(YM) == 5) {
>     YM <- paste0(substr(YM, 1, 4), 0, substr(YM, 5, 5))
>   } else if (nchar(YM) == 7 && length(grep("-", YM) == 1)) {
>     YM <- sub("-", "", YM)
>   }
>   if (nchar(YM) != 6) stop("'YM' should be 6 digits or a Date")
>   Y <- substr(YM, 3, 4)
>   M <- as.numeric(substr(YM, 5, 6))
>   # there is a different URL for the current month than for other months
>   URL <- if (identical(format(Sys.Date(), "%Y%m"), YM)) {
>     "http://biz.yahoo.com/c/s.html"
>   } else paste0("http://biz.yahoo.com/c/", Y, "/s", M, ".html")
>   rt <- try(readHTMLTable(URL, stringsAsFactors=FALSE), silent=TRUE)
>   if (inherits(rt, 'try-error')) return(NULL)
>   dat <- rt[[which.max(sapply(rt, nrow))]]
>   colnames(dat) <- make.names(dat[1, ])
>   dat <- dat[-c(1,2), -NCOL(dat)]
>   #read.zoo(dat, index.column=1:2
>
>   dat[[1]] <- as.Date(paste(substr(YM, 1, 4), dat[[1]]), "%Y %b %d")
>   dat[[2]] <- as.Date(paste(substr(YM, 1, 4), dat[[2]]), "%Y %b %d")
>   dat[, NCOL(dat)] <- as.Date(paste(substr(YM, 1, 4), dat[, NCOL(dat)]),
>                               "%Y %b %d")
>   dat
> }
>
>
> R> .getSplitsCalendar()
>      Payable    Ex.Date      Company Symbol Optionable. Ratio  Announced
> 3 2012-09-07 2012-09-10 Old Dominion   ODFL           Y   3-2 2012-08-13
> 4 2012-09-18 2012-09-19          LKQ    LKQ           Y   2-1 2012-08-17
> 5 2012-09-21 2012-09-24   Medivation   MDVN           Y   2-1 2012-08-28
>
> R> .getSplitsCalendar('201208')
>      Payable    Ex.Date            Company Symbol Optionable. Ratio  Announced
> 3 2012-08-10 2012-08-13       Brown-Forman   BF.B           Y   3-2 2012-06-14
> 4       <NA> 2012-08-13          Coca-Cola     KO           Y   2-1 2012-04-25
> 5 2012-08-14 2012-08-15              Oi SA   OIBR           Y   3-1 2012-08-10
> 6 2012-08-21 2012-08-22 Schweitzer-Mauduit    SWM           Y   2-1 2012-08-01
>
>
> getDividendsCalendar gets it's data from earnings.com which is Reuters
> data.  So, it should be good (except that it's way too much data if
> you only want to know the dividend date of a particular ticker)
>
> Regards,
> Garrett
>
>
> On Thu, Sep 6, 2012 at 12:56 PM, Ralph Vince <rvince99 at gmail.com> wrote:
>> THis looks pretty good, and could be parsed -- I just wish they had it
>> for cash dividends as well;
>> http://biz.yahoo.com/c/s.html
>> Ralph Vince
>>
>> On Thu, Sep 6, 2012 at 1:44 PM, Ralph Vince <rvince99 at gmail.com> wrote:
>>> Hi Jeff,
>>>
>>> Yes, but they only offer dividends not splits. I;ve been working off
>>> of sites like this and looking to automate it somehow, hopefully
>>> through R.
>>>
>>>
>>> On Thu, Sep 6, 2012 at 12:15 PM, Jeff Ryan <jeff.a.ryan at gmail.com> wrote:
>>>> You might be able to use this:
>>>>
>>>> http://www.dividend.com/ex-dividend-dates.php
>>>>
>>>> Jeff
>>>>
>>>> On Thu, Sep 6, 2012 at 11:13 AM, Ralph Vince <rvince99 at gmail.com> wrote:
>>>>> Yes, I'm willing to pay for it, but I would like to get it
>>>>> automatically into a format I can parse and use, not even sure where
>>>>> that exists at the moment. (Doesn't Yahoo Finance get their data from
>>>>> CSI?) Ralph Vince
>>>>>
>>>>> On Thu, Sep 6, 2012 at 12:04 PM, G See <gsee000 at gmail.com> wrote:
>>>>>> On Thu, Sep 6, 2012 at 10:54 AM, Brian G. Peterson <brian at braverock.com> wrote:
>>>>>>> The only way I know of to get out of maintaining it by hand is to pay for
>>>>>>> data.
>>>>>>>
>>>>>>> On the GUI side, Bloomberg, Factset, and Reuters have all been mentioned
>>>>>>> already I think.  Rbbg of course talks to Bloomberg.
>>>>>>>
>>>>>>> On the other vendor side, I think Interactive Brokers has this data, and it
>>>>>>> may be available via the IBrokers package if it is available via the IB API.
>>>>>>> Additional vendors, such as CSIdata, tickdata.com, Reuters, CRSP, Telekurs,
>>>>>>> etc all sell this data, at varying prices and quality.
>>>>>>
>>>>>> Interactive Brokers does provide an "Upcoming Dividend Schedule" for
>>>>>> stocks, but it is a rough estimate that is often wrong.  Also, I don't
>>>>>> think you can get it from their API (although if someone knows how,
>>>>>> please speak up).  I think you have to go into the GUI, right-click a
>>>>>> stock and select Dividend Schedule.
>>>>>>
>>>>>> -Garrett
>>>>>>
>>>>>> _______________________________________________
>>>>>> R-SIG-Finance at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>
>>>>
>>>>
>>>> --
>>>> Jeffrey Ryan
>>>> jeffrey.ryan at lemnica.com
>>>>
>>>> www.lemnica.com


From gsee000 at gmail.com  Thu Sep  6 20:44:11 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 6 Sep 2012 13:44:11 -0500
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKW0afW9CF2=us3hCKGgTSBOMetMfDz5kJc4U0SdoVWBUQ@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
	<CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
	<CABDUZc-fEwH9deS38cnLOVf0DikH-G8bhJ7CqkaB5ZxQwHRzjg@mail.gmail.com>
	<CAAHNhKXWJGRNM4F4VZadNbgkvcJORD8MFXqepCSTu-Arbz0k2Q@mail.gmail.com>
	<CAAHNhKX8PsRqc8_T3QxK05-FfpqqrVAPZ7nafmM8Ww1yg0DroQ@mail.gmail.com>
	<CA+xi=qYc7ngOcrkEbwzutjV-e-9M0P3XP=W03VuHEePNLwToqA@mail.gmail.com>
	<CAAHNhKW0afW9CF2=us3hCKGgTSBOMetMfDz5kJc4U0SdoVWBUQ@mail.gmail.com>
Message-ID: <CA+xi=qYP7UYW05XYcpvRusQsOa3Dd5BOQnuPf=T08XMYcYH-LA@mail.gmail.com>

That's not really how the website is setup.  So, I don't think that's
how the function should be setup by default.  But, you can easily
filter the results by Symbol.

Here is the wrapper I mentioned.

    getSplitsCalendar <- function(from, to) {
      qmao:::getCalendarByMonth(".getSplitsCalendar", from=from, to=to)
    }

This allows you to get and merge several months of splits calendars.

    sc <- getSplitsCalendar(from='2012-01-01', to='2012-08-31')

Now you have the splits calendar from January to August.  You can
filter that by the symbol you care about.

sc[sc$Symbol == "ALK", ]
      Payable    Ex.Date    Company Symbol Optionable. Ratio  Announced
52 2012-03-16 2012-03-19 Alaska Air    ALK           Y   2-1 2012-02-16

Good enough?

Garrett

On Thu, Sep 6, 2012 at 1:34 PM, Ralph Vince <rvince99 at gmail.com> wrote:
> Garrett,
>
> This is great. Do you think it would be possible to pass in a given
> ticker to get that informatoin, rather than getting the whole gulp?
> Ralph Vince
>


From gsee000 at gmail.com  Thu Sep  6 20:49:32 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 6 Sep 2012 13:49:32 -0500
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CA+xi=qYP7UYW05XYcpvRusQsOa3Dd5BOQnuPf=T08XMYcYH-LA@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
	<CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
	<CABDUZc-fEwH9deS38cnLOVf0DikH-G8bhJ7CqkaB5ZxQwHRzjg@mail.gmail.com>
	<CAAHNhKXWJGRNM4F4VZadNbgkvcJORD8MFXqepCSTu-Arbz0k2Q@mail.gmail.com>
	<CAAHNhKX8PsRqc8_T3QxK05-FfpqqrVAPZ7nafmM8Ww1yg0DroQ@mail.gmail.com>
	<CA+xi=qYc7ngOcrkEbwzutjV-e-9M0P3XP=W03VuHEePNLwToqA@mail.gmail.com>
	<CAAHNhKW0afW9CF2=us3hCKGgTSBOMetMfDz5kJc4U0SdoVWBUQ@mail.gmail.com>
	<CA+xi=qYP7UYW05XYcpvRusQsOa3Dd5BOQnuPf=T08XMYcYH-LA@mail.gmail.com>
Message-ID: <CA+xi=qah78zgkzR7J1B4wOOVAZtAOdvnuDpSuZzVeo072dv8ug@mail.gmail.com>

I guess since you really only care about the future, this would be
more appropriate

    sc <- getSplitsCalendar(from='2012-09-05', to='2012-12-31')
    sc[sc$Symbol =="LKQ", ]
         Payable    Ex.Date Company Symbol Optionable. Ratio  Announced
    4 2012-09-18 2012-09-19     LKQ    LKQ           Y   2-1 2012-08-17


On Thu, Sep 6, 2012 at 1:44 PM, G See <gsee000 at gmail.com> wrote:
> That's not really how the website is setup.  So, I don't think that's
> how the function should be setup by default.  But, you can easily
> filter the results by Symbol.
>
> Here is the wrapper I mentioned.
>
>     getSplitsCalendar <- function(from, to) {
>       qmao:::getCalendarByMonth(".getSplitsCalendar", from=from, to=to)
>     }
>
> This allows you to get and merge several months of splits calendars.
>
>     sc <- getSplitsCalendar(from='2012-01-01', to='2012-08-31')
>
> Now you have the splits calendar from January to August.  You can
> filter that by the symbol you care about.
>
> sc[sc$Symbol == "ALK", ]
>       Payable    Ex.Date    Company Symbol Optionable. Ratio  Announced
> 52 2012-03-16 2012-03-19 Alaska Air    ALK           Y   2-1 2012-02-16
>
> Good enough?
>
> Garrett
>
> On Thu, Sep 6, 2012 at 1:34 PM, Ralph Vince <rvince99 at gmail.com> wrote:
>> Garrett,
>>
>> This is great. Do you think it would be possible to pass in a given
>> ticker to get that informatoin, rather than getting the whole gulp?
>> Ralph Vince
>>


From nikos.rachmanis at gmail.com  Fri Sep  7 00:56:30 2012
From: nikos.rachmanis at gmail.com (Nikos Rachmanis)
Date: Thu, 6 Sep 2012 18:56:30 -0400
Subject: [R-SIG-Finance] Performance Analytics table.AnnualizedReturns
Message-ID: <CAC=5KeLixiE+KgkBxB126+0DGOFoUXdtFvpv52JUhe5jAd3cUg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120906/c4da8125/attachment.pl>

From rvince99 at gmail.com  Fri Sep  7 01:31:30 2012
From: rvince99 at gmail.com (Ralph Vince)
Date: Thu, 6 Sep 2012 19:31:30 -0400
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CA+xi=qah78zgkzR7J1B4wOOVAZtAOdvnuDpSuZzVeo072dv8ug@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
	<CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
	<CABDUZc-fEwH9deS38cnLOVf0DikH-G8bhJ7CqkaB5ZxQwHRzjg@mail.gmail.com>
	<CAAHNhKXWJGRNM4F4VZadNbgkvcJORD8MFXqepCSTu-Arbz0k2Q@mail.gmail.com>
	<CAAHNhKX8PsRqc8_T3QxK05-FfpqqrVAPZ7nafmM8Ww1yg0DroQ@mail.gmail.com>
	<CA+xi=qYc7ngOcrkEbwzutjV-e-9M0P3XP=W03VuHEePNLwToqA@mail.gmail.com>
	<CAAHNhKW0afW9CF2=us3hCKGgTSBOMetMfDz5kJc4U0SdoVWBUQ@mail.gmail.com>
	<CA+xi=qYP7UYW05XYcpvRusQsOa3Dd5BOQnuPf=T08XMYcYH-LA@mail.gmail.com>
	<CA+xi=qah78zgkzR7J1B4wOOVAZtAOdvnuDpSuZzVeo072dv8ug@mail.gmail.com>
Message-ID: <CAAHNhKVfWHfzsHQJzj41gzi9+zDFMPug7pqFM-LaO=4CPwBWVQ@mail.gmail.com>

Garrett, this is really great. So I only need to get the latest qmao
to do this? It's in CRAN? Ralph VInce

On Thu, Sep 6, 2012 at 2:49 PM, G See <gsee000 at gmail.com> wrote:
> I guess since you really only care about the future, this would be
> more appropriate
>
>     sc <- getSplitsCalendar(from='2012-09-05', to='2012-12-31')
>     sc[sc$Symbol =="LKQ", ]
>          Payable    Ex.Date Company Symbol Optionable. Ratio  Announced
>     4 2012-09-18 2012-09-19     LKQ    LKQ           Y   2-1 2012-08-17
>
>
> On Thu, Sep 6, 2012 at 1:44 PM, G See <gsee000 at gmail.com> wrote:
>> That's not really how the website is setup.  So, I don't think that's
>> how the function should be setup by default.  But, you can easily
>> filter the results by Symbol.
>>
>> Here is the wrapper I mentioned.
>>
>>     getSplitsCalendar <- function(from, to) {
>>       qmao:::getCalendarByMonth(".getSplitsCalendar", from=from, to=to)
>>     }
>>
>> This allows you to get and merge several months of splits calendars.
>>
>>     sc <- getSplitsCalendar(from='2012-01-01', to='2012-08-31')
>>
>> Now you have the splits calendar from January to August.  You can
>> filter that by the symbol you care about.
>>
>> sc[sc$Symbol == "ALK", ]
>>       Payable    Ex.Date    Company Symbol Optionable. Ratio  Announced
>> 52 2012-03-16 2012-03-19 Alaska Air    ALK           Y   2-1 2012-02-16
>>
>> Good enough?
>>
>> Garrett
>>
>> On Thu, Sep 6, 2012 at 1:34 PM, Ralph Vince <rvince99 at gmail.com> wrote:
>>> Garrett,
>>>
>>> This is great. Do you think it would be possible to pass in a given
>>> ticker to get that informatoin, rather than getting the whole gulp?
>>> Ralph Vince
>>>


From gsee000 at gmail.com  Fri Sep  7 01:58:55 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 6 Sep 2012 18:58:55 -0500
Subject: [R-SIG-Finance] Equities Data
In-Reply-To: <CAAHNhKVfWHfzsHQJzj41gzi9+zDFMPug7pqFM-LaO=4CPwBWVQ@mail.gmail.com>
References: <CAAHNhKUT-0vStcDxmbGgpSZRn--p4Q5YrfdbsRT9QuoGOgQaug@mail.gmail.com>
	<BLU161-W44C820C4B1BFF87D985CA2DFA80@phx.gbl>
	<CAAHNhKV5QERiM4KJ4Q2aDGwUUCE8a5__xd_-AN2eiwifagRQEQ@mail.gmail.com>
	<CA+xi=qYnuC+LR42rRpXLbVrKM4=bu4=Xpipnzvib+xQK3H9YGA@mail.gmail.com>
	<CAAHNhKXe0nYkDo-Z_et9ROSdaxzBuRwF+HAEg_qggouysaPyTA@mail.gmail.com>
	<5048C71F.8030705@braverock.com>
	<CA+xi=qbTcKnYG_vVxPMeg3cO5r3emq3db3mJs=O+15oxd=z1tg@mail.gmail.com>
	<CAAHNhKXvo-PJ-QE4kDxEJZsmenrh8FpHTFk2dh_MdskswaAszA@mail.gmail.com>
	<CABDUZc-fEwH9deS38cnLOVf0DikH-G8bhJ7CqkaB5ZxQwHRzjg@mail.gmail.com>
	<CAAHNhKXWJGRNM4F4VZadNbgkvcJORD8MFXqepCSTu-Arbz0k2Q@mail.gmail.com>
	<CAAHNhKX8PsRqc8_T3QxK05-FfpqqrVAPZ7nafmM8Ww1yg0DroQ@mail.gmail.com>
	<CA+xi=qYc7ngOcrkEbwzutjV-e-9M0P3XP=W03VuHEePNLwToqA@mail.gmail.com>
	<CAAHNhKW0afW9CF2=us3hCKGgTSBOMetMfDz5kJc4U0SdoVWBUQ@mail.gmail.com>
	<CA+xi=qYP7UYW05XYcpvRusQsOa3Dd5BOQnuPf=T08XMYcYH-LA@mail.gmail.com>
	<CA+xi=qah78zgkzR7J1B4wOOVAZtAOdvnuDpSuZzVeo072dv8ug@mail.gmail.com>
	<CAAHNhKVfWHfzsHQJzj41gzi9+zDFMPug7pqFM-LaO=4CPwBWVQ@mail.gmail.com>
Message-ID: <CA+xi=qZDPxqeGij7uUbW3ynLn5q5y4hzp9=GtAidzoZSrwx9dg@mail.gmail.com>

You should be able to install it with this command

    install.packages("qmao", repos="http://R-Forge.R-project.org")

If for some reason that does not work, see this link:
http://stackoverflow.com/questions/11105131/cannot-install-r-forge-package-using-install-packages

Garrett

On Thu, Sep 6, 2012 at 6:31 PM, Ralph Vince <rvince99 at gmail.com> wrote:
> Garrett, this is really great. So I only need to get the latest qmao
> to do this? It's in CRAN? Ralph VInce
>
> On Thu, Sep 6, 2012 at 2:49 PM, G See <gsee000 at gmail.com> wrote:
>> I guess since you really only care about the future, this would be
>> more appropriate
>>
>>     sc <- getSplitsCalendar(from='2012-09-05', to='2012-12-31')
>>     sc[sc$Symbol =="LKQ", ]
>>          Payable    Ex.Date Company Symbol Optionable. Ratio  Announced
>>     4 2012-09-18 2012-09-19     LKQ    LKQ           Y   2-1 2012-08-17
>>
>>
>> On Thu, Sep 6, 2012 at 1:44 PM, G See <gsee000 at gmail.com> wrote:
>>> That's not really how the website is setup.  So, I don't think that's
>>> how the function should be setup by default.  But, you can easily
>>> filter the results by Symbol.
>>>
>>> Here is the wrapper I mentioned.
>>>
>>>     getSplitsCalendar <- function(from, to) {
>>>       qmao:::getCalendarByMonth(".getSplitsCalendar", from=from, to=to)
>>>     }
>>>
>>> This allows you to get and merge several months of splits calendars.
>>>
>>>     sc <- getSplitsCalendar(from='2012-01-01', to='2012-08-31')
>>>
>>> Now you have the splits calendar from January to August.  You can
>>> filter that by the symbol you care about.
>>>
>>> sc[sc$Symbol == "ALK", ]
>>>       Payable    Ex.Date    Company Symbol Optionable. Ratio  Announced
>>> 52 2012-03-16 2012-03-19 Alaska Air    ALK           Y   2-1 2012-02-16
>>>
>>> Good enough?
>>>
>>> Garrett
>>>
>>> On Thu, Sep 6, 2012 at 1:34 PM, Ralph Vince <rvince99 at gmail.com> wrote:
>>>> Garrett,
>>>>
>>>> This is great. Do you think it would be possible to pass in a given
>>>> ticker to get that informatoin, rather than getting the whole gulp?
>>>> Ralph Vince
>>>>


From jctoll at gmail.com  Fri Sep  7 03:08:09 2012
From: jctoll at gmail.com (J Toll)
Date: Thu, 6 Sep 2012 20:08:09 -0500
Subject: [R-SIG-Finance] sufficient n for a binomial option pricing model
In-Reply-To: <FA07C4306DEF5743AC1DB451680DFF590C363DCA@MKEXCHVS4.Mail.Fiserv.net>
References: <CA+nJqYM5uyrSP5gfgmUudDthLxiok5J0BAVqOiix+RbrtJmOMQ@mail.gmail.com>
	<FA07C4306DEF5743AC1DB451680DFF590C363DCA@MKEXCHVS4.Mail.Fiserv.net>
Message-ID: <CA+nJqYNB8YWgXEP8fWGOiEfBaCK5piVC-QWQRT1bpTd1=bCcYw@mail.gmail.com>

On Thu, Sep 6, 2012 at 9:40 AM, Smith, Dale <Dale.Smith at fiserv.com> wrote:
> One way to terminate is to look at the consecutive differences between
> the averages and terminate if the difference is less than your
> tolerance. However, you should guard against the case where the
> consecutive differences are never less than the tolerance. In this case,
> just put in a maximum number of steps n and log the last average, the
> number of steps, and a message. This allows the user to determine
> whether they want to accept or reject the result.

Dale,

Thanks for the suggested method.  Actually, that's probably overkill
for what I'm trying to do, but it definitely puts the process in
perspective and gives some insight into what I could be doing to boost
the reliability of my pricing.  Thanks again.

Best,

James






> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org
> [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of J Toll
> Sent: Thursday, September 06, 2012 10:25 AM
> To: r-sig-finance at r-project.org
> Subject: [R-SIG-Finance] sufficient n for a binomial option pricing
> model
>
> Hi,
>
> I have a question regarding the selection of n, the number of time
> steps, in a binomial option pricing model.  I suppose my question is not
> strictly related to R.  As larger values should be more accurate, what
> I've read on the subject simply suggests that you use a sufficiently
> large value for your purposes.  So I've been trying to evaluate what is
> a sufficiently large value of n for my purposes.  Is there any rule of
> thumb regarding the value of n?
>
> When using the fOptions package CRRBinomialTreeOption function, with
> varying n, the price oscillates back and forth converging on a price.
> This can be clearly seen through plotting.
>
> require(fOptions)
>
> x <- function(n) {
>
>   CRRBinomialTreeOption(TypeFlag = "ca",
>                         S = 50,
>                         X = 50,
>                         Time = 1/12,
>                         r = 0.02,
>                         b = 0.02,
>                         sigma = 0.18,
>                         n = n)@price
> }
>
> y <- sapply(1:100, x)               # mean(y) == 1.079693
> plot(y)
>
> Given this oscillation, my question is whether it would be "better" to
> compute two prices using two smaller, consecutive values of n rather
> than one large value?  Or is there some other better way?
>
> For example, using n =1000 or 1001, the option prices are within 5
> hundredths of a cent, but the calculation is extremely slow for either.
>
> x(1000)                                    # 1.077408
> x(1001)                                    # 1.077926
>
> mean(sapply(1000:1001, x))      # 1.077667
>
> Comparatively, taking the mean of n= 40 and 41 yields a value very close
> to the middle of the range, yet is much faster.
>
> mean(sapply(40:41, x))             # 1.0776
>
> It seems like averaging two smaller, consecutive values of n is
> basically as accurate and far faster than using large values of n.  I
> was hoping someone might have some insight into why this might or might
> not be a valid approach.  Thanks.
>
>
> James
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From varcovar at live.com  Fri Sep  7 10:35:22 2012
From: varcovar at live.com (varcovar)
Date: Fri, 7 Sep 2012 01:35:22 -0700 (PDT)
Subject: [R-SIG-Finance] Performance Analytics table.AnnualizedReturns
In-Reply-To: <CAC=5KeLixiE+KgkBxB126+0DGOFoUXdtFvpv52JUhe5jAd3cUg@mail.gmail.com>
References: <CAC=5KeLixiE+KgkBxB126+0DGOFoUXdtFvpv52JUhe5jAd3cUg@mail.gmail.com>
Message-ID: <1347006922336-4642485.post@n4.nabble.com>

Hi Nick, 

I don't think there's any table for that specific need. However, here's how
I would do it: 

library(PerformanceAnalytics)
data(managers)
R <- managers[, 2]
years <- as.character(unique(lubridate:::year(index(R))))
# Return a list whose elements are years and contain table
ll <- plyr:::llply(years, function(x) {
    ret <- table.AnnualizedReturns(R[x])
    colnames(ret) <- x
    ret
})
# Return a table
df <- unlist(ll)
dim(df) <- c(3, length(years))
colnames(df) <- years
rownames(df) <- c("Annualized Return", "Annualized Volatility", "Sharpe
Ratio")

Cheers! 

Markus D.



--
View this message in context: http://r.789695.n4.nabble.com/Performance-Analytics-table-AnnualizedReturns-tp4642468p4642485.html
Sent from the Rmetrics mailing list archive at Nabble.com.


From andreasswoboda at hotmail.com  Fri Sep  7 12:24:05 2012
From: andreasswoboda at hotmail.com (Andreas Swoboda)
Date: Fri, 7 Sep 2012 12:24:05 +0200
Subject: [R-SIG-Finance] Dynamic Charting of Technical Indicators
Message-ID: <DUB115-W8892C6419711B28F231931C2AF0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120907/831cf728/attachment.pl>

From brian at braverock.com  Fri Sep  7 13:13:53 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 07 Sep 2012 06:13:53 -0500
Subject: [R-SIG-Finance] Dynamic Charting of Technical Indicators
In-Reply-To: <DUB115-W8892C6419711B28F231931C2AF0@phx.gbl>
References: <DUB115-W8892C6419711B28F231931C2AF0@phx.gbl>
Message-ID: <5049D6F1.1010705@braverock.com>

On 09/07/2012 05:24 AM, Andreas Swoboda wrote:
>
> Hi guys,
>
> In each iteration of my loop, we change the ohlc object "kk" to generate a movie of evolving  (and generating new) ohlc-bars via the chartSeries command:
>
> chartSeries(kk,type="bars")
>
> Now I wanted add to this movie a movie of the RSI, whose most recent value changes as the respective close of the most recent bar changes. This I did via the command
>
> chartSeries(kk,type="bars", TA='addRSI()')
>
>
> However, the graphical representation does not satisfy me, you barely see the RSI window, it sometimes shows up but quickly disappears afterwards.
>
>
> Any help would be very much appreciated!

Please provide a fully reproducible example, per the posting guide.  It 
would be both easier and more satisfying to help you if you provide 
enough code that we can directly replicate the problem that you are 
describing..

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From andreasswoboda at hotmail.com  Fri Sep  7 13:20:29 2012
From: andreasswoboda at hotmail.com (Andreas Swoboda)
Date: Fri, 7 Sep 2012 13:20:29 +0200
Subject: [R-SIG-Finance] Dynamic Charting of Technical Indicators
Message-ID: <DUB115-W57056034D442BEF4B6FE5DC2AF0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120907/9b471d88/attachment.pl>

From josh.m.ulrich at gmail.com  Sat Sep  8 15:39:15 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Sat, 8 Sep 2012 08:39:15 -0500
Subject: [R-SIG-Finance] Performance Analytics table.AnnualizedReturns
In-Reply-To: <1347006922336-4642485.post@n4.nabble.com>
References: <CAC=5KeLixiE+KgkBxB126+0DGOFoUXdtFvpv52JUhe5jAd3cUg@mail.gmail.com>
	<1347006922336-4642485.post@n4.nabble.com>
Message-ID: <CAPPM_gRVjcHD9yyNgNBtxNxTtWC2Rzxbgc1yNAJd0b8hk_Z_mA@mail.gmail.com>

A much simpler solution is to use period.apply.  Note that
table.AnnualizedReturns returns a multi-row data.frame.  period.apply
works best if the function returns a vector, so make a helper function
to do that and everything works.

# A function that wraps table.AnnualizedReturns
# and returns a vector. You might want something
# more elaborate if 'x' has multiple columns and/or
# if you want better column names.
t.table.AnnRet <- function(x)  # one 'x' column
  drop(t(table.AnnualizedReturns(x)))
#t.table.AnnRet <- function(x)  # multiple 'x' columns
#  unlist(table.AnnualizedReturns(x))

# call period.apply via apply.monthly
apply.yearly(managers[,2], t.table.AnnRet)

Best,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Fri, Sep 7, 2012 at 3:35 AM, varcovar <varcovar at live.com> wrote:
> Hi Nick,
>
> I don't think there's any table for that specific need. However, here's how
> I would do it:
>
> library(PerformanceAnalytics)
> data(managers)
> R <- managers[, 2]
> years <- as.character(unique(lubridate:::year(index(R))))
> # Return a list whose elements are years and contain table
> ll <- plyr:::llply(years, function(x) {
>     ret <- table.AnnualizedReturns(R[x])
>     colnames(ret) <- x
>     ret
> })
> # Return a table
> df <- unlist(ll)
> dim(df) <- c(3, length(years))
> colnames(df) <- years
> rownames(df) <- c("Annualized Return", "Annualized Volatility", "Sharpe
> Ratio")
>
> Cheers!
>
> Markus D.
>
>
>
> --
> View this message in context: http://r.789695.n4.nabble.com/Performance-Analytics-table-AnnualizedReturns-tp4642468p4642485.html
> Sent from the Rmetrics mailing list archive at Nabble.com.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From rhelpacc at gmail.com  Sun Sep  9 05:44:07 2012
From: rhelpacc at gmail.com (Robert A'gata)
Date: Sat, 8 Sep 2012 23:44:07 -0400
Subject: [R-SIG-Finance] Rbbg package's CONNECTION_FAILURE
Message-ID: <CAA7=MyVOMr1re0ZN=5D1hg6AqxgWQ5Ozx4XCmk+yaAdiVpfpyA@mail.gmail.com>

Hi,

I managed to install the Rbbg. Now I am trying to follow the manual. I
start with creating a connection to bloomberg. I got an error saying
that Rbbg cannot connect to bloomberg because CONNECTION_FAILURE.
Below is the exact message I got. I have bloomberg anywhere. I am
wondering what might have gone wrong? Thank you.

Best,

Robert

> conn <- blpConnect()
R version 2.15.1 (2012-06-22)
rJava Version 0.9-3
Rbbg Version 0.4-155
Java environment initialized successfully.
Looking for most recent blpapi3.jar file...
Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) :
  org.findata.blpwrapper.WrapperException: Session not started
because: CONNECTION_FAILURE


From jean-v.cote at sympatico.ca  Mon Sep 10 03:29:19 2012
From: jean-v.cote at sympatico.ca (=?iso-8859-1?B?SmVhbi1WaWN0b3IgQ/R06Q==?=)
Date: Sun, 9 Sep 2012 21:29:19 -0400
Subject: [R-SIG-Finance] I am using the quantmod package
 (http://www.quantmod.com) and, using getSymbols, 
Message-ID: <COL120-W403B7437B041427C29C022D9AC0@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120909/16f5d910/attachment.pl>

From gsee000 at gmail.com  Mon Sep 10 04:02:44 2012
From: gsee000 at gmail.com (G See)
Date: Sun, 9 Sep 2012 21:02:44 -0500
Subject: [R-SIG-Finance] I am using the quantmod package
 (http://www.quantmod.com) and, using getSymbols, 
In-Reply-To: <COL120-W403B7437B041427C29C022D9AC0@phx.gbl>
References: <COL120-W403B7437B041427C29C022D9AC0@phx.gbl>
Message-ID: <CA+xi=qbpS7AvL-A_tfMgh1d1hWzxAe8uSWVJoo2NYb8crBgcoA@mail.gmail.com>

I assume you did this:

    library(quantmod)
    getSymbols("BBD-B.TO")

If so, then you should have data stored in the .GlobalEnv in an object
named "BBD-B.TO"

You could access it like this
    get("BBD-B.TO")

And you could rename the data with a syntactically valid name like this:

    assign("BBD", get("BBD-B.TO"), pos=.GlobalEnv)
    #assign(make.names("BBD-B.TO"), get("BBD-B.TO"), pos=.GlobalEnv)
    rm("BBD-B.TO")

You have at least 2 other options.

You can use auto.assign=FALSE in the getSymbols call and assign the
results yourself like this:

    BBD <- getSymbols("BBD-B.TO", src='yahoo', auto.assign=FALSE)

Or, you can use setSymbolLookup to associate the name yahoo uses with
a valid name in R

    setSymbolLookup("BBD", list(src='yahoo', name='BBD-B.TO'))
    getSymbols("BBD")

HTH,
Garrett

On Sun, Sep 9, 2012 at 8:29 PM, Jean-Victor C?t?
<jean-v.cote at sympatico.ca> wrote:
>
> ...I could not download from Yahoo Finance the quotes for "BBD-B.TO", a common stock traded on the Toronto Stock Exchange.  I guess that it is because of the "-" and the ".".
>
> Jean-Victor C?t?
>
>         [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From miniflowtrader at gmail.com  Tue Sep 11 22:07:35 2012
From: miniflowtrader at gmail.com (Dave)
Date: Tue, 11 Sep 2012 16:07:35 -0400
Subject: [R-SIG-Finance] Example using Galgo to Optimize Parameters
Message-ID: <00cd01cd9059$16781530$43683f90$@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120911/655c97ee/attachment.pl>

From john.laing at gmail.com  Wed Sep 12 04:11:33 2012
From: john.laing at gmail.com (John Laing)
Date: Tue, 11 Sep 2012 22:11:33 -0400
Subject: [R-SIG-Finance] Rbbg package's CONNECTION_FAILURE
In-Reply-To: <CAA7=MyVOMr1re0ZN=5D1hg6AqxgWQ5Ozx4XCmk+yaAdiVpfpyA@mail.gmail.com>
References: <CAA7=MyVOMr1re0ZN=5D1hg6AqxgWQ5Ozx4XCmk+yaAdiVpfpyA@mail.gmail.com>
Message-ID: <CAA3Wa=seWG4VSxCbmsi9iZa6jYMFXBVVVFRFFaRsBX9DPjLfQA@mail.gmail.com>

Robert,

For Rbbg to work, you must be logged into the Bloomberg desktop on the
same computer where the R session is running. If you have the Excel
API, that's a good way to check if your Bloomberg session is
accessible.

-John

On Sat, Sep 8, 2012 at 11:44 PM, Robert A'gata <rhelpacc at gmail.com> wrote:
> Hi,
>
> I managed to install the Rbbg. Now I am trying to follow the manual. I
> start with creating a connection to bloomberg. I got an error saying
> that Rbbg cannot connect to bloomberg because CONNECTION_FAILURE.
> Below is the exact message I got. I have bloomberg anywhere. I am
> wondering what might have gone wrong? Thank you.
>
> Best,
>
> Robert
>
>> conn <- blpConnect()
> R version 2.15.1 (2012-06-22)
> rJava Version 0.9-3
> Rbbg Version 0.4-155
> Java environment initialized successfully.
> Looking for most recent blpapi3.jar file...
> Adding C:\blp\API\APIv3\JavaAPI\v3.4.8.1\lib\blpapi3.jar to Java classpath
> Error in .jnew("org/findata/blpwrapper/Connection", java.log.level) :
>   org.findata.blpwrapper.WrapperException: Session not started
> because: CONNECTION_FAILURE
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From ustaudinger at activequant.com  Wed Sep 12 07:09:07 2012
From: ustaudinger at activequant.com (Ulrich Staudinger)
Date: Wed, 12 Sep 2012 07:09:07 +0200
Subject: [R-SIG-Finance] Example using Galgo to Optimize Parameters
In-Reply-To: <00cd01cd9059$16781530$43683f90$@gmail.com>
References: <00cd01cd9059$16781530$43683f90$@gmail.com>
Message-ID: <CAMrz3D2nRNOHNpx1RWVyz+UQLTPtKPtkfnibhxnUxHs749Cp9A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120912/e8cdfe39/attachment.pl>

From miniflowtrader at gmail.com  Wed Sep 12 07:40:02 2012
From: miniflowtrader at gmail.com (Dave)
Date: Wed, 12 Sep 2012 01:40:02 -0400
Subject: [R-SIG-Finance] Example using Galgo to Optimize Parameters
In-Reply-To: <CAMrz3D2nRNOHNpx1RWVyz+UQLTPtKPtkfnibhxnUxHs749Cp9A@mail.gmail.com>
References: <00cd01cd9059$16781530$43683f90$@gmail.com>
	<CAMrz3D2nRNOHNpx1RWVyz+UQLTPtKPtkfnibhxnUxHs749Cp9A@mail.gmail.com>
Message-ID: <002101cd90a9$0ef459e0$2cdd0da0$@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120912/06fdb4e2/attachment.pl>

From ustaudinger at activequant.com  Wed Sep 12 07:51:11 2012
From: ustaudinger at activequant.com (Ulrich Staudinger)
Date: Wed, 12 Sep 2012 07:51:11 +0200
Subject: [R-SIG-Finance] Example using Galgo to Optimize Parameters
In-Reply-To: <002101cd90a9$0ef459e0$2cdd0da0$@gmail.com>
References: <00cd01cd9059$16781530$43683f90$@gmail.com>
	<CAMrz3D2nRNOHNpx1RWVyz+UQLTPtKPtkfnibhxnUxHs749Cp9A@mail.gmail.com>
	<002101cd90a9$0ef459e0$2cdd0da0$@gmail.com>
Message-ID: <CAMrz3D3POL+JOxBXrkh5aoOQ3EprjUzRjaP=07ERkN+HMkZe7A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120912/28f617ae/attachment.pl>

From miniflowtrader at gmail.com  Wed Sep 12 08:34:54 2012
From: miniflowtrader at gmail.com (Dave)
Date: Wed, 12 Sep 2012 02:34:54 -0400
Subject: [R-SIG-Finance] Example using Galgo to Optimize Parameters
In-Reply-To: <CAMrz3D3POL+JOxBXrkh5aoOQ3EprjUzRjaP=07ERkN+HMkZe7A@mail.gmail.com>
References: <00cd01cd9059$16781530$43683f90$@gmail.com>
	<CAMrz3D2nRNOHNpx1RWVyz+UQLTPtKPtkfnibhxnUxHs749Cp9A@mail.gmail.com>
	<002101cd90a9$0ef459e0$2cdd0da0$@gmail.com>
	<CAMrz3D3POL+JOxBXrkh5aoOQ3EprjUzRjaP=07ERkN+HMkZe7A@mail.gmail.com>
Message-ID: <004601cd90b0$b8fbb580$2af32080$@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120912/3908f63d/attachment.pl>

From patrick at burns-stat.com  Wed Sep 12 09:16:42 2012
From: patrick at burns-stat.com (Patrick Burns)
Date: Wed, 12 Sep 2012 08:16:42 +0100
Subject: [R-SIG-Finance] Example using Galgo to Optimize Parameters
In-Reply-To: <004601cd90b0$b8fbb580$2af32080$@gmail.com>
References: <00cd01cd9059$16781530$43683f90$@gmail.com>
	<CAMrz3D2nRNOHNpx1RWVyz+UQLTPtKPtkfnibhxnUxHs749Cp9A@mail.gmail.com>
	<002101cd90a9$0ef459e0$2cdd0da0$@gmail.com>
	<CAMrz3D3POL+JOxBXrkh5aoOQ3EprjUzRjaP=07ERkN+HMkZe7A@mail.gmail.com>
	<004601cd90b0$b8fbb580$2af32080$@gmail.com>
Message-ID: <505036DA.8040504@burns-stat.com>

Dave,

If you don't know them, you may be interested in:

http://www.portfolioprobe.com/2012/07/23/a-comparison-of-some-heuristic-optimization-methods/

http://www.portfolioprobe.com/2012/08/20/another-comparison-of-heuristic-optimizers/

But I didn't know about Galgo.

Pat

On 12/09/2012 07:34, Dave wrote:
> I think that should do it.
>
>
>
> Thank you!
>
>
>
> From: ustaudinger at gmail.com [mailto:ustaudinger at gmail.com] On Behalf Of Ulrich Staudinger
> Sent: Wednesday, September 12, 2012 1:51 AM
> To: Dave
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Example using Galgo to Optimize Parameters
>
>
>
> what about section 7.4 in the Galgo tutorial?
>
> http://bioinformatica.mty.itesm.mx/sites/default/files/Tutorial.pdf
>
>
>
> Does a simple regression optimization, shows the fitness function and that's about all there is to it.
>
>
>
> In analogy to this, the sharpe, max pnl, pnl per trade or whatever can be implemented.
>
>
>
> On Wed, Sep 12, 2012 at 7:40 AM, Dave <miniflowtrader at gmail.com> wrote:
>
> Did not find anything involving parameter optimization.
>
>
>
> From: ustaudinger at gmail.com [mailto:ustaudinger at gmail.com] On Behalf Of Ulrich Staudinger
> Sent: Wednesday, September 12, 2012 1:09 AM
> To: Dave
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Example using Galgo to Optimize Parameters
>
>
>
>
> Dear Dave.
>
>
>
> You didn't even try googling for "galgo R example", did you?
>
>
>
>
>
> Kind regards,
>
> Ulrich
>
>
>
>
>
> On Tue, Sep 11, 2012 at 10:07 PM, Dave <miniflowtrader at gmail.com> wrote:
>
> Hello all,
>
>
>
> Would it be possible for someone to post a simple code example using Galgo.
> Optimization could be based on Sharpe Ratio or another one of your choice.
> Just some simple code on how one might set this up.
>
>
>
> Thanks!
>
>
>
> Dave
>
>
>
>
>          [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>
>
>
>
>
>
> --
>
> Ulrich Staudinger
>
>
>
> http://www.activequant.com
> Connect online: https://www.xing.com/profile/Ulrich_Staudinger
>
>
>          [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>
>
>
>
>
>
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From miniflowtrader at gmail.com  Wed Sep 12 15:59:24 2012
From: miniflowtrader at gmail.com (Dave)
Date: Wed, 12 Sep 2012 09:59:24 -0400
Subject: [R-SIG-Finance] Example using Galgo to Optimize Parameters
In-Reply-To: <505036DA.8040504@burns-stat.com>
References: <00cd01cd9059$16781530$43683f90$@gmail.com>
	<CAMrz3D2nRNOHNpx1RWVyz+UQLTPtKPtkfnibhxnUxHs749Cp9A@mail.gmail.com>
	<002101cd90a9$0ef459e0$2cdd0da0$@gmail.com>
	<CAMrz3D3POL+JOxBXrkh5aoOQ3EprjUzRjaP=07ERkN+HMkZe7A@mail.gmail.com>
	<004601cd90b0$b8fbb580$2af32080$@gmail.com>
	<505036DA.8040504@burns-stat.com>
Message-ID: <009b01cd90ee$d1396c30$73ac4490$@gmail.com>

Great post!

Thanks for sharing.

-----Original Message-----
From: Patrick Burns [mailto:patrick at burns-stat.com] 
Sent: Wednesday, September 12, 2012 3:17 AM
To: Dave; r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Example using Galgo to Optimize Parameters

Dave,

If you don't know them, you may be interested in:

http://www.portfolioprobe.com/2012/07/23/a-comparison-of-some-heuristic-opti
mization-methods/

http://www.portfolioprobe.com/2012/08/20/another-comparison-of-heuristic-opt
imizers/

But I didn't know about Galgo.

Pat

On 12/09/2012 07:34, Dave wrote:
> I think that should do it.
>
>
>
> Thank you!
>
>
>
> From: ustaudinger at gmail.com [mailto:ustaudinger at gmail.com] On Behalf 
> Of Ulrich Staudinger
> Sent: Wednesday, September 12, 2012 1:51 AM
> To: Dave
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Example using Galgo to Optimize 
> Parameters
>
>
>
> what about section 7.4 in the Galgo tutorial?
>
> http://bioinformatica.mty.itesm.mx/sites/default/files/Tutorial.pdf
>
>
>
> Does a simple regression optimization, shows the fitness function and
that's about all there is to it.
>
>
>
> In analogy to this, the sharpe, max pnl, pnl per trade or whatever can be
implemented.
>
>
>
> On Wed, Sep 12, 2012 at 7:40 AM, Dave <miniflowtrader at gmail.com> wrote:
>
> Did not find anything involving parameter optimization.
>
>
>
> From: ustaudinger at gmail.com [mailto:ustaudinger at gmail.com] On Behalf 
> Of Ulrich Staudinger
> Sent: Wednesday, September 12, 2012 1:09 AM
> To: Dave
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Example using Galgo to Optimize 
> Parameters
>
>
>
>
> Dear Dave.
>
>
>
> You didn't even try googling for "galgo R example", did you?
>
>
>
>
>
> Kind regards,
>
> Ulrich
>
>
>
>
>
> On Tue, Sep 11, 2012 at 10:07 PM, Dave <miniflowtrader at gmail.com> wrote:
>
> Hello all,
>
>
>
> Would it be possible for someone to post a simple code example using
Galgo.
> Optimization could be based on Sharpe Ratio or another one of your choice.
> Just some simple code on how one might set this up.
>
>
>
> Thanks!
>
>
>
> Dave
>
>
>
>
>          [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
should go.
>
>
>
>
>
>
>
> --
>
> Ulrich Staudinger
>
>
>
> http://www.activequant.com
> Connect online: https://www.xing.com/profile/Ulrich_Staudinger
>
>
>          [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
should go.
>
>
>
>
>
>
>

--
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From miniflowtrader at gmail.com  Wed Sep 12 16:18:26 2012
From: miniflowtrader at gmail.com (Dave)
Date: Wed, 12 Sep 2012 10:18:26 -0400
Subject: [R-SIG-Finance] Backtesting Suite which can show profit/loss by
	time (drilldown by N time intervals)
Message-ID: <00a001cd90f1$7a630440$6f290cc0$@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120912/5c4209a5/attachment.pl>

From brian at braverock.com  Wed Sep 12 16:37:25 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Wed, 12 Sep 2012 09:37:25 -0500
Subject: [R-SIG-Finance] Backtesting Suite which can show profit/loss by
 time (drilldown by N time intervals)
In-Reply-To: <00a001cd90f1$7a630440$6f290cc0$@gmail.com>
References: <00a001cd90f1$7a630440$6f290cc0$@gmail.com>
Message-ID: <50509E25.3080601@braverock.com>

On 09/12/2012 09:18 AM, Dave wrote:
> I'm looking for a backtesting package in R that can report profit/loss for a
> trading system by intraday time intervals.
<...>
> Does anything currently exist which has the ability to output this
> information?

Yes.

Please follow the posting guide[1] and good netiquette[2]; kindly search 
before posting and demonstrate that you've put in some effort.

Searching rseek.org for 'transaction profit and loss' in the 'support 
lists' tab should amply answer your question.

Also, Pat Burns previously posted a blog entry on searching for 
information in R[2] and Paul Teetor covers it well in the R Cookbook [3]

Regards,

    - Brian

Ref:
[1] Posting Guide
http://www.r-project.org/posting-guide.html

[2] How To Ask Questions The Smart Way
http://www.catb.org/esr/faqs/smart-questions.html

[3] How to search the R-sig-finance archives
http://www.portfolioprobe.com/2012/01/19/how-to-search-the-r-sig-finance-archives/

[4] R Cookbook
http://www.amazon.com/Cookbook-OReilly-Cookbooks-Paul-Teetor/dp/0596809158

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From miniflowtrader at gmail.com  Wed Sep 12 17:37:30 2012
From: miniflowtrader at gmail.com (Dave)
Date: Wed, 12 Sep 2012 11:37:30 -0400
Subject: [R-SIG-Finance] Backtesting Suite which can show profit/loss by
	time (drilldown by N time intervals)
In-Reply-To: <50509E25.3080601@braverock.com>
References: <00a001cd90f1$7a630440$6f290cc0$@gmail.com>
	<50509E25.3080601@braverock.com>
Message-ID: <000601cd90fc$862b37b0$9281a710$@gmail.com>

Thanks for the pointers.

Apparently quantstrat and PerformanceAnalytics seem to be used a lot.  I
don't see anything that is specific to their intraday reporting
capabilities.

Will experiment.

-----Original Message-----
From: Brian G. Peterson [mailto:brian at braverock.com] 
Sent: Wednesday, September 12, 2012 10:37 AM
To: Dave
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Backtesting Suite which can show profit/loss by
time (drilldown by N time intervals)

On 09/12/2012 09:18 AM, Dave wrote:
> I'm looking for a backtesting package in R that can report profit/loss 
> for a trading system by intraday time intervals.
<...>
> Does anything currently exist which has the ability to output this 
> information?

Yes.

Please follow the posting guide[1] and good netiquette[2]; kindly search
before posting and demonstrate that you've put in some effort.

Searching rseek.org for 'transaction profit and loss' in the 'support lists'
tab should amply answer your question.

Also, Pat Burns previously posted a blog entry on searching for information
in R[2] and Paul Teetor covers it well in the R Cookbook [3]

Regards,

    - Brian

Ref:
[1] Posting Guide
http://www.r-project.org/posting-guide.html

[2] How To Ask Questions The Smart Way
http://www.catb.org/esr/faqs/smart-questions.html

[3] How to search the R-sig-finance archives
http://www.portfolioprobe.com/2012/01/19/how-to-search-the-r-sig-finance-arc
hives/

[4] R Cookbook
http://www.amazon.com/Cookbook-OReilly-Cookbooks-Paul-Teetor/dp/0596809158

--
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From ilya.kipnis at gmail.com  Wed Sep 12 17:39:42 2012
From: ilya.kipnis at gmail.com (Ilya Kipnis)
Date: Wed, 12 Sep 2012 11:39:42 -0400
Subject: [R-SIG-Finance] Backtesting Suite which can show profit/loss by
 time (drilldown by N time intervals)
In-Reply-To: <000601cd90fc$862b37b0$9281a710$@gmail.com>
References: <00a001cd90f1$7a630440$6f290cc0$@gmail.com>
	<50509E25.3080601@braverock.com>
	<000601cd90fc$862b37b0$9281a710$@gmail.com>
Message-ID: <CA+oJuEFmPu9BX4gFoUVradVnSNAY3WT=gd_w2SVAwFAmaWEKcA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120912/7babbe9a/attachment.pl>

From miniflowtrader at gmail.com  Wed Sep 12 23:33:57 2012
From: miniflowtrader at gmail.com (Dave)
Date: Wed, 12 Sep 2012 17:33:57 -0400
Subject: [R-SIG-Finance] Stand Alone eSignal or DTN Connector
Message-ID: <00d501cd912e$51548870$f3fd9950$@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120912/9034defc/attachment.pl>

From jan at opentrades.nl  Wed Sep 12 23:46:43 2012
From: jan at opentrades.nl (OpenTrades)
Date: Wed, 12 Sep 2012 23:46:43 +0200
Subject: [R-SIG-Finance] Backtesting Suite which can show profit/loss by
 time (drilldown by N time intervals)
In-Reply-To: <000601cd90fc$862b37b0$9281a710$@gmail.com>
References: <00a001cd90f1$7a630440$6f290cc0$@gmail.com>
	<50509E25.3080601@braverock.com>
	<000601cd90fc$862b37b0$9281a710$@gmail.com>
Message-ID: <505102C3.4040000@opentrades.nl>

Dave,

Quantstrat and PerformanceAnalytics can deal with any time frame really. 
Check the luxor demo's in the quantstrat demo dir and you will see examples.

Use the xts package for your data (as do the luxor demo's), and check 
(a.o.) the functions ?to.period, ?to.minutes15 etc. for more info. Also 
read to xts manual to understand its power, and why you should use xts.

Regards,

Jan Humme.



On 12-09-12 17:37, Dave wrote:
> Thanks for the pointers.
>
> Apparently quantstrat and PerformanceAnalytics seem to be used a lot.  I
> don't see anything that is specific to their intraday reporting
> capabilities.
>
> Will experiment.
>
> -----Original Message-----
> From: Brian G. Peterson [mailto:brian at braverock.com]
> Sent: Wednesday, September 12, 2012 10:37 AM
> To: Dave
> Cc: r-sig-finance at r-project.org
> Subject: Re: [R-SIG-Finance] Backtesting Suite which can show profit/loss by
> time (drilldown by N time intervals)
>
> On 09/12/2012 09:18 AM, Dave wrote:
>> I'm looking for a backtesting package in R that can report profit/loss
>> for a trading system by intraday time intervals.
> <...>
>> Does anything currently exist which has the ability to output this
>> information?
> Yes.
>
> Please follow the posting guide[1] and good netiquette[2]; kindly search
> before posting and demonstrate that you've put in some effort.
>
> Searching rseek.org for 'transaction profit and loss' in the 'support lists'
> tab should amply answer your question.
>
> Also, Pat Burns previously posted a blog entry on searching for information
> in R[2] and Paul Teetor covers it well in the R Cookbook [3]
>
> Regards,
>
>      - Brian
>
> Ref:
> [1] Posting Guide
> http://www.r-project.org/posting-guide.html
>
> [2] How To Ask Questions The Smart Way
> http://www.catb.org/esr/faqs/smart-questions.html
>
> [3] How to search the R-sig-finance archives
> http://www.portfolioprobe.com/2012/01/19/how-to-search-the-r-sig-finance-arc
> hives/
>
> [4] R Cookbook
> http://www.amazon.com/Cookbook-OReilly-Cookbooks-Paul-Teetor/dp/0596809158
>
> --
> Brian G. Peterson
> http://braverock.com/brian/
> Ph: 773-459-4973
> IM: bgpbraverock
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


-- 
Jan Humme - OpenTrades

WWW:     http://www.opentrades.nl
Email:   jan at opentrades.nl
Twitter: @opentrades


From jfperles at gmail.com  Fri Sep 14 08:41:06 2012
From: jfperles at gmail.com (JOSE FRANCISCO PERLES RIBES)
Date: Fri, 14 Sep 2012 08:41:06 +0200
Subject: [R-SIG-Finance] Comparing pvalues in ADF test in Gretl fUnitRoots
	and Eviews
Message-ID: <CAGKcx6AUx_fyRTHjtvhAJW4U7T=5Y9NOv_Xft=aSpYMp9M4LYQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120914/246227c3/attachment.pl>

From sjansevanrensburg at gmail.com  Fri Sep 14 13:30:47 2012
From: sjansevanrensburg at gmail.com (Stefan Janse van Rensburg)
Date: Fri, 14 Sep 2012 13:30:47 +0200
Subject: [R-SIG-Finance] Comparing pvalues in ADF test in Gretl,
	fUnitRoots and Eviews
In-Reply-To: <mailman.1.1347616801.10272.r-sig-finance@r-project.org>
References: <mailman.1.1347616801.10272.r-sig-finance@r-project.org>
Message-ID: <50531567.8070908@gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120914/85f190c1/attachment.pl>

From jfperles at gmail.com  Sat Sep 15 13:06:16 2012
From: jfperles at gmail.com (JOSE FRANCISCO PERLES RIBES)
Date: Sat, 15 Sep 2012 13:06:16 +0200
Subject: [R-SIG-Finance] Comparing pvalues in ADF test in Gretl fUnitroots
	and Eviews
Message-ID: <CAGKcx6At3Hvt9ru+ktvE6_wy=P2hdp41Bmb_YrY69BaeEVG-eQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120915/c841a27b/attachment.pl>

From costas.vorlow at gmail.com  Sat Sep 15 17:57:59 2012
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Sat, 15 Sep 2012 18:57:59 +0300
Subject: [R-SIG-Finance] Aggregating tick-by-tick data to seconds
Message-ID: <CABfqsR_kSE8RbKeq2jikAKBDWf87+PesV0oih2rF-=ku139ndg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120915/78bb123b/attachment.pl>

From michael.weylandt at gmail.com  Sat Sep 15 18:04:37 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Sat, 15 Sep 2012 17:04:37 +0100
Subject: [R-SIG-Finance] Aggregating tick-by-tick data to seconds
In-Reply-To: <CABfqsR_kSE8RbKeq2jikAKBDWf87+PesV0oih2rF-=ku139ndg@mail.gmail.com>
References: <CABfqsR_kSE8RbKeq2jikAKBDWf87+PesV0oih2rF-=ku139ndg@mail.gmail.com>
Message-ID: <CAAmySGO0-9dFKtYw+-60wGz_thomxMO-s8nJTbPG-Veq0c7LzQ@mail.gmail.com>

If you have a column labelled "Volume", to.period will sum it: e.g.,

library(xts)
data(sample_matrix)

s <- as.xts(sample_matrix)

s <- cbind(s, Volume = round(exp(runif(NROW(s),2,3))*10000))

head(s)
head(to.weekly(s))

Cheers,
Michael

On Sat, Sep 15, 2012 at 4:57 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
> Hello,
>
> I have the following data (xts) (last two columns refer to up and down
> volumes).
>
>> head(test,20)
>                       [,1] [,2] [,3]
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  500    0
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  400    0
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  100    0
> 2012-09-12 16:30:00 144.39  900    0
> 2012-09-12 16:30:00 144.39  200    0
> 2012-09-12 16:30:00 144.39  103    0
> 2012-09-12 16:30:00 144.39  197    0
> 2012-09-12 16:30:00 144.39  200    0
> 2012-09-12 16:30:00 144.39  500    0
> 2012-09-12 16:30:00 144.39  400    0
> 2012-09-12 16:30:00 144.39  100    0
> 2012-09-12 16:30:00 144.39  500    0
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  200    0
> 2012-09-12 16:30:00 144.39  103    0
> 2012-09-12 16:30:00 144.38    0  100
>
>
> I can use the to.period to aggregate the above data to seconds
>
>                     test.Open test.High test.Low test.Close
> 2012-09-12 16:30:00    144.39    144.47   144.37     144.38
> 2012-09-12 16:31:00    144.39    144.40   144.33     144.37
> 2012-09-12 16:32:00    144.37    144.45   144.37     144.45
> 2012-09-12 16:33:00    144.45    144.47   144.42     144.47
>
>
>  but I am not sure how to do this for the volume columns. I would need to
> retrieve the volume sums per second.
>
> Is this functionality built into the xts package? Is there any other
> function that could be used to do something like that?
>
> Thanks & best regards,
> Costas
> _______________
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From gsee000 at gmail.com  Sat Sep 15 18:58:17 2012
From: gsee000 at gmail.com (G See)
Date: Sat, 15 Sep 2012 11:58:17 -0500
Subject: [R-SIG-Finance] Aggregating tick-by-tick data to seconds
In-Reply-To: <CABfqsR_kSE8RbKeq2jikAKBDWf87+PesV0oih2rF-=ku139ndg@mail.gmail.com>
References: <CABfqsR_kSE8RbKeq2jikAKBDWf87+PesV0oih2rF-=ku139ndg@mail.gmail.com>
Message-ID: <CA+xi=qYthr141rWch+1BecL1eRyRDwmBMQNn8tQSWmrRDDgTwQ@mail.gmail.com>

You can use `period.apply` (along with `endpoints()`) to apply any
function you like over non-overlapping time periods.

In this case, you want to sum columns 2 and 3 separately, so use
`period.apply()` with `FUN=colSums` on just the 2nd and 3rd columns.

    period.apply(test[, 2:3], endpoints(test, 'secs'), FUN=colSums)

Then you can merge that with the results of `to.period`

    > cbind(to.period(test[, 1], name="test"), period.apply(test[,
-1], endpoints(test, 'secs'), FUN=colSums))
                                test.Open test.High test.Low
test.Close   up down
    2012-09-12 16:30:00    144.39    144.39   144.38     144.38 5903  100

You could also use `period.sum()` on each column separately.

HTH,
Garrett

On Sat, Sep 15, 2012 at 10:57 AM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
> Hello,
>
> I have the following data (xts) (last two columns refer to up and down
> volumes).
>
>> head(test,20)
>                       [,1] [,2] [,3]
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  500    0
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  400    0
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  100    0
> 2012-09-12 16:30:00 144.39  900    0
> 2012-09-12 16:30:00 144.39  200    0
> 2012-09-12 16:30:00 144.39  103    0
> 2012-09-12 16:30:00 144.39  197    0
> 2012-09-12 16:30:00 144.39  200    0
> 2012-09-12 16:30:00 144.39  500    0
> 2012-09-12 16:30:00 144.39  400    0
> 2012-09-12 16:30:00 144.39  100    0
> 2012-09-12 16:30:00 144.39  500    0
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  200    0
> 2012-09-12 16:30:00 144.39  103    0
> 2012-09-12 16:30:00 144.38    0  100
>
>
> I can use the to.period to aggregate the above data to seconds
>
>                     test.Open test.High test.Low test.Close
> 2012-09-12 16:30:00    144.39    144.47   144.37     144.38
> 2012-09-12 16:31:00    144.39    144.40   144.33     144.37
> 2012-09-12 16:32:00    144.37    144.45   144.37     144.45
> 2012-09-12 16:33:00    144.45    144.47   144.42     144.47
>
>
>  but I am not sure how to do this for the volume columns. I would need to
> retrieve the volume sums per second.
>
> Is this functionality built into the xts package? Is there any other
> function that could be used to do something like that?
>
> Thanks & best regards,
> Costas
> _______________
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jeff.a.ryan at gmail.com  Sat Sep 15 19:00:41 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Sat, 15 Sep 2012 12:00:41 -0500
Subject: [R-SIG-Finance] Aggregating tick-by-tick data to seconds
In-Reply-To: <CABfqsR_kSE8RbKeq2jikAKBDWf87+PesV0oih2rF-=ku139ndg@mail.gmail.com>
References: <CABfqsR_kSE8RbKeq2jikAKBDWf87+PesV0oih2rF-=ku139ndg@mail.gmail.com>
Message-ID: <2AFE63B1-4005-40CB-891F-E780DA1B357B@gmail.com>

?period.sum

HTH 
Jeff

Jeffrey Ryan    |    Founder    |    jeffrey.ryan at lemnica.com

www.lemnica.com

On Sep 15, 2012, at 10:57 AM, Costas Vorlow <costas.vorlow at gmail.com> wrote:

> Hello,
> 
> I have the following data (xts) (last two columns refer to up and down
> volumes).
> 
>> head(test,20)
>                      [,1] [,2] [,3]
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  500    0
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  400    0
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  100    0
> 2012-09-12 16:30:00 144.39  900    0
> 2012-09-12 16:30:00 144.39  200    0
> 2012-09-12 16:30:00 144.39  103    0
> 2012-09-12 16:30:00 144.39  197    0
> 2012-09-12 16:30:00 144.39  200    0
> 2012-09-12 16:30:00 144.39  500    0
> 2012-09-12 16:30:00 144.39  400    0
> 2012-09-12 16:30:00 144.39  100    0
> 2012-09-12 16:30:00 144.39  500    0
> 2012-09-12 16:30:00 144.39  300    0
> 2012-09-12 16:30:00 144.39  200    0
> 2012-09-12 16:30:00 144.39  103    0
> 2012-09-12 16:30:00 144.38    0  100
> 
> 
> I can use the to.period to aggregate the above data to seconds
> 
>                    test.Open test.High test.Low test.Close
> 2012-09-12 16:30:00    144.39    144.47   144.37     144.38
> 2012-09-12 16:31:00    144.39    144.40   144.33     144.37
> 2012-09-12 16:32:00    144.37    144.45   144.37     144.45
> 2012-09-12 16:33:00    144.45    144.47   144.42     144.47
> 
> 
> but I am not sure how to do this for the volume columns. I would need to
> retrieve the volume sums per second.
> 
> Is this functionality built into the xts package? Is there any other
> function that could be used to do something like that?
> 
> Thanks & best regards,
> Costas
> _______________
> 
>    [[alternative HTML version deleted]]
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From pietrader at gmail.com  Sat Sep 15 19:21:08 2012
From: pietrader at gmail.com (Pie T)
Date: Sat, 15 Sep 2012 10:21:08 -0700
Subject: [R-SIG-Finance] Any R api's available to do modelling with MM algos
	or portfolio weights?
Message-ID: <CAG5Ec006hLdodLZoZ4kb173gMpcSE9kCEB1BASCOZ804p=AHuw@mail.gmail.com>

Hi -
I would like to model following scenarios for my past trades and
wondering if there are any R APIs already available in blotter (or
another R package). If not can you please advise on how you as an
experienced Quant/R programmer would do it. If you can include a code
fragment (or a link to a sample) that is great but otherwise pointers
is also fine.

Problem:
I have a list of transactions that I can read into R as an xts/df
object. The Quantity in input txn table is normalized to 1 share/1
contract.  The format of the transaction table is as follows:

"TxnID, Symbol, Quantity, Long/Short, Entry Date, Entry Price, Exit
Date, Exit Price, Txn PnL (%)"

Now I have an Account with initial capital as $X. Following are couple
of scenarios I would like to model and see how my portfolio
performance stats would looked like. I am wondering if there is any R
API to which I can just pass this input transaction table, initial
account value, weight(s) and type of MM algorithm to use and get in
return new transaction table. Once I have new transaction table, I
know how to get various performance metrics & charts in R using
blotter & PerformanceAnalytics packages.

(a) (Equal Weight algo) Use 20% of portfolio (i.e., weight = 0.25) for
each transaction and get a new transaction table with an extra column
at the end like "Account PnL". If all transactions are non-overlapping
then it is just matter of appending weight column and simple
multiplication. But many of the transactions overlap with 1 or more
other transactions. So the API needs to be intelligent about that
while determining how much cash available for the next transaction.

(b) (Volatility Weigting algo) Do same as above but weight it by
volatility (say ATR) of the symbol i.e., I specify to R package API
that 1 unit of volatility = 1% of portfolio and the api after
execution returns a new transaction table with an "Account PnL"
column.

(c) (Fixed fractional algo) Same as above but API takes as input R
($risk per share) for each transaction and another input (i.e.,
guidance 1R = x% of portfolio) and returns a new transaction table
with an "Account PnL" column.

My apologies if this is not the right forum for this question. I look
forward to your suggestions.

Regards,
Pie


From student.northwestern at gmail.com  Sat Sep 15 22:21:05 2012
From: student.northwestern at gmail.com (Jim Green)
Date: Sat, 15 Sep 2012 16:21:05 -0400
Subject: [R-SIG-Finance] Help with getSymbols from csv data file
In-Reply-To: <CAPPM_gTKFcwVe9NMhQ55PvX9syRtGL6NKN29RDt21k2RiJKZuQ@mail.gmail.com>
References: <20120127142910.74211i6lar1oeqe8@webmail.considine.net>
	<1327714850.26516.YahooMailClassic@web30603.mail.mud.yahoo.com>
	<CAPPM_gTKFcwVe9NMhQ55PvX9syRtGL6NKN29RDt21k2RiJKZuQ@mail.gmail.com>
Message-ID: <CACAe89yu-kisQOJ2yGsq2O6hAFq5kDfKD8-e-mkgewVRjifPPA@mail.gmail.com>

On 27 January 2012 20:58, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> Hi Jun,
>
> Specifying the date format via setSymbolLookup fixes it.  I'm not sure
> if there is a more general solution.
>
> setSymbolLookup(test=list(src="csv",format="%Y-%m-%d"))
> getSymbols('test',src='csv')

I had the same problem,

it seems to be to make more sense if I can set the format via
setDefaults('getSymbols.csv'....

having to set set the setSymbolLookup for each symbol is too much.

Jim.


From costas.vorlow at gmail.com  Mon Sep 17 20:14:11 2012
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Mon, 17 Sep 2012 21:14:11 +0300
Subject: [R-SIG-Finance] Problems with time format and read.csv()
Message-ID: <CABfqsR_mCEJftknGRW8CTM4-W9zk1HNbU3ky0zo2pSRL=4NSgw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120917/3c53455c/attachment.pl>

From josh.m.ulrich at gmail.com  Mon Sep 17 20:18:52 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 17 Sep 2012 13:18:52 -0500
Subject: [R-SIG-Finance] Problems with time format and read.csv()
In-Reply-To: <CABfqsR_mCEJftknGRW8CTM4-W9zk1HNbU3ky0zo2pSRL=4NSgw@mail.gmail.com>
References: <CABfqsR_mCEJftknGRW8CTM4-W9zk1HNbU3ky0zo2pSRL=4NSgw@mail.gmail.com>
Message-ID: <CAPPM_gSP0d3GfwT4U254vxPscth-OG4wqwNTY9aY9p2O+KmHpQ@mail.gmail.com>

Use the colClasses arg to read Date and Time as character:

dat <- read.csv("tick.csv", colClasses=c(rep("character",2),rep("numeric",6)))

HTH,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


On Mon, Sep 17, 2012 at 1:14 PM, Costas Vorlow <costas.vorlow at gmail.com> wrote:
> Hello,
>
> Following a previous post,
> http://www.mail-archive.com/r-sig-finance at r-project.org/msg03727.html
>
> I am having trouble with the hours format as it is picked up by the
> read.csv() command.
>
> The following data:
>
> "Date","Time","Open","High","Low","Close","Up","Down"
> 04/27/2012,0930,12.24,12.24,12.24,12.24,0,300
> 04/27/2012,0930,12.24,12.24,12.24,12.24,0,200
>
> are read as
>
> datain<-read.csv('tick.csv', header=TRUE)
>
>> head(dat)
>         Date Time  Open  High   Low Close  Up Down
> 1 04/27/2012  930 12.24 12.24 12.24 12.24   0  300
> 2 04/27/2012  930 12.24 12.24 12.24 12.24   0  200
>
>
> i.e., 0930 becomes 930. How can this be translated to a "proper" time i.e,
> 9:30 so I can convert the data frame to an XTS object accordingly?
>
> I try to fix it by using  %k below instead of %H  (which also didn't work)
>
> hf<-xts(dat[,6], as.POSIXct(paste(dat[,1], dat[,2]),  format = "%m/%d/%Y
> %k%M"))
>
> but I get NAs
>
>> head(hf)
>       [,1]
> <NA> 12.24
> <NA> 12.24
> <NA> 12.25
> <NA> 12.25
> <NA> 12.25
> <NA> 12.25
>
> using %I in the format= above also didn't work. I gather that this is not a
> timezone problem and has to do with the way the time format is
> understood by R when generating a  time index for the XTS object.
>
> Thanks in advance for your time and answers,
> Costas
> --
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From miniflowtrader at gmail.com  Mon Sep 17 21:15:48 2012
From: miniflowtrader at gmail.com (Dave)
Date: Mon, 17 Sep 2012 15:15:48 -0400
Subject: [R-SIG-Finance] Problems with time format and read.csv()
In-Reply-To: <CABfqsR_mCEJftknGRW8CTM4-W9zk1HNbU3ky0zo2pSRL=4NSgw@mail.gmail.com>
References: <CABfqsR_mCEJftknGRW8CTM4-W9zk1HNbU3ky0zo2pSRL=4NSgw@mail.gmail.com>
Message-ID: <009601cd9508$d9198de0$8b4ca9a0$@gmail.com>

You will find that using fasttime will make a huge difference in load times
if you are not happy with performance.

parseTickData <- function(inputFile) {
  DAT.list <- scan(file=inputFile,
sep=",",skip=1,what=list(Date="",Time="",Close=0,Volume=0),quiet=T)
  index <- fastPOSIXct(paste(DAT.list$Date,DAT.list$Time),"GMT")
  DAT.xts <-
xts(data.frame(Close=DAT.list$Close,Volume=DAT.list$Volume),index)
  DAT.xts <- make.index.unique(DAT.xts)
  return(DAT.xts)
}

Your data must be in the format:

2012-03-23,03:00:00

-----Original Message-----
From: r-sig-finance-bounces at r-project.org
[mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Costas Vorlow
Sent: Monday, September 17, 2012 2:14 PM
To: r-sig-finance at r-project.org
Subject: [R-SIG-Finance] Problems with time format and read.csv()

Hello,

Following a previous post,
http://www.mail-archive.com/r-sig-finance at r-project.org/msg03727.html

I am having trouble with the hours format as it is picked up by the
read.csv() command.

The following data:

"Date","Time","Open","High","Low","Close","Up","Down"
04/27/2012,0930,12.24,12.24,12.24,12.24,0,300
04/27/2012,0930,12.24,12.24,12.24,12.24,0,200

are read as

datain<-read.csv('tick.csv', header=TRUE)

> head(dat)
        Date Time  Open  High   Low Close  Up Down
1 04/27/2012  930 12.24 12.24 12.24 12.24   0  300
2 04/27/2012  930 12.24 12.24 12.24 12.24   0  200


i.e., 0930 becomes 930. How can this be translated to a "proper" time i.e,
9:30 so I can convert the data frame to an XTS object accordingly?

I try to fix it by using  %k below instead of %H  (which also didn't work)

hf<-xts(dat[,6], as.POSIXct(paste(dat[,1], dat[,2]),  format = "%m/%d/%Y
%k%M"))

but I get NAs

> head(hf)
      [,1]
<NA> 12.24
<NA> 12.24
<NA> 12.25
<NA> 12.25
<NA> 12.25
<NA> 12.25

using %I in the format= above also didn't work. I gather that this is not a
timezone problem and has to do with the way the time format is understood by
R when generating a  time index for the XTS object.

Thanks in advance for your time and answers, Costas
--

	[[alternative HTML version deleted]]

_______________________________________________
R-SIG-Finance at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-sig-finance
-- Subscriber-posting only. If you want to post, subscribe first.
-- Also note that this is not the r-help list where general R questions
should go.


From josh.m.ulrich at gmail.com  Mon Sep 17 21:19:56 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Mon, 17 Sep 2012 14:19:56 -0500
Subject: [R-SIG-Finance] Problems with time format and read.csv()
In-Reply-To: <009601cd9508$d9198de0$8b4ca9a0$@gmail.com>
References: <CABfqsR_mCEJftknGRW8CTM4-W9zk1HNbU3ky0zo2pSRL=4NSgw@mail.gmail.com>
	<009601cd9508$d9198de0$8b4ca9a0$@gmail.com>
Message-ID: <CAPPM_gTj+c2acHx_-=X3EStOMbshCArX1RgwuvsnUvKhH8fmnw@mail.gmail.com>

On Mon, Sep 17, 2012 at 2:15 PM, Dave <miniflowtrader at gmail.com> wrote:
> You will find that using fasttime will make a huge difference in load times
> if you are not happy with performance.
>
> parseTickData <- function(inputFile) {
>   DAT.list <- scan(file=inputFile,
> sep=",",skip=1,what=list(Date="",Time="",Close=0,Volume=0),quiet=T)
>   index <- fastPOSIXct(paste(DAT.list$Date,DAT.list$Time),"GMT")
>   DAT.xts <-
> xts(data.frame(Close=DAT.list$Close,Volume=DAT.list$Volume),index)
>   DAT.xts <- make.index.unique(DAT.xts)
>   return(DAT.xts)
> }
>
> Your data must be in the format:
>
> 2012-03-23,03:00:00
>
It also must be in GMT, i.e. no daylight saving time.

--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


> -----Original Message-----
> From: r-sig-finance-bounces at r-project.org
> [mailto:r-sig-finance-bounces at r-project.org] On Behalf Of Costas Vorlow
> Sent: Monday, September 17, 2012 2:14 PM
> To: r-sig-finance at r-project.org
> Subject: [R-SIG-Finance] Problems with time format and read.csv()
>
> Hello,
>
> Following a previous post,
> http://www.mail-archive.com/r-sig-finance at r-project.org/msg03727.html
>
> I am having trouble with the hours format as it is picked up by the
> read.csv() command.
>
> The following data:
>
> "Date","Time","Open","High","Low","Close","Up","Down"
> 04/27/2012,0930,12.24,12.24,12.24,12.24,0,300
> 04/27/2012,0930,12.24,12.24,12.24,12.24,0,200
>
> are read as
>
> datain<-read.csv('tick.csv', header=TRUE)
>
>> head(dat)
>         Date Time  Open  High   Low Close  Up Down
> 1 04/27/2012  930 12.24 12.24 12.24 12.24   0  300
> 2 04/27/2012  930 12.24 12.24 12.24 12.24   0  200
>
>
> i.e., 0930 becomes 930. How can this be translated to a "proper" time i.e,
> 9:30 so I can convert the data frame to an XTS object accordingly?
>
> I try to fix it by using  %k below instead of %H  (which also didn't work)
>
> hf<-xts(dat[,6], as.POSIXct(paste(dat[,1], dat[,2]),  format = "%m/%d/%Y
> %k%M"))
>
> but I get NAs
>
>> head(hf)
>       [,1]
> <NA> 12.24
> <NA> 12.24
> <NA> 12.25
> <NA> 12.25
> <NA> 12.25
> <NA> 12.25
>
> using %I in the format= above also didn't work. I gather that this is not a
> timezone problem and has to do with the way the time format is understood by
> R when generating a  time index for the XTS object.
>
> Thanks in advance for your time and answers, Costas
> --
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From costas.vorlow at gmail.com  Mon Sep 17 21:34:20 2012
From: costas.vorlow at gmail.com (Costas Vorlow)
Date: Mon, 17 Sep 2012 22:34:20 +0300
Subject: [R-SIG-Finance] Problems with time format and read.csv()
In-Reply-To: <CAPPM_gTj+c2acHx_-=X3EStOMbshCArX1RgwuvsnUvKhH8fmnw@mail.gmail.com>
References: <CABfqsR_mCEJftknGRW8CTM4-W9zk1HNbU3ky0zo2pSRL=4NSgw@mail.gmail.com>
	<009601cd9508$d9198de0$8b4ca9a0$@gmail.com>
	<CAPPM_gTj+c2acHx_-=X3EStOMbshCArX1RgwuvsnUvKhH8fmnw@mail.gmail.com>
Message-ID: <CABfqsR_VSSF8RRjtiYKjOLihmSex7ZWNYGAhkCDW9FoTaD1r_A@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120917/a0493817/attachment.pl>

From worik.stanton at gmail.com  Mon Sep 17 23:12:27 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Tue, 18 Sep 2012 09:12:27 +1200
Subject: [R-SIG-Finance] Trouble with getSymbols.csv
Message-ID: <5057923B.2090800@gmail.com>

Friends

I have a file of data:

"Date","Open","High","Low","Close","Volume","Adjusted"
"2011-12-28",1.5968,1.5987,1.5762,1.5827,0,1.58745
"2011-12-29",1.5831,1.5846,1.5695,1.5724,0,1.57705
"2011-12-30",1.5726,1.5877,1.5704,1.5861,0,1.57905
"2011-12-31",1.585,1.5861,1.585,1.5861,0,1.58555
"2012-01-01",1.585,1.5861,1.582,1.5861,0,1.58405
"2012-01-02",1.5871,1.5875,1.5768,1.5802,0,1.58215
"2012-01-03",1.58,1.5837,1.5726,1.5818,0,1.57815
"2012-01-04",1.5819,1.5865,1.5796,1.5813,0,1.58305
"2012-01-05",1.5812,1.5854,1.573,1.5795,0,1.5792
"2012-01-06",1.5796,1.5871,1.5745,1.5859,0,1.5808
"2012-01-07",1.5854,1.5854,1.5782,1.5782,0,1.5818
"2012-01-08",1.5808,1.5866,1.5808,1.5866,0,1.5837
"2012-01-09",1.5867,1.591,1.5807,1.5815,0,1.58585

When I use getSymbols(.., src="csv")

The dates are incorrect.  The first date is "2012-09-18"

It seems that in getSymbols.csv uses:

as.Date(fr[, 1], format = format, ..., origin = "1970-01-01")

Looking more closely...

 > as.Date("2011-12-28", origin="1970-01-01", format="")
[1] "2012-09-18"

That is what I see.

But either of...
 > as.Date("2011-12-28", origin="1970-01-01")
[1] "2011-12-28"
 > as.Date("2011-12-28")
[1] "2011-12-28"
 >

give me what I expect.

What am I doing wrong?

cheers
Worik

-- 
it does not matter                      I think that I shall never see
how much I dig and dig                    A billboard lovely as a tree
this hole just                      Indeed, unless the billboards fall
keeps getting deeper                      I'll never see a tree at all


From gsee000 at gmail.com  Tue Sep 18 00:26:30 2012
From: gsee000 at gmail.com (G See)
Date: Mon, 17 Sep 2012 17:26:30 -0500
Subject: [R-SIG-Finance] Trouble with getSymbols.csv
In-Reply-To: <5057923B.2090800@gmail.com>
References: <5057923B.2090800@gmail.com>
Message-ID: <CA+xi=qb6tZj7-WFV9E2kqVV+pLRjeFLQeJYKE1zdNATtZfuuPw@mail.gmail.com>

This function should really have more formal arguments -- especially
the format argument.

As it is, the `format` will be set to "".  You should be able to pass
`format` through the dots, but there's a syntax bug preventing that
from working (`list(...)[["format"]] <- NULL`).

As it is, the only way to load your data using getSymbols.csv is to
set the `format` argument in the Symbol Lookup table. (I saved the
text from your e-mail in a file at "~/tmp/worik.txt")

setSymbolLookup(worik=list(src='csv', format='%Y-%m-%d'))
getSymbols('worik', dir='~/tmp', auto.assign=FALSE, extension='txt')

           WORIK.Open WORIK.High WORIK.Low WORIK.Close WORIK.Volume
2011-12-28     1.5968     1.5987    1.5762      1.5827            0
2011-12-29     1.5831     1.5846    1.5695      1.5724            0
2011-12-30     1.5726     1.5877    1.5704      1.5861            0
2011-12-31     1.5850     1.5861    1.5850      1.5861            0
2012-01-01     1.5850     1.5861    1.5820      1.5861            0
2012-01-02     1.5871     1.5875    1.5768      1.5802            0
2012-01-03     1.5800     1.5837    1.5726      1.5818            0
2012-01-04     1.5819     1.5865    1.5796      1.5813            0
2012-01-05     1.5812     1.5854    1.5730      1.5795            0
2012-01-06     1.5796     1.5871    1.5745      1.5859            0
2012-01-07     1.5854     1.5854    1.5782      1.5782            0
2012-01-08     1.5808     1.5866    1.5808      1.5866            0
2012-01-09     1.5867     1.5910    1.5807      1.5815            0
           WORIK.Adjusted
2011-12-28        1.58745
2011-12-29        1.57705
2011-12-30        1.57905
2011-12-31        1.58555
2012-01-01        1.58405
2012-01-02        1.58215
2012-01-03        1.57815
2012-01-04        1.58305
2012-01-05        1.57920
2012-01-06        1.58080
2012-01-07        1.58180
2012-01-08        1.58370
2012-01-09        1.58585

HTH,
Garrett

On Mon, Sep 17, 2012 at 4:12 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
> Friends
>
> I have a file of data:
>
> "Date","Open","High","Low","Close","Volume","Adjusted"
> "2011-12-28",1.5968,1.5987,1.5762,1.5827,0,1.58745
> "2011-12-29",1.5831,1.5846,1.5695,1.5724,0,1.57705
> "2011-12-30",1.5726,1.5877,1.5704,1.5861,0,1.57905
> "2011-12-31",1.585,1.5861,1.585,1.5861,0,1.58555
> "2012-01-01",1.585,1.5861,1.582,1.5861,0,1.58405
> "2012-01-02",1.5871,1.5875,1.5768,1.5802,0,1.58215
> "2012-01-03",1.58,1.5837,1.5726,1.5818,0,1.57815
> "2012-01-04",1.5819,1.5865,1.5796,1.5813,0,1.58305
> "2012-01-05",1.5812,1.5854,1.573,1.5795,0,1.5792
> "2012-01-06",1.5796,1.5871,1.5745,1.5859,0,1.5808
> "2012-01-07",1.5854,1.5854,1.5782,1.5782,0,1.5818
> "2012-01-08",1.5808,1.5866,1.5808,1.5866,0,1.5837
> "2012-01-09",1.5867,1.591,1.5807,1.5815,0,1.58585
>
> When I use getSymbols(.., src="csv")
>
> The dates are incorrect.  The first date is "2012-09-18"
>
> It seems that in getSymbols.csv uses:
>
> as.Date(fr[, 1], format = format, ..., origin = "1970-01-01")
>
> Looking more closely...
>
>> as.Date("2011-12-28", origin="1970-01-01", format="")
> [1] "2012-09-18"
>
> That is what I see.
>
> But either of...
>> as.Date("2011-12-28", origin="1970-01-01")
> [1] "2011-12-28"
>> as.Date("2011-12-28")
> [1] "2011-12-28"
>>
>
> give me what I expect.
>
> What am I doing wrong?
>
> cheers
> Worik
>
> --
> it does not matter                      I think that I shall never see
> how much I dig and dig                    A billboard lovely as a tree
> this hole just                      Indeed, unless the billboards fall
> keeps getting deeper                      I'll never see a tree at all
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
> should go.


From worik.stanton at gmail.com  Tue Sep 18 06:09:28 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Tue, 18 Sep 2012 16:09:28 +1200
Subject: [R-SIG-Finance] Removing instruments...
Message-ID: <5057F3F8.3080503@gmail.com>

I have been playing with exchange_rate(..)

Having called, for example,

currency("CAD")
currency("AUD")
exchange_rate("AUDCAD", currency="CAD", counter_currency="AUD")

All good so far.

How do I delete the exchange_rate AUDCAD when I am done with it?

cheers
Worik

-- 
it does not matter                      I think that I shall never see
how much I dig and dig                    A billboard lovely as a tree
this hole just                      Indeed, unless the billboards fall
keeps getting deeper                      I'll never see a tree at all


From jaimie.villanueva at gmail.com  Tue Sep 18 12:55:20 2012
From: jaimie.villanueva at gmail.com (jaimie villanueva)
Date: Tue, 18 Sep 2012 12:55:20 +0200
Subject: [R-SIG-Finance] About Garch models
Message-ID: <CAEXmNQDCoKrU_LDZKP-X1fEc8cEBH9EuzzXJUQ9Aao+66RmHiQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120918/f4b2714e/attachment.pl>

From patrick at burns-stat.com  Tue Sep 18 13:14:46 2012
From: patrick at burns-stat.com (Patrick Burns)
Date: Tue, 18 Sep 2012 12:14:46 +0100
Subject: [R-SIG-Finance] About Garch models
In-Reply-To: <CAEXmNQDCoKrU_LDZKP-X1fEc8cEBH9EuzzXJUQ9Aao+66RmHiQ@mail.gmail.com>
References: <CAEXmNQDCoKrU_LDZKP-X1fEc8cEBH9EuzzXJUQ9Aao+66RmHiQ@mail.gmail.com>
Message-ID: <505857A6.5010008@burns-stat.com>

You should *not* believe the Ljung-Box
test.  For an explanation of why, see:

http://www.portfolioprobe.com/2012/07/06/a-practical-introduction-to-garch-modeling/

Pat


On 18/09/2012 11:55, jaimie villanueva wrote:
> Hi R users,
>
> I'm trying to fit an ARMA or GARCH or ARMA/GARCH model over a financial
> time series of daily Log returns.
> I've followed the same procedure as most texts are recommending in order to
> check whether an autocorrelation structure exist (either on residuals or
> squared residuals) or not. After run the Ljung-Box and LM ARCH test over
> squared residuals and I realise that NO autocorrelation structure exist, I
> supposed that, if i try to fit a GARCH model the fitting results would be
> quite useless.
>
> Instead of that, I've found that the fitting was pretty good.
>
> The question is: Should I go ahead with the GARCH model or Should i belive
> the Ljung-Box and LM ARCH test ?.
>
> Thanks in advance.
>
> Jaimie
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From gsee000 at gmail.com  Tue Sep 18 13:59:52 2012
From: gsee000 at gmail.com (G See)
Date: Tue, 18 Sep 2012 06:59:52 -0500
Subject: [R-SIG-Finance] Removing instruments...
In-Reply-To: <5057F3F8.3080503@gmail.com>
References: <5057F3F8.3080503@gmail.com>
Message-ID: <CA+xi=qbEDH8PCnvLS6g0gbQfgit_CzQrovRknBfKPkK1_E7TNg@mail.gmail.com>

Hi Worik,

Either of these will do it
    rm_exchange_rates("AUDCAD")
    rm_instruments("AUDCAD", keep.currencies=FALSE)

The reason rm_instruments has a keep.currencies argument is because I
was frustrated that currencies have to be defined before anything
else.  So, I made it a little more work to delete them.  exchange_rate
instruments get treated like currencies because they inherit the
'currency' class (although, personally, I don't think they should).

You could also backup your .instrument environment before
experimenting, then reload it.

You could either back it up by saving it via saveInstruments(), or,
simply convert it to a list and assign it to something.

    tmppdir <- tempdir()
    saveInstruments("test", dir=tmpdir)

    bak <- as.list(FinancialInstrument:::.instrument, all.names=TRUE)

Now, you can revert to a backed up version like this

    reloadInstruments('test', dir=tmpdir)

or

    reloadInstruments(bak)


reloadInstruments(bak) is equivalent to
    rm_instruments(keep=FALSE)
    loadInstruments(bak)

HTH,
Garrett

On Mon, Sep 17, 2012 at 11:09 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
> I have been playing with exchange_rate(..)
>
> Having called, for example,
>
> currency("CAD")
> currency("AUD")
> exchange_rate("AUDCAD", currency="CAD", counter_currency="AUD")
>
> All good so far.
>
> How do I delete the exchange_rate AUDCAD when I am done with it?
>
> cheers
> Worik
>
> --
> it does not matter                      I think that I shall never see
> how much I dig and dig                    A billboard lovely as a tree
> this hole just                      Indeed, unless the billboards fall
> keeps getting deeper                      I'll never see a tree at all
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From patrick at burns-stat.com  Tue Sep 18 17:52:08 2012
From: patrick at burns-stat.com (Patrick Burns)
Date: Tue, 18 Sep 2012 16:52:08 +0100
Subject: [R-SIG-Finance] About Garch models
In-Reply-To: <CAEXmNQDwnf=bN7UxFHhNLKuDvC0nTKcv+sQwxBd1o-zwuYOCQw@mail.gmail.com>
References: <CAEXmNQDCoKrU_LDZKP-X1fEc8cEBH9EuzzXJUQ9Aao+66RmHiQ@mail.gmail.com>
	<505857A6.5010008@burns-stat.com>
	<CAEXmNQDwnf=bN7UxFHhNLKuDvC0nTKcv+sQwxBd1o-zwuYOCQw@mail.gmail.com>
Message-ID: <505898A8.6090904@burns-stat.com>

Jaime,

I'm not a big fan of testing, especially
this form of testing.  My prior is that all
market data experience volatility clustering.

The question is more whether the heteroscedasticity
has an affect on what you are trying to do with
the results of your model.

But to answer your question:  You should never
believe a Ljung-Box test on squared residuals
no matter what the p-value.  The reason is because
the Ljung-Box test (which is really robust) is
not robust enough when used on the squares of a
long-tailed distribution.  The outliers can mess
with the p-value as they wish.

You can trust Ljung-Box tests on the ranks of
squared residuals.

I don't know enough about other tests of autocorrelation
to comment.  But if they don't agree with a rank Ljung-Box
test, then I'd be suspicious.

Pat


On 18/09/2012 12:52, jaimie villanueva wrote:
>
> OK Patrick, Thanks.
>
> I'm not sure if I've understood this sentence:
>
> ".If you are used to looking at p-values from goodness of fit tests, you
> might notice something strange.  The p-values are suspiciously close to
> 1.  The tests are saying that we have overfit 1547 observations with 4
> parameters.  That is 1547 really noisy observations.  I don?t think so.
> A better explanation is that the test is not robust to this extreme
> data, even though the test is very robust.  It is probably
> counter-productive to test the squared residuals.  An informative test
> is on the ranks of the squared standardized residuals."
>
> it is exactly what is happening to me. p-values close to 1.
>
> What does the sentence mean:
>
> - Whenever Ljung -Box  p-values close to 1 , never belive it.? or
> - Should I run other type of autocorrelation test?
>
> best
>
> Jaimie
>
> 2012/9/18 Patrick Burns <patrick at burns-stat.com
> <mailto:patrick at burns-stat.com>>
>
>     You should *not* believe the Ljung-Box
>     test.  For an explanation of why, see:
>
>     http://www.portfolioprobe.com/__2012/07/06/a-practical-__introduction-to-garch-__modeling/
>     <http://www.portfolioprobe.com/2012/07/06/a-practical-introduction-to-garch-modeling/>
>
>     Pat
>
>
>
>     On 18/09/2012 11:55, jaimie villanueva wrote:
>
>         Hi R users,
>
>         I'm trying to fit an ARMA or GARCH or ARMA/GARCH model over a
>         financial
>         time series of daily Log returns.
>         I've followed the same procedure as most texts are recommending
>         in order to
>         check whether an autocorrelation structure exist (either on
>         residuals or
>         squared residuals) or not. After run the Ljung-Box and LM ARCH
>         test over
>         squared residuals and I realise that NO autocorrelation
>         structure exist, I
>         supposed that, if i try to fit a GARCH model the fitting results
>         would be
>         quite useless.
>
>         Instead of that, I've found that the fitting was pretty good.
>
>         The question is: Should I go ahead with the GARCH model or
>         Should i belive
>         the Ljung-Box and LM ARCH test ?.
>
>         Thanks in advance.
>
>         Jaimie
>
>                  [[alternative HTML version deleted]]
>
>         _________________________________________________
>         R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
>         mailing list
>         https://stat.ethz.ch/mailman/__listinfo/r-sig-finance
>         <https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
>         -- Subscriber-posting only. If you want to post, subscribe first.
>         -- Also note that this is not the r-help list where general R
>         questions should go.
>
>
>     --
>     Patrick Burns
>     patrick at burns-stat.com <mailto:patrick at burns-stat.com>
>     http://www.burns-stat.com
>     http://www.portfolioprobe.com/__blog
>     <http://www.portfolioprobe.com/blog>
>     twitter: @portfolioprobe
>
>

-- 
Patrick Burns
patrick at burns-stat.com
http://www.burns-stat.com
http://www.portfolioprobe.com/blog
twitter: @portfolioprobe


From snes1982 at hotmail.com  Tue Sep 18 17:57:22 2012
From: snes1982 at hotmail.com (Serdar Neslihanoglu)
Date: Tue, 18 Sep 2012 18:57:22 +0300
Subject: [R-SIG-Finance] rugarch package "Warning Message" for GARCH-Normal
Message-ID: <SNT125-W360A2FA6E260577A8B93ECC6940@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120918/ea686f96/attachment.pl>

From alexios at 4dscape.com  Tue Sep 18 18:12:51 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Tue, 18 Sep 2012 17:12:51 +0100
Subject: [R-SIG-Finance] rugarch package "Warning Message" for
	GARCH-Normal
In-Reply-To: <SNT125-W360A2FA6E260577A8B93ECC6940@phx.gbl>
References: <SNT125-W360A2FA6E260577A8B93ECC6940@phx.gbl>
Message-ID: <50589D83.2040305@4dscape.com>

The documentation and vignette FAQs list a couple of options (please 
read them). In order of likely importance:
1. Set  tol<delta (in solver.control).
2. Use scaling (in fit.control).
3. Set stationarity to FALSE (sometimes this creates problems with the 
solver for some boundary cases).
4. Use an alternate solver(s) (there are many now included).
5. Change the default solver parameters.
6. Use starting values.
7. Check your data for extreme outliers or numbers of zeros.

In the next release I will provide a hybrid solver optimization strategy 
to rotate among the available solvers when this happens.

-Alexios

On 18/09/2012 16:57, Serdar Neslihanoglu wrote:
>
> My code: spec<-ugarchspec(variance.model = list(model = "sGARCH", garchOrder = c(1, 1),
submodel = "Null", external.regressors = NULL, variance.targeting = FALSE),
mean.model = list(armaOrder=c(0,0),include.mean =FALSE, archm = FALSE, 
archpow = 1,
arfima = FALSE, external.regressors = NULL, archex = FALSE), 
distribution.model = "norm",
start.pars = list(), fixed.pars = list())

ugarchfit(spec, X2, out.sample = 0, solver = "solnp", solver.control = 
list(trace = TRUE, tol=1e-4, delta=1e-8),
fit.control = list(stationarity = 1, fixed.se = 0, scale=0))

I got this error massage In .makefitmodel(garchmodel = "sGARCH", f = 
.sgarchLLH,  ... :
rugarch-->warning: failed to invert hessian I think rugarch is not 
converge the result properly.

Please let me know how to deal with this problem. Regards, Serdar 		 	   		
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


From alexios at 4dscape.com  Wed Sep 19 00:40:39 2012
From: alexios at 4dscape.com (alexios ghalanos)
Date: Tue, 18 Sep 2012 23:40:39 +0100
Subject: [R-SIG-Finance] About Garch models
In-Reply-To: <505898A8.6090904@burns-stat.com>
References: <CAEXmNQDCoKrU_LDZKP-X1fEc8cEBH9EuzzXJUQ9Aao+66RmHiQ@mail.gmail.com>
	<505857A6.5010008@burns-stat.com>
	<CAEXmNQDwnf=bN7UxFHhNLKuDvC0nTKcv+sQwxBd1o-zwuYOCQw@mail.gmail.com>
	<505898A8.6090904@burns-stat.com>
Message-ID: <5058F867.8030501@4dscape.com>

Jaimie,

In my experience, the ARCH-LM test is pretty solid for detecting ARCH 
effects in reasonably sized datasets. If you are feeling up to doing 
some reading (see the rugarch vignette), a class of misspecification 
tests can also be used. They test the i.i.d. assumption of the 
standardized data i.e. how well the model has captured the conditional 
moments present in the dataset (this are ex-post tests on the full 
density while the ARCH-LM is an ex-ante test on the conditional 
variance). Here's an example:

library(rugarch)
data(dji30ret)
# 'Fit' an unconditional distribution to the dataset ignoring
# any dynamics (or just take the mean and variance for the normal):

fit1= rugarch::fitdist(distribution = "norm",x = dji30ret[,1])
# Convert to Uniform by the cdf transformation (Probability Integral
# Transformation) which is used by the HLTest function:

PIT1 = pnorm(dji30ret[,1]-fit1$pars[1])/fit1$pars[2])

# Fit a GARCH model to take into account ARCH effects
fit2 = ugarchfit(ugarchspec(), dji30ret[,1])
# get PIT:
PIT2 = pnorm(fit2 at fit$z)

# Hong-Li non parametric density test:

HLTest(PIT1, lags = 4, conf.level = 0.9 )
HLTest(PIT2, lags = 4, conf.level = 0.9 )


# Observe that the individual moment statistics are rejected for the
# unconditional model. While the joint statistic is rejected in both
# cases, the value of the statistic is much closer to the acceptance
# region in the GARCH case.

# GMM orthogonality test:

GMMTest((dji30ret[,1]-fit1$pars[1])/fit1$pars[2], kurt = 3)
GMMTest(fit2 at fit$z, kurt = 3)

The help pages on these tests list the published papers which they are 
based on, and the vignette briefly describes them.

Regards,

Alexios


On 18/09/2012 16:52, Patrick Burns wrote:
> Jaime,
>
> I'm not a big fan of testing, especially
> this form of testing.  My prior is that all
> market data experience volatility clustering.
>
> The question is more whether the heteroscedasticity
> has an affect on what you are trying to do with
> the results of your model.
>
> But to answer your question:  You should never
> believe a Ljung-Box test on squared residuals
> no matter what the p-value.  The reason is because
> the Ljung-Box test (which is really robust) is
> not robust enough when used on the squares of a
> long-tailed distribution.  The outliers can mess
> with the p-value as they wish.
>
> You can trust Ljung-Box tests on the ranks of
> squared residuals.
>
> I don't know enough about other tests of autocorrelation
> to comment.  But if they don't agree with a rank Ljung-Box
> test, then I'd be suspicious.
>
> Pat
>
>
> On 18/09/2012 12:52, jaimie villanueva wrote:
>>
>> OK Patrick, Thanks.
>>
>> I'm not sure if I've understood this sentence:
>>
>> ".If you are used to looking at p-values from goodness of fit tests, you
>> might notice something strange.  The p-values are suspiciously close to
>> 1.  The tests are saying that we have overfit 1547 observations with 4
>> parameters.  That is 1547 really noisy observations.  I don?t think so.
>> A better explanation is that the test is not robust to this extreme
>> data, even though the test is very robust.  It is probably
>> counter-productive to test the squared residuals.  An informative test
>> is on the ranks of the squared standardized residuals."
>>
>> it is exactly what is happening to me. p-values close to 1.
>>
>> What does the sentence mean:
>>
>> - Whenever Ljung -Box  p-values close to 1 , never belive it.? or
>> - Should I run other type of autocorrelation test?
>>
>> best
>>
>> Jaimie
>>
>> 2012/9/18 Patrick Burns <patrick at burns-stat.com
>> <mailto:patrick at burns-stat.com>>
>>
>>     You should *not* believe the Ljung-Box
>>     test.  For an explanation of why, see:
>>
>>
>> http://www.portfolioprobe.com/__2012/07/06/a-practical-__introduction-to-garch-__modeling/
>>
>>
>> <http://www.portfolioprobe.com/2012/07/06/a-practical-introduction-to-garch-modeling/>
>>
>>
>>     Pat
>>
>>
>>
>>     On 18/09/2012 11:55, jaimie villanueva wrote:
>>
>>         Hi R users,
>>
>>         I'm trying to fit an ARMA or GARCH or ARMA/GARCH model over a
>>         financial
>>         time series of daily Log returns.
>>         I've followed the same procedure as most texts are recommending
>>         in order to
>>         check whether an autocorrelation structure exist (either on
>>         residuals or
>>         squared residuals) or not. After run the Ljung-Box and LM ARCH
>>         test over
>>         squared residuals and I realise that NO autocorrelation
>>         structure exist, I
>>         supposed that, if i try to fit a GARCH model the fitting results
>>         would be
>>         quite useless.
>>
>>         Instead of that, I've found that the fitting was pretty good.
>>
>>         The question is: Should I go ahead with the GARCH model or
>>         Should i belive
>>         the Ljung-Box and LM ARCH test ?.
>>
>>         Thanks in advance.
>>
>>         Jaimie
>>
>>                  [[alternative HTML version deleted]]
>>
>>         _________________________________________________
>>         R-SIG-Finance at r-project.org <mailto:R-SIG-Finance at r-project.org>
>>         mailing list
>>         https://stat.ethz.ch/mailman/__listinfo/r-sig-finance
>>         <https://stat.ethz.ch/mailman/listinfo/r-sig-finance>
>>         -- Subscriber-posting only. If you want to post, subscribe first.
>>         -- Also note that this is not the r-help list where general R
>>         questions should go.
>>
>>
>>     --
>>     Patrick Burns
>>     patrick at burns-stat.com <mailto:patrick at burns-stat.com>
>>     http://www.burns-stat.com
>>     http://www.portfolioprobe.com/__blog
>>     <http://www.portfolioprobe.com/blog>
>>     twitter: @portfolioprobe
>>
>>
>


From student.northwestern at gmail.com  Wed Sep 19 02:25:50 2012
From: student.northwestern at gmail.com (Jim Green)
Date: Wed, 19 Sep 2012 00:25:50 +0000
Subject: [R-SIG-Finance] adjustOHLC discrepancy
Message-ID: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>

Dear List:

I expect that use.Adjusted=TRUE or FALSE wouldn't affect the adjusted
close.  But running the following code proved I was wrong.

> getSymbols('C',src='yahoo')
[1] "C"
> head(adjustOHLC(C))
             C.Open   C.High    C.Low  C.Close C.Volume C.Adjusted
2007-01-03 190.8698 192.9960 187.6464 189.4639  2282100     498.66
2007-01-04 189.4639 192.5502 187.6464 188.8123  1658700     496.94
2007-01-05 188.6066 188.7780 186.7548 187.8179  1317900     494.32
2007-01-08 187.2349 189.1210 186.2061 188.7780  1236900     496.85
2007-01-09 188.6409 189.1210 185.8289 187.1320  1963000     492.52
2007-01-10 186.1032 186.8577 185.0059 185.6232  1744900     488.55
> head(adjustOHLC(C,use.Adjusted=TRUE))
             C.Open   C.High    C.Low C.Close C.Volume C.Adjusted
2007-01-03 502.3605 507.9563 493.8765  498.66  2282100     498.66
2007-01-04 498.6548 506.7777 493.8714  496.94  1658700     496.94
2007-01-05 496.3958 496.8471 491.5221  494.32  1317900     494.32
2007-01-08 492.7886 497.7525 490.0809  496.85  1236900     496.85
2007-01-09 496.4912 497.7548 489.0903  492.52  1963000     492.52
2007-01-10 489.8136 491.7992 486.9254  488.55  1744900     488.55

by using adjustOHLC, the C.close value is not the same as C.Adjusted
provided directly by yahoo.
             C.Open   C.High    C.Low  C.Close C.Volume C.Adjusted
2007-01-03 190.8698 192.9960 187.6464 189.4639  2282100     498.66

I think adjustOHLC and adjRatios are theoretically correct and  I
wonder where this discrepancy comes from. Is it possible Yahoo uses a
different method to calculate its adjusted close.

Which adjusted close would everyone recommend? the raw close adjusted
by adjustOHLC or the adjusted close provided by yahoo?

Thanks!
Jim.


From josh.m.ulrich at gmail.com  Wed Sep 19 05:54:17 2012
From: josh.m.ulrich at gmail.com (Joshua Ulrich)
Date: Tue, 18 Sep 2012 22:54:17 -0500
Subject: [R-SIG-Finance] adjustOHLC discrepancy
In-Reply-To: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>
References: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>
Message-ID: <CAPPM_gRdcoA4sqOXMyC+B=dbpkFP_FTQ=zO_=H-PG9hOR0CYpg@mail.gmail.com>

On Tue, Sep 18, 2012 at 7:25 PM, Jim Green
<student.northwestern at gmail.com> wrote:
> Dear List:
>
> I expect that use.Adjusted=TRUE or FALSE wouldn't affect the adjusted
> close.  But running the following code proved I was wrong.
>
>> getSymbols('C',src='yahoo')
> [1] "C"
>> head(adjustOHLC(C))
>              C.Open   C.High    C.Low  C.Close C.Volume C.Adjusted
> 2007-01-03 190.8698 192.9960 187.6464 189.4639  2282100     498.66
> 2007-01-04 189.4639 192.5502 187.6464 188.8123  1658700     496.94
> 2007-01-05 188.6066 188.7780 186.7548 187.8179  1317900     494.32
> 2007-01-08 187.2349 189.1210 186.2061 188.7780  1236900     496.85
> 2007-01-09 188.6409 189.1210 185.8289 187.1320  1963000     492.52
> 2007-01-10 186.1032 186.8577 185.0059 185.6232  1744900     488.55
>> head(adjustOHLC(C,use.Adjusted=TRUE))
>              C.Open   C.High    C.Low C.Close C.Volume C.Adjusted
> 2007-01-03 502.3605 507.9563 493.8765  498.66  2282100     498.66
> 2007-01-04 498.6548 506.7777 493.8714  496.94  1658700     496.94
> 2007-01-05 496.3958 496.8471 491.5221  494.32  1317900     494.32
> 2007-01-08 492.7886 497.7525 490.0809  496.85  1236900     496.85
> 2007-01-09 496.4912 497.7548 489.0903  492.52  1963000     492.52
> 2007-01-10 489.8136 491.7992 486.9254  488.55  1744900     488.55
>
> by using adjustOHLC, the C.close value is not the same as C.Adjusted
> provided directly by yahoo.
>              C.Open   C.High    C.Low  C.Close C.Volume C.Adjusted
> 2007-01-03 190.8698 192.9960 187.6464 189.4639  2282100     498.66
>
The adjusted close values from adjustOHLC will rarely ever be the same
as the adjusted close values provided by Yahoo.  I'm not sure I ever
figured out exactly how Yahoo calculates the adjusted close, but the
method used by adjustOHLC is simple and transparent (i.e. OSS).

> I think adjustOHLC and adjRatios are theoretically correct and  I
> wonder where this discrepancy comes from. Is it possible Yahoo uses a
> different method to calculate its adjusted close.
>
It's likely precision and/or an error in Yahoo's data.  A $0.10
dividend was ex-dividend on 2009-01-29 (the first big difference),
when C was trading ~$4.  The simple return of the raw (adjusted) close
prices between the 1/28 and 1/29 is -0.0736342 (-0.07132634).  The
adjusted close should reverse the ~2.5% drop in price due to the
dividend payment, but they're nearly identical (especially given 2
decimal precision).

Keep in mind that adjustOHLC with use.Adjusted=FALSE simply pulls
split and dividend data from Yahoo and re-computes the adjustment
ratios.  So if Yahoo's split and/or dividend data are incorrect, the
results of adjustOHLC will be incorrect too.

That said, something looks very odd with the results of adjustOHLC:
getSymbols('C',from='1900-01-01')
citi <- adjustOHLC(C)
chart_Series(citi)

> Which adjusted close would everyone recommend? the raw close adjusted
> by adjustOHLC or the adjusted close provided by yahoo?
>
> Thanks!
> Jim.
>

I hope that helps a bit, though I realize I probably created more
questions for you than I answered.

Best,
--
Joshua Ulrich  |  about.me/joshuaulrich
FOSS Trading  |  www.fosstrading.com


From student.northwestern at gmail.com  Wed Sep 19 06:00:54 2012
From: student.northwestern at gmail.com (Jim Green)
Date: Wed, 19 Sep 2012 04:00:54 +0000
Subject: [R-SIG-Finance] adjustOHLC discrepancy
In-Reply-To: <CAPPM_gRdcoA4sqOXMyC+B=dbpkFP_FTQ=zO_=H-PG9hOR0CYpg@mail.gmail.com>
References: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>
	<CAPPM_gRdcoA4sqOXMyC+B=dbpkFP_FTQ=zO_=H-PG9hOR0CYpg@mail.gmail.com>
Message-ID: <CACAe89wJoQ5jwJdS54K_CSsVO8ubk27hu1Wav1O1KNtoP3NjFA@mail.gmail.com>

On 19 September 2012 03:54, Joshua Ulrich <josh.m.ulrich at gmail.com> wrote:
> I hope that helps a bit, though I realize I probably created more
> questions for you than I answered.

Thanks Josh. I'll dig a little more with your clues and post back if I
find anything.

Jim.


From student.northwestern at gmail.com  Thu Sep 20 00:23:25 2012
From: student.northwestern at gmail.com (Jim Green)
Date: Wed, 19 Sep 2012 22:23:25 +0000
Subject: [R-SIG-Finance] adjustOHLC discrepancy
In-Reply-To: <CACAe89wJoQ5jwJdS54K_CSsVO8ubk27hu1Wav1O1KNtoP3NjFA@mail.gmail.com>
References: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>
	<CAPPM_gRdcoA4sqOXMyC+B=dbpkFP_FTQ=zO_=H-PG9hOR0CYpg@mail.gmail.com>
	<CACAe89wJoQ5jwJdS54K_CSsVO8ubk27hu1Wav1O1KNtoP3NjFA@mail.gmail.com>
Message-ID: <CACAe89wcX=P9j8AVtH--ZA-unVtD2HNZg=Lx+Y6Y4dHmsLxOBw@mail.gmail.com>

On 19 September 2012 04:00, Jim Green <student.northwestern at gmail.com> wrote:
> Thanks Josh. I'll dig a little more with your clues and post back if I
> find anything.

Checked Bloomberg, many of the cacs from are wrong before 2009... some
even don't make sense..

Nasdaq, on the other hand, seems to have correct historical dividend data

http://www.nasdaq.com/symbol/c/dividend-history

adjusted close provided by yahoo seems reasonable. but need more time to test.


Thanks to Josh again for looking into the issue!  Hope this post
answers some potential questions regarding adjustOHLC.

>
> Jim.


From sf99167 at yahoo.com  Thu Sep 20 17:39:49 2012
From: sf99167 at yahoo.com (sean fallon)
Date: Thu, 20 Sep 2012 08:39:49 -0700 (PDT)
Subject: [R-SIG-Finance] ABS value calculation for ATR use
In-Reply-To: <CACAe89wcX=P9j8AVtH--ZA-unVtD2HNZg=Lx+Y6Y4dHmsLxOBw@mail.gmail.com>
References: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>
	<CAPPM_gRdcoA4sqOXMyC+B=dbpkFP_FTQ=zO_=H-PG9hOR0CYpg@mail.gmail.com>
	<CACAe89wJoQ5jwJdS54K_CSsVO8ubk27hu1Wav1O1KNtoP3NjFA@mail.gmail.com>
	<CACAe89wcX=P9j8AVtH--ZA-unVtD2HNZg=Lx+Y6Y4dHmsLxOBw@mail.gmail.com>
Message-ID: <1348155589.3190.YahooMailNeo@web163806.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120920/1fc6b9e2/attachment.pl>

From zach.mayer at gmail.com  Thu Sep 20 17:47:51 2012
From: zach.mayer at gmail.com (Zachary Mayer)
Date: Thu, 20 Sep 2012 11:47:51 -0400
Subject: [R-SIG-Finance] ABS value calculation for ATR use
In-Reply-To: <1348155589.3190.YahooMailNeo@web163806.mail.gq1.yahoo.com>
References: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>
	<CAPPM_gRdcoA4sqOXMyC+B=dbpkFP_FTQ=zO_=H-PG9hOR0CYpg@mail.gmail.com>
	<CACAe89wJoQ5jwJdS54K_CSsVO8ubk27hu1Wav1O1KNtoP3NjFA@mail.gmail.com>
	<CACAe89wcX=P9j8AVtH--ZA-unVtD2HNZg=Lx+Y6Y4dHmsLxOBw@mail.gmail.com>
	<1348155589.3190.YahooMailNeo@web163806.mail.gq1.yahoo.com>
Message-ID: <CAEr64e8x4fzaTiYrm7ueApOuhsn9e0Kk-yXhujWePG3E8TKjxA@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120920/ab10f7cc/attachment.pl>

From david.jessop at ubs.com  Thu Sep 20 17:52:35 2012
From: david.jessop at ubs.com (david.jessop at ubs.com)
Date: Thu, 20 Sep 2012 16:52:35 +0100
Subject: [R-SIG-Finance] UBS looking for a quantitative analyst
Message-ID: <25492B412B325B4FB1FED95013D3E5CE0EF8D464@NLDNC105PEX1.ubsw.net>

Hi

We are looking for an econometrics researcher to join the UBS Quantitative Research team in London.  The details are below.  If you're interested then please send me a CV.  

Regards

David Jessop

---------------------------------------------

UBS Equities Quantitative Research is a leading sell side quant research team which provides services to the clients of UBS in terms of all areas of quantitative research. It specialises in producing academic standard, but practical, research primarily in the areas of risk analysis, portfolio construction and the investment process.

The team is searching for a research analyst to join the team primarily working on producing written research and presenting this to the team's clients. The analyst would also be involved in carrying out analysis answering requests from clients. The successful candidate would be part of a very strong research team with the consequent opportunity to learn about all areas of the team's work. 
Requirements
- Econometric degree, ideally a PhD. 
- Knowledge of equity data a benefit
- Experience with R or similar programming environment would be useful but not necessary
- Carry out research without detailed supervision

We can offer...
?	UBS is a forward-thinking, ideas-driven organization; meritocracy, ambition, performance and learning define the culture of the firm
?	It is a diverse organization, where differences of background and perspective are recognized as strengths, and the individual differences and unique contribution of each person are valued and leveraged
?	By nurturing a climate in which these qualities can flourish, UBS recognizes that we will continue to build a winning team of talented individuals


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120920/f0139bd1/attachment.html>
-------------- next part --------------

Issued by UBS AG or affiliates to professional investors for 
information only and its accuracy/completeness is not guaranteed.
All opinions may change without notice and may differ to 
opinions/recommendations expressed by other business areas of UBS.
UBS may maintain long/short positions and trade in instruments 
referred to. Unless stated otherwise, this is not a personal 
recommendation, offer or solicitation to buy/sell and any 
prices/quotations are indicative only. UBS may provide investment 
banking and other services to, and/or its employees may be directors
of, companies referred to. To the extent permitted by law, UBS does 
not accept any liability arising from the use of this communication.

? UBS 2012.  All rights reserved. Intended for recipient only  and 
enot for further distribution without the consent of UBS.

UBS Limited is a company registered in England & Wales under company 
number 2035362, whose registered office is at 1 Finsbury Avenue, 
London, EC2M 2PP, United Kingdom.

UBS AG (London Branch) is registered as a branch of a foreign 
company under number BR004507, whose registered office is at
1 Finsbury Avenue, London, EC2M 2PP, United Kingdom.

UBS Clearing and Execution Services Limited is a company registered
in England & Wales under company number 03123037, whose registered 
office is at 1 Finsbury Avenue, London, EC2M 2PP, United Kingdom.

UBS reserves the right to retain all messages. Messages are protected
and accessed only in legally justified cases.

From jeff.a.ryan at gmail.com  Thu Sep 20 18:23:55 2012
From: jeff.a.ryan at gmail.com (Jeff Ryan)
Date: Thu, 20 Sep 2012 11:23:55 -0500
Subject: [R-SIG-Finance] ABS value calculation for ATR use
In-Reply-To: <CAEr64e8x4fzaTiYrm7ueApOuhsn9e0Kk-yXhujWePG3E8TKjxA@mail.gmail.com>
References: <CACAe89zcfG5fJSnjtvLGESLUpRT8iQpW_f=g0hGecNeOKTFrDw@mail.gmail.com>
	<CAPPM_gRdcoA4sqOXMyC+B=dbpkFP_FTQ=zO_=H-PG9hOR0CYpg@mail.gmail.com>
	<CACAe89wJoQ5jwJdS54K_CSsVO8ubk27hu1Wav1O1KNtoP3NjFA@mail.gmail.com>
	<CACAe89wcX=P9j8AVtH--ZA-unVtD2HNZg=Lx+Y6Y4dHmsLxOBw@mail.gmail.com>
	<1348155589.3190.YahooMailNeo@web163806.mail.gq1.yahoo.com>
	<CAEr64e8x4fzaTiYrm7ueApOuhsn9e0Kk-yXhujWePG3E8TKjxA@mail.gmail.com>
Message-ID: <CABDUZc-PMJ=vVsXAvQkBuDDeA+16e_Tkz9Ayc7_vM7YRnK9wyA@mail.gmail.com>

Seconded.

> library(quantmod) # requires TTR
> getSymbols("INFY.BO")
[1] "INFY.BO"
> head(ATR(INFY.BO))
              tr atr trueHigh trueLow
2007-01-02    NA  NA       NA      NA
2007-01-03 43.95  NA     2280 2236.05
2007-01-04 43.90  NA     2320 2276.10
2007-01-05 15.00  NA     2290 2275.00
2007-01-08 19.50  NA     2280 2260.50
2007-01-09 16.70  NA     2208 2191.30

HTH
Jeff


On Thu, Sep 20, 2012 at 10:47 AM, Zachary Mayer <zach.mayer at gmail.com> wrote:
> Why not use the ATR indicator in the TTR package?
>
> On Thu, Sep 20, 2012 at 11:39 AM, sean fallon <sf99167 at yahoo.com> wrote:
>
>> I am trying to calculate the Absolute value to append in file so I can
>> build ATR indicator. I am stuck at the first part wherein I am trying to
>> calculate the ABS for High - Close Price. However when I run the
>> "head(data)" to see what the results are, the AbsHC shows me the same
>> number i.e. 61.2, whether I put the "data$AbsHC=abs(x)" inside the for loop
>> or outside. I am only trying it for the first 10 rows of data. Enclosed
>> below is the code
>>
>> #Get data fro Yahoo finance for Infosys (INFY.BO)
>> data <- read.csv("
>> http://ichart.finance.yahoo.com/table.csv?s=INFY.BO&a=08&b=16&c=2008&d=08&e=20&f=2012&g=d&ignore=.csv",
>> stringsAsFactors=F)
>>
>> #view data
>> head(data)
>>
>> #compute high-close
>> h=data[,3]
>> c=data[,4]
>> hcdif=h-c
>> data$HminusC=hcdif
>>
>> #check data
>> data[30:40,]
>>
>> #compute absolute value
>> j=2
>> for (i in 1:10)
>> {
>>    ab1= data[i,5]
>>    ab2= data[j,3]
>>    x=ab1-ab2
>>    #data$AbsHC=abs(x), I have commented this as I have out it outside the
>> loop.
>>    j = j+1
>> }
>>
>> data$AbsHC=abs(x)
>> head(data)
>>
>> What am I doing wrong here???
>>
>> regards
>>
>> Sean
>>         [[alternative HTML version deleted]]
>>
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions
>> should go.
>>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.



-- 
Jeffrey Ryan
jeffrey.ryan at lemnica.com

www.lemnica.com


From worik.stanton at gmail.com  Fri Sep 21 04:10:46 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Fri, 21 Sep 2012 14:10:46 +1200
Subject: [R-SIG-Finance] Problem with updatePortf
Message-ID: <505BCCA6.1030607@gmail.com>

Friends

I am running into trouble with updatePortf.

Stepping through it the problem is with the call to .updatePosPL, but I
cannot debug that function.

I am working on a small example that exhibits the problem but in the
mean time is there a way I can debug .updatePosPL?

cheers
Worik

-- 
it does not matter                      I think that I shall never see
how much I dig and dig                    A billboard lovely as a tree
this hole just                      Indeed, unless the billboards fall
keeps getting deeper                      I'll never see a tree at all


From gsee000 at gmail.com  Fri Sep 21 04:23:13 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 20 Sep 2012 21:23:13 -0500
Subject: [R-SIG-Finance] Problem with updatePortf
In-Reply-To: <505BCCA6.1030607@gmail.com>
References: <505BCCA6.1030607@gmail.com>
Message-ID: <CA+xi=qamaW55GWTL-ADicJLV9w_Nb01G5JVYPLrTZaY5BEnkZA@mail.gmail.com>

If by "cannot debug that function" you mean you can't find the source
code, you can view the code with

    blotter:::.updatePosPL
or
    getAnywhere(".updatePosPL")

Or, your can checkout the code with svn to see a commented copy.

   svn checkout svn://svn.r-forge.r-project.org/svnroot/blotter/

and browse to the file pkg/blotter/R/updatePosPL.R

Or, you can view it online at
https://r-forge.r-project.org/scm/viewvc.php/*checkout*/pkg/blotter/R/updatePosPL.R?root=blotter

HTH,
Garrett

On Thu, Sep 20, 2012 at 9:10 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
> Friends
>
> I am running into trouble with updatePortf.
>
> Stepping through it the problem is with the call to .updatePosPL, but I
> cannot debug that function.
>
> I am working on a small example that exhibits the problem but in the
> mean time is there a way I can debug .updatePosPL?
>
> cheers
> Worik
>
> --
> it does not matter                      I think that I shall never see
> how much I dig and dig                    A billboard lovely as a tree
> this hole just                      Indeed, unless the billboards fall
> keeps getting deeper                      I'll never see a tree at all
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From worik.stanton at gmail.com  Fri Sep 21 04:30:05 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Fri, 21 Sep 2012 14:30:05 +1200
Subject: [R-SIG-Finance] Problem with updatePortf
In-Reply-To: <505BCCA6.1030607@gmail.com>
References: <505BCCA6.1030607@gmail.com>
Message-ID: <505BD12D.5060802@gmail.com>

On 21/09/12 14:10, Worik Stanton wrote:
> [snip]
> I am working on a small example that exhibits the problem but in the
> mean time is there a way I can debug .updatePosPL?

So here is an example without transactions.

I am a novice with blotter so tis example could probably be smaller.  I
have tried to distill what are the most important points (hence no
transactions).

When I run this I get...

> go()
2005-09-01
FOO
Error in getPrice(get(Symbol, pos = env), symbol = symbol, prefer =
prefer) :
  subscript out of bounds, no price was discernible from the data
>



require(quantmod)
require(TTR)
require(blotter)

go <- function(){

  suppressWarnings(try(rm("account.turtles","portfolio.turtles",
                          pos=.blotter),silent=TRUE))

  suppressWarnings(try(rm("portfolio","account","N","symbol",
                          "symbols","ClosePrice",
                          "CurrentDate","equity","Units",
                          "maxUnits","size","Stop",
                          "equity","TxnPrice","initDate",
                          "initEq","Posn","verbose"),silent=TRUE)
                   )

  currency("USD")
  currency("CHF")
  exchange_rate("USDCHF", "CHF", "USD", 0.00001)

  ## Load all the symbols into memory

  USDCHF <- xts(matrix(ncol=3,c(1.2558, 1.2368, 1.2344, 1.2404,
                         1.2444, 1.2470, 1.2470, 1.2597, 1.2640,
                         1.2613, 1.2696, 1.2729, 1.2815, 1.2818,
                         1.2825, 1.2809, 1.2918, 1.2965, 1.2998,
                         1.2984, 1.2311, 1.2250, 1.2239, 1.2317,
                         1.2309, 1.2385, 1.2385, 1.2430, 1.2542,
                         1.2543, 1.2574, 1.2598, 1.2734, 1.2745,
                         1.2680, 1.2660, 1.2777, 1.2885, 1.2883,
                         1.2910, 1.2343, 1.2280, 1.2335, 1.2365,
                         1.2426, 1.2449, 1.2442, 1.2592, 1.2619,
                         1.2585, 1.2671, 1.2687, 1.2772, 1.2809,
                         1.2718, 1.2795, 1.2916, 1.2896, 1.2959,
                         1.2940)), as.Date(c("2005-09-01",
                         "2005-09-02", "2005-09-05", "2005-09-06",
                         "2005-09-07", "2005-09-08", "2005-09-09",
                         "2005-09-12", "2005-09-13", "2005-09-14",
                         "2005-09-15", "2005-09-16", "2005-09-19",
                         "2005-09-20", "2005-09-21", "2005-09-22",
                         "2005-09-23", "2005-09-26", "2005-09-27",
                         "2005-09-28")))

  ## Set initial values
  initDate=start(USDCHF)
  initEq=100000

  ## Set up a portfolio object and an account object
  portfolio = "turtles"
  assign("portfolio", portfolio, pos=1)
  initPortf(name=portfolio,symbols, initDate=initDate)
  account = "turtles"
  assign("account", account, pos=1)
  initAcct(name=account,portfolios="turtles", initDate=initDate,
initEq=initEq)

  Portfolio<-getPortfolio(portfolio)
  Portfolio[["USDCHF"]]$strat <- xts( as.matrix(t(c(0))),
                                     order.by=as.POSIXct(initDate) )

  colnames(Portfolio[["USDCHF"]]$strat) <- c('Txn')


  ## now put it back where it belongs
  assign( "portfolio.turtles", Portfolio , envir=.blotter )
  rm("Portfolio")

  for( i in index(USDCHF)) {
    i <- as.Date(i)
    CurrentDate <- i
    cat(as.character(CurrentDate), "\n")
    equity = getEndEq(account, CurrentDate)

    cat("FOO \n")
    updatePortf(Portfolio = portfolio, Dates = CurrentDate)
    updateAcct(account, Dates = CurrentDate)
    updateEndEq(account, Dates = CurrentDate)
  } # End dates loop

  getEndEq(account,Sys.time())
}
##go()



-- 
it does not matter                      I think that I shall never see
how much I dig and dig                    A billboard lovely as a tree
this hole just                      Indeed, unless the billboards fall
keeps getting deeper                      I'll never see a tree at all


From gsee000 at gmail.com  Fri Sep 21 04:43:59 2012
From: gsee000 at gmail.com (G See)
Date: Thu, 20 Sep 2012 21:43:59 -0500
Subject: [R-SIG-Finance] Problem with updatePortf
In-Reply-To: <505BD12D.5060802@gmail.com>
References: <505BCCA6.1030607@gmail.com>
	<505BD12D.5060802@gmail.com>
Message-ID: <CA+xi=qb_Zb5Ap6Hh16vzG9RJynHNbuF7f3Ep=LBaS4_GwuGHQw@mail.gmail.com>

getPrice looks for a price column and it only works if the xts object
has colnames.

> getPrice(USDCHF)
Error in getPrice(USDCHF) :
  subscript out of bounds, no price was discernible from the data

You need to add colnames.

> colnames(USDCHF) <- c("Bid", "Ask", "Last.Price")
> getPrice(USDCHF)
           Last.Price
2005-09-01     1.2343
2005-09-02     1.2280
2005-09-05     1.2335
2005-09-06     1.2365
2005-09-07     1.2426
2005-09-08     1.2449
2005-09-09     1.2442
2005-09-12     1.2592
2005-09-13     1.2619
2005-09-14     1.2585
2005-09-15     1.2671
2005-09-16     1.2687
2005-09-19     1.2772
2005-09-20     1.2809
2005-09-21     1.2718
2005-09-22     1.2795
2005-09-23     1.2916
2005-09-26     1.2896
2005-09-27     1.2959
2005-09-28     1.2940

Although getPrice is not documented, you can look at its code to see
what it does.  If you do not provide a value for the "prefer"
argument, it looks for a column name that contains the word "price".
If it cannot find that, it looks for "trade".  Finally, it looks for
"close".  If your colnames don't contain any of those words, or if you
want to use a different column, you can specify that with the "prefer"
argument

> getPrice(USDCHF, prefer="Bid")
              Bid
2005-09-01 1.2558
2005-09-02 1.2368
2005-09-05 1.2344
2005-09-06 1.2404
2005-09-07 1.2444
2005-09-08 1.2470
2005-09-09 1.2470
2005-09-12 1.2597
2005-09-13 1.2640
2005-09-14 1.2613
2005-09-15 1.2696
2005-09-16 1.2729
2005-09-19 1.2815
2005-09-20 1.2818
2005-09-21 1.2825
2005-09-22 1.2809
2005-09-23 1.2918
2005-09-26 1.2965
2005-09-27 1.2998
2005-09-28 1.2984

Garrett

On Thu, Sep 20, 2012 at 9:30 PM, Worik Stanton <worik.stanton at gmail.com> wrote:
> On 21/09/12 14:10, Worik Stanton wrote:
>> [snip]
>> I am working on a small example that exhibits the problem but in the
>> mean time is there a way I can debug .updatePosPL?
>
> So here is an example without transactions.
>
> I am a novice with blotter so tis example could probably be smaller.  I
> have tried to distill what are the most important points (hence no
> transactions).
>
> When I run this I get...
>
>> go()
> 2005-09-01
> FOO
> Error in getPrice(get(Symbol, pos = env), symbol = symbol, prefer =
> prefer) :
>   subscript out of bounds, no price was discernible from the data
>>


From worik.stanton at gmail.com  Fri Sep 21 06:08:44 2012
From: worik.stanton at gmail.com (Worik Stanton)
Date: Fri, 21 Sep 2012 16:08:44 +1200
Subject: [R-SIG-Finance] Problem with updatePortf
In-Reply-To: <CA+xi=qb_Zb5Ap6Hh16vzG9RJynHNbuF7f3Ep=LBaS4_GwuGHQw@mail.gmail.com>
References: <505BCCA6.1030607@gmail.com> <505BD12D.5060802@gmail.com>
	<CA+xi=qb_Zb5Ap6Hh16vzG9RJynHNbuF7f3Ep=LBaS4_GwuGHQw@mail.gmail.com>
Message-ID: <505BE84C.5090705@gmail.com>

On 21/09/12 14:43, G See wrote:
> getPrice looks for a price column and it only works if the xts object
> has colnames.
>
>> getPrice(USDCHF)
> Error in getPrice(USDCHF) :
>   subscript out of bounds, no price was discernible from the data
>
> You need to add colnames.
>
>> colnames(USDCHF) <- c("Bid", "Ask", "Last.Price")
>> getPrice(USDCHF)
>

Now the error is:

> go()
2005-09-01
FOO
Error in `*.default`(TmpPeriods[, columns], CcyMult) :
  non-conformable arrays

Adding a transaction in the inner loop...

    equity = getEndEq(account, CurrentDate)

    addTxn(Portfolio=portfolio, Symbol="USDCHF",
           TxnDate=CurrentDate,
           TxnPrice=1.1, TxnQty = 10 ,
                 TxnFees=0, verbose=TRUE)
   
   
    cat("FOO \n")

gives the following error...

> go()
2005-09-01
[1] "2005-09-01 00:00:00 USDCHF 10 @ 1.1"
FOO
Error in `*.default`(TmpPeriods[, columns], CcyMult) :
  non-conformable arrays

cheers
W

-- 
it does not matter                      I think that I shall never see
how much I dig and dig                    A billboard lovely as a tree
this hole just                      Indeed, unless the billboards fall
keeps getting deeper                      I'll never see a tree at all


From bmresearch at mac.com  Fri Sep 21 21:07:38 2012
From: bmresearch at mac.com (Brian Moretta)
Date: Fri, 21 Sep 2012 20:07:38 +0100
Subject: [R-SIG-Finance] quanstrat: stop trailing with variable stops size
Message-ID: <AA155081-4572-42FA-A6A3-04FC75B084F8@mac.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120921/954d65c7/attachment.pl>

From brian at braverock.com  Sat Sep 22 04:00:01 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 21 Sep 2012 21:00:01 -0500
Subject: [R-SIG-Finance] quanstrat: stop trailing with variable stops
 size
In-Reply-To: <AA155081-4572-42FA-A6A3-04FC75B084F8@mac.com>
References: <AA155081-4572-42FA-A6A3-04FC75B084F8@mac.com>
Message-ID: <505D1BA1.7040400@braverock.com>

why not label your stopATR indicator ouput and set the threshold to that?

quote(mktdata$stopATR)

?


On 09/21/2012 02:07 PM, Brian Moretta wrote:
> Hi
>
> I've been trying to modify the MACD example with trailing stop so that it uses a 2ATR stop rather than a fixed value or proportion. Key seems to be the threshold value. Help says
>
> If threshold is not numeric or NULL it should be the character string describing a function that can calculate a threshold. Ideally this will be a column lookup on a non-path-dependent indicator calculated in advance.
>
> I keep getting errors with the threshold set to something that uses a vector whether text or not. The add.rule line is (full code at end)
> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=stopvalue, tmult=FALSE, orderset='exit2'), type='risk',label='trailing exit')
>
> With stopvalue set to -20 it works fine. Tried stop.atr$atr, as a vector, inside quotes (help says character string) and inside quote() but to no avail. Tried similar for indicator mktdata$stopATR.ind.atr. Going through previous questions in this area I'm not sure if I'm just doing it wrong or pushing the limits of quanstrat's development, but any suggestions are welcome.
>
> Thanks
>
> Brian
>
> require(quantstrat)
> suppressWarnings(rm("order_book.macd",pos=.strategy))
> suppressWarnings(rm("account.macd","portfolio.macd",pos=.blotter))
> suppressWarnings(rm("account.st","portfolio.st","stock.str","stratMACD","initDate","initEq",'start_t','end_t'))
>
> #stock.str='AAPL' # what are we trying it on
> stock.str='GSPC'
> getSymbols("^GSPC", src='yahoo', index.class=c("POSIXt","POSIXct"), from='2007-01-01')
>
> stopATR <- function(HLC, n=14, maType, noATR=2){
> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)
> }
> stop.atr <- -2 * ATR(HLC(get(stock.str)), n=14, maType='SMA')
> stopvalue <- -20
>
> #MA parameters for MACD
> fastMA = 12
> slowMA = 26
> signalMA = 9
> maType="EMA"
>
> currency('USD')
> stock(stock.str,currency='USD',multiplier=1)
>
> initDate='2006-12-31'
> initEq=1000000
> portfolio.st='macd'
> account.st='macd'
>
> initPortf(portfolio.st,symbols=stock.str, initDate=initDate)
> initAcct(account.st,portfolios=portfolio.st, initDate=initDate)
> initOrders(portfolio=portfolio.st,initDate=initDate)
>
> strat.st<-portfolio.st
> # define the strategy
> strategy(strat.st, store=TRUE)
>
> #one indicator
> add.indicator(strat.st, name = "MACD", arguments = list(x=quote(Cl(mktdata))) )
> add.indicator(strat.st, name = "stopATR", arguments = list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=2) )
>
> #two signals
> add.signal(strat.st,name="sigThreshold",arguments = list(column="signal",relationship="gt",threshold=0,cross=TRUE),label="signal.gt.zero")
> add.signal(strat.st,name="sigThreshold",arguments = list(column="signal",relationship="lt",threshold=0,cross=TRUE),label="signal.lt.zero")
>
> ####
> # add rules
>
> # entry
> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty=100, ordertype='market', orderside='long', threshold=NULL),type='enter',label='enter',storefun=FALSE)
>
> #alternatives for risk stops:
> # alternately, use a trailing order, with 2ATR stop
> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=stop.atr$atr, tmult=FALSE, orderset='exit2'), type='risk',label='trailingexit')
>
> # exit
> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.lt.zero",sigval=TRUE, orderqty='all', ordertype='market', orderside='long', threshold=NULL,orderset='exit2'),type='exit',label='exit')
>
> #end rules
> ####
>
> start_t<-Sys.time()
> out<-try(applyStrategy(strat.st , portfolios=portfolio.st,parameters=list(nFast=fastMA, nSlow=slowMA, nSig=signalMA,maType=maType)))
> end_t<-Sys.time()
> print(end_t-start_t)
>
> start_t<-Sys.time()
> updatePortf(Portfolio=portfolio.st,Dates=paste('::',as.Date(Sys.time()),sep=''))
> end_t<-Sys.time()
> print("trade blotter portfolio update:")
> print(end_t-start_t)
>
> chart.Posn(Portfolio=portfolio.st,Symbol=stock.str)
> plot(add_MACD(fast=fastMA, slow=slowMA, signal=signalMA,maType="EMA"))
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From gaizoule at gmail.com  Sun Sep 23 06:12:58 2012
From: gaizoule at gmail.com (=?UTF-8?B?6K+l6LWw5LqG?=)
Date: Sun, 23 Sep 2012 12:12:58 +0800
Subject: [R-SIG-Finance] quantstrat demo error
Message-ID: <CAApQt_FOK0fm_B0XRG1raz1qrNYWcWAiiUS4c70czc4dLJjw9Q@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120923/b21169e1/attachment.pl>

From gaizoule at gmail.com  Sun Sep 23 06:23:27 2012
From: gaizoule at gmail.com (=?UTF-8?B?6K+l6LWw5LqG?=)
Date: Sun, 23 Sep 2012 12:23:27 +0800
Subject: [R-SIG-Finance] quantstrat demo error
In-Reply-To: <CAApQt_FOK0fm_B0XRG1raz1qrNYWcWAiiUS4c70czc4dLJjw9Q@mail.gmail.com>
References: <CAApQt_FOK0fm_B0XRG1raz1qrNYWcWAiiUS4c70czc4dLJjw9Q@mail.gmail.com>
Message-ID: <CAApQt_F2cnH-CaffViOTAmB+Qd9EQ10OW_0bJtniotU1GJg-zQ@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120923/9ba9e10f/attachment.pl>

From brian at braverock.com  Sun Sep 23 13:36:59 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Sun, 23 Sep 2012 06:36:59 -0500
Subject: [R-SIG-Finance] quantstrat demo error
In-Reply-To: <CAApQt_F2cnH-CaffViOTAmB+Qd9EQ10OW_0bJtniotU1GJg-zQ@mail.gmail.com>
References: <CAApQt_FOK0fm_B0XRG1raz1qrNYWcWAiiUS4c70czc4dLJjw9Q@mail.gmail.com>
	<CAApQt_F2cnH-CaffViOTAmB+Qd9EQ10OW_0bJtniotU1GJg-zQ@mail.gmail.com>
Message-ID: <505EF45B.6010406@braverock.com>

On 09/22/2012 11:23 PM, ??? wrote:
> Hi, everyone,
>     I was trying to run some demo in quantstrat package, but got some error:
>     I ran  demo("macd") in R command line, but get an error message like
> this:
>
>> library(quantstrat)
>> demo("macd")
> .....
>> out<-try(applyStrategy(strat.st , portfolios=portfolio.st,parameters=list(nFast=fastMA,
> nSlow=slowMA,          nSig=signalMA,maType=maType)))
> Error in if (!is.na(timestamp) && (ruletype == "chain" ||
> (!is.na(data[timestamp][,
>   : missing value where TRUE/FALSE needed
> .....
>
> In fact I had tried demo("maCross") and demo("pair_trade"), and got the
> same error message. Is there anyone can tell me what is wrong. Thanks in
> advanced.
>
> PS: my quantstrat , blotter, FinanceInstruments, etc packages are the
> latest version from R-forge.

All of these demos work for me with current R-Forge code, so you'll need 
to provide more information if anyone is going to be able to help you.

Here's my sessionInfo()

 > sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-pc-linux-gnu (64-bit)

locale:
  [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C
  [3] LC_TIME=en_US.UTF-8        LC_COLLATE=en_US.UTF-8
  [5] LC_MONETARY=en_US.UTF-8    LC_MESSAGES=en_US.UTF-8
  [7] LC_PAPER=C                 LC_NAME=C
  [9] LC_ADDRESS=C               LC_TELEPHONE=C
[11] LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base

other attached packages:
[1] quantstrat_0.6.8          blotter_0.8.12
[3] FinancialInstrument_1.0.3 quantmod_0.3-17
[5] Defaults_1.1-1            TTR_0.20-3
[7] xts_0.8-6                 zoo_1.7-7

loaded via a namespace (and not attached):
[1] grid_2.15.1    lattice_0.20-6 tools_2.15.1




-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From blue2bleu at yahoo.fr  Mon Sep 24 10:57:24 2012
From: blue2bleu at yahoo.fr (Chris de Bleu)
Date: Mon, 24 Sep 2012 09:57:24 +0100 (BST)
Subject: [R-SIG-Finance] help on creating 5 minutes bars
Message-ID: <1348477044.84571.YahooMailNeo@web171401.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120924/36e55877/attachment.pl>

From michael.weylandt at gmail.com  Mon Sep 24 12:14:54 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Mon, 24 Sep 2012 11:14:54 +0100
Subject: [R-SIG-Finance] help on creating 5 minutes bars
In-Reply-To: <1348477044.84571.YahooMailNeo@web171401.mail.ir2.yahoo.com>
References: <1348477044.84571.YahooMailNeo@web171401.mail.ir2.yahoo.com>
Message-ID: <CAAmySGPh8UFoGnccgaaWcEA+D5RfP=L+pkCtmQ010ts7GZ0FvA@mail.gmail.com>

On Mon, Sep 24, 2012 at 9:57 AM, Chris de Bleu <blue2bleu at yahoo.fr> wrote:
> I would like to convert a 1 minute xts data to 5 minutes bars using "to.minutes5".
>
>> library(xts)
>
>> N = 20
>> s = xts(1:N, order.by =  seq.POSIXt(ISOdate(2012, 9, 1), by = "min", length = N))
>> s
>                     [,1]
> 2012-09-01 12:00:00    1
> 2012-09-01 12:01:00    2
> 2012-09-01 12:02:00    3
> 2012-09-01 12:03:00    4
> 2012-09-01 12:04:00    5
> 2012-09-01 12:05:00    6
> 2012-09-01 12:06:00    7
> 2012-09-01 12:07:00    8
> 2012-09-01 12:08:00    9
> 2012-09-01 12:09:00   10
> 2012-09-01 12:10:00   11
> 2012-09-01 12:11:00   12
> 2012-09-01 12:12:00   13
> 2012-09-01 12:13:00   14
> 2012-09-01 12:14:00   15
> 2012-09-01 12:15:00   16
> 2012-09-01 12:16:00   17
> 2012-09-01 12:17:00   18
> 2012-09-01 12:18:00   19
> 2012-09-01 12:19:00   20
> Warning message:
> timezone of object (GMT) is different than current timezone ().
>> to.minutes5(s)
>                     s.Open s.High s.Low s.Close
> 2012-09-01 12:04:00      1      5     1       5
> 2012-09-01 12:09:00      6     10     6      10
> 2012-09-01 12:14:00     11     15    11      15
> 2012-09-01 12:19:00     16     20    16      20
> Warning message:
> timezone of object (GMT) is different than current timezone ().
>
>
> Why I haven't data at the 5 minutes with these timestamps?

Merely convention: to.period() goes to the _end_ of the unit being
aggregated rather than the beginning. This seems reasonable if you
consider a time stamp as when something can be known. (I.e., if you
marked periods as the beginning, use of  "Hi" and "Lo" would introduce
a small but non-negligible look ahead into the simulation)

Cheers,
Michael

>
> 2012-09-01 12:00:00
> 2012-09-01 12:05:00
> 2012-09-01 12:10:00
> 2012-09-01 12:15:00
>
>
> Thank you,
>         [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From jan at opentrades.nl  Mon Sep 24 12:19:10 2012
From: jan at opentrades.nl (OpenTrades)
Date: Mon, 24 Sep 2012 12:19:10 +0200
Subject: [R-SIG-Finance] help on creating 5 minutes bars
In-Reply-To: <1348477044.84571.YahooMailNeo@web171401.mail.ir2.yahoo.com>
References: <1348477044.84571.YahooMailNeo@web171401.mail.ir2.yahoo.com>
Message-ID: <5060339E.10104@opentrades.nl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120924/5645d519/attachment.pl>

From blue2bleu at yahoo.fr  Mon Sep 24 14:00:05 2012
From: blue2bleu at yahoo.fr (Chris de Bleu)
Date: Mon, 24 Sep 2012 13:00:05 +0100 (BST)
Subject: [R-SIG-Finance] help on creating 5 minutes bars
In-Reply-To: <CAAmySGPh8UFoGnccgaaWcEA+D5RfP=L+pkCtmQ010ts7GZ0FvA@mail.gmail.com>
References: <1348477044.84571.YahooMailNeo@web171401.mail.ir2.yahoo.com>
	<CAAmySGPh8UFoGnccgaaWcEA+D5RfP=L+pkCtmQ010ts7GZ0FvA@mail.gmail.com>
Message-ID: <1348488005.30301.YahooMailNeo@web171403.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120924/1291ae76/attachment.pl>

From michael.weylandt at gmail.com  Mon Sep 24 14:48:01 2012
From: michael.weylandt at gmail.com (R. Michael Weylandt)
Date: Mon, 24 Sep 2012 13:48:01 +0100
Subject: [R-SIG-Finance] help on creating 5 minutes bars
In-Reply-To: <1348488005.30301.YahooMailNeo@web171403.mail.ir2.yahoo.com>
References: <1348477044.84571.YahooMailNeo@web171401.mail.ir2.yahoo.com>
	<CAAmySGPh8UFoGnccgaaWcEA+D5RfP=L+pkCtmQ010ts7GZ0FvA@mail.gmail.com>
	<1348488005.30301.YahooMailNeo@web171403.mail.ir2.yahoo.com>
Message-ID: <CAAmySGPyb==MODR7SPfyqu3be_NKBaG+zTqnBem8Pm35Oh1A4Q@mail.gmail.com>

On Mon, Sep 24, 2012 at 1:00 PM, Chris de Bleu <blue2bleu at yahoo.fr> wrote:
>
> Ok, let set N = 21, so the last timestamp is "2012-09-01 12:20:00"
>
>> N = 21
>>  s = xts(cbind(1:N, 1:N, 1:N, 1:N), order.by =  seq.POSIXt(ISOdate(2012, 9, 1), by = "min", length = N))
>> colnames(s) = c("Open", "High", "Low", "Close")
>> s
>                     Open High Low Close
> 2012-09-01 12:00:00    1    1   1     1
> 2012-09-01 12:01:00    2    2   2     2
> 2012-09-01 12:02:00    3    3   3     3
> 2012-09-01 12:03:00    4    4   4     4
> 2012-09-01 12:04:00    5    5   5     5
> 2012-09-01 12:05:00    6    6   6     6
> 2012-09-01 12:06:00    7    7   7     7
> 2012-09-01 12:07:00    8    8   8     8
> 2012-09-01 12:08:00    9    9   9     9
> 2012-09-01 12:09:00   10   10  10    10
> 2012-09-01 12:10:00   11   11  11    11
> 2012-09-01 12:11:00   12   12  12    12
> 2012-09-01 12:12:00   13   13  13    13
> 2012-09-01 12:13:00   14   14  14    14
> 2012-09-01 12:14:00   15   15  15    15
> 2012-09-01 12:15:00   16   16  16    16
> 2012-09-01 12:16:00   17   17  17    17
> 2012-09-01 12:17:00   18   18  18    18
> 2012-09-01 12:18:00   19   19  19    19
> 2012-09-01 12:19:00   20   20  20    20
> 2012-09-01 12:20:00   21   21  21    21
>
>> to.minutes5(s)
>                                   s.Open s.High s.Low s.Close
> 2012-09-01 12:04:00      1      5     1       5
> 2012-09-01 12:09:00      6     10     6      10
> 2012-09-01 12:14:00     11     15    11      15
> 2012-09-01 12:19:00     16     20    16      20
> 2012-09-01 12:20:00     21     21    21      21
>
>> align.time(to.minutes5(s), 5*60)
>                               s.Open s.High s.Low s.Close
> 2012-09-01 12:05:00      1      5     1       5
> 2012-09-01 12:10:00      6     10     6      10
> 2012-09-01 12:15:00     11     15    11      15
> 2012-09-01 12:20:00     16     20    16      20
> 2012-09-01 12:25:00     21     21    21      21
>
> We remark also that there is a lag in the values.
>

Is there a question in this? It's consistent with your earlier
example: aligning with the end of the grouped period.

Michael

>         [[alternative HTML version deleted]]
>
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From blue2bleu at yahoo.fr  Mon Sep 24 15:17:56 2012
From: blue2bleu at yahoo.fr (Chris de Bleu)
Date: Mon, 24 Sep 2012 14:17:56 +0100 (BST)
Subject: [R-SIG-Finance] help on creating 5 minutes bars
In-Reply-To: <CAAmySGPyb==MODR7SPfyqu3be_NKBaG+zTqnBem8Pm35Oh1A4Q@mail.gmail.com>
References: <1348477044.84571.YahooMailNeo@web171401.mail.ir2.yahoo.com>
	<CAAmySGPh8UFoGnccgaaWcEA+D5RfP=L+pkCtmQ010ts7GZ0FvA@mail.gmail.com>
	<1348488005.30301.YahooMailNeo@web171403.mail.ir2.yahoo.com>
	<CAAmySGPyb==MODR7SPfyqu3be_NKBaG+zTqnBem8Pm35Oh1A4Q@mail.gmail.com>
Message-ID: <1348492676.48020.YahooMailNeo@web171401.mail.ir2.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120924/b8e7ce78/attachment.pl>

From bmresearch at mac.com  Tue Sep 25 16:10:28 2012
From: bmresearch at mac.com (Brian Moretta)
Date: Tue, 25 Sep 2012 15:10:28 +0100
Subject: [R-SIG-Finance] quanstrat: stop trailing with variable stops
	size
In-Reply-To: <505D1BA1.7040400@braverock.com>
References: <AA155081-4572-42FA-A6A3-04FC75B084F8@mac.com>
	<505D1BA1.7040400@braverock.com>
Message-ID: <8FC313E7-3BA9-4797-A013-9572C7A23841@mac.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120925/a623d55a/attachment.pl>

From bendavid at aya.yale.edu  Wed Sep 26 15:35:38 2012
From: bendavid at aya.yale.edu (R. Ben-David)
Date: Wed, 26 Sep 2012 08:35:38 -0500
Subject: [R-SIG-Finance] Intraday interval data from Bloomberg
Message-ID: <004301cd9beb$d1599020$740cb060$@aya.yale.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120926/061d0d62/attachment.pl>

From john.laing at gmail.com  Wed Sep 26 16:06:59 2012
From: john.laing at gmail.com (John Laing)
Date: Wed, 26 Sep 2012 10:06:59 -0400
Subject: [R-SIG-Finance] Intraday interval data from Bloomberg
In-Reply-To: <004301cd9beb$d1599020$740cb060$@aya.yale.edu>
References: <004301cd9beb$d1599020$740cb060$@aya.yale.edu>
Message-ID: <CAA3Wa=vQZLtTDJBv7Zmy_-g45ZfV-zGf6PykQODBM6-SJ5=QyQ@mail.gmail.com>

Ram,

This is straightforward using the bar function, though admittedly the
documentation is not clear on what values the field parameter can
take.

Here are some better examples:
#############
require(Rbbg)
conn <- blpConnect()
ticker <- "GOOG US Equity"
start <- "2012-09-25 15:00:00.000"
end <- "2012-09-25 16:00:00.000"
interval <- "5"

bar(conn, ticker, "TRADE", start, end, interval)
bar(conn, ticker, "BID", start, end, interval)
bar(conn, ticker, "ASK", start, end, interval)
##################

Hope that helps,
John

On Wed, Sep 26, 2012 at 9:35 AM, R. Ben-David <bendavid at aya.yale.edu> wrote:
> Greetings,
>
>
>
> I've downloaded the Rbbg package and am able to successfully execute all the
> examples in the documentation.
>
>
>
> Does someone have an example with the specifics of downloading intraday data
> (for example 5 minute close of the bid) they could share?
>
>
>
> Thank you,
>
>
>
> Ram
>
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From eko.prakasa at yahoo.com  Wed Sep 26 17:56:02 2012
From: eko.prakasa at yahoo.com (Eko andryanto Prakasa)
Date: Wed, 26 Sep 2012 23:56:02 +0800 (SGT)
Subject: [R-SIG-Finance] Backtesting (Kupiec) and Measure Stock's Portoflio
	using EVT
Message-ID: <1348674962.10261.YahooMailNeo@web190505.mail.sg3.yahoo.com>

hai all,
i'm a beginner in using R and just start to use it......
i have measured VaR and i want to do backtesting using Kupiec test......
is there any package for measure backtesting?
and how is the procedure?to measure portfolio stock risk using EVT? is there any package to measure it?
?
thanks for the attention .......
?
?
Eko A P


From jan at opentrades.nl  Thu Sep 27 01:16:01 2012
From: jan at opentrades.nl (OpenTrades)
Date: Thu, 27 Sep 2012 01:16:01 +0200
Subject: [R-SIG-Finance] quanstrat: stop trailing with variable stops
 size
In-Reply-To: <8FC313E7-3BA9-4797-A013-9572C7A23841@mac.com>
References: <AA155081-4572-42FA-A6A3-04FC75B084F8@mac.com>
	<505D1BA1.7040400@braverock.com>
	<8FC313E7-3BA9-4797-A013-9572C7A23841@mac.com>
Message-ID: <50638CB1.20909@opentrades.nl>

Hi Brian,

We have now implemented support for using an indicator column in the 
mktdata object as threshold values. So in your source code, I suggest 
that you use:
> add.indicator(strat.st, name = "stopATR", arguments = 
> list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=2) )
to add your ATR values, and then refer to these in the rule:
> add.rule(strat.st,name='ruleSignal', arguments = 
> list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', 
> ordertype='stoptrailing', orderside='long', 
> threshold='stopATR.ind.atr', tmult=FALSE, orderset='exit2'), 
> type='risk',label='trailingexit')

Please note that you cannot pass a column of threshold values as a 
vector. You can also not pass the name of a function: use the indicator 
method instead (see above).

Hope this helps,

Jan Humme.



On 25-09-12 16:10, Brian Moretta wrote:
> Thanks for the suggestion. Now I'm getting interesting differences.
>
> If I redefine my stopATR function (below) and use quote(mktdata$stopATR) as you suggest then I get an error message:
> Error in if (order.side == "long" && as.numeric(Lo(mktdataTimestamp)) <  :
>    missing value where TRUE/FALSE needed
> This followed by two identical warnings : In max(i) : no non-missing arguments to max; returning -Inf
> This is the same error as if I used quote(mktdata$stopATR.ind.atr) with my original function.
> stopATR <- function(HLC, n=14, maType, noATR=2){
> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)$atr
> 	colnames(stop.atr) <- c("stopATR")
> 	stop.atr
> }
>
> If I'm lazy & use my original stopATR function then using quote(mktdata$atr) in the add.rule runs without any error messages. However the trailing stop doesn't seem to affect anything. Even using an ATR multiple of .1 (not realistic but gives a threshold of 2-3 points on the GSPC data) gives exactly the same transactions as with the add.rule for the stop commented out. Have checked the data and some should be affected but such a tight stop.
> add.indicator(strat.st, name = "stopATR", arguments = list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=.1) )
> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=quote(mktdata$atr), tmult=FALSE, orderset='exit2'), type='risk',label='trailingexit')
>
> I've also tried the following definition for stopATR with quote(mktdata$atr) as in the second case and I get the same error as in the first example.
> stopATR <- function(HLC, n=14, maType, noATR=2){
> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)$atr
> }
>
> Not sure if I'm missing something obvious or if there is something else going on.
>
> Thanks
>
> Brian
>
> On 22 Sep 2012, at 03:00, Brian G. Peterson wrote:
>
>> why not label your stopATR indicator ouput and set the threshold to that?
>>
>> quote(mktdata$stopATR)
>>
>> ?
>>
>>
>> On 09/21/2012 02:07 PM, Brian Moretta wrote:
>>> Hi
>>>
>>> I've been trying to modify the MACD example with trailing stop so that it uses a 2ATR stop rather than a fixed value or proportion. Key seems to be the threshold value. Help says
>>>
>>> If threshold is not numeric or NULL it should be the character string describing a function that can calculate a threshold. Ideally this will be a column lookup on a non-path-dependent indicator calculated in advance.
>>>
>>> I keep getting errors with the threshold set to something that uses a vector whether text or not. The add.rule line is (full code at end)
>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=stopvalue, tmult=FALSE, orderset='exit2'), type='risk',label='trailing exit')
>>>
>>> With stopvalue set to -20 it works fine. Tried stop.atr$atr, as a vector, inside quotes (help says character string) and inside quote() but to no avail. Tried similar for indicator mktdata$stopATR.ind.atr. Going through previous questions in this area I'm not sure if I'm just doing it wrong or pushing the limits of quanstrat's development, but any suggestions are welcome.
>>>
>>> Thanks
>>>
>>> Brian
>>>
>>> require(quantstrat)
>>> suppressWarnings(rm("order_book.macd",pos=.strategy))
>>> suppressWarnings(rm("account.macd","portfolio.macd",pos=.blotter))
>>> suppressWarnings(rm("account.st","portfolio.st","stock.str","stratMACD","initDate","initEq",'start_t','end_t'))
>>>
>>> #stock.str='AAPL' # what are we trying it on
>>> stock.str='GSPC'
>>> getSymbols("^GSPC", src='yahoo', index.class=c("POSIXt","POSIXct"), from='2007-01-01')
>>>
>>> stopATR <- function(HLC, n=14, maType, noATR=2){
>>> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)
>>> }
>>> stop.atr <- -2 * ATR(HLC(get(stock.str)), n=14, maType='SMA')
>>> stopvalue <- -20
>>>
>>> #MA parameters for MACD
>>> fastMA = 12
>>> slowMA = 26
>>> signalMA = 9
>>> maType="EMA"
>>>
>>> currency('USD')
>>> stock(stock.str,currency='USD',multiplier=1)
>>>
>>> initDate='2006-12-31'
>>> initEq=1000000
>>> portfolio.st='macd'
>>> account.st='macd'
>>>
>>> initPortf(portfolio.st,symbols=stock.str, initDate=initDate)
>>> initAcct(account.st,portfolios=portfolio.st, initDate=initDate)
>>> initOrders(portfolio=portfolio.st,initDate=initDate)
>>>
>>> strat.st<-portfolio.st
>>> # define the strategy
>>> strategy(strat.st, store=TRUE)
>>>
>>> #one indicator
>>> add.indicator(strat.st, name = "MACD", arguments = list(x=quote(Cl(mktdata))) )
>>> add.indicator(strat.st, name = "stopATR", arguments = list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=2) )
>>>
>>> #two signals
>>> add.signal(strat.st,name="sigThreshold",arguments = list(column="signal",relationship="gt",threshold=0,cross=TRUE),label="signal.gt.zero")
>>> add.signal(strat.st,name="sigThreshold",arguments = list(column="signal",relationship="lt",threshold=0,cross=TRUE),label="signal.lt.zero")
>>>
>>> ####
>>> # add rules
>>>
>>> # entry
>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty=100, ordertype='market', orderside='long', threshold=NULL),type='enter',label='enter',storefun=FALSE)
>>>
>>> #alternatives for risk stops:
>>> # alternately, use a trailing order, with 2ATR stop
>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=stop.atr$atr, tmult=FALSE, orderset='exit2'), type='risk',label='trailingexit')
>>>
>>> # exit
>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.lt.zero",sigval=TRUE, orderqty='all', ordertype='market', orderside='long', threshold=NULL,orderset='exit2'),type='exit',label='exit')
>>>
>>> #end rules
>>> ####
>>>
>>> start_t<-Sys.time()
>>> out<-try(applyStrategy(strat.st , portfolios=portfolio.st,parameters=list(nFast=fastMA, nSlow=slowMA, nSig=signalMA,maType=maType)))
>>> end_t<-Sys.time()
>>> print(end_t-start_t)
>>>
>>> start_t<-Sys.time()
>>> updatePortf(Portfolio=portfolio.st,Dates=paste('::',as.Date(Sys.time()),sep=''))
>>> end_t<-Sys.time()
>>> print("trade blotter portfolio update:")
>>> print(end_t-start_t)
>>>
>>> chart.Posn(Portfolio=portfolio.st,Symbol=stock.str)
>>> plot(add_MACD(fast=fastMA, slow=slowMA, signal=signalMA,maType="EMA"))
>>>
>>> 	[[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>
>> -- 
>> Brian G. Peterson
>> http://braverock.com/brian/
>> Ph: 773-459-4973
>> IM: bgpbraverock
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>
> 	[[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


-- 
Jan Humme - OpenTrades

WWW:     http://www.opentrades.nl
Email:   jan at opentrades.nl
Twitter: @opentrades


From unsown at gmail.com  Thu Sep 27 02:47:59 2012
From: unsown at gmail.com (Qiang Wang)
Date: Thu, 27 Sep 2012 08:47:59 +0800
Subject: [R-SIG-Finance] Market data playback from IBrokers
Message-ID: <CAJiDV2aEd8tYABmUpwh1BO4C8NDcpTN5sjsoyGK8HC-t-arbTg@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120927/9cebb3b0/attachment.pl>

From sf99167 at yahoo.com  Thu Sep 27 07:31:20 2012
From: sf99167 at yahoo.com (sean fallon)
Date: Wed, 26 Sep 2012 22:31:20 -0700 (PDT)
Subject: [R-SIG-Finance] Reversing date order in CSV file
Message-ID: <1348723880.94476.YahooMailNeo@web163803.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120926/05278445/attachment.pl>

From rex at nosyntax.net  Thu Sep 27 07:50:29 2012
From: rex at nosyntax.net (rex)
Date: Wed, 26 Sep 2012 22:50:29 -0700
Subject: [R-SIG-Finance] Reversing date order in CSV file
In-Reply-To: <1348723880.94476.YahooMailNeo@web163803.mail.gq1.yahoo.com>
References: <1348723880.94476.YahooMailNeo@web163803.mail.gq1.yahoo.com>
Message-ID: <20120927055029.GT30886@ninja.nosyntax.net>

sean fallon <sf99167 at yahoo.com> [2012-09-26 22:31]:
>data<-read.csv("http://ichart.finance.yahoo.com/table.csv?s=INFY.BO&a=08&b=16&c=2008&d=08&e=26&f=2012&g=d&ignore=.csv")
>head(data)
>
>How do I sort the data in reverse i.e the oldest data first. I could open the CSV file in excel and sort decending but is there a line in R I could incorporate to reverse it.

I'd use quantmod.

library(quantmod)
getSymbols('INFY.BO', from='2008-01-01')
head(INFY.BO)
            INFY.BO.Open INFY.BO.High INFY.BO.Low INFY.BO.Close INFY.BO.Volume INFY.BO.Adjusted
2008-01-01       1758.0      1777.15     1743.00       1749.70          51700          1639.38
2008-01-02       1780.0      1785.00     1715.35       1749.40          86700          1639.10
2008-01-03       1740.0      1750.00     1691.60       1713.00         214300          1605.00
2008-01-04       1711.3      1730.00     1680.00       1694.80         134400          1587.94
2008-01-07       1670.0      1681.00     1623.00       1638.10         307500          1534.82
2008-01-08       1651.0      1694.60     1623.20       1662.15         253400          1557.35

class(INFY.BO)
[1] "xts" "zoo"

Which is probably what you want rather than a data.frame.

HTH,

-rex
-- 
Q:  Why do mountain climbers rope themselves together?
A:  To prevent the sensible ones from going home.


From sf99167 at yahoo.com  Thu Sep 27 07:57:23 2012
From: sf99167 at yahoo.com (sean fallon)
Date: Wed, 26 Sep 2012 22:57:23 -0700 (PDT)
Subject: [R-SIG-Finance] Reversing date order in CSV file
In-Reply-To: <20120927055029.GT30886@ninja.nosyntax.net>
References: <1348723880.94476.YahooMailNeo@web163803.mail.gq1.yahoo.com>
	<20120927055029.GT30886@ninja.nosyntax.net>
Message-ID: <1348725443.95915.YahooMailNeo@web163804.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120926/123d093e/attachment.pl>

From sf99167 at yahoo.com  Thu Sep 27 08:28:05 2012
From: sf99167 at yahoo.com (sean fallon)
Date: Wed, 26 Sep 2012 23:28:05 -0700 (PDT)
Subject: [R-SIG-Finance] Coercing LHS to a list
In-Reply-To: <1348725443.95915.YahooMailNeo@web163804.mail.gq1.yahoo.com>
References: <1348723880.94476.YahooMailNeo@web163803.mail.gq1.yahoo.com>
	<20120927055029.GT30886@ninja.nosyntax.net>
	<1348725443.95915.YahooMailNeo@web163804.mail.gq1.yahoo.com>
Message-ID: <1348727285.41718.YahooMailNeo@web163804.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120926/770276db/attachment.pl>

From rex at nosyntax.net  Thu Sep 27 09:06:25 2012
From: rex at nosyntax.net (rex)
Date: Thu, 27 Sep 2012 00:06:25 -0700
Subject: [R-SIG-Finance] Coercing LHS to a list
In-Reply-To: <1348727285.41718.YahooMailNeo@web163804.mail.gq1.yahoo.com>
References: <1348723880.94476.YahooMailNeo@web163803.mail.gq1.yahoo.com>
	<20120927055029.GT30886@ninja.nosyntax.net>
	<1348725443.95915.YahooMailNeo@web163804.mail.gq1.yahoo.com>
	<1348727285.41718.YahooMailNeo@web163804.mail.gq1.yahoo.com>
Message-ID: <20120927070625.GV30886@ninja.nosyntax.net>

sean fallon <sf99167 at yahoo.com> [2012-09-26 23:27]:
>Now one more error to sort ....
>
>library(quantmod)
>getSymbols("INFY.BO", from="2008-01-01")
>data<-INFY.BO
>#Add the SMA/LMA
>h=data[,4]    <---- this is close, not high
>c=data[,5]    <---- this is volume, not close
>hcdif=h-c

I'd replace 3 the lines above with:
hcdif = Hi(data)-Cl(data)

>data$smv=filter(data[,5],rep(1/7,7), sides=1) 
>data$lmv=filter(data[,5],rep(1/21,21), sides=1)
>The data$smv has not error

Do you want:
datasmv=filter(Cl(data),rep(1/7,7), sides=1) 
datalmv=filter(Cl(data),rep(1/21,21), sides=1)

HTH,

-rex
-- 
Change is inevitable, except from a vending machine.


From sf99167 at yahoo.com  Thu Sep 27 10:23:42 2012
From: sf99167 at yahoo.com (sean fallon)
Date: Thu, 27 Sep 2012 01:23:42 -0700 (PDT)
Subject: [R-SIG-Finance] Coercing LHS to a list
In-Reply-To: <20120927070625.GV30886@ninja.nosyntax.net>
References: <1348723880.94476.YahooMailNeo@web163803.mail.gq1.yahoo.com>
	<20120927055029.GT30886@ninja.nosyntax.net>
	<1348725443.95915.YahooMailNeo@web163804.mail.gq1.yahoo.com>
	<1348727285.41718.YahooMailNeo@web163804.mail.gq1.yahoo.com>
	<20120927070625.GV30886@ninja.nosyntax.net>
Message-ID: <1348734222.70203.YahooMailNeo@web163801.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120927/569bc0b7/attachment.pl>

From sf99167 at yahoo.com  Thu Sep 27 11:52:22 2012
From: sf99167 at yahoo.com (sean fallon)
Date: Thu, 27 Sep 2012 02:52:22 -0700 (PDT)
Subject: [R-SIG-Finance] Coercing LHS to a list
In-Reply-To: <20120927092157.GA25092@ninja.nosyntax.net>
References: <1348723880.94476.YahooMailNeo@web163803.mail.gq1.yahoo.com>
	<20120927055029.GT30886@ninja.nosyntax.net>
	<1348725443.95915.YahooMailNeo@web163804.mail.gq1.yahoo.com>
	<1348727285.41718.YahooMailNeo@web163804.mail.gq1.yahoo.com>
	<20120927070625.GV30886@ninja.nosyntax.net>
	<1348734222.70203.YahooMailNeo@web163801.mail.gq1.yahoo.com>
	<20120927092157.GA25092@ninja.nosyntax.net>
Message-ID: <1348739542.56472.YahooMailNeo@web163804.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120927/bb21c245/attachment.pl>

From jfperles at gmail.com  Thu Sep 27 12:17:16 2012
From: jfperles at gmail.com (JOSE FRANCISCO PERLES RIBES)
Date: Thu, 27 Sep 2012 12:17:16 +0200
Subject: [R-SIG-Finance] Comparing pvalues in ADF test in Gretl fUnitRoots
	and Eviews
Message-ID: <CAGKcx6Am=wFu+zHN7uP3sTWw7obe5Ebo499hX5rZfaWb5xp0iw@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120927/d544a21f/attachment.pl>

From bmresearch at mac.com  Thu Sep 27 18:31:32 2012
From: bmresearch at mac.com (Brian Moretta)
Date: Thu, 27 Sep 2012 17:31:32 +0100
Subject: [R-SIG-Finance] quanstrat: stop trailing with variable stops
	size
In-Reply-To: <50638CB1.20909@opentrades.nl>
References: <AA155081-4572-42FA-A6A3-04FC75B084F8@mac.com>
	<505D1BA1.7040400@braverock.com>
	<8FC313E7-3BA9-4797-A013-9572C7A23841@mac.com>
	<50638CB1.20909@opentrades.nl>
Message-ID: <1E2E1159-24C7-4965-9DE4-DA21C439B0A3@mac.com>

Jan

That seems to working now. Thanks for your help.

Brian

PS saw on one of the forums you may be interested in an example of Donchian breakouts for the package. Have coded one so if you are still interested let me know & I'll tidy it up & forward it.

On 27 Sep 2012, at 00:16, OpenTrades wrote:

> Hi Brian,
> 
> We have now implemented support for using an indicator column in the mktdata object as threshold values. So in your source code, I suggest that you use:
>> add.indicator(strat.st, name = "stopATR", arguments = list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=2) )
> to add your ATR values, and then refer to these in the rule:
>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold='stopATR.ind.atr', tmult=FALSE, orderset='exit2'), type='risk',label='trailingexit')
> 
> Please note that you cannot pass a column of threshold values as a vector. You can also not pass the name of a function: use the indicator method instead (see above).
> 
> Hope this helps,
> 
> Jan Humme.
> 
> 
> 
> On 25-09-12 16:10, Brian Moretta wrote:
>> Thanks for the suggestion. Now I'm getting interesting differences.
>> 
>> If I redefine my stopATR function (below) and use quote(mktdata$stopATR) as you suggest then I get an error message:
>> Error in if (order.side == "long" && as.numeric(Lo(mktdataTimestamp)) <  :
>>   missing value where TRUE/FALSE needed
>> This followed by two identical warnings : In max(i) : no non-missing arguments to max; returning -Inf
>> This is the same error as if I used quote(mktdata$stopATR.ind.atr) with my original function.
>> stopATR <- function(HLC, n=14, maType, noATR=2){
>> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)$atr
>> 	colnames(stop.atr) <- c("stopATR")
>> 	stop.atr
>> }
>> 
>> If I'm lazy & use my original stopATR function then using quote(mktdata$atr) in the add.rule runs without any error messages. However the trailing stop doesn't seem to affect anything. Even using an ATR multiple of .1 (not realistic but gives a threshold of 2-3 points on the GSPC data) gives exactly the same transactions as with the add.rule for the stop commented out. Have checked the data and some should be affected but such a tight stop.
>> add.indicator(strat.st, name = "stopATR", arguments = list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=.1) )
>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=quote(mktdata$atr), tmult=FALSE, orderset='exit2'), type='risk',label='trailingexit')
>> 
>> I've also tried the following definition for stopATR with quote(mktdata$atr) as in the second case and I get the same error as in the first example.
>> stopATR <- function(HLC, n=14, maType, noATR=2){
>> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)$atr
>> }
>> 
>> Not sure if I'm missing something obvious or if there is something else going on.
>> 
>> Thanks
>> 
>> Brian
>> 
>> On 22 Sep 2012, at 03:00, Brian G. Peterson wrote:
>> 
>>> why not label your stopATR indicator ouput and set the threshold to that?
>>> 
>>> quote(mktdata$stopATR)
>>> 
>>> ?
>>> 
>>> 
>>> On 09/21/2012 02:07 PM, Brian Moretta wrote:
>>>> Hi
>>>> 
>>>> I've been trying to modify the MACD example with trailing stop so that it uses a 2ATR stop rather than a fixed value or proportion. Key seems to be the threshold value. Help says
>>>> 
>>>> If threshold is not numeric or NULL it should be the character string describing a function that can calculate a threshold. Ideally this will be a column lookup on a non-path-dependent indicator calculated in advance.
>>>> 
>>>> I keep getting errors with the threshold set to something that uses a vector whether text or not. The add.rule line is (full code at end)
>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=stopvalue, tmult=FALSE, orderset='exit2'), type='risk',label='trailing exit')
>>>> 
>>>> With stopvalue set to -20 it works fine. Tried stop.atr$atr, as a vector, inside quotes (help says character string) and inside quote() but to no avail. Tried similar for indicator mktdata$stopATR.ind.atr. Going through previous questions in this area I'm not sure if I'm just doing it wrong or pushing the limits of quanstrat's development, but any suggestions are welcome.
>>>> 
>>>> Thanks
>>>> 
>>>> Brian
>>>> 
>>>> require(quantstrat)
>>>> suppressWarnings(rm("order_book.macd",pos=.strategy))
>>>> suppressWarnings(rm("account.macd","portfolio.macd",pos=.blotter))
>>>> suppressWarnings(rm("account.st","portfolio.st","stock.str","stratMACD","initDate","initEq",'start_t','end_t'))
>>>> 
>>>> #stock.str='AAPL' # what are we trying it on
>>>> stock.str='GSPC'
>>>> getSymbols("^GSPC", src='yahoo', index.class=c("POSIXt","POSIXct"), from='2007-01-01')
>>>> 
>>>> stopATR <- function(HLC, n=14, maType, noATR=2){
>>>> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)
>>>> }
>>>> stop.atr <- -2 * ATR(HLC(get(stock.str)), n=14, maType='SMA')
>>>> stopvalue <- -20
>>>> 
>>>> #MA parameters for MACD
>>>> fastMA = 12
>>>> slowMA = 26
>>>> signalMA = 9
>>>> maType="EMA"
>>>> 
>>>> currency('USD')
>>>> stock(stock.str,currency='USD',multiplier=1)
>>>> 
>>>> initDate='2006-12-31'
>>>> initEq=1000000
>>>> portfolio.st='macd'
>>>> account.st='macd'
>>>> 
>>>> initPortf(portfolio.st,symbols=stock.str, initDate=initDate)
>>>> initAcct(account.st,portfolios=portfolio.st, initDate=initDate)
>>>> initOrders(portfolio=portfolio.st,initDate=initDate)
>>>> 
>>>> strat.st<-portfolio.st
>>>> # define the strategy
>>>> strategy(strat.st, store=TRUE)
>>>> 
>>>> #one indicator
>>>> add.indicator(strat.st, name = "MACD", arguments = list(x=quote(Cl(mktdata))) )
>>>> add.indicator(strat.st, name = "stopATR", arguments = list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=2) )
>>>> 
>>>> #two signals
>>>> add.signal(strat.st,name="sigThreshold",arguments = list(column="signal",relationship="gt",threshold=0,cross=TRUE),label="signal.gt.zero")
>>>> add.signal(strat.st,name="sigThreshold",arguments = list(column="signal",relationship="lt",threshold=0,cross=TRUE),label="signal.lt.zero")
>>>> 
>>>> ####
>>>> # add rules
>>>> 
>>>> # entry
>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty=100, ordertype='market', orderside='long', threshold=NULL),type='enter',label='enter',storefun=FALSE)
>>>> 
>>>> #alternatives for risk stops:
>>>> # alternately, use a trailing order, with 2ATR stop
>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=stop.atr$atr, tmult=FALSE, orderset='exit2'), type='risk',label='trailingexit')
>>>> 
>>>> # exit
>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.lt.zero",sigval=TRUE, orderqty='all', ordertype='market', orderside='long', threshold=NULL,orderset='exit2'),type='exit',label='exit')
>>>> 
>>>> #end rules
>>>> ####
>>>> 
>>>> start_t<-Sys.time()
>>>> out<-try(applyStrategy(strat.st , portfolios=portfolio.st,parameters=list(nFast=fastMA, nSlow=slowMA, nSig=signalMA,maType=maType)))
>>>> end_t<-Sys.time()
>>>> print(end_t-start_t)
>>>> 
>>>> start_t<-Sys.time()
>>>> updatePortf(Portfolio=portfolio.st,Dates=paste('::',as.Date(Sys.time()),sep=''))
>>>> end_t<-Sys.time()
>>>> print("trade blotter portfolio update:")
>>>> print(end_t-start_t)
>>>> 
>>>> chart.Posn(Portfolio=portfolio.st,Symbol=stock.str)
>>>> plot(add_MACD(fast=fastMA, slow=slowMA, signal=signalMA,maType="EMA"))
>>>> 
>>>> 	[[alternative HTML version deleted]]
>>>> 
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>> 
>>> 
>>> -- 
>>> Brian G. Peterson
>>> http://braverock.com/brian/
>>> Ph: 773-459-4973
>>> IM: bgpbraverock
>>> 
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>> 
>> 	[[alternative HTML version deleted]]
>> 
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
>> 
> 
> 
> -- 
> Jan Humme - OpenTrades
> 
> WWW:     http://www.opentrades.nl
> Email:   jan at opentrades.nl
> Twitter: @opentrades
> 
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.


From rex at nosyntax.net  Thu Sep 27 18:59:17 2012
From: rex at nosyntax.net (rex)
Date: Thu, 27 Sep 2012 09:59:17 -0700
Subject: [R-SIG-Finance] Coercing LHS to a list
In-Reply-To: <1348739542.56472.YahooMailNeo@web163804.mail.gq1.yahoo.com>
References: <1348723880.94476.YahooMailNeo@web163803.mail.gq1.yahoo.com>
	<20120927055029.GT30886@ninja.nosyntax.net>
	<1348725443.95915.YahooMailNeo@web163804.mail.gq1.yahoo.com>
	<1348727285.41718.YahooMailNeo@web163804.mail.gq1.yahoo.com>
	<20120927070625.GV30886@ninja.nosyntax.net>
	<1348734222.70203.YahooMailNeo@web163801.mail.gq1.yahoo.com>
	<20120927092157.GA25092@ninja.nosyntax.net>
	<1348739542.56472.YahooMailNeo@web163804.mail.gq1.yahoo.com>
Message-ID: <20120927165917.GB25092@ninja.nosyntax.net>

For reference, here's the corrected code. Pasting it into a new R
session in a new directory should produce the results I think you 
want. Discussion of the rationale is below the code.

library(quantmod)
options(width=132)
getSymbols("INFY.BO", from="2008-01-01")
dat        = INFY.BO
dat$hminus = rep(0, NROW(dat))
dat$hminus = Hi(dat)-Cl(dat)
dat$smv    = rep(0, NROW(dat))
dat$smv    = filter(Cl(dat), rep(1/7,7), sides=1)
dat$lmv    = rep(0, NROW(dat))
dat$lmv    = filter(Cl(dat), rep(1/21,21), sides=1)
write.csv(dat, file="infyout.csv")
#you might want to save a zoo file instead. cf help(write.zoo)
head(dat,25)
             INFY.BO.Open INFY.BO.High INFY.BO.Low INFY.BO.Close INFY.BO.Volume INFY.BO.Adjusted hminus      smv      lmv
2008-01-01       1758.0      1777.15     1743.00       1749.70          51700          1639.38  27.45       NA       NA
2008-01-02       1780.0      1785.00     1715.35       1749.40          86700          1639.10  35.60       NA       NA
[...]

sean fallon <sf99167 at yahoo.com> [2012-09-27 02:51]:
> 
>library(quantmod)
>getSymbols("INFY.BO", from="2008-01-01")
>data<-INFY.BO
>#Have assigned INFY.BO to data

I'd use dat <- INFY.BO because data is a function. 
   
>#Now to add the column for high-close
>hcdif = Hi(data)-Cl(data)
>data$hminus<-hcdif  #this works fine
>datasmv=filter(Cl(data),rep(1/7,7), sides=1) 
>data$smv<-datasmv #this also works fine
>data[30:40, ] #displays the data file properly
>---------------------------------------------------
> 
>  INFY.BO.Open INFY.BO.High INFY.BO.Low INFY.BO.Close INFY.BO.Volume
> [1,]       1560.0       1598.0     1518.00       1558.75         375700
> [2,]       1570.0       1600.0     1536.10       1545.40         183100
[...]
>      INFY.BO.Adjusted hminus      smv
> [1,]          1460.47  39.25 1563.800
> [2,]          1447.96  54.60 1557.271
[...]
>----------------------------------------------------------

You must have variables hanging around from earlier work. I suggest creating a 
new directory and starting R there. I say this because here's what INFO.BO
and dat look like here:

> INFY.BO[30:31]
              INFY.BO.Open INFY.BO.High INFY.BO.Low INFY.BO.Close INFY.BO.Volume INFY.BO.Adjusted
2008-02-11       1560.0       1598.0     1518.00       1558.75         375700          1460.47
2008-02-12       1570.0       1600.0     1536.10       1545.40         183100          1447.96
> dat[30:31]
              INFY.BO.Open INFY.BO.High INFY.BO.Low INFY.BO.Close INFY.BO.Volume INFY.BO.Adjusted
2008-02-11       1560.0       1598.0     1518.00       1558.75         375700          1460.47
2008-02-12       1570.0       1600.0     1536.10       1545.40         183100          1447.96


Note that rows are indexed by dates:

> dat['2008-01-02/2008-01-07']
             INFY.BO.Open INFY.BO.High INFY.BO.Low INFY.BO.Close INFY.BO.Volume INFY.BO.Adjusted
2008-01-02       1780.0         1785     1715.35        1749.4          86700          1639.10
2008-01-03       1740.0         1750     1691.60        1713.0         214300          1605.00
2008-01-04       1711.3         1730     1680.00        1694.8         134400          1587.94
2008-01-07       1670.0         1681     1623.00        1638.1         307500          1534.82

There are 6 columns (the date is not a column, e.g., dat[,1] is the
open, not the date), and there are no hminus and smv columns. Since
there are no such columns, assignments to them will fail. You need to
create the desired columns before you can assign to them.

dat = INFY.BO
dat$hminus = rep(0, NROW(data))
dat$smv = rep(0, NROW(data))
dat$lmv = rep(0, NROW(data))

head(dat) will show you the new columns have been added with values of 0.

>write.csv(data,file="infyout.csv") #writes to CSV for future use.

If you want to save the added columns, the write is premature. Add the
columns you want and then save the file.
> 
>However, if I want to add the lmv, and if I place these two lines of code below
>"data[30:40, ] #displays the data file properly", then I face the problem
> 
>datalmv=filter(Cl(data),rep(1/21,21), sides=1) #this calculation is fine
>data$lmv<-datalmv

Now that the column exists, write to it in one line:

dat$lmv=filter(Cl(data),rep(1/21,21), sides=1)
   
>Warning message:
>In data$lmv <- datalmv : Coercing LHS to a list
> 
>This is where I am stuck.

There was no data$lmv column. Now there is.

HTH,

-rex
-- 
Computers run on smoke. If it leaks out, they stop running.


From jan at opentrades.nl  Thu Sep 27 19:02:47 2012
From: jan at opentrades.nl (OpenTrades)
Date: Thu, 27 Sep 2012 19:02:47 +0200
Subject: [R-SIG-Finance] quanstrat: stop trailing with variable stops
 size
In-Reply-To: <1E2E1159-24C7-4965-9DE4-DA21C439B0A3@mac.com>
References: <AA155081-4572-42FA-A6A3-04FC75B084F8@mac.com>
	<505D1BA1.7040400@braverock.com>
	<8FC313E7-3BA9-4797-A013-9572C7A23841@mac.com>
	<50638CB1.20909@opentrades.nl>
	<1E2E1159-24C7-4965-9DE4-DA21C439B0A3@mac.com>
Message-ID: <506486B7.20808@opentrades.nl>

Nice; thank you for the feedback Brian.

On 27-09-12 18:31, Brian Moretta wrote:
> Jan
>
> That seems to working now. Thanks for your help.
>
> Brian
>
> PS saw on one of the forums you may be interested in an example of Donchian breakouts for the package. Have coded one so if you are still interested let me know & I'll tidy it up & forward it.
>
> On 27 Sep 2012, at 00:16, OpenTrades wrote:
>
>> Hi Brian,
>>
>> We have now implemented support for using an indicator column in the mktdata object as threshold values. So in your source code, I suggest that you use:
>>> add.indicator(strat.st, name = "stopATR", arguments = list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=2) )
>> to add your ATR values, and then refer to these in the rule:
>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold='stopATR.ind.atr', tmult=FALSE, orderset='exit2'), type='risk',label='trailingexit')
>> Please note that you cannot pass a column of threshold values as a vector. You can also not pass the name of a function: use the indicator method instead (see above).
>>
>> Hope this helps,
>>
>> Jan Humme.
>>
>>
>>
>> On 25-09-12 16:10, Brian Moretta wrote:
>>> Thanks for the suggestion. Now I'm getting interesting differences.
>>>
>>> If I redefine my stopATR function (below) and use quote(mktdata$stopATR) as you suggest then I get an error message:
>>> Error in if (order.side == "long" && as.numeric(Lo(mktdataTimestamp)) <  :
>>>    missing value where TRUE/FALSE needed
>>> This followed by two identical warnings : In max(i) : no non-missing arguments to max; returning -Inf
>>> This is the same error as if I used quote(mktdata$stopATR.ind.atr) with my original function.
>>> stopATR <- function(HLC, n=14, maType, noATR=2){
>>> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)$atr
>>> 	colnames(stop.atr) <- c("stopATR")
>>> 	stop.atr
>>> }
>>>
>>> If I'm lazy & use my original stopATR function then using quote(mktdata$atr) in the add.rule runs without any error messages. However the trailing stop doesn't seem to affect anything. Even using an ATR multiple of .1 (not realistic but gives a threshold of 2-3 points on the GSPC data) gives exactly the same transactions as with the add.rule for the stop commented out. Have checked the data and some should be affected but such a tight stop.
>>> add.indicator(strat.st, name = "stopATR", arguments = list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=.1) )
>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=quote(mktdata$atr), tmult=FALSE, orderset='exit2'), type='risk',label='trailingexit')
>>>
>>> I've also tried the following definition for stopATR with quote(mktdata$atr) as in the second case and I get the same error as in the first example.
>>> stopATR <- function(HLC, n=14, maType, noATR=2){
>>> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)$atr
>>> }
>>>
>>> Not sure if I'm missing something obvious or if there is something else going on.
>>>
>>> Thanks
>>>
>>> Brian
>>>
>>> On 22 Sep 2012, at 03:00, Brian G. Peterson wrote:
>>>
>>>> why not label your stopATR indicator ouput and set the threshold to that?
>>>>
>>>> quote(mktdata$stopATR)
>>>>
>>>> ?
>>>>
>>>>
>>>> On 09/21/2012 02:07 PM, Brian Moretta wrote:
>>>>> Hi
>>>>>
>>>>> I've been trying to modify the MACD example with trailing stop so that it uses a 2ATR stop rather than a fixed value or proportion. Key seems to be the threshold value. Help says
>>>>>
>>>>> If threshold is not numeric or NULL it should be the character string describing a function that can calculate a threshold. Ideally this will be a column lookup on a non-path-dependent indicator calculated in advance.
>>>>>
>>>>> I keep getting errors with the threshold set to something that uses a vector whether text or not. The add.rule line is (full code at end)
>>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=stopvalue, tmult=FALSE, orderset='exit2'), type='risk',label='trailing exit')
>>>>>
>>>>> With stopvalue set to -20 it works fine. Tried stop.atr$atr, as a vector, inside quotes (help says character string) and inside quote() but to no avail. Tried similar for indicator mktdata$stopATR.ind.atr. Going through previous questions in this area I'm not sure if I'm just doing it wrong or pushing the limits of quanstrat's development, but any suggestions are welcome.
>>>>>
>>>>> Thanks
>>>>>
>>>>> Brian
>>>>>
>>>>> require(quantstrat)
>>>>> suppressWarnings(rm("order_book.macd",pos=.strategy))
>>>>> suppressWarnings(rm("account.macd","portfolio.macd",pos=.blotter))
>>>>> suppressWarnings(rm("account.st","portfolio.st","stock.str","stratMACD","initDate","initEq",'start_t','end_t'))
>>>>>
>>>>> #stock.str='AAPL' # what are we trying it on
>>>>> stock.str='GSPC'
>>>>> getSymbols("^GSPC", src='yahoo', index.class=c("POSIXt","POSIXct"), from='2007-01-01')
>>>>>
>>>>> stopATR <- function(HLC, n=14, maType, noATR=2){
>>>>> 	stop.atr <- -noATR * ATR(HLC=HLC, n=n, maType=maType)
>>>>> }
>>>>> stop.atr <- -2 * ATR(HLC(get(stock.str)), n=14, maType='SMA')
>>>>> stopvalue <- -20
>>>>>
>>>>> #MA parameters for MACD
>>>>> fastMA = 12
>>>>> slowMA = 26
>>>>> signalMA = 9
>>>>> maType="EMA"
>>>>>
>>>>> currency('USD')
>>>>> stock(stock.str,currency='USD',multiplier=1)
>>>>>
>>>>> initDate='2006-12-31'
>>>>> initEq=1000000
>>>>> portfolio.st='macd'
>>>>> account.st='macd'
>>>>>
>>>>> initPortf(portfolio.st,symbols=stock.str, initDate=initDate)
>>>>> initAcct(account.st,portfolios=portfolio.st, initDate=initDate)
>>>>> initOrders(portfolio=portfolio.st,initDate=initDate)
>>>>>
>>>>> strat.st<-portfolio.st
>>>>> # define the strategy
>>>>> strategy(strat.st, store=TRUE)
>>>>>
>>>>> #one indicator
>>>>> add.indicator(strat.st, name = "MACD", arguments = list(x=quote(Cl(mktdata))) )
>>>>> add.indicator(strat.st, name = "stopATR", arguments = list(HLC=quote(HLC(mktdata)), n=14, maType="SMA", noATR=2) )
>>>>>
>>>>> #two signals
>>>>> add.signal(strat.st,name="sigThreshold",arguments = list(column="signal",relationship="gt",threshold=0,cross=TRUE),label="signal.gt.zero")
>>>>> add.signal(strat.st,name="sigThreshold",arguments = list(column="signal",relationship="lt",threshold=0,cross=TRUE),label="signal.lt.zero")
>>>>>
>>>>> ####
>>>>> # add rules
>>>>>
>>>>> # entry
>>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty=100, ordertype='market', orderside='long', threshold=NULL),type='enter',label='enter',storefun=FALSE)
>>>>>
>>>>> #alternatives for risk stops:
>>>>> # alternately, use a trailing order, with 2ATR stop
>>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.gt.zero",sigval=TRUE, orderqty='all', ordertype='stoptrailing', orderside='long', threshold=stop.atr$atr, tmult=FALSE, orderset='exit2'), type='risk',label='trailingexit')
>>>>>
>>>>> # exit
>>>>> add.rule(strat.st,name='ruleSignal', arguments = list(sigcol="signal.lt.zero",sigval=TRUE, orderqty='all', ordertype='market', orderside='long', threshold=NULL,orderset='exit2'),type='exit',label='exit')
>>>>>
>>>>> #end rules
>>>>> ####
>>>>>
>>>>> start_t<-Sys.time()
>>>>> out<-try(applyStrategy(strat.st , portfolios=portfolio.st,parameters=list(nFast=fastMA, nSlow=slowMA, nSig=signalMA,maType=maType)))
>>>>> end_t<-Sys.time()
>>>>> print(end_t-start_t)
>>>>>
>>>>> start_t<-Sys.time()
>>>>> updatePortf(Portfolio=portfolio.st,Dates=paste('::',as.Date(Sys.time()),sep=''))
>>>>> end_t<-Sys.time()
>>>>> print("trade blotter portfolio update:")
>>>>> print(end_t-start_t)
>>>>>
>>>>> chart.Posn(Portfolio=portfolio.st,Symbol=stock.str)
>>>>> plot(add_MACD(fast=fastMA, slow=slowMA, signal=signalMA,maType="EMA"))
>>>>>
>>>>> 	[[alternative HTML version deleted]]
>>>>>
>>>>> _______________________________________________
>>>>> R-SIG-Finance at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>>> -- Also note that this is not the r-help list where general R questions should go.
>>>>>
>>>> -- 
>>>> Brian G. Peterson
>>>> http://braverock.com/brian/
>>>> Ph: 773-459-4973
>>>> IM: bgpbraverock
>>>>
>>>> _______________________________________________
>>>> R-SIG-Finance at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>>> -- Also note that this is not the r-help list where general R questions should go.
>>> 	[[alternative HTML version deleted]]
>>>
>>> _______________________________________________
>>> R-SIG-Finance at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>>> -- Subscriber-posting only. If you want to post, subscribe first.
>>> -- Also note that this is not the r-help list where general R questions should go.
>>>
>>
>> -- 
>> Jan Humme - OpenTrades
>>
>> WWW:     http://www.opentrades.nl
>> Email:   jan at opentrades.nl
>> Twitter: @opentrades
>>
>> _______________________________________________
>> R-SIG-Finance at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
>> -- Subscriber-posting only. If you want to post, subscribe first.
>> -- Also note that this is not the r-help list where general R questions should go.
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions should go.
>


-- 
Jan Humme - OpenTrades

WWW:     http://www.opentrades.nl
Email:   jan at opentrades.nl
Twitter: @opentrades


From bendavid at aya.yale.edu  Fri Sep 28 05:03:35 2012
From: bendavid at aya.yale.edu (R. Ben-David)
Date: Thu, 27 Sep 2012 22:03:35 -0500
Subject: [R-SIG-Finance] Intraday interval data from Bloomberg
In-Reply-To: <CAA3Wa=vQZLtTDJBv7Zmy_-g45ZfV-zGf6PykQODBM6-SJ5=QyQ@mail.gmail.com>
References: <004301cd9beb$d1599020$740cb060$@aya.yale.edu>
	<CAA3Wa=vQZLtTDJBv7Zmy_-g45ZfV-zGf6PykQODBM6-SJ5=QyQ@mail.gmail.com>
Message-ID: <00b801cd9d25$da806210$8f812630$@aya.yale.edu>

Hi John,

This is great.  Thank you.

Is it possible to pass the bid, ask and last for several instruments in a
single query, similar to the structure in "bdh"?  Also, is there a source
for the different option_names/option_values?

Thanks again,

Ram

-----Original Message-----
From: John Laing [mailto:john.laing at gmail.com] 
Sent: Wednesday, September 26, 2012 9:07 AM
To: R. Ben-David
Cc: r-sig-finance at r-project.org
Subject: Re: [R-SIG-Finance] Intraday interval data from Bloomberg

Ram,

This is straightforward using the bar function, though admittedly the
documentation is not clear on what values the field parameter can take.

Here are some better examples:
#############
require(Rbbg)
conn <- blpConnect()
ticker <- "GOOG US Equity"
start <- "2012-09-25 15:00:00.000"
end <- "2012-09-25 16:00:00.000"
interval <- "5"

bar(conn, ticker, "TRADE", start, end, interval) bar(conn, ticker, "BID",
start, end, interval) bar(conn, ticker, "ASK", start, end, interval)
##################

Hope that helps,
John

On Wed, Sep 26, 2012 at 9:35 AM, R. Ben-David <bendavid at aya.yale.edu> wrote:
> Greetings,
>
>
>
> I've downloaded the Rbbg package and am able to successfully execute 
> all the examples in the documentation.
>
>
>
> Does someone have an example with the specifics of downloading 
> intraday data (for example 5 minute close of the bid) they could share?
>
>
>
> Thank you,
>
>
>
> Ram
>
>
>
>
>         [[alternative HTML version deleted]]
>
> _______________________________________________
> R-SIG-Finance at r-project.org mailing list 
> https://stat.ethz.ch/mailman/listinfo/r-sig-finance
> -- Subscriber-posting only. If you want to post, subscribe first.
> -- Also note that this is not the r-help list where general R questions
should go.


From sf99167 at yahoo.com  Fri Sep 28 05:33:51 2012
From: sf99167 at yahoo.com (sean fallon)
Date: Thu, 27 Sep 2012 20:33:51 -0700 (PDT)
Subject: [R-SIG-Finance] Coercing LHS to a list
References: <1348723880.94476.YahooMailNeo@web163803.mail.gq1.yahoo.com>
	<20120927055029.GT30886@ninja.nosyntax.net>
	<1348725443.95915.YahooMailNeo@web163804.mail.gq1.yahoo.com>
	<1348727285.41718.YahooMailNeo@web163804.mail.gq1.yahoo.com>
	<20120927070625.GV30886@ninja.nosyntax.net>
	<1348734222.70203.YahooMailNeo@web163801.mail.gq1.yahoo.com>
	<20120927092157.GA25092@ninja.nosyntax.net>
	<1348739542.56472.YahooMailNeo@web163804.mail.gq1.yahoo.com>
	<20120927165917.GB25092@ninja.nosyntax.net> 
Message-ID: <1348803231.59847.YahooMailNeo@web163803.mail.gq1.yahoo.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120927/8182e847/attachment.pl>

From snes1982 at hotmail.com  Fri Sep 28 13:06:53 2012
From: snes1982 at hotmail.com (Serdar Neslihanoglu)
Date: Fri, 28 Sep 2012 14:06:53 +0300
Subject: [R-SIG-Finance] "Multivariate Garch" Package in r
Message-ID: <SNT125-W53F525FE9646552A2CDE1BC6820@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120928/266e79f3/attachment.pl>

From brian at braverock.com  Fri Sep 28 13:13:38 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 28 Sep 2012 06:13:38 -0500
Subject: [R-SIG-Finance] "Multivariate Garch" Package in r
In-Reply-To: <SNT125-W53F525FE9646552A2CDE1BC6820@phx.gbl>
References: <SNT125-W53F525FE9646552A2CDE1BC6820@phx.gbl>
Message-ID: <50658662.4090302@braverock.com>

On 09/28/2012 06:06 AM, Serdar Neslihanoglu wrote:
> I need to analyse my multivariate data in R. I am going to also combine with  GARCH model.
> Hence I need to "mgarch" packages in R.  I find mgarch package (surge-Forge), but it is not installed from R.
>
> Can you suggest any R package for "mgarch".
> Please let me know whether I can analyse my data set  in R.

you probably want packages rugarch (univariate) and rmgarch 
(multivariate) from the 'rgarch' project on R-Forge.

http://r-forge.r-project.org/projects/rgarch/

 From inside R:

install.packages("rugarch", repos="http://R-Forge.R-project.org")
install.packages("rmgarch", repos="http://R-Forge.R-project.org")

There is extensive documentation, and they are discussed frequently in 
the archives of this list, so please read the documentation and search 
the list archives for answers to your inevitable questions when you run 
into trouble.

Regards,

    - Brian

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


From snes1982 at hotmail.com  Fri Sep 28 17:40:58 2012
From: snes1982 at hotmail.com (Serdar Neslihanoglu)
Date: Fri, 28 Sep 2012 18:40:58 +0300
Subject: [R-SIG-Finance] Multi-factor GARCH model
Message-ID: <SNT125-W404F05A4332404DBE90D83C6820@phx.gbl>

An embedded and charset-unspecified text was scrubbed...
Name: not available
URL: <https://stat.ethz.ch/pipermail/r-sig-finance/attachments/20120928/0ba7888e/attachment.pl>

From brian at braverock.com  Fri Sep 28 17:58:42 2012
From: brian at braverock.com (Brian G. Peterson)
Date: Fri, 28 Sep 2012 10:58:42 -0500
Subject: [R-SIG-Finance] Multi-factor GARCH model
In-Reply-To: <SNT125-W404F05A4332404DBE90D83C6820@phx.gbl>
References: <SNT125-W404F05A4332404DBE90D83C6820@phx.gbl>
Message-ID: <5065C932.6040300@braverock.com>

On 09/28/2012 10:40 AM, Serdar Neslihanoglu wrote:
> Can you suggest any package for multi-factor GARCH ?

I already suggested rmgarch.  you'll need to be more specific if there's 
something I'm missing here.

-- 
Brian G. Peterson
http://braverock.com/brian/
Ph: 773-459-4973
IM: bgpbraverock


