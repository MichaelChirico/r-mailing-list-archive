From jgentry at jimmy.harvard.edu  Thu Apr  1 20:27:04 2004
From: jgentry at jimmy.harvard.edu (Jeff Gentry)
Date: Thu Apr  1 20:26:36 2004
Subject: [Rd] Installing Win32 packages w/ 'inst' dirs
Message-ID: <Pine.SOL.4.20.0404011322380.15655-100000@santiam.dfci.harvard.edu>

Hello ...

I noticed this last night when I updated R-devel, and then figured that I
had some 'make clean' or related issues and would look at it today.  This
morning I did a rsync of r-devel into a fresh directory and am now having
the same issue.

Basically, whenever R is trying to install a package with an 'inst'
directory in it (even in the base packages, thus this happens during the
build of R), I get the output (this example from the 'utils' package):

  installing inst files
FIND: Parameter format not correct
make[2]: *** [c:/r/R-1.9.0/library/utils/inst] Error 2
make[1]: *** [all] Error 2
make: *** [pkg-utils] Error 2
*** Installation of utils failed ***


Is anyone else seeing this?  It might be something from my own system, I
realize - although AFAIK nothing has changed on this machine and it wasn't
encountering this issue before (although admittedly the last time I built
R was about 2 weeks ago).

Any ideas?

Thanks
-J

From ripley at stats.ox.ac.uk  Thu Apr  1 20:40:31 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Apr  1 20:40:36 2004
Subject: [Rd] Installing Win32 packages w/ 'inst' dirs
In-Reply-To: <Pine.SOL.4.20.0404011322380.15655-100000@santiam.dfci.harvard.edu>
Message-ID: <Pine.LNX.4.44.0404011938230.2241-100000@gannet.stats>

I believe you are finding the Windows FIND.EXE not the find.exe in my set 
of tools.  Have you cross-checked the path list in the INSTALL file?

On Thu, 1 Apr 2004, Jeff Gentry wrote:

> Hello ...
> 
> I noticed this last night when I updated R-devel, and then figured that I
> had some 'make clean' or related issues and would look at it today.  This
> morning I did a rsync of r-devel into a fresh directory and am now having
> the same issue.
> 
> Basically, whenever R is trying to install a package with an 'inst'
> directory in it (even in the base packages, thus this happens during the
> build of R), I get the output (this example from the 'utils' package):
> 
>   installing inst files
> FIND: Parameter format not correct
> make[2]: *** [c:/r/R-1.9.0/library/utils/inst] Error 2
> make[1]: *** [all] Error 2
> make: *** [pkg-utils] Error 2
> *** Installation of utils failed ***
> 
> 
> Is anyone else seeing this?  It might be something from my own system, I
> realize - although AFAIK nothing has changed on this machine and it wasn't
> encountering this issue before (although admittedly the last time I built
> R was about 2 weeks ago).
> 
> Any ideas?
> 
> Thanks
> -J
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From jgentry at jimmy.harvard.edu  Thu Apr  1 20:48:39 2004
From: jgentry at jimmy.harvard.edu (Jeff Gentry)
Date: Thu Apr  1 20:48:14 2004
Subject: [Rd] Installing Win32 packages w/ 'inst' dirs
In-Reply-To: <Pine.LNX.4.44.0404011938230.2241-100000@gannet.stats>
Message-ID: <Pine.SOL.4.20.0404011347260.15655-100000@santiam.dfci.harvard.edu>

> I believe you are finding the Windows FIND.EXE not the find.exe in my set 
> of tools.  Have you cross-checked the path list in the INSTALL file?

That's exactly what it was.  The 'tools' were ahead of all of the other
software I have installed to build packages and such, but was after the
Win32 system directories.  I put the tools dir at the front and the
problem is solved.

Thanks
-J

From tlumley at u.washington.edu  Thu Apr  1 21:17:24 2004
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Thu Apr  1 21:17:30 2004
Subject: [Rd] change in behavior of <<- 
In-Reply-To: <Pine.A41.4.58.0403310630130.79460@homer34.u.washington.edu>
References: <Pine.GSO.4.58.0403301339090.17808@capecod.bwh.harvard.edu>
	<Pine.A41.4.58.0403310630130.79460@homer34.u.washington.edu>
Message-ID: <Pine.A41.4.58.0404011116330.86044@homer08.u.washington.edu>

On Wed, 31 Mar 2004, Thomas Lumley wrote:

> On Tue, 30 Mar 2004, Vincent Carey 525-2265 wrote:
>
> >
> > There has been a change to the behavior of <<-.
> > See the error thrown at the bottom of the transcript
> > below.  I don't believe this is an intended change.
>
> It's an unintended side-effect of an intended change.  Since we don't use
> <<- very much in base R it didn't get noticed.
>

The change has been reverted.  We'll have another try at fixing the
underlying problem after 1.9.0 is out.

	-thomas

From kjetil at entelnet.bo  Fri Apr  2 05:59:26 2004
From: kjetil at entelnet.bo (kjetil@entelnet.bo)
Date: Fri Apr  2 05:59:36 2004
Subject: [Rd] R1,9,0beta: strange summary of Date object
Message-ID: <406CACDE.4465.317BEF3@localhost>

Hola!

Any explanation of the following:

> summary(as.Date(rep(NA,20)))
        Min.      1st Qu.       Median         Mean      3rd Qu.      
   Max. 
          NA           NA           NA           NA           NA      
     NA 
        NA's 
"1970-01-21" 

Where does this 1970 date come from?

Kjetil Halvorsen

From marantz at cs.rutgers.edu  Fri Apr  2 07:02:25 2004
From: marantz at cs.rutgers.edu (Roy Marantz)
Date: Fri Apr  2 07:02:28 2004
Subject: [Rd] I am out
Message-ID: <200404020502.i3252PY28518@aramis.rutgers.edu>

I'm out of the office till around August 28th.  I'll read your mail
regarding Mail Delivery (failure marantz@red.rutgers.edu) when I return.  If you have something urgent that
would need me, try contacting:

     who                        why
  ------------             ------------
  help@nbcs             general question concenring NBCS
  help@machine          general questions concerning the specific machine
  operator@machine      problems needing immediate action
  hostmaster@rutgers    requests/questions concerning host names/IP address
  operator@cs           LCSR related questions (I'm not part of LCSR anymore)

If you need to contact someone by phone try:
        (business hours)                infocenter 732-445-2296
        (other times)                   operator 732-445-2293

or       John Wiggins (my boss) 732-445-7173

Roy

From ripley at stats.ox.ac.uk  Fri Apr  2 07:05:49 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr  2 07:06:02 2004
Subject: [Rd] R1,9,0beta: strange summary of Date object
In-Reply-To: <406CACDE.4465.317BEF3@localhost>
Message-ID: <Pine.LNX.4.44.0404020603590.3322-100000@gannet.stats>

On Thu, 1 Apr 2004 kjetil@entelnet.bo wrote:

> Hola!
> 
> Any explanation of the following:
> 
> > summary(as.Date(rep(NA,20)))
>         Min.      1st Qu.       Median         Mean      3rd Qu.      
>    Max. 
>           NA           NA           NA           NA           NA      
>      NA 
>         NA's 
> "1970-01-21" 
> 
> Where does this 1970 date come from?

By coercion.  Same thing happens with POSIXct.  It could be improved, but 
seems to have caused no real problems in the POSIXct case.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From comet at ewha.ac.kr  Fri Apr  2 07:58:58 2004
From: comet at ewha.ac.kr (comet@ewha.ac.kr)
Date: Fri Apr  2 07:59:02 2004
Subject: [Rd] social network bug! (PR#6729)
Message-ID: <20040402055858.6ADC0FB93@slim.kubism.ku.dk>

Full_Name: Yoon, hye sung
Version: 1.8.1
OS: window
Submission from: (NULL) (203.255.177.155)


> library(sna)
Warning message: 
package sna was built under R version 1.9.0 
> 

What's this message mean?

From Torsten.Hothorn at rzmail.uni-erlangen.de  Fri Apr  2 08:39:59 2004
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Fri Apr  2 08:40:14 2004
Subject: [Rd] Memory Protection & calling C-fun from C
Message-ID: <Pine.LNX.4.51.0404020838030.8426@artemis.imbe.med.uni-erlangen.de>


Good morning!

The descriptions of memory protection all assume that one
is calling a C-function directly from R. I'm not sure if my
understanding of calling a C-function from another C-function
is correct:

Suppose there are two functions

SEXP bar(SEXP y) {
  SEXP b;
  PROTECT(b = allocVector(...));
     ... computations on b
  UNPROTECT(1);
  return b
}

and

SEXP foo(SEXP x) {
  SEXP a;

  PROTECT(a = bar(x));  /* use bar to do lowlevel computations */
    ... futher computations on a
  UNPROTECT(1);
  return a;
}

Of course,

R> .Call("bar", x)

is safe but is

R> .Call("foo", x)

too? May it happen that the object `b' points to is destroyed before it is
protected by `PROTECT(a = bar(x))'?

I searched for examples of that in R and some packages but did only find
some where `bar' is defined by

   double* bar(double *y)

and the problems do not occur. Anyway, I want to be able to call both
`foo' and `bar' directly from R and C-level (say for the sake of writing
tests in R for the lowlevel functions).

Any clarification is very welcome && Thanks in advance,

Torsten

From ripley at stats.ox.ac.uk  Fri Apr  2 09:01:32 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr  2 09:01:35 2004
Subject: [Rd] Memory Protection & calling C-fun from C
In-Reply-To: <Pine.LNX.4.51.0404020838030.8426@artemis.imbe.med.uni-erlangen.de>
Message-ID: <Pine.LNX.4.44.0404020754430.3668-100000@gannet.stats>

Torsten,

Of course, R itself is a C program so the principles apply to interpreted 
calls too, with your code in bar returning control to do_dotcall in your 
first example.

There can be no R memory allocation between returning from bar and 
assigning to a in foo, and it is memory allocation (and invoked gc's) one 
is protecting against.

Brian

On Fri, 2 Apr 2004, Torsten Hothorn wrote:

> 
> Good morning!
> 
> The descriptions of memory protection all assume that one
> is calling a C-function directly from R. I'm not sure if my
> understanding of calling a C-function from another C-function
> is correct:
> 
> Suppose there are two functions
> 
> SEXP bar(SEXP y) {
>   SEXP b;
>   PROTECT(b = allocVector(...));
>      ... computations on b
>   UNPROTECT(1);
>   return b
> }
> 
> and
> 
> SEXP foo(SEXP x) {
>   SEXP a;
> 
>   PROTECT(a = bar(x));  /* use bar to do lowlevel computations */
>     ... futher computations on a
>   UNPROTECT(1);
>   return a;
> }
> 
> Of course,
> 
> R> .Call("bar", x)
> 
> is safe but is
> 
> R> .Call("foo", x)
> 
> too? May it happen that the object `b' points to is destroyed before it is
> protected by `PROTECT(a = bar(x))'?
> 
> I searched for examples of that in R and some packages but did only find
> some where `bar' is defined by
> 
>    double* bar(double *y)
> 
> and the problems do not occur. Anyway, I want to be able to call both
> `foo' and `bar' directly from R and C-level (say for the sake of writing
> tests in R for the lowlevel functions).
> 
> Any clarification is very welcome && Thanks in advance,

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From hb at maths.lth.se  Fri Apr  2 09:01:27 2004
From: hb at maths.lth.se (Henrik Bengtsson)
Date: Fri Apr  2 09:01:40 2004
Subject: [Rd] social network bug! (PR#6729)
In-Reply-To: <20040402055858.6ADC0FB93@slim.kubism.ku.dk>
Message-ID: <003e01c41880$516ff9f0$e502eb82@maths.lth.se>

Hi. It means that the package your loading was build using a newer
version of R (v 1.9.0) than the version you are using (v1.8.1). This
means that that package might rely on new or modified features (and/or
other packages also build on R v1.9.0). For this reason there is a
risk that the package does not work as expected. This does not say
that it might not work perfectly fine anyway, but you should be aware
of it. Hence the warning (and not an error).

BTW, this is not a bug. Next time, please send these type of questions
to the r-help list.

Cheers

Henrik Bengtsson
Lund University

> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch 
> [mailto:r-devel-bounces@stat.math.ethz.ch] On Behalf Of 
> comet@ewha.ac.kr
> Sent: den 2 april 2004 07:59
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] social network bug! (PR#6729)
> 
> 
> Full_Name: Yoon, hye sung
> Version: 1.8.1
> OS: window
> Submission from: (NULL) (203.255.177.155)
> 
> 
> > library(sna)
> Warning message: 
> package sna was built under R version 1.9.0 
> > 
> 
> What's this message mean?
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list 
> https://www.stat.math.ethz.ch/mailma> n/listinfo/r-devel
> 
>

From ripley at stats.ox.ac.uk  Fri Apr  2 09:13:43 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr  2 09:13:50 2004
Subject: [Rd] social network bug! (PR#6729)
In-Reply-To: <003e01c41880$516ff9f0$e502eb82@maths.lth.se>
Message-ID: <Pine.LNX.4.44.0404020812210.3736-100000@gannet.stats>

On Fri, 2 Apr 2004, Henrik Bengtsson wrote:

> Hi. It means that the package your loading was build using a newer
> version of R (v 1.9.0) than the version you are using (v1.8.1). This
> means that that package might rely on new or modified features (and/or
> other packages also build on R v1.9.0). For this reason there is a

No, it just means it was built under a pre-release of R 1.9.0.  If it 
needed features of 1.9.0 it would say so and refuse to load.

> risk that the package does not work as expected. This does not say
> that it might not work perfectly fine anyway, but you should be aware
> of it. Hence the warning (and not an error).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Fri Apr  2 09:18:13 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr  2 09:18:19 2004
Subject: [Rd] social network bug! (PR#6729)
In-Reply-To: <20040402055858.6ADC0FB93@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404020741030.3622-100000@gannet.stats>

Have you read the FAQ?: R-bugs is for bugs, not help questions.

On Fri, 2 Apr 2004 comet@ewha.ac.kr wrote:

> Full_Name: Yoon, hye sung
> Version: 1.8.1
> OS: window
      ^^^^^^
I have never heard of that OS!

> Submission from: (NULL) (203.255.177.155)
> 
> 
> > library(sna)
> Warning message: 
> package sna was built under R version 1.9.0 
> > 
> 
> What's this message mean?

Probable user error, in exactly the way it says.  Which word do you not
understand?

*You* installed a version of the package sna built under a pre-release of
R 1.9.0.  Packages in R are not necessarily binary compatible with earlier
releases.  Where did you get this installation from?  The Windows (sic)  
version of package sna on CRAN was built under 1.8.0, unless you manually
got the builds for 1.9.x from the bin/windows/contrib/1.9 area on CRAN.

I suggest you remove the package sna and reinstall it as described in the 
rw-FAQ.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From etrust at pixie.udw.ac.za  Fri Apr  2 11:02:44 2004
From: etrust at pixie.udw.ac.za (etrust@pixie.udw.ac.za)
Date: Fri Apr  2 11:02:51 2004
Subject: [Rd] Your e-mail could not be delivered (PR#6730)
Message-ID: <20040402090244.9CC8310435@slim.kubism.ku.dk>

Content Inspecion SMTPMAIL could not deliver the e-mail below because of unreachable host
Please check the recipients e-mail address before you try again.

Received: from Unknown (61.113.174.142) by ETRUST-SMTP (10.3.0.22)
From: r-bugs@r-project.org
To: aikins@pixie.udw.ac.za
Subject: Mail Delivery System (aikins@pixie.udw.ac.za)
Date: Thu, 1 Apr 2004 00:56:02 -0800
MIME-Version: 1.0
Content-Type: multipart/mixed;
	boundary="----=_NextPart_000_0016----=_NextPart_000_0016"
X-Priority: 1
X-MSMail-Priority: High

This is a multi-part message in MIME format.

------=_NextPart_000_0016----=_NextPart_000_0016
Content-Type: text/plain;
	charset="Windows-1252"
Content-Transfer-Encoding: 7bit


Delivery Failure - Invalid mail specification 

------------- failed message -------------
y:.wUQ|?bZN|KzYl61q&ES*F9E|?.z<m|D<n8-f,LT0
~iuQ;IUVCDH04)xtf5Vgx?hzDZI;EpjRw2Y-?mlJhxWU
>iaITEoR>qAmO'WrQ?gJJ-MEwY|4mI#0Q>K)PTi&<_I!Z??
+Arj6iEJHmr5QF8'K3QaFpQ;tFl#xSM<XRu.BGsa9j1
F

Message has been sent as a binary attachment.


------=_NextPart_000_0016----=_NextPart_000_0016
Content-Type: text/plain; name="BlockRpt.txt"
Content-Transfer-Encoding: 7bit

Dear User,

eTrust Antivirus Gateway on ETRUST-SMTP
has found an invalid attachment in this e-mail.

Invalid attachment(s):

	data1758.pif


Action taken:

	The attachment was replaced with an Block Report.
------=_NextPart_000_0016----=_NextPart_000_0016--

From Torsten.Hothorn at rzmail.uni-erlangen.de  Fri Apr  2 11:23:26 2004
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Fri Apr  2 11:26:24 2004
Subject: [Rd] `extends()'at C-level?
Message-ID: <Pine.LNX.4.51.0404021120360.15532@artemis.imbe.med.uni-erlangen.de>



One can check easily if an object is of class "foo" via

   strcmp(CHAR(asChar(GET_CLASS(obj))), "foo")

and I wonder if there is high-level functionality to check
if `obj' extends a class?

Best,

Torsten

From pgilbert at bank-banque-canada.ca  Fri Apr  2 16:25:28 2004
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri Apr  2 16:27:27 2004
Subject: [Rd] beta_latest links
Message-ID: <406D77D8.5030205@bank-banque-canada.ca>

Something seems to be wrong with the beta_latest links on cran.at and 
cran.us.  The betas themselves are there (by date) but the link is not 
right.

Paul Gilbert

From andy_liaw at merck.com  Fri Apr  2 18:16:33 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Fri Apr  2 18:17:01 2004
Subject: [Rd] problem compiling R-1.9.0beta with PGI compilers on amd64
Message-ID: <3A822319EB35174CA3714066D590DCD504AF7B01@usrymx25.merck.com>

Dear R-devel,

I'm trying to compile R-1.9.0beta (2004-03-31) with the PGI compilers
(15-day free evaluation:  after the 15 days the binaries will stop working).
I'm running into some problems, that I hope some can offer pointers.

1. After configure, the FLIBS include /usr/local/lib' --- note the extra '.
I had to manually delete it in a couple of places.

In a previous thread on compiling R with ifc/icc, Saikat wrote:
===
The problem is in the AC_F77_LIBRARY_LDFLAGS macro. It guesses the linker
flags by passing a verbose option (-v for ifc) to the compiler. For ifc this
produces a multiline output, one line continued to the next by a \
character. It also contains some " characters. These together produces the
wrong results. We can fix this by removing all \ and " from the variable
ac_f77_v_output in that macro. I am not sure if this breaks anything in
other compilers.
===
Seems like this is related.

2. `make' ran fine, until I get:
make[3]: Leaving directory `/u1/scratch/R-1.9.0/src/library/ts'
installing parsed NAMESPACE files
make[2]: *** [R] Error 139
make[2]: Leaving directory `/u1/scratch/R-1.9.0/src/library'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/u1/scratch/R-1.9.0/src'
make: *** [R] Error 1

Does anyone know what might be causing this error?

Also, if I then run `bin/R', I just get a segfault.  Is this expected?  (I
thought not, since it's at the package building stage...)

TIA!

Andy
--
Andy Liaw, PhD
Biometrics Research      PO Box 2000, RY33-300     
Merck Research Labs           Rahway, NJ 07065
mailto:andy_liaw@merck.com        732-594-0820




------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments,...{{dropped}}

From ripley at stats.ox.ac.uk  Fri Apr  2 18:26:19 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr  2 18:26:22 2004
Subject: [Rd] problem compiling R-1.9.0beta with PGI compilers on amd64
In-Reply-To: <3A822319EB35174CA3714066D590DCD504AF7B01@usrymx25.merck.com>
Message-ID: <Pine.LNX.4.44.0404021725010.6724-100000@gannet.stats>

On Fri, 2 Apr 2004, Liaw, Andy wrote:

> Dear R-devel,
> 
> I'm trying to compile R-1.9.0beta (2004-03-31) with the PGI compilers
> (15-day free evaluation:  after the 15 days the binaries will stop working).
> I'm running into some problems, that I hope some can offer pointers.
> 
> 1. After configure, the FLIBS include /usr/local/lib' --- note the extra '.
> I had to manually delete it in a couple of places.
> 
> In a previous thread on compiling R with ifc/icc, Saikat wrote:
> ===
> The problem is in the AC_F77_LIBRARY_LDFLAGS macro. It guesses the linker
> flags by passing a verbose option (-v for ifc) to the compiler. For ifc this
> produces a multiline output, one line continued to the next by a \
> character. It also contains some " characters. These together produces the
> wrong results. We can fix this by removing all \ and " from the variable
> ac_f77_v_output in that macro. I am not sure if this breaks anything in
> other compilers.
> ===
> Seems like this is related.
> 
> 2. `make' ran fine, until I get:
> make[3]: Leaving directory `/u1/scratch/R-1.9.0/src/library/ts'
> installing parsed NAMESPACE files
> make[2]: *** [R] Error 139
> make[2]: Leaving directory `/u1/scratch/R-1.9.0/src/library'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory `/u1/scratch/R-1.9.0/src'
> make: *** [R] Error 1
> 
> Does anyone know what might be causing this error?
> 
> Also, if I then run `bin/R', I just get a segfault.  Is this expected?  (I
> thought not, since it's at the package building stage...)

2. is trying to run R, so that is the cause.  You need to find out why R 
segfaults.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From lanny at cisco.com  Fri Apr  2 19:24:39 2004
From: lanny at cisco.com (lanny@cisco.com)
Date: Fri Apr  2 19:24:43 2004
Subject: [Rd] Documentation error as of 1.8.1 (PR#6731)
Message-ID: <20040402172439.2A1D310474@slim.kubism.ku.dk>

Full_Name: Lanny Ripple
Version: 1.8.1
OS: Solaris 2.8
Submission from: (NULL) (128.107.253.42)


The "Writing R Extensions" manual states that an INDEX file will be created with
Rdindex if the file is not provided.  The NEWS document indicates that Rdindex
was removed in version 1.8.0 (UTILITIES section).

From ripley at stats.ox.ac.uk  Fri Apr  2 20:14:17 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr  2 20:14:28 2004
Subject: [Rd] Incorrect bug report (PR#6731)
In-Reply-To: <20040402172439.2A1D310474@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404021906480.7007-100000@gannet.stats>

What the manual actually says is

    (using Rdindex() from package tools) 

whereas the NEWS file says

    o	R CMD Rdindex has been removed.

which is not the same thing at all.  Rdindex was a script and Rdindex()  
is an R function.

Please do read very carefully the section in the R FAQ about reporting 
BUGS.


On Fri, 2 Apr 2004 lanny@cisco.com wrote:

> Full_Name: Lanny Ripple
> Version: 1.8.1
> OS: Solaris 2.8
> Submission from: (NULL) (128.107.253.42)
> 
> 
> The "Writing R Extensions" manual states that an INDEX file will be
> created with Rdindex if the file is not provided.  The NEWS document
> indicates that Rdindex was removed in version 1.8.0 (UTILITIES section).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Sat Apr  3 02:17:09 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sat Apr  3 02:16:58 2004
Subject: [Rd] beta_latest links
In-Reply-To: <406D77D8.5030205@bank-banque-canada.ca>
References: <406D77D8.5030205@bank-banque-canada.ca>
Message-ID: <x2ptapkj96.fsf@biostat.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> Something seems to be wrong with the beta_latest links on cran.at and
> cran.us.  The betas themselves are there (by date) but the link is not
> right.

Hmm. This has to do with the fact that the dir is now rsynced to CRAN
rather than mirrored, so the current link (which is correct for the
build machine) doesn't work:

-rw-r--r--    1 pd       pd        9495783 Apr  2 05:11
 R-1.9.0beta_2004-04-02.tar.gz
lrwxrwxrwx    1 pd       pd             54 Apr  2 05:23
 R-1.9.0beta_latest.tar.gz -> /var/rsync/cran/src/base/R-1.9.0beta_2004-04-02.tar.gz

I suspect that wants to be a relative link. Rsync experts?

        -pd       

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From bates at stat.wisc.edu  Sat Apr  3 02:20:18 2004
From: bates at stat.wisc.edu (Douglas Bates)
Date: Sat Apr  3 02:20:21 2004
Subject: [Rd] beta_latest links
In-Reply-To: <x2ptapkj96.fsf@biostat.ku.dk>
References: <406D77D8.5030205@bank-banque-canada.ca>
	<x2ptapkj96.fsf@biostat.ku.dk>
Message-ID: <6rllldvrnh.fsf@bates4.stat.wisc.edu>

Peter Dalgaard <p.dalgaard@biostat.ku.dk> writes:

> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
> 
> > Something seems to be wrong with the beta_latest links on cran.at and
> > cran.us.  The betas themselves are there (by date) but the link is not
> > right.
> 
> Hmm. This has to do with the fact that the dir is now rsynced to CRAN
> rather than mirrored, so the current link (which is correct for the
> build machine) doesn't work:
> 
> -rw-r--r--    1 pd       pd        9495783 Apr  2 05:11
>  R-1.9.0beta_2004-04-02.tar.gz
> lrwxrwxrwx    1 pd       pd             54 Apr  2 05:23
>  R-1.9.0beta_latest.tar.gz -> /var/rsync/cran/src/base/R-1.9.0beta_2004-04-02.tar.gz
> 
> I suspect that wants to be a relative link. Rsync experts?

Can you change your install script on cvs.r-project.org to use a
relative path name in the symbolic link instead of an absolute path
name?

From p.dalgaard at biostat.ku.dk  Sat Apr  3 02:31:53 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sat Apr  3 02:31:44 2004
Subject: [Rd] beta_latest links
In-Reply-To: <6rllldvrnh.fsf@bates4.stat.wisc.edu>
References: <406D77D8.5030205@bank-banque-canada.ca>
	<x2ptapkj96.fsf@biostat.ku.dk> <6rllldvrnh.fsf@bates4.stat.wisc.edu>
Message-ID: <x2llldkikm.fsf@biostat.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> > I suspect that wants to be a relative link. Rsync experts?
> 
> Can you change your install script on cvs.r-project.org to use a
> relative path name in the symbolic link instead of an absolute path
> name?

Done, I think. Could you check whether it rsync's better with the new
link? 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From bates at stat.wisc.edu  Sat Apr  3 02:42:38 2004
From: bates at stat.wisc.edu (Douglas Bates)
Date: Sat Apr  3 02:42:37 2004
Subject: [Rd] beta_latest links
In-Reply-To: <x2llldkikm.fsf@biostat.ku.dk>
References: <406D77D8.5030205@bank-banque-canada.ca>
	<x2ptapkj96.fsf@biostat.ku.dk> <6rllldvrnh.fsf@bates4.stat.wisc.edu>
	<x2llldkikm.fsf@biostat.ku.dk>
Message-ID: <6rhdw1vqm9.fsf@bates4.stat.wisc.edu>

Peter Dalgaard <p.dalgaard@biostat.ku.dk> writes:

> Douglas Bates <bates@stat.wisc.edu> writes:
> 
> > > I suspect that wants to be a relative link. Rsync experts?
> > 
> > Can you change your install script on cvs.r-project.org to use a
> > relative path name in the symbolic link instead of an absolute path
> > name?
> 
> Done, I think. Could you check whether it rsync's better with the new
> link? 

Works for me.  Could one of the CRAN maintainers please make a point
to check it on cran.r-project.org after the next mirror run?

From andy_liaw at merck.com  Sat Apr  3 02:43:47 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Sat Apr  3 06:33:01 2004
Subject: [Rd] problem compiling R-1.9.0beta with PGI compilers on
 amd6 4
Message-ID: <3A822319EB35174CA3714066D590DCD504AF7B0D@usrymx25.merck.com>

> From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk] 
> 
> On Fri, 2 Apr 2004, Liaw, Andy wrote:
> 
> > Dear R-devel,
> > 
> > I'm trying to compile R-1.9.0beta (2004-03-31) with the PGI 
> compilers
> > (15-day free evaluation:  after the 15 days the binaries 
> will stop working).
> > I'm running into some problems, that I hope some can offer pointers.
> > 
> > 1. After configure, the FLIBS include /usr/local/lib' --- 
> note the extra '.
> > I had to manually delete it in a couple of places.
> > 
> > In a previous thread on compiling R with ifc/icc, Saikat wrote:
> > ===
> > The problem is in the AC_F77_LIBRARY_LDFLAGS macro. It 
> guesses the linker
> > flags by passing a verbose option (-v for ifc) to the 
> compiler. For ifc this
> > produces a multiline output, one line continued to the next by a \
> > character. It also contains some " characters. These 
> together produces the
> > wrong results. We can fix this by removing all \ and " from 
> the variable
> > ac_f77_v_output in that macro. I am not sure if this breaks 
> anything in
> > other compilers.
> > ===
> > Seems like this is related.
> > 
> > 2. `make' ran fine, until I get:
> > make[3]: Leaving directory `/u1/scratch/R-1.9.0/src/library/ts'
> > installing parsed NAMESPACE files
> > make[2]: *** [R] Error 139
> > make[2]: Leaving directory `/u1/scratch/R-1.9.0/src/library'
> > make[1]: *** [R] Error 1
> > make[1]: Leaving directory `/u1/scratch/R-1.9.0/src'
> > make: *** [R] Error 1
> > 
> > Does anyone know what might be causing this error?
> > 
> > Also, if I then run `bin/R', I just get a segfault.  Is 
> this expected?  (I
> > thought not, since it's at the package building stage...)
> 
> 2. is trying to run R, so that is the cause.  You need to 
> find out why R 
> segfaults.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

I have a bit of success.  I can build R with pgf77/gcc/g++, and it passes
make check.  Will keep trying with pgcc/pgCC, and maybe compare timing,
if/when I find the time.

Best,
Andy


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments,...{{dropped}}

From andy_liaw at merck.com  Sat Apr  3 04:59:03 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Sat Apr  3 06:33:02 2004
Subject: [Rd] make check-all does not find DESCRIPTION for VR packages
Message-ID: <3A822319EB35174CA3714066D590DCD504AF7B0E@usrymx25.merck.com>

When running make check-all on R-1.9.0beta (2004-03-31) built with
pgf77/gcc/g++ on the Opteron (running SLES8), I get four warnings about not
finding the DESCRIPTION files for the packages in the VR bundle; e.g.,

cannot open file `/u1/scratch/R-1.9.0/tests/Packages/VR/spatial/DESCRIPTION'

Error in tools:::.checkPackageDepends(dir =
"/u1/scratch/R-1.9.0/tests/Packages/VR/spatial") : 
        package directory '/u1/scratch/R-1.9.0/tests/Packages/VR/spatial'
has no valid DESCRIPTION file
Execution halted
See the information on DESCRIPTION files in section 'Creating R packages'
of the 'Writing R Extensions' manual.

Has anyone seen the same, or is it just me?

[With tar ztvf src/library/Recommended/VR.tgz, I do see DESCRIPTION.in in
the packages, but no DESCRIPTION.]

Best,
Andy

Andy Liaw, PhD
Biometrics Research      PO Box 2000, RY33-300     
Merck Research Labs           Rahway, NJ 07065
mailto:andy_liaw@merck.com        732-594-0820

From ripley at stats.ox.ac.uk  Sat Apr  3 07:22:53 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Apr  3 07:22:56 2004
Subject: [Rd] make check-all does not find DESCRIPTION for VR packages
In-Reply-To: <3A822319EB35174CA3714066D590DCD504AF7B0E@usrymx25.merck.com>
Message-ID: <Pine.LNX.4.44.0404030619360.7853-100000@gannet.stats>

Yes, I've seen this (and when checking dse).  It does not happen with R 
CMD check VR (or dse) and is a recent change.   It is being a bit elusive 
....

On Fri, 2 Apr 2004, Liaw, Andy wrote:

> When running make check-all on R-1.9.0beta (2004-03-31) built with
> pgf77/gcc/g++ on the Opteron (running SLES8), I get four warnings about not
> finding the DESCRIPTION files for the packages in the VR bundle; e.g.,
> 
> cannot open file `/u1/scratch/R-1.9.0/tests/Packages/VR/spatial/DESCRIPTION'
> 
> Error in tools:::.checkPackageDepends(dir =
> "/u1/scratch/R-1.9.0/tests/Packages/VR/spatial") : 
>         package directory '/u1/scratch/R-1.9.0/tests/Packages/VR/spatial'
> has no valid DESCRIPTION file
> Execution halted
> See the information on DESCRIPTION files in section 'Creating R packages'
> of the 'Writing R Extensions' manual.
> 
> Has anyone seen the same, or is it just me?
> 
> [With tar ztvf src/library/Recommended/VR.tgz, I do see DESCRIPTION.in in
> the packages, but no DESCRIPTION.]

And that is correct.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Sat Apr  3 09:21:39 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Apr  3 09:21:43 2004
Subject: [Rd] make check-all does not find DESCRIPTION for VR packages
In-Reply-To: <Pine.LNX.4.44.0404030619360.7853-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0404030816420.12049-100000@gannet.stats>

It only happens with --install=skip, as a standard install does create 
DESCRIPTION files in the sources of the packages of a bundle.  And 
check-Packages-Recommended does use --install=skip ...

Fix committed.

On Sat, 3 Apr 2004, Prof Brian Ripley wrote:

> Yes, I've seen this (and when checking dse).  It does not happen with R 
> CMD check VR (or dse) and is a recent change.   It is being a bit elusive 
> ....
> 
> On Fri, 2 Apr 2004, Liaw, Andy wrote:
> 
> > When running make check-all on R-1.9.0beta (2004-03-31) built with
> > pgf77/gcc/g++ on the Opteron (running SLES8), I get four warnings about not
> > finding the DESCRIPTION files for the packages in the VR bundle; e.g.,
> > 
> > cannot open file `/u1/scratch/R-1.9.0/tests/Packages/VR/spatial/DESCRIPTION'
> > 
> > Error in tools:::.checkPackageDepends(dir =
> > "/u1/scratch/R-1.9.0/tests/Packages/VR/spatial") : 
> >         package directory '/u1/scratch/R-1.9.0/tests/Packages/VR/spatial'
> > has no valid DESCRIPTION file
> > Execution halted
> > See the information on DESCRIPTION files in section 'Creating R packages'
> > of the 'Writing R Extensions' manual.
> > 
> > Has anyone seen the same, or is it just me?
> > 
> > [With tar ztvf src/library/Recommended/VR.tgz, I do see DESCRIPTION.in in
> > the packages, but no DESCRIPTION.]
> 
> And that is correct.
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From maechler at stat.math.ethz.ch  Sat Apr  3 12:15:46 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Sat Apr  3 12:15:47 2004
Subject: [Rd] beta_latest links
In-Reply-To: <6rhdw1vqm9.fsf@bates4.stat.wisc.edu>
References: <406D77D8.5030205@bank-banque-canada.ca>
	<x2ptapkj96.fsf@biostat.ku.dk>
	<6rllldvrnh.fsf@bates4.stat.wisc.edu>
	<x2llldkikm.fsf@biostat.ku.dk>
	<6rhdw1vqm9.fsf@bates4.stat.wisc.edu>
Message-ID: <16494.36562.334309.104928@gargle.gargle.HOWL>

>>>>> "DougB" == Douglas Bates <bates@stat.wisc.edu>
>>>>>     on 02 Apr 2004 18:42:38 -0600 writes:

    DougB> Peter Dalgaard <p.dalgaard@biostat.ku.dk> writes:
    >> Douglas Bates <bates@stat.wisc.edu> writes:
    >> 
    >> > > I suspect that wants to be a relative link. Rsync experts?
    >> > 
    >> > Can you change your install script on cvs.r-project.org to use a
    >> > relative path name in the symbolic link instead of an absolute path
    >> > name?
    >> 
    >> Done, I think. Could you check whether it rsync's better with the new
    >> link? 

    DougB> Works for me.  Could one of the CRAN maintainers please make a point
    DougB> to check it on cran.r-project.org after the next mirror run?

Just a mere mirror maintainer...
but the beta_latest link is now okay.

Martin Maechler

From w.huber at dkfz-heidelberg.de  Sat Apr  3 20:31:23 2004
From: w.huber at dkfz-heidelberg.de (Wolfgang Huber)
Date: Sat Apr  3 20:31:52 2004
Subject: [Rd] optim-Bug (PR#6720)
In-Reply-To: <20040330172140.8397D10432@slim.kubism.ku.dk>
References: <20040330172140.8397D10432@slim.kubism.ku.dk>
Message-ID: <406F02FB.8070107@dkfz-heidelberg.de>

Hi Hans,

I've been able to reproduce your error (version see below). The 
non-deterministic behavior is indeed worrying.

This is not directly related to your bug report, but constrained 
optimization can be fickle, especially if the objective function is 
singular somewhere close to the boundaries. In your case, you may be 
able to circumvent some problems by transforming q to a new variable eq, 
eg.

eq = exp(q)/(1+exp(q)),

do the unbounded optimization, and backtransform. It may also be 
worthwhile to provide the gradient to optim.

Best regards
-------------------------------------
Wolfgang Huber
Division of Molecular Genome Analysis
German Cancer Research Center
Heidelberg, Germany
Phone: +49 6221 424709
Fax:   +49 6221 42524709
Http:  www.dkfz.de/abt0840/whuber
-------------------------------------


 > version
          _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status   alpha
major    1
minor    9.0
year     2004
month    03
day      08
language R


kestler@neuro.informatik.uni-ulm.de wrote:
> Full_Name: Dr. Hans A. Kestler
> Version: 1.8.1.
> OS: Linux, Win, Mac OSX
> Submission from: (NULL) (134.60.73.116)
> 
> 
> The code below produces after a different number of iterations i the following
> error:
> 
> Error in optim(par = rep(0.5, length(edges)), loglik, method = "L-BFGS-B",  :
>         non-finite value supplied by optim
> 
> This was reproducible on different machines (Mac G4 OSX, AMD Opteron Linux SUSE
> 9.0, Intel P4 Suse 9.0, P4 Windows XP Prof), only with different i.
> 
> The non-deterministic behaviour made us recompile R with debug options and use
> valgrind for memory-leak checking. The result was horrible. We are now in the
> process of going through the f2c code of lbfgsb.c. The problem seems to be a
> access violation of wn1 at run time. 
> 
> Cheers 
>        Hans
> 
>

From kjetil at entelnet.bo  Sun Apr  4 03:34:25 2004
From: kjetil at entelnet.bo (kjetil@entelnet.bo)
Date: Sun Apr  4 03:34:42 2004
Subject: [Rd] Sporadic error in kalmanSmooth
Message-ID: <406F2DE1.5222.3C9F39@localhost>

Defining the following: 

 set.seed(123)

 kalmanTorture <- function(iter) {
   x <- arima.sim(model = list(ar=0.9, ma=0.5),n=150 )
   x[10:20] <- NA
   mod <- arima(x, order=c(1,0,1) )
   for (i in 1:iter) {
      smooth <- KalmanSmooth(x, mod=mod$model)$smooth
      if (any(is.na(smooth))) stop("NA on iteration ",i) }
}

and running in R1.9.0beta (equal in R1.8.1), windows XP, precompiled 
binaries:

> kalmanTorture(1000)
Error in kalmanTorture(1000) : NA on iteration 147
> kalmanTorture(1000)
Error in kalmanTorture(1000) : NA on iteration 3
> kalmanTorture(1000)
Error in kalmanTorture(1000) : NA on iteration 2
> kalmanTorture(1000)
Error in kalmanTorture(1000) : NA on iteration 3
> kalmanTorture(1000)
Error in kalmanTorture(1000) : NA on iteration 1
> kalmanTorture(1000)
Error in kalmanTorture(1000) : NA on iteration 4
> kalmanTorture(1000)
Error in kalmanTorture(1000) : NA on iteration 1
.
.
.
Starting a new session, using the same set.seed(123)
gives another sequence of iteration numbers where failing.

Kjetil Halvorsen

From dmurdoch at pair.com  Sun Apr  4 16:24:22 2004
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Sun Apr  4 16:24:26 2004
Subject: [Rd] Sporadic error in kalmanSmooth (PR#6738)
Message-ID: <20040404142422.E6B95EFB4@slim.kubism.ku.dk>

On Sat, 03 Apr 2004 21:34:25 -0400, you wrote:

>Defining the following: 
>
> set.seed(123)
>
> kalmanTorture <- function(iter) {
>   x <- arima.sim(model = list(ar=0.9, ma=0.5),n=150 )
>   x[10:20] <- NA
>   mod <- arima(x, order=c(1,0,1) )
>   for (i in 1:iter) {
>      smooth <- KalmanSmooth(x, mod=mod$model)$smooth
>      if (any(is.na(smooth))) stop("NA on iteration ",i) }
>}
>
>and running in R1.9.0beta (equal in R1.8.1), windows XP, precompiled 
>binaries:
>
>> kalmanTorture(1000)
>Error in kalmanTorture(1000) : NA on iteration 147
>> kalmanTorture(1000)
>Error in kalmanTorture(1000) : NA on iteration 3
>> kalmanTorture(1000)
>Error in kalmanTorture(1000) : NA on iteration 2
>> kalmanTorture(1000)
>Error in kalmanTorture(1000) : NA on iteration 3
>> kalmanTorture(1000)
>Error in kalmanTorture(1000) : NA on iteration 1
>> kalmanTorture(1000)
>Error in kalmanTorture(1000) : NA on iteration 4
>> kalmanTorture(1000)
>Error in kalmanTorture(1000) : NA on iteration 1
>.
>.
>.
>Starting a new session, using the same set.seed(123)
>gives another sequence of iteration numbers where failing.

I can reproduce this.  The problem happens in arima.c where the
KalmanSmooth function is, but I can't see why yet.

Duncan Murdoch

From dmurdoch at pair.com  Sun Apr  4 19:39:10 2004
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Sun Apr  4 19:39:12 2004
Subject: [Rd] Sporadic error in kalmanSmooth (PR#6738)
Message-ID: <20040404173910.B25BBED90@slim.kubism.ku.dk>

On Sun,  4 Apr 2004 16:24:22 +0200 (CEST), Kjetil Halvorsen wrote:

>On Sat, 03 Apr 2004 21:34:25 -0400, you wrote:
>
>>Defining the following: 
>>
>> set.seed(123)
>>
>> kalmanTorture <- function(iter) {
>>   x <- arima.sim(model = list(ar=0.9, ma=0.5),n=150 )
>>   x[10:20] <- NA
>>   mod <- arima(x, order=c(1,0,1) )
>>   for (i in 1:iter) {
>>      smooth <- KalmanSmooth(x, mod=mod$model)$smooth
>>      if (any(is.na(smooth))) stop("NA on iteration ",i) }
>>}
>>
>>and running in R1.9.0beta (equal in R1.8.1), windows XP, precompiled 
>>binaries:
>>
>>> kalmanTorture(1000)
>>Error in kalmanTorture(1000) : NA on iteration 147
>>> kalmanTorture(1000)

Found it.  The entries in the Mt array in KalmanSmooth weren't being
initialized in the cases where data was missing.  The value was being
multiplied by zero, so if it was numerically valid junk it had no
effect, but if it happened to be a NaN, the multiplication gave
another NaN.

I'll commit a patch.

Duncan Murdoch

From sagi at mail.biu.ac.il  Sun Apr  4 19:45:25 2004
From: sagi at mail.biu.ac.il (Avi Sagi)
Date: Sun Apr  4 19:45:28 2004
Subject: [Rd] __ account suspended __
Message-ID: <200404041745.i34HjPmK2138350@tamar.os.biu.ac.il>


  ATTENTION!

 *****************************************************************************
 *  This is an automated response that will be sent to you only once within  
 *  a seven day period regardless of how many messages you send to           
 *  sagi@mail.biu.ac.il.                                                       
 *****************************************************************************

  Please note that the account sagi@mail.biu.ac.il is currently
  suspended and is not able to receive the e-mail you sent.  Please be in
  touch with the recipient through other means to verify when the account
  will be reactivated . If you do not know how to reach the recipient please
  start by looking at our email directory:

http://faculty.biu.ac.il/cgi-bin/WebPh/WebPh?DB=csnet-ns

  We apologize for the inconvenience.

  Computer Center
  Bar Ilan University

From karel.zvara at mff.cuni.cz  Mon Apr  5 14:13:00 2004
From: karel.zvara at mff.cuni.cz (karel.zvara@mff.cuni.cz)
Date: Mon Apr  5 14:13:08 2004
Subject: [Rd] fligner.test (ctest) (PR#6739)
Message-ID: <20040405121300.6693A1046B@slim.kubism.ku.dk>

Full_Name: Karel Zvara
Version: 1.8.1
OS: MS Winows 2000
Submission from: (NULL) (195.113.30.163)


The test statistics of the fligner.test (ctest package) depends on the order of
cases:

> fligner.test(count~spray,data=InsectSprays)

        Fligner-Killeen test for homogeneity of variances

data:  count by spray 
Fligner-Killeen:med chi-squared = 14.4828, df = 5, p-value =
0.01282

> fligner.test(count~spray,data=InsectSprays[order(InsectSprays$count),])

        Fligner-Killeen test for homogeneity of variances

data:  count by spray 
Fligner-Killeen:med chi-squared = 5.4527, df = 5, p-value =
0.3632

> fligner.test(count~spray,data=InsectSprays[order(sample(72)),])

        Fligner-Killeen test for homogeneity of variances

data:  count by spray 
Fligner-Killeen:med chi-squared = 2.7349, df = 5, p-value =
0.7408

The problem lies, I think, in the ordering of centered values x:

 x <- unlist(tapply(x, g, function(u) u - median(u)))

From p.dalgaard at biostat.ku.dk  Mon Apr  5 14:28:52 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon Apr  5 14:31:13 2004
Subject: [Rd] fligner.test (ctest) (PR#6739)
In-Reply-To: <20040405121300.6693A1046B@slim.kubism.ku.dk>
References: <20040405121300.6693A1046B@slim.kubism.ku.dk>
Message-ID: <x2smfiip6j.fsf@biostat.ku.dk>

karel.zvara@mff.cuni.cz writes:

> Full_Name: Karel Zvara
> Version: 1.8.1
> OS: MS Winows 2000
> Submission from: (NULL) (195.113.30.163)
> 
> 
> The test statistics of the fligner.test (ctest package) depends on the order of
> cases:
> 
> > fligner.test(count~spray,data=InsectSprays)
> 
>         Fligner-Killeen test for homogeneity of variances
> 
> data:  count by spray 
> Fligner-Killeen:med chi-squared = 14.4828, df = 5, p-value =
> 0.01282
> 
> > fligner.test(count~spray,data=InsectSprays[order(InsectSprays$count),])
> 
>         Fligner-Killeen test for homogeneity of variances
> 
> data:  count by spray 
> Fligner-Killeen:med chi-squared = 5.4527, df = 5, p-value =
> 0.3632
> 
> > fligner.test(count~spray,data=InsectSprays[order(sample(72)),])
> 
>         Fligner-Killeen test for homogeneity of variances
> 
> data:  count by spray 
> Fligner-Killeen:med chi-squared = 2.7349, df = 5, p-value =
> 0.7408
> 
> The problem lies, I think, in the ordering of centered values x:
> 
>  x <- unlist(tapply(x, g, function(u) u - median(u)))

Right. x is not in the same order as g is after that operation, so
the two lines that come immediately after are incoherent:

    a <- qnorm((1 + rank(abs(x))/(n + 1))/2)
    STATISTIC <- sum(tapply(a, g, "sum")^2/tapply(a, g, "length"))


I think the unlist construction wants to be replaced with

  x <- x - tapply(x,g,median)[g]



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ivan_yegorov at mail.ru  Mon Apr  5 14:54:44 2004
From: ivan_yegorov at mail.ru (ivan_yegorov@mail.ru)
Date: Mon Apr  5 14:54:47 2004
Subject: [Rd] rect.hclust fails when k is specified (PR#6740)
Message-ID: <20040405125444.7DAA310478@slim.kubism.ku.dk>

Full_Name: Ivan Egorov
Version: 1.8.1
OS: MS Windows 2000, SP4
Submission from: (NULL) (194.186.91.129)


V<-t(matrix(scan('C:/V3.dat'),3))
d<-dist(V)
hc<-hclust(d)
rect.hclust(hc,5)

Error message is displayed:

Read 24 items
Error in rect(m[which[n]] + 0.66, par("usr")[3], m[which[n] + 1] + 0.33,  : 
        plot.new has not been called yet

Here's my data file ('C:/V3.dat')

-1	-73	12
-70	-26	-8
-78	-101	-35
-38	-24	-16
39	-54	3
-40	-13	-19
-45	-9	-19
-18	-22	2

From andy_liaw at merck.com  Mon Apr  5 15:03:15 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Mon Apr  5 15:03:46 2004
Subject: [Rd] rect.hclust fails when k is specified (PR#6740)
Message-ID: <3A822319EB35174CA3714066D590DCD504AF7B1E@usrymx25.merck.com>

I don't think that's a bug.  As ?rect.hclust says, it adds a rectangle to
the dendrogram, which means you need to plot the dendrogram _first_.  See
the example code in the help file.

Andy

> From: ivan_yegorov@mail.ru
> 
> Full_Name: Ivan Egorov
> Version: 1.8.1
> OS: MS Windows 2000, SP4
> Submission from: (NULL) (194.186.91.129)
> 
> 
> V<-t(matrix(scan('C:/V3.dat'),3))
> d<-dist(V)
> hc<-hclust(d)
> rect.hclust(hc,5)
> 
> Error message is displayed:
> 
> Read 24 items
> Error in rect(m[which[n]] + 0.66, par("usr")[3], m[which[n] + 
> 1] + 0.33,  : 
>         plot.new has not been called yet
> 
> Here's my data file ('C:/V3.dat')
> 
> -1	-73	12
> -70	-26	-8
> -78	-101	-35
> -38	-24	-16
> 39	-54	3
> -40	-13	-19
> -45	-9	-19
> -18	-22	2
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
>

From andy_liaw at merck.com  Mon Apr  5 15:56:01 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Mon Apr  5 15:56:30 2004
Subject: [Rd] speed difference between pgf77 and g77 on amd64
Message-ID: <3A822319EB35174CA3714066D590DCD504AF7B22@usrymx25.merck.com>

For those interested:

I compiled R-1.9.0beta_2004-04-02 with pgf77/gcc/g++ and g77/gcc/g++, both
_without_ fast BLAS.  Both passed make check-all.  Simple crossprod(m) for
fairly large `m' shows that the version compiled with pgf77 is about 15%
faster:

[andy@leo:scratch]% echo "set.seed(1); m <- matrix(runif(5e7), 1e4); gc();
system.time(crossprod(m))" | R-1.9.0-PGI/bin/R --slave -q
           used  (Mb) gc trigger   (Mb)
Ncells   431805  23.1     741108   39.6
Vcells 50125266 382.5  150395933 1147.5
[1] 671.14   0.30 762.35   0.00   0.00

[andy@leo:scratch]% echo "set.seed(1); m <- matrix(runif(5e7), 1e4); gc();
system.time(crossprod(m))" | R-1.9.0-GCC/bin/R --slave -q
           used  (Mb) gc trigger   (Mb)
Ncells   431805  23.1     741108   39.6
Vcells 50125266 382.5  150395933 1147.5
[1] 777.55   0.40 882.37   0.00   0.00

I'd welcome comments and suggestions on code for further comparison.  I will
also keep trying to compile R with pgcc/pgCC and see if further gain is
possible.

Best,
Andy
--
Andy Liaw, PhD
Biometrics Research      PO Box 2000, RY33-300     
Merck Research Labs           Rahway, NJ 07065
mailto:andy_liaw@merck.com        732-594-0820

From martin.noellenburg at stud.uni-karlsruhe.de  Mon Apr  5 17:51:42 2004
From: martin.noellenburg at stud.uni-karlsruhe.de (martin.noellenburg@stud.uni-karlsruhe.de)
Date: Mon Apr  5 17:51:46 2004
Subject: [Rd] save image as postscript side-effect (PR#6742)
Message-ID: <20040405155142.D52E01043B@slim.kubism.ku.dk>

Full_Name: Martin N?llenburg
Version: 1.8.1
OS: Win XP
Submission from: (NULL) (141.52.232.84)


When I try to save any image produced by the plot command by choosing "file ->
save as -> postscript..." in the menu, the settings for the decimal point are
changed from '.' to ',' somehow. 
In the postscript output all '.' are replaced by ',' as well, so the file cannot
be opened. Furthermore when I type e.g. "3.4" afterwards at the prompt, the next
line is just "3":

> 3.4
[1] 3

From ligges at statistik.uni-dortmund.de  Mon Apr  5 18:11:47 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Mon Apr  5 18:11:51 2004
Subject: [Rd] save image as postscript side-effect (PR#6742)
Message-ID: <20040405161147.6787A10439@slim.kubism.ku.dk>

martin.noellenburg@stud.uni-karlsruhe.de wrote:

> Full_Name: Martin N?llenburg
> Version: 1.8.1
> OS: Win XP
> Submission from: (NULL) (141.52.232.84)
> 
> 
> When I try to save any image produced by the plot command by choosing "file ->
> save as -> postscript..." in the menu, the settings for the decimal point are
> changed from '.' to ',' somehow. 
> In the postscript output all '.' are replaced by ',' as well, so the file cannot
> be opened. Furthermore when I type e.g. "3.4" afterwards at the prompt, the next
> line is just "3":
> 
> 
>>3.4
> 
> [1] 3

Please, can you specify a reproducible example?
It works for me (at least on WinNT 4.0).

Uwe Ligges

From statho3 at web.de  Mon Apr  5 19:01:11 2004
From: statho3 at web.de (Thomas Stabla)
Date: Mon Apr  5 19:04:22 2004
Subject: [Rd] NAMESPACE directives ?
Message-ID: <Pine.LNX.4.44.0404051900330.4349-100000@spock.vulcan>

Hello,

I've built the package distr (see link below) successfully with R 1.8.1
and R 1.9.0 beta (under Linux).
As to make the package compatible to R 1.8.1 / 1.9.0, I have to use two
different NAMESPACE files.

For 1.8.1 it has to contain

  import("methods")
  import("stepfun")

and for 1.9.0 the "import"-part has to be

  import("methods")
  import("stats")
  import("graphics")

As a consequence, I can't use the package built with 1.8.1 / 1.9.0
under 1.9.0 / 1.8.1, respectively.

I've read the NAMESPACE section (1.6 Package name space) in Writing R
Extensions (the newest version from R-devel/doc/manual) which says:

> Note that although the file looks like R code (and often has R-style
> comments) it is not processed as R code and no conditional processing is
> currently supported.

Is there any way to make the packages built with one version compatible to
the other one?

Best Regards,
Thomas Stabla

http://www.uni-bayreuth.de/departments/math/org/mathe7/DISTR/

From dmurdoch at pair.com  Mon Apr  5 19:16:33 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Mon Apr  5 19:16:33 2004
Subject: [Rd] NAMESPACE directives ?
In-Reply-To: <Pine.LNX.4.44.0404051900330.4349-100000@spock.vulcan>
References: <Pine.LNX.4.44.0404051900330.4349-100000@spock.vulcan>
Message-ID: <fv43701fnu2b7ni3qr1pjhjngo1b3q017a@4ax.com>

On Mon, 5 Apr 2004 19:01:11 +0200 (CEST), Thomas Stabla
<statho3@web.de> wrote :

>Is there any way to make the packages built with one version compatible to
>the other one?

Unfortunately, I don't think there is.  You'll need two different
versions of the NAMESPACE file, so probably two different versions of
the package.

This is a limitation of 1.8.1 that I think has been fixed in 1.9.0;
you will be allowed conditionals in the file from now on, but 1.8.1
won't know what to do with them.

Duncan Murdoch

From p.dalgaard at biostat.ku.dk  Mon Apr  5 19:23:07 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon Apr  5 19:25:29 2004
Subject: [Rd] save image as postscript side-effect (PR#6742)
In-Reply-To: <20040405161147.6787A10439@slim.kubism.ku.dk>
References: <20040405161147.6787A10439@slim.kubism.ku.dk>
Message-ID: <x2y8pagwzo.fsf@biostat.ku.dk>

ligges@statistik.uni-dortmund.de writes:

> martin.noellenburg@stud.uni-karlsruhe.de wrote:
> 
> > Full_Name: Martin N?llenburg
> > Version: 1.8.1
> > OS: Win XP
> > Submission from: (NULL) (141.52.232.84)
> > 
> > 
> > When I try to save any image produced by the plot command by choosing "file ->
> > save as -> postscript..." in the menu, the settings for the decimal point are
> > changed from '.' to ',' somehow. 
> > In the postscript output all '.' are replaced by ',' as well, so the file cannot
> > be opened. Furthermore when I type e.g. "3.4" afterwards at the prompt, the next
> > line is just "3":
> > 
> > 
> >>3.4
> > 
> > [1] 3
> 
> Please, can you specify a reproducible example?
> It works for me (at least on WinNT 4.0).

(He probably can't since this kind of problem tends to depend on the
individual system.)

I've seen this a long time ago and I'm fairly sure the reason is a
Windows DLL bug rather than an R one. You might want to check the
archives.

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From daheiser at gvn.net  Tue Apr  6 04:24:35 2004
From: daheiser at gvn.net (daheiser@gvn.net)
Date: Tue Apr  6 04:24:37 2004
Subject: [Rd] Accuracy Bug 1228 (PR#6743)
Message-ID: <20040406022435.4A6C0EFB4@slim.kubism.ku.dk>

It is an error in the algorithm. It is an excellent example of how errors
and faults occur when the programmer follows the mathematical formula
exactly. Welford's algorithm does not produce this error. It gives correct
standard deviation and variance values.

David Heiser

From maechler at stat.math.ethz.ch  Tue Apr  6 12:10:45 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue Apr  6 12:10:47 2004
Subject: [Rd] Accuracy Bug (PR#1228), (PR#6743)
Message-ID: <20040406101045.1D04310449@slim.kubism.ku.dk>

>>>>> "daheiser" == daheiser  <daheiser@gvn.net>
>>>>>     on Tue,  6 Apr 2004 04:24:35 +0200 (CEST) writes:

    daheiser> It is an error in the algorithm. 

"it" being the behavior reported in bug report PR#1228 ---
 [too bad you didn't use the whole string "PR#1228" in your subject;
  if you had, no new report would have been created, and things
  would have gone to the proper place in the R-bugs repository ...]

namely the fact that
       var(rep(1e30, n))  
does not always (for all n) give 0.  With the following function

  tst.var <- function(x,nset= 2:100) {
     for(n in nset) {
	v <- var(rep(x,n))
	if(v != 0) cat(sprintf("%4d: %20.12g\n", n,v))
     }
  }

Actually, on my current desktop (AMD Athlon,Linux, R 1.9.0beta)
the computations seem to be more often exact than they used to:
Even  tst.var(1e30, 2:5000) doesn't produce any output nor do a few other 'x'
arguments I tried --- but the fundamental criticism is still
correct, and even on the Athlon, it's easy to find cases where
tst.var() *does* produce output.

    daheiser> It is an excellent example of how errors and
    daheiser> faults occur when the programmer follows the
    daheiser> mathematical formula exactly. Welford's algorithm
    daheiser> does not produce this error. It gives correct
    daheiser> standard deviation and variance values.

Actually, after reading

  @article{ChaTL97,
   author = {Tony F. Chan and John Gregg Lewis},
   title = {Computing standard deviations: accuracy},
   journal = {Commun. ACM},
   volume = 22,
   number = 9,
   year = 1979,
   issn = {0001-0782},
   pages = {526--531},
   doi = {http://doi.acm.org/10.1145/359146.359152},
   publisher = {ACM Press},
  }

  @article{WesD97,
   author = {D. H. D. West},
   title = {Updating mean and variance estimates: an improved method},
   journal = {Commun. ACM},
   volume = 22,
   number = 9,
   year = 1979,
   issn = {0001-0782},
   pages = {532--535},
   doi = {http://doi.acm.org/10.1145/359146.359153},
   publisher = {ACM Press},
  }

I'd conclude (from page 531) that Welford's algorithm is a bit
less accurate than the (very similar) "West" version,
and we (the R developers) should rather implement the latter.

Maybe for R 1.9.1 -- or even later  {there are even more
important numerical accuracy problems I know about!}

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

From Mark.Bravington at csiro.au  Wed Apr  7 01:23:34 2004
From: Mark.Bravington at csiro.au (Mark.Bravington@csiro.au)
Date: Wed Apr  7 01:23:42 2004
Subject: [Rd] .First and base reorganization in  R 1.9.0
Message-ID: <C4178DC99E08604EA5E2BDB989F093800240A235@extas2-hba.tas.csiro.au>

I noticed that, in R1.9.0 beta where the old 'base' package has been split into 4, '.First' gets executed with just the new 'base' loaded, before 'stats' 'utils' and 'graphics' are available. The NEWS file does warn that this will be the case for .Rprofile, but doesn't mention .First.

Is this actually the intended behaviour where .First is concerned? I've always found it useful to think of the auto-executing property of .First as mimicking what would happen if you just typed .First() once the prompt was available, but this is no longer the case. [And if people really want code that executes without stats etc., they can always use .Rprofile.]

Obviously it can be worked round by including library( utils) etc. in .First, but it does create some version issues [well, my packages would need changing, anyway :), whereas apart from this they work under both 1.8.1 and 1.9.0.].

Just thought I'd check

Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au

From mms-notifier at aaa-calif.com  Wed Apr  7 04:28:01 2004
From: mms-notifier at aaa-calif.com (MMS Notifier)
Date: Wed Apr  7 04:28:09 2004
Subject: [Rd] SecureMail Server notification
Message-ID: <6C6DB8A12445555-01@MMS__aaa-calif.com_>

Our EMail system has detected a virus that cannot be cleaned in your
original email sent to one of our users.  Please take action to clean
your system. Virus Scanner found the 
 W32/Netsky.p@MM virus
   in the attached file: message.scr
 
-------------- next part --------------
An embedded message was scrubbed...
From: r-devel@lists.r-project.org
Subject: Mail Delivery (failure lastname.firstname@aaa-calif.com)
Date: Tue, 6 Apr 2004 19:27:55 -0700
Size: 468
Url: https://www.stat.math.ethz.ch/pipermail/r-devel/attachments/20040406/e858f93c/attachment.mht
From service2 at paypal.com  Wed Apr  7 06:34:57 2004
From: service2 at paypal.com (PayPal Customer Service 2)
Date: Wed Apr  7 06:35:20 2004
Subject: [Rd] AutoResponse - Email Returned SAXK  (KMM48071453V12480L0KM)
Message-ID: <20040407042206.86A653F27F@smtp1.nix.paypal.com>



Thank you for contacting PayPal Customer Service.  

In an effort to assist you as quickly and efficiently as possible, please 
direct all customer service inquires through our website. Click on the 
hyperlink below to go to the PayPal website. After entering your email 
address and password into the Member Log In box, you can submit your 
inquiry via our Customer Service Contact form. If you indicate the type of 
question you have with as much detail as you can, we will be able to 
provide you with the best customer service possible.

If your email program is unable to open hyperlinks, please copy and paste 
this URL into the address bar of your browser.

https://www.paypal.com/wf/f=default	

If you are contacting PayPal because you are unable to log into your 
account, please use the contact form below.

https://www.paypal.com/ewf/f=default

Thank you for choosing PayPal!

------------------------------------------------------------------------
Note: When you click on links in this email, you will be asked to log into 
your PayPal Account. As always, make sure that you are logging into a 
secure PayPal page by looking for 'https://www.paypal.com/' at the 
beginning of the URL.

Please do not reply to this e-mail.  Mail sent to this address will not be 
answered.

********************************************
Original Email:
Your file is attached.

From mbirnhol at gwu.edu  Wed Apr  7 06:12:12 2004
From: mbirnhol at gwu.edu (mbirnhol@gwu.edu)
Date: Wed Apr  7 07:01:30 2004
Subject: [Rd] Re: Re: Your document
In-Reply-To: <200404070412.i374CE5m023481@lovelace.nit.gwu.edu>
Message-ID: <0HVS0080390C3Z@mail.sag.gwu.edu>

I am out of the office until Thursday, April 8th. I will reply as soon as possible.
Chag Sameach!
Happy Passover!!


Melanie

From wettenhall at wehi.EDU.AU  Wed Apr  7 15:42:00 2004
From: wettenhall at wehi.EDU.AU (wettenhall@wehi.EDU.AU)
Date: Wed Apr  7 15:43:23 2004
Subject: [Rd] rw-FAQ.texi Q2.3/Q2.4 reference
In-Reply-To: <Pine.LNX.4.58.0404071933170.11807@unix28.alpha.wehi.edu.au>
References: <Pine.LNX.4.58.0404071933170.11807@unix28.alpha.wehi.edu.au>
Message-ID: <2202.192.168.65.113.1081345320.squirrel@wehimail.wehi.edu.au>

Apologies if this gets posted twice.  I've been having some pine/email
troubles since upgrading to Fedora.

Hi,

I believe
"Create a separate shortcut for each project: see Q2.3"

in R-devel/src/gnuwin32/rw-FAQ.texi

should refer to Q2.4

Regards,
James

From dmurdoch at pair.com  Wed Apr  7 21:38:54 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Wed Apr  7 21:38:52 2004
Subject: [Rd] Re: [R] More user-friendly error message needed.
In-Reply-To: <1081364866.2239.4.camel@dhcp9931.dhcp.unc.edu>
References: <1081364866.2239.4.camel@dhcp9931.dhcp.unc.edu>
Message-ID: <k4l870p6eqfisbutc4e5a6a0it2gebufeu@4ax.com>

(Moved from r-help to r-devel).

On 07 Apr 2004 15:07:49 -0400, Shin <sdhyok@email.unc.edu> wrote :

>When I tried the following commands, I got a strange message.
>
>
>> x<-data.frame(y=c(1:10))
>> plot(x$z)
>Error in xy.coords(x, y, xlabel, ylabel, log) :
>        x and y lengths differ
>
>"The data frame, x, does not have a field named z."
>may be better user-friendly message for this kind of common error.

There are several places this could be fixed.  When you use x$z, the
code for $ could give an error message or a warning; instead it
returns NULL with no error or warning.  Changing this would probably
be dangerous:  I'd guess there's code out there that relies on getting
a NULL back from a construction like that.  But maybe we should change
that in 2.0?

Then plot(NULL) is called, which eventually results in the message you
saw.  That could be easily fixed:  plot.default could have 

if (is.null(x)) stop("x is NULL")

I can't think of a reason why this would cause trouble.  However, if
you had something like

plot(x$y, x$z)

the error wouldn't be detected.

Finally, the actual error message comes from a bug in the xy.coords
code: it has 

           y <- x
            x <- 1:length(x)

for the case where there is a NULL y supplied, and this is wrong:  it
should be x <- seq(along=x).  Making just this fix gives a fairly
inscrutable error message:

Error in plot.window(xlim, ylim, log, asp, ...) : 
        need finite xlim values
In addition: Warning messages: 
1: no finite arguments to min; returning Inf 
2: no finite arguments to max; returning -Inf 
3: no finite arguments to min; returning Inf 
4: no finite arguments to max; returning -Inf 

but this might be easier to figure out than the original one.

Duncan Murdoch

From dmurdoch at pair.com  Wed Apr  7 22:15:59 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Wed Apr  7 22:15:57 2004
Subject: [Rd] Re: [R] More user-friendly error message needed.
In-Reply-To: <k4l870p6eqfisbutc4e5a6a0it2gebufeu@4ax.com>
References: <1081364866.2239.4.camel@dhcp9931.dhcp.unc.edu>
	<k4l870p6eqfisbutc4e5a6a0it2gebufeu@4ax.com>
Message-ID: <p7o8701cd9ue69l3gd50jdvi9u0fei4cam@4ax.com>

On Wed, 07 Apr 2004 15:38:54 -0400, Duncan Murdoch <dmurdoch@pair.com>
wrote :

>There are several places this could be fixed.  When you use x$z, the
>code for $ could give an error message or a warning; instead it
>returns NULL with no error or warning.  Changing this would probably
>be dangerous:  I'd guess there's code out there that relies on getting
>a NULL back from a construction like that.  But maybe we should change
>that in 2.0?

No, this would be a bad idea.

A standard test for the existence of a list element is 

if (is.null(x$z)) ....

Those would all need some other kind of test if this were changed.
Not a good idea at all!

Duncan Murdoch

From gregory_r_warnes at groton.pfizer.com  Wed Apr  7 22:50:42 2004
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Wed Apr  7 22:50:50 2004
Subject: [Rd] Re: [R] More user-friendly error message needed.
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20680B22C@groexmb02.pfizer.com>

Perhaps one could create a utility function 

	has.element <- function(list, name) name %in% names(list)

and then have $ generate a warning (not an error!) when the named element
does not exist.

This would be helpful in debugging code.  Yesterday I spent quite some time
tracking down an error that turned out to be $ returning a NULL because the
data file I read in had a variable mis-named.   A warning message would have
made everything clear right away.

-G

> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch
> [mailto:r-devel-bounces@stat.math.ethz.ch]On Behalf Of Duncan Murdoch
> Sent: Wednesday, April 07, 2004 4:16 PM
> To: Shin; r-devel@stat.math.ethz.ch
> Subject: Re: [Rd] Re: [R] More user-friendly error message needed.
> 
> 
> On Wed, 07 Apr 2004 15:38:54 -0400, Duncan Murdoch <dmurdoch@pair.com>
> wrote :
> 
> >There are several places this could be fixed.  When you use x$z, the
> >code for $ could give an error message or a warning; instead it
> >returns NULL with no error or warning.  Changing this would probably
> >be dangerous:  I'd guess there's code out there that relies 
> on getting
> >a NULL back from a construction like that.  But maybe we 
> should change
> >that in 2.0?
> 
> No, this would be a bad idea.
> 
> A standard test for the existence of a list element is 
> 
> if (is.null(x$z)) ....
> 
> Those would all need some other kind of test if this were changed.
> Not a good idea at all!
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 


LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}

From bates at stat.wisc.edu  Wed Apr  7 23:13:05 2004
From: bates at stat.wisc.edu (Douglas Bates)
Date: Wed Apr  7 23:13:02 2004
Subject: [Rd] Re: [R] More user-friendly error message needed.
In-Reply-To: <D7A3CFD7825BD6119B880002A58F06C20680B22C@groexmb02.pfizer.com>
References: <D7A3CFD7825BD6119B880002A58F06C20680B22C@groexmb02.pfizer.com>
Message-ID: <6rbrm3ze3i.fsf@bates4.stat.wisc.edu>

"Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:

> Perhaps one could create a utility function 
> 
> 	has.element <- function(list, name) name %in% names(list)
> 
> and then have $ generate a warning (not an error!) when the named element
> does not exist.

Because of partial matching, list$name can return a result when 
your has.element function returns FALSE.

> lst = list(foo = 1:3, bar = LETTERS[1:3])
> lst$f
[1] 1 2 3
> has.element <- function(list, name) name %in% names(list)
> has.element(lst, "f")
[1] FALSE

Before we go too far in speculating about what the $ operator should
or should not return when the name is not matched, let's all remember
that the semantics of the $ operator explicitly state that it should
return NULL and, as Duncan wrote, there are many, many places in the
base code for R that depend upon this behavior.  Trust me - you really
don't want to change this.

From cottage-request at eg.e-cell.org  Thu Apr  8 05:00:46 2004
From: cottage-request at eg.e-cell.org (cottage-request@eg.e-cell.org)
Date: Thu Apr  8 05:00:56 2004
Subject: [Rd] Mailman results for Cottage (PR#6748)
Message-ID: <20040408030046.F020BEC53@slim.kubism.ku.dk>

$B$3$l$O<+F01~Ez$G$9(B.

$B4IM}%"%I%l%9(B <cottage-request@eg.e-cell.org> $B7PM3$G(B Mailman $B$K(B
$BAw$C$?%a!<%k%3%^%s%I$KLdBj$,$"$j$^$9(B. $B@5$7$$(B Mailman $B$N(B Email
$B%3%^%s%I$N;H$$J}$K$D$$$F$O!$(B"help" $B$r%a!<%k$N7oL>$+K\J8$KF~$l$F(B
<cottage-request@eg.e-cell.org> $B$X(B $BAw$C$F2<$5$$!%(B
$B$3$N%a!<%j%s%0%j%9%H$r4IM}$9$k?M4V$K$4MQ$NJ}$O!$(B
<cottage-admin@eg.e-cell.org> $B08$F$K%a%C%;!<%8$rAw$C$F2<$5$$(B.

$B0J2<$OLdBjE@$K$D$$$F$N>\:Y$G$9(B.

>>>>> Subject line ignored:
>>>>>   Delivery (cottage-request@eg.e-cell.org)
Command? This is a multi-part message in MIME format.
Command? ------=_NextPart_000_0016----=_NextPart_000_0016
Command? Content-Type: text/plain;
Command? charset="Windows-1252"
>>>>> 
>>>>> Too many errors encountered; the rest of the message is ignored:
> Content-Transfer-Encoding: 7bit
> 
> 
> Mail Delivery Failed - This mail couldn't be represented
> 
> ------------- failed message -------------
> y$?$BdX(B*mJFnYktT%TOY;k<yH(UBI2()b99~rbPW<0Y517K
> 0*7S.CLM4hV)C'l3AYN9J|~zh)fH7DK#))d~chttakzO
> |p>i+pcC_4G&lMvu-8T7MDCLwsN-Tn$Bdc(B)ec<-<'I~&WX$B_M(B
> 'z?;|ilBFPekpq*;ZZl&+
> 
> Note: Received message has been sent as a binary file.
> 
> 
> ------=_NextPart_000_0016----=_NextPart_000_0016
> Content-Type: application/octet-stream;
> 	name="data22786.pif"
> Content-Transfer-Encoding: base64
> Content-Disposition: attachment;
> 	filename="data22786.pif"
> 
> TVqQAAMAAAAEAAAA//8AALgAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAAAAA6AAAAA4fug4AtAnNIbgBTM0hVGhpcyBwcm9ncmFtIGNhbm5vdCBiZSBydW4gaW4g
> RE9TIG1vZGUuDQ0KJAAAAAAAAAAxzIXZda3rinWt64p1reuKda3qimet64oXsviKcK3rip2y
> 4Ip3reuKzavtinSt64pSaWNoda3rigAAAAAAAAAAQ29tcHJlc3NlZCBieSBQZXRpdGUgKGMp
> MTk5OSBJYW4gTHVjay4AAFBFAABMAQMA76BkQAAAAAAAAAAA4AAPAQsBBgAABAAAAGYAAAAA
> AABCoAAAABAAAAAgAAAAAEAAABAAAAACAAAEAAAAAAAAAAQAAAAAAAAAALAAAAAEAAAAAAAA
> AgAAAAAAEAAAEAAAAAAQAAAQAAAAAAAAEAAAAAAAAAAAAAAA/KEAANAAAAAAQAAAaF8AAAAA
> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAMAAAABAAAAAGAAAACAAAAAAAAAAAAAAAAAAAYAAA4AAAAAAAAAAAAGAAAABAAABoXwAA
> AA4AAAAAAAAAAAAAAAAAAEAAAEAucGV0aXRlAMwCAAAAoAAAAAQAAAAEAAAAAAAAAAAAAAAA
> AABgAADiAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> 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
> AgAAAKgAAIAAAAAAAAAAAAAAAAABAAAAIAEAgMAAAIAAAAAAAAAAAAAAAAAAAAEABwQAANgA
> AAAAAAAAAAAAAAAAAAAAAAEABwQAAOgAAAAAAAAAAAAAAAAAAAAAAAEABwQAAPgAAAAAAAAA
> AAAAAAAAAAAAAAEABwQAAAgBAABkRQAAAFoAAAAAAAAAAAAAPEQAACgBAAAAAAAAAAAAAFRB
> AADoAgAAAAAAAAAAAAAwQQAAIgAAAAAAAAAAAAAAAwBCAEkATgABADAAAAAAAAAAAAAAAAAA
> AAABAAIAEBAQAAEABAAoAQAAAQAgIBAAAQAEAOgCAAACAAAAKAAAACAAAABAAAAAAQAEAAAA
> AACAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIAAAACAgACAAAAAgACAAICAAADAwMAA
> gICAAAAA/wAA/wAAAP//AP8AAAD/AP8A//8AAP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAAACIiIiIiIiIiIiIiIiIgAAAj////////////////4AAAIf///////////////eAAACP
> f/////////////9/gAAAj/f////////////3/4AAAI//f///////////f/+AAACP//f/////
> ////9///gAAAj///f////////3///4AAAI////f///////f///+AAACP//93d3d3d3d3f///
> gAAAj//3f39/f39/f3f//4AAAI//d/f39/f39/f3f/+AAACP939/f39/f39/f3f/gAAAh3f3
> 9/f39/f39/f3d4AAAI9/f39/f39/f39/f3+AAACP////////////////AAAACP//////////
> ////8AAAAACP/////////////wAAAAAACP////////////AAAAAAAACP//////////8AAAAA
> AAAACP/////////wAAAAAAAAAACP////////AAAAAAAAAAAACP//////8AAAAAAAAAAAAACP
> /////wAAAAAAAAAAAAAACIiIiIgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
> AAAAAP/////////////////////AAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AA
> 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
> 
> ------=_NextPart_000_0016----=_NextPart_000_0016--
> 
> 
>

From paolillo at indiana.edu  Thu Apr  8 21:25:25 2004
From: paolillo at indiana.edu (paolillo@indiana.edu)
Date: Thu Apr  8 21:25:29 2004
Subject: [Rd] Macintosh -- changing working directory forces computer to
	restart (PR#6749)
Message-ID: <20040408192525.ECA97EFC4@slim.kubism.ku.dk>

Full_Name: John C. Paolillo
Version: 1.8.1 Aqua
OS: Mac OS X 10.3
Submission from: (NULL) (12.223.226.232)


Changing working directory (Tools menu) in R-Aqua causes a fatal error that
forces the computer to restart immediately after setting the directory in the
dialog box (screen grays and displays a message saying you need to hold the
power key for several seconds, several languages displayed). This behavior
became evident after 2004-04-05 security update (it used to work correctly) but
it seems unlikely this should affect the behavior. Command-line R seems to work
okay.

From tlumley at u.washington.edu  Thu Apr  8 21:44:29 2004
From: tlumley at u.washington.edu (tlumley@u.washington.edu)
Date: Thu Apr  8 21:44:34 2004
Subject: [Rd] Macintosh -- changing working directory (PR#6749)
Message-ID: <20040408194429.E5013FE9B@slim.kubism.ku.dk>

On Thu, 8 Apr 2004 paolillo@indiana.edu wrote:

> Full_Name: John C. Paolillo
> Version: 1.8.1 Aqua
> OS: Mac OS X 10.3
> Submission from: (NULL) (12.223.226.232)
>
>
> Changing working directory (Tools menu) in R-Aqua causes a fatal error that
> forces the computer to restart immediately after setting the directory in the
> dialog box (screen grays and displays a message saying you need to hold the
> power key for several seconds, several languages displayed).

I don't have a GUI version of 1.8.1 available, but this doesn't happen to
me with the 1.9.0beta. It looks as if it is either specific to your
computer or fixed.

	-thomas

From ligges at statistik.uni-dortmund.de  Fri Apr  9 17:23:50 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri Apr  9 17:23:39 2004
Subject: [Rd] anoncvs does not work
Message-ID: <4076C006.7060706@statistik.uni-dortmund.de>

Does anybody now why the anoncvs access does not work?

cvs -d :pserver:anoncvs@anoncvs.r-project.org:/cvs co -P R

cvs [checkout aborted]: connect to 
anoncvs.r-project.org(128.104.176.132):2401 failed: Connection refused

Is this still the issue that franz has been compromised?


Also, the link to http://anoncvs.r-project.org/cgi-bin/cvsweb.cgi at 
http://anoncvs.r-project.org/ does not work ...


Uwe Ligges

From jwe at octave.org  Fri Apr  9 17:34:11 2004
From: jwe at octave.org (John W. Eaton)
Date: Fri Apr  9 17:34:20 2004
Subject: [Rd] anoncvs does not work
In-Reply-To: <4076C006.7060706@statistik.uni-dortmund.de>
References: <4076C006.7060706@statistik.uni-dortmund.de>
Message-ID: <16502.49779.912793.240129@devzero.bogus.domain>

On  9-Apr-2004, Uwe Ligges <ligges@statistik.uni-dortmund.de> wrote:

| Does anybody now why the anoncvs access does not work?
| 
| cvs -d :pserver:anoncvs@anoncvs.r-project.org:/cvs co -P R
| 
| cvs [checkout aborted]: connect to 
| anoncvs.r-project.org(128.104.176.132):2401 failed: Connection refused
| 
| Is this still the issue that franz has been compromised?

Yes.  The master CVS archive was on franz and copied over to the web
server that I maintain.  When franz was removed from the net, the
rsync process stopped working.  Around the same time, my web server
was hit with the same or a similar intrusion (possibly from franz) so
it was also removed from the net.  I rebuilt the web pages for Octave
on a different machine.  I'd be happy to resume the rsync process for
the R project CVS archive if whoever is maintaining the master CVS
archive now is interested in doing that.

| Also, the link to http://anoncvs.r-project.org/cgi-bin/cvsweb.cgi at 
| http://anoncvs.r-project.org/ does not work ...

The web access to the anonymous CVS archives has not been restored
because I haven't had time to do it yet, but it should reappear
sometime in the near future.

jwe

From ligges at statistik.uni-dortmund.de  Fri Apr  9 18:20:29 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri Apr  9 18:20:21 2004
Subject: [Rd] R-1.9.0 beta: vignettes for package grid
Message-ID: <4076CD4D.4000305@statistik.uni-dortmund.de>

Since release of R-1.9.0 is very close, let me mention that there seems 
to be a problem when building vignettes for package grid (see below), 
e.g. yesterday's R-1.9.0 beta on Windows NT 4.0.

Uwe Ligges


====================================================

building/updating vignettes for package 'grid' ...
Warning messages:
1: 'viewport.transform' is deprecated.
Use 'current.transform' instead.
See help("Deprecated")
2: 'grid.convertWidth' is deprecated.
Use 'convertWidth' instead.
See help("Deprecated")
3: 'grid.convertHeight' is deprecated.
Use 'convertHeight' instead.
See help("Deprecated")
Error:  chunk 12
Error in c(0, 0, 1) %*% transform : requires numeric matrix/vector arguments
Error in tools:::.installPackageVignettes("../library/grid", 
"../../library/grid
") :
         Error:  chunk 12
Error in c(0, 0, 1) %*% transform : requires numeric matrix/vector arguments
Execution halted

From p.dalgaard at biostat.ku.dk  Fri Apr  9 18:33:39 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri Apr  9 18:36:19 2004
Subject: [Rd] R-1.9.0 beta: vignettes for package grid
In-Reply-To: <4076CD4D.4000305@statistik.uni-dortmund.de>
References: <4076CD4D.4000305@statistik.uni-dortmund.de>
Message-ID: <x28yh5rtzw.fsf@biostat.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> Since release of R-1.9.0 is very close, let me mention that there
> seems to be a problem when building vignettes for package grid (see
> below), e.g. yesterday's R-1.9.0 beta on Windows NT 4.0.
> 
> building/updating vignettes for package 'grid' ...
> Warning messages:
> 1: 'viewport.transform' is deprecated.
> Use 'current.transform' instead.
> See help("Deprecated")
> 2: 'grid.convertWidth' is deprecated.
> Use 'convertWidth' instead.
> See help("Deprecated")
> 3: 'grid.convertHeight' is deprecated.
> Use 'convertHeight' instead.
> See help("Deprecated")
> Error:  chunk 12

This looks familiar... Are you sure that you're not picking up an old
version of something (lattice, say)? I think that last time we saw it,
the reason was either not having run rsync-recommended or having an
older version in the library path.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From msa at biostat.mgh.harvard.edu  Fri Apr  9 18:46:14 2004
From: msa at biostat.mgh.harvard.edu (msa@biostat.mgh.harvard.edu)
Date: Fri Apr  9 18:46:16 2004
Subject: [Rd] Incorrect handling of NA's in cor() (PR#6750)
Message-ID: <20040409164614.9E0AD10478@slim.kubism.ku.dk>

Full_Name: Marek Ancukiewicz
Version: 1.8.1
OS: Linux
Submission from: (NULL) (132.183.12.87)


Function cor() incorrectly handles missing observation with method="spearman":

> x <- c(1,2,3,NA,5,6)
> y <- c(4,NA,2,5,1,3)
> cor(x,y,use="complete.obs",method="s")
[1] -0.1428571
> cor(x[!is.na(x)&!is.na(y)],y[!is.na(x)&!is.na(y)],method="s")
[1] -0.4

These two results should be the same.

From ligges at statistik.uni-dortmund.de  Fri Apr  9 19:07:10 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri Apr  9 19:07:12 2004
Subject: [Rd] Incorrect handling of NA's in cor() (PR#6750)
Message-ID: <20040409170710.1110910476@slim.kubism.ku.dk>

msa@biostat.mgh.harvard.edu wrote:
> Full_Name: Marek Ancukiewicz
> Version: 1.8.1
> OS: Linux
> Submission from: (NULL) (132.183.12.87)
> 
> 
> Function cor() incorrectly handles missing observation with method="spearman":
> 
> 
>>x <- c(1,2,3,NA,5,6)
>>y <- c(4,NA,2,5,1,3)
>>cor(x,y,use="complete.obs",method="s")
> 
> [1] -0.1428571
> 
>>cor(x[!is.na(x)&!is.na(y)],y[!is.na(x)&!is.na(y)],method="s")
> 
> [1] -0.4
> 
> These two results should be the same.
> 


No! Please read at least the help file, ?cor, before submitting a bug 
report:


"If use is "complete.obs" then missing values are handled by casewise 
deletion. Finally, if use has the value "pairwise.complete.obs" then the 
correlation between each pair of variables is computed using all 
complete pairs of observations on those variables."


Hence
   cor(x, y, use="pairwise.complete.obs", method="s")
is what you expect ...

Uwe Ligges

From ripley at stats.ox.ac.uk  Fri Apr  9 19:08:42 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr  9 19:08:49 2004
Subject: [Rd] R-1.9.0 beta: vignettes for package grid
In-Reply-To: <x28yh5rtzw.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0404091805000.12958-100000@gannet.stats>

I have no problems on WinXP, so I agree with Peter: check for R_LIBS set
wrong (which was Stefano's problem last time we saw this) and then for the
current lattice (0.9-10).

On 9 Apr 2004, Peter Dalgaard wrote:

> Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
> 
> > Since release of R-1.9.0 is very close, let me mention that there
> > seems to be a problem when building vignettes for package grid (see
> > below), e.g. yesterday's R-1.9.0 beta on Windows NT 4.0.
> > 
> > building/updating vignettes for package 'grid' ...
> > Warning messages:
> > 1: 'viewport.transform' is deprecated.
> > Use 'current.transform' instead.
> > See help("Deprecated")
> > 2: 'grid.convertWidth' is deprecated.
> > Use 'convertWidth' instead.
> > See help("Deprecated")
> > 3: 'grid.convertHeight' is deprecated.
> > Use 'convertHeight' instead.
> > See help("Deprecated")
> > Error:  chunk 12
> 
> This looks familiar... Are you sure that you're not picking up an old
> version of something (lattice, say)? I think that last time we saw it,
> the reason was either not having run rsync-recommended or having an
> older version in the library path.
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From msa at biostat.mgh.harvard.edu  Fri Apr  9 19:22:43 2004
From: msa at biostat.mgh.harvard.edu (msa@biostat.mgh.harvard.edu)
Date: Fri Apr  9 19:22:45 2004
Subject: [Rd] Incorrect handling of NA's in cor() (PR#6750)
Message-ID: <20040409172243.B026310476@slim.kubism.ku.dk>


Dear Uwe,

You are wrong. First, I've read the help file before
submitting the report. For two variables,
use="pairwise.complete.obs" and use="complete.obs" should be
equivalent, shouldn't it? Of sourse, the results will be
different when we have more than 2 variables. Second, with the
call you proposed I am also getting incorrect result:

> cor(x, y, use="pairwise.complete.obs", method="s")
[1] -0.1428571

The correct result is -0.4, as correctly calculated by
cor.test()

Regards

Marek Ancukiewicz



> X-Original-To: msa@biostat.mgh.harvard.edu
> Date: Fri, 09 Apr 2004 19:06:47 +0200
> From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
> Organization: Fachbereich Statistik, Universitaet Dortmund
> X-Accept-Language: en-us, en, de-de, de
> Cc: R-bugs@biostat.ku.dk
> 
> msa@biostat.mgh.harvard.edu wrote:
> > Full_Name: Marek Ancukiewicz
> > Version: 1.8.1
> > OS: Linux
> > Submission from: (NULL) (132.183.12.87)
> > 
> > 
> > Function cor() incorrectly handles missing observation with method="spearman":
> > 
> > 
> >>x <- c(1,2,3,NA,5,6)
> >>y <- c(4,NA,2,5,1,3)
> >>cor(x,y,use="complete.obs",method="s")
> > 
> > [1] -0.1428571
> > 
> >>cor(x[!is.na(x)&!is.na(y)],y[!is.na(x)&!is.na(y)],method="s")
> > 
> > [1] -0.4
> > 
> > These two results should be the same.
> > 
> 
> 
> No! Please read at least the help file, ?cor, before submitting a bug 
> report:
> 
> 
> "If use is "complete.obs" then missing values are handled by casewise 
> deletion. Finally, if use has the value "pairwise.complete.obs" then the 
> correlation between each pair of variables is computed using all 
> complete pairs of observations on those variables."
> 
> 
> Hence
>    cor(x, y, use="pairwise.complete.obs", method="s")
> is what you expect ...
> 
> Uwe Ligges
>

From ligges at statistik.uni-dortmund.de  Fri Apr  9 19:35:33 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri Apr  9 19:35:36 2004
Subject: [Rd] Incorrect handling of NA's in cor() (PR#6750)
Message-ID: <20040409173533.1F27310476@slim.kubism.ku.dk>

Marek Ancukiewicz wrote:
> Dear Uwe,
> 
> You are wrong. 

Whoops. My apologies!!!


In R-1.9.0 beta I get:

cor(x[!is.na(x)&!is.na(y)],y[!is.na(x)&!is.na(y)],method="s")
# [1] -0.4
cor(x,y,use="complete.obs", method="s")
# [1] -0.5291503

I'll take a look!

Uwe



> First, I've read the help file before
> submitting the report. For two variables,
> use="pairwise.complete.obs" and use="complete.obs" should be
> equivalent, shouldn't it?  Of sourse, the results will be
> different when we have more than 2 variables. Second, with the
> call you proposed I am also getting incorrect result:
> 
> 
>>cor(x, y, use="pairwise.complete.obs", method="s")
> 
> [1] -0.1428571
> 
> The correct result is -0.4, as correctly calculated by
> cor.test()
> 
> Regards
> 
> Marek Ancukiewicz
> 
> 
> 
> 
>>X-Original-To: msa@biostat.mgh.harvard.edu
>>Date: Fri, 09 Apr 2004 19:06:47 +0200
>>From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
>>Organization: Fachbereich Statistik, Universitaet Dortmund
>>X-Accept-Language: en-us, en, de-de, de
>>Cc: R-bugs@biostat.ku.dk
>>
>>msa@biostat.mgh.harvard.edu wrote:
>>
>>>Full_Name: Marek Ancukiewicz
>>>Version: 1.8.1
>>>OS: Linux
>>>Submission from: (NULL) (132.183.12.87)
>>>
>>>
>>>Function cor() incorrectly handles missing observation with method="spearman":
>>>
>>>
>>>
>>>>x <- c(1,2,3,NA,5,6)
>>>>y <- c(4,NA,2,5,1,3)
>>>>cor(x,y,use="complete.obs",method="s")
>>>
>>>[1] -0.1428571
>>>
>>>
>>>>cor(x[!is.na(x)&!is.na(y)],y[!is.na(x)&!is.na(y)],method="s")
>>>
>>>[1] -0.4
>>>
>>>These two results should be the same.
>>>
>>
>>
>>No! Please read at least the help file, ?cor, before submitting a bug 
>>report:
>>
>>
>>"If use is "complete.obs" then missing values are handled by casewise 
>>deletion. Finally, if use has the value "pairwise.complete.obs" then the 
>>correlation between each pair of variables is computed using all 
>>complete pairs of observations on those variables."
>>
>>
>>Hence
>>   cor(x, y, use="pairwise.complete.obs", method="s")
>>is what you expect ...
>>
>>Uwe Ligges
>>

From ligges at statistik.uni-dortmund.de  Fri Apr  9 19:38:42 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri Apr  9 19:38:32 2004
Subject: [Rd] R-1.9.0 beta: vignettes for package grid
In-Reply-To: <Pine.LNX.4.44.0404091805000.12958-100000@gannet.stats>
References: <Pine.LNX.4.44.0404091805000.12958-100000@gannet.stats>
Message-ID: <4076DFA2.1090904@statistik.uni-dortmund.de>

Prof Brian Ripley wrote:

> I have no problems on WinXP, so I agree with Peter: check for R_LIBS set
> wrong (which was Stefano's problem last time we saw this) and then for the
> current lattice (0.9-10).
> 
> On 9 Apr 2004, Peter Dalgaard wrote:
> 
> 
>>Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
>>
>>
>>>Since release of R-1.9.0 is very close, let me mention that there
>>>seems to be a problem when building vignettes for package grid (see
>>>below), e.g. yesterday's R-1.9.0 beta on Windows NT 4.0.
>>>
>>>building/updating vignettes for package 'grid' ...
>>>Warning messages:
>>>1: 'viewport.transform' is deprecated.
>>>Use 'current.transform' instead.
>>>See help("Deprecated")
>>>2: 'grid.convertWidth' is deprecated.
>>>Use 'convertWidth' instead.
>>>See help("Deprecated")
>>>3: 'grid.convertHeight' is deprecated.
>>>Use 'convertHeight' instead.
>>>See help("Deprecated")
>>>Error:  chunk 12
>>
>>This looks familiar... Are you sure that you're not picking up an old
>>version of something (lattice, say)? I think that last time we saw it,
>>the reason was either not having run rsync-recommended or having an
>>older version in the library path.


I have unpacked R-1.9.0beta_latest.tar.gz from CRAN master in Vienna 
into a clean directory. Quite probably, I had set R_LIBS before (in 
order to check some problematic packages for R-1.8.x).

Looking closer, there is lattice_0.9-09.tar.gz and lattice_0.9-10.tar.gz 
included in the R-1.9.0beta_latest.tar.gz, but the link lattice.tgz is 
missing. For that reason, lattice was not available at the default 
location and the outdated version in R_LIBS was found.

Therefore, it seems to be a problem with building the beta snapshot.

Uwe

From tlumley at u.washington.edu  Fri Apr  9 19:42:59 2004
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Fri Apr  9 19:43:12 2004
Subject: [Rd] Incorrect handling of NA's in cor() (PR#6750)
In-Reply-To: <20040409172243.B026310476@slim.kubism.ku.dk>
References: <20040409172243.B026310476@slim.kubism.ku.dk>
Message-ID: <Pine.A41.4.58.0404091032330.61772@homer32.u.washington.edu>

On Fri, 9 Apr 2004 msa@biostat.mgh.harvard.edu wrote:

>
> Dear Uwe,
>
> You are wrong. First, I've read the help file before
> submitting the report. For two variables,
> use="pairwise.complete.obs" and use="complete.obs" should be
> equivalent, shouldn't it? Of sourse, the results will be
> different when we have more than 2 variables. Second, with the
> call you proposed I am also getting incorrect result:
>

I think it's more complicated than either of you are considering.

For the Pearson correlation everything is straightforward, and
pairwise.complete is the same as complete, which is the same as dropping
the NAs manually.

For the rank correlations the question is when the ranking should be done.
The cor() function ranks the observations and then drops missing values,
the manual approach drops missing values and then ranks.

I'm not convinced that it is obvious which of these is right, though
certainly the help page should document whichever is being done.


	-thomas

From rossini at blindglobe.net  Fri Apr  9 19:42:59 2004
From: rossini at blindglobe.net (A.J. Rossini)
Date: Fri Apr  9 19:43:14 2004
Subject: [Rd] anoncvs does not work
In-Reply-To: <16502.49779.912793.240129@devzero.bogus.domain> (John W.
	Eaton's message of "Fri, 9 Apr 2004 10:34:11 -0500")
References: <4076C006.7060706@statistik.uni-dortmund.de>
	<16502.49779.912793.240129@devzero.bogus.domain>
Message-ID: <851xmx11zw.fsf@servant.blindglobe.net>

"John W. Eaton" <jwe@octave.org> writes:

> On  9-Apr-2004, Uwe Ligges <ligges@statistik.uni-dortmund.de> wrote:
>
> | Does anybody now why the anoncvs access does not work?
> | 
> | cvs -d :pserver:anoncvs@anoncvs.r-project.org:/cvs co -P R
> | 
> | cvs [checkout aborted]: connect to 
> | anoncvs.r-project.org(128.104.176.132):2401 failed: Connection refused
> | 
> | Is this still the issue that franz has been compromised?
>
> Yes.  The master CVS archive was on franz and copied over to the web
> server that I maintain.  When franz was removed from the net, the
> rsync process stopped working.  Around the same time, my web server
> was hit with the same or a similar intrusion (possibly from franz) so
> it was also removed from the net.  I rebuilt the web pages for Octave
> on a different machine.  I'd be happy to resume the rsync process for
> the R project CVS archive if whoever is maintaining the master CVS
> archive now is interested in doing that.

I'd really appreciate CVS running again.  rsync is still a PITA,
despite what people think.

best,
-tony

-- 
rossini@u.washington.edu            http://www.analytics.washington.edu/ 
Biomedical and Health Informatics   University of Washington
Biostatistics, SCHARP/HVTN          Fred Hutchinson Cancer Research Center
UW (Tu/Th/F): 206-616-7630 FAX=206-543-3461 | Voicemail is unreliable
FHCRC  (M/W): 206-667-7025 FAX=206-667-4812 | use Email

CONFIDENTIALITY NOTICE: This e-mail message and any attachme...{{dropped}}

From msa at biostat.mgh.harvard.edu  Fri Apr  9 20:08:17 2004
From: msa at biostat.mgh.harvard.edu (Marek Ancukiewicz)
Date: Fri Apr  9 20:08:20 2004
Subject: [Rd] Incorrect handling of NA's in cor() (PR#6750)
In-Reply-To: <Pine.A41.4.58.0404091032330.61772@homer32.u.washington.edu>
	(message from Thomas Lumley on Fri, 9 Apr 2004 10:42:59 -0700 (PDT))
References: <20040409172243.B026310476@slim.kubism.ku.dk>
	<Pine.A41.4.58.0404091032330.61772@homer32.u.washington.edu>
Message-ID: <20040409180817.D6C275E197@biostat.mgh.harvard.edu>


Dear Thomas,

The question becomes: how do we rank missing values?  In
version 1.8.1 at least, cor () uses default handling of
missing values by rank() [by na.last parameter], that is
missing values are assigned the highest rank. However, if
nothing is known about the meaning of NA what would be the
basis of such an assumption?  Assigning the NAs highest,
lowest values, or any other values requires some additional
information.

It seems that the default handling on missing values should be
to assign them missing ranks: within cor(), rank() should be
called with na.last="keep". However, cor() could have an
additional parameter, such as na.rank which would allow to
account for known ranking of missing values, and which would 
be passed to rank()

By the way, if this were possible [and probably it isn't
because of compatibility with Splus] I would change, in rank()
the naming of "na.last" parameter to "na.rank" with values
such as "last", "first","remove", and "na". That would seem
easier to remember. Also, perhaps the default value should be
"na".

Regards,

Marek


> X-Original-To: msa@biostat.mgh.harvard.edu
> Date: Fri, 9 Apr 2004 10:42:59 -0700 (PDT)
> From: Thomas Lumley <tlumley@u.washington.edu>
> Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> 
> On Fri, 9 Apr 2004 msa@biostat.mgh.harvard.edu wrote:
> 
> >
> > Dear Uwe,
> >
> > You are wrong. First, I've read the help file before
> > submitting the report. For two variables,
> > use="pairwise.complete.obs" and use="complete.obs" should be
> > equivalent, shouldn't it? Of sourse, the results will be
> > different when we have more than 2 variables. Second, with the
> > call you proposed I am also getting incorrect result:
> >
> 
> I think it's more complicated than either of you are considering.
> 
> For the Pearson correlation everything is straightforward, and
> pairwise.complete is the same as complete, which is the same as dropping
> the NAs manually.
> 
> For the rank correlations the question is when the ranking should be done.
> The cor() function ranks the observations and then drops missing values,
> the manual approach drops missing values and then ranks.
> 
> I'm not convinced that it is obvious which of these is right, though
> certainly the help page should document whichever is being done.
> 
> 
> 	-thomas
>

From p.dalgaard at biostat.ku.dk  Fri Apr  9 20:09:28 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri Apr  9 20:12:08 2004
Subject: [Rd] R-1.9.0 beta: vignettes for package grid
In-Reply-To: <4076DFA2.1090904@statistik.uni-dortmund.de>
References: <Pine.LNX.4.44.0404091805000.12958-100000@gannet.stats>
	<4076DFA2.1090904@statistik.uni-dortmund.de>
Message-ID: <x24qrtrpk7.fsf@biostat.ku.dk>

Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:

> Looking closer, there is lattice_0.9-09.tar.gz and
> lattice_0.9-10.tar.gz included in the R-1.9.0beta_latest.tar.gz, but
> the link lattice.tgz is missing. For that reason, lattice was not
> available at the default location and the outdated version in R_LIBS
> was found.
> 
> Therefore, it seems to be a problem with building the beta snapshot.

Odd... Will check.

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From tlumley at u.washington.edu  Fri Apr  9 20:22:25 2004
From: tlumley at u.washington.edu (tlumley@u.washington.edu)
Date: Fri Apr  9 20:22:29 2004
Subject: [Rd] Incorrect handling of NA's in cor() (PR#6750)
Message-ID: <20040409182225.86F0B10478@slim.kubism.ku.dk>

On Fri, 9 Apr 2004, Marek Ancukiewicz wrote:

>
> Dear Thomas,
>
> The question becomes: how do we rank missing values?

That's one of the questions.  It's not the only question.  Suppose x has
no missing values but y has a missing value.  Should the ranks for x be
based on the whole vector or just on the values where y isn't missing?

	-thomas

From p.dalgaard at biostat.ku.dk  Fri Apr  9 20:25:19 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri Apr  9 20:28:00 2004
Subject: [Rd] R-1.9.0 beta: vignettes for package grid
In-Reply-To: <x24qrtrpk7.fsf@biostat.ku.dk>
References: <Pine.LNX.4.44.0404091805000.12958-100000@gannet.stats>
	<4076DFA2.1090904@statistik.uni-dortmund.de>
	<x24qrtrpk7.fsf@biostat.ku.dk>
Message-ID: <x2zn9lqa9c.fsf@biostat.ku.dk>

Peter Dalgaard <p.dalgaard@biostat.ku.dk> writes:

> Uwe Ligges <ligges@statistik.uni-dortmund.de> writes:
> 
> > Looking closer, there is lattice_0.9-09.tar.gz and
> > lattice_0.9-10.tar.gz included in the R-1.9.0beta_latest.tar.gz, but
> > the link lattice.tgz is missing. For that reason, lattice was not
> > available at the default location and the outdated version in R_LIBS
> > was found.
> > 
> > Therefore, it seems to be a problem with building the beta snapshot.
> 
> Odd... Will check.
> 

Odd indeed. tools/rsync-recommended doesn't seem to work on bates4:

pd@bates4:~/r-devel/R$ tools/rsync-recommended
receiving file list ... done

wrote 167 bytes  read 531 bytes  279.20 bytes/sec
total size is 2930233  speedup is 4198.04
Creating links
ln: when making multiple links, last argument must be a directory
ln: when making multiple links, last argument must be a directory
pd@bates4:~/r-devel/R$ ls src/library/Recommended/
CVS                        cluster.tgz            nlme.tgz
KernSmooth.tgz             cluster_1.9.1.tar.gz   nlme_3.1-48.tar.gz
KernSmooth_2.22-13.tar.gz  foreign.tgz            rpart.tgz
Makefile.in                foreign_0.6-6.tar.gz   rpart_3.1-15.tar.gz
VR.tgz                     lattice_0.9-10.tar.gz  survival.tgz
VR_7.2-1.tar.gz            lattice_0.9-9.tar.gz
survival_2.11-4.tar.gz
boot.tgz                   mgcv_1.0-4.tar.gz
boot_1.2-16.tar.gz         mgcv_1.0-5.tar.gz

Manually removing lattice and mgcv and retrying seems to have put
things back in whack, but the --delete option to rsync ought to do
that automagically, as I believe it has on my other machines.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Fri Apr  9 20:37:23 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Fri Apr  9 20:40:02 2004
Subject: [Rd] Incorrect handling of NA's in cor() (PR#6750)
In-Reply-To: <20040409180817.D6C275E197@biostat.mgh.harvard.edu>
References: <20040409172243.B026310476@slim.kubism.ku.dk>
	<Pine.A41.4.58.0404091032330.61772@homer32.u.washington.edu>
	<20040409180817.D6C275E197@biostat.mgh.harvard.edu>
Message-ID: <x2vfk9q9p8.fsf@biostat.ku.dk>

Marek Ancukiewicz <msa@biostat.mgh.harvard.edu> writes:

> Dear Thomas,
> 
> The question becomes: how do we rank missing values?  In
> version 1.8.1 at least, cor () uses default handling of
> missing values by rank() [by na.last parameter], that is
> missing values are assigned the highest rank. However, if
> nothing is known about the meaning of NA what would be the
> basis of such an assumption?  Assigning the NAs highest,
> lowest values, or any other values requires some additional
> information.
> 
> It seems that the default handling on missing values should be
> to assign them missing ranks: within cor(), rank() should be
> called with na.last="keep". 

Yes, and that is what 1.9.0beta is doing (it's not like this issue
hasn't been brought up before, just that the fix didn't quite fix it).
I think what we have now is still buggy, but at least it isn't biasing
rho towards +1 whenever x and y tend to be both missing at the same
time.

It's fairly easy to do something more sensible in the complete.cases
case, but getting pairwise.complete.cases right is tricky. 1.9.0
is in deep code freeze, so I don't think we should change things at
this point, except perhaps add a note to the help page.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Fri Apr  9 20:40:34 2004
From: p.dalgaard at biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Fri Apr  9 20:40:36 2004
Subject: [Rd] Incorrect handling of NA's in cor() (PR#6750)
Message-ID: <20040409184034.94CC610478@slim.kubism.ku.dk>

Marek Ancukiewicz <msa@biostat.mgh.harvard.edu> writes:

> Dear Thomas,
> 
> The question becomes: how do we rank missing values?  In
> version 1.8.1 at least, cor () uses default handling of
> missing values by rank() [by na.last parameter], that is
> missing values are assigned the highest rank. However, if
> nothing is known about the meaning of NA what would be the
> basis of such an assumption?  Assigning the NAs highest,
> lowest values, or any other values requires some additional
> information.
> 
> It seems that the default handling on missing values should be
> to assign them missing ranks: within cor(), rank() should be
> called with na.last="keep". 

Yes, and that is what 1.9.0beta is doing (it's not like this issue
hasn't been brought up before, just that the fix didn't quite fix it).
I think what we have now is still buggy, but at least it isn't biasing
rho towards +1 whenever x and y tend to be both missing at the same
time.

It's fairly easy to do something more sensible in the complete.cases
case, but getting pairwise.complete.cases right is tricky. 1.9.0
is in deep code freeze, so I don't think we should change things at
this point, except perhaps add a note to the help page.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From msa at biostat.mgh.harvard.edu  Fri Apr  9 21:50:14 2004
From: msa at biostat.mgh.harvard.edu (msa@biostat.mgh.harvard.edu)
Date: Fri Apr  9 21:50:21 2004
Subject: [Rd] Incorrect handling of NA's in cor() (PR#6750)
Message-ID: <20040409195014.708A410476@slim.kubism.ku.dk>


> X-Original-To: msa@biostat.mgh.harvard.edu
> Date: Fri, 9 Apr 2004 11:21:47 -0700 (PDT)
> From: Thomas Lumley <tlumley@u.washington.edu>
> Cc: R-bugs@biostat.ku.dk
> 
> On Fri, 9 Apr 2004, Marek Ancukiewicz wrote:
> 
> >
> > Dear Thomas,
> >
> > The question becomes: how do we rank missing values?
> 
> That's one of the questions.  It's not the only question.  Suppose x has
> no missing values but y has a missing value.  Should the ranks for x be
> based on the whole vector or just on the values where y isn't missing?
> 
> 	-thomas

I see what you mean. 

One could give an argument in favour of each of these
approaches. If we treat data primarily as pairs of values (or
more generally, cases) then we should discard incomplete pairs
(records) first and rank afterwards. If we consider x and y
primarily as separate from each other (especially with regard
to how the missing values arise) then a more natural approach
would be to do ranking before dropping incomplete pairs. In
the later approach we use more information in the data; in the
former approach we ignore the information which might be
spurious, especially when missing y values tend to coincide
with high (low) x values. Dropping NAs first and ranking later
seems to be a conservative approach; with the other approach
on should probably always check if NAs in one variable are
correlated with other variables.

My understanding is that cor() in 1.9.0 will do ranking
independently, before dropping missing pairs/cases. It would
be good to have this documented in help(), it might be also
good to add a warning on perils of the analysis with missing
values when occurrences of NAs in one variable are correlated
with other variables.

Marek

From announcements-account at paypal.com  Sat Apr 10 15:12:09 2004
From: announcements-account at paypal.com (announcements-account@paypal.com)
Date: Sat Apr 10 15:12:11 2004
Subject: [Rd] We are unable to process your service request - MAR
	(KMM48693904V2673L0KM) (PR#6752)
Message-ID: <20040410131209.C403B1041E@slim.kubism.ku.dk>



Thank you for contacting PayPal!

Unfortunately, we were unable to process your service request. This was due
to a change in the original email subject or not utilizing the customized 
contact form via the website.

In order for us to provide the best customer service possible, we ask that 
you log into your account at https://www.paypal.com by entering your email 
address and password in the Member Login box, and re-submit your service 
request via the 'Help' link found on the top of your Account Overview page.
You will be able to access the customized contact form by clicking the 
'Contact Us' link found on any page of the Help Center. You can also get 
there by clicking the following link:  https://www.paypal.com/wf/f=default 


Please note:

Do not reply to this email as replies will not be answered. Please visit 
our online Help Center and contact us via the website so that we can better
serve your needs. 

------------------------------------------------------------------------
Note: When you click on links in this email, you will be asked to log into 
your PayPal Account. As always, make sure that you are logging into a 
secure PayPal page by looking for 'https://www.paypal.com/' at the 
beginning of the URL.

From chris_serge at yahoo.com  Sun Apr 11 14:15:49 2004
From: chris_serge at yahoo.com (=?iso-8859-1?q?c=20h=20r=20i=20s=20t=20i=20a=20n=20o=20!?=)
Date: Sun Apr 11 14:15:57 2004
Subject: [Rd] Information
Message-ID: <20040411121549.37058.qmail@web9801.mail.yahoo.com>

Sorry that i write you.. (i found your email in https://www.stat.math.ethz.ch/pipermail/r-devel/2004-April/029309.html) well.. i am looking for some piece of code of Bagle Virus.. for my assignemnet.. i was looking in virus code project and i have 3 hours around internet..but still nothing.. if you have some information or know some site..please send me.
Thanks for your time.
Best Regards



     c  h  r  i  s  t  i  a  n  s  e  r  g  e  m  a  n  s  i  l  l  a 
                   #65213;             #265;     #292;     #342;     #322;     #350;     #8298;     #9474;     #7853;     #1055;           #65212;
 








---------------------------------

Todo lo que quieres saber de Estados Unidos, Amrica Latina y el resto del Mundo.
Vista Yahoo! Noticias.

	[[alternative HTML version deleted]]

From terra at gnome.org  Sun Apr 11 19:04:01 2004
From: terra at gnome.org (terra@gnome.org)
Date: Sun Apr 11 19:04:05 2004
Subject: [Rd] pcauchy precision (PR#6756)
Message-ID: <20040411170401.3E7FBEDF1@slim.kubism.ku.dk>

Full_Name: Morten Welinder
Version: snapshot
OS: 
Submission from: (NULL) (65.213.85.129)


Two things are wrong.

1. There is nan test outside IEEE_754.
2. The meat part of the function should really be something like...

    if (!lower_tail)
	    x = -x;

    if (fabs (x) > 1) {
	    double temp = atan (1 / x) / M_PI;
	    return (x > 0) ? R_D_Clog (temp) : R_D_val (-temp);
    } else
	    return R_D_val (0.5 + atan (x) / M_PI);

...instead of the current heavily truncated series expansion.  The above is
much
simpler and more precise.  (Thanks to Ian Smith for pointing the in-hindsight-
obvious 1/x trick out.)

From terra at gnome.org  Mon Apr 12 17:20:53 2004
From: terra at gnome.org (terra@gnome.org)
Date: Mon Apr 12 17:20:55 2004
Subject: [Rd] pbinom accuracy (PR#6757)
Message-ID: <20040412152053.2910DEDE2@slim.kubism.ku.dk>

Full_Name: Morten Welinder
Version: snapshot
OS: 
Submission from: (NULL) (65.213.85.129)


There is really no good reason for throwing part of p's precision away in
pbinom.
Using Ambramowitz & Stegun 26.5.2:

-    return pbeta(1 - p, n - x, x + 1, lower_tail, log_p);
+    return pbeta (p, x + 1, n - x, !lower_tail, log_p);

From dgrove at fhcrc.org  Tue Apr 13 01:45:58 2004
From: dgrove at fhcrc.org (dgrove@fhcrc.org)
Date: Tue Apr 13 01:46:00 2004
Subject: [Rd] axis annotation issue (PR#6758)
Message-ID: <20040412234558.E3CD6EAE6@slim.kubism.ku.dk>

Full_Name: Doug Grove
Version: 1.8.1 Patched (1-11-04)
OS: Linux, RedHat 9.0
Submission from: (NULL) (140.107.156.61)


The issue may be broader than this, but I'm finding that when I 
specify that the axis annotation be perpendicular to the axes, and
I change the annotation size (using cex.axis) the character size
inflation/deflation occurs in only one direction, from the bottom up.
More precisely, if you were to plot using cex.axis all is good, but if
you shrink or expand, the position of the bottom of the character(s)
stay fixed and the top of the character(s) move to create the
appropriate size.  The end effect is a annotation that is not centered
about the tick mark.  In the particular case of decreasing the size,
it gives the appearance that the label is shifted (I spent a few hours
one day trying to "fix" my code thinking I had done something wrong).


To see the issue just compare these three plots:

plot(1:5, 1:5, cex.axis=1, las=2)
plot(1:5, 1:5, cex.axis=.5, las=2)
plot(1:5, 1:5, cex.axis=2, las=2)

I'm not sure that this is a "bug", but I was not able to find
a simple way to correct this behaviour.

Thanks,
Doug Grove

From maechler at stat.math.ethz.ch  Tue Apr 13 09:07:59 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue Apr 13 09:08:03 2004
Subject: [Rd] pcauchy precision (PR#6756)
Message-ID: <20040413070759.A136BEAE3@slim.kubism.ku.dk>

>>>>> "Morten" == Morten Welinder <terra@gnome.org>
>>>>>     on Sun, 11 Apr 2004 19:04:01 +0200 (CEST) writes:

    Morten> Full_Name: Morten Welinder Version: snapshot   OS:..
    Morten> Submission from: (NULL) (65.213.85.129)


    Morten> Two things are wrong.

    Morten> 1. There is nan test outside IEEE_754.

No, that's not wrong.  nmath.h *does* define ISNAN() also "outside IEEE_754"

    Morten> 2. The meat part of the function should really be something
    Morten> like...

    Morten>     if (!lower_tail) x = -x;

good idea for code simplification.  No bug in the current code though.

    Morten>     if (fabs (x) > 1) { double temp = atan (1 / x) /
    Morten> M_PI; return (x > 0) ? R_D_Clog (temp) : R_D_val
    Morten> (-temp); } else return R_D_val (0.5 + atan (x) /
    Morten> M_PI);

    Morten> ...instead of the current heavily truncated series
    Morten> expansion.  The above is much simpler 

"simpler": yes.

    Morten> and more precise.

That's quite a strong claim  which you haven't supported by any evidence!

I don't think there's a precision loss in the current code,
particularly not where the  "heavily truncated series" is used.
I've been very careful to use it only where it's fully accurate.
I would expect that your code may be more accurate (2-3 digits)
when 1 <= |x| <= x_big := 5478.3.  But the current code might well be
more accurate for |x| >= x_big - particularly for cases where
the C "libm" atan() implementation isn't quite perfect.

    Morten>   (Thanks to Ian Smith for pointing the
    Morten> in-hindsight- obvious 1/x trick out.)

I agree that's a cute idea / "trick".

Still, I haven't seen any bug in the current code!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

From maechler at stat.math.ethz.ch  Tue Apr 13 09:38:34 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue Apr 13 09:38:54 2004
Subject: [Rd] pbinom accuracy (PR#6757)
Message-ID: <20040413073834.E888FFE9B@slim.kubism.ku.dk>

>>>>> "Morten" == Morten Welinder <terra@gnome.org>
>>>>>     on Mon, 12 Apr 2004 17:20:53 +0200 (CEST) writes:

    Morten> Full_Name: Morten Welinder
    Morten> Version: snapshot
    Morten> OS: 
    Morten> Submission from: (NULL) (65.213.85.129)


    Morten> There is really no good reason for throwing part of
    Morten> p's precision away in pbinom.  Using Ambramowitz &
    Morten> Stegun 26.5.2:

    Morten> -    return pbeta(1 - p, n - x, x + 1, lower_tail, log_p);
    Morten> +    return pbeta (p, x + 1, n - x, !lower_tail, log_p);

Indeed!
Thank you for the fix.

Martin M?chler

From terra at gnome.org  Tue Apr 13 16:15:15 2004
From: terra at gnome.org (terra@gnome.org)
Date: Tue Apr 13 16:15:18 2004
Subject: [Rd] pcauchy precision (PR#6756)
Message-ID: <20040413141515.37A1FFE9B@slim.kubism.ku.dk>


The current code has xbig such that the x^5 term is beyond the precision
limit (although I would use 2.5 instead of  5 in the xbig formula).  You
get xbig ~5478, I get xbig ~179513609.  That is about log_2 (5478) = 12.5
bits lost to cancelation in your case and 27.5 bits in my case.  If you
want those numbers down and still use a series expansion, you need to have
a lot more terms so you can get xbig down.

By the way, your xbig point is valid only for log_p==FALSE.  For log_p==TRUE
it needs to be higher.

I don't see why you would be worried over atan's performance in the [-1;+1]
interval given that the main branch already relies on atan in that interval.

Numbers...   There is nothing like numbers.  I hacked up a comparison in
IEEE double space, i.e., 53-bit mantissa.  I calculated a reference value
using 113-bit mantissa arithmetic (using the 1/x method and Sun's high-
performance libraries) with the result cast back to 53-bit.

Fix loc=0 and scale=1 and let eR be the current R method's relative error
and let eN be the proposed method's relative error.  Then we have the table
below.

Conclusions...

1. The series expansion loses 3-4 digits just below xbig.
2. The series expansion loses 2-3 digits just above xbig for log_p==TRUE.
3. The series version isn't even used for x>xbig and lower==TRUE.  That
   makes R's log_p==TRUE performance awful.

Morten


troll:~> for x in 1 10 100 1000 5478 5459 6000 7000 8000 9000 10000 100000 1000000 10000000 100000000; do ./a.out $x 0; done
x=         1  y=       -0.2876820725  lt=1  log=1  eR=                  -0  eN=                  -0
x=         1  y=                0.75  lt=1  log=0  eR=                   0  eN=                   0
x=         1  y=        -1.386294361  lt=0  log=1  eR=                  -0  eN=                  -0
x=         1  y=                0.25  lt=0  log=0  eR=                   0  eN=                   0
x=        10  y=      -0.03223967553  lt=1  log=1  eR=    -1.721827231e-15  eN=                  -0
x=        10  y=        0.9682744826  lt=1  log=0  eR=                   0  eN=                   0
x=        10  y=        -3.450633956  lt=0  log=1  eR=     3.860935836e-16  eN=                  -0
x=        10  y=       0.03172551743  lt=0  log=0  eR=    -1.531015449e-15  eN=     2.187164928e-16
x=       100  y=     -0.003188069262  lt=1  log=1  eR=    -2.122106203e-14  eN=                  -0
x=       100  y=        0.9968170072  lt=1  log=0  eR=     1.113768141e-16  eN=                   0
x=       100  y=        -5.749933404  lt=0  log=1  eR=     3.707222428e-15  eN=                  -0
x=       100  y=      0.003182992765  lt=0  log=0  eR=    -2.111865771e-14  eN=                   0
x=      1000  y=    -0.0003183604514  lt=1  log=1  eR=    -1.323068058e-13  eN=     1.702790293e-16
x=      1000  y=        0.9996816902  lt=1  log=0  eR=                   0  eN=                   0
x=      1000  y=        -8.052485498  lt=0  log=1  eR=     1.632420278e-14  eN=                  -0
x=      1000  y=     0.0003183097801  lt=0  log=0  eR=    -1.323278675e-13  eN=     1.703061358e-16
x=      5478  y=     -5.81086402e-05  lt=1  log=1  eR=    -1.604954363e-12  eN=     1.166137007e-16
x=      5478  y=         0.999941893  lt=1  log=0  eR=      1.11028754e-16  eN=                   0
x=      5478  y=        -9.753225247  lt=0  log=1  eR=     1.644635682e-13  eN=                  -0
x=      5478  y=     5.810695193e-05  lt=0  log=0  eR=    -1.605000994e-12  eN=     1.166170889e-16
x=      5459  y=    -5.831089269e-05  lt=1  log=1  eR=      -3.7128847e-13  eN=                  -0
x=      5459  y=        0.9999416908  lt=1  log=0  eR=                   0  eN=                   0
x=      5459  y=        -9.749750799  lt=0  log=1  eR=     3.807877628e-14  eN=                  -0
x=      5459  y=     5.830919264e-05  lt=0  log=0  eR=    -3.711830826e-13  eN=      1.16212612e-16
x=      6000  y=    -5.305305449e-05  lt=1  log=1  eR=     1.294887935e-12  eN=                  -0
x=      6000  y=        0.9999469484  lt=1  log=0  eR=    -1.110281927e-16  eN=                   0
x=      6000  y=        -9.844244643  lt=0  log=1  eR=                  -0  eN=                  -0
x=      6000  y=     5.305164721e-05  lt=0  log=0  eR=                   0  eN=                   0
x=      7000  y=     -4.54738745e-05  lt=1  log=1  eR=     9.137564969e-13  eN=      1.49014432e-16
x=      7000  y=        0.9999545272  lt=1  log=0  eR=                   0  eN=                   0
x=      7000  y=        -9.998395321  lt=0  log=1  eR=     1.776641933e-16  eN=                  -0
x=      7000  y=     4.547284057e-05  lt=0  log=0  eR=                   0  eN=     1.490178201e-16
x=      8000  y=    -3.978952716e-05  lt=1  log=1  eR=    -2.308452986e-12  eN=                  -0
x=      8000  y=        0.9999602113  lt=1  log=0  eR=     1.110267201e-16  eN=                   0
x=      8000  y=        -10.13192671  lt=0  log=1  eR=                  -0  eN=                  -0
x=      8000  y=     3.978873557e-05  lt=0  log=0  eR=                   0  eN=                   0
x=      9000  y=    -3.536839044e-05  lt=1  log=1  eR=     1.170620714e-12  eN=                  -0
x=      9000  y=        0.9999646322  lt=1  log=0  eR=                   0  eN=                   0
x=      9000  y=        -10.24970975  lt=0  log=1  eR=    -1.733080139e-16  eN=                  -0
x=      9000  y=     3.536776499e-05  lt=0  log=0  eR=                   0  eN=     1.915943397e-16
x=     10000  y=    -3.183149513e-05  lt=1  log=1  eR=     1.955295556e-12  eN=     2.128792113e-16
x=     10000  y=         0.999968169  lt=1  log=0  eR=    -1.110258365e-16  eN=                   0
x=     10000  y=        -10.35507026  lt=0  log=1  eR=                  -0  eN=                  -0
x=     10000  y=     3.183098851e-05  lt=0  log=0  eR=                   0  eN=     2.128825995e-16
x=    100000  y=    -3.183103928e-06  lt=1  log=1  eR=    -5.496886055e-12  eN=     1.330514125e-16
x=    100000  y=        0.9999968169  lt=1  log=0  eR=                   0  eN=                   0
x=    100000  y=        -12.65765535  lt=0  log=1  eR=    -1.403385374e-16  eN=    -1.403385374e-16
x=    100000  y=     3.183098862e-06  lt=0  log=0  eR=     1.330516242e-16  eN=     1.330516242e-16
x=   1000000  y=    -3.183099368e-07  lt=1  log=1  eR=     1.358965789e-10  eN=    -1.663145038e-16
x=   1000000  y=        0.9999996817  lt=1  log=0  eR=                   0  eN=                   0
x=   1000000  y=        -14.96024044  lt=0  log=1  eR=                  -0  eN=                  -0
x=   1000000  y=     3.183098862e-07  lt=0  log=0  eR=     1.663145303e-16  eN=                   0
x=  10000000  y=    -3.183098912e-08  lt=1  log=1  eR=    -3.352301937e-09  eN=                  -0
x=  10000000  y=        0.9999999682  lt=1  log=0  eR=      1.11022306e-16  eN=                   0
x=  10000000  y=        -17.26282554  lt=0  log=1  eR=                  -0  eN=                  -0
x=  10000000  y=     3.183098862e-08  lt=0  log=0  eR=                   0  eN=                   0
x= 100000000  y=    -3.183098867e-09  lt=1  log=1  eR=     1.059916874e-08  eN=                  -0
x= 100000000  y=        0.9999999968  lt=1  log=0  eR=                   0  eN=                   0
x= 100000000  y=        -19.56541063  lt=0  log=1  eR=                  -0  eN=                  -0
x= 100000000  y=     3.183098862e-09  lt=0  log=0  eR=     1.299332268e-16  eN=                   0
x=1000000000  y=    -3.183098862e-10  lt=1  log=1  eR=    -1.986729412e-07  eN=                  -0
x=1000000000  y=        0.9999999997  lt=1  log=0  eR=     1.110223025e-16  eN=                   0
x=1000000000  y=        -21.86799572  lt=0  log=1  eR=                  -0  eN=                  -0
x=1000000000  y=     3.183098862e-10  lt=0  log=0  eR=     1.624165335e-16  eN=     1.624165335e-16
x=     1e+10  y=    -3.183098862e-11  lt=1  log=1  eR=    -1.986729413e-07  eN=                  -0
x=     1e+10  y=                   1  lt=1  log=0  eR=                   0  eN=                   0
x=     1e+10  y=        -24.17058082  lt=0  log=1  eR=                  -0  eN=                  -0
x=     1e+10  y=     3.183098862e-11  lt=0  log=0  eR=     2.030206668e-16  eN=     2.030206668e-16
x=     1e+11  y=    -3.183098862e-12  lt=1  log=1  eR=     6.777064055e-06  eN=                  -0
x=     1e+11  y=                   1  lt=1  log=0  eR=                   0  eN=                   0
x=     1e+11  y=        -26.47316591  lt=0  log=1  eR=                  -0  eN=                  -0
x=     1e+11  y=     3.183098862e-12  lt=0  log=0  eR=                   0  eN=                   0

From notulei at yahoo.com  Tue Apr 13 16:35:01 2004
From: notulei at yahoo.com (Alex Nu)
Date: Tue Apr 13 16:35:07 2004
Subject: [Rd] shared mem advice
Message-ID: <20040413143501.48691.qmail@web60106.mail.yahoo.com>


 Hi,

 I want to write a package where I would use
 shared memory for some vectors
 
 Any suggestion is appreciated...

 I wonder if the right approach would be to 
 modify add a modified version of the 

 allocVector(SEXPTYPE type, int length) function

 specifically

 shared_mem_id = shmget(shared_mem_key,
                        SHM_SIZE,                   
                        IPC_CREAT);

 shared = (SEXP) shmat(shared_mem_id, (void *)0, 0);


 my_allocVector(SEXPTYPE type, int length, SEXP 
                shared) {
  
 SEXP s=shared;
 ....

 And erase this if:

#################################################
 if(size >= 
    (LONG_MAX / sizeof(VECREC))-sizeof(SEXPREC_ALIGN)
     ||
    (s = 
    malloc(sizeof(SEXPREC_ALIGN) + size *
           sizeof(VECREC))
   )
    == NULL) { {
#################################################

 Alex

From tlumley at u.washington.edu  Tue Apr 13 16:40:33 2004
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue Apr 13 16:40:38 2004
Subject: [Rd] shared mem advice
In-Reply-To: <20040413143501.48691.qmail@web60106.mail.yahoo.com>
References: <20040413143501.48691.qmail@web60106.mail.yahoo.com>
Message-ID: <Pine.A41.4.58.0404130737530.106200@homer38.u.washington.edu>

On Tue, 13 Apr 2004, Alex Nu wrote:

>
>  Hi,
>
>  I want to write a package where I would use
>  shared memory for some vectors
>
>  Any suggestion is appreciated...

I'd recommend looking at external pointer objects.  If the developer
webpage were working, that would be the place to look. I'm not sure where
else there is information.

>
>  I wonder if the right approach would be to
>  modify add a modified version of the
>
>  allocVector(SEXPTYPE type, int length) function
>
>  specifically
>
>  shared_mem_id = shmget(shared_mem_key,
>                         SHM_SIZE,
>                         IPC_CREAT);
>
>  shared = (SEXP) shmat(shared_mem_id, (void *)0, 0);

No, you want the shared memory to hold the data of the vector, not the
header record that the SEXP points to.  If you do it this way you want to
look at how memory.c:allocVector uses malloc() for large vectors.

	-thomas

>
>  my_allocVector(SEXPTYPE type, int length, SEXP
>                 shared) {
>
>  SEXP s=shared;
>  ....
>
>  And erase this if:
>
> #################################################
>  if(size >=
>     (LONG_MAX / sizeof(VECREC))-sizeof(SEXPREC_ALIGN)
>      ||
>     (s =
>     malloc(sizeof(SEXPREC_ALIGN) + size *
>            sizeof(VECREC))
>    )
>     == NULL) { {
> #################################################
>
>  Alex
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

From p.dalgaard at biostat.ku.dk  Tue Apr 13 17:24:42 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Tue Apr 13 17:27:38 2004
Subject: [Rd] shared mem advice
In-Reply-To: <Pine.A41.4.58.0404130737530.106200@homer38.u.washington.edu>
References: <20040413143501.48691.qmail@web60106.mail.yahoo.com>
	<Pine.A41.4.58.0404130737530.106200@homer38.u.washington.edu>
Message-ID: <x2k70jc345.fsf@biostat.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On Tue, 13 Apr 2004, Alex Nu wrote:
> 
> >
> >  Hi,
> >
> >  I want to write a package where I would use
> >  shared memory for some vectors
> >
> >  Any suggestion is appreciated...
> 
> I'd recommend looking at external pointer objects.  If the developer
> webpage were working, that would be the place to look. I'm not sure where
> else there is information.


http://www.stat.uiowa.edu/~luke/R is a good guess. Apart from that,
there's some relatively simple usage of such things in the tcltk
package.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From dmurdoch at pair.com  Tue Apr 13 17:31:53 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Tue Apr 13 17:31:55 2004
Subject: [Rd] Re: [R] Execute function at startup
In-Reply-To: <407BF7AD.2050506@univie.ac.at>
References: <407BF7AD.2050506@univie.ac.at>
Message-ID: <tn0o70lutaaj3mk2216ltaees6svcugpms@4ax.com>

As far as I know what you're asking for doesn't exist, so I've moved
this discussion to r-devel.

On Tue, 13 Apr 2004 16:22:37 +0200, Erich Neuwirth
<erich.neuwirth@univie.ac.at> wrote :

>It would be convenient to have something like
>Rgui runfist="myfunction()"
>in Windows.

That looks as though you're creating an environment variable named
"runfist".  I'd rather use some different syntax than that...

>The reason:
>AFAIK Rgui does not accept piped input
>(RGui < myfile.R does not seem to work).

That would be hard to implement, as most people start Rgui using a
shortcut, and shortcuts don't support I/O redirection.

However, I think it would be useful to be able to source a file
somehow.  I can see a couple of different possibilities:

Rgui --exec source('myfile.R')

or 

Rgui --source myfile.R

The semantics would be that the code is executed after all other
initialization is done (profile executed, user's saved image restored,
etc.), just as if it had been typed in the console.  When it's done,
control returns to the console (unless there's a q() in the commands).

>A solution could be to put a few fuctions in Rprofile and then
>give the name for one of these functions to be executed at startup as
>a command line parameter to Rgui.
>
>Can something like this be done?

Not now, but I think we should have something like this for 2.0.0.
There's already been some discussion about whether the bug fix to
.Profile is desirable (it's now run before most packages are
attached).  It makes sense to me to have a way of running code there,
and also to have a way to run code just before the system gives
control to the user.  

Duncan Murdoch

From rbaer at atsu.edu  Tue Apr 13 18:27:40 2004
From: rbaer at atsu.edu (rbaer@atsu.edu)
Date: Tue Apr 13 18:27:45 2004
Subject: [Rd] Wishlist  - Windows Gui keyboard select (PR#6762)
Message-ID: <20040413162740.D5F7EF123@slim.kubism.ku.dk>

Full_Name: Robert Baer
Version: 1.9.0
OS: Windows 2002
Submission from: (NULL) (198.209.172.106)


In a command line interface like R, keyboard selection for copying is more
"natural" than mouse selecting.  I would WISH that Shift-arrow key could be used
to select R commands for cutting and pasting command text.

In most Windows programs/Editors, holding down shift and using the "arrow keys"
selects/deselects text from the inital cursor postion in the dirction of the
arrow key pressed "left, right, up, down".  It would be nice if R Windows GUI
mirrored this convention at least for the left and right arrows.  

Because the "base position" would be the KEYBOARD cursor position, and by design
that is always on the bottom line in RGUI, the down arrow would probably only be
used to deselect what had been previously selected.  Selection with the up arrow
key becomes meaningful as of version 1.9.0 now that there is a paste commands
only available.

From jonathan_lees at unc.edu  Tue Apr 13 23:39:25 2004
From: jonathan_lees at unc.edu (jonathan_lees@unc.edu)
Date: Tue Apr 13 23:39:27 2004
Subject: [Rd] postscript image problem (PR#6763)
Message-ID: <20040413213925.A0BEFFB93@slim.kubism.ku.dk>

Full_Name: Jonathan Lees
Version: 1.8.1
OS: GNU/Linux   2.4.20-20.8smp #1 SMP
Submission from: (NULL) (152.2.75.114)


I am having trouble with the postscript output of images.
They have lines on them that are not supposed to be there.
I have noticed this on numerous trials of printing various images.
I looked at the postscript and I see that it
appears to plot each individual block - so perhaps occasionally the 
space between the blocks "leaks" through do to round off,
thus contaminating the image.
this could be solved if the image software used postscript
image plotting functions.

Here is an example of some code:

postscript(file ="test.ps" , onefile=FALSE, print.it=FALSE)


w<-5 #width of central square
m=w
xn<- 128; yn<- 128
im<- matrix(0,nrow=yn,ncol=xn)
xc<-floor(xn/2)+1;
yc<- floor(yn/2)+1 # centers of the image
im[(-m:m)+xc,(-m:m)+yc]<- 1

image(im , col = cmap ); title('im=Original image')


dev.off()

view this output with any postscript viewer (or printer)
and you will see extra lines on the plot.

Does this bother anyone else?

Joanthan Lees

From Mark.Bravington at csiro.au  Wed Apr 14 01:17:56 2004
From: Mark.Bravington at csiro.au (Mark.Bravington@csiro.au)
Date: Wed Apr 14 01:18:05 2004
Subject: [Rd] Re: [R] Execute function at startup
Message-ID: <C4178DC99E08604EA5E2BDB989F093800240A240@extas2-hba.tas.csiro.au>

I think you can already do this via .First(). If you start your .First with something like this [give or take some parentheses]

if( !is.null( runfirst <- Sys.getenv( 'RUNFIRST')))
  try( eval( parse( text=runfirst))))

then whatever you pass in as RUNFIRST=... should get executed on startup. Could even be a call to source(...) if you want to source a particular file. I have a similar switch at the start of my own .First, which bypasses the rest of the function if the NOFIRST variable is set-- handy for debugging .First itself.

Admittedly, for this to work you must actually *have* a .First in a .Rdata file, but .First is so useful that surely everyone has one :) ?

[And I reiterate the suggestion that .First should run immediately before giving control to the user-- perhaps unlike .Rprofile-- rather than before packages are loaded.]

As a general comment-- not just on this case-- I think there are dangers in allowing R to accrue too many new alternative ways of doing the same thing. My own experience is that "or you can do it this way" improvements in usability tend to be minor, and are more than outweighed by making R harder to learn-- and also harder to teach-- because people get mixed messages. In this specific case, what with .Rprofile, .First, .First.sys, environment variables, autoload lists, hooks, .onLoad, .onAttach, .First.lib, etc, there are already heaps of places to put "extra stuff"-- some might think too many. Just my 2c's worth, anyway

Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

#-----Original Message-----
#From: r-devel-bounces@stat.math.ethz.ch
#[mailto:r-devel-bounces@stat.math.ethz.ch]On Behalf Of Duncan Murdoch
#Sent: Wednesday, 14 April 2004 1:32 AM
#To: Erich Neuwirth
#Cc: r-devel@stat.math.ethz.ch
#Subject: [Rd] Re: [R] Execute function at startup
#
#
#As far as I know what you're asking for doesn't exist, so I've moved
#this discussion to r-devel.
#
#On Tue, 13 Apr 2004 16:22:37 +0200, Erich Neuwirth
#<erich.neuwirth@univie.ac.at> wrote :
#
#>It would be convenient to have something like
#>Rgui runfist="myfunction()"
#>in Windows.
#
#That looks as though you're creating an environment variable named
#"runfist".  I'd rather use some different syntax than that...
#
#>The reason:
#>AFAIK Rgui does not accept piped input
#>(RGui < myfile.R does not seem to work).
#
#That would be hard to implement, as most people start Rgui using a
#shortcut, and shortcuts don't support I/O redirection.
#
#However, I think it would be useful to be able to source a file
#somehow.  I can see a couple of different possibilities:
#
#Rgui --exec source('myfile.R')
#
#or 
#
#Rgui --source myfile.R
#
#The semantics would be that the code is executed after all other
#initialization is done (profile executed, user's saved image restored,
#etc.), just as if it had been typed in the console.  When it's done,
#control returns to the console (unless there's a q() in the commands).
#
#>A solution could be to put a few fuctions in Rprofile and then
#>give the name for one of these functions to be executed at startup as
#>a command line parameter to Rgui.
#>
#>Can something like this be done?
#
#Not now, but I think we should have something like this for 2.0.0.
#There's already been some discussion about whether the bug fix to
#.Profile is desirable (it's now run before most packages are
#attached).  It makes sense to me to have a way of running code there,
#and also to have a way to run code just before the system gives
#control to the user.  
#
#Duncan Murdoch
#
#______________________________________________
#R-devel@stat.math.ethz.ch mailing list
#https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
#

From maechler at stat.math.ethz.ch  Wed Apr 14 15:15:40 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed Apr 14 15:15:43 2004
Subject: [Rd] pcauchy precision (PR#6756)
Message-ID: <20040414131540.DAD98ED92@slim.kubism.ku.dk>

>>>>> "Morten" == Morten Welinder <terra@gnome.org>
>>>>>     on Tue, 13 Apr 2004 16:15:15 +0200 (CEST) writes:

    Morten> The current code has xbig such that the x^5 term is
    Morten> beyond the precision limit (although I would use 2.5
    Morten> instead of 5 in the xbig formula).  You get xbig
    Morten> ~5478, I get xbig ~179513609.  That is about log_2
    Morten> (5478) = 12.5 bits lost to cancelation in your case
    Morten> and 27.5 bits in my case.  If you want those numbers
    Morten> down and still use a series expansion, you need to
    Morten> have a lot more terms so you can get xbig down.

    Morten> By the way, your xbig point is valid only for
    Morten> log_p==FALSE.  For log_p==TRUE it needs to be higher.

ok, that's an important point.

    Morten> I don't see why you would be worried over atan's
    Morten> performance in the [-1;+1] interval given that the
    Morten> main branch already relies on atan in that interval.

I wasn't worried really; just I assume log() and log1p() to be
very accurate (only loose 1 or 2 bits) where (bad) system's atan()'s
may loose more.

    Morten> Numbers...  There is nothing like numbers.  
Indeed,
that was the evidence I've been asking for.

    Morten>   I hacked up a comparison in IEEE double space,
    Morten> i.e., 53-bit mantissa.  I calculated a reference
    Morten> value using 113-bit mantissa arithmetic (using the
    Morten> 1/x method

(which has an obvious "design bias" though -- but I agree it's not
 relevant here)
    Morten>  and Sun's high- performance libraries)
    Morten> with the result cast back to 53-bit.

    Morten> Fix loc=0 and scale=1 and let eR be the current R
    Morten> method's relative error and let eN be the proposed
    Morten> method's relative error.  Then we have the table
    Morten> below.

    Morten> Conclusions...

   Morten> 1. The series expansion loses 3-4 digits just below xbig.
   Morten> 2. The series expansion loses 2-3 digits just above xbig for log_p==TRUE.

   Morten> 3. The series version isn't even used for x>xbig and
   Morten>   lower==TRUE.  That makes R's log_p==TRUE performance awful.

"awful" is strong; but otherwise I agree.
Together with the elegance of your proposition, I now agree with
you.  
Thank you, Morten!

Martin

From stefano.iacus at unimi.it  Wed Apr 14 17:34:48 2004
From: stefano.iacus at unimi.it (stefano iacus)
Date: Wed Apr 14 17:35:29 2004
Subject: [Rd] Macintosh -- changing working directory (PR#6749)
In-Reply-To: <20040408194429.E5013FE9B@slim.kubism.ku.dk>
References: <20040408194429.E5013FE9B@slim.kubism.ku.dk>
Message-ID: <4339A816-8E29-11D8-B230-000A95C87F66@unimi.it>

it is a problem with preferences sync. This should no longer happen in 
1.9.0.

stefano
On Apr 8, 2004, at 9:44 PM, tlumley@u.washington.edu wrote:

> On Thu, 8 Apr 2004 paolillo@indiana.edu wrote:
>
>> Full_Name: John C. Paolillo
>> Version: 1.8.1 Aqua
>> OS: Mac OS X 10.3
>> Submission from: (NULL) (12.223.226.232)
>>
>>
>> Changing working directory (Tools menu) in R-Aqua causes a fatal 
>> error that
>> forces the computer to restart immediately after setting the 
>> directory in the
>> dialog box (screen grays and displays a message saying you need to 
>> hold the
>> power key for several seconds, several languages displayed).
>
> I don't have a GUI version of 1.8.1 available, but this doesn't happen 
> to
> me with the 1.9.0beta. It looks as if it is either specific to your
> computer or fixed.
>
> 	-thomas
>
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From dmurdoch at pair.com  Wed Apr 14 22:56:30 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Wed Apr 14 22:56:30 2004
Subject: [Rd] Re: [R] Execute function at startup
In-Reply-To: <C4178DC99E08604EA5E2BDB989F093800240A240@extas2-hba.tas.csiro.au>
References: <C4178DC99E08604EA5E2BDB989F093800240A240@extas2-hba.tas.csiro.au>
Message-ID: <208r70let3kc4ffkrdlacuucvbhv30vjgs@4ax.com>

On Wed, 14 Apr 2004 09:17:56 +1000, <Mark.Bravington@csiro.au> wrote :

>I think you can already do this via .First(). If you start your .First with something like this [give or take some parentheses]
>
>if( !is.null( runfirst <- Sys.getenv( 'RUNFIRST')))
>  try( eval( parse( text=runfirst))))

I forget whether Erich mentioned it in this post, but in other
messages he's told me that the intention is to use this as a way to
start R for naive users, immediately firing up Rcmdr for instance.
It's possible to install a .First function for such users, but it
would be easier if the capability was built in.

>[And I reiterate the suggestion that .First should run immediately before giving control to the user-- perhaps unlike .Rprofile-- rather than before packages are loaded.]

I think you're right about this.

>As a general comment-- not just on this case-- I think there are dangers in allowing R to accrue too many new alternative ways of doing the same thing. My own experience is that "or you can do it this way" improvements in usability tend to be minor, and are more than outweighed by making R harder to learn-- and also harder to teach-- because people get mixed messages. In this specific case, what with .Rprofile, .First, .First.sys, environment variables, autoload lists, hooks, .onLoad, .onAttach, .First.lib, etc, there are already heaps of places to put "extra stuff"-- some might think too many. Just my 2c's worth, anyway

I don't think it's really that bad:  a lot of those are things of
interest only to package writers.  Users only need to worry about

Rprofile.site
.Rprofile

(which are sourced in that order), just before 

.Rdata

is loaded.  Then the functions

.First
base::.First.sys

are executed.  I think the main thing wrong with the current scheme is
that those last two functions are in the wrong order:  the
user-defined .First should come last.

Adding one more thing to the list (executing a command specified on
the command line) seems reasonable to me.

Duncan Murdoch

From Mark.Bravington at csiro.au  Thu Apr 15 06:08:41 2004
From: Mark.Bravington at csiro.au (Mark.Bravington@csiro.au)
Date: Thu Apr 15 06:08:48 2004
Subject: [Rd] Re: [R] Execute function at startup
Message-ID: <C4178DC99E08604EA5E2BDB989F093800179815B@extas2-hba.tas.csiro.au>

#-----Original Message-----
#From: Duncan Murdoch [mailto:dmurdoch@pair.com]

#I forget whether Erich mentioned it in this post, but in other
#messages he's told me that the intention is to use this as a way to
#start R for naive users, immediately firing up Rcmdr for instance.
#It's possible to install a .First function for such users, but it
#would be easier if the capability was built in.

Fair enough-- I hadn't realized.

One sneaky possibility without changing R itself: how about writing a miniscule package that simply looks for a RUNFIRST environment variable and executes it? This functionality could either be in the R source file for the package, or in the .First.lib function (decisions, decisions...)-- there wouldn't be any other functions in the package. To use the functionality, the package would just be added to the default package list in the R_DEFAULT_PACKAGES env var. If people wanted to avoid a .Renviron file, R could be invoked via

R(GUI) R_DEFAULT_PACKAGES=c("stats","graphics","utils","methods","runfirst") RUNFIRST=<<whatever>>

In fact I suppose you could cheat even further by including 

library( stats); ... library( methods)

in the .First.lib of 'runfirst'-- then the invocation line (or icon "target") could be simplified to

R(GUI) R_DEFAULT_PACKAGES='runfirst' RUNFIRST=<<whatever>>

which is pretty "naive-friendly". In terms of Erich's 12/4 query about sourcing a file, the RUNFIRST could be %1 I guess.

Note that this should work even under the current policy of "autoloading last", because all standard packages would be availble before the RUNFIRST code gets executed (not the case with a .Rprofile file, unless precautions are taken). Might need to change the order of the packages in the first command line, to ensure utils etc. really are available.

This type of "solution" either underlines or undermines my point about proliferation of alternatives-- I'm not sure which... ;)

Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au

From ligges at statistik.uni-dortmund.de  Thu Apr 15 11:19:09 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu Apr 15 11:19:11 2004
Subject: [Rd] R CMD check on Win fails to detect failed installations
	(PR#6768)
Message-ID: <20040415091909.C2F1710495@slim.kubism.ku.dk>

I just post it not to forget - will try to contribute a fix.

Example: CDNmoney_2003.9-2.tar.gz (in the archives section of CRAN)
[There is another problem here I'll address separately.]

If running solely,
   R CMD check CDNmoney
fails to detect a failed installation on Windows. Instead, it reports:
* checking whether package 'CDNmoney' can be installed ... OK

Of course, the check fails later, but with some meaningless error messages.


The repository maintainer's approach works (i.e. detects the problem):

   R INSTALL CDNmoney > install.log 2>&1
   R CMD check --install="check:install.log" CDNmoney


Uwe Ligges


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = i386
  os = mingw32
  system = i386, mingw32
  status =
  major = 1
  minor = 9.0
  year = 2004
  month = 04
  day = 12
  language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
  .GlobalEnv, package:methods, package:stats, package:graphics, 
package:utils, Autoloads, package:base

From ligges at statistik.uni-dortmund.de  Thu Apr 15 11:38:16 2004
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu Apr 15 11:38:19 2004
Subject: [Rd] R INSTALL resumes on Win in case of errors (PR#6769)
Message-ID: <20040415093816.B67531049C@slim.kubism.ku.dk>

I just post it not to forget - will try to contribute a fix.

Example: SparseM_0.34.tar.gz

Running
   R INSTALL SparseM
gives an error ("Execution halted"), but resumes the rest of the 
installation procedure and prints "* DONE" at the end. Hence R CMD check 
(either running solely or in maintainer's mode) cannot detect that the 
installation fails. Output:


[SNIP ...]
Creating a new generic function for "solve" in "SparseM"
[1] "solve"
Error in setMethod("model.matrix", "matrix.csc.hb", function(object, 
...) { :
     No existing definition for function "model.matrix"
Execution halted
Execution of package source for SparseM failed
mv: cannot stat `.RData': No such file or directory
   installing demos
[SNIP ...]
* DONE


Also note, that the package installs smoothly on Linux/Unix.
Looks like package "stats" is attached on Unix/Linux during the 
installation, but not so on Windows. I told the maintainer to use 
require("stats") in order to be on the save side. Nevertheless, I think 
we should try to unify the behaviour.


Uwe Ligges


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = i386
  os = mingw32
  system = i386, mingw32
  status =
  major = 1
  minor = 9.0
  year = 2004
  month = 04
  day = 12
  language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
  .GlobalEnv, package:methods, package:stats, package:graphics, 
package:utils, Autoloads, package:base

From ligges at statistik.uni-dortmund.de  Thu Apr 15 11:49:43 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu Apr 15 11:49:27 2004
Subject: [Rd] different behaviour of R INSTALL on Linux/Windows
Message-ID: <407E5AB7.4040802@statistik.uni-dortmund.de>

Example: CDNmoney_2003.9-2.tar.gz (in the archives section of CRAN)

The package maintainer forgot to remove the subdirectory ./data/create. 
Nevertheless,
   R INSTALL CDNmoney
works smoothly on UNix/Linux by just omitting that directory.
On Windows we get:


---------- Making package CDNmoney ------------
   adding build stamp to DESCRIPTION
   installing R files
   installing demos
   installing inst files
   installing data files
cp: omitting directory `data/create'
make[2]: *** [t:/R/library/CDNmoney/data] Error 1
make[1]: *** [all] Error 2
make: *** [pkg-CDNmoney] Error 2
*** Installation of CDNmoney failed ***


I think it is desirable to unify. The question is which way... Opinions?

Uwe Ligges

--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = i386
  os = mingw32
  system = i386, mingw32
  status =
  major = 1
  minor = 9.0
  year = 2004
  month = 04
  day = 12
  language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
  .GlobalEnv, package:methods, package:stats, package:graphics, 
package:utils, Autoloads, package:base

From terra at gnome.org  Thu Apr 15 18:06:37 2004
From: terra at gnome.org (terra@gnome.org)
Date: Thu Apr 15 18:06:43 2004
Subject: [Rd] phyper accuracy and efficiency (PR#6772)
Message-ID: <20040415160637.2FC2610484@slim.kubism.ku.dk>

Full_Name: Morten Welinder
Version: snapshot
OS: 
Submission from: (NULL) (65.213.85.218)


Time to kick phyper's tires...

The current version has very serious cancellation issues.  For example, if you
ask
for a small right-tail you are likely to get total cancellation.  For example
phyper(59, 150, 150, 60, FALSE, FALSE) gives 6.372680161e-14.  The right answer
is
dhyper(0, 150, 150, 60, FALSE) which is 5.111204798e-22.

phyper is also really slow for large arguments.

Therefore, I suggest using the code below.  This is a sniplet from Gnumeric, so
you'll have to s/gnm_float/double/ and s/gnum//, etc.  The code isn't perfect.
In fact, if  i*(NR+NB)  is close to   n*NR, then this code can take a while.
Not longer than the old code, though.





/*
 * New phyper implementation.  Copyright 2004 Morten Welinder.
 * Distributed under the GNU General Public License.
 *
 * Thanks to Ian Smith for ideas.
 */
/*
 * Calculate
 *
 *          phyper (i, NR, NB, n, TRUE, FALSE)
 *   [log]  ----------------------------------
 *             dhyper (i, NR, NB, n, FALSE)
 *
 * without actually calling phyper.  This assumes that
 *
 *     i * (NR + NB) <= n * NR
 *
 */
static gnm_float
pdhyper (gnm_float i, gnm_float NR, gnm_float NB, gnm_float n, gboolean log_p)
{
  gnm_float sum = 0;
  gnm_float term = 1;

  while (i > 0 && term >= GNUM_EPSILON * sum) {
	  term *= i * (NB - n + i) / (n + 1 - i) / (NR + 1 - i);
	  sum += term;
	  i--;
  }

  return log_p ? log1pgnum (sum) : 1 + sum;
}


gnm_float
phyper (gnm_float i, gnm_float NR, gnm_float NB, gnm_float n, int lower_tail,
int log_p)
{
	gnm_float d, pd;

#ifdef IEEE_754
	if (isnangnum (i) || isnangnum (NR) || isnangnum (NB) || isnangnum (n))
		return i + NR + NB + n;
#endif

	i = floorgnum (i + 1e-7);
	NR = floorgnum (NR + 0.5);
	NB = floorgnum (NB + 0.5);
	n = floorgnum (n + 0.5);

	if (NR < 0 || NB < 0 || !finitegnum (NR + NB) || n < 0 || n > NR + NB)
		ML_ERR_return_NAN;

	if (i * (NR + NB) > n * NR) {
		/* Swap tails.  */
		gnm_float oldNB = NB;
		NB = NR;
		NR = oldNB;
		i = n - i - 1;
		lower_tail = !lower_tail;
	}

	if (i < 0)
		return R_DT_0;

	d = dhyper (i, NR, NB, n, log_p);
	pd = pdhyper (i, NR, NB, n, log_p);

	return log_p ? R_DT_log (d + pd) : R_D_Lval (d * pd);
}

From phgrosjean at sciviews.org  Fri Apr 16 11:40:46 2004
From: phgrosjean at sciviews.org (phgrosjean@sciviews.org)
Date: Fri Apr 16 11:41:00 2004
Subject: [Rd] barplot() does not draw bars correctly in R 1.9.0 (PR#6776)
Message-ID: <20040416094046.BA7AE10480@slim.kubism.ku.dk>

Bars are not stacked, but superimposed. This happens even with the first
example of barplot:

     tN <- table(Ni <- rpois(100, lambda=5))
     r <- barplot(tN, col='gray')

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status =
 major = 1
 minor = 9.0
 year = 2004
 month = 04
 day = 12
 language = R

Windows XP Professional (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, package:methods, package:stats, package:graphics,
package:utils, Autoloads, package:base

.......................................................<?}))><....
 ) ) ) ) )
( ( ( ( (   Prof. Philippe Grosjean
\  ___   )
 \/ECO\ (   Numerical Ecology of Aquatic Systems
 /\___/  )  Mons-Hainaut University, Pentagone
/ ___  /(   8, Av. du Champ de Mars, 7000 Mons, Belgium
 /NUM\/  )
 \___/\ (   phone: + 32.65.37.34.97, fax: + 32.65.37.33.12
       \ )  email: Philippe.Grosjean@umh.ac.be
 ) ) ) ) )  SciViews project coordinator (http://www.sciviews.org)
( ( ( ( (
...................................................................

From Achim.Zeileis at wu-wien.ac.at  Fri Apr 16 15:44:52 2004
From: Achim.Zeileis at wu-wien.ac.at (Achim Zeileis)
Date: Fri Apr 16 15:51:24 2004
Subject: [Rd] barplot() does not draw bars correctly in R 1.9.0 (PR#6776)
In-Reply-To: <20040416094046.BA7AE10480@slim.kubism.ku.dk>
References: <20040416094046.BA7AE10480@slim.kubism.ku.dk>
Message-ID: <20040416154452.7af33944.Achim.Zeileis@wu-wien.ac.at>

On Fri, 16 Apr 2004 11:40:46 +0200 (CEST) phgrosjean@sciviews.org wrote:

> Bars are not stacked, but superimposed. This happens even with the
> first example of barplot:
> 
>      tN <- table(Ni <- rpois(100, lambda=5))
>      r <- barplot(tN, col='gray')

AFAICS, this problem occurs exactly for 1-way tables like above. If

barplot(as.vector(tN), col = "gray")

is used instead, everything is as it was in 1.8.1. The reason is that in
the new version of barplot.default the following code (which
remained unchanged) does not do anymore what do what one would want:

    if (is.vector(height)) {
        height <- cbind(height)
        beside <- TRUE
    }
    else if (is.array(height) && (length(dim(height)) == 1)) {
        height <- rbind(height)
        beside <- TRUE
    }

that is, vectors and 1-way tables are treated differently which lead to
the problem. Using cbind() instead of rbind() in the second half,
overcomes this problem.
However, the colors are then chosen in the same way as for vectors,
resulting in different colors than in R 1.8.1. Maybe the default color
choice should then be modified as well.
Z

> --please do not edit the information below--
> 
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status =
>  major = 1
>  minor = 9.0
>  year = 2004
>  month = 04
>  day = 12
>  language = R
> 
> Windows XP Professional (build 2600) Service Pack 1.0
> 
> Search Path:
>  .GlobalEnv, package:methods, package:stats, package:graphics,
> package:utils, Autoloads, package:base
> 
> .......................................................<?}))><....
>  ) ) ) ) )
> ( ( ( ( (   Prof. Philippe Grosjean
> \  ___   )
>  \/ECO\ (   Numerical Ecology of Aquatic Systems
>  /\___/  )  Mons-Hainaut University, Pentagone
> / ___  /(   8, Av. du Champ de Mars, 7000 Mons, Belgium
>  /NUM\/  )
>  \___/\ (   phone: + 32.65.37.34.97, fax: + 32.65.37.33.12
>        \ )  email: Philippe.Grosjean@umh.ac.be
>  ) ) ) ) )  SciViews project coordinator (http://www.sciviews.org)
> ( ( ( ( (
> ...................................................................
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>

From Achim.Zeileis at wu-wien.ac.at  Fri Apr 16 15:52:01 2004
From: Achim.Zeileis at wu-wien.ac.at (Achim.Zeileis@wu-wien.ac.at)
Date: Fri Apr 16 15:52:03 2004
Subject: [Rd] barplot() does not draw bars correctly in R 1.9.0 (PR#6777)
Message-ID: <20040416135201.7FED8104AE@slim.kubism.ku.dk>

On Fri, 16 Apr 2004 11:40:46 +0200 (CEST) phgrosjean@sciviews.org wrote:

> Bars are not stacked, but superimposed. This happens even with the
> first example of barplot:
>=20
>      tN <- table(Ni <- rpois(100, lambda=3D5))
>      r <- barplot(tN, col=3D'gray')

AFAICS, this problem occurs exactly for 1-way tables like above. If

barplot(as.vector(tN), col =3D "gray")

is used instead, everything is as it was in 1.8.1. The reason is that in
the new version of barplot.default the following code (which
remained unchanged) does not do anymore what do what one would want:

    if (is.vector(height)) {
        height <- cbind(height)
        beside <- TRUE
    }
    else if (is.array(height) && (length(dim(height)) =3D=3D 1)) {
        height <- rbind(height)
        beside <- TRUE
    }

that is, vectors and 1-way tables are treated differently which lead to
the problem. Using cbind() instead of rbind() in the second half,
overcomes this problem.
However, the colors are then chosen in the same way as for vectors,
resulting in different colors than in R 1.8.1. Maybe the default color
choice should then be modified as well.
Z

> --please do not edit the information below--
>=20
> Version:
>  platform =3D i386-pc-mingw32
>  arch =3D i386
>  os =3D mingw32
>  system =3D i386, mingw32
>  status =3D
>  major =3D 1
>  minor =3D 9.0
>  year =3D 2004
>  month =3D 04
>  day =3D 12
>  language =3D R
>=20
> Windows XP Professional (build 2600) Service Pack 1.0
>=20
> Search Path:
>  .GlobalEnv, package:methods, package:stats, package:graphics,
> package:utils, Autoloads, package:base
>=20
> .......................................................<=B0}))><....
>  ) ) ) ) )
> ( ( ( ( (   Prof. Philippe Grosjean
> \  ___   )
>  \/ECO\ (   Numerical Ecology of Aquatic Systems
>  /\___/  )  Mons-Hainaut University, Pentagone
> / ___  /(   8, Av. du Champ de Mars, 7000 Mons, Belgium
>  /NUM\/  )
>  \___/\ (   phone: + 32.65.37.34.97, fax: + 32.65.37.33.12
>        \ )  email: Philippe.Grosjean@umh.ac.be
>  ) ) ) ) )  SciViews project coordinator (http://www.sciviews.org)
> ( ( ( ( (
> ...................................................................
>=20
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>=20

From dmurdoch at pair.com  Fri Apr 16 15:59:02 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Fri Apr 16 15:59:02 2004
Subject: [Rd] barplot() does not draw bars correctly in R 1.9.0 (PR#6776)
In-Reply-To: <20040416154452.7af33944.Achim.Zeileis@wu-wien.ac.at>
References: <20040416094046.BA7AE10480@slim.kubism.ku.dk>
	<20040416154452.7af33944.Achim.Zeileis@wu-wien.ac.at>
Message-ID: <2gpv70ls15pc2vgp24rulc5he7hod1a6gj@4ax.com>

On Fri, 16 Apr 2004 15:44:52 +0200, Achim Zeileis
<Achim.Zeileis@wu-wien.ac.at> wrote :

>On Fri, 16 Apr 2004 11:40:46 +0200 (CEST) phgrosjean@sciviews.org wrote:
>
>> Bars are not stacked, but superimposed. This happens even with the
>> first example of barplot:
>> 
>>      tN <- table(Ni <- rpois(100, lambda=5))
>>      r <- barplot(tN, col='gray')
>
>AFAICS, this problem occurs exactly for 1-way tables like above. If
>
>barplot(as.vector(tN), col = "gray")
>
>is used instead, everything is as it was in 1.8.1. The reason is that in
>the new version of barplot.default the following code (which
>remained unchanged) does not do anymore what do what one would want:
>
>    if (is.vector(height)) {
>        height <- cbind(height)
>        beside <- TRUE
>    }
>    else if (is.array(height) && (length(dim(height)) == 1)) {
>        height <- rbind(height)
>        beside <- TRUE
>    }
>
>that is, vectors and 1-way tables are treated differently which lead to
>the problem. Using cbind() instead of rbind() in the second half,
>overcomes this problem.
>However, the colors are then chosen in the same way as for vectors,
>resulting in different colors than in R 1.8.1. Maybe the default color
>choice should then be modified as well.

I'm pretty sure the problem is due to this change, a few lines below
the ones you listed:

1.8.1:       width <- rep(width, length.out = NR * NC)

1.9.0:       width <- rep(width, length.out = NR)

This change was made at the same time as the offset arg was
introduced; is it intentional?

Duncan Murdoch

From dmurdoch at pair.com  Fri Apr 16 15:59:41 2004
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Fri Apr 16 15:59:43 2004
Subject: [Rd] barplot() does not draw bars correctly in R 1.9.0 (PR#6776)
Message-ID: <20040416135941.B972C104A9@slim.kubism.ku.dk>

On Fri, 16 Apr 2004 15:44:52 +0200, Achim Zeileis
<Achim.Zeileis@wu-wien.ac.at> wrote :

>On Fri, 16 Apr 2004 11:40:46 +0200 (CEST) phgrosjean@sciviews.org wrote:
>
>> Bars are not stacked, but superimposed. This happens even with the
>> first example of barplot:
>> 
>>      tN <- table(Ni <- rpois(100, lambda=5))
>>      r <- barplot(tN, col='gray')
>
>AFAICS, this problem occurs exactly for 1-way tables like above. If
>
>barplot(as.vector(tN), col = "gray")
>
>is used instead, everything is as it was in 1.8.1. The reason is that in
>the new version of barplot.default the following code (which
>remained unchanged) does not do anymore what do what one would want:
>
>    if (is.vector(height)) {
>        height <- cbind(height)
>        beside <- TRUE
>    }
>    else if (is.array(height) && (length(dim(height)) == 1)) {
>        height <- rbind(height)
>        beside <- TRUE
>    }
>
>that is, vectors and 1-way tables are treated differently which lead to
>the problem. Using cbind() instead of rbind() in the second half,
>overcomes this problem.
>However, the colors are then chosen in the same way as for vectors,
>resulting in different colors than in R 1.8.1. Maybe the default color
>choice should then be modified as well.

I'm pretty sure the problem is due to this change, a few lines below
the ones you listed:

1.8.1:       width <- rep(width, length.out = NR * NC)

1.9.0:       width <- rep(width, length.out = NR)

This change was made at the same time as the offset arg was
introduced; is it intentional?

Duncan Murdoch

From Achim.Zeileis at wu-wien.ac.at  Fri Apr 16 16:53:03 2004
From: Achim.Zeileis at wu-wien.ac.at (Achim Zeileis)
Date: Fri Apr 16 17:00:08 2004
Subject: [Rd] barplot() does not draw bars correctly in R 1.9.0 (PR#6776)
In-Reply-To: <2gpv70ls15pc2vgp24rulc5he7hod1a6gj@4ax.com>
References: <20040416094046.BA7AE10480@slim.kubism.ku.dk>
	<20040416154452.7af33944.Achim.Zeileis@wu-wien.ac.at>
	<2gpv70ls15pc2vgp24rulc5he7hod1a6gj@4ax.com>
Message-ID: <20040416165303.4a2496fa.Achim.Zeileis@wu-wien.ac.at>

On Fri, 16 Apr 2004 09:59:02 -0400 Duncan Murdoch wrote:

> On Fri, 16 Apr 2004 15:44:52 +0200, Achim Zeileis
> <Achim.Zeileis@wu-wien.ac.at> wrote :
> 
> >On Fri, 16 Apr 2004 11:40:46 +0200 (CEST) phgrosjean@sciviews.org
> >wrote:
> >
> >> Bars are not stacked, but superimposed. This happens even with the
> >> first example of barplot:
> >> 
> >>      tN <- table(Ni <- rpois(100, lambda=5))
> >>      r <- barplot(tN, col='gray')
> >
> >AFAICS, this problem occurs exactly for 1-way tables like above. If
> >
> >barplot(as.vector(tN), col = "gray")
> >
> >is used instead, everything is as it was in 1.8.1. The reason is that
> >in the new version of barplot.default the following code (which
> >remained unchanged) does not do anymore what do what one would want:
> >
> >    if (is.vector(height)) {
> >        height <- cbind(height)
> >        beside <- TRUE
> >    }
> >    else if (is.array(height) && (length(dim(height)) == 1)) {
> >        height <- rbind(height)
> >        beside <- TRUE
> >    }
> >
> >that is, vectors and 1-way tables are treated differently which lead
> >to the problem. Using cbind() instead of rbind() in the second half,
> >overcomes this problem.
> >However, the colors are then chosen in the same way as for vectors,
> >resulting in different colors than in R 1.8.1. Maybe the default
> >color choice should then be modified as well.
> 
> I'm pretty sure the problem is due to this change,

Of course, yes. Kurt and I have been working on this and as I recall
used mainly vectors and matrices for testing and obviously not 1-way
tables.

> a few lines below the ones you listed:
> 
> 1.8.1:       width <- rep(width, length.out = NR * NC)
> 
> 1.9.0:       width <- rep(width, length.out = NR)
> 
> This change was made at the same time as the offset arg was
> introduced; is it intentional?

Yes, we changed it in that way so that the col, width and offset
arguments are expanded (if necessary) in a similar way. Compare for
example

  x <- cbind(1:3, 2)
  barplot(x, width = 1:2, beside = FALSE)
  barplot(x, width = 1:2, beside = TRUE)

in 1.8.1 and 1.9.0. In the new version the code tries to find a
(statistically) sensible grouping in both cases. One could argue that in
certain cases the widths of each bar should be controlled and they
should not be grouped...depends on what you want to do if length(width)
does not match the number of bars drawn.
Z





> Duncan Murdoch
> 
>

From Achim.Zeileis at wu-wien.ac.at  Fri Apr 16 17:00:34 2004
From: Achim.Zeileis at wu-wien.ac.at (Achim.Zeileis@wu-wien.ac.at)
Date: Fri Apr 16 17:00:36 2004
Subject: [Rd] barplot() does not draw bars correctly in R 1.9.0 (PR#6778)
Message-ID: <20040416150034.58A6610495@slim.kubism.ku.dk>

On Fri, 16 Apr 2004 09:59:02 -0400 Duncan Murdoch wrote:

> On Fri, 16 Apr 2004 15:44:52 +0200, Achim Zeileis
> <Achim.Zeileis@wu-wien.ac.at> wrote :
> 
> >On Fri, 16 Apr 2004 11:40:46 +0200 (CEST) phgrosjean@sciviews.org
> >wrote:
> >
> >> Bars are not stacked, but superimposed. This happens even with the
> >> first example of barplot:
> >> 
> >>      tN <- table(Ni <- rpois(100, lambda=5))
> >>      r <- barplot(tN, col='gray')
> >
> >AFAICS, this problem occurs exactly for 1-way tables like above. If
> >
> >barplot(as.vector(tN), col = "gray")
> >
> >is used instead, everything is as it was in 1.8.1. The reason is that
> >in the new version of barplot.default the following code (which
> >remained unchanged) does not do anymore what do what one would want:
> >
> >    if (is.vector(height)) {
> >        height <- cbind(height)
> >        beside <- TRUE
> >    }
> >    else if (is.array(height) && (length(dim(height)) == 1)) {
> >        height <- rbind(height)
> >        beside <- TRUE
> >    }
> >
> >that is, vectors and 1-way tables are treated differently which lead
> >to the problem. Using cbind() instead of rbind() in the second half,
> >overcomes this problem.
> >However, the colors are then chosen in the same way as for vectors,
> >resulting in different colors than in R 1.8.1. Maybe the default
> >color choice should then be modified as well.
> 
> I'm pretty sure the problem is due to this change,

Of course, yes. Kurt and I have been working on this and as I recall
used mainly vectors and matrices for testing and obviously not 1-way
tables.

> a few lines below the ones you listed:
> 
> 1.8.1:       width <- rep(width, length.out = NR * NC)
> 
> 1.9.0:       width <- rep(width, length.out = NR)
> 
> This change was made at the same time as the offset arg was
> introduced; is it intentional?

Yes, we changed it in that way so that the col, width and offset
arguments are expanded (if necessary) in a similar way. Compare for
example

  x <- cbind(1:3, 2)
  barplot(x, width = 1:2, beside = FALSE)
  barplot(x, width = 1:2, beside = TRUE)

in 1.8.1 and 1.9.0. In the new version the code tries to find a
(statistically) sensible grouping in both cases. One could argue that in
certain cases the widths of each bar should be controlled and they
should not be grouped...depends on what you want to do if length(width)
does not match the number of bars drawn.
Z





> Duncan Murdoch
> 
>

From ripley at stats.ox.ac.uk  Fri Apr 16 17:05:11 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 16 17:05:19 2004
Subject: [Rd] barplot() does not draw bars correctly in R 1.9.0 (PR#6776)
In-Reply-To: <20040416165303.4a2496fa.Achim.Zeileis@wu-wien.ac.at>
Message-ID: <Pine.LNX.4.44.0404161603320.17871-100000@gannet.stats>

Please be careful with your replies, folks: you have already created two
new items in R-bugs and so duplicate posts to R-devel.  You need to ensure
that (PR#6776) is on the first line of the subject.

On Fri, 16 Apr 2004, Achim Zeileis wrote:

> On Fri, 16 Apr 2004 09:59:02 -0400 Duncan Murdoch wrote:
> 
> > On Fri, 16 Apr 2004 15:44:52 +0200, Achim Zeileis
> > <Achim.Zeileis@wu-wien.ac.at> wrote :
> > 
> > >On Fri, 16 Apr 2004 11:40:46 +0200 (CEST) phgrosjean@sciviews.org
> > >wrote:
> > >
> > >> Bars are not stacked, but superimposed. This happens even with the
> > >> first example of barplot:
> > >> 
> > >>      tN <- table(Ni <- rpois(100, lambda=5))
> > >>      r <- barplot(tN, col='gray')
> > >
> > >AFAICS, this problem occurs exactly for 1-way tables like above. If
> > >
> > >barplot(as.vector(tN), col = "gray")
> > >
> > >is used instead, everything is as it was in 1.8.1. The reason is that
> > >in the new version of barplot.default the following code (which
> > >remained unchanged) does not do anymore what do what one would want:
> > >
> > >    if (is.vector(height)) {
> > >        height <- cbind(height)
> > >        beside <- TRUE
> > >    }
> > >    else if (is.array(height) && (length(dim(height)) == 1)) {
> > >        height <- rbind(height)
> > >        beside <- TRUE
> > >    }
> > >
> > >that is, vectors and 1-way tables are treated differently which lead
> > >to the problem. Using cbind() instead of rbind() in the second half,
> > >overcomes this problem.
> > >However, the colors are then chosen in the same way as for vectors,
> > >resulting in different colors than in R 1.8.1. Maybe the default
> > >color choice should then be modified as well.
> > 
> > I'm pretty sure the problem is due to this change,
> 
> Of course, yes. Kurt and I have been working on this and as I recall
> used mainly vectors and matrices for testing and obviously not 1-way
> tables.
> 
> > a few lines below the ones you listed:
> > 
> > 1.8.1:       width <- rep(width, length.out = NR * NC)
> > 
> > 1.9.0:       width <- rep(width, length.out = NR)
> > 
> > This change was made at the same time as the offset arg was
> > introduced; is it intentional?
> 
> Yes, we changed it in that way so that the col, width and offset
> arguments are expanded (if necessary) in a similar way. Compare for
> example
> 
>   x <- cbind(1:3, 2)
>   barplot(x, width = 1:2, beside = FALSE)
>   barplot(x, width = 1:2, beside = TRUE)
> 
> in 1.8.1 and 1.9.0. In the new version the code tries to find a
> (statistically) sensible grouping in both cases. One could argue that in
> certain cases the widths of each bar should be controlled and they
> should not be grouped...depends on what you want to do if length(width)
> does not match the number of bars drawn.
> Z
> 
> 
> 
> 
> 
> > Duncan Murdoch
> > 
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From hosking at watson.ibm.com  Fri Apr 16 18:15:20 2004
From: hosking at watson.ibm.com (hosking@watson.ibm.com)
Date: Fri Apr 16 18:15:22 2004
Subject: [Rd] as.Date with factor argument (PR#6779)
Message-ID: <20040416161520.717BC1049B@slim.kubism.ku.dk>

Full_Name: J. R. M. Hosking
Version: 1.9.0
OS: WIndows 2000
Submission from: (NULL) (129.34.20.23)


> f<-factor("2000-01-02")
> as.Date(f)
Error in as.Date.default(f) : Don't know how to convert `x' to class "Date"

Presumably as.Date.factor(f) should have the same effect as
as.Date.character(as.character(f)), but that does not seem to be happening.

From hosking at watson.ibm.com  Fri Apr 16 18:20:46 2004
From: hosking at watson.ibm.com (hosking@watson.ibm.com)
Date: Fri Apr 16 18:20:48 2004
Subject: [Rd] summary() with argument of class difftime (PR#6780)
Message-ID: <20040416162046.67F7F10495@slim.kubism.ku.dk>

Full_Name: J. R. M. Hosking
Version: 1.9.0
OS: Windows 2000
Submission from: (NULL) (129.34.20.23)


> dt<-as.Date("2002-03-04")-as.Date("2001-02-03")
> jstr(dt)
difftime(units:days)(1) 394 
> summary(dt)
Error in Summary.difftime(..., na.rm = na.rm) : 
        sum not defined for difftime objects



When x is of class difftime, either sum(x) should be permitted or summary(x)
should not try to compute the mean.

(R 1.9.0, Windows binary from CRAN)

From ripley at stats.ox.ac.uk  Fri Apr 16 18:23:01 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 16 18:23:08 2004
Subject: [Rd] summary() with argument of class difftime (PR#6780)
In-Reply-To: <20040416162046.67F7F10495@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404161722360.18068-100000@gannet.stats>

Where does it say that summary() can be applies to difftime objects?

On Fri, 16 Apr 2004 hosking@watson.ibm.com wrote:

> Full_Name: J. R. M. Hosking
> Version: 1.9.0
> OS: Windows 2000
> Submission from: (NULL) (129.34.20.23)
> 
> 
> > dt<-as.Date("2002-03-04")-as.Date("2001-02-03")
> > jstr(dt)
> difftime(units:days)(1) 394 
> > summary(dt)
> Error in Summary.difftime(..., na.rm = na.rm) : 
>         sum not defined for difftime objects
> 
> 
> 
> When x is of class difftime, either sum(x) should be permitted or summary(x)
> should not try to compute the mean.
> 
> (R 1.9.0, Windows binary from CRAN)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From hosking at watson.ibm.com  Fri Apr 16 18:31:33 2004
From: hosking at watson.ibm.com (hosking@watson.ibm.com)
Date: Fri Apr 16 18:31:37 2004
Subject: [Rd] type.convert (PR#6781)
Message-ID: <20040416163133.1085710495@slim.kubism.ku.dk>

Full_Name: J. R. M. Hosking
Version: 1.9.0
OS: Windows 2000
Submission from: (NULL) (129.34.20.23)


Two problems, perhaps related:

(1) na.strings is not honored when x is non-numeric and as.is=T

  > type.convert( c("abc","-"), as.is=T, na.strings="-" )
  [1] "abc" "-"  

... unless x consists only of NAs

  > type.convert( c("abc","-"), as.is=T, na.strings=c("-","abc") )
  [1] NA NA

But with x numeric or as.is FALSE (or omitted), it works as advertised:

  > type.convert( c("abc","-"), na.strings="-" )
  [1] abc  <NA>
  Levels: abc
  > type.convert( c("6","-"), na.strings="-" )
  [1]  6 NA


(2) When na.strings is omitted, blank strings in nonnumeric vectors are not
converted into NAs (regardless of the value of as.is).

  > type.convert(c("6",""," "))     # OK: gives 6 NA NA
  [1]  6 NA NA

  > type.convert(c("A",""," "))   # gives a factor with 3 levels and no NAs
  [1] A    
  Levels:    A

  > type.convert(c("A",""," "),as.is=T)  # gives a char vector with no NAs
  [1] "A" ""  " "


Rider: it would be nice if type.convert had a strip.white argument, so that
  type.convert(c(" 6"," -"),na.strings="-",strip.white=T) 
would return a numeric vector. Stripping leading and trailing blanks can be
time-consuming, and could presumably be done more quickly by an .Internal
function such as the one called by type.convert.


(R 1.9.0, Windows binary from CRAN)

From maechler at stat.math.ethz.ch  Fri Apr 16 18:44:22 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri Apr 16 18:44:28 2004
Subject: [Rd] as.Date with factor argument (PR#6779)
Message-ID: <20040416164422.2313A10495@slim.kubism.ku.dk>

>>>>> "J" == J R M Hosking <hosking@watson.ibm.com>
>>>>>     on Fri, 16 Apr 2004 18:15:20 +0200 (CEST) writes:

    J> Full_Name: J. R. M. Hosking
    J> Version: 1.9.0
    J> OS: WIndows 2000
    J> Submission from: (NULL) (129.34.20.23)


    >> f<-factor("2000-01-02")
    >> as.Date(f)
    J> Error in as.Date.default(f) : Don't know how to convert `x' to class "Date"

    J> Presumably as.Date.factor(f) should have the same effect as
    J> as.Date.character(as.character(f)), but that does not seem to be happening.

No, and the fact that it doesn't is  *definitely* not a bug.

It could pass as a (rather extravagant) wish at most.

Martin Maechler

From hosking at watson.ibm.com  Fri Apr 16 18:48:52 2004
From: hosking at watson.ibm.com (hosking@watson.ibm.com)
Date: Fri Apr 16 18:48:54 2004
Subject: [Rd] as.data.frame.list (PR#6782)
Message-ID: <20040416164852.D03461049B@slim.kubism.ku.dk>

Full_Name: J. R. M. Hosking
Version: 1.9.0
OS: Windows 2000
Submission from: (NULL) (129.34.20.23)


Browsing the code of as.data.frame.list, I see

  cn[m] <- paste("..adfl.", cn[m], sep = "")

and 5 lines later

  names(x) <- sub("^..adfl.", "", names(x))

It looks as though the latter should be

  names(x) <- sub("^\\.\\.adfl\\.", "", names(x))

This won't often matter, but perhaps one day somebody may type something like

  as.data.frame(list(row.names=1:2,foxglove=3:4,toadflax=5:6))



(R 1.9.0, Windows binary from CRAN)

From brian-j-smith at uiowa.edu  Fri Apr 16 18:50:18 2004
From: brian-j-smith at uiowa.edu (brian-j-smith@uiowa.edu)
Date: Fri Apr 16 18:50:21 2004
Subject: [Rd] Windows startup menu display problem in 1.9.0 (PR#6783)
Message-ID: <20040416165018.DAACF1047C@slim.kubism.ku.dk>

Full_Name: Brian J. Smith
Version: 1.9.0
OS: WinXp
Submission from: (NULL) (129.255.217.48)


WinXP; R 1.9.0 running under Rgui.exe.

winMenuAdd calls via my .Rprofile file do not seem to work and, instead, result
in the following error message after the R GUI starts:

   Error in eval(expr, envir, enclos) : couldn't find function "winMenuAdd"

Any subsequent calls to winMenuAdd from the R console GUI window work fine.  The
same Rprofile works fine under R 1.8.1.  Bug report #2817 describes a similar
problem that occurred with R 1.7.0.

Brian

From dmurdoch at pair.com  Fri Apr 16 19:07:00 2004
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Fri Apr 16 19:07:03 2004
Subject: [Rd] Windows startup menu display problem in 1.9.0 (PR#6783)
Message-ID: <20040416170700.9742B1043B@slim.kubism.ku.dk>

On Fri, 16 Apr 2004 18:50:18 +0200 (CEST), brian-j-smith@uiowa.edu
wrote :

>Full_Name: Brian J. Smith
>Version: 1.9.0
>OS: WinXp
>Submission from: (NULL) (129.255.217.48)
>
>
>WinXP; R 1.9.0 running under Rgui.exe.
>
>winMenuAdd calls via my .Rprofile file do not seem to work and, instead, result
>in the following error message after the R GUI starts:
>
>   Error in eval(expr, envir, enclos) : couldn't find function "winMenuAdd"
>
>Any subsequent calls to winMenuAdd from the R console GUI window work fine.  The
>same Rprofile works fine under R 1.8.1.  Bug report #2817 describes a similar
>problem that occurred with R 1.7.0.

This isn't a bug, it's behaving as documented.  At the time that
.Rprofile is being executed, only the base package has been attached.
If you want access to functions that aren't in base, you need to do
something like

require(utils)
winMenuAdd( .... )

or

utils::winMenuAdd( .... )

The reason for this is that you may want your Rprofile to change the
list of packages that are attached at the start of a session.  I don't
think this behaviour has changed since 1.8.1, but winMenuAdd has been
moved out of the base package, so now you notice it.

Duncan Murdoch

From ripley at stats.ox.ac.uk  Fri Apr 16 19:14:40 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 16 19:14:51 2004
Subject: [Rd] Windows startup menu display problem in 1.9.0 (PR#6783)
In-Reply-To: <20040416165018.DAACF1047C@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404161811410.18166-100000@gannet.stats>

Please do *read* the NEWS file, which says

USER-VISIBLE CHANGES

	Users may notice that code in .Rprofile is run with only the
	new base loaded and so functions may now not be found.	For
...

and tells you how to make this work!

This has been discussed on R-help within the last 24 hours, too!


On Fri, 16 Apr 2004 brian-j-smith@uiowa.edu wrote:

> Full_Name: Brian J. Smith
> Version: 1.9.0
> OS: WinXp
> Submission from: (NULL) (129.255.217.48)
> 
> 
> WinXP; R 1.9.0 running under Rgui.exe.
> 
> winMenuAdd calls via my .Rprofile file do not seem to work and, instead, result
> in the following error message after the R GUI starts:
> 
>    Error in eval(expr, envir, enclos) : couldn't find function "winMenuAdd"
> 
> Any subsequent calls to winMenuAdd from the R console GUI window work fine.  The
> same Rprofile works fine under R 1.8.1.  Bug report #2817 describes a similar
> problem that occurred with R 1.7.0.
> 
> Brian
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Fri Apr 16 19:33:12 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 16 19:33:15 2004
Subject: [Rd] as.data.frame.list (PR#6782)
In-Reply-To: <20040416164852.D03461049B@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404161829420.18271-100000@gannet.stats>

Can I make a suggestion, please?  R 1.9.0 was in alpha/beta test for over
a month, and a submitting a whole bunch of `bug' reports days after
release is about the maximally sub-optimal timing.  Please make the effort
to look at the development versions we make available.

On Fri, 16 Apr 2004 hosking@watson.ibm.com wrote:

> Full_Name: J. R. M. Hosking
> Version: 1.9.0
> OS: Windows 2000
> Submission from: (NULL) (129.34.20.23)
> 
> 
> Browsing the code of as.data.frame.list, I see
> 
>   cn[m] <- paste("..adfl.", cn[m], sep = "")
> 
> and 5 lines later
> 
>   names(x) <- sub("^..adfl.", "", names(x))
> 
> It looks as though the latter should be
> 
>   names(x) <- sub("^\\.\\.adfl\\.", "", names(x))
> 
> This won't often matter, but perhaps one day somebody may type something like
> 
>   as.data.frame(list(row.names=1:2,foxglove=3:4,toadflax=5:6))
> 
> 
> 
> (R 1.9.0, Windows binary from CRAN)
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Sat Apr 17 12:43:16 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Apr 17 12:43:20 2004
Subject: [Rd] Stub packages will go shortly
Message-ID: <Pine.LNX.4.44.0404171106030.32037-100000@gannet.stats>

The stub packages

	ctest eda lqs mle modreg mva nls stepfun ts

will be removed from the R-devel sources during the next week.  They are
already special-cased in library() and are no longer installed.

This does affect the many package maintainers who have declared a 
dependence on one of those packages in the Depends: field of their 
DESCRIPTION file -- such packages now fail R CMD check under a fresh 
installation of R-devel.

As the standard packages (base tools utils graphics stats methods grid
splines stats4 tcltk) are guaranteed to be available in every R
installation, it is not necessary to include them in the Depends: field.  
However, it is a good idea to require() them (or import their namespace),
and often necessary.

Please look over the Depends: field in your packages and check it is still 
appropriate.

An incomplete list of failing packages is

NISTnls PHYLOGR Rcmdr bim car cclust clim.pact dse e1071 exactRankTests 
forward fpc gbm grasper maptree mscalib multidim mvnormtest pastecs pcurve 
pear pgam sgeostat simpleboot spatstat splancs tseries vcd 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From bunk at fs.tum.de  Sun Apr 18 00:19:01 2004
From: bunk at fs.tum.de (bunk@fs.tum.de)
Date: Sun Apr 18 00:19:04 2004
Subject: [Rd] [patch] R-1.9.0: compile error without nl_langinfo(CODESET)
	(PR#6789)
Message-ID: <20040417221901.DA87610478@slim.kubism.ku.dk>

I got the following compile error in R-1.9.0 on NetBSD 1.5:
 
<--  snip  -->
 
...
gcc -I../../src/extra/zlib -I../../src/extra/bzip2
-I../../src/extra/pcre -I. -I../../src/include -I../../src/include -I/usr/local/include  
-DHAVE_CONFIG_H   -O2 -mcpu=v8 -c main.c -o main.o
main.c: In function `setup_Rmainloop':
main.c:463: `CODESET' undeclared (first use in this function)
main.c:463: (Each undeclared identifier is reported only once
main.c:463: for each function it appears in.)
make[3]: *** [main.o] Error 1
make[3]: Leaving directory `/aux/adrian/build/R-1.9.0/src/main'
 
<--  snip  -->
 
NetBSD 1.5 has a nl_langinfo() in langinfo.h but no CODESET.
 
A proposed patch (based on codeset.m4 from GNU gettext) is below.
 
cu
Adrian


 
--- /dev/null	2004-04-17 15:10:09 +0200
+++ m4/codeset.m4	2004-04-17 15:15:31 +0200
@@ -0,0 +1,23 @@
+# codeset.m4 serial AM1 (gettext-0.10.40)
+dnl Copyright (C) 2000-2002 Free Software Foundation, Inc.
+dnl This file is free software, distributed under the terms of the GNU
+dnl General Public License.  As a special exception to the GNU General
+dnl Public License, this file may be distributed as part of a program
+dnl that contains a configuration script generated by Autoconf, under
+dnl the same distribution terms as the rest of that program.
+
+dnl From Bruno Haible.
+
+AC_DEFUN([AM_LANGINFO_CODESET],
+[
+  AC_CACHE_CHECK([for nl_langinfo and CODESET], am_cv_langinfo_codeset,
+    [AC_TRY_LINK([#include <langinfo.h>],
+      [char* cs = nl_langinfo(CODESET);],
+      am_cv_langinfo_codeset=yes,
+      am_cv_langinfo_codeset=no)
+    ])
+  if test $am_cv_langinfo_codeset = yes; then
+    AC_DEFINE(HAVE_LANGINFO_CODESET, 1,
+      [Define if you have <langinfo.h> and nl_langinfo(CODESET).])
+  fi
+])
--- m4/README.old	2004-04-17 15:16:01 +0200
+++ m4/README	2004-04-17 15:18:27 +0200
@@ -38,3 +38,7 @@
 
   libtool.m4
 	is from libtool 1.5.
+
+  codeset.m4
+	is from GNU gettext and checks whether nl_langinfo(CODESET)
+	is available in langinfo.h.
--- configure.ac.old	2004-04-17 12:41:22 +0200
+++ configure.ac	2004-04-17 15:21:51 +0200
@@ -510,7 +510,7 @@
 ## Some of these are also checked for when Autoconf computes the default
 ## includes.
 AC_CHECK_HEADERS(arpa/inet.h dl.h dlfcn.h elf.h fcntl.h floatingpoint.h \
-  fpu_control.h grp.h ieee754.h ieeefp.h langinfo.h locale.h \
+  fpu_control.h grp.h ieee754.h ieeefp.h locale.h \
   netdb.h netinet/in.h \
   pwd.h readline/history.h readline/readline.h strings.h \
   sys/param.h sys/select.h sys/socket.h sys/stat.h sys/time.h \
@@ -1161,13 +1161,17 @@
 AC_FUNC_ALLOCA
 AC_CHECK_FUNCS(access chdir expm1 fcntl finite ftruncate getcwd \
   getgrgid getpwuid getuid hypot isascii isnan log1p matherr mkfifo \
-  nl_langinfo popen putenv rint setenv strcoll stat strptime symlink \
+  popen putenv rint setenv strcoll stat strptime symlink \
   system times unsetenv)
 ## <NOTE>
 ## No need checking for bcopy bzero memcpy mempcpy even though ifnames
 ## might report corresponding HAVE_FOO conditionals.
 ## </NOTE>
 
+## check whether nl_langinfo(CODESET) is in langinfo.h
+## defines HAVE_LANGINFO_CODESET if it's there
+AM_LANGINFO_CODESET
+
 ## Used to build src/include/Rmath.h.
 ## <NOTE>
 ## we don't use AC_CONFIG_HEADERS on Rmath.h.in because
--- src/main/main.c.old	2004-04-17 15:03:50 +0200
+++ src/main/main.c	2004-04-17 15:22:37 +0200
@@ -37,7 +37,7 @@
 # include <locale.h>
 #endif
 
-#ifdef HAVE_LANGINFO_H
+#ifdef HAVE_LANGINFO_CODESET
 # include <langinfo.h>
 #endif
 
@@ -459,7 +459,7 @@
 		RSetConsoleWidth();
 	}
 #endif
-#ifdef HAVE_NL_LANGINFO
+#ifdef HAVE_LANGINFO_CODESET
     utf8locale = strcmp(nl_langinfo(CODESET), "UTF-8") == 0;
 #endif
     /* gc_inhibit_torture = 0; */
--- src/main/platform.c.old	2004-04-17 15:06:04 +0200
+++ src/main/platform.c	2004-04-17 15:22:54 +0200
@@ -886,7 +886,7 @@
 #ifdef HAVE_LOCALE_H
 # include <locale.h>
 #endif
-#ifdef HAVE_LANGINFO_H
+#ifdef HAVE_LANGINFO_CODESET
 # include <langinfo.h>
 #endif
 
@@ -914,7 +914,7 @@
     if(p) SET_STRING_ELT(ans, 0, mkChar(p));
     else  SET_STRING_ELT(ans, 0, mkChar(""));
     UNPROTECT(1);
-#ifdef HAVE_NL_LANGINFO
+#ifdef HAVE_LANGINFO_CODESET
     utf8locale = strcmp(nl_langinfo(CODESET), "UTF-8") == 0;
 #endif    
     return ans;
--- m4/Makefile.in.old	2004-04-17 15:27:37 +0200
+++ m4/Makefile.in	2004-04-17 15:27:50 +0200
@@ -13,6 +13,7 @@
 distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
 DISTFILES = Makefile.in README \
 	R.m4 \
+	codeset.m4 \
 	gnome-gnorba-check.m4 \
 	gnome-orbit-check.m4 \
 	gnome.m4 \

From dmurdoch at pair.com  Sun Apr 18 01:06:13 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Sun Apr 18 01:06:16 2004
Subject: [Rd] deparse(substitute(arg)) in C?
Message-ID: <qvd380p2852fiaeo8quuft7sqfk39guhdu@4ax.com>

In R code, "deparse(substitute(arg))" is the usual way to construct a
label for an argument.  Is there an equivalent to this in C code
working on an SEXP, inside a function called by .Internal()?

Duncan Murdoch

From ripley at stats.ox.ac.uk  Sun Apr 18 10:01:40 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Apr 18 10:01:44 2004
Subject: [Rd] deparse(substitute(arg)) in C?
In-Reply-To: <qvd380p2852fiaeo8quuft7sqfk39guhdu@4ax.com>
Message-ID: <Pine.LNX.4.44.0404180846340.13354-100000@gannet.stats>

Isn't it much easier to just pass deparse(substitute(arg)) as an extra 
argument to the .Internal call?

deparse is no problem, as it has C-level equivalents.  substitute is more 
of a problem as you need to give the correct evaluation environment.
Since you can call .Internal directly or inside a wrapper function, the 
latter is not entirely clear to me (but presumably it is the argument of 
the wrapper and not of .Internal that you want).  Then you need to worry 
about not evaluating arguments to the .Internal call, which can only be 
done for all args ....

On Sat, 17 Apr 2004, Duncan Murdoch wrote:

> In R code, "deparse(substitute(arg))" is the usual way to construct a
> label for an argument.  Is there an equivalent to this in C code
> working on an SEXP, inside a function called by .Internal()?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From dmurdoch at pair.com  Sun Apr 18 13:32:55 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Sun Apr 18 13:32:59 2004
Subject: [Rd] deparse(substitute(arg)) in C?
In-Reply-To: <Pine.LNX.4.44.0404180846340.13354-100000@gannet.stats>
References: <qvd380p2852fiaeo8quuft7sqfk39guhdu@4ax.com>
	<Pine.LNX.4.44.0404180846340.13354-100000@gannet.stats>
Message-ID: <nop480pbrgnm7qq99oj2e52jbedufamrbl@4ax.com>

On Sun, 18 Apr 2004 09:01:40 +0100 (BST), Prof Brian Ripley
<ripley@stats.ox.ac.uk> wrote:

>Isn't it much easier to just pass deparse(substitute(arg)) as an extra 
>argument to the .Internal call?

Sounds like it.  Thanks!

Duncan Murdoch

From ripley at stats.ox.ac.uk  Sun Apr 18 14:10:31 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Apr 18 14:10:34 2004
Subject: [Rd] R INSTALL resumes on Win in case of errors (PR#6769)
In-Reply-To: <20040415093816.B67531049C@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404181307440.12887-100000@gannet.stats>

I've fixed this.  It seems the shell used was not passing status codes in 
the same way as a real sh.exe.

Under Windows, --save installs assume only the base package.  This is
necessary to bootstrap the build, as all packages are installed with the
same code.  Under Unix they have R_DEFAULT_PACKAGES=, that is the default
set.  I think Unix is wrong here, and will change it in R-devel.

On Thu, 15 Apr 2004 ligges@statistik.uni-dortmund.de wrote:

> I just post it not to forget - will try to contribute a fix.
> 
> Example: SparseM_0.34.tar.gz
> 
> Running
>    R INSTALL SparseM
> gives an error ("Execution halted"), but resumes the rest of the 
> installation procedure and prints "* DONE" at the end. Hence R CMD check 
> (either running solely or in maintainer's mode) cannot detect that the 
> installation fails. Output:
> 
> 
> [SNIP ...]
> Creating a new generic function for "solve" in "SparseM"
> [1] "solve"
> Error in setMethod("model.matrix", "matrix.csc.hb", function(object, 
> ...) { :
>      No existing definition for function "model.matrix"
> Execution halted
> Execution of package source for SparseM failed
> mv: cannot stat `.RData': No such file or directory
>    installing demos
> [SNIP ...]
> * DONE
> 
> 
> Also note, that the package installs smoothly on Linux/Unix.
> Looks like package "stats" is attached on Unix/Linux during the 
> installation, but not so on Windows. I told the maintainer to use 
> require("stats") in order to be on the save side. Nevertheless, I think 
> we should try to unify the behaviour.
> 
> 
> Uwe Ligges
> 
> 
> --please do not edit the information below--
> 
> Version:
>   platform = i386-pc-mingw32
>   arch = i386
>   os = mingw32
>   system = i386, mingw32
>   status =
>   major = 1
>   minor = 9.0
>   year = 2004
>   month = 04
>   day = 12
>   language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 6
> 
> Search Path:
>   .GlobalEnv, package:methods, package:stats, package:graphics, 
> package:utils, Autoloads, package:base
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Sun Apr 18 14:33:12 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Apr 18 14:33:17 2004
Subject: [Rd] R CMD check on Win fails to detect failed installations
	(PR#6768)
In-Reply-To: <20040415091909.C2F1710495@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404181320150.12939-100000@gannet.stats>

I think you had to be using an install log to get that message.

It is true that R_system($cmd) is not returning an error code, and I've 
fixed that.


On Thu, 15 Apr 2004 ligges@statistik.uni-dortmund.de wrote:

> I just post it not to forget - will try to contribute a fix.
> 
> Example: CDNmoney_2003.9-2.tar.gz (in the archives section of CRAN)
> [There is another problem here I'll address separately.]
> 
> If running solely,
>    R CMD check CDNmoney
> fails to detect a failed installation on Windows. Instead, it reports:
> * checking whether package 'CDNmoney' can be installed ... OK
> 
> Of course, the check fails later, but with some meaningless error messages.
> 
> 
> The repository maintainer's approach works (i.e. detects the problem):
> 
>    R INSTALL CDNmoney > install.log 2>&1
>    R CMD check --install="check:install.log" CDNmoney
> 
> 
> Uwe Ligges
> 
> 
> --please do not edit the information below--
> 
> Version:
>   platform = i386-pc-mingw32
>   arch = i386
>   os = mingw32
>   system = i386, mingw32
>   status =
>   major = 1
>   minor = 9.0
>   year = 2004
>   month = 04
>   day = 12
>   language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 6
> 
> Search Path:
>   .GlobalEnv, package:methods, package:stats, package:graphics, 
> package:utils, Autoloads, package:base
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Sun Apr 18 14:33:42 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun Apr 18 14:33:45 2004
Subject: [Rd] R CMD check on Win fails to detect failed installations
	(PR#6790)
Message-ID: <20040418123342.6E1671046B@slim.kubism.ku.dk>

I think you had to be using an install log to get that message.

It is true that R_system($cmd) is not returning an error code, and I've 
fixed that.


On Thu, 15 Apr 2004 ligges@statistik.uni-dortmund.de wrote:

> I just post it not to forget - will try to contribute a fix.
> 
> Example: CDNmoney_2003.9-2.tar.gz (in the archives section of CRAN)
> [There is another problem here I'll address separately.]
> 
> If running solely,
>    R CMD check CDNmoney
> fails to detect a failed installation on Windows. Instead, it reports:
> * checking whether package 'CDNmoney' can be installed ... OK
> 
> Of course, the check fails later, but with some meaningless error messages.
> 
> 
> The repository maintainer's approach works (i.e. detects the problem):
> 
>    R INSTALL CDNmoney > install.log 2>&1
>    R CMD check --install="check:install.log" CDNmoney
> 
> 
> Uwe Ligges
> 
> 
> --please do not edit the information below--
> 
> Version:
>   platform = i386-pc-mingw32
>   arch = i386
>   os = mingw32
>   system = i386, mingw32
>   status =
>   major = 1
>   minor = 9.0
>   year = 2004
>   month = 04
>   day = 12
>   language = R
> 
> Windows NT 4.0 (build 1381) Service Pack 6
> 
> Search Path:
>   .GlobalEnv, package:methods, package:stats, package:graphics, 
> package:utils, Autoloads, package:base
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kjetil at entelnet.bo  Sun Apr 18 17:35:52 2004
From: kjetil at entelnet.bo (kjetil@entelnet.bo)
Date: Sun Apr 18 17:36:17 2004
Subject: [Rd] arima
Message-ID: <40826818.11930.3636C8@localhost>

Hola!

I got problems using an objects returned from arima
(in KalmanSmooth(my.ts, ModArima$model), because
my.ts showed up to have storage mode "integer" (is.integer(my.ts was
TRUE). 

Should storage.mode() of a ts be allowed to be integer, 
should ts() someplace say storage.mode(ts.out) <- "double", or
maybe inside arima()
storage.mode(x) <- "double"
storage.mode(xreg) <- "double"
?

Kjetil Halvorsen

From ripley at stats.ox.ac.uk  Sun Apr 18 18:01:53 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Apr 18 18:01:59 2004
Subject: [Rd] arima
In-Reply-To: <40826818.11930.3636C8@localhost>
Message-ID: <Pine.LNX.4.44.0404181648350.22842-100000@gannet.stats>

On Sun, 18 Apr 2004 kjetil@entelnet.bo wrote:

> I got problems using an objects returned from arima
> (in KalmanSmooth(my.ts, ModArima$model), because
> my.ts showed up to have storage mode "integer" (is.integer(my.ts was
> TRUE). 
> 
> Should storage.mode() of a ts be allowed to be integer, 

We had a debate about that a while back. Seems the majority opinion is
that a ts can have any atomic mode (numeric, integer, complex, logical,
character), but that most of the analysis code assumes a ts object is
numeric.  So arima() contains

    x <- as.ts(x)
    if(!is.numeric(x))
        stop("`x' must be numeric")
    storage.mode(x) <- "double"  # a precaution
!


> should ts() someplace say storage.mode(ts.out) <- "double", or
> maybe inside arima()
> storage.mode(x) <- "double"
> storage.mode(xreg) <- "double"
> ?

Yes, sort of (xreg=NULL cannot have storage mode "double"), and those
coercions _are_ already inside arima.


I think the issue is that you need to be more careful using KalmanSmooth:  
my.ts would not have been returned by arima(). The Kalman* functions are
internal workhorses and there is a `Warning' about precisely this on their
help page.  I suggest you write a tsSmooth method and use that rather than
calling KalmanSmooth directly.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Sun Apr 18 18:08:35 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Apr 18 18:08:41 2004
Subject: [Rd] type.convert (PR#6781)
In-Reply-To: <20040416163133.1085710495@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404181704360.22842-100000@gannet.stats>

On Fri, 16 Apr 2004 hosking@watson.ibm.com wrote:

[...]

> Rider: it would be nice if type.convert had a strip.white argument, so that
>   type.convert(c(" 6"," -"),na.strings="-",strip.white=T) 
> would return a numeric vector. Stripping leading and trailing blanks can be
> time-consuming, and could presumably be done more quickly by an .Internal
> function such as the one called by type.convert.

It can be done very rapidly by sub(), for example.

Given that type.convert is documented as a helper function for read.table, 
we will not be encumbering it with features read.table does not need.  It 
would be helpful if you did not encumber bug reports with other issues, 
too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Sun Apr 18 18:31:13 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Apr 18 18:31:16 2004
Subject: [Rd] type.convert (PR#6781)
In-Reply-To: <20040416163133.1085710495@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404181714470.22842-100000@gannet.stats>

On Fri, 16 Apr 2004 hosking@watson.ibm.com wrote:

> Full_Name: J. R. M. Hosking
> Version: 1.9.0
> OS: Windows 2000
> Submission from: (NULL) (129.34.20.23)
> 
> 
> Two problems, perhaps related:
> 
> (1) na.strings is not honored when x is non-numeric and as.is=T
> 
>   > type.convert( c("abc","-"), as.is=T, na.strings="-" )
>   [1] "abc" "-"  
> 
> ... unless x consists only of NAs
> 
>   > type.convert( c("abc","-"), as.is=T, na.strings=c("-","abc") )
>   [1] NA NA

That is documented to be different (a logical vector).

> But with x numeric or as.is FALSE (or omitted), it works as advertised:
> 
>   > type.convert( c("abc","-"), na.strings="-" )
>   [1] abc  <NA>
>   Levels: abc
>   > type.convert( c("6","-"), na.strings="-" )
>   [1]  6 NA

The point is that if no conversion takes place, no checking for na.strings 
took place.  That _was_ intentional, as it is not needed by read.table.
I've added it.


> (2) When na.strings is omitted, blank strings in nonnumeric vectors are not
> converted into NAs (regardless of the value of as.is).

This is wholly intentional, and is now documented.  It is nothing to do 
with whether `na.strings is omitted', though.

>   > type.convert(c("6",""," "))     # OK: gives 6 NA NA
>   [1]  6 NA NA
> 
>   > type.convert(c("A",""," "))   # gives a factor with 3 levels and no NAs
>   [1] A    
>   Levels:    A
> 
>   > type.convert(c("A",""," "),as.is=T)  # gives a char vector with no NAs
>   [1] "A" ""  " "

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From savieg at stadt.duesseldorf.de  Mon Apr 19 13:07:00 2004
From: savieg at stadt.duesseldorf.de (savieg@stadt.duesseldorf.de)
Date: Mon Apr 19 13:12:39 2004
Subject: [Rd] =?iso-8859-1?q?E-Mail_Inhalt_nicht_zul=E4ssig?=
Message-ID: <20040419111238.36DE77C4C9@mail02.duesseldorf.de>

Ein Dateinanhang an dieser E-Mail wurde entfernt, weil er nicht den Sicherheitsrichtlinien entsprach.

From: r-devel@lists.r-project.org
To: heinrichh@intramail.stv-ddorf.de

File(s): msg15762.pif

Matching filename: *.pif

From terra at gnome.org  Mon Apr 19 17:12:20 2004
From: terra at gnome.org (terra@gnome.org)
Date: Mon Apr 19 17:13:14 2004
Subject: [Rd] pgeom accuracy (PR#6792)
Message-ID: <20040419151220.33B8D104B1@slim.kubism.ku.dk>

Full_Name: Morten Welinder
Version: snapshot
OS: 
Submission from: (NULL) (65.213.85.218)


This should fix the remaining two 1-p cancellation issues.

  double l_rt = log1p (-p) * (x + 1);
  if (log_p)
    return R_DT_Clog (l_rt);
  else
    return lower_tail ? -expm1 (l_rt) : exp (l_rt);

From p.dalgaard at biostat.ku.dk  Mon Apr 19 17:54:53 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon Apr 19 17:59:00 2004
Subject: [Rd] pgeom accuracy (PR#6792)
In-Reply-To: <20040419151220.33B8D104B1@slim.kubism.ku.dk>
References: <20040419151220.33B8D104B1@slim.kubism.ku.dk>
Message-ID: <x2u0zgm08i.fsf@biostat.ku.dk>

terra@gnome.org writes:

> Full_Name: Morten Welinder
> Version: snapshot
> OS: 
> Submission from: (NULL) (65.213.85.218)

Never mind the actual content, but snapshot of what? You are being
lazy in a way that potentially causes more work for other people.  

Please state the version exactly, including the date (of the snapshot,
not the submission!) and whether it is of R-devel or R-patched.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From terra at gnome.org  Mon Apr 19 18:04:51 2004
From: terra at gnome.org (Morten Welinder)
Date: Mon Apr 19 18:05:53 2004
Subject: [Rd] pgeom accuracy (PR#6792)
In-Reply-To: <x2u0zgm08i.fsf@biostat.ku.dk> (message from Peter Dalgaard on 19
	Apr 2004 17:54:53 +0200)
References: <20040419151220.33B8D104B1@slim.kubism.ku.dk>
	<x2u0zgm08i.fsf@biostat.ku.dk>
Message-ID: <200404191604.i3JG4pI9013376@robbie.rentec.com>


Apologies.  Snapshot from

    rsync --stats -z -rC --delete rsync.r-project.org::r-devel R

yesterday which contains the fragment pow(1-p,...) which is problematic
for small p.

(If the snapshot I get with the above command has an official name I'll
be happy to use that in future reports.)

Morten

From p.dalgaard at biostat.ku.dk  Mon Apr 19 18:15:14 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon Apr 19 18:19:17 2004
Subject: [Rd] pgeom accuracy (PR#6792)
In-Reply-To: <200404191604.i3JG4pI9013376@robbie.rentec.com>
References: <20040419151220.33B8D104B1@slim.kubism.ku.dk>
	<x2u0zgm08i.fsf@biostat.ku.dk>
	<200404191604.i3JG4pI9013376@robbie.rentec.com>
Message-ID: <x2pta4lzal.fsf@biostat.ku.dk>

terra@gnome.org (Morten Welinder) writes:

> Apologies.  Snapshot from
> 
>     rsync --stats -z -rC --delete rsync.r-project.org::r-devel R
> 
> yesterday which contains the fragment pow(1-p,...) which is problematic
> for small p.
> 
> (If the snapshot I get with the above command has an official name I'll
> be happy to use that in future reports.)
> 
> Morten

The sources should be time-stamped. Take a look at

?version
?bug.report


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From terra at gnome.org  Mon Apr 19 18:30:22 2004
From: terra at gnome.org (terra@gnome.org)
Date: Mon Apr 19 18:31:15 2004
Subject: [Rd] rsync command in FAQ (PR#6793)
Message-ID: <20040419163022.2744E104B1@slim.kubism.ku.dk>

Full_Name: Morten Welinder
Version: snapshot, see see below
OS: 
Submission from: (NULL) (65.213.85.218)


The FAQ suggests running

    rsync -rC --delete rsync.R-project.org::MODULE R

which I did yesterday to get the version I have.  This command should have "-p
-t"
added so it will preserve time stamps and modes.  (Doing that will make
subsequent
rsyncs much faster.)

From maechler at stat.math.ethz.ch  Mon Apr 19 19:49:14 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon Apr 19 19:49:17 2004
Subject: [Rd] pgeom accuracy (PR#6792)
In-Reply-To: <x2pta4lzal.fsf@biostat.ku.dk>
References: <20040419151220.33B8D104B1@slim.kubism.ku.dk>
	<x2u0zgm08i.fsf@biostat.ku.dk>
	<200404191604.i3JG4pI9013376@robbie.rentec.com>
	<x2pta4lzal.fsf@biostat.ku.dk>
Message-ID: <16516.4378.201536.848657@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard <p.dalgaard@biostat.ku.dk>
>>>>>     on 19 Apr 2004 18:15:14 +0200 writes:

    PD> terra@gnome.org (Morten Welinder) writes:
    >> Apologies.  Snapshot from
    >> 
    >> rsync --stats -z -rC --delete
    >> rsync.r-project.org::r-devel R
    >> 
    >> yesterday which contains the fragment pow(1-p,...) which
    >> is problematic for small p.
    >> 
    >> (If the snapshot I get with the above command has an
    >> official name I'll be happy to use that in future
    >> reports.)
    >> 
    >> Morten

    PD> The sources should be time-stamped. Take a look at

    PD>  ?bug.report
    PD>  ?version

if Morten has compiled the snapshot version,...

Otherwise, use  
	   <source>/VERSION
and	   <source>/date-stamp

From maechler at stat.math.ethz.ch  Mon Apr 19 19:49:50 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon Apr 19 19:49:55 2004
Subject: [Rd] pgeom accuracy (PR#6792)
Message-ID: <20040419174950.EFF5B1048D@slim.kubism.ku.dk>

>>>>> "PD" == Peter Dalgaard <p.dalgaard@biostat.ku.dk>
>>>>>     on 19 Apr 2004 18:15:14 +0200 writes:

    PD> terra@gnome.org (Morten Welinder) writes:
    >> Apologies.  Snapshot from
    >> 
    >> rsync --stats -z -rC --delete
    >> rsync.r-project.org::r-devel R
    >> 
    >> yesterday which contains the fragment pow(1-p,...) which
    >> is problematic for small p.
    >> 
    >> (If the snapshot I get with the above command has an
    >> official name I'll be happy to use that in future
    >> reports.)
    >> 
    >> Morten

    PD> The sources should be time-stamped. Take a look at

    PD>  ?bug.report
    PD>  ?version

if Morten has compiled the snapshot version,...

Otherwise, use  
	   <source>/VERSION
and	   <source>/date-stamp

From joachim.geiger at ipp.mpg.de  Tue Apr 20 11:52:09 2004
From: joachim.geiger at ipp.mpg.de (joachim.geiger@ipp.mpg.de)
Date: Tue Apr 20 11:52:12 2004
Subject: [Rd] R.spec (PR#6797)
Message-ID: <20040420095209.EE86810478@slim.kubism.ku.dk>

Full_Name: Joachim Geiger
Version: 1.9.0-1
OS: redhat 8.0
Submission from: (NULL) (194.94.233.87)


Hello,
the bug concerns the source-rpm of the 1.9.0 version on my redhat 8.0 system.
The specfile requires tk-devel for compilation, but on RedHat8.0 the headers are
already in the tk-rpm included. After changing tk-devel to tk, compilation runs
smoothly.
Best regards and thanx that U R to provide R
Joachim
P.S.: Any interest in the rpm-package?

From p.dalgaard at biostat.ku.dk  Tue Apr 20 12:20:38 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Tue Apr 20 12:24:09 2004
Subject: [Rd] R.spec (PR#6797)
In-Reply-To: <20040420095209.EE86810478@slim.kubism.ku.dk>
References: <20040420095209.EE86810478@slim.kubism.ku.dk>
Message-ID: <x2pta354sp.fsf@biostat.ku.dk>

joachim.geiger@ipp.mpg.de writes:

> Full_Name: Joachim Geiger
> Version: 1.9.0-1
> OS: redhat 8.0
> Submission from: (NULL) (194.94.233.87)
> 
> 
> Hello,
> the bug concerns the source-rpm of the 1.9.0 version on my redhat 8.0 system.
> The specfile requires tk-devel for compilation, but on RedHat8.0 the headers are
> already in the tk-rpm included. After changing tk-devel to tk, compilation runs
> smoothly.
> Best regards and thanx that U R to provide R
> Joachim
> P.S.: Any interest in the rpm-package?

Hmm, ask Martyn. However, the FC1 RPM installed flawlessly on my RH8
laptop...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Tue Apr 20 13:42:44 2004
From: p.dalgaard at biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue Apr 20 13:42:46 2004
Subject: [Rd] Re: [R] Unexpected behaviour of identical (PR#6799)
Message-ID: <20040420114244.86AF4104BA@slim.kubism.ku.dk>

"Swinton, Jonathan" <Jonathan.Swinton@astrazeneca.com> writes:

>  # works as expected
> > ac <- c('A','B');
> > identical(ac,ac[1:2])
> [1] TRUE
>  
>  #but
> > af <- factor(ac)
> > identical(af,af[1:2])
> [1] FALSE
> 
> Any opinions?

Did a cross-check with Splus and it doesn't do that , so I think it
qualifies as a bug. Shouldn't be too hard to fix (might lose a little
efficiencty though).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From P.S.Hatton at bham.ac.uk  Tue Apr 20 13:48:55 2004
From: P.S.Hatton at bham.ac.uk (P.S.Hatton@bham.ac.uk)
Date: Tue Apr 20 13:48:57 2004
Subject: [Rd] 1.9.0 regression test on HP-UX (PR#6800)
Message-ID: <20040420114855.0858F104BA@slim.kubism.ku.dk>

Hi,

On behalf of one of our users, I installed R 1.8.1 on HP-UX11.0 by 
compiling the source using the gnu compilers and all was fine with

make check

On 1.9.0, I get an error from 'make check' when running reg-tests-1.R 
which gives error exit code 1.  Commands used are:

./configure --prefix=/apps/global/Gnu_R/R-1.9.0 --with-x 
R_BROWSER=mozilla

(all on one line, of course)

make
make check

I tried to get it to make with the HP-UX cc, aCC and f90 but couldn't 
get it to make (make came back with numerous unresolved symbols such 
as dtrsl), so I'm just using the gnu compilers. I guess that setting 
the loader search path would get round this, but for now at least the 
gnu compilers will be good enough.

Any advice appreciated.

Thanks

-- 
Paul Hatton, Information Services, Elms Road Computer Centre,
The University of Birmingham, Birmingham B15 2TT.
Ph: 0121-414-3994   Fax: 0121-414-3952

From ripley at stats.ox.ac.uk  Tue Apr 20 13:51:46 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr 20 13:51:49 2004
Subject: [Rd] Re: [R] Unexpected behaviour of identical (PR#6799)
In-Reply-To: <20040420114244.86AF4104BA@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404201249140.11664-100000@gannet.stats>

On Tue, 20 Apr 2004 p.dalgaard@biostat.ku.dk wrote:

> "Swinton, Jonathan" <Jonathan.Swinton@astrazeneca.com> writes:
> 
> >  # works as expected
> > > ac <- c('A','B');
> > > identical(ac,ac[1:2])
> > [1] TRUE
> >  
> >  #but
> > > af <- factor(ac)
> > > identical(af,af[1:2])
> > [1] FALSE
> > 
> > Any opinions?
> 
> Did a cross-check with Splus and it doesn't do that , so I think it
> qualifies as a bug. Shouldn't be too hard to fix (might lose a little
> efficiencty though).

No, it comes from

> get("[.factor")
function (x, i, drop = FALSE)
{
    y <- NextMethod("[")
    class(y) <- oldClass(x)
    attr(y, "contrasts") <- attr(x, "contrasts")
    attr(y, "levels") <- attr(x, "levels")
    if (drop)
        factor(y)
    else y
}

> attributes(af[1:2, drop=TRUE])
$levels
[1] "A" "B"

$class
[1] "factor"

> attributes(af[1:2, drop=FALSE])
$class
[1] "factor"

$levels
[1] "A" "B"

and one needs to swap the orders.  I am about to commit the change.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Apr 20 14:00:24 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr 20 14:00:28 2004
Subject: [Rd] 1.9.0 regression test on HP-UX (PR#6800)
In-Reply-To: <20040420114855.0858F104BA@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404201256340.11664-100000@gannet.stats>

The crucial information is in tests/reg-tests-1.Rout.fail, at the bottom
(I expect).  Please do tell us what the failure was and we may be able to 
help.

Note that I have removed the bug repository from the followup: I don't see 
any evidence of an R bug here as yet.

On Tue, 20 Apr 2004 P.S.Hatton@bham.ac.uk wrote:

> Hi,
> 
> On behalf of one of our users, I installed R 1.8.1 on HP-UX11.0 by 
> compiling the source using the gnu compilers and all was fine with
> 
> make check
> 
> On 1.9.0, I get an error from 'make check' when running reg-tests-1.R 
> which gives error exit code 1.  Commands used are:
> 
> ./configure --prefix=/apps/global/Gnu_R/R-1.9.0 --with-x 
> R_BROWSER=mozilla
> 
> (all on one line, of course)
> 
> make
> make check
> 
> I tried to get it to make with the HP-UX cc, aCC and f90 but couldn't 
> get it to make (make came back with numerous unresolved symbols such 
> as dtrsl), so I'm just using the gnu compilers. I guess that setting 
> the loader search path would get round this, but for now at least the 
> gnu compilers will be good enough.
> 
> Any advice appreciated.
> 
> Thanks
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From gregory_r_warnes at groton.pfizer.com  Tue Apr 20 15:12:57 2004
From: gregory_r_warnes at groton.pfizer.com (Warnes, Gregory R)
Date: Tue Apr 20 15:13:11 2004
Subject: [Rd] Re: [R] More user-friendly error message needed.
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20C521283@groexmb02.pfizer.com>



> -----Original Message-----
> From: r-devel-bounces@stat.math.ethz.ch
> [mailto:r-devel-bounces@stat.math.ethz.ch]On Behalf Of Douglas Bates
> Sent: Wednesday, April 07, 2004 5:13 PM
> To: Warnes, Gregory R
> Cc: Shin; r-devel@stat.math.ethz.ch; 'Duncan Murdoch'
> Subject: Re: [Rd] Re: [R] More user-friendly error message needed.
> 
> 
> "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com> writes:
> 
> > Perhaps one could create a utility function 
> > 
> > 	has.element <- function(list, name) name %in% names(list)
> > 
> > and then have $ generate a warning (not an error!) when the 
> named element
> > does not exist.
> 
> Because of partial matching, list$name can return a result when 
> your has.element function returns FALSE.

Ash, well simple enough to fix:

	has.element <- function(list,name) !is.na(pmatch(name,names(list))

> 
> > lst = list(foo = 1:3, bar = LETTERS[1:3])
> > lst$f
> [1] 1 2 3
> > has.element <- function(list, name) name %in% names(list)
> > has.element(lst, "f")
> [1] FALSE
> 
> Before we go too far in speculating about what the $ operator should
> or should not return when the name is not matched, let's all remember
> that the semantics of the $ operator explicitly state that it should
> return NULL and, as Duncan wrote, there are many, many places in the
> base code for R that depend upon this behavior.  Trust me - you really
> don't want to change this.

While I do think that it is necessary to preseve the present semantics, it
would still be helpful to (at least optionally) have a warning issued when
NULL is returned because there is no matching name.   This really would help
in debugging code.

-Greg


> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 


LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}

From p.dalgaard at biostat.ku.dk  Tue Apr 20 15:28:46 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Tue Apr 20 15:32:16 2004
Subject: [Rd] Re: [R] Unexpected behaviour of identical (PR#6799)
In-Reply-To: <Pine.LNX.4.44.0404201249140.11664-100000@gannet.stats>
References: <Pine.LNX.4.44.0404201249140.11664-100000@gannet.stats>
Message-ID: <x2y8oq4w35.fsf@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> 
> No, it comes from
> 
> > get("[.factor")
> function (x, i, drop = FALSE)
> {
>     y <- NextMethod("[")
>     class(y) <- oldClass(x)
>     attr(y, "contrasts") <- attr(x, "contrasts")
>     attr(y, "levels") <- attr(x, "levels")
>     if (drop)
>         factor(y)
>     else y
> }
> 
> > attributes(af[1:2, drop=TRUE])
> $levels
> [1] "A" "B"
> 
> $class
> [1] "factor"
> 
> > attributes(af[1:2, drop=FALSE])
> $class
> [1] "factor"
> 
> $levels
> [1] "A" "B"
> 
> and one needs to swap the orders.  I am about to commit the change.

I got to about the same spot and started thinking about methods
for putting attributes back in the same order that they were found, as
in

A <- attributes(x)
attributes(y) <- A[names(A) %in% c("class","contrasts","levels")]

Just swapping the order is probably fine, though.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From tplate at blackmesacapital.com  Tue Apr 20 17:03:56 2004
From: tplate at blackmesacapital.com (Tony Plate)
Date: Tue Apr 20 17:04:04 2004
Subject: [Rd] Re: [R] Unexpected behaviour of identical (PR#6799)
In-Reply-To: <20040420114244.86AF4104BA@slim.kubism.ku.dk>
References: <20040420114244.86AF4104BA@slim.kubism.ku.dk>
Message-ID: <6.1.0.6.2.20040420090025.03fcf3e0@mailhost.blackmesacapital.com>

What about changing identical() to ignore the order of attributes?  Is 
there any code anywhere that depends on the order of attributes, other than 
identical()?  I've only seen attributes treated as an unordered set, and 
never as an ordered list.  There are some functions in S-plus that change 
the order of attributes, and the only thing this affects is 
identical().  (Which in S-plus also pays attention to the order of attributes.)

-- Tony Plate

At Tuesday 05:42 AM 4/20/2004, p.dalgaard@biostat.ku.dk wrote:
>"Swinton, Jonathan" <Jonathan.Swinton@astrazeneca.com> writes:
>
> >  # works as expected
> > > ac <- c('A','B');
> > > identical(ac,ac[1:2])
> > [1] TRUE
> >
> >  #but
> > > af <- factor(ac)
> > > identical(af,af[1:2])
> > [1] FALSE
> >
> > Any opinions?
>
>Did a cross-check with Splus and it doesn't do that , so I think it
>qualifies as a bug. Shouldn't be too hard to fix (might lose a little
>efficiencty though).
>
>--
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
>~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>
>______________________________________________
>R-devel@stat.math.ethz.ch mailing list
>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From ripley at stats.ox.ac.uk  Tue Apr 20 17:12:36 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue Apr 20 17:12:38 2004
Subject: [Rd] 1.9.0 regression test on HP-UX (PR#6800)
Message-ID: <20040420151236.4177E104C2@slim.kubism.ku.dk>

All we needed was

gannet% tail reg-tests-1.Rout.fail
6           1   6
attr(,"assign")
[1] 0 1
> ##
>
>
> ## broken strptime in glibc (and code used on Windows)
> stopifnot(!is.na(strptime("2003-02-30", format="%Y-%m-%d")))
Error: !is.na(strptime("2003-02-30", format = "%Y-%m-%d")) is not TRUE
Execution halted

which makes clear that your platform has a broken implementation of 
strptime.  That's not an R bug, and no platform that anyone bothered to 
alpha or beta test failed that test ....

You may want to undefine HAVE_WORKING_STRPTIME in src/include/config.h and
build again -- it is possible that will work around this.

I trust that you will now file (in the right place) a more careful bug
report on the HP-UX error you have discovered.


On Tue, 20 Apr 2004, Paul Hatton wrote:

> Thanks. Zipped results file attached.
> 
> Regards
> 
> Date sent:      	Tue, 20 Apr 2004 13:00:24 +0100 (BST)
> From:           	Prof Brian Ripley <ripley@stats.ox.ac.uk>
> To:             	P.S.Hatton@bham.ac.uk
> Copies to:      	r-devel@stat.math.ethz.ch
> Subject:        	Re: [Rd] 1.9.0 regression test on HP-UX (PR#6800)
> 
> > The crucial information is in tests/reg-tests-1.Rout.fail, at the
> > bottom (I expect).  Please do tell us what the failure was and we may
> > be able to help.
> > 
> > Note that I have removed the bug repository from the followup: I don't
> > see any evidence of an R bug here as yet.
> > 
> > On Tue, 20 Apr 2004 P.S.Hatton@bham.ac.uk wrote:
> > 
> > > Hi,
> > > 
> > > On behalf of one of our users, I installed R 1.8.1 on HP-UX11.0 by
> > > compiling the source using the gnu compilers and all was fine with
> > > 
> > > make check
> > > 
> > > On 1.9.0, I get an error from 'make check' when running
> > > reg-tests-1.R which gives error exit code 1.  Commands used are:
> > > 
> > > ./configure --prefix=/apps/global/Gnu_R/R-1.9.0 --with-x 
> > > R_BROWSER=mozilla
> > > 
> > > (all on one line, of course)
> > > 
> > > make
> > > make check
> > > 
> > > I tried to get it to make with the HP-UX cc, aCC and f90 but
> > > couldn't get it to make (make came back with numerous unresolved
> > > symbols such as dtrsl), so I'm just using the gnu compilers. I guess
> > > that setting the loader search path would get round this, but for
> > > now at least the gnu compilers will be good enough.
> > > 
> > > Any advice appreciated.
> > > 
> > > Thanks
> > > 
> > > 
> > 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self) 1 South
> > Parks Road,                     +44 1865 272866 (PA) Oxford OX1 3TG,
> > UK                Fax:  +44 1865 272595
> > 
> > 
> 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Apr 20 17:13:55 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr 20 17:14:00 2004
Subject: [Rd] Re: [R] Unexpected behaviour of identical (PR#6799)
In-Reply-To: <6.1.0.6.2.20040420090025.03fcf3e0@mailhost.blackmesacapital.com>
Message-ID: <Pine.LNX.4.44.0404201613020.14900-100000@gannet.stats>

I wondered that, but I think we need to hear from the author of 
identical().

It is neater to have attributes printed in a consistent order, though.

On Tue, 20 Apr 2004, Tony Plate wrote:

> What about changing identical() to ignore the order of attributes?  Is 
> there any code anywhere that depends on the order of attributes, other than 
> identical()?  I've only seen attributes treated as an unordered set, and 
> never as an ordered list.  There are some functions in S-plus that change 
> the order of attributes, and the only thing this affects is 
> identical().  (Which in S-plus also pays attention to the order of attributes.)
> 
> -- Tony Plate
> 
> At Tuesday 05:42 AM 4/20/2004, p.dalgaard@biostat.ku.dk wrote:
> >"Swinton, Jonathan" <Jonathan.Swinton@astrazeneca.com> writes:
> >
> > >  # works as expected
> > > > ac <- c('A','B');
> > > > identical(ac,ac[1:2])
> > > [1] TRUE
> > >
> > >  #but
> > > > af <- factor(ac)
> > > > identical(af,af[1:2])
> > > [1] FALSE
> > >
> > > Any opinions?
> >
> >Did a cross-check with Splus and it doesn't do that , so I think it
> >qualifies as a bug. Shouldn't be too hard to fix (might lose a little
> >efficiencty though).
> >
> >--
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> >~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> >
> >______________________________________________
> >R-devel@stat.math.ethz.ch mailing list
> >https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From joannw at usca.edu  Tue Apr 20 17:42:15 2004
From: joannw at usca.edu (joannw@usca.edu)
Date: Tue Apr 20 17:42:18 2004
Subject: [Rd] Fatal Error: Invalid HOMEDRIVE (PR#6802)
Message-ID: <20040420154215.8D3781048E@slim.kubism.ku.dk>

Full_Name: Joann Williamson
Version: 1.9.0
OS: Windows XP
Submission from: (NULL) (129.252.198.28)


I installed R project 1.9.0 on Windows XP.  The installation went well. Then, I
rebooted.  Next, I clicked the icon under Programs in the Start menu and
received this error, "Fatal Error: Invalid HOMEDRIVE".  I clicked OK to the
error message.  The program does not start.  I went to a DOS prompt and did
?echo %HOMEDRIVE%? and it returned ?C:?.  This letter is a valid drive letter. 
Can you tell me how to fix this?  
Thanks you,
Joann Williamson 
Network Administrator
University of South Carolina Aiken
471 University Parkway
Aiken, SC 29801
803-641-3473

From p.dalgaard at biostat.ku.dk  Tue Apr 20 17:46:02 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Tue Apr 20 17:49:32 2004
Subject: [Rd] Fatal Error: Invalid HOMEDRIVE (PR#6802)
In-Reply-To: <20040420154215.8D3781048E@slim.kubism.ku.dk>
References: <20040420154215.8D3781048E@slim.kubism.ku.dk>
Message-ID: <x2hdve4pqd.fsf@biostat.ku.dk>

joannw@usca.edu writes:

> Full_Name: Joann Williamson
> Version: 1.9.0
> OS: Windows XP
> Submission from: (NULL) (129.252.198.28)
> 
> 
> I installed R project 1.9.0 on Windows XP.  The installation went well. Then, I
> rebooted.  Next, I clicked the icon under Programs in the Start menu and
> received this error, "Fatal Error: Invalid HOMEDRIVE".  I clicked OK to the
> error message.  The program does not start.  I went to a DOS prompt and did
> ?echo %HOMEDRIVE%? and it returned ?C:?.  This letter is a valid drive letter. 
> Can you tell me how to fix this?  

This is not (likely) a bug in R, so why are you submitting to R-bugs?
...within minutes of sending to R-help, to boot.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From tplate at blackmesacapital.com  Tue Apr 20 17:50:28 2004
From: tplate at blackmesacapital.com (Tony Plate)
Date: Tue Apr 20 17:50:39 2004
Subject: [Rd] Re: [R] Unexpected behaviour of identical (PR#6799)
In-Reply-To: <Pine.LNX.4.44.0404201613020.14900-100000@gannet.stats>
References: <6.1.0.6.2.20040420090025.03fcf3e0@mailhost.blackmesacapital.com>
	<Pine.LNX.4.44.0404201613020.14900-100000@gannet.stats>
Message-ID: <6.1.0.6.2.20040420092759.04010a88@mailhost.blackmesacapital.com>

AFAIK identical() first introduced by Chambers in "Programming with 
data"?  On p262 he writes:

identical: The two objects must be exactly equal in all respects; if not 
identical returns FALSE
all.equal: The two objects are expected to be identical up to small 
differences that might be considered irrelevant...

Taken literally, this would seem to argue against identical() treating 
attributes as a set (unless one were to tighten up the definition of 
attributes in Section 2.2 of the R Language Definition to explicitly state 
that attributes are to be treated as an unordered set).

However, given the primary use of identical() on complex objects is in 
software testing, and AFAIK no software depends on the order of attributes, 
I still think it would be reasonable for attributes to be treated as a set 
by identical().  (Unless anyone can show that it's important to recognize 
order of attributes in some code.)

I'm proposing a more general fix for this problem because I strongly 
suspect that factor subsetting is not the only thing that can change the 
order of attributes, and because I've wasted many hours tracking down 
problems that turned out to be caused by problems with data.dump() and 
identical() in S-plus.  Another possible fix might be for the attr() and 
attributes() replacement functions to store attributes as a sorted list.  I 
don't know if this would be easy or difficult to implement, or what 
consequences it might have in terms of existing tests that involve printed 
output of attributes.

-- Tony Plate

At Tuesday 09:13 AM 4/20/2004, Prof Brian Ripley wrote:
>I wondered that, but I think we need to hear from the author of
>identical().
>
>It is neater to have attributes printed in a consistent order, though.
>
>On Tue, 20 Apr 2004, Tony Plate wrote:
>
> > What about changing identical() to ignore the order of attributes?  Is
> > there any code anywhere that depends on the order of attributes, other 
> than
> > identical()?  I've only seen attributes treated as an unordered set, and
> > never as an ordered list.  There are some functions in S-plus that change
> > the order of attributes, and the only thing this affects is
> > identical().  (Which in S-plus also pays attention to the order of 
> attributes.)
> >
> > -- Tony Plate
> >
> > At Tuesday 05:42 AM 4/20/2004, p.dalgaard@biostat.ku.dk wrote:
> > >"Swinton, Jonathan" <Jonathan.Swinton@astrazeneca.com> writes:
> > >
> > > >  # works as expected
> > > > > ac <- c('A','B');
> > > > > identical(ac,ac[1:2])
> > > > [1] TRUE
> > > >
> > > >  #but
> > > > > af <- factor(ac)
> > > > > identical(af,af[1:2])
> > > > [1] FALSE
> > > >
> > > > Any opinions?
> > >
> > >Did a cross-check with Splus and it doesn't do that , so I think it
> > >qualifies as a bug. Shouldn't be too hard to fix (might lose a little
> > >efficiencty though).
> > >
> > >--
> > >    O__  ---- Peter Dalgaard             Blegdamsvej 3
> > >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
> > >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > >~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > >
> > >______________________________________________
> > >R-devel@stat.math.ethz.ch mailing list
> > >https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >
> >
>
>--
>Brian D. Ripley,                  ripley@stats.ox.ac.uk
>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>University of Oxford,             Tel:  +44 1865 272861 (self)
>1 South Parks Road,                     +44 1865 272866 (PA)
>Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Tue Apr 20 17:53:47 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue Apr 20 17:53:50 2004
Subject: [Rd] Fatal Error: Invalid HOMEDRIVE (PR#6802)
In-Reply-To: <20040420154215.8D3781048E@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404201648080.15010-100000@gannet.stats>

This is not a bug in R, and you have just send the message to R-help.
Don't abuse the bug repository -- a `Network Administrator' really ought 
to know better.

That message is also generated if HOMEPATH is wrongly set, so please check 
that too.  Reasonable settings are

HOMEDRIVE=C:
HOMEPATH=\Documents and Settings\ripley

and %HOMEDRIVE%%HOMEPATH% must be a valid path if HOMEDRIVE is set.

You can avoid this by setting HOME. This *is* mentioned in the README 
file!



On Tue, 20 Apr 2004 joannw@usca.edu wrote:

> Full_Name: Joann Williamson
> Version: 1.9.0
> OS: Windows XP
> Submission from: (NULL) (129.252.198.28)
> 
> 
> I installed R project 1.9.0 on Windows XP.  The installation went well. Then, I
> rebooted.  Next, I clicked the icon under Programs in the Start menu and
> received this error, "Fatal Error: Invalid HOMEDRIVE".  I clicked OK to the
> error message.  The program does not start.  I went to a DOS prompt and did
> ?echo %HOMEDRIVE%? and it returned ?C:?.  This letter is a valid drive letter. 
> Can you tell me how to fix this?  
> Thanks you,
> Joann Williamson 
> Network Administrator
> University of South Carolina Aiken
> 471 University Parkway
> Aiken, SC 29801
> 803-641-3473

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From JoannW at usca.edu  Tue Apr 20 18:11:38 2004
From: JoannW at usca.edu (Joann Williamson)
Date: Tue Apr 20 18:11:40 2004
Subject: [Rd] Fatal Error: Invalid HOMEDRIVE (PR#6802)
Message-ID: <F9D084AF922BC24AA87F674DE1E6850E3BAA08@exchange.usca.edu>

My apologies.  I do not use the software. I am just trying to help a
friend.  It is what I do.
Thanks for the answer.
Joann

-----Original Message-----
From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk] 
Sent: Tuesday, April 20, 2004 11:54 AM
To: Joann Williamson
Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
Subject: Re: [Rd] Fatal Error: Invalid HOMEDRIVE (PR#6802)

This is not a bug in R, and you have just send the message to R-help.
Don't abuse the bug repository -- a `Network Administrator' really ought

to know better.

That message is also generated if HOMEPATH is wrongly set, so please
check 
that too.  Reasonable settings are

HOMEDRIVE=C:
HOMEPATH=\Documents and Settings\ripley

and %HOMEDRIVE%%HOMEPATH% must be a valid path if HOMEDRIVE is set.

You can avoid this by setting HOME. This *is* mentioned in the README 
file!



On Tue, 20 Apr 2004 joannw@usca.edu wrote:

> Full_Name: Joann Williamson
> Version: 1.9.0
> OS: Windows XP
> Submission from: (NULL) (129.252.198.28)
> 
> 
> I installed R project 1.9.0 on Windows XP.  The installation went
well. Then, I
> rebooted.  Next, I clicked the icon under Programs in the Start menu
and
> received this error, "Fatal Error: Invalid HOMEDRIVE".  I clicked OK
to the
> error message.  The program does not start.  I went to a DOS prompt
and did
> "echo %HOMEDRIVE%" and it returned "C:".  This letter is a valid drive
letter. 
> Can you tell me how to fix this?  
> Thanks you,
> Joann Williamson 
> Network Administrator
> University of South Carolina Aiken
> 471 University Parkway
> Aiken, SC 29801
> 803-641-3473

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From notes_svr_1/SERVERS/LCSD/HKSARG at lcsd.gov.hk  Tue Apr 20 18:58:15 2004
From: notes_svr_1/SERVERS/LCSD/HKSARG at lcsd.gov.hk (notes_svr_1/SERVERS/LCSD/HKSARG@lcsd.gov.hk)
Date: Tue Apr 20 18:58:21 2004
Subject: [Rd] Mail not delivered (virus suspected)
Message-ID: <OF57CF2FAD.D1A1A3BA-ON48256E7C.005D398F@lcsd.gov.hk>

An e-mail (Subject: Re: Excel file) originated from the sender address
"r-devel@hypatia.math.ethz.ch", was not delivered to the recipient
"ylpl@lcsd.gov.hk" because the attachment in the e-mail was suspected to
carry a computer virus. Please note that the sender address could be a
bogus e-mail address generated by a computer virus and may not reflect the
real origin of the e-mail.  If you have sent an email with these
attachments to the recipient, please clean-up the virus and re-send.
Otherwise, please just neglect this mail and we would like to apologize for
any confusion caused.
Please also see below information of the detected virus:


The infected component in the scanned document was deleted.


Virus Information:
The attachment document_excel.pif contained the virus W32.Netsky.D@mm and
was deleted.

From dmurdoch at pair.com  Tue Apr 20 20:15:43 2004
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Tue Apr 20 20:15:46 2004
Subject: [Rd] Re: [R] Error message during debug (PR#6804)
Message-ID: <20040420181543.A86F110478@slim.kubism.ku.dk>

On Tue, 20 Apr 2004 13:48:43 -0400 (EDT), "Gabor Grothendieck"
<ggrothendieck@myway.com> wrote :

>
>In R 1.9.0 on Windows XP Pro I get an error if I try to
>debug the identity function f shown:
>
> > f <- function(x)x
> > debug(f)
> > f(1)
> debugging in: f(1)
> Error in f(1) : Unimplemented feature in eval
> > R.version.string
> [1] "R version 1.9.0, 2004-04-12"
>
>Without debuggging its ok.

Confirmed.  It's not new in 1.9.0, it appears in 1.8.1 as well.  It
seems that a function body consisting of a single token triggers it.
I get a crash from this variation:

f <- function(x) 4

Maybe the system is trying to tell us that functions this simple don't
need debugging? ;-)

I'm sending this message to r-bugs to get it into the bug list (but I
won't have time to look at it until at least the weekend, if someone
else wants to fix it).

Duncan Murdoch

From p.dalgaard at biostat.ku.dk  Tue Apr 20 20:59:22 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Tue Apr 20 21:02:48 2004
Subject: [Rd] Re: [R] Error message during debug (PR#6804)
In-Reply-To: <20040420181543.A86F110478@slim.kubism.ku.dk>
References: <20040420181543.A86F110478@slim.kubism.ku.dk>
Message-ID: <x2y8oqfpbp.fsf@biostat.ku.dk>

dmurdoch@pair.com writes:

> On Tue, 20 Apr 2004 13:48:43 -0400 (EDT), "Gabor Grothendieck"
> <ggrothendieck@myway.com> wrote :
> 
> >
> >In R 1.9.0 on Windows XP Pro I get an error if I try to
> >debug the identity function f shown:
> >
> > > f <- function(x)x
> > > debug(f)
> > > f(1)
> > debugging in: f(1)
> > Error in f(1) : Unimplemented feature in eval
> > > R.version.string
> > [1] "R version 1.9.0, 2004-04-12"
> >
> >Without debuggging its ok.
> 
> Confirmed.  It's not new in 1.9.0, it appears in 1.8.1 as well.  It
> seems that a function body consisting of a single token triggers it.
> I get a crash from this variation:
> 
> f <- function(x) 4
> 
> Maybe the system is trying to tell us that functions this simple don't
> need debugging? ;-)
> 
> I'm sending this message to r-bugs to get it into the bug list (but I
> won't have time to look at it until at least the weekend, if someone
> else wants to fix it).

Actually, ?debug says:

                             Currently you can only debug functions
     that have bodies enclosed in braces. This is a bug and will be
     fixed soon.

(and has probably said so for a very long time....)

I hadn't seen the segfault from debugging a constant before, but I
recently discovered that you *can* (sort of) debug a single-expression
function by setting options(error=recover).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From jmc at research.bell-labs.com  Tue Apr 20 21:34:06 2004
From: jmc at research.bell-labs.com (John Chambers)
Date: Tue Apr 20 21:34:59 2004
Subject: [Rd] Re: [R] Unexpected behaviour of identical (PR#6799)
References: <6.1.0.6.2.20040420090025.03fcf3e0@mailhost.blackmesacapital.com>
	<Pine.LNX.4.44.0404201613020.14900-100000@gannet.stats>
	<6.1.0.6.2.20040420092759.04010a88@mailhost.blackmesacapital.com>
Message-ID: <40857B2E.E03367EA@research.bell-labs.com>

Tony Plate wrote:
> 
> AFAIK identical() first introduced by Chambers in "Programming with
> data"?  On p262 he writes:
> 
> identical: The two objects must be exactly equal in all respects; if not
> identical returns FALSE
> all.equal: The two objects are expected to be identical up to small
> differences that might be considered irrelevant...
> 
> Taken literally, this would seem to argue against identical() treating
> attributes as a set (unless one were to tighten up the definition of
> attributes in Section 2.2 of the R Language Definition to explicitly state
> that attributes are to be treated as an unordered set).

We're certainly down in the fine points here, so arguments either way
aren't very strong, but on the whole it seems cleaner to keep identical
on the pedantic side, dealing with what's actually in the object, rather
than what was "meant".

Yes, for practical purposes attribute order better NOT matter, but we do
store the attributes in a way that creates an "order", i.e., as an
internal vector or list structure rather than, say, a hash table.


> 
> However, given the primary use of identical() on complex objects is in
> software testing, and AFAIK no software depends on the order of attributes,
> I still think it would be reasonable for attributes to be treated as a set
> by identical().  (Unless anyone can show that it's important to recognize
> order of attributes in some code.)

Treating attributes as a set would have some logical appeal, but it
seems likely the fix would have to be more widespread than just to
identical().  Otherwise, for example, you could find yourself in a
situation where:
  identical(x,y)
was TRUE but
  identical(attributes(x), attributes(y))
was FALSE, because attributes() just reported out the attributes in
their (irrelevant) stored order.


> 
> I'm proposing a more general fix for this problem because I strongly
> suspect that factor subsetting is not the only thing that can change the
> order of attributes, and because I've wasted many hours tracking down
> problems that turned out to be caused by problems with data.dump() and
> identical() in S-plus.  Another possible fix might be for the attr() and
> attributes() replacement functions to store attributes as a sorted list.  I
> don't know if this would be easy or difficult to implement, or what
> consequences it might have in terms of existing tests that involve printed
> output of attributes.

Yes, as above, it does seem that a satisfactory solution would require
treating attributes() as something other than a vector, returned in
internal order.

Once started down this path, there are a number of other cases where a
vector has been used, for convenience, when an unordered set was the
more likely model.  I think there have been debates over whether the
order of the levels of an unordered factor should be considered
relevant.

It would increase consistency to replace vectors in these examples with
an efficient structure that only depended on the set of values
(presumably a suitable hashing mechanism would do).  But it's not too
likely to get to the head of the priority queue, I'd guess.

It's not out of the question, as an alternative that doesn't require
deep changes to the system, to write methods for identical() for some
classes of objects.

> 
> -- Tony Plate
> 
> At Tuesday 09:13 AM 4/20/2004, Prof Brian Ripley wrote:
> >I wondered that, but I think we need to hear from the author of
> >identical().
> >
> >It is neater to have attributes printed in a consistent order, though.
> >
> >On Tue, 20 Apr 2004, Tony Plate wrote:
> >
> > > What about changing identical() to ignore the order of attributes?  Is
> > > there any code anywhere that depends on the order of attributes, other
> > than
> > > identical()?  I've only seen attributes treated as an unordered set, and
> > > never as an ordered list.  There are some functions in S-plus that change
> > > the order of attributes, and the only thing this affects is
> > > identical().  (Which in S-plus also pays attention to the order of
> > attributes.)
> > >
> > > -- Tony Plate
> > >
> > > At Tuesday 05:42 AM 4/20/2004, p.dalgaard@biostat.ku.dk wrote:
> > > >"Swinton, Jonathan" <Jonathan.Swinton@astrazeneca.com> writes:
> > > >
> > > > >  # works as expected
> > > > > > ac <- c('A','B');
> > > > > > identical(ac,ac[1:2])
> > > > > [1] TRUE
> > > > >
> > > > >  #but
> > > > > > af <- factor(ac)
> > > > > > identical(af,af[1:2])
> > > > > [1] FALSE
> > > > >
> > > > > Any opinions?
> > > >
> > > >Did a cross-check with Splus and it doesn't do that , so I think it
> > > >qualifies as a bug. Shouldn't be too hard to fix (might lose a little
> > > >efficiencty though).
> > > >
> > > >--
> > > >    O__  ---- Peter Dalgaard             Blegdamsvej 3
> > > >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
> > > >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > > >~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > > >
> > > >______________________________________________
> > > >R-devel@stat.math.ethz.ch mailing list
> > > >https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > >
> > > ______________________________________________
> > > R-devel@stat.math.ethz.ch mailing list
> > > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > >
> > >
> >
> >--
> >Brian D. Ripley,                  ripley@stats.ox.ac.uk
> >Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> >University of Oxford,             Tel:  +44 1865 272861 (self)
> >1 South Parks Road,                     +44 1865 272866 (PA)
> >Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From p.dalgaard at biostat.ku.dk  Wed Apr 21 00:49:49 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Wed Apr 21 00:53:17 2004
Subject: [Rd] optim-Bug (PR#6720)
In-Reply-To: <20040330172140.8397D10432@slim.kubism.ku.dk>
References: <20040330172140.8397D10432@slim.kubism.ku.dk>
Message-ID: <x2isfufenm.fsf@biostat.ku.dk>

kestler@neuro.informatik.uni-ulm.de writes:

> Full_Name: Dr. Hans A. Kestler
> Version: 1.8.1.
> OS: Linux, Win, Mac OSX
> Submission from: (NULL) (134.60.73.116)
> 
> 
> The code below produces after a different number of iterations i the following
> error:
> 
> Error in optim(par = rep(0.5, length(edges)), loglik, method = "L-BFGS-B",  :
>         non-finite value supplied by optim
> 
> This was reproducible on different machines (Mac G4 OSX, AMD Opteron Linux SUSE
> 9.0, Intel P4 Suse 9.0, P4 Windows XP Prof), only with different i.
> 
> The non-deterministic behaviour made us recompile R with debug options and use
> valgrind for memory-leak checking. The result was horrible. We are now in the
> process of going through the f2c code of lbfgsb.c. The problem seems to be a
> access violation of wn1 at run time. 

I have this down to the use of R_alloc in the vect() function (line
40, optim.c). Replacing with S_alloc (which zeros memory) removes the
issue for me on this machine and on the Opteron. Could you please
verify on other platforms? And if anyone actually understands the code
could you verify that it makes sense to require the workspace to be
initialized?


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From jbrzusto at ualberta.ca  Wed Apr 21 01:01:32 2004
From: jbrzusto at ualberta.ca (jbrzusto@ualberta.ca)
Date: Wed Apr 21 01:01:37 2004
Subject: [Rd] fix for a minor build error in R-1.9.0 with XFree86 4.4.0
	(PR#6805)
Message-ID: <20040420230132.BE78A10478@slim.kubism.ku.dk>

Hi, 

In trying to build R 1.9.0, I ran into a problem building the x11()
device support under XFree86 4.4.0:

   make[4]: Entering directory `/home/john/build/R-1.9.0/src/modules/X11'
   gcc -I. -I../../../src/include -I../../../src/include -I/usr/X11R6/include -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c dataentry.c -o dataentry.lo
   In file included from dataentry.c:31:
   /usr/X11R6/include/X11/Xlib.h:1389: parse error before "_Xconst"
   /usr/X11R6/include/X11/Xlib.h:1477: parse error before "char"
   /usr/X11R6/include/X11/Xlib.h:1505: parse error before "_Xconst"
   ... many messages omitted

The build is successful and the x11() device works fine if 

R-1.9.0/src/modules/X11/dataentry.c:30 is commented, in order
to re-require function protoypes:

   #include <stdlib.h>
   
   /* don't use X11 function prototypes (which tend to ...): */
   /* #define NeedFunctionPrototypes 0 */
   #include <X11/X.h>
   
Here are my gcc and XFree86 versions:

947$ gcc -v

Reading specs from /usr/lib/gcc-lib/ppc-yellowdog-linux/3.2.2/specs
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --disable-checking --with-system-zlib --enable-__cxa_atexit --host=ppc-yellowdog-linux
Thread model: posix
gcc version 3.2.2 20030217 (Yellow Dog Linux 3.0 3.2.2-2a)

948$ X -version

XFree86 Version 4.4.0
Release Date: 29 February 2004
X Protocol Version 11, Revision 0, Release 6.6
Build Operating System: Linux 2.6.5 ppc [ELF] 
Current Operating System: Linux bio-c90.biology.ualberta.ca 2.6.5 #4 Tue Apr 20 11:47:27 MDT 2004 ppc
Build Date: 18 April 2004
Changelog Date: 29 February 2004
        Before reporting problems, check http://www.XFree86.Org/
        to make sure that you have the latest version.
Module Loader present

================================================================
Thanks for all your work on this excellent program!

Regards,

John Brzustowski

From ripley at stats.ox.ac.uk  Wed Apr 21 08:40:15 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Apr 21 08:40:20 2004
Subject: (PR#6805) Re: [Rd] fix for a minor build error in R-1.9.0 with
	XFree86 4.4.0
In-Reply-To: <20040420230132.BE78A10478@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404210737140.18446-100000@gannet.stats>

Thank you.  A better fix (one that does not change the behaviour on other
X11 installations) is already in the R-patched sources.  Would you please
check that works on your installation?

This is an error in the XFree86 4.4.0 headers, so please report it to 
them.

On Wed, 21 Apr 2004 jbrzusto@ualberta.ca wrote:

> Hi, 
> 
> In trying to build R 1.9.0, I ran into a problem building the x11()
> device support under XFree86 4.4.0:
> 
>    make[4]: Entering directory `/home/john/build/R-1.9.0/src/modules/X11'
>    gcc -I. -I../../../src/include -I../../../src/include -I/usr/X11R6/include -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c dataentry.c -o dataentry.lo
>    In file included from dataentry.c:31:
>    /usr/X11R6/include/X11/Xlib.h:1389: parse error before "_Xconst"
>    /usr/X11R6/include/X11/Xlib.h:1477: parse error before "char"
>    /usr/X11R6/include/X11/Xlib.h:1505: parse error before "_Xconst"
>    ... many messages omitted
> 
> The build is successful and the x11() device works fine if 
> 
> R-1.9.0/src/modules/X11/dataentry.c:30 is commented, in order
> to re-require function protoypes:
> 
>    #include <stdlib.h>
>    
>    /* don't use X11 function prototypes (which tend to ...): */
>    /* #define NeedFunctionPrototypes 0 */
>    #include <X11/X.h>
>    
> Here are my gcc and XFree86 versions:
> 
> 947$ gcc -v
> 
> Reading specs from /usr/lib/gcc-lib/ppc-yellowdog-linux/3.2.2/specs
> Configured with: ../configure --prefix=/usr --mandir=/usr/share/man --infodir=/usr/share/info --enable-shared --enable-threads=posix --disable-checking --with-system-zlib --enable-__cxa_atexit --host=ppc-yellowdog-linux
> Thread model: posix
> gcc version 3.2.2 20030217 (Yellow Dog Linux 3.0 3.2.2-2a)
> 
> 948$ X -version
> 
> XFree86 Version 4.4.0
> Release Date: 29 February 2004
> X Protocol Version 11, Revision 0, Release 6.6
> Build Operating System: Linux 2.6.5 ppc [ELF] 
> Current Operating System: Linux bio-c90.biology.ualberta.ca 2.6.5 #4 Tue Apr 20 11:47:27 MDT 2004 ppc
> Build Date: 18 April 2004
> Changelog Date: 29 February 2004
>         Before reporting problems, check http://www.XFree86.Org/
>         to make sure that you have the latest version.
> Module Loader present
> 
> ================================================================
> Thanks for all your work on this excellent program!
> 
> Regards,
> 
> John Brzustowski
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Wed Apr 21 08:57:02 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Apr 21 08:57:07 2004
Subject: [Rd] optim-Bug (PR#6720)
In-Reply-To: <x2isfufenm.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0404210747500.18446-100000@gannet.stats>

On 21 Apr 2004, Peter Dalgaard wrote:

> kestler@neuro.informatik.uni-ulm.de writes:
> 
> > Full_Name: Dr. Hans A. Kestler
> > Version: 1.8.1.
> > OS: Linux, Win, Mac OSX
> > Submission from: (NULL) (134.60.73.116)
> > 
> > 
> > The code below produces after a different number of iterations i the following
> > error:
> > 
> > Error in optim(par = rep(0.5, length(edges)), loglik, method = "L-BFGS-B",  :
> >         non-finite value supplied by optim
> > 
> > This was reproducible on different machines (Mac G4 OSX, AMD Opteron Linux SUSE
> > 9.0, Intel P4 Suse 9.0, P4 Windows XP Prof), only with different i.
> > 
> > The non-deterministic behaviour made us recompile R with debug options and use
> > valgrind for memory-leak checking. The result was horrible. We are now in the
> > process of going through the f2c code of lbfgsb.c. The problem seems to be a
> > access violation of wn1 at run time. 
> 
> I have this down to the use of R_alloc in the vect() function (line
> 40, optim.c). Replacing with S_alloc (which zeros memory) removes the
> issue for me on this machine and on the Opteron. Could you please
> verify on other platforms? And if anyone actually understands the code
> could you verify that it makes sense to require the workspace to be
> initialized?

Zeroing the workspace is not a requirement of the original L-BFGS-B code 
that I can see.  Given that it was originally in Fortran, and Fortran 
often does zero it seems a likely symptom, but it does mean that a 
variable is being used uninitialized somewhere in the code (converted to 
C).  It would be better to leave vect alone and to zero the workspace with 
a memset call in lbfgsb.  (Incidentally, I don't know why S_alloc does not 
use memset -- we do require standard C and use in seeral other places.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Wed Apr 21 08:57:34 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Apr 21 08:57:36 2004
Subject: [Rd] optim-Bug (PR#6720)
Message-ID: <20040421065734.80BA6104C7@slim.kubism.ku.dk>

On 21 Apr 2004, Peter Dalgaard wrote:

> kestler@neuro.informatik.uni-ulm.de writes:
> 
> > Full_Name: Dr. Hans A. Kestler
> > Version: 1.8.1.
> > OS: Linux, Win, Mac OSX
> > Submission from: (NULL) (134.60.73.116)
> > 
> > 
> > The code below produces after a different number of iterations i the following
> > error:
> > 
> > Error in optim(par = rep(0.5, length(edges)), loglik, method = "L-BFGS-B",  :
> >         non-finite value supplied by optim
> > 
> > This was reproducible on different machines (Mac G4 OSX, AMD Opteron Linux SUSE
> > 9.0, Intel P4 Suse 9.0, P4 Windows XP Prof), only with different i.
> > 
> > The non-deterministic behaviour made us recompile R with debug options and use
> > valgrind for memory-leak checking. The result was horrible. We are now in the
> > process of going through the f2c code of lbfgsb.c. The problem seems to be a
> > access violation of wn1 at run time. 
> 
> I have this down to the use of R_alloc in the vect() function (line
> 40, optim.c). Replacing with S_alloc (which zeros memory) removes the
> issue for me on this machine and on the Opteron. Could you please
> verify on other platforms? And if anyone actually understands the code
> could you verify that it makes sense to require the workspace to be
> initialized?

Zeroing the workspace is not a requirement of the original L-BFGS-B code 
that I can see.  Given that it was originally in Fortran, and Fortran 
often does zero it seems a likely symptom, but it does mean that a 
variable is being used uninitialized somewhere in the code (converted to 
C).  It would be better to leave vect alone and to zero the workspace with 
a memset call in lbfgsb.  (Incidentally, I don't know why S_alloc does not 
use memset -- we do require standard C and use in seeral other places.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Kurt.Hornik at wu-wien.ac.at  Wed Apr 21 11:59:31 2004
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Wed Apr 21 11:59:42 2004
Subject: [Rd] rsync command in FAQ (PR#6793)
In-Reply-To: <20040419163022.2744E104B1@slim.kubism.ku.dk>
References: <20040419163022.2744E104B1@slim.kubism.ku.dk>
Message-ID: <16518.17923.730087.924801@mithrandir.hornik.net>

>>>>> terra  writes:

> Full_Name: Morten Welinder
> Version: snapshot, see see below
> OS: 
> Submission from: (NULL) (65.213.85.218)


> The FAQ suggests running

>     rsync -rC --delete rsync.R-project.org::MODULE R

> which I did yesterday to get the version I have.  This command should
> have "-p -t" added so it will preserve time stamps and modes.  (Doing
> that will make subsequent rsyncs much faster.)

Thanks, done.

Best
-k

From p.dalgaard at biostat.ku.dk  Wed Apr 21 14:19:41 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Wed Apr 21 14:23:09 2004
Subject: [Rd] optim-Bug (PR#6720)
In-Reply-To: <Pine.LNX.4.44.0404210747500.18446-100000@gannet.stats>
References: <Pine.LNX.4.44.0404210747500.18446-100000@gannet.stats>
Message-ID: <x265btseua.fsf@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> On 21 Apr 2004, Peter Dalgaard wrote:
> 
...
> > I have this down to the use of R_alloc in the vect() function (line
> > 40, optim.c). Replacing with S_alloc (which zeros memory) removes the
> > issue for me on this machine and on the Opteron. Could you please
> > verify on other platforms? And if anyone actually understands the code
> > could you verify that it makes sense to require the workspace to be
> > initialized?
> 
> Zeroing the workspace is not a requirement of the original L-BFGS-B code 
> that I can see.  Given that it was originally in Fortran, and Fortran 
> often does zero it seems a likely symptom, but it does mean that a 
> variable is being used uninitialized somewhere in the code (converted to 
> C).  It would be better to leave vect alone and to zero the workspace with 
> a memset call in lbfgsb.  (Incidentally, I don't know why S_alloc does not 
> use memset -- we do require standard C and use in seeral other places.)

Yes, sorry but it got a bit late when I sent that. I found this by
backtracking, so I know quite well where the problem is: The
allocation of "wa" on line 1020 in optim.c, specifically the wa[lsnd]
part in setulb which becomes snd in mainlb and wn1 in formk. Parts of
wn1 never get initialized. This appears to be *relatively* harmless,
except that sometimes there are NaN which propagate to wn and into
dpofa(), etc.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.dalgaard at biostat.ku.dk  Wed Apr 21 14:23:37 2004
From: p.dalgaard at biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed Apr 21 14:23:39 2004
Subject: [Rd] optim-Bug (PR#6720)
Message-ID: <20040421122337.B9BCF1042E@slim.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> On 21 Apr 2004, Peter Dalgaard wrote:
> 
...
> > I have this down to the use of R_alloc in the vect() function (line
> > 40, optim.c). Replacing with S_alloc (which zeros memory) removes the
> > issue for me on this machine and on the Opteron. Could you please
> > verify on other platforms? And if anyone actually understands the code
> > could you verify that it makes sense to require the workspace to be
> > initialized?
> 
> Zeroing the workspace is not a requirement of the original L-BFGS-B code 
> that I can see.  Given that it was originally in Fortran, and Fortran 
> often does zero it seems a likely symptom, but it does mean that a 
> variable is being used uninitialized somewhere in the code (converted to 
> C).  It would be better to leave vect alone and to zero the workspace with 
> a memset call in lbfgsb.  (Incidentally, I don't know why S_alloc does not 
> use memset -- we do require standard C and use in seeral other places.)

Yes, sorry but it got a bit late when I sent that. I found this by
backtracking, so I know quite well where the problem is: The
allocation of "wa" on line 1020 in optim.c, specifically the wa[lsnd]
part in setulb which becomes snd in mainlb and wn1 in formk. Parts of
wn1 never get initialized. This appears to be *relatively* harmless,
except that sometimes there are NaN which propagate to wn and into
dpofa(), etc.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From ripley at stats.ox.ac.uk  Wed Apr 21 14:31:20 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed Apr 21 14:31:24 2004
Subject: [Rd] optim-Bug (PR#6720)
Message-ID: <20040421123120.6AAC8104C6@slim.kubism.ku.dk>

Well, I've spent an hour tracking down exactly that.  We need to zero the 
snd array, and I have tested and am about to commit code to do that.  (We 
need to do it at that point, as lbfgsb is part of the R-API.)

I think there is an underlying error in the code logic, but this change 
causes it to restart and so proceed successfully.

Brian

On 21 Apr 2004, Peter Dalgaard wrote:

> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > On 21 Apr 2004, Peter Dalgaard wrote:
> > 
> ...
> > > I have this down to the use of R_alloc in the vect() function (line
> > > 40, optim.c). Replacing with S_alloc (which zeros memory) removes the
> > > issue for me on this machine and on the Opteron. Could you please
> > > verify on other platforms? And if anyone actually understands the code
> > > could you verify that it makes sense to require the workspace to be
> > > initialized?
> > 
> > Zeroing the workspace is not a requirement of the original L-BFGS-B code 
> > that I can see.  Given that it was originally in Fortran, and Fortran 
> > often does zero it seems a likely symptom, but it does mean that a 
> > variable is being used uninitialized somewhere in the code (converted to 
> > C).  It would be better to leave vect alone and to zero the workspace with 
> > a memset call in lbfgsb.  (Incidentally, I don't know why S_alloc does not 
> > use memset -- we do require standard C and use in seeral other places.)
> 
> Yes, sorry but it got a bit late when I sent that. I found this by
> backtracking, so I know quite well where the problem is: The
> allocation of "wa" on line 1020 in optim.c, specifically the wa[lsnd]
> part in setulb which becomes snd in mainlb and wn1 in formk. Parts of
> wn1 never get initialized. This appears to be *relatively* harmless,
> except that sometimes there are NaN which propagate to wn and into
> dpofa(), etc.
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From bates at stat.wisc.edu  Wed Apr 21 19:46:29 2004
From: bates at stat.wisc.edu (Douglas Bates)
Date: Wed Apr 21 19:46:35 2004
Subject: [Rd] optim-Bug (PR#6720)
In-Reply-To: <Pine.LNX.4.44.0404210747500.18446-100000@gannet.stats>
References: <Pine.LNX.4.44.0404210747500.18446-100000@gannet.stats>
Message-ID: <6rd661mdfu.fsf@bates4.stat.wisc.edu>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
...
> Zeroing the workspace is not a requirement of the original L-BFGS-B code 
> that I can see.  Given that it was originally in Fortran, and Fortran 
> often does zero it seems a likely symptom, but it does mean that a 
> variable is being used uninitialized somewhere in the code (converted to 
> C).  It would be better to leave vect alone and to zero the workspace with 
> a memset call in lbfgsb.  (Incidentally, I don't know why S_alloc does not 
> use memset -- we do require standard C and use in seeral other places.)

I had planned to suggest that we use memset more widely and perhaps
add a macro Memset, defined like the current Memcpy, to R_ext/RS.h.  I
felt that memset was likely to be more efficient for zeroing large
areas of memory than running a loop would be.  Recently Peter Dalgaard
and Andy Liaw and I discussed this with regard to a test to see if
vectors using more than 4 GB of memory could be allocated on an
Opteron.  Andy installed my suggested modification to do_makevector to
use memset for zeroing freshly allocated vectors and found that the
running time for a test on an Opteron/Linux system actually increased.
It appears that, at least on that system, memset runs a loop at the
level of characters.

I still think it would be a good idea to use memset but we would want
to do some timing comparisons to make sure we don't slow things down.

From ripley at stats.ox.ac.uk  Wed Apr 21 20:32:35 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Apr 21 20:32:39 2004
Subject: [Rd] optim-Bug (PR#6720)
In-Reply-To: <6rd661mdfu.fsf@bates4.stat.wisc.edu>
Message-ID: <Pine.LNX.4.44.0404211913080.24782-100000@gannet.stats>

I think S_alloc is little used (at least in R), but I have altered it to
use memset in R-devel. As I understand it all decent compilers recognize
memset calls and try to inline them with optimized code (probably even
optimizing the bzero case).

On 21 Apr 2004, Douglas Bates wrote:

> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> ...
> > Zeroing the workspace is not a requirement of the original L-BFGS-B code 
> > that I can see.  Given that it was originally in Fortran, and Fortran 
> > often does zero it seems a likely symptom, but it does mean that a 
> > variable is being used uninitialized somewhere in the code (converted to 
> > C).  It would be better to leave vect alone and to zero the workspace with 
> > a memset call in lbfgsb.  (Incidentally, I don't know why S_alloc does not 
> > use memset -- we do require standard C and use in several other places.)
> 
> I had planned to suggest that we use memset more widely and perhaps
> add a macro Memset, defined like the current Memcpy, to R_ext/RS.h.  I
> felt that memset was likely to be more efficient for zeroing large
> areas of memory than running a loop would be.  Recently Peter Dalgaard
> and Andy Liaw and I discussed this with regard to a test to see if
> vectors using more than 4 GB of memory could be allocated on an
> Opteron.  Andy installed my suggested modification to do_makevector to
> use memset for zeroing freshly allocated vectors and found that the
> running time for a test on an Opteron/Linux system actually increased.
> It appears that, at least on that system, memset runs a loop at the
> level of characters.

(You mean char* bytes?  S_alloc was a byte-level loop, but looking in the
headers suggest that gcc3 has optimized inlined code for memset(s, 0, n).)

> I still think it would be a good idea to use memset but we would want
> to do some timing comparisons to make sure we don't slow things down.

That's very machine- and compiler- dependent though.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kjetil at entelnet.bo  Wed Apr 21 23:51:11 2004
From: kjetil at entelnet.bo (kjetil@entelnet.bo)
Date: Wed Apr 21 23:51:14 2004
Subject: [Rd] segfault in approx() (PR#6809)
Message-ID: <20040421215111.A2149104C2@slim.kubism.ku.dk>

This is R1.9.0, windows XP

I run across the following:

It is admittedly silly, but it shouldn't segfault:

test <- list(y=1:100, x=rep(NaN, 100))
approx(test, xout=rep(NaN, 10))

Bombs!

Kjetil Halvorsen

From confirm-s2-xHg6lUZs=F53KyhB4T2vY=cPR=A-r-devel=lists.r-project.org at yahoogroups.com  Thu Apr 22 00:05:11 2004
From: confirm-s2-xHg6lUZs=F53KyhB4T2vY=cPR=A-r-devel=lists.r-project.org at yahoogroups.com (Yahoo! Gruppi)
Date: Thu Apr 22 00:05:15 2004
Subject: [Rd] Conferma la tua richiesta di iscrizione a edscuola 
Message-ID: <1082585111.52.43811.m21@yahoogroups.com>


Ciao r-devel@lists.r-project.org,

Abbiamo ricevuto la tua richiesta di iscrizione al gruppo edscuola 
uno dei gruppi che trovi su Yahoo! Gruppi, un servizio gratuito e
facile da usare per creare ed entrare a far parte di tante community.

Questa richiesta scade fra 7 giorni.

PER ISCRIVERTI AL GRUPPO DEVI: 

1) Andare su Yahoo! Gruppi cliccando su questo link:

   http://it.groups.yahoo.com/i?i=xHg6lUZs-F53KyhB4T2vY-cPR-A&e=r-devel%40lists%2Er-project%2Eorg 

  (Se cliccando sul link non ti si apre una finestra di browser, prova
   a fare copiare l'indirizzo e incollarlo su una finestra di browser.)

-OPPURE-

2) RISPONDI a questo messaggio e-mail cliccando su pulsante "Rispondi"
   e poi su quelli di "Invia" sul tuo programma di posta

Se non hai richiesto questa iscrizione a edscuola,
o non desideri pi? completarla, ignora questo messaggio..

Ciao,

Il team di Yahoo! Gruppi
L'utilizzo di Yahoo! Gruppi ? soggetto alle  http://it.docs.yahoo.com/info/utos.html

From p.dalgaard at biostat.ku.dk  Thu Apr 22 00:11:00 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Thu Apr 22 00:14:31 2004
Subject: [Rd] segfault in approx() (PR#6809)
In-Reply-To: <20040421215111.A2149104C2@slim.kubism.ku.dk>
References: <20040421215111.A2149104C2@slim.kubism.ku.dk>
Message-ID: <x2ad159e2z.fsf@biostat.ku.dk>

kjetil@entelnet.bo writes:

> This is R1.9.0, windows XP
> 
> I run across the following:
> 
> It is admittedly silly, but it shouldn't segfault:
> 
> test <- list(y=1:100, x=rep(NaN, 100))
> approx(test, xout=rep(NaN, 10))
> 
> Bombs!

Yup. Sanity check needed on entrance to approx1. I suppose that

  if (!n) return NaN;

should do the trick.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From rmh at temple.edu  Fri Apr 23 01:29:18 2004
From: rmh at temple.edu (rmh@temple.edu)
Date: Fri Apr 23 01:29:21 2004
Subject: [Rd] trellis.device in .First (PR#6812)
Message-ID: <20040422232918.0FEC6FB91@slim.kubism.ku.dk>

# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@r-project.org
#
######################################################



<<insert bug report here>>
There are two bugs associated with graphics devices.
One new, one old.

1. The new one.

When I include
 trellis.device()
in my .First, Rterm 1.8.1 run in ESS happily opens a device.

Rterm 1.9.0 doesn't.  It gives the following message instead:

>   [Previously saved workspace restored]
>   
>   Error in get(x, envir, mode, inherits) : variable "windows" was not found



2. The old one.

When no device has been opened, then q() cleanly closes R.
When a graphics device has been opened, and either is still open or was
manually closed, then q() hangs.  I need to kill it from the Windows Task
Manager.


Rich


--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status = 
 major = 1
 minor = 9.0
 year = 2004
 month = 04
 day = 12
 language = R

Windows XP Home Edition (build 2600) Service Pack 1.0

Search Path:
 .GlobalEnv, package:methods, package:stats, package:graphics, package:utils, 
file:c:/HOME/rmh/hh/splus.library/HH/.RData, package:lattice, package:grid, Autoloads, package:base

From edd at debian.org  Fri Apr 23 01:55:31 2004
From: edd at debian.org (Dirk Eddelbuettel)
Date: Fri Apr 23 01:55:33 2004
Subject: [Rd] trellis.device in .First (PR#6812)
In-Reply-To: <20040422232918.0FEC6FB91@slim.kubism.ku.dk>
References: <20040422232918.0FEC6FB91@slim.kubism.ku.dk>
Message-ID: <20040422235531.GA12778@sonny.eddelbuettel.com>

On Fri, Apr 23, 2004 at 01:29:18AM +0200, rmh@temple.edu wrote:
> 2. The old one.
> 
> When no device has been opened, then q() cleanly closes R.
> When a graphics device has been opened, and either is still open or was
> manually closed, then q() hangs.  I need to kill it from the Windows Task
> Manager.

Hm, I don't think I've ever seen that under NT4 or win2k at work. I use
Rterm in ESS as well as Rgui, and close it frequently with open graphics
devices.

Could that have something to do with your particular graphics card, or with
XP home?  What windows variants do you use?

Dirk

-- 
The relationship between the computed price and reality is as yet unknown.  
                                             -- From the pac(8) manual page

From dmurdoch at pair.com  Fri Apr 23 02:31:53 2004
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Fri Apr 23 02:31:57 2004
Subject: [Rd] trellis.device in .First (PR#6812)
Message-ID: <20040423003153.B0573FB91@slim.kubism.ku.dk>

On Fri, 23 Apr 2004 01:29:18 +0200 (CEST), rmh@temple.edu wrote:

>1. The new one.
>
>When I include
> trellis.device()
>in my .First, Rterm 1.8.1 run in ESS happily opens a device.
>
>Rterm 1.9.0 doesn't.  It gives the following message instead:
>
>>   [Previously saved workspace restored]
>>   
>>   Error in get(x, envir, mode, inherits) : variable "windows" was not found

Sounds like lattice needs to import windows.  (In 1.8.1 windows() was
in base, so it would have automatically been available in .First.)

>2. The old one.
>
>When no device has been opened, then q() cleanly closes R.
>When a graphics device has been opened, and either is still open or was
>manually closed, then q() hangs.  I need to kill it from the Windows Task
>Manager.

I don't see this.  Which device?  Does it happen if if you start R
with the --vanilla option?

Duncan Murdoch

From andy_liaw at merck.com  Fri Apr 23 04:03:25 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Fri Apr 23 04:03:46 2004
Subject: [Rd] trellis.device in .First (PR#6812)
Message-ID: <3A822319EB35174CA3714066D590DCD504AF7C64@usrymx25.merck.com>

> From: dmurdoch@pair.com
> 
> On Fri, 23 Apr 2004 01:29:18 +0200 (CEST), rmh@temple.edu wrote:
> 
> >2. The old one.
> >
> >When no device has been opened, then q() cleanly closes R.
> >When a graphics device has been opened, and either is still 
> open or was
> >manually closed, then q() hangs.  I need to kill it from the 
> Windows Task
> >Manager.
> 
> I don't see this.  Which device?  Does it happen if if you start R
> with the --vanilla option?
> 
> Duncan Murdoch

I have not had the problem until we got `upgraded' from NT4 to XPPro.  (It's
the windows() device.  I have not tested others.)  As Rich said, it's an old
one, and apparently doesn't happen to everyone.  It was one of the reasons I
only use ESS basically for editing code, not for running R.

Best,
Andy


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments,...{{dropped}}

From rmh at temple.edu  Fri Apr 23 04:09:35 2004
From: rmh at temple.edu (rmh@temple.edu)
Date: Fri Apr 23 04:09:37 2004
Subject: [Rd] trellis.device in .First (PR#6812)
Message-ID: <20040423020935.6920DEFC0@slim.kubism.ku.dk>

This is a start of R 1.9.0 in a directory without .RData


> options(STERM='iESS', editor='gnuclient.exe')
> search()
[1] ".GlobalEnv"       "package:methods"  "package:stats"    "package:graphics"
[5] "package:utils"    "Autoloads"        "package:base"    
> find(windows)
[1] "package:graphics"
> 


This makes me think that the .First is being processed before some of the other
initializations.  I had been assuming it is the very last thing done before it gives me
control.



This introduces a new problem---both 1.9.0 and 1.8.1.
I did --vanilla as you suggested, in a directory without an existing .RData

/cygdrive/c/HOME/tmp$ Rterm --vanilla

R : Copyright 2004, The R Foundation for Statistical Computing
Version 1.9.0  (2004-04-12), ISBN 3-900051-00-3

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type 'license()' or 'licence()' for distribution details.

R is a collaborative project with many contributors.
Type 'contributors()' for more information and
'citation()' on how to cite R in publications.

Type 'demo()' for some demos, 'help()' for on-line help, or
'help.start()' for a HTML browser interface to help.
Type 'q()' to quit R.

> date()
date()
[1] "Thu Apr 22 21:52:14 2004"
> ls()
ls()
character(0)
> nonsense
nonsense
Error: Object "nonsense" not found
Execution halted
/cygdrive/c/HOME/tmp$ 



When I manually start the trellis.device, after a version of my .First that doesn't
start it for me, I get this
> .Device
[1] "windows"
> 



on the q() issue, I report it as a continuation of behavior that has been discussed
on this list.  I don't remember when.  It has been an issue for me for a long time.
I am currently on XP HOME, I see this also on NT4.

I normally type just q()
This time I tried q("no").

It still freezes. I have to enter C-G to unfreeze emacs and then use the Task Manager
to kill the Rterm process.

Rich

From deepayan at stat.wisc.edu  Fri Apr 23 04:41:59 2004
From: deepayan at stat.wisc.edu (deepayan@stat.wisc.edu)
Date: Fri Apr 23 04:42:01 2004
Subject: [Rd] trellis.device in .First (PR#6812)
Message-ID: <20040423024159.7BA55FB90@slim.kubism.ku.dk>

On Thursday 22 April 2004 19:31, Duncan Murdoch wrote:
> On Fri, 23 Apr 2004 01:29:18 +0200 (CEST), rmh@temple.edu wrote:
> >1. The new one.
> >
> >When I include
> > trellis.device()
> >in my .First, Rterm 1.8.1 run in ESS happily opens a device.
> >
> >Rterm 1.9.0 doesn't.  It gives the following message instead:
> >>   [Previously saved workspace restored]
> >>
> >>   Error in get(x, envir, mode, inherits) : variable "windows" was
> >> not found
>
> Sounds like lattice needs to import windows.  (In 1.8.1 windows() was
> in base, so it would have automatically been available in .First.)

How do I do that ? windows is not available in all platforms, and on the 
one I use, 

importFrom(graphics, windows) 

leads to (during R INSTALL):

Error in importIntoEnv(impenv, impnames, ns, impvars) :
        object(s) 'windows' are not exported by 'namespace;graphics'


Is Rich's usage valid under 1.9.0 ? I presume replacing trellis.device() 
by windows() will give the same error. Or are all lattice functions 
expected to work after a require(lattice) is included in .First ?

Deepayan

From ripley at stats.ox.ac.uk  Fri Apr 23 08:54:26 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 23 08:54:31 2004
Subject: [Rd] trellis.device in .First (PR#6812)
In-Reply-To: <20040423020935.6920DEFC0@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404230741440.1166-100000@gannet.stats>

1) On the first point, please do read the NEWS file for R 1.9.0.

.Rprofile and .First have always been run before the default packages are 
loaded in .First.sys, to allow them to be changed.

So this *is* a documented change in behaviour, not a bug.  If I do

.First <- function() {library(lattice); trellis.device()}

This happens on all platforms.  You need

.First <- function() {library(graphics); library(lattice); trellis.device()}

That is true of starting any graphics device in .Rprofile or .First.


2) The second point is a long known problem with ESS/Emacs on some 
systems.  There is a PR against it already (I saw a few days ago).  Please 
don't add irrelevant issues to a bug report on another issue.

BDR


On Fri, 23 Apr 2004 rmh@temple.edu wrote:

> This is a start of R 1.9.0 in a directory without .RData
> 
> 
> > options(STERM='iESS', editor='gnuclient.exe')
> > search()
> [1] ".GlobalEnv"       "package:methods"  "package:stats"    "package:graphics"
> [5] "package:utils"    "Autoloads"        "package:base"    
> > find(windows)
> [1] "package:graphics"
> > 
> 
> 
> This makes me think that the .First is being processed before some of the other
> initializations.  I had been assuming it is the very last thing done before it gives me
> control.
> 
> 
> 
> This introduces a new problem---both 1.9.0 and 1.8.1.
> I did --vanilla as you suggested, in a directory without an existing .RData
> 
> /cygdrive/c/HOME/tmp$ Rterm --vanilla
> 
> R : Copyright 2004, The R Foundation for Statistical Computing
> Version 1.9.0  (2004-04-12), ISBN 3-900051-00-3
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type 'license()' or 'licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type 'contributors()' for more information and
> 'citation()' on how to cite R in publications.
> 
> Type 'demo()' for some demos, 'help()' for on-line help, or
> 'help.start()' for a HTML browser interface to help.
> Type 'q()' to quit R.
> 
> > date()
> date()
> [1] "Thu Apr 22 21:52:14 2004"
> > ls()
> ls()
> character(0)
> > nonsense
> nonsense
> Error: Object "nonsense" not found
> Execution halted
> /cygdrive/c/HOME/tmp$ 
> 
> 
> 
> When I manually start the trellis.device, after a version of my .First that doesn't
> start it for me, I get this
> > .Device
> [1] "windows"
> > 
> 
> 
> 
> on the q() issue, I report it as a continuation of behavior that has been discussed
> on this list.  I don't remember when.  It has been an issue for me for a long time.
> I am currently on XP HOME, I see this also on NT4.
> 
> I normally type just q()
> This time I tried q("no").
> 
> It still freezes. I have to enter C-G to unfreeze emacs and then use the Task Manager
> to kill the Rterm process.
> 
> Rich
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Fri Apr 23 09:21:34 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 23 09:21:36 2004
Subject: [Rd] trellis.device in .First (PR#6812)
In-Reply-To: <Pine.LNX.4.44.0404230741440.1166-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0404230809390.1166-100000@gannet.stats>

Extract from ?Startup

     Next, if a function '.First' is found on the search path, it is
     executed as '.First()'. Finally, function '.First.sys()' in the
     'base' package is run. This calls 'require' to attach the default
     packages specified by 'options("defaultPackages")'.

so again, this was documented in the (to me) obvious place.

Note `windows' is in package `graphics', a default package specified by
'options("defaultPackages")'.

It is a matter for discussion (with the lattice maintainer) whether 
trellis.device should help you out here by importing the devices from 
package graphics.  I think adding (conditionalized on the platform)

importFrom(graphics, windows, postscript, pdf, pictex, win.metafile, 
           win.print, png, jpeg, bmp, xfig, bitmap)

to its NAMESPACE might be worth considering.  Alternatively,
	device.call <- get(device)
could be put in a try call, followed by a try on 
	getFromNamespace("graphics", device).

BDR

On Fri, 23 Apr 2004, Prof Brian Ripley wrote:

> 1) On the first point, please do read the NEWS file for R 1.9.0.
> 
> .Rprofile and .First have always been run before the default packages are 
> loaded in .First.sys, to allow them to be changed.
> 
> So this *is* a documented change in behaviour, not a bug.  If I do
> 
> .First <- function() {library(lattice); trellis.device()}
> 
> This happens on all platforms.  You need
> 
> .First <- function() {library(graphics); library(lattice); trellis.device()}
> 
> That is true of starting any graphics device in .Rprofile or .First.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From maechler at stat.math.ethz.ch  Fri Apr 23 10:23:42 2004
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Fri Apr 23 10:23:44 2004
Subject: [Rd] trellis.device in .First (PR#6812)
In-Reply-To: <Pine.LNX.4.44.0404230809390.1166-100000@gannet.stats>
References: <Pine.LNX.4.44.0404230741440.1166-100000@gannet.stats>
	<Pine.LNX.4.44.0404230809390.1166-100000@gannet.stats>
Message-ID: <16520.53902.315687.116655@gargle.gargle.HOWL>

>>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk>
>>>>>     on Fri, 23 Apr 2004 08:21:34 +0100 (BST) writes:

	  <........>

    BDR> It is a matter for discussion (with the lattice
    BDR> maintainer) whether trellis.device should help you out
    BDR> here by importing the devices from package graphics.  I
    BDR> think adding (conditionalized on the platform)

    BDR> importFrom(graphics, windows, postscript, pdf, pictex,
    BDR>            win.metafile, win.print, png, jpeg, bmp, xfig, bitmap)

    BDR> to its NAMESPACE might be worth considering.

    BDR> Alternatively, device.call <- get(device) could be put
    BDR> in a try call, followed by a try on
    BDR> getFromNamespace("graphics", device).

That's a very good idea, I'd support quite a bit.

I think I would go with the alternative approach
(where you probably meant to say  device <- getOption("device") first?),
since the importFrom(..) approach leeds to a somewhat tedious maintenance
effort to keep up the list of available devices for the different platforms
(For MacOS X one has to include quartz() only in the situations
 where it's available) where as Deepayan (the lattice
maintainer) could rely on getOption("device") to be ok
{and as you proposed would be on guard using try() or its newer siblings}.

Martin

    BDR> BDR

    BDR> On Fri, 23 Apr 2004, Prof Brian Ripley wrote:

    >> 1) On the first point, please do read the NEWS file for R
    >> 1.9.0.
    >> 
    >> .Rprofile and .First have always been run before the
    >> default packages are loaded in .First.sys, to allow them
    >> to be changed.
    >> 
    >> So this *is* a documented change in behaviour, not a bug.
    >> If I do
    >> 
    >> .First <- function() {library(lattice); trellis.device()}
    >> 
    >> This happens on all platforms.  You need
    >> 
    >> .First <- function() {library(graphics);
    >> library(lattice); trellis.device()}
    >> 
    >> That is true of starting any graphics device in .Rprofile
    >> or .First.


    BDR> -- Brian D. Ripley, ripley@stats.ox.ac.uk Professor of
    BDR> Applied Statistics, http://www.stats.ox.ac.uk/~ripley/
    BDR> University of Oxford, Tel: +44 1865 272861 (self) 1
    BDR> South Parks Road, +44 1865 272866 (PA) Oxford OX1 3TG,
    BDR> UK Fax: +44 1865 272595

    BDR> ______________________________________________
    BDR> R-devel@stat.math.ethz.ch mailing list
    BDR> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From dmurdoch at pair.com  Fri Apr 23 12:56:50 2004
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Fri Apr 23 12:56:52 2004
Subject: [Rd] trellis.device in .First (PR#6812)
Message-ID: <20040423105650.D988310505@slim.kubism.ku.dk>

On Thu, 22 Apr 2004 22:08:56 -0400, "Richard M. Heiberger"
<rmh@temple.edu> wrote:

>This is a start of R 1.9.0 in a directory without .RData
>
>
>> options(STERM='iESS', editor='gnuclient.exe')
>> search()
>[1] ".GlobalEnv"       "package:methods"  "package:stats"    "package:graphics"
>[5] "package:utils"    "Autoloads"        "package:base"    
>> find(windows)
>[1] "package:graphics"
>> 
>
>
>This makes me think that the .First is being processed before some of the other
>initializations.  I had been assuming it is the very last thing done before it gives me
>control.

Yes, see ?Startup for the details.  I think the startup sequence
hasn't changed in 1.9.0 (though the documentation for it is now more
accurate), but the rearrangement of packages means that things that
worked before in .First won't work now.


>on the q() issue, I report it as a continuation of behavior that has been discussed
>on this list.  I don't remember when.  It has been an issue for me for a long time.
>I am currently on XP HOME, I see this also on NT4.
>
>I normally type just q()
>This time I tried q("no").
>
>It still freezes. I have to enter C-G to unfreeze emacs and then use the Task Manager
>to kill the Rterm process.

Sorry, didn't notice the earlier discussion.  Sounds like an
interaction with ESS.

Which Emacs are you using (and perhaps, where can I get it?  I have
XEmacs installed on one machine, but not this one).

Duncan Murdoch

From rmh at temple.edu  Fri Apr 23 13:49:53 2004
From: rmh at temple.edu (rmh@temple.edu)
Date: Fri Apr 23 13:49:56 2004
Subject: [Rd] trellis.device in .First (PR#6812)
Message-ID: <20040423114953.EC820104AD@slim.kubism.ku.dk>

I use Gnu Emacs 21.3

<A HREF="ftp://ftp.gnu.org:/gnu/windows/emacs/21.3/emacs-21.3-fullbin-i386.tar.gz">Gnu Emacs 21.3 
Binaries for Windows (NTemacs)</A><BR>

From davidwalsh at onetel.net.uk  Fri Apr 23 16:06:24 2004
From: davidwalsh at onetel.net.uk (David Walsh)
Date: Fri Apr 23 16:06:34 2004
Subject: [Rd] Re: Its me
References: <200404231324.BFY02480@msgdirector2.onetel.net.uk>
Message-ID: <000d01c4293c$2a271f00$a5684ed5@pbncomputer>

I was unable to open the file.
----- Original Message ----- 
From: <r-devel@r-project.org>
To: <davidwalsh@onetel.net.uk>
Sent: Friday, April 23, 2004 2:24 PM
Subject: Re: Its me


> The file is protected with the password ghj001.
> 
>

From deepayan at stat.wisc.edu  Fri Apr 23 16:14:40 2004
From: deepayan at stat.wisc.edu (Deepayan Sarkar)
Date: Fri Apr 23 16:14:31 2004
Subject: [Rd] trellis.device in .First (PR#6812)
In-Reply-To: <16520.53902.315687.116655@gargle.gargle.HOWL>
References: <Pine.LNX.4.44.0404230741440.1166-100000@gannet.stats>
	<Pine.LNX.4.44.0404230809390.1166-100000@gannet.stats>
	<16520.53902.315687.116655@gargle.gargle.HOWL>
Message-ID: <200404230914.41062.deepayan@stat.wisc.edu>

On Friday 23 April 2004 03:23, Martin Maechler wrote:
> >>>>> "BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk>
> >>>>>     on Fri, 23 Apr 2004 08:21:34 +0100 (BST) writes:
>
> 	  <........>
>
>     BDR> It is a matter for discussion (with the lattice
>     BDR> maintainer) whether trellis.device should help you out
>     BDR> here by importing the devices from package graphics.  I
>     BDR> think adding (conditionalized on the platform)
>
>     BDR> importFrom(graphics, windows, postscript, pdf, pictex,
>     BDR>            win.metafile, win.print, png, jpeg, bmp, xfig,
> bitmap)
>
>     BDR> to its NAMESPACE might be worth considering.
>
>     BDR> Alternatively, device.call <- get(device) could be put
>     BDR> in a try call, followed by a try on
>     BDR> getFromNamespace("graphics", device).
>
> That's a very good idea, I'd support quite a bit.
>
> I think I would go with the alternative approach
> (where you probably meant to say  device <- getOption("device")
> first?), 

(yes, device is an argument to trellis.device that defaults to 
getOption("device"))

> since the importFrom(..) approach leeds to a somewhat 
> tedious maintenance effort to keep up the list of available devices
> for the different platforms (For MacOS X one has to include quartz()
> only in the situations where it's available) where as Deepayan (the
> lattice maintainer) could rely on getOption("device") to be ok
> {and as you proposed would be on guard using try() or its newer
> siblings}.

That sounds like a good argument to go with the second approach. Looks 
like I would need importFrom(utils, getFromNamespace) for that, right ?

I'll release an updated version over the weekend.

Deepayan

From aa056 at chebucto.ns.ca  Fri Apr 23 18:28:14 2004
From: aa056 at chebucto.ns.ca (aa056@chebucto.ns.ca)
Date: Fri Apr 23 18:28:18 2004
Subject: [Rd] is.na(valid_date) too often true on SGI MIPS (PR#6814)
Message-ID: <20040423162814.E8513EFC0@slim.kubism.ku.dk>

Full_Name: George N. White III
Version: 1.9.0
OS: Irix 6.5.21m
Submission from: (NULL) (142.176.61.212)


R-1.9.0 built using the SGI MIPSPro compilers

  Installation directory:    /usr/local

  C compiler:                c99 -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
-OPT:Olimit_opt=on
  C++ compiler:              CC -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
-OPT:Olimit_opt=on -LANG:std
  Fortran compiler:          f90 -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
-OPT:Olimit_opt=on

  Interfaces supported:      X11, gnome, tcltk
  External libraries:        readline, BLAS(generic), LAPACK(generic)
  Additional capabilities:   PNG, JPEG
  Options enabled:           shared library, R profiling

  Recommended packages:      yes

"make check" fails in 2 places due to is.na(..) returning TRUE for valid dates:

> d<-strptime("1910/1/1", "%Y/%m/%d")
> is.na(d)
[1] TRUE
> d
[1] "1910-01-01"

> d<-strptime("1970/1/1", "%Y/%m/%d")
> is.na(d)
[1] FALSE
> d
[1] "1970-01-01"

Incidentally:
> NA+NaN;NaN+NA
[1] NA
[1] NaN

From ripley at stats.ox.ac.uk  Fri Apr 23 18:46:15 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 23 18:46:24 2004
Subject: [Rd] is.na(valid_date) too often true on SGI MIPS (PR#6814)
In-Reply-To: <20040423162814.E8513EFC0@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404231737240.2483-100000@gannet.stats>

I'm sorry, but this is completely unreproducible, and the second you say 
is true you quote as false.

d is a list, so can you tell us unclass(d) in both cases?

Also, I cannot see those examples anywhere in the R sources so can you 
please show the actual output you got.

On Fri, 23 Apr 2004 aa056@chebucto.ns.ca wrote:

> Full_Name: George N. White III
> Version: 1.9.0
> OS: Irix 6.5.21m
> Submission from: (NULL) (142.176.61.212)
> 
> 
> R-1.9.0 built using the SGI MIPSPro compilers
> 
>   Installation directory:    /usr/local
> 
>   C compiler:                c99 -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
> -OPT:Olimit_opt=on
>   C++ compiler:              CC -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
> -OPT:Olimit_opt=on -LANG:std
>   Fortran compiler:          f90 -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
> -OPT:Olimit_opt=on
> 
>   Interfaces supported:      X11, gnome, tcltk
>   External libraries:        readline, BLAS(generic), LAPACK(generic)
>   Additional capabilities:   PNG, JPEG
>   Options enabled:           shared library, R profiling
> 
>   Recommended packages:      yes
> 
> "make check" fails in 2 places due to is.na(..) returning TRUE for valid dates:
> 
> > d<-strptime("1910/1/1", "%Y/%m/%d")
> > is.na(d)
> [1] TRUE
> > d
> [1] "1910-01-01"
> 
> > d<-strptime("1970/1/1", "%Y/%m/%d")
> > is.na(d)
> [1] FALSE
> > d
> [1] "1970-01-01"
> 
> Incidentally:
> > NA+NaN;NaN+NA
> [1] NA
> [1] NaN
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From rsparapa at mcw.edu  Fri Apr 23 20:07:39 2004
From: rsparapa at mcw.edu (rsparapa@mcw.edu)
Date: Fri Apr 23 20:07:47 2004
Subject: [Rd] make fails with Sun Forte compiler (PR#6815)
Message-ID: <20040423180739.1C8B5EFBA@slim.kubism.ku.dk>

Full_Name: rodney sparapani
Version: 1.9.0
OS: Solaris 9
Submission from: (NULL) (141.106.120.97)


I'm following the instructions for the Sun Forte compiler.  I had success with
1.8.1 so I think the compiler settings are correct (config.site):
     CC="cc -xarch=v8plusa"
     CFLAGS="-xO5 -xlibmil -dalign"
     F77="f95 -xarch=v8plusa"
     FFLAGS="-xO5 -xlibmil -dalign"
     CXX="CC -xarch=v8plusa"
     CXXFLAGS="-xO5 -xlibmil -dalign"
Actually, there is one thing that I didn't specify above, but I'm not sure how. 
The Sun Performance library is a BLAS library.  In LAPACK, you specify it as 
BLASLIB     ="-xlic_lib=sunperf"
Is there a simple way to specify that in config.site?  Anyways, that's probably
not the problem that I'm having, but if you have any advice...  
Here's the real problem, make fails at:
MAKE="make" R_LIBS= ../../../bin/R CMD INSTALL -l ../../../library foreign.tgz
* Installing *source* package 'foreign' ...
checking for gcc... make[3]: Entering directory `/tmp/R.INSTALL.8673/foreign'
cc -xarch=v8plusa
make[3]: Leaving directory `/tmp/R.INSTALL.8673/foreign'
checking for C compiler default output... configure: error: C compiler cannot
create executables
See `config.log' for more details.
error: configuration failed for package 'foreign': No such file or directory for
reading errors.
** Removing '/fw/src/R/R-1.9.0/library/foreign'
make[2]: *** [foreign.ts] Error 1
make[2]: Leaving directory `/fw/src/R/R-1.9.0/src/library/Recommended'
make[1]: *** [recommended-packages] Error 2
make[1]: Leaving directory `/fw/src/R/R-1.9.0/src/library/Recommended'
make: *** [stamp-recommended] Error 2

foreign seems to be having a compiler problem that other recommended packages
did not.  Any ideas?

From ripley at stats.ox.ac.uk  Fri Apr 23 20:32:43 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 23 20:32:54 2004
Subject: [Rd] make fails with Sun Forte compiler (PR#6815)
In-Reply-To: <20040423180739.1C8B5EFBA@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404231926080.13017-100000@gannet.stats>

The instructions in R-admin *have* been tested.  It does tell you how to 
specify the sunperf BLAS, so please read it -- it probably even selects it 
by default.

I don't see any evidence of a bug in R here, rather of a problem in your 
setup.  Please seek local advice. My suspicion is that you want 
"-xarch=v8plusa" in CFLAGS and not in CC.

You might want to try untaring foreign and installing it, then looking at 
config.log.

Please ask questions on R-help not R-bugs: the R FAQ explains rather 
plainly when R-bugs is appropriate.


On Fri, 23 Apr 2004 rsparapa@mcw.edu wrote:

> Full_Name: rodney sparapani
> Version: 1.9.0
> OS: Solaris 9
> Submission from: (NULL) (141.106.120.97)
> 
> 
> I'm following the instructions for the Sun Forte compiler.  I had success with
> 1.8.1 so I think the compiler settings are correct (config.site):
>      CC="cc -xarch=v8plusa"
>      CFLAGS="-xO5 -xlibmil -dalign"
>      F77="f95 -xarch=v8plusa"
>      FFLAGS="-xO5 -xlibmil -dalign"
>      CXX="CC -xarch=v8plusa"
>      CXXFLAGS="-xO5 -xlibmil -dalign"
> Actually, there is one thing that I didn't specify above, but I'm not sure how. 
> The Sun Performance library is a BLAS library.  In LAPACK, you specify it as 
> BLASLIB     ="-xlic_lib=sunperf"
> Is there a simple way to specify that in config.site?  Anyways, that's probably
> not the problem that I'm having, but if you have any advice...  
> Here's the real problem, make fails at:
> MAKE="make" R_LIBS= ../../../bin/R CMD INSTALL -l ../../../library foreign.tgz
> * Installing *source* package 'foreign' ...
> checking for gcc... make[3]: Entering directory `/tmp/R.INSTALL.8673/foreign'
> cc -xarch=v8plusa
> make[3]: Leaving directory `/tmp/R.INSTALL.8673/foreign'
> checking for C compiler default output... configure: error: C compiler cannot
> create executables
> See `config.log' for more details.
> error: configuration failed for package 'foreign': No such file or directory for
> reading errors.
> ** Removing '/fw/src/R/R-1.9.0/library/foreign'
> make[2]: *** [foreign.ts] Error 1
> make[2]: Leaving directory `/fw/src/R/R-1.9.0/src/library/Recommended'
> make[1]: *** [recommended-packages] Error 2
> make[1]: Leaving directory `/fw/src/R/R-1.9.0/src/library/Recommended'
> make: *** [stamp-recommended] Error 2
> 
> foreign seems to be having a compiler problem that other recommended packages
> did not.  Any ideas?
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From aa056 at chebucto.ns.ca  Fri Apr 23 20:51:49 2004
From: aa056 at chebucto.ns.ca (George N. White III)
Date: Fri Apr 23 20:53:22 2004
Subject: [Rd] is.na(valid_date) too often true on SGI MIPS (PR#6814)
In-Reply-To: <Pine.LNX.4.44.0404231737240.2483-100000@gannet.stats>
References: <Pine.LNX.4.44.0404231737240.2483-100000@gannet.stats>
Message-ID: <Pine.SGI.4.58.0404231527420.165455@montigo.bio.dfo.ca>

On Fri, 23 Apr 2004, Prof Brian Ripley wrote:

> I'm sorry, but this is completely unreproducible, and the second you say
> is true you quote as false.

Not sure what you mean -- are you saying "make check" passes on
other Irix systems?

> d is a list, so can you tell us unclass(d) in both cases?

Sure -- they look OK to me:
> d<-strptime("1910/1/1", "%Y/%m/%d")
> unclass(d)
$sec
[1] 0
$min
[1] 0
$hour
[1] 0
$mday
[1] 1
$mon
[1] 0
$year
[1] 10
$wday
[1] 6
$yday
[1] 0
$isdst
[1] -1
> d<-strptime("1970/1/1", "%Y/%m/%d")
> unclass(d)
$sec
[1] 0
$min
[1] 0
$hour
[1] 0
$mday
[1] 1
$mon
[1] 0
$year
[1] 70
$wday
[1] 4
$yday
[1] 0
$isdst
[1] 0

> Also, I cannot see those examples anywhere in the R sources so can you
> please show the actual output you got.

My examples are based on as.POSIXlt from datetime.R.

Here are the relevant sections of the output from the tests (if I
comment out these sections in reg-tests-1.R and base-Ex.R then
"make check" runs fine):

$ cd ~/install/R/R-1.9.0/tests
gwhite@montigo:/user/gwhite/install/R/R-1.9.0/tests
$ gmake reg-tests-1.Rout
running code in 'reg-tests-1.R' ...gmake: *** [reg-tests-1.Rout] Error 1
$ tail -20 reg-tests-1.Rout.fail
> (t1 <- strptime(c("6. Aug. 1930", "3. Nov. 1925", "28. Mar. 1959",
+                  NA, paste(1:29," Feb. 1960", sep=".")),
+                format = "%d. %b. %Y"))
 [1] "1930-08-06" "1925-11-03" "1959-03-28" NA           "1960-02-01"
 [6] "1960-02-02" "1960-02-03" "1960-02-04" "1960-02-05" "1960-02-06"
[11] "1960-02-07" "1960-02-08" "1960-02-09" "1960-02-10" "1960-02-11"
[16] "1960-02-12" "1960-02-13" "1960-02-14" "1960-02-15" "1960-02-16"
[21] "1960-02-17" "1960-02-18" "1960-02-19" "1960-02-20" "1960-02-21"
[26] "1960-02-22" "1960-02-23" "1960-02-24" "1960-02-25" "1960-02-26"
[31] "1960-02-27" "1960-02-28" "1960-02-29"
> stopifnot(6 == length(print(s1 <- summary(t1))),
+           s1== summary(as.POSIXct(t1)),
+           6 == length(print(format(as.Date(s1)))) )
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
     NA      NA      NA      NA      NA      NA
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
     NA      NA      NA      NA      NA      NA
Error in if (!(is.logical(r <- eval(ll[[i]])) && all(r))) stop(paste(deparse(mc[[i +  :
        missing value where TRUE/FALSE needed
Execution halted
$ cd Examples
$ gmake base-Ex.Rout
running code in 'base-Ex.R' ...
Execution halted
$ tail -4 base-Ex.Rout.fail
> ## first days of years
> seq(as.Date("1910/1/1"), as.Date("1999/1/1"), "years")
Error in fromchar(x) : character string is not in a standard unambiguous format
Execution halted

> On Fri, 23 Apr 2004 aa056@chebucto.ns.ca wrote:
>
> > Full_Name: George N. White III
> > Version: 1.9.0
> > OS: Irix 6.5.21m
> > Submission from: (NULL) (142.176.61.212)
> >
> >
> > R-1.9.0 built using the SGI MIPSPro compilers
> >
> >   Installation directory:    /usr/local
> >
> >   C compiler:                c99 -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
> > -OPT:Olimit_opt=on
> >   C++ compiler:              CC -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
> > -OPT:Olimit_opt=on -LANG:std
> >   Fortran compiler:          f90 -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
> > -OPT:Olimit_opt=on
> >
> >   Interfaces supported:      X11, gnome, tcltk
> >   External libraries:        readline, BLAS(generic), LAPACK(generic)
> >   Additional capabilities:   PNG, JPEG
> >   Options enabled:           shared library, R profiling
> >
> >   Recommended packages:      yes
> >
> > "make check" fails in 2 places due to is.na(..) returning TRUE for valid dates:
> >
> > > d<-strptime("1910/1/1", "%Y/%m/%d")
> > > is.na(d)
> > [1] TRUE
> > > d
> > [1] "1910-01-01"
> >
> > > d<-strptime("1970/1/1", "%Y/%m/%d")
> > > is.na(d)
> > [1] FALSE
> > > d
> > [1] "1970-01-01"
> >
> > Incidentally:
> > > NA+NaN;NaN+NA
> > [1] NA
> > [1] NaN
> >
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >
> >
>
>

--
George N. White III  <aa056@chebucto.ns.ca>
  Head of St. Margarets Bay, Nova Scotia, Canada

From aa056 at chebucto.ns.ca  Fri Apr 23 20:53:53 2004
From: aa056 at chebucto.ns.ca (aa056@chebucto.ns.ca)
Date: Fri Apr 23 20:54:00 2004
Subject: [Rd] is.na(valid_date) too often true on SGI MIPS (PR#6814)
Message-ID: <20040423185353.8B6D0EFB8@slim.kubism.ku.dk>

On Fri, 23 Apr 2004, Prof Brian Ripley wrote:

> I'm sorry, but this is completely unreproducible, and the second you say
> is true you quote as false.

Not sure what you mean -- are you saying "make check" passes on
other Irix systems?

> d is a list, so can you tell us unclass(d) in both cases?

Sure -- they look OK to me:
> d<-strptime("1910/1/1", "%Y/%m/%d")
> unclass(d)
$sec
[1] 0
$min
[1] 0
$hour
[1] 0
$mday
[1] 1
$mon
[1] 0
$year
[1] 10
$wday
[1] 6
$yday
[1] 0
$isdst
[1] -1
> d<-strptime("1970/1/1", "%Y/%m/%d")
> unclass(d)
$sec
[1] 0
$min
[1] 0
$hour
[1] 0
$mday
[1] 1
$mon
[1] 0
$year
[1] 70
$wday
[1] 4
$yday
[1] 0
$isdst
[1] 0

> Also, I cannot see those examples anywhere in the R sources so can you
> please show the actual output you got.

My examples are based on as.POSIXlt from datetime.R.

Here are the relevant sections of the output from the tests (if I
comment out these sections in reg-tests-1.R and base-Ex.R then
"make check" runs fine):

$ cd ~/install/R/R-1.9.0/tests
gwhite@montigo:/user/gwhite/install/R/R-1.9.0/tests
$ gmake reg-tests-1.Rout
running code in 'reg-tests-1.R' ...gmake: *** [reg-tests-1.Rout] Error 1
$ tail -20 reg-tests-1.Rout.fail
> (t1 <- strptime(c("6. Aug. 1930", "3. Nov. 1925", "28. Mar. 1959",
+                  NA, paste(1:29," Feb. 1960", sep=".")),
+                format = "%d. %b. %Y"))
 [1] "1930-08-06" "1925-11-03" "1959-03-28" NA           "1960-02-01"
 [6] "1960-02-02" "1960-02-03" "1960-02-04" "1960-02-05" "1960-02-06"
[11] "1960-02-07" "1960-02-08" "1960-02-09" "1960-02-10" "1960-02-11"
[16] "1960-02-12" "1960-02-13" "1960-02-14" "1960-02-15" "1960-02-16"
[21] "1960-02-17" "1960-02-18" "1960-02-19" "1960-02-20" "1960-02-21"
[26] "1960-02-22" "1960-02-23" "1960-02-24" "1960-02-25" "1960-02-26"
[31] "1960-02-27" "1960-02-28" "1960-02-29"
> stopifnot(6 == length(print(s1 <- summary(t1))),
+           s1== summary(as.POSIXct(t1)),
+           6 == length(print(format(as.Date(s1)))) )
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
     NA      NA      NA      NA      NA      NA
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
     NA      NA      NA      NA      NA      NA
Error in if (!(is.logical(r <- eval(ll[[i]])) && all(r))) stop(paste(deparse(mc[[i +  :
        missing value where TRUE/FALSE needed
Execution halted
$ cd Examples
$ gmake base-Ex.Rout
running code in 'base-Ex.R' ...
Execution halted
$ tail -4 base-Ex.Rout.fail
> ## first days of years
> seq(as.Date("1910/1/1"), as.Date("1999/1/1"), "years")
Error in fromchar(x) : character string is not in a standard unambiguous format
Execution halted

> On Fri, 23 Apr 2004 aa056@chebucto.ns.ca wrote:
>
> > Full_Name: George N. White III
> > Version: 1.9.0
> > OS: Irix 6.5.21m
> > Submission from: (NULL) (142.176.61.212)
> >
> >
> > R-1.9.0 built using the SGI MIPSPro compilers
> >
> >   Installation directory:    /usr/local
> >
> >   C compiler:                c99 -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
> > -OPT:Olimit_opt=on
> >   C++ compiler:              CC -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
> > -OPT:Olimit_opt=on -LANG:std
> >   Fortran compiler:          f90 -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
> > -OPT:Olimit_opt=on
> >
> >   Interfaces supported:      X11, gnome, tcltk
> >   External libraries:        readline, BLAS(generic), LAPACK(generic)
> >   Additional capabilities:   PNG, JPEG
> >   Options enabled:           shared library, R profiling
> >
> >   Recommended packages:      yes
> >
> > "make check" fails in 2 places due to is.na(..) returning TRUE for valid dates:
> >
> > > d<-strptime("1910/1/1", "%Y/%m/%d")
> > > is.na(d)
> > [1] TRUE
> > > d
> > [1] "1910-01-01"
> >
> > > d<-strptime("1970/1/1", "%Y/%m/%d")
> > > is.na(d)
> > [1] FALSE
> > > d
> > [1] "1970-01-01"
> >
> > Incidentally:
> > > NA+NaN;NaN+NA
> > [1] NA
> > [1] NaN
> >
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >
> >
>
>

--
George N. White III  <aa056@chebucto.ns.ca>
  Head of St. Margarets Bay, Nova Scotia, Canada

From ripley at stats.ox.ac.uk  Fri Apr 23 23:38:36 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri Apr 23 23:45:32 2004
Subject: [Rd] is.na(valid_date) too often true on SGI MIPS (PR#6814)
In-Reply-To: <Pine.SGI.4.58.0404231527420.165455@montigo.bio.dfo.ca>
Message-ID: <Pine.LNX.4.44.0404232235430.13187-100000@gannet.stats>

On Fri, 23 Apr 2004, George N. White III wrote:

> On Fri, 23 Apr 2004, Prof Brian Ripley wrote:
> 
> > I'm sorry, but this is completely unreproducible, and the second you say
> > is true you quote as false.
> 
> Not sure what you mean -- are you saying "make check" passes on
> other Irix systems?

We don't have an Irix system on which they fail _AND_ your examples 
are not in the R sources. N.B. as.Date and is.na(strptime()) are not the 
same code, and your second example is still not explained.

However, you reported to R bugs, not to Irix bugs, and no other R system 
has shown this behaviour.  So the finger is pointing elsewhere.

> > d is a list, so can you tell us unclass(d) in both cases?
> 
> Sure -- they look OK to me:
> > d<-strptime("1910/1/1", "%Y/%m/%d")
> > unclass(d)
> $sec
> [1] 0
> $min
> [1] 0
> $hour
> [1] 0
> $mday
> [1] 1
> $mon
> [1] 0
> $year
> [1] 10
> $wday
> [1] 6
> $yday
> [1] 0
> $isdst
> [1] -1
> > d<-strptime("1970/1/1", "%Y/%m/%d")
> > unclass(d)
> $sec
> [1] 0
> $min
> [1] 0
> $hour
> [1] 0
> $mday
> [1] 1
> $mon
> [1] 0
> $year
> [1] 70
> $wday
> [1] 4
> $yday
> [1] 0
> $isdst
> [1] 0
> 
> > Also, I cannot see those examples anywhere in the R sources so can you
> > please show the actual output you got.
> 
> My examples are based on as.POSIXlt from datetime.R.
> 
> Here are the relevant sections of the output from the tests (if I
> comment out these sections in reg-tests-1.R and base-Ex.R then
> "make check" runs fine):
> 
> $ cd ~/install/R/R-1.9.0/tests
> gwhite@montigo:/user/gwhite/install/R/R-1.9.0/tests
> $ gmake reg-tests-1.Rout
> running code in 'reg-tests-1.R' ...gmake: *** [reg-tests-1.Rout] Error 1
> $ tail -20 reg-tests-1.Rout.fail
> > (t1 <- strptime(c("6. Aug. 1930", "3. Nov. 1925", "28. Mar. 1959",
> +                  NA, paste(1:29," Feb. 1960", sep=".")),
> +                format = "%d. %b. %Y"))
>  [1] "1930-08-06" "1925-11-03" "1959-03-28" NA           "1960-02-01"
>  [6] "1960-02-02" "1960-02-03" "1960-02-04" "1960-02-05" "1960-02-06"
> [11] "1960-02-07" "1960-02-08" "1960-02-09" "1960-02-10" "1960-02-11"
> [16] "1960-02-12" "1960-02-13" "1960-02-14" "1960-02-15" "1960-02-16"
> [21] "1960-02-17" "1960-02-18" "1960-02-19" "1960-02-20" "1960-02-21"
> [26] "1960-02-22" "1960-02-23" "1960-02-24" "1960-02-25" "1960-02-26"
> [31] "1960-02-27" "1960-02-28" "1960-02-29"
> > stopifnot(6 == length(print(s1 <- summary(t1))),
> +           s1== summary(as.POSIXct(t1)),
> +           6 == length(print(format(as.Date(s1)))) )
>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
>      NA      NA      NA      NA      NA      NA
>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
>      NA      NA      NA      NA      NA      NA
> Error in if (!(is.logical(r <- eval(ll[[i]])) && all(r))) stop(paste(deparse(mc[[i +  :
>         missing value where TRUE/FALSE needed
> Execution halted
> $ cd Examples
> $ gmake base-Ex.Rout
> running code in 'base-Ex.R' ...
> Execution halted
> $ tail -4 base-Ex.Rout.fail
> > ## first days of years
> > seq(as.Date("1910/1/1"), as.Date("1999/1/1"), "years")
> Error in fromchar(x) : character string is not in a standard unambiguous format
> Execution halted
> 
> > On Fri, 23 Apr 2004 aa056@chebucto.ns.ca wrote:
> >
> > > Full_Name: George N. White III
> > > Version: 1.9.0
> > > OS: Irix 6.5.21m
> > > Submission from: (NULL) (142.176.61.212)
> > >
> > >
> > > R-1.9.0 built using the SGI MIPSPro compilers
> > >
> > >   Installation directory:    /usr/local
> > >
> > >   C compiler:                c99 -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
> > > -OPT:Olimit_opt=on
> > >   C++ compiler:              CC -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
> > > -OPT:Olimit_opt=on -LANG:std
> > >   Fortran compiler:          f90 -OPT:IEEE_NaN_inf=ON -mips4 -n32 -O3
> > > -OPT:Olimit_opt=on
> > >
> > >   Interfaces supported:      X11, gnome, tcltk
> > >   External libraries:        readline, BLAS(generic), LAPACK(generic)
> > >   Additional capabilities:   PNG, JPEG
> > >   Options enabled:           shared library, R profiling
> > >
> > >   Recommended packages:      yes
> > >
> > > "make check" fails in 2 places due to is.na(..) returning TRUE for valid dates:
> > >
> > > > d<-strptime("1910/1/1", "%Y/%m/%d")
> > > > is.na(d)
> > > [1] TRUE
> > > > d
> > > [1] "1910-01-01"
> > >
> > > > d<-strptime("1970/1/1", "%Y/%m/%d")
> > > > is.na(d)
> > > [1] FALSE
> > > > d
> > > [1] "1970-01-01"
> > >
> > > Incidentally:
> > > > NA+NaN;NaN+NA
> > > [1] NA
> > > [1] NaN
> > >
> > > ______________________________________________
> > > R-devel@stat.math.ethz.ch mailing list
> > > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > >
> > >
> >
> >
> 
> --
> George N. White III  <aa056@chebucto.ns.ca>
>   Head of St. Margarets Bay, Nova Scotia, Canada
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From stefano.iacus at unimi.it  Fri Apr 23 22:31:06 2004
From: stefano.iacus at unimi.it (stefano iacus)
Date: Fri Apr 23 23:51:22 2004
Subject: [Rd] R.bin vs R as app name in Mac OS X
Message-ID: <25B8B37A-9565-11D8-AC7F-000A95C87F66@unimi.it>

I discovered today a curious behavior of the Finder.

If you double click on the R icon directly, on Panther, you'll see 
R.bin in the application menu. If you call R via an applescript like 
the following, you'll see only R as it should be.

try
	tell application "R"
		activate
		with timeout of 1000 seconds
			cmd "print(\"HelloWorld!\")"
		end timeout
	end tell
end try

Now I'm waiting an answer from Apple...and will let you know.
stefano

From kwright at eskimo.com  Fri Apr 23 23:55:56 2004
From: kwright at eskimo.com (kwright@eskimo.com)
Date: Fri Apr 23 23:55:59 2004
Subject: [Rd] Weirdness with choose.files on Microsoft Windows (PR#6818)
Message-ID: <20040423215556.E563CEFC0@slim.kubism.ku.dk>

Full_Name: Kevin Wright
Version: 1.8.0
OS: Windows 95
Submission from: (NULL) (170.54.59.160)



This bug also happens to me using R 1.9.0 on Windows 2000.

Took me a long time to create a reproducible bug, but I think I have succeeded. 
I suspect my test function has a bug, but I don't see anything wrong.  Plus, the
bug only shows up when selecting certain filenames.  Nearest I can speculate,
choose.files becomes confused after a filename that has capital letters and
numbers has been chosen.  Sounds crazy and I'd like to know more, but
choose.files is mostly .Internal code.

First, create two CSV files.

library(nlme)
data(Oats)
write.table(Oats,"c:/oats.csv",sep=",")
write.table(Oats,"c:/C20oats.csv",sep=",")

Quit R and restart.  Follow the steps below.  Select oats.csv the first 4 times,
then select C20oats.csv and then select oats.csv .  Notice how the filename is
corrupted the final  time.


test <- function(){
     cat("press ENTER for a gui file selector\n")
     gas.filename<-readline()
     if(gas.filename=="")
       gas.filename <- choose.files("*.csv",multi=FALSE,caption="Hi")
     if(file.exists(gas.filename)){
       cat("Reading ",gas.filename,"\n")
       DFgas<-read.csv(gas.filename)
     }
     else
       cat("The file",gas.filename," cannot be found\n")
 
 
     cat("press ENTER for a gui file selector\n")
     nir.filename<-readline()
     if(nir.filename=="")
       nir.filename <- choose.files("*.csv",multi=FALSE,
                                    caption="Choose one gas CSV file")
     if(file.exists(nir.filename)){
       cat("Reading ",nir.filename,"\n")
       DFnir<-read.csv(nir.filename)
     }
     else
       cat("The file", nir.filename," cannot be found\n")      
       
 }

> test()
press ENTER for a gui file selector

Reading  C:\oats.csv 
press ENTER for a gui file selector

Reading  C:\oats.csv 
> test()
press ENTER for a gui file selector

Reading  C:\oats.csv 
press ENTER for a gui file selector

Reading  C:\oats.csv 
> test()
press ENTER for a gui file selector

Reading  C:\C20oats.csv 
press ENTER for a gui file selector

The file C:\oats.csv\sv  cannot be found
>

From info at freshpair.com  Sat Apr 24 01:59:25 2004
From: info at freshpair.com (info@freshpair.com)
Date: Sat Apr 24 02:00:09 2004
Subject: [Rd] MDaemon Warning - virus found: Re: Secure SMTP Message
Message-ID: <MDAEMON3330200404231959.AA5925349@freshpair.com>

Thank You for contacting Freshpair.com Customer Care.  A representative will
respond to your request in a fast and friendly manner.

If you would like to place a phone order, or have questions regarding an
existing order, please call our toll-free customer care center at 866-FRESHPAIR.  
Representatives are available to answer your calls Monday thru Friday, 
from 9:00am-6:00pm EST. You may also try our Live Chat service by clicking on 
"Live Help" from www.freshpair.com .

Thank You,
Freshpair.com Customer Care
866-FRESHPAIR
www.freshpair.com

From deleeuw at stat.ucla.edu  Sat Apr 24 07:58:37 2004
From: deleeuw at stat.ucla.edu (Jan de Leeuw)
Date: Sat Apr 24 07:58:42 2004
Subject: [Rd] R-devel from rsync 04/23
Message-ID: <6DE3ACF4-95B4-11D8-B6A9-000A95A67E82@stat.ucla.edu>

I see something new and unexpected here.

 > update.packages()
trying URL `http://cran.r-project.org/src/contrib/PACKAGES'
Content type `text/plain; charset=iso-8859-1' length 163467 bytes
opened URL
.......... .......... .......... .......... ..........
.......... .......... .......... .......... ..........
.......... .......... .......... .......... ..........
.........
downloaded 159Kb

Error in if (any(ok) && any(package.dependencies(available[ok, ], check  
= TRUE))) { :
         missing value where TRUE/FALSE needed

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 8130 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au

From ripley at stats.ox.ac.uk  Sat Apr 24 09:27:19 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Apr 24 09:27:23 2004
Subject: [Rd] R-devel from rsync 04/23
In-Reply-To: <6DE3ACF4-95B4-11D8-B6A9-000A95A67E82@stat.ucla.edu>
Message-ID: <Pine.LNX.4.44.0404240819410.17368-100000@gannet.stats>

But it also happens in 1.9.0 (always worth checking the current release, 
surely?)

Try CRAN.packages()[121,]

The CRAN PACKAGES file contains

Package: haplo.score
Version: 1.0.2
Date: 2002-09-13
Title: Score Tests for Association of Traits with Haplotypes when
  Linkage Phase is Ambiguous.
Author: Charles M. Rowland, David E. Tines, and Daniel J. Schaid
 .  R version translation by Gregory R. Warnes

Maintainer: Gregory R. Warnes
....

and that blank line should not be there.  There are a two others:

Package:        lars
Version:        0.9-4
Date:           2003-05-16
Title:          Least Angle Regression, Lasso and Forward Stagewise
Author:         Trevor Hastie and Brad Efron

Maintainer:     Trevor Hastie


Package: multinomRob
Version: 1.1
Date: 2004/03/03
Title: Robust Estimation of Overdispersed Multinomial Regression Models
Author: Walter R. Mebane, Jr., Jasjeet Singh Sekhon

Maintainer: Jasjeet Singh Sekhon


So, something has changed at CRAN, near midnight BST.


On Fri, 23 Apr 2004, Jan de Leeuw wrote:

> I see something new and unexpected here.
> 
>  > update.packages()
> trying URL `http://cran.r-project.org/src/contrib/PACKAGES'
> Content type `text/plain; charset=iso-8859-1' length 163467 bytes
> opened URL
> .......... .......... .......... .......... ..........
> .......... .......... .......... .......... ..........
> .......... .......... .......... .......... ..........
> .........
> downloaded 159Kb
> 
> Error in if (any(ok) && any(package.dependencies(available[ok, ], check  
> = TRUE))) { :
>          missing value where TRUE/FALSE needed
> 
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical  
> Software
> US mail: 8130 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>    
> ------------------------------------------------------------------------ 
> -------------------------
>            No matter where you go, there you are. --- Buckaroo Banzai
>                     http://gifi.stat.ucla.edu/sounds/nomatter.au
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Sat Apr 24 10:15:45 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Apr 24 10:15:52 2004
Subject: [Rd] Weirdness with choose.files on Microsoft Windows (PR#6818)
In-Reply-To: <20040423215556.E563CEFC0@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404240859260.17418-100000@gannet.stats>

The problem is that a buffer is not being zeroed, so you have part of the 
previous filename.  I don't even get that far as the first read is 
incorrect for me.

The code is plain wrong for multi=FALSE as the return format of
GetOpenFileName is different.

Fixed for R 1.9.1.


On Fri, 23 Apr 2004 kwright@eskimo.com wrote:

> Full_Name: Kevin Wright
> Version: 1.8.0
> OS: Windows 95
> Submission from: (NULL) (170.54.59.160)
> 
> 
> 
> This bug also happens to me using R 1.9.0 on Windows 2000.
> 
> Took me a long time to create a reproducible bug, but I think I have succeeded. 
> I suspect my test function has a bug, but I don't see anything wrong.  Plus, the
> bug only shows up when selecting certain filenames.  Nearest I can speculate,
> choose.files becomes confused after a filename that has capital letters and
> numbers has been chosen.  Sounds crazy and I'd like to know more, but
> choose.files is mostly .Internal code.
> 
> First, create two CSV files.
> 
> library(nlme)
> data(Oats)
> write.table(Oats,"c:/oats.csv",sep=",")
> write.table(Oats,"c:/C20oats.csv",sep=",")
> 
> Quit R and restart.  Follow the steps below.  Select oats.csv the first 4 times,
> then select C20oats.csv and then select oats.csv .  Notice how the filename is
> corrupted the final  time.
> 
> 
> test <- function(){
>      cat("press ENTER for a gui file selector\n")
>      gas.filename<-readline()
>      if(gas.filename=="")
>        gas.filename <- choose.files("*.csv",multi=FALSE,caption="Hi")
>      if(file.exists(gas.filename)){
>        cat("Reading ",gas.filename,"\n")
>        DFgas<-read.csv(gas.filename)
>      }
>      else
>        cat("The file",gas.filename," cannot be found\n")
>  
>  
>      cat("press ENTER for a gui file selector\n")
>      nir.filename<-readline()
>      if(nir.filename=="")
>        nir.filename <- choose.files("*.csv",multi=FALSE,
>                                     caption="Choose one gas CSV file")
>      if(file.exists(nir.filename)){
>        cat("Reading ",nir.filename,"\n")
>        DFnir<-read.csv(nir.filename)
>      }
>      else
>        cat("The file", nir.filename," cannot be found\n")      
>        
>  }
> 
> > test()
> press ENTER for a gui file selector
> 
> Reading  C:\oats.csv 
> press ENTER for a gui file selector
> 
> Reading  C:\oats.csv 
> > test()
> press ENTER for a gui file selector
> 
> Reading  C:\oats.csv 
> press ENTER for a gui file selector
> 
> Reading  C:\oats.csv 
> > test()
> press ENTER for a gui file selector
> 
> Reading  C:\C20oats.csv 
> press ENTER for a gui file selector
> 
> The file C:\oats.csv\sv  cannot be found
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Friedrich.Leisch at ci.tuwien.ac.at  Sat Apr 24 10:34:29 2004
From: Friedrich.Leisch at ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Sat Apr 24 10:34:30 2004
Subject: [Rd] R-devel from rsync 04/23
In-Reply-To: <Pine.LNX.4.44.0404240819410.17368-100000@gannet.stats>
References: <6DE3ACF4-95B4-11D8-B6A9-000A95A67E82@stat.ucla.edu>
	<Pine.LNX.4.44.0404240819410.17368-100000@gannet.stats>
Message-ID: <16522.9877.891049.506930@celebrian.ci.tuwien.ac.at>


>>>>> On Sat, 24 Apr 2004 08:27:19 +0100 (BST),
>>>>> Prof Brian Ripley (PBR) wrote:

  > But it also happens in 1.9.0 (always worth checking the current release, 
  > surely?)

  > Try CRAN.packages()[121,]

  > The CRAN PACKAGES file contains

  > Package: haplo.score
  > Version: 1.0.2
  > Date: 2002-09-13
  > Title: Score Tests for Association of Traits with Haplotypes when
  >   Linkage Phase is Ambiguous.
  > Author: Charles M. Rowland, David E. Tines, and Daniel J. Schaid
  >  .  R version translation by Gregory R. Warnes

  > Maintainer: Gregory R. Warnes
  > ....

  > and that blank line should not be there.  There are a two others:

[...]

  > So, something has changed at CRAN, near midnight BST.


Sorry, my fault. I changed the index creation script to remove all
email adresses in order to reduce the amount of spam package authors
get, and forgot in one place to take care of the possibility of empty
lines. Should be fixed now.

Best,
Fritz

-- 
-------------------------------------------------------------------
                        Friedrich Leisch 
Institut f?r Statistik                     Tel: (+43 1) 58801 10715
Technische Universit?t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra?e 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch

From aa056 at chebucto.ns.ca  Sat Apr 24 13:32:29 2004
From: aa056 at chebucto.ns.ca (George N. White III)
Date: Sat Apr 24 13:32:53 2004
Subject: [Rd] is.na(valid_date) too often true on SGI MIPS (PR#6814)
In-Reply-To: <Pine.LNX.4.44.0404232235430.13187-100000@gannet.stats>
References: <Pine.LNX.4.44.0404232235430.13187-100000@gannet.stats>
Message-ID: <Pine.SGI.4.58.0404240806000.184749@montigo.bio.dfo.ca>

On Fri, 23 Apr 2004, Prof Brian Ripley wrote:

> On Fri, 23 Apr 2004, George N. White III wrote:
>
> > On Fri, 23 Apr 2004, Prof Brian Ripley wrote:
> >
> > > I'm sorry, but this is completely unreproducible, and the second you say
> > > is true you quote as false.
> >
> > Not sure what you mean -- are you saying "make check" passes on
> > other Irix systems?
>
> We don't have an Irix system on which they fail _AND_ your examples
> are not in the R sources. N.B. as.Date and is.na(strptime()) are not the
> same code, and your second example is still not explained.

I assume the second example refers to the NA+NaN vs NaN+NA, evidence that
the system is not doing arithmetic the same way it is done by mainstream
platforms.

> However, you reported to R bugs, not to Irix bugs, and no other R system
> has shown this behaviour.  So the finger is pointing elsewhere.

It would be surprising if this isn't another of many SGI foibles, but the
sad reality is that SGI goes their own way and you either find a way to
live with them or switch to a less idiosyncratic platform.  I'd be
grateful for a hint as to which compilers/options work for Irix.

SGI doesn't compete in the mainstream market, and would certainly be out
of business if it was easy to move code between Irix and the mainstream --
the only reason we continue to use Irix is legacy applications created on
Irix.

--
George N. White III  <aa056@chebucto.ns.ca>
  Head of St. Margarets Bay, Nova Scotia, Canada

From aa056 at chebucto.ns.ca  Sat Apr 24 13:33:17 2004
From: aa056 at chebucto.ns.ca (aa056@chebucto.ns.ca)
Date: Sat Apr 24 13:33:21 2004
Subject: [Rd] is.na(valid_date) too often true on SGI MIPS (PR#6814)
Message-ID: <20040424113317.32CCEEC61@slim.kubism.ku.dk>

On Fri, 23 Apr 2004, Prof Brian Ripley wrote:

> On Fri, 23 Apr 2004, George N. White III wrote:
>
> > On Fri, 23 Apr 2004, Prof Brian Ripley wrote:
> >
> > > I'm sorry, but this is completely unreproducible, and the second you say
> > > is true you quote as false.
> >
> > Not sure what you mean -- are you saying "make check" passes on
> > other Irix systems?
>
> We don't have an Irix system on which they fail _AND_ your examples
> are not in the R sources. N.B. as.Date and is.na(strptime()) are not the
> same code, and your second example is still not explained.

I assume the second example refers to the NA+NaN vs NaN+NA, evidence that
the system is not doing arithmetic the same way it is done by mainstream
platforms.

> However, you reported to R bugs, not to Irix bugs, and no other R system
> has shown this behaviour.  So the finger is pointing elsewhere.

It would be surprising if this isn't another of many SGI foibles, but the
sad reality is that SGI goes their own way and you either find a way to
live with them or switch to a less idiosyncratic platform.  I'd be
grateful for a hint as to which compilers/options work for Irix.

SGI doesn't compete in the mainstream market, and would certainly be out
of business if it was easy to move code between Irix and the mainstream --
the only reason we continue to use Irix is legacy applications created on
Irix.

--
George N. White III  <aa056@chebucto.ns.ca>
  Head of St. Margarets Bay, Nova Scotia, Canada

From ripley at stats.ox.ac.uk  Sat Apr 24 14:32:03 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Apr 24 14:32:09 2004
Subject: [Rd] is.na(valid_date) too often true on SGI MIPS (PR#6814)
In-Reply-To: <Pine.SGI.4.58.0404240806000.184749@montigo.bio.dfo.ca>
Message-ID: <Pine.LNX.4.44.0404241326570.24138-100000@gannet.stats>

On Sat, 24 Apr 2004, George N. White III wrote:

> On Fri, 23 Apr 2004, Prof Brian Ripley wrote:
> 
> > On Fri, 23 Apr 2004, George N. White III wrote:
> >
> > > On Fri, 23 Apr 2004, Prof Brian Ripley wrote:
> > >
> > > > I'm sorry, but this is completely unreproducible, and the second you say
> > > > is true you quote as false.
> > >
> > > Not sure what you mean -- are you saying "make check" passes on
> > > other Irix systems?
> >
> > We don't have an Irix system on which they fail _AND_ your examples
> > are not in the R sources. N.B. as.Date and is.na(strptime()) are not the
> > same code, and your second example is still not explained.
> 
> I assume the second example refers to the NA+NaN vs NaN+NA, evidence that
> the system is not doing arithmetic the same way it is done by mainstream
> platforms.

No. You claimed `"make check" fails in 2 places' and said the second was

> d<-strptime("1970/1/1", "%Y/%m/%d")
> is.na(d)
[1] FALSE
> d
[1] "1970-01-01"

and that is not an example of

> "make check" fails in 2 places due to is.na(..) returning TRUE for valid 
dates:

since 

1) It is not in make check  (nor is your first example)
2) The date is valid
3) is.na returns FALSE.

In short, I cannot see anything wrong about that example, and it 
seems it is you and not Irix and not R who has a problem with it.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From pietro2k at libero.it  Sat Apr 24 17:41:04 2004
From: pietro2k at libero.it (pietro2k@libero.it)
Date: Sat Apr 24 17:41:06 2004
Subject: [Rd] Re: Re: Re: Re:
In-Reply-To: <40356A1601DB465D@ims4a.libero.it>
Message-ID: <40356A1601DB465E@ims4a.libero.it>

Vi prego di contattarmi a questo nuovo indirizzo: pietro.bonacorsi@fastwebnet.it 

Grazie Pietro

From ripley at stats.ox.ac.uk  Sat Apr 24 18:50:52 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Apr 24 18:50:58 2004
Subject: [Rd] make fails with Sun Forte compiler (PR#6815)
In-Reply-To: <20040423180739.1C8B5EFBA@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404231923570.12976-100000@gannet.stats>

Why is this a bug report.  The instruction in R-admin work here with Sun 
Forte compilers.  However, you did not follow them.

On Fri, 23 Apr 2004 rsparapa@mcw.edu wrote:

> Full_Name: rodney sparapani
> Version: 1.9.0
> OS: Solaris 9
> Submission from: (NULL) (141.106.120.97)
> 
> 
> I'm following the instructions for the Sun Forte compiler.  I had success with
> 1.8.1 so I think the compiler settings are correct (config.site):
>      CC="cc -xarch=v8plusa"
>      CFLAGS="-xO5 -xlibmil -dalign"
>      F77="f95 -xarch=v8plusa"
>      FFLAGS="-xO5 -xlibmil -dalign"
>      CXX="CC -xarch=v8plusa"
>      CXXFLAGS="-xO5 -xlibmil -dalign"
> Actually, there is one thing that I didn't specify above, but I'm not sure how. 
> The Sun Performance library is a BLAS library.  In LAPACK, you specify it as 
> BLASLIB     ="-xlic_lib=sunperf"
> Is there a simple way to specify that in config.site?  Anyways, that's probably
> not the problem that I'm having, but if you have any advice...  
> Here's the real problem, make fails at:
> MAKE="make" R_LIBS= ../../../bin/R CMD INSTALL -l ../../../library foreign.tgz
> * Installing *source* package 'foreign' ...
> checking for gcc... make[3]: Entering directory `/tmp/R.INSTALL.8673/foreign'
> cc -xarch=v8plusa
> make[3]: Leaving directory `/tmp/R.INSTALL.8673/foreign'
> checking for C compiler default output... configure: error: C compiler cannot
> create executables
> See `config.log' for more details.
> error: configuration failed for package 'foreign': No such file or directory for
> reading errors.
> ** Removing '/fw/src/R/R-1.9.0/library/foreign'
> make[2]: *** [foreign.ts] Error 1
> make[2]: Leaving directory `/fw/src/R/R-1.9.0/src/library/Recommended'
> make[1]: *** [recommended-packages] Error 2
> make[1]: Leaving directory `/fw/src/R/R-1.9.0/src/library/Recommended'
> make: *** [stamp-recommended] Error 2
> 
> foreign seems to be having a compiler problem that other recommended packages
> did not.  Any ideas?
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Sat Apr 24 18:52:52 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat Apr 24 18:52:56 2004
Subject: [Rd] make fails with Sun Forte compiler (PR#6815)
In-Reply-To: <Pine.LNX.4.44.0404231923570.12976-100000@gannet.stats>
Message-ID: <Pine.LNX.4.44.0404241751240.24393-100000@gannet.stats>

Sorry, sent in error: this was an earlier draft that got interrupted and I
have already sent a more complete answer.

On Sat, 24 Apr 2004, Prof Brian Ripley wrote:

> Why is this a bug report.  The instruction in R-admin work here with Sun 
> Forte compilers.  However, you did not follow them.

That means the CC etc are different from those in R-admin.

> On Fri, 23 Apr 2004 rsparapa@mcw.edu wrote:
> 
> > Full_Name: rodney sparapani
> > Version: 1.9.0
> > OS: Solaris 9
> > Submission from: (NULL) (141.106.120.97)
> > 
> > 
> > I'm following the instructions for the Sun Forte compiler.  I had success with
> > 1.8.1 so I think the compiler settings are correct (config.site):
> >      CC="cc -xarch=v8plusa"
> >      CFLAGS="-xO5 -xlibmil -dalign"
> >      F77="f95 -xarch=v8plusa"
> >      FFLAGS="-xO5 -xlibmil -dalign"
> >      CXX="CC -xarch=v8plusa"
> >      CXXFLAGS="-xO5 -xlibmil -dalign"
> > Actually, there is one thing that I didn't specify above, but I'm not sure how. 
> > The Sun Performance library is a BLAS library.  In LAPACK, you specify it as 
> > BLASLIB     ="-xlic_lib=sunperf"
> > Is there a simple way to specify that in config.site?  Anyways, that's probably
> > not the problem that I'm having, but if you have any advice...  
> > Here's the real problem, make fails at:
> > MAKE="make" R_LIBS= ../../../bin/R CMD INSTALL -l ../../../library foreign.tgz
> > * Installing *source* package 'foreign' ...
> > checking for gcc... make[3]: Entering directory `/tmp/R.INSTALL.8673/foreign'
> > cc -xarch=v8plusa
> > make[3]: Leaving directory `/tmp/R.INSTALL.8673/foreign'
> > checking for C compiler default output... configure: error: C compiler cannot
> > create executables
> > See `config.log' for more details.
> > error: configuration failed for package 'foreign': No such file or directory for
> > reading errors.
> > ** Removing '/fw/src/R/R-1.9.0/library/foreign'
> > make[2]: *** [foreign.ts] Error 1
> > make[2]: Leaving directory `/fw/src/R/R-1.9.0/src/library/Recommended'
> > make[1]: *** [recommended-packages] Error 2
> > make[1]: Leaving directory `/fw/src/R/R-1.9.0/src/library/Recommended'
> > make: *** [stamp-recommended] Error 2
> > 
> > foreign seems to be having a compiler problem that other recommended packages
> > did not.  Any ideas?
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> > 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From phddas at yahoo.com  Sun Apr 25 00:24:11 2004
From: phddas at yahoo.com (phddas@yahoo.com)
Date: Sun Apr 25 00:24:15 2004
Subject: [Rd] package fdim slopeopt error (PR#6819)
Message-ID: <20040424222411.5D231EB66@slim.kubism.ku.dk>

Full_Name: Fred J.
Version: 1.8.1
OS: windows 2000
Submission from: (NULL) (203.26.24.216)


platform i386-pc-mingw32

the error can be duplicated as follows
> rt <- data.frame(8:15, 7:14, 6:13, 5:12, 4:11, 3:10, 2:9, 1:8)
> library(fdim)
> FD <- (fdim(rt,q=2))
Error in slopeopt(AllPoints, Alpha) : Object "LineP" not found

From edd at debian.org  Sun Apr 25 00:32:53 2004
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun Apr 25 00:32:55 2004
Subject: [Rd] Yahoo bug in tseries::get.hist.quote and its::priceIts
Message-ID: <20040424223253.GA6659@sonny.eddelbuettel.com>


Both get.hist.quote, and its derivative priceIts, rely on download.file() to
fetch financial data series from Yahoo! in .csv format. They allow for nice
interactive demonstrations of what one can do with R.

Unfortunately, both are currently broken as Yahoo! decided to add a somewhat
useless html comment at the end of the csv 'stream', breaking the regular
format of n rows with k columns.  Here is an example for the S&P500 index
since the beginning of the month (to keep it compact):

Date,Open,High,Low,Close,Volume,Adj. Close*
23-Apr-04,1140.81,1141.75,1134.89,1140.60,1820460032,1140.60
22-Apr-04,1122.01,1142.53,1121.98,1139.93,2147280000,1139.93
21-Apr-04,1119.24,1125.66,1116.07,1124.09,1995879936,1124.09
20-Apr-04,1137.60,1139.27,1118.09,1118.15,1806850048,1118.15
19-Apr-04,1132.81,1136.17,1129.87,1135.82,1374380032,1135.82
16-Apr-04,1133.86,1136.75,1126.92,1134.61,1723180032,1134.61
15-Apr-04,1130.45,1133.72,1120.85,1128.84,1895289984,1128.84
14-Apr-04,1122.44,1132.47,1122.33,1128.17,1682800000,1128.17
13-Apr-04,1145.20,1147.73,1127.72,1129.44,1616720000,1129.44
12-Apr-04,1141.98,1147.24,1139.32,1145.20,1194080000,1145.20
9-Apr-04,1149.73,1139.32,1139.32,1139.32,0,1139.32
8-Apr-04,1140.53,1148.91,1134.54,1139.32,1435520000,1139.32
7-Apr-04,1146.25,1148.16,1138.48,1140.53,1658200064,1140.53
6-Apr-04,1144.26,1150.57,1143.35,1148.16,1551449984,1148.16
5-Apr-04,1141.81,1150.57,1141.63,1150.57,1614749952,1150.57
2-Apr-04,1144.15,1144.73,1132.17,1141.81,2134489984,1141.81
1-Apr-04,1128.14,1135.53,1126.21,1132.17,1765560064,1132.17
<!-- chart2.finance.scd.yahoo.com uncompressed Sat Apr 24 15:27:40 PDT 2004 -->

Is there an _elegant and portable_ way of reading this with the last line?
I needed this, and used the somewhat clunky 

    data <- read.csv(destfile)
    unlink(destfile)
    data <- data[-(nlines-1),]          # skip very last line with commment

which uses nlines, which had already been computed (as has a offset of one
because of the header line).

I'd be happy to send this as a patch to tseries and its, but I have the
feeling we could do better.  How?

Thanks,  Dirk

-- 
The relationship between the computed price and reality is as yet unknown.  
                                             -- From the pac(8) manual page

From bates at stat.wisc.edu  Sun Apr 25 00:50:33 2004
From: bates at stat.wisc.edu (Douglas Bates)
Date: Sun Apr 25 00:50:37 2004
Subject: [Rd] Yahoo bug in tseries::get.hist.quote and its::priceIts
In-Reply-To: <20040424223253.GA6659@sonny.eddelbuettel.com>
References: <20040424223253.GA6659@sonny.eddelbuettel.com>
Message-ID: <6r7jw5at3a.fsf@bates4.stat.wisc.edu>

Dirk Eddelbuettel <edd@debian.org> writes:

> Both get.hist.quote, and its derivative priceIts, rely on download.file() to
> fetch financial data series from Yahoo! in .csv format. They allow for nice
> interactive demonstrations of what one can do with R.
> 
> Unfortunately, both are currently broken as Yahoo! decided to add a somewhat
> useless html comment at the end of the csv 'stream', breaking the regular
> format of n rows with k columns.  Here is an example for the S&P500 index
> since the beginning of the month (to keep it compact):
> 
> Date,Open,High,Low,Close,Volume,Adj. Close*
> 23-Apr-04,1140.81,1141.75,1134.89,1140.60,1820460032,1140.60
> 22-Apr-04,1122.01,1142.53,1121.98,1139.93,2147280000,1139.93
> 21-Apr-04,1119.24,1125.66,1116.07,1124.09,1995879936,1124.09
> 20-Apr-04,1137.60,1139.27,1118.09,1118.15,1806850048,1118.15
> 19-Apr-04,1132.81,1136.17,1129.87,1135.82,1374380032,1135.82
> 16-Apr-04,1133.86,1136.75,1126.92,1134.61,1723180032,1134.61
> 15-Apr-04,1130.45,1133.72,1120.85,1128.84,1895289984,1128.84
> 14-Apr-04,1122.44,1132.47,1122.33,1128.17,1682800000,1128.17
> 13-Apr-04,1145.20,1147.73,1127.72,1129.44,1616720000,1129.44
> 12-Apr-04,1141.98,1147.24,1139.32,1145.20,1194080000,1145.20
> 9-Apr-04,1149.73,1139.32,1139.32,1139.32,0,1139.32
> 8-Apr-04,1140.53,1148.91,1134.54,1139.32,1435520000,1139.32
> 7-Apr-04,1146.25,1148.16,1138.48,1140.53,1658200064,1140.53
> 6-Apr-04,1144.26,1150.57,1143.35,1148.16,1551449984,1148.16
> 5-Apr-04,1141.81,1150.57,1141.63,1150.57,1614749952,1150.57
> 2-Apr-04,1144.15,1144.73,1132.17,1141.81,2134489984,1141.81
> 1-Apr-04,1128.14,1135.53,1126.21,1132.17,1765560064,1132.17
> <!-- chart2.finance.scd.yahoo.com uncompressed Sat Apr 24 15:27:40 PDT 2004 -->
> 
> Is there an _elegant and portable_ way of reading this with the last line?

If you do not expect to encounter the "<" character in your data you
could try adding comment.char = "<" to your call to read.csv.

From p.dalgaard at biostat.ku.dk  Sun Apr 25 01:16:15 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Sun Apr 25 01:19:59 2004
Subject: [Rd] Yahoo bug in tseries::get.hist.quote and its::priceIts
In-Reply-To: <20040424223253.GA6659@sonny.eddelbuettel.com>
References: <20040424223253.GA6659@sonny.eddelbuettel.com>
Message-ID: <x2oeph2chs.fsf@biostat.ku.dk>

Dirk Eddelbuettel <edd@debian.org> writes:

> Both get.hist.quote, and its derivative priceIts, rely on download.file() to
> fetch financial data series from Yahoo! in .csv format. They allow for nice
> interactive demonstrations of what one can do with R.

Er, how does this affect get.hist.quote? I see some flakiness, but the
basic conversion appears to work:

>      spc <- get.hist.quote(instrument = "spc", start = "1998-01-01")
trying URL
`http://chart.yahoo.com/table.csv?s=spc&a=0&b=01&c=1998&d=3&e=24&f=2004&g=d&q=q&y=0&z=spc&x=.csv'
Error in download.file(url, destfile, method = method) :
        cannot open URL
`http://chart.yahoo.com/table.csv?s=spc&a=0&b=01&c=1998&d=3&e=24&f=2004&g=d&q=q&y=0&z=spc&x=.csv'
In addition: Warning message:
cannot open: HTTP status was `404 Not Found'
>      spc <- get.hist.quote(instrument = "spc", start = "1998-01-01")
trying URL
`http://chart.yahoo.com/table.csv?s=spc&a=0&b=01&c=1998&d=3&e=24&f=2004&g=d&q=q&y=0&z=spc&x=.csv'
Content type `application/octet-stream' length unknown
opened URL
.......... .......... .......... .......... ..........
.......... .......... ..
downloaded 72Kb

time series starts 1998-01-02
time series ends   2004-04-01

(Yes, that's the same URL, a few seconds later!) 

> Unfortunately, both are currently broken as Yahoo! decided to add a somewhat
> useless html comment at the end of the csv 'stream', breaking the regular
> format of n rows with k columns.  Here is an example for the S&P500 index
> since the beginning of the month (to keep it compact):
> 
> Date,Open,High,Low,Close,Volume,Adj. Close*
> 23-Apr-04,1140.81,1141.75,1134.89,1140.60,1820460032,1140.60
> 22-Apr-04,1122.01,1142.53,1121.98,1139.93,2147280000,1139.93
> 21-Apr-04,1119.24,1125.66,1116.07,1124.09,1995879936,1124.09
> 20-Apr-04,1137.60,1139.27,1118.09,1118.15,1806850048,1118.15
> 19-Apr-04,1132.81,1136.17,1129.87,1135.82,1374380032,1135.82
> 16-Apr-04,1133.86,1136.75,1126.92,1134.61,1723180032,1134.61
> 15-Apr-04,1130.45,1133.72,1120.85,1128.84,1895289984,1128.84
> 14-Apr-04,1122.44,1132.47,1122.33,1128.17,1682800000,1128.17
> 13-Apr-04,1145.20,1147.73,1127.72,1129.44,1616720000,1129.44
> 12-Apr-04,1141.98,1147.24,1139.32,1145.20,1194080000,1145.20
> 9-Apr-04,1149.73,1139.32,1139.32,1139.32,0,1139.32
> 8-Apr-04,1140.53,1148.91,1134.54,1139.32,1435520000,1139.32
> 7-Apr-04,1146.25,1148.16,1138.48,1140.53,1658200064,1140.53
> 6-Apr-04,1144.26,1150.57,1143.35,1148.16,1551449984,1148.16
> 5-Apr-04,1141.81,1150.57,1141.63,1150.57,1614749952,1150.57
> 2-Apr-04,1144.15,1144.73,1132.17,1141.81,2134489984,1141.81
> 1-Apr-04,1128.14,1135.53,1126.21,1132.17,1765560064,1132.17
> <!-- chart2.finance.scd.yahoo.com uncompressed Sat Apr 24 15:27:40 PDT 2004 -->
> 
> Is there an _elegant and portable_ way of reading this with the last line?
> I needed this, and used the somewhat clunky 
> 
>     data <- read.csv(destfile)
>     unlink(destfile)
>     data <- data[-(nlines-1),]          # skip very last line with commment
> 
> which uses nlines, which had already been computed (as has a offset of one
> because of the header line).

How about this?

> v <- readLines(url("http://chart.yahoo.com/table.csv?s=ibm&a=0&b=01&c=1998&d=3&e=24&f=2004&g=d&q=q&y=0&z=ibm&x=.csv"))
> x <- read.csv(textConnection(v[-grep("^<!",v)]))
> str(x)
`data.frame':   1586 obs. of  7 variables:
 $ Date       : Factor w/ 1586 levels "1-Apr-02","1-Ap..",..: 786 732 681 629 524 368 315 263 210 157 ...
 $ Open       : num  91.0 90.5 91.2 92.0 91.9 ...
 $ High       : num  91.6 91.5 91.4 92.5 92.3 ...
 $ Low        : num  90.4 89.7 90.7 90.7 91.7 ...
 $ Close      : num  91.3 90.7 91.3 90.7 91.9 ...
 $ Volume     : int  5063200 7988000 4623400 4260200 4159400 1111800 6844200 5316300 5013600 3112600 ...
 $ Adj..Close.: num  91.3 90.7 91.3 90.7 91.9 ...


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From edd at debian.org  Sun Apr 25 01:51:55 2004
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun Apr 25 01:51:57 2004
Subject: [Rd] Yahoo bug in tseries::get.hist.quote and its::priceIts
In-Reply-To: <x2oeph2chs.fsf@biostat.ku.dk>
References: <20040424223253.GA6659@sonny.eddelbuettel.com>
	<x2oeph2chs.fsf@biostat.ku.dk>
Message-ID: <20040424235155.GA7317@sonny.eddelbuettel.com>

On Sun, Apr 25, 2004 at 01:16:15AM +0200, Peter Dalgaard wrote:
> Dirk Eddelbuettel <edd@debian.org> writes:
> 
> > Both get.hist.quote, and its derivative priceIts, rely on download.file() to
> > fetch financial data series from Yahoo! in .csv format. They allow for nice
> > interactive demonstrations of what one can do with R.
> 
> Er, how does this affect get.hist.quote? I see some flakiness, but the
> basic conversion appears to work:

Ah, yes, my bad. I was working with priceIts, and it flakes out as its fails
on the NA the comment turns into:

> spc <- priceIts(instrument = "spc", start = "1998-01-01")
Error in validObject(.Object) : Invalid "its" object: Missing values in dates

Doug's suggestion of simply using '<' as the comment char is good. I was so
fixated on explaining '<!--' as one that I didn't think of '<'.

But ...

> How about this?
> 
> > v <- readLines(url("http://chart.yahoo.com/table.csv?s=ibm&a=0&b=01&c=1998&d=3&e=24&f=2004&g=d&q=q&y=0&z=ibm&x=.csv"))
> > x <- read.csv(textConnection(v[-grep("^<!",v)]))

that wins the price. That is pretty much what I was thinking of. Neato.
Doesn't rely on the position of '<!--' within the file, and is less likely
to trigger a false positive as hunting for '<' is.

Thanks!

Dirk

-- 
The relationship between the computed price and reality is as yet unknown.  
                                             -- From the pac(8) manual page

From shitao at hotmail.com  Sun Apr 25 05:09:30 2004
From: shitao at hotmail.com (Tao Shi)
Date: Sun Apr 25 05:09:34 2004
Subject: [Rd] a simple suggestion for the next version of R windows
Message-ID: <Sea2-F58jM5SBGzojZN0004ea05@hotmail.com>

Is it possible to replace the word "R Console" on the title bar (is it what 
it's called? It's the blue area above menu bar) with the name of the work 
space file you're using or loaded, so people who are runing multple R 
sessions at same time can identify them immediately.  I'm using 1.9.0 in SDI 
mode.

Thanks,

...Tao

_________________________________________________________________
Is your PC infected? Get a FREE online computer virus scan from McAfee 
Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963

From andy_liaw at merck.com  Sun Apr 25 05:10:53 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Sun Apr 25 05:11:17 2004
Subject: [Rd] package fdim slopeopt error (PR#6819)
Message-ID: <3A822319EB35174CA3714066D590DCD504AF7C79@usrymx25.merck.com>

Please read the last paragraph of
http://cran.r-project.org/doc/FAQ/R-FAQ.html#How%20to%20report%20a%20bug.

Andy

> From: phddas@yahoo.com
> 
> Full_Name: Fred J.
> Version: 1.8.1
> OS: windows 2000
> Submission from: (NULL) (203.26.24.216)
> 
> 
> platform i386-pc-mingw32
> 
> the error can be duplicated as follows
> > rt <- data.frame(8:15, 7:14, 6:13, 5:12, 4:11, 3:10, 2:9, 1:8)
> > library(fdim)
> > FD <- (fdim(rt,q=2))
> Error in slopeopt(AllPoints, Alpha) : Object "LineP" not found
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
>

From andy_liaw at merck.com  Sun Apr 25 05:18:06 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Sun Apr 25 05:18:23 2004
Subject: [Rd] a simple suggestion for the next version of R windows
Message-ID: <3A822319EB35174CA3714066D590DCD504AF7C7A@usrymx25.merck.com>

I don't see how this can work.  I frequently run only one R session (also in
SDI), but change working directories several times during the session, with
or without loading the workspace files in those directories, depending on
what I need to do.  I don't think the Window title can change every time I
do setwd("somewhereElse"); load(".RData").

One possibility that could probably help you is to change the R command
prompt from "> " to the current working directory plus "> ".  I believe this
can be done with the taskCallbackManager().

Andy

> From: Tao Shi
> 
> Is it possible to replace the word "R Console" on the title 
> bar (is it what 
> it's called? It's the blue area above menu bar) with the name 
> of the work 
> space file you're using or loaded, so people who are runing multple R 
> sessions at same time can identify them immediately.  I'm 
> using 1.9.0 in SDI 
> mode.
> 
> Thanks,
> 
> ...Tao
> 
> _________________________________________________________________
> Is your PC infected? Get a FREE online computer virus scan 
> from McAfee(r) 
> Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments,...{{dropped}}

From shitao at hotmail.com  Sun Apr 25 05:34:47 2004
From: shitao at hotmail.com (Tao Shi)
Date: Sun Apr 25 05:34:54 2004
Subject: [Rd] a simple suggestion for the next version of R windows
Message-ID: <Sea2-F34GykvlK6ZuAw000464b1@hotmail.com>

Hi, Andy:

Thanks!  I think it also depends on people's working hobby.

What you suggested is a good way around it.  But I'm still thinking since 
the R window already has the big blue R logo to identify itself, the word "R 
console" is really redundant and could be replaced by something more 
informative.  Not nesessarly everytime you change to a new diretory, you 
need to change to a new identifier, but at least the every first .RData file 
you loaded.  I don't know.......  Something along that line.  It will be 
very helpful when you use Alt+Tab to move between windows, b/c all you see 
are "R console"s.......

...Tao


----Original Message Follows----
From: "Liaw, Andy" <andy_liaw@merck.com>
To: "'Tao Shi'" <shitao@hotmail.com>,r-help-request@stat.math.ethz.ch
CC: r-devel@stat.math.ethz.ch
Subject: RE: [Rd] a simple suggestion for the next version of R windows
Date: Sat, 24 Apr 2004 23:18:06 -0400

I don't see how this can work.  I frequently run only one R session (also in
SDI), but change working directories several times during the session, with
or without loading the workspace files in those directories, depending on
what I need to do.  I don't think the Window title can change every time I
do setwd("somewhereElse"); load(".RData").

One possibility that could probably help you is to change the R command
prompt from "> " to the current working directory plus "> ".  I believe this
can be done with the taskCallbackManager().

Andy

 > From: Tao Shi
 >
 > Is it possible to replace the word "R Console" on the title
 > bar (is it what
 > it's called? It's the blue area above menu bar) with the name
 > of the work
 > space file you're using or loaded, so people who are runing multple R
 > sessions at same time can identify them immediately.  I'm
 > using 1.9.0 in SDI
 > mode.
 >
 > Thanks,
 >
 > ...Tao
 >
 > _________________________________________________________________
 > Is your PC infected? Get a FREE online computer virus scan
 > from McAfee(r)
 > Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963
 >
 > ______________________________________________
 > R-devel@stat.math.ethz.ch mailing list
 > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
 >
 >


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments,...{{dropped}}

From ripley at stats.ox.ac.uk  Sun Apr 25 08:59:15 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun Apr 25 08:59:22 2004
Subject: [Rd] a simple suggestion for the next version of R windows
In-Reply-To: <Sea2-F34GykvlK6ZuAw000464b1@hotmail.com>
Message-ID: <Pine.LNX.4.44.0404250739060.572-100000@gannet.stats>

I don't see how it can work, period.  The `name of the workspace file' is
always .Rdata unless you loaded it from the RGui menu.  *Perhaps* the
suggestion was to give the working directory, but that is a different
concept.

There *is* a need to identify the window.  In either an MDI or SDI session
there can be console plus graphics windows, pagers and editors.  In SDI,
they appear as separate items (all with the same icon) on the task bar and
one does need to know which is which -- that is one of the main purposes
of the window title.   BTW, that icon is usually far from `big blue' on 
high-resolution screens and can be quite inconspicuous, especially if the 
background colour is blue (as it is in the standard XP schemes).

I suspect it is really unusual to run more than one R session in different
consoles, and when I do I know which is which from their screen
positioning.  I do more often run multiple Rterm.exe, and the same comment
applies there (they change the terminal title to `Rterm' and don't change
the icon).

What might be useful is to implement a setWindowTitle() function, which
append a string (default the current working directory?) to the title
(still keeping `R console' or `Rterm').

Finally, please do not post to both R-help-request (that's for
subscriptions etc so I guess you meant R-help) and R-devel.  There is a
specific address for comments on R for Windows, and it is in the README,
etc:

Feedback
========

Please send comments and bug reports to

        R-windows@r-project.org


On Sun, 25 Apr 2004, Tao Shi wrote:

> Hi, Andy:
> 
> Thanks!  I think it also depends on people's working hobby.
> 
> What you suggested is a good way around it.  But I'm still thinking since 
> the R window already has the big blue R logo to identify itself, the word "R 
> console" is really redundant and could be replaced by something more 
> informative.  Not nesessarly everytime you change to a new diretory, you 
> need to change to a new identifier, but at least the every first .RData file 
> you loaded.  I don't know.......  Something along that line.  It will be 
> very helpful when you use Alt+Tab to move between windows, b/c all you see 
> are "R console"s.......
> 
> ...Tao
> 
> 
> ----Original Message Follows----
> From: "Liaw, Andy" <andy_liaw@merck.com>
> To: "'Tao Shi'" <shitao@hotmail.com>,r-help-request@stat.math.ethz.ch
> CC: r-devel@stat.math.ethz.ch
> Subject: RE: [Rd] a simple suggestion for the next version of R windows
> Date: Sat, 24 Apr 2004 23:18:06 -0400
> 
> I don't see how this can work.  I frequently run only one R session (also in
> SDI), but change working directories several times during the session, with
> or without loading the workspace files in those directories, depending on
> what I need to do.  I don't think the Window title can change every time I
> do setwd("somewhereElse"); load(".RData").

It could -- it could display the current working directory.

> One possibility that could probably help you is to change the R command
> prompt from "> " to the current working directory plus "> ".  I believe this
> can be done with the taskCallbackManager().
> 
> Andy
> 
>  > From: Tao Shi
>  >
>  > Is it possible to replace the word "R Console" on the title
>  > bar (is it what
>  > it's called? It's the blue area above menu bar) with the name
>  > of the work
>  > space file you're using or loaded, so people who are runing multple R
>  > sessions at same time can identify them immediately.  I'm
>  > using 1.9.0 in SDI
>  > mode.
>  >
>  > Thanks,
>  >
>  > ...Tao


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From kjetil at acelerate.com  Sun Apr 25 20:45:23 2004
From: kjetil at acelerate.com (kjetil@acelerate.com)
Date: Sun Apr 25 20:45:27 2004
Subject: [Rd] docu typelet in ?lm
Message-ID: <408BCF03.31413.51C8A5@localhost>

?lm has

A formula was an implied intercept term

should probably be

A formula has an implied intercept term

Kjetil Halvorsen

From dmurdoch at pair.com  Sun Apr 25 21:30:19 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Sun Apr 25 21:30:23 2004
Subject: [Rd] docu typelet in ?lm
In-Reply-To: <408BCF03.31413.51C8A5@localhost>
References: <408BCF03.31413.51C8A5@localhost>
Message-ID: <od4o80p015b27snste8s919via8g4e4784@4ax.com>

On Sun, 25 Apr 2004 14:45:23 -0400, kjetil@acelerate.com wrote:

>?lm has
>
>A formula was an implied intercept term
>
>should probably be
>
>A formula has an implied intercept term

Fixed in r-patched.  Thanks!

Duncan Murdoch

From suporte at vitoria.es.gov.br  Sun Apr 25 21:37:01 2004
From: suporte at vitoria.es.gov.br (PMV - Servidor de =?ISO-8859-1?Q?AntiV=EDrus?=)
Date: Sun Apr 25 21:37:21 2004
Subject: [Rd] [Alerta de
 =?iso-8859-1?q?V=EDrus=5D_W32=2ENetsky=2EB=40mm_encont?=
 =?iso-8859-1?q?rado_no_email_something_for_you?=
Message-ID: <OF09F7D2E6.746834FB-ON03256E81.006BC2AC@vitoria.es.gov.br>






Prezado(a) r-devel@lists.r-project.org,
O e-mail something for you enviado por voc (ou automaticamente por algum
vrus) estava com o arquivo document.zip anexo infectado pelo vrus
W32.Netsky.B@mm.
Favor entrar em contato com o suporte de sua Empresa ou atualizar o seu
software de AntiVrus.
Obs: Esta mensagem foi enviada automaticamente pelo servidor de AntiVrus
da Prefeitura Municipal de Vitria.
------------------------------------------------------------------------------------

Servio de Suporte da Prefeitura Municipal de Vitria
------------------------------------------------------------------------------------

Origem da mensagem enviada:
from 201008150046.user.veloxzone.com.br ([201.8.150.46])          by
notes.vitoria.es.gov.br (Lotus Domino Release 6.5)          with SMTP id
2004042516365908-78064 ;          Sun, 25 Apr 2004 16:36:59 -0300
	[[alternative HTML version deleted]]

From phddas at yahoo.com  Sun Apr 25 23:36:11 2004
From: phddas at yahoo.com (Fred J.)
Date: Sun Apr 25 23:36:19 2004
Subject: [Rd] package fdim slopeopt error (PR#6819)
In-Reply-To: <3A822319EB35174CA3714066D590DCD504AF7C79@usrymx25.merck.com>
Message-ID: <20040425213611.94336.qmail@web20512.mail.yahoo.com>

thanks Andy 
last paragraph of the link you indicated 
" Bug reports on contributed packages should perhaps
be sent to the package maintainer rather than to
R-bugs. "
the maintainer (Francisco Javier Martinez de Pison.
francisco.martinez@dim.unirioja.es) has a bad email
address and therefore can't be reached.

thanks
Fred J.

--- "Liaw, Andy" <andy_liaw@merck.com> wrote:
> Please read the last paragraph of
>
http://cran.r-project.org/doc/FAQ/R-FAQ.html#How%20to%20report%20a%20bug.
> 
> Andy
>

From andy_liaw at merck.com  Mon Apr 26 01:55:22 2004
From: andy_liaw at merck.com (Liaw, Andy)
Date: Mon Apr 26 01:55:49 2004
Subject: [Rd] package fdim slopeopt error (PR#6819)
Message-ID: <3A822319EB35174CA3714066D590DCD504AF7C7D@usrymx25.merck.com>

> From: Fred J. [mailto:phddas@yahoo.com] 
> 
> thanks Andy 
> last paragraph of the link you indicated 
> " Bug reports on contributed packages should perhaps
> be sent to the package maintainer rather than to
> R-bugs. "
> the maintainer (Francisco Javier Martinez de Pison.
> francisco.martinez@dim.unirioja.es) has a bad email
> address and therefore can't be reached.

Then the package will probably get the "orphaned" status.  If/when it no
longer passes package checks for new version of R, it will disappear from
the main CRAN directory.

Basically the package author/maintainer is the only person who can supply
patched version of the package, and probably the best qualified person to do
so, too.  There's no use filing to R-bugs for bugs in contributed packages.
Do you really expect the R Core developers to fix bugs in contributed
packages?

Andy
 
> thanks
> Fred J.
> 
> --- "Liaw, Andy" <andy_liaw@merck.com> wrote:
> > Please read the last paragraph of
> >
> http://cran.r-project.org/doc/FAQ/R-FAQ.html#How%20to%20report
%20a%20bug.
> 
> Andy
> 



	
		
__________________________________
Do you Yahoo!?
Yahoo! Photos: High-quality 4x6 digital prints for 25?
http://photos.yahoo.com/ph/print_splash

From p.dalgaard at biostat.ku.dk  Mon Apr 26 02:07:22 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Mon Apr 26 02:11:11 2004
Subject: [Rd] package fdim slopeopt error (PR#6819)
In-Reply-To: <3A822319EB35174CA3714066D590DCD504AF7C7D@usrymx25.merck.com>
References: <3A822319EB35174CA3714066D590DCD504AF7C7D@usrymx25.merck.com>
Message-ID: <x2hdv7bo05.fsf@biostat.ku.dk>

"Liaw, Andy" <andy_liaw@merck.com> writes:

> > From: Fred J. [mailto:phddas@yahoo.com] 
> > 
> > thanks Andy 
> > last paragraph of the link you indicated 
> > " Bug reports on contributed packages should perhaps
> > be sent to the package maintainer rather than to
> > R-bugs. "
> > the maintainer (Francisco Javier Martinez de Pison.
> > francisco.martinez@dim.unirioja.es) has a bad email
> > address and therefore can't be reached.
> 
> Then the package will probably get the "orphaned" status.  If/when it no
> longer passes package checks for new version of R, it will disappear from
> the main CRAN directory.
> 
> Basically the package author/maintainer is the only person who can supply
> patched version of the package, and probably the best qualified person to do
> so, too.  There's no use filing to R-bugs for bugs in contributed packages.
> Do you really expect the R Core developers to fix bugs in contributed
> packages?

Actually, the bug repository has a folder called Add-ons into which we
can file reports on externally maintained packages. However, we
haven't had much input from package maintainers about the status of
these reports, and that is why we tend to prefer that users contact
maintainers directly. Perhaps with a better bug management system....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From p.murrell at auckland.ac.nz  Mon Apr 26 05:53:49 2004
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Mon Apr 26 05:55:35 2004
Subject: [Rd] trellis.device in .First (PR#6812)
References: <Pine.LNX.4.44.0404230741440.1166-100000@gannet.stats>	<Pine.LNX.4.44.0404230809390.1166-100000@gannet.stats>
	<16520.53902.315687.116655@gargle.gargle.HOWL>
Message-ID: <408C87CD.40703@stat.auckland.ac.nz>

Hi


Martin Maechler wrote:
>>>>>>"BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk>
>>>>>>    on Fri, 23 Apr 2004 08:21:34 +0100 (BST) writes:
>>>>>
> 
> 	  <........>
> 
>     BDR> It is a matter for discussion (with the lattice
>     BDR> maintainer) whether trellis.device should help you out
>     BDR> here by importing the devices from package graphics.  I
>     BDR> think adding (conditionalized on the platform)
> 
>     BDR> importFrom(graphics, windows, postscript, pdf, pictex,
>     BDR>            win.metafile, win.print, png, jpeg, bmp, xfig, bitmap)
> 
>     BDR> to its NAMESPACE might be worth considering.
> 
>     BDR> Alternatively, device.call <- get(device) could be put
>     BDR> in a try call, followed by a try on
>     BDR> getFromNamespace("graphics", device).
> 
> That's a very good idea, I'd support quite a bit.
> 
> I think I would go with the alternative approach
> (where you probably meant to say  device <- getOption("device") first?),
> since the importFrom(..) approach leeds to a somewhat tedious maintenance
> effort to keep up the list of available devices for the different platforms
> (For MacOS X one has to include quartz() only in the situations
>  where it's available) where as Deepayan (the lattice
> maintainer) could rely on getOption("device") to be ok
> {and as you proposed would be on guard using try() or its newer siblings}.


I probably should have thought of this sooner, but anyway ...
Perhaps a better solution would be to split out another package called 
"devices".  Then both "graphics" and "grid" could require "devices" (so 
whenever you go to do any graphics you are guaranteed access to the 
default devices).

Paul


>     BDR> On Fri, 23 Apr 2004, Prof Brian Ripley wrote:
> 
>     >> 1) On the first point, please do read the NEWS file for R
>     >> 1.9.0.
>     >> 
>     >> .Rprofile and .First have always been run before the
>     >> default packages are loaded in .First.sys, to allow them
>     >> to be changed.
>     >> 
>     >> So this *is* a documented change in behaviour, not a bug.
>     >> If I do
>     >> 
>     >> .First <- function() {library(lattice); trellis.device()}
>     >> 
>     >> This happens on all platforms.  You need
>     >> 
>     >> .First <- function() {library(graphics);
>     >> library(lattice); trellis.device()}
>     >> 
>     >> That is true of starting any graphics device in .Rprofile
>     >> or .First.
> 
> 
>     BDR> -- Brian D. Ripley, ripley@stats.ox.ac.uk Professor of
>     BDR> Applied Statistics, http://www.stats.ox.ac.uk/~ripley/
>     BDR> University of Oxford, Tel: +44 1865 272861 (self) 1
>     BDR> South Parks Road, +44 1865 272866 (PA) Oxford OX1 3TG,
>     BDR> UK Fax: +44 1865 272595
> 
>     BDR> ______________________________________________
>     BDR> R-devel@stat.math.ethz.ch mailing list
>     BDR> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel


-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul@stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/

From ripley at stats.ox.ac.uk  Mon Apr 26 08:18:54 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Apr 26 08:19:01 2004
Subject: [Rd] trellis.device in .First (PR#6812)
In-Reply-To: <408C87CD.40703@stat.auckland.ac.nz>
Message-ID: <Pine.LNX.4.44.0404260712280.22842-100000@gannet.stats>

On Mon, 26 Apr 2004, Paul Murrell wrote:

> Hi
> 
> 
> Martin Maechler wrote:
> >>>>>>"BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk>
> >>>>>>    on Fri, 23 Apr 2004 08:21:34 +0100 (BST) writes:
> >>>>>
> > 
> > 	  <........>
> > 
> >     BDR> It is a matter for discussion (with the lattice
> >     BDR> maintainer) whether trellis.device should help you out
> >     BDR> here by importing the devices from package graphics.  I
> >     BDR> think adding (conditionalized on the platform)
> > 
> >     BDR> importFrom(graphics, windows, postscript, pdf, pictex,
> >     BDR>            win.metafile, win.print, png, jpeg, bmp, xfig, bitmap)
> > 
> >     BDR> to its NAMESPACE might be worth considering.
> > 
> >     BDR> Alternatively, device.call <- get(device) could be put
> >     BDR> in a try call, followed by a try on
> >     BDR> getFromNamespace("graphics", device).
> > 
> > That's a very good idea, I'd support quite a bit.
> > 
> > I think I would go with the alternative approach
> > (where you probably meant to say  device <- getOption("device") first?),
> > since the importFrom(..) approach leeds to a somewhat tedious maintenance
> > effort to keep up the list of available devices for the different platforms
> > (For MacOS X one has to include quartz() only in the situations
> >  where it's available) where as Deepayan (the lattice
> > maintainer) could rely on getOption("device") to be ok
> > {and as you proposed would be on guard using try() or its newer siblings}.
> 
> 
> I probably should have thought of this sooner, but anyway ...
> Perhaps a better solution would be to split out another package called 
> "devices".  Then both "graphics" and "grid" could require "devices" (so 
> whenever you go to do any graphics you are guaranteed access to the 
> default devices).

I am not sure it is better, but it is not something we can do for a few 
months (that is, not in a patchlevel release).  It's not quite that simple 
-- where would you put ps.options?  Presumably in devices, and then 
people would need to change their hooks again ....

Incidentally, I think the name `devices' is rather narrow-minded (as is
.Devices borrowed from S-PLUS).  They are _graphics_ devices and we might
one day want audio devices or even devices for other types of
visualization such as dynamic graphics.

Brian

> 
> Paul
> 
> 
> >     BDR> On Fri, 23 Apr 2004, Prof Brian Ripley wrote:
> > 
> >     >> 1) On the first point, please do read the NEWS file for R
> >     >> 1.9.0.
> >     >> 
> >     >> .Rprofile and .First have always been run before the
> >     >> default packages are loaded in .First.sys, to allow them
> >     >> to be changed.
> >     >> 
> >     >> So this *is* a documented change in behaviour, not a bug.
> >     >> If I do
> >     >> 
> >     >> .First <- function() {library(lattice); trellis.device()}
> >     >> 
> >     >> This happens on all platforms.  You need
> >     >> 
> >     >> .First <- function() {library(graphics);
> >     >> library(lattice); trellis.device()}
> >     >> 
> >     >> That is true of starting any graphics device in .Rprofile
> >     >> or .First.
> > 
> > 
> >     BDR> -- Brian D. Ripley, ripley@stats.ox.ac.uk Professor of
> >     BDR> Applied Statistics, http://www.stats.ox.ac.uk/~ripley/
> >     BDR> University of Oxford, Tel: +44 1865 272861 (self) 1
> >     BDR> South Parks Road, +44 1865 272866 (PA) Oxford OX1 3TG,
> >     BDR> UK Fax: +44 1865 272595
> > 
> >     BDR> ______________________________________________
> >     BDR> R-devel@stat.math.ethz.ch mailing list
> >     BDR> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> > 
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Mon Apr 26 08:23:58 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon Apr 26 08:24:06 2004
Subject: [Rd] package fdim slopeopt error (PR#6819)
In-Reply-To: <20040425213611.94336.qmail@web20512.mail.yahoo.com>
Message-ID: <Pine.LNX.4.44.0404260719140.22842-100000@gannet.stats>

On Sun, 25 Apr 2004, Fred J. wrote:

> thanks Andy 
> last paragraph of the link you indicated 
> " Bug reports on contributed packages should perhaps
> be sent to the package maintainer rather than to
> R-bugs. "
> the maintainer (Francisco Javier Martinez de Pison.
> francisco.martinez@dim.unirioja.es) has a bad email
> address and therefore can't be reached.

Well, he can't be reached through R-bugs either, and more importantly, he 
cannot deal with the entry in the R-bugs repository (only R-core members 
can alter it).  So it really was pointless sending a report on fdim to 
R-bugs.

You didn't mention that you had failed to contact the maintainer in your 
report.

> --- "Liaw, Andy" <andy_liaw@merck.com> wrote:
> > Please read the last paragraph of
> >
> http://cran.r-project.org/doc/FAQ/R-FAQ.html#How%20to%20report%20a%20bug.
> > 
> > Andy

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From l.bize at wanadoo.fr  Mon Apr 26 10:52:28 2004
From: l.bize at wanadoo.fr (l.bize@wanadoo.fr)
Date: Mon Apr 26 10:52:28 2004
Subject: [Rd] eventloop
Message-ID: <408CCDCC.8030602@wanadoo.fr>

Hello.
I'm writting a glx device and I've some performance problem with the 
eventloop registration system. The device is not refresh when there's no 
X event. That's problematic for animation and "smoothness" of display.

Should I use threads or fork the R process to get and independant
way to refresh my device ? Or do you know another way to refresh it ?

Thanks

	Laurent

From Autoresponder at lg.ehu.es  Mon Apr 26 11:19:40 2004
From: Autoresponder at lg.ehu.es (Autoresponder@lg.ehu.es)
Date: Mon Apr 26 11:19:44 2004
Subject: [Rd] Moderador zerbitzuaren aldaketa / Cambio servicio moderador
Message-ID: <200404260919.i3Q9Jecr017256@lgsx13.lg.ehu.es>

################################################################
######## HAU ERANTZUN AUTOMATIKO BAT DA . EZ ERANTZUN / ########
######## ESTA ES UNA RESPUESTA AUTOMATICA. NO RESPONDER ########
################################################################

Moderatzailaren zerbitzua aldatu da.
moderador@ehu.es helbidea ezin izango da gehiago erabili

Iragarki oholak zerbitzuari buruzko informazioa nahi baduzu 
jo helbide honetara:
 
             http://www.ehu.es/si/oholak.htm

################################################################

El servicio de moderador ha cambiado.
moderador@ehu.es ya no es una direcci?n v?lida.


Para encontrar informacion sobre el servicio de tablones de anuncios
revise la direccion:

            http://www.ehu.es/si/tablones.htm

################################################################

From Simon.Urbanek at math.uni-augsburg.de  Mon Apr 26 13:53:26 2004
From: Simon.Urbanek at math.uni-augsburg.de (Simon Urbanek)
Date: Mon Apr 26 13:53:31 2004
Subject: [Rd] eventloop
In-Reply-To: <408CCDCC.8030602@wanadoo.fr>
References: <408CCDCC.8030602@wanadoo.fr>
Message-ID: <539C6666-9778-11D8-9EF7-000A957CEFBA@math.uni-augsburg.de>

On Apr 26, 2004, at 10:52 AM, l.bize@wanadoo.fr wrote:

> Hello.
> I'm writting a glx device and I've some performance problem with the 
> eventloop registration system. The device is not refresh when there's 
> no X event. That's problematic for animation and "smoothness" of 
> display.

> Should I use threads or fork the R process to get and independant
> way to refresh my device ? Or do you know another way to refresh it ?

I doubt you can use fork, since that way you'll end up having two 
independent R sessions (well, you could use IPC to communicate with an 
external device, but that's what xGD does w/o the need of forking an 
entire R - but I can tell you that it's fairly slow :P).

If you need a timed refresh (e.g. fixed frame-rate) then you can use 
threads for that (i.e. running your GD in a separate thread - but 
you'll have to store the entire display list locally). There are a few 
strings attached, though: you must make sure that any R calls (and 
accessing anything related to R) are made only in the initial R thread 
(this is often non-trivial). Furthermore the building process can get 
quite complicated, since every unix has different thread libraries, 
different flags etc. Finally you have to take utmost care that you 
don't interfere with the X loop driven by R (I'm not even sure if it 
can be done), unless you want to replace the regular X11 device 
entirely. Also I'm told that there are library-related issues when 
loading a threaded module into non-thread app.
But, still, you can give it a shot :) We use threads successfully with 
R (although in a bit different setting - running R as one thread of a 
multi-threaded application), but the above issues are really important 
and very nasty to debug if something goes wrong. There's also a very 
nice post about R and threads by Luke Tierney somewhere in the archives 
;).

I didn't check the EL API recently, but I thought you can wake up the 
loop via fd or generate a timer event... that should do I'd think ... 
Also you didn't tell us exactly which of the many versions of R GUI 
(raw stdin, readline, Tcl/Tk, Gtk, ...) you actually mean - since they 
use different event loops ...

OT: Did you have a look at 
http://wsopuppenkiste.wiso.uni-goettingen.de/~dadler/rgl/ ? Although 
its' not really a GD, it provides a kind of OpenGL device for R ...

Cheers,
Simon

---
Simon Urbanek
Department of computer oriented statistics and data analysis
University of Augsburg
Universit?tsstr. 14
86135 Augsburg
Germany

Tel: +49-821-598-2236
Fax: +49-821-598-2200

Simon.Urbanek@Math.Uni-Augsburg.de
http://simon.urbanek.info

From jfox at mcmaster.ca  Mon Apr 26 16:40:10 2004
From: jfox at mcmaster.ca (John Fox)
Date: Mon Apr 26 16:40:15 2004
Subject: [Rd] rgl for Windows
Message-ID: <20040426144011.SCAN7116.tomts5-srv.bellnexxia.net@JohnDesktop8300>

Dear list members,

I think that it's a pity that there's no Windows binary for the rgl package
on CRAN. I understand that rgl doesn't compile with the standard Windows
tools and that there's a Windows binary on Daniel Adler's web site. But the
lack of an rgl binary on CRAN provides presents a potential obstacle to at
least some Windows users, such as many students in introductory courses. 

Is there a way to get an rgl binary onto CRAN (or would this just be too
much trouble)?

Regards,
 John

--------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario
Canada L8S 4M4
905-525-9140x23604
http://socserv.mcmaster.ca/jfox

From ligges at statistik.uni-dortmund.de  Mon Apr 26 16:49:26 2004
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon Apr 26 16:49:06 2004
Subject: [Rd] rgl for Windows
In-Reply-To: <20040426144011.SCAN7116.tomts5-srv.bellnexxia.net@JohnDesktop8300>
References: <20040426144011.SCAN7116.tomts5-srv.bellnexxia.net@JohnDesktop8300>
Message-ID: <408D2176.20604@statistik.uni-dortmund.de>

John Fox wrote:

> Dear list members,
> 
> I think that it's a pity that there's no Windows binary for the rgl package
> on CRAN. I understand that rgl doesn't compile with the standard Windows
> tools and that there's a Windows binary on Daniel Adler's web site. But the
> lack of an rgl binary on CRAN provides presents a potential obstacle to at
> least some Windows users, such as many students in introductory courses. 
> 
> Is there a way to get an rgl binary onto CRAN (or would this just be too
> much trouble)?

John,

there is a way. Daniel Adler and I have found a way to provide a version 
on CRAN. I think Daniel will upload such a version shortly ...

Best,
Uwe



> Regards,
>  John
> 
> --------------------------------
> John Fox
> Department of Sociology
> McMaster University
> Hamilton, Ontario
> Canada L8S 4M4
> 905-525-9140x23604
> http://socserv.mcmaster.ca/jfox
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

From jfox at mcmaster.ca  Mon Apr 26 16:57:37 2004
From: jfox at mcmaster.ca (John Fox)
Date: Mon Apr 26 16:57:41 2004
Subject: [Rd] rgl for Windows
In-Reply-To: <408D2176.20604@statistik.uni-dortmund.de>
Message-ID: <20040426145737.IPZI11589.tomts10-srv.bellnexxia.net@JohnDesktop8300>

Dear Uwe,

Thanks for the quick response -- rgl is an excellent extension to R.

Regards,
 John 

> -----Original Message-----
> From: Uwe Ligges [mailto:ligges@statistik.uni-dortmund.de] 
> Sent: Monday, April 26, 2004 9:49 AM
> To: John Fox
> Cc: r-devel@stat.math.ethz.ch; murdoch@stats.uwo.ca; dadler@gwdg.de
> Subject: Re: [Rd] rgl for Windows
> 
> John Fox wrote:
> 
> > Dear list members,
> > 
> > I think that it's a pity that there's no Windows binary for the rgl 
> > package on CRAN. I understand that rgl doesn't compile with the 
> > standard Windows tools and that there's a Windows binary on Daniel 
> > Adler's web site. But the lack of an rgl binary on CRAN provides 
> > presents a potential obstacle to at least some Windows 
> users, such as many students in introductory courses.
> > 
> > Is there a way to get an rgl binary onto CRAN (or would 
> this just be 
> > too much trouble)?
> 
> John,
> 
> there is a way. Daniel Adler and I have found a way to 
> provide a version on CRAN. I think Daniel will upload such a 
> version shortly ...
> 
> Best,
> Uwe
>

From Torsten.Hothorn at rzmail.uni-erlangen.de  Mon Apr 26 17:30:02 2004
From: Torsten.Hothorn at rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon Apr 26 17:30:18 2004
Subject: [Rd] Segfault: .Call and classes with logical slots
Message-ID: <Pine.LNX.4.51.0404261721500.13129@artemis.imbe.med.uni-erlangen.de>


Hi,

the following example aiming at a class containing a logical slot
segfaults under R-1.9.0 when `gctorture(on = TRUE)' is used:

Code code (dummy.c):

#include <Rdefines.h>

SEXP foo() {

    SEXP ans;

    PROTECT(ans = NEW_OBJECT(MAKE_CLASS("test")));
    SET_SLOT(ans, install("lgl"), allocVector(LGLSXP, 1));
    LOGICAL(GET_SLOT(ans, install("lgl")))[0] = TRUE;
    UNPROTECT(1);
    return(ans);
}

R code (dummy.R):

dyn.load("dummy.so")

setClass("test", representation = representation(lgl = "logical"))

a = .Call("foo")
a # OK

gctorture(on = TRUE)
a = .Call("foo")
gctorture(on = FALSE)
a # segfault

which gives

R>
R>
R> dyn.load("dummy.so")
R>
R> setClass("test", representation = representation(lgl = "logical"))
[1] "test"
R>
R> a = .Call("foo")
R> a
An object of class "test"
Slot "lgl":
[1] TRUE

R>
R> gctorture(on = TRUE)
R> a = .Call("foo")
R> gctorture(on = FALSE)
Segmentation fault

Best,

Torsten

R> version
         _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    1
minor    9.0
year     2004
month    04
day      12
language R
R>



 _______________________________________________________________________
|									|
|	Dr. rer. nat. Torsten Hothorn					|
|	Institut fuer Medizininformatik, Biometrie und Epidemiologie	|
|	Waldstrasse 6, D-91054 Erlangen, Deutschland			|
|	Tel: ++49-9131-85-22707	(dienstl.)				|
|	Fax: ++49-9131-85-25740						|
|	Email:  Torsten.Hothorn@rzmail.uni-erlangen.de			|
|       	PLEASE send emails cc to torsten@hothorn.de		|
|	Web: http://www.imbe.med.uni-erlangen.de/~hothorn		|
|_______________________________________________________________________|

From anders.holm at sociology.ku.dk  Mon Apr 26 20:32:04 2004
From: anders.holm at sociology.ku.dk (anders.holm@sociology.ku.dk)
Date: Mon Apr 26 20:32:07 2004
Subject: [Rd] invalid homedrive (PR#6827)
Message-ID: <20040426183204.968D7EFC4@slim.kubism.ku.dk>

Full_Name: Anders Holm
Version: 1.9.0 (and ealier)
OS: win XP
Submission from: (NULL) (62.243.242.208)


When Trying to run C:\Programmer\R\rw1090\bin\Rgui.exe either directly or
through clicking the R icon I get the message "fatal error: Invalid Homedrive".

I have previously been running R (up to 1.8.1) succesfully on the same machine
that I am currently getting this message.

It may be related to trying to install Sciviews mini set up

thanks in advance

anders

From Orfanato at sao.terra.com.br  Mon Apr 26 21:59:15 2004
From: Orfanato at sao.terra.com.br (Orfanato@sao.terra.com.br)
Date: Mon Apr 26 21:59:26 2004
Subject: [Rd] [Mensagem Automatica] Obrigado por escrever
Message-ID: <20040426195915.96CB23C97E@itajuba.terra.com.br>

Mensagem [Server Error (casalarnovorumo@terra.com.br)] recebida.

             Recebemos sua mensagem, e logo que pudermos estaremos lhe respondendo.

Um abra?o

From jmc at research.bell-labs.com  Mon Apr 26 23:19:03 2004
From: jmc at research.bell-labs.com (John Chambers)
Date: Mon Apr 26 23:19:21 2004
Subject: [Rd] Segfault: .Call and classes with logical slots
References: <Pine.LNX.4.51.0404261721500.13129@artemis.imbe.med.uni-erlangen.de>
Message-ID: <408D7CC7.3E753469@research.bell-labs.com>

I think you need to PROTECT the vector you're putting in the slot as
well as the overall object.  At any rate, the problem goes away for me
with the revised version of dummy.c below.  (Empirically, PROTECT'ing
the class definition didn't seem to be needed, but experience suggests
that too much protection  is better than too little.)

#include <Rdefines.h>

SEXP foo() {

    SEXP ans, cl, el;

    PROTECT(cl = MAKE_CLASS("test"));
    PROTECT(ans = NEW_OBJECT(cl));
    PROTECT(el = allocVector(LGLSXP, 1));
    SET_SLOT(ans, install("lgl"), el);
    LOGICAL(GET_SLOT(ans, install("lgl")))[0] = TRUE;
    UNPROTECT(3);
    return(ans);
}


Torsten Hothorn wrote:
> 
> Hi,
> 
> the following example aiming at a class containing a logical slot
> segfaults under R-1.9.0 when `gctorture(on = TRUE)' is used:
> 
> Code code (dummy.c):
> 
> #include <Rdefines.h>
> 
> SEXP foo() {
> 
>     SEXP ans;
> 
>     PROTECT(ans = NEW_OBJECT(MAKE_CLASS("test")));
>     SET_SLOT(ans, install("lgl"), allocVector(LGLSXP, 1));
>     LOGICAL(GET_SLOT(ans, install("lgl")))[0] = TRUE;
>     UNPROTECT(1);
>     return(ans);
> }
> 
> R code (dummy.R):
> 
> dyn.load("dummy.so")
> 
> setClass("test", representation = representation(lgl = "logical"))
> 
> a = .Call("foo")
> a # OK
> 
> gctorture(on = TRUE)
> a = .Call("foo")
> gctorture(on = FALSE)
> a # segfault
> 
> which gives
> 
> R>
> R>
> R> dyn.load("dummy.so")
> R>
> R> setClass("test", representation = representation(lgl = "logical"))
> [1] "test"
> R>
> R> a = .Call("foo")
> R> a
> An object of class "test"
> Slot "lgl":
> [1] TRUE
> 
> R>
> R> gctorture(on = TRUE)
> R> a = .Call("foo")
> R> gctorture(on = FALSE)
> Segmentation fault
> 
> Best,
> 
> Torsten
> 
> R> version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    1
> minor    9.0
> year     2004
> month    04
> day      12
> language R
> R>
> 
>  _______________________________________________________________________
> |                                                                       |
> |       Dr. rer. nat. Torsten Hothorn                                   |
> |       Institut fuer Medizininformatik, Biometrie und Epidemiologie    |
> |       Waldstrasse 6, D-91054 Erlangen, Deutschland                    |
> |       Tel: ++49-9131-85-22707 (dienstl.)                              |
> |       Fax: ++49-9131-85-25740                                         |
> |       Email:  Torsten.Hothorn@rzmail.uni-erlangen.de                  |
> |               PLEASE send emails cc to torsten@hothorn.de             |
> |       Web: http://www.imbe.med.uni-erlangen.de/~hothorn               |
> |_______________________________________________________________________|
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From dmurdoch at pair.com  Tue Apr 27 02:01:46 2004
From: dmurdoch at pair.com (dmurdoch@pair.com)
Date: Tue Apr 27 02:01:48 2004
Subject: [Rd] invalid homedrive (PR#6827)
Message-ID: <20040427000146.0D7C5EAE0@slim.kubism.ku.dk>

On Mon, 26 Apr 2004 20:32:04 +0200 (CEST), anders.holm@sociology.ku.dk
wrote:

>Full_Name: Anders Holm
>Version: 1.9.0 (and ealier)
>OS: win XP
>Submission from: (NULL) (62.243.242.208)
>
>
>When Trying to run C:\Programmer\R\rw1090\bin\Rgui.exe either directly or
>through clicking the R icon I get the message "fatal error: Invalid Homedrive".
>
>I have previously been running R (up to 1.8.1) succesfully on the same machine
>that I am currently getting this message.
>
>It may be related to trying to install Sciviews mini set up

This is caused by a bug in one of the Windows critical updates.
R-patched has a workaround; in the meantime, add 

"R_USER=c:/" 

(or use some other valid path) on your R command line (in the
shortcut), and the bug won't matter.

This has been discussed a lot in R-help.

Duncan Murdoch

From p.murrell at auckland.ac.nz  Tue Apr 27 02:07:30 2004
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Tue Apr 27 02:09:36 2004
Subject: [Rd] trellis.device in .First (PR#6812)
References: <Pine.LNX.4.44.0404260712280.22842-100000@gannet.stats>
Message-ID: <408DA442.5070408@stat.auckland.ac.nz>

Hi


Prof Brian Ripley wrote:
> On Mon, 26 Apr 2004, Paul Murrell wrote:
> 
> 
>>Hi
>>
>>
>>Martin Maechler wrote:
>>
>>>>>>>>"BDR" == Prof Brian Ripley <ripley@stats.ox.ac.uk>
>>>>>>>>   on Fri, 23 Apr 2004 08:21:34 +0100 (BST) writes:
>>>>>>>
>>>	  <........>
>>>
>>>    BDR> It is a matter for discussion (with the lattice
>>>    BDR> maintainer) whether trellis.device should help you out
>>>    BDR> here by importing the devices from package graphics.  I
>>>    BDR> think adding (conditionalized on the platform)
>>>
>>>    BDR> importFrom(graphics, windows, postscript, pdf, pictex,
>>>    BDR>            win.metafile, win.print, png, jpeg, bmp, xfig, bitmap)
>>>
>>>    BDR> to its NAMESPACE might be worth considering.
>>>
>>>    BDR> Alternatively, device.call <- get(device) could be put
>>>    BDR> in a try call, followed by a try on
>>>    BDR> getFromNamespace("graphics", device).
>>>
>>>That's a very good idea, I'd support quite a bit.
>>>
>>>I think I would go with the alternative approach
>>>(where you probably meant to say  device <- getOption("device") first?),
>>>since the importFrom(..) approach leeds to a somewhat tedious maintenance
>>>effort to keep up the list of available devices for the different platforms
>>>(For MacOS X one has to include quartz() only in the situations
>>> where it's available) where as Deepayan (the lattice
>>>maintainer) could rely on getOption("device") to be ok
>>>{and as you proposed would be on guard using try() or its newer siblings}.
>>
>>
>>I probably should have thought of this sooner, but anyway ...
>>Perhaps a better solution would be to split out another package called 
>>"devices".  Then both "graphics" and "grid" could require "devices" (so 
>>whenever you go to do any graphics you are guaranteed access to the 
>>default devices).
> 
> 
> I am not sure it is better, but it is not something we can do for a few 
> months (that is, not in a patchlevel release).  


Yep, it would have to be only at the next minor release.


> It's not quite that simple 
> -- where would you put ps.options?  Presumably in devices, and then 
> people would need to change their hooks again ....


Yep (I probably should have thought of it sooner ...).


> Incidentally, I think the name `devices' is rather narrow-minded (as is
> .Devices borrowed from S-PLUS).  They are _graphics_ devices and we might
> one day want audio devices or even devices for other types of
> visualization such as dynamic graphics.


Yep.  Good point.

I think it would be a cleaner design (it would be nicer if "grid" did 
not have to require (bits of) "graphics"), but it would be a bit 
disruptive for users.

Paul


>>>    BDR> On Fri, 23 Apr 2004, Prof Brian Ripley wrote:
>>>
>>>    >> 1) On the first point, please do read the NEWS file for R
>>>    >> 1.9.0.
>>>    >> 
>>>    >> .Rprofile and .First have always been run before the
>>>    >> default packages are loaded in .First.sys, to allow them
>>>    >> to be changed.
>>>    >> 
>>>    >> So this *is* a documented change in behaviour, not a bug.
>>>    >> If I do
>>>    >> 
>>>    >> .First <- function() {library(lattice); trellis.device()}
>>>    >> 
>>>    >> This happens on all platforms.  You need
>>>    >> 
>>>    >> .First <- function() {library(graphics);
>>>    >> library(lattice); trellis.device()}
>>>    >> 
>>>    >> That is true of starting any graphics device in .Rprofile
>>>    >> or .First.
>>>
>>>
>>>    BDR> -- Brian D. Ripley, ripley@stats.ox.ac.uk Professor of
>>>    BDR> Applied Statistics, http://www.stats.ox.ac.uk/~ripley/
>>>    BDR> University of Oxford, Tel: +44 1865 272861 (self) 1
>>>    BDR> South Parks Road, +44 1865 272866 (PA) Oxford OX1 3TG,
>>>    BDR> UK Fax: +44 1865 272595
>>>
>>>    BDR> ______________________________________________
>>>    BDR> R-devel@stat.math.ethz.ch mailing list
>>>    BDR> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>>
>>>______________________________________________
>>>R-devel@stat.math.ethz.ch mailing list
>>>https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>>
>>
>>
> 


-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul@stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/

From torsten at hothorn.de  Tue Apr 27 08:01:51 2004
From: torsten at hothorn.de (torsten@hothorn.de)
Date: Tue Apr 27 08:01:57 2004
Subject: [Rd] Segfault: .Call and classes with logical slots
In-Reply-To: <408D7CC7.3E753469@research.bell-labs.com>
References: <Pine.LNX.4.51.0404261721500.13129@artemis.imbe.med.uni-erlangen.de>
	<408D7CC7.3E753469@research.bell-labs.com>
Message-ID: <Pine.LNX.4.51.0404270757450.16528@artemis.imbe.med.uni-erlangen.de>



On Mon, 26 Apr 2004, John Chambers wrote:

> I think you need to PROTECT the vector you're putting in the slot as
> well as the overall object.  At any rate, the problem goes away for me
> with the revised version of dummy.c below.

yes, and it seems that PROTECT'ing the logical variable is sufficient
while PROTECT'ing the class but not the logical variable causes a
segfault again. I tried with numeric slots too: No problems.

> (Empirically, PROTECT'ing
> the class definition didn't seem to be needed, but experience suggests
> that too much protection  is better than too little.)

I tried to save (UN)PROTECT calls because of efficiency reasons. Anyway,
this helps me a lot, thanks!

Torsten

>




> #include <Rdefines.h>
>
> SEXP foo() {
>
>     SEXP ans, cl, el;
>
>     PROTECT(cl = MAKE_CLASS("test"));
>     PROTECT(ans = NEW_OBJECT(cl));
>     PROTECT(el = allocVector(LGLSXP, 1));
>     SET_SLOT(ans, install("lgl"), el);
>     LOGICAL(GET_SLOT(ans, install("lgl")))[0] = TRUE;
>     UNPROTECT(3);
>     return(ans);
> }
>
>
> Torsten Hothorn wrote:
> >
> > Hi,
> >
> > the following example aiming at a class containing a logical slot
> > segfaults under R-1.9.0 when `gctorture(on = TRUE)' is used:
> >
> > Code code (dummy.c):
> >
> > #include <Rdefines.h>
> >
> > SEXP foo() {
> >
> >     SEXP ans;
> >
> >     PROTECT(ans = NEW_OBJECT(MAKE_CLASS("test")));
> >     SET_SLOT(ans, install("lgl"), allocVector(LGLSXP, 1));
> >     LOGICAL(GET_SLOT(ans, install("lgl")))[0] = TRUE;
> >     UNPROTECT(1);
> >     return(ans);
> > }
> >
> > R code (dummy.R):
> >
> > dyn.load("dummy.so")
> >
> > setClass("test", representation = representation(lgl = "logical"))
> >
> > a = .Call("foo")
> > a # OK
> >
> > gctorture(on = TRUE)
> > a = .Call("foo")
> > gctorture(on = FALSE)
> > a # segfault
> >
> > which gives
> >
> > R>
> > R>
> > R> dyn.load("dummy.so")
> > R>
> > R> setClass("test", representation = representation(lgl = "logical"))
> > [1] "test"
> > R>
> > R> a = .Call("foo")
> > R> a
> > An object of class "test"
> > Slot "lgl":
> > [1] TRUE
> >
> > R>
> > R> gctorture(on = TRUE)
> > R> a = .Call("foo")
> > R> gctorture(on = FALSE)
> > Segmentation fault
> >
> > Best,
> >
> > Torsten
> >
> > R> version
> >          _
> > platform i686-pc-linux-gnu
> > arch     i686
> > os       linux-gnu
> > system   i686, linux-gnu
> > status
> > major    1
> > minor    9.0
> > year     2004
> > month    04
> > day      12
> > language R
> > R>
> >
> >  _______________________________________________________________________
> > |                                                                       |
> > |       Dr. rer. nat. Torsten Hothorn                                   |
> > |       Institut fuer Medizininformatik, Biometrie und Epidemiologie    |
> > |       Waldstrasse 6, D-91054 Erlangen, Deutschland                    |
> > |       Tel: ++49-9131-85-22707 (dienstl.)                              |
> > |       Fax: ++49-9131-85-25740                                         |
> > |       Email:  Torsten.Hothorn@rzmail.uni-erlangen.de                  |
> > |               PLEASE send emails cc to torsten@hothorn.de             |
> > |       Web: http://www.imbe.med.uni-erlangen.de/~hothorn               |
> > |_______________________________________________________________________|
> >
> > ______________________________________________
> > R-devel@stat.math.ethz.ch mailing list
> > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
>
> --
> John M. Chambers                  jmc@bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-2681
> 700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
> Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
>

From bates at stat.wisc.edu  Tue Apr 27 15:13:35 2004
From: bates at stat.wisc.edu (Douglas Bates)
Date: Tue Apr 27 15:13:48 2004
Subject: [Rd] Segfault: .Call and classes with logical slots
In-Reply-To: <Pine.LNX.4.51.0404270757450.16528@artemis.imbe.med.uni-erlangen.de>
References: <Pine.LNX.4.51.0404261721500.13129@artemis.imbe.med.uni-erlangen.de>
	<408D7CC7.3E753469@research.bell-labs.com>
	<Pine.LNX.4.51.0404270757450.16528@artemis.imbe.med.uni-erlangen.de>
Message-ID: <6risflef7k.fsf@bates4.stat.wisc.edu>

torsten@hothorn.de writes:

> On Mon, 26 Apr 2004, John Chambers wrote:
> 
> > I think you need to PROTECT the vector you're putting in the slot as
> > well as the overall object.  At any rate, the problem goes away for me
> > with the revised version of dummy.c below.
> 
> yes, and it seems that PROTECT'ing the logical variable is sufficient
> while PROTECT'ing the class but not the logical variable causes a
> segfault again. I tried with numeric slots too: No problems.
> 
> > (Empirically, PROTECT'ing
> > the class definition didn't seem to be needed, but experience suggests
> > that too much protection  is better than too little.)
> 
> I tried to save (UN)PROTECT calls because of efficiency reasons. Anyway,
> this helps me a lot, thanks!

Perhaps this example is an indication that gctorture is too
aggressive.  I use constructions like

   PROTECT(ans = ...);

   SET_SLOT(ans, install("lgl"), allocVector(LGLSXP,1));
   LOGICAL(GET_SLOT(ans, install("lgl")))[0] = TRUE;

in many places in my code, having been assured by a usually reliable
source (Luke) that SET_SLOT applied to a freshly allocated vector
would be atomic with respect to garbage collection.  That is, under
the usual conditions there would be no chance of a garbage
collection being triggered between the allocVector and SET_SLOT
operations.  It may be that gctorture is causing a garbage collection
at a place where it otherwise could not occur and the additional
(UN)PROTECT are redundant except when gctorture is active.

In trying to avoid (UN)PROTECT calls I'm not as concerned about
efficiency as I am about clarity of the code.  I would prefer not to
clutter the code with (UN)PROTECT calls if they are known to be
redundant.

At the time we discussed this Luke suggested that we document a set of
C calls that are atomic with respect to garbage collection.  I think
this would be a good idea but I suspect that no one has the time to do
it right now.

> 
> Torsten
> 
> >
> 
> 
> 
> 
> > #include <Rdefines.h>
> >
> > SEXP foo() {
> >
> >     SEXP ans, cl, el;
> >
> >     PROTECT(cl = MAKE_CLASS("test"));
> >     PROTECT(ans = NEW_OBJECT(cl));
> >     PROTECT(el = allocVector(LGLSXP, 1));
> >     SET_SLOT(ans, install("lgl"), el);
> >     LOGICAL(GET_SLOT(ans, install("lgl")))[0] = TRUE;
> >     UNPROTECT(3);
> >     return(ans);
> > }
> >
> >
> > Torsten Hothorn wrote:
> > >
> > > Hi,
> > >
> > > the following example aiming at a class containing a logical slot
> > > segfaults under R-1.9.0 when `gctorture(on = TRUE)' is used:
> > >
> > > Code code (dummy.c):
> > >
> > > #include <Rdefines.h>
> > >
> > > SEXP foo() {
> > >
> > >     SEXP ans;
> > >
> > >     PROTECT(ans = NEW_OBJECT(MAKE_CLASS("test")));
> > >     SET_SLOT(ans, install("lgl"), allocVector(LGLSXP, 1));
> > >     LOGICAL(GET_SLOT(ans, install("lgl")))[0] = TRUE;
> > >     UNPROTECT(1);
> > >     return(ans);
> > > }
> > >
> > > R code (dummy.R):
> > >
> > > dyn.load("dummy.so")
> > >
> > > setClass("test", representation = representation(lgl = "logical"))
> > >
> > > a = .Call("foo")
> > > a # OK
> > >
> > > gctorture(on = TRUE)
> > > a = .Call("foo")
> > > gctorture(on = FALSE)
> > > a # segfault
> > >
> > > which gives
> > >
> > > R>
> > > R>
> > > R> dyn.load("dummy.so")
> > > R>
> > > R> setClass("test", representation = representation(lgl = "logical"))
> > > [1] "test"
> > > R>
> > > R> a = .Call("foo")
> > > R> a
> > > An object of class "test"
> > > Slot "lgl":
> > > [1] TRUE
> > >
> > > R>
> > > R> gctorture(on = TRUE)
> > > R> a = .Call("foo")
> > > R> gctorture(on = FALSE)
> > > Segmentation fault
> > >
> > > Best,
> > >
> > > Torsten
> > >
> > > R> version
> > >          _
> > > platform i686-pc-linux-gnu
> > > arch     i686
> > > os       linux-gnu
> > > system   i686, linux-gnu
> > > status
> > > major    1
> > > minor    9.0
> > > year     2004
> > > month    04
> > > day      12
> > > language R
> > > R>
> > >
> > >  _______________________________________________________________________
> > > |                                                                       |
> > > |       Dr. rer. nat. Torsten Hothorn                                   |
> > > |       Institut fuer Medizininformatik, Biometrie und Epidemiologie    |
> > > |       Waldstrasse 6, D-91054 Erlangen, Deutschland                    |
> > > |       Tel: ++49-9131-85-22707 (dienstl.)                              |
> > > |       Fax: ++49-9131-85-25740                                         |
> > > |       Email:  Torsten.Hothorn@rzmail.uni-erlangen.de                  |
> > > |               PLEASE send emails cc to torsten@hothorn.de             |
> > > |       Web: http://www.imbe.med.uni-erlangen.de/~hothorn               |
> > > |_______________________________________________________________________|
> > >
> > > ______________________________________________
> > > R-devel@stat.math.ethz.ch mailing list
> > > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> >
> > --
> > John M. Chambers                  jmc@bell-labs.com
> > Bell Labs, Lucent Technologies    office: (908)582-2681
> > 700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
> > Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
> >
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/

From NAT-nsv at adm.ku.dk  Tue Apr 27 15:25:37 2004
From: NAT-nsv at adm.ku.dk (NAT-nsv@adm.ku.dk)
Date: Tue Apr 27 15:25:41 2004
Subject: [Rd] Autosvar - Ikke til stede: Its me (PR#6829)
Message-ID: <20040427132537.02067EFC0@slim.kubism.ku.dk>

Hej		(english text below)

Den Naturvidenskabelige Studievejledning har modtaget din mail og den
vil nu blive givet til den relevante studievejleder. Vi svarer altid s?
hurtigt vi kan, men der kan i visse tilf?lde g? op til en uge, f?r du
f?r svar. Du er ogs? velkommen til at ringe til os eller komme
personligt. P? vores hjemmeside p? http://www.nat.ku.dk/nat-nsv/ kan du
finde vores ?bningstider.

Biologi og idr?t: 35 32 42 25
De matematiske fag og datalogi: 35 32 42 22
Nanoteknologi og de fysiske og de kemiske fag: 35 32 42 23
Geologi, geologi-geofysik, geografik og geoinformatik: 35 32 42 21

Mvh.
	Den Naturvidenskabelige Studievejledning
-------------------------------

Hello,

Your mail to the counsellors at the Faculty og Science,
University of Copenhagen, has been well received. We will answer your
mail as soon as possible and normally within a week.

Best regards,

	The Counsellors

From luke at stat.uiowa.edu  Tue Apr 27 15:59:17 2004
From: luke at stat.uiowa.edu (Luke Tierney)
Date: Tue Apr 27 15:59:31 2004
Subject: [Rd] Segfault: .Call and classes with logical slots
In-Reply-To: <6risflef7k.fsf@bates4.stat.wisc.edu>
Message-ID: <Pine.LNX.4.44.0404270834540.22347-100000@itasca.stat.uiowa.edu>

On 27 Apr 2004, Douglas Bates wrote:

> torsten@hothorn.de writes:
> 
> > On Mon, 26 Apr 2004, John Chambers wrote:
> > 
> > > I think you need to PROTECT the vector you're putting in the slot as
> > > well as the overall object.  At any rate, the problem goes away for me
> > > with the revised version of dummy.c below.
> > 
> > yes, and it seems that PROTECT'ing the logical variable is sufficient
> > while PROTECT'ing the class but not the logical variable causes a
> > segfault again. I tried with numeric slots too: No problems.
> > 
> > > (Empirically, PROTECT'ing
> > > the class definition didn't seem to be needed, but experience suggests
> > > that too much protection  is better than too little.)
> > 
> > I tried to save (UN)PROTECT calls because of efficiency reasons. Anyway,
> > this helps me a lot, thanks!
> 
> Perhaps this example is an indication that gctorture is too
> aggressive.  I use constructions like

It can't be--it only forces gc in places that _could_ result in a gc
withut gctorture; it will not result in a gc in places that otherwise
could not.  The result may be a gc in places that otherwise would be
very unlikely to cause one but not in places that could not.

>    PROTECT(ans = ...);
> 
>    SET_SLOT(ans, install("lgl"), allocVector(LGLSXP,1));
>    LOGICAL(GET_SLOT(ans, install("lgl")))[0] = TRUE;
> 
> in many places in my code, having been assured by a usually reliable
> source (Luke) that SET_SLOT applied to a freshly allocated vector
> would be atomic with respect to garbage collection.  That is, under
> the usual conditions there would be no chance of a garbage
> collection being triggered between the allocVector and SET_SLOT
> operations.  It may be that gctorture is causing a garbage collection
> at a place where it otherwise could not occur and the additional
> (UN)PROTECT are redundant except when gctorture is active.

There are two different scenarios.  Some things are guaranteed not to
allocate, for example low level operations like SET_VECTOR_ELT.
Others, like setAttrib do allocate, but when they do they protect
(some of) their arguments.  So code that uses setAttrib does not need
to protect the arguments to the call (at least the value one--I'd have
to double check the others).  Other variables that are alive before
and after the setAttrib call will need to be protected.

Since slots are stored in attributes we can at most hope for the
second behavior.  But we do not have it.  SET_SLOT is a macro that
expands to R_do_slot_assign, which starts out as

SEXP R_do_slot_assign(SEXP obj, SEXP name, SEXP value) {
    SEXP input = name; int nprotect = 0;
    if(isSymbol(name) ) {
	input = PROTECT(allocVector(STRSXP, 1)); nprotect++; /******/
	SET_STRING_ELT(input, 0, PRINTNAME(name));
    }
    else if(!(isString(name) && LENGTH(name) == 1))
	error("invalid type or length for slot name");
    ...

The actual assignment uses setAttrib, which does operate in a way that
protects the value being assigned, but the unprotected allocation at
/******/ happens before we get there.

So unless we modify SET_SLOT to protect the value argument (and the
others as well to be safe), the value needs to be protected (as do any
other objects that might be needed after the call).

Best,

luke

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

From ellis at stat.harvard.edu  Tue Apr 27 16:19:13 2004
From: ellis at stat.harvard.edu (ellis@stat.harvard.edu)
Date: Tue Apr 27 16:19:17 2004
Subject: [Rd] 'R CMD build' fails when there are spaces in the path (PR#6830)
Message-ID: <20040427141913.35041EFCF@slim.kubism.ku.dk>

Full_Name: Byron Ellis
Version: R 1.9.0 (and 2.0.0)
OS: Linux (Redhat Fedora Core)
Submission from: (NULL) (140.247.241.197)


It appears that `R CMD build` cannot handle spaces in the path when building
packages for distribution. For instance:

[ellis@net-78815 ~/Bayesian Networks]$ R CMD build bnsl
* checking for file 'bnsl/DESCRIPTION' ... OK
* preparing 'bnsl':
* cleaning src
* removing junk files
* building 'bnsl_0.0.1.tar.gz'
tar: Networks/bnsl_0.0.1.tar: Cannot stat: No such file or directory
tar: Error exit delayed from previous errors
tar: Networks/bnsl_0.0.1.tar: Not found in archive
tar: Error exit delayed from previous errors
Error: cannot open file 'bnsl/DESCRIPTION' for reading
[ellis@net-78815 ~/Bayesian Networks]$ 

Results in a file named "Bayesian" (that appears to be the uncompressed tar
file) in ~/. I suspect some missing quotes somewhere.

From jmc at research.bell-labs.com  Tue Apr 27 16:39:04 2004
From: jmc at research.bell-labs.com (John Chambers)
Date: Tue Apr 27 16:39:15 2004
Subject: [Rd] Segfault: .Call and classes with logical slots
References: <Pine.LNX.4.44.0404270834540.22347-100000@itasca.stat.uiowa.edu>
Message-ID: <408E7088.A77BCEF7@research.bell-labs.com>

I was about to comment with some of the same points Luke makes here. 
It's hard to see how gctorture could be less aggressive and still
guarantee to find problems.  Yes, some of the problems look unlikely,
but that's partly what makes them so insidious.

Two additional small points, one of detail, one about style.

1. A slight expansion on SET_SLOT.  There are two situations:  ordinary
slots and the ".Data" slot, a way to set the "data part" of an object.

The allocation for ordinary slots is trivial and maybe there is a way to
avoid it.  If the name argument is a symbol (as it usually is), SET_SLOT
allocates a corresponding character vector, because that's what
set_attrib wants.  Seems like each symbol could have a corresponding
object of this form (maybe there is one already?) to avoid allocation in
this case.

The .Data case involves much more code.  In this special case, should
SET_SLOT PROTECT the value argument?  or for that matter, would it be a
serious overhead for SET_SLOT to PROTECT the value argument always?

2.  On the other hand, this style of example might be characterized as
"hand compiling" S language code.  Many of us have had the experience
that such hand compiling is very error prone.  I know it's sometimes
strongly motivated, but it's likely to be an unpleasant experience.

If it's at all possible, the long-standing advice applies:  Try to
pre-allocate the data needed and keep the C code to dealing with
existing objects (e.g., DATAPTR() pointers); in particular, so the heavy
C code uses only pointers to data, not R objects.

And hopefully real compiling will eventually relieve us of some of the
need.

John

Luke Tierney wrote:
> 
> On 27 Apr 2004, Douglas Bates wrote:
> 
> > torsten@hothorn.de writes:
> >
> > > On Mon, 26 Apr 2004, John Chambers wrote:
> > >
> > > > I think you need to PROTECT the vector you're putting in the slot as
> > > > well as the overall object.  At any rate, the problem goes away for me
> > > > with the revised version of dummy.c below.
> > >
> > > yes, and it seems that PROTECT'ing the logical variable is sufficient
> > > while PROTECT'ing the class but not the logical variable causes a
> > > segfault again. I tried with numeric slots too: No problems.
> > >
> > > > (Empirically, PROTECT'ing
> > > > the class definition didn't seem to be needed, but experience suggests
> > > > that too much protection  is better than too little.)
> > >
> > > I tried to save (UN)PROTECT calls because of efficiency reasons. Anyway,
> > > this helps me a lot, thanks!
> >
> > Perhaps this example is an indication that gctorture is too
> > aggressive.  I use constructions like
> 
> It can't be--it only forces gc in places that _could_ result in a gc
> withut gctorture; it will not result in a gc in places that otherwise
> could not.  The result may be a gc in places that otherwise would be
> very unlikely to cause one but not in places that could not.
> 
> >    PROTECT(ans = ...);
> >
> >    SET_SLOT(ans, install("lgl"), allocVector(LGLSXP,1));
> >    LOGICAL(GET_SLOT(ans, install("lgl")))[0] = TRUE;
> >
> > in many places in my code, having been assured by a usually reliable
> > source (Luke) that SET_SLOT applied to a freshly allocated vector
> > would be atomic with respect to garbage collection.  That is, under
> > the usual conditions there would be no chance of a garbage
> > collection being triggered between the allocVector and SET_SLOT
> > operations.  It may be that gctorture is causing a garbage collection
> > at a place where it otherwise could not occur and the additional
> > (UN)PROTECT are redundant except when gctorture is active.
> 
> There are two different scenarios.  Some things are guaranteed not to
> allocate, for example low level operations like SET_VECTOR_ELT.
> Others, like setAttrib do allocate, but when they do they protect
> (some of) their arguments.  So code that uses setAttrib does not need
> to protect the arguments to the call (at least the value one--I'd have
> to double check the others).  Other variables that are alive before
> and after the setAttrib call will need to be protected.
> 
> Since slots are stored in attributes we can at most hope for the
> second behavior.  But we do not have it.  SET_SLOT is a macro that
> expands to R_do_slot_assign, which starts out as
> 
> SEXP R_do_slot_assign(SEXP obj, SEXP name, SEXP value) {
>     SEXP input = name; int nprotect = 0;
>     if(isSymbol(name) ) {
>         input = PROTECT(allocVector(STRSXP, 1)); nprotect++; /******/
>         SET_STRING_ELT(input, 0, PRINTNAME(name));
>     }
>     else if(!(isString(name) && LENGTH(name) == 1))
>         error("invalid type or length for slot name");
>     ...
> 
> The actual assignment uses setAttrib, which does operate in a way that
> protects the value being assigned, but the unprotected allocation at
> /******/ happens before we get there.
> 
> So unless we modify SET_SLOT to protect the value argument (and the
> others as well to be safe), the value needs to be protected (as do any
> other objects that might be needed after the call).
> 
> Best,
> 
> luke
> 
> --
> Luke Tierney
> University of Iowa                  Phone:             319-335-3386
> Department of Statistics and        Fax:               319-335-3017
>    Actuarial Science
> 241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
> Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

From Kurt.Hornik at wu-wien.ac.at  Tue Apr 27 20:25:52 2004
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Tue Apr 27 20:26:01 2004
Subject: [Rd] 'R CMD build' fails when there are spaces in the path
	(PR#6830)
In-Reply-To: <20040427141913.35041EFCF@slim.kubism.ku.dk>
References: <20040427141913.35041EFCF@slim.kubism.ku.dk>
Message-ID: <16526.42416.293528.830604@mithrandir.hornik.net>

>>>>> ellis  writes:

> Full_Name: Byron Ellis
> Version: R 1.9.0 (and 2.0.0)
> OS: Linux (Redhat Fedora Core)
> Submission from: (NULL) (140.247.241.197)


> It appears that `R CMD build` cannot handle spaces in the path when
> building packages for distribution. For instance:

> [ellis@net-78815 ~/Bayesian Networks]$ R CMD build bnsl
> * checking for file 'bnsl/DESCRIPTION' ... OK
> * preparing 'bnsl':
> * cleaning src
> * removing junk files
> * building 'bnsl_0.0.1.tar.gz'
> tar: Networks/bnsl_0.0.1.tar: Cannot stat: No such file or directory
> tar: Error exit delayed from previous errors
> tar: Networks/bnsl_0.0.1.tar: Not found in archive
> tar: Error exit delayed from previous errors
> Error: cannot open file 'bnsl/DESCRIPTION' for reading
> [ellis@net-78815 ~/Bayesian Networks]$ 

> Results in a file named "Bayesian" (that appears to be the
> uncompressed tar file) in ~/. I suspect some missing quotes somewhere.

The problem definitely occurs when calling R CMD build from a dir whose
file path contains white space.  Now in R CMD build we have

$ grep filepath build.in 
        my $filepath = &file_path($startdir, $filename);
            R_system("zip -r9X $filepath.zip $pkgs $topLevelFiles");
            R_system("$tar chf $filepath $pkgs $topLevelFiles");
            R_system("gzip -9f $filepath");
        my $filepath = &file_path($startdir, $filename);
        my $origfilepath = $filepath;
            $filepath =~ s+^([A-Za-x]):+/cygdrive/\1+;
        R_system("$tar chf $filepath $pkgname");
        R_system("$tar xhf $filepath");
        R_system("$tar chf $filepath $pkgname");
        R_system("gzip -9f $origfilepath");

so in fact in none of the calls to R_system() with $filepath do we
currently perform any kind of quoting or shell escaping.

A simple improvement would be quoting all filepaths in R_system() calls
via \"...\" or '...'.  Unless someone has a better idea or wants to put
in more effort ...

-k

From arnima at u.washington.edu  Wed Apr 28 04:42:33 2004
From: arnima at u.washington.edu (arnima@u.washington.edu)
Date: Wed Apr 28 04:42:39 2004
Subject: [Rd] boxplot graphical arguments (PR#6832)
Message-ID: <20040428024233.804B3EFB8@slim.kubism.ku.dk>

Dear r-bugs,

I'd like to be able to draw boxplots with solid or dotted whisker lines.
The lty argument is currently ignored by boxplot(), and indeed hardwired
in bxp().

It's not very difficult to customize these functions to generate various
types of boxplots, but generally it might be an idea to allow the user to
pass a few more graphical arguments to boxplot(). The approach might as
well mimic S-Plus, but still retain the default R look.

Thanks,
Arni

R 1.9.0 on WinXP

From arnima at u.washington.edu  Wed Apr 28 04:47:36 2004
From: arnima at u.washington.edu (arnima@u.washington.edu)
Date: Wed Apr 28 04:47:38 2004
Subject: [Rd] boxplot documentation (PR#6833)
Message-ID: <20040428024736.32387EFB8@slim.kubism.ku.dk>

Dear r-bugs,

The boxplot documentation states that "if outline is not true, the boxplot
lines are not drawn" but it turns out that the outliers are not drawn.

Regards,
Arni

R 1.9.0 on WinXP

From maechler at stat.math.ethz.ch  Wed Apr 28 09:21:23 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed Apr 28 09:21:25 2004
Subject: [Rd] boxplot documentation (PR#6833)
Message-ID: <20040428072123.CDA4C1041E@slim.kubism.ku.dk>

>>>>> "arnima" == arnima  <arnima@u.washington.edu>
>>>>>     on Wed, 28 Apr 2004 04:47:36 +0200 (CEST) writes:

    arnima> Dear r-bugs, The boxplot documentation states that
    arnima> "if outline is not true, the boxplot lines are not
    arnima> drawn" but it turns out that the outliers are not
    arnima> drawn.

correct.  Thank you.  --> will be fixed in R-patched.

[ and effectively, the argument name, inherited from S, is a bit
 of a misnomer for R : We don't draw the outliers as lines but
 as pointsi, i.e., if we wouldn't want to be S-compatible we'd
 have to name it 'outpoint' which I wouldn't like either, but
 would rather use something like `out.draw' (TRUE : 'draw' outliers) 
]

Martin Maechler

From jonathan_lees at unc.edu  Wed Apr 28 14:07:25 2004
From: jonathan_lees at unc.edu (jonathan_lees@unc.edu)
Date: Wed Apr 28 14:07:30 2004
Subject: [Rd] Re: postscript image problem (PR#6763)
Message-ID: <20040428120725.D150B10481@slim.kubism.ku.dk>

It is true that if you turn antialiasing
off on GV then the effect seems to disappear but that is just a cosmetic 
thing.
Other aspects of the figure are subsequently degraded, however.

I am really interested in converting the postscript to good JPEG images and
I can't get rid of the annoying lines when I use display or
convert (in LINUX).
If I could figure our how to get a good JPEG figure I would be
satisfied.

Thanks for any help.




paul murrell wrote:

>Hi
>
>
>  
>
>>Full_Name: Jonathan Lees
>>I am having trouble with the postscript output of images.
>>They have lines on them that are not supposed to be there.
>>I have noticed this on numerous trials of printing various images.
>>I looked at the postscript and I see that it
>>appears to plot each individual block - so perhaps occasionally the 
>>space between the blocks "leaks" through do to round off,
>>thus contaminating the image.
>>this could be solved if the image software used postscript
>>image plotting functions.
>>
>>Here is an example of some code:
>>
>>postscript(file ="test.ps" , onefile=FALSE, print.it=FALSE)
>>
>>
>>w<-5 #width of central square
>>m=w
>>xn<- 128; yn<- 128
>>im<- matrix(0,nrow=yn,ncol=xn)
>>xc<-floor(xn/2)+1;
>>yc<- floor(yn/2)+1 # centers of the image
>>im[(-m:m)+xc,(-m:m)+yc]<- 1
>>
>>image(im , col = cmap ); title('im=Original image')
>>
>>
>>dev.off()
>>
>>view this output with any postscript viewer (or printer)
>>and you will see extra lines on the plot.
>>    
>>
>
>
>Is this just caused by antialiasing on the postscript viewer.  I see this with
>anti-aliasing on, but it goes away if I turn antialiasing off.  Of course, that
>wouldn't explain the effect when a document is printed, but I don't get that.
>
>Paul
>  
>

-- 
===============================
Jonathan M. Lees
Associate Professor
University of North Carolina
Department of Geological Sciences
CB#3315, Mitchell Hall
Chapel Hill, NC 27599-3315

VOICE: (919) 962-0695
FAX:   (919) 966-4519

EMAIL: jonathan.lees@unc.edu
http://www.unc.edu/~leesj

From kleiweg at let.rug.nl  Wed Apr 28 14:35:48 2004
From: kleiweg at let.rug.nl (Peter Kleiweg)
Date: Wed Apr 28 14:36:14 2004
Subject: [Rd] Re: postscript image problem (PR#6763)
In-Reply-To: <20040428120725.D150B10481@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404281428020.2826-100000@kleigh.nl>

# aldus jonathan_lees@unc.edu :

> I am really interested in converting the postscript to good JPEG images and
> I can't get rid of the annoying lines when I use display or
> convert (in LINUX).
> If I could figure our how to get a good JPEG figure I would be
> satisfied.


http://odur.let.rug.nl/~kleiweg/postscript/postscript.html#conversion




-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/

From ripley at stats.ox.ac.uk  Wed Apr 28 15:05:11 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Apr 28 15:05:14 2004
Subject: (PR#6830) Re: [Rd] 'R CMD build' fails when there are spaces in
	the path (PR#6830)
In-Reply-To: <16526.42416.293528.830604@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.44.0404281401080.25610-100000@gannet.stats>

Note that it *does* work under Windows (via mapping names to short names
without spaces), so we should take care not to break that (and I think
adding quotes will as the shell quoting rules appear to be are different).

On Tue, 27 Apr 2004, Kurt Hornik wrote:

> >>>>> ellis  writes:
> 
> > Full_Name: Byron Ellis
> > Version: R 1.9.0 (and 2.0.0)
> > OS: Linux (Redhat Fedora Core)
> > Submission from: (NULL) (140.247.241.197)
> 
> 
> > It appears that `R CMD build` cannot handle spaces in the path when
> > building packages for distribution. For instance:
> 
> > [ellis@net-78815 ~/Bayesian Networks]$ R CMD build bnsl
> > * checking for file 'bnsl/DESCRIPTION' ... OK
> > * preparing 'bnsl':
> > * cleaning src
> > * removing junk files
> > * building 'bnsl_0.0.1.tar.gz'
> > tar: Networks/bnsl_0.0.1.tar: Cannot stat: No such file or directory
> > tar: Error exit delayed from previous errors
> > tar: Networks/bnsl_0.0.1.tar: Not found in archive
> > tar: Error exit delayed from previous errors
> > Error: cannot open file 'bnsl/DESCRIPTION' for reading
> > [ellis@net-78815 ~/Bayesian Networks]$ 
> 
> > Results in a file named "Bayesian" (that appears to be the
> > uncompressed tar file) in ~/. I suspect some missing quotes somewhere.
> 
> The problem definitely occurs when calling R CMD build from a dir whose
> file path contains white space.  Now in R CMD build we have
> 
> $ grep filepath build.in 
>         my $filepath = &file_path($startdir, $filename);
>             R_system("zip -r9X $filepath.zip $pkgs $topLevelFiles");
>             R_system("$tar chf $filepath $pkgs $topLevelFiles");
>             R_system("gzip -9f $filepath");
>         my $filepath = &file_path($startdir, $filename);
>         my $origfilepath = $filepath;
>             $filepath =~ s+^([A-Za-x]):+/cygdrive/\1+;
>         R_system("$tar chf $filepath $pkgname");
>         R_system("$tar xhf $filepath");
>         R_system("$tar chf $filepath $pkgname");
>         R_system("gzip -9f $origfilepath");
> 
> so in fact in none of the calls to R_system() with $filepath do we
> currently perform any kind of quoting or shell escaping.
> 
> A simple improvement would be quoting all filepaths in R_system() calls
> via \"...\" or '...'.  Unless someone has a better idea or wants to put
> in more effort ...

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From Kurt.Hornik at wu-wien.ac.at  Wed Apr 28 15:14:04 2004
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Wed Apr 28 15:14:11 2004
Subject: (PR#6830) Re: [Rd] 'R CMD build' fails when there are spaces in
	the path (PR#6830)
In-Reply-To: <Pine.LNX.4.44.0404281401080.25610-100000@gannet.stats>
References: <16526.42416.293528.830604@mithrandir.hornik.net>
	<Pine.LNX.4.44.0404281401080.25610-100000@gannet.stats>
Message-ID: <16527.44572.924371.844940@mithrandir.hornik.net>

>>>>> Prof Brian Ripley writes:

> Note that it *does* work under Windows (via mapping names to short
> names without spaces), so we should take care not to break that (and I
> think adding quotes will as the shell quoting rules appear to be are
> different).

I thought that R_system() would portably invoke a Bourne shell?

-k

> On Tue, 27 Apr 2004, Kurt Hornik wrote:

>> >>>>> ellis  writes:
>> 
>> > Full_Name: Byron Ellis
>> > Version: R 1.9.0 (and 2.0.0)
>> > OS: Linux (Redhat Fedora Core)
>> > Submission from: (NULL) (140.247.241.197)
>> 
>> 
>> > It appears that `R CMD build` cannot handle spaces in the path when
>> > building packages for distribution. For instance:
>> 
>> > [ellis@net-78815 ~/Bayesian Networks]$ R CMD build bnsl
>> > * checking for file 'bnsl/DESCRIPTION' ... OK
>> > * preparing 'bnsl':
>> > * cleaning src
>> > * removing junk files
>> > * building 'bnsl_0.0.1.tar.gz'
>> > tar: Networks/bnsl_0.0.1.tar: Cannot stat: No such file or directory
>> > tar: Error exit delayed from previous errors
>> > tar: Networks/bnsl_0.0.1.tar: Not found in archive
>> > tar: Error exit delayed from previous errors
>> > Error: cannot open file 'bnsl/DESCRIPTION' for reading
>> > [ellis@net-78815 ~/Bayesian Networks]$ 
>> 
>> > Results in a file named "Bayesian" (that appears to be the
>> > uncompressed tar file) in ~/. I suspect some missing quotes somewhere.
>> 
>> The problem definitely occurs when calling R CMD build from a dir whose
>> file path contains white space.  Now in R CMD build we have
>> 
>> $ grep filepath build.in 
>> my $filepath = &file_path($startdir, $filename);
>> R_system("zip -r9X $filepath.zip $pkgs $topLevelFiles");
>> R_system("$tar chf $filepath $pkgs $topLevelFiles");
>> R_system("gzip -9f $filepath");
>> my $filepath = &file_path($startdir, $filename);
>> my $origfilepath = $filepath;
>> $filepath =~ s+^([A-Za-x]):+/cygdrive/\1+;
>> R_system("$tar chf $filepath $pkgname");
>> R_system("$tar xhf $filepath");
>> R_system("$tar chf $filepath $pkgname");
>> R_system("gzip -9f $origfilepath");
>> 
>> so in fact in none of the calls to R_system() with $filepath do we
>> currently perform any kind of quoting or shell escaping.
>> 
>> A simple improvement would be quoting all filepaths in R_system() calls
>> via \"...\" or '...'.  Unless someone has a better idea or wants to put
>> in more effort ...

> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Wed Apr 28 15:18:14 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Apr 28 15:18:17 2004
Subject: (PR#6830) Re: [Rd] 'R CMD build' fails when there are spaces in
	the path (PR#6830)
In-Reply-To: <16527.44572.924371.844940@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.44.0404281417550.25610-100000@gannet.stats>

On Wed, 28 Apr 2004, Kurt Hornik wrote:

> >>>>> Prof Brian Ripley writes:
> 
> > Note that it *does* work under Windows (via mapping names to short
> > names without spaces), so we should take care not to break that (and I
> > think adding quotes will as the shell quoting rules appear to be are
> > different).
> 
> I thought that R_system() would portably invoke a Bourne shell?

No, it is ash on Windows, which is not quite Bourne.

> 
> -k
> 
> > On Tue, 27 Apr 2004, Kurt Hornik wrote:
> 
> >> >>>>> ellis  writes:
> >> 
> >> > Full_Name: Byron Ellis
> >> > Version: R 1.9.0 (and 2.0.0)
> >> > OS: Linux (Redhat Fedora Core)
> >> > Submission from: (NULL) (140.247.241.197)
> >> 
> >> 
> >> > It appears that `R CMD build` cannot handle spaces in the path when
> >> > building packages for distribution. For instance:
> >> 
> >> > [ellis@net-78815 ~/Bayesian Networks]$ R CMD build bnsl
> >> > * checking for file 'bnsl/DESCRIPTION' ... OK
> >> > * preparing 'bnsl':
> >> > * cleaning src
> >> > * removing junk files
> >> > * building 'bnsl_0.0.1.tar.gz'
> >> > tar: Networks/bnsl_0.0.1.tar: Cannot stat: No such file or directory
> >> > tar: Error exit delayed from previous errors
> >> > tar: Networks/bnsl_0.0.1.tar: Not found in archive
> >> > tar: Error exit delayed from previous errors
> >> > Error: cannot open file 'bnsl/DESCRIPTION' for reading
> >> > [ellis@net-78815 ~/Bayesian Networks]$ 
> >> 
> >> > Results in a file named "Bayesian" (that appears to be the
> >> > uncompressed tar file) in ~/. I suspect some missing quotes somewhere.
> >> 
> >> The problem definitely occurs when calling R CMD build from a dir whose
> >> file path contains white space.  Now in R CMD build we have
> >> 
> >> $ grep filepath build.in 
> >> my $filepath = &file_path($startdir, $filename);
> >> R_system("zip -r9X $filepath.zip $pkgs $topLevelFiles");
> >> R_system("$tar chf $filepath $pkgs $topLevelFiles");
> >> R_system("gzip -9f $filepath");
> >> my $filepath = &file_path($startdir, $filename);
> >> my $origfilepath = $filepath;
> >> $filepath =~ s+^([A-Za-x]):+/cygdrive/\1+;
> >> R_system("$tar chf $filepath $pkgname");
> >> R_system("$tar xhf $filepath");
> >> R_system("$tar chf $filepath $pkgname");
> >> R_system("gzip -9f $origfilepath");
> >> 
> >> so in fact in none of the calls to R_system() with $filepath do we
> >> currently perform any kind of quoting or shell escaping.
> >> 
> >> A simple improvement would be quoting all filepaths in R_system() calls
> >> via \"...\" or '...'.  Unless someone has a better idea or wants to put
> >> in more effort ...
> 
> > -- 
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272866 (PA)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From p.dalgaard at biostat.ku.dk  Wed Apr 28 15:33:24 2004
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: Wed Apr 28 15:37:23 2004
Subject: (PR#6830) Re: [Rd] 'R CMD build' fails when there are spaces in
	the path (PR#6830)
In-Reply-To: <Pine.LNX.4.44.0404281417550.25610-100000@gannet.stats>
References: <Pine.LNX.4.44.0404281417550.25610-100000@gannet.stats>
Message-ID: <x2u0z4b523.fsf@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> On Wed, 28 Apr 2004, Kurt Hornik wrote:
> 
> > >>>>> Prof Brian Ripley writes:
> > 
> > > Note that it *does* work under Windows (via mapping names to short
> > > names without spaces), so we should take care not to break that (and I
> > > think adding quotes will as the shell quoting rules appear to be are
> > > different).
> > 
> > I thought that R_system() would portably invoke a Bourne shell?
> 
> No, it is ash on Windows, which is not quite Bourne.

Well, at least it isn't CMD.EXE. Enclosing things in double quotes
does seem to work with ash (at least what RedHat calls ash):

$ X="abc def"
$ cat > "$X"
bla bla
$ cat $X
cat: abc: No such file or directory
cat: def: No such file or directory
$ cat "$X"
bla bla

BTW, I had the displeasure of having to use the ash command line
recently (teaching compiling and package building on a system where
the control freaks^W^Wsystem administrators had disabled CMD.EXE). Is
there a better way?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

From rsparapa at post.its.mcw.edu  Wed Apr 28 16:28:23 2004
From: rsparapa at post.its.mcw.edu (rsparapa@post.its.mcw.edu)
Date: Wed Apr 28 16:28:27 2004
Subject: [Rd] (PR#6815):  build fails for foreign with Sun Forte
Message-ID: <20040428142823.5A6711041E@slim.kubism.ku.dk>

This is a reproducible bug that I reported earlier.  The work-around is to 
remove the link foreign.tgz so that the build does not attempt to create the 
foreign library.  However, there is actually nothing wrong with the foreign 
source so the problem must be somewhere in the configure process.  After make 
install, then use the original source as follows and everything should work:
R CMD INSTALL foreign_0.6-6.tar.gz

Rodney Sparapani              Medical College of Wisconsin
Sr. Biostatistician           Patient Care & Outcomes Research
rsparapa@mcw.edu              http://www.mcw.edu/pcor
Was 'Name That Tune' rigged?  WWLD -- What Would Lombardi Do

From maechler at stat.math.ethz.ch  Wed Apr 28 16:45:04 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed Apr 28 16:45:06 2004
Subject: [Rd] Re: model.matrix.default(x ~ y) bug when y is array (PR#6838)
Message-ID: <20040428144504.192BB10449@slim.kubism.ku.dk>

A spill over from R-help  reports by
Jonathan Williams, Rich Raubertas, G?ran Brostr?m et al. :

x  <- 1:7
y. <- x 
y  <- array(x)

model.matrix(x ~ y) # behaves badly when called repeatedly;
	       	    # which for me means memory allocation problems
## as opposed to 

 model.matrix(x ~ y.) # which is all fine

The bug is in model.matrix.default():
one part of the problems happens in the line
    ans <- .Internal(model.matrix(t, data))
    (which only returns the intercept part).

How to fix this is not yet clear to me, since we have to decide
if the internal C code should do more checking
or the R code in model.matrix.default.

Martin

From ripley at stats.ox.ac.uk  Wed Apr 28 16:53:53 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed Apr 28 16:53:58 2004
Subject: [Rd] (PR#6815):  build fails for foreign with Sun Forte
In-Reply-To: <20040428142823.5A6711041E@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404281549280.25719-100000@gannet.stats>

There is nothing here to reproduce, as *we* said earlier!  We need the
exact details (OS, compilers, R version, make version, environmental
variables, configure command line etc) just to document the problem. You
have not mentioned what goes wrong nor given any error messages.

To repeat, R 1.9.0 *does* build on Sun Solaris 8 and 9 using the Sun Forte
7 aka Pro One compilers.  The problem is something about your setup, and
in particular is the separate installation works it looks like a bug in
either your make or your shell -- so exactly which versions are they?


On Wed, 28 Apr 2004 rsparapa@post.its.mcw.edu wrote:

> This is a reproducible bug that I reported earlier.  The work-around is to 
> remove the link foreign.tgz so that the build does not attempt to create the 
> foreign library.  However, there is actually nothing wrong with the foreign 
> source so the problem must be somewhere in the configure process.  After make 
> install, then use the original source as follows and everything should work:
> R CMD INSTALL foreign_0.6-6.tar.gz

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From maechler at stat.math.ethz.ch  Wed Apr 28 17:20:43 2004
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed Apr 28 17:20:46 2004
Subject: [Rd] boxplot graphical arguments (PR#6832)
Message-ID: <20040428152043.F03501046B@slim.kubism.ku.dk>

>>>>> "arnima" == arnima  <arnima@u.washington.edu>
>>>>>     on Wed, 28 Apr 2004 04:42:33 +0200 (CEST) writes:

    arnima> Dear r-bugs, 

there's no such group nor person --  "R developers" might be
appropriate (including R-core but more)
{or did I just not get your implied joke?  never mind}

    arnima> I'd like to be able to draw boxplots
    arnima> with solid or dotted whisker lines.  The lty
    arnima> argument is currently ignored by boxplot(), and
    arnima> indeed hardwired in bxp().

    arnima> It's not very difficult

exactly

    arnima>  to customize these functions
    arnima> to generate various types of boxplots, but generally
    arnima> it might be an idea to allow the user to pass a few
    arnima> more graphical arguments to boxplot(). The approach
    arnima> might as well mimic S-Plus, but still retain the default R look.

Good ideas, I agree!  And you are giving all the reasons why it
makes sense for us to wait for your improvement patches,
to be specific, probably to the files

   R-1.9.0/src/library/graphics/R/boxplot.R
   R-1.9.0/src/library/graphics/man/boxplot.Rd
   R-1.9.0/src/library/graphics/man/bxp.Rd

    arnima> Thanks, Arni

Thank you, in advance, for your contribution :-)

Martin Maechler

From aa056 at chebucto.ns.ca  Wed Apr 28 17:35:11 2004
From: aa056 at chebucto.ns.ca (George N. White III)
Date: Wed Apr 28 17:35:37 2004
Subject: [Rd] is.na(valid_date) too often true on SGI MIPS (PR#6814)
In-Reply-To: <Pine.LNX.4.44.0404232235430.13187-100000@gannet.stats>
References: <Pine.LNX.4.44.0404232235430.13187-100000@gannet.stats>
Message-ID: <Pine.SGI.4.58.0404281141330.370928@montigo.bio.dfo.ca>

On Fri, 23 Apr 2004, Prof Brian Ripley wrote:

> On Fri, 23 Apr 2004, George N. White III wrote:
>
> > On Fri, 23 Apr 2004, Prof Brian Ripley wrote:
> >
> > > I'm sorry, but this is completely unreproducible, and the second you say
> > > is true you quote as false.

I apologize for wasting your time.

The reason "make check" failed is because I somehow thought that SGI had
adopted Arthur Olson's tz data <ftp://elsie.nci.nih.gov/pub/> (see also:
<http://cspry.co.uk/computing/Indy_admin/TIMEZONE.html>).

After installing Olson's tz library and data and
adding '-L/usr/local/lib -ltz' to the list of libraries,
"make check" succeeds.

It would be helpful to sprinkle a few reminders of the existence of
Olson's data in the documentation.

--
George N. White III  <aa056@chebucto.ns.ca>
  Head of St. Margarets Bay, Nova Scotia, Canada

From aa056 at chebucto.ns.ca  Wed Apr 28 17:36:03 2004
From: aa056 at chebucto.ns.ca (aa056@chebucto.ns.ca)
Date: Wed Apr 28 17:36:10 2004
Subject: [Rd] is.na(valid_date) too often true on SGI MIPS (PR#6814)
Message-ID: <20040428153603.663AAEFB8@slim.kubism.ku.dk>

On Fri, 23 Apr 2004, Prof Brian Ripley wrote:

> On Fri, 23 Apr 2004, George N. White III wrote:
>
> > On Fri, 23 Apr 2004, Prof Brian Ripley wrote:
> >
> > > I'm sorry, but this is completely unreproducible, and the second you say
> > > is true you quote as false.

I apologize for wasting your time.

The reason "make check" failed is because I somehow thought that SGI had
adopted Arthur Olson's tz data <ftp://elsie.nci.nih.gov/pub/> (see also:
<http://cspry.co.uk/computing/Indy_admin/TIMEZONE.html>).

After installing Olson's tz library and data and
adding '-L/usr/local/lib -ltz' to the list of libraries,
"make check" succeeds.

It would be helpful to sprinkle a few reminders of the existence of
Olson's data in the documentation.

--
George N. White III  <aa056@chebucto.ns.ca>
  Head of St. Margarets Bay, Nova Scotia, Canada

From wettenhall at wehi.edu.au  Thu Apr 29 01:12:24 2004
From: wettenhall at wehi.edu.au (James Wettenhall)
Date: Thu Apr 29 01:12:24 2004
Subject: [Rd] rw-FAQ.texi Q2.3/Q2.4 reference
Message-ID: <Pine.LNX.4.58.0404071933170.11807@unix28.alpha.wehi.edu.au>

Hi,

I believe 
"Create a separate shortcut for each project: see Q2.3"

in R-devel/src/gnuwin32/rw-FAQ.texi

should refer to Q2.4

Regards,
James

From wettenhall at wehi.edu.au  Thu Apr 29 06:08:30 2004
From: wettenhall at wehi.edu.au (James Wettenhall)
Date: Thu Apr 29 06:08:34 2004
Subject: [Rd] Ignore previous post - rw-FAQ.texi etc.
Message-ID: <Pine.LNX.4.44.0404291406310.14848-100000@unix24.alpha.wehi.edu.au>

Apologies,

My mail system has reposted some emails I tried to send some 
time ago after my Linux administrator upgraded sendmail etc.

Please ignore the recent post about rw-FAQ.texi etc.

Regards,
James

From Mark.Bravington at csiro.au  Thu Apr 29 09:59:41 2004
From: Mark.Bravington at csiro.au (Mark.Bravington@csiro.au)
Date: Thu Apr 29 09:59:53 2004
Subject: [Rd] a simple suggestion for the next version of R windows
Message-ID: <C4178DC99E08604EA5E2BDB989F093800240A25A@extas2-hba.tas.csiro.au>

Hi

Just to point out that Andy's suggestion is implemented automatically in the mvbutils package-- which offers a complete hierarchical structure of workspaces which can be switched, searched, etc. within the same R session. [And much more besides ;)] I try to avoid having multiple R sessions open, because of the danger of losing track and accidentally overwriting things.

mvbutils doesn't change the title bar but if the functionality gets added to R, I'll incorporate it as an option. I too dislike not being able to easily distinguish R icons, which is mainly why I end up working in MDI mode.

Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

#-----Original Message-----
#From: r-devel-bounces@stat.math.ethz.ch
#[mailto:r-devel-bounces@stat.math.ethz.ch]On Behalf Of Tao Shi
#Sent: Sunday, 25 April 2004 1:35 PM
#To: andy_liaw@merck.com; r-help@stat.math.ethz.ch
#Cc: r-devel@stat.math.ethz.ch
#Subject: RE: [Rd] a simple suggestion for the next version of R windows
#
#
#Hi, Andy:
#
#Thanks!  I think it also depends on people's working hobby.
#
#What you suggested is a good way around it.  But I'm still 
#thinking since 
#the R window already has the big blue R logo to identify 
#itself, the word "R 
#console" is really redundant and could be replaced by something more 
#informative.  Not nesessarly everytime you change to a new 
#diretory, you 
#need to change to a new identifier, but at least the every 
#first .RData file 
#you loaded.  I don't know.......  Something along that line.  
#It will be 
#very helpful when you use Alt+Tab to move between windows, b/c 
#all you see 
#are "R console"s.......
#
#...Tao
#
#
#----Original Message Follows----
#From: "Liaw, Andy" <andy_liaw@merck.com>
#To: "'Tao Shi'" <shitao@hotmail.com>,r-help-request@stat.math.ethz.ch
#CC: r-devel@stat.math.ethz.ch
#Subject: RE: [Rd] a simple suggestion for the next version of R windows
#Date: Sat, 24 Apr 2004 23:18:06 -0400
#
#I don't see how this can work.  I frequently run only one R 
#session (also in
#SDI), but change working directories several times during the 
#session, with
#or without loading the workspace files in those directories, 
#depending on
#what I need to do.  I don't think the Window title can change 
#every time I
#do setwd("somewhereElse"); load(".RData").
#
#One possibility that could probably help you is to change the R command
#prompt from "> " to the current working directory plus "> ".  
#I believe this
#can be done with the taskCallbackManager().
#
#Andy
#
# > From: Tao Shi
# >
# > Is it possible to replace the word "R Console" on the title
# > bar (is it what
# > it's called? It's the blue area above menu bar) with the name
# > of the work
# > space file you're using or loaded, so people who are runing 
#multple R
# > sessions at same time can identify them immediately.  I'm
# > using 1.9.0 in SDI
# > mode.
# >
# > Thanks,
# >
# > ...Tao
# >
# > _________________________________________________________________
# > Is your PC infected? Get a FREE online computer virus scan
# > from McAfee(r)
# > Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963
# >
# > ______________________________________________
# > R-devel@stat.math.ethz.ch mailing list
# > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
# >
# >
#
#
#---------------------------------------------------------------
#---------------
#Notice:  This e-mail message, together with any 
#attachments,...{{dropped}}
#
#______________________________________________
#R-devel@stat.math.ethz.ch mailing list
#https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
#

From ripley at stats.ox.ac.uk  Thu Apr 29 10:17:30 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Apr 29 10:19:12 2004
Subject: [Rd] a simple suggestion for the next version of R windows
In-Reply-To: <C4178DC99E08604EA5E2BDB989F093800240A25A@extas2-hba.tas.csiro.au>
Message-ID: <Pine.LNX.4.44.0404290916270.12160-100000@gannet.stats>

On Thu, 29 Apr 2004 Mark.Bravington@csiro.au wrote:

> Hi
> 
> Just to point out that Andy's suggestion is implemented automatically in the mvbutils package-- which offers a complete hierarchical structure of workspaces which can be switched, searched, etc. within the same R session. [And much more besides ;)] I try to avoid having multiple R sessions open, because of the danger of losing track and accidentally overwriting things.
> 
> mvbutils doesn't change the title bar but if the functionality gets
added to R, I'll incorporate it as an option. I too dislike not being 
able to easily distinguish R icons, which is mainly why I end up 
working in MDI mode.

It already has been: take a look at the r-devel version (and Duncan M has 
a pre-compiled binary up).

> 
> Mark
> 
> *******************************
> 
> Mark Bravington
> CSIRO (CMIS)
> PO Box 1538
> Castray Esplanade
> Hobart
> TAS 7001
> 
> phone (61) 3 6232 5118
> fax (61) 3 6232 5012
> Mark.Bravington@csiro.au 
> 
> #-----Original Message-----
> #From: r-devel-bounces@stat.math.ethz.ch
> #[mailto:r-devel-bounces@stat.math.ethz.ch]On Behalf Of Tao Shi
> #Sent: Sunday, 25 April 2004 1:35 PM
> #To: andy_liaw@merck.com; r-help@stat.math.ethz.ch
> #Cc: r-devel@stat.math.ethz.ch
> #Subject: RE: [Rd] a simple suggestion for the next version of R windows
> #
> #
> #Hi, Andy:
> #
> #Thanks!  I think it also depends on people's working hobby.
> #
> #What you suggested is a good way around it.  But I'm still 
> #thinking since 
> #the R window already has the big blue R logo to identify 
> #itself, the word "R 
> #console" is really redundant and could be replaced by something more 
> #informative.  Not nesessarly everytime you change to a new 
> #diretory, you 
> #need to change to a new identifier, but at least the every 
> #first .RData file 
> #you loaded.  I don't know.......  Something along that line.  
> #It will be 
> #very helpful when you use Alt+Tab to move between windows, b/c 
> #all you see 
> #are "R console"s.......
> #
> #...Tao
> #
> #
> #----Original Message Follows----
> #From: "Liaw, Andy" <andy_liaw@merck.com>
> #To: "'Tao Shi'" <shitao@hotmail.com>,r-help-request@stat.math.ethz.ch
> #CC: r-devel@stat.math.ethz.ch
> #Subject: RE: [Rd] a simple suggestion for the next version of R windows
> #Date: Sat, 24 Apr 2004 23:18:06 -0400
> #
> #I don't see how this can work.  I frequently run only one R 
> #session (also in
> #SDI), but change working directories several times during the 
> #session, with
> #or without loading the workspace files in those directories, 
> #depending on
> #what I need to do.  I don't think the Window title can change 
> #every time I
> #do setwd("somewhereElse"); load(".RData").
> #
> #One possibility that could probably help you is to change the R command
> #prompt from "> " to the current working directory plus "> ".  
> #I believe this
> #can be done with the taskCallbackManager().
> #
> #Andy
> #
> # > From: Tao Shi
> # >
> # > Is it possible to replace the word "R Console" on the title
> # > bar (is it what
> # > it's called? It's the blue area above menu bar) with the name
> # > of the work
> # > space file you're using or loaded, so people who are runing 
> #multple R
> # > sessions at same time can identify them immediately.  I'm
> # > using 1.9.0 in SDI
> # > mode.
> # >
> # > Thanks,
> # >
> # > ...Tao
> # >
> # > _________________________________________________________________
> # > Is your PC infected? Get a FREE online computer virus scan
> # > from McAfee(r)
> # > Security. http://clinic.mcafee.com/clinic/ibuy/campaign.asp?cid=3963
> # >
> # > ______________________________________________
> # > R-devel@stat.math.ethz.ch mailing list
> # > https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> # >
> # >
> #
> #
> #---------------------------------------------------------------
> #---------------
> #Notice:  This e-mail message, together with any 
> #attachments,...{{dropped}}
> #
> #______________________________________________
> #R-devel@stat.math.ethz.ch mailing list
> #https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> #
> 
> ______________________________________________
> R-devel@stat.math.ethz.ch mailing list
> https://www.stat.math.ethz.ch/mailman/listinfo/r-devel
> 
> 

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From ripley at stats.ox.ac.uk  Thu Apr 29 12:12:45 2004
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu Apr 29 12:12:49 2004
Subject: [Rd] Re: model.matrix(x ~ y) bug when y is array (PR#6838)
Message-ID: <20040429101245.86B4EEFCF@slim.kubism.ku.dk>

The underlying cause is that ncols(1D array) returns a random result,
often zero, so the term gets zero columns allocated in the model matrix
and a (long-existent) loop assums that columns is strictly positive.

I am putting in a check for zero columns, as well as repairing ncols which 
does

      t = getAttrib(s, R_DimSymbol);
      if (t == R_NilValue) return 1;
      return INTEGER(t)[1];

without any check on the length of t!

On Wed, 28 Apr 2004, Prof Brian Ripley wrote:

> I will tomorrow.  I want to know why it is happening before we guard 
> against whatever is the problem.
> 
> On Wed, 28 Apr 2004, Martin Maechler wrote:
> 
> > Is anybody actively looking into this?
> > 
> > If yes, I won't.
> > 
> > There are many places one could guard against the problem,
> > terms() being another possibility besides model.matrix.default()
> > or model.frame() or ...


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From villirillo at inwind.it  Thu Apr 29 12:53:44 2004
From: villirillo at inwind.it (Villirillo)
Date: Thu Apr 29 12:53:49 2004
Subject: [Rd] line transect method
Message-ID: <001701c42dd8$3e6c0930$53a6623e@xnf50cg03dx2pj>

Hello, I'm a final-year student in statistics and I deal with as subject of thesis "rare and elusive populations". I want make a simulation, in which I want generate a population and estimate its density with "line transect method" using R language. Is there someone that can send me the program that generate a population and estimate its density with "line transect method" in R language, please?

I'm sure of your courtesy I'd like immediately to thank for whoever wants to answer me and send the program. 

My e-mail: villirillo@inwind.it

	[[alternative HTML version deleted]]

From dmurdoch at pair.com  Thu Apr 29 14:15:10 2004
From: dmurdoch at pair.com (Duncan Murdoch)
Date: Thu Apr 29 14:15:23 2004
Subject: [Rd] a simple suggestion for the next version of R windows
In-Reply-To: <Pine.LNX.4.44.0404290916270.12160-100000@gannet.stats>
References: <C4178DC99E08604EA5E2BDB989F093800240A25A@extas2-hba.tas.csiro.au>
	<Pine.LNX.4.44.0404290916270.12160-100000@gannet.stats>
Message-ID: <56s19091j0o07oui9clota2tdad75m17bu@4ax.com>

On Thu, 29 Apr 2004 09:17:30 +0100 (BST), Prof Brian Ripley
<ripley@stats.ox.ac.uk> wrote:

>On Thu, 29 Apr 2004 Mark.Bravington@csiro.au wrote:

>> mvbutils doesn't change the title bar but if the functionality gets
>added to R, I'll incorporate it as an option. I too dislike not being 
>able to easily distinguish R icons, which is mainly why I end up 
>working in MDI mode.
>
>It already has been: take a look at the r-devel version (and Duncan M has 
>a pre-compiled binary up).

The usual warnings apply to using that version:  it's a development
version, and not as stable as a release.  In fact, twice I've seen
access violations associated with copying and pasting, but haven't
tracked down the exact conditions yet.  If anyone can make this error
reproducible please let me know how, and I'll fix it.

Duncan Murdoch

From aa056 at chebucto.ns.ca  Thu Apr 29 14:37:47 2004
From: aa056 at chebucto.ns.ca (George N. White III)
Date: Thu Apr 29 14:38:35 2004
Subject: [Rd] is.na(valid_date) too often true on SGI MIPS (PR#6814)
In-Reply-To: <Pine.SGI.4.58.0404281141330.370928@montigo.bio.dfo.ca>
References: <Pine.LNX.4.44.0404232235430.13187-100000@gannet.stats>
	<Pine.SGI.4.58.0404281141330.370928@montigo.bio.dfo.ca>
Message-ID: <Pine.SGI.4.58.0404290925560.387182@montigo.bio.dfo.ca>

On Wed, 28 Apr 2004, George N. White III wrote:

> It would be helpful to sprinkle a few reminders of the existence of
> Olson's data in the documentation.

>From a posting to comp.sys.sgi.admin I learned that SGI does use Olsen's
database in the "feature" stream (e.g., 6.5.Nf, N>2).  The machines I use
have 6.5.19m and 6.5.21m, but two systems with 6.5.22m have Olsen's
database (see: "man zdump").

$ /sbin/uname -aR
IRIX64 [...] 6.5 6.5.22m 10070055 IP30
$ showfiles eoe.sw.base | grep TZ
f 11649 20003 eoe.sw.base             usr/lib/locale/TZ/africa
f 45578 26997 eoe.sw.base             usr/lib/locale/TZ/asia
f 11309 27954 eoe.sw.base             usr/lib/locale/TZ/australasia
f 56271  2985 eoe.sw.base             usr/lib/locale/TZ/backward
f 37003  1687 eoe.sw.base             usr/lib/locale/TZ/etcetera
f 21755 88582 eoe.sw.base             usr/lib/locale/TZ/europe
f 38515   311 eoe.sw.base             usr/lib/locale/TZ/factory
f 25667 35826 eoe.sw.base             usr/lib/locale/TZ/northamerica
f  4425  1107 eoe.sw.base             usr/lib/locale/TZ/pacificnew
f 15976 19159 eoe.sw.base             usr/lib/locale/TZ/solar87
f 39829 19177 eoe.sw.base             usr/lib/locale/TZ/solar88
f 32211 19453 eoe.sw.base             usr/lib/locale/TZ/solar89
f 29073 15106 eoe.sw.base             usr/lib/locale/TZ/southamerica

I can't seem to find this mentioned in the announcments, so I'm not
sure if these two systems were switched from "f" to "m" at some
point or if SGI put a little gift into 6.5.22m.  I suppose
configure needs to check for a decent tz database, but maybe it
is enough to add a little note to the Irix section of the install.

--
George N. White III  <aa056@chebucto.ns.ca>
  Head of St. Margarets Bay, Nova Scotia, Canada

From cmoffet at nwrc.ars.usda.gov  Thu Apr 29 16:49:00 2004
From: cmoffet at nwrc.ars.usda.gov (cmoffet@nwrc.ars.usda.gov)
Date: Thu Apr 29 16:49:05 2004
Subject: [Rd] model.tabels warning refers to wrong function (PR#6839)
Message-ID: <20040429144900.DED89F0A1@slim.kubism.ku.dk>

Full_Name: Corey A. Moffet
Version: 1.8.1
OS: Windows 2000 and RHL 9
Submission from: (NULL) (199.133.140.156)


The function model.tables.aov and perhaps other model.tables methods refer the
user to use the function se.contrasts when the design is unbalanced.  The
function name is se.contrast (singular).

From ripley at stats.ox.ac.uk  Thu Apr 29 17:01:46 2004
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu Apr 29 17:01:52 2004
Subject: [Rd] model.tabels warning refers to wrong function (PR#6839)
In-Reply-To: <20040429144900.DED89F0A1@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0404291558430.30723-100000@gannet.stats>

It's not meant to be the name of the function -- you need to call
se.contrast() more than once.  We can improve the wording.

What are `model.tabels', though?

On Thu, 29 Apr 2004 cmoffet@nwrc.ars.usda.gov wrote:

> Full_Name: Corey A. Moffet
> Version: 1.8.1
> OS: Windows 2000 and RHL 9
> Submission from: (NULL) (199.133.140.156)
> 
> 
> The function model.tables.aov and perhaps other model.tables methods refer the
> user to use the function se.contrasts when the design is unbalanced.  The
> function name is se.contrast (singular).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

