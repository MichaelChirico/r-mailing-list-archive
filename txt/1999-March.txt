From khal@alumni.uv.es  Mon Mar  1 06:22:56 1999
From: khal@alumni.uv.es (Kjetil Halvorsen)
Date: Mon, 01 Mar 1999 07:22:56 +0100
Subject: [R] rw0632 makes stray .Rhistory orphans
References: <000001be5f1c$ef0b70e0$6f1abb81@fenris> <19990223134026.06314@hal.stat.unipd.it> <36D4644A.2C61BFC9@alumni.uv.es> <19990224232611.16861@hal.stat.unipd.it>
Message-ID: <36DA3240.FF683312@alumni.uv.es>

While it is time to do changes ... The save image as postscript
menu item opens the file save dialog always to save in 
"my documents", I would rather have my images in HOME, which is
where the projecy lives

K


Guido Masarotto wrote:
> 
> On Wed, Feb 24, 1999 at 09:42:50PM +0100, Kjetil Halvorsen wrote:
> > Opened the tema, another small mal-function which could be easily
> > repaired:  When sourcing a file from the menu, the working directory
> > (HOME?) changes to the files directory, then leaving R the Rdata
> > gets saved in the wrong place! I feel that sourcing shouldnt change
> > HOME, it surprised me more than once.
> >
>   K.,
>   I think you are perfectly right.
>   Any opinion by others before I change the source?
>   And, what about loading and saving the workspaces?
>   I haven't checked but since code is essentialy the same
>   I suppose behaviour is the same  and, hence, it must be
>   changed too.
> 
>   g.
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Mon Mar  1 10:59:24 1999
From: khal@alumni.uv.es (khal@alumni.uv.es)
Date: Mon, 1 Mar 1999 11:59:24 +0100
Subject: "xpdrows.data.frame" (PR#131)
Message-ID: <199903011059.LAA05213@biostat.ku.dk>

This is a multi-part message in MIME format.
--------------E6449E20185CF0A71A620457
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

This is a follow-up to bug sent to days ago, which bounced from r-devel
because 
the example was to large. Now example is smaller, and behaviour is as
belo, 
EXEPT that r-windows not any more bombs, so main problem is
"xpdrows.data.frame"???

By the way, how to debug this example under windows? debug() doesnt
accept
the functions used (.Primitive), and R wont run under gdb --- may have
to do
with R.dll, from the manual for gdb i get it that it cannot debug
functions
in shared libraries?

copied:


Using the data frames frame1 and frame2 from the attached saved dataset
frame.dat
(say load("frame.dat") ):

> for (i in 1:11) {
+      frame1[i, ] <- frame2[i, ] }
Error: couldn't find function "xpdrows.data.frame"

--- What is function xpdrows.data.frame?  There should be an more
appropiate
     error mssage here! (the data frame frame1 isn't long enough for the
last
     assignment, but this is a small, artificiall example, ocurred same
error
     with much larger frames, and the reason for the error was'nt clear,
not necessarily
     "index out of bound", as appropiate(?) here). 

After the above:

> dim(frame1)
NULL
> length(frame1)
[1] 11
> class(frame1)
NULL

which shows that frame1 is destroyed as a data frame, but the str
function works on it.
but trying to print frame1

> frame1

and R (windows) bombs, after some considerable time! (~10 min)
This data frame has a factor with a very large levels set, might have to 
do with that. 

The error message should be meaningfull, and shuld'nt return a destroyed
object
which bombs when printing.

Kjetil Halvorsen
--------------E6449E20185CF0A71A620457
Content-Type: application/x-unknown-content-type-DAT_auto_file; name="frame.dat"
Content-Transfer-Encoding: base64
Content-Disposition: inline; filename="frame.dat"

MTk3Ngo2IDEzMSA1NzEKMCAxMyAiY2xhc3MiCjEgMzEgImxldmVscyIKMiAzNyAibmFtZXMi
CjMgNDMgInJvdy5uYW1lcyIKNSAxNzMwMTIgImZyYW1lMiIKNiAxNzMwMzAgImZyYW1lMSIK
NCA2NTQ3NQo3IDU3NzUxMQo4IDU3NzUxMgo5IDU3NzY2NwoxMCA1Nzc2NjgKMTEgNTc3NjY5
CjEyIDU3NzY3MAoxMyA1Nzc2NzIKMTQgNjA5Njc3CjE1IDYwOTY3OAoxNiA2MDk2NzkKMTcg
NjA5NjgwCjE4IDYwOTY4MgoxOSA2MTQ1ODIKMjAgNjE0NTgzCjIxIDYxNDU4NAoyMiA2MTQ1
ODUKMjMgNjE0NTg2CjI0IDYxNDU4NwoyNSA2MTQ1ODkKMjYgNjE0NTkwCjI3IDYxNDU5MQoy
OCA2MTQ1OTIKMjkgNjE0NTkzCjMwIDYxNDU5NAozMSA2MTQ1OTUKMzIgNjE0NTk2CjMzIDYx
NDU5NwozNCA2MTQ1OTgKMzUgNjE0NTk5CjM2IDYxNDYwMAozNyA2MTQ2MTMKMzggNjQwNDcz
CjM5IDY0MDQ3NAo0MCA2NDA0NzUKNDEgNjQwNTYzCjQyIDY0MDU2NAo0MyA2ODE1MTkKNDQg
NjgxNTIwCjQ1IDY4MTUyMQo0NiA2ODE1MjIKNDcgNjgxNTIzCjQ4IDY4MTUyNAo0OSA2ODE1
MjUKNTAgNjgxNTI2CjUxIDY4MTUyNwo1MiA2ODE1MjgKNTMgNjgxNTI5CjU0IDY4MTUzMAo1
NSA2ODE1MzEKNTYgNjgxNTMyCjU3IDY4MTUzMwo1OCA2ODE1MzQKNTkgNjgxNTM1CjYwIDY4
MTUzNgo2MSA2ODE1MzcKNjIgNjgxNTM4CjYzIDY4MTUzOQo2NCA2ODE1NDAKNjUgNjg5MDAx
CjY2IDY4OTAxNQo2NyA2ODkwMjgKNjggNjg5MDQxCjY5IDY4OTA1NQo3MCA2ODkwNjkKNzEg
Njg5MDgzCjcyIDY4OTA5Nwo3MyA2ODkxMTAKNzQgNjg5MTIzCjc1IDY4OTEzNQo3NiA2ODkx
NDgKNzcgNjg5MTYwCjc4IDY4OTE2MQo3OSA2ODkxNzcKODAgNjg5MTc4CjgxIDY4OTE5Mgo4
MiA2ODkxOTMKODMgNjg5MjA5Cjg0IDY4OTIxMAo4NSA2ODkyMjYKODYgNjg5MjI3Cjg3IDY4
OTI0Mwo4OCA2ODkyNDQKODkgNjg5MjU1CjkwIDY4OTI1Ngo5MSA2ODkyNTkKOTIgNjg5MjYw
CjkzIDY4OTI3Mwo5NCA2ODkyNzQKOTUgNjg5Mjg1Cjk2IDY4OTI4Ngo5NyA2ODkyODcKOTgg
Njg5Mjg4Cjk5IDY4OTI4OQoxMDAgNjg5MjkwCjEwMSA2ODkyOTEKMTAyIDY4OTI5MgoxMDMg
Njg5MjkzCjEwNCA2ODkyOTQKMTA1IDY4OTI5NQoxMDYgNjg5Mjk2CjEwNyA2OTk4ODIKMTA4
IDY5OTg4MwoxMDkgNjk5ODg0CjExMCA2OTk4ODUKMTExIDY5OTg4NgoxMTIgNjk5ODg3CjEx
MyA2OTk4ODgKMTE0IDY5OTg4OQoxMTUgNjk5ODkwCjExNiA2OTk4OTEKMTE3IDY5OTg5Mgox
MTggNjk5ODkzCjExOSA2OTk4OTQKMTIwIDY5OTg5NQoxMjEgNjk5ODk2CjEyMiA2OTk4OTcK
MTIzIDY5OTg5OAoxMjQgNjk5ODk5CjEyNSA2OTk5MDAKMTI2IDY5OTkwMgoxMjcgNjk5OTAz
CjEyOCA2OTk5MDQKMTI5IDY5OTkwNQoxMzAgNjk5OTA2CjEzMSA2OTk5MDcKMTMyIDY5OTkw
OAoxMzMgNjk5OTA5CjEzNCA2OTk5MTAKMTM1IDY5OTkxMQoxMzYgNjk5OTg5CjQgOSAwIDAg
LTEgNiAiZmFjdG9yIgo3IDIgMCAwIC0xIDYxNDYxMyA1Nzc1MTIgMTczMDMwCjggMiAwIDAg
LTEgNjk5ODgyIC0xIDE3MzAxMgo5IDIgMCAwIC0xIDU3NzY2OCAtMSAxMwoxMCAxNiAwIDAg
LTEgMQo2NTQ3NQoxMSAyIDAgMCAtMSA1Nzc2NzAgNTc3NjY3IDMxCjEyIDE2IDAgMCAtMSAx
MAo2ODkxNjAgNjg5MjQzIDY4OTIwOSA2ODkxOTIgNjg5MjI2IDY4OTE3NyA2ODkyNTUgNjg5
MjU5IDY4OTI3MyA2ODkyODUKMTMgMTMgMSAwIDU3NzY2OSAxMAoxMCA5IDggNyAyIDUgMyA0
IDYgMQoxNCAyIDAgMCAtMSA2MDk2NzggLTEgMTMKMTUgMTYgMCAwIC0xIDEKNjU0NzUKMTYg
MiAwIDAgLTEgNjA5NjgwIDYwOTY3NyAzMQoxNyAxNiAwIDAgLTEgMTAKNjg5Mjg2IDY4OTI3
NCA2ODkyNjAgNjg5MjU2IDY4OTI0NCA2ODkyMjcgNjg5MjEwIDY4OTE5MyA2ODkxNzggNjg5
MTYxCjE4IDEzIDEgMCA2MDk2NzkgMTAKMSAyIDMgNCA1IDYgNyA4IDkgMTAKMTkgMiAwIDAg
LTEgNjE0NTgzIC0xIDEzCjIwIDE2IDAgMCAtMSAxCjY0MDU2MwoyMSAyIDAgMCAtMSA2MTQ1
ODUgNjE0NTgyIDQzCjIyIDE2IDAgMCAtMSAxMAo2ODE1NDAgNjgxNTM5IDY4MTUzOCA2ODE1
MzcgNjgxNTM2IDY4MTUzNSA2ODE1MzQgNjgxNTMzIDY4MTUzMiA2ODE1MzEKMjMgMiAwIDAg
LTEgNjE0NTg3IDYxNDU4NCAzNwoyNCAxNiAwIDAgLTEgMTQKNjg5Mjk2IDY4OTI5NSA2ODky
OTQgNjg5MjkzIDY4OTI5MiA2ODkyOTEgNjg5MjkwIDY4OTI4OSA2ODkyODggNjg5Mjg3CjY0
MDU2NCA2NDA0NzMgNjQwNDc0IDY0MDQ3NQoyNSAxNCAwIDAgLTEgMTAKMTkwLjMgMTg0LjEg
TkEgTkEgMTc1LjggMTc2LjcgMTc4LjkgMTgzLjggMTg3LjggMTUzLjEKMjYgMTQgMCAwIC0x
IDEwCjIwMS41IDIxNC4zIE5BIE5BIDE4OC44IDE5NS45IDE5NC44IDE5OS41IDE4NC4xIDE4
Ny41CjI3IDE0IDAgMCAtMSAxMAoxNzUuMiAyMDAgTkEgMTc4LjEgMTY5LjggMTc4LjggMTcz
IDE2OS43IDEwNi4zIDU1LjUxCjI4IDE0IDAgMCAtMSAxMAoxNSAxMyAxMyAxMiAxMSAxMSAx
MSAxMSAxMSAxMQoyOSAxNCAwIDAgLTEgMTAKNTQ0MzQgNDc5NzkgNDc0OTMgNDU1ODQgNDE4
NDUgNDIwNDQgNDE4NDYgNDE5NDggNDIwNDYgNDE4NDMKMzAgMTQgMCAwIC0xIDEwCjcgNyA3
IDcgNyA3IDcgNyA3IDcKMzEgMTQgMCAwIC0xIDEwCjEgMiAzIDQgNSA2IDcgOCA5IDEwCjMy
IDE0IDAgMCAtMSAxMAoxODM5NiAxODQ5NiAxODU5NiAxODY5NiAxODc5NiAxODg5NiAxODk5
NiAxOTA5NiAxOTE5NiAxOTI5NgozMyAxNCAwIDAgLTEgMTAKMzk4MDMgMjE2ODAuOSAxODkz
OS41IDEyNjE4LjkgMjgwOS45NSAzMTAyLjMyIDI3NTguODMgMjk4Ny4xNyAzMTE2LjA2IDEz
OTYuMDkKMzQgMTQgMCAwIC0xIDEwCjIyNDIgOTkwLjUgODE1LjggNDY2LjEgNTIuNDEgNjAu
OSA0OS40NCA1Ni4zIDU5LjQ1IDI0LjMyCjM1IDE0IDAgMCAtMSAxMAoxNjAuNyA1OC45IDQ2
LjkxIDI1LjI1IDMuMTg3IDMuNjE1IDMuMDU3IDMuMzk3IDMuNTc1IDEuNTE4CjM2IDE0IDAg
MCAtMSAxMAo0NS4xIDYyLjIgNjMuOCA3MCA4My4xIDgyLjMgODMgODIuNyA4Mi4zIDgzCjM3
IDE5IDEgMCA2MTQ1ODYgMTQKNjA5NjgyIDU3NzY3MiA2MTQ2MDAgNjE0NTk5IDYxNDU5OCA2
MTQ1OTcgNjE0NTk2IDYxNDU5NSA2MTQ1OTQgNjE0NTkzCjYxNDU5MiA2MTQ1OTEgNjE0NTkw
IDYxNDU4OQozOCA5IDAgMCAtMSA1ICJDSUUxNyIKMzkgOSAwIDAgLTEgNSAiQ0lFMTYiCjQw
IDkgMCAwIC0xIDUgIkNJRTE1Igo0MSA5IDAgMCAtMSAxMCAiZGF0YS5mcmFtZSIKNDIgOSAw
IDAgLTEgNCAiSG9yYSIKNDMgOSAwIDAgLTEgMiAiMjIiCjQ0IDkgMCAwIC0xIDIgIjIxIgo0
NSA5IDAgMCAtMSAyICIyMCIKNDYgOSAwIDAgLTEgMiAiMTkiCjQ3IDkgMCAwIC0xIDIgIjE4
Igo0OCA5IDAgMCAtMSAyICIxNyIKNDkgOSAwIDAgLTEgMiAiMTYiCjUwIDkgMCAwIC0xIDIg
IjE1Igo1MSA5IDAgMCAtMSAyICIxNCIKNTIgOSAwIDAgLTEgMiAiMTMiCjUzIDkgMCAwIC0x
IDIgIjEyIgo1NCA5IDAgMCAtMSAyICIxMSIKNTUgOSAwIDAgLTEgMiAiMTAiCjU2IDkgMCAw
IC0xIDEgIjkiCjU3IDkgMCAwIC0xIDEgIjgiCjU4IDkgMCAwIC0xIDEgIjciCjU5IDkgMCAw
IC0xIDEgIjYiCjYwIDkgMCAwIC0xIDEgIjUiCjYxIDkgMCAwIC0xIDEgIjQiCjYyIDkgMCAw
IC0xIDEgIjMiCjYzIDkgMCAwIC0xIDEgIjIiCjY0IDkgMCAwIC0xIDEgIjEiCjY1IDkgMCAw
IC0xIDggIjExOjM1OjQyIgo2NiA5IDAgMCAtMSA4ICIxMTozNTo1NiIKNjcgOSAwIDAgLTEg
OCAiMTE6MzY6MDgiCjY4IDkgMCAwIC0xIDggIjExOjM2OjIxIgo2OSA5IDAgMCAtMSA4ICIx
MTozNjozMiIKNzAgOSAwIDAgLTEgOCAiMTE6MzY6NDEiCjcxIDkgMCAwIC0xIDggIjExOjM2
OjUwIgo3MiA5IDAgMCAtMSA4ICIxMTozNjo1OSIKNzMgOSAwIDAgLTEgOCAiMTE6Mzc6MDUi
Cjc0IDkgMCAwIC0xIDggIjExOjM4OjUwIgo3NSA5IDAgMCAtMSA4ICIxMTozNzoxNSIKNzYg
OSAwIDAgLTEgOCAiMTE6Mzc6MjAiCjc3IDkgMCAwIC0xIDggIjExOjM3OjIzIgo3OCA5IDAg
MCAtMSA5ICIxMC1KdWwtOTYiCjc5IDkgMCAwIC0xIDggIjExOjQwOjQ2Igo4MCA5IDAgMCAt
MSA5ICIwOS1KdWwtOTYiCjgxIDkgMCAwIC0xIDggIjExOjM5OjA4Igo4MiA5IDAgMCAtMSA5
ICIwOC1KdWwtOTYiCjgzIDkgMCAwIC0xIDggIjExOjM3OjI2Igo4NCA5IDAgMCAtMSA5ICIw
Ny1KdWwtOTYiCjg1IDkgMCAwIC0xIDggIjExOjQwOjQ0Igo4NiA5IDAgMCAtMSA5ICIwNi1K
dWwtOTYiCjg3IDkgMCAwIC0xIDggIjExOjM3OjI1Igo4OCA5IDAgMCAtMSA5ICIwNS1KdWwt
OTYiCjg5IDkgMCAwIC0xIDggIjEyOjM5OjQ0Igo5MCA5IDAgMCAtMSA5ICIwNC1KdWwtOTYi
CjkxIDkgMCAwIC0xIDggIjEzOjExOjMzIgo5MiA5IDAgMCAtMSA5ICIwMy1KdWwtOTYiCjkz
IDkgMCAwIC0xIDggIjEzOjE5OjM5Igo5NCA5IDAgMCAtMSA5ICIwMi1KdWwtOTYiCjk1IDkg
MCAwIC0xIDggIjE1OjA3OjE0Igo5NiA5IDAgMCAtMSA5ICIwMS1KdWwtOTYiCjk3IDkgMCAw
IC0xIDggIk1FU1NFR1VOIgo5OCA5IDAgMCAtMSA1ICJNT05USCIKOTkgOSAwIDAgLTEgNiAi
SlVMRElBIgoxMDAgOSAwIDAgLTEgMyAiRElBIgoxMDEgOSAwIDAgLTEgMyAiVVZBIgoxMDIg
OSAwIDAgLTEgMyAiVVZCIgoxMDMgOSAwIDAgLTEgMyAiQ0lFIgoxMDQgOSAwIDAgLTEgMyAi
U1pBIgoxMDUgOSAwIDAgLTEgNCAiSE9SQSIKMTA2IDkgMCAwIC0xIDUgIkZFQ0hBIgoxMDcg
MTkgMSAwIDY5OTg5NiAxNAo2OTk5MDIgNjk5OTA3IDY5OTg4MyA2OTk4ODQgNjk5ODg1IDY5
OTg4NiA2OTk4ODcgNjk5ODg4IDY5OTg4OSA2OTk4OTAKNjk5ODkxIDY5OTg5MiA2OTk4OTMg
Njk5ODk0CjEwOCAxNCAwIDAgLTEgMTIKODMgODMgODIuNiA4MyA4Mi45IDgyLjkgODIuOSA4
Mi45IDgyLjkgODIuOQo4Mi45IDgyLjgKMTA5IDE0IDAgMCAtMSAxMgoxLjg4NCAzLjE2NyAz
LjY0MyAzLjM2NyAzLjI2MSAzLjMwMiAzLjMwOCAzLjE5OCAzLjI0NCAzLjMyCjMuMjcyIDMu
MTUzCjExMCAxNCAwIDAgLTEgMTIKMzAuNDcgNTEuNzUgNjAuOSA1NS4yMSA1My40OSA1NC4w
MyA1NC41MyA1Mi4yOCA1Mi45NSA1NC4zNgo1My40MiA1MS44NgoxMTEgMTQgMCAwIC0xIDEy
CjE3MDMuNjkgMjgyMy4zNyAzMTYxLjA3IDI5OTMuODEgMjg5Mi4xMyAyOTE0Ljg1IDI5MTku
MzYgMjg0MC4wMyAyODkzLjQ0IDI5NjMuMzkKMjkyMC4wOSAyNzc5LjQyCjExMiAxNCAwIDAg
LTEgMTIKMTkzOTYgMTk0OTYgMTk1OTYgMTk2OTYgMTk3OTYgMTk4OTYgMTk5OTYgMjAwOTYg
MjAxOTYgMjAyOTYKMjAzOTYgMjA0OTYKMTEzIDE0IDAgMCAtMSAxMgoxMSAxMiAxMyAxNCAx
NSAxNiAxNyAxOCAxOSAyMAoyMSAyMgoxMTQgMTQgMCAwIC0xIDEyCjcgNyA3IDcgNyA3IDcg
NyA3IDcKNyA3CjExNSAxNCAwIDAgLTEgMTIKNDE4NDAgNDE4MzUgNDE5MzAgNDE4MjUgNDE4
MTkgNDE4MTAgNDE4MDEgNDE3OTIgNDE3ODEgNDE3NjgKNDE3NTYgNDE3NDIKMTE2IDE0IDAg
MCAtMSAxMgoxMSAxMSAxMSAxMSAxMSAxMSAxMSAxMSAxMSAxMQoxMSAxMQoxMTcgMTQgMCAw
IC0xIDEyCjE3Ni43IDE5OS45IDE4My42IDE4NSAxMzcuMyAxODQuMyAxODguNSAxODUuNyAx
ODguMyAyMDMuNQoyMDEuNiAxODYuMwoxMTggMTQgMCAwIC0xIDEyCjEzMS4zIDIxNi45IDIx
NSAyMTQuMiAxOTMuNiAyMTIuNCAyMTUuNiAyMDMuOCBOQSAyMTQuOQoyMTIuOCAyMjIKMTE5
IDE0IDAgMCAtMSAxMgo4OS4wOSBOQSAxOTkuNiAxOTkuMyAxNzYuMyAxOTMuNSAxOTUuNCAx
ODguNSAxODUuOCAxODYuOAoxOTguNiAyMDYuNwoxMjAgMTYgMCAwIC0xIDE0CjY4OTI5NiA2
ODkyOTUgNjg5Mjk0IDY4OTI5MyA2ODkyOTIgNjg5MjkxIDY4OTI5MCA2ODkyODkgNjg5Mjg4
IDY4OTI4Nwo2NDA1NjQgNjQwNDczIDY0MDQ3NCA2NDA0NzUKMTIxIDIgMCAwIC0xIDY5OTg5
NSA2OTk4OTggMzcKMTIyIDE2IDAgMCAtMSAxMgo2ODE1MzAgNjgxNTI5IDY4MTUyOCA2ODE1
MjcgNjgxNTI2IDY4MTUyNSA2ODE1MjQgNjgxNTIzIDY4MTUyMiA2ODE1MjEKNjgxNTIwIDY4
MTUxOQoxMjMgMiAwIDAgLTEgNjk5ODk3IDY5OTkwMCA0MwoxMjQgMTYgMCAwIC0xIDEKNjQw
NTYzCjEyNSAyIDAgMCAtMSA2OTk4OTkgLTEgMTMKMTI2IDEzIDEgMCA2OTk5MDQgMTAKMSAy
IDMgNCA1IDYgNyA4IDkgMTAKMTI3IDE2IDAgMCAtMSAxMAo2ODkyODYgNjg5Mjc0IDY4OTI2
MCA2ODkyNTYgNjg5MjQ0IDY4OTIyNyA2ODkyMTAgNjg5MTkzIDY4OTE3OCA2ODkxNjEKMTI4
IDIgMCAwIC0xIDY5OTkwMyA2OTk5MDYgMzEKMTI5IDE2IDAgMCAtMSAxCjY5OTk4OQoxMzAg
MiAwIDAgLTEgNjk5OTA1IC0xIDEzCjEzMSAxMyAxIDAgNjk5OTA5IDEyCjExIDEwIDEyIDkg
OCA3IDYgNSA0IDMKMiAxCjEzMiAxNiAwIDAgLTEgMTIKNjg5MDAxIDY4OTAxNSA2ODkwMjgg
Njg5MDQxIDY4OTA1NSA2ODkwNjkgNjg5MDgzIDY4OTA5NyA2ODkxMTAgNjg5MTM1CjY4OTE0
OCA2ODkxMjMKMTMzIDIgMCAwIC0xIDY5OTkwOCA2OTk5MTEgMzEKMTM0IDE2IDAgMCAtMSAx
CjY5OTk4OQoxMzUgMiAwIDAgLTEgNjk5OTEwIC0xIDEzCjEzNiA5IDAgMCAtMSA2ICJmYWN0
b3IiCjU3NzUxMQo=
--------------E6449E20185CF0A71A620457--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Mon Mar  1 11:05:12 1999
From: khal@alumni.uv.es (Kjetil Halvorsen)
Date: Mon, 01 Mar 1999 12:05:12 +0100
Subject: replacement for qqnorm
Message-ID: <36DA7467.426AE491@alumni.uv.es>

I propose the folloving (few changes) replacement for qqnorm. 

1) return invisible (when plot.it=false) a list which can be
    given directly to plot to make the quantile plot. This is the
behaviour of qqplot.

2) calls ppoints

Kjetil Halvorsen




 
       qqnorm  <- 
function (y, ylim, main = "Normal Q-Q Plot", xlab = "Theoretical
Quantiles", 
    ylab = "Sample Quantiles", plot.it = TRUE, ...) 
{
    y <- y[!is.na(y)]
    if (!length(y)) 
        stop("y is empty")
    if (missing(ylim)) 
        ylim <- range(y)
    x <- qnorm(ppoints(length(y)))
    sy <- sort(y)
    if (plot.it) 
        plot(x, sort(y), main = main, xlab = xlab, ylab = ylab, 
            ylim = ylim, ...)
    invisible(list(x = x, y = sy))
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  1 11:33:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Mar 1999 12:33:18 +0100
Subject: "xpdrows.data.frame" (PR#131)
In-Reply-To: khal@alumni.uv.es's message of Mon, 1 Mar 1999 11:59:24 +0100
References: <199903011059.LAA05213@biostat.ku.dk>
Message-ID: <x2btide96p.fsf@blueberry.kubism.ku.dk>

khal@alumni.uv.es writes:

> This is a multi-part message in MIME format.
> --------------E6449E20185CF0A71A620457
> Content-Type: text/plain; charset=us-ascii
> Content-Transfer-Encoding: 7bit
> 
> This is a follow-up to bug sent to days ago, which bounced from r-devel
> because 
> the example was to large. Now example is smaller, and behaviour is as
... 
> Using the data frames frame1 and frame2 from the attached saved dataset
> frame.dat
> (say load("frame.dat") ):
....
> --------------E6449E20185CF0A71A620457
> Content-Type: application/x-unknown-content-type-DAT_auto_file; name="frame.dat"
> Content-Transfer-Encoding: base64
> Content-Disposition: inline; filename="frame.dat"
> 
> MTk3Ngo2IDEzMSA1NzEKMCAxMyAiY2xhc3MiCjEgMzEgImxldmVscyIKMiAzNyAibmFtZXMi
> CjMgNDMgInJvdy5uYW1lcyIKNSAxNzMwMTIgImZyYW1lMiIKNiAxNzMwMzAgImZyYW1lMSIK
> NCA2NTQ3NQo3IDU3NzUxMQo4IDU3NzUxMgo5IDU3NzY2NwoxMCA1Nzc2NjgKMTEgNTc3NjY5
> CjEyIDU3NzY3MAoxMyA1Nzc2NzIKMTQgNjA5Njc3CjE1IDYwOTY3OAoxNiA2MDk2NzkKMTcg
> NjA5NjgwCjE4IDYwOTY4MgoxOSA2MTQ1ODIKMjAgNjE0NTgzCjIxIDYxNDU4NAoyMiA2MTQ1

This is not a good idea! MIME attachments do not survive the trip
through JitterBug. So to read your data, one has to find a separate
base64 decoder and feed it the above gibberish. (And even if we could
get the remailer to handle it, it would still be a problem with the
filed text.)

It can't be that hard to cook up a smaller, plaintext example? E.g.

> f1<-data.frame(a=1:2,b=3:4)
> f2<-f1
> f2[3,]<-f1[2,]
Error: couldn't find function "xpdrows.data.frame"

..which, incidentally, is fixed in the 0.63.3 snapshots.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Mon Mar  1 13:53:31 1999
From: khal@alumni.uv.es (Kjetil Halvorsen)
Date: Mon, 01 Mar 1999 14:53:31 +0100
Subject: Inconsistencies with is.function
Message-ID: <36DA9BDA.67F9B953@alumni.uv.es>

> debug(sin)
Error in debug(sin) : argument must be a function
> is.function(sin)
[1] TRUE
> debug("[<-")
Error in debug("[<-") : argument must be a function
> is.function(get("[<-"))
[1] TRUE
> 

The problem having to do with .Primitive functions. R should agree
with itself on what is a function! to work around, I used


is.Primfun <- function(fun) is.function(fun) && is.null(body(fun))

but I'm not sure if that is failsafe.



Kjetil Halvorsen
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  1 14:11:48 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Mar 1999 15:11:48 +0100
Subject: Inconsistencies with is.function
In-Reply-To: Kjetil Halvorsen's message of Mon, 01 Mar 1999 14:53:31 +0100
References: <36DA9BDA.67F9B953@alumni.uv.es>
Message-ID: <x2aexxe1uj.fsf@blueberry.kubism.ku.dk>

Kjetil Halvorsen <khal@alumni.uv.es> writes:

> > debug("[<-")
> Error in debug("[<-") : argument must be a function
> > is.function(get("[<-"))
> [1] TRUE
> > 
> 
> The problem having to do with .Primitive functions. R should agree
> with itself on what is a function! 

..most likely by fixing the error message in  debug(): "must be a
non-primitive function".

> to work around, I used
> is.Primfun <- function(fun) is.function(fun) && is.null(body(fun))
> 
> but I'm not sure if that is failsafe.

It isn't: 

> is.null(body(function()NULL))
[1] TRUE

However,

> args(function()NULL) 
function () 
NULL
> args(sin)
NULL

so is.null(args(fun)) works better. The construction is also used in
some of the tests/ and demos/ files.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  2 15:59:52 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 2 Mar 1999 16:59:52 +0100
Subject: [R] zero-offset matrices (PR#132)
Message-ID: <199903021559.QAA16751@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> "[<-.zoffset"  <- function(x, i, j, value)
> {
>   if(!missing(i) && is.numeric(i)) i <- i+1
>   if(!missing(j) && is.numeric(j)) j <- j+1
>   NextMethod("[<-")
> }
> works in S but not in R. (Which I think is a bug.) I next tried

Yup, there's a bug in there somewhere, MatrixAssign ends up getting
called with the symbol "value" where the actual replacement value
should have been.

Of course, the whole point becomes a bit moot when one considers
*removing* rows and columns from a matrix...

To tickle the bug:

"[<-.zoffset"  <- function(x, i, j, value)
{
  if(!missing(i) && is.numeric(i)) i <- i+1
  if(!missing(j) && is.numeric(j)) j <- j+1
  NextMethod("[<-")
}
m<-matrix(1:4,2,2)
m[0,]<-4:5

Probably, set a breakpoint in do_subassigne and step through it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  2 19:40:26 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 2 Mar 1999 19:40:26 +0000 (GMT)
Subject: [R] How to set axis labels?
In-Reply-To: <XFMail.990302125553.s-luppescu@uchicago.edu>
Message-ID: <Pine.GSO.4.05.9903021935240.8444-100000@auk.stats>

On Tue, 2 Mar 1999, Stuart Luppescu wrote:

> Sorry to bother everyone with such a basic question again, but I can't seem to
> set my axis labels. When I use
> title(ylab="String")
> "String" just overwrites the variable name, producing a mess. When I try to put
> ylab="String" in the plot function, like this:
> 
> plot(residuals(mschmod) ~ size94, ylab = "Productivity Adjusted for Context")
> I get this message:
> Error: formal argument "ylab" matched by multiple actual arguments

Ah, that is not `the plot function'. It is plot.formula, and I suggest you
use

plot(size94, residuals(mschmod), ylab = "Productivity Adjusted for 
Context")

For some reason plot.formula insists on setting ylab. I think it should be:

plot.formula <-
function (formula, data = NULL, subset, na.action,
          ylab=varnames[response], ..., ask = TRUE) 
{
    if (missing(na.action)) 
        na.action <- options()$na.action
    m <- match.call(expand.dots = FALSE)
    if (is.matrix(eval(m$data, sys.parent()))) 
        m$data <- as.data.frame(data)
    m$... <- NULL
    m[[1]] <- as.name("model.frame")
    mf <- eval(m, sys.parent())
    response <- attr(attr(mf, "terms"), "response")
    if (response) {
        varnames <- names(mf)
        y <- mf[[response]]
        if (length(varnames) > 2) {
            opar <- par(ask = ask)
            on.exit(par(opar))
        }
        for (i in varnames[-response]) plot(mf[[i]], y, xlab = i, 
            ylab = ylab, ...)
    }
    else plot.data.frame(mf)
}

Can anyone see why not?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Mar  2 19:55:34 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 3 Mar 1999 08:55:34 +1300 (NZDT)
Subject: [R] How to set axis labels?
Message-ID: <199903021955.IAA23691@stat1.stat.auckland.ac.nz>

I think you're right Brian.  Do you want to change it? :-)

[ For those who don't know, Brian is now a core developer
  and can commit changes to the source code tree. ]

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  4 10:33:33 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 4 Mar 1999 11:33:33 +0100
Subject: system (PR#133)
Message-ID: <199903041033.LAA20548@biostat.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> According to ?system (R-release)
> 
>      system(command, intern=FALSE)
> 
> but the actual syntax is function(call, intern = FALSE, trash.errors =
> FALSE).
> 
> So, is it `call' or `command', and what does `trash.errors' do? (I assume
> it is intended to make stderr be ignored, but that would not be my
> guess from the name, and is shell-dependent, let alone system-dependent.)
> 
> I'll crawl back to documenting system() on Windows....

Filing as bug report. With 0.63.3 due out tomorrow, I don't want to fix
bugs that haven't actually bitten anyone. But yes, the docs should be
fixed to describe the actual code, it probably should be "command" and
"trash.errors = FALSE" could be something like "stderr = TRUE".

The shell-dependency is probably not avoidable, but - at least on
Linux - system and popen have /bin/sh hardcoded (POSIX?).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Fri Mar  5 16:07:23 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 05 Mar 1999 08:07:23 -0800
Subject: [Andreas Krause <Andreas.Krause@genedata.com>] Re: splus shell escapes
Message-ID: <87ogm7vs1w.fsf@alpha.cfas.washington.edu>



Anyone know what the problem is with IRIX 6.5 ?  (esp if there is a
solution?).  Looks like the built-in math stuff is masking definitions
from R source.

(passing this along for a friend).

best,
-tony



From: Andreas Krause <Andreas.Krause@genedata.com>
To: "A.J. Rossini" <rossini@biostat.washington.edu>
Subject: Re: splus shell escapes


# download
./configure


R is now configured for mips-sgi-irix6.5

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc -g -O2
  FORTRAN compiler:         f77 

make
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/afm'
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/afm'
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/demos'
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/demos'
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/doc'
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/doc'
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/etc'
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/etc'
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/src'
make[2]: Entering directory `/u/andreas/tmp/R/R-0.63.2/src/include'
make[2]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src/include'
make[2]: Entering directory `/u/andreas/tmp/R/R-0.63.2/src/appl'
gcc -g -O2 -I../include -I../../src/include  -c fft.c -o fft.o
In file included from fft.c:21:
../include/Mathlib.h:255: conflicting types for `gammal'
/usr/include/math.h:819: previous declaration of `gammal'
make[2]: *** [fft.o] Error 1
make[2]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src/appl'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src'
make: *** [R] Error 1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Mar  5 16:18:32 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 5 Mar 1999 17:18:32 +0100
Subject: IRIX problem `gammal' [Andreas Krause ... Re: splus shell escapes]
In-Reply-To: <87ogm7vs1w.fsf@alpha.cfas.washington.edu>
 (rossini@biostat.washington.edu)
References: <87ogm7vs1w.fsf@alpha.cfas.washington.edu>
Message-ID: <199903051618.RAA28833@sophie.ethz.ch>

>>>>> "tony" == A J Rossini <rossini@biostat.washington.edu> writes:


    tony> Anyone know what the problem is with IRIX 6.5 ?  (esp if there is
    tony> a solution?).  Looks like the built-in math stuff is masking
    tony> definitions from R source.

    tony> (passing this along for a friend).

    ....


    tony> # download
    tony> ./configure


    tony> R is now configured for mips-sgi-irix6.5

    tony> Source directory:         .
    tony> Installation directory:   /usr/local
    tony> C compiler:               gcc -g -O2
    tony> FORTRAN compiler:         f77 

    tony> make

    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/afm'
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/afm'
    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/demos'
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/demos'
    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/doc'
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/doc'
    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/etc'
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/etc'
    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/src'
    tony> make[2]: Entering directory
    tony> `/u/andreas/tmp/R/R-0.63.2/src/include' make[2]: Leaving
    tony> directory `/u/andreas/tmp/R/R-0.63.2/src/include' make[2]:
    tony> Entering directory `/u/andreas/tmp/R/R-0.63.2/src/appl'

    tony> gcc -g -O2 -I../include -I../../src/include  -c fft.c -o fft.o
    tony> In file included from fft.c:21:
    tony> ../include/Mathlib.h:255: conflicting types for `gammal'
    tony> /usr/include/math.h:819: previous declaration of `gammal'

Very funny.  

I wonder if Andreas really used an unaltered 0.63.2
There's no `gammal'  in   src/include/Mathlib.h (nor ./include/Mathlib.h)
especially not on line 255 where there's  qgamma(...)


    tony> make[2]: *** [fft.o] Error 1
    tony> make[2]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src/appl'
    tony> make[1]: *** [R] Error 1
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src'
    tony> make: *** [R] Error 1
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  5 16:29:25 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Mar 1999 17:29:25 +0100
Subject: IRIX problem `gammal' [Andreas Krause ... Re: splus shell escapes]
In-Reply-To: Martin Maechler's message of Fri, 5 Mar 1999 17:18:32 +0100
References: <87ogm7vs1w.fsf@alpha.cfas.washington.edu> <199903051618.RAA28833@sophie.ethz.ch>
Message-ID: <x2u2vzzyqi.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:


>     tony> In file included from fft.c:21:
>     tony> ../include/Mathlib.h:255: conflicting types for `gammal'
>     tony> /usr/include/math.h:819: previous declaration of `gammal'
> 
> Very funny.  
> 
> I wonder if Andreas really used an unaltered 0.63.2
> There's no `gammal'  in   src/include/Mathlib.h (nor ./include/Mathlib.h)
> especially not on line 255 where there's  qgamma(...)

We've been having "fun" with *gamma stuff before (conflicts on SunOS,
remember?). It's possible that IRIX has a macro defining qgamma to be
gammal, in which case an "#undef qgamma" in Mathlib.h might do the
trick.  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Krause@genedata.com  Fri Mar  5 16:54:14 1999
From: Andreas.Krause@genedata.com (Andreas Krause)
Date: Fri, 05 Mar 1999 17:54:14 +0100
Subject: IRIX problem `gammal' [Andreas Krause ... Re: splus shell escapes]
References: <87ogm7vs1w.fsf@alpha.cfas.washington.edu> <199903051618.RAA28833@sophie.ethz.ch> <x2u2vzzyqi.fsf@blueberry.kubism.ku.dk>
Message-ID: <36E00C36.FF64C16@genedata.com>

Hi. 

Peter Dalgaard BSA wrote:

> It's possible that IRIX has a macro defining qgamma to be
> gammal, in which case an "#undef qgamma" in Mathlib.h might do the
> trick.

The suspicion is right. 
Here is an excerpt from /usr/include/math.h:

extern double   gamma(double);
extern double   lgamma(double); 

...

#if _XOPEN4 && _NO_ANSIMODE
#define qgamma  gammal
#define qlgamma lgammal
#define qsigngam signgaml

extern long double gammal( long double );

extern long double lgammal( long double );
#endif

------------

Modifying src/include/Mathlib.h to

        /* Gamma and Related Functions */

#undef qgamma  

does the job indeed. Thanks, Peter!

...
However, for the sake of completeness, there's another problem on Irix:
f77  -fpic -c bsplvd.f -o bsplvd.o
f77 ERROR parsing -fpic:  unknown flag
make[4]: *** [bsplvd.o] Error 2

Outcommenting in configure 
if test "${CC}" = gcc; then
  cpicflags=-fpic
fi

does the job. Thanks again!


         andreas
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From naras@stat.Stanford.EDU  Fri Mar  5 17:33:23 1999
From: naras@stat.Stanford.EDU (Balasubramanian Narasimhan)
Date: Fri, 05 Mar 1999 09:33:23 -0800 (PST)
Subject: [Andreas Krause <Andreas.Krause@genedata.com>] Re: splus shell escapes
In-Reply-To: Your message of "05 Mar 1999 08:07:23 -0800"
 <87ogm7vs1w.fsf@alpha.cfas.washington.edu>
References: <87ogm7vs1w.fsf@alpha.cfas.washington.edu>
Message-ID: <19990305093323L.naras@stat.Stanford.EDU>

>>>>> "Tony" == A J Rossini <rossini@biostat.washington.edu> writes:

    Tony> Anyone  know what the  problem is with  IRIX 6.5 ?   (esp if
    Tony> there is  a solution?).  Looks like the  built-in math stuff
    Tony> is masking definitions from R source.

    Tony>   Source directory:  .  Installation directory: /usr/local C
    Tony> compiler: gcc -g -O2 FORTRAN compiler: f77

    Tony>        make        make[1]:        Entering        directory
    Tony>  `/u/andreas/tmp/R/R-0.63.2/afm' make[1]:  Leaving directory
    Tony> `/u/andreas/tmp/R/R-0.63.2/afm'  make[1]: Entering directory
    Tony> `/u/andreas/tmp/R/R-0.63.2/demos' make[1]: Leaving directory
    Tony>    `/u/andreas/tmp/R/R-0.63.2/demos'    make[1]:    Entering
    Tony>  directory `/u/andreas/tmp/R/R-0.63.2/doc'  make[1]: Leaving
    Tony> directory  `/u/andreas/tmp/R/R-0.63.2/doc' make[1]: Entering
    Tony>  directory `/u/andreas/tmp/R/R-0.63.2/etc'  make[1]: Leaving
    Tony> directory  `/u/andreas/tmp/R/R-0.63.2/etc' make[1]: Entering
    Tony> directory  `/u/andreas/tmp/R/R-0.63.2/src' make[2]: Entering
    Tony>  directory  `/u/andreas/tmp/R/R-0.63.2/src/include' make[2]:
    Tony>  Leaving  directory  `/u/andreas/tmp/R/R-0.63.2/src/include'
    Tony>            make[2]:            Entering            directory
    Tony> `/u/andreas/tmp/R/R-0.63.2/src/appl' gcc -g -O2 -I../include
    Tony> -I../../src/include -c fft.c  -o fft.o In file included from
    Tony>  fft.c:21: ../include/Mathlib.h:255:  conflicting  types for
    Tony>  `gammal' /usr/include/math.h:819:  previous  declaration of
    Tony>  `gammal'  make[2]: ***  [fft.o]  Error  1 make[2]:  Leaving
    Tony> directory  `/u/andreas/tmp/R/R-0.63.2/src/appl' make[1]: ***
    Tony>     [R]    Error     1     make[1]:    Leaving     directory
    Tony> `/u/andreas/tmp/R/R-0.63.2/src' make: *** [R] Error 1

Ah! This is one I have run into. 

SGI has  its own  version of  the log-gamma in  the math  library that
causes  a  number of  problems  with  dynamic  loading including  with
xlispstat. One easy way to get  around this is to #ifdef the part that
defines gammal in the R includes to tide things over.

I  once  had  an  exchange  with  Luke about  this  situation  on  the
SGI. Which is why xls defines it log gamma function to be mygamma! 

________________________________________________________________
B. Narasimhan                            naras@stat.stanford.edu
                             http://www-stat.stanford.edu/~naras





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sat Mar  6 00:12:12 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 05 Mar 1999 18:12:12 -0600
Subject: Difficulties with egcs-1.0.3 on RedHat 5.2?
Message-ID: <6rogm7h3xf.fsf@verdi.stat.wisc.edu>

Some machines in our department use RedHat 5.2 Linux but, to maintain
consistency with other machines, the compilers as from egcs-1.0.3, as
shown below.  When I compile R-0.63.3 on these systems I can't pass
the tests in "make check".  The base-Ex.R file stops execution with
the error shown below.
 ...
 Running all help() examples ...
 ../../bin/R --vanilla < base-Ex.R > base-Ex.Rout
 make[2]: *** [base-Ex.Rout] Error 139
 make[2]: Leaving directory `/afs/cs.wisc.edu/unsup/R-0.63.3/src/R-0.63.3/tests/Examples'
 make[1]: *** [test-Examples] Error 2
 make[1]: Leaving directory `/afs/cs.wisc.edu/unsup/R-0.63.3/src/R-0.63.3/tests'
 make: [test-All] Error 2 (ignored)
 gstat03(26)% gcc -v
 Reading specs from /s/egcs-1.0.3a/i386_linux22/lib/gcc-lib/i386-redhat-linux/pgcc-2.90.29/specs
 gcc version pgcc-2.90.29 980515 (egcs-1.0.3 release)
 gstat03(27)% g77 -v
 Reading specs from /s/egcs-1.0.3a/i386_linux22/lib/gcc-lib/i386-redhat-linux/pgcc-2.90.29/specs
 gcc version pgcc-2.90.29 980515 (egcs-1.0.3 release)

The last part of base-Ex.Rout is
 > ###--- >>> `FDist' <<<----- The F Distribution
 > 
 > 	## alias	 help(df)
 > 	## alias	 help(pf)
 > 	## alias	 help(qf)
 > 	## alias	 help(rf)
 > 
 > ##___ Examples ___:
 > 
 > df(1,1,1) == dt(1,1)# TRUE
 [1] TRUE

This does not seem to happen on other Linux machines with other C and
Fortran compilers but it does happen on a Solaris 2.6 for Intel
machine with the same compilers.

Is this a known problem with egcs-1.0.3?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar  6 00:26:58 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 1999 01:26:58 +0100
Subject: Difficulties with egcs-1.0.3 on RedHat 5.2?
In-Reply-To: Douglas Bates's message of 05 Mar 1999 18:12:12 -0600
References: <6rogm7h3xf.fsf@verdi.stat.wisc.edu>
Message-ID: <x21zj3mpil.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> Some machines in our department use RedHat 5.2 Linux but, to maintain
> consistency with other machines, the compilers as from egcs-1.0.3, as
> shown below.  When I compile R-0.63.3 on these systems I can't pass
> the tests in "make check".  The base-Ex.R file stops execution with
> the error shown below.
>  ...
... 
> This does not seem to happen on other Linux machines with other C and
> Fortran compilers but it does happen on a Solaris 2.6 for Intel
> machine with the same compilers.
> 
> Is this a known problem with egcs-1.0.3?

Yes, (only I thought it was in 1.0.2...). I reported it some months
ago. It's a register allocation foulup in the compiler, showing up
when inlining is used. If you *really* want me to, I can dig up the
reference...

Goes away if you compile without optimisation. Unless my memory fails
me, qbeta.c is the culprit, and you can get away with just recompiling
that one without -O. It's gone away in egcs 1.1.0, but that is a bit
of a massive download for the modem crowd.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar  6 00:43:30 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 1999 01:43:30 +0100
Subject: Difficulties with egcs-1.0.3 on RedHat 5.2?
In-Reply-To: Peter Dalgaard BSA's message of 06 Mar 1999 01:26:58 +0100
References: <6rogm7h3xf.fsf@verdi.stat.wisc.edu> <x21zj3mpil.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2zp5rla6l.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes

> If you *really* want me to, I can dig up the
> reference...

Aw, what the heck...

To: r-devel@stat.math.ethz.ch
Subject: EGCS optimizer bug?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Oct 1998 23:21:26 +0100
Message-ID: <x2r9vwl1uh.fsf@blueberry.kubism.ku.dk>
X-Mailer: Gnus v5.5/Emacs 20.2
Lines: 47
Xref: blueberry.kubism.ku.dk misc-mail:2857
X-Gnus-Article-Number: 2857   Sun Oct 25 23:21:34 1998


The current development version dies in qbeta() when compiled with
egcs -O, egcs 1.0.2 and glibc 2.0.7 (RedHat versions). Since this also
kill the F and t distributions, it doesn't exactly do wonders for R's
usefulness...

Anyone else seeing this or has my setup just gone out of whack? It
does look pretty much like a clear compiler bug when inlining math
functions (storing temporaries offset from %ebx, but no setting of
%ebx register to anything useful...)

The following paraphrase on R's qbeta.c appears to be a close to
minimal example of the problem (no, it doesn't do anything useful, and
there are several obvious things wrong with it, but it displays the
%ebx problem, if you look at the generated code):

#include <math.h>

double lbeta(){}

double qbeta(double alpha, double p, double q)
{
        double t,r, logbeta;
        volatile double xinbta;

        logbeta = lbeta(p, q);

        if (p<1) 
                t = r * pow(t, 3.);
        return xinbta;
}

main(){qbeta(.5,.5,.5);}

[pd@butterfly sandbox]$ egcs -O qbeta.c -lm
[pd@butterfly sandbox]$ ./a.out
Segmentation fault (core dumped)
[pd@butterfly sandbox]$ egcs qbeta.c -lm
[pd@butterfly sandbox]$ ./a.out


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Sat Mar  6 05:36:44 1999
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Fri, 5 Mar 1999 21:36:44 -0800 (PST)
Subject: bessel_?.c constants
Message-ID: <Pine.LNX.4.04.9903052116420.18761-100000@localhost>


Hi All,

I've been digging around in src/nmath and have discovered that there are
two sets of "machine constants" in bessel_l.c and bessel_j.c which have
different values:

bessel_i.c:    static double ensig = 1e16;
bessel_i.c:    static double rtnsig = 1e-4;
bessel_i.c:    static double enmten = 8.9e-308;
bessel_i.c:    static double enten = 1e308;

bessel_j.c:    static double ensig = 1e17;
bessel_j.c:    static double rtnsig = 1e-4;
bessel_j.c:    static double enmten = 1.2e-37;
bessel_j.c:    static double enten = 1e38;

According to the comments heading the files, the first set is correct for
IEEE Double-Precision hardware (the comments give the same values for
these parameters in each file):


         Approximate values for some important machines are:
    
    			    it	  NSIG	  ENTEN	      ENSIG
      [...]    
      IEEE (IBM/XT,
      SUN, etc.) (D.P.)	    53	   16	 1.0D+308    1.0D+16
      [...]

    			   RTNSIG      ENMTEN	   XLARGE
      [...]   
      IEEE (IBM/XT,
      SUN, etc.) (D.P.)	   1.0E-4    8.90D-308	  1.0D+4
      [...]

Is there some reason for using different values in bessel_j.c than in
bessel_l.c?  Or is this just a bug? ;^)

-Greg

PS:  Where is DBL_EPSILON defined, and what is its value?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Sat Mar  6 20:11:18 1999
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Sat, 6 Mar 1999 12:11:18 -0800 (PST)
Subject: bessel_?.c constants (fwd)
Message-ID: <Pine.LNX.4.04.9903061210030.20307-100000@localhost>


This doesn't seem to have made it to the list, so here it is again.  Sorry
if this results in duplicates.

---------- Forwarded message ----------
Date: Fri, 5 Mar 1999 21:36:44 -0800 (PST)
From: Gregory R. Warnes <warnes@biostat.washington.edu>
To: R devel <r-devel@stat.math.ethz.ch>
Subject: bessel_?.c constants


Hi All,

I've been digging around in src/nmath and have discovered that there are
two sets of "machine constants" in bessel_l.c and bessel_j.c which have
different values:

bessel_i.c:    static double ensig = 1e16;
bessel_i.c:    static double rtnsig = 1e-4;
bessel_i.c:    static double enmten = 8.9e-308;
bessel_i.c:    static double enten = 1e308;

bessel_j.c:    static double ensig = 1e17;
bessel_j.c:    static double rtnsig = 1e-4;
bessel_j.c:    static double enmten = 1.2e-37;
bessel_j.c:    static double enten = 1e38;

According to the comments heading the files, the first set is correct for
IEEE Double-Precision hardware (the comments give the same values for
these parameters in each file):


         Approximate values for some important machines are:
    
    			    it	  NSIG	  ENTEN	      ENSIG
      [...]    
      IEEE (IBM/XT,
      SUN, etc.) (D.P.)	    53	   16	 1.0D+308    1.0D+16
      [...]

    			   RTNSIG      ENMTEN	   XLARGE
      [...]   
      IEEE (IBM/XT,
      SUN, etc.) (D.P.)	   1.0E-4    8.90D-308	  1.0D+4
      [...]

Is there some reason for using different values in bessel_j.c than in
bessel_l.c?  Or is this just a bug? ;^)

-Greg

PS:  Where is DBL_EPSILON defined, and what is its value?




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar  7 14:02:10 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 1999 15:02:10 +0100
Subject: bessel_?.c constants (fwd)
In-Reply-To: "Gregory R. Warnes"'s message of Sat, 6 Mar 1999 12:11:18 -0800 (PST)
References: <Pine.LNX.4.04.9903061210030.20307-100000@localhost>
Message-ID: <x2vhgd1jq5.fsf@blueberry.kubism.ku.dk>

"Gregory R. Warnes" <warnes@biostat.washington.edu> writes:

> This doesn't seem to have made it to the list, so here it is again.  Sorry
> if this results in duplicates.

It did...

> PS:  Where is DBL_EPSILON defined, and what is its value?

In the compiler libs, here:

/usr/lib/gcc-lib/i386-redhat-linux/2.7.2.3/include/float.h:
#define DBL_EPSILON 2.2204460492503131e-16


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman.buyukisik@ae.ge.com  Mon Mar  8 17:44:44 1999
From: osman.buyukisik@ae.ge.com (U-E59264-Osman F Buyukisik)
Date: Mon,  8 Mar 1999 12:44:44 -0500 (EST)
Subject: March7th R-devel,hpux10.20,egcs-2.93.03 19990124
Message-ID: <14052.2244.122214.792342@c1186.ae.ge.com>

Hello,
 I just got the latest (March7) tarball from CRAN. 

1).It looks like ".so" 
is still hardwired in the source code. in src/main/platform.h all
"Unix" systems get the ".so" extention. I had to #ifdef hpux and add
".sl". 

2). It picks up readline but history is still inside the comments in
src/include/Platform.h, I had to manually change this in order to get
readline history.

3). Now it builds and installs OK. 

4). library(help = eda) gets me

  Error: No documentation for package `eda'

This seems to be happening because system.file("INDEX", help, lib.loc) 
in library returning NULL. debugging system.file show that
 present <- file.exists(FILES)
gets FALSE. FILES=
"/home/absd00t/local/lib/R/library/eda/INDEX//home/absd00t/local/lib/R/library"
if just execute
file.exists("/home/absd00t/local/lib/R/library/eda/INDEX") 
then it returns TRUE. (I know the help files and INDEX are all out
there). Any idea why this library overall help is not working? Help on 
idividual items is working OK. So are the dynamically loaded libs.
system.file function seems to be different than in 0.63.1. 

Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Mar  8 18:20:19 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 8 Mar 1999 18:20:19 +0000 (GMT)
Subject: March7th R-devel,hpux10.20,egcs-2.93.03 19990124
Message-ID: <199903081820.SAA23875@toucan.stats.ox.ac.uk>


> From: U-E59264-Osman F Buyukisik <absd00t@c1186.ae.ge.com>
> Date: Mon,  8 Mar 1999 12:44:44 -0500 (EST)
> To: r-devel@stat.math.ethz.ch
> Subject: March7th R-devel,hpux10.20,egcs-2.93.03 19990124
> 
> Hello,
>  I just got the latest (March7) tarball from CRAN. 

That is a snapshot: we are working on the `platform independent'
code right now.  Please be patient: snapshots can be unstable.

> 1).It looks like ".so" 
> is still hardwired in the source code. in src/main/platform.h all
> "Unix" systems get the ".so" extention. I had to #ifdef hpux and add
> ".sl". 

Rather, it is hardwired again.

> 4). library(help = eda) gets me
> 
>   Error: No documentation for package `eda'
> 
> This seems to be happening because system.file("INDEX", help, lib.loc) 

That was an incorrect call in 0.64. It needs named arguments:

        file <- system.file("INDEX", pkg = help, lib = lib.loc)

> in library returning NULL. debugging system.file show that
>  present <- file.exists(FILES)
> gets FALSE. FILES=
> 
"/home/absd00t/local/lib/R/library/eda/INDEX//home/absd00t/local/lib/R/library"
> if just execute
> file.exists("/home/absd00t/local/lib/R/library/eda/INDEX") 
> then it returns TRUE. (I know the help files and INDEX are all out
> there). Any idea why this library overall help is not working? Help on 
> idividual items is working OK. So are the dynamically loaded libs.
> system.file function seems to be different than in 0.63.1. 

Yes. Basically the new system.file() did not work as documented: it now
does AFAIK but I have been tracking down all the incorrect uses, and got this
one a few hours ago. From the current state:

> library(help = eda)
line            Robust Line Fitting
medpolish       Median polish
smooth          Median smoothing




-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar  9 09:33:44 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 9 Mar 1999 10:33:44 +0100
Subject: example(.) partly broken (since 0.63.3) --> patch (PR#134)
Message-ID: <199903090933.KAA05227@biostat.ku.dk>

(I don't have time just now to diagnose & fix..)

In R 0.63.3  [both on Solaris and Linux]

    > example(outer)
    Error: Couldn't find 'outer' example

whereas this worked in 0.63.2.

NON-exhaustive `research' [i.e. small sample out of about 1000]:
 o examples that stopped working (in 0.63.3 and did before)
	
	kronecker, outer, vector, Im

 o Examples working
 
	.Alias, "%in%", lm, glm, lsfit, unix, Re, ... (most?)

It really is the  'AnIndex' file which is broken, 
either because of incorrect syntax in changed  *.Rd files
or    because the AnIndex building scripts are broken or not robust enough..

My "AnIndex" (i.e.  RINSTALL/library/base/help/AnIndex)
has line 482
-----------------------------
glm summaries	glm.summaries
-----------------------------
which then is  scan()ed as 3 character strings instead of 2, and then
everything following is mixed up......

Other (not necessarily all) such bad lines are
-----------------------------
lm summaries	lm.summaries
nrow, ncol	nrow
QR Auxiliaries	qraux
-----------------------------



However, it seems sufficient [for example() at least]
to patch its source by using  scan("..../AnIndex" ..) with sep = "\t" :

--- src/library/base/R/source.R.~1~	Wed Dec  2 11:39:22 1998
+++ src/library/base/R/source.R	Tue Mar  9 10:27:38 1999
@@ -122,7 +122,7 @@
             AnIndexF <- system.file(paste("help","AnIndex",sep=directory.sep),
                                     pkg, lib)
             if(AnIndexF != "") {
-                AnIndex <- scan(AnIndexF,what=c("c","c"),quiet=TRUE)
+                AnIndex <- scan(AnIndexF,what=c("c","c"),sep="\t",quiet=TRUE)
                 i <- match(topic,AnIndex[seq(1,length(AnIndex),2)],-1)
                 if(i != -1)	 
                     file <- system.file(paste("R-ex",directory.sep,AnIndex[2*i],

	
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar  9 09:47:26 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 9 Mar 1999 10:47:26 +0100
Subject: example(.) partly broken (since 0.63.3) --> patch (PR#134)
Message-ID: <199903090947.KAA05234@biostat.ku.dk>

I think one should also apply the following patch  
in order to get the HTML indices right.. when AnIndex is allowed to contain
spaces " " in addition to the separating "\t" :

--- etc/buildlib.pl.~1~	Wed Mar  3 17:35:42 1999
+++ etc/buildlib.pl	Tue Mar  9 10:41:15 1999
@@ -168,7 +168,7 @@
 		if(-r "$lib/$pkg/help/AnIndex"){
 		    open ranindex, "< $lib/$pkg/help/AnIndex";
 		    while(<ranindex>){
-			/^(\S*)\s*\t(.*)/;
+			/^([^\t]*)\s*\t(.*)/;
 			$htmlindex{$1} = "$pkg/html/$2.$HTML";
 		    }
 		    close ranindex;
@@ -195,7 +195,7 @@
 		if(-r "$lib/$pkg/help/AnIndex"){
 		    open ranindex, "< $lib/$pkg/help/AnIndex";
 		    while(<ranindex>){
-			/^(\S*)\s*\t(.*)/;
+			/^([^\t]*)\s*\t(.*)/;
 			$anindex{$1} = $2;
 		    }
 		    close ranindex;


----------------------
((and yes, I *did* diagnose and fix most of the problem in spite of
  my introductory remark in the last message...))

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fears@roycastle.liv.ac.uk  Tue Mar  9 13:20:59 1999
From: fears@roycastle.liv.ac.uk (fears@roycastle.liv.ac.uk)
Date: Tue, 9 Mar 1999 14:20:59 +0100
Subject: summary() of lm() problem (PR#135)
Message-ID: <199903091320.OAA05357@biostat.ku.dk>

Debuggers,

I wrote to r-help about this and was appropriately told off by Peter
Dalgaard. I append that mail in case you have not seen it.

Following Peter's advice I have attempted to simplify the problem.

First note that the following does *not* fail (by which I mean crash, as
in generate a memory access violation):

> tmp<-matrix(c(1,0,0,1,1,1),2,3)
> dimnames(tmp)<-list(NULL,c('yvar','x1','x2'))
> lm(tmp[,'yvar']~tmp[,'x1']+tmp[,'x2'])
> summary(.Last.value)

I tried to cut down my original data set to just the first ten rows to
make it manageable to transmit. Of course then when I ran lm() there
were NA estimates. Thus I wasn't totally surprised that summary() would
have trouble. But, unlike the above, it crashes fatally.

Thinking to reproduce this very simply, I used (sorry quick and dirty, I
know there's a way to use paste to give the model formula):

> tmp<-matrix(c(1,0,0,1,rep(1,56)),2,30)
> dimnames(tmp)<-list(NULL,paste('x',1:30,sep=''))
> lm(tmp[, "x1"] ~ tmp[, "x2"] + tmp[, "x3"] + tmp[,     "x4"] + tmp[,
"x4"] + tmp[, "x5"] + tmp[, "x6"] + tmp[, "x7"] +     tmp[, "x8"] +
tmp[, "x9"] + tmp[, "x10"] + tmp[, "x11"] +     tmp[, "x12"] + tmp[,
"x13"] + tmp[, "x14"] + tmp[, "x15"] +     tmp[, "x16"] + tmp[, "x17"] +
tmp[, "x18"] + tmp[, "x19"] +     tmp[, "x20"]+tmp[, "x21"]+tmp[,
"x22"]+tmp[, "x23"]+tmp[, "x24"]+tmp[, "x25"]+tmp[, "x26"]+tmp[,
"x27"]+tmp[, "x28"]+tmp[, "x29"]+tmp[, "x30"])
> summary(.Last.value)

But this has no problem. So it doesn't seem to be singularity of X or
the length of the model formula at fault (my problem data has 27
variables).

What follows now is what *does* give a fault. The data (in sasch2) is
truncated to just the first 10 rows. I made it so the modified dataset
is called sasch2 so that I could cut and paste the exact same lm() call:

> tmp<-sasch2[1:10,]
> holdsasch2<-sasch2
> sasch2<-tmp
> dump('sasch2','bugs.dump')
> lm(sasch2[, "ddiff"] ~ sasch2[, "td30"] + sasch2[,     "td60"] +
sasch2[, "td90"] + sasch2[, 
+ "td120"] + +sasch2[,     "td180"] + sasch2[, "td240"] + sasch2[,
"td300"] + sasch2[,     "td360"] + 
+ sasch2[, "td420"] + sasch2[, "td480"] + sasch2[,     "db1"] + sasch2[,
"db1.5"] + sasch2[, "db2"] + 
+ sasch2[, "db2.5"] +     +sasch2[, "db3.5"] + sasch2[, "db4"] +
sasch2[, "db4.5"] +     sasch2[, "db5"] + 
+ sasch2[, "db5.5"] + +sasch2[, "db6"] +     sasch2[, "db6.5"] +
sasch2[, "db7"] + sasch2[, "db7.5"] +     
+ sasch2[, "db8"] + +sasch2[, "db8.5"] + sasch2[, "db9"] +     sasch2[,
"db9.5"])
> summary(.Last.value)

Dr Watson tells me the access violation is 0xc0000005 at address
0x2020200 (whatever that means; I last used machine code on a PDP 8).

The data as dumped now follows (though it is anonymised, please continue
to treat the data as confidential). After that is my original report to
r-help.

I'd be very happy to provide any other info you might need to know. PD
suggested running on Unix but my version there is hopelessly out of date
since I started using NT. I hope I've given you enough here to try it
for yourself on the latest unix version without too much bother.

"sasch2" <-
structure(c(1, 1, 1, 2, 2, 3, 4, 5, 5, 6, 3, 2, 0.5, 0, 2, 4, 
6, 1.5, 6, 5, 225, 175, 180, 255, 140, 140, 236, 315, 90, 190, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 
0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 2, 5, 7, 3, 3, 5, 4, 2.5, 4, 3, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 
0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 611231, 611231, 611231, 611041, 611041, 
611553, 605829, 604881, 604881, 612966, 4, 4, 4, 4, 4, 4, 3, 
3, 3, 2, 25, 25, 25, 29, 29, 29, 31, 28, 28, 18, 289, 289, 289, 
279, 279, 289, 296, 268, 268, 281, 1, 1, 1, 2, 2, 2, 2, 1, 1, 
1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
655, 655, 655, 780, 780, 180, 347, 295, 295, 240, 1, 1, 1, 1, 
1, 0, 0, 0, 0, 0, 1, 1, 1, 2, 2, 0, 0, 0, 0, 0, 1, 1, 1, 2, 2, 
0, 0, 0, 0, 0, 5, 5, 5, 4, 4, 4, 4, 1, 1, 1, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 2, 2, 2, 3, 3, 1, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4, 4, 5, 5, 3, 4, 3, 3, 
2, 234, 234, 234, 24, 24, 12, 17, 127, 127, 27, 1, 1, 1, 1, 1, 
3, 3, 1, 1, 1, 2, 2, 2, 2, 2, 4, 4, 2, 2, 0, 300, 300, 300, 100, 
100, 200, 500, 200, 200, 400, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 
1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 809782, 
809782, 809782, 809790, 809790, 809797, 809813, 809832, 809832, 
809840, 3600, 3600, 3600, 3740, 3740, 3280, 3090, 3100, 3100, 
4110, 4, 4, 4, 9, 9, 9, 9, 10, 10, 9, 9, 9, 9, 10, 10, 10, 9, 
10, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7.38, 7.38, 7.38, 7.34, 
7.34, 7.27, 7.33, 7.3, 7.3, 7.29, NA, NA, NA, -3.4, -3.4, -5.8, 
-6.4, -2, -2, -7.2, 2, 2, 2, 3, 3, 5, 4, 2.5, 2.5, 3, 225, 225, 
225, 255, 255, 140, 236, 315, 315, 190, 5, 5, 5, 3, 3, 9, 10, 
4, 4, 8, 400, 400, 400, 395, 395, NA, NA, 405, 405, 210, 7, 7, 
7, 5, 5, NA, NA, 10, 10, 10, 580, 580, 580, NA, NA, NA, NA, NA, 
NA, NA, 7.5, 7.5, 7.5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
315, 315, 190, NA, NA, NA, NA, NA, NA, NA, 4, 4, 8, 440, 440, 
440, 390, 390, NA, NA, NA, NA, NA, NA, NA, NA, 3, 3, NA, NA, 
NA, NA, NA), .Dim = c(10, 83), .Dimnames = list(NULL, c("pxid", 
"ddiff", "tdiff", "td30", "td60", "td90", "td120", "td180", "td240", 
"td300", "td360", "td420", "td480", "td2000", "dbase", "db1", 
"db1.5", "db2", "db2.5", "db3", "db3.5", "db4", "db4.5", "db5", 
"db5.5", "db6", "db6.5", "db7", "db7.5", "db8", "db8.5", "db9", 
"db9.5", "lwh.num", "partogram", "age", "gestation", "cervix", 
"effaced", "membranes", "rd.interval", "action.line", "synto", 
"synto.time", "rom", "blood", "ctg", "fbs", "fbs.no", "iupc", 
"amnioinf", "ves", "anaesth", "delivery.mode", "perineum", "blood.loss",

"transfus", "drugs", "retained.pl", "baby.no", "weight", "apgar1", 
"apgar5", "scbu", "ph.ven", "be.ven", "dilat1", "time2", "dilat2", 
"time3", "dilat3", "time4", "dilat4", "time5", "dilat5", "time6", 
"dilat6", "time7", "dilat7", "srom.time", "srom.dilat", "epi.time", 
"epi.dilat")))


************************************************************************

Under NT 4.0, using Version 0.63.2 Beta (Jan 12, 1999):

Not sure if this is a bug or a feature (forcing me to program less
clumsily) so I'll report it here rather than to bugs.

With a medium size data set (1700 observations,70 explanatory variables)
and plenty of memory, specifically

> gc()
          free   total
Ncells  886738 1000000
Vcells 7912909 8388608

I get a fatal error when attempting summary() on the fit of an lm() on a
large-ish set of dummy variables (stored in a matrix):

Call:
lm(formula = sasch2[, "ddiff"] ~ sasch2[, "td30"] + sasch2[,     "td60"]
+ sasch2[, "td90"] + sasch2[,  "td120"] + +sasch2[,     "td180"] +
sasch2[, "td240"] + sasch2[, "td300"] + sasch2[,     "td360"] +
sasch2[, "td420"] + sasch2[, "td480"] + sasch2[,     "db1"] + sasch2[,
"db1.5"] + sasch2[, "db2"] +  sasch2[, "db2.5"] +     +sasch2[, "db3.5"]
+ sasch2[, "db4"] + sasch2[, "db4.5"] +     sasch2[, "db5"] +  sasch2[,
"db5.5"] + +sasch2[, "db6"] +     sasch2[, "db6.5"] + sasch2[, "db7"] +
sasch2[, "db7.5"] +      sasch2[, "db8"] + +sasch2[, "db8.5"] + sasch2[,
"db9"] +     sasch2[, "db9.5"])

I get estimates OK, but summary() collapses. However, if I do the same
thing less clumsily, by writing all the relevant variables to a new data
frame, and then calling

Call:
lm(formula = ddiff ~ ., data = dtmp)

I get not only the estimates but can also summary() with no problem.

Any ideas why? Seems to be memory-linked, because I can lm() and
summary() the matrix versions using only the sasch2[,'td*'] or db*
variable sets.

Simon Fear

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  9 13:31:15 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 9 Mar 1999 14:31:15 +0100
Subject: Bug in lm.wfit with zero weights in 0.63.3 (PR#136)
Message-ID: <199903091331.OAA05363@biostat.ku.dk>

R 0.63.3 (any platform)

library(lqs)
example(lqs)

gives

Warning in (y - z$residuals) + offset : longer object length
        is not a multiple of shorter object length

repeatedly. The problem is in lm.wfit, which removes cases with
zero weights, but does not adjust the offset.  The fix is

    z$fitted.values <- (y - z$residuals)
    z$weights <- w
    if (zero.weights) {
	coef[is.na(coef)] <- 0
	f0 <- x0 %*% coef
	if (ny > 1) {
	    save.r[ok, ] <- z$residuals
	    save.r[nok, ] <- y0 - f0
	    save.f[ok, ] <- z$fitted.values + offset[ok,]
	    save.f[nok, ] <- f0 + offset[nok,]
	}
	else {
	    save.r[ok] <- z$residuals
	    save.r[nok] <- y0 - f0
	    save.f[ok] <- z$fitted.values + offset[ok]
	    save.f[nok] <- f0 + offset[nok]
	}
	z$residuals <- save.r
	z$fitted.values <- save.f
	z$weights <- save.w
    } else 
      z$fitted.values <- z$fitted.values + offset
      
The only examples affected are those with a non-zero offset and zero
weights:  these will have incorrect fitted values.

I've commited this for 0.64.0.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Tue Mar  9 20:27:22 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Tue, 9 Mar 1999 21:27:22 +0100
Subject: summary() of lm() problem (PR#135)
In-Reply-To: <199903091320.OAA05357@biostat.ku.dk>; from fears@roycastle.liv.ac.uk on Tue, Mar 09, 1999 at 02:20:59PM +0100
References: <199903091320.OAA05357@biostat.ku.dk>
Message-ID: <19990309212722.61761@hal.stat.unipd.it>

On Tue, Mar 09, 1999 at 02:20:59PM +0100, fears@roycastle.liv.ac.uk wrote:
> .......................................................................
Dear Simon,
I have just now tried your example. My temptative conclusion is that
it is due to problem described in r-bugs in message with id 101; 
in short: when the R console is a windowed one (surely under Windows,
but I suspect also under the Mac) printing makes use of a
buffer with a fixed and hard-coded length.

Indeed: (i) I got a segmentation fault using rw0632; (ii) all
work without problem in my pre-release rw0633 where problem
has been 'cured' simply by enlarging the buffer (of course,
this WILL not been the definitive solution) but (iii) I got
a segmentation fault also in rw0633 if I reset the length of the
buffer to the R-0.63.2 one.

We hope to make available rw0633 towards the end of the
week. Brian Ripley and I have introduced a lot of Windows
specific changes and this is the reason of the delay.

guido





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Tue Mar  9 20:54:24 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Tue, 9 Mar 1999 21:54:24 +0100
Subject: summary() of lm() problem (PR#135)
In-Reply-To: <B7F24F2B48ACD11196F600805FC7F430062AA0@pdc.rc.liv.ac.uk>; from Simon Fear on Tue, Mar 09, 1999 at 08:36:18PM -0000
References: <B7F24F2B48ACD11196F600805FC7F430062AA0@pdc.rc.liv.ac.uk>
Message-ID: <19990309215424.57159@hal.stat.unipd.it>

On Tue, Mar 09, 1999 at 08:36:18PM -0000, Simon Fear wrote:
> Perhaps I might avoid wasting your time if I knew where to locate:
  Don't worry. Bugs report are vital for the entire project.

> 
> > My temptative conclusion is that
> > it is due to problem described in r-bugs in message with id 101
> 
> I haven't seen reference in the FAQ to an archive of bug reports? Have I
> just missed it?

  But, yes, there is an archive of bugs reports. From  CRAN
  main page (e.g., http://www.ci.tuwien.ac.at/R/contents.html)
  just follows the 'Bug tracking system' link.

  guido

  (ps: I am taking the freedom to post this replay to the 
       mailing list to remark the existence of the archive).
  
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From novo@uiuc.edu  Wed Mar 10 04:42:02 1999
From: novo@uiuc.edu (novo@uiuc.edu)
Date: Wed, 10 Mar 1999 05:42:02 +0100
Subject: funfits (PR#137)
Message-ID: <199903100442.FAA05782@biostat.ku.dk>

Hi,

I spotted an inconsistency between the output of funfits under R, more
specifically "nnreg", and the one obtained under S-plus. Notice the difference
in the "Root MSE", "GVC" and "GVC cost=2". As a check mark, I am also including
the data summaries, confirming that I was in fact using the same data set.
Here's my output from both systems:

============================================================
$ Splus -e
S-PLUS : Copyright (c) 1988, 1996 MathSoft, Inc.
S : Copyright AT&T.
Version 3.4 Release 1 for HP 9000 Series, HP-UX 9.0.5 : 1996
Working data will be in /mnt/cba-econ/novo/.Data

> nn.nl
Summary of outout from neural net fit
see the component summary in the output list for
more details of the fitting process
call to nnreg :
nnreg(x = inc, y = imp, k1 = 1, k2 = 7)
  # hidden units DF model DF residuals Root MSE   GCV GCV cost=2
1              1        4          296    		293.7   87400      89810
2              2        7          293    		236.9   57460      60310
3              3       10          290    		217.8   49090      52660
4              4       13          287    		213.4   47580      52200
5              5       16          284   		215.8   49200      55250
6              6       19          281    		210.7   47400      54530
7              7       22          278    		213.1   49000      57790

> summary(inc)
 Min. 1st Qu. Median Mean 3rd Qu. Max.
 1022    1926   3181 3312    4637 6152
> summary(imp)
  Min. 1st Qu. Median Mean 3rd Qu. Max.
 348.8   933.5   1932 1827    2483 5015
================================================================

================================================================
# using RedHat 5.1, Linux kernel 2.0.34
[anovo@gauss data]$ R

R : Copyright 1999, The R Development Core Team
Version 0.63.2  (January 12, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

[Previously saved workspace restored]

> summary(nn.nl)
Summary of outout from neural net fit
see the component summary in the output list for
more details of the fitting process
call to nnreg :
nnreg(x = inc, y = imp, k1 = 1, k2 = 7)
  # hidden units DF model DF residuals Root MSE   GCV GCV cost=2
1              1        4          296    		292.5   86690      89080
2              2        7          293    		236.6   57330      60170
3              3       10          290    		214.8   47750      51220
4              4       13          287    		210.0   46120      50600
5              5       16          284    		208.4   45890      51530
6              6       19          281    		204.8   44780      51510
7              7       22          278    		194.0   40590      47870

> summary(inc)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
   1022    1926    3181    3312    4637    6152
> summary(imp)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
  348.8   933.5  1932.0  1827.0  2483.0  5015.0
================================================================

Alvaro Novo

ps. The library under S-plus was provided to me by one of the original authors,
Barbara Bailey (attached her computer directory). So, I guess we are safe on
that ground.

	--      --      --      --      --      --      --      --     
                              Alvaro A. Novo
                        2116 S. Orchard St., #304
                             Urbana, IL 61801

                              novo@uiuc.edu
                        anovo@ysidro.econ.uiuc.edu
              http://www.students.uiuc.edu/~novo/Alvaro.htm
                              217-337-4893
	 --      --      --      --      --      --      --      --

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 10 06:29:47 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Mar 1999 07:29:47 +0100
Subject: funfits (PR#137)
Message-ID: <199903100629.HAA05792@biostat.ku.dk>

On Wed, 10 Mar 1999 novo@uiuc.edu wrote:

> Hi,
> 
> I spotted an inconsistency between the output of funfits under R, more
> specifically "nnreg", and the one obtained under S-plus. Notice the difference
> in the "Root MSE", "GVC" and "GVC cost=2". As a check mark, I am also including
> the data summaries, confirming that I was in fact using the same data set.
> Here's my output from both systems:

Yes, but does this problem have a unique solution?  Only rarely do neural
net fits not have multiple local optima. More specifically, on the basis of
the figures here it is the S-PLUS output that is wrong as the fits under R
are achieving lower minima. Note (I have not checked here) that often R is
working in double precision where S-PLUS uses floats (and this is Fortran
code, so this is likely).  In my own neural nets package, that did change
the answers using the same compiler and same version of S-PLUS: it is a
function of the ill-posed nature of the problem.  I also get different
answers with the same code and different compilers.

I do think that problems with a package should be taken up with the
author/porter:

auk% less DESCRIPTION 
Package: funfits
Version: 2.0-3
Author: S original by Doug Nychka <nychka@stat.ncsu.edu>
        R port by Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at>.

If you feel the need to file a report to R-bugs on a package, we do need an
example that we can reproduce and work on.  On the evidence so far I am
not convinced there is a bug here.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 10 10:11:22 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Mar 1999 11:11:22 +0100
Subject: funfits (PR#137)
In-Reply-To: ripley@stats.ox.ac.uk's message of Wed, 10 Mar 1999 07:29:47 +0100
References: <199903100629.HAA05792@biostat.ku.dk>
Message-ID: <x27lsp4pth.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> I do think that problems with a package should be taken up with the
> author/porter:
> 
> auk% less DESCRIPTION 
> Package: funfits
> Version: 2.0-3
> Author: S original by Doug Nychka <nychka@stat.ncsu.edu>
>         R port by Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at>.
> 
> If you feel the need to file a report to R-bugs on a package, we do need an
> example that we can reproduce and work on.  On the evidence so far I am
> not convinced there is a bug here.

I'll just add that there is a slot called "Packages" in the bug filing
system which holds reports that don't pertain to R itself. This is
partly intended as a service to package writers, partly to have a
place to file the reports, since there is no obvious way of keeping
people from sending them in...

I see nothing wrong in itself with discussing problems in packages on
R-devel, but it may be a bit futile if the package author/porter
isn't listening.

[Note: r-bugs stripped from Cc: list on this note]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Mar 10 16:23:40 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 10 Mar 1999 17:23:40 +0100
Subject: [R] bug? and New bug. (PR#138)
Message-ID: <199903101623.RAA06323@biostat.ku.dk>

>>>>> "Mai" == Mai Zhou <mai@ms.uky.edu> writes:

    Mai> A new bug.  In 0.63.0 (windows NT) and 0.63.2 (on the Rweb)

    >> pt(1.96,df=100)
    Mai> [1] 0.9736105 #this is OK
    >> pt(1.96, df=100000000000000000000)
    Mai> [1] 0.5 #clearly wrong

    Mai> and for df=1000000 it took way too long to compute

    Mai> same with the F-distribution function.

Oh dear!  this is an ``old one'' 
   (I had at one time fixed something similar, maybe qt() ?
    but never done/checked all these limit cases).

--- I look at it some more...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Mar 10 17:43:07 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 10 Mar 1999 18:43:07 +0100
Subject: [R] bug? and New bug. --- patch for pt() only (PR#138)
Message-ID: <199903101743.SAA06374@biostat.ku.dk>

The following patch saves  pt(), but not the  
pf() and pbeta() ones which are harder.. 
[pbeta(), the incomplete beta ratio is really underlying all these...
 needs another asymptotic formula, and it's even harder to decide 
 WHEN to switch from the (Taylor kind) series  to the asymptotic formula
]
This has to wait for a while, unless someone else....


BTW,  S-plus also fouls up completely here:

    df3 <- c(10^(3:20))
    ## completely wrong on S; taking forever on R
    plot(df3, ptd3 <- pt(1.96,df=df3), log='x', type='b')
    ptd3

giving

  [1]  9.748634e-01  9.749882e-01  9.750007e-01  9.750020e-01
  [5]  9.750021e-01  9.750021e-01  9.750021e-01  9.750023e-01
  [9]  9.750054e-01  9.750436e-01  9.748710e-01  9.725377e-01
 [13]  8.914032e-01 -4.261217e+06            NA            NA
 [17]            NA            NA

where the last before the NA's is  -426121.7  !! 


-----------------------
Here is the patch
---------------------------------------------------------------------

--- src/nmath/pt.c.~1~	Wed Feb  3 12:21:46 1999
+++ src/nmath/pt.c	Wed Mar 10 18:15:42 1999
@@ -41,6 +41,11 @@
     if(!finite(n))
 	return pnorm(x, 0.0, 1.0);
 #endif
+    if (n > 4e5) { /*-- Fixme(?): test should depend on `n' AND `x' ! */
+	/* Approx. from	 Abramowitz & Stegun 26.7.8 (p.949) */
+	val = 1./(4.*n);
+	return pnorm(x*(1. - val)/sqrt(1. + x*x*2.*val), 0.0, 1.0);
+    }
     val = 0.5 * pbeta(n / (n + x * x), n / 2.0, 0.5);
     return (x > 0.0) ? 1 - val : val;
 }

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar 10 18:19:09 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 10 Mar 1999 13:19:09 -0500
Subject: .Alias and memory
Message-ID: <99Mar10.134343est.13477@mailgate.bank-banque-canada.ca>

In an effort to encapsulate my dependence on class in order to deal with
oldclass/class in Splus  I defined the functions

   tfclass     <- class
  "tfclass<-" <- function(x, value){ class(x) <- value ; x }

and also the function

 classed <- function(x, cls) {class(x) <- cls; x}

This last allows me to end a function definition with
  ...
  classed(somecalc, "whatever") }

rather than
  ...
  obj <- somecalc
  class(obj) <- "whatever"
  obj }

Unfortunately, these seem to increase my memory usage in R substantially. Using

   tfclass      <- .Alias(class)
"tfclass<-" <- .Alias(get("class<-"))

helps a bit. Is there a better overall approach to this that avoids increasing
the memory demands?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Thu Mar 11 08:36:35 1999
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Thu, 11 Mar 1999 09:36:35 +0100
Subject: : for factors (PR#139)
Message-ID: <199903110836.JAA10063@biostat.ku.dk>


The following example from the help page does not work:

> f1_ gl(2,3); f1
> f2_ gl(3,2); f2
> f1:f2 # a factor, the ``cross''  f1 x f2

yields

Warning in f1:f2 : Numerical expression has 6 elements: only the first used
[1] 1

whereas R-0.61.2 yields

> f1:f2 # a factor, the ``cross''  f1 x f2
[1] 1:1 1:1 1:2 2:2 2:3 2:3

Note that the new behavior is consistent with S+ (but not with the
help page).

	Andreas


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = in progress
 status.rev = 0
 major = 0
 minor = 63.3
 year = 1999
 month = February
 day = 24
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Mar 11 09:37:53 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 11 Mar 1999 09:37:53 +0000 (GMT)
Subject: .Alias and memory
In-Reply-To: <99Mar10.134343est.13477@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.3.96.990311093259.12487F-100000@laplace>

Hi Paul,

On Wed, 10 Mar 1999, Paul Gilbert wrote:

> In an effort to encapsulate my dependence on class in order to deal with
> oldclass/class in Splus  I defined the functions

[ ... ]
 
> This last allows me to end a function definition with
>   ...
>   classed(somecalc, "whatever") }
> 
> rather than
>   ...
>   obj <- somecalc
>   class(obj) <- "whatever"
>   obj }

I may be missing the point, but it seems to me that you could achieve a
`one-line return' using

    structure(somecalc, class = "whatever")

which would also avoid passing somecalc into another function.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 11 10:11:06 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Mar 1999 11:11:06 +0100
Subject: : for factors (PR#139)
In-Reply-To: Andreas.Weingessel@ci.tuwien.ac.at's message of Thu, 11 Mar 1999 09:36:35 +0100
References: <199903110836.JAA10063@biostat.ku.dk>
Message-ID: <x2k8wo8hfp.fsf@blueberry.kubism.ku.dk>

Andreas.Weingessel@ci.tuwien.ac.at writes:

> Warning in f1:f2 : Numerical expression has 6 elements: only the first used
> [1] 1
> 
> whereas R-0.61.2 yields
> 
> > f1:f2 # a factor, the ``cross''  f1 x f2
> [1] 1:1 1:1 1:2 2:2 2:3 2:3

Same as PR#40...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar 11 11:15:05 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 11 Mar 1999 11:15:05 +0000 (GMT)
Subject: .Alias and memory
Message-ID: <199903111115.LAA15909@toucan.stats.ox.ac.uk>

> Date: Thu, 11 Mar 1999 09:37:53 +0000 (GMT)
> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
> To: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> On Wed, 10 Mar 1999, Paul Gilbert wrote:
> 
> > In an effort to encapsulate my dependence on class in order to deal with
> > oldclass/class in Splus  I defined the functions
> 
> [ ... ]
>  
> > This last allows me to end a function definition with
> >   ...
> >   classed(somecalc, "whatever") }
> > 
> > rather than
> >   ...
> >   obj <- somecalc
> >   class(obj) <- "whatever"
> >   obj }
> 
> I may be missing the point, but it seems to me that you could achieve a
> `one-line return' using
> 
>     structure(somecalc, class = "whatever")
> 
> which would also avoid passing somecalc into another function.

In part you are. That is equivalent to

attr(somecalc, "class") <- "whatever"

and whereas that happens to be how class<- is defined on S3 and R, it
is not how it works in S-PLUS 5 (although oldClass<- is currently
defined that way).  When you want to change to S-PLUS 5-style classes
you have to remember that you have subverted the system!

More generally, using the representation not the public method in
object-oriented programming is a recipe for disaster.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 11 13:12:50 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 11 Mar 1999 14:12:50 +0100
Subject: [R] R and kron
In-Reply-To: <Pine.LNX.3.95.990311120618.885C-100000@mercury.quantex> (message
 from John Logsdon on Thu, 11 Mar 1999 12:08:33 +0000 (GMT))
References: <Pine.LNX.3.95.990311120618.885C-100000@mercury.quantex>
Message-ID: <199903111312.OAA07075@sophie.ethz.ch>

>>>>> "John" == John Logsdon <j.logsdon@lancaster.ac.uk> writes:

    John> I note that the CRAN at .at land still refers to 0.63.2.  Is this
    John> just a typo?  I don't want to download a whole lot only to find I
    John> still have it!  Does 0.63.3 live elsewhere?

It's certainly there! we all mirror it from Vienna !
It maybe that the html text doesn't yet have the proper link...
But it IS there (and on any other CRAN mirror)
 in the   ./src/base/ directory !

    John> And I note the new function kronecker - very useful but can it be
    John> applied to non-numerics as in factors, data frames etc preserving
    John> the class, levels and names?

Certainly --- if you enhance it;
Thanks in advance for the contribution...  ;-)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Mar 11 13:55:44 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 11 Mar 1999 13:55:44 +0000 (GMT)
Subject: [R] R and kron
In-Reply-To: <199903111312.OAA07075@sophie.ethz.ch>
Message-ID: <Pine.GSO.3.96.990311135103.12487I-100000@laplace>

On Thu, 11 Mar 1999, Martin Maechler wrote:

>     John> And I note the new function kronecker - very useful but can it be
>     John> applied to non-numerics as in factors, data frames etc preserving
>     John> the class, levels and names?
> 
> Certainly --- if you enhance it;
> Thanks in advance for the contribution...  ;-)

kronecker() is actually a wrapper for outer(), so unfortunately you will
have to enhance outer() as well!  But I expect an enhanced outer() would
be quite useful.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Mar 11 15:49:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 11 Mar 1999 10:49:14 -0500
Subject: [R] re: smp in Linux
References: <Pine.GSO.4.10.9903100821400.4178-100000@wompom.biostat.washington.edu>
Message-ID: <99Mar11.111420est.13505@mailgate.bank-banque-canada.ca>

>On the other hand, most of the problems I have where speed is an issue are
>simulations or bootstrapping problems that scale almost perfectly by
>running 1/n as many on each of n processors.

This has been my experience too, and I have lots of problems like this. It would
sure be nice to have some possibility like:

parallelfor (i in 1:N, listofmachines )  x[[i]] <- simulate(model[[i]],
data[[i]])

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@ucar.edu  Thu Mar 11 16:15:17 1999
From: oncley@ucar.edu (oncley@ucar.edu)
Date: Thu, 11 Mar 1999 17:15:17 +0100
Subject: rbind dimnames with complex (PR#140)
Message-ID: <199903111615.RAA11189@biostat.ku.dk>

Full_Name: Steve Oncley
Version: 0.63.3
OS: Redhat5.2 i386
Submission from: 128.117.80.159 (128.117.80.159)


names (or dimnames) are lost when rbind-ing complex values (but not cbind):

> x <- rep(1+1i,2)
> names(x) <- c("a","b")
> x
   a    b
 1+1i 1+1i
> rbind(x,x)
     [,1] [,2]
[1,] 1+1i 1+1i
[2,] 1+1i 1+1i
> cbind(x,x)
  [,1] [,2]
a 1+1i 1+1i
b 1+1i 1+1i


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@ucar.edu  Thu Mar 11 16:19:43 1999
From: oncley@ucar.edu (oncley@ucar.edu)
Date: Thu, 11 Mar 1999 17:19:43 +0100
Subject: log plots fail with NAs (PR#141)
Message-ID: <199903111619.RAA11252@biostat.ku.dk>

Full_Name: Steve Oncley
Version: 0.63.3
OS: Redhat5.2 i386
Submission from: 128.117.80.159 (128.117.80.159)


Shouldn't this work, but only plot 2 points?

> plot(c(1,NA,10),log="y")
Error: missing value where logical needed


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@ucar.edu  Thu Mar 11 16:34:36 1999
From: oncley@ucar.edu (oncley@ucar.edu)
Date: Thu, 11 Mar 1999 17:34:36 +0100
Subject: exists finds objects lots of places! (PR#142)
Message-ID: <199903111634.RAA11500@biostat.ku.dk>

Full_Name: Steve Oncley
Version: 0.63.3
OS: Redhat5.2 i386 
Submission from: 128.117.80.159 (128.117.80.159)


"exists" finds object UP TO the position it is in
> search()
[1] ".GlobalEnv"   "Autoloads"    "package:base"
> exists("ls",1)
[1] TRUE
> exists("ls",2)
[1] TRUE
> exists("ls",3)
[1] TRUE
> x <- 1
> exists("x",1)
[1] TRUE
> exists("x",2)
[1] FALSE
> exists("x",3)
[1] FALSE

whereas, S+ only finds the one position where the object is:
> search()
 [1] ".Data"                                    
 [2] "/net/aster/splus3.4/local/.Data"          
 [3] "/net/aster/splus3.4/splus/.Functions"     
 [4] "/net/aster/splus3.4/stat/.Functions"      
 [5] "/net/aster/splus3.4/s/.Functions"         
 [6] "/net/aster/splus3.4/s/.Datasets"          
 [7] "/net/aster/splus3.4/stat/.Datasets"       
 [8] "/net/aster/splus3.4/splus/.Datasets"      
 [9] "/net/aster/splus3.4/library/Matrix/.Data" 
[10] "/net/aster/splus3.4/library/trellis/.Data"
> exists("ls",1)
[1] F
> exists("ls",2)
[1] F
> exists("ls",3)
[1] F
> exists("ls",4) 
[1] F
> exists("ls",5)
[1] T
> exists("ls",6)
[1] F


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 11 16:38:46 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Mar 1999 17:38:46 +0100
Subject: log plots fail with NAs (PR#141)
In-Reply-To: oncley@ucar.edu's message of Thu, 11 Mar 1999 17:19:43 +0100
References: <199903111619.RAA11252@biostat.ku.dk>
Message-ID: <x23e3chtgp.fsf@blueberry.kubism.ku.dk>

oncley@ucar.edu writes:

> Shouldn't this work, but only plot 2 points?
> 
> > plot(c(1,NA,10),log="y")
> Error: missing value where logical needed

Yes. Inside xy.coords, we have

if ("y" %in% log && any(ii <- y <= 0))
                              ^^^^^^

make that y <= 0 & !is.na(y)
                 ^^^^^^^^^^^

(and ditto for x)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Mar 11 17:10:03 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 11 Mar 1999 18:10:03 +0100
Subject: exists finds objects lots of places! (PR#142)
Message-ID: <199903111710.SAA14188@biostat.ku.dk>

On Thu, 11 Mar 1999 oncley@ucar.edu wrote:

> Full_Name: Steve Oncley
> Version: 0.63.3
> OS: Redhat5.2 i386 
> Submission from: 128.117.80.159 (128.117.80.159)
> 
> 
> "exists" finds object UP TO the position it is in


> whereas, S+ only finds the one position where the object is:

"It's not a bug, it's a feature"

R> args(exists)
function (x, where = -1, envir = pos.to.env(where), frame, mode = "any", 
    inherits = TRUE) 

You need to use inherits=F to search only the specified position.>
R> search()
[1] ".GlobalEnv"   "Autoloads"    "package:base"
R> exists("ls",2)
[1] TRUE 
R> exists("ls",2,inherits=F)
[1] FALSE


Thomas Lumley
Assistant Professor,Biostatistics
University of Washington, Seattle



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Mar 11 17:09:29 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 11 Mar 1999 09:09:29 -0800 (PST)
Subject: [R] re: smp in Linux
In-Reply-To: <99Mar11.111420est.13505@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.10.9903110907470.7067-100000@wompom.biostat.washington.edu>

On Thu, 11 Mar 1999, Paul Gilbert wrote:

> >On the other hand, most of the problems I have where speed is an issue are
> >simulations or bootstrapping problems that scale almost perfectly by
> >running 1/n as many on each of n processors.
> 
> This has been my experience too, and I have lots of problems like this. It would
> sure be nice to have some possibility like:
> 
> parallelfor (i in 1:N, listofmachines )  x[[i]] <- simulate(model[[i]],
> data[[i]])
> 

This may be a case for implementing .For().  We currently say it is not
necessary and thus not implemented, which is true for systems with more
users than processors, but it would be useful for multiprocessor systems.

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From N.J.Lee@statslab.cam.ac.uk  Thu Mar 11 17:42:07 1999
From: N.J.Lee@statslab.cam.ac.uk (Nicholas Lee)
Date: Thu, 11 Mar 1999 17:42:07 +0000 (GMT)
Subject: [R] re: smp in Linux
In-Reply-To: <99Mar11.111420est.13505@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.HPP.3.96.990311173701.21260A-100000@tiger.statslab.cam.ac.uk>


On Thu, 11 Mar 1999, Paul Gilbert wrote:

> This has been my experience too, and I have lots of problems like this.
> It would sure be nice to have some possibility like: 
> 
> parallelfor (i in 1:N, listofmachines )  x[[i]] <- simulate(model[[i]],
> data[[i]]) 

Wouldn't it be better to do these sort of coase grain parallisation at a
higher level?  ie with a little bit of perl code, and/or some other load
distribution package from outside R. 

Nicholas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it  Sun Mar 14 10:09:32 1999
From: guido@hal.stat.unipd.it (guido@hal.stat.unipd.it)
Date: Sun, 14 Mar 1999 11:09:32 +0100
Subject: y with diaeresis (PR#143)
Message-ID: <199903141009.LAA03311@blueberry.kubism.ku.dk>

[Not important for message below; in this moment link from CRAN
 to the 'R Bug Tracking system (http://blueberry.kubism.ku.dk/R)' 
 is down (at least, I get a "The requested URL /R was not 
 found on this server." message)]

To display properly this message, you mailer must handle properly
latin1 encoding. With other encoding, I suppose that the role
played by 'y diaeresis' should be played by the character
with code '255'

Look to the following example:
----------------------------------------------------------------------------
[~/tmp]% uname -a
Linux tui 2.0.34 #1 Thu Jan 14 18:56:24 CET 1999 i686 unknown
[~/tmp]% cat a.R
x <- "12"
cat(x,"\n")
[~/tmp]% ../src/R-release/bin/R --vanilla < a.R

R : Copyright 1999, The R Development Core Team
Version 0.63.3 in progress (February 25, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> x <- "12"
+ cat(x,"\n")
+ 
[~/tmp]% 
----------------------------------------------------------------------------
Look to the 'continuation' prompt. It seems that first line isn't 
parsed to end. 
[Note: I have tested this also with the final 0.63.3; simply,
it is not installed on machine I am writing in this moment]

Problem is due to 'y diaeresis'.

This is from ESS (not quoting the 'y diaeresis'; to insert it in 
a emacs buffer I have to hit ^Q377)
----------------------------------------------------------------------------
> 

Save workspace image? [y/n/c]:
----------------------------------------------------------------------------
i.e, 'y diaeresis' seems interpreted as an EOF.

I don't know where is the solution but problem seems due to the
conversions from int to char (made implicitly by R_ReadConsole)
and then back to int made in src/main/gram.y(buffer_getc). Result
is that the 'if (c==EOF)' test in that function is true when c='y diaeresis'.

Indeed:
----------------------------------------------------------------------------
[~/tmp]% cat a.c
#include <stdio.h>

int main(int argc,char **argv) {
  int i,j;
  char c;
  while ((i=fgetc(stdin))!=EOF) {
    c = i;
    j = c;
    if (c=='\n') printf("\n");
    else  printf("/%d/%d/%d/%c/%d ",i,j,c,c,j==EOF);
  }
}
[~/tmp]% gcc -o a a.c
[~/tmp]% ./a < a.R
/120/120/120/x/0 /32/32/32/ /0 /60/60/60/</0 /45/45/45/-/0 /32/32/32/ /0 /34/34/34/"/0 /49/49/49/1/0 /50/50/50/2/0 /192/-64/-64//0 /193/-63/-63//0 /255/-1/-1//1 /34/34/34/"/0 
/99/99/99/c/0 /97/97/97/a/0 /116/116/116/t/0 /40/40/40/(/0 /120/120/120/x/0 /44/44/44/,/0 /34/34/34/"/0 /92/92/92/\/0 /110/110/110/n/0 /34/34/34/"/0 /41/41/41/)/0 
------------------------------------------------------------------------------
Look to the sequence including 'y diaeresis'. It shows that after the
double conversion 'y diaeresis'==EOF is TRUE.

g.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar 14 13:46:50 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 1999 14:46:50 +0100
Subject: y with diaeresis (PR#143)
In-Reply-To: guido@hal.stat.unipd.it's message of "Sun, 14 Mar 1999 11:09:32 +0100"
References: <199903141009.LAA03311@blueberry.kubism.ku.dk>
Message-ID: <x2emmstc8l.fsf@blueberry.kubism.ku.dk>

guido@hal.stat.unipd.it writes:

> [Not important for message below; in this moment link from CRAN
>  to the 'R Bug Tracking system (http://blueberry.kubism.ku.dk/R)' 
>  is down (at least, I get a "The requested URL /R was not 
>  found on this server." message)]

Arrrgh... That's what happens if you upgrade systems on a Friday
afternoon. Apparently, the Apache configurations scripts got changed
from RedHat5.1 to 5.2 and I didn't think to check. Should be OK now.

(Email submissions take a different route in and should be unaffected
by this.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar 14 14:03:47 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 1999 15:03:47 +0100
Subject: R-bugs -- was: Re: y with diaeresis (PR#143)
In-Reply-To: Peter Dalgaard BSA's message of "14 Mar 1999 14:46:50 +0100"
References: <199903141009.LAA03311@blueberry.kubism.ku.dk> <x2emmstc8l.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2d82ctbgc.fsf_-_@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> guido@hal.stat.unipd.it writes:
> 
> > [Not important for message below; in this moment link from CRAN
> >  to the 'R Bug Tracking system (http://blueberry.kubism.ku.dk/R)' 
> >  is down (at least, I get a "The requested URL /R was not 
> >  found on this server." message)]
> 
> Arrrgh... That's what happens if you upgrade systems on a Friday
> afternoon. Apparently, the Apache configurations scripts got changed
> from RedHat5.1 to 5.2 and I didn't think to check. Should be OK now.

Erm, BTW: That link... The official link is supposed to be

http://r-bugs.biostat.ku.dk

and not something hardwired into my (current!) PC.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar 14 15:48:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 1999 16:48:55 +0100
Subject: y with diaeresis (PR#143)
In-Reply-To: guido@hal.stat.unipd.it's message of "Sun, 14 Mar 1999 11:09:32 +0100"
References: <199903141009.LAA03311@blueberry.kubism.ku.dk>
Message-ID: <x2iuc4t6l4.fsf@blueberry.kubism.ku.dk>

guido@hal.stat.unipd.it writes:

> [Not important for message below; in this moment link from CRAN
>  to the 'R Bug Tracking system (http://blueberry.kubism.ku.dk/R)' 
>  is down (at least, I get a "The requested URL /R was not 
>  found on this server." message)]
> 
> To display properly this message, you mailer must handle properly
> latin1 encoding. With other encoding, I suppose that the role
> played by 'y diaeresis' should be played by the character
> with code '255'
...
> and then back to int made in src/main/gram.y(buffer_getc). Result
> is that the 'if (c==EOF)' test in that function is true when c='y diaeresis'.

I've sprinkled a handful of "unsigned" over the sources. Seems to have
helped. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Mon Mar 15 05:18:08 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 14 Mar 1999 21:18:08 -0800
Subject: R packages and test code
Message-ID: <87pv6b9vqn.fsf@alpha.cfas.washington.edu>



Where is the best place to put evaluation/test code in creating an R
package?  I thought about a test subdirectory, but might it be better
to put in the R directory?  I guess I'm more concerned about the
output used for evaluating the success of the test, rather than the
test code and data, itself.

best,
-tony

-- 
A.J. Rossini
UW Biostatistics & Center for AIDS Research 
206-543-1044 / 206-720-4282                 
rossini@biostat.washington.edu              
http://www.biostat.washington.edu/~rossini/ 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Mar 15 09:40:14 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 15 Mar 1999 10:40:14 +0100
Subject: R packages and test code
In-Reply-To: <87pv6b9vqn.fsf@alpha.cfas.washington.edu>
 (rossini@biostat.washington.edu)
References: <87pv6b9vqn.fsf@alpha.cfas.washington.edu>
Message-ID: <199903150940.KAA09497@sophie.ethz.ch>

>>>>> "tony" == A J Rossini <rossini@biostat.washington.edu> writes:

    tony> Where is the best place to put evaluation/test code in creating
    tony> an R package?  I thought about a test subdirectory, but might it
    tony> be better to put in the R directory?  I guess I'm more concerned
    tony> about the output used for evaluating the success of the test,
    tony> rather than the test code and data, itself.

Good question.  
This hasn't been done yet in a formal general way.
MASS comes with the  scripts subdirectory, 
but there's no "make check" and comparison of desired and actual output.

1) "THE" basic test is running all the examples from all the *.Rd files.
  You can do this with contributed packages by

       R CMD check [options] [-l lib] pkg_1 ... pkg_n

  However, this just runs the examples 
	   (those *not* within a \dontrun{.} clause)
  and produces an  <pkg>-Ex.Rout  file.
  You still have to check yourself if the *.Rout file has the proper output

2) I assume the thing you desire is something like 
   what the distributed R does in  ./tests/  where there are
   foobar.R  and foobar.Rout.save  files 
	     for (foobar in c("is-things", "simple-tests", "eval-etc",
			      ...)) :
      R --vanilla < foobar.R > foobar.Rout
   is run 
   and a somewhat "tolerant" diff between  foobar.Rout and foobar.Rout.save
   is made. "SUCCESS" (actually `Ok') is reported when there are no
   (nontrivial) diffs.

   Try  "make check" with your R distribution if you don't know what I mean.

It shouldn't be hard to add this to the  "R INSTALL" scripts  :

   If there's  <pkg-src>/tests/
   for all pairs foobar.R and foobar.Rout.save (in that directory) 
   do the above test.

Tony, could you try to add this feature (to the relevant R scripts)
yourself?  or anyone else?
[it would be nice of course, if the identical scripts were used for 
 "base R"'s  ``make check''  and for the contributed packages's  
 "R CMD check .. pkg" or (preferably) "R INSTALL pkg ..."
]

Martin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Mon Mar 15 18:35:39 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 15 Mar 1999 10:35:39 -0800
Subject: R packages and test code
In-Reply-To: Martin Maechler's message of "Mon, 15 Mar 1999 10:40:14 +0100"
References: <87pv6b9vqn.fsf@alpha.cfas.washington.edu> <199903150940.KAA09497@sophie.ethz.ch>
Message-ID: <87sob6eh38.fsf@alpha.cfas.washington.edu>


>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
>>>>> "tony" == A J Rossini <rossini@biostat.washington.edu> writes:

    tony> Where is the best place to put evaluation/test code in
    tony> creating an R package?  I thought about a test subdirectory,
    tony> but might it be better to put in the R directory?  I guess
    tony> I'm more concerned about the output used for evaluating the
    tony> success of the test, rather than the test code and data,
    tony> itself.

    MM> Good question.  This hasn't been done yet in a formal general
    MM> way.  MASS comes with the scripts subdirectory, but there's no
    MM> "make check" and comparison of desired and actual output.

Is there a more formal description of the packaging system than that
given in the R-faq (which needs a bit of an update for ESS, Kurt)?

(I'd like to see one, if so, in order to specify exactly how to
consider the general situation).


    MM> 2) I assume the thing you desire is something like
    MM>    what the distributed R does in ./tests/ where there are
    MM>    foobar.R and foobar.Rout.save files
    MM> 	     for (foobar in c("is-things", "simple-tests",
    MM> 	     "eval-etc",
    MM> 			      ...)) :
    MM>       R --vanilla < foobar.R > foobar.Rout
    MM>    is run and a somewhat "tolerant" diff between foobar.Rout
    MM>    and foobar.Rout.save is made. "SUCCESS" (actually `Ok') is
    MM>    reported when there are no (nontrivial) diffs.

Yes, but not quite as formal as checking for non-trivial diffs.  I'd
be satisfied with just being able to construct a diff (or the new
file, to compare with the gold standard, for the diff) and making the
user visually go over them.

    MM> Tony, could you try to add this feature (to the relevant R
    MM> scripts) yourself?  or anyone else?  [it would be nice of
    MM> course, if the identical scripts were used for
    MM>  "base R"'s ``make check'' and for the contributed packages's
    MM>  "R CMD check .. pkg" or (preferably) "R INSTALL pkg ..."
    MM> ]

I can try, since I really want this (the tests, and quite possibly the
packaging specification for my next stat language project :-).
Probably won't happen until after my Vienna/Berlin/Atlanta trips over
the next 2+ weeks...

best,
-tony

-- 
A.J. Rossini
UW Biostatistics & Center for AIDS Research 
206-543-1044 / 206-720-4282                 
rossini@biostat.washington.edu              
http://www.biostat.washington.edu/~rossini/ 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wagman@enteract.com  Thu Mar 18 07:58:49 1999
From: wagman@enteract.com (wagman@enteract.com)
Date: Thu, 18 Mar 1999 08:58:49 +0100
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' (PR#144)
Message-ID: <199903180758.IAA08796@blueberry.kubism.ku.dk>

Full_Name: Barnet Wagman
Version: 63.2
OS: Linux
Submission from: (NULL) (207.229.172.168)


After a number of interations, glm(family=binomial) throws an error
	'Error: names attribute must be the same length as the vector'
The same model works in lm() with the same data frame, so presumably it is not
misspecified.

In the iterations prior to the error, glm() generates the warnings
	'Warning: fitted probabilities of 0 or 1 occurred'

The fit is converging prior to the error.

Could the problem involve a singularity and the wrong error message?

FYI The model contains 34 variables in around 11,000 cases.
The command used is
'glm(formula=...,data=...,family=binomial,control=control.glm(epsilon=0.0001.maxit=50,
 trace=TRUE))'
Changing epsilon and/or explicitly setting 'start' does not effect the problem.


Thanks for your help.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Mar 22 12:40:03 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Mon, 22 Mar 1999 12:40:03 +0000 (GMT)
Subject: Extension to outer()
Message-ID: <Pine.GSO.3.96.990322121912.691A-200000@laplace>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-1804928587-922106403=:691
Content-Type: TEXT/PLAIN; charset=US-ASCII

A couple of weeks ago I asked if anyone had generalised outer to include
bound extents -- effectively taking the diagonal of an outer product.
Attached is my take on the solution.  There is an extra argument to outer,
BIND, which if null results in a simple outer product.  I've used a
slightly different algorithm which I think is more transparent than the
original code, and also generalises better.

If BIND is not null, then outer(A, B, BIND = c(i, j)) computes an array
with extent j of B bound along extent i of A.  For example, if A and B are
both matrices and V is the result with BIND=c(1,1), then V[i, j, k] =
FUN(A[i, j], B[i, k], ...).  One use for the BIND argument is in computing
Euclidean distances:

"gdist" <- function(X, Y)
{
	X <- as.matrix(X)
	Y <- as.matrix(Y)
	sqrt(apply(outer(X, Y, "-", BIND = c(2,2))^2, c(1,3), sum))
}

which, unlike dist() from `mva' can provide submatrices of the full
distance matrix -- very useful for covariances.

This BIND argument to outer turns out to be very useful in lots of
different areas of our work.  If anyone has any feedback on the code I
would be very grateful for it.  Many thanks, Jonathan. 

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

---559023410-1804928587-922106403=:691
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="outer.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.3.96.990322124003.691B@laplace>
Content-Description: 

Im91dGVyIiA8LQ0KZnVuY3Rpb24gKEEsIEIsIEZVTiA9ICIqIiwgQklORCA9
IE5VTEwsIC4uLikgDQp7DQogICAgRlVOIDwtIG1hdGNoLmZ1bihGVU4pDQog
ICAgQSA8LSBhcy5hcnJheShBKQ0KICAgIEIgPC0gYXMuYXJyYXkoQikNCiAg
ICBkaW1zIDwtIGxpc3QoZGltKEEpLCBkaW0oQikpDQogICAgbmEgPC0gbGVu
Z3RoKGRpbXNbWzFdXSkNCiAgICBuYiA8LSBsZW5ndGgoZGltc1tbMl1dKQ0K
ICAgIGlmIChpcy5udWxsKGRuYSA8LSBkaW1uYW1lcyhBKSkpIA0KICAgICAg
ICBkbmEgPC0gdmVjdG9yKCJsaXN0IiwgbmEpDQogICAgaWYgKGlzLm51bGwo
ZG5iIDwtIGRpbW5hbWVzKEIpKSkgDQogICAgICAgIGRuYiA8LSB2ZWN0b3Io
Imxpc3QiLCBuYikNCiAgICBpZiAoaXMubnVsbChCSU5EKSkgew0KICAgICAg
ICAjIHNpbXBsZSBvdXRlcg0KICAgICAgICBBIDwtIGFycmF5KEEsIGMoZGlt
c1tbMV1dLCBkaW1zW1syXV0pKQ0KICAgICAgICBCIDwtIGFycmF5KEIsIGMo
ZGltc1tbMl1dLCBkaW1zW1sxXV0pKQ0KICAgICAgICBCIDwtIGFwZXJtKEIs
IGMobmIgKyAxOm5hLCAxOm5iKSkNCiAgICAgICAgcm9iaiA8LSBhcnJheShG
VU4oQSwgQiwgLi4uKSwgZGltKEEpKQ0KICAgICAgICBkaW1uYW1lcyhyb2Jq
KSA8LSBjKGRuYSwgZG5iKQ0KICAgICAgICByb2JqDQogICAgfQ0KICAgIGVs
c2Ugew0KICAgICAgICAjIG1vcmUgY29tcGxpY2F0ZWQgYm91bmQgb3V0ZXIN
CiAgICAgICAgaWYgKCEoQklORFsxXSAlaW4lIDE6bmEgJiYgQklORFsyXSAl
aW4lIDE6bmIpKSANCiAgICAgICAgICAgIHN0b3AoImludmFsaWQgZXh0ZW50
IGZvciBcIkJJTkRcIiIpDQogICAgICAgIGVsc2UgaWYgKGRpbXNbWzFdXVtC
SU5EWzFdXSAhPSBkaW1zW1syXV1bQklORFsyXV0pIA0KICAgICAgICAgICAg
c3RvcCgiRXh0ZW50cyB0byBiZSBib3VuZCBkbyBub3QgbWF0Y2giKQ0KICAg
ICAgICBpZiAobmIgPT0gMSkgDQogICAgICAgICAgICByb2JqIDwtIHN3ZWVw
KEEsIEJJTkRbMV0sIEIsIEZVTiA9IEZVTiwgLi4uKQ0KICAgICAgICBlbHNl
IHsNCiAgICAgICAgICAgICMgc3dpdGNoIGJvdW5kIGV4dGVudCB0byB0aGUg
ZnJvbnQNCiAgICAgICAgICAgIG9kYSA8LSBjKEJJTkRbMV0sICgxOm5hKVst
QklORFsxXV0pDQogICAgICAgICAgICBkYSA8LSBkaW0oQSA8LSBhcGVybShB
LCBvZGEpKQ0KICAgICAgICAgICAgZGIgPC0gZGltKEIgPC0gYXBlcm0oQiwg
YyhCSU5EWzJdLCAoMTpuYilbLUJJTkRbMl1dKSkpDQogICAgICAgICAgICAj
IHJlcGxpY2F0ZSBBIGFsb25nIEIgKGV4Y2x1ZGluZyBib3VuZCBleHRleHQp
IGFuZCB2aWNlIHZlcnNhDQogICAgICAgICAgICBBIDwtIGFycmF5KEEsIGMo
ZGEsIGRiWy0xXSkpDQogICAgICAgICAgICBCIDwtIGFycmF5KEIsIGMoZGIs
IGRhWy0xXSkpDQogICAgICAgICAgICAjIGB0cmFuc3Bvc2UnIEIsIGNvbXB1
dGUgdGhlbiB1bi1wZXJtDQogICAgICAgICAgICBpZiAobmEgPiAxKSANCiAg
ICAgICAgICAgICAgICBCIDwtIGFwZXJtKEIsIGMoMSwgbmIgKyAxOihuYSAt
IDEpLCAyOm5iKSkNCiAgICAgICAgICAgIHJvYmogPC0gRlVOKEEsIEIsIC4u
LikNCiAgICAgICAgICAgIGRpbShyb2JqKSA8LSBjKGRpbXNbWzFdXVtvZGFd
LCBkaW1zW1syXV1bLUJJTkRbMl1dKQ0KICAgICAgICAgICAgcm9iaiA8LSBh
cGVybShyb2JqLCBjKG9yZGVyKG9kYSksIG5hICsgMToobmIgLSAxKSkpDQog
ICAgICAgIH0NCiAgICAgICAgZGltbmFtZXMocm9iaikgPC0gYyhkbmEsIGRu
YlstQklORFsyXV0pDQogICAgICAgIHJvYmoNCiAgICB9DQp9DQo=
---559023410-1804928587-922106403=:691--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Mar 23 07:33:24 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 23 Mar 1999 08:33:24 +0100 (CET)
Subject: [R] e1071 and netpbm
In-Reply-To: <XFMail.990322145503.plummer@iarc.fr>
References: <XFMail.990322145503.plummer@iarc.fr>
Message-ID: <14071.17348.841873.251642@sauron.ci.tuwien.ac.at>


[ ... taken from r-help to r-devel ... ]

R core kind of agreed to newly introduce configure capabilities to
packages such that we can handle situations like this cleanly. I.e.,
if the package contains a configur script, this is run to create a
proper Makefile. Hopefully I can then clean up the e1071 Makefile to
build the shared lib correctly on more than one platform.

fritz

>>>>> On Mon, 22 Mar 1999 14:55:03 +0100 (CET),
>>>>> Martyn Plummer (MP) wrote:

MP> [Snip: Problems installing the e1071 package on Red Hat Linux]
MP> Instead of having a single netpbm library, Red Hat has four libraries
MP> (all provided by the libgr rpm), with recursive dependencies

MP> libpnm -> libppm -> libpgm -> libpbm

MP> So, for example, libpbm stands alone but libpgm contains references to
MP> functions in libpbm.  This means that if you want to use any functions
MP> in libpnm (which we do), you must also link against the other three
MP> libraries. If you don't do this, then the compiler won't complain about
MP> undefined references when you type "R INSTALL e1071", since it is building
MP> a shared object, but you will get run time errors.

MP> I can't see the advantage of splitting the library, myself. I wrote to
MP> Red Hat about this in November but didn't get a reply.  It looks like
MP> various other Linux distributions which use the RPM packager (OpenLinux,
MP> TurboLinux, LinuxPPC, ...) use the same setup.

MP> I use the patch below when compiling on Red Hat
MP> Martyn
MP> diff -uNr e1071/src/Makefile e1071-patched/src/Makefile
MP> --- e1071/src/Makefile	Tue Nov 17 11:44:10 1998
MP> +++ e1071-patched/src/Makefile	Fri Nov 20 15:05:00 1998
MP> @@ -4,7 +4,7 @@
MP>  OBJS=pnm.o 
 
MP>  $(LIBNAME).so:  $(OBJS)
MP> -	$(LD) $(SHLIBLDFLAGS) -o $@ $(OBJS) -lnetpbm
MP> +	$(LD) $(SHLIBLDFLAGS) -o $@ $(OBJS) -lpnm -lppm -lpgm -lpbm
 
MP>  clean:
MP>  	@rm -f *.o *.so
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar 23 21:46:30 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 23 Mar 1999 16:46:30 -0500
Subject: (-2) %% 12
Message-ID: <99Mar23.165342est.13451@mailgate.bank-banque-canada.ca>

(-2) %% 12 seems to give the wrong result in  R pre 63.3:

> e1 <- -2
> e2 <- 12
> e1 %% e2
[1] -2
> e1 - floor(e1/e2) * e2
[1] 10

In Splus:
> e1 <- -2
> e2 <- 12
> e1 %% e2
[1] 10
> e1 - floor(e1/e2) * e2
[1] 10

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jsarma@cs.gmu.edu  Tue Mar 23 21:58:04 1999
From: jsarma@cs.gmu.edu (jsarma@cs.gmu.edu)
Date: Tue, 23 Mar 1999 22:58:04 +0100
Subject: R-0.63.3 package on IRIX 6.5 machine (PR#145)
Message-ID: <199903232158.WAA27947@blueberry.kubism.ku.dk>

Hi,

I installed R-0.63.3 version on SGI machine running
IRIX 6.5.

Machine details:
319 <mind.krasnow.gmu.edu:R-0.63.3> uname -a
IRIX64 mind 6.5 07271714 IP27

I used gcc (egcs1.1.1) and g77 combination.
I use the GNU make rather than the sgi make.
I went through your help mailing list and found that
I have to edit the Mathlib.h file in src/include directory
to undefine certain definitions which conflict with sgi's
definition.

When I type gmake, I got one error message:

gmake[2]: Entering directory `/Apps/usr/local/R-0.63.3/doc'
Installing doc ...
install:  ../doc/html/search/index.txt does not exist
gmake[2]: *** [install-html] Error 1


Then when I ran the check, I was not able to run modreg-Ex.R example.
It runs for over 2 hours but does not generate anything beyond the
2 pages it generates in the first few minutes.  The second page
contains only 3 graphs and a half drawn graph.  The modreg.Rout
file gets deleted when I terminate the check process. So I am not
sure where it is stuck.  I am not sure how long I should let it
run.  Moreover it does not write anything to .out or .ps file
after the first few minutes.  Is this a known bug?


Jayshree Sarma


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Mar 24 10:37:24 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 24 Mar 1999 11:37:24 +0100
Subject: (-2) %% 12 --- was a bug fix in 0.63.3  {{and musings about S ..}}
In-Reply-To: <99Mar23.165342est.13451@mailgate.bank-banque-canada.ca> (message
 from Paul Gilbert on Tue, 23 Mar 1999 16:46:30 -0500)
References: <99Mar23.165342est.13451@mailgate.bank-banque-canada.ca>
Message-ID: <199903241037.LAA04080@sophie.ethz.ch>


>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> (-2) %% 12 seems to give the wrong result in R pre 63.3:
    >> e1 <- -2 ;  e2 <- 12  ; e1 %% e2
    PaulG> [1] -2
    >> e1 - floor(e1/e2) * e2
    PaulG> [1] 10

    PaulG> In Splus:
    >> e1 <- -2 ; e2 <- 12 ;  e1 %% e2
    PaulG> [1] 10
    >> e1 - floor(e1/e2) * e2
    PaulG> [1] 10

Thank you, Paul, for bringing up this topic (again).

Short answer:  
      This is has been changed in 0.63.3
      and is mentioned in the "Bug Fixes" part of NEWS (and was even on R-announce!)
      NEWS>>
      NEWS>>   o   a %% b -- is now periodic instead of symmetric; more S compatible.
      NEWS>>



Longer answer:

      There are two problems:

      1) ANSI C leaves the semantics of "a % b" (corresponding to R's "a %% b")
	 UNDEFINED whenever one of a or b is negative.

	 IMHO, this *is* a horrible fact  (showing how little some computer scientists
					   care about mathematical computing..).

         Older versions of R used to do what you mention above which is
         what C (and hence R) do on at least Solaris and Linux-Intel.


      2) S-plus  DOES give different answers __solely__ depending on the
         storage.mode  of  a (and/or b)

	 [being on the S version 4  mailing list, I've tried to start a
	  discussion on this,about a year ago, but nobody has even answered me...
	 So, the problem was not addressed for S-plus 5 and hence probably never will]

	 This is S-plus (any version AFAIK; certainly both 3.4 and 5.0 for Unix)

	    > version
	    Version 3.4 Release 1 for Sun SPARC, SunOS 5.3 : 1996 
	    > d3 <- as.numeric(3) # 'd' for double
	    > i3 <- as.integer(3)

	    ## These two differ, but I think they should not ...
	    > d3 %% c(-5:4)
	     [1] -2 -1  0 -1  0  3  0  1  0  3
	    > i3 %% c(-5:4)
	     [1] 3 3 0 1 0 3 0 1 0 3

	    > (-d3) %% c(-5:4)
	     [1] -3 -3  0 -1  0 -3  0  1  0  1
	    > (-i3) %% c(-5:4)
	     [1]  2  1  0  1  0 -3  0  1  0  1
	    > 

---

The Current [0.63.3, but not earlier] and future versions of R
will be consistent and deliver

    R> d3 <- as.numeric(3) # 'd' for double
    R> i3 <- as.integer(3)

    R> ## These two differ, but I think they should not ...
    R> d3 %% c(-5:4) # -2 -1  0 -1  0  3  0  1  0  3
     [1]  -2  -1   0  -1   0 NaN   0   1   0   3
    R> i3 %% c(-5:4) #  3  3  0  1  0  3  0  1  0  3
     [1] -2 -1  0 -1  0 NA  0  1  0  3

    R> (-d3) %% c(-5:4)# -3 -3  0 -1  0 -3  0  1  0  1
     [1]  -3  -3   0  -1   0 NaN   0   1   0   1
    R> (-i3) %% c(-5:4)#  2  1  0  1  0 -3  0  1  0  1
     [1] -3 -3  0 -1  0 NA  0  1  0  1
    R> 

Note that R's result now is the same, not depending on the storage.mode of
a or b.

The help page on "%%" now has a section
 
    `%%' indicates `x mod y' and `%/%' indicates integer
     division. It is guaranteed that `x  ==  (x %% y)  +  y
     * ( x %/% y )' unless `y == 0' where the result is `NA'
     or `NaN' (depending on the `typeof' of the arguments).

----------------------

Remark:

 In S version 4 (and S-plus 5.0)

    "3" or "-3" are integers  whereas they used to be
    "numeric", i.e., "double" in Sv3 (i.e. S-plus x.y with x <= 4).

 Consequence:  S(plus)  ``seems to'' be non backward compatible even in
	       this low level aspect:

    Version 5.0 Release 3 for Sun SPARC, SunOS 5.5 : 1998   gives
	    > 11 %% -3
	    [1] 2
    whereas  Version 3.4 Release 1 for Sun SPARC, SunOS 5.3 : 1996   gives
	     > 11 %% -3
	     [1] -1

  (and I still don't understand why nobody on the S version 4 beta list
   had answered my concern then ...)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Arne.Kovac@uni-essen.de  Wed Mar 24 12:31:46 1999
From: Arne.Kovac@uni-essen.de (Arne Kovac)
Date: Wed, 24 Mar 1999 13:31:46 +0100 (NFT)
Subject: Problems with Postscript output
Message-ID: <Pine.A41.4.02.9903241313010.3000-100000@gauss.mathematik.uni-essen.de>

Hi,

I have a problem with the Postscript mechanism of R:

If I save figures in landscape format and try to insert them into a LaTeX
document, I always have to swap the dimensions of the bounding box in line
9 of the Postscript file. Is there any reason why we can't simply swap
left and bottom as well as right and top in line 435 of devPS.c?

Thanks

Arne

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 24 13:54:36 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Mar 1999 14:54:36 +0100
Subject: Problems with Postscript output
In-Reply-To: Arne Kovac's message of "Wed, 24 Mar 1999 13:31:46 +0100 (NFT)"
References: <Pine.A41.4.02.9903241313010.3000-100000@gauss.mathematik.uni-essen.de>
Message-ID: <x2u2vbj8mb.fsf@blueberry.kubism.ku.dk>

Arne Kovac <kovac@gauss.mathematik.uni-essen.de> writes:

> Hi,
> 
> I have a problem with the Postscript mechanism of R:
> 
> If I save figures in landscape format and try to insert them into a LaTeX
> document, I always have to swap the dimensions of the bounding box in line
> 9 of the Postscript file. Is there any reason why we can't simply swap
> left and bottom as well as right and top in line 435 of devPS.c?
> 
> Thanks
> 
> Arne

Which version are we talking about?

If it is not 0.63.3, try upgrading.

If it is ... well, then different programs must disagree on what the
correct definition of a BoundingBox is.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plindsey@alpha.luc.ac.be  Wed Mar 24 14:51:12 1999
From: plindsey@alpha.luc.ac.be (plindsey@alpha.luc.ac.be)
Date: Wed, 24 Mar 1999 15:51:12 +0100
Subject: nlm docs (PR#146)
Message-ID: <199903241451.PAA10096@blueberry.kubism.ku.dk>

In R.63.3, in the docs for nlm the section on code is messed up.
(apparently there is a problem in the commands in the Rd-file)
Patrick.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 24 14:54:47 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Mar 1999 15:54:47 +0100
Subject: nlm docs (PR#146)
In-Reply-To: plindsey@alpha.luc.ac.be's message of "Wed, 24 Mar 1999 15:51:12 +0100"
References: <199903241451.PAA10096@blueberry.kubism.ku.dk>
Message-ID: <x2soavj5u0.fsf@blueberry.kubism.ku.dk>

plindsey@alpha.luc.ac.be writes:

> In R.63.3, in the docs for nlm the section on code is messed up.
> (apparently there is a problem in the commands in the Rd-file)
> Patrick.

Thanks. This is the kind of documentation bug that so easily goes
unreported. Keep 'em coming.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Mar 24 16:04:43 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 24 Mar 1999 17:04:43 +0100 (CET)
Subject: R-0.63.3 package on IRIX 6.5 machine (PR#145)
In-Reply-To: <199903232158.WAA27947@blueberry.kubism.ku.dk>
References: <199903232158.WAA27947@blueberry.kubism.ku.dk>
Message-ID: <14073.3355.999038.549574@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 23 Mar 1999 22:58:04 +0100,
>>>>> jsarma  (j) wrote:

j> Hi,

j> When I type gmake, I got one error message:

j> gmake[2]: Entering directory `/Apps/usr/local/R-0.63.3/doc'
j> Installing doc ...
j> install:  ../doc/html/search/index.txt does not exist
j> gmake[2]: *** [install-html] Error 1

Hmm, this works perfecctly fine here on my machine. The index.txt file
is built during `make docs', so if it is missing the error should be
earlier than when doing `make install' ... are there any unusual
messages earlier in the make process?

Has anybody else experienced this problem?


Best,

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch=20
Institut f=FCr Statistik                     Tel: (+43 1) 58801 10715
Technische Universit=E4t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Thu Mar 25 10:49:26 1999
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Thu, 25 Mar 1999 11:49:26 +0100
Subject: readline() (PR#147)
Message-ID: <199903251049.LAA17284@blueberry.kubism.ku.dk>

Dear R developers,
I have found the following bug with readline() in R 0.63.3:
if you execute the menu-function and then the readline() function, then
readline() prompts "Selection:"

> a <- readline()
hello
> a
[1] "hallo"
> a <- menu(c("a", "b"), title="bitte:")
bitte: 
1:a 
2:b 
Selection: 2
> a <- readline()
Selection: hello
> a
[1] "hello"

By the way, wouldn't it be nice, if readline() had an argument `text', so
one wouldn't need to use the ugly construction

cat(text)
a <- readline()

Default of text could be "", so there would be no problem with
compatibility.

Peter

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.5
 arch = sparc
 os = solaris2.5
 system = sparc, solaris2.5
 status = 
 status.rev = 0
 major = 0
 minor = 63.3
 year = 1999
 month = March
 day = 6
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 12:08:58 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 1999 13:08:58 +0100
Subject: readline() (PR#147)
In-Reply-To: holzer@stat.math.ethz.ch's message of "Thu, 25 Mar 1999 11:49:26 +0100"
References: <199903251049.LAA17284@blueberry.kubism.ku.dk>
Message-ID: <x2n211zs85.fsf@blueberry.kubism.ku.dk>

holzer@stat.math.ethz.ch writes:

> > a <- menu(c("a", "b"), title="bitte:")
> bitte: 
> 1:a 
> 2:b 
> Selection: 2
> > a <- readline()
> Selection: hello
> > a
> [1] "hello"

Obviously a bug, which we'll get around to in due time. I'll just put
this in to remind the fixer that a similar bug got fixed very
recently.

> 
> By the way, wouldn't it be nice, if readline() had an argument `text', so
> one wouldn't need to use the ugly construction
> 
> cat(text)
> a <- readline()
> 
> Default of text could be "", so there would be no problem with
> compatibility.

Good idea.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Mar 25 12:16:50 1999
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Thu, 25 Mar 1999 13:16:50 +0100
Subject: readline() (PR#147)
Message-ID: <199903251216.NAA17312@blueberry.kubism.ku.dk>

This is PR#12 (menu buglet) which was reported
fixed on Feb 17 and now resides in In-Out-Fixed.
Martyn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 12:21:39 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 1999 13:21:39 +0100
Subject: [R] Change of parsing parameters to functions between 0.63.1  and 0.63.3 ?
In-Reply-To: Prof Brian D Ripley's message of "Wed, 24 Mar 1999 18:37:05 +0000 (GMT)"
References: <Pine.GSO.4.05.9903241827480.6272-100000@auk.stats>
Message-ID: <x2lnglzrn0.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Wed, 24 Mar 1999, Athula Herath wrote:
> 
> > I wonder whether the mechanism of parsing parameters to functions has
> > changed between 0.63.1 and 0.63.3? The following code yeilds different
> 
> No, but the handling of attributes has.
> 
> > results in R 0.63.1 (Version 0.63.1  (Dec 5, 1998)) and R 0.63.3. 
> > 
> > cave<-function(x,a,b)
> > {
> > 	return(c(mean(x[a],na.rm=T),mean(x[b],na.rm=T)))
> > }
> > datx <- data.frame(rbind(c(1,2,3,4),c(4,5,6,7)))
> > names(datx)<-c("A","B","C","D")
> > f1<-c("A","C")
> > f2<-c("B","D")
> > t1<-apply(datx,1,cave,f1,f2)
> 
> The help page for apply says

(moved to R-devel)

Hmm. I actually committed my patch for apply() before seeing Brians
reply. Given that 

(a) The above code works as intended in Splus 3.4

(b) This is more or less orthogonal to the issue of having attributes
    to the result of a subsetting operation (it has to do with
    attributes on the arguments to FUN, not the result).

(c) Some effort was already being used in the case of more-than-one
    dimensional slices to get the names passed down [using
    array(newX[,i], d.call, dn.call) with dn.call containing the
    names]
    
..should I consider that a bad move?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Thu Mar 25 12:38:20 1999
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Thu, 25 Mar 1999 13:38:20 +0100
Subject: Missing Warning in : (PR#148)
Message-ID: <199903251238.NAA17354@blueberry.kubism.ku.dk>


If a sequence is generated via "from:to" and "from" is a vector and not
a scalar, R gives a warning that only the first value is used. If "to"
is a vector, there is no warning.

Example:

> (1:4):10  # warning
Warning in (1:4):10 : Numerical expression has 4 elements: only the first used
 [1]  1  2  3  4  5  6  7  8  9 10
> 1:(10:12) # NO warning
 [1]  1  2  3  4  5  6  7  8  9 10

	Andreas


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Unstable
 status.rev = 0
 major = 0
 minor = 64.0
 year = 1999
 month = March
 day = 19
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 25 13:12:48 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 25 Mar 1999 14:12:48 +0100
Subject: [R] Change of parsing parameters to functions between 0.63.1  and 0.63.3 ?
In-Reply-To: <x2lnglzrn0.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 25 Mar 1999 13:21:39 +0100)
References: <Pine.GSO.4.05.9903241827480.6272-100000@auk.stats> <x2lnglzrn0.fsf@blueberry.kubism.ku.dk>
Message-ID: <199903251312.OAA06684@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
    >> On Wed, 24 Mar 1999, Athula Herath wrote:
    >> 
    >> > I wonder whether the mechanism of parsing parameters to functions
    >> has > changed between 0.63.1 and 0.63.3? The following code yeilds
    >> different
    >> 
    >> No, but the handling of attributes has.
    >> 
    >> > results in R 0.63.1 (Version 0.63.1 (Dec 5, 1998)) and R 0.63.3.
    >> > 
    >> > cave<-function(x,a,b) > { >
    >> return(c(mean(x[a],na.rm=T),mean(x[b],na.rm=T))) > } > datx <-
    >> data.frame(rbind(c(1,2,3,4),c(4,5,6,7))) >
    >> names(datx)<-c("A","B","C","D") > f1<-c("A","C") > f2<-c("B","D") >
    >> t1<-apply(datx,1,cave,f1,f2)
    >> 
    >> The help page for apply says

    PD> (moved to R-devel)

    PD> Hmm. I actually committed my patch for apply() before seeing Brians
    PD> reply. Given that

    PD> (a) The above code works as intended in Splus 3.4

    PD> (b) This is more or less orthogonal to the issue of having
    PD> attributes to the result of a subsetting operation (it has to do
    PD> with attributes on the arguments to FUN, not the result).

    PD> (c) Some effort was already being used in the case of more-than-one
    PD> dimensional slices to get the names passed down [using
    PD> array(newX[,i], d.call, dn.call) with dn.call containing the names]
    
    PD> ..should I consider that a bad move?
		           ^^^^^^
			   (your patch)
Yes, I actually think
your patch should be reverted ___ especially since it even breaks
     example(apply)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 13:49:58 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 1999 14:49:58 +0100
Subject: [R] Change of parsing parameters to functions between 0.63.1  and 0.63.3 ?
In-Reply-To: Martin Maechler's message of "Thu, 25 Mar 1999 14:12:48 +0100"
References: <Pine.GSO.4.05.9903241827480.6272-100000@auk.stats> <x2lnglzrn0.fsf@blueberry.kubism.ku.dk> <199903251312.OAA06684@sophie.ethz.ch>
Message-ID: <x2soat4r21.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     PD> dimensional slices to get the names passed down [using
>     PD> array(newX[,i], d.call, dn.call) with dn.call containing the names]
>     
>     PD> ..should I consider that a bad move?
>                     	     ^^^^^^
> 			   (your patch)
> Yes, I actually think
> your patch should be reverted ___ especially since it even breaks
>      example(apply)

Oh sh...! I thought that "length(d.call) < 2" bit looked fishy. Forgot
(or whatever) that the 0 case was in fact possible.

But that is easily fixable, just don't do in the extreme case.
This seems to work better:

    if ((i.vec <- length(d.call) < 2)) 
        for (i in 1:d2) {
            xi <- newX[, i]
            if (length(dn.call) == 1) 
                names(xi) <- dn.call[[1]]
            ans[[i]] <- FUN(xi, ...)
        }
    else for (i in 1:d2) ans[[i]] <- FUN(array(newX[, i], d.call, 
        dn.call), ...)

*NOW* should we keep it?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 25 13:48:56 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 25 Mar 1999 14:48:56 +0100
Subject: nlm docs (PR#146)
In-Reply-To: <x2soavj5u0.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 24 Mar 1999 15:54:47 +0100)
References: <199903241451.PAA10096@blueberry.kubism.ku.dk> <x2soavj5u0.fsf@blueberry.kubism.ku.dk>
Message-ID: <199903251348.OAA07255@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> plindsey@alpha.luc.ac.be writes:
    >> In R.63.3, in the docs for nlm the section on code is messed up.
    >> (apparently there is a problem in the commands in the Rd-file)
    >> Patrick.

    PD> Thanks. This is the kind of documentation bug that so easily goes
    PD> unreported. Keep 'em coming.

Yes, indeed!

---
The above bug is actually not a problem in
    src/library/base/man/nlm.Rd
but in the code in	  
    etc/Rdconvlib.pl

The construct
      \describe{
	\item{1:}{bla bla}
	\item{2:}{blech blech}
      }

is well translated to  both  LaTeX  and HTML, 
but not to NROFF (basis for ASCII). 
 
===>  Any help from  "Roff" knowledgables ????
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Mar 25 16:53:20 1999
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Thu, 25 Mar 1999 17:53:20 +0100
Subject: readline() (PR#147)
Message-ID: <199903251653.RAA23762@blueberry.kubism.ku.dk>

plummer@iarc.fr wrote somewhat hastily:
> 
> This is PR#12 (menu buglet) which was reported
> fixed on Feb 17 and now resides in In-Out-Fixed.
> Martyn

No it isn't. It is in fact _caused_ by the fix to
that problem, which I provided. Sorry!
M.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 17:09:04 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 1999 18:09:04 +0100
Subject: readline() (PR#147)
In-Reply-To: plummer@iarc.fr's message of "Thu, 25 Mar 1999 17:53:20 +0100"
References: <199903251653.RAA23762@blueberry.kubism.ku.dk>
Message-ID: <x2n2114hu7.fsf@blueberry.kubism.ku.dk>

plummer@iarc.fr writes:

> plummer@iarc.fr wrote somewhat hastily:
> > 
> > This is PR#12 (menu buglet) which was reported
> > fixed on Feb 17 and now resides in In-Out-Fixed.
> > Martyn
> 
> No it isn't. It is in fact _caused_ by the fix to
> that problem, which I provided. Sorry!
> M.

Great... Now do you have a fix for the fix? ;^)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 25 17:56:16 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 25 Mar 1999 18:56:16 +0100
Subject: [R] Change of parsing parameters to functions between 0.63.1  and 0.63.3 ?
In-Reply-To: <x2soat4r21.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 25 Mar 1999 14:49:58 +0100)
References: <Pine.GSO.4.05.9903241827480.6272-100000@auk.stats> <x2lnglzrn0.fsf@blueberry.kubism.ku.dk> <199903251312.OAA06684@sophie.ethz.ch> <x2soat4r21.fsf@blueberry.kubism.ku.dk>
Message-ID: <199903251756.SAA07768@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Martin Maechler <maechler@stat.math.ethz.ch> writes:
    PD> dimensional slices to get the names passed down [using
    PD> array(newX[,i], d.call, dn.call) with dn.call containing the names]
    >> 
    PD> ..should I consider that a bad move?
    >> ^^^^^^
    >> (your patch)
    >> Yes, I actually think
    >> your patch should be reverted ___ especially since it even breaks
    >> example(apply)

    PD> Oh sh...! I thought that "length(d.call) < 2" bit looked fishy. Forgot
    PD> (or whatever) that the 0 case was in fact possible.

    PD> But that is easily fixable, just don't do in the extreme case.
    PD> This seems to work better:

    PD> if ((i.vec <- length(d.call) < 2)) 
    PD> for (i in 1:d2) {
    PD> xi <- newX[, i]
    PD> if (length(dn.call) == 1) 
    PD> names(xi) <- dn.call[[1]]
    PD> ans[[i]] <- FUN(xi, ...)
    PD> }
    PD> else for (i in 1:d2) ans[[i]] <- FUN(array(newX[, i], d.call, dn.call), ...)

    PD> *NOW* should we keep it?

According to our general strategy  

   ``Be S compatible unless there's a good reason for NOT being..''

I think we should keep it.
I did some very limited CPU usage testing and the new code (compared to 0.63.3)
seems to increase CPU usage by less than 1%  (no std.err available on this :-)

---> committed -- including a new help-example exhibiting the new behavior

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Mar 25 20:06:45 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 25 Mar 1999 14:06:45 -0600
Subject: Using zip format for help pages, examples, etc.
Message-ID: <6rn211jpuy.fsf@verdi.stat.wisc.edu>

At the Vienna meeting we discussed the problems encountered on some
operating systems when storing many small files in a directory.  In
particular the directories $RHOME/library/base/help/,
$RHOME/library/base/R-ex/, and $RHOME/library/base/data/ can take up
an enormous amount of storage on the Macintosh or on Windows systems
because the minimum amount of storage per distinct file is quite
large.

Fritz Leisch and I suggested storing the contents of each of these
directories as a single .zip file.  This should result in considerable
savings in size with little penalty in access speed.

To implement this we would need code for accessing files within a .zip
archive and for decompressing the files.  I know of the files from
Info-Zip including the zlib sources (compression/decompression) and
the contrib/minizip directory in the zlib source tree.  The minizip
directory provides a prototype unzip.c and unzip.h.  These would be
used to modify the R internal function file.exists and file.show so
they could look in the archive as well as in a directory.

Does anyone know of a reason why this would not be a good idea?  Does
anyone know of better|more_portable|whatever implementations of code
to access files within a .zip archive.  The info-zip sources are
available at http://www.cdrom.com/pub/infozip/zlib/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 20:22:49 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 25 Mar 1999 21:22:49 +0100
Subject: plot.formula and pch= (PR#149)
Message-ID: <199903252022.VAA26066@blueberry.kubism.ku.dk>

I'm not sure exactly where to point my finger with this one, but there
is a nasty surprise to the unsuspecting user.

There is no check on the length of the vector passed in the pch=
argument to plot, it is just recycled as necessary:

plot(1:10,1:10,pch=1:2)

gives alternating circles and triangles. 

The nasty bits come up especially with plot.formula:

x<-1:10;y<-1:10 
plot(y~x,subset=x%%2==1,pch=x%%2)

- and the plotting symbols are *not* all the same. Even more
  pernicious, if missing values are involved:

> y[x%%2==1]<-NA
> plot(y~x,pch=x%%2)

gives you the wrong symbols (in practice, this messes up things like 
plot(height~age,pch=sex) rather badly!).

It would help to get a warning that the lengths don't match, but are
there any good uses of the recycling of pch?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar 25 21:03:26 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 25 Mar 1999 21:03:26 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
In-Reply-To: <6rn211jpuy.fsf@verdi.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.9903252051410.13689-100000@auk.stats>

On 25 Mar 1999, Douglas Bates wrote:

> At the Vienna meeting we discussed the problems encountered on some
> operating systems when storing many small files in a directory.  In
> particular the directories $RHOME/library/base/help/,
> $RHOME/library/base/R-ex/, and $RHOME/library/base/data/ can take up
> an enormous amount of storage on the Macintosh or on Windows systems
> because the minimum amount of storage per distinct file is quite
> large.

Not just base: lme is at least as bad and MASS and boot are large too.

> Fritz Leisch and I suggested storing the contents of each of these
> directories as a single .zip file.  This should result in considerable
> savings in size with little penalty in access speed.
> 
> To implement this we would need code for accessing files within a .zip
> archive and for decompressing the files.  I know of the files from
> Info-Zip including the zlib sources (compression/decompression) and
> the contrib/minizip directory in the zlib source tree.  The minizip
> directory provides a prototype unzip.c and unzip.h.  These would be
> used to modify the R internal function file.exists and file.show so
> they could look in the archive as well as in a directory.
> 
> Does anyone know of a reason why this would not be a good idea?  Does
> anyone know of better|more_portable|whatever implementations of code
> to access files within a .zip archive.  The info-zip sources are
> available at http://www.cdrom.com/pub/infozip/zlib/

Those are the ones I was looking at: they do seem portable, if slow.

However, I am not sure that file.exists and file.show should be 
overloaded, and for data() you need rather more than those. What is needed
I think is a function to extract a file from an archive to a temporary
file, to be based to file.show or to source or load.  There is a snag
in ensuring that temporary files get deleted, but file.show has a flag for
this, and example and data could have an on.exit call to file.remove.

One important point is that AnIndex and 00Titles are in help, and they
probably should be kept uncompressed (not least as the PERL scripts read
them).

It would be easy to mock this up using scripts. Who is doing this?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jean@stat.ubc.ca  Fri Mar 26 01:12:05 1999
From: jean@stat.ubc.ca (Jean Meloche)
Date: Thu, 25 Mar 1999 17:12:05 -0800
Subject: anova.lm bug
Message-ID: <36FADEE5.470A51E1@stat.ubc.ca>

anova.lm does not work on a lm fit with singularities (using singular.ok=TRUE)
because of mismatch between the anova table length and fit$terms lebgth.
The following works for me:

anova.lm <- function(object, ...)
{
    if(length(list(object, ...)) > 1)
        return(anovalist.lm(object, ...))
    w <- weights(object)
    ssr <- sum(if(is.null(w)) resid(object)^2 else w*resid(object)^2)
    p1 <- 1:object$rank
    comp <- object$effects[p1]
    tlabels <- names(object$effects[p1])                        <- get the matching labels
    asgn <- object$assign[object$qr$pivot][p1]
    dfr <- df.residual(object)
    ss <- c(as.numeric(lapply(split(comp^2,asgn),sum)),ssr)
    df <- c(as.numeric(lapply(split(asgn,  asgn),length)), dfr)
    if(attr(object$terms,"intercept")) {
        ss <- ss[-1]
        df <- df[-1]
        tlabels <- tlabels[-1]                                  <- remove intercept
    }
    ms <- ss/df
    f <- ms/(ssr/dfr)
    p <- 1 - pf(f,df,dfr)
    table <- data.frame(df,ss,ms,f,p)
    table[length(p),4:5] <- NA
    dimnames(table) <- list(c(tlabels, "Residuals"),            <- use the right labels
                            c("Df","Sum Sq", "Mean Sq", "F value", "Pr(>F)"))

    structure(table, heading = c("Analysis of Variance Table\n",
                     paste("Response:", formula(object)[[2]])),
              class= c("anova", "data.frame"))# was "tabular"
}

-- 
Jean Meloche
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adelchi.azzalini@jrc.it  Fri Mar 26 08:30:13 1999
From: adelchi.azzalini@jrc.it (adelchi.azzalini@jrc.it)
Date: Fri, 26 Mar 1999 09:30:13 +0100
Subject: R: error report (PR#150)
Message-ID: <199903260830.JAA26417@blueberry.kubism.ku.dk>

This is a multi-part message in MIME format.
--------------25A3389DABC0A1B4530C7640
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi.

I have been told (by R) to report an error.
Running the attached file simul-pic.R produces the
somthing like the following 

>   source("simul-pic.R")
[1] 50.000  2.539
    poisson binomial f.srs f.pps
0   7.89403  7.38439  5.64  6.32
1  20.04344 19.75250 17.28 20.64
2  25.44578 25.88961 25.00 26.96
3  21.53616 22.16067 24.56 22.48
4  13.67042 13.93022 14.80 13.92
5   6.94201  6.85619  7.48  6.12
6   2.93770  2.75094  3.72  2.68
7   1.06557  0.92507  1.24  0.64
8   0.33819  0.26600  0.20  0.16
9   0.09541  0.06641  0.08  0.08
10  0.02423  0.01457  0.00  0.00
Error: Bad units specified in GConvert, please report!
> 

The program should generate a pictex file, but it fails
to complete it.  Replicated executions produce slightly 
different outcomes, but still an error.

If I comment out the lines following the PicTeX line,
then the program runs with no error.

The environment is WinNT 4.0 with R Version 0.63.2 Beta 
(Jan 12, 1999).

I have first contacted Guido Masarotto about this problem,
but the same thing occurs on the Unix version of R, and
he suggested to write to your address.

Reagards, 
Adelchi Azzalini
--------------25A3389DABC0A1B4530C7640
Content-Type: application/x-tex;
 name="simul-00.tex"
Content-Disposition: inline;
 filename="simul-00.tex"
Content-Transfer-Encoding: 7bit

\hbox{\beginpicture
\setcoordinatesystem units <1pt,1pt>
\setplotarea x from 0 to 0.00, y from 0 to 0.00
\setlinear
\font\picfont cmss10\picfont
\font\picfont cmss10 at 10pt\picfont
\font\picfont cmss10 at 10pt\picfont
\setsolid
\plot 45.02 50.98 45.02 110.81 /
\setsolid
\plot 72.15 50.98 72.15 202.87 /
\setsolid
\plot 99.28 50.98 99.28 243.81 /
\setsolid
\plot 126.41 50.98 126.41 214.19 /
\setsolid
\plot 153.54 50.98 153.54 154.58 /
\setsolid
\plot 180.67 50.98 180.67 103.59 /
\setsolid
\plot 207.81 50.98 207.81 73.25 /
\setsolid
\plot 234.94 50.98 234.94 59.06 /
\setsolid
\plot 262.07 50.98 262.07 53.55 /
\setsolid
\plot 289.20 50.98 289.20 51.71 /
\setsolid
\plot 316.33 50.98 316.33 51.17 /
\setsolid
\plot 45.02 42.50 316.33 42.50 /
\setsolid
\plot 45.02 42.50 45.02 38.33 /
\setsolid
\plot 99.28 42.50 99.28 38.33 /
\setsolid
\plot 153.54 42.50 153.54 38.33 /
\setsolid
\plot 207.81 42.50 207.81 38.33 /
\setsolid
\plot 262.07 42.50 262.07 38.33 /
\setsolid
\plot 316.33 42.50 316.33 38.33 /
\put {0}  [lB] <-2.50pt,0.00pt> at 45.02 25.83
\put {2}  [lB] <-2.50pt,0.00pt> at 99.28 25.83
\put {4}  [lB] <-2.50pt,0.00pt> at 153.54 25.83
\put {6}  [lB] <-2.50pt,0.00pt> at 207.81 25.83
\put {8}  [lB] <-2.50pt,0.00pt> at 262.07 25.83
\put {10}  [lB] <-5.00pt,0.00pt> at 316.33 25.83
\setsolid
\plot 34.17 50.98 34.17 240.43 /
\setsolid
\plot 34.17 50.98 30.00 50.98 /
\setsolid
\plot 34.17 88.87 30.00 88.87 /
\setsolid
\plot 34.17 126.76 30.00 126.76 /
\setsolid
\plot 34.17 164.65 30.00 164.65 /
\setsolid
\plot 34.17 202.54 30.00 202.54 /
\setsolid
\plot 34.17 240.43 30.00 240.43 /
\put {0.00}  [rB] <0.00pt,-4.17pt> at 25.83 50.98
\put {0.05}  [rB] <0.00pt,-4.17pt> at 25.83 88.87
\put {0.10}  [rB] <0.00pt,-4.17pt> at 25.83 126.76
\put {0.15}  [rB] <0.00pt,-4.17pt> at 25.83 164.65
\put {0.20}  [rB] <0.00pt,-4.17pt> at 25.83 202.54
\put {0.25}  [rB] <0.00pt,-4.17pt> at 25.83 240.43
\setsolid
\plot 34.17 42.50 327.18 42.50 /
\plot 327.18 42.50 327.18 271.58 /
\plot 327.18 271.58 34.17 271.58 /
\plot 34.17 271.58 34.17 42.50 /
\put {m}  [lB] <-3.97pt,0.00pt> at 180.67 9.17
\put {Prob(M=m)}  [rB] <0.00pt,-4.17pt> at 9.17 157.04
\circulararc 360 degrees from 45.02 112.87 center at 45.02 110.81
\circulararc 360 degrees from 72.15 204.94 center at 72.15 202.87
\circulararc 360 degrees from 99.28 245.88 center at 99.28 243.81
\circulararc 360 degrees from 126.41 216.25 center at 126.41 214.19
\circulararc 360 degrees from 153.54 156.64 center at 153.54 154.58
\circulararc 360 degrees from 180.67 105.65 center at 180.67 103.59
\circulararc 360 degrees from 207.81 75.31 center at 207.81 73.25
\circulararc 360 degrees from 234.94 61.12 center at 234.94 59.06
\circulararc 360 degrees from 262.07 55.61 center at 262.07 53.55
\circulararc 360 degrees from 289.20 53.77 center at 289.20 51.71
\circulararc 360 degrees from 316.33 53.23 center at 316.33 51.17
\font\picfont cmssbx10 at 9pt\picfont
\put {Simulated no. of events and Poisson approximation}  [lB] <-103.02pt,-3.75pt> at 180.67 288.66
\put {  }  [lB] <-2.30pt,-3.75pt> at 180.67 280.33
\pu

--------------25A3389DABC0A1B4530C7640
Content-Type: application/x-unknown-content-type-R_auto_file;
 name="simul-pic.R"
Content-Disposition: inline;
 filename="simul-pic.R"
Content-Transfer-Encoding: base64

IyBzaW11bGF6aW9uZSBkZWxsYSBkaXN0cmlidXppb25lIGVzYXR0YSBkaSBNLCANCiMgZSBj
b25mb250byBjb24gdmMgUG9pc3NvbiANCiMgMjQvMy85OQ0KIw0KIy0tLS0tIGNvc3RydXpp
b25lIGRlbGxhIHBvcG9sYXppb25lDQpOPC0xMDAwDQp4PC1yZ2FtbWEoTiwxLDUpDQpUeDwt
c3VtKHgpDQpwcm9iLmV2ZW50IDwtZnVuY3Rpb24oeCwgcGhpMCwgYmV0YSkgcGhpMC8oMStl
eHAoLWJldGEqeCkpIA0KcGhpMCA8LSAwLjENCmJldGEgPC0gMA0KSXogPC0gcmJpbm9tKE4s
MSxwcm9iLmV2ZW50KHgscGhpMCxiZXRhKSkgIyB2LmluZGljYXRyaWNpIGRpIChaPjApDQpU
eGQ8LXN1bSh4Kkl6KQ0KIw0KIy0tLS0tIGFwcHJveCBkaSBQb2lzc29uDQpzYW1wbGluZy5m
cmFjdGlvbiA8LSAwLjA1DQpuIDwtIHJvdW5kKE4qc2FtcGxpbmcuZnJhY3Rpb24pDQpwMSA8
LSBUeGQvVHgNCm1heC5tIDwtIHJvdW5kKG1heCg1LDQqcDEqbikpDQpwb2lzc29uIDwtIGRw
b2lzKDA6bWF4Lm0sbipwMSkNCnByaW50KGMobixwMSpuKSkNCmJpbm9taWFsPC1kYmlub20o
MDptYXgubSxuLHAxKQ0KcGxvdCgwOm1heC5tLHBvaXNzb24sdHlwZT0iaCIsY29sPTIseGxh
Yj0ibSIseWxhYj0iUHJvYihNPW0pIiwNCiAgICAgeWxpbT1jKDAsbWF4KHBvaXNzb24pKjEu
MSkpDQpwb2ludHMoMDptYXgubSxwb2lzc29uLHBjaD0xLGNvbD0yKQ0KIw0KIy0tLS0tIHNp
bXVsYXppb25lIGRpc3RyaWIuZXNhdHRhDQpuLnJlcGw8LSA1MDAwMA0Kc3JzIDwtIHJlcCgx
L04sTikNCnBwcyA8LSB4L3N1bSh4KQ0KbS5zcnMgPC0gbS5wcHMgPC1yZXAoTkEsbi5yZXBs
KQ0KZm9yKGkgaW4gMTpuLnJlcGwpew0KICBzLnNyczwtc2FtcGxlKDE6TixuLHByb2I9c3Jz
KQ0KICBzLnBwczwtc2FtcGxlKDE6TixuLHByb2I9cHBzKQ0KICBtLnNyc1tpXSA8LSBzdW0o
SXpbcy5zcnNdKQ0KICBtLnBwc1tpXSA8LSBzdW0oSXpbcy5wcHNdKQ0KfQ0KZi5zcnM8LXRh
YmxlKG0uc3JzKS9uLnJlcGwNCmYuc3JzPC1jKGYuc3JzLHJlcCgwLDEwMCkpWzE6KG1heC5t
KzEpXQ0KZi5wcHM8LXRhYmxlKG0ucHBzKS9uLnJlcGwNCmYucHBzPC1jKGYucHBzLHJlcCgw
LDEwMCkpWzE6KG1heC5tKzEpXQ0KDQpwb2ludHMoMDptYXgubSwgZi5zcnMsIHBjaD0yLGNv
bD0zKQ0KcG9pbnRzKDA6bWF4Lm0sIGYucHBzLCBwY2g9NCxjb2w9NCkNCnBhcihjZXg9MC43
NSkNCnRpdGxlKG1haW49cGFzdGUoIlNpbXVsYXRlZCBuby4gb2YgZXZlbnRzIGFuZCBQb2lz
c29uIGFwcHJveGltYXRpb25cbiIsDQogICAgICAiIFxuIiwiTj0iLE4sIiwgc2FtcGxpbmcg
ZnJhY3Rpb249IixuL04sIiwgcmVwbGljYXRlcz0iLG4ucmVwbCkpDQpsZWdlbmQoeD1tYXgu
bSowLjcseT1tYXgocG9pc3NvbiksDQogICAgICAgbGVnZW5kPWMoIlBvaXNzb24gYXBwcm94
Iiwic2ltdWxhdGVkIFNSUyIsInNpbXVsYXRlZCBQUFMiKSwNCiAgICAgICBwY2g9YygxLDIs
NCkpDQpwYXIoY2V4PTEpDQpvdXQ8LSBkYXRhLmZyYW1lKHBvaXNzb24sYmlub21pYWwsZi5z
cnMsZi5wcHMscm93Lm5hbWVzPSgwOm1heC5tKSkNCnByaW50KG91dCoxMDApDQoNCiMtLS0t
LSAgUGljVGVYDQpwaWN0ZXgoZmlsZT0ic2ltdWwtMDAudGV4IikNCnBsb3QoMDptYXgubSxw
b2lzc29uLHR5cGU9ImgiLGNvbD0yLHhsYWI9Im0iLHlsYWI9IlByb2IoTT1tKSIsDQogICAg
IHlsaW09YygwLG1heChwb2lzc29uKSoxLjEpKQ0KcG9pbnRzKDA6bWF4Lm0scG9pc3Nvbixw
Y2g9MSxjb2w9MikNCnBhcihjZXg9MC43NSkNCnRpdGxlKG1haW49cGFzdGUoIlNpbXVsYXRl
ZCBuby4gb2YgZXZlbnRzIGFuZCBQb2lzc29uIGFwcHJveGltYXRpb25cbiIsDQogICAgICAg
IiBcbiIsIk49IixOLCIsIHNhbXBsaW5nIGZyYWN0aW9uPSIsbi9OLCIsIHJlcGxpY2F0ZXM9
IixuLnJlcGwpKQ0KbGVnZW5kKHg9bWF4Lm0qMC43LHk9bWF4KHBvaXNzb24pLA0KICAgICAg
IGxlZ2VuZD1jKCJQb2lzc29uIGFwcHJveCIsInNpbXVsYXRlZCBTUlMiLCJzaW11bGF0ZWQg
UFBTIiksDQogICAgICAgcGNoPWMoMSwyLDQpKQ0KcGFyKGNleD0xKQ0KcG9pbnRzKDA6bWF4
Lm0sIGYuc3JzLCBwY2g9Mixjb2w9MykNCnBvaW50cygwOm1heC5tLCBmLnBwcywgcGNoPTQs
Y29sPTQpDQpYMTEoKQ0KDQo=
--------------25A3389DABC0A1B4530C7640--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Fri Mar 26 08:59:03 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Fri, 26 Mar 1999 08:59:03 +0000 (GMT)
Subject: plot.formula and pch= (PR#149)
In-Reply-To: <199903252022.VAA26066@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.3.96.990326085613.1783F-100000@laplace>

On Thu, 25 Mar 1999 p.dalgaard@biostat.ku.dk wrote:

> There is no check on the length of the vector passed in the pch=
> argument to plot, it is just recycled as necessary:

<...>

> It would help to get a warning that the lengths don't match, but are
> there any good uses of the recycling of pch?

There might be a case for it in time series graphs, where there are
periodic characteristics of the data (days of the week, for example).

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Mar 26 11:11:00 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Mar 1999 12:11:00 +0100
Subject: Using zip format for help pages, examples, etc.
References: <6rn211jpuy.fsf@verdi.stat.wisc.edu>
Message-ID: <36FB6B44.127364FF@iarc.fr>

This sounds similar to the Virtual File System (VFS) used by
the GNU Midnight Commander (a file manager programme).  VFS
allows you to browse files that are not on your native file
system. Among other things, you can look inside tar and
compressed tar files as if they were unpacked.

ZIP file support isn't very good - it's just a shell script
interface to the zip programme - but I suppose this could be
done internally like the "utar" filesystem.

The VFS code comes with the Midnight Commander, but it is
supposed to compile as a standalone library. If this works,
and is portable (!), it might be cleaner to use libvfs than to
do this inside R. Or maybe not. Anyway here is the URL:

http://www.gnome.org/mc/

Martyn

P.S I once trashed my FAT file system by filling it with many
small files from gnu-win32 ports, so this may be a safety
issue as well as a speed one.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From N.J.Lee@statslab.cam.ac.uk  Fri Mar 26 11:44:44 1999
From: N.J.Lee@statslab.cam.ac.uk (Nicholas Lee)
Date: Fri, 26 Mar 1999 11:44:44 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
In-Reply-To: <36FB6B44.127364FF@iarc.fr>
Message-ID: <Pine.HPP.3.96.990326113941.8918A-100000@tiger.statslab.cam.ac.uk>


On Fri, 26 Mar 1999, Martyn Plummer wrote:

> This sounds similar to the Virtual File System (VFS) used by
> the GNU Midnight Commander (a file manager programme).  VFS
> allows you to browse files that are not on your native file
> system. Among other things, you can look inside tar and
> compressed tar files as if they were unpacked.


Why not just the approach that some linux distributions use, (debian at
least) of gziping the man pages individually.

Makes it easier and quicker to patch pages and doesn't require temporary
swap space for uncompressing a whole archive. 



Nicholas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Mar 26 12:12:45 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 26 Mar 1999 12:12:45 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
Message-ID: <199903261212.MAA00972@toucan.stats.ox.ac.uk>


> Date: Fri, 26 Mar 1999 11:44:44 +0000 (GMT)
> From: Nicholas Lee <N.J.Lee@statslab.cam.ac.uk>
> 
> Why not just the approach that some linux distributions use, (debian at
> least) of gziping the man pages individually.
> 
> Makes it easier and quicker to patch pages and doesn't require temporary
> swap space for uncompressing a whole archive. 

(1) The whole point is to avoid having many tiny files. On Windows
the current help files take up ca 37Mb on my VFAT file system, and about
1Mb in a zip archive. As Doug Bates said at the beginning of this thread:

> At the Vienna meeting we discussed the problems encountered on some
> operating systems when storing many small files in a directory.  In
> particular the directories $RHOME/library/base/help/,
> $RHOME/library/base/R-ex/, and $RHOME/library/base/data/ can take up
> an enormous amount of storage on the Macintosh or on Windows systems
> because the minimum amount of storage per distinct file is quite
> large.

(2) You can avoid uncompressing a whole archive with zip (not gzip).

(3) You should not be thinking about patching pages in an R
distribution:  whole R distributions are changed often enough.  It is
the installed pages (help, R-ex, latex) not the source pages (Rd) that
we are considering putting into a zip archive.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Mar 26 12:32:16 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Mar 1999 13:32:16 +0100
Subject: Using zip format for help pages, examples, etc.
References: <Pine.HPP.3.96.990326113941.8918A-100000@tiger.statslab.cam.ac.uk>
Message-ID: <36FB7E50.62F211B9@iarc.fr>

Nicholas Lee wrote:

> Why not just the approach that some linux distributions use,
> (debian at least) of gziping the man pages individually.

The problem isn't that the help files take up a lot of space,
but that certain file systems are extremely inefficient in
the use of that space.  FAT16 assigns disk space in allocation
units that are, roughly, proportional to the size of the
partition. I think a 1Gb partition has 16kb allocation units,
whereas most help files are only 1-2kb. If a file is already
smaller than an allocation unit, it won't take up any less space
when compressed. By putting lots of small files on one
archive, however, you get round the inefficiency of the filesystem.
M.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Mar 26 14:30:19 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 26 Mar 1999 14:30:19 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
In-Reply-To: <36FB7E50.62F211B9@iarc.fr>
Message-ID: <Pine.GSO.3.96.990326142228.1783H-100000@laplace>

On Fri, 26 Mar 1999, Martyn Plummer wrote:

> The problem isn't that the help files take up a lot of space,
> but that certain file systems are extremely inefficient in
> the use of that space.

This is probably an unrealistic suggestion, but if compression is less of
a problem than the number of files, why not take the help files `onboard'
by creating a new class of objects with mode "help", which would be lists
with components much like the current .Rd files, and attach them at the
bottom of the search list.  Each library would then require just a single
file of help objects.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Mar 26 14:52:24 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Mar 1999 15:52:24 +0100
Subject: Using zip format for help pages, examples, etc.
References: <Pine.GSO.3.96.990326142228.1783H-100000@laplace>
Message-ID: <36FB9F28.D1F2CBEF@iarc.fr>

Jonathan Rougier wrote:

> This is probably an unrealistic suggestion, but if compression is less of
> a problem than the number of files, why not take the help files `onboard'
> by creating a new class of objects with mode "help", which would be lists
> with components much like the current .Rd files, and attach them at the
> bottom of the search list.  Each library would then require just a single
> file of help objects.

Because R objects are stored in memory, and using 1Mb+ of RAM to
store help files is a bit of a waste.

This is an *operating system* issue, and it's only a problem for
OSs with crap file systems. It shouldn't require major changes to R.

M.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Mar 26 15:11:16 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 26 Mar 1999 15:11:16 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
Message-ID: <199903261511.PAA08981@toucan.stats.ox.ac.uk>

> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
> 
> On Fri, 26 Mar 1999, Martyn Plummer wrote:
> 
> > The problem isn't that the help files take up a lot of space,
> > but that certain file systems are extremely inefficient in
> > the use of that space.
> 
> This is probably an unrealistic suggestion, but if compression is less of
> a problem than the number of files, why not take the help files `onboard'
> by creating a new class of objects with mode "help", which would be lists
> with components much like the current .Rd files, and attach them at the
> bottom of the search list.  Each library would then require just a single
> file of help objects.

But then loading a `package' would take longer and use much more memory,
and memory in R is precious.

We have talked about concatenating the help/R-ex files into a single
file per package, and indexing it, but the zip file route avoids some
of the work and helps with compression too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Mar 26 15:24:06 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 26 Mar 1999 09:24:06 -0600
Subject: Using zip format for help pages, examples, etc.
In-Reply-To: Jonathan Rougier's message of "Fri, 26 Mar 1999 14:30:19 +0000 (GMT)"
References: <Pine.GSO.3.96.990326142228.1783H-100000@laplace>
Message-ID: <6ryakk2s15.fsf@verdi.stat.wisc.edu>

>>>>> "Jonathan" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

  Jonathan> On Fri, 26 Mar 1999, Martyn Plummer wrote:
  >> The problem isn't that the help files take up a lot of space, but
  >> that certain file systems are extremely inefficient in the use of
  >> that space.

  Jonathan> This is probably an unrealistic suggestion, but if
  Jonathan> compression is less of a problem than the number of files,
  Jonathan> why not take the help files `onboard' by creating a new
  Jonathan> class of objects with mode "help", which would be lists
  Jonathan> with components much like the current .Rd files, and
  Jonathan> attach them at the bottom of the search list.  Each
  Jonathan> library would then require just a single file of help
  Jonathan> objects.

This is a reasonable suggestion but I think that the way that R
handles its search lists would make this problematic.  At present
objects in a library take up space in memory whether they are used or
not.  Also, the search to resolve a name is a linear search over the
available names.  Adding a whole lot more names for help objects would
exacerbate both of those problems.  Then there is the name-space
pollution problem.

Approaches to all of these issues with names and objects are being
discussed and will probably be implemented in later releases.  Right
now I think the best approach to the problem of help files,
etc. (other than waiting for certain commercial operating systems to
catch up with concepts from the 1980's) is to use the zip format for
the reasons that Brian Ripley indicated.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar 26 15:55:40 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 26 Mar 1999 10:55:40 -0500
Subject: linear search
Message-ID: <99Mar26.110423est.13493@mailgate.bank-banque-canada.ca>

Doug Bates writes:
>... Also, the search to resolve a name is a linear search over the
>available names.  ...

Does anyone have an idea of how series a problem this is with large packages. R
still runs slower than Splus 3.3 for me, and I wonder how big a part of the
problem this is?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 26 16:29:29 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 26 Mar 1999 08:29:29 -0800 (PST)
Subject: linear search
In-Reply-To: <99Mar26.110423est.13493@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.10.9903260824130.2767-100000@wompom.biostat.washington.edu>

On Fri, 26 Mar 1999, Paul Gilbert wrote:

> Doug Bates writes:
> >... Also, the search to resolve a name is a linear search over the
> >available names.  ...
> 
> Does anyone have an idea of how series a problem this is with large packages. R
> still runs slower than Splus 3.3 for me, and I wonder how big a part of the
> problem this is?

A very limited profiling experiment about a year ago (so out of date as
well as limited) suggested that perhaps 15-30% of R's time is spent in the
linear search functions when running the survival4 test suite.

We do intend to implement hashing for name lookup fairly soon. It should
make a noticeable difference, especially with huge libraries like lme
(over 500 functions) loaded.

The relative speed of R and S-PLUS is very problem-dependent, so it's hard
to make any reliable predictions.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Mar 26 17:53:16 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 27 Mar 1999 05:53:16 +1200 (NZST)
Subject: linear search
Message-ID: <199903261753.FAA24087@stat1.stat.auckland.ac.nz>

> Paul Gilbert writes:
>
> Does anyone have an idea of how series a problem this is with large
> packages. R still runs slower than Splus 3.3 for me, and I wonder how
> big a part of the problem this is?

I suspect that it is a very large part of your problem.  A substantial
fraction (30% - 50% ?) of R's time is spent doing name lookup.  I hope
hashing will speed up name lookup by one or two orders of magnitude.
I am part-way through making the changes now.
	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Mon Mar 29 08:32:11 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Mon, 29 Mar 1999 09:32:11 +0200
Subject: problems with formals and get (PR#151)
Message-ID: <199903290732.JAA28031@blueberry.kubism.ku.dk>

With 0.63.3, try

test <- function(){
	fn <- function(a) print("hello")
	print(is.function(fn))
	print(names(formals("fn")))}
test()

if fn is not quoted in the last line of test, it works properly.

test <- function(){
	fn <- function() print("hello")
	formals(fn) <- alist(a=,b=)
	return(fn)}
formals(test())

now try with line 3 of test changed to
	formals(fn) <- alist(a=)

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 29 13:13:22 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Mon, 29 Mar 1999 14:13:22 +0200
Subject: problems with formals and get (PR#151)
Message-ID: <199903291213.OAA28222@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> With 0.63.3, try
> 
> test <- function(){
> 	fn <- function(a) print("hello")
> 	print(is.function(fn))
> 	print(names(formals("fn")))}
> test()
> 
> if fn is not quoted in the last line of test, it works properly.

This version of formals seems to work better:

function (fun = sys.function(sys.parent())) 
{
    if (is.character(fun)) 
        fun <- get(fun, mode = "function", envir = sys.frame(sys.parent()))
    .Internal(formals(fun))
}

> test <- function(){
> 	fn <- function() print("hello")
> 	formals(fn) <- alist(a=,b=)
> 	return(fn)}
> formals(test())
> 
> now try with line 3 of test changed to
> 	formals(fn) <- alist(a=)

This is a bug, originating in sys.call:

> xx<-function(...)sys.call()
> xx(a=)
xx()
> xx(a=,b=)
xx(a = , b = )



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 29 13:13:16 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 1999 14:13:16 +0200
Subject: problems with formals and get (PR#151)
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Mon, 29 Mar 1999 09:32:11 +0200"
References: <199903290732.JAA28031@blueberry.kubism.ku.dk>
Message-ID: <x2soaomr37.fsf@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> With 0.63.3, try
> 
> test <- function(){
> 	fn <- function(a) print("hello")
> 	print(is.function(fn))
> 	print(names(formals("fn")))}
> test()
> 
> if fn is not quoted in the last line of test, it works properly.

This version of formals seems to work better:

function (fun = sys.function(sys.parent())) 
{
    if (is.character(fun)) 
        fun <- get(fun, mode = "function", envir = sys.frame(sys.parent()))
    .Internal(formals(fun))
}

> test <- function(){
> 	fn <- function() print("hello")
> 	formals(fn) <- alist(a=,b=)
> 	return(fn)}
> formals(test())
> 
> now try with line 3 of test changed to
> 	formals(fn) <- alist(a=)

This is a bug, originating in sys.call:

> xx<-function(...)sys.call()
> xx(a=)
xx()
> xx(a=,b=)
xx(a = , b = )



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Mar 29 18:25:25 1999
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Mon, 29 Mar 1999 19:25:25 +0200
Subject: readline() (PR#147)
Message-ID: <199903291725.TAA29587@blueberry.kubism.ku.dk>

This message is in MIME format
--_=XFMail.1.3.p0.Linux:990329192352:425=_
Content-Type: text/plain; charset=us-ascii

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
>Great... Now do you have a fix for the fix? ;^)

Here are two patches.
1. Patch to scan.c which fixes this bug, and similar ones,
   by ensuring that functions which set the console prompt
   reset it after use.
2. Implements Peter Holzer's suggestion, adding a
   "prompt" argument to readline.  Since readline is an
   "internal" function I did this in the C code. The
   alternative of adding some interpreted code would be
   simpler.  Caveat emptor with this one, obviously.

--_=XFMail.1.3.p0.Linux:990329192352:425=_
Content-Disposition: attachment; filename="scan.diff"
Content-Transfer-Encoding: 7bit
Content-Description: scan.diff
Content-Type: text/plain; charset=us-ascii; name=scan.diff; SizeOnDisk=609

--- scan.c	Sun Mar 28 10:03:05 1999
+++ scan.c.fixed	Sun Mar 28 10:32:44 1999
@@ -276,6 +276,7 @@
 	}
     }
     if (!quiet) REprintf("Read %d items\n", n);
+    if (ttyflag) ConsolePrompt[0] = '\0';
 
     if (n == 0) {
 	UNPROTECT(1);
@@ -407,6 +408,7 @@
 	n++;
     }
     if (!quiet) REprintf("Read %d lines\n", n);
+    if (ttyflag) ConsolePrompt[0] = '\0';
 
     for (i = 0; i < nc; i++) {
 	old = VECTOR(ans)[i];
@@ -775,6 +777,8 @@
 	*bufp++ = c;
     }
     *bufp++ = '\0';
+    ConsolePrompt[0] = '\0';
+
     bufp = buffer;
     while (isspace(*bufp)) bufp++;
     first = LENGTH(CAR(args)) + 1;

--_=XFMail.1.3.p0.Linux:990329192352:425=_
Content-Disposition: attachment; filename="readline.diff"
Content-Transfer-Encoding: 7bit
Content-Description: readline.diff
Content-Type: text/plain; charset=us-ascii; name=readline.diff; SizeOnDisk=3136

diff -uNr R-0.63.3/src/library/base/R/New-Internal.R R-0.63.3-patched/src/librar
y/base/R/New-Internal.R
--- R-0.63.3/src/library/base/R/New-Internal.R	Wed Dec  9 07:52:28 1998
+++ R-0.63.3-patched/src/library/base/R/New-Internal.R	Sun Mar 28 13:47:39 1999
@@ -89,7 +89,7 @@
 	stop("rank(.., na.last != TRUE) does not yet work in R.")
     .Internal(rank(x))
 }
-readline <- function().Internal(readline())
+readline <- function(prompt="").Internal(readline(prompt))
 search <- function().Internal(search())
 
 sink <- function(file=NULL, append = FALSE)
diff -uNr R-0.63.3/src/library/base/man/readline.Rd R-0.63.3-patched/src/library
/base/man/readline.Rd
--- R-0.63.3/src/library/base/man/readline.Rd	Wed Nov 19 18:38:56 1997
+++ R-0.63.3-patched/src/library/base/man/readline.Rd	Sun Mar 28 13:41:52 1999
@@ -1,9 +1,12 @@
 \name{readline}
 \title{Read a Line from the Terminal}
 \usage{
-readline()
+readline(prompt="")
 }
 \alias{readline}
+\arguments{
+\item{prompt}{the string printed when prompting the user for input.}
+}
 \description{
   \code{readline} reads a line from the terminal, returning it as a
   character string.
diff -uNr R-0.63.3/src/main/names.c R-0.63.3-patched/src/main/names.c
--- R-0.63.3/src/main/names.c	Sun Jan 31 12:24:09 1999
+++ R-0.63.3-patched/src/main/names.c	Sun Mar 28 12:55:46 1999
@@ -482,7 +482,7 @@
 {"substitute",	do_substitute,	0,	0,	-1,	PP_FUNCALL},
 {"quit",	do_quit,	0,	111,	1,	PP_FUNCALL},
 {"interactive",	do_interactive,	0,	0,	0,	PP_FUNCALL},
-{"readline",	do_readln,	0,	11,	0,	PP_FUNCALL},
+{"readline",	do_readln,	0,	11,	1,	PP_FUNCALL},
 {"menu",	do_menu,	0,	11,	1,	PP_FUNCALL},
 {"print.default",do_printdefault,0,	111,	6,	PP_FUNCALL},
 {"print.matrix",do_printmatrix, 0,	111,	5,	PP_FUNCALL},
diff -uNr R-0.63.3/src/main/scan.c R-0.63.3-patched/src/main/scan.c
--- R-0.63.3/src/main/scan.c	Wed Feb 17 18:51:21 1999
+++ R-0.63.3-patched/src/main/scan.c	Sun Mar 28 15:07:24 1999
@@ -24,11 +24,12 @@
 #define SCAN_BLOCKSIZE		1000
 /* The size of the console buffer */
 #define CONSOLE_BUFFER_SIZE	1024
+#define CONSOLE_PROMPT_SIZE	32
 
 static char  ConsoleBuf[CONSOLE_BUFFER_SIZE];
 static char *ConsoleBufp;
 static int  ConsoleBufCnt;
-static char  ConsolePrompt[32];
+static char  ConsolePrompt[CONSOLE_PROMPT_SIZE];
 
 #ifdef NOT_used
 static void InitConsoleGetchar()
@@ -731,10 +732,20 @@
 {
     int c;
     char buffer[MAXELTSIZE], *bufp = buffer;
-    SEXP ans;
+    SEXP ans, prompt;
 
     checkArity(op,args);
 
+    prompt = CAR(args);
+    if (prompt == R_NilValue)
+        PROTECT(prompt);
+    else {
+        PROTECT(prompt = coerceVector(prompt, STRSXP));
+        if(length(prompt) > 0)
+            strncpy(ConsolePrompt, CHAR(*STRING(prompt)),
+                CONSOLE_PROMPT_SIZE - 1);
+    }
+
     /* skip white space */
     while ((c= ConsoleGetchar()) == ' ' || c=='\t');
     if (c != '\n' && c != R_EOF) {
@@ -749,9 +760,11 @@
     while (isspace(*--bufp))
 	;
     *++bufp = '\0';
+    ConsolePrompt[0] = '\0';
+
     PROTECT(ans = allocVector(STRSXP,1));
     STRING(ans)[0] = mkChar(buffer);
-    UNPROTECT(1);
+    UNPROTECT(2);
     return ans;
 }
 

--_=XFMail.1.3.p0.Linux:990329192352:425=_--
End of MIME message

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Mar 30 02:44:21 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 29 Mar 1999 19:44:21 -0600
Subject: Prototype nls library for R using closures
Message-ID: <6r7lrzpx8q.fsf@verdi.stat.wisc.edu>

I just uploaded to CRAN a prototype nls (nonlinear least squares)
library for R.  It is far from being finished but I am asking for
this preliminary version to be installed in the src/contrib/Devel
section of CRAN so others can see the use of function closures
to emulate the behaviour of objects in languages like Java.

It will be a couple of days before the file is installed in CRAN and
has a chance to propagate to the mirrors.  The impatient can pick up a
copy at
	    ftp://verdi.stat.wisc.edu/pub/nls_0.1-1.tar.gz
It can be installed on Unix/Linux systems by expanding the tar file
and running
  R INSTALL nls
This version does not use any C code so it should be installable on
Windows if you can expand the tar file.

The nls function takes the model formula, the data, and the starting
values for the parameters and creates an nlsModel object, which is a
list of functions _and_ the environment in which they were created.
That is, it is a list of function closures that share the same
environment.  This is similar in flavor to the example in the
demos/language/scoping.R file.

All of the functions in an nlsModel object behave like accessor
methods except for setPars which sets a new value of the parameters.
Using the nlsModel object and its methods, the nls function itself
becomes trivial.

This style of programming is directly inspired by the presentation
that Robert Gentleman made on the last day of the Distributed
Statistical Computing - Vienna '99 conference.

I would like to take this opportunity to again thank our hosts; Kurt,
Fritz, and Andreas, for their kind hospitality and their generosity in
staging the conference.  I, for one, thoroughly enjoyed it.  I feel
that I learned a lot and that we got a lot done that would have been
very hard to do with e-mail connections only.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Mar 30 15:47:00 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 30 Mar 1999 16:47:00 +0200 (CEST)
Subject: R PLATFORMS
Message-ID: <14080.58340.842840.886232@pc87.maho.magnaeu.com>

I would like (actually, during on of the R-core meetings at DSC-V99 I
was volunteered) to update the `PLATFORMS' file that comes with the R
distribution and contains information on supported platforms.

I think it would be nice to have a ``database'' with at least the
following entries:

	NAME		obvious
	EMAIL		obvious
	VERSION		e.g., 0.63.3
	PLATFORM	e.g., i386-unknown-linux
	SYSTEM		e.g., Redhat 4.2
	CC/FC/MAKE	e.g., egcs/g77/make
			on Suns, MAKE could be `GNUmake' or `Sunmake'
	NOTES		additional info

Ideally, not only R-core and the maintainers of binary packages would
provide me with such info.  In particular, feedback on platforms not
mentioned in PLATFORMS thus far would be appreciated.

NOTE:  I would like to distribute names and email addresses in this file
so that people who have problems building R on a `supported' platform
would know who to contact.

Thanks for all the info in advance.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Mar 30 15:53:47 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 30 Mar 1999 16:53:47 +0200 (CEST)
Subject: ctest wishlist
Message-ID: <14080.58747.592496.374235@pc87.maho.magnaeu.com>

In the past months (maybe even years), I have received a variety of
suggestions on improving/extending/... my ctest package.  Some of the
wishes have already been fulfilled.  In the future, I will at least:

* provide a formula-based interface

* provide an option for controlling the behavior of 2-sided p-values
(sum of more extreme, tail balancing a la S-PLUS, double one-sided, mid
p-value, more?)

* add something for analyzing odds ratios

* add something like an `info' slot to `htest' objects for displaying
useful additional information.  E.g., info on possible heterogeneity of
strata when analyzing 2 by 2 by k tables, etc.

The question is, which other features would you like to see in ctest?
Any additional tests?  What about exact inference methods?

Feedback will be appreciated.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 30 17:56:28 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Mar 1999 18:56:28 +0200
Subject: ctest wishlist
In-Reply-To: Kurt Hornik's message of "Tue, 30 Mar 1999 16:53:47 +0200 (CEST)"
References: <14080.58747.592496.374235@pc87.maho.magnaeu.com>
Message-ID: <x24sn2j4qr.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> The question is, which other features would you like to see in ctest?
> Any additional tests?  What about exact inference methods?
> 
> Feedback will be appreciated.

Exact confidence intervals for p in binom.test and rho (odds ratio) in
fisher.test. Stratified rank sum tests. Alternative scores in rank sum
tests (e.g. Normal Scores test). Tests for Normal Distribution.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 30 21:24:05 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Mar 1999 22:24:05 +0200
Subject: Example(persp) fails in 0.63.4 and 0.64 (PR#152)
Message-ID: <199903302024.WAA30042@blueberry.kubism.ku.dk>

>From 0.63.4 or 0.64:

> example(persp)

persp> x <- seq(-10, 10, length = 50)

persp> y <- x

persp> f <- function(x, y) {
    r <- sqrt(x^2 + y^2)
    10 * sin(r)/r
}

persp> z <- outer(x, y, f)

persp> z[is.na(z)] <- 1

persp> par(bg = "white")

persp> persp(x, y, z, theta = 30, phi = 30, expand = 0.5, 
    col = "lightblue")
Error: plot.new has not been called yet

This is probably not a problem in 0.63.3 too, but example() is broken
there. (If I paste the lines it, it works in 0.63.3 but not 0.63.4).
The error appears to be in the internal code for persp. If plot.new
has been called it works as expected, so `make check' appears to work.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Mar 31 00:50:26 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 30 Mar 1999 17:50:26 -0600
Subject: Documenting data sets
Message-ID: <6r677iczb1.fsf@verdi.stat.wisc.edu>

Has a format for the documentation of data sets been established?  The
prompt function applied to a data set produces a brief outline.  I
notice that the data documentation in the MASS library, for example,
is more complete.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 31 07:02:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 31 Mar 1999 07:02:47 +0100 (BST)
Subject: Documenting data sets
In-Reply-To: <6r677iczb1.fsf@verdi.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.9903310651470.27074-100000@auk.stats>

On 30 Mar 1999, Douglas Bates wrote:

> Has a format for the documentation of data sets been established?  The
> prompt function applied to a data set produces a brief outline.  I
> notice that the data documentation in the MASS library, for example,
> is more complete.

That was translated from Sd. On S-PLUS there are two formats for data given
by prompt.data.frame and prompt.default (for all non-functions). Over the
years we have expanded the dataset documentation: for example I tried about
a year ago to give references wherever possible.

It would be helpful to have more for this sort of thing in R. One thing I
find problematic is the use of \item: I find quite often that the use of
items (.AG or .RC) in .Sd format translates to invalid .Rd. There are
restrictions on the use of \item (as we saw for nlm.Rd) that could do with
being lifted. I need to give more thought to exactly what, though.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Mar 31 08:11:07 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 31 Mar 1999 09:11:07 +0200 (CEST)
Subject: Documenting data sets
In-Reply-To: <Pine.GSO.4.05.9903310651470.27074-100000@auk.stats>
References: <6r677iczb1.fsf@verdi.stat.wisc.edu>
 <Pine.GSO.4.05.9903310651470.27074-100000@auk.stats>
Message-ID: <14081.51851.302864.493919@pc87.maho.magnaeu.com>

>>>>> Prof Brian D Ripley writes:

> On 30 Mar 1999, Douglas Bates wrote:
>> Has a format for the documentation of data sets been established?  The
>> prompt function applied to a data set produces a brief outline.  I
>> notice that the data documentation in the MASS library, for example,
>> is more complete.

> That was translated from Sd. On S-PLUS there are two formats for data
> given by prompt.data.frame and prompt.default (for all
> non-functions). Over the years we have expanded the dataset
> documentation: for example I tried about a year ago to give references
> wherever possible.

prompt.data.frame() sounds like a nice idea.

In general, I think the format should be something like

	\name{}
	\alias{}
	\title{}
	\usage{data(...)}
	\description{}
	\format{}
	\details{}
	\source{}
	\examples{}
	\keyword{datasets}

but we should perhaps standardize the `format' slot a bit more.

> It would be helpful to have more for this sort of thing in R. One
> thing I find problematic is the use of \item: I find quite often that
> the use of items (.AG or .RC) in .Sd format translates to invalid
> .Rd. There are restrictions on the use of \item (as we saw for nlm.Rd)
> that could do with being lifted. I need to give more thought to
> exactly what, though.

Give Fritz a chance to look into Doug's Perl5 module a bit more.  This,
as I have been told, will also get \enumerate{} and description lists to
work.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Wed Mar 31 13:15:18 1999
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Wed, 31 Mar 1999 14:15:18 +0200
Subject: image + x11 (PR#153)
Message-ID: <199903311215.OAA30327@blueberry.kubism.ku.dk>


If a new plot window is opened, immediately after an image() command,
the default color (black) is not plotted correctly.

Example:

> image(matrix(1:16,4))
> x11()
> plot(1:10)

The plot-color is not black, but a very light yellow (obviously the
last color used by image), although par("fg") is still "black".

> plot(1:10,col=1)

has the same effect (yellow instead of black). Specifying an other
color like

> plot(1:10,col=3)

works ok and "resets" also the black color.

	Andreas

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Unstable
 status.rev = 0
 major = 0
 minor = 64.0
 year = 1999
 month = March
 day = 19
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Wed Mar 31 14:32:07 1999
From: khal@alumni.uv.es (khal@alumni.uv.es)
Date: Wed, 31 Mar 1999 15:32:07 +0200
Subject: example(dotplot) is broken in 0633 (PR#154)
Message-ID: <199903311332.PAA30335@blueberry.kubism.ku.dk>

> example(dotplot)

dotplt> data(deaths)
[1] "deaths"

dotplt> dotplot(deaths, main = "Death Rates in Virginia - 1940")
Error: plot.new has not been called yet


This functions if there has been drawn in the device earlier.  One simple fix
is to move plot.new at an earlier place in the function.


Kjetil Halvorsen



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Wed Mar 31 23:17:40 1999
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Wed, 31 Mar 1999 14:17:40 -0800 (PST)
Subject: "dump" Splus -> R
In-Reply-To: <Pine.LNX.4.04.9903311354020.14356-100000@localhost>
Message-ID: <Pine.LNX.4.04.9903311409010.14356-100000@localhost>


A couple of comments for core...

In my examples, it looks like the only calls that need to be evaluated
inside the structure are "c()" and "list()".  A heuristic approach for
loading the dump files, is to assume that any other call ought to be
returned as a call, rather than evaluated.  Providing an undump() command
with this behavour might make it easier for people to move data between
Splus and R.

-Greg 


On Wed, 31 Mar 1999, Gregory R. Warnes wrote:

  GRW>> 
  GRW>> Hi All,
  GRW>> 
  GRW>> I just used "dump" on Splus to transfer a pile of survival objects from
  GRW>> Splus 3.4 on Solaris 7 to R 0.63.3 on Intel. 
  GRW>> 
  GRW>> The only trick is that survival objects contain an element holding the
  GRW>> original call that generated the object.  When Splus writes these out, it
  GRW>> doesn't mark them in any way, so when R tries to read them in, it ends up
  GRW>> trying to reevaluate the call.  Not nice.  
  GRW>> 
  GRW>> Anyway, as all but one** of the offending calls occur in statements
  GRW>> that look like
  GRW>>    "blah" <- structure( [...], call = func( param1, param2, [...], )
  GRW>>                  class = "myclass" [...] )
  GRW>> 
  GRW>> so I wrote the following perl script to encapsulate each call in 
  GRW>> as.call(expression(...)) :
  GRW>> 
  GRW>> -------begin translate.dump.pl--------
  GRW>> $RS="<-";
  GRW>> $OS="<-";
  GRW>> 
  GRW>> while(<>)
  GRW>>   {
  GRW>>         s/call\s*=(.*?),(\s+?)class/call=as.call(expression($1)),$2
  GRW>> class/s;
  GRW>>         print $_;
  GRW>>    }
  GRW>> ---------end translate.dump.pl----------
  GRW>> 
  GRW>> Now the data can be transfered by :
  GRW>> 
  GRW>>    Splus on Unix:
  GRW>>    > dump(ls())
  GRW>> 
  GRW>> Downloading the resulting "dumpdata" file.
  GRW>> 
  GRW>>    Linux shell:
  GRW>>    $  translate.dump.pl < dumpdata > dumpdata.fixed
  GRW>> 
  GRW>>    R on Linux:
  GRW>> 
  GRW>>    > source("dumpdata.fixed")
  GRW>> 
  GRW>> Just thought this might help someone out...
  GRW>> 
  GRW>> 
  GRW>> -Greg 
  GRW>> 
  GRW>> 
  GRW>> **The only exception was the ".Last.warning" object, which contained
  GRW>> something like 
  GRW>>   structure( "Warning Message" = offending(call) )
  GRW>> 
  GRW>> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Wed Mar 31 23:56:54 1999
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Wed, 31 Mar 1999 14:56:54 -0800 (PST)
Subject: GC, Disk Storage, etc
Message-ID: <Pine.LNX.4.04.9903311441410.14356-100000@localhost>


I'm wondering what the plans are for the memory management system.  

Once there is a dynamic memory allocation system in place it would be nice
to augment that so that objects which are not currently being used need
not be resident in memory.  This way, rarely used objects will not be
filling up the memory of the R process.

(Yes, I am thinking about a cross between the current R and S object
storage ideas.)

It should be possible to set up an object access system that loads objects
on demand, and saves them out to disk when not used using a LRU strategy.

The save to disk could be part of the garbage collection strategy.  Some
herusitic like, if we run out of memory, throw all the ojbects we've not
used for XXX period of time out to disk.   If there are no such objects,
try to increase our available memory.  If that fails, throw things out
from least recently used forward.  If we can't manage to satisfy the
request using either method, fail the memory allocation and tell the user.

Glancing at the current code, it seems that the hardest part of this would
be keeping track of object usage, without imposing excessive overhead.

Comments?

-Greg



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Mon Mar  1 06:22:56 1999
From: khal@alumni.uv.es (Kjetil Halvorsen)
Date: Mon, 01 Mar 1999 07:22:56 +0100
Subject: [R] rw0632 makes stray .Rhistory orphans
References: <000001be5f1c$ef0b70e0$6f1abb81@fenris> <19990223134026.06314@hal.stat.unipd.it> <36D4644A.2C61BFC9@alumni.uv.es> <19990224232611.16861@hal.stat.unipd.it>
Message-ID: <36DA3240.FF683312@alumni.uv.es>

While it is time to do changes ... The save image as postscript
menu item opens the file save dialog always to save in 
"my documents", I would rather have my images in HOME, which is
where the projecy lives

K


Guido Masarotto wrote:
> 
> On Wed, Feb 24, 1999 at 09:42:50PM +0100, Kjetil Halvorsen wrote:
> > Opened the tema, another small mal-function which could be easily
> > repaired:  When sourcing a file from the menu, the working directory
> > (HOME?) changes to the files directory, then leaving R the Rdata
> > gets saved in the wrong place! I feel that sourcing shouldnt change
> > HOME, it surprised me more than once.
> >
>   K.,
>   I think you are perfectly right.
>   Any opinion by others before I change the source?
>   And, what about loading and saving the workspaces?
>   I haven't checked but since code is essentialy the same
>   I suppose behaviour is the same  and, hence, it must be
>   changed too.
> 
>   g.
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Mon Mar  1 10:59:24 1999
From: khal@alumni.uv.es (khal@alumni.uv.es)
Date: Mon, 1 Mar 1999 11:59:24 +0100
Subject: "xpdrows.data.frame" (PR#131)
Message-ID: <199903011059.LAA05213@biostat.ku.dk>

This is a multi-part message in MIME format.
--------------E6449E20185CF0A71A620457
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

This is a follow-up to bug sent to days ago, which bounced from r-devel
because 
the example was to large. Now example is smaller, and behaviour is as
belo, 
EXEPT that r-windows not any more bombs, so main problem is
"xpdrows.data.frame"???

By the way, how to debug this example under windows? debug() doesnt
accept
the functions used (.Primitive), and R wont run under gdb --- may have
to do
with R.dll, from the manual for gdb i get it that it cannot debug
functions
in shared libraries?

copied:


Using the data frames frame1 and frame2 from the attached saved dataset
frame.dat
(say load("frame.dat") ):

> for (i in 1:11) {
+      frame1[i, ] <- frame2[i, ] }
Error: couldn't find function "xpdrows.data.frame"

--- What is function xpdrows.data.frame?  There should be an more
appropiate
     error mssage here! (the data frame frame1 isn't long enough for the
last
     assignment, but this is a small, artificiall example, ocurred same
error
     with much larger frames, and the reason for the error was'nt clear,
not necessarily
     "index out of bound", as appropiate(?) here). 

After the above:

> dim(frame1)
NULL
> length(frame1)
[1] 11
> class(frame1)
NULL

which shows that frame1 is destroyed as a data frame, but the str
function works on it.
but trying to print frame1

> frame1

and R (windows) bombs, after some considerable time! (~10 min)
This data frame has a factor with a very large levels set, might have to 
do with that. 

The error message should be meaningfull, and shuld'nt return a destroyed
object
which bombs when printing.

Kjetil Halvorsen
--------------E6449E20185CF0A71A620457
Content-Type: application/x-unknown-content-type-DAT_auto_file; name="frame.dat"
Content-Transfer-Encoding: base64
Content-Disposition: inline; filename="frame.dat"

MTk3Ngo2IDEzMSA1NzEKMCAxMyAiY2xhc3MiCjEgMzEgImxldmVscyIKMiAzNyAibmFtZXMi
CjMgNDMgInJvdy5uYW1lcyIKNSAxNzMwMTIgImZyYW1lMiIKNiAxNzMwMzAgImZyYW1lMSIK
NCA2NTQ3NQo3IDU3NzUxMQo4IDU3NzUxMgo5IDU3NzY2NwoxMCA1Nzc2NjgKMTEgNTc3NjY5
CjEyIDU3NzY3MAoxMyA1Nzc2NzIKMTQgNjA5Njc3CjE1IDYwOTY3OAoxNiA2MDk2NzkKMTcg
NjA5NjgwCjE4IDYwOTY4MgoxOSA2MTQ1ODIKMjAgNjE0NTgzCjIxIDYxNDU4NAoyMiA2MTQ1
ODUKMjMgNjE0NTg2CjI0IDYxNDU4NwoyNSA2MTQ1ODkKMjYgNjE0NTkwCjI3IDYxNDU5MQoy
OCA2MTQ1OTIKMjkgNjE0NTkzCjMwIDYxNDU5NAozMSA2MTQ1OTUKMzIgNjE0NTk2CjMzIDYx
NDU5NwozNCA2MTQ1OTgKMzUgNjE0NTk5CjM2IDYxNDYwMAozNyA2MTQ2MTMKMzggNjQwNDcz
CjM5IDY0MDQ3NAo0MCA2NDA0NzUKNDEgNjQwNTYzCjQyIDY0MDU2NAo0MyA2ODE1MTkKNDQg
NjgxNTIwCjQ1IDY4MTUyMQo0NiA2ODE1MjIKNDcgNjgxNTIzCjQ4IDY4MTUyNAo0OSA2ODE1
MjUKNTAgNjgxNTI2CjUxIDY4MTUyNwo1MiA2ODE1MjgKNTMgNjgxNTI5CjU0IDY4MTUzMAo1
NSA2ODE1MzEKNTYgNjgxNTMyCjU3IDY4MTUzMwo1OCA2ODE1MzQKNTkgNjgxNTM1CjYwIDY4
MTUzNgo2MSA2ODE1MzcKNjIgNjgxNTM4CjYzIDY4MTUzOQo2NCA2ODE1NDAKNjUgNjg5MDAx
CjY2IDY4OTAxNQo2NyA2ODkwMjgKNjggNjg5MDQxCjY5IDY4OTA1NQo3MCA2ODkwNjkKNzEg
Njg5MDgzCjcyIDY4OTA5Nwo3MyA2ODkxMTAKNzQgNjg5MTIzCjc1IDY4OTEzNQo3NiA2ODkx
NDgKNzcgNjg5MTYwCjc4IDY4OTE2MQo3OSA2ODkxNzcKODAgNjg5MTc4CjgxIDY4OTE5Mgo4
MiA2ODkxOTMKODMgNjg5MjA5Cjg0IDY4OTIxMAo4NSA2ODkyMjYKODYgNjg5MjI3Cjg3IDY4
OTI0Mwo4OCA2ODkyNDQKODkgNjg5MjU1CjkwIDY4OTI1Ngo5MSA2ODkyNTkKOTIgNjg5MjYw
CjkzIDY4OTI3Mwo5NCA2ODkyNzQKOTUgNjg5Mjg1Cjk2IDY4OTI4Ngo5NyA2ODkyODcKOTgg
Njg5Mjg4Cjk5IDY4OTI4OQoxMDAgNjg5MjkwCjEwMSA2ODkyOTEKMTAyIDY4OTI5MgoxMDMg
Njg5MjkzCjEwNCA2ODkyOTQKMTA1IDY4OTI5NQoxMDYgNjg5Mjk2CjEwNyA2OTk4ODIKMTA4
IDY5OTg4MwoxMDkgNjk5ODg0CjExMCA2OTk4ODUKMTExIDY5OTg4NgoxMTIgNjk5ODg3CjEx
MyA2OTk4ODgKMTE0IDY5OTg4OQoxMTUgNjk5ODkwCjExNiA2OTk4OTEKMTE3IDY5OTg5Mgox
MTggNjk5ODkzCjExOSA2OTk4OTQKMTIwIDY5OTg5NQoxMjEgNjk5ODk2CjEyMiA2OTk4OTcK
MTIzIDY5OTg5OAoxMjQgNjk5ODk5CjEyNSA2OTk5MDAKMTI2IDY5OTkwMgoxMjcgNjk5OTAz
CjEyOCA2OTk5MDQKMTI5IDY5OTkwNQoxMzAgNjk5OTA2CjEzMSA2OTk5MDcKMTMyIDY5OTkw
OAoxMzMgNjk5OTA5CjEzNCA2OTk5MTAKMTM1IDY5OTkxMQoxMzYgNjk5OTg5CjQgOSAwIDAg
LTEgNiAiZmFjdG9yIgo3IDIgMCAwIC0xIDYxNDYxMyA1Nzc1MTIgMTczMDMwCjggMiAwIDAg
LTEgNjk5ODgyIC0xIDE3MzAxMgo5IDIgMCAwIC0xIDU3NzY2OCAtMSAxMwoxMCAxNiAwIDAg
LTEgMQo2NTQ3NQoxMSAyIDAgMCAtMSA1Nzc2NzAgNTc3NjY3IDMxCjEyIDE2IDAgMCAtMSAx
MAo2ODkxNjAgNjg5MjQzIDY4OTIwOSA2ODkxOTIgNjg5MjI2IDY4OTE3NyA2ODkyNTUgNjg5
MjU5IDY4OTI3MyA2ODkyODUKMTMgMTMgMSAwIDU3NzY2OSAxMAoxMCA5IDggNyAyIDUgMyA0
IDYgMQoxNCAyIDAgMCAtMSA2MDk2NzggLTEgMTMKMTUgMTYgMCAwIC0xIDEKNjU0NzUKMTYg
MiAwIDAgLTEgNjA5NjgwIDYwOTY3NyAzMQoxNyAxNiAwIDAgLTEgMTAKNjg5Mjg2IDY4OTI3
NCA2ODkyNjAgNjg5MjU2IDY4OTI0NCA2ODkyMjcgNjg5MjEwIDY4OTE5MyA2ODkxNzggNjg5
MTYxCjE4IDEzIDEgMCA2MDk2NzkgMTAKMSAyIDMgNCA1IDYgNyA4IDkgMTAKMTkgMiAwIDAg
LTEgNjE0NTgzIC0xIDEzCjIwIDE2IDAgMCAtMSAxCjY0MDU2MwoyMSAyIDAgMCAtMSA2MTQ1
ODUgNjE0NTgyIDQzCjIyIDE2IDAgMCAtMSAxMAo2ODE1NDAgNjgxNTM5IDY4MTUzOCA2ODE1
MzcgNjgxNTM2IDY4MTUzNSA2ODE1MzQgNjgxNTMzIDY4MTUzMiA2ODE1MzEKMjMgMiAwIDAg
LTEgNjE0NTg3IDYxNDU4NCAzNwoyNCAxNiAwIDAgLTEgMTQKNjg5Mjk2IDY4OTI5NSA2ODky
OTQgNjg5MjkzIDY4OTI5MiA2ODkyOTEgNjg5MjkwIDY4OTI4OSA2ODkyODggNjg5Mjg3CjY0
MDU2NCA2NDA0NzMgNjQwNDc0IDY0MDQ3NQoyNSAxNCAwIDAgLTEgMTAKMTkwLjMgMTg0LjEg
TkEgTkEgMTc1LjggMTc2LjcgMTc4LjkgMTgzLjggMTg3LjggMTUzLjEKMjYgMTQgMCAwIC0x
IDEwCjIwMS41IDIxNC4zIE5BIE5BIDE4OC44IDE5NS45IDE5NC44IDE5OS41IDE4NC4xIDE4
Ny41CjI3IDE0IDAgMCAtMSAxMAoxNzUuMiAyMDAgTkEgMTc4LjEgMTY5LjggMTc4LjggMTcz
IDE2OS43IDEwNi4zIDU1LjUxCjI4IDE0IDAgMCAtMSAxMAoxNSAxMyAxMyAxMiAxMSAxMSAx
MSAxMSAxMSAxMQoyOSAxNCAwIDAgLTEgMTAKNTQ0MzQgNDc5NzkgNDc0OTMgNDU1ODQgNDE4
NDUgNDIwNDQgNDE4NDYgNDE5NDggNDIwNDYgNDE4NDMKMzAgMTQgMCAwIC0xIDEwCjcgNyA3
IDcgNyA3IDcgNyA3IDcKMzEgMTQgMCAwIC0xIDEwCjEgMiAzIDQgNSA2IDcgOCA5IDEwCjMy
IDE0IDAgMCAtMSAxMAoxODM5NiAxODQ5NiAxODU5NiAxODY5NiAxODc5NiAxODg5NiAxODk5
NiAxOTA5NiAxOTE5NiAxOTI5NgozMyAxNCAwIDAgLTEgMTAKMzk4MDMgMjE2ODAuOSAxODkz
OS41IDEyNjE4LjkgMjgwOS45NSAzMTAyLjMyIDI3NTguODMgMjk4Ny4xNyAzMTE2LjA2IDEz
OTYuMDkKMzQgMTQgMCAwIC0xIDEwCjIyNDIgOTkwLjUgODE1LjggNDY2LjEgNTIuNDEgNjAu
OSA0OS40NCA1Ni4zIDU5LjQ1IDI0LjMyCjM1IDE0IDAgMCAtMSAxMAoxNjAuNyA1OC45IDQ2
LjkxIDI1LjI1IDMuMTg3IDMuNjE1IDMuMDU3IDMuMzk3IDMuNTc1IDEuNTE4CjM2IDE0IDAg
MCAtMSAxMAo0NS4xIDYyLjIgNjMuOCA3MCA4My4xIDgyLjMgODMgODIuNyA4Mi4zIDgzCjM3
IDE5IDEgMCA2MTQ1ODYgMTQKNjA5NjgyIDU3NzY3MiA2MTQ2MDAgNjE0NTk5IDYxNDU5OCA2
MTQ1OTcgNjE0NTk2IDYxNDU5NSA2MTQ1OTQgNjE0NTkzCjYxNDU5MiA2MTQ1OTEgNjE0NTkw
IDYxNDU4OQozOCA5IDAgMCAtMSA1ICJDSUUxNyIKMzkgOSAwIDAgLTEgNSAiQ0lFMTYiCjQw
IDkgMCAwIC0xIDUgIkNJRTE1Igo0MSA5IDAgMCAtMSAxMCAiZGF0YS5mcmFtZSIKNDIgOSAw
IDAgLTEgNCAiSG9yYSIKNDMgOSAwIDAgLTEgMiAiMjIiCjQ0IDkgMCAwIC0xIDIgIjIxIgo0
NSA5IDAgMCAtMSAyICIyMCIKNDYgOSAwIDAgLTEgMiAiMTkiCjQ3IDkgMCAwIC0xIDIgIjE4
Igo0OCA5IDAgMCAtMSAyICIxNyIKNDkgOSAwIDAgLTEgMiAiMTYiCjUwIDkgMCAwIC0xIDIg
IjE1Igo1MSA5IDAgMCAtMSAyICIxNCIKNTIgOSAwIDAgLTEgMiAiMTMiCjUzIDkgMCAwIC0x
IDIgIjEyIgo1NCA5IDAgMCAtMSAyICIxMSIKNTUgOSAwIDAgLTEgMiAiMTAiCjU2IDkgMCAw
IC0xIDEgIjkiCjU3IDkgMCAwIC0xIDEgIjgiCjU4IDkgMCAwIC0xIDEgIjciCjU5IDkgMCAw
IC0xIDEgIjYiCjYwIDkgMCAwIC0xIDEgIjUiCjYxIDkgMCAwIC0xIDEgIjQiCjYyIDkgMCAw
IC0xIDEgIjMiCjYzIDkgMCAwIC0xIDEgIjIiCjY0IDkgMCAwIC0xIDEgIjEiCjY1IDkgMCAw
IC0xIDggIjExOjM1OjQyIgo2NiA5IDAgMCAtMSA4ICIxMTozNTo1NiIKNjcgOSAwIDAgLTEg
OCAiMTE6MzY6MDgiCjY4IDkgMCAwIC0xIDggIjExOjM2OjIxIgo2OSA5IDAgMCAtMSA4ICIx
MTozNjozMiIKNzAgOSAwIDAgLTEgOCAiMTE6MzY6NDEiCjcxIDkgMCAwIC0xIDggIjExOjM2
OjUwIgo3MiA5IDAgMCAtMSA4ICIxMTozNjo1OSIKNzMgOSAwIDAgLTEgOCAiMTE6Mzc6MDUi
Cjc0IDkgMCAwIC0xIDggIjExOjM4OjUwIgo3NSA5IDAgMCAtMSA4ICIxMTozNzoxNSIKNzYg
OSAwIDAgLTEgOCAiMTE6Mzc6MjAiCjc3IDkgMCAwIC0xIDggIjExOjM3OjIzIgo3OCA5IDAg
MCAtMSA5ICIxMC1KdWwtOTYiCjc5IDkgMCAwIC0xIDggIjExOjQwOjQ2Igo4MCA5IDAgMCAt
MSA5ICIwOS1KdWwtOTYiCjgxIDkgMCAwIC0xIDggIjExOjM5OjA4Igo4MiA5IDAgMCAtMSA5
ICIwOC1KdWwtOTYiCjgzIDkgMCAwIC0xIDggIjExOjM3OjI2Igo4NCA5IDAgMCAtMSA5ICIw
Ny1KdWwtOTYiCjg1IDkgMCAwIC0xIDggIjExOjQwOjQ0Igo4NiA5IDAgMCAtMSA5ICIwNi1K
dWwtOTYiCjg3IDkgMCAwIC0xIDggIjExOjM3OjI1Igo4OCA5IDAgMCAtMSA5ICIwNS1KdWwt
OTYiCjg5IDkgMCAwIC0xIDggIjEyOjM5OjQ0Igo5MCA5IDAgMCAtMSA5ICIwNC1KdWwtOTYi
CjkxIDkgMCAwIC0xIDggIjEzOjExOjMzIgo5MiA5IDAgMCAtMSA5ICIwMy1KdWwtOTYiCjkz
IDkgMCAwIC0xIDggIjEzOjE5OjM5Igo5NCA5IDAgMCAtMSA5ICIwMi1KdWwtOTYiCjk1IDkg
MCAwIC0xIDggIjE1OjA3OjE0Igo5NiA5IDAgMCAtMSA5ICIwMS1KdWwtOTYiCjk3IDkgMCAw
IC0xIDggIk1FU1NFR1VOIgo5OCA5IDAgMCAtMSA1ICJNT05USCIKOTkgOSAwIDAgLTEgNiAi
SlVMRElBIgoxMDAgOSAwIDAgLTEgMyAiRElBIgoxMDEgOSAwIDAgLTEgMyAiVVZBIgoxMDIg
OSAwIDAgLTEgMyAiVVZCIgoxMDMgOSAwIDAgLTEgMyAiQ0lFIgoxMDQgOSAwIDAgLTEgMyAi
U1pBIgoxMDUgOSAwIDAgLTEgNCAiSE9SQSIKMTA2IDkgMCAwIC0xIDUgIkZFQ0hBIgoxMDcg
MTkgMSAwIDY5OTg5NiAxNAo2OTk5MDIgNjk5OTA3IDY5OTg4MyA2OTk4ODQgNjk5ODg1IDY5
OTg4NiA2OTk4ODcgNjk5ODg4IDY5OTg4OSA2OTk4OTAKNjk5ODkxIDY5OTg5MiA2OTk4OTMg
Njk5ODk0CjEwOCAxNCAwIDAgLTEgMTIKODMgODMgODIuNiA4MyA4Mi45IDgyLjkgODIuOSA4
Mi45IDgyLjkgODIuOQo4Mi45IDgyLjgKMTA5IDE0IDAgMCAtMSAxMgoxLjg4NCAzLjE2NyAz
LjY0MyAzLjM2NyAzLjI2MSAzLjMwMiAzLjMwOCAzLjE5OCAzLjI0NCAzLjMyCjMuMjcyIDMu
MTUzCjExMCAxNCAwIDAgLTEgMTIKMzAuNDcgNTEuNzUgNjAuOSA1NS4yMSA1My40OSA1NC4w
MyA1NC41MyA1Mi4yOCA1Mi45NSA1NC4zNgo1My40MiA1MS44NgoxMTEgMTQgMCAwIC0xIDEy
CjE3MDMuNjkgMjgyMy4zNyAzMTYxLjA3IDI5OTMuODEgMjg5Mi4xMyAyOTE0Ljg1IDI5MTku
MzYgMjg0MC4wMyAyODkzLjQ0IDI5NjMuMzkKMjkyMC4wOSAyNzc5LjQyCjExMiAxNCAwIDAg
LTEgMTIKMTkzOTYgMTk0OTYgMTk1OTYgMTk2OTYgMTk3OTYgMTk4OTYgMTk5OTYgMjAwOTYg
MjAxOTYgMjAyOTYKMjAzOTYgMjA0OTYKMTEzIDE0IDAgMCAtMSAxMgoxMSAxMiAxMyAxNCAx
NSAxNiAxNyAxOCAxOSAyMAoyMSAyMgoxMTQgMTQgMCAwIC0xIDEyCjcgNyA3IDcgNyA3IDcg
NyA3IDcKNyA3CjExNSAxNCAwIDAgLTEgMTIKNDE4NDAgNDE4MzUgNDE5MzAgNDE4MjUgNDE4
MTkgNDE4MTAgNDE4MDEgNDE3OTIgNDE3ODEgNDE3NjgKNDE3NTYgNDE3NDIKMTE2IDE0IDAg
MCAtMSAxMgoxMSAxMSAxMSAxMSAxMSAxMSAxMSAxMSAxMSAxMQoxMSAxMQoxMTcgMTQgMCAw
IC0xIDEyCjE3Ni43IDE5OS45IDE4My42IDE4NSAxMzcuMyAxODQuMyAxODguNSAxODUuNyAx
ODguMyAyMDMuNQoyMDEuNiAxODYuMwoxMTggMTQgMCAwIC0xIDEyCjEzMS4zIDIxNi45IDIx
NSAyMTQuMiAxOTMuNiAyMTIuNCAyMTUuNiAyMDMuOCBOQSAyMTQuOQoyMTIuOCAyMjIKMTE5
IDE0IDAgMCAtMSAxMgo4OS4wOSBOQSAxOTkuNiAxOTkuMyAxNzYuMyAxOTMuNSAxOTUuNCAx
ODguNSAxODUuOCAxODYuOAoxOTguNiAyMDYuNwoxMjAgMTYgMCAwIC0xIDE0CjY4OTI5NiA2
ODkyOTUgNjg5Mjk0IDY4OTI5MyA2ODkyOTIgNjg5MjkxIDY4OTI5MCA2ODkyODkgNjg5Mjg4
IDY4OTI4Nwo2NDA1NjQgNjQwNDczIDY0MDQ3NCA2NDA0NzUKMTIxIDIgMCAwIC0xIDY5OTg5
NSA2OTk4OTggMzcKMTIyIDE2IDAgMCAtMSAxMgo2ODE1MzAgNjgxNTI5IDY4MTUyOCA2ODE1
MjcgNjgxNTI2IDY4MTUyNSA2ODE1MjQgNjgxNTIzIDY4MTUyMiA2ODE1MjEKNjgxNTIwIDY4
MTUxOQoxMjMgMiAwIDAgLTEgNjk5ODk3IDY5OTkwMCA0MwoxMjQgMTYgMCAwIC0xIDEKNjQw
NTYzCjEyNSAyIDAgMCAtMSA2OTk4OTkgLTEgMTMKMTI2IDEzIDEgMCA2OTk5MDQgMTAKMSAy
IDMgNCA1IDYgNyA4IDkgMTAKMTI3IDE2IDAgMCAtMSAxMAo2ODkyODYgNjg5Mjc0IDY4OTI2
MCA2ODkyNTYgNjg5MjQ0IDY4OTIyNyA2ODkyMTAgNjg5MTkzIDY4OTE3OCA2ODkxNjEKMTI4
IDIgMCAwIC0xIDY5OTkwMyA2OTk5MDYgMzEKMTI5IDE2IDAgMCAtMSAxCjY5OTk4OQoxMzAg
MiAwIDAgLTEgNjk5OTA1IC0xIDEzCjEzMSAxMyAxIDAgNjk5OTA5IDEyCjExIDEwIDEyIDkg
OCA3IDYgNSA0IDMKMiAxCjEzMiAxNiAwIDAgLTEgMTIKNjg5MDAxIDY4OTAxNSA2ODkwMjgg
Njg5MDQxIDY4OTA1NSA2ODkwNjkgNjg5MDgzIDY4OTA5NyA2ODkxMTAgNjg5MTM1CjY4OTE0
OCA2ODkxMjMKMTMzIDIgMCAwIC0xIDY5OTkwOCA2OTk5MTEgMzEKMTM0IDE2IDAgMCAtMSAx
CjY5OTk4OQoxMzUgMiAwIDAgLTEgNjk5OTEwIC0xIDEzCjEzNiA5IDAgMCAtMSA2ICJmYWN0
b3IiCjU3NzUxMQo=
--------------E6449E20185CF0A71A620457--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Mon Mar  1 11:05:12 1999
From: khal@alumni.uv.es (Kjetil Halvorsen)
Date: Mon, 01 Mar 1999 12:05:12 +0100
Subject: replacement for qqnorm
Message-ID: <36DA7467.426AE491@alumni.uv.es>

I propose the folloving (few changes) replacement for qqnorm. 

1) return invisible (when plot.it=false) a list which can be
    given directly to plot to make the quantile plot. This is the
behaviour of qqplot.

2) calls ppoints

Kjetil Halvorsen




 
       qqnorm  <- 
function (y, ylim, main = "Normal Q-Q Plot", xlab = "Theoretical
Quantiles", 
    ylab = "Sample Quantiles", plot.it = TRUE, ...) 
{
    y <- y[!is.na(y)]
    if (!length(y)) 
        stop("y is empty")
    if (missing(ylim)) 
        ylim <- range(y)
    x <- qnorm(ppoints(length(y)))
    sy <- sort(y)
    if (plot.it) 
        plot(x, sort(y), main = main, xlab = xlab, ylab = ylab, 
            ylim = ylim, ...)
    invisible(list(x = x, y = sy))
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  1 11:33:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Mar 1999 12:33:18 +0100
Subject: "xpdrows.data.frame" (PR#131)
In-Reply-To: khal@alumni.uv.es's message of Mon, 1 Mar 1999 11:59:24 +0100
References: <199903011059.LAA05213@biostat.ku.dk>
Message-ID: <x2btide96p.fsf@blueberry.kubism.ku.dk>

khal@alumni.uv.es writes:

> This is a multi-part message in MIME format.
> --------------E6449E20185CF0A71A620457
> Content-Type: text/plain; charset=us-ascii
> Content-Transfer-Encoding: 7bit
> 
> This is a follow-up to bug sent to days ago, which bounced from r-devel
> because 
> the example was to large. Now example is smaller, and behaviour is as
... 
> Using the data frames frame1 and frame2 from the attached saved dataset
> frame.dat
> (say load("frame.dat") ):
....
> --------------E6449E20185CF0A71A620457
> Content-Type: application/x-unknown-content-type-DAT_auto_file; name="frame.dat"
> Content-Transfer-Encoding: base64
> Content-Disposition: inline; filename="frame.dat"
> 
> MTk3Ngo2IDEzMSA1NzEKMCAxMyAiY2xhc3MiCjEgMzEgImxldmVscyIKMiAzNyAibmFtZXMi
> CjMgNDMgInJvdy5uYW1lcyIKNSAxNzMwMTIgImZyYW1lMiIKNiAxNzMwMzAgImZyYW1lMSIK
> NCA2NTQ3NQo3IDU3NzUxMQo4IDU3NzUxMgo5IDU3NzY2NwoxMCA1Nzc2NjgKMTEgNTc3NjY5
> CjEyIDU3NzY3MAoxMyA1Nzc2NzIKMTQgNjA5Njc3CjE1IDYwOTY3OAoxNiA2MDk2NzkKMTcg
> NjA5NjgwCjE4IDYwOTY4MgoxOSA2MTQ1ODIKMjAgNjE0NTgzCjIxIDYxNDU4NAoyMiA2MTQ1

This is not a good idea! MIME attachments do not survive the trip
through JitterBug. So to read your data, one has to find a separate
base64 decoder and feed it the above gibberish. (And even if we could
get the remailer to handle it, it would still be a problem with the
filed text.)

It can't be that hard to cook up a smaller, plaintext example? E.g.

> f1<-data.frame(a=1:2,b=3:4)
> f2<-f1
> f2[3,]<-f1[2,]
Error: couldn't find function "xpdrows.data.frame"

..which, incidentally, is fixed in the 0.63.3 snapshots.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Mon Mar  1 13:53:31 1999
From: khal@alumni.uv.es (Kjetil Halvorsen)
Date: Mon, 01 Mar 1999 14:53:31 +0100
Subject: Inconsistencies with is.function
Message-ID: <36DA9BDA.67F9B953@alumni.uv.es>

> debug(sin)
Error in debug(sin) : argument must be a function
> is.function(sin)
[1] TRUE
> debug("[<-")
Error in debug("[<-") : argument must be a function
> is.function(get("[<-"))
[1] TRUE
> 

The problem having to do with .Primitive functions. R should agree
with itself on what is a function! to work around, I used


is.Primfun <- function(fun) is.function(fun) && is.null(body(fun))

but I'm not sure if that is failsafe.



Kjetil Halvorsen
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  1 14:11:48 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Mar 1999 15:11:48 +0100
Subject: Inconsistencies with is.function
In-Reply-To: Kjetil Halvorsen's message of Mon, 01 Mar 1999 14:53:31 +0100
References: <36DA9BDA.67F9B953@alumni.uv.es>
Message-ID: <x2aexxe1uj.fsf@blueberry.kubism.ku.dk>

Kjetil Halvorsen <khal@alumni.uv.es> writes:

> > debug("[<-")
> Error in debug("[<-") : argument must be a function
> > is.function(get("[<-"))
> [1] TRUE
> > 
> 
> The problem having to do with .Primitive functions. R should agree
> with itself on what is a function! 

..most likely by fixing the error message in  debug(): "must be a
non-primitive function".

> to work around, I used
> is.Primfun <- function(fun) is.function(fun) && is.null(body(fun))
> 
> but I'm not sure if that is failsafe.

It isn't: 

> is.null(body(function()NULL))
[1] TRUE

However,

> args(function()NULL) 
function () 
NULL
> args(sin)
NULL

so is.null(args(fun)) works better. The construction is also used in
some of the tests/ and demos/ files.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  2 15:59:52 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 2 Mar 1999 16:59:52 +0100
Subject: [R] zero-offset matrices (PR#132)
Message-ID: <199903021559.QAA16751@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> "[<-.zoffset"  <- function(x, i, j, value)
> {
>   if(!missing(i) && is.numeric(i)) i <- i+1
>   if(!missing(j) && is.numeric(j)) j <- j+1
>   NextMethod("[<-")
> }
> works in S but not in R. (Which I think is a bug.) I next tried

Yup, there's a bug in there somewhere, MatrixAssign ends up getting
called with the symbol "value" where the actual replacement value
should have been.

Of course, the whole point becomes a bit moot when one considers
*removing* rows and columns from a matrix...

To tickle the bug:

"[<-.zoffset"  <- function(x, i, j, value)
{
  if(!missing(i) && is.numeric(i)) i <- i+1
  if(!missing(j) && is.numeric(j)) j <- j+1
  NextMethod("[<-")
}
m<-matrix(1:4,2,2)
m[0,]<-4:5

Probably, set a breakpoint in do_subassigne and step through it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  2 19:40:26 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 2 Mar 1999 19:40:26 +0000 (GMT)
Subject: [R] How to set axis labels?
In-Reply-To: <XFMail.990302125553.s-luppescu@uchicago.edu>
Message-ID: <Pine.GSO.4.05.9903021935240.8444-100000@auk.stats>

On Tue, 2 Mar 1999, Stuart Luppescu wrote:

> Sorry to bother everyone with such a basic question again, but I can't seem to
> set my axis labels. When I use
> title(ylab="String")
> "String" just overwrites the variable name, producing a mess. When I try to put
> ylab="String" in the plot function, like this:
> 
> plot(residuals(mschmod) ~ size94, ylab = "Productivity Adjusted for Context")
> I get this message:
> Error: formal argument "ylab" matched by multiple actual arguments

Ah, that is not `the plot function'. It is plot.formula, and I suggest you
use

plot(size94, residuals(mschmod), ylab = "Productivity Adjusted for 
Context")

For some reason plot.formula insists on setting ylab. I think it should be:

plot.formula <-
function (formula, data = NULL, subset, na.action,
          ylab=varnames[response], ..., ask = TRUE) 
{
    if (missing(na.action)) 
        na.action <- options()$na.action
    m <- match.call(expand.dots = FALSE)
    if (is.matrix(eval(m$data, sys.parent()))) 
        m$data <- as.data.frame(data)
    m$... <- NULL
    m[[1]] <- as.name("model.frame")
    mf <- eval(m, sys.parent())
    response <- attr(attr(mf, "terms"), "response")
    if (response) {
        varnames <- names(mf)
        y <- mf[[response]]
        if (length(varnames) > 2) {
            opar <- par(ask = ask)
            on.exit(par(opar))
        }
        for (i in varnames[-response]) plot(mf[[i]], y, xlab = i, 
            ylab = ylab, ...)
    }
    else plot.data.frame(mf)
}

Can anyone see why not?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Mar  2 19:55:34 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 3 Mar 1999 08:55:34 +1300 (NZDT)
Subject: [R] How to set axis labels?
Message-ID: <199903021955.IAA23691@stat1.stat.auckland.ac.nz>

I think you're right Brian.  Do you want to change it? :-)

[ For those who don't know, Brian is now a core developer
  and can commit changes to the source code tree. ]

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  4 10:33:33 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 4 Mar 1999 11:33:33 +0100
Subject: system (PR#133)
Message-ID: <199903041033.LAA20548@biostat.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> According to ?system (R-release)
> 
>      system(command, intern=FALSE)
> 
> but the actual syntax is function(call, intern = FALSE, trash.errors =
> FALSE).
> 
> So, is it `call' or `command', and what does `trash.errors' do? (I assume
> it is intended to make stderr be ignored, but that would not be my
> guess from the name, and is shell-dependent, let alone system-dependent.)
> 
> I'll crawl back to documenting system() on Windows....

Filing as bug report. With 0.63.3 due out tomorrow, I don't want to fix
bugs that haven't actually bitten anyone. But yes, the docs should be
fixed to describe the actual code, it probably should be "command" and
"trash.errors = FALSE" could be something like "stderr = TRUE".

The shell-dependency is probably not avoidable, but - at least on
Linux - system and popen have /bin/sh hardcoded (POSIX?).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Fri Mar  5 16:07:23 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 05 Mar 1999 08:07:23 -0800
Subject: [Andreas Krause <Andreas.Krause@genedata.com>] Re: splus shell escapes
Message-ID: <87ogm7vs1w.fsf@alpha.cfas.washington.edu>



Anyone know what the problem is with IRIX 6.5 ?  (esp if there is a
solution?).  Looks like the built-in math stuff is masking definitions
from R source.

(passing this along for a friend).

best,
-tony



From: Andreas Krause <Andreas.Krause@genedata.com>
To: "A.J. Rossini" <rossini@biostat.washington.edu>
Subject: Re: splus shell escapes


# download
./configure


R is now configured for mips-sgi-irix6.5

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc -g -O2
  FORTRAN compiler:         f77 

make
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/afm'
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/afm'
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/demos'
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/demos'
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/doc'
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/doc'
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/etc'
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/etc'
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/src'
make[2]: Entering directory `/u/andreas/tmp/R/R-0.63.2/src/include'
make[2]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src/include'
make[2]: Entering directory `/u/andreas/tmp/R/R-0.63.2/src/appl'
gcc -g -O2 -I../include -I../../src/include  -c fft.c -o fft.o
In file included from fft.c:21:
../include/Mathlib.h:255: conflicting types for `gammal'
/usr/include/math.h:819: previous declaration of `gammal'
make[2]: *** [fft.o] Error 1
make[2]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src/appl'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src'
make: *** [R] Error 1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Mar  5 16:18:32 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 5 Mar 1999 17:18:32 +0100
Subject: IRIX problem `gammal' [Andreas Krause ... Re: splus shell escapes]
In-Reply-To: <87ogm7vs1w.fsf@alpha.cfas.washington.edu>
 (rossini@biostat.washington.edu)
References: <87ogm7vs1w.fsf@alpha.cfas.washington.edu>
Message-ID: <199903051618.RAA28833@sophie.ethz.ch>

>>>>> "tony" == A J Rossini <rossini@biostat.washington.edu> writes:


    tony> Anyone know what the problem is with IRIX 6.5 ?  (esp if there is
    tony> a solution?).  Looks like the built-in math stuff is masking
    tony> definitions from R source.

    tony> (passing this along for a friend).

    ....


    tony> # download
    tony> ./configure


    tony> R is now configured for mips-sgi-irix6.5

    tony> Source directory:         .
    tony> Installation directory:   /usr/local
    tony> C compiler:               gcc -g -O2
    tony> FORTRAN compiler:         f77 

    tony> make

    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/afm'
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/afm'
    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/demos'
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/demos'
    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/doc'
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/doc'
    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/etc'
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/etc'
    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/src'
    tony> make[2]: Entering directory
    tony> `/u/andreas/tmp/R/R-0.63.2/src/include' make[2]: Leaving
    tony> directory `/u/andreas/tmp/R/R-0.63.2/src/include' make[2]:
    tony> Entering directory `/u/andreas/tmp/R/R-0.63.2/src/appl'

    tony> gcc -g -O2 -I../include -I../../src/include  -c fft.c -o fft.o
    tony> In file included from fft.c:21:
    tony> ../include/Mathlib.h:255: conflicting types for `gammal'
    tony> /usr/include/math.h:819: previous declaration of `gammal'

Very funny.  

I wonder if Andreas really used an unaltered 0.63.2
There's no `gammal'  in   src/include/Mathlib.h (nor ./include/Mathlib.h)
especially not on line 255 where there's  qgamma(...)


    tony> make[2]: *** [fft.o] Error 1
    tony> make[2]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src/appl'
    tony> make[1]: *** [R] Error 1
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src'
    tony> make: *** [R] Error 1
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  5 16:29:25 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Mar 1999 17:29:25 +0100
Subject: IRIX problem `gammal' [Andreas Krause ... Re: splus shell escapes]
In-Reply-To: Martin Maechler's message of Fri, 5 Mar 1999 17:18:32 +0100
References: <87ogm7vs1w.fsf@alpha.cfas.washington.edu> <199903051618.RAA28833@sophie.ethz.ch>
Message-ID: <x2u2vzzyqi.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:


>     tony> In file included from fft.c:21:
>     tony> ../include/Mathlib.h:255: conflicting types for `gammal'
>     tony> /usr/include/math.h:819: previous declaration of `gammal'
> 
> Very funny.  
> 
> I wonder if Andreas really used an unaltered 0.63.2
> There's no `gammal'  in   src/include/Mathlib.h (nor ./include/Mathlib.h)
> especially not on line 255 where there's  qgamma(...)

We've been having "fun" with *gamma stuff before (conflicts on SunOS,
remember?). It's possible that IRIX has a macro defining qgamma to be
gammal, in which case an "#undef qgamma" in Mathlib.h might do the
trick.  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Krause@genedata.com  Fri Mar  5 16:54:14 1999
From: Andreas.Krause@genedata.com (Andreas Krause)
Date: Fri, 05 Mar 1999 17:54:14 +0100
Subject: IRIX problem `gammal' [Andreas Krause ... Re: splus shell escapes]
References: <87ogm7vs1w.fsf@alpha.cfas.washington.edu> <199903051618.RAA28833@sophie.ethz.ch> <x2u2vzzyqi.fsf@blueberry.kubism.ku.dk>
Message-ID: <36E00C36.FF64C16@genedata.com>

Hi. 

Peter Dalgaard BSA wrote:

> It's possible that IRIX has a macro defining qgamma to be
> gammal, in which case an "#undef qgamma" in Mathlib.h might do the
> trick.

The suspicion is right. 
Here is an excerpt from /usr/include/math.h:

extern double   gamma(double);
extern double   lgamma(double); 

...

#if _XOPEN4 && _NO_ANSIMODE
#define qgamma  gammal
#define qlgamma lgammal
#define qsigngam signgaml

extern long double gammal( long double );

extern long double lgammal( long double );
#endif

------------

Modifying src/include/Mathlib.h to

        /* Gamma and Related Functions */

#undef qgamma  

does the job indeed. Thanks, Peter!

...
However, for the sake of completeness, there's another problem on Irix:
f77  -fpic -c bsplvd.f -o bsplvd.o
f77 ERROR parsing -fpic:  unknown flag
make[4]: *** [bsplvd.o] Error 2

Outcommenting in configure 
if test "${CC}" = gcc; then
  cpicflags=-fpic
fi

does the job. Thanks again!


         andreas
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From naras@stat.Stanford.EDU  Fri Mar  5 17:33:23 1999
From: naras@stat.Stanford.EDU (Balasubramanian Narasimhan)
Date: Fri, 05 Mar 1999 09:33:23 -0800 (PST)
Subject: [Andreas Krause <Andreas.Krause@genedata.com>] Re: splus shell escapes
In-Reply-To: Your message of "05 Mar 1999 08:07:23 -0800"
 <87ogm7vs1w.fsf@alpha.cfas.washington.edu>
References: <87ogm7vs1w.fsf@alpha.cfas.washington.edu>
Message-ID: <19990305093323L.naras@stat.Stanford.EDU>

>>>>> "Tony" == A J Rossini <rossini@biostat.washington.edu> writes:

    Tony> Anyone  know what the  problem is with  IRIX 6.5 ?   (esp if
    Tony> there is  a solution?).  Looks like the  built-in math stuff
    Tony> is masking definitions from R source.

    Tony>   Source directory:  .  Installation directory: /usr/local C
    Tony> compiler: gcc -g -O2 FORTRAN compiler: f77

    Tony>        make        make[1]:        Entering        directory
    Tony>  `/u/andreas/tmp/R/R-0.63.2/afm' make[1]:  Leaving directory
    Tony> `/u/andreas/tmp/R/R-0.63.2/afm'  make[1]: Entering directory
    Tony> `/u/andreas/tmp/R/R-0.63.2/demos' make[1]: Leaving directory
    Tony>    `/u/andreas/tmp/R/R-0.63.2/demos'    make[1]:    Entering
    Tony>  directory `/u/andreas/tmp/R/R-0.63.2/doc'  make[1]: Leaving
    Tony> directory  `/u/andreas/tmp/R/R-0.63.2/doc' make[1]: Entering
    Tony>  directory `/u/andreas/tmp/R/R-0.63.2/etc'  make[1]: Leaving
    Tony> directory  `/u/andreas/tmp/R/R-0.63.2/etc' make[1]: Entering
    Tony> directory  `/u/andreas/tmp/R/R-0.63.2/src' make[2]: Entering
    Tony>  directory  `/u/andreas/tmp/R/R-0.63.2/src/include' make[2]:
    Tony>  Leaving  directory  `/u/andreas/tmp/R/R-0.63.2/src/include'
    Tony>            make[2]:            Entering            directory
    Tony> `/u/andreas/tmp/R/R-0.63.2/src/appl' gcc -g -O2 -I../include
    Tony> -I../../src/include -c fft.c  -o fft.o In file included from
    Tony>  fft.c:21: ../include/Mathlib.h:255:  conflicting  types for
    Tony>  `gammal' /usr/include/math.h:819:  previous  declaration of
    Tony>  `gammal'  make[2]: ***  [fft.o]  Error  1 make[2]:  Leaving
    Tony> directory  `/u/andreas/tmp/R/R-0.63.2/src/appl' make[1]: ***
    Tony>     [R]    Error     1     make[1]:    Leaving     directory
    Tony> `/u/andreas/tmp/R/R-0.63.2/src' make: *** [R] Error 1

Ah! This is one I have run into. 

SGI has  its own  version of  the log-gamma in  the math  library that
causes  a  number of  problems  with  dynamic  loading including  with
xlispstat. One easy way to get  around this is to #ifdef the part that
defines gammal in the R includes to tide things over.

I  once  had  an  exchange  with  Luke about  this  situation  on  the
SGI. Which is why xls defines it log gamma function to be mygamma! 

________________________________________________________________
B. Narasimhan                            naras@stat.stanford.edu
                             http://www-stat.stanford.edu/~naras





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sat Mar  6 00:12:12 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 05 Mar 1999 18:12:12 -0600
Subject: Difficulties with egcs-1.0.3 on RedHat 5.2?
Message-ID: <6rogm7h3xf.fsf@verdi.stat.wisc.edu>

Some machines in our department use RedHat 5.2 Linux but, to maintain
consistency with other machines, the compilers as from egcs-1.0.3, as
shown below.  When I compile R-0.63.3 on these systems I can't pass
the tests in "make check".  The base-Ex.R file stops execution with
the error shown below.
 ...
 Running all help() examples ...
 ../../bin/R --vanilla < base-Ex.R > base-Ex.Rout
 make[2]: *** [base-Ex.Rout] Error 139
 make[2]: Leaving directory `/afs/cs.wisc.edu/unsup/R-0.63.3/src/R-0.63.3/tests/Examples'
 make[1]: *** [test-Examples] Error 2
 make[1]: Leaving directory `/afs/cs.wisc.edu/unsup/R-0.63.3/src/R-0.63.3/tests'
 make: [test-All] Error 2 (ignored)
 gstat03(26)% gcc -v
 Reading specs from /s/egcs-1.0.3a/i386_linux22/lib/gcc-lib/i386-redhat-linux/pgcc-2.90.29/specs
 gcc version pgcc-2.90.29 980515 (egcs-1.0.3 release)
 gstat03(27)% g77 -v
 Reading specs from /s/egcs-1.0.3a/i386_linux22/lib/gcc-lib/i386-redhat-linux/pgcc-2.90.29/specs
 gcc version pgcc-2.90.29 980515 (egcs-1.0.3 release)

The last part of base-Ex.Rout is
 > ###--- >>> `FDist' <<<----- The F Distribution
 > 
 > 	## alias	 help(df)
 > 	## alias	 help(pf)
 > 	## alias	 help(qf)
 > 	## alias	 help(rf)
 > 
 > ##___ Examples ___:
 > 
 > df(1,1,1) == dt(1,1)# TRUE
 [1] TRUE

This does not seem to happen on other Linux machines with other C and
Fortran compilers but it does happen on a Solaris 2.6 for Intel
machine with the same compilers.

Is this a known problem with egcs-1.0.3?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar  6 00:26:58 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 1999 01:26:58 +0100
Subject: Difficulties with egcs-1.0.3 on RedHat 5.2?
In-Reply-To: Douglas Bates's message of 05 Mar 1999 18:12:12 -0600
References: <6rogm7h3xf.fsf@verdi.stat.wisc.edu>
Message-ID: <x21zj3mpil.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> Some machines in our department use RedHat 5.2 Linux but, to maintain
> consistency with other machines, the compilers as from egcs-1.0.3, as
> shown below.  When I compile R-0.63.3 on these systems I can't pass
> the tests in "make check".  The base-Ex.R file stops execution with
> the error shown below.
>  ...
... 
> This does not seem to happen on other Linux machines with other C and
> Fortran compilers but it does happen on a Solaris 2.6 for Intel
> machine with the same compilers.
> 
> Is this a known problem with egcs-1.0.3?

Yes, (only I thought it was in 1.0.2...). I reported it some months
ago. It's a register allocation foulup in the compiler, showing up
when inlining is used. If you *really* want me to, I can dig up the
reference...

Goes away if you compile without optimisation. Unless my memory fails
me, qbeta.c is the culprit, and you can get away with just recompiling
that one without -O. It's gone away in egcs 1.1.0, but that is a bit
of a massive download for the modem crowd.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar  6 00:43:30 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 1999 01:43:30 +0100
Subject: Difficulties with egcs-1.0.3 on RedHat 5.2?
In-Reply-To: Peter Dalgaard BSA's message of 06 Mar 1999 01:26:58 +0100
References: <6rogm7h3xf.fsf@verdi.stat.wisc.edu> <x21zj3mpil.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2zp5rla6l.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes

> If you *really* want me to, I can dig up the
> reference...

Aw, what the heck...

To: r-devel@stat.math.ethz.ch
Subject: EGCS optimizer bug?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Oct 1998 23:21:26 +0100
Message-ID: <x2r9vwl1uh.fsf@blueberry.kubism.ku.dk>
X-Mailer: Gnus v5.5/Emacs 20.2
Lines: 47
Xref: blueberry.kubism.ku.dk misc-mail:2857
X-Gnus-Article-Number: 2857   Sun Oct 25 23:21:34 1998


The current development version dies in qbeta() when compiled with
egcs -O, egcs 1.0.2 and glibc 2.0.7 (RedHat versions). Since this also
kill the F and t distributions, it doesn't exactly do wonders for R's
usefulness...

Anyone else seeing this or has my setup just gone out of whack? It
does look pretty much like a clear compiler bug when inlining math
functions (storing temporaries offset from %ebx, but no setting of
%ebx register to anything useful...)

The following paraphrase on R's qbeta.c appears to be a close to
minimal example of the problem (no, it doesn't do anything useful, and
there are several obvious things wrong with it, but it displays the
%ebx problem, if you look at the generated code):

#include <math.h>

double lbeta(){}

double qbeta(double alpha, double p, double q)
{
        double t,r, logbeta;
        volatile double xinbta;

        logbeta = lbeta(p, q);

        if (p<1) 
                t = r * pow(t, 3.);
        return xinbta;
}

main(){qbeta(.5,.5,.5);}

[pd@butterfly sandbox]$ egcs -O qbeta.c -lm
[pd@butterfly sandbox]$ ./a.out
Segmentation fault (core dumped)
[pd@butterfly sandbox]$ egcs qbeta.c -lm
[pd@butterfly sandbox]$ ./a.out


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Sat Mar  6 05:36:44 1999
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Fri, 5 Mar 1999 21:36:44 -0800 (PST)
Subject: bessel_?.c constants
Message-ID: <Pine.LNX.4.04.9903052116420.18761-100000@localhost>


Hi All,

I've been digging around in src/nmath and have discovered that there are
two sets of "machine constants" in bessel_l.c and bessel_j.c which have
different values:

bessel_i.c:    static double ensig = 1e16;
bessel_i.c:    static double rtnsig = 1e-4;
bessel_i.c:    static double enmten = 8.9e-308;
bessel_i.c:    static double enten = 1e308;

bessel_j.c:    static double ensig = 1e17;
bessel_j.c:    static double rtnsig = 1e-4;
bessel_j.c:    static double enmten = 1.2e-37;
bessel_j.c:    static double enten = 1e38;

According to the comments heading the files, the first set is correct for
IEEE Double-Precision hardware (the comments give the same values for
these parameters in each file):


         Approximate values for some important machines are:
    
    			    it	  NSIG	  ENTEN	      ENSIG
      [...]    
      IEEE (IBM/XT,
      SUN, etc.) (D.P.)	    53	   16	 1.0D+308    1.0D+16
      [...]

    			   RTNSIG      ENMTEN	   XLARGE
      [...]   
      IEEE (IBM/XT,
      SUN, etc.) (D.P.)	   1.0E-4    8.90D-308	  1.0D+4
      [...]

Is there some reason for using different values in bessel_j.c than in
bessel_l.c?  Or is this just a bug? ;^)

-Greg

PS:  Where is DBL_EPSILON defined, and what is its value?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Sat Mar  6 20:11:18 1999
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Sat, 6 Mar 1999 12:11:18 -0800 (PST)
Subject: bessel_?.c constants (fwd)
Message-ID: <Pine.LNX.4.04.9903061210030.20307-100000@localhost>


This doesn't seem to have made it to the list, so here it is again.  Sorry
if this results in duplicates.

---------- Forwarded message ----------
Date: Fri, 5 Mar 1999 21:36:44 -0800 (PST)
From: Gregory R. Warnes <warnes@biostat.washington.edu>
To: R devel <r-devel@stat.math.ethz.ch>
Subject: bessel_?.c constants


Hi All,

I've been digging around in src/nmath and have discovered that there are
two sets of "machine constants" in bessel_l.c and bessel_j.c which have
different values:

bessel_i.c:    static double ensig = 1e16;
bessel_i.c:    static double rtnsig = 1e-4;
bessel_i.c:    static double enmten = 8.9e-308;
bessel_i.c:    static double enten = 1e308;

bessel_j.c:    static double ensig = 1e17;
bessel_j.c:    static double rtnsig = 1e-4;
bessel_j.c:    static double enmten = 1.2e-37;
bessel_j.c:    static double enten = 1e38;

According to the comments heading the files, the first set is correct for
IEEE Double-Precision hardware (the comments give the same values for
these parameters in each file):


         Approximate values for some important machines are:
    
    			    it	  NSIG	  ENTEN	      ENSIG
      [...]    
      IEEE (IBM/XT,
      SUN, etc.) (D.P.)	    53	   16	 1.0D+308    1.0D+16
      [...]

    			   RTNSIG      ENMTEN	   XLARGE
      [...]   
      IEEE (IBM/XT,
      SUN, etc.) (D.P.)	   1.0E-4    8.90D-308	  1.0D+4
      [...]

Is there some reason for using different values in bessel_j.c than in
bessel_l.c?  Or is this just a bug? ;^)

-Greg

PS:  Where is DBL_EPSILON defined, and what is its value?




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar  7 14:02:10 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 1999 15:02:10 +0100
Subject: bessel_?.c constants (fwd)
In-Reply-To: "Gregory R. Warnes"'s message of Sat, 6 Mar 1999 12:11:18 -0800 (PST)
References: <Pine.LNX.4.04.9903061210030.20307-100000@localhost>
Message-ID: <x2vhgd1jq5.fsf@blueberry.kubism.ku.dk>

"Gregory R. Warnes" <warnes@biostat.washington.edu> writes:

> This doesn't seem to have made it to the list, so here it is again.  Sorry
> if this results in duplicates.

It did...

> PS:  Where is DBL_EPSILON defined, and what is its value?

In the compiler libs, here:

/usr/lib/gcc-lib/i386-redhat-linux/2.7.2.3/include/float.h:
#define DBL_EPSILON 2.2204460492503131e-16


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman.buyukisik@ae.ge.com  Mon Mar  8 17:44:44 1999
From: osman.buyukisik@ae.ge.com (U-E59264-Osman F Buyukisik)
Date: Mon,  8 Mar 1999 12:44:44 -0500 (EST)
Subject: March7th R-devel,hpux10.20,egcs-2.93.03 19990124
Message-ID: <14052.2244.122214.792342@c1186.ae.ge.com>

Hello,
 I just got the latest (March7) tarball from CRAN. 

1).It looks like ".so" 
is still hardwired in the source code. in src/main/platform.h all
"Unix" systems get the ".so" extention. I had to #ifdef hpux and add
".sl". 

2). It picks up readline but history is still inside the comments in
src/include/Platform.h, I had to manually change this in order to get
readline history.

3). Now it builds and installs OK. 

4). library(help = eda) gets me

  Error: No documentation for package `eda'

This seems to be happening because system.file("INDEX", help, lib.loc) 
in library returning NULL. debugging system.file show that
 present <- file.exists(FILES)
gets FALSE. FILES=
"/home/absd00t/local/lib/R/library/eda/INDEX//home/absd00t/local/lib/R/library"
if just execute
file.exists("/home/absd00t/local/lib/R/library/eda/INDEX") 
then it returns TRUE. (I know the help files and INDEX are all out
there). Any idea why this library overall help is not working? Help on 
idividual items is working OK. So are the dynamically loaded libs.
system.file function seems to be different than in 0.63.1. 

Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Mar  8 18:20:19 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 8 Mar 1999 18:20:19 +0000 (GMT)
Subject: March7th R-devel,hpux10.20,egcs-2.93.03 19990124
Message-ID: <199903081820.SAA23875@toucan.stats.ox.ac.uk>


> From: U-E59264-Osman F Buyukisik <absd00t@c1186.ae.ge.com>
> Date: Mon,  8 Mar 1999 12:44:44 -0500 (EST)
> To: r-devel@stat.math.ethz.ch
> Subject: March7th R-devel,hpux10.20,egcs-2.93.03 19990124
> 
> Hello,
>  I just got the latest (March7) tarball from CRAN. 

That is a snapshot: we are working on the `platform independent'
code right now.  Please be patient: snapshots can be unstable.

> 1).It looks like ".so" 
> is still hardwired in the source code. in src/main/platform.h all
> "Unix" systems get the ".so" extention. I had to #ifdef hpux and add
> ".sl". 

Rather, it is hardwired again.

> 4). library(help = eda) gets me
> 
>   Error: No documentation for package `eda'
> 
> This seems to be happening because system.file("INDEX", help, lib.loc) 

That was an incorrect call in 0.64. It needs named arguments:

        file <- system.file("INDEX", pkg = help, lib = lib.loc)

> in library returning NULL. debugging system.file show that
>  present <- file.exists(FILES)
> gets FALSE. FILES=
> 
"/home/absd00t/local/lib/R/library/eda/INDEX//home/absd00t/local/lib/R/library"
> if just execute
> file.exists("/home/absd00t/local/lib/R/library/eda/INDEX") 
> then it returns TRUE. (I know the help files and INDEX are all out
> there). Any idea why this library overall help is not working? Help on 
> idividual items is working OK. So are the dynamically loaded libs.
> system.file function seems to be different than in 0.63.1. 

Yes. Basically the new system.file() did not work as documented: it now
does AFAIK but I have been tracking down all the incorrect uses, and got this
one a few hours ago. From the current state:

> library(help = eda)
line            Robust Line Fitting
medpolish       Median polish
smooth          Median smoothing




-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar  9 09:33:44 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 9 Mar 1999 10:33:44 +0100
Subject: example(.) partly broken (since 0.63.3) --> patch (PR#134)
Message-ID: <199903090933.KAA05227@biostat.ku.dk>

(I don't have time just now to diagnose & fix..)

In R 0.63.3  [both on Solaris and Linux]

    > example(outer)
    Error: Couldn't find 'outer' example

whereas this worked in 0.63.2.

NON-exhaustive `research' [i.e. small sample out of about 1000]:
 o examples that stopped working (in 0.63.3 and did before)
	
	kronecker, outer, vector, Im

 o Examples working
 
	.Alias, "%in%", lm, glm, lsfit, unix, Re, ... (most?)

It really is the  'AnIndex' file which is broken, 
either because of incorrect syntax in changed  *.Rd files
or    because the AnIndex building scripts are broken or not robust enough..

My "AnIndex" (i.e.  RINSTALL/library/base/help/AnIndex)
has line 482
-----------------------------
glm summaries	glm.summaries
-----------------------------
which then is  scan()ed as 3 character strings instead of 2, and then
everything following is mixed up......

Other (not necessarily all) such bad lines are
-----------------------------
lm summaries	lm.summaries
nrow, ncol	nrow
QR Auxiliaries	qraux
-----------------------------



However, it seems sufficient [for example() at least]
to patch its source by using  scan("..../AnIndex" ..) with sep = "\t" :

--- src/library/base/R/source.R.~1~	Wed Dec  2 11:39:22 1998
+++ src/library/base/R/source.R	Tue Mar  9 10:27:38 1999
@@ -122,7 +122,7 @@
             AnIndexF <- system.file(paste("help","AnIndex",sep=directory.sep),
                                     pkg, lib)
             if(AnIndexF != "") {
-                AnIndex <- scan(AnIndexF,what=c("c","c"),quiet=TRUE)
+                AnIndex <- scan(AnIndexF,what=c("c","c"),sep="\t",quiet=TRUE)
                 i <- match(topic,AnIndex[seq(1,length(AnIndex),2)],-1)
                 if(i != -1)	 
                     file <- system.file(paste("R-ex",directory.sep,AnIndex[2*i],

	
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar  9 09:47:26 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 9 Mar 1999 10:47:26 +0100
Subject: example(.) partly broken (since 0.63.3) --> patch (PR#134)
Message-ID: <199903090947.KAA05234@biostat.ku.dk>

I think one should also apply the following patch  
in order to get the HTML indices right.. when AnIndex is allowed to contain
spaces " " in addition to the separating "\t" :

--- etc/buildlib.pl.~1~	Wed Mar  3 17:35:42 1999
+++ etc/buildlib.pl	Tue Mar  9 10:41:15 1999
@@ -168,7 +168,7 @@
 		if(-r "$lib/$pkg/help/AnIndex"){
 		    open ranindex, "< $lib/$pkg/help/AnIndex";
 		    while(<ranindex>){
-			/^(\S*)\s*\t(.*)/;
+			/^([^\t]*)\s*\t(.*)/;
 			$htmlindex{$1} = "$pkg/html/$2.$HTML";
 		    }
 		    close ranindex;
@@ -195,7 +195,7 @@
 		if(-r "$lib/$pkg/help/AnIndex"){
 		    open ranindex, "< $lib/$pkg/help/AnIndex";
 		    while(<ranindex>){
-			/^(\S*)\s*\t(.*)/;
+			/^([^\t]*)\s*\t(.*)/;
 			$anindex{$1} = $2;
 		    }
 		    close ranindex;


----------------------
((and yes, I *did* diagnose and fix most of the problem in spite of
  my introductory remark in the last message...))

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fears@roycastle.liv.ac.uk  Tue Mar  9 13:20:59 1999
From: fears@roycastle.liv.ac.uk (fears@roycastle.liv.ac.uk)
Date: Tue, 9 Mar 1999 14:20:59 +0100
Subject: summary() of lm() problem (PR#135)
Message-ID: <199903091320.OAA05357@biostat.ku.dk>

Debuggers,

I wrote to r-help about this and was appropriately told off by Peter
Dalgaard. I append that mail in case you have not seen it.

Following Peter's advice I have attempted to simplify the problem.

First note that the following does *not* fail (by which I mean crash, as
in generate a memory access violation):

> tmp<-matrix(c(1,0,0,1,1,1),2,3)
> dimnames(tmp)<-list(NULL,c('yvar','x1','x2'))
> lm(tmp[,'yvar']~tmp[,'x1']+tmp[,'x2'])
> summary(.Last.value)

I tried to cut down my original data set to just the first ten rows to
make it manageable to transmit. Of course then when I ran lm() there
were NA estimates. Thus I wasn't totally surprised that summary() would
have trouble. But, unlike the above, it crashes fatally.

Thinking to reproduce this very simply, I used (sorry quick and dirty, I
know there's a way to use paste to give the model formula):

> tmp<-matrix(c(1,0,0,1,rep(1,56)),2,30)
> dimnames(tmp)<-list(NULL,paste('x',1:30,sep=''))
> lm(tmp[, "x1"] ~ tmp[, "x2"] + tmp[, "x3"] + tmp[,     "x4"] + tmp[,
"x4"] + tmp[, "x5"] + tmp[, "x6"] + tmp[, "x7"] +     tmp[, "x8"] +
tmp[, "x9"] + tmp[, "x10"] + tmp[, "x11"] +     tmp[, "x12"] + tmp[,
"x13"] + tmp[, "x14"] + tmp[, "x15"] +     tmp[, "x16"] + tmp[, "x17"] +
tmp[, "x18"] + tmp[, "x19"] +     tmp[, "x20"]+tmp[, "x21"]+tmp[,
"x22"]+tmp[, "x23"]+tmp[, "x24"]+tmp[, "x25"]+tmp[, "x26"]+tmp[,
"x27"]+tmp[, "x28"]+tmp[, "x29"]+tmp[, "x30"])
> summary(.Last.value)

But this has no problem. So it doesn't seem to be singularity of X or
the length of the model formula at fault (my problem data has 27
variables).

What follows now is what *does* give a fault. The data (in sasch2) is
truncated to just the first 10 rows. I made it so the modified dataset
is called sasch2 so that I could cut and paste the exact same lm() call:

> tmp<-sasch2[1:10,]
> holdsasch2<-sasch2
> sasch2<-tmp
> dump('sasch2','bugs.dump')
> lm(sasch2[, "ddiff"] ~ sasch2[, "td30"] + sasch2[,     "td60"] +
sasch2[, "td90"] + sasch2[, 
+ "td120"] + +sasch2[,     "td180"] + sasch2[, "td240"] + sasch2[,
"td300"] + sasch2[,     "td360"] + 
+ sasch2[, "td420"] + sasch2[, "td480"] + sasch2[,     "db1"] + sasch2[,
"db1.5"] + sasch2[, "db2"] + 
+ sasch2[, "db2.5"] +     +sasch2[, "db3.5"] + sasch2[, "db4"] +
sasch2[, "db4.5"] +     sasch2[, "db5"] + 
+ sasch2[, "db5.5"] + +sasch2[, "db6"] +     sasch2[, "db6.5"] +
sasch2[, "db7"] + sasch2[, "db7.5"] +     
+ sasch2[, "db8"] + +sasch2[, "db8.5"] + sasch2[, "db9"] +     sasch2[,
"db9.5"])
> summary(.Last.value)

Dr Watson tells me the access violation is 0xc0000005 at address
0x2020200 (whatever that means; I last used machine code on a PDP 8).

The data as dumped now follows (though it is anonymised, please continue
to treat the data as confidential). After that is my original report to
r-help.

I'd be very happy to provide any other info you might need to know. PD
suggested running on Unix but my version there is hopelessly out of date
since I started using NT. I hope I've given you enough here to try it
for yourself on the latest unix version without too much bother.

"sasch2" <-
structure(c(1, 1, 1, 2, 2, 3, 4, 5, 5, 6, 3, 2, 0.5, 0, 2, 4, 
6, 1.5, 6, 5, 225, 175, 180, 255, 140, 140, 236, 315, 90, 190, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 
0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 2, 5, 7, 3, 3, 5, 4, 2.5, 4, 3, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 
0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 611231, 611231, 611231, 611041, 611041, 
611553, 605829, 604881, 604881, 612966, 4, 4, 4, 4, 4, 4, 3, 
3, 3, 2, 25, 25, 25, 29, 29, 29, 31, 28, 28, 18, 289, 289, 289, 
279, 279, 289, 296, 268, 268, 281, 1, 1, 1, 2, 2, 2, 2, 1, 1, 
1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
655, 655, 655, 780, 780, 180, 347, 295, 295, 240, 1, 1, 1, 1, 
1, 0, 0, 0, 0, 0, 1, 1, 1, 2, 2, 0, 0, 0, 0, 0, 1, 1, 1, 2, 2, 
0, 0, 0, 0, 0, 5, 5, 5, 4, 4, 4, 4, 1, 1, 1, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 2, 2, 2, 3, 3, 1, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4, 4, 5, 5, 3, 4, 3, 3, 
2, 234, 234, 234, 24, 24, 12, 17, 127, 127, 27, 1, 1, 1, 1, 1, 
3, 3, 1, 1, 1, 2, 2, 2, 2, 2, 4, 4, 2, 2, 0, 300, 300, 300, 100, 
100, 200, 500, 200, 200, 400, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 
1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 809782, 
809782, 809782, 809790, 809790, 809797, 809813, 809832, 809832, 
809840, 3600, 3600, 3600, 3740, 3740, 3280, 3090, 3100, 3100, 
4110, 4, 4, 4, 9, 9, 9, 9, 10, 10, 9, 9, 9, 9, 10, 10, 10, 9, 
10, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7.38, 7.38, 7.38, 7.34, 
7.34, 7.27, 7.33, 7.3, 7.3, 7.29, NA, NA, NA, -3.4, -3.4, -5.8, 
-6.4, -2, -2, -7.2, 2, 2, 2, 3, 3, 5, 4, 2.5, 2.5, 3, 225, 225, 
225, 255, 255, 140, 236, 315, 315, 190, 5, 5, 5, 3, 3, 9, 10, 
4, 4, 8, 400, 400, 400, 395, 395, NA, NA, 405, 405, 210, 7, 7, 
7, 5, 5, NA, NA, 10, 10, 10, 580, 580, 580, NA, NA, NA, NA, NA, 
NA, NA, 7.5, 7.5, 7.5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
315, 315, 190, NA, NA, NA, NA, NA, NA, NA, 4, 4, 8, 440, 440, 
440, 390, 390, NA, NA, NA, NA, NA, NA, NA, NA, 3, 3, NA, NA, 
NA, NA, NA), .Dim = c(10, 83), .Dimnames = list(NULL, c("pxid", 
"ddiff", "tdiff", "td30", "td60", "td90", "td120", "td180", "td240", 
"td300", "td360", "td420", "td480", "td2000", "dbase", "db1", 
"db1.5", "db2", "db2.5", "db3", "db3.5", "db4", "db4.5", "db5", 
"db5.5", "db6", "db6.5", "db7", "db7.5", "db8", "db8.5", "db9", 
"db9.5", "lwh.num", "partogram", "age", "gestation", "cervix", 
"effaced", "membranes", "rd.interval", "action.line", "synto", 
"synto.time", "rom", "blood", "ctg", "fbs", "fbs.no", "iupc", 
"amnioinf", "ves", "anaesth", "delivery.mode", "perineum", "blood.loss",

"transfus", "drugs", "retained.pl", "baby.no", "weight", "apgar1", 
"apgar5", "scbu", "ph.ven", "be.ven", "dilat1", "time2", "dilat2", 
"time3", "dilat3", "time4", "dilat4", "time5", "dilat5", "time6", 
"dilat6", "time7", "dilat7", "srom.time", "srom.dilat", "epi.time", 
"epi.dilat")))


************************************************************************

Under NT 4.0, using Version 0.63.2 Beta (Jan 12, 1999):

Not sure if this is a bug or a feature (forcing me to program less
clumsily) so I'll report it here rather than to bugs.

With a medium size data set (1700 observations,70 explanatory variables)
and plenty of memory, specifically

> gc()
          free   total
Ncells  886738 1000000
Vcells 7912909 8388608

I get a fatal error when attempting summary() on the fit of an lm() on a
large-ish set of dummy variables (stored in a matrix):

Call:
lm(formula = sasch2[, "ddiff"] ~ sasch2[, "td30"] + sasch2[,     "td60"]
+ sasch2[, "td90"] + sasch2[,  "td120"] + +sasch2[,     "td180"] +
sasch2[, "td240"] + sasch2[, "td300"] + sasch2[,     "td360"] +
sasch2[, "td420"] + sasch2[, "td480"] + sasch2[,     "db1"] + sasch2[,
"db1.5"] + sasch2[, "db2"] +  sasch2[, "db2.5"] +     +sasch2[, "db3.5"]
+ sasch2[, "db4"] + sasch2[, "db4.5"] +     sasch2[, "db5"] +  sasch2[,
"db5.5"] + +sasch2[, "db6"] +     sasch2[, "db6.5"] + sasch2[, "db7"] +
sasch2[, "db7.5"] +      sasch2[, "db8"] + +sasch2[, "db8.5"] + sasch2[,
"db9"] +     sasch2[, "db9.5"])

I get estimates OK, but summary() collapses. However, if I do the same
thing less clumsily, by writing all the relevant variables to a new data
frame, and then calling

Call:
lm(formula = ddiff ~ ., data = dtmp)

I get not only the estimates but can also summary() with no problem.

Any ideas why? Seems to be memory-linked, because I can lm() and
summary() the matrix versions using only the sasch2[,'td*'] or db*
variable sets.

Simon Fear

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  9 13:31:15 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 9 Mar 1999 14:31:15 +0100
Subject: Bug in lm.wfit with zero weights in 0.63.3 (PR#136)
Message-ID: <199903091331.OAA05363@biostat.ku.dk>

R 0.63.3 (any platform)

library(lqs)
example(lqs)

gives

Warning in (y - z$residuals) + offset : longer object length
        is not a multiple of shorter object length

repeatedly. The problem is in lm.wfit, which removes cases with
zero weights, but does not adjust the offset.  The fix is

    z$fitted.values <- (y - z$residuals)
    z$weights <- w
    if (zero.weights) {
	coef[is.na(coef)] <- 0
	f0 <- x0 %*% coef
	if (ny > 1) {
	    save.r[ok, ] <- z$residuals
	    save.r[nok, ] <- y0 - f0
	    save.f[ok, ] <- z$fitted.values + offset[ok,]
	    save.f[nok, ] <- f0 + offset[nok,]
	}
	else {
	    save.r[ok] <- z$residuals
	    save.r[nok] <- y0 - f0
	    save.f[ok] <- z$fitted.values + offset[ok]
	    save.f[nok] <- f0 + offset[nok]
	}
	z$residuals <- save.r
	z$fitted.values <- save.f
	z$weights <- save.w
    } else 
      z$fitted.values <- z$fitted.values + offset
      
The only examples affected are those with a non-zero offset and zero
weights:  these will have incorrect fitted values.

I've commited this for 0.64.0.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Tue Mar  9 20:27:22 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Tue, 9 Mar 1999 21:27:22 +0100
Subject: summary() of lm() problem (PR#135)
In-Reply-To: <199903091320.OAA05357@biostat.ku.dk>; from fears@roycastle.liv.ac.uk on Tue, Mar 09, 1999 at 02:20:59PM +0100
References: <199903091320.OAA05357@biostat.ku.dk>
Message-ID: <19990309212722.61761@hal.stat.unipd.it>

On Tue, Mar 09, 1999 at 02:20:59PM +0100, fears@roycastle.liv.ac.uk wrote:
> .......................................................................
Dear Simon,
I have just now tried your example. My temptative conclusion is that
it is due to problem described in r-bugs in message with id 101; 
in short: when the R console is a windowed one (surely under Windows,
but I suspect also under the Mac) printing makes use of a
buffer with a fixed and hard-coded length.

Indeed: (i) I got a segmentation fault using rw0632; (ii) all
work without problem in my pre-release rw0633 where problem
has been 'cured' simply by enlarging the buffer (of course,
this WILL not been the definitive solution) but (iii) I got
a segmentation fault also in rw0633 if I reset the length of the
buffer to the R-0.63.2 one.

We hope to make available rw0633 towards the end of the
week. Brian Ripley and I have introduced a lot of Windows
specific changes and this is the reason of the delay.

guido





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Tue Mar  9 20:54:24 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Tue, 9 Mar 1999 21:54:24 +0100
Subject: summary() of lm() problem (PR#135)
In-Reply-To: <B7F24F2B48ACD11196F600805FC7F430062AA0@pdc.rc.liv.ac.uk>; from Simon Fear on Tue, Mar 09, 1999 at 08:36:18PM -0000
References: <B7F24F2B48ACD11196F600805FC7F430062AA0@pdc.rc.liv.ac.uk>
Message-ID: <19990309215424.57159@hal.stat.unipd.it>

On Tue, Mar 09, 1999 at 08:36:18PM -0000, Simon Fear wrote:
> Perhaps I might avoid wasting your time if I knew where to locate:
  Don't worry. Bugs report are vital for the entire project.

> 
> > My temptative conclusion is that
> > it is due to problem described in r-bugs in message with id 101
> 
> I haven't seen reference in the FAQ to an archive of bug reports? Have I
> just missed it?

  But, yes, there is an archive of bugs reports. From  CRAN
  main page (e.g., http://www.ci.tuwien.ac.at/R/contents.html)
  just follows the 'Bug tracking system' link.

  guido

  (ps: I am taking the freedom to post this replay to the 
       mailing list to remark the existence of the archive).
  
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From novo@uiuc.edu  Wed Mar 10 04:42:02 1999
From: novo@uiuc.edu (novo@uiuc.edu)
Date: Wed, 10 Mar 1999 05:42:02 +0100
Subject: funfits (PR#137)
Message-ID: <199903100442.FAA05782@biostat.ku.dk>

Hi,

I spotted an inconsistency between the output of funfits under R, more
specifically "nnreg", and the one obtained under S-plus. Notice the difference
in the "Root MSE", "GVC" and "GVC cost=2". As a check mark, I am also including
the data summaries, confirming that I was in fact using the same data set.
Here's my output from both systems:

============================================================
$ Splus -e
S-PLUS : Copyright (c) 1988, 1996 MathSoft, Inc.
S : Copyright AT&T.
Version 3.4 Release 1 for HP 9000 Series, HP-UX 9.0.5 : 1996
Working data will be in /mnt/cba-econ/novo/.Data

> nn.nl
Summary of outout from neural net fit
see the component summary in the output list for
more details of the fitting process
call to nnreg :
nnreg(x = inc, y = imp, k1 = 1, k2 = 7)
  # hidden units DF model DF residuals Root MSE   GCV GCV cost=2
1              1        4          296    		293.7   87400      89810
2              2        7          293    		236.9   57460      60310
3              3       10          290    		217.8   49090      52660
4              4       13          287    		213.4   47580      52200
5              5       16          284   		215.8   49200      55250
6              6       19          281    		210.7   47400      54530
7              7       22          278    		213.1   49000      57790

> summary(inc)
 Min. 1st Qu. Median Mean 3rd Qu. Max.
 1022    1926   3181 3312    4637 6152
> summary(imp)
  Min. 1st Qu. Median Mean 3rd Qu. Max.
 348.8   933.5   1932 1827    2483 5015
================================================================

================================================================
# using RedHat 5.1, Linux kernel 2.0.34
[anovo@gauss data]$ R

R : Copyright 1999, The R Development Core Team
Version 0.63.2  (January 12, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

[Previously saved workspace restored]

> summary(nn.nl)
Summary of outout from neural net fit
see the component summary in the output list for
more details of the fitting process
call to nnreg :
nnreg(x = inc, y = imp, k1 = 1, k2 = 7)
  # hidden units DF model DF residuals Root MSE   GCV GCV cost=2
1              1        4          296    		292.5   86690      89080
2              2        7          293    		236.6   57330      60170
3              3       10          290    		214.8   47750      51220
4              4       13          287    		210.0   46120      50600
5              5       16          284    		208.4   45890      51530
6              6       19          281    		204.8   44780      51510
7              7       22          278    		194.0   40590      47870

> summary(inc)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
   1022    1926    3181    3312    4637    6152
> summary(imp)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
  348.8   933.5  1932.0  1827.0  2483.0  5015.0
================================================================

Alvaro Novo

ps. The library under S-plus was provided to me by one of the original authors,
Barbara Bailey (attached her computer directory). So, I guess we are safe on
that ground.

	--      --      --      --      --      --      --      --     
                              Alvaro A. Novo
                        2116 S. Orchard St., #304
                             Urbana, IL 61801

                              novo@uiuc.edu
                        anovo@ysidro.econ.uiuc.edu
              http://www.students.uiuc.edu/~novo/Alvaro.htm
                              217-337-4893
	 --      --      --      --      --      --      --      --

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 10 06:29:47 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Mar 1999 07:29:47 +0100
Subject: funfits (PR#137)
Message-ID: <199903100629.HAA05792@biostat.ku.dk>

On Wed, 10 Mar 1999 novo@uiuc.edu wrote:

> Hi,
> 
> I spotted an inconsistency between the output of funfits under R, more
> specifically "nnreg", and the one obtained under S-plus. Notice the difference
> in the "Root MSE", "GVC" and "GVC cost=2". As a check mark, I am also including
> the data summaries, confirming that I was in fact using the same data set.
> Here's my output from both systems:

Yes, but does this problem have a unique solution?  Only rarely do neural
net fits not have multiple local optima. More specifically, on the basis of
the figures here it is the S-PLUS output that is wrong as the fits under R
are achieving lower minima. Note (I have not checked here) that often R is
working in double precision where S-PLUS uses floats (and this is Fortran
code, so this is likely).  In my own neural nets package, that did change
the answers using the same compiler and same version of S-PLUS: it is a
function of the ill-posed nature of the problem.  I also get different
answers with the same code and different compilers.

I do think that problems with a package should be taken up with the
author/porter:

auk% less DESCRIPTION 
Package: funfits
Version: 2.0-3
Author: S original by Doug Nychka <nychka@stat.ncsu.edu>
        R port by Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at>.

If you feel the need to file a report to R-bugs on a package, we do need an
example that we can reproduce and work on.  On the evidence so far I am
not convinced there is a bug here.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 10 10:11:22 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Mar 1999 11:11:22 +0100
Subject: funfits (PR#137)
In-Reply-To: ripley@stats.ox.ac.uk's message of Wed, 10 Mar 1999 07:29:47 +0100
References: <199903100629.HAA05792@biostat.ku.dk>
Message-ID: <x27lsp4pth.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> I do think that problems with a package should be taken up with the
> author/porter:
> 
> auk% less DESCRIPTION 
> Package: funfits
> Version: 2.0-3
> Author: S original by Doug Nychka <nychka@stat.ncsu.edu>
>         R port by Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at>.
> 
> If you feel the need to file a report to R-bugs on a package, we do need an
> example that we can reproduce and work on.  On the evidence so far I am
> not convinced there is a bug here.

I'll just add that there is a slot called "Packages" in the bug filing
system which holds reports that don't pertain to R itself. This is
partly intended as a service to package writers, partly to have a
place to file the reports, since there is no obvious way of keeping
people from sending them in...

I see nothing wrong in itself with discussing problems in packages on
R-devel, but it may be a bit futile if the package author/porter
isn't listening.

[Note: r-bugs stripped from Cc: list on this note]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Mar 10 16:23:40 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 10 Mar 1999 17:23:40 +0100
Subject: [R] bug? and New bug. (PR#138)
Message-ID: <199903101623.RAA06323@biostat.ku.dk>

>>>>> "Mai" == Mai Zhou <mai@ms.uky.edu> writes:

    Mai> A new bug.  In 0.63.0 (windows NT) and 0.63.2 (on the Rweb)

    >> pt(1.96,df=100)
    Mai> [1] 0.9736105 #this is OK
    >> pt(1.96, df=100000000000000000000)
    Mai> [1] 0.5 #clearly wrong

    Mai> and for df=1000000 it took way too long to compute

    Mai> same with the F-distribution function.

Oh dear!  this is an ``old one'' 
   (I had at one time fixed something similar, maybe qt() ?
    but never done/checked all these limit cases).

--- I look at it some more...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Mar 10 17:43:07 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 10 Mar 1999 18:43:07 +0100
Subject: [R] bug? and New bug. --- patch for pt() only (PR#138)
Message-ID: <199903101743.SAA06374@biostat.ku.dk>

The following patch saves  pt(), but not the  
pf() and pbeta() ones which are harder.. 
[pbeta(), the incomplete beta ratio is really underlying all these...
 needs another asymptotic formula, and it's even harder to decide 
 WHEN to switch from the (Taylor kind) series  to the asymptotic formula
]
This has to wait for a while, unless someone else....


BTW,  S-plus also fouls up completely here:

    df3 <- c(10^(3:20))
    ## completely wrong on S; taking forever on R
    plot(df3, ptd3 <- pt(1.96,df=df3), log='x', type='b')
    ptd3

giving

  [1]  9.748634e-01  9.749882e-01  9.750007e-01  9.750020e-01
  [5]  9.750021e-01  9.750021e-01  9.750021e-01  9.750023e-01
  [9]  9.750054e-01  9.750436e-01  9.748710e-01  9.725377e-01
 [13]  8.914032e-01 -4.261217e+06            NA            NA
 [17]            NA            NA

where the last before the NA's is  -426121.7  !! 


-----------------------
Here is the patch
---------------------------------------------------------------------

--- src/nmath/pt.c.~1~	Wed Feb  3 12:21:46 1999
+++ src/nmath/pt.c	Wed Mar 10 18:15:42 1999
@@ -41,6 +41,11 @@
     if(!finite(n))
 	return pnorm(x, 0.0, 1.0);
 #endif
+    if (n > 4e5) { /*-- Fixme(?): test should depend on `n' AND `x' ! */
+	/* Approx. from	 Abramowitz & Stegun 26.7.8 (p.949) */
+	val = 1./(4.*n);
+	return pnorm(x*(1. - val)/sqrt(1. + x*x*2.*val), 0.0, 1.0);
+    }
     val = 0.5 * pbeta(n / (n + x * x), n / 2.0, 0.5);
     return (x > 0.0) ? 1 - val : val;
 }

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar 10 18:19:09 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 10 Mar 1999 13:19:09 -0500
Subject: .Alias and memory
Message-ID: <99Mar10.134343est.13477@mailgate.bank-banque-canada.ca>

In an effort to encapsulate my dependence on class in order to deal with
oldclass/class in Splus  I defined the functions

   tfclass     <- class
  "tfclass<-" <- function(x, value){ class(x) <- value ; x }

and also the function

 classed <- function(x, cls) {class(x) <- cls; x}

This last allows me to end a function definition with
  ...
  classed(somecalc, "whatever") }

rather than
  ...
  obj <- somecalc
  class(obj) <- "whatever"
  obj }

Unfortunately, these seem to increase my memory usage in R substantially. Using

   tfclass      <- .Alias(class)
"tfclass<-" <- .Alias(get("class<-"))

helps a bit. Is there a better overall approach to this that avoids increasing
the memory demands?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Thu Mar 11 08:36:35 1999
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Thu, 11 Mar 1999 09:36:35 +0100
Subject: : for factors (PR#139)
Message-ID: <199903110836.JAA10063@biostat.ku.dk>


The following example from the help page does not work:

> f1_ gl(2,3); f1
> f2_ gl(3,2); f2
> f1:f2 # a factor, the ``cross''  f1 x f2

yields

Warning in f1:f2 : Numerical expression has 6 elements: only the first used
[1] 1

whereas R-0.61.2 yields

> f1:f2 # a factor, the ``cross''  f1 x f2
[1] 1:1 1:1 1:2 2:2 2:3 2:3

Note that the new behavior is consistent with S+ (but not with the
help page).

	Andreas


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = in progress
 status.rev = 0
 major = 0
 minor = 63.3
 year = 1999
 month = February
 day = 24
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Mar 11 09:37:53 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 11 Mar 1999 09:37:53 +0000 (GMT)
Subject: .Alias and memory
In-Reply-To: <99Mar10.134343est.13477@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.3.96.990311093259.12487F-100000@laplace>

Hi Paul,

On Wed, 10 Mar 1999, Paul Gilbert wrote:

> In an effort to encapsulate my dependence on class in order to deal with
> oldclass/class in Splus  I defined the functions

[ ... ]
 
> This last allows me to end a function definition with
>   ...
>   classed(somecalc, "whatever") }
> 
> rather than
>   ...
>   obj <- somecalc
>   class(obj) <- "whatever"
>   obj }

I may be missing the point, but it seems to me that you could achieve a
`one-line return' using

    structure(somecalc, class = "whatever")

which would also avoid passing somecalc into another function.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 11 10:11:06 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Mar 1999 11:11:06 +0100
Subject: : for factors (PR#139)
In-Reply-To: Andreas.Weingessel@ci.tuwien.ac.at's message of Thu, 11 Mar 1999 09:36:35 +0100
References: <199903110836.JAA10063@biostat.ku.dk>
Message-ID: <x2k8wo8hfp.fsf@blueberry.kubism.ku.dk>

Andreas.Weingessel@ci.tuwien.ac.at writes:

> Warning in f1:f2 : Numerical expression has 6 elements: only the first used
> [1] 1
> 
> whereas R-0.61.2 yields
> 
> > f1:f2 # a factor, the ``cross''  f1 x f2
> [1] 1:1 1:1 1:2 2:2 2:3 2:3

Same as PR#40...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar 11 11:15:05 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 11 Mar 1999 11:15:05 +0000 (GMT)
Subject: .Alias and memory
Message-ID: <199903111115.LAA15909@toucan.stats.ox.ac.uk>

> Date: Thu, 11 Mar 1999 09:37:53 +0000 (GMT)
> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
> To: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> On Wed, 10 Mar 1999, Paul Gilbert wrote:
> 
> > In an effort to encapsulate my dependence on class in order to deal with
> > oldclass/class in Splus  I defined the functions
> 
> [ ... ]
>  
> > This last allows me to end a function definition with
> >   ...
> >   classed(somecalc, "whatever") }
> > 
> > rather than
> >   ...
> >   obj <- somecalc
> >   class(obj) <- "whatever"
> >   obj }
> 
> I may be missing the point, but it seems to me that you could achieve a
> `one-line return' using
> 
>     structure(somecalc, class = "whatever")
> 
> which would also avoid passing somecalc into another function.

In part you are. That is equivalent to

attr(somecalc, "class") <- "whatever"

and whereas that happens to be how class<- is defined on S3 and R, it
is not how it works in S-PLUS 5 (although oldClass<- is currently
defined that way).  When you want to change to S-PLUS 5-style classes
you have to remember that you have subverted the system!

More generally, using the representation not the public method in
object-oriented programming is a recipe for disaster.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 11 13:12:50 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 11 Mar 1999 14:12:50 +0100
Subject: [R] R and kron
In-Reply-To: <Pine.LNX.3.95.990311120618.885C-100000@mercury.quantex> (message
 from John Logsdon on Thu, 11 Mar 1999 12:08:33 +0000 (GMT))
References: <Pine.LNX.3.95.990311120618.885C-100000@mercury.quantex>
Message-ID: <199903111312.OAA07075@sophie.ethz.ch>

>>>>> "John" == John Logsdon <j.logsdon@lancaster.ac.uk> writes:

    John> I note that the CRAN at .at land still refers to 0.63.2.  Is this
    John> just a typo?  I don't want to download a whole lot only to find I
    John> still have it!  Does 0.63.3 live elsewhere?

It's certainly there! we all mirror it from Vienna !
It maybe that the html text doesn't yet have the proper link...
But it IS there (and on any other CRAN mirror)
 in the   ./src/base/ directory !

    John> And I note the new function kronecker - very useful but can it be
    John> applied to non-numerics as in factors, data frames etc preserving
    John> the class, levels and names?

Certainly --- if you enhance it;
Thanks in advance for the contribution...  ;-)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Mar 11 13:55:44 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 11 Mar 1999 13:55:44 +0000 (GMT)
Subject: [R] R and kron
In-Reply-To: <199903111312.OAA07075@sophie.ethz.ch>
Message-ID: <Pine.GSO.3.96.990311135103.12487I-100000@laplace>

On Thu, 11 Mar 1999, Martin Maechler wrote:

>     John> And I note the new function kronecker - very useful but can it be
>     John> applied to non-numerics as in factors, data frames etc preserving
>     John> the class, levels and names?
> 
> Certainly --- if you enhance it;
> Thanks in advance for the contribution...  ;-)

kronecker() is actually a wrapper for outer(), so unfortunately you will
have to enhance outer() as well!  But I expect an enhanced outer() would
be quite useful.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Mar 11 15:49:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 11 Mar 1999 10:49:14 -0500
Subject: [R] re: smp in Linux
References: <Pine.GSO.4.10.9903100821400.4178-100000@wompom.biostat.washington.edu>
Message-ID: <99Mar11.111420est.13505@mailgate.bank-banque-canada.ca>

>On the other hand, most of the problems I have where speed is an issue are
>simulations or bootstrapping problems that scale almost perfectly by
>running 1/n as many on each of n processors.

This has been my experience too, and I have lots of problems like this. It would
sure be nice to have some possibility like:

parallelfor (i in 1:N, listofmachines )  x[[i]] <- simulate(model[[i]],
data[[i]])

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@ucar.edu  Thu Mar 11 16:15:17 1999
From: oncley@ucar.edu (oncley@ucar.edu)
Date: Thu, 11 Mar 1999 17:15:17 +0100
Subject: rbind dimnames with complex (PR#140)
Message-ID: <199903111615.RAA11189@biostat.ku.dk>

Full_Name: Steve Oncley
Version: 0.63.3
OS: Redhat5.2 i386
Submission from: 128.117.80.159 (128.117.80.159)


names (or dimnames) are lost when rbind-ing complex values (but not cbind):

> x <- rep(1+1i,2)
> names(x) <- c("a","b")
> x
   a    b
 1+1i 1+1i
> rbind(x,x)
     [,1] [,2]
[1,] 1+1i 1+1i
[2,] 1+1i 1+1i
> cbind(x,x)
  [,1] [,2]
a 1+1i 1+1i
b 1+1i 1+1i


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@ucar.edu  Thu Mar 11 16:19:43 1999
From: oncley@ucar.edu (oncley@ucar.edu)
Date: Thu, 11 Mar 1999 17:19:43 +0100
Subject: log plots fail with NAs (PR#141)
Message-ID: <199903111619.RAA11252@biostat.ku.dk>

Full_Name: Steve Oncley
Version: 0.63.3
OS: Redhat5.2 i386
Submission from: 128.117.80.159 (128.117.80.159)


Shouldn't this work, but only plot 2 points?

> plot(c(1,NA,10),log="y")
Error: missing value where logical needed


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@ucar.edu  Thu Mar 11 16:34:36 1999
From: oncley@ucar.edu (oncley@ucar.edu)
Date: Thu, 11 Mar 1999 17:34:36 +0100
Subject: exists finds objects lots of places! (PR#142)
Message-ID: <199903111634.RAA11500@biostat.ku.dk>

Full_Name: Steve Oncley
Version: 0.63.3
OS: Redhat5.2 i386 
Submission from: 128.117.80.159 (128.117.80.159)


"exists" finds object UP TO the position it is in
> search()
[1] ".GlobalEnv"   "Autoloads"    "package:base"
> exists("ls",1)
[1] TRUE
> exists("ls",2)
[1] TRUE
> exists("ls",3)
[1] TRUE
> x <- 1
> exists("x",1)
[1] TRUE
> exists("x",2)
[1] FALSE
> exists("x",3)
[1] FALSE

whereas, S+ only finds the one position where the object is:
> search()
 [1] ".Data"                                    
 [2] "/net/aster/splus3.4/local/.Data"          
 [3] "/net/aster/splus3.4/splus/.Functions"     
 [4] "/net/aster/splus3.4/stat/.Functions"      
 [5] "/net/aster/splus3.4/s/.Functions"         
 [6] "/net/aster/splus3.4/s/.Datasets"          
 [7] "/net/aster/splus3.4/stat/.Datasets"       
 [8] "/net/aster/splus3.4/splus/.Datasets"      
 [9] "/net/aster/splus3.4/library/Matrix/.Data" 
[10] "/net/aster/splus3.4/library/trellis/.Data"
> exists("ls",1)
[1] F
> exists("ls",2)
[1] F
> exists("ls",3)
[1] F
> exists("ls",4) 
[1] F
> exists("ls",5)
[1] T
> exists("ls",6)
[1] F


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 11 16:38:46 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Mar 1999 17:38:46 +0100
Subject: log plots fail with NAs (PR#141)
In-Reply-To: oncley@ucar.edu's message of Thu, 11 Mar 1999 17:19:43 +0100
References: <199903111619.RAA11252@biostat.ku.dk>
Message-ID: <x23e3chtgp.fsf@blueberry.kubism.ku.dk>

oncley@ucar.edu writes:

> Shouldn't this work, but only plot 2 points?
> 
> > plot(c(1,NA,10),log="y")
> Error: missing value where logical needed

Yes. Inside xy.coords, we have

if ("y" %in% log && any(ii <- y <= 0))
                              ^^^^^^

make that y <= 0 & !is.na(y)
                 ^^^^^^^^^^^

(and ditto for x)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Mar 11 17:10:03 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 11 Mar 1999 18:10:03 +0100
Subject: exists finds objects lots of places! (PR#142)
Message-ID: <199903111710.SAA14188@biostat.ku.dk>

On Thu, 11 Mar 1999 oncley@ucar.edu wrote:

> Full_Name: Steve Oncley
> Version: 0.63.3
> OS: Redhat5.2 i386 
> Submission from: 128.117.80.159 (128.117.80.159)
> 
> 
> "exists" finds object UP TO the position it is in


> whereas, S+ only finds the one position where the object is:

"It's not a bug, it's a feature"

R> args(exists)
function (x, where = -1, envir = pos.to.env(where), frame, mode = "any", 
    inherits = TRUE) 

You need to use inherits=F to search only the specified position.>
R> search()
[1] ".GlobalEnv"   "Autoloads"    "package:base"
R> exists("ls",2)
[1] TRUE 
R> exists("ls",2,inherits=F)
[1] FALSE


Thomas Lumley
Assistant Professor,Biostatistics
University of Washington, Seattle



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Mar 11 17:09:29 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 11 Mar 1999 09:09:29 -0800 (PST)
Subject: [R] re: smp in Linux
In-Reply-To: <99Mar11.111420est.13505@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.10.9903110907470.7067-100000@wompom.biostat.washington.edu>

On Thu, 11 Mar 1999, Paul Gilbert wrote:

> >On the other hand, most of the problems I have where speed is an issue are
> >simulations or bootstrapping problems that scale almost perfectly by
> >running 1/n as many on each of n processors.
> 
> This has been my experience too, and I have lots of problems like this. It would
> sure be nice to have some possibility like:
> 
> parallelfor (i in 1:N, listofmachines )  x[[i]] <- simulate(model[[i]],
> data[[i]])
> 

This may be a case for implementing .For().  We currently say it is not
necessary and thus not implemented, which is true for systems with more
users than processors, but it would be useful for multiprocessor systems.

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From N.J.Lee@statslab.cam.ac.uk  Thu Mar 11 17:42:07 1999
From: N.J.Lee@statslab.cam.ac.uk (Nicholas Lee)
Date: Thu, 11 Mar 1999 17:42:07 +0000 (GMT)
Subject: [R] re: smp in Linux
In-Reply-To: <99Mar11.111420est.13505@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.HPP.3.96.990311173701.21260A-100000@tiger.statslab.cam.ac.uk>


On Thu, 11 Mar 1999, Paul Gilbert wrote:

> This has been my experience too, and I have lots of problems like this.
> It would sure be nice to have some possibility like: 
> 
> parallelfor (i in 1:N, listofmachines )  x[[i]] <- simulate(model[[i]],
> data[[i]]) 

Wouldn't it be better to do these sort of coase grain parallisation at a
higher level?  ie with a little bit of perl code, and/or some other load
distribution package from outside R. 

Nicholas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it  Sun Mar 14 10:09:32 1999
From: guido@hal.stat.unipd.it (guido@hal.stat.unipd.it)
Date: Sun, 14 Mar 1999 11:09:32 +0100
Subject: y with diaeresis (PR#143)
Message-ID: <199903141009.LAA03311@blueberry.kubism.ku.dk>

[Not important for message below; in this moment link from CRAN
 to the 'R Bug Tracking system (http://blueberry.kubism.ku.dk/R)' 
 is down (at least, I get a "The requested URL /R was not 
 found on this server." message)]

To display properly this message, you mailer must handle properly
latin1 encoding. With other encoding, I suppose that the role
played by 'y diaeresis' should be played by the character
with code '255'

Look to the following example:
----------------------------------------------------------------------------
[~/tmp]% uname -a
Linux tui 2.0.34 #1 Thu Jan 14 18:56:24 CET 1999 i686 unknown
[~/tmp]% cat a.R
x <- "12"
cat(x,"\n")
[~/tmp]% ../src/R-release/bin/R --vanilla < a.R

R : Copyright 1999, The R Development Core Team
Version 0.63.3 in progress (February 25, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> x <- "12"
+ cat(x,"\n")
+ 
[~/tmp]% 
----------------------------------------------------------------------------
Look to the 'continuation' prompt. It seems that first line isn't 
parsed to end. 
[Note: I have tested this also with the final 0.63.3; simply,
it is not installed on machine I am writing in this moment]

Problem is due to 'y diaeresis'.

This is from ESS (not quoting the 'y diaeresis'; to insert it in 
a emacs buffer I have to hit ^Q377)
----------------------------------------------------------------------------
> 

Save workspace image? [y/n/c]:
----------------------------------------------------------------------------
i.e, 'y diaeresis' seems interpreted as an EOF.

I don't know where is the solution but problem seems due to the
conversions from int to char (made implicitly by R_ReadConsole)
and then back to int made in src/main/gram.y(buffer_getc). Result
is that the 'if (c==EOF)' test in that function is true when c='y diaeresis'.

Indeed:
----------------------------------------------------------------------------
[~/tmp]% cat a.c
#include <stdio.h>

int main(int argc,char **argv) {
  int i,j;
  char c;
  while ((i=fgetc(stdin))!=EOF) {
    c = i;
    j = c;
    if (c=='\n') printf("\n");
    else  printf("/%d/%d/%d/%c/%d ",i,j,c,c,j==EOF);
  }
}
[~/tmp]% gcc -o a a.c
[~/tmp]% ./a < a.R
/120/120/120/x/0 /32/32/32/ /0 /60/60/60/</0 /45/45/45/-/0 /32/32/32/ /0 /34/34/34/"/0 /49/49/49/1/0 /50/50/50/2/0 /192/-64/-64//0 /193/-63/-63//0 /255/-1/-1//1 /34/34/34/"/0 
/99/99/99/c/0 /97/97/97/a/0 /116/116/116/t/0 /40/40/40/(/0 /120/120/120/x/0 /44/44/44/,/0 /34/34/34/"/0 /92/92/92/\/0 /110/110/110/n/0 /34/34/34/"/0 /41/41/41/)/0 
------------------------------------------------------------------------------
Look to the sequence including 'y diaeresis'. It shows that after the
double conversion 'y diaeresis'==EOF is TRUE.

g.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar 14 13:46:50 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 1999 14:46:50 +0100
Subject: y with diaeresis (PR#143)
In-Reply-To: guido@hal.stat.unipd.it's message of "Sun, 14 Mar 1999 11:09:32 +0100"
References: <199903141009.LAA03311@blueberry.kubism.ku.dk>
Message-ID: <x2emmstc8l.fsf@blueberry.kubism.ku.dk>

guido@hal.stat.unipd.it writes:

> [Not important for message below; in this moment link from CRAN
>  to the 'R Bug Tracking system (http://blueberry.kubism.ku.dk/R)' 
>  is down (at least, I get a "The requested URL /R was not 
>  found on this server." message)]

Arrrgh... That's what happens if you upgrade systems on a Friday
afternoon. Apparently, the Apache configurations scripts got changed
from RedHat5.1 to 5.2 and I didn't think to check. Should be OK now.

(Email submissions take a different route in and should be unaffected
by this.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar 14 14:03:47 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 1999 15:03:47 +0100
Subject: R-bugs -- was: Re: y with diaeresis (PR#143)
In-Reply-To: Peter Dalgaard BSA's message of "14 Mar 1999 14:46:50 +0100"
References: <199903141009.LAA03311@blueberry.kubism.ku.dk> <x2emmstc8l.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2d82ctbgc.fsf_-_@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> guido@hal.stat.unipd.it writes:
> 
> > [Not important for message below; in this moment link from CRAN
> >  to the 'R Bug Tracking system (http://blueberry.kubism.ku.dk/R)' 
> >  is down (at least, I get a "The requested URL /R was not 
> >  found on this server." message)]
> 
> Arrrgh... That's what happens if you upgrade systems on a Friday
> afternoon. Apparently, the Apache configurations scripts got changed
> from RedHat5.1 to 5.2 and I didn't think to check. Should be OK now.

Erm, BTW: That link... The official link is supposed to be

http://r-bugs.biostat.ku.dk

and not something hardwired into my (current!) PC.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar 14 15:48:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 1999 16:48:55 +0100
Subject: y with diaeresis (PR#143)
In-Reply-To: guido@hal.stat.unipd.it's message of "Sun, 14 Mar 1999 11:09:32 +0100"
References: <199903141009.LAA03311@blueberry.kubism.ku.dk>
Message-ID: <x2iuc4t6l4.fsf@blueberry.kubism.ku.dk>

guido@hal.stat.unipd.it writes:

> [Not important for message below; in this moment link from CRAN
>  to the 'R Bug Tracking system (http://blueberry.kubism.ku.dk/R)' 
>  is down (at least, I get a "The requested URL /R was not 
>  found on this server." message)]
> 
> To display properly this message, you mailer must handle properly
> latin1 encoding. With other encoding, I suppose that the role
> played by 'y diaeresis' should be played by the character
> with code '255'
...
> and then back to int made in src/main/gram.y(buffer_getc). Result
> is that the 'if (c==EOF)' test in that function is true when c='y diaeresis'.

I've sprinkled a handful of "unsigned" over the sources. Seems to have
helped. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Mon Mar 15 05:18:08 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 14 Mar 1999 21:18:08 -0800
Subject: R packages and test code
Message-ID: <87pv6b9vqn.fsf@alpha.cfas.washington.edu>



Where is the best place to put evaluation/test code in creating an R
package?  I thought about a test subdirectory, but might it be better
to put in the R directory?  I guess I'm more concerned about the
output used for evaluating the success of the test, rather than the
test code and data, itself.

best,
-tony

-- 
A.J. Rossini
UW Biostatistics & Center for AIDS Research 
206-543-1044 / 206-720-4282                 
rossini@biostat.washington.edu              
http://www.biostat.washington.edu/~rossini/ 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Mar 15 09:40:14 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 15 Mar 1999 10:40:14 +0100
Subject: R packages and test code
In-Reply-To: <87pv6b9vqn.fsf@alpha.cfas.washington.edu>
 (rossini@biostat.washington.edu)
References: <87pv6b9vqn.fsf@alpha.cfas.washington.edu>
Message-ID: <199903150940.KAA09497@sophie.ethz.ch>

>>>>> "tony" == A J Rossini <rossini@biostat.washington.edu> writes:

    tony> Where is the best place to put evaluation/test code in creating
    tony> an R package?  I thought about a test subdirectory, but might it
    tony> be better to put in the R directory?  I guess I'm more concerned
    tony> about the output used for evaluating the success of the test,
    tony> rather than the test code and data, itself.

Good question.  
This hasn't been done yet in a formal general way.
MASS comes with the  scripts subdirectory, 
but there's no "make check" and comparison of desired and actual output.

1) "THE" basic test is running all the examples from all the *.Rd files.
  You can do this with contributed packages by

       R CMD check [options] [-l lib] pkg_1 ... pkg_n

  However, this just runs the examples 
	   (those *not* within a \dontrun{.} clause)
  and produces an  <pkg>-Ex.Rout  file.
  You still have to check yourself if the *.Rout file has the proper output

2) I assume the thing you desire is something like 
   what the distributed R does in  ./tests/  where there are
   foobar.R  and foobar.Rout.save  files 
	     for (foobar in c("is-things", "simple-tests", "eval-etc",
			      ...)) :
      R --vanilla < foobar.R > foobar.Rout
   is run 
   and a somewhat "tolerant" diff between  foobar.Rout and foobar.Rout.save
   is made. "SUCCESS" (actually `Ok') is reported when there are no
   (nontrivial) diffs.

   Try  "make check" with your R distribution if you don't know what I mean.

It shouldn't be hard to add this to the  "R INSTALL" scripts  :

   If there's  <pkg-src>/tests/
   for all pairs foobar.R and foobar.Rout.save (in that directory) 
   do the above test.

Tony, could you try to add this feature (to the relevant R scripts)
yourself?  or anyone else?
[it would be nice of course, if the identical scripts were used for 
 "base R"'s  ``make check''  and for the contributed packages's  
 "R CMD check .. pkg" or (preferably) "R INSTALL pkg ..."
]

Martin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Mon Mar 15 18:35:39 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 15 Mar 1999 10:35:39 -0800
Subject: R packages and test code
In-Reply-To: Martin Maechler's message of "Mon, 15 Mar 1999 10:40:14 +0100"
References: <87pv6b9vqn.fsf@alpha.cfas.washington.edu> <199903150940.KAA09497@sophie.ethz.ch>
Message-ID: <87sob6eh38.fsf@alpha.cfas.washington.edu>


>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
>>>>> "tony" == A J Rossini <rossini@biostat.washington.edu> writes:

    tony> Where is the best place to put evaluation/test code in
    tony> creating an R package?  I thought about a test subdirectory,
    tony> but might it be better to put in the R directory?  I guess
    tony> I'm more concerned about the output used for evaluating the
    tony> success of the test, rather than the test code and data,
    tony> itself.

    MM> Good question.  This hasn't been done yet in a formal general
    MM> way.  MASS comes with the scripts subdirectory, but there's no
    MM> "make check" and comparison of desired and actual output.

Is there a more formal description of the packaging system than that
given in the R-faq (which needs a bit of an update for ESS, Kurt)?

(I'd like to see one, if so, in order to specify exactly how to
consider the general situation).


    MM> 2) I assume the thing you desire is something like
    MM>    what the distributed R does in ./tests/ where there are
    MM>    foobar.R and foobar.Rout.save files
    MM> 	     for (foobar in c("is-things", "simple-tests",
    MM> 	     "eval-etc",
    MM> 			      ...)) :
    MM>       R --vanilla < foobar.R > foobar.Rout
    MM>    is run and a somewhat "tolerant" diff between foobar.Rout
    MM>    and foobar.Rout.save is made. "SUCCESS" (actually `Ok') is
    MM>    reported when there are no (nontrivial) diffs.

Yes, but not quite as formal as checking for non-trivial diffs.  I'd
be satisfied with just being able to construct a diff (or the new
file, to compare with the gold standard, for the diff) and making the
user visually go over them.

    MM> Tony, could you try to add this feature (to the relevant R
    MM> scripts) yourself?  or anyone else?  [it would be nice of
    MM> course, if the identical scripts were used for
    MM>  "base R"'s ``make check'' and for the contributed packages's
    MM>  "R CMD check .. pkg" or (preferably) "R INSTALL pkg ..."
    MM> ]

I can try, since I really want this (the tests, and quite possibly the
packaging specification for my next stat language project :-).
Probably won't happen until after my Vienna/Berlin/Atlanta trips over
the next 2+ weeks...

best,
-tony

-- 
A.J. Rossini
UW Biostatistics & Center for AIDS Research 
206-543-1044 / 206-720-4282                 
rossini@biostat.washington.edu              
http://www.biostat.washington.edu/~rossini/ 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wagman@enteract.com  Thu Mar 18 07:58:49 1999
From: wagman@enteract.com (wagman@enteract.com)
Date: Thu, 18 Mar 1999 08:58:49 +0100
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' (PR#144)
Message-ID: <199903180758.IAA08796@blueberry.kubism.ku.dk>

Full_Name: Barnet Wagman
Version: 63.2
OS: Linux
Submission from: (NULL) (207.229.172.168)


After a number of interations, glm(family=binomial) throws an error
	'Error: names attribute must be the same length as the vector'
The same model works in lm() with the same data frame, so presumably it is not
misspecified.

In the iterations prior to the error, glm() generates the warnings
	'Warning: fitted probabilities of 0 or 1 occurred'

The fit is converging prior to the error.

Could the problem involve a singularity and the wrong error message?

FYI The model contains 34 variables in around 11,000 cases.
The command used is
'glm(formula=...,data=...,family=binomial,control=control.glm(epsilon=0.0001.maxit=50,
 trace=TRUE))'
Changing epsilon and/or explicitly setting 'start' does not effect the problem.


Thanks for your help.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Mar 22 12:40:03 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Mon, 22 Mar 1999 12:40:03 +0000 (GMT)
Subject: Extension to outer()
Message-ID: <Pine.GSO.3.96.990322121912.691A-200000@laplace>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-1804928587-922106403=:691
Content-Type: TEXT/PLAIN; charset=US-ASCII

A couple of weeks ago I asked if anyone had generalised outer to include
bound extents -- effectively taking the diagonal of an outer product.
Attached is my take on the solution.  There is an extra argument to outer,
BIND, which if null results in a simple outer product.  I've used a
slightly different algorithm which I think is more transparent than the
original code, and also generalises better.

If BIND is not null, then outer(A, B, BIND = c(i, j)) computes an array
with extent j of B bound along extent i of A.  For example, if A and B are
both matrices and V is the result with BIND=c(1,1), then V[i, j, k] =
FUN(A[i, j], B[i, k], ...).  One use for the BIND argument is in computing
Euclidean distances:

"gdist" <- function(X, Y)
{
	X <- as.matrix(X)
	Y <- as.matrix(Y)
	sqrt(apply(outer(X, Y, "-", BIND = c(2,2))^2, c(1,3), sum))
}

which, unlike dist() from `mva' can provide submatrices of the full
distance matrix -- very useful for covariances.

This BIND argument to outer turns out to be very useful in lots of
different areas of our work.  If anyone has any feedback on the code I
would be very grateful for it.  Many thanks, Jonathan. 

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

---559023410-1804928587-922106403=:691
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="outer.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.3.96.990322124003.691B@laplace>
Content-Description: 

Im91dGVyIiA8LQ0KZnVuY3Rpb24gKEEsIEIsIEZVTiA9ICIqIiwgQklORCA9
IE5VTEwsIC4uLikgDQp7DQogICAgRlVOIDwtIG1hdGNoLmZ1bihGVU4pDQog
ICAgQSA8LSBhcy5hcnJheShBKQ0KICAgIEIgPC0gYXMuYXJyYXkoQikNCiAg
ICBkaW1zIDwtIGxpc3QoZGltKEEpLCBkaW0oQikpDQogICAgbmEgPC0gbGVu
Z3RoKGRpbXNbWzFdXSkNCiAgICBuYiA8LSBsZW5ndGgoZGltc1tbMl1dKQ0K
ICAgIGlmIChpcy5udWxsKGRuYSA8LSBkaW1uYW1lcyhBKSkpIA0KICAgICAg
ICBkbmEgPC0gdmVjdG9yKCJsaXN0IiwgbmEpDQogICAgaWYgKGlzLm51bGwo
ZG5iIDwtIGRpbW5hbWVzKEIpKSkgDQogICAgICAgIGRuYiA8LSB2ZWN0b3Io
Imxpc3QiLCBuYikNCiAgICBpZiAoaXMubnVsbChCSU5EKSkgew0KICAgICAg
ICAjIHNpbXBsZSBvdXRlcg0KICAgICAgICBBIDwtIGFycmF5KEEsIGMoZGlt
c1tbMV1dLCBkaW1zW1syXV0pKQ0KICAgICAgICBCIDwtIGFycmF5KEIsIGMo
ZGltc1tbMl1dLCBkaW1zW1sxXV0pKQ0KICAgICAgICBCIDwtIGFwZXJtKEIs
IGMobmIgKyAxOm5hLCAxOm5iKSkNCiAgICAgICAgcm9iaiA8LSBhcnJheShG
VU4oQSwgQiwgLi4uKSwgZGltKEEpKQ0KICAgICAgICBkaW1uYW1lcyhyb2Jq
KSA8LSBjKGRuYSwgZG5iKQ0KICAgICAgICByb2JqDQogICAgfQ0KICAgIGVs
c2Ugew0KICAgICAgICAjIG1vcmUgY29tcGxpY2F0ZWQgYm91bmQgb3V0ZXIN
CiAgICAgICAgaWYgKCEoQklORFsxXSAlaW4lIDE6bmEgJiYgQklORFsyXSAl
aW4lIDE6bmIpKSANCiAgICAgICAgICAgIHN0b3AoImludmFsaWQgZXh0ZW50
IGZvciBcIkJJTkRcIiIpDQogICAgICAgIGVsc2UgaWYgKGRpbXNbWzFdXVtC
SU5EWzFdXSAhPSBkaW1zW1syXV1bQklORFsyXV0pIA0KICAgICAgICAgICAg
c3RvcCgiRXh0ZW50cyB0byBiZSBib3VuZCBkbyBub3QgbWF0Y2giKQ0KICAg
ICAgICBpZiAobmIgPT0gMSkgDQogICAgICAgICAgICByb2JqIDwtIHN3ZWVw
KEEsIEJJTkRbMV0sIEIsIEZVTiA9IEZVTiwgLi4uKQ0KICAgICAgICBlbHNl
IHsNCiAgICAgICAgICAgICMgc3dpdGNoIGJvdW5kIGV4dGVudCB0byB0aGUg
ZnJvbnQNCiAgICAgICAgICAgIG9kYSA8LSBjKEJJTkRbMV0sICgxOm5hKVst
QklORFsxXV0pDQogICAgICAgICAgICBkYSA8LSBkaW0oQSA8LSBhcGVybShB
LCBvZGEpKQ0KICAgICAgICAgICAgZGIgPC0gZGltKEIgPC0gYXBlcm0oQiwg
YyhCSU5EWzJdLCAoMTpuYilbLUJJTkRbMl1dKSkpDQogICAgICAgICAgICAj
IHJlcGxpY2F0ZSBBIGFsb25nIEIgKGV4Y2x1ZGluZyBib3VuZCBleHRleHQp
IGFuZCB2aWNlIHZlcnNhDQogICAgICAgICAgICBBIDwtIGFycmF5KEEsIGMo
ZGEsIGRiWy0xXSkpDQogICAgICAgICAgICBCIDwtIGFycmF5KEIsIGMoZGIs
IGRhWy0xXSkpDQogICAgICAgICAgICAjIGB0cmFuc3Bvc2UnIEIsIGNvbXB1
dGUgdGhlbiB1bi1wZXJtDQogICAgICAgICAgICBpZiAobmEgPiAxKSANCiAg
ICAgICAgICAgICAgICBCIDwtIGFwZXJtKEIsIGMoMSwgbmIgKyAxOihuYSAt
IDEpLCAyOm5iKSkNCiAgICAgICAgICAgIHJvYmogPC0gRlVOKEEsIEIsIC4u
LikNCiAgICAgICAgICAgIGRpbShyb2JqKSA8LSBjKGRpbXNbWzFdXVtvZGFd
LCBkaW1zW1syXV1bLUJJTkRbMl1dKQ0KICAgICAgICAgICAgcm9iaiA8LSBh
cGVybShyb2JqLCBjKG9yZGVyKG9kYSksIG5hICsgMToobmIgLSAxKSkpDQog
ICAgICAgIH0NCiAgICAgICAgZGltbmFtZXMocm9iaikgPC0gYyhkbmEsIGRu
YlstQklORFsyXV0pDQogICAgICAgIHJvYmoNCiAgICB9DQp9DQo=
---559023410-1804928587-922106403=:691--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Mar 23 07:33:24 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 23 Mar 1999 08:33:24 +0100 (CET)
Subject: [R] e1071 and netpbm
In-Reply-To: <XFMail.990322145503.plummer@iarc.fr>
References: <XFMail.990322145503.plummer@iarc.fr>
Message-ID: <14071.17348.841873.251642@sauron.ci.tuwien.ac.at>


[ ... taken from r-help to r-devel ... ]

R core kind of agreed to newly introduce configure capabilities to
packages such that we can handle situations like this cleanly. I.e.,
if the package contains a configur script, this is run to create a
proper Makefile. Hopefully I can then clean up the e1071 Makefile to
build the shared lib correctly on more than one platform.

fritz

>>>>> On Mon, 22 Mar 1999 14:55:03 +0100 (CET),
>>>>> Martyn Plummer (MP) wrote:

MP> [Snip: Problems installing the e1071 package on Red Hat Linux]
MP> Instead of having a single netpbm library, Red Hat has four libraries
MP> (all provided by the libgr rpm), with recursive dependencies

MP> libpnm -> libppm -> libpgm -> libpbm

MP> So, for example, libpbm stands alone but libpgm contains references to
MP> functions in libpbm.  This means that if you want to use any functions
MP> in libpnm (which we do), you must also link against the other three
MP> libraries. If you don't do this, then the compiler won't complain about
MP> undefined references when you type "R INSTALL e1071", since it is building
MP> a shared object, but you will get run time errors.

MP> I can't see the advantage of splitting the library, myself. I wrote to
MP> Red Hat about this in November but didn't get a reply.  It looks like
MP> various other Linux distributions which use the RPM packager (OpenLinux,
MP> TurboLinux, LinuxPPC, ...) use the same setup.

MP> I use the patch below when compiling on Red Hat
MP> Martyn
MP> diff -uNr e1071/src/Makefile e1071-patched/src/Makefile
MP> --- e1071/src/Makefile	Tue Nov 17 11:44:10 1998
MP> +++ e1071-patched/src/Makefile	Fri Nov 20 15:05:00 1998
MP> @@ -4,7 +4,7 @@
MP>  OBJS=pnm.o 
 
MP>  $(LIBNAME).so:  $(OBJS)
MP> -	$(LD) $(SHLIBLDFLAGS) -o $@ $(OBJS) -lnetpbm
MP> +	$(LD) $(SHLIBLDFLAGS) -o $@ $(OBJS) -lpnm -lppm -lpgm -lpbm
 
MP>  clean:
MP>  	@rm -f *.o *.so
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar 23 21:46:30 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 23 Mar 1999 16:46:30 -0500
Subject: (-2) %% 12
Message-ID: <99Mar23.165342est.13451@mailgate.bank-banque-canada.ca>

(-2) %% 12 seems to give the wrong result in  R pre 63.3:

> e1 <- -2
> e2 <- 12
> e1 %% e2
[1] -2
> e1 - floor(e1/e2) * e2
[1] 10

In Splus:
> e1 <- -2
> e2 <- 12
> e1 %% e2
[1] 10
> e1 - floor(e1/e2) * e2
[1] 10

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jsarma@cs.gmu.edu  Tue Mar 23 21:58:04 1999
From: jsarma@cs.gmu.edu (jsarma@cs.gmu.edu)
Date: Tue, 23 Mar 1999 22:58:04 +0100
Subject: R-0.63.3 package on IRIX 6.5 machine (PR#145)
Message-ID: <199903232158.WAA27947@blueberry.kubism.ku.dk>

Hi,

I installed R-0.63.3 version on SGI machine running
IRIX 6.5.

Machine details:
319 <mind.krasnow.gmu.edu:R-0.63.3> uname -a
IRIX64 mind 6.5 07271714 IP27

I used gcc (egcs1.1.1) and g77 combination.
I use the GNU make rather than the sgi make.
I went through your help mailing list and found that
I have to edit the Mathlib.h file in src/include directory
to undefine certain definitions which conflict with sgi's
definition.

When I type gmake, I got one error message:

gmake[2]: Entering directory `/Apps/usr/local/R-0.63.3/doc'
Installing doc ...
install:  ../doc/html/search/index.txt does not exist
gmake[2]: *** [install-html] Error 1


Then when I ran the check, I was not able to run modreg-Ex.R example.
It runs for over 2 hours but does not generate anything beyond the
2 pages it generates in the first few minutes.  The second page
contains only 3 graphs and a half drawn graph.  The modreg.Rout
file gets deleted when I terminate the check process. So I am not
sure where it is stuck.  I am not sure how long I should let it
run.  Moreover it does not write anything to .out or .ps file
after the first few minutes.  Is this a known bug?


Jayshree Sarma


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Mar 24 10:37:24 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 24 Mar 1999 11:37:24 +0100
Subject: (-2) %% 12 --- was a bug fix in 0.63.3  {{and musings about S ..}}
In-Reply-To: <99Mar23.165342est.13451@mailgate.bank-banque-canada.ca> (message
 from Paul Gilbert on Tue, 23 Mar 1999 16:46:30 -0500)
References: <99Mar23.165342est.13451@mailgate.bank-banque-canada.ca>
Message-ID: <199903241037.LAA04080@sophie.ethz.ch>


>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> (-2) %% 12 seems to give the wrong result in R pre 63.3:
    >> e1 <- -2 ;  e2 <- 12  ; e1 %% e2
    PaulG> [1] -2
    >> e1 - floor(e1/e2) * e2
    PaulG> [1] 10

    PaulG> In Splus:
    >> e1 <- -2 ; e2 <- 12 ;  e1 %% e2
    PaulG> [1] 10
    >> e1 - floor(e1/e2) * e2
    PaulG> [1] 10

Thank you, Paul, for bringing up this topic (again).

Short answer:  
      This is has been changed in 0.63.3
      and is mentioned in the "Bug Fixes" part of NEWS (and was even on R-announce!)
      NEWS>>
      NEWS>>   o   a %% b -- is now periodic instead of symmetric; more S compatible.
      NEWS>>



Longer answer:

      There are two problems:

      1) ANSI C leaves the semantics of "a % b" (corresponding to R's "a %% b")
	 UNDEFINED whenever one of a or b is negative.

	 IMHO, this *is* a horrible fact  (showing how little some computer scientists
					   care about mathematical computing..).

         Older versions of R used to do what you mention above which is
         what C (and hence R) do on at least Solaris and Linux-Intel.


      2) S-plus  DOES give different answers __solely__ depending on the
         storage.mode  of  a (and/or b)

	 [being on the S version 4  mailing list, I've tried to start a
	  discussion on this,about a year ago, but nobody has even answered me...
	 So, the problem was not addressed for S-plus 5 and hence probably never will]

	 This is S-plus (any version AFAIK; certainly both 3.4 and 5.0 for Unix)

	    > version
	    Version 3.4 Release 1 for Sun SPARC, SunOS 5.3 : 1996 
	    > d3 <- as.numeric(3) # 'd' for double
	    > i3 <- as.integer(3)

	    ## These two differ, but I think they should not ...
	    > d3 %% c(-5:4)
	     [1] -2 -1  0 -1  0  3  0  1  0  3
	    > i3 %% c(-5:4)
	     [1] 3 3 0 1 0 3 0 1 0 3

	    > (-d3) %% c(-5:4)
	     [1] -3 -3  0 -1  0 -3  0  1  0  1
	    > (-i3) %% c(-5:4)
	     [1]  2  1  0  1  0 -3  0  1  0  1
	    > 

---

The Current [0.63.3, but not earlier] and future versions of R
will be consistent and deliver

    R> d3 <- as.numeric(3) # 'd' for double
    R> i3 <- as.integer(3)

    R> ## These two differ, but I think they should not ...
    R> d3 %% c(-5:4) # -2 -1  0 -1  0  3  0  1  0  3
     [1]  -2  -1   0  -1   0 NaN   0   1   0   3
    R> i3 %% c(-5:4) #  3  3  0  1  0  3  0  1  0  3
     [1] -2 -1  0 -1  0 NA  0  1  0  3

    R> (-d3) %% c(-5:4)# -3 -3  0 -1  0 -3  0  1  0  1
     [1]  -3  -3   0  -1   0 NaN   0   1   0   1
    R> (-i3) %% c(-5:4)#  2  1  0  1  0 -3  0  1  0  1
     [1] -3 -3  0 -1  0 NA  0  1  0  1
    R> 

Note that R's result now is the same, not depending on the storage.mode of
a or b.

The help page on "%%" now has a section
 
    `%%' indicates `x mod y' and `%/%' indicates integer
     division. It is guaranteed that `x  ==  (x %% y)  +  y
     * ( x %/% y )' unless `y == 0' where the result is `NA'
     or `NaN' (depending on the `typeof' of the arguments).

----------------------

Remark:

 In S version 4 (and S-plus 5.0)

    "3" or "-3" are integers  whereas they used to be
    "numeric", i.e., "double" in Sv3 (i.e. S-plus x.y with x <= 4).

 Consequence:  S(plus)  ``seems to'' be non backward compatible even in
	       this low level aspect:

    Version 5.0 Release 3 for Sun SPARC, SunOS 5.5 : 1998   gives
	    > 11 %% -3
	    [1] 2
    whereas  Version 3.4 Release 1 for Sun SPARC, SunOS 5.3 : 1996   gives
	     > 11 %% -3
	     [1] -1

  (and I still don't understand why nobody on the S version 4 beta list
   had answered my concern then ...)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Arne.Kovac@uni-essen.de  Wed Mar 24 12:31:46 1999
From: Arne.Kovac@uni-essen.de (Arne Kovac)
Date: Wed, 24 Mar 1999 13:31:46 +0100 (NFT)
Subject: Problems with Postscript output
Message-ID: <Pine.A41.4.02.9903241313010.3000-100000@gauss.mathematik.uni-essen.de>

Hi,

I have a problem with the Postscript mechanism of R:

If I save figures in landscape format and try to insert them into a LaTeX
document, I always have to swap the dimensions of the bounding box in line
9 of the Postscript file. Is there any reason why we can't simply swap
left and bottom as well as right and top in line 435 of devPS.c?

Thanks

Arne

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 24 13:54:36 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Mar 1999 14:54:36 +0100
Subject: Problems with Postscript output
In-Reply-To: Arne Kovac's message of "Wed, 24 Mar 1999 13:31:46 +0100 (NFT)"
References: <Pine.A41.4.02.9903241313010.3000-100000@gauss.mathematik.uni-essen.de>
Message-ID: <x2u2vbj8mb.fsf@blueberry.kubism.ku.dk>

Arne Kovac <kovac@gauss.mathematik.uni-essen.de> writes:

> Hi,
> 
> I have a problem with the Postscript mechanism of R:
> 
> If I save figures in landscape format and try to insert them into a LaTeX
> document, I always have to swap the dimensions of the bounding box in line
> 9 of the Postscript file. Is there any reason why we can't simply swap
> left and bottom as well as right and top in line 435 of devPS.c?
> 
> Thanks
> 
> Arne

Which version are we talking about?

If it is not 0.63.3, try upgrading.

If it is ... well, then different programs must disagree on what the
correct definition of a BoundingBox is.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plindsey@alpha.luc.ac.be  Wed Mar 24 14:51:12 1999
From: plindsey@alpha.luc.ac.be (plindsey@alpha.luc.ac.be)
Date: Wed, 24 Mar 1999 15:51:12 +0100
Subject: nlm docs (PR#146)
Message-ID: <199903241451.PAA10096@blueberry.kubism.ku.dk>

In R.63.3, in the docs for nlm the section on code is messed up.
(apparently there is a problem in the commands in the Rd-file)
Patrick.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 24 14:54:47 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Mar 1999 15:54:47 +0100
Subject: nlm docs (PR#146)
In-Reply-To: plindsey@alpha.luc.ac.be's message of "Wed, 24 Mar 1999 15:51:12 +0100"
References: <199903241451.PAA10096@blueberry.kubism.ku.dk>
Message-ID: <x2soavj5u0.fsf@blueberry.kubism.ku.dk>

plindsey@alpha.luc.ac.be writes:

> In R.63.3, in the docs for nlm the section on code is messed up.
> (apparently there is a problem in the commands in the Rd-file)
> Patrick.

Thanks. This is the kind of documentation bug that so easily goes
unreported. Keep 'em coming.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Mar 24 16:04:43 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 24 Mar 1999 17:04:43 +0100 (CET)
Subject: R-0.63.3 package on IRIX 6.5 machine (PR#145)
In-Reply-To: <199903232158.WAA27947@blueberry.kubism.ku.dk>
References: <199903232158.WAA27947@blueberry.kubism.ku.dk>
Message-ID: <14073.3355.999038.549574@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 23 Mar 1999 22:58:04 +0100,
>>>>> jsarma  (j) wrote:

j> Hi,

j> When I type gmake, I got one error message:

j> gmake[2]: Entering directory `/Apps/usr/local/R-0.63.3/doc'
j> Installing doc ...
j> install:  ../doc/html/search/index.txt does not exist
j> gmake[2]: *** [install-html] Error 1

Hmm, this works perfecctly fine here on my machine. The index.txt file
is built during `make docs', so if it is missing the error should be
earlier than when doing `make install' ... are there any unusual
messages earlier in the make process?

Has anybody else experienced this problem?


Best,

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch=20
Institut f=FCr Statistik                     Tel: (+43 1) 58801 10715
Technische Universit=E4t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Thu Mar 25 10:49:26 1999
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Thu, 25 Mar 1999 11:49:26 +0100
Subject: readline() (PR#147)
Message-ID: <199903251049.LAA17284@blueberry.kubism.ku.dk>

Dear R developers,
I have found the following bug with readline() in R 0.63.3:
if you execute the menu-function and then the readline() function, then
readline() prompts "Selection:"

> a <- readline()
hello
> a
[1] "hallo"
> a <- menu(c("a", "b"), title="bitte:")
bitte: 
1:a 
2:b 
Selection: 2
> a <- readline()
Selection: hello
> a
[1] "hello"

By the way, wouldn't it be nice, if readline() had an argument `text', so
one wouldn't need to use the ugly construction

cat(text)
a <- readline()

Default of text could be "", so there would be no problem with
compatibility.

Peter

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.5
 arch = sparc
 os = solaris2.5
 system = sparc, solaris2.5
 status = 
 status.rev = 0
 major = 0
 minor = 63.3
 year = 1999
 month = March
 day = 6
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 12:08:58 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 1999 13:08:58 +0100
Subject: readline() (PR#147)
In-Reply-To: holzer@stat.math.ethz.ch's message of "Thu, 25 Mar 1999 11:49:26 +0100"
References: <199903251049.LAA17284@blueberry.kubism.ku.dk>
Message-ID: <x2n211zs85.fsf@blueberry.kubism.ku.dk>

holzer@stat.math.ethz.ch writes:

> > a <- menu(c("a", "b"), title="bitte:")
> bitte: 
> 1:a 
> 2:b 
> Selection: 2
> > a <- readline()
> Selection: hello
> > a
> [1] "hello"

Obviously a bug, which we'll get around to in due time. I'll just put
this in to remind the fixer that a similar bug got fixed very
recently.

> 
> By the way, wouldn't it be nice, if readline() had an argument `text', so
> one wouldn't need to use the ugly construction
> 
> cat(text)
> a <- readline()
> 
> Default of text could be "", so there would be no problem with
> compatibility.

Good idea.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Mar 25 12:16:50 1999
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Thu, 25 Mar 1999 13:16:50 +0100
Subject: readline() (PR#147)
Message-ID: <199903251216.NAA17312@blueberry.kubism.ku.dk>

This is PR#12 (menu buglet) which was reported
fixed on Feb 17 and now resides in In-Out-Fixed.
Martyn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 12:21:39 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 1999 13:21:39 +0100
Subject: [R] Change of parsing parameters to functions between 0.63.1  and 0.63.3 ?
In-Reply-To: Prof Brian D Ripley's message of "Wed, 24 Mar 1999 18:37:05 +0000 (GMT)"
References: <Pine.GSO.4.05.9903241827480.6272-100000@auk.stats>
Message-ID: <x2lnglzrn0.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Wed, 24 Mar 1999, Athula Herath wrote:
> 
> > I wonder whether the mechanism of parsing parameters to functions has
> > changed between 0.63.1 and 0.63.3? The following code yeilds different
> 
> No, but the handling of attributes has.
> 
> > results in R 0.63.1 (Version 0.63.1  (Dec 5, 1998)) and R 0.63.3. 
> > 
> > cave<-function(x,a,b)
> > {
> > 	return(c(mean(x[a],na.rm=T),mean(x[b],na.rm=T)))
> > }
> > datx <- data.frame(rbind(c(1,2,3,4),c(4,5,6,7)))
> > names(datx)<-c("A","B","C","D")
> > f1<-c("A","C")
> > f2<-c("B","D")
> > t1<-apply(datx,1,cave,f1,f2)
> 
> The help page for apply says

(moved to R-devel)

Hmm. I actually committed my patch for apply() before seeing Brians
reply. Given that 

(a) The above code works as intended in Splus 3.4

(b) This is more or less orthogonal to the issue of having attributes
    to the result of a subsetting operation (it has to do with
    attributes on the arguments to FUN, not the result).

(c) Some effort was already being used in the case of more-than-one
    dimensional slices to get the names passed down [using
    array(newX[,i], d.call, dn.call) with dn.call containing the
    names]
    
..should I consider that a bad move?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Thu Mar 25 12:38:20 1999
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Thu, 25 Mar 1999 13:38:20 +0100
Subject: Missing Warning in : (PR#148)
Message-ID: <199903251238.NAA17354@blueberry.kubism.ku.dk>


If a sequence is generated via "from:to" and "from" is a vector and not
a scalar, R gives a warning that only the first value is used. If "to"
is a vector, there is no warning.

Example:

> (1:4):10  # warning
Warning in (1:4):10 : Numerical expression has 4 elements: only the first used
 [1]  1  2  3  4  5  6  7  8  9 10
> 1:(10:12) # NO warning
 [1]  1  2  3  4  5  6  7  8  9 10

	Andreas


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Unstable
 status.rev = 0
 major = 0
 minor = 64.0
 year = 1999
 month = March
 day = 19
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 25 13:12:48 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 25 Mar 1999 14:12:48 +0100
Subject: [R] Change of parsing parameters to functions between 0.63.1  and 0.63.3 ?
In-Reply-To: <x2lnglzrn0.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 25 Mar 1999 13:21:39 +0100)
References: <Pine.GSO.4.05.9903241827480.6272-100000@auk.stats> <x2lnglzrn0.fsf@blueberry.kubism.ku.dk>
Message-ID: <199903251312.OAA06684@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
    >> On Wed, 24 Mar 1999, Athula Herath wrote:
    >> 
    >> > I wonder whether the mechanism of parsing parameters to functions
    >> has > changed between 0.63.1 and 0.63.3? The following code yeilds
    >> different
    >> 
    >> No, but the handling of attributes has.
    >> 
    >> > results in R 0.63.1 (Version 0.63.1 (Dec 5, 1998)) and R 0.63.3.
    >> > 
    >> > cave<-function(x,a,b) > { >
    >> return(c(mean(x[a],na.rm=T),mean(x[b],na.rm=T))) > } > datx <-
    >> data.frame(rbind(c(1,2,3,4),c(4,5,6,7))) >
    >> names(datx)<-c("A","B","C","D") > f1<-c("A","C") > f2<-c("B","D") >
    >> t1<-apply(datx,1,cave,f1,f2)
    >> 
    >> The help page for apply says

    PD> (moved to R-devel)

    PD> Hmm. I actually committed my patch for apply() before seeing Brians
    PD> reply. Given that

    PD> (a) The above code works as intended in Splus 3.4

    PD> (b) This is more or less orthogonal to the issue of having
    PD> attributes to the result of a subsetting operation (it has to do
    PD> with attributes on the arguments to FUN, not the result).

    PD> (c) Some effort was already being used in the case of more-than-one
    PD> dimensional slices to get the names passed down [using
    PD> array(newX[,i], d.call, dn.call) with dn.call containing the names]
    
    PD> ..should I consider that a bad move?
		           ^^^^^^
			   (your patch)
Yes, I actually think
your patch should be reverted ___ especially since it even breaks
     example(apply)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 13:49:58 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 1999 14:49:58 +0100
Subject: [R] Change of parsing parameters to functions between 0.63.1  and 0.63.3 ?
In-Reply-To: Martin Maechler's message of "Thu, 25 Mar 1999 14:12:48 +0100"
References: <Pine.GSO.4.05.9903241827480.6272-100000@auk.stats> <x2lnglzrn0.fsf@blueberry.kubism.ku.dk> <199903251312.OAA06684@sophie.ethz.ch>
Message-ID: <x2soat4r21.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     PD> dimensional slices to get the names passed down [using
>     PD> array(newX[,i], d.call, dn.call) with dn.call containing the names]
>     
>     PD> ..should I consider that a bad move?
>                     	     ^^^^^^
> 			   (your patch)
> Yes, I actually think
> your patch should be reverted ___ especially since it even breaks
>      example(apply)

Oh sh...! I thought that "length(d.call) < 2" bit looked fishy. Forgot
(or whatever) that the 0 case was in fact possible.

But that is easily fixable, just don't do in the extreme case.
This seems to work better:

    if ((i.vec <- length(d.call) < 2)) 
        for (i in 1:d2) {
            xi <- newX[, i]
            if (length(dn.call) == 1) 
                names(xi) <- dn.call[[1]]
            ans[[i]] <- FUN(xi, ...)
        }
    else for (i in 1:d2) ans[[i]] <- FUN(array(newX[, i], d.call, 
        dn.call), ...)

*NOW* should we keep it?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 25 13:48:56 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 25 Mar 1999 14:48:56 +0100
Subject: nlm docs (PR#146)
In-Reply-To: <x2soavj5u0.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 24 Mar 1999 15:54:47 +0100)
References: <199903241451.PAA10096@blueberry.kubism.ku.dk> <x2soavj5u0.fsf@blueberry.kubism.ku.dk>
Message-ID: <199903251348.OAA07255@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> plindsey@alpha.luc.ac.be writes:
    >> In R.63.3, in the docs for nlm the section on code is messed up.
    >> (apparently there is a problem in the commands in the Rd-file)
    >> Patrick.

    PD> Thanks. This is the kind of documentation bug that so easily goes
    PD> unreported. Keep 'em coming.

Yes, indeed!

---
The above bug is actually not a problem in
    src/library/base/man/nlm.Rd
but in the code in	  
    etc/Rdconvlib.pl

The construct
      \describe{
	\item{1:}{bla bla}
	\item{2:}{blech blech}
      }

is well translated to  both  LaTeX  and HTML, 
but not to NROFF (basis for ASCII). 
 
===>  Any help from  "Roff" knowledgables ????
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Mar 25 16:53:20 1999
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Thu, 25 Mar 1999 17:53:20 +0100
Subject: readline() (PR#147)
Message-ID: <199903251653.RAA23762@blueberry.kubism.ku.dk>

plummer@iarc.fr wrote somewhat hastily:
> 
> This is PR#12 (menu buglet) which was reported
> fixed on Feb 17 and now resides in In-Out-Fixed.
> Martyn

No it isn't. It is in fact _caused_ by the fix to
that problem, which I provided. Sorry!
M.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 17:09:04 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 1999 18:09:04 +0100
Subject: readline() (PR#147)
In-Reply-To: plummer@iarc.fr's message of "Thu, 25 Mar 1999 17:53:20 +0100"
References: <199903251653.RAA23762@blueberry.kubism.ku.dk>
Message-ID: <x2n2114hu7.fsf@blueberry.kubism.ku.dk>

plummer@iarc.fr writes:

> plummer@iarc.fr wrote somewhat hastily:
> > 
> > This is PR#12 (menu buglet) which was reported
> > fixed on Feb 17 and now resides in In-Out-Fixed.
> > Martyn
> 
> No it isn't. It is in fact _caused_ by the fix to
> that problem, which I provided. Sorry!
> M.

Great... Now do you have a fix for the fix? ;^)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 25 17:56:16 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 25 Mar 1999 18:56:16 +0100
Subject: [R] Change of parsing parameters to functions between 0.63.1  and 0.63.3 ?
In-Reply-To: <x2soat4r21.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 25 Mar 1999 14:49:58 +0100)
References: <Pine.GSO.4.05.9903241827480.6272-100000@auk.stats> <x2lnglzrn0.fsf@blueberry.kubism.ku.dk> <199903251312.OAA06684@sophie.ethz.ch> <x2soat4r21.fsf@blueberry.kubism.ku.dk>
Message-ID: <199903251756.SAA07768@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Martin Maechler <maechler@stat.math.ethz.ch> writes:
    PD> dimensional slices to get the names passed down [using
    PD> array(newX[,i], d.call, dn.call) with dn.call containing the names]
    >> 
    PD> ..should I consider that a bad move?
    >> ^^^^^^
    >> (your patch)
    >> Yes, I actually think
    >> your patch should be reverted ___ especially since it even breaks
    >> example(apply)

    PD> Oh sh...! I thought that "length(d.call) < 2" bit looked fishy. Forgot
    PD> (or whatever) that the 0 case was in fact possible.

    PD> But that is easily fixable, just don't do in the extreme case.
    PD> This seems to work better:

    PD> if ((i.vec <- length(d.call) < 2)) 
    PD> for (i in 1:d2) {
    PD> xi <- newX[, i]
    PD> if (length(dn.call) == 1) 
    PD> names(xi) <- dn.call[[1]]
    PD> ans[[i]] <- FUN(xi, ...)
    PD> }
    PD> else for (i in 1:d2) ans[[i]] <- FUN(array(newX[, i], d.call, dn.call), ...)

    PD> *NOW* should we keep it?

According to our general strategy  

   ``Be S compatible unless there's a good reason for NOT being..''

I think we should keep it.
I did some very limited CPU usage testing and the new code (compared to 0.63.3)
seems to increase CPU usage by less than 1%  (no std.err available on this :-)

---> committed -- including a new help-example exhibiting the new behavior

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Mar 25 20:06:45 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 25 Mar 1999 14:06:45 -0600
Subject: Using zip format for help pages, examples, etc.
Message-ID: <6rn211jpuy.fsf@verdi.stat.wisc.edu>

At the Vienna meeting we discussed the problems encountered on some
operating systems when storing many small files in a directory.  In
particular the directories $RHOME/library/base/help/,
$RHOME/library/base/R-ex/, and $RHOME/library/base/data/ can take up
an enormous amount of storage on the Macintosh or on Windows systems
because the minimum amount of storage per distinct file is quite
large.

Fritz Leisch and I suggested storing the contents of each of these
directories as a single .zip file.  This should result in considerable
savings in size with little penalty in access speed.

To implement this we would need code for accessing files within a .zip
archive and for decompressing the files.  I know of the files from
Info-Zip including the zlib sources (compression/decompression) and
the contrib/minizip directory in the zlib source tree.  The minizip
directory provides a prototype unzip.c and unzip.h.  These would be
used to modify the R internal function file.exists and file.show so
they could look in the archive as well as in a directory.

Does anyone know of a reason why this would not be a good idea?  Does
anyone know of better|more_portable|whatever implementations of code
to access files within a .zip archive.  The info-zip sources are
available at http://www.cdrom.com/pub/infozip/zlib/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 20:22:49 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 25 Mar 1999 21:22:49 +0100
Subject: plot.formula and pch= (PR#149)
Message-ID: <199903252022.VAA26066@blueberry.kubism.ku.dk>

I'm not sure exactly where to point my finger with this one, but there
is a nasty surprise to the unsuspecting user.

There is no check on the length of the vector passed in the pch=
argument to plot, it is just recycled as necessary:

plot(1:10,1:10,pch=1:2)

gives alternating circles and triangles. 

The nasty bits come up especially with plot.formula:

x<-1:10;y<-1:10 
plot(y~x,subset=x%%2==1,pch=x%%2)

- and the plotting symbols are *not* all the same. Even more
  pernicious, if missing values are involved:

> y[x%%2==1]<-NA
> plot(y~x,pch=x%%2)

gives you the wrong symbols (in practice, this messes up things like 
plot(height~age,pch=sex) rather badly!).

It would help to get a warning that the lengths don't match, but are
there any good uses of the recycling of pch?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar 25 21:03:26 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 25 Mar 1999 21:03:26 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
In-Reply-To: <6rn211jpuy.fsf@verdi.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.9903252051410.13689-100000@auk.stats>

On 25 Mar 1999, Douglas Bates wrote:

> At the Vienna meeting we discussed the problems encountered on some
> operating systems when storing many small files in a directory.  In
> particular the directories $RHOME/library/base/help/,
> $RHOME/library/base/R-ex/, and $RHOME/library/base/data/ can take up
> an enormous amount of storage on the Macintosh or on Windows systems
> because the minimum amount of storage per distinct file is quite
> large.

Not just base: lme is at least as bad and MASS and boot are large too.

> Fritz Leisch and I suggested storing the contents of each of these
> directories as a single .zip file.  This should result in considerable
> savings in size with little penalty in access speed.
> 
> To implement this we would need code for accessing files within a .zip
> archive and for decompressing the files.  I know of the files from
> Info-Zip including the zlib sources (compression/decompression) and
> the contrib/minizip directory in the zlib source tree.  The minizip
> directory provides a prototype unzip.c and unzip.h.  These would be
> used to modify the R internal function file.exists and file.show so
> they could look in the archive as well as in a directory.
> 
> Does anyone know of a reason why this would not be a good idea?  Does
> anyone know of better|more_portable|whatever implementations of code
> to access files within a .zip archive.  The info-zip sources are
> available at http://www.cdrom.com/pub/infozip/zlib/

Those are the ones I was looking at: they do seem portable, if slow.

However, I am not sure that file.exists and file.show should be 
overloaded, and for data() you need rather more than those. What is needed
I think is a function to extract a file from an archive to a temporary
file, to be based to file.show or to source or load.  There is a snag
in ensuring that temporary files get deleted, but file.show has a flag for
this, and example and data could have an on.exit call to file.remove.

One important point is that AnIndex and 00Titles are in help, and they
probably should be kept uncompressed (not least as the PERL scripts read
them).

It would be easy to mock this up using scripts. Who is doing this?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jean@stat.ubc.ca  Fri Mar 26 01:12:05 1999
From: jean@stat.ubc.ca (Jean Meloche)
Date: Thu, 25 Mar 1999 17:12:05 -0800
Subject: anova.lm bug
Message-ID: <36FADEE5.470A51E1@stat.ubc.ca>

anova.lm does not work on a lm fit with singularities (using singular.ok=TRUE)
because of mismatch between the anova table length and fit$terms lebgth.
The following works for me:

anova.lm <- function(object, ...)
{
    if(length(list(object, ...)) > 1)
        return(anovalist.lm(object, ...))
    w <- weights(object)
    ssr <- sum(if(is.null(w)) resid(object)^2 else w*resid(object)^2)
    p1 <- 1:object$rank
    comp <- object$effects[p1]
    tlabels <- names(object$effects[p1])                        <- get the matching labels
    asgn <- object$assign[object$qr$pivot][p1]
    dfr <- df.residual(object)
    ss <- c(as.numeric(lapply(split(comp^2,asgn),sum)),ssr)
    df <- c(as.numeric(lapply(split(asgn,  asgn),length)), dfr)
    if(attr(object$terms,"intercept")) {
        ss <- ss[-1]
        df <- df[-1]
        tlabels <- tlabels[-1]                                  <- remove intercept
    }
    ms <- ss/df
    f <- ms/(ssr/dfr)
    p <- 1 - pf(f,df,dfr)
    table <- data.frame(df,ss,ms,f,p)
    table[length(p),4:5] <- NA
    dimnames(table) <- list(c(tlabels, "Residuals"),            <- use the right labels
                            c("Df","Sum Sq", "Mean Sq", "F value", "Pr(>F)"))

    structure(table, heading = c("Analysis of Variance Table\n",
                     paste("Response:", formula(object)[[2]])),
              class= c("anova", "data.frame"))# was "tabular"
}

-- 
Jean Meloche
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adelchi.azzalini@jrc.it  Fri Mar 26 08:30:13 1999
From: adelchi.azzalini@jrc.it (adelchi.azzalini@jrc.it)
Date: Fri, 26 Mar 1999 09:30:13 +0100
Subject: R: error report (PR#150)
Message-ID: <199903260830.JAA26417@blueberry.kubism.ku.dk>

This is a multi-part message in MIME format.
--------------25A3389DABC0A1B4530C7640
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi.

I have been told (by R) to report an error.
Running the attached file simul-pic.R produces the
somthing like the following 

>   source("simul-pic.R")
[1] 50.000  2.539
    poisson binomial f.srs f.pps
0   7.89403  7.38439  5.64  6.32
1  20.04344 19.75250 17.28 20.64
2  25.44578 25.88961 25.00 26.96
3  21.53616 22.16067 24.56 22.48
4  13.67042 13.93022 14.80 13.92
5   6.94201  6.85619  7.48  6.12
6   2.93770  2.75094  3.72  2.68
7   1.06557  0.92507  1.24  0.64
8   0.33819  0.26600  0.20  0.16
9   0.09541  0.06641  0.08  0.08
10  0.02423  0.01457  0.00  0.00
Error: Bad units specified in GConvert, please report!
> 

The program should generate a pictex file, but it fails
to complete it.  Replicated executions produce slightly 
different outcomes, but still an error.

If I comment out the lines following the PicTeX line,
then the program runs with no error.

The environment is WinNT 4.0 with R Version 0.63.2 Beta 
(Jan 12, 1999).

I have first contacted Guido Masarotto about this problem,
but the same thing occurs on the Unix version of R, and
he suggested to write to your address.

Reagards, 
Adelchi Azzalini
--------------25A3389DABC0A1B4530C7640
Content-Type: application/x-tex;
 name="simul-00.tex"
Content-Disposition: inline;
 filename="simul-00.tex"
Content-Transfer-Encoding: 7bit

\hbox{\beginpicture
\setcoordinatesystem units <1pt,1pt>
\setplotarea x from 0 to 0.00, y from 0 to 0.00
\setlinear
\font\picfont cmss10\picfont
\font\picfont cmss10 at 10pt\picfont
\font\picfont cmss10 at 10pt\picfont
\setsolid
\plot 45.02 50.98 45.02 110.81 /
\setsolid
\plot 72.15 50.98 72.15 202.87 /
\setsolid
\plot 99.28 50.98 99.28 243.81 /
\setsolid
\plot 126.41 50.98 126.41 214.19 /
\setsolid
\plot 153.54 50.98 153.54 154.58 /
\setsolid
\plot 180.67 50.98 180.67 103.59 /
\setsolid
\plot 207.81 50.98 207.81 73.25 /
\setsolid
\plot 234.94 50.98 234.94 59.06 /
\setsolid
\plot 262.07 50.98 262.07 53.55 /
\setsolid
\plot 289.20 50.98 289.20 51.71 /
\setsolid
\plot 316.33 50.98 316.33 51.17 /
\setsolid
\plot 45.02 42.50 316.33 42.50 /
\setsolid
\plot 45.02 42.50 45.02 38.33 /
\setsolid
\plot 99.28 42.50 99.28 38.33 /
\setsolid
\plot 153.54 42.50 153.54 38.33 /
\setsolid
\plot 207.81 42.50 207.81 38.33 /
\setsolid
\plot 262.07 42.50 262.07 38.33 /
\setsolid
\plot 316.33 42.50 316.33 38.33 /
\put {0}  [lB] <-2.50pt,0.00pt> at 45.02 25.83
\put {2}  [lB] <-2.50pt,0.00pt> at 99.28 25.83
\put {4}  [lB] <-2.50pt,0.00pt> at 153.54 25.83
\put {6}  [lB] <-2.50pt,0.00pt> at 207.81 25.83
\put {8}  [lB] <-2.50pt,0.00pt> at 262.07 25.83
\put {10}  [lB] <-5.00pt,0.00pt> at 316.33 25.83
\setsolid
\plot 34.17 50.98 34.17 240.43 /
\setsolid
\plot 34.17 50.98 30.00 50.98 /
\setsolid
\plot 34.17 88.87 30.00 88.87 /
\setsolid
\plot 34.17 126.76 30.00 126.76 /
\setsolid
\plot 34.17 164.65 30.00 164.65 /
\setsolid
\plot 34.17 202.54 30.00 202.54 /
\setsolid
\plot 34.17 240.43 30.00 240.43 /
\put {0.00}  [rB] <0.00pt,-4.17pt> at 25.83 50.98
\put {0.05}  [rB] <0.00pt,-4.17pt> at 25.83 88.87
\put {0.10}  [rB] <0.00pt,-4.17pt> at 25.83 126.76
\put {0.15}  [rB] <0.00pt,-4.17pt> at 25.83 164.65
\put {0.20}  [rB] <0.00pt,-4.17pt> at 25.83 202.54
\put {0.25}  [rB] <0.00pt,-4.17pt> at 25.83 240.43
\setsolid
\plot 34.17 42.50 327.18 42.50 /
\plot 327.18 42.50 327.18 271.58 /
\plot 327.18 271.58 34.17 271.58 /
\plot 34.17 271.58 34.17 42.50 /
\put {m}  [lB] <-3.97pt,0.00pt> at 180.67 9.17
\put {Prob(M=m)}  [rB] <0.00pt,-4.17pt> at 9.17 157.04
\circulararc 360 degrees from 45.02 112.87 center at 45.02 110.81
\circulararc 360 degrees from 72.15 204.94 center at 72.15 202.87
\circulararc 360 degrees from 99.28 245.88 center at 99.28 243.81
\circulararc 360 degrees from 126.41 216.25 center at 126.41 214.19
\circulararc 360 degrees from 153.54 156.64 center at 153.54 154.58
\circulararc 360 degrees from 180.67 105.65 center at 180.67 103.59
\circulararc 360 degrees from 207.81 75.31 center at 207.81 73.25
\circulararc 360 degrees from 234.94 61.12 center at 234.94 59.06
\circulararc 360 degrees from 262.07 55.61 center at 262.07 53.55
\circulararc 360 degrees from 289.20 53.77 center at 289.20 51.71
\circulararc 360 degrees from 316.33 53.23 center at 316.33 51.17
\font\picfont cmssbx10 at 9pt\picfont
\put {Simulated no. of events and Poisson approximation}  [lB] <-103.02pt,-3.75pt> at 180.67 288.66
\put {  }  [lB] <-2.30pt,-3.75pt> at 180.67 280.33
\pu

--------------25A3389DABC0A1B4530C7640
Content-Type: application/x-unknown-content-type-R_auto_file;
 name="simul-pic.R"
Content-Disposition: inline;
 filename="simul-pic.R"
Content-Transfer-Encoding: base64

IyBzaW11bGF6aW9uZSBkZWxsYSBkaXN0cmlidXppb25lIGVzYXR0YSBkaSBNLCANCiMgZSBj
b25mb250byBjb24gdmMgUG9pc3NvbiANCiMgMjQvMy85OQ0KIw0KIy0tLS0tIGNvc3RydXpp
b25lIGRlbGxhIHBvcG9sYXppb25lDQpOPC0xMDAwDQp4PC1yZ2FtbWEoTiwxLDUpDQpUeDwt
c3VtKHgpDQpwcm9iLmV2ZW50IDwtZnVuY3Rpb24oeCwgcGhpMCwgYmV0YSkgcGhpMC8oMStl
eHAoLWJldGEqeCkpIA0KcGhpMCA8LSAwLjENCmJldGEgPC0gMA0KSXogPC0gcmJpbm9tKE4s
MSxwcm9iLmV2ZW50KHgscGhpMCxiZXRhKSkgIyB2LmluZGljYXRyaWNpIGRpIChaPjApDQpU
eGQ8LXN1bSh4Kkl6KQ0KIw0KIy0tLS0tIGFwcHJveCBkaSBQb2lzc29uDQpzYW1wbGluZy5m
cmFjdGlvbiA8LSAwLjA1DQpuIDwtIHJvdW5kKE4qc2FtcGxpbmcuZnJhY3Rpb24pDQpwMSA8
LSBUeGQvVHgNCm1heC5tIDwtIHJvdW5kKG1heCg1LDQqcDEqbikpDQpwb2lzc29uIDwtIGRw
b2lzKDA6bWF4Lm0sbipwMSkNCnByaW50KGMobixwMSpuKSkNCmJpbm9taWFsPC1kYmlub20o
MDptYXgubSxuLHAxKQ0KcGxvdCgwOm1heC5tLHBvaXNzb24sdHlwZT0iaCIsY29sPTIseGxh
Yj0ibSIseWxhYj0iUHJvYihNPW0pIiwNCiAgICAgeWxpbT1jKDAsbWF4KHBvaXNzb24pKjEu
MSkpDQpwb2ludHMoMDptYXgubSxwb2lzc29uLHBjaD0xLGNvbD0yKQ0KIw0KIy0tLS0tIHNp
bXVsYXppb25lIGRpc3RyaWIuZXNhdHRhDQpuLnJlcGw8LSA1MDAwMA0Kc3JzIDwtIHJlcCgx
L04sTikNCnBwcyA8LSB4L3N1bSh4KQ0KbS5zcnMgPC0gbS5wcHMgPC1yZXAoTkEsbi5yZXBs
KQ0KZm9yKGkgaW4gMTpuLnJlcGwpew0KICBzLnNyczwtc2FtcGxlKDE6TixuLHByb2I9c3Jz
KQ0KICBzLnBwczwtc2FtcGxlKDE6TixuLHByb2I9cHBzKQ0KICBtLnNyc1tpXSA8LSBzdW0o
SXpbcy5zcnNdKQ0KICBtLnBwc1tpXSA8LSBzdW0oSXpbcy5wcHNdKQ0KfQ0KZi5zcnM8LXRh
YmxlKG0uc3JzKS9uLnJlcGwNCmYuc3JzPC1jKGYuc3JzLHJlcCgwLDEwMCkpWzE6KG1heC5t
KzEpXQ0KZi5wcHM8LXRhYmxlKG0ucHBzKS9uLnJlcGwNCmYucHBzPC1jKGYucHBzLHJlcCgw
LDEwMCkpWzE6KG1heC5tKzEpXQ0KDQpwb2ludHMoMDptYXgubSwgZi5zcnMsIHBjaD0yLGNv
bD0zKQ0KcG9pbnRzKDA6bWF4Lm0sIGYucHBzLCBwY2g9NCxjb2w9NCkNCnBhcihjZXg9MC43
NSkNCnRpdGxlKG1haW49cGFzdGUoIlNpbXVsYXRlZCBuby4gb2YgZXZlbnRzIGFuZCBQb2lz
c29uIGFwcHJveGltYXRpb25cbiIsDQogICAgICAiIFxuIiwiTj0iLE4sIiwgc2FtcGxpbmcg
ZnJhY3Rpb249IixuL04sIiwgcmVwbGljYXRlcz0iLG4ucmVwbCkpDQpsZWdlbmQoeD1tYXgu
bSowLjcseT1tYXgocG9pc3NvbiksDQogICAgICAgbGVnZW5kPWMoIlBvaXNzb24gYXBwcm94
Iiwic2ltdWxhdGVkIFNSUyIsInNpbXVsYXRlZCBQUFMiKSwNCiAgICAgICBwY2g9YygxLDIs
NCkpDQpwYXIoY2V4PTEpDQpvdXQ8LSBkYXRhLmZyYW1lKHBvaXNzb24sYmlub21pYWwsZi5z
cnMsZi5wcHMscm93Lm5hbWVzPSgwOm1heC5tKSkNCnByaW50KG91dCoxMDApDQoNCiMtLS0t
LSAgUGljVGVYDQpwaWN0ZXgoZmlsZT0ic2ltdWwtMDAudGV4IikNCnBsb3QoMDptYXgubSxw
b2lzc29uLHR5cGU9ImgiLGNvbD0yLHhsYWI9Im0iLHlsYWI9IlByb2IoTT1tKSIsDQogICAg
IHlsaW09YygwLG1heChwb2lzc29uKSoxLjEpKQ0KcG9pbnRzKDA6bWF4Lm0scG9pc3Nvbixw
Y2g9MSxjb2w9MikNCnBhcihjZXg9MC43NSkNCnRpdGxlKG1haW49cGFzdGUoIlNpbXVsYXRl
ZCBuby4gb2YgZXZlbnRzIGFuZCBQb2lzc29uIGFwcHJveGltYXRpb25cbiIsDQogICAgICAg
IiBcbiIsIk49IixOLCIsIHNhbXBsaW5nIGZyYWN0aW9uPSIsbi9OLCIsIHJlcGxpY2F0ZXM9
IixuLnJlcGwpKQ0KbGVnZW5kKHg9bWF4Lm0qMC43LHk9bWF4KHBvaXNzb24pLA0KICAgICAg
IGxlZ2VuZD1jKCJQb2lzc29uIGFwcHJveCIsInNpbXVsYXRlZCBTUlMiLCJzaW11bGF0ZWQg
UFBTIiksDQogICAgICAgcGNoPWMoMSwyLDQpKQ0KcGFyKGNleD0xKQ0KcG9pbnRzKDA6bWF4
Lm0sIGYuc3JzLCBwY2g9Mixjb2w9MykNCnBvaW50cygwOm1heC5tLCBmLnBwcywgcGNoPTQs
Y29sPTQpDQpYMTEoKQ0KDQo=
--------------25A3389DABC0A1B4530C7640--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Fri Mar 26 08:59:03 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Fri, 26 Mar 1999 08:59:03 +0000 (GMT)
Subject: plot.formula and pch= (PR#149)
In-Reply-To: <199903252022.VAA26066@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.3.96.990326085613.1783F-100000@laplace>

On Thu, 25 Mar 1999 p.dalgaard@biostat.ku.dk wrote:

> There is no check on the length of the vector passed in the pch=
> argument to plot, it is just recycled as necessary:

<...>

> It would help to get a warning that the lengths don't match, but are
> there any good uses of the recycling of pch?

There might be a case for it in time series graphs, where there are
periodic characteristics of the data (days of the week, for example).

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Mar 26 11:11:00 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Mar 1999 12:11:00 +0100
Subject: Using zip format for help pages, examples, etc.
References: <6rn211jpuy.fsf@verdi.stat.wisc.edu>
Message-ID: <36FB6B44.127364FF@iarc.fr>

This sounds similar to the Virtual File System (VFS) used by
the GNU Midnight Commander (a file manager programme).  VFS
allows you to browse files that are not on your native file
system. Among other things, you can look inside tar and
compressed tar files as if they were unpacked.

ZIP file support isn't very good - it's just a shell script
interface to the zip programme - but I suppose this could be
done internally like the "utar" filesystem.

The VFS code comes with the Midnight Commander, but it is
supposed to compile as a standalone library. If this works,
and is portable (!), it might be cleaner to use libvfs than to
do this inside R. Or maybe not. Anyway here is the URL:

http://www.gnome.org/mc/

Martyn

P.S I once trashed my FAT file system by filling it with many
small files from gnu-win32 ports, so this may be a safety
issue as well as a speed one.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From N.J.Lee@statslab.cam.ac.uk  Fri Mar 26 11:44:44 1999
From: N.J.Lee@statslab.cam.ac.uk (Nicholas Lee)
Date: Fri, 26 Mar 1999 11:44:44 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
In-Reply-To: <36FB6B44.127364FF@iarc.fr>
Message-ID: <Pine.HPP.3.96.990326113941.8918A-100000@tiger.statslab.cam.ac.uk>


On Fri, 26 Mar 1999, Martyn Plummer wrote:

> This sounds similar to the Virtual File System (VFS) used by
> the GNU Midnight Commander (a file manager programme).  VFS
> allows you to browse files that are not on your native file
> system. Among other things, you can look inside tar and
> compressed tar files as if they were unpacked.


Why not just the approach that some linux distributions use, (debian at
least) of gziping the man pages individually.

Makes it easier and quicker to patch pages and doesn't require temporary
swap space for uncompressing a whole archive. 



Nicholas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Mar 26 12:12:45 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 26 Mar 1999 12:12:45 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
Message-ID: <199903261212.MAA00972@toucan.stats.ox.ac.uk>


> Date: Fri, 26 Mar 1999 11:44:44 +0000 (GMT)
> From: Nicholas Lee <N.J.Lee@statslab.cam.ac.uk>
> 
> Why not just the approach that some linux distributions use, (debian at
> least) of gziping the man pages individually.
> 
> Makes it easier and quicker to patch pages and doesn't require temporary
> swap space for uncompressing a whole archive. 

(1) The whole point is to avoid having many tiny files. On Windows
the current help files take up ca 37Mb on my VFAT file system, and about
1Mb in a zip archive. As Doug Bates said at the beginning of this thread:

> At the Vienna meeting we discussed the problems encountered on some
> operating systems when storing many small files in a directory.  In
> particular the directories $RHOME/library/base/help/,
> $RHOME/library/base/R-ex/, and $RHOME/library/base/data/ can take up
> an enormous amount of storage on the Macintosh or on Windows systems
> because the minimum amount of storage per distinct file is quite
> large.

(2) You can avoid uncompressing a whole archive with zip (not gzip).

(3) You should not be thinking about patching pages in an R
distribution:  whole R distributions are changed often enough.  It is
the installed pages (help, R-ex, latex) not the source pages (Rd) that
we are considering putting into a zip archive.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Mar 26 12:32:16 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Mar 1999 13:32:16 +0100
Subject: Using zip format for help pages, examples, etc.
References: <Pine.HPP.3.96.990326113941.8918A-100000@tiger.statslab.cam.ac.uk>
Message-ID: <36FB7E50.62F211B9@iarc.fr>

Nicholas Lee wrote:

> Why not just the approach that some linux distributions use,
> (debian at least) of gziping the man pages individually.

The problem isn't that the help files take up a lot of space,
but that certain file systems are extremely inefficient in
the use of that space.  FAT16 assigns disk space in allocation
units that are, roughly, proportional to the size of the
partition. I think a 1Gb partition has 16kb allocation units,
whereas most help files are only 1-2kb. If a file is already
smaller than an allocation unit, it won't take up any less space
when compressed. By putting lots of small files on one
archive, however, you get round the inefficiency of the filesystem.
M.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Mar 26 14:30:19 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 26 Mar 1999 14:30:19 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
In-Reply-To: <36FB7E50.62F211B9@iarc.fr>
Message-ID: <Pine.GSO.3.96.990326142228.1783H-100000@laplace>

On Fri, 26 Mar 1999, Martyn Plummer wrote:

> The problem isn't that the help files take up a lot of space,
> but that certain file systems are extremely inefficient in
> the use of that space.

This is probably an unrealistic suggestion, but if compression is less of
a problem than the number of files, why not take the help files `onboard'
by creating a new class of objects with mode "help", which would be lists
with components much like the current .Rd files, and attach them at the
bottom of the search list.  Each library would then require just a single
file of help objects.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Mar 26 14:52:24 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Mar 1999 15:52:24 +0100
Subject: Using zip format for help pages, examples, etc.
References: <Pine.GSO.3.96.990326142228.1783H-100000@laplace>
Message-ID: <36FB9F28.D1F2CBEF@iarc.fr>

Jonathan Rougier wrote:

> This is probably an unrealistic suggestion, but if compression is less of
> a problem than the number of files, why not take the help files `onboard'
> by creating a new class of objects with mode "help", which would be lists
> with components much like the current .Rd files, and attach them at the
> bottom of the search list.  Each library would then require just a single
> file of help objects.

Because R objects are stored in memory, and using 1Mb+ of RAM to
store help files is a bit of a waste.

This is an *operating system* issue, and it's only a problem for
OSs with crap file systems. It shouldn't require major changes to R.

M.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Mar 26 15:11:16 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 26 Mar 1999 15:11:16 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
Message-ID: <199903261511.PAA08981@toucan.stats.ox.ac.uk>

> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
> 
> On Fri, 26 Mar 1999, Martyn Plummer wrote:
> 
> > The problem isn't that the help files take up a lot of space,
> > but that certain file systems are extremely inefficient in
> > the use of that space.
> 
> This is probably an unrealistic suggestion, but if compression is less of
> a problem than the number of files, why not take the help files `onboard'
> by creating a new class of objects with mode "help", which would be lists
> with components much like the current .Rd files, and attach them at the
> bottom of the search list.  Each library would then require just a single
> file of help objects.

But then loading a `package' would take longer and use much more memory,
and memory in R is precious.

We have talked about concatenating the help/R-ex files into a single
file per package, and indexing it, but the zip file route avoids some
of the work and helps with compression too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Mar 26 15:24:06 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 26 Mar 1999 09:24:06 -0600
Subject: Using zip format for help pages, examples, etc.
In-Reply-To: Jonathan Rougier's message of "Fri, 26 Mar 1999 14:30:19 +0000 (GMT)"
References: <Pine.GSO.3.96.990326142228.1783H-100000@laplace>
Message-ID: <6ryakk2s15.fsf@verdi.stat.wisc.edu>

>>>>> "Jonathan" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

  Jonathan> On Fri, 26 Mar 1999, Martyn Plummer wrote:
  >> The problem isn't that the help files take up a lot of space, but
  >> that certain file systems are extremely inefficient in the use of
  >> that space.

  Jonathan> This is probably an unrealistic suggestion, but if
  Jonathan> compression is less of a problem than the number of files,
  Jonathan> why not take the help files `onboard' by creating a new
  Jonathan> class of objects with mode "help", which would be lists
  Jonathan> with components much like the current .Rd files, and
  Jonathan> attach them at the bottom of the search list.  Each
  Jonathan> library would then require just a single file of help
  Jonathan> objects.

This is a reasonable suggestion but I think that the way that R
handles its search lists would make this problematic.  At present
objects in a library take up space in memory whether they are used or
not.  Also, the search to resolve a name is a linear search over the
available names.  Adding a whole lot more names for help objects would
exacerbate both of those problems.  Then there is the name-space
pollution problem.

Approaches to all of these issues with names and objects are being
discussed and will probably be implemented in later releases.  Right
now I think the best approach to the problem of help files,
etc. (other than waiting for certain commercial operating systems to
catch up with concepts from the 1980's) is to use the zip format for
the reasons that Brian Ripley indicated.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar 26 15:55:40 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 26 Mar 1999 10:55:40 -0500
Subject: linear search
Message-ID: <99Mar26.110423est.13493@mailgate.bank-banque-canada.ca>

Doug Bates writes:
>... Also, the search to resolve a name is a linear search over the
>available names.  ...

Does anyone have an idea of how series a problem this is with large packages. R
still runs slower than Splus 3.3 for me, and I wonder how big a part of the
problem this is?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 26 16:29:29 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 26 Mar 1999 08:29:29 -0800 (PST)
Subject: linear search
In-Reply-To: <99Mar26.110423est.13493@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.10.9903260824130.2767-100000@wompom.biostat.washington.edu>

On Fri, 26 Mar 1999, Paul Gilbert wrote:

> Doug Bates writes:
> >... Also, the search to resolve a name is a linear search over the
> >available names.  ...
> 
> Does anyone have an idea of how series a problem this is with large packages. R
> still runs slower than Splus 3.3 for me, and I wonder how big a part of the
> problem this is?

A very limited profiling experiment about a year ago (so out of date as
well as limited) suggested that perhaps 15-30% of R's time is spent in the
linear search functions when running the survival4 test suite.

We do intend to implement hashing for name lookup fairly soon. It should
make a noticeable difference, especially with huge libraries like lme
(over 500 functions) loaded.

The relative speed of R and S-PLUS is very problem-dependent, so it's hard
to make any reliable predictions.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Mar 26 17:53:16 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 27 Mar 1999 05:53:16 +1200 (NZST)
Subject: linear search
Message-ID: <199903261753.FAA24087@stat1.stat.auckland.ac.nz>

> Paul Gilbert writes:
>
> Does anyone have an idea of how series a problem this is with large
> packages. R still runs slower than Splus 3.3 for me, and I wonder how
> big a part of the problem this is?

I suspect that it is a very large part of your problem.  A substantial
fraction (30% - 50% ?) of R's time is spent doing name lookup.  I hope
hashing will speed up name lookup by one or two orders of magnitude.
I am part-way through making the changes now.
	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Mon Mar 29 08:32:11 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Mon, 29 Mar 1999 09:32:11 +0200
Subject: problems with formals and get (PR#151)
Message-ID: <199903290732.JAA28031@blueberry.kubism.ku.dk>

With 0.63.3, try

test <- function(){
	fn <- function(a) print("hello")
	print(is.function(fn))
	print(names(formals("fn")))}
test()

if fn is not quoted in the last line of test, it works properly.

test <- function(){
	fn <- function() print("hello")
	formals(fn) <- alist(a=,b=)
	return(fn)}
formals(test())

now try with line 3 of test changed to
	formals(fn) <- alist(a=)

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 29 13:13:22 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Mon, 29 Mar 1999 14:13:22 +0200
Subject: problems with formals and get (PR#151)
Message-ID: <199903291213.OAA28222@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> With 0.63.3, try
> 
> test <- function(){
> 	fn <- function(a) print("hello")
> 	print(is.function(fn))
> 	print(names(formals("fn")))}
> test()
> 
> if fn is not quoted in the last line of test, it works properly.

This version of formals seems to work better:

function (fun = sys.function(sys.parent())) 
{
    if (is.character(fun)) 
        fun <- get(fun, mode = "function", envir = sys.frame(sys.parent()))
    .Internal(formals(fun))
}

> test <- function(){
> 	fn <- function() print("hello")
> 	formals(fn) <- alist(a=,b=)
> 	return(fn)}
> formals(test())
> 
> now try with line 3 of test changed to
> 	formals(fn) <- alist(a=)

This is a bug, originating in sys.call:

> xx<-function(...)sys.call()
> xx(a=)
xx()
> xx(a=,b=)
xx(a = , b = )



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 29 13:13:16 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 1999 14:13:16 +0200
Subject: problems with formals and get (PR#151)
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Mon, 29 Mar 1999 09:32:11 +0200"
References: <199903290732.JAA28031@blueberry.kubism.ku.dk>
Message-ID: <x2soaomr37.fsf@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> With 0.63.3, try
> 
> test <- function(){
> 	fn <- function(a) print("hello")
> 	print(is.function(fn))
> 	print(names(formals("fn")))}
> test()
> 
> if fn is not quoted in the last line of test, it works properly.

This version of formals seems to work better:

function (fun = sys.function(sys.parent())) 
{
    if (is.character(fun)) 
        fun <- get(fun, mode = "function", envir = sys.frame(sys.parent()))
    .Internal(formals(fun))
}

> test <- function(){
> 	fn <- function() print("hello")
> 	formals(fn) <- alist(a=,b=)
> 	return(fn)}
> formals(test())
> 
> now try with line 3 of test changed to
> 	formals(fn) <- alist(a=)

This is a bug, originating in sys.call:

> xx<-function(...)sys.call()
> xx(a=)
xx()
> xx(a=,b=)
xx(a = , b = )



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Mar 29 18:25:25 1999
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Mon, 29 Mar 1999 19:25:25 +0200
Subject: readline() (PR#147)
Message-ID: <199903291725.TAA29587@blueberry.kubism.ku.dk>

This message is in MIME format
--_=XFMail.1.3.p0.Linux:990329192352:425=_
Content-Type: text/plain; charset=us-ascii

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
>Great... Now do you have a fix for the fix? ;^)

Here are two patches.
1. Patch to scan.c which fixes this bug, and similar ones,
   by ensuring that functions which set the console prompt
   reset it after use.
2. Implements Peter Holzer's suggestion, adding a
   "prompt" argument to readline.  Since readline is an
   "internal" function I did this in the C code. The
   alternative of adding some interpreted code would be
   simpler.  Caveat emptor with this one, obviously.

--_=XFMail.1.3.p0.Linux:990329192352:425=_
Content-Disposition: attachment; filename="scan.diff"
Content-Transfer-Encoding: 7bit
Content-Description: scan.diff
Content-Type: text/plain; charset=us-ascii; name=scan.diff; SizeOnDisk=609

--- scan.c	Sun Mar 28 10:03:05 1999
+++ scan.c.fixed	Sun Mar 28 10:32:44 1999
@@ -276,6 +276,7 @@
 	}
     }
     if (!quiet) REprintf("Read %d items\n", n);
+    if (ttyflag) ConsolePrompt[0] = '\0';
 
     if (n == 0) {
 	UNPROTECT(1);
@@ -407,6 +408,7 @@
 	n++;
     }
     if (!quiet) REprintf("Read %d lines\n", n);
+    if (ttyflag) ConsolePrompt[0] = '\0';
 
     for (i = 0; i < nc; i++) {
 	old = VECTOR(ans)[i];
@@ -775,6 +777,8 @@
 	*bufp++ = c;
     }
     *bufp++ = '\0';
+    ConsolePrompt[0] = '\0';
+
     bufp = buffer;
     while (isspace(*bufp)) bufp++;
     first = LENGTH(CAR(args)) + 1;

--_=XFMail.1.3.p0.Linux:990329192352:425=_
Content-Disposition: attachment; filename="readline.diff"
Content-Transfer-Encoding: 7bit
Content-Description: readline.diff
Content-Type: text/plain; charset=us-ascii; name=readline.diff; SizeOnDisk=3136

diff -uNr R-0.63.3/src/library/base/R/New-Internal.R R-0.63.3-patched/src/librar
y/base/R/New-Internal.R
--- R-0.63.3/src/library/base/R/New-Internal.R	Wed Dec  9 07:52:28 1998
+++ R-0.63.3-patched/src/library/base/R/New-Internal.R	Sun Mar 28 13:47:39 1999
@@ -89,7 +89,7 @@
 	stop("rank(.., na.last != TRUE) does not yet work in R.")
     .Internal(rank(x))
 }
-readline <- function().Internal(readline())
+readline <- function(prompt="").Internal(readline(prompt))
 search <- function().Internal(search())
 
 sink <- function(file=NULL, append = FALSE)
diff -uNr R-0.63.3/src/library/base/man/readline.Rd R-0.63.3-patched/src/library
/base/man/readline.Rd
--- R-0.63.3/src/library/base/man/readline.Rd	Wed Nov 19 18:38:56 1997
+++ R-0.63.3-patched/src/library/base/man/readline.Rd	Sun Mar 28 13:41:52 1999
@@ -1,9 +1,12 @@
 \name{readline}
 \title{Read a Line from the Terminal}
 \usage{
-readline()
+readline(prompt="")
 }
 \alias{readline}
+\arguments{
+\item{prompt}{the string printed when prompting the user for input.}
+}
 \description{
   \code{readline} reads a line from the terminal, returning it as a
   character string.
diff -uNr R-0.63.3/src/main/names.c R-0.63.3-patched/src/main/names.c
--- R-0.63.3/src/main/names.c	Sun Jan 31 12:24:09 1999
+++ R-0.63.3-patched/src/main/names.c	Sun Mar 28 12:55:46 1999
@@ -482,7 +482,7 @@
 {"substitute",	do_substitute,	0,	0,	-1,	PP_FUNCALL},
 {"quit",	do_quit,	0,	111,	1,	PP_FUNCALL},
 {"interactive",	do_interactive,	0,	0,	0,	PP_FUNCALL},
-{"readline",	do_readln,	0,	11,	0,	PP_FUNCALL},
+{"readline",	do_readln,	0,	11,	1,	PP_FUNCALL},
 {"menu",	do_menu,	0,	11,	1,	PP_FUNCALL},
 {"print.default",do_printdefault,0,	111,	6,	PP_FUNCALL},
 {"print.matrix",do_printmatrix, 0,	111,	5,	PP_FUNCALL},
diff -uNr R-0.63.3/src/main/scan.c R-0.63.3-patched/src/main/scan.c
--- R-0.63.3/src/main/scan.c	Wed Feb 17 18:51:21 1999
+++ R-0.63.3-patched/src/main/scan.c	Sun Mar 28 15:07:24 1999
@@ -24,11 +24,12 @@
 #define SCAN_BLOCKSIZE		1000
 /* The size of the console buffer */
 #define CONSOLE_BUFFER_SIZE	1024
+#define CONSOLE_PROMPT_SIZE	32
 
 static char  ConsoleBuf[CONSOLE_BUFFER_SIZE];
 static char *ConsoleBufp;
 static int  ConsoleBufCnt;
-static char  ConsolePrompt[32];
+static char  ConsolePrompt[CONSOLE_PROMPT_SIZE];
 
 #ifdef NOT_used
 static void InitConsoleGetchar()
@@ -731,10 +732,20 @@
 {
     int c;
     char buffer[MAXELTSIZE], *bufp = buffer;
-    SEXP ans;
+    SEXP ans, prompt;
 
     checkArity(op,args);
 
+    prompt = CAR(args);
+    if (prompt == R_NilValue)
+        PROTECT(prompt);
+    else {
+        PROTECT(prompt = coerceVector(prompt, STRSXP));
+        if(length(prompt) > 0)
+            strncpy(ConsolePrompt, CHAR(*STRING(prompt)),
+                CONSOLE_PROMPT_SIZE - 1);
+    }
+
     /* skip white space */
     while ((c= ConsoleGetchar()) == ' ' || c=='\t');
     if (c != '\n' && c != R_EOF) {
@@ -749,9 +760,11 @@
     while (isspace(*--bufp))
 	;
     *++bufp = '\0';
+    ConsolePrompt[0] = '\0';
+
     PROTECT(ans = allocVector(STRSXP,1));
     STRING(ans)[0] = mkChar(buffer);
-    UNPROTECT(1);
+    UNPROTECT(2);
     return ans;
 }
 

--_=XFMail.1.3.p0.Linux:990329192352:425=_--
End of MIME message

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Mar 30 02:44:21 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 29 Mar 1999 19:44:21 -0600
Subject: Prototype nls library for R using closures
Message-ID: <6r7lrzpx8q.fsf@verdi.stat.wisc.edu>

I just uploaded to CRAN a prototype nls (nonlinear least squares)
library for R.  It is far from being finished but I am asking for
this preliminary version to be installed in the src/contrib/Devel
section of CRAN so others can see the use of function closures
to emulate the behaviour of objects in languages like Java.

It will be a couple of days before the file is installed in CRAN and
has a chance to propagate to the mirrors.  The impatient can pick up a
copy at
	    ftp://verdi.stat.wisc.edu/pub/nls_0.1-1.tar.gz
It can be installed on Unix/Linux systems by expanding the tar file
and running
  R INSTALL nls
This version does not use any C code so it should be installable on
Windows if you can expand the tar file.

The nls function takes the model formula, the data, and the starting
values for the parameters and creates an nlsModel object, which is a
list of functions _and_ the environment in which they were created.
That is, it is a list of function closures that share the same
environment.  This is similar in flavor to the example in the
demos/language/scoping.R file.

All of the functions in an nlsModel object behave like accessor
methods except for setPars which sets a new value of the parameters.
Using the nlsModel object and its methods, the nls function itself
becomes trivial.

This style of programming is directly inspired by the presentation
that Robert Gentleman made on the last day of the Distributed
Statistical Computing - Vienna '99 conference.

I would like to take this opportunity to again thank our hosts; Kurt,
Fritz, and Andreas, for their kind hospitality and their generosity in
staging the conference.  I, for one, thoroughly enjoyed it.  I feel
that I learned a lot and that we got a lot done that would have been
very hard to do with e-mail connections only.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Mar 30 15:47:00 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 30 Mar 1999 16:47:00 +0200 (CEST)
Subject: R PLATFORMS
Message-ID: <14080.58340.842840.886232@pc87.maho.magnaeu.com>

I would like (actually, during on of the R-core meetings at DSC-V99 I
was volunteered) to update the `PLATFORMS' file that comes with the R
distribution and contains information on supported platforms.

I think it would be nice to have a ``database'' with at least the
following entries:

	NAME		obvious
	EMAIL		obvious
	VERSION		e.g., 0.63.3
	PLATFORM	e.g., i386-unknown-linux
	SYSTEM		e.g., Redhat 4.2
	CC/FC/MAKE	e.g., egcs/g77/make
			on Suns, MAKE could be `GNUmake' or `Sunmake'
	NOTES		additional info

Ideally, not only R-core and the maintainers of binary packages would
provide me with such info.  In particular, feedback on platforms not
mentioned in PLATFORMS thus far would be appreciated.

NOTE:  I would like to distribute names and email addresses in this file
so that people who have problems building R on a `supported' platform
would know who to contact.

Thanks for all the info in advance.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Mar 30 15:53:47 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 30 Mar 1999 16:53:47 +0200 (CEST)
Subject: ctest wishlist
Message-ID: <14080.58747.592496.374235@pc87.maho.magnaeu.com>

In the past months (maybe even years), I have received a variety of
suggestions on improving/extending/... my ctest package.  Some of the
wishes have already been fulfilled.  In the future, I will at least:

* provide a formula-based interface

* provide an option for controlling the behavior of 2-sided p-values
(sum of more extreme, tail balancing a la S-PLUS, double one-sided, mid
p-value, more?)

* add something for analyzing odds ratios

* add something like an `info' slot to `htest' objects for displaying
useful additional information.  E.g., info on possible heterogeneity of
strata when analyzing 2 by 2 by k tables, etc.

The question is, which other features would you like to see in ctest?
Any additional tests?  What about exact inference methods?

Feedback will be appreciated.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 30 17:56:28 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Mar 1999 18:56:28 +0200
Subject: ctest wishlist
In-Reply-To: Kurt Hornik's message of "Tue, 30 Mar 1999 16:53:47 +0200 (CEST)"
References: <14080.58747.592496.374235@pc87.maho.magnaeu.com>
Message-ID: <x24sn2j4qr.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> The question is, which other features would you like to see in ctest?
> Any additional tests?  What about exact inference methods?
> 
> Feedback will be appreciated.

Exact confidence intervals for p in binom.test and rho (odds ratio) in
fisher.test. Stratified rank sum tests. Alternative scores in rank sum
tests (e.g. Normal Scores test). Tests for Normal Distribution.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 30 21:24:05 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Mar 1999 22:24:05 +0200
Subject: Example(persp) fails in 0.63.4 and 0.64 (PR#152)
Message-ID: <199903302024.WAA30042@blueberry.kubism.ku.dk>

>From 0.63.4 or 0.64:

> example(persp)

persp> x <- seq(-10, 10, length = 50)

persp> y <- x

persp> f <- function(x, y) {
    r <- sqrt(x^2 + y^2)
    10 * sin(r)/r
}

persp> z <- outer(x, y, f)

persp> z[is.na(z)] <- 1

persp> par(bg = "white")

persp> persp(x, y, z, theta = 30, phi = 30, expand = 0.5, 
    col = "lightblue")
Error: plot.new has not been called yet

This is probably not a problem in 0.63.3 too, but example() is broken
there. (If I paste the lines it, it works in 0.63.3 but not 0.63.4).
The error appears to be in the internal code for persp. If plot.new
has been called it works as expected, so `make check' appears to work.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Mar 31 00:50:26 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 30 Mar 1999 17:50:26 -0600
Subject: Documenting data sets
Message-ID: <6r677iczb1.fsf@verdi.stat.wisc.edu>

Has a format for the documentation of data sets been established?  The
prompt function applied to a data set produces a brief outline.  I
notice that the data documentation in the MASS library, for example,
is more complete.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 31 07:02:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 31 Mar 1999 07:02:47 +0100 (BST)
Subject: Documenting data sets
In-Reply-To: <6r677iczb1.fsf@verdi.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.9903310651470.27074-100000@auk.stats>

On 30 Mar 1999, Douglas Bates wrote:

> Has a format for the documentation of data sets been established?  The
> prompt function applied to a data set produces a brief outline.  I
> notice that the data documentation in the MASS library, for example,
> is more complete.

That was translated from Sd. On S-PLUS there are two formats for data given
by prompt.data.frame and prompt.default (for all non-functions). Over the
years we have expanded the dataset documentation: for example I tried about
a year ago to give references wherever possible.

It would be helpful to have more for this sort of thing in R. One thing I
find problematic is the use of \item: I find quite often that the use of
items (.AG or .RC) in .Sd format translates to invalid .Rd. There are
restrictions on the use of \item (as we saw for nlm.Rd) that could do with
being lifted. I need to give more thought to exactly what, though.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Mar 31 08:11:07 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 31 Mar 1999 09:11:07 +0200 (CEST)
Subject: Documenting data sets
In-Reply-To: <Pine.GSO.4.05.9903310651470.27074-100000@auk.stats>
References: <6r677iczb1.fsf@verdi.stat.wisc.edu>
 <Pine.GSO.4.05.9903310651470.27074-100000@auk.stats>
Message-ID: <14081.51851.302864.493919@pc87.maho.magnaeu.com>

>>>>> Prof Brian D Ripley writes:

> On 30 Mar 1999, Douglas Bates wrote:
>> Has a format for the documentation of data sets been established?  The
>> prompt function applied to a data set produces a brief outline.  I
>> notice that the data documentation in the MASS library, for example,
>> is more complete.

> That was translated from Sd. On S-PLUS there are two formats for data
> given by prompt.data.frame and prompt.default (for all
> non-functions). Over the years we have expanded the dataset
> documentation: for example I tried about a year ago to give references
> wherever possible.

prompt.data.frame() sounds like a nice idea.

In general, I think the format should be something like

	\name{}
	\alias{}
	\title{}
	\usage{data(...)}
	\description{}
	\format{}
	\details{}
	\source{}
	\examples{}
	\keyword{datasets}

but we should perhaps standardize the `format' slot a bit more.

> It would be helpful to have more for this sort of thing in R. One
> thing I find problematic is the use of \item: I find quite often that
> the use of items (.AG or .RC) in .Sd format translates to invalid
> .Rd. There are restrictions on the use of \item (as we saw for nlm.Rd)
> that could do with being lifted. I need to give more thought to
> exactly what, though.

Give Fritz a chance to look into Doug's Perl5 module a bit more.  This,
as I have been told, will also get \enumerate{} and description lists to
work.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Wed Mar 31 13:15:18 1999
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Wed, 31 Mar 1999 14:15:18 +0200
Subject: image + x11 (PR#153)
Message-ID: <199903311215.OAA30327@blueberry.kubism.ku.dk>


If a new plot window is opened, immediately after an image() command,
the default color (black) is not plotted correctly.

Example:

> image(matrix(1:16,4))
> x11()
> plot(1:10)

The plot-color is not black, but a very light yellow (obviously the
last color used by image), although par("fg") is still "black".

> plot(1:10,col=1)

has the same effect (yellow instead of black). Specifying an other
color like

> plot(1:10,col=3)

works ok and "resets" also the black color.

	Andreas

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Unstable
 status.rev = 0
 major = 0
 minor = 64.0
 year = 1999
 month = March
 day = 19
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Wed Mar 31 14:32:07 1999
From: khal@alumni.uv.es (khal@alumni.uv.es)
Date: Wed, 31 Mar 1999 15:32:07 +0200
Subject: example(dotplot) is broken in 0633 (PR#154)
Message-ID: <199903311332.PAA30335@blueberry.kubism.ku.dk>

> example(dotplot)

dotplt> data(deaths)
[1] "deaths"

dotplt> dotplot(deaths, main = "Death Rates in Virginia - 1940")
Error: plot.new has not been called yet


This functions if there has been drawn in the device earlier.  One simple fix
is to move plot.new at an earlier place in the function.


Kjetil Halvorsen



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Wed Mar 31 23:17:40 1999
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Wed, 31 Mar 1999 14:17:40 -0800 (PST)
Subject: "dump" Splus -> R
In-Reply-To: <Pine.LNX.4.04.9903311354020.14356-100000@localhost>
Message-ID: <Pine.LNX.4.04.9903311409010.14356-100000@localhost>


A couple of comments for core...

In my examples, it looks like the only calls that need to be evaluated
inside the structure are "c()" and "list()".  A heuristic approach for
loading the dump files, is to assume that any other call ought to be
returned as a call, rather than evaluated.  Providing an undump() command
with this behavour might make it easier for people to move data between
Splus and R.

-Greg 


On Wed, 31 Mar 1999, Gregory R. Warnes wrote:

  GRW>> 
  GRW>> Hi All,
  GRW>> 
  GRW>> I just used "dump" on Splus to transfer a pile of survival objects from
  GRW>> Splus 3.4 on Solaris 7 to R 0.63.3 on Intel. 
  GRW>> 
  GRW>> The only trick is that survival objects contain an element holding the
  GRW>> original call that generated the object.  When Splus writes these out, it
  GRW>> doesn't mark them in any way, so when R tries to read them in, it ends up
  GRW>> trying to reevaluate the call.  Not nice.  
  GRW>> 
  GRW>> Anyway, as all but one** of the offending calls occur in statements
  GRW>> that look like
  GRW>>    "blah" <- structure( [...], call = func( param1, param2, [...], )
  GRW>>                  class = "myclass" [...] )
  GRW>> 
  GRW>> so I wrote the following perl script to encapsulate each call in 
  GRW>> as.call(expression(...)) :
  GRW>> 
  GRW>> -------begin translate.dump.pl--------
  GRW>> $RS="<-";
  GRW>> $OS="<-";
  GRW>> 
  GRW>> while(<>)
  GRW>>   {
  GRW>>         s/call\s*=(.*?),(\s+?)class/call=as.call(expression($1)),$2
  GRW>> class/s;
  GRW>>         print $_;
  GRW>>    }
  GRW>> ---------end translate.dump.pl----------
  GRW>> 
  GRW>> Now the data can be transfered by :
  GRW>> 
  GRW>>    Splus on Unix:
  GRW>>    > dump(ls())
  GRW>> 
  GRW>> Downloading the resulting "dumpdata" file.
  GRW>> 
  GRW>>    Linux shell:
  GRW>>    $  translate.dump.pl < dumpdata > dumpdata.fixed
  GRW>> 
  GRW>>    R on Linux:
  GRW>> 
  GRW>>    > source("dumpdata.fixed")
  GRW>> 
  GRW>> Just thought this might help someone out...
  GRW>> 
  GRW>> 
  GRW>> -Greg 
  GRW>> 
  GRW>> 
  GRW>> **The only exception was the ".Last.warning" object, which contained
  GRW>> something like 
  GRW>>   structure( "Warning Message" = offending(call) )
  GRW>> 
  GRW>> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Wed Mar 31 23:56:54 1999
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Wed, 31 Mar 1999 14:56:54 -0800 (PST)
Subject: GC, Disk Storage, etc
Message-ID: <Pine.LNX.4.04.9903311441410.14356-100000@localhost>


I'm wondering what the plans are for the memory management system.  

Once there is a dynamic memory allocation system in place it would be nice
to augment that so that objects which are not currently being used need
not be resident in memory.  This way, rarely used objects will not be
filling up the memory of the R process.

(Yes, I am thinking about a cross between the current R and S object
storage ideas.)

It should be possible to set up an object access system that loads objects
on demand, and saves them out to disk when not used using a LRU strategy.

The save to disk could be part of the garbage collection strategy.  Some
herusitic like, if we run out of memory, throw all the ojbects we've not
used for XXX period of time out to disk.   If there are no such objects,
try to increase our available memory.  If that fails, throw things out
from least recently used forward.  If we can't manage to satisfy the
request using either method, fail the memory allocation and tell the user.

Glancing at the current code, it seems that the hardest part of this would
be keeping track of object usage, without imposing excessive overhead.

Comments?

-Greg



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Mon Mar  1 06:22:56 1999
From: khal@alumni.uv.es (Kjetil Halvorsen)
Date: Mon, 01 Mar 1999 07:22:56 +0100
Subject: [R] rw0632 makes stray .Rhistory orphans
References: <000001be5f1c$ef0b70e0$6f1abb81@fenris> <19990223134026.06314@hal.stat.unipd.it> <36D4644A.2C61BFC9@alumni.uv.es> <19990224232611.16861@hal.stat.unipd.it>
Message-ID: <36DA3240.FF683312@alumni.uv.es>

While it is time to do changes ... The save image as postscript
menu item opens the file save dialog always to save in 
"my documents", I would rather have my images in HOME, which is
where the projecy lives

K


Guido Masarotto wrote:
> 
> On Wed, Feb 24, 1999 at 09:42:50PM +0100, Kjetil Halvorsen wrote:
> > Opened the tema, another small mal-function which could be easily
> > repaired:  When sourcing a file from the menu, the working directory
> > (HOME?) changes to the files directory, then leaving R the Rdata
> > gets saved in the wrong place! I feel that sourcing shouldnt change
> > HOME, it surprised me more than once.
> >
>   K.,
>   I think you are perfectly right.
>   Any opinion by others before I change the source?
>   And, what about loading and saving the workspaces?
>   I haven't checked but since code is essentialy the same
>   I suppose behaviour is the same  and, hence, it must be
>   changed too.
> 
>   g.
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Mon Mar  1 10:59:24 1999
From: khal@alumni.uv.es (khal@alumni.uv.es)
Date: Mon, 1 Mar 1999 11:59:24 +0100
Subject: "xpdrows.data.frame" (PR#131)
Message-ID: <199903011059.LAA05213@biostat.ku.dk>

This is a multi-part message in MIME format.
--------------E6449E20185CF0A71A620457
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

This is a follow-up to bug sent to days ago, which bounced from r-devel
because 
the example was to large. Now example is smaller, and behaviour is as
belo, 
EXEPT that r-windows not any more bombs, so main problem is
"xpdrows.data.frame"???

By the way, how to debug this example under windows? debug() doesnt
accept
the functions used (.Primitive), and R wont run under gdb --- may have
to do
with R.dll, from the manual for gdb i get it that it cannot debug
functions
in shared libraries?

copied:


Using the data frames frame1 and frame2 from the attached saved dataset
frame.dat
(say load("frame.dat") ):

> for (i in 1:11) {
+      frame1[i, ] <- frame2[i, ] }
Error: couldn't find function "xpdrows.data.frame"

--- What is function xpdrows.data.frame?  There should be an more
appropiate
     error mssage here! (the data frame frame1 isn't long enough for the
last
     assignment, but this is a small, artificiall example, ocurred same
error
     with much larger frames, and the reason for the error was'nt clear,
not necessarily
     "index out of bound", as appropiate(?) here). 

After the above:

> dim(frame1)
NULL
> length(frame1)
[1] 11
> class(frame1)
NULL

which shows that frame1 is destroyed as a data frame, but the str
function works on it.
but trying to print frame1

> frame1

and R (windows) bombs, after some considerable time! (~10 min)
This data frame has a factor with a very large levels set, might have to 
do with that. 

The error message should be meaningfull, and shuld'nt return a destroyed
object
which bombs when printing.

Kjetil Halvorsen
--------------E6449E20185CF0A71A620457
Content-Type: application/x-unknown-content-type-DAT_auto_file; name="frame.dat"
Content-Transfer-Encoding: base64
Content-Disposition: inline; filename="frame.dat"

MTk3Ngo2IDEzMSA1NzEKMCAxMyAiY2xhc3MiCjEgMzEgImxldmVscyIKMiAzNyAibmFtZXMi
CjMgNDMgInJvdy5uYW1lcyIKNSAxNzMwMTIgImZyYW1lMiIKNiAxNzMwMzAgImZyYW1lMSIK
NCA2NTQ3NQo3IDU3NzUxMQo4IDU3NzUxMgo5IDU3NzY2NwoxMCA1Nzc2NjgKMTEgNTc3NjY5
CjEyIDU3NzY3MAoxMyA1Nzc2NzIKMTQgNjA5Njc3CjE1IDYwOTY3OAoxNiA2MDk2NzkKMTcg
NjA5NjgwCjE4IDYwOTY4MgoxOSA2MTQ1ODIKMjAgNjE0NTgzCjIxIDYxNDU4NAoyMiA2MTQ1
ODUKMjMgNjE0NTg2CjI0IDYxNDU4NwoyNSA2MTQ1ODkKMjYgNjE0NTkwCjI3IDYxNDU5MQoy
OCA2MTQ1OTIKMjkgNjE0NTkzCjMwIDYxNDU5NAozMSA2MTQ1OTUKMzIgNjE0NTk2CjMzIDYx
NDU5NwozNCA2MTQ1OTgKMzUgNjE0NTk5CjM2IDYxNDYwMAozNyA2MTQ2MTMKMzggNjQwNDcz
CjM5IDY0MDQ3NAo0MCA2NDA0NzUKNDEgNjQwNTYzCjQyIDY0MDU2NAo0MyA2ODE1MTkKNDQg
NjgxNTIwCjQ1IDY4MTUyMQo0NiA2ODE1MjIKNDcgNjgxNTIzCjQ4IDY4MTUyNAo0OSA2ODE1
MjUKNTAgNjgxNTI2CjUxIDY4MTUyNwo1MiA2ODE1MjgKNTMgNjgxNTI5CjU0IDY4MTUzMAo1
NSA2ODE1MzEKNTYgNjgxNTMyCjU3IDY4MTUzMwo1OCA2ODE1MzQKNTkgNjgxNTM1CjYwIDY4
MTUzNgo2MSA2ODE1MzcKNjIgNjgxNTM4CjYzIDY4MTUzOQo2NCA2ODE1NDAKNjUgNjg5MDAx
CjY2IDY4OTAxNQo2NyA2ODkwMjgKNjggNjg5MDQxCjY5IDY4OTA1NQo3MCA2ODkwNjkKNzEg
Njg5MDgzCjcyIDY4OTA5Nwo3MyA2ODkxMTAKNzQgNjg5MTIzCjc1IDY4OTEzNQo3NiA2ODkx
NDgKNzcgNjg5MTYwCjc4IDY4OTE2MQo3OSA2ODkxNzcKODAgNjg5MTc4CjgxIDY4OTE5Mgo4
MiA2ODkxOTMKODMgNjg5MjA5Cjg0IDY4OTIxMAo4NSA2ODkyMjYKODYgNjg5MjI3Cjg3IDY4
OTI0Mwo4OCA2ODkyNDQKODkgNjg5MjU1CjkwIDY4OTI1Ngo5MSA2ODkyNTkKOTIgNjg5MjYw
CjkzIDY4OTI3Mwo5NCA2ODkyNzQKOTUgNjg5Mjg1Cjk2IDY4OTI4Ngo5NyA2ODkyODcKOTgg
Njg5Mjg4Cjk5IDY4OTI4OQoxMDAgNjg5MjkwCjEwMSA2ODkyOTEKMTAyIDY4OTI5MgoxMDMg
Njg5MjkzCjEwNCA2ODkyOTQKMTA1IDY4OTI5NQoxMDYgNjg5Mjk2CjEwNyA2OTk4ODIKMTA4
IDY5OTg4MwoxMDkgNjk5ODg0CjExMCA2OTk4ODUKMTExIDY5OTg4NgoxMTIgNjk5ODg3CjEx
MyA2OTk4ODgKMTE0IDY5OTg4OQoxMTUgNjk5ODkwCjExNiA2OTk4OTEKMTE3IDY5OTg5Mgox
MTggNjk5ODkzCjExOSA2OTk4OTQKMTIwIDY5OTg5NQoxMjEgNjk5ODk2CjEyMiA2OTk4OTcK
MTIzIDY5OTg5OAoxMjQgNjk5ODk5CjEyNSA2OTk5MDAKMTI2IDY5OTkwMgoxMjcgNjk5OTAz
CjEyOCA2OTk5MDQKMTI5IDY5OTkwNQoxMzAgNjk5OTA2CjEzMSA2OTk5MDcKMTMyIDY5OTkw
OAoxMzMgNjk5OTA5CjEzNCA2OTk5MTAKMTM1IDY5OTkxMQoxMzYgNjk5OTg5CjQgOSAwIDAg
LTEgNiAiZmFjdG9yIgo3IDIgMCAwIC0xIDYxNDYxMyA1Nzc1MTIgMTczMDMwCjggMiAwIDAg
LTEgNjk5ODgyIC0xIDE3MzAxMgo5IDIgMCAwIC0xIDU3NzY2OCAtMSAxMwoxMCAxNiAwIDAg
LTEgMQo2NTQ3NQoxMSAyIDAgMCAtMSA1Nzc2NzAgNTc3NjY3IDMxCjEyIDE2IDAgMCAtMSAx
MAo2ODkxNjAgNjg5MjQzIDY4OTIwOSA2ODkxOTIgNjg5MjI2IDY4OTE3NyA2ODkyNTUgNjg5
MjU5IDY4OTI3MyA2ODkyODUKMTMgMTMgMSAwIDU3NzY2OSAxMAoxMCA5IDggNyAyIDUgMyA0
IDYgMQoxNCAyIDAgMCAtMSA2MDk2NzggLTEgMTMKMTUgMTYgMCAwIC0xIDEKNjU0NzUKMTYg
MiAwIDAgLTEgNjA5NjgwIDYwOTY3NyAzMQoxNyAxNiAwIDAgLTEgMTAKNjg5Mjg2IDY4OTI3
NCA2ODkyNjAgNjg5MjU2IDY4OTI0NCA2ODkyMjcgNjg5MjEwIDY4OTE5MyA2ODkxNzggNjg5
MTYxCjE4IDEzIDEgMCA2MDk2NzkgMTAKMSAyIDMgNCA1IDYgNyA4IDkgMTAKMTkgMiAwIDAg
LTEgNjE0NTgzIC0xIDEzCjIwIDE2IDAgMCAtMSAxCjY0MDU2MwoyMSAyIDAgMCAtMSA2MTQ1
ODUgNjE0NTgyIDQzCjIyIDE2IDAgMCAtMSAxMAo2ODE1NDAgNjgxNTM5IDY4MTUzOCA2ODE1
MzcgNjgxNTM2IDY4MTUzNSA2ODE1MzQgNjgxNTMzIDY4MTUzMiA2ODE1MzEKMjMgMiAwIDAg
LTEgNjE0NTg3IDYxNDU4NCAzNwoyNCAxNiAwIDAgLTEgMTQKNjg5Mjk2IDY4OTI5NSA2ODky
OTQgNjg5MjkzIDY4OTI5MiA2ODkyOTEgNjg5MjkwIDY4OTI4OSA2ODkyODggNjg5Mjg3CjY0
MDU2NCA2NDA0NzMgNjQwNDc0IDY0MDQ3NQoyNSAxNCAwIDAgLTEgMTAKMTkwLjMgMTg0LjEg
TkEgTkEgMTc1LjggMTc2LjcgMTc4LjkgMTgzLjggMTg3LjggMTUzLjEKMjYgMTQgMCAwIC0x
IDEwCjIwMS41IDIxNC4zIE5BIE5BIDE4OC44IDE5NS45IDE5NC44IDE5OS41IDE4NC4xIDE4
Ny41CjI3IDE0IDAgMCAtMSAxMAoxNzUuMiAyMDAgTkEgMTc4LjEgMTY5LjggMTc4LjggMTcz
IDE2OS43IDEwNi4zIDU1LjUxCjI4IDE0IDAgMCAtMSAxMAoxNSAxMyAxMyAxMiAxMSAxMSAx
MSAxMSAxMSAxMQoyOSAxNCAwIDAgLTEgMTAKNTQ0MzQgNDc5NzkgNDc0OTMgNDU1ODQgNDE4
NDUgNDIwNDQgNDE4NDYgNDE5NDggNDIwNDYgNDE4NDMKMzAgMTQgMCAwIC0xIDEwCjcgNyA3
IDcgNyA3IDcgNyA3IDcKMzEgMTQgMCAwIC0xIDEwCjEgMiAzIDQgNSA2IDcgOCA5IDEwCjMy
IDE0IDAgMCAtMSAxMAoxODM5NiAxODQ5NiAxODU5NiAxODY5NiAxODc5NiAxODg5NiAxODk5
NiAxOTA5NiAxOTE5NiAxOTI5NgozMyAxNCAwIDAgLTEgMTAKMzk4MDMgMjE2ODAuOSAxODkz
OS41IDEyNjE4LjkgMjgwOS45NSAzMTAyLjMyIDI3NTguODMgMjk4Ny4xNyAzMTE2LjA2IDEz
OTYuMDkKMzQgMTQgMCAwIC0xIDEwCjIyNDIgOTkwLjUgODE1LjggNDY2LjEgNTIuNDEgNjAu
OSA0OS40NCA1Ni4zIDU5LjQ1IDI0LjMyCjM1IDE0IDAgMCAtMSAxMAoxNjAuNyA1OC45IDQ2
LjkxIDI1LjI1IDMuMTg3IDMuNjE1IDMuMDU3IDMuMzk3IDMuNTc1IDEuNTE4CjM2IDE0IDAg
MCAtMSAxMAo0NS4xIDYyLjIgNjMuOCA3MCA4My4xIDgyLjMgODMgODIuNyA4Mi4zIDgzCjM3
IDE5IDEgMCA2MTQ1ODYgMTQKNjA5NjgyIDU3NzY3MiA2MTQ2MDAgNjE0NTk5IDYxNDU5OCA2
MTQ1OTcgNjE0NTk2IDYxNDU5NSA2MTQ1OTQgNjE0NTkzCjYxNDU5MiA2MTQ1OTEgNjE0NTkw
IDYxNDU4OQozOCA5IDAgMCAtMSA1ICJDSUUxNyIKMzkgOSAwIDAgLTEgNSAiQ0lFMTYiCjQw
IDkgMCAwIC0xIDUgIkNJRTE1Igo0MSA5IDAgMCAtMSAxMCAiZGF0YS5mcmFtZSIKNDIgOSAw
IDAgLTEgNCAiSG9yYSIKNDMgOSAwIDAgLTEgMiAiMjIiCjQ0IDkgMCAwIC0xIDIgIjIxIgo0
NSA5IDAgMCAtMSAyICIyMCIKNDYgOSAwIDAgLTEgMiAiMTkiCjQ3IDkgMCAwIC0xIDIgIjE4
Igo0OCA5IDAgMCAtMSAyICIxNyIKNDkgOSAwIDAgLTEgMiAiMTYiCjUwIDkgMCAwIC0xIDIg
IjE1Igo1MSA5IDAgMCAtMSAyICIxNCIKNTIgOSAwIDAgLTEgMiAiMTMiCjUzIDkgMCAwIC0x
IDIgIjEyIgo1NCA5IDAgMCAtMSAyICIxMSIKNTUgOSAwIDAgLTEgMiAiMTAiCjU2IDkgMCAw
IC0xIDEgIjkiCjU3IDkgMCAwIC0xIDEgIjgiCjU4IDkgMCAwIC0xIDEgIjciCjU5IDkgMCAw
IC0xIDEgIjYiCjYwIDkgMCAwIC0xIDEgIjUiCjYxIDkgMCAwIC0xIDEgIjQiCjYyIDkgMCAw
IC0xIDEgIjMiCjYzIDkgMCAwIC0xIDEgIjIiCjY0IDkgMCAwIC0xIDEgIjEiCjY1IDkgMCAw
IC0xIDggIjExOjM1OjQyIgo2NiA5IDAgMCAtMSA4ICIxMTozNTo1NiIKNjcgOSAwIDAgLTEg
OCAiMTE6MzY6MDgiCjY4IDkgMCAwIC0xIDggIjExOjM2OjIxIgo2OSA5IDAgMCAtMSA4ICIx
MTozNjozMiIKNzAgOSAwIDAgLTEgOCAiMTE6MzY6NDEiCjcxIDkgMCAwIC0xIDggIjExOjM2
OjUwIgo3MiA5IDAgMCAtMSA4ICIxMTozNjo1OSIKNzMgOSAwIDAgLTEgOCAiMTE6Mzc6MDUi
Cjc0IDkgMCAwIC0xIDggIjExOjM4OjUwIgo3NSA5IDAgMCAtMSA4ICIxMTozNzoxNSIKNzYg
OSAwIDAgLTEgOCAiMTE6Mzc6MjAiCjc3IDkgMCAwIC0xIDggIjExOjM3OjIzIgo3OCA5IDAg
MCAtMSA5ICIxMC1KdWwtOTYiCjc5IDkgMCAwIC0xIDggIjExOjQwOjQ2Igo4MCA5IDAgMCAt
MSA5ICIwOS1KdWwtOTYiCjgxIDkgMCAwIC0xIDggIjExOjM5OjA4Igo4MiA5IDAgMCAtMSA5
ICIwOC1KdWwtOTYiCjgzIDkgMCAwIC0xIDggIjExOjM3OjI2Igo4NCA5IDAgMCAtMSA5ICIw
Ny1KdWwtOTYiCjg1IDkgMCAwIC0xIDggIjExOjQwOjQ0Igo4NiA5IDAgMCAtMSA5ICIwNi1K
dWwtOTYiCjg3IDkgMCAwIC0xIDggIjExOjM3OjI1Igo4OCA5IDAgMCAtMSA5ICIwNS1KdWwt
OTYiCjg5IDkgMCAwIC0xIDggIjEyOjM5OjQ0Igo5MCA5IDAgMCAtMSA5ICIwNC1KdWwtOTYi
CjkxIDkgMCAwIC0xIDggIjEzOjExOjMzIgo5MiA5IDAgMCAtMSA5ICIwMy1KdWwtOTYiCjkz
IDkgMCAwIC0xIDggIjEzOjE5OjM5Igo5NCA5IDAgMCAtMSA5ICIwMi1KdWwtOTYiCjk1IDkg
MCAwIC0xIDggIjE1OjA3OjE0Igo5NiA5IDAgMCAtMSA5ICIwMS1KdWwtOTYiCjk3IDkgMCAw
IC0xIDggIk1FU1NFR1VOIgo5OCA5IDAgMCAtMSA1ICJNT05USCIKOTkgOSAwIDAgLTEgNiAi
SlVMRElBIgoxMDAgOSAwIDAgLTEgMyAiRElBIgoxMDEgOSAwIDAgLTEgMyAiVVZBIgoxMDIg
OSAwIDAgLTEgMyAiVVZCIgoxMDMgOSAwIDAgLTEgMyAiQ0lFIgoxMDQgOSAwIDAgLTEgMyAi
U1pBIgoxMDUgOSAwIDAgLTEgNCAiSE9SQSIKMTA2IDkgMCAwIC0xIDUgIkZFQ0hBIgoxMDcg
MTkgMSAwIDY5OTg5NiAxNAo2OTk5MDIgNjk5OTA3IDY5OTg4MyA2OTk4ODQgNjk5ODg1IDY5
OTg4NiA2OTk4ODcgNjk5ODg4IDY5OTg4OSA2OTk4OTAKNjk5ODkxIDY5OTg5MiA2OTk4OTMg
Njk5ODk0CjEwOCAxNCAwIDAgLTEgMTIKODMgODMgODIuNiA4MyA4Mi45IDgyLjkgODIuOSA4
Mi45IDgyLjkgODIuOQo4Mi45IDgyLjgKMTA5IDE0IDAgMCAtMSAxMgoxLjg4NCAzLjE2NyAz
LjY0MyAzLjM2NyAzLjI2MSAzLjMwMiAzLjMwOCAzLjE5OCAzLjI0NCAzLjMyCjMuMjcyIDMu
MTUzCjExMCAxNCAwIDAgLTEgMTIKMzAuNDcgNTEuNzUgNjAuOSA1NS4yMSA1My40OSA1NC4w
MyA1NC41MyA1Mi4yOCA1Mi45NSA1NC4zNgo1My40MiA1MS44NgoxMTEgMTQgMCAwIC0xIDEy
CjE3MDMuNjkgMjgyMy4zNyAzMTYxLjA3IDI5OTMuODEgMjg5Mi4xMyAyOTE0Ljg1IDI5MTku
MzYgMjg0MC4wMyAyODkzLjQ0IDI5NjMuMzkKMjkyMC4wOSAyNzc5LjQyCjExMiAxNCAwIDAg
LTEgMTIKMTkzOTYgMTk0OTYgMTk1OTYgMTk2OTYgMTk3OTYgMTk4OTYgMTk5OTYgMjAwOTYg
MjAxOTYgMjAyOTYKMjAzOTYgMjA0OTYKMTEzIDE0IDAgMCAtMSAxMgoxMSAxMiAxMyAxNCAx
NSAxNiAxNyAxOCAxOSAyMAoyMSAyMgoxMTQgMTQgMCAwIC0xIDEyCjcgNyA3IDcgNyA3IDcg
NyA3IDcKNyA3CjExNSAxNCAwIDAgLTEgMTIKNDE4NDAgNDE4MzUgNDE5MzAgNDE4MjUgNDE4
MTkgNDE4MTAgNDE4MDEgNDE3OTIgNDE3ODEgNDE3NjgKNDE3NTYgNDE3NDIKMTE2IDE0IDAg
MCAtMSAxMgoxMSAxMSAxMSAxMSAxMSAxMSAxMSAxMSAxMSAxMQoxMSAxMQoxMTcgMTQgMCAw
IC0xIDEyCjE3Ni43IDE5OS45IDE4My42IDE4NSAxMzcuMyAxODQuMyAxODguNSAxODUuNyAx
ODguMyAyMDMuNQoyMDEuNiAxODYuMwoxMTggMTQgMCAwIC0xIDEyCjEzMS4zIDIxNi45IDIx
NSAyMTQuMiAxOTMuNiAyMTIuNCAyMTUuNiAyMDMuOCBOQSAyMTQuOQoyMTIuOCAyMjIKMTE5
IDE0IDAgMCAtMSAxMgo4OS4wOSBOQSAxOTkuNiAxOTkuMyAxNzYuMyAxOTMuNSAxOTUuNCAx
ODguNSAxODUuOCAxODYuOAoxOTguNiAyMDYuNwoxMjAgMTYgMCAwIC0xIDE0CjY4OTI5NiA2
ODkyOTUgNjg5Mjk0IDY4OTI5MyA2ODkyOTIgNjg5MjkxIDY4OTI5MCA2ODkyODkgNjg5Mjg4
IDY4OTI4Nwo2NDA1NjQgNjQwNDczIDY0MDQ3NCA2NDA0NzUKMTIxIDIgMCAwIC0xIDY5OTg5
NSA2OTk4OTggMzcKMTIyIDE2IDAgMCAtMSAxMgo2ODE1MzAgNjgxNTI5IDY4MTUyOCA2ODE1
MjcgNjgxNTI2IDY4MTUyNSA2ODE1MjQgNjgxNTIzIDY4MTUyMiA2ODE1MjEKNjgxNTIwIDY4
MTUxOQoxMjMgMiAwIDAgLTEgNjk5ODk3IDY5OTkwMCA0MwoxMjQgMTYgMCAwIC0xIDEKNjQw
NTYzCjEyNSAyIDAgMCAtMSA2OTk4OTkgLTEgMTMKMTI2IDEzIDEgMCA2OTk5MDQgMTAKMSAy
IDMgNCA1IDYgNyA4IDkgMTAKMTI3IDE2IDAgMCAtMSAxMAo2ODkyODYgNjg5Mjc0IDY4OTI2
MCA2ODkyNTYgNjg5MjQ0IDY4OTIyNyA2ODkyMTAgNjg5MTkzIDY4OTE3OCA2ODkxNjEKMTI4
IDIgMCAwIC0xIDY5OTkwMyA2OTk5MDYgMzEKMTI5IDE2IDAgMCAtMSAxCjY5OTk4OQoxMzAg
MiAwIDAgLTEgNjk5OTA1IC0xIDEzCjEzMSAxMyAxIDAgNjk5OTA5IDEyCjExIDEwIDEyIDkg
OCA3IDYgNSA0IDMKMiAxCjEzMiAxNiAwIDAgLTEgMTIKNjg5MDAxIDY4OTAxNSA2ODkwMjgg
Njg5MDQxIDY4OTA1NSA2ODkwNjkgNjg5MDgzIDY4OTA5NyA2ODkxMTAgNjg5MTM1CjY4OTE0
OCA2ODkxMjMKMTMzIDIgMCAwIC0xIDY5OTkwOCA2OTk5MTEgMzEKMTM0IDE2IDAgMCAtMSAx
CjY5OTk4OQoxMzUgMiAwIDAgLTEgNjk5OTEwIC0xIDEzCjEzNiA5IDAgMCAtMSA2ICJmYWN0
b3IiCjU3NzUxMQo=
--------------E6449E20185CF0A71A620457--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Mon Mar  1 11:05:12 1999
From: khal@alumni.uv.es (Kjetil Halvorsen)
Date: Mon, 01 Mar 1999 12:05:12 +0100
Subject: replacement for qqnorm
Message-ID: <36DA7467.426AE491@alumni.uv.es>

I propose the folloving (few changes) replacement for qqnorm. 

1) return invisible (when plot.it=false) a list which can be
    given directly to plot to make the quantile plot. This is the
behaviour of qqplot.

2) calls ppoints

Kjetil Halvorsen




 
       qqnorm  <- 
function (y, ylim, main = "Normal Q-Q Plot", xlab = "Theoretical
Quantiles", 
    ylab = "Sample Quantiles", plot.it = TRUE, ...) 
{
    y <- y[!is.na(y)]
    if (!length(y)) 
        stop("y is empty")
    if (missing(ylim)) 
        ylim <- range(y)
    x <- qnorm(ppoints(length(y)))
    sy <- sort(y)
    if (plot.it) 
        plot(x, sort(y), main = main, xlab = xlab, ylab = ylab, 
            ylim = ylim, ...)
    invisible(list(x = x, y = sy))
}
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  1 11:33:18 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Mar 1999 12:33:18 +0100
Subject: "xpdrows.data.frame" (PR#131)
In-Reply-To: khal@alumni.uv.es's message of Mon, 1 Mar 1999 11:59:24 +0100
References: <199903011059.LAA05213@biostat.ku.dk>
Message-ID: <x2btide96p.fsf@blueberry.kubism.ku.dk>

khal@alumni.uv.es writes:

> This is a multi-part message in MIME format.
> --------------E6449E20185CF0A71A620457
> Content-Type: text/plain; charset=us-ascii
> Content-Transfer-Encoding: 7bit
> 
> This is a follow-up to bug sent to days ago, which bounced from r-devel
> because 
> the example was to large. Now example is smaller, and behaviour is as
... 
> Using the data frames frame1 and frame2 from the attached saved dataset
> frame.dat
> (say load("frame.dat") ):
....
> --------------E6449E20185CF0A71A620457
> Content-Type: application/x-unknown-content-type-DAT_auto_file; name="frame.dat"
> Content-Transfer-Encoding: base64
> Content-Disposition: inline; filename="frame.dat"
> 
> MTk3Ngo2IDEzMSA1NzEKMCAxMyAiY2xhc3MiCjEgMzEgImxldmVscyIKMiAzNyAibmFtZXMi
> CjMgNDMgInJvdy5uYW1lcyIKNSAxNzMwMTIgImZyYW1lMiIKNiAxNzMwMzAgImZyYW1lMSIK
> NCA2NTQ3NQo3IDU3NzUxMQo4IDU3NzUxMgo5IDU3NzY2NwoxMCA1Nzc2NjgKMTEgNTc3NjY5
> CjEyIDU3NzY3MAoxMyA1Nzc2NzIKMTQgNjA5Njc3CjE1IDYwOTY3OAoxNiA2MDk2NzkKMTcg
> NjA5NjgwCjE4IDYwOTY4MgoxOSA2MTQ1ODIKMjAgNjE0NTgzCjIxIDYxNDU4NAoyMiA2MTQ1

This is not a good idea! MIME attachments do not survive the trip
through JitterBug. So to read your data, one has to find a separate
base64 decoder and feed it the above gibberish. (And even if we could
get the remailer to handle it, it would still be a problem with the
filed text.)

It can't be that hard to cook up a smaller, plaintext example? E.g.

> f1<-data.frame(a=1:2,b=3:4)
> f2<-f1
> f2[3,]<-f1[2,]
Error: couldn't find function "xpdrows.data.frame"

..which, incidentally, is fixed in the 0.63.3 snapshots.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Mon Mar  1 13:53:31 1999
From: khal@alumni.uv.es (Kjetil Halvorsen)
Date: Mon, 01 Mar 1999 14:53:31 +0100
Subject: Inconsistencies with is.function
Message-ID: <36DA9BDA.67F9B953@alumni.uv.es>

> debug(sin)
Error in debug(sin) : argument must be a function
> is.function(sin)
[1] TRUE
> debug("[<-")
Error in debug("[<-") : argument must be a function
> is.function(get("[<-"))
[1] TRUE
> 

The problem having to do with .Primitive functions. R should agree
with itself on what is a function! to work around, I used


is.Primfun <- function(fun) is.function(fun) && is.null(body(fun))

but I'm not sure if that is failsafe.



Kjetil Halvorsen
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar  1 14:11:48 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Mar 1999 15:11:48 +0100
Subject: Inconsistencies with is.function
In-Reply-To: Kjetil Halvorsen's message of Mon, 01 Mar 1999 14:53:31 +0100
References: <36DA9BDA.67F9B953@alumni.uv.es>
Message-ID: <x2aexxe1uj.fsf@blueberry.kubism.ku.dk>

Kjetil Halvorsen <khal@alumni.uv.es> writes:

> > debug("[<-")
> Error in debug("[<-") : argument must be a function
> > is.function(get("[<-"))
> [1] TRUE
> > 
> 
> The problem having to do with .Primitive functions. R should agree
> with itself on what is a function! 

..most likely by fixing the error message in  debug(): "must be a
non-primitive function".

> to work around, I used
> is.Primfun <- function(fun) is.function(fun) && is.null(body(fun))
> 
> but I'm not sure if that is failsafe.

It isn't: 

> is.null(body(function()NULL))
[1] TRUE

However,

> args(function()NULL) 
function () 
NULL
> args(sin)
NULL

so is.null(args(fun)) works better. The construction is also used in
some of the tests/ and demos/ files.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar  2 15:59:52 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 2 Mar 1999 16:59:52 +0100
Subject: [R] zero-offset matrices (PR#132)
Message-ID: <199903021559.QAA16751@biostat.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> "[<-.zoffset"  <- function(x, i, j, value)
> {
>   if(!missing(i) && is.numeric(i)) i <- i+1
>   if(!missing(j) && is.numeric(j)) j <- j+1
>   NextMethod("[<-")
> }
> works in S but not in R. (Which I think is a bug.) I next tried

Yup, there's a bug in there somewhere, MatrixAssign ends up getting
called with the symbol "value" where the actual replacement value
should have been.

Of course, the whole point becomes a bit moot when one considers
*removing* rows and columns from a matrix...

To tickle the bug:

"[<-.zoffset"  <- function(x, i, j, value)
{
  if(!missing(i) && is.numeric(i)) i <- i+1
  if(!missing(j) && is.numeric(j)) j <- j+1
  NextMethod("[<-")
}
m<-matrix(1:4,2,2)
m[0,]<-4:5

Probably, set a breakpoint in do_subassigne and step through it.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  2 19:40:26 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 2 Mar 1999 19:40:26 +0000 (GMT)
Subject: [R] How to set axis labels?
In-Reply-To: <XFMail.990302125553.s-luppescu@uchicago.edu>
Message-ID: <Pine.GSO.4.05.9903021935240.8444-100000@auk.stats>

On Tue, 2 Mar 1999, Stuart Luppescu wrote:

> Sorry to bother everyone with such a basic question again, but I can't seem to
> set my axis labels. When I use
> title(ylab="String")
> "String" just overwrites the variable name, producing a mess. When I try to put
> ylab="String" in the plot function, like this:
> 
> plot(residuals(mschmod) ~ size94, ylab = "Productivity Adjusted for Context")
> I get this message:
> Error: formal argument "ylab" matched by multiple actual arguments

Ah, that is not `the plot function'. It is plot.formula, and I suggest you
use

plot(size94, residuals(mschmod), ylab = "Productivity Adjusted for 
Context")

For some reason plot.formula insists on setting ylab. I think it should be:

plot.formula <-
function (formula, data = NULL, subset, na.action,
          ylab=varnames[response], ..., ask = TRUE) 
{
    if (missing(na.action)) 
        na.action <- options()$na.action
    m <- match.call(expand.dots = FALSE)
    if (is.matrix(eval(m$data, sys.parent()))) 
        m$data <- as.data.frame(data)
    m$... <- NULL
    m[[1]] <- as.name("model.frame")
    mf <- eval(m, sys.parent())
    response <- attr(attr(mf, "terms"), "response")
    if (response) {
        varnames <- names(mf)
        y <- mf[[response]]
        if (length(varnames) > 2) {
            opar <- par(ask = ask)
            on.exit(par(opar))
        }
        for (i in varnames[-response]) plot(mf[[i]], y, xlab = i, 
            ylab = ylab, ...)
    }
    else plot.data.frame(mf)
}

Can anyone see why not?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Tue Mar  2 19:55:34 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Wed, 3 Mar 1999 08:55:34 +1300 (NZDT)
Subject: [R] How to set axis labels?
Message-ID: <199903021955.IAA23691@stat1.stat.auckland.ac.nz>

I think you're right Brian.  Do you want to change it? :-)

[ For those who don't know, Brian is now a core developer
  and can commit changes to the source code tree. ]

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  4 10:33:33 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 4 Mar 1999 11:33:33 +0100
Subject: system (PR#133)
Message-ID: <199903041033.LAA20548@biostat.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> According to ?system (R-release)
> 
>      system(command, intern=FALSE)
> 
> but the actual syntax is function(call, intern = FALSE, trash.errors =
> FALSE).
> 
> So, is it `call' or `command', and what does `trash.errors' do? (I assume
> it is intended to make stderr be ignored, but that would not be my
> guess from the name, and is shell-dependent, let alone system-dependent.)
> 
> I'll crawl back to documenting system() on Windows....

Filing as bug report. With 0.63.3 due out tomorrow, I don't want to fix
bugs that haven't actually bitten anyone. But yes, the docs should be
fixed to describe the actual code, it probably should be "command" and
"trash.errors = FALSE" could be something like "stderr = TRUE".

The shell-dependency is probably not avoidable, but - at least on
Linux - system and popen have /bin/sh hardcoded (POSIX?).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Fri Mar  5 16:07:23 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 05 Mar 1999 08:07:23 -0800
Subject: [Andreas Krause <Andreas.Krause@genedata.com>] Re: splus shell escapes
Message-ID: <87ogm7vs1w.fsf@alpha.cfas.washington.edu>



Anyone know what the problem is with IRIX 6.5 ?  (esp if there is a
solution?).  Looks like the built-in math stuff is masking definitions
from R source.

(passing this along for a friend).

best,
-tony



From: Andreas Krause <Andreas.Krause@genedata.com>
To: "A.J. Rossini" <rossini@biostat.washington.edu>
Subject: Re: splus shell escapes


# download
./configure


R is now configured for mips-sgi-irix6.5

  Source directory:         .
  Installation directory:   /usr/local
  C compiler:               gcc -g -O2
  FORTRAN compiler:         f77 

make
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/afm'
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/afm'
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/demos'
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/demos'
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/doc'
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/doc'
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/etc'
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/etc'
make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/src'
make[2]: Entering directory `/u/andreas/tmp/R/R-0.63.2/src/include'
make[2]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src/include'
make[2]: Entering directory `/u/andreas/tmp/R/R-0.63.2/src/appl'
gcc -g -O2 -I../include -I../../src/include  -c fft.c -o fft.o
In file included from fft.c:21:
../include/Mathlib.h:255: conflicting types for `gammal'
/usr/include/math.h:819: previous declaration of `gammal'
make[2]: *** [fft.o] Error 1
make[2]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src/appl'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src'
make: *** [R] Error 1

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Mar  5 16:18:32 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 5 Mar 1999 17:18:32 +0100
Subject: IRIX problem `gammal' [Andreas Krause ... Re: splus shell escapes]
In-Reply-To: <87ogm7vs1w.fsf@alpha.cfas.washington.edu>
 (rossini@biostat.washington.edu)
References: <87ogm7vs1w.fsf@alpha.cfas.washington.edu>
Message-ID: <199903051618.RAA28833@sophie.ethz.ch>

>>>>> "tony" == A J Rossini <rossini@biostat.washington.edu> writes:


    tony> Anyone know what the problem is with IRIX 6.5 ?  (esp if there is
    tony> a solution?).  Looks like the built-in math stuff is masking
    tony> definitions from R source.

    tony> (passing this along for a friend).

    ....


    tony> # download
    tony> ./configure


    tony> R is now configured for mips-sgi-irix6.5

    tony> Source directory:         .
    tony> Installation directory:   /usr/local
    tony> C compiler:               gcc -g -O2
    tony> FORTRAN compiler:         f77 

    tony> make

    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/afm'
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/afm'
    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/demos'
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/demos'
    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/doc'
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/doc'
    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/etc'
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/etc'
    tony> make[1]: Entering directory `/u/andreas/tmp/R/R-0.63.2/src'
    tony> make[2]: Entering directory
    tony> `/u/andreas/tmp/R/R-0.63.2/src/include' make[2]: Leaving
    tony> directory `/u/andreas/tmp/R/R-0.63.2/src/include' make[2]:
    tony> Entering directory `/u/andreas/tmp/R/R-0.63.2/src/appl'

    tony> gcc -g -O2 -I../include -I../../src/include  -c fft.c -o fft.o
    tony> In file included from fft.c:21:
    tony> ../include/Mathlib.h:255: conflicting types for `gammal'
    tony> /usr/include/math.h:819: previous declaration of `gammal'

Very funny.  

I wonder if Andreas really used an unaltered 0.63.2
There's no `gammal'  in   src/include/Mathlib.h (nor ./include/Mathlib.h)
especially not on line 255 where there's  qgamma(...)


    tony> make[2]: *** [fft.o] Error 1
    tony> make[2]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src/appl'
    tony> make[1]: *** [R] Error 1
    tony> make[1]: Leaving directory `/u/andreas/tmp/R/R-0.63.2/src'
    tony> make: *** [R] Error 1
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar  5 16:29:25 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Mar 1999 17:29:25 +0100
Subject: IRIX problem `gammal' [Andreas Krause ... Re: splus shell escapes]
In-Reply-To: Martin Maechler's message of Fri, 5 Mar 1999 17:18:32 +0100
References: <87ogm7vs1w.fsf@alpha.cfas.washington.edu> <199903051618.RAA28833@sophie.ethz.ch>
Message-ID: <x2u2vzzyqi.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:


>     tony> In file included from fft.c:21:
>     tony> ../include/Mathlib.h:255: conflicting types for `gammal'
>     tony> /usr/include/math.h:819: previous declaration of `gammal'
> 
> Very funny.  
> 
> I wonder if Andreas really used an unaltered 0.63.2
> There's no `gammal'  in   src/include/Mathlib.h (nor ./include/Mathlib.h)
> especially not on line 255 where there's  qgamma(...)

We've been having "fun" with *gamma stuff before (conflicts on SunOS,
remember?). It's possible that IRIX has a macro defining qgamma to be
gammal, in which case an "#undef qgamma" in Mathlib.h might do the
trick.  

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Krause@genedata.com  Fri Mar  5 16:54:14 1999
From: Andreas.Krause@genedata.com (Andreas Krause)
Date: Fri, 05 Mar 1999 17:54:14 +0100
Subject: IRIX problem `gammal' [Andreas Krause ... Re: splus shell escapes]
References: <87ogm7vs1w.fsf@alpha.cfas.washington.edu> <199903051618.RAA28833@sophie.ethz.ch> <x2u2vzzyqi.fsf@blueberry.kubism.ku.dk>
Message-ID: <36E00C36.FF64C16@genedata.com>

Hi. 

Peter Dalgaard BSA wrote:

> It's possible that IRIX has a macro defining qgamma to be
> gammal, in which case an "#undef qgamma" in Mathlib.h might do the
> trick.

The suspicion is right. 
Here is an excerpt from /usr/include/math.h:

extern double   gamma(double);
extern double   lgamma(double); 

...

#if _XOPEN4 && _NO_ANSIMODE
#define qgamma  gammal
#define qlgamma lgammal
#define qsigngam signgaml

extern long double gammal( long double );

extern long double lgammal( long double );
#endif

------------

Modifying src/include/Mathlib.h to

        /* Gamma and Related Functions */

#undef qgamma  

does the job indeed. Thanks, Peter!

...
However, for the sake of completeness, there's another problem on Irix:
f77  -fpic -c bsplvd.f -o bsplvd.o
f77 ERROR parsing -fpic:  unknown flag
make[4]: *** [bsplvd.o] Error 2

Outcommenting in configure 
if test "${CC}" = gcc; then
  cpicflags=-fpic
fi

does the job. Thanks again!


         andreas
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From naras@stat.Stanford.EDU  Fri Mar  5 17:33:23 1999
From: naras@stat.Stanford.EDU (Balasubramanian Narasimhan)
Date: Fri, 05 Mar 1999 09:33:23 -0800 (PST)
Subject: [Andreas Krause <Andreas.Krause@genedata.com>] Re: splus shell escapes
In-Reply-To: Your message of "05 Mar 1999 08:07:23 -0800"
 <87ogm7vs1w.fsf@alpha.cfas.washington.edu>
References: <87ogm7vs1w.fsf@alpha.cfas.washington.edu>
Message-ID: <19990305093323L.naras@stat.Stanford.EDU>

>>>>> "Tony" == A J Rossini <rossini@biostat.washington.edu> writes:

    Tony> Anyone  know what the  problem is with  IRIX 6.5 ?   (esp if
    Tony> there is  a solution?).  Looks like the  built-in math stuff
    Tony> is masking definitions from R source.

    Tony>   Source directory:  .  Installation directory: /usr/local C
    Tony> compiler: gcc -g -O2 FORTRAN compiler: f77

    Tony>        make        make[1]:        Entering        directory
    Tony>  `/u/andreas/tmp/R/R-0.63.2/afm' make[1]:  Leaving directory
    Tony> `/u/andreas/tmp/R/R-0.63.2/afm'  make[1]: Entering directory
    Tony> `/u/andreas/tmp/R/R-0.63.2/demos' make[1]: Leaving directory
    Tony>    `/u/andreas/tmp/R/R-0.63.2/demos'    make[1]:    Entering
    Tony>  directory `/u/andreas/tmp/R/R-0.63.2/doc'  make[1]: Leaving
    Tony> directory  `/u/andreas/tmp/R/R-0.63.2/doc' make[1]: Entering
    Tony>  directory `/u/andreas/tmp/R/R-0.63.2/etc'  make[1]: Leaving
    Tony> directory  `/u/andreas/tmp/R/R-0.63.2/etc' make[1]: Entering
    Tony> directory  `/u/andreas/tmp/R/R-0.63.2/src' make[2]: Entering
    Tony>  directory  `/u/andreas/tmp/R/R-0.63.2/src/include' make[2]:
    Tony>  Leaving  directory  `/u/andreas/tmp/R/R-0.63.2/src/include'
    Tony>            make[2]:            Entering            directory
    Tony> `/u/andreas/tmp/R/R-0.63.2/src/appl' gcc -g -O2 -I../include
    Tony> -I../../src/include -c fft.c  -o fft.o In file included from
    Tony>  fft.c:21: ../include/Mathlib.h:255:  conflicting  types for
    Tony>  `gammal' /usr/include/math.h:819:  previous  declaration of
    Tony>  `gammal'  make[2]: ***  [fft.o]  Error  1 make[2]:  Leaving
    Tony> directory  `/u/andreas/tmp/R/R-0.63.2/src/appl' make[1]: ***
    Tony>     [R]    Error     1     make[1]:    Leaving     directory
    Tony> `/u/andreas/tmp/R/R-0.63.2/src' make: *** [R] Error 1

Ah! This is one I have run into. 

SGI has  its own  version of  the log-gamma in  the math  library that
causes  a  number of  problems  with  dynamic  loading including  with
xlispstat. One easy way to get  around this is to #ifdef the part that
defines gammal in the R includes to tide things over.

I  once  had  an  exchange  with  Luke about  this  situation  on  the
SGI. Which is why xls defines it log gamma function to be mygamma! 

________________________________________________________________
B. Narasimhan                            naras@stat.stanford.edu
                             http://www-stat.stanford.edu/~naras





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sat Mar  6 00:12:12 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 05 Mar 1999 18:12:12 -0600
Subject: Difficulties with egcs-1.0.3 on RedHat 5.2?
Message-ID: <6rogm7h3xf.fsf@verdi.stat.wisc.edu>

Some machines in our department use RedHat 5.2 Linux but, to maintain
consistency with other machines, the compilers as from egcs-1.0.3, as
shown below.  When I compile R-0.63.3 on these systems I can't pass
the tests in "make check".  The base-Ex.R file stops execution with
the error shown below.
 ...
 Running all help() examples ...
 ../../bin/R --vanilla < base-Ex.R > base-Ex.Rout
 make[2]: *** [base-Ex.Rout] Error 139
 make[2]: Leaving directory `/afs/cs.wisc.edu/unsup/R-0.63.3/src/R-0.63.3/tests/Examples'
 make[1]: *** [test-Examples] Error 2
 make[1]: Leaving directory `/afs/cs.wisc.edu/unsup/R-0.63.3/src/R-0.63.3/tests'
 make: [test-All] Error 2 (ignored)
 gstat03(26)% gcc -v
 Reading specs from /s/egcs-1.0.3a/i386_linux22/lib/gcc-lib/i386-redhat-linux/pgcc-2.90.29/specs
 gcc version pgcc-2.90.29 980515 (egcs-1.0.3 release)
 gstat03(27)% g77 -v
 Reading specs from /s/egcs-1.0.3a/i386_linux22/lib/gcc-lib/i386-redhat-linux/pgcc-2.90.29/specs
 gcc version pgcc-2.90.29 980515 (egcs-1.0.3 release)

The last part of base-Ex.Rout is
 > ###--- >>> `FDist' <<<----- The F Distribution
 > 
 > 	## alias	 help(df)
 > 	## alias	 help(pf)
 > 	## alias	 help(qf)
 > 	## alias	 help(rf)
 > 
 > ##___ Examples ___:
 > 
 > df(1,1,1) == dt(1,1)# TRUE
 [1] TRUE

This does not seem to happen on other Linux machines with other C and
Fortran compilers but it does happen on a Solaris 2.6 for Intel
machine with the same compilers.

Is this a known problem with egcs-1.0.3?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar  6 00:26:58 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 1999 01:26:58 +0100
Subject: Difficulties with egcs-1.0.3 on RedHat 5.2?
In-Reply-To: Douglas Bates's message of 05 Mar 1999 18:12:12 -0600
References: <6rogm7h3xf.fsf@verdi.stat.wisc.edu>
Message-ID: <x21zj3mpil.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> Some machines in our department use RedHat 5.2 Linux but, to maintain
> consistency with other machines, the compilers as from egcs-1.0.3, as
> shown below.  When I compile R-0.63.3 on these systems I can't pass
> the tests in "make check".  The base-Ex.R file stops execution with
> the error shown below.
>  ...
... 
> This does not seem to happen on other Linux machines with other C and
> Fortran compilers but it does happen on a Solaris 2.6 for Intel
> machine with the same compilers.
> 
> Is this a known problem with egcs-1.0.3?

Yes, (only I thought it was in 1.0.2...). I reported it some months
ago. It's a register allocation foulup in the compiler, showing up
when inlining is used. If you *really* want me to, I can dig up the
reference...

Goes away if you compile without optimisation. Unless my memory fails
me, qbeta.c is the culprit, and you can get away with just recompiling
that one without -O. It's gone away in egcs 1.1.0, but that is a bit
of a massive download for the modem crowd.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar  6 00:43:30 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 06 Mar 1999 01:43:30 +0100
Subject: Difficulties with egcs-1.0.3 on RedHat 5.2?
In-Reply-To: Peter Dalgaard BSA's message of 06 Mar 1999 01:26:58 +0100
References: <6rogm7h3xf.fsf@verdi.stat.wisc.edu> <x21zj3mpil.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2zp5rla6l.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes

> If you *really* want me to, I can dig up the
> reference...

Aw, what the heck...

To: r-devel@stat.math.ethz.ch
Subject: EGCS optimizer bug?
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 25 Oct 1998 23:21:26 +0100
Message-ID: <x2r9vwl1uh.fsf@blueberry.kubism.ku.dk>
X-Mailer: Gnus v5.5/Emacs 20.2
Lines: 47
Xref: blueberry.kubism.ku.dk misc-mail:2857
X-Gnus-Article-Number: 2857   Sun Oct 25 23:21:34 1998


The current development version dies in qbeta() when compiled with
egcs -O, egcs 1.0.2 and glibc 2.0.7 (RedHat versions). Since this also
kill the F and t distributions, it doesn't exactly do wonders for R's
usefulness...

Anyone else seeing this or has my setup just gone out of whack? It
does look pretty much like a clear compiler bug when inlining math
functions (storing temporaries offset from %ebx, but no setting of
%ebx register to anything useful...)

The following paraphrase on R's qbeta.c appears to be a close to
minimal example of the problem (no, it doesn't do anything useful, and
there are several obvious things wrong with it, but it displays the
%ebx problem, if you look at the generated code):

#include <math.h>

double lbeta(){}

double qbeta(double alpha, double p, double q)
{
        double t,r, logbeta;
        volatile double xinbta;

        logbeta = lbeta(p, q);

        if (p<1) 
                t = r * pow(t, 3.);
        return xinbta;
}

main(){qbeta(.5,.5,.5);}

[pd@butterfly sandbox]$ egcs -O qbeta.c -lm
[pd@butterfly sandbox]$ ./a.out
Segmentation fault (core dumped)
[pd@butterfly sandbox]$ egcs qbeta.c -lm
[pd@butterfly sandbox]$ ./a.out


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Sat Mar  6 05:36:44 1999
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Fri, 5 Mar 1999 21:36:44 -0800 (PST)
Subject: bessel_?.c constants
Message-ID: <Pine.LNX.4.04.9903052116420.18761-100000@localhost>


Hi All,

I've been digging around in src/nmath and have discovered that there are
two sets of "machine constants" in bessel_l.c and bessel_j.c which have
different values:

bessel_i.c:    static double ensig = 1e16;
bessel_i.c:    static double rtnsig = 1e-4;
bessel_i.c:    static double enmten = 8.9e-308;
bessel_i.c:    static double enten = 1e308;

bessel_j.c:    static double ensig = 1e17;
bessel_j.c:    static double rtnsig = 1e-4;
bessel_j.c:    static double enmten = 1.2e-37;
bessel_j.c:    static double enten = 1e38;

According to the comments heading the files, the first set is correct for
IEEE Double-Precision hardware (the comments give the same values for
these parameters in each file):


         Approximate values for some important machines are:
    
    			    it	  NSIG	  ENTEN	      ENSIG
      [...]    
      IEEE (IBM/XT,
      SUN, etc.) (D.P.)	    53	   16	 1.0D+308    1.0D+16
      [...]

    			   RTNSIG      ENMTEN	   XLARGE
      [...]   
      IEEE (IBM/XT,
      SUN, etc.) (D.P.)	   1.0E-4    8.90D-308	  1.0D+4
      [...]

Is there some reason for using different values in bessel_j.c than in
bessel_l.c?  Or is this just a bug? ;^)

-Greg

PS:  Where is DBL_EPSILON defined, and what is its value?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Sat Mar  6 20:11:18 1999
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Sat, 6 Mar 1999 12:11:18 -0800 (PST)
Subject: bessel_?.c constants (fwd)
Message-ID: <Pine.LNX.4.04.9903061210030.20307-100000@localhost>


This doesn't seem to have made it to the list, so here it is again.  Sorry
if this results in duplicates.

---------- Forwarded message ----------
Date: Fri, 5 Mar 1999 21:36:44 -0800 (PST)
From: Gregory R. Warnes <warnes@biostat.washington.edu>
To: R devel <r-devel@stat.math.ethz.ch>
Subject: bessel_?.c constants


Hi All,

I've been digging around in src/nmath and have discovered that there are
two sets of "machine constants" in bessel_l.c and bessel_j.c which have
different values:

bessel_i.c:    static double ensig = 1e16;
bessel_i.c:    static double rtnsig = 1e-4;
bessel_i.c:    static double enmten = 8.9e-308;
bessel_i.c:    static double enten = 1e308;

bessel_j.c:    static double ensig = 1e17;
bessel_j.c:    static double rtnsig = 1e-4;
bessel_j.c:    static double enmten = 1.2e-37;
bessel_j.c:    static double enten = 1e38;

According to the comments heading the files, the first set is correct for
IEEE Double-Precision hardware (the comments give the same values for
these parameters in each file):


         Approximate values for some important machines are:
    
    			    it	  NSIG	  ENTEN	      ENSIG
      [...]    
      IEEE (IBM/XT,
      SUN, etc.) (D.P.)	    53	   16	 1.0D+308    1.0D+16
      [...]

    			   RTNSIG      ENMTEN	   XLARGE
      [...]   
      IEEE (IBM/XT,
      SUN, etc.) (D.P.)	   1.0E-4    8.90D-308	  1.0D+4
      [...]

Is there some reason for using different values in bessel_j.c than in
bessel_l.c?  Or is this just a bug? ;^)

-Greg

PS:  Where is DBL_EPSILON defined, and what is its value?




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar  7 14:02:10 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 1999 15:02:10 +0100
Subject: bessel_?.c constants (fwd)
In-Reply-To: "Gregory R. Warnes"'s message of Sat, 6 Mar 1999 12:11:18 -0800 (PST)
References: <Pine.LNX.4.04.9903061210030.20307-100000@localhost>
Message-ID: <x2vhgd1jq5.fsf@blueberry.kubism.ku.dk>

"Gregory R. Warnes" <warnes@biostat.washington.edu> writes:

> This doesn't seem to have made it to the list, so here it is again.  Sorry
> if this results in duplicates.

It did...

> PS:  Where is DBL_EPSILON defined, and what is its value?

In the compiler libs, here:

/usr/lib/gcc-lib/i386-redhat-linux/2.7.2.3/include/float.h:
#define DBL_EPSILON 2.2204460492503131e-16


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From osman.buyukisik@ae.ge.com  Mon Mar  8 17:44:44 1999
From: osman.buyukisik@ae.ge.com (U-E59264-Osman F Buyukisik)
Date: Mon,  8 Mar 1999 12:44:44 -0500 (EST)
Subject: March7th R-devel,hpux10.20,egcs-2.93.03 19990124
Message-ID: <14052.2244.122214.792342@c1186.ae.ge.com>

Hello,
 I just got the latest (March7) tarball from CRAN. 

1).It looks like ".so" 
is still hardwired in the source code. in src/main/platform.h all
"Unix" systems get the ".so" extention. I had to #ifdef hpux and add
".sl". 

2). It picks up readline but history is still inside the comments in
src/include/Platform.h, I had to manually change this in order to get
readline history.

3). Now it builds and installs OK. 

4). library(help = eda) gets me

  Error: No documentation for package `eda'

This seems to be happening because system.file("INDEX", help, lib.loc) 
in library returning NULL. debugging system.file show that
 present <- file.exists(FILES)
gets FALSE. FILES=
"/home/absd00t/local/lib/R/library/eda/INDEX//home/absd00t/local/lib/R/library"
if just execute
file.exists("/home/absd00t/local/lib/R/library/eda/INDEX") 
then it returns TRUE. (I know the help files and INDEX are all out
there). Any idea why this library overall help is not working? Help on 
idividual items is working OK. So are the dynamically loaded libs.
system.file function seems to be different than in 0.63.1. 

Osman
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Mon Mar  8 18:20:19 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Mon, 8 Mar 1999 18:20:19 +0000 (GMT)
Subject: March7th R-devel,hpux10.20,egcs-2.93.03 19990124
Message-ID: <199903081820.SAA23875@toucan.stats.ox.ac.uk>


> From: U-E59264-Osman F Buyukisik <absd00t@c1186.ae.ge.com>
> Date: Mon,  8 Mar 1999 12:44:44 -0500 (EST)
> To: r-devel@stat.math.ethz.ch
> Subject: March7th R-devel,hpux10.20,egcs-2.93.03 19990124
> 
> Hello,
>  I just got the latest (March7) tarball from CRAN. 

That is a snapshot: we are working on the `platform independent'
code right now.  Please be patient: snapshots can be unstable.

> 1).It looks like ".so" 
> is still hardwired in the source code. in src/main/platform.h all
> "Unix" systems get the ".so" extention. I had to #ifdef hpux and add
> ".sl". 

Rather, it is hardwired again.

> 4). library(help = eda) gets me
> 
>   Error: No documentation for package `eda'
> 
> This seems to be happening because system.file("INDEX", help, lib.loc) 

That was an incorrect call in 0.64. It needs named arguments:

        file <- system.file("INDEX", pkg = help, lib = lib.loc)

> in library returning NULL. debugging system.file show that
>  present <- file.exists(FILES)
> gets FALSE. FILES=
> 
"/home/absd00t/local/lib/R/library/eda/INDEX//home/absd00t/local/lib/R/library"
> if just execute
> file.exists("/home/absd00t/local/lib/R/library/eda/INDEX") 
> then it returns TRUE. (I know the help files and INDEX are all out
> there). Any idea why this library overall help is not working? Help on 
> idividual items is working OK. So are the dynamically loaded libs.
> system.file function seems to be different than in 0.63.1. 

Yes. Basically the new system.file() did not work as documented: it now
does AFAIK but I have been tracking down all the incorrect uses, and got this
one a few hours ago. From the current state:

> library(help = eda)
line            Robust Line Fitting
medpolish       Median polish
smooth          Median smoothing




-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar  9 09:33:44 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 9 Mar 1999 10:33:44 +0100
Subject: example(.) partly broken (since 0.63.3) --> patch (PR#134)
Message-ID: <199903090933.KAA05227@biostat.ku.dk>

(I don't have time just now to diagnose & fix..)

In R 0.63.3  [both on Solaris and Linux]

    > example(outer)
    Error: Couldn't find 'outer' example

whereas this worked in 0.63.2.

NON-exhaustive `research' [i.e. small sample out of about 1000]:
 o examples that stopped working (in 0.63.3 and did before)
	
	kronecker, outer, vector, Im

 o Examples working
 
	.Alias, "%in%", lm, glm, lsfit, unix, Re, ... (most?)

It really is the  'AnIndex' file which is broken, 
either because of incorrect syntax in changed  *.Rd files
or    because the AnIndex building scripts are broken or not robust enough..

My "AnIndex" (i.e.  RINSTALL/library/base/help/AnIndex)
has line 482
-----------------------------
glm summaries	glm.summaries
-----------------------------
which then is  scan()ed as 3 character strings instead of 2, and then
everything following is mixed up......

Other (not necessarily all) such bad lines are
-----------------------------
lm summaries	lm.summaries
nrow, ncol	nrow
QR Auxiliaries	qraux
-----------------------------



However, it seems sufficient [for example() at least]
to patch its source by using  scan("..../AnIndex" ..) with sep = "\t" :

--- src/library/base/R/source.R.~1~	Wed Dec  2 11:39:22 1998
+++ src/library/base/R/source.R	Tue Mar  9 10:27:38 1999
@@ -122,7 +122,7 @@
             AnIndexF <- system.file(paste("help","AnIndex",sep=directory.sep),
                                     pkg, lib)
             if(AnIndexF != "") {
-                AnIndex <- scan(AnIndexF,what=c("c","c"),quiet=TRUE)
+                AnIndex <- scan(AnIndexF,what=c("c","c"),sep="\t",quiet=TRUE)
                 i <- match(topic,AnIndex[seq(1,length(AnIndex),2)],-1)
                 if(i != -1)	 
                     file <- system.file(paste("R-ex",directory.sep,AnIndex[2*i],

	
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue Mar  9 09:47:26 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 9 Mar 1999 10:47:26 +0100
Subject: example(.) partly broken (since 0.63.3) --> patch (PR#134)
Message-ID: <199903090947.KAA05234@biostat.ku.dk>

I think one should also apply the following patch  
in order to get the HTML indices right.. when AnIndex is allowed to contain
spaces " " in addition to the separating "\t" :

--- etc/buildlib.pl.~1~	Wed Mar  3 17:35:42 1999
+++ etc/buildlib.pl	Tue Mar  9 10:41:15 1999
@@ -168,7 +168,7 @@
 		if(-r "$lib/$pkg/help/AnIndex"){
 		    open ranindex, "< $lib/$pkg/help/AnIndex";
 		    while(<ranindex>){
-			/^(\S*)\s*\t(.*)/;
+			/^([^\t]*)\s*\t(.*)/;
 			$htmlindex{$1} = "$pkg/html/$2.$HTML";
 		    }
 		    close ranindex;
@@ -195,7 +195,7 @@
 		if(-r "$lib/$pkg/help/AnIndex"){
 		    open ranindex, "< $lib/$pkg/help/AnIndex";
 		    while(<ranindex>){
-			/^(\S*)\s*\t(.*)/;
+			/^([^\t]*)\s*\t(.*)/;
 			$anindex{$1} = $2;
 		    }
 		    close ranindex;


----------------------
((and yes, I *did* diagnose and fix most of the problem in spite of
  my introductory remark in the last message...))

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fears@roycastle.liv.ac.uk  Tue Mar  9 13:20:59 1999
From: fears@roycastle.liv.ac.uk (fears@roycastle.liv.ac.uk)
Date: Tue, 9 Mar 1999 14:20:59 +0100
Subject: summary() of lm() problem (PR#135)
Message-ID: <199903091320.OAA05357@biostat.ku.dk>

Debuggers,

I wrote to r-help about this and was appropriately told off by Peter
Dalgaard. I append that mail in case you have not seen it.

Following Peter's advice I have attempted to simplify the problem.

First note that the following does *not* fail (by which I mean crash, as
in generate a memory access violation):

> tmp<-matrix(c(1,0,0,1,1,1),2,3)
> dimnames(tmp)<-list(NULL,c('yvar','x1','x2'))
> lm(tmp[,'yvar']~tmp[,'x1']+tmp[,'x2'])
> summary(.Last.value)

I tried to cut down my original data set to just the first ten rows to
make it manageable to transmit. Of course then when I ran lm() there
were NA estimates. Thus I wasn't totally surprised that summary() would
have trouble. But, unlike the above, it crashes fatally.

Thinking to reproduce this very simply, I used (sorry quick and dirty, I
know there's a way to use paste to give the model formula):

> tmp<-matrix(c(1,0,0,1,rep(1,56)),2,30)
> dimnames(tmp)<-list(NULL,paste('x',1:30,sep=''))
> lm(tmp[, "x1"] ~ tmp[, "x2"] + tmp[, "x3"] + tmp[,     "x4"] + tmp[,
"x4"] + tmp[, "x5"] + tmp[, "x6"] + tmp[, "x7"] +     tmp[, "x8"] +
tmp[, "x9"] + tmp[, "x10"] + tmp[, "x11"] +     tmp[, "x12"] + tmp[,
"x13"] + tmp[, "x14"] + tmp[, "x15"] +     tmp[, "x16"] + tmp[, "x17"] +
tmp[, "x18"] + tmp[, "x19"] +     tmp[, "x20"]+tmp[, "x21"]+tmp[,
"x22"]+tmp[, "x23"]+tmp[, "x24"]+tmp[, "x25"]+tmp[, "x26"]+tmp[,
"x27"]+tmp[, "x28"]+tmp[, "x29"]+tmp[, "x30"])
> summary(.Last.value)

But this has no problem. So it doesn't seem to be singularity of X or
the length of the model formula at fault (my problem data has 27
variables).

What follows now is what *does* give a fault. The data (in sasch2) is
truncated to just the first 10 rows. I made it so the modified dataset
is called sasch2 so that I could cut and paste the exact same lm() call:

> tmp<-sasch2[1:10,]
> holdsasch2<-sasch2
> sasch2<-tmp
> dump('sasch2','bugs.dump')
> lm(sasch2[, "ddiff"] ~ sasch2[, "td30"] + sasch2[,     "td60"] +
sasch2[, "td90"] + sasch2[, 
+ "td120"] + +sasch2[,     "td180"] + sasch2[, "td240"] + sasch2[,
"td300"] + sasch2[,     "td360"] + 
+ sasch2[, "td420"] + sasch2[, "td480"] + sasch2[,     "db1"] + sasch2[,
"db1.5"] + sasch2[, "db2"] + 
+ sasch2[, "db2.5"] +     +sasch2[, "db3.5"] + sasch2[, "db4"] +
sasch2[, "db4.5"] +     sasch2[, "db5"] + 
+ sasch2[, "db5.5"] + +sasch2[, "db6"] +     sasch2[, "db6.5"] +
sasch2[, "db7"] + sasch2[, "db7.5"] +     
+ sasch2[, "db8"] + +sasch2[, "db8.5"] + sasch2[, "db9"] +     sasch2[,
"db9.5"])
> summary(.Last.value)

Dr Watson tells me the access violation is 0xc0000005 at address
0x2020200 (whatever that means; I last used machine code on a PDP 8).

The data as dumped now follows (though it is anonymised, please continue
to treat the data as confidential). After that is my original report to
r-help.

I'd be very happy to provide any other info you might need to know. PD
suggested running on Unix but my version there is hopelessly out of date
since I started using NT. I hope I've given you enough here to try it
for yourself on the latest unix version without too much bother.

"sasch2" <-
structure(c(1, 1, 1, 2, 2, 3, 4, 5, 5, 6, 3, 2, 0.5, 0, 2, 4, 
6, 1.5, 6, 5, 225, 175, 180, 255, 140, 140, 236, 315, 90, 190, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 1, 0, 
0, 0, 0, 0, 1, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 2, 5, 7, 3, 3, 5, 4, 2.5, 4, 3, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 0, 0, 
0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 
1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 611231, 611231, 611231, 611041, 611041, 
611553, 605829, 604881, 604881, 612966, 4, 4, 4, 4, 4, 4, 3, 
3, 3, 2, 25, 25, 25, 29, 29, 29, 31, 28, 28, 18, 289, 289, 289, 
279, 279, 289, 296, 268, 268, 281, 1, 1, 1, 2, 2, 2, 2, 1, 1, 
1, 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
655, 655, 655, 780, 780, 180, 347, 295, 295, 240, 1, 1, 1, 1, 
1, 0, 0, 0, 0, 0, 1, 1, 1, 2, 2, 0, 0, 0, 0, 0, 1, 1, 1, 2, 2, 
0, 0, 0, 0, 0, 5, 5, 5, 4, 4, 4, 4, 1, 1, 1, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 2, 2, 2, 3, 3, 1, 2, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 
0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 4, 4, 4, 5, 5, 3, 4, 3, 3, 
2, 234, 234, 234, 24, 24, 12, 17, 127, 127, 27, 1, 1, 1, 1, 1, 
3, 3, 1, 1, 1, 2, 2, 2, 2, 2, 4, 4, 2, 2, 0, 300, 300, 300, 100, 
100, 200, 500, 200, 200, 400, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 
1, 1, 1, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 809782, 
809782, 809782, 809790, 809790, 809797, 809813, 809832, 809832, 
809840, 3600, 3600, 3600, 3740, 3740, 3280, 3090, 3100, 3100, 
4110, 4, 4, 4, 9, 9, 9, 9, 10, 10, 9, 9, 9, 9, 10, 10, 10, 9, 
10, 10, 10, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7.38, 7.38, 7.38, 7.34, 
7.34, 7.27, 7.33, 7.3, 7.3, 7.29, NA, NA, NA, -3.4, -3.4, -5.8, 
-6.4, -2, -2, -7.2, 2, 2, 2, 3, 3, 5, 4, 2.5, 2.5, 3, 225, 225, 
225, 255, 255, 140, 236, 315, 315, 190, 5, 5, 5, 3, 3, 9, 10, 
4, 4, 8, 400, 400, 400, 395, 395, NA, NA, 405, 405, 210, 7, 7, 
7, 5, 5, NA, NA, 10, 10, 10, 580, 580, 580, NA, NA, NA, NA, NA, 
NA, NA, 7.5, 7.5, 7.5, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, 
315, 315, 190, NA, NA, NA, NA, NA, NA, NA, 4, 4, 8, 440, 440, 
440, 390, 390, NA, NA, NA, NA, NA, NA, NA, NA, 3, 3, NA, NA, 
NA, NA, NA), .Dim = c(10, 83), .Dimnames = list(NULL, c("pxid", 
"ddiff", "tdiff", "td30", "td60", "td90", "td120", "td180", "td240", 
"td300", "td360", "td420", "td480", "td2000", "dbase", "db1", 
"db1.5", "db2", "db2.5", "db3", "db3.5", "db4", "db4.5", "db5", 
"db5.5", "db6", "db6.5", "db7", "db7.5", "db8", "db8.5", "db9", 
"db9.5", "lwh.num", "partogram", "age", "gestation", "cervix", 
"effaced", "membranes", "rd.interval", "action.line", "synto", 
"synto.time", "rom", "blood", "ctg", "fbs", "fbs.no", "iupc", 
"amnioinf", "ves", "anaesth", "delivery.mode", "perineum", "blood.loss",

"transfus", "drugs", "retained.pl", "baby.no", "weight", "apgar1", 
"apgar5", "scbu", "ph.ven", "be.ven", "dilat1", "time2", "dilat2", 
"time3", "dilat3", "time4", "dilat4", "time5", "dilat5", "time6", 
"dilat6", "time7", "dilat7", "srom.time", "srom.dilat", "epi.time", 
"epi.dilat")))


************************************************************************

Under NT 4.0, using Version 0.63.2 Beta (Jan 12, 1999):

Not sure if this is a bug or a feature (forcing me to program less
clumsily) so I'll report it here rather than to bugs.

With a medium size data set (1700 observations,70 explanatory variables)
and plenty of memory, specifically

> gc()
          free   total
Ncells  886738 1000000
Vcells 7912909 8388608

I get a fatal error when attempting summary() on the fit of an lm() on a
large-ish set of dummy variables (stored in a matrix):

Call:
lm(formula = sasch2[, "ddiff"] ~ sasch2[, "td30"] + sasch2[,     "td60"]
+ sasch2[, "td90"] + sasch2[,  "td120"] + +sasch2[,     "td180"] +
sasch2[, "td240"] + sasch2[, "td300"] + sasch2[,     "td360"] +
sasch2[, "td420"] + sasch2[, "td480"] + sasch2[,     "db1"] + sasch2[,
"db1.5"] + sasch2[, "db2"] +  sasch2[, "db2.5"] +     +sasch2[, "db3.5"]
+ sasch2[, "db4"] + sasch2[, "db4.5"] +     sasch2[, "db5"] +  sasch2[,
"db5.5"] + +sasch2[, "db6"] +     sasch2[, "db6.5"] + sasch2[, "db7"] +
sasch2[, "db7.5"] +      sasch2[, "db8"] + +sasch2[, "db8.5"] + sasch2[,
"db9"] +     sasch2[, "db9.5"])

I get estimates OK, but summary() collapses. However, if I do the same
thing less clumsily, by writing all the relevant variables to a new data
frame, and then calling

Call:
lm(formula = ddiff ~ ., data = dtmp)

I get not only the estimates but can also summary() with no problem.

Any ideas why? Seems to be memory-linked, because I can lm() and
summary() the matrix versions using only the sasch2[,'td*'] or db*
variable sets.

Simon Fear

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  9 13:31:15 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 9 Mar 1999 14:31:15 +0100
Subject: Bug in lm.wfit with zero weights in 0.63.3 (PR#136)
Message-ID: <199903091331.OAA05363@biostat.ku.dk>

R 0.63.3 (any platform)

library(lqs)
example(lqs)

gives

Warning in (y - z$residuals) + offset : longer object length
        is not a multiple of shorter object length

repeatedly. The problem is in lm.wfit, which removes cases with
zero weights, but does not adjust the offset.  The fix is

    z$fitted.values <- (y - z$residuals)
    z$weights <- w
    if (zero.weights) {
	coef[is.na(coef)] <- 0
	f0 <- x0 %*% coef
	if (ny > 1) {
	    save.r[ok, ] <- z$residuals
	    save.r[nok, ] <- y0 - f0
	    save.f[ok, ] <- z$fitted.values + offset[ok,]
	    save.f[nok, ] <- f0 + offset[nok,]
	}
	else {
	    save.r[ok] <- z$residuals
	    save.r[nok] <- y0 - f0
	    save.f[ok] <- z$fitted.values + offset[ok]
	    save.f[nok] <- f0 + offset[nok]
	}
	z$residuals <- save.r
	z$fitted.values <- save.f
	z$weights <- save.w
    } else 
      z$fitted.values <- z$fitted.values + offset
      
The only examples affected are those with a non-zero offset and zero
weights:  these will have incorrect fitted values.

I've commited this for 0.64.0.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Tue Mar  9 20:27:22 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Tue, 9 Mar 1999 21:27:22 +0100
Subject: summary() of lm() problem (PR#135)
In-Reply-To: <199903091320.OAA05357@biostat.ku.dk>; from fears@roycastle.liv.ac.uk on Tue, Mar 09, 1999 at 02:20:59PM +0100
References: <199903091320.OAA05357@biostat.ku.dk>
Message-ID: <19990309212722.61761@hal.stat.unipd.it>

On Tue, Mar 09, 1999 at 02:20:59PM +0100, fears@roycastle.liv.ac.uk wrote:
> .......................................................................
Dear Simon,
I have just now tried your example. My temptative conclusion is that
it is due to problem described in r-bugs in message with id 101; 
in short: when the R console is a windowed one (surely under Windows,
but I suspect also under the Mac) printing makes use of a
buffer with a fixed and hard-coded length.

Indeed: (i) I got a segmentation fault using rw0632; (ii) all
work without problem in my pre-release rw0633 where problem
has been 'cured' simply by enlarging the buffer (of course,
this WILL not been the definitive solution) but (iii) I got
a segmentation fault also in rw0633 if I reset the length of the
buffer to the R-0.63.2 one.

We hope to make available rw0633 towards the end of the
week. Brian Ripley and I have introduced a lot of Windows
specific changes and this is the reason of the delay.

guido





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it (Guido Masarotto)  Tue Mar  9 20:54:24 1999
From: guido@hal.stat.unipd.it (Guido Masarotto) (Guido Masarotto)
Date: Tue, 9 Mar 1999 21:54:24 +0100
Subject: summary() of lm() problem (PR#135)
In-Reply-To: <B7F24F2B48ACD11196F600805FC7F430062AA0@pdc.rc.liv.ac.uk>; from Simon Fear on Tue, Mar 09, 1999 at 08:36:18PM -0000
References: <B7F24F2B48ACD11196F600805FC7F430062AA0@pdc.rc.liv.ac.uk>
Message-ID: <19990309215424.57159@hal.stat.unipd.it>

On Tue, Mar 09, 1999 at 08:36:18PM -0000, Simon Fear wrote:
> Perhaps I might avoid wasting your time if I knew where to locate:
  Don't worry. Bugs report are vital for the entire project.

> 
> > My temptative conclusion is that
> > it is due to problem described in r-bugs in message with id 101
> 
> I haven't seen reference in the FAQ to an archive of bug reports? Have I
> just missed it?

  But, yes, there is an archive of bugs reports. From  CRAN
  main page (e.g., http://www.ci.tuwien.ac.at/R/contents.html)
  just follows the 'Bug tracking system' link.

  guido

  (ps: I am taking the freedom to post this replay to the 
       mailing list to remark the existence of the archive).
  
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From novo@uiuc.edu  Wed Mar 10 04:42:02 1999
From: novo@uiuc.edu (novo@uiuc.edu)
Date: Wed, 10 Mar 1999 05:42:02 +0100
Subject: funfits (PR#137)
Message-ID: <199903100442.FAA05782@biostat.ku.dk>

Hi,

I spotted an inconsistency between the output of funfits under R, more
specifically "nnreg", and the one obtained under S-plus. Notice the difference
in the "Root MSE", "GVC" and "GVC cost=2". As a check mark, I am also including
the data summaries, confirming that I was in fact using the same data set.
Here's my output from both systems:

============================================================
$ Splus -e
S-PLUS : Copyright (c) 1988, 1996 MathSoft, Inc.
S : Copyright AT&T.
Version 3.4 Release 1 for HP 9000 Series, HP-UX 9.0.5 : 1996
Working data will be in /mnt/cba-econ/novo/.Data

> nn.nl
Summary of outout from neural net fit
see the component summary in the output list for
more details of the fitting process
call to nnreg :
nnreg(x = inc, y = imp, k1 = 1, k2 = 7)
  # hidden units DF model DF residuals Root MSE   GCV GCV cost=2
1              1        4          296    		293.7   87400      89810
2              2        7          293    		236.9   57460      60310
3              3       10          290    		217.8   49090      52660
4              4       13          287    		213.4   47580      52200
5              5       16          284   		215.8   49200      55250
6              6       19          281    		210.7   47400      54530
7              7       22          278    		213.1   49000      57790

> summary(inc)
 Min. 1st Qu. Median Mean 3rd Qu. Max.
 1022    1926   3181 3312    4637 6152
> summary(imp)
  Min. 1st Qu. Median Mean 3rd Qu. Max.
 348.8   933.5   1932 1827    2483 5015
================================================================

================================================================
# using RedHat 5.1, Linux kernel 2.0.34
[anovo@gauss data]$ R

R : Copyright 1999, The R Development Core Team
Version 0.63.2  (January 12, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

[Previously saved workspace restored]

> summary(nn.nl)
Summary of outout from neural net fit
see the component summary in the output list for
more details of the fitting process
call to nnreg :
nnreg(x = inc, y = imp, k1 = 1, k2 = 7)
  # hidden units DF model DF residuals Root MSE   GCV GCV cost=2
1              1        4          296    		292.5   86690      89080
2              2        7          293    		236.6   57330      60170
3              3       10          290    		214.8   47750      51220
4              4       13          287    		210.0   46120      50600
5              5       16          284    		208.4   45890      51530
6              6       19          281    		204.8   44780      51510
7              7       22          278    		194.0   40590      47870

> summary(inc)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
   1022    1926    3181    3312    4637    6152
> summary(imp)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
  348.8   933.5  1932.0  1827.0  2483.0  5015.0
================================================================

Alvaro Novo

ps. The library under S-plus was provided to me by one of the original authors,
Barbara Bailey (attached her computer directory). So, I guess we are safe on
that ground.

	--      --      --      --      --      --      --      --     
                              Alvaro A. Novo
                        2116 S. Orchard St., #304
                             Urbana, IL 61801

                              novo@uiuc.edu
                        anovo@ysidro.econ.uiuc.edu
              http://www.students.uiuc.edu/~novo/Alvaro.htm
                              217-337-4893
	 --      --      --      --      --      --      --      --

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 10 06:29:47 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 10 Mar 1999 07:29:47 +0100
Subject: funfits (PR#137)
Message-ID: <199903100629.HAA05792@biostat.ku.dk>

On Wed, 10 Mar 1999 novo@uiuc.edu wrote:

> Hi,
> 
> I spotted an inconsistency between the output of funfits under R, more
> specifically "nnreg", and the one obtained under S-plus. Notice the difference
> in the "Root MSE", "GVC" and "GVC cost=2". As a check mark, I am also including
> the data summaries, confirming that I was in fact using the same data set.
> Here's my output from both systems:

Yes, but does this problem have a unique solution?  Only rarely do neural
net fits not have multiple local optima. More specifically, on the basis of
the figures here it is the S-PLUS output that is wrong as the fits under R
are achieving lower minima. Note (I have not checked here) that often R is
working in double precision where S-PLUS uses floats (and this is Fortran
code, so this is likely).  In my own neural nets package, that did change
the answers using the same compiler and same version of S-PLUS: it is a
function of the ill-posed nature of the problem.  I also get different
answers with the same code and different compilers.

I do think that problems with a package should be taken up with the
author/porter:

auk% less DESCRIPTION 
Package: funfits
Version: 2.0-3
Author: S original by Doug Nychka <nychka@stat.ncsu.edu>
        R port by Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at>.

If you feel the need to file a report to R-bugs on a package, we do need an
example that we can reproduce and work on.  On the evidence so far I am
not convinced there is a bug here.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 10 10:11:22 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Mar 1999 11:11:22 +0100
Subject: funfits (PR#137)
In-Reply-To: ripley@stats.ox.ac.uk's message of Wed, 10 Mar 1999 07:29:47 +0100
References: <199903100629.HAA05792@biostat.ku.dk>
Message-ID: <x27lsp4pth.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> I do think that problems with a package should be taken up with the
> author/porter:
> 
> auk% less DESCRIPTION 
> Package: funfits
> Version: 2.0-3
> Author: S original by Doug Nychka <nychka@stat.ncsu.edu>
>         R port by Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at>.
> 
> If you feel the need to file a report to R-bugs on a package, we do need an
> example that we can reproduce and work on.  On the evidence so far I am
> not convinced there is a bug here.

I'll just add that there is a slot called "Packages" in the bug filing
system which holds reports that don't pertain to R itself. This is
partly intended as a service to package writers, partly to have a
place to file the reports, since there is no obvious way of keeping
people from sending them in...

I see nothing wrong in itself with discussing problems in packages on
R-devel, but it may be a bit futile if the package author/porter
isn't listening.

[Note: r-bugs stripped from Cc: list on this note]

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Mar 10 16:23:40 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 10 Mar 1999 17:23:40 +0100
Subject: [R] bug? and New bug. (PR#138)
Message-ID: <199903101623.RAA06323@biostat.ku.dk>

>>>>> "Mai" == Mai Zhou <mai@ms.uky.edu> writes:

    Mai> A new bug.  In 0.63.0 (windows NT) and 0.63.2 (on the Rweb)

    >> pt(1.96,df=100)
    Mai> [1] 0.9736105 #this is OK
    >> pt(1.96, df=100000000000000000000)
    Mai> [1] 0.5 #clearly wrong

    Mai> and for df=1000000 it took way too long to compute

    Mai> same with the F-distribution function.

Oh dear!  this is an ``old one'' 
   (I had at one time fixed something similar, maybe qt() ?
    but never done/checked all these limit cases).

--- I look at it some more...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Mar 10 17:43:07 1999
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 10 Mar 1999 18:43:07 +0100
Subject: [R] bug? and New bug. --- patch for pt() only (PR#138)
Message-ID: <199903101743.SAA06374@biostat.ku.dk>

The following patch saves  pt(), but not the  
pf() and pbeta() ones which are harder.. 
[pbeta(), the incomplete beta ratio is really underlying all these...
 needs another asymptotic formula, and it's even harder to decide 
 WHEN to switch from the (Taylor kind) series  to the asymptotic formula
]
This has to wait for a while, unless someone else....


BTW,  S-plus also fouls up completely here:

    df3 <- c(10^(3:20))
    ## completely wrong on S; taking forever on R
    plot(df3, ptd3 <- pt(1.96,df=df3), log='x', type='b')
    ptd3

giving

  [1]  9.748634e-01  9.749882e-01  9.750007e-01  9.750020e-01
  [5]  9.750021e-01  9.750021e-01  9.750021e-01  9.750023e-01
  [9]  9.750054e-01  9.750436e-01  9.748710e-01  9.725377e-01
 [13]  8.914032e-01 -4.261217e+06            NA            NA
 [17]            NA            NA

where the last before the NA's is  -426121.7  !! 


-----------------------
Here is the patch
---------------------------------------------------------------------

--- src/nmath/pt.c.~1~	Wed Feb  3 12:21:46 1999
+++ src/nmath/pt.c	Wed Mar 10 18:15:42 1999
@@ -41,6 +41,11 @@
     if(!finite(n))
 	return pnorm(x, 0.0, 1.0);
 #endif
+    if (n > 4e5) { /*-- Fixme(?): test should depend on `n' AND `x' ! */
+	/* Approx. from	 Abramowitz & Stegun 26.7.8 (p.949) */
+	val = 1./(4.*n);
+	return pnorm(x*(1. - val)/sqrt(1. + x*x*2.*val), 0.0, 1.0);
+    }
     val = 0.5 * pbeta(n / (n + x * x), n / 2.0, 0.5);
     return (x > 0.0) ? 1 - val : val;
 }

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Mar 10 18:19:09 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 10 Mar 1999 13:19:09 -0500
Subject: .Alias and memory
Message-ID: <99Mar10.134343est.13477@mailgate.bank-banque-canada.ca>

In an effort to encapsulate my dependence on class in order to deal with
oldclass/class in Splus  I defined the functions

   tfclass     <- class
  "tfclass<-" <- function(x, value){ class(x) <- value ; x }

and also the function

 classed <- function(x, cls) {class(x) <- cls; x}

This last allows me to end a function definition with
  ...
  classed(somecalc, "whatever") }

rather than
  ...
  obj <- somecalc
  class(obj) <- "whatever"
  obj }

Unfortunately, these seem to increase my memory usage in R substantially. Using

   tfclass      <- .Alias(class)
"tfclass<-" <- .Alias(get("class<-"))

helps a bit. Is there a better overall approach to this that avoids increasing
the memory demands?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Thu Mar 11 08:36:35 1999
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Thu, 11 Mar 1999 09:36:35 +0100
Subject: : for factors (PR#139)
Message-ID: <199903110836.JAA10063@biostat.ku.dk>


The following example from the help page does not work:

> f1_ gl(2,3); f1
> f2_ gl(3,2); f2
> f1:f2 # a factor, the ``cross''  f1 x f2

yields

Warning in f1:f2 : Numerical expression has 6 elements: only the first used
[1] 1

whereas R-0.61.2 yields

> f1:f2 # a factor, the ``cross''  f1 x f2
[1] 1:1 1:1 1:2 2:2 2:3 2:3

Note that the new behavior is consistent with S+ (but not with the
help page).

	Andreas


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = in progress
 status.rev = 0
 major = 0
 minor = 63.3
 year = 1999
 month = February
 day = 24
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Mar 11 09:37:53 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 11 Mar 1999 09:37:53 +0000 (GMT)
Subject: .Alias and memory
In-Reply-To: <99Mar10.134343est.13477@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.3.96.990311093259.12487F-100000@laplace>

Hi Paul,

On Wed, 10 Mar 1999, Paul Gilbert wrote:

> In an effort to encapsulate my dependence on class in order to deal with
> oldclass/class in Splus  I defined the functions

[ ... ]
 
> This last allows me to end a function definition with
>   ...
>   classed(somecalc, "whatever") }
> 
> rather than
>   ...
>   obj <- somecalc
>   class(obj) <- "whatever"
>   obj }

I may be missing the point, but it seems to me that you could achieve a
`one-line return' using

    structure(somecalc, class = "whatever")

which would also avoid passing somecalc into another function.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 11 10:11:06 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Mar 1999 11:11:06 +0100
Subject: : for factors (PR#139)
In-Reply-To: Andreas.Weingessel@ci.tuwien.ac.at's message of Thu, 11 Mar 1999 09:36:35 +0100
References: <199903110836.JAA10063@biostat.ku.dk>
Message-ID: <x2k8wo8hfp.fsf@blueberry.kubism.ku.dk>

Andreas.Weingessel@ci.tuwien.ac.at writes:

> Warning in f1:f2 : Numerical expression has 6 elements: only the first used
> [1] 1
> 
> whereas R-0.61.2 yields
> 
> > f1:f2 # a factor, the ``cross''  f1 x f2
> [1] 1:1 1:1 1:2 2:2 2:3 2:3

Same as PR#40...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Mar 11 11:15:05 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 11 Mar 1999 11:15:05 +0000 (GMT)
Subject: .Alias and memory
Message-ID: <199903111115.LAA15909@toucan.stats.ox.ac.uk>

> Date: Thu, 11 Mar 1999 09:37:53 +0000 (GMT)
> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
> To: Paul Gilbert <pgilbert@bank-banque-canada.ca>
> 
> On Wed, 10 Mar 1999, Paul Gilbert wrote:
> 
> > In an effort to encapsulate my dependence on class in order to deal with
> > oldclass/class in Splus  I defined the functions
> 
> [ ... ]
>  
> > This last allows me to end a function definition with
> >   ...
> >   classed(somecalc, "whatever") }
> > 
> > rather than
> >   ...
> >   obj <- somecalc
> >   class(obj) <- "whatever"
> >   obj }
> 
> I may be missing the point, but it seems to me that you could achieve a
> `one-line return' using
> 
>     structure(somecalc, class = "whatever")
> 
> which would also avoid passing somecalc into another function.

In part you are. That is equivalent to

attr(somecalc, "class") <- "whatever"

and whereas that happens to be how class<- is defined on S3 and R, it
is not how it works in S-PLUS 5 (although oldClass<- is currently
defined that way).  When you want to change to S-PLUS 5-style classes
you have to remember that you have subverted the system!

More generally, using the representation not the public method in
object-oriented programming is a recipe for disaster.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 11 13:12:50 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 11 Mar 1999 14:12:50 +0100
Subject: [R] R and kron
In-Reply-To: <Pine.LNX.3.95.990311120618.885C-100000@mercury.quantex> (message
 from John Logsdon on Thu, 11 Mar 1999 12:08:33 +0000 (GMT))
References: <Pine.LNX.3.95.990311120618.885C-100000@mercury.quantex>
Message-ID: <199903111312.OAA07075@sophie.ethz.ch>

>>>>> "John" == John Logsdon <j.logsdon@lancaster.ac.uk> writes:

    John> I note that the CRAN at .at land still refers to 0.63.2.  Is this
    John> just a typo?  I don't want to download a whole lot only to find I
    John> still have it!  Does 0.63.3 live elsewhere?

It's certainly there! we all mirror it from Vienna !
It maybe that the html text doesn't yet have the proper link...
But it IS there (and on any other CRAN mirror)
 in the   ./src/base/ directory !

    John> And I note the new function kronecker - very useful but can it be
    John> applied to non-numerics as in factors, data frames etc preserving
    John> the class, levels and names?

Certainly --- if you enhance it;
Thanks in advance for the contribution...  ;-)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Thu Mar 11 13:55:44 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Thu, 11 Mar 1999 13:55:44 +0000 (GMT)
Subject: [R] R and kron
In-Reply-To: <199903111312.OAA07075@sophie.ethz.ch>
Message-ID: <Pine.GSO.3.96.990311135103.12487I-100000@laplace>

On Thu, 11 Mar 1999, Martin Maechler wrote:

>     John> And I note the new function kronecker - very useful but can it be
>     John> applied to non-numerics as in factors, data frames etc preserving
>     John> the class, levels and names?
> 
> Certainly --- if you enhance it;
> Thanks in advance for the contribution...  ;-)

kronecker() is actually a wrapper for outer(), so unfortunately you will
have to enhance outer() as well!  But I expect an enhanced outer() would
be quite useful.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Mar 11 15:49:14 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 11 Mar 1999 10:49:14 -0500
Subject: [R] re: smp in Linux
References: <Pine.GSO.4.10.9903100821400.4178-100000@wompom.biostat.washington.edu>
Message-ID: <99Mar11.111420est.13505@mailgate.bank-banque-canada.ca>

>On the other hand, most of the problems I have where speed is an issue are
>simulations or bootstrapping problems that scale almost perfectly by
>running 1/n as many on each of n processors.

This has been my experience too, and I have lots of problems like this. It would
sure be nice to have some possibility like:

parallelfor (i in 1:N, listofmachines )  x[[i]] <- simulate(model[[i]],
data[[i]])

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@ucar.edu  Thu Mar 11 16:15:17 1999
From: oncley@ucar.edu (oncley@ucar.edu)
Date: Thu, 11 Mar 1999 17:15:17 +0100
Subject: rbind dimnames with complex (PR#140)
Message-ID: <199903111615.RAA11189@biostat.ku.dk>

Full_Name: Steve Oncley
Version: 0.63.3
OS: Redhat5.2 i386
Submission from: 128.117.80.159 (128.117.80.159)


names (or dimnames) are lost when rbind-ing complex values (but not cbind):

> x <- rep(1+1i,2)
> names(x) <- c("a","b")
> x
   a    b
 1+1i 1+1i
> rbind(x,x)
     [,1] [,2]
[1,] 1+1i 1+1i
[2,] 1+1i 1+1i
> cbind(x,x)
  [,1] [,2]
a 1+1i 1+1i
b 1+1i 1+1i


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@ucar.edu  Thu Mar 11 16:19:43 1999
From: oncley@ucar.edu (oncley@ucar.edu)
Date: Thu, 11 Mar 1999 17:19:43 +0100
Subject: log plots fail with NAs (PR#141)
Message-ID: <199903111619.RAA11252@biostat.ku.dk>

Full_Name: Steve Oncley
Version: 0.63.3
OS: Redhat5.2 i386
Submission from: 128.117.80.159 (128.117.80.159)


Shouldn't this work, but only plot 2 points?

> plot(c(1,NA,10),log="y")
Error: missing value where logical needed


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From oncley@ucar.edu  Thu Mar 11 16:34:36 1999
From: oncley@ucar.edu (oncley@ucar.edu)
Date: Thu, 11 Mar 1999 17:34:36 +0100
Subject: exists finds objects lots of places! (PR#142)
Message-ID: <199903111634.RAA11500@biostat.ku.dk>

Full_Name: Steve Oncley
Version: 0.63.3
OS: Redhat5.2 i386 
Submission from: 128.117.80.159 (128.117.80.159)


"exists" finds object UP TO the position it is in
> search()
[1] ".GlobalEnv"   "Autoloads"    "package:base"
> exists("ls",1)
[1] TRUE
> exists("ls",2)
[1] TRUE
> exists("ls",3)
[1] TRUE
> x <- 1
> exists("x",1)
[1] TRUE
> exists("x",2)
[1] FALSE
> exists("x",3)
[1] FALSE

whereas, S+ only finds the one position where the object is:
> search()
 [1] ".Data"                                    
 [2] "/net/aster/splus3.4/local/.Data"          
 [3] "/net/aster/splus3.4/splus/.Functions"     
 [4] "/net/aster/splus3.4/stat/.Functions"      
 [5] "/net/aster/splus3.4/s/.Functions"         
 [6] "/net/aster/splus3.4/s/.Datasets"          
 [7] "/net/aster/splus3.4/stat/.Datasets"       
 [8] "/net/aster/splus3.4/splus/.Datasets"      
 [9] "/net/aster/splus3.4/library/Matrix/.Data" 
[10] "/net/aster/splus3.4/library/trellis/.Data"
> exists("ls",1)
[1] F
> exists("ls",2)
[1] F
> exists("ls",3)
[1] F
> exists("ls",4) 
[1] F
> exists("ls",5)
[1] T
> exists("ls",6)
[1] F


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 11 16:38:46 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Mar 1999 17:38:46 +0100
Subject: log plots fail with NAs (PR#141)
In-Reply-To: oncley@ucar.edu's message of Thu, 11 Mar 1999 17:19:43 +0100
References: <199903111619.RAA11252@biostat.ku.dk>
Message-ID: <x23e3chtgp.fsf@blueberry.kubism.ku.dk>

oncley@ucar.edu writes:

> Shouldn't this work, but only plot 2 points?
> 
> > plot(c(1,NA,10),log="y")
> Error: missing value where logical needed

Yes. Inside xy.coords, we have

if ("y" %in% log && any(ii <- y <= 0))
                              ^^^^^^

make that y <= 0 & !is.na(y)
                 ^^^^^^^^^^^

(and ditto for x)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Mar 11 17:10:03 1999
From: thomas@biostat.washington.edu (thomas@biostat.washington.edu)
Date: Thu, 11 Mar 1999 18:10:03 +0100
Subject: exists finds objects lots of places! (PR#142)
Message-ID: <199903111710.SAA14188@biostat.ku.dk>

On Thu, 11 Mar 1999 oncley@ucar.edu wrote:

> Full_Name: Steve Oncley
> Version: 0.63.3
> OS: Redhat5.2 i386 
> Submission from: 128.117.80.159 (128.117.80.159)
> 
> 
> "exists" finds object UP TO the position it is in


> whereas, S+ only finds the one position where the object is:

"It's not a bug, it's a feature"

R> args(exists)
function (x, where = -1, envir = pos.to.env(where), frame, mode = "any", 
    inherits = TRUE) 

You need to use inherits=F to search only the specified position.>
R> search()
[1] ".GlobalEnv"   "Autoloads"    "package:base"
R> exists("ls",2)
[1] TRUE 
R> exists("ls",2,inherits=F)
[1] FALSE


Thomas Lumley
Assistant Professor,Biostatistics
University of Washington, Seattle



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Mar 11 17:09:29 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 11 Mar 1999 09:09:29 -0800 (PST)
Subject: [R] re: smp in Linux
In-Reply-To: <99Mar11.111420est.13505@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.10.9903110907470.7067-100000@wompom.biostat.washington.edu>

On Thu, 11 Mar 1999, Paul Gilbert wrote:

> >On the other hand, most of the problems I have where speed is an issue are
> >simulations or bootstrapping problems that scale almost perfectly by
> >running 1/n as many on each of n processors.
> 
> This has been my experience too, and I have lots of problems like this. It would
> sure be nice to have some possibility like:
> 
> parallelfor (i in 1:N, listofmachines )  x[[i]] <- simulate(model[[i]],
> data[[i]])
> 

This may be a case for implementing .For().  We currently say it is not
necessary and thus not implemented, which is true for systems with more
users than processors, but it would be useful for multiprocessor systems.

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From N.J.Lee@statslab.cam.ac.uk  Thu Mar 11 17:42:07 1999
From: N.J.Lee@statslab.cam.ac.uk (Nicholas Lee)
Date: Thu, 11 Mar 1999 17:42:07 +0000 (GMT)
Subject: [R] re: smp in Linux
In-Reply-To: <99Mar11.111420est.13505@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.HPP.3.96.990311173701.21260A-100000@tiger.statslab.cam.ac.uk>


On Thu, 11 Mar 1999, Paul Gilbert wrote:

> This has been my experience too, and I have lots of problems like this.
> It would sure be nice to have some possibility like: 
> 
> parallelfor (i in 1:N, listofmachines )  x[[i]] <- simulate(model[[i]],
> data[[i]]) 

Wouldn't it be better to do these sort of coase grain parallisation at a
higher level?  ie with a little bit of perl code, and/or some other load
distribution package from outside R. 

Nicholas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From guido@hal.stat.unipd.it  Sun Mar 14 10:09:32 1999
From: guido@hal.stat.unipd.it (guido@hal.stat.unipd.it)
Date: Sun, 14 Mar 1999 11:09:32 +0100
Subject: y with diaeresis (PR#143)
Message-ID: <199903141009.LAA03311@blueberry.kubism.ku.dk>

[Not important for message below; in this moment link from CRAN
 to the 'R Bug Tracking system (http://blueberry.kubism.ku.dk/R)' 
 is down (at least, I get a "The requested URL /R was not 
 found on this server." message)]

To display properly this message, you mailer must handle properly
latin1 encoding. With other encoding, I suppose that the role
played by 'y diaeresis' should be played by the character
with code '255'

Look to the following example:
----------------------------------------------------------------------------
[~/tmp]% uname -a
Linux tui 2.0.34 #1 Thu Jan 14 18:56:24 CET 1999 i686 unknown
[~/tmp]% cat a.R
x <- "12"
cat(x,"\n")
[~/tmp]% ../src/R-release/bin/R --vanilla < a.R

R : Copyright 1999, The R Development Core Team
Version 0.63.3 in progress (February 25, 1999)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type    "?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type    "?contributors" for a list.

Type    "demo()" for some demos, "help()" for on-line help, or
        "help.start()" for a HTML browser interface to help.
Type    "q()" to quit R.

> x <- "12"
+ cat(x,"\n")
+ 
[~/tmp]% 
----------------------------------------------------------------------------
Look to the 'continuation' prompt. It seems that first line isn't 
parsed to end. 
[Note: I have tested this also with the final 0.63.3; simply,
it is not installed on machine I am writing in this moment]

Problem is due to 'y diaeresis'.

This is from ESS (not quoting the 'y diaeresis'; to insert it in 
a emacs buffer I have to hit ^Q377)
----------------------------------------------------------------------------
> 

Save workspace image? [y/n/c]:
----------------------------------------------------------------------------
i.e, 'y diaeresis' seems interpreted as an EOF.

I don't know where is the solution but problem seems due to the
conversions from int to char (made implicitly by R_ReadConsole)
and then back to int made in src/main/gram.y(buffer_getc). Result
is that the 'if (c==EOF)' test in that function is true when c='y diaeresis'.

Indeed:
----------------------------------------------------------------------------
[~/tmp]% cat a.c
#include <stdio.h>

int main(int argc,char **argv) {
  int i,j;
  char c;
  while ((i=fgetc(stdin))!=EOF) {
    c = i;
    j = c;
    if (c=='\n') printf("\n");
    else  printf("/%d/%d/%d/%c/%d ",i,j,c,c,j==EOF);
  }
}
[~/tmp]% gcc -o a a.c
[~/tmp]% ./a < a.R
/120/120/120/x/0 /32/32/32/ /0 /60/60/60/</0 /45/45/45/-/0 /32/32/32/ /0 /34/34/34/"/0 /49/49/49/1/0 /50/50/50/2/0 /192/-64/-64//0 /193/-63/-63//0 /255/-1/-1//1 /34/34/34/"/0 
/99/99/99/c/0 /97/97/97/a/0 /116/116/116/t/0 /40/40/40/(/0 /120/120/120/x/0 /44/44/44/,/0 /34/34/34/"/0 /92/92/92/\/0 /110/110/110/n/0 /34/34/34/"/0 /41/41/41/)/0 
------------------------------------------------------------------------------
Look to the sequence including 'y diaeresis'. It shows that after the
double conversion 'y diaeresis'==EOF is TRUE.

g.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar 14 13:46:50 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 1999 14:46:50 +0100
Subject: y with diaeresis (PR#143)
In-Reply-To: guido@hal.stat.unipd.it's message of "Sun, 14 Mar 1999 11:09:32 +0100"
References: <199903141009.LAA03311@blueberry.kubism.ku.dk>
Message-ID: <x2emmstc8l.fsf@blueberry.kubism.ku.dk>

guido@hal.stat.unipd.it writes:

> [Not important for message below; in this moment link from CRAN
>  to the 'R Bug Tracking system (http://blueberry.kubism.ku.dk/R)' 
>  is down (at least, I get a "The requested URL /R was not 
>  found on this server." message)]

Arrrgh... That's what happens if you upgrade systems on a Friday
afternoon. Apparently, the Apache configurations scripts got changed
from RedHat5.1 to 5.2 and I didn't think to check. Should be OK now.

(Email submissions take a different route in and should be unaffected
by this.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar 14 14:03:47 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 1999 15:03:47 +0100
Subject: R-bugs -- was: Re: y with diaeresis (PR#143)
In-Reply-To: Peter Dalgaard BSA's message of "14 Mar 1999 14:46:50 +0100"
References: <199903141009.LAA03311@blueberry.kubism.ku.dk> <x2emmstc8l.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2d82ctbgc.fsf_-_@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> guido@hal.stat.unipd.it writes:
> 
> > [Not important for message below; in this moment link from CRAN
> >  to the 'R Bug Tracking system (http://blueberry.kubism.ku.dk/R)' 
> >  is down (at least, I get a "The requested URL /R was not 
> >  found on this server." message)]
> 
> Arrrgh... That's what happens if you upgrade systems on a Friday
> afternoon. Apparently, the Apache configurations scripts got changed
> from RedHat5.1 to 5.2 and I didn't think to check. Should be OK now.

Erm, BTW: That link... The official link is supposed to be

http://r-bugs.biostat.ku.dk

and not something hardwired into my (current!) PC.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Mar 14 15:48:55 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 1999 16:48:55 +0100
Subject: y with diaeresis (PR#143)
In-Reply-To: guido@hal.stat.unipd.it's message of "Sun, 14 Mar 1999 11:09:32 +0100"
References: <199903141009.LAA03311@blueberry.kubism.ku.dk>
Message-ID: <x2iuc4t6l4.fsf@blueberry.kubism.ku.dk>

guido@hal.stat.unipd.it writes:

> [Not important for message below; in this moment link from CRAN
>  to the 'R Bug Tracking system (http://blueberry.kubism.ku.dk/R)' 
>  is down (at least, I get a "The requested URL /R was not 
>  found on this server." message)]
> 
> To display properly this message, you mailer must handle properly
> latin1 encoding. With other encoding, I suppose that the role
> played by 'y diaeresis' should be played by the character
> with code '255'
...
> and then back to int made in src/main/gram.y(buffer_getc). Result
> is that the 'if (c==EOF)' test in that function is true when c='y diaeresis'.

I've sprinkled a handful of "unsigned" over the sources. Seems to have
helped. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Mon Mar 15 05:18:08 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 14 Mar 1999 21:18:08 -0800
Subject: R packages and test code
Message-ID: <87pv6b9vqn.fsf@alpha.cfas.washington.edu>



Where is the best place to put evaluation/test code in creating an R
package?  I thought about a test subdirectory, but might it be better
to put in the R directory?  I guess I'm more concerned about the
output used for evaluating the success of the test, rather than the
test code and data, itself.

best,
-tony

-- 
A.J. Rossini
UW Biostatistics & Center for AIDS Research 
206-543-1044 / 206-720-4282                 
rossini@biostat.washington.edu              
http://www.biostat.washington.edu/~rossini/ 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Mar 15 09:40:14 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 15 Mar 1999 10:40:14 +0100
Subject: R packages and test code
In-Reply-To: <87pv6b9vqn.fsf@alpha.cfas.washington.edu>
 (rossini@biostat.washington.edu)
References: <87pv6b9vqn.fsf@alpha.cfas.washington.edu>
Message-ID: <199903150940.KAA09497@sophie.ethz.ch>

>>>>> "tony" == A J Rossini <rossini@biostat.washington.edu> writes:

    tony> Where is the best place to put evaluation/test code in creating
    tony> an R package?  I thought about a test subdirectory, but might it
    tony> be better to put in the R directory?  I guess I'm more concerned
    tony> about the output used for evaluating the success of the test,
    tony> rather than the test code and data, itself.

Good question.  
This hasn't been done yet in a formal general way.
MASS comes with the  scripts subdirectory, 
but there's no "make check" and comparison of desired and actual output.

1) "THE" basic test is running all the examples from all the *.Rd files.
  You can do this with contributed packages by

       R CMD check [options] [-l lib] pkg_1 ... pkg_n

  However, this just runs the examples 
	   (those *not* within a \dontrun{.} clause)
  and produces an  <pkg>-Ex.Rout  file.
  You still have to check yourself if the *.Rout file has the proper output

2) I assume the thing you desire is something like 
   what the distributed R does in  ./tests/  where there are
   foobar.R  and foobar.Rout.save  files 
	     for (foobar in c("is-things", "simple-tests", "eval-etc",
			      ...)) :
      R --vanilla < foobar.R > foobar.Rout
   is run 
   and a somewhat "tolerant" diff between  foobar.Rout and foobar.Rout.save
   is made. "SUCCESS" (actually `Ok') is reported when there are no
   (nontrivial) diffs.

   Try  "make check" with your R distribution if you don't know what I mean.

It shouldn't be hard to add this to the  "R INSTALL" scripts  :

   If there's  <pkg-src>/tests/
   for all pairs foobar.R and foobar.Rout.save (in that directory) 
   do the above test.

Tony, could you try to add this feature (to the relevant R scripts)
yourself?  or anyone else?
[it would be nice of course, if the identical scripts were used for 
 "base R"'s  ``make check''  and for the contributed packages's  
 "R CMD check .. pkg" or (preferably) "R INSTALL pkg ..."
]

Martin



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@biostat.washington.edu  Mon Mar 15 18:35:39 1999
From: rossini@biostat.washington.edu (A.J. Rossini)
Date: 15 Mar 1999 10:35:39 -0800
Subject: R packages and test code
In-Reply-To: Martin Maechler's message of "Mon, 15 Mar 1999 10:40:14 +0100"
References: <87pv6b9vqn.fsf@alpha.cfas.washington.edu> <199903150940.KAA09497@sophie.ethz.ch>
Message-ID: <87sob6eh38.fsf@alpha.cfas.washington.edu>


>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
>>>>> "tony" == A J Rossini <rossini@biostat.washington.edu> writes:

    tony> Where is the best place to put evaluation/test code in
    tony> creating an R package?  I thought about a test subdirectory,
    tony> but might it be better to put in the R directory?  I guess
    tony> I'm more concerned about the output used for evaluating the
    tony> success of the test, rather than the test code and data,
    tony> itself.

    MM> Good question.  This hasn't been done yet in a formal general
    MM> way.  MASS comes with the scripts subdirectory, but there's no
    MM> "make check" and comparison of desired and actual output.

Is there a more formal description of the packaging system than that
given in the R-faq (which needs a bit of an update for ESS, Kurt)?

(I'd like to see one, if so, in order to specify exactly how to
consider the general situation).


    MM> 2) I assume the thing you desire is something like
    MM>    what the distributed R does in ./tests/ where there are
    MM>    foobar.R and foobar.Rout.save files
    MM> 	     for (foobar in c("is-things", "simple-tests",
    MM> 	     "eval-etc",
    MM> 			      ...)) :
    MM>       R --vanilla < foobar.R > foobar.Rout
    MM>    is run and a somewhat "tolerant" diff between foobar.Rout
    MM>    and foobar.Rout.save is made. "SUCCESS" (actually `Ok') is
    MM>    reported when there are no (nontrivial) diffs.

Yes, but not quite as formal as checking for non-trivial diffs.  I'd
be satisfied with just being able to construct a diff (or the new
file, to compare with the gold standard, for the diff) and making the
user visually go over them.

    MM> Tony, could you try to add this feature (to the relevant R
    MM> scripts) yourself?  or anyone else?  [it would be nice of
    MM> course, if the identical scripts were used for
    MM>  "base R"'s ``make check'' and for the contributed packages's
    MM>  "R CMD check .. pkg" or (preferably) "R INSTALL pkg ..."
    MM> ]

I can try, since I really want this (the tests, and quite possibly the
packaging specification for my next stat language project :-).
Probably won't happen until after my Vienna/Berlin/Atlanta trips over
the next 2+ weeks...

best,
-tony

-- 
A.J. Rossini
UW Biostatistics & Center for AIDS Research 
206-543-1044 / 206-720-4282                 
rossini@biostat.washington.edu              
http://www.biostat.washington.edu/~rossini/ 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wagman@enteract.com  Thu Mar 18 07:58:49 1999
From: wagman@enteract.com (wagman@enteract.com)
Date: Thu, 18 Mar 1999 08:58:49 +0100
Subject: glm throws erroneous(?)'names attribute must be the same length as the vector' (PR#144)
Message-ID: <199903180758.IAA08796@blueberry.kubism.ku.dk>

Full_Name: Barnet Wagman
Version: 63.2
OS: Linux
Submission from: (NULL) (207.229.172.168)


After a number of interations, glm(family=binomial) throws an error
	'Error: names attribute must be the same length as the vector'
The same model works in lm() with the same data frame, so presumably it is not
misspecified.

In the iterations prior to the error, glm() generates the warnings
	'Warning: fitted probabilities of 0 or 1 occurred'

The fit is converging prior to the error.

Could the problem involve a singularity and the wrong error message?

FYI The model contains 34 variables in around 11,000 cases.
The command used is
'glm(formula=...,data=...,family=binomial,control=control.glm(epsilon=0.0001.maxit=50,
 trace=TRUE))'
Changing epsilon and/or explicitly setting 'start' does not effect the problem.


Thanks for your help.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Mar 22 12:40:03 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Mon, 22 Mar 1999 12:40:03 +0000 (GMT)
Subject: Extension to outer()
Message-ID: <Pine.GSO.3.96.990322121912.691A-200000@laplace>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-1804928587-922106403=:691
Content-Type: TEXT/PLAIN; charset=US-ASCII

A couple of weeks ago I asked if anyone had generalised outer to include
bound extents -- effectively taking the diagonal of an outer product.
Attached is my take on the solution.  There is an extra argument to outer,
BIND, which if null results in a simple outer product.  I've used a
slightly different algorithm which I think is more transparent than the
original code, and also generalises better.

If BIND is not null, then outer(A, B, BIND = c(i, j)) computes an array
with extent j of B bound along extent i of A.  For example, if A and B are
both matrices and V is the result with BIND=c(1,1), then V[i, j, k] =
FUN(A[i, j], B[i, k], ...).  One use for the BIND argument is in computing
Euclidean distances:

"gdist" <- function(X, Y)
{
	X <- as.matrix(X)
	Y <- as.matrix(Y)
	sqrt(apply(outer(X, Y, "-", BIND = c(2,2))^2, c(1,3), sum))
}

which, unlike dist() from `mva' can provide submatrices of the full
distance matrix -- very useful for covariances.

This BIND argument to outer turns out to be very useful in lots of
different areas of our work.  If anyone has any feedback on the code I
would be very grateful for it.  Many thanks, Jonathan. 

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

---559023410-1804928587-922106403=:691
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="outer.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.GSO.3.96.990322124003.691B@laplace>
Content-Description: 

Im91dGVyIiA8LQ0KZnVuY3Rpb24gKEEsIEIsIEZVTiA9ICIqIiwgQklORCA9
IE5VTEwsIC4uLikgDQp7DQogICAgRlVOIDwtIG1hdGNoLmZ1bihGVU4pDQog
ICAgQSA8LSBhcy5hcnJheShBKQ0KICAgIEIgPC0gYXMuYXJyYXkoQikNCiAg
ICBkaW1zIDwtIGxpc3QoZGltKEEpLCBkaW0oQikpDQogICAgbmEgPC0gbGVu
Z3RoKGRpbXNbWzFdXSkNCiAgICBuYiA8LSBsZW5ndGgoZGltc1tbMl1dKQ0K
ICAgIGlmIChpcy5udWxsKGRuYSA8LSBkaW1uYW1lcyhBKSkpIA0KICAgICAg
ICBkbmEgPC0gdmVjdG9yKCJsaXN0IiwgbmEpDQogICAgaWYgKGlzLm51bGwo
ZG5iIDwtIGRpbW5hbWVzKEIpKSkgDQogICAgICAgIGRuYiA8LSB2ZWN0b3Io
Imxpc3QiLCBuYikNCiAgICBpZiAoaXMubnVsbChCSU5EKSkgew0KICAgICAg
ICAjIHNpbXBsZSBvdXRlcg0KICAgICAgICBBIDwtIGFycmF5KEEsIGMoZGlt
c1tbMV1dLCBkaW1zW1syXV0pKQ0KICAgICAgICBCIDwtIGFycmF5KEIsIGMo
ZGltc1tbMl1dLCBkaW1zW1sxXV0pKQ0KICAgICAgICBCIDwtIGFwZXJtKEIs
IGMobmIgKyAxOm5hLCAxOm5iKSkNCiAgICAgICAgcm9iaiA8LSBhcnJheShG
VU4oQSwgQiwgLi4uKSwgZGltKEEpKQ0KICAgICAgICBkaW1uYW1lcyhyb2Jq
KSA8LSBjKGRuYSwgZG5iKQ0KICAgICAgICByb2JqDQogICAgfQ0KICAgIGVs
c2Ugew0KICAgICAgICAjIG1vcmUgY29tcGxpY2F0ZWQgYm91bmQgb3V0ZXIN
CiAgICAgICAgaWYgKCEoQklORFsxXSAlaW4lIDE6bmEgJiYgQklORFsyXSAl
aW4lIDE6bmIpKSANCiAgICAgICAgICAgIHN0b3AoImludmFsaWQgZXh0ZW50
IGZvciBcIkJJTkRcIiIpDQogICAgICAgIGVsc2UgaWYgKGRpbXNbWzFdXVtC
SU5EWzFdXSAhPSBkaW1zW1syXV1bQklORFsyXV0pIA0KICAgICAgICAgICAg
c3RvcCgiRXh0ZW50cyB0byBiZSBib3VuZCBkbyBub3QgbWF0Y2giKQ0KICAg
ICAgICBpZiAobmIgPT0gMSkgDQogICAgICAgICAgICByb2JqIDwtIHN3ZWVw
KEEsIEJJTkRbMV0sIEIsIEZVTiA9IEZVTiwgLi4uKQ0KICAgICAgICBlbHNl
IHsNCiAgICAgICAgICAgICMgc3dpdGNoIGJvdW5kIGV4dGVudCB0byB0aGUg
ZnJvbnQNCiAgICAgICAgICAgIG9kYSA8LSBjKEJJTkRbMV0sICgxOm5hKVst
QklORFsxXV0pDQogICAgICAgICAgICBkYSA8LSBkaW0oQSA8LSBhcGVybShB
LCBvZGEpKQ0KICAgICAgICAgICAgZGIgPC0gZGltKEIgPC0gYXBlcm0oQiwg
YyhCSU5EWzJdLCAoMTpuYilbLUJJTkRbMl1dKSkpDQogICAgICAgICAgICAj
IHJlcGxpY2F0ZSBBIGFsb25nIEIgKGV4Y2x1ZGluZyBib3VuZCBleHRleHQp
IGFuZCB2aWNlIHZlcnNhDQogICAgICAgICAgICBBIDwtIGFycmF5KEEsIGMo
ZGEsIGRiWy0xXSkpDQogICAgICAgICAgICBCIDwtIGFycmF5KEIsIGMoZGIs
IGRhWy0xXSkpDQogICAgICAgICAgICAjIGB0cmFuc3Bvc2UnIEIsIGNvbXB1
dGUgdGhlbiB1bi1wZXJtDQogICAgICAgICAgICBpZiAobmEgPiAxKSANCiAg
ICAgICAgICAgICAgICBCIDwtIGFwZXJtKEIsIGMoMSwgbmIgKyAxOihuYSAt
IDEpLCAyOm5iKSkNCiAgICAgICAgICAgIHJvYmogPC0gRlVOKEEsIEIsIC4u
LikNCiAgICAgICAgICAgIGRpbShyb2JqKSA8LSBjKGRpbXNbWzFdXVtvZGFd
LCBkaW1zW1syXV1bLUJJTkRbMl1dKQ0KICAgICAgICAgICAgcm9iaiA8LSBh
cGVybShyb2JqLCBjKG9yZGVyKG9kYSksIG5hICsgMToobmIgLSAxKSkpDQog
ICAgICAgIH0NCiAgICAgICAgZGltbmFtZXMocm9iaikgPC0gYyhkbmEsIGRu
YlstQklORFsyXV0pDQogICAgICAgIHJvYmoNCiAgICB9DQp9DQo=
---559023410-1804928587-922106403=:691--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Mar 23 07:33:24 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 23 Mar 1999 08:33:24 +0100 (CET)
Subject: [R] e1071 and netpbm
In-Reply-To: <XFMail.990322145503.plummer@iarc.fr>
References: <XFMail.990322145503.plummer@iarc.fr>
Message-ID: <14071.17348.841873.251642@sauron.ci.tuwien.ac.at>


[ ... taken from r-help to r-devel ... ]

R core kind of agreed to newly introduce configure capabilities to
packages such that we can handle situations like this cleanly. I.e.,
if the package contains a configur script, this is run to create a
proper Makefile. Hopefully I can then clean up the e1071 Makefile to
build the shared lib correctly on more than one platform.

fritz

>>>>> On Mon, 22 Mar 1999 14:55:03 +0100 (CET),
>>>>> Martyn Plummer (MP) wrote:

MP> [Snip: Problems installing the e1071 package on Red Hat Linux]
MP> Instead of having a single netpbm library, Red Hat has four libraries
MP> (all provided by the libgr rpm), with recursive dependencies

MP> libpnm -> libppm -> libpgm -> libpbm

MP> So, for example, libpbm stands alone but libpgm contains references to
MP> functions in libpbm.  This means that if you want to use any functions
MP> in libpnm (which we do), you must also link against the other three
MP> libraries. If you don't do this, then the compiler won't complain about
MP> undefined references when you type "R INSTALL e1071", since it is building
MP> a shared object, but you will get run time errors.

MP> I can't see the advantage of splitting the library, myself. I wrote to
MP> Red Hat about this in November but didn't get a reply.  It looks like
MP> various other Linux distributions which use the RPM packager (OpenLinux,
MP> TurboLinux, LinuxPPC, ...) use the same setup.

MP> I use the patch below when compiling on Red Hat
MP> Martyn
MP> diff -uNr e1071/src/Makefile e1071-patched/src/Makefile
MP> --- e1071/src/Makefile	Tue Nov 17 11:44:10 1998
MP> +++ e1071-patched/src/Makefile	Fri Nov 20 15:05:00 1998
MP> @@ -4,7 +4,7 @@
MP>  OBJS=pnm.o 
 
MP>  $(LIBNAME).so:  $(OBJS)
MP> -	$(LD) $(SHLIBLDFLAGS) -o $@ $(OBJS) -lnetpbm
MP> +	$(LD) $(SHLIBLDFLAGS) -o $@ $(OBJS) -lpnm -lppm -lpgm -lpbm
 
MP>  clean:
MP>  	@rm -f *.o *.so
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Mar 23 21:46:30 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 23 Mar 1999 16:46:30 -0500
Subject: (-2) %% 12
Message-ID: <99Mar23.165342est.13451@mailgate.bank-banque-canada.ca>

(-2) %% 12 seems to give the wrong result in  R pre 63.3:

> e1 <- -2
> e2 <- 12
> e1 %% e2
[1] -2
> e1 - floor(e1/e2) * e2
[1] 10

In Splus:
> e1 <- -2
> e2 <- 12
> e1 %% e2
[1] 10
> e1 - floor(e1/e2) * e2
[1] 10

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jsarma@cs.gmu.edu  Tue Mar 23 21:58:04 1999
From: jsarma@cs.gmu.edu (jsarma@cs.gmu.edu)
Date: Tue, 23 Mar 1999 22:58:04 +0100
Subject: R-0.63.3 package on IRIX 6.5 machine (PR#145)
Message-ID: <199903232158.WAA27947@blueberry.kubism.ku.dk>

Hi,

I installed R-0.63.3 version on SGI machine running
IRIX 6.5.

Machine details:
319 <mind.krasnow.gmu.edu:R-0.63.3> uname -a
IRIX64 mind 6.5 07271714 IP27

I used gcc (egcs1.1.1) and g77 combination.
I use the GNU make rather than the sgi make.
I went through your help mailing list and found that
I have to edit the Mathlib.h file in src/include directory
to undefine certain definitions which conflict with sgi's
definition.

When I type gmake, I got one error message:

gmake[2]: Entering directory `/Apps/usr/local/R-0.63.3/doc'
Installing doc ...
install:  ../doc/html/search/index.txt does not exist
gmake[2]: *** [install-html] Error 1


Then when I ran the check, I was not able to run modreg-Ex.R example.
It runs for over 2 hours but does not generate anything beyond the
2 pages it generates in the first few minutes.  The second page
contains only 3 graphs and a half drawn graph.  The modreg.Rout
file gets deleted when I terminate the check process. So I am not
sure where it is stuck.  I am not sure how long I should let it
run.  Moreover it does not write anything to .out or .ps file
after the first few minutes.  Is this a known bug?


Jayshree Sarma


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Mar 24 10:37:24 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 24 Mar 1999 11:37:24 +0100
Subject: (-2) %% 12 --- was a bug fix in 0.63.3  {{and musings about S ..}}
In-Reply-To: <99Mar23.165342est.13451@mailgate.bank-banque-canada.ca> (message
 from Paul Gilbert on Tue, 23 Mar 1999 16:46:30 -0500)
References: <99Mar23.165342est.13451@mailgate.bank-banque-canada.ca>
Message-ID: <199903241037.LAA04080@sophie.ethz.ch>


>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> (-2) %% 12 seems to give the wrong result in R pre 63.3:
    >> e1 <- -2 ;  e2 <- 12  ; e1 %% e2
    PaulG> [1] -2
    >> e1 - floor(e1/e2) * e2
    PaulG> [1] 10

    PaulG> In Splus:
    >> e1 <- -2 ; e2 <- 12 ;  e1 %% e2
    PaulG> [1] 10
    >> e1 - floor(e1/e2) * e2
    PaulG> [1] 10

Thank you, Paul, for bringing up this topic (again).

Short answer:  
      This is has been changed in 0.63.3
      and is mentioned in the "Bug Fixes" part of NEWS (and was even on R-announce!)
      NEWS>>
      NEWS>>   o   a %% b -- is now periodic instead of symmetric; more S compatible.
      NEWS>>



Longer answer:

      There are two problems:

      1) ANSI C leaves the semantics of "a % b" (corresponding to R's "a %% b")
	 UNDEFINED whenever one of a or b is negative.

	 IMHO, this *is* a horrible fact  (showing how little some computer scientists
					   care about mathematical computing..).

         Older versions of R used to do what you mention above which is
         what C (and hence R) do on at least Solaris and Linux-Intel.


      2) S-plus  DOES give different answers __solely__ depending on the
         storage.mode  of  a (and/or b)

	 [being on the S version 4  mailing list, I've tried to start a
	  discussion on this,about a year ago, but nobody has even answered me...
	 So, the problem was not addressed for S-plus 5 and hence probably never will]

	 This is S-plus (any version AFAIK; certainly both 3.4 and 5.0 for Unix)

	    > version
	    Version 3.4 Release 1 for Sun SPARC, SunOS 5.3 : 1996 
	    > d3 <- as.numeric(3) # 'd' for double
	    > i3 <- as.integer(3)

	    ## These two differ, but I think they should not ...
	    > d3 %% c(-5:4)
	     [1] -2 -1  0 -1  0  3  0  1  0  3
	    > i3 %% c(-5:4)
	     [1] 3 3 0 1 0 3 0 1 0 3

	    > (-d3) %% c(-5:4)
	     [1] -3 -3  0 -1  0 -3  0  1  0  1
	    > (-i3) %% c(-5:4)
	     [1]  2  1  0  1  0 -3  0  1  0  1
	    > 

---

The Current [0.63.3, but not earlier] and future versions of R
will be consistent and deliver

    R> d3 <- as.numeric(3) # 'd' for double
    R> i3 <- as.integer(3)

    R> ## These two differ, but I think they should not ...
    R> d3 %% c(-5:4) # -2 -1  0 -1  0  3  0  1  0  3
     [1]  -2  -1   0  -1   0 NaN   0   1   0   3
    R> i3 %% c(-5:4) #  3  3  0  1  0  3  0  1  0  3
     [1] -2 -1  0 -1  0 NA  0  1  0  3

    R> (-d3) %% c(-5:4)# -3 -3  0 -1  0 -3  0  1  0  1
     [1]  -3  -3   0  -1   0 NaN   0   1   0   1
    R> (-i3) %% c(-5:4)#  2  1  0  1  0 -3  0  1  0  1
     [1] -3 -3  0 -1  0 NA  0  1  0  1
    R> 

Note that R's result now is the same, not depending on the storage.mode of
a or b.

The help page on "%%" now has a section
 
    `%%' indicates `x mod y' and `%/%' indicates integer
     division. It is guaranteed that `x  ==  (x %% y)  +  y
     * ( x %/% y )' unless `y == 0' where the result is `NA'
     or `NaN' (depending on the `typeof' of the arguments).

----------------------

Remark:

 In S version 4 (and S-plus 5.0)

    "3" or "-3" are integers  whereas they used to be
    "numeric", i.e., "double" in Sv3 (i.e. S-plus x.y with x <= 4).

 Consequence:  S(plus)  ``seems to'' be non backward compatible even in
	       this low level aspect:

    Version 5.0 Release 3 for Sun SPARC, SunOS 5.5 : 1998   gives
	    > 11 %% -3
	    [1] 2
    whereas  Version 3.4 Release 1 for Sun SPARC, SunOS 5.3 : 1996   gives
	     > 11 %% -3
	     [1] -1

  (and I still don't understand why nobody on the S version 4 beta list
   had answered my concern then ...)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Arne.Kovac@uni-essen.de  Wed Mar 24 12:31:46 1999
From: Arne.Kovac@uni-essen.de (Arne Kovac)
Date: Wed, 24 Mar 1999 13:31:46 +0100 (NFT)
Subject: Problems with Postscript output
Message-ID: <Pine.A41.4.02.9903241313010.3000-100000@gauss.mathematik.uni-essen.de>

Hi,

I have a problem with the Postscript mechanism of R:

If I save figures in landscape format and try to insert them into a LaTeX
document, I always have to swap the dimensions of the bounding box in line
9 of the Postscript file. Is there any reason why we can't simply swap
left and bottom as well as right and top in line 435 of devPS.c?

Thanks

Arne

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 24 13:54:36 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Mar 1999 14:54:36 +0100
Subject: Problems with Postscript output
In-Reply-To: Arne Kovac's message of "Wed, 24 Mar 1999 13:31:46 +0100 (NFT)"
References: <Pine.A41.4.02.9903241313010.3000-100000@gauss.mathematik.uni-essen.de>
Message-ID: <x2u2vbj8mb.fsf@blueberry.kubism.ku.dk>

Arne Kovac <kovac@gauss.mathematik.uni-essen.de> writes:

> Hi,
> 
> I have a problem with the Postscript mechanism of R:
> 
> If I save figures in landscape format and try to insert them into a LaTeX
> document, I always have to swap the dimensions of the bounding box in line
> 9 of the Postscript file. Is there any reason why we can't simply swap
> left and bottom as well as right and top in line 435 of devPS.c?
> 
> Thanks
> 
> Arne

Which version are we talking about?

If it is not 0.63.3, try upgrading.

If it is ... well, then different programs must disagree on what the
correct definition of a BoundingBox is.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plindsey@alpha.luc.ac.be  Wed Mar 24 14:51:12 1999
From: plindsey@alpha.luc.ac.be (plindsey@alpha.luc.ac.be)
Date: Wed, 24 Mar 1999 15:51:12 +0100
Subject: nlm docs (PR#146)
Message-ID: <199903241451.PAA10096@blueberry.kubism.ku.dk>

In R.63.3, in the docs for nlm the section on code is messed up.
(apparently there is a problem in the commands in the Rd-file)
Patrick.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 24 14:54:47 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Mar 1999 15:54:47 +0100
Subject: nlm docs (PR#146)
In-Reply-To: plindsey@alpha.luc.ac.be's message of "Wed, 24 Mar 1999 15:51:12 +0100"
References: <199903241451.PAA10096@blueberry.kubism.ku.dk>
Message-ID: <x2soavj5u0.fsf@blueberry.kubism.ku.dk>

plindsey@alpha.luc.ac.be writes:

> In R.63.3, in the docs for nlm the section on code is messed up.
> (apparently there is a problem in the commands in the Rd-file)
> Patrick.

Thanks. This is the kind of documentation bug that so easily goes
unreported. Keep 'em coming.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Mar 24 16:04:43 1999
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 24 Mar 1999 17:04:43 +0100 (CET)
Subject: R-0.63.3 package on IRIX 6.5 machine (PR#145)
In-Reply-To: <199903232158.WAA27947@blueberry.kubism.ku.dk>
References: <199903232158.WAA27947@blueberry.kubism.ku.dk>
Message-ID: <14073.3355.999038.549574@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 23 Mar 1999 22:58:04 +0100,
>>>>> jsarma  (j) wrote:

j> Hi,

j> When I type gmake, I got one error message:

j> gmake[2]: Entering directory `/Apps/usr/local/R-0.63.3/doc'
j> Installing doc ...
j> install:  ../doc/html/search/index.txt does not exist
j> gmake[2]: *** [install-html] Error 1

Hmm, this works perfecctly fine here on my machine. The index.txt file
is built during `make docs', so if it is missing the error should be
earlier than when doing `make install' ... are there any unusual
messages earlier in the make process?

Has anybody else experienced this problem?


Best,

--=20
-------------------------------------------------------------------
                        Friedrich  Leisch=20
Institut f=FCr Statistik                     Tel: (+43 1) 58801 10715
Technische Universit=E4t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra=DFe 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
     PGP public key http://www.ci.tuwien.ac.at/~leisch/pgp.key
-------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From holzer@stat.math.ethz.ch  Thu Mar 25 10:49:26 1999
From: holzer@stat.math.ethz.ch (holzer@stat.math.ethz.ch)
Date: Thu, 25 Mar 1999 11:49:26 +0100
Subject: readline() (PR#147)
Message-ID: <199903251049.LAA17284@blueberry.kubism.ku.dk>

Dear R developers,
I have found the following bug with readline() in R 0.63.3:
if you execute the menu-function and then the readline() function, then
readline() prompts "Selection:"

> a <- readline()
hello
> a
[1] "hallo"
> a <- menu(c("a", "b"), title="bitte:")
bitte: 
1:a 
2:b 
Selection: 2
> a <- readline()
Selection: hello
> a
[1] "hello"

By the way, wouldn't it be nice, if readline() had an argument `text', so
one wouldn't need to use the ugly construction

cat(text)
a <- readline()

Default of text could be "", so there would be no problem with
compatibility.

Peter

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.5
 arch = sparc
 os = solaris2.5
 system = sparc, solaris2.5
 status = 
 status.rev = 0
 major = 0
 minor = 63.3
 year = 1999
 month = March
 day = 6
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 12:08:58 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 1999 13:08:58 +0100
Subject: readline() (PR#147)
In-Reply-To: holzer@stat.math.ethz.ch's message of "Thu, 25 Mar 1999 11:49:26 +0100"
References: <199903251049.LAA17284@blueberry.kubism.ku.dk>
Message-ID: <x2n211zs85.fsf@blueberry.kubism.ku.dk>

holzer@stat.math.ethz.ch writes:

> > a <- menu(c("a", "b"), title="bitte:")
> bitte: 
> 1:a 
> 2:b 
> Selection: 2
> > a <- readline()
> Selection: hello
> > a
> [1] "hello"

Obviously a bug, which we'll get around to in due time. I'll just put
this in to remind the fixer that a similar bug got fixed very
recently.

> 
> By the way, wouldn't it be nice, if readline() had an argument `text', so
> one wouldn't need to use the ugly construction
> 
> cat(text)
> a <- readline()
> 
> Default of text could be "", so there would be no problem with
> compatibility.

Good idea.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Mar 25 12:16:50 1999
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Thu, 25 Mar 1999 13:16:50 +0100
Subject: readline() (PR#147)
Message-ID: <199903251216.NAA17312@blueberry.kubism.ku.dk>

This is PR#12 (menu buglet) which was reported
fixed on Feb 17 and now resides in In-Out-Fixed.
Martyn

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 12:21:39 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 1999 13:21:39 +0100
Subject: [R] Change of parsing parameters to functions between 0.63.1  and 0.63.3 ?
In-Reply-To: Prof Brian D Ripley's message of "Wed, 24 Mar 1999 18:37:05 +0000 (GMT)"
References: <Pine.GSO.4.05.9903241827480.6272-100000@auk.stats>
Message-ID: <x2lnglzrn0.fsf@blueberry.kubism.ku.dk>

Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:

> On Wed, 24 Mar 1999, Athula Herath wrote:
> 
> > I wonder whether the mechanism of parsing parameters to functions has
> > changed between 0.63.1 and 0.63.3? The following code yeilds different
> 
> No, but the handling of attributes has.
> 
> > results in R 0.63.1 (Version 0.63.1  (Dec 5, 1998)) and R 0.63.3. 
> > 
> > cave<-function(x,a,b)
> > {
> > 	return(c(mean(x[a],na.rm=T),mean(x[b],na.rm=T)))
> > }
> > datx <- data.frame(rbind(c(1,2,3,4),c(4,5,6,7)))
> > names(datx)<-c("A","B","C","D")
> > f1<-c("A","C")
> > f2<-c("B","D")
> > t1<-apply(datx,1,cave,f1,f2)
> 
> The help page for apply says

(moved to R-devel)

Hmm. I actually committed my patch for apply() before seeing Brians
reply. Given that 

(a) The above code works as intended in Splus 3.4

(b) This is more or less orthogonal to the issue of having attributes
    to the result of a subsetting operation (it has to do with
    attributes on the arguments to FUN, not the result).

(c) Some effort was already being used in the case of more-than-one
    dimensional slices to get the names passed down [using
    array(newX[,i], d.call, dn.call) with dn.call containing the
    names]
    
..should I consider that a bad move?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Thu Mar 25 12:38:20 1999
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Thu, 25 Mar 1999 13:38:20 +0100
Subject: Missing Warning in : (PR#148)
Message-ID: <199903251238.NAA17354@blueberry.kubism.ku.dk>


If a sequence is generated via "from:to" and "from" is a vector and not
a scalar, R gives a warning that only the first value is used. If "to"
is a vector, there is no warning.

Example:

> (1:4):10  # warning
Warning in (1:4):10 : Numerical expression has 4 elements: only the first used
 [1]  1  2  3  4  5  6  7  8  9 10
> 1:(10:12) # NO warning
 [1]  1  2  3  4  5  6  7  8  9 10

	Andreas


--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Unstable
 status.rev = 0
 major = 0
 minor = 64.0
 year = 1999
 month = March
 day = 19
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 25 13:12:48 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 25 Mar 1999 14:12:48 +0100
Subject: [R] Change of parsing parameters to functions between 0.63.1  and 0.63.3 ?
In-Reply-To: <x2lnglzrn0.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 25 Mar 1999 13:21:39 +0100)
References: <Pine.GSO.4.05.9903241827480.6272-100000@auk.stats> <x2lnglzrn0.fsf@blueberry.kubism.ku.dk>
Message-ID: <199903251312.OAA06684@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Prof Brian D Ripley <ripley@stats.ox.ac.uk> writes:
    >> On Wed, 24 Mar 1999, Athula Herath wrote:
    >> 
    >> > I wonder whether the mechanism of parsing parameters to functions
    >> has > changed between 0.63.1 and 0.63.3? The following code yeilds
    >> different
    >> 
    >> No, but the handling of attributes has.
    >> 
    >> > results in R 0.63.1 (Version 0.63.1 (Dec 5, 1998)) and R 0.63.3.
    >> > 
    >> > cave<-function(x,a,b) > { >
    >> return(c(mean(x[a],na.rm=T),mean(x[b],na.rm=T))) > } > datx <-
    >> data.frame(rbind(c(1,2,3,4),c(4,5,6,7))) >
    >> names(datx)<-c("A","B","C","D") > f1<-c("A","C") > f2<-c("B","D") >
    >> t1<-apply(datx,1,cave,f1,f2)
    >> 
    >> The help page for apply says

    PD> (moved to R-devel)

    PD> Hmm. I actually committed my patch for apply() before seeing Brians
    PD> reply. Given that

    PD> (a) The above code works as intended in Splus 3.4

    PD> (b) This is more or less orthogonal to the issue of having
    PD> attributes to the result of a subsetting operation (it has to do
    PD> with attributes on the arguments to FUN, not the result).

    PD> (c) Some effort was already being used in the case of more-than-one
    PD> dimensional slices to get the names passed down [using
    PD> array(newX[,i], d.call, dn.call) with dn.call containing the names]
    
    PD> ..should I consider that a bad move?
		           ^^^^^^
			   (your patch)
Yes, I actually think
your patch should be reverted ___ especially since it even breaks
     example(apply)

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 13:49:58 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 1999 14:49:58 +0100
Subject: [R] Change of parsing parameters to functions between 0.63.1  and 0.63.3 ?
In-Reply-To: Martin Maechler's message of "Thu, 25 Mar 1999 14:12:48 +0100"
References: <Pine.GSO.4.05.9903241827480.6272-100000@auk.stats> <x2lnglzrn0.fsf@blueberry.kubism.ku.dk> <199903251312.OAA06684@sophie.ethz.ch>
Message-ID: <x2soat4r21.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

>     PD> dimensional slices to get the names passed down [using
>     PD> array(newX[,i], d.call, dn.call) with dn.call containing the names]
>     
>     PD> ..should I consider that a bad move?
>                     	     ^^^^^^
> 			   (your patch)
> Yes, I actually think
> your patch should be reverted ___ especially since it even breaks
>      example(apply)

Oh sh...! I thought that "length(d.call) < 2" bit looked fishy. Forgot
(or whatever) that the 0 case was in fact possible.

But that is easily fixable, just don't do in the extreme case.
This seems to work better:

    if ((i.vec <- length(d.call) < 2)) 
        for (i in 1:d2) {
            xi <- newX[, i]
            if (length(dn.call) == 1) 
                names(xi) <- dn.call[[1]]
            ans[[i]] <- FUN(xi, ...)
        }
    else for (i in 1:d2) ans[[i]] <- FUN(array(newX[, i], d.call, 
        dn.call), ...)

*NOW* should we keep it?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 25 13:48:56 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 25 Mar 1999 14:48:56 +0100
Subject: nlm docs (PR#146)
In-Reply-To: <x2soavj5u0.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 24 Mar 1999 15:54:47 +0100)
References: <199903241451.PAA10096@blueberry.kubism.ku.dk> <x2soavj5u0.fsf@blueberry.kubism.ku.dk>
Message-ID: <199903251348.OAA07255@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> plindsey@alpha.luc.ac.be writes:
    >> In R.63.3, in the docs for nlm the section on code is messed up.
    >> (apparently there is a problem in the commands in the Rd-file)
    >> Patrick.

    PD> Thanks. This is the kind of documentation bug that so easily goes
    PD> unreported. Keep 'em coming.

Yes, indeed!

---
The above bug is actually not a problem in
    src/library/base/man/nlm.Rd
but in the code in	  
    etc/Rdconvlib.pl

The construct
      \describe{
	\item{1:}{bla bla}
	\item{2:}{blech blech}
      }

is well translated to  both  LaTeX  and HTML, 
but not to NROFF (basis for ASCII). 
 
===>  Any help from  "Roff" knowledgables ????
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Thu Mar 25 16:53:20 1999
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Thu, 25 Mar 1999 17:53:20 +0100
Subject: readline() (PR#147)
Message-ID: <199903251653.RAA23762@blueberry.kubism.ku.dk>

plummer@iarc.fr wrote somewhat hastily:
> 
> This is PR#12 (menu buglet) which was reported
> fixed on Feb 17 and now resides in In-Out-Fixed.
> Martyn

No it isn't. It is in fact _caused_ by the fix to
that problem, which I provided. Sorry!
M.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 17:09:04 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 1999 18:09:04 +0100
Subject: readline() (PR#147)
In-Reply-To: plummer@iarc.fr's message of "Thu, 25 Mar 1999 17:53:20 +0100"
References: <199903251653.RAA23762@blueberry.kubism.ku.dk>
Message-ID: <x2n2114hu7.fsf@blueberry.kubism.ku.dk>

plummer@iarc.fr writes:

> plummer@iarc.fr wrote somewhat hastily:
> > 
> > This is PR#12 (menu buglet) which was reported
> > fixed on Feb 17 and now resides in In-Out-Fixed.
> > Martyn
> 
> No it isn't. It is in fact _caused_ by the fix to
> that problem, which I provided. Sorry!
> M.

Great... Now do you have a fix for the fix? ;^)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 25 17:56:16 1999
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 25 Mar 1999 18:56:16 +0100
Subject: [R] Change of parsing parameters to functions between 0.63.1  and 0.63.3 ?
In-Reply-To: <x2soat4r21.fsf@blueberry.kubism.ku.dk> (message from Peter
 Dalgaard BSA on 25 Mar 1999 14:49:58 +0100)
References: <Pine.GSO.4.05.9903241827480.6272-100000@auk.stats> <x2lnglzrn0.fsf@blueberry.kubism.ku.dk> <199903251312.OAA06684@sophie.ethz.ch> <x2soat4r21.fsf@blueberry.kubism.ku.dk>
Message-ID: <199903251756.SAA07768@sophie.ethz.ch>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Martin Maechler <maechler@stat.math.ethz.ch> writes:
    PD> dimensional slices to get the names passed down [using
    PD> array(newX[,i], d.call, dn.call) with dn.call containing the names]
    >> 
    PD> ..should I consider that a bad move?
    >> ^^^^^^
    >> (your patch)
    >> Yes, I actually think
    >> your patch should be reverted ___ especially since it even breaks
    >> example(apply)

    PD> Oh sh...! I thought that "length(d.call) < 2" bit looked fishy. Forgot
    PD> (or whatever) that the 0 case was in fact possible.

    PD> But that is easily fixable, just don't do in the extreme case.
    PD> This seems to work better:

    PD> if ((i.vec <- length(d.call) < 2)) 
    PD> for (i in 1:d2) {
    PD> xi <- newX[, i]
    PD> if (length(dn.call) == 1) 
    PD> names(xi) <- dn.call[[1]]
    PD> ans[[i]] <- FUN(xi, ...)
    PD> }
    PD> else for (i in 1:d2) ans[[i]] <- FUN(array(newX[, i], d.call, dn.call), ...)

    PD> *NOW* should we keep it?

According to our general strategy  

   ``Be S compatible unless there's a good reason for NOT being..''

I think we should keep it.
I did some very limited CPU usage testing and the new code (compared to 0.63.3)
seems to increase CPU usage by less than 1%  (no std.err available on this :-)

---> committed -- including a new help-example exhibiting the new behavior

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum SOL G1;	Sonneggstr.33
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1086			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Mar 25 20:06:45 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 25 Mar 1999 14:06:45 -0600
Subject: Using zip format for help pages, examples, etc.
Message-ID: <6rn211jpuy.fsf@verdi.stat.wisc.edu>

At the Vienna meeting we discussed the problems encountered on some
operating systems when storing many small files in a directory.  In
particular the directories $RHOME/library/base/help/,
$RHOME/library/base/R-ex/, and $RHOME/library/base/data/ can take up
an enormous amount of storage on the Macintosh or on Windows systems
because the minimum amount of storage per distinct file is quite
large.

Fritz Leisch and I suggested storing the contents of each of these
directories as a single .zip file.  This should result in considerable
savings in size with little penalty in access speed.

To implement this we would need code for accessing files within a .zip
archive and for decompressing the files.  I know of the files from
Info-Zip including the zlib sources (compression/decompression) and
the contrib/minizip directory in the zlib source tree.  The minizip
directory provides a prototype unzip.c and unzip.h.  These would be
used to modify the R internal function file.exists and file.show so
they could look in the archive as well as in a directory.

Does anyone know of a reason why this would not be a good idea?  Does
anyone know of better|more_portable|whatever implementations of code
to access files within a .zip archive.  The info-zip sources are
available at http://www.cdrom.com/pub/infozip/zlib/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 25 20:22:49 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Thu, 25 Mar 1999 21:22:49 +0100
Subject: plot.formula and pch= (PR#149)
Message-ID: <199903252022.VAA26066@blueberry.kubism.ku.dk>

I'm not sure exactly where to point my finger with this one, but there
is a nasty surprise to the unsuspecting user.

There is no check on the length of the vector passed in the pch=
argument to plot, it is just recycled as necessary:

plot(1:10,1:10,pch=1:2)

gives alternating circles and triangles. 

The nasty bits come up especially with plot.formula:

x<-1:10;y<-1:10 
plot(y~x,subset=x%%2==1,pch=x%%2)

- and the plotting symbols are *not* all the same. Even more
  pernicious, if missing values are involved:

> y[x%%2==1]<-NA
> plot(y~x,pch=x%%2)

gives you the wrong symbols (in practice, this messes up things like 
plot(height~age,pch=sex) rather badly!).

It would help to get a warning that the lengths don't match, but are
there any good uses of the recycling of pch?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar 25 21:03:26 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 25 Mar 1999 21:03:26 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
In-Reply-To: <6rn211jpuy.fsf@verdi.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.9903252051410.13689-100000@auk.stats>

On 25 Mar 1999, Douglas Bates wrote:

> At the Vienna meeting we discussed the problems encountered on some
> operating systems when storing many small files in a directory.  In
> particular the directories $RHOME/library/base/help/,
> $RHOME/library/base/R-ex/, and $RHOME/library/base/data/ can take up
> an enormous amount of storage on the Macintosh or on Windows systems
> because the minimum amount of storage per distinct file is quite
> large.

Not just base: lme is at least as bad and MASS and boot are large too.

> Fritz Leisch and I suggested storing the contents of each of these
> directories as a single .zip file.  This should result in considerable
> savings in size with little penalty in access speed.
> 
> To implement this we would need code for accessing files within a .zip
> archive and for decompressing the files.  I know of the files from
> Info-Zip including the zlib sources (compression/decompression) and
> the contrib/minizip directory in the zlib source tree.  The minizip
> directory provides a prototype unzip.c and unzip.h.  These would be
> used to modify the R internal function file.exists and file.show so
> they could look in the archive as well as in a directory.
> 
> Does anyone know of a reason why this would not be a good idea?  Does
> anyone know of better|more_portable|whatever implementations of code
> to access files within a .zip archive.  The info-zip sources are
> available at http://www.cdrom.com/pub/infozip/zlib/

Those are the ones I was looking at: they do seem portable, if slow.

However, I am not sure that file.exists and file.show should be 
overloaded, and for data() you need rather more than those. What is needed
I think is a function to extract a file from an archive to a temporary
file, to be based to file.show or to source or load.  There is a snag
in ensuring that temporary files get deleted, but file.show has a flag for
this, and example and data could have an on.exit call to file.remove.

One important point is that AnIndex and 00Titles are in help, and they
probably should be kept uncompressed (not least as the PERL scripts read
them).

It would be easy to mock this up using scripts. Who is doing this?


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jean@stat.ubc.ca  Fri Mar 26 01:12:05 1999
From: jean@stat.ubc.ca (Jean Meloche)
Date: Thu, 25 Mar 1999 17:12:05 -0800
Subject: anova.lm bug
Message-ID: <36FADEE5.470A51E1@stat.ubc.ca>

anova.lm does not work on a lm fit with singularities (using singular.ok=TRUE)
because of mismatch between the anova table length and fit$terms lebgth.
The following works for me:

anova.lm <- function(object, ...)
{
    if(length(list(object, ...)) > 1)
        return(anovalist.lm(object, ...))
    w <- weights(object)
    ssr <- sum(if(is.null(w)) resid(object)^2 else w*resid(object)^2)
    p1 <- 1:object$rank
    comp <- object$effects[p1]
    tlabels <- names(object$effects[p1])                        <- get the matching labels
    asgn <- object$assign[object$qr$pivot][p1]
    dfr <- df.residual(object)
    ss <- c(as.numeric(lapply(split(comp^2,asgn),sum)),ssr)
    df <- c(as.numeric(lapply(split(asgn,  asgn),length)), dfr)
    if(attr(object$terms,"intercept")) {
        ss <- ss[-1]
        df <- df[-1]
        tlabels <- tlabels[-1]                                  <- remove intercept
    }
    ms <- ss/df
    f <- ms/(ssr/dfr)
    p <- 1 - pf(f,df,dfr)
    table <- data.frame(df,ss,ms,f,p)
    table[length(p),4:5] <- NA
    dimnames(table) <- list(c(tlabels, "Residuals"),            <- use the right labels
                            c("Df","Sum Sq", "Mean Sq", "F value", "Pr(>F)"))

    structure(table, heading = c("Analysis of Variance Table\n",
                     paste("Response:", formula(object)[[2]])),
              class= c("anova", "data.frame"))# was "tabular"
}

-- 
Jean Meloche
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adelchi.azzalini@jrc.it  Fri Mar 26 08:30:13 1999
From: adelchi.azzalini@jrc.it (adelchi.azzalini@jrc.it)
Date: Fri, 26 Mar 1999 09:30:13 +0100
Subject: R: error report (PR#150)
Message-ID: <199903260830.JAA26417@blueberry.kubism.ku.dk>

This is a multi-part message in MIME format.
--------------25A3389DABC0A1B4530C7640
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi.

I have been told (by R) to report an error.
Running the attached file simul-pic.R produces the
somthing like the following 

>   source("simul-pic.R")
[1] 50.000  2.539
    poisson binomial f.srs f.pps
0   7.89403  7.38439  5.64  6.32
1  20.04344 19.75250 17.28 20.64
2  25.44578 25.88961 25.00 26.96
3  21.53616 22.16067 24.56 22.48
4  13.67042 13.93022 14.80 13.92
5   6.94201  6.85619  7.48  6.12
6   2.93770  2.75094  3.72  2.68
7   1.06557  0.92507  1.24  0.64
8   0.33819  0.26600  0.20  0.16
9   0.09541  0.06641  0.08  0.08
10  0.02423  0.01457  0.00  0.00
Error: Bad units specified in GConvert, please report!
> 

The program should generate a pictex file, but it fails
to complete it.  Replicated executions produce slightly 
different outcomes, but still an error.

If I comment out the lines following the PicTeX line,
then the program runs with no error.

The environment is WinNT 4.0 with R Version 0.63.2 Beta 
(Jan 12, 1999).

I have first contacted Guido Masarotto about this problem,
but the same thing occurs on the Unix version of R, and
he suggested to write to your address.

Reagards, 
Adelchi Azzalini
--------------25A3389DABC0A1B4530C7640
Content-Type: application/x-tex;
 name="simul-00.tex"
Content-Disposition: inline;
 filename="simul-00.tex"
Content-Transfer-Encoding: 7bit

\hbox{\beginpicture
\setcoordinatesystem units <1pt,1pt>
\setplotarea x from 0 to 0.00, y from 0 to 0.00
\setlinear
\font\picfont cmss10\picfont
\font\picfont cmss10 at 10pt\picfont
\font\picfont cmss10 at 10pt\picfont
\setsolid
\plot 45.02 50.98 45.02 110.81 /
\setsolid
\plot 72.15 50.98 72.15 202.87 /
\setsolid
\plot 99.28 50.98 99.28 243.81 /
\setsolid
\plot 126.41 50.98 126.41 214.19 /
\setsolid
\plot 153.54 50.98 153.54 154.58 /
\setsolid
\plot 180.67 50.98 180.67 103.59 /
\setsolid
\plot 207.81 50.98 207.81 73.25 /
\setsolid
\plot 234.94 50.98 234.94 59.06 /
\setsolid
\plot 262.07 50.98 262.07 53.55 /
\setsolid
\plot 289.20 50.98 289.20 51.71 /
\setsolid
\plot 316.33 50.98 316.33 51.17 /
\setsolid
\plot 45.02 42.50 316.33 42.50 /
\setsolid
\plot 45.02 42.50 45.02 38.33 /
\setsolid
\plot 99.28 42.50 99.28 38.33 /
\setsolid
\plot 153.54 42.50 153.54 38.33 /
\setsolid
\plot 207.81 42.50 207.81 38.33 /
\setsolid
\plot 262.07 42.50 262.07 38.33 /
\setsolid
\plot 316.33 42.50 316.33 38.33 /
\put {0}  [lB] <-2.50pt,0.00pt> at 45.02 25.83
\put {2}  [lB] <-2.50pt,0.00pt> at 99.28 25.83
\put {4}  [lB] <-2.50pt,0.00pt> at 153.54 25.83
\put {6}  [lB] <-2.50pt,0.00pt> at 207.81 25.83
\put {8}  [lB] <-2.50pt,0.00pt> at 262.07 25.83
\put {10}  [lB] <-5.00pt,0.00pt> at 316.33 25.83
\setsolid
\plot 34.17 50.98 34.17 240.43 /
\setsolid
\plot 34.17 50.98 30.00 50.98 /
\setsolid
\plot 34.17 88.87 30.00 88.87 /
\setsolid
\plot 34.17 126.76 30.00 126.76 /
\setsolid
\plot 34.17 164.65 30.00 164.65 /
\setsolid
\plot 34.17 202.54 30.00 202.54 /
\setsolid
\plot 34.17 240.43 30.00 240.43 /
\put {0.00}  [rB] <0.00pt,-4.17pt> at 25.83 50.98
\put {0.05}  [rB] <0.00pt,-4.17pt> at 25.83 88.87
\put {0.10}  [rB] <0.00pt,-4.17pt> at 25.83 126.76
\put {0.15}  [rB] <0.00pt,-4.17pt> at 25.83 164.65
\put {0.20}  [rB] <0.00pt,-4.17pt> at 25.83 202.54
\put {0.25}  [rB] <0.00pt,-4.17pt> at 25.83 240.43
\setsolid
\plot 34.17 42.50 327.18 42.50 /
\plot 327.18 42.50 327.18 271.58 /
\plot 327.18 271.58 34.17 271.58 /
\plot 34.17 271.58 34.17 42.50 /
\put {m}  [lB] <-3.97pt,0.00pt> at 180.67 9.17
\put {Prob(M=m)}  [rB] <0.00pt,-4.17pt> at 9.17 157.04
\circulararc 360 degrees from 45.02 112.87 center at 45.02 110.81
\circulararc 360 degrees from 72.15 204.94 center at 72.15 202.87
\circulararc 360 degrees from 99.28 245.88 center at 99.28 243.81
\circulararc 360 degrees from 126.41 216.25 center at 126.41 214.19
\circulararc 360 degrees from 153.54 156.64 center at 153.54 154.58
\circulararc 360 degrees from 180.67 105.65 center at 180.67 103.59
\circulararc 360 degrees from 207.81 75.31 center at 207.81 73.25
\circulararc 360 degrees from 234.94 61.12 center at 234.94 59.06
\circulararc 360 degrees from 262.07 55.61 center at 262.07 53.55
\circulararc 360 degrees from 289.20 53.77 center at 289.20 51.71
\circulararc 360 degrees from 316.33 53.23 center at 316.33 51.17
\font\picfont cmssbx10 at 9pt\picfont
\put {Simulated no. of events and Poisson approximation}  [lB] <-103.02pt,-3.75pt> at 180.67 288.66
\put {  }  [lB] <-2.30pt,-3.75pt> at 180.67 280.33
\pu

--------------25A3389DABC0A1B4530C7640
Content-Type: application/x-unknown-content-type-R_auto_file;
 name="simul-pic.R"
Content-Disposition: inline;
 filename="simul-pic.R"
Content-Transfer-Encoding: base64

IyBzaW11bGF6aW9uZSBkZWxsYSBkaXN0cmlidXppb25lIGVzYXR0YSBkaSBNLCANCiMgZSBj
b25mb250byBjb24gdmMgUG9pc3NvbiANCiMgMjQvMy85OQ0KIw0KIy0tLS0tIGNvc3RydXpp
b25lIGRlbGxhIHBvcG9sYXppb25lDQpOPC0xMDAwDQp4PC1yZ2FtbWEoTiwxLDUpDQpUeDwt
c3VtKHgpDQpwcm9iLmV2ZW50IDwtZnVuY3Rpb24oeCwgcGhpMCwgYmV0YSkgcGhpMC8oMStl
eHAoLWJldGEqeCkpIA0KcGhpMCA8LSAwLjENCmJldGEgPC0gMA0KSXogPC0gcmJpbm9tKE4s
MSxwcm9iLmV2ZW50KHgscGhpMCxiZXRhKSkgIyB2LmluZGljYXRyaWNpIGRpIChaPjApDQpU
eGQ8LXN1bSh4Kkl6KQ0KIw0KIy0tLS0tIGFwcHJveCBkaSBQb2lzc29uDQpzYW1wbGluZy5m
cmFjdGlvbiA8LSAwLjA1DQpuIDwtIHJvdW5kKE4qc2FtcGxpbmcuZnJhY3Rpb24pDQpwMSA8
LSBUeGQvVHgNCm1heC5tIDwtIHJvdW5kKG1heCg1LDQqcDEqbikpDQpwb2lzc29uIDwtIGRw
b2lzKDA6bWF4Lm0sbipwMSkNCnByaW50KGMobixwMSpuKSkNCmJpbm9taWFsPC1kYmlub20o
MDptYXgubSxuLHAxKQ0KcGxvdCgwOm1heC5tLHBvaXNzb24sdHlwZT0iaCIsY29sPTIseGxh
Yj0ibSIseWxhYj0iUHJvYihNPW0pIiwNCiAgICAgeWxpbT1jKDAsbWF4KHBvaXNzb24pKjEu
MSkpDQpwb2ludHMoMDptYXgubSxwb2lzc29uLHBjaD0xLGNvbD0yKQ0KIw0KIy0tLS0tIHNp
bXVsYXppb25lIGRpc3RyaWIuZXNhdHRhDQpuLnJlcGw8LSA1MDAwMA0Kc3JzIDwtIHJlcCgx
L04sTikNCnBwcyA8LSB4L3N1bSh4KQ0KbS5zcnMgPC0gbS5wcHMgPC1yZXAoTkEsbi5yZXBs
KQ0KZm9yKGkgaW4gMTpuLnJlcGwpew0KICBzLnNyczwtc2FtcGxlKDE6TixuLHByb2I9c3Jz
KQ0KICBzLnBwczwtc2FtcGxlKDE6TixuLHByb2I9cHBzKQ0KICBtLnNyc1tpXSA8LSBzdW0o
SXpbcy5zcnNdKQ0KICBtLnBwc1tpXSA8LSBzdW0oSXpbcy5wcHNdKQ0KfQ0KZi5zcnM8LXRh
YmxlKG0uc3JzKS9uLnJlcGwNCmYuc3JzPC1jKGYuc3JzLHJlcCgwLDEwMCkpWzE6KG1heC5t
KzEpXQ0KZi5wcHM8LXRhYmxlKG0ucHBzKS9uLnJlcGwNCmYucHBzPC1jKGYucHBzLHJlcCgw
LDEwMCkpWzE6KG1heC5tKzEpXQ0KDQpwb2ludHMoMDptYXgubSwgZi5zcnMsIHBjaD0yLGNv
bD0zKQ0KcG9pbnRzKDA6bWF4Lm0sIGYucHBzLCBwY2g9NCxjb2w9NCkNCnBhcihjZXg9MC43
NSkNCnRpdGxlKG1haW49cGFzdGUoIlNpbXVsYXRlZCBuby4gb2YgZXZlbnRzIGFuZCBQb2lz
c29uIGFwcHJveGltYXRpb25cbiIsDQogICAgICAiIFxuIiwiTj0iLE4sIiwgc2FtcGxpbmcg
ZnJhY3Rpb249IixuL04sIiwgcmVwbGljYXRlcz0iLG4ucmVwbCkpDQpsZWdlbmQoeD1tYXgu
bSowLjcseT1tYXgocG9pc3NvbiksDQogICAgICAgbGVnZW5kPWMoIlBvaXNzb24gYXBwcm94
Iiwic2ltdWxhdGVkIFNSUyIsInNpbXVsYXRlZCBQUFMiKSwNCiAgICAgICBwY2g9YygxLDIs
NCkpDQpwYXIoY2V4PTEpDQpvdXQ8LSBkYXRhLmZyYW1lKHBvaXNzb24sYmlub21pYWwsZi5z
cnMsZi5wcHMscm93Lm5hbWVzPSgwOm1heC5tKSkNCnByaW50KG91dCoxMDApDQoNCiMtLS0t
LSAgUGljVGVYDQpwaWN0ZXgoZmlsZT0ic2ltdWwtMDAudGV4IikNCnBsb3QoMDptYXgubSxw
b2lzc29uLHR5cGU9ImgiLGNvbD0yLHhsYWI9Im0iLHlsYWI9IlByb2IoTT1tKSIsDQogICAg
IHlsaW09YygwLG1heChwb2lzc29uKSoxLjEpKQ0KcG9pbnRzKDA6bWF4Lm0scG9pc3Nvbixw
Y2g9MSxjb2w9MikNCnBhcihjZXg9MC43NSkNCnRpdGxlKG1haW49cGFzdGUoIlNpbXVsYXRl
ZCBuby4gb2YgZXZlbnRzIGFuZCBQb2lzc29uIGFwcHJveGltYXRpb25cbiIsDQogICAgICAg
IiBcbiIsIk49IixOLCIsIHNhbXBsaW5nIGZyYWN0aW9uPSIsbi9OLCIsIHJlcGxpY2F0ZXM9
IixuLnJlcGwpKQ0KbGVnZW5kKHg9bWF4Lm0qMC43LHk9bWF4KHBvaXNzb24pLA0KICAgICAg
IGxlZ2VuZD1jKCJQb2lzc29uIGFwcHJveCIsInNpbXVsYXRlZCBTUlMiLCJzaW11bGF0ZWQg
UFBTIiksDQogICAgICAgcGNoPWMoMSwyLDQpKQ0KcGFyKGNleD0xKQ0KcG9pbnRzKDA6bWF4
Lm0sIGYuc3JzLCBwY2g9Mixjb2w9MykNCnBvaW50cygwOm1heC5tLCBmLnBwcywgcGNoPTQs
Y29sPTQpDQpYMTEoKQ0KDQo=
--------------25A3389DABC0A1B4530C7640--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Jonathan Rougier <J.C.Rougier@durham.ac.uk>  Fri Mar 26 08:59:03 1999
From: Jonathan Rougier <J.C.Rougier@durham.ac.uk> (Jonathan Rougier)
Date: Fri, 26 Mar 1999 08:59:03 +0000 (GMT)
Subject: plot.formula and pch= (PR#149)
In-Reply-To: <199903252022.VAA26066@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.3.96.990326085613.1783F-100000@laplace>

On Thu, 25 Mar 1999 p.dalgaard@biostat.ku.dk wrote:

> There is no check on the length of the vector passed in the pch=
> argument to plot, it is just recycled as necessary:

<...>

> It would help to get a warning that the lengths don't match, but are
> there any good uses of the recycling of pch?

There might be a case for it in time series graphs, where there are
periodic characteristics of the data (days of the week, for example).

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Mar 26 11:11:00 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Mar 1999 12:11:00 +0100
Subject: Using zip format for help pages, examples, etc.
References: <6rn211jpuy.fsf@verdi.stat.wisc.edu>
Message-ID: <36FB6B44.127364FF@iarc.fr>

This sounds similar to the Virtual File System (VFS) used by
the GNU Midnight Commander (a file manager programme).  VFS
allows you to browse files that are not on your native file
system. Among other things, you can look inside tar and
compressed tar files as if they were unpacked.

ZIP file support isn't very good - it's just a shell script
interface to the zip programme - but I suppose this could be
done internally like the "utar" filesystem.

The VFS code comes with the Midnight Commander, but it is
supposed to compile as a standalone library. If this works,
and is portable (!), it might be cleaner to use libvfs than to
do this inside R. Or maybe not. Anyway here is the URL:

http://www.gnome.org/mc/

Martyn

P.S I once trashed my FAT file system by filling it with many
small files from gnu-win32 ports, so this may be a safety
issue as well as a speed one.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From N.J.Lee@statslab.cam.ac.uk  Fri Mar 26 11:44:44 1999
From: N.J.Lee@statslab.cam.ac.uk (Nicholas Lee)
Date: Fri, 26 Mar 1999 11:44:44 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
In-Reply-To: <36FB6B44.127364FF@iarc.fr>
Message-ID: <Pine.HPP.3.96.990326113941.8918A-100000@tiger.statslab.cam.ac.uk>


On Fri, 26 Mar 1999, Martyn Plummer wrote:

> This sounds similar to the Virtual File System (VFS) used by
> the GNU Midnight Commander (a file manager programme).  VFS
> allows you to browse files that are not on your native file
> system. Among other things, you can look inside tar and
> compressed tar files as if they were unpacked.


Why not just the approach that some linux distributions use, (debian at
least) of gziping the man pages individually.

Makes it easier and quicker to patch pages and doesn't require temporary
swap space for uncompressing a whole archive. 



Nicholas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Mar 26 12:12:45 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 26 Mar 1999 12:12:45 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
Message-ID: <199903261212.MAA00972@toucan.stats.ox.ac.uk>


> Date: Fri, 26 Mar 1999 11:44:44 +0000 (GMT)
> From: Nicholas Lee <N.J.Lee@statslab.cam.ac.uk>
> 
> Why not just the approach that some linux distributions use, (debian at
> least) of gziping the man pages individually.
> 
> Makes it easier and quicker to patch pages and doesn't require temporary
> swap space for uncompressing a whole archive. 

(1) The whole point is to avoid having many tiny files. On Windows
the current help files take up ca 37Mb on my VFAT file system, and about
1Mb in a zip archive. As Doug Bates said at the beginning of this thread:

> At the Vienna meeting we discussed the problems encountered on some
> operating systems when storing many small files in a directory.  In
> particular the directories $RHOME/library/base/help/,
> $RHOME/library/base/R-ex/, and $RHOME/library/base/data/ can take up
> an enormous amount of storage on the Macintosh or on Windows systems
> because the minimum amount of storage per distinct file is quite
> large.

(2) You can avoid uncompressing a whole archive with zip (not gzip).

(3) You should not be thinking about patching pages in an R
distribution:  whole R distributions are changed often enough.  It is
the installed pages (help, R-ex, latex) not the source pages (Rd) that
we are considering putting into a zip archive.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Mar 26 12:32:16 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Mar 1999 13:32:16 +0100
Subject: Using zip format for help pages, examples, etc.
References: <Pine.HPP.3.96.990326113941.8918A-100000@tiger.statslab.cam.ac.uk>
Message-ID: <36FB7E50.62F211B9@iarc.fr>

Nicholas Lee wrote:

> Why not just the approach that some linux distributions use,
> (debian at least) of gziping the man pages individually.

The problem isn't that the help files take up a lot of space,
but that certain file systems are extremely inefficient in
the use of that space.  FAT16 assigns disk space in allocation
units that are, roughly, proportional to the size of the
partition. I think a 1Gb partition has 16kb allocation units,
whereas most help files are only 1-2kb. If a file is already
smaller than an allocation unit, it won't take up any less space
when compressed. By putting lots of small files on one
archive, however, you get round the inefficiency of the filesystem.
M.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Mar 26 14:30:19 1999
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 26 Mar 1999 14:30:19 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
In-Reply-To: <36FB7E50.62F211B9@iarc.fr>
Message-ID: <Pine.GSO.3.96.990326142228.1783H-100000@laplace>

On Fri, 26 Mar 1999, Martyn Plummer wrote:

> The problem isn't that the help files take up a lot of space,
> but that certain file systems are extremely inefficient in
> the use of that space.

This is probably an unrealistic suggestion, but if compression is less of
a problem than the number of files, why not take the help files `onboard'
by creating a new class of objects with mode "help", which would be lists
with components much like the current .Rd files, and attach them at the
bottom of the search list.  Each library would then require just a single
file of help objects.

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE

"[B]egin upon the precept ... that the things we see are to be 
 weighed in the scale with what we know"  (Meredith, 1879, The Egoist)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Mar 26 14:52:24 1999
From: plummer@iarc.fr (Martyn Plummer)
Date: Fri, 26 Mar 1999 15:52:24 +0100
Subject: Using zip format for help pages, examples, etc.
References: <Pine.GSO.3.96.990326142228.1783H-100000@laplace>
Message-ID: <36FB9F28.D1F2CBEF@iarc.fr>

Jonathan Rougier wrote:

> This is probably an unrealistic suggestion, but if compression is less of
> a problem than the number of files, why not take the help files `onboard'
> by creating a new class of objects with mode "help", which would be lists
> with components much like the current .Rd files, and attach them at the
> bottom of the search list.  Each library would then require just a single
> file of help objects.

Because R objects are stored in memory, and using 1Mb+ of RAM to
store help files is a bit of a waste.

This is an *operating system* issue, and it's only a problem for
OSs with crap file systems. It shouldn't require major changes to R.

M.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Fri Mar 26 15:11:16 1999
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Fri, 26 Mar 1999 15:11:16 +0000 (GMT)
Subject: Using zip format for help pages, examples, etc.
Message-ID: <199903261511.PAA08981@toucan.stats.ox.ac.uk>

> From: Jonathan Rougier <J.C.Rougier@durham.ac.uk>
> 
> On Fri, 26 Mar 1999, Martyn Plummer wrote:
> 
> > The problem isn't that the help files take up a lot of space,
> > but that certain file systems are extremely inefficient in
> > the use of that space.
> 
> This is probably an unrealistic suggestion, but if compression is less of
> a problem than the number of files, why not take the help files `onboard'
> by creating a new class of objects with mode "help", which would be lists
> with components much like the current .Rd files, and attach them at the
> bottom of the search list.  Each library would then require just a single
> file of help objects.

But then loading a `package' would take longer and use much more memory,
and memory in R is precious.

We have talked about concatenating the help/R-ex files into a single
file per package, and indexing it, but the zip file route avoids some
of the work and helps with compression too.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Mar 26 15:24:06 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 26 Mar 1999 09:24:06 -0600
Subject: Using zip format for help pages, examples, etc.
In-Reply-To: Jonathan Rougier's message of "Fri, 26 Mar 1999 14:30:19 +0000 (GMT)"
References: <Pine.GSO.3.96.990326142228.1783H-100000@laplace>
Message-ID: <6ryakk2s15.fsf@verdi.stat.wisc.edu>

>>>>> "Jonathan" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

  Jonathan> On Fri, 26 Mar 1999, Martyn Plummer wrote:
  >> The problem isn't that the help files take up a lot of space, but
  >> that certain file systems are extremely inefficient in the use of
  >> that space.

  Jonathan> This is probably an unrealistic suggestion, but if
  Jonathan> compression is less of a problem than the number of files,
  Jonathan> why not take the help files `onboard' by creating a new
  Jonathan> class of objects with mode "help", which would be lists
  Jonathan> with components much like the current .Rd files, and
  Jonathan> attach them at the bottom of the search list.  Each
  Jonathan> library would then require just a single file of help
  Jonathan> objects.

This is a reasonable suggestion but I think that the way that R
handles its search lists would make this problematic.  At present
objects in a library take up space in memory whether they are used or
not.  Also, the search to resolve a name is a linear search over the
available names.  Adding a whole lot more names for help objects would
exacerbate both of those problems.  Then there is the name-space
pollution problem.

Approaches to all of these issues with names and objects are being
discussed and will probably be implemented in later releases.  Right
now I think the best approach to the problem of help files,
etc. (other than waiting for certain commercial operating systems to
catch up with concepts from the 1980's) is to use the zip format for
the reasons that Brian Ripley indicated.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar 26 15:55:40 1999
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 26 Mar 1999 10:55:40 -0500
Subject: linear search
Message-ID: <99Mar26.110423est.13493@mailgate.bank-banque-canada.ca>

Doug Bates writes:
>... Also, the search to resolve a name is a linear search over the
>available names.  ...

Does anyone have an idea of how series a problem this is with large packages. R
still runs slower than Splus 3.3 for me, and I wonder how big a part of the
problem this is?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Mar 26 16:29:29 1999
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 26 Mar 1999 08:29:29 -0800 (PST)
Subject: linear search
In-Reply-To: <99Mar26.110423est.13493@mailgate.bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.10.9903260824130.2767-100000@wompom.biostat.washington.edu>

On Fri, 26 Mar 1999, Paul Gilbert wrote:

> Doug Bates writes:
> >... Also, the search to resolve a name is a linear search over the
> >available names.  ...
> 
> Does anyone have an idea of how series a problem this is with large packages. R
> still runs slower than Splus 3.3 for me, and I wonder how big a part of the
> problem this is?

A very limited profiling experiment about a year ago (so out of date as
well as limited) suggested that perhaps 15-30% of R's time is spent in the
linear search functions when running the survival4 test suite.

We do intend to implement hashing for name lookup fairly soon. It should
make a noticeable difference, especially with huge libraries like lme
(over 500 functions) loaded.

The relative speed of R and S-PLUS is very problem-dependent, so it's hard
to make any reliable predictions.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Mar 26 17:53:16 1999
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 27 Mar 1999 05:53:16 +1200 (NZST)
Subject: linear search
Message-ID: <199903261753.FAA24087@stat1.stat.auckland.ac.nz>

> Paul Gilbert writes:
>
> Does anyone have an idea of how series a problem this is with large
> packages. R still runs slower than Splus 3.3 for me, and I wonder how
> big a part of the problem this is?

I suspect that it is a very large part of your problem.  A substantial
fraction (30% - 50% ?) of R's time is spent doing name lookup.  I hope
hashing will speed up name lookup by one or two orders of magnitude.
I am part-way through making the changes now.
	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jlindsey@alpha.luc.ac.be  Mon Mar 29 08:32:11 1999
From: jlindsey@alpha.luc.ac.be (jlindsey@alpha.luc.ac.be)
Date: Mon, 29 Mar 1999 09:32:11 +0200
Subject: problems with formals and get (PR#151)
Message-ID: <199903290732.JAA28031@blueberry.kubism.ku.dk>

With 0.63.3, try

test <- function(){
	fn <- function(a) print("hello")
	print(is.function(fn))
	print(names(formals("fn")))}
test()

if fn is not quoted in the last line of test, it works properly.

test <- function(){
	fn <- function() print("hello")
	formals(fn) <- alist(a=,b=)
	return(fn)}
formals(test())

now try with line 3 of test changed to
	formals(fn) <- alist(a=)

Jim

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 29 13:13:22 1999
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Mon, 29 Mar 1999 14:13:22 +0200
Subject: problems with formals and get (PR#151)
Message-ID: <199903291213.OAA28222@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> With 0.63.3, try
> 
> test <- function(){
> 	fn <- function(a) print("hello")
> 	print(is.function(fn))
> 	print(names(formals("fn")))}
> test()
> 
> if fn is not quoted in the last line of test, it works properly.

This version of formals seems to work better:

function (fun = sys.function(sys.parent())) 
{
    if (is.character(fun)) 
        fun <- get(fun, mode = "function", envir = sys.frame(sys.parent()))
    .Internal(formals(fun))
}

> test <- function(){
> 	fn <- function() print("hello")
> 	formals(fn) <- alist(a=,b=)
> 	return(fn)}
> formals(test())
> 
> now try with line 3 of test changed to
> 	formals(fn) <- alist(a=)

This is a bug, originating in sys.call:

> xx<-function(...)sys.call()
> xx(a=)
xx()
> xx(a=,b=)
xx(a = , b = )



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 29 13:13:16 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 1999 14:13:16 +0200
Subject: problems with formals and get (PR#151)
In-Reply-To: jlindsey@alpha.luc.ac.be's message of "Mon, 29 Mar 1999 09:32:11 +0200"
References: <199903290732.JAA28031@blueberry.kubism.ku.dk>
Message-ID: <x2soaomr37.fsf@blueberry.kubism.ku.dk>

jlindsey@alpha.luc.ac.be writes:

> With 0.63.3, try
> 
> test <- function(){
> 	fn <- function(a) print("hello")
> 	print(is.function(fn))
> 	print(names(formals("fn")))}
> test()
> 
> if fn is not quoted in the last line of test, it works properly.

This version of formals seems to work better:

function (fun = sys.function(sys.parent())) 
{
    if (is.character(fun)) 
        fun <- get(fun, mode = "function", envir = sys.frame(sys.parent()))
    .Internal(formals(fun))
}

> test <- function(){
> 	fn <- function() print("hello")
> 	formals(fn) <- alist(a=,b=)
> 	return(fn)}
> formals(test())
> 
> now try with line 3 of test changed to
> 	formals(fn) <- alist(a=)

This is a bug, originating in sys.call:

> xx<-function(...)sys.call()
> xx(a=)
xx()
> xx(a=,b=)
xx(a = , b = )



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Mar 29 18:25:25 1999
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Mon, 29 Mar 1999 19:25:25 +0200
Subject: readline() (PR#147)
Message-ID: <199903291725.TAA29587@blueberry.kubism.ku.dk>

This message is in MIME format
--_=XFMail.1.3.p0.Linux:990329192352:425=_
Content-Type: text/plain; charset=us-ascii

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
>Great... Now do you have a fix for the fix? ;^)

Here are two patches.
1. Patch to scan.c which fixes this bug, and similar ones,
   by ensuring that functions which set the console prompt
   reset it after use.
2. Implements Peter Holzer's suggestion, adding a
   "prompt" argument to readline.  Since readline is an
   "internal" function I did this in the C code. The
   alternative of adding some interpreted code would be
   simpler.  Caveat emptor with this one, obviously.

--_=XFMail.1.3.p0.Linux:990329192352:425=_
Content-Disposition: attachment; filename="scan.diff"
Content-Transfer-Encoding: 7bit
Content-Description: scan.diff
Content-Type: text/plain; charset=us-ascii; name=scan.diff; SizeOnDisk=609

--- scan.c	Sun Mar 28 10:03:05 1999
+++ scan.c.fixed	Sun Mar 28 10:32:44 1999
@@ -276,6 +276,7 @@
 	}
     }
     if (!quiet) REprintf("Read %d items\n", n);
+    if (ttyflag) ConsolePrompt[0] = '\0';
 
     if (n == 0) {
 	UNPROTECT(1);
@@ -407,6 +408,7 @@
 	n++;
     }
     if (!quiet) REprintf("Read %d lines\n", n);
+    if (ttyflag) ConsolePrompt[0] = '\0';
 
     for (i = 0; i < nc; i++) {
 	old = VECTOR(ans)[i];
@@ -775,6 +777,8 @@
 	*bufp++ = c;
     }
     *bufp++ = '\0';
+    ConsolePrompt[0] = '\0';
+
     bufp = buffer;
     while (isspace(*bufp)) bufp++;
     first = LENGTH(CAR(args)) + 1;

--_=XFMail.1.3.p0.Linux:990329192352:425=_
Content-Disposition: attachment; filename="readline.diff"
Content-Transfer-Encoding: 7bit
Content-Description: readline.diff
Content-Type: text/plain; charset=us-ascii; name=readline.diff; SizeOnDisk=3136

diff -uNr R-0.63.3/src/library/base/R/New-Internal.R R-0.63.3-patched/src/librar
y/base/R/New-Internal.R
--- R-0.63.3/src/library/base/R/New-Internal.R	Wed Dec  9 07:52:28 1998
+++ R-0.63.3-patched/src/library/base/R/New-Internal.R	Sun Mar 28 13:47:39 1999
@@ -89,7 +89,7 @@
 	stop("rank(.., na.last != TRUE) does not yet work in R.")
     .Internal(rank(x))
 }
-readline <- function().Internal(readline())
+readline <- function(prompt="").Internal(readline(prompt))
 search <- function().Internal(search())
 
 sink <- function(file=NULL, append = FALSE)
diff -uNr R-0.63.3/src/library/base/man/readline.Rd R-0.63.3-patched/src/library
/base/man/readline.Rd
--- R-0.63.3/src/library/base/man/readline.Rd	Wed Nov 19 18:38:56 1997
+++ R-0.63.3-patched/src/library/base/man/readline.Rd	Sun Mar 28 13:41:52 1999
@@ -1,9 +1,12 @@
 \name{readline}
 \title{Read a Line from the Terminal}
 \usage{
-readline()
+readline(prompt="")
 }
 \alias{readline}
+\arguments{
+\item{prompt}{the string printed when prompting the user for input.}
+}
 \description{
   \code{readline} reads a line from the terminal, returning it as a
   character string.
diff -uNr R-0.63.3/src/main/names.c R-0.63.3-patched/src/main/names.c
--- R-0.63.3/src/main/names.c	Sun Jan 31 12:24:09 1999
+++ R-0.63.3-patched/src/main/names.c	Sun Mar 28 12:55:46 1999
@@ -482,7 +482,7 @@
 {"substitute",	do_substitute,	0,	0,	-1,	PP_FUNCALL},
 {"quit",	do_quit,	0,	111,	1,	PP_FUNCALL},
 {"interactive",	do_interactive,	0,	0,	0,	PP_FUNCALL},
-{"readline",	do_readln,	0,	11,	0,	PP_FUNCALL},
+{"readline",	do_readln,	0,	11,	1,	PP_FUNCALL},
 {"menu",	do_menu,	0,	11,	1,	PP_FUNCALL},
 {"print.default",do_printdefault,0,	111,	6,	PP_FUNCALL},
 {"print.matrix",do_printmatrix, 0,	111,	5,	PP_FUNCALL},
diff -uNr R-0.63.3/src/main/scan.c R-0.63.3-patched/src/main/scan.c
--- R-0.63.3/src/main/scan.c	Wed Feb 17 18:51:21 1999
+++ R-0.63.3-patched/src/main/scan.c	Sun Mar 28 15:07:24 1999
@@ -24,11 +24,12 @@
 #define SCAN_BLOCKSIZE		1000
 /* The size of the console buffer */
 #define CONSOLE_BUFFER_SIZE	1024
+#define CONSOLE_PROMPT_SIZE	32
 
 static char  ConsoleBuf[CONSOLE_BUFFER_SIZE];
 static char *ConsoleBufp;
 static int  ConsoleBufCnt;
-static char  ConsolePrompt[32];
+static char  ConsolePrompt[CONSOLE_PROMPT_SIZE];
 
 #ifdef NOT_used
 static void InitConsoleGetchar()
@@ -731,10 +732,20 @@
 {
     int c;
     char buffer[MAXELTSIZE], *bufp = buffer;
-    SEXP ans;
+    SEXP ans, prompt;
 
     checkArity(op,args);
 
+    prompt = CAR(args);
+    if (prompt == R_NilValue)
+        PROTECT(prompt);
+    else {
+        PROTECT(prompt = coerceVector(prompt, STRSXP));
+        if(length(prompt) > 0)
+            strncpy(ConsolePrompt, CHAR(*STRING(prompt)),
+                CONSOLE_PROMPT_SIZE - 1);
+    }
+
     /* skip white space */
     while ((c= ConsoleGetchar()) == ' ' || c=='\t');
     if (c != '\n' && c != R_EOF) {
@@ -749,9 +760,11 @@
     while (isspace(*--bufp))
 	;
     *++bufp = '\0';
+    ConsolePrompt[0] = '\0';
+
     PROTECT(ans = allocVector(STRSXP,1));
     STRING(ans)[0] = mkChar(buffer);
-    UNPROTECT(1);
+    UNPROTECT(2);
     return ans;
 }
 

--_=XFMail.1.3.p0.Linux:990329192352:425=_--
End of MIME message

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Mar 30 02:44:21 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 29 Mar 1999 19:44:21 -0600
Subject: Prototype nls library for R using closures
Message-ID: <6r7lrzpx8q.fsf@verdi.stat.wisc.edu>

I just uploaded to CRAN a prototype nls (nonlinear least squares)
library for R.  It is far from being finished but I am asking for
this preliminary version to be installed in the src/contrib/Devel
section of CRAN so others can see the use of function closures
to emulate the behaviour of objects in languages like Java.

It will be a couple of days before the file is installed in CRAN and
has a chance to propagate to the mirrors.  The impatient can pick up a
copy at
	    ftp://verdi.stat.wisc.edu/pub/nls_0.1-1.tar.gz
It can be installed on Unix/Linux systems by expanding the tar file
and running
  R INSTALL nls
This version does not use any C code so it should be installable on
Windows if you can expand the tar file.

The nls function takes the model formula, the data, and the starting
values for the parameters and creates an nlsModel object, which is a
list of functions _and_ the environment in which they were created.
That is, it is a list of function closures that share the same
environment.  This is similar in flavor to the example in the
demos/language/scoping.R file.

All of the functions in an nlsModel object behave like accessor
methods except for setPars which sets a new value of the parameters.
Using the nlsModel object and its methods, the nls function itself
becomes trivial.

This style of programming is directly inspired by the presentation
that Robert Gentleman made on the last day of the Distributed
Statistical Computing - Vienna '99 conference.

I would like to take this opportunity to again thank our hosts; Kurt,
Fritz, and Andreas, for their kind hospitality and their generosity in
staging the conference.  I, for one, thoroughly enjoyed it.  I feel
that I learned a lot and that we got a lot done that would have been
very hard to do with e-mail connections only.

-- 
Douglas Bates                            bates@stat.wisc.edu
Statistics Department                    608/262-2598
University of Wisconsin - Madison        http://www.stat.wisc.edu/~bates/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Mar 30 15:47:00 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 30 Mar 1999 16:47:00 +0200 (CEST)
Subject: R PLATFORMS
Message-ID: <14080.58340.842840.886232@pc87.maho.magnaeu.com>

I would like (actually, during on of the R-core meetings at DSC-V99 I
was volunteered) to update the `PLATFORMS' file that comes with the R
distribution and contains information on supported platforms.

I think it would be nice to have a ``database'' with at least the
following entries:

	NAME		obvious
	EMAIL		obvious
	VERSION		e.g., 0.63.3
	PLATFORM	e.g., i386-unknown-linux
	SYSTEM		e.g., Redhat 4.2
	CC/FC/MAKE	e.g., egcs/g77/make
			on Suns, MAKE could be `GNUmake' or `Sunmake'
	NOTES		additional info

Ideally, not only R-core and the maintainers of binary packages would
provide me with such info.  In particular, feedback on platforms not
mentioned in PLATFORMS thus far would be appreciated.

NOTE:  I would like to distribute names and email addresses in this file
so that people who have problems building R on a `supported' platform
would know who to contact.

Thanks for all the info in advance.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Mar 30 15:53:47 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 30 Mar 1999 16:53:47 +0200 (CEST)
Subject: ctest wishlist
Message-ID: <14080.58747.592496.374235@pc87.maho.magnaeu.com>

In the past months (maybe even years), I have received a variety of
suggestions on improving/extending/... my ctest package.  Some of the
wishes have already been fulfilled.  In the future, I will at least:

* provide a formula-based interface

* provide an option for controlling the behavior of 2-sided p-values
(sum of more extreme, tail balancing a la S-PLUS, double one-sided, mid
p-value, more?)

* add something for analyzing odds ratios

* add something like an `info' slot to `htest' objects for displaying
useful additional information.  E.g., info on possible heterogeneity of
strata when analyzing 2 by 2 by k tables, etc.

The question is, which other features would you like to see in ctest?
Any additional tests?  What about exact inference methods?

Feedback will be appreciated.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Mar 30 17:56:28 1999
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Mar 1999 18:56:28 +0200
Subject: ctest wishlist
In-Reply-To: Kurt Hornik's message of "Tue, 30 Mar 1999 16:53:47 +0200 (CEST)"
References: <14080.58747.592496.374235@pc87.maho.magnaeu.com>
Message-ID: <x24sn2j4qr.fsf@blueberry.kubism.ku.dk>

Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

> The question is, which other features would you like to see in ctest?
> Any additional tests?  What about exact inference methods?
> 
> Feedback will be appreciated.

Exact confidence intervals for p in binom.test and rho (odds ratio) in
fisher.test. Stratified rank sum tests. Alternative scores in rank sum
tests (e.g. Normal Scores test). Tests for Normal Distribution.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 30 21:24:05 1999
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 30 Mar 1999 22:24:05 +0200
Subject: Example(persp) fails in 0.63.4 and 0.64 (PR#152)
Message-ID: <199903302024.WAA30042@blueberry.kubism.ku.dk>

>From 0.63.4 or 0.64:

> example(persp)

persp> x <- seq(-10, 10, length = 50)

persp> y <- x

persp> f <- function(x, y) {
    r <- sqrt(x^2 + y^2)
    10 * sin(r)/r
}

persp> z <- outer(x, y, f)

persp> z[is.na(z)] <- 1

persp> par(bg = "white")

persp> persp(x, y, z, theta = 30, phi = 30, expand = 0.5, 
    col = "lightblue")
Error: plot.new has not been called yet

This is probably not a problem in 0.63.3 too, but example() is broken
there. (If I paste the lines it, it works in 0.63.3 but not 0.63.4).
The error appears to be in the internal code for persp. If plot.new
has been called it works as expected, so `make check' appears to work.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Wed Mar 31 00:50:26 1999
From: bates@stat.wisc.edu (Douglas Bates)
Date: 30 Mar 1999 17:50:26 -0600
Subject: Documenting data sets
Message-ID: <6r677iczb1.fsf@verdi.stat.wisc.edu>

Has a format for the documentation of data sets been established?  The
prompt function applied to a data set produces a brief outline.  I
notice that the data documentation in the MASS library, for example,
is more complete.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 31 07:02:47 1999
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 31 Mar 1999 07:02:47 +0100 (BST)
Subject: Documenting data sets
In-Reply-To: <6r677iczb1.fsf@verdi.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.9903310651470.27074-100000@auk.stats>

On 30 Mar 1999, Douglas Bates wrote:

> Has a format for the documentation of data sets been established?  The
> prompt function applied to a data set produces a brief outline.  I
> notice that the data documentation in the MASS library, for example,
> is more complete.

That was translated from Sd. On S-PLUS there are two formats for data given
by prompt.data.frame and prompt.default (for all non-functions). Over the
years we have expanded the dataset documentation: for example I tried about
a year ago to give references wherever possible.

It would be helpful to have more for this sort of thing in R. One thing I
find problematic is the use of \item: I find quite often that the use of
items (.AG or .RC) in .Sd format translates to invalid .Rd. There are
restrictions on the use of \item (as we saw for nlm.Rd) that could do with
being lifted. I need to give more thought to exactly what, though.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Mar 31 08:11:07 1999
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 31 Mar 1999 09:11:07 +0200 (CEST)
Subject: Documenting data sets
In-Reply-To: <Pine.GSO.4.05.9903310651470.27074-100000@auk.stats>
References: <6r677iczb1.fsf@verdi.stat.wisc.edu>
 <Pine.GSO.4.05.9903310651470.27074-100000@auk.stats>
Message-ID: <14081.51851.302864.493919@pc87.maho.magnaeu.com>

>>>>> Prof Brian D Ripley writes:

> On 30 Mar 1999, Douglas Bates wrote:
>> Has a format for the documentation of data sets been established?  The
>> prompt function applied to a data set produces a brief outline.  I
>> notice that the data documentation in the MASS library, for example,
>> is more complete.

> That was translated from Sd. On S-PLUS there are two formats for data
> given by prompt.data.frame and prompt.default (for all
> non-functions). Over the years we have expanded the dataset
> documentation: for example I tried about a year ago to give references
> wherever possible.

prompt.data.frame() sounds like a nice idea.

In general, I think the format should be something like

	\name{}
	\alias{}
	\title{}
	\usage{data(...)}
	\description{}
	\format{}
	\details{}
	\source{}
	\examples{}
	\keyword{datasets}

but we should perhaps standardize the `format' slot a bit more.

> It would be helpful to have more for this sort of thing in R. One
> thing I find problematic is the use of \item: I find quite often that
> the use of items (.AG or .RC) in .Sd format translates to invalid
> .Rd. There are restrictions on the use of \item (as we saw for nlm.Rd)
> that could do with being lifted. I need to give more thought to
> exactly what, though.

Give Fritz a chance to look into Doug's Perl5 module a bit more.  This,
as I have been told, will also get \enumerate{} and description lists to
work.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Andreas.Weingessel@ci.tuwien.ac.at  Wed Mar 31 13:15:18 1999
From: Andreas.Weingessel@ci.tuwien.ac.at (Andreas.Weingessel@ci.tuwien.ac.at)
Date: Wed, 31 Mar 1999 14:15:18 +0200
Subject: image + x11 (PR#153)
Message-ID: <199903311215.OAA30327@blueberry.kubism.ku.dk>


If a new plot window is opened, immediately after an image() command,
the default color (black) is not plotted correctly.

Example:

> image(matrix(1:16,4))
> x11()
> plot(1:10)

The plot-color is not black, but a very light yellow (obviously the
last color used by image), although par("fg") is still "black".

> plot(1:10,col=1)

has the same effect (yellow instead of black). Specifying an other
color like

> plot(1:10,col=3)

works ok and "resets" also the black color.

	Andreas

--please do not edit the information below--

Version:
 platform = i686-unknown-linux
 arch = i686
 os = linux
 system = i686, linux
 status = Unstable
 status.rev = 0
 major = 0
 minor = 64.0
 year = 1999
 month = March
 day = 19
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From khal@alumni.uv.es  Wed Mar 31 14:32:07 1999
From: khal@alumni.uv.es (khal@alumni.uv.es)
Date: Wed, 31 Mar 1999 15:32:07 +0200
Subject: example(dotplot) is broken in 0633 (PR#154)
Message-ID: <199903311332.PAA30335@blueberry.kubism.ku.dk>

> example(dotplot)

dotplt> data(deaths)
[1] "deaths"

dotplt> dotplot(deaths, main = "Death Rates in Virginia - 1940")
Error: plot.new has not been called yet


This functions if there has been drawn in the device earlier.  One simple fix
is to move plot.new at an earlier place in the function.


Kjetil Halvorsen



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Wed Mar 31 23:17:40 1999
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Wed, 31 Mar 1999 14:17:40 -0800 (PST)
Subject: "dump" Splus -> R
In-Reply-To: <Pine.LNX.4.04.9903311354020.14356-100000@localhost>
Message-ID: <Pine.LNX.4.04.9903311409010.14356-100000@localhost>


A couple of comments for core...

In my examples, it looks like the only calls that need to be evaluated
inside the structure are "c()" and "list()".  A heuristic approach for
loading the dump files, is to assume that any other call ought to be
returned as a call, rather than evaluated.  Providing an undump() command
with this behavour might make it easier for people to move data between
Splus and R.

-Greg 


On Wed, 31 Mar 1999, Gregory R. Warnes wrote:

  GRW>> 
  GRW>> Hi All,
  GRW>> 
  GRW>> I just used "dump" on Splus to transfer a pile of survival objects from
  GRW>> Splus 3.4 on Solaris 7 to R 0.63.3 on Intel. 
  GRW>> 
  GRW>> The only trick is that survival objects contain an element holding the
  GRW>> original call that generated the object.  When Splus writes these out, it
  GRW>> doesn't mark them in any way, so when R tries to read them in, it ends up
  GRW>> trying to reevaluate the call.  Not nice.  
  GRW>> 
  GRW>> Anyway, as all but one** of the offending calls occur in statements
  GRW>> that look like
  GRW>>    "blah" <- structure( [...], call = func( param1, param2, [...], )
  GRW>>                  class = "myclass" [...] )
  GRW>> 
  GRW>> so I wrote the following perl script to encapsulate each call in 
  GRW>> as.call(expression(...)) :
  GRW>> 
  GRW>> -------begin translate.dump.pl--------
  GRW>> $RS="<-";
  GRW>> $OS="<-";
  GRW>> 
  GRW>> while(<>)
  GRW>>   {
  GRW>>         s/call\s*=(.*?),(\s+?)class/call=as.call(expression($1)),$2
  GRW>> class/s;
  GRW>>         print $_;
  GRW>>    }
  GRW>> ---------end translate.dump.pl----------
  GRW>> 
  GRW>> Now the data can be transfered by :
  GRW>> 
  GRW>>    Splus on Unix:
  GRW>>    > dump(ls())
  GRW>> 
  GRW>> Downloading the resulting "dumpdata" file.
  GRW>> 
  GRW>>    Linux shell:
  GRW>>    $  translate.dump.pl < dumpdata > dumpdata.fixed
  GRW>> 
  GRW>>    R on Linux:
  GRW>> 
  GRW>>    > source("dumpdata.fixed")
  GRW>> 
  GRW>> Just thought this might help someone out...
  GRW>> 
  GRW>> 
  GRW>> -Greg 
  GRW>> 
  GRW>> 
  GRW>> **The only exception was the ".Last.warning" object, which contained
  GRW>> something like 
  GRW>>   structure( "Warning Message" = offending(call) )
  GRW>> 
  GRW>> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@biostat.washington.edu  Wed Mar 31 23:56:54 1999
From: warnes@biostat.washington.edu (Gregory R. Warnes)
Date: Wed, 31 Mar 1999 14:56:54 -0800 (PST)
Subject: GC, Disk Storage, etc
Message-ID: <Pine.LNX.4.04.9903311441410.14356-100000@localhost>


I'm wondering what the plans are for the memory management system.  

Once there is a dynamic memory allocation system in place it would be nice
to augment that so that objects which are not currently being used need
not be resident in memory.  This way, rarely used objects will not be
filling up the memory of the R process.

(Yes, I am thinking about a cross between the current R and S object
storage ideas.)

It should be possible to set up an object access system that loads objects
on demand, and saves them out to disk when not used using a LRU strategy.

The save to disk could be part of the garbage collection strategy.  Some
herusitic like, if we run out of memory, throw all the ojbects we've not
used for XXX period of time out to disk.   If there are no such objects,
try to increase our available memory.  If that fails, throw things out
from least recently used forward.  If we can't manage to satisfy the
request using either method, fail the memory allocation and tell the user.

Glancing at the current code, it seems that the hardest part of this would
be keeping track of object usage, without imposing excessive overhead.

Comments?

-Greg



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

