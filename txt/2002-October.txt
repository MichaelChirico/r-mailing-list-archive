From andy_liaw@merck.com  Tue Oct  1 13:04:40 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Tue, 01 Oct 2002 08:04:40 -0400
Subject: uploading binary packages (was RE: [R] Update packages)
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC721@usrymx10.merck.com>

[I guess R-devel is more appropriate for this question:]

Will CRAN maintainers accept binary packages (in addition to source) from
the package maintainers?  As an example, I develop and test randomForest on
both Linux and WinNT, so I can always make the binary.  This could make life
a bit easier for BDR and DM.  Are there any potential problems?

Regards,
Andy

> -----Original Message-----
> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: Tuesday, October 01, 2002 5:49 AM
> To: Bernardo Rangel Tura
> Cc: cran@R-project.org; R-help@stat.math.ethz.ch
> Subject: Re: [R] Update packages
> 
> 
> >>>>> "Bernardo" == Bernardo Rangel Tura <tura@centroin.com.br>
> >>>>>     on Tue, 01 Oct 2002 06:19:37 -0300 writes:
> 
>     Bernardo> I have been having problems with
>     Bernardo> the update of my R.  Some packages (ipred,
>     Bernardo> randomForest, gregmisc, Hmisc and Design) that it
>     Bernardo> has new versions are not available in CRAN through
>     Bernardo> the command: update.packages ().  Will it be that
>     Bernardo> my product has a defect?  I use R in win98SE with
>     Bernardo> 128 Mb de RAM and AMD 1.2Ghz
> 
> Hmisc and Design have been announced by Frank Harrell as not yet
> to be available on CRAN because they don't pass "R CMD check" (without
> many warnings).
> The other 3 packages are on CRAN.  Note however, that for Windows,
> new *binary* versions must be made available (by Prof. Brian Ripley or
> Duncan Murdoch mainly I think) and there, the newest packages
> are dated Sept.1 (look manually for the needed zip files in
>  http://cran.R-project.org/bin/windows/contrib/ ).
> I'm not entirely sure how the CRAN maintainers populate that
> directory, though.
> 
> Regards,
> Martin Maechler <maechler@stat.math.ethz.ch>	
http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Oct  1 13:18:15 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Tue, 1 Oct 2002 14:18:15 +0200
Subject: uploading binary packages (was RE: [R] Update packages)
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC721@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81906FFC721@usrymx10.merck.com>
Message-ID: <15769.37511.658500.737453@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 01 Oct 2002 08:04:40 -0400,
>>>>> Liaw, Andy (LA) wrote:

  > [I guess R-devel is more appropriate for this question:]
  > Will CRAN maintainers accept binary packages (in addition to source) from
  > the package maintainers?  As an example, I develop and test randomForest on
  > both Linux and WinNT, so I can always make the binary.  This could make life
  > a bit easier for BDR and DM.  Are there any potential problems?

Yes, especially on Windows there is the danger of viruses. We (=the
CRAN master admins) cannot check for viruses because we have almost no
windows machines. And even if we had, we could not make any guarantees.

So the current policy is to have one or two maintainers for each
binary distribution of R and let them handle the rest. This ensures
that each binary distribution has been compiled using identical tools
and binaries are exchanged only in one direction (which makes it
harder for viruses to spread).

Allowing for binary uploads opens a can of worms I'd rather not like
to open. Of course I'm no windows user, so have no strong preferences
with respect to binaries for that particular platform.

Best,
Fritz





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Oct  1 14:30:06 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 1 Oct 2002 09:30:06 -0400
Subject: submitting binary windows packages
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149D00A@groexmb02.pfizer.com>


Hi All,

The windows binary packages in
http://cran.r-project.org/bin/windows/contrib/ are out of date for my
packages, and perhaps for others as well.  I've now received several email
messages commenting on this fact.   

Since I now have a Windows 2K machine with the proper build environment, I
can create the windows binary packages myself.  What is the proper mechanism
for getting a windows binary package placed there?   

This topic is not documented in the R Windows FAQ or anywhere else I can
find.   Kurt has indicated that the windows area is mirrored from one of
Brian's machines, but my query to Brian has not been answered yet.  (Perhaps
he is taking a well-deserved break).  Does someone else know the proper
procedure?   

If there is not already, can we arrange to set up an automated build
procedure so that a Windows binary package is created automatically when the
source package is uploaded?  Or some alternative?

Greg



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct  1 17:50:28 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 01 Oct 2002 12:50:28 -0400
Subject: R CMD check dependency simplification
Message-ID: <3D99D254.B65491C8@bank-banque-canada.ca>

I am trying to re-organizing my Makefile for testing my R packages and I
am having trouble finding a structure I like. The problem seems to be
that "R CMD check", which does wonderful things, does not allow
dependency information to flow through very gracefully. That is, since
everything is copied into the pkg.Rcheck directory, it is difficult to
make any changes to source files without having to completely re-do "R
CMD check pkg". 

For example, I would like to be able to make changes to
src/pkg1/man/foo.Rd and have dependencies that indicate only codoc and
examples need to be re-run, not tests and vignettes. (R CMD check can to
do this, the problem is moving the appropriate new pieces, in the
appropriate way, into the pkg1.Rcheck directory.)

The difficulty is exacerbated for me because I have pkg3 depends on pkg2
depends on pkg1. If I make a change to src/pkg1/inst/doc/guide.tex then
I really should only need to re-do the vignettes for pkg1, but instead I
have to re-do the whole "R CMD check" for pkg1, pkg2, and pkg3.

Suggestions would be appreciated.

Thanks,
Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kevin.wright@pioneer.com  Tue Oct  1 18:29:25 2002
From: kevin.wright@pioneer.com (Wright, Kevin)
Date: Tue, 1 Oct 2002 12:29:25 -0500
Subject: install.packages warning
Message-ID: <C71CB7425639D311A7A40008C7286AB006A55048@carina.phibred.com>


I typically install packages from a local site:

> install.packages("x:/tpm/tpm.zip",CRAN=NULL)
updating HTML package descriptions
Warning message: 
argument `lib' is missing: using C:/PROGRA~1/R/RW1051/library in:
install.packages("x:/tpm/tpm.zip", CRAN = NULL) 

The warning doesn't bother me, but I've had to help other people who see
"warning" and decide to panic.  

May I suggest changing "Warning message" to something less scary, for
example "Note:".

Best,

Kevin Wright  (apologies for the company signature)



This communication is for use by the intended recipient and contains 
information that may be privileged, confidential or copyrighted under
applicable law.  If you are not the intended recipient, you are hereby
formally notified that any use, copying or distribution of this e-mail,
in whole or in part, is strictly prohibited.  Please notify the sender
by return e-mail and delete this e-mail from your system.  Unless
explicitly and conspicuously designated as "E-Contract Intended",
this e-mail does not constitute a contract offer, a contract amendment,
or an acceptance of a contract offer.  This e-mail does not constitute
a consent to the use of sender's contact information for direct marketing
purposes or for transfers of data to third parties.

 Francais Deutsch Italiano  Espanol  Portuges  Japanese  Chinese  Korean

            http://www.DuPont.com/corp/email_disclaimer.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Oct  1 19:12:28 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Tue, 1 Oct 2002 14:12:28 -0400 (EDT)
Subject: install.packages warning
In-Reply-To: <C71CB7425639D311A7A40008C7286AB006A55048@carina.phibred.com>
Message-ID: <Pine.LNX.4.44.0210011409070.19662-100000@bolker.zoo.ufl.edu>


  Hear, hear; I've often had to reassure people about this warning.  (The
reason the scary "Warning message" words appear is because
install.packages() uses the warning() function.)  Is the warning really
necessary?

On Tue, 1 Oct 2002, Wright, Kevin wrote:

> 
> I typically install packages from a local site:
> 
> > install.packages("x:/tpm/tpm.zip",CRAN=NULL)
> updating HTML package descriptions
> Warning message: 
> argument `lib' is missing: using C:/PROGRA~1/R/RW1051/library in:
> install.packages("x:/tpm/tpm.zip", CRAN = NULL) 
> 
> The warning doesn't bother me, but I've had to help other people who see
> "warning" and decide to panic.  
> 
> May I suggest changing "Warning message" to something less scary, for
> example "Note:".
> 
> Best,
> 
> Kevin Wright  (apologies for the company signature)
> 
> 
> 
> This communication is for use by the intended recipient and contains 
> information that may be privileged, confidential or copyrighted under
> applicable law.  If you are not the intended recipient, you are hereby
> formally notified that any use, copying or distribution of this e-mail,
> in whole or in part, is strictly prohibited.  Please notify the sender
> by return e-mail and delete this e-mail from your system.  Unless
> explicitly and conspicuously designated as "E-Contract Intended",
> this e-mail does not constitute a contract offer, a contract amendment,
> or an acceptance of a contract offer.  This e-mail does not constitute
> a consent to the use of sender's contact information for direct marketing
> purposes or for transfers of data to third parties.
> 
>  Francais Deutsch Italiano  Espanol  Portuges  Japanese  Chinese  Korean
> 
>             http://www.DuPont.com/corp/email_disclaimer.html
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ko-Kang@xtra.co.nz  Tue Oct  1 19:22:24 2002
From: Ko-Kang@xtra.co.nz (Ko-Kang Kevin Wang)
Date: Wed, 2 Oct 2002 06:22:24 +1200
Subject: submitting binary windows packages
References: <D7A3CFD7825BD6119B880002A58F06C20149D00A@groexmb02.pfizer.com>
Message-ID: <002101c26977$7e387890$c93158db@kwan022>

----- Original Message -----
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
To: <R-devel@stat.math.ethz.ch>
Sent: Wednesday, October 02, 2002 1:30 AM
Subject: submitting binary windows packages


>
> Hi All,
>
> The windows binary packages in
> http://cran.r-project.org/bin/windows/contrib/ are out of date for my
> packages, and perhaps for others as well.  I've now received several email
> messages commenting on this fact.
>
> Since I now have a Windows 2K machine with the proper build environment, I
> can create the windows binary packages myself.  What is the proper
mechanism
> for getting a windows binary package placed there?
>
> This topic is not documented in the R Windows FAQ or anywhere else I can
> find.   Kurt has indicated that the windows area is mirrored from one of
> Brian's machines, but my query to Brian has not been answered yet.
(Perhaps
> he is taking a well-deserved break).  Does someone else know the proper
> procedure?
>

It is right at the bottom of CRAN main page, cran.r-project.org.

Quote:
To "submit" to CRAN, simply upload to ftp://cran.r-project.org/incoming and
send email to cran@r-project.org. Please indicate the copyright situation
(GPL, ...) in your submission. Note that we generally do not accept
submissions of precompiled binaries due to security reasons (we have no
means to check for viruses etc. for the big variety of platforms that R runs
on). All binary distribution listed above are compiled by selected
maintainers, who are in charge for all binaries of their platform,
respectively.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kevin.wright@pioneer.com  Tue Oct  1 19:36:47 2002
From: kevin.wright@pioneer.com (Wright, Kevin)
Date: Tue, 1 Oct 2002 13:36:47 -0500
Subject: Possible inconsistency with mean & var
Message-ID: <C71CB7425639D311A7A40008C7286AB006A55049@carina.phibred.com>


I encountered an unexpected difference in the way that mean and var work:

> mean(numeric(0))
[1] NaN

> var(numeric(0))
Error in var(numeric(0)) : `x' is empty

Looking into this, I discovered in mean.default that sum(x)/n
evaluates as
> sum(numeric(0))/length(numeric(0))
[1] NaN

The function var calls an .Internal and seems to evaluate this:
> .Internal(cov(numeric(0),NULL,"all.obs"))
Error: `x' is empty


Best,


Kevin Wright, Research Scientist
Pioneer Hi-Bred Int'l, x4054.




This communication is for use by the intended recipient and contains 
information that may be privileged, confidential or copyrighted under
applicable law.  If you are not the intended recipient, you are hereby
formally notified that any use, copying or distribution of this e-mail,
in whole or in part, is strictly prohibited.  Please notify the sender
by return e-mail and delete this e-mail from your system.  Unless
explicitly and conspicuously designated as "E-Contract Intended",
this e-mail does not constitute a contract offer, a contract amendment,
or an acceptance of a contract offer.  This e-mail does not constitute
a consent to the use of sender's contact information for direct marketing
purposes or for transfers of data to third parties.

 Francais Deutsch Italiano  Espanol  Portuges  Japanese  Chinese  Korean

            http://www.DuPont.com/corp/email_disclaimer.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Oct  1 20:34:26 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 1 Oct 2002 21:34:26 +0200 (CEST)
Subject: X11 font at size 22 could not be loaded
Message-ID: <Pine.LNX.4.44.0210012123460.1159-100000@kleigh.nl>


I'm not sure this is a bug in R.

Since a few weeks I have a new PC, SuSE 8.0 installed. When
running demo(graphics) I get after a few graphs:

    Error in title(main = "January Pie Sales", cex.main = 1.8, font.main = 1) :
            X11 font at size 22 could not be loaded

And the demo stops.

This is in R 1.6.0. I get the same in R 1.5.1 on HP-UX, but
using my PC as the X-server.

So, it could be there is something wrong with the set-up of my
machine. SuSE 8.0 is pretty much up-to-date, but I can't
guarantee I didn't something stupid during installation. I will
try to find out what could be wrong with my fonts.

However, so far I haven't noticed any font problems with other
programs. If R can't load the font it wants, shouldn't it
continue with the next best thing, instead of stopping with an
error message?

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  1 21:21:48 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Oct 2002 22:21:48 +0200
Subject: X11 font at size 22 could not be loaded
In-Reply-To: <Pine.LNX.4.44.0210012123460.1159-100000@kleigh.nl>
References: <Pine.LNX.4.44.0210012123460.1159-100000@kleigh.nl>
Message-ID: <x2smzpzz8j.fsf@biostat.ku.dk>

Peter Kleiweg <kleiweg@let.rug.nl> writes:

> I'm not sure this is a bug in R.
> 
> Since a few weeks I have a new PC, SuSE 8.0 installed. When
> running demo(graphics) I get after a few graphs:
> 
>     Error in title(main = "January Pie Sales", cex.main = 1.8, font.main = 1) :
>             X11 font at size 22 could not be loaded
> 
> And the demo stops.
> 
> This is in R 1.6.0. I get the same in R 1.5.1 on HP-UX, but
> using my PC as the X-server.
> 
> So, it could be there is something wrong with the set-up of my
> machine. SuSE 8.0 is pretty much up-to-date, but I can't
> guarantee I didn't something stupid during installation. I will
> try to find out what could be wrong with my fonts.
> 
> However, so far I haven't noticed any font problems with other
> programs. If R can't load the font it wants, shouldn't it
> continue with the next best thing, instead of stopping with an
> error message?

Hmm, yes...

I've seen this on a SuSE install at our place too. The direct cause
seems to be that the SuSE font server doesn't allow scaled versions of
the standard Adobe fonts. However, the logic in the X11 driver should
cause it to substitute a 20pt font in that case, but apparently it
doesn't. A temporary workaround might be to add scaled versions of the
PS fonts in /etc/X11/fs/config.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Oct  1 21:58:08 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 1 Oct 2002 22:58:08 +0200 (CEST)
Subject: X11 font at size 22 could not be loaded
In-Reply-To: <x2smzpzz8j.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0210012234040.1159-100000@kleigh.nl>

Peter Dalgaard BSA scribeva...

> Peter Kleiweg <kleiweg@let.rug.nl> writes:
>
> > I'm not sure this is a bug in R.
> >
> > Since a few weeks I have a new PC, SuSE 8.0 installed. When
> > running demo(graphics) I get after a few graphs:
> >
> >     Error in title(main = "January Pie Sales", cex.main = 1.8, font.main = 1) :
> >             X11 font at size 22 could not be loaded

[...]

> I've seen this on a SuSE install at our place too. The direct cause
> seems to be that the SuSE font server doesn't allow scaled versions of
> the standard Adobe fonts. However, the logic in the X11 driver should
> cause it to substitute a 20pt font in that case, but apparently it
> doesn't. A temporary workaround might be to add scaled versions of the
> PS fonts in /etc/X11/fs/config.

The weird thing is, in some cases, you do get another font size.
Sometimes I get a warning, not an error:

Warning message:
X11 used font size 8 when 6 was requested

-- 
Peter Kleiweg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  1 23:03:39 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 2002 00:03:39 +0200
Subject: X11 font at size 22 could not be loaded
In-Reply-To: <Pine.LNX.4.44.0210012234040.1159-100000@kleigh.nl>
References: <Pine.LNX.4.44.0210012234040.1159-100000@kleigh.nl>
Message-ID: <x2ofadzuis.fsf@biostat.ku.dk>

Peter Kleiweg <kleiweg@let.rug.nl> writes:

> > I've seen this on a SuSE install at our place too. The direct cause
> > seems to be that the SuSE font server doesn't allow scaled versions of
> > the standard Adobe fonts. However, the logic in the X11 driver should
> > cause it to substitute a 20pt font in that case, but apparently it
> > doesn't. A temporary workaround might be to add scaled versions of the
> > PS fonts in /etc/X11/fs/config.
> 
> The weird thing is, in some cases, you do get another font size.
> Sometimes I get a warning, not an error:
> 
> Warning message:
> X11 used font size 8 when 6 was requested

That's not weird, that's what should happen.... The logic (at least
the intended one!) in the driver would be to give you "used font size
20 when 22 was requested" if there are no scalable fonts.

Oho! I think I see it: If you're using only nonscalable fonts, you are
assumed to have all the Adobe design sizes,

8, 10, 11, 12, 14, 17, 18, 20, 24, 25, 34

but some of these (11, 17, 20, 25, 34) are only available if you also
install 100dpi fonts. With only the 75dpi fonts, all you get is 8, 10,
12, 14, 18, 24. The logic in the driver doesn't catch this cas
properly, which it probably should.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Oct  1 23:45:26 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Wed, 2 Oct 2002 00:45:26 +0200 (MET DST)
Subject: Unsolved symbols: meet_ Tcl_EvalObjv (PR#2090)
Message-ID: <200210012245.AAA26861@pubhealth.ku.dk>


Running 'make check' I get two errors:

running code in 'mva-Ex.R' .../usr/lib/dld.sl: Unresolved symbol: meet_ (code)  from /users1/kleiweg/R-1.6.0-source/library/cluster/libs/cluster.sl

running code in 'tcltk-Ex.R' .../usr/lib/dld.sl: Unresolved symbol: Tcl_EvalObjv (code)  from /users1/kleiweg/R-1.6.0-source/library/tcltk/libs/tcltk.sl


Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20
 status =
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Oct  1 23:55:03 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Wed, 2 Oct 2002 00:55:03 +0200 (MET DST)
Subject: Scripts not executable (PR#2091)
Message-ID: <200210012255.AAA26878@pubhealth.ku.dk>



Running 'make' stops when it tries to build the recommended
(included) packages, because the script 'Rcmd' is not
executable. I have to do a 'chmod +x src/scripts/*' and rerun
'make'.

In version 1.5.1 I also noticed the installed scripts were not
executable, but I could do a 'chmod +x lib/R/bin/*' after 'make
install'. But now the scripts are already needed during 'make'.

This error does not occur on Linux-PC and Linux-Alpha.


Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20
 status =
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct  2 00:25:52 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 2002 01:25:52 +0200
Subject: Unsolved symbols: meet_ Tcl_EvalObjv (PR#2090)
In-Reply-To: <200210012245.AAA26861@pubhealth.ku.dk>
References: <200210012245.AAA26861@pubhealth.ku.dk>
Message-ID: <x2k7l1zqpr.fsf@biostat.ku.dk>

kleiweg@let.rug.nl writes:

> Running 'make check' I get two errors:
> 
> running code in 'mva-Ex.R' .../usr/lib/dld.sl: Unresolved symbol: meet_ (code)  from /users1/kleiweg/R-1.6.0-source/library/cluster/libs/cluster.sl

Wouldn't know about that one.
 
> running code in 'tcltk-Ex.R' .../usr/lib/dld.sl: Unresolved symbol: Tcl_EvalObjv (code)  from /users1/kleiweg/R-1.6.0-source/library/tcltk/libs/tcltk.sl

Which version of Tcl? That function has been around at least since
8.1, so I'm guessing 8.0. It's only being used by RTcl_ReadConsole
&friends so you might try taking that whole section of tcltk.c out by
replacing the

#ifndef Win32

with 

#if !defined(Win32) & !defined(Tcl80) 

or, less ceremoniously, 

#if 0

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Oct  2 07:24:28 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 2 Oct 2002 08:24:28 +0200
Subject: Scripts not executable (PR#2091)
In-Reply-To: <200210012255.AAA26878@pubhealth.ku.dk>
References: <200210012255.AAA26878@pubhealth.ku.dk>
Message-ID: <15770.37148.514799.185521@mithrandir.hornik.net>

>>>>> kleiweg  writes:

> Running 'make' stops when it tries to build the recommended
> (included) packages, because the script 'Rcmd' is not
> executable. I have to do a 'chmod +x src/scripts/*' and rerun
> 'make'.

> In version 1.5.1 I also noticed the installed scripts were not
> executable, but I could do a 'chmod +x lib/R/bin/*' after 'make
> install'. But now the scripts are already needed during 'make'.

> This error does not occur on Linux-PC and Linux-Alpha.

The scripts are installed using INSTALL_SCRIPT, which according to my
understanding should install as mode 755.

After running configure, my top-level Makeconf contains

INSTALL = /usr/bin/install -c
INSTALL_DATA = ${INSTALL} -m 644
INSTALL_PROGRAM = ${INSTALL}
INSTALL_SCRIPT = ${INSTALL}
INSTALL_DIR = ${INSTALL} -d

What does yours look like?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed Oct  2 11:19:40 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 2 Oct 2002 12:19:40 +0200 (CEST)
Subject: Scripts not executable (PR#2091)
In-Reply-To: <15770.37148.514799.185521@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.44.0210021211180.1162-100000@kleigh.nl>

Kurt Hornik scribeva...

> >>>>> kleiweg  writes:
>
> > Running 'make' stops when it tries to build the recommended
> > (included) packages, because the script 'Rcmd' is not
> > executable. I have to do a 'chmod +x src/scripts/*' and rerun
> > 'make'.
>
> > In version 1.5.1 I also noticed the installed scripts were not
> > executable, but I could do a 'chmod +x lib/R/bin/*' after 'make
> > install'. But now the scripts are already needed during 'make'.
>
> > This error does not occur on Linux-PC and Linux-Alpha.
>
> The scripts are installed using INSTALL_SCRIPT, which according to my
> understanding should install as mode 755.
>
> After running configure, my top-level Makeconf contains
>
> INSTALL = /usr/bin/install -c
> INSTALL_DATA = ${INSTALL} -m 644
> INSTALL_PROGRAM = ${INSTALL}
> INSTALL_SCRIPT = ${INSTALL}
> INSTALL_DIR = ${INSTALL} -d
>
> What does yours look like?

INSTALL = /opt/imake/bin/install -c
INSTALL_DATA = ${INSTALL} -m 644
INSTALL_PROGRAM = ${INSTALL}
INSTALL_SCRIPT = ${INSTALL}
INSTALL_DIR = ${INSTALL} -d

According to the manpage of install, the options -m and -d are
not supported.

-- 
Peter Kleiweg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kevin.Wright@pioneer.com  Wed Oct  2 15:19:29 2002
From: Kevin.Wright@pioneer.com (Kevin.Wright@pioneer.com)
Date: Wed, 2 Oct 2002 16:19:29 +0200 (MET DST)
Subject: Mean and var inconsistency (PR#2094)
Message-ID: <200210021419.QAA05768@pubhealth.ku.dk>

Full_Name: Kevin Wright
Version: 1.5.1
OS: Windows 95
Submission from: (NULL) (170.54.59.160)


Originally posted to r-devel, but after thinking about it more decided that this
is a bug.  I encountered an unexpected difference in the way that mean and var
work: 

> mean(numeric(0)) 
[1] NaN 

> var(numeric(0)) 
Error in var(numeric(0)) : `x' is empty 

Looking into this, I discovered in mean.default that sum(x)/n 
evaluates as 
> sum(numeric(0))/length(numeric(0)) 
[1] NaN 

The function var seems to evaluate this: 
> .Internal(cov(numeric(0),NULL,"all.obs")) 
Error: `x' is empty 

One possible fix would be to modify var to check that the length of x is greater
than 0, otherwise return NaN/NA.  

Just for your information (not necessarily the desirable answer), in S-Plus
2000:
> mean(numeric(0))
NA
> var(numeric(0))
NA



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rss@rss.phtd.tpu.edu.ru  Fri Oct  4 04:57:23 2002
From: rss@rss.phtd.tpu.edu.ru (rss@rss.phtd.tpu.edu.ru)
Date: Fri, 4 Oct 2002 05:57:23 +0200 (MET DST)
Subject: Problem with construction (1-x)^(1-y) (PR#2103)
Message-ID: <200210040357.FAA19946@pubhealth.ku.dk>

Hello!

I have any problem with construction (1-x)^(1-y) if y<1

> x=5
> y=.5
> (1-x)^(1-y)
[1] NaN
> (1-y)
[1] 0.5
> (1-x)^0.5
[1] NaN
> (1-x)
[1] -4
> -4^.5
[1] -2

Roma V. Kalaida
E-mail rss@rss.phtd.tpu.edu.ru

<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Oct  4 07:20:21 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 4 Oct 2002 08:20:21 +0200 (MET DST)
Subject: Problem with construction (1-x)^(1-y) (PR#2103)
Message-ID: <200210040620.IAA20326@pubhealth.ku.dk>

rss@rss.phtd.tpu.edu.ru wrote:
> 
> Hello!
> 
> I have any problem with construction (1-x)^(1-y) if y<1
> 
> > x=5
> > y=.5
> > (1-x)^(1-y)
> [1] NaN

Well, that's not a bug! Also for y>=1 (hopefully!):
 (1-x)^1.1 # NaN

You are calculating with real numbers and expecting complex ones! So
just try:
 as.complex(1-x)^(1-y)

Uwe Ligges

> > (1-y)
> [1] 0.5
> > (1-x)^0.5
> [1] NaN
> > (1-x)
> [1] -4
> > -4^.5
> [1] -2
> 
> Roma V. Kalaida
> E-mail rss@rss.phtd.tpu.edu.ru

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mmcstephen@cogstate.com  Fri Oct  4 07:31:11 2002
From: mmcstephen@cogstate.com (mmcstephen@cogstate.com)
Date: Fri, 4 Oct 2002 08:31:11 +0200 (MET DST)
Subject: parse (PR#2104)
Message-ID: <200210040631.IAA20406@pubhealth.ku.dk>

Full_Name: Michael McStephen
Version: 1.5.1
OS: w2000
Submission from: (NULL) (202.138.192.38)


> R.version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R              
> 
> # The following line produces an error:
> tmp.name<-"tmp"
> parse(text=paste(tmp.name, ".lg, ",  sep="") )
Error in parse(file, n, text, prompt) : parse error
> 
>  
> # This line doesn't:
> parse(text=paste(tmp.name, ".lg ",  sep="") )
expression(tmp.lg)
> 
>  
> # The only difference is the ',' after lg in the second line.
>  
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Oct  4 09:32:25 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 4 Oct 2002 10:32:25 +0200
Subject: Scripts not executable (PR#2091)
In-Reply-To: <Pine.LNX.4.44.0210021211180.1162-100000@kleigh.nl>
References: <15770.37148.514799.185521@mithrandir.hornik.net>
 <Pine.LNX.4.44.0210021211180.1162-100000@kleigh.nl>
Message-ID: <15773.21017.805579.131688@mithrandir.hornik.net>

>>>>> Peter Kleiweg writes:

> Kurt Hornik scribeva...
>> >>>>> kleiweg  writes:
>> 
>> > Running 'make' stops when it tries to build the recommended
>> > (included) packages, because the script 'Rcmd' is not
>> > executable. I have to do a 'chmod +x src/scripts/*' and rerun
>> > 'make'.
>> 
>> > In version 1.5.1 I also noticed the installed scripts were not
>> > executable, but I could do a 'chmod +x lib/R/bin/*' after 'make
>> > install'. But now the scripts are already needed during 'make'.
>> 
>> > This error does not occur on Linux-PC and Linux-Alpha.
>> 
>> The scripts are installed using INSTALL_SCRIPT, which according to my
>> understanding should install as mode 755.
>> 
>> After running configure, my top-level Makeconf contains
>> 
>> INSTALL = /usr/bin/install -c
>> INSTALL_DATA = ${INSTALL} -m 644
>> INSTALL_PROGRAM = ${INSTALL}
>> INSTALL_SCRIPT = ${INSTALL}
>> INSTALL_DIR = ${INSTALL} -d
>> 
>> What does yours look like?

> INSTALL = /opt/imake/bin/install -c
> INSTALL_DATA = ${INSTALL} -m 644
> INSTALL_PROGRAM = ${INSTALL}
> INSTALL_SCRIPT = ${INSTALL}
> INSTALL_DIR = ${INSTALL} -d

> According to the manpage of install, the options -m and -d are
> not supported.

Wonderful.  An install from the X consortium, documented as 'compatible
with the BSD install script, but [was] written from scratch' ...

On the HPUX system that I have access to this works without problems,
though.  The man page does not document '-m' but the code (shell script)
shows that this works.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Oct  4 12:00:55 2002
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Fri, 4 Oct 2002 13:00:55 +0200 (MET DST)
Subject: Problem with construction (1-x)^(1-y) (PR#2103)
Message-ID: <200210041100.NAA24710@pubhealth.ku.dk>

On Fri, 4 Oct 2002 05:57:23 +0200 (MET DST), you wrote:

>> (1-x)^0.5
>[1] NaN
>> (1-x)
>[1] -4
>> -4^.5
>[1] -2

As Uwe mentioned, you can't take square roots of negative real
numbers, you need to force them to complex first.

The reason it worked in the last example is that exponentiation has
higher precedence than unary negation, so "-4^.5" is evaluated as
"-(4^.5)".

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Oct  4 12:10:16 2002
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Fri, 4 Oct 2002 13:10:16 +0200 (MET DST)
Subject: parse (PR#2104)
Message-ID: <200210041110.NAA24846@pubhealth.ku.dk>

On Fri, 4 Oct 2002 08:31:11 +0200 (MET DST), you wrote:

>> # The following line produces an error:
>> tmp.name<-"tmp"
>> parse(text=paste(tmp.name, ".lg, ",  sep="") )
>Error in parse(file, n, text, prompt) : parse error

I'm not sure what you'd expect here.  If you just enter the result of
the paste at the command line, you should see 

> tmp.lg,
Error: syntax error

Commas aren't allowed to end expressions.  (Array indexing and
function calls have argument lists ending with a comma, but argument
lists aren't expressions.)

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Fri Oct  4 19:36:38 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Fri, 04 Oct 2002 14:36:38 -0400
Subject: items in Rd file
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC763@usrymx10.merck.com>

Dear R-devel,

I'm encountering a strange problem in a Rd file that I'm working on.  In the
"Value" section, I have something like:

=====================
\value{
  An object of class \code{randomForest}, which is a list with the
  following components:
  \item{call}{the original call to \code{randomForest}}
  ...

  For classification problem, the following are also included:

  \item{err.rate}{final error rate of the prediction on the input data.}
  ...

  For regression problem, the following are included:
  \item{mse}{mean square error: sum of squared residuals divided by
    \code{n}.}
  ...

  If test set is given (through the \code{xtest} or additionally
  \code{ytest} arguments), then there is also a \code{test} component,
  which is a list with the following components:
  
  \item{predicted}{predicted classes/values for the test set.}
  ...

  Note:  The \code{forest} structure is slightly different between
  classification and regression.
===============

In the resulting help page, the passages between \item{}'s all disappeared!
Is there any way to make it work?

Thanks a lot for any tips!

Andy
Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY84-16            Rahway, NJ 07065
mailto:andy_liaw@merck.com



------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Fri Oct  4 19:45:18 2002
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Fri, 04 Oct 2002 20:45:18 +0200
Subject: items in Rd file
References: <51F9C42DA15CD311BD220008C707D81906FFC763@usrymx10.merck.com>
Message-ID: <3D9DE1BE.82D11C53@ci.tuwien.ac.at>

"Liaw, Andy" wrote:
> 
> Dear R-devel,
> 
> I'm encountering a strange problem in a Rd file that I'm working on.  In the
> "Value" section, I have something like:
> 
> =====================
> \value{
>   An object of class \code{randomForest}, which is a list with the
>   following components:
>   \item{call}{the original call to \code{randomForest}}
>   ...
> 
>   For classification problem, the following are also included:
> 
>   \item{err.rate}{final error rate of the prediction on the input data.}
>   ...
> 
>   For regression problem, the following are included:
>   \item{mse}{mean square error: sum of squared residuals divided by
>     \code{n}.}
>   ...
> 
>   If test set is given (through the \code{xtest} or additionally
>   \code{ytest} arguments), then there is also a \code{test} component,
>   which is a list with the following components:
> 
>   \item{predicted}{predicted classes/values for the test set.}
>   ...
> 
>   Note:  The \code{forest} structure is slightly different between
>   classification and regression.
> ===============
> 
> In the resulting help page, the passages between \item{}'s all disappeared!
> Is there any way to make it work?

I think you need an 
  {\itemize \items... }
or a
   \describe{ \items.. }

Hope that helps
Z

> Thanks a lot for any tips!
> 
> Andy
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY84-16            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> ------------------------------------------------------------------------------
> Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.
> 
> ==============================================================================
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Oct  5 17:22:47 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 5 Oct 2002 09:22:47 -0700
Subject: R-1.6.0 for Darwin
Message-ID: <AF6ADB36-D87E-11D6-9339-000393860F3C@stat.ucla.edu>

I don't think it is necessary to put binary versions of the Darwin/X11
version on CRAN any more. The current sources compile without
problems on both Mac OS X 10.1 and 10.2, using either gcc/g77 2.95.2 or
gcc/g77 3.1, or f2c. It seems to me that
if you are using R from the command line, using X11, that you are
sophisticated enough to install the tools below. And, if you want
to install and upgrade R packages, you need these tools anyway.

Here is what you need. I will assume you use Jaguar (10.2), support for
10.1 will vanish rapidly. Also, do use gcc 3.1, it gives better and  
faster code
on Darwin (it's the default compiler anyway).

1. The Apple Developer Tools. Become an on-line member of the Apple
Developer Connection (for free) and then get the latest version of
the Developer Tools.

http://www.apple.com/developer

This gives you, in the Darwin layer, the gcc toolset,
and in the Aqua layer it gives you the ProjectBuilder toolset (which you
do not need for the Darwin/X11 version of R).

2. You have to install X11. A good introduction to this is

http://fink.sourceforge.net/doc/x11/index.php

You can install xfree86 using fink (see below), you can also install it  
using the
installer from

http://www.mrcla.com/XonX/

Instead of using the XDarwin interface that comes with this  
distribution, you
can (and probably should) use OroborusX, which provides and interface to
the rootless X server and a very Aqua-like window manager.

http://oroborosx.sourceforge.net/

3. You need the 10.2 version of fink, for readline, dlcompat, g77,  
ncurses, libpcre, libz,
libbz2, f2c if needed, tcltk, xfree86 if needed, atlas if needed, gnome  
if needed. Some of this
stuff (ncurses, tcl, libz) now also sits in /usr/lib, but the R  
configure scripts
will choose the fink version.

See http://fink.sourceforge.net
	in particular http://fink.sourceforge.net/news/jaguar.php

All the CRAN packages compile as well (although you may need
other pieces of fink such as MySQL or netcdf to get them going),
with the exception of Matrix and subselect, but a fix for those is
on its way.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From roxburg@kih.net  Sat Oct  5 21:27:49 2002
From: roxburg@kih.net (roxburg@kih.net)
Date: Sat, 5 Oct 2002 22:27:49 +0200 (MET DST)
Subject: Welch versus Satterthwaith (PR#2111)
Message-ID: <200210052027.WAA01389@pubhealth.ku.dk>

This is not a bug report but didn't see another way to ask a question.

For the approximate t-test assuming unequal variances, the R docs cite
Welch's method for the df of the approximating distribution.
I have several methods books, and they all uses Satterthwaite's method.
Why does R use Welch's method where can I learn about Welch's method?

Sincerely,
David Allen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Sun Oct  6 08:47:47 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Sun, 6 Oct 2002 09:47:47 +0200
Subject: R CMD check dependency simplification
In-Reply-To: <3D99D254.B65491C8@bank-banque-canada.ca>
References: <3D99D254.B65491C8@bank-banque-canada.ca>
Message-ID: <15775.60067.258424.221743@celeborn.leisch.at>

>>>>> On Tue, 01 Oct 2002 12:50:28 -0400,
>>>>> Paul Gilbert (PG) wrote:

  > I am trying to re-organizing my Makefile for testing my R packages and I
  > am having trouble finding a structure I like. The problem seems to be
  > that "R CMD check", which does wonderful things, does not allow
  > dependency information to flow through very gracefully. That is, since
  > everything is copied into the pkg.Rcheck directory, it is difficult to
  > make any changes to source files without having to completely re-do "R
  > CMD check pkg". 

  > For example, I would like to be able to make changes to
  > src/pkg1/man/foo.Rd and have dependencies that indicate only codoc and
  > examples need to be re-run, not tests and vignettes. (R CMD check can to
  > do this, the problem is moving the appropriate new pieces, in the
  > appropriate way, into the pkg1.Rcheck directory.)

I absolutely agree that this would be nice to have, but we don't have
any tools for that yet (and I don't think it is all that simple to get
it right).

If there is a clear dependency structure like you describe, i.e., pkg3
depends on pkg2 which depends on pkg1 one here is what I currently do:

check pkg1, when it passes INSTALL it into a development library and
add that to your R_LIBS variable. Then check pkg2 and do the
same. Then check pkg3.

  > The difficulty is exacerbated for me because I have pkg3 depends on pkg2
  > depends on pkg1. If I make a change to src/pkg1/inst/doc/guide.tex then
  > I really should only need to re-do the vignettes for pkg1, but instead I
  > have to re-do the whole "R CMD check" for pkg1, pkg2, and pkg3.

Why would you run R CMD check on pkg2 if you only change the vignette
of pkg1?

Best,
Fritz



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sun Oct  6 17:19:27 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Sun, 6 Oct 2002 09:19:27 -0700 (PDT)
Subject: Welch versus Satterthwaith (PR#2111)
In-Reply-To: <200210052027.WAA01389@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210060913490.12090-100000@homer25.u.washington.edu>

On Sat, 5 Oct 2002 roxburg@kih.net wrote:

> This is not a bug report but didn't see another way to ask a question.

Well, you could try the r-help or r-devel mailing lists

> For the approximate t-test assuming unequal variances, the R docs cite
> Welch's method for the df of the approximating distribution.
> I have several methods books, and they all uses Satterthwaite's method.
> Why does R use Welch's method where can I learn about Welch's method?
>

It's the same method.

The t-statistic is the difference in means divided by a more-or-less
unbiased estimate of its standard deviation. There's only one natural way
to do this and in sufficiently large samples that's all you need.

The more difficult part is the sampling distribution, which is
approximated by a t-distribution with degrees of freedom from some
complicated formula involving the two sample sizes and variances.  It was
indepedently derived by Welch and Satterthwaite.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sun Oct  6 20:21:11 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sun, 6 Oct 2002 12:21:11 -0700
Subject: R-1.6.0
Message-ID: <C5BF2F9B-D960-11D6-AD1D-000393860F3C@stat.ucla.edu>

I have build R-1.6.0 on Jaguar (actually on 10.2.2), using gcc 3.1
from Apple, g77 3.1 from fink, ATLAS from fink. It passes all
checks OK.

I also re-compiled the 233 packages listed below
with the same setup. I have NOT tested all these
packages in any detail. A tar.gz file with the whole /usr/local/lib/R
will be on ftp://gifi.stat.ucla.edu on Tuesday. It will NOT include
anything from fink (i.e. /sw) or Xfree86 (/usr/X11R6).

The problem with tkrplot is that the load command in tcl does not
seem to work (while it did work under 10.1). The problem with
ROracle, RSQLite, RQuantlib is that they need libraries which
I do not have. In Omegahat Perl from R and Python from R work,
the other way around I don't know. RXLisp does not compile any
more.

what builds

-- Everything from CRAN, including RMySQL, RmSQL, XML,
       rpvm, rsprng, RMpi, but not ROracle, RSQLite, RQuantlib
-- Lindsay packages rmutil, gnlm, stable, growthm repeated, event,  
ordinal
-- Bioconductor packages Biobase, annotate, affy, AnnBuilder, edd,  
genefilter,
	geneplotter, rhdf5, marrayTest, marrayClasses, marrayInput,  
marrayPlots,
	multtest, ROC, tkWidgets
-- snow from Tierney
-- deal from gR
-- from Devel Dopt, GRASS, PHYLOGR, R2HTML, RPgSQL, dseplus, pls,  
runstat,
	multidim, mclust, ensemble, locfit, write-snns
-- from OmegaHat gtk, OOP, RGtk, RGtkViewers, RObjectTables, RSPerl,  
RSPython

what does NOT load

tkrplot
 > library(tkrplot)
Loading required package: tcltk
dyld: /usr/local/lib/R/bin/R.bin malformed library:
	/usr/local/lib/R/library/tkrplot/libs/tkrplot.so
		(not a Mach-O library file, bad filetype value)
Trace/BPT trap
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmacq@ucscalumni.com  Sun Oct  6 23:01:45 2002
From: dmacq@ucscalumni.com (Don MacQueen)
Date: Sun, 6 Oct 2002 15:01:45 -0700
Subject: [R-SIG-Mac]R-1.6.0
In-Reply-To: <C5BF2F9B-D960-11D6-AD1D-000393860F3C@stat.ucla.edu>
References: <C5BF2F9B-D960-11D6-AD1D-000393860F3C@stat.ucla.edu>
Message-ID: <p05111701b9c6628a46d0@[192.168.1.100]>

At 12:21 PM -0700 10/6/02, Jan de Leeuw wrote:
>I have build R-1.6.0 on Jaguar (actually on 10.2.2), using gcc 3.1
>from Apple, g77 3.1 from fink, ATLAS from fink. It passes all
>checks OK.
>
>I also re-compiled the 233 packages listed below
>with the same setup. I have NOT tested all these
>packages in any detail. A tar.gz file with the whole /usr/local/lib/R
>will be on ftp://gifi.stat.ucla.edu on Tuesday. It will NOT include
>anything from fink (i.e. /sw) or Xfree86 (/usr/X11R6).
>
>The problem with tkrplot is that the load command in tcl does not
>seem to work (while it did work under 10.1). The problem with
>ROracle, RSQLite, RQuantlib is that they need libraries which
>I do not have.

For ROracle, what library would that be?
As we have an Oracle site license at work, maybe I can get the 
library and give it a try.

-Don

<- snip ->

>===
>Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
>Editor: Journal of Multivariate Analysis, Journal of Statistical  Software
>US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
>phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
>homepage: http://gifi.stat.ucla.edu
> 
>------------------------------------------------------------------------ 
>-------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
> 
>------------------------------------------------------------------------ 
>-------------------------       
>
>_______________________________________________
>R-SIG-Mac mailing list
>R-SIG-Mac@stat.math.ethz.ch
>http://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac


-- 
-------------------------
Don MacQueen
dmacq@ucscalumni.com
California, USA
-------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sun Oct  6 23:31:27 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sun, 6 Oct 2002 15:31:27 -0700
Subject: [R-SIG-Mac]R-1.6.0
In-Reply-To: <p05111701b9c6628a46d0@[192.168.1.100]>
Message-ID: <5AB48C88-D97B-11D6-BACB-000393860F3C@stat.ucla.edu>

Well. it needs ORACLE_HOME, and then installs some module
in Oracle, as far as I can see. I don't have an ORACLE_HOME.

--- Jan

On Sunday, October 6, 2002, at 03:01 PM, Don MacQueen wrote:

> At 12:21 PM -0700 10/6/02, Jan de Leeuw wrote:
>> I have build R-1.6.0 on Jaguar (actually on 10.2.2), using gcc 3.1
>> from Apple, g77 3.1 from fink, ATLAS from fink. It passes all
>> checks OK.
>>
>> I also re-compiled the 233 packages listed below
>> with the same setup. I have NOT tested all these
>> packages in any detail. A tar.gz file with the whole /usr/local/lib/R
>> will be on ftp://gifi.stat.ucla.edu on Tuesday. It will NOT include
>> anything from fink (i.e. /sw) or Xfree86 (/usr/X11R6).
>>
>> The problem with tkrplot is that the load command in tcl does not
>> seem to work (while it did work under 10.1). The problem with
>> ROracle, RSQLite, RQuantlib is that they need libraries which
>> I do not have.
>
> For ROracle, what library would that be?
> As we have an Oracle site license at work, maybe I can get the library  
> and give it a try.
>
> -Don
>
> <- snip ->
>
>> ===
>> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
>> Editor: Journal of Multivariate Analysis, Journal of Statistical   
>> Software
>> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
>> phone (310)-825-9550;  fax (310)-206-5658;  email:  
>> deleeuw@stat.ucla.edu
>> homepage: http://gifi.stat.ucla.edu
>> ---------------------------------------------------------------------- 
>> -- -------------------------
>>           No matter where you go, there you are. --- Buckaroo Banzai
>>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>> ---------------------------------------------------------------------- 
>> -- -------------------------
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac@stat.math.ethz.ch
>> http://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac
>
>
> -- 
> -------------------------
> Don MacQueen
> dmacq@ucscalumni.com
> California, USA
> -------------------------
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.c.rougier@durham.ac.uk  Mon Oct  7 18:53:17 2002
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Mon, 7 Oct 2002 19:53:17 +0200 (MET DST)
Subject: Core dump with "parse" (PR#2120)
Message-ID: <200210071753.TAA15549@pubhealth.ku.dk>

Hi everyone,

The following code may not be very sensible, but it generates a core dump.  The same happens in R-1.5.1.

Cheers, Jonathan.

arrow:dma0jcr% R-1.6.0

R : Copyright 2002, The R Development Core Team
Version 1.6.0  (2002-10-01)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> parse(text=deparse(body(plot)))
expression({
    if (is.null(attr(x, "class")) && is.function(x)) {
        if ("ylab" 0names(list(...))) 
            plot.function(x, ...)
        else plot.function(x, ylab = paste(deparse(substitute(x)), 
            "(x)"), ...)
    }
    else UseMethod("plot")
})
Segmentation fault (core dumped)



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cord1@gmx.de  Mon Oct  7 18:56:59 2002
From: cord1@gmx.de (cord1@gmx.de)
Date: Mon, 7 Oct 2002 19:56:59 +0200 (MET DST)
Subject: plot crashes (PR#2121)
Message-ID: <200210071756.TAA15563@pubhealth.ku.dk>

Full_Name: cord eggers
Version: R1.6.0
OS: Windows 2000
Submission from: (NULL) (217.80.133.46)


Whenever i give the plot() command, the programm crashes with

"Unknown software exception" (0xc0000090) 
at address 0x77e7f142

Do You know something about this? 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Mon Oct  7 19:27:24 2002
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Mon, 7 Oct 2002 20:27:24 +0200 (MET DST)
Subject: plot crashes (PR#2121)
Message-ID: <200210071827.UAA15684@pubhealth.ku.dk>

On Mon, 7 Oct 2002 19:56:59 +0200 (MET DST), you wrote in message
<200210071756.TAA15563@pubhealth.ku.dk>:

>Full_Name: cord eggers
>Version: R1.6.0
>OS: Windows 2000
>Submission from: (NULL) (217.80.133.46)
>
>
>Whenever i give the plot() command, the programm crashes with
>
>"Unknown software exception" (0xc0000090) 
>at address 0x77e7f142
>
>Do You know something about this? 

It doesn't happen to me.  Could you try running rgui with the
--vanilla option, and then give an exact sequence of commands that
lead to the crash?

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rpeng@stat.ucla.edu  Mon Oct  7 21:19:22 2002
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Mon, 7 Oct 2002 13:19:22 -0700 (PDT)
Subject: Core dump with "parse" (PR#2120)
In-Reply-To: <200210071753.TAA15549@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.10210071314540.11068-100000@fisher.stat.ucla.edu>

On my GNU/Linux box running 1.6.0, I get

marla:> R --vanilla

R : Copyright 2002, The R Development Core Team
Version 1.6.0  (2002-10-01)

[...]
> parse(text=deparse(body(plot)))
expression({
    if (is.null(attr(x, "class")) && is.function(x)) {
        if ("ylab" 0names(list(...))) 
            plot.function(x, ...)
        else plot.function(x, ylab = paste(deparse(substitute(x)), 
            "(x)"), ...)
    }
    else UseMethod("plot")
})
> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.0              
year     2002             
month    10               
day      01               
language R                


But on one of our OS X servers running R 1.5.1, I get:

galton:> R --vanilla

R : Copyright 2002, The R Development Core Team
Version 1.5.1  (2002-06-17)

[...]
> parse(text = deparse(body(plot)))
expression({
    if (is.null(attr(x, "class")) && is.function(x)) {
Bus error

I can't tell what the problem is though.

-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng

On Mon, 7 Oct 2002, j.c.rougier@durham.ac.uk wrote:

> Hi everyone,
> 
> The following code may not be very sensible, but it generates a core
> dump.  The same happens in R-1.5.1.
> 
> Cheers, Jonathan.
> 
> arrow:dma0jcr% R-1.6.0
> 
> R : Copyright 2002, The R Development Core Team
> Version 1.6.0  (2002-10-01)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> > parse(text=deparse(body(plot)))
> expression({
>     if (is.null(attr(x, "class")) && is.function(x)) {
>         if ("ylab" 0names(list(...))) 
>             plot.function(x, ...)
>         else plot.function(x, ylab = paste(deparse(substitute(x)), 
>             "(x)"), ...)
>     }
>     else UseMethod("plot")
> })
> Segmentation fault (core dumped)
> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = 
>  major = 1
>  minor = 6.0
>  year = 2002
>  month = 10
>  day = 01
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct  7 21:32:03 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 7 Oct 2002 13:32:03 -0700 (PDT)
Subject: Core dump with "parse" (PR#2120)
In-Reply-To: <200210071753.TAA15549@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210071327050.42328-100000@homer19.u.washington.edu>

On Mon, 7 Oct 2002 j.c.rougier@durham.ac.uk wrote:

> Hi everyone,
>
> The following code may not be very sensible, but it generates a core
> dump.  The same happens in R-1.5.1.

It doesn't generate a core dump for me in either version, but it doesn't
work correctly either.

A simpler version is:
> parse(text="a %in% b")
expression(a 0n% b)

It looks like the %i is being used as a printf format string, which might
well cause a core dump.

This isn't happening inside parse, but inside print, since
> parse(text="a %in% b")[[1]]
a %in% b


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct  7 21:55:57 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Oct 2002 22:55:57 +0200
Subject: Core dump with "parse" (PR#2120)
In-Reply-To: <Pine.GSO.4.10.10210071314540.11068-100000@fisher.stat.ucla.edu>
References: <Pine.GSO.4.10.10210071314540.11068-100000@fisher.stat.ucla.edu>
Message-ID: <x2bs66klya.fsf@biostat.ku.dk>

Roger Peng <rpeng@stat.ucla.edu> writes:

> On my GNU/Linux box running 1.6.0, I get
...
> But on one of our OS X servers running R 1.5.1, I get:

The problem is that PrintExpression is using 
 
 Rprintf(CHAR(STRING_ELT(u, i)));

which works right until it needs to print something with % inside,
then Rprintf interprets the string as a format specification, and
expects to find further arguments to handle according to the
conversion specification. Since they are not there, it grabs
whatever is sitting in the relevant place on the stack and beyond
that, all bets are off...

I'll put the fix into r-patched after some testing.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimmy@econostat.co.uk  Tue Oct  8 14:33:39 2002
From: jimmy@econostat.co.uk (jimmy@econostat.co.uk)
Date: Tue, 8 Oct 2002 15:33:39 +0200 (MET DST)
Subject: spec.pgram bug (PR#2123)
Message-ID: <200210081333.PAA25091@pubhealth.ku.dk>

Full_Name: Jimmy Shadbolt
Version: 1.5.1 and 1.6
OS: linux
Submission from: (NULL) (194.217.93.241)


The code for spec.pgram contains the following:

    for (i in 1:ncol(x)) {
        for (j in 1:ncol(x)) {
            pgram[, i, j] <- xfft[, i] * Conj(xfft[, j])/(N*xfreq)
        }
    }
    ## value at zero is invalid as mean has been removed, so interpolate
    pgram[1, i, j] <- 0.5*(pgram[2, i, j] + pgram[N, i, j])

Surely the last line should be inside the loops (and apply to all spectra, not
just the last)?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Oct  9 17:54:03 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Wed, 9 Oct 2002 18:54:03 +0200 (MET DST)
Subject: problems with missing values created by conversion using as.matri (PR#2130)
Message-ID: <200210091654.SAA07998@pubhealth.ku.dk>

> version
         _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    6.0                 
year     2002                
month    10                  
day      01                  
language R                   

------------------------------

Create a very simple data frame containing an factor and a character vector
each containing a missing value:

	> x <- data.frame( a=c("",NA), b=c(1,NA) ) 

Conversion to a matrix treats the two missing values differently:

	> as.matrix(x)
	  a  b   
	1 "" " 1"
	2 NA "NA"

The missing value in the factor variable has been correctly converted to a
missing value, while the missing value in the numeric vector has been
incorrectly converted to a string "NA", which is not recognized as a missing
value:

	>  is.na(as.matrix(x))
	      a     b
	1 FALSE FALSE
	2  TRUE FALSE

This turned up because I was using lapply to check for rows containing only
blank or missing values:

	> all.blank <- function(x) all( is.na(x) | (x <= " ") )
	> blanks <- apply(x, 1, all.blank)
	> blanks
	    1     2 
	FALSE FALSE 

This should have yielded

	> blanks
	    1     2 
	FALSE TRUE


BTW direct conversion using as.character doesn't show any problems when
applied to the individual columns:

	> as.character(x$a)
	[1] "" NA
	> as.character(x$b)
	[1] "1" NA 

	
I think the problem is that as.matrix.data.frame is using format() to
convert things to characters, which is resulting in a "NA" string and not a
missing value.  

Why isn't it using as.character() for this?

For completeness here's the patch to make this change, but I have not
explored what other side effects this might have.

*** R-1.6.0/src/library/base/R/dataframe.R      Thu Aug 29 03:41:42 2002
--- R-1.6.0-GRW//src/library/base/R/dataframe.R Wed Oct  9 12:29:11 2002
***************
*** 931,937 ****
            if (is.character(X[[j]]))
                next
            xj <- X[[j]]
!           X[[j]] <- if(length(levels(xj))) as.vector(xj) else format(xj)
        }
      }
      X <- unlist(X, recursive = FALSE, use.names = FALSE)
--- 931,937 ----
            if (is.character(X[[j]]))
                next
            xj <- X[[j]]
!           X[[j]] <- if(length(levels(xj))) as.vector(xj) else
as.character(xj)
        }
      }
      X <- unlist(X, recursive = FALSE, use.names = FALSE)



-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From voegelas@users.sourceforge.net  Wed Oct  9 19:13:54 2002
From: voegelas@users.sourceforge.net (voegelas@users.sourceforge.net)
Date: Wed, 9 Oct 2002 20:13:54 +0200 (MET DST)
Subject: help-links.sh doesn't make sure that packages.html is writable (PR#2131)
Message-ID: <200210091813.UAA08317@pubhealth.ku.dk>

Full_Name: Andreas Voegele
Version: 1.6.0
OS: GNU/Linux
Submission from: (NULL) (136.206.1.18)


Here's a minor problem:

help-links.sh copies packages-head.html to ~/.R/doc/html/packages.html.
Afterwards the script tries to add more html code to the copy.
But if packages-head.html is not writable the copy won't be writable and
as a consequence the script cannot add its html code.

The following patch ensures that packages.html is writable:

diff -u -r R-1.6.0.orig/share/sh/help-links.sh R-1.6.0/share/sh/help-links.sh
--- R-1.6.0.orig/share/sh/help-links.sh 2002-07-30 18:42:56.000000000 +0200
+++ R-1.6.0/share/sh/help-links.sh      2002-10-09 19:10:45.000000000 +0200
@@ -42,6 +42,7 @@
 rm -f ${PKGLIST}
 rm -f ${SEARCHINDEX}
 cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}
+chmod u+w ${PKGLIST}

 get_unique () {
   if test -r ${1}; then



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Oct  9 22:21:11 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 9 Oct 2002 14:21:11 -0700 (PDT)
Subject: problems with missing values created by conversion using as.matri
 (PR#2130)
In-Reply-To: <200210091654.SAA07998@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210091418100.64022-100000@homer13.u.washington.edu>

On Wed, 9 Oct 2002 gregory_r_warnes@groton.pfizer.com wrote:
> ------------------------------
>
> Create a very simple data frame containing an factor and a character vector
> each containing a missing value:
>
> 	> x <- data.frame( a=c("",NA), b=c(1,NA) )
>
> Conversion to a matrix treats the two missing values differently:
>

Yes, as.matrix.data.frame() uses format() to make character strings, and
it needs to check for NA as well

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Oct  9 22:21:58 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Wed, 9 Oct 2002 23:21:58 +0200 (MET DST)
Subject: problems with missing values created by conversion using as.matri (PR#2133)
Message-ID: <200210092121.XAA08874@pubhealth.ku.dk>

On Wed, 9 Oct 2002 gregory_r_warnes@groton.pfizer.com wrote:
> ------------------------------
>
> Create a very simple data frame containing an factor and a character vector
> each containing a missing value:
>
> 	> x <- data.frame( a=c("",NA), b=c(1,NA) )
>
> Conversion to a matrix treats the two missing values differently:
>

Yes, as.matrix.data.frame() uses format() to make character strings, and
it needs to check for NA as well

	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sta6ajb@leeds.ac.uk  Thu Oct 10 13:05:50 2002
From: sta6ajb@leeds.ac.uk (sta6ajb@leeds.ac.uk)
Date: Thu, 10 Oct 2002 14:05:50 +0200 (MET DST)
Subject: Documentation for randu() (PR#2141)
Message-ID: <200210101205.OAA15829@pubhealth.ku.dk>

Full_Name: Andrew J. Baczkowski
Version: 1.1.1, 1.5.0
OS: NT, unix
Submission from: (NULL) (129.11.159.161)


Help documentation for randu() has incorrect R code in Example.

Should replace line 4

seed <<- ((2^16) + 3) * seed)

by

seed <<- ((2^16) + 3) * seed) %% (2^31)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 10 14:34:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 10 Oct 2002 15:34:35 +0200 (MET DST)
Subject: Documentation for randu() (PR#2141)
Message-ID: <200210101334.PAA17342@pubhealth.ku.dk>

That's what the .Rd file says, but % needs to be escaped these days
for it to appear in the converted help.

Fixed for 1.6.1 (and please don't report on obselete versions).

On Thu, 10 Oct 2002 sta6ajb@leeds.ac.uk wrote:

> Full_Name: Andrew J. Baczkowski
> Version: 1.1.1, 1.5.0
> OS: NT, unix
> Submission from: (NULL) (129.11.159.161)
>
>
> Help documentation for randu() has incorrect R code in Example.
>
> Should replace line 4
>
> seed <<- ((2^16) + 3) * seed)
>
> by
>
> seed <<- ((2^16) + 3) * seed) %% (2^31)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From c.declercq@orsnpdc.org  Thu Oct 10 15:02:00 2002
From: c.declercq@orsnpdc.org (c.declercq@orsnpdc.org)
Date: Thu, 10 Oct 2002 16:02:00 +0200 (MET DST)
Subject: Sweave (PR#2142)
Message-ID: <200210101402.QAA17764@pubhealth.ku.dk>

In the 'RWeaveLatexSetup' function in the 'tools' package in R 1.6.0 , the
code below does not work (pdflatex can't find 'Sweave.sty'):

if (stylepath)
        styfile <- file.path(R.home(), "share", "texmf", "Sweave")
    else styfile <- "Sweave"

In R 1.5.1, that was:

if(stylepath)
        styfile <- file.path(.path.package("tools"),
                             "Sweave", "Sweave")
else
        styfile <- "Sweave"

and that was working.


Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status =
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
 .GlobalEnv, package:tools, package:rodbc, package:ctest, Autoloads,
package:base

--
Christophe DECLERCQ, MD
Observatoire Rgional de la Sant Nord-Pas-de-Calais
13, rue Faidherbe 59046 LILLE Cedex FRANCE
Phone +33 3 20 15 49 24
Fax   +33 3 20 55 92 30
E-mail c.declercq@orsnpdc.org



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 10 16:10:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 10 Oct 2002 16:10:34 +0100 (BST)
Subject: R-1.6.0-beta compiling on Solaris with gcc-3.2
In-Reply-To: <15744.49422.503549.192941@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0210101610040.8679-100000@gannet.stats>

On Thu, 12 Sep 2002, Kurt Hornik wrote:

> >>>>> Uwe Ligges writes:
>
> > Compiling R-1.6.0-beta (or any other) with gcc-3.2 just with
> >  ./configure
> >  make
>
> >  ... works - great!
>
>
> > But there are these annoying warning messages after *each* call to any
> > of the gcc tools, as in:
>
> >  gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
> >    -DHAVE_CONFIG_H   -g -O2 -c phyper.c -o phyper.o
> >  cc1: warning: changing search order for system directory
> >    "/usr/local/include"
> >  cc1: warning:   as it has already been specified as a non-system
> >    directory
>
> > I am not really sure if there is something special with our system?
> > If not, is it possible to solve that in the configure script for a
> > later version of R?
>
> Brian had already raised this some time ago---Brian, is there an obvious
> fix?  If not, then we need a configure check for GCC version 3.2 or
> better and inititialize CPPFLAGS accordingly?

That's the best I know of.  For now, set CPPFLAGS to be empty.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Oct 10 16:24:04 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 10 Oct 2002 17:24:04 +0200
Subject: R-1.6.0-beta compiling on Solaris with gcc-3.2
In-Reply-To: <Pine.LNX.4.31.0210101610040.8679-100000@gannet.stats>
References: <15744.49422.503549.192941@mithrandir.hornik.net>
 <Pine.LNX.4.31.0210101610040.8679-100000@gannet.stats>
Message-ID: <15781.39828.274422.681508@mithrandir.hornik.net>

>>>>> ripley  writes:

> On Thu, 12 Sep 2002, Kurt Hornik wrote:
>> >>>>> Uwe Ligges writes:
>> 
>> > Compiling R-1.6.0-beta (or any other) with gcc-3.2 just with
>> >  ./configure
>> >  make
>> 
>> >  ... works - great!
>> 
>> 
>> > But there are these annoying warning messages after *each* call to any
>> > of the gcc tools, as in:
>> 
>> >  gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
>> >    -DHAVE_CONFIG_H   -g -O2 -c phyper.c -o phyper.o
>> >  cc1: warning: changing search order for system directory
>> >    "/usr/local/include"
>> >  cc1: warning:   as it has already been specified as a non-system
>> >    directory
>> 
>> > I am not really sure if there is something special with our system?
>> > If not, is it possible to solve that in the configure script for a
>> > later version of R?
>> 
>> Brian had already raised this some time ago---Brian, is there an obvious
>> fix?  If not, then we need a configure check for GCC version 3.2 or
>> better and inititialize CPPFLAGS accordingly?

> That's the best I know of.  For now, set CPPFLAGS to be empty.

Ok, I'll try to do something along these lines then.

I assume that one could configure gcc 3.2 *not* to use
/usr/local/include so I will need to find out whether the dir is in the
default search path?

Jan, Luke: same for gcc 3.2 on Darwin with Fink and /sw?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Oct 10 16:50:02 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 10 Oct 2002 08:50:02 -0700
Subject: R-1.6.0-beta compiling on Solaris with gcc-3.2
In-Reply-To: <15781.39828.274422.681508@mithrandir.hornik.net>
Message-ID: <F08AE8DC-DC67-11D6-A3DB-000393860F3C@stat.ucla.edu>

Yes,  same messages here (starting at 3.1). It makes more sense
to me not to put /usr/local/include in R's CPPFLAGS than to tinker
with gcc.

On Thursday, October 10, 2002, at 08:24 AM, Kurt Hornik wrote:

>>>>>> ripley  writes:
>
>> On Thu, 12 Sep 2002, Kurt Hornik wrote:
>>>>>>>> Uwe Ligges writes:
>>>
>>>> Compiling R-1.6.0-beta (or any other) with gcc-3.2 just with
>>>>  ./configure
>>>>  make
>>>
>>>>  ... works - great!
>>>
>>>
>>>> But there are these annoying warning messages after *each* call to  
>>>> any
>>>> of the gcc tools, as in:
>>>
>>>>  gcc -I. -I../../src/include -I../../src/include  
>>>> -I/usr/local/include
>>>>    -DHAVE_CONFIG_H   -g -O2 -c phyper.c -o phyper.o
>>>>  cc1: warning: changing search order for system directory
>>>>    "/usr/local/include"
>>>>  cc1: warning:   as it has already been specified as a non-system
>>>>    directory
>>>
>>>> I am not really sure if there is something special with our system?
>>>> If not, is it possible to solve that in the configure script for a
>>>> later version of R?
>>>
>>> Brian had already raised this some time ago---Brian, is there an  
>>> obvious
>>> fix?  If not, then we need a configure check for GCC version 3.2 or
>>> better and inititialize CPPFLAGS accordingly?
>
>> That's the best I know of.  For now, set CPPFLAGS to be empty.
>
> Ok, I'll try to do something along these lines then.
>
> I assume that one could configure gcc 3.2 *not* to use
> /usr/local/include so I will need to find out whether the dir is in the
> default search path?
>
> Jan, Luke: same for gcc 3.2 on Darwin with Fink and /sw?
>
> -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From s.tomlinson@cancer.org.uk  Thu Oct 10 17:34:31 2002
From: s.tomlinson@cancer.org.uk (Simon Tomlinson)
Date: Thu, 10 Oct 2002 17:34:31 +0100
Subject: R DCOM VC6 example
Message-ID: <5.0.0.25.1.20021010173133.01f39350@magic.lif.icnet.uk>

Hi
Does anyone know if there is an example of  the R DCOM server being used in 
a Visual C++ project?

Thanks

Simon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Oct 11 08:57:21 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Fri, 11 Oct 2002 09:57:21 +0200
Subject: Sweave (PR#2142)
In-Reply-To: <200210101402.QAA17764@pubhealth.ku.dk>
References: <200210101402.QAA17764@pubhealth.ku.dk>
Message-ID: <15782.33889.962443.84196@galadriel.ci.tuwien.ac.at>


  > In the 'RWeaveLatexSetup' function in the 'tools' package in R 1.6.0 , th=
  > e
  > code below does not work (pdflatex can't find 'Sweave.sty'):

  > if (stylepath)
  >         styfile <- file.path(R.home(), "share", "texmf", "Sweave")
  >     else styfile <- "Sweave"

  > In R 1.5.1, that was:

  > if(stylepath)
  >         styfile <- file.path(.path.package("tools"),
  >                              "Sweave", "Sweave")
  > else
  >         styfile <- "Sweave"

  > and that was working.

The path is correct (I want to have Sweave.sty in
$R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
does not get installed properly when builddir != srcdir. This has been
fixed in both the devel and patched version of R.

As a quick fix for 1.6.0: please copy Sweave.sty manually to
$R_HOME/share/texmf.

Thanks a lot for the bug report,
Fritz

-- 
-------------------------------------------------------------------
                        Friedrich Leisch 
Institut fr Statistik                     Tel: (+43 1) 58801 10715
Technische Universitt Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstrae 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
-------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From c.declercq@orsnpdc.org  Fri Oct 11 15:35:38 2002
From: c.declercq@orsnpdc.org (Christophe Declercq)
Date: Fri, 11 Oct 2002 15:35:38 +0100
Subject: Sweave (PR#2142)
In-Reply-To: <15782.33889.962443.84196@galadriel.ci.tuwien.ac.at>
Message-ID: <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>

Thanks, Fritz, for your answer.

> De : Friedrich Leisch [mailto:leisch@galadriel.ci.tuwien.ac.at]
>[...]
> The path is correct (I want to have Sweave.sty in
> $R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
> does not get installed properly when builddir != srcdir. This has been
> fixed in both the devel and patched version of R.

Yes, but  'file.path(R.home(), "share", "texmf", "Sweave")' on my MS-Windows
box gives "C:\\R\\RW1060/share/texmf/Sweave".

With that, you get '\usepackage{C:RRW1060/share/texmf/Sweave}' in the tex
file. The problem seems to be with the 'R.home()' output on MS-Windows.

'file.path(.path.package("tools"), "Sweave", "Sweave")' was giving
"C:/R/RW1060/library/tools/Sweave/Sweave" which is OK for pdflatex.

Anyway, thanks a lot for Sweave which is really great (for the moment, as I
need it working, I have just put back the old stylepath code in tools).

Christophe
--
Christophe DECLERCQ, MD
Observatoire Rgional de la Sant Nord-Pas-de-Calais
13, rue Faidherbe 59046 LILLE Cedex FRANCE
Phone +33 3 20 15 49 24
Fax   +33 3 20 55 92 30
E-mail c.declercq@orsnpdc.org

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Oct 11 15:06:56 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 11 Oct 2002 16:06:56 +0200 (MET DST)
Subject: Sweave (PR#2142)
Message-ID: <200210111406.QAA28115@pubhealth.ku.dk>

On Fri, 11 Oct 2002, Christophe Declercq wrote:

> Thanks, Fritz, for your answer.
>
> > De : Friedrich Leisch [mailto:leisch@galadriel.ci.tuwien.ac.at]
> >[...]
> > The path is correct (I want to have Sweave.sty in
> > $R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
> > does not get installed properly when builddir != srcdir. This has been
> > fixed in both the devel and patched version of R.
>
> Yes, but  'file.path(R.home(), "share", "texmf", "Sweave")' on my MS-Windows
> box gives "C:\\R\\RW1060/share/texmf/Sweave".
>
> With that, you get '\usepackage{C:RRW1060/share/texmf/Sweave}' in the tex
> file. The problem seems to be with the 'R.home()' output on MS-Windows.

Nope, R.home is correct.  The problem is that Sweave is not escaping \'s
(nor spaces, although I believe they will not occur in R.home()'s output).
Some Windows applications insist on \, but Windows' versions of TeX seem
to insist on /, so applications calling TeX need to convert the path to
Unix style.

Also, Sweave.sty was not installed under Windows in 1.6.0 under any
circumstances.

>
> 'file.path(.path.package("tools"), "Sweave", "Sweave")' was giving
> "C:/R/RW1060/library/tools/Sweave/Sweave" which is OK for pdflatex.
>
> Anyway, thanks a lot for Sweave which is really great (for the moment, as I
> need it working, I have just put back the old stylepath code in tools).
>
> Christophe
> --
> Christophe DECLERCQ, MD
> Observatoire Rgional de la Sant Nord-Pas-de-Calais
> 13, rue Faidherbe 59046 LILLE Cedex FRANCE
> Phone +33 3 20 15 49 24
> Fax   +33 3 20 55 92 30
> E-mail c.declercq@orsnpdc.org
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Oct 11 15:52:13 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 11 Oct 2002 09:52:13 -0500
Subject: Sweave (PR#2142)
Message-ID: <E18019B-0000NW-00@sonny.eddelbuettel.com>


> Nope, R.home is correct.  The problem is that Sweave is not escaping \'s
> (nor spaces, although I believe they will not occur in R.home()'s output).
> Some Windows applications insist on \, but Windows' versions of TeX seem
> to insist on /, so applications calling TeX need to convert the path to
> Unix style.

I got bitten by that under Cygwin with R in the default c:\Program Files\R.
Cygwin's LaTeX (i.e. tetex) then breaks. A location without spaces in the
path works fine.   

Dirk

-- 
According to the latest figures, 43% of all signatures are totally worthless.   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Fri Oct 11 19:30:00 2002
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Fri, 11 Oct 2002 20:30:00 +0200
Subject: growing process size in simulation
Message-ID: <3DA718A8.79391A9E@ci.tuwien.ac.at>

I came across this in a simulation I ran under 1.6.0: If I do something
like

R> x <- rnorm(10)
R> rval <- NULL
R> for(i in 1:100000) rval <- t.test(x)$p.value

then the process size remains at about 14M under 1.5.1, but it seems to
be almost linearly growing up to more than 100M under 1.6.0.

I know that the above simulation is nonsense, but it was the simplest I
could come up with to reproduce the behaviour. It doesn't depend on
t.test, if I use wilcox.test(x)$p.value the same happens...

I could reproduce this behaviour under Linux and Solaris, the exact
versions are given below.
Z

---
the problem exists on

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.0              
year     2002             
month    10               
day      01               
language R                

and

platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    1                   
minor    6.0                 
year     2002                
month    10                  
day      01                  
language R                   

but not on

platform i386-pc-linux-gnu
arch     i386             
os       linux-gnu        
system   i386, linux-gnu  
status                    
major    1                
minor    5.1              
year     2002             
month    06               
day      17               
language R
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.c.rougier@durham.ac.uk  Fri Oct 11 19:38:44 2002
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Fri, 11 Oct 2002 20:38:44 +0200 (MET DST)
Subject: Odd outcome of attr with environments (PR#2148)
Message-ID: <200210111838.UAA29229@pubhealth.ku.dk>

Hi everyone,

I think the following error is slightly odd:

> fred <- new.env()
> happy <- function() fred
> happy()
<environment: 0x8a425b8>
> attr(happy(), "foo") <- 1:10
Error: invalid (NULL) left side of assignment

But naturally this works

> attr(fred, "foo") <- 1:10
> fred
<environment: 0x8a425b8>
attr(,"foo")
 [1]  1  2  3  4  5  6  7  8  9 10

I would have thought that "fred" and "happy()" were synonymous, so I
was surprised that I could not attach an attribute to the environment
using "happy()".  Of course in practice I can get round this by doing

> sad <- happy()
> attr(sad, "foo") <- 5:1
> sad
<environment: 0x8a425b8>
attr(,"foo")
[1] 5 4 3 2 1
> happy()
<environment: 0x8a425b8>
attr(,"foo")
[1] 5 4 3 2 1

but I wondered what was going on.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Oct 11 20:23:14 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 11 Oct 2002 12:23:14 -0700 (PDT)
Subject: Odd outcome of attr with environments (PR#2148)
In-Reply-To: <200210111838.UAA29229@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210111220500.64826-100000@homer30.u.washington.edu>

On Fri, 11 Oct 2002 j.c.rougier@durham.ac.uk wrote:

> Hi everyone,
>
> I think the following error is slightly odd:
>
> > fred <- new.env()
> > happy <- function() fred
> > happy()
> <environment: 0x8a425b8>
> > attr(happy(), "foo") <- 1:10
> Error: invalid (NULL) left side of assignment
>
It's nothing to do with environments.  happy() is not an variable, so you
can't modify it: eg

R> f<-function(){ 42}
R> f()<-1
Error: invalid (NULL) left side of assignment
R> attr(f(),"foo")<-1
Error: invalid (NULL) left side of assignment
R> f()[1]<-1
Error: invalid (NULL) left side of assignment


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 11 20:31:21 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Oct 2002 21:31:21 +0200
Subject: growing process size in simulation
In-Reply-To: <3DA718A8.79391A9E@ci.tuwien.ac.at>
References: <3DA718A8.79391A9E@ci.tuwien.ac.at>
Message-ID: <x2r8ewwz5i.fsf@biostat.ku.dk>

Achim Zeileis <zeileis@ci.tuwien.ac.at> writes:

> I came across this in a simulation I ran under 1.6.0: If I do something
> like
> 
> R> x <- rnorm(10)
> R> rval <- NULL
> R> for(i in 1:100000) rval <- t.test(x)$p.value
> 
> then the process size remains at about 14M under 1.5.1, but it seems to
> be almost linearly growing up to more than 100M under 1.6.0.
> 
> I know that the above simulation is nonsense, but it was the simplest I
> could come up with to reproduce the behaviour. It doesn't depend on
> t.test, if I use wilcox.test(x)$p.value the same happens...

Argh. Confirmed. One interesting clue is that R itself doesn't seem to
know about this:

for(i in 1:50000) {
   rval <- t.test(x)$p.value 
   if (i %% 10000 == 0) print(gc())
}

         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0
         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0
         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0
         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0
         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0

..but the memory footprint is still growing.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.uiowa.edu  Sat Oct 12 02:57:23 2002
From: luke@stat.uiowa.edu (Luke Tierney)
Date: Fri, 11 Oct 2002 20:57:23 -0500 (CDT)
Subject: growing process size in simulation
In-Reply-To: <x2r8ewwz5i.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0210112012180.1901-100000@nokomis2.stat.umn.edu>

On 11 Oct 2002, Peter Dalgaard BSA wrote:

> Achim Zeileis <zeileis@ci.tuwien.ac.at> writes:
> 
> > I came across this in a simulation I ran under 1.6.0: If I do something
> > like
> > 
> > R> x <- rnorm(10)
> > R> rval <- NULL
> > R> for(i in 1:100000) rval <- t.test(x)$p.value
> > 
> > then the process size remains at about 14M under 1.5.1, but it seems to
> > be almost linearly growing up to more than 100M under 1.6.0.
> > 
> > I know that the above simulation is nonsense, but it was the simplest I
> > could come up with to reproduce the behaviour. It doesn't depend on
> > t.test, if I use wilcox.test(x)$p.value the same happens...
> 
> Argh. Confirmed. One interesting clue is that R itself doesn't seem to
> know about this:
> 
> for(i in 1:50000) {
>    rval <- t.test(x)$p.value 
>    if (i %% 10000 == 0) print(gc())
> }
> 
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
> 
> ...but the memory footprint is still growing.
> 
> 

It looks to me like something in deparse (which gets called in
t.test.default) may be the culprit:

   for(i in 1:100000) rval <- deparse("x")

exhibits the same behavior.

In running under gdb it looks like deparse("x") results in the call
sequence

deparse1WithCutoff->deparse2->deparse2buff->print2buff->R_AllocStringBuffer

and malloc is called in R_AllocStringBuffer to create the buffer.  The
allocation is stored into a local structure variable in
deparse1WithCutoff and I think is not being free'd before
deparse1WithCutoff exits.

luke

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Oct 12 11:04:23 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Oct 2002 12:04:23 +0200
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.44.0210112012180.1901-100000@nokomis2.stat.umn.edu>
References: <Pine.LNX.4.44.0210112012180.1901-100000@nokomis2.stat.umn.edu>
Message-ID: <x2elawvuqg.fsf@biostat.ku.dk>

Luke Tierney <luke@stat.uiowa.edu> writes:

> It looks to me like something in deparse (which gets called in
> t.test.default) may be the culprit:
> 
>    for(i in 1:100000) rval <- deparse("x")
> 
> exhibits the same behavior.
> 
> In running under gdb it looks like deparse("x") results in the call
> sequence
> 
> deparse1WithCutoff->deparse2->deparse2buff->print2buff->R_AllocStringBuffer
> 
> and malloc is called in R_AllocStringBuffer to create the buffer.  The
> allocation is stored into a local structure variable in
> deparse1WithCutoff and I think is not being free'd before
> deparse1WithCutoff exits.

Thanks for looking into this, Luke. Yes, I agree. Specifically, the
issue seems to be that we used to work off a static variable "buff"
and use realloc on that inside AllocBuffer if it was non-null. Now
we've put the variable inside a structure "buf->data" and still trying
to use the realloc'ing construct, but since "buf" (aka localData) is a
local variable, it gets NULL'ed every time deparse1WithCutoff() is
called ---> deparse1WithCutoff needs to clean up on the way out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.uiowa.edu  Sat Oct 12 15:49:21 2002
From: luke@stat.uiowa.edu (Luke Tierney)
Date: Sat, 12 Oct 2002 09:49:21 -0500 (CDT)
Subject: growing process size in simulation
In-Reply-To: <x2elawvuqg.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0210120745400.1901-100000@nokomis2.stat.umn.edu>

On 12 Oct 2002, Peter Dalgaard BSA wrote:

> Luke Tierney <luke@stat.uiowa.edu> writes:
> 
> > It looks to me like something in deparse (which gets called in
> > t.test.default) may be the culprit:
> > 
> >    for(i in 1:100000) rval <- deparse("x")
> > 
> > exhibits the same behavior.
> > 
> > In running under gdb it looks like deparse("x") results in the call
> > sequence
> > 
> > deparse1WithCutoff->deparse2->deparse2buff->print2buff->R_AllocStringBuffer
> > 
> > and malloc is called in R_AllocStringBuffer to create the buffer.  The
> > allocation is stored into a local structure variable in
> > deparse1WithCutoff and I think is not being free'd before
> > deparse1WithCutoff exits.
> 
> Thanks for looking into this, Luke. Yes, I agree. Specifically, the
> issue seems to be that we used to work off a static variable "buff"
> and use realloc on that inside AllocBuffer if it was non-null. Now
> we've put the variable inside a structure "buf->data" and still trying
> to use the realloc'ing construct, but since "buf" (aka localData) is a
> local variable, it gets NULL'ed every time deparse1WithCutoff() is
> called ---> deparse1WithCutoff needs to clean up on the way out.
> 

Right.  Unfortunately the issue goes beyond deparse.c.
R_AllocStringBuffer is also called in printutils.c, saveload.c,
scan.c.  I'm not sure about printutils.c, but the others look like
they have the same issue.  R_LoadFromFile in saveload.c looks like a
particular pain to fix; perhaps moving the buffer allocation up one
call level would work.  I can try to fix this later next week unless
someone else gets there first.

I wonder if there is something we could add to the QA tools that could
have picked this up.

luke


-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Oct 12 16:15:01 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Oct 2002 17:15:01 +0200
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.44.0210120745400.1901-100000@nokomis2.stat.umn.edu>
References: <Pine.LNX.4.44.0210120745400.1901-100000@nokomis2.stat.umn.edu>
Message-ID: <x2adljwux6.fsf@biostat.ku.dk>

Luke Tierney <luke@stat.uiowa.edu> writes:

> > Thanks for looking into this, Luke. Yes, I agree. Specifically, the
> > issue seems to be that we used to work off a static variable "buff"
> > and use realloc on that inside AllocBuffer if it was non-null. Now
> > we've put the variable inside a structure "buf->data" and still trying
> > to use the realloc'ing construct, but since "buf" (aka localData) is a
> > local variable, it gets NULL'ed every time deparse1WithCutoff() is
> > called ---> deparse1WithCutoff needs to clean up on the way out.
> > 
> 
> Right.  Unfortunately the issue goes beyond deparse.c.
> R_AllocStringBuffer is also called in printutils.c, saveload.c,
> scan.c.  I'm not sure about printutils.c, but the others look like
> they have the same issue.  R_LoadFromFile in saveload.c looks like a
> particular pain to fix; perhaps moving the buffer allocation up one
> call level would work.  I can try to fix this later next week unless
> someone else gets there first.
> 
> I wonder if there is something we could add to the QA tools that could
> have picked this up.

I've fixed the one in deparse.c now. I had a suspicion that there
might be other cases, so I tried to abstract it in the same spirit as
R_AllocStringBuffer. There's now an R_FreeStringBuffer, and I think a
straightforward rule for invoking it: The function that allocates the
pointer for the storage must call R_FreeStringBuffer before returning.

R_LoadFromFile has more than a dozen exit points, so you get to say
"R_FreeStringBuffer(data.buffer);" quite a few times, but I don't
think the pain extends beyond that.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Oct 12 20:45:04 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 12 Oct 2002 12:45:04 -0700
Subject: tkrplot
Message-ID: <1AB94D32-DE1B-11D6-A072-000393860F3C@stat.ucla.edu>

The package tkrplot now works in OS X (Jaguar). The
core of the problem is that the load function in tcl does not accept
bundles, but needs dynamic libraries (I verfied this using the
native version of tclsh and Wish). But the config files in
the tkrplot package (as in all packages) build bundles, not
libraries. Thus I said in the src directorry of the tkrplot package

gcc -dynamiclib -flat_namespace -undefined suppress -install_name  
/usr/local/lib/R/library/tkrplot/libs/tkrplot.dylib \\
	-o tkrplot.dylib -L/usr/local/lib/R/bin -lR -L/sw/lib -ltcl -ltk  
-L/usr/X11R6/lib -lX11 tcltkimg.o

and I changed the R code in tkrplot so that it uses .dylib as the
file extension.

It is still mysterious to me why it did work, using bundles, in
OS X 10.1, but, hey, what's life without a little mystery.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mschwartz@medanalytics.com  Sat Oct 12 21:46:20 2002
From: mschwartz@medanalytics.com (Marc Schwartz)
Date: Sat, 12 Oct 2002 15:46:20 -0500
Subject: [R] barplot x axis
In-Reply-To: <1034434947.3da839830f56b@webmail.bcmg.com.br>
Message-ID: <001301c27230$6c97f590$0201a8c0@MARC>

> -----Original Message-----
> Dear Schwartz and Pausas,
> 
> Thanks for your messages.

You are welcome.

> I was referring to the axis line and its tick marks.
> 
> If you write barplot(table(c(1,2,2,3,3,3,4,4,5))) in R150 and in R160
you will
> have different plots. The last one will not display the x axis line
and tick
> marks, but only x axis labels, isn't it?
> 
> In this case "axis(1, at = mp, labels = 1:5)" solves the problem.
> 
> Best regards,
> 
> Antonio Olinto

Antonio,

It turns out that the change in behavior, which I was able to duplicate
by re-installing V1.5.1 on my system, is the result in the change in
coding in the axis() function internal C code (do_axis) in V.1.6.0 and
not in barplot().  The code in barplot() did not change either in
content or in the default argument values.

If you review the C do_axis code in the V1.5.1 plot.c, which is the C
source code for many of the plotting functions, you will find that the
author overrides the passed "lty" argument.  The author has a comment in
the C code as follows:

  /* I can't think of a good reason to allow axes with a non-solid
line-type,
     * so I override any value the user may have specified.
     * This may need to be revisited, but this should
     * cover 99.99% of the cases. */

In barplot(), the following code is called to draw the label axis (x
axis when horiz = FALSE):

axis(if (horiz) 
                2
            else 1, at = at.l, labels = names.arg, lty = 0, cex.axis =
cex.names, 
                ...)

Note that the 'lty' argument is specified as "0", which should be
"blank" or no line.

However, the V1.5.x internal C code in plot.c overrides this value with
"solid" as per the author's comments above. Thus in V.1.5.x, you get a
solid line on the x axis.

In V.1.6.0, there was a change in axis() to allow for the user
specification of "lty", "lwd" and "col" line parameters as arguments to
axis().  

The V1.6.0 internal C code for do_axis was changed to facilitate this
and therefore the axis call in V.1.6.0 barplot() as above now results in
no line being drawn, since the "lty = 0" (blank) argument in not
overridden in the internal C code.

Hence the (perhaps unintended) change in the default behavior in
barplot() in V.1.6.0.

It took me a while to track this down and finally isolated it to the
axis() function change in 1.6.0.

I am also copying this reply to r-devel, more as an FYI, since my guess
is that other functions, either R standard functions or community based
functions, may have their default behavior altered as well.

Marc Schwartz



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Oct 12 21:46:43 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 12 Oct 2002 13:46:43 -0700
Subject: XML package
Message-ID: <B754D275-DE23-11D6-A072-000393860F3C@stat.ucla.edu>

There are some problems with XML under OS X, nothing serious,
but manual intervention is required.

1. For some reason the package has problems matching up the
proper include and lib files for xml or xml2. If I install a fresh
libxml2 and point the environmental variables to it, it still
complains about mismatched header and lib files,
which suggests, perhaps, that the test in configure uses something  
system
specific. It works if I point explicitly to the include files for xml1.
Both xml1 and xml2 are in /sw, because they come from fink. Maybe
use xmlConf.sh or xml2Conf.sh

2. xmlParserError is defined in libxml, but Utils.o tried to override
it with a new definition. That does not work in OS X, unless one
specifies explicitly that that is what one wants. Adding "-Xlinker
-m" to the link of XML.so indicates we need the first definition we
come across, which is the one in Utils.o in this case. And that is
what is intended.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Oct 12 23:46:11 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 12 Oct 2002 15:46:11 -0700
Subject: RXLisp
Message-ID: <678BE2C0-DE34-11D6-8638-000393860F3C@stat.ucla.edu>

So far, I had made RXLisp by putting all foo.o from XLISP-STAT in
an archive, and linking that into RXLisp.so. I have gotten somewhat
further in using dynamic libraries. Here is what I now do.

in XLS
1. Copy xlisp modifications from RXLisp
2. configure --host=powerpc-apple-darwin6.2
3. make libxlisp.so CC="gcc -fno-common -L/sw/lib -I/sw/include"
4. gcc -dynamiclib -flat_namespace -undefined suppress \\
  	-install_name /usr/local/lib/libxlisp.dylib -o libxlisp.dylib *.o \\
	 -L/usr/X11R6/lib -lX11 -L/sw/lib -ldl -lm
  5. Copy libxlisp.dylib to /usr/local/lib

  In RXLisp/src
  1  make CC="gcc -I/usr/X11R6/include -fno-common"
  2. gcc -dynamiclib -flat_namespace -undefined suppress \\
  	-install_name /usr/local/lib/libRXLispConverters.dylib \\
	-L/sw/lib -L/usr/local/lib -o libRXLispConverters.dylib Converters.o
  3. Copy libRXLispConverters.dylib  to /usr/local/lib

  Then R CMD INSTALL RXLisp

Now I can do XLisp from R, but not everything (no graphics, for
example -- gives a segmentation error) yet. Haven't looked in the other  
direction,
which does not interest me much anyway.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sun Oct 13 03:29:52 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 12 Oct 2002 19:29:52 -0700
Subject: RXLisp, works one way on Jaguar
Message-ID: <A728B4FA-DE53-11D6-8638-000393860F3C@stat.ucla.edu>

I am copying to r-devel, because RXLisp is a reasonably
complicated package that uses both dylibs and bundles.
I am pleased to say that XLisp from R now works on Jaguar, complete
with graphics (these did not work before, because I was
actually running an old version of XLISP-STAT -- sic transit gloria
mundi).

The other way around is still trouble: I get

 > (load "inXLisp")
; loading inXLisp.lsp
Error: dlcompat: unable to find symbol "Rmodule__init" in  
"/usr/local/lib/R/library/RXLisp/libs/RinXLisp.so"
Happened in: #<Byte-Code-Closure-SHARED-LIBRARY-INFORMATION: #3ab778>

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 13 08:14:38 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 13 Oct 2002 08:14:38 +0100 (BST)
Subject: XML package
In-Reply-To: <B754D275-DE23-11D6-A072-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.LNX.4.31.0210130808180.22048-100000@gannet.stats>

On Sat, 12 Oct 2002, Jan de Leeuw wrote:

> There are some problems with XML under OS X, nothing serious,
> but manual intervention is required.
>
> 1. For some reason the package has problems matching up the
> proper include and lib files for xml or xml2. If I install a fresh
> libxml2 and point the environmental variables to it, it still
> complains about mismatched header and lib files,
> which suggests, perhaps, that the test in configure uses something
> system
> specific. It works if I point explicitly to the include files for xml1.
> Both xml1 and xml2 are in /sw, because they come from fink. Maybe
> use xmlConf.sh or xml2Conf.sh
>
> 2. xmlParserError is defined in libxml, but Utils.o tried to override
> it with a new definition. That does not work in OS X, unless one
> specifies explicitly that that is what one wants. Adding "-Xlinker
> -m" to the link of XML.so indicates we need the first definition we
> come across, which is the one in Utils.o in this case. And that is
> what is intended.

Same problem under Windows, which I can only solve (at least when
statically loading libxml2) by building a version of error.c (from
libxml2) without xmlParserError.  It's really a design fault in libxml2:
the replaceable parts should be in separate moodules.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Mon Oct 14 00:34:46 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Mon, 14 Oct 2002 01:34:46 +0200 (MET DST)
Subject: The class attribute on an environment seems buggy (PR#2159)
Message-ID: <200210132334.BAA05124@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.6.0, 1.5.1
OS: WinXP Pro
Submission from: (NULL) (128.250.252.82)


The following example, which I tested on both R v1.5.1 and R v1.6.0 on WinXP
Pro, shows the problem I encountered when trying to use the class attribute of
an environment:

# Define method print() for class Environment
C

print(e)
# gives:
# [1] "An Environment!"

# Exit [R]
q(save="yes")

When restarting [R] and loading the previous workspace something goes wrong(?):
% R

print(e)
# gives:
# <environment: 01BE52F4>
# attr(,"class")
# [1] "Environment"

print(class(e))
# gives: 
# [1] "Environment"

print(unclass(e))
# gives:
# <environment: 01BE52F4>
# attr(,"class")
# [1] "Environment"

str(e)
# gives because of the malfunctioning unclass():
# Class 'Environment' Class 'Environment' Class 'Environment' Class
'Environment' 
# Class 'Environment' Class 'Environment' Class 'Environment' Class
'Environment' 
# Class 'Environment' Class 'Environment' Class 'Environment' ...

Note how unclass(e) does not work properly. More importantly, it the
S3/UseMethod() method dispatching get confused and won't recognize the class
attribute. 

Cheers

Henrik Bengtsson

Home: 201/445 Royale Parade, Parkville
Office: Bioinformatics, WEHI, Parkville
+61 (0)412 269 734 (cell), +61 (0)3 9387 791 (home), +61 (0)3 9345 2324 +(lab)
hb@maths.lth.se, http://www.maths.lth.se/~hb/
Time zone: +10h UTC (Sweden +2h UTC, Calif. -7h UTC)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Oct 14 09:03:20 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Mon, 14 Oct 2002 10:03:20 +0200
Subject: Sweave (PR#2142)
In-Reply-To: <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>
References: <15782.33889.962443.84196@galadriel.ci.tuwien.ac.at>
 <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>
Message-ID: <15786.31304.333618.232936@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 11 Oct 2002 15:35:38 +0100,
>>>>> Christophe Declercq (CD) wrote:

  > Thanks, Fritz, for your answer.
  >> De : Friedrich Leisch [mailto:leisch@galadriel.ci.tuwien.ac.at]
  >> [...]
  >> The path is correct (I want to have Sweave.sty in
  >> $R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
  >> does not get installed properly when builddir != srcdir. This has been
  >> fixed in both the devel and patched version of R.

  > Yes, but  'file.path(R.home(), "share", "texmf", "Sweave")' on my MS-Windows
  > box gives "C:\\R\\RW1060/share/texmf/Sweave".

  > With that, you get '\usepackage{C:RRW1060/share/texmf/Sweave}' in the tex
  > file. The problem seems to be with the 'R.home()' output on MS-Windows.

  > 'file.path(.path.package("tools"), "Sweave", "Sweave")' was giving
  > "C:/R/RW1060/library/tools/Sweave/Sweave" which is OK for pdflatex.

  > Anyway, thanks a lot for Sweave which is really great (for the moment, as I
  > need it working, I have just put back the old stylepath code in tools).

I commited a fix to the patched version of R that translates all
backslashes to slashes on windows. This now works for me (on Windows
XP) if the path to R_HOME contains no spaces. For installations in
directories like "Program Files" I still have the following problem: I
can either use

	\usepackage{c:/progra~1/rw1060/share/texmf/Sweave}

or

	\usepackage{c:/program files/rw1060/share/texmf/Sweave}

both of which do *NOT* work with my latex installation
(miktex). Unless somedy has a good suggestion how to solve the problem
my recoomendation is to either install R into a path without spaces or
copy Sweave.sty to some place in your TEXINPUTS path and use
stylepath=FALSE when calling Sweave.


Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Oct 14 13:59:43 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 14 Oct 2002 08:59:43 -0400
Subject: The class attribute on an environment seems buggy (PR#2159)
References: <200210132334.BAA05124@pubhealth.ku.dk>
Message-ID: <3DAABFBF.F7AEC086@research.bell-labs.com>

Any attribute of environments, not just the class, can be killed by
operating on the object "locally" in a function.

Example:

R> f <- function(x){ y <- x; attr(y, "foo") <- NULL; y}
R> ev <- new.env()
R> attr(ev, "foo") <- "bar"
R> ev
<environment: 0x8b515d4>
attr(,"foo")
[1] "bar"
R> f(ev)
<environment: 0x8b515d4>
R> ev
<environment: 0x8b515d4>

The reason is that the C routine `duplicate' does not duplicate an
environment  OR its attributes.

I was bitten by this trying to use environments as reference objects in
the Omegahat OOP package.

Would there be a problem with a "fix" in which the environment was left
unduplicated, but environments with attributes are "duplicated" by
creating a copy of the attribute list, but with the copy still pointing
to the same environment?

If that is not possible, it would be good to have another datatype that
had roughly those properties.  Otherwise, it's difficult to build on
this datatype in designing new classes.

(The same issue applies to other types, such as external pointers.)

hb@maths.lth.se wrote:
> 
> Full_Name: Henrik Bengtsson
> Version: 1.6.0, 1.5.1
> OS: WinXP Pro
> Submission from: (NULL) (128.250.252.82)
> 
> The following example, which I tested on both R v1.5.1 and R v1.6.0 on WinXP
> Pro, shows the problem I encountered when trying to use the class attribute of
> an environment:
> 
> # Define method print() for class Environment
> C
> 
> print(e)
> # gives:
> # [1] "An Environment!"
> 
> # Exit [R]
> q(save="yes")
> 
> When restarting [R] and loading the previous workspace something goes wrong(?):
> % R
> 
> print(e)
> # gives:
> # <environment: 01BE52F4>
> # attr(,"class")
> # [1] "Environment"
> 
> print(class(e))
> # gives:
> # [1] "Environment"
> 
> print(unclass(e))
> # gives:
> # <environment: 01BE52F4>
> # attr(,"class")
> # [1] "Environment"
> 
> str(e)
> # gives because of the malfunctioning unclass():
> # Class 'Environment' Class 'Environment' Class 'Environment' Class
> 'Environment'
> # Class 'Environment' Class 'Environment' Class 'Environment' Class
> 'Environment'
> # Class 'Environment' Class 'Environment' Class 'Environment' ...
> 
> Note how unclass(e) does not work properly. More importantly, it the
> S3/UseMethod() method dispatching get confused and won't recognize the class
> attribute.
> 
> Cheers
> 
> Henrik Bengtsson
> 
> Home: 201/445 Royale Parade, Parkville
> Office: Bioinformatics, WEHI, Parkville
> +61 (0)412 269 734 (cell), +61 (0)3 9387 791 (home), +61 (0)3 9345 2324 +(lab)
> hb@maths.lth.se, http://www.maths.lth.se/~hb/
> Time zone: +10h UTC (Sweden +2h UTC, Calif. -7h UTC)
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 14 14:30:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 14 Oct 2002 14:30:35 +0100 (BST)
Subject: savehistory directories and quitting R (PR#2038)
In-Reply-To: <200209190454.GAA13201@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210141410350.1247-100000@gannet.stats>

This is not a bug. If you override a system function, you can't expect it
to be used by R internals.  Indeed, as from 1.6.0 you can't even expect it
to be used by R's base functions, due to namespaces.

There are very good reasons for the internal quit code not to call user's
R code, the main one being that R errors will not be handled then.
.Last is made available as a hook to enable you to do what you want:
as the help page says.

Doesn't setting R_HISTFILE do this for you automatically? Just set
R_HISTFILE="D:/R50/.Rhistory" and the history should be loaded and saved
to the specified place.  Works under Unix, at least.



On Thu, 19 Sep 2002 Mark.Bravington@csiro.au wrote:

> #
> #       r-bugs@r-project.org
> #
> ######################################################
>
> Because I work in different directories, but always want to save my
> .Rhistory in the same place, I have changed the system function savehistory
> to this:
>
> function (file = "D:/R50/.Rhistory")
> invisible(.Internal(savehistory(file)))
>
> When I use q() to quit R, and it asks me whether I want to "save current
> workspace", a response of YES means that the .Rhistory is saved in the
> current working directory, rather than D:/R50/.Rhistory. I take this to mean
> that the quit-on-prompt sequence makes a direct call to .Internal(
> savehistory...) rather than going via the actual savehistory() function. It
> would be nicer if prompt-on-quit would honour the user's definition of
> savehistory.

Actually it talks directly to the GUI-specific history mechanism.

> (Responding NO to the "save current..." prompt means that .Rhistory isn't
> saved at all, which is reasonable.)
>
> I admit that this is a very minor bug, because I can set .Last to call
> savehistory directly. But I just thought you should know...
>
> cheers
> Mark
>
>
> *******************************
>
> Mark Bravington
> CSIRO (CMIS)
> PO Box 1538
> Castray Esplanade
> Hobart
> TAS 7001
>
> phone (61) 3 6232 5118
> fax (61) 3 6232 5012
> Mark.Bravington@csiro.au
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status =
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 04
>  day = 29
>  language = R
>
> Windows 2000 Professional (build 2195) Service Pack 2.0
>
> Search Path:
>  .GlobalEnv, package:handy, package:debug, mvb.session.info,
> package:mvbutils, package:tcltk, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 14 14:54:36 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Oct 2002 15:54:36 +0200
Subject: The class attribute on an environment seems buggy (PR#2159)
In-Reply-To: <3DAABFBF.F7AEC086@research.bell-labs.com>
References: <200210132334.BAA05124@pubhealth.ku.dk>
 <3DAABFBF.F7AEC086@research.bell-labs.com>
Message-ID: <x23cr93z37.fsf@biostat.ku.dk>

John Chambers <jmc@research.bell-labs.com> writes:

> Would there be a problem with a "fix" in which the environment was left
> unduplicated, but environments with attributes are "duplicated" by
> creating a copy of the attribute list, but with the copy still pointing
> to the same environment?
> 
> If that is not possible, it would be good to have another datatype that
> had roughly those properties.  Otherwise, it's difficult to build on
> this datatype in designing new classes.
> 
> (The same issue applies to other types, such as external pointers.)

I've been wrapping such environments in lists, as in

> tclVar
function (init = "") 
{
    n <- evalq(TclVarCount <- TclVarCount + 1, .TkRoot$env)
    name <- paste("RTcl", n, sep = "")
    l <- list(env = new.env())
    assign(name, NULL, envir = l$env)
    reg.finalizer(l$env, function(env) tkcmd("unset", ls(env)))
    class(l) <- "tclVar"
    tclvalue(l) <- init
    l
}

where the list(env = new.env()) construct is to avoid sticking a class
directly on "env". 

What you're suggesting would seem to have the same effect, i.e. the
environment gets effectively embedded in a structure on which you can
set attributes. It does sound like it could work.

I'm just a little worried whether it would be clear enough to the end
user what is going on, or whether we'd just be compounding problems of
duplications that don't duplicate...

BTW, this was never a bug...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From socher@stat.uni-muenchen.de  Mon Oct 14 15:01:21 2002
From: socher@stat.uni-muenchen.de (socher@stat.uni-muenchen.de)
Date: Mon, 14 Oct 2002 16:01:21 +0200 (MET DST)
Subject: possible memory leak in 1.6 (PR#2160)
Message-ID: <200210141401.QAA11994@pubhealth.ku.dk>

Full_Name: Anne-Laure Boulesteix
Version: 1.6.0
OS: Linux
Submission from: (NULL) (141.84.161.156)


Hi,

I noticed the following problem with 1.6.0 (which was not present in 1.5.1): 

I work with very large datasets and encountered a problem with memory
allocation,
(probably a memory leak).  I wrote a programm with a loop.  In this loop in
each
iteration I create a  very large matrix and assign it to a variable which
is the SAME for all the iterations.  So at each round the new matrix overwrites
the old  matrix.  In 1.5.1  the garbage collector seems to clean up the old
unused memory.  Unfortunately, in 1.6.0 with each round the memory used by R
increases until the R process is killed. 

Is there any way around this?

Many thanks and best regards,

  A.L. Boulesteix

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 14 15:04:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 14 Oct 2002 15:04:11 +0100 (BST)
Subject: Install with 64-bit GCC 3.2 (PR#2048)
In-Reply-To: <200209201634.SAA01188@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210141456390.1247-100000@gannet.stats>

In 1.6.0's R-admin manual is a set of flags which do work.

I don't think you are setting CC correctly, and am surprised this got
though configuration (it didn't for me).

If you look in config.site or the manual you will see it is
MAIN_LDFLAGS and SHLIB_LDFLAGS you needed to set; you seem to
misunderstand the role of LDFLAGS.


There may be a bug, but it's not in R.

On Fri, 20 Sep 2002 k.buckley@lancaster.ac.uk wrote:

>
> Hi,
>
> been trying to build R-1.5.1 for som eof our users here.
>
> No probs with gcc-3.2 32-bit installtion, but thought we'd try it with
> the 64-bit just for the crack.
>
> Configuring thus
>
> CC=gcc3 CFLAGS="-m64" CXX=g++3 CXXFLAGS="-m64" F77=g773 FFLAGS="-m64"
> LDFLAGS="-m64 -L/usr/local/packages/gcc-3.2/lib/sparcv9" ./configure
> --prefix=/usr/local/packages/R-1.5.1-64bit
>
> runs OK, however one of the tests (I assume it is a test anyway) fails thus
>
> gcc3 -G  -o ctest.so ansari.o chisqsim.o d2x2xk.o fexact.o kendall.o ks.o  prho.o swilk.o init.o  -L/usr/lib/sparcv9 -L/usr/local/packages/gcc-3.2/lib/sparcv9 -L/usr/local/packages/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.8/3.2/sparcv9 -L/usr/local/packages/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.8/3.2 -L/usr/ccs/bin/sparcv9 -L/usr/ccs/bin -L/usr/ccs/lib/sparcv9 -L/usr/ccs/lib -L/usr/local/packages/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.8/3.2/../../../sparcv9 -L/usr/local/packages/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.8/3.2/../../.. -L/lib/sparcv9 -ldl -ltermcap -lfrtbegin -lg2c -lm -lgcc_s_sparcv9
> ld: fatal: file ansari.o: wrong ELF class: ELFCLASS64
> ld: fatal: File processing errors. No output written to ctest.so
> collect2: ld returned 1 exit status
> *** Error code 1
> make: Fatal error: Command failed for target `ctest.so'
> Current working directory /usr/local/packages/src/R-1.5.1/src/library/ctest/src
>
>
> It appears the make process is not passing the "-m64" flag down from
> the LDFLAGS variable as set when running configure.
>
> I have tried a compilation by hand adding this flag to the link stage
> and the above compilation goes completes.
>
>
> Hoping this of use,
>
>
> --
> Regards,
>
> ----------------------------------------------------------------------
> *  Kevin M. Buckley              e-mail: K.Buckley@lancaster.ac.uk   *
> *                                                                    *
> *  Systems Administrator                                             *
> *  Computer Centre                                                   *
> *  Lancaster University          Voice:  +44 (0) 1524 5 93718        *
> *  LANCASTER. LA1 4YW            Fax  :  +44 (0) 1524 5 25113        *
> *  England.                                                          *
> *                                                                    *
> *  My PC runs Linux/GNU, you still computing the Bill Gate$' way ?   *
> ----------------------------------------------------------------------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 14 15:22:05 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Oct 2002 16:22:05 +0200
Subject: possible memory leak in 1.6 (PR#2160)
In-Reply-To: <200210141401.QAA11994@pubhealth.ku.dk>
References: <200210141401.QAA11994@pubhealth.ku.dk>
Message-ID: <x2y9912j8y.fsf@biostat.ku.dk>

socher@stat.uni-muenchen.de writes:

> Full_Name: Anne-Laure Boulesteix
> Version: 1.6.0
> OS: Linux
> Submission from: (NULL) (141.84.161.156)
> 
> 
> Hi,
> 
> I noticed the following problem with 1.6.0 (which was not present in 1.5.1): 
> 
> I work with very large datasets and encountered a problem with memory
> allocation,
> (probably a memory leak).  I wrote a programm with a loop.  In this loop in
> each
> iteration I create a  very large matrix and assign it to a variable which
> is the SAME for all the iterations.  So at each round the new matrix overwrites
> the old  matrix.  In 1.5.1  the garbage collector seems to clean up the old
> unused memory.  Unfortunately, in 1.6.0 with each round the memory used by R
> increases until the R process is killed. 
> 
> Is there any way around this?

Example code that would allow someone to reproduce and hunt down the
problem would help. This could be the same issue that Achim Zeileis
reported a few days ago. In that case the current source snapshots may
have it fixed.

Please be specific when you report problems. A broad outline of your
program is not sufficient to let us guess where the problem lies.
We could write a minimal loop which fits your description, but so
could you, and you're much closer to telling whether it is actually
displaying the same problem.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Oct 14 15:24:47 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 14 Oct 2002 10:24:47 -0400
Subject: The class attribute on an environment seems buggy (PR#2159)
References: <200210132334.BAA05124@pubhealth.ku.dk>
 <3DAABFBF.F7AEC086@research.bell-labs.com> <x23cr93z37.fsf@biostat.ku.dk>
Message-ID: <3DAAD3AF.888AFF3@research.bell-labs.com>

Peter Dalgaard BSA wrote:
> 
> John Chambers <jmc@research.bell-labs.com> writes:
> 
> > Would there be a problem with a "fix" in which the environment was left
> > unduplicated, but environments with attributes are "duplicated" by
> > creating a copy of the attribute list, but with the copy still pointing
> > to the same environment?
> >
> > If that is not possible, it would be good to have another datatype that
> > had roughly those properties.  Otherwise, it's difficult to build on
> > this datatype in designing new classes.
> >
> > (The same issue applies to other types, such as external pointers.)
> 
> I've been wrapping such environments in lists, as in
> 
> > tclVar
> function (init = "")
> {
>     n <- evalq(TclVarCount <- TclVarCount + 1, .TkRoot$env)
>     name <- paste("RTcl", n, sep = "")
>     l <- list(env = new.env())
>     assign(name, NULL, envir = l$env)
>     reg.finalizer(l$env, function(env) tkcmd("unset", ls(env)))
>     class(l) <- "tclVar"
>     tclvalue(l) <- init
>     l
> }
> 
> where the list(env = new.env()) construct is to avoid sticking a class
> directly on "env".
> 
> What you're suggesting would seem to have the same effect, i.e. the
> environment gets effectively embedded in a structure on which you can
> set attributes. It does sound like it could work.

For class-related work, embedding in a list (yes, I do that too) has
somewhat the wrong message, because now the object appears to extend
"list", whereas the intended model is that it extends "environment".

The distinction isn't all academic, because one would like to avoid
list-style computations for "[", etc, which are pretty much guaranteed
to cause trouble.

> 
> I'm just a little worried whether it would be clear enough to the end
> user what is going on, or whether we'd just be compounding problems of
> duplications that don't duplicate...

My personal need is for something that acts as a reference (aka
database, object table, etc.)  The understanding is that setting named
elements in this object works as for a reference--all copies see the
changes.  If the object can otherwise behave in standard "S language"
semantics, programming will be more straightforward.

For now, I use a list containing an environment, but eventually
something more direct will likely be needed.

> 
> BTW, this was never a bug...

OK, but as Henrik's mail suggested, users get unpleasant suprises from
trying to treat environments as ordinary objects.

> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct 14 15:32:06 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 14 Oct 2002 07:32:06 -0700 (PDT)
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.44.0210120745400.1901-100000@nokomis2.stat.umn.edu>
Message-ID: <Pine.A41.4.44.0210140659330.71008-100000@homer07.u.washington.edu>

On Sat, 12 Oct 2002, Luke Tierney wrote:

>
> I wonder if there is something we could add to the QA tools that could
> have picked this up.
>

valgrind will do this (under Linux only).  I just tried it and got

==6195== 151040 bytes in 295 blocks are definitely lost in loss record 49
of 50
==6195==    at 0x400434EB: malloc (vg_clientfuncs.c:100)
==6195==    by 0x8091BB0: R_AllocStringBuffer (deparse.c:150)
==6195==    by 0x8093501: print2buff (deparse.c:940)
==6195==    by 0x8092760: deparse2buff (deparse.c:560)

but
==6195== 12341268 bytes in 6183 blocks are still reachable in loss record
50 of 50
==6195==    at 0x400434EB: malloc (vg_clientfuncs.c:100)
==6195==    by 0x80D0131: GetNewPage (memory.c:552)
==6195==    by 0x80D3188: Rf_allocVector (memory.c:1731)
==6195==    by 0x80D2ECB: Rf_allocString (memory.c:1622)
==6195==

showing that it can distinguish memory leaks from memory that just hasn't
been freed.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct 14 15:34:24 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 14 Oct 2002 07:34:24 -0700 (PDT)
Subject: possible memory leak in 1.6 (PR#2160)
In-Reply-To: <200210141401.QAA11994@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210140732190.43878-100000@homer16.u.washington.edu>

On Mon, 14 Oct 2002 socher@stat.uni-muenchen.de wrote:

> Hi,
>
> I noticed the following problem with 1.6.0 (which was not present in 1.5.1):
>
> I work with very large datasets and encountered a problem with memory
> allocation,
> (probably a memory leak).  I wrote a programm with a loop.  In this loop in
> each
> iteration I create a  very large matrix and assign it to a variable which
> is the SAME for all the iterations.  So at each round the new matrix overwrites
> the old  matrix.  In 1.5.1  the garbage collector seems to clean up the old
> unused memory.  Unfortunately, in 1.6.0 with each round the memory used by R
> increases until the R process is killed.

Yes, it's a bug (though it isn't the matrix that leaks).  It's
probably been fixed.

You could download the current `patched' version and try that.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 14 16:11:07 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 14 Oct 2002 16:11:07 +0100 (BST)
Subject: growing process size in simulation
In-Reply-To: <Pine.A41.4.44.0210140659330.71008-100000@homer07.u.washington.edu>
Message-ID: <Pine.LNX.4.31.0210141610500.1801-100000@gannet.stats>

Reference to valgrind, please?

On Mon, 14 Oct 2002, Thomas Lumley wrote:

> On Sat, 12 Oct 2002, Luke Tierney wrote:
>
> >
> > I wonder if there is something we could add to the QA tools that could
> > have picked this up.
> >
>
> valgrind will do this (under Linux only).  I just tried it and got
>
> ==6195== 151040 bytes in 295 blocks are definitely lost in loss record 49
> of 50
> ==6195==    at 0x400434EB: malloc (vg_clientfuncs.c:100)
> ==6195==    by 0x8091BB0: R_AllocStringBuffer (deparse.c:150)
> ==6195==    by 0x8093501: print2buff (deparse.c:940)
> ==6195==    by 0x8092760: deparse2buff (deparse.c:560)
>
> but
> ==6195== 12341268 bytes in 6183 blocks are still reachable in loss record
> 50 of 50
> ==6195==    at 0x400434EB: malloc (vg_clientfuncs.c:100)
> ==6195==    by 0x80D0131: GetNewPage (memory.c:552)
> ==6195==    by 0x80D3188: Rf_allocVector (memory.c:1731)
> ==6195==    by 0x80D2ECB: Rf_allocString (memory.c:1622)
> ==6195==
>
> showing that it can distinguish memory leaks from memory that just hasn't
> been freed.
>
> 	-thomas
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gte810u@prism.gatech.edu  Mon Oct 14 16:38:39 2002
From: gte810u@prism.gatech.edu (David Bauer)
Date: Mon, 14 Oct 2002 11:38:39 -0400
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.31.0210141610500.1801-100000@gannet.stats>
References: <Pine.A41.4.44.0210140659330.71008-100000@homer07.u.washington.edu>
Message-ID: <5.1.1.5.2.20021014113640.0227be20@pop.prism.gatech.edu>


>Reference to valgrind, please?

http://developer.kde.org/~sewardj/

It is an x86/Linux only x86 to x86 emulator which can do memory checking, 
cache profiling, etc.


David Bauer

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct 14 18:52:26 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 14 Oct 2002 10:52:26 -0700 (PDT)
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.31.0210141610500.1801-100000@gannet.stats>
Message-ID: <Pine.A41.4.44.0210141049160.70582-100000@homer22.u.washington.edu>

On Mon, 14 Oct 2002 ripley@stats.ox.ac.uk wrote:

> Reference to valgrind, please?
>
 http://developer.kde.org/~sewardj/

It's a memory-management debugger -- it tracks all memory allocations,
reads and writes to find accesses to unitialised or invalid memory and
memory leaks.

Valgrind works only under Linux and of course imposes a huge speed
penalty, but it seems to work quite well.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kai.makisara@metla.fi  Tue Oct 15 13:45:21 2002
From: kai.makisara@metla.fi (kai.makisara@metla.fi)
Date: Tue, 15 Oct 2002 14:45:21 +0200 (MET DST)
Subject: Core dump with a 64-bit system (PR#2165)
Message-ID: <200210151245.OAA19646@pubhealth.ku.dk>

Full_Name: Kai Mkisara
Version: 1.6.0
OS: Tru64
Submission from: (NULL) (128.214.53.92)


Any command given in terminal window dumps core if readline is compiled in.
The reason is a bug in pushReadline: the first call pushes the function below
the stack. The following patch solves the problem:

--- R-1.6.0/src/unix/sys-std.c~ Sun Aug 25 12:51:20 2002
+++ R-1.6.0/src/unix/sys-std.c  Tue Oct 15 14:43:00 2002
@@ -389,10 +389,10 @@
 void
 pushReadline(char *prompt, rl_vcpfunc_t f)
 {
-   if(ReadlineStack.current >= ReadlineStack.max) {
+   if(ReadlineStack.current >= ReadlineStack.max - 1) {
      warning("An unusual circumstance has arisen in the nesting of readline
input. Please report using bug.report()");
    } else
-     ReadlineStack.fun[ReadlineStack.current++] = f; 
+     ReadlineStack.fun[++ReadlineStack.current] = f; 
 
    rl_callback_handler_install(prompt, f);
 }

In a 32-bit system the first call overwrites only ReadlineStack.max and this is
probably never noticed. In a 64-bit system the results are more interesting :-)

             Kai



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Tue Oct 15 19:44:01 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Tue, 15 Oct 2002 14:44:01 -0400
Subject: Typos in help page for model.extract?
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC7BA@usrymx10.merck.com>

[R-1.6.0]

In the "Details" section of help page for model.extract, shouldn't the
references to model.frame() be model.extract()?

Regards,
Andy


------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jfox@mcmaster.ca  Tue Oct 15 21:57:37 2002
From: jfox@mcmaster.ca (John Fox)
Date: Tue, 15 Oct 2002 16:57:37 -0400
Subject: Sweave (PR#2142)
In-Reply-To: <15786.31304.333618.232936@galadriel.ci.tuwien.ac.at>
References: <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>
 <15782.33889.962443.84196@galadriel.ci.tuwien.ac.at>
 <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>
Message-ID: <5.1.0.14.2.20021015165314.027a3f98@mcmail.cis.mcmaster.ca>

Dear Friedrich et al.,

Why not make the default location for installing the Windows version of R 
"c:\R" rather than "c:\Program Files\R", thus avoiding this and other 
potential problems? Perhaps there's some consideration of which I'm unaware.

Regards,
  John

At 10:03 AM 10/14/2002 +0200, Friedrich.Leisch@ci.tuwien.ac.at wrote:
> >>>>> On Fri, 11 Oct 2002 15:35:38 +0100,
> >>>>> Christophe Declercq (CD) wrote:
>
>   > Thanks, Fritz, for your answer.
>   >> De : Friedrich Leisch [mailto:leisch@galadriel.ci.tuwien.ac.at]
>   >> [...]
>   >> The path is correct (I want to have Sweave.sty in
>   >> $R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
>   >> does not get installed properly when builddir != srcdir. This has been
>   >> fixed in both the devel and patched version of R.
>
>   > Yes, but  'file.path(R.home(), "share", "texmf", "Sweave")' on my 
> MS-Windows
>   > box gives "C:\\R\\RW1060/share/texmf/Sweave".
>
>   > With that, you get '\usepackage{C:RRW1060/share/texmf/Sweave}' in the tex
>   > file. The problem seems to be with the 'R.home()' output on MS-Windows.
>
>   > 'file.path(.path.package("tools"), "Sweave", "Sweave")' was giving
>   > "C:/R/RW1060/library/tools/Sweave/Sweave" which is OK for pdflatex.
>
>   > Anyway, thanks a lot for Sweave which is really great (for the 
> moment, as I
>   > need it working, I have just put back the old stylepath code in tools).
>
>I commited a fix to the patched version of R that translates all
>backslashes to slashes on windows. This now works for me (on Windows
>XP) if the path to R_HOME contains no spaces. For installations in
>directories like "Program Files" I still have the following problem: I
>can either use
>
>         \usepackage{c:/progra~1/rw1060/share/texmf/Sweave}
>
>or
>
>         \usepackage{c:/program files/rw1060/share/texmf/Sweave}
>
>both of which do *NOT* work with my latex installation
>(miktex). Unless somedy has a good suggestion how to solve the problem
>my recoomendation is to either install R into a path without spaces or
>copy Sweave.sty to some place in your TEXINPUTS path and use
>stylepath=FALSE when calling Sweave.
>
>
>Fritz
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox@mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 15 23:47:52 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Oct 2002 00:47:52 +0200
Subject: Core dump with a 64-bit system (PR#2165)
In-Reply-To: <200210151245.OAA19646@pubhealth.ku.dk>
References: <200210151245.OAA19646@pubhealth.ku.dk>
Message-ID: <x21y6rwc87.fsf@biostat.ku.dk>

kai.makisara@metla.fi writes:

> Any command given in terminal window dumps core if readline is compiled in.
> The reason is a bug in pushReadline: the first call pushes the function below
> the stack. The following patch solves the problem:

Patch inserted. Thanks.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Tue Oct 15 23:52:19 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Tue, 15 Oct 2002 18:52:19 -0400
Subject: cut() on NA gives 0 when labels=F
Message-ID: <15788.39971.929286.111207@gargle.gargle.HOWL>

Hi all,

I just noticed this odd behavior in R 1.5.1 (on Solaris 2.6):

  R> cut(c(2,NA), 1:5, labels=F)
     [1] 1 0

Is it a bug?  I would have expected "1 NA" (better for indexing), and also the
S-Plus analog is:

  S-Plus> as.integer(cut(c(2,NA), 1:5))
     [1]  1 NA

Apologies ahead of time if it's already fixed in R 1.6.0 and/or already known
(perhaps related to PR#1694?).  If others agree it's a bug I'll submit it.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Oct 16 01:14:52 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 15 Oct 2002 17:14:52 -0700 (PDT)
Subject: cut() on NA gives 0 when labels=F
In-Reply-To: <15788.39971.929286.111207@gargle.gargle.HOWL>
Message-ID: <Pine.A41.4.44.0210151714220.123024-100000@homer39.u.washington.edu>

On Tue, 15 Oct 2002, David Brahm wrote:

> Apologies ahead of time if it's already fixed in R 1.6.0 and/or already known
> (perhaps related to PR#1694?).  If others agree it's a bug I'll submit it.

In R 1.6.0
> cut(c(2,NA), 1:5, labels=FALSE)
[1]  1 NA

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lina@u.washington.edu  Wed Oct 16 07:36:09 2002
From: lina@u.washington.edu (lina@u.washington.edu)
Date: Wed, 16 Oct 2002 08:36:09 +0200 (MET DST)
Subject: documentation: Missing paranthesis in reshape.Rd (PR#2170)
Message-ID: <200210160636.IAA23901@pubhealth.ku.dk>

Full_Name: Michale Na Li
Version: 1.6.0
OS: i386-linux
Submission from: (NULL) (140.142.172.141)



In src/library/base/man/reshape.Rd, one paranthesis is missing, here is the
patch. 

*** reshape.Rd.old      2002-10-15 23:32:25.000000000 -0700
--- reshape.Rd  2002-10-15 23:32:35.000000000 -0700
***************
*** 12,18 ****
      idvar = "id", ids = 1:NROW(data),
      times = seq(length = length(varying[[1]])), 
      drop = NULL, direction, fix.row.names = TRUE,
!     split=list(regexp="\\.",include=FALSE)
  }
  %- maybe also `usage' for other objects documented here.
  \arguments{
--- 12,18 ----
      idvar = "id", ids = 1:NROW(data),
      times = seq(length = length(varying[[1]])), 
      drop = NULL, direction, fix.row.names = TRUE,
!     split=list(regexp="\\.",include=FALSE))
  }
  %- maybe also `usage' for other objects documented here.
  \arguments{




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 12:19:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 12:19:21 +0100 (BST)
Subject: submitting binary windows packages
In-Reply-To: <D7A3CFD7825BD6119B880002A58F06C20149D00A@groexmb02.pfizer.com>
Message-ID: <Pine.LNX.4.31.0210161209220.1261-100000@gannet.stats>

It's called patience ... updates were done on October 7 and several times
since. I was away for four weeks (and Kurt and others knew that).

We've experimented with allowing other people to put up Windows
pre-compiled packages, but security concerns are overwhelming.  The
distribution is done under Unix/Linux where we can't virus-check.  I build
on just one Windows machine that has aggressive virus-checking and very
little software installed: I do not use my regular desktop machine (which
is usually in Linux anyway).

Ideally I would like to pass the task on to someone who has suitable
infrastructure (which includes a machine with fast and reliable internet
access from which CRAN can rsync).  The rate of change has got out of
control (at least 50 changes per month, it seems).  About 90% of the
packages will build automatically (under Windows, not cross-compiling)
but the remainder cause a lot of extra work.

On Tue, 1 Oct 2002, Warnes, Gregory R wrote:

>
> Hi All,
>
> The windows binary packages in
> http://cran.r-project.org/bin/windows/contrib/ are out of date for my
> packages, and perhaps for others as well.  I've now received several email
> messages commenting on this fact.
>
> Since I now have a Windows 2K machine with the proper build environment, I
> can create the windows binary packages myself.  What is the proper mechanism
> for getting a windows binary package placed there?
>
> This topic is not documented in the R Windows FAQ or anywhere else I can
> find.   Kurt has indicated that the windows area is mirrored from one of
> Brian's machines, but my query to Brian has not been answered yet.  (Perhaps
> he is taking a well-deserved break).  Does someone else know the proper
> procedure?
>
> If there is not already, can we arrange to set up an automated build
> procedure so that a Windows binary package is created automatically when the
> source package is uploaded?  Or some alternative?
>
> Greg
>
>
>
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 12:27:16 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 12:27:16 +0100 (BST)
Subject: install.packages warning
In-Reply-To: <Pine.LNX.4.44.0210011409070.19662-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.31.0210161223570.1261-100000@gannet.stats>

On Tue, 1 Oct 2002, Ben Bolker wrote:

>
>   Hear, hear; I've often had to reassure people about this warning.  (The
> reason the scary "Warning message" words appear is because
> install.packages() uses the warning() function.)  Is the warning really
> necessary?

Yes.  Why can't people call install.packages() correctly?  It has two
required arguments.  If R_LIBS is set, you do want to think hard about
where to install, and the warning is useful.  Maybe if there is only one
library, the warning could be suppressed.

And if they are doing it on Windows, they can use a menu item to generate
a correct call for them....

>
> On Tue, 1 Oct 2002, Wright, Kevin wrote:
>
> >
> > I typically install packages from a local site:
> >
> > > install.packages("x:/tpm/tpm.zip",CRAN=NULL)
> > updating HTML package descriptions
> > Warning message:
> > argument `lib' is missing: using C:/PROGRA~1/R/RW1051/library in:
> > install.packages("x:/tpm/tpm.zip", CRAN = NULL)
> >
> > The warning doesn't bother me, but I've had to help other people who see
> > "warning" and decide to panic.
> >
> > May I suggest changing "Warning message" to something less scary, for
> > example "Note:".

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Oct 16 16:40:21 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 16 Oct 2002 11:40:21 -0400
Subject: R-patched make warnings on Mandrake 9.0
Message-ID: <3DAD8865.356D0EA6@bank-banque-canada.ca>

I seem to recall a discussion about this a day or two ago, but I believe it was
on Solaris. On Linux, Mandrake 9.0,  when I make R-patched_2002-10-16 with gcc
3.2 I get lots of warnings like:
...
gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES 
-mieee-fp  -fPIC  -g -O2 -c pacf.c -o pacf.o
cc1: warning: changing search order for system directory 
"/usr/local/include"
cc1: warning:   as it has already been specified as a non-system directory
gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES 
-mieee-fp  -fPIC  -g -O2 -c qr.c -o qr.o
cc1: warning: changing search order for system directory 
"/usr/local/include"
cc1: warning:   as it has already been specified as a non-system directory
...

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 17:37:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 17:37:44 +0100 (BST)
Subject: R-patched make warnings on Mandrake 9.0
In-Reply-To: <3DAD8865.356D0EA6@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0210161734420.1692-100000@gannet.stats>

This always happens with gcc 3.2, and is harmless.

You can avoid most of them (but not in the GNOME module) by setting
CPPFLAGS= (nothing).

I thought I had put something about this in R-admin.texi, but apparently
did not get it there for 1.6.0.

On Wed, 16 Oct 2002, Paul Gilbert wrote:

> I seem to recall a discussion about this a day or two ago, but I believe it was
> on Solaris. On Linux, Mandrake 9.0,  when I make R-patched_2002-10-16 with gcc
> 3.2 I get lots of warnings like:
> ...
> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
> -mieee-fp  -fPIC  -g -O2 -c pacf.c -o pacf.o
> cc1: warning: changing search order for system directory
> "/usr/local/include"
> cc1: warning:   as it has already been specified as a non-system directory
> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
> -mieee-fp  -fPIC  -g -O2 -c qr.c -o qr.o
> cc1: warning: changing search order for system directory
> "/usr/local/include"
> cc1: warning:   as it has already been specified as a non-system directory
> ...
>
> Paul Gilbert
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@hivnet.ubc.ca  Wed Oct 16 17:46:12 2002
From: jerome@hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Wed, 16 Oct 2002 18:46:12 +0200 (MET DST)
Subject: xlim in plot.survfit() [with a discussion on "..."] (PR#2173)
Message-ID: <200210161646.SAA00608@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.6.0
OS: RedHat 7.2
Submission from: (NULL) (24.83.203.63)



Hello,

I am trying to draw a legend on top of survival curves using
plot.survfit(). As in the example below, I would like to
specify a large interval for the x-axis. I can achieve such
result using "xlim". However, an error occurs if I use the
legend.pos and legend.text parameters as well.

  library(survival)
  TIME  <- Surv(c(23,52,12,56,23,21),c(T,F,T,F,F,T))

  par(mfrow=c(2,1))
  plot(survfit(TIME~1),conf.int=F,xlim=c(0,100),
  main="xlim=c(0,100) without legend")
  plot(survfit(TIME~1),conf.int=F,xlim=c(0,100),
  legend.pos=0,legend.text="Survival Curve",
  main="xlim=c(0,100) with legend (ERROR!)")

It looks like plot.survfit() attempts to send the "xlim"
parameter to legend(), which does not accept "xlim" as a
parameter. Hence, an error occurs and the legend is not
plotted.

I believe the problem is due to the fact that the
additional parameters "..." that are supplied to
plot.survfit() do not necessarily match the range of
possible parameters for both plot() and legend(). In my
case, "xlim" is matched by plot(), but not by legend().

I know how to plot the legend by directly using the
legend() function. However, in order to correct the
small problem with plot.survfit(), I would suggest that
plot.survfit() be modified to perform an exact match of
the parameters in "..." onto legend(). Perhaps there is
already a function to perform such a task. If not, I
believe it could provide a practical solution for
dealing with "..." and subfunctions that do not have a
built-in "..." parameter. That's just a suggestion,
though.

Thank you very much!
Jerome Asselin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Wed Oct 16 18:12:00 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 16 Oct 2002 10:12:00 -0700
Subject: R-patched make warnings on Mandrake 9.0
In-Reply-To: <Pine.LNX.4.31.0210161734420.1692-100000@gannet.stats>
Message-ID: <62676906-E12A-11D6-A9D8-000393860F3C@stat.ucla.edu>

Harmless but annoying. It's gone in gcc-3.3.

On Wednesday, October 16, 2002, at 09:37 AM, <ripley@stats.ox.ac.uk>  
wrote:

> This always happens with gcc 3.2, and is harmless.
>
> You can avoid most of them (but not in the GNOME module) by setting
> CPPFLAGS= (nothing).
>
> I thought I had put something about this in R-admin.texi, but  
> apparently
> did not get it there for 1.6.0.
>
> On Wed, 16 Oct 2002, Paul Gilbert wrote:
>
>> I seem to recall a discussion about this a day or two ago, but I  
>> believe it was
>> on Solaris. On Linux, Mandrake 9.0,  when I make R-patched_2002-10-16  
>> with gcc
>> 3.2 I get lots of warnings like:
>> ...
>> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
>> -mieee-fp  -fPIC  -g -O2 -c pacf.c -o pacf.o
>> cc1: warning: changing search order for system directory
>> "/usr/local/include"
>> cc1: warning:   as it has already been specified as a non-system  
>> directory
>> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
>> -mieee-fp  -fPIC  -g -O2 -c qr.c -o qr.o
>> cc1: warning: changing search order for system directory
>> "/usr/local/include"
>> cc1: warning:   as it has already been specified as a non-system  
>> directory
>> ...
>>
>> Paul Gilbert
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
>> .-.-.-.-.-
>> r-devel mailing list -- Read  
>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To:  
>> r-devel-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._. 
>> _._._._._
>>
>
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 18:20:07 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 18:20:07 +0100 (BST)
Subject: R-patched make warnings on Mandrake 9.0
In-Reply-To: <62676906-E12A-11D6-A9D8-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.LNX.4.31.0210161818570.1830-100000@gannet.stats>

On Wed, 16 Oct 2002, Jan de Leeuw wrote:

> Harmless but annoying. It's gone in gcc-3.3.

That's not released yet according to gcc.gnu.org!  gcc alphas are subject
to change.

> On Wednesday, October 16, 2002, at 09:37 AM, <ripley@stats.ox.ac.uk>
> wrote:
>
> > This always happens with gcc 3.2, and is harmless.
> >
> > You can avoid most of them (but not in the GNOME module) by setting
> > CPPFLAGS= (nothing).
> >
> > I thought I had put something about this in R-admin.texi, but
> > apparently
> > did not get it there for 1.6.0.
> >
> > On Wed, 16 Oct 2002, Paul Gilbert wrote:
> >
> >> I seem to recall a discussion about this a day or two ago, but I
> >> believe it was
> >> on Solaris. On Linux, Mandrake 9.0,  when I make R-patched_2002-10-16
> >> with gcc
> >> 3.2 I get lots of warnings like:
> >> ...
> >> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
> >> -mieee-fp  -fPIC  -g -O2 -c pacf.c -o pacf.o
> >> cc1: warning: changing search order for system directory
> >> "/usr/local/include"
> >> cc1: warning:   as it has already been specified as a non-system
> >> directory
> >> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
> >> -mieee-fp  -fPIC  -g -O2 -c qr.c -o qr.o
> >> cc1: warning: changing search order for system directory
> >> "/usr/local/include"
> >> cc1: warning:   as it has already been specified as a non-system
> >> directory
> >> ...
> >>
> >> Paul Gilbert
> >> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> >> .-.-.-.-.-
> >> r-devel mailing list -- Read
> >> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> >> Send "info", "help", or "[un]subscribe"
> >> (in the "body", not the subject !)  To:
> >> r-devel-request@stat.math.ethz.ch
> >> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> >> _._._._._
> >>
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > .-.-.-.-.-
> > r-devel mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
> > r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > ._._._._
> >
> >
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>
> ------------------------------------------------------------------------
> -------------------------
>            No matter where you go, there you are. --- Buckaroo Banzai
>                     http://gifi.stat.ucla.edu/sounds/nomatter.au
>
> ------------------------------------------------------------------------
> -------------------------
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.c.rougier@durham.ac.uk  Wed Oct 16 18:21:00 2002
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Wed, 16 Oct 2002 19:21:00 +0200 (MET DST)
Subject: Documentation for .Renviron (PR#2175)
Message-ID: <200210161721.TAA00766@pubhealth.ku.dk>

Hi everyone,

Two minor points about ?.Renviron.

1) If R_ENVIRON is not set then R defaults to `${R_HOME}/etc/Renviron',
not `${R_HOME}/etc/Renviron.site' as stated.

2) In the details, there is a missing "way" in "`value' is processed
in a similar to a Unix shell."

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Oct 16 19:31:10 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 16 Oct 2002 20:31:10 +0200 (MET DST)
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
Message-ID: <200210161831.UAA01076@pubhealth.ku.dk>

There is an incompatibility between R's configure/build process, and gcc 3.2.0 (and maybe earlier).
Gcc 3.2.0 includes -I/usr/local/include by default, on my system (default configuration), and cpp0
issues a warning when this flag is issued additionally by the user (= R's configure). This warning
ends up in the dependency sections of the Makefile that are generated "automagically". The 1st
occurrence is line 105 of src/appl/Makefile .

The only way around it that I found, other than removing all -I/usr/local/include in all Makefiles is to manually add
-Wp,-w, a gcc/cpp argument that suppresses all cpp warnings. It also has the effect of not aborting
a compilation as soon as a specified header file is *not* found :(
If you decide to leave -I/usr/local/include and add -Wp,-w for gcc 3 compilers, I would suggest
*not* adding -Wp,-w if -fsyntax-only is also given, to not interfere with requested syntax-checking.
(that would probably require to call the compiler from a wrapper script, something I already do.)

Rene Bertin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 21:01:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 21:01:30 +0100 (BST)
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
In-Reply-To: <200210161831.UAA01076@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210162038360.2159-100000@gannet.stats>

This has been discussed on R-devel, and it is definitely not an R bug
as there are workarounds stated in the R-admin manual.

Setting CPPFLAGS= (nothing) does avoid this except in the gnome module. It
was intended to put that explicitly in the R-admin manual for 1.6.0, but
it was not done in time (it is now there for R-patched).

We are told that this is fixed in the alphas of gcc 3.3.  Once it is clear
exactly which versions of gcc are affected we may add a workaround in the
configure script.

On Wed, 16 Oct 2002 rjvbertin@hotmail.com wrote:

> There is an incompatibility between R's configure/build process, and gcc 3.2.0 (and maybe earlier).
> Gcc 3.2.0 includes -I/usr/local/include by default, on my system (default configuration), and cpp0
> issues a warning when this flag is issued additionally by the user (= R's configure). This warning
> ends up in the dependency sections of the Makefile that are generated "automagically". The 1st
> occurrence is line 105 of src/appl/Makefile .
>
> The only way around it that I found, other than removing all -I/usr/local/include in all Makefiles is to manually add
> -Wp,-w, a gcc/cpp argument that suppresses all cpp warnings. It also has the effect of not aborting
> a compilation as soon as a specified header file is *not* found :(
> If you decide to leave -I/usr/local/include and add -Wp,-w for gcc 3 compilers, I would suggest
> *not* adding -Wp,-w if -fsyntax-only is also given, to not interfere with requested syntax-checking.
> (that would probably require to call the compiler from a wrapper script, something I already do.)
>
> Rene Bertin
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Thu Oct 17 10:43:18 2002
From: rjvbertin@hotmail.com (RenE J.V. Bertin)
Date: Thu, 17 Oct 2002 11:43:18 +0200
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
In-Reply-To: <Pine.LNX.4.31.0210162038360.2159-100000@gannet.stats>
References: <200210161831.UAA01076@pubhealth.ku.dk>
 <Pine.LNX.4.31.0210162038360.2159-100000@gannet.stats>
Message-ID: <20021017114318.072cab11.rjvbertin@hotmail.com>

On Wed, 16 Oct 2002 21:01:30 +0100 (BST), <ripley@stats.ox.ac.uk> wrote regarding "Re:
configure/build issue with gcc 3.2.0 (PR#2176)"

8-) This has been discussed on R-devel, and it is definitely not an R bug
8-) as there are workarounds stated in the R-admin manual.

	Really? I have looked around the occurrences of 'gcc', 'cpp' and 'workaround' (none) and '-Wp' (none) in doc/manual/R-admin.pdf, and didn't see anything that looked appropriate. Are we talking about the same issue (not a bug *in* R indeed)?



__oWo________________________________________________
| RenE J.V. Bertin
|  _|~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-|_
|  O]                   LPPA                     [O
|  O]             College de France              [O
|  O] 11, place Marcelin Berthelot, 75005 Paris  [O
|  O]                   France                   [O
|  -|~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-|-

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 17 11:50:29 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 17 Oct 2002 12:50:29 +0200 (MET DST)
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
Message-ID: <200210171050.MAA05494@pubhealth.ku.dk>

On Thu, 17 Oct 2002, RenE J.V. Bertin wrote:

> On Wed, 16 Oct 2002 21:01:30 +0100 (BST), <ripley@stats.ox.ac.uk> wrote regarding "Re:
> configure/build issue with gcc 3.2.0 (PR#2176)"
>
> 8-) This has been discussed on R-devel, and it is definitely not an R bug
> 8-) as there are workarounds stated in the R-admin manual.
>
> 	Really? I have looked around the occurrences of 'gcc', 'cpp' and
'workaround' (none) and '-Wp' (none) in doc/manual/R-admin.pdf,
and didn't see anything that looked appropriate. Are we talking
about the same issue (not a bug *in* R indeed)?

Please do read *all* of my message.  I said that setting CPPFLAGS to empty
solves the problem.  Setting CPPFLAGS appropriately *is* discussed in that
manual, and that's what you neglected to do.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 17 13:34:54 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Oct 2002 14:34:54 +0200
Subject: R-1.6.1beta available
Message-ID: <x2of9t451t.fsf@biostat.ku.dk>

R 1.6.1 has been scheduled for November 1.

We're makin interim beta versions available via

http://cran.us.r-project.org/src/base

(ftp://cran.us.r-project.org/pub/R/src/base used to work, but
apparently FTP access has been disabled)

The filename is R-1.6.1beta_*.tar.gz, where * is the creation date. 

If you want to help ensure that the final 1.6.1 works satisfactorily
on *your* platform, it might be a good idea to make a test build of
the beta and report any errors back (to the r-devel list, not to me
personally, please!).

New versions will be made available each day until the final release,
barring hardware trouble and build script failures.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 17 17:29:36 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 17 Oct 2002 17:29:36 +0100 (BST)
Subject: Documentation for .Renviron (PR#2175)
In-Reply-To: <200210161721.TAA00766@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210171717250.962-100000@gannet.stats>

On Wed, 16 Oct 2002 j.c.rougier@durham.ac.uk wrote:

> Hi everyone,
>
> Two minor points about ?.Renviron.
>
> 1) If R_ENVIRON is not set then R defaults to `${R_HOME}/etc/Renviron',
> not `${R_HOME}/etc/Renviron.site' as stated.

No, it does as it states. See the code fragment

/* try site Renviron: R_ENVIRON, then R_HOME/etc/Renviron.site. */
void process_site_Renviron ()
{
    char buf[PATH_MAX];

    if(process_Renviron(getenv("R_ENVIRON"))) return;
    if(strlen(R_Home) + strlen("/etc/Renviron.site") > PATH_MAX - 1) {
        R_ShowMessage("path to Renviron.site is too long: skipping");
        return;
    }
    sprintf(buf, "%s/etc/Renviron.site", R_Home);
    process_Renviron(buf);
}

in unix/sys-common.c.

The description is inaccurate though: R_HOME/etc/Renviron.site is read
unless R_ENVIRON is set to a valid file.  I've altered the code so that
even if R_ENVIRON is invalid R_HOME/etc/Renviron.site is skipped.


${R_HOME}/etc/Renviron is for R's own use. It gets read whether or not
R_ENVIRON is set.

>
> 2) In the details, there is a missing "way" in "`value' is processed
> in a similar to a Unix shell."

Thanks.

>
> Cheers, Jonathan.
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status =
>  major = 1
>  minor = 6.0
>  year = 2002
>  month = 10
>  day = 01
>  language = R
>
> Search Path:
>  .GlobalEnv, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Oct 17 17:52:56 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 17 Oct 2002 18:52:56 +0200 (MET DST)
Subject: documentation: Missing paranthesis in reshape.Rd (PR#2170)
Message-ID: <200210171652.SAA08775@pubhealth.ku.dk>

>>>>> "Michael" == Michael Na Li <lina@u.washington.edu>
>>>>>     on Wed, 16 Oct 2002 08:36:09 +0200 (MET DST) writes:

    Michael> Full_Name: Michale Na Li
    Michael> Version: 1.6.0
    Michael> OS: i386-linux
    Michael> Submission from: (NULL) (140.142.172.141)


    Michael> In src/library/base/man/reshape.Rd, one paranthesis
    Michael> is missing, here is the patch.

    Michael>  ..........

Thank you, Michael.

I've added that (and many spaces).
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Oct 17 18:58:33 2002
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Thu, 17 Oct 2002 19:58:33 +0200 (MET DST)
Subject: underflow handling in besselK (PR#2179)
Message-ID: <200210171758.TAA09027@pubhealth.ku.dk>


  The besselK() function knows about overflows/underflows internally;
there is a constant xmax_BESS_K in src/nmath/bessel.h (and referred to
only in bessel_k.c), equal to 705.342, which is checked if expon.scaled is
FALSE.  (The equivalent number for bessel_i.c is 709, defined as
exparg_BESS in bessel.h.) However, besselK(x) silently returns +Inf if
x>705.342.  This behavior is reasonable for besselI (where the problem is
an overflow), but seems wrong for besselK (since the problem here is an
*underflow*).  The answer may be as simple as returning 0 rather than +Inf
in this case.
 
  If this is appropriate, the following patch should do the job:

*** bessel_k.c	Thu Oct 17 13:55:55 2002
--- bessel_k.c.dist	Thu Oct 17 13:48:53 2002
***************
*** 216,224 ****
  	    ML_ERROR(ME_RANGE);
  	    *ncalc = *nb;
  	    for(i=0; i < *nb; i++)
! 		if (ex<=0)
! 	   	   bk[i] = ML_POSINF;
! 	        else bk[i]=0.0;
  	    return;
  	}
  	k = 0;
--- 216,222 ----
  	    ML_ERROR(ME_RANGE);
  	    *ncalc = *nb;
  	    for(i=0; i < *nb; i++)
! 		bk[i] = ML_POSINF;
  	    return;
  	}
  	k = 0;

  (By the way, the test for x<=0 seems inappropriate; it looks like x<0 is 
caught elsewhere and that this is really a test for x==0.)

  [Apologies if this is not considered a bug, but my judgment is that it
is -- couldn't be bothered with a round of sending it to r-devel first.]

  Ben Bolker

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ko-Kang@xtra.co.nz  Thu Oct 17 19:37:45 2002
From: Ko-Kang@xtra.co.nz (Ko-Kang Kevin Wang)
Date: Fri, 18 Oct 2002 07:37:45 +1300
Subject: R-1.6.1beta available
References: <x2of9t451t.fsf@biostat.ku.dk>
Message-ID: <003f01c2760c$49f05ed0$a02037d2@kwan022>



----- Original Message -----
From: "Peter Dalgaard BSA" <p.dalgaard@biostat.ku.dk>
To: <r-devel@r-project.org>
Sent: Friday, October 18, 2002 1:34 AM
Subject: R-1.6.1beta available


> R 1.6.1 has been scheduled for November 1.
>
> We're makin interim beta versions available via
>
> http://cran.us.r-project.org/src/base
>
> (ftp://cran.us.r-project.org/pub/R/src/base used to work, but
> apparently FTP access has been disabled)
>
> The filename is R-1.6.1beta_*.tar.gz, where * is the creation date.
>
> If you want to help ensure that the final 1.6.1 works satisfactorily
> on *your* platform, it might be a good idea to make a test build of
> the beta and report any errors back (to the r-devel list, not to me
> personally, please!).
>


I've successfully compiled it (with ActiveTcl 8.4.0.1 too!) on Windows.  The
file size is ~ 21MB.

I didn't realise it was R 1.6.1 beta at first.  I was using rsync to get
r-patched on my 1.6.0,   Then after compilation/installation I realised it
is in fact 1.6.1 Beta.  I'm assuming one can rsync it?  The command I used
was:
   rsync -aC rsync.r-project.org::r-patched ./R-patched

Cheers,

Ko-Kang Wang

------------------------------------------------
Ko-Kang Kevin Wang
Post Graduate PGDipSci Student
Department of Statistics
University of Auckland
New Zealand
www.stat.auckland.ac.nz/~kwan022


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Fri Oct 18 05:17:24 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 17 Oct 2002 21:17:24 -0700
Subject: REventLoop
Message-ID: <8124789E-E250-11D6-A39B-000393860F3C@stat.ucla.edu>

The REventLoop package works well on OS X, it seems, both with Gtk and
Tk. If I understand things correctly (1) it is not supposed to work  
with the
Carbon event loop yet, and (2) if I did then the quartz() graphics  
device
could be brought to the front even if R is started from the terminal,  
and (3)
I could use AquaTk instead of X11 tk.

--- Jan
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 18 08:44:16 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 18 Oct 2002 08:44:16 +0100
Subject: Documentation for .Renviron (PR#2175)
References: <Pine.LNX.4.31.0210171717250.962-100000@gannet.stats>
Message-ID: <3DAFBBD0.8390E17A@durham.ac.uk>

ripley@stats.ox.ac.uk wrote:
> 
> On Wed, 16 Oct 2002 j.c.rougier@durham.ac.uk wrote:
> 
> > Hi everyone,
> >
> > Two minor points about ?.Renviron.
> >
> > 1) If R_ENVIRON is not set then R defaults to `${R_HOME}/etc/Renviron',
> > not `${R_HOME}/etc/Renviron.site' as stated.
> 
> No, it does as it states. See the code fragment
> 
> /* try site Renviron: R_ENVIRON, then R_HOME/etc/Renviron.site. */
> void process_site_Renviron ()
> {
>     char buf[PATH_MAX];
> 
>     if(process_Renviron(getenv("R_ENVIRON"))) return;
>     if(strlen(R_Home) + strlen("/etc/Renviron.site") > PATH_MAX - 1) {
>         R_ShowMessage("path to Renviron.site is too long: skipping");
>         return;
>     }
>     sprintf(buf, "%s/etc/Renviron.site", R_Home);
>     process_Renviron(buf);
> }
> 
> in unix/sys-common.c.
> 
> The description is inaccurate though: R_HOME/etc/Renviron.site is read
> unless R_ENVIRON is set to a valid file.  I've altered the code so that
> even if R_ENVIRON is invalid R_HOME/etc/Renviron.site is skipped.
> 
> ${R_HOME}/etc/Renviron is for R's own use. It gets read whether or not
> R_ENVIRON is set.

Perhaps that could be documented as well.  I drew my inference from
observing that if I did not have a "Renviron.site", then modifications
to "Renviron", which has the same syntax as "Renviron.site", showed up
in R.

Jonathan.


-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Oct 18 08:49:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 18 Oct 2002 08:49:49 +0100 (BST)
Subject: Documentation for .Renviron (PR#2175)
In-Reply-To: <3DAFBBD0.8390E17A@durham.ac.uk>
Message-ID: <Pine.LNX.4.31.0210180846530.2899-100000@gannet.stats>

On Fri, 18 Oct 2002, Jonathan Rougier wrote:

> ripley@stats.ox.ac.uk wrote:
> >
> > On Wed, 16 Oct 2002 j.c.rougier@durham.ac.uk wrote:
> >
> > > Hi everyone,
> > >
> > > Two minor points about ?.Renviron.
> > >
> > > 1) If R_ENVIRON is not set then R defaults to `${R_HOME}/etc/Renviron',
> > > not `${R_HOME}/etc/Renviron.site' as stated.
> >
> > No, it does as it states. See the code fragment
> >
> > /* try site Renviron: R_ENVIRON, then R_HOME/etc/Renviron.site. */
> > void process_site_Renviron ()
> > {
> >     char buf[PATH_MAX];
> >
> >     if(process_Renviron(getenv("R_ENVIRON"))) return;
> >     if(strlen(R_Home) + strlen("/etc/Renviron.site") > PATH_MAX - 1) {
> >         R_ShowMessage("path to Renviron.site is too long: skipping");
> >         return;
> >     }
> >     sprintf(buf, "%s/etc/Renviron.site", R_Home);
> >     process_Renviron(buf);
> > }
> >
> > in unix/sys-common.c.
> >
> > The description is inaccurate though: R_HOME/etc/Renviron.site is read
> > unless R_ENVIRON is set to a valid file.  I've altered the code so that
> > even if R_ENVIRON is invalid R_HOME/etc/Renviron.site is skipped.
> >
> > ${R_HOME}/etc/Renviron is for R's own use. It gets read whether or not
> > R_ENVIRON is set.
>
> Perhaps that could be documented as well.  I drew my inference from
> observing that if I did not have a "Renviron.site", then modifications
> to "Renviron", which has the same syntax as "Renviron.site", showed up
> in R.

It is already documented in R-patched, with the comment that this is only
so for Unix-alikes.

Where did you get the idea that it was safe for you to tinker with
etc/Renviron, though?  Because etc/Renviron is used elsewhere (in the
shell scripts), it is not safe to change.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Fri Oct 18 09:41:14 2002
From: jago@mclink.it (Stefano Iacus)
Date: Fri, 18 Oct 2002 10:41:14 +0200
Subject: REventLoop
In-Reply-To: <8124789E-E250-11D6-A39B-000393860F3C@stat.ucla.edu>
Message-ID: <5C851B5E-E275-11D6-BB1C-003065CC4CB8@mclink.it>

Hopefully yes. This is what I was looking at.

stefano

On Friday, October 18, 2002, at 06:17 AM, Jan de Leeuw wrote:

> The REventLoop package works well on OS X, it seems, both with Gtk and
> Tk. If I understand things correctly (1) it is not supposed to work  
> with the
> Carbon event loop yet, and (2) if I did then the quartz() graphics  
> device
> could be brought to the front even if R is started from the terminal,  
> and (3)
> I could use AquaTk instead of X11 tk.
>
> --- Jan
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical  
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email:  
> deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>   
> ----------------------------------------------------------------------- 
> --------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>   
> ----------------------------------------------------------------------- 
> --------------------------
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Oct 18 12:38:57 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 18 Oct 2002 06:38:57 -0500
Subject: Debian packages of R-1.6.1beta available
In-Reply-To: <x2of9t451t.fsf@biostat.ku.dk>
References: <x2of9t451t.fsf@biostat.ku.dk>
Message-ID: <20021018113857.GA3962@sonny.eddelbuettel.com>

On Thu, Oct 17, 2002 at 02:34:54PM +0200, Peter Dalgaard BSA wrote:
> R 1.6.1 has been scheduled for November 1.
> 
> We're makin interim beta versions available via
> 
> http://cran.us.r-project.org/src/base
>
> (ftp://cran.us.r-project.org/pub/R/src/base used to work, but
> apparently FTP access has been disabled)
> 
> The filename is R-1.6.1beta_*.tar.gz, where * is the creation date.  

Debian packages were uploaded for i386 last evening, and have already been
compiled successfully for six other architectures (alpha arm hppa ia64
powerpc and m68k). The remaining four (m68k mips mipsel sparc) should follow
shortly. 

My i386 release was built on 'testing' (aka 'sarge') and should be
installable on any testing or unstable machine. The other architectures
may require the unstable release.

> If you want to help ensure that the final 1.6.1 works satisfactorily
> on *your* platform, it might be a good idea to make a test build of
> the beta and report any errors back (to the r-devel list, not to me
> personally, please!).

No issues to report.

> New versions will be made available each day until the final release,
> barring hardware trouble and build script failures.

As with the 1.[456].* prereleases, I will probably stick to weekly
snapshots.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rab@nauticom.net  Fri Oct 18 15:21:49 2002
From: rab@nauticom.net (rab@nauticom.net)
Date: Fri, 18 Oct 2002 16:21:49 +0200 (MET DST)
Subject: Chron problem with R 1.6.0 (PR#2181)
Message-ID: <200210181421.QAA15737@pubhealth.ku.dk>

Full_Name: Rick Bilonick
Version: 1.6.0
OS: Linux (RH 7.1)
Submission from: (NULL) (12.4.226.1)


Hi. I'm using Red Hat 7.1 Linux (Intel 586). I installed the 1.6.0 rpm. No
problems were reported. When I tried to load the chron library:

Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library "/usr/lib/R/library/chron/libs/chron.so":
  libR.so: cannot load shared object file: No such file or directory
Error in library(chron) : .First.lib failed

I checked to see if there was a new version of chron but apparently I had the
latest version. I did an "update.packages" any way. It updated a number of
packages but not chron. I haven't noticed any problems with other packages. R
appears to run OK.

I'm not sure why chron.so was missing. I removed the chron package and
re-installed chron. That fixed the problem. But what happened to chron.so when I
installed 1.6.0?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Oct 18 16:16:38 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 18 Oct 2002 17:16:38 +0200 (MET DST)
Subject: underflow handling in besselK (PR#2179)
Message-ID: <200210181516.RAA16040@pubhealth.ku.dk>

>>>>> "Ben" == Ben Bolker <bolker@zoo.ufl.edu>
>>>>>     on Thu, 17 Oct 2002 19:58:33 +0200 (MET DST) writes:

    Ben> The besselK() function knows about overflows/underflows internally;
    Ben> there is a constant xmax_BESS_K in src/nmath/bessel.h (and referred to
    Ben> only in bessel_k.c), equal to 705.342, which is checked if expon.scaled is
    Ben> FALSE.  (The equivalent number for bessel_i.c is 709, defined as
    Ben> exparg_BESS in bessel.h.) However, besselK(x) silently returns +Inf if
    x> 705.342.  This behavior is reasonable for besselI (where the problem is
    Ben> an overflow), but seems wrong for besselK (since the problem here is an
    Ben> *underflow*).  The answer may be as simple as returning 0 rather than +Inf
    Ben> in this case.
 
Yes, indeed.

    Ben> If this is appropriate, the following patch should do the job:
    Ben> 
    Ben> <...........>

"R-patched" now contains something like your patch, namely :

 	if(ex <= 0 || (*ize == 1 && ex > xmax_BESS_K)) {
+	    if(ex <= 0) {
 	    ML_ERROR(ME_RANGE);
-	    *ncalc = *nb;
 	    for(i=0; i < *nb; i++)
 		bk[i] = ML_POSINF;
+	    } else /* would only have underflow */
+		for(i=0; i < *nb; i++)
+		    bk[i] = 0.;
+	    *ncalc = *nb;
 	    return;
 	}

Thank you for the report!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 18 20:26:09 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Oct 2002 21:26:09 +0200
Subject: Chron problem with R 1.6.0 (PR#2181)
In-Reply-To: <200210181421.QAA15737@pubhealth.ku.dk>
References: <200210181421.QAA15737@pubhealth.ku.dk>
Message-ID: <x28z0v8s6m.fsf@biostat.ku.dk>

rab@nauticom.net writes:

> Hi. I'm using Red Hat 7.1 Linux (Intel 586). I installed the 1.6.0 rpm. No
> problems were reported. When I tried to load the chron library:
> 
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library "/usr/lib/R/library/chron/libs/chron.so":
>   libR.so: cannot load shared object file: No such file or directory
> Error in library(chron) : .First.lib failed
> 
> I checked to see if there was a new version of chron but apparently I had the
> latest version. I did an "update.packages" any way. It updated a number of
> packages but not chron. I haven't noticed any problems with other packages. R
> appears to run OK.
> 
> I'm not sure why chron.so was missing. I removed the chron package and
> re-installed chron. That fixed the problem. But what happened to chron.so when I
> installed 1.6.0?

Chron is not part of 1.6.0, so you must have had it before.
Presumably, your old version of R was built with support for R as a
shared library and the new one isn't, so chron.so goes looking for
libR.so on loading, and it isn't there anymore. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Mon Oct 21 06:15:05 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Mon, 21 Oct 2002 07:15:05 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200210210515.g9L5F5V24536@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
--Strange interaction between "Marsaglia-Multicarry" generator and
--"Kinderman-Ramage" 
--method for normal variates. Apparently, switching either of them will help.

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
--A report on lattice
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1745 *
Subject: nlme: failed augPred with NA in an unused column
From: dieter.menne@menne-biomed.de
Date: Fri, 5 Jul 2002 08:32:32 +0200 (MET DST)
--nlme needs an update as suggested in the followup
* PR# 1901 *
Subject: svm seg faults
From: stefan.boehringer+science@uni-bochum.de
Date: Tue, 13 Aug 2002 14:12:17 +0200 (MET DST)
--Seem to be due to gcc `2.96' from RH7.3
* PR# 1974 *
Subject: Rwave installation problem
From: ld-temp-qt3i@pobox.com
Date: Mon, 2 Sep 2002 09:27:36 +0200 (MET DST)
* PR# 1977 *
Subject: Bugs in $RHOME/src/library/SJava/src/makefile.win
From: grimm.hinz@rcc.ch
Date: Tue, 3 Sep 2002 13:13:17 +0200 (MET DST)
* PR# 1978 *
Subject: SJava 0.65, Sample Java files are missing
From: grimm.heinz@rcc.ch
Date: Tue, 3 Sep 2002 13:24:30 +0200 (MET DST)
* PR# 2173 *
Subject: xlim in plot.survfit() [with a discussion on "..."]
From: jerome@hivnet.ubc.ca
Date: Wed, 16 Oct 2002 18:46:11 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000
* PR# 2170 *
Subject: documentation: Missing paranthesis in reshape.Rd
From: lina@u.washington.edu
Date: Wed, 16 Oct 2002 08:36:07 +0200 (MET DST)

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1899 *
Subject: interaction.plot() legend too narrow when mfcol > 2
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 13 Aug 2002 09:36:15 +0200
* PR# 1933 *
Subject: dev2eps() prints ticks with wrong length!
From: Timur Elzhov <Timur.Elzhov@jinr.ru>
Date: Fri, 23 Aug 2002 17:22:15 +0400
--dev.copy problem
* PR# 1972 *
Subject: lattice install
From: robert.king@newcastle.edu.au
Date: Mon, 2 Sep 2002 04:55:41 +0200 (MET DST)
--Perhaps lattice should require(grid) and print a clearer message?
* PR# 2069 *
Subject: split.screen problem
From: cbodily@att.net
Date: Thu, 26 Sep 2002 19:37:40 +0200 (MET DST)

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
--Looks like a conspiracy between a shell problem and an oddity in Tk 8.0 rather
--than an R problem. Good to know for the workaround though. The comment in
--TK_XINCLUDES has since disappeared, at least in Tk 8.3.3.
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
--Tried to use fort77 on RedHat, should likely try g77 instead.
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
--Missing perl??
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
--Probably fixed in 1.5.1
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
--Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000
--Missing info on R version and compilers.
* PR# 1937 *
Subject:  Inconsistent use of Perl? 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Sat, 24 Aug 2002 18:41:09 +0800
--Some packages require Perl v 5.005
* PR# 1995 *
Subject:  2002-09-08 1.6.0 build fails in Recommended 
From: <stvjc@channing.harvard.edu>
Date: Sun, 8 Sep 2002 23:57:39 -0400 (EDT)
--I think this got cleared up...
* PR# 1996 *
Subject:  config checks for --with-gnome need update 
From: <stvjc@channing.harvard.edu>
Date: Mon, 9 Sep 2002 00:08:59 -0400 (EDT)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1891 *
Subject: summary.data.frame with compound elements problem
From: b.rowlingson@lancaster.ac.uk
Date: Fri, 9 Aug 2002 10:35:43 +0200 (MET DST)

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
--The bug is that we get as far as mkCLOSXP before an error is reported

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
--In fact, as.POSIXct is off by 66 years. See
--   http://developer.apple.com/qa/ops/ops23.html
--This is semifixed, but timezones still don't work
* PR# 1991 *
Subject: Mac Save As... bug
From: Tim Cole <tjc1@cam.ac.uk>
Date: Sun, 8 Sep 2002 13:47:00 +0100

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
--The problem is actually deeper than this.
--
--Sometime update() wants to evaluate arguments in the environment where the model
--was defined, as here. 
--
--Sometimes it wants to use the current environment, eg this snippet from MASS 
--ph.fun <- function(data, i) {
--  d <- data
--  d$calls <- d$fitted + d$res[i]
--  coef(update(fit, data=d))
--}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)
* PR# 2091 *
Subject: Scripts not executable
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 2 Oct 2002 00:54:15 +0200 (CEST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
--A crash that is *very* hard to trigger (after several
--minutes of continuous resizing)

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1761 *
Subject: svd() very slow for wide matrix X but not for t(X)
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Tue, 9 Jul 2002 11:39:15 -0400 
--Doesn't happen with the now preferred La.svd.
* PR# 2003 *
Subject: rhome.c: getRHOME() fails, if R is called from SJava
From: grimm.heinz@rcc.ch
Date: Wed, 11 Sep 2002 15:17:53 +0200 (MET DST)
* PR# 2018 *
Subject: missing data in stripchart
From: baron@CATTELL.psych.upenn.edu
Date: Sat, 14 Sep 2002 19:35:32 +0200 (MET DST)
* PR# 2019 *
Subject: p.s. regarding stripchart missing-data report
From: Jonathan Baron <baron@cattell.psych.upenn.edu>
Date: Sat, 14 Sep 2002 13:48:34 -0400
* PR# 2023 *
Subject: mosaicplot enhancements
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Mon, 16 Sep 2002 12:00:26 +0200
* PR# 2033 *
Subject: switch
From: rwehrens@sci.kun.nl
Date: Tue, 17 Sep 2002 23:25:39 +0200 (MET DST)
--not a bug; but worth a documentation hint
* PR# 2038 *
Subject: savehistory directories and quitting R
From: Mark.Bravington@csiro.au
Date: Thu, 19 Sep 2002 14:53:25 +1000
* PR# 2090 *
Subject: Unsolved symbols: meet_ Tcl_EvalObjv
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 2 Oct 2002 00:44:42 +0200 (CEST)
* PR# 2094 *
Subject: Mean and var inconsistency
From: Kevin.Wright@pioneer.com
Date: Wed, 2 Oct 2002 16:19:27 +0200 (MET DST)
* PR# 2116 *
From: "Brian McArdle" <b.mcardle@auckland.ac.nz>
Date: Mon, 7 Oct 2002 15:46:21 +1300
* PR# 2144 *
Subject: Save() with ascii=TRUE may corrupt numeric values
From: "Efthymiou, Nick" <Nick.Efthymiou@schwab.com>
Date: Thu, 10 Oct 2002 14:09:21 -0700
* PR# 2159 *
Subject: The class attribute on an environment seems buggy
From: hb@maths.lth.se
Date: Mon, 14 Oct 2002 01:34:45 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Oct 21 16:42:19 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 21 Oct 2002 17:42:19 +0200
Subject: dist() {"mva" package} bug: treats +/- Inf as NA
Message-ID: <15796.8283.220924.525706@gargle.gargle.HOWL>

Vince Carey found this (thank you!).
Since the fix to the problem is not entirely obvious, I post
this to R-devel as RFC:

help(dist)  says:

 >>  Missing values are allowed, and are excluded from all computations
 >>  involving the rows within which they occur.  If some columns are
 >>  excluded in calculating a Euclidean, Manhattan or Canberra
 >>  distance, the sum is scaled up proportionally to the number of
 >>  columns used. If all pairs are excluded when calculating a
 >>  particular distance, the value is `NA'.

but the C code in  ....../src/library/mva/src/distance.c,
has, e.g. for the Euclidean distance :

    count= 0;
    dist = 0;
    for(j = 0 ; j < nc ; j++) {
	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
	    dev = (x[i1] - x[i2]);
	    dist += dev * dev;
	    count++;
	}
	i1 += nr;
	i2 += nr;
    }
    if(count == 0) return NA_REAL;
    if(count != nc) dist /= ((double)count/nc);
    return sqrt(dist);

where it is clear that "R_FINITE(*)" should in principle be
replaced by  "!ISNAN(*)".

Note however that "Inf - Inf -> NaN" and e.g the canberra metric
has more ways to get "NaN".

The current code drops all pairs with an +-Inf in it.
I would be inclined to really replace
	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
by
	if(!ISNAN(x[i1])   && !ISNAN(x[i2])) {

for all metrics -- for R-patched.

But I'd also see reasons where we'd want to be smarter/different
than that. One possibility would be to drop the pair (as
currently) also when both are not finite, 
for "binary" to signal an error for +- Inf,
and for "Canberra" :
    Of course,  d =  |x - y| / |x + y| 
    will be 1 , when one of {x,y} is infinite.
This could be considered the desired answser, or also
we may give a warning in any case.

Opinions?


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 21 17:44:53 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 21 Oct 2002 17:44:53 +0100 (BST)
Subject: dist() {"mva" package} bug: treats +/- Inf as NA
In-Reply-To: <15796.8283.220924.525706@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0210211738270.28813-100000@gannet.stats>

I think this is definitely better left as is (and definitely so for
1.6.1), perhaps documenting the fact.  What is done seems quite sensible
to me: you really can't have infinite values in an L_2 or L_1 space, and
so Euclidean and L_1 (= Manhattan) distances are not defined.

One could argue for just one infinity point, with zero distance between
infinity points and infinite to all finite points, for example (and NA to
missing values).  It really isn't just one answer.

On Mon, 21 Oct 2002, Martin Maechler wrote:

> Vince Carey found this (thank you!).
> Since the fix to the problem is not entirely obvious, I post
> this to R-devel as RFC:
>
> help(dist)  says:
>
>  >>  Missing values are allowed, and are excluded from all computations
>  >>  involving the rows within which they occur.  If some columns are
>  >>  excluded in calculating a Euclidean, Manhattan or Canberra
>  >>  distance, the sum is scaled up proportionally to the number of
>  >>  columns used. If all pairs are excluded when calculating a
>  >>  particular distance, the value is `NA'.
>
> but the C code in  ....../src/library/mva/src/distance.c,
> has, e.g. for the Euclidean distance :
>
>     count= 0;
>     dist = 0;
>     for(j = 0 ; j < nc ; j++) {
> 	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
> 	    dev = (x[i1] - x[i2]);
> 	    dist += dev * dev;
> 	    count++;
> 	}
> 	i1 += nr;
> 	i2 += nr;
>     }
>     if(count == 0) return NA_REAL;
>     if(count != nc) dist /= ((double)count/nc);
>     return sqrt(dist);
>
> where it is clear that "R_FINITE(*)" should in principle be
> replaced by  "!ISNAN(*)".
>
> Note however that "Inf - Inf -> NaN" and e.g the canberra metric
> has more ways to get "NaN".
>
> The current code drops all pairs with an +-Inf in it.
> I would be inclined to really replace
> 	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
> by
> 	if(!ISNAN(x[i1])   && !ISNAN(x[i2])) {
>
> for all metrics -- for R-patched.
>
> But I'd also see reasons where we'd want to be smarter/different
> than that. One possibility would be to drop the pair (as
> currently) also when both are not finite,
> for "binary" to signal an error for +- Inf,
> and for "Canberra" :
>     Of course,  d =  |x - y| / |x + y|
>     will be 1 , when one of {x,y} is infinite.
> This could be considered the desired answser, or also
> we may give a warning in any case.
>
> Opinions?
>
>
> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 21 21:24:45 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 21 Oct 2002 21:24:45 +0100 (GMT Daylight Time)
Subject: RFC: Loading packages at startup
Message-ID: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>

I've been kicking the following idea around for a while, and am now
proposing to put some version into 1.7.0.  I'd be interested in
comments on the desirability and the design, before I start writing
any code.

S4 introduced a file .S.chapters which can contain a list of S
chapters (equivalent to R packages) to be loaded on start-up.  This
was the germ of this proposal.

Proposal:

Extend the initialization as described in Startup.Rd by having
optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
the latter in the starting directory or failing that the user's home
directory. Each would contain a list of packages, one per line, to be
loaded when R is started, in the order in the files.

Some details:

1) I think the packages should be loaded before .Rprofile and .RData
   are processed, and R_HOME/etc/Rpackages.site before .Rpackages.
   This can be argued, and the S4 parallel would seem to be to load
   packages after S.init (the nearest it has to Rprofile).  But we
   would load library/base/Rprofile first of all so the analogy is not
   close.

2) The present kludge of loading ctest in .First could be replaced
   by making ctest the default content of R_HOME/etc/Rpackages.site
   (in the light of point 5).

3) It would be useful to allow the library tree to be specified, as a
   second field on the line.

4) One problem with saving an R session and then restoring it is that
   the packages in use are not reloaded.  Quitting an R session and
   saving could write .Rpackages in the current directory (with the
   library recorded if it were not the default).  Then restarting a
   session in that directory would restore the loaded packages
   automatically.

5) We might want to allow a .Rpackages file to override Rpackages.site
   (or we might not).  One idea is to allow a minus sign in front of a
   package name, and to merge the Rpackages.site and .Rpackages files
   before loading any packages.  If we did this we probably need to be
   able to save the list of packages to be loaded (and can't easily save
   those not to be loaded), so perhaps -- as the first list of .Rpackages
   should empty the list.

6) One could argue for R_HOME/etc/Rpackages as the `system' file as
   well, and this might be useful if we break base up into smaller
   components.

7) I would allow comment lines in the files, starting with #.

8) The file names or names could be set by environment variables.  It's
   strange that we allow the site file names for Rprofile and Renviron and
   the user file name for command histories to be set in that way.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark0060@tc.umn.edu  Mon Oct 21 23:56:20 2002
From: mark0060@tc.umn.edu (mark0060@tc.umn.edu)
Date: Tue, 22 Oct 2002 00:56:20 +0200 (MET DST)
Subject: png printing (PR#2192)
Message-ID: <200210212256.AAA02294@pubhealth.ku.dk>

Full_Name: Kristian Eric Markon
Version: 1.6
OS: Win 98
Submission from: (NULL) (24.26.167.90)


I noticed sort of an odd bug when I was printing out figures to png files.

It's a bit difficult to explain how to reproduce exactly, because it depends on
a lot of data specific to my situation.

Basically, if I plot the figure to the screen, it looks exactly as it should. If
I plot the figure to jpeg, it looks exactly as it should. However, if I plot it
to a png, a plot appears, but various parameters (e.g., title, ylim, etc.) are
different. 

I can sometimes reproduce something that's somewhat similar through the
following:

temp = c("hi", "hey there", "whatcha doin")

plot(rnorm(100), rnorm(100), main=temp[3]) # should appear as one would expect

jpeg("c:/temp/temp.jpeg")
plot(rnorm(100), rnorm(100), main=temp[3]) # should appear as one would expect
dev.off()

png("c:/temp/temp.png")
plot(rnorm(100), rnorm(100), main=temp[3]) # either very small or no main title
dev.off()


It gets even more complicated with the plotting I'm doing, because, e.g., rather
than plotting a figure with no title, it will plot a title, but the wrong title.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark0060@tc.umn.edu  Mon Oct 21 23:57:59 2002
From: mark0060@tc.umn.edu (mark0060@tc.umn.edu)
Date: Tue, 22 Oct 2002 00:57:59 +0200 (MET DST)
Subject: png printing (PR#2193)
Message-ID: <200210212257.AAA02314@pubhealth.ku.dk>

Full_Name: Kristian Eric Markon
Version: 1.6
OS: Win 98
Submission from: (NULL) (24.26.167.90)


I noticed sort of an odd bug when I was printing out figures to png files.

It's a bit difficult to explain how to reproduce exactly, because it depends on
a lot of data specific to my situation.

Basically, if I plot the figure to the screen, it looks exactly as it should. If
I plot the figure to jpeg, it looks exactly as it should. However, if I plot it
to a png, a plot appears, but various parameters (e.g., title, ylim, etc.) are
different. 

I can sometimes reproduce something that's somewhat similar through the
following:

temp = c("hi", "hey there", "whatcha doin")

plot(rnorm(100), rnorm(100), main=temp[3]) # should appear as one would expect

jpeg("c:/temp/temp.jpeg")
plot(rnorm(100), rnorm(100), main=temp[3]) # should appear as one would expect
dev.off()

png("c:/temp/temp.png")
plot(rnorm(100), rnorm(100), main=temp[3]) # either very small or no main title
dev.off()


It gets even more complicated with the plotting I'm doing, because, e.g., rather
than plotting a figure with no title, it will plot a title, but the wrong title.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark0060@tc.umn.edu  Tue Oct 22 00:37:13 2002
From: mark0060@tc.umn.edu (mark0060@tc.umn.edu)
Date: Tue, 22 Oct 2002 01:37:13 +0200 (MET DST)
Subject: png-oops (PR#2195)
Message-ID: <200210212337.BAA02422@pubhealth.ku.dk>

Full_Name: Kristian Markon
Version: 1.6
OS: Win 98
Submission from: (NULL) (24.26.167.90)


I just submitted a report on a png bug in R. I now think it's not an R bug, but
rather, a Mozilla bug or a windows bug. 

Anyway, if you're having trouble duplicating the bug, that's probably why.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Mark.Bravington@csiro.au  Tue Oct 22 00:41:39 2002
From: Mark.Bravington@csiro.au (Mark.Bravington@csiro.au)
Date: Tue, 22 Oct 2002 10:41:39 +1100
Subject: savehistory directories and quitting R (PR#2038)
Message-ID: <A8877251964B294BAB5BA1FC58B43FED025B4320@molly.tas.csiro.au>

Thanks-- as Duncan Murdoch also noted, R_HISTFILE can be used to solve my
problem, as below. BTW it's not easy to find out about R_HISTFILE in the
help system or manuals, though, unless you already know it exists-- it only
seems to be described under startup options, not things to do with history.

However, Duncan's reply did hint at an inconsistency, in that savehistory()
defaults to using a file called .Rhistory in getwd(), rather than using
R_HISTFILE. I've modified my savehistory to default to R_HISTFILE if it
exists, like so:

savehistory_ function( file) {
  if( missing( file) && is.null( file <- Sys.getenv( 'R_HISTFILE')))
    file <- '.Rhistory'
  get( 'savehistory', pos='package:base')( file)
}

#This is not a bug. If you override a system function, you 
#can't expect it
#to be used by R internals.  Indeed, as from 1.6.0 you can't 
#even expect it
#to be used by R's base functions, due to namespaces.

With an eye to namespace-like issues, I originally put some code in .First
to overwrite the version of savehistory within package:base, rather than
simply masking it with a copy in .GlobalEnv. But, since savehistory wasn't
actually called at quit time, even that didn't fool the system...

cheers
Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

#-----Original Message-----
#From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
#Sent: Tuesday, 15 October 2002 12:31 AM
#To: Mark.Bravington@csiro.au
#Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
#Subject: Re: savehistory directories and quitting R (PR#2038)
#
#
#This is not a bug. If you override a system function, you 
#can't expect it
#to be used by R internals.  Indeed, as from 1.6.0 you can't 
#even expect it
#to be used by R's base functions, due to namespaces.
#
#There are very good reasons for the internal quit code not to 
#call user's
#R code, the main one being that R errors will not be handled then.
#.Last is made available as a hook to enable you to do what you want:
#as the help page says.
#
#Doesn't setting R_HISTFILE do this for you automatically? Just set
#R_HISTFILE="D:/R50/.Rhistory" and the history should be loaded 
#and saved
#to the specified place.  Works under Unix, at least.
#
#
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Tue Oct 22 05:56:50 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Mon, 21 Oct 2002 21:56:50 -0700
Subject: gcc-3.3
Message-ID: <AD09F904-E57A-11D6-85DD-000393860F3C@stat.ucla.edu>

I managed to build R-1.6.1 with gcc-3.3 from Apple CVS on Jaguar
(with the -bundle hack). It would be nice to add the -mdynamic-no-pic
flag when compiling code that goes into R.bin (i.e. into the
application). This supposedly can give a 10% speed increase with Mach-O
files. The default Jaguar compiler, gcc-3.1, already understands this
option, but gcc-2.95.2 does not.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 22 07:53:18 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 22 Oct 2002 07:53:18 +0100 (BST)
Subject: savehistory directories and quitting R (PR#2038)
In-Reply-To: <A8877251964B294BAB5BA1FC58B43FED025B4320@molly.tas.csiro.au>
Message-ID: <Pine.LNX.4.31.0210220752210.22460-100000@gannet.stats>

On Tue, 22 Oct 2002 Mark.Bravington@csiro.au wrote:

> Thanks-- as Duncan Murdoch also noted, R_HISTFILE can be used to solve my
> problem, as below. BTW it's not easy to find out about R_HISTFILE in the
> help system or manuals, though, unless you already know it exists-- it only
> seems to be described under startup options, not things to do with history.
>
> However, Duncan's reply did hint at an inconsistency, in that savehistory()
> defaults to using a file called .Rhistory in getwd(), rather than using
> R_HISTFILE. I've modified my savehistory to default to R_HISTFILE if it
> exists, like so:

Yes, intentional.  Note that it is not R_HISTFILE used, but its value at
the beginning of the session ....

>
> savehistory_ function( file) {
>   if( missing( file) && is.null( file <- Sys.getenv( 'R_HISTFILE')))
>     file <- '.Rhistory'
>   get( 'savehistory', pos='package:base')( file)
> }
>
> #This is not a bug. If you override a system function, you
> #can't expect it
> #to be used by R internals.  Indeed, as from 1.6.0 you can't
> #even expect it
> #to be used by R's base functions, due to namespaces.
>
> With an eye to namespace-like issues, I originally put some code in .First
> to overwrite the version of savehistory within package:base, rather than
> simply masking it with a copy in .GlobalEnv. But, since savehistory wasn't
> actually called at quit time, even that didn't fool the system...
>
> cheers
> Mark
>
> *******************************
>
> Mark Bravington
> CSIRO (CMIS)
> PO Box 1538
> Castray Esplanade
> Hobart
> TAS 7001
>
> phone (61) 3 6232 5118
> fax (61) 3 6232 5012
> Mark.Bravington@csiro.au
>
> #-----Original Message-----
> #From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> #Sent: Tuesday, 15 October 2002 12:31 AM
> #To: Mark.Bravington@csiro.au
> #Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> #Subject: Re: savehistory directories and quitting R (PR#2038)
> #
> #
> #This is not a bug. If you override a system function, you
> #can't expect it
> #to be used by R internals.  Indeed, as from 1.6.0 you can't
> #even expect it
> #to be used by R's base functions, due to namespaces.
> #
> #There are very good reasons for the internal quit code not to
> #call user's
> #R code, the main one being that R errors will not be handled then.
> #.Last is made available as a hook to enable you to do what you want:
> #as the help page says.
> #
> #Doesn't setting R_HISTFILE do this for you automatically? Just set
> #R_HISTFILE="D:/R50/.Rhistory" and the history should be loaded
> #and saved
> #to the specified place.  Works under Unix, at least.
> #
> #
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Oct 22 09:57:41 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Tue, 22 Oct 2002 10:57:41 +0200
Subject: RFC: Loading packages at startup
In-Reply-To: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
Message-ID: <15797.4869.19825.851756@galadriel.ci.tuwien.ac.at>


Brian,

Sounds great to me! I use something much simpler to emulate exactly
that feature using .First and .Last

>>>>> On Mon, 21 Oct 2002 21:24:45 +0100 (GMT Daylight Time),
>>>>> Prof Brian D Ripley (PBDR) wrote:

  > I've been kicking the following idea around for a while, and am now
  > proposing to put some version into 1.7.0.  I'd be interested in
  > comments on the desirability and the design, before I start writing
  > any code.



  > S4 introduced a file .S.chapters which can contain a list of S
  > chapters (equivalent to R packages) to be loaded on start-up.  This
  > was the germ of this proposal.

  > Proposal:

  > Extend the initialization as described in Startup.Rd by having
  > optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
  > the latter in the starting directory or failing that the user's home
  > directory. Each would contain a list of packages, one per line, to be
  > loaded when R is started, in the order in the files.

  > Some details:

[...]


  > 3) It would be useful to allow the library tree to be specified, as a
  >    second field on the line.

Or simply use paths? e.g.,

foo
/path/to/bar

could be read as

require(foo)
require(bar, lib="/path/to")


  > 4) One problem with saving an R session and then restoring it is that
  >    the packages in use are not reloaded.  Quitting an R session and
  >    saving could write .Rpackages in the current directory (with the
  >    library recorded if it were not the default).  Then restarting a
  >    session in that directory would restore the loaded packages
  >    automatically.

Yes, I do that for quite some time now (though my hacks were never
foolproof enough for public consumption).

  > 5) We might want to allow a .Rpackages file to override Rpackages.site
  >    (or we might not).

I think merging is better than overriding, especially in the light of
6.

  >    One idea is to allow a minus sign in front of a
  >    package name, and to merge the Rpackages.site and .Rpackages files
  >    before loading any packages.  If we did this we probably need to be
  >    able to save the list of packages to be loaded (and can't easily save
  >    those not to be loaded), so perhaps -- as the first list of .Rpackages
  >    should empty the list.

Sounds good, so lines starting with a minus sign are persistent and
the others get modified upon saving?



  > 6) One could argue for R_HOME/etc/Rpackages as the `system' file as
  >    well, and this might be useful if we break base up into smaller
  >    components.

  > 7) I would allow comment lines in the files, starting with #.

yes

  > 8) The file names or names could be set by environment variables.  It's
  >    strange that we allow the site file names for Rprofile and Renviron and
  >    the user file name for command histories to be set in that way.

Hmm, do we really need to be able to modify those? Makes writing docs
and debugging harder ...

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ted.Harding@nessie.mcc.ac.uk  Tue Oct 22 09:34:49 2002
From: Ted.Harding@nessie.mcc.ac.uk ( (Ted Harding))
Date: Tue, 22 Oct 2002 09:34:49 +0100 (BST)
Subject: RFC: Loading packages at startup
In-Reply-To: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
Message-ID: <XFMail.021022093449.Ted.Harding@nessie.mcc.ac.uk>

On 21-Oct-02 Prof Brian D Ripley wrote:
> [...]
> Proposal:
> 
> Extend the initialization as described in Startup.Rd by having
> optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
> the latter in the starting directory or failing that the user's home
> directory. Each would contain a list of packages, one per line, to be
> loaded when R is started, in the order in the files.

This would certainly be useful, especially (as in (4) below) when
resuming an analysis session.

> Some details:
> [...]
> 4) One problem with saving an R session and then restoring it is that
>    the packages in use are not reloaded.  Quitting an R session and
>    saving could write .Rpackages in the current directory (with the
>    library recorded if it were not the default).  Then restarting a
>    session in that directory would restore the loaded packages
>    automatically.

A comment from a practical user's viewpoint. I'm not sure of the value
of having this happen automatically. In practice I have a directory for
a dataset, only occasionally different sub-directories for different
analyses, and several different analyses might be done on that dataset.

If the above (4) were implemented as it stands, everything that was ever
loaded would be reloaded each time (if I understand right). It would be
better, perhaps, to allow flexibility (unless the overhead etc. of
loading un-needed packages could be ignored), and I can see two ways:

a) Offer a choice at startup between different ".Rpackages.XXX" where
"XXX" varies with the job and is mnemonic for the user (i.e. the user
chose it in the first place). I think this would also require the
implementation to query the user at quit time about what ".Rpackages.XXX"
should be called.

b) (More complicated and trickier to implement, more transparent
perhaps for the user, but maybe demanding too much foresight in
the implementation) the ".Rpackages" or equivalent would keep track in
some way of dependencies, so that if the user invoked a function which
had been used in a previous session, packages needed would be loaded
automatically.

Best wishes to all,
Ted.


--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding@nessie.mcc.ac.uk>
Fax-to-email: +44 (0)870 167 1972
Date: 22-Oct-02                                       Time: 09:34:49
------------------------------ XFMail ------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 22 12:00:39 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 22 Oct 2002 12:00:39 +0100 (BST)
Subject: basename/dirname changes warning.
Message-ID: <Pine.GSO.4.44.0210221156150.6162-100000@auk.stats>

basename and dirname in R <= 1.6.1 are not vectorized, and they silently
ignored all elements after the first in their input.

This was not documented, and e.g. undoc assumed basename was vectorized.

For R-patched I have added a check, and giving an argument of length more
than one is there an error.

For R-devel I have vectorized the code, and so an input of length 0 will no
longer be an error.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Oct 22 13:29:54 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 22 Oct 2002 14:29:54 +0200
Subject: dist() {"mva" package} bug: treats +/- Inf as NA
In-Reply-To: <Pine.LNX.4.31.0210211738270.28813-100000@gannet.stats>
References: <15796.8283.220924.525706@gargle.gargle.HOWL>
 <Pine.LNX.4.31.0210211738270.28813-100000@gannet.stats>
Message-ID: <15797.17602.536992.851229@gargle.gargle.HOWL>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk>
>>>>>     on Mon, 21 Oct 2002 17:44:53 +0100 (BST) writes:

    BDR> I think this is definitely better left as is (and
    BDR> definitely so for 1.6.1), perhaps documenting the fact.

I don't agree. Whenever there's only one +/- Inf in a pair, the
result is well-defined for most metrics, (often = +Inf, but for Canberra).
The current behavior of silently treating Infs the same as NA is
not acceptable IMO.

Vincent's example was basically

   dist(1:4, c(1e10, 2:4))
vs
   dist(1:4, c(Inf, 2:4))

where the 2nd should be the "limit" of the first, or at the
least should not silently give the equivalent of
   dist(1:4, c(NA, 2:4))

    BDR> 1.6.1), perhaps documenting the fact.  What is done
    BDR> seems quite sensible to me: you really can't have
    BDR> infinite values in an L_2 or L_1 space, and so
    BDR> Euclidean and L_1 (= Manhattan) distances are not
    BDR> defined.

    BDR> One could argue for just one infinity point, 
you mean, when for a scalar pair, one is +/- Inf, the other not?
Yes, this is exactly my point.

    BDR> with zero distance between infinity points and infinite to all
    BDR> finite points, for example (and NA to missing values).

    BDR> It really isn't just one answer.

I think it's not hard to do the right thing in the cases where
that's well defined (e.g. when there's at most one Inf per pair),
and
use the current behavior {dropping a pair} in the other
cases, namely in exactly those where IEEE-arithmetic (excuse the
misnomer) would return a NaN.

Martin

    BDR> On Mon, 21 Oct 2002, Martin Maechler wrote:

    >> Vince Carey found this (thank you!).
    >> Since the fix to the problem is not entirely obvious, I post
    >> this to R-devel as RFC:
    >> 
    >> help(dist)  says:
    >> 
    >> >>  Missing values are allowed, and are excluded from all computations
    >> >>  involving the rows within which they occur.  If some columns are
    >> >>  excluded in calculating a Euclidean, Manhattan or Canberra
    >> >>  distance, the sum is scaled up proportionally to the number of
    >> >>  columns used. If all pairs are excluded when calculating a
    >> >>  particular distance, the value is `NA'.
    >> 
    >> but the C code in  ....../src/library/mva/src/distance.c,
    >> has, e.g. for the Euclidean distance :
    >> 
    >> count= 0;
    >> dist = 0;
    >> for(j = 0 ; j < nc ; j++) {
    >> if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
    >> dev = (x[i1] - x[i2]);
    >> dist += dev * dev;
    >> count++;
    >> }
    >> i1 += nr;
    >> i2 += nr;
    >> }
    >> if(count == 0) return NA_REAL;
    >> if(count != nc) dist /= ((double)count/nc);
    >> return sqrt(dist);
    >> 
    >> where it is clear that "R_FINITE(*)" should in principle be
    >> replaced by  "!ISNAN(*)".
    >> 
    >> Note however that "Inf - Inf -> NaN" and e.g the canberra metric
    >> has more ways to get "NaN".
    >> 
    >> The current code drops all pairs with an +-Inf in it.
    >> I would be inclined to really replace
    >> if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
    >> by
    >> if(!ISNAN(x[i1])   && !ISNAN(x[i2])) {
    >> 
    >> for all metrics -- for R-patched.
    >> 
    >> But I'd also see reasons where we'd want to be smarter/different
    >> than that. One possibility would be to drop the pair (as
    >> currently) also when both are not finite,
    >> for "binary" to signal an error for +- Inf,
    >> and for "Canberra" :
    >> Of course,  d =  |x - y| / |x + y|
    >> will be 1 , when one of {x,y} is infinite.
    >> This could be considered the desired answser, or also
    >> we may give a warning in any case.
    >> 
    >> Opinions?
    >> 
    >> 
    >> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
    >> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
    >> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
    >> phone: x-41-1-632-3408		fax: ...-1228			<><

    BDR> -- 
    BDR> Brian D. Ripley,                  ripley@stats.ox.ac.uk
    BDR> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
    BDR> University of Oxford,             Tel:  +44 1865 272861 (self)
    BDR> 1 South Parks Road,                     +44 1865 272860 (secr)
    BDR> Oxford OX1 3TG, UK                Fax:  +44 1865 272595













-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Tue Oct 22 13:47:30 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Tue, 22 Oct 2002 08:47:30 -0400
Subject: RFC: Loading packages at startup
In-Reply-To: <15797.4869.19825.851756@galadriel.ci.tuwien.ac.at>; from Friedrich.Leisch@ci.tuwien.ac.at on Tue, Oct 22, 2002 at 10:57:41AM +0200
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel> <15797.4869.19825.851756@galadriel.ci.tuwien.ac.at>
Message-ID: <20021022084730.Z27564@jimmy.harvard.edu>

A not unrelated idea is to supply user settable hooks for save and
load. Which I am slowly working on.
When objects are saved we can probe them for their classes and then 
insert code into the saved image that will attempt to reload the
appropriate libraries when the image (or XDR file) is reloaded.
There will be a user interface to add other functions etc.

It might be worth thinking about the ability to manipulate Rpackages
objects from within R. Eg, a user can view, add or remove functions
(or expressions). 
I think making the elements function calls will give you more flexibility
in the long run.
In some ways patterning it along the lines of
on.exit may lead to less confusion.
On the otherhand, simply listing the packages is likely to be easiest.
Even in that case it would be nice to let the user have some control 
short of editing files.



On Tue, Oct 22, 2002 at 10:57:41AM +0200, Friedrich.Leisch@ci.tuwien.ac.at wrote:
> 
> Brian,
> 
> Sounds great to me! I use something much simpler to emulate exactly
> that feature using .First and .Last
> 
> >>>>> On Mon, 21 Oct 2002 21:24:45 +0100 (GMT Daylight Time),
> >>>>> Prof Brian D Ripley (PBDR) wrote:
> 
>   > I've been kicking the following idea around for a while, and am now
>   > proposing to put some version into 1.7.0.  I'd be interested in
>   > comments on the desirability and the design, before I start writing
>   > any code.
> 
> 
> 
>   > S4 introduced a file .S.chapters which can contain a list of S
>   > chapters (equivalent to R packages) to be loaded on start-up.  This
>   > was the germ of this proposal.
> 
>   > Proposal:
> 
>   > Extend the initialization as described in Startup.Rd by having
>   > optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
>   > the latter in the starting directory or failing that the user's home
>   > directory. Each would contain a list of packages, one per line, to be
>   > loaded when R is started, in the order in the files.
> 
>   > Some details:
> 
> [...]
> 
> 
>   > 3) It would be useful to allow the library tree to be specified, as a
>   >    second field on the line.
> 
> Or simply use paths? e.g.,
> 
> foo
> /path/to/bar
> 
> could be read as
> 
> require(foo)
> require(bar, lib="/path/to")
> 
> 
>   > 4) One problem with saving an R session and then restoring it is that
>   >    the packages in use are not reloaded.  Quitting an R session and
>   >    saving could write .Rpackages in the current directory (with the
>   >    library recorded if it were not the default).  Then restarting a
>   >    session in that directory would restore the loaded packages
>   >    automatically.
> 
> Yes, I do that for quite some time now (though my hacks were never
> foolproof enough for public consumption).
> 
>   > 5) We might want to allow a .Rpackages file to override Rpackages.site
>   >    (or we might not).
> 
> I think merging is better than overriding, especially in the light of
> 6.
> 
>   >    One idea is to allow a minus sign in front of a
>   >    package name, and to merge the Rpackages.site and .Rpackages files
>   >    before loading any packages.  If we did this we probably need to be
>   >    able to save the list of packages to be loaded (and can't easily save
>   >    those not to be loaded), so perhaps -- as the first list of .Rpackages
>   >    should empty the list.
> 
> Sounds good, so lines starting with a minus sign are persistent and
> the others get modified upon saving?
> 
> 
> 
>   > 6) One could argue for R_HOME/etc/Rpackages as the `system' file as
>   >    well, and this might be useful if we break base up into smaller
>   >    components.
> 
>   > 7) I would allow comment lines in the files, starting with #.
> 
> yes
> 
>   > 8) The file names or names could be set by environment variables.  It's
>   >    strange that we allow the site file names for Rprofile and Renviron and
>   >    the user file name for command histories to be set in that way.
> 
> Hmm, do we really need to be able to modify those? Makes writing docs
> and debugging harder ...
> 
> Best,
> Fritz
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B20
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Tom" <teacher_tom_dot_com@yahoo.com  Tue Oct 22 14:24:50 2002
From: Tom" <teacher_tom_dot_com@yahoo.com (Tom)
Date: Tue, 22 Oct 2002 21:24:50 +0800
Subject: No subject
Message-ID: <E183z1f-0005kr-00@bernie.ethz.ch>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Oct 22 14:46:40 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 22 Oct 2002 09:46:40 -0400
Subject: Loading packages at startup
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149D0EF@groexmb02.pfizer.com>



> 4) One problem with saving an R session and then restoring it is that
>    the packages in use are not reloaded.  Quitting an R session and
>    saving could write .Rpackages in the current directory (with the
>    library recorded if it were not the default).  Then restarting a
>    session in that directory would restore the loaded packages
>    automatically.


I've been using another approach for this.   For the R + Zope tools that
I've developed here (Yes, they will be released once I finally get through
all the red tape!) I needed a way to store all of the information about a
session, including loaded packages and the search path.

At the end of this message, I list two functions, save.session() and
load.session() which I wrote to accomplish this.  In addition, I have an .Rd
documentation file for them, and can provide that if anyone is interested.

The functions save.session() records the list of loaded packages into a
variable named ".save.session.packages" which is then saved as part of
save.image().   The load.session() function then uses load() to reload the
saved image and uses the ".save.session.packages" function to reload the
packages.  A similar thing happens for the search path.   This works well
and seems less hazard-prone than overwriting the users '.Rpackages' file for
two reasons:  1) the loaded package list and search path are preserved with
the data, and 2) we aren't messing with the user's files...

One enhancement that would be desirable is to allow the user to request that
the search path or the packages not be restored.  Of course, both can be
avoided by just using load() instead of load.session() on the data file.

-Greg

save.session <- function(file=".RSession",...)
  {
    if(!is.null(dev.list()))
       warning("Open graphics devices will not be saved or restored.")

    cat("Saving search path..\n")
    .save.session.search <<- search()
    
    cat("Saving list of loaded packages..\n")
    .save.session.packages <<- .packages()
   
    cat("Saving all data...\n")
    save(list=ls(envir = .GlobalEnv, all.names = TRUE), file=file, ...)
    cat("Done.\n")
  }

restore.session <- function(file=".RSession",...)
  {
    cat("Loading all data...\n")
    load(file,envir = .GlobalEnv,...)

    cat("Loading packages...\n")
    sapply( rev(.save.session.packages), library, character.only=T )

    cat("Restoring search path...\n")

    pad <- function(x,n) c( rep(NA,n-length(x)), x )
    
    current.search <- search()[-1]
    saved.search <- .save.session.search[-1]

    identical <- pad(current.search, length(saved.search)) == saved.search 
    
    for( i in saved.search[!identical] )
      {
        if( charmatch( "file:", i, nomatch=FALSE) )
          attach(sub( "file:", "", "file:test" ) )
        else if (charmatch( "package:", i, nomatch=FALSE)  )
          stop(paste("Somehow we missed loading package",i))
        else
          {
            do.call("attach",list(as.name(i)))
          }
               
      }

    rm(list=c(".save.session.packages",
              ".save.session.search"),
       envir = .GlobalEnv )
         
    
    cat("Done.\n")
  }    



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Oct 22 15:06:58 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 22 Oct 2002 10:06:58 -0400
Subject: Loading packages at startup
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149D0F3@groexmb02.pfizer.com>


Oh wow, just looking over this, I already see a bug.

This section of load.session():

>     for( i in saved.search[!identical] )
>       {
>         if( charmatch( "file:", i, nomatch=FALSE) )
>           attach(sub( "file:", "", "file:test" ) )
>         else if (charmatch( "package:", i, nomatch=FALSE)  )
>           stop(paste("Somehow we missed loading package",i))
>         else
>           {
>             do.call("attach",list(as.name(i)))
>           }
>                

should be

>     for( i in saved.search[!identical] )
>       {
>         if( charmatch( "file:", i, nomatch=FALSE) )
>           attach(sub( "file:", "", i ) )
>         else if (charmatch( "package:", i, nomatch=FALSE)  )
>           stop(paste("Somehow we missed loading package",i))
>         else
>           {
>             do.call("attach",list(as.name(i)))
>           }
>                

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.c.rougier@durham.ac.uk  Tue Oct 22 16:47:30 2002
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Tue, 22 Oct 2002 17:47:30 +0200 (MET DST)
Subject: Minor changes in ?class (PR#2197)
Message-ID: <200210221547.RAA11854@pubhealth.ku.dk>

Hi everyone -- these are very minor. In the Arguments section of ?class,

1) it should read "an object" for x
2) "names" in Usage is not specified, it could be included along with 
"what", ie as

names,what: a character vector naming classes.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 22 16:52:40 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 22 Oct 2002 11:52:40 -0400
Subject: RFC: Loading packages at startup
References: <XFMail.021022093449.Ted.Harding@nessie.mcc.ac.uk>
Message-ID: <3DB57448.F3A60B32@bank-banque-canada.ca>

"(Ted Harding)" wrote:

> ... so that if the user invoked a function which
> had been used in a previous session, packages needed would be loaded

Am I correct in thinking the main need for this is for object
definitions that require a package, rather than for methods? I have the
impression that putting requires() in a function works fairly well. Or
is it needed because methods for the objects need to be available?


> A comment from a practical user's viewpoint. I'm not sure of the value
> of having this happen automatically. 

I wonder about this too. Especially since I seem to spend much more time
debugging code than I do actually using it. Should I be worrying about
something similar to the mixed blessing of .a and .so executables? What
happens when packages are updated, moved to new locations (as systems
administrators are prone to do), or things are moved (among packages or
in/out of base)? What happens when I want the version of a package I am
trying to debug, not the one that is installed? Should there be a
warning if the signature on a package does not match the one originally
used? 

I guess I would like to understand that this is a step forward in
software design, not simply a minor user convenience (and possibly a
headache for developers)? Sorry if I am a bit slow on some of these
things.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Oct 22 17:01:51 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 22 Oct 2002 17:01:51 +0100
Subject: methods function
Message-ID: <3DB5766F.40AF4AEF@durham.ac.uk>

Hi everyone,

I've noticed that the methods function is incomplete.  The obvious
example is if I write a function "$.foo", it is not picked up by
methods:

> "$.foo" <- function(object, name) get(name, envir=object[[1]])         
> "$<-.foo" <- function(object, name, value) {assign(name, value, envir=object[[1]]); object}
> happy <- structure(list(new.env()), class = "foo")
> happy$dog <- "fred"
> happy$dog
[1] "fred"
> methods("$")
character(0)

This happens to be an easy one to fix: simply replace the first argument
to gsub in the final line with "([.[$])".  But then I thought about the
bigger picture.  Don't we need to escape all (well, almost all) special
characters in the "name" variable inside methods?  For example, I might
want to class an object as "dopey$", which would not be wrong.  This
would mean a function like

"methods" <- function (generic.function, class) 
{
    an <- lapply(seq(along = (sp <- search())), ls)
    names(an) <- sp
    if (!missing(generic.function)) {
        if (!is.character(generic.function)) 
            generic.function <- deparse(substitute(generic.function))
        name <- paste(generic.function, ".", sep = "")
        name <- paste("^", gsub("([.[$])", "\\\\\\1", name), sep="")
    }
    else if (!missing(class)) {
        if (!is.character(class)) 
            class <- paste(deparse(substitute(class)))
        name <- paste(".", class, sep = "")
        name <- paste(gsub("([.[$])", "\\\\\\1", name), "$", sep="")
    }
    else stop("must supply generic.function or class")
    grep(name, unlist(an), value = TRUE)
}

but with more special characters, eg "^", inside the first arguments to
gsub.  Is this worth thinking about?

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Tue Oct 22 17:15:17 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Tue, 22 Oct 2002 18:15:17 +0200 (MET DST)
Subject: negative numbers in R plots in Illustrator 8 (and higher?) (PR#2199)
Message-ID: <200210221615.SAA12074@pubhealth.ku.dk>

Negative numbers in (encapsulated) postscript generated by R loose their sign when opened in Adobe Illustrator 8 (french). This was so in 1.5.x and remains in 1.6.0.

I suppose that this is a known issue, although it is rather a flaw in Illustrator than in R, if my analysis of it is correct. I sent a lengthy mail containing a solution (ISOLatin1Encoding has to be redefined) to the r-help mailing list, where it never arrived.

Is there any interest in that I retype it and send it here?

RenE Bertin.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 22 17:39:05 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 22 Oct 2002 17:39:05 +0100 (BST)
Subject: RFC: Loading packages at startup
In-Reply-To: <3DB57448.F3A60B32@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0210221732360.29174-100000@gannet.stats>

This is just one point in a proposal.  Clearly we need a switch to turn
re-loading off.

On Tue, 22 Oct 2002, Paul Gilbert wrote:

> "(Ted Harding)" wrote:
>
> > ... so that if the user invoked a function which
> > had been used in a previous session, packages needed would be loaded
>
> Am I correct in thinking the main need for this is for object
> definitions that require a package, rather than for methods? I have the
> impression that putting requires() in a function works fairly well. Or
> is it needed because methods for the objects need to be available?

The latter.  It also ensures that function conflicts are resolved
consistently.

> > A comment from a practical user's viewpoint. I'm not sure of the value
> > of having this happen automatically.
>
> I wonder about this too. Especially since I seem to spend much more time
> debugging code than I do actually using it. Should I be worrying about

That must be way out in the tail of R users, few of whom program at all.

> something similar to the mixed blessing of .a and .so executables? What
> happens when packages are updated, moved to new locations (as systems
> administrators are prone to do), or things are moved (among packages or
> in/out of base)? What happens when I want the version of a package I am
> trying to debug, not the one that is installed? Should there be a
> warning if the signature on a package does not match the one originally
> used?

Basically no problem:

Upgrades are no more problem than now.  (And now upgrading mclust can give
you a completely incompatible package, BTW.)

If a package is moved, then you would get a warning. But how often does
that happen?  Moving the R installation and the standad library would be
no problem as the location would be stored as `standard' in some way.

Versions are fine too, as the location would be recorded and you would get
the same version as last time (unles you moved it ...).

> I guess I would like to understand that this is a step forward in
> software design, not simply a minor user convenience (and possibly a
> headache for developers)? Sorry if I am a bit slow on some of these
> things.

It is a user convenience.  However, I think it makes life easier not
harder.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 22 17:46:13 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Oct 2002 18:46:13 +0200
Subject: negative numbers in R plots in Illustrator 8 (and higher?) (PR#2199)
In-Reply-To: <200210221615.SAA12074@pubhealth.ku.dk>
References: <200210221615.SAA12074@pubhealth.ku.dk>
Message-ID: <x2znt6ctgq.fsf@biostat.ku.dk>

rjvbertin@hotmail.com writes:

> Negative numbers in (encapsulated) postscript generated by R loose
> their sign when opened in Adobe Illustrator 8 (french). This was so
> in 1.5.x and remains in 1.6.0.
> 
> I suppose that this is a known issue, although it is rather a flaw
> in Illustrator than in R, if my analysis of it is correct. I sent a
> lengthy mail containing a solution (ISOLatin1Encoding has to be
> redefined) to the r-help mailing list, where it never arrived.
> 
> Is there any interest in that I retype it and send it here?

First tell us your analysis... There is some weirdness with
hyphen-vs-minus in the ISOLatin1Encoding, which I at some point got
convinced that we're actually Doing According To Standards, weird as
it might seem. However, if Adobe themselves are getting it wrong, we
might reconsider our position.

I think it is Brian who has the scars from that particular battle.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Tue Oct 22 18:48:00 2002
From: rjvbertin@hotmail.com (RenE J.V. Bertin)
Date: Tue, 22 Oct 2002 19:48:00 +0200
Subject: negative numbers in R plots in Illustrator 8 (and higher?) (PR#2199)
In-Reply-To: <x2znt6ctgq.fsf@biostat.ku.dk>
References: <200210221615.SAA12074@pubhealth.ku.dk>
 <x2znt6ctgq.fsf@biostat.ku.dk>
Message-ID: <20021022194800.6982fee2.rjvbertin@hotmail.com>

On 22 Oct 2002 18:46:13 +0200, Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> wrote regarding "Re:
negative numbers in R plots in Illustrator 8 (and higher?) (PR#2199)"


8-) > Is there any interest in that I retype it and send it here?
8-) 
8-) First tell us your analysis... There is some weirdness with
8-) hyphen-vs-minus in the ISOLatin1Encoding, which I at some point got

	Indeed, it is that. Illustrator expects a hyphen at position 45, and not the minus that indeed appears to be the standard. ISO 1252 Latin 1 encoding does put the hyphen at that position.
There is not much difference between the hyphen and the minus glyphs; the former is slightly narrower than the latter. And it seems to be the hyphen that is generated by most keyboards.


8-) it might seem. However, if Adobe themselves are getting it wrong, we
8-) might reconsider our position.

	Well, there *is* some sort of issue with them. If the encoding calls for a minus, they should show it, and not silently ignore it! Or give a warning if the requested font doesn't have it.

Considering your position: just how easy is it to forget or overlook (the absence of) a sign? :)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tkeitt@mail.utexas.edu  Tue Oct 22 18:55:42 2002
From: tkeitt@mail.utexas.edu (Timothy H. Keitt)
Date: 22 Oct 2002 10:55:42 -0700
Subject: Loading packages at startup
In-Reply-To: <D7A3CFD7825BD6119B880002A58F06C20149D0EF@groexmb02.pfizer.com>
References: <D7A3CFD7825BD6119B880002A58F06C20149D0EF@groexmb02.pfizer.com>
Message-ID: <1035309342.1879.12.camel@dhcp94.nceas.ucsb.edu>

[Sorry, just noticed this thread and don't know what's been said
already, but I will comment nonetheless.]

I've also thought about this problem and I think we should be careful to
make sure its solved in a very general manner. Objects bind methods to
data, but this is broken when saving and reloading R sessions (only the
data ends up in .RData and not the bindings). What happens if someone
has multiple saved R sessions in a single directory? A single .Rpackages
file would either leave out packages or have to include all packages
across all sessions. I would far rather have a mechanism that recognizes
an object as an object and lets that object load the appropriate
bindings to methods at (re)instantiation. I once proposed that there be
function hooks in the save/load process that could be overloaded by
object type to make sure that any initializations (including package
loading) could be completed before attaching the data. This would also
allow for example database objects to reestablish their connections when
a session is reloaded from disk.

Tim

On Tue, 2002-10-22 at 06:46, Warnes, Gregory R wrote:
> 
> 
> > 4) One problem with saving an R session and then restoring it is that
> >    the packages in use are not reloaded.  Quitting an R session and
> >    saving could write .Rpackages in the current directory (with the
> >    library recorded if it were not the default).  Then restarting a
> >    session in that directory would restore the loaded packages
> >    automatically.
> 
> 
> I've been using another approach for this.   For the R + Zope tools that
> I've developed here (Yes, they will be released once I finally get through
> all the red tape!) I needed a way to store all of the information about a
> session, including loaded packages and the search path.
> 
> At the end of this message, I list two functions, save.session() and
> load.session() which I wrote to accomplish this.  In addition, I have an .Rd
> documentation file for them, and can provide that if anyone is interested.
> 
> The functions save.session() records the list of loaded packages into a
> variable named ".save.session.packages" which is then saved as part of
> save.image().   The load.session() function then uses load() to reload the
> saved image and uses the ".save.session.packages" function to reload the
> packages.  A similar thing happens for the search path.   This works well
> and seems less hazard-prone than overwriting the users '.Rpackages' file for
> two reasons:  1) the loaded package list and search path are preserved with
> the data, and 2) we aren't messing with the user's files...
> 
> One enhancement that would be desirable is to allow the user to request that
> the search path or the packages not be restored.  Of course, both can be
> avoided by just using load() instead of load.session() on the data file.
> 
> -Greg
> 
> save.session <- function(file=".RSession",...)
>   {
>     if(!is.null(dev.list()))
>        warning("Open graphics devices will not be saved or restored.")
> 
>     cat("Saving search path..\n")
>     .save.session.search <<- search()
>     
>     cat("Saving list of loaded packages..\n")
>     .save.session.packages <<- .packages()
>    
>     cat("Saving all data...\n")
>     save(list=ls(envir = .GlobalEnv, all.names = TRUE), file=file, ...)
>     cat("Done.\n")
>   }
> 
> restore.session <- function(file=".RSession",...)
>   {
>     cat("Loading all data...\n")
>     load(file,envir = .GlobalEnv,...)
> 
>     cat("Loading packages...\n")
>     sapply( rev(.save.session.packages), library, character.only=T )
> 
>     cat("Restoring search path...\n")
> 
>     pad <- function(x,n) c( rep(NA,n-length(x)), x )
>     
>     current.search <- search()[-1]
>     saved.search <- .save.session.search[-1]
> 
>     identical <- pad(current.search, length(saved.search)) == saved.search 
>     
>     for( i in saved.search[!identical] )
>       {
>         if( charmatch( "file:", i, nomatch=FALSE) )
>           attach(sub( "file:", "", "file:test" ) )
>         else if (charmatch( "package:", i, nomatch=FALSE)  )
>           stop(paste("Somehow we missed loading package",i))
>         else
>           {
>             do.call("attach",list(as.name(i)))
>           }
>                
>       }
> 
>     rm(list=c(".save.session.packages",
>               ".save.session.search"),
>        envir = .GlobalEnv )
>          
>     
>     cat("Done.\n")
>   }    
> 
> 
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-- 
Timothy H. Keitt
The University of Texas at Austin
Section of Integrative Biology
1 University Station C0930
Austin, Texas 78712-0253 USA
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 22 20:23:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 22 Oct 2002 20:23:41 +0100 (BST)
Subject: Loading packages at startup
In-Reply-To: <1035309342.1879.12.camel@dhcp94.nceas.ucsb.edu>
Message-ID: <Pine.LNX.4.31.0210222002180.29960-100000@gannet.stats>

On 22 Oct 2002, Timothy H. Keitt wrote:

> [Sorry, just noticed this thread and don't know what's been said
> already, but I will comment nonetheless.]

Actually this is a spin-off from a small point in an RFC posted earlier,
and I think it would have been kinder to have done your homework.
A serious proposal is getting sidetracked by half-formulated ways
(even buggy ones) to solve a related but different problem.

> I've also thought about this problem and I think we should be careful to
> make sure its solved in a very general manner. Objects bind methods to
> data, but this is broken when saving and reloading R sessions (only the
> data ends up in .RData and not the bindings). What happens if someone
> has multiple saved R sessions in a single directory? A single .Rpackages
> file would either leave out packages or have to include all packages
> across all sessions.

Eh?  Only one session is saved and reloaded in .RData per directory.
And we only have one .Rprofile and one .Renviron per directory.
So everyone I have ever seen uses separate directories for separate
projects.

If you go back and read the RFC, you will see the idea was that
users could specify the packages they wanted loaded (and in which order)
on a per-directory basis. *Or not.*  The idea of rewriting it at the end
of a session was just one of the possible extensions.

I would find this very useful, and although I could use .First (prone to
getting damaged) or .Rprofile I would prefer a separate mechanism. Not
least, I would like to use ~/.Rprofile for all my work (turn off
significance stars etc) and a per-directory .Rpackages.

> I would far rather have a mechanism that recognizes
> an object as an object and lets that object load the appropriate
> bindings to methods at (re)instantiation. I once proposed that there be

Not possible with S3 methods and loose inheritance. You cannot tell what
package the methods an object needs is in. Nor if it is in several can you
tell which one the user was preferring.  What we can do is to
restore the search list to (more or less) what it was at the end of the
last session, *if we want to*.

Nor is it possible to load packages arbitrarily, as the order does matter.

> function hooks in the save/load process that could be overloaded by
> object type to make sure that any initializations (including package
> loading) could be completed before attaching the data. This would also
> allow for example database objects to reestablish their connections when
> a session is reloaded from disk.

Again, not possible with S3 classes. I am not sure if it is possible with
formal methods as currently implemented, but it would need that sort of
metadata.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Wed Oct 23 01:53:11 2002
From: Bill.Venables@cmis.csiro.au (Bill.Venables@cmis.csiro.au)
Date: Wed, 23 Oct 2002 10:53:11 +1000
Subject: Loading packages at startup
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A916559C@Roper-CV.qld.cmis.csiro.au>

I hardly know what to say, other than this seems such a mild but useful
suggestion I find any opposition to it hard to imagine.

I say go for it.

Bill Venables.

-----Original Message-----
From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
Sent: Tuesday, October 22, 2002 6:25 AM
To: R-devel@stat.math.ethz.ch
Subject: RFC: Loading packages at startup


I've been kicking the following idea around for a while, and am now
proposing to put some version into 1.7.0.  I'd be interested in
comments on the desirability and the design, before I start writing
any code.

S4 introduced a file .S.chapters which can contain a list of S
chapters (equivalent to R packages) to be loaded on start-up.  This
was the germ of this proposal.

Proposal:

Extend the initialization as described in Startup.Rd by having
optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
the latter in the starting directory or failing that the user's home
directory. Each would contain a list of packages, one per line, to be
loaded when R is started, in the order in the files.

Some details:

1) I think the packages should be loaded before .Rprofile and .RData
   are processed, and R_HOME/etc/Rpackages.site before .Rpackages.
   This can be argued, and the S4 parallel would seem to be to load
   packages after S.init (the nearest it has to Rprofile).  But we
   would load library/base/Rprofile first of all so the analogy is not
   close.

2) The present kludge of loading ctest in .First could be replaced
   by making ctest the default content of R_HOME/etc/Rpackages.site
   (in the light of point 5).

3) It would be useful to allow the library tree to be specified, as a
   second field on the line.

4) One problem with saving an R session and then restoring it is that
   the packages in use are not reloaded.  Quitting an R session and
   saving could write .Rpackages in the current directory (with the
   library recorded if it were not the default).  Then restarting a
   session in that directory would restore the loaded packages
   automatically.

5) We might want to allow a .Rpackages file to override Rpackages.site
   (or we might not).  One idea is to allow a minus sign in front of a
   package name, and to merge the Rpackages.site and .Rpackages files
   before loading any packages.  If we did this we probably need to be
   able to save the list of packages to be loaded (and can't easily save
   those not to be loaded), so perhaps -- as the first list of .Rpackages
   should empty the list.

6) One could argue for R_HOME/etc/Rpackages as the `system' file as
   well, and this might be useful if we break base up into smaller
   components.

7) I would allow comment lines in the files, starting with #.

8) The file names or names could be set by environment variables.  It's
   strange that we allow the site file names for Rprofile and Renviron and
   the user file name for command histories to be set in that way.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Wed Oct 23 08:08:08 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 23 Oct 2002 00:08:08 -0700
Subject: R-1.6.1 with gcc-3.3
Message-ID: <2F51FBDA-E656-11D6-A71E-000393860F3C@stat.ucla.edu>

This is probably only interesting to zero or one or two persons.

gcc-3.3 from Apple's CVS does not handle the -bundle flag properly.

I had to hack configure.ac, which now has

shlib_ldflags="-nostdlib /usr/lib/bundle1.o -Wl,-bundle  
-Wl,-bundle_loader,/usr/local/lib/R/bin/R.bin -lgcc" ;;

LIBR_LDFLAGS="-dynamiclib -install_name \$(Rexeclibdir)/libR.dylib  
-framework Carbon"

i.e. I have also switched over to two-level namespaces. If the
-bundle flag is fixed, the first one will simply become

shlib_ldflags="-bundle -bundle_loader /usr/local/lib/R/bin/R.bin"

For those of you with accounts on gifi, I will upgrade the
gcc-3.3, which you get by putting /usr/local/bin at the beginning of
your PATH. gifi (a 450Mhz Cube) now runs OS X 10.2.2 (build 6F14).
It will soon get a CPU upgrade to dual 850Mhz.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Wed Oct 23 20:16:55 2002
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Wed, 23 Oct 2002 12:16:55 -0700 (PDT)
Subject: New version of lattice (possible incompatibility with old code)
Message-ID: <20021023191655.89793.qmail@web13902.mail.yahoo.com>


Hi,

there's a new version of lattice on CRAN (0.6-5) which will probably ship with
R 1.6.1. It has a minor change in API which might affect packages using lattice
-- only if they define panel/prepanel functions of their own. In previous
versions, it was implicitly assumed that panel (and prepanel) functions would
only be supplied _numeric_ x,y,z arguments, although I don't remember this as
being documented. This has changed in the new version (mostly to allow
rudimentary POSIXt labelling and other possible improvements in future). This
is actually used only in prepanel functions right now, and all predefined panel
functions in lattice have only been modified to have 

x <- as.numeric(x)

etc in the very beginning. This should fix any problems elsewhere as well.

If prepanel functions need to be redefined, prepanel.default.xyplot and
prepanel.default.bwplot should serve as templates. Lines like 

x <- as.numeric(x) 

should revert to old behaviour here too.

Deepayan


__________________________________________________

 the expert host your web site

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rpeng@stat.ucla.edu  Wed Oct 23 20:55:07 2002
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Wed, 23 Oct 2002 12:55:07 -0700 (PDT)
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
In-Reply-To: <Pine.LNX.4.31.0210162038360.2159-100000@gannet.stats>
Message-ID: <Pine.GSO.4.10.10210231251570.13575-100000@fisher.stat.ucla.edu>

I noticed this on the GCC website, regarding the not-yet-released gcc
3.2.1:

* The method of constructing the list of directories to be searched for
header files has been revised. If a directory named by a -I option is a
standard system include directory, the option is ignored to ensure that
the default search order for system directories and the special treatment
of system header files are not defeated.

-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng

On Wed, 16 Oct 2002, ripley@stats.ox.ac.uk wrote:

> This has been discussed on R-devel, and it is definitely not an R bug
> as there are workarounds stated in the R-admin manual.
> 
> Setting CPPFLAGS= (nothing) does avoid this except in the gnome module. It
> was intended to put that explicitly in the R-admin manual for 1.6.0, but
> it was not done in time (it is now there for R-patched).
> 
> We are told that this is fixed in the alphas of gcc 3.3.  Once it is clear
> exactly which versions of gcc are affected we may add a workaround in the
> configure script.
> 
> On Wed, 16 Oct 2002 rjvbertin@hotmail.com wrote:
> 
> > There is an incompatibility between R's configure/build process, and gcc 3.2.0 (and maybe earlier).
> > Gcc 3.2.0 includes -I/usr/local/include by default, on my system (default configuration), and cpp0
> > issues a warning when this flag is issued additionally by the user (= R's configure). This warning
> > ends up in the dependency sections of the Makefile that are generated "automagically". The 1st
> > occurrence is line 105 of src/appl/Makefile .
> >
> > The only way around it that I found, other than removing all -I/usr/local/include in all Makefiles is to manually add
> > -Wp,-w, a gcc/cpp argument that suppresses all cpp warnings. It also has the effect of not aborting
> > a compilation as soon as a specified header file is *not* found :(
> > If you decide to leave -I/usr/local/include and add -Wp,-w for gcc 3 compilers, I would suggest
> > *not* adding -Wp,-w if -fsyntax-only is also given, to not interfere with requested syntax-checking.
> > (that would probably require to call the compiler from a wrapper script, something I already do.)
> >
> > Rene Bertin
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Wed Oct 23 21:42:25 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 23 Oct 2002 13:42:25 -0700
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
In-Reply-To: <Pine.GSO.4.10.10210231251570.13575-100000@fisher.stat.ucla.edu>
Message-ID: <EFE6A9B8-E6C7-11D6-BA4F-003065A21C86@stat.ucla.edu>

Yes, there are no longer warnings in gcc-3.3

On Wednesday, Oct 23, 2002, at 12:55 US/Pacific, Roger Peng wrote:

> I noticed this on the GCC website, regarding the not-yet-released gcc
> 3.2.1:
>
> * The method of constructing the list of directories to be searched for
> header files has been revised. If a directory named by a -I option is a
> standard system include directory, the option is ignored to ensure that
> the default search order for system directories and the special  
> treatment
> of system header files are not defeated.
>
> -roger
> _______________________________
> UCLA Department of Statistics
> rpeng@stat.ucla.edu
> http://www.stat.ucla.edu/~rpeng
>
> On Wed, 16 Oct 2002, ripley@stats.ox.ac.uk wrote:
>
>> This has been discussed on R-devel, and it is definitely not an R bug
>> as there are workarounds stated in the R-admin manual.
>>
>> Setting CPPFLAGS= (nothing) does avoid this except in the gnome  
>> module. It
>> was intended to put that explicitly in the R-admin manual for 1.6.0,  
>> but
>> it was not done in time (it is now there for R-patched).
>>
>> We are told that this is fixed in the alphas of gcc 3.3.  Once it is  
>> clear
>> exactly which versions of gcc are affected we may add a workaround in  
>> the
>> configure script.
>>
>> On Wed, 16 Oct 2002 rjvbertin@hotmail.com wrote:
>>
>>> There is an incompatibility between R's configure/build process, and  
>>> gcc 3.2.0 (and maybe earlier).
>>> Gcc 3.2.0 includes -I/usr/local/include by default, on my system  
>>> (default configuration), and cpp0
>>> issues a warning when this flag is issued additionally by the user  
>>> (= R's configure). This warning
>>> ends up in the dependency sections of the Makefile that are  
>>> generated "automagically". The 1st
>>> occurrence is line 105 of src/appl/Makefile .
>>>
>>> The only way around it that I found, other than removing all  
>>> -I/usr/local/include in all Makefiles is to manually add
>>> -Wp,-w, a gcc/cpp argument that suppresses all cpp warnings. It also  
>>> has the effect of not aborting
>>> a compilation as soon as a specified header file is *not* found :(
>>> If you decide to leave -I/usr/local/include and add -Wp,-w for gcc 3  
>>> compilers, I would suggest
>>> *not* adding -Wp,-w if -fsyntax-only is also given, to not interfere  
>>> with requested syntax-checking.
>>> (that would probably require to call the compiler from a wrapper  
>>> script, something I already do.)
>>>
>>> Rene Bertin
>>>
>>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
>>> .-.-.-.-.-.-
>>> r-devel mailing list -- Read  
>>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>>> Send "info", "help", or "[un]subscribe"
>>> (in the "body", not the subject !)  To:  
>>> r-devel-request@stat.math.ethz.ch
>>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
>>> ._._._._._
>>>
>>
>> -- 
>> Brian D. Ripley,                  ripley@stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272860 (secr)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
>> .-.-.-.-.-
>> r-devel mailing list -- Read  
>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To:  
>> r-devel-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._. 
>> _._._._._
>>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
                  www: http://www.stat.ucla.edu/~deleeuw
======================================================================== 
====
          Remember, wherever you go, there you are. --- Buckaroo Banzai
======================================================================== 
====

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Glenn.Stone@csiro.au  Thu Oct 24 05:33:05 2002
From: Glenn.Stone@csiro.au (Glenn.Stone@csiro.au)
Date: Thu, 24 Oct 2002 06:33:05 +0200 (MET DST)
Subject: model.matrix (via predict) (PR#2206)
Message-ID: <200210240433.GAA24513@pubhealth.ku.dk>

Full_Name: Glenn Stone
Version: 1.5.1 and 1.6.0
OS: win2000
Submission from: (NULL) (168.140.227.9)


The following code produces incorrect fitted values in version 1.5.1 and an
error in 1.6.0 

   Error in "contrasts<-"(*tmp*, value = "contr.treatment") : 
           contrasts apply only to factors
   In addition: Warning message: 
   variable ihalf is not a factor in: model.frame.default(object, data, xlev =
xlev) 

The problem in 1.5.1 seems to be model.matrix return inconsistently ordered
interaction terms. There are abviously several work arounds.


### Start of example
dfr <- expand.grid(i=0:154,j=0:154)
dfr <- dfr[with(dfr,i+j<=154),]

dfr$logj <- with(dfr,log(j+0.5))
dfr$jmin6 <- with(dfr, pmin(j,6))
dfr$ihalf <- with(dfr, factor(floor(i/6)))
dfr$i100 <- with(dfr, ifelse(i<100,1,0))
dfr$j0 <- with(dfr, ifelse(j==0,1,0))

Ai <- runif(length(levels(dfr$ihalf)))
Ai <- Ai-Ai[1]
Bi <- runif(length(levels(dfr$ihalf)))
Bi <- (Bi-Bi[1])/10

eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
            + 0.01*jmin6+Ai[as.numeric(ihalf)]
            +Bi[as.numeric(ihalf)]*jmin6)

dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
                                            
gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
          data=dfr,
          family=poisson)

plot(predict(gg),predict(gg,newdata=dfr))
### End of example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Thu Oct 24 07:29:59 2002
From: Bill.Venables@cmis.csiro.au (Bill.Venables@cmis.csiro.au)
Date: Thu, 24 Oct 2002 16:29:59 +1000
Subject: model.matrix (via predict) (PR#2206)
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A91655B6@Roper-CV.qld.cmis.csiro.au>

I'm not sure what Glenn's "obvious" workarounds are, but if you fit the
model in the equivalent and more conventional form:

gg <- glm(clms ~ logj + i100*j0 + ihalf*jmin6, data=dfr, family=poisson)

The predict(gg, newdata = dfr) step now works fine (for me, Windows 2000, R
1.6.0).

I present this in the hope someone can use it as a clue to find out what's
going on.  Sorry, I don't have time to do it myself.

Bill Venables.


-----Original Message-----
From: Glenn.Stone@csiro.au [mailto:Glenn.Stone@csiro.au]
Sent: Thursday, October 24, 2002 2:33 PM
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: model.matrix (via predict) (PR#2206)


Full_Name: Glenn Stone
Version: 1.5.1 and 1.6.0
OS: win2000
Submission from: (NULL) (168.140.227.9)


The following code produces incorrect fitted values in version 1.5.1 and an
error in 1.6.0 

   Error in "contrasts<-"(*tmp*, value = "contr.treatment") : 
           contrasts apply only to factors
   In addition: Warning message: 
   variable ihalf is not a factor in: model.frame.default(object, data, xlev
=
xlev) 

The problem in 1.5.1 seems to be model.matrix return inconsistently ordered
interaction terms. There are abviously several work arounds.


### Start of example
dfr <- expand.grid(i=0:154,j=0:154)
dfr <- dfr[with(dfr,i+j<=154),]

dfr$logj <- with(dfr,log(j+0.5))
dfr$jmin6 <- with(dfr, pmin(j,6))
dfr$ihalf <- with(dfr, factor(floor(i/6)))
dfr$i100 <- with(dfr, ifelse(i<100,1,0))
dfr$j0 <- with(dfr, ifelse(j==0,1,0))

Ai <- runif(length(levels(dfr$ihalf)))
Ai <- Ai-Ai[1]
Bi <- runif(length(levels(dfr$ihalf)))
Bi <- (Bi-Bi[1])/10

eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
            + 0.01*jmin6+Ai[as.numeric(ihalf)]
            +Bi[as.numeric(ihalf)]*jmin6)

dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
                                            
gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
          data=dfr,
          family=poisson)

plot(predict(gg),predict(gg,newdata=dfr))
### End of example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Glenn.Stone@csiro.au  Thu Oct 24 07:52:34 2002
From: Glenn.Stone@csiro.au (Glenn.Stone@csiro.au)
Date: Thu, 24 Oct 2002 16:52:34 +1000
Subject: model.matrix (via predict) (PR#2206)
Message-ID: <FC026A0F0EE43E42A6EE465E2C7FFF780161448B@coxs-nh.nsw.cmis.CSIRO.AU>

 
In my actual application (this is a dummy) i100 is confounded with ihalf, so
I don't fit its main effect  I guess I(i100*j0) would work?
-----Original Message-----
From: Venables, Bill (CMIS, Cleveland)
To: Stone, Glenn (CMIS, North Ryde); r-devel@stat.math.ethz.ch
Sent: 24/10/2002 4:29 PM
Subject: RE: model.matrix (via predict) (PR#2206)

I'm not sure what Glenn's "obvious" workarounds are, but if you fit the
model in the equivalent and more conventional form:

gg <- glm(clms ~ logj + i100*j0 + ihalf*jmin6, data=dfr, family=poisson)

The predict(gg, newdata = dfr) step now works fine (for me, Windows
2000, R 1.6.0).

I present this in the hope someone can use it as a clue to find out
what's going on.  Sorry, I don't have time to do it myself.

Bill Venables.


-----Original Message-----
From: Glenn.Stone@csiro.au [mailto:Glenn.Stone@csiro.au]
Sent: Thursday, October 24, 2002 2:33 PM
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: model.matrix (via predict) (PR#2206)


Full_Name: Glenn Stone
Version: 1.5.1 and 1.6.0
OS: win2000
Submission from: (NULL) (168.140.227.9)


The following code produces incorrect fitted values in version 1.5.1 and
an
error in 1.6.0 

   Error in "contrasts<-"(*tmp*, value = "contr.treatment") : 
           contrasts apply only to factors
   In addition: Warning message: 
   variable ihalf is not a factor in: model.frame.default(object, data,
xlev =
xlev) 

The problem in 1.5.1 seems to be model.matrix return inconsistently
ordered
interaction terms. There are abviously several work arounds.


### Start of example
dfr <- expand.grid(i=0:154,j=0:154)
dfr <- dfr[with(dfr,i+j<=154),]

dfr$logj <- with(dfr,log(j+0.5))
dfr$jmin6 <- with(dfr, pmin(j,6))
dfr$ihalf <- with(dfr, factor(floor(i/6)))
dfr$i100 <- with(dfr, ifelse(i<100,1,0))
dfr$j0 <- with(dfr, ifelse(j==0,1,0))

Ai <- runif(length(levels(dfr$ihalf)))
Ai <- Ai-Ai[1]
Bi <- runif(length(levels(dfr$ihalf)))
Bi <- (Bi-Bi[1])/10

eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
            + 0.01*jmin6+Ai[as.numeric(ihalf)]
            +Bi[as.numeric(ihalf)]*jmin6)

dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
                                            
gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
          data=dfr,
          family=poisson)

plot(predict(gg),predict(gg,newdata=dfr))
### End of example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-.-
r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Thu Oct 24 08:28:50 2002
From: Bill.Venables@cmis.csiro.au (Bill.Venables@cmis.csiro.au)
Date: Thu, 24 Oct 2002 17:28:50 +1000
Subject: model.matrix (via predict) (PR#2206)
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A91655BA@Roper-CV.qld.cmis.csiro.au>

Glenn,

I suspect that I(i100*j0) will not work, actually.  It certainly won't work
if either of them are factors, since multiplication, (i.e. the arithmethic
"*" as opposed to the linear model formula "*" operator) is explicitly
inhibited for factors.

Even if one is confounded within the other, there is no reason to omit the
main effect.  Both glm and aov will detect that and silently omit the
confounded term.  You could also use a/b, of course, and my guess is that
works as well.

Cheers,
Bill.

-----Original Message-----
From: Stone, Glenn (CMIS, North Ryde) 
Sent: Thursday, October 24, 2002 4:53 PM
To: Venables, Bill (CMIS, Cleveland); 'r-devel@stat.math.ethz.ch '
Subject: RE: model.matrix (via predict) (PR#2206)


 
In my actual application (this is a dummy) i100 is confounded with ihalf, so
I don't fit its main effect  I guess I(i100*j0) would work?
-----Original Message-----
From: Venables, Bill (CMIS, Cleveland)
To: Stone, Glenn (CMIS, North Ryde); r-devel@stat.math.ethz.ch
Sent: 24/10/2002 4:29 PM
Subject: RE: model.matrix (via predict) (PR#2206)

I'm not sure what Glenn's "obvious" workarounds are, but if you fit the
model in the equivalent and more conventional form:

gg <- glm(clms ~ logj + i100*j0 + ihalf*jmin6, data=dfr, family=poisson)

The predict(gg, newdata = dfr) step now works fine (for me, Windows
2000, R 1.6.0).

I present this in the hope someone can use it as a clue to find out
what's going on.  Sorry, I don't have time to do it myself.

Bill Venables.


-----Original Message-----
From: Glenn.Stone@csiro.au [mailto:Glenn.Stone@csiro.au]
Sent: Thursday, October 24, 2002 2:33 PM
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: model.matrix (via predict) (PR#2206)


Full_Name: Glenn Stone
Version: 1.5.1 and 1.6.0
OS: win2000
Submission from: (NULL) (168.140.227.9)


The following code produces incorrect fitted values in version 1.5.1 and
an
error in 1.6.0 

   Error in "contrasts<-"(*tmp*, value = "contr.treatment") : 
           contrasts apply only to factors
   In addition: Warning message: 
   variable ihalf is not a factor in: model.frame.default(object, data,
xlev =
xlev) 

The problem in 1.5.1 seems to be model.matrix return inconsistently
ordered
interaction terms. There are abviously several work arounds.


### Start of example
dfr <- expand.grid(i=0:154,j=0:154)
dfr <- dfr[with(dfr,i+j<=154),]

dfr$logj <- with(dfr,log(j+0.5))
dfr$jmin6 <- with(dfr, pmin(j,6))
dfr$ihalf <- with(dfr, factor(floor(i/6)))
dfr$i100 <- with(dfr, ifelse(i<100,1,0))
dfr$j0 <- with(dfr, ifelse(j==0,1,0))

Ai <- runif(length(levels(dfr$ihalf)))
Ai <- Ai-Ai[1]
Bi <- runif(length(levels(dfr$ihalf)))
Bi <- (Bi-Bi[1])/10

eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
            + 0.01*jmin6+Ai[as.numeric(ihalf)]
            +Bi[as.numeric(ihalf)]*jmin6)

dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
                                            
gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
          data=dfr,
          family=poisson)

plot(predict(gg),predict(gg,newdata=dfr))
### End of example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-.-
r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rdarnell@shrs.uq.edu.au  Thu Oct 24 08:55:06 2002
From: rdarnell@shrs.uq.edu.au (rdarnell@shrs.uq.edu.au)
Date: Thu, 24 Oct 2002 09:55:06 +0200 (MET DST)
Subject: crash report (PR#2207)
Message-ID: <200210240755.JAA25960@pubhealth.ku.dk>


Rterm crashed while I was creating some plots and a message box
appearing saying there was an error log created. Searching for
recently created files I found this one which was modified at the time
Rterm crashed.  I wasn't sure if you were interested but here it is
anyway.


Regards

Ross Darnell


Microsoft (R) Windows 2000 (TM) Version 5.00 DrWtsn32
Copyright (C) 1985-1999 Microsoft Corp. All rights reserved.


Application exception occurred:
        App:  (pid=1292)
        When: 10/24/2002 @ 17:37:59.435
        Exception number: c0000005 (access violation)

*----> System Information <----*
        Computer Name: SHRS-LVL8-RD
        User Name: rdarnell
        Number of Processors: 1
        Processor Type: x86 Family 15 Model 2 Stepping 4
        Windows 2000 Version: 5.0
        Current Build: 2195
        Service Pack: 2
        Current Type: Uniprocessor Free
        Registered Organization: University of Queensland
        Registered Owner: Ross Darnell

*----> Task List <----*
   0 Idle.exe
   8 System.exe
 140 smss.exe
 164 csrss.exe
 160 winlogon.exe
 212 services.exe
 224 lsass.exe
 392 svchost.exe
 424 spoolsv.exe
 484 svchost.exe
 612 regsvc.exe
 624 MSTask.exe
 696 wm.exe
 532 NALNTSRV.exe
 816 Explorer.exe
 876 LTSMMSG.exe
 884 PRISMSTA.exe
 892 SynTPLpr.exe
 900 SynTPEnh.exe
 916 sistray.exe
 924 khooker.exe
 932 CPLBY25.exe
 940 PRPCUI.exe
 800 dpmw32.exe
 988 NWTRAY.exe
1012 realsched.exe
1048 internat.exe
1096 WZQKPICK.exe
1108 NALDESK.exe
 964 xemacs.exe
 336 MOZILLA.exe
1304 ispell.exe
1292 Rterm.exe
1392 ssh.exe
 956 rnathchk.exe
1432 AcroRd32.exe
1396 drwtsn32.exe
   0 _Total.exe

(00400000 - 00406000) 
(77F80000 - 77FFB000) 
(01510000 - 016E4000) 
(016F0000 - 0170B000) 
(77DB0000 - 77E0B000) 
(77E80000 - 77F35000) 
(77D40000 - 77DB0000) 
(77B50000 - 77BD9000) 
(77F40000 - 77F7C000) 
(77E10000 - 77E74000) 
(76B30000 - 76B6E000) 
(77C70000 - 77CBA000) 
(782F0000 - 78532000) 
(78000000 - 78046000) 
(77820000 - 77827000) 
(759B0000 - 759B6000) 
(77A50000 - 77B46000) 
(779B0000 - 77A4B000) 
(6E420000 - 6E426000) 
(75E60000 - 75E7A000) 
(63000000 - 63014000) 
(775A0000 - 77625000) 
(77840000 - 7787C000) 
(770C0000 - 770E3000) 
(128F0000 - 128FE000) 
(12900000 - 1290A000) 
(12910000 - 12918000) 
(12920000 - 12934000) 
(12960000 - 12975000) 
(12980000 - 1298B000) 
(12990000 - 12999000) 
(129A0000 - 129A9000) 
(129B0000 - 129CD000) 
(75050000 - 75058000) 
(75030000 - 75043000) 
(75020000 - 75028000) 
(785C0000 - 785CC000) 
(77980000 - 779A4000) 
(77340000 - 77353000) 
(77520000 - 77525000) 
(77320000 - 77337000) 
(75150000 - 75160000) 
(75170000 - 751BF000) 
(77BE0000 - 77BEF000) 
(751C0000 - 751C6000) 
(77950000 - 77979000) 
(773B0000 - 773DE000) 
(77380000 - 773A2000) 
(77830000 - 7783E000) 
(77880000 - 7790D000) 
(77C10000 - 77C6D000) 
(774E0000 - 77512000) 
(774C0000 - 774D1000) 
(77530000 - 77552000) 
(77360000 - 77379000) 
(777E0000 - 777E8000) 
(66210000 - 66219000) 
(50D50000 - 50D92000) 
(50D00000 - 50D15000) 
(50DF0000 - 50E10000) 
(50DB0000 - 50DD9000) 
(66220000 - 6622C000) 
(1C000000 - 1C006000) 
(777F0000 - 777F5000) 
(74FD0000 - 74FEF000) 
(75010000 - 75017000) 
(12EB0000 - 12EB8000) 

State Dump for Thread Id 0x51c

eax=00000137 ebx=028342d4 ecx=00000006 edx=00000000 esi=025f916c edi=00000000
eip=0164a224 esp=0022f708 ebp=0022f720 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000202


function: drawto
        0164a202 eb3f             jmp     getpixels+0x13 (01652543)
        0164a204 83c4f4           add     esp,0xf4
        0164a207 53               push    ebx
        0164a208 e8a3fbffff       call    get_context (01649db0)
        0164a20d a3702b6c01       mov     [dc (016c2b70)],eax    ds:016c2b70=00000000
        0164a212 83c410           add     esp,0x10
        0164a215 8b8340010000     mov     eax,[ebx+0x140]        ds:02834414=00000137
        0164a21b 85c0             test    eax,eax
        0164a21d 741d             jz      init_menus+0xcc (0165453c)
        0164a21f a358296801       mov   [current (01682958)],eax ds:01682958=00000137
FAULT ->0164a224 8918             mov     [eax],ebx              ds:00000137=????????
        0164a226 83c4f8           add     esp,0xf8
        0164a229 ff7014           push    dword ptr [eax+0x14]   ds:00ead709=????????
        0164a22c ff7004           push    dword ptr [eax+0x4]    ds:00ead709=????????
        0164a22f e87cfdffff       call    finish_contexts+0x28 (01649fb0)
        0164a234 a364296801       mov   [win_rgb (01682964)],eax ds:01682964=00000000
        0164a239 eb08             jmp     sortpalette+0x6cf (01653243)
        0164a23b 90               nop
        0164a23c a158296801       mov   eax,[current (01682958)] ds:01682958=00000137
        0164a241 8918             mov     [eax],ebx              ds:00000137=????????
        0164a243 8b5de8           mov     ebx,[ebp+0xe8]         ss:010dccf2=????????
        0164a246 c9               leave

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
0022F720 0164A633 028342D4 00000000 0000029D 0000029D !drawto 
0022F760 0164F08B 025F916C 12020E0A 00000000 00000000 !clear 
0022F7D0 0164F485 025F916C 0017022A 00000000 0017022A !gprintf 
0022F800 0164F5FC 0017022A 0000000F 00000000 00000000 !gprintf 
0022F850 77E12E98 0017022A 0000000F 00000000 00000000 !app_win_proc 
0022F870 77E139A3 0164F5D0 0017022A 0000000F 00000000 user32!ScrollDC 
0022F88C 77E1395F 0194AEA0 0000000F 00000000 00000000 user32!GetQueueStatus 
0022F8B4 77FA032F 0022F8C4 00000018 0194AEA0 0000000F user32!GetQueueStatus 
0022F954 77E15824 016BC7C0 00000001 0164FCBF 016BC7C0 ntdll!KiUserCallbackDispatcher 
0022F990 0152FC05 00000001 00000400 0022FA5C 0158A463 user32!DispatchMessageA 
0022F9B0 0152FA05 01C63730 0022FA5C 00000400 00000001 !Rconsolesetwidth 
0022F9E0 015A0FC0 01C63730 0022FA5C 00000400 00000001 !R_ReadConsole 
0022FA20 015A1697 01C63DD0 00000000 00000000 0022FA50 !Rf_ReplIteration 
0022FE70 015A1F58 01C63DD0 00000000 00000000 77E8615B !Rf_ReplIteration 
0022FE90 015A1F70 00401431 00000001 0022FEB0 0040153D !run_Rmainloop 
0022FEA0 0040153D 00400000 00000000 0022FEE0 0040139C !Rf_mainloop 
0022FEB0 0040139C 00000002 01C224A0 00401674 00401759 !<nosymbols> 
0022FEE0 0040166D 00400000 00000000 01412433 00000000 !<nosymbols> 
0022FF60 004010F4 00000002 01C224A0 01C22D38 00000005 !<nosymbols> 
0022FFA0 004011EF 00000001 00000000 8043107B 77E97D05 !<nosymbols> 
0022FFC0 77E97D08 77F82DC2 77FCF170 7FFDF000 C0000005 !<nosymbols> 
0022FFF0 00000000 00000000 00000000 00000000 00000000 kernel32!CreateProcessW 

*----> Raw Stack Dump <----*
0022f708  d4 42 83 02 21 00 f0 00 - 60 f7 22 00 27 a6 64 01  .B..!...`.".'.d.
0022f718  00 00 00 00 9d 02 00 00 - 60 f7 22 00 33 a6 64 01  ........`.".3.d.
0022f728  d4 42 83 02 00 00 00 00 - 9d 02 00 00 9d 02 00 00  .B..............
0022f738  6c 91 5f 02 90 f7 22 00 - 2a 02 17 00 2a 02 17 00  l._...".*...*...
0022f748  6c 91 5f 02 6f f0 64 01 - 00 00 00 00 00 00 00 00  l._.o.d.........
0022f758  9d 02 00 00 9d 02 00 00 - d0 f7 22 00 8b f0 64 01  .........."...d.
0022f768  6c 91 5f 02 0a 0e 02 12 - 00 00 00 00 00 00 00 00  l._.............
0022f778  00 00 00 00 6c 91 5f 02 - 0f 00 00 00 2a 57 65 01  ....l._.....*We.
0022f788  6c 91 5f 02 2a 02 17 00 - 0a 03 01 0d 01 00 00 00  l._.*...........
0022f798  00 00 00 00 08 00 00 00 - f8 01 00 00 9d 02 00 00  ................
0022f7a8  00 00 00 00 00 00 00 00 - 00 00 00 00 00 40 00 00  .............@..
0022f7b8  08 1b 80 e2 88 6f 80 e2 - 88 40 30 85 14 07 ad bc  .....o...@0.....
0022f7c8  59 13 01 a0 ec 13 01 a0 - 00 f8 22 00 85 f4 64 01  Y........."...d.
0022f7d8  6c 91 5f 02 2a 02 17 00 - 00 00 00 00 2a 02 17 00  l._.*.......*...
0022f7e8  00 00 00 00 00 00 00 00 - 0f 00 00 00 02 00 00 00  ................
0022f7f8  a0 00 00 00 02 00 00 02 - 50 f8 22 00 fc f5 64 01  ........P."...d.
0022f808  2a 02 17 00 0f 00 00 00 - 00 00 00 00 00 00 00 00  *...............
0022f818  4c f8 22 00 00 00 00 00 - 9e 02 00 00 01 00 00 00  L.".............
0022f828  0f 00 00 00 c8 c7 6b 01 - c0 c7 6b 01 00 00 00 00  ......k...k.....
0022f838  00 00 00 00 2a 02 17 00 - 35 03 0f 00 02 00 00 00  ....*...5.......

State Dump for Thread Id 0x548

eax=77d50c62 ebx=00000246 ecx=0142072c edx=00000000 esi=014215b8 edi=014215f8
eip=77f82a84 esp=126efe28 ebp=126eff74 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000202


function: ZwReplyWaitReceivePortEx
        77f82a79 b8ac000000       mov     eax,0xac
        77f82a7e 8d542404         lea     edx,[esp+0x4]          ss:1359d3fb=????????
        77f82a82 cd2e             int     2e
        77f82a84 c21400           ret     0x14

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
126EFF74 77D50781 77D50D7F 014215B8 00000000 40421080 ntdll!ZwReplyWaitReceivePortEx 
126EFFA8 77D50C7A 01420690 126EFFEC 77E8758A 014214D8 rpcrt4!RpcBindingSetOption 
126EFFB4 77E8758A 014214D8 00000000 40421080 014214D8 rpcrt4!RpcBindingSetOption 
126EFFEC 00000000 00000000 00000000 00000000 00000000 kernel32!SetFilePointer 

State Dump for Thread Id 0x558

eax=0000000a ebx=00000000 ecx=00000008 edx=00000000 esi=77f827dd edi=000000d4
eip=77f827e8 esp=128eff2c ebp=128eff50 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000246


function: NtWaitForSingleObject
        77f827dd b8ea000000       mov     eax,0xea
        77f827e2 8d542404         lea     edx,[esp+0x4]          ss:1379d4ff=????????
        77f827e6 cd2e             int     2e
        77f827e8 c20c00           ret     0xc
        77f827eb 8b4124           mov     eax,[ecx+0x24]         ds:00ead5da=????????
        77f827ee 39420c           cmp     [edx+0xc],eax          ds:00ead5d2=????????
        77f827f1 0f85c9100000     jne     NtQueryDefaultLocale+0x115 (77f838c0)
        77f827f7 ff4208           inc     dword ptr [edx+0x8]    ds:00ead5d2=????????
        77f827fa 33c0             xor     eax,eax
        77f827fc c20400           ret     0x4
        77f827ff 90               nop
        77f82800 ff4a04           dec     dword ptr [edx+0x4]    ds:00ead5d2=????????
        77f82803 c20400           ret     0x4

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
128EFF50 77E86A3D 000000D4 FFFFFFFF 00000000 0152FB48 ntdll!NtWaitForSingleObject 
128EFF80 7800A27B 00000000 00000000 0022F3E0 01C22A38 kernel32!WaitForSingleObject 
128EFFB4 77E8758A 01C22A38 00000000 0022F3E0 01C22A38 !beginthread 
128EFFEC 00000000 7800A224 01C22A38 00000000 00905A4D kernel32!SetFilePointer 

*----> Raw Stack Dump <----*
128eff2c  15 6a e8 77 d4 00 00 00 - 00 00 00 00 00 00 00 00  .j.w............
128eff3c  00 00 00 00 38 2a c2 01 - 38 2a c2 01 01 01 01 00  ....8*..8*......
128eff4c  01 01 01 00 80 ff 8e 12 - 3d 6a e8 77 d4 00 00 00  ........=j.w....
128eff5c  ff ff ff ff 00 00 00 00 - 48 fb 52 01 d4 00 00 00  ........H.R.....
128eff6c  ff ff ff ff 00 00 00 00 - 00 00 00 00 38 2a c2 01  ............8*..
128eff7c  b4 ff 8e 12 b4 ff 8e 12 - 7b a2 00 78 00 00 00 00  ........{..x....
128eff8c  00 00 00 00 e0 f3 22 00 - 38 2a c2 01 20 b0 0a 85  ......".8*.. ...
128eff9c  8c ff 8e 12 77 0d 43 80 - dc ff 8e 12 11 db 00 78  ....w.C........x
128effac  90 41 03 78 00 00 00 00 - ec ff 8e 12 8a 75 e8 77  .A.x.........u.w
128effbc  38 2a c2 01 00 00 00 00 - e0 f3 22 00 38 2a c2 01  8*........".8*..
128effcc  00 c0 fd 7f a7 9d fb 77 - c0 ff 8e 12 a7 9d fb 77  .......w.......w
128effdc  ff ff ff ff 5b 61 e8 77 - 80 b5 e8 77 00 00 00 00  ....[a.w...w....
128effec  00 00 00 00 00 00 00 00 - 24 a2 00 78 38 2a c2 01  ........$..x8*..
128efffc  00 00 00 00 4d 5a 90 00 - 03 00 00 00 04 00 00 00  ....MZ..........
128f000c  ff ff 00 00 b8 00 00 00 - 00 00 00 00 40 00 00 00  ............@...
128f001c  00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 00 00  ................
128f002c  00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 00 00  ................
128f003c  80 00 00 00 0e 1f ba 0e - 00 b4 09 cd 21 b8 01 4c  ............!..L
128f004c  cd 21 54 68 69 73 20 70 - 72 6f 67 72 61 6d 20 63  .!This program c
128f005c  61 6e 6e 6f 74 20 62 65 - 20 72 75 6e 20 69 6e 20  annot be run in 

State Dump for Thread Id 0x44c

eax=778321fe ebx=00000004 ecx=77db0260 edx=00000000 esi=77f8281e edi=00000004
eip=77f82829 esp=12bdfd24 ebp=12bdfd70 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000246


function: NtWaitForMultipleObjects
        77f8281e b8e9000000       mov     eax,0xe9
        77f82823 8d542404         lea     edx,[esp+0x4]          ss:13a8d2f7=????????
        77f82827 cd2e             int     2e
        77f82829 c21400           ret     0x14

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
12BDFD70 77E86E1A 12BDFD48 00000001 00000000 00000000 ntdll!NtWaitForMultipleObjects 
12BDFFB4 77E8758A 00000005 00000000 000B000A 0143F978 kernel32!WaitForMultipleObjects 
12BDFFEC 00000000 778321FE 0143F978 00000000 000000C8 kernel32!SetFilePointer 

*----> Raw Stack Dump <----*
12bdfd24  da 6d e8 77 04 00 00 00 - 48 fd bd 12 01 00 00 00  .m.w....H.......
12bdfd34  00 00 00 00 00 00 00 00 - 01 00 00 00 78 f9 43 01  ............x.C.
12bdfd44  01 00 00 00 84 01 00 00 - 88 01 00 00 98 01 00 00  ................
12bdfd54  18 02 00 00 5c fe 45 80 - a0 2f 40 80 ff ff ff ff  ....\.E../@.....
12bdfd64  d0 8a a0 bc d0 0c 45 80 - 90 07 41 85 b4 ff bd 12  ......E...A.....
12bdfd74  1a 6e e8 77 48 fd bd 12 - 01 00 00 00 00 00 00 00  .n.wH...........
12bdfd84  00 00 00 00 00 00 00 00 - b2 22 83 77 04 00 00 00  .........".w....
12bdfd94  b0 fe bd 12 00 00 00 00 - ff ff ff ff 78 f9 43 01  ............x.C.
12bdfda4  0a 00 0b 00 00 00 00 00 - f4 38 1a 85 e8 ae 44 85  .........8....D.
12bdfdb4  00 00 00 00 00 00 00 00 - 01 00 00 00 38 00 00 00  ............8...
12bdfdc4  23 00 00 00 23 00 00 00 - 00 00 00 00 0a 00 0b 00  #...#...........
12bdfdd4  78 f9 43 01 c8 43 f8 77 - 60 02 db 77 fe 21 83 77  x.C..C.w`..w.!.w
12bdfde4  00 00 00 00 32 75 e8 77 - 1b 00 00 00 00 02 00 00  ....2u.w........
12bdfdf4  fc ff bd 12 23 00 00 00 - c0 00 00 00 28 0e 0a 85  ....#.......(...
12bdfe04  b1 c0 01 00 98 70 71 85 - 00 07 00 00 b6 c9 44 80  .....pq.......D.
12bdfe14  b1 c0 01 00 98 70 71 85 - 01 d2 fd 7f 07 03 00 00  .....pq.........
12bdfe24  01 d2 fd 7f 07 03 00 00 - 5b d3 44 80 07 03 00 00  ........[.D.....
12bdfe34  30 5e 0a 85 00 d0 fd 7f - fc 07 30 c0 00 00 00 00  0^........0.....
12bdfe44  68 7e 0d 85 07 03 00 00 - 98 8b a0 bc 00 00 00 00  h~..............
12bdfe54  01 00 00 00 00 00 00 00 - 00 e0 fd 7f fc 07 30 c0  ..............0.

State Dump for Thread Id 0x538

eax=1c0026ca ebx=00000000 ecx=00000000 edx=00000000 esi=00000200 edi=0143b1c0
eip=77f830a5 esp=12e2ff14 ebp=12e2ffb4 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000246


function: NtDeviceIoControlFile
        77f8309a b838000000       mov     eax,0x38
        77f8309f 8d542404         lea     edx,[esp+0x4]          ss:13cdd4e7=????????
        77f830a3 cd2e             int     2e
        77f830a5 c22800           ret     0x28

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
12E2FFB4 77E8758A 00000000 0208003C 00000000 00000000 ntdll!NtDeviceIoControlFile 
12E2FFEC 00000000 1C0026CA 00000000 00000000 12E30008 kernel32!SetFilePointer 

*----> Raw Stack Dump <----*
12e2ff14  ed 24 00 1c 00 02 00 00 - 00 00 00 00 00 00 00 00  .$..............
12e2ff24  00 00 00 00 d0 30 00 1c - 83 00 00 90 60 ff e2 12  .....0......`...
12e2ff34  30 00 00 00 00 00 00 00 - 00 00 00 00 4e 27 00 1c  0...........N'..
12e2ff44  83 00 00 90 00 00 00 00 - 60 ff e2 12 30 00 00 00  ........`...0...
12e2ff54  3c 00 08 02 00 00 00 00 - 00 00 00 00 41 00 00 00  <...........A...
12e2ff64  00 00 00 00 ac 7c 88 eb - 00 00 00 00 00 00 00 00  .....|..........
12e2ff74  00 00 00 00 c0 b1 43 01 - c0 01 0c 86 48 02 0a 85  ......C.....H...
12e2ff84  00 02 00 00 00 00 00 00 - 68 e2 44 85 00 02 00 00  ........h.D.....
12e2ff94  e0 d2 0e 85 c0 b1 43 01 - 54 ff e2 12 77 0d 43 80  ......C.T...w.C.
12e2ffa4  dc ff e2 12 f4 28 00 1c - 38 12 00 1c ff ff ff ff  .....(..8.......
12e2ffb4  ec ff e2 12 8a 75 e8 77 - 00 00 00 00 3c 00 08 02  .....u.w....<...
12e2ffc4  00 00 00 00 00 00 00 00 - 00 a0 fd 7f 00 00 00 00  ................
12e2ffd4  c0 ff e2 12 00 00 00 00 - ff ff ff ff 5b 61 e8 77  ............[a.w
12e2ffe4  80 b5 e8 77 00 00 00 00 - 00 00 00 00 00 00 00 00  ...w............
12e2fff4  ca 26 00 1c 00 00 00 00 - 00 00 00 00 08 00 e3 12  .&..............
12e30004  00 00 00 00 10 00 e3 12 - 00 00 00 00 18 00 e3 12  ................
12e30014  00 00 00 00 20 00 e3 12 - 00 00 00 00 28 00 e3 12  .... .......(...
12e30024  00 00 00 00 30 00 e3 12 - 00 00 00 00 38 00 e3 12  ....0.......8...
12e30034  00 00 00 00 40 00 e3 12 - 00 00 00 00 48 00 e3 12  ....@.......H...
12e30044  00 00 00 00 50 00 e3 12 - 00 00 00 00 58 00 e3 12  ....P.......X...



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 24 10:05:06 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 24 Oct 2002 10:05:06 +0100 (BST)
Subject: crash report (PR#2207)
In-Reply-To: <200210240755.JAA25960@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210241003100.3978-100000@gannet.stats>

All that log tells us is that it crashed in the graphics system.

There's nothing we can do unless you can send a reproducible report,
and even then it might not happen on our machines.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 24 10:10:33 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 24 Oct 2002 10:10:33 +0100 (BST)
Subject: model.matrix (via predict) (PR#2206)
In-Reply-To: <E09E527B56BE2D438A3D6A246DDD27A91655BA@Roper-CV.qld.cmis.csiro.au>
Message-ID: <Pine.LNX.4.31.0210241006080.3978-100000@gannet.stats>

I have a clue as to what is going on, given that it changed between 1.5.1
and 1.6.0.  I think it may be related to (NEWS)

        model.matrix() was sometimes incorrectly determining the first
        factor in a formula without an intercept.

It seems a marginal bug, one not worth spending much time on.  Anyone who
has read the internals of model.matrix.default will appreciate my
reluctance.

Brian


On Thu, 24 Oct 2002 Bill.Venables@cmis.csiro.au wrote:

> Glenn,
>
> I suspect that I(i100*j0) will not work, actually.  It certainly won't work
> if either of them are factors, since multiplication, (i.e. the arithmethic
> "*" as opposed to the linear model formula "*" operator) is explicitly
> inhibited for factors.
>
> Even if one is confounded within the other, there is no reason to omit the
> main effect.  Both glm and aov will detect that and silently omit the
> confounded term.  You could also use a/b, of course, and my guess is that
> works as well.
>
> Cheers,
> Bill.
>
> -----Original Message-----
> From: Stone, Glenn (CMIS, North Ryde)
> Sent: Thursday, October 24, 2002 4:53 PM
> To: Venables, Bill (CMIS, Cleveland); 'r-devel@stat.math.ethz.ch '
> Subject: RE: model.matrix (via predict) (PR#2206)
>
>
>
> In my actual application (this is a dummy) i100 is confounded with ihalf, so
> I don't fit its main effect  I guess I(i100*j0) would work?
> -----Original Message-----
> From: Venables, Bill (CMIS, Cleveland)
> To: Stone, Glenn (CMIS, North Ryde); r-devel@stat.math.ethz.ch
> Sent: 24/10/2002 4:29 PM
> Subject: RE: model.matrix (via predict) (PR#2206)
>
> I'm not sure what Glenn's "obvious" workarounds are, but if you fit the
> model in the equivalent and more conventional form:
>
> gg <- glm(clms ~ logj + i100*j0 + ihalf*jmin6, data=dfr, family=poisson)
>
> The predict(gg, newdata = dfr) step now works fine (for me, Windows
> 2000, R 1.6.0).
>
> I present this in the hope someone can use it as a clue to find out
> what's going on.  Sorry, I don't have time to do it myself.
>
> Bill Venables.
>
>
> -----Original Message-----
> From: Glenn.Stone@csiro.au [mailto:Glenn.Stone@csiro.au]
> Sent: Thursday, October 24, 2002 2:33 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: model.matrix (via predict) (PR#2206)
>
>
> Full_Name: Glenn Stone
> Version: 1.5.1 and 1.6.0
> OS: win2000
> Submission from: (NULL) (168.140.227.9)
>
>
> The following code produces incorrect fitted values in version 1.5.1 and
> an
> error in 1.6.0
>
>    Error in "contrasts<-"(*tmp*, value = "contr.treatment") :
>            contrasts apply only to factors
>    In addition: Warning message:
>    variable ihalf is not a factor in: model.frame.default(object, data,
> xlev =
> xlev)
>
> The problem in 1.5.1 seems to be model.matrix return inconsistently
> ordered
> interaction terms. There are abviously several work arounds.
>
>
> ### Start of example
> dfr <- expand.grid(i=0:154,j=0:154)
> dfr <- dfr[with(dfr,i+j<=154),]
>
> dfr$logj <- with(dfr,log(j+0.5))
> dfr$jmin6 <- with(dfr, pmin(j,6))
> dfr$ihalf <- with(dfr, factor(floor(i/6)))
> dfr$i100 <- with(dfr, ifelse(i<100,1,0))
> dfr$j0 <- with(dfr, ifelse(j==0,1,0))
>
> Ai <- runif(length(levels(dfr$ihalf)))
> Ai <- Ai-Ai[1]
> Bi <- runif(length(levels(dfr$ihalf)))
> Bi <- (Bi-Bi[1])/10
>
> eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
>             + 0.01*jmin6+Ai[as.numeric(ihalf)]
>             +Bi[as.numeric(ihalf)]*jmin6)
>
> dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
>
> gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
>           data=dfr,
>           family=poisson)
>
> plot(predict(gg),predict(gg,newdata=dfr))
> ### End of example
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lucas@toulouse.inra.fr  Thu Oct 24 13:53:13 2002
From: lucas@toulouse.inra.fr (lucas@toulouse.inra.fr)
Date: Thu, 24 Oct 2002 14:53:13 +0200 (MET DST)
Subject: Function scale (PR#2209)
Message-ID: <200210241253.OAA01776@pubhealth.ku.dk>

I found a problem with scale function,
while using center=FALSE and scale=TRUE:

all column are not divided by standard error,
but divided by sqrt (1/(n-1) sum Xi^2 )

Example:
> l<- c(1,2,3)
> scale(l,F,T)
          [,1]
[1,] 0.3779645
[2,] 0.7559289
[3,] 1.1338934
attr(,"scaled:scale")
[1] 2.645751

2.645751 = sqrt( 1/2 * (1+4+9) )


Antoine Lucas & Aymeric Labourdette 

--
Antoine  Lucas        
INRA, Unit de biomtrie et     |  Tel 05 61 28 53 34
intelligence artificielle       |  Fax 05 61 28 53 35
http://genopole.toulouse.inra.fr/~lucas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 24 14:28:43 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Oct 2002 15:28:43 +0200
Subject: Function scale (PR#2209)
In-Reply-To: <200210241253.OAA01776@pubhealth.ku.dk>
References: <200210241253.OAA01776@pubhealth.ku.dk>
Message-ID: <x265vst184.fsf@biostat.ku.dk>

lucas@toulouse.inra.fr writes:

> I found a problem with scale function,
> while using center=FALSE and scale=TRUE:
> 
> all column are not divided by standard error,
> but divided by sqrt (1/(n-1) sum Xi^2 )
> 
> Example:
> > l<- c(1,2,3)
> > scale(l,F,T)
>           [,1]
> [1,] 0.3779645
> [2,] 0.7559289
> [3,] 1.1338934
> attr(,"scaled:scale")
> [1] 2.645751
> 
> 2.645751 = sqrt( 1/2 * (1+4+9) )

And? That's exactly what the documentation says will happen. And
exactly what Splus does, even if perhaps surprising.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Oct 24 15:21:22 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 24 Oct 2002 10:21:22 -0400 (EDT)
Subject: Function scale (PR#2209)
In-Reply-To: <200210241253.OAA01776@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0210241017370.9918-100000@bolker.zoo.ufl.edu>


  The function is behaving as documented ...

   "If `scale' is `TRUE' then scaling is done by dividing the (centered)
    columns of `x' by their root-mean-square, and if `scale' is `FALSE',
    no scaling is done.

   "The root-mean-square for a column is obtained by computing the
    square-root of the sum-of-squares of the non-missing values in the
    column divided by the number of non-missing values minus one."

   It says "root-mean-square", not "standard error" or "standard
deviation".  If you set center=TRUE, then the two are equivalent. If you
*want* it to scale by standard deviation just set scale=sd(l) [or in the
matrix case, scale=apply(l,2,sd)].

  Ben Bolker

On Thu, 24 Oct 2002 lucas@toulouse.inra.fr wrote:

> I found a problem with scale function,
> while using center=FALSE and scale=TRUE:
> 
> all column are not divided by standard error,
> but divided by sqrt (1/(n-1) sum Xi^2 )
> 
> Example:
> > l<- c(1,2,3)
> > scale(l,F,T)
>           [,1]
> [1,] 0.3779645
> [2,] 0.7559289
> [3,] 1.1338934
> attr(,"scaled:scale")
> [1] 2.645751
> 
> 2.645751 = sqrt( 1/2 * (1+4+9) )
> 
> 
> Antoine Lucas & Aymeric Labourdette 
> 
> --
> Antoine  Lucas        
> INRA, Unit de biomtrie et     |  Tel 05 61 28 53 34
> intelligence artificielle       |  Fax 05 61 28 53 35
> http://genopole.toulouse.inra.fr/~lucas
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Oct 24 16:55:07 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 24 Oct 2002 11:55:07 -0400
Subject: Function scale (PR#2209)
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149D11A@groexmb02.pfizer.com>

> From: Peter Dalgaard BSA [mailto:p.dalgaard@biostat.ku.dk]
[...]
> 
> And? That's exactly what the documentation says will happen. And
> exactly what Splus does, even if perhaps surprising.

Generally speaking, I think it is poor design for software to 'surprise' the
user, even if documentation specifies the surprising activity...   

Is there a good reason for this behavior or is it 'just' a leftover
implementation detail recoded as a specification?

Except, perhaps, for the need for backwards & S-Plus compatibility, it would
seem desirable to change the behavior to better match the uninformed
expectation of users.

Just my $0.02.

-Greg





LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dj@research.bell-labs.com  Thu Oct 24 17:08:55 2002
From: dj@research.bell-labs.com (David James)
Date: Thu, 24 Oct 2002 12:08:55 -0400
Subject: RFC: Loading packages at startup
In-Reply-To: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>; from ripley@stats.ox.ac.uk on Mon, Oct 21, 2002 at 09:24:45PM +0100
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
Message-ID: <20021024120855.A8260@jessie.research.bell-labs.com>

I think the proposed changes will be useful. A couple of points
(mostly for simplicity):

Prof Brian D Ripley wrote:
> ...
> 
> 3) It would be useful to allow the library tree to be specified, as a
>    second field on the line.
  
Other than convenience (nothing wrong with that, of course) I don't
see too much need for this.  The .Renviron files may already have defined
R_LIBS, so the library tree may already be specified.

>  ...
>
> 5) We might want to allow a .Rpackages file to override Rpackages.site
>    (or we might not).  One idea is to allow a minus sign in front of a
>    package name, and to merge the Rpackages.site and .Rpackages files
>    before loading any packages.  If we did this we probably need to be
>    able to save the list of packages to be loaded (and can't easily save
>    those not to be loaded), so perhaps -- as the first list of .Rpackages
>    should empty the list.

Why not using arguments to R, say, --no-site-Rpackages and --no-Rpackages,
similar to --no-environ, --no-site-file, --no-init-file, and friends?
Adding specialized syntax with the minus sign seems a bit kludgy.

My preferance would be to have R by default include base and only
base (or whatever one package is the mimimum set), all other packages
(ctest, etc.) as part of the $R_HOME/etc/Rpackages.site, as the RFC
point 2) suggests.


> 
> 6) One could argue for R_HOME/etc/Rpackages as the `system' file as
>    well, and this might be useful if we break base up into smaller
>    components.
> 
> 7) I would allow comment lines in the files, starting with #.
> 
> 8) The file names or names could be set by environment variables.  It's
>    strange that we allow the site file names for Rprofile and Renviron and
>    the user file name for command histories to be set in that way.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 24 17:53:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 24 Oct 2002 17:53:31 +0100 (BST)
Subject: RFC: Loading packages at startup
In-Reply-To: <20021024120855.A8260@jessie.research.bell-labs.com>
Message-ID: <Pine.LNX.4.31.0210241750570.5320-100000@gannet.stats>

On Thu, 24 Oct 2002, David James wrote:

> I think the proposed changes will be useful. A couple of points
> (mostly for simplicity):
>
> Prof Brian D Ripley wrote:
> > ...
> >
> > 3) It would be useful to allow the library tree to be specified, as a
> >    second field on the line.
>
> Other than convenience (nothing wrong with that, of course) I don't
> see too much need for this.  The .Renviron files may already have defined
> R_LIBS, so the library tree may already be specified.

It's important if one wants to save the list to know which library list
was in use at the time. R_LIBS is subject to change.

> > 5) We might want to allow a .Rpackages file to override Rpackages.site
> >    (or we might not).  One idea is to allow a minus sign in front of a
> >    package name, and to merge the Rpackages.site and .Rpackages files
> >    before loading any packages.  If we did this we probably need to be
> >    able to save the list of packages to be loaded (and can't easily save
> >    those not to be loaded), so perhaps -- as the first list of .Rpackages
> >    should empty the list.
>
> Why not using arguments to R, say, --no-site-Rpackages and --no-Rpackages,
> similar to --no-environ, --no-site-file, --no-init-file, and friends?
> Adding specialized syntax with the minus sign seems a bit kludgy.

We would do that anyway.  The case I am thinking about is where
Rpackages.site includes a lot of packages, and for this project I want to
exclude just one.  Then a .Rpackages with `-foo' does the trick.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Oct 24 18:07:29 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Thu, 24 Oct 2002 13:07:29 -0400
Subject: Function scale (PR#2209)
In-Reply-To: <D7A3CFD7825BD6119B880002A58F06C20149D11A@groexmb02.pfizer.com>
References: <D7A3CFD7825BD6119B880002A58F06C20149D11A@groexmb02.pfizer.com>
Message-ID: <up9gru8fmkpr3iaslhfm91sd0t13vhrlk3@4ax.com>

On Thu, 24 Oct 2002 11:55:07 -0400, you wrote in message
<D7A3CFD7825BD6119B880002A58F06C20149D11A@groexmb02.pfizer.com>:

>Generally speaking, I think it is poor design for software to 'surprise' the
>user, even if documentation specifies the surprising activity...   

I agree, but I don't think it's clear what would be unsurprising
behaviour here.

If you ask for scaling but no centering, how should the scale be
estimated?  

1. To me the obvious scale is sqrt(sum(x^2)/n).
2. R and S-PLUS use sqrt(sum(x^2)/(n-1)).
3. I think the original poster was suggesting
sqrt(sum((x-mean(x))^2/(n-1)) (but it wasn't stated explicitly, so I'm
not sure).

In a case like this, I'd say backwards compatibility wins.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Oct 25 08:15:07 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 25 Oct 2002 09:15:07 +0200
Subject: RFC: Loading packages at startup
In-Reply-To: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
Message-ID: <15800.61307.451828.338523@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> I've been kicking the following idea around for a while, and am now
> proposing to put some version into 1.7.0.  I'd be interested in
> comments on the desirability and the design, before I start writing
> any code.

> S4 introduced a file .S.chapters which can contain a list of S
> chapters (equivalent to R packages) to be loaded on start-up.  This
> was the germ of this proposal.

> Proposal:

> Extend the initialization as described in Startup.Rd by having
> optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
> the latter in the starting directory or failing that the user's home
> directory. Each would contain a list of packages, one per line, to be
> loaded when R is started, in the order in the files.

> Some details:

> 1) I think the packages should be loaded before .Rprofile and .RData
>    are processed, and R_HOME/etc/Rpackages.site before .Rpackages.
>    This can be argued, and the S4 parallel would seem to be to load
>    packages after S.init (the nearest it has to Rprofile).  But we
>    would load library/base/Rprofile first of all so the analogy is not
>    close.

> 2) The present kludge of loading ctest in .First could be replaced
>    by making ctest the default content of R_HOME/etc/Rpackages.site
>    (in the light of point 5).

> 3) It would be useful to allow the library tree to be specified, as a
>    second field on the line.

> 4) One problem with saving an R session and then restoring it is that
>    the packages in use are not reloaded.  Quitting an R session and
>    saving could write .Rpackages in the current directory (with the
>    library recorded if it were not the default).  Then restarting a
>    session in that directory would restore the loaded packages
>    automatically.

> 5) We might want to allow a .Rpackages file to override Rpackages.site
>    (or we might not).  One idea is to allow a minus sign in front of a
>    package name, and to merge the Rpackages.site and .Rpackages files
>    before loading any packages.  If we did this we probably need to be
>    able to save the list of packages to be loaded (and can't easily save
>    those not to be loaded), so perhaps -- as the first list of .Rpackages
>    should empty the list.

> 6) One could argue for R_HOME/etc/Rpackages as the `system' file as
>    well, and this might be useful if we break base up into smaller
>    components.

> 7) I would allow comment lines in the files, starting with #.

> 8) The file names or names could be set by environment variables.  It's
>    strange that we allow the site file names for Rprofile and Renviron and
>    the user file name for command histories to be set in that way.

I'd recommend against going this way.

In fact, I am not sure whether we really want to have *user environment*
files in the long run.  We currently have two user files controlling
startup, .Renviron and .Rprofile.  A split like this is necessary
because not all customization for R can be done from 'inside R', i.e.,
after R has been started, but needs to be done before that.  To my
understanding, this includes setting LD_LIBRARY_PATH (or the system's
equivalent), and maybe some env vars which can be given instead of
command line args, but with R_VSIZE and R_HSIZE sort of gone what else
is there?  So perhaps the user environment mechanism is not the right
thing anyway (and it is not used by R CMD *).

For the things that can be done from inside R, I'd recommend doing it
this way.  E.g., there is really no reason for looking for an env var
R_BROWSER when we can portably specify one using options(browser).  The
fact that specifying the packages to be loaded at startup inside
.First() and that users cannot simply add to .First() is a problem that
needs to be addressed anyway.  As Robert has indicated, the obvious idea
is to introduce (an Emacs-style) hooks mechanism to be run at certain
times, or more generally, when certain events occur.  Unfortunately, the
attempt to make this rather general, as discussed in Boston, means that
things also take a bit longer to get done.  But conceptually, what we
want is a suite of

	setHook() addHook() runHooks()

functions, and things like .First(), .First.lib() (and the user
variants), code to be run when creating a save image etc., can all be
integrated into this general mechanism.

[Basically, hooks are lists of functions because in some cases we need
to call them with certain arguments, e.g. the .First.lib package load
hook always has library and package and maybe also version eventually.]

For package config, users can then use setHook() to override the system
and/or site defaults, or addHook() to add to them.  As everything
happens inside R there is no need for a special format, as discussed in 
(3), (5), and (7).

[If users cannot be expected to code their preferences in R ... then we
could provide an interactive tool which eventually emits the R code.]

Long term, startup configuration will include setting defaults, loading
packages, perhaps playing namespace magic with some of them, perhaps
everything according to predefined 'themes' ... and I'd like to have all
of this in one place, if possible.

Point (4) is very important, in particular if we think about saving and
restoring the 'state' of an R session (as opposed to just the work
space).  I think many of us (I know from at least Greg, Fritz and
myself) have code going in this direction, but then we need more than
just names of the packages.  We should perhaps also know about attached
non-package objects etc.  Also, I am not sure about how attempting to
load/attach in reverse order will interact with namespace import/export
and pre-computing package dependencies before loading them.  But in any
case, dumping an object that somehow represents the session state would
be extremely important---but I do think we need an R object to represent
the information.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian.trapletti@lmttrading.com  Fri Oct 25 08:46:21 2002
From: adrian.trapletti@lmttrading.com (Adrian Trapletti)
Date: Fri, 25 Oct 2002 09:46:21 +0200
Subject: [R] Combinatorial Optimisation
References: <200210250201.g9P214Ui023993@hypatia.math.ethz.ch>
Message-ID: <3DB8F6CC.8C3D4E9@lmttrading.com>

> Date: Thu, 24 Oct 2002 08:58:08 +0200 (CEST)
> From: Detlef Steuer <Detlef.Steuer@unibw-hamburg.de>
> Subject: RE: [R] Combinatorial Optimisation
>
> This thread missed me somehow.
>
> If not mentioned before:
> simulated annealing is implemented in optim().

The current implementation of simulated annealing in optim() has been designed for a continuos parameter space. The next candidate
point in the parameter space is generated from a Gaussian Markov kernel with scale proportional to the actual temperature. However,
it is quite simple to change this for a combinatorial optimization:

in the R source tree, see the file src/main/optim.c, function samin:

What you need to change are the four lines, that are responsible for generating a new candidate point:

for (i = 0; i < n; i++)
  dp[i] = scale * t * norm_rand();  /* random perturbation */
for (i = 0; i < n; i++)
  ptry[i] = p[i] + dp[i];  /* new candidate point */

You could, e.g., replace them by a call to an R function, which randomly selects a new candidate point of a finite set of points.
Hence, to quickly get SA for combinatorial optimization:

Copy and paste samin from optim.c
Change the four lines
Write an R wrapper for this new function

best
Adrian

PS: TO R-DEVEL: What about having this behaviour in optim (default as is, optional a function argument which selects a candidate
point)?

--
Dr. Adrian Trapletti             Phone :             +41 (0) 1 994 5631
Trapletti Statistical Computing  Mobile:             +41 (0)76 370 5631
Wildsbergstrasse 31              Fax   :             +41 (0) 1 994 5631
CH-8610 Uster                    Email :  mailto:a.trapletti@bluewin.ch
Switzerland                      WWW   : http://trapletti.homelinux.com



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Oct 25 13:01:43 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 25 Oct 2002 13:01:43 +0100 (BST)
Subject: [R] Combinatorial Optimisation
In-Reply-To: <3DB8F6CC.8C3D4E9@lmttrading.com>
Message-ID: <Pine.LNX.4.31.0210251259530.10820-100000@gannet.stats>

Adrian,

Thanks for the idea.  If you were willing to contribute a patch to do this
we would be happy to incorporate it.

Brian


On Fri, 25 Oct 2002, Adrian Trapletti wrote:

> > Date: Thu, 24 Oct 2002 08:58:08 +0200 (CEST)
> > From: Detlef Steuer <Detlef.Steuer@unibw-hamburg.de>
> > Subject: RE: [R] Combinatorial Optimisation
> >
> > This thread missed me somehow.
> >
> > If not mentioned before:
> > simulated annealing is implemented in optim().
>
> The current implementation of simulated annealing in optim() has been designed for a continuos parameter space. The next candidate
> point in the parameter space is generated from a Gaussian Markov kernel with scale proportional to the actual temperature. However,
> it is quite simple to change this for a combinatorial optimization:
>
> in the R source tree, see the file src/main/optim.c, function samin:
>
> What you need to change are the four lines, that are responsible for generating a new candidate point:
>
> for (i = 0; i < n; i++)
>   dp[i] = scale * t * norm_rand();  /* random perturbation */
> for (i = 0; i < n; i++)
>   ptry[i] = p[i] + dp[i];  /* new candidate point */
>
> You could, e.g., replace them by a call to an R function, which randomly selects a new candidate point of a finite set of points.
> Hence, to quickly get SA for combinatorial optimization:

(Using an R function here is not entirely trivial, hence the request
above.)

> Copy and paste samin from optim.c
> Change the four lines
> Write an R wrapper for this new function
>
> best
> Adrian
>
> PS: TO R-DEVEL: What about having this behaviour in optim (default as is, optional a function argument which selects a candidate
> point)?
>
> --
> Dr. Adrian Trapletti             Phone :             +41 (0) 1 994 5631
> Trapletti Statistical Computing  Mobile:             +41 (0)76 370 5631
> Wildsbergstrasse 31              Fax   :             +41 (0) 1 994 5631
> CH-8610 Uster                    Email :  mailto:a.trapletti@bluewin.ch
> Switzerland                      WWW   : http://trapletti.homelinux.com
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Oct 25 14:17:22 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 25 Oct 2002 09:17:22 -0400
Subject: RFC: Loading packages at startup
In-Reply-To: <15800.61307.451828.338523@mithrandir.hornik.net>
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel> <15800.61307.451828.338523@mithrandir.hornik.net>
Message-ID: <tigiru0ea5ogksjn520jiffrlim1g9dt1d@4ax.com>

On Fri, 25 Oct 2002 09:15:07 +0200, Kurt.Hornik@wu-wien.ac.at wrote in
message <15800.61307.451828.338523@mithrandir.hornik.net>:

>  But in any
>case, dumping an object that somehow represents the session state would
>be extremely important---but I do think we need an R object to represent
>the information.

It might be possible at some point to store something that would cause
R to fail to start, so if a binary format is used for this file, there
should be tools provided to allow it to be edited.  This could be as
simple as instructions for running "R --vanilla", loading and editing
the startup info, and saving it back.  

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From terra@diku.dk  Fri Oct 25 15:50:18 2002
From: terra@diku.dk (terra@diku.dk)
Date: Fri, 25 Oct 2002 16:50:18 +0200 (MET DST)
Subject: qgamma precision (PR#2214)
Message-ID: <200210251450.QAA13659@pubhealth.ku.dk>

Full_Name: Morten Welinder
Version: 1.5.1
OS: Solaris
Submission from: (NULL) (65.213.85.136)


I was having problems with qgamma's precision in the sense that
pgamma(qpgamma(x))
was not as close to the identity function as I would like.  I was seeing
relative
errors with random input of about 1e-8.  This fits nicely with the code'd EPS2
value of 5e-7.

To solve this I added a newton step at the end.  This seems far cheaper than
the
current iterations.  Here's the code I added (to replace the final return):


    /* Special Gnumeric patch to improve precision.  */
    {
	gnum_float x0 = 0.5*scale*ch;
	gnum_float e0 = pgamma (x0, alpha, scale, lower_tail, log_p) - p;

	if (e0 != 0 && lower_tail && !log_p) {
	    gnum_float d0 = dgamma (x0, alpha, scale, log_p);
	    if (d0) {
		gnum_float x1 = x0 - e0 / d0;
		gnum_float e1 = pgamma (x1, alpha, scale, lower_tail, log_p) - p;
		if (gnumabs (e1) < gnumabs (e0))
		    x0 = x1;
	    }
	}

	return x0;
    }

(Just read "gnum_float" as "double" and "gnumabs" as "fabs".)

The test for lower_tail is because (a) that is where I use it, and (b) the d0
calculation is probably wrong otherwise.

With this change, the relative precision improves to something like 1e-15.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian.trapletti@lmttrading.com  Fri Oct 25 22:32:32 2002
From: adrian.trapletti@lmttrading.com (Adrian Trapletti)
Date: Fri, 25 Oct 2002 23:32:32 +0200
Subject: [R] Combinatorial Optimisation
References: <Pine.LNX.4.31.0210251259530.10820-100000@gannet.stats>
Message-ID: <3DB9B870.D7D565C1@lmttrading.com>

This is a multi-part message in MIME format.
--------------D871E36B191E8352EBC0EAA5
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

ripley@stats.ox.ac.uk wrote:

> Adrian,
>
> Thanks for the idea.  If you were willing to contribute a patch to do this
> we would be happy to incorporate it.

Patches for optim.c and optim.Rd against R-1.6.0 source are attached. I didn't test too extensively, but the basic things and the
traveling salesman example seem to work cleanly. I would be glad if you could review and maybe enhance, in particular the S related
code, in optim.c, because there I am really not an expert.

Furthermore, as I was scanning through optim.c I was not sure if line 99 (original)

     df[i] = REAL(s)[i] * (OS->parscale[i])/(OS->fnscale);

is correct. Shouldn't that be

    df[i] = REAL(s)[i] / ((OS->parscale[i])*(OS->fnscale));

to get back to the optim-internal scaling?

best
Adrian

--
Dr. Adrian Trapletti             Phone :             +41 (0) 1 994 5631
Trapletti Statistical Computing  Mobile:             +41 (0)76 370 5631
Wildsbergstrasse 31              Fax   :             +41 (0) 1 994 5631
CH-8610 Uster                    Email :  mailto:a.trapletti@bluewin.ch
Switzerland                      WWW   : http://trapletti.homelinux.com



--------------D871E36B191E8352EBC0EAA5
Content-Type: text/plain; charset=us-ascii;
 name="patch.optim.Rd"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="patch.optim.Rd"

7c7
<   box-constrained optimization.
---
>   box-constrained optimization and simulated annealing.
21,22c21,24
<    \code{"Nelder-Mead"} and \code{"SANN"} method. If it is \code{NULL}
<    and it is needed, a finite-difference approximation will be used.}
---
>    \code{"Nelder-Mead"} method. If it is \code{NULL} and it is needed, a
>    finite-difference approximation will be used. For the \code{"SANN"}
>    method it is a function to generate a new candidate point. If it is
>    \code{NULL} a default Gaussian Markov kernel is used.}
59c61
<   Method \code{"SANN"} is a variant of simulated annealing
---
>   Method \code{"SANN"} is by default a variant of simulated annealing
64,69c66,73
<   acceptance probability. The next candidate point is generated from a
<   Gaussian Markov kernel with scale proportional to the actual temperature.
<   Temperatures are decreased according to the logarithmic cooling
<   schedule as given in Belisle (1992, p. 890). Note that the
<   \code{"SANN"} method depends critically on the settings of the
<   control parameters.  It is not a general-purpose method but can be
---
>   acceptance probability. By default the next candidate point is
>   generated from a Gaussian Markov kernel with scale proportional to the
>   actual temperature. If a function to generate a new candidate point is
>   given, method \code{"SANN"} can also be used to solve combinatorial
>   optimization problems. Temperatures are decreased according to the
>   logarithmic cooling schedule as given in Belisle (1992, p. 890). Note
>   that the \code{"SANN"} method depends critically on the settings of
>   the control parameters. It is not a general-purpose method but can be 
176c180
< 
---
>   
240a245,290
> 
> ## Combinatorial optimization: Traveling salesman problem
> library(mva)
> 
> data(eurodist)
> eurodistmat <- as.matrix(eurodist)
> 
> distance <- function(sq) {  # Target function
>     sq2 <- embed(sq, 2)
>     return(sum(eurodistmat[cbind(sq2[,2],sq2[,1])]))
> }
> 
> genseq <- function(sq) {  # Generate new candidate sequence 
>     idx <- seq(2, NROW(eurodistmat)-1, by=1)
>     changepoints <- sample(idx, size=2, replace=FALSE)
>     tmp <- sq[changepoints[1]]
>     sq[changepoints[1]] <- sq[changepoints[2]]
>     sq[changepoints[2]] <- tmp
>     return(sq)
> }
> 
> sq <- c(1,2:NROW(eurodistmat),1)  # Initial sequence
> distance(sq)
> 
> res <- optim(sq, distance, genseq, method="SANN",
>              control=list(maxit=20000, temp=2000 ,trace=T))
> res  # Near optimum distance around 12842
> 
> loc <- cmdscale(eurodist)
> rx <- range(x <- loc[,1])
> ry <- range(y <- -loc[,2])
> tspinit <- loc[sq,]
> tspres <- loc[res$par,]
> s <- seq(NROW(tspres)-1)
> 
> plot(x, y, type="n", asp=1, xlab="", ylab="",
>      main="initial solution of traveling salesman problem")
> arrows(tspinit[s,1], -tspinit[s,2], tspinit[s+1,1], -tspinit[s+1,2],
>        angle=10, col="green") 
> text(x, y, names(eurodist), cex=0.8)
> 
> plot(x, y, type="n", asp=1, xlab="", ylab="",
>      main="optim() 'solving' traveling salesman problem") 
> arrows(tspres[s,1], -tspres[s,2], tspres[s+1,1], -tspres[s+1,2],
>        angle=10, col="red")
> text(x, y, names(eurodist), cex=0.8)

--------------D871E36B191E8352EBC0EAA5
Content-Type: text/plain; charset=us-ascii;
 name="patch.optim.c"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="patch.optim.c"

*** ./src/main/optim.c.origin	Mon Apr  8 08:19:48 2002
--- ./src/main/optim.c	Fri Oct 25 18:27:41 2002
***************
*** 155,164 ****
--- 155,193 ----
  	}
  	UNPROTECT(1); /* x */
      }
  }
  
+ static void genptry(int n, double *p, double *ptry, double scale, void *ex)
+ {    
+     SEXP s, x;
+     int i;
+     OptStruct OS = (OptStruct) ex;
+     PROTECT_INDEX ipx;
+ 
+     if (!isNull(OS->R_gcall)) {  /* user defined generation of candidate point */
+       	PROTECT(x = allocVector(REALSXP, n));
+ 	for (i = 0; i < n; i++) {
+ 	    if (!R_FINITE(p[i])) error("non-finite value supplied by optim");
+ 	    REAL(x)[i] = p[i] * (OS->parscale[i]);
+ 	}
+ 	SETCADR(OS->R_gcall, x);
+ 	PROTECT_WITH_INDEX(s = eval(OS->R_gcall, OS->R_env), &ipx);
+ 	REPROTECT(s = coerceVector(s, REALSXP), ipx);
+ 	if(LENGTH(s) != n)
+ 	    error("candidate point in optim evaluated to length %d not %d",
+ 		  LENGTH(s), n);
+ 	for (i = 0; i < n; i++)
+ 	    ptry[i] = REAL(s)[i] / (OS->parscale[i]);
+ 	UNPROTECT(2);
+     } 
+     else {  /* default Gaussian Markov kernel */
+         for (i = 0; i < n; i++)
+             ptry[i] = p[i] + scale * norm_rand();  /* new candidate point */
+     }
+ }
+ 
  /* par fn gr method options */
  SEXP do_optim(SEXP call, SEXP op, SEXP args, SEXP rho)
  {
      SEXP par, fn, gr, method, options, tmp, slower, supper;
      SEXP res, value, counts, conv;
***************
*** 219,237 ****
  	for (i = 0; i < npar; i++)
  	    REAL(par)[i] = opar[i] * (OS->parscale[i]);
  	grcount = NA_INTEGER;
  
      }
!     else if (strcmp(tn, "SANN") == 0) {
!       tmax = asInteger(getListElement(options, "tmax"));
!       temp = asReal(getListElement(options, "temp"));
!       if (tmax == NA_INTEGER) error("tmax is not an integer");
!       samin (npar, dpar, &val, fminfn, maxit, tmax, temp, trace, (void *)OS);
!       for (i = 0; i < npar; i++)
! 	  REAL(par)[i] = dpar[i] * (OS->parscale[i]);
!       fncount = maxit;
!       grcount = NA_INTEGER;
  
      } else if (strcmp(tn, "BFGS") == 0) {
  	SEXP ndeps;
  
  	nREPORT = asInteger(getListElement(options, "REPORT"));
--- 248,273 ----
  	for (i = 0; i < npar; i++)
  	    REAL(par)[i] = opar[i] * (OS->parscale[i]);
  	grcount = NA_INTEGER;
  
      }
!     else if (strcmp(tn, "SANN") == 0) {	
!         tmax = asInteger(getListElement(options, "tmax"));
!         temp = asReal(getListElement(options, "temp"));
!         if (tmax == NA_INTEGER) error("tmax is not an integer");
!         if (!isNull(gr)) {
!             if (!isFunction(gr)) error("gr is not a function");
!                 PROTECT(OS->R_gcall = lang2(gr, R_NilValue));
!         } else {
! 	    PROTECT(OS->R_gcall = R_NilValue); /* for balance */
!         }
!         samin (npar, dpar, &val, fminfn, maxit, tmax, temp, trace, (void *)OS);
!         for (i = 0; i < npar; i++)
!             REAL(par)[i] = dpar[i] * (OS->parscale[i]);
!         fncount = maxit;
!         grcount = NA_INTEGER;
!         UNPROTECT(1);  /* OS->R_gcall */
  
      } else if (strcmp(tn, "BFGS") == 0) {
  	SEXP ndeps;
  
  	nREPORT = asInteger(getListElement(options, "REPORT"));
***************
*** 1056,1074 ****
  	Rprintf ("sann objective function values\n");
  	Rprintf ("initial       value %f\n", *yb);
      }
      scale = 1.0/ti;
      its = itdoc = 1;
!     while (its < maxit) { /* cool down system */
  	t = ti/log((double)its + E1);  /* temperature annealing schedule */
  	k = 1;
  	while ((k <= tmax) && (its < maxit))  /* iterate at constant temperature */
  	{
! 	    for (i = 0; i < n; i++)
! 		dp[i] = scale * t * norm_rand();  /* random perturbation */
! 	    for (i = 0; i < n; i++)
! 		ptry[i] = p[i] + dp[i];  /* new candidate point */
  	    ytry = fminfn (n, ptry, ex);
  	    if (!R_FINITE(ytry)) ytry = big;
  	    dy = ytry - y;
  	    if ((dy <= 0.0) || (unif_rand() < exp(-dy/t))) {  /* accept new point? */
  		for (j = 0; j < n; j++) p[j] = ptry[j];
--- 1092,1107 ----
  	Rprintf ("sann objective function values\n");
  	Rprintf ("initial       value %f\n", *yb);
      }
      scale = 1.0/ti;
      its = itdoc = 1;
!     while (its < maxit) {  /* cool down system */
  	t = ti/log((double)its + E1);  /* temperature annealing schedule */
  	k = 1;
  	while ((k <= tmax) && (its < maxit))  /* iterate at constant temperature */
  	{
!             genptry(n, p, ptry, scale * t, ex);  /* generate new candidate point */
  	    ytry = fminfn (n, ptry, ex);
  	    if (!R_FINITE(ytry)) ytry = big;
  	    dy = ytry - y;
  	    if ((dy <= 0.0) || (unif_rand() < exp(-dy/t))) {  /* accept new point? */
  		for (j = 0; j < n; j++) p[j] = ptry[j];

--------------D871E36B191E8352EBC0EAA5--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ko-Kang@xtra.co.nz  Sat Oct 26 09:43:04 2002
From: Ko-Kang@xtra.co.nz (Ko-Kang Kevin Wang)
Date: Sat, 26 Oct 2002 21:43:04 +1300
Subject: R-1.6.1beta available
References: <x2of9t451t.fsf@biostat.ku.dk>
Message-ID: <00fd01c27ccb$b39cd3c0$5c2758db@kwan022>

Just for interests, I have succesfully compiled  R-1.6.1beta_2002-10-25
using ActiveTcl 8.4.1.0 (released on 20 Oct) and Inno Setup 3.0.4 Beta (also
released on 20 Oct).

As mentioned before, with Inno Setup 3.x, they got rid of the
"AlwaysCreateUninstallIcon".  So I had to remove it from JRins before
compilation.  But the main interest, I guess, is it can be compiled with
ActiveTcl 8.4.1.0

Cheers,

Kevin

------------------------------------------------
Ko-Kang Kevin Wang
Post Graduate PGDipSci Student
Department of Statistics
University of Auckland
New Zealand
www.stat.auckland.ac.nz/~kwan022

----- Original Message -----
From: "Peter Dalgaard BSA" <p.dalgaard@biostat.ku.dk>
To: <r-devel@r-project.org>
Sent: Friday, October 18, 2002 1:34 AM
Subject: R-1.6.1beta available


> R 1.6.1 has been scheduled for November 1.
>
> We're makin interim beta versions available via
>
> http://cran.us.r-project.org/src/base
>
> (ftp://cran.us.r-project.org/pub/R/src/base used to work, but
> apparently FTP access has been disabled)
>
> The filename is R-1.6.1beta_*.tar.gz, where * is the creation date.
>
> If you want to help ensure that the final 1.6.1 works satisfactorily
> on *your* platform, it might be a good idea to make a test build of
> the beta and report any errors back (to the r-devel list, not to me
> personally, please!).
>
> New versions will be made available each day until the final release,
> barring hardware trouble and build script failures.
>
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Oct 26 10:48:04 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 26 Oct 2002 10:48:04 +0100 (BST)
Subject: R-1.6.1beta available
In-Reply-To: <00fd01c27ccb$b39cd3c0$5c2758db@kwan022>
Message-ID: <Pine.LNX.4.31.0210261037020.9033-100000@gannet.stats>

On Sat, 26 Oct 2002, Ko-Kang Kevin Wang wrote:

> Just for interests, I have succesfully compiled  R-1.6.1beta_2002-10-25
> using ActiveTcl 8.4.1.0 (released on 20 Oct) and Inno Setup 3.0.4 Beta (also
> released on 20 Oct).

Surely a Beta is never `released'!  We will consider using Inno Setup 3.x
once it really is released.

As far as I know we do not intend to build the 1.6.1 binary with Tcl
8.4.x, and the documentation does say that 8.3.x is required. A given
build has to use either 8.3 or 8.4 as the DLLs have different names.
Given the prevalence of 8.3, we won't I believe be moving to 8.4 for a
patch release. Maybe rw1070 will use Tcl 8.4.x.

> As mentioned before, with Inno Setup 3.x, they got rid of the
> "AlwaysCreateUninstallIcon".  So I had to remove it from JRins before
> compilation.  But the main interest, I guess, is it can be compiled with
> ActiveTcl 8.4.1.0

(I did add a patch to tcltk.c to allow it to build correctly under Tcl
8.4.x.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From frank.kroll@uni-bielefeld.de  Sat Oct 26 11:48:13 2002
From: frank.kroll@uni-bielefeld.de (frank.kroll@uni-bielefeld.de)
Date: Sat, 26 Oct 2002 12:48:13 +0200 (MET DST)
Subject: ls() without variables, which begins with a point (PR#2216)
Message-ID: <200210261048.MAA16177@pubhealth.ku.dk>

Full_Name: Frank Kroll
Version: 1.6.0
OS: Windows
Submission from: (NULL) (217.2.248.125)


The function ls() doesnt show variables, which begins with a point, i.e. .test

> .test<-c(1,2,3)
> .test
[1] 1 2 3
> ls()
character(0)
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Oct 26 14:00:40 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 26 Oct 2002 14:00:40 +0100 (BST)
Subject: ls() without variables, which begins with a point (PR#2216)
In-Reply-To: <200210261048.MAA16177@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210261355210.9237-100000@gannet.stats>

That's not a bug.  See the argument all.names.  There is even an example
on the help page (?ls) to educate you.

Please do read the section of the FAQ on what we want bug reports on.

On Sat, 26 Oct 2002 frank.kroll@uni-bielefeld.de wrote:

> Full_Name: Frank Kroll
> Version: 1.6.0
> OS: Windows
> Submission from: (NULL) (217.2.248.125)
>
>
> The function ls() doesnt show variables, which begins with a point, i.e. .test
>
> > .test<-c(1,2,3)
> > .test
> [1] 1 2 3
> > ls()
> character(0)
> >

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sat Oct 26 14:20:34 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sat, 26 Oct 2002 15:20:34 +0200 (MET DST)
Subject: ls() without variables, which begins with a point (PR#2216)
Message-ID: <200210261320.PAA16492@pubhealth.ku.dk>

frank.kroll@uni-bielefeld.de wrote:
> 
> Full_Name: Frank Kroll
> Version: 1.6.0
> OS: Windows
> Submission from: (NULL) (217.2.248.125)
> 
> The function ls() doesnt show variables, which begins with a point, i.e. .test
> 
> > .test<-c(1,2,3)
> > .test
> [1] 1 2 3
> > ls()
> character(0)

Why do you call this documented feature a bug?

Citing ?ls:
"all.names: a logical value. If TRUE, all object names are returned. If
FALSE, names which begin with a ``.'' are omitted."

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 27 08:18:52 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 27 Oct 2002 08:18:52 +0000 (GMT)
Subject: VR update
Message-ID: <Pine.LNX.4.31.0210270808270.16692-100000@gannet.stats>

There is an update to VR_7.0-9 on CRAN, which you may want to ensure you
have if you are beta-testing 1.6.1.

The only changes are in the scripts, working around changes in lattice,
mclust, nlme (where the examples stopped working on Linux, only, for me a
few months ago) and yags.

We do seem to be getting a lot of API changes in packages, usually
unannounced, and that makes update.packages() a very dangerous tool.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Sun Oct 27 21:40:58 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Sun, 27 Oct 2002 15:40:58 -0600
Subject: RODBC patchlet
Message-ID: <15804.23914.688113.981007@sonny.eddelbuettel.com>


[ Disclaimer: Yes, I do know that RODBC is in a state of minor limbo as far
as maintenance is concerned. But it is also useful, and used, which is why I
hope that someone might apply the small change outlined below. ]

The current version in CRAN's devel directories fails to build under R 1.6.1
(beta from Oct 27):

chibud:/home/edd/RODBC# R CMD INSTALL .
* Installing *source* package 'RODBC' ...
creating cache ./config.cache
checking for library containing SQLTables... -lodbc
updating cache ./config.cache
creating ./config.status
creating src/Makevars
** libs
gcc -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c RODBC.c -o RODBC.o
RODBC.c:22: parse error
make: *** [RODBC.o] Error 1
ERROR: compilation failed for package 'RODBC'

My quick solution was to #ifdef the following block of RODBC.c away:

#if 0
#if R_VERSION < R_Version(1, 2, 0)
# define STRING_ELT(x,i)        (STRING(x)[i])
# define VECTOR_ELT(x,i)        (VECTOR(x)[i])
# define SET_STRING_ELT(x,i,v)  (STRING(x)[i] = (v))
# define SET_VECTOR_ELT(x,i,v)  (VECTOR(x)[i] = (v))
#endif
#endif

I'm sure there is a nicer solution, but it is immediately apparent to me. The
gcc version which puked is 2.95.4 as in Debian testing.

Dirk

-- 
The only function of economic forecasting is to make astrology 
look respectable.                    -- John Kenneth Galbraith
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Oct 28 06:19:56 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 28 Oct 2002 07:19:56 +0100
Subject: RODBC patchlet
In-Reply-To: <15804.23914.688113.981007@sonny.eddelbuettel.com>
References: <15804.23914.688113.981007@sonny.eddelbuettel.com>
Message-ID: <15804.55052.516847.294806@mithrandir.hornik.net>

>>>>> Dirk Eddelbuettel writes:

> [ Disclaimer: Yes, I do know that RODBC is in a state of minor limbo
> as far as maintenance is concerned. But it is also useful, and used,
> which is why I hope that someone might apply the small change outlined
> below. ]

> The current version in CRAN's devel directories fails to build under R
> 1.6.1 (beta from Oct 27):

> chibud:/home/edd/RODBC# R CMD INSTALL .
> * Installing *source* package 'RODBC' ...
> creating cache ./config.cache
> checking for library containing SQLTables... -lodbc
> updating cache ./config.cache
> creating ./config.status
> creating src/Makevars
> ** libs
> gcc -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c RODBC.c -o RODBC.o
> RODBC.c:22: parse error
> make: *** [RODBC.o] Error 1
> ERROR: compilation failed for package 'RODBC'

> My quick solution was to #ifdef the following block of RODBC.c away:

> #if 0
> #if R_VERSION < R_Version(1, 2, 0)
> # define STRING_ELT(x,i)        (STRING(x)[i])
> # define VECTOR_ELT(x,i)        (VECTOR(x)[i])
> # define SET_STRING_ELT(x,i,v)  (STRING(x)[i] = (v))
> # define SET_VECTOR_ELT(x,i,v)  (VECTOR(x)[i] = (v))
> #endif
> #endif

> I'm sure there is a nicer solution, but it is immediately apparent to
> me. The gcc version which puked is 2.95.4 as in Debian testing.

This is basically the right solution: even better is to remove the < 1.2
code and add a Depends on R (>= 1.2) to DESCRIPTION.

Otoh, CRAN only accepts packages which are actively maintained, so we do
need a volunteer to step in.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 28 07:10:03 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 Oct 2002 07:10:03 +0000 (GMT)
Subject: RODBC patchlet
In-Reply-To: <15804.23914.688113.981007@sonny.eddelbuettel.com>
Message-ID: <Pine.LNX.4.31.0210280706270.10525-100000@gannet.stats>

Much more is needed.  I do plan to do produce an update fairly soon,
and as I don't have any current use of this under Unix, I will run it by
you if I may.

Brian

On Sun, 27 Oct 2002, Dirk Eddelbuettel wrote:

>
> [ Disclaimer: Yes, I do know that RODBC is in a state of minor limbo as far
> as maintenance is concerned. But it is also useful, and used, which is why I
> hope that someone might apply the small change outlined below. ]
>
> The current version in CRAN's devel directories fails to build under R 1.6.1
> (beta from Oct 27):
>
> chibud:/home/edd/RODBC# R CMD INSTALL .
> * Installing *source* package 'RODBC' ...
> creating cache ./config.cache
> checking for library containing SQLTables... -lodbc
> updating cache ./config.cache
> creating ./config.status
> creating src/Makevars
> ** libs
> gcc -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c RODBC.c -o RODBC.o
> RODBC.c:22: parse error
> make: *** [RODBC.o] Error 1
> ERROR: compilation failed for package 'RODBC'
>
> My quick solution was to #ifdef the following block of RODBC.c away:

Well, the 160update.txt on the developer site (and the NEWS file) tells
you that you need to include Rversion.h.

> #if 0
> #if R_VERSION < R_Version(1, 2, 0)
> # define STRING_ELT(x,i)        (STRING(x)[i])
> # define VECTOR_ELT(x,i)        (VECTOR(x)[i])
> # define SET_STRING_ELT(x,i,v)  (STRING(x)[i] = (v))
> # define SET_VECTOR_ELT(x,i,v)  (VECTOR(x)[i] = (v))
> #endif
> #endif
>
> I'm sure there is a nicer solution, but it is immediately apparent to me. The
> gcc version which puked is 2.95.4 as in Debian testing.
>
> Dirk
>
> --
> The only function of economic forecasting is to make astrology
> look respectable.                    -- John Kenneth Galbraith
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Oct 28 09:07:20 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Mon, 28 Oct 2002 10:07:20 +0100
Subject: RFC: no automatic updates of packages with major version change
Message-ID: <15804.65096.834736.160738@celeborn.leisch.at>


We (Kurt Hornik, Brian Ripley & I) want to propose the following
change to the automatic package updating mechanisms of R: A major
version number change of a package will by default disable the
automatic updating of packages, because the interface of the package
might have changed and hence old code might not run anymore.

A recent example was the release of mclust version 2.0, which is not
fully compatible with mclust 1.x (functions got removed, others added
and arguments renamed etc).

Of course it is absolutely OK for a package to change its API,
otherwise improvements would be rather hard, but it should be easier
for users to stay with the old version until they have figured out
what exactly the effects of an upgrade would be.

We want to define a "major version number change" as a change of the
first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
from 0.x to 1.x is no major change (because the 0.x series is read as
"working towards 1.0").

In case of a major change

*) update.packages() will warn the user if ask=TRUE, like

mclust :
 Version 1.1-7 in /usr/local/lib/R-contrib 
 Version 2.0-1 on CRAN
 WARNING: major version number change
Update (y/N)?

*) if ask=FALSE, update.packages() will cowardly refuse the updates
 and issue a warning for all packages that have not been updated.

*) the same will be done for the methods working off packageStatus
 objects.

Note that we are already working on new package management tools which
should make it easier to have multiple versions of a package installed
simultaneously. 

All comments are welcome.

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Oct 28 10:19:22 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 28 Oct 2002 11:19:22 +0100 (MET)
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <15804.65096.834736.160738@celeborn.leisch.at>
Message-ID: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>

> 
> We (Kurt Hornik, Brian Ripley & I) want to propose the following
> change to the automatic package updating mechanisms of R: A major
> version number change of a package will by default disable the
> automatic updating of packages, because the interface of the package
> might have changed and hence old code might not run anymore.
> 
> A recent example was the release of mclust version 2.0, which is not
> fully compatible with mclust 1.x (functions got removed, others added
> and arguments renamed etc).
> 
> Of course it is absolutely OK for a package to change its API,
> otherwise improvements would be rather hard, but it should be easier
> for users to stay with the old version until they have figured out
> what exactly the effects of an upgrade would be.
> 
> We want to define a "major version number change" as a change of the
> first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> from 0.x to 1.x is no major change (because the 0.x series is read as
> "working towards 1.0").
> 

This definition requires EVERY package maintainer to be VERY careful about
version numbers / API changes and I guess some of us (including me) may
fail this exercise.

I suggest the following definition: the API of a package changed
iff the example code of the previous version of the package does not run
without an error. In contrast, the results of the computations may
differ. Of course, this induces additional effort to the CRAN maintainers
but it should be possible to extract and check the examples of a CRAN
package against a new version BEFORE uploading the new version to CRAN. In
addition, a flag `APIChange TRUE / FALSE' visible to `update.packages' is
needed.

Or should this be part of R CMD check? Maybe R CMD check can download the
`official' release from CRAN to check against an API change and give a
warning?

best, 

Torsten

> In case of a major change
> 
> *) update.packages() will warn the user if ask=TRUE, like
> 
> mclust :
>  Version 1.1-7 in /usr/local/lib/R-contrib 
>  Version 2.0-1 on CRAN
>  WARNING: major version number change
> Update (y/N)?
> 
> *) if ask=FALSE, update.packages() will cowardly refuse the updates
>  and issue a warning for all packages that have not been updated.
> 
> *) the same will be done for the methods working off packageStatus
>  objects.
> 
> Note that we are already working on new package management tools which
> should make it easier to have multiple versions of a package installed
> simultaneously. 
> 
> All comments are welcome.
> 
> Best,
> Fritz
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 28 11:28:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 Oct 2002 11:28:30 +0000 (GMT)
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
Message-ID: <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>

Torsten,

I did suggest that test at an earlier stage in the discussions.  But some
packages have so few examples they may well pass and have repercussions.

I do think we need to address the problem: lattice_0.6-5 is another
example of an API change.

Now, we could throw the onus on the maintainers to add a

BackwardsCompatible:FALSE

flag to the DESCRIPTION file, if people really think that would be easier.

Brian

On Mon, 28 Oct 2002, Torsten Hothorn wrote:

> >
> > We (Kurt Hornik, Brian Ripley & I) want to propose the following
> > change to the automatic package updating mechanisms of R: A major
> > version number change of a package will by default disable the
> > automatic updating of packages, because the interface of the package
> > might have changed and hence old code might not run anymore.
> >
> > A recent example was the release of mclust version 2.0, which is not
> > fully compatible with mclust 1.x (functions got removed, others added
> > and arguments renamed etc).
> >
> > Of course it is absolutely OK for a package to change its API,
> > otherwise improvements would be rather hard, but it should be easier
> > for users to stay with the old version until they have figured out
> > what exactly the effects of an upgrade would be.
> >
> > We want to define a "major version number change" as a change of the
> > first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> > change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> > from 0.x to 1.x is no major change (because the 0.x series is read as
> > "working towards 1.0").
> >
>
> This definition requires EVERY package maintainer to be VERY careful about
> version numbers / API changes and I guess some of us (including me) may
> fail this exercise.
>
> I suggest the following definition: the API of a package changed
> iff the example code of the previous version of the package does not run
> without an error. In contrast, the results of the computations may
> differ. Of course, this induces additional effort to the CRAN maintainers
> but it should be possible to extract and check the examples of a CRAN
> package against a new version BEFORE uploading the new version to CRAN. In
> addition, a flag `APIChange TRUE / FALSE' visible to `update.packages' is
> needed.
>
> Or should this be part of R CMD check? Maybe R CMD check can download the
> `official' release from CRAN to check against an API change and give a
> warning?
>
> best,
>
> Torsten
>
> > In case of a major change
> >
> > *) update.packages() will warn the user if ask=TRUE, like
> >
> > mclust :
> >  Version 1.1-7 in /usr/local/lib/R-contrib
> >  Version 2.0-1 on CRAN
> >  WARNING: major version number change
> > Update (y/N)?
> >
> > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> >  and issue a warning for all packages that have not been updated.
> >
> > *) the same will be done for the methods working off packageStatus
> >  objects.
> >
> > Note that we are already working on new package management tools which
> > should make it easier to have multiple versions of a package installed
> > simultaneously.
> >
> > All comments are welcome.
> >
> > Best,
> > Fritz
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Oct 28 11:54:47 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 28 Oct 2002 12:54:47 +0100
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
References: <15804.65096.834736.160738@celeborn.leisch.at>
 <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
Message-ID: <15805.9607.993910.88576@mithrandir.hornik.net>

>>>>> Torsten Hothorn writes:

>> 
>> We (Kurt Hornik, Brian Ripley & I) want to propose the following
>> change to the automatic package updating mechanisms of R: A major
>> version number change of a package will by default disable the
>> automatic updating of packages, because the interface of the package
>> might have changed and hence old code might not run anymore.
>> 
>> A recent example was the release of mclust version 2.0, which is not
>> fully compatible with mclust 1.x (functions got removed, others added
>> and arguments renamed etc).
>> 
>> Of course it is absolutely OK for a package to change its API,
>> otherwise improvements would be rather hard, but it should be easier
>> for users to stay with the old version until they have figured out
>> what exactly the effects of an upgrade would be.
>> 
>> We want to define a "major version number change" as a change of the
>> first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
>> change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
>> from 0.x to 1.x is no major change (because the 0.x series is read as
>> "working towards 1.0").
>> 

> This definition requires EVERY package maintainer to be VERY careful
> about version numbers / API changes and I guess some of us (including
> me) may fail this exercise.

> I suggest the following definition: the API of a package changed iff
> the example code of the previous version of the package does not run
> without an error. In contrast, the results of the computations may
> differ. Of course, this induces additional effort to the CRAN
> maintainers but it should be possible to extract and check the
> examples of a CRAN package against a new version BEFORE uploading the
> new version to CRAN. In addition, a flag `APIChange TRUE / FALSE'
> visible to `update.packages' is needed.

> Or should this be part of R CMD check? Maybe R CMD check can download
> the `official' release from CRAN to check against an API change and
> give a warning?

All of this might be doable but I am not sure it is worth the effort.

If a package has basically no examples then it can change things in
all possible ways without breaking its examples.  So I think that the
condition is an 'if' but far far away from an 'only if'.

I would assume that most package writers know when they change their
code in incompatible ways.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Oct 28 12:18:57 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 28 Oct 2002 13:18:57 +0100
Subject: RODBC patchlet
In-Reply-To: <Pine.LNX.4.31.0210280706270.10525-100000@gannet.stats>
References: <15804.23914.688113.981007@sonny.eddelbuettel.com>
 <Pine.LNX.4.31.0210280706270.10525-100000@gannet.stats>
Message-ID: <15805.11057.675721.725432@mithrandir.hornik.net>

>>>>>   writes:

> Much more is needed.  I do plan to do produce an update fairly soon,
> and as I don't have any current use of this under Unix, I will run it
> by you if I may.

Great news!  Thanks for taking this up, Brian.

Best
-k

> Brian

> On Sun, 27 Oct 2002, Dirk Eddelbuettel wrote:

>> 
>> [ Disclaimer: Yes, I do know that RODBC is in a state of minor limbo as far
>> as maintenance is concerned. But it is also useful, and used, which is why I
>> hope that someone might apply the small change outlined below. ]
>> 
>> The current version in CRAN's devel directories fails to build under R 1.6.1
>> (beta from Oct 27):
>> 
>> chibud:/home/edd/RODBC# R CMD INSTALL .
>> * Installing *source* package 'RODBC' ...
>> creating cache ./config.cache
>> checking for library containing SQLTables... -lodbc
>> updating cache ./config.cache
>> creating ./config.status
>> creating src/Makevars
>> ** libs
>> gcc -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c RODBC.c -o RODBC.o
>> RODBC.c:22: parse error
>> make: *** [RODBC.o] Error 1
>> ERROR: compilation failed for package 'RODBC'
>> 
>> My quick solution was to #ifdef the following block of RODBC.c away:

> Well, the 160update.txt on the developer site (and the NEWS file) tells
> you that you need to include Rversion.h.

>> #if 0
>> #if R_VERSION < R_Version(1, 2, 0)
>> # define STRING_ELT(x,i)        (STRING(x)[i])
>> # define VECTOR_ELT(x,i)        (VECTOR(x)[i])
>> # define SET_STRING_ELT(x,i,v)  (STRING(x)[i] = (v))
>> # define SET_VECTOR_ELT(x,i,v)  (VECTOR(x)[i] = (v))
>> #endif
>> #endif
>> 
>> I'm sure there is a nicer solution, but it is immediately apparent to me. The
>> gcc version which puked is 2.95.4 as in Debian testing.
>> 
>> Dirk
>> 
>> --
>> The only function of economic forecasting is to make astrology
>> look respectable.                    -- John Kenneth Galbraith
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>> 

> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Oct 28 12:24:51 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 28 Oct 2002 13:24:51 +0100 (MET)
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
Message-ID: <Pine.LNX.4.21.0210281322240.12788-100000@artemis>


On Mon, 28 Oct 2002 ripley@stats.ox.ac.uk wrote:

> Torsten,
> 
> I did suggest that test at an earlier stage in the discussions.  But some
> packages have so few examples they may well pass and have repercussions.
> 

ok, I see.

> I do think we need to address the problem: lattice_0.6-5 is another
> example of an API change.
> 
> Now, we could throw the onus on the maintainers to add a
> 
> BackwardsCompatible:FALSE
> 
> flag to the DESCRIPTION file, if people really think that would be easier.
> 

yes, that would be better than just assuming API changes in every major
release. 

Torsten

> Brian
> 
> On Mon, 28 Oct 2002, Torsten Hothorn wrote:
> 
> > >
> > > We (Kurt Hornik, Brian Ripley & I) want to propose the following
> > > change to the automatic package updating mechanisms of R: A major
> > > version number change of a package will by default disable the
> > > automatic updating of packages, because the interface of the package
> > > might have changed and hence old code might not run anymore.
> > >
> > > A recent example was the release of mclust version 2.0, which is not
> > > fully compatible with mclust 1.x (functions got removed, others added
> > > and arguments renamed etc).
> > >
> > > Of course it is absolutely OK for a package to change its API,
> > > otherwise improvements would be rather hard, but it should be easier
> > > for users to stay with the old version until they have figured out
> > > what exactly the effects of an upgrade would be.
> > >
> > > We want to define a "major version number change" as a change of the
> > > first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> > > change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> > > from 0.x to 1.x is no major change (because the 0.x series is read as
> > > "working towards 1.0").
> > >
> >
> > This definition requires EVERY package maintainer to be VERY careful about
> > version numbers / API changes and I guess some of us (including me) may
> > fail this exercise.
> >
> > I suggest the following definition: the API of a package changed
> > iff the example code of the previous version of the package does not run
> > without an error. In contrast, the results of the computations may
> > differ. Of course, this induces additional effort to the CRAN maintainers
> > but it should be possible to extract and check the examples of a CRAN
> > package against a new version BEFORE uploading the new version to CRAN. In
> > addition, a flag `APIChange TRUE / FALSE' visible to `update.packages' is
> > needed.
> >
> > Or should this be part of R CMD check? Maybe R CMD check can download the
> > `official' release from CRAN to check against an API change and give a
> > warning?
> >
> > best,
> >
> > Torsten
> >
> > > In case of a major change
> > >
> > > *) update.packages() will warn the user if ask=TRUE, like
> > >
> > > mclust :
> > >  Version 1.1-7 in /usr/local/lib/R-contrib
> > >  Version 2.0-1 on CRAN
> > >  WARNING: major version number change
> > > Update (y/N)?
> > >
> > > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> > >  and issue a warning for all packages that have not been updated.
> > >
> > > *) the same will be done for the methods working off packageStatus
> > >  objects.
> > >
> > > Note that we are already working on new package management tools which
> > > should make it easier to have multiple versions of a package installed
> > > simultaneously.
> > >
> > > All comments are welcome.
> > >
> > > Best,
> > > Fritz
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From philippe.grosjean@ifremer.fr  Mon Oct 28 13:06:18 2002
From: philippe.grosjean@ifremer.fr (Philippe Grosjean)
Date: Mon, 28 Oct 2002 14:06:18 +0100
Subject: no automatic updates of packages with major version change
Message-ID: <MABBLJDICACNFOLGIHJOEEEIDAAA.philippe.grosjean@ifremer.fr>

>We (Kurt Hornik, Brian Ripley & I) want to propose the following
>change to the automatic package updating mechanisms of R: A major
>version number change of a package will by default disable the
>automatic updating of packages, because the interface of the package
>might have changed and hence old code might not run anymore.

>...

>We want to define a "major version number change" as a change of the
>first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
>change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
>from 0.x to 1.x is no major change (because the 0.x series is read as
>"working towards 1.0").

This makes sense, otherwise, what would be the reasons of a "complex"
three-level granularity versioning system
X.Y-Z with:
- X being major changes implying *modifications* of the interface (I would
rather eliminate "might" in "might" have changed, otherwise, nobody will
ever know if something really changed or not, see hereunder!)
- Y being addition of new features, while staying fully compatible with the
previous version (with same X)
- Z being maintenance version (no new feature compared to same X.Y, but
correction of bugs).

If everybody conform strictly to this scheme, life will be much, much more
easier! The problem is that not everybody does... and we have X.Y versions
for some packages (what do they means?), or even 2002.X-Y (with 2002 being
the year, and perhaps X being the month [??] of release). All this is
confusing. It should be useful to explain more deeply the recommended
versioning system for R packages in R-exts.pdf.

I understand that, currently, major version 'X' is admitted to increase when
major changes are made, even when the upgraded package remains fully
compatible with the previous version (and this is the desired behaviour, of
course). So, my suggestion is allowing 'X' to increase *only* when
*incompatible* changes are made.

There is still a problem with this versioning system for R packages. When
somebody wants to keep an old major version to keep compatibility with old
scripts, and want also to install the brand new major version to start
exploring it. In this case, there is a conflict because both packages bear
the same name! The simplest solution would be to change the name of the
package (for 'PkgName' for version 1.Y.Z to 'PkgName2' for version
2.Y.Z,...) allowing two or more major versions to live in the same system,
as it was once the case for survival (and now for 'mclust' versus
'mclust1998', although in this case it is the old package that changes its
name, and this is a problem for scripts that use something like
'require(mclust)' and refer to the old interface!!!). There are still
possible confusion when both 'PkgName' and 'PkgName2' are loaded
simultaneously, because many functions are likely to have the same name in
both packages,... but at least, it solves a part of the problem.

Best,

Philippe Grosjean

...........]<(({<...............<}))><...............................
( ( ( ( (
 ) ) ) ) )      Philippe Grosjean
( ( ( ( (
 ) ) ) ) )      IFREMER Nantes - DEL/AO
( ( ( ( (       rue de l'Ile d'Yeu, BP 21105, 44311 Nantes Cedex 3
 ) ) ) ) )      tel: (33) 02.40.37.42.29, fax: (33) 02.40.37.42.41
( ( ( ( ( 
 ) ) ) ) )      SciViews project coordinator (http://www.sciviews.org)
( ( ( ( (       e-mail: phgrosjean@sciviews.org
 ) ) ) ) ) 
( ( ( ( (       "I'm 100% confident that p is between 0 and 1"
 ) ) ) ) )                                L. Gonick & W. Smith (1993)
.......................................................................


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Mon Oct 28 13:08:26 2002
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Mon, 28 Oct 2002 14:08:26 +0100
Subject: RFC: no automatic updates of packages with major version change
References: <Pine.LNX.4.21.0210281322240.12788-100000@artemis>
Message-ID: <3DBD36CA.777A0B6E@ci.tuwien.ac.at>

Torsten Hothorn wrote:
> 
> On Mon, 28 Oct 2002 ripley@stats.ox.ac.uk wrote:
> 
> > Torsten,
> >
> > I did suggest that test at an earlier stage in the discussions.  But some
> > packages have so few examples they may well pass and have repercussions.
> >
> 
> ok, I see.
> 
> > I do think we need to address the problem: lattice_0.6-5 is another
> > example of an API change.
> >
> > Now, we could throw the onus on the maintainers to add a
> >
> > BackwardsCompatible:FALSE
> >
> > flag to the DESCRIPTION file, if people really think that would be easier.
> >
> 
> yes, that would be better than just assuming API changes in every major
> release.

I would agree with that. By now the version is just required to be "a
sequence of at least non-negative integers separated by single `.' or
`-' characters" and can not necessarily be expected to follow the same
system as the R releases.
A field in the DESCRIPTION file is something package maintainers are
more used to, I guess. And obviously there are sometimes API changes
that do not occur when there is a major version number change...
Z

> Torsten
> 
> > Brian
> >
> > On Mon, 28 Oct 2002, Torsten Hothorn wrote:
> >
> > > >
> > > > We (Kurt Hornik, Brian Ripley & I) want to propose the following
> > > > change to the automatic package updating mechanisms of R: A major
> > > > version number change of a package will by default disable the
> > > > automatic updating of packages, because the interface of the package
> > > > might have changed and hence old code might not run anymore.
> > > >
> > > > A recent example was the release of mclust version 2.0, which is not
> > > > fully compatible with mclust 1.x (functions got removed, others added
> > > > and arguments renamed etc).
> > > >
> > > > Of course it is absolutely OK for a package to change its API,
> > > > otherwise improvements would be rather hard, but it should be easier
> > > > for users to stay with the old version until they have figured out
> > > > what exactly the effects of an upgrade would be.
> > > >
> > > > We want to define a "major version number change" as a change of the
> > > > first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> > > > change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> > > > from 0.x to 1.x is no major change (because the 0.x series is read as
> > > > "working towards 1.0").
> > > >
> > >
> > > This definition requires EVERY package maintainer to be VERY careful about
> > > version numbers / API changes and I guess some of us (including me) may
> > > fail this exercise.
> > >
> > > I suggest the following definition: the API of a package changed
> > > iff the example code of the previous version of the package does not run
> > > without an error. In contrast, the results of the computations may
> > > differ. Of course, this induces additional effort to the CRAN maintainers
> > > but it should be possible to extract and check the examples of a CRAN
> > > package against a new version BEFORE uploading the new version to CRAN. In
> > > addition, a flag `APIChange TRUE / FALSE' visible to `update.packages' is
> > > needed.
> > >
> > > Or should this be part of R CMD check? Maybe R CMD check can download the
> > > `official' release from CRAN to check against an API change and give a
> > > warning?
> > >
> > > best,
> > >
> > > Torsten
> > >
> > > > In case of a major change
> > > >
> > > > *) update.packages() will warn the user if ask=TRUE, like
> > > >
> > > > mclust :
> > > >  Version 1.1-7 in /usr/local/lib/R-contrib
> > > >  Version 2.0-1 on CRAN
> > > >  WARNING: major version number change
> > > > Update (y/N)?
> > > >
> > > > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> > > >  and issue a warning for all packages that have not been updated.
> > > >
> > > > *) the same will be done for the methods working off packageStatus
> > > >  objects.
> > > >
> > > > Note that we are already working on new package management tools which
> > > > should make it easier to have multiple versions of a package installed
> > > > simultaneously.
> > > >
> > > > All comments are welcome.
> > > >
> > > > Best,
> > > > Fritz
> > > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > > Send "info", "help", or "[un]subscribe"
> > > > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > > >
> > >
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > >
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Mon Oct 28 13:09:50 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Mon, 28 Oct 2002 08:09:50 -0500
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
References: <Pine.LNX.4.21.0210281107130.7939-100000@artemis> <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
Message-ID: <pvcqru8mhqodgt4gpks5p7qaksar88nifk@4ax.com>

On Mon, 28 Oct 2002 11:28:30 +0000 (GMT), you wrote:

>Now, we could throw the onus on the maintainers to add a
>
>BackwardsCompatible:FALSE
>
>flag to the DESCRIPTION file, if people really think that would be easier.

I think that approach would be better. A major version number change
is appropriate if I add a lot of functions to a package, even though
it may still be compatible with earlier releases.

But instead of "FALSE", I'd rather see the earliest compatible version
number listed.  For example, if 1.0, 2.0 and 2.1 are all compatible,
all versions could say

 BackwardsCompatibleTo:  1.0

If I had skipped upgrading to 2.0, I'd still know that 2.1 is
compatible with 1.0.  Similarly, if 2.0 was incompatible with 1.0,
this scheme would tell me that it was not safe to go directly from 1.0
to 2.1.

Duncan Murdoch

 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Mon Oct 28 13:12:19 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Mon, 28 Oct 2002 08:12:19 -0500
Subject: RFC: no automatic updates of packages with major version
 chan	ge
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC815@usrymx10.merck.com>

Is it possible to have a slightly more elaborate description, such as:

BackwardCompatibleTo: x.x-x

and if the new version is _not_ backward compatible, this would be the
current version number?

Just my $0.02...

Andy

-----Original Message-----
From: Torsten Hothorn [mailto:Torsten.Hothorn@rzmail.uni-erlangen.de]
Sent: Monday, October 28, 2002 7:25 AM
To: ripley@stats.ox.ac.uk
Cc: Friedrich.Leisch@ci.tuwien.ac.at; r-devel@stat.math.ethz.ch
Subject: Re: RFC: no automatic updates of packages with major version
change



On Mon, 28 Oct 2002 ripley@stats.ox.ac.uk wrote:

> Torsten,
> 
> I did suggest that test at an earlier stage in the discussions.  But some
> packages have so few examples they may well pass and have repercussions.
> 

ok, I see.

> I do think we need to address the problem: lattice_0.6-5 is another
> example of an API change.
> 
> Now, we could throw the onus on the maintainers to add a
> 
> BackwardsCompatible:FALSE
> 
> flag to the DESCRIPTION file, if people really think that would be easier.
> 

yes, that would be better than just assuming API changes in every major
release. 

Torsten

> Brian
> 
> On Mon, 28 Oct 2002, Torsten Hothorn wrote:
> 
> > >
> > > We (Kurt Hornik, Brian Ripley & I) want to propose the following
> > > change to the automatic package updating mechanisms of R: A major
> > > version number change of a package will by default disable the
> > > automatic updating of packages, because the interface of the package
> > > might have changed and hence old code might not run anymore.
> > >
> > > A recent example was the release of mclust version 2.0, which is not
> > > fully compatible with mclust 1.x (functions got removed, others added
> > > and arguments renamed etc).
> > >
> > > Of course it is absolutely OK for a package to change its API,
> > > otherwise improvements would be rather hard, but it should be easier
> > > for users to stay with the old version until they have figured out
> > > what exactly the effects of an upgrade would be.
> > >
> > > We want to define a "major version number change" as a change of the
> > > first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> > > change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> > > from 0.x to 1.x is no major change (because the 0.x series is read as
> > > "working towards 1.0").
> > >
> >
> > This definition requires EVERY package maintainer to be VERY careful
about
> > version numbers / API changes and I guess some of us (including me) may
> > fail this exercise.
> >
> > I suggest the following definition: the API of a package changed
> > iff the example code of the previous version of the package does not run
> > without an error. In contrast, the results of the computations may
> > differ. Of course, this induces additional effort to the CRAN
maintainers
> > but it should be possible to extract and check the examples of a CRAN
> > package against a new version BEFORE uploading the new version to CRAN.
In
> > addition, a flag `APIChange TRUE / FALSE' visible to `update.packages'
is
> > needed.
> >
> > Or should this be part of R CMD check? Maybe R CMD check can download
the
> > `official' release from CRAN to check against an API change and give a
> > warning?
> >
> > best,
> >
> > Torsten
> >
> > > In case of a major change
> > >
> > > *) update.packages() will warn the user if ask=TRUE, like
> > >
> > > mclust :
> > >  Version 1.1-7 in /usr/local/lib/R-contrib
> > >  Version 2.0-1 on CRAN
> > >  WARNING: major version number change
> > > Update (y/N)?
> > >
> > > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> > >  and issue a warning for all packages that have not been updated.
> > >
> > > *) the same will be done for the methods working off packageStatus
> > >  objects.
> > >
> > > Note that we are already working on new package management tools which
> > > should make it easier to have multiple versions of a package installed
> > > simultaneously.
> > >
> > > All comments are welcome.
> > >
> > > Best,
> > > Fritz
> > >
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> > > r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
> > >
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
> > >
> >
> >
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> > r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
> >
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named in this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Mon Oct 28 14:22:23 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Mon, 28 Oct 2002 08:22:23 -0600
Subject: RODBC patchlet
Message-ID: <E186Amd-0003aF-00@sonny.eddelbuettel.com>



> > Much more is needed.  I do plan to do produce an update fairly soon,
> > and as I don't have any current use of this under Unix, I will run it
> > by you if I may.
> 
> Great news!  Thanks for taking this up, Brian.

Seconded. I really appreciate it, Brian. If you need help with Unix testing,
I do have the unixODBC libraries and headers here and would gladly run tests.

Dirk

-- 
According to the latest figures, 43% of all signatures are totally worthless.   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct 28 15:08:46 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 28 Oct 2002 07:08:46 -0800 (PST)
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <15804.65096.834736.160738@celeborn.leisch.at>
Message-ID: <Pine.A41.4.44.0210280705450.104804-100000@homer36.u.washington.edu>

On Mon, 28 Oct 2002 Friedrich.Leisch@ci.tuwien.ac.at wrote:
>
> We want to define a "major version number change" as a change of the
> first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> from 0.x to 1.x is no major change (because the 0.x series is read as
> "working towards 1.0").
>

While R could set whatever standards it likes for package numbers I think
it's asking for trouble to require no API changes before version 1.0 (as
grid illustrates)

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Mon Oct 28 14:41:58 2002
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Mon, 28 Oct 2002 10:41:58 -0400
Subject: RFC: no automatic updates of packages with major version change
References: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
Message-ID: <3DBD4CB6.1DEDEB5@umsanet.edu.bo>



Torsten Hothorn wrote:
.
.
.

> 
> Or should this be part of R CMD check? Maybe R CMD check can download the
> `official' release from CRAN to check against an API change and give a
> warning?

It would be very inconvenient if R CMD check couldn't be run on a
machine without internet conection --- or a very unstable conection, as
I have.

Kjetil Halvorsen

> 
> best,
> 
> Torsten
> 
> > In case of a major change
> >
> > *) update.packages() will warn the user if ask=TRUE, like
> >
> > mclust :
> >  Version 1.1-7 in /usr/local/lib/R-contrib
> >  Version 2.0-1 on CRAN
> >  WARNING: major version number change
> > Update (y/N)?
> >
> > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> >  and issue a warning for all packages that have not been updated.
> >
> > *) the same will be done for the methods working off packageStatus
> >  objects.
> >
> > Note that we are already working on new package management tools which
> > should make it easier to have multiple versions of a package installed
> > simultaneously.
> >
> > All comments are welcome.
> >
> > Best,
> > Fritz
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Oct 28 15:10:13 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 28 Oct 2002 10:10:13 -0500
Subject: RFC: no automatic updates of packages with major version change
References: <Pine.LNX.4.21.0210281107130.7939-100000@artemis> <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats> <pvcqru8mhqodgt4gpks5p7qaksar88nifk@4ax.com>
Message-ID: <3DBD5355.59B59755@bank-banque-canada.ca>

> >Now, we could throw the onus on the maintainers to add a
> >
> >BackwardsCompatible:FALSE
> >
> >flag to the DESCRIPTION file, if people really think that would be easier.

> But instead of "FALSE", I'd rather see the earliest compatible version
> number listed.  For example, if 1.0, 2.0 and 2.1 are all compatible,
> all versions could say
> 
>  BackwardsCompatibleTo:  1.0

I like this better too. To be safe, it is better to assume no backwards
compatibility unless it is indicate. Thus, if the line is omitted in the latter
case, then there is no guarantee, and in the former case the line should be

BackwardsCompatible:TRUE

with the default being FALSE.

Another thing that may be worth distinguishing is whether this means a library
is thought to be backward compatible, or tested to be backward compatible (and
perhaps tested on which versions of R). With respect to Depends: ( R > ?? ) I
admit to being somewhat delinquent in this respect. I change the R version if I
know something has changed, but I rarely test with old versions, and when I do
it is certainly only on one operating system.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a.stephenson@lancaster.ac.uk  Mon Oct 28 15:54:05 2002
From: a.stephenson@lancaster.ac.uk (a.stephenson@lancaster.ac.uk)
Date: Mon, 28 Oct 2002 16:54:05 +0100 (MET)
Subject: as.POSIX (PR#2222)
Message-ID: <200210281554.QAA28705@pubhealth.ku.dk>

Full_Name: Alec Stephenson
Version: 1.6.0
OS: linux
Submission from: (NULL) (148.88.138.5)


Appears to be a sign error in as.POSIX(lt/ct)

> library("chron")

The following is fine, with default origin.

> tmp <- chron(1:2, origin = c(1,1,1970))
> as.POSIXlt(tmp)
[1] "1970-01-02 01:00:00 GMT" "1970-01-03 01:00:00 GMT"

These are not.

> tmp <- chron(1:2, origin = c(1,1,1960))
> tmp
[1] 01/02/60 01/03/60
> as.POSIXlt(tmp)
[1] "1980-01-03 GMT" "1980-01-04 GMT"

> tmp <- chron(1:2, origin = c(1,1,1990))
> tmp
[1] 01/02/90 01/03/90
> as.POSIXlt(tmp)
[1] "1950-01-02 GMT" "1950-01-03 GMT"


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.0              
year     2002             
month    10               
day      01               
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgentry@jimmy.harvard.edu  Mon Oct 28 17:03:31 2002
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Mon, 28 Oct 2002 12:03:31 -0500 (EST)
Subject: no automatic updates of packages with major version change
In-Reply-To: <MABBLJDICACNFOLGIHJOEEEIDAAA.philippe.grosjean@ifremer.fr>
Message-ID: <Pine.SOL.4.20.0210281202090.10205-100000@santiam.dfci.harvard.edu>

> There is still a problem with this versioning system for R packages. When
> somebody wants to keep an old major version to keep compatibility with old
> scripts, and want also to install the brand new major version to start
> exploring it. In this case, there is a conflict because both packages bear
> the same name! The simplest solution would be to change the name of the
> package (for 'PkgName' for version 1.Y.Z to 'PkgName2' for version
> 2.Y.Z,...) allowing two or more major versions to live in the same system,

Another thing you can do for now is to maintain multiple R library
directories.  You would just have to be careful with the .libPaths(), etc.

This doesn't solve the problem of having them simultaneously loaded, but
for installs it will work.

-J

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 28 17:07:05 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Oct 2002 18:07:05 +0100
Subject: as.POSIX (PR#2222)
In-Reply-To: <200210281554.QAA28705@pubhealth.ku.dk>
References: <200210281554.QAA28705@pubhealth.ku.dk>
Message-ID: <x24rb6a3wm.fsf@biostat.ku.dk>

a.stephenson@lancaster.ac.uk writes:

> Full_Name: Alec Stephenson
> Version: 1.6.0
> OS: linux
> Submission from: (NULL) (148.88.138.5)
> 
> 
> Appears to be a sign error in as.POSIX(lt/ct)
> 
> > library("chron")
> 
> The following is fine, with default origin.
> 
> > tmp <- chron(1:2, origin = c(1,1,1970))
> > as.POSIXlt(tmp)
> [1] "1970-01-02 01:00:00 GMT" "1970-01-03 01:00:00 GMT"
> 
> These are not.
> 
> > tmp <- chron(1:2, origin = c(1,1,1960))
> > tmp
> [1] 01/02/60 01/03/60
> > as.POSIXlt(tmp)
> [1] "1980-01-03 GMT" "1980-01-04 GMT"
> 
> > tmp <- chron(1:2, origin = c(1,1,1990))
> > tmp
> [1] 01/02/90 01/03/90
> > as.POSIXlt(tmp)
> [1] "1950-01-02 GMT" "1950-01-03 GMT"

Right. as.POSIXct.dates subtracts where it should add. Fixed
for 1.6.1 (provided it checks out).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@jacksonia.maths.uwa.edu.au  Tue Oct 29 01:22:23 2002
From: berwin@jacksonia.maths.uwa.edu.au (Berwin Turlach)
Date: Tue, 29 Oct 2002 09:22:23 +0800
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
References: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
 <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
Message-ID: <15805.58063.994819.394198@localhost.localdomain>

>>>>> "BDR" ==   <ripley@stats.ox.ac.uk> writes:

    BDR> Now, we could throw the onus on the maintainers to add a

    BDR> BackwardsCompatible:FALSE

    BDR> flag to the DESCRIPTION file, if people really think that
    BDR> would be easier.
I wouldn't not find this easier, perhaps even not feasible. 

One reason is that, e.g., the "tseries" package depends on the
"quadprog" package (S original by me, ported to R by Andreas
Weingessel).  When I finally get around to update that package and
release a new version, I might be able to guarantee that the functions
that I meant to be the API are backwards compatible but short of
analysing the "tseries" code, I could not guarantee that the new
version will not break "tseries".  E.g., it could be that "tseries"
calls the FORTRAN code of "quadprog" directly and doesn't use
"quadprog"s R interface to the FORTRAN code.

Also, every larger package has functions it it that build the API, but
also functions that are helpful for the "main" functions and are not
for direct use by the user.  For example "merge.formula" in the
package "lasso2".  The manual says that is is not intended to be
called directly by the user.  But how should the maintainer now if
everybody follows this request?  Thus, if this function were to change
during a revision in a major way but not the functions that are meant
to build the API, would this mean that the new version is backward
compatible? 

Best wishes,

     Berwin

========================== Full address ============================
Berwin A Turlach                      Tel.: +61 (8) 9380 3338 (secr)   
School of Mathematics and Statistics        +61 (8) 9380 3383 (self)      
The University of Western Australia   FAX : +61 (8) 9380 1028
35 Stirling Highway                   
Crawley WA 6009                e-mail: berwin@maths.uwa.edu.au
Australia                        http://www.maths.uwa.edu.au/~berwin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a.stephenson@lancaster.ac.uk  Tue Oct 29 11:20:11 2002
From: a.stephenson@lancaster.ac.uk (a.stephenson@lancaster.ac.uk)
Date: Tue, 29 Oct 2002 12:20:11 +0100 (MET)
Subject: documentation for require (PR#2226)
Message-ID: <200210291120.MAA04954@pubhealth.ku.dk>

Full_Name: alec stephenson
Version: 1.6.0
OS: linux
Submission from: (NULL) (148.88.138.5)


The documentation for the function require is incorrect.

The file library.Rd has in its arguments section

  \item{quietly}{a logical.  If \code{TRUE}, a warning will not be
      printed if the package cannot be found.}

which is incorrect, as a warning message is always given if the package 
is not found.
Should be something like

  \item{quietly}{a logical.  If \code{TRUE}, a message confirming
      package loading is not printed.}

also, the details section has

  \code{require} is designed for use
  inside other functions; it returns \code{FALSE} and optionally gives a
  warning, rather than giving an error, if the package does not exist.

The sentence after the semi-colon is also appears to be incorrect, as
require calls library with logical.return = TRUE.
Should be something like 

  \code{require} is designed for use
  inside other functions; it returns \code{FALSE} and gives a warning
  if the package does not exist.



> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.0              
year     2002             
month    10               
day      01               
language R 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Tue Oct 29 13:03:39 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Tue, 29 Oct 2002 08:03:39 -0500
Subject: RFC: no automatic updates of packages with major version
 chan	ge
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC820@usrymx10.merck.com>

My understanding is that API needs to be a documented part of the software.
In the current R packaging system, there doesn't seem to be a way to
document interface to compiled code (i.e., what routines can be called and
how to call them) except in the comments, so I'd think calling compiled code
in other packages is not encouraged.  I should think people realize that
undocumented parts of the software are subject to change without notice.
People who make use of such things ought to know they are treading on thin
ice, IMHO.

Just my $0.02...
Andy

-----Original Message-----
From: Berwin Turlach [mailto:berwin@jacksonia.maths.uwa.edu.au]
Sent: Monday, October 28, 2002 8:22 PM
To: r-devel@stat.math.ethz.ch
Subject: Re: RFC: no automatic updates of packages with major version
change


>>>>> "BDR" ==   <ripley@stats.ox.ac.uk> writes:

    BDR> Now, we could throw the onus on the maintainers to add a

    BDR> BackwardsCompatible:FALSE

    BDR> flag to the DESCRIPTION file, if people really think that
    BDR> would be easier.
I wouldn't not find this easier, perhaps even not feasible. 

One reason is that, e.g., the "tseries" package depends on the
"quadprog" package (S original by me, ported to R by Andreas
Weingessel).  When I finally get around to update that package and
release a new version, I might be able to guarantee that the functions
that I meant to be the API are backwards compatible but short of
analysing the "tseries" code, I could not guarantee that the new
version will not break "tseries".  E.g., it could be that "tseries"
calls the FORTRAN code of "quadprog" directly and doesn't use
"quadprog"s R interface to the FORTRAN code.

Also, every larger package has functions it it that build the API, but
also functions that are helpful for the "main" functions and are not
for direct use by the user.  For example "merge.formula" in the
package "lasso2".  The manual says that is is not intended to be
called directly by the user.  But how should the maintainer now if
everybody follows this request?  Thus, if this function were to change
during a revision in a major way but not the functions that are meant
to build the API, would this mean that the new version is backward
compatible? 

Best wishes,

     Berwin

========================== Full address ============================
Berwin A Turlach                      Tel.: +61 (8) 9380 3338 (secr)   
School of Mathematics and Statistics        +61 (8) 9380 3383 (self)      
The University of Western Australia   FAX : +61 (8) 9380 1028
35 Stirling Highway                   
Crawley WA 6009                e-mail: berwin@maths.uwa.edu.au
Australia                        http://www.maths.uwa.edu.au/~berwin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Oct 29 17:34:30 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Tue, 29 Oct 2002 18:34:30 +0100 (MET)
Subject: patch to mva:prcomp to use La.svd instead of svd (PR#2227)
Message-ID: <200210291734.SAA09198@pubhealth.ku.dk>


Per the discussion about the problems with prcomp() when n << p,  which
boils down to a problem with svd() when n << p,
here is a patch to prcomp() which substitutes La.svd() instead of svd().

-Greg

(This is really a feature enhancement, but submitted to R-bugs to make sure
it doesn't get lost. )

*** R-1.6.0/src/library/mva/R/prcomp.R  Mon Aug 13 17:41:50 2001
--- R-1.6.0-GRW//src/library/mva/R/prcomp.R     Tue Oct 29 11:57:23 2002
***************
*** 1,18 ****
  prcomp <- function(x, retx = TRUE, center = TRUE, scale. = FALSE,
!                    tol = NULL) {
      x <- as.matrix(x)
      x <- scale(x, center = center, scale = scale.)
!     s <- svd(x, nu = 0)
      if (!is.null(tol)) {
          rank <- sum(s$d > (s$d[1]*tol))
          if (rank < ncol(x))
!             s$v <- s$v[, 1:rank, drop = FALSE]
      }
      s$d <- s$d / sqrt(max(1, nrow(x) - 1))
!     dimnames(s$v) <-
!         list(colnames(x), paste("PC", seq(len = ncol(s$v)), sep = ""))
!     r <- list(sdev = s$d, rotation = s$v)
!     if (retx) r$x <- x %*% s$v
      class(r) <- "prcomp"
      r
  }
--- 1,21 ----
  prcomp <- function (x, retx = TRUE, center = TRUE, scale. = FALSE,
!                     tol = NULL)
! {
      x <- as.matrix(x)
      x <- scale(x, center = center, scale = scale.)
!     s <- La.svd(x, nu = 0)
      if (!is.null(tol)) {
          rank <- sum(s$d > (s$d[1] * tol))
          if (rank < ncol(x))
!             s$vt <- s$vt[, 1:rank, drop = FALSE]
      }
      s$d <- s$d/sqrt(max(1, nrow(x) - 1))
!
!     dimnames(s$vt) <- list(paste("PC", seq(len = nrow(s$vt)), sep = ""),
!                            colnames(x), )
!     r <- list(sdev = s$d, rotation = t(s$vt) )
!     if (retx)
!         r$x <- x %*% t(s$vt)
      class(r) <- "prcomp"
      r
  }


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 29 17:43:20 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 29 Oct 2002 12:43:20 -0500
Subject: dependency in tests
Message-ID: <3DBEC8B8.C8CC47BE@bank-banque-canada.ca>

I have a package in which the code does not depend on another package,
but tests do. Should the Depends line in the description indicate this
dependency or is requires() in the tests sufficient?

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 29 18:23:12 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 29 Oct 2002 18:23:12 +0000 (GMT)
Subject: dependency in tests
In-Reply-To: <3DBEC8B8.C8CC47BE@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0210291821330.24823-100000@gannet.stats>

On Tue, 29 Oct 2002, Paul Gilbert wrote:

> I have a package in which the code does not depend on another package,
> but tests do. Should the Depends line in the description indicate this
> dependency or is requires() in the tests sufficient?

I find it very helpful to have the Depends line there.  Anyone who wants
to run the tests needs the dependency, and builders of binary packages
meet this very frequently.

I think this is even more cogent for the examples.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 29 19:06:46 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 29 Oct 2002 14:06:46 -0500
Subject: dependency in tests
References: <Pine.LNX.4.31.0210291821330.24823-100000@gannet.stats>
Message-ID: <3DBEDC46.91496922@bank-banque-canada.ca>

ripley@stats.ox.ac.uk wrote:
> 
> On Tue, 29 Oct 2002, Paul Gilbert wrote:
> 
> > I have a package in which the code does not depend on another package,
> > but tests do. Should the Depends line in the description indicate this
> > dependency or is requires() in the tests sufficient?
> 
> I find it very helpful to have the Depends line there.  Anyone who wants
> to run the tests needs the dependency, and builders of binary packages
> meet this very frequently.
> 
> I think this is even more cogent for the examples.

For the examples I have always assumed that one would not indicate
anything in the Depends line, and just put requires() in the example.
There is a trade-off here. I like to put in non-trivial examples (e.g.
using data from other packages), but if doing so means I should indicate
dependencies in addition to what the code needs, then I am reluctant to
add them. Perhaps we need something like

Depends.tests:
Depends.examples:
Depends.vignettes:

which are in addition to anything the code depends on.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgentry@jimmy.harvard.edu  Tue Oct 29 19:50:28 2002
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Tue, 29 Oct 2002 14:50:28 -0500 (EST)
Subject: dependency in tests
In-Reply-To: <3DBEDC46.91496922@bank-banque-canada.ca>
Message-ID: <Pine.SOL.4.20.0210291447540.14712-100000@santiam.dfci.harvard.edu>



On Tue, 29 Oct 2002, Paul Gilbert wrote:
> Depends.tests:
> Depends.examples:
> Depends.vignettes:

In the Bioconductor package 'reposTools' there is a three tiered notion of
dependencies, and I believe similar concepts have been discussed for us in
DESCRIPTION files.

Some discussion on this is included in the 'miscIssues' vignette from
reposTools (section 4), the PDF of which is available at:
http://www.bioconductor.org/repository//vignette/devel/miscIssues.pdf

-Jeff

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From y-yoshida@jp.fujitsu.com  Wed Oct 30 08:24:47 2002
From: y-yoshida@jp.fujitsu.com (y-yoshida@jp.fujitsu.com)
Date: Wed, 30 Oct 2002 09:24:47 +0100 (MET)
Subject: 2002-09-08 1.6.0 build fails in Recommended (PR#1995)
Message-ID: <200210300824.JAA12011@pubhealth.ku.dk>

stvjc@channing.harvard.edu:
 > <<insert bug report here>>
 > 
 > in src/library/Recommended, make yields
 > 
 > make: *** No rule to make target `survival.ts', needed by `all'.  Stop.
 > 
 > this kills the build.  but "make check" succeeds

This error occurs because symbolic link files in src/library/Recommended 
have wrong file extension names such as KernSmooth_tgz, which should be 
KernSmooth.tgz .

So, try the following:
$ cd src/library/Recommended/
$ mv KernSmooth_tgz KernSmooth.tgz
$ mv VR_tgz VR.tgz
(... for each _tgz file)

---
Y Yoshida
Fujitsu Laboratories, Ltd

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct 30 11:21:29 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 30 Oct 2002 12:21:29 +0100
Subject: [R] pretty not pretty
In-Reply-To: <15807.47844.122831.475588@gargle.gargle.HOWL>
References: <15806.43461.675233.576774@gargle.gargle.HOWL>
 <15807.47844.122831.475588@gargle.gargle.HOWL>
Message-ID: <15807.49337.25761.585343@gargle.gargle.HOWL>

{R-help -> R-devel  since this becomes too technical fine tuning}

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch>
>>>>>     on Wed, 30 Oct 2002 11:56:36 +0100 writes:

>>>>> "DavidB" == David Brahm <brahm@alum.mit.edu>
>>>>>     on Tue, 29 Oct 2002 10:31:17 -0500 writes:

    DavidB> Ott Toomet <otoomet@econ.au.dk> wrote:
    >>> Pretty (R 1.5.1) has problems with zero: 
    >>> pretty(smallch) 
    DavidB> [1] -2.00000e-02 -3.469447e-18 2.00000e-02 4.00000e-02 6.00000e-02 
    DavidB> [6] 8.000000e-02 1.000000e-01 1.200000e-01 
    >>> You notice -3.46e-18 instead of 0. Is this feature changed in 1.6.0, 
    >>> or are there any simple ways to get around of it? 

    DavidB> I mentioned this in R-devel on June 14, 2002
    DavidB> ("pretty() sometimes isn't").  It derives from the
    DavidB> roundoff error introduced in seq(-.02, .12,
    DavidB> length=8).  I suggested that the last line of the
    DavidB> code for pretty() should get a zapsmall() around it:


    DavidB> pretty <- function(...) {
    DavidB> ...
    DavidB> zapsmall(seq(z$l, z$u, length = z$n + 1))
    DavidB> }

    DavidB> Since that hasn't been implemented, you could simply
    DavidB> put a zapsmall() around every pretty() in your code.

    MM> It *) now _has_ been implemented. ---> will be in R-beta tomorrow
    MM> and R 1.6.1.
    MM> Whereas for seq() it is clear that you will see these roundoffs,
    MM> they are ``wrong'' for pretty().

    MM> Thank you David, for the reminder.

    MM> *) I've used  zapsmall(seq(z$l, z$u, length = z$n + 1), digits = 7)
    MM> instead in order to make sure that the result will not depend
    MM> on options("digits").

and now found that "digits = 7" is doing too much in rare cases.
As a matter fact, zapsmall() has been a misnomer ever since it
was created for S/S-plus :
    It rounds all values (as its documentation clearly says!), 
    i.e. is not only zapping the small values as its name suggests.

After my current testing, 
I think I want "digits = 14" (+/- 1 may be).
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Oct 30 13:43:31 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 30 Oct 2002 14:43:31 +0100 (MET)
Subject: documentation for require (PR#2226)
Message-ID: <200210301343.OAA17710@pubhealth.ku.dk>

>>>>> "AlecS" == a stephenson <a.stephenson@lancaster.ac.uk>
>>>>>     on Tue, 29 Oct 2002 12:20:11 +0100 (MET) writes:


    AlecS> The documentation for the function require is incorrect.

yes.  Thank you very much for the (two) report(s)!

I'm about to commit the following change      

diff -w -r1.54 library.Rd
64,65c64,65
<   \item{quietly}{a logical.  If \code{TRUE}, a warning will not be
<     printed if the package cannot be found.}
---
>   \item{quietly}{a logical.  If \code{TRUE}, no message confirming
>       package loading is printed.}
83,84c83,84
<   inside other functions; it returns \code{FALSE} and optionally gives a
<   warning, rather than giving an error, if the package does not exist.
---
>   inside other functions; it returns \code{FALSE} and gives a warning
>   (rather than an error as \code{library()}) if the package does not exist.

-----

Thank you again.
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From JensHenrik.Badsberg@agrsci.dk  Wed Oct 30 14:51:37 2002
From: JensHenrik.Badsberg@agrsci.dk (JensHenrik.Badsberg@agrsci.dk)
Date: Wed, 30 Oct 2002 15:51:37 +0100 (MET)
Subject: Building and installing packages with functions with names starting with (PR#2229)
Message-ID: <200210301451.PAA18808@pubhealth.ku.dk>


 Dear Coreteam,

 I am getting closer to have some R-packages with interface to CoCo.
 I use something like package.skeleton("CoCo", list = ls(all.names
 = TRUE)) to also get my functions beginning with "." into the package.
 Functions with names starting with "." are put OK into the package
 during "R CMD build ...",  but when R at "R INSTALL - d ..." collects
 the R-files into the single file for putting into .../R the functions
 with names starting with "." are omitted ?!?

 Regards,

 Jens Henrik



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Wed Oct 30 14:54:28 2002
From: stvjc@channing.harvard.edu (Vincent J. Carey, Jr.)
Date: Wed, 30 Oct 2002 09:54:28 -0500 (EST)
Subject: silent option for library function
Message-ID: <200210301454.JAA13771@capecod.bwh.harvard.edu>

would it be possible to add an option to library that
prevents messages except when there are errors?  as
we build Sweave documents illustrating package functionalities
it is sometimes desirable to attach a package "behind
the scenes".  packages that have messages emitted
in .First.lib (often describing version or developer)
frustrate this particular desire.  verbose=FALSE
does not accomplish this.

note that i have no objection to messages produced by
default use of library.  i just want the ability to
suppress them when there are no errors.  currently
it is possible to do

sink(file="/dev/null")
library([e.g. affy])
sink()

but that may suppress too much -- an error message may be
lost.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 30 16:09:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 30 Oct 2002 16:09:31 +0000 (GMT)
Subject: silent option for library function
In-Reply-To: <200210301454.JAA13771@capecod.bwh.harvard.edu>
Message-ID: <Pine.LNX.4.31.0210301601500.5214-100000@gannet.stats>

On Wed, 30 Oct 2002, Vincent J. Carey, Jr. wrote:

> would it be possible to add an option to library that
> prevents messages except when there are errors?  as
> we build Sweave documents illustrating package functionalities
> it is sometimes desirable to attach a package "behind
> the scenes".  packages that have messages emitted
> in .First.lib (often describing version or developer)
> frustrate this particular desire.  verbose=FALSE
> does not accomplish this.
>
> note that i have no objection to messages produced by
> default use of library.  i just want the ability to
> suppress them when there are no errors.  currently
> it is possible to do
>
> sink(file="/dev/null")
> library([e.g. affy])
> sink()
>
> but that may suppress too much -- an error message may be
> lost.

Don't think so.  From help(sink):

     Normal R output is diverted by the default `type = "output"'. Only
     prompts and warning/error messages continue to appear on the
     terminal. These too can diverted by `type = "message"' (see
     below).

and for example

> sink(file="/dev/null")
> library(foo)
Error in firstlib(which.lib.loc, package) :
        testing
Error in library(foo) : .First.lib failed
> sink()

So how are you losing error messages?


BTW, there is no way for library() to control what a user does in his
.First.lib: he could put up a dialog box agreeing the usage terms.
Actually, that seems a rather good idea ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 30 16:23:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 30 Oct 2002 16:23:13 +0000 (GMT)
Subject: (PR#2229) Building and installing packages with functions with
 names starting with [title ends here!]
In-Reply-To: <200210301451.PAA18808@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210301617250.5214-100000@gannet.stats>

You have omitted the details of your system, but I'll guess Unix.

The names of R functions are nothing to do with the file names.  Don't
use dotnames for files containing R functions: some OSes do really strange
things with them.  Maybe package.skeleton() should remap the names, but
if not you will need to do it yourself.

On Unix R INSTALL does omit dotnames.  On some Windows systems using Samba
they become hidden.  Just avoid them.


On Wed, 30 Oct 2002 JensHenrik.Badsberg@agrsci.dk wrote:

>
>  Dear Coreteam,
>
>  I am getting closer to have some R-packages with interface to CoCo.
>  I use something like package.skeleton("CoCo", list = ls(all.names
>  = TRUE)) to also get my functions beginning with "." into the package.
>  Functions with names starting with "." are put OK into the package
>  during "R CMD build ...",  but when R at "R INSTALL - d ..." collects
>  the R-files into the single file for putting into .../R the functions
>  with names starting with "." are omitted ?!?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Wed Oct 30 16:30:55 2002
From: stvjc@channing.harvard.edu (Vincent Carey 525-2265)
Date: Wed, 30 Oct 2002 11:30:55 -0500 (EST)
Subject: silent option for library function
In-Reply-To: <Pine.LNX.4.31.0210301601500.5214-100000@gannet.stats>
Message-ID: <Pine.GSO.4.40.0210301112360.5730-100000@falmouth.bwh.harvard.edu>

>
> Don't think so.  From help(sink):
>
>      Normal R output is diverted by the default `type = "output"'. Only
>      prompts and warning/error messages continue to appear on the
>      terminal. These too can diverted by `type = "message"' (see
>      below).
>
> and for example
>
> > sink(file="/dev/null")
> > library(foo)
> Error in firstlib(which.lib.loc, package) :
>         testing
> Error in library(foo) : .First.lib failed
> > sink()
>
> So how are you losing error messages?

The point on error messages was speculation.  I am wrong.

>
>
> BTW, there is no way for library() to control what a user does in his
> .First.lib: he could put up a dialog box agreeing the usage terms.
> Actually, that seems a rather good idea ....

Indeed.  However, one could modify library to divert normal R
output if a silent parameter were supplied.

Thus if i edit library to incorporate a parameter silent=FALSE,
and introduce the lines

if (silent) sink("/dev/null")
on.exit( if (silent) sink() )

at the top of the function body, the command

library(mgcv, silent=TRUE)

has the desired silent behavior.  however, ordinary
output is still diverted after the return from library(...)
in this case!  perhaps I misunderstand
the on.exit behavior.  I would expect that it would 'remove'
the sink set in library and restore ordinary processing.

The behavior noted here is for 1.6.1 of 10-19-2002

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Oct 30 16:25:55 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 30 Oct 2002 17:25:55 +0100
Subject: silent option for library function
In-Reply-To: <200210301454.JAA13771@capecod.bwh.harvard.edu>
References: <200210301454.JAA13771@capecod.bwh.harvard.edu>
Message-ID: <15808.2067.738679.499211@mithrandir.hornik.net>

>>>>> Vincent J Carey, writes:

> would it be possible to add an option to library that
> prevents messages except when there are errors?  as
> we build Sweave documents illustrating package functionalities
> it is sometimes desirable to attach a package "behind
> the scenes".  packages that have messages emitted
> in .First.lib (often describing version or developer)
> frustrate this particular desire.  verbose=FALSE
> does not accomplish this.

> note that i have no objection to messages produced by
> default use of library.  i just want the ability to
> suppress them when there are no errors.  currently
> it is possible to do

> sink(file="/dev/null")
> library([e.g. affy])
> sink()

> but that may suppress too much -- an error message may be
> lost.

The QA tools use the following:

.loadPackageQuietly <- function(package, lib.loc) {
    ## Load (reload if already loaded) @code{package} from
    ## @code{lib.loc}, capturing all output and messages.  All QA
    ## functions use this for loading packages because R CMD check
    ## interprets all output as indicating a problem.
    outConn <- textConnection("out", "w")
    sink(outConn, type = "output")
    sink(outConn, type = "message")
    yy <- try({
        pos <- match(paste("package", package, sep = ":"), search())
        if(!is.na(pos))
            detach(pos = pos)
        library(package, lib.loc = lib.loc, character.only = TRUE,
                verbose = FALSE)
    })
    if(inherits(yy, "try-error"))
        stop(yy)
    sink(type = "message")
    sink(type = "output")
    close(outConn)
}

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 30 16:37:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 30 Oct 2002 16:37:31 +0000 (GMT)
Subject: silent option for library function
In-Reply-To: <Pine.GSO.4.40.0210301112360.5730-100000@falmouth.bwh.harvard.edu>
Message-ID: <Pine.LNX.4.31.0210301632330.5214-100000@gannet.stats>

On Wed, 30 Oct 2002, Vincent Carey 525-2265 wrote:

Quoting me, anonymously!

> > BTW, there is no way for library() to control what a user does in his
> > .First.lib: he could put up a dialog box agreeing the usage terms.
> > Actually, that seems a rather good idea ....
>
> Indeed.  However, one could modify library to divert normal R
> output if a silent parameter were supplied.
>
> Thus if i edit library to incorporate a parameter silent=FALSE,
> and introduce the lines
>
> if (silent) sink("/dev/null")
> on.exit( if (silent) sink() )
>
> at the top of the function body, the command
>
> library(mgcv, silent=TRUE)
>
> has the desired silent behavior.  however, ordinary
> output is still diverted after the return from library(...)
> in this case!  perhaps I misunderstand
> the on.exit behavior.  I would expect that it would 'remove'
> the sink set in library and restore ordinary processing.

Try

if(silent) {
  sink("/dev/null")
  on.exit(sink())
}

as silent is not in scope at on.exit, I believe.

I have to say I think this is not a good idea.  People who want to put out
copyright notices at the top of their packages should be allowed to do so,
and we should not make it easy to suppress them.

(BTW none of mine do on R, although they do on S-PLUS at Insightful's
insistence.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Oct 30 16:31:22 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 30 Oct 2002 17:31:22 +0100
Subject: Building and installing packages with functions with names starting with (PR#2229)
In-Reply-To: <200210301451.PAA18808@pubhealth.ku.dk>
References: <200210301451.PAA18808@pubhealth.ku.dk>
Message-ID: <15808.2394.967294.483386@mithrandir.hornik.net>

>>>>> JensHenrik Badsberg writes:

>  Dear Coreteam,

>  I am getting closer to have some R-packages with interface to CoCo.
>  I use something like package.skeleton("CoCo", list = ls(all.names
>  = TRUE)) to also get my functions beginning with "." into the package.
>  Functions with names starting with "." are put OK into the package
>  during "R CMD build ...",  but when R at "R INSTALL - d ..." collects
>  the R-files into the single file for putting into .../R the functions
>  with names starting with "." are omitted ?!?

R CMD INSTALL behaves according to what is documented in R-exts:

	   The `R' subdirectory contains R code files.  The code files
	to be installed must start with a (lower or upper case) letter
	and have one of the extensions `.R', `.S', `.q', `.r', or `.s'.

So I believe the code in package.skeleton() which has

    cat("Saving functions and data\n")
    for (item in list) {
        if (is.function(get(item))) 
            dump(item, file = file.path(path, name, "R", paste(item, 
                "R", sep = ".")))
        else save(list = item, file = file.path(path, name, "data", 
            paste(item, "rda", sep = ".")))
    }

Also, I personally do not believe that non-functions in the environment
that is dumped out should by default be made into data sets.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Wed Oct 30 16:56:28 2002
From: stvjc@channing.harvard.edu (Vincent Carey 525-2265)
Date: Wed, 30 Oct 2002 11:56:28 -0500 (EST)
Subject: silent option for library function
In-Reply-To: <Pine.LNX.4.31.0210301632330.5214-100000@gannet.stats>
Message-ID: <Pine.GSO.4.40.0210301141560.5730-100000@falmouth.bwh.harvard.edu>


On Wed, 30 Oct 2002 ripley@stats.ox.ac.uk wrote:

> On Wed, 30 Oct 2002, Vincent Carey 525-2265 wrote:
>
> Quoting me, anonymously!
>

not intentional.  i apologize.

>
> Try
>
> if(silent) {
>   sink("/dev/null")
>   on.exit(sink())
> }
>
> as silent is not in scope at on.exit, I believe.

That doesn't seem to work either.  I'll also note that
the whole sink diversion that I mentioned initially
doesn't solve the problem of library-related messages under
Sweave echo=FALSE.  But that is a matter to be addressed
under separate cover.

>
> I have to say I think this is not a good idea.  People who want to put out
> copyright notices at the top of their packages should be allowed to do so,
> and we should not make it easy to suppress them.
>

Fair enough, but still perhaps debatable.  The contributor
has various opportunities to make copyright information
explicit (documentation, modeling output...), but the user
should be able to control the textual
throughput of any given R session to a very high degree.  Since
a private workaround is available, I withdraw the request.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ehlers@math.ucalgary.ca  Wed Oct 30 18:36:01 2002
From: ehlers@math.ucalgary.ca (ehlers@math.ucalgary.ca)
Date: Wed, 30 Oct 2002 19:36:01 +0100 (MET)
Subject: typo in p.adjust (PR#2231)
Message-ID: <200210301836.TAA20243@pubhealth.ku.dk>

Full_Name: Peter Ehlers
Version: 1.6.0
OS: Windows 2000 Pro
Submission from: (NULL) (136.159.61.178)


In:

p.adjust                package:base                R Documentation

In the paragraph:

Hochberg's and Hommel's methods are valid when the hypothesis tests 
are independent or when they are non-negatively associated (Sarkar, 
1998; Sarker and Chang, 1997).  Hommel's method is more powerful 
than Hochberg's, but the difference is usually small and the 
Hochberg p-values are faster to compute.

Change: Sarker
To:     Sarkar


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Wed Oct 30 19:27:56 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 30 Oct 2002 11:27:56 -0800
Subject: native OS X R
Message-ID: <B16CD746-EC3D-11D6-A502-000393860F3C@stat.ucla.edu>

I have a version of R-devel which is configured with the flags

configure  
--with-tcl-config=/Library/Frameworks/Tcl.framework/tclConfig.sh  
--with-tk-config=/Library/Frameworks/Tk.framework
/tkConfig.sh --enable-R-shlib --with-aqua --without-x  
TCLTK_LIBS="-framework Tcl -framework Tk"   
TCLTK_CPPFLAGS="-I/Library/Framewor
ks/Tcl.framework/Headers -I/Library/Frameworks/Tk.framework/Headers"

This means no X11, the Quartz device, the Aqua interface, and the  
native AquaTk version
of Tcl/Tk. Drawing to windows works fine (both to the Quartz device and  
the Tk
windows), but there are still some serious problems.

1. The Aqua interface does not work (R --gui=aqua) -- it does not show  
up. I am
not sure if it is supposed to. So we work from the terminal.

2. The windows do not handle events properly. Clicking on the Quartz  
device
gives

RCNE SendEventToEventTarget (mous Up                  ) failed, -9874

Running the tkcanvas demo is more satisfactory. Points can be colored
and dragged, and the line adjusts fine, but the window never becomes
the front window and the terminal bitterly complains

SetFrontProcess failed,-606

at each mouse event.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 30 21:06:37 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Oct 2002 22:06:37 +0100
Subject: native OS X R
In-Reply-To: <B16CD746-EC3D-11D6-A502-000393860F3C@stat.ucla.edu>
References: <B16CD746-EC3D-11D6-A502-000393860F3C@stat.ucla.edu>
Message-ID: <x2vg3jbpr6.fsf@biostat.ku.dk>

Jan de Leeuw <deleeuw@stat.ucla.edu> writes:

> This means no X11, the Quartz device, the Aqua interface, and the
> native AquaTk version
> of Tcl/Tk. Drawing to windows works fine (both to the Quartz device
> and  the Tk
> windows), but there are still some serious problems.
[Details omitted]

I think Stefano has some changes planned, but haven't had time to work
on them just now. We decided to schedule 1.6.1 without those to get
rid of the memory leak in 1.6.0 quickly. It's quite likely that we'll
have a 1.6.2 mainly for Mac updates.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Wed Oct 30 21:51:06 2002
From: jago@mclink.it (Stefano Iacus)
Date: Wed, 30 Oct 2002 22:51:06 +0100
Subject: native OS X R
In-Reply-To: <B16CD746-EC3D-11D6-A502-000393860F3C@stat.ucla.edu>
Message-ID: <B1579901-EC51-11D6-B34C-003065CC4CB8@mclink.it>

Well, I cannot run the Aqua myself anymore using Jaguar. I'll attack  
the problem from the "roots" using Duncan's REventLoop package. I'm  
working on that but I'll not be able to finish before 1.6.1 is out.

Stefano

On Wednesday, October 30, 2002, at 08:27 PM, Jan de Leeuw wrote:

> I have a version of R-devel which is configured with the flags
>
> configure  
> --with-tcl-config=/Library/Frameworks/Tcl.framework/tclConfig.sh  
> --with-tk-config=/Library/Frameworks/Tk.framework
> /tkConfig.sh --enable-R-shlib --with-aqua --without-x  
> TCLTK_LIBS="-framework Tcl -framework Tk"   
> TCLTK_CPPFLAGS="-I/Library/Framewor
> ks/Tcl.framework/Headers -I/Library/Frameworks/Tk.framework/Headers"
>
> This means no X11, the Quartz device, the Aqua interface, and the  
> native AquaTk version
> of Tcl/Tk. Drawing to windows works fine (both to the Quartz device  
> and the Tk
> windows), but there are still some serious problems.
>
> 1. The Aqua interface does not work (R --gui=aqua) -- it does not show  
> up. I am
> not sure if it is supposed to. So we work from the terminal.
>
> 2. The windows do not handle events properly. Clicking on the Quartz  
> device
> gives
>
> RCNE SendEventToEventTarget (mous Up                  ) failed, -9874
>
> Running the tkcanvas demo is more satisfactory. Points can be colored
> and dragged, and the line adjusts fine, but the window never becomes
> the front window and the terminal bitterly complains
>
> SetFrontProcess failed,-606
>
> at each mouse event.
>
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical  
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email:  
> deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>   
> ----------------------------------------------------------------------- 
> --------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>   
> ----------------------------------------------------------------------- 
> --------------------------
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aukema@entomology.wisc.edu  Wed Oct 30 23:23:57 2002
From: aukema@entomology.wisc.edu (aukema@entomology.wisc.edu)
Date: Thu, 31 Oct 2002 00:23:57 +0100 (MET)
Subject: gam bug with poisson family? (PR#2234)
Message-ID: <200210302323.AAA21286@pubhealth.ku.dk>

Full_Name: Brian Aukema
Version: 1.6
OS: Windows XP Professional
Submission from: (NULL) (144.92.164.204)


platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    6.0            
year     2002           
month    10             
day      01             
language R 

Hello, I am relatively new to R (~6 months) so I hate to bother you if this is
not a bug.  I tried a GAM with a poisson family link, and I'm getting an error
message that I do not understand.  Many apologies if this is user inexperience.
Thanks, BHA.

> library(mgcv)
This is mgcv 0.8.1
> lcgam <- gam(lc ~ s(Day), family=poisson, data=lcset)
Warning messages: 
1: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
2: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
3: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
4: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
5: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
6: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
7: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
8: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
9: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
10: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 31 00:25:18 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 2002 01:25:18 +0100
Subject: gam bug with poisson family? (PR#2234)
In-Reply-To: <200210302323.AAA21286@pubhealth.ku.dk>
References: <200210302323.AAA21286@pubhealth.ku.dk>
Message-ID: <x2n0ovbgk1.fsf@biostat.ku.dk>

aukema@entomology.wisc.edu writes:

> Hello, I am relatively new to R (~6 months) so I hate to bother you if this is
> not a bug.  

Please use r-help rather than r-bugs then...

> I tried a GAM with a poisson family link, and I'm getting an error
> message that I do not understand.  Many apologies if this is user inexperience.
> Thanks, BHA.
> 
> > library(mgcv)
> This is mgcv 0.8.1
> > lcgam <- gam(lc ~ s(Day), family=poisson, data=lcset)
> Warning messages: 
> 1: `Machine' is deprecated.
> Use `.Machine' instead.
> See ?Deprecated. 

It's just a warning that gam is using old coding style that is about
to become defunct (specifically gam.fit is using Machine()$double.eps
where the preferred form is .Machine$double.eps). It's harmless but
mgcv 0.8-6 has removed the problem.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Oct 31 09:54:32 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 31 Oct 2002 10:54:32 +0100
Subject: [R] Symbols for male/female
In-Reply-To: <Pine.WNT.4.44.0210310755280.700-100000@GYG-63G37>
References: <Pine.WNT.4.44.0210310755280.700-100000@GYG-63G37>
Message-ID: <15808.64984.194254.194060@gargle.gargle.HOWL>

(diverted to R-devel; I'll send a shorter reply to R-help)

>>>>> "Lorenz" == Lorenz Gygax <gygax@ifi.unizh.ch>
>>>>>     on 31 Oct 2002 08:10:25 +0100 writes:

    Lorenz> Dear all,

    Lorenz> I would like to use the biological symbols for male
    Lorenz> and female as plotting symbols in a scatterplot
    Lorenz> (ideally filled and non-filled). R does not seem to
    Lorenz> have these symbols using pch= in plot() nor are they
    Lorenz> implemented via expression() or at least I did not
    Lorenz> find them. I found that the symbols are
    Lorenz> e.g. available in the wasysym and the marvosym
    Lorenz> package in LaTeX.

    Lorenz> I have coded two very rough functions that are able
    Lorenz> to approximate those symbols, but not surprisingly,
    Lorenz> they are not very efficient regarding the file size
    Lorenz> they produce (I have included the code for the
    Lorenz> female symbol at the end of the mail).

    Lorenz> Is there a more or less straightforward way to
    Lorenz> implement these symbols so that they can be accessed
    Lorenz> either by pch= or expression()? Can you give me some
    Lorenz> pointers on how I would need to go about this?

It's rather "less" than "more" straightforward ;-) : 

In src/main/graphics.c, you look for the function GSymbol().
There, you see how each (pch = <integer>) symbol is done.
In principle, you just would add new case statements;
pch = 26 and pch =27  would be the next free ones ...

Probably you need to poke around a bit in the C source of R in
order to learn how to do this.
In this case, the source is the documentation.


There have been wishes and dreams about using something like
  pch = <<pointer to (jpg|pdf|eps|png|...) file>>
which of course would be much more general and useful, but
needs much more work of course!
Maybe rather something that would only be done in the new
graphics system which the grid package provides ?
    
Greetings up the hill (in Zrich)!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

    Lorenz> Thanks and regards, Lorenz
    Lorenz> -- 
    Lorenz> Lorenz Gygax, Dr. sc. nat.
    Lorenz> Artificial Intelligence Lab, Department of Information Technology
    Lorenz> University of Zurich-Irchel, +41-1-635 67 17,  gygax@ifi.unizh.ch


    Lorenz> one.female <- function (X, diam= 1, prop= 1, lw= 1) {
    Lorenz> ## X a vector giving the position of the symbol c (x, y)
    Lorenz> ## diam: diameter in the entities on the Y axis
    Lorenz> ## prop: proportion of x to y axis (so that symbols will be round
    Lorenz> ## lw: adjustment of line width for large symbols

    Lorenz> x.ring <- cos (seq (0, 2*pi, len= 500)) * prop * diam/2
    Lorenz> y.ring <- sin (seq (0, 2*pi, len= 500)) * diam/2
    Lorenz> lines (x.ring + X[1], y.ring + X[2], lwd= lw)
    Lorenz> segments (c (0, -diam/4) + X[1],
    Lorenz> c (-diam/2, -3*diam/4) + X[2],
    Lorenz> c (0,  diam/4) + X[1],
    Lorenz> c ( -diam , -3*diam/4) + X[2], lwd= lw)
    Lorenz> }

    Lorenz> and to plot several iteams at a time

    Lorenz> female <- function (x, y, d= 1, p= 1, l= 1) {
    Lorenz> ## x, y vectors of x and y coordinates
    Lorenz> ## d: diameter
    Lorenz> ## p: proportion of symbol
    Lorenz> ## l: line width

    Lorenz> xy <- cbind (x, y)
    Lorenz> apply (xy, 1, FUN= one.female, diam= d, prop= p, lw= l)
    Lorenz> }
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Oct 31 11:00:38 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 31 Oct 2002 12:00:38 +0100 (MET)
Subject: typo in p.adjust (PR#2231)
Message-ID: <200210311100.MAA25984@pubhealth.ku.dk>

>>>>> "ehlers" == ehlers  <ehlers@math.ucalgary.ca>
>>>>>     on Wed, 30 Oct 2002 19:36:01 +0100 (MET) writes:

    ehlers> Full_Name: Peter Ehlers
    ehlers> Version: 1.6.0

    ehlers> In:

    ehlers> p.adjust                package:base                R Documentation

    ....

    ehlers> Change: Sarker
    ehlers> To:     Sarkar

Done.
Thank you.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From grimm.heinz@rcc.ch  Thu Oct 31 15:42:36 2002
From: grimm.heinz@rcc.ch (grimm.heinz@rcc.ch)
Date: Thu, 31 Oct 2002 16:42:36 +0100 (MET)
Subject: header containing (PR#2003)
Message-ID: <200210311542.QAA00373@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------0E780EA27B8B71828A93900D
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Ok, I try to explain the problem better:

getHome() uses now "GetModuleFileName()" to determine
the R home-directory. "GetModuleFileName()" doesn't check
the R_HOME environment setting, instead it returns the
path of the .EXE, that started R, which is usually located in
$R_HOME/bin. If R is invoked via Java, "GetModuleFileName()"
returns $JDK_HOME/jre/bin instead of $R_HOME/bin and
the function "getRHome()" returns $JDK_HOME/jre...

My suggestion is just to rely on $R_HOME, instead of
using "GetModuleFileName()", because all "xxx calls R"
packages will have similar problems. I added in my sample
fix the check for $RHOME, since SJava does the same,
may be this is historical, just ignore it...

Heinz Grimm


--------------0E780EA27B8B71828A93900D
Content-Type: text/x-vcard; charset=us-ascii;
 name="grimm.heinz.vcf"
Content-Transfer-Encoding: 7bit
Content-Description: Card for Heinz Grimm
Content-Disposition: attachment;
 filename="grimm.heinz.vcf"

begin:vcard 
n:Grimm;Heinz
tel;fax:+41 61 9715 072
tel;work:+41 61 9751 109
x-mozilla-html:FALSE
url:www.rcc.ch
org:RCC Ltd.;IT
version:2.1
email;internet:grimm.heinz@rcc.ch
title:Dipl.Ing.(FH)
adr;quoted-printable:;;Zelgliweg 1=0D=0A;Itingen;BL;CH-4452;Switzerland
fn:Heinz Grimm
end:vcard

--------------0E780EA27B8B71828A93900D--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Oct 31 09:38:35 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Thu, 31 Oct 2002 10:38:35 +0100
Subject: silent option for library function
In-Reply-To: <Pine.GSO.4.40.0210301141560.5730-100000@falmouth.bwh.harvard.edu>
References: <Pine.LNX.4.31.0210301632330.5214-100000@gannet.stats>
 <Pine.GSO.4.40.0210301141560.5730-100000@falmouth.bwh.harvard.edu>
Message-ID: <15808.64027.325849.231315@celeborn.leisch.at>

>>>>> On Wed, 30 Oct 2002 11:56:28 -0500 (EST),
>>>>> Vincent Carey 525-2265 (VC5) wrote:

  > On Wed, 30 Oct 2002 ripley@stats.ox.ac.uk wrote:

  >> On Wed, 30 Oct 2002, Vincent Carey 525-2265 wrote:
  >> 
  >> Quoting me, anonymously!
  >> 

  > not intentional.  i apologize.

  >> 
  >> Try
  >> 
  >> if(silent) {
  >> sink("/dev/null")
  >> on.exit(sink())
  >> }
  >> 
  >> as silent is not in scope at on.exit, I believe.

  > That doesn't seem to work either.  I'll also note that
  > the whole sink diversion that I mentioned initially
  > doesn't solve the problem of library-related messages under
  > Sweave echo=FALSE.  But that is a matter to be addressed
  > under separate cover.

shouldn't results=hide do what you want for Sweave files?

.f

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From medrecord2001@yahoo.com  Thu Oct 31 19:28:58 2002
From: medrecord2001@yahoo.com (medrecord2001@yahoo.com)
Date: Thu, 31 Oct 2002 20:28:58 +0100 (MET)
Subject: Quick Question (PR#2239)
Message-ID: <200210311928.UAA01513@pubhealth.ku.dk>


How can I get detailing about your Product line ... ?

Dr. Wong

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ehlers@math.ucalgary.ca  Thu Oct 31 20:00:19 2002
From: ehlers@math.ucalgary.ca (ehlers@math.ucalgary.ca)
Date: Thu, 31 Oct 2002 21:00:19 +0100 (MET)
Subject: typo in documentation for boxplot.stats (PR#2240)
Message-ID: <200210312000.VAA01612@pubhealth.ku.dk>

Full_Name: Peter Ehlers
Version: 1.6.0
OS: Win 2000 Pro
Submission from: (NULL) (136.159.61.178)


In:
boxplot.stats              package:base              R Documentation

under:
Details:
     The two ``hinges'' are versions of the first first and third

Change: first first
To: first


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Tue Oct  1 13:04:40 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Tue, 01 Oct 2002 08:04:40 -0400
Subject: uploading binary packages (was RE: [R] Update packages)
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC721@usrymx10.merck.com>

[I guess R-devel is more appropriate for this question:]

Will CRAN maintainers accept binary packages (in addition to source) from
the package maintainers?  As an example, I develop and test randomForest on
both Linux and WinNT, so I can always make the binary.  This could make life
a bit easier for BDR and DM.  Are there any potential problems?

Regards,
Andy

> -----Original Message-----
> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: Tuesday, October 01, 2002 5:49 AM
> To: Bernardo Rangel Tura
> Cc: cran@R-project.org; R-help@stat.math.ethz.ch
> Subject: Re: [R] Update packages
> 
> 
> >>>>> "Bernardo" == Bernardo Rangel Tura <tura@centroin.com.br>
> >>>>>     on Tue, 01 Oct 2002 06:19:37 -0300 writes:
> 
>     Bernardo> I have been having problems with
>     Bernardo> the update of my R.  Some packages (ipred,
>     Bernardo> randomForest, gregmisc, Hmisc and Design) that it
>     Bernardo> has new versions are not available in CRAN through
>     Bernardo> the command: update.packages ().  Will it be that
>     Bernardo> my product has a defect?  I use R in win98SE with
>     Bernardo> 128 Mb de RAM and AMD 1.2Ghz
> 
> Hmisc and Design have been announced by Frank Harrell as not yet
> to be available on CRAN because they don't pass "R CMD check" (without
> many warnings).
> The other 3 packages are on CRAN.  Note however, that for Windows,
> new *binary* versions must be made available (by Prof. Brian Ripley or
> Duncan Murdoch mainly I think) and there, the newest packages
> are dated Sept.1 (look manually for the needed zip files in
>  http://cran.R-project.org/bin/windows/contrib/ ).
> I'm not entirely sure how the CRAN maintainers populate that
> directory, though.
> 
> Regards,
> Martin Maechler <maechler@stat.math.ethz.ch>	
http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Oct  1 13:18:15 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Tue, 1 Oct 2002 14:18:15 +0200
Subject: uploading binary packages (was RE: [R] Update packages)
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC721@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81906FFC721@usrymx10.merck.com>
Message-ID: <15769.37511.658500.737453@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 01 Oct 2002 08:04:40 -0400,
>>>>> Liaw, Andy (LA) wrote:

  > [I guess R-devel is more appropriate for this question:]
  > Will CRAN maintainers accept binary packages (in addition to source) from
  > the package maintainers?  As an example, I develop and test randomForest on
  > both Linux and WinNT, so I can always make the binary.  This could make life
  > a bit easier for BDR and DM.  Are there any potential problems?

Yes, especially on Windows there is the danger of viruses. We (=the
CRAN master admins) cannot check for viruses because we have almost no
windows machines. And even if we had, we could not make any guarantees.

So the current policy is to have one or two maintainers for each
binary distribution of R and let them handle the rest. This ensures
that each binary distribution has been compiled using identical tools
and binaries are exchanged only in one direction (which makes it
harder for viruses to spread).

Allowing for binary uploads opens a can of worms I'd rather not like
to open. Of course I'm no windows user, so have no strong preferences
with respect to binaries for that particular platform.

Best,
Fritz





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Oct  1 14:30:06 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 1 Oct 2002 09:30:06 -0400
Subject: submitting binary windows packages
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149D00A@groexmb02.pfizer.com>


Hi All,

The windows binary packages in
http://cran.r-project.org/bin/windows/contrib/ are out of date for my
packages, and perhaps for others as well.  I've now received several email
messages commenting on this fact.   

Since I now have a Windows 2K machine with the proper build environment, I
can create the windows binary packages myself.  What is the proper mechanism
for getting a windows binary package placed there?   

This topic is not documented in the R Windows FAQ or anywhere else I can
find.   Kurt has indicated that the windows area is mirrored from one of
Brian's machines, but my query to Brian has not been answered yet.  (Perhaps
he is taking a well-deserved break).  Does someone else know the proper
procedure?   

If there is not already, can we arrange to set up an automated build
procedure so that a Windows binary package is created automatically when the
source package is uploaded?  Or some alternative?

Greg



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct  1 17:50:28 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 01 Oct 2002 12:50:28 -0400
Subject: R CMD check dependency simplification
Message-ID: <3D99D254.B65491C8@bank-banque-canada.ca>

I am trying to re-organizing my Makefile for testing my R packages and I
am having trouble finding a structure I like. The problem seems to be
that "R CMD check", which does wonderful things, does not allow
dependency information to flow through very gracefully. That is, since
everything is copied into the pkg.Rcheck directory, it is difficult to
make any changes to source files without having to completely re-do "R
CMD check pkg". 

For example, I would like to be able to make changes to
src/pkg1/man/foo.Rd and have dependencies that indicate only codoc and
examples need to be re-run, not tests and vignettes. (R CMD check can to
do this, the problem is moving the appropriate new pieces, in the
appropriate way, into the pkg1.Rcheck directory.)

The difficulty is exacerbated for me because I have pkg3 depends on pkg2
depends on pkg1. If I make a change to src/pkg1/inst/doc/guide.tex then
I really should only need to re-do the vignettes for pkg1, but instead I
have to re-do the whole "R CMD check" for pkg1, pkg2, and pkg3.

Suggestions would be appreciated.

Thanks,
Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kevin.wright@pioneer.com  Tue Oct  1 18:29:25 2002
From: kevin.wright@pioneer.com (Wright, Kevin)
Date: Tue, 1 Oct 2002 12:29:25 -0500
Subject: install.packages warning
Message-ID: <C71CB7425639D311A7A40008C7286AB006A55048@carina.phibred.com>


I typically install packages from a local site:

> install.packages("x:/tpm/tpm.zip",CRAN=NULL)
updating HTML package descriptions
Warning message: 
argument `lib' is missing: using C:/PROGRA~1/R/RW1051/library in:
install.packages("x:/tpm/tpm.zip", CRAN = NULL) 

The warning doesn't bother me, but I've had to help other people who see
"warning" and decide to panic.  

May I suggest changing "Warning message" to something less scary, for
example "Note:".

Best,

Kevin Wright  (apologies for the company signature)



This communication is for use by the intended recipient and contains 
information that may be privileged, confidential or copyrighted under
applicable law.  If you are not the intended recipient, you are hereby
formally notified that any use, copying or distribution of this e-mail,
in whole or in part, is strictly prohibited.  Please notify the sender
by return e-mail and delete this e-mail from your system.  Unless
explicitly and conspicuously designated as "E-Contract Intended",
this e-mail does not constitute a contract offer, a contract amendment,
or an acceptance of a contract offer.  This e-mail does not constitute
a consent to the use of sender's contact information for direct marketing
purposes or for transfers of data to third parties.

 Francais Deutsch Italiano  Espanol  Portuges  Japanese  Chinese  Korean

            http://www.DuPont.com/corp/email_disclaimer.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Oct  1 19:12:28 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Tue, 1 Oct 2002 14:12:28 -0400 (EDT)
Subject: install.packages warning
In-Reply-To: <C71CB7425639D311A7A40008C7286AB006A55048@carina.phibred.com>
Message-ID: <Pine.LNX.4.44.0210011409070.19662-100000@bolker.zoo.ufl.edu>


  Hear, hear; I've often had to reassure people about this warning.  (The
reason the scary "Warning message" words appear is because
install.packages() uses the warning() function.)  Is the warning really
necessary?

On Tue, 1 Oct 2002, Wright, Kevin wrote:

> 
> I typically install packages from a local site:
> 
> > install.packages("x:/tpm/tpm.zip",CRAN=NULL)
> updating HTML package descriptions
> Warning message: 
> argument `lib' is missing: using C:/PROGRA~1/R/RW1051/library in:
> install.packages("x:/tpm/tpm.zip", CRAN = NULL) 
> 
> The warning doesn't bother me, but I've had to help other people who see
> "warning" and decide to panic.  
> 
> May I suggest changing "Warning message" to something less scary, for
> example "Note:".
> 
> Best,
> 
> Kevin Wright  (apologies for the company signature)
> 
> 
> 
> This communication is for use by the intended recipient and contains 
> information that may be privileged, confidential or copyrighted under
> applicable law.  If you are not the intended recipient, you are hereby
> formally notified that any use, copying or distribution of this e-mail,
> in whole or in part, is strictly prohibited.  Please notify the sender
> by return e-mail and delete this e-mail from your system.  Unless
> explicitly and conspicuously designated as "E-Contract Intended",
> this e-mail does not constitute a contract offer, a contract amendment,
> or an acceptance of a contract offer.  This e-mail does not constitute
> a consent to the use of sender's contact information for direct marketing
> purposes or for transfers of data to third parties.
> 
>  Francais Deutsch Italiano  Espanol  Portuges  Japanese  Chinese  Korean
> 
>             http://www.DuPont.com/corp/email_disclaimer.html
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ko-Kang@xtra.co.nz  Tue Oct  1 19:22:24 2002
From: Ko-Kang@xtra.co.nz (Ko-Kang Kevin Wang)
Date: Wed, 2 Oct 2002 06:22:24 +1200
Subject: submitting binary windows packages
References: <D7A3CFD7825BD6119B880002A58F06C20149D00A@groexmb02.pfizer.com>
Message-ID: <002101c26977$7e387890$c93158db@kwan022>

----- Original Message -----
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
To: <R-devel@stat.math.ethz.ch>
Sent: Wednesday, October 02, 2002 1:30 AM
Subject: submitting binary windows packages


>
> Hi All,
>
> The windows binary packages in
> http://cran.r-project.org/bin/windows/contrib/ are out of date for my
> packages, and perhaps for others as well.  I've now received several email
> messages commenting on this fact.
>
> Since I now have a Windows 2K machine with the proper build environment, I
> can create the windows binary packages myself.  What is the proper
mechanism
> for getting a windows binary package placed there?
>
> This topic is not documented in the R Windows FAQ or anywhere else I can
> find.   Kurt has indicated that the windows area is mirrored from one of
> Brian's machines, but my query to Brian has not been answered yet.
(Perhaps
> he is taking a well-deserved break).  Does someone else know the proper
> procedure?
>

It is right at the bottom of CRAN main page, cran.r-project.org.

Quote:
To "submit" to CRAN, simply upload to ftp://cran.r-project.org/incoming and
send email to cran@r-project.org. Please indicate the copyright situation
(GPL, ...) in your submission. Note that we generally do not accept
submissions of precompiled binaries due to security reasons (we have no
means to check for viruses etc. for the big variety of platforms that R runs
on). All binary distribution listed above are compiled by selected
maintainers, who are in charge for all binaries of their platform,
respectively.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kevin.wright@pioneer.com  Tue Oct  1 19:36:47 2002
From: kevin.wright@pioneer.com (Wright, Kevin)
Date: Tue, 1 Oct 2002 13:36:47 -0500
Subject: Possible inconsistency with mean & var
Message-ID: <C71CB7425639D311A7A40008C7286AB006A55049@carina.phibred.com>


I encountered an unexpected difference in the way that mean and var work:

> mean(numeric(0))
[1] NaN

> var(numeric(0))
Error in var(numeric(0)) : `x' is empty

Looking into this, I discovered in mean.default that sum(x)/n
evaluates as
> sum(numeric(0))/length(numeric(0))
[1] NaN

The function var calls an .Internal and seems to evaluate this:
> .Internal(cov(numeric(0),NULL,"all.obs"))
Error: `x' is empty


Best,


Kevin Wright, Research Scientist
Pioneer Hi-Bred Int'l, x4054.




This communication is for use by the intended recipient and contains 
information that may be privileged, confidential or copyrighted under
applicable law.  If you are not the intended recipient, you are hereby
formally notified that any use, copying or distribution of this e-mail,
in whole or in part, is strictly prohibited.  Please notify the sender
by return e-mail and delete this e-mail from your system.  Unless
explicitly and conspicuously designated as "E-Contract Intended",
this e-mail does not constitute a contract offer, a contract amendment,
or an acceptance of a contract offer.  This e-mail does not constitute
a consent to the use of sender's contact information for direct marketing
purposes or for transfers of data to third parties.

 Francais Deutsch Italiano  Espanol  Portuges  Japanese  Chinese  Korean

            http://www.DuPont.com/corp/email_disclaimer.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Oct  1 20:34:26 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 1 Oct 2002 21:34:26 +0200 (CEST)
Subject: X11 font at size 22 could not be loaded
Message-ID: <Pine.LNX.4.44.0210012123460.1159-100000@kleigh.nl>


I'm not sure this is a bug in R.

Since a few weeks I have a new PC, SuSE 8.0 installed. When
running demo(graphics) I get after a few graphs:

    Error in title(main = "January Pie Sales", cex.main = 1.8, font.main = 1) :
            X11 font at size 22 could not be loaded

And the demo stops.

This is in R 1.6.0. I get the same in R 1.5.1 on HP-UX, but
using my PC as the X-server.

So, it could be there is something wrong with the set-up of my
machine. SuSE 8.0 is pretty much up-to-date, but I can't
guarantee I didn't something stupid during installation. I will
try to find out what could be wrong with my fonts.

However, so far I haven't noticed any font problems with other
programs. If R can't load the font it wants, shouldn't it
continue with the next best thing, instead of stopping with an
error message?

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  1 21:21:48 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Oct 2002 22:21:48 +0200
Subject: X11 font at size 22 could not be loaded
In-Reply-To: <Pine.LNX.4.44.0210012123460.1159-100000@kleigh.nl>
References: <Pine.LNX.4.44.0210012123460.1159-100000@kleigh.nl>
Message-ID: <x2smzpzz8j.fsf@biostat.ku.dk>

Peter Kleiweg <kleiweg@let.rug.nl> writes:

> I'm not sure this is a bug in R.
> 
> Since a few weeks I have a new PC, SuSE 8.0 installed. When
> running demo(graphics) I get after a few graphs:
> 
>     Error in title(main = "January Pie Sales", cex.main = 1.8, font.main = 1) :
>             X11 font at size 22 could not be loaded
> 
> And the demo stops.
> 
> This is in R 1.6.0. I get the same in R 1.5.1 on HP-UX, but
> using my PC as the X-server.
> 
> So, it could be there is something wrong with the set-up of my
> machine. SuSE 8.0 is pretty much up-to-date, but I can't
> guarantee I didn't something stupid during installation. I will
> try to find out what could be wrong with my fonts.
> 
> However, so far I haven't noticed any font problems with other
> programs. If R can't load the font it wants, shouldn't it
> continue with the next best thing, instead of stopping with an
> error message?

Hmm, yes...

I've seen this on a SuSE install at our place too. The direct cause
seems to be that the SuSE font server doesn't allow scaled versions of
the standard Adobe fonts. However, the logic in the X11 driver should
cause it to substitute a 20pt font in that case, but apparently it
doesn't. A temporary workaround might be to add scaled versions of the
PS fonts in /etc/X11/fs/config.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Oct  1 21:58:08 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 1 Oct 2002 22:58:08 +0200 (CEST)
Subject: X11 font at size 22 could not be loaded
In-Reply-To: <x2smzpzz8j.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0210012234040.1159-100000@kleigh.nl>

Peter Dalgaard BSA scribeva...

> Peter Kleiweg <kleiweg@let.rug.nl> writes:
>
> > I'm not sure this is a bug in R.
> >
> > Since a few weeks I have a new PC, SuSE 8.0 installed. When
> > running demo(graphics) I get after a few graphs:
> >
> >     Error in title(main = "January Pie Sales", cex.main = 1.8, font.main = 1) :
> >             X11 font at size 22 could not be loaded

[...]

> I've seen this on a SuSE install at our place too. The direct cause
> seems to be that the SuSE font server doesn't allow scaled versions of
> the standard Adobe fonts. However, the logic in the X11 driver should
> cause it to substitute a 20pt font in that case, but apparently it
> doesn't. A temporary workaround might be to add scaled versions of the
> PS fonts in /etc/X11/fs/config.

The weird thing is, in some cases, you do get another font size.
Sometimes I get a warning, not an error:

Warning message:
X11 used font size 8 when 6 was requested

-- 
Peter Kleiweg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  1 23:03:39 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 2002 00:03:39 +0200
Subject: X11 font at size 22 could not be loaded
In-Reply-To: <Pine.LNX.4.44.0210012234040.1159-100000@kleigh.nl>
References: <Pine.LNX.4.44.0210012234040.1159-100000@kleigh.nl>
Message-ID: <x2ofadzuis.fsf@biostat.ku.dk>

Peter Kleiweg <kleiweg@let.rug.nl> writes:

> > I've seen this on a SuSE install at our place too. The direct cause
> > seems to be that the SuSE font server doesn't allow scaled versions of
> > the standard Adobe fonts. However, the logic in the X11 driver should
> > cause it to substitute a 20pt font in that case, but apparently it
> > doesn't. A temporary workaround might be to add scaled versions of the
> > PS fonts in /etc/X11/fs/config.
> 
> The weird thing is, in some cases, you do get another font size.
> Sometimes I get a warning, not an error:
> 
> Warning message:
> X11 used font size 8 when 6 was requested

That's not weird, that's what should happen.... The logic (at least
the intended one!) in the driver would be to give you "used font size
20 when 22 was requested" if there are no scalable fonts.

Oho! I think I see it: If you're using only nonscalable fonts, you are
assumed to have all the Adobe design sizes,

8, 10, 11, 12, 14, 17, 18, 20, 24, 25, 34

but some of these (11, 17, 20, 25, 34) are only available if you also
install 100dpi fonts. With only the 75dpi fonts, all you get is 8, 10,
12, 14, 18, 24. The logic in the driver doesn't catch this cas
properly, which it probably should.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Oct  1 23:45:26 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Wed, 2 Oct 2002 00:45:26 +0200 (MET DST)
Subject: Unsolved symbols: meet_ Tcl_EvalObjv (PR#2090)
Message-ID: <200210012245.AAA26861@pubhealth.ku.dk>


Running 'make check' I get two errors:

running code in 'mva-Ex.R' .../usr/lib/dld.sl: Unresolved symbol: meet_ (code)  from /users1/kleiweg/R-1.6.0-source/library/cluster/libs/cluster.sl

running code in 'tcltk-Ex.R' .../usr/lib/dld.sl: Unresolved symbol: Tcl_EvalObjv (code)  from /users1/kleiweg/R-1.6.0-source/library/tcltk/libs/tcltk.sl


Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20
 status =
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Oct  1 23:55:03 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Wed, 2 Oct 2002 00:55:03 +0200 (MET DST)
Subject: Scripts not executable (PR#2091)
Message-ID: <200210012255.AAA26878@pubhealth.ku.dk>



Running 'make' stops when it tries to build the recommended
(included) packages, because the script 'Rcmd' is not
executable. I have to do a 'chmod +x src/scripts/*' and rerun
'make'.

In version 1.5.1 I also noticed the installed scripts were not
executable, but I could do a 'chmod +x lib/R/bin/*' after 'make
install'. But now the scripts are already needed during 'make'.

This error does not occur on Linux-PC and Linux-Alpha.


Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20
 status =
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct  2 00:25:52 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 2002 01:25:52 +0200
Subject: Unsolved symbols: meet_ Tcl_EvalObjv (PR#2090)
In-Reply-To: <200210012245.AAA26861@pubhealth.ku.dk>
References: <200210012245.AAA26861@pubhealth.ku.dk>
Message-ID: <x2k7l1zqpr.fsf@biostat.ku.dk>

kleiweg@let.rug.nl writes:

> Running 'make check' I get two errors:
> 
> running code in 'mva-Ex.R' .../usr/lib/dld.sl: Unresolved symbol: meet_ (code)  from /users1/kleiweg/R-1.6.0-source/library/cluster/libs/cluster.sl

Wouldn't know about that one.
 
> running code in 'tcltk-Ex.R' .../usr/lib/dld.sl: Unresolved symbol: Tcl_EvalObjv (code)  from /users1/kleiweg/R-1.6.0-source/library/tcltk/libs/tcltk.sl

Which version of Tcl? That function has been around at least since
8.1, so I'm guessing 8.0. It's only being used by RTcl_ReadConsole
&friends so you might try taking that whole section of tcltk.c out by
replacing the

#ifndef Win32

with 

#if !defined(Win32) & !defined(Tcl80) 

or, less ceremoniously, 

#if 0

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Oct  2 07:24:28 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 2 Oct 2002 08:24:28 +0200
Subject: Scripts not executable (PR#2091)
In-Reply-To: <200210012255.AAA26878@pubhealth.ku.dk>
References: <200210012255.AAA26878@pubhealth.ku.dk>
Message-ID: <15770.37148.514799.185521@mithrandir.hornik.net>

>>>>> kleiweg  writes:

> Running 'make' stops when it tries to build the recommended
> (included) packages, because the script 'Rcmd' is not
> executable. I have to do a 'chmod +x src/scripts/*' and rerun
> 'make'.

> In version 1.5.1 I also noticed the installed scripts were not
> executable, but I could do a 'chmod +x lib/R/bin/*' after 'make
> install'. But now the scripts are already needed during 'make'.

> This error does not occur on Linux-PC and Linux-Alpha.

The scripts are installed using INSTALL_SCRIPT, which according to my
understanding should install as mode 755.

After running configure, my top-level Makeconf contains

INSTALL = /usr/bin/install -c
INSTALL_DATA = ${INSTALL} -m 644
INSTALL_PROGRAM = ${INSTALL}
INSTALL_SCRIPT = ${INSTALL}
INSTALL_DIR = ${INSTALL} -d

What does yours look like?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed Oct  2 11:19:40 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 2 Oct 2002 12:19:40 +0200 (CEST)
Subject: Scripts not executable (PR#2091)
In-Reply-To: <15770.37148.514799.185521@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.44.0210021211180.1162-100000@kleigh.nl>

Kurt Hornik scribeva...

> >>>>> kleiweg  writes:
>
> > Running 'make' stops when it tries to build the recommended
> > (included) packages, because the script 'Rcmd' is not
> > executable. I have to do a 'chmod +x src/scripts/*' and rerun
> > 'make'.
>
> > In version 1.5.1 I also noticed the installed scripts were not
> > executable, but I could do a 'chmod +x lib/R/bin/*' after 'make
> > install'. But now the scripts are already needed during 'make'.
>
> > This error does not occur on Linux-PC and Linux-Alpha.
>
> The scripts are installed using INSTALL_SCRIPT, which according to my
> understanding should install as mode 755.
>
> After running configure, my top-level Makeconf contains
>
> INSTALL = /usr/bin/install -c
> INSTALL_DATA = ${INSTALL} -m 644
> INSTALL_PROGRAM = ${INSTALL}
> INSTALL_SCRIPT = ${INSTALL}
> INSTALL_DIR = ${INSTALL} -d
>
> What does yours look like?

INSTALL = /opt/imake/bin/install -c
INSTALL_DATA = ${INSTALL} -m 644
INSTALL_PROGRAM = ${INSTALL}
INSTALL_SCRIPT = ${INSTALL}
INSTALL_DIR = ${INSTALL} -d

According to the manpage of install, the options -m and -d are
not supported.

-- 
Peter Kleiweg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kevin.Wright@pioneer.com  Wed Oct  2 15:19:29 2002
From: Kevin.Wright@pioneer.com (Kevin.Wright@pioneer.com)
Date: Wed, 2 Oct 2002 16:19:29 +0200 (MET DST)
Subject: Mean and var inconsistency (PR#2094)
Message-ID: <200210021419.QAA05768@pubhealth.ku.dk>

Full_Name: Kevin Wright
Version: 1.5.1
OS: Windows 95
Submission from: (NULL) (170.54.59.160)


Originally posted to r-devel, but after thinking about it more decided that this
is a bug.  I encountered an unexpected difference in the way that mean and var
work: 

> mean(numeric(0)) 
[1] NaN 

> var(numeric(0)) 
Error in var(numeric(0)) : `x' is empty 

Looking into this, I discovered in mean.default that sum(x)/n 
evaluates as 
> sum(numeric(0))/length(numeric(0)) 
[1] NaN 

The function var seems to evaluate this: 
> .Internal(cov(numeric(0),NULL,"all.obs")) 
Error: `x' is empty 

One possible fix would be to modify var to check that the length of x is greater
than 0, otherwise return NaN/NA.  

Just for your information (not necessarily the desirable answer), in S-Plus
2000:
> mean(numeric(0))
NA
> var(numeric(0))
NA



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rss@rss.phtd.tpu.edu.ru  Fri Oct  4 04:57:23 2002
From: rss@rss.phtd.tpu.edu.ru (rss@rss.phtd.tpu.edu.ru)
Date: Fri, 4 Oct 2002 05:57:23 +0200 (MET DST)
Subject: Problem with construction (1-x)^(1-y) (PR#2103)
Message-ID: <200210040357.FAA19946@pubhealth.ku.dk>

Hello!

I have any problem with construction (1-x)^(1-y) if y<1

> x=5
> y=.5
> (1-x)^(1-y)
[1] NaN
> (1-y)
[1] 0.5
> (1-x)^0.5
[1] NaN
> (1-x)
[1] -4
> -4^.5
[1] -2

Roma V. Kalaida
E-mail rss@rss.phtd.tpu.edu.ru

<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Oct  4 07:20:21 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 4 Oct 2002 08:20:21 +0200 (MET DST)
Subject: Problem with construction (1-x)^(1-y) (PR#2103)
Message-ID: <200210040620.IAA20326@pubhealth.ku.dk>

rss@rss.phtd.tpu.edu.ru wrote:
> 
> Hello!
> 
> I have any problem with construction (1-x)^(1-y) if y<1
> 
> > x=5
> > y=.5
> > (1-x)^(1-y)
> [1] NaN

Well, that's not a bug! Also for y>=1 (hopefully!):
 (1-x)^1.1 # NaN

You are calculating with real numbers and expecting complex ones! So
just try:
 as.complex(1-x)^(1-y)

Uwe Ligges

> > (1-y)
> [1] 0.5
> > (1-x)^0.5
> [1] NaN
> > (1-x)
> [1] -4
> > -4^.5
> [1] -2
> 
> Roma V. Kalaida
> E-mail rss@rss.phtd.tpu.edu.ru

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mmcstephen@cogstate.com  Fri Oct  4 07:31:11 2002
From: mmcstephen@cogstate.com (mmcstephen@cogstate.com)
Date: Fri, 4 Oct 2002 08:31:11 +0200 (MET DST)
Subject: parse (PR#2104)
Message-ID: <200210040631.IAA20406@pubhealth.ku.dk>

Full_Name: Michael McStephen
Version: 1.5.1
OS: w2000
Submission from: (NULL) (202.138.192.38)


> R.version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R              
> 
> # The following line produces an error:
> tmp.name<-"tmp"
> parse(text=paste(tmp.name, ".lg, ",  sep="") )
Error in parse(file, n, text, prompt) : parse error
> 
>  
> # This line doesn't:
> parse(text=paste(tmp.name, ".lg ",  sep="") )
expression(tmp.lg)
> 
>  
> # The only difference is the ',' after lg in the second line.
>  
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Oct  4 09:32:25 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 4 Oct 2002 10:32:25 +0200
Subject: Scripts not executable (PR#2091)
In-Reply-To: <Pine.LNX.4.44.0210021211180.1162-100000@kleigh.nl>
References: <15770.37148.514799.185521@mithrandir.hornik.net>
 <Pine.LNX.4.44.0210021211180.1162-100000@kleigh.nl>
Message-ID: <15773.21017.805579.131688@mithrandir.hornik.net>

>>>>> Peter Kleiweg writes:

> Kurt Hornik scribeva...
>> >>>>> kleiweg  writes:
>> 
>> > Running 'make' stops when it tries to build the recommended
>> > (included) packages, because the script 'Rcmd' is not
>> > executable. I have to do a 'chmod +x src/scripts/*' and rerun
>> > 'make'.
>> 
>> > In version 1.5.1 I also noticed the installed scripts were not
>> > executable, but I could do a 'chmod +x lib/R/bin/*' after 'make
>> > install'. But now the scripts are already needed during 'make'.
>> 
>> > This error does not occur on Linux-PC and Linux-Alpha.
>> 
>> The scripts are installed using INSTALL_SCRIPT, which according to my
>> understanding should install as mode 755.
>> 
>> After running configure, my top-level Makeconf contains
>> 
>> INSTALL = /usr/bin/install -c
>> INSTALL_DATA = ${INSTALL} -m 644
>> INSTALL_PROGRAM = ${INSTALL}
>> INSTALL_SCRIPT = ${INSTALL}
>> INSTALL_DIR = ${INSTALL} -d
>> 
>> What does yours look like?

> INSTALL = /opt/imake/bin/install -c
> INSTALL_DATA = ${INSTALL} -m 644
> INSTALL_PROGRAM = ${INSTALL}
> INSTALL_SCRIPT = ${INSTALL}
> INSTALL_DIR = ${INSTALL} -d

> According to the manpage of install, the options -m and -d are
> not supported.

Wonderful.  An install from the X consortium, documented as 'compatible
with the BSD install script, but [was] written from scratch' ...

On the HPUX system that I have access to this works without problems,
though.  The man page does not document '-m' but the code (shell script)
shows that this works.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Oct  4 12:00:55 2002
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Fri, 4 Oct 2002 13:00:55 +0200 (MET DST)
Subject: Problem with construction (1-x)^(1-y) (PR#2103)
Message-ID: <200210041100.NAA24710@pubhealth.ku.dk>

On Fri, 4 Oct 2002 05:57:23 +0200 (MET DST), you wrote:

>> (1-x)^0.5
>[1] NaN
>> (1-x)
>[1] -4
>> -4^.5
>[1] -2

As Uwe mentioned, you can't take square roots of negative real
numbers, you need to force them to complex first.

The reason it worked in the last example is that exponentiation has
higher precedence than unary negation, so "-4^.5" is evaluated as
"-(4^.5)".

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Oct  4 12:10:16 2002
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Fri, 4 Oct 2002 13:10:16 +0200 (MET DST)
Subject: parse (PR#2104)
Message-ID: <200210041110.NAA24846@pubhealth.ku.dk>

On Fri, 4 Oct 2002 08:31:11 +0200 (MET DST), you wrote:

>> # The following line produces an error:
>> tmp.name<-"tmp"
>> parse(text=paste(tmp.name, ".lg, ",  sep="") )
>Error in parse(file, n, text, prompt) : parse error

I'm not sure what you'd expect here.  If you just enter the result of
the paste at the command line, you should see 

> tmp.lg,
Error: syntax error

Commas aren't allowed to end expressions.  (Array indexing and
function calls have argument lists ending with a comma, but argument
lists aren't expressions.)

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Fri Oct  4 19:36:38 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Fri, 04 Oct 2002 14:36:38 -0400
Subject: items in Rd file
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC763@usrymx10.merck.com>

Dear R-devel,

I'm encountering a strange problem in a Rd file that I'm working on.  In the
"Value" section, I have something like:

=====================
\value{
  An object of class \code{randomForest}, which is a list with the
  following components:
  \item{call}{the original call to \code{randomForest}}
  ...

  For classification problem, the following are also included:

  \item{err.rate}{final error rate of the prediction on the input data.}
  ...

  For regression problem, the following are included:
  \item{mse}{mean square error: sum of squared residuals divided by
    \code{n}.}
  ...

  If test set is given (through the \code{xtest} or additionally
  \code{ytest} arguments), then there is also a \code{test} component,
  which is a list with the following components:
  
  \item{predicted}{predicted classes/values for the test set.}
  ...

  Note:  The \code{forest} structure is slightly different between
  classification and regression.
===============

In the resulting help page, the passages between \item{}'s all disappeared!
Is there any way to make it work?

Thanks a lot for any tips!

Andy
Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY84-16            Rahway, NJ 07065
mailto:andy_liaw@merck.com



------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Fri Oct  4 19:45:18 2002
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Fri, 04 Oct 2002 20:45:18 +0200
Subject: items in Rd file
References: <51F9C42DA15CD311BD220008C707D81906FFC763@usrymx10.merck.com>
Message-ID: <3D9DE1BE.82D11C53@ci.tuwien.ac.at>

"Liaw, Andy" wrote:
> 
> Dear R-devel,
> 
> I'm encountering a strange problem in a Rd file that I'm working on.  In the
> "Value" section, I have something like:
> 
> =====================
> \value{
>   An object of class \code{randomForest}, which is a list with the
>   following components:
>   \item{call}{the original call to \code{randomForest}}
>   ...
> 
>   For classification problem, the following are also included:
> 
>   \item{err.rate}{final error rate of the prediction on the input data.}
>   ...
> 
>   For regression problem, the following are included:
>   \item{mse}{mean square error: sum of squared residuals divided by
>     \code{n}.}
>   ...
> 
>   If test set is given (through the \code{xtest} or additionally
>   \code{ytest} arguments), then there is also a \code{test} component,
>   which is a list with the following components:
> 
>   \item{predicted}{predicted classes/values for the test set.}
>   ...
> 
>   Note:  The \code{forest} structure is slightly different between
>   classification and regression.
> ===============
> 
> In the resulting help page, the passages between \item{}'s all disappeared!
> Is there any way to make it work?

I think you need an 
  {\itemize \items... }
or a
   \describe{ \items.. }

Hope that helps
Z

> Thanks a lot for any tips!
> 
> Andy
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY84-16            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> ------------------------------------------------------------------------------
> Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.
> 
> ==============================================================================
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Oct  5 17:22:47 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 5 Oct 2002 09:22:47 -0700
Subject: R-1.6.0 for Darwin
Message-ID: <AF6ADB36-D87E-11D6-9339-000393860F3C@stat.ucla.edu>

I don't think it is necessary to put binary versions of the Darwin/X11
version on CRAN any more. The current sources compile without
problems on both Mac OS X 10.1 and 10.2, using either gcc/g77 2.95.2 or
gcc/g77 3.1, or f2c. It seems to me that
if you are using R from the command line, using X11, that you are
sophisticated enough to install the tools below. And, if you want
to install and upgrade R packages, you need these tools anyway.

Here is what you need. I will assume you use Jaguar (10.2), support for
10.1 will vanish rapidly. Also, do use gcc 3.1, it gives better and  
faster code
on Darwin (it's the default compiler anyway).

1. The Apple Developer Tools. Become an on-line member of the Apple
Developer Connection (for free) and then get the latest version of
the Developer Tools.

http://www.apple.com/developer

This gives you, in the Darwin layer, the gcc toolset,
and in the Aqua layer it gives you the ProjectBuilder toolset (which you
do not need for the Darwin/X11 version of R).

2. You have to install X11. A good introduction to this is

http://fink.sourceforge.net/doc/x11/index.php

You can install xfree86 using fink (see below), you can also install it  
using the
installer from

http://www.mrcla.com/XonX/

Instead of using the XDarwin interface that comes with this  
distribution, you
can (and probably should) use OroborusX, which provides and interface to
the rootless X server and a very Aqua-like window manager.

http://oroborosx.sourceforge.net/

3. You need the 10.2 version of fink, for readline, dlcompat, g77,  
ncurses, libpcre, libz,
libbz2, f2c if needed, tcltk, xfree86 if needed, atlas if needed, gnome  
if needed. Some of this
stuff (ncurses, tcl, libz) now also sits in /usr/lib, but the R  
configure scripts
will choose the fink version.

See http://fink.sourceforge.net
	in particular http://fink.sourceforge.net/news/jaguar.php

All the CRAN packages compile as well (although you may need
other pieces of fink such as MySQL or netcdf to get them going),
with the exception of Matrix and subselect, but a fix for those is
on its way.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From roxburg@kih.net  Sat Oct  5 21:27:49 2002
From: roxburg@kih.net (roxburg@kih.net)
Date: Sat, 5 Oct 2002 22:27:49 +0200 (MET DST)
Subject: Welch versus Satterthwaith (PR#2111)
Message-ID: <200210052027.WAA01389@pubhealth.ku.dk>

This is not a bug report but didn't see another way to ask a question.

For the approximate t-test assuming unequal variances, the R docs cite
Welch's method for the df of the approximating distribution.
I have several methods books, and they all uses Satterthwaite's method.
Why does R use Welch's method where can I learn about Welch's method?

Sincerely,
David Allen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Sun Oct  6 08:47:47 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Sun, 6 Oct 2002 09:47:47 +0200
Subject: R CMD check dependency simplification
In-Reply-To: <3D99D254.B65491C8@bank-banque-canada.ca>
References: <3D99D254.B65491C8@bank-banque-canada.ca>
Message-ID: <15775.60067.258424.221743@celeborn.leisch.at>

>>>>> On Tue, 01 Oct 2002 12:50:28 -0400,
>>>>> Paul Gilbert (PG) wrote:

  > I am trying to re-organizing my Makefile for testing my R packages and I
  > am having trouble finding a structure I like. The problem seems to be
  > that "R CMD check", which does wonderful things, does not allow
  > dependency information to flow through very gracefully. That is, since
  > everything is copied into the pkg.Rcheck directory, it is difficult to
  > make any changes to source files without having to completely re-do "R
  > CMD check pkg". 

  > For example, I would like to be able to make changes to
  > src/pkg1/man/foo.Rd and have dependencies that indicate only codoc and
  > examples need to be re-run, not tests and vignettes. (R CMD check can to
  > do this, the problem is moving the appropriate new pieces, in the
  > appropriate way, into the pkg1.Rcheck directory.)

I absolutely agree that this would be nice to have, but we don't have
any tools for that yet (and I don't think it is all that simple to get
it right).

If there is a clear dependency structure like you describe, i.e., pkg3
depends on pkg2 which depends on pkg1 one here is what I currently do:

check pkg1, when it passes INSTALL it into a development library and
add that to your R_LIBS variable. Then check pkg2 and do the
same. Then check pkg3.

  > The difficulty is exacerbated for me because I have pkg3 depends on pkg2
  > depends on pkg1. If I make a change to src/pkg1/inst/doc/guide.tex then
  > I really should only need to re-do the vignettes for pkg1, but instead I
  > have to re-do the whole "R CMD check" for pkg1, pkg2, and pkg3.

Why would you run R CMD check on pkg2 if you only change the vignette
of pkg1?

Best,
Fritz



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sun Oct  6 17:19:27 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Sun, 6 Oct 2002 09:19:27 -0700 (PDT)
Subject: Welch versus Satterthwaith (PR#2111)
In-Reply-To: <200210052027.WAA01389@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210060913490.12090-100000@homer25.u.washington.edu>

On Sat, 5 Oct 2002 roxburg@kih.net wrote:

> This is not a bug report but didn't see another way to ask a question.

Well, you could try the r-help or r-devel mailing lists

> For the approximate t-test assuming unequal variances, the R docs cite
> Welch's method for the df of the approximating distribution.
> I have several methods books, and they all uses Satterthwaite's method.
> Why does R use Welch's method where can I learn about Welch's method?
>

It's the same method.

The t-statistic is the difference in means divided by a more-or-less
unbiased estimate of its standard deviation. There's only one natural way
to do this and in sufficiently large samples that's all you need.

The more difficult part is the sampling distribution, which is
approximated by a t-distribution with degrees of freedom from some
complicated formula involving the two sample sizes and variances.  It was
indepedently derived by Welch and Satterthwaite.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sun Oct  6 20:21:11 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sun, 6 Oct 2002 12:21:11 -0700
Subject: R-1.6.0
Message-ID: <C5BF2F9B-D960-11D6-AD1D-000393860F3C@stat.ucla.edu>

I have build R-1.6.0 on Jaguar (actually on 10.2.2), using gcc 3.1
from Apple, g77 3.1 from fink, ATLAS from fink. It passes all
checks OK.

I also re-compiled the 233 packages listed below
with the same setup. I have NOT tested all these
packages in any detail. A tar.gz file with the whole /usr/local/lib/R
will be on ftp://gifi.stat.ucla.edu on Tuesday. It will NOT include
anything from fink (i.e. /sw) or Xfree86 (/usr/X11R6).

The problem with tkrplot is that the load command in tcl does not
seem to work (while it did work under 10.1). The problem with
ROracle, RSQLite, RQuantlib is that they need libraries which
I do not have. In Omegahat Perl from R and Python from R work,
the other way around I don't know. RXLisp does not compile any
more.

what builds

-- Everything from CRAN, including RMySQL, RmSQL, XML,
       rpvm, rsprng, RMpi, but not ROracle, RSQLite, RQuantlib
-- Lindsay packages rmutil, gnlm, stable, growthm repeated, event,  
ordinal
-- Bioconductor packages Biobase, annotate, affy, AnnBuilder, edd,  
genefilter,
	geneplotter, rhdf5, marrayTest, marrayClasses, marrayInput,  
marrayPlots,
	multtest, ROC, tkWidgets
-- snow from Tierney
-- deal from gR
-- from Devel Dopt, GRASS, PHYLOGR, R2HTML, RPgSQL, dseplus, pls,  
runstat,
	multidim, mclust, ensemble, locfit, write-snns
-- from OmegaHat gtk, OOP, RGtk, RGtkViewers, RObjectTables, RSPerl,  
RSPython

what does NOT load

tkrplot
 > library(tkrplot)
Loading required package: tcltk
dyld: /usr/local/lib/R/bin/R.bin malformed library:
	/usr/local/lib/R/library/tkrplot/libs/tkrplot.so
		(not a Mach-O library file, bad filetype value)
Trace/BPT trap
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmacq@ucscalumni.com  Sun Oct  6 23:01:45 2002
From: dmacq@ucscalumni.com (Don MacQueen)
Date: Sun, 6 Oct 2002 15:01:45 -0700
Subject: [R-SIG-Mac]R-1.6.0
In-Reply-To: <C5BF2F9B-D960-11D6-AD1D-000393860F3C@stat.ucla.edu>
References: <C5BF2F9B-D960-11D6-AD1D-000393860F3C@stat.ucla.edu>
Message-ID: <p05111701b9c6628a46d0@[192.168.1.100]>

At 12:21 PM -0700 10/6/02, Jan de Leeuw wrote:
>I have build R-1.6.0 on Jaguar (actually on 10.2.2), using gcc 3.1
>from Apple, g77 3.1 from fink, ATLAS from fink. It passes all
>checks OK.
>
>I also re-compiled the 233 packages listed below
>with the same setup. I have NOT tested all these
>packages in any detail. A tar.gz file with the whole /usr/local/lib/R
>will be on ftp://gifi.stat.ucla.edu on Tuesday. It will NOT include
>anything from fink (i.e. /sw) or Xfree86 (/usr/X11R6).
>
>The problem with tkrplot is that the load command in tcl does not
>seem to work (while it did work under 10.1). The problem with
>ROracle, RSQLite, RQuantlib is that they need libraries which
>I do not have.

For ROracle, what library would that be?
As we have an Oracle site license at work, maybe I can get the 
library and give it a try.

-Don

<- snip ->

>===
>Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
>Editor: Journal of Multivariate Analysis, Journal of Statistical  Software
>US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
>phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
>homepage: http://gifi.stat.ucla.edu
> 
>------------------------------------------------------------------------ 
>-------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
> 
>------------------------------------------------------------------------ 
>-------------------------       
>
>_______________________________________________
>R-SIG-Mac mailing list
>R-SIG-Mac@stat.math.ethz.ch
>http://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac


-- 
-------------------------
Don MacQueen
dmacq@ucscalumni.com
California, USA
-------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sun Oct  6 23:31:27 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sun, 6 Oct 2002 15:31:27 -0700
Subject: [R-SIG-Mac]R-1.6.0
In-Reply-To: <p05111701b9c6628a46d0@[192.168.1.100]>
Message-ID: <5AB48C88-D97B-11D6-BACB-000393860F3C@stat.ucla.edu>

Well. it needs ORACLE_HOME, and then installs some module
in Oracle, as far as I can see. I don't have an ORACLE_HOME.

--- Jan

On Sunday, October 6, 2002, at 03:01 PM, Don MacQueen wrote:

> At 12:21 PM -0700 10/6/02, Jan de Leeuw wrote:
>> I have build R-1.6.0 on Jaguar (actually on 10.2.2), using gcc 3.1
>> from Apple, g77 3.1 from fink, ATLAS from fink. It passes all
>> checks OK.
>>
>> I also re-compiled the 233 packages listed below
>> with the same setup. I have NOT tested all these
>> packages in any detail. A tar.gz file with the whole /usr/local/lib/R
>> will be on ftp://gifi.stat.ucla.edu on Tuesday. It will NOT include
>> anything from fink (i.e. /sw) or Xfree86 (/usr/X11R6).
>>
>> The problem with tkrplot is that the load command in tcl does not
>> seem to work (while it did work under 10.1). The problem with
>> ROracle, RSQLite, RQuantlib is that they need libraries which
>> I do not have.
>
> For ROracle, what library would that be?
> As we have an Oracle site license at work, maybe I can get the library  
> and give it a try.
>
> -Don
>
> <- snip ->
>
>> ===
>> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
>> Editor: Journal of Multivariate Analysis, Journal of Statistical   
>> Software
>> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
>> phone (310)-825-9550;  fax (310)-206-5658;  email:  
>> deleeuw@stat.ucla.edu
>> homepage: http://gifi.stat.ucla.edu
>> ---------------------------------------------------------------------- 
>> -- -------------------------
>>           No matter where you go, there you are. --- Buckaroo Banzai
>>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>> ---------------------------------------------------------------------- 
>> -- -------------------------
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac@stat.math.ethz.ch
>> http://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac
>
>
> -- 
> -------------------------
> Don MacQueen
> dmacq@ucscalumni.com
> California, USA
> -------------------------
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.c.rougier@durham.ac.uk  Mon Oct  7 18:53:17 2002
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Mon, 7 Oct 2002 19:53:17 +0200 (MET DST)
Subject: Core dump with "parse" (PR#2120)
Message-ID: <200210071753.TAA15549@pubhealth.ku.dk>

Hi everyone,

The following code may not be very sensible, but it generates a core dump.  The same happens in R-1.5.1.

Cheers, Jonathan.

arrow:dma0jcr% R-1.6.0

R : Copyright 2002, The R Development Core Team
Version 1.6.0  (2002-10-01)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> parse(text=deparse(body(plot)))
expression({
    if (is.null(attr(x, "class")) && is.function(x)) {
        if ("ylab" 0names(list(...))) 
            plot.function(x, ...)
        else plot.function(x, ylab = paste(deparse(substitute(x)), 
            "(x)"), ...)
    }
    else UseMethod("plot")
})
Segmentation fault (core dumped)



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cord1@gmx.de  Mon Oct  7 18:56:59 2002
From: cord1@gmx.de (cord1@gmx.de)
Date: Mon, 7 Oct 2002 19:56:59 +0200 (MET DST)
Subject: plot crashes (PR#2121)
Message-ID: <200210071756.TAA15563@pubhealth.ku.dk>

Full_Name: cord eggers
Version: R1.6.0
OS: Windows 2000
Submission from: (NULL) (217.80.133.46)


Whenever i give the plot() command, the programm crashes with

"Unknown software exception" (0xc0000090) 
at address 0x77e7f142

Do You know something about this? 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Mon Oct  7 19:27:24 2002
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Mon, 7 Oct 2002 20:27:24 +0200 (MET DST)
Subject: plot crashes (PR#2121)
Message-ID: <200210071827.UAA15684@pubhealth.ku.dk>

On Mon, 7 Oct 2002 19:56:59 +0200 (MET DST), you wrote in message
<200210071756.TAA15563@pubhealth.ku.dk>:

>Full_Name: cord eggers
>Version: R1.6.0
>OS: Windows 2000
>Submission from: (NULL) (217.80.133.46)
>
>
>Whenever i give the plot() command, the programm crashes with
>
>"Unknown software exception" (0xc0000090) 
>at address 0x77e7f142
>
>Do You know something about this? 

It doesn't happen to me.  Could you try running rgui with the
--vanilla option, and then give an exact sequence of commands that
lead to the crash?

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rpeng@stat.ucla.edu  Mon Oct  7 21:19:22 2002
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Mon, 7 Oct 2002 13:19:22 -0700 (PDT)
Subject: Core dump with "parse" (PR#2120)
In-Reply-To: <200210071753.TAA15549@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.10210071314540.11068-100000@fisher.stat.ucla.edu>

On my GNU/Linux box running 1.6.0, I get

marla:> R --vanilla

R : Copyright 2002, The R Development Core Team
Version 1.6.0  (2002-10-01)

[...]
> parse(text=deparse(body(plot)))
expression({
    if (is.null(attr(x, "class")) && is.function(x)) {
        if ("ylab" 0names(list(...))) 
            plot.function(x, ...)
        else plot.function(x, ylab = paste(deparse(substitute(x)), 
            "(x)"), ...)
    }
    else UseMethod("plot")
})
> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.0              
year     2002             
month    10               
day      01               
language R                


But on one of our OS X servers running R 1.5.1, I get:

galton:> R --vanilla

R : Copyright 2002, The R Development Core Team
Version 1.5.1  (2002-06-17)

[...]
> parse(text = deparse(body(plot)))
expression({
    if (is.null(attr(x, "class")) && is.function(x)) {
Bus error

I can't tell what the problem is though.

-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng

On Mon, 7 Oct 2002, j.c.rougier@durham.ac.uk wrote:

> Hi everyone,
> 
> The following code may not be very sensible, but it generates a core
> dump.  The same happens in R-1.5.1.
> 
> Cheers, Jonathan.
> 
> arrow:dma0jcr% R-1.6.0
> 
> R : Copyright 2002, The R Development Core Team
> Version 1.6.0  (2002-10-01)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> > parse(text=deparse(body(plot)))
> expression({
>     if (is.null(attr(x, "class")) && is.function(x)) {
>         if ("ylab" 0names(list(...))) 
>             plot.function(x, ...)
>         else plot.function(x, ylab = paste(deparse(substitute(x)), 
>             "(x)"), ...)
>     }
>     else UseMethod("plot")
> })
> Segmentation fault (core dumped)
> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = 
>  major = 1
>  minor = 6.0
>  year = 2002
>  month = 10
>  day = 01
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct  7 21:32:03 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 7 Oct 2002 13:32:03 -0700 (PDT)
Subject: Core dump with "parse" (PR#2120)
In-Reply-To: <200210071753.TAA15549@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210071327050.42328-100000@homer19.u.washington.edu>

On Mon, 7 Oct 2002 j.c.rougier@durham.ac.uk wrote:

> Hi everyone,
>
> The following code may not be very sensible, but it generates a core
> dump.  The same happens in R-1.5.1.

It doesn't generate a core dump for me in either version, but it doesn't
work correctly either.

A simpler version is:
> parse(text="a %in% b")
expression(a 0n% b)

It looks like the %i is being used as a printf format string, which might
well cause a core dump.

This isn't happening inside parse, but inside print, since
> parse(text="a %in% b")[[1]]
a %in% b


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct  7 21:55:57 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Oct 2002 22:55:57 +0200
Subject: Core dump with "parse" (PR#2120)
In-Reply-To: <Pine.GSO.4.10.10210071314540.11068-100000@fisher.stat.ucla.edu>
References: <Pine.GSO.4.10.10210071314540.11068-100000@fisher.stat.ucla.edu>
Message-ID: <x2bs66klya.fsf@biostat.ku.dk>

Roger Peng <rpeng@stat.ucla.edu> writes:

> On my GNU/Linux box running 1.6.0, I get
...
> But on one of our OS X servers running R 1.5.1, I get:

The problem is that PrintExpression is using 
 
 Rprintf(CHAR(STRING_ELT(u, i)));

which works right until it needs to print something with % inside,
then Rprintf interprets the string as a format specification, and
expects to find further arguments to handle according to the
conversion specification. Since they are not there, it grabs
whatever is sitting in the relevant place on the stack and beyond
that, all bets are off...

I'll put the fix into r-patched after some testing.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimmy@econostat.co.uk  Tue Oct  8 14:33:39 2002
From: jimmy@econostat.co.uk (jimmy@econostat.co.uk)
Date: Tue, 8 Oct 2002 15:33:39 +0200 (MET DST)
Subject: spec.pgram bug (PR#2123)
Message-ID: <200210081333.PAA25091@pubhealth.ku.dk>

Full_Name: Jimmy Shadbolt
Version: 1.5.1 and 1.6
OS: linux
Submission from: (NULL) (194.217.93.241)


The code for spec.pgram contains the following:

    for (i in 1:ncol(x)) {
        for (j in 1:ncol(x)) {
            pgram[, i, j] <- xfft[, i] * Conj(xfft[, j])/(N*xfreq)
        }
    }
    ## value at zero is invalid as mean has been removed, so interpolate
    pgram[1, i, j] <- 0.5*(pgram[2, i, j] + pgram[N, i, j])

Surely the last line should be inside the loops (and apply to all spectra, not
just the last)?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Oct  9 17:54:03 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Wed, 9 Oct 2002 18:54:03 +0200 (MET DST)
Subject: problems with missing values created by conversion using as.matri (PR#2130)
Message-ID: <200210091654.SAA07998@pubhealth.ku.dk>

> version
         _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    6.0                 
year     2002                
month    10                  
day      01                  
language R                   

------------------------------

Create a very simple data frame containing an factor and a character vector
each containing a missing value:

	> x <- data.frame( a=c("",NA), b=c(1,NA) ) 

Conversion to a matrix treats the two missing values differently:

	> as.matrix(x)
	  a  b   
	1 "" " 1"
	2 NA "NA"

The missing value in the factor variable has been correctly converted to a
missing value, while the missing value in the numeric vector has been
incorrectly converted to a string "NA", which is not recognized as a missing
value:

	>  is.na(as.matrix(x))
	      a     b
	1 FALSE FALSE
	2  TRUE FALSE

This turned up because I was using lapply to check for rows containing only
blank or missing values:

	> all.blank <- function(x) all( is.na(x) | (x <= " ") )
	> blanks <- apply(x, 1, all.blank)
	> blanks
	    1     2 
	FALSE FALSE 

This should have yielded

	> blanks
	    1     2 
	FALSE TRUE


BTW direct conversion using as.character doesn't show any problems when
applied to the individual columns:

	> as.character(x$a)
	[1] "" NA
	> as.character(x$b)
	[1] "1" NA 

	
I think the problem is that as.matrix.data.frame is using format() to
convert things to characters, which is resulting in a "NA" string and not a
missing value.  

Why isn't it using as.character() for this?

For completeness here's the patch to make this change, but I have not
explored what other side effects this might have.

*** R-1.6.0/src/library/base/R/dataframe.R      Thu Aug 29 03:41:42 2002
--- R-1.6.0-GRW//src/library/base/R/dataframe.R Wed Oct  9 12:29:11 2002
***************
*** 931,937 ****
            if (is.character(X[[j]]))
                next
            xj <- X[[j]]
!           X[[j]] <- if(length(levels(xj))) as.vector(xj) else format(xj)
        }
      }
      X <- unlist(X, recursive = FALSE, use.names = FALSE)
--- 931,937 ----
            if (is.character(X[[j]]))
                next
            xj <- X[[j]]
!           X[[j]] <- if(length(levels(xj))) as.vector(xj) else
as.character(xj)
        }
      }
      X <- unlist(X, recursive = FALSE, use.names = FALSE)



-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From voegelas@users.sourceforge.net  Wed Oct  9 19:13:54 2002
From: voegelas@users.sourceforge.net (voegelas@users.sourceforge.net)
Date: Wed, 9 Oct 2002 20:13:54 +0200 (MET DST)
Subject: help-links.sh doesn't make sure that packages.html is writable (PR#2131)
Message-ID: <200210091813.UAA08317@pubhealth.ku.dk>

Full_Name: Andreas Voegele
Version: 1.6.0
OS: GNU/Linux
Submission from: (NULL) (136.206.1.18)


Here's a minor problem:

help-links.sh copies packages-head.html to ~/.R/doc/html/packages.html.
Afterwards the script tries to add more html code to the copy.
But if packages-head.html is not writable the copy won't be writable and
as a consequence the script cannot add its html code.

The following patch ensures that packages.html is writable:

diff -u -r R-1.6.0.orig/share/sh/help-links.sh R-1.6.0/share/sh/help-links.sh
--- R-1.6.0.orig/share/sh/help-links.sh 2002-07-30 18:42:56.000000000 +0200
+++ R-1.6.0/share/sh/help-links.sh      2002-10-09 19:10:45.000000000 +0200
@@ -42,6 +42,7 @@
 rm -f ${PKGLIST}
 rm -f ${SEARCHINDEX}
 cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}
+chmod u+w ${PKGLIST}

 get_unique () {
   if test -r ${1}; then



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Oct  9 22:21:11 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 9 Oct 2002 14:21:11 -0700 (PDT)
Subject: problems with missing values created by conversion using as.matri
 (PR#2130)
In-Reply-To: <200210091654.SAA07998@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210091418100.64022-100000@homer13.u.washington.edu>

On Wed, 9 Oct 2002 gregory_r_warnes@groton.pfizer.com wrote:
> ------------------------------
>
> Create a very simple data frame containing an factor and a character vector
> each containing a missing value:
>
> 	> x <- data.frame( a=c("",NA), b=c(1,NA) )
>
> Conversion to a matrix treats the two missing values differently:
>

Yes, as.matrix.data.frame() uses format() to make character strings, and
it needs to check for NA as well

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Oct  9 22:21:58 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Wed, 9 Oct 2002 23:21:58 +0200 (MET DST)
Subject: problems with missing values created by conversion using as.matri (PR#2133)
Message-ID: <200210092121.XAA08874@pubhealth.ku.dk>

On Wed, 9 Oct 2002 gregory_r_warnes@groton.pfizer.com wrote:
> ------------------------------
>
> Create a very simple data frame containing an factor and a character vector
> each containing a missing value:
>
> 	> x <- data.frame( a=c("",NA), b=c(1,NA) )
>
> Conversion to a matrix treats the two missing values differently:
>

Yes, as.matrix.data.frame() uses format() to make character strings, and
it needs to check for NA as well

	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sta6ajb@leeds.ac.uk  Thu Oct 10 13:05:50 2002
From: sta6ajb@leeds.ac.uk (sta6ajb@leeds.ac.uk)
Date: Thu, 10 Oct 2002 14:05:50 +0200 (MET DST)
Subject: Documentation for randu() (PR#2141)
Message-ID: <200210101205.OAA15829@pubhealth.ku.dk>

Full_Name: Andrew J. Baczkowski
Version: 1.1.1, 1.5.0
OS: NT, unix
Submission from: (NULL) (129.11.159.161)


Help documentation for randu() has incorrect R code in Example.

Should replace line 4

seed <<- ((2^16) + 3) * seed)

by

seed <<- ((2^16) + 3) * seed) %% (2^31)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 10 14:34:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 10 Oct 2002 15:34:35 +0200 (MET DST)
Subject: Documentation for randu() (PR#2141)
Message-ID: <200210101334.PAA17342@pubhealth.ku.dk>

That's what the .Rd file says, but % needs to be escaped these days
for it to appear in the converted help.

Fixed for 1.6.1 (and please don't report on obselete versions).

On Thu, 10 Oct 2002 sta6ajb@leeds.ac.uk wrote:

> Full_Name: Andrew J. Baczkowski
> Version: 1.1.1, 1.5.0
> OS: NT, unix
> Submission from: (NULL) (129.11.159.161)
>
>
> Help documentation for randu() has incorrect R code in Example.
>
> Should replace line 4
>
> seed <<- ((2^16) + 3) * seed)
>
> by
>
> seed <<- ((2^16) + 3) * seed) %% (2^31)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From c.declercq@orsnpdc.org  Thu Oct 10 15:02:00 2002
From: c.declercq@orsnpdc.org (c.declercq@orsnpdc.org)
Date: Thu, 10 Oct 2002 16:02:00 +0200 (MET DST)
Subject: Sweave (PR#2142)
Message-ID: <200210101402.QAA17764@pubhealth.ku.dk>

In the 'RWeaveLatexSetup' function in the 'tools' package in R 1.6.0 , the
code below does not work (pdflatex can't find 'Sweave.sty'):

if (stylepath)
        styfile <- file.path(R.home(), "share", "texmf", "Sweave")
    else styfile <- "Sweave"

In R 1.5.1, that was:

if(stylepath)
        styfile <- file.path(.path.package("tools"),
                             "Sweave", "Sweave")
else
        styfile <- "Sweave"

and that was working.


Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status =
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
 .GlobalEnv, package:tools, package:rodbc, package:ctest, Autoloads,
package:base

--
Christophe DECLERCQ, MD
Observatoire Rgional de la Sant Nord-Pas-de-Calais
13, rue Faidherbe 59046 LILLE Cedex FRANCE
Phone +33 3 20 15 49 24
Fax   +33 3 20 55 92 30
E-mail c.declercq@orsnpdc.org



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 10 16:10:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 10 Oct 2002 16:10:34 +0100 (BST)
Subject: R-1.6.0-beta compiling on Solaris with gcc-3.2
In-Reply-To: <15744.49422.503549.192941@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0210101610040.8679-100000@gannet.stats>

On Thu, 12 Sep 2002, Kurt Hornik wrote:

> >>>>> Uwe Ligges writes:
>
> > Compiling R-1.6.0-beta (or any other) with gcc-3.2 just with
> >  ./configure
> >  make
>
> >  ... works - great!
>
>
> > But there are these annoying warning messages after *each* call to any
> > of the gcc tools, as in:
>
> >  gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
> >    -DHAVE_CONFIG_H   -g -O2 -c phyper.c -o phyper.o
> >  cc1: warning: changing search order for system directory
> >    "/usr/local/include"
> >  cc1: warning:   as it has already been specified as a non-system
> >    directory
>
> > I am not really sure if there is something special with our system?
> > If not, is it possible to solve that in the configure script for a
> > later version of R?
>
> Brian had already raised this some time ago---Brian, is there an obvious
> fix?  If not, then we need a configure check for GCC version 3.2 or
> better and inititialize CPPFLAGS accordingly?

That's the best I know of.  For now, set CPPFLAGS to be empty.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Oct 10 16:24:04 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 10 Oct 2002 17:24:04 +0200
Subject: R-1.6.0-beta compiling on Solaris with gcc-3.2
In-Reply-To: <Pine.LNX.4.31.0210101610040.8679-100000@gannet.stats>
References: <15744.49422.503549.192941@mithrandir.hornik.net>
 <Pine.LNX.4.31.0210101610040.8679-100000@gannet.stats>
Message-ID: <15781.39828.274422.681508@mithrandir.hornik.net>

>>>>> ripley  writes:

> On Thu, 12 Sep 2002, Kurt Hornik wrote:
>> >>>>> Uwe Ligges writes:
>> 
>> > Compiling R-1.6.0-beta (or any other) with gcc-3.2 just with
>> >  ./configure
>> >  make
>> 
>> >  ... works - great!
>> 
>> 
>> > But there are these annoying warning messages after *each* call to any
>> > of the gcc tools, as in:
>> 
>> >  gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
>> >    -DHAVE_CONFIG_H   -g -O2 -c phyper.c -o phyper.o
>> >  cc1: warning: changing search order for system directory
>> >    "/usr/local/include"
>> >  cc1: warning:   as it has already been specified as a non-system
>> >    directory
>> 
>> > I am not really sure if there is something special with our system?
>> > If not, is it possible to solve that in the configure script for a
>> > later version of R?
>> 
>> Brian had already raised this some time ago---Brian, is there an obvious
>> fix?  If not, then we need a configure check for GCC version 3.2 or
>> better and inititialize CPPFLAGS accordingly?

> That's the best I know of.  For now, set CPPFLAGS to be empty.

Ok, I'll try to do something along these lines then.

I assume that one could configure gcc 3.2 *not* to use
/usr/local/include so I will need to find out whether the dir is in the
default search path?

Jan, Luke: same for gcc 3.2 on Darwin with Fink and /sw?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Oct 10 16:50:02 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 10 Oct 2002 08:50:02 -0700
Subject: R-1.6.0-beta compiling on Solaris with gcc-3.2
In-Reply-To: <15781.39828.274422.681508@mithrandir.hornik.net>
Message-ID: <F08AE8DC-DC67-11D6-A3DB-000393860F3C@stat.ucla.edu>

Yes,  same messages here (starting at 3.1). It makes more sense
to me not to put /usr/local/include in R's CPPFLAGS than to tinker
with gcc.

On Thursday, October 10, 2002, at 08:24 AM, Kurt Hornik wrote:

>>>>>> ripley  writes:
>
>> On Thu, 12 Sep 2002, Kurt Hornik wrote:
>>>>>>>> Uwe Ligges writes:
>>>
>>>> Compiling R-1.6.0-beta (or any other) with gcc-3.2 just with
>>>>  ./configure
>>>>  make
>>>
>>>>  ... works - great!
>>>
>>>
>>>> But there are these annoying warning messages after *each* call to  
>>>> any
>>>> of the gcc tools, as in:
>>>
>>>>  gcc -I. -I../../src/include -I../../src/include  
>>>> -I/usr/local/include
>>>>    -DHAVE_CONFIG_H   -g -O2 -c phyper.c -o phyper.o
>>>>  cc1: warning: changing search order for system directory
>>>>    "/usr/local/include"
>>>>  cc1: warning:   as it has already been specified as a non-system
>>>>    directory
>>>
>>>> I am not really sure if there is something special with our system?
>>>> If not, is it possible to solve that in the configure script for a
>>>> later version of R?
>>>
>>> Brian had already raised this some time ago---Brian, is there an  
>>> obvious
>>> fix?  If not, then we need a configure check for GCC version 3.2 or
>>> better and inititialize CPPFLAGS accordingly?
>
>> That's the best I know of.  For now, set CPPFLAGS to be empty.
>
> Ok, I'll try to do something along these lines then.
>
> I assume that one could configure gcc 3.2 *not* to use
> /usr/local/include so I will need to find out whether the dir is in the
> default search path?
>
> Jan, Luke: same for gcc 3.2 on Darwin with Fink and /sw?
>
> -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From s.tomlinson@cancer.org.uk  Thu Oct 10 17:34:31 2002
From: s.tomlinson@cancer.org.uk (Simon Tomlinson)
Date: Thu, 10 Oct 2002 17:34:31 +0100
Subject: R DCOM VC6 example
Message-ID: <5.0.0.25.1.20021010173133.01f39350@magic.lif.icnet.uk>

Hi
Does anyone know if there is an example of  the R DCOM server being used in 
a Visual C++ project?

Thanks

Simon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Oct 11 08:57:21 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Fri, 11 Oct 2002 09:57:21 +0200
Subject: Sweave (PR#2142)
In-Reply-To: <200210101402.QAA17764@pubhealth.ku.dk>
References: <200210101402.QAA17764@pubhealth.ku.dk>
Message-ID: <15782.33889.962443.84196@galadriel.ci.tuwien.ac.at>


  > In the 'RWeaveLatexSetup' function in the 'tools' package in R 1.6.0 , th=
  > e
  > code below does not work (pdflatex can't find 'Sweave.sty'):

  > if (stylepath)
  >         styfile <- file.path(R.home(), "share", "texmf", "Sweave")
  >     else styfile <- "Sweave"

  > In R 1.5.1, that was:

  > if(stylepath)
  >         styfile <- file.path(.path.package("tools"),
  >                              "Sweave", "Sweave")
  > else
  >         styfile <- "Sweave"

  > and that was working.

The path is correct (I want to have Sweave.sty in
$R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
does not get installed properly when builddir != srcdir. This has been
fixed in both the devel and patched version of R.

As a quick fix for 1.6.0: please copy Sweave.sty manually to
$R_HOME/share/texmf.

Thanks a lot for the bug report,
Fritz

-- 
-------------------------------------------------------------------
                        Friedrich Leisch 
Institut fr Statistik                     Tel: (+43 1) 58801 10715
Technische Universitt Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstrae 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
-------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From c.declercq@orsnpdc.org  Fri Oct 11 15:35:38 2002
From: c.declercq@orsnpdc.org (Christophe Declercq)
Date: Fri, 11 Oct 2002 15:35:38 +0100
Subject: Sweave (PR#2142)
In-Reply-To: <15782.33889.962443.84196@galadriel.ci.tuwien.ac.at>
Message-ID: <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>

Thanks, Fritz, for your answer.

> De : Friedrich Leisch [mailto:leisch@galadriel.ci.tuwien.ac.at]
>[...]
> The path is correct (I want to have Sweave.sty in
> $R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
> does not get installed properly when builddir != srcdir. This has been
> fixed in both the devel and patched version of R.

Yes, but  'file.path(R.home(), "share", "texmf", "Sweave")' on my MS-Windows
box gives "C:\\R\\RW1060/share/texmf/Sweave".

With that, you get '\usepackage{C:RRW1060/share/texmf/Sweave}' in the tex
file. The problem seems to be with the 'R.home()' output on MS-Windows.

'file.path(.path.package("tools"), "Sweave", "Sweave")' was giving
"C:/R/RW1060/library/tools/Sweave/Sweave" which is OK for pdflatex.

Anyway, thanks a lot for Sweave which is really great (for the moment, as I
need it working, I have just put back the old stylepath code in tools).

Christophe
--
Christophe DECLERCQ, MD
Observatoire Rgional de la Sant Nord-Pas-de-Calais
13, rue Faidherbe 59046 LILLE Cedex FRANCE
Phone +33 3 20 15 49 24
Fax   +33 3 20 55 92 30
E-mail c.declercq@orsnpdc.org

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Oct 11 15:06:56 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 11 Oct 2002 16:06:56 +0200 (MET DST)
Subject: Sweave (PR#2142)
Message-ID: <200210111406.QAA28115@pubhealth.ku.dk>

On Fri, 11 Oct 2002, Christophe Declercq wrote:

> Thanks, Fritz, for your answer.
>
> > De : Friedrich Leisch [mailto:leisch@galadriel.ci.tuwien.ac.at]
> >[...]
> > The path is correct (I want to have Sweave.sty in
> > $R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
> > does not get installed properly when builddir != srcdir. This has been
> > fixed in both the devel and patched version of R.
>
> Yes, but  'file.path(R.home(), "share", "texmf", "Sweave")' on my MS-Windows
> box gives "C:\\R\\RW1060/share/texmf/Sweave".
>
> With that, you get '\usepackage{C:RRW1060/share/texmf/Sweave}' in the tex
> file. The problem seems to be with the 'R.home()' output on MS-Windows.

Nope, R.home is correct.  The problem is that Sweave is not escaping \'s
(nor spaces, although I believe they will not occur in R.home()'s output).
Some Windows applications insist on \, but Windows' versions of TeX seem
to insist on /, so applications calling TeX need to convert the path to
Unix style.

Also, Sweave.sty was not installed under Windows in 1.6.0 under any
circumstances.

>
> 'file.path(.path.package("tools"), "Sweave", "Sweave")' was giving
> "C:/R/RW1060/library/tools/Sweave/Sweave" which is OK for pdflatex.
>
> Anyway, thanks a lot for Sweave which is really great (for the moment, as I
> need it working, I have just put back the old stylepath code in tools).
>
> Christophe
> --
> Christophe DECLERCQ, MD
> Observatoire Rgional de la Sant Nord-Pas-de-Calais
> 13, rue Faidherbe 59046 LILLE Cedex FRANCE
> Phone +33 3 20 15 49 24
> Fax   +33 3 20 55 92 30
> E-mail c.declercq@orsnpdc.org
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Oct 11 15:52:13 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 11 Oct 2002 09:52:13 -0500
Subject: Sweave (PR#2142)
Message-ID: <E18019B-0000NW-00@sonny.eddelbuettel.com>


> Nope, R.home is correct.  The problem is that Sweave is not escaping \'s
> (nor spaces, although I believe they will not occur in R.home()'s output).
> Some Windows applications insist on \, but Windows' versions of TeX seem
> to insist on /, so applications calling TeX need to convert the path to
> Unix style.

I got bitten by that under Cygwin with R in the default c:\Program Files\R.
Cygwin's LaTeX (i.e. tetex) then breaks. A location without spaces in the
path works fine.   

Dirk

-- 
According to the latest figures, 43% of all signatures are totally worthless.   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Fri Oct 11 19:30:00 2002
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Fri, 11 Oct 2002 20:30:00 +0200
Subject: growing process size in simulation
Message-ID: <3DA718A8.79391A9E@ci.tuwien.ac.at>

I came across this in a simulation I ran under 1.6.0: If I do something
like

R> x <- rnorm(10)
R> rval <- NULL
R> for(i in 1:100000) rval <- t.test(x)$p.value

then the process size remains at about 14M under 1.5.1, but it seems to
be almost linearly growing up to more than 100M under 1.6.0.

I know that the above simulation is nonsense, but it was the simplest I
could come up with to reproduce the behaviour. It doesn't depend on
t.test, if I use wilcox.test(x)$p.value the same happens...

I could reproduce this behaviour under Linux and Solaris, the exact
versions are given below.
Z

---
the problem exists on

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.0              
year     2002             
month    10               
day      01               
language R                

and

platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    1                   
minor    6.0                 
year     2002                
month    10                  
day      01                  
language R                   

but not on

platform i386-pc-linux-gnu
arch     i386             
os       linux-gnu        
system   i386, linux-gnu  
status                    
major    1                
minor    5.1              
year     2002             
month    06               
day      17               
language R
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.c.rougier@durham.ac.uk  Fri Oct 11 19:38:44 2002
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Fri, 11 Oct 2002 20:38:44 +0200 (MET DST)
Subject: Odd outcome of attr with environments (PR#2148)
Message-ID: <200210111838.UAA29229@pubhealth.ku.dk>

Hi everyone,

I think the following error is slightly odd:

> fred <- new.env()
> happy <- function() fred
> happy()
<environment: 0x8a425b8>
> attr(happy(), "foo") <- 1:10
Error: invalid (NULL) left side of assignment

But naturally this works

> attr(fred, "foo") <- 1:10
> fred
<environment: 0x8a425b8>
attr(,"foo")
 [1]  1  2  3  4  5  6  7  8  9 10

I would have thought that "fred" and "happy()" were synonymous, so I
was surprised that I could not attach an attribute to the environment
using "happy()".  Of course in practice I can get round this by doing

> sad <- happy()
> attr(sad, "foo") <- 5:1
> sad
<environment: 0x8a425b8>
attr(,"foo")
[1] 5 4 3 2 1
> happy()
<environment: 0x8a425b8>
attr(,"foo")
[1] 5 4 3 2 1

but I wondered what was going on.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Oct 11 20:23:14 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 11 Oct 2002 12:23:14 -0700 (PDT)
Subject: Odd outcome of attr with environments (PR#2148)
In-Reply-To: <200210111838.UAA29229@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210111220500.64826-100000@homer30.u.washington.edu>

On Fri, 11 Oct 2002 j.c.rougier@durham.ac.uk wrote:

> Hi everyone,
>
> I think the following error is slightly odd:
>
> > fred <- new.env()
> > happy <- function() fred
> > happy()
> <environment: 0x8a425b8>
> > attr(happy(), "foo") <- 1:10
> Error: invalid (NULL) left side of assignment
>
It's nothing to do with environments.  happy() is not an variable, so you
can't modify it: eg

R> f<-function(){ 42}
R> f()<-1
Error: invalid (NULL) left side of assignment
R> attr(f(),"foo")<-1
Error: invalid (NULL) left side of assignment
R> f()[1]<-1
Error: invalid (NULL) left side of assignment


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 11 20:31:21 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Oct 2002 21:31:21 +0200
Subject: growing process size in simulation
In-Reply-To: <3DA718A8.79391A9E@ci.tuwien.ac.at>
References: <3DA718A8.79391A9E@ci.tuwien.ac.at>
Message-ID: <x2r8ewwz5i.fsf@biostat.ku.dk>

Achim Zeileis <zeileis@ci.tuwien.ac.at> writes:

> I came across this in a simulation I ran under 1.6.0: If I do something
> like
> 
> R> x <- rnorm(10)
> R> rval <- NULL
> R> for(i in 1:100000) rval <- t.test(x)$p.value
> 
> then the process size remains at about 14M under 1.5.1, but it seems to
> be almost linearly growing up to more than 100M under 1.6.0.
> 
> I know that the above simulation is nonsense, but it was the simplest I
> could come up with to reproduce the behaviour. It doesn't depend on
> t.test, if I use wilcox.test(x)$p.value the same happens...

Argh. Confirmed. One interesting clue is that R itself doesn't seem to
know about this:

for(i in 1:50000) {
   rval <- t.test(x)$p.value 
   if (i %% 10000 == 0) print(gc())
}

         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0
         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0
         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0
         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0
         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0

..but the memory footprint is still growing.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.uiowa.edu  Sat Oct 12 02:57:23 2002
From: luke@stat.uiowa.edu (Luke Tierney)
Date: Fri, 11 Oct 2002 20:57:23 -0500 (CDT)
Subject: growing process size in simulation
In-Reply-To: <x2r8ewwz5i.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0210112012180.1901-100000@nokomis2.stat.umn.edu>

On 11 Oct 2002, Peter Dalgaard BSA wrote:

> Achim Zeileis <zeileis@ci.tuwien.ac.at> writes:
> 
> > I came across this in a simulation I ran under 1.6.0: If I do something
> > like
> > 
> > R> x <- rnorm(10)
> > R> rval <- NULL
> > R> for(i in 1:100000) rval <- t.test(x)$p.value
> > 
> > then the process size remains at about 14M under 1.5.1, but it seems to
> > be almost linearly growing up to more than 100M under 1.6.0.
> > 
> > I know that the above simulation is nonsense, but it was the simplest I
> > could come up with to reproduce the behaviour. It doesn't depend on
> > t.test, if I use wilcox.test(x)$p.value the same happens...
> 
> Argh. Confirmed. One interesting clue is that R itself doesn't seem to
> know about this:
> 
> for(i in 1:50000) {
>    rval <- t.test(x)$p.value 
>    if (i %% 10000 == 0) print(gc())
> }
> 
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
> 
> ...but the memory footprint is still growing.
> 
> 

It looks to me like something in deparse (which gets called in
t.test.default) may be the culprit:

   for(i in 1:100000) rval <- deparse("x")

exhibits the same behavior.

In running under gdb it looks like deparse("x") results in the call
sequence

deparse1WithCutoff->deparse2->deparse2buff->print2buff->R_AllocStringBuffer

and malloc is called in R_AllocStringBuffer to create the buffer.  The
allocation is stored into a local structure variable in
deparse1WithCutoff and I think is not being free'd before
deparse1WithCutoff exits.

luke

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Oct 12 11:04:23 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Oct 2002 12:04:23 +0200
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.44.0210112012180.1901-100000@nokomis2.stat.umn.edu>
References: <Pine.LNX.4.44.0210112012180.1901-100000@nokomis2.stat.umn.edu>
Message-ID: <x2elawvuqg.fsf@biostat.ku.dk>

Luke Tierney <luke@stat.uiowa.edu> writes:

> It looks to me like something in deparse (which gets called in
> t.test.default) may be the culprit:
> 
>    for(i in 1:100000) rval <- deparse("x")
> 
> exhibits the same behavior.
> 
> In running under gdb it looks like deparse("x") results in the call
> sequence
> 
> deparse1WithCutoff->deparse2->deparse2buff->print2buff->R_AllocStringBuffer
> 
> and malloc is called in R_AllocStringBuffer to create the buffer.  The
> allocation is stored into a local structure variable in
> deparse1WithCutoff and I think is not being free'd before
> deparse1WithCutoff exits.

Thanks for looking into this, Luke. Yes, I agree. Specifically, the
issue seems to be that we used to work off a static variable "buff"
and use realloc on that inside AllocBuffer if it was non-null. Now
we've put the variable inside a structure "buf->data" and still trying
to use the realloc'ing construct, but since "buf" (aka localData) is a
local variable, it gets NULL'ed every time deparse1WithCutoff() is
called ---> deparse1WithCutoff needs to clean up on the way out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.uiowa.edu  Sat Oct 12 15:49:21 2002
From: luke@stat.uiowa.edu (Luke Tierney)
Date: Sat, 12 Oct 2002 09:49:21 -0500 (CDT)
Subject: growing process size in simulation
In-Reply-To: <x2elawvuqg.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0210120745400.1901-100000@nokomis2.stat.umn.edu>

On 12 Oct 2002, Peter Dalgaard BSA wrote:

> Luke Tierney <luke@stat.uiowa.edu> writes:
> 
> > It looks to me like something in deparse (which gets called in
> > t.test.default) may be the culprit:
> > 
> >    for(i in 1:100000) rval <- deparse("x")
> > 
> > exhibits the same behavior.
> > 
> > In running under gdb it looks like deparse("x") results in the call
> > sequence
> > 
> > deparse1WithCutoff->deparse2->deparse2buff->print2buff->R_AllocStringBuffer
> > 
> > and malloc is called in R_AllocStringBuffer to create the buffer.  The
> > allocation is stored into a local structure variable in
> > deparse1WithCutoff and I think is not being free'd before
> > deparse1WithCutoff exits.
> 
> Thanks for looking into this, Luke. Yes, I agree. Specifically, the
> issue seems to be that we used to work off a static variable "buff"
> and use realloc on that inside AllocBuffer if it was non-null. Now
> we've put the variable inside a structure "buf->data" and still trying
> to use the realloc'ing construct, but since "buf" (aka localData) is a
> local variable, it gets NULL'ed every time deparse1WithCutoff() is
> called ---> deparse1WithCutoff needs to clean up on the way out.
> 

Right.  Unfortunately the issue goes beyond deparse.c.
R_AllocStringBuffer is also called in printutils.c, saveload.c,
scan.c.  I'm not sure about printutils.c, but the others look like
they have the same issue.  R_LoadFromFile in saveload.c looks like a
particular pain to fix; perhaps moving the buffer allocation up one
call level would work.  I can try to fix this later next week unless
someone else gets there first.

I wonder if there is something we could add to the QA tools that could
have picked this up.

luke


-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Oct 12 16:15:01 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Oct 2002 17:15:01 +0200
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.44.0210120745400.1901-100000@nokomis2.stat.umn.edu>
References: <Pine.LNX.4.44.0210120745400.1901-100000@nokomis2.stat.umn.edu>
Message-ID: <x2adljwux6.fsf@biostat.ku.dk>

Luke Tierney <luke@stat.uiowa.edu> writes:

> > Thanks for looking into this, Luke. Yes, I agree. Specifically, the
> > issue seems to be that we used to work off a static variable "buff"
> > and use realloc on that inside AllocBuffer if it was non-null. Now
> > we've put the variable inside a structure "buf->data" and still trying
> > to use the realloc'ing construct, but since "buf" (aka localData) is a
> > local variable, it gets NULL'ed every time deparse1WithCutoff() is
> > called ---> deparse1WithCutoff needs to clean up on the way out.
> > 
> 
> Right.  Unfortunately the issue goes beyond deparse.c.
> R_AllocStringBuffer is also called in printutils.c, saveload.c,
> scan.c.  I'm not sure about printutils.c, but the others look like
> they have the same issue.  R_LoadFromFile in saveload.c looks like a
> particular pain to fix; perhaps moving the buffer allocation up one
> call level would work.  I can try to fix this later next week unless
> someone else gets there first.
> 
> I wonder if there is something we could add to the QA tools that could
> have picked this up.

I've fixed the one in deparse.c now. I had a suspicion that there
might be other cases, so I tried to abstract it in the same spirit as
R_AllocStringBuffer. There's now an R_FreeStringBuffer, and I think a
straightforward rule for invoking it: The function that allocates the
pointer for the storage must call R_FreeStringBuffer before returning.

R_LoadFromFile has more than a dozen exit points, so you get to say
"R_FreeStringBuffer(data.buffer);" quite a few times, but I don't
think the pain extends beyond that.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Oct 12 20:45:04 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 12 Oct 2002 12:45:04 -0700
Subject: tkrplot
Message-ID: <1AB94D32-DE1B-11D6-A072-000393860F3C@stat.ucla.edu>

The package tkrplot now works in OS X (Jaguar). The
core of the problem is that the load function in tcl does not accept
bundles, but needs dynamic libraries (I verfied this using the
native version of tclsh and Wish). But the config files in
the tkrplot package (as in all packages) build bundles, not
libraries. Thus I said in the src directorry of the tkrplot package

gcc -dynamiclib -flat_namespace -undefined suppress -install_name  
/usr/local/lib/R/library/tkrplot/libs/tkrplot.dylib \\
	-o tkrplot.dylib -L/usr/local/lib/R/bin -lR -L/sw/lib -ltcl -ltk  
-L/usr/X11R6/lib -lX11 tcltkimg.o

and I changed the R code in tkrplot so that it uses .dylib as the
file extension.

It is still mysterious to me why it did work, using bundles, in
OS X 10.1, but, hey, what's life without a little mystery.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mschwartz@medanalytics.com  Sat Oct 12 21:46:20 2002
From: mschwartz@medanalytics.com (Marc Schwartz)
Date: Sat, 12 Oct 2002 15:46:20 -0500
Subject: [R] barplot x axis
In-Reply-To: <1034434947.3da839830f56b@webmail.bcmg.com.br>
Message-ID: <001301c27230$6c97f590$0201a8c0@MARC>

> -----Original Message-----
> Dear Schwartz and Pausas,
> 
> Thanks for your messages.

You are welcome.

> I was referring to the axis line and its tick marks.
> 
> If you write barplot(table(c(1,2,2,3,3,3,4,4,5))) in R150 and in R160
you will
> have different plots. The last one will not display the x axis line
and tick
> marks, but only x axis labels, isn't it?
> 
> In this case "axis(1, at = mp, labels = 1:5)" solves the problem.
> 
> Best regards,
> 
> Antonio Olinto

Antonio,

It turns out that the change in behavior, which I was able to duplicate
by re-installing V1.5.1 on my system, is the result in the change in
coding in the axis() function internal C code (do_axis) in V.1.6.0 and
not in barplot().  The code in barplot() did not change either in
content or in the default argument values.

If you review the C do_axis code in the V1.5.1 plot.c, which is the C
source code for many of the plotting functions, you will find that the
author overrides the passed "lty" argument.  The author has a comment in
the C code as follows:

  /* I can't think of a good reason to allow axes with a non-solid
line-type,
     * so I override any value the user may have specified.
     * This may need to be revisited, but this should
     * cover 99.99% of the cases. */

In barplot(), the following code is called to draw the label axis (x
axis when horiz = FALSE):

axis(if (horiz) 
                2
            else 1, at = at.l, labels = names.arg, lty = 0, cex.axis =
cex.names, 
                ...)

Note that the 'lty' argument is specified as "0", which should be
"blank" or no line.

However, the V1.5.x internal C code in plot.c overrides this value with
"solid" as per the author's comments above. Thus in V.1.5.x, you get a
solid line on the x axis.

In V.1.6.0, there was a change in axis() to allow for the user
specification of "lty", "lwd" and "col" line parameters as arguments to
axis().  

The V1.6.0 internal C code for do_axis was changed to facilitate this
and therefore the axis call in V.1.6.0 barplot() as above now results in
no line being drawn, since the "lty = 0" (blank) argument in not
overridden in the internal C code.

Hence the (perhaps unintended) change in the default behavior in
barplot() in V.1.6.0.

It took me a while to track this down and finally isolated it to the
axis() function change in 1.6.0.

I am also copying this reply to r-devel, more as an FYI, since my guess
is that other functions, either R standard functions or community based
functions, may have their default behavior altered as well.

Marc Schwartz



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Oct 12 21:46:43 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 12 Oct 2002 13:46:43 -0700
Subject: XML package
Message-ID: <B754D275-DE23-11D6-A072-000393860F3C@stat.ucla.edu>

There are some problems with XML under OS X, nothing serious,
but manual intervention is required.

1. For some reason the package has problems matching up the
proper include and lib files for xml or xml2. If I install a fresh
libxml2 and point the environmental variables to it, it still
complains about mismatched header and lib files,
which suggests, perhaps, that the test in configure uses something  
system
specific. It works if I point explicitly to the include files for xml1.
Both xml1 and xml2 are in /sw, because they come from fink. Maybe
use xmlConf.sh or xml2Conf.sh

2. xmlParserError is defined in libxml, but Utils.o tried to override
it with a new definition. That does not work in OS X, unless one
specifies explicitly that that is what one wants. Adding "-Xlinker
-m" to the link of XML.so indicates we need the first definition we
come across, which is the one in Utils.o in this case. And that is
what is intended.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Oct 12 23:46:11 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 12 Oct 2002 15:46:11 -0700
Subject: RXLisp
Message-ID: <678BE2C0-DE34-11D6-8638-000393860F3C@stat.ucla.edu>

So far, I had made RXLisp by putting all foo.o from XLISP-STAT in
an archive, and linking that into RXLisp.so. I have gotten somewhat
further in using dynamic libraries. Here is what I now do.

in XLS
1. Copy xlisp modifications from RXLisp
2. configure --host=powerpc-apple-darwin6.2
3. make libxlisp.so CC="gcc -fno-common -L/sw/lib -I/sw/include"
4. gcc -dynamiclib -flat_namespace -undefined suppress \\
  	-install_name /usr/local/lib/libxlisp.dylib -o libxlisp.dylib *.o \\
	 -L/usr/X11R6/lib -lX11 -L/sw/lib -ldl -lm
  5. Copy libxlisp.dylib to /usr/local/lib

  In RXLisp/src
  1  make CC="gcc -I/usr/X11R6/include -fno-common"
  2. gcc -dynamiclib -flat_namespace -undefined suppress \\
  	-install_name /usr/local/lib/libRXLispConverters.dylib \\
	-L/sw/lib -L/usr/local/lib -o libRXLispConverters.dylib Converters.o
  3. Copy libRXLispConverters.dylib  to /usr/local/lib

  Then R CMD INSTALL RXLisp

Now I can do XLisp from R, but not everything (no graphics, for
example -- gives a segmentation error) yet. Haven't looked in the other  
direction,
which does not interest me much anyway.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sun Oct 13 03:29:52 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 12 Oct 2002 19:29:52 -0700
Subject: RXLisp, works one way on Jaguar
Message-ID: <A728B4FA-DE53-11D6-8638-000393860F3C@stat.ucla.edu>

I am copying to r-devel, because RXLisp is a reasonably
complicated package that uses both dylibs and bundles.
I am pleased to say that XLisp from R now works on Jaguar, complete
with graphics (these did not work before, because I was
actually running an old version of XLISP-STAT -- sic transit gloria
mundi).

The other way around is still trouble: I get

 > (load "inXLisp")
; loading inXLisp.lsp
Error: dlcompat: unable to find symbol "Rmodule__init" in  
"/usr/local/lib/R/library/RXLisp/libs/RinXLisp.so"
Happened in: #<Byte-Code-Closure-SHARED-LIBRARY-INFORMATION: #3ab778>

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 13 08:14:38 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 13 Oct 2002 08:14:38 +0100 (BST)
Subject: XML package
In-Reply-To: <B754D275-DE23-11D6-A072-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.LNX.4.31.0210130808180.22048-100000@gannet.stats>

On Sat, 12 Oct 2002, Jan de Leeuw wrote:

> There are some problems with XML under OS X, nothing serious,
> but manual intervention is required.
>
> 1. For some reason the package has problems matching up the
> proper include and lib files for xml or xml2. If I install a fresh
> libxml2 and point the environmental variables to it, it still
> complains about mismatched header and lib files,
> which suggests, perhaps, that the test in configure uses something
> system
> specific. It works if I point explicitly to the include files for xml1.
> Both xml1 and xml2 are in /sw, because they come from fink. Maybe
> use xmlConf.sh or xml2Conf.sh
>
> 2. xmlParserError is defined in libxml, but Utils.o tried to override
> it with a new definition. That does not work in OS X, unless one
> specifies explicitly that that is what one wants. Adding "-Xlinker
> -m" to the link of XML.so indicates we need the first definition we
> come across, which is the one in Utils.o in this case. And that is
> what is intended.

Same problem under Windows, which I can only solve (at least when
statically loading libxml2) by building a version of error.c (from
libxml2) without xmlParserError.  It's really a design fault in libxml2:
the replaceable parts should be in separate moodules.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Mon Oct 14 00:34:46 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Mon, 14 Oct 2002 01:34:46 +0200 (MET DST)
Subject: The class attribute on an environment seems buggy (PR#2159)
Message-ID: <200210132334.BAA05124@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.6.0, 1.5.1
OS: WinXP Pro
Submission from: (NULL) (128.250.252.82)


The following example, which I tested on both R v1.5.1 and R v1.6.0 on WinXP
Pro, shows the problem I encountered when trying to use the class attribute of
an environment:

# Define method print() for class Environment
C

print(e)
# gives:
# [1] "An Environment!"

# Exit [R]
q(save="yes")

When restarting [R] and loading the previous workspace something goes wrong(?):
% R

print(e)
# gives:
# <environment: 01BE52F4>
# attr(,"class")
# [1] "Environment"

print(class(e))
# gives: 
# [1] "Environment"

print(unclass(e))
# gives:
# <environment: 01BE52F4>
# attr(,"class")
# [1] "Environment"

str(e)
# gives because of the malfunctioning unclass():
# Class 'Environment' Class 'Environment' Class 'Environment' Class
'Environment' 
# Class 'Environment' Class 'Environment' Class 'Environment' Class
'Environment' 
# Class 'Environment' Class 'Environment' Class 'Environment' ...

Note how unclass(e) does not work properly. More importantly, it the
S3/UseMethod() method dispatching get confused and won't recognize the class
attribute. 

Cheers

Henrik Bengtsson

Home: 201/445 Royale Parade, Parkville
Office: Bioinformatics, WEHI, Parkville
+61 (0)412 269 734 (cell), +61 (0)3 9387 791 (home), +61 (0)3 9345 2324 +(lab)
hb@maths.lth.se, http://www.maths.lth.se/~hb/
Time zone: +10h UTC (Sweden +2h UTC, Calif. -7h UTC)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Oct 14 09:03:20 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Mon, 14 Oct 2002 10:03:20 +0200
Subject: Sweave (PR#2142)
In-Reply-To: <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>
References: <15782.33889.962443.84196@galadriel.ci.tuwien.ac.at>
 <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>
Message-ID: <15786.31304.333618.232936@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 11 Oct 2002 15:35:38 +0100,
>>>>> Christophe Declercq (CD) wrote:

  > Thanks, Fritz, for your answer.
  >> De : Friedrich Leisch [mailto:leisch@galadriel.ci.tuwien.ac.at]
  >> [...]
  >> The path is correct (I want to have Sweave.sty in
  >> $R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
  >> does not get installed properly when builddir != srcdir. This has been
  >> fixed in both the devel and patched version of R.

  > Yes, but  'file.path(R.home(), "share", "texmf", "Sweave")' on my MS-Windows
  > box gives "C:\\R\\RW1060/share/texmf/Sweave".

  > With that, you get '\usepackage{C:RRW1060/share/texmf/Sweave}' in the tex
  > file. The problem seems to be with the 'R.home()' output on MS-Windows.

  > 'file.path(.path.package("tools"), "Sweave", "Sweave")' was giving
  > "C:/R/RW1060/library/tools/Sweave/Sweave" which is OK for pdflatex.

  > Anyway, thanks a lot for Sweave which is really great (for the moment, as I
  > need it working, I have just put back the old stylepath code in tools).

I commited a fix to the patched version of R that translates all
backslashes to slashes on windows. This now works for me (on Windows
XP) if the path to R_HOME contains no spaces. For installations in
directories like "Program Files" I still have the following problem: I
can either use

	\usepackage{c:/progra~1/rw1060/share/texmf/Sweave}

or

	\usepackage{c:/program files/rw1060/share/texmf/Sweave}

both of which do *NOT* work with my latex installation
(miktex). Unless somedy has a good suggestion how to solve the problem
my recoomendation is to either install R into a path without spaces or
copy Sweave.sty to some place in your TEXINPUTS path and use
stylepath=FALSE when calling Sweave.


Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Oct 14 13:59:43 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 14 Oct 2002 08:59:43 -0400
Subject: The class attribute on an environment seems buggy (PR#2159)
References: <200210132334.BAA05124@pubhealth.ku.dk>
Message-ID: <3DAABFBF.F7AEC086@research.bell-labs.com>

Any attribute of environments, not just the class, can be killed by
operating on the object "locally" in a function.

Example:

R> f <- function(x){ y <- x; attr(y, "foo") <- NULL; y}
R> ev <- new.env()
R> attr(ev, "foo") <- "bar"
R> ev
<environment: 0x8b515d4>
attr(,"foo")
[1] "bar"
R> f(ev)
<environment: 0x8b515d4>
R> ev
<environment: 0x8b515d4>

The reason is that the C routine `duplicate' does not duplicate an
environment  OR its attributes.

I was bitten by this trying to use environments as reference objects in
the Omegahat OOP package.

Would there be a problem with a "fix" in which the environment was left
unduplicated, but environments with attributes are "duplicated" by
creating a copy of the attribute list, but with the copy still pointing
to the same environment?

If that is not possible, it would be good to have another datatype that
had roughly those properties.  Otherwise, it's difficult to build on
this datatype in designing new classes.

(The same issue applies to other types, such as external pointers.)

hb@maths.lth.se wrote:
> 
> Full_Name: Henrik Bengtsson
> Version: 1.6.0, 1.5.1
> OS: WinXP Pro
> Submission from: (NULL) (128.250.252.82)
> 
> The following example, which I tested on both R v1.5.1 and R v1.6.0 on WinXP
> Pro, shows the problem I encountered when trying to use the class attribute of
> an environment:
> 
> # Define method print() for class Environment
> C
> 
> print(e)
> # gives:
> # [1] "An Environment!"
> 
> # Exit [R]
> q(save="yes")
> 
> When restarting [R] and loading the previous workspace something goes wrong(?):
> % R
> 
> print(e)
> # gives:
> # <environment: 01BE52F4>
> # attr(,"class")
> # [1] "Environment"
> 
> print(class(e))
> # gives:
> # [1] "Environment"
> 
> print(unclass(e))
> # gives:
> # <environment: 01BE52F4>
> # attr(,"class")
> # [1] "Environment"
> 
> str(e)
> # gives because of the malfunctioning unclass():
> # Class 'Environment' Class 'Environment' Class 'Environment' Class
> 'Environment'
> # Class 'Environment' Class 'Environment' Class 'Environment' Class
> 'Environment'
> # Class 'Environment' Class 'Environment' Class 'Environment' ...
> 
> Note how unclass(e) does not work properly. More importantly, it the
> S3/UseMethod() method dispatching get confused and won't recognize the class
> attribute.
> 
> Cheers
> 
> Henrik Bengtsson
> 
> Home: 201/445 Royale Parade, Parkville
> Office: Bioinformatics, WEHI, Parkville
> +61 (0)412 269 734 (cell), +61 (0)3 9387 791 (home), +61 (0)3 9345 2324 +(lab)
> hb@maths.lth.se, http://www.maths.lth.se/~hb/
> Time zone: +10h UTC (Sweden +2h UTC, Calif. -7h UTC)
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 14 14:30:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 14 Oct 2002 14:30:35 +0100 (BST)
Subject: savehistory directories and quitting R (PR#2038)
In-Reply-To: <200209190454.GAA13201@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210141410350.1247-100000@gannet.stats>

This is not a bug. If you override a system function, you can't expect it
to be used by R internals.  Indeed, as from 1.6.0 you can't even expect it
to be used by R's base functions, due to namespaces.

There are very good reasons for the internal quit code not to call user's
R code, the main one being that R errors will not be handled then.
.Last is made available as a hook to enable you to do what you want:
as the help page says.

Doesn't setting R_HISTFILE do this for you automatically? Just set
R_HISTFILE="D:/R50/.Rhistory" and the history should be loaded and saved
to the specified place.  Works under Unix, at least.



On Thu, 19 Sep 2002 Mark.Bravington@csiro.au wrote:

> #
> #       r-bugs@r-project.org
> #
> ######################################################
>
> Because I work in different directories, but always want to save my
> .Rhistory in the same place, I have changed the system function savehistory
> to this:
>
> function (file = "D:/R50/.Rhistory")
> invisible(.Internal(savehistory(file)))
>
> When I use q() to quit R, and it asks me whether I want to "save current
> workspace", a response of YES means that the .Rhistory is saved in the
> current working directory, rather than D:/R50/.Rhistory. I take this to mean
> that the quit-on-prompt sequence makes a direct call to .Internal(
> savehistory...) rather than going via the actual savehistory() function. It
> would be nicer if prompt-on-quit would honour the user's definition of
> savehistory.

Actually it talks directly to the GUI-specific history mechanism.

> (Responding NO to the "save current..." prompt means that .Rhistory isn't
> saved at all, which is reasonable.)
>
> I admit that this is a very minor bug, because I can set .Last to call
> savehistory directly. But I just thought you should know...
>
> cheers
> Mark
>
>
> *******************************
>
> Mark Bravington
> CSIRO (CMIS)
> PO Box 1538
> Castray Esplanade
> Hobart
> TAS 7001
>
> phone (61) 3 6232 5118
> fax (61) 3 6232 5012
> Mark.Bravington@csiro.au
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status =
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 04
>  day = 29
>  language = R
>
> Windows 2000 Professional (build 2195) Service Pack 2.0
>
> Search Path:
>  .GlobalEnv, package:handy, package:debug, mvb.session.info,
> package:mvbutils, package:tcltk, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 14 14:54:36 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Oct 2002 15:54:36 +0200
Subject: The class attribute on an environment seems buggy (PR#2159)
In-Reply-To: <3DAABFBF.F7AEC086@research.bell-labs.com>
References: <200210132334.BAA05124@pubhealth.ku.dk>
 <3DAABFBF.F7AEC086@research.bell-labs.com>
Message-ID: <x23cr93z37.fsf@biostat.ku.dk>

John Chambers <jmc@research.bell-labs.com> writes:

> Would there be a problem with a "fix" in which the environment was left
> unduplicated, but environments with attributes are "duplicated" by
> creating a copy of the attribute list, but with the copy still pointing
> to the same environment?
> 
> If that is not possible, it would be good to have another datatype that
> had roughly those properties.  Otherwise, it's difficult to build on
> this datatype in designing new classes.
> 
> (The same issue applies to other types, such as external pointers.)

I've been wrapping such environments in lists, as in

> tclVar
function (init = "") 
{
    n <- evalq(TclVarCount <- TclVarCount + 1, .TkRoot$env)
    name <- paste("RTcl", n, sep = "")
    l <- list(env = new.env())
    assign(name, NULL, envir = l$env)
    reg.finalizer(l$env, function(env) tkcmd("unset", ls(env)))
    class(l) <- "tclVar"
    tclvalue(l) <- init
    l
}

where the list(env = new.env()) construct is to avoid sticking a class
directly on "env". 

What you're suggesting would seem to have the same effect, i.e. the
environment gets effectively embedded in a structure on which you can
set attributes. It does sound like it could work.

I'm just a little worried whether it would be clear enough to the end
user what is going on, or whether we'd just be compounding problems of
duplications that don't duplicate...

BTW, this was never a bug...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From socher@stat.uni-muenchen.de  Mon Oct 14 15:01:21 2002
From: socher@stat.uni-muenchen.de (socher@stat.uni-muenchen.de)
Date: Mon, 14 Oct 2002 16:01:21 +0200 (MET DST)
Subject: possible memory leak in 1.6 (PR#2160)
Message-ID: <200210141401.QAA11994@pubhealth.ku.dk>

Full_Name: Anne-Laure Boulesteix
Version: 1.6.0
OS: Linux
Submission from: (NULL) (141.84.161.156)


Hi,

I noticed the following problem with 1.6.0 (which was not present in 1.5.1): 

I work with very large datasets and encountered a problem with memory
allocation,
(probably a memory leak).  I wrote a programm with a loop.  In this loop in
each
iteration I create a  very large matrix and assign it to a variable which
is the SAME for all the iterations.  So at each round the new matrix overwrites
the old  matrix.  In 1.5.1  the garbage collector seems to clean up the old
unused memory.  Unfortunately, in 1.6.0 with each round the memory used by R
increases until the R process is killed. 

Is there any way around this?

Many thanks and best regards,

  A.L. Boulesteix

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 14 15:04:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 14 Oct 2002 15:04:11 +0100 (BST)
Subject: Install with 64-bit GCC 3.2 (PR#2048)
In-Reply-To: <200209201634.SAA01188@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210141456390.1247-100000@gannet.stats>

In 1.6.0's R-admin manual is a set of flags which do work.

I don't think you are setting CC correctly, and am surprised this got
though configuration (it didn't for me).

If you look in config.site or the manual you will see it is
MAIN_LDFLAGS and SHLIB_LDFLAGS you needed to set; you seem to
misunderstand the role of LDFLAGS.


There may be a bug, but it's not in R.

On Fri, 20 Sep 2002 k.buckley@lancaster.ac.uk wrote:

>
> Hi,
>
> been trying to build R-1.5.1 for som eof our users here.
>
> No probs with gcc-3.2 32-bit installtion, but thought we'd try it with
> the 64-bit just for the crack.
>
> Configuring thus
>
> CC=gcc3 CFLAGS="-m64" CXX=g++3 CXXFLAGS="-m64" F77=g773 FFLAGS="-m64"
> LDFLAGS="-m64 -L/usr/local/packages/gcc-3.2/lib/sparcv9" ./configure
> --prefix=/usr/local/packages/R-1.5.1-64bit
>
> runs OK, however one of the tests (I assume it is a test anyway) fails thus
>
> gcc3 -G  -o ctest.so ansari.o chisqsim.o d2x2xk.o fexact.o kendall.o ks.o  prho.o swilk.o init.o  -L/usr/lib/sparcv9 -L/usr/local/packages/gcc-3.2/lib/sparcv9 -L/usr/local/packages/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.8/3.2/sparcv9 -L/usr/local/packages/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.8/3.2 -L/usr/ccs/bin/sparcv9 -L/usr/ccs/bin -L/usr/ccs/lib/sparcv9 -L/usr/ccs/lib -L/usr/local/packages/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.8/3.2/../../../sparcv9 -L/usr/local/packages/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.8/3.2/../../.. -L/lib/sparcv9 -ldl -ltermcap -lfrtbegin -lg2c -lm -lgcc_s_sparcv9
> ld: fatal: file ansari.o: wrong ELF class: ELFCLASS64
> ld: fatal: File processing errors. No output written to ctest.so
> collect2: ld returned 1 exit status
> *** Error code 1
> make: Fatal error: Command failed for target `ctest.so'
> Current working directory /usr/local/packages/src/R-1.5.1/src/library/ctest/src
>
>
> It appears the make process is not passing the "-m64" flag down from
> the LDFLAGS variable as set when running configure.
>
> I have tried a compilation by hand adding this flag to the link stage
> and the above compilation goes completes.
>
>
> Hoping this of use,
>
>
> --
> Regards,
>
> ----------------------------------------------------------------------
> *  Kevin M. Buckley              e-mail: K.Buckley@lancaster.ac.uk   *
> *                                                                    *
> *  Systems Administrator                                             *
> *  Computer Centre                                                   *
> *  Lancaster University          Voice:  +44 (0) 1524 5 93718        *
> *  LANCASTER. LA1 4YW            Fax  :  +44 (0) 1524 5 25113        *
> *  England.                                                          *
> *                                                                    *
> *  My PC runs Linux/GNU, you still computing the Bill Gate$' way ?   *
> ----------------------------------------------------------------------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 14 15:22:05 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Oct 2002 16:22:05 +0200
Subject: possible memory leak in 1.6 (PR#2160)
In-Reply-To: <200210141401.QAA11994@pubhealth.ku.dk>
References: <200210141401.QAA11994@pubhealth.ku.dk>
Message-ID: <x2y9912j8y.fsf@biostat.ku.dk>

socher@stat.uni-muenchen.de writes:

> Full_Name: Anne-Laure Boulesteix
> Version: 1.6.0
> OS: Linux
> Submission from: (NULL) (141.84.161.156)
> 
> 
> Hi,
> 
> I noticed the following problem with 1.6.0 (which was not present in 1.5.1): 
> 
> I work with very large datasets and encountered a problem with memory
> allocation,
> (probably a memory leak).  I wrote a programm with a loop.  In this loop in
> each
> iteration I create a  very large matrix and assign it to a variable which
> is the SAME for all the iterations.  So at each round the new matrix overwrites
> the old  matrix.  In 1.5.1  the garbage collector seems to clean up the old
> unused memory.  Unfortunately, in 1.6.0 with each round the memory used by R
> increases until the R process is killed. 
> 
> Is there any way around this?

Example code that would allow someone to reproduce and hunt down the
problem would help. This could be the same issue that Achim Zeileis
reported a few days ago. In that case the current source snapshots may
have it fixed.

Please be specific when you report problems. A broad outline of your
program is not sufficient to let us guess where the problem lies.
We could write a minimal loop which fits your description, but so
could you, and you're much closer to telling whether it is actually
displaying the same problem.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Oct 14 15:24:47 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 14 Oct 2002 10:24:47 -0400
Subject: The class attribute on an environment seems buggy (PR#2159)
References: <200210132334.BAA05124@pubhealth.ku.dk>
 <3DAABFBF.F7AEC086@research.bell-labs.com> <x23cr93z37.fsf@biostat.ku.dk>
Message-ID: <3DAAD3AF.888AFF3@research.bell-labs.com>

Peter Dalgaard BSA wrote:
> 
> John Chambers <jmc@research.bell-labs.com> writes:
> 
> > Would there be a problem with a "fix" in which the environment was left
> > unduplicated, but environments with attributes are "duplicated" by
> > creating a copy of the attribute list, but with the copy still pointing
> > to the same environment?
> >
> > If that is not possible, it would be good to have another datatype that
> > had roughly those properties.  Otherwise, it's difficult to build on
> > this datatype in designing new classes.
> >
> > (The same issue applies to other types, such as external pointers.)
> 
> I've been wrapping such environments in lists, as in
> 
> > tclVar
> function (init = "")
> {
>     n <- evalq(TclVarCount <- TclVarCount + 1, .TkRoot$env)
>     name <- paste("RTcl", n, sep = "")
>     l <- list(env = new.env())
>     assign(name, NULL, envir = l$env)
>     reg.finalizer(l$env, function(env) tkcmd("unset", ls(env)))
>     class(l) <- "tclVar"
>     tclvalue(l) <- init
>     l
> }
> 
> where the list(env = new.env()) construct is to avoid sticking a class
> directly on "env".
> 
> What you're suggesting would seem to have the same effect, i.e. the
> environment gets effectively embedded in a structure on which you can
> set attributes. It does sound like it could work.

For class-related work, embedding in a list (yes, I do that too) has
somewhat the wrong message, because now the object appears to extend
"list", whereas the intended model is that it extends "environment".

The distinction isn't all academic, because one would like to avoid
list-style computations for "[", etc, which are pretty much guaranteed
to cause trouble.

> 
> I'm just a little worried whether it would be clear enough to the end
> user what is going on, or whether we'd just be compounding problems of
> duplications that don't duplicate...

My personal need is for something that acts as a reference (aka
database, object table, etc.)  The understanding is that setting named
elements in this object works as for a reference--all copies see the
changes.  If the object can otherwise behave in standard "S language"
semantics, programming will be more straightforward.

For now, I use a list containing an environment, but eventually
something more direct will likely be needed.

> 
> BTW, this was never a bug...

OK, but as Henrik's mail suggested, users get unpleasant suprises from
trying to treat environments as ordinary objects.

> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct 14 15:32:06 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 14 Oct 2002 07:32:06 -0700 (PDT)
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.44.0210120745400.1901-100000@nokomis2.stat.umn.edu>
Message-ID: <Pine.A41.4.44.0210140659330.71008-100000@homer07.u.washington.edu>

On Sat, 12 Oct 2002, Luke Tierney wrote:

>
> I wonder if there is something we could add to the QA tools that could
> have picked this up.
>

valgrind will do this (under Linux only).  I just tried it and got

==6195== 151040 bytes in 295 blocks are definitely lost in loss record 49
of 50
==6195==    at 0x400434EB: malloc (vg_clientfuncs.c:100)
==6195==    by 0x8091BB0: R_AllocStringBuffer (deparse.c:150)
==6195==    by 0x8093501: print2buff (deparse.c:940)
==6195==    by 0x8092760: deparse2buff (deparse.c:560)

but
==6195== 12341268 bytes in 6183 blocks are still reachable in loss record
50 of 50
==6195==    at 0x400434EB: malloc (vg_clientfuncs.c:100)
==6195==    by 0x80D0131: GetNewPage (memory.c:552)
==6195==    by 0x80D3188: Rf_allocVector (memory.c:1731)
==6195==    by 0x80D2ECB: Rf_allocString (memory.c:1622)
==6195==

showing that it can distinguish memory leaks from memory that just hasn't
been freed.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct 14 15:34:24 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 14 Oct 2002 07:34:24 -0700 (PDT)
Subject: possible memory leak in 1.6 (PR#2160)
In-Reply-To: <200210141401.QAA11994@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210140732190.43878-100000@homer16.u.washington.edu>

On Mon, 14 Oct 2002 socher@stat.uni-muenchen.de wrote:

> Hi,
>
> I noticed the following problem with 1.6.0 (which was not present in 1.5.1):
>
> I work with very large datasets and encountered a problem with memory
> allocation,
> (probably a memory leak).  I wrote a programm with a loop.  In this loop in
> each
> iteration I create a  very large matrix and assign it to a variable which
> is the SAME for all the iterations.  So at each round the new matrix overwrites
> the old  matrix.  In 1.5.1  the garbage collector seems to clean up the old
> unused memory.  Unfortunately, in 1.6.0 with each round the memory used by R
> increases until the R process is killed.

Yes, it's a bug (though it isn't the matrix that leaks).  It's
probably been fixed.

You could download the current `patched' version and try that.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 14 16:11:07 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 14 Oct 2002 16:11:07 +0100 (BST)
Subject: growing process size in simulation
In-Reply-To: <Pine.A41.4.44.0210140659330.71008-100000@homer07.u.washington.edu>
Message-ID: <Pine.LNX.4.31.0210141610500.1801-100000@gannet.stats>

Reference to valgrind, please?

On Mon, 14 Oct 2002, Thomas Lumley wrote:

> On Sat, 12 Oct 2002, Luke Tierney wrote:
>
> >
> > I wonder if there is something we could add to the QA tools that could
> > have picked this up.
> >
>
> valgrind will do this (under Linux only).  I just tried it and got
>
> ==6195== 151040 bytes in 295 blocks are definitely lost in loss record 49
> of 50
> ==6195==    at 0x400434EB: malloc (vg_clientfuncs.c:100)
> ==6195==    by 0x8091BB0: R_AllocStringBuffer (deparse.c:150)
> ==6195==    by 0x8093501: print2buff (deparse.c:940)
> ==6195==    by 0x8092760: deparse2buff (deparse.c:560)
>
> but
> ==6195== 12341268 bytes in 6183 blocks are still reachable in loss record
> 50 of 50
> ==6195==    at 0x400434EB: malloc (vg_clientfuncs.c:100)
> ==6195==    by 0x80D0131: GetNewPage (memory.c:552)
> ==6195==    by 0x80D3188: Rf_allocVector (memory.c:1731)
> ==6195==    by 0x80D2ECB: Rf_allocString (memory.c:1622)
> ==6195==
>
> showing that it can distinguish memory leaks from memory that just hasn't
> been freed.
>
> 	-thomas
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gte810u@prism.gatech.edu  Mon Oct 14 16:38:39 2002
From: gte810u@prism.gatech.edu (David Bauer)
Date: Mon, 14 Oct 2002 11:38:39 -0400
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.31.0210141610500.1801-100000@gannet.stats>
References: <Pine.A41.4.44.0210140659330.71008-100000@homer07.u.washington.edu>
Message-ID: <5.1.1.5.2.20021014113640.0227be20@pop.prism.gatech.edu>


>Reference to valgrind, please?

http://developer.kde.org/~sewardj/

It is an x86/Linux only x86 to x86 emulator which can do memory checking, 
cache profiling, etc.


David Bauer

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct 14 18:52:26 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 14 Oct 2002 10:52:26 -0700 (PDT)
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.31.0210141610500.1801-100000@gannet.stats>
Message-ID: <Pine.A41.4.44.0210141049160.70582-100000@homer22.u.washington.edu>

On Mon, 14 Oct 2002 ripley@stats.ox.ac.uk wrote:

> Reference to valgrind, please?
>
 http://developer.kde.org/~sewardj/

It's a memory-management debugger -- it tracks all memory allocations,
reads and writes to find accesses to unitialised or invalid memory and
memory leaks.

Valgrind works only under Linux and of course imposes a huge speed
penalty, but it seems to work quite well.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kai.makisara@metla.fi  Tue Oct 15 13:45:21 2002
From: kai.makisara@metla.fi (kai.makisara@metla.fi)
Date: Tue, 15 Oct 2002 14:45:21 +0200 (MET DST)
Subject: Core dump with a 64-bit system (PR#2165)
Message-ID: <200210151245.OAA19646@pubhealth.ku.dk>

Full_Name: Kai Mkisara
Version: 1.6.0
OS: Tru64
Submission from: (NULL) (128.214.53.92)


Any command given in terminal window dumps core if readline is compiled in.
The reason is a bug in pushReadline: the first call pushes the function below
the stack. The following patch solves the problem:

--- R-1.6.0/src/unix/sys-std.c~ Sun Aug 25 12:51:20 2002
+++ R-1.6.0/src/unix/sys-std.c  Tue Oct 15 14:43:00 2002
@@ -389,10 +389,10 @@
 void
 pushReadline(char *prompt, rl_vcpfunc_t f)
 {
-   if(ReadlineStack.current >= ReadlineStack.max) {
+   if(ReadlineStack.current >= ReadlineStack.max - 1) {
      warning("An unusual circumstance has arisen in the nesting of readline
input. Please report using bug.report()");
    } else
-     ReadlineStack.fun[ReadlineStack.current++] = f; 
+     ReadlineStack.fun[++ReadlineStack.current] = f; 
 
    rl_callback_handler_install(prompt, f);
 }

In a 32-bit system the first call overwrites only ReadlineStack.max and this is
probably never noticed. In a 64-bit system the results are more interesting :-)

             Kai



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Tue Oct 15 19:44:01 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Tue, 15 Oct 2002 14:44:01 -0400
Subject: Typos in help page for model.extract?
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC7BA@usrymx10.merck.com>

[R-1.6.0]

In the "Details" section of help page for model.extract, shouldn't the
references to model.frame() be model.extract()?

Regards,
Andy


------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jfox@mcmaster.ca  Tue Oct 15 21:57:37 2002
From: jfox@mcmaster.ca (John Fox)
Date: Tue, 15 Oct 2002 16:57:37 -0400
Subject: Sweave (PR#2142)
In-Reply-To: <15786.31304.333618.232936@galadriel.ci.tuwien.ac.at>
References: <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>
 <15782.33889.962443.84196@galadriel.ci.tuwien.ac.at>
 <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>
Message-ID: <5.1.0.14.2.20021015165314.027a3f98@mcmail.cis.mcmaster.ca>

Dear Friedrich et al.,

Why not make the default location for installing the Windows version of R 
"c:\R" rather than "c:\Program Files\R", thus avoiding this and other 
potential problems? Perhaps there's some consideration of which I'm unaware.

Regards,
  John

At 10:03 AM 10/14/2002 +0200, Friedrich.Leisch@ci.tuwien.ac.at wrote:
> >>>>> On Fri, 11 Oct 2002 15:35:38 +0100,
> >>>>> Christophe Declercq (CD) wrote:
>
>   > Thanks, Fritz, for your answer.
>   >> De : Friedrich Leisch [mailto:leisch@galadriel.ci.tuwien.ac.at]
>   >> [...]
>   >> The path is correct (I want to have Sweave.sty in
>   >> $R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
>   >> does not get installed properly when builddir != srcdir. This has been
>   >> fixed in both the devel and patched version of R.
>
>   > Yes, but  'file.path(R.home(), "share", "texmf", "Sweave")' on my 
> MS-Windows
>   > box gives "C:\\R\\RW1060/share/texmf/Sweave".
>
>   > With that, you get '\usepackage{C:RRW1060/share/texmf/Sweave}' in the tex
>   > file. The problem seems to be with the 'R.home()' output on MS-Windows.
>
>   > 'file.path(.path.package("tools"), "Sweave", "Sweave")' was giving
>   > "C:/R/RW1060/library/tools/Sweave/Sweave" which is OK for pdflatex.
>
>   > Anyway, thanks a lot for Sweave which is really great (for the 
> moment, as I
>   > need it working, I have just put back the old stylepath code in tools).
>
>I commited a fix to the patched version of R that translates all
>backslashes to slashes on windows. This now works for me (on Windows
>XP) if the path to R_HOME contains no spaces. For installations in
>directories like "Program Files" I still have the following problem: I
>can either use
>
>         \usepackage{c:/progra~1/rw1060/share/texmf/Sweave}
>
>or
>
>         \usepackage{c:/program files/rw1060/share/texmf/Sweave}
>
>both of which do *NOT* work with my latex installation
>(miktex). Unless somedy has a good suggestion how to solve the problem
>my recoomendation is to either install R into a path without spaces or
>copy Sweave.sty to some place in your TEXINPUTS path and use
>stylepath=FALSE when calling Sweave.
>
>
>Fritz
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox@mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 15 23:47:52 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Oct 2002 00:47:52 +0200
Subject: Core dump with a 64-bit system (PR#2165)
In-Reply-To: <200210151245.OAA19646@pubhealth.ku.dk>
References: <200210151245.OAA19646@pubhealth.ku.dk>
Message-ID: <x21y6rwc87.fsf@biostat.ku.dk>

kai.makisara@metla.fi writes:

> Any command given in terminal window dumps core if readline is compiled in.
> The reason is a bug in pushReadline: the first call pushes the function below
> the stack. The following patch solves the problem:

Patch inserted. Thanks.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Tue Oct 15 23:52:19 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Tue, 15 Oct 2002 18:52:19 -0400
Subject: cut() on NA gives 0 when labels=F
Message-ID: <15788.39971.929286.111207@gargle.gargle.HOWL>

Hi all,

I just noticed this odd behavior in R 1.5.1 (on Solaris 2.6):

  R> cut(c(2,NA), 1:5, labels=F)
     [1] 1 0

Is it a bug?  I would have expected "1 NA" (better for indexing), and also the
S-Plus analog is:

  S-Plus> as.integer(cut(c(2,NA), 1:5))
     [1]  1 NA

Apologies ahead of time if it's already fixed in R 1.6.0 and/or already known
(perhaps related to PR#1694?).  If others agree it's a bug I'll submit it.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Oct 16 01:14:52 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 15 Oct 2002 17:14:52 -0700 (PDT)
Subject: cut() on NA gives 0 when labels=F
In-Reply-To: <15788.39971.929286.111207@gargle.gargle.HOWL>
Message-ID: <Pine.A41.4.44.0210151714220.123024-100000@homer39.u.washington.edu>

On Tue, 15 Oct 2002, David Brahm wrote:

> Apologies ahead of time if it's already fixed in R 1.6.0 and/or already known
> (perhaps related to PR#1694?).  If others agree it's a bug I'll submit it.

In R 1.6.0
> cut(c(2,NA), 1:5, labels=FALSE)
[1]  1 NA

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lina@u.washington.edu  Wed Oct 16 07:36:09 2002
From: lina@u.washington.edu (lina@u.washington.edu)
Date: Wed, 16 Oct 2002 08:36:09 +0200 (MET DST)
Subject: documentation: Missing paranthesis in reshape.Rd (PR#2170)
Message-ID: <200210160636.IAA23901@pubhealth.ku.dk>

Full_Name: Michale Na Li
Version: 1.6.0
OS: i386-linux
Submission from: (NULL) (140.142.172.141)



In src/library/base/man/reshape.Rd, one paranthesis is missing, here is the
patch. 

*** reshape.Rd.old      2002-10-15 23:32:25.000000000 -0700
--- reshape.Rd  2002-10-15 23:32:35.000000000 -0700
***************
*** 12,18 ****
      idvar = "id", ids = 1:NROW(data),
      times = seq(length = length(varying[[1]])), 
      drop = NULL, direction, fix.row.names = TRUE,
!     split=list(regexp="\\.",include=FALSE)
  }
  %- maybe also `usage' for other objects documented here.
  \arguments{
--- 12,18 ----
      idvar = "id", ids = 1:NROW(data),
      times = seq(length = length(varying[[1]])), 
      drop = NULL, direction, fix.row.names = TRUE,
!     split=list(regexp="\\.",include=FALSE))
  }
  %- maybe also `usage' for other objects documented here.
  \arguments{




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 12:19:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 12:19:21 +0100 (BST)
Subject: submitting binary windows packages
In-Reply-To: <D7A3CFD7825BD6119B880002A58F06C20149D00A@groexmb02.pfizer.com>
Message-ID: <Pine.LNX.4.31.0210161209220.1261-100000@gannet.stats>

It's called patience ... updates were done on October 7 and several times
since. I was away for four weeks (and Kurt and others knew that).

We've experimented with allowing other people to put up Windows
pre-compiled packages, but security concerns are overwhelming.  The
distribution is done under Unix/Linux where we can't virus-check.  I build
on just one Windows machine that has aggressive virus-checking and very
little software installed: I do not use my regular desktop machine (which
is usually in Linux anyway).

Ideally I would like to pass the task on to someone who has suitable
infrastructure (which includes a machine with fast and reliable internet
access from which CRAN can rsync).  The rate of change has got out of
control (at least 50 changes per month, it seems).  About 90% of the
packages will build automatically (under Windows, not cross-compiling)
but the remainder cause a lot of extra work.

On Tue, 1 Oct 2002, Warnes, Gregory R wrote:

>
> Hi All,
>
> The windows binary packages in
> http://cran.r-project.org/bin/windows/contrib/ are out of date for my
> packages, and perhaps for others as well.  I've now received several email
> messages commenting on this fact.
>
> Since I now have a Windows 2K machine with the proper build environment, I
> can create the windows binary packages myself.  What is the proper mechanism
> for getting a windows binary package placed there?
>
> This topic is not documented in the R Windows FAQ or anywhere else I can
> find.   Kurt has indicated that the windows area is mirrored from one of
> Brian's machines, but my query to Brian has not been answered yet.  (Perhaps
> he is taking a well-deserved break).  Does someone else know the proper
> procedure?
>
> If there is not already, can we arrange to set up an automated build
> procedure so that a Windows binary package is created automatically when the
> source package is uploaded?  Or some alternative?
>
> Greg
>
>
>
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 12:27:16 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 12:27:16 +0100 (BST)
Subject: install.packages warning
In-Reply-To: <Pine.LNX.4.44.0210011409070.19662-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.31.0210161223570.1261-100000@gannet.stats>

On Tue, 1 Oct 2002, Ben Bolker wrote:

>
>   Hear, hear; I've often had to reassure people about this warning.  (The
> reason the scary "Warning message" words appear is because
> install.packages() uses the warning() function.)  Is the warning really
> necessary?

Yes.  Why can't people call install.packages() correctly?  It has two
required arguments.  If R_LIBS is set, you do want to think hard about
where to install, and the warning is useful.  Maybe if there is only one
library, the warning could be suppressed.

And if they are doing it on Windows, they can use a menu item to generate
a correct call for them....

>
> On Tue, 1 Oct 2002, Wright, Kevin wrote:
>
> >
> > I typically install packages from a local site:
> >
> > > install.packages("x:/tpm/tpm.zip",CRAN=NULL)
> > updating HTML package descriptions
> > Warning message:
> > argument `lib' is missing: using C:/PROGRA~1/R/RW1051/library in:
> > install.packages("x:/tpm/tpm.zip", CRAN = NULL)
> >
> > The warning doesn't bother me, but I've had to help other people who see
> > "warning" and decide to panic.
> >
> > May I suggest changing "Warning message" to something less scary, for
> > example "Note:".

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Oct 16 16:40:21 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 16 Oct 2002 11:40:21 -0400
Subject: R-patched make warnings on Mandrake 9.0
Message-ID: <3DAD8865.356D0EA6@bank-banque-canada.ca>

I seem to recall a discussion about this a day or two ago, but I believe it was
on Solaris. On Linux, Mandrake 9.0,  when I make R-patched_2002-10-16 with gcc
3.2 I get lots of warnings like:
...
gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES 
-mieee-fp  -fPIC  -g -O2 -c pacf.c -o pacf.o
cc1: warning: changing search order for system directory 
"/usr/local/include"
cc1: warning:   as it has already been specified as a non-system directory
gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES 
-mieee-fp  -fPIC  -g -O2 -c qr.c -o qr.o
cc1: warning: changing search order for system directory 
"/usr/local/include"
cc1: warning:   as it has already been specified as a non-system directory
...

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 17:37:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 17:37:44 +0100 (BST)
Subject: R-patched make warnings on Mandrake 9.0
In-Reply-To: <3DAD8865.356D0EA6@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0210161734420.1692-100000@gannet.stats>

This always happens with gcc 3.2, and is harmless.

You can avoid most of them (but not in the GNOME module) by setting
CPPFLAGS= (nothing).

I thought I had put something about this in R-admin.texi, but apparently
did not get it there for 1.6.0.

On Wed, 16 Oct 2002, Paul Gilbert wrote:

> I seem to recall a discussion about this a day or two ago, but I believe it was
> on Solaris. On Linux, Mandrake 9.0,  when I make R-patched_2002-10-16 with gcc
> 3.2 I get lots of warnings like:
> ...
> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
> -mieee-fp  -fPIC  -g -O2 -c pacf.c -o pacf.o
> cc1: warning: changing search order for system directory
> "/usr/local/include"
> cc1: warning:   as it has already been specified as a non-system directory
> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
> -mieee-fp  -fPIC  -g -O2 -c qr.c -o qr.o
> cc1: warning: changing search order for system directory
> "/usr/local/include"
> cc1: warning:   as it has already been specified as a non-system directory
> ...
>
> Paul Gilbert
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@hivnet.ubc.ca  Wed Oct 16 17:46:12 2002
From: jerome@hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Wed, 16 Oct 2002 18:46:12 +0200 (MET DST)
Subject: xlim in plot.survfit() [with a discussion on "..."] (PR#2173)
Message-ID: <200210161646.SAA00608@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.6.0
OS: RedHat 7.2
Submission from: (NULL) (24.83.203.63)



Hello,

I am trying to draw a legend on top of survival curves using
plot.survfit(). As in the example below, I would like to
specify a large interval for the x-axis. I can achieve such
result using "xlim". However, an error occurs if I use the
legend.pos and legend.text parameters as well.

  library(survival)
  TIME  <- Surv(c(23,52,12,56,23,21),c(T,F,T,F,F,T))

  par(mfrow=c(2,1))
  plot(survfit(TIME~1),conf.int=F,xlim=c(0,100),
  main="xlim=c(0,100) without legend")
  plot(survfit(TIME~1),conf.int=F,xlim=c(0,100),
  legend.pos=0,legend.text="Survival Curve",
  main="xlim=c(0,100) with legend (ERROR!)")

It looks like plot.survfit() attempts to send the "xlim"
parameter to legend(), which does not accept "xlim" as a
parameter. Hence, an error occurs and the legend is not
plotted.

I believe the problem is due to the fact that the
additional parameters "..." that are supplied to
plot.survfit() do not necessarily match the range of
possible parameters for both plot() and legend(). In my
case, "xlim" is matched by plot(), but not by legend().

I know how to plot the legend by directly using the
legend() function. However, in order to correct the
small problem with plot.survfit(), I would suggest that
plot.survfit() be modified to perform an exact match of
the parameters in "..." onto legend(). Perhaps there is
already a function to perform such a task. If not, I
believe it could provide a practical solution for
dealing with "..." and subfunctions that do not have a
built-in "..." parameter. That's just a suggestion,
though.

Thank you very much!
Jerome Asselin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Wed Oct 16 18:12:00 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 16 Oct 2002 10:12:00 -0700
Subject: R-patched make warnings on Mandrake 9.0
In-Reply-To: <Pine.LNX.4.31.0210161734420.1692-100000@gannet.stats>
Message-ID: <62676906-E12A-11D6-A9D8-000393860F3C@stat.ucla.edu>

Harmless but annoying. It's gone in gcc-3.3.

On Wednesday, October 16, 2002, at 09:37 AM, <ripley@stats.ox.ac.uk>  
wrote:

> This always happens with gcc 3.2, and is harmless.
>
> You can avoid most of them (but not in the GNOME module) by setting
> CPPFLAGS= (nothing).
>
> I thought I had put something about this in R-admin.texi, but  
> apparently
> did not get it there for 1.6.0.
>
> On Wed, 16 Oct 2002, Paul Gilbert wrote:
>
>> I seem to recall a discussion about this a day or two ago, but I  
>> believe it was
>> on Solaris. On Linux, Mandrake 9.0,  when I make R-patched_2002-10-16  
>> with gcc
>> 3.2 I get lots of warnings like:
>> ...
>> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
>> -mieee-fp  -fPIC  -g -O2 -c pacf.c -o pacf.o
>> cc1: warning: changing search order for system directory
>> "/usr/local/include"
>> cc1: warning:   as it has already been specified as a non-system  
>> directory
>> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
>> -mieee-fp  -fPIC  -g -O2 -c qr.c -o qr.o
>> cc1: warning: changing search order for system directory
>> "/usr/local/include"
>> cc1: warning:   as it has already been specified as a non-system  
>> directory
>> ...
>>
>> Paul Gilbert
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
>> .-.-.-.-.-
>> r-devel mailing list -- Read  
>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To:  
>> r-devel-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._. 
>> _._._._._
>>
>
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 18:20:07 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 18:20:07 +0100 (BST)
Subject: R-patched make warnings on Mandrake 9.0
In-Reply-To: <62676906-E12A-11D6-A9D8-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.LNX.4.31.0210161818570.1830-100000@gannet.stats>

On Wed, 16 Oct 2002, Jan de Leeuw wrote:

> Harmless but annoying. It's gone in gcc-3.3.

That's not released yet according to gcc.gnu.org!  gcc alphas are subject
to change.

> On Wednesday, October 16, 2002, at 09:37 AM, <ripley@stats.ox.ac.uk>
> wrote:
>
> > This always happens with gcc 3.2, and is harmless.
> >
> > You can avoid most of them (but not in the GNOME module) by setting
> > CPPFLAGS= (nothing).
> >
> > I thought I had put something about this in R-admin.texi, but
> > apparently
> > did not get it there for 1.6.0.
> >
> > On Wed, 16 Oct 2002, Paul Gilbert wrote:
> >
> >> I seem to recall a discussion about this a day or two ago, but I
> >> believe it was
> >> on Solaris. On Linux, Mandrake 9.0,  when I make R-patched_2002-10-16
> >> with gcc
> >> 3.2 I get lots of warnings like:
> >> ...
> >> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
> >> -mieee-fp  -fPIC  -g -O2 -c pacf.c -o pacf.o
> >> cc1: warning: changing search order for system directory
> >> "/usr/local/include"
> >> cc1: warning:   as it has already been specified as a non-system
> >> directory
> >> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
> >> -mieee-fp  -fPIC  -g -O2 -c qr.c -o qr.o
> >> cc1: warning: changing search order for system directory
> >> "/usr/local/include"
> >> cc1: warning:   as it has already been specified as a non-system
> >> directory
> >> ...
> >>
> >> Paul Gilbert
> >> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> >> .-.-.-.-.-
> >> r-devel mailing list -- Read
> >> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> >> Send "info", "help", or "[un]subscribe"
> >> (in the "body", not the subject !)  To:
> >> r-devel-request@stat.math.ethz.ch
> >> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> >> _._._._._
> >>
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > .-.-.-.-.-
> > r-devel mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
> > r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > ._._._._
> >
> >
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>
> ------------------------------------------------------------------------
> -------------------------
>            No matter where you go, there you are. --- Buckaroo Banzai
>                     http://gifi.stat.ucla.edu/sounds/nomatter.au
>
> ------------------------------------------------------------------------
> -------------------------
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.c.rougier@durham.ac.uk  Wed Oct 16 18:21:00 2002
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Wed, 16 Oct 2002 19:21:00 +0200 (MET DST)
Subject: Documentation for .Renviron (PR#2175)
Message-ID: <200210161721.TAA00766@pubhealth.ku.dk>

Hi everyone,

Two minor points about ?.Renviron.

1) If R_ENVIRON is not set then R defaults to `${R_HOME}/etc/Renviron',
not `${R_HOME}/etc/Renviron.site' as stated.

2) In the details, there is a missing "way" in "`value' is processed
in a similar to a Unix shell."

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Oct 16 19:31:10 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 16 Oct 2002 20:31:10 +0200 (MET DST)
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
Message-ID: <200210161831.UAA01076@pubhealth.ku.dk>

There is an incompatibility between R's configure/build process, and gcc 3.2.0 (and maybe earlier).
Gcc 3.2.0 includes -I/usr/local/include by default, on my system (default configuration), and cpp0
issues a warning when this flag is issued additionally by the user (= R's configure). This warning
ends up in the dependency sections of the Makefile that are generated "automagically". The 1st
occurrence is line 105 of src/appl/Makefile .

The only way around it that I found, other than removing all -I/usr/local/include in all Makefiles is to manually add
-Wp,-w, a gcc/cpp argument that suppresses all cpp warnings. It also has the effect of not aborting
a compilation as soon as a specified header file is *not* found :(
If you decide to leave -I/usr/local/include and add -Wp,-w for gcc 3 compilers, I would suggest
*not* adding -Wp,-w if -fsyntax-only is also given, to not interfere with requested syntax-checking.
(that would probably require to call the compiler from a wrapper script, something I already do.)

Rene Bertin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 21:01:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 21:01:30 +0100 (BST)
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
In-Reply-To: <200210161831.UAA01076@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210162038360.2159-100000@gannet.stats>

This has been discussed on R-devel, and it is definitely not an R bug
as there are workarounds stated in the R-admin manual.

Setting CPPFLAGS= (nothing) does avoid this except in the gnome module. It
was intended to put that explicitly in the R-admin manual for 1.6.0, but
it was not done in time (it is now there for R-patched).

We are told that this is fixed in the alphas of gcc 3.3.  Once it is clear
exactly which versions of gcc are affected we may add a workaround in the
configure script.

On Wed, 16 Oct 2002 rjvbertin@hotmail.com wrote:

> There is an incompatibility between R's configure/build process, and gcc 3.2.0 (and maybe earlier).
> Gcc 3.2.0 includes -I/usr/local/include by default, on my system (default configuration), and cpp0
> issues a warning when this flag is issued additionally by the user (= R's configure). This warning
> ends up in the dependency sections of the Makefile that are generated "automagically". The 1st
> occurrence is line 105 of src/appl/Makefile .
>
> The only way around it that I found, other than removing all -I/usr/local/include in all Makefiles is to manually add
> -Wp,-w, a gcc/cpp argument that suppresses all cpp warnings. It also has the effect of not aborting
> a compilation as soon as a specified header file is *not* found :(
> If you decide to leave -I/usr/local/include and add -Wp,-w for gcc 3 compilers, I would suggest
> *not* adding -Wp,-w if -fsyntax-only is also given, to not interfere with requested syntax-checking.
> (that would probably require to call the compiler from a wrapper script, something I already do.)
>
> Rene Bertin
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Thu Oct 17 10:43:18 2002
From: rjvbertin@hotmail.com (RenE J.V. Bertin)
Date: Thu, 17 Oct 2002 11:43:18 +0200
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
In-Reply-To: <Pine.LNX.4.31.0210162038360.2159-100000@gannet.stats>
References: <200210161831.UAA01076@pubhealth.ku.dk>
 <Pine.LNX.4.31.0210162038360.2159-100000@gannet.stats>
Message-ID: <20021017114318.072cab11.rjvbertin@hotmail.com>

On Wed, 16 Oct 2002 21:01:30 +0100 (BST), <ripley@stats.ox.ac.uk> wrote regarding "Re:
configure/build issue with gcc 3.2.0 (PR#2176)"

8-) This has been discussed on R-devel, and it is definitely not an R bug
8-) as there are workarounds stated in the R-admin manual.

	Really? I have looked around the occurrences of 'gcc', 'cpp' and 'workaround' (none) and '-Wp' (none) in doc/manual/R-admin.pdf, and didn't see anything that looked appropriate. Are we talking about the same issue (not a bug *in* R indeed)?



__oWo________________________________________________
| RenE J.V. Bertin
|  _|~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-|_
|  O]                   LPPA                     [O
|  O]             College de France              [O
|  O] 11, place Marcelin Berthelot, 75005 Paris  [O
|  O]                   France                   [O
|  -|~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-|-

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 17 11:50:29 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 17 Oct 2002 12:50:29 +0200 (MET DST)
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
Message-ID: <200210171050.MAA05494@pubhealth.ku.dk>

On Thu, 17 Oct 2002, RenE J.V. Bertin wrote:

> On Wed, 16 Oct 2002 21:01:30 +0100 (BST), <ripley@stats.ox.ac.uk> wrote regarding "Re:
> configure/build issue with gcc 3.2.0 (PR#2176)"
>
> 8-) This has been discussed on R-devel, and it is definitely not an R bug
> 8-) as there are workarounds stated in the R-admin manual.
>
> 	Really? I have looked around the occurrences of 'gcc', 'cpp' and
'workaround' (none) and '-Wp' (none) in doc/manual/R-admin.pdf,
and didn't see anything that looked appropriate. Are we talking
about the same issue (not a bug *in* R indeed)?

Please do read *all* of my message.  I said that setting CPPFLAGS to empty
solves the problem.  Setting CPPFLAGS appropriately *is* discussed in that
manual, and that's what you neglected to do.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 17 13:34:54 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Oct 2002 14:34:54 +0200
Subject: R-1.6.1beta available
Message-ID: <x2of9t451t.fsf@biostat.ku.dk>

R 1.6.1 has been scheduled for November 1.

We're makin interim beta versions available via

http://cran.us.r-project.org/src/base

(ftp://cran.us.r-project.org/pub/R/src/base used to work, but
apparently FTP access has been disabled)

The filename is R-1.6.1beta_*.tar.gz, where * is the creation date. 

If you want to help ensure that the final 1.6.1 works satisfactorily
on *your* platform, it might be a good idea to make a test build of
the beta and report any errors back (to the r-devel list, not to me
personally, please!).

New versions will be made available each day until the final release,
barring hardware trouble and build script failures.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 17 17:29:36 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 17 Oct 2002 17:29:36 +0100 (BST)
Subject: Documentation for .Renviron (PR#2175)
In-Reply-To: <200210161721.TAA00766@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210171717250.962-100000@gannet.stats>

On Wed, 16 Oct 2002 j.c.rougier@durham.ac.uk wrote:

> Hi everyone,
>
> Two minor points about ?.Renviron.
>
> 1) If R_ENVIRON is not set then R defaults to `${R_HOME}/etc/Renviron',
> not `${R_HOME}/etc/Renviron.site' as stated.

No, it does as it states. See the code fragment

/* try site Renviron: R_ENVIRON, then R_HOME/etc/Renviron.site. */
void process_site_Renviron ()
{
    char buf[PATH_MAX];

    if(process_Renviron(getenv("R_ENVIRON"))) return;
    if(strlen(R_Home) + strlen("/etc/Renviron.site") > PATH_MAX - 1) {
        R_ShowMessage("path to Renviron.site is too long: skipping");
        return;
    }
    sprintf(buf, "%s/etc/Renviron.site", R_Home);
    process_Renviron(buf);
}

in unix/sys-common.c.

The description is inaccurate though: R_HOME/etc/Renviron.site is read
unless R_ENVIRON is set to a valid file.  I've altered the code so that
even if R_ENVIRON is invalid R_HOME/etc/Renviron.site is skipped.


${R_HOME}/etc/Renviron is for R's own use. It gets read whether or not
R_ENVIRON is set.

>
> 2) In the details, there is a missing "way" in "`value' is processed
> in a similar to a Unix shell."

Thanks.

>
> Cheers, Jonathan.
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status =
>  major = 1
>  minor = 6.0
>  year = 2002
>  month = 10
>  day = 01
>  language = R
>
> Search Path:
>  .GlobalEnv, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Oct 17 17:52:56 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 17 Oct 2002 18:52:56 +0200 (MET DST)
Subject: documentation: Missing paranthesis in reshape.Rd (PR#2170)
Message-ID: <200210171652.SAA08775@pubhealth.ku.dk>

>>>>> "Michael" == Michael Na Li <lina@u.washington.edu>
>>>>>     on Wed, 16 Oct 2002 08:36:09 +0200 (MET DST) writes:

    Michael> Full_Name: Michale Na Li
    Michael> Version: 1.6.0
    Michael> OS: i386-linux
    Michael> Submission from: (NULL) (140.142.172.141)


    Michael> In src/library/base/man/reshape.Rd, one paranthesis
    Michael> is missing, here is the patch.

    Michael>  ..........

Thank you, Michael.

I've added that (and many spaces).
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Oct 17 18:58:33 2002
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Thu, 17 Oct 2002 19:58:33 +0200 (MET DST)
Subject: underflow handling in besselK (PR#2179)
Message-ID: <200210171758.TAA09027@pubhealth.ku.dk>


  The besselK() function knows about overflows/underflows internally;
there is a constant xmax_BESS_K in src/nmath/bessel.h (and referred to
only in bessel_k.c), equal to 705.342, which is checked if expon.scaled is
FALSE.  (The equivalent number for bessel_i.c is 709, defined as
exparg_BESS in bessel.h.) However, besselK(x) silently returns +Inf if
x>705.342.  This behavior is reasonable for besselI (where the problem is
an overflow), but seems wrong for besselK (since the problem here is an
*underflow*).  The answer may be as simple as returning 0 rather than +Inf
in this case.
 
  If this is appropriate, the following patch should do the job:

*** bessel_k.c	Thu Oct 17 13:55:55 2002
--- bessel_k.c.dist	Thu Oct 17 13:48:53 2002
***************
*** 216,224 ****
  	    ML_ERROR(ME_RANGE);
  	    *ncalc = *nb;
  	    for(i=0; i < *nb; i++)
! 		if (ex<=0)
! 	   	   bk[i] = ML_POSINF;
! 	        else bk[i]=0.0;
  	    return;
  	}
  	k = 0;
--- 216,222 ----
  	    ML_ERROR(ME_RANGE);
  	    *ncalc = *nb;
  	    for(i=0; i < *nb; i++)
! 		bk[i] = ML_POSINF;
  	    return;
  	}
  	k = 0;

  (By the way, the test for x<=0 seems inappropriate; it looks like x<0 is 
caught elsewhere and that this is really a test for x==0.)

  [Apologies if this is not considered a bug, but my judgment is that it
is -- couldn't be bothered with a round of sending it to r-devel first.]

  Ben Bolker

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ko-Kang@xtra.co.nz  Thu Oct 17 19:37:45 2002
From: Ko-Kang@xtra.co.nz (Ko-Kang Kevin Wang)
Date: Fri, 18 Oct 2002 07:37:45 +1300
Subject: R-1.6.1beta available
References: <x2of9t451t.fsf@biostat.ku.dk>
Message-ID: <003f01c2760c$49f05ed0$a02037d2@kwan022>



----- Original Message -----
From: "Peter Dalgaard BSA" <p.dalgaard@biostat.ku.dk>
To: <r-devel@r-project.org>
Sent: Friday, October 18, 2002 1:34 AM
Subject: R-1.6.1beta available


> R 1.6.1 has been scheduled for November 1.
>
> We're makin interim beta versions available via
>
> http://cran.us.r-project.org/src/base
>
> (ftp://cran.us.r-project.org/pub/R/src/base used to work, but
> apparently FTP access has been disabled)
>
> The filename is R-1.6.1beta_*.tar.gz, where * is the creation date.
>
> If you want to help ensure that the final 1.6.1 works satisfactorily
> on *your* platform, it might be a good idea to make a test build of
> the beta and report any errors back (to the r-devel list, not to me
> personally, please!).
>


I've successfully compiled it (with ActiveTcl 8.4.0.1 too!) on Windows.  The
file size is ~ 21MB.

I didn't realise it was R 1.6.1 beta at first.  I was using rsync to get
r-patched on my 1.6.0,   Then after compilation/installation I realised it
is in fact 1.6.1 Beta.  I'm assuming one can rsync it?  The command I used
was:
   rsync -aC rsync.r-project.org::r-patched ./R-patched

Cheers,

Ko-Kang Wang

------------------------------------------------
Ko-Kang Kevin Wang
Post Graduate PGDipSci Student
Department of Statistics
University of Auckland
New Zealand
www.stat.auckland.ac.nz/~kwan022


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Fri Oct 18 05:17:24 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 17 Oct 2002 21:17:24 -0700
Subject: REventLoop
Message-ID: <8124789E-E250-11D6-A39B-000393860F3C@stat.ucla.edu>

The REventLoop package works well on OS X, it seems, both with Gtk and
Tk. If I understand things correctly (1) it is not supposed to work  
with the
Carbon event loop yet, and (2) if I did then the quartz() graphics  
device
could be brought to the front even if R is started from the terminal,  
and (3)
I could use AquaTk instead of X11 tk.

--- Jan
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 18 08:44:16 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 18 Oct 2002 08:44:16 +0100
Subject: Documentation for .Renviron (PR#2175)
References: <Pine.LNX.4.31.0210171717250.962-100000@gannet.stats>
Message-ID: <3DAFBBD0.8390E17A@durham.ac.uk>

ripley@stats.ox.ac.uk wrote:
> 
> On Wed, 16 Oct 2002 j.c.rougier@durham.ac.uk wrote:
> 
> > Hi everyone,
> >
> > Two minor points about ?.Renviron.
> >
> > 1) If R_ENVIRON is not set then R defaults to `${R_HOME}/etc/Renviron',
> > not `${R_HOME}/etc/Renviron.site' as stated.
> 
> No, it does as it states. See the code fragment
> 
> /* try site Renviron: R_ENVIRON, then R_HOME/etc/Renviron.site. */
> void process_site_Renviron ()
> {
>     char buf[PATH_MAX];
> 
>     if(process_Renviron(getenv("R_ENVIRON"))) return;
>     if(strlen(R_Home) + strlen("/etc/Renviron.site") > PATH_MAX - 1) {
>         R_ShowMessage("path to Renviron.site is too long: skipping");
>         return;
>     }
>     sprintf(buf, "%s/etc/Renviron.site", R_Home);
>     process_Renviron(buf);
> }
> 
> in unix/sys-common.c.
> 
> The description is inaccurate though: R_HOME/etc/Renviron.site is read
> unless R_ENVIRON is set to a valid file.  I've altered the code so that
> even if R_ENVIRON is invalid R_HOME/etc/Renviron.site is skipped.
> 
> ${R_HOME}/etc/Renviron is for R's own use. It gets read whether or not
> R_ENVIRON is set.

Perhaps that could be documented as well.  I drew my inference from
observing that if I did not have a "Renviron.site", then modifications
to "Renviron", which has the same syntax as "Renviron.site", showed up
in R.

Jonathan.


-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Oct 18 08:49:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 18 Oct 2002 08:49:49 +0100 (BST)
Subject: Documentation for .Renviron (PR#2175)
In-Reply-To: <3DAFBBD0.8390E17A@durham.ac.uk>
Message-ID: <Pine.LNX.4.31.0210180846530.2899-100000@gannet.stats>

On Fri, 18 Oct 2002, Jonathan Rougier wrote:

> ripley@stats.ox.ac.uk wrote:
> >
> > On Wed, 16 Oct 2002 j.c.rougier@durham.ac.uk wrote:
> >
> > > Hi everyone,
> > >
> > > Two minor points about ?.Renviron.
> > >
> > > 1) If R_ENVIRON is not set then R defaults to `${R_HOME}/etc/Renviron',
> > > not `${R_HOME}/etc/Renviron.site' as stated.
> >
> > No, it does as it states. See the code fragment
> >
> > /* try site Renviron: R_ENVIRON, then R_HOME/etc/Renviron.site. */
> > void process_site_Renviron ()
> > {
> >     char buf[PATH_MAX];
> >
> >     if(process_Renviron(getenv("R_ENVIRON"))) return;
> >     if(strlen(R_Home) + strlen("/etc/Renviron.site") > PATH_MAX - 1) {
> >         R_ShowMessage("path to Renviron.site is too long: skipping");
> >         return;
> >     }
> >     sprintf(buf, "%s/etc/Renviron.site", R_Home);
> >     process_Renviron(buf);
> > }
> >
> > in unix/sys-common.c.
> >
> > The description is inaccurate though: R_HOME/etc/Renviron.site is read
> > unless R_ENVIRON is set to a valid file.  I've altered the code so that
> > even if R_ENVIRON is invalid R_HOME/etc/Renviron.site is skipped.
> >
> > ${R_HOME}/etc/Renviron is for R's own use. It gets read whether or not
> > R_ENVIRON is set.
>
> Perhaps that could be documented as well.  I drew my inference from
> observing that if I did not have a "Renviron.site", then modifications
> to "Renviron", which has the same syntax as "Renviron.site", showed up
> in R.

It is already documented in R-patched, with the comment that this is only
so for Unix-alikes.

Where did you get the idea that it was safe for you to tinker with
etc/Renviron, though?  Because etc/Renviron is used elsewhere (in the
shell scripts), it is not safe to change.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Fri Oct 18 09:41:14 2002
From: jago@mclink.it (Stefano Iacus)
Date: Fri, 18 Oct 2002 10:41:14 +0200
Subject: REventLoop
In-Reply-To: <8124789E-E250-11D6-A39B-000393860F3C@stat.ucla.edu>
Message-ID: <5C851B5E-E275-11D6-BB1C-003065CC4CB8@mclink.it>

Hopefully yes. This is what I was looking at.

stefano

On Friday, October 18, 2002, at 06:17 AM, Jan de Leeuw wrote:

> The REventLoop package works well on OS X, it seems, both with Gtk and
> Tk. If I understand things correctly (1) it is not supposed to work  
> with the
> Carbon event loop yet, and (2) if I did then the quartz() graphics  
> device
> could be brought to the front even if R is started from the terminal,  
> and (3)
> I could use AquaTk instead of X11 tk.
>
> --- Jan
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical  
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email:  
> deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>   
> ----------------------------------------------------------------------- 
> --------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>   
> ----------------------------------------------------------------------- 
> --------------------------
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Oct 18 12:38:57 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 18 Oct 2002 06:38:57 -0500
Subject: Debian packages of R-1.6.1beta available
In-Reply-To: <x2of9t451t.fsf@biostat.ku.dk>
References: <x2of9t451t.fsf@biostat.ku.dk>
Message-ID: <20021018113857.GA3962@sonny.eddelbuettel.com>

On Thu, Oct 17, 2002 at 02:34:54PM +0200, Peter Dalgaard BSA wrote:
> R 1.6.1 has been scheduled for November 1.
> 
> We're makin interim beta versions available via
> 
> http://cran.us.r-project.org/src/base
>
> (ftp://cran.us.r-project.org/pub/R/src/base used to work, but
> apparently FTP access has been disabled)
> 
> The filename is R-1.6.1beta_*.tar.gz, where * is the creation date.  

Debian packages were uploaded for i386 last evening, and have already been
compiled successfully for six other architectures (alpha arm hppa ia64
powerpc and m68k). The remaining four (m68k mips mipsel sparc) should follow
shortly. 

My i386 release was built on 'testing' (aka 'sarge') and should be
installable on any testing or unstable machine. The other architectures
may require the unstable release.

> If you want to help ensure that the final 1.6.1 works satisfactorily
> on *your* platform, it might be a good idea to make a test build of
> the beta and report any errors back (to the r-devel list, not to me
> personally, please!).

No issues to report.

> New versions will be made available each day until the final release,
> barring hardware trouble and build script failures.

As with the 1.[456].* prereleases, I will probably stick to weekly
snapshots.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rab@nauticom.net  Fri Oct 18 15:21:49 2002
From: rab@nauticom.net (rab@nauticom.net)
Date: Fri, 18 Oct 2002 16:21:49 +0200 (MET DST)
Subject: Chron problem with R 1.6.0 (PR#2181)
Message-ID: <200210181421.QAA15737@pubhealth.ku.dk>

Full_Name: Rick Bilonick
Version: 1.6.0
OS: Linux (RH 7.1)
Submission from: (NULL) (12.4.226.1)


Hi. I'm using Red Hat 7.1 Linux (Intel 586). I installed the 1.6.0 rpm. No
problems were reported. When I tried to load the chron library:

Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library "/usr/lib/R/library/chron/libs/chron.so":
  libR.so: cannot load shared object file: No such file or directory
Error in library(chron) : .First.lib failed

I checked to see if there was a new version of chron but apparently I had the
latest version. I did an "update.packages" any way. It updated a number of
packages but not chron. I haven't noticed any problems with other packages. R
appears to run OK.

I'm not sure why chron.so was missing. I removed the chron package and
re-installed chron. That fixed the problem. But what happened to chron.so when I
installed 1.6.0?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Oct 18 16:16:38 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 18 Oct 2002 17:16:38 +0200 (MET DST)
Subject: underflow handling in besselK (PR#2179)
Message-ID: <200210181516.RAA16040@pubhealth.ku.dk>

>>>>> "Ben" == Ben Bolker <bolker@zoo.ufl.edu>
>>>>>     on Thu, 17 Oct 2002 19:58:33 +0200 (MET DST) writes:

    Ben> The besselK() function knows about overflows/underflows internally;
    Ben> there is a constant xmax_BESS_K in src/nmath/bessel.h (and referred to
    Ben> only in bessel_k.c), equal to 705.342, which is checked if expon.scaled is
    Ben> FALSE.  (The equivalent number for bessel_i.c is 709, defined as
    Ben> exparg_BESS in bessel.h.) However, besselK(x) silently returns +Inf if
    x> 705.342.  This behavior is reasonable for besselI (where the problem is
    Ben> an overflow), but seems wrong for besselK (since the problem here is an
    Ben> *underflow*).  The answer may be as simple as returning 0 rather than +Inf
    Ben> in this case.
 
Yes, indeed.

    Ben> If this is appropriate, the following patch should do the job:
    Ben> 
    Ben> <...........>

"R-patched" now contains something like your patch, namely :

 	if(ex <= 0 || (*ize == 1 && ex > xmax_BESS_K)) {
+	    if(ex <= 0) {
 	    ML_ERROR(ME_RANGE);
-	    *ncalc = *nb;
 	    for(i=0; i < *nb; i++)
 		bk[i] = ML_POSINF;
+	    } else /* would only have underflow */
+		for(i=0; i < *nb; i++)
+		    bk[i] = 0.;
+	    *ncalc = *nb;
 	    return;
 	}

Thank you for the report!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 18 20:26:09 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Oct 2002 21:26:09 +0200
Subject: Chron problem with R 1.6.0 (PR#2181)
In-Reply-To: <200210181421.QAA15737@pubhealth.ku.dk>
References: <200210181421.QAA15737@pubhealth.ku.dk>
Message-ID: <x28z0v8s6m.fsf@biostat.ku.dk>

rab@nauticom.net writes:

> Hi. I'm using Red Hat 7.1 Linux (Intel 586). I installed the 1.6.0 rpm. No
> problems were reported. When I tried to load the chron library:
> 
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library "/usr/lib/R/library/chron/libs/chron.so":
>   libR.so: cannot load shared object file: No such file or directory
> Error in library(chron) : .First.lib failed
> 
> I checked to see if there was a new version of chron but apparently I had the
> latest version. I did an "update.packages" any way. It updated a number of
> packages but not chron. I haven't noticed any problems with other packages. R
> appears to run OK.
> 
> I'm not sure why chron.so was missing. I removed the chron package and
> re-installed chron. That fixed the problem. But what happened to chron.so when I
> installed 1.6.0?

Chron is not part of 1.6.0, so you must have had it before.
Presumably, your old version of R was built with support for R as a
shared library and the new one isn't, so chron.so goes looking for
libR.so on loading, and it isn't there anymore. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Mon Oct 21 06:15:05 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Mon, 21 Oct 2002 07:15:05 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200210210515.g9L5F5V24536@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
--Strange interaction between "Marsaglia-Multicarry" generator and
--"Kinderman-Ramage" 
--method for normal variates. Apparently, switching either of them will help.

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
--A report on lattice
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1745 *
Subject: nlme: failed augPred with NA in an unused column
From: dieter.menne@menne-biomed.de
Date: Fri, 5 Jul 2002 08:32:32 +0200 (MET DST)
--nlme needs an update as suggested in the followup
* PR# 1901 *
Subject: svm seg faults
From: stefan.boehringer+science@uni-bochum.de
Date: Tue, 13 Aug 2002 14:12:17 +0200 (MET DST)
--Seem to be due to gcc `2.96' from RH7.3
* PR# 1974 *
Subject: Rwave installation problem
From: ld-temp-qt3i@pobox.com
Date: Mon, 2 Sep 2002 09:27:36 +0200 (MET DST)
* PR# 1977 *
Subject: Bugs in $RHOME/src/library/SJava/src/makefile.win
From: grimm.hinz@rcc.ch
Date: Tue, 3 Sep 2002 13:13:17 +0200 (MET DST)
* PR# 1978 *
Subject: SJava 0.65, Sample Java files are missing
From: grimm.heinz@rcc.ch
Date: Tue, 3 Sep 2002 13:24:30 +0200 (MET DST)
* PR# 2173 *
Subject: xlim in plot.survfit() [with a discussion on "..."]
From: jerome@hivnet.ubc.ca
Date: Wed, 16 Oct 2002 18:46:11 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000
* PR# 2170 *
Subject: documentation: Missing paranthesis in reshape.Rd
From: lina@u.washington.edu
Date: Wed, 16 Oct 2002 08:36:07 +0200 (MET DST)

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1899 *
Subject: interaction.plot() legend too narrow when mfcol > 2
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 13 Aug 2002 09:36:15 +0200
* PR# 1933 *
Subject: dev2eps() prints ticks with wrong length!
From: Timur Elzhov <Timur.Elzhov@jinr.ru>
Date: Fri, 23 Aug 2002 17:22:15 +0400
--dev.copy problem
* PR# 1972 *
Subject: lattice install
From: robert.king@newcastle.edu.au
Date: Mon, 2 Sep 2002 04:55:41 +0200 (MET DST)
--Perhaps lattice should require(grid) and print a clearer message?
* PR# 2069 *
Subject: split.screen problem
From: cbodily@att.net
Date: Thu, 26 Sep 2002 19:37:40 +0200 (MET DST)

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
--Looks like a conspiracy between a shell problem and an oddity in Tk 8.0 rather
--than an R problem. Good to know for the workaround though. The comment in
--TK_XINCLUDES has since disappeared, at least in Tk 8.3.3.
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
--Tried to use fort77 on RedHat, should likely try g77 instead.
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
--Missing perl??
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
--Probably fixed in 1.5.1
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
--Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000
--Missing info on R version and compilers.
* PR# 1937 *
Subject:  Inconsistent use of Perl? 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Sat, 24 Aug 2002 18:41:09 +0800
--Some packages require Perl v 5.005
* PR# 1995 *
Subject:  2002-09-08 1.6.0 build fails in Recommended 
From: <stvjc@channing.harvard.edu>
Date: Sun, 8 Sep 2002 23:57:39 -0400 (EDT)
--I think this got cleared up...
* PR# 1996 *
Subject:  config checks for --with-gnome need update 
From: <stvjc@channing.harvard.edu>
Date: Mon, 9 Sep 2002 00:08:59 -0400 (EDT)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1891 *
Subject: summary.data.frame with compound elements problem
From: b.rowlingson@lancaster.ac.uk
Date: Fri, 9 Aug 2002 10:35:43 +0200 (MET DST)

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
--The bug is that we get as far as mkCLOSXP before an error is reported

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
--In fact, as.POSIXct is off by 66 years. See
--   http://developer.apple.com/qa/ops/ops23.html
--This is semifixed, but timezones still don't work
* PR# 1991 *
Subject: Mac Save As... bug
From: Tim Cole <tjc1@cam.ac.uk>
Date: Sun, 8 Sep 2002 13:47:00 +0100

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
--The problem is actually deeper than this.
--
--Sometime update() wants to evaluate arguments in the environment where the model
--was defined, as here. 
--
--Sometimes it wants to use the current environment, eg this snippet from MASS 
--ph.fun <- function(data, i) {
--  d <- data
--  d$calls <- d$fitted + d$res[i]
--  coef(update(fit, data=d))
--}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)
* PR# 2091 *
Subject: Scripts not executable
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 2 Oct 2002 00:54:15 +0200 (CEST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
--A crash that is *very* hard to trigger (after several
--minutes of continuous resizing)

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1761 *
Subject: svd() very slow for wide matrix X but not for t(X)
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Tue, 9 Jul 2002 11:39:15 -0400 
--Doesn't happen with the now preferred La.svd.
* PR# 2003 *
Subject: rhome.c: getRHOME() fails, if R is called from SJava
From: grimm.heinz@rcc.ch
Date: Wed, 11 Sep 2002 15:17:53 +0200 (MET DST)
* PR# 2018 *
Subject: missing data in stripchart
From: baron@CATTELL.psych.upenn.edu
Date: Sat, 14 Sep 2002 19:35:32 +0200 (MET DST)
* PR# 2019 *
Subject: p.s. regarding stripchart missing-data report
From: Jonathan Baron <baron@cattell.psych.upenn.edu>
Date: Sat, 14 Sep 2002 13:48:34 -0400
* PR# 2023 *
Subject: mosaicplot enhancements
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Mon, 16 Sep 2002 12:00:26 +0200
* PR# 2033 *
Subject: switch
From: rwehrens@sci.kun.nl
Date: Tue, 17 Sep 2002 23:25:39 +0200 (MET DST)
--not a bug; but worth a documentation hint
* PR# 2038 *
Subject: savehistory directories and quitting R
From: Mark.Bravington@csiro.au
Date: Thu, 19 Sep 2002 14:53:25 +1000
* PR# 2090 *
Subject: Unsolved symbols: meet_ Tcl_EvalObjv
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 2 Oct 2002 00:44:42 +0200 (CEST)
* PR# 2094 *
Subject: Mean and var inconsistency
From: Kevin.Wright@pioneer.com
Date: Wed, 2 Oct 2002 16:19:27 +0200 (MET DST)
* PR# 2116 *
From: "Brian McArdle" <b.mcardle@auckland.ac.nz>
Date: Mon, 7 Oct 2002 15:46:21 +1300
* PR# 2144 *
Subject: Save() with ascii=TRUE may corrupt numeric values
From: "Efthymiou, Nick" <Nick.Efthymiou@schwab.com>
Date: Thu, 10 Oct 2002 14:09:21 -0700
* PR# 2159 *
Subject: The class attribute on an environment seems buggy
From: hb@maths.lth.se
Date: Mon, 14 Oct 2002 01:34:45 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Oct 21 16:42:19 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 21 Oct 2002 17:42:19 +0200
Subject: dist() {"mva" package} bug: treats +/- Inf as NA
Message-ID: <15796.8283.220924.525706@gargle.gargle.HOWL>

Vince Carey found this (thank you!).
Since the fix to the problem is not entirely obvious, I post
this to R-devel as RFC:

help(dist)  says:

 >>  Missing values are allowed, and are excluded from all computations
 >>  involving the rows within which they occur.  If some columns are
 >>  excluded in calculating a Euclidean, Manhattan or Canberra
 >>  distance, the sum is scaled up proportionally to the number of
 >>  columns used. If all pairs are excluded when calculating a
 >>  particular distance, the value is `NA'.

but the C code in  ....../src/library/mva/src/distance.c,
has, e.g. for the Euclidean distance :

    count= 0;
    dist = 0;
    for(j = 0 ; j < nc ; j++) {
	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
	    dev = (x[i1] - x[i2]);
	    dist += dev * dev;
	    count++;
	}
	i1 += nr;
	i2 += nr;
    }
    if(count == 0) return NA_REAL;
    if(count != nc) dist /= ((double)count/nc);
    return sqrt(dist);

where it is clear that "R_FINITE(*)" should in principle be
replaced by  "!ISNAN(*)".

Note however that "Inf - Inf -> NaN" and e.g the canberra metric
has more ways to get "NaN".

The current code drops all pairs with an +-Inf in it.
I would be inclined to really replace
	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
by
	if(!ISNAN(x[i1])   && !ISNAN(x[i2])) {

for all metrics -- for R-patched.

But I'd also see reasons where we'd want to be smarter/different
than that. One possibility would be to drop the pair (as
currently) also when both are not finite, 
for "binary" to signal an error for +- Inf,
and for "Canberra" :
    Of course,  d =  |x - y| / |x + y| 
    will be 1 , when one of {x,y} is infinite.
This could be considered the desired answser, or also
we may give a warning in any case.

Opinions?


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 21 17:44:53 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 21 Oct 2002 17:44:53 +0100 (BST)
Subject: dist() {"mva" package} bug: treats +/- Inf as NA
In-Reply-To: <15796.8283.220924.525706@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0210211738270.28813-100000@gannet.stats>

I think this is definitely better left as is (and definitely so for
1.6.1), perhaps documenting the fact.  What is done seems quite sensible
to me: you really can't have infinite values in an L_2 or L_1 space, and
so Euclidean and L_1 (= Manhattan) distances are not defined.

One could argue for just one infinity point, with zero distance between
infinity points and infinite to all finite points, for example (and NA to
missing values).  It really isn't just one answer.

On Mon, 21 Oct 2002, Martin Maechler wrote:

> Vince Carey found this (thank you!).
> Since the fix to the problem is not entirely obvious, I post
> this to R-devel as RFC:
>
> help(dist)  says:
>
>  >>  Missing values are allowed, and are excluded from all computations
>  >>  involving the rows within which they occur.  If some columns are
>  >>  excluded in calculating a Euclidean, Manhattan or Canberra
>  >>  distance, the sum is scaled up proportionally to the number of
>  >>  columns used. If all pairs are excluded when calculating a
>  >>  particular distance, the value is `NA'.
>
> but the C code in  ....../src/library/mva/src/distance.c,
> has, e.g. for the Euclidean distance :
>
>     count= 0;
>     dist = 0;
>     for(j = 0 ; j < nc ; j++) {
> 	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
> 	    dev = (x[i1] - x[i2]);
> 	    dist += dev * dev;
> 	    count++;
> 	}
> 	i1 += nr;
> 	i2 += nr;
>     }
>     if(count == 0) return NA_REAL;
>     if(count != nc) dist /= ((double)count/nc);
>     return sqrt(dist);
>
> where it is clear that "R_FINITE(*)" should in principle be
> replaced by  "!ISNAN(*)".
>
> Note however that "Inf - Inf -> NaN" and e.g the canberra metric
> has more ways to get "NaN".
>
> The current code drops all pairs with an +-Inf in it.
> I would be inclined to really replace
> 	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
> by
> 	if(!ISNAN(x[i1])   && !ISNAN(x[i2])) {
>
> for all metrics -- for R-patched.
>
> But I'd also see reasons where we'd want to be smarter/different
> than that. One possibility would be to drop the pair (as
> currently) also when both are not finite,
> for "binary" to signal an error for +- Inf,
> and for "Canberra" :
>     Of course,  d =  |x - y| / |x + y|
>     will be 1 , when one of {x,y} is infinite.
> This could be considered the desired answser, or also
> we may give a warning in any case.
>
> Opinions?
>
>
> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 21 21:24:45 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 21 Oct 2002 21:24:45 +0100 (GMT Daylight Time)
Subject: RFC: Loading packages at startup
Message-ID: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>

I've been kicking the following idea around for a while, and am now
proposing to put some version into 1.7.0.  I'd be interested in
comments on the desirability and the design, before I start writing
any code.

S4 introduced a file .S.chapters which can contain a list of S
chapters (equivalent to R packages) to be loaded on start-up.  This
was the germ of this proposal.

Proposal:

Extend the initialization as described in Startup.Rd by having
optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
the latter in the starting directory or failing that the user's home
directory. Each would contain a list of packages, one per line, to be
loaded when R is started, in the order in the files.

Some details:

1) I think the packages should be loaded before .Rprofile and .RData
   are processed, and R_HOME/etc/Rpackages.site before .Rpackages.
   This can be argued, and the S4 parallel would seem to be to load
   packages after S.init (the nearest it has to Rprofile).  But we
   would load library/base/Rprofile first of all so the analogy is not
   close.

2) The present kludge of loading ctest in .First could be replaced
   by making ctest the default content of R_HOME/etc/Rpackages.site
   (in the light of point 5).

3) It would be useful to allow the library tree to be specified, as a
   second field on the line.

4) One problem with saving an R session and then restoring it is that
   the packages in use are not reloaded.  Quitting an R session and
   saving could write .Rpackages in the current directory (with the
   library recorded if it were not the default).  Then restarting a
   session in that directory would restore the loaded packages
   automatically.

5) We might want to allow a .Rpackages file to override Rpackages.site
   (or we might not).  One idea is to allow a minus sign in front of a
   package name, and to merge the Rpackages.site and .Rpackages files
   before loading any packages.  If we did this we probably need to be
   able to save the list of packages to be loaded (and can't easily save
   those not to be loaded), so perhaps -- as the first list of .Rpackages
   should empty the list.

6) One could argue for R_HOME/etc/Rpackages as the `system' file as
   well, and this might be useful if we break base up into smaller
   components.

7) I would allow comment lines in the files, starting with #.

8) The file names or names could be set by environment variables.  It's
   strange that we allow the site file names for Rprofile and Renviron and
   the user file name for command histories to be set in that way.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark0060@tc.umn.edu  Mon Oct 21 23:56:20 2002
From: mark0060@tc.umn.edu (mark0060@tc.umn.edu)
Date: Tue, 22 Oct 2002 00:56:20 +0200 (MET DST)
Subject: png printing (PR#2192)
Message-ID: <200210212256.AAA02294@pubhealth.ku.dk>

Full_Name: Kristian Eric Markon
Version: 1.6
OS: Win 98
Submission from: (NULL) (24.26.167.90)


I noticed sort of an odd bug when I was printing out figures to png files.

It's a bit difficult to explain how to reproduce exactly, because it depends on
a lot of data specific to my situation.

Basically, if I plot the figure to the screen, it looks exactly as it should. If
I plot the figure to jpeg, it looks exactly as it should. However, if I plot it
to a png, a plot appears, but various parameters (e.g., title, ylim, etc.) are
different. 

I can sometimes reproduce something that's somewhat similar through the
following:

temp = c("hi", "hey there", "whatcha doin")

plot(rnorm(100), rnorm(100), main=temp[3]) # should appear as one would expect

jpeg("c:/temp/temp.jpeg")
plot(rnorm(100), rnorm(100), main=temp[3]) # should appear as one would expect
dev.off()

png("c:/temp/temp.png")
plot(rnorm(100), rnorm(100), main=temp[3]) # either very small or no main title
dev.off()


It gets even more complicated with the plotting I'm doing, because, e.g., rather
than plotting a figure with no title, it will plot a title, but the wrong title.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark0060@tc.umn.edu  Mon Oct 21 23:57:59 2002
From: mark0060@tc.umn.edu (mark0060@tc.umn.edu)
Date: Tue, 22 Oct 2002 00:57:59 +0200 (MET DST)
Subject: png printing (PR#2193)
Message-ID: <200210212257.AAA02314@pubhealth.ku.dk>

Full_Name: Kristian Eric Markon
Version: 1.6
OS: Win 98
Submission from: (NULL) (24.26.167.90)


I noticed sort of an odd bug when I was printing out figures to png files.

It's a bit difficult to explain how to reproduce exactly, because it depends on
a lot of data specific to my situation.

Basically, if I plot the figure to the screen, it looks exactly as it should. If
I plot the figure to jpeg, it looks exactly as it should. However, if I plot it
to a png, a plot appears, but various parameters (e.g., title, ylim, etc.) are
different. 

I can sometimes reproduce something that's somewhat similar through the
following:

temp = c("hi", "hey there", "whatcha doin")

plot(rnorm(100), rnorm(100), main=temp[3]) # should appear as one would expect

jpeg("c:/temp/temp.jpeg")
plot(rnorm(100), rnorm(100), main=temp[3]) # should appear as one would expect
dev.off()

png("c:/temp/temp.png")
plot(rnorm(100), rnorm(100), main=temp[3]) # either very small or no main title
dev.off()


It gets even more complicated with the plotting I'm doing, because, e.g., rather
than plotting a figure with no title, it will plot a title, but the wrong title.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark0060@tc.umn.edu  Tue Oct 22 00:37:13 2002
From: mark0060@tc.umn.edu (mark0060@tc.umn.edu)
Date: Tue, 22 Oct 2002 01:37:13 +0200 (MET DST)
Subject: png-oops (PR#2195)
Message-ID: <200210212337.BAA02422@pubhealth.ku.dk>

Full_Name: Kristian Markon
Version: 1.6
OS: Win 98
Submission from: (NULL) (24.26.167.90)


I just submitted a report on a png bug in R. I now think it's not an R bug, but
rather, a Mozilla bug or a windows bug. 

Anyway, if you're having trouble duplicating the bug, that's probably why.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Mark.Bravington@csiro.au  Tue Oct 22 00:41:39 2002
From: Mark.Bravington@csiro.au (Mark.Bravington@csiro.au)
Date: Tue, 22 Oct 2002 10:41:39 +1100
Subject: savehistory directories and quitting R (PR#2038)
Message-ID: <A8877251964B294BAB5BA1FC58B43FED025B4320@molly.tas.csiro.au>

Thanks-- as Duncan Murdoch also noted, R_HISTFILE can be used to solve my
problem, as below. BTW it's not easy to find out about R_HISTFILE in the
help system or manuals, though, unless you already know it exists-- it only
seems to be described under startup options, not things to do with history.

However, Duncan's reply did hint at an inconsistency, in that savehistory()
defaults to using a file called .Rhistory in getwd(), rather than using
R_HISTFILE. I've modified my savehistory to default to R_HISTFILE if it
exists, like so:

savehistory_ function( file) {
  if( missing( file) && is.null( file <- Sys.getenv( 'R_HISTFILE')))
    file <- '.Rhistory'
  get( 'savehistory', pos='package:base')( file)
}

#This is not a bug. If you override a system function, you 
#can't expect it
#to be used by R internals.  Indeed, as from 1.6.0 you can't 
#even expect it
#to be used by R's base functions, due to namespaces.

With an eye to namespace-like issues, I originally put some code in .First
to overwrite the version of savehistory within package:base, rather than
simply masking it with a copy in .GlobalEnv. But, since savehistory wasn't
actually called at quit time, even that didn't fool the system...

cheers
Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

#-----Original Message-----
#From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
#Sent: Tuesday, 15 October 2002 12:31 AM
#To: Mark.Bravington@csiro.au
#Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
#Subject: Re: savehistory directories and quitting R (PR#2038)
#
#
#This is not a bug. If you override a system function, you 
#can't expect it
#to be used by R internals.  Indeed, as from 1.6.0 you can't 
#even expect it
#to be used by R's base functions, due to namespaces.
#
#There are very good reasons for the internal quit code not to 
#call user's
#R code, the main one being that R errors will not be handled then.
#.Last is made available as a hook to enable you to do what you want:
#as the help page says.
#
#Doesn't setting R_HISTFILE do this for you automatically? Just set
#R_HISTFILE="D:/R50/.Rhistory" and the history should be loaded 
#and saved
#to the specified place.  Works under Unix, at least.
#
#
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Tue Oct 22 05:56:50 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Mon, 21 Oct 2002 21:56:50 -0700
Subject: gcc-3.3
Message-ID: <AD09F904-E57A-11D6-85DD-000393860F3C@stat.ucla.edu>

I managed to build R-1.6.1 with gcc-3.3 from Apple CVS on Jaguar
(with the -bundle hack). It would be nice to add the -mdynamic-no-pic
flag when compiling code that goes into R.bin (i.e. into the
application). This supposedly can give a 10% speed increase with Mach-O
files. The default Jaguar compiler, gcc-3.1, already understands this
option, but gcc-2.95.2 does not.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 22 07:53:18 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 22 Oct 2002 07:53:18 +0100 (BST)
Subject: savehistory directories and quitting R (PR#2038)
In-Reply-To: <A8877251964B294BAB5BA1FC58B43FED025B4320@molly.tas.csiro.au>
Message-ID: <Pine.LNX.4.31.0210220752210.22460-100000@gannet.stats>

On Tue, 22 Oct 2002 Mark.Bravington@csiro.au wrote:

> Thanks-- as Duncan Murdoch also noted, R_HISTFILE can be used to solve my
> problem, as below. BTW it's not easy to find out about R_HISTFILE in the
> help system or manuals, though, unless you already know it exists-- it only
> seems to be described under startup options, not things to do with history.
>
> However, Duncan's reply did hint at an inconsistency, in that savehistory()
> defaults to using a file called .Rhistory in getwd(), rather than using
> R_HISTFILE. I've modified my savehistory to default to R_HISTFILE if it
> exists, like so:

Yes, intentional.  Note that it is not R_HISTFILE used, but its value at
the beginning of the session ....

>
> savehistory_ function( file) {
>   if( missing( file) && is.null( file <- Sys.getenv( 'R_HISTFILE')))
>     file <- '.Rhistory'
>   get( 'savehistory', pos='package:base')( file)
> }
>
> #This is not a bug. If you override a system function, you
> #can't expect it
> #to be used by R internals.  Indeed, as from 1.6.0 you can't
> #even expect it
> #to be used by R's base functions, due to namespaces.
>
> With an eye to namespace-like issues, I originally put some code in .First
> to overwrite the version of savehistory within package:base, rather than
> simply masking it with a copy in .GlobalEnv. But, since savehistory wasn't
> actually called at quit time, even that didn't fool the system...
>
> cheers
> Mark
>
> *******************************
>
> Mark Bravington
> CSIRO (CMIS)
> PO Box 1538
> Castray Esplanade
> Hobart
> TAS 7001
>
> phone (61) 3 6232 5118
> fax (61) 3 6232 5012
> Mark.Bravington@csiro.au
>
> #-----Original Message-----
> #From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> #Sent: Tuesday, 15 October 2002 12:31 AM
> #To: Mark.Bravington@csiro.au
> #Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> #Subject: Re: savehistory directories and quitting R (PR#2038)
> #
> #
> #This is not a bug. If you override a system function, you
> #can't expect it
> #to be used by R internals.  Indeed, as from 1.6.0 you can't
> #even expect it
> #to be used by R's base functions, due to namespaces.
> #
> #There are very good reasons for the internal quit code not to
> #call user's
> #R code, the main one being that R errors will not be handled then.
> #.Last is made available as a hook to enable you to do what you want:
> #as the help page says.
> #
> #Doesn't setting R_HISTFILE do this for you automatically? Just set
> #R_HISTFILE="D:/R50/.Rhistory" and the history should be loaded
> #and saved
> #to the specified place.  Works under Unix, at least.
> #
> #
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Oct 22 09:57:41 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Tue, 22 Oct 2002 10:57:41 +0200
Subject: RFC: Loading packages at startup
In-Reply-To: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
Message-ID: <15797.4869.19825.851756@galadriel.ci.tuwien.ac.at>


Brian,

Sounds great to me! I use something much simpler to emulate exactly
that feature using .First and .Last

>>>>> On Mon, 21 Oct 2002 21:24:45 +0100 (GMT Daylight Time),
>>>>> Prof Brian D Ripley (PBDR) wrote:

  > I've been kicking the following idea around for a while, and am now
  > proposing to put some version into 1.7.0.  I'd be interested in
  > comments on the desirability and the design, before I start writing
  > any code.



  > S4 introduced a file .S.chapters which can contain a list of S
  > chapters (equivalent to R packages) to be loaded on start-up.  This
  > was the germ of this proposal.

  > Proposal:

  > Extend the initialization as described in Startup.Rd by having
  > optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
  > the latter in the starting directory or failing that the user's home
  > directory. Each would contain a list of packages, one per line, to be
  > loaded when R is started, in the order in the files.

  > Some details:

[...]


  > 3) It would be useful to allow the library tree to be specified, as a
  >    second field on the line.

Or simply use paths? e.g.,

foo
/path/to/bar

could be read as

require(foo)
require(bar, lib="/path/to")


  > 4) One problem with saving an R session and then restoring it is that
  >    the packages in use are not reloaded.  Quitting an R session and
  >    saving could write .Rpackages in the current directory (with the
  >    library recorded if it were not the default).  Then restarting a
  >    session in that directory would restore the loaded packages
  >    automatically.

Yes, I do that for quite some time now (though my hacks were never
foolproof enough for public consumption).

  > 5) We might want to allow a .Rpackages file to override Rpackages.site
  >    (or we might not).

I think merging is better than overriding, especially in the light of
6.

  >    One idea is to allow a minus sign in front of a
  >    package name, and to merge the Rpackages.site and .Rpackages files
  >    before loading any packages.  If we did this we probably need to be
  >    able to save the list of packages to be loaded (and can't easily save
  >    those not to be loaded), so perhaps -- as the first list of .Rpackages
  >    should empty the list.

Sounds good, so lines starting with a minus sign are persistent and
the others get modified upon saving?



  > 6) One could argue for R_HOME/etc/Rpackages as the `system' file as
  >    well, and this might be useful if we break base up into smaller
  >    components.

  > 7) I would allow comment lines in the files, starting with #.

yes

  > 8) The file names or names could be set by environment variables.  It's
  >    strange that we allow the site file names for Rprofile and Renviron and
  >    the user file name for command histories to be set in that way.

Hmm, do we really need to be able to modify those? Makes writing docs
and debugging harder ...

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ted.Harding@nessie.mcc.ac.uk  Tue Oct 22 09:34:49 2002
From: Ted.Harding@nessie.mcc.ac.uk ( (Ted Harding))
Date: Tue, 22 Oct 2002 09:34:49 +0100 (BST)
Subject: RFC: Loading packages at startup
In-Reply-To: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
Message-ID: <XFMail.021022093449.Ted.Harding@nessie.mcc.ac.uk>

On 21-Oct-02 Prof Brian D Ripley wrote:
> [...]
> Proposal:
> 
> Extend the initialization as described in Startup.Rd by having
> optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
> the latter in the starting directory or failing that the user's home
> directory. Each would contain a list of packages, one per line, to be
> loaded when R is started, in the order in the files.

This would certainly be useful, especially (as in (4) below) when
resuming an analysis session.

> Some details:
> [...]
> 4) One problem with saving an R session and then restoring it is that
>    the packages in use are not reloaded.  Quitting an R session and
>    saving could write .Rpackages in the current directory (with the
>    library recorded if it were not the default).  Then restarting a
>    session in that directory would restore the loaded packages
>    automatically.

A comment from a practical user's viewpoint. I'm not sure of the value
of having this happen automatically. In practice I have a directory for
a dataset, only occasionally different sub-directories for different
analyses, and several different analyses might be done on that dataset.

If the above (4) were implemented as it stands, everything that was ever
loaded would be reloaded each time (if I understand right). It would be
better, perhaps, to allow flexibility (unless the overhead etc. of
loading un-needed packages could be ignored), and I can see two ways:

a) Offer a choice at startup between different ".Rpackages.XXX" where
"XXX" varies with the job and is mnemonic for the user (i.e. the user
chose it in the first place). I think this would also require the
implementation to query the user at quit time about what ".Rpackages.XXX"
should be called.

b) (More complicated and trickier to implement, more transparent
perhaps for the user, but maybe demanding too much foresight in
the implementation) the ".Rpackages" or equivalent would keep track in
some way of dependencies, so that if the user invoked a function which
had been used in a previous session, packages needed would be loaded
automatically.

Best wishes to all,
Ted.


--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding@nessie.mcc.ac.uk>
Fax-to-email: +44 (0)870 167 1972
Date: 22-Oct-02                                       Time: 09:34:49
------------------------------ XFMail ------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 22 12:00:39 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 22 Oct 2002 12:00:39 +0100 (BST)
Subject: basename/dirname changes warning.
Message-ID: <Pine.GSO.4.44.0210221156150.6162-100000@auk.stats>

basename and dirname in R <= 1.6.1 are not vectorized, and they silently
ignored all elements after the first in their input.

This was not documented, and e.g. undoc assumed basename was vectorized.

For R-patched I have added a check, and giving an argument of length more
than one is there an error.

For R-devel I have vectorized the code, and so an input of length 0 will no
longer be an error.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Oct 22 13:29:54 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 22 Oct 2002 14:29:54 +0200
Subject: dist() {"mva" package} bug: treats +/- Inf as NA
In-Reply-To: <Pine.LNX.4.31.0210211738270.28813-100000@gannet.stats>
References: <15796.8283.220924.525706@gargle.gargle.HOWL>
 <Pine.LNX.4.31.0210211738270.28813-100000@gannet.stats>
Message-ID: <15797.17602.536992.851229@gargle.gargle.HOWL>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk>
>>>>>     on Mon, 21 Oct 2002 17:44:53 +0100 (BST) writes:

    BDR> I think this is definitely better left as is (and
    BDR> definitely so for 1.6.1), perhaps documenting the fact.

I don't agree. Whenever there's only one +/- Inf in a pair, the
result is well-defined for most metrics, (often = +Inf, but for Canberra).
The current behavior of silently treating Infs the same as NA is
not acceptable IMO.

Vincent's example was basically

   dist(1:4, c(1e10, 2:4))
vs
   dist(1:4, c(Inf, 2:4))

where the 2nd should be the "limit" of the first, or at the
least should not silently give the equivalent of
   dist(1:4, c(NA, 2:4))

    BDR> 1.6.1), perhaps documenting the fact.  What is done
    BDR> seems quite sensible to me: you really can't have
    BDR> infinite values in an L_2 or L_1 space, and so
    BDR> Euclidean and L_1 (= Manhattan) distances are not
    BDR> defined.

    BDR> One could argue for just one infinity point, 
you mean, when for a scalar pair, one is +/- Inf, the other not?
Yes, this is exactly my point.

    BDR> with zero distance between infinity points and infinite to all
    BDR> finite points, for example (and NA to missing values).

    BDR> It really isn't just one answer.

I think it's not hard to do the right thing in the cases where
that's well defined (e.g. when there's at most one Inf per pair),
and
use the current behavior {dropping a pair} in the other
cases, namely in exactly those where IEEE-arithmetic (excuse the
misnomer) would return a NaN.

Martin

    BDR> On Mon, 21 Oct 2002, Martin Maechler wrote:

    >> Vince Carey found this (thank you!).
    >> Since the fix to the problem is not entirely obvious, I post
    >> this to R-devel as RFC:
    >> 
    >> help(dist)  says:
    >> 
    >> >>  Missing values are allowed, and are excluded from all computations
    >> >>  involving the rows within which they occur.  If some columns are
    >> >>  excluded in calculating a Euclidean, Manhattan or Canberra
    >> >>  distance, the sum is scaled up proportionally to the number of
    >> >>  columns used. If all pairs are excluded when calculating a
    >> >>  particular distance, the value is `NA'.
    >> 
    >> but the C code in  ....../src/library/mva/src/distance.c,
    >> has, e.g. for the Euclidean distance :
    >> 
    >> count= 0;
    >> dist = 0;
    >> for(j = 0 ; j < nc ; j++) {
    >> if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
    >> dev = (x[i1] - x[i2]);
    >> dist += dev * dev;
    >> count++;
    >> }
    >> i1 += nr;
    >> i2 += nr;
    >> }
    >> if(count == 0) return NA_REAL;
    >> if(count != nc) dist /= ((double)count/nc);
    >> return sqrt(dist);
    >> 
    >> where it is clear that "R_FINITE(*)" should in principle be
    >> replaced by  "!ISNAN(*)".
    >> 
    >> Note however that "Inf - Inf -> NaN" and e.g the canberra metric
    >> has more ways to get "NaN".
    >> 
    >> The current code drops all pairs with an +-Inf in it.
    >> I would be inclined to really replace
    >> if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
    >> by
    >> if(!ISNAN(x[i1])   && !ISNAN(x[i2])) {
    >> 
    >> for all metrics -- for R-patched.
    >> 
    >> But I'd also see reasons where we'd want to be smarter/different
    >> than that. One possibility would be to drop the pair (as
    >> currently) also when both are not finite,
    >> for "binary" to signal an error for +- Inf,
    >> and for "Canberra" :
    >> Of course,  d =  |x - y| / |x + y|
    >> will be 1 , when one of {x,y} is infinite.
    >> This could be considered the desired answser, or also
    >> we may give a warning in any case.
    >> 
    >> Opinions?
    >> 
    >> 
    >> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
    >> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
    >> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
    >> phone: x-41-1-632-3408		fax: ...-1228			<><

    BDR> -- 
    BDR> Brian D. Ripley,                  ripley@stats.ox.ac.uk
    BDR> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
    BDR> University of Oxford,             Tel:  +44 1865 272861 (self)
    BDR> 1 South Parks Road,                     +44 1865 272860 (secr)
    BDR> Oxford OX1 3TG, UK                Fax:  +44 1865 272595













-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Tue Oct 22 13:47:30 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Tue, 22 Oct 2002 08:47:30 -0400
Subject: RFC: Loading packages at startup
In-Reply-To: <15797.4869.19825.851756@galadriel.ci.tuwien.ac.at>; from Friedrich.Leisch@ci.tuwien.ac.at on Tue, Oct 22, 2002 at 10:57:41AM +0200
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel> <15797.4869.19825.851756@galadriel.ci.tuwien.ac.at>
Message-ID: <20021022084730.Z27564@jimmy.harvard.edu>

A not unrelated idea is to supply user settable hooks for save and
load. Which I am slowly working on.
When objects are saved we can probe them for their classes and then 
insert code into the saved image that will attempt to reload the
appropriate libraries when the image (or XDR file) is reloaded.
There will be a user interface to add other functions etc.

It might be worth thinking about the ability to manipulate Rpackages
objects from within R. Eg, a user can view, add or remove functions
(or expressions). 
I think making the elements function calls will give you more flexibility
in the long run.
In some ways patterning it along the lines of
on.exit may lead to less confusion.
On the otherhand, simply listing the packages is likely to be easiest.
Even in that case it would be nice to let the user have some control 
short of editing files.



On Tue, Oct 22, 2002 at 10:57:41AM +0200, Friedrich.Leisch@ci.tuwien.ac.at wrote:
> 
> Brian,
> 
> Sounds great to me! I use something much simpler to emulate exactly
> that feature using .First and .Last
> 
> >>>>> On Mon, 21 Oct 2002 21:24:45 +0100 (GMT Daylight Time),
> >>>>> Prof Brian D Ripley (PBDR) wrote:
> 
>   > I've been kicking the following idea around for a while, and am now
>   > proposing to put some version into 1.7.0.  I'd be interested in
>   > comments on the desirability and the design, before I start writing
>   > any code.
> 
> 
> 
>   > S4 introduced a file .S.chapters which can contain a list of S
>   > chapters (equivalent to R packages) to be loaded on start-up.  This
>   > was the germ of this proposal.
> 
>   > Proposal:
> 
>   > Extend the initialization as described in Startup.Rd by having
>   > optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
>   > the latter in the starting directory or failing that the user's home
>   > directory. Each would contain a list of packages, one per line, to be
>   > loaded when R is started, in the order in the files.
> 
>   > Some details:
> 
> [...]
> 
> 
>   > 3) It would be useful to allow the library tree to be specified, as a
>   >    second field on the line.
> 
> Or simply use paths? e.g.,
> 
> foo
> /path/to/bar
> 
> could be read as
> 
> require(foo)
> require(bar, lib="/path/to")
> 
> 
>   > 4) One problem with saving an R session and then restoring it is that
>   >    the packages in use are not reloaded.  Quitting an R session and
>   >    saving could write .Rpackages in the current directory (with the
>   >    library recorded if it were not the default).  Then restarting a
>   >    session in that directory would restore the loaded packages
>   >    automatically.
> 
> Yes, I do that for quite some time now (though my hacks were never
> foolproof enough for public consumption).
> 
>   > 5) We might want to allow a .Rpackages file to override Rpackages.site
>   >    (or we might not).
> 
> I think merging is better than overriding, especially in the light of
> 6.
> 
>   >    One idea is to allow a minus sign in front of a
>   >    package name, and to merge the Rpackages.site and .Rpackages files
>   >    before loading any packages.  If we did this we probably need to be
>   >    able to save the list of packages to be loaded (and can't easily save
>   >    those not to be loaded), so perhaps -- as the first list of .Rpackages
>   >    should empty the list.
> 
> Sounds good, so lines starting with a minus sign are persistent and
> the others get modified upon saving?
> 
> 
> 
>   > 6) One could argue for R_HOME/etc/Rpackages as the `system' file as
>   >    well, and this might be useful if we break base up into smaller
>   >    components.
> 
>   > 7) I would allow comment lines in the files, starting with #.
> 
> yes
> 
>   > 8) The file names or names could be set by environment variables.  It's
>   >    strange that we allow the site file names for Rprofile and Renviron and
>   >    the user file name for command histories to be set in that way.
> 
> Hmm, do we really need to be able to modify those? Makes writing docs
> and debugging harder ...
> 
> Best,
> Fritz
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B20
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Tom" <teacher_tom_dot_com@yahoo.com  Tue Oct 22 14:24:50 2002
From: Tom" <teacher_tom_dot_com@yahoo.com (Tom)
Date: Tue, 22 Oct 2002 21:24:50 +0800
Subject: No subject
Message-ID: <E183z1f-0005kr-00@bernie.ethz.ch>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Oct 22 14:46:40 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 22 Oct 2002 09:46:40 -0400
Subject: Loading packages at startup
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149D0EF@groexmb02.pfizer.com>



> 4) One problem with saving an R session and then restoring it is that
>    the packages in use are not reloaded.  Quitting an R session and
>    saving could write .Rpackages in the current directory (with the
>    library recorded if it were not the default).  Then restarting a
>    session in that directory would restore the loaded packages
>    automatically.


I've been using another approach for this.   For the R + Zope tools that
I've developed here (Yes, they will be released once I finally get through
all the red tape!) I needed a way to store all of the information about a
session, including loaded packages and the search path.

At the end of this message, I list two functions, save.session() and
load.session() which I wrote to accomplish this.  In addition, I have an .Rd
documentation file for them, and can provide that if anyone is interested.

The functions save.session() records the list of loaded packages into a
variable named ".save.session.packages" which is then saved as part of
save.image().   The load.session() function then uses load() to reload the
saved image and uses the ".save.session.packages" function to reload the
packages.  A similar thing happens for the search path.   This works well
and seems less hazard-prone than overwriting the users '.Rpackages' file for
two reasons:  1) the loaded package list and search path are preserved with
the data, and 2) we aren't messing with the user's files...

One enhancement that would be desirable is to allow the user to request that
the search path or the packages not be restored.  Of course, both can be
avoided by just using load() instead of load.session() on the data file.

-Greg

save.session <- function(file=".RSession",...)
  {
    if(!is.null(dev.list()))
       warning("Open graphics devices will not be saved or restored.")

    cat("Saving search path..\n")
    .save.session.search <<- search()
    
    cat("Saving list of loaded packages..\n")
    .save.session.packages <<- .packages()
   
    cat("Saving all data...\n")
    save(list=ls(envir = .GlobalEnv, all.names = TRUE), file=file, ...)
    cat("Done.\n")
  }

restore.session <- function(file=".RSession",...)
  {
    cat("Loading all data...\n")
    load(file,envir = .GlobalEnv,...)

    cat("Loading packages...\n")
    sapply( rev(.save.session.packages), library, character.only=T )

    cat("Restoring search path...\n")

    pad <- function(x,n) c( rep(NA,n-length(x)), x )
    
    current.search <- search()[-1]
    saved.search <- .save.session.search[-1]

    identical <- pad(current.search, length(saved.search)) == saved.search 
    
    for( i in saved.search[!identical] )
      {
        if( charmatch( "file:", i, nomatch=FALSE) )
          attach(sub( "file:", "", "file:test" ) )
        else if (charmatch( "package:", i, nomatch=FALSE)  )
          stop(paste("Somehow we missed loading package",i))
        else
          {
            do.call("attach",list(as.name(i)))
          }
               
      }

    rm(list=c(".save.session.packages",
              ".save.session.search"),
       envir = .GlobalEnv )
         
    
    cat("Done.\n")
  }    



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Oct 22 15:06:58 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 22 Oct 2002 10:06:58 -0400
Subject: Loading packages at startup
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149D0F3@groexmb02.pfizer.com>


Oh wow, just looking over this, I already see a bug.

This section of load.session():

>     for( i in saved.search[!identical] )
>       {
>         if( charmatch( "file:", i, nomatch=FALSE) )
>           attach(sub( "file:", "", "file:test" ) )
>         else if (charmatch( "package:", i, nomatch=FALSE)  )
>           stop(paste("Somehow we missed loading package",i))
>         else
>           {
>             do.call("attach",list(as.name(i)))
>           }
>                

should be

>     for( i in saved.search[!identical] )
>       {
>         if( charmatch( "file:", i, nomatch=FALSE) )
>           attach(sub( "file:", "", i ) )
>         else if (charmatch( "package:", i, nomatch=FALSE)  )
>           stop(paste("Somehow we missed loading package",i))
>         else
>           {
>             do.call("attach",list(as.name(i)))
>           }
>                

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.c.rougier@durham.ac.uk  Tue Oct 22 16:47:30 2002
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Tue, 22 Oct 2002 17:47:30 +0200 (MET DST)
Subject: Minor changes in ?class (PR#2197)
Message-ID: <200210221547.RAA11854@pubhealth.ku.dk>

Hi everyone -- these are very minor. In the Arguments section of ?class,

1) it should read "an object" for x
2) "names" in Usage is not specified, it could be included along with 
"what", ie as

names,what: a character vector naming classes.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 22 16:52:40 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 22 Oct 2002 11:52:40 -0400
Subject: RFC: Loading packages at startup
References: <XFMail.021022093449.Ted.Harding@nessie.mcc.ac.uk>
Message-ID: <3DB57448.F3A60B32@bank-banque-canada.ca>

"(Ted Harding)" wrote:

> ... so that if the user invoked a function which
> had been used in a previous session, packages needed would be loaded

Am I correct in thinking the main need for this is for object
definitions that require a package, rather than for methods? I have the
impression that putting requires() in a function works fairly well. Or
is it needed because methods for the objects need to be available?


> A comment from a practical user's viewpoint. I'm not sure of the value
> of having this happen automatically. 

I wonder about this too. Especially since I seem to spend much more time
debugging code than I do actually using it. Should I be worrying about
something similar to the mixed blessing of .a and .so executables? What
happens when packages are updated, moved to new locations (as systems
administrators are prone to do), or things are moved (among packages or
in/out of base)? What happens when I want the version of a package I am
trying to debug, not the one that is installed? Should there be a
warning if the signature on a package does not match the one originally
used? 

I guess I would like to understand that this is a step forward in
software design, not simply a minor user convenience (and possibly a
headache for developers)? Sorry if I am a bit slow on some of these
things.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Oct 22 17:01:51 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 22 Oct 2002 17:01:51 +0100
Subject: methods function
Message-ID: <3DB5766F.40AF4AEF@durham.ac.uk>

Hi everyone,

I've noticed that the methods function is incomplete.  The obvious
example is if I write a function "$.foo", it is not picked up by
methods:

> "$.foo" <- function(object, name) get(name, envir=object[[1]])         
> "$<-.foo" <- function(object, name, value) {assign(name, value, envir=object[[1]]); object}
> happy <- structure(list(new.env()), class = "foo")
> happy$dog <- "fred"
> happy$dog
[1] "fred"
> methods("$")
character(0)

This happens to be an easy one to fix: simply replace the first argument
to gsub in the final line with "([.[$])".  But then I thought about the
bigger picture.  Don't we need to escape all (well, almost all) special
characters in the "name" variable inside methods?  For example, I might
want to class an object as "dopey$", which would not be wrong.  This
would mean a function like

"methods" <- function (generic.function, class) 
{
    an <- lapply(seq(along = (sp <- search())), ls)
    names(an) <- sp
    if (!missing(generic.function)) {
        if (!is.character(generic.function)) 
            generic.function <- deparse(substitute(generic.function))
        name <- paste(generic.function, ".", sep = "")
        name <- paste("^", gsub("([.[$])", "\\\\\\1", name), sep="")
    }
    else if (!missing(class)) {
        if (!is.character(class)) 
            class <- paste(deparse(substitute(class)))
        name <- paste(".", class, sep = "")
        name <- paste(gsub("([.[$])", "\\\\\\1", name), "$", sep="")
    }
    else stop("must supply generic.function or class")
    grep(name, unlist(an), value = TRUE)
}

but with more special characters, eg "^", inside the first arguments to
gsub.  Is this worth thinking about?

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Tue Oct 22 17:15:17 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Tue, 22 Oct 2002 18:15:17 +0200 (MET DST)
Subject: negative numbers in R plots in Illustrator 8 (and higher?) (PR#2199)
Message-ID: <200210221615.SAA12074@pubhealth.ku.dk>

Negative numbers in (encapsulated) postscript generated by R loose their sign when opened in Adobe Illustrator 8 (french). This was so in 1.5.x and remains in 1.6.0.

I suppose that this is a known issue, although it is rather a flaw in Illustrator than in R, if my analysis of it is correct. I sent a lengthy mail containing a solution (ISOLatin1Encoding has to be redefined) to the r-help mailing list, where it never arrived.

Is there any interest in that I retype it and send it here?

RenE Bertin.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 22 17:39:05 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 22 Oct 2002 17:39:05 +0100 (BST)
Subject: RFC: Loading packages at startup
In-Reply-To: <3DB57448.F3A60B32@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0210221732360.29174-100000@gannet.stats>

This is just one point in a proposal.  Clearly we need a switch to turn
re-loading off.

On Tue, 22 Oct 2002, Paul Gilbert wrote:

> "(Ted Harding)" wrote:
>
> > ... so that if the user invoked a function which
> > had been used in a previous session, packages needed would be loaded
>
> Am I correct in thinking the main need for this is for object
> definitions that require a package, rather than for methods? I have the
> impression that putting requires() in a function works fairly well. Or
> is it needed because methods for the objects need to be available?

The latter.  It also ensures that function conflicts are resolved
consistently.

> > A comment from a practical user's viewpoint. I'm not sure of the value
> > of having this happen automatically.
>
> I wonder about this too. Especially since I seem to spend much more time
> debugging code than I do actually using it. Should I be worrying about

That must be way out in the tail of R users, few of whom program at all.

> something similar to the mixed blessing of .a and .so executables? What
> happens when packages are updated, moved to new locations (as systems
> administrators are prone to do), or things are moved (among packages or
> in/out of base)? What happens when I want the version of a package I am
> trying to debug, not the one that is installed? Should there be a
> warning if the signature on a package does not match the one originally
> used?

Basically no problem:

Upgrades are no more problem than now.  (And now upgrading mclust can give
you a completely incompatible package, BTW.)

If a package is moved, then you would get a warning. But how often does
that happen?  Moving the R installation and the standad library would be
no problem as the location would be stored as `standard' in some way.

Versions are fine too, as the location would be recorded and you would get
the same version as last time (unles you moved it ...).

> I guess I would like to understand that this is a step forward in
> software design, not simply a minor user convenience (and possibly a
> headache for developers)? Sorry if I am a bit slow on some of these
> things.

It is a user convenience.  However, I think it makes life easier not
harder.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 22 17:46:13 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Oct 2002 18:46:13 +0200
Subject: negative numbers in R plots in Illustrator 8 (and higher?) (PR#2199)
In-Reply-To: <200210221615.SAA12074@pubhealth.ku.dk>
References: <200210221615.SAA12074@pubhealth.ku.dk>
Message-ID: <x2znt6ctgq.fsf@biostat.ku.dk>

rjvbertin@hotmail.com writes:

> Negative numbers in (encapsulated) postscript generated by R loose
> their sign when opened in Adobe Illustrator 8 (french). This was so
> in 1.5.x and remains in 1.6.0.
> 
> I suppose that this is a known issue, although it is rather a flaw
> in Illustrator than in R, if my analysis of it is correct. I sent a
> lengthy mail containing a solution (ISOLatin1Encoding has to be
> redefined) to the r-help mailing list, where it never arrived.
> 
> Is there any interest in that I retype it and send it here?

First tell us your analysis... There is some weirdness with
hyphen-vs-minus in the ISOLatin1Encoding, which I at some point got
convinced that we're actually Doing According To Standards, weird as
it might seem. However, if Adobe themselves are getting it wrong, we
might reconsider our position.

I think it is Brian who has the scars from that particular battle.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Tue Oct 22 18:48:00 2002
From: rjvbertin@hotmail.com (RenE J.V. Bertin)
Date: Tue, 22 Oct 2002 19:48:00 +0200
Subject: negative numbers in R plots in Illustrator 8 (and higher?) (PR#2199)
In-Reply-To: <x2znt6ctgq.fsf@biostat.ku.dk>
References: <200210221615.SAA12074@pubhealth.ku.dk>
 <x2znt6ctgq.fsf@biostat.ku.dk>
Message-ID: <20021022194800.6982fee2.rjvbertin@hotmail.com>

On 22 Oct 2002 18:46:13 +0200, Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> wrote regarding "Re:
negative numbers in R plots in Illustrator 8 (and higher?) (PR#2199)"


8-) > Is there any interest in that I retype it and send it here?
8-) 
8-) First tell us your analysis... There is some weirdness with
8-) hyphen-vs-minus in the ISOLatin1Encoding, which I at some point got

	Indeed, it is that. Illustrator expects a hyphen at position 45, and not the minus that indeed appears to be the standard. ISO 1252 Latin 1 encoding does put the hyphen at that position.
There is not much difference between the hyphen and the minus glyphs; the former is slightly narrower than the latter. And it seems to be the hyphen that is generated by most keyboards.


8-) it might seem. However, if Adobe themselves are getting it wrong, we
8-) might reconsider our position.

	Well, there *is* some sort of issue with them. If the encoding calls for a minus, they should show it, and not silently ignore it! Or give a warning if the requested font doesn't have it.

Considering your position: just how easy is it to forget or overlook (the absence of) a sign? :)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tkeitt@mail.utexas.edu  Tue Oct 22 18:55:42 2002
From: tkeitt@mail.utexas.edu (Timothy H. Keitt)
Date: 22 Oct 2002 10:55:42 -0700
Subject: Loading packages at startup
In-Reply-To: <D7A3CFD7825BD6119B880002A58F06C20149D0EF@groexmb02.pfizer.com>
References: <D7A3CFD7825BD6119B880002A58F06C20149D0EF@groexmb02.pfizer.com>
Message-ID: <1035309342.1879.12.camel@dhcp94.nceas.ucsb.edu>

[Sorry, just noticed this thread and don't know what's been said
already, but I will comment nonetheless.]

I've also thought about this problem and I think we should be careful to
make sure its solved in a very general manner. Objects bind methods to
data, but this is broken when saving and reloading R sessions (only the
data ends up in .RData and not the bindings). What happens if someone
has multiple saved R sessions in a single directory? A single .Rpackages
file would either leave out packages or have to include all packages
across all sessions. I would far rather have a mechanism that recognizes
an object as an object and lets that object load the appropriate
bindings to methods at (re)instantiation. I once proposed that there be
function hooks in the save/load process that could be overloaded by
object type to make sure that any initializations (including package
loading) could be completed before attaching the data. This would also
allow for example database objects to reestablish their connections when
a session is reloaded from disk.

Tim

On Tue, 2002-10-22 at 06:46, Warnes, Gregory R wrote:
> 
> 
> > 4) One problem with saving an R session and then restoring it is that
> >    the packages in use are not reloaded.  Quitting an R session and
> >    saving could write .Rpackages in the current directory (with the
> >    library recorded if it were not the default).  Then restarting a
> >    session in that directory would restore the loaded packages
> >    automatically.
> 
> 
> I've been using another approach for this.   For the R + Zope tools that
> I've developed here (Yes, they will be released once I finally get through
> all the red tape!) I needed a way to store all of the information about a
> session, including loaded packages and the search path.
> 
> At the end of this message, I list two functions, save.session() and
> load.session() which I wrote to accomplish this.  In addition, I have an .Rd
> documentation file for them, and can provide that if anyone is interested.
> 
> The functions save.session() records the list of loaded packages into a
> variable named ".save.session.packages" which is then saved as part of
> save.image().   The load.session() function then uses load() to reload the
> saved image and uses the ".save.session.packages" function to reload the
> packages.  A similar thing happens for the search path.   This works well
> and seems less hazard-prone than overwriting the users '.Rpackages' file for
> two reasons:  1) the loaded package list and search path are preserved with
> the data, and 2) we aren't messing with the user's files...
> 
> One enhancement that would be desirable is to allow the user to request that
> the search path or the packages not be restored.  Of course, both can be
> avoided by just using load() instead of load.session() on the data file.
> 
> -Greg
> 
> save.session <- function(file=".RSession",...)
>   {
>     if(!is.null(dev.list()))
>        warning("Open graphics devices will not be saved or restored.")
> 
>     cat("Saving search path..\n")
>     .save.session.search <<- search()
>     
>     cat("Saving list of loaded packages..\n")
>     .save.session.packages <<- .packages()
>    
>     cat("Saving all data...\n")
>     save(list=ls(envir = .GlobalEnv, all.names = TRUE), file=file, ...)
>     cat("Done.\n")
>   }
> 
> restore.session <- function(file=".RSession",...)
>   {
>     cat("Loading all data...\n")
>     load(file,envir = .GlobalEnv,...)
> 
>     cat("Loading packages...\n")
>     sapply( rev(.save.session.packages), library, character.only=T )
> 
>     cat("Restoring search path...\n")
> 
>     pad <- function(x,n) c( rep(NA,n-length(x)), x )
>     
>     current.search <- search()[-1]
>     saved.search <- .save.session.search[-1]
> 
>     identical <- pad(current.search, length(saved.search)) == saved.search 
>     
>     for( i in saved.search[!identical] )
>       {
>         if( charmatch( "file:", i, nomatch=FALSE) )
>           attach(sub( "file:", "", "file:test" ) )
>         else if (charmatch( "package:", i, nomatch=FALSE)  )
>           stop(paste("Somehow we missed loading package",i))
>         else
>           {
>             do.call("attach",list(as.name(i)))
>           }
>                
>       }
> 
>     rm(list=c(".save.session.packages",
>               ".save.session.search"),
>        envir = .GlobalEnv )
>          
>     
>     cat("Done.\n")
>   }    
> 
> 
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-- 
Timothy H. Keitt
The University of Texas at Austin
Section of Integrative Biology
1 University Station C0930
Austin, Texas 78712-0253 USA
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 22 20:23:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 22 Oct 2002 20:23:41 +0100 (BST)
Subject: Loading packages at startup
In-Reply-To: <1035309342.1879.12.camel@dhcp94.nceas.ucsb.edu>
Message-ID: <Pine.LNX.4.31.0210222002180.29960-100000@gannet.stats>

On 22 Oct 2002, Timothy H. Keitt wrote:

> [Sorry, just noticed this thread and don't know what's been said
> already, but I will comment nonetheless.]

Actually this is a spin-off from a small point in an RFC posted earlier,
and I think it would have been kinder to have done your homework.
A serious proposal is getting sidetracked by half-formulated ways
(even buggy ones) to solve a related but different problem.

> I've also thought about this problem and I think we should be careful to
> make sure its solved in a very general manner. Objects bind methods to
> data, but this is broken when saving and reloading R sessions (only the
> data ends up in .RData and not the bindings). What happens if someone
> has multiple saved R sessions in a single directory? A single .Rpackages
> file would either leave out packages or have to include all packages
> across all sessions.

Eh?  Only one session is saved and reloaded in .RData per directory.
And we only have one .Rprofile and one .Renviron per directory.
So everyone I have ever seen uses separate directories for separate
projects.

If you go back and read the RFC, you will see the idea was that
users could specify the packages they wanted loaded (and in which order)
on a per-directory basis. *Or not.*  The idea of rewriting it at the end
of a session was just one of the possible extensions.

I would find this very useful, and although I could use .First (prone to
getting damaged) or .Rprofile I would prefer a separate mechanism. Not
least, I would like to use ~/.Rprofile for all my work (turn off
significance stars etc) and a per-directory .Rpackages.

> I would far rather have a mechanism that recognizes
> an object as an object and lets that object load the appropriate
> bindings to methods at (re)instantiation. I once proposed that there be

Not possible with S3 methods and loose inheritance. You cannot tell what
package the methods an object needs is in. Nor if it is in several can you
tell which one the user was preferring.  What we can do is to
restore the search list to (more or less) what it was at the end of the
last session, *if we want to*.

Nor is it possible to load packages arbitrarily, as the order does matter.

> function hooks in the save/load process that could be overloaded by
> object type to make sure that any initializations (including package
> loading) could be completed before attaching the data. This would also
> allow for example database objects to reestablish their connections when
> a session is reloaded from disk.

Again, not possible with S3 classes. I am not sure if it is possible with
formal methods as currently implemented, but it would need that sort of
metadata.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Wed Oct 23 01:53:11 2002
From: Bill.Venables@cmis.csiro.au (Bill.Venables@cmis.csiro.au)
Date: Wed, 23 Oct 2002 10:53:11 +1000
Subject: Loading packages at startup
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A916559C@Roper-CV.qld.cmis.csiro.au>

I hardly know what to say, other than this seems such a mild but useful
suggestion I find any opposition to it hard to imagine.

I say go for it.

Bill Venables.

-----Original Message-----
From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
Sent: Tuesday, October 22, 2002 6:25 AM
To: R-devel@stat.math.ethz.ch
Subject: RFC: Loading packages at startup


I've been kicking the following idea around for a while, and am now
proposing to put some version into 1.7.0.  I'd be interested in
comments on the desirability and the design, before I start writing
any code.

S4 introduced a file .S.chapters which can contain a list of S
chapters (equivalent to R packages) to be loaded on start-up.  This
was the germ of this proposal.

Proposal:

Extend the initialization as described in Startup.Rd by having
optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
the latter in the starting directory or failing that the user's home
directory. Each would contain a list of packages, one per line, to be
loaded when R is started, in the order in the files.

Some details:

1) I think the packages should be loaded before .Rprofile and .RData
   are processed, and R_HOME/etc/Rpackages.site before .Rpackages.
   This can be argued, and the S4 parallel would seem to be to load
   packages after S.init (the nearest it has to Rprofile).  But we
   would load library/base/Rprofile first of all so the analogy is not
   close.

2) The present kludge of loading ctest in .First could be replaced
   by making ctest the default content of R_HOME/etc/Rpackages.site
   (in the light of point 5).

3) It would be useful to allow the library tree to be specified, as a
   second field on the line.

4) One problem with saving an R session and then restoring it is that
   the packages in use are not reloaded.  Quitting an R session and
   saving could write .Rpackages in the current directory (with the
   library recorded if it were not the default).  Then restarting a
   session in that directory would restore the loaded packages
   automatically.

5) We might want to allow a .Rpackages file to override Rpackages.site
   (or we might not).  One idea is to allow a minus sign in front of a
   package name, and to merge the Rpackages.site and .Rpackages files
   before loading any packages.  If we did this we probably need to be
   able to save the list of packages to be loaded (and can't easily save
   those not to be loaded), so perhaps -- as the first list of .Rpackages
   should empty the list.

6) One could argue for R_HOME/etc/Rpackages as the `system' file as
   well, and this might be useful if we break base up into smaller
   components.

7) I would allow comment lines in the files, starting with #.

8) The file names or names could be set by environment variables.  It's
   strange that we allow the site file names for Rprofile and Renviron and
   the user file name for command histories to be set in that way.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Wed Oct 23 08:08:08 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 23 Oct 2002 00:08:08 -0700
Subject: R-1.6.1 with gcc-3.3
Message-ID: <2F51FBDA-E656-11D6-A71E-000393860F3C@stat.ucla.edu>

This is probably only interesting to zero or one or two persons.

gcc-3.3 from Apple's CVS does not handle the -bundle flag properly.

I had to hack configure.ac, which now has

shlib_ldflags="-nostdlib /usr/lib/bundle1.o -Wl,-bundle  
-Wl,-bundle_loader,/usr/local/lib/R/bin/R.bin -lgcc" ;;

LIBR_LDFLAGS="-dynamiclib -install_name \$(Rexeclibdir)/libR.dylib  
-framework Carbon"

i.e. I have also switched over to two-level namespaces. If the
-bundle flag is fixed, the first one will simply become

shlib_ldflags="-bundle -bundle_loader /usr/local/lib/R/bin/R.bin"

For those of you with accounts on gifi, I will upgrade the
gcc-3.3, which you get by putting /usr/local/bin at the beginning of
your PATH. gifi (a 450Mhz Cube) now runs OS X 10.2.2 (build 6F14).
It will soon get a CPU upgrade to dual 850Mhz.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Wed Oct 23 20:16:55 2002
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Wed, 23 Oct 2002 12:16:55 -0700 (PDT)
Subject: New version of lattice (possible incompatibility with old code)
Message-ID: <20021023191655.89793.qmail@web13902.mail.yahoo.com>


Hi,

there's a new version of lattice on CRAN (0.6-5) which will probably ship with
R 1.6.1. It has a minor change in API which might affect packages using lattice
-- only if they define panel/prepanel functions of their own. In previous
versions, it was implicitly assumed that panel (and prepanel) functions would
only be supplied _numeric_ x,y,z arguments, although I don't remember this as
being documented. This has changed in the new version (mostly to allow
rudimentary POSIXt labelling and other possible improvements in future). This
is actually used only in prepanel functions right now, and all predefined panel
functions in lattice have only been modified to have 

x <- as.numeric(x)

etc in the very beginning. This should fix any problems elsewhere as well.

If prepanel functions need to be redefined, prepanel.default.xyplot and
prepanel.default.bwplot should serve as templates. Lines like 

x <- as.numeric(x) 

should revert to old behaviour here too.

Deepayan


__________________________________________________

 the expert host your web site

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rpeng@stat.ucla.edu  Wed Oct 23 20:55:07 2002
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Wed, 23 Oct 2002 12:55:07 -0700 (PDT)
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
In-Reply-To: <Pine.LNX.4.31.0210162038360.2159-100000@gannet.stats>
Message-ID: <Pine.GSO.4.10.10210231251570.13575-100000@fisher.stat.ucla.edu>

I noticed this on the GCC website, regarding the not-yet-released gcc
3.2.1:

* The method of constructing the list of directories to be searched for
header files has been revised. If a directory named by a -I option is a
standard system include directory, the option is ignored to ensure that
the default search order for system directories and the special treatment
of system header files are not defeated.

-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng

On Wed, 16 Oct 2002, ripley@stats.ox.ac.uk wrote:

> This has been discussed on R-devel, and it is definitely not an R bug
> as there are workarounds stated in the R-admin manual.
> 
> Setting CPPFLAGS= (nothing) does avoid this except in the gnome module. It
> was intended to put that explicitly in the R-admin manual for 1.6.0, but
> it was not done in time (it is now there for R-patched).
> 
> We are told that this is fixed in the alphas of gcc 3.3.  Once it is clear
> exactly which versions of gcc are affected we may add a workaround in the
> configure script.
> 
> On Wed, 16 Oct 2002 rjvbertin@hotmail.com wrote:
> 
> > There is an incompatibility between R's configure/build process, and gcc 3.2.0 (and maybe earlier).
> > Gcc 3.2.0 includes -I/usr/local/include by default, on my system (default configuration), and cpp0
> > issues a warning when this flag is issued additionally by the user (= R's configure). This warning
> > ends up in the dependency sections of the Makefile that are generated "automagically". The 1st
> > occurrence is line 105 of src/appl/Makefile .
> >
> > The only way around it that I found, other than removing all -I/usr/local/include in all Makefiles is to manually add
> > -Wp,-w, a gcc/cpp argument that suppresses all cpp warnings. It also has the effect of not aborting
> > a compilation as soon as a specified header file is *not* found :(
> > If you decide to leave -I/usr/local/include and add -Wp,-w for gcc 3 compilers, I would suggest
> > *not* adding -Wp,-w if -fsyntax-only is also given, to not interfere with requested syntax-checking.
> > (that would probably require to call the compiler from a wrapper script, something I already do.)
> >
> > Rene Bertin
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Wed Oct 23 21:42:25 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 23 Oct 2002 13:42:25 -0700
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
In-Reply-To: <Pine.GSO.4.10.10210231251570.13575-100000@fisher.stat.ucla.edu>
Message-ID: <EFE6A9B8-E6C7-11D6-BA4F-003065A21C86@stat.ucla.edu>

Yes, there are no longer warnings in gcc-3.3

On Wednesday, Oct 23, 2002, at 12:55 US/Pacific, Roger Peng wrote:

> I noticed this on the GCC website, regarding the not-yet-released gcc
> 3.2.1:
>
> * The method of constructing the list of directories to be searched for
> header files has been revised. If a directory named by a -I option is a
> standard system include directory, the option is ignored to ensure that
> the default search order for system directories and the special  
> treatment
> of system header files are not defeated.
>
> -roger
> _______________________________
> UCLA Department of Statistics
> rpeng@stat.ucla.edu
> http://www.stat.ucla.edu/~rpeng
>
> On Wed, 16 Oct 2002, ripley@stats.ox.ac.uk wrote:
>
>> This has been discussed on R-devel, and it is definitely not an R bug
>> as there are workarounds stated in the R-admin manual.
>>
>> Setting CPPFLAGS= (nothing) does avoid this except in the gnome  
>> module. It
>> was intended to put that explicitly in the R-admin manual for 1.6.0,  
>> but
>> it was not done in time (it is now there for R-patched).
>>
>> We are told that this is fixed in the alphas of gcc 3.3.  Once it is  
>> clear
>> exactly which versions of gcc are affected we may add a workaround in  
>> the
>> configure script.
>>
>> On Wed, 16 Oct 2002 rjvbertin@hotmail.com wrote:
>>
>>> There is an incompatibility between R's configure/build process, and  
>>> gcc 3.2.0 (and maybe earlier).
>>> Gcc 3.2.0 includes -I/usr/local/include by default, on my system  
>>> (default configuration), and cpp0
>>> issues a warning when this flag is issued additionally by the user  
>>> (= R's configure). This warning
>>> ends up in the dependency sections of the Makefile that are  
>>> generated "automagically". The 1st
>>> occurrence is line 105 of src/appl/Makefile .
>>>
>>> The only way around it that I found, other than removing all  
>>> -I/usr/local/include in all Makefiles is to manually add
>>> -Wp,-w, a gcc/cpp argument that suppresses all cpp warnings. It also  
>>> has the effect of not aborting
>>> a compilation as soon as a specified header file is *not* found :(
>>> If you decide to leave -I/usr/local/include and add -Wp,-w for gcc 3  
>>> compilers, I would suggest
>>> *not* adding -Wp,-w if -fsyntax-only is also given, to not interfere  
>>> with requested syntax-checking.
>>> (that would probably require to call the compiler from a wrapper  
>>> script, something I already do.)
>>>
>>> Rene Bertin
>>>
>>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
>>> .-.-.-.-.-.-
>>> r-devel mailing list -- Read  
>>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>>> Send "info", "help", or "[un]subscribe"
>>> (in the "body", not the subject !)  To:  
>>> r-devel-request@stat.math.ethz.ch
>>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
>>> ._._._._._
>>>
>>
>> -- 
>> Brian D. Ripley,                  ripley@stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272860 (secr)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
>> .-.-.-.-.-
>> r-devel mailing list -- Read  
>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To:  
>> r-devel-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._. 
>> _._._._._
>>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
                  www: http://www.stat.ucla.edu/~deleeuw
======================================================================== 
====
          Remember, wherever you go, there you are. --- Buckaroo Banzai
======================================================================== 
====

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Glenn.Stone@csiro.au  Thu Oct 24 05:33:05 2002
From: Glenn.Stone@csiro.au (Glenn.Stone@csiro.au)
Date: Thu, 24 Oct 2002 06:33:05 +0200 (MET DST)
Subject: model.matrix (via predict) (PR#2206)
Message-ID: <200210240433.GAA24513@pubhealth.ku.dk>

Full_Name: Glenn Stone
Version: 1.5.1 and 1.6.0
OS: win2000
Submission from: (NULL) (168.140.227.9)


The following code produces incorrect fitted values in version 1.5.1 and an
error in 1.6.0 

   Error in "contrasts<-"(*tmp*, value = "contr.treatment") : 
           contrasts apply only to factors
   In addition: Warning message: 
   variable ihalf is not a factor in: model.frame.default(object, data, xlev =
xlev) 

The problem in 1.5.1 seems to be model.matrix return inconsistently ordered
interaction terms. There are abviously several work arounds.


### Start of example
dfr <- expand.grid(i=0:154,j=0:154)
dfr <- dfr[with(dfr,i+j<=154),]

dfr$logj <- with(dfr,log(j+0.5))
dfr$jmin6 <- with(dfr, pmin(j,6))
dfr$ihalf <- with(dfr, factor(floor(i/6)))
dfr$i100 <- with(dfr, ifelse(i<100,1,0))
dfr$j0 <- with(dfr, ifelse(j==0,1,0))

Ai <- runif(length(levels(dfr$ihalf)))
Ai <- Ai-Ai[1]
Bi <- runif(length(levels(dfr$ihalf)))
Bi <- (Bi-Bi[1])/10

eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
            + 0.01*jmin6+Ai[as.numeric(ihalf)]
            +Bi[as.numeric(ihalf)]*jmin6)

dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
                                            
gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
          data=dfr,
          family=poisson)

plot(predict(gg),predict(gg,newdata=dfr))
### End of example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Thu Oct 24 07:29:59 2002
From: Bill.Venables@cmis.csiro.au (Bill.Venables@cmis.csiro.au)
Date: Thu, 24 Oct 2002 16:29:59 +1000
Subject: model.matrix (via predict) (PR#2206)
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A91655B6@Roper-CV.qld.cmis.csiro.au>

I'm not sure what Glenn's "obvious" workarounds are, but if you fit the
model in the equivalent and more conventional form:

gg <- glm(clms ~ logj + i100*j0 + ihalf*jmin6, data=dfr, family=poisson)

The predict(gg, newdata = dfr) step now works fine (for me, Windows 2000, R
1.6.0).

I present this in the hope someone can use it as a clue to find out what's
going on.  Sorry, I don't have time to do it myself.

Bill Venables.


-----Original Message-----
From: Glenn.Stone@csiro.au [mailto:Glenn.Stone@csiro.au]
Sent: Thursday, October 24, 2002 2:33 PM
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: model.matrix (via predict) (PR#2206)


Full_Name: Glenn Stone
Version: 1.5.1 and 1.6.0
OS: win2000
Submission from: (NULL) (168.140.227.9)


The following code produces incorrect fitted values in version 1.5.1 and an
error in 1.6.0 

   Error in "contrasts<-"(*tmp*, value = "contr.treatment") : 
           contrasts apply only to factors
   In addition: Warning message: 
   variable ihalf is not a factor in: model.frame.default(object, data, xlev
=
xlev) 

The problem in 1.5.1 seems to be model.matrix return inconsistently ordered
interaction terms. There are abviously several work arounds.


### Start of example
dfr <- expand.grid(i=0:154,j=0:154)
dfr <- dfr[with(dfr,i+j<=154),]

dfr$logj <- with(dfr,log(j+0.5))
dfr$jmin6 <- with(dfr, pmin(j,6))
dfr$ihalf <- with(dfr, factor(floor(i/6)))
dfr$i100 <- with(dfr, ifelse(i<100,1,0))
dfr$j0 <- with(dfr, ifelse(j==0,1,0))

Ai <- runif(length(levels(dfr$ihalf)))
Ai <- Ai-Ai[1]
Bi <- runif(length(levels(dfr$ihalf)))
Bi <- (Bi-Bi[1])/10

eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
            + 0.01*jmin6+Ai[as.numeric(ihalf)]
            +Bi[as.numeric(ihalf)]*jmin6)

dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
                                            
gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
          data=dfr,
          family=poisson)

plot(predict(gg),predict(gg,newdata=dfr))
### End of example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Glenn.Stone@csiro.au  Thu Oct 24 07:52:34 2002
From: Glenn.Stone@csiro.au (Glenn.Stone@csiro.au)
Date: Thu, 24 Oct 2002 16:52:34 +1000
Subject: model.matrix (via predict) (PR#2206)
Message-ID: <FC026A0F0EE43E42A6EE465E2C7FFF780161448B@coxs-nh.nsw.cmis.CSIRO.AU>

 
In my actual application (this is a dummy) i100 is confounded with ihalf, so
I don't fit its main effect  I guess I(i100*j0) would work?
-----Original Message-----
From: Venables, Bill (CMIS, Cleveland)
To: Stone, Glenn (CMIS, North Ryde); r-devel@stat.math.ethz.ch
Sent: 24/10/2002 4:29 PM
Subject: RE: model.matrix (via predict) (PR#2206)

I'm not sure what Glenn's "obvious" workarounds are, but if you fit the
model in the equivalent and more conventional form:

gg <- glm(clms ~ logj + i100*j0 + ihalf*jmin6, data=dfr, family=poisson)

The predict(gg, newdata = dfr) step now works fine (for me, Windows
2000, R 1.6.0).

I present this in the hope someone can use it as a clue to find out
what's going on.  Sorry, I don't have time to do it myself.

Bill Venables.


-----Original Message-----
From: Glenn.Stone@csiro.au [mailto:Glenn.Stone@csiro.au]
Sent: Thursday, October 24, 2002 2:33 PM
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: model.matrix (via predict) (PR#2206)


Full_Name: Glenn Stone
Version: 1.5.1 and 1.6.0
OS: win2000
Submission from: (NULL) (168.140.227.9)


The following code produces incorrect fitted values in version 1.5.1 and
an
error in 1.6.0 

   Error in "contrasts<-"(*tmp*, value = "contr.treatment") : 
           contrasts apply only to factors
   In addition: Warning message: 
   variable ihalf is not a factor in: model.frame.default(object, data,
xlev =
xlev) 

The problem in 1.5.1 seems to be model.matrix return inconsistently
ordered
interaction terms. There are abviously several work arounds.


### Start of example
dfr <- expand.grid(i=0:154,j=0:154)
dfr <- dfr[with(dfr,i+j<=154),]

dfr$logj <- with(dfr,log(j+0.5))
dfr$jmin6 <- with(dfr, pmin(j,6))
dfr$ihalf <- with(dfr, factor(floor(i/6)))
dfr$i100 <- with(dfr, ifelse(i<100,1,0))
dfr$j0 <- with(dfr, ifelse(j==0,1,0))

Ai <- runif(length(levels(dfr$ihalf)))
Ai <- Ai-Ai[1]
Bi <- runif(length(levels(dfr$ihalf)))
Bi <- (Bi-Bi[1])/10

eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
            + 0.01*jmin6+Ai[as.numeric(ihalf)]
            +Bi[as.numeric(ihalf)]*jmin6)

dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
                                            
gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
          data=dfr,
          family=poisson)

plot(predict(gg),predict(gg,newdata=dfr))
### End of example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-.-
r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Thu Oct 24 08:28:50 2002
From: Bill.Venables@cmis.csiro.au (Bill.Venables@cmis.csiro.au)
Date: Thu, 24 Oct 2002 17:28:50 +1000
Subject: model.matrix (via predict) (PR#2206)
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A91655BA@Roper-CV.qld.cmis.csiro.au>

Glenn,

I suspect that I(i100*j0) will not work, actually.  It certainly won't work
if either of them are factors, since multiplication, (i.e. the arithmethic
"*" as opposed to the linear model formula "*" operator) is explicitly
inhibited for factors.

Even if one is confounded within the other, there is no reason to omit the
main effect.  Both glm and aov will detect that and silently omit the
confounded term.  You could also use a/b, of course, and my guess is that
works as well.

Cheers,
Bill.

-----Original Message-----
From: Stone, Glenn (CMIS, North Ryde) 
Sent: Thursday, October 24, 2002 4:53 PM
To: Venables, Bill (CMIS, Cleveland); 'r-devel@stat.math.ethz.ch '
Subject: RE: model.matrix (via predict) (PR#2206)


 
In my actual application (this is a dummy) i100 is confounded with ihalf, so
I don't fit its main effect  I guess I(i100*j0) would work?
-----Original Message-----
From: Venables, Bill (CMIS, Cleveland)
To: Stone, Glenn (CMIS, North Ryde); r-devel@stat.math.ethz.ch
Sent: 24/10/2002 4:29 PM
Subject: RE: model.matrix (via predict) (PR#2206)

I'm not sure what Glenn's "obvious" workarounds are, but if you fit the
model in the equivalent and more conventional form:

gg <- glm(clms ~ logj + i100*j0 + ihalf*jmin6, data=dfr, family=poisson)

The predict(gg, newdata = dfr) step now works fine (for me, Windows
2000, R 1.6.0).

I present this in the hope someone can use it as a clue to find out
what's going on.  Sorry, I don't have time to do it myself.

Bill Venables.


-----Original Message-----
From: Glenn.Stone@csiro.au [mailto:Glenn.Stone@csiro.au]
Sent: Thursday, October 24, 2002 2:33 PM
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: model.matrix (via predict) (PR#2206)


Full_Name: Glenn Stone
Version: 1.5.1 and 1.6.0
OS: win2000
Submission from: (NULL) (168.140.227.9)


The following code produces incorrect fitted values in version 1.5.1 and
an
error in 1.6.0 

   Error in "contrasts<-"(*tmp*, value = "contr.treatment") : 
           contrasts apply only to factors
   In addition: Warning message: 
   variable ihalf is not a factor in: model.frame.default(object, data,
xlev =
xlev) 

The problem in 1.5.1 seems to be model.matrix return inconsistently
ordered
interaction terms. There are abviously several work arounds.


### Start of example
dfr <- expand.grid(i=0:154,j=0:154)
dfr <- dfr[with(dfr,i+j<=154),]

dfr$logj <- with(dfr,log(j+0.5))
dfr$jmin6 <- with(dfr, pmin(j,6))
dfr$ihalf <- with(dfr, factor(floor(i/6)))
dfr$i100 <- with(dfr, ifelse(i<100,1,0))
dfr$j0 <- with(dfr, ifelse(j==0,1,0))

Ai <- runif(length(levels(dfr$ihalf)))
Ai <- Ai-Ai[1]
Bi <- runif(length(levels(dfr$ihalf)))
Bi <- (Bi-Bi[1])/10

eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
            + 0.01*jmin6+Ai[as.numeric(ihalf)]
            +Bi[as.numeric(ihalf)]*jmin6)

dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
                                            
gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
          data=dfr,
          family=poisson)

plot(predict(gg),predict(gg,newdata=dfr))
### End of example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-.-
r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rdarnell@shrs.uq.edu.au  Thu Oct 24 08:55:06 2002
From: rdarnell@shrs.uq.edu.au (rdarnell@shrs.uq.edu.au)
Date: Thu, 24 Oct 2002 09:55:06 +0200 (MET DST)
Subject: crash report (PR#2207)
Message-ID: <200210240755.JAA25960@pubhealth.ku.dk>


Rterm crashed while I was creating some plots and a message box
appearing saying there was an error log created. Searching for
recently created files I found this one which was modified at the time
Rterm crashed.  I wasn't sure if you were interested but here it is
anyway.


Regards

Ross Darnell


Microsoft (R) Windows 2000 (TM) Version 5.00 DrWtsn32
Copyright (C) 1985-1999 Microsoft Corp. All rights reserved.


Application exception occurred:
        App:  (pid=1292)
        When: 10/24/2002 @ 17:37:59.435
        Exception number: c0000005 (access violation)

*----> System Information <----*
        Computer Name: SHRS-LVL8-RD
        User Name: rdarnell
        Number of Processors: 1
        Processor Type: x86 Family 15 Model 2 Stepping 4
        Windows 2000 Version: 5.0
        Current Build: 2195
        Service Pack: 2
        Current Type: Uniprocessor Free
        Registered Organization: University of Queensland
        Registered Owner: Ross Darnell

*----> Task List <----*
   0 Idle.exe
   8 System.exe
 140 smss.exe
 164 csrss.exe
 160 winlogon.exe
 212 services.exe
 224 lsass.exe
 392 svchost.exe
 424 spoolsv.exe
 484 svchost.exe
 612 regsvc.exe
 624 MSTask.exe
 696 wm.exe
 532 NALNTSRV.exe
 816 Explorer.exe
 876 LTSMMSG.exe
 884 PRISMSTA.exe
 892 SynTPLpr.exe
 900 SynTPEnh.exe
 916 sistray.exe
 924 khooker.exe
 932 CPLBY25.exe
 940 PRPCUI.exe
 800 dpmw32.exe
 988 NWTRAY.exe
1012 realsched.exe
1048 internat.exe
1096 WZQKPICK.exe
1108 NALDESK.exe
 964 xemacs.exe
 336 MOZILLA.exe
1304 ispell.exe
1292 Rterm.exe
1392 ssh.exe
 956 rnathchk.exe
1432 AcroRd32.exe
1396 drwtsn32.exe
   0 _Total.exe

(00400000 - 00406000) 
(77F80000 - 77FFB000) 
(01510000 - 016E4000) 
(016F0000 - 0170B000) 
(77DB0000 - 77E0B000) 
(77E80000 - 77F35000) 
(77D40000 - 77DB0000) 
(77B50000 - 77BD9000) 
(77F40000 - 77F7C000) 
(77E10000 - 77E74000) 
(76B30000 - 76B6E000) 
(77C70000 - 77CBA000) 
(782F0000 - 78532000) 
(78000000 - 78046000) 
(77820000 - 77827000) 
(759B0000 - 759B6000) 
(77A50000 - 77B46000) 
(779B0000 - 77A4B000) 
(6E420000 - 6E426000) 
(75E60000 - 75E7A000) 
(63000000 - 63014000) 
(775A0000 - 77625000) 
(77840000 - 7787C000) 
(770C0000 - 770E3000) 
(128F0000 - 128FE000) 
(12900000 - 1290A000) 
(12910000 - 12918000) 
(12920000 - 12934000) 
(12960000 - 12975000) 
(12980000 - 1298B000) 
(12990000 - 12999000) 
(129A0000 - 129A9000) 
(129B0000 - 129CD000) 
(75050000 - 75058000) 
(75030000 - 75043000) 
(75020000 - 75028000) 
(785C0000 - 785CC000) 
(77980000 - 779A4000) 
(77340000 - 77353000) 
(77520000 - 77525000) 
(77320000 - 77337000) 
(75150000 - 75160000) 
(75170000 - 751BF000) 
(77BE0000 - 77BEF000) 
(751C0000 - 751C6000) 
(77950000 - 77979000) 
(773B0000 - 773DE000) 
(77380000 - 773A2000) 
(77830000 - 7783E000) 
(77880000 - 7790D000) 
(77C10000 - 77C6D000) 
(774E0000 - 77512000) 
(774C0000 - 774D1000) 
(77530000 - 77552000) 
(77360000 - 77379000) 
(777E0000 - 777E8000) 
(66210000 - 66219000) 
(50D50000 - 50D92000) 
(50D00000 - 50D15000) 
(50DF0000 - 50E10000) 
(50DB0000 - 50DD9000) 
(66220000 - 6622C000) 
(1C000000 - 1C006000) 
(777F0000 - 777F5000) 
(74FD0000 - 74FEF000) 
(75010000 - 75017000) 
(12EB0000 - 12EB8000) 

State Dump for Thread Id 0x51c

eax=00000137 ebx=028342d4 ecx=00000006 edx=00000000 esi=025f916c edi=00000000
eip=0164a224 esp=0022f708 ebp=0022f720 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000202


function: drawto
        0164a202 eb3f             jmp     getpixels+0x13 (01652543)
        0164a204 83c4f4           add     esp,0xf4
        0164a207 53               push    ebx
        0164a208 e8a3fbffff       call    get_context (01649db0)
        0164a20d a3702b6c01       mov     [dc (016c2b70)],eax    ds:016c2b70=00000000
        0164a212 83c410           add     esp,0x10
        0164a215 8b8340010000     mov     eax,[ebx+0x140]        ds:02834414=00000137
        0164a21b 85c0             test    eax,eax
        0164a21d 741d             jz      init_menus+0xcc (0165453c)
        0164a21f a358296801       mov   [current (01682958)],eax ds:01682958=00000137
FAULT ->0164a224 8918             mov     [eax],ebx              ds:00000137=????????
        0164a226 83c4f8           add     esp,0xf8
        0164a229 ff7014           push    dword ptr [eax+0x14]   ds:00ead709=????????
        0164a22c ff7004           push    dword ptr [eax+0x4]    ds:00ead709=????????
        0164a22f e87cfdffff       call    finish_contexts+0x28 (01649fb0)
        0164a234 a364296801       mov   [win_rgb (01682964)],eax ds:01682964=00000000
        0164a239 eb08             jmp     sortpalette+0x6cf (01653243)
        0164a23b 90               nop
        0164a23c a158296801       mov   eax,[current (01682958)] ds:01682958=00000137
        0164a241 8918             mov     [eax],ebx              ds:00000137=????????
        0164a243 8b5de8           mov     ebx,[ebp+0xe8]         ss:010dccf2=????????
        0164a246 c9               leave

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
0022F720 0164A633 028342D4 00000000 0000029D 0000029D !drawto 
0022F760 0164F08B 025F916C 12020E0A 00000000 00000000 !clear 
0022F7D0 0164F485 025F916C 0017022A 00000000 0017022A !gprintf 
0022F800 0164F5FC 0017022A 0000000F 00000000 00000000 !gprintf 
0022F850 77E12E98 0017022A 0000000F 00000000 00000000 !app_win_proc 
0022F870 77E139A3 0164F5D0 0017022A 0000000F 00000000 user32!ScrollDC 
0022F88C 77E1395F 0194AEA0 0000000F 00000000 00000000 user32!GetQueueStatus 
0022F8B4 77FA032F 0022F8C4 00000018 0194AEA0 0000000F user32!GetQueueStatus 
0022F954 77E15824 016BC7C0 00000001 0164FCBF 016BC7C0 ntdll!KiUserCallbackDispatcher 
0022F990 0152FC05 00000001 00000400 0022FA5C 0158A463 user32!DispatchMessageA 
0022F9B0 0152FA05 01C63730 0022FA5C 00000400 00000001 !Rconsolesetwidth 
0022F9E0 015A0FC0 01C63730 0022FA5C 00000400 00000001 !R_ReadConsole 
0022FA20 015A1697 01C63DD0 00000000 00000000 0022FA50 !Rf_ReplIteration 
0022FE70 015A1F58 01C63DD0 00000000 00000000 77E8615B !Rf_ReplIteration 
0022FE90 015A1F70 00401431 00000001 0022FEB0 0040153D !run_Rmainloop 
0022FEA0 0040153D 00400000 00000000 0022FEE0 0040139C !Rf_mainloop 
0022FEB0 0040139C 00000002 01C224A0 00401674 00401759 !<nosymbols> 
0022FEE0 0040166D 00400000 00000000 01412433 00000000 !<nosymbols> 
0022FF60 004010F4 00000002 01C224A0 01C22D38 00000005 !<nosymbols> 
0022FFA0 004011EF 00000001 00000000 8043107B 77E97D05 !<nosymbols> 
0022FFC0 77E97D08 77F82DC2 77FCF170 7FFDF000 C0000005 !<nosymbols> 
0022FFF0 00000000 00000000 00000000 00000000 00000000 kernel32!CreateProcessW 

*----> Raw Stack Dump <----*
0022f708  d4 42 83 02 21 00 f0 00 - 60 f7 22 00 27 a6 64 01  .B..!...`.".'.d.
0022f718  00 00 00 00 9d 02 00 00 - 60 f7 22 00 33 a6 64 01  ........`.".3.d.
0022f728  d4 42 83 02 00 00 00 00 - 9d 02 00 00 9d 02 00 00  .B..............
0022f738  6c 91 5f 02 90 f7 22 00 - 2a 02 17 00 2a 02 17 00  l._...".*...*...
0022f748  6c 91 5f 02 6f f0 64 01 - 00 00 00 00 00 00 00 00  l._.o.d.........
0022f758  9d 02 00 00 9d 02 00 00 - d0 f7 22 00 8b f0 64 01  .........."...d.
0022f768  6c 91 5f 02 0a 0e 02 12 - 00 00 00 00 00 00 00 00  l._.............
0022f778  00 00 00 00 6c 91 5f 02 - 0f 00 00 00 2a 57 65 01  ....l._.....*We.
0022f788  6c 91 5f 02 2a 02 17 00 - 0a 03 01 0d 01 00 00 00  l._.*...........
0022f798  00 00 00 00 08 00 00 00 - f8 01 00 00 9d 02 00 00  ................
0022f7a8  00 00 00 00 00 00 00 00 - 00 00 00 00 00 40 00 00  .............@..
0022f7b8  08 1b 80 e2 88 6f 80 e2 - 88 40 30 85 14 07 ad bc  .....o...@0.....
0022f7c8  59 13 01 a0 ec 13 01 a0 - 00 f8 22 00 85 f4 64 01  Y........."...d.
0022f7d8  6c 91 5f 02 2a 02 17 00 - 00 00 00 00 2a 02 17 00  l._.*.......*...
0022f7e8  00 00 00 00 00 00 00 00 - 0f 00 00 00 02 00 00 00  ................
0022f7f8  a0 00 00 00 02 00 00 02 - 50 f8 22 00 fc f5 64 01  ........P."...d.
0022f808  2a 02 17 00 0f 00 00 00 - 00 00 00 00 00 00 00 00  *...............
0022f818  4c f8 22 00 00 00 00 00 - 9e 02 00 00 01 00 00 00  L.".............
0022f828  0f 00 00 00 c8 c7 6b 01 - c0 c7 6b 01 00 00 00 00  ......k...k.....
0022f838  00 00 00 00 2a 02 17 00 - 35 03 0f 00 02 00 00 00  ....*...5.......

State Dump for Thread Id 0x548

eax=77d50c62 ebx=00000246 ecx=0142072c edx=00000000 esi=014215b8 edi=014215f8
eip=77f82a84 esp=126efe28 ebp=126eff74 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000202


function: ZwReplyWaitReceivePortEx
        77f82a79 b8ac000000       mov     eax,0xac
        77f82a7e 8d542404         lea     edx,[esp+0x4]          ss:1359d3fb=????????
        77f82a82 cd2e             int     2e
        77f82a84 c21400           ret     0x14

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
126EFF74 77D50781 77D50D7F 014215B8 00000000 40421080 ntdll!ZwReplyWaitReceivePortEx 
126EFFA8 77D50C7A 01420690 126EFFEC 77E8758A 014214D8 rpcrt4!RpcBindingSetOption 
126EFFB4 77E8758A 014214D8 00000000 40421080 014214D8 rpcrt4!RpcBindingSetOption 
126EFFEC 00000000 00000000 00000000 00000000 00000000 kernel32!SetFilePointer 

State Dump for Thread Id 0x558

eax=0000000a ebx=00000000 ecx=00000008 edx=00000000 esi=77f827dd edi=000000d4
eip=77f827e8 esp=128eff2c ebp=128eff50 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000246


function: NtWaitForSingleObject
        77f827dd b8ea000000       mov     eax,0xea
        77f827e2 8d542404         lea     edx,[esp+0x4]          ss:1379d4ff=????????
        77f827e6 cd2e             int     2e
        77f827e8 c20c00           ret     0xc
        77f827eb 8b4124           mov     eax,[ecx+0x24]         ds:00ead5da=????????
        77f827ee 39420c           cmp     [edx+0xc],eax          ds:00ead5d2=????????
        77f827f1 0f85c9100000     jne     NtQueryDefaultLocale+0x115 (77f838c0)
        77f827f7 ff4208           inc     dword ptr [edx+0x8]    ds:00ead5d2=????????
        77f827fa 33c0             xor     eax,eax
        77f827fc c20400           ret     0x4
        77f827ff 90               nop
        77f82800 ff4a04           dec     dword ptr [edx+0x4]    ds:00ead5d2=????????
        77f82803 c20400           ret     0x4

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
128EFF50 77E86A3D 000000D4 FFFFFFFF 00000000 0152FB48 ntdll!NtWaitForSingleObject 
128EFF80 7800A27B 00000000 00000000 0022F3E0 01C22A38 kernel32!WaitForSingleObject 
128EFFB4 77E8758A 01C22A38 00000000 0022F3E0 01C22A38 !beginthread 
128EFFEC 00000000 7800A224 01C22A38 00000000 00905A4D kernel32!SetFilePointer 

*----> Raw Stack Dump <----*
128eff2c  15 6a e8 77 d4 00 00 00 - 00 00 00 00 00 00 00 00  .j.w............
128eff3c  00 00 00 00 38 2a c2 01 - 38 2a c2 01 01 01 01 00  ....8*..8*......
128eff4c  01 01 01 00 80 ff 8e 12 - 3d 6a e8 77 d4 00 00 00  ........=j.w....
128eff5c  ff ff ff ff 00 00 00 00 - 48 fb 52 01 d4 00 00 00  ........H.R.....
128eff6c  ff ff ff ff 00 00 00 00 - 00 00 00 00 38 2a c2 01  ............8*..
128eff7c  b4 ff 8e 12 b4 ff 8e 12 - 7b a2 00 78 00 00 00 00  ........{..x....
128eff8c  00 00 00 00 e0 f3 22 00 - 38 2a c2 01 20 b0 0a 85  ......".8*.. ...
128eff9c  8c ff 8e 12 77 0d 43 80 - dc ff 8e 12 11 db 00 78  ....w.C........x
128effac  90 41 03 78 00 00 00 00 - ec ff 8e 12 8a 75 e8 77  .A.x.........u.w
128effbc  38 2a c2 01 00 00 00 00 - e0 f3 22 00 38 2a c2 01  8*........".8*..
128effcc  00 c0 fd 7f a7 9d fb 77 - c0 ff 8e 12 a7 9d fb 77  .......w.......w
128effdc  ff ff ff ff 5b 61 e8 77 - 80 b5 e8 77 00 00 00 00  ....[a.w...w....
128effec  00 00 00 00 00 00 00 00 - 24 a2 00 78 38 2a c2 01  ........$..x8*..
128efffc  00 00 00 00 4d 5a 90 00 - 03 00 00 00 04 00 00 00  ....MZ..........
128f000c  ff ff 00 00 b8 00 00 00 - 00 00 00 00 40 00 00 00  ............@...
128f001c  00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 00 00  ................
128f002c  00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 00 00  ................
128f003c  80 00 00 00 0e 1f ba 0e - 00 b4 09 cd 21 b8 01 4c  ............!..L
128f004c  cd 21 54 68 69 73 20 70 - 72 6f 67 72 61 6d 20 63  .!This program c
128f005c  61 6e 6e 6f 74 20 62 65 - 20 72 75 6e 20 69 6e 20  annot be run in 

State Dump for Thread Id 0x44c

eax=778321fe ebx=00000004 ecx=77db0260 edx=00000000 esi=77f8281e edi=00000004
eip=77f82829 esp=12bdfd24 ebp=12bdfd70 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000246


function: NtWaitForMultipleObjects
        77f8281e b8e9000000       mov     eax,0xe9
        77f82823 8d542404         lea     edx,[esp+0x4]          ss:13a8d2f7=????????
        77f82827 cd2e             int     2e
        77f82829 c21400           ret     0x14

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
12BDFD70 77E86E1A 12BDFD48 00000001 00000000 00000000 ntdll!NtWaitForMultipleObjects 
12BDFFB4 77E8758A 00000005 00000000 000B000A 0143F978 kernel32!WaitForMultipleObjects 
12BDFFEC 00000000 778321FE 0143F978 00000000 000000C8 kernel32!SetFilePointer 

*----> Raw Stack Dump <----*
12bdfd24  da 6d e8 77 04 00 00 00 - 48 fd bd 12 01 00 00 00  .m.w....H.......
12bdfd34  00 00 00 00 00 00 00 00 - 01 00 00 00 78 f9 43 01  ............x.C.
12bdfd44  01 00 00 00 84 01 00 00 - 88 01 00 00 98 01 00 00  ................
12bdfd54  18 02 00 00 5c fe 45 80 - a0 2f 40 80 ff ff ff ff  ....\.E../@.....
12bdfd64  d0 8a a0 bc d0 0c 45 80 - 90 07 41 85 b4 ff bd 12  ......E...A.....
12bdfd74  1a 6e e8 77 48 fd bd 12 - 01 00 00 00 00 00 00 00  .n.wH...........
12bdfd84  00 00 00 00 00 00 00 00 - b2 22 83 77 04 00 00 00  .........".w....
12bdfd94  b0 fe bd 12 00 00 00 00 - ff ff ff ff 78 f9 43 01  ............x.C.
12bdfda4  0a 00 0b 00 00 00 00 00 - f4 38 1a 85 e8 ae 44 85  .........8....D.
12bdfdb4  00 00 00 00 00 00 00 00 - 01 00 00 00 38 00 00 00  ............8...
12bdfdc4  23 00 00 00 23 00 00 00 - 00 00 00 00 0a 00 0b 00  #...#...........
12bdfdd4  78 f9 43 01 c8 43 f8 77 - 60 02 db 77 fe 21 83 77  x.C..C.w`..w.!.w
12bdfde4  00 00 00 00 32 75 e8 77 - 1b 00 00 00 00 02 00 00  ....2u.w........
12bdfdf4  fc ff bd 12 23 00 00 00 - c0 00 00 00 28 0e 0a 85  ....#.......(...
12bdfe04  b1 c0 01 00 98 70 71 85 - 00 07 00 00 b6 c9 44 80  .....pq.......D.
12bdfe14  b1 c0 01 00 98 70 71 85 - 01 d2 fd 7f 07 03 00 00  .....pq.........
12bdfe24  01 d2 fd 7f 07 03 00 00 - 5b d3 44 80 07 03 00 00  ........[.D.....
12bdfe34  30 5e 0a 85 00 d0 fd 7f - fc 07 30 c0 00 00 00 00  0^........0.....
12bdfe44  68 7e 0d 85 07 03 00 00 - 98 8b a0 bc 00 00 00 00  h~..............
12bdfe54  01 00 00 00 00 00 00 00 - 00 e0 fd 7f fc 07 30 c0  ..............0.

State Dump for Thread Id 0x538

eax=1c0026ca ebx=00000000 ecx=00000000 edx=00000000 esi=00000200 edi=0143b1c0
eip=77f830a5 esp=12e2ff14 ebp=12e2ffb4 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000246


function: NtDeviceIoControlFile
        77f8309a b838000000       mov     eax,0x38
        77f8309f 8d542404         lea     edx,[esp+0x4]          ss:13cdd4e7=????????
        77f830a3 cd2e             int     2e
        77f830a5 c22800           ret     0x28

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
12E2FFB4 77E8758A 00000000 0208003C 00000000 00000000 ntdll!NtDeviceIoControlFile 
12E2FFEC 00000000 1C0026CA 00000000 00000000 12E30008 kernel32!SetFilePointer 

*----> Raw Stack Dump <----*
12e2ff14  ed 24 00 1c 00 02 00 00 - 00 00 00 00 00 00 00 00  .$..............
12e2ff24  00 00 00 00 d0 30 00 1c - 83 00 00 90 60 ff e2 12  .....0......`...
12e2ff34  30 00 00 00 00 00 00 00 - 00 00 00 00 4e 27 00 1c  0...........N'..
12e2ff44  83 00 00 90 00 00 00 00 - 60 ff e2 12 30 00 00 00  ........`...0...
12e2ff54  3c 00 08 02 00 00 00 00 - 00 00 00 00 41 00 00 00  <...........A...
12e2ff64  00 00 00 00 ac 7c 88 eb - 00 00 00 00 00 00 00 00  .....|..........
12e2ff74  00 00 00 00 c0 b1 43 01 - c0 01 0c 86 48 02 0a 85  ......C.....H...
12e2ff84  00 02 00 00 00 00 00 00 - 68 e2 44 85 00 02 00 00  ........h.D.....
12e2ff94  e0 d2 0e 85 c0 b1 43 01 - 54 ff e2 12 77 0d 43 80  ......C.T...w.C.
12e2ffa4  dc ff e2 12 f4 28 00 1c - 38 12 00 1c ff ff ff ff  .....(..8.......
12e2ffb4  ec ff e2 12 8a 75 e8 77 - 00 00 00 00 3c 00 08 02  .....u.w....<...
12e2ffc4  00 00 00 00 00 00 00 00 - 00 a0 fd 7f 00 00 00 00  ................
12e2ffd4  c0 ff e2 12 00 00 00 00 - ff ff ff ff 5b 61 e8 77  ............[a.w
12e2ffe4  80 b5 e8 77 00 00 00 00 - 00 00 00 00 00 00 00 00  ...w............
12e2fff4  ca 26 00 1c 00 00 00 00 - 00 00 00 00 08 00 e3 12  .&..............
12e30004  00 00 00 00 10 00 e3 12 - 00 00 00 00 18 00 e3 12  ................
12e30014  00 00 00 00 20 00 e3 12 - 00 00 00 00 28 00 e3 12  .... .......(...
12e30024  00 00 00 00 30 00 e3 12 - 00 00 00 00 38 00 e3 12  ....0.......8...
12e30034  00 00 00 00 40 00 e3 12 - 00 00 00 00 48 00 e3 12  ....@.......H...
12e30044  00 00 00 00 50 00 e3 12 - 00 00 00 00 58 00 e3 12  ....P.......X...



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 24 10:05:06 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 24 Oct 2002 10:05:06 +0100 (BST)
Subject: crash report (PR#2207)
In-Reply-To: <200210240755.JAA25960@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210241003100.3978-100000@gannet.stats>

All that log tells us is that it crashed in the graphics system.

There's nothing we can do unless you can send a reproducible report,
and even then it might not happen on our machines.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 24 10:10:33 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 24 Oct 2002 10:10:33 +0100 (BST)
Subject: model.matrix (via predict) (PR#2206)
In-Reply-To: <E09E527B56BE2D438A3D6A246DDD27A91655BA@Roper-CV.qld.cmis.csiro.au>
Message-ID: <Pine.LNX.4.31.0210241006080.3978-100000@gannet.stats>

I have a clue as to what is going on, given that it changed between 1.5.1
and 1.6.0.  I think it may be related to (NEWS)

        model.matrix() was sometimes incorrectly determining the first
        factor in a formula without an intercept.

It seems a marginal bug, one not worth spending much time on.  Anyone who
has read the internals of model.matrix.default will appreciate my
reluctance.

Brian


On Thu, 24 Oct 2002 Bill.Venables@cmis.csiro.au wrote:

> Glenn,
>
> I suspect that I(i100*j0) will not work, actually.  It certainly won't work
> if either of them are factors, since multiplication, (i.e. the arithmethic
> "*" as opposed to the linear model formula "*" operator) is explicitly
> inhibited for factors.
>
> Even if one is confounded within the other, there is no reason to omit the
> main effect.  Both glm and aov will detect that and silently omit the
> confounded term.  You could also use a/b, of course, and my guess is that
> works as well.
>
> Cheers,
> Bill.
>
> -----Original Message-----
> From: Stone, Glenn (CMIS, North Ryde)
> Sent: Thursday, October 24, 2002 4:53 PM
> To: Venables, Bill (CMIS, Cleveland); 'r-devel@stat.math.ethz.ch '
> Subject: RE: model.matrix (via predict) (PR#2206)
>
>
>
> In my actual application (this is a dummy) i100 is confounded with ihalf, so
> I don't fit its main effect  I guess I(i100*j0) would work?
> -----Original Message-----
> From: Venables, Bill (CMIS, Cleveland)
> To: Stone, Glenn (CMIS, North Ryde); r-devel@stat.math.ethz.ch
> Sent: 24/10/2002 4:29 PM
> Subject: RE: model.matrix (via predict) (PR#2206)
>
> I'm not sure what Glenn's "obvious" workarounds are, but if you fit the
> model in the equivalent and more conventional form:
>
> gg <- glm(clms ~ logj + i100*j0 + ihalf*jmin6, data=dfr, family=poisson)
>
> The predict(gg, newdata = dfr) step now works fine (for me, Windows
> 2000, R 1.6.0).
>
> I present this in the hope someone can use it as a clue to find out
> what's going on.  Sorry, I don't have time to do it myself.
>
> Bill Venables.
>
>
> -----Original Message-----
> From: Glenn.Stone@csiro.au [mailto:Glenn.Stone@csiro.au]
> Sent: Thursday, October 24, 2002 2:33 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: model.matrix (via predict) (PR#2206)
>
>
> Full_Name: Glenn Stone
> Version: 1.5.1 and 1.6.0
> OS: win2000
> Submission from: (NULL) (168.140.227.9)
>
>
> The following code produces incorrect fitted values in version 1.5.1 and
> an
> error in 1.6.0
>
>    Error in "contrasts<-"(*tmp*, value = "contr.treatment") :
>            contrasts apply only to factors
>    In addition: Warning message:
>    variable ihalf is not a factor in: model.frame.default(object, data,
> xlev =
> xlev)
>
> The problem in 1.5.1 seems to be model.matrix return inconsistently
> ordered
> interaction terms. There are abviously several work arounds.
>
>
> ### Start of example
> dfr <- expand.grid(i=0:154,j=0:154)
> dfr <- dfr[with(dfr,i+j<=154),]
>
> dfr$logj <- with(dfr,log(j+0.5))
> dfr$jmin6 <- with(dfr, pmin(j,6))
> dfr$ihalf <- with(dfr, factor(floor(i/6)))
> dfr$i100 <- with(dfr, ifelse(i<100,1,0))
> dfr$j0 <- with(dfr, ifelse(j==0,1,0))
>
> Ai <- runif(length(levels(dfr$ihalf)))
> Ai <- Ai-Ai[1]
> Bi <- runif(length(levels(dfr$ihalf)))
> Bi <- (Bi-Bi[1])/10
>
> eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
>             + 0.01*jmin6+Ai[as.numeric(ihalf)]
>             +Bi[as.numeric(ihalf)]*jmin6)
>
> dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
>
> gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
>           data=dfr,
>           family=poisson)
>
> plot(predict(gg),predict(gg,newdata=dfr))
> ### End of example
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lucas@toulouse.inra.fr  Thu Oct 24 13:53:13 2002
From: lucas@toulouse.inra.fr (lucas@toulouse.inra.fr)
Date: Thu, 24 Oct 2002 14:53:13 +0200 (MET DST)
Subject: Function scale (PR#2209)
Message-ID: <200210241253.OAA01776@pubhealth.ku.dk>

I found a problem with scale function,
while using center=FALSE and scale=TRUE:

all column are not divided by standard error,
but divided by sqrt (1/(n-1) sum Xi^2 )

Example:
> l<- c(1,2,3)
> scale(l,F,T)
          [,1]
[1,] 0.3779645
[2,] 0.7559289
[3,] 1.1338934
attr(,"scaled:scale")
[1] 2.645751

2.645751 = sqrt( 1/2 * (1+4+9) )


Antoine Lucas & Aymeric Labourdette 

--
Antoine  Lucas        
INRA, Unit de biomtrie et     |  Tel 05 61 28 53 34
intelligence artificielle       |  Fax 05 61 28 53 35
http://genopole.toulouse.inra.fr/~lucas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 24 14:28:43 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Oct 2002 15:28:43 +0200
Subject: Function scale (PR#2209)
In-Reply-To: <200210241253.OAA01776@pubhealth.ku.dk>
References: <200210241253.OAA01776@pubhealth.ku.dk>
Message-ID: <x265vst184.fsf@biostat.ku.dk>

lucas@toulouse.inra.fr writes:

> I found a problem with scale function,
> while using center=FALSE and scale=TRUE:
> 
> all column are not divided by standard error,
> but divided by sqrt (1/(n-1) sum Xi^2 )
> 
> Example:
> > l<- c(1,2,3)
> > scale(l,F,T)
>           [,1]
> [1,] 0.3779645
> [2,] 0.7559289
> [3,] 1.1338934
> attr(,"scaled:scale")
> [1] 2.645751
> 
> 2.645751 = sqrt( 1/2 * (1+4+9) )

And? That's exactly what the documentation says will happen. And
exactly what Splus does, even if perhaps surprising.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Oct 24 15:21:22 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 24 Oct 2002 10:21:22 -0400 (EDT)
Subject: Function scale (PR#2209)
In-Reply-To: <200210241253.OAA01776@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0210241017370.9918-100000@bolker.zoo.ufl.edu>


  The function is behaving as documented ...

   "If `scale' is `TRUE' then scaling is done by dividing the (centered)
    columns of `x' by their root-mean-square, and if `scale' is `FALSE',
    no scaling is done.

   "The root-mean-square for a column is obtained by computing the
    square-root of the sum-of-squares of the non-missing values in the
    column divided by the number of non-missing values minus one."

   It says "root-mean-square", not "standard error" or "standard
deviation".  If you set center=TRUE, then the two are equivalent. If you
*want* it to scale by standard deviation just set scale=sd(l) [or in the
matrix case, scale=apply(l,2,sd)].

  Ben Bolker

On Thu, 24 Oct 2002 lucas@toulouse.inra.fr wrote:

> I found a problem with scale function,
> while using center=FALSE and scale=TRUE:
> 
> all column are not divided by standard error,
> but divided by sqrt (1/(n-1) sum Xi^2 )
> 
> Example:
> > l<- c(1,2,3)
> > scale(l,F,T)
>           [,1]
> [1,] 0.3779645
> [2,] 0.7559289
> [3,] 1.1338934
> attr(,"scaled:scale")
> [1] 2.645751
> 
> 2.645751 = sqrt( 1/2 * (1+4+9) )
> 
> 
> Antoine Lucas & Aymeric Labourdette 
> 
> --
> Antoine  Lucas        
> INRA, Unit de biomtrie et     |  Tel 05 61 28 53 34
> intelligence artificielle       |  Fax 05 61 28 53 35
> http://genopole.toulouse.inra.fr/~lucas
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Oct 24 16:55:07 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 24 Oct 2002 11:55:07 -0400
Subject: Function scale (PR#2209)
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149D11A@groexmb02.pfizer.com>

> From: Peter Dalgaard BSA [mailto:p.dalgaard@biostat.ku.dk]
[...]
> 
> And? That's exactly what the documentation says will happen. And
> exactly what Splus does, even if perhaps surprising.

Generally speaking, I think it is poor design for software to 'surprise' the
user, even if documentation specifies the surprising activity...   

Is there a good reason for this behavior or is it 'just' a leftover
implementation detail recoded as a specification?

Except, perhaps, for the need for backwards & S-Plus compatibility, it would
seem desirable to change the behavior to better match the uninformed
expectation of users.

Just my $0.02.

-Greg





LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dj@research.bell-labs.com  Thu Oct 24 17:08:55 2002
From: dj@research.bell-labs.com (David James)
Date: Thu, 24 Oct 2002 12:08:55 -0400
Subject: RFC: Loading packages at startup
In-Reply-To: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>; from ripley@stats.ox.ac.uk on Mon, Oct 21, 2002 at 09:24:45PM +0100
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
Message-ID: <20021024120855.A8260@jessie.research.bell-labs.com>

I think the proposed changes will be useful. A couple of points
(mostly for simplicity):

Prof Brian D Ripley wrote:
> ...
> 
> 3) It would be useful to allow the library tree to be specified, as a
>    second field on the line.
  
Other than convenience (nothing wrong with that, of course) I don't
see too much need for this.  The .Renviron files may already have defined
R_LIBS, so the library tree may already be specified.

>  ...
>
> 5) We might want to allow a .Rpackages file to override Rpackages.site
>    (or we might not).  One idea is to allow a minus sign in front of a
>    package name, and to merge the Rpackages.site and .Rpackages files
>    before loading any packages.  If we did this we probably need to be
>    able to save the list of packages to be loaded (and can't easily save
>    those not to be loaded), so perhaps -- as the first list of .Rpackages
>    should empty the list.

Why not using arguments to R, say, --no-site-Rpackages and --no-Rpackages,
similar to --no-environ, --no-site-file, --no-init-file, and friends?
Adding specialized syntax with the minus sign seems a bit kludgy.

My preferance would be to have R by default include base and only
base (or whatever one package is the mimimum set), all other packages
(ctest, etc.) as part of the $R_HOME/etc/Rpackages.site, as the RFC
point 2) suggests.


> 
> 6) One could argue for R_HOME/etc/Rpackages as the `system' file as
>    well, and this might be useful if we break base up into smaller
>    components.
> 
> 7) I would allow comment lines in the files, starting with #.
> 
> 8) The file names or names could be set by environment variables.  It's
>    strange that we allow the site file names for Rprofile and Renviron and
>    the user file name for command histories to be set in that way.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 24 17:53:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 24 Oct 2002 17:53:31 +0100 (BST)
Subject: RFC: Loading packages at startup
In-Reply-To: <20021024120855.A8260@jessie.research.bell-labs.com>
Message-ID: <Pine.LNX.4.31.0210241750570.5320-100000@gannet.stats>

On Thu, 24 Oct 2002, David James wrote:

> I think the proposed changes will be useful. A couple of points
> (mostly for simplicity):
>
> Prof Brian D Ripley wrote:
> > ...
> >
> > 3) It would be useful to allow the library tree to be specified, as a
> >    second field on the line.
>
> Other than convenience (nothing wrong with that, of course) I don't
> see too much need for this.  The .Renviron files may already have defined
> R_LIBS, so the library tree may already be specified.

It's important if one wants to save the list to know which library list
was in use at the time. R_LIBS is subject to change.

> > 5) We might want to allow a .Rpackages file to override Rpackages.site
> >    (or we might not).  One idea is to allow a minus sign in front of a
> >    package name, and to merge the Rpackages.site and .Rpackages files
> >    before loading any packages.  If we did this we probably need to be
> >    able to save the list of packages to be loaded (and can't easily save
> >    those not to be loaded), so perhaps -- as the first list of .Rpackages
> >    should empty the list.
>
> Why not using arguments to R, say, --no-site-Rpackages and --no-Rpackages,
> similar to --no-environ, --no-site-file, --no-init-file, and friends?
> Adding specialized syntax with the minus sign seems a bit kludgy.

We would do that anyway.  The case I am thinking about is where
Rpackages.site includes a lot of packages, and for this project I want to
exclude just one.  Then a .Rpackages with `-foo' does the trick.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Oct 24 18:07:29 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Thu, 24 Oct 2002 13:07:29 -0400
Subject: Function scale (PR#2209)
In-Reply-To: <D7A3CFD7825BD6119B880002A58F06C20149D11A@groexmb02.pfizer.com>
References: <D7A3CFD7825BD6119B880002A58F06C20149D11A@groexmb02.pfizer.com>
Message-ID: <up9gru8fmkpr3iaslhfm91sd0t13vhrlk3@4ax.com>

On Thu, 24 Oct 2002 11:55:07 -0400, you wrote in message
<D7A3CFD7825BD6119B880002A58F06C20149D11A@groexmb02.pfizer.com>:

>Generally speaking, I think it is poor design for software to 'surprise' the
>user, even if documentation specifies the surprising activity...   

I agree, but I don't think it's clear what would be unsurprising
behaviour here.

If you ask for scaling but no centering, how should the scale be
estimated?  

1. To me the obvious scale is sqrt(sum(x^2)/n).
2. R and S-PLUS use sqrt(sum(x^2)/(n-1)).
3. I think the original poster was suggesting
sqrt(sum((x-mean(x))^2/(n-1)) (but it wasn't stated explicitly, so I'm
not sure).

In a case like this, I'd say backwards compatibility wins.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Oct 25 08:15:07 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 25 Oct 2002 09:15:07 +0200
Subject: RFC: Loading packages at startup
In-Reply-To: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
Message-ID: <15800.61307.451828.338523@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> I've been kicking the following idea around for a while, and am now
> proposing to put some version into 1.7.0.  I'd be interested in
> comments on the desirability and the design, before I start writing
> any code.

> S4 introduced a file .S.chapters which can contain a list of S
> chapters (equivalent to R packages) to be loaded on start-up.  This
> was the germ of this proposal.

> Proposal:

> Extend the initialization as described in Startup.Rd by having
> optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
> the latter in the starting directory or failing that the user's home
> directory. Each would contain a list of packages, one per line, to be
> loaded when R is started, in the order in the files.

> Some details:

> 1) I think the packages should be loaded before .Rprofile and .RData
>    are processed, and R_HOME/etc/Rpackages.site before .Rpackages.
>    This can be argued, and the S4 parallel would seem to be to load
>    packages after S.init (the nearest it has to Rprofile).  But we
>    would load library/base/Rprofile first of all so the analogy is not
>    close.

> 2) The present kludge of loading ctest in .First could be replaced
>    by making ctest the default content of R_HOME/etc/Rpackages.site
>    (in the light of point 5).

> 3) It would be useful to allow the library tree to be specified, as a
>    second field on the line.

> 4) One problem with saving an R session and then restoring it is that
>    the packages in use are not reloaded.  Quitting an R session and
>    saving could write .Rpackages in the current directory (with the
>    library recorded if it were not the default).  Then restarting a
>    session in that directory would restore the loaded packages
>    automatically.

> 5) We might want to allow a .Rpackages file to override Rpackages.site
>    (or we might not).  One idea is to allow a minus sign in front of a
>    package name, and to merge the Rpackages.site and .Rpackages files
>    before loading any packages.  If we did this we probably need to be
>    able to save the list of packages to be loaded (and can't easily save
>    those not to be loaded), so perhaps -- as the first list of .Rpackages
>    should empty the list.

> 6) One could argue for R_HOME/etc/Rpackages as the `system' file as
>    well, and this might be useful if we break base up into smaller
>    components.

> 7) I would allow comment lines in the files, starting with #.

> 8) The file names or names could be set by environment variables.  It's
>    strange that we allow the site file names for Rprofile and Renviron and
>    the user file name for command histories to be set in that way.

I'd recommend against going this way.

In fact, I am not sure whether we really want to have *user environment*
files in the long run.  We currently have two user files controlling
startup, .Renviron and .Rprofile.  A split like this is necessary
because not all customization for R can be done from 'inside R', i.e.,
after R has been started, but needs to be done before that.  To my
understanding, this includes setting LD_LIBRARY_PATH (or the system's
equivalent), and maybe some env vars which can be given instead of
command line args, but with R_VSIZE and R_HSIZE sort of gone what else
is there?  So perhaps the user environment mechanism is not the right
thing anyway (and it is not used by R CMD *).

For the things that can be done from inside R, I'd recommend doing it
this way.  E.g., there is really no reason for looking for an env var
R_BROWSER when we can portably specify one using options(browser).  The
fact that specifying the packages to be loaded at startup inside
.First() and that users cannot simply add to .First() is a problem that
needs to be addressed anyway.  As Robert has indicated, the obvious idea
is to introduce (an Emacs-style) hooks mechanism to be run at certain
times, or more generally, when certain events occur.  Unfortunately, the
attempt to make this rather general, as discussed in Boston, means that
things also take a bit longer to get done.  But conceptually, what we
want is a suite of

	setHook() addHook() runHooks()

functions, and things like .First(), .First.lib() (and the user
variants), code to be run when creating a save image etc., can all be
integrated into this general mechanism.

[Basically, hooks are lists of functions because in some cases we need
to call them with certain arguments, e.g. the .First.lib package load
hook always has library and package and maybe also version eventually.]

For package config, users can then use setHook() to override the system
and/or site defaults, or addHook() to add to them.  As everything
happens inside R there is no need for a special format, as discussed in 
(3), (5), and (7).

[If users cannot be expected to code their preferences in R ... then we
could provide an interactive tool which eventually emits the R code.]

Long term, startup configuration will include setting defaults, loading
packages, perhaps playing namespace magic with some of them, perhaps
everything according to predefined 'themes' ... and I'd like to have all
of this in one place, if possible.

Point (4) is very important, in particular if we think about saving and
restoring the 'state' of an R session (as opposed to just the work
space).  I think many of us (I know from at least Greg, Fritz and
myself) have code going in this direction, but then we need more than
just names of the packages.  We should perhaps also know about attached
non-package objects etc.  Also, I am not sure about how attempting to
load/attach in reverse order will interact with namespace import/export
and pre-computing package dependencies before loading them.  But in any
case, dumping an object that somehow represents the session state would
be extremely important---but I do think we need an R object to represent
the information.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian.trapletti@lmttrading.com  Fri Oct 25 08:46:21 2002
From: adrian.trapletti@lmttrading.com (Adrian Trapletti)
Date: Fri, 25 Oct 2002 09:46:21 +0200
Subject: [R] Combinatorial Optimisation
References: <200210250201.g9P214Ui023993@hypatia.math.ethz.ch>
Message-ID: <3DB8F6CC.8C3D4E9@lmttrading.com>

> Date: Thu, 24 Oct 2002 08:58:08 +0200 (CEST)
> From: Detlef Steuer <Detlef.Steuer@unibw-hamburg.de>
> Subject: RE: [R] Combinatorial Optimisation
>
> This thread missed me somehow.
>
> If not mentioned before:
> simulated annealing is implemented in optim().

The current implementation of simulated annealing in optim() has been designed for a continuos parameter space. The next candidate
point in the parameter space is generated from a Gaussian Markov kernel with scale proportional to the actual temperature. However,
it is quite simple to change this for a combinatorial optimization:

in the R source tree, see the file src/main/optim.c, function samin:

What you need to change are the four lines, that are responsible for generating a new candidate point:

for (i = 0; i < n; i++)
  dp[i] = scale * t * norm_rand();  /* random perturbation */
for (i = 0; i < n; i++)
  ptry[i] = p[i] + dp[i];  /* new candidate point */

You could, e.g., replace them by a call to an R function, which randomly selects a new candidate point of a finite set of points.
Hence, to quickly get SA for combinatorial optimization:

Copy and paste samin from optim.c
Change the four lines
Write an R wrapper for this new function

best
Adrian

PS: TO R-DEVEL: What about having this behaviour in optim (default as is, optional a function argument which selects a candidate
point)?

--
Dr. Adrian Trapletti             Phone :             +41 (0) 1 994 5631
Trapletti Statistical Computing  Mobile:             +41 (0)76 370 5631
Wildsbergstrasse 31              Fax   :             +41 (0) 1 994 5631
CH-8610 Uster                    Email :  mailto:a.trapletti@bluewin.ch
Switzerland                      WWW   : http://trapletti.homelinux.com



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Oct 25 13:01:43 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 25 Oct 2002 13:01:43 +0100 (BST)
Subject: [R] Combinatorial Optimisation
In-Reply-To: <3DB8F6CC.8C3D4E9@lmttrading.com>
Message-ID: <Pine.LNX.4.31.0210251259530.10820-100000@gannet.stats>

Adrian,

Thanks for the idea.  If you were willing to contribute a patch to do this
we would be happy to incorporate it.

Brian


On Fri, 25 Oct 2002, Adrian Trapletti wrote:

> > Date: Thu, 24 Oct 2002 08:58:08 +0200 (CEST)
> > From: Detlef Steuer <Detlef.Steuer@unibw-hamburg.de>
> > Subject: RE: [R] Combinatorial Optimisation
> >
> > This thread missed me somehow.
> >
> > If not mentioned before:
> > simulated annealing is implemented in optim().
>
> The current implementation of simulated annealing in optim() has been designed for a continuos parameter space. The next candidate
> point in the parameter space is generated from a Gaussian Markov kernel with scale proportional to the actual temperature. However,
> it is quite simple to change this for a combinatorial optimization:
>
> in the R source tree, see the file src/main/optim.c, function samin:
>
> What you need to change are the four lines, that are responsible for generating a new candidate point:
>
> for (i = 0; i < n; i++)
>   dp[i] = scale * t * norm_rand();  /* random perturbation */
> for (i = 0; i < n; i++)
>   ptry[i] = p[i] + dp[i];  /* new candidate point */
>
> You could, e.g., replace them by a call to an R function, which randomly selects a new candidate point of a finite set of points.
> Hence, to quickly get SA for combinatorial optimization:

(Using an R function here is not entirely trivial, hence the request
above.)

> Copy and paste samin from optim.c
> Change the four lines
> Write an R wrapper for this new function
>
> best
> Adrian
>
> PS: TO R-DEVEL: What about having this behaviour in optim (default as is, optional a function argument which selects a candidate
> point)?
>
> --
> Dr. Adrian Trapletti             Phone :             +41 (0) 1 994 5631
> Trapletti Statistical Computing  Mobile:             +41 (0)76 370 5631
> Wildsbergstrasse 31              Fax   :             +41 (0) 1 994 5631
> CH-8610 Uster                    Email :  mailto:a.trapletti@bluewin.ch
> Switzerland                      WWW   : http://trapletti.homelinux.com
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Oct 25 14:17:22 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 25 Oct 2002 09:17:22 -0400
Subject: RFC: Loading packages at startup
In-Reply-To: <15800.61307.451828.338523@mithrandir.hornik.net>
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel> <15800.61307.451828.338523@mithrandir.hornik.net>
Message-ID: <tigiru0ea5ogksjn520jiffrlim1g9dt1d@4ax.com>

On Fri, 25 Oct 2002 09:15:07 +0200, Kurt.Hornik@wu-wien.ac.at wrote in
message <15800.61307.451828.338523@mithrandir.hornik.net>:

>  But in any
>case, dumping an object that somehow represents the session state would
>be extremely important---but I do think we need an R object to represent
>the information.

It might be possible at some point to store something that would cause
R to fail to start, so if a binary format is used for this file, there
should be tools provided to allow it to be edited.  This could be as
simple as instructions for running "R --vanilla", loading and editing
the startup info, and saving it back.  

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From terra@diku.dk  Fri Oct 25 15:50:18 2002
From: terra@diku.dk (terra@diku.dk)
Date: Fri, 25 Oct 2002 16:50:18 +0200 (MET DST)
Subject: qgamma precision (PR#2214)
Message-ID: <200210251450.QAA13659@pubhealth.ku.dk>

Full_Name: Morten Welinder
Version: 1.5.1
OS: Solaris
Submission from: (NULL) (65.213.85.136)


I was having problems with qgamma's precision in the sense that
pgamma(qpgamma(x))
was not as close to the identity function as I would like.  I was seeing
relative
errors with random input of about 1e-8.  This fits nicely with the code'd EPS2
value of 5e-7.

To solve this I added a newton step at the end.  This seems far cheaper than
the
current iterations.  Here's the code I added (to replace the final return):


    /* Special Gnumeric patch to improve precision.  */
    {
	gnum_float x0 = 0.5*scale*ch;
	gnum_float e0 = pgamma (x0, alpha, scale, lower_tail, log_p) - p;

	if (e0 != 0 && lower_tail && !log_p) {
	    gnum_float d0 = dgamma (x0, alpha, scale, log_p);
	    if (d0) {
		gnum_float x1 = x0 - e0 / d0;
		gnum_float e1 = pgamma (x1, alpha, scale, lower_tail, log_p) - p;
		if (gnumabs (e1) < gnumabs (e0))
		    x0 = x1;
	    }
	}

	return x0;
    }

(Just read "gnum_float" as "double" and "gnumabs" as "fabs".)

The test for lower_tail is because (a) that is where I use it, and (b) the d0
calculation is probably wrong otherwise.

With this change, the relative precision improves to something like 1e-15.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian.trapletti@lmttrading.com  Fri Oct 25 22:32:32 2002
From: adrian.trapletti@lmttrading.com (Adrian Trapletti)
Date: Fri, 25 Oct 2002 23:32:32 +0200
Subject: [R] Combinatorial Optimisation
References: <Pine.LNX.4.31.0210251259530.10820-100000@gannet.stats>
Message-ID: <3DB9B870.D7D565C1@lmttrading.com>

This is a multi-part message in MIME format.
--------------D871E36B191E8352EBC0EAA5
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

ripley@stats.ox.ac.uk wrote:

> Adrian,
>
> Thanks for the idea.  If you were willing to contribute a patch to do this
> we would be happy to incorporate it.

Patches for optim.c and optim.Rd against R-1.6.0 source are attached. I didn't test too extensively, but the basic things and the
traveling salesman example seem to work cleanly. I would be glad if you could review and maybe enhance, in particular the S related
code, in optim.c, because there I am really not an expert.

Furthermore, as I was scanning through optim.c I was not sure if line 99 (original)

     df[i] = REAL(s)[i] * (OS->parscale[i])/(OS->fnscale);

is correct. Shouldn't that be

    df[i] = REAL(s)[i] / ((OS->parscale[i])*(OS->fnscale));

to get back to the optim-internal scaling?

best
Adrian

--
Dr. Adrian Trapletti             Phone :             +41 (0) 1 994 5631
Trapletti Statistical Computing  Mobile:             +41 (0)76 370 5631
Wildsbergstrasse 31              Fax   :             +41 (0) 1 994 5631
CH-8610 Uster                    Email :  mailto:a.trapletti@bluewin.ch
Switzerland                      WWW   : http://trapletti.homelinux.com



--------------D871E36B191E8352EBC0EAA5
Content-Type: text/plain; charset=us-ascii;
 name="patch.optim.Rd"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="patch.optim.Rd"

7c7
<   box-constrained optimization.
---
>   box-constrained optimization and simulated annealing.
21,22c21,24
<    \code{"Nelder-Mead"} and \code{"SANN"} method. If it is \code{NULL}
<    and it is needed, a finite-difference approximation will be used.}
---
>    \code{"Nelder-Mead"} method. If it is \code{NULL} and it is needed, a
>    finite-difference approximation will be used. For the \code{"SANN"}
>    method it is a function to generate a new candidate point. If it is
>    \code{NULL} a default Gaussian Markov kernel is used.}
59c61
<   Method \code{"SANN"} is a variant of simulated annealing
---
>   Method \code{"SANN"} is by default a variant of simulated annealing
64,69c66,73
<   acceptance probability. The next candidate point is generated from a
<   Gaussian Markov kernel with scale proportional to the actual temperature.
<   Temperatures are decreased according to the logarithmic cooling
<   schedule as given in Belisle (1992, p. 890). Note that the
<   \code{"SANN"} method depends critically on the settings of the
<   control parameters.  It is not a general-purpose method but can be
---
>   acceptance probability. By default the next candidate point is
>   generated from a Gaussian Markov kernel with scale proportional to the
>   actual temperature. If a function to generate a new candidate point is
>   given, method \code{"SANN"} can also be used to solve combinatorial
>   optimization problems. Temperatures are decreased according to the
>   logarithmic cooling schedule as given in Belisle (1992, p. 890). Note
>   that the \code{"SANN"} method depends critically on the settings of
>   the control parameters. It is not a general-purpose method but can be 
176c180
< 
---
>   
240a245,290
> 
> ## Combinatorial optimization: Traveling salesman problem
> library(mva)
> 
> data(eurodist)
> eurodistmat <- as.matrix(eurodist)
> 
> distance <- function(sq) {  # Target function
>     sq2 <- embed(sq, 2)
>     return(sum(eurodistmat[cbind(sq2[,2],sq2[,1])]))
> }
> 
> genseq <- function(sq) {  # Generate new candidate sequence 
>     idx <- seq(2, NROW(eurodistmat)-1, by=1)
>     changepoints <- sample(idx, size=2, replace=FALSE)
>     tmp <- sq[changepoints[1]]
>     sq[changepoints[1]] <- sq[changepoints[2]]
>     sq[changepoints[2]] <- tmp
>     return(sq)
> }
> 
> sq <- c(1,2:NROW(eurodistmat),1)  # Initial sequence
> distance(sq)
> 
> res <- optim(sq, distance, genseq, method="SANN",
>              control=list(maxit=20000, temp=2000 ,trace=T))
> res  # Near optimum distance around 12842
> 
> loc <- cmdscale(eurodist)
> rx <- range(x <- loc[,1])
> ry <- range(y <- -loc[,2])
> tspinit <- loc[sq,]
> tspres <- loc[res$par,]
> s <- seq(NROW(tspres)-1)
> 
> plot(x, y, type="n", asp=1, xlab="", ylab="",
>      main="initial solution of traveling salesman problem")
> arrows(tspinit[s,1], -tspinit[s,2], tspinit[s+1,1], -tspinit[s+1,2],
>        angle=10, col="green") 
> text(x, y, names(eurodist), cex=0.8)
> 
> plot(x, y, type="n", asp=1, xlab="", ylab="",
>      main="optim() 'solving' traveling salesman problem") 
> arrows(tspres[s,1], -tspres[s,2], tspres[s+1,1], -tspres[s+1,2],
>        angle=10, col="red")
> text(x, y, names(eurodist), cex=0.8)

--------------D871E36B191E8352EBC0EAA5
Content-Type: text/plain; charset=us-ascii;
 name="patch.optim.c"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="patch.optim.c"

*** ./src/main/optim.c.origin	Mon Apr  8 08:19:48 2002
--- ./src/main/optim.c	Fri Oct 25 18:27:41 2002
***************
*** 155,164 ****
--- 155,193 ----
  	}
  	UNPROTECT(1); /* x */
      }
  }
  
+ static void genptry(int n, double *p, double *ptry, double scale, void *ex)
+ {    
+     SEXP s, x;
+     int i;
+     OptStruct OS = (OptStruct) ex;
+     PROTECT_INDEX ipx;
+ 
+     if (!isNull(OS->R_gcall)) {  /* user defined generation of candidate point */
+       	PROTECT(x = allocVector(REALSXP, n));
+ 	for (i = 0; i < n; i++) {
+ 	    if (!R_FINITE(p[i])) error("non-finite value supplied by optim");
+ 	    REAL(x)[i] = p[i] * (OS->parscale[i]);
+ 	}
+ 	SETCADR(OS->R_gcall, x);
+ 	PROTECT_WITH_INDEX(s = eval(OS->R_gcall, OS->R_env), &ipx);
+ 	REPROTECT(s = coerceVector(s, REALSXP), ipx);
+ 	if(LENGTH(s) != n)
+ 	    error("candidate point in optim evaluated to length %d not %d",
+ 		  LENGTH(s), n);
+ 	for (i = 0; i < n; i++)
+ 	    ptry[i] = REAL(s)[i] / (OS->parscale[i]);
+ 	UNPROTECT(2);
+     } 
+     else {  /* default Gaussian Markov kernel */
+         for (i = 0; i < n; i++)
+             ptry[i] = p[i] + scale * norm_rand();  /* new candidate point */
+     }
+ }
+ 
  /* par fn gr method options */
  SEXP do_optim(SEXP call, SEXP op, SEXP args, SEXP rho)
  {
      SEXP par, fn, gr, method, options, tmp, slower, supper;
      SEXP res, value, counts, conv;
***************
*** 219,237 ****
  	for (i = 0; i < npar; i++)
  	    REAL(par)[i] = opar[i] * (OS->parscale[i]);
  	grcount = NA_INTEGER;
  
      }
!     else if (strcmp(tn, "SANN") == 0) {
!       tmax = asInteger(getListElement(options, "tmax"));
!       temp = asReal(getListElement(options, "temp"));
!       if (tmax == NA_INTEGER) error("tmax is not an integer");
!       samin (npar, dpar, &val, fminfn, maxit, tmax, temp, trace, (void *)OS);
!       for (i = 0; i < npar; i++)
! 	  REAL(par)[i] = dpar[i] * (OS->parscale[i]);
!       fncount = maxit;
!       grcount = NA_INTEGER;
  
      } else if (strcmp(tn, "BFGS") == 0) {
  	SEXP ndeps;
  
  	nREPORT = asInteger(getListElement(options, "REPORT"));
--- 248,273 ----
  	for (i = 0; i < npar; i++)
  	    REAL(par)[i] = opar[i] * (OS->parscale[i]);
  	grcount = NA_INTEGER;
  
      }
!     else if (strcmp(tn, "SANN") == 0) {	
!         tmax = asInteger(getListElement(options, "tmax"));
!         temp = asReal(getListElement(options, "temp"));
!         if (tmax == NA_INTEGER) error("tmax is not an integer");
!         if (!isNull(gr)) {
!             if (!isFunction(gr)) error("gr is not a function");
!                 PROTECT(OS->R_gcall = lang2(gr, R_NilValue));
!         } else {
! 	    PROTECT(OS->R_gcall = R_NilValue); /* for balance */
!         }
!         samin (npar, dpar, &val, fminfn, maxit, tmax, temp, trace, (void *)OS);
!         for (i = 0; i < npar; i++)
!             REAL(par)[i] = dpar[i] * (OS->parscale[i]);
!         fncount = maxit;
!         grcount = NA_INTEGER;
!         UNPROTECT(1);  /* OS->R_gcall */
  
      } else if (strcmp(tn, "BFGS") == 0) {
  	SEXP ndeps;
  
  	nREPORT = asInteger(getListElement(options, "REPORT"));
***************
*** 1056,1074 ****
  	Rprintf ("sann objective function values\n");
  	Rprintf ("initial       value %f\n", *yb);
      }
      scale = 1.0/ti;
      its = itdoc = 1;
!     while (its < maxit) { /* cool down system */
  	t = ti/log((double)its + E1);  /* temperature annealing schedule */
  	k = 1;
  	while ((k <= tmax) && (its < maxit))  /* iterate at constant temperature */
  	{
! 	    for (i = 0; i < n; i++)
! 		dp[i] = scale * t * norm_rand();  /* random perturbation */
! 	    for (i = 0; i < n; i++)
! 		ptry[i] = p[i] + dp[i];  /* new candidate point */
  	    ytry = fminfn (n, ptry, ex);
  	    if (!R_FINITE(ytry)) ytry = big;
  	    dy = ytry - y;
  	    if ((dy <= 0.0) || (unif_rand() < exp(-dy/t))) {  /* accept new point? */
  		for (j = 0; j < n; j++) p[j] = ptry[j];
--- 1092,1107 ----
  	Rprintf ("sann objective function values\n");
  	Rprintf ("initial       value %f\n", *yb);
      }
      scale = 1.0/ti;
      its = itdoc = 1;
!     while (its < maxit) {  /* cool down system */
  	t = ti/log((double)its + E1);  /* temperature annealing schedule */
  	k = 1;
  	while ((k <= tmax) && (its < maxit))  /* iterate at constant temperature */
  	{
!             genptry(n, p, ptry, scale * t, ex);  /* generate new candidate point */
  	    ytry = fminfn (n, ptry, ex);
  	    if (!R_FINITE(ytry)) ytry = big;
  	    dy = ytry - y;
  	    if ((dy <= 0.0) || (unif_rand() < exp(-dy/t))) {  /* accept new point? */
  		for (j = 0; j < n; j++) p[j] = ptry[j];

--------------D871E36B191E8352EBC0EAA5--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ko-Kang@xtra.co.nz  Sat Oct 26 09:43:04 2002
From: Ko-Kang@xtra.co.nz (Ko-Kang Kevin Wang)
Date: Sat, 26 Oct 2002 21:43:04 +1300
Subject: R-1.6.1beta available
References: <x2of9t451t.fsf@biostat.ku.dk>
Message-ID: <00fd01c27ccb$b39cd3c0$5c2758db@kwan022>

Just for interests, I have succesfully compiled  R-1.6.1beta_2002-10-25
using ActiveTcl 8.4.1.0 (released on 20 Oct) and Inno Setup 3.0.4 Beta (also
released on 20 Oct).

As mentioned before, with Inno Setup 3.x, they got rid of the
"AlwaysCreateUninstallIcon".  So I had to remove it from JRins before
compilation.  But the main interest, I guess, is it can be compiled with
ActiveTcl 8.4.1.0

Cheers,

Kevin

------------------------------------------------
Ko-Kang Kevin Wang
Post Graduate PGDipSci Student
Department of Statistics
University of Auckland
New Zealand
www.stat.auckland.ac.nz/~kwan022

----- Original Message -----
From: "Peter Dalgaard BSA" <p.dalgaard@biostat.ku.dk>
To: <r-devel@r-project.org>
Sent: Friday, October 18, 2002 1:34 AM
Subject: R-1.6.1beta available


> R 1.6.1 has been scheduled for November 1.
>
> We're makin interim beta versions available via
>
> http://cran.us.r-project.org/src/base
>
> (ftp://cran.us.r-project.org/pub/R/src/base used to work, but
> apparently FTP access has been disabled)
>
> The filename is R-1.6.1beta_*.tar.gz, where * is the creation date.
>
> If you want to help ensure that the final 1.6.1 works satisfactorily
> on *your* platform, it might be a good idea to make a test build of
> the beta and report any errors back (to the r-devel list, not to me
> personally, please!).
>
> New versions will be made available each day until the final release,
> barring hardware trouble and build script failures.
>
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Oct 26 10:48:04 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 26 Oct 2002 10:48:04 +0100 (BST)
Subject: R-1.6.1beta available
In-Reply-To: <00fd01c27ccb$b39cd3c0$5c2758db@kwan022>
Message-ID: <Pine.LNX.4.31.0210261037020.9033-100000@gannet.stats>

On Sat, 26 Oct 2002, Ko-Kang Kevin Wang wrote:

> Just for interests, I have succesfully compiled  R-1.6.1beta_2002-10-25
> using ActiveTcl 8.4.1.0 (released on 20 Oct) and Inno Setup 3.0.4 Beta (also
> released on 20 Oct).

Surely a Beta is never `released'!  We will consider using Inno Setup 3.x
once it really is released.

As far as I know we do not intend to build the 1.6.1 binary with Tcl
8.4.x, and the documentation does say that 8.3.x is required. A given
build has to use either 8.3 or 8.4 as the DLLs have different names.
Given the prevalence of 8.3, we won't I believe be moving to 8.4 for a
patch release. Maybe rw1070 will use Tcl 8.4.x.

> As mentioned before, with Inno Setup 3.x, they got rid of the
> "AlwaysCreateUninstallIcon".  So I had to remove it from JRins before
> compilation.  But the main interest, I guess, is it can be compiled with
> ActiveTcl 8.4.1.0

(I did add a patch to tcltk.c to allow it to build correctly under Tcl
8.4.x.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From frank.kroll@uni-bielefeld.de  Sat Oct 26 11:48:13 2002
From: frank.kroll@uni-bielefeld.de (frank.kroll@uni-bielefeld.de)
Date: Sat, 26 Oct 2002 12:48:13 +0200 (MET DST)
Subject: ls() without variables, which begins with a point (PR#2216)
Message-ID: <200210261048.MAA16177@pubhealth.ku.dk>

Full_Name: Frank Kroll
Version: 1.6.0
OS: Windows
Submission from: (NULL) (217.2.248.125)


The function ls() doesnt show variables, which begins with a point, i.e. .test

> .test<-c(1,2,3)
> .test
[1] 1 2 3
> ls()
character(0)
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Oct 26 14:00:40 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 26 Oct 2002 14:00:40 +0100 (BST)
Subject: ls() without variables, which begins with a point (PR#2216)
In-Reply-To: <200210261048.MAA16177@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210261355210.9237-100000@gannet.stats>

That's not a bug.  See the argument all.names.  There is even an example
on the help page (?ls) to educate you.

Please do read the section of the FAQ on what we want bug reports on.

On Sat, 26 Oct 2002 frank.kroll@uni-bielefeld.de wrote:

> Full_Name: Frank Kroll
> Version: 1.6.0
> OS: Windows
> Submission from: (NULL) (217.2.248.125)
>
>
> The function ls() doesnt show variables, which begins with a point, i.e. .test
>
> > .test<-c(1,2,3)
> > .test
> [1] 1 2 3
> > ls()
> character(0)
> >

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sat Oct 26 14:20:34 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sat, 26 Oct 2002 15:20:34 +0200 (MET DST)
Subject: ls() without variables, which begins with a point (PR#2216)
Message-ID: <200210261320.PAA16492@pubhealth.ku.dk>

frank.kroll@uni-bielefeld.de wrote:
> 
> Full_Name: Frank Kroll
> Version: 1.6.0
> OS: Windows
> Submission from: (NULL) (217.2.248.125)
> 
> The function ls() doesnt show variables, which begins with a point, i.e. .test
> 
> > .test<-c(1,2,3)
> > .test
> [1] 1 2 3
> > ls()
> character(0)

Why do you call this documented feature a bug?

Citing ?ls:
"all.names: a logical value. If TRUE, all object names are returned. If
FALSE, names which begin with a ``.'' are omitted."

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 27 08:18:52 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 27 Oct 2002 08:18:52 +0000 (GMT)
Subject: VR update
Message-ID: <Pine.LNX.4.31.0210270808270.16692-100000@gannet.stats>

There is an update to VR_7.0-9 on CRAN, which you may want to ensure you
have if you are beta-testing 1.6.1.

The only changes are in the scripts, working around changes in lattice,
mclust, nlme (where the examples stopped working on Linux, only, for me a
few months ago) and yags.

We do seem to be getting a lot of API changes in packages, usually
unannounced, and that makes update.packages() a very dangerous tool.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Sun Oct 27 21:40:58 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Sun, 27 Oct 2002 15:40:58 -0600
Subject: RODBC patchlet
Message-ID: <15804.23914.688113.981007@sonny.eddelbuettel.com>


[ Disclaimer: Yes, I do know that RODBC is in a state of minor limbo as far
as maintenance is concerned. But it is also useful, and used, which is why I
hope that someone might apply the small change outlined below. ]

The current version in CRAN's devel directories fails to build under R 1.6.1
(beta from Oct 27):

chibud:/home/edd/RODBC# R CMD INSTALL .
* Installing *source* package 'RODBC' ...
creating cache ./config.cache
checking for library containing SQLTables... -lodbc
updating cache ./config.cache
creating ./config.status
creating src/Makevars
** libs
gcc -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c RODBC.c -o RODBC.o
RODBC.c:22: parse error
make: *** [RODBC.o] Error 1
ERROR: compilation failed for package 'RODBC'

My quick solution was to #ifdef the following block of RODBC.c away:

#if 0
#if R_VERSION < R_Version(1, 2, 0)
# define STRING_ELT(x,i)        (STRING(x)[i])
# define VECTOR_ELT(x,i)        (VECTOR(x)[i])
# define SET_STRING_ELT(x,i,v)  (STRING(x)[i] = (v))
# define SET_VECTOR_ELT(x,i,v)  (VECTOR(x)[i] = (v))
#endif
#endif

I'm sure there is a nicer solution, but it is immediately apparent to me. The
gcc version which puked is 2.95.4 as in Debian testing.

Dirk

-- 
The only function of economic forecasting is to make astrology 
look respectable.                    -- John Kenneth Galbraith
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Oct 28 06:19:56 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 28 Oct 2002 07:19:56 +0100
Subject: RODBC patchlet
In-Reply-To: <15804.23914.688113.981007@sonny.eddelbuettel.com>
References: <15804.23914.688113.981007@sonny.eddelbuettel.com>
Message-ID: <15804.55052.516847.294806@mithrandir.hornik.net>

>>>>> Dirk Eddelbuettel writes:

> [ Disclaimer: Yes, I do know that RODBC is in a state of minor limbo
> as far as maintenance is concerned. But it is also useful, and used,
> which is why I hope that someone might apply the small change outlined
> below. ]

> The current version in CRAN's devel directories fails to build under R
> 1.6.1 (beta from Oct 27):

> chibud:/home/edd/RODBC# R CMD INSTALL .
> * Installing *source* package 'RODBC' ...
> creating cache ./config.cache
> checking for library containing SQLTables... -lodbc
> updating cache ./config.cache
> creating ./config.status
> creating src/Makevars
> ** libs
> gcc -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c RODBC.c -o RODBC.o
> RODBC.c:22: parse error
> make: *** [RODBC.o] Error 1
> ERROR: compilation failed for package 'RODBC'

> My quick solution was to #ifdef the following block of RODBC.c away:

> #if 0
> #if R_VERSION < R_Version(1, 2, 0)
> # define STRING_ELT(x,i)        (STRING(x)[i])
> # define VECTOR_ELT(x,i)        (VECTOR(x)[i])
> # define SET_STRING_ELT(x,i,v)  (STRING(x)[i] = (v))
> # define SET_VECTOR_ELT(x,i,v)  (VECTOR(x)[i] = (v))
> #endif
> #endif

> I'm sure there is a nicer solution, but it is immediately apparent to
> me. The gcc version which puked is 2.95.4 as in Debian testing.

This is basically the right solution: even better is to remove the < 1.2
code and add a Depends on R (>= 1.2) to DESCRIPTION.

Otoh, CRAN only accepts packages which are actively maintained, so we do
need a volunteer to step in.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 28 07:10:03 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 Oct 2002 07:10:03 +0000 (GMT)
Subject: RODBC patchlet
In-Reply-To: <15804.23914.688113.981007@sonny.eddelbuettel.com>
Message-ID: <Pine.LNX.4.31.0210280706270.10525-100000@gannet.stats>

Much more is needed.  I do plan to do produce an update fairly soon,
and as I don't have any current use of this under Unix, I will run it by
you if I may.

Brian

On Sun, 27 Oct 2002, Dirk Eddelbuettel wrote:

>
> [ Disclaimer: Yes, I do know that RODBC is in a state of minor limbo as far
> as maintenance is concerned. But it is also useful, and used, which is why I
> hope that someone might apply the small change outlined below. ]
>
> The current version in CRAN's devel directories fails to build under R 1.6.1
> (beta from Oct 27):
>
> chibud:/home/edd/RODBC# R CMD INSTALL .
> * Installing *source* package 'RODBC' ...
> creating cache ./config.cache
> checking for library containing SQLTables... -lodbc
> updating cache ./config.cache
> creating ./config.status
> creating src/Makevars
> ** libs
> gcc -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c RODBC.c -o RODBC.o
> RODBC.c:22: parse error
> make: *** [RODBC.o] Error 1
> ERROR: compilation failed for package 'RODBC'
>
> My quick solution was to #ifdef the following block of RODBC.c away:

Well, the 160update.txt on the developer site (and the NEWS file) tells
you that you need to include Rversion.h.

> #if 0
> #if R_VERSION < R_Version(1, 2, 0)
> # define STRING_ELT(x,i)        (STRING(x)[i])
> # define VECTOR_ELT(x,i)        (VECTOR(x)[i])
> # define SET_STRING_ELT(x,i,v)  (STRING(x)[i] = (v))
> # define SET_VECTOR_ELT(x,i,v)  (VECTOR(x)[i] = (v))
> #endif
> #endif
>
> I'm sure there is a nicer solution, but it is immediately apparent to me. The
> gcc version which puked is 2.95.4 as in Debian testing.
>
> Dirk
>
> --
> The only function of economic forecasting is to make astrology
> look respectable.                    -- John Kenneth Galbraith
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Oct 28 09:07:20 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Mon, 28 Oct 2002 10:07:20 +0100
Subject: RFC: no automatic updates of packages with major version change
Message-ID: <15804.65096.834736.160738@celeborn.leisch.at>


We (Kurt Hornik, Brian Ripley & I) want to propose the following
change to the automatic package updating mechanisms of R: A major
version number change of a package will by default disable the
automatic updating of packages, because the interface of the package
might have changed and hence old code might not run anymore.

A recent example was the release of mclust version 2.0, which is not
fully compatible with mclust 1.x (functions got removed, others added
and arguments renamed etc).

Of course it is absolutely OK for a package to change its API,
otherwise improvements would be rather hard, but it should be easier
for users to stay with the old version until they have figured out
what exactly the effects of an upgrade would be.

We want to define a "major version number change" as a change of the
first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
from 0.x to 1.x is no major change (because the 0.x series is read as
"working towards 1.0").

In case of a major change

*) update.packages() will warn the user if ask=TRUE, like

mclust :
 Version 1.1-7 in /usr/local/lib/R-contrib 
 Version 2.0-1 on CRAN
 WARNING: major version number change
Update (y/N)?

*) if ask=FALSE, update.packages() will cowardly refuse the updates
 and issue a warning for all packages that have not been updated.

*) the same will be done for the methods working off packageStatus
 objects.

Note that we are already working on new package management tools which
should make it easier to have multiple versions of a package installed
simultaneously. 

All comments are welcome.

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Oct 28 10:19:22 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 28 Oct 2002 11:19:22 +0100 (MET)
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <15804.65096.834736.160738@celeborn.leisch.at>
Message-ID: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>

> 
> We (Kurt Hornik, Brian Ripley & I) want to propose the following
> change to the automatic package updating mechanisms of R: A major
> version number change of a package will by default disable the
> automatic updating of packages, because the interface of the package
> might have changed and hence old code might not run anymore.
> 
> A recent example was the release of mclust version 2.0, which is not
> fully compatible with mclust 1.x (functions got removed, others added
> and arguments renamed etc).
> 
> Of course it is absolutely OK for a package to change its API,
> otherwise improvements would be rather hard, but it should be easier
> for users to stay with the old version until they have figured out
> what exactly the effects of an upgrade would be.
> 
> We want to define a "major version number change" as a change of the
> first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> from 0.x to 1.x is no major change (because the 0.x series is read as
> "working towards 1.0").
> 

This definition requires EVERY package maintainer to be VERY careful about
version numbers / API changes and I guess some of us (including me) may
fail this exercise.

I suggest the following definition: the API of a package changed
iff the example code of the previous version of the package does not run
without an error. In contrast, the results of the computations may
differ. Of course, this induces additional effort to the CRAN maintainers
but it should be possible to extract and check the examples of a CRAN
package against a new version BEFORE uploading the new version to CRAN. In
addition, a flag `APIChange TRUE / FALSE' visible to `update.packages' is
needed.

Or should this be part of R CMD check? Maybe R CMD check can download the
`official' release from CRAN to check against an API change and give a
warning?

best, 

Torsten

> In case of a major change
> 
> *) update.packages() will warn the user if ask=TRUE, like
> 
> mclust :
>  Version 1.1-7 in /usr/local/lib/R-contrib 
>  Version 2.0-1 on CRAN
>  WARNING: major version number change
> Update (y/N)?
> 
> *) if ask=FALSE, update.packages() will cowardly refuse the updates
>  and issue a warning for all packages that have not been updated.
> 
> *) the same will be done for the methods working off packageStatus
>  objects.
> 
> Note that we are already working on new package management tools which
> should make it easier to have multiple versions of a package installed
> simultaneously. 
> 
> All comments are welcome.
> 
> Best,
> Fritz
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 28 11:28:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 Oct 2002 11:28:30 +0000 (GMT)
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
Message-ID: <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>

Torsten,

I did suggest that test at an earlier stage in the discussions.  But some
packages have so few examples they may well pass and have repercussions.

I do think we need to address the problem: lattice_0.6-5 is another
example of an API change.

Now, we could throw the onus on the maintainers to add a

BackwardsCompatible:FALSE

flag to the DESCRIPTION file, if people really think that would be easier.

Brian

On Mon, 28 Oct 2002, Torsten Hothorn wrote:

> >
> > We (Kurt Hornik, Brian Ripley & I) want to propose the following
> > change to the automatic package updating mechanisms of R: A major
> > version number change of a package will by default disable the
> > automatic updating of packages, because the interface of the package
> > might have changed and hence old code might not run anymore.
> >
> > A recent example was the release of mclust version 2.0, which is not
> > fully compatible with mclust 1.x (functions got removed, others added
> > and arguments renamed etc).
> >
> > Of course it is absolutely OK for a package to change its API,
> > otherwise improvements would be rather hard, but it should be easier
> > for users to stay with the old version until they have figured out
> > what exactly the effects of an upgrade would be.
> >
> > We want to define a "major version number change" as a change of the
> > first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> > change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> > from 0.x to 1.x is no major change (because the 0.x series is read as
> > "working towards 1.0").
> >
>
> This definition requires EVERY package maintainer to be VERY careful about
> version numbers / API changes and I guess some of us (including me) may
> fail this exercise.
>
> I suggest the following definition: the API of a package changed
> iff the example code of the previous version of the package does not run
> without an error. In contrast, the results of the computations may
> differ. Of course, this induces additional effort to the CRAN maintainers
> but it should be possible to extract and check the examples of a CRAN
> package against a new version BEFORE uploading the new version to CRAN. In
> addition, a flag `APIChange TRUE / FALSE' visible to `update.packages' is
> needed.
>
> Or should this be part of R CMD check? Maybe R CMD check can download the
> `official' release from CRAN to check against an API change and give a
> warning?
>
> best,
>
> Torsten
>
> > In case of a major change
> >
> > *) update.packages() will warn the user if ask=TRUE, like
> >
> > mclust :
> >  Version 1.1-7 in /usr/local/lib/R-contrib
> >  Version 2.0-1 on CRAN
> >  WARNING: major version number change
> > Update (y/N)?
> >
> > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> >  and issue a warning for all packages that have not been updated.
> >
> > *) the same will be done for the methods working off packageStatus
> >  objects.
> >
> > Note that we are already working on new package management tools which
> > should make it easier to have multiple versions of a package installed
> > simultaneously.
> >
> > All comments are welcome.
> >
> > Best,
> > Fritz
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Oct 28 11:54:47 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 28 Oct 2002 12:54:47 +0100
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
References: <15804.65096.834736.160738@celeborn.leisch.at>
 <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
Message-ID: <15805.9607.993910.88576@mithrandir.hornik.net>

>>>>> Torsten Hothorn writes:

>> 
>> We (Kurt Hornik, Brian Ripley & I) want to propose the following
>> change to the automatic package updating mechanisms of R: A major
>> version number change of a package will by default disable the
>> automatic updating of packages, because the interface of the package
>> might have changed and hence old code might not run anymore.
>> 
>> A recent example was the release of mclust version 2.0, which is not
>> fully compatible with mclust 1.x (functions got removed, others added
>> and arguments renamed etc).
>> 
>> Of course it is absolutely OK for a package to change its API,
>> otherwise improvements would be rather hard, but it should be easier
>> for users to stay with the old version until they have figured out
>> what exactly the effects of an upgrade would be.
>> 
>> We want to define a "major version number change" as a change of the
>> first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
>> change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
>> from 0.x to 1.x is no major change (because the 0.x series is read as
>> "working towards 1.0").
>> 

> This definition requires EVERY package maintainer to be VERY careful
> about version numbers / API changes and I guess some of us (including
> me) may fail this exercise.

> I suggest the following definition: the API of a package changed iff
> the example code of the previous version of the package does not run
> without an error. In contrast, the results of the computations may
> differ. Of course, this induces additional effort to the CRAN
> maintainers but it should be possible to extract and check the
> examples of a CRAN package against a new version BEFORE uploading the
> new version to CRAN. In addition, a flag `APIChange TRUE / FALSE'
> visible to `update.packages' is needed.

> Or should this be part of R CMD check? Maybe R CMD check can download
> the `official' release from CRAN to check against an API change and
> give a warning?

All of this might be doable but I am not sure it is worth the effort.

If a package has basically no examples then it can change things in
all possible ways without breaking its examples.  So I think that the
condition is an 'if' but far far away from an 'only if'.

I would assume that most package writers know when they change their
code in incompatible ways.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Oct 28 12:18:57 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 28 Oct 2002 13:18:57 +0100
Subject: RODBC patchlet
In-Reply-To: <Pine.LNX.4.31.0210280706270.10525-100000@gannet.stats>
References: <15804.23914.688113.981007@sonny.eddelbuettel.com>
 <Pine.LNX.4.31.0210280706270.10525-100000@gannet.stats>
Message-ID: <15805.11057.675721.725432@mithrandir.hornik.net>

>>>>>   writes:

> Much more is needed.  I do plan to do produce an update fairly soon,
> and as I don't have any current use of this under Unix, I will run it
> by you if I may.

Great news!  Thanks for taking this up, Brian.

Best
-k

> Brian

> On Sun, 27 Oct 2002, Dirk Eddelbuettel wrote:

>> 
>> [ Disclaimer: Yes, I do know that RODBC is in a state of minor limbo as far
>> as maintenance is concerned. But it is also useful, and used, which is why I
>> hope that someone might apply the small change outlined below. ]
>> 
>> The current version in CRAN's devel directories fails to build under R 1.6.1
>> (beta from Oct 27):
>> 
>> chibud:/home/edd/RODBC# R CMD INSTALL .
>> * Installing *source* package 'RODBC' ...
>> creating cache ./config.cache
>> checking for library containing SQLTables... -lodbc
>> updating cache ./config.cache
>> creating ./config.status
>> creating src/Makevars
>> ** libs
>> gcc -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c RODBC.c -o RODBC.o
>> RODBC.c:22: parse error
>> make: *** [RODBC.o] Error 1
>> ERROR: compilation failed for package 'RODBC'
>> 
>> My quick solution was to #ifdef the following block of RODBC.c away:

> Well, the 160update.txt on the developer site (and the NEWS file) tells
> you that you need to include Rversion.h.

>> #if 0
>> #if R_VERSION < R_Version(1, 2, 0)
>> # define STRING_ELT(x,i)        (STRING(x)[i])
>> # define VECTOR_ELT(x,i)        (VECTOR(x)[i])
>> # define SET_STRING_ELT(x,i,v)  (STRING(x)[i] = (v))
>> # define SET_VECTOR_ELT(x,i,v)  (VECTOR(x)[i] = (v))
>> #endif
>> #endif
>> 
>> I'm sure there is a nicer solution, but it is immediately apparent to me. The
>> gcc version which puked is 2.95.4 as in Debian testing.
>> 
>> Dirk
>> 
>> --
>> The only function of economic forecasting is to make astrology
>> look respectable.                    -- John Kenneth Galbraith
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>> 

> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Oct 28 12:24:51 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 28 Oct 2002 13:24:51 +0100 (MET)
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
Message-ID: <Pine.LNX.4.21.0210281322240.12788-100000@artemis>


On Mon, 28 Oct 2002 ripley@stats.ox.ac.uk wrote:

> Torsten,
> 
> I did suggest that test at an earlier stage in the discussions.  But some
> packages have so few examples they may well pass and have repercussions.
> 

ok, I see.

> I do think we need to address the problem: lattice_0.6-5 is another
> example of an API change.
> 
> Now, we could throw the onus on the maintainers to add a
> 
> BackwardsCompatible:FALSE
> 
> flag to the DESCRIPTION file, if people really think that would be easier.
> 

yes, that would be better than just assuming API changes in every major
release. 

Torsten

> Brian
> 
> On Mon, 28 Oct 2002, Torsten Hothorn wrote:
> 
> > >
> > > We (Kurt Hornik, Brian Ripley & I) want to propose the following
> > > change to the automatic package updating mechanisms of R: A major
> > > version number change of a package will by default disable the
> > > automatic updating of packages, because the interface of the package
> > > might have changed and hence old code might not run anymore.
> > >
> > > A recent example was the release of mclust version 2.0, which is not
> > > fully compatible with mclust 1.x (functions got removed, others added
> > > and arguments renamed etc).
> > >
> > > Of course it is absolutely OK for a package to change its API,
> > > otherwise improvements would be rather hard, but it should be easier
> > > for users to stay with the old version until they have figured out
> > > what exactly the effects of an upgrade would be.
> > >
> > > We want to define a "major version number change" as a change of the
> > > first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> > > change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> > > from 0.x to 1.x is no major change (because the 0.x series is read as
> > > "working towards 1.0").
> > >
> >
> > This definition requires EVERY package maintainer to be VERY careful about
> > version numbers / API changes and I guess some of us (including me) may
> > fail this exercise.
> >
> > I suggest the following definition: the API of a package changed
> > iff the example code of the previous version of the package does not run
> > without an error. In contrast, the results of the computations may
> > differ. Of course, this induces additional effort to the CRAN maintainers
> > but it should be possible to extract and check the examples of a CRAN
> > package against a new version BEFORE uploading the new version to CRAN. In
> > addition, a flag `APIChange TRUE / FALSE' visible to `update.packages' is
> > needed.
> >
> > Or should this be part of R CMD check? Maybe R CMD check can download the
> > `official' release from CRAN to check against an API change and give a
> > warning?
> >
> > best,
> >
> > Torsten
> >
> > > In case of a major change
> > >
> > > *) update.packages() will warn the user if ask=TRUE, like
> > >
> > > mclust :
> > >  Version 1.1-7 in /usr/local/lib/R-contrib
> > >  Version 2.0-1 on CRAN
> > >  WARNING: major version number change
> > > Update (y/N)?
> > >
> > > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> > >  and issue a warning for all packages that have not been updated.
> > >
> > > *) the same will be done for the methods working off packageStatus
> > >  objects.
> > >
> > > Note that we are already working on new package management tools which
> > > should make it easier to have multiple versions of a package installed
> > > simultaneously.
> > >
> > > All comments are welcome.
> > >
> > > Best,
> > > Fritz
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From philippe.grosjean@ifremer.fr  Mon Oct 28 13:06:18 2002
From: philippe.grosjean@ifremer.fr (Philippe Grosjean)
Date: Mon, 28 Oct 2002 14:06:18 +0100
Subject: no automatic updates of packages with major version change
Message-ID: <MABBLJDICACNFOLGIHJOEEEIDAAA.philippe.grosjean@ifremer.fr>

>We (Kurt Hornik, Brian Ripley & I) want to propose the following
>change to the automatic package updating mechanisms of R: A major
>version number change of a package will by default disable the
>automatic updating of packages, because the interface of the package
>might have changed and hence old code might not run anymore.

>...

>We want to define a "major version number change" as a change of the
>first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
>change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
>from 0.x to 1.x is no major change (because the 0.x series is read as
>"working towards 1.0").

This makes sense, otherwise, what would be the reasons of a "complex"
three-level granularity versioning system
X.Y-Z with:
- X being major changes implying *modifications* of the interface (I would
rather eliminate "might" in "might" have changed, otherwise, nobody will
ever know if something really changed or not, see hereunder!)
- Y being addition of new features, while staying fully compatible with the
previous version (with same X)
- Z being maintenance version (no new feature compared to same X.Y, but
correction of bugs).

If everybody conform strictly to this scheme, life will be much, much more
easier! The problem is that not everybody does... and we have X.Y versions
for some packages (what do they means?), or even 2002.X-Y (with 2002 being
the year, and perhaps X being the month [??] of release). All this is
confusing. It should be useful to explain more deeply the recommended
versioning system for R packages in R-exts.pdf.

I understand that, currently, major version 'X' is admitted to increase when
major changes are made, even when the upgraded package remains fully
compatible with the previous version (and this is the desired behaviour, of
course). So, my suggestion is allowing 'X' to increase *only* when
*incompatible* changes are made.

There is still a problem with this versioning system for R packages. When
somebody wants to keep an old major version to keep compatibility with old
scripts, and want also to install the brand new major version to start
exploring it. In this case, there is a conflict because both packages bear
the same name! The simplest solution would be to change the name of the
package (for 'PkgName' for version 1.Y.Z to 'PkgName2' for version
2.Y.Z,...) allowing two or more major versions to live in the same system,
as it was once the case for survival (and now for 'mclust' versus
'mclust1998', although in this case it is the old package that changes its
name, and this is a problem for scripts that use something like
'require(mclust)' and refer to the old interface!!!). There are still
possible confusion when both 'PkgName' and 'PkgName2' are loaded
simultaneously, because many functions are likely to have the same name in
both packages,... but at least, it solves a part of the problem.

Best,

Philippe Grosjean

...........]<(({<...............<}))><...............................
( ( ( ( (
 ) ) ) ) )      Philippe Grosjean
( ( ( ( (
 ) ) ) ) )      IFREMER Nantes - DEL/AO
( ( ( ( (       rue de l'Ile d'Yeu, BP 21105, 44311 Nantes Cedex 3
 ) ) ) ) )      tel: (33) 02.40.37.42.29, fax: (33) 02.40.37.42.41
( ( ( ( ( 
 ) ) ) ) )      SciViews project coordinator (http://www.sciviews.org)
( ( ( ( (       e-mail: phgrosjean@sciviews.org
 ) ) ) ) ) 
( ( ( ( (       "I'm 100% confident that p is between 0 and 1"
 ) ) ) ) )                                L. Gonick & W. Smith (1993)
.......................................................................


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Mon Oct 28 13:08:26 2002
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Mon, 28 Oct 2002 14:08:26 +0100
Subject: RFC: no automatic updates of packages with major version change
References: <Pine.LNX.4.21.0210281322240.12788-100000@artemis>
Message-ID: <3DBD36CA.777A0B6E@ci.tuwien.ac.at>

Torsten Hothorn wrote:
> 
> On Mon, 28 Oct 2002 ripley@stats.ox.ac.uk wrote:
> 
> > Torsten,
> >
> > I did suggest that test at an earlier stage in the discussions.  But some
> > packages have so few examples they may well pass and have repercussions.
> >
> 
> ok, I see.
> 
> > I do think we need to address the problem: lattice_0.6-5 is another
> > example of an API change.
> >
> > Now, we could throw the onus on the maintainers to add a
> >
> > BackwardsCompatible:FALSE
> >
> > flag to the DESCRIPTION file, if people really think that would be easier.
> >
> 
> yes, that would be better than just assuming API changes in every major
> release.

I would agree with that. By now the version is just required to be "a
sequence of at least non-negative integers separated by single `.' or
`-' characters" and can not necessarily be expected to follow the same
system as the R releases.
A field in the DESCRIPTION file is something package maintainers are
more used to, I guess. And obviously there are sometimes API changes
that do not occur when there is a major version number change...
Z

> Torsten
> 
> > Brian
> >
> > On Mon, 28 Oct 2002, Torsten Hothorn wrote:
> >
> > > >
> > > > We (Kurt Hornik, Brian Ripley & I) want to propose the following
> > > > change to the automatic package updating mechanisms of R: A major
> > > > version number change of a package will by default disable the
> > > > automatic updating of packages, because the interface of the package
> > > > might have changed and hence old code might not run anymore.
> > > >
> > > > A recent example was the release of mclust version 2.0, which is not
> > > > fully compatible with mclust 1.x (functions got removed, others added
> > > > and arguments renamed etc).
> > > >
> > > > Of course it is absolutely OK for a package to change its API,
> > > > otherwise improvements would be rather hard, but it should be easier
> > > > for users to stay with the old version until they have figured out
> > > > what exactly the effects of an upgrade would be.
> > > >
> > > > We want to define a "major version number change" as a change of the
> > > > first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> > > > change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> > > > from 0.x to 1.x is no major change (because the 0.x series is read as
> > > > "working towards 1.0").
> > > >
> > >
> > > This definition requires EVERY package maintainer to be VERY careful about
> > > version numbers / API changes and I guess some of us (including me) may
> > > fail this exercise.
> > >
> > > I suggest the following definition: the API of a package changed
> > > iff the example code of the previous version of the package does not run
> > > without an error. In contrast, the results of the computations may
> > > differ. Of course, this induces additional effort to the CRAN maintainers
> > > but it should be possible to extract and check the examples of a CRAN
> > > package against a new version BEFORE uploading the new version to CRAN. In
> > > addition, a flag `APIChange TRUE / FALSE' visible to `update.packages' is
> > > needed.
> > >
> > > Or should this be part of R CMD check? Maybe R CMD check can download the
> > > `official' release from CRAN to check against an API change and give a
> > > warning?
> > >
> > > best,
> > >
> > > Torsten
> > >
> > > > In case of a major change
> > > >
> > > > *) update.packages() will warn the user if ask=TRUE, like
> > > >
> > > > mclust :
> > > >  Version 1.1-7 in /usr/local/lib/R-contrib
> > > >  Version 2.0-1 on CRAN
> > > >  WARNING: major version number change
> > > > Update (y/N)?
> > > >
> > > > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> > > >  and issue a warning for all packages that have not been updated.
> > > >
> > > > *) the same will be done for the methods working off packageStatus
> > > >  objects.
> > > >
> > > > Note that we are already working on new package management tools which
> > > > should make it easier to have multiple versions of a package installed
> > > > simultaneously.
> > > >
> > > > All comments are welcome.
> > > >
> > > > Best,
> > > > Fritz
> > > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > > Send "info", "help", or "[un]subscribe"
> > > > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > > >
> > >
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > >
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Mon Oct 28 13:09:50 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Mon, 28 Oct 2002 08:09:50 -0500
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
References: <Pine.LNX.4.21.0210281107130.7939-100000@artemis> <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
Message-ID: <pvcqru8mhqodgt4gpks5p7qaksar88nifk@4ax.com>

On Mon, 28 Oct 2002 11:28:30 +0000 (GMT), you wrote:

>Now, we could throw the onus on the maintainers to add a
>
>BackwardsCompatible:FALSE
>
>flag to the DESCRIPTION file, if people really think that would be easier.

I think that approach would be better. A major version number change
is appropriate if I add a lot of functions to a package, even though
it may still be compatible with earlier releases.

But instead of "FALSE", I'd rather see the earliest compatible version
number listed.  For example, if 1.0, 2.0 and 2.1 are all compatible,
all versions could say

 BackwardsCompatibleTo:  1.0

If I had skipped upgrading to 2.0, I'd still know that 2.1 is
compatible with 1.0.  Similarly, if 2.0 was incompatible with 1.0,
this scheme would tell me that it was not safe to go directly from 1.0
to 2.1.

Duncan Murdoch

 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Mon Oct 28 13:12:19 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Mon, 28 Oct 2002 08:12:19 -0500
Subject: RFC: no automatic updates of packages with major version
 chan	ge
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC815@usrymx10.merck.com>

Is it possible to have a slightly more elaborate description, such as:

BackwardCompatibleTo: x.x-x

and if the new version is _not_ backward compatible, this would be the
current version number?

Just my $0.02...

Andy

-----Original Message-----
From: Torsten Hothorn [mailto:Torsten.Hothorn@rzmail.uni-erlangen.de]
Sent: Monday, October 28, 2002 7:25 AM
To: ripley@stats.ox.ac.uk
Cc: Friedrich.Leisch@ci.tuwien.ac.at; r-devel@stat.math.ethz.ch
Subject: Re: RFC: no automatic updates of packages with major version
change



On Mon, 28 Oct 2002 ripley@stats.ox.ac.uk wrote:

> Torsten,
> 
> I did suggest that test at an earlier stage in the discussions.  But some
> packages have so few examples they may well pass and have repercussions.
> 

ok, I see.

> I do think we need to address the problem: lattice_0.6-5 is another
> example of an API change.
> 
> Now, we could throw the onus on the maintainers to add a
> 
> BackwardsCompatible:FALSE
> 
> flag to the DESCRIPTION file, if people really think that would be easier.
> 

yes, that would be better than just assuming API changes in every major
release. 

Torsten

> Brian
> 
> On Mon, 28 Oct 2002, Torsten Hothorn wrote:
> 
> > >
> > > We (Kurt Hornik, Brian Ripley & I) want to propose the following
> > > change to the automatic package updating mechanisms of R: A major
> > > version number change of a package will by default disable the
> > > automatic updating of packages, because the interface of the package
> > > might have changed and hence old code might not run anymore.
> > >
> > > A recent example was the release of mclust version 2.0, which is not
> > > fully compatible with mclust 1.x (functions got removed, others added
> > > and arguments renamed etc).
> > >
> > > Of course it is absolutely OK for a package to change its API,
> > > otherwise improvements would be rather hard, but it should be easier
> > > for users to stay with the old version until they have figured out
> > > what exactly the effects of an upgrade would be.
> > >
> > > We want to define a "major version number change" as a change of the
> > > first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> > > change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> > > from 0.x to 1.x is no major change (because the 0.x series is read as
> > > "working towards 1.0").
> > >
> >
> > This definition requires EVERY package maintainer to be VERY careful
about
> > version numbers / API changes and I guess some of us (including me) may
> > fail this exercise.
> >
> > I suggest the following definition: the API of a package changed
> > iff the example code of the previous version of the package does not run
> > without an error. In contrast, the results of the computations may
> > differ. Of course, this induces additional effort to the CRAN
maintainers
> > but it should be possible to extract and check the examples of a CRAN
> > package against a new version BEFORE uploading the new version to CRAN.
In
> > addition, a flag `APIChange TRUE / FALSE' visible to `update.packages'
is
> > needed.
> >
> > Or should this be part of R CMD check? Maybe R CMD check can download
the
> > `official' release from CRAN to check against an API change and give a
> > warning?
> >
> > best,
> >
> > Torsten
> >
> > > In case of a major change
> > >
> > > *) update.packages() will warn the user if ask=TRUE, like
> > >
> > > mclust :
> > >  Version 1.1-7 in /usr/local/lib/R-contrib
> > >  Version 2.0-1 on CRAN
> > >  WARNING: major version number change
> > > Update (y/N)?
> > >
> > > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> > >  and issue a warning for all packages that have not been updated.
> > >
> > > *) the same will be done for the methods working off packageStatus
> > >  objects.
> > >
> > > Note that we are already working on new package management tools which
> > > should make it easier to have multiple versions of a package installed
> > > simultaneously.
> > >
> > > All comments are welcome.
> > >
> > > Best,
> > > Fritz
> > >
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> > > r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
> > >
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
> > >
> >
> >
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> > r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
> >
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named in this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Mon Oct 28 14:22:23 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Mon, 28 Oct 2002 08:22:23 -0600
Subject: RODBC patchlet
Message-ID: <E186Amd-0003aF-00@sonny.eddelbuettel.com>



> > Much more is needed.  I do plan to do produce an update fairly soon,
> > and as I don't have any current use of this under Unix, I will run it
> > by you if I may.
> 
> Great news!  Thanks for taking this up, Brian.

Seconded. I really appreciate it, Brian. If you need help with Unix testing,
I do have the unixODBC libraries and headers here and would gladly run tests.

Dirk

-- 
According to the latest figures, 43% of all signatures are totally worthless.   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct 28 15:08:46 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 28 Oct 2002 07:08:46 -0800 (PST)
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <15804.65096.834736.160738@celeborn.leisch.at>
Message-ID: <Pine.A41.4.44.0210280705450.104804-100000@homer36.u.washington.edu>

On Mon, 28 Oct 2002 Friedrich.Leisch@ci.tuwien.ac.at wrote:
>
> We want to define a "major version number change" as a change of the
> first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> from 0.x to 1.x is no major change (because the 0.x series is read as
> "working towards 1.0").
>

While R could set whatever standards it likes for package numbers I think
it's asking for trouble to require no API changes before version 1.0 (as
grid illustrates)

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Mon Oct 28 14:41:58 2002
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Mon, 28 Oct 2002 10:41:58 -0400
Subject: RFC: no automatic updates of packages with major version change
References: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
Message-ID: <3DBD4CB6.1DEDEB5@umsanet.edu.bo>



Torsten Hothorn wrote:
.
.
.

> 
> Or should this be part of R CMD check? Maybe R CMD check can download the
> `official' release from CRAN to check against an API change and give a
> warning?

It would be very inconvenient if R CMD check couldn't be run on a
machine without internet conection --- or a very unstable conection, as
I have.

Kjetil Halvorsen

> 
> best,
> 
> Torsten
> 
> > In case of a major change
> >
> > *) update.packages() will warn the user if ask=TRUE, like
> >
> > mclust :
> >  Version 1.1-7 in /usr/local/lib/R-contrib
> >  Version 2.0-1 on CRAN
> >  WARNING: major version number change
> > Update (y/N)?
> >
> > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> >  and issue a warning for all packages that have not been updated.
> >
> > *) the same will be done for the methods working off packageStatus
> >  objects.
> >
> > Note that we are already working on new package management tools which
> > should make it easier to have multiple versions of a package installed
> > simultaneously.
> >
> > All comments are welcome.
> >
> > Best,
> > Fritz
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Oct 28 15:10:13 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 28 Oct 2002 10:10:13 -0500
Subject: RFC: no automatic updates of packages with major version change
References: <Pine.LNX.4.21.0210281107130.7939-100000@artemis> <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats> <pvcqru8mhqodgt4gpks5p7qaksar88nifk@4ax.com>
Message-ID: <3DBD5355.59B59755@bank-banque-canada.ca>

> >Now, we could throw the onus on the maintainers to add a
> >
> >BackwardsCompatible:FALSE
> >
> >flag to the DESCRIPTION file, if people really think that would be easier.

> But instead of "FALSE", I'd rather see the earliest compatible version
> number listed.  For example, if 1.0, 2.0 and 2.1 are all compatible,
> all versions could say
> 
>  BackwardsCompatibleTo:  1.0

I like this better too. To be safe, it is better to assume no backwards
compatibility unless it is indicate. Thus, if the line is omitted in the latter
case, then there is no guarantee, and in the former case the line should be

BackwardsCompatible:TRUE

with the default being FALSE.

Another thing that may be worth distinguishing is whether this means a library
is thought to be backward compatible, or tested to be backward compatible (and
perhaps tested on which versions of R). With respect to Depends: ( R > ?? ) I
admit to being somewhat delinquent in this respect. I change the R version if I
know something has changed, but I rarely test with old versions, and when I do
it is certainly only on one operating system.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a.stephenson@lancaster.ac.uk  Mon Oct 28 15:54:05 2002
From: a.stephenson@lancaster.ac.uk (a.stephenson@lancaster.ac.uk)
Date: Mon, 28 Oct 2002 16:54:05 +0100 (MET)
Subject: as.POSIX (PR#2222)
Message-ID: <200210281554.QAA28705@pubhealth.ku.dk>

Full_Name: Alec Stephenson
Version: 1.6.0
OS: linux
Submission from: (NULL) (148.88.138.5)


Appears to be a sign error in as.POSIX(lt/ct)

> library("chron")

The following is fine, with default origin.

> tmp <- chron(1:2, origin = c(1,1,1970))
> as.POSIXlt(tmp)
[1] "1970-01-02 01:00:00 GMT" "1970-01-03 01:00:00 GMT"

These are not.

> tmp <- chron(1:2, origin = c(1,1,1960))
> tmp
[1] 01/02/60 01/03/60
> as.POSIXlt(tmp)
[1] "1980-01-03 GMT" "1980-01-04 GMT"

> tmp <- chron(1:2, origin = c(1,1,1990))
> tmp
[1] 01/02/90 01/03/90
> as.POSIXlt(tmp)
[1] "1950-01-02 GMT" "1950-01-03 GMT"


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.0              
year     2002             
month    10               
day      01               
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgentry@jimmy.harvard.edu  Mon Oct 28 17:03:31 2002
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Mon, 28 Oct 2002 12:03:31 -0500 (EST)
Subject: no automatic updates of packages with major version change
In-Reply-To: <MABBLJDICACNFOLGIHJOEEEIDAAA.philippe.grosjean@ifremer.fr>
Message-ID: <Pine.SOL.4.20.0210281202090.10205-100000@santiam.dfci.harvard.edu>

> There is still a problem with this versioning system for R packages. When
> somebody wants to keep an old major version to keep compatibility with old
> scripts, and want also to install the brand new major version to start
> exploring it. In this case, there is a conflict because both packages bear
> the same name! The simplest solution would be to change the name of the
> package (for 'PkgName' for version 1.Y.Z to 'PkgName2' for version
> 2.Y.Z,...) allowing two or more major versions to live in the same system,

Another thing you can do for now is to maintain multiple R library
directories.  You would just have to be careful with the .libPaths(), etc.

This doesn't solve the problem of having them simultaneously loaded, but
for installs it will work.

-J

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 28 17:07:05 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Oct 2002 18:07:05 +0100
Subject: as.POSIX (PR#2222)
In-Reply-To: <200210281554.QAA28705@pubhealth.ku.dk>
References: <200210281554.QAA28705@pubhealth.ku.dk>
Message-ID: <x24rb6a3wm.fsf@biostat.ku.dk>

a.stephenson@lancaster.ac.uk writes:

> Full_Name: Alec Stephenson
> Version: 1.6.0
> OS: linux
> Submission from: (NULL) (148.88.138.5)
> 
> 
> Appears to be a sign error in as.POSIX(lt/ct)
> 
> > library("chron")
> 
> The following is fine, with default origin.
> 
> > tmp <- chron(1:2, origin = c(1,1,1970))
> > as.POSIXlt(tmp)
> [1] "1970-01-02 01:00:00 GMT" "1970-01-03 01:00:00 GMT"
> 
> These are not.
> 
> > tmp <- chron(1:2, origin = c(1,1,1960))
> > tmp
> [1] 01/02/60 01/03/60
> > as.POSIXlt(tmp)
> [1] "1980-01-03 GMT" "1980-01-04 GMT"
> 
> > tmp <- chron(1:2, origin = c(1,1,1990))
> > tmp
> [1] 01/02/90 01/03/90
> > as.POSIXlt(tmp)
> [1] "1950-01-02 GMT" "1950-01-03 GMT"

Right. as.POSIXct.dates subtracts where it should add. Fixed
for 1.6.1 (provided it checks out).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@jacksonia.maths.uwa.edu.au  Tue Oct 29 01:22:23 2002
From: berwin@jacksonia.maths.uwa.edu.au (Berwin Turlach)
Date: Tue, 29 Oct 2002 09:22:23 +0800
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
References: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
 <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
Message-ID: <15805.58063.994819.394198@localhost.localdomain>

>>>>> "BDR" ==   <ripley@stats.ox.ac.uk> writes:

    BDR> Now, we could throw the onus on the maintainers to add a

    BDR> BackwardsCompatible:FALSE

    BDR> flag to the DESCRIPTION file, if people really think that
    BDR> would be easier.
I wouldn't not find this easier, perhaps even not feasible. 

One reason is that, e.g., the "tseries" package depends on the
"quadprog" package (S original by me, ported to R by Andreas
Weingessel).  When I finally get around to update that package and
release a new version, I might be able to guarantee that the functions
that I meant to be the API are backwards compatible but short of
analysing the "tseries" code, I could not guarantee that the new
version will not break "tseries".  E.g., it could be that "tseries"
calls the FORTRAN code of "quadprog" directly and doesn't use
"quadprog"s R interface to the FORTRAN code.

Also, every larger package has functions it it that build the API, but
also functions that are helpful for the "main" functions and are not
for direct use by the user.  For example "merge.formula" in the
package "lasso2".  The manual says that is is not intended to be
called directly by the user.  But how should the maintainer now if
everybody follows this request?  Thus, if this function were to change
during a revision in a major way but not the functions that are meant
to build the API, would this mean that the new version is backward
compatible? 

Best wishes,

     Berwin

========================== Full address ============================
Berwin A Turlach                      Tel.: +61 (8) 9380 3338 (secr)   
School of Mathematics and Statistics        +61 (8) 9380 3383 (self)      
The University of Western Australia   FAX : +61 (8) 9380 1028
35 Stirling Highway                   
Crawley WA 6009                e-mail: berwin@maths.uwa.edu.au
Australia                        http://www.maths.uwa.edu.au/~berwin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a.stephenson@lancaster.ac.uk  Tue Oct 29 11:20:11 2002
From: a.stephenson@lancaster.ac.uk (a.stephenson@lancaster.ac.uk)
Date: Tue, 29 Oct 2002 12:20:11 +0100 (MET)
Subject: documentation for require (PR#2226)
Message-ID: <200210291120.MAA04954@pubhealth.ku.dk>

Full_Name: alec stephenson
Version: 1.6.0
OS: linux
Submission from: (NULL) (148.88.138.5)


The documentation for the function require is incorrect.

The file library.Rd has in its arguments section

  \item{quietly}{a logical.  If \code{TRUE}, a warning will not be
      printed if the package cannot be found.}

which is incorrect, as a warning message is always given if the package 
is not found.
Should be something like

  \item{quietly}{a logical.  If \code{TRUE}, a message confirming
      package loading is not printed.}

also, the details section has

  \code{require} is designed for use
  inside other functions; it returns \code{FALSE} and optionally gives a
  warning, rather than giving an error, if the package does not exist.

The sentence after the semi-colon is also appears to be incorrect, as
require calls library with logical.return = TRUE.
Should be something like 

  \code{require} is designed for use
  inside other functions; it returns \code{FALSE} and gives a warning
  if the package does not exist.



> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.0              
year     2002             
month    10               
day      01               
language R 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Tue Oct 29 13:03:39 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Tue, 29 Oct 2002 08:03:39 -0500
Subject: RFC: no automatic updates of packages with major version
 chan	ge
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC820@usrymx10.merck.com>

My understanding is that API needs to be a documented part of the software.
In the current R packaging system, there doesn't seem to be a way to
document interface to compiled code (i.e., what routines can be called and
how to call them) except in the comments, so I'd think calling compiled code
in other packages is not encouraged.  I should think people realize that
undocumented parts of the software are subject to change without notice.
People who make use of such things ought to know they are treading on thin
ice, IMHO.

Just my $0.02...
Andy

-----Original Message-----
From: Berwin Turlach [mailto:berwin@jacksonia.maths.uwa.edu.au]
Sent: Monday, October 28, 2002 8:22 PM
To: r-devel@stat.math.ethz.ch
Subject: Re: RFC: no automatic updates of packages with major version
change


>>>>> "BDR" ==   <ripley@stats.ox.ac.uk> writes:

    BDR> Now, we could throw the onus on the maintainers to add a

    BDR> BackwardsCompatible:FALSE

    BDR> flag to the DESCRIPTION file, if people really think that
    BDR> would be easier.
I wouldn't not find this easier, perhaps even not feasible. 

One reason is that, e.g., the "tseries" package depends on the
"quadprog" package (S original by me, ported to R by Andreas
Weingessel).  When I finally get around to update that package and
release a new version, I might be able to guarantee that the functions
that I meant to be the API are backwards compatible but short of
analysing the "tseries" code, I could not guarantee that the new
version will not break "tseries".  E.g., it could be that "tseries"
calls the FORTRAN code of "quadprog" directly and doesn't use
"quadprog"s R interface to the FORTRAN code.

Also, every larger package has functions it it that build the API, but
also functions that are helpful for the "main" functions and are not
for direct use by the user.  For example "merge.formula" in the
package "lasso2".  The manual says that is is not intended to be
called directly by the user.  But how should the maintainer now if
everybody follows this request?  Thus, if this function were to change
during a revision in a major way but not the functions that are meant
to build the API, would this mean that the new version is backward
compatible? 

Best wishes,

     Berwin

========================== Full address ============================
Berwin A Turlach                      Tel.: +61 (8) 9380 3338 (secr)   
School of Mathematics and Statistics        +61 (8) 9380 3383 (self)      
The University of Western Australia   FAX : +61 (8) 9380 1028
35 Stirling Highway                   
Crawley WA 6009                e-mail: berwin@maths.uwa.edu.au
Australia                        http://www.maths.uwa.edu.au/~berwin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Oct 29 17:34:30 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Tue, 29 Oct 2002 18:34:30 +0100 (MET)
Subject: patch to mva:prcomp to use La.svd instead of svd (PR#2227)
Message-ID: <200210291734.SAA09198@pubhealth.ku.dk>


Per the discussion about the problems with prcomp() when n << p,  which
boils down to a problem with svd() when n << p,
here is a patch to prcomp() which substitutes La.svd() instead of svd().

-Greg

(This is really a feature enhancement, but submitted to R-bugs to make sure
it doesn't get lost. )

*** R-1.6.0/src/library/mva/R/prcomp.R  Mon Aug 13 17:41:50 2001
--- R-1.6.0-GRW//src/library/mva/R/prcomp.R     Tue Oct 29 11:57:23 2002
***************
*** 1,18 ****
  prcomp <- function(x, retx = TRUE, center = TRUE, scale. = FALSE,
!                    tol = NULL) {
      x <- as.matrix(x)
      x <- scale(x, center = center, scale = scale.)
!     s <- svd(x, nu = 0)
      if (!is.null(tol)) {
          rank <- sum(s$d > (s$d[1]*tol))
          if (rank < ncol(x))
!             s$v <- s$v[, 1:rank, drop = FALSE]
      }
      s$d <- s$d / sqrt(max(1, nrow(x) - 1))
!     dimnames(s$v) <-
!         list(colnames(x), paste("PC", seq(len = ncol(s$v)), sep = ""))
!     r <- list(sdev = s$d, rotation = s$v)
!     if (retx) r$x <- x %*% s$v
      class(r) <- "prcomp"
      r
  }
--- 1,21 ----
  prcomp <- function (x, retx = TRUE, center = TRUE, scale. = FALSE,
!                     tol = NULL)
! {
      x <- as.matrix(x)
      x <- scale(x, center = center, scale = scale.)
!     s <- La.svd(x, nu = 0)
      if (!is.null(tol)) {
          rank <- sum(s$d > (s$d[1] * tol))
          if (rank < ncol(x))
!             s$vt <- s$vt[, 1:rank, drop = FALSE]
      }
      s$d <- s$d/sqrt(max(1, nrow(x) - 1))
!
!     dimnames(s$vt) <- list(paste("PC", seq(len = nrow(s$vt)), sep = ""),
!                            colnames(x), )
!     r <- list(sdev = s$d, rotation = t(s$vt) )
!     if (retx)
!         r$x <- x %*% t(s$vt)
      class(r) <- "prcomp"
      r
  }


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 29 17:43:20 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 29 Oct 2002 12:43:20 -0500
Subject: dependency in tests
Message-ID: <3DBEC8B8.C8CC47BE@bank-banque-canada.ca>

I have a package in which the code does not depend on another package,
but tests do. Should the Depends line in the description indicate this
dependency or is requires() in the tests sufficient?

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 29 18:23:12 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 29 Oct 2002 18:23:12 +0000 (GMT)
Subject: dependency in tests
In-Reply-To: <3DBEC8B8.C8CC47BE@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0210291821330.24823-100000@gannet.stats>

On Tue, 29 Oct 2002, Paul Gilbert wrote:

> I have a package in which the code does not depend on another package,
> but tests do. Should the Depends line in the description indicate this
> dependency or is requires() in the tests sufficient?

I find it very helpful to have the Depends line there.  Anyone who wants
to run the tests needs the dependency, and builders of binary packages
meet this very frequently.

I think this is even more cogent for the examples.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 29 19:06:46 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 29 Oct 2002 14:06:46 -0500
Subject: dependency in tests
References: <Pine.LNX.4.31.0210291821330.24823-100000@gannet.stats>
Message-ID: <3DBEDC46.91496922@bank-banque-canada.ca>

ripley@stats.ox.ac.uk wrote:
> 
> On Tue, 29 Oct 2002, Paul Gilbert wrote:
> 
> > I have a package in which the code does not depend on another package,
> > but tests do. Should the Depends line in the description indicate this
> > dependency or is requires() in the tests sufficient?
> 
> I find it very helpful to have the Depends line there.  Anyone who wants
> to run the tests needs the dependency, and builders of binary packages
> meet this very frequently.
> 
> I think this is even more cogent for the examples.

For the examples I have always assumed that one would not indicate
anything in the Depends line, and just put requires() in the example.
There is a trade-off here. I like to put in non-trivial examples (e.g.
using data from other packages), but if doing so means I should indicate
dependencies in addition to what the code needs, then I am reluctant to
add them. Perhaps we need something like

Depends.tests:
Depends.examples:
Depends.vignettes:

which are in addition to anything the code depends on.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgentry@jimmy.harvard.edu  Tue Oct 29 19:50:28 2002
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Tue, 29 Oct 2002 14:50:28 -0500 (EST)
Subject: dependency in tests
In-Reply-To: <3DBEDC46.91496922@bank-banque-canada.ca>
Message-ID: <Pine.SOL.4.20.0210291447540.14712-100000@santiam.dfci.harvard.edu>



On Tue, 29 Oct 2002, Paul Gilbert wrote:
> Depends.tests:
> Depends.examples:
> Depends.vignettes:

In the Bioconductor package 'reposTools' there is a three tiered notion of
dependencies, and I believe similar concepts have been discussed for us in
DESCRIPTION files.

Some discussion on this is included in the 'miscIssues' vignette from
reposTools (section 4), the PDF of which is available at:
http://www.bioconductor.org/repository//vignette/devel/miscIssues.pdf

-Jeff

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From y-yoshida@jp.fujitsu.com  Wed Oct 30 08:24:47 2002
From: y-yoshida@jp.fujitsu.com (y-yoshida@jp.fujitsu.com)
Date: Wed, 30 Oct 2002 09:24:47 +0100 (MET)
Subject: 2002-09-08 1.6.0 build fails in Recommended (PR#1995)
Message-ID: <200210300824.JAA12011@pubhealth.ku.dk>

stvjc@channing.harvard.edu:
 > <<insert bug report here>>
 > 
 > in src/library/Recommended, make yields
 > 
 > make: *** No rule to make target `survival.ts', needed by `all'.  Stop.
 > 
 > this kills the build.  but "make check" succeeds

This error occurs because symbolic link files in src/library/Recommended 
have wrong file extension names such as KernSmooth_tgz, which should be 
KernSmooth.tgz .

So, try the following:
$ cd src/library/Recommended/
$ mv KernSmooth_tgz KernSmooth.tgz
$ mv VR_tgz VR.tgz
(... for each _tgz file)

---
Y Yoshida
Fujitsu Laboratories, Ltd

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct 30 11:21:29 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 30 Oct 2002 12:21:29 +0100
Subject: [R] pretty not pretty
In-Reply-To: <15807.47844.122831.475588@gargle.gargle.HOWL>
References: <15806.43461.675233.576774@gargle.gargle.HOWL>
 <15807.47844.122831.475588@gargle.gargle.HOWL>
Message-ID: <15807.49337.25761.585343@gargle.gargle.HOWL>

{R-help -> R-devel  since this becomes too technical fine tuning}

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch>
>>>>>     on Wed, 30 Oct 2002 11:56:36 +0100 writes:

>>>>> "DavidB" == David Brahm <brahm@alum.mit.edu>
>>>>>     on Tue, 29 Oct 2002 10:31:17 -0500 writes:

    DavidB> Ott Toomet <otoomet@econ.au.dk> wrote:
    >>> Pretty (R 1.5.1) has problems with zero: 
    >>> pretty(smallch) 
    DavidB> [1] -2.00000e-02 -3.469447e-18 2.00000e-02 4.00000e-02 6.00000e-02 
    DavidB> [6] 8.000000e-02 1.000000e-01 1.200000e-01 
    >>> You notice -3.46e-18 instead of 0. Is this feature changed in 1.6.0, 
    >>> or are there any simple ways to get around of it? 

    DavidB> I mentioned this in R-devel on June 14, 2002
    DavidB> ("pretty() sometimes isn't").  It derives from the
    DavidB> roundoff error introduced in seq(-.02, .12,
    DavidB> length=8).  I suggested that the last line of the
    DavidB> code for pretty() should get a zapsmall() around it:


    DavidB> pretty <- function(...) {
    DavidB> ...
    DavidB> zapsmall(seq(z$l, z$u, length = z$n + 1))
    DavidB> }

    DavidB> Since that hasn't been implemented, you could simply
    DavidB> put a zapsmall() around every pretty() in your code.

    MM> It *) now _has_ been implemented. ---> will be in R-beta tomorrow
    MM> and R 1.6.1.
    MM> Whereas for seq() it is clear that you will see these roundoffs,
    MM> they are ``wrong'' for pretty().

    MM> Thank you David, for the reminder.

    MM> *) I've used  zapsmall(seq(z$l, z$u, length = z$n + 1), digits = 7)
    MM> instead in order to make sure that the result will not depend
    MM> on options("digits").

and now found that "digits = 7" is doing too much in rare cases.
As a matter fact, zapsmall() has been a misnomer ever since it
was created for S/S-plus :
    It rounds all values (as its documentation clearly says!), 
    i.e. is not only zapping the small values as its name suggests.

After my current testing, 
I think I want "digits = 14" (+/- 1 may be).
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Oct 30 13:43:31 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 30 Oct 2002 14:43:31 +0100 (MET)
Subject: documentation for require (PR#2226)
Message-ID: <200210301343.OAA17710@pubhealth.ku.dk>

>>>>> "AlecS" == a stephenson <a.stephenson@lancaster.ac.uk>
>>>>>     on Tue, 29 Oct 2002 12:20:11 +0100 (MET) writes:


    AlecS> The documentation for the function require is incorrect.

yes.  Thank you very much for the (two) report(s)!

I'm about to commit the following change      

diff -w -r1.54 library.Rd
64,65c64,65
<   \item{quietly}{a logical.  If \code{TRUE}, a warning will not be
<     printed if the package cannot be found.}
---
>   \item{quietly}{a logical.  If \code{TRUE}, no message confirming
>       package loading is printed.}
83,84c83,84
<   inside other functions; it returns \code{FALSE} and optionally gives a
<   warning, rather than giving an error, if the package does not exist.
---
>   inside other functions; it returns \code{FALSE} and gives a warning
>   (rather than an error as \code{library()}) if the package does not exist.

-----

Thank you again.
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From JensHenrik.Badsberg@agrsci.dk  Wed Oct 30 14:51:37 2002
From: JensHenrik.Badsberg@agrsci.dk (JensHenrik.Badsberg@agrsci.dk)
Date: Wed, 30 Oct 2002 15:51:37 +0100 (MET)
Subject: Building and installing packages with functions with names starting with (PR#2229)
Message-ID: <200210301451.PAA18808@pubhealth.ku.dk>


 Dear Coreteam,

 I am getting closer to have some R-packages with interface to CoCo.
 I use something like package.skeleton("CoCo", list = ls(all.names
 = TRUE)) to also get my functions beginning with "." into the package.
 Functions with names starting with "." are put OK into the package
 during "R CMD build ...",  but when R at "R INSTALL - d ..." collects
 the R-files into the single file for putting into .../R the functions
 with names starting with "." are omitted ?!?

 Regards,

 Jens Henrik



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Wed Oct 30 14:54:28 2002
From: stvjc@channing.harvard.edu (Vincent J. Carey, Jr.)
Date: Wed, 30 Oct 2002 09:54:28 -0500 (EST)
Subject: silent option for library function
Message-ID: <200210301454.JAA13771@capecod.bwh.harvard.edu>

would it be possible to add an option to library that
prevents messages except when there are errors?  as
we build Sweave documents illustrating package functionalities
it is sometimes desirable to attach a package "behind
the scenes".  packages that have messages emitted
in .First.lib (often describing version or developer)
frustrate this particular desire.  verbose=FALSE
does not accomplish this.

note that i have no objection to messages produced by
default use of library.  i just want the ability to
suppress them when there are no errors.  currently
it is possible to do

sink(file="/dev/null")
library([e.g. affy])
sink()

but that may suppress too much -- an error message may be
lost.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 30 16:09:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 30 Oct 2002 16:09:31 +0000 (GMT)
Subject: silent option for library function
In-Reply-To: <200210301454.JAA13771@capecod.bwh.harvard.edu>
Message-ID: <Pine.LNX.4.31.0210301601500.5214-100000@gannet.stats>

On Wed, 30 Oct 2002, Vincent J. Carey, Jr. wrote:

> would it be possible to add an option to library that
> prevents messages except when there are errors?  as
> we build Sweave documents illustrating package functionalities
> it is sometimes desirable to attach a package "behind
> the scenes".  packages that have messages emitted
> in .First.lib (often describing version or developer)
> frustrate this particular desire.  verbose=FALSE
> does not accomplish this.
>
> note that i have no objection to messages produced by
> default use of library.  i just want the ability to
> suppress them when there are no errors.  currently
> it is possible to do
>
> sink(file="/dev/null")
> library([e.g. affy])
> sink()
>
> but that may suppress too much -- an error message may be
> lost.

Don't think so.  From help(sink):

     Normal R output is diverted by the default `type = "output"'. Only
     prompts and warning/error messages continue to appear on the
     terminal. These too can diverted by `type = "message"' (see
     below).

and for example

> sink(file="/dev/null")
> library(foo)
Error in firstlib(which.lib.loc, package) :
        testing
Error in library(foo) : .First.lib failed
> sink()

So how are you losing error messages?


BTW, there is no way for library() to control what a user does in his
.First.lib: he could put up a dialog box agreeing the usage terms.
Actually, that seems a rather good idea ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 30 16:23:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 30 Oct 2002 16:23:13 +0000 (GMT)
Subject: (PR#2229) Building and installing packages with functions with
 names starting with [title ends here!]
In-Reply-To: <200210301451.PAA18808@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210301617250.5214-100000@gannet.stats>

You have omitted the details of your system, but I'll guess Unix.

The names of R functions are nothing to do with the file names.  Don't
use dotnames for files containing R functions: some OSes do really strange
things with them.  Maybe package.skeleton() should remap the names, but
if not you will need to do it yourself.

On Unix R INSTALL does omit dotnames.  On some Windows systems using Samba
they become hidden.  Just avoid them.


On Wed, 30 Oct 2002 JensHenrik.Badsberg@agrsci.dk wrote:

>
>  Dear Coreteam,
>
>  I am getting closer to have some R-packages with interface to CoCo.
>  I use something like package.skeleton("CoCo", list = ls(all.names
>  = TRUE)) to also get my functions beginning with "." into the package.
>  Functions with names starting with "." are put OK into the package
>  during "R CMD build ...",  but when R at "R INSTALL - d ..." collects
>  the R-files into the single file for putting into .../R the functions
>  with names starting with "." are omitted ?!?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Wed Oct 30 16:30:55 2002
From: stvjc@channing.harvard.edu (Vincent Carey 525-2265)
Date: Wed, 30 Oct 2002 11:30:55 -0500 (EST)
Subject: silent option for library function
In-Reply-To: <Pine.LNX.4.31.0210301601500.5214-100000@gannet.stats>
Message-ID: <Pine.GSO.4.40.0210301112360.5730-100000@falmouth.bwh.harvard.edu>

>
> Don't think so.  From help(sink):
>
>      Normal R output is diverted by the default `type = "output"'. Only
>      prompts and warning/error messages continue to appear on the
>      terminal. These too can diverted by `type = "message"' (see
>      below).
>
> and for example
>
> > sink(file="/dev/null")
> > library(foo)
> Error in firstlib(which.lib.loc, package) :
>         testing
> Error in library(foo) : .First.lib failed
> > sink()
>
> So how are you losing error messages?

The point on error messages was speculation.  I am wrong.

>
>
> BTW, there is no way for library() to control what a user does in his
> .First.lib: he could put up a dialog box agreeing the usage terms.
> Actually, that seems a rather good idea ....

Indeed.  However, one could modify library to divert normal R
output if a silent parameter were supplied.

Thus if i edit library to incorporate a parameter silent=FALSE,
and introduce the lines

if (silent) sink("/dev/null")
on.exit( if (silent) sink() )

at the top of the function body, the command

library(mgcv, silent=TRUE)

has the desired silent behavior.  however, ordinary
output is still diverted after the return from library(...)
in this case!  perhaps I misunderstand
the on.exit behavior.  I would expect that it would 'remove'
the sink set in library and restore ordinary processing.

The behavior noted here is for 1.6.1 of 10-19-2002

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Oct 30 16:25:55 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 30 Oct 2002 17:25:55 +0100
Subject: silent option for library function
In-Reply-To: <200210301454.JAA13771@capecod.bwh.harvard.edu>
References: <200210301454.JAA13771@capecod.bwh.harvard.edu>
Message-ID: <15808.2067.738679.499211@mithrandir.hornik.net>

>>>>> Vincent J Carey, writes:

> would it be possible to add an option to library that
> prevents messages except when there are errors?  as
> we build Sweave documents illustrating package functionalities
> it is sometimes desirable to attach a package "behind
> the scenes".  packages that have messages emitted
> in .First.lib (often describing version or developer)
> frustrate this particular desire.  verbose=FALSE
> does not accomplish this.

> note that i have no objection to messages produced by
> default use of library.  i just want the ability to
> suppress them when there are no errors.  currently
> it is possible to do

> sink(file="/dev/null")
> library([e.g. affy])
> sink()

> but that may suppress too much -- an error message may be
> lost.

The QA tools use the following:

.loadPackageQuietly <- function(package, lib.loc) {
    ## Load (reload if already loaded) @code{package} from
    ## @code{lib.loc}, capturing all output and messages.  All QA
    ## functions use this for loading packages because R CMD check
    ## interprets all output as indicating a problem.
    outConn <- textConnection("out", "w")
    sink(outConn, type = "output")
    sink(outConn, type = "message")
    yy <- try({
        pos <- match(paste("package", package, sep = ":"), search())
        if(!is.na(pos))
            detach(pos = pos)
        library(package, lib.loc = lib.loc, character.only = TRUE,
                verbose = FALSE)
    })
    if(inherits(yy, "try-error"))
        stop(yy)
    sink(type = "message")
    sink(type = "output")
    close(outConn)
}

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 30 16:37:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 30 Oct 2002 16:37:31 +0000 (GMT)
Subject: silent option for library function
In-Reply-To: <Pine.GSO.4.40.0210301112360.5730-100000@falmouth.bwh.harvard.edu>
Message-ID: <Pine.LNX.4.31.0210301632330.5214-100000@gannet.stats>

On Wed, 30 Oct 2002, Vincent Carey 525-2265 wrote:

Quoting me, anonymously!

> > BTW, there is no way for library() to control what a user does in his
> > .First.lib: he could put up a dialog box agreeing the usage terms.
> > Actually, that seems a rather good idea ....
>
> Indeed.  However, one could modify library to divert normal R
> output if a silent parameter were supplied.
>
> Thus if i edit library to incorporate a parameter silent=FALSE,
> and introduce the lines
>
> if (silent) sink("/dev/null")
> on.exit( if (silent) sink() )
>
> at the top of the function body, the command
>
> library(mgcv, silent=TRUE)
>
> has the desired silent behavior.  however, ordinary
> output is still diverted after the return from library(...)
> in this case!  perhaps I misunderstand
> the on.exit behavior.  I would expect that it would 'remove'
> the sink set in library and restore ordinary processing.

Try

if(silent) {
  sink("/dev/null")
  on.exit(sink())
}

as silent is not in scope at on.exit, I believe.

I have to say I think this is not a good idea.  People who want to put out
copyright notices at the top of their packages should be allowed to do so,
and we should not make it easy to suppress them.

(BTW none of mine do on R, although they do on S-PLUS at Insightful's
insistence.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Oct 30 16:31:22 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 30 Oct 2002 17:31:22 +0100
Subject: Building and installing packages with functions with names starting with (PR#2229)
In-Reply-To: <200210301451.PAA18808@pubhealth.ku.dk>
References: <200210301451.PAA18808@pubhealth.ku.dk>
Message-ID: <15808.2394.967294.483386@mithrandir.hornik.net>

>>>>> JensHenrik Badsberg writes:

>  Dear Coreteam,

>  I am getting closer to have some R-packages with interface to CoCo.
>  I use something like package.skeleton("CoCo", list = ls(all.names
>  = TRUE)) to also get my functions beginning with "." into the package.
>  Functions with names starting with "." are put OK into the package
>  during "R CMD build ...",  but when R at "R INSTALL - d ..." collects
>  the R-files into the single file for putting into .../R the functions
>  with names starting with "." are omitted ?!?

R CMD INSTALL behaves according to what is documented in R-exts:

	   The `R' subdirectory contains R code files.  The code files
	to be installed must start with a (lower or upper case) letter
	and have one of the extensions `.R', `.S', `.q', `.r', or `.s'.

So I believe the code in package.skeleton() which has

    cat("Saving functions and data\n")
    for (item in list) {
        if (is.function(get(item))) 
            dump(item, file = file.path(path, name, "R", paste(item, 
                "R", sep = ".")))
        else save(list = item, file = file.path(path, name, "data", 
            paste(item, "rda", sep = ".")))
    }

Also, I personally do not believe that non-functions in the environment
that is dumped out should by default be made into data sets.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Wed Oct 30 16:56:28 2002
From: stvjc@channing.harvard.edu (Vincent Carey 525-2265)
Date: Wed, 30 Oct 2002 11:56:28 -0500 (EST)
Subject: silent option for library function
In-Reply-To: <Pine.LNX.4.31.0210301632330.5214-100000@gannet.stats>
Message-ID: <Pine.GSO.4.40.0210301141560.5730-100000@falmouth.bwh.harvard.edu>


On Wed, 30 Oct 2002 ripley@stats.ox.ac.uk wrote:

> On Wed, 30 Oct 2002, Vincent Carey 525-2265 wrote:
>
> Quoting me, anonymously!
>

not intentional.  i apologize.

>
> Try
>
> if(silent) {
>   sink("/dev/null")
>   on.exit(sink())
> }
>
> as silent is not in scope at on.exit, I believe.

That doesn't seem to work either.  I'll also note that
the whole sink diversion that I mentioned initially
doesn't solve the problem of library-related messages under
Sweave echo=FALSE.  But that is a matter to be addressed
under separate cover.

>
> I have to say I think this is not a good idea.  People who want to put out
> copyright notices at the top of their packages should be allowed to do so,
> and we should not make it easy to suppress them.
>

Fair enough, but still perhaps debatable.  The contributor
has various opportunities to make copyright information
explicit (documentation, modeling output...), but the user
should be able to control the textual
throughput of any given R session to a very high degree.  Since
a private workaround is available, I withdraw the request.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ehlers@math.ucalgary.ca  Wed Oct 30 18:36:01 2002
From: ehlers@math.ucalgary.ca (ehlers@math.ucalgary.ca)
Date: Wed, 30 Oct 2002 19:36:01 +0100 (MET)
Subject: typo in p.adjust (PR#2231)
Message-ID: <200210301836.TAA20243@pubhealth.ku.dk>

Full_Name: Peter Ehlers
Version: 1.6.0
OS: Windows 2000 Pro
Submission from: (NULL) (136.159.61.178)


In:

p.adjust                package:base                R Documentation

In the paragraph:

Hochberg's and Hommel's methods are valid when the hypothesis tests 
are independent or when they are non-negatively associated (Sarkar, 
1998; Sarker and Chang, 1997).  Hommel's method is more powerful 
than Hochberg's, but the difference is usually small and the 
Hochberg p-values are faster to compute.

Change: Sarker
To:     Sarkar


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Wed Oct 30 19:27:56 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 30 Oct 2002 11:27:56 -0800
Subject: native OS X R
Message-ID: <B16CD746-EC3D-11D6-A502-000393860F3C@stat.ucla.edu>

I have a version of R-devel which is configured with the flags

configure  
--with-tcl-config=/Library/Frameworks/Tcl.framework/tclConfig.sh  
--with-tk-config=/Library/Frameworks/Tk.framework
/tkConfig.sh --enable-R-shlib --with-aqua --without-x  
TCLTK_LIBS="-framework Tcl -framework Tk"   
TCLTK_CPPFLAGS="-I/Library/Framewor
ks/Tcl.framework/Headers -I/Library/Frameworks/Tk.framework/Headers"

This means no X11, the Quartz device, the Aqua interface, and the  
native AquaTk version
of Tcl/Tk. Drawing to windows works fine (both to the Quartz device and  
the Tk
windows), but there are still some serious problems.

1. The Aqua interface does not work (R --gui=aqua) -- it does not show  
up. I am
not sure if it is supposed to. So we work from the terminal.

2. The windows do not handle events properly. Clicking on the Quartz  
device
gives

RCNE SendEventToEventTarget (mous Up                  ) failed, -9874

Running the tkcanvas demo is more satisfactory. Points can be colored
and dragged, and the line adjusts fine, but the window never becomes
the front window and the terminal bitterly complains

SetFrontProcess failed,-606

at each mouse event.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 30 21:06:37 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Oct 2002 22:06:37 +0100
Subject: native OS X R
In-Reply-To: <B16CD746-EC3D-11D6-A502-000393860F3C@stat.ucla.edu>
References: <B16CD746-EC3D-11D6-A502-000393860F3C@stat.ucla.edu>
Message-ID: <x2vg3jbpr6.fsf@biostat.ku.dk>

Jan de Leeuw <deleeuw@stat.ucla.edu> writes:

> This means no X11, the Quartz device, the Aqua interface, and the
> native AquaTk version
> of Tcl/Tk. Drawing to windows works fine (both to the Quartz device
> and  the Tk
> windows), but there are still some serious problems.
[Details omitted]

I think Stefano has some changes planned, but haven't had time to work
on them just now. We decided to schedule 1.6.1 without those to get
rid of the memory leak in 1.6.0 quickly. It's quite likely that we'll
have a 1.6.2 mainly for Mac updates.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Wed Oct 30 21:51:06 2002
From: jago@mclink.it (Stefano Iacus)
Date: Wed, 30 Oct 2002 22:51:06 +0100
Subject: native OS X R
In-Reply-To: <B16CD746-EC3D-11D6-A502-000393860F3C@stat.ucla.edu>
Message-ID: <B1579901-EC51-11D6-B34C-003065CC4CB8@mclink.it>

Well, I cannot run the Aqua myself anymore using Jaguar. I'll attack  
the problem from the "roots" using Duncan's REventLoop package. I'm  
working on that but I'll not be able to finish before 1.6.1 is out.

Stefano

On Wednesday, October 30, 2002, at 08:27 PM, Jan de Leeuw wrote:

> I have a version of R-devel which is configured with the flags
>
> configure  
> --with-tcl-config=/Library/Frameworks/Tcl.framework/tclConfig.sh  
> --with-tk-config=/Library/Frameworks/Tk.framework
> /tkConfig.sh --enable-R-shlib --with-aqua --without-x  
> TCLTK_LIBS="-framework Tcl -framework Tk"   
> TCLTK_CPPFLAGS="-I/Library/Framewor
> ks/Tcl.framework/Headers -I/Library/Frameworks/Tk.framework/Headers"
>
> This means no X11, the Quartz device, the Aqua interface, and the  
> native AquaTk version
> of Tcl/Tk. Drawing to windows works fine (both to the Quartz device  
> and the Tk
> windows), but there are still some serious problems.
>
> 1. The Aqua interface does not work (R --gui=aqua) -- it does not show  
> up. I am
> not sure if it is supposed to. So we work from the terminal.
>
> 2. The windows do not handle events properly. Clicking on the Quartz  
> device
> gives
>
> RCNE SendEventToEventTarget (mous Up                  ) failed, -9874
>
> Running the tkcanvas demo is more satisfactory. Points can be colored
> and dragged, and the line adjusts fine, but the window never becomes
> the front window and the terminal bitterly complains
>
> SetFrontProcess failed,-606
>
> at each mouse event.
>
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical  
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email:  
> deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>   
> ----------------------------------------------------------------------- 
> --------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>   
> ----------------------------------------------------------------------- 
> --------------------------
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aukema@entomology.wisc.edu  Wed Oct 30 23:23:57 2002
From: aukema@entomology.wisc.edu (aukema@entomology.wisc.edu)
Date: Thu, 31 Oct 2002 00:23:57 +0100 (MET)
Subject: gam bug with poisson family? (PR#2234)
Message-ID: <200210302323.AAA21286@pubhealth.ku.dk>

Full_Name: Brian Aukema
Version: 1.6
OS: Windows XP Professional
Submission from: (NULL) (144.92.164.204)


platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    6.0            
year     2002           
month    10             
day      01             
language R 

Hello, I am relatively new to R (~6 months) so I hate to bother you if this is
not a bug.  I tried a GAM with a poisson family link, and I'm getting an error
message that I do not understand.  Many apologies if this is user inexperience.
Thanks, BHA.

> library(mgcv)
This is mgcv 0.8.1
> lcgam <- gam(lc ~ s(Day), family=poisson, data=lcset)
Warning messages: 
1: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
2: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
3: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
4: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
5: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
6: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
7: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
8: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
9: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
10: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 31 00:25:18 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 2002 01:25:18 +0100
Subject: gam bug with poisson family? (PR#2234)
In-Reply-To: <200210302323.AAA21286@pubhealth.ku.dk>
References: <200210302323.AAA21286@pubhealth.ku.dk>
Message-ID: <x2n0ovbgk1.fsf@biostat.ku.dk>

aukema@entomology.wisc.edu writes:

> Hello, I am relatively new to R (~6 months) so I hate to bother you if this is
> not a bug.  

Please use r-help rather than r-bugs then...

> I tried a GAM with a poisson family link, and I'm getting an error
> message that I do not understand.  Many apologies if this is user inexperience.
> Thanks, BHA.
> 
> > library(mgcv)
> This is mgcv 0.8.1
> > lcgam <- gam(lc ~ s(Day), family=poisson, data=lcset)
> Warning messages: 
> 1: `Machine' is deprecated.
> Use `.Machine' instead.
> See ?Deprecated. 

It's just a warning that gam is using old coding style that is about
to become defunct (specifically gam.fit is using Machine()$double.eps
where the preferred form is .Machine$double.eps). It's harmless but
mgcv 0.8-6 has removed the problem.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Oct 31 09:54:32 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 31 Oct 2002 10:54:32 +0100
Subject: [R] Symbols for male/female
In-Reply-To: <Pine.WNT.4.44.0210310755280.700-100000@GYG-63G37>
References: <Pine.WNT.4.44.0210310755280.700-100000@GYG-63G37>
Message-ID: <15808.64984.194254.194060@gargle.gargle.HOWL>

(diverted to R-devel; I'll send a shorter reply to R-help)

>>>>> "Lorenz" == Lorenz Gygax <gygax@ifi.unizh.ch>
>>>>>     on 31 Oct 2002 08:10:25 +0100 writes:

    Lorenz> Dear all,

    Lorenz> I would like to use the biological symbols for male
    Lorenz> and female as plotting symbols in a scatterplot
    Lorenz> (ideally filled and non-filled). R does not seem to
    Lorenz> have these symbols using pch= in plot() nor are they
    Lorenz> implemented via expression() or at least I did not
    Lorenz> find them. I found that the symbols are
    Lorenz> e.g. available in the wasysym and the marvosym
    Lorenz> package in LaTeX.

    Lorenz> I have coded two very rough functions that are able
    Lorenz> to approximate those symbols, but not surprisingly,
    Lorenz> they are not very efficient regarding the file size
    Lorenz> they produce (I have included the code for the
    Lorenz> female symbol at the end of the mail).

    Lorenz> Is there a more or less straightforward way to
    Lorenz> implement these symbols so that they can be accessed
    Lorenz> either by pch= or expression()? Can you give me some
    Lorenz> pointers on how I would need to go about this?

It's rather "less" than "more" straightforward ;-) : 

In src/main/graphics.c, you look for the function GSymbol().
There, you see how each (pch = <integer>) symbol is done.
In principle, you just would add new case statements;
pch = 26 and pch =27  would be the next free ones ...

Probably you need to poke around a bit in the C source of R in
order to learn how to do this.
In this case, the source is the documentation.


There have been wishes and dreams about using something like
  pch = <<pointer to (jpg|pdf|eps|png|...) file>>
which of course would be much more general and useful, but
needs much more work of course!
Maybe rather something that would only be done in the new
graphics system which the grid package provides ?
    
Greetings up the hill (in Zrich)!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

    Lorenz> Thanks and regards, Lorenz
    Lorenz> -- 
    Lorenz> Lorenz Gygax, Dr. sc. nat.
    Lorenz> Artificial Intelligence Lab, Department of Information Technology
    Lorenz> University of Zurich-Irchel, +41-1-635 67 17,  gygax@ifi.unizh.ch


    Lorenz> one.female <- function (X, diam= 1, prop= 1, lw= 1) {
    Lorenz> ## X a vector giving the position of the symbol c (x, y)
    Lorenz> ## diam: diameter in the entities on the Y axis
    Lorenz> ## prop: proportion of x to y axis (so that symbols will be round
    Lorenz> ## lw: adjustment of line width for large symbols

    Lorenz> x.ring <- cos (seq (0, 2*pi, len= 500)) * prop * diam/2
    Lorenz> y.ring <- sin (seq (0, 2*pi, len= 500)) * diam/2
    Lorenz> lines (x.ring + X[1], y.ring + X[2], lwd= lw)
    Lorenz> segments (c (0, -diam/4) + X[1],
    Lorenz> c (-diam/2, -3*diam/4) + X[2],
    Lorenz> c (0,  diam/4) + X[1],
    Lorenz> c ( -diam , -3*diam/4) + X[2], lwd= lw)
    Lorenz> }

    Lorenz> and to plot several iteams at a time

    Lorenz> female <- function (x, y, d= 1, p= 1, l= 1) {
    Lorenz> ## x, y vectors of x and y coordinates
    Lorenz> ## d: diameter
    Lorenz> ## p: proportion of symbol
    Lorenz> ## l: line width

    Lorenz> xy <- cbind (x, y)
    Lorenz> apply (xy, 1, FUN= one.female, diam= d, prop= p, lw= l)
    Lorenz> }
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Oct 31 11:00:38 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 31 Oct 2002 12:00:38 +0100 (MET)
Subject: typo in p.adjust (PR#2231)
Message-ID: <200210311100.MAA25984@pubhealth.ku.dk>

>>>>> "ehlers" == ehlers  <ehlers@math.ucalgary.ca>
>>>>>     on Wed, 30 Oct 2002 19:36:01 +0100 (MET) writes:

    ehlers> Full_Name: Peter Ehlers
    ehlers> Version: 1.6.0

    ehlers> In:

    ehlers> p.adjust                package:base                R Documentation

    ....

    ehlers> Change: Sarker
    ehlers> To:     Sarkar

Done.
Thank you.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From grimm.heinz@rcc.ch  Thu Oct 31 15:42:36 2002
From: grimm.heinz@rcc.ch (grimm.heinz@rcc.ch)
Date: Thu, 31 Oct 2002 16:42:36 +0100 (MET)
Subject: header containing (PR#2003)
Message-ID: <200210311542.QAA00373@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------0E780EA27B8B71828A93900D
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Ok, I try to explain the problem better:

getHome() uses now "GetModuleFileName()" to determine
the R home-directory. "GetModuleFileName()" doesn't check
the R_HOME environment setting, instead it returns the
path of the .EXE, that started R, which is usually located in
$R_HOME/bin. If R is invoked via Java, "GetModuleFileName()"
returns $JDK_HOME/jre/bin instead of $R_HOME/bin and
the function "getRHome()" returns $JDK_HOME/jre...

My suggestion is just to rely on $R_HOME, instead of
using "GetModuleFileName()", because all "xxx calls R"
packages will have similar problems. I added in my sample
fix the check for $RHOME, since SJava does the same,
may be this is historical, just ignore it...

Heinz Grimm


--------------0E780EA27B8B71828A93900D
Content-Type: text/x-vcard; charset=us-ascii;
 name="grimm.heinz.vcf"
Content-Transfer-Encoding: 7bit
Content-Description: Card for Heinz Grimm
Content-Disposition: attachment;
 filename="grimm.heinz.vcf"

begin:vcard 
n:Grimm;Heinz
tel;fax:+41 61 9715 072
tel;work:+41 61 9751 109
x-mozilla-html:FALSE
url:www.rcc.ch
org:RCC Ltd.;IT
version:2.1
email;internet:grimm.heinz@rcc.ch
title:Dipl.Ing.(FH)
adr;quoted-printable:;;Zelgliweg 1=0D=0A;Itingen;BL;CH-4452;Switzerland
fn:Heinz Grimm
end:vcard

--------------0E780EA27B8B71828A93900D--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Oct 31 09:38:35 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Thu, 31 Oct 2002 10:38:35 +0100
Subject: silent option for library function
In-Reply-To: <Pine.GSO.4.40.0210301141560.5730-100000@falmouth.bwh.harvard.edu>
References: <Pine.LNX.4.31.0210301632330.5214-100000@gannet.stats>
 <Pine.GSO.4.40.0210301141560.5730-100000@falmouth.bwh.harvard.edu>
Message-ID: <15808.64027.325849.231315@celeborn.leisch.at>

>>>>> On Wed, 30 Oct 2002 11:56:28 -0500 (EST),
>>>>> Vincent Carey 525-2265 (VC5) wrote:

  > On Wed, 30 Oct 2002 ripley@stats.ox.ac.uk wrote:

  >> On Wed, 30 Oct 2002, Vincent Carey 525-2265 wrote:
  >> 
  >> Quoting me, anonymously!
  >> 

  > not intentional.  i apologize.

  >> 
  >> Try
  >> 
  >> if(silent) {
  >> sink("/dev/null")
  >> on.exit(sink())
  >> }
  >> 
  >> as silent is not in scope at on.exit, I believe.

  > That doesn't seem to work either.  I'll also note that
  > the whole sink diversion that I mentioned initially
  > doesn't solve the problem of library-related messages under
  > Sweave echo=FALSE.  But that is a matter to be addressed
  > under separate cover.

shouldn't results=hide do what you want for Sweave files?

.f

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From medrecord2001@yahoo.com  Thu Oct 31 19:28:58 2002
From: medrecord2001@yahoo.com (medrecord2001@yahoo.com)
Date: Thu, 31 Oct 2002 20:28:58 +0100 (MET)
Subject: Quick Question (PR#2239)
Message-ID: <200210311928.UAA01513@pubhealth.ku.dk>


How can I get detailing about your Product line ... ?

Dr. Wong

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ehlers@math.ucalgary.ca  Thu Oct 31 20:00:19 2002
From: ehlers@math.ucalgary.ca (ehlers@math.ucalgary.ca)
Date: Thu, 31 Oct 2002 21:00:19 +0100 (MET)
Subject: typo in documentation for boxplot.stats (PR#2240)
Message-ID: <200210312000.VAA01612@pubhealth.ku.dk>

Full_Name: Peter Ehlers
Version: 1.6.0
OS: Win 2000 Pro
Submission from: (NULL) (136.159.61.178)


In:
boxplot.stats              package:base              R Documentation

under:
Details:
     The two ``hinges'' are versions of the first first and third

Change: first first
To: first


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Tue Oct  1 13:04:40 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Tue, 01 Oct 2002 08:04:40 -0400
Subject: uploading binary packages (was RE: [R] Update packages)
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC721@usrymx10.merck.com>

[I guess R-devel is more appropriate for this question:]

Will CRAN maintainers accept binary packages (in addition to source) from
the package maintainers?  As an example, I develop and test randomForest on
both Linux and WinNT, so I can always make the binary.  This could make life
a bit easier for BDR and DM.  Are there any potential problems?

Regards,
Andy

> -----Original Message-----
> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: Tuesday, October 01, 2002 5:49 AM
> To: Bernardo Rangel Tura
> Cc: cran@R-project.org; R-help@stat.math.ethz.ch
> Subject: Re: [R] Update packages
> 
> 
> >>>>> "Bernardo" == Bernardo Rangel Tura <tura@centroin.com.br>
> >>>>>     on Tue, 01 Oct 2002 06:19:37 -0300 writes:
> 
>     Bernardo> I have been having problems with
>     Bernardo> the update of my R.  Some packages (ipred,
>     Bernardo> randomForest, gregmisc, Hmisc and Design) that it
>     Bernardo> has new versions are not available in CRAN through
>     Bernardo> the command: update.packages ().  Will it be that
>     Bernardo> my product has a defect?  I use R in win98SE with
>     Bernardo> 128 Mb de RAM and AMD 1.2Ghz
> 
> Hmisc and Design have been announced by Frank Harrell as not yet
> to be available on CRAN because they don't pass "R CMD check" (without
> many warnings).
> The other 3 packages are on CRAN.  Note however, that for Windows,
> new *binary* versions must be made available (by Prof. Brian Ripley or
> Duncan Murdoch mainly I think) and there, the newest packages
> are dated Sept.1 (look manually for the needed zip files in
>  http://cran.R-project.org/bin/windows/contrib/ ).
> I'm not entirely sure how the CRAN maintainers populate that
> directory, though.
> 
> Regards,
> Martin Maechler <maechler@stat.math.ethz.ch>	
http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Oct  1 13:18:15 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Tue, 1 Oct 2002 14:18:15 +0200
Subject: uploading binary packages (was RE: [R] Update packages)
In-Reply-To: <51F9C42DA15CD311BD220008C707D81906FFC721@usrymx10.merck.com>
References: <51F9C42DA15CD311BD220008C707D81906FFC721@usrymx10.merck.com>
Message-ID: <15769.37511.658500.737453@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 01 Oct 2002 08:04:40 -0400,
>>>>> Liaw, Andy (LA) wrote:

  > [I guess R-devel is more appropriate for this question:]
  > Will CRAN maintainers accept binary packages (in addition to source) from
  > the package maintainers?  As an example, I develop and test randomForest on
  > both Linux and WinNT, so I can always make the binary.  This could make life
  > a bit easier for BDR and DM.  Are there any potential problems?

Yes, especially on Windows there is the danger of viruses. We (=the
CRAN master admins) cannot check for viruses because we have almost no
windows machines. And even if we had, we could not make any guarantees.

So the current policy is to have one or two maintainers for each
binary distribution of R and let them handle the rest. This ensures
that each binary distribution has been compiled using identical tools
and binaries are exchanged only in one direction (which makes it
harder for viruses to spread).

Allowing for binary uploads opens a can of worms I'd rather not like
to open. Of course I'm no windows user, so have no strong preferences
with respect to binaries for that particular platform.

Best,
Fritz





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Oct  1 14:30:06 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 1 Oct 2002 09:30:06 -0400
Subject: submitting binary windows packages
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149D00A@groexmb02.pfizer.com>


Hi All,

The windows binary packages in
http://cran.r-project.org/bin/windows/contrib/ are out of date for my
packages, and perhaps for others as well.  I've now received several email
messages commenting on this fact.   

Since I now have a Windows 2K machine with the proper build environment, I
can create the windows binary packages myself.  What is the proper mechanism
for getting a windows binary package placed there?   

This topic is not documented in the R Windows FAQ or anywhere else I can
find.   Kurt has indicated that the windows area is mirrored from one of
Brian's machines, but my query to Brian has not been answered yet.  (Perhaps
he is taking a well-deserved break).  Does someone else know the proper
procedure?   

If there is not already, can we arrange to set up an automated build
procedure so that a Windows binary package is created automatically when the
source package is uploaded?  Or some alternative?

Greg



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct  1 17:50:28 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 01 Oct 2002 12:50:28 -0400
Subject: R CMD check dependency simplification
Message-ID: <3D99D254.B65491C8@bank-banque-canada.ca>

I am trying to re-organizing my Makefile for testing my R packages and I
am having trouble finding a structure I like. The problem seems to be
that "R CMD check", which does wonderful things, does not allow
dependency information to flow through very gracefully. That is, since
everything is copied into the pkg.Rcheck directory, it is difficult to
make any changes to source files without having to completely re-do "R
CMD check pkg". 

For example, I would like to be able to make changes to
src/pkg1/man/foo.Rd and have dependencies that indicate only codoc and
examples need to be re-run, not tests and vignettes. (R CMD check can to
do this, the problem is moving the appropriate new pieces, in the
appropriate way, into the pkg1.Rcheck directory.)

The difficulty is exacerbated for me because I have pkg3 depends on pkg2
depends on pkg1. If I make a change to src/pkg1/inst/doc/guide.tex then
I really should only need to re-do the vignettes for pkg1, but instead I
have to re-do the whole "R CMD check" for pkg1, pkg2, and pkg3.

Suggestions would be appreciated.

Thanks,
Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kevin.wright@pioneer.com  Tue Oct  1 18:29:25 2002
From: kevin.wright@pioneer.com (Wright, Kevin)
Date: Tue, 1 Oct 2002 12:29:25 -0500
Subject: install.packages warning
Message-ID: <C71CB7425639D311A7A40008C7286AB006A55048@carina.phibred.com>


I typically install packages from a local site:

> install.packages("x:/tpm/tpm.zip",CRAN=NULL)
updating HTML package descriptions
Warning message: 
argument `lib' is missing: using C:/PROGRA~1/R/RW1051/library in:
install.packages("x:/tpm/tpm.zip", CRAN = NULL) 

The warning doesn't bother me, but I've had to help other people who see
"warning" and decide to panic.  

May I suggest changing "Warning message" to something less scary, for
example "Note:".

Best,

Kevin Wright  (apologies for the company signature)



This communication is for use by the intended recipient and contains 
information that may be privileged, confidential or copyrighted under
applicable law.  If you are not the intended recipient, you are hereby
formally notified that any use, copying or distribution of this e-mail,
in whole or in part, is strictly prohibited.  Please notify the sender
by return e-mail and delete this e-mail from your system.  Unless
explicitly and conspicuously designated as "E-Contract Intended",
this e-mail does not constitute a contract offer, a contract amendment,
or an acceptance of a contract offer.  This e-mail does not constitute
a consent to the use of sender's contact information for direct marketing
purposes or for transfers of data to third parties.

 Francais Deutsch Italiano  Espanol  Portuges  Japanese  Chinese  Korean

            http://www.DuPont.com/corp/email_disclaimer.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Oct  1 19:12:28 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Tue, 1 Oct 2002 14:12:28 -0400 (EDT)
Subject: install.packages warning
In-Reply-To: <C71CB7425639D311A7A40008C7286AB006A55048@carina.phibred.com>
Message-ID: <Pine.LNX.4.44.0210011409070.19662-100000@bolker.zoo.ufl.edu>


  Hear, hear; I've often had to reassure people about this warning.  (The
reason the scary "Warning message" words appear is because
install.packages() uses the warning() function.)  Is the warning really
necessary?

On Tue, 1 Oct 2002, Wright, Kevin wrote:

> 
> I typically install packages from a local site:
> 
> > install.packages("x:/tpm/tpm.zip",CRAN=NULL)
> updating HTML package descriptions
> Warning message: 
> argument `lib' is missing: using C:/PROGRA~1/R/RW1051/library in:
> install.packages("x:/tpm/tpm.zip", CRAN = NULL) 
> 
> The warning doesn't bother me, but I've had to help other people who see
> "warning" and decide to panic.  
> 
> May I suggest changing "Warning message" to something less scary, for
> example "Note:".
> 
> Best,
> 
> Kevin Wright  (apologies for the company signature)
> 
> 
> 
> This communication is for use by the intended recipient and contains 
> information that may be privileged, confidential or copyrighted under
> applicable law.  If you are not the intended recipient, you are hereby
> formally notified that any use, copying or distribution of this e-mail,
> in whole or in part, is strictly prohibited.  Please notify the sender
> by return e-mail and delete this e-mail from your system.  Unless
> explicitly and conspicuously designated as "E-Contract Intended",
> this e-mail does not constitute a contract offer, a contract amendment,
> or an acceptance of a contract offer.  This e-mail does not constitute
> a consent to the use of sender's contact information for direct marketing
> purposes or for transfers of data to third parties.
> 
>  Francais Deutsch Italiano  Espanol  Portuges  Japanese  Chinese  Korean
> 
>             http://www.DuPont.com/corp/email_disclaimer.html
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ko-Kang@xtra.co.nz  Tue Oct  1 19:22:24 2002
From: Ko-Kang@xtra.co.nz (Ko-Kang Kevin Wang)
Date: Wed, 2 Oct 2002 06:22:24 +1200
Subject: submitting binary windows packages
References: <D7A3CFD7825BD6119B880002A58F06C20149D00A@groexmb02.pfizer.com>
Message-ID: <002101c26977$7e387890$c93158db@kwan022>

----- Original Message -----
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
To: <R-devel@stat.math.ethz.ch>
Sent: Wednesday, October 02, 2002 1:30 AM
Subject: submitting binary windows packages


>
> Hi All,
>
> The windows binary packages in
> http://cran.r-project.org/bin/windows/contrib/ are out of date for my
> packages, and perhaps for others as well.  I've now received several email
> messages commenting on this fact.
>
> Since I now have a Windows 2K machine with the proper build environment, I
> can create the windows binary packages myself.  What is the proper
mechanism
> for getting a windows binary package placed there?
>
> This topic is not documented in the R Windows FAQ or anywhere else I can
> find.   Kurt has indicated that the windows area is mirrored from one of
> Brian's machines, but my query to Brian has not been answered yet.
(Perhaps
> he is taking a well-deserved break).  Does someone else know the proper
> procedure?
>

It is right at the bottom of CRAN main page, cran.r-project.org.

Quote:
To "submit" to CRAN, simply upload to ftp://cran.r-project.org/incoming and
send email to cran@r-project.org. Please indicate the copyright situation
(GPL, ...) in your submission. Note that we generally do not accept
submissions of precompiled binaries due to security reasons (we have no
means to check for viruses etc. for the big variety of platforms that R runs
on). All binary distribution listed above are compiled by selected
maintainers, who are in charge for all binaries of their platform,
respectively.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kevin.wright@pioneer.com  Tue Oct  1 19:36:47 2002
From: kevin.wright@pioneer.com (Wright, Kevin)
Date: Tue, 1 Oct 2002 13:36:47 -0500
Subject: Possible inconsistency with mean & var
Message-ID: <C71CB7425639D311A7A40008C7286AB006A55049@carina.phibred.com>


I encountered an unexpected difference in the way that mean and var work:

> mean(numeric(0))
[1] NaN

> var(numeric(0))
Error in var(numeric(0)) : `x' is empty

Looking into this, I discovered in mean.default that sum(x)/n
evaluates as
> sum(numeric(0))/length(numeric(0))
[1] NaN

The function var calls an .Internal and seems to evaluate this:
> .Internal(cov(numeric(0),NULL,"all.obs"))
Error: `x' is empty


Best,


Kevin Wright, Research Scientist
Pioneer Hi-Bred Int'l, x4054.




This communication is for use by the intended recipient and contains 
information that may be privileged, confidential or copyrighted under
applicable law.  If you are not the intended recipient, you are hereby
formally notified that any use, copying or distribution of this e-mail,
in whole or in part, is strictly prohibited.  Please notify the sender
by return e-mail and delete this e-mail from your system.  Unless
explicitly and conspicuously designated as "E-Contract Intended",
this e-mail does not constitute a contract offer, a contract amendment,
or an acceptance of a contract offer.  This e-mail does not constitute
a consent to the use of sender's contact information for direct marketing
purposes or for transfers of data to third parties.

 Francais Deutsch Italiano  Espanol  Portuges  Japanese  Chinese  Korean

            http://www.DuPont.com/corp/email_disclaimer.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Oct  1 20:34:26 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 1 Oct 2002 21:34:26 +0200 (CEST)
Subject: X11 font at size 22 could not be loaded
Message-ID: <Pine.LNX.4.44.0210012123460.1159-100000@kleigh.nl>


I'm not sure this is a bug in R.

Since a few weeks I have a new PC, SuSE 8.0 installed. When
running demo(graphics) I get after a few graphs:

    Error in title(main = "January Pie Sales", cex.main = 1.8, font.main = 1) :
            X11 font at size 22 could not be loaded

And the demo stops.

This is in R 1.6.0. I get the same in R 1.5.1 on HP-UX, but
using my PC as the X-server.

So, it could be there is something wrong with the set-up of my
machine. SuSE 8.0 is pretty much up-to-date, but I can't
guarantee I didn't something stupid during installation. I will
try to find out what could be wrong with my fonts.

However, so far I haven't noticed any font problems with other
programs. If R can't load the font it wants, shouldn't it
continue with the next best thing, instead of stopping with an
error message?

-- 
Peter Kleiweg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  1 21:21:48 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Oct 2002 22:21:48 +0200
Subject: X11 font at size 22 could not be loaded
In-Reply-To: <Pine.LNX.4.44.0210012123460.1159-100000@kleigh.nl>
References: <Pine.LNX.4.44.0210012123460.1159-100000@kleigh.nl>
Message-ID: <x2smzpzz8j.fsf@biostat.ku.dk>

Peter Kleiweg <kleiweg@let.rug.nl> writes:

> I'm not sure this is a bug in R.
> 
> Since a few weeks I have a new PC, SuSE 8.0 installed. When
> running demo(graphics) I get after a few graphs:
> 
>     Error in title(main = "January Pie Sales", cex.main = 1.8, font.main = 1) :
>             X11 font at size 22 could not be loaded
> 
> And the demo stops.
> 
> This is in R 1.6.0. I get the same in R 1.5.1 on HP-UX, but
> using my PC as the X-server.
> 
> So, it could be there is something wrong with the set-up of my
> machine. SuSE 8.0 is pretty much up-to-date, but I can't
> guarantee I didn't something stupid during installation. I will
> try to find out what could be wrong with my fonts.
> 
> However, so far I haven't noticed any font problems with other
> programs. If R can't load the font it wants, shouldn't it
> continue with the next best thing, instead of stopping with an
> error message?

Hmm, yes...

I've seen this on a SuSE install at our place too. The direct cause
seems to be that the SuSE font server doesn't allow scaled versions of
the standard Adobe fonts. However, the logic in the X11 driver should
cause it to substitute a 20pt font in that case, but apparently it
doesn't. A temporary workaround might be to add scaled versions of the
PS fonts in /etc/X11/fs/config.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Oct  1 21:58:08 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Tue, 1 Oct 2002 22:58:08 +0200 (CEST)
Subject: X11 font at size 22 could not be loaded
In-Reply-To: <x2smzpzz8j.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0210012234040.1159-100000@kleigh.nl>

Peter Dalgaard BSA scribeva...

> Peter Kleiweg <kleiweg@let.rug.nl> writes:
>
> > I'm not sure this is a bug in R.
> >
> > Since a few weeks I have a new PC, SuSE 8.0 installed. When
> > running demo(graphics) I get after a few graphs:
> >
> >     Error in title(main = "January Pie Sales", cex.main = 1.8, font.main = 1) :
> >             X11 font at size 22 could not be loaded

[...]

> I've seen this on a SuSE install at our place too. The direct cause
> seems to be that the SuSE font server doesn't allow scaled versions of
> the standard Adobe fonts. However, the logic in the X11 driver should
> cause it to substitute a 20pt font in that case, but apparently it
> doesn't. A temporary workaround might be to add scaled versions of the
> PS fonts in /etc/X11/fs/config.

The weird thing is, in some cases, you do get another font size.
Sometimes I get a warning, not an error:

Warning message:
X11 used font size 8 when 6 was requested

-- 
Peter Kleiweg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct  1 23:03:39 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 2002 00:03:39 +0200
Subject: X11 font at size 22 could not be loaded
In-Reply-To: <Pine.LNX.4.44.0210012234040.1159-100000@kleigh.nl>
References: <Pine.LNX.4.44.0210012234040.1159-100000@kleigh.nl>
Message-ID: <x2ofadzuis.fsf@biostat.ku.dk>

Peter Kleiweg <kleiweg@let.rug.nl> writes:

> > I've seen this on a SuSE install at our place too. The direct cause
> > seems to be that the SuSE font server doesn't allow scaled versions of
> > the standard Adobe fonts. However, the logic in the X11 driver should
> > cause it to substitute a 20pt font in that case, but apparently it
> > doesn't. A temporary workaround might be to add scaled versions of the
> > PS fonts in /etc/X11/fs/config.
> 
> The weird thing is, in some cases, you do get another font size.
> Sometimes I get a warning, not an error:
> 
> Warning message:
> X11 used font size 8 when 6 was requested

That's not weird, that's what should happen.... The logic (at least
the intended one!) in the driver would be to give you "used font size
20 when 22 was requested" if there are no scalable fonts.

Oho! I think I see it: If you're using only nonscalable fonts, you are
assumed to have all the Adobe design sizes,

8, 10, 11, 12, 14, 17, 18, 20, 24, 25, 34

but some of these (11, 17, 20, 25, 34) are only available if you also
install 100dpi fonts. With only the 75dpi fonts, all you get is 8, 10,
12, 14, 18, 24. The logic in the driver doesn't catch this cas
properly, which it probably should.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Oct  1 23:45:26 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Wed, 2 Oct 2002 00:45:26 +0200 (MET DST)
Subject: Unsolved symbols: meet_ Tcl_EvalObjv (PR#2090)
Message-ID: <200210012245.AAA26861@pubhealth.ku.dk>


Running 'make check' I get two errors:

running code in 'mva-Ex.R' .../usr/lib/dld.sl: Unresolved symbol: meet_ (code)  from /users1/kleiweg/R-1.6.0-source/library/cluster/libs/cluster.sl

running code in 'tcltk-Ex.R' .../usr/lib/dld.sl: Unresolved symbol: Tcl_EvalObjv (code)  from /users1/kleiweg/R-1.6.0-source/library/tcltk/libs/tcltk.sl


Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20
 status =
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Tue Oct  1 23:55:03 2002
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Wed, 2 Oct 2002 00:55:03 +0200 (MET DST)
Subject: Scripts not executable (PR#2091)
Message-ID: <200210012255.AAA26878@pubhealth.ku.dk>



Running 'make' stops when it tries to build the recommended
(included) packages, because the script 'Rcmd' is not
executable. I have to do a 'chmod +x src/scripts/*' and rerun
'make'.

In version 1.5.1 I also noticed the installed scripts were not
executable, but I could do a 'chmod +x lib/R/bin/*' after 'make
install'. But now the scripts are already needed during 'make'.

This error does not occur on Linux-PC and Linux-Alpha.


Version:
 platform = hppa2.0-hp-hpux10.20
 arch = hppa2.0
 os = hpux10.20
 system = hppa2.0, hpux10.20
 status =
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct  2 00:25:52 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Oct 2002 01:25:52 +0200
Subject: Unsolved symbols: meet_ Tcl_EvalObjv (PR#2090)
In-Reply-To: <200210012245.AAA26861@pubhealth.ku.dk>
References: <200210012245.AAA26861@pubhealth.ku.dk>
Message-ID: <x2k7l1zqpr.fsf@biostat.ku.dk>

kleiweg@let.rug.nl writes:

> Running 'make check' I get two errors:
> 
> running code in 'mva-Ex.R' .../usr/lib/dld.sl: Unresolved symbol: meet_ (code)  from /users1/kleiweg/R-1.6.0-source/library/cluster/libs/cluster.sl

Wouldn't know about that one.
 
> running code in 'tcltk-Ex.R' .../usr/lib/dld.sl: Unresolved symbol: Tcl_EvalObjv (code)  from /users1/kleiweg/R-1.6.0-source/library/tcltk/libs/tcltk.sl

Which version of Tcl? That function has been around at least since
8.1, so I'm guessing 8.0. It's only being used by RTcl_ReadConsole
&friends so you might try taking that whole section of tcltk.c out by
replacing the

#ifndef Win32

with 

#if !defined(Win32) & !defined(Tcl80) 

or, less ceremoniously, 

#if 0

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Oct  2 07:24:28 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 2 Oct 2002 08:24:28 +0200
Subject: Scripts not executable (PR#2091)
In-Reply-To: <200210012255.AAA26878@pubhealth.ku.dk>
References: <200210012255.AAA26878@pubhealth.ku.dk>
Message-ID: <15770.37148.514799.185521@mithrandir.hornik.net>

>>>>> kleiweg  writes:

> Running 'make' stops when it tries to build the recommended
> (included) packages, because the script 'Rcmd' is not
> executable. I have to do a 'chmod +x src/scripts/*' and rerun
> 'make'.

> In version 1.5.1 I also noticed the installed scripts were not
> executable, but I could do a 'chmod +x lib/R/bin/*' after 'make
> install'. But now the scripts are already needed during 'make'.

> This error does not occur on Linux-PC and Linux-Alpha.

The scripts are installed using INSTALL_SCRIPT, which according to my
understanding should install as mode 755.

After running configure, my top-level Makeconf contains

INSTALL = /usr/bin/install -c
INSTALL_DATA = ${INSTALL} -m 644
INSTALL_PROGRAM = ${INSTALL}
INSTALL_SCRIPT = ${INSTALL}
INSTALL_DIR = ${INSTALL} -d

What does yours look like?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed Oct  2 11:19:40 2002
From: kleiweg@let.rug.nl (Peter Kleiweg)
Date: Wed, 2 Oct 2002 12:19:40 +0200 (CEST)
Subject: Scripts not executable (PR#2091)
In-Reply-To: <15770.37148.514799.185521@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.44.0210021211180.1162-100000@kleigh.nl>

Kurt Hornik scribeva...

> >>>>> kleiweg  writes:
>
> > Running 'make' stops when it tries to build the recommended
> > (included) packages, because the script 'Rcmd' is not
> > executable. I have to do a 'chmod +x src/scripts/*' and rerun
> > 'make'.
>
> > In version 1.5.1 I also noticed the installed scripts were not
> > executable, but I could do a 'chmod +x lib/R/bin/*' after 'make
> > install'. But now the scripts are already needed during 'make'.
>
> > This error does not occur on Linux-PC and Linux-Alpha.
>
> The scripts are installed using INSTALL_SCRIPT, which according to my
> understanding should install as mode 755.
>
> After running configure, my top-level Makeconf contains
>
> INSTALL = /usr/bin/install -c
> INSTALL_DATA = ${INSTALL} -m 644
> INSTALL_PROGRAM = ${INSTALL}
> INSTALL_SCRIPT = ${INSTALL}
> INSTALL_DIR = ${INSTALL} -d
>
> What does yours look like?

INSTALL = /opt/imake/bin/install -c
INSTALL_DATA = ${INSTALL} -m 644
INSTALL_PROGRAM = ${INSTALL}
INSTALL_SCRIPT = ${INSTALL}
INSTALL_DIR = ${INSTALL} -d

According to the manpage of install, the options -m and -d are
not supported.

-- 
Peter Kleiweg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kevin.Wright@pioneer.com  Wed Oct  2 15:19:29 2002
From: Kevin.Wright@pioneer.com (Kevin.Wright@pioneer.com)
Date: Wed, 2 Oct 2002 16:19:29 +0200 (MET DST)
Subject: Mean and var inconsistency (PR#2094)
Message-ID: <200210021419.QAA05768@pubhealth.ku.dk>

Full_Name: Kevin Wright
Version: 1.5.1
OS: Windows 95
Submission from: (NULL) (170.54.59.160)


Originally posted to r-devel, but after thinking about it more decided that this
is a bug.  I encountered an unexpected difference in the way that mean and var
work: 

> mean(numeric(0)) 
[1] NaN 

> var(numeric(0)) 
Error in var(numeric(0)) : `x' is empty 

Looking into this, I discovered in mean.default that sum(x)/n 
evaluates as 
> sum(numeric(0))/length(numeric(0)) 
[1] NaN 

The function var seems to evaluate this: 
> .Internal(cov(numeric(0),NULL,"all.obs")) 
Error: `x' is empty 

One possible fix would be to modify var to check that the length of x is greater
than 0, otherwise return NaN/NA.  

Just for your information (not necessarily the desirable answer), in S-Plus
2000:
> mean(numeric(0))
NA
> var(numeric(0))
NA



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rss@rss.phtd.tpu.edu.ru  Fri Oct  4 04:57:23 2002
From: rss@rss.phtd.tpu.edu.ru (rss@rss.phtd.tpu.edu.ru)
Date: Fri, 4 Oct 2002 05:57:23 +0200 (MET DST)
Subject: Problem with construction (1-x)^(1-y) (PR#2103)
Message-ID: <200210040357.FAA19946@pubhealth.ku.dk>

Hello!

I have any problem with construction (1-x)^(1-y) if y<1

> x=5
> y=.5
> (1-x)^(1-y)
[1] NaN
> (1-y)
[1] 0.5
> (1-x)^0.5
[1] NaN
> (1-x)
[1] -4
> -4^.5
[1] -2

Roma V. Kalaida
E-mail rss@rss.phtd.tpu.edu.ru

<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 5.1
 year = 2002
 month = 06
 day = 17
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Oct  4 07:20:21 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Fri, 4 Oct 2002 08:20:21 +0200 (MET DST)
Subject: Problem with construction (1-x)^(1-y) (PR#2103)
Message-ID: <200210040620.IAA20326@pubhealth.ku.dk>

rss@rss.phtd.tpu.edu.ru wrote:
> 
> Hello!
> 
> I have any problem with construction (1-x)^(1-y) if y<1
> 
> > x=5
> > y=.5
> > (1-x)^(1-y)
> [1] NaN

Well, that's not a bug! Also for y>=1 (hopefully!):
 (1-x)^1.1 # NaN

You are calculating with real numbers and expecting complex ones! So
just try:
 as.complex(1-x)^(1-y)

Uwe Ligges

> > (1-y)
> [1] 0.5
> > (1-x)^0.5
> [1] NaN
> > (1-x)
> [1] -4
> > -4^.5
> [1] -2
> 
> Roma V. Kalaida
> E-mail rss@rss.phtd.tpu.edu.ru

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mmcstephen@cogstate.com  Fri Oct  4 07:31:11 2002
From: mmcstephen@cogstate.com (mmcstephen@cogstate.com)
Date: Fri, 4 Oct 2002 08:31:11 +0200 (MET DST)
Subject: parse (PR#2104)
Message-ID: <200210040631.IAA20406@pubhealth.ku.dk>

Full_Name: Michael McStephen
Version: 1.5.1
OS: w2000
Submission from: (NULL) (202.138.192.38)


> R.version
         _              
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    5.1            
year     2002           
month    06             
day      17             
language R              
> 
> # The following line produces an error:
> tmp.name<-"tmp"
> parse(text=paste(tmp.name, ".lg, ",  sep="") )
Error in parse(file, n, text, prompt) : parse error
> 
>  
> # This line doesn't:
> parse(text=paste(tmp.name, ".lg ",  sep="") )
expression(tmp.lg)
> 
>  
> # The only difference is the ',' after lg in the second line.
>  
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Oct  4 09:32:25 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 4 Oct 2002 10:32:25 +0200
Subject: Scripts not executable (PR#2091)
In-Reply-To: <Pine.LNX.4.44.0210021211180.1162-100000@kleigh.nl>
References: <15770.37148.514799.185521@mithrandir.hornik.net>
 <Pine.LNX.4.44.0210021211180.1162-100000@kleigh.nl>
Message-ID: <15773.21017.805579.131688@mithrandir.hornik.net>

>>>>> Peter Kleiweg writes:

> Kurt Hornik scribeva...
>> >>>>> kleiweg  writes:
>> 
>> > Running 'make' stops when it tries to build the recommended
>> > (included) packages, because the script 'Rcmd' is not
>> > executable. I have to do a 'chmod +x src/scripts/*' and rerun
>> > 'make'.
>> 
>> > In version 1.5.1 I also noticed the installed scripts were not
>> > executable, but I could do a 'chmod +x lib/R/bin/*' after 'make
>> > install'. But now the scripts are already needed during 'make'.
>> 
>> > This error does not occur on Linux-PC and Linux-Alpha.
>> 
>> The scripts are installed using INSTALL_SCRIPT, which according to my
>> understanding should install as mode 755.
>> 
>> After running configure, my top-level Makeconf contains
>> 
>> INSTALL = /usr/bin/install -c
>> INSTALL_DATA = ${INSTALL} -m 644
>> INSTALL_PROGRAM = ${INSTALL}
>> INSTALL_SCRIPT = ${INSTALL}
>> INSTALL_DIR = ${INSTALL} -d
>> 
>> What does yours look like?

> INSTALL = /opt/imake/bin/install -c
> INSTALL_DATA = ${INSTALL} -m 644
> INSTALL_PROGRAM = ${INSTALL}
> INSTALL_SCRIPT = ${INSTALL}
> INSTALL_DIR = ${INSTALL} -d

> According to the manpage of install, the options -m and -d are
> not supported.

Wonderful.  An install from the X consortium, documented as 'compatible
with the BSD install script, but [was] written from scratch' ...

On the HPUX system that I have access to this works without problems,
though.  The man page does not document '-m' but the code (shell script)
shows that this works.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Oct  4 12:00:55 2002
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Fri, 4 Oct 2002 13:00:55 +0200 (MET DST)
Subject: Problem with construction (1-x)^(1-y) (PR#2103)
Message-ID: <200210041100.NAA24710@pubhealth.ku.dk>

On Fri, 4 Oct 2002 05:57:23 +0200 (MET DST), you wrote:

>> (1-x)^0.5
>[1] NaN
>> (1-x)
>[1] -4
>> -4^.5
>[1] -2

As Uwe mentioned, you can't take square roots of negative real
numbers, you need to force them to complex first.

The reason it worked in the last example is that exponentiation has
higher precedence than unary negation, so "-4^.5" is evaluated as
"-(4^.5)".

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Oct  4 12:10:16 2002
From: dmurdoch@pair.com (dmurdoch@pair.com)
Date: Fri, 4 Oct 2002 13:10:16 +0200 (MET DST)
Subject: parse (PR#2104)
Message-ID: <200210041110.NAA24846@pubhealth.ku.dk>

On Fri, 4 Oct 2002 08:31:11 +0200 (MET DST), you wrote:

>> # The following line produces an error:
>> tmp.name<-"tmp"
>> parse(text=paste(tmp.name, ".lg, ",  sep="") )
>Error in parse(file, n, text, prompt) : parse error

I'm not sure what you'd expect here.  If you just enter the result of
the paste at the command line, you should see 

> tmp.lg,
Error: syntax error

Commas aren't allowed to end expressions.  (Array indexing and
function calls have argument lists ending with a comma, but argument
lists aren't expressions.)

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Fri Oct  4 19:36:38 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Fri, 04 Oct 2002 14:36:38 -0400
Subject: items in Rd file
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC763@usrymx10.merck.com>

Dear R-devel,

I'm encountering a strange problem in a Rd file that I'm working on.  In the
"Value" section, I have something like:

=====================
\value{
  An object of class \code{randomForest}, which is a list with the
  following components:
  \item{call}{the original call to \code{randomForest}}
  ...

  For classification problem, the following are also included:

  \item{err.rate}{final error rate of the prediction on the input data.}
  ...

  For regression problem, the following are included:
  \item{mse}{mean square error: sum of squared residuals divided by
    \code{n}.}
  ...

  If test set is given (through the \code{xtest} or additionally
  \code{ytest} arguments), then there is also a \code{test} component,
  which is a list with the following components:
  
  \item{predicted}{predicted classes/values for the test set.}
  ...

  Note:  The \code{forest} structure is slightly different between
  classification and regression.
===============

In the resulting help page, the passages between \item{}'s all disappeared!
Is there any way to make it work?

Thanks a lot for any tips!

Andy
Andy I. Liaw, PhD
Biometrics Research          Phone: (732) 594-0820
Merck & Co., Inc.              Fax: (732) 594-1565
P.O. Box 2000, RY84-16            Rahway, NJ 07065
mailto:andy_liaw@merck.com



------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Fri Oct  4 19:45:18 2002
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Fri, 04 Oct 2002 20:45:18 +0200
Subject: items in Rd file
References: <51F9C42DA15CD311BD220008C707D81906FFC763@usrymx10.merck.com>
Message-ID: <3D9DE1BE.82D11C53@ci.tuwien.ac.at>

"Liaw, Andy" wrote:
> 
> Dear R-devel,
> 
> I'm encountering a strange problem in a Rd file that I'm working on.  In the
> "Value" section, I have something like:
> 
> =====================
> \value{
>   An object of class \code{randomForest}, which is a list with the
>   following components:
>   \item{call}{the original call to \code{randomForest}}
>   ...
> 
>   For classification problem, the following are also included:
> 
>   \item{err.rate}{final error rate of the prediction on the input data.}
>   ...
> 
>   For regression problem, the following are included:
>   \item{mse}{mean square error: sum of squared residuals divided by
>     \code{n}.}
>   ...
> 
>   If test set is given (through the \code{xtest} or additionally
>   \code{ytest} arguments), then there is also a \code{test} component,
>   which is a list with the following components:
> 
>   \item{predicted}{predicted classes/values for the test set.}
>   ...
> 
>   Note:  The \code{forest} structure is slightly different between
>   classification and regression.
> ===============
> 
> In the resulting help page, the passages between \item{}'s all disappeared!
> Is there any way to make it work?

I think you need an 
  {\itemize \items... }
or a
   \describe{ \items.. }

Hope that helps
Z

> Thanks a lot for any tips!
> 
> Andy
> Andy I. Liaw, PhD
> Biometrics Research          Phone: (732) 594-0820
> Merck & Co., Inc.              Fax: (732) 594-1565
> P.O. Box 2000, RY84-16            Rahway, NJ 07065
> mailto:andy_liaw@merck.com
> 
> ------------------------------------------------------------------------------
> Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.
> 
> ==============================================================================
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Oct  5 17:22:47 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 5 Oct 2002 09:22:47 -0700
Subject: R-1.6.0 for Darwin
Message-ID: <AF6ADB36-D87E-11D6-9339-000393860F3C@stat.ucla.edu>

I don't think it is necessary to put binary versions of the Darwin/X11
version on CRAN any more. The current sources compile without
problems on both Mac OS X 10.1 and 10.2, using either gcc/g77 2.95.2 or
gcc/g77 3.1, or f2c. It seems to me that
if you are using R from the command line, using X11, that you are
sophisticated enough to install the tools below. And, if you want
to install and upgrade R packages, you need these tools anyway.

Here is what you need. I will assume you use Jaguar (10.2), support for
10.1 will vanish rapidly. Also, do use gcc 3.1, it gives better and  
faster code
on Darwin (it's the default compiler anyway).

1. The Apple Developer Tools. Become an on-line member of the Apple
Developer Connection (for free) and then get the latest version of
the Developer Tools.

http://www.apple.com/developer

This gives you, in the Darwin layer, the gcc toolset,
and in the Aqua layer it gives you the ProjectBuilder toolset (which you
do not need for the Darwin/X11 version of R).

2. You have to install X11. A good introduction to this is

http://fink.sourceforge.net/doc/x11/index.php

You can install xfree86 using fink (see below), you can also install it  
using the
installer from

http://www.mrcla.com/XonX/

Instead of using the XDarwin interface that comes with this  
distribution, you
can (and probably should) use OroborusX, which provides and interface to
the rootless X server and a very Aqua-like window manager.

http://oroborosx.sourceforge.net/

3. You need the 10.2 version of fink, for readline, dlcompat, g77,  
ncurses, libpcre, libz,
libbz2, f2c if needed, tcltk, xfree86 if needed, atlas if needed, gnome  
if needed. Some of this
stuff (ncurses, tcl, libz) now also sits in /usr/lib, but the R  
configure scripts
will choose the fink version.

See http://fink.sourceforge.net
	in particular http://fink.sourceforge.net/news/jaguar.php

All the CRAN packages compile as well (although you may need
other pieces of fink such as MySQL or netcdf to get them going),
with the exception of Matrix and subselect, but a fix for those is
on its way.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From roxburg@kih.net  Sat Oct  5 21:27:49 2002
From: roxburg@kih.net (roxburg@kih.net)
Date: Sat, 5 Oct 2002 22:27:49 +0200 (MET DST)
Subject: Welch versus Satterthwaith (PR#2111)
Message-ID: <200210052027.WAA01389@pubhealth.ku.dk>

This is not a bug report but didn't see another way to ask a question.

For the approximate t-test assuming unequal variances, the R docs cite
Welch's method for the df of the approximating distribution.
I have several methods books, and they all uses Satterthwaite's method.
Why does R use Welch's method where can I learn about Welch's method?

Sincerely,
David Allen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Sun Oct  6 08:47:47 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Sun, 6 Oct 2002 09:47:47 +0200
Subject: R CMD check dependency simplification
In-Reply-To: <3D99D254.B65491C8@bank-banque-canada.ca>
References: <3D99D254.B65491C8@bank-banque-canada.ca>
Message-ID: <15775.60067.258424.221743@celeborn.leisch.at>

>>>>> On Tue, 01 Oct 2002 12:50:28 -0400,
>>>>> Paul Gilbert (PG) wrote:

  > I am trying to re-organizing my Makefile for testing my R packages and I
  > am having trouble finding a structure I like. The problem seems to be
  > that "R CMD check", which does wonderful things, does not allow
  > dependency information to flow through very gracefully. That is, since
  > everything is copied into the pkg.Rcheck directory, it is difficult to
  > make any changes to source files without having to completely re-do "R
  > CMD check pkg". 

  > For example, I would like to be able to make changes to
  > src/pkg1/man/foo.Rd and have dependencies that indicate only codoc and
  > examples need to be re-run, not tests and vignettes. (R CMD check can to
  > do this, the problem is moving the appropriate new pieces, in the
  > appropriate way, into the pkg1.Rcheck directory.)

I absolutely agree that this would be nice to have, but we don't have
any tools for that yet (and I don't think it is all that simple to get
it right).

If there is a clear dependency structure like you describe, i.e., pkg3
depends on pkg2 which depends on pkg1 one here is what I currently do:

check pkg1, when it passes INSTALL it into a development library and
add that to your R_LIBS variable. Then check pkg2 and do the
same. Then check pkg3.

  > The difficulty is exacerbated for me because I have pkg3 depends on pkg2
  > depends on pkg1. If I make a change to src/pkg1/inst/doc/guide.tex then
  > I really should only need to re-do the vignettes for pkg1, but instead I
  > have to re-do the whole "R CMD check" for pkg1, pkg2, and pkg3.

Why would you run R CMD check on pkg2 if you only change the vignette
of pkg1?

Best,
Fritz



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sun Oct  6 17:19:27 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Sun, 6 Oct 2002 09:19:27 -0700 (PDT)
Subject: Welch versus Satterthwaith (PR#2111)
In-Reply-To: <200210052027.WAA01389@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210060913490.12090-100000@homer25.u.washington.edu>

On Sat, 5 Oct 2002 roxburg@kih.net wrote:

> This is not a bug report but didn't see another way to ask a question.

Well, you could try the r-help or r-devel mailing lists

> For the approximate t-test assuming unequal variances, the R docs cite
> Welch's method for the df of the approximating distribution.
> I have several methods books, and they all uses Satterthwaite's method.
> Why does R use Welch's method where can I learn about Welch's method?
>

It's the same method.

The t-statistic is the difference in means divided by a more-or-less
unbiased estimate of its standard deviation. There's only one natural way
to do this and in sufficiently large samples that's all you need.

The more difficult part is the sampling distribution, which is
approximated by a t-distribution with degrees of freedom from some
complicated formula involving the two sample sizes and variances.  It was
indepedently derived by Welch and Satterthwaite.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sun Oct  6 20:21:11 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sun, 6 Oct 2002 12:21:11 -0700
Subject: R-1.6.0
Message-ID: <C5BF2F9B-D960-11D6-AD1D-000393860F3C@stat.ucla.edu>

I have build R-1.6.0 on Jaguar (actually on 10.2.2), using gcc 3.1
from Apple, g77 3.1 from fink, ATLAS from fink. It passes all
checks OK.

I also re-compiled the 233 packages listed below
with the same setup. I have NOT tested all these
packages in any detail. A tar.gz file with the whole /usr/local/lib/R
will be on ftp://gifi.stat.ucla.edu on Tuesday. It will NOT include
anything from fink (i.e. /sw) or Xfree86 (/usr/X11R6).

The problem with tkrplot is that the load command in tcl does not
seem to work (while it did work under 10.1). The problem with
ROracle, RSQLite, RQuantlib is that they need libraries which
I do not have. In Omegahat Perl from R and Python from R work,
the other way around I don't know. RXLisp does not compile any
more.

what builds

-- Everything from CRAN, including RMySQL, RmSQL, XML,
       rpvm, rsprng, RMpi, but not ROracle, RSQLite, RQuantlib
-- Lindsay packages rmutil, gnlm, stable, growthm repeated, event,  
ordinal
-- Bioconductor packages Biobase, annotate, affy, AnnBuilder, edd,  
genefilter,
	geneplotter, rhdf5, marrayTest, marrayClasses, marrayInput,  
marrayPlots,
	multtest, ROC, tkWidgets
-- snow from Tierney
-- deal from gR
-- from Devel Dopt, GRASS, PHYLOGR, R2HTML, RPgSQL, dseplus, pls,  
runstat,
	multidim, mclust, ensemble, locfit, write-snns
-- from OmegaHat gtk, OOP, RGtk, RGtkViewers, RObjectTables, RSPerl,  
RSPython

what does NOT load

tkrplot
 > library(tkrplot)
Loading required package: tcltk
dyld: /usr/local/lib/R/bin/R.bin malformed library:
	/usr/local/lib/R/library/tkrplot/libs/tkrplot.so
		(not a Mach-O library file, bad filetype value)
Trace/BPT trap
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmacq@ucscalumni.com  Sun Oct  6 23:01:45 2002
From: dmacq@ucscalumni.com (Don MacQueen)
Date: Sun, 6 Oct 2002 15:01:45 -0700
Subject: [R-SIG-Mac]R-1.6.0
In-Reply-To: <C5BF2F9B-D960-11D6-AD1D-000393860F3C@stat.ucla.edu>
References: <C5BF2F9B-D960-11D6-AD1D-000393860F3C@stat.ucla.edu>
Message-ID: <p05111701b9c6628a46d0@[192.168.1.100]>

At 12:21 PM -0700 10/6/02, Jan de Leeuw wrote:
>I have build R-1.6.0 on Jaguar (actually on 10.2.2), using gcc 3.1
>from Apple, g77 3.1 from fink, ATLAS from fink. It passes all
>checks OK.
>
>I also re-compiled the 233 packages listed below
>with the same setup. I have NOT tested all these
>packages in any detail. A tar.gz file with the whole /usr/local/lib/R
>will be on ftp://gifi.stat.ucla.edu on Tuesday. It will NOT include
>anything from fink (i.e. /sw) or Xfree86 (/usr/X11R6).
>
>The problem with tkrplot is that the load command in tcl does not
>seem to work (while it did work under 10.1). The problem with
>ROracle, RSQLite, RQuantlib is that they need libraries which
>I do not have.

For ROracle, what library would that be?
As we have an Oracle site license at work, maybe I can get the 
library and give it a try.

-Don

<- snip ->

>===
>Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
>Editor: Journal of Multivariate Analysis, Journal of Statistical  Software
>US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
>phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
>homepage: http://gifi.stat.ucla.edu
> 
>------------------------------------------------------------------------ 
>-------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
> 
>------------------------------------------------------------------------ 
>-------------------------       
>
>_______________________________________________
>R-SIG-Mac mailing list
>R-SIG-Mac@stat.math.ethz.ch
>http://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac


-- 
-------------------------
Don MacQueen
dmacq@ucscalumni.com
California, USA
-------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sun Oct  6 23:31:27 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sun, 6 Oct 2002 15:31:27 -0700
Subject: [R-SIG-Mac]R-1.6.0
In-Reply-To: <p05111701b9c6628a46d0@[192.168.1.100]>
Message-ID: <5AB48C88-D97B-11D6-BACB-000393860F3C@stat.ucla.edu>

Well. it needs ORACLE_HOME, and then installs some module
in Oracle, as far as I can see. I don't have an ORACLE_HOME.

--- Jan

On Sunday, October 6, 2002, at 03:01 PM, Don MacQueen wrote:

> At 12:21 PM -0700 10/6/02, Jan de Leeuw wrote:
>> I have build R-1.6.0 on Jaguar (actually on 10.2.2), using gcc 3.1
>> from Apple, g77 3.1 from fink, ATLAS from fink. It passes all
>> checks OK.
>>
>> I also re-compiled the 233 packages listed below
>> with the same setup. I have NOT tested all these
>> packages in any detail. A tar.gz file with the whole /usr/local/lib/R
>> will be on ftp://gifi.stat.ucla.edu on Tuesday. It will NOT include
>> anything from fink (i.e. /sw) or Xfree86 (/usr/X11R6).
>>
>> The problem with tkrplot is that the load command in tcl does not
>> seem to work (while it did work under 10.1). The problem with
>> ROracle, RSQLite, RQuantlib is that they need libraries which
>> I do not have.
>
> For ROracle, what library would that be?
> As we have an Oracle site license at work, maybe I can get the library  
> and give it a try.
>
> -Don
>
> <- snip ->
>
>> ===
>> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
>> Editor: Journal of Multivariate Analysis, Journal of Statistical   
>> Software
>> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
>> phone (310)-825-9550;  fax (310)-206-5658;  email:  
>> deleeuw@stat.ucla.edu
>> homepage: http://gifi.stat.ucla.edu
>> ---------------------------------------------------------------------- 
>> -- -------------------------
>>           No matter where you go, there you are. --- Buckaroo Banzai
>>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>> ---------------------------------------------------------------------- 
>> -- -------------------------
>> _______________________________________________
>> R-SIG-Mac mailing list
>> R-SIG-Mac@stat.math.ethz.ch
>> http://www.stat.math.ethz.ch/mailman/listinfo/r-sig-mac
>
>
> -- 
> -------------------------
> Don MacQueen
> dmacq@ucscalumni.com
> California, USA
> -------------------------
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.c.rougier@durham.ac.uk  Mon Oct  7 18:53:17 2002
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Mon, 7 Oct 2002 19:53:17 +0200 (MET DST)
Subject: Core dump with "parse" (PR#2120)
Message-ID: <200210071753.TAA15549@pubhealth.ku.dk>

Hi everyone,

The following code may not be very sensible, but it generates a core dump.  The same happens in R-1.5.1.

Cheers, Jonathan.

arrow:dma0jcr% R-1.6.0

R : Copyright 2002, The R Development Core Team
Version 1.6.0  (2002-10-01)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

> parse(text=deparse(body(plot)))
expression({
    if (is.null(attr(x, "class")) && is.function(x)) {
        if ("ylab" 0names(list(...))) 
            plot.function(x, ...)
        else plot.function(x, ylab = paste(deparse(substitute(x)), 
            "(x)"), ...)
    }
    else UseMethod("plot")
})
Segmentation fault (core dumped)



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cord1@gmx.de  Mon Oct  7 18:56:59 2002
From: cord1@gmx.de (cord1@gmx.de)
Date: Mon, 7 Oct 2002 19:56:59 +0200 (MET DST)
Subject: plot crashes (PR#2121)
Message-ID: <200210071756.TAA15563@pubhealth.ku.dk>

Full_Name: cord eggers
Version: R1.6.0
OS: Windows 2000
Submission from: (NULL) (217.80.133.46)


Whenever i give the plot() command, the programm crashes with

"Unknown software exception" (0xc0000090) 
at address 0x77e7f142

Do You know something about this? 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Mon Oct  7 19:27:24 2002
From: murdoch@stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Mon, 7 Oct 2002 20:27:24 +0200 (MET DST)
Subject: plot crashes (PR#2121)
Message-ID: <200210071827.UAA15684@pubhealth.ku.dk>

On Mon, 7 Oct 2002 19:56:59 +0200 (MET DST), you wrote in message
<200210071756.TAA15563@pubhealth.ku.dk>:

>Full_Name: cord eggers
>Version: R1.6.0
>OS: Windows 2000
>Submission from: (NULL) (217.80.133.46)
>
>
>Whenever i give the plot() command, the programm crashes with
>
>"Unknown software exception" (0xc0000090) 
>at address 0x77e7f142
>
>Do You know something about this? 

It doesn't happen to me.  Could you try running rgui with the
--vanilla option, and then give an exact sequence of commands that
lead to the crash?

Duncan Murdoch

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rpeng@stat.ucla.edu  Mon Oct  7 21:19:22 2002
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Mon, 7 Oct 2002 13:19:22 -0700 (PDT)
Subject: Core dump with "parse" (PR#2120)
In-Reply-To: <200210071753.TAA15549@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.10.10210071314540.11068-100000@fisher.stat.ucla.edu>

On my GNU/Linux box running 1.6.0, I get

marla:> R --vanilla

R : Copyright 2002, The R Development Core Team
Version 1.6.0  (2002-10-01)

[...]
> parse(text=deparse(body(plot)))
expression({
    if (is.null(attr(x, "class")) && is.function(x)) {
        if ("ylab" 0names(list(...))) 
            plot.function(x, ...)
        else plot.function(x, ylab = paste(deparse(substitute(x)), 
            "(x)"), ...)
    }
    else UseMethod("plot")
})
> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.0              
year     2002             
month    10               
day      01               
language R                


But on one of our OS X servers running R 1.5.1, I get:

galton:> R --vanilla

R : Copyright 2002, The R Development Core Team
Version 1.5.1  (2002-06-17)

[...]
> parse(text = deparse(body(plot)))
expression({
    if (is.null(attr(x, "class")) && is.function(x)) {
Bus error

I can't tell what the problem is though.

-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng

On Mon, 7 Oct 2002, j.c.rougier@durham.ac.uk wrote:

> Hi everyone,
> 
> The following code may not be very sensible, but it generates a core
> dump.  The same happens in R-1.5.1.
> 
> Cheers, Jonathan.
> 
> arrow:dma0jcr% R-1.6.0
> 
> R : Copyright 2002, The R Development Core Team
> Version 1.6.0  (2002-10-01)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> > parse(text=deparse(body(plot)))
> expression({
>     if (is.null(attr(x, "class")) && is.function(x)) {
>         if ("ylab" 0names(list(...))) 
>             plot.function(x, ...)
>         else plot.function(x, ylab = paste(deparse(substitute(x)), 
>             "(x)"), ...)
>     }
>     else UseMethod("plot")
> })
> Segmentation fault (core dumped)
> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = 
>  major = 1
>  minor = 6.0
>  year = 2002
>  month = 10
>  day = 01
>  language = R
> 
> Search Path:
>  .GlobalEnv, Autoloads, package:base
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct  7 21:32:03 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 7 Oct 2002 13:32:03 -0700 (PDT)
Subject: Core dump with "parse" (PR#2120)
In-Reply-To: <200210071753.TAA15549@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210071327050.42328-100000@homer19.u.washington.edu>

On Mon, 7 Oct 2002 j.c.rougier@durham.ac.uk wrote:

> Hi everyone,
>
> The following code may not be very sensible, but it generates a core
> dump.  The same happens in R-1.5.1.

It doesn't generate a core dump for me in either version, but it doesn't
work correctly either.

A simpler version is:
> parse(text="a %in% b")
expression(a 0n% b)

It looks like the %i is being used as a printf format string, which might
well cause a core dump.

This isn't happening inside parse, but inside print, since
> parse(text="a %in% b")[[1]]
a %in% b


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct  7 21:55:57 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Oct 2002 22:55:57 +0200
Subject: Core dump with "parse" (PR#2120)
In-Reply-To: <Pine.GSO.4.10.10210071314540.11068-100000@fisher.stat.ucla.edu>
References: <Pine.GSO.4.10.10210071314540.11068-100000@fisher.stat.ucla.edu>
Message-ID: <x2bs66klya.fsf@biostat.ku.dk>

Roger Peng <rpeng@stat.ucla.edu> writes:

> On my GNU/Linux box running 1.6.0, I get
...
> But on one of our OS X servers running R 1.5.1, I get:

The problem is that PrintExpression is using 
 
 Rprintf(CHAR(STRING_ELT(u, i)));

which works right until it needs to print something with % inside,
then Rprintf interprets the string as a format specification, and
expects to find further arguments to handle according to the
conversion specification. Since they are not there, it grabs
whatever is sitting in the relevant place on the stack and beyond
that, all bets are off...

I'll put the fix into r-patched after some testing.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jimmy@econostat.co.uk  Tue Oct  8 14:33:39 2002
From: jimmy@econostat.co.uk (jimmy@econostat.co.uk)
Date: Tue, 8 Oct 2002 15:33:39 +0200 (MET DST)
Subject: spec.pgram bug (PR#2123)
Message-ID: <200210081333.PAA25091@pubhealth.ku.dk>

Full_Name: Jimmy Shadbolt
Version: 1.5.1 and 1.6
OS: linux
Submission from: (NULL) (194.217.93.241)


The code for spec.pgram contains the following:

    for (i in 1:ncol(x)) {
        for (j in 1:ncol(x)) {
            pgram[, i, j] <- xfft[, i] * Conj(xfft[, j])/(N*xfreq)
        }
    }
    ## value at zero is invalid as mean has been removed, so interpolate
    pgram[1, i, j] <- 0.5*(pgram[2, i, j] + pgram[N, i, j])

Surely the last line should be inside the loops (and apply to all spectra, not
just the last)?



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed Oct  9 17:54:03 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Wed, 9 Oct 2002 18:54:03 +0200 (MET DST)
Subject: problems with missing values created by conversion using as.matri (PR#2130)
Message-ID: <200210091654.SAA07998@pubhealth.ku.dk>

> version
         _                   
platform sparc-sun-solaris2.8
arch     sparc               
os       solaris2.8          
system   sparc, solaris2.8   
status                       
major    1                   
minor    6.0                 
year     2002                
month    10                  
day      01                  
language R                   

------------------------------

Create a very simple data frame containing an factor and a character vector
each containing a missing value:

	> x <- data.frame( a=c("",NA), b=c(1,NA) ) 

Conversion to a matrix treats the two missing values differently:

	> as.matrix(x)
	  a  b   
	1 "" " 1"
	2 NA "NA"

The missing value in the factor variable has been correctly converted to a
missing value, while the missing value in the numeric vector has been
incorrectly converted to a string "NA", which is not recognized as a missing
value:

	>  is.na(as.matrix(x))
	      a     b
	1 FALSE FALSE
	2  TRUE FALSE

This turned up because I was using lapply to check for rows containing only
blank or missing values:

	> all.blank <- function(x) all( is.na(x) | (x <= " ") )
	> blanks <- apply(x, 1, all.blank)
	> blanks
	    1     2 
	FALSE FALSE 

This should have yielded

	> blanks
	    1     2 
	FALSE TRUE


BTW direct conversion using as.character doesn't show any problems when
applied to the individual columns:

	> as.character(x$a)
	[1] "" NA
	> as.character(x$b)
	[1] "1" NA 

	
I think the problem is that as.matrix.data.frame is using format() to
convert things to characters, which is resulting in a "NA" string and not a
missing value.  

Why isn't it using as.character() for this?

For completeness here's the patch to make this change, but I have not
explored what other side effects this might have.

*** R-1.6.0/src/library/base/R/dataframe.R      Thu Aug 29 03:41:42 2002
--- R-1.6.0-GRW//src/library/base/R/dataframe.R Wed Oct  9 12:29:11 2002
***************
*** 931,937 ****
            if (is.character(X[[j]]))
                next
            xj <- X[[j]]
!           X[[j]] <- if(length(levels(xj))) as.vector(xj) else format(xj)
        }
      }
      X <- unlist(X, recursive = FALSE, use.names = FALSE)
--- 931,937 ----
            if (is.character(X[[j]]))
                next
            xj <- X[[j]]
!           X[[j]] <- if(length(levels(xj))) as.vector(xj) else
as.character(xj)
        }
      }
      X <- unlist(X, recursive = FALSE, use.names = FALSE)



-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From voegelas@users.sourceforge.net  Wed Oct  9 19:13:54 2002
From: voegelas@users.sourceforge.net (voegelas@users.sourceforge.net)
Date: Wed, 9 Oct 2002 20:13:54 +0200 (MET DST)
Subject: help-links.sh doesn't make sure that packages.html is writable (PR#2131)
Message-ID: <200210091813.UAA08317@pubhealth.ku.dk>

Full_Name: Andreas Voegele
Version: 1.6.0
OS: GNU/Linux
Submission from: (NULL) (136.206.1.18)


Here's a minor problem:

help-links.sh copies packages-head.html to ~/.R/doc/html/packages.html.
Afterwards the script tries to add more html code to the copy.
But if packages-head.html is not writable the copy won't be writable and
as a consequence the script cannot add its html code.

The following patch ensures that packages.html is writable:

diff -u -r R-1.6.0.orig/share/sh/help-links.sh R-1.6.0/share/sh/help-links.sh
--- R-1.6.0.orig/share/sh/help-links.sh 2002-07-30 18:42:56.000000000 +0200
+++ R-1.6.0/share/sh/help-links.sh      2002-10-09 19:10:45.000000000 +0200
@@ -42,6 +42,7 @@
 rm -f ${PKGLIST}
 rm -f ${SEARCHINDEX}
 cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}
+chmod u+w ${PKGLIST}

 get_unique () {
   if test -r ${1}; then



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Oct  9 22:21:11 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 9 Oct 2002 14:21:11 -0700 (PDT)
Subject: problems with missing values created by conversion using as.matri
 (PR#2130)
In-Reply-To: <200210091654.SAA07998@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210091418100.64022-100000@homer13.u.washington.edu>

On Wed, 9 Oct 2002 gregory_r_warnes@groton.pfizer.com wrote:
> ------------------------------
>
> Create a very simple data frame containing an factor and a character vector
> each containing a missing value:
>
> 	> x <- data.frame( a=c("",NA), b=c(1,NA) )
>
> Conversion to a matrix treats the two missing values differently:
>

Yes, as.matrix.data.frame() uses format() to make character strings, and
it needs to check for NA as well

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Oct  9 22:21:58 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Wed, 9 Oct 2002 23:21:58 +0200 (MET DST)
Subject: problems with missing values created by conversion using as.matri (PR#2133)
Message-ID: <200210092121.XAA08874@pubhealth.ku.dk>

On Wed, 9 Oct 2002 gregory_r_warnes@groton.pfizer.com wrote:
> ------------------------------
>
> Create a very simple data frame containing an factor and a character vector
> each containing a missing value:
>
> 	> x <- data.frame( a=c("",NA), b=c(1,NA) )
>
> Conversion to a matrix treats the two missing values differently:
>

Yes, as.matrix.data.frame() uses format() to make character strings, and
it needs to check for NA as well

	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sta6ajb@leeds.ac.uk  Thu Oct 10 13:05:50 2002
From: sta6ajb@leeds.ac.uk (sta6ajb@leeds.ac.uk)
Date: Thu, 10 Oct 2002 14:05:50 +0200 (MET DST)
Subject: Documentation for randu() (PR#2141)
Message-ID: <200210101205.OAA15829@pubhealth.ku.dk>

Full_Name: Andrew J. Baczkowski
Version: 1.1.1, 1.5.0
OS: NT, unix
Submission from: (NULL) (129.11.159.161)


Help documentation for randu() has incorrect R code in Example.

Should replace line 4

seed <<- ((2^16) + 3) * seed)

by

seed <<- ((2^16) + 3) * seed) %% (2^31)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 10 14:34:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 10 Oct 2002 15:34:35 +0200 (MET DST)
Subject: Documentation for randu() (PR#2141)
Message-ID: <200210101334.PAA17342@pubhealth.ku.dk>

That's what the .Rd file says, but % needs to be escaped these days
for it to appear in the converted help.

Fixed for 1.6.1 (and please don't report on obselete versions).

On Thu, 10 Oct 2002 sta6ajb@leeds.ac.uk wrote:

> Full_Name: Andrew J. Baczkowski
> Version: 1.1.1, 1.5.0
> OS: NT, unix
> Submission from: (NULL) (129.11.159.161)
>
>
> Help documentation for randu() has incorrect R code in Example.
>
> Should replace line 4
>
> seed <<- ((2^16) + 3) * seed)
>
> by
>
> seed <<- ((2^16) + 3) * seed) %% (2^31)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From c.declercq@orsnpdc.org  Thu Oct 10 15:02:00 2002
From: c.declercq@orsnpdc.org (c.declercq@orsnpdc.org)
Date: Thu, 10 Oct 2002 16:02:00 +0200 (MET DST)
Subject: Sweave (PR#2142)
Message-ID: <200210101402.QAA17764@pubhealth.ku.dk>

In the 'RWeaveLatexSetup' function in the 'tools' package in R 1.6.0 , the
code below does not work (pdflatex can't find 'Sweave.sty'):

if (stylepath)
        styfile <- file.path(R.home(), "share", "texmf", "Sweave")
    else styfile <- "Sweave"

In R 1.5.1, that was:

if(stylepath)
        styfile <- file.path(.path.package("tools"),
                             "Sweave", "Sweave")
else
        styfile <- "Sweave"

and that was working.


Version:
 platform = i386-pc-mingw32
 arch = i386
 os = mingw32
 system = i386, mingw32
 status =
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
 .GlobalEnv, package:tools, package:rodbc, package:ctest, Autoloads,
package:base

--
Christophe DECLERCQ, MD
Observatoire Rgional de la Sant Nord-Pas-de-Calais
13, rue Faidherbe 59046 LILLE Cedex FRANCE
Phone +33 3 20 15 49 24
Fax   +33 3 20 55 92 30
E-mail c.declercq@orsnpdc.org



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 10 16:10:34 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 10 Oct 2002 16:10:34 +0100 (BST)
Subject: R-1.6.0-beta compiling on Solaris with gcc-3.2
In-Reply-To: <15744.49422.503549.192941@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0210101610040.8679-100000@gannet.stats>

On Thu, 12 Sep 2002, Kurt Hornik wrote:

> >>>>> Uwe Ligges writes:
>
> > Compiling R-1.6.0-beta (or any other) with gcc-3.2 just with
> >  ./configure
> >  make
>
> >  ... works - great!
>
>
> > But there are these annoying warning messages after *each* call to any
> > of the gcc tools, as in:
>
> >  gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
> >    -DHAVE_CONFIG_H   -g -O2 -c phyper.c -o phyper.o
> >  cc1: warning: changing search order for system directory
> >    "/usr/local/include"
> >  cc1: warning:   as it has already been specified as a non-system
> >    directory
>
> > I am not really sure if there is something special with our system?
> > If not, is it possible to solve that in the configure script for a
> > later version of R?
>
> Brian had already raised this some time ago---Brian, is there an obvious
> fix?  If not, then we need a configure check for GCC version 3.2 or
> better and inititialize CPPFLAGS accordingly?

That's the best I know of.  For now, set CPPFLAGS to be empty.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Oct 10 16:24:04 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 10 Oct 2002 17:24:04 +0200
Subject: R-1.6.0-beta compiling on Solaris with gcc-3.2
In-Reply-To: <Pine.LNX.4.31.0210101610040.8679-100000@gannet.stats>
References: <15744.49422.503549.192941@mithrandir.hornik.net>
 <Pine.LNX.4.31.0210101610040.8679-100000@gannet.stats>
Message-ID: <15781.39828.274422.681508@mithrandir.hornik.net>

>>>>> ripley  writes:

> On Thu, 12 Sep 2002, Kurt Hornik wrote:
>> >>>>> Uwe Ligges writes:
>> 
>> > Compiling R-1.6.0-beta (or any other) with gcc-3.2 just with
>> >  ./configure
>> >  make
>> 
>> >  ... works - great!
>> 
>> 
>> > But there are these annoying warning messages after *each* call to any
>> > of the gcc tools, as in:
>> 
>> >  gcc -I. -I../../src/include -I../../src/include -I/usr/local/include
>> >    -DHAVE_CONFIG_H   -g -O2 -c phyper.c -o phyper.o
>> >  cc1: warning: changing search order for system directory
>> >    "/usr/local/include"
>> >  cc1: warning:   as it has already been specified as a non-system
>> >    directory
>> 
>> > I am not really sure if there is something special with our system?
>> > If not, is it possible to solve that in the configure script for a
>> > later version of R?
>> 
>> Brian had already raised this some time ago---Brian, is there an obvious
>> fix?  If not, then we need a configure check for GCC version 3.2 or
>> better and inititialize CPPFLAGS accordingly?

> That's the best I know of.  For now, set CPPFLAGS to be empty.

Ok, I'll try to do something along these lines then.

I assume that one could configure gcc 3.2 *not* to use
/usr/local/include so I will need to find out whether the dir is in the
default search path?

Jan, Luke: same for gcc 3.2 on Darwin with Fink and /sw?

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Oct 10 16:50:02 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 10 Oct 2002 08:50:02 -0700
Subject: R-1.6.0-beta compiling on Solaris with gcc-3.2
In-Reply-To: <15781.39828.274422.681508@mithrandir.hornik.net>
Message-ID: <F08AE8DC-DC67-11D6-A3DB-000393860F3C@stat.ucla.edu>

Yes,  same messages here (starting at 3.1). It makes more sense
to me not to put /usr/local/include in R's CPPFLAGS than to tinker
with gcc.

On Thursday, October 10, 2002, at 08:24 AM, Kurt Hornik wrote:

>>>>>> ripley  writes:
>
>> On Thu, 12 Sep 2002, Kurt Hornik wrote:
>>>>>>>> Uwe Ligges writes:
>>>
>>>> Compiling R-1.6.0-beta (or any other) with gcc-3.2 just with
>>>>  ./configure
>>>>  make
>>>
>>>>  ... works - great!
>>>
>>>
>>>> But there are these annoying warning messages after *each* call to  
>>>> any
>>>> of the gcc tools, as in:
>>>
>>>>  gcc -I. -I../../src/include -I../../src/include  
>>>> -I/usr/local/include
>>>>    -DHAVE_CONFIG_H   -g -O2 -c phyper.c -o phyper.o
>>>>  cc1: warning: changing search order for system directory
>>>>    "/usr/local/include"
>>>>  cc1: warning:   as it has already been specified as a non-system
>>>>    directory
>>>
>>>> I am not really sure if there is something special with our system?
>>>> If not, is it possible to solve that in the configure script for a
>>>> later version of R?
>>>
>>> Brian had already raised this some time ago---Brian, is there an  
>>> obvious
>>> fix?  If not, then we need a configure check for GCC version 3.2 or
>>> better and inititialize CPPFLAGS accordingly?
>
>> That's the best I know of.  For now, set CPPFLAGS to be empty.
>
> Ok, I'll try to do something along these lines then.
>
> I assume that one could configure gcc 3.2 *not* to use
> /usr/local/include so I will need to find out whether the dir is in the
> default search path?
>
> Jan, Luke: same for gcc 3.2 on Darwin with Fink and /sw?
>
> -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From s.tomlinson@cancer.org.uk  Thu Oct 10 17:34:31 2002
From: s.tomlinson@cancer.org.uk (Simon Tomlinson)
Date: Thu, 10 Oct 2002 17:34:31 +0100
Subject: R DCOM VC6 example
Message-ID: <5.0.0.25.1.20021010173133.01f39350@magic.lif.icnet.uk>

Hi
Does anyone know if there is an example of  the R DCOM server being used in 
a Visual C++ project?

Thanks

Simon

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Fri Oct 11 08:57:21 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Fri, 11 Oct 2002 09:57:21 +0200
Subject: Sweave (PR#2142)
In-Reply-To: <200210101402.QAA17764@pubhealth.ku.dk>
References: <200210101402.QAA17764@pubhealth.ku.dk>
Message-ID: <15782.33889.962443.84196@galadriel.ci.tuwien.ac.at>


  > In the 'RWeaveLatexSetup' function in the 'tools' package in R 1.6.0 , th=
  > e
  > code below does not work (pdflatex can't find 'Sweave.sty'):

  > if (stylepath)
  >         styfile <- file.path(R.home(), "share", "texmf", "Sweave")
  >     else styfile <- "Sweave"

  > In R 1.5.1, that was:

  > if(stylepath)
  >         styfile <- file.path(.path.package("tools"),
  >                              "Sweave", "Sweave")
  > else
  >         styfile <- "Sweave"

  > and that was working.

The path is correct (I want to have Sweave.sty in
$R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
does not get installed properly when builddir != srcdir. This has been
fixed in both the devel and patched version of R.

As a quick fix for 1.6.0: please copy Sweave.sty manually to
$R_HOME/share/texmf.

Thanks a lot for the bug report,
Fritz

-- 
-------------------------------------------------------------------
                        Friedrich Leisch 
Institut fr Statistik                     Tel: (+43 1) 58801 10715
Technische Universitt Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstrae 8-10/1071      Friedrich.Leisch@ci.tuwien.ac.at
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch
-------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From c.declercq@orsnpdc.org  Fri Oct 11 15:35:38 2002
From: c.declercq@orsnpdc.org (Christophe Declercq)
Date: Fri, 11 Oct 2002 15:35:38 +0100
Subject: Sweave (PR#2142)
In-Reply-To: <15782.33889.962443.84196@galadriel.ci.tuwien.ac.at>
Message-ID: <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>

Thanks, Fritz, for your answer.

> De : Friedrich Leisch [mailto:leisch@galadriel.ci.tuwien.ac.at]
>[...]
> The path is correct (I want to have Sweave.sty in
> $R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
> does not get installed properly when builddir != srcdir. This has been
> fixed in both the devel and patched version of R.

Yes, but  'file.path(R.home(), "share", "texmf", "Sweave")' on my MS-Windows
box gives "C:\\R\\RW1060/share/texmf/Sweave".

With that, you get '\usepackage{C:RRW1060/share/texmf/Sweave}' in the tex
file. The problem seems to be with the 'R.home()' output on MS-Windows.

'file.path(.path.package("tools"), "Sweave", "Sweave")' was giving
"C:/R/RW1060/library/tools/Sweave/Sweave" which is OK for pdflatex.

Anyway, thanks a lot for Sweave which is really great (for the moment, as I
need it working, I have just put back the old stylepath code in tools).

Christophe
--
Christophe DECLERCQ, MD
Observatoire Rgional de la Sant Nord-Pas-de-Calais
13, rue Faidherbe 59046 LILLE Cedex FRANCE
Phone +33 3 20 15 49 24
Fax   +33 3 20 55 92 30
E-mail c.declercq@orsnpdc.org

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Oct 11 15:06:56 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 11 Oct 2002 16:06:56 +0200 (MET DST)
Subject: Sweave (PR#2142)
Message-ID: <200210111406.QAA28115@pubhealth.ku.dk>

On Fri, 11 Oct 2002, Christophe Declercq wrote:

> Thanks, Fritz, for your answer.
>
> > De : Friedrich Leisch [mailto:leisch@galadriel.ci.tuwien.ac.at]
> >[...]
> > The path is correct (I want to have Sweave.sty in
> > $R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
> > does not get installed properly when builddir != srcdir. This has been
> > fixed in both the devel and patched version of R.
>
> Yes, but  'file.path(R.home(), "share", "texmf", "Sweave")' on my MS-Windows
> box gives "C:\\R\\RW1060/share/texmf/Sweave".
>
> With that, you get '\usepackage{C:RRW1060/share/texmf/Sweave}' in the tex
> file. The problem seems to be with the 'R.home()' output on MS-Windows.

Nope, R.home is correct.  The problem is that Sweave is not escaping \'s
(nor spaces, although I believe they will not occur in R.home()'s output).
Some Windows applications insist on \, but Windows' versions of TeX seem
to insist on /, so applications calling TeX need to convert the path to
Unix style.

Also, Sweave.sty was not installed under Windows in 1.6.0 under any
circumstances.

>
> 'file.path(.path.package("tools"), "Sweave", "Sweave")' was giving
> "C:/R/RW1060/library/tools/Sweave/Sweave" which is OK for pdflatex.
>
> Anyway, thanks a lot for Sweave which is really great (for the moment, as I
> need it working, I have just put back the old stylepath code in tools).
>
> Christophe
> --
> Christophe DECLERCQ, MD
> Observatoire Rgional de la Sant Nord-Pas-de-Calais
> 13, rue Faidherbe 59046 LILLE Cedex FRANCE
> Phone +33 3 20 15 49 24
> Fax   +33 3 20 55 92 30
> E-mail c.declercq@orsnpdc.org
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Oct 11 15:52:13 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 11 Oct 2002 09:52:13 -0500
Subject: Sweave (PR#2142)
Message-ID: <E18019B-0000NW-00@sonny.eddelbuettel.com>


> Nope, R.home is correct.  The problem is that Sweave is not escaping \'s
> (nor spaces, although I believe they will not occur in R.home()'s output).
> Some Windows applications insist on \, but Windows' versions of TeX seem
> to insist on /, so applications calling TeX need to convert the path to
> Unix style.

I got bitten by that under Cygwin with R in the default c:\Program Files\R.
Cygwin's LaTeX (i.e. tetex) then breaks. A location without spaces in the
path works fine.   

Dirk

-- 
According to the latest figures, 43% of all signatures are totally worthless.   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Fri Oct 11 19:30:00 2002
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Fri, 11 Oct 2002 20:30:00 +0200
Subject: growing process size in simulation
Message-ID: <3DA718A8.79391A9E@ci.tuwien.ac.at>

I came across this in a simulation I ran under 1.6.0: If I do something
like

R> x <- rnorm(10)
R> rval <- NULL
R> for(i in 1:100000) rval <- t.test(x)$p.value

then the process size remains at about 14M under 1.5.1, but it seems to
be almost linearly growing up to more than 100M under 1.6.0.

I know that the above simulation is nonsense, but it was the simplest I
could come up with to reproduce the behaviour. It doesn't depend on
t.test, if I use wilcox.test(x)$p.value the same happens...

I could reproduce this behaviour under Linux and Solaris, the exact
versions are given below.
Z

---
the problem exists on

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.0              
year     2002             
month    10               
day      01               
language R                

and

platform sparc-sun-solaris2.7
arch     sparc               
os       solaris2.7          
system   sparc, solaris2.7   
status                       
major    1                   
minor    6.0                 
year     2002                
month    10                  
day      01                  
language R                   

but not on

platform i386-pc-linux-gnu
arch     i386             
os       linux-gnu        
system   i386, linux-gnu  
status                    
major    1                
minor    5.1              
year     2002             
month    06               
day      17               
language R
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.c.rougier@durham.ac.uk  Fri Oct 11 19:38:44 2002
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Fri, 11 Oct 2002 20:38:44 +0200 (MET DST)
Subject: Odd outcome of attr with environments (PR#2148)
Message-ID: <200210111838.UAA29229@pubhealth.ku.dk>

Hi everyone,

I think the following error is slightly odd:

> fred <- new.env()
> happy <- function() fred
> happy()
<environment: 0x8a425b8>
> attr(happy(), "foo") <- 1:10
Error: invalid (NULL) left side of assignment

But naturally this works

> attr(fred, "foo") <- 1:10
> fred
<environment: 0x8a425b8>
attr(,"foo")
 [1]  1  2  3  4  5  6  7  8  9 10

I would have thought that "fred" and "happy()" were synonymous, so I
was surprised that I could not attach an attribute to the environment
using "happy()".  Of course in practice I can get round this by doing

> sad <- happy()
> attr(sad, "foo") <- 5:1
> sad
<environment: 0x8a425b8>
attr(,"foo")
[1] 5 4 3 2 1
> happy()
<environment: 0x8a425b8>
attr(,"foo")
[1] 5 4 3 2 1

but I wondered what was going on.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Oct 11 20:23:14 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 11 Oct 2002 12:23:14 -0700 (PDT)
Subject: Odd outcome of attr with environments (PR#2148)
In-Reply-To: <200210111838.UAA29229@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210111220500.64826-100000@homer30.u.washington.edu>

On Fri, 11 Oct 2002 j.c.rougier@durham.ac.uk wrote:

> Hi everyone,
>
> I think the following error is slightly odd:
>
> > fred <- new.env()
> > happy <- function() fred
> > happy()
> <environment: 0x8a425b8>
> > attr(happy(), "foo") <- 1:10
> Error: invalid (NULL) left side of assignment
>
It's nothing to do with environments.  happy() is not an variable, so you
can't modify it: eg

R> f<-function(){ 42}
R> f()<-1
Error: invalid (NULL) left side of assignment
R> attr(f(),"foo")<-1
Error: invalid (NULL) left side of assignment
R> f()[1]<-1
Error: invalid (NULL) left side of assignment


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 11 20:31:21 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 11 Oct 2002 21:31:21 +0200
Subject: growing process size in simulation
In-Reply-To: <3DA718A8.79391A9E@ci.tuwien.ac.at>
References: <3DA718A8.79391A9E@ci.tuwien.ac.at>
Message-ID: <x2r8ewwz5i.fsf@biostat.ku.dk>

Achim Zeileis <zeileis@ci.tuwien.ac.at> writes:

> I came across this in a simulation I ran under 1.6.0: If I do something
> like
> 
> R> x <- rnorm(10)
> R> rval <- NULL
> R> for(i in 1:100000) rval <- t.test(x)$p.value
> 
> then the process size remains at about 14M under 1.5.1, but it seems to
> be almost linearly growing up to more than 100M under 1.6.0.
> 
> I know that the above simulation is nonsense, but it was the simplest I
> could come up with to reproduce the behaviour. It doesn't depend on
> t.test, if I use wilcox.test(x)$p.value the same happens...

Argh. Confirmed. One interesting clue is that R itself doesn't seem to
know about this:

for(i in 1:50000) {
   rval <- t.test(x)$p.value 
   if (i %% 10000 == 0) print(gc())
}

         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0
         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0
         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0
         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0
         used (Mb) gc trigger (Mb)
Ncells 208343  5.6     407500 10.9
Vcells  64656  0.5     786432  6.0

..but the memory footprint is still growing.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.uiowa.edu  Sat Oct 12 02:57:23 2002
From: luke@stat.uiowa.edu (Luke Tierney)
Date: Fri, 11 Oct 2002 20:57:23 -0500 (CDT)
Subject: growing process size in simulation
In-Reply-To: <x2r8ewwz5i.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0210112012180.1901-100000@nokomis2.stat.umn.edu>

On 11 Oct 2002, Peter Dalgaard BSA wrote:

> Achim Zeileis <zeileis@ci.tuwien.ac.at> writes:
> 
> > I came across this in a simulation I ran under 1.6.0: If I do something
> > like
> > 
> > R> x <- rnorm(10)
> > R> rval <- NULL
> > R> for(i in 1:100000) rval <- t.test(x)$p.value
> > 
> > then the process size remains at about 14M under 1.5.1, but it seems to
> > be almost linearly growing up to more than 100M under 1.6.0.
> > 
> > I know that the above simulation is nonsense, but it was the simplest I
> > could come up with to reproduce the behaviour. It doesn't depend on
> > t.test, if I use wilcox.test(x)$p.value the same happens...
> 
> Argh. Confirmed. One interesting clue is that R itself doesn't seem to
> know about this:
> 
> for(i in 1:50000) {
>    rval <- t.test(x)$p.value 
>    if (i %% 10000 == 0) print(gc())
> }
> 
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
>          used (Mb) gc trigger (Mb)
> Ncells 208343  5.6     407500 10.9
> Vcells  64656  0.5     786432  6.0
> 
> ...but the memory footprint is still growing.
> 
> 

It looks to me like something in deparse (which gets called in
t.test.default) may be the culprit:

   for(i in 1:100000) rval <- deparse("x")

exhibits the same behavior.

In running under gdb it looks like deparse("x") results in the call
sequence

deparse1WithCutoff->deparse2->deparse2buff->print2buff->R_AllocStringBuffer

and malloc is called in R_AllocStringBuffer to create the buffer.  The
allocation is stored into a local structure variable in
deparse1WithCutoff and I think is not being free'd before
deparse1WithCutoff exits.

luke

-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Oct 12 11:04:23 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Oct 2002 12:04:23 +0200
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.44.0210112012180.1901-100000@nokomis2.stat.umn.edu>
References: <Pine.LNX.4.44.0210112012180.1901-100000@nokomis2.stat.umn.edu>
Message-ID: <x2elawvuqg.fsf@biostat.ku.dk>

Luke Tierney <luke@stat.uiowa.edu> writes:

> It looks to me like something in deparse (which gets called in
> t.test.default) may be the culprit:
> 
>    for(i in 1:100000) rval <- deparse("x")
> 
> exhibits the same behavior.
> 
> In running under gdb it looks like deparse("x") results in the call
> sequence
> 
> deparse1WithCutoff->deparse2->deparse2buff->print2buff->R_AllocStringBuffer
> 
> and malloc is called in R_AllocStringBuffer to create the buffer.  The
> allocation is stored into a local structure variable in
> deparse1WithCutoff and I think is not being free'd before
> deparse1WithCutoff exits.

Thanks for looking into this, Luke. Yes, I agree. Specifically, the
issue seems to be that we used to work off a static variable "buff"
and use realloc on that inside AllocBuffer if it was non-null. Now
we've put the variable inside a structure "buf->data" and still trying
to use the realloc'ing construct, but since "buf" (aka localData) is a
local variable, it gets NULL'ed every time deparse1WithCutoff() is
called ---> deparse1WithCutoff needs to clean up on the way out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.uiowa.edu  Sat Oct 12 15:49:21 2002
From: luke@stat.uiowa.edu (Luke Tierney)
Date: Sat, 12 Oct 2002 09:49:21 -0500 (CDT)
Subject: growing process size in simulation
In-Reply-To: <x2elawvuqg.fsf@biostat.ku.dk>
Message-ID: <Pine.LNX.4.44.0210120745400.1901-100000@nokomis2.stat.umn.edu>

On 12 Oct 2002, Peter Dalgaard BSA wrote:

> Luke Tierney <luke@stat.uiowa.edu> writes:
> 
> > It looks to me like something in deparse (which gets called in
> > t.test.default) may be the culprit:
> > 
> >    for(i in 1:100000) rval <- deparse("x")
> > 
> > exhibits the same behavior.
> > 
> > In running under gdb it looks like deparse("x") results in the call
> > sequence
> > 
> > deparse1WithCutoff->deparse2->deparse2buff->print2buff->R_AllocStringBuffer
> > 
> > and malloc is called in R_AllocStringBuffer to create the buffer.  The
> > allocation is stored into a local structure variable in
> > deparse1WithCutoff and I think is not being free'd before
> > deparse1WithCutoff exits.
> 
> Thanks for looking into this, Luke. Yes, I agree. Specifically, the
> issue seems to be that we used to work off a static variable "buff"
> and use realloc on that inside AllocBuffer if it was non-null. Now
> we've put the variable inside a structure "buf->data" and still trying
> to use the realloc'ing construct, but since "buf" (aka localData) is a
> local variable, it gets NULL'ed every time deparse1WithCutoff() is
> called ---> deparse1WithCutoff needs to clean up on the way out.
> 

Right.  Unfortunately the issue goes beyond deparse.c.
R_AllocStringBuffer is also called in printutils.c, saveload.c,
scan.c.  I'm not sure about printutils.c, but the others look like
they have the same issue.  R_LoadFromFile in saveload.c looks like a
particular pain to fix; perhaps moving the buffer allocation up one
call level would work.  I can try to fix this later next week unless
someone else gets there first.

I wonder if there is something we could add to the QA tools that could
have picked this up.

luke


-- 
Luke Tierney
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
   Actuarial Science
241 Schaeffer Hall                  email:      luke@stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Oct 12 16:15:01 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 12 Oct 2002 17:15:01 +0200
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.44.0210120745400.1901-100000@nokomis2.stat.umn.edu>
References: <Pine.LNX.4.44.0210120745400.1901-100000@nokomis2.stat.umn.edu>
Message-ID: <x2adljwux6.fsf@biostat.ku.dk>

Luke Tierney <luke@stat.uiowa.edu> writes:

> > Thanks for looking into this, Luke. Yes, I agree. Specifically, the
> > issue seems to be that we used to work off a static variable "buff"
> > and use realloc on that inside AllocBuffer if it was non-null. Now
> > we've put the variable inside a structure "buf->data" and still trying
> > to use the realloc'ing construct, but since "buf" (aka localData) is a
> > local variable, it gets NULL'ed every time deparse1WithCutoff() is
> > called ---> deparse1WithCutoff needs to clean up on the way out.
> > 
> 
> Right.  Unfortunately the issue goes beyond deparse.c.
> R_AllocStringBuffer is also called in printutils.c, saveload.c,
> scan.c.  I'm not sure about printutils.c, but the others look like
> they have the same issue.  R_LoadFromFile in saveload.c looks like a
> particular pain to fix; perhaps moving the buffer allocation up one
> call level would work.  I can try to fix this later next week unless
> someone else gets there first.
> 
> I wonder if there is something we could add to the QA tools that could
> have picked this up.

I've fixed the one in deparse.c now. I had a suspicion that there
might be other cases, so I tried to abstract it in the same spirit as
R_AllocStringBuffer. There's now an R_FreeStringBuffer, and I think a
straightforward rule for invoking it: The function that allocates the
pointer for the storage must call R_FreeStringBuffer before returning.

R_LoadFromFile has more than a dozen exit points, so you get to say
"R_FreeStringBuffer(data.buffer);" quite a few times, but I don't
think the pain extends beyond that.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Oct 12 20:45:04 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 12 Oct 2002 12:45:04 -0700
Subject: tkrplot
Message-ID: <1AB94D32-DE1B-11D6-A072-000393860F3C@stat.ucla.edu>

The package tkrplot now works in OS X (Jaguar). The
core of the problem is that the load function in tcl does not accept
bundles, but needs dynamic libraries (I verfied this using the
native version of tclsh and Wish). But the config files in
the tkrplot package (as in all packages) build bundles, not
libraries. Thus I said in the src directorry of the tkrplot package

gcc -dynamiclib -flat_namespace -undefined suppress -install_name  
/usr/local/lib/R/library/tkrplot/libs/tkrplot.dylib \\
	-o tkrplot.dylib -L/usr/local/lib/R/bin -lR -L/sw/lib -ltcl -ltk  
-L/usr/X11R6/lib -lX11 tcltkimg.o

and I changed the R code in tkrplot so that it uses .dylib as the
file extension.

It is still mysterious to me why it did work, using bundles, in
OS X 10.1, but, hey, what's life without a little mystery.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mschwartz@medanalytics.com  Sat Oct 12 21:46:20 2002
From: mschwartz@medanalytics.com (Marc Schwartz)
Date: Sat, 12 Oct 2002 15:46:20 -0500
Subject: [R] barplot x axis
In-Reply-To: <1034434947.3da839830f56b@webmail.bcmg.com.br>
Message-ID: <001301c27230$6c97f590$0201a8c0@MARC>

> -----Original Message-----
> Dear Schwartz and Pausas,
> 
> Thanks for your messages.

You are welcome.

> I was referring to the axis line and its tick marks.
> 
> If you write barplot(table(c(1,2,2,3,3,3,4,4,5))) in R150 and in R160
you will
> have different plots. The last one will not display the x axis line
and tick
> marks, but only x axis labels, isn't it?
> 
> In this case "axis(1, at = mp, labels = 1:5)" solves the problem.
> 
> Best regards,
> 
> Antonio Olinto

Antonio,

It turns out that the change in behavior, which I was able to duplicate
by re-installing V1.5.1 on my system, is the result in the change in
coding in the axis() function internal C code (do_axis) in V.1.6.0 and
not in barplot().  The code in barplot() did not change either in
content or in the default argument values.

If you review the C do_axis code in the V1.5.1 plot.c, which is the C
source code for many of the plotting functions, you will find that the
author overrides the passed "lty" argument.  The author has a comment in
the C code as follows:

  /* I can't think of a good reason to allow axes with a non-solid
line-type,
     * so I override any value the user may have specified.
     * This may need to be revisited, but this should
     * cover 99.99% of the cases. */

In barplot(), the following code is called to draw the label axis (x
axis when horiz = FALSE):

axis(if (horiz) 
                2
            else 1, at = at.l, labels = names.arg, lty = 0, cex.axis =
cex.names, 
                ...)

Note that the 'lty' argument is specified as "0", which should be
"blank" or no line.

However, the V1.5.x internal C code in plot.c overrides this value with
"solid" as per the author's comments above. Thus in V.1.5.x, you get a
solid line on the x axis.

In V.1.6.0, there was a change in axis() to allow for the user
specification of "lty", "lwd" and "col" line parameters as arguments to
axis().  

The V1.6.0 internal C code for do_axis was changed to facilitate this
and therefore the axis call in V.1.6.0 barplot() as above now results in
no line being drawn, since the "lty = 0" (blank) argument in not
overridden in the internal C code.

Hence the (perhaps unintended) change in the default behavior in
barplot() in V.1.6.0.

It took me a while to track this down and finally isolated it to the
axis() function change in 1.6.0.

I am also copying this reply to r-devel, more as an FYI, since my guess
is that other functions, either R standard functions or community based
functions, may have their default behavior altered as well.

Marc Schwartz



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Oct 12 21:46:43 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 12 Oct 2002 13:46:43 -0700
Subject: XML package
Message-ID: <B754D275-DE23-11D6-A072-000393860F3C@stat.ucla.edu>

There are some problems with XML under OS X, nothing serious,
but manual intervention is required.

1. For some reason the package has problems matching up the
proper include and lib files for xml or xml2. If I install a fresh
libxml2 and point the environmental variables to it, it still
complains about mismatched header and lib files,
which suggests, perhaps, that the test in configure uses something  
system
specific. It works if I point explicitly to the include files for xml1.
Both xml1 and xml2 are in /sw, because they come from fink. Maybe
use xmlConf.sh or xml2Conf.sh

2. xmlParserError is defined in libxml, but Utils.o tried to override
it with a new definition. That does not work in OS X, unless one
specifies explicitly that that is what one wants. Adding "-Xlinker
-m" to the link of XML.so indicates we need the first definition we
come across, which is the one in Utils.o in this case. And that is
what is intended.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Oct 12 23:46:11 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 12 Oct 2002 15:46:11 -0700
Subject: RXLisp
Message-ID: <678BE2C0-DE34-11D6-8638-000393860F3C@stat.ucla.edu>

So far, I had made RXLisp by putting all foo.o from XLISP-STAT in
an archive, and linking that into RXLisp.so. I have gotten somewhat
further in using dynamic libraries. Here is what I now do.

in XLS
1. Copy xlisp modifications from RXLisp
2. configure --host=powerpc-apple-darwin6.2
3. make libxlisp.so CC="gcc -fno-common -L/sw/lib -I/sw/include"
4. gcc -dynamiclib -flat_namespace -undefined suppress \\
  	-install_name /usr/local/lib/libxlisp.dylib -o libxlisp.dylib *.o \\
	 -L/usr/X11R6/lib -lX11 -L/sw/lib -ldl -lm
  5. Copy libxlisp.dylib to /usr/local/lib

  In RXLisp/src
  1  make CC="gcc -I/usr/X11R6/include -fno-common"
  2. gcc -dynamiclib -flat_namespace -undefined suppress \\
  	-install_name /usr/local/lib/libRXLispConverters.dylib \\
	-L/sw/lib -L/usr/local/lib -o libRXLispConverters.dylib Converters.o
  3. Copy libRXLispConverters.dylib  to /usr/local/lib

  Then R CMD INSTALL RXLisp

Now I can do XLisp from R, but not everything (no graphics, for
example -- gives a segmentation error) yet. Haven't looked in the other  
direction,
which does not interest me much anyway.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sun Oct 13 03:29:52 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 12 Oct 2002 19:29:52 -0700
Subject: RXLisp, works one way on Jaguar
Message-ID: <A728B4FA-DE53-11D6-8638-000393860F3C@stat.ucla.edu>

I am copying to r-devel, because RXLisp is a reasonably
complicated package that uses both dylibs and bundles.
I am pleased to say that XLisp from R now works on Jaguar, complete
with graphics (these did not work before, because I was
actually running an old version of XLISP-STAT -- sic transit gloria
mundi).

The other way around is still trouble: I get

 > (load "inXLisp")
; loading inXLisp.lsp
Error: dlcompat: unable to find symbol "Rmodule__init" in  
"/usr/local/lib/R/library/RXLisp/libs/RinXLisp.so"
Happened in: #<Byte-Code-Closure-SHARED-LIBRARY-INFORMATION: #3ab778>

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 13 08:14:38 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 13 Oct 2002 08:14:38 +0100 (BST)
Subject: XML package
In-Reply-To: <B754D275-DE23-11D6-A072-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.LNX.4.31.0210130808180.22048-100000@gannet.stats>

On Sat, 12 Oct 2002, Jan de Leeuw wrote:

> There are some problems with XML under OS X, nothing serious,
> but manual intervention is required.
>
> 1. For some reason the package has problems matching up the
> proper include and lib files for xml or xml2. If I install a fresh
> libxml2 and point the environmental variables to it, it still
> complains about mismatched header and lib files,
> which suggests, perhaps, that the test in configure uses something
> system
> specific. It works if I point explicitly to the include files for xml1.
> Both xml1 and xml2 are in /sw, because they come from fink. Maybe
> use xmlConf.sh or xml2Conf.sh
>
> 2. xmlParserError is defined in libxml, but Utils.o tried to override
> it with a new definition. That does not work in OS X, unless one
> specifies explicitly that that is what one wants. Adding "-Xlinker
> -m" to the link of XML.so indicates we need the first definition we
> come across, which is the one in Utils.o in this case. And that is
> what is intended.

Same problem under Windows, which I can only solve (at least when
statically loading libxml2) by building a version of error.c (from
libxml2) without xmlParserError.  It's really a design fault in libxml2:
the replaceable parts should be in separate moodules.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hb@maths.lth.se  Mon Oct 14 00:34:46 2002
From: hb@maths.lth.se (hb@maths.lth.se)
Date: Mon, 14 Oct 2002 01:34:46 +0200 (MET DST)
Subject: The class attribute on an environment seems buggy (PR#2159)
Message-ID: <200210132334.BAA05124@pubhealth.ku.dk>

Full_Name: Henrik Bengtsson
Version: 1.6.0, 1.5.1
OS: WinXP Pro
Submission from: (NULL) (128.250.252.82)


The following example, which I tested on both R v1.5.1 and R v1.6.0 on WinXP
Pro, shows the problem I encountered when trying to use the class attribute of
an environment:

# Define method print() for class Environment
C

print(e)
# gives:
# [1] "An Environment!"

# Exit [R]
q(save="yes")

When restarting [R] and loading the previous workspace something goes wrong(?):
% R

print(e)
# gives:
# <environment: 01BE52F4>
# attr(,"class")
# [1] "Environment"

print(class(e))
# gives: 
# [1] "Environment"

print(unclass(e))
# gives:
# <environment: 01BE52F4>
# attr(,"class")
# [1] "Environment"

str(e)
# gives because of the malfunctioning unclass():
# Class 'Environment' Class 'Environment' Class 'Environment' Class
'Environment' 
# Class 'Environment' Class 'Environment' Class 'Environment' Class
'Environment' 
# Class 'Environment' Class 'Environment' Class 'Environment' ...

Note how unclass(e) does not work properly. More importantly, it the
S3/UseMethod() method dispatching get confused and won't recognize the class
attribute. 

Cheers

Henrik Bengtsson

Home: 201/445 Royale Parade, Parkville
Office: Bioinformatics, WEHI, Parkville
+61 (0)412 269 734 (cell), +61 (0)3 9387 791 (home), +61 (0)3 9345 2324 +(lab)
hb@maths.lth.se, http://www.maths.lth.se/~hb/
Time zone: +10h UTC (Sweden +2h UTC, Calif. -7h UTC)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Oct 14 09:03:20 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Mon, 14 Oct 2002 10:03:20 +0200
Subject: Sweave (PR#2142)
In-Reply-To: <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>
References: <15782.33889.962443.84196@galadriel.ci.tuwien.ac.at>
 <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>
Message-ID: <15786.31304.333618.232936@galadriel.ci.tuwien.ac.at>

>>>>> On Fri, 11 Oct 2002 15:35:38 +0100,
>>>>> Christophe Declercq (CD) wrote:

  > Thanks, Fritz, for your answer.
  >> De : Friedrich Leisch [mailto:leisch@galadriel.ci.tuwien.ac.at]
  >> [...]
  >> The path is correct (I want to have Sweave.sty in
  >> $R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
  >> does not get installed properly when builddir != srcdir. This has been
  >> fixed in both the devel and patched version of R.

  > Yes, but  'file.path(R.home(), "share", "texmf", "Sweave")' on my MS-Windows
  > box gives "C:\\R\\RW1060/share/texmf/Sweave".

  > With that, you get '\usepackage{C:RRW1060/share/texmf/Sweave}' in the tex
  > file. The problem seems to be with the 'R.home()' output on MS-Windows.

  > 'file.path(.path.package("tools"), "Sweave", "Sweave")' was giving
  > "C:/R/RW1060/library/tools/Sweave/Sweave" which is OK for pdflatex.

  > Anyway, thanks a lot for Sweave which is really great (for the moment, as I
  > need it working, I have just put back the old stylepath code in tools).

I commited a fix to the patched version of R that translates all
backslashes to slashes on windows. This now works for me (on Windows
XP) if the path to R_HOME contains no spaces. For installations in
directories like "Program Files" I still have the following problem: I
can either use

	\usepackage{c:/progra~1/rw1060/share/texmf/Sweave}

or

	\usepackage{c:/program files/rw1060/share/texmf/Sweave}

both of which do *NOT* work with my latex installation
(miktex). Unless somedy has a good suggestion how to solve the problem
my recoomendation is to either install R into a path without spaces or
copy Sweave.sty to some place in your TEXINPUTS path and use
stylepath=FALSE when calling Sweave.


Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Oct 14 13:59:43 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 14 Oct 2002 08:59:43 -0400
Subject: The class attribute on an environment seems buggy (PR#2159)
References: <200210132334.BAA05124@pubhealth.ku.dk>
Message-ID: <3DAABFBF.F7AEC086@research.bell-labs.com>

Any attribute of environments, not just the class, can be killed by
operating on the object "locally" in a function.

Example:

R> f <- function(x){ y <- x; attr(y, "foo") <- NULL; y}
R> ev <- new.env()
R> attr(ev, "foo") <- "bar"
R> ev
<environment: 0x8b515d4>
attr(,"foo")
[1] "bar"
R> f(ev)
<environment: 0x8b515d4>
R> ev
<environment: 0x8b515d4>

The reason is that the C routine `duplicate' does not duplicate an
environment  OR its attributes.

I was bitten by this trying to use environments as reference objects in
the Omegahat OOP package.

Would there be a problem with a "fix" in which the environment was left
unduplicated, but environments with attributes are "duplicated" by
creating a copy of the attribute list, but with the copy still pointing
to the same environment?

If that is not possible, it would be good to have another datatype that
had roughly those properties.  Otherwise, it's difficult to build on
this datatype in designing new classes.

(The same issue applies to other types, such as external pointers.)

hb@maths.lth.se wrote:
> 
> Full_Name: Henrik Bengtsson
> Version: 1.6.0, 1.5.1
> OS: WinXP Pro
> Submission from: (NULL) (128.250.252.82)
> 
> The following example, which I tested on both R v1.5.1 and R v1.6.0 on WinXP
> Pro, shows the problem I encountered when trying to use the class attribute of
> an environment:
> 
> # Define method print() for class Environment
> C
> 
> print(e)
> # gives:
> # [1] "An Environment!"
> 
> # Exit [R]
> q(save="yes")
> 
> When restarting [R] and loading the previous workspace something goes wrong(?):
> % R
> 
> print(e)
> # gives:
> # <environment: 01BE52F4>
> # attr(,"class")
> # [1] "Environment"
> 
> print(class(e))
> # gives:
> # [1] "Environment"
> 
> print(unclass(e))
> # gives:
> # <environment: 01BE52F4>
> # attr(,"class")
> # [1] "Environment"
> 
> str(e)
> # gives because of the malfunctioning unclass():
> # Class 'Environment' Class 'Environment' Class 'Environment' Class
> 'Environment'
> # Class 'Environment' Class 'Environment' Class 'Environment' Class
> 'Environment'
> # Class 'Environment' Class 'Environment' Class 'Environment' ...
> 
> Note how unclass(e) does not work properly. More importantly, it the
> S3/UseMethod() method dispatching get confused and won't recognize the class
> attribute.
> 
> Cheers
> 
> Henrik Bengtsson
> 
> Home: 201/445 Royale Parade, Parkville
> Office: Bioinformatics, WEHI, Parkville
> +61 (0)412 269 734 (cell), +61 (0)3 9387 791 (home), +61 (0)3 9345 2324 +(lab)
> hb@maths.lth.se, http://www.maths.lth.se/~hb/
> Time zone: +10h UTC (Sweden +2h UTC, Calif. -7h UTC)
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 14 14:30:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 14 Oct 2002 14:30:35 +0100 (BST)
Subject: savehistory directories and quitting R (PR#2038)
In-Reply-To: <200209190454.GAA13201@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210141410350.1247-100000@gannet.stats>

This is not a bug. If you override a system function, you can't expect it
to be used by R internals.  Indeed, as from 1.6.0 you can't even expect it
to be used by R's base functions, due to namespaces.

There are very good reasons for the internal quit code not to call user's
R code, the main one being that R errors will not be handled then.
.Last is made available as a hook to enable you to do what you want:
as the help page says.

Doesn't setting R_HISTFILE do this for you automatically? Just set
R_HISTFILE="D:/R50/.Rhistory" and the history should be loaded and saved
to the specified place.  Works under Unix, at least.



On Thu, 19 Sep 2002 Mark.Bravington@csiro.au wrote:

> #
> #       r-bugs@r-project.org
> #
> ######################################################
>
> Because I work in different directories, but always want to save my
> .Rhistory in the same place, I have changed the system function savehistory
> to this:
>
> function (file = "D:/R50/.Rhistory")
> invisible(.Internal(savehistory(file)))
>
> When I use q() to quit R, and it asks me whether I want to "save current
> workspace", a response of YES means that the .Rhistory is saved in the
> current working directory, rather than D:/R50/.Rhistory. I take this to mean
> that the quit-on-prompt sequence makes a direct call to .Internal(
> savehistory...) rather than going via the actual savehistory() function. It
> would be nicer if prompt-on-quit would honour the user's definition of
> savehistory.

Actually it talks directly to the GUI-specific history mechanism.

> (Responding NO to the "save current..." prompt means that .Rhistory isn't
> saved at all, which is reasonable.)
>
> I admit that this is a very minor bug, because I can set .Last to call
> savehistory directly. But I just thought you should know...
>
> cheers
> Mark
>
>
> *******************************
>
> Mark Bravington
> CSIRO (CMIS)
> PO Box 1538
> Castray Esplanade
> Hobart
> TAS 7001
>
> phone (61) 3 6232 5118
> fax (61) 3 6232 5012
> Mark.Bravington@csiro.au
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-mingw32
>  arch = i386
>  os = mingw32
>  system = i386, mingw32
>  status =
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 04
>  day = 29
>  language = R
>
> Windows 2000 Professional (build 2195) Service Pack 2.0
>
> Search Path:
>  .GlobalEnv, package:handy, package:debug, mvb.session.info,
> package:mvbutils, package:tcltk, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 14 14:54:36 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Oct 2002 15:54:36 +0200
Subject: The class attribute on an environment seems buggy (PR#2159)
In-Reply-To: <3DAABFBF.F7AEC086@research.bell-labs.com>
References: <200210132334.BAA05124@pubhealth.ku.dk>
 <3DAABFBF.F7AEC086@research.bell-labs.com>
Message-ID: <x23cr93z37.fsf@biostat.ku.dk>

John Chambers <jmc@research.bell-labs.com> writes:

> Would there be a problem with a "fix" in which the environment was left
> unduplicated, but environments with attributes are "duplicated" by
> creating a copy of the attribute list, but with the copy still pointing
> to the same environment?
> 
> If that is not possible, it would be good to have another datatype that
> had roughly those properties.  Otherwise, it's difficult to build on
> this datatype in designing new classes.
> 
> (The same issue applies to other types, such as external pointers.)

I've been wrapping such environments in lists, as in

> tclVar
function (init = "") 
{
    n <- evalq(TclVarCount <- TclVarCount + 1, .TkRoot$env)
    name <- paste("RTcl", n, sep = "")
    l <- list(env = new.env())
    assign(name, NULL, envir = l$env)
    reg.finalizer(l$env, function(env) tkcmd("unset", ls(env)))
    class(l) <- "tclVar"
    tclvalue(l) <- init
    l
}

where the list(env = new.env()) construct is to avoid sticking a class
directly on "env". 

What you're suggesting would seem to have the same effect, i.e. the
environment gets effectively embedded in a structure on which you can
set attributes. It does sound like it could work.

I'm just a little worried whether it would be clear enough to the end
user what is going on, or whether we'd just be compounding problems of
duplications that don't duplicate...

BTW, this was never a bug...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From socher@stat.uni-muenchen.de  Mon Oct 14 15:01:21 2002
From: socher@stat.uni-muenchen.de (socher@stat.uni-muenchen.de)
Date: Mon, 14 Oct 2002 16:01:21 +0200 (MET DST)
Subject: possible memory leak in 1.6 (PR#2160)
Message-ID: <200210141401.QAA11994@pubhealth.ku.dk>

Full_Name: Anne-Laure Boulesteix
Version: 1.6.0
OS: Linux
Submission from: (NULL) (141.84.161.156)


Hi,

I noticed the following problem with 1.6.0 (which was not present in 1.5.1): 

I work with very large datasets and encountered a problem with memory
allocation,
(probably a memory leak).  I wrote a programm with a loop.  In this loop in
each
iteration I create a  very large matrix and assign it to a variable which
is the SAME for all the iterations.  So at each round the new matrix overwrites
the old  matrix.  In 1.5.1  the garbage collector seems to clean up the old
unused memory.  Unfortunately, in 1.6.0 with each round the memory used by R
increases until the R process is killed. 

Is there any way around this?

Many thanks and best regards,

  A.L. Boulesteix

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 14 15:04:11 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 14 Oct 2002 15:04:11 +0100 (BST)
Subject: Install with 64-bit GCC 3.2 (PR#2048)
In-Reply-To: <200209201634.SAA01188@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210141456390.1247-100000@gannet.stats>

In 1.6.0's R-admin manual is a set of flags which do work.

I don't think you are setting CC correctly, and am surprised this got
though configuration (it didn't for me).

If you look in config.site or the manual you will see it is
MAIN_LDFLAGS and SHLIB_LDFLAGS you needed to set; you seem to
misunderstand the role of LDFLAGS.


There may be a bug, but it's not in R.

On Fri, 20 Sep 2002 k.buckley@lancaster.ac.uk wrote:

>
> Hi,
>
> been trying to build R-1.5.1 for som eof our users here.
>
> No probs with gcc-3.2 32-bit installtion, but thought we'd try it with
> the 64-bit just for the crack.
>
> Configuring thus
>
> CC=gcc3 CFLAGS="-m64" CXX=g++3 CXXFLAGS="-m64" F77=g773 FFLAGS="-m64"
> LDFLAGS="-m64 -L/usr/local/packages/gcc-3.2/lib/sparcv9" ./configure
> --prefix=/usr/local/packages/R-1.5.1-64bit
>
> runs OK, however one of the tests (I assume it is a test anyway) fails thus
>
> gcc3 -G  -o ctest.so ansari.o chisqsim.o d2x2xk.o fexact.o kendall.o ks.o  prho.o swilk.o init.o  -L/usr/lib/sparcv9 -L/usr/local/packages/gcc-3.2/lib/sparcv9 -L/usr/local/packages/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.8/3.2/sparcv9 -L/usr/local/packages/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.8/3.2 -L/usr/ccs/bin/sparcv9 -L/usr/ccs/bin -L/usr/ccs/lib/sparcv9 -L/usr/ccs/lib -L/usr/local/packages/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.8/3.2/../../../sparcv9 -L/usr/local/packages/gcc-3.2/lib/gcc-lib/sparc-sun-solaris2.8/3.2/../../.. -L/lib/sparcv9 -ldl -ltermcap -lfrtbegin -lg2c -lm -lgcc_s_sparcv9
> ld: fatal: file ansari.o: wrong ELF class: ELFCLASS64
> ld: fatal: File processing errors. No output written to ctest.so
> collect2: ld returned 1 exit status
> *** Error code 1
> make: Fatal error: Command failed for target `ctest.so'
> Current working directory /usr/local/packages/src/R-1.5.1/src/library/ctest/src
>
>
> It appears the make process is not passing the "-m64" flag down from
> the LDFLAGS variable as set when running configure.
>
> I have tried a compilation by hand adding this flag to the link stage
> and the above compilation goes completes.
>
>
> Hoping this of use,
>
>
> --
> Regards,
>
> ----------------------------------------------------------------------
> *  Kevin M. Buckley              e-mail: K.Buckley@lancaster.ac.uk   *
> *                                                                    *
> *  Systems Administrator                                             *
> *  Computer Centre                                                   *
> *  Lancaster University          Voice:  +44 (0) 1524 5 93718        *
> *  LANCASTER. LA1 4YW            Fax  :  +44 (0) 1524 5 25113        *
> *  England.                                                          *
> *                                                                    *
> *  My PC runs Linux/GNU, you still computing the Bill Gate$' way ?   *
> ----------------------------------------------------------------------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 14 15:22:05 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Oct 2002 16:22:05 +0200
Subject: possible memory leak in 1.6 (PR#2160)
In-Reply-To: <200210141401.QAA11994@pubhealth.ku.dk>
References: <200210141401.QAA11994@pubhealth.ku.dk>
Message-ID: <x2y9912j8y.fsf@biostat.ku.dk>

socher@stat.uni-muenchen.de writes:

> Full_Name: Anne-Laure Boulesteix
> Version: 1.6.0
> OS: Linux
> Submission from: (NULL) (141.84.161.156)
> 
> 
> Hi,
> 
> I noticed the following problem with 1.6.0 (which was not present in 1.5.1): 
> 
> I work with very large datasets and encountered a problem with memory
> allocation,
> (probably a memory leak).  I wrote a programm with a loop.  In this loop in
> each
> iteration I create a  very large matrix and assign it to a variable which
> is the SAME for all the iterations.  So at each round the new matrix overwrites
> the old  matrix.  In 1.5.1  the garbage collector seems to clean up the old
> unused memory.  Unfortunately, in 1.6.0 with each round the memory used by R
> increases until the R process is killed. 
> 
> Is there any way around this?

Example code that would allow someone to reproduce and hunt down the
problem would help. This could be the same issue that Achim Zeileis
reported a few days ago. In that case the current source snapshots may
have it fixed.

Please be specific when you report problems. A broad outline of your
program is not sufficient to let us guess where the problem lies.
We could write a minimal loop which fits your description, but so
could you, and you're much closer to telling whether it is actually
displaying the same problem.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Oct 14 15:24:47 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 14 Oct 2002 10:24:47 -0400
Subject: The class attribute on an environment seems buggy (PR#2159)
References: <200210132334.BAA05124@pubhealth.ku.dk>
 <3DAABFBF.F7AEC086@research.bell-labs.com> <x23cr93z37.fsf@biostat.ku.dk>
Message-ID: <3DAAD3AF.888AFF3@research.bell-labs.com>

Peter Dalgaard BSA wrote:
> 
> John Chambers <jmc@research.bell-labs.com> writes:
> 
> > Would there be a problem with a "fix" in which the environment was left
> > unduplicated, but environments with attributes are "duplicated" by
> > creating a copy of the attribute list, but with the copy still pointing
> > to the same environment?
> >
> > If that is not possible, it would be good to have another datatype that
> > had roughly those properties.  Otherwise, it's difficult to build on
> > this datatype in designing new classes.
> >
> > (The same issue applies to other types, such as external pointers.)
> 
> I've been wrapping such environments in lists, as in
> 
> > tclVar
> function (init = "")
> {
>     n <- evalq(TclVarCount <- TclVarCount + 1, .TkRoot$env)
>     name <- paste("RTcl", n, sep = "")
>     l <- list(env = new.env())
>     assign(name, NULL, envir = l$env)
>     reg.finalizer(l$env, function(env) tkcmd("unset", ls(env)))
>     class(l) <- "tclVar"
>     tclvalue(l) <- init
>     l
> }
> 
> where the list(env = new.env()) construct is to avoid sticking a class
> directly on "env".
> 
> What you're suggesting would seem to have the same effect, i.e. the
> environment gets effectively embedded in a structure on which you can
> set attributes. It does sound like it could work.

For class-related work, embedding in a list (yes, I do that too) has
somewhat the wrong message, because now the object appears to extend
"list", whereas the intended model is that it extends "environment".

The distinction isn't all academic, because one would like to avoid
list-style computations for "[", etc, which are pretty much guaranteed
to cause trouble.

> 
> I'm just a little worried whether it would be clear enough to the end
> user what is going on, or whether we'd just be compounding problems of
> duplications that don't duplicate...

My personal need is for something that acts as a reference (aka
database, object table, etc.)  The understanding is that setting named
elements in this object works as for a reference--all copies see the
changes.  If the object can otherwise behave in standard "S language"
semantics, programming will be more straightforward.

For now, I use a list containing an environment, but eventually
something more direct will likely be needed.

> 
> BTW, this was never a bug...

OK, but as Henrik's mail suggested, users get unpleasant suprises from
trying to treat environments as ordinary objects.

> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct 14 15:32:06 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 14 Oct 2002 07:32:06 -0700 (PDT)
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.44.0210120745400.1901-100000@nokomis2.stat.umn.edu>
Message-ID: <Pine.A41.4.44.0210140659330.71008-100000@homer07.u.washington.edu>

On Sat, 12 Oct 2002, Luke Tierney wrote:

>
> I wonder if there is something we could add to the QA tools that could
> have picked this up.
>

valgrind will do this (under Linux only).  I just tried it and got

==6195== 151040 bytes in 295 blocks are definitely lost in loss record 49
of 50
==6195==    at 0x400434EB: malloc (vg_clientfuncs.c:100)
==6195==    by 0x8091BB0: R_AllocStringBuffer (deparse.c:150)
==6195==    by 0x8093501: print2buff (deparse.c:940)
==6195==    by 0x8092760: deparse2buff (deparse.c:560)

but
==6195== 12341268 bytes in 6183 blocks are still reachable in loss record
50 of 50
==6195==    at 0x400434EB: malloc (vg_clientfuncs.c:100)
==6195==    by 0x80D0131: GetNewPage (memory.c:552)
==6195==    by 0x80D3188: Rf_allocVector (memory.c:1731)
==6195==    by 0x80D2ECB: Rf_allocString (memory.c:1622)
==6195==

showing that it can distinguish memory leaks from memory that just hasn't
been freed.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct 14 15:34:24 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 14 Oct 2002 07:34:24 -0700 (PDT)
Subject: possible memory leak in 1.6 (PR#2160)
In-Reply-To: <200210141401.QAA11994@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0210140732190.43878-100000@homer16.u.washington.edu>

On Mon, 14 Oct 2002 socher@stat.uni-muenchen.de wrote:

> Hi,
>
> I noticed the following problem with 1.6.0 (which was not present in 1.5.1):
>
> I work with very large datasets and encountered a problem with memory
> allocation,
> (probably a memory leak).  I wrote a programm with a loop.  In this loop in
> each
> iteration I create a  very large matrix and assign it to a variable which
> is the SAME for all the iterations.  So at each round the new matrix overwrites
> the old  matrix.  In 1.5.1  the garbage collector seems to clean up the old
> unused memory.  Unfortunately, in 1.6.0 with each round the memory used by R
> increases until the R process is killed.

Yes, it's a bug (though it isn't the matrix that leaks).  It's
probably been fixed.

You could download the current `patched' version and try that.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 14 16:11:07 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 14 Oct 2002 16:11:07 +0100 (BST)
Subject: growing process size in simulation
In-Reply-To: <Pine.A41.4.44.0210140659330.71008-100000@homer07.u.washington.edu>
Message-ID: <Pine.LNX.4.31.0210141610500.1801-100000@gannet.stats>

Reference to valgrind, please?

On Mon, 14 Oct 2002, Thomas Lumley wrote:

> On Sat, 12 Oct 2002, Luke Tierney wrote:
>
> >
> > I wonder if there is something we could add to the QA tools that could
> > have picked this up.
> >
>
> valgrind will do this (under Linux only).  I just tried it and got
>
> ==6195== 151040 bytes in 295 blocks are definitely lost in loss record 49
> of 50
> ==6195==    at 0x400434EB: malloc (vg_clientfuncs.c:100)
> ==6195==    by 0x8091BB0: R_AllocStringBuffer (deparse.c:150)
> ==6195==    by 0x8093501: print2buff (deparse.c:940)
> ==6195==    by 0x8092760: deparse2buff (deparse.c:560)
>
> but
> ==6195== 12341268 bytes in 6183 blocks are still reachable in loss record
> 50 of 50
> ==6195==    at 0x400434EB: malloc (vg_clientfuncs.c:100)
> ==6195==    by 0x80D0131: GetNewPage (memory.c:552)
> ==6195==    by 0x80D3188: Rf_allocVector (memory.c:1731)
> ==6195==    by 0x80D2ECB: Rf_allocString (memory.c:1622)
> ==6195==
>
> showing that it can distinguish memory leaks from memory that just hasn't
> been freed.
>
> 	-thomas
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gte810u@prism.gatech.edu  Mon Oct 14 16:38:39 2002
From: gte810u@prism.gatech.edu (David Bauer)
Date: Mon, 14 Oct 2002 11:38:39 -0400
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.31.0210141610500.1801-100000@gannet.stats>
References: <Pine.A41.4.44.0210140659330.71008-100000@homer07.u.washington.edu>
Message-ID: <5.1.1.5.2.20021014113640.0227be20@pop.prism.gatech.edu>


>Reference to valgrind, please?

http://developer.kde.org/~sewardj/

It is an x86/Linux only x86 to x86 emulator which can do memory checking, 
cache profiling, etc.


David Bauer

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct 14 18:52:26 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 14 Oct 2002 10:52:26 -0700 (PDT)
Subject: growing process size in simulation
In-Reply-To: <Pine.LNX.4.31.0210141610500.1801-100000@gannet.stats>
Message-ID: <Pine.A41.4.44.0210141049160.70582-100000@homer22.u.washington.edu>

On Mon, 14 Oct 2002 ripley@stats.ox.ac.uk wrote:

> Reference to valgrind, please?
>
 http://developer.kde.org/~sewardj/

It's a memory-management debugger -- it tracks all memory allocations,
reads and writes to find accesses to unitialised or invalid memory and
memory leaks.

Valgrind works only under Linux and of course imposes a huge speed
penalty, but it seems to work quite well.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kai.makisara@metla.fi  Tue Oct 15 13:45:21 2002
From: kai.makisara@metla.fi (kai.makisara@metla.fi)
Date: Tue, 15 Oct 2002 14:45:21 +0200 (MET DST)
Subject: Core dump with a 64-bit system (PR#2165)
Message-ID: <200210151245.OAA19646@pubhealth.ku.dk>

Full_Name: Kai Mkisara
Version: 1.6.0
OS: Tru64
Submission from: (NULL) (128.214.53.92)


Any command given in terminal window dumps core if readline is compiled in.
The reason is a bug in pushReadline: the first call pushes the function below
the stack. The following patch solves the problem:

--- R-1.6.0/src/unix/sys-std.c~ Sun Aug 25 12:51:20 2002
+++ R-1.6.0/src/unix/sys-std.c  Tue Oct 15 14:43:00 2002
@@ -389,10 +389,10 @@
 void
 pushReadline(char *prompt, rl_vcpfunc_t f)
 {
-   if(ReadlineStack.current >= ReadlineStack.max) {
+   if(ReadlineStack.current >= ReadlineStack.max - 1) {
      warning("An unusual circumstance has arisen in the nesting of readline
input. Please report using bug.report()");
    } else
-     ReadlineStack.fun[ReadlineStack.current++] = f; 
+     ReadlineStack.fun[++ReadlineStack.current] = f; 
 
    rl_callback_handler_install(prompt, f);
 }

In a 32-bit system the first call overwrites only ReadlineStack.max and this is
probably never noticed. In a 64-bit system the results are more interesting :-)

             Kai



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Tue Oct 15 19:44:01 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Tue, 15 Oct 2002 14:44:01 -0400
Subject: Typos in help page for model.extract?
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC7BA@usrymx10.merck.com>

[R-1.6.0]

In the "Details" section of help page for model.extract, shouldn't the
references to model.frame() be model.extract()?

Regards,
Andy


------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jfox@mcmaster.ca  Tue Oct 15 21:57:37 2002
From: jfox@mcmaster.ca (John Fox)
Date: Tue, 15 Oct 2002 16:57:37 -0400
Subject: Sweave (PR#2142)
In-Reply-To: <15786.31304.333618.232936@galadriel.ci.tuwien.ac.at>
References: <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>
 <15782.33889.962443.84196@galadriel.ci.tuwien.ac.at>
 <NGBBKLJCOLPAFMJIEMHCAEIACCAA.c.declercq@orsnpdc.org>
Message-ID: <5.1.0.14.2.20021015165314.027a3f98@mcmail.cis.mcmaster.ca>

Dear Friedrich et al.,

Why not make the default location for installing the Windows version of R 
"c:\R" rather than "c:\Program Files\R", thus avoiding this and other 
potential problems? Perhaps there's some consideration of which I'm unaware.

Regards,
  John

At 10:03 AM 10/14/2002 +0200, Friedrich.Leisch@ci.tuwien.ac.at wrote:
> >>>>> On Fri, 11 Oct 2002 15:35:38 +0100,
> >>>>> Christophe Declercq (CD) wrote:
>
>   > Thanks, Fritz, for your answer.
>   >> De : Friedrich Leisch [mailto:leisch@galadriel.ci.tuwien.ac.at]
>   >> [...]
>   >> The path is correct (I want to have Sweave.sty in
>   >> $R_HOME/share/texmf), but the install procedure has a bug: Sweave.sty
>   >> does not get installed properly when builddir != srcdir. This has been
>   >> fixed in both the devel and patched version of R.
>
>   > Yes, but  'file.path(R.home(), "share", "texmf", "Sweave")' on my 
> MS-Windows
>   > box gives "C:\\R\\RW1060/share/texmf/Sweave".
>
>   > With that, you get '\usepackage{C:RRW1060/share/texmf/Sweave}' in the tex
>   > file. The problem seems to be with the 'R.home()' output on MS-Windows.
>
>   > 'file.path(.path.package("tools"), "Sweave", "Sweave")' was giving
>   > "C:/R/RW1060/library/tools/Sweave/Sweave" which is OK for pdflatex.
>
>   > Anyway, thanks a lot for Sweave which is really great (for the 
> moment, as I
>   > need it working, I have just put back the old stylepath code in tools).
>
>I commited a fix to the patched version of R that translates all
>backslashes to slashes on windows. This now works for me (on Windows
>XP) if the path to R_HOME contains no spaces. For installations in
>directories like "Program Files" I still have the following problem: I
>can either use
>
>         \usepackage{c:/progra~1/rw1060/share/texmf/Sweave}
>
>or
>
>         \usepackage{c:/program files/rw1060/share/texmf/Sweave}
>
>both of which do *NOT* work with my latex installation
>(miktex). Unless somedy has a good suggestion how to solve the problem
>my recoomendation is to either install R into a path without spaces or
>copy Sweave.sty to some place in your TEXINPUTS path and use
>stylepath=FALSE when calling Sweave.
>
>
>Fritz
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-----------------------------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada L8S 4M4
email: jfox@mcmaster.ca
phone: 905-525-9140x23604
web: www.socsci.mcmaster.ca/jfox
-----------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 15 23:47:52 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Oct 2002 00:47:52 +0200
Subject: Core dump with a 64-bit system (PR#2165)
In-Reply-To: <200210151245.OAA19646@pubhealth.ku.dk>
References: <200210151245.OAA19646@pubhealth.ku.dk>
Message-ID: <x21y6rwc87.fsf@biostat.ku.dk>

kai.makisara@metla.fi writes:

> Any command given in terminal window dumps core if readline is compiled in.
> The reason is a bug in pushReadline: the first call pushes the function below
> the stack. The following patch solves the problem:

Patch inserted. Thanks.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Tue Oct 15 23:52:19 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Tue, 15 Oct 2002 18:52:19 -0400
Subject: cut() on NA gives 0 when labels=F
Message-ID: <15788.39971.929286.111207@gargle.gargle.HOWL>

Hi all,

I just noticed this odd behavior in R 1.5.1 (on Solaris 2.6):

  R> cut(c(2,NA), 1:5, labels=F)
     [1] 1 0

Is it a bug?  I would have expected "1 NA" (better for indexing), and also the
S-Plus analog is:

  S-Plus> as.integer(cut(c(2,NA), 1:5))
     [1]  1 NA

Apologies ahead of time if it's already fixed in R 1.6.0 and/or already known
(perhaps related to PR#1694?).  If others agree it's a bug I'll submit it.
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Oct 16 01:14:52 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 15 Oct 2002 17:14:52 -0700 (PDT)
Subject: cut() on NA gives 0 when labels=F
In-Reply-To: <15788.39971.929286.111207@gargle.gargle.HOWL>
Message-ID: <Pine.A41.4.44.0210151714220.123024-100000@homer39.u.washington.edu>

On Tue, 15 Oct 2002, David Brahm wrote:

> Apologies ahead of time if it's already fixed in R 1.6.0 and/or already known
> (perhaps related to PR#1694?).  If others agree it's a bug I'll submit it.

In R 1.6.0
> cut(c(2,NA), 1:5, labels=FALSE)
[1]  1 NA

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lina@u.washington.edu  Wed Oct 16 07:36:09 2002
From: lina@u.washington.edu (lina@u.washington.edu)
Date: Wed, 16 Oct 2002 08:36:09 +0200 (MET DST)
Subject: documentation: Missing paranthesis in reshape.Rd (PR#2170)
Message-ID: <200210160636.IAA23901@pubhealth.ku.dk>

Full_Name: Michale Na Li
Version: 1.6.0
OS: i386-linux
Submission from: (NULL) (140.142.172.141)



In src/library/base/man/reshape.Rd, one paranthesis is missing, here is the
patch. 

*** reshape.Rd.old      2002-10-15 23:32:25.000000000 -0700
--- reshape.Rd  2002-10-15 23:32:35.000000000 -0700
***************
*** 12,18 ****
      idvar = "id", ids = 1:NROW(data),
      times = seq(length = length(varying[[1]])), 
      drop = NULL, direction, fix.row.names = TRUE,
!     split=list(regexp="\\.",include=FALSE)
  }
  %- maybe also `usage' for other objects documented here.
  \arguments{
--- 12,18 ----
      idvar = "id", ids = 1:NROW(data),
      times = seq(length = length(varying[[1]])), 
      drop = NULL, direction, fix.row.names = TRUE,
!     split=list(regexp="\\.",include=FALSE))
  }
  %- maybe also `usage' for other objects documented here.
  \arguments{




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 12:19:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 12:19:21 +0100 (BST)
Subject: submitting binary windows packages
In-Reply-To: <D7A3CFD7825BD6119B880002A58F06C20149D00A@groexmb02.pfizer.com>
Message-ID: <Pine.LNX.4.31.0210161209220.1261-100000@gannet.stats>

It's called patience ... updates were done on October 7 and several times
since. I was away for four weeks (and Kurt and others knew that).

We've experimented with allowing other people to put up Windows
pre-compiled packages, but security concerns are overwhelming.  The
distribution is done under Unix/Linux where we can't virus-check.  I build
on just one Windows machine that has aggressive virus-checking and very
little software installed: I do not use my regular desktop machine (which
is usually in Linux anyway).

Ideally I would like to pass the task on to someone who has suitable
infrastructure (which includes a machine with fast and reliable internet
access from which CRAN can rsync).  The rate of change has got out of
control (at least 50 changes per month, it seems).  About 90% of the
packages will build automatically (under Windows, not cross-compiling)
but the remainder cause a lot of extra work.

On Tue, 1 Oct 2002, Warnes, Gregory R wrote:

>
> Hi All,
>
> The windows binary packages in
> http://cran.r-project.org/bin/windows/contrib/ are out of date for my
> packages, and perhaps for others as well.  I've now received several email
> messages commenting on this fact.
>
> Since I now have a Windows 2K machine with the proper build environment, I
> can create the windows binary packages myself.  What is the proper mechanism
> for getting a windows binary package placed there?
>
> This topic is not documented in the R Windows FAQ or anywhere else I can
> find.   Kurt has indicated that the windows area is mirrored from one of
> Brian's machines, but my query to Brian has not been answered yet.  (Perhaps
> he is taking a well-deserved break).  Does someone else know the proper
> procedure?
>
> If there is not already, can we arrange to set up an automated build
> procedure so that a Windows binary package is created automatically when the
> source package is uploaded?  Or some alternative?
>
> Greg
>
>
>
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 12:27:16 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 12:27:16 +0100 (BST)
Subject: install.packages warning
In-Reply-To: <Pine.LNX.4.44.0210011409070.19662-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.31.0210161223570.1261-100000@gannet.stats>

On Tue, 1 Oct 2002, Ben Bolker wrote:

>
>   Hear, hear; I've often had to reassure people about this warning.  (The
> reason the scary "Warning message" words appear is because
> install.packages() uses the warning() function.)  Is the warning really
> necessary?

Yes.  Why can't people call install.packages() correctly?  It has two
required arguments.  If R_LIBS is set, you do want to think hard about
where to install, and the warning is useful.  Maybe if there is only one
library, the warning could be suppressed.

And if they are doing it on Windows, they can use a menu item to generate
a correct call for them....

>
> On Tue, 1 Oct 2002, Wright, Kevin wrote:
>
> >
> > I typically install packages from a local site:
> >
> > > install.packages("x:/tpm/tpm.zip",CRAN=NULL)
> > updating HTML package descriptions
> > Warning message:
> > argument `lib' is missing: using C:/PROGRA~1/R/RW1051/library in:
> > install.packages("x:/tpm/tpm.zip", CRAN = NULL)
> >
> > The warning doesn't bother me, but I've had to help other people who see
> > "warning" and decide to panic.
> >
> > May I suggest changing "Warning message" to something less scary, for
> > example "Note:".

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Oct 16 16:40:21 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 16 Oct 2002 11:40:21 -0400
Subject: R-patched make warnings on Mandrake 9.0
Message-ID: <3DAD8865.356D0EA6@bank-banque-canada.ca>

I seem to recall a discussion about this a day or two ago, but I believe it was
on Solaris. On Linux, Mandrake 9.0,  when I make R-patched_2002-10-16 with gcc
3.2 I get lots of warnings like:
...
gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES 
-mieee-fp  -fPIC  -g -O2 -c pacf.c -o pacf.o
cc1: warning: changing search order for system directory 
"/usr/local/include"
cc1: warning:   as it has already been specified as a non-system directory
gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES 
-mieee-fp  -fPIC  -g -O2 -c qr.c -o qr.o
cc1: warning: changing search order for system directory 
"/usr/local/include"
cc1: warning:   as it has already been specified as a non-system directory
...

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 17:37:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 17:37:44 +0100 (BST)
Subject: R-patched make warnings on Mandrake 9.0
In-Reply-To: <3DAD8865.356D0EA6@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0210161734420.1692-100000@gannet.stats>

This always happens with gcc 3.2, and is harmless.

You can avoid most of them (but not in the GNOME module) by setting
CPPFLAGS= (nothing).

I thought I had put something about this in R-admin.texi, but apparently
did not get it there for 1.6.0.

On Wed, 16 Oct 2002, Paul Gilbert wrote:

> I seem to recall a discussion about this a day or two ago, but I believe it was
> on Solaris. On Linux, Mandrake 9.0,  when I make R-patched_2002-10-16 with gcc
> 3.2 I get lots of warnings like:
> ...
> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
> -mieee-fp  -fPIC  -g -O2 -c pacf.c -o pacf.o
> cc1: warning: changing search order for system directory
> "/usr/local/include"
> cc1: warning:   as it has already been specified as a non-system directory
> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
> -mieee-fp  -fPIC  -g -O2 -c qr.c -o qr.o
> cc1: warning: changing search order for system directory
> "/usr/local/include"
> cc1: warning:   as it has already been specified as a non-system directory
> ...
>
> Paul Gilbert
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@hivnet.ubc.ca  Wed Oct 16 17:46:12 2002
From: jerome@hivnet.ubc.ca (jerome@hivnet.ubc.ca)
Date: Wed, 16 Oct 2002 18:46:12 +0200 (MET DST)
Subject: xlim in plot.survfit() [with a discussion on "..."] (PR#2173)
Message-ID: <200210161646.SAA00608@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.6.0
OS: RedHat 7.2
Submission from: (NULL) (24.83.203.63)



Hello,

I am trying to draw a legend on top of survival curves using
plot.survfit(). As in the example below, I would like to
specify a large interval for the x-axis. I can achieve such
result using "xlim". However, an error occurs if I use the
legend.pos and legend.text parameters as well.

  library(survival)
  TIME  <- Surv(c(23,52,12,56,23,21),c(T,F,T,F,F,T))

  par(mfrow=c(2,1))
  plot(survfit(TIME~1),conf.int=F,xlim=c(0,100),
  main="xlim=c(0,100) without legend")
  plot(survfit(TIME~1),conf.int=F,xlim=c(0,100),
  legend.pos=0,legend.text="Survival Curve",
  main="xlim=c(0,100) with legend (ERROR!)")

It looks like plot.survfit() attempts to send the "xlim"
parameter to legend(), which does not accept "xlim" as a
parameter. Hence, an error occurs and the legend is not
plotted.

I believe the problem is due to the fact that the
additional parameters "..." that are supplied to
plot.survfit() do not necessarily match the range of
possible parameters for both plot() and legend(). In my
case, "xlim" is matched by plot(), but not by legend().

I know how to plot the legend by directly using the
legend() function. However, in order to correct the
small problem with plot.survfit(), I would suggest that
plot.survfit() be modified to perform an exact match of
the parameters in "..." onto legend(). Perhaps there is
already a function to perform such a task. If not, I
believe it could provide a practical solution for
dealing with "..." and subfunctions that do not have a
built-in "..." parameter. That's just a suggestion,
though.

Thank you very much!
Jerome Asselin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Wed Oct 16 18:12:00 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 16 Oct 2002 10:12:00 -0700
Subject: R-patched make warnings on Mandrake 9.0
In-Reply-To: <Pine.LNX.4.31.0210161734420.1692-100000@gannet.stats>
Message-ID: <62676906-E12A-11D6-A9D8-000393860F3C@stat.ucla.edu>

Harmless but annoying. It's gone in gcc-3.3.

On Wednesday, October 16, 2002, at 09:37 AM, <ripley@stats.ox.ac.uk>  
wrote:

> This always happens with gcc 3.2, and is harmless.
>
> You can avoid most of them (but not in the GNOME module) by setting
> CPPFLAGS= (nothing).
>
> I thought I had put something about this in R-admin.texi, but  
> apparently
> did not get it there for 1.6.0.
>
> On Wed, 16 Oct 2002, Paul Gilbert wrote:
>
>> I seem to recall a discussion about this a day or two ago, but I  
>> believe it was
>> on Solaris. On Linux, Mandrake 9.0,  when I make R-patched_2002-10-16  
>> with gcc
>> 3.2 I get lots of warnings like:
>> ...
>> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
>> -mieee-fp  -fPIC  -g -O2 -c pacf.c -o pacf.o
>> cc1: warning: changing search order for system directory
>> "/usr/local/include"
>> cc1: warning:   as it has already been specified as a non-system  
>> directory
>> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
>> -mieee-fp  -fPIC  -g -O2 -c qr.c -o qr.o
>> cc1: warning: changing search order for system directory
>> "/usr/local/include"
>> cc1: warning:   as it has already been specified as a non-system  
>> directory
>> ...
>>
>> Paul Gilbert
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
>> .-.-.-.-.-
>> r-devel mailing list -- Read  
>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To:  
>> r-devel-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._. 
>> _._._._._
>>
>
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
-------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 18:20:07 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 18:20:07 +0100 (BST)
Subject: R-patched make warnings on Mandrake 9.0
In-Reply-To: <62676906-E12A-11D6-A9D8-000393860F3C@stat.ucla.edu>
Message-ID: <Pine.LNX.4.31.0210161818570.1830-100000@gannet.stats>

On Wed, 16 Oct 2002, Jan de Leeuw wrote:

> Harmless but annoying. It's gone in gcc-3.3.

That's not released yet according to gcc.gnu.org!  gcc alphas are subject
to change.

> On Wednesday, October 16, 2002, at 09:37 AM, <ripley@stats.ox.ac.uk>
> wrote:
>
> > This always happens with gcc 3.2, and is harmless.
> >
> > You can avoid most of them (but not in the GNOME module) by setting
> > CPPFLAGS= (nothing).
> >
> > I thought I had put something about this in R-admin.texi, but
> > apparently
> > did not get it there for 1.6.0.
> >
> > On Wed, 16 Oct 2002, Paul Gilbert wrote:
> >
> >> I seem to recall a discussion about this a day or two ago, but I
> >> believe it was
> >> on Solaris. On Linux, Mandrake 9.0,  when I make R-patched_2002-10-16
> >> with gcc
> >> 3.2 I get lots of warnings like:
> >> ...
> >> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
> >> -mieee-fp  -fPIC  -g -O2 -c pacf.c -o pacf.o
> >> cc1: warning: changing search order for system directory
> >> "/usr/local/include"
> >> cc1: warning:   as it has already been specified as a non-system
> >> directory
> >> gcc -I../../../../include  -I/usr/local/include -D__NO_MATH_INLINES
> >> -mieee-fp  -fPIC  -g -O2 -c qr.c -o qr.o
> >> cc1: warning: changing search order for system directory
> >> "/usr/local/include"
> >> cc1: warning:   as it has already been specified as a non-system
> >> directory
> >> ...
> >>
> >> Paul Gilbert
> >> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> >> .-.-.-.-.-
> >> r-devel mailing list -- Read
> >> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> >> Send "info", "help", or "[un]subscribe"
> >> (in the "body", not the subject !)  To:
> >> r-devel-request@stat.math.ethz.ch
> >> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> >> _._._._._
> >>
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > .-.-.-.-.-
> > r-devel mailing list -- Read
> > http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
> > r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > ._._._._
> >
> >
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>
> ------------------------------------------------------------------------
> -------------------------
>            No matter where you go, there you are. --- Buckaroo Banzai
>                     http://gifi.stat.ucla.edu/sounds/nomatter.au
>
> ------------------------------------------------------------------------
> -------------------------
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.c.rougier@durham.ac.uk  Wed Oct 16 18:21:00 2002
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Wed, 16 Oct 2002 19:21:00 +0200 (MET DST)
Subject: Documentation for .Renviron (PR#2175)
Message-ID: <200210161721.TAA00766@pubhealth.ku.dk>

Hi everyone,

Two minor points about ?.Renviron.

1) If R_ENVIRON is not set then R defaults to `${R_HOME}/etc/Renviron',
not `${R_HOME}/etc/Renviron.site' as stated.

2) In the details, there is a missing "way" in "`value' is processed
in a similar to a Unix shell."

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Wed Oct 16 19:31:10 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Wed, 16 Oct 2002 20:31:10 +0200 (MET DST)
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
Message-ID: <200210161831.UAA01076@pubhealth.ku.dk>

There is an incompatibility between R's configure/build process, and gcc 3.2.0 (and maybe earlier).
Gcc 3.2.0 includes -I/usr/local/include by default, on my system (default configuration), and cpp0
issues a warning when this flag is issued additionally by the user (= R's configure). This warning
ends up in the dependency sections of the Makefile that are generated "automagically". The 1st
occurrence is line 105 of src/appl/Makefile .

The only way around it that I found, other than removing all -I/usr/local/include in all Makefiles is to manually add
-Wp,-w, a gcc/cpp argument that suppresses all cpp warnings. It also has the effect of not aborting
a compilation as soon as a specified header file is *not* found :(
If you decide to leave -I/usr/local/include and add -Wp,-w for gcc 3 compilers, I would suggest
*not* adding -Wp,-w if -fsyntax-only is also given, to not interfere with requested syntax-checking.
(that would probably require to call the compiler from a wrapper script, something I already do.)

Rene Bertin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 16 21:01:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 16 Oct 2002 21:01:30 +0100 (BST)
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
In-Reply-To: <200210161831.UAA01076@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210162038360.2159-100000@gannet.stats>

This has been discussed on R-devel, and it is definitely not an R bug
as there are workarounds stated in the R-admin manual.

Setting CPPFLAGS= (nothing) does avoid this except in the gnome module. It
was intended to put that explicitly in the R-admin manual for 1.6.0, but
it was not done in time (it is now there for R-patched).

We are told that this is fixed in the alphas of gcc 3.3.  Once it is clear
exactly which versions of gcc are affected we may add a workaround in the
configure script.

On Wed, 16 Oct 2002 rjvbertin@hotmail.com wrote:

> There is an incompatibility between R's configure/build process, and gcc 3.2.0 (and maybe earlier).
> Gcc 3.2.0 includes -I/usr/local/include by default, on my system (default configuration), and cpp0
> issues a warning when this flag is issued additionally by the user (= R's configure). This warning
> ends up in the dependency sections of the Makefile that are generated "automagically". The 1st
> occurrence is line 105 of src/appl/Makefile .
>
> The only way around it that I found, other than removing all -I/usr/local/include in all Makefiles is to manually add
> -Wp,-w, a gcc/cpp argument that suppresses all cpp warnings. It also has the effect of not aborting
> a compilation as soon as a specified header file is *not* found :(
> If you decide to leave -I/usr/local/include and add -Wp,-w for gcc 3 compilers, I would suggest
> *not* adding -Wp,-w if -fsyntax-only is also given, to not interfere with requested syntax-checking.
> (that would probably require to call the compiler from a wrapper script, something I already do.)
>
> Rene Bertin
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Thu Oct 17 10:43:18 2002
From: rjvbertin@hotmail.com (RenE J.V. Bertin)
Date: Thu, 17 Oct 2002 11:43:18 +0200
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
In-Reply-To: <Pine.LNX.4.31.0210162038360.2159-100000@gannet.stats>
References: <200210161831.UAA01076@pubhealth.ku.dk>
 <Pine.LNX.4.31.0210162038360.2159-100000@gannet.stats>
Message-ID: <20021017114318.072cab11.rjvbertin@hotmail.com>

On Wed, 16 Oct 2002 21:01:30 +0100 (BST), <ripley@stats.ox.ac.uk> wrote regarding "Re:
configure/build issue with gcc 3.2.0 (PR#2176)"

8-) This has been discussed on R-devel, and it is definitely not an R bug
8-) as there are workarounds stated in the R-admin manual.

	Really? I have looked around the occurrences of 'gcc', 'cpp' and 'workaround' (none) and '-Wp' (none) in doc/manual/R-admin.pdf, and didn't see anything that looked appropriate. Are we talking about the same issue (not a bug *in* R indeed)?



__oWo________________________________________________
| RenE J.V. Bertin
|  _|~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-|_
|  O]                   LPPA                     [O
|  O]             College de France              [O
|  O] 11, place Marcelin Berthelot, 75005 Paris  [O
|  O]                   France                   [O
|  -|~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-~-|-

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 17 11:50:29 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 17 Oct 2002 12:50:29 +0200 (MET DST)
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
Message-ID: <200210171050.MAA05494@pubhealth.ku.dk>

On Thu, 17 Oct 2002, RenE J.V. Bertin wrote:

> On Wed, 16 Oct 2002 21:01:30 +0100 (BST), <ripley@stats.ox.ac.uk> wrote regarding "Re:
> configure/build issue with gcc 3.2.0 (PR#2176)"
>
> 8-) This has been discussed on R-devel, and it is definitely not an R bug
> 8-) as there are workarounds stated in the R-admin manual.
>
> 	Really? I have looked around the occurrences of 'gcc', 'cpp' and
'workaround' (none) and '-Wp' (none) in doc/manual/R-admin.pdf,
and didn't see anything that looked appropriate. Are we talking
about the same issue (not a bug *in* R indeed)?

Please do read *all* of my message.  I said that setting CPPFLAGS to empty
solves the problem.  Setting CPPFLAGS appropriately *is* discussed in that
manual, and that's what you neglected to do.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 17 13:34:54 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 Oct 2002 14:34:54 +0200
Subject: R-1.6.1beta available
Message-ID: <x2of9t451t.fsf@biostat.ku.dk>

R 1.6.1 has been scheduled for November 1.

We're makin interim beta versions available via

http://cran.us.r-project.org/src/base

(ftp://cran.us.r-project.org/pub/R/src/base used to work, but
apparently FTP access has been disabled)

The filename is R-1.6.1beta_*.tar.gz, where * is the creation date. 

If you want to help ensure that the final 1.6.1 works satisfactorily
on *your* platform, it might be a good idea to make a test build of
the beta and report any errors back (to the r-devel list, not to me
personally, please!).

New versions will be made available each day until the final release,
barring hardware trouble and build script failures.


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 17 17:29:36 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 17 Oct 2002 17:29:36 +0100 (BST)
Subject: Documentation for .Renviron (PR#2175)
In-Reply-To: <200210161721.TAA00766@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210171717250.962-100000@gannet.stats>

On Wed, 16 Oct 2002 j.c.rougier@durham.ac.uk wrote:

> Hi everyone,
>
> Two minor points about ?.Renviron.
>
> 1) If R_ENVIRON is not set then R defaults to `${R_HOME}/etc/Renviron',
> not `${R_HOME}/etc/Renviron.site' as stated.

No, it does as it states. See the code fragment

/* try site Renviron: R_ENVIRON, then R_HOME/etc/Renviron.site. */
void process_site_Renviron ()
{
    char buf[PATH_MAX];

    if(process_Renviron(getenv("R_ENVIRON"))) return;
    if(strlen(R_Home) + strlen("/etc/Renviron.site") > PATH_MAX - 1) {
        R_ShowMessage("path to Renviron.site is too long: skipping");
        return;
    }
    sprintf(buf, "%s/etc/Renviron.site", R_Home);
    process_Renviron(buf);
}

in unix/sys-common.c.

The description is inaccurate though: R_HOME/etc/Renviron.site is read
unless R_ENVIRON is set to a valid file.  I've altered the code so that
even if R_ENVIRON is invalid R_HOME/etc/Renviron.site is skipped.


${R_HOME}/etc/Renviron is for R's own use. It gets read whether or not
R_ENVIRON is set.

>
> 2) In the details, there is a missing "way" in "`value' is processed
> in a similar to a Unix shell."

Thanks.

>
> Cheers, Jonathan.
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status =
>  major = 1
>  minor = 6.0
>  year = 2002
>  month = 10
>  day = 01
>  language = R
>
> Search Path:
>  .GlobalEnv, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Oct 17 17:52:56 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 17 Oct 2002 18:52:56 +0200 (MET DST)
Subject: documentation: Missing paranthesis in reshape.Rd (PR#2170)
Message-ID: <200210171652.SAA08775@pubhealth.ku.dk>

>>>>> "Michael" == Michael Na Li <lina@u.washington.edu>
>>>>>     on Wed, 16 Oct 2002 08:36:09 +0200 (MET DST) writes:

    Michael> Full_Name: Michale Na Li
    Michael> Version: 1.6.0
    Michael> OS: i386-linux
    Michael> Submission from: (NULL) (140.142.172.141)


    Michael> In src/library/base/man/reshape.Rd, one paranthesis
    Michael> is missing, here is the patch.

    Michael>  ..........

Thank you, Michael.

I've added that (and many spaces).
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Oct 17 18:58:33 2002
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Thu, 17 Oct 2002 19:58:33 +0200 (MET DST)
Subject: underflow handling in besselK (PR#2179)
Message-ID: <200210171758.TAA09027@pubhealth.ku.dk>


  The besselK() function knows about overflows/underflows internally;
there is a constant xmax_BESS_K in src/nmath/bessel.h (and referred to
only in bessel_k.c), equal to 705.342, which is checked if expon.scaled is
FALSE.  (The equivalent number for bessel_i.c is 709, defined as
exparg_BESS in bessel.h.) However, besselK(x) silently returns +Inf if
x>705.342.  This behavior is reasonable for besselI (where the problem is
an overflow), but seems wrong for besselK (since the problem here is an
*underflow*).  The answer may be as simple as returning 0 rather than +Inf
in this case.
 
  If this is appropriate, the following patch should do the job:

*** bessel_k.c	Thu Oct 17 13:55:55 2002
--- bessel_k.c.dist	Thu Oct 17 13:48:53 2002
***************
*** 216,224 ****
  	    ML_ERROR(ME_RANGE);
  	    *ncalc = *nb;
  	    for(i=0; i < *nb; i++)
! 		if (ex<=0)
! 	   	   bk[i] = ML_POSINF;
! 	        else bk[i]=0.0;
  	    return;
  	}
  	k = 0;
--- 216,222 ----
  	    ML_ERROR(ME_RANGE);
  	    *ncalc = *nb;
  	    for(i=0; i < *nb; i++)
! 		bk[i] = ML_POSINF;
  	    return;
  	}
  	k = 0;

  (By the way, the test for x<=0 seems inappropriate; it looks like x<0 is 
caught elsewhere and that this is really a test for x==0.)

  [Apologies if this is not considered a bug, but my judgment is that it
is -- couldn't be bothered with a round of sending it to r-devel first.]

  Ben Bolker

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ko-Kang@xtra.co.nz  Thu Oct 17 19:37:45 2002
From: Ko-Kang@xtra.co.nz (Ko-Kang Kevin Wang)
Date: Fri, 18 Oct 2002 07:37:45 +1300
Subject: R-1.6.1beta available
References: <x2of9t451t.fsf@biostat.ku.dk>
Message-ID: <003f01c2760c$49f05ed0$a02037d2@kwan022>



----- Original Message -----
From: "Peter Dalgaard BSA" <p.dalgaard@biostat.ku.dk>
To: <r-devel@r-project.org>
Sent: Friday, October 18, 2002 1:34 AM
Subject: R-1.6.1beta available


> R 1.6.1 has been scheduled for November 1.
>
> We're makin interim beta versions available via
>
> http://cran.us.r-project.org/src/base
>
> (ftp://cran.us.r-project.org/pub/R/src/base used to work, but
> apparently FTP access has been disabled)
>
> The filename is R-1.6.1beta_*.tar.gz, where * is the creation date.
>
> If you want to help ensure that the final 1.6.1 works satisfactorily
> on *your* platform, it might be a good idea to make a test build of
> the beta and report any errors back (to the r-devel list, not to me
> personally, please!).
>


I've successfully compiled it (with ActiveTcl 8.4.0.1 too!) on Windows.  The
file size is ~ 21MB.

I didn't realise it was R 1.6.1 beta at first.  I was using rsync to get
r-patched on my 1.6.0,   Then after compilation/installation I realised it
is in fact 1.6.1 Beta.  I'm assuming one can rsync it?  The command I used
was:
   rsync -aC rsync.r-project.org::r-patched ./R-patched

Cheers,

Ko-Kang Wang

------------------------------------------------
Ko-Kang Kevin Wang
Post Graduate PGDipSci Student
Department of Statistics
University of Auckland
New Zealand
www.stat.auckland.ac.nz/~kwan022


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Fri Oct 18 05:17:24 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 17 Oct 2002 21:17:24 -0700
Subject: REventLoop
Message-ID: <8124789E-E250-11D6-A39B-000393860F3C@stat.ucla.edu>

The REventLoop package works well on OS X, it seems, both with Gtk and
Tk. If I understand things correctly (1) it is not supposed to work  
with the
Carbon event loop yet, and (2) if I did then the quartz() graphics  
device
could be brought to the front even if R is started from the terminal,  
and (3)
I could use AquaTk instead of X11 tk.

--- Jan
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Oct 18 08:44:16 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 18 Oct 2002 08:44:16 +0100
Subject: Documentation for .Renviron (PR#2175)
References: <Pine.LNX.4.31.0210171717250.962-100000@gannet.stats>
Message-ID: <3DAFBBD0.8390E17A@durham.ac.uk>

ripley@stats.ox.ac.uk wrote:
> 
> On Wed, 16 Oct 2002 j.c.rougier@durham.ac.uk wrote:
> 
> > Hi everyone,
> >
> > Two minor points about ?.Renviron.
> >
> > 1) If R_ENVIRON is not set then R defaults to `${R_HOME}/etc/Renviron',
> > not `${R_HOME}/etc/Renviron.site' as stated.
> 
> No, it does as it states. See the code fragment
> 
> /* try site Renviron: R_ENVIRON, then R_HOME/etc/Renviron.site. */
> void process_site_Renviron ()
> {
>     char buf[PATH_MAX];
> 
>     if(process_Renviron(getenv("R_ENVIRON"))) return;
>     if(strlen(R_Home) + strlen("/etc/Renviron.site") > PATH_MAX - 1) {
>         R_ShowMessage("path to Renviron.site is too long: skipping");
>         return;
>     }
>     sprintf(buf, "%s/etc/Renviron.site", R_Home);
>     process_Renviron(buf);
> }
> 
> in unix/sys-common.c.
> 
> The description is inaccurate though: R_HOME/etc/Renviron.site is read
> unless R_ENVIRON is set to a valid file.  I've altered the code so that
> even if R_ENVIRON is invalid R_HOME/etc/Renviron.site is skipped.
> 
> ${R_HOME}/etc/Renviron is for R's own use. It gets read whether or not
> R_ENVIRON is set.

Perhaps that could be documented as well.  I drew my inference from
observing that if I did not have a "Renviron.site", then modifications
to "Renviron", which has the same syntax as "Renviron.site", showed up
in R.

Jonathan.


-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Oct 18 08:49:49 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 18 Oct 2002 08:49:49 +0100 (BST)
Subject: Documentation for .Renviron (PR#2175)
In-Reply-To: <3DAFBBD0.8390E17A@durham.ac.uk>
Message-ID: <Pine.LNX.4.31.0210180846530.2899-100000@gannet.stats>

On Fri, 18 Oct 2002, Jonathan Rougier wrote:

> ripley@stats.ox.ac.uk wrote:
> >
> > On Wed, 16 Oct 2002 j.c.rougier@durham.ac.uk wrote:
> >
> > > Hi everyone,
> > >
> > > Two minor points about ?.Renviron.
> > >
> > > 1) If R_ENVIRON is not set then R defaults to `${R_HOME}/etc/Renviron',
> > > not `${R_HOME}/etc/Renviron.site' as stated.
> >
> > No, it does as it states. See the code fragment
> >
> > /* try site Renviron: R_ENVIRON, then R_HOME/etc/Renviron.site. */
> > void process_site_Renviron ()
> > {
> >     char buf[PATH_MAX];
> >
> >     if(process_Renviron(getenv("R_ENVIRON"))) return;
> >     if(strlen(R_Home) + strlen("/etc/Renviron.site") > PATH_MAX - 1) {
> >         R_ShowMessage("path to Renviron.site is too long: skipping");
> >         return;
> >     }
> >     sprintf(buf, "%s/etc/Renviron.site", R_Home);
> >     process_Renviron(buf);
> > }
> >
> > in unix/sys-common.c.
> >
> > The description is inaccurate though: R_HOME/etc/Renviron.site is read
> > unless R_ENVIRON is set to a valid file.  I've altered the code so that
> > even if R_ENVIRON is invalid R_HOME/etc/Renviron.site is skipped.
> >
> > ${R_HOME}/etc/Renviron is for R's own use. It gets read whether or not
> > R_ENVIRON is set.
>
> Perhaps that could be documented as well.  I drew my inference from
> observing that if I did not have a "Renviron.site", then modifications
> to "Renviron", which has the same syntax as "Renviron.site", showed up
> in R.

It is already documented in R-patched, with the comment that this is only
so for Unix-alikes.

Where did you get the idea that it was safe for you to tinker with
etc/Renviron, though?  Because etc/Renviron is used elsewhere (in the
shell scripts), it is not safe to change.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Fri Oct 18 09:41:14 2002
From: jago@mclink.it (Stefano Iacus)
Date: Fri, 18 Oct 2002 10:41:14 +0200
Subject: REventLoop
In-Reply-To: <8124789E-E250-11D6-A39B-000393860F3C@stat.ucla.edu>
Message-ID: <5C851B5E-E275-11D6-BB1C-003065CC4CB8@mclink.it>

Hopefully yes. This is what I was looking at.

stefano

On Friday, October 18, 2002, at 06:17 AM, Jan de Leeuw wrote:

> The REventLoop package works well on OS X, it seems, both with Gtk and
> Tk. If I understand things correctly (1) it is not supposed to work  
> with the
> Carbon event loop yet, and (2) if I did then the quartz() graphics  
> device
> could be brought to the front even if R is started from the terminal,  
> and (3)
> I could use AquaTk instead of X11 tk.
>
> --- Jan
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical  
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email:  
> deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>   
> ----------------------------------------------------------------------- 
> --------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>   
> ----------------------------------------------------------------------- 
> --------------------------
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Fri Oct 18 12:38:57 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 18 Oct 2002 06:38:57 -0500
Subject: Debian packages of R-1.6.1beta available
In-Reply-To: <x2of9t451t.fsf@biostat.ku.dk>
References: <x2of9t451t.fsf@biostat.ku.dk>
Message-ID: <20021018113857.GA3962@sonny.eddelbuettel.com>

On Thu, Oct 17, 2002 at 02:34:54PM +0200, Peter Dalgaard BSA wrote:
> R 1.6.1 has been scheduled for November 1.
> 
> We're makin interim beta versions available via
> 
> http://cran.us.r-project.org/src/base
>
> (ftp://cran.us.r-project.org/pub/R/src/base used to work, but
> apparently FTP access has been disabled)
> 
> The filename is R-1.6.1beta_*.tar.gz, where * is the creation date.  

Debian packages were uploaded for i386 last evening, and have already been
compiled successfully for six other architectures (alpha arm hppa ia64
powerpc and m68k). The remaining four (m68k mips mipsel sparc) should follow
shortly. 

My i386 release was built on 'testing' (aka 'sarge') and should be
installable on any testing or unstable machine. The other architectures
may require the unstable release.

> If you want to help ensure that the final 1.6.1 works satisfactorily
> on *your* platform, it might be a good idea to make a test build of
> the beta and report any errors back (to the r-devel list, not to me
> personally, please!).

No issues to report.

> New versions will be made available each day until the final release,
> barring hardware trouble and build script failures.

As with the 1.[456].* prereleases, I will probably stick to weekly
snapshots.

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rab@nauticom.net  Fri Oct 18 15:21:49 2002
From: rab@nauticom.net (rab@nauticom.net)
Date: Fri, 18 Oct 2002 16:21:49 +0200 (MET DST)
Subject: Chron problem with R 1.6.0 (PR#2181)
Message-ID: <200210181421.QAA15737@pubhealth.ku.dk>

Full_Name: Rick Bilonick
Version: 1.6.0
OS: Linux (RH 7.1)
Submission from: (NULL) (12.4.226.1)


Hi. I'm using Red Hat 7.1 Linux (Intel 586). I installed the 1.6.0 rpm. No
problems were reported. When I tried to load the chron library:

Error in dyn.load(x, as.logical(local), as.logical(now)) :
        unable to load shared library "/usr/lib/R/library/chron/libs/chron.so":
  libR.so: cannot load shared object file: No such file or directory
Error in library(chron) : .First.lib failed

I checked to see if there was a new version of chron but apparently I had the
latest version. I did an "update.packages" any way. It updated a number of
packages but not chron. I haven't noticed any problems with other packages. R
appears to run OK.

I'm not sure why chron.so was missing. I removed the chron package and
re-installed chron. That fixed the problem. But what happened to chron.so when I
installed 1.6.0?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Oct 18 16:16:38 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 18 Oct 2002 17:16:38 +0200 (MET DST)
Subject: underflow handling in besselK (PR#2179)
Message-ID: <200210181516.RAA16040@pubhealth.ku.dk>

>>>>> "Ben" == Ben Bolker <bolker@zoo.ufl.edu>
>>>>>     on Thu, 17 Oct 2002 19:58:33 +0200 (MET DST) writes:

    Ben> The besselK() function knows about overflows/underflows internally;
    Ben> there is a constant xmax_BESS_K in src/nmath/bessel.h (and referred to
    Ben> only in bessel_k.c), equal to 705.342, which is checked if expon.scaled is
    Ben> FALSE.  (The equivalent number for bessel_i.c is 709, defined as
    Ben> exparg_BESS in bessel.h.) However, besselK(x) silently returns +Inf if
    x> 705.342.  This behavior is reasonable for besselI (where the problem is
    Ben> an overflow), but seems wrong for besselK (since the problem here is an
    Ben> *underflow*).  The answer may be as simple as returning 0 rather than +Inf
    Ben> in this case.
 
Yes, indeed.

    Ben> If this is appropriate, the following patch should do the job:
    Ben> 
    Ben> <...........>

"R-patched" now contains something like your patch, namely :

 	if(ex <= 0 || (*ize == 1 && ex > xmax_BESS_K)) {
+	    if(ex <= 0) {
 	    ML_ERROR(ME_RANGE);
-	    *ncalc = *nb;
 	    for(i=0; i < *nb; i++)
 		bk[i] = ML_POSINF;
+	    } else /* would only have underflow */
+		for(i=0; i < *nb; i++)
+		    bk[i] = 0.;
+	    *ncalc = *nb;
 	    return;
 	}

Thank you for the report!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Oct 18 20:26:09 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Oct 2002 21:26:09 +0200
Subject: Chron problem with R 1.6.0 (PR#2181)
In-Reply-To: <200210181421.QAA15737@pubhealth.ku.dk>
References: <200210181421.QAA15737@pubhealth.ku.dk>
Message-ID: <x28z0v8s6m.fsf@biostat.ku.dk>

rab@nauticom.net writes:

> Hi. I'm using Red Hat 7.1 Linux (Intel 586). I installed the 1.6.0 rpm. No
> problems were reported. When I tried to load the chron library:
> 
> Error in dyn.load(x, as.logical(local), as.logical(now)) :
>         unable to load shared library "/usr/lib/R/library/chron/libs/chron.so":
>   libR.so: cannot load shared object file: No such file or directory
> Error in library(chron) : .First.lib failed
> 
> I checked to see if there was a new version of chron but apparently I had the
> latest version. I did an "update.packages" any way. It updated a number of
> packages but not chron. I haven't noticed any problems with other packages. R
> appears to run OK.
> 
> I'm not sure why chron.so was missing. I removed the chron package and
> re-installed chron. That fixed the problem. But what happened to chron.so when I
> installed 1.6.0?

Chron is not part of 1.6.0, so you must have had it before.
Presumably, your old version of R was built with support for R as a
shared library and the new one isn't, so chron.so goes looking for
libR.so on loading, and it isn't there anymore. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Mon Oct 21 06:15:05 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Mon, 21 Oct 2002 07:15:05 +0200
Subject: Bug list summary (automatic post)
Message-ID: <200210210515.g9L5F5V24536@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1664 *
Subject: Bug in rnorm.
From: Rolf Turner <rolf@math.unb.ca>
Date: Thu, 13 Jun 2002 16:35:59 -0300 (ADT)
--Strange interaction between "Marsaglia-Multicarry" generator and
--"Kinderman-Ramage" 
--method for normal variates. Apparently, switching either of them will help.

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve
* PR# 1580 *
Subject: R bug in cluster package
From: David Hitchcock <dhitchco@stat.ufl.edu>
Date: Mon, 20 May 2002 14:33:24 -0400
* PR# 1662 *
Subject: fisher.test FEXACT memory bug "should not occur"
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Thu, 13 Jun 2002 08:21:50 +0200
--The supplementary (table of sum one) is fixed for 1.5.1.
--Detection code for the first problem has been added to 1.5.1 which will stop
--the crash, but the underlying cause is still open.
* PR# 1716 *
Subject: rdiscrete in e1071 fails when n==1
From: "John Aitchison" <jaitchis@hwy.com.au>
Date: Fri, 28 Jun 2002 10:28:17 +1000
* PR# 1729 *
Subject: problem with qq( )
From: Jarno.Tuimala@Helsinki.Fi
Date: Tue, 2 Jul 2002 10:37:10 +0200 (MET DST)
--A report on lattice
* PR# 1741 *
Subject: groupedData constructor from a function
From: dieter.menne@menne-biomed.de
Date: Thu, 4 Jul 2002 15:59:59 +0200 (MET DST)
* PR# 1745 *
Subject: nlme: failed augPred with NA in an unused column
From: dieter.menne@menne-biomed.de
Date: Fri, 5 Jul 2002 08:32:32 +0200 (MET DST)
--nlme needs an update as suggested in the followup
* PR# 1901 *
Subject: svm seg faults
From: stefan.boehringer+science@uni-bochum.de
Date: Tue, 13 Aug 2002 14:12:17 +0200 (MET DST)
--Seem to be due to gcc `2.96' from RH7.3
* PR# 1974 *
Subject: Rwave installation problem
From: ld-temp-qt3i@pobox.com
Date: Mon, 2 Sep 2002 09:27:36 +0200 (MET DST)
* PR# 1977 *
Subject: Bugs in $RHOME/src/library/SJava/src/makefile.win
From: grimm.hinz@rcc.ch
Date: Tue, 3 Sep 2002 13:13:17 +0200 (MET DST)
* PR# 1978 *
Subject: SJava 0.65, Sample Java files are missing
From: grimm.heinz@rcc.ch
Date: Tue, 3 Sep 2002 13:24:30 +0200 (MET DST)
* PR# 2173 *
Subject: xlim in plot.survfit() [with a discussion on "..."]
From: jerome@hivnet.ubc.ca
Date: Wed, 16 Oct 2002 18:46:11 +0200 (MET DST)

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1772 *
Subject: bug(?) in R FAQ - Should I run R from within Emacs?
From: Tim.Harrold@csiro.au
Date: Thu, 11 Jul 2002 18:21:42 +1000
* PR# 2170 *
Subject: documentation: Missing paranthesis in reshape.Rd
From: lina@u.washington.edu
Date: Wed, 16 Oct 2002 08:36:07 +0200 (MET DST)

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1470 *
Subject: color of axis lines
From: gray@jimmy.harvard.edu
Date: Sat, 20 Apr 2002 22:21:44 +0200 (MET DST)
* PR# 1476 *
Subject: Bug: persp and colors
From: oliver.niggemann@acterna.com
Date: Tue, 23 Apr 2002 09:41:37 +0200 (MET DST)
* PR# 1505 *
Subject: pictex 
From: luchini@ehess.cnrs-mrs.fr
Date: Thu, 2 May 2002 12:23:21 +0200 (MET DST)
* PR# 1653 *
Subject: coplot behaviour
From: "RenE J.V. Bertin" <rjvbertin@hotmail.com>
Date: Mon, 10 Jun 2002 20:11:02 +0200
* PR# 1654 *
Subject: R 1.5.0: axis() does not honor the xaxp argument
From: "Robert D. Merithew" <merithew@ccmr.cornell.edu>
Date: Tue, 11 Jun 2002 09:29:39 -0400 (EDT)
* PR# 1659 *
Subject:  mtext() alignment of perpendicular text 
From: p.murrell@auckland.ac.nz
Date: Wed, 12 Jun 2002 13:29:45 +1200 (NZST)
* PR# 1878 *
Subject: close.screen
From: Martin.Schlather@uni-bayreuth.de
Date: Mon, 5 Aug 2002 22:35:02 +0200 (MET DST)
* PR# 1899 *
Subject: interaction.plot() legend too narrow when mfcol > 2
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 13 Aug 2002 09:36:15 +0200
* PR# 1933 *
Subject: dev2eps() prints ticks with wrong length!
From: Timur Elzhov <Timur.Elzhov@jinr.ru>
Date: Fri, 23 Aug 2002 17:22:15 +0400
--dev.copy problem
* PR# 1972 *
Subject: lattice install
From: robert.king@newcastle.edu.au
Date: Mon, 2 Sep 2002 04:55:41 +0200 (MET DST)
--Perhaps lattice should require(grid) and print a clearer message?
* PR# 2069 *
Subject: split.screen problem
From: cbodily@att.net
Date: Thu, 26 Sep 2002 19:37:40 +0200 (MET DST)

Directory:  In-Out

* PR# 1688 *
Subject: Maybe a problem in binary read/write
From: accot@free.fr
Date: Tue, 18 Jun 2002 22:51:17 +0200 (MET DST)
--I don't think file() is said to work with devices!

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1415 *
Subject: int 32 bit error on SPARC 64bit
From: kss28@mail.cba.nau.edu
Date: Mon, 25 Mar 2002 21:18:58 +0100 (MET)
--Was gcc 2.95.2 in private followup.
--Probably unappropriate flags
* PR# 1428 *
Subject: R compile on Solaris 8 fails
From: brower@bst.rochester.edu
Date: Mon, 1 Apr 2002 22:19:07 +0200 (MET DST)
--problems with g++ not finding -lstdc++
--Not a problem with R per se
* PR# 1500 *
Subject: configure script fails on comment in tkConfig.sh
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Tue, 30 Apr 2002 16:41:51 +0200 (CEST)
--Looks like a conspiracy between a shell problem and an oddity in Tk 8.0 rather
--than an R problem. Good to know for the workaround though. The comment in
--TK_XINCLUDES has since disappeared, at least in Tk 8.3.3.
* PR# 1501 *
Subject: configure error: Maybe change CFLAGS or FFLAGS?
From: ale@ini.phys.ethz.ch
Date: Wed, 1 May 2002 15:23:14 +0200 (MET DST)
--Tried to use fort77 on RedHat, should likely try g77 instead.
* PR# 1658 *
Subject: make install fails - index.html not found
From: dhouston@bio.ri.ccf.org
Date: Tue, 11 Jun 2002 22:14:07 +0200 (MET DST)
--Missing perl??
* PR# 1676 *
Subject: R configure.in makes bad alpha assumptions
From: mcmahill@mtl.mit.edu
Date: Sat, 15 Jun 2002 19:21:09 -0400 (EDT)
--Probably fixed in 1.5.1
* PR# 1825 *
Subject: bug in R-1.5.1 for Mac OS X installer
From: Kow Kuroda <kkuroda@crl.ucsd.edu>
Date: Mon, 22 Jul 2002 16:40:26 -0700
--Darwin port
* PR# 1829 *
Subject: R config failure on solaris
From: "Siva Ginjupalli" <gsivrao@hotmail.com>
Date: Wed, 24 Jul 2002 20:08:49 +0000
--Missing info on R version and compilers.
* PR# 1937 *
Subject:  Inconsistent use of Perl? 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Sat, 24 Aug 2002 18:41:09 +0800
--Some packages require Perl v 5.005
* PR# 1995 *
Subject:  2002-09-08 1.6.0 build fails in Recommended 
From: <stvjc@channing.harvard.edu>
Date: Sun, 8 Sep 2002 23:57:39 -0400 (EDT)
--I think this got cleared up...
* PR# 1996 *
Subject:  config checks for --with-gnome need update 
From: <stvjc@channing.harvard.edu>
Date: Mon, 9 Sep 2002 00:08:59 -0400 (EDT)

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT
* PR# 1891 *
Subject: summary.data.frame with compound elements problem
From: b.rowlingson@lancaster.ac.uk
Date: Fri, 9 Aug 2002 10:35:43 +0200 (MET DST)

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1880 *
Subject:  You requested this report 
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Tue, 6 Aug 2002 16:57:54 +0800
--The bug is that we get as far as mkCLOSXP before an error is reported

Directory:  Macintosh

* PR# 1819 *
Subject: Date arithmetic fails
From: RML27@cornell.edu
Date: Sun, 21 Jul 2002 20:26:12 +0200 (MET DST)
--In fact, as.POSIXct is off by 66 years. See
--   http://developer.apple.com/qa/ops/ops23.html
--This is semifixed, but timezones still don't work
* PR# 1991 *
Subject: Mac Save As... bug
From: Tim Cole <tjc1@cam.ac.uk>
Date: Sun, 8 Sep 2002 13:47:00 +0100

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500
* PR# 1503 *
Subject: R-GNOME
From: Patrick Gonin <gonin@genethon.fr>
Date: Thu, 2 May 2002 09:29:07 +0200
--1) is not a bug, as jpeg etc work.  capabilities() has been changed for 1.5.1
--2) system() needs a new version for GNOME.

Directory:  Models

* PR# 1861 *
Subject: update() can not find objects
From: yzhou@arcturusag.com
Date: Thu, 1 Aug 2002 19:01:59 +0200 (MET DST)
--The problem is actually deeper than this.
--
--Sometime update() wants to evaluate arguments in the environment where the model
--was defined, as here. 
--
--Sometimes it wants to use the current environment, eg this snippet from MASS 
--ph.fun <- function(data, i) {
--  d <- data
--  d$calls <- d$fitted + d$res[i]
--  coef(update(fit, data=d))
--}

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
--This platform turned out to have badly broken FPU behaviour. Given up, at 
--least for now .
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--MacOS X: Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1461 *
Subject: make check fails d-p-q-r-tests.R - OpenBSD 3.0
From: Jason Turner <jasont@indigoindustrial.co.nz>
Date: Mon, 15 Apr 2002 10:13:36 +0000
* PR# 1606 *
Subject: hitting ^C breaks readline history
From: Cyril Humbert <humbertc@univ-mlv.fr>
Date: Tue, 28 May 2002 12:07:07 +0200 (MET DST)
* PR# 2091 *
Subject: Scripts not executable
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 2 Oct 2002 00:54:15 +0200 (CEST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

* PR# 1711 *
Subject: GUI bug
From: socrates@mail.ru
Date: Thu, 27 Jun 2002 10:30:51 +0200 (MET DST)
--A crash that is *very* hard to trigger (after several
--minutes of continuous resizing)

Directory:  incoming

* PR# 1556 *
Subject: lib.fixup, .GlobalEnv, and R1.5.0
From: mark.bravington@csiro.au
Date: Wed, 15 May 2002 08:30:50 +0200 (MET DST)
* PR# 1761 *
Subject: svd() very slow for wide matrix X but not for t(X)
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Tue, 9 Jul 2002 11:39:15 -0400 
--Doesn't happen with the now preferred La.svd.
* PR# 2003 *
Subject: rhome.c: getRHOME() fails, if R is called from SJava
From: grimm.heinz@rcc.ch
Date: Wed, 11 Sep 2002 15:17:53 +0200 (MET DST)
* PR# 2018 *
Subject: missing data in stripchart
From: baron@CATTELL.psych.upenn.edu
Date: Sat, 14 Sep 2002 19:35:32 +0200 (MET DST)
* PR# 2019 *
Subject: p.s. regarding stripchart missing-data report
From: Jonathan Baron <baron@cattell.psych.upenn.edu>
Date: Sat, 14 Sep 2002 13:48:34 -0400
* PR# 2023 *
Subject: mosaicplot enhancements
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Mon, 16 Sep 2002 12:00:26 +0200
* PR# 2033 *
Subject: switch
From: rwehrens@sci.kun.nl
Date: Tue, 17 Sep 2002 23:25:39 +0200 (MET DST)
--not a bug; but worth a documentation hint
* PR# 2038 *
Subject: savehistory directories and quitting R
From: Mark.Bravington@csiro.au
Date: Thu, 19 Sep 2002 14:53:25 +1000
* PR# 2090 *
Subject: Unsolved symbols: meet_ Tcl_EvalObjv
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Wed, 2 Oct 2002 00:44:42 +0200 (CEST)
* PR# 2094 *
Subject: Mean and var inconsistency
From: Kevin.Wright@pioneer.com
Date: Wed, 2 Oct 2002 16:19:27 +0200 (MET DST)
* PR# 2116 *
From: "Brian McArdle" <b.mcardle@auckland.ac.nz>
Date: Mon, 7 Oct 2002 15:46:21 +1300
* PR# 2144 *
Subject: Save() with ascii=TRUE may corrupt numeric values
From: "Efthymiou, Nick" <Nick.Efthymiou@schwab.com>
Date: Thu, 10 Oct 2002 14:09:21 -0700
* PR# 2159 *
Subject: The class attribute on an environment seems buggy
From: hb@maths.lth.se
Date: Mon, 14 Oct 2002 01:34:45 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Oct 21 16:42:19 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 21 Oct 2002 17:42:19 +0200
Subject: dist() {"mva" package} bug: treats +/- Inf as NA
Message-ID: <15796.8283.220924.525706@gargle.gargle.HOWL>

Vince Carey found this (thank you!).
Since the fix to the problem is not entirely obvious, I post
this to R-devel as RFC:

help(dist)  says:

 >>  Missing values are allowed, and are excluded from all computations
 >>  involving the rows within which they occur.  If some columns are
 >>  excluded in calculating a Euclidean, Manhattan or Canberra
 >>  distance, the sum is scaled up proportionally to the number of
 >>  columns used. If all pairs are excluded when calculating a
 >>  particular distance, the value is `NA'.

but the C code in  ....../src/library/mva/src/distance.c,
has, e.g. for the Euclidean distance :

    count= 0;
    dist = 0;
    for(j = 0 ; j < nc ; j++) {
	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
	    dev = (x[i1] - x[i2]);
	    dist += dev * dev;
	    count++;
	}
	i1 += nr;
	i2 += nr;
    }
    if(count == 0) return NA_REAL;
    if(count != nc) dist /= ((double)count/nc);
    return sqrt(dist);

where it is clear that "R_FINITE(*)" should in principle be
replaced by  "!ISNAN(*)".

Note however that "Inf - Inf -> NaN" and e.g the canberra metric
has more ways to get "NaN".

The current code drops all pairs with an +-Inf in it.
I would be inclined to really replace
	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
by
	if(!ISNAN(x[i1])   && !ISNAN(x[i2])) {

for all metrics -- for R-patched.

But I'd also see reasons where we'd want to be smarter/different
than that. One possibility would be to drop the pair (as
currently) also when both are not finite, 
for "binary" to signal an error for +- Inf,
and for "Canberra" :
    Of course,  d =  |x - y| / |x + y| 
    will be 1 , when one of {x,y} is infinite.
This could be considered the desired answser, or also
we may give a warning in any case.

Opinions?


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 21 17:44:53 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 21 Oct 2002 17:44:53 +0100 (BST)
Subject: dist() {"mva" package} bug: treats +/- Inf as NA
In-Reply-To: <15796.8283.220924.525706@gargle.gargle.HOWL>
Message-ID: <Pine.LNX.4.31.0210211738270.28813-100000@gannet.stats>

I think this is definitely better left as is (and definitely so for
1.6.1), perhaps documenting the fact.  What is done seems quite sensible
to me: you really can't have infinite values in an L_2 or L_1 space, and
so Euclidean and L_1 (= Manhattan) distances are not defined.

One could argue for just one infinity point, with zero distance between
infinity points and infinite to all finite points, for example (and NA to
missing values).  It really isn't just one answer.

On Mon, 21 Oct 2002, Martin Maechler wrote:

> Vince Carey found this (thank you!).
> Since the fix to the problem is not entirely obvious, I post
> this to R-devel as RFC:
>
> help(dist)  says:
>
>  >>  Missing values are allowed, and are excluded from all computations
>  >>  involving the rows within which they occur.  If some columns are
>  >>  excluded in calculating a Euclidean, Manhattan or Canberra
>  >>  distance, the sum is scaled up proportionally to the number of
>  >>  columns used. If all pairs are excluded when calculating a
>  >>  particular distance, the value is `NA'.
>
> but the C code in  ....../src/library/mva/src/distance.c,
> has, e.g. for the Euclidean distance :
>
>     count= 0;
>     dist = 0;
>     for(j = 0 ; j < nc ; j++) {
> 	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
> 	    dev = (x[i1] - x[i2]);
> 	    dist += dev * dev;
> 	    count++;
> 	}
> 	i1 += nr;
> 	i2 += nr;
>     }
>     if(count == 0) return NA_REAL;
>     if(count != nc) dist /= ((double)count/nc);
>     return sqrt(dist);
>
> where it is clear that "R_FINITE(*)" should in principle be
> replaced by  "!ISNAN(*)".
>
> Note however that "Inf - Inf -> NaN" and e.g the canberra metric
> has more ways to get "NaN".
>
> The current code drops all pairs with an +-Inf in it.
> I would be inclined to really replace
> 	if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
> by
> 	if(!ISNAN(x[i1])   && !ISNAN(x[i2])) {
>
> for all metrics -- for R-patched.
>
> But I'd also see reasons where we'd want to be smarter/different
> than that. One possibility would be to drop the pair (as
> currently) also when both are not finite,
> for "binary" to signal an error for +- Inf,
> and for "Canberra" :
>     Of course,  d =  |x - y| / |x + y|
>     will be 1 , when one of {x,y} is infinite.
> This could be considered the desired answser, or also
> we may give a warning in any case.
>
> Opinions?
>
>
> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
> phone: x-41-1-632-3408		fax: ...-1228			<><
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 21 21:24:45 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 21 Oct 2002 21:24:45 +0100 (GMT Daylight Time)
Subject: RFC: Loading packages at startup
Message-ID: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>

I've been kicking the following idea around for a while, and am now
proposing to put some version into 1.7.0.  I'd be interested in
comments on the desirability and the design, before I start writing
any code.

S4 introduced a file .S.chapters which can contain a list of S
chapters (equivalent to R packages) to be loaded on start-up.  This
was the germ of this proposal.

Proposal:

Extend the initialization as described in Startup.Rd by having
optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
the latter in the starting directory or failing that the user's home
directory. Each would contain a list of packages, one per line, to be
loaded when R is started, in the order in the files.

Some details:

1) I think the packages should be loaded before .Rprofile and .RData
   are processed, and R_HOME/etc/Rpackages.site before .Rpackages.
   This can be argued, and the S4 parallel would seem to be to load
   packages after S.init (the nearest it has to Rprofile).  But we
   would load library/base/Rprofile first of all so the analogy is not
   close.

2) The present kludge of loading ctest in .First could be replaced
   by making ctest the default content of R_HOME/etc/Rpackages.site
   (in the light of point 5).

3) It would be useful to allow the library tree to be specified, as a
   second field on the line.

4) One problem with saving an R session and then restoring it is that
   the packages in use are not reloaded.  Quitting an R session and
   saving could write .Rpackages in the current directory (with the
   library recorded if it were not the default).  Then restarting a
   session in that directory would restore the loaded packages
   automatically.

5) We might want to allow a .Rpackages file to override Rpackages.site
   (or we might not).  One idea is to allow a minus sign in front of a
   package name, and to merge the Rpackages.site and .Rpackages files
   before loading any packages.  If we did this we probably need to be
   able to save the list of packages to be loaded (and can't easily save
   those not to be loaded), so perhaps -- as the first list of .Rpackages
   should empty the list.

6) One could argue for R_HOME/etc/Rpackages as the `system' file as
   well, and this might be useful if we break base up into smaller
   components.

7) I would allow comment lines in the files, starting with #.

8) The file names or names could be set by environment variables.  It's
   strange that we allow the site file names for Rprofile and Renviron and
   the user file name for command histories to be set in that way.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark0060@tc.umn.edu  Mon Oct 21 23:56:20 2002
From: mark0060@tc.umn.edu (mark0060@tc.umn.edu)
Date: Tue, 22 Oct 2002 00:56:20 +0200 (MET DST)
Subject: png printing (PR#2192)
Message-ID: <200210212256.AAA02294@pubhealth.ku.dk>

Full_Name: Kristian Eric Markon
Version: 1.6
OS: Win 98
Submission from: (NULL) (24.26.167.90)


I noticed sort of an odd bug when I was printing out figures to png files.

It's a bit difficult to explain how to reproduce exactly, because it depends on
a lot of data specific to my situation.

Basically, if I plot the figure to the screen, it looks exactly as it should. If
I plot the figure to jpeg, it looks exactly as it should. However, if I plot it
to a png, a plot appears, but various parameters (e.g., title, ylim, etc.) are
different. 

I can sometimes reproduce something that's somewhat similar through the
following:

temp = c("hi", "hey there", "whatcha doin")

plot(rnorm(100), rnorm(100), main=temp[3]) # should appear as one would expect

jpeg("c:/temp/temp.jpeg")
plot(rnorm(100), rnorm(100), main=temp[3]) # should appear as one would expect
dev.off()

png("c:/temp/temp.png")
plot(rnorm(100), rnorm(100), main=temp[3]) # either very small or no main title
dev.off()


It gets even more complicated with the plotting I'm doing, because, e.g., rather
than plotting a figure with no title, it will plot a title, but the wrong title.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark0060@tc.umn.edu  Mon Oct 21 23:57:59 2002
From: mark0060@tc.umn.edu (mark0060@tc.umn.edu)
Date: Tue, 22 Oct 2002 00:57:59 +0200 (MET DST)
Subject: png printing (PR#2193)
Message-ID: <200210212257.AAA02314@pubhealth.ku.dk>

Full_Name: Kristian Eric Markon
Version: 1.6
OS: Win 98
Submission from: (NULL) (24.26.167.90)


I noticed sort of an odd bug when I was printing out figures to png files.

It's a bit difficult to explain how to reproduce exactly, because it depends on
a lot of data specific to my situation.

Basically, if I plot the figure to the screen, it looks exactly as it should. If
I plot the figure to jpeg, it looks exactly as it should. However, if I plot it
to a png, a plot appears, but various parameters (e.g., title, ylim, etc.) are
different. 

I can sometimes reproduce something that's somewhat similar through the
following:

temp = c("hi", "hey there", "whatcha doin")

plot(rnorm(100), rnorm(100), main=temp[3]) # should appear as one would expect

jpeg("c:/temp/temp.jpeg")
plot(rnorm(100), rnorm(100), main=temp[3]) # should appear as one would expect
dev.off()

png("c:/temp/temp.png")
plot(rnorm(100), rnorm(100), main=temp[3]) # either very small or no main title
dev.off()


It gets even more complicated with the plotting I'm doing, because, e.g., rather
than plotting a figure with no title, it will plot a title, but the wrong title.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mark0060@tc.umn.edu  Tue Oct 22 00:37:13 2002
From: mark0060@tc.umn.edu (mark0060@tc.umn.edu)
Date: Tue, 22 Oct 2002 01:37:13 +0200 (MET DST)
Subject: png-oops (PR#2195)
Message-ID: <200210212337.BAA02422@pubhealth.ku.dk>

Full_Name: Kristian Markon
Version: 1.6
OS: Win 98
Submission from: (NULL) (24.26.167.90)


I just submitted a report on a png bug in R. I now think it's not an R bug, but
rather, a Mozilla bug or a windows bug. 

Anyway, if you're having trouble duplicating the bug, that's probably why.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Mark.Bravington@csiro.au  Tue Oct 22 00:41:39 2002
From: Mark.Bravington@csiro.au (Mark.Bravington@csiro.au)
Date: Tue, 22 Oct 2002 10:41:39 +1100
Subject: savehistory directories and quitting R (PR#2038)
Message-ID: <A8877251964B294BAB5BA1FC58B43FED025B4320@molly.tas.csiro.au>

Thanks-- as Duncan Murdoch also noted, R_HISTFILE can be used to solve my
problem, as below. BTW it's not easy to find out about R_HISTFILE in the
help system or manuals, though, unless you already know it exists-- it only
seems to be described under startup options, not things to do with history.

However, Duncan's reply did hint at an inconsistency, in that savehistory()
defaults to using a file called .Rhistory in getwd(), rather than using
R_HISTFILE. I've modified my savehistory to default to R_HISTFILE if it
exists, like so:

savehistory_ function( file) {
  if( missing( file) && is.null( file <- Sys.getenv( 'R_HISTFILE')))
    file <- '.Rhistory'
  get( 'savehistory', pos='package:base')( file)
}

#This is not a bug. If you override a system function, you 
#can't expect it
#to be used by R internals.  Indeed, as from 1.6.0 you can't 
#even expect it
#to be used by R's base functions, due to namespaces.

With an eye to namespace-like issues, I originally put some code in .First
to overwrite the version of savehistory within package:base, rather than
simply masking it with a copy in .GlobalEnv. But, since savehistory wasn't
actually called at quit time, even that didn't fool the system...

cheers
Mark

*******************************

Mark Bravington
CSIRO (CMIS)
PO Box 1538
Castray Esplanade
Hobart
TAS 7001

phone (61) 3 6232 5118
fax (61) 3 6232 5012
Mark.Bravington@csiro.au 

#-----Original Message-----
#From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
#Sent: Tuesday, 15 October 2002 12:31 AM
#To: Mark.Bravington@csiro.au
#Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
#Subject: Re: savehistory directories and quitting R (PR#2038)
#
#
#This is not a bug. If you override a system function, you 
#can't expect it
#to be used by R internals.  Indeed, as from 1.6.0 you can't 
#even expect it
#to be used by R's base functions, due to namespaces.
#
#There are very good reasons for the internal quit code not to 
#call user's
#R code, the main one being that R errors will not be handled then.
#.Last is made available as a hook to enable you to do what you want:
#as the help page says.
#
#Doesn't setting R_HISTFILE do this for you automatically? Just set
#R_HISTFILE="D:/R50/.Rhistory" and the history should be loaded 
#and saved
#to the specified place.  Works under Unix, at least.
#
#
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Tue Oct 22 05:56:50 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Mon, 21 Oct 2002 21:56:50 -0700
Subject: gcc-3.3
Message-ID: <AD09F904-E57A-11D6-85DD-000393860F3C@stat.ucla.edu>

I managed to build R-1.6.1 with gcc-3.3 from Apple CVS on Jaguar
(with the -bundle hack). It would be nice to add the -mdynamic-no-pic
flag when compiling code that goes into R.bin (i.e. into the
application). This supposedly can give a 10% speed increase with Mach-O
files. The default Jaguar compiler, gcc-3.1, already understands this
option, but gcc-2.95.2 does not.
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 22 07:53:18 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 22 Oct 2002 07:53:18 +0100 (BST)
Subject: savehistory directories and quitting R (PR#2038)
In-Reply-To: <A8877251964B294BAB5BA1FC58B43FED025B4320@molly.tas.csiro.au>
Message-ID: <Pine.LNX.4.31.0210220752210.22460-100000@gannet.stats>

On Tue, 22 Oct 2002 Mark.Bravington@csiro.au wrote:

> Thanks-- as Duncan Murdoch also noted, R_HISTFILE can be used to solve my
> problem, as below. BTW it's not easy to find out about R_HISTFILE in the
> help system or manuals, though, unless you already know it exists-- it only
> seems to be described under startup options, not things to do with history.
>
> However, Duncan's reply did hint at an inconsistency, in that savehistory()
> defaults to using a file called .Rhistory in getwd(), rather than using
> R_HISTFILE. I've modified my savehistory to default to R_HISTFILE if it
> exists, like so:

Yes, intentional.  Note that it is not R_HISTFILE used, but its value at
the beginning of the session ....

>
> savehistory_ function( file) {
>   if( missing( file) && is.null( file <- Sys.getenv( 'R_HISTFILE')))
>     file <- '.Rhistory'
>   get( 'savehistory', pos='package:base')( file)
> }
>
> #This is not a bug. If you override a system function, you
> #can't expect it
> #to be used by R internals.  Indeed, as from 1.6.0 you can't
> #even expect it
> #to be used by R's base functions, due to namespaces.
>
> With an eye to namespace-like issues, I originally put some code in .First
> to overwrite the version of savehistory within package:base, rather than
> simply masking it with a copy in .GlobalEnv. But, since savehistory wasn't
> actually called at quit time, even that didn't fool the system...
>
> cheers
> Mark
>
> *******************************
>
> Mark Bravington
> CSIRO (CMIS)
> PO Box 1538
> Castray Esplanade
> Hobart
> TAS 7001
>
> phone (61) 3 6232 5118
> fax (61) 3 6232 5012
> Mark.Bravington@csiro.au
>
> #-----Original Message-----
> #From: ripley@stats.ox.ac.uk [mailto:ripley@stats.ox.ac.uk]
> #Sent: Tuesday, 15 October 2002 12:31 AM
> #To: Mark.Bravington@csiro.au
> #Cc: r-devel@stat.math.ethz.ch; R-bugs@biostat.ku.dk
> #Subject: Re: savehistory directories and quitting R (PR#2038)
> #
> #
> #This is not a bug. If you override a system function, you
> #can't expect it
> #to be used by R internals.  Indeed, as from 1.6.0 you can't
> #even expect it
> #to be used by R's base functions, due to namespaces.
> #
> #There are very good reasons for the internal quit code not to
> #call user's
> #R code, the main one being that R errors will not be handled then.
> #.Last is made available as a hook to enable you to do what you want:
> #as the help page says.
> #
> #Doesn't setting R_HISTFILE do this for you automatically? Just set
> #R_HISTFILE="D:/R50/.Rhistory" and the history should be loaded
> #and saved
> #to the specified place.  Works under Unix, at least.
> #
> #
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue Oct 22 09:57:41 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Tue, 22 Oct 2002 10:57:41 +0200
Subject: RFC: Loading packages at startup
In-Reply-To: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
Message-ID: <15797.4869.19825.851756@galadriel.ci.tuwien.ac.at>


Brian,

Sounds great to me! I use something much simpler to emulate exactly
that feature using .First and .Last

>>>>> On Mon, 21 Oct 2002 21:24:45 +0100 (GMT Daylight Time),
>>>>> Prof Brian D Ripley (PBDR) wrote:

  > I've been kicking the following idea around for a while, and am now
  > proposing to put some version into 1.7.0.  I'd be interested in
  > comments on the desirability and the design, before I start writing
  > any code.



  > S4 introduced a file .S.chapters which can contain a list of S
  > chapters (equivalent to R packages) to be loaded on start-up.  This
  > was the germ of this proposal.

  > Proposal:

  > Extend the initialization as described in Startup.Rd by having
  > optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
  > the latter in the starting directory or failing that the user's home
  > directory. Each would contain a list of packages, one per line, to be
  > loaded when R is started, in the order in the files.

  > Some details:

[...]


  > 3) It would be useful to allow the library tree to be specified, as a
  >    second field on the line.

Or simply use paths? e.g.,

foo
/path/to/bar

could be read as

require(foo)
require(bar, lib="/path/to")


  > 4) One problem with saving an R session and then restoring it is that
  >    the packages in use are not reloaded.  Quitting an R session and
  >    saving could write .Rpackages in the current directory (with the
  >    library recorded if it were not the default).  Then restarting a
  >    session in that directory would restore the loaded packages
  >    automatically.

Yes, I do that for quite some time now (though my hacks were never
foolproof enough for public consumption).

  > 5) We might want to allow a .Rpackages file to override Rpackages.site
  >    (or we might not).

I think merging is better than overriding, especially in the light of
6.

  >    One idea is to allow a minus sign in front of a
  >    package name, and to merge the Rpackages.site and .Rpackages files
  >    before loading any packages.  If we did this we probably need to be
  >    able to save the list of packages to be loaded (and can't easily save
  >    those not to be loaded), so perhaps -- as the first list of .Rpackages
  >    should empty the list.

Sounds good, so lines starting with a minus sign are persistent and
the others get modified upon saving?



  > 6) One could argue for R_HOME/etc/Rpackages as the `system' file as
  >    well, and this might be useful if we break base up into smaller
  >    components.

  > 7) I would allow comment lines in the files, starting with #.

yes

  > 8) The file names or names could be set by environment variables.  It's
  >    strange that we allow the site file names for Rprofile and Renviron and
  >    the user file name for command histories to be set in that way.

Hmm, do we really need to be able to modify those? Makes writing docs
and debugging harder ...

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ted.Harding@nessie.mcc.ac.uk  Tue Oct 22 09:34:49 2002
From: Ted.Harding@nessie.mcc.ac.uk ( (Ted Harding))
Date: Tue, 22 Oct 2002 09:34:49 +0100 (BST)
Subject: RFC: Loading packages at startup
In-Reply-To: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
Message-ID: <XFMail.021022093449.Ted.Harding@nessie.mcc.ac.uk>

On 21-Oct-02 Prof Brian D Ripley wrote:
> [...]
> Proposal:
> 
> Extend the initialization as described in Startup.Rd by having
> optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
> the latter in the starting directory or failing that the user's home
> directory. Each would contain a list of packages, one per line, to be
> loaded when R is started, in the order in the files.

This would certainly be useful, especially (as in (4) below) when
resuming an analysis session.

> Some details:
> [...]
> 4) One problem with saving an R session and then restoring it is that
>    the packages in use are not reloaded.  Quitting an R session and
>    saving could write .Rpackages in the current directory (with the
>    library recorded if it were not the default).  Then restarting a
>    session in that directory would restore the loaded packages
>    automatically.

A comment from a practical user's viewpoint. I'm not sure of the value
of having this happen automatically. In practice I have a directory for
a dataset, only occasionally different sub-directories for different
analyses, and several different analyses might be done on that dataset.

If the above (4) were implemented as it stands, everything that was ever
loaded would be reloaded each time (if I understand right). It would be
better, perhaps, to allow flexibility (unless the overhead etc. of
loading un-needed packages could be ignored), and I can see two ways:

a) Offer a choice at startup between different ".Rpackages.XXX" where
"XXX" varies with the job and is mnemonic for the user (i.e. the user
chose it in the first place). I think this would also require the
implementation to query the user at quit time about what ".Rpackages.XXX"
should be called.

b) (More complicated and trickier to implement, more transparent
perhaps for the user, but maybe demanding too much foresight in
the implementation) the ".Rpackages" or equivalent would keep track in
some way of dependencies, so that if the user invoked a function which
had been used in a previous session, packages needed would be loaded
automatically.

Best wishes to all,
Ted.


--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding@nessie.mcc.ac.uk>
Fax-to-email: +44 (0)870 167 1972
Date: 22-Oct-02                                       Time: 09:34:49
------------------------------ XFMail ------------------------------
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 22 12:00:39 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 22 Oct 2002 12:00:39 +0100 (BST)
Subject: basename/dirname changes warning.
Message-ID: <Pine.GSO.4.44.0210221156150.6162-100000@auk.stats>

basename and dirname in R <= 1.6.1 are not vectorized, and they silently
ignored all elements after the first in their input.

This was not documented, and e.g. undoc assumed basename was vectorized.

For R-patched I have added a check, and giving an argument of length more
than one is there an error.

For R-devel I have vectorized the code, and so an input of length 0 will no
longer be an error.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Oct 22 13:29:54 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 22 Oct 2002 14:29:54 +0200
Subject: dist() {"mva" package} bug: treats +/- Inf as NA
In-Reply-To: <Pine.LNX.4.31.0210211738270.28813-100000@gannet.stats>
References: <15796.8283.220924.525706@gargle.gargle.HOWL>
 <Pine.LNX.4.31.0210211738270.28813-100000@gannet.stats>
Message-ID: <15797.17602.536992.851229@gargle.gargle.HOWL>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk>
>>>>>     on Mon, 21 Oct 2002 17:44:53 +0100 (BST) writes:

    BDR> I think this is definitely better left as is (and
    BDR> definitely so for 1.6.1), perhaps documenting the fact.

I don't agree. Whenever there's only one +/- Inf in a pair, the
result is well-defined for most metrics, (often = +Inf, but for Canberra).
The current behavior of silently treating Infs the same as NA is
not acceptable IMO.

Vincent's example was basically

   dist(1:4, c(1e10, 2:4))
vs
   dist(1:4, c(Inf, 2:4))

where the 2nd should be the "limit" of the first, or at the
least should not silently give the equivalent of
   dist(1:4, c(NA, 2:4))

    BDR> 1.6.1), perhaps documenting the fact.  What is done
    BDR> seems quite sensible to me: you really can't have
    BDR> infinite values in an L_2 or L_1 space, and so
    BDR> Euclidean and L_1 (= Manhattan) distances are not
    BDR> defined.

    BDR> One could argue for just one infinity point, 
you mean, when for a scalar pair, one is +/- Inf, the other not?
Yes, this is exactly my point.

    BDR> with zero distance between infinity points and infinite to all
    BDR> finite points, for example (and NA to missing values).

    BDR> It really isn't just one answer.

I think it's not hard to do the right thing in the cases where
that's well defined (e.g. when there's at most one Inf per pair),
and
use the current behavior {dropping a pair} in the other
cases, namely in exactly those where IEEE-arithmetic (excuse the
misnomer) would return a NaN.

Martin

    BDR> On Mon, 21 Oct 2002, Martin Maechler wrote:

    >> Vince Carey found this (thank you!).
    >> Since the fix to the problem is not entirely obvious, I post
    >> this to R-devel as RFC:
    >> 
    >> help(dist)  says:
    >> 
    >> >>  Missing values are allowed, and are excluded from all computations
    >> >>  involving the rows within which they occur.  If some columns are
    >> >>  excluded in calculating a Euclidean, Manhattan or Canberra
    >> >>  distance, the sum is scaled up proportionally to the number of
    >> >>  columns used. If all pairs are excluded when calculating a
    >> >>  particular distance, the value is `NA'.
    >> 
    >> but the C code in  ....../src/library/mva/src/distance.c,
    >> has, e.g. for the Euclidean distance :
    >> 
    >> count= 0;
    >> dist = 0;
    >> for(j = 0 ; j < nc ; j++) {
    >> if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
    >> dev = (x[i1] - x[i2]);
    >> dist += dev * dev;
    >> count++;
    >> }
    >> i1 += nr;
    >> i2 += nr;
    >> }
    >> if(count == 0) return NA_REAL;
    >> if(count != nc) dist /= ((double)count/nc);
    >> return sqrt(dist);
    >> 
    >> where it is clear that "R_FINITE(*)" should in principle be
    >> replaced by  "!ISNAN(*)".
    >> 
    >> Note however that "Inf - Inf -> NaN" and e.g the canberra metric
    >> has more ways to get "NaN".
    >> 
    >> The current code drops all pairs with an +-Inf in it.
    >> I would be inclined to really replace
    >> if(R_FINITE(x[i1]) && R_FINITE(x[i2])) {
    >> by
    >> if(!ISNAN(x[i1])   && !ISNAN(x[i2])) {
    >> 
    >> for all metrics -- for R-patched.
    >> 
    >> But I'd also see reasons where we'd want to be smarter/different
    >> than that. One possibility would be to drop the pair (as
    >> currently) also when both are not finite,
    >> for "binary" to signal an error for +- Inf,
    >> and for "Canberra" :
    >> Of course,  d =  |x - y| / |x + y|
    >> will be 1 , when one of {x,y} is infinite.
    >> This could be considered the desired answser, or also
    >> we may give a warning in any case.
    >> 
    >> Opinions?
    >> 
    >> 
    >> Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
    >> Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
    >> ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
    >> phone: x-41-1-632-3408		fax: ...-1228			<><

    BDR> -- 
    BDR> Brian D. Ripley,                  ripley@stats.ox.ac.uk
    BDR> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
    BDR> University of Oxford,             Tel:  +44 1865 272861 (self)
    BDR> 1 South Parks Road,                     +44 1865 272860 (secr)
    BDR> Oxford OX1 3TG, UK                Fax:  +44 1865 272595













-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Tue Oct 22 13:47:30 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Tue, 22 Oct 2002 08:47:30 -0400
Subject: RFC: Loading packages at startup
In-Reply-To: <15797.4869.19825.851756@galadriel.ci.tuwien.ac.at>; from Friedrich.Leisch@ci.tuwien.ac.at on Tue, Oct 22, 2002 at 10:57:41AM +0200
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel> <15797.4869.19825.851756@galadriel.ci.tuwien.ac.at>
Message-ID: <20021022084730.Z27564@jimmy.harvard.edu>

A not unrelated idea is to supply user settable hooks for save and
load. Which I am slowly working on.
When objects are saved we can probe them for their classes and then 
insert code into the saved image that will attempt to reload the
appropriate libraries when the image (or XDR file) is reloaded.
There will be a user interface to add other functions etc.

It might be worth thinking about the ability to manipulate Rpackages
objects from within R. Eg, a user can view, add or remove functions
(or expressions). 
I think making the elements function calls will give you more flexibility
in the long run.
In some ways patterning it along the lines of
on.exit may lead to less confusion.
On the otherhand, simply listing the packages is likely to be easiest.
Even in that case it would be nice to let the user have some control 
short of editing files.



On Tue, Oct 22, 2002 at 10:57:41AM +0200, Friedrich.Leisch@ci.tuwien.ac.at wrote:
> 
> Brian,
> 
> Sounds great to me! I use something much simpler to emulate exactly
> that feature using .First and .Last
> 
> >>>>> On Mon, 21 Oct 2002 21:24:45 +0100 (GMT Daylight Time),
> >>>>> Prof Brian D Ripley (PBDR) wrote:
> 
>   > I've been kicking the following idea around for a while, and am now
>   > proposing to put some version into 1.7.0.  I'd be interested in
>   > comments on the desirability and the design, before I start writing
>   > any code.
> 
> 
> 
>   > S4 introduced a file .S.chapters which can contain a list of S
>   > chapters (equivalent to R packages) to be loaded on start-up.  This
>   > was the germ of this proposal.
> 
>   > Proposal:
> 
>   > Extend the initialization as described in Startup.Rd by having
>   > optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
>   > the latter in the starting directory or failing that the user's home
>   > directory. Each would contain a list of packages, one per line, to be
>   > loaded when R is started, in the order in the files.
> 
>   > Some details:
> 
> [...]
> 
> 
>   > 3) It would be useful to allow the library tree to be specified, as a
>   >    second field on the line.
> 
> Or simply use paths? e.g.,
> 
> foo
> /path/to/bar
> 
> could be read as
> 
> require(foo)
> require(bar, lib="/path/to")
> 
> 
>   > 4) One problem with saving an R session and then restoring it is that
>   >    the packages in use are not reloaded.  Quitting an R session and
>   >    saving could write .Rpackages in the current directory (with the
>   >    library recorded if it were not the default).  Then restarting a
>   >    session in that directory would restore the loaded packages
>   >    automatically.
> 
> Yes, I do that for quite some time now (though my hacks were never
> foolproof enough for public consumption).
> 
>   > 5) We might want to allow a .Rpackages file to override Rpackages.site
>   >    (or we might not).
> 
> I think merging is better than overriding, especially in the light of
> 6.
> 
>   >    One idea is to allow a minus sign in front of a
>   >    package name, and to merge the Rpackages.site and .Rpackages files
>   >    before loading any packages.  If we did this we probably need to be
>   >    able to save the list of packages to be loaded (and can't easily save
>   >    those not to be loaded), so perhaps -- as the first list of .Rpackages
>   >    should empty the list.
> 
> Sounds good, so lines starting with a minus sign are persistent and
> the others get modified upon saving?
> 
> 
> 
>   > 6) One could argue for R_HOME/etc/Rpackages as the `system' file as
>   >    well, and this might be useful if we break base up into smaller
>   >    components.
> 
>   > 7) I would allow comment lines in the files, starting with #.
> 
> yes
> 
>   > 8) The file names or names could be set by environment variables.  It's
>   >    strange that we allow the site file names for Rprofile and Renviron and
>   >    the user file name for command histories to be set in that way.
> 
> Hmm, do we really need to be able to modify those? Makes writing docs
> and debugging harder ...
> 
> Best,
> Fritz
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B20
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Tom" <teacher_tom_dot_com@yahoo.com  Tue Oct 22 14:24:50 2002
From: Tom" <teacher_tom_dot_com@yahoo.com (Tom)
Date: Tue, 22 Oct 2002 21:24:50 +0800
Subject: No subject
Message-ID: <E183z1f-0005kr-00@bernie.ethz.ch>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Oct 22 14:46:40 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 22 Oct 2002 09:46:40 -0400
Subject: Loading packages at startup
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149D0EF@groexmb02.pfizer.com>



> 4) One problem with saving an R session and then restoring it is that
>    the packages in use are not reloaded.  Quitting an R session and
>    saving could write .Rpackages in the current directory (with the
>    library recorded if it were not the default).  Then restarting a
>    session in that directory would restore the loaded packages
>    automatically.


I've been using another approach for this.   For the R + Zope tools that
I've developed here (Yes, they will be released once I finally get through
all the red tape!) I needed a way to store all of the information about a
session, including loaded packages and the search path.

At the end of this message, I list two functions, save.session() and
load.session() which I wrote to accomplish this.  In addition, I have an .Rd
documentation file for them, and can provide that if anyone is interested.

The functions save.session() records the list of loaded packages into a
variable named ".save.session.packages" which is then saved as part of
save.image().   The load.session() function then uses load() to reload the
saved image and uses the ".save.session.packages" function to reload the
packages.  A similar thing happens for the search path.   This works well
and seems less hazard-prone than overwriting the users '.Rpackages' file for
two reasons:  1) the loaded package list and search path are preserved with
the data, and 2) we aren't messing with the user's files...

One enhancement that would be desirable is to allow the user to request that
the search path or the packages not be restored.  Of course, both can be
avoided by just using load() instead of load.session() on the data file.

-Greg

save.session <- function(file=".RSession",...)
  {
    if(!is.null(dev.list()))
       warning("Open graphics devices will not be saved or restored.")

    cat("Saving search path..\n")
    .save.session.search <<- search()
    
    cat("Saving list of loaded packages..\n")
    .save.session.packages <<- .packages()
   
    cat("Saving all data...\n")
    save(list=ls(envir = .GlobalEnv, all.names = TRUE), file=file, ...)
    cat("Done.\n")
  }

restore.session <- function(file=".RSession",...)
  {
    cat("Loading all data...\n")
    load(file,envir = .GlobalEnv,...)

    cat("Loading packages...\n")
    sapply( rev(.save.session.packages), library, character.only=T )

    cat("Restoring search path...\n")

    pad <- function(x,n) c( rep(NA,n-length(x)), x )
    
    current.search <- search()[-1]
    saved.search <- .save.session.search[-1]

    identical <- pad(current.search, length(saved.search)) == saved.search 
    
    for( i in saved.search[!identical] )
      {
        if( charmatch( "file:", i, nomatch=FALSE) )
          attach(sub( "file:", "", "file:test" ) )
        else if (charmatch( "package:", i, nomatch=FALSE)  )
          stop(paste("Somehow we missed loading package",i))
        else
          {
            do.call("attach",list(as.name(i)))
          }
               
      }

    rm(list=c(".save.session.packages",
              ".save.session.search"),
       envir = .GlobalEnv )
         
    
    cat("Done.\n")
  }    



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Oct 22 15:06:58 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 22 Oct 2002 10:06:58 -0400
Subject: Loading packages at startup
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149D0F3@groexmb02.pfizer.com>


Oh wow, just looking over this, I already see a bug.

This section of load.session():

>     for( i in saved.search[!identical] )
>       {
>         if( charmatch( "file:", i, nomatch=FALSE) )
>           attach(sub( "file:", "", "file:test" ) )
>         else if (charmatch( "package:", i, nomatch=FALSE)  )
>           stop(paste("Somehow we missed loading package",i))
>         else
>           {
>             do.call("attach",list(as.name(i)))
>           }
>                

should be

>     for( i in saved.search[!identical] )
>       {
>         if( charmatch( "file:", i, nomatch=FALSE) )
>           attach(sub( "file:", "", i ) )
>         else if (charmatch( "package:", i, nomatch=FALSE)  )
>           stop(paste("Somehow we missed loading package",i))
>         else
>           {
>             do.call("attach",list(as.name(i)))
>           }
>                

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From j.c.rougier@durham.ac.uk  Tue Oct 22 16:47:30 2002
From: j.c.rougier@durham.ac.uk (j.c.rougier@durham.ac.uk)
Date: Tue, 22 Oct 2002 17:47:30 +0200 (MET DST)
Subject: Minor changes in ?class (PR#2197)
Message-ID: <200210221547.RAA11854@pubhealth.ku.dk>

Hi everyone -- these are very minor. In the Arguments section of ?class,

1) it should read "an object" for x
2) "names" in Usage is not specified, it could be included along with 
"what", ie as

names,what: a character vector naming classes.

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 6.0
 year = 2002
 month = 10
 day = 01
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 22 16:52:40 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 22 Oct 2002 11:52:40 -0400
Subject: RFC: Loading packages at startup
References: <XFMail.021022093449.Ted.Harding@nessie.mcc.ac.uk>
Message-ID: <3DB57448.F3A60B32@bank-banque-canada.ca>

"(Ted Harding)" wrote:

> ... so that if the user invoked a function which
> had been used in a previous session, packages needed would be loaded

Am I correct in thinking the main need for this is for object
definitions that require a package, rather than for methods? I have the
impression that putting requires() in a function works fairly well. Or
is it needed because methods for the objects need to be available?


> A comment from a practical user's viewpoint. I'm not sure of the value
> of having this happen automatically. 

I wonder about this too. Especially since I seem to spend much more time
debugging code than I do actually using it. Should I be worrying about
something similar to the mixed blessing of .a and .so executables? What
happens when packages are updated, moved to new locations (as systems
administrators are prone to do), or things are moved (among packages or
in/out of base)? What happens when I want the version of a package I am
trying to debug, not the one that is installed? Should there be a
warning if the signature on a package does not match the one originally
used? 

I guess I would like to understand that this is a step forward in
software design, not simply a minor user convenience (and possibly a
headache for developers)? Sorry if I am a bit slow on some of these
things.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Oct 22 17:01:51 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Tue, 22 Oct 2002 17:01:51 +0100
Subject: methods function
Message-ID: <3DB5766F.40AF4AEF@durham.ac.uk>

Hi everyone,

I've noticed that the methods function is incomplete.  The obvious
example is if I write a function "$.foo", it is not picked up by
methods:

> "$.foo" <- function(object, name) get(name, envir=object[[1]])         
> "$<-.foo" <- function(object, name, value) {assign(name, value, envir=object[[1]]); object}
> happy <- structure(list(new.env()), class = "foo")
> happy$dog <- "fred"
> happy$dog
[1] "fred"
> methods("$")
character(0)

This happens to be an easy one to fix: simply replace the first argument
to gsub in the final line with "([.[$])".  But then I thought about the
bigger picture.  Don't we need to escape all (well, almost all) special
characters in the "name" variable inside methods?  For example, I might
want to class an object as "dopey$", which would not be wrong.  This
would mean a function like

"methods" <- function (generic.function, class) 
{
    an <- lapply(seq(along = (sp <- search())), ls)
    names(an) <- sp
    if (!missing(generic.function)) {
        if (!is.character(generic.function)) 
            generic.function <- deparse(substitute(generic.function))
        name <- paste(generic.function, ".", sep = "")
        name <- paste("^", gsub("([.[$])", "\\\\\\1", name), sep="")
    }
    else if (!missing(class)) {
        if (!is.character(class)) 
            class <- paste(deparse(substitute(class)))
        name <- paste(".", class, sep = "")
        name <- paste(gsub("([.[$])", "\\\\\\1", name), "$", sep="")
    }
    else stop("must supply generic.function or class")
    grep(name, unlist(an), value = TRUE)
}

but with more special characters, eg "^", inside the first arguments to
gsub.  Is this worth thinking about?

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Tue Oct 22 17:15:17 2002
From: rjvbertin@hotmail.com (rjvbertin@hotmail.com)
Date: Tue, 22 Oct 2002 18:15:17 +0200 (MET DST)
Subject: negative numbers in R plots in Illustrator 8 (and higher?) (PR#2199)
Message-ID: <200210221615.SAA12074@pubhealth.ku.dk>

Negative numbers in (encapsulated) postscript generated by R loose their sign when opened in Adobe Illustrator 8 (french). This was so in 1.5.x and remains in 1.6.0.

I suppose that this is a known issue, although it is rather a flaw in Illustrator than in R, if my analysis of it is correct. I sent a lengthy mail containing a solution (ISOLatin1Encoding has to be redefined) to the r-help mailing list, where it never arrived.

Is there any interest in that I retype it and send it here?

RenE Bertin.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 22 17:39:05 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 22 Oct 2002 17:39:05 +0100 (BST)
Subject: RFC: Loading packages at startup
In-Reply-To: <3DB57448.F3A60B32@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0210221732360.29174-100000@gannet.stats>

This is just one point in a proposal.  Clearly we need a switch to turn
re-loading off.

On Tue, 22 Oct 2002, Paul Gilbert wrote:

> "(Ted Harding)" wrote:
>
> > ... so that if the user invoked a function which
> > had been used in a previous session, packages needed would be loaded
>
> Am I correct in thinking the main need for this is for object
> definitions that require a package, rather than for methods? I have the
> impression that putting requires() in a function works fairly well. Or
> is it needed because methods for the objects need to be available?

The latter.  It also ensures that function conflicts are resolved
consistently.

> > A comment from a practical user's viewpoint. I'm not sure of the value
> > of having this happen automatically.
>
> I wonder about this too. Especially since I seem to spend much more time
> debugging code than I do actually using it. Should I be worrying about

That must be way out in the tail of R users, few of whom program at all.

> something similar to the mixed blessing of .a and .so executables? What
> happens when packages are updated, moved to new locations (as systems
> administrators are prone to do), or things are moved (among packages or
> in/out of base)? What happens when I want the version of a package I am
> trying to debug, not the one that is installed? Should there be a
> warning if the signature on a package does not match the one originally
> used?

Basically no problem:

Upgrades are no more problem than now.  (And now upgrading mclust can give
you a completely incompatible package, BTW.)

If a package is moved, then you would get a warning. But how often does
that happen?  Moving the R installation and the standad library would be
no problem as the location would be stored as `standard' in some way.

Versions are fine too, as the location would be recorded and you would get
the same version as last time (unles you moved it ...).

> I guess I would like to understand that this is a step forward in
> software design, not simply a minor user convenience (and possibly a
> headache for developers)? Sorry if I am a bit slow on some of these
> things.

It is a user convenience.  However, I think it makes life easier not
harder.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Oct 22 17:46:13 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Oct 2002 18:46:13 +0200
Subject: negative numbers in R plots in Illustrator 8 (and higher?) (PR#2199)
In-Reply-To: <200210221615.SAA12074@pubhealth.ku.dk>
References: <200210221615.SAA12074@pubhealth.ku.dk>
Message-ID: <x2znt6ctgq.fsf@biostat.ku.dk>

rjvbertin@hotmail.com writes:

> Negative numbers in (encapsulated) postscript generated by R loose
> their sign when opened in Adobe Illustrator 8 (french). This was so
> in 1.5.x and remains in 1.6.0.
> 
> I suppose that this is a known issue, although it is rather a flaw
> in Illustrator than in R, if my analysis of it is correct. I sent a
> lengthy mail containing a solution (ISOLatin1Encoding has to be
> redefined) to the r-help mailing list, where it never arrived.
> 
> Is there any interest in that I retype it and send it here?

First tell us your analysis... There is some weirdness with
hyphen-vs-minus in the ISOLatin1Encoding, which I at some point got
convinced that we're actually Doing According To Standards, weird as
it might seem. However, if Adobe themselves are getting it wrong, we
might reconsider our position.

I think it is Brian who has the scars from that particular battle.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rjvbertin@hotmail.com  Tue Oct 22 18:48:00 2002
From: rjvbertin@hotmail.com (RenE J.V. Bertin)
Date: Tue, 22 Oct 2002 19:48:00 +0200
Subject: negative numbers in R plots in Illustrator 8 (and higher?) (PR#2199)
In-Reply-To: <x2znt6ctgq.fsf@biostat.ku.dk>
References: <200210221615.SAA12074@pubhealth.ku.dk>
 <x2znt6ctgq.fsf@biostat.ku.dk>
Message-ID: <20021022194800.6982fee2.rjvbertin@hotmail.com>

On 22 Oct 2002 18:46:13 +0200, Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> wrote regarding "Re:
negative numbers in R plots in Illustrator 8 (and higher?) (PR#2199)"


8-) > Is there any interest in that I retype it and send it here?
8-) 
8-) First tell us your analysis... There is some weirdness with
8-) hyphen-vs-minus in the ISOLatin1Encoding, which I at some point got

	Indeed, it is that. Illustrator expects a hyphen at position 45, and not the minus that indeed appears to be the standard. ISO 1252 Latin 1 encoding does put the hyphen at that position.
There is not much difference between the hyphen and the minus glyphs; the former is slightly narrower than the latter. And it seems to be the hyphen that is generated by most keyboards.


8-) it might seem. However, if Adobe themselves are getting it wrong, we
8-) might reconsider our position.

	Well, there *is* some sort of issue with them. If the encoding calls for a minus, they should show it, and not silently ignore it! Or give a warning if the requested font doesn't have it.

Considering your position: just how easy is it to forget or overlook (the absence of) a sign? :)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tkeitt@mail.utexas.edu  Tue Oct 22 18:55:42 2002
From: tkeitt@mail.utexas.edu (Timothy H. Keitt)
Date: 22 Oct 2002 10:55:42 -0700
Subject: Loading packages at startup
In-Reply-To: <D7A3CFD7825BD6119B880002A58F06C20149D0EF@groexmb02.pfizer.com>
References: <D7A3CFD7825BD6119B880002A58F06C20149D0EF@groexmb02.pfizer.com>
Message-ID: <1035309342.1879.12.camel@dhcp94.nceas.ucsb.edu>

[Sorry, just noticed this thread and don't know what's been said
already, but I will comment nonetheless.]

I've also thought about this problem and I think we should be careful to
make sure its solved in a very general manner. Objects bind methods to
data, but this is broken when saving and reloading R sessions (only the
data ends up in .RData and not the bindings). What happens if someone
has multiple saved R sessions in a single directory? A single .Rpackages
file would either leave out packages or have to include all packages
across all sessions. I would far rather have a mechanism that recognizes
an object as an object and lets that object load the appropriate
bindings to methods at (re)instantiation. I once proposed that there be
function hooks in the save/load process that could be overloaded by
object type to make sure that any initializations (including package
loading) could be completed before attaching the data. This would also
allow for example database objects to reestablish their connections when
a session is reloaded from disk.

Tim

On Tue, 2002-10-22 at 06:46, Warnes, Gregory R wrote:
> 
> 
> > 4) One problem with saving an R session and then restoring it is that
> >    the packages in use are not reloaded.  Quitting an R session and
> >    saving could write .Rpackages in the current directory (with the
> >    library recorded if it were not the default).  Then restarting a
> >    session in that directory would restore the loaded packages
> >    automatically.
> 
> 
> I've been using another approach for this.   For the R + Zope tools that
> I've developed here (Yes, they will be released once I finally get through
> all the red tape!) I needed a way to store all of the information about a
> session, including loaded packages and the search path.
> 
> At the end of this message, I list two functions, save.session() and
> load.session() which I wrote to accomplish this.  In addition, I have an .Rd
> documentation file for them, and can provide that if anyone is interested.
> 
> The functions save.session() records the list of loaded packages into a
> variable named ".save.session.packages" which is then saved as part of
> save.image().   The load.session() function then uses load() to reload the
> saved image and uses the ".save.session.packages" function to reload the
> packages.  A similar thing happens for the search path.   This works well
> and seems less hazard-prone than overwriting the users '.Rpackages' file for
> two reasons:  1) the loaded package list and search path are preserved with
> the data, and 2) we aren't messing with the user's files...
> 
> One enhancement that would be desirable is to allow the user to request that
> the search path or the packages not be restored.  Of course, both can be
> avoided by just using load() instead of load.session() on the data file.
> 
> -Greg
> 
> save.session <- function(file=".RSession",...)
>   {
>     if(!is.null(dev.list()))
>        warning("Open graphics devices will not be saved or restored.")
> 
>     cat("Saving search path..\n")
>     .save.session.search <<- search()
>     
>     cat("Saving list of loaded packages..\n")
>     .save.session.packages <<- .packages()
>    
>     cat("Saving all data...\n")
>     save(list=ls(envir = .GlobalEnv, all.names = TRUE), file=file, ...)
>     cat("Done.\n")
>   }
> 
> restore.session <- function(file=".RSession",...)
>   {
>     cat("Loading all data...\n")
>     load(file,envir = .GlobalEnv,...)
> 
>     cat("Loading packages...\n")
>     sapply( rev(.save.session.packages), library, character.only=T )
> 
>     cat("Restoring search path...\n")
> 
>     pad <- function(x,n) c( rep(NA,n-length(x)), x )
>     
>     current.search <- search()[-1]
>     saved.search <- .save.session.search[-1]
> 
>     identical <- pad(current.search, length(saved.search)) == saved.search 
>     
>     for( i in saved.search[!identical] )
>       {
>         if( charmatch( "file:", i, nomatch=FALSE) )
>           attach(sub( "file:", "", "file:test" ) )
>         else if (charmatch( "package:", i, nomatch=FALSE)  )
>           stop(paste("Somehow we missed loading package",i))
>         else
>           {
>             do.call("attach",list(as.name(i)))
>           }
>                
>       }
> 
>     rm(list=c(".save.session.packages",
>               ".save.session.search"),
>        envir = .GlobalEnv )
>          
>     
>     cat("Done.\n")
>   }    
> 
> 
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-- 
Timothy H. Keitt
The University of Texas at Austin
Section of Integrative Biology
1 University Station C0930
Austin, Texas 78712-0253 USA
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 22 20:23:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 22 Oct 2002 20:23:41 +0100 (BST)
Subject: Loading packages at startup
In-Reply-To: <1035309342.1879.12.camel@dhcp94.nceas.ucsb.edu>
Message-ID: <Pine.LNX.4.31.0210222002180.29960-100000@gannet.stats>

On 22 Oct 2002, Timothy H. Keitt wrote:

> [Sorry, just noticed this thread and don't know what's been said
> already, but I will comment nonetheless.]

Actually this is a spin-off from a small point in an RFC posted earlier,
and I think it would have been kinder to have done your homework.
A serious proposal is getting sidetracked by half-formulated ways
(even buggy ones) to solve a related but different problem.

> I've also thought about this problem and I think we should be careful to
> make sure its solved in a very general manner. Objects bind methods to
> data, but this is broken when saving and reloading R sessions (only the
> data ends up in .RData and not the bindings). What happens if someone
> has multiple saved R sessions in a single directory? A single .Rpackages
> file would either leave out packages or have to include all packages
> across all sessions.

Eh?  Only one session is saved and reloaded in .RData per directory.
And we only have one .Rprofile and one .Renviron per directory.
So everyone I have ever seen uses separate directories for separate
projects.

If you go back and read the RFC, you will see the idea was that
users could specify the packages they wanted loaded (and in which order)
on a per-directory basis. *Or not.*  The idea of rewriting it at the end
of a session was just one of the possible extensions.

I would find this very useful, and although I could use .First (prone to
getting damaged) or .Rprofile I would prefer a separate mechanism. Not
least, I would like to use ~/.Rprofile for all my work (turn off
significance stars etc) and a per-directory .Rpackages.

> I would far rather have a mechanism that recognizes
> an object as an object and lets that object load the appropriate
> bindings to methods at (re)instantiation. I once proposed that there be

Not possible with S3 methods and loose inheritance. You cannot tell what
package the methods an object needs is in. Nor if it is in several can you
tell which one the user was preferring.  What we can do is to
restore the search list to (more or less) what it was at the end of the
last session, *if we want to*.

Nor is it possible to load packages arbitrarily, as the order does matter.

> function hooks in the save/load process that could be overloaded by
> object type to make sure that any initializations (including package
> loading) could be completed before attaching the data. This would also
> allow for example database objects to reestablish their connections when
> a session is reloaded from disk.

Again, not possible with S3 classes. I am not sure if it is possible with
formal methods as currently implemented, but it would need that sort of
metadata.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Wed Oct 23 01:53:11 2002
From: Bill.Venables@cmis.csiro.au (Bill.Venables@cmis.csiro.au)
Date: Wed, 23 Oct 2002 10:53:11 +1000
Subject: Loading packages at startup
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A916559C@Roper-CV.qld.cmis.csiro.au>

I hardly know what to say, other than this seems such a mild but useful
suggestion I find any opposition to it hard to imagine.

I say go for it.

Bill Venables.

-----Original Message-----
From: Prof Brian D Ripley [mailto:ripley@stats.ox.ac.uk]
Sent: Tuesday, October 22, 2002 6:25 AM
To: R-devel@stat.math.ethz.ch
Subject: RFC: Loading packages at startup


I've been kicking the following idea around for a while, and am now
proposing to put some version into 1.7.0.  I'd be interested in
comments on the desirability and the design, before I start writing
any code.

S4 introduced a file .S.chapters which can contain a list of S
chapters (equivalent to R packages) to be loaded on start-up.  This
was the germ of this proposal.

Proposal:

Extend the initialization as described in Startup.Rd by having
optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
the latter in the starting directory or failing that the user's home
directory. Each would contain a list of packages, one per line, to be
loaded when R is started, in the order in the files.

Some details:

1) I think the packages should be loaded before .Rprofile and .RData
   are processed, and R_HOME/etc/Rpackages.site before .Rpackages.
   This can be argued, and the S4 parallel would seem to be to load
   packages after S.init (the nearest it has to Rprofile).  But we
   would load library/base/Rprofile first of all so the analogy is not
   close.

2) The present kludge of loading ctest in .First could be replaced
   by making ctest the default content of R_HOME/etc/Rpackages.site
   (in the light of point 5).

3) It would be useful to allow the library tree to be specified, as a
   second field on the line.

4) One problem with saving an R session and then restoring it is that
   the packages in use are not reloaded.  Quitting an R session and
   saving could write .Rpackages in the current directory (with the
   library recorded if it were not the default).  Then restarting a
   session in that directory would restore the loaded packages
   automatically.

5) We might want to allow a .Rpackages file to override Rpackages.site
   (or we might not).  One idea is to allow a minus sign in front of a
   package name, and to merge the Rpackages.site and .Rpackages files
   before loading any packages.  If we did this we probably need to be
   able to save the list of packages to be loaded (and can't easily save
   those not to be loaded), so perhaps -- as the first list of .Rpackages
   should empty the list.

6) One could argue for R_HOME/etc/Rpackages as the `system' file as
   well, and this might be useful if we break base up into smaller
   components.

7) I would allow comment lines in the files, starting with #.

8) The file names or names could be set by environment variables.  It's
   strange that we allow the site file names for Rprofile and Renviron and
   the user file name for command histories to be set in that way.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Wed Oct 23 08:08:08 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 23 Oct 2002 00:08:08 -0700
Subject: R-1.6.1 with gcc-3.3
Message-ID: <2F51FBDA-E656-11D6-A71E-000393860F3C@stat.ucla.edu>

This is probably only interesting to zero or one or two persons.

gcc-3.3 from Apple's CVS does not handle the -bundle flag properly.

I had to hack configure.ac, which now has

shlib_ldflags="-nostdlib /usr/lib/bundle1.o -Wl,-bundle  
-Wl,-bundle_loader,/usr/local/lib/R/bin/R.bin -lgcc" ;;

LIBR_LDFLAGS="-dynamiclib -install_name \$(Rexeclibdir)/libR.dylib  
-framework Carbon"

i.e. I have also switched over to two-level namespaces. If the
-bundle flag is fixed, the first one will simply become

shlib_ldflags="-bundle -bundle_loader /usr/local/lib/R/bin/R.bin"

For those of you with accounts on gifi, I will upgrade the
gcc-3.3, which you get by putting /usr/local/bin at the beginning of
your PATH. gifi (a 450Mhz Cube) now runs OS X 10.2.2 (build 6F14).
It will soon get a CPU upgrade to dual 850Mhz.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Wed Oct 23 20:16:55 2002
From: deepayansarkar@yahoo.com (Deepayan Sarkar)
Date: Wed, 23 Oct 2002 12:16:55 -0700 (PDT)
Subject: New version of lattice (possible incompatibility with old code)
Message-ID: <20021023191655.89793.qmail@web13902.mail.yahoo.com>


Hi,

there's a new version of lattice on CRAN (0.6-5) which will probably ship with
R 1.6.1. It has a minor change in API which might affect packages using lattice
-- only if they define panel/prepanel functions of their own. In previous
versions, it was implicitly assumed that panel (and prepanel) functions would
only be supplied _numeric_ x,y,z arguments, although I don't remember this as
being documented. This has changed in the new version (mostly to allow
rudimentary POSIXt labelling and other possible improvements in future). This
is actually used only in prepanel functions right now, and all predefined panel
functions in lattice have only been modified to have 

x <- as.numeric(x)

etc in the very beginning. This should fix any problems elsewhere as well.

If prepanel functions need to be redefined, prepanel.default.xyplot and
prepanel.default.bwplot should serve as templates. Lines like 

x <- as.numeric(x) 

should revert to old behaviour here too.

Deepayan


__________________________________________________

 the expert host your web site

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rpeng@stat.ucla.edu  Wed Oct 23 20:55:07 2002
From: rpeng@stat.ucla.edu (Roger Peng)
Date: Wed, 23 Oct 2002 12:55:07 -0700 (PDT)
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
In-Reply-To: <Pine.LNX.4.31.0210162038360.2159-100000@gannet.stats>
Message-ID: <Pine.GSO.4.10.10210231251570.13575-100000@fisher.stat.ucla.edu>

I noticed this on the GCC website, regarding the not-yet-released gcc
3.2.1:

* The method of constructing the list of directories to be searched for
header files has been revised. If a directory named by a -I option is a
standard system include directory, the option is ignored to ensure that
the default search order for system directories and the special treatment
of system header files are not defeated.

-roger
_______________________________
UCLA Department of Statistics
rpeng@stat.ucla.edu
http://www.stat.ucla.edu/~rpeng

On Wed, 16 Oct 2002, ripley@stats.ox.ac.uk wrote:

> This has been discussed on R-devel, and it is definitely not an R bug
> as there are workarounds stated in the R-admin manual.
> 
> Setting CPPFLAGS= (nothing) does avoid this except in the gnome module. It
> was intended to put that explicitly in the R-admin manual for 1.6.0, but
> it was not done in time (it is now there for R-patched).
> 
> We are told that this is fixed in the alphas of gcc 3.3.  Once it is clear
> exactly which versions of gcc are affected we may add a workaround in the
> configure script.
> 
> On Wed, 16 Oct 2002 rjvbertin@hotmail.com wrote:
> 
> > There is an incompatibility between R's configure/build process, and gcc 3.2.0 (and maybe earlier).
> > Gcc 3.2.0 includes -I/usr/local/include by default, on my system (default configuration), and cpp0
> > issues a warning when this flag is issued additionally by the user (= R's configure). This warning
> > ends up in the dependency sections of the Makefile that are generated "automagically". The 1st
> > occurrence is line 105 of src/appl/Makefile .
> >
> > The only way around it that I found, other than removing all -I/usr/local/include in all Makefiles is to manually add
> > -Wp,-w, a gcc/cpp argument that suppresses all cpp warnings. It also has the effect of not aborting
> > a compilation as soon as a specified header file is *not* found :(
> > If you decide to leave -I/usr/local/include and add -Wp,-w for gcc 3 compilers, I would suggest
> > *not* adding -Wp,-w if -fsyntax-only is also given, to not interfere with requested syntax-checking.
> > (that would probably require to call the compiler from a wrapper script, something I already do.)
> >
> > Rene Bertin
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Wed Oct 23 21:42:25 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 23 Oct 2002 13:42:25 -0700
Subject: configure/build issue with gcc 3.2.0 (PR#2176)
In-Reply-To: <Pine.GSO.4.10.10210231251570.13575-100000@fisher.stat.ucla.edu>
Message-ID: <EFE6A9B8-E6C7-11D6-BA4F-003065A21C86@stat.ucla.edu>

Yes, there are no longer warnings in gcc-3.3

On Wednesday, Oct 23, 2002, at 12:55 US/Pacific, Roger Peng wrote:

> I noticed this on the GCC website, regarding the not-yet-released gcc
> 3.2.1:
>
> * The method of constructing the list of directories to be searched for
> header files has been revised. If a directory named by a -I option is a
> standard system include directory, the option is ignored to ensure that
> the default search order for system directories and the special  
> treatment
> of system header files are not defeated.
>
> -roger
> _______________________________
> UCLA Department of Statistics
> rpeng@stat.ucla.edu
> http://www.stat.ucla.edu/~rpeng
>
> On Wed, 16 Oct 2002, ripley@stats.ox.ac.uk wrote:
>
>> This has been discussed on R-devel, and it is definitely not an R bug
>> as there are workarounds stated in the R-admin manual.
>>
>> Setting CPPFLAGS= (nothing) does avoid this except in the gnome  
>> module. It
>> was intended to put that explicitly in the R-admin manual for 1.6.0,  
>> but
>> it was not done in time (it is now there for R-patched).
>>
>> We are told that this is fixed in the alphas of gcc 3.3.  Once it is  
>> clear
>> exactly which versions of gcc are affected we may add a workaround in  
>> the
>> configure script.
>>
>> On Wed, 16 Oct 2002 rjvbertin@hotmail.com wrote:
>>
>>> There is an incompatibility between R's configure/build process, and  
>>> gcc 3.2.0 (and maybe earlier).
>>> Gcc 3.2.0 includes -I/usr/local/include by default, on my system  
>>> (default configuration), and cpp0
>>> issues a warning when this flag is issued additionally by the user  
>>> (= R's configure). This warning
>>> ends up in the dependency sections of the Makefile that are  
>>> generated "automagically". The 1st
>>> occurrence is line 105 of src/appl/Makefile .
>>>
>>> The only way around it that I found, other than removing all  
>>> -I/usr/local/include in all Makefiles is to manually add
>>> -Wp,-w, a gcc/cpp argument that suppresses all cpp warnings. It also  
>>> has the effect of not aborting
>>> a compilation as soon as a specified header file is *not* found :(
>>> If you decide to leave -I/usr/local/include and add -Wp,-w for gcc 3  
>>> compilers, I would suggest
>>> *not* adding -Wp,-w if -fsyntax-only is also given, to not interfere  
>>> with requested syntax-checking.
>>> (that would probably require to call the compiler from a wrapper  
>>> script, something I already do.)
>>>
>>> Rene Bertin
>>>
>>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
>>> .-.-.-.-.-.-
>>> r-devel mailing list -- Read  
>>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>>> Send "info", "help", or "[un]subscribe"
>>> (in the "body", not the subject !)  To:  
>>> r-devel-request@stat.math.ethz.ch
>>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
>>> ._._._._._
>>>
>>
>> -- 
>> Brian D. Ripley,                  ripley@stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272860 (secr)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
>> .-.-.-.-.-
>> r-devel mailing list -- Read  
>> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To:  
>> r-devel-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._. 
>> _._._._._
>>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>
>
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics
US mail: 8142 Math Sciences Bldg, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
                  www: http://www.stat.ucla.edu/~deleeuw
======================================================================== 
====
          Remember, wherever you go, there you are. --- Buckaroo Banzai
======================================================================== 
====

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Glenn.Stone@csiro.au  Thu Oct 24 05:33:05 2002
From: Glenn.Stone@csiro.au (Glenn.Stone@csiro.au)
Date: Thu, 24 Oct 2002 06:33:05 +0200 (MET DST)
Subject: model.matrix (via predict) (PR#2206)
Message-ID: <200210240433.GAA24513@pubhealth.ku.dk>

Full_Name: Glenn Stone
Version: 1.5.1 and 1.6.0
OS: win2000
Submission from: (NULL) (168.140.227.9)


The following code produces incorrect fitted values in version 1.5.1 and an
error in 1.6.0 

   Error in "contrasts<-"(*tmp*, value = "contr.treatment") : 
           contrasts apply only to factors
   In addition: Warning message: 
   variable ihalf is not a factor in: model.frame.default(object, data, xlev =
xlev) 

The problem in 1.5.1 seems to be model.matrix return inconsistently ordered
interaction terms. There are abviously several work arounds.


### Start of example
dfr <- expand.grid(i=0:154,j=0:154)
dfr <- dfr[with(dfr,i+j<=154),]

dfr$logj <- with(dfr,log(j+0.5))
dfr$jmin6 <- with(dfr, pmin(j,6))
dfr$ihalf <- with(dfr, factor(floor(i/6)))
dfr$i100 <- with(dfr, ifelse(i<100,1,0))
dfr$j0 <- with(dfr, ifelse(j==0,1,0))

Ai <- runif(length(levels(dfr$ihalf)))
Ai <- Ai-Ai[1]
Bi <- runif(length(levels(dfr$ihalf)))
Bi <- (Bi-Bi[1])/10

eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
            + 0.01*jmin6+Ai[as.numeric(ihalf)]
            +Bi[as.numeric(ihalf)]*jmin6)

dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
                                            
gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
          data=dfr,
          family=poisson)

plot(predict(gg),predict(gg,newdata=dfr))
### End of example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Thu Oct 24 07:29:59 2002
From: Bill.Venables@cmis.csiro.au (Bill.Venables@cmis.csiro.au)
Date: Thu, 24 Oct 2002 16:29:59 +1000
Subject: model.matrix (via predict) (PR#2206)
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A91655B6@Roper-CV.qld.cmis.csiro.au>

I'm not sure what Glenn's "obvious" workarounds are, but if you fit the
model in the equivalent and more conventional form:

gg <- glm(clms ~ logj + i100*j0 + ihalf*jmin6, data=dfr, family=poisson)

The predict(gg, newdata = dfr) step now works fine (for me, Windows 2000, R
1.6.0).

I present this in the hope someone can use it as a clue to find out what's
going on.  Sorry, I don't have time to do it myself.

Bill Venables.


-----Original Message-----
From: Glenn.Stone@csiro.au [mailto:Glenn.Stone@csiro.au]
Sent: Thursday, October 24, 2002 2:33 PM
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: model.matrix (via predict) (PR#2206)


Full_Name: Glenn Stone
Version: 1.5.1 and 1.6.0
OS: win2000
Submission from: (NULL) (168.140.227.9)


The following code produces incorrect fitted values in version 1.5.1 and an
error in 1.6.0 

   Error in "contrasts<-"(*tmp*, value = "contr.treatment") : 
           contrasts apply only to factors
   In addition: Warning message: 
   variable ihalf is not a factor in: model.frame.default(object, data, xlev
=
xlev) 

The problem in 1.5.1 seems to be model.matrix return inconsistently ordered
interaction terms. There are abviously several work arounds.


### Start of example
dfr <- expand.grid(i=0:154,j=0:154)
dfr <- dfr[with(dfr,i+j<=154),]

dfr$logj <- with(dfr,log(j+0.5))
dfr$jmin6 <- with(dfr, pmin(j,6))
dfr$ihalf <- with(dfr, factor(floor(i/6)))
dfr$i100 <- with(dfr, ifelse(i<100,1,0))
dfr$j0 <- with(dfr, ifelse(j==0,1,0))

Ai <- runif(length(levels(dfr$ihalf)))
Ai <- Ai-Ai[1]
Bi <- runif(length(levels(dfr$ihalf)))
Bi <- (Bi-Bi[1])/10

eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
            + 0.01*jmin6+Ai[as.numeric(ihalf)]
            +Bi[as.numeric(ihalf)]*jmin6)

dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
                                            
gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
          data=dfr,
          family=poisson)

plot(predict(gg),predict(gg,newdata=dfr))
### End of example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Glenn.Stone@csiro.au  Thu Oct 24 07:52:34 2002
From: Glenn.Stone@csiro.au (Glenn.Stone@csiro.au)
Date: Thu, 24 Oct 2002 16:52:34 +1000
Subject: model.matrix (via predict) (PR#2206)
Message-ID: <FC026A0F0EE43E42A6EE465E2C7FFF780161448B@coxs-nh.nsw.cmis.CSIRO.AU>

 
In my actual application (this is a dummy) i100 is confounded with ihalf, so
I don't fit its main effect  I guess I(i100*j0) would work?
-----Original Message-----
From: Venables, Bill (CMIS, Cleveland)
To: Stone, Glenn (CMIS, North Ryde); r-devel@stat.math.ethz.ch
Sent: 24/10/2002 4:29 PM
Subject: RE: model.matrix (via predict) (PR#2206)

I'm not sure what Glenn's "obvious" workarounds are, but if you fit the
model in the equivalent and more conventional form:

gg <- glm(clms ~ logj + i100*j0 + ihalf*jmin6, data=dfr, family=poisson)

The predict(gg, newdata = dfr) step now works fine (for me, Windows
2000, R 1.6.0).

I present this in the hope someone can use it as a clue to find out
what's going on.  Sorry, I don't have time to do it myself.

Bill Venables.


-----Original Message-----
From: Glenn.Stone@csiro.au [mailto:Glenn.Stone@csiro.au]
Sent: Thursday, October 24, 2002 2:33 PM
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: model.matrix (via predict) (PR#2206)


Full_Name: Glenn Stone
Version: 1.5.1 and 1.6.0
OS: win2000
Submission from: (NULL) (168.140.227.9)


The following code produces incorrect fitted values in version 1.5.1 and
an
error in 1.6.0 

   Error in "contrasts<-"(*tmp*, value = "contr.treatment") : 
           contrasts apply only to factors
   In addition: Warning message: 
   variable ihalf is not a factor in: model.frame.default(object, data,
xlev =
xlev) 

The problem in 1.5.1 seems to be model.matrix return inconsistently
ordered
interaction terms. There are abviously several work arounds.


### Start of example
dfr <- expand.grid(i=0:154,j=0:154)
dfr <- dfr[with(dfr,i+j<=154),]

dfr$logj <- with(dfr,log(j+0.5))
dfr$jmin6 <- with(dfr, pmin(j,6))
dfr$ihalf <- with(dfr, factor(floor(i/6)))
dfr$i100 <- with(dfr, ifelse(i<100,1,0))
dfr$j0 <- with(dfr, ifelse(j==0,1,0))

Ai <- runif(length(levels(dfr$ihalf)))
Ai <- Ai-Ai[1]
Bi <- runif(length(levels(dfr$ihalf)))
Bi <- (Bi-Bi[1])/10

eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
            + 0.01*jmin6+Ai[as.numeric(ihalf)]
            +Bi[as.numeric(ihalf)]*jmin6)

dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
                                            
gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
          data=dfr,
          family=poisson)

plot(predict(gg),predict(gg,newdata=dfr))
### End of example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-.-
r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Thu Oct 24 08:28:50 2002
From: Bill.Venables@cmis.csiro.au (Bill.Venables@cmis.csiro.au)
Date: Thu, 24 Oct 2002 17:28:50 +1000
Subject: model.matrix (via predict) (PR#2206)
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A91655BA@Roper-CV.qld.cmis.csiro.au>

Glenn,

I suspect that I(i100*j0) will not work, actually.  It certainly won't work
if either of them are factors, since multiplication, (i.e. the arithmethic
"*" as opposed to the linear model formula "*" operator) is explicitly
inhibited for factors.

Even if one is confounded within the other, there is no reason to omit the
main effect.  Both glm and aov will detect that and silently omit the
confounded term.  You could also use a/b, of course, and my guess is that
works as well.

Cheers,
Bill.

-----Original Message-----
From: Stone, Glenn (CMIS, North Ryde) 
Sent: Thursday, October 24, 2002 4:53 PM
To: Venables, Bill (CMIS, Cleveland); 'r-devel@stat.math.ethz.ch '
Subject: RE: model.matrix (via predict) (PR#2206)


 
In my actual application (this is a dummy) i100 is confounded with ihalf, so
I don't fit its main effect  I guess I(i100*j0) would work?
-----Original Message-----
From: Venables, Bill (CMIS, Cleveland)
To: Stone, Glenn (CMIS, North Ryde); r-devel@stat.math.ethz.ch
Sent: 24/10/2002 4:29 PM
Subject: RE: model.matrix (via predict) (PR#2206)

I'm not sure what Glenn's "obvious" workarounds are, but if you fit the
model in the equivalent and more conventional form:

gg <- glm(clms ~ logj + i100*j0 + ihalf*jmin6, data=dfr, family=poisson)

The predict(gg, newdata = dfr) step now works fine (for me, Windows
2000, R 1.6.0).

I present this in the hope someone can use it as a clue to find out
what's going on.  Sorry, I don't have time to do it myself.

Bill Venables.


-----Original Message-----
From: Glenn.Stone@csiro.au [mailto:Glenn.Stone@csiro.au]
Sent: Thursday, October 24, 2002 2:33 PM
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: model.matrix (via predict) (PR#2206)


Full_Name: Glenn Stone
Version: 1.5.1 and 1.6.0
OS: win2000
Submission from: (NULL) (168.140.227.9)


The following code produces incorrect fitted values in version 1.5.1 and
an
error in 1.6.0 

   Error in "contrasts<-"(*tmp*, value = "contr.treatment") : 
           contrasts apply only to factors
   In addition: Warning message: 
   variable ihalf is not a factor in: model.frame.default(object, data,
xlev =
xlev) 

The problem in 1.5.1 seems to be model.matrix return inconsistently
ordered
interaction terms. There are abviously several work arounds.


### Start of example
dfr <- expand.grid(i=0:154,j=0:154)
dfr <- dfr[with(dfr,i+j<=154),]

dfr$logj <- with(dfr,log(j+0.5))
dfr$jmin6 <- with(dfr, pmin(j,6))
dfr$ihalf <- with(dfr, factor(floor(i/6)))
dfr$i100 <- with(dfr, ifelse(i<100,1,0))
dfr$j0 <- with(dfr, ifelse(j==0,1,0))

Ai <- runif(length(levels(dfr$ihalf)))
Ai <- Ai-Ai[1]
Bi <- runif(length(levels(dfr$ihalf)))
Bi <- (Bi-Bi[1])/10

eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
            + 0.01*jmin6+Ai[as.numeric(ihalf)]
            +Bi[as.numeric(ihalf)]*jmin6)

dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
                                            
gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
          data=dfr,
          family=poisson)

plot(predict(gg),predict(gg,newdata=dfr))
### End of example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-.-
r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rdarnell@shrs.uq.edu.au  Thu Oct 24 08:55:06 2002
From: rdarnell@shrs.uq.edu.au (rdarnell@shrs.uq.edu.au)
Date: Thu, 24 Oct 2002 09:55:06 +0200 (MET DST)
Subject: crash report (PR#2207)
Message-ID: <200210240755.JAA25960@pubhealth.ku.dk>


Rterm crashed while I was creating some plots and a message box
appearing saying there was an error log created. Searching for
recently created files I found this one which was modified at the time
Rterm crashed.  I wasn't sure if you were interested but here it is
anyway.


Regards

Ross Darnell


Microsoft (R) Windows 2000 (TM) Version 5.00 DrWtsn32
Copyright (C) 1985-1999 Microsoft Corp. All rights reserved.


Application exception occurred:
        App:  (pid=1292)
        When: 10/24/2002 @ 17:37:59.435
        Exception number: c0000005 (access violation)

*----> System Information <----*
        Computer Name: SHRS-LVL8-RD
        User Name: rdarnell
        Number of Processors: 1
        Processor Type: x86 Family 15 Model 2 Stepping 4
        Windows 2000 Version: 5.0
        Current Build: 2195
        Service Pack: 2
        Current Type: Uniprocessor Free
        Registered Organization: University of Queensland
        Registered Owner: Ross Darnell

*----> Task List <----*
   0 Idle.exe
   8 System.exe
 140 smss.exe
 164 csrss.exe
 160 winlogon.exe
 212 services.exe
 224 lsass.exe
 392 svchost.exe
 424 spoolsv.exe
 484 svchost.exe
 612 regsvc.exe
 624 MSTask.exe
 696 wm.exe
 532 NALNTSRV.exe
 816 Explorer.exe
 876 LTSMMSG.exe
 884 PRISMSTA.exe
 892 SynTPLpr.exe
 900 SynTPEnh.exe
 916 sistray.exe
 924 khooker.exe
 932 CPLBY25.exe
 940 PRPCUI.exe
 800 dpmw32.exe
 988 NWTRAY.exe
1012 realsched.exe
1048 internat.exe
1096 WZQKPICK.exe
1108 NALDESK.exe
 964 xemacs.exe
 336 MOZILLA.exe
1304 ispell.exe
1292 Rterm.exe
1392 ssh.exe
 956 rnathchk.exe
1432 AcroRd32.exe
1396 drwtsn32.exe
   0 _Total.exe

(00400000 - 00406000) 
(77F80000 - 77FFB000) 
(01510000 - 016E4000) 
(016F0000 - 0170B000) 
(77DB0000 - 77E0B000) 
(77E80000 - 77F35000) 
(77D40000 - 77DB0000) 
(77B50000 - 77BD9000) 
(77F40000 - 77F7C000) 
(77E10000 - 77E74000) 
(76B30000 - 76B6E000) 
(77C70000 - 77CBA000) 
(782F0000 - 78532000) 
(78000000 - 78046000) 
(77820000 - 77827000) 
(759B0000 - 759B6000) 
(77A50000 - 77B46000) 
(779B0000 - 77A4B000) 
(6E420000 - 6E426000) 
(75E60000 - 75E7A000) 
(63000000 - 63014000) 
(775A0000 - 77625000) 
(77840000 - 7787C000) 
(770C0000 - 770E3000) 
(128F0000 - 128FE000) 
(12900000 - 1290A000) 
(12910000 - 12918000) 
(12920000 - 12934000) 
(12960000 - 12975000) 
(12980000 - 1298B000) 
(12990000 - 12999000) 
(129A0000 - 129A9000) 
(129B0000 - 129CD000) 
(75050000 - 75058000) 
(75030000 - 75043000) 
(75020000 - 75028000) 
(785C0000 - 785CC000) 
(77980000 - 779A4000) 
(77340000 - 77353000) 
(77520000 - 77525000) 
(77320000 - 77337000) 
(75150000 - 75160000) 
(75170000 - 751BF000) 
(77BE0000 - 77BEF000) 
(751C0000 - 751C6000) 
(77950000 - 77979000) 
(773B0000 - 773DE000) 
(77380000 - 773A2000) 
(77830000 - 7783E000) 
(77880000 - 7790D000) 
(77C10000 - 77C6D000) 
(774E0000 - 77512000) 
(774C0000 - 774D1000) 
(77530000 - 77552000) 
(77360000 - 77379000) 
(777E0000 - 777E8000) 
(66210000 - 66219000) 
(50D50000 - 50D92000) 
(50D00000 - 50D15000) 
(50DF0000 - 50E10000) 
(50DB0000 - 50DD9000) 
(66220000 - 6622C000) 
(1C000000 - 1C006000) 
(777F0000 - 777F5000) 
(74FD0000 - 74FEF000) 
(75010000 - 75017000) 
(12EB0000 - 12EB8000) 

State Dump for Thread Id 0x51c

eax=00000137 ebx=028342d4 ecx=00000006 edx=00000000 esi=025f916c edi=00000000
eip=0164a224 esp=0022f708 ebp=0022f720 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000202


function: drawto
        0164a202 eb3f             jmp     getpixels+0x13 (01652543)
        0164a204 83c4f4           add     esp,0xf4
        0164a207 53               push    ebx
        0164a208 e8a3fbffff       call    get_context (01649db0)
        0164a20d a3702b6c01       mov     [dc (016c2b70)],eax    ds:016c2b70=00000000
        0164a212 83c410           add     esp,0x10
        0164a215 8b8340010000     mov     eax,[ebx+0x140]        ds:02834414=00000137
        0164a21b 85c0             test    eax,eax
        0164a21d 741d             jz      init_menus+0xcc (0165453c)
        0164a21f a358296801       mov   [current (01682958)],eax ds:01682958=00000137
FAULT ->0164a224 8918             mov     [eax],ebx              ds:00000137=????????
        0164a226 83c4f8           add     esp,0xf8
        0164a229 ff7014           push    dword ptr [eax+0x14]   ds:00ead709=????????
        0164a22c ff7004           push    dword ptr [eax+0x4]    ds:00ead709=????????
        0164a22f e87cfdffff       call    finish_contexts+0x28 (01649fb0)
        0164a234 a364296801       mov   [win_rgb (01682964)],eax ds:01682964=00000000
        0164a239 eb08             jmp     sortpalette+0x6cf (01653243)
        0164a23b 90               nop
        0164a23c a158296801       mov   eax,[current (01682958)] ds:01682958=00000137
        0164a241 8918             mov     [eax],ebx              ds:00000137=????????
        0164a243 8b5de8           mov     ebx,[ebp+0xe8]         ss:010dccf2=????????
        0164a246 c9               leave

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
0022F720 0164A633 028342D4 00000000 0000029D 0000029D !drawto 
0022F760 0164F08B 025F916C 12020E0A 00000000 00000000 !clear 
0022F7D0 0164F485 025F916C 0017022A 00000000 0017022A !gprintf 
0022F800 0164F5FC 0017022A 0000000F 00000000 00000000 !gprintf 
0022F850 77E12E98 0017022A 0000000F 00000000 00000000 !app_win_proc 
0022F870 77E139A3 0164F5D0 0017022A 0000000F 00000000 user32!ScrollDC 
0022F88C 77E1395F 0194AEA0 0000000F 00000000 00000000 user32!GetQueueStatus 
0022F8B4 77FA032F 0022F8C4 00000018 0194AEA0 0000000F user32!GetQueueStatus 
0022F954 77E15824 016BC7C0 00000001 0164FCBF 016BC7C0 ntdll!KiUserCallbackDispatcher 
0022F990 0152FC05 00000001 00000400 0022FA5C 0158A463 user32!DispatchMessageA 
0022F9B0 0152FA05 01C63730 0022FA5C 00000400 00000001 !Rconsolesetwidth 
0022F9E0 015A0FC0 01C63730 0022FA5C 00000400 00000001 !R_ReadConsole 
0022FA20 015A1697 01C63DD0 00000000 00000000 0022FA50 !Rf_ReplIteration 
0022FE70 015A1F58 01C63DD0 00000000 00000000 77E8615B !Rf_ReplIteration 
0022FE90 015A1F70 00401431 00000001 0022FEB0 0040153D !run_Rmainloop 
0022FEA0 0040153D 00400000 00000000 0022FEE0 0040139C !Rf_mainloop 
0022FEB0 0040139C 00000002 01C224A0 00401674 00401759 !<nosymbols> 
0022FEE0 0040166D 00400000 00000000 01412433 00000000 !<nosymbols> 
0022FF60 004010F4 00000002 01C224A0 01C22D38 00000005 !<nosymbols> 
0022FFA0 004011EF 00000001 00000000 8043107B 77E97D05 !<nosymbols> 
0022FFC0 77E97D08 77F82DC2 77FCF170 7FFDF000 C0000005 !<nosymbols> 
0022FFF0 00000000 00000000 00000000 00000000 00000000 kernel32!CreateProcessW 

*----> Raw Stack Dump <----*
0022f708  d4 42 83 02 21 00 f0 00 - 60 f7 22 00 27 a6 64 01  .B..!...`.".'.d.
0022f718  00 00 00 00 9d 02 00 00 - 60 f7 22 00 33 a6 64 01  ........`.".3.d.
0022f728  d4 42 83 02 00 00 00 00 - 9d 02 00 00 9d 02 00 00  .B..............
0022f738  6c 91 5f 02 90 f7 22 00 - 2a 02 17 00 2a 02 17 00  l._...".*...*...
0022f748  6c 91 5f 02 6f f0 64 01 - 00 00 00 00 00 00 00 00  l._.o.d.........
0022f758  9d 02 00 00 9d 02 00 00 - d0 f7 22 00 8b f0 64 01  .........."...d.
0022f768  6c 91 5f 02 0a 0e 02 12 - 00 00 00 00 00 00 00 00  l._.............
0022f778  00 00 00 00 6c 91 5f 02 - 0f 00 00 00 2a 57 65 01  ....l._.....*We.
0022f788  6c 91 5f 02 2a 02 17 00 - 0a 03 01 0d 01 00 00 00  l._.*...........
0022f798  00 00 00 00 08 00 00 00 - f8 01 00 00 9d 02 00 00  ................
0022f7a8  00 00 00 00 00 00 00 00 - 00 00 00 00 00 40 00 00  .............@..
0022f7b8  08 1b 80 e2 88 6f 80 e2 - 88 40 30 85 14 07 ad bc  .....o...@0.....
0022f7c8  59 13 01 a0 ec 13 01 a0 - 00 f8 22 00 85 f4 64 01  Y........."...d.
0022f7d8  6c 91 5f 02 2a 02 17 00 - 00 00 00 00 2a 02 17 00  l._.*.......*...
0022f7e8  00 00 00 00 00 00 00 00 - 0f 00 00 00 02 00 00 00  ................
0022f7f8  a0 00 00 00 02 00 00 02 - 50 f8 22 00 fc f5 64 01  ........P."...d.
0022f808  2a 02 17 00 0f 00 00 00 - 00 00 00 00 00 00 00 00  *...............
0022f818  4c f8 22 00 00 00 00 00 - 9e 02 00 00 01 00 00 00  L.".............
0022f828  0f 00 00 00 c8 c7 6b 01 - c0 c7 6b 01 00 00 00 00  ......k...k.....
0022f838  00 00 00 00 2a 02 17 00 - 35 03 0f 00 02 00 00 00  ....*...5.......

State Dump for Thread Id 0x548

eax=77d50c62 ebx=00000246 ecx=0142072c edx=00000000 esi=014215b8 edi=014215f8
eip=77f82a84 esp=126efe28 ebp=126eff74 iopl=0         nv up ei pl nz na pe nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000202


function: ZwReplyWaitReceivePortEx
        77f82a79 b8ac000000       mov     eax,0xac
        77f82a7e 8d542404         lea     edx,[esp+0x4]          ss:1359d3fb=????????
        77f82a82 cd2e             int     2e
        77f82a84 c21400           ret     0x14

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
126EFF74 77D50781 77D50D7F 014215B8 00000000 40421080 ntdll!ZwReplyWaitReceivePortEx 
126EFFA8 77D50C7A 01420690 126EFFEC 77E8758A 014214D8 rpcrt4!RpcBindingSetOption 
126EFFB4 77E8758A 014214D8 00000000 40421080 014214D8 rpcrt4!RpcBindingSetOption 
126EFFEC 00000000 00000000 00000000 00000000 00000000 kernel32!SetFilePointer 

State Dump for Thread Id 0x558

eax=0000000a ebx=00000000 ecx=00000008 edx=00000000 esi=77f827dd edi=000000d4
eip=77f827e8 esp=128eff2c ebp=128eff50 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000246


function: NtWaitForSingleObject
        77f827dd b8ea000000       mov     eax,0xea
        77f827e2 8d542404         lea     edx,[esp+0x4]          ss:1379d4ff=????????
        77f827e6 cd2e             int     2e
        77f827e8 c20c00           ret     0xc
        77f827eb 8b4124           mov     eax,[ecx+0x24]         ds:00ead5da=????????
        77f827ee 39420c           cmp     [edx+0xc],eax          ds:00ead5d2=????????
        77f827f1 0f85c9100000     jne     NtQueryDefaultLocale+0x115 (77f838c0)
        77f827f7 ff4208           inc     dword ptr [edx+0x8]    ds:00ead5d2=????????
        77f827fa 33c0             xor     eax,eax
        77f827fc c20400           ret     0x4
        77f827ff 90               nop
        77f82800 ff4a04           dec     dword ptr [edx+0x4]    ds:00ead5d2=????????
        77f82803 c20400           ret     0x4

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
128EFF50 77E86A3D 000000D4 FFFFFFFF 00000000 0152FB48 ntdll!NtWaitForSingleObject 
128EFF80 7800A27B 00000000 00000000 0022F3E0 01C22A38 kernel32!WaitForSingleObject 
128EFFB4 77E8758A 01C22A38 00000000 0022F3E0 01C22A38 !beginthread 
128EFFEC 00000000 7800A224 01C22A38 00000000 00905A4D kernel32!SetFilePointer 

*----> Raw Stack Dump <----*
128eff2c  15 6a e8 77 d4 00 00 00 - 00 00 00 00 00 00 00 00  .j.w............
128eff3c  00 00 00 00 38 2a c2 01 - 38 2a c2 01 01 01 01 00  ....8*..8*......
128eff4c  01 01 01 00 80 ff 8e 12 - 3d 6a e8 77 d4 00 00 00  ........=j.w....
128eff5c  ff ff ff ff 00 00 00 00 - 48 fb 52 01 d4 00 00 00  ........H.R.....
128eff6c  ff ff ff ff 00 00 00 00 - 00 00 00 00 38 2a c2 01  ............8*..
128eff7c  b4 ff 8e 12 b4 ff 8e 12 - 7b a2 00 78 00 00 00 00  ........{..x....
128eff8c  00 00 00 00 e0 f3 22 00 - 38 2a c2 01 20 b0 0a 85  ......".8*.. ...
128eff9c  8c ff 8e 12 77 0d 43 80 - dc ff 8e 12 11 db 00 78  ....w.C........x
128effac  90 41 03 78 00 00 00 00 - ec ff 8e 12 8a 75 e8 77  .A.x.........u.w
128effbc  38 2a c2 01 00 00 00 00 - e0 f3 22 00 38 2a c2 01  8*........".8*..
128effcc  00 c0 fd 7f a7 9d fb 77 - c0 ff 8e 12 a7 9d fb 77  .......w.......w
128effdc  ff ff ff ff 5b 61 e8 77 - 80 b5 e8 77 00 00 00 00  ....[a.w...w....
128effec  00 00 00 00 00 00 00 00 - 24 a2 00 78 38 2a c2 01  ........$..x8*..
128efffc  00 00 00 00 4d 5a 90 00 - 03 00 00 00 04 00 00 00  ....MZ..........
128f000c  ff ff 00 00 b8 00 00 00 - 00 00 00 00 40 00 00 00  ............@...
128f001c  00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 00 00  ................
128f002c  00 00 00 00 00 00 00 00 - 00 00 00 00 00 00 00 00  ................
128f003c  80 00 00 00 0e 1f ba 0e - 00 b4 09 cd 21 b8 01 4c  ............!..L
128f004c  cd 21 54 68 69 73 20 70 - 72 6f 67 72 61 6d 20 63  .!This program c
128f005c  61 6e 6e 6f 74 20 62 65 - 20 72 75 6e 20 69 6e 20  annot be run in 

State Dump for Thread Id 0x44c

eax=778321fe ebx=00000004 ecx=77db0260 edx=00000000 esi=77f8281e edi=00000004
eip=77f82829 esp=12bdfd24 ebp=12bdfd70 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000246


function: NtWaitForMultipleObjects
        77f8281e b8e9000000       mov     eax,0xe9
        77f82823 8d542404         lea     edx,[esp+0x4]          ss:13a8d2f7=????????
        77f82827 cd2e             int     2e
        77f82829 c21400           ret     0x14

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
12BDFD70 77E86E1A 12BDFD48 00000001 00000000 00000000 ntdll!NtWaitForMultipleObjects 
12BDFFB4 77E8758A 00000005 00000000 000B000A 0143F978 kernel32!WaitForMultipleObjects 
12BDFFEC 00000000 778321FE 0143F978 00000000 000000C8 kernel32!SetFilePointer 

*----> Raw Stack Dump <----*
12bdfd24  da 6d e8 77 04 00 00 00 - 48 fd bd 12 01 00 00 00  .m.w....H.......
12bdfd34  00 00 00 00 00 00 00 00 - 01 00 00 00 78 f9 43 01  ............x.C.
12bdfd44  01 00 00 00 84 01 00 00 - 88 01 00 00 98 01 00 00  ................
12bdfd54  18 02 00 00 5c fe 45 80 - a0 2f 40 80 ff ff ff ff  ....\.E../@.....
12bdfd64  d0 8a a0 bc d0 0c 45 80 - 90 07 41 85 b4 ff bd 12  ......E...A.....
12bdfd74  1a 6e e8 77 48 fd bd 12 - 01 00 00 00 00 00 00 00  .n.wH...........
12bdfd84  00 00 00 00 00 00 00 00 - b2 22 83 77 04 00 00 00  .........".w....
12bdfd94  b0 fe bd 12 00 00 00 00 - ff ff ff ff 78 f9 43 01  ............x.C.
12bdfda4  0a 00 0b 00 00 00 00 00 - f4 38 1a 85 e8 ae 44 85  .........8....D.
12bdfdb4  00 00 00 00 00 00 00 00 - 01 00 00 00 38 00 00 00  ............8...
12bdfdc4  23 00 00 00 23 00 00 00 - 00 00 00 00 0a 00 0b 00  #...#...........
12bdfdd4  78 f9 43 01 c8 43 f8 77 - 60 02 db 77 fe 21 83 77  x.C..C.w`..w.!.w
12bdfde4  00 00 00 00 32 75 e8 77 - 1b 00 00 00 00 02 00 00  ....2u.w........
12bdfdf4  fc ff bd 12 23 00 00 00 - c0 00 00 00 28 0e 0a 85  ....#.......(...
12bdfe04  b1 c0 01 00 98 70 71 85 - 00 07 00 00 b6 c9 44 80  .....pq.......D.
12bdfe14  b1 c0 01 00 98 70 71 85 - 01 d2 fd 7f 07 03 00 00  .....pq.........
12bdfe24  01 d2 fd 7f 07 03 00 00 - 5b d3 44 80 07 03 00 00  ........[.D.....
12bdfe34  30 5e 0a 85 00 d0 fd 7f - fc 07 30 c0 00 00 00 00  0^........0.....
12bdfe44  68 7e 0d 85 07 03 00 00 - 98 8b a0 bc 00 00 00 00  h~..............
12bdfe54  01 00 00 00 00 00 00 00 - 00 e0 fd 7f fc 07 30 c0  ..............0.

State Dump for Thread Id 0x538

eax=1c0026ca ebx=00000000 ecx=00000000 edx=00000000 esi=00000200 edi=0143b1c0
eip=77f830a5 esp=12e2ff14 ebp=12e2ffb4 iopl=0         nv up ei pl zr na po nc
cs=001b  ss=0023  ds=0023  es=0023  fs=0038  gs=0000             efl=00000246


function: NtDeviceIoControlFile
        77f8309a b838000000       mov     eax,0x38
        77f8309f 8d542404         lea     edx,[esp+0x4]          ss:13cdd4e7=????????
        77f830a3 cd2e             int     2e
        77f830a5 c22800           ret     0x28

*----> Stack Back Trace <----*

FramePtr ReturnAd Param#1  Param#2  Param#3  Param#4  Function Name
12E2FFB4 77E8758A 00000000 0208003C 00000000 00000000 ntdll!NtDeviceIoControlFile 
12E2FFEC 00000000 1C0026CA 00000000 00000000 12E30008 kernel32!SetFilePointer 

*----> Raw Stack Dump <----*
12e2ff14  ed 24 00 1c 00 02 00 00 - 00 00 00 00 00 00 00 00  .$..............
12e2ff24  00 00 00 00 d0 30 00 1c - 83 00 00 90 60 ff e2 12  .....0......`...
12e2ff34  30 00 00 00 00 00 00 00 - 00 00 00 00 4e 27 00 1c  0...........N'..
12e2ff44  83 00 00 90 00 00 00 00 - 60 ff e2 12 30 00 00 00  ........`...0...
12e2ff54  3c 00 08 02 00 00 00 00 - 00 00 00 00 41 00 00 00  <...........A...
12e2ff64  00 00 00 00 ac 7c 88 eb - 00 00 00 00 00 00 00 00  .....|..........
12e2ff74  00 00 00 00 c0 b1 43 01 - c0 01 0c 86 48 02 0a 85  ......C.....H...
12e2ff84  00 02 00 00 00 00 00 00 - 68 e2 44 85 00 02 00 00  ........h.D.....
12e2ff94  e0 d2 0e 85 c0 b1 43 01 - 54 ff e2 12 77 0d 43 80  ......C.T...w.C.
12e2ffa4  dc ff e2 12 f4 28 00 1c - 38 12 00 1c ff ff ff ff  .....(..8.......
12e2ffb4  ec ff e2 12 8a 75 e8 77 - 00 00 00 00 3c 00 08 02  .....u.w....<...
12e2ffc4  00 00 00 00 00 00 00 00 - 00 a0 fd 7f 00 00 00 00  ................
12e2ffd4  c0 ff e2 12 00 00 00 00 - ff ff ff ff 5b 61 e8 77  ............[a.w
12e2ffe4  80 b5 e8 77 00 00 00 00 - 00 00 00 00 00 00 00 00  ...w............
12e2fff4  ca 26 00 1c 00 00 00 00 - 00 00 00 00 08 00 e3 12  .&..............
12e30004  00 00 00 00 10 00 e3 12 - 00 00 00 00 18 00 e3 12  ................
12e30014  00 00 00 00 20 00 e3 12 - 00 00 00 00 28 00 e3 12  .... .......(...
12e30024  00 00 00 00 30 00 e3 12 - 00 00 00 00 38 00 e3 12  ....0.......8...
12e30034  00 00 00 00 40 00 e3 12 - 00 00 00 00 48 00 e3 12  ....@.......H...
12e30044  00 00 00 00 50 00 e3 12 - 00 00 00 00 58 00 e3 12  ....P.......X...



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 24 10:05:06 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 24 Oct 2002 10:05:06 +0100 (BST)
Subject: crash report (PR#2207)
In-Reply-To: <200210240755.JAA25960@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210241003100.3978-100000@gannet.stats>

All that log tells us is that it crashed in the graphics system.

There's nothing we can do unless you can send a reproducible report,
and even then it might not happen on our machines.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 24 10:10:33 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 24 Oct 2002 10:10:33 +0100 (BST)
Subject: model.matrix (via predict) (PR#2206)
In-Reply-To: <E09E527B56BE2D438A3D6A246DDD27A91655BA@Roper-CV.qld.cmis.csiro.au>
Message-ID: <Pine.LNX.4.31.0210241006080.3978-100000@gannet.stats>

I have a clue as to what is going on, given that it changed between 1.5.1
and 1.6.0.  I think it may be related to (NEWS)

        model.matrix() was sometimes incorrectly determining the first
        factor in a formula without an intercept.

It seems a marginal bug, one not worth spending much time on.  Anyone who
has read the internals of model.matrix.default will appreciate my
reluctance.

Brian


On Thu, 24 Oct 2002 Bill.Venables@cmis.csiro.au wrote:

> Glenn,
>
> I suspect that I(i100*j0) will not work, actually.  It certainly won't work
> if either of them are factors, since multiplication, (i.e. the arithmethic
> "*" as opposed to the linear model formula "*" operator) is explicitly
> inhibited for factors.
>
> Even if one is confounded within the other, there is no reason to omit the
> main effect.  Both glm and aov will detect that and silently omit the
> confounded term.  You could also use a/b, of course, and my guess is that
> works as well.
>
> Cheers,
> Bill.
>
> -----Original Message-----
> From: Stone, Glenn (CMIS, North Ryde)
> Sent: Thursday, October 24, 2002 4:53 PM
> To: Venables, Bill (CMIS, Cleveland); 'r-devel@stat.math.ethz.ch '
> Subject: RE: model.matrix (via predict) (PR#2206)
>
>
>
> In my actual application (this is a dummy) i100 is confounded with ihalf, so
> I don't fit its main effect  I guess I(i100*j0) would work?
> -----Original Message-----
> From: Venables, Bill (CMIS, Cleveland)
> To: Stone, Glenn (CMIS, North Ryde); r-devel@stat.math.ethz.ch
> Sent: 24/10/2002 4:29 PM
> Subject: RE: model.matrix (via predict) (PR#2206)
>
> I'm not sure what Glenn's "obvious" workarounds are, but if you fit the
> model in the equivalent and more conventional form:
>
> gg <- glm(clms ~ logj + i100*j0 + ihalf*jmin6, data=dfr, family=poisson)
>
> The predict(gg, newdata = dfr) step now works fine (for me, Windows
> 2000, R 1.6.0).
>
> I present this in the hope someone can use it as a clue to find out
> what's going on.  Sorry, I don't have time to do it myself.
>
> Bill Venables.
>
>
> -----Original Message-----
> From: Glenn.Stone@csiro.au [mailto:Glenn.Stone@csiro.au]
> Sent: Thursday, October 24, 2002 2:33 PM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: model.matrix (via predict) (PR#2206)
>
>
> Full_Name: Glenn Stone
> Version: 1.5.1 and 1.6.0
> OS: win2000
> Submission from: (NULL) (168.140.227.9)
>
>
> The following code produces incorrect fitted values in version 1.5.1 and
> an
> error in 1.6.0
>
>    Error in "contrasts<-"(*tmp*, value = "contr.treatment") :
>            contrasts apply only to factors
>    In addition: Warning message:
>    variable ihalf is not a factor in: model.frame.default(object, data,
> xlev =
> xlev)
>
> The problem in 1.5.1 seems to be model.matrix return inconsistently
> ordered
> interaction terms. There are abviously several work arounds.
>
>
> ### Start of example
> dfr <- expand.grid(i=0:154,j=0:154)
> dfr <- dfr[with(dfr,i+j<=154),]
>
> dfr$logj <- with(dfr,log(j+0.5))
> dfr$jmin6 <- with(dfr, pmin(j,6))
> dfr$ihalf <- with(dfr, factor(floor(i/6)))
> dfr$i100 <- with(dfr, ifelse(i<100,1,0))
> dfr$j0 <- with(dfr, ifelse(j==0,1,0))
>
> Ai <- runif(length(levels(dfr$ihalf)))
> Ai <- Ai-Ai[1]
> Bi <- runif(length(levels(dfr$ihalf)))
> Bi <- (Bi-Bi[1])/10
>
> eta <- with(dfr, -5 -2.5*logj - 3*i100*j0
>             + 0.01*jmin6+Ai[as.numeric(ihalf)]
>             +Bi[as.numeric(ihalf)]*jmin6)
>
> dfr$clms <- sapply( eta , function(x) rpois(1,1e6*exp(x)))
>
> gg <- glm(clms~ logj + i100:j0 + jmin6 + ihalf + ihalf:jmin6,
>           data=dfr,
>           family=poisson)
>
> plot(predict(gg),predict(gg,newdata=dfr))
> ### End of example
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
> -.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._._._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lucas@toulouse.inra.fr  Thu Oct 24 13:53:13 2002
From: lucas@toulouse.inra.fr (lucas@toulouse.inra.fr)
Date: Thu, 24 Oct 2002 14:53:13 +0200 (MET DST)
Subject: Function scale (PR#2209)
Message-ID: <200210241253.OAA01776@pubhealth.ku.dk>

I found a problem with scale function,
while using center=FALSE and scale=TRUE:

all column are not divided by standard error,
but divided by sqrt (1/(n-1) sum Xi^2 )

Example:
> l<- c(1,2,3)
> scale(l,F,T)
          [,1]
[1,] 0.3779645
[2,] 0.7559289
[3,] 1.1338934
attr(,"scaled:scale")
[1] 2.645751

2.645751 = sqrt( 1/2 * (1+4+9) )


Antoine Lucas & Aymeric Labourdette 

--
Antoine  Lucas        
INRA, Unit de biomtrie et     |  Tel 05 61 28 53 34
intelligence artificielle       |  Fax 05 61 28 53 35
http://genopole.toulouse.inra.fr/~lucas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 24 14:28:43 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Oct 2002 15:28:43 +0200
Subject: Function scale (PR#2209)
In-Reply-To: <200210241253.OAA01776@pubhealth.ku.dk>
References: <200210241253.OAA01776@pubhealth.ku.dk>
Message-ID: <x265vst184.fsf@biostat.ku.dk>

lucas@toulouse.inra.fr writes:

> I found a problem with scale function,
> while using center=FALSE and scale=TRUE:
> 
> all column are not divided by standard error,
> but divided by sqrt (1/(n-1) sum Xi^2 )
> 
> Example:
> > l<- c(1,2,3)
> > scale(l,F,T)
>           [,1]
> [1,] 0.3779645
> [2,] 0.7559289
> [3,] 1.1338934
> attr(,"scaled:scale")
> [1] 2.645751
> 
> 2.645751 = sqrt( 1/2 * (1+4+9) )

And? That's exactly what the documentation says will happen. And
exactly what Splus does, even if perhaps surprising.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Oct 24 15:21:22 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Thu, 24 Oct 2002 10:21:22 -0400 (EDT)
Subject: Function scale (PR#2209)
In-Reply-To: <200210241253.OAA01776@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.44.0210241017370.9918-100000@bolker.zoo.ufl.edu>


  The function is behaving as documented ...

   "If `scale' is `TRUE' then scaling is done by dividing the (centered)
    columns of `x' by their root-mean-square, and if `scale' is `FALSE',
    no scaling is done.

   "The root-mean-square for a column is obtained by computing the
    square-root of the sum-of-squares of the non-missing values in the
    column divided by the number of non-missing values minus one."

   It says "root-mean-square", not "standard error" or "standard
deviation".  If you set center=TRUE, then the two are equivalent. If you
*want* it to scale by standard deviation just set scale=sd(l) [or in the
matrix case, scale=apply(l,2,sd)].

  Ben Bolker

On Thu, 24 Oct 2002 lucas@toulouse.inra.fr wrote:

> I found a problem with scale function,
> while using center=FALSE and scale=TRUE:
> 
> all column are not divided by standard error,
> but divided by sqrt (1/(n-1) sum Xi^2 )
> 
> Example:
> > l<- c(1,2,3)
> > scale(l,F,T)
>           [,1]
> [1,] 0.3779645
> [2,] 0.7559289
> [3,] 1.1338934
> attr(,"scaled:scale")
> [1] 2.645751
> 
> 2.645751 = sqrt( 1/2 * (1+4+9) )
> 
> 
> Antoine Lucas & Aymeric Labourdette 
> 
> --
> Antoine  Lucas        
> INRA, Unit de biomtrie et     |  Tel 05 61 28 53 34
> intelligence artificielle       |  Fax 05 61 28 53 35
> http://genopole.toulouse.inra.fr/~lucas
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu Oct 24 16:55:07 2002
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 24 Oct 2002 11:55:07 -0400
Subject: Function scale (PR#2209)
Message-ID: <D7A3CFD7825BD6119B880002A58F06C20149D11A@groexmb02.pfizer.com>

> From: Peter Dalgaard BSA [mailto:p.dalgaard@biostat.ku.dk]
[...]
> 
> And? That's exactly what the documentation says will happen. And
> exactly what Splus does, even if perhaps surprising.

Generally speaking, I think it is poor design for software to 'surprise' the
user, even if documentation specifies the surprising activity...   

Is there a good reason for this behavior or is it 'just' a leftover
implementation detail recoded as a specification?

Except, perhaps, for the need for backwards & S-Plus compatibility, it would
seem desirable to change the behavior to better match the uninformed
expectation of users.

Just my $0.02.

-Greg





LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dj@research.bell-labs.com  Thu Oct 24 17:08:55 2002
From: dj@research.bell-labs.com (David James)
Date: Thu, 24 Oct 2002 12:08:55 -0400
Subject: RFC: Loading packages at startup
In-Reply-To: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>; from ripley@stats.ox.ac.uk on Mon, Oct 21, 2002 at 09:24:45PM +0100
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
Message-ID: <20021024120855.A8260@jessie.research.bell-labs.com>

I think the proposed changes will be useful. A couple of points
(mostly for simplicity):

Prof Brian D Ripley wrote:
> ...
> 
> 3) It would be useful to allow the library tree to be specified, as a
>    second field on the line.
  
Other than convenience (nothing wrong with that, of course) I don't
see too much need for this.  The .Renviron files may already have defined
R_LIBS, so the library tree may already be specified.

>  ...
>
> 5) We might want to allow a .Rpackages file to override Rpackages.site
>    (or we might not).  One idea is to allow a minus sign in front of a
>    package name, and to merge the Rpackages.site and .Rpackages files
>    before loading any packages.  If we did this we probably need to be
>    able to save the list of packages to be loaded (and can't easily save
>    those not to be loaded), so perhaps -- as the first list of .Rpackages
>    should empty the list.

Why not using arguments to R, say, --no-site-Rpackages and --no-Rpackages,
similar to --no-environ, --no-site-file, --no-init-file, and friends?
Adding specialized syntax with the minus sign seems a bit kludgy.

My preferance would be to have R by default include base and only
base (or whatever one package is the mimimum set), all other packages
(ctest, etc.) as part of the $R_HOME/etc/Rpackages.site, as the RFC
point 2) suggests.


> 
> 6) One could argue for R_HOME/etc/Rpackages as the `system' file as
>    well, and this might be useful if we break base up into smaller
>    components.
> 
> 7) I would allow comment lines in the files, starting with #.
> 
> 8) The file names or names could be set by environment variables.  It's
>    strange that we allow the site file names for Rprofile and Renviron and
>    the user file name for command histories to be set in that way.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Oct 24 17:53:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 24 Oct 2002 17:53:31 +0100 (BST)
Subject: RFC: Loading packages at startup
In-Reply-To: <20021024120855.A8260@jessie.research.bell-labs.com>
Message-ID: <Pine.LNX.4.31.0210241750570.5320-100000@gannet.stats>

On Thu, 24 Oct 2002, David James wrote:

> I think the proposed changes will be useful. A couple of points
> (mostly for simplicity):
>
> Prof Brian D Ripley wrote:
> > ...
> >
> > 3) It would be useful to allow the library tree to be specified, as a
> >    second field on the line.
>
> Other than convenience (nothing wrong with that, of course) I don't
> see too much need for this.  The .Renviron files may already have defined
> R_LIBS, so the library tree may already be specified.

It's important if one wants to save the list to know which library list
was in use at the time. R_LIBS is subject to change.

> > 5) We might want to allow a .Rpackages file to override Rpackages.site
> >    (or we might not).  One idea is to allow a minus sign in front of a
> >    package name, and to merge the Rpackages.site and .Rpackages files
> >    before loading any packages.  If we did this we probably need to be
> >    able to save the list of packages to be loaded (and can't easily save
> >    those not to be loaded), so perhaps -- as the first list of .Rpackages
> >    should empty the list.
>
> Why not using arguments to R, say, --no-site-Rpackages and --no-Rpackages,
> similar to --no-environ, --no-site-file, --no-init-file, and friends?
> Adding specialized syntax with the minus sign seems a bit kludgy.

We would do that anyway.  The case I am thinking about is where
Rpackages.site includes a lot of packages, and for this project I want to
exclude just one.  Then a .Rpackages with `-foo' does the trick.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Oct 24 18:07:29 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Thu, 24 Oct 2002 13:07:29 -0400
Subject: Function scale (PR#2209)
In-Reply-To: <D7A3CFD7825BD6119B880002A58F06C20149D11A@groexmb02.pfizer.com>
References: <D7A3CFD7825BD6119B880002A58F06C20149D11A@groexmb02.pfizer.com>
Message-ID: <up9gru8fmkpr3iaslhfm91sd0t13vhrlk3@4ax.com>

On Thu, 24 Oct 2002 11:55:07 -0400, you wrote in message
<D7A3CFD7825BD6119B880002A58F06C20149D11A@groexmb02.pfizer.com>:

>Generally speaking, I think it is poor design for software to 'surprise' the
>user, even if documentation specifies the surprising activity...   

I agree, but I don't think it's clear what would be unsurprising
behaviour here.

If you ask for scaling but no centering, how should the scale be
estimated?  

1. To me the obvious scale is sqrt(sum(x^2)/n).
2. R and S-PLUS use sqrt(sum(x^2)/(n-1)).
3. I think the original poster was suggesting
sqrt(sum((x-mean(x))^2/(n-1)) (but it wasn't stated explicitly, so I'm
not sure).

In a case like this, I'd say backwards compatibility wins.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Fri Oct 25 08:15:07 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Fri, 25 Oct 2002 09:15:07 +0200
Subject: RFC: Loading packages at startup
In-Reply-To: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel>
Message-ID: <15800.61307.451828.338523@mithrandir.hornik.net>

>>>>> Prof Brian D Ripley writes:

> I've been kicking the following idea around for a while, and am now
> proposing to put some version into 1.7.0.  I'd be interested in
> comments on the desirability and the design, before I start writing
> any code.

> S4 introduced a file .S.chapters which can contain a list of S
> chapters (equivalent to R packages) to be loaded on start-up.  This
> was the germ of this proposal.

> Proposal:

> Extend the initialization as described in Startup.Rd by having
> optionally files named, say, R_HOME/etc/Rpackages.site and .Rpackages,
> the latter in the starting directory or failing that the user's home
> directory. Each would contain a list of packages, one per line, to be
> loaded when R is started, in the order in the files.

> Some details:

> 1) I think the packages should be loaded before .Rprofile and .RData
>    are processed, and R_HOME/etc/Rpackages.site before .Rpackages.
>    This can be argued, and the S4 parallel would seem to be to load
>    packages after S.init (the nearest it has to Rprofile).  But we
>    would load library/base/Rprofile first of all so the analogy is not
>    close.

> 2) The present kludge of loading ctest in .First could be replaced
>    by making ctest the default content of R_HOME/etc/Rpackages.site
>    (in the light of point 5).

> 3) It would be useful to allow the library tree to be specified, as a
>    second field on the line.

> 4) One problem with saving an R session and then restoring it is that
>    the packages in use are not reloaded.  Quitting an R session and
>    saving could write .Rpackages in the current directory (with the
>    library recorded if it were not the default).  Then restarting a
>    session in that directory would restore the loaded packages
>    automatically.

> 5) We might want to allow a .Rpackages file to override Rpackages.site
>    (or we might not).  One idea is to allow a minus sign in front of a
>    package name, and to merge the Rpackages.site and .Rpackages files
>    before loading any packages.  If we did this we probably need to be
>    able to save the list of packages to be loaded (and can't easily save
>    those not to be loaded), so perhaps -- as the first list of .Rpackages
>    should empty the list.

> 6) One could argue for R_HOME/etc/Rpackages as the `system' file as
>    well, and this might be useful if we break base up into smaller
>    components.

> 7) I would allow comment lines in the files, starting with #.

> 8) The file names or names could be set by environment variables.  It's
>    strange that we allow the site file names for Rprofile and Renviron and
>    the user file name for command histories to be set in that way.

I'd recommend against going this way.

In fact, I am not sure whether we really want to have *user environment*
files in the long run.  We currently have two user files controlling
startup, .Renviron and .Rprofile.  A split like this is necessary
because not all customization for R can be done from 'inside R', i.e.,
after R has been started, but needs to be done before that.  To my
understanding, this includes setting LD_LIBRARY_PATH (or the system's
equivalent), and maybe some env vars which can be given instead of
command line args, but with R_VSIZE and R_HSIZE sort of gone what else
is there?  So perhaps the user environment mechanism is not the right
thing anyway (and it is not used by R CMD *).

For the things that can be done from inside R, I'd recommend doing it
this way.  E.g., there is really no reason for looking for an env var
R_BROWSER when we can portably specify one using options(browser).  The
fact that specifying the packages to be loaded at startup inside
.First() and that users cannot simply add to .First() is a problem that
needs to be addressed anyway.  As Robert has indicated, the obvious idea
is to introduce (an Emacs-style) hooks mechanism to be run at certain
times, or more generally, when certain events occur.  Unfortunately, the
attempt to make this rather general, as discussed in Boston, means that
things also take a bit longer to get done.  But conceptually, what we
want is a suite of

	setHook() addHook() runHooks()

functions, and things like .First(), .First.lib() (and the user
variants), code to be run when creating a save image etc., can all be
integrated into this general mechanism.

[Basically, hooks are lists of functions because in some cases we need
to call them with certain arguments, e.g. the .First.lib package load
hook always has library and package and maybe also version eventually.]

For package config, users can then use setHook() to override the system
and/or site defaults, or addHook() to add to them.  As everything
happens inside R there is no need for a special format, as discussed in 
(3), (5), and (7).

[If users cannot be expected to code their preferences in R ... then we
could provide an interactive tool which eventually emits the R code.]

Long term, startup configuration will include setting defaults, loading
packages, perhaps playing namespace magic with some of them, perhaps
everything according to predefined 'themes' ... and I'd like to have all
of this in one place, if possible.

Point (4) is very important, in particular if we think about saving and
restoring the 'state' of an R session (as opposed to just the work
space).  I think many of us (I know from at least Greg, Fritz and
myself) have code going in this direction, but then we need more than
just names of the packages.  We should perhaps also know about attached
non-package objects etc.  Also, I am not sure about how attempting to
load/attach in reverse order will interact with namespace import/export
and pre-computing package dependencies before loading them.  But in any
case, dumping an object that somehow represents the session state would
be extremely important---but I do think we need an R object to represent
the information.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian.trapletti@lmttrading.com  Fri Oct 25 08:46:21 2002
From: adrian.trapletti@lmttrading.com (Adrian Trapletti)
Date: Fri, 25 Oct 2002 09:46:21 +0200
Subject: [R] Combinatorial Optimisation
References: <200210250201.g9P214Ui023993@hypatia.math.ethz.ch>
Message-ID: <3DB8F6CC.8C3D4E9@lmttrading.com>

> Date: Thu, 24 Oct 2002 08:58:08 +0200 (CEST)
> From: Detlef Steuer <Detlef.Steuer@unibw-hamburg.de>
> Subject: RE: [R] Combinatorial Optimisation
>
> This thread missed me somehow.
>
> If not mentioned before:
> simulated annealing is implemented in optim().

The current implementation of simulated annealing in optim() has been designed for a continuos parameter space. The next candidate
point in the parameter space is generated from a Gaussian Markov kernel with scale proportional to the actual temperature. However,
it is quite simple to change this for a combinatorial optimization:

in the R source tree, see the file src/main/optim.c, function samin:

What you need to change are the four lines, that are responsible for generating a new candidate point:

for (i = 0; i < n; i++)
  dp[i] = scale * t * norm_rand();  /* random perturbation */
for (i = 0; i < n; i++)
  ptry[i] = p[i] + dp[i];  /* new candidate point */

You could, e.g., replace them by a call to an R function, which randomly selects a new candidate point of a finite set of points.
Hence, to quickly get SA for combinatorial optimization:

Copy and paste samin from optim.c
Change the four lines
Write an R wrapper for this new function

best
Adrian

PS: TO R-DEVEL: What about having this behaviour in optim (default as is, optional a function argument which selects a candidate
point)?

--
Dr. Adrian Trapletti             Phone :             +41 (0) 1 994 5631
Trapletti Statistical Computing  Mobile:             +41 (0)76 370 5631
Wildsbergstrasse 31              Fax   :             +41 (0) 1 994 5631
CH-8610 Uster                    Email :  mailto:a.trapletti@bluewin.ch
Switzerland                      WWW   : http://trapletti.homelinux.com



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Oct 25 13:01:43 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 25 Oct 2002 13:01:43 +0100 (BST)
Subject: [R] Combinatorial Optimisation
In-Reply-To: <3DB8F6CC.8C3D4E9@lmttrading.com>
Message-ID: <Pine.LNX.4.31.0210251259530.10820-100000@gannet.stats>

Adrian,

Thanks for the idea.  If you were willing to contribute a patch to do this
we would be happy to incorporate it.

Brian


On Fri, 25 Oct 2002, Adrian Trapletti wrote:

> > Date: Thu, 24 Oct 2002 08:58:08 +0200 (CEST)
> > From: Detlef Steuer <Detlef.Steuer@unibw-hamburg.de>
> > Subject: RE: [R] Combinatorial Optimisation
> >
> > This thread missed me somehow.
> >
> > If not mentioned before:
> > simulated annealing is implemented in optim().
>
> The current implementation of simulated annealing in optim() has been designed for a continuos parameter space. The next candidate
> point in the parameter space is generated from a Gaussian Markov kernel with scale proportional to the actual temperature. However,
> it is quite simple to change this for a combinatorial optimization:
>
> in the R source tree, see the file src/main/optim.c, function samin:
>
> What you need to change are the four lines, that are responsible for generating a new candidate point:
>
> for (i = 0; i < n; i++)
>   dp[i] = scale * t * norm_rand();  /* random perturbation */
> for (i = 0; i < n; i++)
>   ptry[i] = p[i] + dp[i];  /* new candidate point */
>
> You could, e.g., replace them by a call to an R function, which randomly selects a new candidate point of a finite set of points.
> Hence, to quickly get SA for combinatorial optimization:

(Using an R function here is not entirely trivial, hence the request
above.)

> Copy and paste samin from optim.c
> Change the four lines
> Write an R wrapper for this new function
>
> best
> Adrian
>
> PS: TO R-DEVEL: What about having this behaviour in optim (default as is, optional a function argument which selects a candidate
> point)?
>
> --
> Dr. Adrian Trapletti             Phone :             +41 (0) 1 994 5631
> Trapletti Statistical Computing  Mobile:             +41 (0)76 370 5631
> Wildsbergstrasse 31              Fax   :             +41 (0) 1 994 5631
> CH-8610 Uster                    Email :  mailto:a.trapletti@bluewin.ch
> Switzerland                      WWW   : http://trapletti.homelinux.com
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Fri Oct 25 14:17:22 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Fri, 25 Oct 2002 09:17:22 -0400
Subject: RFC: Loading packages at startup
In-Reply-To: <15800.61307.451828.338523@mithrandir.hornik.net>
References: <Pine.WNT.4.44.0210212122030.3056-100000@petrel> <15800.61307.451828.338523@mithrandir.hornik.net>
Message-ID: <tigiru0ea5ogksjn520jiffrlim1g9dt1d@4ax.com>

On Fri, 25 Oct 2002 09:15:07 +0200, Kurt.Hornik@wu-wien.ac.at wrote in
message <15800.61307.451828.338523@mithrandir.hornik.net>:

>  But in any
>case, dumping an object that somehow represents the session state would
>be extremely important---but I do think we need an R object to represent
>the information.

It might be possible at some point to store something that would cause
R to fail to start, so if a binary format is used for this file, there
should be tools provided to allow it to be edited.  This could be as
simple as instructions for running "R --vanilla", loading and editing
the startup info, and saving it back.  

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From terra@diku.dk  Fri Oct 25 15:50:18 2002
From: terra@diku.dk (terra@diku.dk)
Date: Fri, 25 Oct 2002 16:50:18 +0200 (MET DST)
Subject: qgamma precision (PR#2214)
Message-ID: <200210251450.QAA13659@pubhealth.ku.dk>

Full_Name: Morten Welinder
Version: 1.5.1
OS: Solaris
Submission from: (NULL) (65.213.85.136)


I was having problems with qgamma's precision in the sense that
pgamma(qpgamma(x))
was not as close to the identity function as I would like.  I was seeing
relative
errors with random input of about 1e-8.  This fits nicely with the code'd EPS2
value of 5e-7.

To solve this I added a newton step at the end.  This seems far cheaper than
the
current iterations.  Here's the code I added (to replace the final return):


    /* Special Gnumeric patch to improve precision.  */
    {
	gnum_float x0 = 0.5*scale*ch;
	gnum_float e0 = pgamma (x0, alpha, scale, lower_tail, log_p) - p;

	if (e0 != 0 && lower_tail && !log_p) {
	    gnum_float d0 = dgamma (x0, alpha, scale, log_p);
	    if (d0) {
		gnum_float x1 = x0 - e0 / d0;
		gnum_float e1 = pgamma (x1, alpha, scale, lower_tail, log_p) - p;
		if (gnumabs (e1) < gnumabs (e0))
		    x0 = x1;
	    }
	}

	return x0;
    }

(Just read "gnum_float" as "double" and "gnumabs" as "fabs".)

The test for lower_tail is because (a) that is where I use it, and (b) the d0
calculation is probably wrong otherwise.

With this change, the relative precision improves to something like 1e-15.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian.trapletti@lmttrading.com  Fri Oct 25 22:32:32 2002
From: adrian.trapletti@lmttrading.com (Adrian Trapletti)
Date: Fri, 25 Oct 2002 23:32:32 +0200
Subject: [R] Combinatorial Optimisation
References: <Pine.LNX.4.31.0210251259530.10820-100000@gannet.stats>
Message-ID: <3DB9B870.D7D565C1@lmttrading.com>

This is a multi-part message in MIME format.
--------------D871E36B191E8352EBC0EAA5
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

ripley@stats.ox.ac.uk wrote:

> Adrian,
>
> Thanks for the idea.  If you were willing to contribute a patch to do this
> we would be happy to incorporate it.

Patches for optim.c and optim.Rd against R-1.6.0 source are attached. I didn't test too extensively, but the basic things and the
traveling salesman example seem to work cleanly. I would be glad if you could review and maybe enhance, in particular the S related
code, in optim.c, because there I am really not an expert.

Furthermore, as I was scanning through optim.c I was not sure if line 99 (original)

     df[i] = REAL(s)[i] * (OS->parscale[i])/(OS->fnscale);

is correct. Shouldn't that be

    df[i] = REAL(s)[i] / ((OS->parscale[i])*(OS->fnscale));

to get back to the optim-internal scaling?

best
Adrian

--
Dr. Adrian Trapletti             Phone :             +41 (0) 1 994 5631
Trapletti Statistical Computing  Mobile:             +41 (0)76 370 5631
Wildsbergstrasse 31              Fax   :             +41 (0) 1 994 5631
CH-8610 Uster                    Email :  mailto:a.trapletti@bluewin.ch
Switzerland                      WWW   : http://trapletti.homelinux.com



--------------D871E36B191E8352EBC0EAA5
Content-Type: text/plain; charset=us-ascii;
 name="patch.optim.Rd"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="patch.optim.Rd"

7c7
<   box-constrained optimization.
---
>   box-constrained optimization and simulated annealing.
21,22c21,24
<    \code{"Nelder-Mead"} and \code{"SANN"} method. If it is \code{NULL}
<    and it is needed, a finite-difference approximation will be used.}
---
>    \code{"Nelder-Mead"} method. If it is \code{NULL} and it is needed, a
>    finite-difference approximation will be used. For the \code{"SANN"}
>    method it is a function to generate a new candidate point. If it is
>    \code{NULL} a default Gaussian Markov kernel is used.}
59c61
<   Method \code{"SANN"} is a variant of simulated annealing
---
>   Method \code{"SANN"} is by default a variant of simulated annealing
64,69c66,73
<   acceptance probability. The next candidate point is generated from a
<   Gaussian Markov kernel with scale proportional to the actual temperature.
<   Temperatures are decreased according to the logarithmic cooling
<   schedule as given in Belisle (1992, p. 890). Note that the
<   \code{"SANN"} method depends critically on the settings of the
<   control parameters.  It is not a general-purpose method but can be
---
>   acceptance probability. By default the next candidate point is
>   generated from a Gaussian Markov kernel with scale proportional to the
>   actual temperature. If a function to generate a new candidate point is
>   given, method \code{"SANN"} can also be used to solve combinatorial
>   optimization problems. Temperatures are decreased according to the
>   logarithmic cooling schedule as given in Belisle (1992, p. 890). Note
>   that the \code{"SANN"} method depends critically on the settings of
>   the control parameters. It is not a general-purpose method but can be 
176c180
< 
---
>   
240a245,290
> 
> ## Combinatorial optimization: Traveling salesman problem
> library(mva)
> 
> data(eurodist)
> eurodistmat <- as.matrix(eurodist)
> 
> distance <- function(sq) {  # Target function
>     sq2 <- embed(sq, 2)
>     return(sum(eurodistmat[cbind(sq2[,2],sq2[,1])]))
> }
> 
> genseq <- function(sq) {  # Generate new candidate sequence 
>     idx <- seq(2, NROW(eurodistmat)-1, by=1)
>     changepoints <- sample(idx, size=2, replace=FALSE)
>     tmp <- sq[changepoints[1]]
>     sq[changepoints[1]] <- sq[changepoints[2]]
>     sq[changepoints[2]] <- tmp
>     return(sq)
> }
> 
> sq <- c(1,2:NROW(eurodistmat),1)  # Initial sequence
> distance(sq)
> 
> res <- optim(sq, distance, genseq, method="SANN",
>              control=list(maxit=20000, temp=2000 ,trace=T))
> res  # Near optimum distance around 12842
> 
> loc <- cmdscale(eurodist)
> rx <- range(x <- loc[,1])
> ry <- range(y <- -loc[,2])
> tspinit <- loc[sq,]
> tspres <- loc[res$par,]
> s <- seq(NROW(tspres)-1)
> 
> plot(x, y, type="n", asp=1, xlab="", ylab="",
>      main="initial solution of traveling salesman problem")
> arrows(tspinit[s,1], -tspinit[s,2], tspinit[s+1,1], -tspinit[s+1,2],
>        angle=10, col="green") 
> text(x, y, names(eurodist), cex=0.8)
> 
> plot(x, y, type="n", asp=1, xlab="", ylab="",
>      main="optim() 'solving' traveling salesman problem") 
> arrows(tspres[s,1], -tspres[s,2], tspres[s+1,1], -tspres[s+1,2],
>        angle=10, col="red")
> text(x, y, names(eurodist), cex=0.8)

--------------D871E36B191E8352EBC0EAA5
Content-Type: text/plain; charset=us-ascii;
 name="patch.optim.c"
Content-Transfer-Encoding: 7bit
Content-Disposition: inline;
 filename="patch.optim.c"

*** ./src/main/optim.c.origin	Mon Apr  8 08:19:48 2002
--- ./src/main/optim.c	Fri Oct 25 18:27:41 2002
***************
*** 155,164 ****
--- 155,193 ----
  	}
  	UNPROTECT(1); /* x */
      }
  }
  
+ static void genptry(int n, double *p, double *ptry, double scale, void *ex)
+ {    
+     SEXP s, x;
+     int i;
+     OptStruct OS = (OptStruct) ex;
+     PROTECT_INDEX ipx;
+ 
+     if (!isNull(OS->R_gcall)) {  /* user defined generation of candidate point */
+       	PROTECT(x = allocVector(REALSXP, n));
+ 	for (i = 0; i < n; i++) {
+ 	    if (!R_FINITE(p[i])) error("non-finite value supplied by optim");
+ 	    REAL(x)[i] = p[i] * (OS->parscale[i]);
+ 	}
+ 	SETCADR(OS->R_gcall, x);
+ 	PROTECT_WITH_INDEX(s = eval(OS->R_gcall, OS->R_env), &ipx);
+ 	REPROTECT(s = coerceVector(s, REALSXP), ipx);
+ 	if(LENGTH(s) != n)
+ 	    error("candidate point in optim evaluated to length %d not %d",
+ 		  LENGTH(s), n);
+ 	for (i = 0; i < n; i++)
+ 	    ptry[i] = REAL(s)[i] / (OS->parscale[i]);
+ 	UNPROTECT(2);
+     } 
+     else {  /* default Gaussian Markov kernel */
+         for (i = 0; i < n; i++)
+             ptry[i] = p[i] + scale * norm_rand();  /* new candidate point */
+     }
+ }
+ 
  /* par fn gr method options */
  SEXP do_optim(SEXP call, SEXP op, SEXP args, SEXP rho)
  {
      SEXP par, fn, gr, method, options, tmp, slower, supper;
      SEXP res, value, counts, conv;
***************
*** 219,237 ****
  	for (i = 0; i < npar; i++)
  	    REAL(par)[i] = opar[i] * (OS->parscale[i]);
  	grcount = NA_INTEGER;
  
      }
!     else if (strcmp(tn, "SANN") == 0) {
!       tmax = asInteger(getListElement(options, "tmax"));
!       temp = asReal(getListElement(options, "temp"));
!       if (tmax == NA_INTEGER) error("tmax is not an integer");
!       samin (npar, dpar, &val, fminfn, maxit, tmax, temp, trace, (void *)OS);
!       for (i = 0; i < npar; i++)
! 	  REAL(par)[i] = dpar[i] * (OS->parscale[i]);
!       fncount = maxit;
!       grcount = NA_INTEGER;
  
      } else if (strcmp(tn, "BFGS") == 0) {
  	SEXP ndeps;
  
  	nREPORT = asInteger(getListElement(options, "REPORT"));
--- 248,273 ----
  	for (i = 0; i < npar; i++)
  	    REAL(par)[i] = opar[i] * (OS->parscale[i]);
  	grcount = NA_INTEGER;
  
      }
!     else if (strcmp(tn, "SANN") == 0) {	
!         tmax = asInteger(getListElement(options, "tmax"));
!         temp = asReal(getListElement(options, "temp"));
!         if (tmax == NA_INTEGER) error("tmax is not an integer");
!         if (!isNull(gr)) {
!             if (!isFunction(gr)) error("gr is not a function");
!                 PROTECT(OS->R_gcall = lang2(gr, R_NilValue));
!         } else {
! 	    PROTECT(OS->R_gcall = R_NilValue); /* for balance */
!         }
!         samin (npar, dpar, &val, fminfn, maxit, tmax, temp, trace, (void *)OS);
!         for (i = 0; i < npar; i++)
!             REAL(par)[i] = dpar[i] * (OS->parscale[i]);
!         fncount = maxit;
!         grcount = NA_INTEGER;
!         UNPROTECT(1);  /* OS->R_gcall */
  
      } else if (strcmp(tn, "BFGS") == 0) {
  	SEXP ndeps;
  
  	nREPORT = asInteger(getListElement(options, "REPORT"));
***************
*** 1056,1074 ****
  	Rprintf ("sann objective function values\n");
  	Rprintf ("initial       value %f\n", *yb);
      }
      scale = 1.0/ti;
      its = itdoc = 1;
!     while (its < maxit) { /* cool down system */
  	t = ti/log((double)its + E1);  /* temperature annealing schedule */
  	k = 1;
  	while ((k <= tmax) && (its < maxit))  /* iterate at constant temperature */
  	{
! 	    for (i = 0; i < n; i++)
! 		dp[i] = scale * t * norm_rand();  /* random perturbation */
! 	    for (i = 0; i < n; i++)
! 		ptry[i] = p[i] + dp[i];  /* new candidate point */
  	    ytry = fminfn (n, ptry, ex);
  	    if (!R_FINITE(ytry)) ytry = big;
  	    dy = ytry - y;
  	    if ((dy <= 0.0) || (unif_rand() < exp(-dy/t))) {  /* accept new point? */
  		for (j = 0; j < n; j++) p[j] = ptry[j];
--- 1092,1107 ----
  	Rprintf ("sann objective function values\n");
  	Rprintf ("initial       value %f\n", *yb);
      }
      scale = 1.0/ti;
      its = itdoc = 1;
!     while (its < maxit) {  /* cool down system */
  	t = ti/log((double)its + E1);  /* temperature annealing schedule */
  	k = 1;
  	while ((k <= tmax) && (its < maxit))  /* iterate at constant temperature */
  	{
!             genptry(n, p, ptry, scale * t, ex);  /* generate new candidate point */
  	    ytry = fminfn (n, ptry, ex);
  	    if (!R_FINITE(ytry)) ytry = big;
  	    dy = ytry - y;
  	    if ((dy <= 0.0) || (unif_rand() < exp(-dy/t))) {  /* accept new point? */
  		for (j = 0; j < n; j++) p[j] = ptry[j];

--------------D871E36B191E8352EBC0EAA5--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Ko-Kang@xtra.co.nz  Sat Oct 26 09:43:04 2002
From: Ko-Kang@xtra.co.nz (Ko-Kang Kevin Wang)
Date: Sat, 26 Oct 2002 21:43:04 +1300
Subject: R-1.6.1beta available
References: <x2of9t451t.fsf@biostat.ku.dk>
Message-ID: <00fd01c27ccb$b39cd3c0$5c2758db@kwan022>

Just for interests, I have succesfully compiled  R-1.6.1beta_2002-10-25
using ActiveTcl 8.4.1.0 (released on 20 Oct) and Inno Setup 3.0.4 Beta (also
released on 20 Oct).

As mentioned before, with Inno Setup 3.x, they got rid of the
"AlwaysCreateUninstallIcon".  So I had to remove it from JRins before
compilation.  But the main interest, I guess, is it can be compiled with
ActiveTcl 8.4.1.0

Cheers,

Kevin

------------------------------------------------
Ko-Kang Kevin Wang
Post Graduate PGDipSci Student
Department of Statistics
University of Auckland
New Zealand
www.stat.auckland.ac.nz/~kwan022

----- Original Message -----
From: "Peter Dalgaard BSA" <p.dalgaard@biostat.ku.dk>
To: <r-devel@r-project.org>
Sent: Friday, October 18, 2002 1:34 AM
Subject: R-1.6.1beta available


> R 1.6.1 has been scheduled for November 1.
>
> We're makin interim beta versions available via
>
> http://cran.us.r-project.org/src/base
>
> (ftp://cran.us.r-project.org/pub/R/src/base used to work, but
> apparently FTP access has been disabled)
>
> The filename is R-1.6.1beta_*.tar.gz, where * is the creation date.
>
> If you want to help ensure that the final 1.6.1 works satisfactorily
> on *your* platform, it might be a good idea to make a test build of
> the beta and report any errors back (to the r-devel list, not to me
> personally, please!).
>
> New versions will be made available each day until the final release,
> barring hardware trouble and build script failures.
>
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Oct 26 10:48:04 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 26 Oct 2002 10:48:04 +0100 (BST)
Subject: R-1.6.1beta available
In-Reply-To: <00fd01c27ccb$b39cd3c0$5c2758db@kwan022>
Message-ID: <Pine.LNX.4.31.0210261037020.9033-100000@gannet.stats>

On Sat, 26 Oct 2002, Ko-Kang Kevin Wang wrote:

> Just for interests, I have succesfully compiled  R-1.6.1beta_2002-10-25
> using ActiveTcl 8.4.1.0 (released on 20 Oct) and Inno Setup 3.0.4 Beta (also
> released on 20 Oct).

Surely a Beta is never `released'!  We will consider using Inno Setup 3.x
once it really is released.

As far as I know we do not intend to build the 1.6.1 binary with Tcl
8.4.x, and the documentation does say that 8.3.x is required. A given
build has to use either 8.3 or 8.4 as the DLLs have different names.
Given the prevalence of 8.3, we won't I believe be moving to 8.4 for a
patch release. Maybe rw1070 will use Tcl 8.4.x.

> As mentioned before, with Inno Setup 3.x, they got rid of the
> "AlwaysCreateUninstallIcon".  So I had to remove it from JRins before
> compilation.  But the main interest, I guess, is it can be compiled with
> ActiveTcl 8.4.1.0

(I did add a patch to tcltk.c to allow it to build correctly under Tcl
8.4.x.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From frank.kroll@uni-bielefeld.de  Sat Oct 26 11:48:13 2002
From: frank.kroll@uni-bielefeld.de (frank.kroll@uni-bielefeld.de)
Date: Sat, 26 Oct 2002 12:48:13 +0200 (MET DST)
Subject: ls() without variables, which begins with a point (PR#2216)
Message-ID: <200210261048.MAA16177@pubhealth.ku.dk>

Full_Name: Frank Kroll
Version: 1.6.0
OS: Windows
Submission from: (NULL) (217.2.248.125)


The function ls() doesnt show variables, which begins with a point, i.e. .test

> .test<-c(1,2,3)
> .test
[1] 1 2 3
> ls()
character(0)
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Oct 26 14:00:40 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 26 Oct 2002 14:00:40 +0100 (BST)
Subject: ls() without variables, which begins with a point (PR#2216)
In-Reply-To: <200210261048.MAA16177@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210261355210.9237-100000@gannet.stats>

That's not a bug.  See the argument all.names.  There is even an example
on the help page (?ls) to educate you.

Please do read the section of the FAQ on what we want bug reports on.

On Sat, 26 Oct 2002 frank.kroll@uni-bielefeld.de wrote:

> Full_Name: Frank Kroll
> Version: 1.6.0
> OS: Windows
> Submission from: (NULL) (217.2.248.125)
>
>
> The function ls() doesnt show variables, which begins with a point, i.e. .test
>
> > .test<-c(1,2,3)
> > .test
> [1] 1 2 3
> > ls()
> character(0)
> >

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Sat Oct 26 14:20:34 2002
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sat, 26 Oct 2002 15:20:34 +0200 (MET DST)
Subject: ls() without variables, which begins with a point (PR#2216)
Message-ID: <200210261320.PAA16492@pubhealth.ku.dk>

frank.kroll@uni-bielefeld.de wrote:
> 
> Full_Name: Frank Kroll
> Version: 1.6.0
> OS: Windows
> Submission from: (NULL) (217.2.248.125)
> 
> The function ls() doesnt show variables, which begins with a point, i.e. .test
> 
> > .test<-c(1,2,3)
> > .test
> [1] 1 2 3
> > ls()
> character(0)

Why do you call this documented feature a bug?

Citing ?ls:
"all.names: a logical value. If TRUE, all object names are returned. If
FALSE, names which begin with a ``.'' are omitted."

Uwe Ligges

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Oct 27 08:18:52 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 27 Oct 2002 08:18:52 +0000 (GMT)
Subject: VR update
Message-ID: <Pine.LNX.4.31.0210270808270.16692-100000@gannet.stats>

There is an update to VR_7.0-9 on CRAN, which you may want to ensure you
have if you are beta-testing 1.6.1.

The only changes are in the scripts, working around changes in lattice,
mclust, nlme (where the examples stopped working on Linux, only, for me a
few months ago) and yags.

We do seem to be getting a lot of API changes in packages, usually
unannounced, and that makes update.packages() a very dangerous tool.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Sun Oct 27 21:40:58 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Sun, 27 Oct 2002 15:40:58 -0600
Subject: RODBC patchlet
Message-ID: <15804.23914.688113.981007@sonny.eddelbuettel.com>


[ Disclaimer: Yes, I do know that RODBC is in a state of minor limbo as far
as maintenance is concerned. But it is also useful, and used, which is why I
hope that someone might apply the small change outlined below. ]

The current version in CRAN's devel directories fails to build under R 1.6.1
(beta from Oct 27):

chibud:/home/edd/RODBC# R CMD INSTALL .
* Installing *source* package 'RODBC' ...
creating cache ./config.cache
checking for library containing SQLTables... -lodbc
updating cache ./config.cache
creating ./config.status
creating src/Makevars
** libs
gcc -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c RODBC.c -o RODBC.o
RODBC.c:22: parse error
make: *** [RODBC.o] Error 1
ERROR: compilation failed for package 'RODBC'

My quick solution was to #ifdef the following block of RODBC.c away:

#if 0
#if R_VERSION < R_Version(1, 2, 0)
# define STRING_ELT(x,i)        (STRING(x)[i])
# define VECTOR_ELT(x,i)        (VECTOR(x)[i])
# define SET_STRING_ELT(x,i,v)  (STRING(x)[i] = (v))
# define SET_VECTOR_ELT(x,i,v)  (VECTOR(x)[i] = (v))
#endif
#endif

I'm sure there is a nicer solution, but it is immediately apparent to me. The
gcc version which puked is 2.95.4 as in Debian testing.

Dirk

-- 
The only function of economic forecasting is to make astrology 
look respectable.                    -- John Kenneth Galbraith
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Oct 28 06:19:56 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 28 Oct 2002 07:19:56 +0100
Subject: RODBC patchlet
In-Reply-To: <15804.23914.688113.981007@sonny.eddelbuettel.com>
References: <15804.23914.688113.981007@sonny.eddelbuettel.com>
Message-ID: <15804.55052.516847.294806@mithrandir.hornik.net>

>>>>> Dirk Eddelbuettel writes:

> [ Disclaimer: Yes, I do know that RODBC is in a state of minor limbo
> as far as maintenance is concerned. But it is also useful, and used,
> which is why I hope that someone might apply the small change outlined
> below. ]

> The current version in CRAN's devel directories fails to build under R
> 1.6.1 (beta from Oct 27):

> chibud:/home/edd/RODBC# R CMD INSTALL .
> * Installing *source* package 'RODBC' ...
> creating cache ./config.cache
> checking for library containing SQLTables... -lodbc
> updating cache ./config.cache
> creating ./config.status
> creating src/Makevars
> ** libs
> gcc -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c RODBC.c -o RODBC.o
> RODBC.c:22: parse error
> make: *** [RODBC.o] Error 1
> ERROR: compilation failed for package 'RODBC'

> My quick solution was to #ifdef the following block of RODBC.c away:

> #if 0
> #if R_VERSION < R_Version(1, 2, 0)
> # define STRING_ELT(x,i)        (STRING(x)[i])
> # define VECTOR_ELT(x,i)        (VECTOR(x)[i])
> # define SET_STRING_ELT(x,i,v)  (STRING(x)[i] = (v))
> # define SET_VECTOR_ELT(x,i,v)  (VECTOR(x)[i] = (v))
> #endif
> #endif

> I'm sure there is a nicer solution, but it is immediately apparent to
> me. The gcc version which puked is 2.95.4 as in Debian testing.

This is basically the right solution: even better is to remove the < 1.2
code and add a Depends on R (>= 1.2) to DESCRIPTION.

Otoh, CRAN only accepts packages which are actively maintained, so we do
need a volunteer to step in.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 28 07:10:03 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 Oct 2002 07:10:03 +0000 (GMT)
Subject: RODBC patchlet
In-Reply-To: <15804.23914.688113.981007@sonny.eddelbuettel.com>
Message-ID: <Pine.LNX.4.31.0210280706270.10525-100000@gannet.stats>

Much more is needed.  I do plan to do produce an update fairly soon,
and as I don't have any current use of this under Unix, I will run it by
you if I may.

Brian

On Sun, 27 Oct 2002, Dirk Eddelbuettel wrote:

>
> [ Disclaimer: Yes, I do know that RODBC is in a state of minor limbo as far
> as maintenance is concerned. But it is also useful, and used, which is why I
> hope that someone might apply the small change outlined below. ]
>
> The current version in CRAN's devel directories fails to build under R 1.6.1
> (beta from Oct 27):
>
> chibud:/home/edd/RODBC# R CMD INSTALL .
> * Installing *source* package 'RODBC' ...
> creating cache ./config.cache
> checking for library containing SQLTables... -lodbc
> updating cache ./config.cache
> creating ./config.status
> creating src/Makevars
> ** libs
> gcc -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c RODBC.c -o RODBC.o
> RODBC.c:22: parse error
> make: *** [RODBC.o] Error 1
> ERROR: compilation failed for package 'RODBC'
>
> My quick solution was to #ifdef the following block of RODBC.c away:

Well, the 160update.txt on the developer site (and the NEWS file) tells
you that you need to include Rversion.h.

> #if 0
> #if R_VERSION < R_Version(1, 2, 0)
> # define STRING_ELT(x,i)        (STRING(x)[i])
> # define VECTOR_ELT(x,i)        (VECTOR(x)[i])
> # define SET_STRING_ELT(x,i,v)  (STRING(x)[i] = (v))
> # define SET_VECTOR_ELT(x,i,v)  (VECTOR(x)[i] = (v))
> #endif
> #endif
>
> I'm sure there is a nicer solution, but it is immediately apparent to me. The
> gcc version which puked is 2.95.4 as in Debian testing.
>
> Dirk
>
> --
> The only function of economic forecasting is to make astrology
> look respectable.                    -- John Kenneth Galbraith
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Mon Oct 28 09:07:20 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Mon, 28 Oct 2002 10:07:20 +0100
Subject: RFC: no automatic updates of packages with major version change
Message-ID: <15804.65096.834736.160738@celeborn.leisch.at>


We (Kurt Hornik, Brian Ripley & I) want to propose the following
change to the automatic package updating mechanisms of R: A major
version number change of a package will by default disable the
automatic updating of packages, because the interface of the package
might have changed and hence old code might not run anymore.

A recent example was the release of mclust version 2.0, which is not
fully compatible with mclust 1.x (functions got removed, others added
and arguments renamed etc).

Of course it is absolutely OK for a package to change its API,
otherwise improvements would be rather hard, but it should be easier
for users to stay with the old version until they have figured out
what exactly the effects of an upgrade would be.

We want to define a "major version number change" as a change of the
first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
from 0.x to 1.x is no major change (because the 0.x series is read as
"working towards 1.0").

In case of a major change

*) update.packages() will warn the user if ask=TRUE, like

mclust :
 Version 1.1-7 in /usr/local/lib/R-contrib 
 Version 2.0-1 on CRAN
 WARNING: major version number change
Update (y/N)?

*) if ask=FALSE, update.packages() will cowardly refuse the updates
 and issue a warning for all packages that have not been updated.

*) the same will be done for the methods working off packageStatus
 objects.

Note that we are already working on new package management tools which
should make it easier to have multiple versions of a package installed
simultaneously. 

All comments are welcome.

Best,
Fritz
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Oct 28 10:19:22 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 28 Oct 2002 11:19:22 +0100 (MET)
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <15804.65096.834736.160738@celeborn.leisch.at>
Message-ID: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>

> 
> We (Kurt Hornik, Brian Ripley & I) want to propose the following
> change to the automatic package updating mechanisms of R: A major
> version number change of a package will by default disable the
> automatic updating of packages, because the interface of the package
> might have changed and hence old code might not run anymore.
> 
> A recent example was the release of mclust version 2.0, which is not
> fully compatible with mclust 1.x (functions got removed, others added
> and arguments renamed etc).
> 
> Of course it is absolutely OK for a package to change its API,
> otherwise improvements would be rather hard, but it should be easier
> for users to stay with the old version until they have figured out
> what exactly the effects of an upgrade would be.
> 
> We want to define a "major version number change" as a change of the
> first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> from 0.x to 1.x is no major change (because the 0.x series is read as
> "working towards 1.0").
> 

This definition requires EVERY package maintainer to be VERY careful about
version numbers / API changes and I guess some of us (including me) may
fail this exercise.

I suggest the following definition: the API of a package changed
iff the example code of the previous version of the package does not run
without an error. In contrast, the results of the computations may
differ. Of course, this induces additional effort to the CRAN maintainers
but it should be possible to extract and check the examples of a CRAN
package against a new version BEFORE uploading the new version to CRAN. In
addition, a flag `APIChange TRUE / FALSE' visible to `update.packages' is
needed.

Or should this be part of R CMD check? Maybe R CMD check can download the
`official' release from CRAN to check against an API change and give a
warning?

best, 

Torsten

> In case of a major change
> 
> *) update.packages() will warn the user if ask=TRUE, like
> 
> mclust :
>  Version 1.1-7 in /usr/local/lib/R-contrib 
>  Version 2.0-1 on CRAN
>  WARNING: major version number change
> Update (y/N)?
> 
> *) if ask=FALSE, update.packages() will cowardly refuse the updates
>  and issue a warning for all packages that have not been updated.
> 
> *) the same will be done for the methods working off packageStatus
>  objects.
> 
> Note that we are already working on new package management tools which
> should make it easier to have multiple versions of a package installed
> simultaneously. 
> 
> All comments are welcome.
> 
> Best,
> Fritz
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Oct 28 11:28:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 Oct 2002 11:28:30 +0000 (GMT)
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
Message-ID: <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>

Torsten,

I did suggest that test at an earlier stage in the discussions.  But some
packages have so few examples they may well pass and have repercussions.

I do think we need to address the problem: lattice_0.6-5 is another
example of an API change.

Now, we could throw the onus on the maintainers to add a

BackwardsCompatible:FALSE

flag to the DESCRIPTION file, if people really think that would be easier.

Brian

On Mon, 28 Oct 2002, Torsten Hothorn wrote:

> >
> > We (Kurt Hornik, Brian Ripley & I) want to propose the following
> > change to the automatic package updating mechanisms of R: A major
> > version number change of a package will by default disable the
> > automatic updating of packages, because the interface of the package
> > might have changed and hence old code might not run anymore.
> >
> > A recent example was the release of mclust version 2.0, which is not
> > fully compatible with mclust 1.x (functions got removed, others added
> > and arguments renamed etc).
> >
> > Of course it is absolutely OK for a package to change its API,
> > otherwise improvements would be rather hard, but it should be easier
> > for users to stay with the old version until they have figured out
> > what exactly the effects of an upgrade would be.
> >
> > We want to define a "major version number change" as a change of the
> > first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> > change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> > from 0.x to 1.x is no major change (because the 0.x series is read as
> > "working towards 1.0").
> >
>
> This definition requires EVERY package maintainer to be VERY careful about
> version numbers / API changes and I guess some of us (including me) may
> fail this exercise.
>
> I suggest the following definition: the API of a package changed
> iff the example code of the previous version of the package does not run
> without an error. In contrast, the results of the computations may
> differ. Of course, this induces additional effort to the CRAN maintainers
> but it should be possible to extract and check the examples of a CRAN
> package against a new version BEFORE uploading the new version to CRAN. In
> addition, a flag `APIChange TRUE / FALSE' visible to `update.packages' is
> needed.
>
> Or should this be part of R CMD check? Maybe R CMD check can download the
> `official' release from CRAN to check against an API change and give a
> warning?
>
> best,
>
> Torsten
>
> > In case of a major change
> >
> > *) update.packages() will warn the user if ask=TRUE, like
> >
> > mclust :
> >  Version 1.1-7 in /usr/local/lib/R-contrib
> >  Version 2.0-1 on CRAN
> >  WARNING: major version number change
> > Update (y/N)?
> >
> > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> >  and issue a warning for all packages that have not been updated.
> >
> > *) the same will be done for the methods working off packageStatus
> >  objects.
> >
> > Note that we are already working on new package management tools which
> > should make it easier to have multiple versions of a package installed
> > simultaneously.
> >
> > All comments are welcome.
> >
> > Best,
> > Fritz
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Oct 28 11:54:47 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 28 Oct 2002 12:54:47 +0100
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
References: <15804.65096.834736.160738@celeborn.leisch.at>
 <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
Message-ID: <15805.9607.993910.88576@mithrandir.hornik.net>

>>>>> Torsten Hothorn writes:

>> 
>> We (Kurt Hornik, Brian Ripley & I) want to propose the following
>> change to the automatic package updating mechanisms of R: A major
>> version number change of a package will by default disable the
>> automatic updating of packages, because the interface of the package
>> might have changed and hence old code might not run anymore.
>> 
>> A recent example was the release of mclust version 2.0, which is not
>> fully compatible with mclust 1.x (functions got removed, others added
>> and arguments renamed etc).
>> 
>> Of course it is absolutely OK for a package to change its API,
>> otherwise improvements would be rather hard, but it should be easier
>> for users to stay with the old version until they have figured out
>> what exactly the effects of an upgrade would be.
>> 
>> We want to define a "major version number change" as a change of the
>> first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
>> change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
>> from 0.x to 1.x is no major change (because the 0.x series is read as
>> "working towards 1.0").
>> 

> This definition requires EVERY package maintainer to be VERY careful
> about version numbers / API changes and I guess some of us (including
> me) may fail this exercise.

> I suggest the following definition: the API of a package changed iff
> the example code of the previous version of the package does not run
> without an error. In contrast, the results of the computations may
> differ. Of course, this induces additional effort to the CRAN
> maintainers but it should be possible to extract and check the
> examples of a CRAN package against a new version BEFORE uploading the
> new version to CRAN. In addition, a flag `APIChange TRUE / FALSE'
> visible to `update.packages' is needed.

> Or should this be part of R CMD check? Maybe R CMD check can download
> the `official' release from CRAN to check against an API change and
> give a warning?

All of this might be doable but I am not sure it is worth the effort.

If a package has basically no examples then it can change things in
all possible ways without breaking its examples.  So I think that the
condition is an 'if' but far far away from an 'only if'.

I would assume that most package writers know when they change their
code in incompatible ways.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Mon Oct 28 12:18:57 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Mon, 28 Oct 2002 13:18:57 +0100
Subject: RODBC patchlet
In-Reply-To: <Pine.LNX.4.31.0210280706270.10525-100000@gannet.stats>
References: <15804.23914.688113.981007@sonny.eddelbuettel.com>
 <Pine.LNX.4.31.0210280706270.10525-100000@gannet.stats>
Message-ID: <15805.11057.675721.725432@mithrandir.hornik.net>

>>>>>   writes:

> Much more is needed.  I do plan to do produce an update fairly soon,
> and as I don't have any current use of this under Unix, I will run it
> by you if I may.

Great news!  Thanks for taking this up, Brian.

Best
-k

> Brian

> On Sun, 27 Oct 2002, Dirk Eddelbuettel wrote:

>> 
>> [ Disclaimer: Yes, I do know that RODBC is in a state of minor limbo as far
>> as maintenance is concerned. But it is also useful, and used, which is why I
>> hope that someone might apply the small change outlined below. ]
>> 
>> The current version in CRAN's devel directories fails to build under R 1.6.1
>> (beta from Oct 27):
>> 
>> chibud:/home/edd/RODBC# R CMD INSTALL .
>> * Installing *source* package 'RODBC' ...
>> creating cache ./config.cache
>> checking for library containing SQLTables... -lodbc
>> updating cache ./config.cache
>> creating ./config.status
>> creating src/Makevars
>> ** libs
>> gcc -I/usr/lib/R/include   -D__NO_MATH_INLINES -mieee-fp  -fPIC  -g -O2 -c RODBC.c -o RODBC.o
>> RODBC.c:22: parse error
>> make: *** [RODBC.o] Error 1
>> ERROR: compilation failed for package 'RODBC'
>> 
>> My quick solution was to #ifdef the following block of RODBC.c away:

> Well, the 160update.txt on the developer site (and the NEWS file) tells
> you that you need to include Rversion.h.

>> #if 0
>> #if R_VERSION < R_Version(1, 2, 0)
>> # define STRING_ELT(x,i)        (STRING(x)[i])
>> # define VECTOR_ELT(x,i)        (VECTOR(x)[i])
>> # define SET_STRING_ELT(x,i,v)  (STRING(x)[i] = (v))
>> # define SET_VECTOR_ELT(x,i,v)  (VECTOR(x)[i] = (v))
>> #endif
>> #endif
>> 
>> I'm sure there is a nicer solution, but it is immediately apparent to me. The
>> gcc version which puked is 2.95.4 as in Debian testing.
>> 
>> Dirk
>> 
>> --
>> The only function of economic forecasting is to make astrology
>> look respectable.                    -- John Kenneth Galbraith
>> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
>> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>> Send "info", "help", or "[un]subscribe"
>> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>> 

> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Torsten.Hothorn@rzmail.uni-erlangen.de  Mon Oct 28 12:24:51 2002
From: Torsten.Hothorn@rzmail.uni-erlangen.de (Torsten Hothorn)
Date: Mon, 28 Oct 2002 13:24:51 +0100 (MET)
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
Message-ID: <Pine.LNX.4.21.0210281322240.12788-100000@artemis>


On Mon, 28 Oct 2002 ripley@stats.ox.ac.uk wrote:

> Torsten,
> 
> I did suggest that test at an earlier stage in the discussions.  But some
> packages have so few examples they may well pass and have repercussions.
> 

ok, I see.

> I do think we need to address the problem: lattice_0.6-5 is another
> example of an API change.
> 
> Now, we could throw the onus on the maintainers to add a
> 
> BackwardsCompatible:FALSE
> 
> flag to the DESCRIPTION file, if people really think that would be easier.
> 

yes, that would be better than just assuming API changes in every major
release. 

Torsten

> Brian
> 
> On Mon, 28 Oct 2002, Torsten Hothorn wrote:
> 
> > >
> > > We (Kurt Hornik, Brian Ripley & I) want to propose the following
> > > change to the automatic package updating mechanisms of R: A major
> > > version number change of a package will by default disable the
> > > automatic updating of packages, because the interface of the package
> > > might have changed and hence old code might not run anymore.
> > >
> > > A recent example was the release of mclust version 2.0, which is not
> > > fully compatible with mclust 1.x (functions got removed, others added
> > > and arguments renamed etc).
> > >
> > > Of course it is absolutely OK for a package to change its API,
> > > otherwise improvements would be rather hard, but it should be easier
> > > for users to stay with the old version until they have figured out
> > > what exactly the effects of an upgrade would be.
> > >
> > > We want to define a "major version number change" as a change of the
> > > first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> > > change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> > > from 0.x to 1.x is no major change (because the 0.x series is read as
> > > "working towards 1.0").
> > >
> >
> > This definition requires EVERY package maintainer to be VERY careful about
> > version numbers / API changes and I guess some of us (including me) may
> > fail this exercise.
> >
> > I suggest the following definition: the API of a package changed
> > iff the example code of the previous version of the package does not run
> > without an error. In contrast, the results of the computations may
> > differ. Of course, this induces additional effort to the CRAN maintainers
> > but it should be possible to extract and check the examples of a CRAN
> > package against a new version BEFORE uploading the new version to CRAN. In
> > addition, a flag `APIChange TRUE / FALSE' visible to `update.packages' is
> > needed.
> >
> > Or should this be part of R CMD check? Maybe R CMD check can download the
> > `official' release from CRAN to check against an API change and give a
> > warning?
> >
> > best,
> >
> > Torsten
> >
> > > In case of a major change
> > >
> > > *) update.packages() will warn the user if ask=TRUE, like
> > >
> > > mclust :
> > >  Version 1.1-7 in /usr/local/lib/R-contrib
> > >  Version 2.0-1 on CRAN
> > >  WARNING: major version number change
> > > Update (y/N)?
> > >
> > > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> > >  and issue a warning for all packages that have not been updated.
> > >
> > > *) the same will be done for the methods working off packageStatus
> > >  objects.
> > >
> > > Note that we are already working on new package management tools which
> > > should make it easier to have multiple versions of a package installed
> > > simultaneously.
> > >
> > > All comments are welcome.
> > >
> > > Best,
> > > Fritz
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From philippe.grosjean@ifremer.fr  Mon Oct 28 13:06:18 2002
From: philippe.grosjean@ifremer.fr (Philippe Grosjean)
Date: Mon, 28 Oct 2002 14:06:18 +0100
Subject: no automatic updates of packages with major version change
Message-ID: <MABBLJDICACNFOLGIHJOEEEIDAAA.philippe.grosjean@ifremer.fr>

>We (Kurt Hornik, Brian Ripley & I) want to propose the following
>change to the automatic package updating mechanisms of R: A major
>version number change of a package will by default disable the
>automatic updating of packages, because the interface of the package
>might have changed and hence old code might not run anymore.

>...

>We want to define a "major version number change" as a change of the
>first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
>change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
>from 0.x to 1.x is no major change (because the 0.x series is read as
>"working towards 1.0").

This makes sense, otherwise, what would be the reasons of a "complex"
three-level granularity versioning system
X.Y-Z with:
- X being major changes implying *modifications* of the interface (I would
rather eliminate "might" in "might" have changed, otherwise, nobody will
ever know if something really changed or not, see hereunder!)
- Y being addition of new features, while staying fully compatible with the
previous version (with same X)
- Z being maintenance version (no new feature compared to same X.Y, but
correction of bugs).

If everybody conform strictly to this scheme, life will be much, much more
easier! The problem is that not everybody does... and we have X.Y versions
for some packages (what do they means?), or even 2002.X-Y (with 2002 being
the year, and perhaps X being the month [??] of release). All this is
confusing. It should be useful to explain more deeply the recommended
versioning system for R packages in R-exts.pdf.

I understand that, currently, major version 'X' is admitted to increase when
major changes are made, even when the upgraded package remains fully
compatible with the previous version (and this is the desired behaviour, of
course). So, my suggestion is allowing 'X' to increase *only* when
*incompatible* changes are made.

There is still a problem with this versioning system for R packages. When
somebody wants to keep an old major version to keep compatibility with old
scripts, and want also to install the brand new major version to start
exploring it. In this case, there is a conflict because both packages bear
the same name! The simplest solution would be to change the name of the
package (for 'PkgName' for version 1.Y.Z to 'PkgName2' for version
2.Y.Z,...) allowing two or more major versions to live in the same system,
as it was once the case for survival (and now for 'mclust' versus
'mclust1998', although in this case it is the old package that changes its
name, and this is a problem for scripts that use something like
'require(mclust)' and refer to the old interface!!!). There are still
possible confusion when both 'PkgName' and 'PkgName2' are loaded
simultaneously, because many functions are likely to have the same name in
both packages,... but at least, it solves a part of the problem.

Best,

Philippe Grosjean

...........]<(({<...............<}))><...............................
( ( ( ( (
 ) ) ) ) )      Philippe Grosjean
( ( ( ( (
 ) ) ) ) )      IFREMER Nantes - DEL/AO
( ( ( ( (       rue de l'Ile d'Yeu, BP 21105, 44311 Nantes Cedex 3
 ) ) ) ) )      tel: (33) 02.40.37.42.29, fax: (33) 02.40.37.42.41
( ( ( ( ( 
 ) ) ) ) )      SciViews project coordinator (http://www.sciviews.org)
( ( ( ( (       e-mail: phgrosjean@sciviews.org
 ) ) ) ) ) 
( ( ( ( (       "I'm 100% confident that p is between 0 and 1"
 ) ) ) ) )                                L. Gonick & W. Smith (1993)
.......................................................................


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Mon Oct 28 13:08:26 2002
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Mon, 28 Oct 2002 14:08:26 +0100
Subject: RFC: no automatic updates of packages with major version change
References: <Pine.LNX.4.21.0210281322240.12788-100000@artemis>
Message-ID: <3DBD36CA.777A0B6E@ci.tuwien.ac.at>

Torsten Hothorn wrote:
> 
> On Mon, 28 Oct 2002 ripley@stats.ox.ac.uk wrote:
> 
> > Torsten,
> >
> > I did suggest that test at an earlier stage in the discussions.  But some
> > packages have so few examples they may well pass and have repercussions.
> >
> 
> ok, I see.
> 
> > I do think we need to address the problem: lattice_0.6-5 is another
> > example of an API change.
> >
> > Now, we could throw the onus on the maintainers to add a
> >
> > BackwardsCompatible:FALSE
> >
> > flag to the DESCRIPTION file, if people really think that would be easier.
> >
> 
> yes, that would be better than just assuming API changes in every major
> release.

I would agree with that. By now the version is just required to be "a
sequence of at least non-negative integers separated by single `.' or
`-' characters" and can not necessarily be expected to follow the same
system as the R releases.
A field in the DESCRIPTION file is something package maintainers are
more used to, I guess. And obviously there are sometimes API changes
that do not occur when there is a major version number change...
Z

> Torsten
> 
> > Brian
> >
> > On Mon, 28 Oct 2002, Torsten Hothorn wrote:
> >
> > > >
> > > > We (Kurt Hornik, Brian Ripley & I) want to propose the following
> > > > change to the automatic package updating mechanisms of R: A major
> > > > version number change of a package will by default disable the
> > > > automatic updating of packages, because the interface of the package
> > > > might have changed and hence old code might not run anymore.
> > > >
> > > > A recent example was the release of mclust version 2.0, which is not
> > > > fully compatible with mclust 1.x (functions got removed, others added
> > > > and arguments renamed etc).
> > > >
> > > > Of course it is absolutely OK for a package to change its API,
> > > > otherwise improvements would be rather hard, but it should be easier
> > > > for users to stay with the old version until they have figured out
> > > > what exactly the effects of an upgrade would be.
> > > >
> > > > We want to define a "major version number change" as a change of the
> > > > first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> > > > change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> > > > from 0.x to 1.x is no major change (because the 0.x series is read as
> > > > "working towards 1.0").
> > > >
> > >
> > > This definition requires EVERY package maintainer to be VERY careful about
> > > version numbers / API changes and I guess some of us (including me) may
> > > fail this exercise.
> > >
> > > I suggest the following definition: the API of a package changed
> > > iff the example code of the previous version of the package does not run
> > > without an error. In contrast, the results of the computations may
> > > differ. Of course, this induces additional effort to the CRAN maintainers
> > > but it should be possible to extract and check the examples of a CRAN
> > > package against a new version BEFORE uploading the new version to CRAN. In
> > > addition, a flag `APIChange TRUE / FALSE' visible to `update.packages' is
> > > needed.
> > >
> > > Or should this be part of R CMD check? Maybe R CMD check can download the
> > > `official' release from CRAN to check against an API change and give a
> > > warning?
> > >
> > > best,
> > >
> > > Torsten
> > >
> > > > In case of a major change
> > > >
> > > > *) update.packages() will warn the user if ask=TRUE, like
> > > >
> > > > mclust :
> > > >  Version 1.1-7 in /usr/local/lib/R-contrib
> > > >  Version 2.0-1 on CRAN
> > > >  WARNING: major version number change
> > > > Update (y/N)?
> > > >
> > > > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> > > >  and issue a warning for all packages that have not been updated.
> > > >
> > > > *) the same will be done for the methods working off packageStatus
> > > >  objects.
> > > >
> > > > Note that we are already working on new package management tools which
> > > > should make it easier to have multiple versions of a package installed
> > > > simultaneously.
> > > >
> > > > All comments are welcome.
> > > >
> > > > Best,
> > > > Fritz
> > > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > > Send "info", "help", or "[un]subscribe"
> > > > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > > >
> > >
> > > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > >
> >
> > --
> > Brian D. Ripley,                  ripley@stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272860 (secr)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Mon Oct 28 13:09:50 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Mon, 28 Oct 2002 08:09:50 -0500
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
References: <Pine.LNX.4.21.0210281107130.7939-100000@artemis> <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
Message-ID: <pvcqru8mhqodgt4gpks5p7qaksar88nifk@4ax.com>

On Mon, 28 Oct 2002 11:28:30 +0000 (GMT), you wrote:

>Now, we could throw the onus on the maintainers to add a
>
>BackwardsCompatible:FALSE
>
>flag to the DESCRIPTION file, if people really think that would be easier.

I think that approach would be better. A major version number change
is appropriate if I add a lot of functions to a package, even though
it may still be compatible with earlier releases.

But instead of "FALSE", I'd rather see the earliest compatible version
number listed.  For example, if 1.0, 2.0 and 2.1 are all compatible,
all versions could say

 BackwardsCompatibleTo:  1.0

If I had skipped upgrading to 2.0, I'd still know that 2.1 is
compatible with 1.0.  Similarly, if 2.0 was incompatible with 1.0,
this scheme would tell me that it was not safe to go directly from 1.0
to 2.1.

Duncan Murdoch

 
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Mon Oct 28 13:12:19 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Mon, 28 Oct 2002 08:12:19 -0500
Subject: RFC: no automatic updates of packages with major version
 chan	ge
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC815@usrymx10.merck.com>

Is it possible to have a slightly more elaborate description, such as:

BackwardCompatibleTo: x.x-x

and if the new version is _not_ backward compatible, this would be the
current version number?

Just my $0.02...

Andy

-----Original Message-----
From: Torsten Hothorn [mailto:Torsten.Hothorn@rzmail.uni-erlangen.de]
Sent: Monday, October 28, 2002 7:25 AM
To: ripley@stats.ox.ac.uk
Cc: Friedrich.Leisch@ci.tuwien.ac.at; r-devel@stat.math.ethz.ch
Subject: Re: RFC: no automatic updates of packages with major version
change



On Mon, 28 Oct 2002 ripley@stats.ox.ac.uk wrote:

> Torsten,
> 
> I did suggest that test at an earlier stage in the discussions.  But some
> packages have so few examples they may well pass and have repercussions.
> 

ok, I see.

> I do think we need to address the problem: lattice_0.6-5 is another
> example of an API change.
> 
> Now, we could throw the onus on the maintainers to add a
> 
> BackwardsCompatible:FALSE
> 
> flag to the DESCRIPTION file, if people really think that would be easier.
> 

yes, that would be better than just assuming API changes in every major
release. 

Torsten

> Brian
> 
> On Mon, 28 Oct 2002, Torsten Hothorn wrote:
> 
> > >
> > > We (Kurt Hornik, Brian Ripley & I) want to propose the following
> > > change to the automatic package updating mechanisms of R: A major
> > > version number change of a package will by default disable the
> > > automatic updating of packages, because the interface of the package
> > > might have changed and hence old code might not run anymore.
> > >
> > > A recent example was the release of mclust version 2.0, which is not
> > > fully compatible with mclust 1.x (functions got removed, others added
> > > and arguments renamed etc).
> > >
> > > Of course it is absolutely OK for a package to change its API,
> > > otherwise improvements would be rather hard, but it should be easier
> > > for users to stay with the old version until they have figured out
> > > what exactly the effects of an upgrade would be.
> > >
> > > We want to define a "major version number change" as a change of the
> > > first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> > > change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> > > from 0.x to 1.x is no major change (because the 0.x series is read as
> > > "working towards 1.0").
> > >
> >
> > This definition requires EVERY package maintainer to be VERY careful
about
> > version numbers / API changes and I guess some of us (including me) may
> > fail this exercise.
> >
> > I suggest the following definition: the API of a package changed
> > iff the example code of the previous version of the package does not run
> > without an error. In contrast, the results of the computations may
> > differ. Of course, this induces additional effort to the CRAN
maintainers
> > but it should be possible to extract and check the examples of a CRAN
> > package against a new version BEFORE uploading the new version to CRAN.
In
> > addition, a flag `APIChange TRUE / FALSE' visible to `update.packages'
is
> > needed.
> >
> > Or should this be part of R CMD check? Maybe R CMD check can download
the
> > `official' release from CRAN to check against an API change and give a
> > warning?
> >
> > best,
> >
> > Torsten
> >
> > > In case of a major change
> > >
> > > *) update.packages() will warn the user if ask=TRUE, like
> > >
> > > mclust :
> > >  Version 1.1-7 in /usr/local/lib/R-contrib
> > >  Version 2.0-1 on CRAN
> > >  WARNING: major version number change
> > > Update (y/N)?
> > >
> > > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> > >  and issue a warning for all packages that have not been updated.
> > >
> > > *) the same will be done for the methods working off packageStatus
> > >  objects.
> > >
> > > Note that we are already working on new package management tools which
> > > should make it easier to have multiple versions of a package installed
> > > simultaneously.
> > >
> > > All comments are welcome.
> > >
> > > Best,
> > > Fritz
> > >
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> > > r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > > Send "info", "help", or "[un]subscribe"
> > > (in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
> > >
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
> > >
> >
> >
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> > r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To:
r-devel-request@stat.math.ethz.ch
> >
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._


------------------------------------------------------------------------------
Notice:  This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named in this message.  If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Mon Oct 28 14:22:23 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Mon, 28 Oct 2002 08:22:23 -0600
Subject: RODBC patchlet
Message-ID: <E186Amd-0003aF-00@sonny.eddelbuettel.com>



> > Much more is needed.  I do plan to do produce an update fairly soon,
> > and as I don't have any current use of this under Unix, I will run it
> > by you if I may.
> 
> Great news!  Thanks for taking this up, Brian.

Seconded. I really appreciate it, Brian. If you need help with Unix testing,
I do have the unixODBC libraries and headers here and would gladly run tests.

Dirk

-- 
According to the latest figures, 43% of all signatures are totally worthless.   
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Oct 28 15:08:46 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 28 Oct 2002 07:08:46 -0800 (PST)
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <15804.65096.834736.160738@celeborn.leisch.at>
Message-ID: <Pine.A41.4.44.0210280705450.104804-100000@homer36.u.washington.edu>

On Mon, 28 Oct 2002 Friedrich.Leisch@ci.tuwien.ac.at wrote:
>
> We want to define a "major version number change" as a change of the
> first digit of the version number, such that 1.1.1 -> 2.0.0 is a major
> change, while 1.1.1 -> 1.2.0 is not. An exception will be that a move
> from 0.x to 1.x is no major change (because the 0.x series is read as
> "working towards 1.0").
>

While R could set whatever standards it likes for package numbers I think
it's asking for trouble to require no API changes before version 1.0 (as
grid illustrates)

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Mon Oct 28 14:41:58 2002
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Mon, 28 Oct 2002 10:41:58 -0400
Subject: RFC: no automatic updates of packages with major version change
References: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
Message-ID: <3DBD4CB6.1DEDEB5@umsanet.edu.bo>



Torsten Hothorn wrote:
.
.
.

> 
> Or should this be part of R CMD check? Maybe R CMD check can download the
> `official' release from CRAN to check against an API change and give a
> warning?

It would be very inconvenient if R CMD check couldn't be run on a
machine without internet conection --- or a very unstable conection, as
I have.

Kjetil Halvorsen

> 
> best,
> 
> Torsten
> 
> > In case of a major change
> >
> > *) update.packages() will warn the user if ask=TRUE, like
> >
> > mclust :
> >  Version 1.1-7 in /usr/local/lib/R-contrib
> >  Version 2.0-1 on CRAN
> >  WARNING: major version number change
> > Update (y/N)?
> >
> > *) if ask=FALSE, update.packages() will cowardly refuse the updates
> >  and issue a warning for all packages that have not been updated.
> >
> > *) the same will be done for the methods working off packageStatus
> >  objects.
> >
> > Note that we are already working on new package management tools which
> > should make it easier to have multiple versions of a package installed
> > simultaneously.
> >
> > All comments are welcome.
> >
> > Best,
> > Fritz
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Oct 28 15:10:13 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 28 Oct 2002 10:10:13 -0500
Subject: RFC: no automatic updates of packages with major version change
References: <Pine.LNX.4.21.0210281107130.7939-100000@artemis> <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats> <pvcqru8mhqodgt4gpks5p7qaksar88nifk@4ax.com>
Message-ID: <3DBD5355.59B59755@bank-banque-canada.ca>

> >Now, we could throw the onus on the maintainers to add a
> >
> >BackwardsCompatible:FALSE
> >
> >flag to the DESCRIPTION file, if people really think that would be easier.

> But instead of "FALSE", I'd rather see the earliest compatible version
> number listed.  For example, if 1.0, 2.0 and 2.1 are all compatible,
> all versions could say
> 
>  BackwardsCompatibleTo:  1.0

I like this better too. To be safe, it is better to assume no backwards
compatibility unless it is indicate. Thus, if the line is omitted in the latter
case, then there is no guarantee, and in the former case the line should be

BackwardsCompatible:TRUE

with the default being FALSE.

Another thing that may be worth distinguishing is whether this means a library
is thought to be backward compatible, or tested to be backward compatible (and
perhaps tested on which versions of R). With respect to Depends: ( R > ?? ) I
admit to being somewhat delinquent in this respect. I change the R version if I
know something has changed, but I rarely test with old versions, and when I do
it is certainly only on one operating system.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a.stephenson@lancaster.ac.uk  Mon Oct 28 15:54:05 2002
From: a.stephenson@lancaster.ac.uk (a.stephenson@lancaster.ac.uk)
Date: Mon, 28 Oct 2002 16:54:05 +0100 (MET)
Subject: as.POSIX (PR#2222)
Message-ID: <200210281554.QAA28705@pubhealth.ku.dk>

Full_Name: Alec Stephenson
Version: 1.6.0
OS: linux
Submission from: (NULL) (148.88.138.5)


Appears to be a sign error in as.POSIX(lt/ct)

> library("chron")

The following is fine, with default origin.

> tmp <- chron(1:2, origin = c(1,1,1970))
> as.POSIXlt(tmp)
[1] "1970-01-02 01:00:00 GMT" "1970-01-03 01:00:00 GMT"

These are not.

> tmp <- chron(1:2, origin = c(1,1,1960))
> tmp
[1] 01/02/60 01/03/60
> as.POSIXlt(tmp)
[1] "1980-01-03 GMT" "1980-01-04 GMT"

> tmp <- chron(1:2, origin = c(1,1,1990))
> tmp
[1] 01/02/90 01/03/90
> as.POSIXlt(tmp)
[1] "1950-01-02 GMT" "1950-01-03 GMT"


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.0              
year     2002             
month    10               
day      01               
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgentry@jimmy.harvard.edu  Mon Oct 28 17:03:31 2002
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Mon, 28 Oct 2002 12:03:31 -0500 (EST)
Subject: no automatic updates of packages with major version change
In-Reply-To: <MABBLJDICACNFOLGIHJOEEEIDAAA.philippe.grosjean@ifremer.fr>
Message-ID: <Pine.SOL.4.20.0210281202090.10205-100000@santiam.dfci.harvard.edu>

> There is still a problem with this versioning system for R packages. When
> somebody wants to keep an old major version to keep compatibility with old
> scripts, and want also to install the brand new major version to start
> exploring it. In this case, there is a conflict because both packages bear
> the same name! The simplest solution would be to change the name of the
> package (for 'PkgName' for version 1.Y.Z to 'PkgName2' for version
> 2.Y.Z,...) allowing two or more major versions to live in the same system,

Another thing you can do for now is to maintain multiple R library
directories.  You would just have to be careful with the .libPaths(), etc.

This doesn't solve the problem of having them simultaneously loaded, but
for installs it will work.

-J

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Oct 28 17:07:05 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Oct 2002 18:07:05 +0100
Subject: as.POSIX (PR#2222)
In-Reply-To: <200210281554.QAA28705@pubhealth.ku.dk>
References: <200210281554.QAA28705@pubhealth.ku.dk>
Message-ID: <x24rb6a3wm.fsf@biostat.ku.dk>

a.stephenson@lancaster.ac.uk writes:

> Full_Name: Alec Stephenson
> Version: 1.6.0
> OS: linux
> Submission from: (NULL) (148.88.138.5)
> 
> 
> Appears to be a sign error in as.POSIX(lt/ct)
> 
> > library("chron")
> 
> The following is fine, with default origin.
> 
> > tmp <- chron(1:2, origin = c(1,1,1970))
> > as.POSIXlt(tmp)
> [1] "1970-01-02 01:00:00 GMT" "1970-01-03 01:00:00 GMT"
> 
> These are not.
> 
> > tmp <- chron(1:2, origin = c(1,1,1960))
> > tmp
> [1] 01/02/60 01/03/60
> > as.POSIXlt(tmp)
> [1] "1980-01-03 GMT" "1980-01-04 GMT"
> 
> > tmp <- chron(1:2, origin = c(1,1,1990))
> > tmp
> [1] 01/02/90 01/03/90
> > as.POSIXlt(tmp)
> [1] "1950-01-02 GMT" "1950-01-03 GMT"

Right. as.POSIXct.dates subtracts where it should add. Fixed
for 1.6.1 (provided it checks out).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From berwin@jacksonia.maths.uwa.edu.au  Tue Oct 29 01:22:23 2002
From: berwin@jacksonia.maths.uwa.edu.au (Berwin Turlach)
Date: Tue, 29 Oct 2002 09:22:23 +0800
Subject: RFC: no automatic updates of packages with major version change
In-Reply-To: <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
References: <Pine.LNX.4.21.0210281107130.7939-100000@artemis>
 <Pine.LNX.4.31.0210281124270.6985-100000@gannet.stats>
Message-ID: <15805.58063.994819.394198@localhost.localdomain>

>>>>> "BDR" ==   <ripley@stats.ox.ac.uk> writes:

    BDR> Now, we could throw the onus on the maintainers to add a

    BDR> BackwardsCompatible:FALSE

    BDR> flag to the DESCRIPTION file, if people really think that
    BDR> would be easier.
I wouldn't not find this easier, perhaps even not feasible. 

One reason is that, e.g., the "tseries" package depends on the
"quadprog" package (S original by me, ported to R by Andreas
Weingessel).  When I finally get around to update that package and
release a new version, I might be able to guarantee that the functions
that I meant to be the API are backwards compatible but short of
analysing the "tseries" code, I could not guarantee that the new
version will not break "tseries".  E.g., it could be that "tseries"
calls the FORTRAN code of "quadprog" directly and doesn't use
"quadprog"s R interface to the FORTRAN code.

Also, every larger package has functions it it that build the API, but
also functions that are helpful for the "main" functions and are not
for direct use by the user.  For example "merge.formula" in the
package "lasso2".  The manual says that is is not intended to be
called directly by the user.  But how should the maintainer now if
everybody follows this request?  Thus, if this function were to change
during a revision in a major way but not the functions that are meant
to build the API, would this mean that the new version is backward
compatible? 

Best wishes,

     Berwin

========================== Full address ============================
Berwin A Turlach                      Tel.: +61 (8) 9380 3338 (secr)   
School of Mathematics and Statistics        +61 (8) 9380 3383 (self)      
The University of Western Australia   FAX : +61 (8) 9380 1028
35 Stirling Highway                   
Crawley WA 6009                e-mail: berwin@maths.uwa.edu.au
Australia                        http://www.maths.uwa.edu.au/~berwin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a.stephenson@lancaster.ac.uk  Tue Oct 29 11:20:11 2002
From: a.stephenson@lancaster.ac.uk (a.stephenson@lancaster.ac.uk)
Date: Tue, 29 Oct 2002 12:20:11 +0100 (MET)
Subject: documentation for require (PR#2226)
Message-ID: <200210291120.MAA04954@pubhealth.ku.dk>

Full_Name: alec stephenson
Version: 1.6.0
OS: linux
Submission from: (NULL) (148.88.138.5)


The documentation for the function require is incorrect.

The file library.Rd has in its arguments section

  \item{quietly}{a logical.  If \code{TRUE}, a warning will not be
      printed if the package cannot be found.}

which is incorrect, as a warning message is always given if the package 
is not found.
Should be something like

  \item{quietly}{a logical.  If \code{TRUE}, a message confirming
      package loading is not printed.}

also, the details section has

  \code{require} is designed for use
  inside other functions; it returns \code{FALSE} and optionally gives a
  warning, rather than giving an error, if the package does not exist.

The sentence after the semi-colon is also appears to be incorrect, as
require calls library with logical.return = TRUE.
Should be something like 

  \code{require} is designed for use
  inside other functions; it returns \code{FALSE} and gives a warning
  if the package does not exist.



> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    6.0              
year     2002             
month    10               
day      01               
language R 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From andy_liaw@merck.com  Tue Oct 29 13:03:39 2002
From: andy_liaw@merck.com (Liaw, Andy)
Date: Tue, 29 Oct 2002 08:03:39 -0500
Subject: RFC: no automatic updates of packages with major version
 chan	ge
Message-ID: <51F9C42DA15CD311BD220008C707D81906FFC820@usrymx10.merck.com>

My understanding is that API needs to be a documented part of the software.
In the current R packaging system, there doesn't seem to be a way to
document interface to compiled code (i.e., what routines can be called and
how to call them) except in the comments, so I'd think calling compiled code
in other packages is not encouraged.  I should think people realize that
undocumented parts of the software are subject to change without notice.
People who make use of such things ought to know they are treading on thin
ice, IMHO.

Just my $0.02...
Andy

-----Original Message-----
From: Berwin Turlach [mailto:berwin@jacksonia.maths.uwa.edu.au]
Sent: Monday, October 28, 2002 8:22 PM
To: r-devel@stat.math.ethz.ch
Subject: Re: RFC: no automatic updates of packages with major version
change


>>>>> "BDR" ==   <ripley@stats.ox.ac.uk> writes:

    BDR> Now, we could throw the onus on the maintainers to add a

    BDR> BackwardsCompatible:FALSE

    BDR> flag to the DESCRIPTION file, if people really think that
    BDR> would be easier.
I wouldn't not find this easier, perhaps even not feasible. 

One reason is that, e.g., the "tseries" package depends on the
"quadprog" package (S original by me, ported to R by Andreas
Weingessel).  When I finally get around to update that package and
release a new version, I might be able to guarantee that the functions
that I meant to be the API are backwards compatible but short of
analysing the "tseries" code, I could not guarantee that the new
version will not break "tseries".  E.g., it could be that "tseries"
calls the FORTRAN code of "quadprog" directly and doesn't use
"quadprog"s R interface to the FORTRAN code.

Also, every larger package has functions it it that build the API, but
also functions that are helpful for the "main" functions and are not
for direct use by the user.  For example "merge.formula" in the
package "lasso2".  The manual says that is is not intended to be
called directly by the user.  But how should the maintainer now if
everybody follows this request?  Thus, if this function were to change
during a revision in a major way but not the functions that are meant
to build the API, would this mean that the new version is backward
compatible? 

Best wishes,

     Berwin

========================== Full address ============================
Berwin A Turlach                      Tel.: +61 (8) 9380 3338 (secr)   
School of Mathematics and Statistics        +61 (8) 9380 3383 (self)      
The University of Western Australia   FAX : +61 (8) 9380 1028
35 Stirling Highway                   
Crawley WA 6009                e-mail: berwin@maths.uwa.edu.au
Australia                        http://www.maths.uwa.edu.au/~berwin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._

------------------------------------------------------------------------------
Notice: This e-mail message, together with any attachments, contains information of Merck & Co., Inc. (Whitehouse Station, New Jersey, USA) that may be confidential, proprietary copyrighted and/or legally privileged, and is intended solely for the use of the individual or entity named on this message. If you are not the intended recipient, and have received this message in error, please immediately return this by e-mail and then delete it.

==============================================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue Oct 29 17:34:30 2002
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Tue, 29 Oct 2002 18:34:30 +0100 (MET)
Subject: patch to mva:prcomp to use La.svd instead of svd (PR#2227)
Message-ID: <200210291734.SAA09198@pubhealth.ku.dk>


Per the discussion about the problems with prcomp() when n << p,  which
boils down to a problem with svd() when n << p,
here is a patch to prcomp() which substitutes La.svd() instead of svd().

-Greg

(This is really a feature enhancement, but submitted to R-bugs to make sure
it doesn't get lost. )

*** R-1.6.0/src/library/mva/R/prcomp.R  Mon Aug 13 17:41:50 2001
--- R-1.6.0-GRW//src/library/mva/R/prcomp.R     Tue Oct 29 11:57:23 2002
***************
*** 1,18 ****
  prcomp <- function(x, retx = TRUE, center = TRUE, scale. = FALSE,
!                    tol = NULL) {
      x <- as.matrix(x)
      x <- scale(x, center = center, scale = scale.)
!     s <- svd(x, nu = 0)
      if (!is.null(tol)) {
          rank <- sum(s$d > (s$d[1]*tol))
          if (rank < ncol(x))
!             s$v <- s$v[, 1:rank, drop = FALSE]
      }
      s$d <- s$d / sqrt(max(1, nrow(x) - 1))
!     dimnames(s$v) <-
!         list(colnames(x), paste("PC", seq(len = ncol(s$v)), sep = ""))
!     r <- list(sdev = s$d, rotation = s$v)
!     if (retx) r$x <- x %*% s$v
      class(r) <- "prcomp"
      r
  }
--- 1,21 ----
  prcomp <- function (x, retx = TRUE, center = TRUE, scale. = FALSE,
!                     tol = NULL)
! {
      x <- as.matrix(x)
      x <- scale(x, center = center, scale = scale.)
!     s <- La.svd(x, nu = 0)
      if (!is.null(tol)) {
          rank <- sum(s$d > (s$d[1] * tol))
          if (rank < ncol(x))
!             s$vt <- s$vt[, 1:rank, drop = FALSE]
      }
      s$d <- s$d/sqrt(max(1, nrow(x) - 1))
!
!     dimnames(s$vt) <- list(paste("PC", seq(len = nrow(s$vt)), sep = ""),
!                            colnames(x), )
!     r <- list(sdev = s$d, rotation = t(s$vt) )
!     if (retx)
!         r$x <- x %*% t(s$vt)
      class(r) <- "prcomp"
      r
  }


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 29 17:43:20 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 29 Oct 2002 12:43:20 -0500
Subject: dependency in tests
Message-ID: <3DBEC8B8.C8CC47BE@bank-banque-canada.ca>

I have a package in which the code does not depend on another package,
but tests do. Should the Depends line in the description indicate this
dependency or is requires() in the tests sufficient?

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Oct 29 18:23:12 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 29 Oct 2002 18:23:12 +0000 (GMT)
Subject: dependency in tests
In-Reply-To: <3DBEC8B8.C8CC47BE@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0210291821330.24823-100000@gannet.stats>

On Tue, 29 Oct 2002, Paul Gilbert wrote:

> I have a package in which the code does not depend on another package,
> but tests do. Should the Depends line in the description indicate this
> dependency or is requires() in the tests sufficient?

I find it very helpful to have the Depends line there.  Anyone who wants
to run the tests needs the dependency, and builders of binary packages
meet this very frequently.

I think this is even more cogent for the examples.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Oct 29 19:06:46 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 29 Oct 2002 14:06:46 -0500
Subject: dependency in tests
References: <Pine.LNX.4.31.0210291821330.24823-100000@gannet.stats>
Message-ID: <3DBEDC46.91496922@bank-banque-canada.ca>

ripley@stats.ox.ac.uk wrote:
> 
> On Tue, 29 Oct 2002, Paul Gilbert wrote:
> 
> > I have a package in which the code does not depend on another package,
> > but tests do. Should the Depends line in the description indicate this
> > dependency or is requires() in the tests sufficient?
> 
> I find it very helpful to have the Depends line there.  Anyone who wants
> to run the tests needs the dependency, and builders of binary packages
> meet this very frequently.
> 
> I think this is even more cogent for the examples.

For the examples I have always assumed that one would not indicate
anything in the Depends line, and just put requires() in the example.
There is a trade-off here. I like to put in non-trivial examples (e.g.
using data from other packages), but if doing so means I should indicate
dependencies in addition to what the code needs, then I am reluctant to
add them. Perhaps we need something like

Depends.tests:
Depends.examples:
Depends.vignettes:

which are in addition to anything the code depends on.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgentry@jimmy.harvard.edu  Tue Oct 29 19:50:28 2002
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Tue, 29 Oct 2002 14:50:28 -0500 (EST)
Subject: dependency in tests
In-Reply-To: <3DBEDC46.91496922@bank-banque-canada.ca>
Message-ID: <Pine.SOL.4.20.0210291447540.14712-100000@santiam.dfci.harvard.edu>



On Tue, 29 Oct 2002, Paul Gilbert wrote:
> Depends.tests:
> Depends.examples:
> Depends.vignettes:

In the Bioconductor package 'reposTools' there is a three tiered notion of
dependencies, and I believe similar concepts have been discussed for us in
DESCRIPTION files.

Some discussion on this is included in the 'miscIssues' vignette from
reposTools (section 4), the PDF of which is available at:
http://www.bioconductor.org/repository//vignette/devel/miscIssues.pdf

-Jeff

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From y-yoshida@jp.fujitsu.com  Wed Oct 30 08:24:47 2002
From: y-yoshida@jp.fujitsu.com (y-yoshida@jp.fujitsu.com)
Date: Wed, 30 Oct 2002 09:24:47 +0100 (MET)
Subject: 2002-09-08 1.6.0 build fails in Recommended (PR#1995)
Message-ID: <200210300824.JAA12011@pubhealth.ku.dk>

stvjc@channing.harvard.edu:
 > <<insert bug report here>>
 > 
 > in src/library/Recommended, make yields
 > 
 > make: *** No rule to make target `survival.ts', needed by `all'.  Stop.
 > 
 > this kills the build.  but "make check" succeeds

This error occurs because symbolic link files in src/library/Recommended 
have wrong file extension names such as KernSmooth_tgz, which should be 
KernSmooth.tgz .

So, try the following:
$ cd src/library/Recommended/
$ mv KernSmooth_tgz KernSmooth.tgz
$ mv VR_tgz VR.tgz
(... for each _tgz file)

---
Y Yoshida
Fujitsu Laboratories, Ltd

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Oct 30 11:21:29 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 30 Oct 2002 12:21:29 +0100
Subject: [R] pretty not pretty
In-Reply-To: <15807.47844.122831.475588@gargle.gargle.HOWL>
References: <15806.43461.675233.576774@gargle.gargle.HOWL>
 <15807.47844.122831.475588@gargle.gargle.HOWL>
Message-ID: <15807.49337.25761.585343@gargle.gargle.HOWL>

{R-help -> R-devel  since this becomes too technical fine tuning}

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch>
>>>>>     on Wed, 30 Oct 2002 11:56:36 +0100 writes:

>>>>> "DavidB" == David Brahm <brahm@alum.mit.edu>
>>>>>     on Tue, 29 Oct 2002 10:31:17 -0500 writes:

    DavidB> Ott Toomet <otoomet@econ.au.dk> wrote:
    >>> Pretty (R 1.5.1) has problems with zero: 
    >>> pretty(smallch) 
    DavidB> [1] -2.00000e-02 -3.469447e-18 2.00000e-02 4.00000e-02 6.00000e-02 
    DavidB> [6] 8.000000e-02 1.000000e-01 1.200000e-01 
    >>> You notice -3.46e-18 instead of 0. Is this feature changed in 1.6.0, 
    >>> or are there any simple ways to get around of it? 

    DavidB> I mentioned this in R-devel on June 14, 2002
    DavidB> ("pretty() sometimes isn't").  It derives from the
    DavidB> roundoff error introduced in seq(-.02, .12,
    DavidB> length=8).  I suggested that the last line of the
    DavidB> code for pretty() should get a zapsmall() around it:


    DavidB> pretty <- function(...) {
    DavidB> ...
    DavidB> zapsmall(seq(z$l, z$u, length = z$n + 1))
    DavidB> }

    DavidB> Since that hasn't been implemented, you could simply
    DavidB> put a zapsmall() around every pretty() in your code.

    MM> It *) now _has_ been implemented. ---> will be in R-beta tomorrow
    MM> and R 1.6.1.
    MM> Whereas for seq() it is clear that you will see these roundoffs,
    MM> they are ``wrong'' for pretty().

    MM> Thank you David, for the reminder.

    MM> *) I've used  zapsmall(seq(z$l, z$u, length = z$n + 1), digits = 7)
    MM> instead in order to make sure that the result will not depend
    MM> on options("digits").

and now found that "digits = 7" is doing too much in rare cases.
As a matter fact, zapsmall() has been a misnomer ever since it
was created for S/S-plus :
    It rounds all values (as its documentation clearly says!), 
    i.e. is not only zapping the small values as its name suggests.

After my current testing, 
I think I want "digits = 14" (+/- 1 may be).
Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Oct 30 13:43:31 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 30 Oct 2002 14:43:31 +0100 (MET)
Subject: documentation for require (PR#2226)
Message-ID: <200210301343.OAA17710@pubhealth.ku.dk>

>>>>> "AlecS" == a stephenson <a.stephenson@lancaster.ac.uk>
>>>>>     on Tue, 29 Oct 2002 12:20:11 +0100 (MET) writes:


    AlecS> The documentation for the function require is incorrect.

yes.  Thank you very much for the (two) report(s)!

I'm about to commit the following change      

diff -w -r1.54 library.Rd
64,65c64,65
<   \item{quietly}{a logical.  If \code{TRUE}, a warning will not be
<     printed if the package cannot be found.}
---
>   \item{quietly}{a logical.  If \code{TRUE}, no message confirming
>       package loading is printed.}
83,84c83,84
<   inside other functions; it returns \code{FALSE} and optionally gives a
<   warning, rather than giving an error, if the package does not exist.
---
>   inside other functions; it returns \code{FALSE} and gives a warning
>   (rather than an error as \code{library()}) if the package does not exist.

-----

Thank you again.
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From JensHenrik.Badsberg@agrsci.dk  Wed Oct 30 14:51:37 2002
From: JensHenrik.Badsberg@agrsci.dk (JensHenrik.Badsberg@agrsci.dk)
Date: Wed, 30 Oct 2002 15:51:37 +0100 (MET)
Subject: Building and installing packages with functions with names starting with (PR#2229)
Message-ID: <200210301451.PAA18808@pubhealth.ku.dk>


 Dear Coreteam,

 I am getting closer to have some R-packages with interface to CoCo.
 I use something like package.skeleton("CoCo", list = ls(all.names
 = TRUE)) to also get my functions beginning with "." into the package.
 Functions with names starting with "." are put OK into the package
 during "R CMD build ...",  but when R at "R INSTALL - d ..." collects
 the R-files into the single file for putting into .../R the functions
 with names starting with "." are omitted ?!?

 Regards,

 Jens Henrik



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Wed Oct 30 14:54:28 2002
From: stvjc@channing.harvard.edu (Vincent J. Carey, Jr.)
Date: Wed, 30 Oct 2002 09:54:28 -0500 (EST)
Subject: silent option for library function
Message-ID: <200210301454.JAA13771@capecod.bwh.harvard.edu>

would it be possible to add an option to library that
prevents messages except when there are errors?  as
we build Sweave documents illustrating package functionalities
it is sometimes desirable to attach a package "behind
the scenes".  packages that have messages emitted
in .First.lib (often describing version or developer)
frustrate this particular desire.  verbose=FALSE
does not accomplish this.

note that i have no objection to messages produced by
default use of library.  i just want the ability to
suppress them when there are no errors.  currently
it is possible to do

sink(file="/dev/null")
library([e.g. affy])
sink()

but that may suppress too much -- an error message may be
lost.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 30 16:09:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 30 Oct 2002 16:09:31 +0000 (GMT)
Subject: silent option for library function
In-Reply-To: <200210301454.JAA13771@capecod.bwh.harvard.edu>
Message-ID: <Pine.LNX.4.31.0210301601500.5214-100000@gannet.stats>

On Wed, 30 Oct 2002, Vincent J. Carey, Jr. wrote:

> would it be possible to add an option to library that
> prevents messages except when there are errors?  as
> we build Sweave documents illustrating package functionalities
> it is sometimes desirable to attach a package "behind
> the scenes".  packages that have messages emitted
> in .First.lib (often describing version or developer)
> frustrate this particular desire.  verbose=FALSE
> does not accomplish this.
>
> note that i have no objection to messages produced by
> default use of library.  i just want the ability to
> suppress them when there are no errors.  currently
> it is possible to do
>
> sink(file="/dev/null")
> library([e.g. affy])
> sink()
>
> but that may suppress too much -- an error message may be
> lost.

Don't think so.  From help(sink):

     Normal R output is diverted by the default `type = "output"'. Only
     prompts and warning/error messages continue to appear on the
     terminal. These too can diverted by `type = "message"' (see
     below).

and for example

> sink(file="/dev/null")
> library(foo)
Error in firstlib(which.lib.loc, package) :
        testing
Error in library(foo) : .First.lib failed
> sink()

So how are you losing error messages?


BTW, there is no way for library() to control what a user does in his
.First.lib: he could put up a dialog box agreeing the usage terms.
Actually, that seems a rather good idea ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 30 16:23:13 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 30 Oct 2002 16:23:13 +0000 (GMT)
Subject: (PR#2229) Building and installing packages with functions with
 names starting with [title ends here!]
In-Reply-To: <200210301451.PAA18808@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0210301617250.5214-100000@gannet.stats>

You have omitted the details of your system, but I'll guess Unix.

The names of R functions are nothing to do with the file names.  Don't
use dotnames for files containing R functions: some OSes do really strange
things with them.  Maybe package.skeleton() should remap the names, but
if not you will need to do it yourself.

On Unix R INSTALL does omit dotnames.  On some Windows systems using Samba
they become hidden.  Just avoid them.


On Wed, 30 Oct 2002 JensHenrik.Badsberg@agrsci.dk wrote:

>
>  Dear Coreteam,
>
>  I am getting closer to have some R-packages with interface to CoCo.
>  I use something like package.skeleton("CoCo", list = ls(all.names
>  = TRUE)) to also get my functions beginning with "." into the package.
>  Functions with names starting with "." are put OK into the package
>  during "R CMD build ...",  but when R at "R INSTALL - d ..." collects
>  the R-files into the single file for putting into .../R the functions
>  with names starting with "." are omitted ?!?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Wed Oct 30 16:30:55 2002
From: stvjc@channing.harvard.edu (Vincent Carey 525-2265)
Date: Wed, 30 Oct 2002 11:30:55 -0500 (EST)
Subject: silent option for library function
In-Reply-To: <Pine.LNX.4.31.0210301601500.5214-100000@gannet.stats>
Message-ID: <Pine.GSO.4.40.0210301112360.5730-100000@falmouth.bwh.harvard.edu>

>
> Don't think so.  From help(sink):
>
>      Normal R output is diverted by the default `type = "output"'. Only
>      prompts and warning/error messages continue to appear on the
>      terminal. These too can diverted by `type = "message"' (see
>      below).
>
> and for example
>
> > sink(file="/dev/null")
> > library(foo)
> Error in firstlib(which.lib.loc, package) :
>         testing
> Error in library(foo) : .First.lib failed
> > sink()
>
> So how are you losing error messages?

The point on error messages was speculation.  I am wrong.

>
>
> BTW, there is no way for library() to control what a user does in his
> .First.lib: he could put up a dialog box agreeing the usage terms.
> Actually, that seems a rather good idea ....

Indeed.  However, one could modify library to divert normal R
output if a silent parameter were supplied.

Thus if i edit library to incorporate a parameter silent=FALSE,
and introduce the lines

if (silent) sink("/dev/null")
on.exit( if (silent) sink() )

at the top of the function body, the command

library(mgcv, silent=TRUE)

has the desired silent behavior.  however, ordinary
output is still diverted after the return from library(...)
in this case!  perhaps I misunderstand
the on.exit behavior.  I would expect that it would 'remove'
the sink set in library and restore ordinary processing.

The behavior noted here is for 1.6.1 of 10-19-2002

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Oct 30 16:25:55 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 30 Oct 2002 17:25:55 +0100
Subject: silent option for library function
In-Reply-To: <200210301454.JAA13771@capecod.bwh.harvard.edu>
References: <200210301454.JAA13771@capecod.bwh.harvard.edu>
Message-ID: <15808.2067.738679.499211@mithrandir.hornik.net>

>>>>> Vincent J Carey, writes:

> would it be possible to add an option to library that
> prevents messages except when there are errors?  as
> we build Sweave documents illustrating package functionalities
> it is sometimes desirable to attach a package "behind
> the scenes".  packages that have messages emitted
> in .First.lib (often describing version or developer)
> frustrate this particular desire.  verbose=FALSE
> does not accomplish this.

> note that i have no objection to messages produced by
> default use of library.  i just want the ability to
> suppress them when there are no errors.  currently
> it is possible to do

> sink(file="/dev/null")
> library([e.g. affy])
> sink()

> but that may suppress too much -- an error message may be
> lost.

The QA tools use the following:

.loadPackageQuietly <- function(package, lib.loc) {
    ## Load (reload if already loaded) @code{package} from
    ## @code{lib.loc}, capturing all output and messages.  All QA
    ## functions use this for loading packages because R CMD check
    ## interprets all output as indicating a problem.
    outConn <- textConnection("out", "w")
    sink(outConn, type = "output")
    sink(outConn, type = "message")
    yy <- try({
        pos <- match(paste("package", package, sep = ":"), search())
        if(!is.na(pos))
            detach(pos = pos)
        library(package, lib.loc = lib.loc, character.only = TRUE,
                verbose = FALSE)
    })
    if(inherits(yy, "try-error"))
        stop(yy)
    sink(type = "message")
    sink(type = "output")
    close(outConn)
}

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Oct 30 16:37:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 30 Oct 2002 16:37:31 +0000 (GMT)
Subject: silent option for library function
In-Reply-To: <Pine.GSO.4.40.0210301112360.5730-100000@falmouth.bwh.harvard.edu>
Message-ID: <Pine.LNX.4.31.0210301632330.5214-100000@gannet.stats>

On Wed, 30 Oct 2002, Vincent Carey 525-2265 wrote:

Quoting me, anonymously!

> > BTW, there is no way for library() to control what a user does in his
> > .First.lib: he could put up a dialog box agreeing the usage terms.
> > Actually, that seems a rather good idea ....
>
> Indeed.  However, one could modify library to divert normal R
> output if a silent parameter were supplied.
>
> Thus if i edit library to incorporate a parameter silent=FALSE,
> and introduce the lines
>
> if (silent) sink("/dev/null")
> on.exit( if (silent) sink() )
>
> at the top of the function body, the command
>
> library(mgcv, silent=TRUE)
>
> has the desired silent behavior.  however, ordinary
> output is still diverted after the return from library(...)
> in this case!  perhaps I misunderstand
> the on.exit behavior.  I would expect that it would 'remove'
> the sink set in library and restore ordinary processing.

Try

if(silent) {
  sink("/dev/null")
  on.exit(sink())
}

as silent is not in scope at on.exit, I believe.

I have to say I think this is not a good idea.  People who want to put out
copyright notices at the top of their packages should be allowed to do so,
and we should not make it easy to suppress them.

(BTW none of mine do on R, although they do on S-PLUS at Insightful's
insistence.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Wed Oct 30 16:31:22 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Wed, 30 Oct 2002 17:31:22 +0100
Subject: Building and installing packages with functions with names starting with (PR#2229)
In-Reply-To: <200210301451.PAA18808@pubhealth.ku.dk>
References: <200210301451.PAA18808@pubhealth.ku.dk>
Message-ID: <15808.2394.967294.483386@mithrandir.hornik.net>

>>>>> JensHenrik Badsberg writes:

>  Dear Coreteam,

>  I am getting closer to have some R-packages with interface to CoCo.
>  I use something like package.skeleton("CoCo", list = ls(all.names
>  = TRUE)) to also get my functions beginning with "." into the package.
>  Functions with names starting with "." are put OK into the package
>  during "R CMD build ...",  but when R at "R INSTALL - d ..." collects
>  the R-files into the single file for putting into .../R the functions
>  with names starting with "." are omitted ?!?

R CMD INSTALL behaves according to what is documented in R-exts:

	   The `R' subdirectory contains R code files.  The code files
	to be installed must start with a (lower or upper case) letter
	and have one of the extensions `.R', `.S', `.q', `.r', or `.s'.

So I believe the code in package.skeleton() which has

    cat("Saving functions and data\n")
    for (item in list) {
        if (is.function(get(item))) 
            dump(item, file = file.path(path, name, "R", paste(item, 
                "R", sep = ".")))
        else save(list = item, file = file.path(path, name, "data", 
            paste(item, "rda", sep = ".")))
    }

Also, I personally do not believe that non-functions in the environment
that is dumped out should by default be made into data sets.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stvjc@channing.harvard.edu  Wed Oct 30 16:56:28 2002
From: stvjc@channing.harvard.edu (Vincent Carey 525-2265)
Date: Wed, 30 Oct 2002 11:56:28 -0500 (EST)
Subject: silent option for library function
In-Reply-To: <Pine.LNX.4.31.0210301632330.5214-100000@gannet.stats>
Message-ID: <Pine.GSO.4.40.0210301141560.5730-100000@falmouth.bwh.harvard.edu>


On Wed, 30 Oct 2002 ripley@stats.ox.ac.uk wrote:

> On Wed, 30 Oct 2002, Vincent Carey 525-2265 wrote:
>
> Quoting me, anonymously!
>

not intentional.  i apologize.

>
> Try
>
> if(silent) {
>   sink("/dev/null")
>   on.exit(sink())
> }
>
> as silent is not in scope at on.exit, I believe.

That doesn't seem to work either.  I'll also note that
the whole sink diversion that I mentioned initially
doesn't solve the problem of library-related messages under
Sweave echo=FALSE.  But that is a matter to be addressed
under separate cover.

>
> I have to say I think this is not a good idea.  People who want to put out
> copyright notices at the top of their packages should be allowed to do so,
> and we should not make it easy to suppress them.
>

Fair enough, but still perhaps debatable.  The contributor
has various opportunities to make copyright information
explicit (documentation, modeling output...), but the user
should be able to control the textual
throughput of any given R session to a very high degree.  Since
a private workaround is available, I withdraw the request.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ehlers@math.ucalgary.ca  Wed Oct 30 18:36:01 2002
From: ehlers@math.ucalgary.ca (ehlers@math.ucalgary.ca)
Date: Wed, 30 Oct 2002 19:36:01 +0100 (MET)
Subject: typo in p.adjust (PR#2231)
Message-ID: <200210301836.TAA20243@pubhealth.ku.dk>

Full_Name: Peter Ehlers
Version: 1.6.0
OS: Windows 2000 Pro
Submission from: (NULL) (136.159.61.178)


In:

p.adjust                package:base                R Documentation

In the paragraph:

Hochberg's and Hommel's methods are valid when the hypothesis tests 
are independent or when they are non-negatively associated (Sarkar, 
1998; Sarker and Chang, 1997).  Hommel's method is more powerful 
than Hochberg's, but the difference is usually small and the 
Hochberg p-values are faster to compute.

Change: Sarker
To:     Sarkar


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Wed Oct 30 19:27:56 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Wed, 30 Oct 2002 11:27:56 -0800
Subject: native OS X R
Message-ID: <B16CD746-EC3D-11D6-A502-000393860F3C@stat.ucla.edu>

I have a version of R-devel which is configured with the flags

configure  
--with-tcl-config=/Library/Frameworks/Tcl.framework/tclConfig.sh  
--with-tk-config=/Library/Frameworks/Tk.framework
/tkConfig.sh --enable-R-shlib --with-aqua --without-x  
TCLTK_LIBS="-framework Tcl -framework Tk"   
TCLTK_CPPFLAGS="-I/Library/Framewor
ks/Tcl.framework/Headers -I/Library/Frameworks/Tk.framework/Headers"

This means no X11, the Quartz device, the Aqua interface, and the  
native AquaTk version
of Tcl/Tk. Drawing to windows works fine (both to the Quartz device and  
the Tk
windows), but there are still some serious problems.

1. The Aqua interface does not work (R --gui=aqua) -- it does not show  
up. I am
not sure if it is supposed to. So we work from the terminal.

2. The windows do not handle events properly. Clicking on the Quartz  
device
gives

RCNE SendEventToEventTarget (mous Up                  ) failed, -9874

Running the tkcanvas demo is more satisfactory. Points can be colored
and dragged, and the line adjusts fine, but the window never becomes
the front window and the terminal bitterly complains

SetFrontProcess failed,-606

at each mouse event.

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
Editor: Journal of Multivariate Analysis, Journal of Statistical  
Software
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://gifi.stat.ucla.edu
   
------------------------------------------------------------------------ 
-------------------------
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://gifi.stat.ucla.edu/sounds/nomatter.au
   
------------------------------------------------------------------------ 
------------------------- 
        

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Oct 30 21:06:37 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 Oct 2002 22:06:37 +0100
Subject: native OS X R
In-Reply-To: <B16CD746-EC3D-11D6-A502-000393860F3C@stat.ucla.edu>
References: <B16CD746-EC3D-11D6-A502-000393860F3C@stat.ucla.edu>
Message-ID: <x2vg3jbpr6.fsf@biostat.ku.dk>

Jan de Leeuw <deleeuw@stat.ucla.edu> writes:

> This means no X11, the Quartz device, the Aqua interface, and the
> native AquaTk version
> of Tcl/Tk. Drawing to windows works fine (both to the Quartz device
> and  the Tk
> windows), but there are still some serious problems.
[Details omitted]

I think Stefano has some changes planned, but haven't had time to work
on them just now. We decided to schedule 1.6.1 without those to get
rid of the memory leak in 1.6.0 quickly. It's quite likely that we'll
have a 1.6.2 mainly for Mac updates.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Wed Oct 30 21:51:06 2002
From: jago@mclink.it (Stefano Iacus)
Date: Wed, 30 Oct 2002 22:51:06 +0100
Subject: native OS X R
In-Reply-To: <B16CD746-EC3D-11D6-A502-000393860F3C@stat.ucla.edu>
Message-ID: <B1579901-EC51-11D6-B34C-003065CC4CB8@mclink.it>

Well, I cannot run the Aqua myself anymore using Jaguar. I'll attack  
the problem from the "roots" using Duncan's REventLoop package. I'm  
working on that but I'll not be able to finish before 1.6.1 is out.

Stefano

On Wednesday, October 30, 2002, at 08:27 PM, Jan de Leeuw wrote:

> I have a version of R-devel which is configured with the flags
>
> configure  
> --with-tcl-config=/Library/Frameworks/Tcl.framework/tclConfig.sh  
> --with-tk-config=/Library/Frameworks/Tk.framework
> /tkConfig.sh --enable-R-shlib --with-aqua --without-x  
> TCLTK_LIBS="-framework Tcl -framework Tk"   
> TCLTK_CPPFLAGS="-I/Library/Framewor
> ks/Tcl.framework/Headers -I/Library/Frameworks/Tk.framework/Headers"
>
> This means no X11, the Quartz device, the Aqua interface, and the  
> native AquaTk version
> of Tcl/Tk. Drawing to windows works fine (both to the Quartz device  
> and the Tk
> windows), but there are still some serious problems.
>
> 1. The Aqua interface does not work (R --gui=aqua) -- it does not show  
> up. I am
> not sure if it is supposed to. So we work from the terminal.
>
> 2. The windows do not handle events properly. Clicking on the Quartz  
> device
> gives
>
> RCNE SendEventToEventTarget (mous Up                  ) failed, -9874
>
> Running the tkcanvas demo is more satisfactory. Points can be colored
> and dragged, and the line adjusts fine, but the window never becomes
> the front window and the terminal bitterly complains
>
> SetFrontProcess failed,-606
>
> at each mouse event.
>
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> Editor: Journal of Multivariate Analysis, Journal of Statistical  
> Software
> US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email:  
> deleeuw@stat.ucla.edu
> homepage: http://gifi.stat.ucla.edu
>   
> ----------------------------------------------------------------------- 
> --------------------------
>           No matter where you go, there you are. --- Buckaroo Banzai
>                    http://gifi.stat.ucla.edu/sounds/nomatter.au
>   
> ----------------------------------------------------------------------- 
> --------------------------
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.- 
> .-.-.-.-.-
> r-devel mailing list -- Read  
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:  
> r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._ 
> ._._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aukema@entomology.wisc.edu  Wed Oct 30 23:23:57 2002
From: aukema@entomology.wisc.edu (aukema@entomology.wisc.edu)
Date: Thu, 31 Oct 2002 00:23:57 +0100 (MET)
Subject: gam bug with poisson family? (PR#2234)
Message-ID: <200210302323.AAA21286@pubhealth.ku.dk>

Full_Name: Brian Aukema
Version: 1.6
OS: Windows XP Professional
Submission from: (NULL) (144.92.164.204)


platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    1              
minor    6.0            
year     2002           
month    10             
day      01             
language R 

Hello, I am relatively new to R (~6 months) so I hate to bother you if this is
not a bug.  I tried a GAM with a poisson family link, and I'm getting an error
message that I do not understand.  Many apologies if this is user inexperience.
Thanks, BHA.

> library(mgcv)
This is mgcv 0.8.1
> lcgam <- gam(lc ~ s(Day), family=poisson, data=lcset)
Warning messages: 
1: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
2: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
3: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
4: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
5: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
6: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
7: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
8: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
9: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 
10: `Machine' is deprecated.
Use `.Machine' instead.
See ?Deprecated. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Oct 31 00:25:18 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Oct 2002 01:25:18 +0100
Subject: gam bug with poisson family? (PR#2234)
In-Reply-To: <200210302323.AAA21286@pubhealth.ku.dk>
References: <200210302323.AAA21286@pubhealth.ku.dk>
Message-ID: <x2n0ovbgk1.fsf@biostat.ku.dk>

aukema@entomology.wisc.edu writes:

> Hello, I am relatively new to R (~6 months) so I hate to bother you if this is
> not a bug.  

Please use r-help rather than r-bugs then...

> I tried a GAM with a poisson family link, and I'm getting an error
> message that I do not understand.  Many apologies if this is user inexperience.
> Thanks, BHA.
> 
> > library(mgcv)
> This is mgcv 0.8.1
> > lcgam <- gam(lc ~ s(Day), family=poisson, data=lcset)
> Warning messages: 
> 1: `Machine' is deprecated.
> Use `.Machine' instead.
> See ?Deprecated. 

It's just a warning that gam is using old coding style that is about
to become defunct (specifically gam.fit is using Machine()$double.eps
where the preferred form is .Machine$double.eps). It's harmless but
mgcv 0.8-6 has removed the problem.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Oct 31 09:54:32 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 31 Oct 2002 10:54:32 +0100
Subject: [R] Symbols for male/female
In-Reply-To: <Pine.WNT.4.44.0210310755280.700-100000@GYG-63G37>
References: <Pine.WNT.4.44.0210310755280.700-100000@GYG-63G37>
Message-ID: <15808.64984.194254.194060@gargle.gargle.HOWL>

(diverted to R-devel; I'll send a shorter reply to R-help)

>>>>> "Lorenz" == Lorenz Gygax <gygax@ifi.unizh.ch>
>>>>>     on 31 Oct 2002 08:10:25 +0100 writes:

    Lorenz> Dear all,

    Lorenz> I would like to use the biological symbols for male
    Lorenz> and female as plotting symbols in a scatterplot
    Lorenz> (ideally filled and non-filled). R does not seem to
    Lorenz> have these symbols using pch= in plot() nor are they
    Lorenz> implemented via expression() or at least I did not
    Lorenz> find them. I found that the symbols are
    Lorenz> e.g. available in the wasysym and the marvosym
    Lorenz> package in LaTeX.

    Lorenz> I have coded two very rough functions that are able
    Lorenz> to approximate those symbols, but not surprisingly,
    Lorenz> they are not very efficient regarding the file size
    Lorenz> they produce (I have included the code for the
    Lorenz> female symbol at the end of the mail).

    Lorenz> Is there a more or less straightforward way to
    Lorenz> implement these symbols so that they can be accessed
    Lorenz> either by pch= or expression()? Can you give me some
    Lorenz> pointers on how I would need to go about this?

It's rather "less" than "more" straightforward ;-) : 

In src/main/graphics.c, you look for the function GSymbol().
There, you see how each (pch = <integer>) symbol is done.
In principle, you just would add new case statements;
pch = 26 and pch =27  would be the next free ones ...

Probably you need to poke around a bit in the C source of R in
order to learn how to do this.
In this case, the source is the documentation.


There have been wishes and dreams about using something like
  pch = <<pointer to (jpg|pdf|eps|png|...) file>>
which of course would be much more general and useful, but
needs much more work of course!
Maybe rather something that would only be done in the new
graphics system which the grid package provides ?
    
Greetings up the hill (in Zrich)!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

    Lorenz> Thanks and regards, Lorenz
    Lorenz> -- 
    Lorenz> Lorenz Gygax, Dr. sc. nat.
    Lorenz> Artificial Intelligence Lab, Department of Information Technology
    Lorenz> University of Zurich-Irchel, +41-1-635 67 17,  gygax@ifi.unizh.ch


    Lorenz> one.female <- function (X, diam= 1, prop= 1, lw= 1) {
    Lorenz> ## X a vector giving the position of the symbol c (x, y)
    Lorenz> ## diam: diameter in the entities on the Y axis
    Lorenz> ## prop: proportion of x to y axis (so that symbols will be round
    Lorenz> ## lw: adjustment of line width for large symbols

    Lorenz> x.ring <- cos (seq (0, 2*pi, len= 500)) * prop * diam/2
    Lorenz> y.ring <- sin (seq (0, 2*pi, len= 500)) * diam/2
    Lorenz> lines (x.ring + X[1], y.ring + X[2], lwd= lw)
    Lorenz> segments (c (0, -diam/4) + X[1],
    Lorenz> c (-diam/2, -3*diam/4) + X[2],
    Lorenz> c (0,  diam/4) + X[1],
    Lorenz> c ( -diam , -3*diam/4) + X[2], lwd= lw)
    Lorenz> }

    Lorenz> and to plot several iteams at a time

    Lorenz> female <- function (x, y, d= 1, p= 1, l= 1) {
    Lorenz> ## x, y vectors of x and y coordinates
    Lorenz> ## d: diameter
    Lorenz> ## p: proportion of symbol
    Lorenz> ## l: line width

    Lorenz> xy <- cbind (x, y)
    Lorenz> apply (xy, 1, FUN= one.female, diam= d, prop= p, lw= l)
    Lorenz> }
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Oct 31 11:00:38 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 31 Oct 2002 12:00:38 +0100 (MET)
Subject: typo in p.adjust (PR#2231)
Message-ID: <200210311100.MAA25984@pubhealth.ku.dk>

>>>>> "ehlers" == ehlers  <ehlers@math.ucalgary.ca>
>>>>>     on Wed, 30 Oct 2002 19:36:01 +0100 (MET) writes:

    ehlers> Full_Name: Peter Ehlers
    ehlers> Version: 1.6.0

    ehlers> In:

    ehlers> p.adjust                package:base                R Documentation

    ....

    ehlers> Change: Sarker
    ehlers> To:     Sarkar

Done.
Thank you.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From grimm.heinz@rcc.ch  Thu Oct 31 15:42:36 2002
From: grimm.heinz@rcc.ch (grimm.heinz@rcc.ch)
Date: Thu, 31 Oct 2002 16:42:36 +0100 (MET)
Subject: header containing (PR#2003)
Message-ID: <200210311542.QAA00373@pubhealth.ku.dk>

This is a multi-part message in MIME format.
--------------0E780EA27B8B71828A93900D
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Ok, I try to explain the problem better:

getHome() uses now "GetModuleFileName()" to determine
the R home-directory. "GetModuleFileName()" doesn't check
the R_HOME environment setting, instead it returns the
path of the .EXE, that started R, which is usually located in
$R_HOME/bin. If R is invoked via Java, "GetModuleFileName()"
returns $JDK_HOME/jre/bin instead of $R_HOME/bin and
the function "getRHome()" returns $JDK_HOME/jre...

My suggestion is just to rely on $R_HOME, instead of
using "GetModuleFileName()", because all "xxx calls R"
packages will have similar problems. I added in my sample
fix the check for $RHOME, since SJava does the same,
may be this is historical, just ignore it...

Heinz Grimm


--------------0E780EA27B8B71828A93900D
Content-Type: text/x-vcard; charset=us-ascii;
 name="grimm.heinz.vcf"
Content-Transfer-Encoding: 7bit
Content-Description: Card for Heinz Grimm
Content-Disposition: attachment;
 filename="grimm.heinz.vcf"

begin:vcard 
n:Grimm;Heinz
tel;fax:+41 61 9715 072
tel;work:+41 61 9751 109
x-mozilla-html:FALSE
url:www.rcc.ch
org:RCC Ltd.;IT
version:2.1
email;internet:grimm.heinz@rcc.ch
title:Dipl.Ing.(FH)
adr;quoted-printable:;;Zelgliweg 1=0D=0A;Itingen;BL;CH-4452;Switzerland
fn:Heinz Grimm
end:vcard

--------------0E780EA27B8B71828A93900D--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu Oct 31 09:38:35 2002
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich.Leisch@ci.tuwien.ac.at)
Date: Thu, 31 Oct 2002 10:38:35 +0100
Subject: silent option for library function
In-Reply-To: <Pine.GSO.4.40.0210301141560.5730-100000@falmouth.bwh.harvard.edu>
References: <Pine.LNX.4.31.0210301632330.5214-100000@gannet.stats>
 <Pine.GSO.4.40.0210301141560.5730-100000@falmouth.bwh.harvard.edu>
Message-ID: <15808.64027.325849.231315@celeborn.leisch.at>

>>>>> On Wed, 30 Oct 2002 11:56:28 -0500 (EST),
>>>>> Vincent Carey 525-2265 (VC5) wrote:

  > On Wed, 30 Oct 2002 ripley@stats.ox.ac.uk wrote:

  >> On Wed, 30 Oct 2002, Vincent Carey 525-2265 wrote:
  >> 
  >> Quoting me, anonymously!
  >> 

  > not intentional.  i apologize.

  >> 
  >> Try
  >> 
  >> if(silent) {
  >> sink("/dev/null")
  >> on.exit(sink())
  >> }
  >> 
  >> as silent is not in scope at on.exit, I believe.

  > That doesn't seem to work either.  I'll also note that
  > the whole sink diversion that I mentioned initially
  > doesn't solve the problem of library-related messages under
  > Sweave echo=FALSE.  But that is a matter to be addressed
  > under separate cover.

shouldn't results=hide do what you want for Sweave files?

.f

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From medrecord2001@yahoo.com  Thu Oct 31 19:28:58 2002
From: medrecord2001@yahoo.com (medrecord2001@yahoo.com)
Date: Thu, 31 Oct 2002 20:28:58 +0100 (MET)
Subject: Quick Question (PR#2239)
Message-ID: <200210311928.UAA01513@pubhealth.ku.dk>


How can I get detailing about your Product line ... ?

Dr. Wong

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ehlers@math.ucalgary.ca  Thu Oct 31 20:00:19 2002
From: ehlers@math.ucalgary.ca (ehlers@math.ucalgary.ca)
Date: Thu, 31 Oct 2002 21:00:19 +0100 (MET)
Subject: typo in documentation for boxplot.stats (PR#2240)
Message-ID: <200210312000.VAA01612@pubhealth.ku.dk>

Full_Name: Peter Ehlers
Version: 1.6.0
OS: Win 2000 Pro
Submission from: (NULL) (136.159.61.178)


In:
boxplot.stats              package:base              R Documentation

under:
Details:
     The two ``hinges'' are versions of the first first and third

Change: first first
To: first


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

