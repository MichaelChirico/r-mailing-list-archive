From ripley@stats.ox.ac.uk  Fri Sep  1 07:10:34 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Sep 2000 08:10:34 +0200 (MET DST)
Subject: [Rd] plot(x,y,axes=F) (PR#650)
Message-ID: <200009010610.IAA06642@pubhealth.ku.dk>

On Thu, 31 Aug 2000 kye@ams.sunysb.edu wrote:

> Full_Name: Kenny Ye
> Version: R-1.1.1
> OS: Solaris 2.6
> Submission from: (NULL) (129.49.6.133)
> 
> 
> when i use plot(x,y,axes=F), the axes and the box are still ploted.

Not in this example on my Solaris 2.6 R-1.1.1 system:

plot(1:10, 1:10, axes=FALSE)


Two possibilities spring to mind:

1) F is a variable that has a value interpreted as true.  (In R you
need to use FALSE to be safe.)

2) x is not a vector but a classed R object and you are picking up
a plot method that does not support axes=FALSE.

This shows the importance of the advice in the FAQ on bugs reporting:

`Please include an example that reproduces the problem, preferably the
simplest one you have found.'

and the lines around it.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kye@ams.sunysb.edu  Fri Sep  1 15:06:44 2000
From: kye@ams.sunysb.edu (kye@ams.sunysb.edu)
Date: Fri, 1 Sep 2000 16:06:44 +0200 (MET DST)
Subject: [Rd] plot(x,y,axes=F) (PR#650)
Message-ID: <200009011406.QAA14017@pubhealth.ku.dk>


Thanks. I think there was a variable F. 

Best,

Kenny Ye
Assistant Professor
Department of Applied Math and Statistics
SUNY at  Stony Brook
Stony Brook, New York 11794-3600
Phone (631)632-9344
Fax   (631)632-8490

On Fri, 1 Sep 2000, Prof Brian D Ripley wrote:

> On Thu, 31 Aug 2000 kye@ams.sunysb.edu wrote:
> 
> > Full_Name: Kenny Ye
> > Version: R-1.1.1
> > OS: Solaris 2.6
> > Submission from: (NULL) (129.49.6.133)
> > 
> > 
> > when i use plot(x,y,axes=F), the axes and the box are still ploted.
> 
> Not in this example on my Solaris 2.6 R-1.1.1 system:
> 
> plot(1:10, 1:10, axes=FALSE)
> 
> 
> Two possibilities spring to mind:
> 
> 1) F is a variable that has a value interpreted as true.  (In R you
> need to use FALSE to be safe.)
> 
> 2) x is not a vector but a classed R object and you are picking up
> a plot method that does not support axes=FALSE.
> 
> This shows the importance of the advice in the FAQ on bugs reporting:
> 
> `Please include an example that reproduces the problem, preferably the
> simplest one you have found.'
> 
> and the lines around it.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bobbyo@speakeasy.org  Sat Sep  2 21:58:51 2000
From: bobbyo@speakeasy.org (bobbyo@speakeasy.org)
Date: Sat, 2 Sep 2000 22:58:51 +0200 (MET DST)
Subject: [Rd] R INSTALL *.tgz fails (minor docs/feature bug) (PR#652)
Message-ID: <200009022058.WAA19068@pubhealth.ku.dk>

R Team,

	I was attempting to install Lindsey's rmutil.tgz and other
non-CRAN packages using 'R INSTALL', for example 'R INSTALL rmutil.tgz'
after downloading 'rmutil.tgz' from Lindsey's page (as linked from
r-project.org page).

	Directly using the compressed file as 'R INSTALL rmutil.tgz'
failed, though the shell help from 'R INSTALL --help' implied this would
work.

	However, when I simply renamed using 'mv rmutil.tgz rmutil' and
then ran 'R INSTALL rmutil', that worked.

	Adding a note to rename the .tgz files without the .tgz
extension, or changing R INSTALL to allow filename extensions when
installing would be a nice ease-of-use feature.

	(by the way, I was able to use R INSTALL rmutil if I unpacked
rmutil using 'cat rmutil.tgz | tar xvz' and then ran 'R INSTALL rmutil'.)

Keep up the Excellent Work,
	RPO

p.s. Thanks for a wonderful piece of software. R is a real boon to my
research.
	

------ Robert Otillar		| UCSF Graduate Group in Biophysics	------
------ 833 Ashbury #2		| mailto:BobbyO@itsa.ucsf.edu		------
------ San Francisco, CA  94117	| http://bioinformatics.ucsf.edu/bobbyo	------
------ Tel. <send email>	| Fax (415)759-6579			------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Mon Sep  4 01:09:54 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 03 Sep 2000 17:09:54 -0700
Subject: [Rd] quitting iESS[R] (R in ESS)
Message-ID: <87r971j9v1.fsf@jeeves.blindglobe.net>


One thing that has driven me batty to no end is the fact that ESS
doesn't handle R's "exit" well.  Any thoughts as to the default?  I'm
thinking of something like:

        current:  do what currently is done
        C-u Y C-c C-q   : quit and save workspace
        C-u N C-c C-q   : quit and don't save workspace.

Comments?

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@biostat.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

CFAR:   M/F: 206-731-3647 (fax=3694) | Email is far better than phone
FHCRC: Tu/W: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
UW:      Th: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From imsw@holyrood.ed.ac.uk  Mon Sep  4 12:29:08 2000
From: imsw@holyrood.ed.ac.uk (imsw@holyrood.ed.ac.uk)
Date: Mon, 4 Sep 2000 13:29:08 +0200 (MET DST)
Subject: [Rd] bug in spline()? (PR#653)
Message-ID: <200009041129.NAA28115@pubhealth.ku.dk>

BUG IN SPLINE()?

Version R-1.0.1, system i486,linux

If the spline(x,y,method="natural") function is given values outside the
range of the data, it does not give a warning. Moreover, the extrapolated
value reported is not the ordinate of the natural spline defined by (x,y).

Example.  Let x <- c(2,5,8,10) and y <- c(1.2266,-1.7606,-0.5051,1.0390).
Then interpolate/extrapolate with a natural cubic spline at 1:10 using
either

spline(x,y,n=10,method="natural",xmin=1,xmax=10)

or

fn <- splinefun(x,y,method="natural")
fn(1:10)

This gives c(2.5366,1.2266,-0.0834,...,1.0390). I agree with all values
except that at x=1. The interpolation formula in Green and Silverman's
book on splines gives the derivative of a natural spline at the first
knot as f'(x1)=(f2-f1)/(x2-x1) -(1/6)(x2-x1)d, where d=second derivative
at the second knot. For the above example, d=0.7071, f'(x1)=-1.3493,
and the natural spline interpolant has value 1.2266-(-1.3493)=2.5759
at x=1, not 2.5366.

PS There are different e-mail addresses for bug reports given in the
FAQ file and in the help information for bug.report.

************************************************
*    I.White                                   *
*    ICAPB, University of Edinburgh            *
*    Ashworth Laboratories, West Mains Road    *
*    Edinburgh EH9 3JT                         *
*    Fax: 0131 667 3210   Tel: 0131 650 5490   *
*    E-mail: i.m.s.white@ed.ac.uk              *
************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Mon Sep  4 13:07:10 2000
From: pd@blueberry.kubism.ku.dk (pd@blueberry.kubism.ku.dk)
Date: Mon, 4 Sep 2000 14:07:10 +0200 (MET DST)
Subject: [Rd] Dubious mail address (PR#654)
Message-ID: <200009041207.OAA28765@pubhealth.ku.dk>

This is just a test to see whether r-bugs@lists.r-project.org will
actually work, as per the FAQ.

	-Peter D.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep  4 13:28:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Sep 2000 14:28:37 +0200
Subject: [Rd] bug in spline()? (PR#653)
In-Reply-To: imsw@holyrood.ed.ac.uk's message of "Mon, 4 Sep 2000 13:29:08 +0200 (MET DST)"
References: <200009041129.NAA28115@pubhealth.ku.dk>
Message-ID: <x2n1homjd6.fsf@blueberry.kubism.ku.dk>

imsw@holyrood.ed.ac.uk writes:

> This gives c(2.5366,1.2266,-0.0834,...,1.0390). I agree with all values
> except that at x=1. The interpolation formula in Green and Silverman's
> book on splines gives the derivative of a natural spline at the first
> knot as f'(x1)=(f2-f1)/(x2-x1) -(1/6)(x2-x1)d, where d=second derivative
> at the second knot. For the above example, d=0.7071, f'(x1)=-1.3493,
> and the natural spline interpolant has value 1.2266-(-1.3493)=2.5759
> at x=1, not 2.5366.

Also, 

plot(diff(fn(seq(1,3,.01))))

reveals that something is wrong

At the other end, 

 plot(diff(fn(seq(8,11,.01))))

looks even weirder, especially if one modifies 
to y <- c(1.2266,-1.7606,-0.5051,1.01)


> PS There are different e-mail addresses for bug reports given in the
> FAQ file and in the help information for bug.report.

Hmm, and neither looks quite right! One would probably want the
address to be in the r-project.org domain (in case we move it away
from Copenhagen). "r-bugs@list.r-project.org", however, is none too
logical and assumes that there's an r-bugs user or an alias in Zurich
which forwards to biostat.dk (there is, it seems). Same thing with
r-bugs@r-project.org, since the Wisconsin machine aliases r-bugs to
r-bugs@lists.r-project.org. 

More logical would be to use r-bugs@r-project.org and have the
forwarding there go to biostat.dk.

Alternatively, it ought to work as r-bugs@bugs.r-project.org, but that
doesn't work whenever a RedHat upgrade blows away the resending rules
in my sendmail.cf... (the program in r-bugs' .forward needs to execute
on a machine that matches the architecture of the binary!)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep  4 16:18:31 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 4 Sep 2000 17:18:31 +0200 (CEST)
Subject: [Rd] quitting iESS[R] (R in ESS)
In-Reply-To: <87r971j9v1.fsf@jeeves.blindglobe.net>
References: <87r971j9v1.fsf@jeeves.blindglobe.net>
Message-ID: <14771.48455.503252.671251@gargle.gargle.HOWL>

>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

    tony> One thing that has driven me batty to no end is the fact that ESS
    tony> doesn't handle R's "exit" well.  Any thoughts as to the default?  I'm
    tony> thinking of something like:

    tony> current:  do what currently is done
?? {don't understand: I thought you hated the current behavior?}
          
C-c C-q (without prefix) and it's menu analog should really have emacs
prompt the user, i.e. under X windows a popup dialog menu, and otherwise a
"minibuffer" one. 

    tony> C-u Y C-c C-q   : quit and save workspace
    tony> C-u N C-c C-q   : quit and don't save workspace.
good idea in any case!
[but most users don't memorize (and hence use) prefix sequences; yes, I do ..]



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Mon Sep  4 16:34:05 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 04 Sep 2000 08:34:05 -0700
Subject: [Rd] quitting iESS[R] (R in ESS)
In-Reply-To: <14771.48455.503252.671251@gargle.gargle.HOWL>
 (Martin Maechler's message of "Mon, 4 Sep 2000 17:18:31 +0200 (CEST)")
References: <87r971j9v1.fsf@jeeves.blindglobe.net>
 <14771.48455.503252.671251@gargle.gargle.HOWL>
Message-ID: <87lmx8jhn6.fsf@jeeves.blindglobe.net>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:


>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:
    tony> One thing that has driven me batty to no end is the fact
    tony> that ESS doesn't handle R's "exit" well.  Any thoughts as to
    tony> the default?  I'm thinking of something like:

    tony> current: do what currently is done
    MM> ?? {don't understand: I thought you hated the current
    MM> behavior?}

Yes.  But leaving it currently "appears" to follow the principle of
least surprise.

The alternative would be to have 2 prompts for R (and similarly for
Stata, which also works on a "Dataspace" principle (only one dataset
at a time)).
          
    MM> C-c C-q (without prefix) and it's menu analog should really
    MM> have emacs prompt the user, i.e. under X windows a popup
    MM> dialog menu, and otherwise a "minibuffer" one.

Which is the alternative.  I'm going to change it to this, unless I
hear some screams.

    MM> good idea in any case!  [but most users don't memorize (and
    MM> hence use) prefix sequences; yes, I do ..]

I like them, too...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@biostat.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

CFAR:   M/F: 206-731-3647 (fax=3694) | Email is far better than phone
FHCRC: Tu/W: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
UW:      Th: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Sep  4 18:16:43 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 4 Sep 2000 10:16:43 -0700 (PDT)
Subject: [Rd] R INSTALL *.tgz fails (minor docs/feature bug) (PR#652)
In-Reply-To: <200009022058.WAA19068@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0009041012110.6541-100000@atlas.biostat.washington.edu>

On Sat, 2 Sep 2000 bobbyo@speakeasy.org wrote:

> R Team,
> 
> 	I was attempting to install Lindsey's rmutil.tgz and other
> non-CRAN packages using 'R INSTALL', for example 'R INSTALL rmutil.tgz'
> after downloading 'rmutil.tgz' from Lindsey's page (as linked from
> r-project.org page).
> 
> 	Directly using the compressed file as 'R INSTALL rmutil.tgz'
> failed, though the shell help from 'R INSTALL --help' implied this would
> work.
> 
> 	However, when I simply renamed using 'mv rmutil.tgz rmutil' and
> then ran 'R INSTALL rmutil', that worked.
> 
> 	Adding a note to rename the .tgz files without the .tgz
> extension, or changing R INSTALL to allow filename extensions when
> installing would be a nice ease-of-use feature.
> 
> 	(by the way, I was able to use R INSTALL rmutil if I unpacked
> rmutil using 'cat rmutil.tgz | tar xvz' and then ran 'R INSTALL rmutil'.)


R INSTALL is somewhat fussy about package format when used on compressed
files. I don't think Jim Lindsey's packages have ever installed without
uncompressing first. I have had the same thing happen with local packages
of functions I've created for convenience.

Fortunately it's fairly painless to uncompress them.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Mon Sep  4 18:43:53 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 4 Sep 2000 13:43:53 -0400 (EDT)
Subject: [Rd] R INSTALL *.tgz fails (minor docs/feature bug) (PR#652)
In-Reply-To: <Pine.GSO.4.21.0009041012110.6541-100000@atlas.biostat.washington.edu>
 (message from Thomas Lumley on Mon, 4 Sep 2000 10:16:43 -0700 (PDT))
Message-ID: <200009041743.NAA07492@jessie.research.bell-labs.com>



I believe the problem with this is that the R INSTALL expects version
information in the name of the .tar.gz or .tgz file.
So something like
   rmutil_1.0.tgz 
and 
   R CMD INSTALL rmutil_1.0.tgz
avoids that particular problem.
(Specifically, it computes the package name by removing everything
after the first _ in the name of the file.)

It took me a while to find out what was happening some months ago so I
thought I'd save others that hassle.


  D.

> Date: Mon, 4 Sep 2000 10:16:43 -0700 (PDT)
> From: Thomas Lumley <thomas@biostat.washington.edu>
> cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Sender: owner-r-devel@stat.math.ethz.ch
> Precedence: bulk
> 
> On Sat, 2 Sep 2000 bobbyo@speakeasy.org wrote:
> 
> > R Team,
> > 
> > 	I was attempting to install Lindsey's rmutil.tgz and other
> > non-CRAN packages using 'R INSTALL', for example 'R INSTALL rmutil.tgz'
> > after downloading 'rmutil.tgz' from Lindsey's page (as linked from
> > r-project.org page).
> > 
> > 	Directly using the compressed file as 'R INSTALL rmutil.tgz'
> > failed, though the shell help from 'R INSTALL --help' implied this would
> > work.
> > 
> > 	However, when I simply renamed using 'mv rmutil.tgz rmutil' and
> > then ran 'R INSTALL rmutil', that worked.
> > 
> > 	Adding a note to rename the .tgz files without the .tgz
> > extension, or changing R INSTALL to allow filename extensions when
> > installing would be a nice ease-of-use feature.
> > 
> > 	(by the way, I was able to use R INSTALL rmutil if I unpacked
> > rmutil using 'cat rmutil.tgz | tar xvz' and then ran 'R INSTALL rmutil'.)
> 
> 
> R INSTALL is somewhat fussy about package format when used on compressed
> files. I don't think Jim Lindsey's packages have ever installed without
> uncompressing first. I have had the same thing happen with local packages
> of functions I've created for convenience.
> 
> Fortunately it's fairly painless to uncompress them.
> 
> 	-thomas
> 
> Thomas Lumley
> Assistant Professor, Biostatistics
> University of Washington, Seattle
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Sep  4 22:53:14 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 04 Sep 2000 16:53:14 -0500
Subject: [Rd] bug in spline()? (PR#653)
In-Reply-To: imsw@holyrood.ed.ac.uk's message of "Mon, 4 Sep 2000 13:29:08 +0200 (MET DST)"
References: <200009041129.NAA28115@pubhealth.ku.dk>
Message-ID: <6ritsb7rjp.fsf@franz.stat.wisc.edu>

imsw@holyrood.ed.ac.uk writes:

> BUG IN SPLINE()?
> 
> Version R-1.0.1, system i486,linux
> 
> If the spline(x,y,method="natural") function is given values outside the
> range of the data, it does not give a warning. Moreover, the extrapolated
> value reported is not the ordinate of the natural spline defined by (x,y).
> 
> Example.  Let x <- c(2,5,8,10) and y <- c(1.2266,-1.7606,-0.5051,1.0390).
> Then interpolate/extrapolate with a natural cubic spline at 1:10 using
> either
> 
> spline(x,y,n=10,method="natural",xmin=1,xmax=10)
> 
> or
> 
> fn <- splinefun(x,y,method="natural")
> fn(1:10)
> 
> This gives c(2.5366,1.2266,-0.0834,...,1.0390). I agree with all values
> except that at x=1. The interpolation formula in Green and Silverman's
> book on splines gives the derivative of a natural spline at the first
> knot as f'(x1)=(f2-f1)/(x2-x1) -(1/6)(x2-x1)d, where d=second derivative
> at the second knot. For the above example, d=0.7071, f'(x1)=-1.3493,
> and the natural spline interpolant has value 1.2266-(-1.3493)=2.5759
> at x=1, not 2.5366.

I think the `interpSpline' function in the splines package gives the
desired natural interpolation spline.  Perhaps we should change the
underlying code for the spline function.

 > library(splines)
 > x <- c(2,5,8,10)
 > y <- c(1.2266,-1.7606,-0.5051,1.0390)
 > ns1 <- interpSpline(y ~ x)
 > plot(ns1)   # gives a plot that looks reasonable
 > points(x,y)
 > predict(ns1, 1:10)
 $x
  [1]  1  2  3  4  5  6  7  8  9 10

 $y
  [1]  2.5758923  1.2266000 -0.0834080 -1.1577100 -1.7606000 -1.7349409
  [7] -1.2378717 -0.5051000  0.2669514  1.0390000

 attr(,"class")
 [1] "xyVector"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From patrick.lindsey@luc.ac.be  Tue Sep  5 20:45:40 2000
From: patrick.lindsey@luc.ac.be (Patrick Lindsey)
Date: Tue, 5 Sep 2000 21:45:40 +0200 (MET DST)
Subject: [Rd] R crash when loading libraries.
Message-ID: <200009051945.VAA17252@alpha.luc.ac.be>

Hi everyone,
I am trying to install R on my new PIII 750Mhz under RedHat6.2
I get the following crash when I try and load any library.
I suspect this has started after I installed the BLAS and LAPACK libraries.
These two libraries where installed using the RPM manager under GNOME.
Here is the crash and read-out from gdb.
Hope that someone can understand what is going on.
Thank you,
Patrick.

---------------------------------
R : Copyright 2000, The R Development Core Team
Version 1.1.1  (August 15, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

> library(eda)
Segmentation fault (core dumped)
201/usr/local/src/R-1.1.1/bin>gdb R.bin core
GNU gdb 19991004
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-redhat-linux"...
Core was generated by `/usr/local/src/R-1.1.1/bin/R.bin'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /usr/lib/libreadline.so.3...done.
Reading symbols from /usr/lib/libz.so.1...done.
Reading symbols from /lib/libdl.so.2...done.
Reading symbols from /usr/lib/libncurses.so.4...done.
Reading symbols from /lib/libm.so.6...done.
Reading symbols from /usr/lib/libblas.so.2...done.
Reading symbols from /lib/libc.so.6...done.
Reading symbols from /lib/libtermcap.so.2...done.
Reading symbols from /lib/ld-linux.so.2...done.
Reading symbols from /usr/local/src/R-1.1.1/bin/R_X11.so...done.
Reading symbols from /usr/X11R6/lib/libSM.so.6...done.
Reading symbols from /usr/X11R6/lib/libICE.so.6...done.
Reading symbols from /usr/X11R6/lib/libX11.so.6...done.
Reading symbols from /usr/lib/libjpeg.so.62...done.
Reading symbols from /usr/lib/libpng.so.2...done.
Reading symbols from /usr/lib/gconv/ISO8859-1.so...done.
Reading symbols from /usr/local/src/R-1.1.1/library/eda/libs/eda.so...done.
#0  0x40009634 in _dl_relocate_object (l=0x81e73b0, scope=0x81e75b4, lazy=0, consider_profiling=0) at ../sysdeps/i386/dl-machine.h:326
326	../sysdeps/i386/dl-machine.h: No such file or directory.
(gdb) quit

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Sep  5 21:53:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Sep 2000 22:53:37 +0200
Subject: [Rd] R crash when loading libraries.
In-Reply-To: Patrick Lindsey's message of "Tue, 5 Sep 2000 21:45:40 +0200 (MET DST)"
References: <200009051945.VAA17252@alpha.luc.ac.be>
Message-ID: <x27l8qk1bi.fsf@blueberry.kubism.ku.dk>

Patrick Lindsey <patrick.lindsey@luc.ac.be> writes:

> Hi everyone,
> I am trying to install R on my new PIII 750Mhz under RedHat6.2
> I get the following crash when I try and load any library.
> I suspect this has started after I installed the BLAS and LAPACK libraries.
> These two libraries where installed using the RPM manager under GNOME.
> Here is the crash and read-out from gdb.
> Hope that someone can understand what is going on.
> Thank you,
> Patrick.

There is a (by now) well-known bug with the standard RedHat toolchain
that makes it generate corrupt .so files. Normally, that affects only
a couple of packages (akima for one) but adding BLAS could be tickling
the bug in new places...

Martyn Plummer reported this to RedHat, but they've done nothing about
it yet (bugzilla report 13490).

Try upgrading your gcc to a recent one, either by compiling it up from
sources (fairly easy but takes quite a bit of space on your disk) or
installing RPM packages from the rawhide distribution. Notice that you
may get some trouble using the latter procedure since all the
egcs-something packages are now gcc-something, so you cannot just
update. gcc 2.95.1 does work for me in some cases where the egcs
compiler fails.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed Sep  6 08:04:10 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 6 Sep 2000 09:04:10 +0200 (MET DST)
Subject: [Rd] reusing external functions across libs
Message-ID: <Pine.OSF.4.21.0009060818570.2418-100000@zidsrv.sci.uni-klu.ac.at>


Hi,

I am searching for a way to solve the following problem:

I want to use an external function, defined in a dyn.load()ed shared
object, in another dyn.load()ed shared object.

Currently I have to take the sources (Fortran) from one libraries src/
directory and copy them into the src/ dir of the other library, resulting
in two copies of this function. This is bad for maintanance and maybe
also for runtime behaviour because of side effects I'm not aware off (one 
symbol could be loaded twice). It would be nice if I could call the
function directly from C/Fortran, after dyn.load()ing both libraries.
But unfortunately this seems to depend very crucially on the
specific OS.

An example (C/Fortran mix, but I tried also C/C and Fortran/Fortran):
**** so1.c *******************
#include <R.h>
void func1(double* a, int* n){
printf("in func1\n");
F77_SYMBOL(func2)(a,n);
printf("back in func1\n");
}
******************************
gcc -g -fpic -c so1.c -I/usr/local/lib/R/include
ld -shared so1.o -o so1.so

**** so2.f *******************
        subroutine func2(a,n)
        real*8 a(*)
        integer n

        integer i
        call intpr("in func2",8,0,0)
        do 10 i=1,n
          a(i)=2.0d0 * a(i)
 10     continue
        return
        end
******************************
g77 -g -fpic -c so2.f
ld -shared so2.o -o so2.so

on the Alpha (R 1.1.0 on alpha-dec-osf4.0) it works without problems:
> dyn.load("so2.so")
> dyn.load("so1.so")
> .C("func1",as.double(c(1,2,3)),as.integer(3))
in func1
in func2
 [1]
back in func1
[[1]]
[1] 2 4 6

[[2]]
[1] 3

on Linux (R 1.1.1, SuSE 6.4) it works not:
> dyn.load("so2.so")
> dyn.load("so1.so")
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library
"/home/users/agebhard/R-test/so1.so":
  /home/users/agebhard/R-test/so1.so: undefined symbol: func2_

or also not working:
> dyn.load("so2.so")  
> dyn.load("so1.so",now=F)
> .C("func1",as.double(c(1,2,3)),as.integer(3))
in func1
/usr/lib/R/bin/R.bin: error in loading shared
libraries: /home/users/agebhard/R-test/so1.so: undefined symbol: func2_



Is there any chance to get this working (may be by finding some magic
linker option, or using extra dyn.load() arguments in an apropriate way)?

Is there another way to share a common subset of C/Fortran functions in 
different R libraries? (at C/Fortran source code level. Of course I can
access functions from other librariues with .C()/.Fortran calls from R
source code level, that's not the problem)

Is the only solution to write a shared (or static) library, which will be
linked to both R libraries?


Thanks in advance for any hints.

Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed Sep  6 08:54:03 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 6 Sep 2000 09:54:03 +0200 (MET DST)
Subject: [Rd] reusing external functions across libs
Message-ID: <Pine.OSF.4.21.0009060951010.3489-100000@zidsrv.sci.uni-klu.ac.at>


On Wed, 6 Sep 2000, Albrecht Gebhardt wrote:

> 
> Hi,
> 
> I am searching for a way to solve the following problem:
> 
> I want to use an external function, defined in a dyn.load()ed shared
> object, in another dyn.load()ed shared object.
> 
> Currently I have to take the sources (Fortran) from one libraries src/
> directory and copy them into the src/ dir of the other library, resulting
> in two copies of this function. This is bad for maintanance and maybe
> also for runtime behaviour because of side effects I'm not aware off (one 
> symbol could be loaded twice). It would be nice if I could call the
> function directly from C/Fortran, after dyn.load()ing both libraries.
> But unfortunately this seems to depend very crucially on the
> specific OS.
> 
> An example (C/Fortran mix, but I tried also C/C and Fortran/Fortran):
> **** so1.c *******************
> #include <R.h>
> void func1(double* a, int* n){
> printf("in func1\n");
> F77_SYMBOL(func2)(a,n);
> printf("back in func1\n");
> }
> ******************************
> gcc -g -fpic -c so1.c -I/usr/local/lib/R/include
> ld -shared so1.o -o so1.so
> 
> **** so2.f *******************
>         subroutine func2(a,n)
>         real*8 a(*)
>         integer n
> 
>         integer i
>         call intpr("in func2",8,0,0)
>         do 10 i=1,n
>           a(i)=2.0d0 * a(i)
>  10     continue
>         return
>         end
> ******************************
> g77 -g -fpic -c so2.f
> ld -shared so2.o -o so2.so
> 
> on the Alpha (R 1.1.0 on alpha-dec-osf4.0) it works without problems:
> > dyn.load("so2.so")
> > dyn.load("so1.so")
> > .C("func1",as.double(c(1,2,3)),as.integer(3))
> in func1
> in func2
>  [1]
> back in func1
> [[1]]
> [1] 2 4 6
> 
> [[2]]
> [1] 3
> 
> on Linux (R 1.1.1, SuSE 6.4) it works not:
> > dyn.load("so2.so")
> > dyn.load("so1.so")
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library
> "/home/users/agebhard/R-test/so1.so":
>   /home/users/agebhard/R-test/so1.so: undefined symbol: func2_
> 
> or also not working:
> > dyn.load("so2.so")  
> > dyn.load("so1.so",now=F)
> > .C("func1",as.double(c(1,2,3)),as.integer(3))
> in func1
> /usr/lib/R/bin/R.bin: error in loading shared
> libraries: /home/users/agebhard/R-test/so1.so: undefined symbol: func2_
> 
> 
> 
> Is there any chance to get this working (may be by finding some magic
> linker option, or using extra dyn.load() arguments in an apropriate way)?
> 
> Is there another way to share a common subset of C/Fortran functions in 
> different R libraries? (at C/Fortran source code level. Of course I can
> access functions from other librariues with .C()/.Fortran calls from R
> source code level, that's not the problem)
> 
> Is the only solution to write a shared (or static) library, which will be
> linked to both R libraries?
> 
> 


... well, I found (at least) one solution:

> dyn.load("so1.so",now=F)
> dyn.load("so2.so",local=F)
> .C("func1",as.double(c(1,2,3)),as.integer(3))
in func1
in func2
 [1]
back in func1
[[1]]
[1] 2 4 6

[[2]]
[1] 3

> 

but the question remains:

What is the best way to share common C/Fortran sources across R libraries?
How should I implement the above solution in the libraries? What are the
side effects? Is it really portable (win32?)? 

Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Sep  6 09:30:37 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 6 Sep 2000 09:30:37 +0100 (BST)
Subject: [Rd] reusing external functions across libs
In-Reply-To: <Pine.OSF.4.21.0009060951010.3489-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.05.10009060917140.10024-100000@auk.stats>

On Wed, 6 Sep 2000, Albrecht Gebhardt wrote:

> 
> ... well, I found (at least) one solution:
> 
> > dyn.load("so1.so",now=F)
> > dyn.load("so2.so",local=F)
> > .C("func1",as.double(c(1,2,3)),as.integer(3))
> in func1
> in func2
>  [1]
> back in func1
> [[1]]
> [1] 2 4 6
> 
> [[2]]
> [1] 3
> 
> > 
> 
> but the question remains:
> 
> What is the best way to share common C/Fortran sources across R libraries?
> How should I implement the above solution in the libraries? What are the
> side effects? Is it really portable (win32?)? 

It is not portable.  You will not even be able to make both shared
objects on some systems, including AIX and Windows, as they need to know
where the symbols are going to be satisfied.  And those flags (especially
local=F) do not always work (which is why this worked on OSF4, I think).

The best way that I know of is to put shared code in a shared library, and
link so?.so against that.  The only potential problem is putting the
common library somewhere it will be found at run time if it is a shared
library/DLL, so I would use a static library unless the code was large
(like all of LAPACK).  (This is particularly a problem on Windows,
where the rules for finding DLLs differ by Windows version.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed Sep  6 09:53:44 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 6 Sep 2000 10:53:44 +0200 (MET DST)
Subject: [Rd] reusing external functions across libs
In-Reply-To: <Pine.GSO.4.05.10009060917140.10024-100000@auk.stats>
Message-ID: <Pine.OSF.4.21.0009061046420.3920-100000@zidsrv.sci.uni-klu.ac.at>

On Wed, 6 Sep 2000, Prof Brian D Ripley wrote:

> On Wed, 6 Sep 2000, Albrecht Gebhardt wrote:
> 
> > 
> > ... well, I found (at least) one solution:
> > 
> > > dyn.load("so1.so",now=F)
> > > dyn.load("so2.so",local=F)
> > > .C("func1",as.double(c(1,2,3)),as.integer(3))
> > in func1
> > in func2
> >  [1]
> > back in func1
> > [[1]]
> > [1] 2 4 6
> > 
> > [[2]]
> > [1] 3
> > 
> > > 
> > 
> > but the question remains:
> > 
> > What is the best way to share common C/Fortran sources across R libraries?
> > How should I implement the above solution in the libraries? What are the
> > side effects? Is it really portable (win32?)? 
> 
> It is not portable.  You will not even be able to make both shared
> objects on some systems, including AIX and Windows, as they need to know
> where the symbols are going to be satisfied.  And those flags (especially
> local=F) do not always work (which is why this worked on OSF4, I think).
> 
> The best way that I know of is to put shared code in a shared library, and
> link so?.so against that.  The only potential problem is putting the
> common library somewhere it will be found at run time if it is a shared
> library/DLL, so I would use a static library unless the code was large
> (like all of LAPACK).  (This is particularly a problem on Windows,
> where the rules for finding DLLs differ by Windows version.)
> 

I expected something like this. Ok. Moving the functions to a static
library should not be a problem. 

But I guess now I have to add ./configure scripts and Makefiles to my
libraries. In lib1 to build the static lib (and to install it somewhere
into the library installation path) and in lib2 to find this location to
link against. It's not crucial during the development stage but at least
when it comes to distribute these libraries.

Are there any guidelines to do this?


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Wed Sep  6 14:44:00 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 06 Sep 2000 08:44:00 -0500
Subject: [Rd] reusing external functions across libs
References: <Pine.OSF.4.21.0009061046420.3920-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <qxplmx58wkf.fsf@verdi.stat.wisc.edu>

--=-=-=

>>>>> "Albrecht" == Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at> writes:

  Albrecht> But I guess now I have to add ./configure scripts and
  Albrecht> Makefiles to my libraries. In lib1 to build the static lib
  Albrecht> (and to install it somewhere into the library installation
  Albrecht> path) and in lib2 to find this location to link
  Albrecht> against. It's not crucial during the development stage but
  Albrecht> at least when it comes to distribute these libraries.

  Albrecht> Are there any guidelines to do this?

There is some information in the R Extensions manual. See the section
on congigure and cleanup.

We have faced a somewhat similar situation in a few projects. From our
experience the following scheme (due to Duncan Temple Lang) may
work. Note that we have tested this only on a few platforms. In
particular this (as it stands) possibly would not work on Windows.

Suppose you have two packages, package1 and package2. You want the
shared object file in package2 to depend on that of package1.

Install package1 as usual with R INSTALL package1. In package2, add a
configure script and a src/Makevars.in file. You may also want to add
a cleanup script.

Here are some example scripts. Remember to replace package1 and
package2 with appropriate names. You have to run autoconf to geneerate
the configure script for configure.in. Alos, these are modified
versions of existing scripts and I have not tested these modified versions.

Saikat
-- 
Department of Statistics                       Email: saikat@stat.wisc.edu
University of Wisconsin - Madison              Phone: (608) 263 5948
1210 West Dayton Street                        Fax:   (608) 262 0032
Madison, WI 53706-1685


--=-=-=
Content-Type: multipart/mixed; boundary="==-=-="

--==-=-=
Content-Disposition: attachment
Content-Description: Makevars.in

# package2/src/Makevars.in
# link package2.so against the package1.so. This is done by creating a
# libpackage1.so in the top level directory of package2.
PKG_LIBS=-L@TOP@ -lpackage1

--==-=-=
Content-Disposition: attachment
Content-Description: configure.in

# package2/configure.in

AC_INIT(src/package2.c)  # replace with appropriate source file in src

# Find the current directory - the toplevel directory for package2

TOP=`pwd`
AC_SUBST(TOP)

# find installation path for package1
# package1 has to be installed during installing package2

if test -z "${R_HOME}" ; then
 R_HOME=`R RHOME`
fi

if test -z "${R_HOME}" ; then
  echo "Cannot find the R distribution!"
  exit 1 
fi

echo 'cat(paste("PACKAGE1_LIBS=",system.file("libs", pkg="packag1"),"\n",sep=""), file="./Package1Libs")' | $R_HOME/bin/R --vanilla  

chmod +x Package1Libs

. ./Package1Libs

if test -z "${PACKAGE1_LIBS}" ; then
 echo "Cannot find the package1 library for R. Please install it,"
 echo "or set the environment R_LIBS so that it can be found in an R session."
 exit 1;
fi

echo "Computed PACKAGE1_LIBS: ${PACKAGE1_LIBS}"

AC_OUTPUT(src/Makevars)

if test ! -f libpackage1.so ; then
  ln -s $PACKAGE1_LIBS/package1.so libpackage1.so
fi

--==-=-=--

--=-=-=



--=-=-=--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Thu Sep  7 06:15:05 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Sep 2000 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200009070515.HAA22411@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 635 *
Subject: Multiple pages with postscript()
From: "Patrick Connolly" <P.Connolly@hort.cri.nz>
Date: Wed, 16 Aug 100 12:14:19 +1200 (NZST)
--par(lwd) reverts to one at page changes under the postscript() device
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 654 *
Subject: Dubious mail address
From: Peter Dalgaard BSA <pd@blueberry.kubism.ku.dk>
Date: Mon, 4 Sep 2000 14:10:30 +0200
* PR# 640 *
Subject: diff.default / diff.ts in wrong package bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 18:28:36 +0200 (CEST)
* PR# 639 *
Subject: symbols: xlim and ylim cannot be specified
From: Werner Stahel <stahel@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 15:54:08 +0200 (CEST)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
* PR# 641 *
Subject: 2 Bugs in na.omit.default()
From: =?iso-8859-1?Q?Jens_Oehlschl=E4gel?= <jens.oehlschlaegel@bbdo-interone.de>
Date: Wed, 23 Aug 2000 11:45:56 +0200
* PR# 644 *
Subject: crash using fisher.test on Windows; was [R] unexpected crash of R under 
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 25 Aug 2000 08:47:00 +0200
* PR# 643 *
Subject: Re: [R] too large alpha or beta in dbeta ?
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 24 Aug 2000 13:45:47 -0700 (PDT)
* PR# 646 *
Subject: under certain conditions, model.matrix appears to lack one column
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 27 Aug 2000 16:22:25 -0400 (EDT)
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 648 *
Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 28 Aug 2000 12:26:21 +0100 (BST)
* PR# 647 *
Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
* PR# 650 *
Subject: plot(x,y,axes=F)
From: kye@ams.sunysb.edu
Date: Thu, 31 Aug 2000 23:52:12 +0200 (MET DST)
* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
* PR# 652 *
Subject: R INSTALL *.tgz fails (minor docs/feature bug)
From: RPO <bobbyo@speakeasy.org>
Date: Sat, 2 Sep 2000 13:34:22 -0700 (PDT)
* PR# 651 *
Subject: =?big5?b?tsewZaWisdE=?= =?us-ascii?q?=3A_?= =?big5?b?tsewZabc?= mailhost.EFN.ORG; SMTP
From: Postmaster@sdm.com.tw
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Thu Sep  7 06:50:21 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Thu, 7 Sep 2000 16:50:21 +1100
Subject: [Rd] suggestion regarding help for `cat' and `paste'
Message-ID: <20000907165021.A4719@ftoomsh.progsoc.uts.edu.au>

The function `cat' should be listed in the see-also references in
the help for `paste' and vice versa since they perform very similar
tasks.

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep  7 09:17:48 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 7 Sep 2000 10:17:48 +0200 (CEST)
Subject: [Rd] asmode.integer()  -- RFC
Message-ID: <14775.20268.82086.175632@gargle.gargle.HOWL>

Many of us known that sometimes, e.g. in calls to .C(..), you want to
basically say
	  
	  x <- as.integer(x)

but you can't do that because as.vector() 
and it's descendants such as as.integer, as.double, as.character
drop all attributes.

Several months ago, someone proposed to use a new function
As.integer() instead.  
Since I just now again "stumbled" on it, I wondered if it might be worth to
define 

      asmode.integer   <- function(x) { mode(x) <- "integer"   ; x }
      asmode.double    <- function(x) { mode(x) <- "double"    ; x }
      asmode.character <- function(x) { mode(x) <- "character" ; x }

in order to encourage more shorter & more readable code...
or would you hate to see yet more functions doing `almost the same' as
others do?

[RFC = Request for comments]

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Thu Sep  7 11:00:23 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Thu, 07 Sep 2000 20:00:23 +1000
Subject: [Rd] asmode.integer()  -- RFC
Message-ID: <3.0.32.20000907200020.0129d5a0@pophost.nsw.cmis.csiro.au>

At 10:17 07/09/00 +0200, Martin Maechler wrote:
>Many of us known that sometimes, e.g. in calls to .C(..), you want to
>basically say
>	  
>	  x <- as.integer(x)
>
>but you can't do that because as.vector() 
>and it's descendants such as as.integer, as.double, as.character
>drop all attributes.
>
>Several months ago, someone proposed to use a new function
>As.integer() instead.  
>Since I just now again "stumbled" on it, I wondered if it might be worth to
>define 
>
>      asmode.integer   <- function(x) { mode(x) <- "integer"   ; x }
>      asmode.double    <- function(x) { mode(x) <- "double"    ; x }
>      asmode.character <- function(x) { mode(x) <- "character" ; x }

The idiom in "another place" is

storage.mode(x) <- "integer"
storage.mode(x) <- "double"  &c

my preference would again be for convergence of the two dialects.

(Of course when S4 takes over that other place, this sort of consideration
becomes much less relevant.)

Bill Venables.

>in order to encourage more shorter & more readable code...
>or would you hate to see yet more functions doing `almost the same' as
>others do?
>
>[RFC = Request for comments]
>
>Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
>Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
>ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
>phone: x-41-1-632-3408		fax: ...-1228			<><
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep  7 14:12:14 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 7 Sep 2000 15:12:14 +0200 (CEST)
Subject: [Rd] asmode.integer()  -- RFC
In-Reply-To: <3.0.32.20000907200020.0129d5a0@pophost.nsw.cmis.csiro.au>
References: <3.0.32.20000907200020.0129d5a0@pophost.nsw.cmis.csiro.au>
Message-ID: <14775.37934.715868.642549@gargle.gargle.HOWL>

>>>>> "Bill" == Bill Venables <Bill.Venables@cmis.csiro.au> writes:

    Bill> At 10:17 07/09/00 +0200, Martin Maechler wrote:
    >> Many of us known that sometimes, e.g. in calls to .C(..), you want to
    >> basically say
    >> 
    >> x <- as.integer(x)
    >> 
    >> but you can't do that because as.vector() 
    >> and it's descendants such as as.integer, as.double, as.character
    >> drop all attributes.
    >> 
    >> Several months ago, someone proposed to use a new function
    >> As.integer() instead.  
    >> Since I just now again "stumbled" on it, I wondered if it might be worth to
    >> define 
    >> 
    >> asmode.integer   <- function(x) { mode(x) <- "integer"   ; x }
    >> asmode.double    <- function(x) { mode(x) <- "double"    ; x }
    >> asmode.character <- function(x) { mode(x) <- "character" ; x }

    Bill> The idiom in "another place" is

    Bill>  storage.mode(x) <- "integer"
    Bill>  storage.mode(x) <- "double"  &c

I had this initially, but

    Bill> my preference would again be for convergence of the two dialects.
well, in R, "mode<-" and "storage.mode<-" are 100% equivalent.
in Splus 5.1, for the above case, they behave equivalently as well.
Hence, saving the extra  "storage." seemed feasible to me, and since I'm
occasionally fond of `minimal art' ......

I agree that "storage.mode" is more expressive...

    Bill> (Of course when S4 takes over that other place, this sort of
    Bill> consideration becomes much less relevant.)

(true, unfortunately)

    >> in order to encourage more shorter & more readable code...
    >> or would you hate to see yet more functions doing `almost the same' as
    >> others do?
    >> 
    >> [RFC = Request for comments]
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Sep  7 14:39:24 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 7 Sep 2000 14:39:24 +0100 (BST)
Subject: [Rd] asmode.integer()  -- RFC
Message-ID: <200009071339.OAA00693@toucan.stats.ox.ac.uk>

> From: Martin Maechler <maechler@stat.math.ethz.ch>
> Date: Thu, 7 Sep 2000 15:12:14 +0200 (CEST)

 
> >>>>> "Bill" == Bill Venables <Bill.Venables@cmis.csiro.au> writes:
> 
>     Bill> At 10:17 07/09/00 +0200, Martin Maechler wrote:
>     >> Many of us known that sometimes, e.g. in calls to .C(..), you want to
>     >> basically say
>     >> 
>     >> x <- as.integer(x)
>     >> 
>     >> but you can't do that because as.vector() 
>     >> and it's descendants such as as.integer, as.double, as.character
>     >> drop all attributes.
>     >> 
>     >> Several months ago, someone proposed to use a new function
>     >> As.integer() instead.  
>     >> Since I just now again "stumbled" on it, I wondered if it might be 
worth to
>     >> define 
>     >> 
>     >> asmode.integer   <- function(x) { mode(x) <- "integer"   ; x }
>     >> asmode.double    <- function(x) { mode(x) <- "double"    ; x }
>     >> asmode.character <- function(x) { mode(x) <- "character" ; x }
> 
>     Bill> The idiom in "another place" is
> 
>     Bill>  storage.mode(x) <- "integer"
>     Bill>  storage.mode(x) <- "double"  &c
> 
> I had this initially, but
> 
>     Bill> my preference would again be for convergence of the two dialects.

> well, in R, "mode<-" and "storage.mode<-" are 100% equivalent.

What the help page says is

     The two assignment versions are currently identical.
                                     ^^^^^^^^^

and I am not sure we want that to remain so, nor should we assume so.
I think R's use of all of mode and typeof and storage.mode is confusing,
especially as the first and third are diluted versions of the second.
(Without looking, how many of you know the exact differences?)


asmode.integer(x)  and (storage.mode(x) <- "integer"; x)  seem to be to
just be (in R) cumbersome ways to do

structure(as.integer(x), attributes(x))

> in Splus 5.1, for the above case, they behave equivalently as well.
> Hence, saving the extra  "storage." seemed feasible to me, and since I'm
> occasionally fond of `minimal art' ......
> 
> I agree that "storage.mode" is more expressive...
> 
>     Bill> (Of course when S4 takes over that other place, this sort of
>     Bill> consideration becomes much less relevant.)
> 
> (true, unfortunately)

Sooner than you might think.  What was announced as the last ever
release of a version of S-PLUS based on Svr3 was released a few days ago.
The future there is S-PLUS 6.x and Svr4 only.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep  7 17:32:59 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 7 Sep 2000 18:32:59 +0200 (CEST)
Subject: [Rd] Calloc() & Free() in different .C(.) calls --> not usable ?
Message-ID: <14775.49979.313017.584547@gargle.gargle.HOWL>

       [sending this to R-devel, since it may be of general interest and 
        could possibly lead to better instructions in the "R-exts" manual]

Is this another case where only .Call() or .External() [or a fudge factor]
solve my problem? 

Following situation: 
 I use dyn.loaded C code to compute a recursive tree structure from my data.
 Beforehand I don't know how big the tree will be, but I want the tree
 (as integer array in my case) be passed back to R.

 Current solution [simplified!]:

  
 ## First I fit the tree to my Data, all in C, but only return the *size*
 ## I'll need to store that tree in R

	 size <-      .C("fittree", data, ..., res = integer(1))$res

 ## Now that I know its size, I can get it into R :

	 tree.in.R <- .C("gettree", size, res = integer(size))$res

 where in the C code, I have a
 global 
	static *tree_struct my_tree;
 and in C's fittree(), I use 
	my_tree = Calloc(1, tree_struct); 
 for building the tree, which is 
 then accessed by gettree(), which ends in
	Free(my_tree);

All well, BUT: 
    problem is that memory just builds up and is not freed at all.

>From a (more private) E-mail of Prof Brian Ripley, I read (maybe wrongly?)
that this seems to be ``common'':

    BDR> and the way that most mallocs work is to use sbrk to raise or lower
    BDR> the brk, that is the size of the data space. 
    BDR> They only reduce it when the data space is sufficiently unfragmented. 
	 --------------------------------------------------------------------
which may be my case : "Free(my_tree)" doesn't really free the
memory [according to my tests, looking at Unix' "ps .."].

Solutions (yes, one of them is  ``use .Call() !'') ??

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Sep  7 18:00:13 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 7 Sep 2000 18:00:13 +0100 (BST)
Subject: [Rd] Calloc() & Free() in different .C(.) calls --> not usable ?
Message-ID: <200009071700.SAA01057@toucan.stats.ox.ac.uk>

> From: Martin Maechler <maechler@stat.math.ethz.ch>
> Date: Thu, 7 Sep 2000 18:32:59 +0200 (CEST)
> To: R-devel@stat.math.ethz.ch
> Subject: [Rd] Calloc() & Free() in different .C(.) calls --> not usable ?
> 
>        [sending this to R-devel, since it may be of general interest and 
>         could possibly lead to better instructions in the "R-exts" manual]
> 
> Is this another case where only .Call() or .External() [or a fudge factor]
> solve my problem? 
> 
> Following situation: 
>  I use dyn.loaded C code to compute a recursive tree structure from my data.
>  Beforehand I don't know how big the tree will be, but I want the tree
>  (as integer array in my case) be passed back to R.
> 
>  Current solution [simplified!]:
> 
>   
>  ## First I fit the tree to my Data, all in C, but only return the *size*
>  ## I'll need to store that tree in R
> 
> 	 size <-      .C("fittree", data, ..., res = integer(1))$res
> 
>  ## Now that I know its size, I can get it into R :
> 
> 	 tree.in.R <- .C("gettree", size, res = integer(size))$res
> 
>  where in the C code, I have a
>  global 
> 	static *tree_struct my_tree;
>  and in C's fittree(), I use 
> 	my_tree = Calloc(1, tree_struct); 
>  for building the tree, which is 
>  then accessed by gettree(), which ends in
> 	Free(my_tree);
> 
> All well, BUT: 
>     problem is that memory just builds up and is not freed at all.

My nnet code does that, as does the rpart code.  I have not seen any
problems with memory-build up with either in R, and have run both
repetitively, e.g. within two-level cross-validations running for
days.  Calloc and Free are just error-checking wrappers for calloc and
free, so what happens is down to those on your OS.

> >From a (more private) E-mail of Prof Brian Ripley, I read (maybe wrongly?)
> that this seems to be ``common'':
> 
>     BDR> and the way that most mallocs work is to use sbrk to raise or lower
>     BDR> the brk, that is the size of the data space. 
>     BDR> They only reduce it when the data space is sufficiently unfragmented. 
> 	 --------------------------------------------------------------------
> which may be my case : "Free(my_tree)" doesn't really free the
> memory [according to my tests, looking at Unix' "ps .."].

It frees the memory to malloc. There is no guarantee that malloc
returns it to the OS, but malloc should do so or re-use it.  I've just
monitored Solaris running R 1.1.1, and there is no evidence from ps/top that
ever returns any memory to the OS during these runs.  But it does not
build up more than 2Mb or so above R's usage at its first GC call, even
though it is being asked to allocate a few hundred Kb and deallocate it
many times.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jniesch@gwdg.de  Fri Sep  8 10:40:01 2000
From: jniesch@gwdg.de (jniesch@gwdg.de)
Date: Fri, 8 Sep 2000 11:40:01 +0200 (MET DST)
Subject: [Rd] Installing R from source ? (PR#655)
Message-ID: <200009080940.LAA09191@pubhealth.ku.dk>

Full_Name: Jens Nieschulze
Version: R-1.1.1
OS: sparc sun solaris 2.7
Submission from: (NULL) (134.76.192.150)


I tried to install R today and got the following at the first try

rbitmap.c:239: parse error before `jmp_buf'
rbitmap.c:239: warning: no semicolon at end of struct or union
rbitmap.c: In function `my_error_exit':
rbitmap.c:257: dereferencing pointer to incomplete type
rbitmap.c: In function `R_SaveAsJpeg':
rbitmap.c:279: storage size of `jerr' isn't known

after changing the source code (replacing the ';' with a ',' and adding some
','
of rbitmap.c in lines 239 and 240 it installed correctly.

cheers
	J.N.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep  8 11:22:44 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Sep 2000 12:22:44 +0200
Subject: [Rd] Installing R from source ? (PR#655)
In-Reply-To: jniesch@gwdg.de's message of "Fri, 8 Sep 2000 11:40:01 +0200 (MET DST)"
References: <200009080940.LAA09191@pubhealth.ku.dk>
Message-ID: <x2g0nb18uj.fsf@blueberry.kubism.ku.dk>

jniesch@gwdg.de writes:

> Full_Name: Jens Nieschulze
> Version: R-1.1.1
> OS: sparc sun solaris 2.7
> Submission from: (NULL) (134.76.192.150)
> 
> 
> I tried to install R today and got the following at the first try
> 
> rbitmap.c:239: parse error before `jmp_buf'
> rbitmap.c:239: warning: no semicolon at end of struct or union
> rbitmap.c: In function `my_error_exit':
> rbitmap.c:257: dereferencing pointer to incomplete type
> rbitmap.c: In function `R_SaveAsJpeg':
> rbitmap.c:279: storage size of `jerr' isn't known
> 
> after changing the source code (replacing the ';' with a ',' and adding some
> ','
> of rbitmap.c in lines 239 and 240 it installed correctly.
> 
> cheers
> 	J.N.

This would seem to happen if "struct jpeg_error_mgr" in l.238 is not
defined by jpeglib.h. I strongly doubt that fiddling with the code in
rbitmap.c is going to make it actually work (as opposed to compile and
install), so a cleaner approach would be to remove the

#define HAVE_JPEG 1

in src/include/config.h. Or update your jpeg library of course.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep  8 12:14:41 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 8 Sep 2000 13:14:41 +0200 (MET DST)
Subject: [Rd] Installing R from source ? (PR#655)
Message-ID: <200009081114.NAA10794@pubhealth.ku.dk>


> From: jniesch@gwdg.de
> Date: Fri, 8 Sep 2000 11:40:01 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Installing R from source ? (PR#655)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Jens Nieschulze
> Version: R-1.1.1
> OS: sparc sun solaris 2.7
> Submission from: (NULL) (134.76.192.150)
> 
> 
> I tried to install R today and got the following at the first try
> 
> rbitmap.c:239: parse error before `jmp_buf'
> rbitmap.c:239: warning: no semicolon at end of struct or union
> rbitmap.c: In function `my_error_exit':
> rbitmap.c:257: dereferencing pointer to incomplete type
> rbitmap.c: In function `R_SaveAsJpeg':
> rbitmap.c:279: storage size of `jerr' isn't known
> 
> after changing the source code (replacing the ';' with a ',' and adding some
> ','
> of rbitmap.c in lines 239 and 240 it installed correctly.

Ah, but it was correct before you altered its meaning.  What
the error message appears to say is that `jmp_buf' is not defined on
your system.  jmp_buf is defined on Solaris 2.7 in
/usr/include/setjmp.h, which should be included.

Do you have png installed?  I've run this assuming not and got similar
error messages. Solve them by adding

#include <setjmp.h>

at line 234 of rbitmap.c.  The png stuff includes setjmp.h.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep  8 12:37:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Sep 2000 13:37:55 +0200
Subject: [Rd] Installing R from source ? (PR#655)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Fri, 8 Sep 2000 13:14:41 +0200 (MET DST)"
References: <200009081114.NAA10794@pubhealth.ku.dk>
Message-ID: <x2bsxz15d8.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> > I tried to install R today and got the following at the first try
> > 
> > rbitmap.c:239: parse error before `jmp_buf'
> > rbitmap.c:239: warning: no semicolon at end of struct or union
> > rbitmap.c: In function `my_error_exit':
> > rbitmap.c:257: dereferencing pointer to incomplete type
> > rbitmap.c: In function `R_SaveAsJpeg':
> > rbitmap.c:279: storage size of `jerr' isn't known
> > 
> > after changing the source code (replacing the ';' with a ',' and adding some
> > ','
> > of rbitmap.c in lines 239 and 240 it installed correctly.
> 
> Ah, but it was correct before you altered its meaning.  What
> the error message appears to say is that `jmp_buf' is not defined on
> your system.  jmp_buf is defined on Solaris 2.7 in
> /usr/include/setjmp.h, which should be included.
> 
> Do you have png installed?  I've run this assuming not and got similar
> error messages. Solve them by adding
> 
> #include <setjmp.h>
> 
> at line 234 of rbitmap.c.  The png stuff includes setjmp.h.

Could well be a better diagnosis than what I suggested. Compiler
errors are often a word or two off relative to the actual location of
the problem. Easy thing to try, certainly. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep  8 21:44:37 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 08 Sep 2000 16:44:37 -0400
Subject: [Rd] 1.2 R CMD check
Message-ID: <39B94FB5.C84FB646@bank-banque-canada.ca>

I've taken a quick look at the 1.2 snapshot to see what is coming. Is it my
imagination or is it quite a bit faster?

I noticed that "R CMD check" now seems to do much more: install, check examples,
check dvi (&pdf?).  I think it is great to have this kind of comprehensive check
of a package, especially once everything in the package is suppose to be
working.

But when I am still in development mode I would also like to be able to run the
pieces separately so that development is faster, and I don't see how to do
that.  I can see how to set   --no-latex, but is there a way to avoid re-doing
install?  (BTW, the usage for check says "Finally, the package is installed into
the log directory" but I have the impression that the install is the first thing
that is done.) Or should I consider "R CMD check" as the thing to do first and
then somehow move the libraries installed in the *.Rcheck log directories into
$RHOME/library so that everything that depends on them gets the new version? Or
should I be somehow be setting things so that $RHOME/library is the  log
directory?

Thanks,
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep  8 22:29:52 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 8 Sep 2000 22:29:52 +0100 (BST)
Subject: [Rd] 1.2 R CMD check
In-Reply-To: <39B94FB5.C84FB646@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10009082219310.15387-100000@auk.stats>

On Fri, 8 Sep 2000, Paul Gilbert wrote:

> I've taken a quick look at the 1.2 snapshot to see what is coming. Is it my
> imagination or is it quite a bit faster?

On some machines and tasks, yes. It depends critically on the performance
of malloc we found, to the extent that on Windows we had to find another
malloc to avoid a massive slowdown.

> I noticed that "R CMD check" now seems to do much more: install, check examples,
> check dvi (&pdf?).  I think it is great to have this kind of comprehensive check
> of a package, especially once everything in the package is suppose to be
> working.

Most of the functionality of `build' has been moved to `check'.

> But when I am still in development mode I would also like to be able to run the
> pieces separately so that development is faster, and I don't see how to do
> that.  I can see how to set   --no-latex, but is there a way to avoid re-doing
> install?  (BTW, the usage for check says "Finally, the package is installed into
> the log directory" but I have the impression that the install is the first thing
> that is done.) Or should I consider "R CMD check" as the thing to do first and
> then somehow move the libraries installed in the *.Rcheck log directories into
> $RHOME/library so that everything that depends on them gets the new version? Or
> should I be somehow be setting things so that $RHOME/library is the  log
> directory?

It's not finished yet, you will notice from the perl code.  But yes, it
does do its own install as one of the things it is checking is that a
virgin install gets the results correct.  I just do an install into my
library directory of the version I intend to distribute after check and
build.  Nothing I have seen (not even nlme) takes anything like as long
to install as to check.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lej25@statslab.cam.ac.uk  Mon Sep 11 12:13:29 2000
From: lej25@statslab.cam.ac.uk (lej25@statslab.cam.ac.uk)
Date: Mon, 11 Sep 2000 13:13:29 +0200 (MET DST)
Subject: [Rd] .Random.seed resetting (PR#656)
Message-ID: <200009111113.NAA27130@pubhealth.ku.dk>

Full_Name: Lara Jamieson
Version: 1.1.1
OS: Linux
Submission from: (NULL) (131.111.20.203)


I've checked for other reports on this and can't find anything.  It seems that 
the .Random.seed isn't updated properly after using rm(.Random.seed).  Mu 
understanding from the help file indicates that a new 'random' seed will be
generated.
It appears that sometimes the old one is just reinstated.

I removed my .RData file and the problem remains.  It seems to happen when calls
are 
made in succession to the same 'random generation type' function; but appears to

work when different calls are made in succession.
An example is given below.  I was using the sample command when I found the
problem 
but it happens with runif as well...

> runif(1)
[1] 0.5551602
> runif(1)
[1] 0.2575637
> rm(.Random.seed)
> runif(1)
[1] 0.5551602
> rm(.Random.seed)
> rm(.Random.seed)
Warning message: 
remove: variable ".Random.seed" was not found 
> runif(1)
[1] 0.2575637

Thanks,
Lara

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Sep 11 14:10:24 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 11 Sep 2000 15:10:24 +0200 (MET DST)
Subject: [Rd] .Random.seed resetting (PR#656)
Message-ID: <200009111310.PAA29682@pubhealth.ku.dk>

>>>>> "lej25" == lej25  <lej25@statslab.cam.ac.uk> writes:

    lej25> Full_Name: Lara Jamieson Version: 1.1.1 OS: Linux Submission
    lej25> from: (NULL) (131.111.20.203)

    lej25> I've checked for other reports on this and can't find anything.
    lej25> It seems that the .Random.seed isn't updated properly after
    lej25> using rm(.Random.seed).  Mu understanding from the help file
    lej25> indicates that a new 'random' seed will be generated.  It
    lej25> appears that sometimes the old one is just reinstated.

    lej25> I removed my .RData file and the problem remains.  It seems to
    lej25> happen when calls are made in succession to the same 'random
    lej25> generation type' function; but appears to

    lej25> work when different calls are made in succession.  An example is
    lej25> given below.  I was using the sample command when I found the
    lej25> problem but it happens with runif as well...

    >> runif(1)
    lej25> [1] 0.5551602
    >> runif(1)
    lej25> [1] 0.2575637
    >> rm(.Random.seed) runif(1)
    lej25> [1] 0.5551602
    >> rm(.Random.seed) rm(.Random.seed)
    lej25> Warning message: remove: variable ".Random.seed" was not found
    >> runif(1)
    lej25> [1] 0.2575637


[I don't get your behavior]
Could it be that you have a .Random.seed further up in your search() path?
This would explain everything.

Try
    find(.Random.seed, where = TRUE)

which would show you the place where you had another copy if that was the
solution ...

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bv5ddma@mail.educities.edu.tw  Mon Sep 11 16:09:14 2000
From: bv5ddma@mail.educities.edu.tw (bv5ddma@mail.educities.edu.tw)
Date: Mon, 11 Sep 2000 17:09:14 +0200 (MET DST)
Subject: [Rd] Error on demo(tkttest)Version R.1.1.1 (PR#657)
Message-ID: <200009111509.RAA01541@pubhealth.ku.dk>

Dear Sir,
    I just installed the whole base system on my notebook with Window
98, but the demo(tktest) showed the following message:
demo(tkttest)


        demo(tkttest)
        ---- ~~~~~~~

Type  <Return>   to start :

> require(tcltk) || stop("tcltk support is absent")
Loading required package: tcltk
Error in firstlib(which.lib.loc, package) :
        TCL_LIBRARY is not set
Error in eval.with.vis(expr, envir, enclos) :
        tcltk support is absent

    Would you mind to tell me how to correct it!
    Thanks!

                                                Sincerely yours,
                                                Patrick Yuk-lun Ma M.D.
                                                 Radiation Oncologist
                                                Doctor of Hospice Team
                                                Chia-Yi Christian
Hospital
                                                Chia-Yi, Taiwan



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Sep 11 16:14:02 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 11 Sep 2000 08:14:02 -0700 (PDT)
Subject: [Rd] Error on demo(tkttest)Version R.1.1.1 (PR#657)
In-Reply-To: <200009111509.RAA01541@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0009110811510.16435-100000@atlas.biostat.washington.edu>

On Mon, 11 Sep 2000 bv5ddma@mail.educities.edu.tw wrote:

> Dear Sir,
>     I just installed the whole base system on my notebook with Window
> 98, but the demo(tktest) showed the following message:
> demo(tkttest)
> 

To use the tcltk library you need to install Tcl/Tk (from
http://dev.scriptics.com) and set the TCL_LIBRARY environment variable.  
This is described at the bottom of the readme.rw1011 file in the same
directory on CRAN that you downloaded R from.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


> 
>         demo(tkttest)
>         ---- ~~~~~~~
> 
> Type  <Return>   to start :
> 
> > require(tcltk) || stop("tcltk support is absent")
> Loading required package: tcltk
> Error in firstlib(which.lib.loc, package) :
>         TCL_LIBRARY is not set
> Error in eval.with.vis(expr, envir, enclos) :
>         tcltk support is absent
> 
>     Would you mind to tell me how to correct it!
>     Thanks!
> 
>                                                 Sincerely yours,
>                                                 Patrick Yuk-lun Ma M.D.
>                                                  Radiation Oncologist
>                                                 Doctor of Hospice Team
>                                                 Chia-Yi Christian
> Hospital
>                                                 Chia-Yi, Taiwan
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From y0004379@rzbcosv2.rz.tu-bs.de  Mon Sep 11 16:27:55 2000
From: y0004379@rzbcosv2.rz.tu-bs.de (Peter Malewski)
Date: Mon, 11 Sep 2000 17:27:55 +0200
Subject: [Rd] Error on demo(tkttest)Version R.1.1.1 (PR#657)
In-Reply-To: <200009111509.RAA01541@pubhealth.ku.dk>; from bv5ddma@mail.educities.edu.tw on Mon, Sep 11, 2000 at 05:09:14PM +0200
References: <200009111509.RAA01541@pubhealth.ku.dk>
Message-ID: <20000911172752.A28400@rzbcosv2.rz.tu-bs.de>

On Mon, Sep 11, 2000 at 05:09:14PM +0200, bv5ddma@mail.educities.edu.tw wrote:
> > require(tcltk) || stop("tcltk support is absent")
> Loading required package: tcltk
> Error in firstlib(which.lib.loc, package) :
>         TCL_LIBRARY is not set
> Error in eval.with.vis(expr, envir, enclos) :
>         tcltk support is absent
> 
>     Would you mind to tell me how to correct it!
>     Thanks!

You have to install tk-libraries and set the appropiates paths. see the documentations. the tcltk packages is just an interface.

peter


----
P.Malewski, Maschplatz 8, 38114 Braunschweig, Tel.: 0531 500965, 
MH-Hannover: 0511 532 3194 / Fax: 0511 532 3190, 
P.Malewski@tu-bs.de, peter.malewski@gmx.de, malewski.peter@mh-hannover.de.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Mon Sep 11 17:40:54 2000
From: jago@mclink.it (Stefano Iacus)
Date: Mon, 11 Sep 2000 18:40:54 +0200
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
Message-ID: <a04330102b5e2b3c3454d@[159.149.74.61]>

Hy (I hope this is the right list).

1. Mac porting

I'm finishing the porting of R for Mac. I hope to finish it for the 
end of september. Thanks to the porting of  R 0.64 by Ross (that he 
gave me) I succeded in this porting. This is the current state:

Both R 1.1.1. and 1.2.0 works with minor modification to the original 
code. The Macintosh device has been updated to the new version of 
WASTE library that is Carbon-izable (for who knows MacOS, Carbon is a 
collections of libraries  that allow macintosh applications developed 
for pre-MacOS X to run under MacOS X with minor modification, MacOS X 
is beeing released in september).
There is  a lot of work to do in testing the 1.1.1 porting. The code 
I have modified is not all commented, so give me some times to fix 
this and I'll release the sources to who will ask for.
The porting runs only on PPC machines.
I  compiled 1.2 only to verify how much the changes are sensitive to 
new releases of the code. It seems to work without problems.

Is there anyone working on R porting for Mac at the moment?

Actually, I have problems on building the base package and packages 
in general and I just pick Win base package and adapt it, so the 
check I can do are not so accurate. Where can I find the proper 
documentation on building packages?
Makefiles on Mac are a problem for me at the moment, but I'll try to 
fix this also.



2. About the bug (?)

I've to remark one problem in the source code of PS and Xfig devices. 
When the device look for "afm" it is system dependent because slashes 
such "/" are used to search for fonts:

i.e. (in xfig, the same is for PS)

static int XFig_Open(DevDesc *dd, XFigDesc *pd)
{
     char buf[512];
     int i;

     for(i = 0; i < 5 ; i++) {
	sprintf(buf, "%s/afm/%s.%s", R_Home,             <--- HERE
		Family[pd->fontfamily].font[i].abbr,
		(i == 4) ? "afm" : Extension[pd->encoding]);


the slashes should be replaced by the FILESEP  definition.


Both devices fixed for FILESEP (and pictex as well) works on Mac.

Regards,

         Stefano



-- 
Stefano Maria Iacus
Dipartimento di Politica Economica ed Aziendale
Universita' di Milano
Via Conservatorio 7
20122 Milano
Tel: 02 760 74 462
Fax: 02 760 23 198
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lkavalieris@maths.otago.ac.nz  Wed Sep 13 02:40:46 2000
From: lkavalieris@maths.otago.ac.nz (lkavalieris@maths.otago.ac.nz)
Date: Wed, 13 Sep 2000 03:40:46 +0200 (MET DST)
Subject: [Rd] PR 640 (diff.default computes an incorrect starting time) (PR#658)
Message-ID: <200009130140.DAA15907@pubhealth.ku.dk>

diff.default computes an incorrect starting time for time series.

An error occurs in the arima0 procedure:

library(ts)
y <- ts(rnorm(24),freq=12)
x <- ts(rnorm(24),freq=12)
arima0(y,xreg=x,seasonal=list(order=c(0,1,0)))
Error in tsp<-(*tmp*, value = c(xtsp[1] + lag * differences * xtsp[3],
:
 invalid time series parameters specified

This can be traced to the following lines in arima0

class(x) <- NULL
diff(x,12,1)

The computation of the starting value of the differenced series in
diff.default is incorrect - replacing
             xtsp[1] + lag * differences * xtsp[3]
by

xtsp[1] + lag * differences / xtsp[3]

gives the correct starting time and the problem vanished in arima0.

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

_____________________________________

Laimonis Kavalieris
Maths and Stats
University of Otago
Dunedin
New Zealand





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Sep 14 15:31:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 14 Sep 2000 10:31:26 -0400
Subject: [Rd] classed
Message-ID: <39C0E13E.2710F02D@bank-banque-canada.ca>

For a long time now I've been using a function:

classed <- function (x, cls)
{
    class(x) <- cls
    x
}

as a utility at the end other functions to set the class of an object and return
the object. I've  noticed examples where others have been doing a similar thing
and I think it would be a useful addition to R base (unless there is already
something there to do this - it wouldn't be the first time I've missed
something). The function is useful not so much because it saves a line of code
in other functions, but because I think it encourages a cleaner, easier to read
style.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Sep 14 16:37:25 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 14 Sep 2000 10:37:25 -0500
Subject: [Rd] Projects
Message-ID: <6rk8cfkmru.fsf@franz.stat.wisc.edu>

I am teaching a graduate course on Statistical Computing this
semester.  A major part of the grade is determined by a project in
which a student or small group of students produce, test, and document
some software for statistics.  I will encourage those students who are
developing in S to package their software as an R package.

I would welcome suggestions of possible projects, especially projects
that come under the heading of "Useful facilities to be added to R".
Please keep in mind that the project must be completed by mid-December
and that not all the students have extensive experience programming in
S and C.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep 14 17:46:41 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 14 Sep 2000 18:46:41 +0200
Subject: [Rd] Projects
In-Reply-To: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
Message-ID: <14785.241.670605.528570@gargle.gargle.HOWL>


1) Design of Experiments :

 - S (even before "-plus" existed) has had functions like

   fac.design
   oa.design
   fractionate   etc  ["White book", chapter 5].

		 [also a set of pre-stored useful fractional designs
		  for (> 2)-leveled factors.]

  Some of these would look like ``student exercises'' to do.
  If you could have them work in an environment where S-plus was *not*
  installed, this would end up as "clean table" project 
  w/o problematic code copying...

 - One could also think of  code for SEQUENTIAL design
  [do a  2^{m-k} (= 8) initially; 
   do a  (fractionated) n1 x .. x n_N on the remaining N important factors,
   given the data for the first 8 experiments].

 - Or "Taguchi" [- using (at least two) different kind of factors, some cheap,
		   some expensive to change
		 - multiple Y's, for some the "local" variance should be
		   minimized, etc etc
		 ]
	      
  This looks tedious and maybe can well be partitioned into different student
  projects.  Maybe JMC, AEF, RMH (authors of ch.5) or other experts can say
  much more here.

------

2) For Computer Scientists :
    "Differentiation" / Symbolic derivatives,..

   Improve the possibilities of  D() and deriv(), and document them.
   Make these user-extensible.

   Think about the hessian in addition to the gradient.

  

--------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Sep 14 17:52:48 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 14 Sep 2000 09:52:48 -0700
Subject: [Rd] Projects
In-Reply-To: <14785.241.670605.528570@gargle.gargle.HOWL>
 (Martin Maechler's message of "Thu, 14 Sep 2000 18:46:41 +0200")
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
Message-ID: <873dj2ncf3.fsf@jeeves.blindglobe.net>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:


    MM> 2) For Computer Scientists : "Differentiation" / Symbolic
    MM> derivatives,..

    MM>    Improve the possibilities of D() and deriv(), and document
    MM> them.  Make these user-extensible.

    MM>    Think about the hessian in addition to the gradient.

Even automating/specifications for numerical derivatives would be
nice. 


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Sep 14 18:16:42 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Sep 2000 19:16:42 +0200
Subject: [Rd] Projects
In-Reply-To: Douglas Bates's message of "14 Sep 2000 10:37:25 -0500"
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
Message-ID: <x2og1qzyf9.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> I am teaching a graduate course on Statistical Computing this
> semester.  A major part of the grade is determined by a project in
> which a student or small group of students produce, test, and document
> some software for statistics.  I will encourage those students who are
> developing in S to package their software as an R package.
> 
> I would welcome suggestions of possible projects, especially projects
> that come under the heading of "Useful facilities to be added to R".
> Please keep in mind that the project must be completed by mid-December
> and that not all the students have extensive experience programming in
> S and C.

These are probably too hard and too narrow, but now the topic is up:

- getting predictions to work on new data in cases where model depends
  on data set (notably regressions splines with auto knot placement)

- in lme, we can predict at level K would be nice to get SE of
  prediction (this also takes levels, extending distinction between
  confidence and tolerance intervals) 

- conditional tolerance in lme (much too hard I suspect)

- in model.tables.aov, SE's for type="means" are sorely missed.

This is not very hard, but maybe too small (although one will have to
study issues of contrasts and internals of an lm object rather
carefully):

- extend pairwise.t.test to take a linear model and a factor in the
  model as argument. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Sep 14 18:27:43 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 14 Sep 2000 12:27:43 -0500
Subject: [Rd] Projects
In-Reply-To: rossini@blindglobe.net's message of "14 Sep 2000 09:52:48 -0700"
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu> <14785.241.670605.528570@gargle.gargle.HOWL> <873dj2ncf3.fsf@jeeves.blindglobe.net>
Message-ID: <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>

>>>>> "AJR" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
  MM> 2) For Computer Scientists : "Differentiation" / Symbolic
  MM> derivatives,..

  MM> Improve the possibilities of D() and deriv(), and document them.
  MM> Make these user-extensible.

  MM> Think about the hessian in addition to the gradient.

  AJR> Even automating/specifications for numerical derivatives would
  AJR> be nice.

The nls package has a function called numericDeriv - with a little
modification it could be used elsewhere. An earlier version of the
underlying C code is used as an example in the R Extensions manual.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Sep 14 18:43:05 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 14 Sep 2000 10:43:05 -0700
Subject: [Rd] Projects
In-Reply-To: <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
 (Saikat DebRoy's message of "14 Sep 2000 12:27:43 -0500")
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
 <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
Message-ID: <87og1qlviu.fsf@jeeves.blindglobe.net>

>>>>> "SD" == Saikat DebRoy <saikat@stat.wisc.edu> writes:


>>>>> "AJR" == A J Rossini <rossini@blindglobe.net> writes:
>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
    MM> 2) For Computer Scientists : "Differentiation" / Symbolic
    MM> derivatives,..

    MM> Improve the possibilities of D() and deriv(), and document
    MM> them.  Make these user-extensible.

    MM> Think about the hessian in addition to the gradient.

    AJR> Even automating/specifications for numerical derivatives
    AJR> would be nice.

    SD> The nls package has a function called numericDeriv - with a
    SD> little modification it could be used elsewhere. An earlier
    SD> version of the underlying C code is used as an example in the
    SD> R Extensions manual.

Right, and it would be nice (necessary?) for testing and verification
of the "symbolic" side of the package as well as for "drop-in" or
"change a parameter" design functionality.  As well as being a
starting point for the interface for the symbolicDeriv package.

best,
-tony


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Fri Sep 15 00:31:11 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Fri, 15 Sep 2000 09:31:11 +1000
Subject: [Rd] classed
Message-ID: <3.0.32.20000915093110.012a4c70@pophost.nsw.cmis.csiro.au>

At 10:31 14/09/00 -0400, Paul Gilbert wrote:
>For a long time now I've been using a function:
>
>classed <- function (x, cls)
>{
>    class(x) <- cls
>    x
>}
>
>as a utility at the end other functions to set the class of an object and
return
>the object. I've  noticed examples where others have been doing a similar
thing
>and I think it would be a useful addition to R base (unless there is already
>something there to do this - it wouldn't be the first time I've missed
>something). The function is useful not so much because it saves a line of
code
>in other functions, but because I think it encourages a cleaner, easier to
read
>style.

In a sense it is there already as structure()

classed(x, "foo")

has exactly the same effect (in R and S3) as

structure(x, class = "foo")

but structure() is more general allowing several attributes to be set at
once via additional arguments (though all have to be named).

I should point out, though, that there is a danger in going this way
entirely if there is any intention of porting the code to S4 because in S4
the class of an object is NOT an attribute.  Once you get into the swing of
using structure() in this way it can become habitual and then going through
your code to find all the instances where you have set a class attribute
this way and changing it for S4 can be quite tedious.

Bill Venables.


>
>Paul Gilbert
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Sep 15 03:15:52 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri, 15 Sep 2000 02:15:52 GMT
Subject: [Rd] Projects
In-Reply-To: <87og1qlviu.fsf@jeeves.blindglobe.net>
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu> <14785.241.670605.528570@gargle.gargle.HOWL> <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu> <87og1qlviu.fsf@jeeves.blindglobe.net>
Message-ID: <39c38587.1708646@julian.uwo.ca>

On 14 Sep 2000 10:43:05 -0700, you wrote:

>Right, and it would be nice (necessary?) for testing and verification
>of the "symbolic" side of the package as well as for "drop-in" or
>"change a parameter" design functionality.  As well as being a
>starting point for the interface for the symbolicDeriv package.

I'm not sure if this is what Tony has in mind, but something I always
do when working with optimizers that take a supplied derivative is to
write a little numerical derivative routine to check that my calculus
and programming were done correctly.  Putting that into a single
function which took arguments just like the ones you pass to the
optimizer would be very convenient.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Fri Sep 15 03:18:24 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Fri, 15 Sep 2000 12:18:24 +1000
Subject: [Rd] Projects
Message-ID: <3.0.32.20000915121819.012af4d0@pophost.nsw.cmis.csiro.au>

At 18:46 14/09/00 +0200, Martin Maechler wrote:
>
>1) Design of Experiments :
>
> - S (even before "-plus" existed) has had functions like
>
>   fac.design
>   oa.design
>   fractionate   etc  ["White book", chapter 5].
>
>		 [also a set of pre-stored useful fractional designs
>		  for (> 2)-leveled factors.]

The drawback with this project, worthy as it is, is that if you are not
really on top of experimental design the computations can be surprisingly
tricky.

On the quiet I have just released a miniscule library for R, conf.design,
that might make a good first step, though.  It generates confounded
symmetrical designs for the p^n case.  You tell it which contrasts you are
prepared to sacrifice across blocks and it generates the design that will
do it.  It also has things to generate "pseudo-factors", that is if you
have a composite number of levels for your real factor it will generate a
number of factors each with a prime number of levels which together are
equivalent to yours.  In this way you can partially extend the thing to the
non-prime case, but not very far.  There is a really interesting
programming exercise in this waiting to be done here, I have to say, but
the trickiness should not be under-estimated.

I released it because I kept getting requests to do so, but it was done a
long time ago and it is not exactly tidy.  In particular the front end is
obscure and should be formula based rather than matrix based.  This would
make a nice little programming project for a wet weekend or so.

(conf.design also has a function, primes(), that is way overkill for the
sorts of things I need it for in this library, but it generates primes < N
using the classical sieve of eratosthenes in a pretty slick way.)

Another approach to this whole problem is to look for approximate designs
rather than insist on exact balance, orthogonality, or even absolutely
highest efficiency.  In the experimental design context (as opposed to,
say, coding theory) you never need anything but a reasonably good design,
anyway.  

There is some freely available software around for doing that, such as
"Dopt" a fortran program by Alan Miller and Nam Nguyen that was published
in Applied Statistics algorithms some time ago for constructing D-optimal
(or nearly so) experiments for a given simple block structure.  

I had a go at putting a front-end on this some time ago and I think the
result is still floating around StatLib, but the S code is c*o*m*p*l*e*x
and probably far too optimistic in what it sets out to do.  I have never
returned to it but again, this had a fair following for some time (maybe
even still) and would be a very useful thing to have for R.  I also have
some simulated annealing-type software that constructs near optimal block
and row-column designs but I left that problem alone 9 years ago and have
not thought much about it since.  It could be resurrected, though, if
anyone were interested.  This is written in C and has never had an S front
end.

Bill Venables.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Fri Sep 15 04:26:33 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 14 Sep 2000 20:26:33 -0700
Subject: [Rd] Projects
In-Reply-To: <39c38587.1708646@julian.uwo.ca>
 (Duncan Murdoch's message of "Fri, 15 Sep 2000 02:15:52 GMT")
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
 <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
 <87og1qlviu.fsf@jeeves.blindglobe.net> <39c38587.1708646@julian.uwo.ca>
Message-ID: <87n1ha1gk6.fsf@jeeves.blindglobe.net>

>>>>> "DM" == Duncan Murdoch <dmurdoch@pair.com> writes:


    DM> On 14 Sep 2000 10:43:05 -0700, you wrote:
    >> Right, and it would be nice (necessary?) for testing and
    >> verification of the "symbolic" side of the package as well as
    >> for "drop-in" or "change a parameter" design functionality.  As
    >> well as being a starting point for the interface for the
    >> symbolicDeriv package.

    DM> I'm not sure if this is what Tony has in mind, but something I
    DM> always do when working with optimizers that take a supplied
    DM> derivative is to write a little numerical derivative routine
    DM> to check that my calculus and programming were done correctly.
    DM> Putting that into a single function which took arguments just
    DM> like the ones you pass to the optimizer would be very
    DM> convenient.

That's exactly it.  (but perhaps have at least the 3 basic forms --
f(point + eps) - f(point), f(point + eps/2) - f(point - eps/2),
f(point) - f(point - eps)).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Fri Sep 15 05:00:52 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Fri, 15 Sep 2000 15:00:52 +1100
Subject: [Rd] classed
In-Reply-To: <39C0E13E.2710F02D@bank-banque-canada.ca>; from pgilbert@bank-banque-canada.ca on Thu, Sep 14, 2000 at 10:31:26AM -0400
References: <39C0E13E.2710F02D@bank-banque-canada.ca>
Message-ID: <20000915150052.B24267@ftoomsh.progsoc.uts.edu.au>

On Thu, Sep 14, 2000 at 10:31:26AM -0400, Paul Gilbert wrote:
> classed <- function (x, cls)
> {
>     class(x) <- cls
>     x
> }
[snip]
> The function is useful not so much because it saves a line of code
> in other functions, but because I think it encourages a cleaner, easier to read
> style.

Just to add my 2c, I don't believe it is cleaner to hide assignment
statements inside functions without some reasonably sensible reason to
do so. When I see something like:

	y <- wibble( x, "foo" );

I would expect `x' not to change. Now OK this isn't a watertight rule
(nothing ever is) but little functions containing hidden assignment
statements are usually confusing to a reader not already familiar
with the code.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Fri Sep 15 05:40:36 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Fri, 15 Sep 2000 15:40:36 +1100
Subject: [Rd] Projects (i.e. wishlist)
In-Reply-To: <14785.241.670605.528570@gargle.gargle.HOWL>; from maechler@stat.math.ethz.ch on Thu, Sep 14, 2000 at 06:46:41PM +0200
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu> <14785.241.670605.528570@gargle.gargle.HOWL>
Message-ID: <20000915154036.C24267@ftoomsh.progsoc.uts.edu.au>

On Thu, Sep 14, 2000 at 06:46:41PM +0200, Martin Maechler wrote:
> 2) For Computer Scientists :
>     "Differentiation" / Symbolic derivatives,..
> 
>    Improve the possibilities of  D() and deriv(), and document them.
>    Make these user-extensible.
> 
>    Think about the hessian in addition to the gradient.

Now that you mention it, I'd like this to work:

> X <- expression( x )
> X + 1
expression(x + 1)
> (X + 1) + 2
expression((x + 1) + 2)
> simplify(( X + 1 ) + 2 )
expression( x + 3 )
> simplify( expand(( X + 2 ) * ( X + 5 ) * ( X + 7 )))
expression(x^3 + 14 * x^2 + 59 * x + 70)
> factorise( X^3 + 14 * X^2 + 59 * X + 70 ))
expression((x + 2) * (x + 5) * (x + 7))


If the roots have small imaginary components due to round off,
that is still OK. If there is a good reason for the operations
to return objects of mode ``call'' rather than mode ``expression''
(like what D() does) that would be OK too, although I prefer
to work with the expression() wrappers on because then the printed
form is identical to what you type in. At any rate, the operations
have to handle objects of mode ``expression'', ``call'' and all the
numericals as their inputs.

And as many others as you get time to do plus a system for
categorising, organising, documenting and extending the available
manipulations...

... I'm sure this is all very useful for statistics, it would
be useful to me at any rate. 

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Fri Sep 15 05:21:29 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Fri, 15 Sep 2000 14:21:29 +1000
Subject: [Rd] classed
Message-ID: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au>

At 15:00 15/09/00 +1100, Telford Tendys wrote:
>On Thu, Sep 14, 2000 at 10:31:26AM -0400, Paul Gilbert wrote:
>> classed <- function (x, cls)
>> {
>>     class(x) <- cls
>>     x
>> }
>[snip]
>> The function is useful not so much because it saves a line of code
>> in other functions, but because I think it encourages a cleaner, easier
to read
>> style.
>
>Just to add my 2c, I don't believe it is cleaner to hide assignment
>statements inside functions without some reasonably sensible reason to
>do so. When I see something like:
>
>	y <- wibble( x, "foo" );
>
>I would expect `x' not to change. 

And nor does it.  What happens is that a new object is constructed from x,
with (in this case) extra bits and pieces tacked on and (here) that new
object is assigned the name y.

Writing a function to modify its argument is possible (e.g. fix() does it)
but not altogether straightforward, especially if you want it to work in
the most general case.

> Now OK this isn't a watertight rule
>(nothing ever is) but little functions containing hidden assignment
>statements are usually confusing to a reader not already familiar
>with the code.

If that was what was happening I would agree with you, but it isn't.  You
have been misled by the old function/macro thing.  What was presented was a
true function but you read it as if it were a macro.  

Bill V.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Fri Sep 15 06:58:09 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Fri, 15 Sep 2000 16:58:09 +1100
Subject: [Rd] classed
In-Reply-To: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au>; from Bill.Venables@cmis.csiro.au on Fri, Sep 15, 2000 at 02:21:29PM +1000
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au>
Message-ID: <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au>

On Fri, Sep 15, 2000 at 02:21:29PM +1000, Bill Venables wrote:
> And nor does it.  What happens is that a new object is constructed from x,
> with (in this case) extra bits and pieces tacked on and (here) that new
> object is assigned the name y.
> 
> Writing a function to modify its argument is possible (e.g. fix() does it)
> but not altogether straightforward, especially if you want it to work in
> the most general case.

Hmmm, OK now that I test it out you are quite correct. But that implies
that the whole object is copied because later modification of either the
original or the result do not propagate between x and y... unless R has
some sort of copy-on-write flag which I never noticed when wandering 
through the R source (a lot probably falls into that category).

If it doesn't use copy-on-write then the result will be additional
slowdown when all your data is copied again and again (I guess it depends
on how big the object is).

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From twoday@freeatlast.com  Fri Sep 15 09:44:07 2000
From: twoday@freeatlast.com (twoday@freeatlast.com)
Date: Fri, 15 Sep 2000 10:44:07 +0200 (MET DST)
Subject: [Rd] AD:Family Reunion T Shirts & More (PR#659)
Message-ID: <200009150844.KAA12494@pubhealth.ku.dk>

Message sent by:  Kuppler Graphics, 32 West Main Street, Maple 
Shade, New Jersey, 08052,
1-800-810-4330.   This list will NOT be sold.  All addresses 
are automatically added to our remove list.

Hello.  My name is Bill from Kuppler Graphics.  We do 
screenprinting on T Shirts, Sweatshirts,
Jackets, Hats, Tote Bags and more!

Do you or someone you know have a Family Reunion coming up?  
Kuppler Graphics would like to
provide you with some great looking T Shirts for your Reunion.

Kuppler Graphics can also provide you with custom T's and 
promotional items such as imprinted
magnets, keychains, pens, mugs, hats, etc. for your business or 
any fundraising activity
(church, school, business etc.) We also can provide you with 
quality embroidery. 

We are a family owned company with over 15 years of experience.  

All work is done at this location.  No middle man.  Our prices 
are great!

Please call toll free 1-800-810-4330 if the reply to email is 
down for a quote or to
discuss your screenprinting needs 

Bill
Kuppler Graphics
 
 
 
 
 
 
 
 
 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep 15 10:23:33 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 15 Sep 2000 11:23:33 +0200 (MET DST)
Subject: [Rd] identify.default ignores any setting of cex. (PR#660)
Message-ID: <200009150923.LAA13337@pubhealth.ku.dk>

R 1.1.1 on Windows, but I think this is widespread.

Using either

par(cex=0.5)
plot(1:10)
identify(1:10)

or

plot(1:10)
identify(1:10, cex=0.5)

ignores the cex setting.  The root cause is that par(cex=0.5)
alters cexbase for the device but sets cex=1.0, and the internal
text plotting routines use cex and not cexbase.

The obvious fix is to set cex to cexbase in do_identify. However,
if this is fixed, there is another problem, The offset of the label
is related to the cex in use for the label, and not for the symbol.
So

plot(1:10, type="n")
points(1:10, cex=5)
identify(1:10)

is not sensible in placing the labels.  That may be hard to anticipate,
but 

plot(1:10)
identify(1:10, cex=0.5)

needs to use cex=1 not cex=0.5 for the adjustment.  Perhaps identify is
trying too hard, and should give the user more control over the precise
position of the label (as S-PLUS does).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep 15 10:30:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Sep 2000 11:30:55 +0200
Subject: [Rd] AD:Family Reunion T Shirts & More (PR#659)
In-Reply-To: twoday@freeatlast.com's message of "Fri, 15 Sep 2000 10:44:07 +0200 (MET DST)"
References: <200009150844.KAA12494@pubhealth.ku.dk>
Message-ID: <x2hf7ivw6o.fsf@blueberry.kubism.ku.dk>

twoday@freeatlast.com writes:

> Message sent by:  Kuppler Graphics, 32 West Main Street, Maple 
> Shade, New Jersey, 08052,
<etc.>

Looks like Martins spamfilter needs to learn to catch the 'AD:' prefix
there....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Sep 15 13:31:48 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 15 Sep 2000 14:31:48 +0200
Subject: [Rd] NULL == NULL
Message-ID: <14786.5812.611071.633622@gargle.gargle.HOWL>

gives an error in R.

In both S+3 and S+5, it "works" by returning NULL or logical(0),
respectively.

As a consequence,

   all(x == y)

returns TRUE in Splus, when x <- y <- NULL
but gives an error in R.

Do we have a good reason *not* to return  logical(0) ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Sep 15 16:10:33 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 15 Sep 2000 17:10:33 +0200
Subject: [Rd] "==" for calls and expressions ??
In-Reply-To: <14786.5812.611071.633622@gargle.gargle.HOWL>
References: <14786.5812.611071.633622@gargle.gargle.HOWL>
Message-ID: <14786.15337.398835.357060@gargle.gargle.HOWL>

{following up myself on the     NULL == NULL   topic}

I found	that 
	 x == y
is allowed in R when x and y are (generalized) ``Vectors''
(accidentally, I'm quite sure !), which includes
lists and  expressions, but the result is pretty `funny' in some cases, e.g.

    > e3 <- expression(1,x,x^2)
    > e3 == expression(1,x,x^2)
    [1] FALSE  TRUE FALSE
    > e3 == e3 ## all TRUE..
    [1] TRUE TRUE TRUE

Note that it's not just "==", but all 6 relation operators ( "!=", "<", ...).

It's been quite easy for me to make R produce an error in these cases
{the same as for

  > cl <- quote(sin(x)) ; cl == cl
  Error in cl == cl : comparison (1) is possible only for vector types
}
But with that "make check" would fail
(we have at least on case in the examples where we test equality of two expr)
and it might be that people's R code already is doing these comparisons
with list()s and expression()s.

What should be done?

--
One possibility would be to make these work for call()s and expressions,
by using deparse(.) on the non-symbol calls
{symbol calls already *do* work -- and this is *not* accidental :

  > cl <- as.name("X"); cl == cl; cl > cl
  [1] TRUE
  [1] FALSE
}
and dealing with expressions as "vector of calls".
It is still less clear how list()s should be dealt with.

We really have the problem of differing 
backcompatibility to R and compatibility to S
(in S, these rel.ops only apply to atomic objects and NULL).

Opinions?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Sep 15 16:19:50 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 15 Sep 2000 17:19:50 +0200 (MET DST)
Subject: [Rd] PR 640 (diff.default computes an incorrect starting time) (PR#658)
Message-ID: <200009151519.RAA18995@pubhealth.ku.dk>

The reported bug in  diff.default()
has already been corrected for R 1.1.1

thank you anyway, ;-)

Martin Maechler


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Sep 15 16:24:46 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 15 Sep 2000 17:24:46 +0200 (MET DST)
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
Message-ID: <200009151524.RAA19061@pubhealth.ku.dk>


>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
    PD> maechler@stat.math.ethz.ch writes:
    >> One easy and "clean" fix is to put the following at the very
    >> beginning of diff.default :
    >> 
    >> if(is.ts(x)) { require(ts)
    >>                UseMethod("diff") }
    PD> ...
    >> The above passes "make check" (and more).
    >> 
    >> Anybody against this?

    PD> I'm not really pro or con, but what is wrong with autoloading
    PD> diff.ts??

    MM> it does not work, i.e.

    MM>    autload("diff.ts", "ts") diff(ts(1:10))

    MM> does not load package ts.  It's not so clear if this is a bug in
    MM> method dispatching ...  but assuming ``standard semantic'' (diff.ts
    MM> is in search() i.e. diff() should dispatch to it), it is one..

    MM> Shall I 1) commit my proposed change to "R-release-patches" (since
    MM> it fixes a bug in R 1.1.1) 2) submit a new bug report about the
    MM> non-dispatching to "Autoloads" objects ?

Just a report to the non-core audience and for the bug-archive:

Both of these have been resolved now for "R-devel" [R 1.2 unstable]

 i.  autoload("diff.ts", "ts")  now *does* work (thanks to Thomas Lumley)

 ii. the above autoload is now in the system profile and fixes the diff(.) bug.

--
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Sep 15 16:42:44 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 15 Sep 2000 08:42:44 -0700 (PDT)
Subject: [Rd] NULL == NULL
In-Reply-To: <14786.5812.611071.633622@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.21.0009150835420.26164-100000@atlas.biostat.washington.edu>

On Fri, 15 Sep 2000, Martin Maechler wrote:

> gives an error in R.
> 
> In both S+3 and S+5, it "works" by returning NULL or logical(0),
> respectively.
> 
> As a consequence,
> 
>    all(x == y)
> 
> returns TRUE in Splus, when x <- y <- NULL
> but gives an error in R.
> 
> Do we have a good reason *not* to return  logical(0) ?

I think returning logical(0) is a good idea. Having all(NULL==NULL) be
TRUE is consistent with what we do for vacuous cases of min and max. 

However, a arguable reason for not doing it is that NULL is actually a
list with no elements rather than a vector with no elements, and you can't
compare lists with ==. On the gripping hand, you can't turn NULL into a
vector of length zero using eg unlist(), so the only way to get this
comparison to work is to have NULL==NULL.

	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 15 16:53:04 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Sep 2000 11:53:04 -0400
Subject: [Rd] classed
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au>
Message-ID: <39C245E0.A2B36FA6@bank-banque-canada.ca>

>> classed <- function (x, cls)
>> {
>>     class(x) <- cls
>>     x
>> }

>If it doesn't use copy-on-write then the result will be additional
>slowdown when all your data is copied again and again (I guess it depends
>on how big the object is).

I've often wondered about this. Any comments from someone who really knows the
internals of R? When I first implemented it I did some testing and didn't notice
any really big slowdown and I do use a lot of fairly big (multi MB size)
objects. But notice that the difference is really in the function call, not in
the copying of objects. A function using classed would end

  classed(x, "whatever") }

rather than

 class(x) <- "whatever"
 x}

I think the copy is (or is not) made in both cases.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 15 17:34:49 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Sep 2000 12:34:49 -0400
Subject: [Rd] Projects
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
 <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
 <87og1qlviu.fsf@jeeves.blindglobe.net> <39c38587.1708646@julian.uwo.ca> <87n1ha1gk6.fsf@jeeves.blindglobe.net>
Message-ID: <39C24FA8.4D681B01@bank-banque-canada.ca>

    DM> Putting that into a single function which took arguments just
    DM> like the ones you pass to the optimizer would be very
    DM> convenient.

>That's exactly it.  (but perhaps have at least the 3 basic forms --
>f(point + eps) - f(point), f(point + eps/2) - f(point - eps/2),
>f(point) - f(point - eps)).

Buried somewhere in one of my packages is code for doing Richardson
extrapolation, which usually gives a much better estimate than these 3 basic
forms. If this project goes ahead I will dig it out.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Fri Sep 15 17:58:25 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 15 Sep 2000 09:58:25 -0700
Subject: [Rd] Projects
In-Reply-To: <39C24FA8.4D681B01@bank-banque-canada.ca>
 (Paul Gilbert's message of "Fri, 15 Sep 2000 12:34:49 -0400")
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
 <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
 <87og1qlviu.fsf@jeeves.blindglobe.net> <39c38587.1708646@julian.uwo.ca>
 <87n1ha1gk6.fsf@jeeves.blindglobe.net>
 <39C24FA8.4D681B01@bank-banque-canada.ca>
Message-ID: <87wvgdbnim.fsf@jeeves.blindglobe.net>

(not to the list)

>>>>> "PG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    DM> Putting that into a single function which took arguments just
    DM> like the ones you pass to the optimizer would be very
    DM> convenient.

    >> That's exactly it.  (but perhaps have at least the 3 basic
    >> forms -- f(point + eps) - f(point), f(point + eps/2) - f(point
    >> - eps/2), f(point) - f(point - eps)).

    PG> Buried somewhere in one of my packages is code for doing
    PG> Richardson extrapolation, which usually gives a much better
    PG> estimate than these 3 basic forms. If this project goes ahead
    PG> I will dig it out.

That would be cool, and I believe there are other, more precise,
approaches!  BUT, I'm worried that this (_numerical_ derivatives),
might become a package unto itself (which gets amusing, especially if
you consider the many ways one might want to differentiate a
multi-array vector by a vector...).

All of a sudden, I'm starting to see 2 projects out of one, depending
on the scope.

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Sep 15 18:33:33 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 15 Sep 2000 10:33:33 -0700 (PDT)
Subject: [Rd] classed
In-Reply-To: <39C245E0.A2B36FA6@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.21.0009151018330.27057-100000@atlas.biostat.washington.edu>

On Fri, 15 Sep 2000, Paul Gilbert wrote:
> 
> I've often wondered about this. Any comments from someone who really knows the
> internals of R? When I first implemented it I did some testing and didn't notice
> any really big slowdown and I do use a lot of fairly big (multi MB size)
> objects. But notice that the difference is really in the function call, not in
> the copying of objects. A function using classed would end
> 
>   classed(x, "whatever") }
> 
> rather than
> 
>  class(x) <- "whatever"
>  x}
> 
> I think the copy is (or is not) made in both cases.
> 

Setting an attribute doesn't result in a copy, but setting one in a
function will: a reference to x is initially passed to the function, but
when the attribute is set a copy is made so that the local x rather than
the global one is modified.  I don't think another copy is made when
classed() returns, but I'm not sure. Using classed() makes at least one
more copy that using class()<-.

For interpreted "foo<-" functions this wouldn't be true -- the same
amount of copying would be done either way -- but class() is special.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Sep 15 18:47:28 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Sep 2000 12:47:28 -0500
Subject: [Rd] classed
In-Reply-To: Paul Gilbert's message of "Fri, 15 Sep 2000 11:53:04 -0400"
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au> <39C245E0.A2B36FA6@bank-banque-canada.ca>
Message-ID: <6rn1h9mtsf.fsf@franz.stat.wisc.edu>

I reached a similar conclusion to Thomas Lumley.  Here is the response
I wrote before I got a chance to read Thomas's response.

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> >If it doesn't use copy-on-write then the result will be additional
> >slowdown when all your data is copied again and again (I guess it depends
> >on how big the object is).
> 
> I've often wondered about this. Any comments from someone who really knows the
> internals of R? When I first implemented it I did some testing and didn't notice
> any really big slowdown and I do use a lot of fairly big (multi MB size)
> objects. But notice that the difference is really in the function call, not in
> the copying of objects. A function using classed would end
> 
>   classed(x, "whatever") }
> 
> rather than
> 
>  class(x) <- "whatever"
>  x}

Assignment functions like "class<-" are allowed to modify their first
argument in place.  That's the whole reason for using constructions
like foo[] <- bar, which is really a call to "[<-" with arguments foo
and bar, instead of foo <- bar.  It saves on copying.

An R function like classed(x, "cname") cannot modify its
arguments so it must return a copy.

I think the internal C code in src/main/attrib.c indicates that
do_classgets does not copy the first argument unless it happens to be
a named object.  (Does anyone know why a named object has to be copied?)

SEXP do_classgets(SEXP call, SEXP op, SEXP args, SEXP env)
{
    checkArity(op, args);
    if (NAMED(CAR(args)) == 2) SETCAR(args, duplicate(CAR(args)));
    if (length(CADR(args)) == 0) SETCADR(args, R_NilValue);
    setAttrib(CAR(args), R_ClassSymbol, CADR(args));
    return CAR(args);
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Sep 15 19:44:20 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 15 Sep 2000 20:44:20 +0200 (MET DST)
Subject: [Rd] .Random.seed resetting (PR#656)
Message-ID: <200009151844.UAA19859@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "lej25" == lej25  <lej25@statslab.cam.ac.uk> writes:
    lej25> Full_Name: Lara Jamieson Version: 1.1.1 OS: Linux Submission
    lej25> from: (NULL) (131.111.20.203)

    lej25> I've checked for other reports on this and can't find anything.
    lej25> It seems that the .Random.seed isn't updated properly after
    lej25> using rm(.Random.seed).  Mu understanding from the help file
    lej25> indicates that a new 'random' seed will be generated.  It
    lej25> appears that sometimes the old one is just reinstated.

    lej25> I removed my .RData file and the problem remains.  It seems to
    lej25> happen when calls are made in succession to the same 'random
    lej25> generation type' function; but appears to

    lej25> work when different calls are made in succession.  An example is
    lej25> given below.  I was using the sample command when I found the
    lej25> problem but it happens with runif as well...

    >>> runif(1)
    lej25> [1] 0.5551602
    >>> runif(1)
    lej25> [1] 0.2575637
    >>> rm(.Random.seed) runif(1)
    lej25> [1] 0.5551602
    >>> rm(.Random.seed) rm(.Random.seed)
    lej25> Warning message: remove: variable ".Random.seed" was not found
    >>> runif(1)
    lej25> [1] 0.2575637


    MM> [I don't get your behavior] Could it be that you have a
    MM> .Random.seed further up in your search() path?  This would explain
    MM> everything.

Well I *could* reproduce the bogous behavior in R 1.1.1, after all.

The problem is that .Random.seed is not only in .GlobalEnv, but also 
"Autoloads" :

R --vanilla

  > runif(1)
  [1] 0.4659391
  > find(".Random.seed")
  [1] ".GlobalEnv" "Autoloads" 
  > all.equal(.Random.seed, get(".Random.seed", envir = .AutoloadEnv))
  [1] TRUE

and hence, after rm(.Random.seed), runif(*) still gets the one from the
autoloads... 

This bug has just been fixed in R-devel
(by an expert, not me!), together with the even more peculiar

    > library(stepfun)
    > AbC <<- "Z"
    > find("AbC")
    [1] ".GlobalEnv"      "package:stepfun" "Autoloads"      

 {but you were told never to use "<<-"  ;-) }
     
--
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Fri Sep 15 20:09:46 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 15 Sep 2000 14:09:46 -0500
Subject: [Rd] classed
In-Reply-To: Douglas Bates's message of "15 Sep 2000 12:47:28 -0500"
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au> <39C245E0.A2B36FA6@bank-banque-canada.ca> <6rn1h9mtsf.fsf@franz.stat.wisc.edu>
Message-ID: <qxp1yylii9x.fsf@verdi.stat.wisc.edu>

I decided to experiment with this a little. I use a little C function
called printAddress that prints the address of an R object to standard
error.

> x <- 1
> .Call("printAddress", x)
0x891fedc
NULL
> x <- classd(x, "a")
> .Call("printAddress", x)
0x891fd2c
NULL

So the address has changed. Now we can go inside a debugger and see if
do_classgets has anything to do with it.

...

> x <- 1
> .Call("printAddress", x)
0x891fc78
NULL
> x <- classd(x, "a")
# now go to debugger
Breakpoint 1, do_classgets (call=0x89221f0, op=0x81d6720, args=0x8922164, 
    env=0x8922298) at ../../../r-devel/src/main/attrib.c:315
(gdb) p args->u.listsxp.carval
$7 = (struct SEXPREC *) 0x8921aa8
(gdb) n
(gdb) n
(gdb) n
(gdb) p args->u.listsxp.carval
$9 = (struct SEXPREC *) 0x8921aa8
(gdb) n
Rf_eval (e=0x89221f0, rho=0x8922298) at ../../../r-devel/src/main/eval.c:335

So do_classgets does not change the 
(gdb) c
Continuing.
# now we are back to R
> .Call("printAddress", x)
0x89219f4
NULL

The interesting thing is that the object address changed twice. That
is, x is getting copied twice - once after classd is called but before
setting the class and another time when it returns from classd. I was
expecting the second change but not the first.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Fri Sep 15 20:31:02 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 15 Sep 2000 14:31:02 -0500
Subject: [Rd] classed
In-Reply-To: Saikat DebRoy's message of "15 Sep 2000 14:09:46 -0500"
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au> <39C245E0.A2B36FA6@bank-banque-canada.ca> <6rn1h9mtsf.fsf@franz.stat.wisc.edu> <qxp1yylii9x.fsf@verdi.stat.wisc.edu>
Message-ID: <qxpwvgdh2q1.fsf@verdi.stat.wisc.edu>

I should have looked more carefully before sending

> So do_classgets does not change the 

That should read

So do_classgets does not change the value of CAR(args).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 15 21:14:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Sep 2000 16:14:26 -0400
Subject: [Rd] classed
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au> <39C245E0.A2B36FA6@bank-banque-canada.ca> <6rn1h9mtsf.fsf@franz.stat.wisc.edu>
Message-ID: <39C28322.4F5F5685@bank-banque-canada.ca>



TL>For interpreted "foo<-" functions this wouldn't be true -- the same
TL>amount of copying would be done either way -- but class() is special.

DB>Assignment functions like "class<-" are allowed to modify their first
DB>argument in place.  That's the whole reason for using constructions
DB>like foo[] <- bar, which is really a call to "[<-" with arguments foo
DB>and bar, instead of foo <- bar.  It saves on copying.

Doug
These seem slightly different (but I've already demonstrated that I don't
understand this, so maybe they're not).  I don't think that what you are saying
is true in general or there would be no "back out" of the function below, and
there is.  I can believe that class is special (and this would be an arguement
for classed being in the base and special too). But if it was special when I did
timing tests I'm a bit surprized that I didn't find much difference.

> "test<-" <- function(x, value) {attr(x, "zot") <-  value ; stop(); x}
> x  <- 2
> test(x) <- 5
Error in test<-(*tmp*, value = 5) :
> x
[1] 2
> attr(x, "zot")
NULL
>

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Sep 17 15:08:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 17 Sep 2000 16:08:00 +0200 (CEST)
Subject: [Rd] Re: [R] problems with R COMPILE in make
In-Reply-To: <200009041539.LAA13736@jessie.research.bell-labs.com>
References: <200009041539.LAA13736@jessie.research.bell-labs.com>
Message-ID: <14788.53312.712613.772740@aragorn.ci.tuwien.ac.at>

>>>>> Duncan Temple Lang writes:

> Hi Peter.

>  I took a quick look at the R COMPILE problem and it seems that there
> are in fact two problems.  One is the problem with the attempt to
> build a target `w'. And the other is that if that error didn't arise,
> you would have an infinite loop.

> Here is quick fix to your problem. Add the line

>   include $(R_HOME)/etc/Makeconf

> to your Makefile. Then, make will compile imageio.o with the correct flags.

> eyore[RCompile-174]>make
> gcc -I/home2/FlowData/AltProjects/R-shared//include  -I/usr/local/include -mieee-fp -D__NO_MATH_INLINES  -fPIC  -g -O2 -c imageio.c -o imageio.o 


> That should be enough to get things working.  The more detailed
> explanation is as follows.

> a) The rule
> imageio.o: imageio.c
>  	R COMPILE imageio.c

> is executed by the first call to make.
> The COMPILE script expands this to call

>      make -f $R_HOME/etc/Makeconf -f Makefile imageio.o

> At this point, this second make process sees the same rule, and does
> the same thing. Hence, you have infinite recursion.

Duncan,

Thanks for answering this.

Should we consider this behavior a bug?  I am not sure I see an easy way
out ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Sep 17 23:51:12 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 18 Sep 2000 00:51:12 +0200
Subject: [Rd] Projects
In-Reply-To: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
Message-ID: <200009172251.AAA19182@aragorn.ci.tuwien.ac.at>

>>>>> Douglas Bates writes:

> I am teaching a graduate course on Statistical Computing this
> semester.  A major part of the grade is determined by a project in
> which a student or small group of students produce, test, and document
> some software for statistics.  I will encourage those students who are
> developing in S to package their software as an R package.

> I would welcome suggestions of possible projects, especially projects
> that come under the heading of "Useful facilities to be added to R".
> Please keep in mind that the project must be completed by mid-December
> and that not all the students have extensive experience programming in
> S and C.

Hopefully not too late for me to join the wishlist ...

In addition to the useful suggestions re experimental design and by
Peter, I have the following ctest-related projects which I think would
fit very nicely.  Ordering is according to decreasing priority.

* Improved support for exact inference (p-values and, where appropriate,
also confidence intervals ) for some of the tests, in particular for
Kruskal-Wallis and (2-sample) Smirnov.  In addition, we currently don't
have exact p-values in the rank-based tests in case of ties, and one
could deal with this using the Streitberg-Roehmel path suggested by
Torsten Hothorn (see add-on package ExactDistr).  Also, permutation
tests might be useful in some cases ...

[I have an NEW implementation of the Mehta-Patel network algorithm for
dealing with the common odds ratio in 2 x 2 x k tables ready, hence will
take care of mantelhaen.test() myself.]

* Implement alternative definitions of the 2-sided p-value using

	p = 2[f P(X=x) + min{P(X<x),P(X>x)}]

with 0 <= f <= 1 as definition.

* Improve the code for fisher.test(), maybe re-implement from scratch?
The memory management definitely needs to be rewritten for 1.2.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Paul.White@dsto.defence.gov.au  Mon Sep 18 04:39:34 2000
From: Paul.White@dsto.defence.gov.au (Paul.White@dsto.defence.gov.au)
Date: Mon, 18 Sep 2000 05:39:34 +0200 (MET DST)
Subject: [Rd] bug with line widths in postscript output (PR#661)
Message-ID: <200009180339.FAA25870@pubhealth.ku.dk>

Hello R-people,

When I set the line width using par(lwd=2) this correctly changes the line
size on the screen output however it does not change the linewidth when the
output is sent to a postscript file. I think this is a bug.

Here is the version info

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.1              
year     2000             
month    August           
day      15               
language R                


Thanks

Paul White
Aeronautical and Maritime Research Laboratory
Melbourne, Australia.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Mon Sep 18 07:05:30 2000
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Mon, 18 Sep 2000 16:05:30 +1000
Subject: [Rd] Projects
Message-ID: <3.0.6.32.20000918160530.007e5950@pophost.anu.edu.au>

Here are some further possibilities:

1. An equivalent of S-PLUS plot.gam(), which I
would call plot.terms().
[predict(.., type="terms") provides the
information that is plotted.]

2. An option in print.lm() summary.lm() etc.
that would relate the number of decimal
places shown for coefficients etc. to the SE,
e.g. a precision equivalent to the 2nd d.p.
of the SE.
(This may be hard to get right!)

3. Label output where factors appear so that it
is clear what parameterisation has been used.
(Peter Dalgaard suggested a scheme some time
ago that seemed to me eminently sensible.)

4. As an interim measure, until lattice arrives,
implement simplified versions of trellis
bwplot, qqmath, etc that allow two conditioning
factors.  This can be done as fairly easy
adaptations of coplot().  So that it is not
repeated in each individual function, the
coplot() code that decodes the graphics formula
should come out into a separate function.
It needs slight modification to allow formulae
such as ~x|a+b.
(I have a version of such a function.  Adding
the code for e.g. a primitive version of 
bwplot is straightforward. I will do it myself 
shortly if there are not other offers.)

5. I have been investigating a function that has 
one list of information for each panel in a 
trellis type layout, then allowing the user to p
rovide a panel function that operates on the list 
elements. For example, one may want graphs with 
different numbers of x-values to be superimposed 
in the same panel.  Or a theoretical curve or plot
of simulated data may be specified by a small
number of parameters that are specific to each
panel.
(I have a primitive version of such a function.)

John Maindonald.
John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Mon Sep 18 07:22:44 2000
From: jago@mclink.it (Stefano Iacus)
Date: Mon, 18 Sep 2000 08:22:44 +0200
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
Message-ID: <a04330100b5eb64f27ce1@[159.149.74.61]>

This is my second post. Is  the R porting  no more interesting ? I hope no. :)




Hy (I hope this is the right list).

1. Mac porting

I'm finishing the porting of R for Mac. I hope to finish it for the 
end of september. Thanks to the porting of  R 0.64 by Ross (that he 
gave me) I succeded in this porting. This is the current state:

Both R 1.1.1. and 1.2.0 works with minor modification to the original 
code. The Macintosh device has been updated to the new version of 
WASTE library that is Carbon-izable (for who knows MacOS, Carbon is a 
collections of libraries  that allow macintosh applications developed 
for pre-MacOS X to run under MacOS X with minor modification, MacOS X 
is beeing released in september).
There is  a lot of work to do in testing the 1.1.1 porting. The code 
I have modified is not all commented, so give me some times to fix 
this and I'll release the sources to who will ask for.
The porting runs only on PPC machines.
I  compiled 1.2 only to verify how much the changes are sensitive to 
new releases of the code. It seems to work without problems.

Is there anyone working on R porting for Mac at the moment?

Actually, I have problems on building the base package and packages 
in general and I just pick Win base package and adapt it, so the 
check I can do are not so accurate. Where can I find the proper 
documentation on building packages?
Makefiles on Mac are a problem for me at the moment, but I'll try to 
fix this also.



2. About the bug (?)

I've to remark one problem in the source code of PS and Xfig devices. 
When the device look for "afm" it is system dependent because slashes 
such "/" are used to search for fonts:

i.e. (in xfig, the same is for PS)

static int XFig_Open(DevDesc *dd, XFigDesc *pd)
{
     char buf[512];
     int i;

     for(i = 0; i < 5 ; i++) {
	sprintf(buf, "%s/afm/%s.%s", R_Home,             <--- HERE
		Family[pd->fontfamily].font[i].abbr,
		(i == 4) ? "afm" : Extension[pd->encoding]);


the slashes should be replaced by the FILESEP  definition.


Both devices fixed for FILESEP (and pictex as well) works on Mac.

Regards,

         Stefano
-- 
Stefano Maria Iacus
Dipartimento di Politica Economica ed Aziendale
Universita' di Milano
Via Conservatorio 7
20122 Milano
Tel: 02 760 74 462
Fax: 02 760 23 198
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep 18 09:41:08 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 18 Sep 2000 10:41:08 +0200
Subject: [Rd] Fortran 90 / 95 compilers? // interface packages for R ?
Message-ID: <14789.54564.400197.692342@gargle.gargle.HOWL>

We have (spatial statistics) group here that are (about to) interface
Fortran 90 and/or 95 software to R and/or S-plus.

My recommendation has been against this because of non-availability of
GNU or other free (not only moneywise, in the GNU sense) compilers for
Fortran 9x.   Does anybody have good guesses about the future here?
The user group here say they like F 9[05] because of its ``object
oriented'' approach and data types.  Probably we shouldn't start a
discussion about this statement, but rather acknowledge that in the
numerical analysis community, there seems to be a drive from F77 to F90

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep 18 10:19:08 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 18 Sep 2000 11:19:08 +0200
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
In-Reply-To: <a04330100b5eb64f27ce1@[159.149.74.61]>
References: <a04330100b5eb64f27ce1@[159.149.74.61]>
Message-ID: <14789.56844.138209.426953@gargle.gargle.HOWL>

>>>>> "StefI" == Stefano Iacus <jago@mclink.it> writes:

    StefI> This is my second post. Is the R porting no more interesting ? I
    StefI> hope no. :) Hy (I hope this is the right list).

No, to the contrary.  There is quite a base of potential users who'd
welcome a Mac port very much! {I'm "unix only" though.}

Thanks a lot for your efforts!

I think you should send specific patches (as the one below, using FILESEP)
-- using "diff -c" against a recent version of R-devel --
to R-core at R-project.org which is the core team's (non-public) E-mail list.
One of us could then "slice" your code into the current development version.

    StefI> 1. Mac porting

    StefI> I'm finishing the porting of R for Mac. I hope to finish it for
    StefI> the end of september. Thanks to the porting of R 0.64 by Ross
    StefI> (that he gave me) I succeded in this porting. This is the
    StefI> current state:

    StefI> Both R 1.1.1. and 1.2.0 works with minor modification to the
    StefI> original code. The Macintosh device has been updated to the new
    StefI> version of WASTE library that is Carbon-izable (for who knows
    StefI> MacOS, Carbon is a collections of libraries that allow macintosh
    StefI> applications developed for pre-MacOS X to run under MacOS X with
    StefI> minor modification, MacOS X is beeing released in september).
    StefI> There is a lot of work to do in testing the 1.1.1 porting. The
    StefI> code I have modified is not all commented, so give me some times
    StefI> to fix this and I'll release the sources to who will ask for.
    StefI> The porting runs only on PPC machines.  I compiled 1.2 only to
    StefI> verify how much the changes are sensitive to new releases of the
    StefI> code. It seems to work without problems.

    StefI> Is there anyone working on R porting for Mac at the moment?

    StefI> Actually, I have problems on building the base package and
    StefI> packages in general and I just pick Win base package and adapt
    StefI> it, so the check I can do are not so accurate. Where can I find
    StefI> the proper documentation on building packages?  Makefiles on Mac
    StefI> are a problem for me at the moment, but I'll try to fix this
    StefI> also.



    StefI> 2. About the bug (?)

    StefI> I've to remark one problem in the source code of PS and Xfig
    StefI> devices.  When the device look for "afm" it is system dependent
    StefI> because slashes such "/" are used to search for fonts:

    StefI> i.e. (in xfig, the same is for PS)

    StefI> static int XFig_Open(DevDesc *dd, XFigDesc *pd) { char buf[512];
    StefI> int i;

    StefI>      for(i = 0; i < 5 ; i++) { sprintf(buf, "%s/afm/%s.%s",
    StefI> R_Home, <--- HERE Family[pd->fontfamily].font[i].abbr, (i == 4)
    StefI> ? "afm" : Extension[pd->encoding]);

    StefI> the slashes should be replaced by the FILESEP definition.

    StefI> Both devices fixed for FILESEP (and pictex as well) works on
    StefI> Mac.

    StefI> Regards,

    StefI>          Stefano -- Stefano Maria Iacus Dipartimento di Politica
    StefI> Economica ed Aziendale Universita' di Milano Via Conservatorio 7
    StefI> 20122 Milano Tel: 02 760 74 462 Fax: 02 760 23 198
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep 18 10:58:41 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Sep 2000 11:58:41 +0200
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
In-Reply-To: Martin Maechler's message of "Mon, 18 Sep 2000 11:19:08 +0200"
References: <a04330100b5eb64f27ce1@[159.149.74.61]> <14789.56844.138209.426953@gargle.gargle.HOWL>
Message-ID: <x2pum26my6.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "StefI" == Stefano Iacus <jago@mclink.it> writes:
> 
>     StefI> This is my second post. Is the R porting no more interesting ? I
>     StefI> hope no. :) Hy (I hope this is the right list).
> 
> No, to the contrary.  There is quite a base of potential users who'd
> welcome a Mac port very much! {I'm "unix only" though.}
> 
> Thanks a lot for your efforts!

Seconded (but of course you must be aware that the absence of a Mac
port makes Mac programmers a scarce resource on R-devel...)

> I think you should send specific patches (as the one below, using FILESEP)
> -- using "diff -c" against a recent version of R-devel --
> to R-core at R-project.org which is the core team's (non-public) E-mail list.
> One of us could then "slice" your code into the current development version.

Not necessary in this case. I've folded in the FILESEP change already.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep 18 11:56:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 18 Sep 2000 11:56:55 +0100 (BST)
Subject: [Rd] Fortran 90 / 95 compilers? // interface packages for R ?
In-Reply-To: <14789.54564.400197.692342@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10009181153470.17763-100000@toucan.stats>

On Mon, 18 Sep 2000, Martin Maechler wrote:

> We have (spatial statistics) group here that are (about to) interface
> Fortran 90 and/or 95 software to R and/or S-plus.
> 
> My recommendation has been against this because of non-availability of
> GNU or other free (not only moneywise, in the GNU sense) compilers for
> Fortran 9x.   Does anybody have good guesses about the future here?
> The user group here say they like F 9[05] because of its ``object
> oriented'' approach and data types.  Probably we shouldn't start a
> discussion about this statement, but rather acknowledge that in the
> numerical analysis community, there seems to be a drive from F77 to F90

The prime developer of g77 has withdrawn, so last time I looked its
future was in serious doubt.  

I agree that Fortran 95 is the future for the Fortran-using community,
and is the standard used by commercial compilers nowadays. I think 
using it on Windows for R would cause us serious difficulties.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Malcolm Gillies <M.B.Gillies@pharm.uu.nl>  Mon Sep 18 12:52:27 2000
From: Malcolm Gillies <M.B.Gillies@pharm.uu.nl> (Malcolm Gillies)
Date: Mon, 18 Sep 2000 13:52:27 +0200
Subject: [Rd] Fortran 90 / 95 compilers? // interface packages for R ?
In-Reply-To: Your message of "Mon, 18 Sep 2000 11:56:55 MDT."
 <Pine.GSO.4.05.10009181153470.17763-100000@toucan.stats>
Message-ID: <200009181152.NAA36919@fischer.pharm.uu.nl>

>> My recommendation has been against this because of non-availability of
>> GNU or other free (not only moneywise, in the GNU sense) compilers for
>> Fortran 9x.   Does anybody have good guesses about the future here?

There is an (embryonic) g95 project. From the status reports it appears
to be under active (but slow?) development. They're currently working on
the parser, and are up to about version 0.1

    http://g95.sourceforge.net/

cheers,

Malcolm
--
Malcolm Gillies <M.B.Gillies@pharm.uu.nl>
PhD student, computational medicinal chemistry
Dept of Medicinal Chemistry, Faculty of Pharmacy,
Utrecht University, The Netherlands
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Malcolm Gillies <M.B.Gillies@pharm.uu.nl>  Mon Sep 18 13:13:07 2000
From: Malcolm Gillies <M.B.Gillies@pharm.uu.nl> (Malcolm Gillies)
Date: Mon, 18 Sep 2000 14:13:07 +0200
Subject: [Rd] Latin1 encoded AFM files
Message-ID: <200009181213.OAA39666@fischer.pharm.uu.nl>

Hi,

I patched my R-1.1.1 sources to add support for a couple more fonts to
the postscript device.

It works for alphanumeric characters, but I notice that I should be
supplying an AFM file with ISOLatin1Encoding (I'm using a standard AFM
for now, and get some parsing errors from R when I open the postscript
device).

Is there a program/script which will re-encode my AFM files from
AdobeStandardEncoding to ISOLatin1Encoding?

Or will I have to bite the bullet and do it by hand?

cheers,

Malcolm
--
Malcolm Gillies <M.B.Gillies@pharm.uu.nl>
PhD student, computational medicinal chemistry
Dept of Medicinal Chemistry, Faculty of Pharmacy,
Utrecht University, The Netherlands
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From M.B.Gillies@pharm.uu.nl  Mon Sep 18 13:20:39 2000
From: M.B.Gillies@pharm.uu.nl (M.B.Gillies@pharm.uu.nl)
Date: Mon, 18 Sep 2000 14:20:39 +0200 (MET DST)
Subject: [Rd] phantom(0) doesn't do what I expect it to [plotmath] (PR#662)
Message-ID: <200009181220.OAA03612@pubhealth.ku.dk>

Full_Name: Malcolm Gillies
Version: 1.1.1
OS: Debian GNU/Linux 2.2
Submission from: (NULL) (131.211.56.47)


I'm trying to make a legend with a justified list of numbers, so I
thought I would use phantom(0) to align the 3-digit numbers properly
with the 4-digit ones:

    plot(1); legend(1, 1, xjust=1, yjust=1, lty=c(1,2,3,4,5), adj=c(0,0.5),
           legend=expression(phantom(0)*300*plain(K),
                             phantom(0)*550*plain(K),
                             phantom(0)*830*plain(K),
                                       1440*plain(K),
                                       2500*plain(K)))

Unfortunately, phantom(0) doesn't seem to be adding any space, whether
I use the X11 or the postscript device.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep 18 13:36:48 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 18 Sep 2000 13:36:48 +0100 (BST)
Subject: [Rd] Latin1 encoded AFM files
In-Reply-To: <200009181213.OAA39666@fischer.pharm.uu.nl>
Message-ID: <Pine.GSO.4.05.10009181333150.17891-100000@toucan.stats>

On Mon, 18 Sep 2000, Malcolm Gillies wrote:

> Hi,
> 
> I patched my R-1.1.1 sources to add support for a couple more fonts to
> the postscript device.
> 
> It works for alphanumeric characters, but I notice that I should be
> supplying an AFM file with ISOLatin1Encoding (I'm using a standard AFM
> for now, and get some parsing errors from R when I open the postscript
> device).

I have re-written that code to allow you to use an afm file in any
encoding. I'll send you the patch in a couple of days (I'm away from base
at present).  My idea is that 1.2.0 will support user-specified families,
but the work is not yet complete.

> Is there a program/script which will re-encode my AFM files from
> AdobeStandardEncoding to ISOLatin1Encoding?

You can use some of the postscript utility files that come with gs to
write a ps program to do so. PostScript experts only, of course.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Sep 18 16:38:49 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 18 Sep 2000 11:38:49 -0400
Subject: [Rd] classed or as
Message-ID: <39C63709.DD243011@bank-banque-canada.ca>

It was pointed out to me in a separate communication from Bill Venables
that the S4 as(,) function, instead of the classed( ,) function I
previously suggested, might result in a better strategy for developing
code that would run in both S3 and S4. (One of my reasons for defining
classed in the first place was to help get my code to run in both S3 and
S4.)

If I understand the previous discussion correctly, putting this function
in R base would also result in a speed-up relative to my interpreted
code.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Sep 19 00:08:15 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 18 Sep 2000 16:08:15 -0700 (PDT)
Subject: [Rd] Projects
In-Reply-To: <3.0.6.32.20000918160530.007e5950@pophost.anu.edu.au>
Message-ID: <Pine.GSO.4.21.0009181605010.19383-100000@atlas.biostat.washington.edu>

On Mon, 18 Sep 2000, John Maindonald wrote:

> Here are some further possibilities:
> 
> 1. An equivalent of S-PLUS plot.gam(), which I
> would call plot.terms().
> [predict(.., type="terms") provides the
> information that is plotted.]

There is a version of this in termplot() -- it was the motivation for
getting predict(,type="terms") to work.  Improvements are welcome. I think
it's even aliased so that help(plot.gam) gives the termplot help.

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue Sep 19 01:14:54 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 19 Sep 2000 11:14:54 +1100
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
In-Reply-To: <a04330100b5eb64f27ce1@[159.149.74.61]>; from jago@mclink.it on Mon, Sep 18, 2000 at 08:22:44AM +0200
References: <a04330100b5eb64f27ce1@[159.149.74.61]>
Message-ID: <20000919111454.C11320@ftoomsh.progsoc.uts.edu.au>

On Mon, Sep 18, 2000 at 08:22:44AM +0200, Stefano Iacus wrote:
> Is there anyone working on R porting for Mac at the moment?

Well I am actually running R on a Mac already and both the R
base and all the packages that I have tried worked for me with
no modifications... but I will admit that I started out by
installing linux.

About fifteen years ago, Apple got offside with the free-software
community because of ``look-and-feel'' litigation. They are still
feeling the backlash off that (and probably will be for some time)
because of the scarcity of free-software developers using MacOS.
It is a snowball, once developers turn away from a platform,
there is nothing to encourage new developers to get interested.

> the slashes should be replaced by the FILESEP  definition.

Yup, good work spotting that and good luck with your porting
efforts. My Mac is a blue G3, running at 350 MHz. If you have
similar hardware then I would like to compare a few benchmarks
of R running under linux and MacOS. Failing that, if you make
available a binary package of the R base for MacOS then I'll
reboot into MacOS and do the comparison for myself.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zivan.karaman@limagrain.com  Tue Sep 19 12:53:21 2000
From: zivan.karaman@limagrain.com (zivan.karaman@limagrain.com)
Date: Tue, 19 Sep 2000 13:53:21 +0200 (MET DST)
Subject: [Rd] bug.report("unused argument(s) crash R when options(error=quote (PR#663)
Message-ID: <200009191153.NAA14999@pubhealth.ku.dk>


# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@biostat.ku.dk
#
######################################################

Hello!

I have observed a curious problem with the Windows version of R.
> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.1
year     2000
month    August
day      15
language R
> win.version()
[1] "Windows NT 4.0 (build 1381) Service Pack 5"

When I mistype an argument in a function call (like in the example below), Rgui
crashes with the message:
The instruction at "0x025571b8" uses the memory address "0x00000008". The memory
 can't be "read". (This is my translation from French, but I guess it's
something like that in English.)

Example:
> ls(poq=3)
Normally, one should get a message saying:
Error in ls(poq = 3) : unused argument(s) (poq ...)

In my etc/Rprofile file I have added the following line:
options(error=quote(dump.frames()))

When I comment this line out, Rgui works OK (i.e. I get the message "Error in
ls(poq = 3) : unused argument(s) (poq ...)").

This happens for any other typo that should normally cause the message "unused
argument(s)", like "matrix(1:15, nrow=5, byrox=TRUE)", or anything else.

The same happens with Rterm, except that you see the error message before Rterm
dies, and the message is little bit different:
The instruction at "0x02556678" uses the memory address "0xec83e591". The memory
 can't be "read".

It happens on both my desktop and my laptop, but since both are running the same
 OS version (NT4 SP5), it's not so surprising.

Also, I have the same behaviour with the previous version of R
> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.0
year     2000
month    June
day      15
language R


Did I do anything wrong, or is it a problem with R.dll?

It is not a big problem, but I just wanted let you know about it.

Best regards

Zivan



--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 5

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Sep 19 13:40:31 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Sep 2000 14:40:31 +0200
Subject: [Rd] bug.report("unused argument(s) crash R when options(error=quote (PR#663)
In-Reply-To: zivan.karaman@limagrain.com's message of "Tue, 19 Sep 2000 13:53:21 +0200 (MET DST)"
References: <200009191153.NAA14999@pubhealth.ku.dk>
Message-ID: <x2u2bctv0f.fsf@blueberry.kubism.ku.dk>

zivan.karaman@limagrain.com writes:

> The instruction at "0x025571b8" uses the memory address "0x00000008". The memory
>  can't be "read". (This is my translation from French, but I guess it's
> something like that in English.)
> 
> Example:
> > ls(poq=3)
> Normally, one should get a message saying:
> Error in ls(poq = 3) : unused argument(s) (poq ...)
> 
> In my etc/Rprofile file I have added the following line:
> options(error=quote(dump.frames()))

Whoops. This also crashes on Linux (good - then we can debug it more
conveniently...) In the development version too:


> ls(poq=3)
Error in ls(poq = 3) : unused argument(s) (poq ...)

Program received signal SIGSEGV, Segmentation fault.
0x807e1c7 in Rf_findVarInFrame (rho=0xbffff4cc, symbol=0x83c7354)
    at ../../../R/src/main/envir.c:677
677             hashcode = HASHVALUE(c) % HASHSIZE(HASHTAB(rho));
(gdb) l
672             c = PRINTNAME(symbol);
673             if( !HASHASH(c) ) {
674                 SET_HASHVALUE(c, R_Newhashpjw(CHAR(c)));
675                 SET_HASHASH(c, 1);
676             }
677             hashcode = HASHVALUE(c) % HASHSIZE(HASHTAB(rho));

(I don't really have time to debug this further just now, the symbol is
"dump.frames" in case anyone wants to dig deeper)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Sep 19 16:41:42 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 19 Sep 2000 10:41:42 -0500
Subject: [Rd] Scalable vector graphics
Message-ID: <6r3diwie2x.fsf@franz.stat.wisc.edu>

I noticed a request on S-news today about support for scalable vector
graphics (http://www.w3.org/TR/SVG/).  Is there any interest in that
for R?  Is there anyone interested in doing it?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Sep 19 17:40:43 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 19 Sep 2000 18:40:43 +0200
Subject: [Rd] Re: more experience with formulas
In-Reply-To: <14791.33767.96707.611162@gargle.gargle.HOWL>
References: <14791.33767.96707.611162@gargle.gargle.HOWL>
Message-ID: <14791.38667.631499.957513@gargle.gargle.HOWL>

>>>>> "WSt" == Werner Stahel <stahel@stat.math.ethz.ch> writes:
[to me privately]

    WSt> I do not want to call this a bug, but it bugged me. Please try the
    WSt> following:

 WSt>  tform <- sqrt(RADAI) ~ sqrt(RADAI.e) + TAGE.ej + SPITAL + ARZT + DAS28 + 
 WSt>     SJC + TJC + DGA + HAQ + PGA + PAIN + YEAR.SYM + YEAR.DIA + 
 WSt>     ALTER + IndV + m.NSAIDs + m.Stereoids + DM.Cyclosp + DM.Penic
 WSt> 
 WSt>  as.character(tform) 

--> length-3 vector "~" "<LHS>" "<RHS>".
However, the end of <RHS> is TRUNCATED!
and that truncation of the third part is a bug in my opinion.

The fact that it returns a vector of the same length as its argument is
very consistent behavior even though it maybe unexpected to the casual R user.

I think you'd want to use format() instead.
There, we can see that format.default really uses deparse(x) when x is such
a language object.
One could argue that the optional "width.cutoff = 60" argument to deparse()
should also be settable from format(), in that case,
since
	format(tform) == deparse(tform)

really returns a vector of "3 lines" instead of just one line
which we'd get by the result of
     deparse(tfrom, width = 200)
       
Opinions?

 WSt> paste(tform,collapse="")# "y ~ x" becomes "~yx" -- is S compatible
 WSt> as.character(tform[[3]])# again length-3 vector  "+" "sqr..." "DM.Penic"
 WSt> 
 WSt> as.character.formula <- function(x, ...) paste(deparse(x),collapse="")
 WSt> ## now ,
 WSt> as.character(tform)
 WSt> paste(tform,collapse="")
 WSt> ## work, but
 WSt> as.character(tform[[3]])
 WSt> ## still does not, since it is of mode language, but not of class formula.
 WSt> ## It would be better to write as.character.default such that is works for
 WSt> ## mode language.

It *does* work; it just returns a vector of character, again
fulfilling the semantic that
when
	    y <- as.character(x)
then
	  y[i] == as.character(x[i])

    WSt> PS: Thanks for your efforts in developping R.

    WSt> Werner Stahel

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Sep 19 18:41:00 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Sep 2000 18:41:00 +0100 (BST)
Subject: [Rd] Scalable vector graphics
In-Reply-To: <6r3diwie2x.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.10009191833220.29971-100000@auk.stats>

On 19 Sep 2000, Douglas Bates wrote:

> I noticed a request on S-news today about support for scalable vector
> graphics (http://www.w3.org/TR/SVG/).  Is there any interest in that
> for R?  Is there anyone interested in doing it?

I noticed it on the W3C site a couple of weeks ago, and concluded that it
was premature. (It is not yet a W3C standard, and look at the platforms
that have tool support: mainly Windows, perhaps a Java2 SDK will also
work.)

I would give higher priority to a real PDF driver (not via bitmap())
at present, as these are already widely-available tools to use PDF.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Sep 19 18:47:18 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Sep 2000 18:47:18 +0100 (BST)
Subject: [Rd] Re: more experience with formulas
In-Reply-To: <14791.38667.631499.957513@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10009191842450.29971-100000@auk.stats>

On Tue, 19 Sep 2000, Martin Maechler wrote:

> >>>>> "WSt" == Werner Stahel <stahel@stat.math.ethz.ch> writes:
> [to me privately]
> 
>     WSt> I do not want to call this a bug, but it bugged me. Please try the
>     WSt> following:
> 
>  WSt>  tform <- sqrt(RADAI) ~ sqrt(RADAI.e) + TAGE.ej + SPITAL + ARZT + DAS28 + 
>  WSt>     SJC + TJC + DGA + HAQ + PGA + PAIN + YEAR.SYM + YEAR.DIA + 
>  WSt>     ALTER + IndV + m.NSAIDs + m.Stereoids + DM.Cyclosp + DM.Penic
>  WSt> 
>  WSt>  as.character(tform) 
> 
> --> length-3 vector "~" "<LHS>" "<RHS>".
> However, the end of <RHS> is TRUNCATED!
> and that truncation of the third part is a bug in my opinion.

I think using as.character() is the problem: this is what deparse() is
for.  Similar things happen in S too.  You may notice that in
versions of R up to and including 1.1.1 that anova methods had this bug:
I even filed a bug report against it.

I suspect it may be relatively unproblematic to change as.character because
where it matters the cognescenti (read, `the much-bitten') would
use deparse() anyway.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Tue Sep 19 23:27:29 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 19 Sep 2000 18:27:29 -0400 (EDT)
Subject: [Rd] Scalable vector graphics
Message-ID: <200009192227.SAA25026@jessie.research.bell-labs.com>


> From: Douglas Bates <bates@stat.wisc.edu>
> Date: 19 Sep 2000 10:41:42 -0500
> Lines: 3
> User-Agent: Gnus/5.0803 (Gnus v5.8.3) Emacs/20.7
> Sender: owner-r-devel@stat.math.ethz.ch
> Precedence: bulk
> 
> I noticed a request on S-news today about support for scalable vector
> graphics (http://www.w3.org/TR/SVG/).  Is there any interest in that
> for R?  Is there anyone interested in doing it?
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


yes there definitely is some interest in doing this.
I have a very simple example of this and MathML in the
latest version of the XML package for R and S
in the Omegahat tree. That has now been cleaned up so that
it only needs libxml to do both DOM and event parsing
and contains many more examples of how to use things.

Actually, I was going to suggest an SVG driver as
a project for a student in your statistical computing class.
As I mentioned to David Nelson (the originator of the query on S-news)
it is a relatively straightforward task: provide R functions
to map XML elements to R graphics commands. There are examples
for this and MathML on the Omegahat web site and I will create an R
package of the XML library if anyone wants it soon.

D.


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Thu Sep 21 06:15:05 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Sep 2000 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200009210515.HAA29118@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 644 *
Subject: crash using fisher.test on Windows; was [R] unexpected crash of R under 
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 25 Aug 2000 08:47:00 +0200
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 639 *
Subject: symbols: xlim and ylim cannot be specified
From: Werner Stahel <stahel@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 15:54:08 +0200 (CEST)
--Fixed for 1.1.2 (?)
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 664 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/661
Subject:  bug with line widths in postscript output
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: "White, Paul" <Paul.White@dsto.defence.gov.au>
Date: Thu, 21 Sep 2000 04:45:10 +0200
Date: Thu, 21 Sep 2000 04:45:09 +0200
Date: Mon, 18 Sep 2000 14:33:36 +1100
* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
* PR# 652 *
Subject: R INSTALL *.tgz fails (minor docs/feature bug)
From: RPO <bobbyo@speakeasy.org>
Date: Sat, 2 Sep 2000 13:34:22 -0700 (PDT)
* PR# 640 *
Subject: diff.default / diff.ts in wrong package bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 18:28:36 +0200 (CEST)
* PR# 656 *
Subject: .Random.seed resetting
From: lej25@statslab.cam.ac.uk
Date: Mon, 11 Sep 2000 13:13:27 +0200 (MET DST)
* PR# 655 *
Subject: Installing R from source 
From: jniesch@gwdg.de
Date: Fri, 8 Sep 2000 11:40:00 +0200 (MET DST)
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 658 *
Subject: PR 640 (diff.default computes an incorrect starting time)
From: Laimonis Kavalieris <lkavalieris@maths.otago.ac.nz>
Date: Wed, 13 Sep 2000 13:44:38 +0000
* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200
* PR# 662 *
Subject: phantom(0) doesn't do what I expect it to [plotmath]
From: M.B.Gillies@pharm.uu.nl
Date: Mon, 18 Sep 2000 14:20:37 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Sep 21 08:28:57 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 21 Sep 2000 09:28:57 +0200
Subject: [Rd] scatterplot3d
Message-ID: <39C9B8B9.F8A85481@statistik.uni-dortmund.de>

Hi!

A new version (0.3.3) of scatterplot3d (plots a 3D point cloud
perspectively) is available at
http://www.statistik.uni-dortmund.de/leute/ligges.htm

I am especially interested in bug reports and reports of unexpected
results (always with examples to reproduce the error, please).

Also feel free to send feature requests. 
Some R users (see the parts of two emails below) are missing a function,
which plots a 3D perspective of a matrix. So I am thinking about
creating a new function (based on the code of scatterplot3d, if there
are no more known bugs in it), which does the trick.


  Charles RAUX wrote:
  > 
  > How can I draw a 3D perspective of a contingency table, that is
  > showing 3D bars whose height is in proportion of the table cells?

  s-luppescu@uchicago.edu wrote:
  >
  > I want to do a 3d scatterplot of the upper triangle of a matrix,
where the
  > z-values are the values in the matrix, and the row and column
indices are the y-
  > and x-values.

Best regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Sep 21 09:18:33 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Sep 2000 10:18:33 +0200 (MET DST)
Subject: [Rd] "[.data.frame" forgets about "AsIs" (PR#665)
Message-ID: <200009210818.KAA05524@pubhealth.ku.dk>

Short example:

 > str(d <- data.frame(a = I(letters[1:5])))
 `data.frame':	5 obs. of  1 variable:
  $ a:Class 'AsIs'  chr [1:5] "a" "b" "c" "d" ...
 > str(d[TRUE,,drop = FALSE])
 `data.frame':	5 obs. of  1 variable:
  $ a: chr  "a" "b" "c" "d" ...

The real problem about this is, that as soon as the data.frame is further
"transformed", the character component is coerced to a factor, e.g.

   > str(rbind(d[TRUE,,drop = FALSE], "E"))
   `data.frame':	6 obs. of  1 variable:
    $ a: Factor w/ 6 levels "a","b","c","d",..: 1 2 3 4 6 5

--- 

I'm looking at a fix myself.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aprasad@fs.fed.us  Thu Sep 21 16:46:42 2000
From: aprasad@fs.fed.us (aprasad@fs.fed.us)
Date: Thu, 21 Sep 2000 17:46:42 +0200 (MET DST)
Subject: [Rd] width in options() (PR#666)
Message-ID: <200009211546.RAA12787@pubhealth.ku.dk>

Full_Name: Anantha Prasad
Version: 1.1.1
OS: Linux
Submission from: (NULL) (199.131.134.57)


When I try to use 
> options(width=201)
Error in options(...) : invalid width parameter
It looks like 200 is the max. limit. THis is a huge limitation...for if I am
trying
to sink() an R object that has 50 variables with a width of say 1000 characters
and
a length of say 1000 lines, the output I get gets split at 200 characters so
that it
has 5000 lines!
Eg.,
Say an R object x with 1000 lines and 50 variables (1000 characters of width)
> sink("tst.dat")
> x
> sink()
Now, tst.dat has the output split at 200 characters making it very difficult to
use
this dataset. So, scripts that depend on the entire file structure to come
intact
will produce errors.

This limitation is not there in S-PLUS where you can set the width to any
number.
Hope this is fixed soon as many scripts I use depend on me setting width to
atleast
2000!

Thanks



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Sep 21 16:49:31 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 21 Sep 2000 08:49:31 -0700 (PDT)
Subject: [Rd] width in options() (PR#666)
In-Reply-To: <200009211546.RAA12787@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0009210848220.27694-100000@atlas.biostat.washington.edu>

On Thu, 21 Sep 2000 aprasad@fs.fed.us wrote:

> Full_Name: Anantha Prasad
> Version: 1.1.1
> OS: Linux
> Submission from: (NULL) (199.131.134.57)
> 
> 
> When I try to use 
> > options(width=201)
> Error in options(...) : invalid width parameter
> It looks like 200 is the max. limit. THis is a huge limitation...for if I am
> trying
> to sink() an R object that has 50 variables with a width of say 1000 characters
> and
> a length of say 1000 lines, the output I get gets split at 200 characters so
> that it
> has 5000 lines!
> Eg.,
> Say an R object x with 1000 lines and 50 variables (1000 characters of width)
> > sink("tst.dat")
> > x
> > sink()
> Now, tst.dat has the output split at 200 characters making it very difficult to
> use
> this dataset. So, scripts that depend on the entire file structure to come
> intact
> will produce errors.
> 
> This limitation is not there in S-PLUS where you can set the width to any
> number.
> Hope this is fixed soon as many scripts I use depend on me setting width to
> atleast
> 2000!


While this may well be a useful feature to add, note that the preferred
way of writing a rectangular dataset to a file is with write.table(),
which does not have width restrictions

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Sep 21 16:56:31 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Sep 2000 17:56:31 +0200 (MET DST)
Subject: [Rd] "[.data.frame" forgets about "AsIs" (PR#665)
Message-ID: <200009211556.RAA12851@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> Short example:
    >> str(d <- data.frame(a = I(letters[1:5])))
    MM> `data.frame':	5 obs. of  1 variable:
    MM> $ a:Class 'AsIs'  chr [1:5] "a" "b" "c" "d" ...
    >> str(d[TRUE,,drop = FALSE])
    MM> `data.frame':	5 obs. of  1 variable:
    MM> $ a: chr  "a" "b" "c" "d" ...

    MM> The real problem about this is, that as soon as the data.frame is
    MM> further "transformed", the character component is coerced to a
    MM> factor, e.g.

    >> str(rbind(d[TRUE,,drop = FALSE], "E"))
    MM> `data.frame':	6 obs. of  1 variable:
    MM> $ a: Factor w/ 6 levels "a","b","c","d",..: 1 2 3 4 6 5


Probably the cleanest fix is the addition of 

  "[.AsIs" <- function(x, i) structure(NextMethod("["), class = class(x))

--
Will go into R-devel unless someone has a better idea.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aprasad@fs.fed.us  Fri Sep 22 21:31:08 2000
From: aprasad@fs.fed.us (aprasad@fs.fed.us)
Date: Fri, 22 Sep 2000 22:31:08 +0200 (MET DST)
Subject: [Rd] eval functions... (PR#668)
Message-ID: <200009222031.WAA23892@pubhealth.ku.dk>

Full_Name: Anantha Prasad
Version: 1.1.1
OS: Linux
Submission from: (NULL) (199.131.134.30)


I am trying to convert some S-PLUS code to R (a tcl/tk application that uses
R)...
here is the error I got in R (but not in S-PLUS)...so I am wondering if it is a
bug.

Eg., the foll. extract from a function runs fine in S-PLUS but gives the error:
Error in x[[j]] : subscript out of bounds
in R

code snippet .....

 attach(xd)
	 resp <- "iv802"
	pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
	lmexp <- paste(resp, " ~ ", pickedlist,sep="")
        tmpzx <- eval(lm(lmexp,data=xd))

Essentially, I want to do:
 lm(iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL, data=xd)
thru a function that has the parameters passed thru TclTk and Perl......

Thanks much.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep 22 22:15:36 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Sep 2000 23:15:36 +0200
Subject: [Rd] eval functions... (PR#668)
In-Reply-To: aprasad@fs.fed.us's message of "Fri, 22 Sep 2000 22:31:08 +0200 (MET DST)"
References: <200009222031.WAA23892@pubhealth.ku.dk>
Message-ID: <x2u2b8ruvb.fsf@blueberry.kubism.ku.dk>

aprasad@fs.fed.us writes:

> Eg., the foll. extract from a function runs fine in S-PLUS but gives the error:
> Error in x[[j]] : subscript out of bounds
> in R
> 
> code snippet .....
> 
>  attach(xd)
> 	 resp <- "iv802"
> 	pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
> 	lmexp <- paste(resp, " ~ ", pickedlist,sep="")
>         tmpzx <- eval(lm(lmexp,data=xd))
> 
> Essentially, I want to do:
>  lm(iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL, data=xd)
> thru a function that has the parameters passed thru TclTk and Perl......

Um, I'm somewhat surprised that this gives sensible results in
Splus... It does, since Splus accepts a text string for a formula
which R does not. 

[The use of eval is also unnecessary, and the sep="" is peculiar in
view of the spaces around the ~...]

In R you need to jump through an extra hoop to create a formula object
from the string representation:

lmexp <- formula(paste(resp, "~", pickedlist))
tmpzx <- lm(lmexp,data=xd)

The Splus docs explicitly say that the first argument to lm should be
a formula object, and R's behaviour is consistent with that.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Sep 22 22:29:52 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 22 Sep 2000 16:29:52 -0500
Subject: [Rd] eval functions... (PR#668)
In-Reply-To: aprasad@fs.fed.us's message of "Fri, 22 Sep 2000 22:31:08 +0200 (MET DST)"
References: <200009222031.WAA23892@pubhealth.ku.dk>
Message-ID: <6rya0kdsj3.fsf@franz.stat.wisc.edu>

aprasad@fs.fed.us writes:

> I am trying to convert some S-PLUS code to R (a tcl/tk application that uses
> R)...
> here is the error I got in R (but not in S-PLUS)...so I am wondering if it is a
> bug.
> 
> Eg., the foll. extract from a function runs fine in S-PLUS but gives the error:
> Error in x[[j]] : subscript out of bounds
> in R
> 
> code snippet .....
> 
>  attach(xd)
> 	 resp <- "iv802"
> 	pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
> 	lmexp <- paste(resp, " ~ ", pickedlist,sep="")
>         tmpzx <- eval(lm(lmexp,data=xd))
> 
> Essentially, I want to do:
>  lm(iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL, data=xd)
> thru a function that has the parameters passed thru TclTk and Perl......

I think in both R and S-PLUS you would be better off using as.formula.

> as.formula("iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL")
iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL

You may want to use Bill Venables' favorite function do.call as well.  Try

resp <- "iv802"
pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
tmpzx <- do.call("lm", 
          list(formula = as.formula(paste(resp, "~", pickedlist)),
               data = xd))

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep 23 07:42:49 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 23 Sep 2000 07:42:49 +0100 (BST)
Subject: [Rd] eval functions... (PR#668)
In-Reply-To: <200009222031.WAA23892@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10009230726310.15421-100000@auk.stats>

On Fri, 22 Sep 2000 aprasad@fs.fed.us wrote:

> Full_Name: Anantha Prasad
> Version: 1.1.1
> OS: Linux
> Submission from: (NULL) (199.131.134.30)
> 
> 
> I am trying to convert some S-PLUS code to R (a tcl/tk application that uses
> R)...
> here is the error I got in R (but not in S-PLUS)...so I am wondering if it is a
> bug.
> 
> Eg., the foll. extract from a function runs fine in S-PLUS but gives the error:
> Error in x[[j]] : subscript out of bounds
> in R

A tracback helps ...

> 
> code snippet .....
> 
>  attach(xd)
> 	 resp <- "iv802"
> 	pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
> 	lmexp <- paste(resp, " ~ ", pickedlist,sep="")
>         tmpzx <- eval(lm(lmexp,data=xd))
> 
> Essentially, I want to do:
>  lm(iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL, data=xd)
> thru a function that has the parameters passed thru TclTk and Perl......

I don't understand why that would work in S-PLUS!  You apply eval to
expressions or calls, but lm(mexp,data=xd) is not a call. Probably S-PLUS
has an implicit as.formula in its version.

The essence can be seen in

> lm(formula="y ~ x")
Error in x[[j]] : subscript out of bounds
> traceback()
[1] "eval(expr, envir, enclos)"                                        
[2] "eval(attr(formula, \"variables\"), data, sys.frame(sys.parent()))"
[3] "model.frame.default(formula = y ~ x, drop.unused.levels = TRUE)"  
[4] "model.frame(formula = y ~ x, drop.unused.levels = TRUE)"          
[5] "eval(expr, envir, enclos)"                                        
[6] "eval(mf, sys.frame(sys.parent()))"                                
[7] "lm(formula = y ~ x)"                                              

The point is that the formula argument should be a formula, not a 
character string, so this is not a bug per se.

There are lots of correct ways to do this.  Perhaps the simplest is

lm(as.formula(lmexp), data=xd)

but that will record the call as 

lm(formula = as.formula(lmexp), data = xd)

To avoid that, if you need to, use something like

do.call("lm", list(formula = as.formula(lmexp), data=xd))

(There are lots more ways too, including using parse or substitute.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ammann@metronet.com  Sat Sep 23 14:48:49 2000
From: ammann@metronet.com (Larry Ammann)
Date: Sat, 23 Sep 2000 08:48:49 -0500
Subject: [Rd] bug in apply with median
Message-ID: <39CCB4C0.9F104660@metronet.com>

I have found a problem in R version 1.1.1 when using apply with the
median function.
The problem can be illustrated with the following data matrix:

X1  X2  X3
1     2     3
 4    5     6
 7    8    NA

Enter this data matrix as X and then try
    apply(X,2,median,na.rm=T)
The problem here is that the median function returns a named scalar if
the number of
observations is odd, but returns an unnamed scalar if the number of
observations is
even. This confuses the apply function in this case at:

    ans.names <- names(ans[[1]])
    if (!ans.list)
        ans.list <- any(unlist(lapply(ans, length)) != l.ans)
    if (!ans.list && length(ans.names)) {
        all.same <- sapply(ans, function(x) all(names(x) == ans.names))
#here is the offending line
        if (!all(all.same))
            ans.names <- NULL
    }

This problem does not occur with S-Plus. My quick solution was to use
the quantile function
instead of the median function:

   apply(X,2,quantile,probs=.5,na.rm=T)

One way of fixing the problem then is to redefine median as

median <- function(x,na.rm=F,names=T)
quantile(x,probs=.5,na.rm=na.rm,names=names)

I don't know if this is a long-term solution though, since there may be
other functions with inconsistent
naming policies that can confuse apply as it is currently written.

Larry Ammann
Professor of Mathematical Sciences
University of Texas at Dallas
 http://www.utdallas.edu/~ammann


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Sep 23 15:55:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Sep 2000 16:55:58 +0200
Subject: [Rd] bug in apply with median
In-Reply-To: Larry Ammann's message of "Sat, 23 Sep 2000 08:48:49 -0500"
References: <39CCB4C0.9F104660@metronet.com>
Message-ID: <x2snqrrwch.fsf@blueberry.kubism.ku.dk>

Larry Ammann <ammann@metronet.com> writes:

> I have found a problem in R version 1.1.1 when using apply with the
> median function.
> The problem can be illustrated with the following data matrix:
> 
> X1  X2  X3
> 1     2     3
>  4    5     6
>  7    8    NA
> 
> Enter this data matrix as X and then try
>     apply(X,2,median,na.rm=T)
> The problem here is that the median function returns a named scalar if
> the number of
> observations is odd, but returns an unnamed scalar if the number of
> observations is
> even. This confuses the apply function in this case at:

for ( i in 1:1000 ) cat("Data frames are not matrices!\n")

> X<-matrix(c(1:8,NA),3,3)
> X
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6   NA
> apply(X,2,median,na.rm=T)
[1] 2.0 5.0 7.5

Works fine.

However,

> Z<-data.frame(X)
> apply(Z,2,median,na.rm=T)
Error in names(x) == ans.names : comparison (1) is possible only for vector types

Question is whether this is a bug. Apply() never promised to work on
non-arrays. When applied columnwise, it would anyway be more obvious
to use

> sapply(Z,median,na.rm=T)
 X1  X2  X3 
2.0 5.0 7.5 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep 25 08:48:16 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 25 Sep 2000 09:48:16 +0200
Subject: [Rd] constructing empty data.frames [RFC]
Message-ID: <14799.832.915696.744509@gargle.gargle.HOWL>

somewhat `esoteric' problem/bug :

## Constructing an empty data.frame  (e.g. for later rbind()ing), works with

data.frame(a = 1[-1])
## or
data.frame(a = 1[-1], b = "c"[-1])

## but {these give warnings, but *work* with S+ (5.1)
##      giving the NULL data.frame, i.e. the same as data.frame()
##      --- which I don't like either: NULL should behave as numeric(0) here!}:
data.frame(a = NULL)         # fails with R
data.frame(a = NULL, b= NULL)# fails


---------- 

This is really a request for comment.
In my opinion I should get data.frames with 1 or 2 columns and 0 rows in
all cases.  R fails completely, and S+ (5.1) gives the NULL.

I'd like to fix R such that  `` NULL behaves as numeric(0) '' in this
situation. 

Comments?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Sep 25 09:17:02 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 25 Sep 2000 10:17:02 +0200 (MET DST)
Subject: [Rd] Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ? (PR#669)
Message-ID: <200009250817.KAA01917@pubhealth.ku.dk>

This is not only bug report, but also a RFC (request for comments):

The basic problem is that there are (at least) two ways of easily getting
non-factor character columns in data.frames.
The first is  
    read.table(*, as.is = TRUE) 
and the second is
    data.frame(.., I(...), ..)	      

which differ in their result. Whereas the first produces `pure' character
columns in the data.frame, the second approach gives `AsIs' classed
columns (character, or, e.g. logical).

Now, as the following shows,  rbind.data.frame()  *is* buggy anyway,
I wonder if we shouldn't change read.table(*, as.is = TRUE)
such that the non-numeric columns of its result become "AsIs" classed as
well:

-----------

str(d1 <- data.frame(a=1:3, b = I(letters[1:3])))
## d1 is `alright'
## d0: The same but a `character' *not* protected by AsIs:
d0 <- d1
d0$b <- unclass(d0$b)
str(d0)
## Note that this is *really* the same as a what you get from
##  read.table(*, as.is = TRUE)
##  ----------
##  R's read.table() is S+ compatible; however I wonder if
##  we shouldn't add  "AsIs" classes to all non-numeric components...
##  the classes, shouldn't harm, but ensure consistency of treatment..

str(d11 <- rbind(d1, new = c(7, "N"))) ## alright
str(d01 <- rbind(d0, new = c(7, "N"))) ## all wrong :
## Both columns were coerced to factors !!
##-- S-PLUS 5 coerces both to "character" -- which is better,
##  since the new row *is* all character

## R makes nonsense with 'b' [factor w/ 1 level "N": NA NA NA 1]
## S+ 5.1 does exactly the right thing [both a & b still look like in d0,d1 :
str(d12 <- rbind(d1, new = data.frame(a= 7, b="N")))##
str(d02 <- rbind(d0, new = data.frame(a= 7, b="N")))##

---------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Sep 26 15:14:13 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Tue, 26 Sep 2000 16:14:13 +0200 (MET DST)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
Message-ID: <200009261414.QAA22305@pubhealth.ku.dk>


  I'm having some trouble with optim(method="L-BFGS-B"),
and I'm not sure I have the ability to track down and fix
what seem to be bugs within optim().
  I'm bootstrapping an original data set and fitting a model
to each bootstrapped data set.  For some bootstrapped samples,
optim() sets negative parameter values (despite the fact that
I have explicitly set non-zero lower bounds on the parameters)
and chokes.  For other samples, it appears to get into an infinite
loop (ignoring the finite value of maxit).
 
  Functions and samples that provoke the problem are below: I
was able to reproduce the problems running this with --vanilla.

  Not exactly a bug but: there is no tracing information built
into L-BFGS-B (setting trace=TRUE has no effect).

  Also, a general question: are both nlm() and optim() going to
be around indefinitely?  Should I be using one or the other?

  For the moment I've managed to (sort of) get around the problem
with try(), but the infinite loops are a real nuisance ...

cfunc2_function(input,N1,N2,G=1.0){
  pmin(1,1/((1+((input - N1)/N2))^G))
}

nllfun2g.boot_function(q,debug=FALSE){
#  if (i==93) debug <- TRUE
  N1_q[1]
  N2_q[2]
  G_q[3]
  L_cfunc2(boot.total,N1,N2,G)
  if (debug) cat(c(N1,N2,G,range(L)),"\n")
  r <- -sum(dbinom(boot.pred, boot.total, L, log=TRUE))
  if (!is.finite(r)) {
    cat(c(N1,N2,G,range(L)),"\n")
    cat(boot.pred,"\n")
    cat(boot.total,"\n")
    cat(L,"\n")
    cat(dbinom(boot.pred, boot.total, L, log=TRUE),"\n")
  }
  r
}

fuzz <- 0.001

boot.pred <- c(91,22,44,31,47,83,31,56,22,83,53,73)
boot.total <- c(900,150,900,200,150,100,200,300,150,300,200,500)
n <- try(optim(c(min(boot.total)-1,100,1),nllfun2g.boot,
        lower=rep(fuzz,3),upper=c(min(boot.total)-fuzz,Inf,Inf),
           method="L-BFGS-B",control=list(trace=TRUE),debug=TRUE))

boot.pred <- c(31,73,56,22,22,56,83,22,83,91,30,44)
boot.total <- c(200,100,300,150,150,300,100,150,300,900,500,900)
n <- optim(c(min(boot.total)-1,100,1),nllfun2g.boot,
        lower=rep(fuzz,3),upper=c(min(boot.total)-fuzz,Inf,Inf),
           method="L-BFGS-B",control=list(trace=TRUE),debug=TRUE)


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Sep 26 18:51:02 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 26 Sep 2000 19:51:02 +0200
Subject: [Rd] bug in apply with median
In-Reply-To: <x2snqrrwch.fsf@blueberry.kubism.ku.dk>
References: <39CCB4C0.9F104660@metronet.com>
 <x2snqrrwch.fsf@blueberry.kubism.ku.dk>
Message-ID: <14800.57862.150376.54471@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
(Sep 23):

    PD> Larry Ammann <ammann@metronet.com> writes:
    >> I have found a problem in R version 1.1.1 when using apply with the
    >> median function.
    >> The problem can be illustrated with the following data matrix:
    >> 
    >> X1  X2  X3
    >> 1     2     3
    >> 4    5     6
    >> 7    8    NA
    >> 
    >> Enter this data matrix as X and then try
    >> apply(X,2,median,na.rm=T)
    >> The problem here is that the median function returns a named scalar if
    >> the number of
    >> observations is odd, but returns an unnamed scalar if the number of
    >> observations is
    >> even. This confuses the apply function in this case at:

    PD> for ( i in 1:1000 ) cat("Data frames are not matrices!\n")

                                 ==============================
    >> X<-matrix(c(1:8,NA),3,3)
    >> X
    PD> [,1] [,2] [,3]
    PD> [1,]    1    4    7
    PD> [2,]    2    5    8
    PD> [3,]    3    6   NA
    >> apply(X,2,median,na.rm=T)
    PD> [1] 2.0 5.0 7.5

    PD> Works fine.

    PD> However,

    >> Z<-data.frame(X)
    >> apply(Z,2,median,na.rm=T)
    PD> Error in names(x) == ans.names : comparison (1) is possible only for vector types

    PD> Question is whether this is a bug. Apply() never promised to work on
    PD> non-arrays.

I think we should 
  either   make it promiss and do this
  or	   make it produce a warning    when used with data.frames

The above problem is too common for non-experts to stumble on..


    PD> When applied columnwise, it would anyway be more obvious to use

    >> sapply(Z,median,na.rm=T)
    PD> X1  X2  X3 
    PD> 2.0 5.0 7.5 

This could be what   
     apply(<dataframe>, 2, * )   
should do
whereas we could have
	apply(dfr, 1, *)  === apply(data.matrix(dfr), 1, *)
when dfr is a data.frame.

Opinions ?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Sep 26 20:52:47 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 26 Sep 2000 21:52:47 +0200
Subject: [Rd] subset()  wish: allow "select" for non-dataframes
Message-ID: <14800.65167.494938.453452@gargle.gargle.HOWL>

{Mainly to the author of the subset() function,
 but RFC to all "R-develers": }

Wouldn't it be worth redefining  subset.default() such
that `anything reasonable' would allow a select argument?

Currently, only subset.data.frame() allows a select argument,
and hence we can have

  > (x <- c(a=1, b=3, d= 7:10))
   a  b d1 d2 d3 d4 
   1  3  7  8  9 10 

  > subset(as.data.frame(rbind(x)), select = -(d2:d3))
    a b d1 d4
  x 1 3  7 10

{and ``subset(as.data.frame(rbind(x)))'' might already be a sensible
 definition for  subset.default  at least 
 if(!missing(select) && !is.null(names(x))); 
 and similarly for matrices.
}

---

Using  ranges and "-" in indices for names instead of just integers 
is a feature that I have been missing for a long time.
It would allow much more expressive code in some situations.


2nd thought: 
      One could even start thinking if we should n't even enhance
      "[" and "[[" instead of just  subset()...

I agree that one might not like things like   x[- d1] that are
undefined when not part of the index, but then 
"i , j" is also not really defined when not inside "[ .. ]" ...

--
[Evening musings;  maybe I'm too close to dream already...]

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Sep 26 21:27:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Sep 2000 22:27:27 +0200
Subject: [Rd] Re: subset()  wish: allow "select" for non-dataframes
In-Reply-To: Martin Maechler's message of "Tue, 26 Sep 2000 21:52:47 +0200"
References: <14800.65167.494938.453452@gargle.gargle.HOWL>
Message-ID: <x266nic30w.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> {Mainly to the author of the subset() function,
>  but RFC to all "R-develers": }

Man, that was many moons ago...

> Wouldn't it be worth redefining  subset.default() such
> that `anything reasonable' would allow a select argument?
> 
> Currently, only subset.data.frame() allows a select argument,
> and hence we can have
> 
>   > (x <- c(a=1, b=3, d= 7:10))
>    a  b d1 d2 d3 d4 
>    1  3  7  8  9 10 
> 
>   > subset(as.data.frame(rbind(x)), select = -(d2:d3))
>     a b d1 d4
>   x 1 3  7 10
> 
> {and ``subset(as.data.frame(rbind(x)))'' might already be a sensible
>  definition for  subset.default  at least 
>  if(!missing(select) && !is.null(names(x))); 
>  and similarly for matrices.
> }

This sounds doable.

> 2nd thought: 
>       One could even start thinking if we should n't even enhance
>       "[" and "[[" instead of just  subset()...
> 
> I agree that one might not like things like   x[- d1] that are
> undefined when not part of the index, but then 
> "i , j" is also not really defined when not inside "[ .. ]" ...

You do need to be careful since x[i] is ambiguous if "i" is both a
variable name in the environment and the name of an element of x. One
idea could be to allow indexing with unevaluated calls like
x[quote(-(d2:d3))] and internally have

if (is.language(ix)) {
    nl<-as.list(1:dim)
    names(nl)<-names(x)
    ix<-eval(ix,nl)
}

(good luck with [.data.frame &friends, though...)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Don.Wingate@intellichem.com  Wed Sep 27 02:34:49 2000
From: Don.Wingate@intellichem.com (Don Wingate)
Date: Tue, 26 Sep 2000 18:34:49 -0700
Subject: [Rd] Wrapping R for windows in a com dll
Message-ID: <MPEHJEGLNPNFGJFOJMKNMEBFCAAA.Don.Wingate@IntelliChem.com>

Dear R Community,

I am trying to create a com dll wrapper for R in a mannor similiar to the R
Com Server by Thomas Baier except that I would much rather avoid using the
proxy dll ("Rproxy.dll"). Perhaps I don't really understand the reason for
going throug the proxy in the first place, but it seems like an unnecessary
indirection for an application which is not intended to use DCom. To this
end I have been trying to use the functions declared in rproxy_impl.h (I've
tried rtest.c as well, aka the readme file in the front-ends directory). It
is my understanding that these functions provide access to interface
functions contained in R.dll. However, there does not seem to be an R.exp or
R.lib file in the source code or R binary distribution.

I work in the VC++ ide and am building a VC++ project. As I am sorely
unpracticed in the use of makefiles and the command line for compiling, I
have been avoiding the daunting task of compiling the R dll itself, if in
fact that would be at all helpful. (From what I have been able to gather, it
is either not possible or a big problem to compile R inside the VC++ ide, is
this correct??)

My questions are as follows:

1) Is it possible to build a project containing calls to functions contained
in rtest.c and/or rproxy_impl.h from the VC++ ide?

2) Are the compiled R.exp and/or R.lib files available?

3) If these files are not available (or even if they are) is there another
way to access R.dll which I have not tried, other than through RProxy.dll?

4) Is there any documentation on the interface exposed by R.dll and its
dependencies?

Thankyou in advance,

Don Wingate.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Sep 27 09:37:42 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 27 Sep 2000 10:37:42 +0200
Subject: [Rd] bug in apply with median -- fixed in R-devel (NULL == ..)
In-Reply-To: <39CCB4C0.9F104660@metronet.com>
References: <39CCB4C0.9F104660@metronet.com>
Message-ID: <14801.45526.915173.955637@gargle.gargle.HOWL>

>>>>> "LarAm" == Larry Ammann <ammann@metronet.com> writes:

    LarAm> I have found a problem in R version 1.1.1 when using apply with the
    LarAm> median function.
    LarAm> The problem can be illustrated with the following data matrix:

    LarAm> X1  X2  X3
    LarAm> 1     2     3
    LarAm> 4    5     6
    LarAm> 7    8    NA

    LarAm> Enter this data matrix as X and then try
    LarAm>	 apply(X,2,median,na.rm=T)

Reproducible by

 X <- matrix(c(1:8,NA),3,3, dimnames = list(1:3,paste("V",1:3,sep="")))
 apply(X,2,median,na.rm=T)

Thank you!

    LarAm> The problem here is that the median function returns a named
    LarAm> scalar if the number of observations is odd, but returns an
    LarAm> unnamed scalar if the number of observations is even. This
    LarAm> confuses the apply function in this case at:

    LarAm>    ans.names <- names(ans[[1]])
    LarAm>    if (!ans.list)
    LarAm>       ans.list <- any(unlist(lapply(ans, length)) != l.ans)
    LarAm>    if (!ans.list && length(ans.names)) {
    LarAm>       all.same <- sapply(ans, function(x) all(names(x) == ans.names))
    LarAm> #here is the offending line
    LarAm>    if (!all(all.same))
    LarAm>        ans.names <- NULL
    LarAm> }

Yes, your analysis is correct.

The reason this problem is now fixed (in R-devel, aka "1.2 unstable"),
is explained by the following entry in the BUG FIXES part of the ./NEWS
file :

    o	NULL == ... now gives logical(0) instead of an error.
	This fixes a bug with e.g. apply(X,2,median, na.rm = TRUE) and
	all(NULL == NULL) is now TRUE.




    LarAm> This problem does not occur with S-Plus. My quick solution was to use
    LarAm> the quantile function
    LarAm> instead of the median function:

    LarAm> apply(X,2,quantile,probs=.5,na.rm=T)

    LarAm> One way of fixing the problem then is to redefine median as

    LarAm> median <- function(x,na.rm=F,names=T)
    LarAm> quantile(x,probs=.5,na.rm=na.rm,names=names)

    LarAm> I don't know if this is a long-term solution though, since there may be
    LarAm> other functions with inconsistent
    LarAm> naming policies that can confuse apply as it is currently written.

yes.
and the above fix should fix all these as well!

    LarAm> Larry Ammann
    LarAm> Professor of Mathematical Sciences
    LarAm> University of Texas at Dallas

Thanks again!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed Sep 27 10:46:06 2000
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Wed, 27 Sep 2000 11:46:06 +0200 (MET DST)
Subject: [Rd] R 1.1.0: scan (PR#672)
Message-ID: <200009270946.LAA00625@pubhealth.ku.dk>


I'm using R 1.1.0 on Linux and HP-UX 10.20. I encountered a bug
in the HP-UX version.

When I do this:

lines <- scan(file="filename", what="", sep="\n", strip.white=c(TRUE), quiet=TRUE) 

.. it works OK on Linux. On HP-UX, the last line is read in
twice, giving 'lines' an extra element that is identical to the 
previous element.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Sep 27 13:51:50 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 27 Sep 2000 13:51:50 +0100 (BST)
Subject: [Rd] Wrapping R for windows in a com dll
In-Reply-To: <MPEHJEGLNPNFGJFOJMKNMEBFCAAA.Don.Wingate@IntelliChem.com>
Message-ID: <Pine.GSO.4.05.10009271343020.20991-100000@auk.stats>

On Tue, 26 Sep 2000, Don Wingate wrote:

> Dear R Community,
> 
> I am trying to create a com dll wrapper for R in a mannor similiar to the R
> Com Server by Thomas Baier except that I would much rather avoid using the
> proxy dll ("Rproxy.dll"). Perhaps I don't really understand the reason for
> going throug the proxy in the first place, but it seems like an unnecessary
> indirection for an application which is not intended to use DCom. To this

Right, but it *is* intended to use DCOM.  You can directly link the R.dll
into your application too.

> end I have been trying to use the functions declared in rproxy_impl.h (I've
> tried rtest.c as well, aka the readme file in the front-ends directory). It
> is my understanding that these functions provide access to interface
> functions contained in R.dll. However, there does not seem to be an R.exp or
> R.lib file in the source code or R binary distribution.

There is in the binary distribution, as well as instructions on
how to build them in the source distribution.

> I work in the VC++ ide and am building a VC++ project. As I am sorely
> unpracticed in the use of makefiles and the command line for compiling, I
> have been avoiding the daunting task of compiling the R dll itself, if in
> fact that would be at all helpful. (From what I have been able to gather, it
> is either not possible or a big problem to compile R inside the VC++ ide, is
> this correct??)

VC++ is a big problem, period.  If it were standards-conforming, one could
build R with it, but it has too many bugs.

> My questions are as follows:
> 
> 1) Is it possible to build a project containing calls to functions contained
> in rtest.c and/or rproxy_impl.h from the VC++ ide?

rtest.c, yes. It's easy, but telling anyone how to use an IDE is
very lengthy, and the command-line versions are much much shorter.

> 2) Are the compiled R.exp and/or R.lib files available?

R.exp is in rw1011sp.zip!  Read readme.packages there, which has
explicit instructions for using VC++ to build an import library.

> 3) If these files are not available (or even if they are) is there another
> way to access R.dll which I have not tried, other than through RProxy.dll?
> 
> 4) Is there any documentation on the interface exposed by R.dll and its
> dependencies?

Yes, in the front-ends directory.  All you can do is pass commands to
R and receive back the results.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Sep 27 20:12:07 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 27 Sep 2000 15:12:07 -0400
Subject: [Rd] R CMD check   dev.cur()
Message-ID: <39D24687.91A52BFD@bank-banque-canada.ca>

I am having trouble tracking down a "R CMD check"  problem in Linux.
The code works in Solaris and interactively in Linux. Is it possible
that dev.cur() when running "R CMD check" returns 1 in Solaris and
something different in Linux (Mandrake 2.2.14-1 and Gnome)?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Sep 27 20:21:23 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 27 Sep 2000 21:21:23 +0200 (CEST)
Subject: [Rd] R CMD check   dev.cur()
In-Reply-To: <39D24687.91A52BFD@bank-banque-canada.ca>
References: <39D24687.91A52BFD@bank-banque-canada.ca>
Message-ID: <14802.18611.142952.540878@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 27 Sep 2000 15:12:07 -0400,
>>>>> Paul Gilbert (PG) wrote:

PG> I am having trouble tracking down a "R CMD check"  problem in Linux.
PG> The code works in Solaris and interactively in Linux. Is it possible
PG> that dev.cur() when running "R CMD check" returns 1 in Solaris and
PG> something different in Linux (Mandrake 2.2.14-1 and Gnome)?

Which version of R?

Could you not simply do a

	cat(dev.cur(), file="xxx")

or something similar to see what it returns? 

best,
.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Sep 28 01:03:00 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 27 Sep 2000 20:03:00 -0400
Subject: [Rd] R CMD check   dev.cur()
References: <39D24687.91A52BFD@bank-banque-canada.ca> <14802.18611.142952.540878@galadriel.ci.tuwien.ac.at>
Message-ID: <39D28AB4.2EB80924@bank-banque-canada.ca>

PG> I am having trouble tracking down a "R CMD check"  problem in Linux.

PG> The code works in Solaris and interactively in Linux. Is it possible

PG> that dev.cur() when running "R CMD check" returns 1 in Solaris and
PG> something different in Linux (Mandrake 2.2.14-1 and Gnome)?

FL>Which version of R?

R 1.1.1

FL>Could you not simply do a
FL>      cat(dev.cur(), file="xxx")

Both Solaris and Linux give 2 so I guess that is not the problem. I'll
check further.
Thanks,
Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Thu Sep 28 07:08:51 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Thu, 28 Sep 2000 14:08:51 +0800 (GMT-8)
Subject: [Rd] New Web page -- Ideas list
In-Reply-To: <14802.18611.142952.540878@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.21.0009281340120.3143-100000@sununx.comp.nus.edu.sg>

Hi,
I was looking over the developer page of the new web site. In the ideas
section dynamic graphics and mapping are mentioned. I have a few comments
and wanted to get some feedback. 

Mapping: I am working on a package for mapping (I have sent notice to the
list). The ideas section of the web page mentions the Beckers/Wilks
code. I think ther model is very restrictive and perhaps a better system
could be implemented. I think there are two goals that the mapping
routines/data structures should address 1) display, and 2) analysis. On
the display end what I have noticed that could be improved: a) The display
when resized does not stay equally scaled, this is important for map
display. b) The polygon code does not deal well with multi-part polygons,
many gis and graphics systems allow holes, and islands, the polygon and
clipping routines can easily be adjusted to handle this. I can volunteer
to
do the polygon stuff, I have looked at the code in graphics.c and I think
I undestand what is going on. A zoom function on the device would be very
useful, especially if it would interact withhow the device is partioned by
the user, so that the first level of zoom would be to an individual
plot. These are the most immediate things that affect the R base code
directly.

Some other things that are more of a wishlist would be better color and
symbol facilities, I just finished writing an interactive color picker and
pallete selector using graphapp that works nicely from R. A tree node data
type that can be passed as a SEXP for making linked lists, binary trees
etc. I am writing an R+ tree as part of the map object and i am worried
about the overhead of using lists as node structures. For most spatial
calculations (variograms, polygon adjacency, weight matrices, neighbor
finding etc.) trees are essential for better than O(n^2) performance.

I hope my comments are construed as constructive rather than whining. Most
of what I have indicated I would be willing to help implement.

Nicholas 


                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Sep 28 13:51:12 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 28 Sep 2000 13:51:12 +0100 (BST)
Subject: [Rd] Re: [R] Nothing can be pasted...
Message-ID: <200009281251.NAA10367@toucan.stats.ox.ac.uk>

> Date: Thu, 28 Sep 2000 14:28:31 +0200 (CEST)
> From: gb <gb@stat.umu.se>
> 
> 
> Compiling R-1.1.1 on RedHat Linux 7.0 gives lots of warnings like
> 
> In file included from tabulate.c:24:
> ../../src/include/config.h:192:21: warning: nothing can be pasted after
> this token
> 
> which I didn't see with RH6.2. However,  R  seems to run just fine
> nevertheless. The offending line in config.h is
> 
> #define DYNLOADEXT  "." ## SHLIBEXT
> 
> I'm not too familiar with  C  programming, but if ## SHLIBEXT
> is meant as a comment, shouldn't it be surrounded by /* */?

A bit more on this. I understood from PD's recent post that RH7.0 uses
gcc 2.96, even though that is not yet released accoring to the gcc site
(gcc.gnu.org) has as NEWS for Sept 11, 2000:

   Neil Booth has contributed a new lexer and macro-expander for the C
   preprocessor. The lexer makes a single pass over the source files,
   whereas previously it made two. The macro expander works without
   re-scanning for nested macros to expand, and operates on lexical tokens
   instead of text strings.

   ISO C, C++, and Objective C use the new preprocessor. Traditional (K+R)
   C, Fortran, and Chill use an older implementation (taken from GCC 1)
   which obeys the rules for pre-standard C preprocessing. Either version
   may be used to preprocess assembly language.

I wonder if this is a problem with using a beta compiler?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Sep 28 16:05:53 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Sep 2000 17:05:53 +0200
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: Prof Brian Ripley's message of "Thu, 28 Sep 2000 13:51:12 +0100 (BST)"
References: <200009281251.NAA10367@toucan.stats.ox.ac.uk>
Message-ID: <x24s30sgj2.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> > which I didn't see with RH6.2. However,  R  seems to run just fine
> > nevertheless. The offending line in config.h is
> > 
> > #define DYNLOADEXT  "." ## SHLIBEXT
> > 
> > I'm not too familiar with  C  programming, but if ## SHLIBEXT
> > is meant as a comment, shouldn't it be surrounded by /* */?
> 

> I wonder if this is a problem with using a beta compiler?

I certainly wouldn't put such a goof beyond RedHat, but it might be a
question of tighter standards compliance. What happens if the spaces
around ## are removed? (The error message might read as "can't paste
onto a whitespace token")

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Thu Sep 28 16:12:18 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Thu, 28 Sep 2000 10:12:18 -0500 (CDT)
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: <x24s30sgj2.fsf@blueberry.kubism.ku.dk> from Peter Dalgaard BSA at "Sep 28, 2000 05:05:53 pm"
Message-ID: <200009281512.KAA04710@goose.stat.umn.edu>

Peter Dalgaard BSA wrote:
> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > > which I didn't see with RH6.2. However,  R  seems to run just fine
> > > nevertheless. The offending line in config.h is
> > > 
> > > #define DYNLOADEXT  "." ## SHLIBEXT
> > > 
> > > I'm not too familiar with  C  programming, but if ## SHLIBEXT
> > > is meant as a comment, shouldn't it be surrounded by /* */?
> > 
> 
> > I wonder if this is a problem with using a beta compiler?
> 
> I certainly wouldn't put such a goof beyond RedHat, but it might be a
> question of tighter standards compliance. What happens if the spaces
> around ## are removed? (The error message might read as "can't paste
> onto a whitespace token")
> 

White space should be fine, from my reading of Harbison & Steele at least.
The old KR way of doing token concatenation was

#define CONCAT(x,y) x/**/y

and there leaving white space would not work, but with the ## operator

#define CONCAT(x,y) x##y

and

#define CONCAT(x,y) x ## y

should be equivalent.

Since the two bits are literal strings, it would also be possible to define

#define DYNLOADEXT  "." SHLIBEXT

My fear is that the preprocessor is complaining about SHLIBEXT being
defined but empty because of a configure problem.

luke


-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Sep 28 16:43:29 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 28 Sep 2000 08:43:29 -0700
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: <200009281251.NAA10367@toucan.stats.ox.ac.uk>
 (Prof Brian Ripley's message of "Thu, 28 Sep 2000 13:51:12 +0100 (BST)")
References: <200009281251.NAA10367@toucan.stats.ox.ac.uk>
Message-ID: <87bsx8o732.fsf@jeeves.blindglobe.net>

>>>>> "PBR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:


    PBR> A bit more on this. I understood from PD's recent post that
    PBR> RH7.0 uses gcc 2.96, even though that is not yet released
    PBR> accoring to the gcc site (gcc.gnu.org) has as NEWS for Sept
    PBR> 11, 2000:


    PBR> I wonder if this is a problem with using a beta compiler?

I would be very careful with upgrading a production machine to RedHat
7.0; based on my recent experiences with Debian/Woody, it's hazardous
to stability (Debian/Woody is currently is messed up with similar but
slightly better patched (later) version of glibc, though using older
version of gcc (2.95.2))

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Sep 28 17:05:44 2000
From: gb@stat.umu.se (gb)
Date: Thu, 28 Sep 2000 18:05:44 +0200 (CEST)
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: <x24s30sgj2.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.21.0009281804570.2168-100000@pc16.stat.umu.se>

On 28 Sep 2000, Peter Dalgaard BSA wrote:

> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > > which I didn't see with RH6.2. However,  R  seems to run just fine
> > > nevertheless. The offending line in config.h is
> > > 
> > > #define DYNLOADEXT  "." ## SHLIBEXT
> > > 
> > > I'm not too familiar with  C  programming, but if ## SHLIBEXT
> > > is meant as a comment, shouldn't it be surrounded by /* */?
> > 
> 
> > I wonder if this is a problem with using a beta compiler?
> 
> I certainly wouldn't put such a goof beyond RedHat, but it might be a
> question of tighter standards compliance. What happens if the spaces
> around ## are removed? (The error message might read as "can't paste
> onto a whitespace token")
> 

I tried that, but I get the same warnings.

Gran

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Sep 28 17:21:32 2000
From: gb@stat.umu.se (gb)
Date: Thu, 28 Sep 2000 18:21:32 +0200 (CEST)
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: <200009281512.KAA04710@goose.stat.umn.edu>
Message-ID: <Pine.LNX.4.21.0009281812510.2168-100000@pc16.stat.umu.se>

On Thu, 28 Sep 2000, Luke Tierney wrote:

> Peter Dalgaard BSA wrote:
> > Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> > 
> > > > which I didn't see with RH6.2. However,  R  seems to run just fine
> > > > nevertheless. The offending line in config.h is
> > > > 
> > > > #define DYNLOADEXT  "." ## SHLIBEXT
> > > > 
> > > > I'm not too familiar with  C  programming, but if ## SHLIBEXT
> > > > is meant as a comment, shouldn't it be surrounded by /* */?
> > > 
> > 
> > > I wonder if this is a problem with using a beta compiler?
> > 
> > I certainly wouldn't put such a goof beyond RedHat, but it might be a
> > question of tighter standards compliance. What happens if the spaces
> > around ## are removed? (The error message might read as "can't paste
> > onto a whitespace token")
> > 
> 
> White space should be fine, from my reading of Harbison & Steele at least.
> The old KR way of doing token concatenation was
> 
> #define CONCAT(x,y) x/**/y
> 
> and there leaving white space would not work, but with the ## operator
> 
> #define CONCAT(x,y) x##y
> 
> and
> 
> #define CONCAT(x,y) x ## y
> 
> should be equivalent.
> 
> Since the two bits are literal strings, it would also be possible to define
> 
> #define DYNLOADEXT  "." SHLIBEXT

This did the trick! But still this warning several times:

../../src/include/FFTab.h:40:29: warning: pasting would not give a valid
preprocessing token

(But different line numbers). Line 40:

	{ F77_QSYMBOL(lminfl),	F77_SYMBOL(lminfl)},

Gran 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 28 18:12:44 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Sep 2000 19:12:44 +0200 (MET DST)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
Message-ID: <200009281712.TAA20426@pubhealth.ku.dk>


> From: bolker@zoo.ufl.edu
> Date: Tue, 26 Sep 2000 16:14:13 +0200 (MET DST)
> 
>   I'm having some trouble with optim(method="L-BFGS-B"),
> and I'm not sure I have the ability to track down and fix
> what seem to be bugs within optim().
>   I'm bootstrapping an original data set and fitting a model
> to each bootstrapped data set.  For some bootstrapped samples,
> optim() sets negative parameter values (despite the fact that
> I have explicitly set non-zero lower bounds on the parameters)
> and chokes.  For other samples, it appears to get into an infinite
> loop (ignoring the finite value of maxit).
>  
>   Functions and samples that provoke the problem are below: I
> was able to reproduce the problems running this with --vanilla.
> 
>   Not exactly a bug but: there is no tracing information built
> into L-BFGS-B (setting trace=TRUE has no effect).

It's a feature, on the TODO list to be added one day.

>   Also, a general question: are both nlm() and optim() going to
> be around indefinitely?  Should I be using one or the other?

There are no plans to remove either.  `indefinitely' is not part
of the non-warranty.
 
>   For the moment I've managed to (sort of) get around the problem
> with try(), but the infinite loops are a real nuisance ...

On Solaris, I get neither negative values nor an infinite loop
on your examples. 

On Linux RH6.2/gcc 2.95.2 I get

NA 1 NA 1 1 1 1 0.6831783 1 0.6831783 1 NA 
NA -Inf NA -Inf -Inf -Inf -Inf -160.2173 -Inf -107.0805 -Inf NA 
Error in optim(c(min(boot.total) - 1, 100, 1), nllfun2g.boot, lower = rep(fuzz,  
: 
        L-BFGS-B needs finite values of fn

for the first, and probably a loop for the second.  I think this is
the usual problem with inconsistent internal precision on Linux
compilers, so try compiling optim.c with -ffloat-store to make gcc
IEEE-compliant.  (At least, that's what the Linux gcc man page says.)

Can you provide some evidence for negative parameter values?  That's
not supposed to happen, but as I rarely fail to supply derivatives,
I have not tested it much.

Finally, I think you have omitted to supply scaling consts for your problem,
and optim will work a lot better if you do, as it will also do if
you can supply analytical derivatives.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From technologic@mediaone.net  Thu Sep 28 16:12:51 2000
From: technologic@mediaone.net (technologic@mediaone.net)
Date: Thu, 28 Sep 00 10:12:51 EST
Subject: [Rd] Announcement
Message-ID: <technologic@mediaone.net>

Hello-

I'm writing to you for a request to see our new site, http://www.buyitpc.com/signup.html   and the add your name to our list if you like to know 
about computer components and software!

http://www.buyitpc.com

Thank you for your time!


There is a legal way of sending large ammounts of e-mails. 
If you want to show that you are in full compliance with the law and are completely legal, you shall  observe the following issues:

1.	The term "Advertisement" shall appear as the first word of the subject line.
2.	Paste this statement below into the beginning or end of your e-mail.

This message is sent in compliance of e-mail bill: SECTION 301, Paragraph (a)(2)(C) of s. 1618
Sender : Tech Logic Comptuers - BuyIt PC - La Mirada, CA.
Phone : 562 943 7745
E-mail : sales@buyitpc.com
To be removed from our mailing list, simply reply with "REMOVE" in the subject. 

By pasting the above announcement into all of the unsolicited e-mails you send, people will realize that you are obviously not breaking any laws. And that's a very important point that should be made.
3.	Finally, you shall honor the REMOVE requests not later than 48 hours after receipt of the request, by cease initiating transmissions to the requester and removing him or her from the correspondent mailing list.

To know more about this issue, consut the "Unsolicited Commercial Electronic Mail Choice Act of 1997'':
http://www.senate.gov/~murkowski/commercialemail/S771index.html

All rigths reserved.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Sep 28 18:33:58 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 28 Sep 2000 12:33:58 -0500
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: gb's message of "Thu, 28 Sep 2000 18:21:32 +0200 (CEST)"
References: <Pine.LNX.4.21.0009281812510.2168-100000@pc16.stat.umu.se>
Message-ID: <qxpya0ch14p.fsf@verdi.stat.wisc.edu>

I think some of the behaviors with respect to ## has changed in recent
versions of gcc. The following quote from the latest gcc cpp.texinfo
file might be relevent as far as the warnings about F77_SYMBOL is
concerned :



The following features are deprecated and will likely be removed at some
point in the future:-

@itemize @bullet

@item Attempting to paste two tokens which together do not form a valid
preprocessing token

The preprocessor currently warns about this and outputs the two tokens
adjacently, which is probably the behavior the programmer intends.  It
may not work in future, though.

Most of the time, when you get this warning, you will find that @samp{##}
is being used superstitiously, to guard against whitespace appearing
between two tokens.  It is almost always safe to delete the @samp{##}.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Don.Wingate@intellichem.com  Fri Sep 29 00:21:38 2000
From: Don.Wingate@intellichem.com (Don Wingate)
Date: Thu, 28 Sep 2000 16:21:38 -0700
Subject: [Rd] creating custom I/O for R
Message-ID: <MPEHJEGLNPNFGJFOJMKNKEBNCAAA.Don.Wingate@IntelliChem.com>

Dear R developers,

I am building an ActiveX Com wrapper for R. I have successfully implemented
an Evaluate function using rproxy_impl.c and rtest.c as examples. The Com
object as it stands at the moment is similar to Thomas Baier's automation
server StatConnectorSrv.exe except that it does not use the Proxy. My goal
it to include a couple of activeX controls in the library: One to provide a
terminal-like interface to R and the other to provide a window for graphics
output.

These two activeX components will serve the exact functions as the
corresponding components of RGui.exe. The difference (and great benefit) is
that as ActiveX components, they can be placed inside an ActiveX container
(like a VB form) and manipulated as an application developer sees fit.

My questions involve how to accomplish these goals:

1) Graphics.

a. For the graphics output, is there a way to pass R a Windows GDI
(graphics) device to draw with? (This would be a very helpful feature!)

b. If not, is there a way to get a metafile and/or a bitmap of a plot
without having first displayed the plot in the standard window?

2) Terminal

a. Is possible to quickly explain the mechanism provided by the functions
pointed at by the members WriteConsole and ReadConsole of the struct
structRstart?

I would appreciate any help and/or suggestions.

Thanks, Don Wingate.

P.S. Thankyou Prof. Ripley for your help earlier.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep 29 07:37:03 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 29 Sep 2000 07:37:03 +0100 (BST)
Subject: [Rd] creating custom I/O for R
In-Reply-To: <MPEHJEGLNPNFGJFOJMKNKEBNCAAA.Don.Wingate@IntelliChem.com>
Message-ID: <Pine.GSO.4.05.10009290732350.7403-100000@auk.stats>

On Thu, 28 Sep 2000, Don Wingate wrote:

> Dear R developers,
> 
> I am building an ActiveX Com wrapper for R. I have successfully implemented
> an Evaluate function using rproxy_impl.c and rtest.c as examples. The Com
> object as it stands at the moment is similar to Thomas Baier's automation
> server StatConnectorSrv.exe except that it does not use the Proxy. My goal
> it to include a couple of activeX controls in the library: One to provide a
> terminal-like interface to R and the other to provide a window for graphics
> output.
> 
> These two activeX components will serve the exact functions as the
> corresponding components of RGui.exe. The difference (and great benefit) is
> that as ActiveX components, they can be placed inside an ActiveX container
> (like a VB form) and manipulated as an application developer sees fit.
> 
> My questions involve how to accomplish these goals:
> 
> 1) Graphics.
> 
> a. For the graphics output, is there a way to pass R a Windows GDI
> (graphics) device to draw with? (This would be a very helpful feature!)

Do you mean draw on?  If so, no, but the devga device could be modified to
do so.

> b. If not, is there a way to get a metafile and/or a bitmap of a plot
> without having first displayed the plot in the standard window?

Use a win.metafile device. See ?windows. See also ?bmp.

> 2) Terminal
> 
> a. Is possible to quickly explain the mechanism provided by the functions
> pointed at by the members WriteConsole and ReadConsole of the struct
> structRstart?

src/unix/system.txt is the documentation.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 29 14:37:47 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 29 Sep 2000 09:37:47 -0400
Subject: [Rd] Re: [R] non-ideal behavior in princomp/ not a feature but a bug
References: <F169284AF6DDD111AA000001FAF836E8012308D8@LLNBBS22>
Message-ID: <39D49B2B.C054D6FA@bank-banque-canada.ca>

>2. However, not all matrices work, such as the first one I tried yesterday.
>Here is
>an example of a matrix which does not work.
>> x
>     [,1] [,2] [,3] [,4]
>[1,] -0.4 -1.6 -1.0 -1.8
>[2,] -2.2 -0.3  1.4  0.2
>> princomp(x)
>Error in princomp(x) : covariance matrix is not non-negative definite

This does not happen with this example in Solaris, but I have had similar
problems with eigen before and had to use something like eigen( (cv + t(cv))/2 )
to avoid it. It seems to me that if eigen is called with symmetric = TRUE, as is
done in princomp, then eigen should return an error message about a
non-symmetric matrix, rather than return a possibly spurious answer from which
negative eigenvalues are checked to test for a non symmetric matrix.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Sep 29 21:49:08 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Fri, 29 Sep 2000 16:49:08 -0400 (EDT)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
In-Reply-To: <200009281712.TAA20426@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10009291633590.22920-100000@bolker.zoo.ufl.edu>

On Thu, 28 Sep 2000 ripley@stats.ox.ac.uk wrote:

> It's a feature, on the TODO list to be added one day.

  A quick hack (if anyone wants to do it) is to change line 975 from

/*	Rprintf("in lbfgsb - %s\n", task);*/

 to

	if (trace) Rprintf("in lbfgsb - %s\n", task);

however, the debugging output that you get is pretty ugly.

> >   Also, a general question: are both nlm() and optim() going to
> > be around indefinitely?  Should I be using one or the other?

  Well, my question was more whether one was preferred or not ... I did
see a comment in some NEWS file at some point that a built-in function had
been switched to optim() and so should converge more often.

  At your suggestion I compiled optim.c (and ../appl/lbfgsb.c for good
measure) with -ffloat-store.  The negative parameter jumps went away, but
I can still provoke optim() to hang with the right (not uncommon) choice
of bootstrap values.  Adding what I thought were reasonable parscale
values makes my code hang in different places [i.e. the particular values
that I give below are no longer a problem], but doesn't stop it hanging or
even reduce the frequency with which it hangs.  Perhaps now that I have
ffloat-store enabled the values below will hang under Solaris as well.

  Should ffloat-store be enabled in general for compilation on Linux
boxes?

  Just for the record, the apparent internal behavior (which I extracted
by uncommenting/modifying line 975 of optim.c as above) is that the
routine does task FG_START, followed by 20 FG_LNSRCH, followed by
ABNORMAL_TERMINATION_IN_LNSRCH, then repeats this indefinitely.  I
wouldn't mind so much if optim/lbfgsb looped until a maximum number of
iterations and then stopped with an error code, but as it stands these
particular cycles never make it to an iteration check and so the loop
never stops -- in order to do the bootstrap run I have to sit and hit
Ctrl-C to restart every time it looks like it's hanging.

  I agree that supplying derivatives would probably fix the problem
(parscale doesn't seem to help enough to fix the problem), but I'm in part
trying to provide this as a tool for non-analytically-inclined students
and I don't want to have to hold their hands while they take the
derivatives of their functions ...

 I greatly appreciate the time that you, and the rest of the core team,
have put into R.

  Ben Bolker

======================
cfunc2_function(input,N1,N2,G=1.0){
  pmin(1,1/((1+((input - N1)/N2))^G))
}

nllfun2g.boot_function(q,debug=FALSE){
  N1_q[1]
  N2_q[2]
  G_q[3]
  maxval <- 1e8
  L_cfunc2(boot.total,N1,N2,G)
  if (debug) cat(c(N1,N2,G,range(L)),"\n")
  r <- -sum(dbinom(boot.pred, boot.total, L, log=TRUE))
  r[!is.finite(r)] <- maxval*sign(r[!is.finite(r)])
  r
}
  
debug <- FALSE
trace <- TRUE
fuzz <- 0.001

## hangs

boot.pred <- c(53,73,73,44,22,31,73,22,53,53,91,73)
boot.total <- c(200,500,100,900,150,200,500,150,200,200,900,100)

n <- try(optim(c(min(boot.total)-1,100,1),nllfun2g.boot,
        lower=rep(fuzz,3),upper=c(min(boot.total)-fuzz,Inf,Inf),
           method="L-BFGS-B",control=list(trace=trace),debug=debug))


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david@orion-10.cs.byu.edu  Fri Sep 29 21:57:58 2000
From: david@orion-10.cs.byu.edu (david@orion-10.cs.byu.edu)
Date: Fri, 29 Sep 2000 22:57:58 +0200 (MET DST)
Subject: [Rd] pretty not covering the range properly (PR#673)
Message-ID: <200009292057.WAA02794@pubhealth.ku.dk>

When I issue the command:

if ( c(2.8,3)[1] < pretty (c(2.8,3))[1]) print ("problem")

the result is "problem" prints.
I have traced it to bits and the 2.8 of the returned vector from pretty is slightly larger.
This seems to be due to the conversion to base 10 with the ns and unit variables in src/appl/pretty.c.

Anyway if I do something like:
hist(c(2.8,3))
it fails as well because it uses pretty.

Thanks for you attention,
DavidMcLaughlin@byu.edu




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 23
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Fri Sep 29 22:18:10 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Fri, 29 Sep 2000 23:18:10 +0200 (MET DST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
Message-ID: <200009292118.XAA02892@pubhealth.ku.dk>


examples:

1) Fails to report that components 2 and 3 differ

all.equal(list(1,2,3,zap=1),list(1,3,4,zap=2))
[1] "Component zap: Mean relative  difference: 1


2) Incorrectly asserts all are equal when components 2 and 3 differ

> all.equal(list(1,2,3,zap=1),list(1,3,4,zap=1))
[1] TRUE

3) Removing named component reveals differences:

> all.equal(list(1,2,3,1),list(1,3,4,1))
[1] "Component 2: Mean relative  difference: 0.5"      
[2] "Component 3: Mean relative  difference: 0.3333333"

4) Unequal first component reveals differences

> all.equal(list(2,2,3,zap=1),list(1,3,4,zap=1))
[1] "Component : Mean relative  difference: 0.5"
[2] "Component : Mean relative  difference: 0.5"
[3] "Component : Mean relative  difference: 0.5"
> all.equal(list(2,2,3,zap=1),list(1,3,4,zap=2))
[1] "Component : Mean relative  difference: 0.5" 
[2] "Component : Mean relative  difference: 0.5" 
[3] "Component : Mean relative  difference: 0.5" 
[4] "Component zap: Mean relative  difference: 1"
> 

5) Second component IS equal, but:

> all.equal(list(2,2,3,zap=1),list(1,2,4,zap=2))
[1] "Component : Mean relative  difference: 0.5" 
[2] "Component : Mean relative  difference: 0.5" 
[3] "Component : Mean relative  difference: 0.5" 
[4] "Component zap: Mean relative  difference: 1"

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

Chuck Berry

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep  1 07:10:34 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Sep 2000 08:10:34 +0200 (MET DST)
Subject: [Rd] plot(x,y,axes=F) (PR#650)
Message-ID: <200009010610.IAA06642@pubhealth.ku.dk>

On Thu, 31 Aug 2000 kye@ams.sunysb.edu wrote:

> Full_Name: Kenny Ye
> Version: R-1.1.1
> OS: Solaris 2.6
> Submission from: (NULL) (129.49.6.133)
> 
> 
> when i use plot(x,y,axes=F), the axes and the box are still ploted.

Not in this example on my Solaris 2.6 R-1.1.1 system:

plot(1:10, 1:10, axes=FALSE)


Two possibilities spring to mind:

1) F is a variable that has a value interpreted as true.  (In R you
need to use FALSE to be safe.)

2) x is not a vector but a classed R object and you are picking up
a plot method that does not support axes=FALSE.

This shows the importance of the advice in the FAQ on bugs reporting:

`Please include an example that reproduces the problem, preferably the
simplest one you have found.'

and the lines around it.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kye@ams.sunysb.edu  Fri Sep  1 15:06:44 2000
From: kye@ams.sunysb.edu (kye@ams.sunysb.edu)
Date: Fri, 1 Sep 2000 16:06:44 +0200 (MET DST)
Subject: [Rd] plot(x,y,axes=F) (PR#650)
Message-ID: <200009011406.QAA14017@pubhealth.ku.dk>


Thanks. I think there was a variable F. 

Best,

Kenny Ye
Assistant Professor
Department of Applied Math and Statistics
SUNY at  Stony Brook
Stony Brook, New York 11794-3600
Phone (631)632-9344
Fax   (631)632-8490

On Fri, 1 Sep 2000, Prof Brian D Ripley wrote:

> On Thu, 31 Aug 2000 kye@ams.sunysb.edu wrote:
> 
> > Full_Name: Kenny Ye
> > Version: R-1.1.1
> > OS: Solaris 2.6
> > Submission from: (NULL) (129.49.6.133)
> > 
> > 
> > when i use plot(x,y,axes=F), the axes and the box are still ploted.
> 
> Not in this example on my Solaris 2.6 R-1.1.1 system:
> 
> plot(1:10, 1:10, axes=FALSE)
> 
> 
> Two possibilities spring to mind:
> 
> 1) F is a variable that has a value interpreted as true.  (In R you
> need to use FALSE to be safe.)
> 
> 2) x is not a vector but a classed R object and you are picking up
> a plot method that does not support axes=FALSE.
> 
> This shows the importance of the advice in the FAQ on bugs reporting:
> 
> `Please include an example that reproduces the problem, preferably the
> simplest one you have found.'
> 
> and the lines around it.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bobbyo@speakeasy.org  Sat Sep  2 21:58:51 2000
From: bobbyo@speakeasy.org (bobbyo@speakeasy.org)
Date: Sat, 2 Sep 2000 22:58:51 +0200 (MET DST)
Subject: [Rd] R INSTALL *.tgz fails (minor docs/feature bug) (PR#652)
Message-ID: <200009022058.WAA19068@pubhealth.ku.dk>

R Team,

	I was attempting to install Lindsey's rmutil.tgz and other
non-CRAN packages using 'R INSTALL', for example 'R INSTALL rmutil.tgz'
after downloading 'rmutil.tgz' from Lindsey's page (as linked from
r-project.org page).

	Directly using the compressed file as 'R INSTALL rmutil.tgz'
failed, though the shell help from 'R INSTALL --help' implied this would
work.

	However, when I simply renamed using 'mv rmutil.tgz rmutil' and
then ran 'R INSTALL rmutil', that worked.

	Adding a note to rename the .tgz files without the .tgz
extension, or changing R INSTALL to allow filename extensions when
installing would be a nice ease-of-use feature.

	(by the way, I was able to use R INSTALL rmutil if I unpacked
rmutil using 'cat rmutil.tgz | tar xvz' and then ran 'R INSTALL rmutil'.)

Keep up the Excellent Work,
	RPO

p.s. Thanks for a wonderful piece of software. R is a real boon to my
research.
	

------ Robert Otillar		| UCSF Graduate Group in Biophysics	------
------ 833 Ashbury #2		| mailto:BobbyO@itsa.ucsf.edu		------
------ San Francisco, CA  94117	| http://bioinformatics.ucsf.edu/bobbyo	------
------ Tel. <send email>	| Fax (415)759-6579			------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Mon Sep  4 01:09:54 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 03 Sep 2000 17:09:54 -0700
Subject: [Rd] quitting iESS[R] (R in ESS)
Message-ID: <87r971j9v1.fsf@jeeves.blindglobe.net>


One thing that has driven me batty to no end is the fact that ESS
doesn't handle R's "exit" well.  Any thoughts as to the default?  I'm
thinking of something like:

        current:  do what currently is done
        C-u Y C-c C-q   : quit and save workspace
        C-u N C-c C-q   : quit and don't save workspace.

Comments?

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@biostat.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

CFAR:   M/F: 206-731-3647 (fax=3694) | Email is far better than phone
FHCRC: Tu/W: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
UW:      Th: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From imsw@holyrood.ed.ac.uk  Mon Sep  4 12:29:08 2000
From: imsw@holyrood.ed.ac.uk (imsw@holyrood.ed.ac.uk)
Date: Mon, 4 Sep 2000 13:29:08 +0200 (MET DST)
Subject: [Rd] bug in spline()? (PR#653)
Message-ID: <200009041129.NAA28115@pubhealth.ku.dk>

BUG IN SPLINE()?

Version R-1.0.1, system i486,linux

If the spline(x,y,method="natural") function is given values outside the
range of the data, it does not give a warning. Moreover, the extrapolated
value reported is not the ordinate of the natural spline defined by (x,y).

Example.  Let x <- c(2,5,8,10) and y <- c(1.2266,-1.7606,-0.5051,1.0390).
Then interpolate/extrapolate with a natural cubic spline at 1:10 using
either

spline(x,y,n=10,method="natural",xmin=1,xmax=10)

or

fn <- splinefun(x,y,method="natural")
fn(1:10)

This gives c(2.5366,1.2266,-0.0834,...,1.0390). I agree with all values
except that at x=1. The interpolation formula in Green and Silverman's
book on splines gives the derivative of a natural spline at the first
knot as f'(x1)=(f2-f1)/(x2-x1) -(1/6)(x2-x1)d, where d=second derivative
at the second knot. For the above example, d=0.7071, f'(x1)=-1.3493,
and the natural spline interpolant has value 1.2266-(-1.3493)=2.5759
at x=1, not 2.5366.

PS There are different e-mail addresses for bug reports given in the
FAQ file and in the help information for bug.report.

************************************************
*    I.White                                   *
*    ICAPB, University of Edinburgh            *
*    Ashworth Laboratories, West Mains Road    *
*    Edinburgh EH9 3JT                         *
*    Fax: 0131 667 3210   Tel: 0131 650 5490   *
*    E-mail: i.m.s.white@ed.ac.uk              *
************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Mon Sep  4 13:07:10 2000
From: pd@blueberry.kubism.ku.dk (pd@blueberry.kubism.ku.dk)
Date: Mon, 4 Sep 2000 14:07:10 +0200 (MET DST)
Subject: [Rd] Dubious mail address (PR#654)
Message-ID: <200009041207.OAA28765@pubhealth.ku.dk>

This is just a test to see whether r-bugs@lists.r-project.org will
actually work, as per the FAQ.

	-Peter D.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep  4 13:28:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Sep 2000 14:28:37 +0200
Subject: [Rd] bug in spline()? (PR#653)
In-Reply-To: imsw@holyrood.ed.ac.uk's message of "Mon, 4 Sep 2000 13:29:08 +0200 (MET DST)"
References: <200009041129.NAA28115@pubhealth.ku.dk>
Message-ID: <x2n1homjd6.fsf@blueberry.kubism.ku.dk>

imsw@holyrood.ed.ac.uk writes:

> This gives c(2.5366,1.2266,-0.0834,...,1.0390). I agree with all values
> except that at x=1. The interpolation formula in Green and Silverman's
> book on splines gives the derivative of a natural spline at the first
> knot as f'(x1)=(f2-f1)/(x2-x1) -(1/6)(x2-x1)d, where d=second derivative
> at the second knot. For the above example, d=0.7071, f'(x1)=-1.3493,
> and the natural spline interpolant has value 1.2266-(-1.3493)=2.5759
> at x=1, not 2.5366.

Also, 

plot(diff(fn(seq(1,3,.01))))

reveals that something is wrong

At the other end, 

 plot(diff(fn(seq(8,11,.01))))

looks even weirder, especially if one modifies 
to y <- c(1.2266,-1.7606,-0.5051,1.01)


> PS There are different e-mail addresses for bug reports given in the
> FAQ file and in the help information for bug.report.

Hmm, and neither looks quite right! One would probably want the
address to be in the r-project.org domain (in case we move it away
from Copenhagen). "r-bugs@list.r-project.org", however, is none too
logical and assumes that there's an r-bugs user or an alias in Zurich
which forwards to biostat.dk (there is, it seems). Same thing with
r-bugs@r-project.org, since the Wisconsin machine aliases r-bugs to
r-bugs@lists.r-project.org. 

More logical would be to use r-bugs@r-project.org and have the
forwarding there go to biostat.dk.

Alternatively, it ought to work as r-bugs@bugs.r-project.org, but that
doesn't work whenever a RedHat upgrade blows away the resending rules
in my sendmail.cf... (the program in r-bugs' .forward needs to execute
on a machine that matches the architecture of the binary!)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep  4 16:18:31 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 4 Sep 2000 17:18:31 +0200 (CEST)
Subject: [Rd] quitting iESS[R] (R in ESS)
In-Reply-To: <87r971j9v1.fsf@jeeves.blindglobe.net>
References: <87r971j9v1.fsf@jeeves.blindglobe.net>
Message-ID: <14771.48455.503252.671251@gargle.gargle.HOWL>

>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

    tony> One thing that has driven me batty to no end is the fact that ESS
    tony> doesn't handle R's "exit" well.  Any thoughts as to the default?  I'm
    tony> thinking of something like:

    tony> current:  do what currently is done
?? {don't understand: I thought you hated the current behavior?}
          
C-c C-q (without prefix) and it's menu analog should really have emacs
prompt the user, i.e. under X windows a popup dialog menu, and otherwise a
"minibuffer" one. 

    tony> C-u Y C-c C-q   : quit and save workspace
    tony> C-u N C-c C-q   : quit and don't save workspace.
good idea in any case!
[but most users don't memorize (and hence use) prefix sequences; yes, I do ..]



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Mon Sep  4 16:34:05 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 04 Sep 2000 08:34:05 -0700
Subject: [Rd] quitting iESS[R] (R in ESS)
In-Reply-To: <14771.48455.503252.671251@gargle.gargle.HOWL>
 (Martin Maechler's message of "Mon, 4 Sep 2000 17:18:31 +0200 (CEST)")
References: <87r971j9v1.fsf@jeeves.blindglobe.net>
 <14771.48455.503252.671251@gargle.gargle.HOWL>
Message-ID: <87lmx8jhn6.fsf@jeeves.blindglobe.net>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:


>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:
    tony> One thing that has driven me batty to no end is the fact
    tony> that ESS doesn't handle R's "exit" well.  Any thoughts as to
    tony> the default?  I'm thinking of something like:

    tony> current: do what currently is done
    MM> ?? {don't understand: I thought you hated the current
    MM> behavior?}

Yes.  But leaving it currently "appears" to follow the principle of
least surprise.

The alternative would be to have 2 prompts for R (and similarly for
Stata, which also works on a "Dataspace" principle (only one dataset
at a time)).
          
    MM> C-c C-q (without prefix) and it's menu analog should really
    MM> have emacs prompt the user, i.e. under X windows a popup
    MM> dialog menu, and otherwise a "minibuffer" one.

Which is the alternative.  I'm going to change it to this, unless I
hear some screams.

    MM> good idea in any case!  [but most users don't memorize (and
    MM> hence use) prefix sequences; yes, I do ..]

I like them, too...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@biostat.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

CFAR:   M/F: 206-731-3647 (fax=3694) | Email is far better than phone
FHCRC: Tu/W: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
UW:      Th: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Sep  4 18:16:43 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 4 Sep 2000 10:16:43 -0700 (PDT)
Subject: [Rd] R INSTALL *.tgz fails (minor docs/feature bug) (PR#652)
In-Reply-To: <200009022058.WAA19068@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0009041012110.6541-100000@atlas.biostat.washington.edu>

On Sat, 2 Sep 2000 bobbyo@speakeasy.org wrote:

> R Team,
> 
> 	I was attempting to install Lindsey's rmutil.tgz and other
> non-CRAN packages using 'R INSTALL', for example 'R INSTALL rmutil.tgz'
> after downloading 'rmutil.tgz' from Lindsey's page (as linked from
> r-project.org page).
> 
> 	Directly using the compressed file as 'R INSTALL rmutil.tgz'
> failed, though the shell help from 'R INSTALL --help' implied this would
> work.
> 
> 	However, when I simply renamed using 'mv rmutil.tgz rmutil' and
> then ran 'R INSTALL rmutil', that worked.
> 
> 	Adding a note to rename the .tgz files without the .tgz
> extension, or changing R INSTALL to allow filename extensions when
> installing would be a nice ease-of-use feature.
> 
> 	(by the way, I was able to use R INSTALL rmutil if I unpacked
> rmutil using 'cat rmutil.tgz | tar xvz' and then ran 'R INSTALL rmutil'.)


R INSTALL is somewhat fussy about package format when used on compressed
files. I don't think Jim Lindsey's packages have ever installed without
uncompressing first. I have had the same thing happen with local packages
of functions I've created for convenience.

Fortunately it's fairly painless to uncompress them.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Mon Sep  4 18:43:53 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 4 Sep 2000 13:43:53 -0400 (EDT)
Subject: [Rd] R INSTALL *.tgz fails (minor docs/feature bug) (PR#652)
In-Reply-To: <Pine.GSO.4.21.0009041012110.6541-100000@atlas.biostat.washington.edu>
 (message from Thomas Lumley on Mon, 4 Sep 2000 10:16:43 -0700 (PDT))
Message-ID: <200009041743.NAA07492@jessie.research.bell-labs.com>



I believe the problem with this is that the R INSTALL expects version
information in the name of the .tar.gz or .tgz file.
So something like
   rmutil_1.0.tgz 
and 
   R CMD INSTALL rmutil_1.0.tgz
avoids that particular problem.
(Specifically, it computes the package name by removing everything
after the first _ in the name of the file.)

It took me a while to find out what was happening some months ago so I
thought I'd save others that hassle.


  D.

> Date: Mon, 4 Sep 2000 10:16:43 -0700 (PDT)
> From: Thomas Lumley <thomas@biostat.washington.edu>
> cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Sender: owner-r-devel@stat.math.ethz.ch
> Precedence: bulk
> 
> On Sat, 2 Sep 2000 bobbyo@speakeasy.org wrote:
> 
> > R Team,
> > 
> > 	I was attempting to install Lindsey's rmutil.tgz and other
> > non-CRAN packages using 'R INSTALL', for example 'R INSTALL rmutil.tgz'
> > after downloading 'rmutil.tgz' from Lindsey's page (as linked from
> > r-project.org page).
> > 
> > 	Directly using the compressed file as 'R INSTALL rmutil.tgz'
> > failed, though the shell help from 'R INSTALL --help' implied this would
> > work.
> > 
> > 	However, when I simply renamed using 'mv rmutil.tgz rmutil' and
> > then ran 'R INSTALL rmutil', that worked.
> > 
> > 	Adding a note to rename the .tgz files without the .tgz
> > extension, or changing R INSTALL to allow filename extensions when
> > installing would be a nice ease-of-use feature.
> > 
> > 	(by the way, I was able to use R INSTALL rmutil if I unpacked
> > rmutil using 'cat rmutil.tgz | tar xvz' and then ran 'R INSTALL rmutil'.)
> 
> 
> R INSTALL is somewhat fussy about package format when used on compressed
> files. I don't think Jim Lindsey's packages have ever installed without
> uncompressing first. I have had the same thing happen with local packages
> of functions I've created for convenience.
> 
> Fortunately it's fairly painless to uncompress them.
> 
> 	-thomas
> 
> Thomas Lumley
> Assistant Professor, Biostatistics
> University of Washington, Seattle
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Sep  4 22:53:14 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 04 Sep 2000 16:53:14 -0500
Subject: [Rd] bug in spline()? (PR#653)
In-Reply-To: imsw@holyrood.ed.ac.uk's message of "Mon, 4 Sep 2000 13:29:08 +0200 (MET DST)"
References: <200009041129.NAA28115@pubhealth.ku.dk>
Message-ID: <6ritsb7rjp.fsf@franz.stat.wisc.edu>

imsw@holyrood.ed.ac.uk writes:

> BUG IN SPLINE()?
> 
> Version R-1.0.1, system i486,linux
> 
> If the spline(x,y,method="natural") function is given values outside the
> range of the data, it does not give a warning. Moreover, the extrapolated
> value reported is not the ordinate of the natural spline defined by (x,y).
> 
> Example.  Let x <- c(2,5,8,10) and y <- c(1.2266,-1.7606,-0.5051,1.0390).
> Then interpolate/extrapolate with a natural cubic spline at 1:10 using
> either
> 
> spline(x,y,n=10,method="natural",xmin=1,xmax=10)
> 
> or
> 
> fn <- splinefun(x,y,method="natural")
> fn(1:10)
> 
> This gives c(2.5366,1.2266,-0.0834,...,1.0390). I agree with all values
> except that at x=1. The interpolation formula in Green and Silverman's
> book on splines gives the derivative of a natural spline at the first
> knot as f'(x1)=(f2-f1)/(x2-x1) -(1/6)(x2-x1)d, where d=second derivative
> at the second knot. For the above example, d=0.7071, f'(x1)=-1.3493,
> and the natural spline interpolant has value 1.2266-(-1.3493)=2.5759
> at x=1, not 2.5366.

I think the `interpSpline' function in the splines package gives the
desired natural interpolation spline.  Perhaps we should change the
underlying code for the spline function.

 > library(splines)
 > x <- c(2,5,8,10)
 > y <- c(1.2266,-1.7606,-0.5051,1.0390)
 > ns1 <- interpSpline(y ~ x)
 > plot(ns1)   # gives a plot that looks reasonable
 > points(x,y)
 > predict(ns1, 1:10)
 $x
  [1]  1  2  3  4  5  6  7  8  9 10

 $y
  [1]  2.5758923  1.2266000 -0.0834080 -1.1577100 -1.7606000 -1.7349409
  [7] -1.2378717 -0.5051000  0.2669514  1.0390000

 attr(,"class")
 [1] "xyVector"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From patrick.lindsey@luc.ac.be  Tue Sep  5 20:45:40 2000
From: patrick.lindsey@luc.ac.be (Patrick Lindsey)
Date: Tue, 5 Sep 2000 21:45:40 +0200 (MET DST)
Subject: [Rd] R crash when loading libraries.
Message-ID: <200009051945.VAA17252@alpha.luc.ac.be>

Hi everyone,
I am trying to install R on my new PIII 750Mhz under RedHat6.2
I get the following crash when I try and load any library.
I suspect this has started after I installed the BLAS and LAPACK libraries.
These two libraries where installed using the RPM manager under GNOME.
Here is the crash and read-out from gdb.
Hope that someone can understand what is going on.
Thank you,
Patrick.

---------------------------------
R : Copyright 2000, The R Development Core Team
Version 1.1.1  (August 15, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

> library(eda)
Segmentation fault (core dumped)
201/usr/local/src/R-1.1.1/bin>gdb R.bin core
GNU gdb 19991004
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-redhat-linux"...
Core was generated by `/usr/local/src/R-1.1.1/bin/R.bin'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /usr/lib/libreadline.so.3...done.
Reading symbols from /usr/lib/libz.so.1...done.
Reading symbols from /lib/libdl.so.2...done.
Reading symbols from /usr/lib/libncurses.so.4...done.
Reading symbols from /lib/libm.so.6...done.
Reading symbols from /usr/lib/libblas.so.2...done.
Reading symbols from /lib/libc.so.6...done.
Reading symbols from /lib/libtermcap.so.2...done.
Reading symbols from /lib/ld-linux.so.2...done.
Reading symbols from /usr/local/src/R-1.1.1/bin/R_X11.so...done.
Reading symbols from /usr/X11R6/lib/libSM.so.6...done.
Reading symbols from /usr/X11R6/lib/libICE.so.6...done.
Reading symbols from /usr/X11R6/lib/libX11.so.6...done.
Reading symbols from /usr/lib/libjpeg.so.62...done.
Reading symbols from /usr/lib/libpng.so.2...done.
Reading symbols from /usr/lib/gconv/ISO8859-1.so...done.
Reading symbols from /usr/local/src/R-1.1.1/library/eda/libs/eda.so...done.
#0  0x40009634 in _dl_relocate_object (l=0x81e73b0, scope=0x81e75b4, lazy=0, consider_profiling=0) at ../sysdeps/i386/dl-machine.h:326
326	../sysdeps/i386/dl-machine.h: No such file or directory.
(gdb) quit

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Sep  5 21:53:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Sep 2000 22:53:37 +0200
Subject: [Rd] R crash when loading libraries.
In-Reply-To: Patrick Lindsey's message of "Tue, 5 Sep 2000 21:45:40 +0200 (MET DST)"
References: <200009051945.VAA17252@alpha.luc.ac.be>
Message-ID: <x27l8qk1bi.fsf@blueberry.kubism.ku.dk>

Patrick Lindsey <patrick.lindsey@luc.ac.be> writes:

> Hi everyone,
> I am trying to install R on my new PIII 750Mhz under RedHat6.2
> I get the following crash when I try and load any library.
> I suspect this has started after I installed the BLAS and LAPACK libraries.
> These two libraries where installed using the RPM manager under GNOME.
> Here is the crash and read-out from gdb.
> Hope that someone can understand what is going on.
> Thank you,
> Patrick.

There is a (by now) well-known bug with the standard RedHat toolchain
that makes it generate corrupt .so files. Normally, that affects only
a couple of packages (akima for one) but adding BLAS could be tickling
the bug in new places...

Martyn Plummer reported this to RedHat, but they've done nothing about
it yet (bugzilla report 13490).

Try upgrading your gcc to a recent one, either by compiling it up from
sources (fairly easy but takes quite a bit of space on your disk) or
installing RPM packages from the rawhide distribution. Notice that you
may get some trouble using the latter procedure since all the
egcs-something packages are now gcc-something, so you cannot just
update. gcc 2.95.1 does work for me in some cases where the egcs
compiler fails.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed Sep  6 08:04:10 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 6 Sep 2000 09:04:10 +0200 (MET DST)
Subject: [Rd] reusing external functions across libs
Message-ID: <Pine.OSF.4.21.0009060818570.2418-100000@zidsrv.sci.uni-klu.ac.at>


Hi,

I am searching for a way to solve the following problem:

I want to use an external function, defined in a dyn.load()ed shared
object, in another dyn.load()ed shared object.

Currently I have to take the sources (Fortran) from one libraries src/
directory and copy them into the src/ dir of the other library, resulting
in two copies of this function. This is bad for maintanance and maybe
also for runtime behaviour because of side effects I'm not aware off (one 
symbol could be loaded twice). It would be nice if I could call the
function directly from C/Fortran, after dyn.load()ing both libraries.
But unfortunately this seems to depend very crucially on the
specific OS.

An example (C/Fortran mix, but I tried also C/C and Fortran/Fortran):
**** so1.c *******************
#include <R.h>
void func1(double* a, int* n){
printf("in func1\n");
F77_SYMBOL(func2)(a,n);
printf("back in func1\n");
}
******************************
gcc -g -fpic -c so1.c -I/usr/local/lib/R/include
ld -shared so1.o -o so1.so

**** so2.f *******************
        subroutine func2(a,n)
        real*8 a(*)
        integer n

        integer i
        call intpr("in func2",8,0,0)
        do 10 i=1,n
          a(i)=2.0d0 * a(i)
 10     continue
        return
        end
******************************
g77 -g -fpic -c so2.f
ld -shared so2.o -o so2.so

on the Alpha (R 1.1.0 on alpha-dec-osf4.0) it works without problems:
> dyn.load("so2.so")
> dyn.load("so1.so")
> .C("func1",as.double(c(1,2,3)),as.integer(3))
in func1
in func2
 [1]
back in func1
[[1]]
[1] 2 4 6

[[2]]
[1] 3

on Linux (R 1.1.1, SuSE 6.4) it works not:
> dyn.load("so2.so")
> dyn.load("so1.so")
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library
"/home/users/agebhard/R-test/so1.so":
  /home/users/agebhard/R-test/so1.so: undefined symbol: func2_

or also not working:
> dyn.load("so2.so")  
> dyn.load("so1.so",now=F)
> .C("func1",as.double(c(1,2,3)),as.integer(3))
in func1
/usr/lib/R/bin/R.bin: error in loading shared
libraries: /home/users/agebhard/R-test/so1.so: undefined symbol: func2_



Is there any chance to get this working (may be by finding some magic
linker option, or using extra dyn.load() arguments in an apropriate way)?

Is there another way to share a common subset of C/Fortran functions in 
different R libraries? (at C/Fortran source code level. Of course I can
access functions from other librariues with .C()/.Fortran calls from R
source code level, that's not the problem)

Is the only solution to write a shared (or static) library, which will be
linked to both R libraries?


Thanks in advance for any hints.

Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed Sep  6 08:54:03 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 6 Sep 2000 09:54:03 +0200 (MET DST)
Subject: [Rd] reusing external functions across libs
Message-ID: <Pine.OSF.4.21.0009060951010.3489-100000@zidsrv.sci.uni-klu.ac.at>


On Wed, 6 Sep 2000, Albrecht Gebhardt wrote:

> 
> Hi,
> 
> I am searching for a way to solve the following problem:
> 
> I want to use an external function, defined in a dyn.load()ed shared
> object, in another dyn.load()ed shared object.
> 
> Currently I have to take the sources (Fortran) from one libraries src/
> directory and copy them into the src/ dir of the other library, resulting
> in two copies of this function. This is bad for maintanance and maybe
> also for runtime behaviour because of side effects I'm not aware off (one 
> symbol could be loaded twice). It would be nice if I could call the
> function directly from C/Fortran, after dyn.load()ing both libraries.
> But unfortunately this seems to depend very crucially on the
> specific OS.
> 
> An example (C/Fortran mix, but I tried also C/C and Fortran/Fortran):
> **** so1.c *******************
> #include <R.h>
> void func1(double* a, int* n){
> printf("in func1\n");
> F77_SYMBOL(func2)(a,n);
> printf("back in func1\n");
> }
> ******************************
> gcc -g -fpic -c so1.c -I/usr/local/lib/R/include
> ld -shared so1.o -o so1.so
> 
> **** so2.f *******************
>         subroutine func2(a,n)
>         real*8 a(*)
>         integer n
> 
>         integer i
>         call intpr("in func2",8,0,0)
>         do 10 i=1,n
>           a(i)=2.0d0 * a(i)
>  10     continue
>         return
>         end
> ******************************
> g77 -g -fpic -c so2.f
> ld -shared so2.o -o so2.so
> 
> on the Alpha (R 1.1.0 on alpha-dec-osf4.0) it works without problems:
> > dyn.load("so2.so")
> > dyn.load("so1.so")
> > .C("func1",as.double(c(1,2,3)),as.integer(3))
> in func1
> in func2
>  [1]
> back in func1
> [[1]]
> [1] 2 4 6
> 
> [[2]]
> [1] 3
> 
> on Linux (R 1.1.1, SuSE 6.4) it works not:
> > dyn.load("so2.so")
> > dyn.load("so1.so")
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library
> "/home/users/agebhard/R-test/so1.so":
>   /home/users/agebhard/R-test/so1.so: undefined symbol: func2_
> 
> or also not working:
> > dyn.load("so2.so")  
> > dyn.load("so1.so",now=F)
> > .C("func1",as.double(c(1,2,3)),as.integer(3))
> in func1
> /usr/lib/R/bin/R.bin: error in loading shared
> libraries: /home/users/agebhard/R-test/so1.so: undefined symbol: func2_
> 
> 
> 
> Is there any chance to get this working (may be by finding some magic
> linker option, or using extra dyn.load() arguments in an apropriate way)?
> 
> Is there another way to share a common subset of C/Fortran functions in 
> different R libraries? (at C/Fortran source code level. Of course I can
> access functions from other librariues with .C()/.Fortran calls from R
> source code level, that's not the problem)
> 
> Is the only solution to write a shared (or static) library, which will be
> linked to both R libraries?
> 
> 


... well, I found (at least) one solution:

> dyn.load("so1.so",now=F)
> dyn.load("so2.so",local=F)
> .C("func1",as.double(c(1,2,3)),as.integer(3))
in func1
in func2
 [1]
back in func1
[[1]]
[1] 2 4 6

[[2]]
[1] 3

> 

but the question remains:

What is the best way to share common C/Fortran sources across R libraries?
How should I implement the above solution in the libraries? What are the
side effects? Is it really portable (win32?)? 

Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Sep  6 09:30:37 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 6 Sep 2000 09:30:37 +0100 (BST)
Subject: [Rd] reusing external functions across libs
In-Reply-To: <Pine.OSF.4.21.0009060951010.3489-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.05.10009060917140.10024-100000@auk.stats>

On Wed, 6 Sep 2000, Albrecht Gebhardt wrote:

> 
> ... well, I found (at least) one solution:
> 
> > dyn.load("so1.so",now=F)
> > dyn.load("so2.so",local=F)
> > .C("func1",as.double(c(1,2,3)),as.integer(3))
> in func1
> in func2
>  [1]
> back in func1
> [[1]]
> [1] 2 4 6
> 
> [[2]]
> [1] 3
> 
> > 
> 
> but the question remains:
> 
> What is the best way to share common C/Fortran sources across R libraries?
> How should I implement the above solution in the libraries? What are the
> side effects? Is it really portable (win32?)? 

It is not portable.  You will not even be able to make both shared
objects on some systems, including AIX and Windows, as they need to know
where the symbols are going to be satisfied.  And those flags (especially
local=F) do not always work (which is why this worked on OSF4, I think).

The best way that I know of is to put shared code in a shared library, and
link so?.so against that.  The only potential problem is putting the
common library somewhere it will be found at run time if it is a shared
library/DLL, so I would use a static library unless the code was large
(like all of LAPACK).  (This is particularly a problem on Windows,
where the rules for finding DLLs differ by Windows version.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed Sep  6 09:53:44 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 6 Sep 2000 10:53:44 +0200 (MET DST)
Subject: [Rd] reusing external functions across libs
In-Reply-To: <Pine.GSO.4.05.10009060917140.10024-100000@auk.stats>
Message-ID: <Pine.OSF.4.21.0009061046420.3920-100000@zidsrv.sci.uni-klu.ac.at>

On Wed, 6 Sep 2000, Prof Brian D Ripley wrote:

> On Wed, 6 Sep 2000, Albrecht Gebhardt wrote:
> 
> > 
> > ... well, I found (at least) one solution:
> > 
> > > dyn.load("so1.so",now=F)
> > > dyn.load("so2.so",local=F)
> > > .C("func1",as.double(c(1,2,3)),as.integer(3))
> > in func1
> > in func2
> >  [1]
> > back in func1
> > [[1]]
> > [1] 2 4 6
> > 
> > [[2]]
> > [1] 3
> > 
> > > 
> > 
> > but the question remains:
> > 
> > What is the best way to share common C/Fortran sources across R libraries?
> > How should I implement the above solution in the libraries? What are the
> > side effects? Is it really portable (win32?)? 
> 
> It is not portable.  You will not even be able to make both shared
> objects on some systems, including AIX and Windows, as they need to know
> where the symbols are going to be satisfied.  And those flags (especially
> local=F) do not always work (which is why this worked on OSF4, I think).
> 
> The best way that I know of is to put shared code in a shared library, and
> link so?.so against that.  The only potential problem is putting the
> common library somewhere it will be found at run time if it is a shared
> library/DLL, so I would use a static library unless the code was large
> (like all of LAPACK).  (This is particularly a problem on Windows,
> where the rules for finding DLLs differ by Windows version.)
> 

I expected something like this. Ok. Moving the functions to a static
library should not be a problem. 

But I guess now I have to add ./configure scripts and Makefiles to my
libraries. In lib1 to build the static lib (and to install it somewhere
into the library installation path) and in lib2 to find this location to
link against. It's not crucial during the development stage but at least
when it comes to distribute these libraries.

Are there any guidelines to do this?


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Wed Sep  6 14:44:00 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 06 Sep 2000 08:44:00 -0500
Subject: [Rd] reusing external functions across libs
References: <Pine.OSF.4.21.0009061046420.3920-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <qxplmx58wkf.fsf@verdi.stat.wisc.edu>

--=-=-=

>>>>> "Albrecht" == Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at> writes:

  Albrecht> But I guess now I have to add ./configure scripts and
  Albrecht> Makefiles to my libraries. In lib1 to build the static lib
  Albrecht> (and to install it somewhere into the library installation
  Albrecht> path) and in lib2 to find this location to link
  Albrecht> against. It's not crucial during the development stage but
  Albrecht> at least when it comes to distribute these libraries.

  Albrecht> Are there any guidelines to do this?

There is some information in the R Extensions manual. See the section
on congigure and cleanup.

We have faced a somewhat similar situation in a few projects. From our
experience the following scheme (due to Duncan Temple Lang) may
work. Note that we have tested this only on a few platforms. In
particular this (as it stands) possibly would not work on Windows.

Suppose you have two packages, package1 and package2. You want the
shared object file in package2 to depend on that of package1.

Install package1 as usual with R INSTALL package1. In package2, add a
configure script and a src/Makevars.in file. You may also want to add
a cleanup script.

Here are some example scripts. Remember to replace package1 and
package2 with appropriate names. You have to run autoconf to geneerate
the configure script for configure.in. Alos, these are modified
versions of existing scripts and I have not tested these modified versions.

Saikat
-- 
Department of Statistics                       Email: saikat@stat.wisc.edu
University of Wisconsin - Madison              Phone: (608) 263 5948
1210 West Dayton Street                        Fax:   (608) 262 0032
Madison, WI 53706-1685


--=-=-=
Content-Type: multipart/mixed; boundary="==-=-="

--==-=-=
Content-Disposition: attachment
Content-Description: Makevars.in

# package2/src/Makevars.in
# link package2.so against the package1.so. This is done by creating a
# libpackage1.so in the top level directory of package2.
PKG_LIBS=-L@TOP@ -lpackage1

--==-=-=
Content-Disposition: attachment
Content-Description: configure.in

# package2/configure.in

AC_INIT(src/package2.c)  # replace with appropriate source file in src

# Find the current directory - the toplevel directory for package2

TOP=`pwd`
AC_SUBST(TOP)

# find installation path for package1
# package1 has to be installed during installing package2

if test -z "${R_HOME}" ; then
 R_HOME=`R RHOME`
fi

if test -z "${R_HOME}" ; then
  echo "Cannot find the R distribution!"
  exit 1 
fi

echo 'cat(paste("PACKAGE1_LIBS=",system.file("libs", pkg="packag1"),"\n",sep=""), file="./Package1Libs")' | $R_HOME/bin/R --vanilla  

chmod +x Package1Libs

. ./Package1Libs

if test -z "${PACKAGE1_LIBS}" ; then
 echo "Cannot find the package1 library for R. Please install it,"
 echo "or set the environment R_LIBS so that it can be found in an R session."
 exit 1;
fi

echo "Computed PACKAGE1_LIBS: ${PACKAGE1_LIBS}"

AC_OUTPUT(src/Makevars)

if test ! -f libpackage1.so ; then
  ln -s $PACKAGE1_LIBS/package1.so libpackage1.so
fi

--==-=-=--

--=-=-=



--=-=-=--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Thu Sep  7 06:15:05 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Sep 2000 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200009070515.HAA22411@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 635 *
Subject: Multiple pages with postscript()
From: "Patrick Connolly" <P.Connolly@hort.cri.nz>
Date: Wed, 16 Aug 100 12:14:19 +1200 (NZST)
--par(lwd) reverts to one at page changes under the postscript() device
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 654 *
Subject: Dubious mail address
From: Peter Dalgaard BSA <pd@blueberry.kubism.ku.dk>
Date: Mon, 4 Sep 2000 14:10:30 +0200
* PR# 640 *
Subject: diff.default / diff.ts in wrong package bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 18:28:36 +0200 (CEST)
* PR# 639 *
Subject: symbols: xlim and ylim cannot be specified
From: Werner Stahel <stahel@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 15:54:08 +0200 (CEST)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
* PR# 641 *
Subject: 2 Bugs in na.omit.default()
From: =?iso-8859-1?Q?Jens_Oehlschl=E4gel?= <jens.oehlschlaegel@bbdo-interone.de>
Date: Wed, 23 Aug 2000 11:45:56 +0200
* PR# 644 *
Subject: crash using fisher.test on Windows; was [R] unexpected crash of R under 
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 25 Aug 2000 08:47:00 +0200
* PR# 643 *
Subject: Re: [R] too large alpha or beta in dbeta ?
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 24 Aug 2000 13:45:47 -0700 (PDT)
* PR# 646 *
Subject: under certain conditions, model.matrix appears to lack one column
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 27 Aug 2000 16:22:25 -0400 (EDT)
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 648 *
Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 28 Aug 2000 12:26:21 +0100 (BST)
* PR# 647 *
Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
* PR# 650 *
Subject: plot(x,y,axes=F)
From: kye@ams.sunysb.edu
Date: Thu, 31 Aug 2000 23:52:12 +0200 (MET DST)
* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
* PR# 652 *
Subject: R INSTALL *.tgz fails (minor docs/feature bug)
From: RPO <bobbyo@speakeasy.org>
Date: Sat, 2 Sep 2000 13:34:22 -0700 (PDT)
* PR# 651 *
Subject: =?big5?b?tsewZaWisdE=?= =?us-ascii?q?=3A_?= =?big5?b?tsewZabc?= mailhost.EFN.ORG; SMTP
From: Postmaster@sdm.com.tw
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Thu Sep  7 06:50:21 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Thu, 7 Sep 2000 16:50:21 +1100
Subject: [Rd] suggestion regarding help for `cat' and `paste'
Message-ID: <20000907165021.A4719@ftoomsh.progsoc.uts.edu.au>

The function `cat' should be listed in the see-also references in
the help for `paste' and vice versa since they perform very similar
tasks.

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep  7 09:17:48 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 7 Sep 2000 10:17:48 +0200 (CEST)
Subject: [Rd] asmode.integer()  -- RFC
Message-ID: <14775.20268.82086.175632@gargle.gargle.HOWL>

Many of us known that sometimes, e.g. in calls to .C(..), you want to
basically say
	  
	  x <- as.integer(x)

but you can't do that because as.vector() 
and it's descendants such as as.integer, as.double, as.character
drop all attributes.

Several months ago, someone proposed to use a new function
As.integer() instead.  
Since I just now again "stumbled" on it, I wondered if it might be worth to
define 

      asmode.integer   <- function(x) { mode(x) <- "integer"   ; x }
      asmode.double    <- function(x) { mode(x) <- "double"    ; x }
      asmode.character <- function(x) { mode(x) <- "character" ; x }

in order to encourage more shorter & more readable code...
or would you hate to see yet more functions doing `almost the same' as
others do?

[RFC = Request for comments]

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Thu Sep  7 11:00:23 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Thu, 07 Sep 2000 20:00:23 +1000
Subject: [Rd] asmode.integer()  -- RFC
Message-ID: <3.0.32.20000907200020.0129d5a0@pophost.nsw.cmis.csiro.au>

At 10:17 07/09/00 +0200, Martin Maechler wrote:
>Many of us known that sometimes, e.g. in calls to .C(..), you want to
>basically say
>	  
>	  x <- as.integer(x)
>
>but you can't do that because as.vector() 
>and it's descendants such as as.integer, as.double, as.character
>drop all attributes.
>
>Several months ago, someone proposed to use a new function
>As.integer() instead.  
>Since I just now again "stumbled" on it, I wondered if it might be worth to
>define 
>
>      asmode.integer   <- function(x) { mode(x) <- "integer"   ; x }
>      asmode.double    <- function(x) { mode(x) <- "double"    ; x }
>      asmode.character <- function(x) { mode(x) <- "character" ; x }

The idiom in "another place" is

storage.mode(x) <- "integer"
storage.mode(x) <- "double"  &c

my preference would again be for convergence of the two dialects.

(Of course when S4 takes over that other place, this sort of consideration
becomes much less relevant.)

Bill Venables.

>in order to encourage more shorter & more readable code...
>or would you hate to see yet more functions doing `almost the same' as
>others do?
>
>[RFC = Request for comments]
>
>Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
>Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
>ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
>phone: x-41-1-632-3408		fax: ...-1228			<><
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep  7 14:12:14 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 7 Sep 2000 15:12:14 +0200 (CEST)
Subject: [Rd] asmode.integer()  -- RFC
In-Reply-To: <3.0.32.20000907200020.0129d5a0@pophost.nsw.cmis.csiro.au>
References: <3.0.32.20000907200020.0129d5a0@pophost.nsw.cmis.csiro.au>
Message-ID: <14775.37934.715868.642549@gargle.gargle.HOWL>

>>>>> "Bill" == Bill Venables <Bill.Venables@cmis.csiro.au> writes:

    Bill> At 10:17 07/09/00 +0200, Martin Maechler wrote:
    >> Many of us known that sometimes, e.g. in calls to .C(..), you want to
    >> basically say
    >> 
    >> x <- as.integer(x)
    >> 
    >> but you can't do that because as.vector() 
    >> and it's descendants such as as.integer, as.double, as.character
    >> drop all attributes.
    >> 
    >> Several months ago, someone proposed to use a new function
    >> As.integer() instead.  
    >> Since I just now again "stumbled" on it, I wondered if it might be worth to
    >> define 
    >> 
    >> asmode.integer   <- function(x) { mode(x) <- "integer"   ; x }
    >> asmode.double    <- function(x) { mode(x) <- "double"    ; x }
    >> asmode.character <- function(x) { mode(x) <- "character" ; x }

    Bill> The idiom in "another place" is

    Bill>  storage.mode(x) <- "integer"
    Bill>  storage.mode(x) <- "double"  &c

I had this initially, but

    Bill> my preference would again be for convergence of the two dialects.
well, in R, "mode<-" and "storage.mode<-" are 100% equivalent.
in Splus 5.1, for the above case, they behave equivalently as well.
Hence, saving the extra  "storage." seemed feasible to me, and since I'm
occasionally fond of `minimal art' ......

I agree that "storage.mode" is more expressive...

    Bill> (Of course when S4 takes over that other place, this sort of
    Bill> consideration becomes much less relevant.)

(true, unfortunately)

    >> in order to encourage more shorter & more readable code...
    >> or would you hate to see yet more functions doing `almost the same' as
    >> others do?
    >> 
    >> [RFC = Request for comments]
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Sep  7 14:39:24 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 7 Sep 2000 14:39:24 +0100 (BST)
Subject: [Rd] asmode.integer()  -- RFC
Message-ID: <200009071339.OAA00693@toucan.stats.ox.ac.uk>

> From: Martin Maechler <maechler@stat.math.ethz.ch>
> Date: Thu, 7 Sep 2000 15:12:14 +0200 (CEST)

 
> >>>>> "Bill" == Bill Venables <Bill.Venables@cmis.csiro.au> writes:
> 
>     Bill> At 10:17 07/09/00 +0200, Martin Maechler wrote:
>     >> Many of us known that sometimes, e.g. in calls to .C(..), you want to
>     >> basically say
>     >> 
>     >> x <- as.integer(x)
>     >> 
>     >> but you can't do that because as.vector() 
>     >> and it's descendants such as as.integer, as.double, as.character
>     >> drop all attributes.
>     >> 
>     >> Several months ago, someone proposed to use a new function
>     >> As.integer() instead.  
>     >> Since I just now again "stumbled" on it, I wondered if it might be 
worth to
>     >> define 
>     >> 
>     >> asmode.integer   <- function(x) { mode(x) <- "integer"   ; x }
>     >> asmode.double    <- function(x) { mode(x) <- "double"    ; x }
>     >> asmode.character <- function(x) { mode(x) <- "character" ; x }
> 
>     Bill> The idiom in "another place" is
> 
>     Bill>  storage.mode(x) <- "integer"
>     Bill>  storage.mode(x) <- "double"  &c
> 
> I had this initially, but
> 
>     Bill> my preference would again be for convergence of the two dialects.

> well, in R, "mode<-" and "storage.mode<-" are 100% equivalent.

What the help page says is

     The two assignment versions are currently identical.
                                     ^^^^^^^^^

and I am not sure we want that to remain so, nor should we assume so.
I think R's use of all of mode and typeof and storage.mode is confusing,
especially as the first and third are diluted versions of the second.
(Without looking, how many of you know the exact differences?)


asmode.integer(x)  and (storage.mode(x) <- "integer"; x)  seem to be to
just be (in R) cumbersome ways to do

structure(as.integer(x), attributes(x))

> in Splus 5.1, for the above case, they behave equivalently as well.
> Hence, saving the extra  "storage." seemed feasible to me, and since I'm
> occasionally fond of `minimal art' ......
> 
> I agree that "storage.mode" is more expressive...
> 
>     Bill> (Of course when S4 takes over that other place, this sort of
>     Bill> consideration becomes much less relevant.)
> 
> (true, unfortunately)

Sooner than you might think.  What was announced as the last ever
release of a version of S-PLUS based on Svr3 was released a few days ago.
The future there is S-PLUS 6.x and Svr4 only.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep  7 17:32:59 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 7 Sep 2000 18:32:59 +0200 (CEST)
Subject: [Rd] Calloc() & Free() in different .C(.) calls --> not usable ?
Message-ID: <14775.49979.313017.584547@gargle.gargle.HOWL>

       [sending this to R-devel, since it may be of general interest and 
        could possibly lead to better instructions in the "R-exts" manual]

Is this another case where only .Call() or .External() [or a fudge factor]
solve my problem? 

Following situation: 
 I use dyn.loaded C code to compute a recursive tree structure from my data.
 Beforehand I don't know how big the tree will be, but I want the tree
 (as integer array in my case) be passed back to R.

 Current solution [simplified!]:

  
 ## First I fit the tree to my Data, all in C, but only return the *size*
 ## I'll need to store that tree in R

	 size <-      .C("fittree", data, ..., res = integer(1))$res

 ## Now that I know its size, I can get it into R :

	 tree.in.R <- .C("gettree", size, res = integer(size))$res

 where in the C code, I have a
 global 
	static *tree_struct my_tree;
 and in C's fittree(), I use 
	my_tree = Calloc(1, tree_struct); 
 for building the tree, which is 
 then accessed by gettree(), which ends in
	Free(my_tree);

All well, BUT: 
    problem is that memory just builds up and is not freed at all.

>From a (more private) E-mail of Prof Brian Ripley, I read (maybe wrongly?)
that this seems to be ``common'':

    BDR> and the way that most mallocs work is to use sbrk to raise or lower
    BDR> the brk, that is the size of the data space. 
    BDR> They only reduce it when the data space is sufficiently unfragmented. 
	 --------------------------------------------------------------------
which may be my case : "Free(my_tree)" doesn't really free the
memory [according to my tests, looking at Unix' "ps .."].

Solutions (yes, one of them is  ``use .Call() !'') ??

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Sep  7 18:00:13 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 7 Sep 2000 18:00:13 +0100 (BST)
Subject: [Rd] Calloc() & Free() in different .C(.) calls --> not usable ?
Message-ID: <200009071700.SAA01057@toucan.stats.ox.ac.uk>

> From: Martin Maechler <maechler@stat.math.ethz.ch>
> Date: Thu, 7 Sep 2000 18:32:59 +0200 (CEST)
> To: R-devel@stat.math.ethz.ch
> Subject: [Rd] Calloc() & Free() in different .C(.) calls --> not usable ?
> 
>        [sending this to R-devel, since it may be of general interest and 
>         could possibly lead to better instructions in the "R-exts" manual]
> 
> Is this another case where only .Call() or .External() [or a fudge factor]
> solve my problem? 
> 
> Following situation: 
>  I use dyn.loaded C code to compute a recursive tree structure from my data.
>  Beforehand I don't know how big the tree will be, but I want the tree
>  (as integer array in my case) be passed back to R.
> 
>  Current solution [simplified!]:
> 
>   
>  ## First I fit the tree to my Data, all in C, but only return the *size*
>  ## I'll need to store that tree in R
> 
> 	 size <-      .C("fittree", data, ..., res = integer(1))$res
> 
>  ## Now that I know its size, I can get it into R :
> 
> 	 tree.in.R <- .C("gettree", size, res = integer(size))$res
> 
>  where in the C code, I have a
>  global 
> 	static *tree_struct my_tree;
>  and in C's fittree(), I use 
> 	my_tree = Calloc(1, tree_struct); 
>  for building the tree, which is 
>  then accessed by gettree(), which ends in
> 	Free(my_tree);
> 
> All well, BUT: 
>     problem is that memory just builds up and is not freed at all.

My nnet code does that, as does the rpart code.  I have not seen any
problems with memory-build up with either in R, and have run both
repetitively, e.g. within two-level cross-validations running for
days.  Calloc and Free are just error-checking wrappers for calloc and
free, so what happens is down to those on your OS.

> >From a (more private) E-mail of Prof Brian Ripley, I read (maybe wrongly?)
> that this seems to be ``common'':
> 
>     BDR> and the way that most mallocs work is to use sbrk to raise or lower
>     BDR> the brk, that is the size of the data space. 
>     BDR> They only reduce it when the data space is sufficiently unfragmented. 
> 	 --------------------------------------------------------------------
> which may be my case : "Free(my_tree)" doesn't really free the
> memory [according to my tests, looking at Unix' "ps .."].

It frees the memory to malloc. There is no guarantee that malloc
returns it to the OS, but malloc should do so or re-use it.  I've just
monitored Solaris running R 1.1.1, and there is no evidence from ps/top that
ever returns any memory to the OS during these runs.  But it does not
build up more than 2Mb or so above R's usage at its first GC call, even
though it is being asked to allocate a few hundred Kb and deallocate it
many times.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jniesch@gwdg.de  Fri Sep  8 10:40:01 2000
From: jniesch@gwdg.de (jniesch@gwdg.de)
Date: Fri, 8 Sep 2000 11:40:01 +0200 (MET DST)
Subject: [Rd] Installing R from source ? (PR#655)
Message-ID: <200009080940.LAA09191@pubhealth.ku.dk>

Full_Name: Jens Nieschulze
Version: R-1.1.1
OS: sparc sun solaris 2.7
Submission from: (NULL) (134.76.192.150)


I tried to install R today and got the following at the first try

rbitmap.c:239: parse error before `jmp_buf'
rbitmap.c:239: warning: no semicolon at end of struct or union
rbitmap.c: In function `my_error_exit':
rbitmap.c:257: dereferencing pointer to incomplete type
rbitmap.c: In function `R_SaveAsJpeg':
rbitmap.c:279: storage size of `jerr' isn't known

after changing the source code (replacing the ';' with a ',' and adding some
','
of rbitmap.c in lines 239 and 240 it installed correctly.

cheers
	J.N.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep  8 11:22:44 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Sep 2000 12:22:44 +0200
Subject: [Rd] Installing R from source ? (PR#655)
In-Reply-To: jniesch@gwdg.de's message of "Fri, 8 Sep 2000 11:40:01 +0200 (MET DST)"
References: <200009080940.LAA09191@pubhealth.ku.dk>
Message-ID: <x2g0nb18uj.fsf@blueberry.kubism.ku.dk>

jniesch@gwdg.de writes:

> Full_Name: Jens Nieschulze
> Version: R-1.1.1
> OS: sparc sun solaris 2.7
> Submission from: (NULL) (134.76.192.150)
> 
> 
> I tried to install R today and got the following at the first try
> 
> rbitmap.c:239: parse error before `jmp_buf'
> rbitmap.c:239: warning: no semicolon at end of struct or union
> rbitmap.c: In function `my_error_exit':
> rbitmap.c:257: dereferencing pointer to incomplete type
> rbitmap.c: In function `R_SaveAsJpeg':
> rbitmap.c:279: storage size of `jerr' isn't known
> 
> after changing the source code (replacing the ';' with a ',' and adding some
> ','
> of rbitmap.c in lines 239 and 240 it installed correctly.
> 
> cheers
> 	J.N.

This would seem to happen if "struct jpeg_error_mgr" in l.238 is not
defined by jpeglib.h. I strongly doubt that fiddling with the code in
rbitmap.c is going to make it actually work (as opposed to compile and
install), so a cleaner approach would be to remove the

#define HAVE_JPEG 1

in src/include/config.h. Or update your jpeg library of course.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep  8 12:14:41 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 8 Sep 2000 13:14:41 +0200 (MET DST)
Subject: [Rd] Installing R from source ? (PR#655)
Message-ID: <200009081114.NAA10794@pubhealth.ku.dk>


> From: jniesch@gwdg.de
> Date: Fri, 8 Sep 2000 11:40:01 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Installing R from source ? (PR#655)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Jens Nieschulze
> Version: R-1.1.1
> OS: sparc sun solaris 2.7
> Submission from: (NULL) (134.76.192.150)
> 
> 
> I tried to install R today and got the following at the first try
> 
> rbitmap.c:239: parse error before `jmp_buf'
> rbitmap.c:239: warning: no semicolon at end of struct or union
> rbitmap.c: In function `my_error_exit':
> rbitmap.c:257: dereferencing pointer to incomplete type
> rbitmap.c: In function `R_SaveAsJpeg':
> rbitmap.c:279: storage size of `jerr' isn't known
> 
> after changing the source code (replacing the ';' with a ',' and adding some
> ','
> of rbitmap.c in lines 239 and 240 it installed correctly.

Ah, but it was correct before you altered its meaning.  What
the error message appears to say is that `jmp_buf' is not defined on
your system.  jmp_buf is defined on Solaris 2.7 in
/usr/include/setjmp.h, which should be included.

Do you have png installed?  I've run this assuming not and got similar
error messages. Solve them by adding

#include <setjmp.h>

at line 234 of rbitmap.c.  The png stuff includes setjmp.h.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep  8 12:37:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Sep 2000 13:37:55 +0200
Subject: [Rd] Installing R from source ? (PR#655)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Fri, 8 Sep 2000 13:14:41 +0200 (MET DST)"
References: <200009081114.NAA10794@pubhealth.ku.dk>
Message-ID: <x2bsxz15d8.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> > I tried to install R today and got the following at the first try
> > 
> > rbitmap.c:239: parse error before `jmp_buf'
> > rbitmap.c:239: warning: no semicolon at end of struct or union
> > rbitmap.c: In function `my_error_exit':
> > rbitmap.c:257: dereferencing pointer to incomplete type
> > rbitmap.c: In function `R_SaveAsJpeg':
> > rbitmap.c:279: storage size of `jerr' isn't known
> > 
> > after changing the source code (replacing the ';' with a ',' and adding some
> > ','
> > of rbitmap.c in lines 239 and 240 it installed correctly.
> 
> Ah, but it was correct before you altered its meaning.  What
> the error message appears to say is that `jmp_buf' is not defined on
> your system.  jmp_buf is defined on Solaris 2.7 in
> /usr/include/setjmp.h, which should be included.
> 
> Do you have png installed?  I've run this assuming not and got similar
> error messages. Solve them by adding
> 
> #include <setjmp.h>
> 
> at line 234 of rbitmap.c.  The png stuff includes setjmp.h.

Could well be a better diagnosis than what I suggested. Compiler
errors are often a word or two off relative to the actual location of
the problem. Easy thing to try, certainly. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep  8 21:44:37 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 08 Sep 2000 16:44:37 -0400
Subject: [Rd] 1.2 R CMD check
Message-ID: <39B94FB5.C84FB646@bank-banque-canada.ca>

I've taken a quick look at the 1.2 snapshot to see what is coming. Is it my
imagination or is it quite a bit faster?

I noticed that "R CMD check" now seems to do much more: install, check examples,
check dvi (&pdf?).  I think it is great to have this kind of comprehensive check
of a package, especially once everything in the package is suppose to be
working.

But when I am still in development mode I would also like to be able to run the
pieces separately so that development is faster, and I don't see how to do
that.  I can see how to set   --no-latex, but is there a way to avoid re-doing
install?  (BTW, the usage for check says "Finally, the package is installed into
the log directory" but I have the impression that the install is the first thing
that is done.) Or should I consider "R CMD check" as the thing to do first and
then somehow move the libraries installed in the *.Rcheck log directories into
$RHOME/library so that everything that depends on them gets the new version? Or
should I be somehow be setting things so that $RHOME/library is the  log
directory?

Thanks,
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep  8 22:29:52 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 8 Sep 2000 22:29:52 +0100 (BST)
Subject: [Rd] 1.2 R CMD check
In-Reply-To: <39B94FB5.C84FB646@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10009082219310.15387-100000@auk.stats>

On Fri, 8 Sep 2000, Paul Gilbert wrote:

> I've taken a quick look at the 1.2 snapshot to see what is coming. Is it my
> imagination or is it quite a bit faster?

On some machines and tasks, yes. It depends critically on the performance
of malloc we found, to the extent that on Windows we had to find another
malloc to avoid a massive slowdown.

> I noticed that "R CMD check" now seems to do much more: install, check examples,
> check dvi (&pdf?).  I think it is great to have this kind of comprehensive check
> of a package, especially once everything in the package is suppose to be
> working.

Most of the functionality of `build' has been moved to `check'.

> But when I am still in development mode I would also like to be able to run the
> pieces separately so that development is faster, and I don't see how to do
> that.  I can see how to set   --no-latex, but is there a way to avoid re-doing
> install?  (BTW, the usage for check says "Finally, the package is installed into
> the log directory" but I have the impression that the install is the first thing
> that is done.) Or should I consider "R CMD check" as the thing to do first and
> then somehow move the libraries installed in the *.Rcheck log directories into
> $RHOME/library so that everything that depends on them gets the new version? Or
> should I be somehow be setting things so that $RHOME/library is the  log
> directory?

It's not finished yet, you will notice from the perl code.  But yes, it
does do its own install as one of the things it is checking is that a
virgin install gets the results correct.  I just do an install into my
library directory of the version I intend to distribute after check and
build.  Nothing I have seen (not even nlme) takes anything like as long
to install as to check.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lej25@statslab.cam.ac.uk  Mon Sep 11 12:13:29 2000
From: lej25@statslab.cam.ac.uk (lej25@statslab.cam.ac.uk)
Date: Mon, 11 Sep 2000 13:13:29 +0200 (MET DST)
Subject: [Rd] .Random.seed resetting (PR#656)
Message-ID: <200009111113.NAA27130@pubhealth.ku.dk>

Full_Name: Lara Jamieson
Version: 1.1.1
OS: Linux
Submission from: (NULL) (131.111.20.203)


I've checked for other reports on this and can't find anything.  It seems that 
the .Random.seed isn't updated properly after using rm(.Random.seed).  Mu 
understanding from the help file indicates that a new 'random' seed will be
generated.
It appears that sometimes the old one is just reinstated.

I removed my .RData file and the problem remains.  It seems to happen when calls
are 
made in succession to the same 'random generation type' function; but appears to

work when different calls are made in succession.
An example is given below.  I was using the sample command when I found the
problem 
but it happens with runif as well...

> runif(1)
[1] 0.5551602
> runif(1)
[1] 0.2575637
> rm(.Random.seed)
> runif(1)
[1] 0.5551602
> rm(.Random.seed)
> rm(.Random.seed)
Warning message: 
remove: variable ".Random.seed" was not found 
> runif(1)
[1] 0.2575637

Thanks,
Lara

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Sep 11 14:10:24 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 11 Sep 2000 15:10:24 +0200 (MET DST)
Subject: [Rd] .Random.seed resetting (PR#656)
Message-ID: <200009111310.PAA29682@pubhealth.ku.dk>

>>>>> "lej25" == lej25  <lej25@statslab.cam.ac.uk> writes:

    lej25> Full_Name: Lara Jamieson Version: 1.1.1 OS: Linux Submission
    lej25> from: (NULL) (131.111.20.203)

    lej25> I've checked for other reports on this and can't find anything.
    lej25> It seems that the .Random.seed isn't updated properly after
    lej25> using rm(.Random.seed).  Mu understanding from the help file
    lej25> indicates that a new 'random' seed will be generated.  It
    lej25> appears that sometimes the old one is just reinstated.

    lej25> I removed my .RData file and the problem remains.  It seems to
    lej25> happen when calls are made in succession to the same 'random
    lej25> generation type' function; but appears to

    lej25> work when different calls are made in succession.  An example is
    lej25> given below.  I was using the sample command when I found the
    lej25> problem but it happens with runif as well...

    >> runif(1)
    lej25> [1] 0.5551602
    >> runif(1)
    lej25> [1] 0.2575637
    >> rm(.Random.seed) runif(1)
    lej25> [1] 0.5551602
    >> rm(.Random.seed) rm(.Random.seed)
    lej25> Warning message: remove: variable ".Random.seed" was not found
    >> runif(1)
    lej25> [1] 0.2575637


[I don't get your behavior]
Could it be that you have a .Random.seed further up in your search() path?
This would explain everything.

Try
    find(.Random.seed, where = TRUE)

which would show you the place where you had another copy if that was the
solution ...

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bv5ddma@mail.educities.edu.tw  Mon Sep 11 16:09:14 2000
From: bv5ddma@mail.educities.edu.tw (bv5ddma@mail.educities.edu.tw)
Date: Mon, 11 Sep 2000 17:09:14 +0200 (MET DST)
Subject: [Rd] Error on demo(tkttest)Version R.1.1.1 (PR#657)
Message-ID: <200009111509.RAA01541@pubhealth.ku.dk>

Dear Sir,
    I just installed the whole base system on my notebook with Window
98, but the demo(tktest) showed the following message:
demo(tkttest)


        demo(tkttest)
        ---- ~~~~~~~

Type  <Return>   to start :

> require(tcltk) || stop("tcltk support is absent")
Loading required package: tcltk
Error in firstlib(which.lib.loc, package) :
        TCL_LIBRARY is not set
Error in eval.with.vis(expr, envir, enclos) :
        tcltk support is absent

    Would you mind to tell me how to correct it!
    Thanks!

                                                Sincerely yours,
                                                Patrick Yuk-lun Ma M.D.
                                                 Radiation Oncologist
                                                Doctor of Hospice Team
                                                Chia-Yi Christian
Hospital
                                                Chia-Yi, Taiwan



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Sep 11 16:14:02 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 11 Sep 2000 08:14:02 -0700 (PDT)
Subject: [Rd] Error on demo(tkttest)Version R.1.1.1 (PR#657)
In-Reply-To: <200009111509.RAA01541@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0009110811510.16435-100000@atlas.biostat.washington.edu>

On Mon, 11 Sep 2000 bv5ddma@mail.educities.edu.tw wrote:

> Dear Sir,
>     I just installed the whole base system on my notebook with Window
> 98, but the demo(tktest) showed the following message:
> demo(tkttest)
> 

To use the tcltk library you need to install Tcl/Tk (from
http://dev.scriptics.com) and set the TCL_LIBRARY environment variable.  
This is described at the bottom of the readme.rw1011 file in the same
directory on CRAN that you downloaded R from.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


> 
>         demo(tkttest)
>         ---- ~~~~~~~
> 
> Type  <Return>   to start :
> 
> > require(tcltk) || stop("tcltk support is absent")
> Loading required package: tcltk
> Error in firstlib(which.lib.loc, package) :
>         TCL_LIBRARY is not set
> Error in eval.with.vis(expr, envir, enclos) :
>         tcltk support is absent
> 
>     Would you mind to tell me how to correct it!
>     Thanks!
> 
>                                                 Sincerely yours,
>                                                 Patrick Yuk-lun Ma M.D.
>                                                  Radiation Oncologist
>                                                 Doctor of Hospice Team
>                                                 Chia-Yi Christian
> Hospital
>                                                 Chia-Yi, Taiwan
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From y0004379@rzbcosv2.rz.tu-bs.de  Mon Sep 11 16:27:55 2000
From: y0004379@rzbcosv2.rz.tu-bs.de (Peter Malewski)
Date: Mon, 11 Sep 2000 17:27:55 +0200
Subject: [Rd] Error on demo(tkttest)Version R.1.1.1 (PR#657)
In-Reply-To: <200009111509.RAA01541@pubhealth.ku.dk>; from bv5ddma@mail.educities.edu.tw on Mon, Sep 11, 2000 at 05:09:14PM +0200
References: <200009111509.RAA01541@pubhealth.ku.dk>
Message-ID: <20000911172752.A28400@rzbcosv2.rz.tu-bs.de>

On Mon, Sep 11, 2000 at 05:09:14PM +0200, bv5ddma@mail.educities.edu.tw wrote:
> > require(tcltk) || stop("tcltk support is absent")
> Loading required package: tcltk
> Error in firstlib(which.lib.loc, package) :
>         TCL_LIBRARY is not set
> Error in eval.with.vis(expr, envir, enclos) :
>         tcltk support is absent
> 
>     Would you mind to tell me how to correct it!
>     Thanks!

You have to install tk-libraries and set the appropiates paths. see the documentations. the tcltk packages is just an interface.

peter


----
P.Malewski, Maschplatz 8, 38114 Braunschweig, Tel.: 0531 500965, 
MH-Hannover: 0511 532 3194 / Fax: 0511 532 3190, 
P.Malewski@tu-bs.de, peter.malewski@gmx.de, malewski.peter@mh-hannover.de.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Mon Sep 11 17:40:54 2000
From: jago@mclink.it (Stefano Iacus)
Date: Mon, 11 Sep 2000 18:40:54 +0200
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
Message-ID: <a04330102b5e2b3c3454d@[159.149.74.61]>

Hy (I hope this is the right list).

1. Mac porting

I'm finishing the porting of R for Mac. I hope to finish it for the 
end of september. Thanks to the porting of  R 0.64 by Ross (that he 
gave me) I succeded in this porting. This is the current state:

Both R 1.1.1. and 1.2.0 works with minor modification to the original 
code. The Macintosh device has been updated to the new version of 
WASTE library that is Carbon-izable (for who knows MacOS, Carbon is a 
collections of libraries  that allow macintosh applications developed 
for pre-MacOS X to run under MacOS X with minor modification, MacOS X 
is beeing released in september).
There is  a lot of work to do in testing the 1.1.1 porting. The code 
I have modified is not all commented, so give me some times to fix 
this and I'll release the sources to who will ask for.
The porting runs only on PPC machines.
I  compiled 1.2 only to verify how much the changes are sensitive to 
new releases of the code. It seems to work without problems.

Is there anyone working on R porting for Mac at the moment?

Actually, I have problems on building the base package and packages 
in general and I just pick Win base package and adapt it, so the 
check I can do are not so accurate. Where can I find the proper 
documentation on building packages?
Makefiles on Mac are a problem for me at the moment, but I'll try to 
fix this also.



2. About the bug (?)

I've to remark one problem in the source code of PS and Xfig devices. 
When the device look for "afm" it is system dependent because slashes 
such "/" are used to search for fonts:

i.e. (in xfig, the same is for PS)

static int XFig_Open(DevDesc *dd, XFigDesc *pd)
{
     char buf[512];
     int i;

     for(i = 0; i < 5 ; i++) {
	sprintf(buf, "%s/afm/%s.%s", R_Home,             <--- HERE
		Family[pd->fontfamily].font[i].abbr,
		(i == 4) ? "afm" : Extension[pd->encoding]);


the slashes should be replaced by the FILESEP  definition.


Both devices fixed for FILESEP (and pictex as well) works on Mac.

Regards,

         Stefano



-- 
Stefano Maria Iacus
Dipartimento di Politica Economica ed Aziendale
Universita' di Milano
Via Conservatorio 7
20122 Milano
Tel: 02 760 74 462
Fax: 02 760 23 198
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lkavalieris@maths.otago.ac.nz  Wed Sep 13 02:40:46 2000
From: lkavalieris@maths.otago.ac.nz (lkavalieris@maths.otago.ac.nz)
Date: Wed, 13 Sep 2000 03:40:46 +0200 (MET DST)
Subject: [Rd] PR 640 (diff.default computes an incorrect starting time) (PR#658)
Message-ID: <200009130140.DAA15907@pubhealth.ku.dk>

diff.default computes an incorrect starting time for time series.

An error occurs in the arima0 procedure:

library(ts)
y <- ts(rnorm(24),freq=12)
x <- ts(rnorm(24),freq=12)
arima0(y,xreg=x,seasonal=list(order=c(0,1,0)))
Error in tsp<-(*tmp*, value = c(xtsp[1] + lag * differences * xtsp[3],
:
 invalid time series parameters specified

This can be traced to the following lines in arima0

class(x) <- NULL
diff(x,12,1)

The computation of the starting value of the differenced series in
diff.default is incorrect - replacing
             xtsp[1] + lag * differences * xtsp[3]
by

xtsp[1] + lag * differences / xtsp[3]

gives the correct starting time and the problem vanished in arima0.

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

_____________________________________

Laimonis Kavalieris
Maths and Stats
University of Otago
Dunedin
New Zealand





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Sep 14 15:31:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 14 Sep 2000 10:31:26 -0400
Subject: [Rd] classed
Message-ID: <39C0E13E.2710F02D@bank-banque-canada.ca>

For a long time now I've been using a function:

classed <- function (x, cls)
{
    class(x) <- cls
    x
}

as a utility at the end other functions to set the class of an object and return
the object. I've  noticed examples where others have been doing a similar thing
and I think it would be a useful addition to R base (unless there is already
something there to do this - it wouldn't be the first time I've missed
something). The function is useful not so much because it saves a line of code
in other functions, but because I think it encourages a cleaner, easier to read
style.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Sep 14 16:37:25 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 14 Sep 2000 10:37:25 -0500
Subject: [Rd] Projects
Message-ID: <6rk8cfkmru.fsf@franz.stat.wisc.edu>

I am teaching a graduate course on Statistical Computing this
semester.  A major part of the grade is determined by a project in
which a student or small group of students produce, test, and document
some software for statistics.  I will encourage those students who are
developing in S to package their software as an R package.

I would welcome suggestions of possible projects, especially projects
that come under the heading of "Useful facilities to be added to R".
Please keep in mind that the project must be completed by mid-December
and that not all the students have extensive experience programming in
S and C.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep 14 17:46:41 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 14 Sep 2000 18:46:41 +0200
Subject: [Rd] Projects
In-Reply-To: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
Message-ID: <14785.241.670605.528570@gargle.gargle.HOWL>


1) Design of Experiments :

 - S (even before "-plus" existed) has had functions like

   fac.design
   oa.design
   fractionate   etc  ["White book", chapter 5].

		 [also a set of pre-stored useful fractional designs
		  for (> 2)-leveled factors.]

  Some of these would look like ``student exercises'' to do.
  If you could have them work in an environment where S-plus was *not*
  installed, this would end up as "clean table" project 
  w/o problematic code copying...

 - One could also think of  code for SEQUENTIAL design
  [do a  2^{m-k} (= 8) initially; 
   do a  (fractionated) n1 x .. x n_N on the remaining N important factors,
   given the data for the first 8 experiments].

 - Or "Taguchi" [- using (at least two) different kind of factors, some cheap,
		   some expensive to change
		 - multiple Y's, for some the "local" variance should be
		   minimized, etc etc
		 ]
	      
  This looks tedious and maybe can well be partitioned into different student
  projects.  Maybe JMC, AEF, RMH (authors of ch.5) or other experts can say
  much more here.

------

2) For Computer Scientists :
    "Differentiation" / Symbolic derivatives,..

   Improve the possibilities of  D() and deriv(), and document them.
   Make these user-extensible.

   Think about the hessian in addition to the gradient.

  

--------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Sep 14 17:52:48 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 14 Sep 2000 09:52:48 -0700
Subject: [Rd] Projects
In-Reply-To: <14785.241.670605.528570@gargle.gargle.HOWL>
 (Martin Maechler's message of "Thu, 14 Sep 2000 18:46:41 +0200")
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
Message-ID: <873dj2ncf3.fsf@jeeves.blindglobe.net>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:


    MM> 2) For Computer Scientists : "Differentiation" / Symbolic
    MM> derivatives,..

    MM>    Improve the possibilities of D() and deriv(), and document
    MM> them.  Make these user-extensible.

    MM>    Think about the hessian in addition to the gradient.

Even automating/specifications for numerical derivatives would be
nice. 


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Sep 14 18:16:42 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Sep 2000 19:16:42 +0200
Subject: [Rd] Projects
In-Reply-To: Douglas Bates's message of "14 Sep 2000 10:37:25 -0500"
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
Message-ID: <x2og1qzyf9.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> I am teaching a graduate course on Statistical Computing this
> semester.  A major part of the grade is determined by a project in
> which a student or small group of students produce, test, and document
> some software for statistics.  I will encourage those students who are
> developing in S to package their software as an R package.
> 
> I would welcome suggestions of possible projects, especially projects
> that come under the heading of "Useful facilities to be added to R".
> Please keep in mind that the project must be completed by mid-December
> and that not all the students have extensive experience programming in
> S and C.

These are probably too hard and too narrow, but now the topic is up:

- getting predictions to work on new data in cases where model depends
  on data set (notably regressions splines with auto knot placement)

- in lme, we can predict at level K would be nice to get SE of
  prediction (this also takes levels, extending distinction between
  confidence and tolerance intervals) 

- conditional tolerance in lme (much too hard I suspect)

- in model.tables.aov, SE's for type="means" are sorely missed.

This is not very hard, but maybe too small (although one will have to
study issues of contrasts and internals of an lm object rather
carefully):

- extend pairwise.t.test to take a linear model and a factor in the
  model as argument. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Sep 14 18:27:43 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 14 Sep 2000 12:27:43 -0500
Subject: [Rd] Projects
In-Reply-To: rossini@blindglobe.net's message of "14 Sep 2000 09:52:48 -0700"
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu> <14785.241.670605.528570@gargle.gargle.HOWL> <873dj2ncf3.fsf@jeeves.blindglobe.net>
Message-ID: <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>

>>>>> "AJR" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
  MM> 2) For Computer Scientists : "Differentiation" / Symbolic
  MM> derivatives,..

  MM> Improve the possibilities of D() and deriv(), and document them.
  MM> Make these user-extensible.

  MM> Think about the hessian in addition to the gradient.

  AJR> Even automating/specifications for numerical derivatives would
  AJR> be nice.

The nls package has a function called numericDeriv - with a little
modification it could be used elsewhere. An earlier version of the
underlying C code is used as an example in the R Extensions manual.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Sep 14 18:43:05 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 14 Sep 2000 10:43:05 -0700
Subject: [Rd] Projects
In-Reply-To: <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
 (Saikat DebRoy's message of "14 Sep 2000 12:27:43 -0500")
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
 <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
Message-ID: <87og1qlviu.fsf@jeeves.blindglobe.net>

>>>>> "SD" == Saikat DebRoy <saikat@stat.wisc.edu> writes:


>>>>> "AJR" == A J Rossini <rossini@blindglobe.net> writes:
>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
    MM> 2) For Computer Scientists : "Differentiation" / Symbolic
    MM> derivatives,..

    MM> Improve the possibilities of D() and deriv(), and document
    MM> them.  Make these user-extensible.

    MM> Think about the hessian in addition to the gradient.

    AJR> Even automating/specifications for numerical derivatives
    AJR> would be nice.

    SD> The nls package has a function called numericDeriv - with a
    SD> little modification it could be used elsewhere. An earlier
    SD> version of the underlying C code is used as an example in the
    SD> R Extensions manual.

Right, and it would be nice (necessary?) for testing and verification
of the "symbolic" side of the package as well as for "drop-in" or
"change a parameter" design functionality.  As well as being a
starting point for the interface for the symbolicDeriv package.

best,
-tony


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Fri Sep 15 00:31:11 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Fri, 15 Sep 2000 09:31:11 +1000
Subject: [Rd] classed
Message-ID: <3.0.32.20000915093110.012a4c70@pophost.nsw.cmis.csiro.au>

At 10:31 14/09/00 -0400, Paul Gilbert wrote:
>For a long time now I've been using a function:
>
>classed <- function (x, cls)
>{
>    class(x) <- cls
>    x
>}
>
>as a utility at the end other functions to set the class of an object and
return
>the object. I've  noticed examples where others have been doing a similar
thing
>and I think it would be a useful addition to R base (unless there is already
>something there to do this - it wouldn't be the first time I've missed
>something). The function is useful not so much because it saves a line of
code
>in other functions, but because I think it encourages a cleaner, easier to
read
>style.

In a sense it is there already as structure()

classed(x, "foo")

has exactly the same effect (in R and S3) as

structure(x, class = "foo")

but structure() is more general allowing several attributes to be set at
once via additional arguments (though all have to be named).

I should point out, though, that there is a danger in going this way
entirely if there is any intention of porting the code to S4 because in S4
the class of an object is NOT an attribute.  Once you get into the swing of
using structure() in this way it can become habitual and then going through
your code to find all the instances where you have set a class attribute
this way and changing it for S4 can be quite tedious.

Bill Venables.


>
>Paul Gilbert
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Sep 15 03:15:52 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri, 15 Sep 2000 02:15:52 GMT
Subject: [Rd] Projects
In-Reply-To: <87og1qlviu.fsf@jeeves.blindglobe.net>
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu> <14785.241.670605.528570@gargle.gargle.HOWL> <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu> <87og1qlviu.fsf@jeeves.blindglobe.net>
Message-ID: <39c38587.1708646@julian.uwo.ca>

On 14 Sep 2000 10:43:05 -0700, you wrote:

>Right, and it would be nice (necessary?) for testing and verification
>of the "symbolic" side of the package as well as for "drop-in" or
>"change a parameter" design functionality.  As well as being a
>starting point for the interface for the symbolicDeriv package.

I'm not sure if this is what Tony has in mind, but something I always
do when working with optimizers that take a supplied derivative is to
write a little numerical derivative routine to check that my calculus
and programming were done correctly.  Putting that into a single
function which took arguments just like the ones you pass to the
optimizer would be very convenient.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Fri Sep 15 03:18:24 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Fri, 15 Sep 2000 12:18:24 +1000
Subject: [Rd] Projects
Message-ID: <3.0.32.20000915121819.012af4d0@pophost.nsw.cmis.csiro.au>

At 18:46 14/09/00 +0200, Martin Maechler wrote:
>
>1) Design of Experiments :
>
> - S (even before "-plus" existed) has had functions like
>
>   fac.design
>   oa.design
>   fractionate   etc  ["White book", chapter 5].
>
>		 [also a set of pre-stored useful fractional designs
>		  for (> 2)-leveled factors.]

The drawback with this project, worthy as it is, is that if you are not
really on top of experimental design the computations can be surprisingly
tricky.

On the quiet I have just released a miniscule library for R, conf.design,
that might make a good first step, though.  It generates confounded
symmetrical designs for the p^n case.  You tell it which contrasts you are
prepared to sacrifice across blocks and it generates the design that will
do it.  It also has things to generate "pseudo-factors", that is if you
have a composite number of levels for your real factor it will generate a
number of factors each with a prime number of levels which together are
equivalent to yours.  In this way you can partially extend the thing to the
non-prime case, but not very far.  There is a really interesting
programming exercise in this waiting to be done here, I have to say, but
the trickiness should not be under-estimated.

I released it because I kept getting requests to do so, but it was done a
long time ago and it is not exactly tidy.  In particular the front end is
obscure and should be formula based rather than matrix based.  This would
make a nice little programming project for a wet weekend or so.

(conf.design also has a function, primes(), that is way overkill for the
sorts of things I need it for in this library, but it generates primes < N
using the classical sieve of eratosthenes in a pretty slick way.)

Another approach to this whole problem is to look for approximate designs
rather than insist on exact balance, orthogonality, or even absolutely
highest efficiency.  In the experimental design context (as opposed to,
say, coding theory) you never need anything but a reasonably good design,
anyway.  

There is some freely available software around for doing that, such as
"Dopt" a fortran program by Alan Miller and Nam Nguyen that was published
in Applied Statistics algorithms some time ago for constructing D-optimal
(or nearly so) experiments for a given simple block structure.  

I had a go at putting a front-end on this some time ago and I think the
result is still floating around StatLib, but the S code is c*o*m*p*l*e*x
and probably far too optimistic in what it sets out to do.  I have never
returned to it but again, this had a fair following for some time (maybe
even still) and would be a very useful thing to have for R.  I also have
some simulated annealing-type software that constructs near optimal block
and row-column designs but I left that problem alone 9 years ago and have
not thought much about it since.  It could be resurrected, though, if
anyone were interested.  This is written in C and has never had an S front
end.

Bill Venables.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Fri Sep 15 04:26:33 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 14 Sep 2000 20:26:33 -0700
Subject: [Rd] Projects
In-Reply-To: <39c38587.1708646@julian.uwo.ca>
 (Duncan Murdoch's message of "Fri, 15 Sep 2000 02:15:52 GMT")
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
 <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
 <87og1qlviu.fsf@jeeves.blindglobe.net> <39c38587.1708646@julian.uwo.ca>
Message-ID: <87n1ha1gk6.fsf@jeeves.blindglobe.net>

>>>>> "DM" == Duncan Murdoch <dmurdoch@pair.com> writes:


    DM> On 14 Sep 2000 10:43:05 -0700, you wrote:
    >> Right, and it would be nice (necessary?) for testing and
    >> verification of the "symbolic" side of the package as well as
    >> for "drop-in" or "change a parameter" design functionality.  As
    >> well as being a starting point for the interface for the
    >> symbolicDeriv package.

    DM> I'm not sure if this is what Tony has in mind, but something I
    DM> always do when working with optimizers that take a supplied
    DM> derivative is to write a little numerical derivative routine
    DM> to check that my calculus and programming were done correctly.
    DM> Putting that into a single function which took arguments just
    DM> like the ones you pass to the optimizer would be very
    DM> convenient.

That's exactly it.  (but perhaps have at least the 3 basic forms --
f(point + eps) - f(point), f(point + eps/2) - f(point - eps/2),
f(point) - f(point - eps)).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Fri Sep 15 05:00:52 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Fri, 15 Sep 2000 15:00:52 +1100
Subject: [Rd] classed
In-Reply-To: <39C0E13E.2710F02D@bank-banque-canada.ca>; from pgilbert@bank-banque-canada.ca on Thu, Sep 14, 2000 at 10:31:26AM -0400
References: <39C0E13E.2710F02D@bank-banque-canada.ca>
Message-ID: <20000915150052.B24267@ftoomsh.progsoc.uts.edu.au>

On Thu, Sep 14, 2000 at 10:31:26AM -0400, Paul Gilbert wrote:
> classed <- function (x, cls)
> {
>     class(x) <- cls
>     x
> }
[snip]
> The function is useful not so much because it saves a line of code
> in other functions, but because I think it encourages a cleaner, easier to read
> style.

Just to add my 2c, I don't believe it is cleaner to hide assignment
statements inside functions without some reasonably sensible reason to
do so. When I see something like:

	y <- wibble( x, "foo" );

I would expect `x' not to change. Now OK this isn't a watertight rule
(nothing ever is) but little functions containing hidden assignment
statements are usually confusing to a reader not already familiar
with the code.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Fri Sep 15 05:40:36 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Fri, 15 Sep 2000 15:40:36 +1100
Subject: [Rd] Projects (i.e. wishlist)
In-Reply-To: <14785.241.670605.528570@gargle.gargle.HOWL>; from maechler@stat.math.ethz.ch on Thu, Sep 14, 2000 at 06:46:41PM +0200
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu> <14785.241.670605.528570@gargle.gargle.HOWL>
Message-ID: <20000915154036.C24267@ftoomsh.progsoc.uts.edu.au>

On Thu, Sep 14, 2000 at 06:46:41PM +0200, Martin Maechler wrote:
> 2) For Computer Scientists :
>     "Differentiation" / Symbolic derivatives,..
> 
>    Improve the possibilities of  D() and deriv(), and document them.
>    Make these user-extensible.
> 
>    Think about the hessian in addition to the gradient.

Now that you mention it, I'd like this to work:

> X <- expression( x )
> X + 1
expression(x + 1)
> (X + 1) + 2
expression((x + 1) + 2)
> simplify(( X + 1 ) + 2 )
expression( x + 3 )
> simplify( expand(( X + 2 ) * ( X + 5 ) * ( X + 7 )))
expression(x^3 + 14 * x^2 + 59 * x + 70)
> factorise( X^3 + 14 * X^2 + 59 * X + 70 ))
expression((x + 2) * (x + 5) * (x + 7))


If the roots have small imaginary components due to round off,
that is still OK. If there is a good reason for the operations
to return objects of mode ``call'' rather than mode ``expression''
(like what D() does) that would be OK too, although I prefer
to work with the expression() wrappers on because then the printed
form is identical to what you type in. At any rate, the operations
have to handle objects of mode ``expression'', ``call'' and all the
numericals as their inputs.

And as many others as you get time to do plus a system for
categorising, organising, documenting and extending the available
manipulations...

... I'm sure this is all very useful for statistics, it would
be useful to me at any rate. 

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Fri Sep 15 05:21:29 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Fri, 15 Sep 2000 14:21:29 +1000
Subject: [Rd] classed
Message-ID: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au>

At 15:00 15/09/00 +1100, Telford Tendys wrote:
>On Thu, Sep 14, 2000 at 10:31:26AM -0400, Paul Gilbert wrote:
>> classed <- function (x, cls)
>> {
>>     class(x) <- cls
>>     x
>> }
>[snip]
>> The function is useful not so much because it saves a line of code
>> in other functions, but because I think it encourages a cleaner, easier
to read
>> style.
>
>Just to add my 2c, I don't believe it is cleaner to hide assignment
>statements inside functions without some reasonably sensible reason to
>do so. When I see something like:
>
>	y <- wibble( x, "foo" );
>
>I would expect `x' not to change. 

And nor does it.  What happens is that a new object is constructed from x,
with (in this case) extra bits and pieces tacked on and (here) that new
object is assigned the name y.

Writing a function to modify its argument is possible (e.g. fix() does it)
but not altogether straightforward, especially if you want it to work in
the most general case.

> Now OK this isn't a watertight rule
>(nothing ever is) but little functions containing hidden assignment
>statements are usually confusing to a reader not already familiar
>with the code.

If that was what was happening I would agree with you, but it isn't.  You
have been misled by the old function/macro thing.  What was presented was a
true function but you read it as if it were a macro.  

Bill V.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Fri Sep 15 06:58:09 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Fri, 15 Sep 2000 16:58:09 +1100
Subject: [Rd] classed
In-Reply-To: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au>; from Bill.Venables@cmis.csiro.au on Fri, Sep 15, 2000 at 02:21:29PM +1000
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au>
Message-ID: <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au>

On Fri, Sep 15, 2000 at 02:21:29PM +1000, Bill Venables wrote:
> And nor does it.  What happens is that a new object is constructed from x,
> with (in this case) extra bits and pieces tacked on and (here) that new
> object is assigned the name y.
> 
> Writing a function to modify its argument is possible (e.g. fix() does it)
> but not altogether straightforward, especially if you want it to work in
> the most general case.

Hmmm, OK now that I test it out you are quite correct. But that implies
that the whole object is copied because later modification of either the
original or the result do not propagate between x and y... unless R has
some sort of copy-on-write flag which I never noticed when wandering 
through the R source (a lot probably falls into that category).

If it doesn't use copy-on-write then the result will be additional
slowdown when all your data is copied again and again (I guess it depends
on how big the object is).

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From twoday@freeatlast.com  Fri Sep 15 09:44:07 2000
From: twoday@freeatlast.com (twoday@freeatlast.com)
Date: Fri, 15 Sep 2000 10:44:07 +0200 (MET DST)
Subject: [Rd] AD:Family Reunion T Shirts & More (PR#659)
Message-ID: <200009150844.KAA12494@pubhealth.ku.dk>

Message sent by:  Kuppler Graphics, 32 West Main Street, Maple 
Shade, New Jersey, 08052,
1-800-810-4330.   This list will NOT be sold.  All addresses 
are automatically added to our remove list.

Hello.  My name is Bill from Kuppler Graphics.  We do 
screenprinting on T Shirts, Sweatshirts,
Jackets, Hats, Tote Bags and more!

Do you or someone you know have a Family Reunion coming up?  
Kuppler Graphics would like to
provide you with some great looking T Shirts for your Reunion.

Kuppler Graphics can also provide you with custom T's and 
promotional items such as imprinted
magnets, keychains, pens, mugs, hats, etc. for your business or 
any fundraising activity
(church, school, business etc.) We also can provide you with 
quality embroidery. 

We are a family owned company with over 15 years of experience.  

All work is done at this location.  No middle man.  Our prices 
are great!

Please call toll free 1-800-810-4330 if the reply to email is 
down for a quote or to
discuss your screenprinting needs 

Bill
Kuppler Graphics
 
 
 
 
 
 
 
 
 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep 15 10:23:33 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 15 Sep 2000 11:23:33 +0200 (MET DST)
Subject: [Rd] identify.default ignores any setting of cex. (PR#660)
Message-ID: <200009150923.LAA13337@pubhealth.ku.dk>

R 1.1.1 on Windows, but I think this is widespread.

Using either

par(cex=0.5)
plot(1:10)
identify(1:10)

or

plot(1:10)
identify(1:10, cex=0.5)

ignores the cex setting.  The root cause is that par(cex=0.5)
alters cexbase for the device but sets cex=1.0, and the internal
text plotting routines use cex and not cexbase.

The obvious fix is to set cex to cexbase in do_identify. However,
if this is fixed, there is another problem, The offset of the label
is related to the cex in use for the label, and not for the symbol.
So

plot(1:10, type="n")
points(1:10, cex=5)
identify(1:10)

is not sensible in placing the labels.  That may be hard to anticipate,
but 

plot(1:10)
identify(1:10, cex=0.5)

needs to use cex=1 not cex=0.5 for the adjustment.  Perhaps identify is
trying too hard, and should give the user more control over the precise
position of the label (as S-PLUS does).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep 15 10:30:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Sep 2000 11:30:55 +0200
Subject: [Rd] AD:Family Reunion T Shirts & More (PR#659)
In-Reply-To: twoday@freeatlast.com's message of "Fri, 15 Sep 2000 10:44:07 +0200 (MET DST)"
References: <200009150844.KAA12494@pubhealth.ku.dk>
Message-ID: <x2hf7ivw6o.fsf@blueberry.kubism.ku.dk>

twoday@freeatlast.com writes:

> Message sent by:  Kuppler Graphics, 32 West Main Street, Maple 
> Shade, New Jersey, 08052,
<etc.>

Looks like Martins spamfilter needs to learn to catch the 'AD:' prefix
there....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Sep 15 13:31:48 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 15 Sep 2000 14:31:48 +0200
Subject: [Rd] NULL == NULL
Message-ID: <14786.5812.611071.633622@gargle.gargle.HOWL>

gives an error in R.

In both S+3 and S+5, it "works" by returning NULL or logical(0),
respectively.

As a consequence,

   all(x == y)

returns TRUE in Splus, when x <- y <- NULL
but gives an error in R.

Do we have a good reason *not* to return  logical(0) ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Sep 15 16:10:33 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 15 Sep 2000 17:10:33 +0200
Subject: [Rd] "==" for calls and expressions ??
In-Reply-To: <14786.5812.611071.633622@gargle.gargle.HOWL>
References: <14786.5812.611071.633622@gargle.gargle.HOWL>
Message-ID: <14786.15337.398835.357060@gargle.gargle.HOWL>

{following up myself on the     NULL == NULL   topic}

I found	that 
	 x == y
is allowed in R when x and y are (generalized) ``Vectors''
(accidentally, I'm quite sure !), which includes
lists and  expressions, but the result is pretty `funny' in some cases, e.g.

    > e3 <- expression(1,x,x^2)
    > e3 == expression(1,x,x^2)
    [1] FALSE  TRUE FALSE
    > e3 == e3 ## all TRUE..
    [1] TRUE TRUE TRUE

Note that it's not just "==", but all 6 relation operators ( "!=", "<", ...).

It's been quite easy for me to make R produce an error in these cases
{the same as for

  > cl <- quote(sin(x)) ; cl == cl
  Error in cl == cl : comparison (1) is possible only for vector types
}
But with that "make check" would fail
(we have at least on case in the examples where we test equality of two expr)
and it might be that people's R code already is doing these comparisons
with list()s and expression()s.

What should be done?

--
One possibility would be to make these work for call()s and expressions,
by using deparse(.) on the non-symbol calls
{symbol calls already *do* work -- and this is *not* accidental :

  > cl <- as.name("X"); cl == cl; cl > cl
  [1] TRUE
  [1] FALSE
}
and dealing with expressions as "vector of calls".
It is still less clear how list()s should be dealt with.

We really have the problem of differing 
backcompatibility to R and compatibility to S
(in S, these rel.ops only apply to atomic objects and NULL).

Opinions?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Sep 15 16:19:50 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 15 Sep 2000 17:19:50 +0200 (MET DST)
Subject: [Rd] PR 640 (diff.default computes an incorrect starting time) (PR#658)
Message-ID: <200009151519.RAA18995@pubhealth.ku.dk>

The reported bug in  diff.default()
has already been corrected for R 1.1.1

thank you anyway, ;-)

Martin Maechler


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Sep 15 16:24:46 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 15 Sep 2000 17:24:46 +0200 (MET DST)
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
Message-ID: <200009151524.RAA19061@pubhealth.ku.dk>


>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
    PD> maechler@stat.math.ethz.ch writes:
    >> One easy and "clean" fix is to put the following at the very
    >> beginning of diff.default :
    >> 
    >> if(is.ts(x)) { require(ts)
    >>                UseMethod("diff") }
    PD> ...
    >> The above passes "make check" (and more).
    >> 
    >> Anybody against this?

    PD> I'm not really pro or con, but what is wrong with autoloading
    PD> diff.ts??

    MM> it does not work, i.e.

    MM>    autload("diff.ts", "ts") diff(ts(1:10))

    MM> does not load package ts.  It's not so clear if this is a bug in
    MM> method dispatching ...  but assuming ``standard semantic'' (diff.ts
    MM> is in search() i.e. diff() should dispatch to it), it is one..

    MM> Shall I 1) commit my proposed change to "R-release-patches" (since
    MM> it fixes a bug in R 1.1.1) 2) submit a new bug report about the
    MM> non-dispatching to "Autoloads" objects ?

Just a report to the non-core audience and for the bug-archive:

Both of these have been resolved now for "R-devel" [R 1.2 unstable]

 i.  autoload("diff.ts", "ts")  now *does* work (thanks to Thomas Lumley)

 ii. the above autoload is now in the system profile and fixes the diff(.) bug.

--
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Sep 15 16:42:44 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 15 Sep 2000 08:42:44 -0700 (PDT)
Subject: [Rd] NULL == NULL
In-Reply-To: <14786.5812.611071.633622@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.21.0009150835420.26164-100000@atlas.biostat.washington.edu>

On Fri, 15 Sep 2000, Martin Maechler wrote:

> gives an error in R.
> 
> In both S+3 and S+5, it "works" by returning NULL or logical(0),
> respectively.
> 
> As a consequence,
> 
>    all(x == y)
> 
> returns TRUE in Splus, when x <- y <- NULL
> but gives an error in R.
> 
> Do we have a good reason *not* to return  logical(0) ?

I think returning logical(0) is a good idea. Having all(NULL==NULL) be
TRUE is consistent with what we do for vacuous cases of min and max. 

However, a arguable reason for not doing it is that NULL is actually a
list with no elements rather than a vector with no elements, and you can't
compare lists with ==. On the gripping hand, you can't turn NULL into a
vector of length zero using eg unlist(), so the only way to get this
comparison to work is to have NULL==NULL.

	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 15 16:53:04 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Sep 2000 11:53:04 -0400
Subject: [Rd] classed
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au>
Message-ID: <39C245E0.A2B36FA6@bank-banque-canada.ca>

>> classed <- function (x, cls)
>> {
>>     class(x) <- cls
>>     x
>> }

>If it doesn't use copy-on-write then the result will be additional
>slowdown when all your data is copied again and again (I guess it depends
>on how big the object is).

I've often wondered about this. Any comments from someone who really knows the
internals of R? When I first implemented it I did some testing and didn't notice
any really big slowdown and I do use a lot of fairly big (multi MB size)
objects. But notice that the difference is really in the function call, not in
the copying of objects. A function using classed would end

  classed(x, "whatever") }

rather than

 class(x) <- "whatever"
 x}

I think the copy is (or is not) made in both cases.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 15 17:34:49 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Sep 2000 12:34:49 -0400
Subject: [Rd] Projects
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
 <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
 <87og1qlviu.fsf@jeeves.blindglobe.net> <39c38587.1708646@julian.uwo.ca> <87n1ha1gk6.fsf@jeeves.blindglobe.net>
Message-ID: <39C24FA8.4D681B01@bank-banque-canada.ca>

    DM> Putting that into a single function which took arguments just
    DM> like the ones you pass to the optimizer would be very
    DM> convenient.

>That's exactly it.  (but perhaps have at least the 3 basic forms --
>f(point + eps) - f(point), f(point + eps/2) - f(point - eps/2),
>f(point) - f(point - eps)).

Buried somewhere in one of my packages is code for doing Richardson
extrapolation, which usually gives a much better estimate than these 3 basic
forms. If this project goes ahead I will dig it out.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Fri Sep 15 17:58:25 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 15 Sep 2000 09:58:25 -0700
Subject: [Rd] Projects
In-Reply-To: <39C24FA8.4D681B01@bank-banque-canada.ca>
 (Paul Gilbert's message of "Fri, 15 Sep 2000 12:34:49 -0400")
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
 <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
 <87og1qlviu.fsf@jeeves.blindglobe.net> <39c38587.1708646@julian.uwo.ca>
 <87n1ha1gk6.fsf@jeeves.blindglobe.net>
 <39C24FA8.4D681B01@bank-banque-canada.ca>
Message-ID: <87wvgdbnim.fsf@jeeves.blindglobe.net>

(not to the list)

>>>>> "PG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    DM> Putting that into a single function which took arguments just
    DM> like the ones you pass to the optimizer would be very
    DM> convenient.

    >> That's exactly it.  (but perhaps have at least the 3 basic
    >> forms -- f(point + eps) - f(point), f(point + eps/2) - f(point
    >> - eps/2), f(point) - f(point - eps)).

    PG> Buried somewhere in one of my packages is code for doing
    PG> Richardson extrapolation, which usually gives a much better
    PG> estimate than these 3 basic forms. If this project goes ahead
    PG> I will dig it out.

That would be cool, and I believe there are other, more precise,
approaches!  BUT, I'm worried that this (_numerical_ derivatives),
might become a package unto itself (which gets amusing, especially if
you consider the many ways one might want to differentiate a
multi-array vector by a vector...).

All of a sudden, I'm starting to see 2 projects out of one, depending
on the scope.

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Sep 15 18:33:33 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 15 Sep 2000 10:33:33 -0700 (PDT)
Subject: [Rd] classed
In-Reply-To: <39C245E0.A2B36FA6@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.21.0009151018330.27057-100000@atlas.biostat.washington.edu>

On Fri, 15 Sep 2000, Paul Gilbert wrote:
> 
> I've often wondered about this. Any comments from someone who really knows the
> internals of R? When I first implemented it I did some testing and didn't notice
> any really big slowdown and I do use a lot of fairly big (multi MB size)
> objects. But notice that the difference is really in the function call, not in
> the copying of objects. A function using classed would end
> 
>   classed(x, "whatever") }
> 
> rather than
> 
>  class(x) <- "whatever"
>  x}
> 
> I think the copy is (or is not) made in both cases.
> 

Setting an attribute doesn't result in a copy, but setting one in a
function will: a reference to x is initially passed to the function, but
when the attribute is set a copy is made so that the local x rather than
the global one is modified.  I don't think another copy is made when
classed() returns, but I'm not sure. Using classed() makes at least one
more copy that using class()<-.

For interpreted "foo<-" functions this wouldn't be true -- the same
amount of copying would be done either way -- but class() is special.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Sep 15 18:47:28 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Sep 2000 12:47:28 -0500
Subject: [Rd] classed
In-Reply-To: Paul Gilbert's message of "Fri, 15 Sep 2000 11:53:04 -0400"
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au> <39C245E0.A2B36FA6@bank-banque-canada.ca>
Message-ID: <6rn1h9mtsf.fsf@franz.stat.wisc.edu>

I reached a similar conclusion to Thomas Lumley.  Here is the response
I wrote before I got a chance to read Thomas's response.

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> >If it doesn't use copy-on-write then the result will be additional
> >slowdown when all your data is copied again and again (I guess it depends
> >on how big the object is).
> 
> I've often wondered about this. Any comments from someone who really knows the
> internals of R? When I first implemented it I did some testing and didn't notice
> any really big slowdown and I do use a lot of fairly big (multi MB size)
> objects. But notice that the difference is really in the function call, not in
> the copying of objects. A function using classed would end
> 
>   classed(x, "whatever") }
> 
> rather than
> 
>  class(x) <- "whatever"
>  x}

Assignment functions like "class<-" are allowed to modify their first
argument in place.  That's the whole reason for using constructions
like foo[] <- bar, which is really a call to "[<-" with arguments foo
and bar, instead of foo <- bar.  It saves on copying.

An R function like classed(x, "cname") cannot modify its
arguments so it must return a copy.

I think the internal C code in src/main/attrib.c indicates that
do_classgets does not copy the first argument unless it happens to be
a named object.  (Does anyone know why a named object has to be copied?)

SEXP do_classgets(SEXP call, SEXP op, SEXP args, SEXP env)
{
    checkArity(op, args);
    if (NAMED(CAR(args)) == 2) SETCAR(args, duplicate(CAR(args)));
    if (length(CADR(args)) == 0) SETCADR(args, R_NilValue);
    setAttrib(CAR(args), R_ClassSymbol, CADR(args));
    return CAR(args);
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Sep 15 19:44:20 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 15 Sep 2000 20:44:20 +0200 (MET DST)
Subject: [Rd] .Random.seed resetting (PR#656)
Message-ID: <200009151844.UAA19859@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "lej25" == lej25  <lej25@statslab.cam.ac.uk> writes:
    lej25> Full_Name: Lara Jamieson Version: 1.1.1 OS: Linux Submission
    lej25> from: (NULL) (131.111.20.203)

    lej25> I've checked for other reports on this and can't find anything.
    lej25> It seems that the .Random.seed isn't updated properly after
    lej25> using rm(.Random.seed).  Mu understanding from the help file
    lej25> indicates that a new 'random' seed will be generated.  It
    lej25> appears that sometimes the old one is just reinstated.

    lej25> I removed my .RData file and the problem remains.  It seems to
    lej25> happen when calls are made in succession to the same 'random
    lej25> generation type' function; but appears to

    lej25> work when different calls are made in succession.  An example is
    lej25> given below.  I was using the sample command when I found the
    lej25> problem but it happens with runif as well...

    >>> runif(1)
    lej25> [1] 0.5551602
    >>> runif(1)
    lej25> [1] 0.2575637
    >>> rm(.Random.seed) runif(1)
    lej25> [1] 0.5551602
    >>> rm(.Random.seed) rm(.Random.seed)
    lej25> Warning message: remove: variable ".Random.seed" was not found
    >>> runif(1)
    lej25> [1] 0.2575637


    MM> [I don't get your behavior] Could it be that you have a
    MM> .Random.seed further up in your search() path?  This would explain
    MM> everything.

Well I *could* reproduce the bogous behavior in R 1.1.1, after all.

The problem is that .Random.seed is not only in .GlobalEnv, but also 
"Autoloads" :

R --vanilla

  > runif(1)
  [1] 0.4659391
  > find(".Random.seed")
  [1] ".GlobalEnv" "Autoloads" 
  > all.equal(.Random.seed, get(".Random.seed", envir = .AutoloadEnv))
  [1] TRUE

and hence, after rm(.Random.seed), runif(*) still gets the one from the
autoloads... 

This bug has just been fixed in R-devel
(by an expert, not me!), together with the even more peculiar

    > library(stepfun)
    > AbC <<- "Z"
    > find("AbC")
    [1] ".GlobalEnv"      "package:stepfun" "Autoloads"      

 {but you were told never to use "<<-"  ;-) }
     
--
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Fri Sep 15 20:09:46 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 15 Sep 2000 14:09:46 -0500
Subject: [Rd] classed
In-Reply-To: Douglas Bates's message of "15 Sep 2000 12:47:28 -0500"
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au> <39C245E0.A2B36FA6@bank-banque-canada.ca> <6rn1h9mtsf.fsf@franz.stat.wisc.edu>
Message-ID: <qxp1yylii9x.fsf@verdi.stat.wisc.edu>

I decided to experiment with this a little. I use a little C function
called printAddress that prints the address of an R object to standard
error.

> x <- 1
> .Call("printAddress", x)
0x891fedc
NULL
> x <- classd(x, "a")
> .Call("printAddress", x)
0x891fd2c
NULL

So the address has changed. Now we can go inside a debugger and see if
do_classgets has anything to do with it.

...

> x <- 1
> .Call("printAddress", x)
0x891fc78
NULL
> x <- classd(x, "a")
# now go to debugger
Breakpoint 1, do_classgets (call=0x89221f0, op=0x81d6720, args=0x8922164, 
    env=0x8922298) at ../../../r-devel/src/main/attrib.c:315
(gdb) p args->u.listsxp.carval
$7 = (struct SEXPREC *) 0x8921aa8
(gdb) n
(gdb) n
(gdb) n
(gdb) p args->u.listsxp.carval
$9 = (struct SEXPREC *) 0x8921aa8
(gdb) n
Rf_eval (e=0x89221f0, rho=0x8922298) at ../../../r-devel/src/main/eval.c:335

So do_classgets does not change the 
(gdb) c
Continuing.
# now we are back to R
> .Call("printAddress", x)
0x89219f4
NULL

The interesting thing is that the object address changed twice. That
is, x is getting copied twice - once after classd is called but before
setting the class and another time when it returns from classd. I was
expecting the second change but not the first.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Fri Sep 15 20:31:02 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 15 Sep 2000 14:31:02 -0500
Subject: [Rd] classed
In-Reply-To: Saikat DebRoy's message of "15 Sep 2000 14:09:46 -0500"
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au> <39C245E0.A2B36FA6@bank-banque-canada.ca> <6rn1h9mtsf.fsf@franz.stat.wisc.edu> <qxp1yylii9x.fsf@verdi.stat.wisc.edu>
Message-ID: <qxpwvgdh2q1.fsf@verdi.stat.wisc.edu>

I should have looked more carefully before sending

> So do_classgets does not change the 

That should read

So do_classgets does not change the value of CAR(args).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 15 21:14:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Sep 2000 16:14:26 -0400
Subject: [Rd] classed
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au> <39C245E0.A2B36FA6@bank-banque-canada.ca> <6rn1h9mtsf.fsf@franz.stat.wisc.edu>
Message-ID: <39C28322.4F5F5685@bank-banque-canada.ca>



TL>For interpreted "foo<-" functions this wouldn't be true -- the same
TL>amount of copying would be done either way -- but class() is special.

DB>Assignment functions like "class<-" are allowed to modify their first
DB>argument in place.  That's the whole reason for using constructions
DB>like foo[] <- bar, which is really a call to "[<-" with arguments foo
DB>and bar, instead of foo <- bar.  It saves on copying.

Doug
These seem slightly different (but I've already demonstrated that I don't
understand this, so maybe they're not).  I don't think that what you are saying
is true in general or there would be no "back out" of the function below, and
there is.  I can believe that class is special (and this would be an arguement
for classed being in the base and special too). But if it was special when I did
timing tests I'm a bit surprized that I didn't find much difference.

> "test<-" <- function(x, value) {attr(x, "zot") <-  value ; stop(); x}
> x  <- 2
> test(x) <- 5
Error in test<-(*tmp*, value = 5) :
> x
[1] 2
> attr(x, "zot")
NULL
>

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Sep 17 15:08:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 17 Sep 2000 16:08:00 +0200 (CEST)
Subject: [Rd] Re: [R] problems with R COMPILE in make
In-Reply-To: <200009041539.LAA13736@jessie.research.bell-labs.com>
References: <200009041539.LAA13736@jessie.research.bell-labs.com>
Message-ID: <14788.53312.712613.772740@aragorn.ci.tuwien.ac.at>

>>>>> Duncan Temple Lang writes:

> Hi Peter.

>  I took a quick look at the R COMPILE problem and it seems that there
> are in fact two problems.  One is the problem with the attempt to
> build a target `w'. And the other is that if that error didn't arise,
> you would have an infinite loop.

> Here is quick fix to your problem. Add the line

>   include $(R_HOME)/etc/Makeconf

> to your Makefile. Then, make will compile imageio.o with the correct flags.

> eyore[RCompile-174]>make
> gcc -I/home2/FlowData/AltProjects/R-shared//include  -I/usr/local/include -mieee-fp -D__NO_MATH_INLINES  -fPIC  -g -O2 -c imageio.c -o imageio.o 


> That should be enough to get things working.  The more detailed
> explanation is as follows.

> a) The rule
> imageio.o: imageio.c
>  	R COMPILE imageio.c

> is executed by the first call to make.
> The COMPILE script expands this to call

>      make -f $R_HOME/etc/Makeconf -f Makefile imageio.o

> At this point, this second make process sees the same rule, and does
> the same thing. Hence, you have infinite recursion.

Duncan,

Thanks for answering this.

Should we consider this behavior a bug?  I am not sure I see an easy way
out ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Sep 17 23:51:12 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 18 Sep 2000 00:51:12 +0200
Subject: [Rd] Projects
In-Reply-To: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
Message-ID: <200009172251.AAA19182@aragorn.ci.tuwien.ac.at>

>>>>> Douglas Bates writes:

> I am teaching a graduate course on Statistical Computing this
> semester.  A major part of the grade is determined by a project in
> which a student or small group of students produce, test, and document
> some software for statistics.  I will encourage those students who are
> developing in S to package their software as an R package.

> I would welcome suggestions of possible projects, especially projects
> that come under the heading of "Useful facilities to be added to R".
> Please keep in mind that the project must be completed by mid-December
> and that not all the students have extensive experience programming in
> S and C.

Hopefully not too late for me to join the wishlist ...

In addition to the useful suggestions re experimental design and by
Peter, I have the following ctest-related projects which I think would
fit very nicely.  Ordering is according to decreasing priority.

* Improved support for exact inference (p-values and, where appropriate,
also confidence intervals ) for some of the tests, in particular for
Kruskal-Wallis and (2-sample) Smirnov.  In addition, we currently don't
have exact p-values in the rank-based tests in case of ties, and one
could deal with this using the Streitberg-Roehmel path suggested by
Torsten Hothorn (see add-on package ExactDistr).  Also, permutation
tests might be useful in some cases ...

[I have an NEW implementation of the Mehta-Patel network algorithm for
dealing with the common odds ratio in 2 x 2 x k tables ready, hence will
take care of mantelhaen.test() myself.]

* Implement alternative definitions of the 2-sided p-value using

	p = 2[f P(X=x) + min{P(X<x),P(X>x)}]

with 0 <= f <= 1 as definition.

* Improve the code for fisher.test(), maybe re-implement from scratch?
The memory management definitely needs to be rewritten for 1.2.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Paul.White@dsto.defence.gov.au  Mon Sep 18 04:39:34 2000
From: Paul.White@dsto.defence.gov.au (Paul.White@dsto.defence.gov.au)
Date: Mon, 18 Sep 2000 05:39:34 +0200 (MET DST)
Subject: [Rd] bug with line widths in postscript output (PR#661)
Message-ID: <200009180339.FAA25870@pubhealth.ku.dk>

Hello R-people,

When I set the line width using par(lwd=2) this correctly changes the line
size on the screen output however it does not change the linewidth when the
output is sent to a postscript file. I think this is a bug.

Here is the version info

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.1              
year     2000             
month    August           
day      15               
language R                


Thanks

Paul White
Aeronautical and Maritime Research Laboratory
Melbourne, Australia.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Mon Sep 18 07:05:30 2000
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Mon, 18 Sep 2000 16:05:30 +1000
Subject: [Rd] Projects
Message-ID: <3.0.6.32.20000918160530.007e5950@pophost.anu.edu.au>

Here are some further possibilities:

1. An equivalent of S-PLUS plot.gam(), which I
would call plot.terms().
[predict(.., type="terms") provides the
information that is plotted.]

2. An option in print.lm() summary.lm() etc.
that would relate the number of decimal
places shown for coefficients etc. to the SE,
e.g. a precision equivalent to the 2nd d.p.
of the SE.
(This may be hard to get right!)

3. Label output where factors appear so that it
is clear what parameterisation has been used.
(Peter Dalgaard suggested a scheme some time
ago that seemed to me eminently sensible.)

4. As an interim measure, until lattice arrives,
implement simplified versions of trellis
bwplot, qqmath, etc that allow two conditioning
factors.  This can be done as fairly easy
adaptations of coplot().  So that it is not
repeated in each individual function, the
coplot() code that decodes the graphics formula
should come out into a separate function.
It needs slight modification to allow formulae
such as ~x|a+b.
(I have a version of such a function.  Adding
the code for e.g. a primitive version of 
bwplot is straightforward. I will do it myself 
shortly if there are not other offers.)

5. I have been investigating a function that has 
one list of information for each panel in a 
trellis type layout, then allowing the user to p
rovide a panel function that operates on the list 
elements. For example, one may want graphs with 
different numbers of x-values to be superimposed 
in the same panel.  Or a theoretical curve or plot
of simulated data may be specified by a small
number of parameters that are specific to each
panel.
(I have a primitive version of such a function.)

John Maindonald.
John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Mon Sep 18 07:22:44 2000
From: jago@mclink.it (Stefano Iacus)
Date: Mon, 18 Sep 2000 08:22:44 +0200
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
Message-ID: <a04330100b5eb64f27ce1@[159.149.74.61]>

This is my second post. Is  the R porting  no more interesting ? I hope no. :)




Hy (I hope this is the right list).

1. Mac porting

I'm finishing the porting of R for Mac. I hope to finish it for the 
end of september. Thanks to the porting of  R 0.64 by Ross (that he 
gave me) I succeded in this porting. This is the current state:

Both R 1.1.1. and 1.2.0 works with minor modification to the original 
code. The Macintosh device has been updated to the new version of 
WASTE library that is Carbon-izable (for who knows MacOS, Carbon is a 
collections of libraries  that allow macintosh applications developed 
for pre-MacOS X to run under MacOS X with minor modification, MacOS X 
is beeing released in september).
There is  a lot of work to do in testing the 1.1.1 porting. The code 
I have modified is not all commented, so give me some times to fix 
this and I'll release the sources to who will ask for.
The porting runs only on PPC machines.
I  compiled 1.2 only to verify how much the changes are sensitive to 
new releases of the code. It seems to work without problems.

Is there anyone working on R porting for Mac at the moment?

Actually, I have problems on building the base package and packages 
in general and I just pick Win base package and adapt it, so the 
check I can do are not so accurate. Where can I find the proper 
documentation on building packages?
Makefiles on Mac are a problem for me at the moment, but I'll try to 
fix this also.



2. About the bug (?)

I've to remark one problem in the source code of PS and Xfig devices. 
When the device look for "afm" it is system dependent because slashes 
such "/" are used to search for fonts:

i.e. (in xfig, the same is for PS)

static int XFig_Open(DevDesc *dd, XFigDesc *pd)
{
     char buf[512];
     int i;

     for(i = 0; i < 5 ; i++) {
	sprintf(buf, "%s/afm/%s.%s", R_Home,             <--- HERE
		Family[pd->fontfamily].font[i].abbr,
		(i == 4) ? "afm" : Extension[pd->encoding]);


the slashes should be replaced by the FILESEP  definition.


Both devices fixed for FILESEP (and pictex as well) works on Mac.

Regards,

         Stefano
-- 
Stefano Maria Iacus
Dipartimento di Politica Economica ed Aziendale
Universita' di Milano
Via Conservatorio 7
20122 Milano
Tel: 02 760 74 462
Fax: 02 760 23 198
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep 18 09:41:08 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 18 Sep 2000 10:41:08 +0200
Subject: [Rd] Fortran 90 / 95 compilers? // interface packages for R ?
Message-ID: <14789.54564.400197.692342@gargle.gargle.HOWL>

We have (spatial statistics) group here that are (about to) interface
Fortran 90 and/or 95 software to R and/or S-plus.

My recommendation has been against this because of non-availability of
GNU or other free (not only moneywise, in the GNU sense) compilers for
Fortran 9x.   Does anybody have good guesses about the future here?
The user group here say they like F 9[05] because of its ``object
oriented'' approach and data types.  Probably we shouldn't start a
discussion about this statement, but rather acknowledge that in the
numerical analysis community, there seems to be a drive from F77 to F90

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep 18 10:19:08 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 18 Sep 2000 11:19:08 +0200
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
In-Reply-To: <a04330100b5eb64f27ce1@[159.149.74.61]>
References: <a04330100b5eb64f27ce1@[159.149.74.61]>
Message-ID: <14789.56844.138209.426953@gargle.gargle.HOWL>

>>>>> "StefI" == Stefano Iacus <jago@mclink.it> writes:

    StefI> This is my second post. Is the R porting no more interesting ? I
    StefI> hope no. :) Hy (I hope this is the right list).

No, to the contrary.  There is quite a base of potential users who'd
welcome a Mac port very much! {I'm "unix only" though.}

Thanks a lot for your efforts!

I think you should send specific patches (as the one below, using FILESEP)
-- using "diff -c" against a recent version of R-devel --
to R-core at R-project.org which is the core team's (non-public) E-mail list.
One of us could then "slice" your code into the current development version.

    StefI> 1. Mac porting

    StefI> I'm finishing the porting of R for Mac. I hope to finish it for
    StefI> the end of september. Thanks to the porting of R 0.64 by Ross
    StefI> (that he gave me) I succeded in this porting. This is the
    StefI> current state:

    StefI> Both R 1.1.1. and 1.2.0 works with minor modification to the
    StefI> original code. The Macintosh device has been updated to the new
    StefI> version of WASTE library that is Carbon-izable (for who knows
    StefI> MacOS, Carbon is a collections of libraries that allow macintosh
    StefI> applications developed for pre-MacOS X to run under MacOS X with
    StefI> minor modification, MacOS X is beeing released in september).
    StefI> There is a lot of work to do in testing the 1.1.1 porting. The
    StefI> code I have modified is not all commented, so give me some times
    StefI> to fix this and I'll release the sources to who will ask for.
    StefI> The porting runs only on PPC machines.  I compiled 1.2 only to
    StefI> verify how much the changes are sensitive to new releases of the
    StefI> code. It seems to work without problems.

    StefI> Is there anyone working on R porting for Mac at the moment?

    StefI> Actually, I have problems on building the base package and
    StefI> packages in general and I just pick Win base package and adapt
    StefI> it, so the check I can do are not so accurate. Where can I find
    StefI> the proper documentation on building packages?  Makefiles on Mac
    StefI> are a problem for me at the moment, but I'll try to fix this
    StefI> also.



    StefI> 2. About the bug (?)

    StefI> I've to remark one problem in the source code of PS and Xfig
    StefI> devices.  When the device look for "afm" it is system dependent
    StefI> because slashes such "/" are used to search for fonts:

    StefI> i.e. (in xfig, the same is for PS)

    StefI> static int XFig_Open(DevDesc *dd, XFigDesc *pd) { char buf[512];
    StefI> int i;

    StefI>      for(i = 0; i < 5 ; i++) { sprintf(buf, "%s/afm/%s.%s",
    StefI> R_Home, <--- HERE Family[pd->fontfamily].font[i].abbr, (i == 4)
    StefI> ? "afm" : Extension[pd->encoding]);

    StefI> the slashes should be replaced by the FILESEP definition.

    StefI> Both devices fixed for FILESEP (and pictex as well) works on
    StefI> Mac.

    StefI> Regards,

    StefI>          Stefano -- Stefano Maria Iacus Dipartimento di Politica
    StefI> Economica ed Aziendale Universita' di Milano Via Conservatorio 7
    StefI> 20122 Milano Tel: 02 760 74 462 Fax: 02 760 23 198
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep 18 10:58:41 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Sep 2000 11:58:41 +0200
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
In-Reply-To: Martin Maechler's message of "Mon, 18 Sep 2000 11:19:08 +0200"
References: <a04330100b5eb64f27ce1@[159.149.74.61]> <14789.56844.138209.426953@gargle.gargle.HOWL>
Message-ID: <x2pum26my6.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "StefI" == Stefano Iacus <jago@mclink.it> writes:
> 
>     StefI> This is my second post. Is the R porting no more interesting ? I
>     StefI> hope no. :) Hy (I hope this is the right list).
> 
> No, to the contrary.  There is quite a base of potential users who'd
> welcome a Mac port very much! {I'm "unix only" though.}
> 
> Thanks a lot for your efforts!

Seconded (but of course you must be aware that the absence of a Mac
port makes Mac programmers a scarce resource on R-devel...)

> I think you should send specific patches (as the one below, using FILESEP)
> -- using "diff -c" against a recent version of R-devel --
> to R-core at R-project.org which is the core team's (non-public) E-mail list.
> One of us could then "slice" your code into the current development version.

Not necessary in this case. I've folded in the FILESEP change already.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep 18 11:56:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 18 Sep 2000 11:56:55 +0100 (BST)
Subject: [Rd] Fortran 90 / 95 compilers? // interface packages for R ?
In-Reply-To: <14789.54564.400197.692342@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10009181153470.17763-100000@toucan.stats>

On Mon, 18 Sep 2000, Martin Maechler wrote:

> We have (spatial statistics) group here that are (about to) interface
> Fortran 90 and/or 95 software to R and/or S-plus.
> 
> My recommendation has been against this because of non-availability of
> GNU or other free (not only moneywise, in the GNU sense) compilers for
> Fortran 9x.   Does anybody have good guesses about the future here?
> The user group here say they like F 9[05] because of its ``object
> oriented'' approach and data types.  Probably we shouldn't start a
> discussion about this statement, but rather acknowledge that in the
> numerical analysis community, there seems to be a drive from F77 to F90

The prime developer of g77 has withdrawn, so last time I looked its
future was in serious doubt.  

I agree that Fortran 95 is the future for the Fortran-using community,
and is the standard used by commercial compilers nowadays. I think 
using it on Windows for R would cause us serious difficulties.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Malcolm Gillies <M.B.Gillies@pharm.uu.nl>  Mon Sep 18 12:52:27 2000
From: Malcolm Gillies <M.B.Gillies@pharm.uu.nl> (Malcolm Gillies)
Date: Mon, 18 Sep 2000 13:52:27 +0200
Subject: [Rd] Fortran 90 / 95 compilers? // interface packages for R ?
In-Reply-To: Your message of "Mon, 18 Sep 2000 11:56:55 MDT."
 <Pine.GSO.4.05.10009181153470.17763-100000@toucan.stats>
Message-ID: <200009181152.NAA36919@fischer.pharm.uu.nl>

>> My recommendation has been against this because of non-availability of
>> GNU or other free (not only moneywise, in the GNU sense) compilers for
>> Fortran 9x.   Does anybody have good guesses about the future here?

There is an (embryonic) g95 project. From the status reports it appears
to be under active (but slow?) development. They're currently working on
the parser, and are up to about version 0.1

    http://g95.sourceforge.net/

cheers,

Malcolm
--
Malcolm Gillies <M.B.Gillies@pharm.uu.nl>
PhD student, computational medicinal chemistry
Dept of Medicinal Chemistry, Faculty of Pharmacy,
Utrecht University, The Netherlands
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Malcolm Gillies <M.B.Gillies@pharm.uu.nl>  Mon Sep 18 13:13:07 2000
From: Malcolm Gillies <M.B.Gillies@pharm.uu.nl> (Malcolm Gillies)
Date: Mon, 18 Sep 2000 14:13:07 +0200
Subject: [Rd] Latin1 encoded AFM files
Message-ID: <200009181213.OAA39666@fischer.pharm.uu.nl>

Hi,

I patched my R-1.1.1 sources to add support for a couple more fonts to
the postscript device.

It works for alphanumeric characters, but I notice that I should be
supplying an AFM file with ISOLatin1Encoding (I'm using a standard AFM
for now, and get some parsing errors from R when I open the postscript
device).

Is there a program/script which will re-encode my AFM files from
AdobeStandardEncoding to ISOLatin1Encoding?

Or will I have to bite the bullet and do it by hand?

cheers,

Malcolm
--
Malcolm Gillies <M.B.Gillies@pharm.uu.nl>
PhD student, computational medicinal chemistry
Dept of Medicinal Chemistry, Faculty of Pharmacy,
Utrecht University, The Netherlands
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From M.B.Gillies@pharm.uu.nl  Mon Sep 18 13:20:39 2000
From: M.B.Gillies@pharm.uu.nl (M.B.Gillies@pharm.uu.nl)
Date: Mon, 18 Sep 2000 14:20:39 +0200 (MET DST)
Subject: [Rd] phantom(0) doesn't do what I expect it to [plotmath] (PR#662)
Message-ID: <200009181220.OAA03612@pubhealth.ku.dk>

Full_Name: Malcolm Gillies
Version: 1.1.1
OS: Debian GNU/Linux 2.2
Submission from: (NULL) (131.211.56.47)


I'm trying to make a legend with a justified list of numbers, so I
thought I would use phantom(0) to align the 3-digit numbers properly
with the 4-digit ones:

    plot(1); legend(1, 1, xjust=1, yjust=1, lty=c(1,2,3,4,5), adj=c(0,0.5),
           legend=expression(phantom(0)*300*plain(K),
                             phantom(0)*550*plain(K),
                             phantom(0)*830*plain(K),
                                       1440*plain(K),
                                       2500*plain(K)))

Unfortunately, phantom(0) doesn't seem to be adding any space, whether
I use the X11 or the postscript device.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep 18 13:36:48 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 18 Sep 2000 13:36:48 +0100 (BST)
Subject: [Rd] Latin1 encoded AFM files
In-Reply-To: <200009181213.OAA39666@fischer.pharm.uu.nl>
Message-ID: <Pine.GSO.4.05.10009181333150.17891-100000@toucan.stats>

On Mon, 18 Sep 2000, Malcolm Gillies wrote:

> Hi,
> 
> I patched my R-1.1.1 sources to add support for a couple more fonts to
> the postscript device.
> 
> It works for alphanumeric characters, but I notice that I should be
> supplying an AFM file with ISOLatin1Encoding (I'm using a standard AFM
> for now, and get some parsing errors from R when I open the postscript
> device).

I have re-written that code to allow you to use an afm file in any
encoding. I'll send you the patch in a couple of days (I'm away from base
at present).  My idea is that 1.2.0 will support user-specified families,
but the work is not yet complete.

> Is there a program/script which will re-encode my AFM files from
> AdobeStandardEncoding to ISOLatin1Encoding?

You can use some of the postscript utility files that come with gs to
write a ps program to do so. PostScript experts only, of course.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Sep 18 16:38:49 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 18 Sep 2000 11:38:49 -0400
Subject: [Rd] classed or as
Message-ID: <39C63709.DD243011@bank-banque-canada.ca>

It was pointed out to me in a separate communication from Bill Venables
that the S4 as(,) function, instead of the classed( ,) function I
previously suggested, might result in a better strategy for developing
code that would run in both S3 and S4. (One of my reasons for defining
classed in the first place was to help get my code to run in both S3 and
S4.)

If I understand the previous discussion correctly, putting this function
in R base would also result in a speed-up relative to my interpreted
code.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Sep 19 00:08:15 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 18 Sep 2000 16:08:15 -0700 (PDT)
Subject: [Rd] Projects
In-Reply-To: <3.0.6.32.20000918160530.007e5950@pophost.anu.edu.au>
Message-ID: <Pine.GSO.4.21.0009181605010.19383-100000@atlas.biostat.washington.edu>

On Mon, 18 Sep 2000, John Maindonald wrote:

> Here are some further possibilities:
> 
> 1. An equivalent of S-PLUS plot.gam(), which I
> would call plot.terms().
> [predict(.., type="terms") provides the
> information that is plotted.]

There is a version of this in termplot() -- it was the motivation for
getting predict(,type="terms") to work.  Improvements are welcome. I think
it's even aliased so that help(plot.gam) gives the termplot help.

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue Sep 19 01:14:54 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 19 Sep 2000 11:14:54 +1100
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
In-Reply-To: <a04330100b5eb64f27ce1@[159.149.74.61]>; from jago@mclink.it on Mon, Sep 18, 2000 at 08:22:44AM +0200
References: <a04330100b5eb64f27ce1@[159.149.74.61]>
Message-ID: <20000919111454.C11320@ftoomsh.progsoc.uts.edu.au>

On Mon, Sep 18, 2000 at 08:22:44AM +0200, Stefano Iacus wrote:
> Is there anyone working on R porting for Mac at the moment?

Well I am actually running R on a Mac already and both the R
base and all the packages that I have tried worked for me with
no modifications... but I will admit that I started out by
installing linux.

About fifteen years ago, Apple got offside with the free-software
community because of ``look-and-feel'' litigation. They are still
feeling the backlash off that (and probably will be for some time)
because of the scarcity of free-software developers using MacOS.
It is a snowball, once developers turn away from a platform,
there is nothing to encourage new developers to get interested.

> the slashes should be replaced by the FILESEP  definition.

Yup, good work spotting that and good luck with your porting
efforts. My Mac is a blue G3, running at 350 MHz. If you have
similar hardware then I would like to compare a few benchmarks
of R running under linux and MacOS. Failing that, if you make
available a binary package of the R base for MacOS then I'll
reboot into MacOS and do the comparison for myself.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zivan.karaman@limagrain.com  Tue Sep 19 12:53:21 2000
From: zivan.karaman@limagrain.com (zivan.karaman@limagrain.com)
Date: Tue, 19 Sep 2000 13:53:21 +0200 (MET DST)
Subject: [Rd] bug.report("unused argument(s) crash R when options(error=quote (PR#663)
Message-ID: <200009191153.NAA14999@pubhealth.ku.dk>


# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@biostat.ku.dk
#
######################################################

Hello!

I have observed a curious problem with the Windows version of R.
> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.1
year     2000
month    August
day      15
language R
> win.version()
[1] "Windows NT 4.0 (build 1381) Service Pack 5"

When I mistype an argument in a function call (like in the example below), Rgui
crashes with the message:
The instruction at "0x025571b8" uses the memory address "0x00000008". The memory
 can't be "read". (This is my translation from French, but I guess it's
something like that in English.)

Example:
> ls(poq=3)
Normally, one should get a message saying:
Error in ls(poq = 3) : unused argument(s) (poq ...)

In my etc/Rprofile file I have added the following line:
options(error=quote(dump.frames()))

When I comment this line out, Rgui works OK (i.e. I get the message "Error in
ls(poq = 3) : unused argument(s) (poq ...)").

This happens for any other typo that should normally cause the message "unused
argument(s)", like "matrix(1:15, nrow=5, byrox=TRUE)", or anything else.

The same happens with Rterm, except that you see the error message before Rterm
dies, and the message is little bit different:
The instruction at "0x02556678" uses the memory address "0xec83e591". The memory
 can't be "read".

It happens on both my desktop and my laptop, but since both are running the same
 OS version (NT4 SP5), it's not so surprising.

Also, I have the same behaviour with the previous version of R
> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.0
year     2000
month    June
day      15
language R


Did I do anything wrong, or is it a problem with R.dll?

It is not a big problem, but I just wanted let you know about it.

Best regards

Zivan



--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 5

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Sep 19 13:40:31 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Sep 2000 14:40:31 +0200
Subject: [Rd] bug.report("unused argument(s) crash R when options(error=quote (PR#663)
In-Reply-To: zivan.karaman@limagrain.com's message of "Tue, 19 Sep 2000 13:53:21 +0200 (MET DST)"
References: <200009191153.NAA14999@pubhealth.ku.dk>
Message-ID: <x2u2bctv0f.fsf@blueberry.kubism.ku.dk>

zivan.karaman@limagrain.com writes:

> The instruction at "0x025571b8" uses the memory address "0x00000008". The memory
>  can't be "read". (This is my translation from French, but I guess it's
> something like that in English.)
> 
> Example:
> > ls(poq=3)
> Normally, one should get a message saying:
> Error in ls(poq = 3) : unused argument(s) (poq ...)
> 
> In my etc/Rprofile file I have added the following line:
> options(error=quote(dump.frames()))

Whoops. This also crashes on Linux (good - then we can debug it more
conveniently...) In the development version too:


> ls(poq=3)
Error in ls(poq = 3) : unused argument(s) (poq ...)

Program received signal SIGSEGV, Segmentation fault.
0x807e1c7 in Rf_findVarInFrame (rho=0xbffff4cc, symbol=0x83c7354)
    at ../../../R/src/main/envir.c:677
677             hashcode = HASHVALUE(c) % HASHSIZE(HASHTAB(rho));
(gdb) l
672             c = PRINTNAME(symbol);
673             if( !HASHASH(c) ) {
674                 SET_HASHVALUE(c, R_Newhashpjw(CHAR(c)));
675                 SET_HASHASH(c, 1);
676             }
677             hashcode = HASHVALUE(c) % HASHSIZE(HASHTAB(rho));

(I don't really have time to debug this further just now, the symbol is
"dump.frames" in case anyone wants to dig deeper)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Sep 19 16:41:42 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 19 Sep 2000 10:41:42 -0500
Subject: [Rd] Scalable vector graphics
Message-ID: <6r3diwie2x.fsf@franz.stat.wisc.edu>

I noticed a request on S-news today about support for scalable vector
graphics (http://www.w3.org/TR/SVG/).  Is there any interest in that
for R?  Is there anyone interested in doing it?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Sep 19 17:40:43 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 19 Sep 2000 18:40:43 +0200
Subject: [Rd] Re: more experience with formulas
In-Reply-To: <14791.33767.96707.611162@gargle.gargle.HOWL>
References: <14791.33767.96707.611162@gargle.gargle.HOWL>
Message-ID: <14791.38667.631499.957513@gargle.gargle.HOWL>

>>>>> "WSt" == Werner Stahel <stahel@stat.math.ethz.ch> writes:
[to me privately]

    WSt> I do not want to call this a bug, but it bugged me. Please try the
    WSt> following:

 WSt>  tform <- sqrt(RADAI) ~ sqrt(RADAI.e) + TAGE.ej + SPITAL + ARZT + DAS28 + 
 WSt>     SJC + TJC + DGA + HAQ + PGA + PAIN + YEAR.SYM + YEAR.DIA + 
 WSt>     ALTER + IndV + m.NSAIDs + m.Stereoids + DM.Cyclosp + DM.Penic
 WSt> 
 WSt>  as.character(tform) 

--> length-3 vector "~" "<LHS>" "<RHS>".
However, the end of <RHS> is TRUNCATED!
and that truncation of the third part is a bug in my opinion.

The fact that it returns a vector of the same length as its argument is
very consistent behavior even though it maybe unexpected to the casual R user.

I think you'd want to use format() instead.
There, we can see that format.default really uses deparse(x) when x is such
a language object.
One could argue that the optional "width.cutoff = 60" argument to deparse()
should also be settable from format(), in that case,
since
	format(tform) == deparse(tform)

really returns a vector of "3 lines" instead of just one line
which we'd get by the result of
     deparse(tfrom, width = 200)
       
Opinions?

 WSt> paste(tform,collapse="")# "y ~ x" becomes "~yx" -- is S compatible
 WSt> as.character(tform[[3]])# again length-3 vector  "+" "sqr..." "DM.Penic"
 WSt> 
 WSt> as.character.formula <- function(x, ...) paste(deparse(x),collapse="")
 WSt> ## now ,
 WSt> as.character(tform)
 WSt> paste(tform,collapse="")
 WSt> ## work, but
 WSt> as.character(tform[[3]])
 WSt> ## still does not, since it is of mode language, but not of class formula.
 WSt> ## It would be better to write as.character.default such that is works for
 WSt> ## mode language.

It *does* work; it just returns a vector of character, again
fulfilling the semantic that
when
	    y <- as.character(x)
then
	  y[i] == as.character(x[i])

    WSt> PS: Thanks for your efforts in developping R.

    WSt> Werner Stahel

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Sep 19 18:41:00 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Sep 2000 18:41:00 +0100 (BST)
Subject: [Rd] Scalable vector graphics
In-Reply-To: <6r3diwie2x.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.10009191833220.29971-100000@auk.stats>

On 19 Sep 2000, Douglas Bates wrote:

> I noticed a request on S-news today about support for scalable vector
> graphics (http://www.w3.org/TR/SVG/).  Is there any interest in that
> for R?  Is there anyone interested in doing it?

I noticed it on the W3C site a couple of weeks ago, and concluded that it
was premature. (It is not yet a W3C standard, and look at the platforms
that have tool support: mainly Windows, perhaps a Java2 SDK will also
work.)

I would give higher priority to a real PDF driver (not via bitmap())
at present, as these are already widely-available tools to use PDF.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Sep 19 18:47:18 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Sep 2000 18:47:18 +0100 (BST)
Subject: [Rd] Re: more experience with formulas
In-Reply-To: <14791.38667.631499.957513@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10009191842450.29971-100000@auk.stats>

On Tue, 19 Sep 2000, Martin Maechler wrote:

> >>>>> "WSt" == Werner Stahel <stahel@stat.math.ethz.ch> writes:
> [to me privately]
> 
>     WSt> I do not want to call this a bug, but it bugged me. Please try the
>     WSt> following:
> 
>  WSt>  tform <- sqrt(RADAI) ~ sqrt(RADAI.e) + TAGE.ej + SPITAL + ARZT + DAS28 + 
>  WSt>     SJC + TJC + DGA + HAQ + PGA + PAIN + YEAR.SYM + YEAR.DIA + 
>  WSt>     ALTER + IndV + m.NSAIDs + m.Stereoids + DM.Cyclosp + DM.Penic
>  WSt> 
>  WSt>  as.character(tform) 
> 
> --> length-3 vector "~" "<LHS>" "<RHS>".
> However, the end of <RHS> is TRUNCATED!
> and that truncation of the third part is a bug in my opinion.

I think using as.character() is the problem: this is what deparse() is
for.  Similar things happen in S too.  You may notice that in
versions of R up to and including 1.1.1 that anova methods had this bug:
I even filed a bug report against it.

I suspect it may be relatively unproblematic to change as.character because
where it matters the cognescenti (read, `the much-bitten') would
use deparse() anyway.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Tue Sep 19 23:27:29 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 19 Sep 2000 18:27:29 -0400 (EDT)
Subject: [Rd] Scalable vector graphics
Message-ID: <200009192227.SAA25026@jessie.research.bell-labs.com>


> From: Douglas Bates <bates@stat.wisc.edu>
> Date: 19 Sep 2000 10:41:42 -0500
> Lines: 3
> User-Agent: Gnus/5.0803 (Gnus v5.8.3) Emacs/20.7
> Sender: owner-r-devel@stat.math.ethz.ch
> Precedence: bulk
> 
> I noticed a request on S-news today about support for scalable vector
> graphics (http://www.w3.org/TR/SVG/).  Is there any interest in that
> for R?  Is there anyone interested in doing it?
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


yes there definitely is some interest in doing this.
I have a very simple example of this and MathML in the
latest version of the XML package for R and S
in the Omegahat tree. That has now been cleaned up so that
it only needs libxml to do both DOM and event parsing
and contains many more examples of how to use things.

Actually, I was going to suggest an SVG driver as
a project for a student in your statistical computing class.
As I mentioned to David Nelson (the originator of the query on S-news)
it is a relatively straightforward task: provide R functions
to map XML elements to R graphics commands. There are examples
for this and MathML on the Omegahat web site and I will create an R
package of the XML library if anyone wants it soon.

D.


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Thu Sep 21 06:15:05 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Sep 2000 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200009210515.HAA29118@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 644 *
Subject: crash using fisher.test on Windows; was [R] unexpected crash of R under 
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 25 Aug 2000 08:47:00 +0200
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 639 *
Subject: symbols: xlim and ylim cannot be specified
From: Werner Stahel <stahel@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 15:54:08 +0200 (CEST)
--Fixed for 1.1.2 (?)
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 664 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/661
Subject:  bug with line widths in postscript output
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: "White, Paul" <Paul.White@dsto.defence.gov.au>
Date: Thu, 21 Sep 2000 04:45:10 +0200
Date: Thu, 21 Sep 2000 04:45:09 +0200
Date: Mon, 18 Sep 2000 14:33:36 +1100
* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
* PR# 652 *
Subject: R INSTALL *.tgz fails (minor docs/feature bug)
From: RPO <bobbyo@speakeasy.org>
Date: Sat, 2 Sep 2000 13:34:22 -0700 (PDT)
* PR# 640 *
Subject: diff.default / diff.ts in wrong package bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 18:28:36 +0200 (CEST)
* PR# 656 *
Subject: .Random.seed resetting
From: lej25@statslab.cam.ac.uk
Date: Mon, 11 Sep 2000 13:13:27 +0200 (MET DST)
* PR# 655 *
Subject: Installing R from source 
From: jniesch@gwdg.de
Date: Fri, 8 Sep 2000 11:40:00 +0200 (MET DST)
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 658 *
Subject: PR 640 (diff.default computes an incorrect starting time)
From: Laimonis Kavalieris <lkavalieris@maths.otago.ac.nz>
Date: Wed, 13 Sep 2000 13:44:38 +0000
* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200
* PR# 662 *
Subject: phantom(0) doesn't do what I expect it to [plotmath]
From: M.B.Gillies@pharm.uu.nl
Date: Mon, 18 Sep 2000 14:20:37 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Sep 21 08:28:57 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 21 Sep 2000 09:28:57 +0200
Subject: [Rd] scatterplot3d
Message-ID: <39C9B8B9.F8A85481@statistik.uni-dortmund.de>

Hi!

A new version (0.3.3) of scatterplot3d (plots a 3D point cloud
perspectively) is available at
http://www.statistik.uni-dortmund.de/leute/ligges.htm

I am especially interested in bug reports and reports of unexpected
results (always with examples to reproduce the error, please).

Also feel free to send feature requests. 
Some R users (see the parts of two emails below) are missing a function,
which plots a 3D perspective of a matrix. So I am thinking about
creating a new function (based on the code of scatterplot3d, if there
are no more known bugs in it), which does the trick.


  Charles RAUX wrote:
  > 
  > How can I draw a 3D perspective of a contingency table, that is
  > showing 3D bars whose height is in proportion of the table cells?

  s-luppescu@uchicago.edu wrote:
  >
  > I want to do a 3d scatterplot of the upper triangle of a matrix,
where the
  > z-values are the values in the matrix, and the row and column
indices are the y-
  > and x-values.

Best regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Sep 21 09:18:33 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Sep 2000 10:18:33 +0200 (MET DST)
Subject: [Rd] "[.data.frame" forgets about "AsIs" (PR#665)
Message-ID: <200009210818.KAA05524@pubhealth.ku.dk>

Short example:

 > str(d <- data.frame(a = I(letters[1:5])))
 `data.frame':	5 obs. of  1 variable:
  $ a:Class 'AsIs'  chr [1:5] "a" "b" "c" "d" ...
 > str(d[TRUE,,drop = FALSE])
 `data.frame':	5 obs. of  1 variable:
  $ a: chr  "a" "b" "c" "d" ...

The real problem about this is, that as soon as the data.frame is further
"transformed", the character component is coerced to a factor, e.g.

   > str(rbind(d[TRUE,,drop = FALSE], "E"))
   `data.frame':	6 obs. of  1 variable:
    $ a: Factor w/ 6 levels "a","b","c","d",..: 1 2 3 4 6 5

--- 

I'm looking at a fix myself.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aprasad@fs.fed.us  Thu Sep 21 16:46:42 2000
From: aprasad@fs.fed.us (aprasad@fs.fed.us)
Date: Thu, 21 Sep 2000 17:46:42 +0200 (MET DST)
Subject: [Rd] width in options() (PR#666)
Message-ID: <200009211546.RAA12787@pubhealth.ku.dk>

Full_Name: Anantha Prasad
Version: 1.1.1
OS: Linux
Submission from: (NULL) (199.131.134.57)


When I try to use 
> options(width=201)
Error in options(...) : invalid width parameter
It looks like 200 is the max. limit. THis is a huge limitation...for if I am
trying
to sink() an R object that has 50 variables with a width of say 1000 characters
and
a length of say 1000 lines, the output I get gets split at 200 characters so
that it
has 5000 lines!
Eg.,
Say an R object x with 1000 lines and 50 variables (1000 characters of width)
> sink("tst.dat")
> x
> sink()
Now, tst.dat has the output split at 200 characters making it very difficult to
use
this dataset. So, scripts that depend on the entire file structure to come
intact
will produce errors.

This limitation is not there in S-PLUS where you can set the width to any
number.
Hope this is fixed soon as many scripts I use depend on me setting width to
atleast
2000!

Thanks



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Sep 21 16:49:31 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 21 Sep 2000 08:49:31 -0700 (PDT)
Subject: [Rd] width in options() (PR#666)
In-Reply-To: <200009211546.RAA12787@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0009210848220.27694-100000@atlas.biostat.washington.edu>

On Thu, 21 Sep 2000 aprasad@fs.fed.us wrote:

> Full_Name: Anantha Prasad
> Version: 1.1.1
> OS: Linux
> Submission from: (NULL) (199.131.134.57)
> 
> 
> When I try to use 
> > options(width=201)
> Error in options(...) : invalid width parameter
> It looks like 200 is the max. limit. THis is a huge limitation...for if I am
> trying
> to sink() an R object that has 50 variables with a width of say 1000 characters
> and
> a length of say 1000 lines, the output I get gets split at 200 characters so
> that it
> has 5000 lines!
> Eg.,
> Say an R object x with 1000 lines and 50 variables (1000 characters of width)
> > sink("tst.dat")
> > x
> > sink()
> Now, tst.dat has the output split at 200 characters making it very difficult to
> use
> this dataset. So, scripts that depend on the entire file structure to come
> intact
> will produce errors.
> 
> This limitation is not there in S-PLUS where you can set the width to any
> number.
> Hope this is fixed soon as many scripts I use depend on me setting width to
> atleast
> 2000!


While this may well be a useful feature to add, note that the preferred
way of writing a rectangular dataset to a file is with write.table(),
which does not have width restrictions

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Sep 21 16:56:31 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Sep 2000 17:56:31 +0200 (MET DST)
Subject: [Rd] "[.data.frame" forgets about "AsIs" (PR#665)
Message-ID: <200009211556.RAA12851@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> Short example:
    >> str(d <- data.frame(a = I(letters[1:5])))
    MM> `data.frame':	5 obs. of  1 variable:
    MM> $ a:Class 'AsIs'  chr [1:5] "a" "b" "c" "d" ...
    >> str(d[TRUE,,drop = FALSE])
    MM> `data.frame':	5 obs. of  1 variable:
    MM> $ a: chr  "a" "b" "c" "d" ...

    MM> The real problem about this is, that as soon as the data.frame is
    MM> further "transformed", the character component is coerced to a
    MM> factor, e.g.

    >> str(rbind(d[TRUE,,drop = FALSE], "E"))
    MM> `data.frame':	6 obs. of  1 variable:
    MM> $ a: Factor w/ 6 levels "a","b","c","d",..: 1 2 3 4 6 5


Probably the cleanest fix is the addition of 

  "[.AsIs" <- function(x, i) structure(NextMethod("["), class = class(x))

--
Will go into R-devel unless someone has a better idea.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aprasad@fs.fed.us  Fri Sep 22 21:31:08 2000
From: aprasad@fs.fed.us (aprasad@fs.fed.us)
Date: Fri, 22 Sep 2000 22:31:08 +0200 (MET DST)
Subject: [Rd] eval functions... (PR#668)
Message-ID: <200009222031.WAA23892@pubhealth.ku.dk>

Full_Name: Anantha Prasad
Version: 1.1.1
OS: Linux
Submission from: (NULL) (199.131.134.30)


I am trying to convert some S-PLUS code to R (a tcl/tk application that uses
R)...
here is the error I got in R (but not in S-PLUS)...so I am wondering if it is a
bug.

Eg., the foll. extract from a function runs fine in S-PLUS but gives the error:
Error in x[[j]] : subscript out of bounds
in R

code snippet .....

 attach(xd)
	 resp <- "iv802"
	pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
	lmexp <- paste(resp, " ~ ", pickedlist,sep="")
        tmpzx <- eval(lm(lmexp,data=xd))

Essentially, I want to do:
 lm(iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL, data=xd)
thru a function that has the parameters passed thru TclTk and Perl......

Thanks much.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep 22 22:15:36 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Sep 2000 23:15:36 +0200
Subject: [Rd] eval functions... (PR#668)
In-Reply-To: aprasad@fs.fed.us's message of "Fri, 22 Sep 2000 22:31:08 +0200 (MET DST)"
References: <200009222031.WAA23892@pubhealth.ku.dk>
Message-ID: <x2u2b8ruvb.fsf@blueberry.kubism.ku.dk>

aprasad@fs.fed.us writes:

> Eg., the foll. extract from a function runs fine in S-PLUS but gives the error:
> Error in x[[j]] : subscript out of bounds
> in R
> 
> code snippet .....
> 
>  attach(xd)
> 	 resp <- "iv802"
> 	pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
> 	lmexp <- paste(resp, " ~ ", pickedlist,sep="")
>         tmpzx <- eval(lm(lmexp,data=xd))
> 
> Essentially, I want to do:
>  lm(iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL, data=xd)
> thru a function that has the parameters passed thru TclTk and Perl......

Um, I'm somewhat surprised that this gives sensible results in
Splus... It does, since Splus accepts a text string for a formula
which R does not. 

[The use of eval is also unnecessary, and the sep="" is peculiar in
view of the spaces around the ~...]

In R you need to jump through an extra hoop to create a formula object
from the string representation:

lmexp <- formula(paste(resp, "~", pickedlist))
tmpzx <- lm(lmexp,data=xd)

The Splus docs explicitly say that the first argument to lm should be
a formula object, and R's behaviour is consistent with that.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Sep 22 22:29:52 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 22 Sep 2000 16:29:52 -0500
Subject: [Rd] eval functions... (PR#668)
In-Reply-To: aprasad@fs.fed.us's message of "Fri, 22 Sep 2000 22:31:08 +0200 (MET DST)"
References: <200009222031.WAA23892@pubhealth.ku.dk>
Message-ID: <6rya0kdsj3.fsf@franz.stat.wisc.edu>

aprasad@fs.fed.us writes:

> I am trying to convert some S-PLUS code to R (a tcl/tk application that uses
> R)...
> here is the error I got in R (but not in S-PLUS)...so I am wondering if it is a
> bug.
> 
> Eg., the foll. extract from a function runs fine in S-PLUS but gives the error:
> Error in x[[j]] : subscript out of bounds
> in R
> 
> code snippet .....
> 
>  attach(xd)
> 	 resp <- "iv802"
> 	pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
> 	lmexp <- paste(resp, " ~ ", pickedlist,sep="")
>         tmpzx <- eval(lm(lmexp,data=xd))
> 
> Essentially, I want to do:
>  lm(iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL, data=xd)
> thru a function that has the parameters passed thru TclTk and Perl......

I think in both R and S-PLUS you would be better off using as.formula.

> as.formula("iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL")
iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL

You may want to use Bill Venables' favorite function do.call as well.  Try

resp <- "iv802"
pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
tmpzx <- do.call("lm", 
          list(formula = as.formula(paste(resp, "~", pickedlist)),
               data = xd))

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep 23 07:42:49 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 23 Sep 2000 07:42:49 +0100 (BST)
Subject: [Rd] eval functions... (PR#668)
In-Reply-To: <200009222031.WAA23892@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10009230726310.15421-100000@auk.stats>

On Fri, 22 Sep 2000 aprasad@fs.fed.us wrote:

> Full_Name: Anantha Prasad
> Version: 1.1.1
> OS: Linux
> Submission from: (NULL) (199.131.134.30)
> 
> 
> I am trying to convert some S-PLUS code to R (a tcl/tk application that uses
> R)...
> here is the error I got in R (but not in S-PLUS)...so I am wondering if it is a
> bug.
> 
> Eg., the foll. extract from a function runs fine in S-PLUS but gives the error:
> Error in x[[j]] : subscript out of bounds
> in R

A tracback helps ...

> 
> code snippet .....
> 
>  attach(xd)
> 	 resp <- "iv802"
> 	pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
> 	lmexp <- paste(resp, " ~ ", pickedlist,sep="")
>         tmpzx <- eval(lm(lmexp,data=xd))
> 
> Essentially, I want to do:
>  lm(iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL, data=xd)
> thru a function that has the parameters passed thru TclTk and Perl......

I don't understand why that would work in S-PLUS!  You apply eval to
expressions or calls, but lm(mexp,data=xd) is not a call. Probably S-PLUS
has an implicit as.formula in its version.

The essence can be seen in

> lm(formula="y ~ x")
Error in x[[j]] : subscript out of bounds
> traceback()
[1] "eval(expr, envir, enclos)"                                        
[2] "eval(attr(formula, \"variables\"), data, sys.frame(sys.parent()))"
[3] "model.frame.default(formula = y ~ x, drop.unused.levels = TRUE)"  
[4] "model.frame(formula = y ~ x, drop.unused.levels = TRUE)"          
[5] "eval(expr, envir, enclos)"                                        
[6] "eval(mf, sys.frame(sys.parent()))"                                
[7] "lm(formula = y ~ x)"                                              

The point is that the formula argument should be a formula, not a 
character string, so this is not a bug per se.

There are lots of correct ways to do this.  Perhaps the simplest is

lm(as.formula(lmexp), data=xd)

but that will record the call as 

lm(formula = as.formula(lmexp), data = xd)

To avoid that, if you need to, use something like

do.call("lm", list(formula = as.formula(lmexp), data=xd))

(There are lots more ways too, including using parse or substitute.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ammann@metronet.com  Sat Sep 23 14:48:49 2000
From: ammann@metronet.com (Larry Ammann)
Date: Sat, 23 Sep 2000 08:48:49 -0500
Subject: [Rd] bug in apply with median
Message-ID: <39CCB4C0.9F104660@metronet.com>

I have found a problem in R version 1.1.1 when using apply with the
median function.
The problem can be illustrated with the following data matrix:

X1  X2  X3
1     2     3
 4    5     6
 7    8    NA

Enter this data matrix as X and then try
    apply(X,2,median,na.rm=T)
The problem here is that the median function returns a named scalar if
the number of
observations is odd, but returns an unnamed scalar if the number of
observations is
even. This confuses the apply function in this case at:

    ans.names <- names(ans[[1]])
    if (!ans.list)
        ans.list <- any(unlist(lapply(ans, length)) != l.ans)
    if (!ans.list && length(ans.names)) {
        all.same <- sapply(ans, function(x) all(names(x) == ans.names))
#here is the offending line
        if (!all(all.same))
            ans.names <- NULL
    }

This problem does not occur with S-Plus. My quick solution was to use
the quantile function
instead of the median function:

   apply(X,2,quantile,probs=.5,na.rm=T)

One way of fixing the problem then is to redefine median as

median <- function(x,na.rm=F,names=T)
quantile(x,probs=.5,na.rm=na.rm,names=names)

I don't know if this is a long-term solution though, since there may be
other functions with inconsistent
naming policies that can confuse apply as it is currently written.

Larry Ammann
Professor of Mathematical Sciences
University of Texas at Dallas
 http://www.utdallas.edu/~ammann


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Sep 23 15:55:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Sep 2000 16:55:58 +0200
Subject: [Rd] bug in apply with median
In-Reply-To: Larry Ammann's message of "Sat, 23 Sep 2000 08:48:49 -0500"
References: <39CCB4C0.9F104660@metronet.com>
Message-ID: <x2snqrrwch.fsf@blueberry.kubism.ku.dk>

Larry Ammann <ammann@metronet.com> writes:

> I have found a problem in R version 1.1.1 when using apply with the
> median function.
> The problem can be illustrated with the following data matrix:
> 
> X1  X2  X3
> 1     2     3
>  4    5     6
>  7    8    NA
> 
> Enter this data matrix as X and then try
>     apply(X,2,median,na.rm=T)
> The problem here is that the median function returns a named scalar if
> the number of
> observations is odd, but returns an unnamed scalar if the number of
> observations is
> even. This confuses the apply function in this case at:

for ( i in 1:1000 ) cat("Data frames are not matrices!\n")

> X<-matrix(c(1:8,NA),3,3)
> X
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6   NA
> apply(X,2,median,na.rm=T)
[1] 2.0 5.0 7.5

Works fine.

However,

> Z<-data.frame(X)
> apply(Z,2,median,na.rm=T)
Error in names(x) == ans.names : comparison (1) is possible only for vector types

Question is whether this is a bug. Apply() never promised to work on
non-arrays. When applied columnwise, it would anyway be more obvious
to use

> sapply(Z,median,na.rm=T)
 X1  X2  X3 
2.0 5.0 7.5 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep 25 08:48:16 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 25 Sep 2000 09:48:16 +0200
Subject: [Rd] constructing empty data.frames [RFC]
Message-ID: <14799.832.915696.744509@gargle.gargle.HOWL>

somewhat `esoteric' problem/bug :

## Constructing an empty data.frame  (e.g. for later rbind()ing), works with

data.frame(a = 1[-1])
## or
data.frame(a = 1[-1], b = "c"[-1])

## but {these give warnings, but *work* with S+ (5.1)
##      giving the NULL data.frame, i.e. the same as data.frame()
##      --- which I don't like either: NULL should behave as numeric(0) here!}:
data.frame(a = NULL)         # fails with R
data.frame(a = NULL, b= NULL)# fails


---------- 

This is really a request for comment.
In my opinion I should get data.frames with 1 or 2 columns and 0 rows in
all cases.  R fails completely, and S+ (5.1) gives the NULL.

I'd like to fix R such that  `` NULL behaves as numeric(0) '' in this
situation. 

Comments?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Sep 25 09:17:02 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 25 Sep 2000 10:17:02 +0200 (MET DST)
Subject: [Rd] Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ? (PR#669)
Message-ID: <200009250817.KAA01917@pubhealth.ku.dk>

This is not only bug report, but also a RFC (request for comments):

The basic problem is that there are (at least) two ways of easily getting
non-factor character columns in data.frames.
The first is  
    read.table(*, as.is = TRUE) 
and the second is
    data.frame(.., I(...), ..)	      

which differ in their result. Whereas the first produces `pure' character
columns in the data.frame, the second approach gives `AsIs' classed
columns (character, or, e.g. logical).

Now, as the following shows,  rbind.data.frame()  *is* buggy anyway,
I wonder if we shouldn't change read.table(*, as.is = TRUE)
such that the non-numeric columns of its result become "AsIs" classed as
well:

-----------

str(d1 <- data.frame(a=1:3, b = I(letters[1:3])))
## d1 is `alright'
## d0: The same but a `character' *not* protected by AsIs:
d0 <- d1
d0$b <- unclass(d0$b)
str(d0)
## Note that this is *really* the same as a what you get from
##  read.table(*, as.is = TRUE)
##  ----------
##  R's read.table() is S+ compatible; however I wonder if
##  we shouldn't add  "AsIs" classes to all non-numeric components...
##  the classes, shouldn't harm, but ensure consistency of treatment..

str(d11 <- rbind(d1, new = c(7, "N"))) ## alright
str(d01 <- rbind(d0, new = c(7, "N"))) ## all wrong :
## Both columns were coerced to factors !!
##-- S-PLUS 5 coerces both to "character" -- which is better,
##  since the new row *is* all character

## R makes nonsense with 'b' [factor w/ 1 level "N": NA NA NA 1]
## S+ 5.1 does exactly the right thing [both a & b still look like in d0,d1 :
str(d12 <- rbind(d1, new = data.frame(a= 7, b="N")))##
str(d02 <- rbind(d0, new = data.frame(a= 7, b="N")))##

---------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Sep 26 15:14:13 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Tue, 26 Sep 2000 16:14:13 +0200 (MET DST)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
Message-ID: <200009261414.QAA22305@pubhealth.ku.dk>


  I'm having some trouble with optim(method="L-BFGS-B"),
and I'm not sure I have the ability to track down and fix
what seem to be bugs within optim().
  I'm bootstrapping an original data set and fitting a model
to each bootstrapped data set.  For some bootstrapped samples,
optim() sets negative parameter values (despite the fact that
I have explicitly set non-zero lower bounds on the parameters)
and chokes.  For other samples, it appears to get into an infinite
loop (ignoring the finite value of maxit).
 
  Functions and samples that provoke the problem are below: I
was able to reproduce the problems running this with --vanilla.

  Not exactly a bug but: there is no tracing information built
into L-BFGS-B (setting trace=TRUE has no effect).

  Also, a general question: are both nlm() and optim() going to
be around indefinitely?  Should I be using one or the other?

  For the moment I've managed to (sort of) get around the problem
with try(), but the infinite loops are a real nuisance ...

cfunc2_function(input,N1,N2,G=1.0){
  pmin(1,1/((1+((input - N1)/N2))^G))
}

nllfun2g.boot_function(q,debug=FALSE){
#  if (i==93) debug <- TRUE
  N1_q[1]
  N2_q[2]
  G_q[3]
  L_cfunc2(boot.total,N1,N2,G)
  if (debug) cat(c(N1,N2,G,range(L)),"\n")
  r <- -sum(dbinom(boot.pred, boot.total, L, log=TRUE))
  if (!is.finite(r)) {
    cat(c(N1,N2,G,range(L)),"\n")
    cat(boot.pred,"\n")
    cat(boot.total,"\n")
    cat(L,"\n")
    cat(dbinom(boot.pred, boot.total, L, log=TRUE),"\n")
  }
  r
}

fuzz <- 0.001

boot.pred <- c(91,22,44,31,47,83,31,56,22,83,53,73)
boot.total <- c(900,150,900,200,150,100,200,300,150,300,200,500)
n <- try(optim(c(min(boot.total)-1,100,1),nllfun2g.boot,
        lower=rep(fuzz,3),upper=c(min(boot.total)-fuzz,Inf,Inf),
           method="L-BFGS-B",control=list(trace=TRUE),debug=TRUE))

boot.pred <- c(31,73,56,22,22,56,83,22,83,91,30,44)
boot.total <- c(200,100,300,150,150,300,100,150,300,900,500,900)
n <- optim(c(min(boot.total)-1,100,1),nllfun2g.boot,
        lower=rep(fuzz,3),upper=c(min(boot.total)-fuzz,Inf,Inf),
           method="L-BFGS-B",control=list(trace=TRUE),debug=TRUE)


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Sep 26 18:51:02 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 26 Sep 2000 19:51:02 +0200
Subject: [Rd] bug in apply with median
In-Reply-To: <x2snqrrwch.fsf@blueberry.kubism.ku.dk>
References: <39CCB4C0.9F104660@metronet.com>
 <x2snqrrwch.fsf@blueberry.kubism.ku.dk>
Message-ID: <14800.57862.150376.54471@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
(Sep 23):

    PD> Larry Ammann <ammann@metronet.com> writes:
    >> I have found a problem in R version 1.1.1 when using apply with the
    >> median function.
    >> The problem can be illustrated with the following data matrix:
    >> 
    >> X1  X2  X3
    >> 1     2     3
    >> 4    5     6
    >> 7    8    NA
    >> 
    >> Enter this data matrix as X and then try
    >> apply(X,2,median,na.rm=T)
    >> The problem here is that the median function returns a named scalar if
    >> the number of
    >> observations is odd, but returns an unnamed scalar if the number of
    >> observations is
    >> even. This confuses the apply function in this case at:

    PD> for ( i in 1:1000 ) cat("Data frames are not matrices!\n")

                                 ==============================
    >> X<-matrix(c(1:8,NA),3,3)
    >> X
    PD> [,1] [,2] [,3]
    PD> [1,]    1    4    7
    PD> [2,]    2    5    8
    PD> [3,]    3    6   NA
    >> apply(X,2,median,na.rm=T)
    PD> [1] 2.0 5.0 7.5

    PD> Works fine.

    PD> However,

    >> Z<-data.frame(X)
    >> apply(Z,2,median,na.rm=T)
    PD> Error in names(x) == ans.names : comparison (1) is possible only for vector types

    PD> Question is whether this is a bug. Apply() never promised to work on
    PD> non-arrays.

I think we should 
  either   make it promiss and do this
  or	   make it produce a warning    when used with data.frames

The above problem is too common for non-experts to stumble on..


    PD> When applied columnwise, it would anyway be more obvious to use

    >> sapply(Z,median,na.rm=T)
    PD> X1  X2  X3 
    PD> 2.0 5.0 7.5 

This could be what   
     apply(<dataframe>, 2, * )   
should do
whereas we could have
	apply(dfr, 1, *)  === apply(data.matrix(dfr), 1, *)
when dfr is a data.frame.

Opinions ?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Sep 26 20:52:47 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 26 Sep 2000 21:52:47 +0200
Subject: [Rd] subset()  wish: allow "select" for non-dataframes
Message-ID: <14800.65167.494938.453452@gargle.gargle.HOWL>

{Mainly to the author of the subset() function,
 but RFC to all "R-develers": }

Wouldn't it be worth redefining  subset.default() such
that `anything reasonable' would allow a select argument?

Currently, only subset.data.frame() allows a select argument,
and hence we can have

  > (x <- c(a=1, b=3, d= 7:10))
   a  b d1 d2 d3 d4 
   1  3  7  8  9 10 

  > subset(as.data.frame(rbind(x)), select = -(d2:d3))
    a b d1 d4
  x 1 3  7 10

{and ``subset(as.data.frame(rbind(x)))'' might already be a sensible
 definition for  subset.default  at least 
 if(!missing(select) && !is.null(names(x))); 
 and similarly for matrices.
}

---

Using  ranges and "-" in indices for names instead of just integers 
is a feature that I have been missing for a long time.
It would allow much more expressive code in some situations.


2nd thought: 
      One could even start thinking if we should n't even enhance
      "[" and "[[" instead of just  subset()...

I agree that one might not like things like   x[- d1] that are
undefined when not part of the index, but then 
"i , j" is also not really defined when not inside "[ .. ]" ...

--
[Evening musings;  maybe I'm too close to dream already...]

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Sep 26 21:27:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Sep 2000 22:27:27 +0200
Subject: [Rd] Re: subset()  wish: allow "select" for non-dataframes
In-Reply-To: Martin Maechler's message of "Tue, 26 Sep 2000 21:52:47 +0200"
References: <14800.65167.494938.453452@gargle.gargle.HOWL>
Message-ID: <x266nic30w.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> {Mainly to the author of the subset() function,
>  but RFC to all "R-develers": }

Man, that was many moons ago...

> Wouldn't it be worth redefining  subset.default() such
> that `anything reasonable' would allow a select argument?
> 
> Currently, only subset.data.frame() allows a select argument,
> and hence we can have
> 
>   > (x <- c(a=1, b=3, d= 7:10))
>    a  b d1 d2 d3 d4 
>    1  3  7  8  9 10 
> 
>   > subset(as.data.frame(rbind(x)), select = -(d2:d3))
>     a b d1 d4
>   x 1 3  7 10
> 
> {and ``subset(as.data.frame(rbind(x)))'' might already be a sensible
>  definition for  subset.default  at least 
>  if(!missing(select) && !is.null(names(x))); 
>  and similarly for matrices.
> }

This sounds doable.

> 2nd thought: 
>       One could even start thinking if we should n't even enhance
>       "[" and "[[" instead of just  subset()...
> 
> I agree that one might not like things like   x[- d1] that are
> undefined when not part of the index, but then 
> "i , j" is also not really defined when not inside "[ .. ]" ...

You do need to be careful since x[i] is ambiguous if "i" is both a
variable name in the environment and the name of an element of x. One
idea could be to allow indexing with unevaluated calls like
x[quote(-(d2:d3))] and internally have

if (is.language(ix)) {
    nl<-as.list(1:dim)
    names(nl)<-names(x)
    ix<-eval(ix,nl)
}

(good luck with [.data.frame &friends, though...)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Don.Wingate@intellichem.com  Wed Sep 27 02:34:49 2000
From: Don.Wingate@intellichem.com (Don Wingate)
Date: Tue, 26 Sep 2000 18:34:49 -0700
Subject: [Rd] Wrapping R for windows in a com dll
Message-ID: <MPEHJEGLNPNFGJFOJMKNMEBFCAAA.Don.Wingate@IntelliChem.com>

Dear R Community,

I am trying to create a com dll wrapper for R in a mannor similiar to the R
Com Server by Thomas Baier except that I would much rather avoid using the
proxy dll ("Rproxy.dll"). Perhaps I don't really understand the reason for
going throug the proxy in the first place, but it seems like an unnecessary
indirection for an application which is not intended to use DCom. To this
end I have been trying to use the functions declared in rproxy_impl.h (I've
tried rtest.c as well, aka the readme file in the front-ends directory). It
is my understanding that these functions provide access to interface
functions contained in R.dll. However, there does not seem to be an R.exp or
R.lib file in the source code or R binary distribution.

I work in the VC++ ide and am building a VC++ project. As I am sorely
unpracticed in the use of makefiles and the command line for compiling, I
have been avoiding the daunting task of compiling the R dll itself, if in
fact that would be at all helpful. (From what I have been able to gather, it
is either not possible or a big problem to compile R inside the VC++ ide, is
this correct??)

My questions are as follows:

1) Is it possible to build a project containing calls to functions contained
in rtest.c and/or rproxy_impl.h from the VC++ ide?

2) Are the compiled R.exp and/or R.lib files available?

3) If these files are not available (or even if they are) is there another
way to access R.dll which I have not tried, other than through RProxy.dll?

4) Is there any documentation on the interface exposed by R.dll and its
dependencies?

Thankyou in advance,

Don Wingate.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Sep 27 09:37:42 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 27 Sep 2000 10:37:42 +0200
Subject: [Rd] bug in apply with median -- fixed in R-devel (NULL == ..)
In-Reply-To: <39CCB4C0.9F104660@metronet.com>
References: <39CCB4C0.9F104660@metronet.com>
Message-ID: <14801.45526.915173.955637@gargle.gargle.HOWL>

>>>>> "LarAm" == Larry Ammann <ammann@metronet.com> writes:

    LarAm> I have found a problem in R version 1.1.1 when using apply with the
    LarAm> median function.
    LarAm> The problem can be illustrated with the following data matrix:

    LarAm> X1  X2  X3
    LarAm> 1     2     3
    LarAm> 4    5     6
    LarAm> 7    8    NA

    LarAm> Enter this data matrix as X and then try
    LarAm>	 apply(X,2,median,na.rm=T)

Reproducible by

 X <- matrix(c(1:8,NA),3,3, dimnames = list(1:3,paste("V",1:3,sep="")))
 apply(X,2,median,na.rm=T)

Thank you!

    LarAm> The problem here is that the median function returns a named
    LarAm> scalar if the number of observations is odd, but returns an
    LarAm> unnamed scalar if the number of observations is even. This
    LarAm> confuses the apply function in this case at:

    LarAm>    ans.names <- names(ans[[1]])
    LarAm>    if (!ans.list)
    LarAm>       ans.list <- any(unlist(lapply(ans, length)) != l.ans)
    LarAm>    if (!ans.list && length(ans.names)) {
    LarAm>       all.same <- sapply(ans, function(x) all(names(x) == ans.names))
    LarAm> #here is the offending line
    LarAm>    if (!all(all.same))
    LarAm>        ans.names <- NULL
    LarAm> }

Yes, your analysis is correct.

The reason this problem is now fixed (in R-devel, aka "1.2 unstable"),
is explained by the following entry in the BUG FIXES part of the ./NEWS
file :

    o	NULL == ... now gives logical(0) instead of an error.
	This fixes a bug with e.g. apply(X,2,median, na.rm = TRUE) and
	all(NULL == NULL) is now TRUE.




    LarAm> This problem does not occur with S-Plus. My quick solution was to use
    LarAm> the quantile function
    LarAm> instead of the median function:

    LarAm> apply(X,2,quantile,probs=.5,na.rm=T)

    LarAm> One way of fixing the problem then is to redefine median as

    LarAm> median <- function(x,na.rm=F,names=T)
    LarAm> quantile(x,probs=.5,na.rm=na.rm,names=names)

    LarAm> I don't know if this is a long-term solution though, since there may be
    LarAm> other functions with inconsistent
    LarAm> naming policies that can confuse apply as it is currently written.

yes.
and the above fix should fix all these as well!

    LarAm> Larry Ammann
    LarAm> Professor of Mathematical Sciences
    LarAm> University of Texas at Dallas

Thanks again!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed Sep 27 10:46:06 2000
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Wed, 27 Sep 2000 11:46:06 +0200 (MET DST)
Subject: [Rd] R 1.1.0: scan (PR#672)
Message-ID: <200009270946.LAA00625@pubhealth.ku.dk>


I'm using R 1.1.0 on Linux and HP-UX 10.20. I encountered a bug
in the HP-UX version.

When I do this:

lines <- scan(file="filename", what="", sep="\n", strip.white=c(TRUE), quiet=TRUE) 

.. it works OK on Linux. On HP-UX, the last line is read in
twice, giving 'lines' an extra element that is identical to the 
previous element.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Sep 27 13:51:50 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 27 Sep 2000 13:51:50 +0100 (BST)
Subject: [Rd] Wrapping R for windows in a com dll
In-Reply-To: <MPEHJEGLNPNFGJFOJMKNMEBFCAAA.Don.Wingate@IntelliChem.com>
Message-ID: <Pine.GSO.4.05.10009271343020.20991-100000@auk.stats>

On Tue, 26 Sep 2000, Don Wingate wrote:

> Dear R Community,
> 
> I am trying to create a com dll wrapper for R in a mannor similiar to the R
> Com Server by Thomas Baier except that I would much rather avoid using the
> proxy dll ("Rproxy.dll"). Perhaps I don't really understand the reason for
> going throug the proxy in the first place, but it seems like an unnecessary
> indirection for an application which is not intended to use DCom. To this

Right, but it *is* intended to use DCOM.  You can directly link the R.dll
into your application too.

> end I have been trying to use the functions declared in rproxy_impl.h (I've
> tried rtest.c as well, aka the readme file in the front-ends directory). It
> is my understanding that these functions provide access to interface
> functions contained in R.dll. However, there does not seem to be an R.exp or
> R.lib file in the source code or R binary distribution.

There is in the binary distribution, as well as instructions on
how to build them in the source distribution.

> I work in the VC++ ide and am building a VC++ project. As I am sorely
> unpracticed in the use of makefiles and the command line for compiling, I
> have been avoiding the daunting task of compiling the R dll itself, if in
> fact that would be at all helpful. (From what I have been able to gather, it
> is either not possible or a big problem to compile R inside the VC++ ide, is
> this correct??)

VC++ is a big problem, period.  If it were standards-conforming, one could
build R with it, but it has too many bugs.

> My questions are as follows:
> 
> 1) Is it possible to build a project containing calls to functions contained
> in rtest.c and/or rproxy_impl.h from the VC++ ide?

rtest.c, yes. It's easy, but telling anyone how to use an IDE is
very lengthy, and the command-line versions are much much shorter.

> 2) Are the compiled R.exp and/or R.lib files available?

R.exp is in rw1011sp.zip!  Read readme.packages there, which has
explicit instructions for using VC++ to build an import library.

> 3) If these files are not available (or even if they are) is there another
> way to access R.dll which I have not tried, other than through RProxy.dll?
> 
> 4) Is there any documentation on the interface exposed by R.dll and its
> dependencies?

Yes, in the front-ends directory.  All you can do is pass commands to
R and receive back the results.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Sep 27 20:12:07 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 27 Sep 2000 15:12:07 -0400
Subject: [Rd] R CMD check   dev.cur()
Message-ID: <39D24687.91A52BFD@bank-banque-canada.ca>

I am having trouble tracking down a "R CMD check"  problem in Linux.
The code works in Solaris and interactively in Linux. Is it possible
that dev.cur() when running "R CMD check" returns 1 in Solaris and
something different in Linux (Mandrake 2.2.14-1 and Gnome)?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Sep 27 20:21:23 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 27 Sep 2000 21:21:23 +0200 (CEST)
Subject: [Rd] R CMD check   dev.cur()
In-Reply-To: <39D24687.91A52BFD@bank-banque-canada.ca>
References: <39D24687.91A52BFD@bank-banque-canada.ca>
Message-ID: <14802.18611.142952.540878@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 27 Sep 2000 15:12:07 -0400,
>>>>> Paul Gilbert (PG) wrote:

PG> I am having trouble tracking down a "R CMD check"  problem in Linux.
PG> The code works in Solaris and interactively in Linux. Is it possible
PG> that dev.cur() when running "R CMD check" returns 1 in Solaris and
PG> something different in Linux (Mandrake 2.2.14-1 and Gnome)?

Which version of R?

Could you not simply do a

	cat(dev.cur(), file="xxx")

or something similar to see what it returns? 

best,
.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Sep 28 01:03:00 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 27 Sep 2000 20:03:00 -0400
Subject: [Rd] R CMD check   dev.cur()
References: <39D24687.91A52BFD@bank-banque-canada.ca> <14802.18611.142952.540878@galadriel.ci.tuwien.ac.at>
Message-ID: <39D28AB4.2EB80924@bank-banque-canada.ca>

PG> I am having trouble tracking down a "R CMD check"  problem in Linux.

PG> The code works in Solaris and interactively in Linux. Is it possible

PG> that dev.cur() when running "R CMD check" returns 1 in Solaris and
PG> something different in Linux (Mandrake 2.2.14-1 and Gnome)?

FL>Which version of R?

R 1.1.1

FL>Could you not simply do a
FL>      cat(dev.cur(), file="xxx")

Both Solaris and Linux give 2 so I guess that is not the problem. I'll
check further.
Thanks,
Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Thu Sep 28 07:08:51 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Thu, 28 Sep 2000 14:08:51 +0800 (GMT-8)
Subject: [Rd] New Web page -- Ideas list
In-Reply-To: <14802.18611.142952.540878@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.21.0009281340120.3143-100000@sununx.comp.nus.edu.sg>

Hi,
I was looking over the developer page of the new web site. In the ideas
section dynamic graphics and mapping are mentioned. I have a few comments
and wanted to get some feedback. 

Mapping: I am working on a package for mapping (I have sent notice to the
list). The ideas section of the web page mentions the Beckers/Wilks
code. I think ther model is very restrictive and perhaps a better system
could be implemented. I think there are two goals that the mapping
routines/data structures should address 1) display, and 2) analysis. On
the display end what I have noticed that could be improved: a) The display
when resized does not stay equally scaled, this is important for map
display. b) The polygon code does not deal well with multi-part polygons,
many gis and graphics systems allow holes, and islands, the polygon and
clipping routines can easily be adjusted to handle this. I can volunteer
to
do the polygon stuff, I have looked at the code in graphics.c and I think
I undestand what is going on. A zoom function on the device would be very
useful, especially if it would interact withhow the device is partioned by
the user, so that the first level of zoom would be to an individual
plot. These are the most immediate things that affect the R base code
directly.

Some other things that are more of a wishlist would be better color and
symbol facilities, I just finished writing an interactive color picker and
pallete selector using graphapp that works nicely from R. A tree node data
type that can be passed as a SEXP for making linked lists, binary trees
etc. I am writing an R+ tree as part of the map object and i am worried
about the overhead of using lists as node structures. For most spatial
calculations (variograms, polygon adjacency, weight matrices, neighbor
finding etc.) trees are essential for better than O(n^2) performance.

I hope my comments are construed as constructive rather than whining. Most
of what I have indicated I would be willing to help implement.

Nicholas 


                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Sep 28 13:51:12 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 28 Sep 2000 13:51:12 +0100 (BST)
Subject: [Rd] Re: [R] Nothing can be pasted...
Message-ID: <200009281251.NAA10367@toucan.stats.ox.ac.uk>

> Date: Thu, 28 Sep 2000 14:28:31 +0200 (CEST)
> From: gb <gb@stat.umu.se>
> 
> 
> Compiling R-1.1.1 on RedHat Linux 7.0 gives lots of warnings like
> 
> In file included from tabulate.c:24:
> ../../src/include/config.h:192:21: warning: nothing can be pasted after
> this token
> 
> which I didn't see with RH6.2. However,  R  seems to run just fine
> nevertheless. The offending line in config.h is
> 
> #define DYNLOADEXT  "." ## SHLIBEXT
> 
> I'm not too familiar with  C  programming, but if ## SHLIBEXT
> is meant as a comment, shouldn't it be surrounded by /* */?

A bit more on this. I understood from PD's recent post that RH7.0 uses
gcc 2.96, even though that is not yet released accoring to the gcc site
(gcc.gnu.org) has as NEWS for Sept 11, 2000:

   Neil Booth has contributed a new lexer and macro-expander for the C
   preprocessor. The lexer makes a single pass over the source files,
   whereas previously it made two. The macro expander works without
   re-scanning for nested macros to expand, and operates on lexical tokens
   instead of text strings.

   ISO C, C++, and Objective C use the new preprocessor. Traditional (K+R)
   C, Fortran, and Chill use an older implementation (taken from GCC 1)
   which obeys the rules for pre-standard C preprocessing. Either version
   may be used to preprocess assembly language.

I wonder if this is a problem with using a beta compiler?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Sep 28 16:05:53 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Sep 2000 17:05:53 +0200
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: Prof Brian Ripley's message of "Thu, 28 Sep 2000 13:51:12 +0100 (BST)"
References: <200009281251.NAA10367@toucan.stats.ox.ac.uk>
Message-ID: <x24s30sgj2.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> > which I didn't see with RH6.2. However,  R  seems to run just fine
> > nevertheless. The offending line in config.h is
> > 
> > #define DYNLOADEXT  "." ## SHLIBEXT
> > 
> > I'm not too familiar with  C  programming, but if ## SHLIBEXT
> > is meant as a comment, shouldn't it be surrounded by /* */?
> 

> I wonder if this is a problem with using a beta compiler?

I certainly wouldn't put such a goof beyond RedHat, but it might be a
question of tighter standards compliance. What happens if the spaces
around ## are removed? (The error message might read as "can't paste
onto a whitespace token")

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Thu Sep 28 16:12:18 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Thu, 28 Sep 2000 10:12:18 -0500 (CDT)
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: <x24s30sgj2.fsf@blueberry.kubism.ku.dk> from Peter Dalgaard BSA at "Sep 28, 2000 05:05:53 pm"
Message-ID: <200009281512.KAA04710@goose.stat.umn.edu>

Peter Dalgaard BSA wrote:
> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > > which I didn't see with RH6.2. However,  R  seems to run just fine
> > > nevertheless. The offending line in config.h is
> > > 
> > > #define DYNLOADEXT  "." ## SHLIBEXT
> > > 
> > > I'm not too familiar with  C  programming, but if ## SHLIBEXT
> > > is meant as a comment, shouldn't it be surrounded by /* */?
> > 
> 
> > I wonder if this is a problem with using a beta compiler?
> 
> I certainly wouldn't put such a goof beyond RedHat, but it might be a
> question of tighter standards compliance. What happens if the spaces
> around ## are removed? (The error message might read as "can't paste
> onto a whitespace token")
> 

White space should be fine, from my reading of Harbison & Steele at least.
The old KR way of doing token concatenation was

#define CONCAT(x,y) x/**/y

and there leaving white space would not work, but with the ## operator

#define CONCAT(x,y) x##y

and

#define CONCAT(x,y) x ## y

should be equivalent.

Since the two bits are literal strings, it would also be possible to define

#define DYNLOADEXT  "." SHLIBEXT

My fear is that the preprocessor is complaining about SHLIBEXT being
defined but empty because of a configure problem.

luke


-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Sep 28 16:43:29 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 28 Sep 2000 08:43:29 -0700
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: <200009281251.NAA10367@toucan.stats.ox.ac.uk>
 (Prof Brian Ripley's message of "Thu, 28 Sep 2000 13:51:12 +0100 (BST)")
References: <200009281251.NAA10367@toucan.stats.ox.ac.uk>
Message-ID: <87bsx8o732.fsf@jeeves.blindglobe.net>

>>>>> "PBR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:


    PBR> A bit more on this. I understood from PD's recent post that
    PBR> RH7.0 uses gcc 2.96, even though that is not yet released
    PBR> accoring to the gcc site (gcc.gnu.org) has as NEWS for Sept
    PBR> 11, 2000:


    PBR> I wonder if this is a problem with using a beta compiler?

I would be very careful with upgrading a production machine to RedHat
7.0; based on my recent experiences with Debian/Woody, it's hazardous
to stability (Debian/Woody is currently is messed up with similar but
slightly better patched (later) version of glibc, though using older
version of gcc (2.95.2))

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Sep 28 17:05:44 2000
From: gb@stat.umu.se (gb)
Date: Thu, 28 Sep 2000 18:05:44 +0200 (CEST)
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: <x24s30sgj2.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.21.0009281804570.2168-100000@pc16.stat.umu.se>

On 28 Sep 2000, Peter Dalgaard BSA wrote:

> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > > which I didn't see with RH6.2. However,  R  seems to run just fine
> > > nevertheless. The offending line in config.h is
> > > 
> > > #define DYNLOADEXT  "." ## SHLIBEXT
> > > 
> > > I'm not too familiar with  C  programming, but if ## SHLIBEXT
> > > is meant as a comment, shouldn't it be surrounded by /* */?
> > 
> 
> > I wonder if this is a problem with using a beta compiler?
> 
> I certainly wouldn't put such a goof beyond RedHat, but it might be a
> question of tighter standards compliance. What happens if the spaces
> around ## are removed? (The error message might read as "can't paste
> onto a whitespace token")
> 

I tried that, but I get the same warnings.

Gran

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Sep 28 17:21:32 2000
From: gb@stat.umu.se (gb)
Date: Thu, 28 Sep 2000 18:21:32 +0200 (CEST)
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: <200009281512.KAA04710@goose.stat.umn.edu>
Message-ID: <Pine.LNX.4.21.0009281812510.2168-100000@pc16.stat.umu.se>

On Thu, 28 Sep 2000, Luke Tierney wrote:

> Peter Dalgaard BSA wrote:
> > Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> > 
> > > > which I didn't see with RH6.2. However,  R  seems to run just fine
> > > > nevertheless. The offending line in config.h is
> > > > 
> > > > #define DYNLOADEXT  "." ## SHLIBEXT
> > > > 
> > > > I'm not too familiar with  C  programming, but if ## SHLIBEXT
> > > > is meant as a comment, shouldn't it be surrounded by /* */?
> > > 
> > 
> > > I wonder if this is a problem with using a beta compiler?
> > 
> > I certainly wouldn't put such a goof beyond RedHat, but it might be a
> > question of tighter standards compliance. What happens if the spaces
> > around ## are removed? (The error message might read as "can't paste
> > onto a whitespace token")
> > 
> 
> White space should be fine, from my reading of Harbison & Steele at least.
> The old KR way of doing token concatenation was
> 
> #define CONCAT(x,y) x/**/y
> 
> and there leaving white space would not work, but with the ## operator
> 
> #define CONCAT(x,y) x##y
> 
> and
> 
> #define CONCAT(x,y) x ## y
> 
> should be equivalent.
> 
> Since the two bits are literal strings, it would also be possible to define
> 
> #define DYNLOADEXT  "." SHLIBEXT

This did the trick! But still this warning several times:

../../src/include/FFTab.h:40:29: warning: pasting would not give a valid
preprocessing token

(But different line numbers). Line 40:

	{ F77_QSYMBOL(lminfl),	F77_SYMBOL(lminfl)},

Gran 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 28 18:12:44 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Sep 2000 19:12:44 +0200 (MET DST)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
Message-ID: <200009281712.TAA20426@pubhealth.ku.dk>


> From: bolker@zoo.ufl.edu
> Date: Tue, 26 Sep 2000 16:14:13 +0200 (MET DST)
> 
>   I'm having some trouble with optim(method="L-BFGS-B"),
> and I'm not sure I have the ability to track down and fix
> what seem to be bugs within optim().
>   I'm bootstrapping an original data set and fitting a model
> to each bootstrapped data set.  For some bootstrapped samples,
> optim() sets negative parameter values (despite the fact that
> I have explicitly set non-zero lower bounds on the parameters)
> and chokes.  For other samples, it appears to get into an infinite
> loop (ignoring the finite value of maxit).
>  
>   Functions and samples that provoke the problem are below: I
> was able to reproduce the problems running this with --vanilla.
> 
>   Not exactly a bug but: there is no tracing information built
> into L-BFGS-B (setting trace=TRUE has no effect).

It's a feature, on the TODO list to be added one day.

>   Also, a general question: are both nlm() and optim() going to
> be around indefinitely?  Should I be using one or the other?

There are no plans to remove either.  `indefinitely' is not part
of the non-warranty.
 
>   For the moment I've managed to (sort of) get around the problem
> with try(), but the infinite loops are a real nuisance ...

On Solaris, I get neither negative values nor an infinite loop
on your examples. 

On Linux RH6.2/gcc 2.95.2 I get

NA 1 NA 1 1 1 1 0.6831783 1 0.6831783 1 NA 
NA -Inf NA -Inf -Inf -Inf -Inf -160.2173 -Inf -107.0805 -Inf NA 
Error in optim(c(min(boot.total) - 1, 100, 1), nllfun2g.boot, lower = rep(fuzz,  
: 
        L-BFGS-B needs finite values of fn

for the first, and probably a loop for the second.  I think this is
the usual problem with inconsistent internal precision on Linux
compilers, so try compiling optim.c with -ffloat-store to make gcc
IEEE-compliant.  (At least, that's what the Linux gcc man page says.)

Can you provide some evidence for negative parameter values?  That's
not supposed to happen, but as I rarely fail to supply derivatives,
I have not tested it much.

Finally, I think you have omitted to supply scaling consts for your problem,
and optim will work a lot better if you do, as it will also do if
you can supply analytical derivatives.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From technologic@mediaone.net  Thu Sep 28 16:12:51 2000
From: technologic@mediaone.net (technologic@mediaone.net)
Date: Thu, 28 Sep 00 10:12:51 EST
Subject: [Rd] Announcement
Message-ID: <technologic@mediaone.net>

Hello-

I'm writing to you for a request to see our new site, http://www.buyitpc.com/signup.html   and the add your name to our list if you like to know 
about computer components and software!

http://www.buyitpc.com

Thank you for your time!


There is a legal way of sending large ammounts of e-mails. 
If you want to show that you are in full compliance with the law and are completely legal, you shall  observe the following issues:

1.	The term "Advertisement" shall appear as the first word of the subject line.
2.	Paste this statement below into the beginning or end of your e-mail.

This message is sent in compliance of e-mail bill: SECTION 301, Paragraph (a)(2)(C) of s. 1618
Sender : Tech Logic Comptuers - BuyIt PC - La Mirada, CA.
Phone : 562 943 7745
E-mail : sales@buyitpc.com
To be removed from our mailing list, simply reply with "REMOVE" in the subject. 

By pasting the above announcement into all of the unsolicited e-mails you send, people will realize that you are obviously not breaking any laws. And that's a very important point that should be made.
3.	Finally, you shall honor the REMOVE requests not later than 48 hours after receipt of the request, by cease initiating transmissions to the requester and removing him or her from the correspondent mailing list.

To know more about this issue, consut the "Unsolicited Commercial Electronic Mail Choice Act of 1997'':
http://www.senate.gov/~murkowski/commercialemail/S771index.html

All rigths reserved.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Sep 28 18:33:58 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 28 Sep 2000 12:33:58 -0500
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: gb's message of "Thu, 28 Sep 2000 18:21:32 +0200 (CEST)"
References: <Pine.LNX.4.21.0009281812510.2168-100000@pc16.stat.umu.se>
Message-ID: <qxpya0ch14p.fsf@verdi.stat.wisc.edu>

I think some of the behaviors with respect to ## has changed in recent
versions of gcc. The following quote from the latest gcc cpp.texinfo
file might be relevent as far as the warnings about F77_SYMBOL is
concerned :



The following features are deprecated and will likely be removed at some
point in the future:-

@itemize @bullet

@item Attempting to paste two tokens which together do not form a valid
preprocessing token

The preprocessor currently warns about this and outputs the two tokens
adjacently, which is probably the behavior the programmer intends.  It
may not work in future, though.

Most of the time, when you get this warning, you will find that @samp{##}
is being used superstitiously, to guard against whitespace appearing
between two tokens.  It is almost always safe to delete the @samp{##}.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Don.Wingate@intellichem.com  Fri Sep 29 00:21:38 2000
From: Don.Wingate@intellichem.com (Don Wingate)
Date: Thu, 28 Sep 2000 16:21:38 -0700
Subject: [Rd] creating custom I/O for R
Message-ID: <MPEHJEGLNPNFGJFOJMKNKEBNCAAA.Don.Wingate@IntelliChem.com>

Dear R developers,

I am building an ActiveX Com wrapper for R. I have successfully implemented
an Evaluate function using rproxy_impl.c and rtest.c as examples. The Com
object as it stands at the moment is similar to Thomas Baier's automation
server StatConnectorSrv.exe except that it does not use the Proxy. My goal
it to include a couple of activeX controls in the library: One to provide a
terminal-like interface to R and the other to provide a window for graphics
output.

These two activeX components will serve the exact functions as the
corresponding components of RGui.exe. The difference (and great benefit) is
that as ActiveX components, they can be placed inside an ActiveX container
(like a VB form) and manipulated as an application developer sees fit.

My questions involve how to accomplish these goals:

1) Graphics.

a. For the graphics output, is there a way to pass R a Windows GDI
(graphics) device to draw with? (This would be a very helpful feature!)

b. If not, is there a way to get a metafile and/or a bitmap of a plot
without having first displayed the plot in the standard window?

2) Terminal

a. Is possible to quickly explain the mechanism provided by the functions
pointed at by the members WriteConsole and ReadConsole of the struct
structRstart?

I would appreciate any help and/or suggestions.

Thanks, Don Wingate.

P.S. Thankyou Prof. Ripley for your help earlier.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep 29 07:37:03 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 29 Sep 2000 07:37:03 +0100 (BST)
Subject: [Rd] creating custom I/O for R
In-Reply-To: <MPEHJEGLNPNFGJFOJMKNKEBNCAAA.Don.Wingate@IntelliChem.com>
Message-ID: <Pine.GSO.4.05.10009290732350.7403-100000@auk.stats>

On Thu, 28 Sep 2000, Don Wingate wrote:

> Dear R developers,
> 
> I am building an ActiveX Com wrapper for R. I have successfully implemented
> an Evaluate function using rproxy_impl.c and rtest.c as examples. The Com
> object as it stands at the moment is similar to Thomas Baier's automation
> server StatConnectorSrv.exe except that it does not use the Proxy. My goal
> it to include a couple of activeX controls in the library: One to provide a
> terminal-like interface to R and the other to provide a window for graphics
> output.
> 
> These two activeX components will serve the exact functions as the
> corresponding components of RGui.exe. The difference (and great benefit) is
> that as ActiveX components, they can be placed inside an ActiveX container
> (like a VB form) and manipulated as an application developer sees fit.
> 
> My questions involve how to accomplish these goals:
> 
> 1) Graphics.
> 
> a. For the graphics output, is there a way to pass R a Windows GDI
> (graphics) device to draw with? (This would be a very helpful feature!)

Do you mean draw on?  If so, no, but the devga device could be modified to
do so.

> b. If not, is there a way to get a metafile and/or a bitmap of a plot
> without having first displayed the plot in the standard window?

Use a win.metafile device. See ?windows. See also ?bmp.

> 2) Terminal
> 
> a. Is possible to quickly explain the mechanism provided by the functions
> pointed at by the members WriteConsole and ReadConsole of the struct
> structRstart?

src/unix/system.txt is the documentation.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 29 14:37:47 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 29 Sep 2000 09:37:47 -0400
Subject: [Rd] Re: [R] non-ideal behavior in princomp/ not a feature but a bug
References: <F169284AF6DDD111AA000001FAF836E8012308D8@LLNBBS22>
Message-ID: <39D49B2B.C054D6FA@bank-banque-canada.ca>

>2. However, not all matrices work, such as the first one I tried yesterday.
>Here is
>an example of a matrix which does not work.
>> x
>     [,1] [,2] [,3] [,4]
>[1,] -0.4 -1.6 -1.0 -1.8
>[2,] -2.2 -0.3  1.4  0.2
>> princomp(x)
>Error in princomp(x) : covariance matrix is not non-negative definite

This does not happen with this example in Solaris, but I have had similar
problems with eigen before and had to use something like eigen( (cv + t(cv))/2 )
to avoid it. It seems to me that if eigen is called with symmetric = TRUE, as is
done in princomp, then eigen should return an error message about a
non-symmetric matrix, rather than return a possibly spurious answer from which
negative eigenvalues are checked to test for a non symmetric matrix.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Sep 29 21:49:08 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Fri, 29 Sep 2000 16:49:08 -0400 (EDT)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
In-Reply-To: <200009281712.TAA20426@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10009291633590.22920-100000@bolker.zoo.ufl.edu>

On Thu, 28 Sep 2000 ripley@stats.ox.ac.uk wrote:

> It's a feature, on the TODO list to be added one day.

  A quick hack (if anyone wants to do it) is to change line 975 from

/*	Rprintf("in lbfgsb - %s\n", task);*/

 to

	if (trace) Rprintf("in lbfgsb - %s\n", task);

however, the debugging output that you get is pretty ugly.

> >   Also, a general question: are both nlm() and optim() going to
> > be around indefinitely?  Should I be using one or the other?

  Well, my question was more whether one was preferred or not ... I did
see a comment in some NEWS file at some point that a built-in function had
been switched to optim() and so should converge more often.

  At your suggestion I compiled optim.c (and ../appl/lbfgsb.c for good
measure) with -ffloat-store.  The negative parameter jumps went away, but
I can still provoke optim() to hang with the right (not uncommon) choice
of bootstrap values.  Adding what I thought were reasonable parscale
values makes my code hang in different places [i.e. the particular values
that I give below are no longer a problem], but doesn't stop it hanging or
even reduce the frequency with which it hangs.  Perhaps now that I have
ffloat-store enabled the values below will hang under Solaris as well.

  Should ffloat-store be enabled in general for compilation on Linux
boxes?

  Just for the record, the apparent internal behavior (which I extracted
by uncommenting/modifying line 975 of optim.c as above) is that the
routine does task FG_START, followed by 20 FG_LNSRCH, followed by
ABNORMAL_TERMINATION_IN_LNSRCH, then repeats this indefinitely.  I
wouldn't mind so much if optim/lbfgsb looped until a maximum number of
iterations and then stopped with an error code, but as it stands these
particular cycles never make it to an iteration check and so the loop
never stops -- in order to do the bootstrap run I have to sit and hit
Ctrl-C to restart every time it looks like it's hanging.

  I agree that supplying derivatives would probably fix the problem
(parscale doesn't seem to help enough to fix the problem), but I'm in part
trying to provide this as a tool for non-analytically-inclined students
and I don't want to have to hold their hands while they take the
derivatives of their functions ...

 I greatly appreciate the time that you, and the rest of the core team,
have put into R.

  Ben Bolker

======================
cfunc2_function(input,N1,N2,G=1.0){
  pmin(1,1/((1+((input - N1)/N2))^G))
}

nllfun2g.boot_function(q,debug=FALSE){
  N1_q[1]
  N2_q[2]
  G_q[3]
  maxval <- 1e8
  L_cfunc2(boot.total,N1,N2,G)
  if (debug) cat(c(N1,N2,G,range(L)),"\n")
  r <- -sum(dbinom(boot.pred, boot.total, L, log=TRUE))
  r[!is.finite(r)] <- maxval*sign(r[!is.finite(r)])
  r
}
  
debug <- FALSE
trace <- TRUE
fuzz <- 0.001

## hangs

boot.pred <- c(53,73,73,44,22,31,73,22,53,53,91,73)
boot.total <- c(200,500,100,900,150,200,500,150,200,200,900,100)

n <- try(optim(c(min(boot.total)-1,100,1),nllfun2g.boot,
        lower=rep(fuzz,3),upper=c(min(boot.total)-fuzz,Inf,Inf),
           method="L-BFGS-B",control=list(trace=trace),debug=debug))


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david@orion-10.cs.byu.edu  Fri Sep 29 21:57:58 2000
From: david@orion-10.cs.byu.edu (david@orion-10.cs.byu.edu)
Date: Fri, 29 Sep 2000 22:57:58 +0200 (MET DST)
Subject: [Rd] pretty not covering the range properly (PR#673)
Message-ID: <200009292057.WAA02794@pubhealth.ku.dk>

When I issue the command:

if ( c(2.8,3)[1] < pretty (c(2.8,3))[1]) print ("problem")

the result is "problem" prints.
I have traced it to bits and the 2.8 of the returned vector from pretty is slightly larger.
This seems to be due to the conversion to base 10 with the ns and unit variables in src/appl/pretty.c.

Anyway if I do something like:
hist(c(2.8,3))
it fails as well because it uses pretty.

Thanks for you attention,
DavidMcLaughlin@byu.edu




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 23
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Fri Sep 29 22:18:10 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Fri, 29 Sep 2000 23:18:10 +0200 (MET DST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
Message-ID: <200009292118.XAA02892@pubhealth.ku.dk>


examples:

1) Fails to report that components 2 and 3 differ

all.equal(list(1,2,3,zap=1),list(1,3,4,zap=2))
[1] "Component zap: Mean relative  difference: 1


2) Incorrectly asserts all are equal when components 2 and 3 differ

> all.equal(list(1,2,3,zap=1),list(1,3,4,zap=1))
[1] TRUE

3) Removing named component reveals differences:

> all.equal(list(1,2,3,1),list(1,3,4,1))
[1] "Component 2: Mean relative  difference: 0.5"      
[2] "Component 3: Mean relative  difference: 0.3333333"

4) Unequal first component reveals differences

> all.equal(list(2,2,3,zap=1),list(1,3,4,zap=1))
[1] "Component : Mean relative  difference: 0.5"
[2] "Component : Mean relative  difference: 0.5"
[3] "Component : Mean relative  difference: 0.5"
> all.equal(list(2,2,3,zap=1),list(1,3,4,zap=2))
[1] "Component : Mean relative  difference: 0.5" 
[2] "Component : Mean relative  difference: 0.5" 
[3] "Component : Mean relative  difference: 0.5" 
[4] "Component zap: Mean relative  difference: 1"
> 

5) Second component IS equal, but:

> all.equal(list(2,2,3,zap=1),list(1,2,4,zap=2))
[1] "Component : Mean relative  difference: 0.5" 
[2] "Component : Mean relative  difference: 0.5" 
[3] "Component : Mean relative  difference: 0.5" 
[4] "Component zap: Mean relative  difference: 1"

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

Chuck Berry

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep  1 07:10:34 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Sep 2000 08:10:34 +0200 (MET DST)
Subject: [Rd] plot(x,y,axes=F) (PR#650)
Message-ID: <200009010610.IAA06642@pubhealth.ku.dk>

On Thu, 31 Aug 2000 kye@ams.sunysb.edu wrote:

> Full_Name: Kenny Ye
> Version: R-1.1.1
> OS: Solaris 2.6
> Submission from: (NULL) (129.49.6.133)
> 
> 
> when i use plot(x,y,axes=F), the axes and the box are still ploted.

Not in this example on my Solaris 2.6 R-1.1.1 system:

plot(1:10, 1:10, axes=FALSE)


Two possibilities spring to mind:

1) F is a variable that has a value interpreted as true.  (In R you
need to use FALSE to be safe.)

2) x is not a vector but a classed R object and you are picking up
a plot method that does not support axes=FALSE.

This shows the importance of the advice in the FAQ on bugs reporting:

`Please include an example that reproduces the problem, preferably the
simplest one you have found.'

and the lines around it.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kye@ams.sunysb.edu  Fri Sep  1 15:06:44 2000
From: kye@ams.sunysb.edu (kye@ams.sunysb.edu)
Date: Fri, 1 Sep 2000 16:06:44 +0200 (MET DST)
Subject: [Rd] plot(x,y,axes=F) (PR#650)
Message-ID: <200009011406.QAA14017@pubhealth.ku.dk>


Thanks. I think there was a variable F. 

Best,

Kenny Ye
Assistant Professor
Department of Applied Math and Statistics
SUNY at  Stony Brook
Stony Brook, New York 11794-3600
Phone (631)632-9344
Fax   (631)632-8490

On Fri, 1 Sep 2000, Prof Brian D Ripley wrote:

> On Thu, 31 Aug 2000 kye@ams.sunysb.edu wrote:
> 
> > Full_Name: Kenny Ye
> > Version: R-1.1.1
> > OS: Solaris 2.6
> > Submission from: (NULL) (129.49.6.133)
> > 
> > 
> > when i use plot(x,y,axes=F), the axes and the box are still ploted.
> 
> Not in this example on my Solaris 2.6 R-1.1.1 system:
> 
> plot(1:10, 1:10, axes=FALSE)
> 
> 
> Two possibilities spring to mind:
> 
> 1) F is a variable that has a value interpreted as true.  (In R you
> need to use FALSE to be safe.)
> 
> 2) x is not a vector but a classed R object and you are picking up
> a plot method that does not support axes=FALSE.
> 
> This shows the importance of the advice in the FAQ on bugs reporting:
> 
> `Please include an example that reproduces the problem, preferably the
> simplest one you have found.'
> 
> and the lines around it.
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bobbyo@speakeasy.org  Sat Sep  2 21:58:51 2000
From: bobbyo@speakeasy.org (bobbyo@speakeasy.org)
Date: Sat, 2 Sep 2000 22:58:51 +0200 (MET DST)
Subject: [Rd] R INSTALL *.tgz fails (minor docs/feature bug) (PR#652)
Message-ID: <200009022058.WAA19068@pubhealth.ku.dk>

R Team,

	I was attempting to install Lindsey's rmutil.tgz and other
non-CRAN packages using 'R INSTALL', for example 'R INSTALL rmutil.tgz'
after downloading 'rmutil.tgz' from Lindsey's page (as linked from
r-project.org page).

	Directly using the compressed file as 'R INSTALL rmutil.tgz'
failed, though the shell help from 'R INSTALL --help' implied this would
work.

	However, when I simply renamed using 'mv rmutil.tgz rmutil' and
then ran 'R INSTALL rmutil', that worked.

	Adding a note to rename the .tgz files without the .tgz
extension, or changing R INSTALL to allow filename extensions when
installing would be a nice ease-of-use feature.

	(by the way, I was able to use R INSTALL rmutil if I unpacked
rmutil using 'cat rmutil.tgz | tar xvz' and then ran 'R INSTALL rmutil'.)

Keep up the Excellent Work,
	RPO

p.s. Thanks for a wonderful piece of software. R is a real boon to my
research.
	

------ Robert Otillar		| UCSF Graduate Group in Biophysics	------
------ 833 Ashbury #2		| mailto:BobbyO@itsa.ucsf.edu		------
------ San Francisco, CA  94117	| http://bioinformatics.ucsf.edu/bobbyo	------
------ Tel. <send email>	| Fax (415)759-6579			------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Mon Sep  4 01:09:54 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 03 Sep 2000 17:09:54 -0700
Subject: [Rd] quitting iESS[R] (R in ESS)
Message-ID: <87r971j9v1.fsf@jeeves.blindglobe.net>


One thing that has driven me batty to no end is the fact that ESS
doesn't handle R's "exit" well.  Any thoughts as to the default?  I'm
thinking of something like:

        current:  do what currently is done
        C-u Y C-c C-q   : quit and save workspace
        C-u N C-c C-q   : quit and don't save workspace.

Comments?

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@biostat.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

CFAR:   M/F: 206-731-3647 (fax=3694) | Email is far better than phone
FHCRC: Tu/W: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
UW:      Th: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From imsw@holyrood.ed.ac.uk  Mon Sep  4 12:29:08 2000
From: imsw@holyrood.ed.ac.uk (imsw@holyrood.ed.ac.uk)
Date: Mon, 4 Sep 2000 13:29:08 +0200 (MET DST)
Subject: [Rd] bug in spline()? (PR#653)
Message-ID: <200009041129.NAA28115@pubhealth.ku.dk>

BUG IN SPLINE()?

Version R-1.0.1, system i486,linux

If the spline(x,y,method="natural") function is given values outside the
range of the data, it does not give a warning. Moreover, the extrapolated
value reported is not the ordinate of the natural spline defined by (x,y).

Example.  Let x <- c(2,5,8,10) and y <- c(1.2266,-1.7606,-0.5051,1.0390).
Then interpolate/extrapolate with a natural cubic spline at 1:10 using
either

spline(x,y,n=10,method="natural",xmin=1,xmax=10)

or

fn <- splinefun(x,y,method="natural")
fn(1:10)

This gives c(2.5366,1.2266,-0.0834,...,1.0390). I agree with all values
except that at x=1. The interpolation formula in Green and Silverman's
book on splines gives the derivative of a natural spline at the first
knot as f'(x1)=(f2-f1)/(x2-x1) -(1/6)(x2-x1)d, where d=second derivative
at the second knot. For the above example, d=0.7071, f'(x1)=-1.3493,
and the natural spline interpolant has value 1.2266-(-1.3493)=2.5759
at x=1, not 2.5366.

PS There are different e-mail addresses for bug reports given in the
FAQ file and in the help information for bug.report.

************************************************
*    I.White                                   *
*    ICAPB, University of Edinburgh            *
*    Ashworth Laboratories, West Mains Road    *
*    Edinburgh EH9 3JT                         *
*    Fax: 0131 667 3210   Tel: 0131 650 5490   *
*    E-mail: i.m.s.white@ed.ac.uk              *
************************************************

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@blueberry.kubism.ku.dk  Mon Sep  4 13:07:10 2000
From: pd@blueberry.kubism.ku.dk (pd@blueberry.kubism.ku.dk)
Date: Mon, 4 Sep 2000 14:07:10 +0200 (MET DST)
Subject: [Rd] Dubious mail address (PR#654)
Message-ID: <200009041207.OAA28765@pubhealth.ku.dk>

This is just a test to see whether r-bugs@lists.r-project.org will
actually work, as per the FAQ.

	-Peter D.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep  4 13:28:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Sep 2000 14:28:37 +0200
Subject: [Rd] bug in spline()? (PR#653)
In-Reply-To: imsw@holyrood.ed.ac.uk's message of "Mon, 4 Sep 2000 13:29:08 +0200 (MET DST)"
References: <200009041129.NAA28115@pubhealth.ku.dk>
Message-ID: <x2n1homjd6.fsf@blueberry.kubism.ku.dk>

imsw@holyrood.ed.ac.uk writes:

> This gives c(2.5366,1.2266,-0.0834,...,1.0390). I agree with all values
> except that at x=1. The interpolation formula in Green and Silverman's
> book on splines gives the derivative of a natural spline at the first
> knot as f'(x1)=(f2-f1)/(x2-x1) -(1/6)(x2-x1)d, where d=second derivative
> at the second knot. For the above example, d=0.7071, f'(x1)=-1.3493,
> and the natural spline interpolant has value 1.2266-(-1.3493)=2.5759
> at x=1, not 2.5366.

Also, 

plot(diff(fn(seq(1,3,.01))))

reveals that something is wrong

At the other end, 

 plot(diff(fn(seq(8,11,.01))))

looks even weirder, especially if one modifies 
to y <- c(1.2266,-1.7606,-0.5051,1.01)


> PS There are different e-mail addresses for bug reports given in the
> FAQ file and in the help information for bug.report.

Hmm, and neither looks quite right! One would probably want the
address to be in the r-project.org domain (in case we move it away
from Copenhagen). "r-bugs@list.r-project.org", however, is none too
logical and assumes that there's an r-bugs user or an alias in Zurich
which forwards to biostat.dk (there is, it seems). Same thing with
r-bugs@r-project.org, since the Wisconsin machine aliases r-bugs to
r-bugs@lists.r-project.org. 

More logical would be to use r-bugs@r-project.org and have the
forwarding there go to biostat.dk.

Alternatively, it ought to work as r-bugs@bugs.r-project.org, but that
doesn't work whenever a RedHat upgrade blows away the resending rules
in my sendmail.cf... (the program in r-bugs' .forward needs to execute
on a machine that matches the architecture of the binary!)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep  4 16:18:31 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 4 Sep 2000 17:18:31 +0200 (CEST)
Subject: [Rd] quitting iESS[R] (R in ESS)
In-Reply-To: <87r971j9v1.fsf@jeeves.blindglobe.net>
References: <87r971j9v1.fsf@jeeves.blindglobe.net>
Message-ID: <14771.48455.503252.671251@gargle.gargle.HOWL>

>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:

    tony> One thing that has driven me batty to no end is the fact that ESS
    tony> doesn't handle R's "exit" well.  Any thoughts as to the default?  I'm
    tony> thinking of something like:

    tony> current:  do what currently is done
?? {don't understand: I thought you hated the current behavior?}
          
C-c C-q (without prefix) and it's menu analog should really have emacs
prompt the user, i.e. under X windows a popup dialog menu, and otherwise a
"minibuffer" one. 

    tony> C-u Y C-c C-q   : quit and save workspace
    tony> C-u N C-c C-q   : quit and don't save workspace.
good idea in any case!
[but most users don't memorize (and hence use) prefix sequences; yes, I do ..]



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Mon Sep  4 16:34:05 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 04 Sep 2000 08:34:05 -0700
Subject: [Rd] quitting iESS[R] (R in ESS)
In-Reply-To: <14771.48455.503252.671251@gargle.gargle.HOWL>
 (Martin Maechler's message of "Mon, 4 Sep 2000 17:18:31 +0200 (CEST)")
References: <87r971j9v1.fsf@jeeves.blindglobe.net>
 <14771.48455.503252.671251@gargle.gargle.HOWL>
Message-ID: <87lmx8jhn6.fsf@jeeves.blindglobe.net>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:


>>>>> "tony" == A J Rossini <rossini@blindglobe.net> writes:
    tony> One thing that has driven me batty to no end is the fact
    tony> that ESS doesn't handle R's "exit" well.  Any thoughts as to
    tony> the default?  I'm thinking of something like:

    tony> current: do what currently is done
    MM> ?? {don't understand: I thought you hated the current
    MM> behavior?}

Yes.  But leaving it currently "appears" to follow the principle of
least surprise.

The alternative would be to have 2 prompts for R (and similarly for
Stata, which also works on a "Dataspace" principle (only one dataset
at a time)).
          
    MM> C-c C-q (without prefix) and it's menu analog should really
    MM> have emacs prompt the user, i.e. under X windows a popup
    MM> dialog menu, and otherwise a "minibuffer" one.

Which is the alternative.  I'm going to change it to this, unless I
hear some screams.

    MM> good idea in any case!  [but most users don't memorize (and
    MM> hence use) prefix sequences; yes, I do ..]

I like them, too...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@biostat.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

CFAR:   M/F: 206-731-3647 (fax=3694) | Email is far better than phone
FHCRC: Tu/W: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
UW:      Th: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Sep  4 18:16:43 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 4 Sep 2000 10:16:43 -0700 (PDT)
Subject: [Rd] R INSTALL *.tgz fails (minor docs/feature bug) (PR#652)
In-Reply-To: <200009022058.WAA19068@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0009041012110.6541-100000@atlas.biostat.washington.edu>

On Sat, 2 Sep 2000 bobbyo@speakeasy.org wrote:

> R Team,
> 
> 	I was attempting to install Lindsey's rmutil.tgz and other
> non-CRAN packages using 'R INSTALL', for example 'R INSTALL rmutil.tgz'
> after downloading 'rmutil.tgz' from Lindsey's page (as linked from
> r-project.org page).
> 
> 	Directly using the compressed file as 'R INSTALL rmutil.tgz'
> failed, though the shell help from 'R INSTALL --help' implied this would
> work.
> 
> 	However, when I simply renamed using 'mv rmutil.tgz rmutil' and
> then ran 'R INSTALL rmutil', that worked.
> 
> 	Adding a note to rename the .tgz files without the .tgz
> extension, or changing R INSTALL to allow filename extensions when
> installing would be a nice ease-of-use feature.
> 
> 	(by the way, I was able to use R INSTALL rmutil if I unpacked
> rmutil using 'cat rmutil.tgz | tar xvz' and then ran 'R INSTALL rmutil'.)


R INSTALL is somewhat fussy about package format when used on compressed
files. I don't think Jim Lindsey's packages have ever installed without
uncompressing first. I have had the same thing happen with local packages
of functions I've created for convenience.

Fortunately it's fairly painless to uncompress them.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Mon Sep  4 18:43:53 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 4 Sep 2000 13:43:53 -0400 (EDT)
Subject: [Rd] R INSTALL *.tgz fails (minor docs/feature bug) (PR#652)
In-Reply-To: <Pine.GSO.4.21.0009041012110.6541-100000@atlas.biostat.washington.edu>
 (message from Thomas Lumley on Mon, 4 Sep 2000 10:16:43 -0700 (PDT))
Message-ID: <200009041743.NAA07492@jessie.research.bell-labs.com>



I believe the problem with this is that the R INSTALL expects version
information in the name of the .tar.gz or .tgz file.
So something like
   rmutil_1.0.tgz 
and 
   R CMD INSTALL rmutil_1.0.tgz
avoids that particular problem.
(Specifically, it computes the package name by removing everything
after the first _ in the name of the file.)

It took me a while to find out what was happening some months ago so I
thought I'd save others that hassle.


  D.

> Date: Mon, 4 Sep 2000 10:16:43 -0700 (PDT)
> From: Thomas Lumley <thomas@biostat.washington.edu>
> cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
> Sender: owner-r-devel@stat.math.ethz.ch
> Precedence: bulk
> 
> On Sat, 2 Sep 2000 bobbyo@speakeasy.org wrote:
> 
> > R Team,
> > 
> > 	I was attempting to install Lindsey's rmutil.tgz and other
> > non-CRAN packages using 'R INSTALL', for example 'R INSTALL rmutil.tgz'
> > after downloading 'rmutil.tgz' from Lindsey's page (as linked from
> > r-project.org page).
> > 
> > 	Directly using the compressed file as 'R INSTALL rmutil.tgz'
> > failed, though the shell help from 'R INSTALL --help' implied this would
> > work.
> > 
> > 	However, when I simply renamed using 'mv rmutil.tgz rmutil' and
> > then ran 'R INSTALL rmutil', that worked.
> > 
> > 	Adding a note to rename the .tgz files without the .tgz
> > extension, or changing R INSTALL to allow filename extensions when
> > installing would be a nice ease-of-use feature.
> > 
> > 	(by the way, I was able to use R INSTALL rmutil if I unpacked
> > rmutil using 'cat rmutil.tgz | tar xvz' and then ran 'R INSTALL rmutil'.)
> 
> 
> R INSTALL is somewhat fussy about package format when used on compressed
> files. I don't think Jim Lindsey's packages have ever installed without
> uncompressing first. I have had the same thing happen with local packages
> of functions I've created for convenience.
> 
> Fortunately it's fairly painless to uncompress them.
> 
> 	-thomas
> 
> Thomas Lumley
> Assistant Professor, Biostatistics
> University of Washington, Seattle
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Mon Sep  4 22:53:14 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 04 Sep 2000 16:53:14 -0500
Subject: [Rd] bug in spline()? (PR#653)
In-Reply-To: imsw@holyrood.ed.ac.uk's message of "Mon, 4 Sep 2000 13:29:08 +0200 (MET DST)"
References: <200009041129.NAA28115@pubhealth.ku.dk>
Message-ID: <6ritsb7rjp.fsf@franz.stat.wisc.edu>

imsw@holyrood.ed.ac.uk writes:

> BUG IN SPLINE()?
> 
> Version R-1.0.1, system i486,linux
> 
> If the spline(x,y,method="natural") function is given values outside the
> range of the data, it does not give a warning. Moreover, the extrapolated
> value reported is not the ordinate of the natural spline defined by (x,y).
> 
> Example.  Let x <- c(2,5,8,10) and y <- c(1.2266,-1.7606,-0.5051,1.0390).
> Then interpolate/extrapolate with a natural cubic spline at 1:10 using
> either
> 
> spline(x,y,n=10,method="natural",xmin=1,xmax=10)
> 
> or
> 
> fn <- splinefun(x,y,method="natural")
> fn(1:10)
> 
> This gives c(2.5366,1.2266,-0.0834,...,1.0390). I agree with all values
> except that at x=1. The interpolation formula in Green and Silverman's
> book on splines gives the derivative of a natural spline at the first
> knot as f'(x1)=(f2-f1)/(x2-x1) -(1/6)(x2-x1)d, where d=second derivative
> at the second knot. For the above example, d=0.7071, f'(x1)=-1.3493,
> and the natural spline interpolant has value 1.2266-(-1.3493)=2.5759
> at x=1, not 2.5366.

I think the `interpSpline' function in the splines package gives the
desired natural interpolation spline.  Perhaps we should change the
underlying code for the spline function.

 > library(splines)
 > x <- c(2,5,8,10)
 > y <- c(1.2266,-1.7606,-0.5051,1.0390)
 > ns1 <- interpSpline(y ~ x)
 > plot(ns1)   # gives a plot that looks reasonable
 > points(x,y)
 > predict(ns1, 1:10)
 $x
  [1]  1  2  3  4  5  6  7  8  9 10

 $y
  [1]  2.5758923  1.2266000 -0.0834080 -1.1577100 -1.7606000 -1.7349409
  [7] -1.2378717 -0.5051000  0.2669514  1.0390000

 attr(,"class")
 [1] "xyVector"
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From patrick.lindsey@luc.ac.be  Tue Sep  5 20:45:40 2000
From: patrick.lindsey@luc.ac.be (Patrick Lindsey)
Date: Tue, 5 Sep 2000 21:45:40 +0200 (MET DST)
Subject: [Rd] R crash when loading libraries.
Message-ID: <200009051945.VAA17252@alpha.luc.ac.be>

Hi everyone,
I am trying to install R on my new PIII 750Mhz under RedHat6.2
I get the following crash when I try and load any library.
I suspect this has started after I installed the BLAS and LAPACK libraries.
These two libraries where installed using the RPM manager under GNOME.
Here is the crash and read-out from gdb.
Hope that someone can understand what is going on.
Thank you,
Patrick.

---------------------------------
R : Copyright 2000, The R Development Core Team
Version 1.1.1  (August 15, 2000)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type	"?license" or "?licence" for distribution details.

R is a collaborative project with many contributors.
Type	"?contributors" for a list.

Type	"demo()" for some demos, "help()" for on-line help, or
    	"help.start()" for a HTML browser interface to help.
Type	"q()" to quit R.

> library(eda)
Segmentation fault (core dumped)
201/usr/local/src/R-1.1.1/bin>gdb R.bin core
GNU gdb 19991004
Copyright 1998 Free Software Foundation, Inc.
GDB is free software, covered by the GNU General Public License, and you are
welcome to change it and/or distribute copies of it under certain conditions.
Type "show copying" to see the conditions.
There is absolutely no warranty for GDB.  Type "show warranty" for details.
This GDB was configured as "i386-redhat-linux"...
Core was generated by `/usr/local/src/R-1.1.1/bin/R.bin'.
Program terminated with signal 11, Segmentation fault.
Reading symbols from /usr/lib/libreadline.so.3...done.
Reading symbols from /usr/lib/libz.so.1...done.
Reading symbols from /lib/libdl.so.2...done.
Reading symbols from /usr/lib/libncurses.so.4...done.
Reading symbols from /lib/libm.so.6...done.
Reading symbols from /usr/lib/libblas.so.2...done.
Reading symbols from /lib/libc.so.6...done.
Reading symbols from /lib/libtermcap.so.2...done.
Reading symbols from /lib/ld-linux.so.2...done.
Reading symbols from /usr/local/src/R-1.1.1/bin/R_X11.so...done.
Reading symbols from /usr/X11R6/lib/libSM.so.6...done.
Reading symbols from /usr/X11R6/lib/libICE.so.6...done.
Reading symbols from /usr/X11R6/lib/libX11.so.6...done.
Reading symbols from /usr/lib/libjpeg.so.62...done.
Reading symbols from /usr/lib/libpng.so.2...done.
Reading symbols from /usr/lib/gconv/ISO8859-1.so...done.
Reading symbols from /usr/local/src/R-1.1.1/library/eda/libs/eda.so...done.
#0  0x40009634 in _dl_relocate_object (l=0x81e73b0, scope=0x81e75b4, lazy=0, consider_profiling=0) at ../sysdeps/i386/dl-machine.h:326
326	../sysdeps/i386/dl-machine.h: No such file or directory.
(gdb) quit

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Sep  5 21:53:37 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Sep 2000 22:53:37 +0200
Subject: [Rd] R crash when loading libraries.
In-Reply-To: Patrick Lindsey's message of "Tue, 5 Sep 2000 21:45:40 +0200 (MET DST)"
References: <200009051945.VAA17252@alpha.luc.ac.be>
Message-ID: <x27l8qk1bi.fsf@blueberry.kubism.ku.dk>

Patrick Lindsey <patrick.lindsey@luc.ac.be> writes:

> Hi everyone,
> I am trying to install R on my new PIII 750Mhz under RedHat6.2
> I get the following crash when I try and load any library.
> I suspect this has started after I installed the BLAS and LAPACK libraries.
> These two libraries where installed using the RPM manager under GNOME.
> Here is the crash and read-out from gdb.
> Hope that someone can understand what is going on.
> Thank you,
> Patrick.

There is a (by now) well-known bug with the standard RedHat toolchain
that makes it generate corrupt .so files. Normally, that affects only
a couple of packages (akima for one) but adding BLAS could be tickling
the bug in new places...

Martyn Plummer reported this to RedHat, but they've done nothing about
it yet (bugzilla report 13490).

Try upgrading your gcc to a recent one, either by compiling it up from
sources (fairly easy but takes quite a bit of space on your disk) or
installing RPM packages from the rawhide distribution. Notice that you
may get some trouble using the latter procedure since all the
egcs-something packages are now gcc-something, so you cannot just
update. gcc 2.95.1 does work for me in some cases where the egcs
compiler fails.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed Sep  6 08:04:10 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 6 Sep 2000 09:04:10 +0200 (MET DST)
Subject: [Rd] reusing external functions across libs
Message-ID: <Pine.OSF.4.21.0009060818570.2418-100000@zidsrv.sci.uni-klu.ac.at>


Hi,

I am searching for a way to solve the following problem:

I want to use an external function, defined in a dyn.load()ed shared
object, in another dyn.load()ed shared object.

Currently I have to take the sources (Fortran) from one libraries src/
directory and copy them into the src/ dir of the other library, resulting
in two copies of this function. This is bad for maintanance and maybe
also for runtime behaviour because of side effects I'm not aware off (one 
symbol could be loaded twice). It would be nice if I could call the
function directly from C/Fortran, after dyn.load()ing both libraries.
But unfortunately this seems to depend very crucially on the
specific OS.

An example (C/Fortran mix, but I tried also C/C and Fortran/Fortran):
**** so1.c *******************
#include <R.h>
void func1(double* a, int* n){
printf("in func1\n");
F77_SYMBOL(func2)(a,n);
printf("back in func1\n");
}
******************************
gcc -g -fpic -c so1.c -I/usr/local/lib/R/include
ld -shared so1.o -o so1.so

**** so2.f *******************
        subroutine func2(a,n)
        real*8 a(*)
        integer n

        integer i
        call intpr("in func2",8,0,0)
        do 10 i=1,n
          a(i)=2.0d0 * a(i)
 10     continue
        return
        end
******************************
g77 -g -fpic -c so2.f
ld -shared so2.o -o so2.so

on the Alpha (R 1.1.0 on alpha-dec-osf4.0) it works without problems:
> dyn.load("so2.so")
> dyn.load("so1.so")
> .C("func1",as.double(c(1,2,3)),as.integer(3))
in func1
in func2
 [1]
back in func1
[[1]]
[1] 2 4 6

[[2]]
[1] 3

on Linux (R 1.1.1, SuSE 6.4) it works not:
> dyn.load("so2.so")
> dyn.load("so1.so")
Error in dyn.load(x, as.logical(local), as.logical(now)) : 
        unable to load shared library
"/home/users/agebhard/R-test/so1.so":
  /home/users/agebhard/R-test/so1.so: undefined symbol: func2_

or also not working:
> dyn.load("so2.so")  
> dyn.load("so1.so",now=F)
> .C("func1",as.double(c(1,2,3)),as.integer(3))
in func1
/usr/lib/R/bin/R.bin: error in loading shared
libraries: /home/users/agebhard/R-test/so1.so: undefined symbol: func2_



Is there any chance to get this working (may be by finding some magic
linker option, or using extra dyn.load() arguments in an apropriate way)?

Is there another way to share a common subset of C/Fortran functions in 
different R libraries? (at C/Fortran source code level. Of course I can
access functions from other librariues with .C()/.Fortran calls from R
source code level, that's not the problem)

Is the only solution to write a shared (or static) library, which will be
linked to both R libraries?


Thanks in advance for any hints.

Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed Sep  6 08:54:03 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 6 Sep 2000 09:54:03 +0200 (MET DST)
Subject: [Rd] reusing external functions across libs
Message-ID: <Pine.OSF.4.21.0009060951010.3489-100000@zidsrv.sci.uni-klu.ac.at>


On Wed, 6 Sep 2000, Albrecht Gebhardt wrote:

> 
> Hi,
> 
> I am searching for a way to solve the following problem:
> 
> I want to use an external function, defined in a dyn.load()ed shared
> object, in another dyn.load()ed shared object.
> 
> Currently I have to take the sources (Fortran) from one libraries src/
> directory and copy them into the src/ dir of the other library, resulting
> in two copies of this function. This is bad for maintanance and maybe
> also for runtime behaviour because of side effects I'm not aware off (one 
> symbol could be loaded twice). It would be nice if I could call the
> function directly from C/Fortran, after dyn.load()ing both libraries.
> But unfortunately this seems to depend very crucially on the
> specific OS.
> 
> An example (C/Fortran mix, but I tried also C/C and Fortran/Fortran):
> **** so1.c *******************
> #include <R.h>
> void func1(double* a, int* n){
> printf("in func1\n");
> F77_SYMBOL(func2)(a,n);
> printf("back in func1\n");
> }
> ******************************
> gcc -g -fpic -c so1.c -I/usr/local/lib/R/include
> ld -shared so1.o -o so1.so
> 
> **** so2.f *******************
>         subroutine func2(a,n)
>         real*8 a(*)
>         integer n
> 
>         integer i
>         call intpr("in func2",8,0,0)
>         do 10 i=1,n
>           a(i)=2.0d0 * a(i)
>  10     continue
>         return
>         end
> ******************************
> g77 -g -fpic -c so2.f
> ld -shared so2.o -o so2.so
> 
> on the Alpha (R 1.1.0 on alpha-dec-osf4.0) it works without problems:
> > dyn.load("so2.so")
> > dyn.load("so1.so")
> > .C("func1",as.double(c(1,2,3)),as.integer(3))
> in func1
> in func2
>  [1]
> back in func1
> [[1]]
> [1] 2 4 6
> 
> [[2]]
> [1] 3
> 
> on Linux (R 1.1.1, SuSE 6.4) it works not:
> > dyn.load("so2.so")
> > dyn.load("so1.so")
> Error in dyn.load(x, as.logical(local), as.logical(now)) : 
>         unable to load shared library
> "/home/users/agebhard/R-test/so1.so":
>   /home/users/agebhard/R-test/so1.so: undefined symbol: func2_
> 
> or also not working:
> > dyn.load("so2.so")  
> > dyn.load("so1.so",now=F)
> > .C("func1",as.double(c(1,2,3)),as.integer(3))
> in func1
> /usr/lib/R/bin/R.bin: error in loading shared
> libraries: /home/users/agebhard/R-test/so1.so: undefined symbol: func2_
> 
> 
> 
> Is there any chance to get this working (may be by finding some magic
> linker option, or using extra dyn.load() arguments in an apropriate way)?
> 
> Is there another way to share a common subset of C/Fortran functions in 
> different R libraries? (at C/Fortran source code level. Of course I can
> access functions from other librariues with .C()/.Fortran calls from R
> source code level, that's not the problem)
> 
> Is the only solution to write a shared (or static) library, which will be
> linked to both R libraries?
> 
> 


... well, I found (at least) one solution:

> dyn.load("so1.so",now=F)
> dyn.load("so2.so",local=F)
> .C("func1",as.double(c(1,2,3)),as.integer(3))
in func1
in func2
 [1]
back in func1
[[1]]
[1] 2 4 6

[[2]]
[1] 3

> 

but the question remains:

What is the best way to share common C/Fortran sources across R libraries?
How should I implement the above solution in the libraries? What are the
side effects? Is it really portable (win32?)? 

Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Sep  6 09:30:37 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 6 Sep 2000 09:30:37 +0100 (BST)
Subject: [Rd] reusing external functions across libs
In-Reply-To: <Pine.OSF.4.21.0009060951010.3489-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.05.10009060917140.10024-100000@auk.stats>

On Wed, 6 Sep 2000, Albrecht Gebhardt wrote:

> 
> ... well, I found (at least) one solution:
> 
> > dyn.load("so1.so",now=F)
> > dyn.load("so2.so",local=F)
> > .C("func1",as.double(c(1,2,3)),as.integer(3))
> in func1
> in func2
>  [1]
> back in func1
> [[1]]
> [1] 2 4 6
> 
> [[2]]
> [1] 3
> 
> > 
> 
> but the question remains:
> 
> What is the best way to share common C/Fortran sources across R libraries?
> How should I implement the above solution in the libraries? What are the
> side effects? Is it really portable (win32?)? 

It is not portable.  You will not even be able to make both shared
objects on some systems, including AIX and Windows, as they need to know
where the symbols are going to be satisfied.  And those flags (especially
local=F) do not always work (which is why this worked on OSF4, I think).

The best way that I know of is to put shared code in a shared library, and
link so?.so against that.  The only potential problem is putting the
common library somewhere it will be found at run time if it is a shared
library/DLL, so I would use a static library unless the code was large
(like all of LAPACK).  (This is particularly a problem on Windows,
where the rules for finding DLLs differ by Windows version.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed Sep  6 09:53:44 2000
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 6 Sep 2000 10:53:44 +0200 (MET DST)
Subject: [Rd] reusing external functions across libs
In-Reply-To: <Pine.GSO.4.05.10009060917140.10024-100000@auk.stats>
Message-ID: <Pine.OSF.4.21.0009061046420.3920-100000@zidsrv.sci.uni-klu.ac.at>

On Wed, 6 Sep 2000, Prof Brian D Ripley wrote:

> On Wed, 6 Sep 2000, Albrecht Gebhardt wrote:
> 
> > 
> > ... well, I found (at least) one solution:
> > 
> > > dyn.load("so1.so",now=F)
> > > dyn.load("so2.so",local=F)
> > > .C("func1",as.double(c(1,2,3)),as.integer(3))
> > in func1
> > in func2
> >  [1]
> > back in func1
> > [[1]]
> > [1] 2 4 6
> > 
> > [[2]]
> > [1] 3
> > 
> > > 
> > 
> > but the question remains:
> > 
> > What is the best way to share common C/Fortran sources across R libraries?
> > How should I implement the above solution in the libraries? What are the
> > side effects? Is it really portable (win32?)? 
> 
> It is not portable.  You will not even be able to make both shared
> objects on some systems, including AIX and Windows, as they need to know
> where the symbols are going to be satisfied.  And those flags (especially
> local=F) do not always work (which is why this worked on OSF4, I think).
> 
> The best way that I know of is to put shared code in a shared library, and
> link so?.so against that.  The only potential problem is putting the
> common library somewhere it will be found at run time if it is a shared
> library/DLL, so I would use a static library unless the code was large
> (like all of LAPACK).  (This is particularly a problem on Windows,
> where the rules for finding DLLs differ by Windows version.)
> 

I expected something like this. Ok. Moving the functions to a static
library should not be a problem. 

But I guess now I have to add ./configure scripts and Makefiles to my
libraries. In lib1 to build the static lib (and to install it somewhere
into the library installation path) and in lib2 to find this location to
link against. It's not crucial during the development stage but at least
when it comes to distribute these libraries.

Are there any guidelines to do this?


Albrecht

......................................................................
| Albrecht Gebhardt          Tel.: (++43 463) 2700/832               |
| Institut fuer Mathematik   Fax : (++43 463) 2700/834               |
| Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at  |
| Villacher Str. 161         http://www-stat.uni-klu.ac.at/~agebhard |
| A-9020 Klagenfurt, Austria                                         |
`--------------------------------------------------------------------'

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Wed Sep  6 14:44:00 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 06 Sep 2000 08:44:00 -0500
Subject: [Rd] reusing external functions across libs
References: <Pine.OSF.4.21.0009061046420.3920-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <qxplmx58wkf.fsf@verdi.stat.wisc.edu>

--=-=-=

>>>>> "Albrecht" == Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at> writes:

  Albrecht> But I guess now I have to add ./configure scripts and
  Albrecht> Makefiles to my libraries. In lib1 to build the static lib
  Albrecht> (and to install it somewhere into the library installation
  Albrecht> path) and in lib2 to find this location to link
  Albrecht> against. It's not crucial during the development stage but
  Albrecht> at least when it comes to distribute these libraries.

  Albrecht> Are there any guidelines to do this?

There is some information in the R Extensions manual. See the section
on congigure and cleanup.

We have faced a somewhat similar situation in a few projects. From our
experience the following scheme (due to Duncan Temple Lang) may
work. Note that we have tested this only on a few platforms. In
particular this (as it stands) possibly would not work on Windows.

Suppose you have two packages, package1 and package2. You want the
shared object file in package2 to depend on that of package1.

Install package1 as usual with R INSTALL package1. In package2, add a
configure script and a src/Makevars.in file. You may also want to add
a cleanup script.

Here are some example scripts. Remember to replace package1 and
package2 with appropriate names. You have to run autoconf to geneerate
the configure script for configure.in. Alos, these are modified
versions of existing scripts and I have not tested these modified versions.

Saikat
-- 
Department of Statistics                       Email: saikat@stat.wisc.edu
University of Wisconsin - Madison              Phone: (608) 263 5948
1210 West Dayton Street                        Fax:   (608) 262 0032
Madison, WI 53706-1685


--=-=-=
Content-Type: multipart/mixed; boundary="==-=-="

--==-=-=
Content-Disposition: attachment
Content-Description: Makevars.in

# package2/src/Makevars.in
# link package2.so against the package1.so. This is done by creating a
# libpackage1.so in the top level directory of package2.
PKG_LIBS=-L@TOP@ -lpackage1

--==-=-=
Content-Disposition: attachment
Content-Description: configure.in

# package2/configure.in

AC_INIT(src/package2.c)  # replace with appropriate source file in src

# Find the current directory - the toplevel directory for package2

TOP=`pwd`
AC_SUBST(TOP)

# find installation path for package1
# package1 has to be installed during installing package2

if test -z "${R_HOME}" ; then
 R_HOME=`R RHOME`
fi

if test -z "${R_HOME}" ; then
  echo "Cannot find the R distribution!"
  exit 1 
fi

echo 'cat(paste("PACKAGE1_LIBS=",system.file("libs", pkg="packag1"),"\n",sep=""), file="./Package1Libs")' | $R_HOME/bin/R --vanilla  

chmod +x Package1Libs

. ./Package1Libs

if test -z "${PACKAGE1_LIBS}" ; then
 echo "Cannot find the package1 library for R. Please install it,"
 echo "or set the environment R_LIBS so that it can be found in an R session."
 exit 1;
fi

echo "Computed PACKAGE1_LIBS: ${PACKAGE1_LIBS}"

AC_OUTPUT(src/Makevars)

if test ! -f libpackage1.so ; then
  ln -s $PACKAGE1_LIBS/package1.so libpackage1.so
fi

--==-=-=--

--=-=-=



--=-=-=--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Thu Sep  7 06:15:05 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Sep 2000 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200009070515.HAA22411@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.biostat.ku.dk or via email to
r-bugs@biostat.ku.dk. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 635 *
Subject: Multiple pages with postscript()
From: "Patrick Connolly" <P.Connolly@hort.cri.nz>
Date: Wed, 16 Aug 100 12:14:19 +1200 (NZST)
--par(lwd) reverts to one at page changes under the postscript() device
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

none

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 654 *
Subject: Dubious mail address
From: Peter Dalgaard BSA <pd@blueberry.kubism.ku.dk>
Date: Mon, 4 Sep 2000 14:10:30 +0200
* PR# 640 *
Subject: diff.default / diff.ts in wrong package bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 18:28:36 +0200 (CEST)
* PR# 639 *
Subject: symbols: xlim and ylim cannot be specified
From: Werner Stahel <stahel@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 15:54:08 +0200 (CEST)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
* PR# 641 *
Subject: 2 Bugs in na.omit.default()
From: =?iso-8859-1?Q?Jens_Oehlschl=E4gel?= <jens.oehlschlaegel@bbdo-interone.de>
Date: Wed, 23 Aug 2000 11:45:56 +0200
* PR# 644 *
Subject: crash using fisher.test on Windows; was [R] unexpected crash of R under 
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 25 Aug 2000 08:47:00 +0200
* PR# 643 *
Subject: Re: [R] too large alpha or beta in dbeta ?
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Thu, 24 Aug 2000 13:45:47 -0700 (PDT)
* PR# 646 *
Subject: under certain conditions, model.matrix appears to lack one column
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 27 Aug 2000 16:22:25 -0400 (EDT)
* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 648 *
Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 28 Aug 2000 12:26:21 +0100 (BST)
* PR# 647 *
Subject: Re: [Rd] under certain conditions, model.matrix appears to lack one
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 28 Aug 2000 07:28:19 +0100 (BST)
* PR# 650 *
Subject: plot(x,y,axes=F)
From: kye@ams.sunysb.edu
Date: Thu, 31 Aug 2000 23:52:12 +0200 (MET DST)
* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
* PR# 652 *
Subject: R INSTALL *.tgz fails (minor docs/feature bug)
From: RPO <bobbyo@speakeasy.org>
Date: Sat, 2 Sep 2000 13:34:22 -0700 (PDT)
* PR# 651 *
Subject: =?big5?b?tsewZaWisdE=?= =?us-ascii?q?=3A_?= =?big5?b?tsewZabc?= mailhost.EFN.ORG; SMTP
From: Postmaster@sdm.com.tw
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Thu Sep  7 06:50:21 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Thu, 7 Sep 2000 16:50:21 +1100
Subject: [Rd] suggestion regarding help for `cat' and `paste'
Message-ID: <20000907165021.A4719@ftoomsh.progsoc.uts.edu.au>

The function `cat' should be listed in the see-also references in
the help for `paste' and vice versa since they perform very similar
tasks.

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep  7 09:17:48 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 7 Sep 2000 10:17:48 +0200 (CEST)
Subject: [Rd] asmode.integer()  -- RFC
Message-ID: <14775.20268.82086.175632@gargle.gargle.HOWL>

Many of us known that sometimes, e.g. in calls to .C(..), you want to
basically say
	  
	  x <- as.integer(x)

but you can't do that because as.vector() 
and it's descendants such as as.integer, as.double, as.character
drop all attributes.

Several months ago, someone proposed to use a new function
As.integer() instead.  
Since I just now again "stumbled" on it, I wondered if it might be worth to
define 

      asmode.integer   <- function(x) { mode(x) <- "integer"   ; x }
      asmode.double    <- function(x) { mode(x) <- "double"    ; x }
      asmode.character <- function(x) { mode(x) <- "character" ; x }

in order to encourage more shorter & more readable code...
or would you hate to see yet more functions doing `almost the same' as
others do?

[RFC = Request for comments]

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Thu Sep  7 11:00:23 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Thu, 07 Sep 2000 20:00:23 +1000
Subject: [Rd] asmode.integer()  -- RFC
Message-ID: <3.0.32.20000907200020.0129d5a0@pophost.nsw.cmis.csiro.au>

At 10:17 07/09/00 +0200, Martin Maechler wrote:
>Many of us known that sometimes, e.g. in calls to .C(..), you want to
>basically say
>	  
>	  x <- as.integer(x)
>
>but you can't do that because as.vector() 
>and it's descendants such as as.integer, as.double, as.character
>drop all attributes.
>
>Several months ago, someone proposed to use a new function
>As.integer() instead.  
>Since I just now again "stumbled" on it, I wondered if it might be worth to
>define 
>
>      asmode.integer   <- function(x) { mode(x) <- "integer"   ; x }
>      asmode.double    <- function(x) { mode(x) <- "double"    ; x }
>      asmode.character <- function(x) { mode(x) <- "character" ; x }

The idiom in "another place" is

storage.mode(x) <- "integer"
storage.mode(x) <- "double"  &c

my preference would again be for convergence of the two dialects.

(Of course when S4 takes over that other place, this sort of consideration
becomes much less relevant.)

Bill Venables.

>in order to encourage more shorter & more readable code...
>or would you hate to see yet more functions doing `almost the same' as
>others do?
>
>[RFC = Request for comments]
>
>Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
>Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
>ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
>phone: x-41-1-632-3408		fax: ...-1228			<><
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep  7 14:12:14 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 7 Sep 2000 15:12:14 +0200 (CEST)
Subject: [Rd] asmode.integer()  -- RFC
In-Reply-To: <3.0.32.20000907200020.0129d5a0@pophost.nsw.cmis.csiro.au>
References: <3.0.32.20000907200020.0129d5a0@pophost.nsw.cmis.csiro.au>
Message-ID: <14775.37934.715868.642549@gargle.gargle.HOWL>

>>>>> "Bill" == Bill Venables <Bill.Venables@cmis.csiro.au> writes:

    Bill> At 10:17 07/09/00 +0200, Martin Maechler wrote:
    >> Many of us known that sometimes, e.g. in calls to .C(..), you want to
    >> basically say
    >> 
    >> x <- as.integer(x)
    >> 
    >> but you can't do that because as.vector() 
    >> and it's descendants such as as.integer, as.double, as.character
    >> drop all attributes.
    >> 
    >> Several months ago, someone proposed to use a new function
    >> As.integer() instead.  
    >> Since I just now again "stumbled" on it, I wondered if it might be worth to
    >> define 
    >> 
    >> asmode.integer   <- function(x) { mode(x) <- "integer"   ; x }
    >> asmode.double    <- function(x) { mode(x) <- "double"    ; x }
    >> asmode.character <- function(x) { mode(x) <- "character" ; x }

    Bill> The idiom in "another place" is

    Bill>  storage.mode(x) <- "integer"
    Bill>  storage.mode(x) <- "double"  &c

I had this initially, but

    Bill> my preference would again be for convergence of the two dialects.
well, in R, "mode<-" and "storage.mode<-" are 100% equivalent.
in Splus 5.1, for the above case, they behave equivalently as well.
Hence, saving the extra  "storage." seemed feasible to me, and since I'm
occasionally fond of `minimal art' ......

I agree that "storage.mode" is more expressive...

    Bill> (Of course when S4 takes over that other place, this sort of
    Bill> consideration becomes much less relevant.)

(true, unfortunately)

    >> in order to encourage more shorter & more readable code...
    >> or would you hate to see yet more functions doing `almost the same' as
    >> others do?
    >> 
    >> [RFC = Request for comments]
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Sep  7 14:39:24 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 7 Sep 2000 14:39:24 +0100 (BST)
Subject: [Rd] asmode.integer()  -- RFC
Message-ID: <200009071339.OAA00693@toucan.stats.ox.ac.uk>

> From: Martin Maechler <maechler@stat.math.ethz.ch>
> Date: Thu, 7 Sep 2000 15:12:14 +0200 (CEST)

 
> >>>>> "Bill" == Bill Venables <Bill.Venables@cmis.csiro.au> writes:
> 
>     Bill> At 10:17 07/09/00 +0200, Martin Maechler wrote:
>     >> Many of us known that sometimes, e.g. in calls to .C(..), you want to
>     >> basically say
>     >> 
>     >> x <- as.integer(x)
>     >> 
>     >> but you can't do that because as.vector() 
>     >> and it's descendants such as as.integer, as.double, as.character
>     >> drop all attributes.
>     >> 
>     >> Several months ago, someone proposed to use a new function
>     >> As.integer() instead.  
>     >> Since I just now again "stumbled" on it, I wondered if it might be 
worth to
>     >> define 
>     >> 
>     >> asmode.integer   <- function(x) { mode(x) <- "integer"   ; x }
>     >> asmode.double    <- function(x) { mode(x) <- "double"    ; x }
>     >> asmode.character <- function(x) { mode(x) <- "character" ; x }
> 
>     Bill> The idiom in "another place" is
> 
>     Bill>  storage.mode(x) <- "integer"
>     Bill>  storage.mode(x) <- "double"  &c
> 
> I had this initially, but
> 
>     Bill> my preference would again be for convergence of the two dialects.

> well, in R, "mode<-" and "storage.mode<-" are 100% equivalent.

What the help page says is

     The two assignment versions are currently identical.
                                     ^^^^^^^^^

and I am not sure we want that to remain so, nor should we assume so.
I think R's use of all of mode and typeof and storage.mode is confusing,
especially as the first and third are diluted versions of the second.
(Without looking, how many of you know the exact differences?)


asmode.integer(x)  and (storage.mode(x) <- "integer"; x)  seem to be to
just be (in R) cumbersome ways to do

structure(as.integer(x), attributes(x))

> in Splus 5.1, for the above case, they behave equivalently as well.
> Hence, saving the extra  "storage." seemed feasible to me, and since I'm
> occasionally fond of `minimal art' ......
> 
> I agree that "storage.mode" is more expressive...
> 
>     Bill> (Of course when S4 takes over that other place, this sort of
>     Bill> consideration becomes much less relevant.)
> 
> (true, unfortunately)

Sooner than you might think.  What was announced as the last ever
release of a version of S-PLUS based on Svr3 was released a few days ago.
The future there is S-PLUS 6.x and Svr4 only.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep  7 17:32:59 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 7 Sep 2000 18:32:59 +0200 (CEST)
Subject: [Rd] Calloc() & Free() in different .C(.) calls --> not usable ?
Message-ID: <14775.49979.313017.584547@gargle.gargle.HOWL>

       [sending this to R-devel, since it may be of general interest and 
        could possibly lead to better instructions in the "R-exts" manual]

Is this another case where only .Call() or .External() [or a fudge factor]
solve my problem? 

Following situation: 
 I use dyn.loaded C code to compute a recursive tree structure from my data.
 Beforehand I don't know how big the tree will be, but I want the tree
 (as integer array in my case) be passed back to R.

 Current solution [simplified!]:

  
 ## First I fit the tree to my Data, all in C, but only return the *size*
 ## I'll need to store that tree in R

	 size <-      .C("fittree", data, ..., res = integer(1))$res

 ## Now that I know its size, I can get it into R :

	 tree.in.R <- .C("gettree", size, res = integer(size))$res

 where in the C code, I have a
 global 
	static *tree_struct my_tree;
 and in C's fittree(), I use 
	my_tree = Calloc(1, tree_struct); 
 for building the tree, which is 
 then accessed by gettree(), which ends in
	Free(my_tree);

All well, BUT: 
    problem is that memory just builds up and is not freed at all.

>From a (more private) E-mail of Prof Brian Ripley, I read (maybe wrongly?)
that this seems to be ``common'':

    BDR> and the way that most mallocs work is to use sbrk to raise or lower
    BDR> the brk, that is the size of the data space. 
    BDR> They only reduce it when the data space is sufficiently unfragmented. 
	 --------------------------------------------------------------------
which may be my case : "Free(my_tree)" doesn't really free the
memory [according to my tests, looking at Unix' "ps .."].

Solutions (yes, one of them is  ``use .Call() !'') ??

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Sep  7 18:00:13 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 7 Sep 2000 18:00:13 +0100 (BST)
Subject: [Rd] Calloc() & Free() in different .C(.) calls --> not usable ?
Message-ID: <200009071700.SAA01057@toucan.stats.ox.ac.uk>

> From: Martin Maechler <maechler@stat.math.ethz.ch>
> Date: Thu, 7 Sep 2000 18:32:59 +0200 (CEST)
> To: R-devel@stat.math.ethz.ch
> Subject: [Rd] Calloc() & Free() in different .C(.) calls --> not usable ?
> 
>        [sending this to R-devel, since it may be of general interest and 
>         could possibly lead to better instructions in the "R-exts" manual]
> 
> Is this another case where only .Call() or .External() [or a fudge factor]
> solve my problem? 
> 
> Following situation: 
>  I use dyn.loaded C code to compute a recursive tree structure from my data.
>  Beforehand I don't know how big the tree will be, but I want the tree
>  (as integer array in my case) be passed back to R.
> 
>  Current solution [simplified!]:
> 
>   
>  ## First I fit the tree to my Data, all in C, but only return the *size*
>  ## I'll need to store that tree in R
> 
> 	 size <-      .C("fittree", data, ..., res = integer(1))$res
> 
>  ## Now that I know its size, I can get it into R :
> 
> 	 tree.in.R <- .C("gettree", size, res = integer(size))$res
> 
>  where in the C code, I have a
>  global 
> 	static *tree_struct my_tree;
>  and in C's fittree(), I use 
> 	my_tree = Calloc(1, tree_struct); 
>  for building the tree, which is 
>  then accessed by gettree(), which ends in
> 	Free(my_tree);
> 
> All well, BUT: 
>     problem is that memory just builds up and is not freed at all.

My nnet code does that, as does the rpart code.  I have not seen any
problems with memory-build up with either in R, and have run both
repetitively, e.g. within two-level cross-validations running for
days.  Calloc and Free are just error-checking wrappers for calloc and
free, so what happens is down to those on your OS.

> >From a (more private) E-mail of Prof Brian Ripley, I read (maybe wrongly?)
> that this seems to be ``common'':
> 
>     BDR> and the way that most mallocs work is to use sbrk to raise or lower
>     BDR> the brk, that is the size of the data space. 
>     BDR> They only reduce it when the data space is sufficiently unfragmented. 
> 	 --------------------------------------------------------------------
> which may be my case : "Free(my_tree)" doesn't really free the
> memory [according to my tests, looking at Unix' "ps .."].

It frees the memory to malloc. There is no guarantee that malloc
returns it to the OS, but malloc should do so or re-use it.  I've just
monitored Solaris running R 1.1.1, and there is no evidence from ps/top that
ever returns any memory to the OS during these runs.  But it does not
build up more than 2Mb or so above R's usage at its first GC call, even
though it is being asked to allocate a few hundred Kb and deallocate it
many times.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jniesch@gwdg.de  Fri Sep  8 10:40:01 2000
From: jniesch@gwdg.de (jniesch@gwdg.de)
Date: Fri, 8 Sep 2000 11:40:01 +0200 (MET DST)
Subject: [Rd] Installing R from source ? (PR#655)
Message-ID: <200009080940.LAA09191@pubhealth.ku.dk>

Full_Name: Jens Nieschulze
Version: R-1.1.1
OS: sparc sun solaris 2.7
Submission from: (NULL) (134.76.192.150)


I tried to install R today and got the following at the first try

rbitmap.c:239: parse error before `jmp_buf'
rbitmap.c:239: warning: no semicolon at end of struct or union
rbitmap.c: In function `my_error_exit':
rbitmap.c:257: dereferencing pointer to incomplete type
rbitmap.c: In function `R_SaveAsJpeg':
rbitmap.c:279: storage size of `jerr' isn't known

after changing the source code (replacing the ';' with a ',' and adding some
','
of rbitmap.c in lines 239 and 240 it installed correctly.

cheers
	J.N.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep  8 11:22:44 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Sep 2000 12:22:44 +0200
Subject: [Rd] Installing R from source ? (PR#655)
In-Reply-To: jniesch@gwdg.de's message of "Fri, 8 Sep 2000 11:40:01 +0200 (MET DST)"
References: <200009080940.LAA09191@pubhealth.ku.dk>
Message-ID: <x2g0nb18uj.fsf@blueberry.kubism.ku.dk>

jniesch@gwdg.de writes:

> Full_Name: Jens Nieschulze
> Version: R-1.1.1
> OS: sparc sun solaris 2.7
> Submission from: (NULL) (134.76.192.150)
> 
> 
> I tried to install R today and got the following at the first try
> 
> rbitmap.c:239: parse error before `jmp_buf'
> rbitmap.c:239: warning: no semicolon at end of struct or union
> rbitmap.c: In function `my_error_exit':
> rbitmap.c:257: dereferencing pointer to incomplete type
> rbitmap.c: In function `R_SaveAsJpeg':
> rbitmap.c:279: storage size of `jerr' isn't known
> 
> after changing the source code (replacing the ';' with a ',' and adding some
> ','
> of rbitmap.c in lines 239 and 240 it installed correctly.
> 
> cheers
> 	J.N.

This would seem to happen if "struct jpeg_error_mgr" in l.238 is not
defined by jpeglib.h. I strongly doubt that fiddling with the code in
rbitmap.c is going to make it actually work (as opposed to compile and
install), so a cleaner approach would be to remove the

#define HAVE_JPEG 1

in src/include/config.h. Or update your jpeg library of course.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep  8 12:14:41 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 8 Sep 2000 13:14:41 +0200 (MET DST)
Subject: [Rd] Installing R from source ? (PR#655)
Message-ID: <200009081114.NAA10794@pubhealth.ku.dk>


> From: jniesch@gwdg.de
> Date: Fri, 8 Sep 2000 11:40:01 +0200 (MET DST)
> To: r-devel@stat.math.ethz.ch
> Subject: [Rd] Installing R from source ? (PR#655)
> CC: R-bugs@biostat.ku.dk
> X-Loop: R-bugs@biostat.ku.dk
> 
> Full_Name: Jens Nieschulze
> Version: R-1.1.1
> OS: sparc sun solaris 2.7
> Submission from: (NULL) (134.76.192.150)
> 
> 
> I tried to install R today and got the following at the first try
> 
> rbitmap.c:239: parse error before `jmp_buf'
> rbitmap.c:239: warning: no semicolon at end of struct or union
> rbitmap.c: In function `my_error_exit':
> rbitmap.c:257: dereferencing pointer to incomplete type
> rbitmap.c: In function `R_SaveAsJpeg':
> rbitmap.c:279: storage size of `jerr' isn't known
> 
> after changing the source code (replacing the ';' with a ',' and adding some
> ','
> of rbitmap.c in lines 239 and 240 it installed correctly.

Ah, but it was correct before you altered its meaning.  What
the error message appears to say is that `jmp_buf' is not defined on
your system.  jmp_buf is defined on Solaris 2.7 in
/usr/include/setjmp.h, which should be included.

Do you have png installed?  I've run this assuming not and got similar
error messages. Solve them by adding

#include <setjmp.h>

at line 234 of rbitmap.c.  The png stuff includes setjmp.h.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep  8 12:37:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 08 Sep 2000 13:37:55 +0200
Subject: [Rd] Installing R from source ? (PR#655)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Fri, 8 Sep 2000 13:14:41 +0200 (MET DST)"
References: <200009081114.NAA10794@pubhealth.ku.dk>
Message-ID: <x2bsxz15d8.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> > I tried to install R today and got the following at the first try
> > 
> > rbitmap.c:239: parse error before `jmp_buf'
> > rbitmap.c:239: warning: no semicolon at end of struct or union
> > rbitmap.c: In function `my_error_exit':
> > rbitmap.c:257: dereferencing pointer to incomplete type
> > rbitmap.c: In function `R_SaveAsJpeg':
> > rbitmap.c:279: storage size of `jerr' isn't known
> > 
> > after changing the source code (replacing the ';' with a ',' and adding some
> > ','
> > of rbitmap.c in lines 239 and 240 it installed correctly.
> 
> Ah, but it was correct before you altered its meaning.  What
> the error message appears to say is that `jmp_buf' is not defined on
> your system.  jmp_buf is defined on Solaris 2.7 in
> /usr/include/setjmp.h, which should be included.
> 
> Do you have png installed?  I've run this assuming not and got similar
> error messages. Solve them by adding
> 
> #include <setjmp.h>
> 
> at line 234 of rbitmap.c.  The png stuff includes setjmp.h.

Could well be a better diagnosis than what I suggested. Compiler
errors are often a word or two off relative to the actual location of
the problem. Easy thing to try, certainly. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep  8 21:44:37 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 08 Sep 2000 16:44:37 -0400
Subject: [Rd] 1.2 R CMD check
Message-ID: <39B94FB5.C84FB646@bank-banque-canada.ca>

I've taken a quick look at the 1.2 snapshot to see what is coming. Is it my
imagination or is it quite a bit faster?

I noticed that "R CMD check" now seems to do much more: install, check examples,
check dvi (&pdf?).  I think it is great to have this kind of comprehensive check
of a package, especially once everything in the package is suppose to be
working.

But when I am still in development mode I would also like to be able to run the
pieces separately so that development is faster, and I don't see how to do
that.  I can see how to set   --no-latex, but is there a way to avoid re-doing
install?  (BTW, the usage for check says "Finally, the package is installed into
the log directory" but I have the impression that the install is the first thing
that is done.) Or should I consider "R CMD check" as the thing to do first and
then somehow move the libraries installed in the *.Rcheck log directories into
$RHOME/library so that everything that depends on them gets the new version? Or
should I be somehow be setting things so that $RHOME/library is the  log
directory?

Thanks,
Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep  8 22:29:52 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 8 Sep 2000 22:29:52 +0100 (BST)
Subject: [Rd] 1.2 R CMD check
In-Reply-To: <39B94FB5.C84FB646@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.05.10009082219310.15387-100000@auk.stats>

On Fri, 8 Sep 2000, Paul Gilbert wrote:

> I've taken a quick look at the 1.2 snapshot to see what is coming. Is it my
> imagination or is it quite a bit faster?

On some machines and tasks, yes. It depends critically on the performance
of malloc we found, to the extent that on Windows we had to find another
malloc to avoid a massive slowdown.

> I noticed that "R CMD check" now seems to do much more: install, check examples,
> check dvi (&pdf?).  I think it is great to have this kind of comprehensive check
> of a package, especially once everything in the package is suppose to be
> working.

Most of the functionality of `build' has been moved to `check'.

> But when I am still in development mode I would also like to be able to run the
> pieces separately so that development is faster, and I don't see how to do
> that.  I can see how to set   --no-latex, but is there a way to avoid re-doing
> install?  (BTW, the usage for check says "Finally, the package is installed into
> the log directory" but I have the impression that the install is the first thing
> that is done.) Or should I consider "R CMD check" as the thing to do first and
> then somehow move the libraries installed in the *.Rcheck log directories into
> $RHOME/library so that everything that depends on them gets the new version? Or
> should I be somehow be setting things so that $RHOME/library is the  log
> directory?

It's not finished yet, you will notice from the perl code.  But yes, it
does do its own install as one of the things it is checking is that a
virgin install gets the results correct.  I just do an install into my
library directory of the version I intend to distribute after check and
build.  Nothing I have seen (not even nlme) takes anything like as long
to install as to check.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lej25@statslab.cam.ac.uk  Mon Sep 11 12:13:29 2000
From: lej25@statslab.cam.ac.uk (lej25@statslab.cam.ac.uk)
Date: Mon, 11 Sep 2000 13:13:29 +0200 (MET DST)
Subject: [Rd] .Random.seed resetting (PR#656)
Message-ID: <200009111113.NAA27130@pubhealth.ku.dk>

Full_Name: Lara Jamieson
Version: 1.1.1
OS: Linux
Submission from: (NULL) (131.111.20.203)


I've checked for other reports on this and can't find anything.  It seems that 
the .Random.seed isn't updated properly after using rm(.Random.seed).  Mu 
understanding from the help file indicates that a new 'random' seed will be
generated.
It appears that sometimes the old one is just reinstated.

I removed my .RData file and the problem remains.  It seems to happen when calls
are 
made in succession to the same 'random generation type' function; but appears to

work when different calls are made in succession.
An example is given below.  I was using the sample command when I found the
problem 
but it happens with runif as well...

> runif(1)
[1] 0.5551602
> runif(1)
[1] 0.2575637
> rm(.Random.seed)
> runif(1)
[1] 0.5551602
> rm(.Random.seed)
> rm(.Random.seed)
Warning message: 
remove: variable ".Random.seed" was not found 
> runif(1)
[1] 0.2575637

Thanks,
Lara

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Sep 11 14:10:24 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 11 Sep 2000 15:10:24 +0200 (MET DST)
Subject: [Rd] .Random.seed resetting (PR#656)
Message-ID: <200009111310.PAA29682@pubhealth.ku.dk>

>>>>> "lej25" == lej25  <lej25@statslab.cam.ac.uk> writes:

    lej25> Full_Name: Lara Jamieson Version: 1.1.1 OS: Linux Submission
    lej25> from: (NULL) (131.111.20.203)

    lej25> I've checked for other reports on this and can't find anything.
    lej25> It seems that the .Random.seed isn't updated properly after
    lej25> using rm(.Random.seed).  Mu understanding from the help file
    lej25> indicates that a new 'random' seed will be generated.  It
    lej25> appears that sometimes the old one is just reinstated.

    lej25> I removed my .RData file and the problem remains.  It seems to
    lej25> happen when calls are made in succession to the same 'random
    lej25> generation type' function; but appears to

    lej25> work when different calls are made in succession.  An example is
    lej25> given below.  I was using the sample command when I found the
    lej25> problem but it happens with runif as well...

    >> runif(1)
    lej25> [1] 0.5551602
    >> runif(1)
    lej25> [1] 0.2575637
    >> rm(.Random.seed) runif(1)
    lej25> [1] 0.5551602
    >> rm(.Random.seed) rm(.Random.seed)
    lej25> Warning message: remove: variable ".Random.seed" was not found
    >> runif(1)
    lej25> [1] 0.2575637


[I don't get your behavior]
Could it be that you have a .Random.seed further up in your search() path?
This would explain everything.

Try
    find(.Random.seed, where = TRUE)

which would show you the place where you had another copy if that was the
solution ...

-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bv5ddma@mail.educities.edu.tw  Mon Sep 11 16:09:14 2000
From: bv5ddma@mail.educities.edu.tw (bv5ddma@mail.educities.edu.tw)
Date: Mon, 11 Sep 2000 17:09:14 +0200 (MET DST)
Subject: [Rd] Error on demo(tkttest)Version R.1.1.1 (PR#657)
Message-ID: <200009111509.RAA01541@pubhealth.ku.dk>

Dear Sir,
    I just installed the whole base system on my notebook with Window
98, but the demo(tktest) showed the following message:
demo(tkttest)


        demo(tkttest)
        ---- ~~~~~~~

Type  <Return>   to start :

> require(tcltk) || stop("tcltk support is absent")
Loading required package: tcltk
Error in firstlib(which.lib.loc, package) :
        TCL_LIBRARY is not set
Error in eval.with.vis(expr, envir, enclos) :
        tcltk support is absent

    Would you mind to tell me how to correct it!
    Thanks!

                                                Sincerely yours,
                                                Patrick Yuk-lun Ma M.D.
                                                 Radiation Oncologist
                                                Doctor of Hospice Team
                                                Chia-Yi Christian
Hospital
                                                Chia-Yi, Taiwan



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Mon Sep 11 16:14:02 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 11 Sep 2000 08:14:02 -0700 (PDT)
Subject: [Rd] Error on demo(tkttest)Version R.1.1.1 (PR#657)
In-Reply-To: <200009111509.RAA01541@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0009110811510.16435-100000@atlas.biostat.washington.edu>

On Mon, 11 Sep 2000 bv5ddma@mail.educities.edu.tw wrote:

> Dear Sir,
>     I just installed the whole base system on my notebook with Window
> 98, but the demo(tktest) showed the following message:
> demo(tkttest)
> 

To use the tcltk library you need to install Tcl/Tk (from
http://dev.scriptics.com) and set the TCL_LIBRARY environment variable.  
This is described at the bottom of the readme.rw1011 file in the same
directory on CRAN that you downloaded R from.

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


> 
>         demo(tkttest)
>         ---- ~~~~~~~
> 
> Type  <Return>   to start :
> 
> > require(tcltk) || stop("tcltk support is absent")
> Loading required package: tcltk
> Error in firstlib(which.lib.loc, package) :
>         TCL_LIBRARY is not set
> Error in eval.with.vis(expr, envir, enclos) :
>         tcltk support is absent
> 
>     Would you mind to tell me how to correct it!
>     Thanks!
> 
>                                                 Sincerely yours,
>                                                 Patrick Yuk-lun Ma M.D.
>                                                  Radiation Oncologist
>                                                 Doctor of Hospice Team
>                                                 Chia-Yi Christian
> Hospital
>                                                 Chia-Yi, Taiwan
> 
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From y0004379@rzbcosv2.rz.tu-bs.de  Mon Sep 11 16:27:55 2000
From: y0004379@rzbcosv2.rz.tu-bs.de (Peter Malewski)
Date: Mon, 11 Sep 2000 17:27:55 +0200
Subject: [Rd] Error on demo(tkttest)Version R.1.1.1 (PR#657)
In-Reply-To: <200009111509.RAA01541@pubhealth.ku.dk>; from bv5ddma@mail.educities.edu.tw on Mon, Sep 11, 2000 at 05:09:14PM +0200
References: <200009111509.RAA01541@pubhealth.ku.dk>
Message-ID: <20000911172752.A28400@rzbcosv2.rz.tu-bs.de>

On Mon, Sep 11, 2000 at 05:09:14PM +0200, bv5ddma@mail.educities.edu.tw wrote:
> > require(tcltk) || stop("tcltk support is absent")
> Loading required package: tcltk
> Error in firstlib(which.lib.loc, package) :
>         TCL_LIBRARY is not set
> Error in eval.with.vis(expr, envir, enclos) :
>         tcltk support is absent
> 
>     Would you mind to tell me how to correct it!
>     Thanks!

You have to install tk-libraries and set the appropiates paths. see the documentations. the tcltk packages is just an interface.

peter


----
P.Malewski, Maschplatz 8, 38114 Braunschweig, Tel.: 0531 500965, 
MH-Hannover: 0511 532 3194 / Fax: 0511 532 3190, 
P.Malewski@tu-bs.de, peter.malewski@gmx.de, malewski.peter@mh-hannover.de.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Mon Sep 11 17:40:54 2000
From: jago@mclink.it (Stefano Iacus)
Date: Mon, 11 Sep 2000 18:40:54 +0200
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
Message-ID: <a04330102b5e2b3c3454d@[159.149.74.61]>

Hy (I hope this is the right list).

1. Mac porting

I'm finishing the porting of R for Mac. I hope to finish it for the 
end of september. Thanks to the porting of  R 0.64 by Ross (that he 
gave me) I succeded in this porting. This is the current state:

Both R 1.1.1. and 1.2.0 works with minor modification to the original 
code. The Macintosh device has been updated to the new version of 
WASTE library that is Carbon-izable (for who knows MacOS, Carbon is a 
collections of libraries  that allow macintosh applications developed 
for pre-MacOS X to run under MacOS X with minor modification, MacOS X 
is beeing released in september).
There is  a lot of work to do in testing the 1.1.1 porting. The code 
I have modified is not all commented, so give me some times to fix 
this and I'll release the sources to who will ask for.
The porting runs only on PPC machines.
I  compiled 1.2 only to verify how much the changes are sensitive to 
new releases of the code. It seems to work without problems.

Is there anyone working on R porting for Mac at the moment?

Actually, I have problems on building the base package and packages 
in general and I just pick Win base package and adapt it, so the 
check I can do are not so accurate. Where can I find the proper 
documentation on building packages?
Makefiles on Mac are a problem for me at the moment, but I'll try to 
fix this also.



2. About the bug (?)

I've to remark one problem in the source code of PS and Xfig devices. 
When the device look for "afm" it is system dependent because slashes 
such "/" are used to search for fonts:

i.e. (in xfig, the same is for PS)

static int XFig_Open(DevDesc *dd, XFigDesc *pd)
{
     char buf[512];
     int i;

     for(i = 0; i < 5 ; i++) {
	sprintf(buf, "%s/afm/%s.%s", R_Home,             <--- HERE
		Family[pd->fontfamily].font[i].abbr,
		(i == 4) ? "afm" : Extension[pd->encoding]);


the slashes should be replaced by the FILESEP  definition.


Both devices fixed for FILESEP (and pictex as well) works on Mac.

Regards,

         Stefano



-- 
Stefano Maria Iacus
Dipartimento di Politica Economica ed Aziendale
Universita' di Milano
Via Conservatorio 7
20122 Milano
Tel: 02 760 74 462
Fax: 02 760 23 198
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lkavalieris@maths.otago.ac.nz  Wed Sep 13 02:40:46 2000
From: lkavalieris@maths.otago.ac.nz (lkavalieris@maths.otago.ac.nz)
Date: Wed, 13 Sep 2000 03:40:46 +0200 (MET DST)
Subject: [Rd] PR 640 (diff.default computes an incorrect starting time) (PR#658)
Message-ID: <200009130140.DAA15907@pubhealth.ku.dk>

diff.default computes an incorrect starting time for time series.

An error occurs in the arima0 procedure:

library(ts)
y <- ts(rnorm(24),freq=12)
x <- ts(rnorm(24),freq=12)
arima0(y,xreg=x,seasonal=list(order=c(0,1,0)))
Error in tsp<-(*tmp*, value = c(xtsp[1] + lag * differences * xtsp[3],
:
 invalid time series parameters specified

This can be traced to the following lines in arima0

class(x) <- NULL
diff(x,12,1)

The computation of the starting value of the differenced series in
diff.default is incorrect - replacing
             xtsp[1] + lag * differences * xtsp[3]
by

xtsp[1] + lag * differences / xtsp[3]

gives the correct starting time and the problem vanished in arima0.

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

_____________________________________

Laimonis Kavalieris
Maths and Stats
University of Otago
Dunedin
New Zealand





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Sep 14 15:31:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 14 Sep 2000 10:31:26 -0400
Subject: [Rd] classed
Message-ID: <39C0E13E.2710F02D@bank-banque-canada.ca>

For a long time now I've been using a function:

classed <- function (x, cls)
{
    class(x) <- cls
    x
}

as a utility at the end other functions to set the class of an object and return
the object. I've  noticed examples where others have been doing a similar thing
and I think it would be a useful addition to R base (unless there is already
something there to do this - it wouldn't be the first time I've missed
something). The function is useful not so much because it saves a line of code
in other functions, but because I think it encourages a cleaner, easier to read
style.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Thu Sep 14 16:37:25 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 14 Sep 2000 10:37:25 -0500
Subject: [Rd] Projects
Message-ID: <6rk8cfkmru.fsf@franz.stat.wisc.edu>

I am teaching a graduate course on Statistical Computing this
semester.  A major part of the grade is determined by a project in
which a student or small group of students produce, test, and document
some software for statistics.  I will encourage those students who are
developing in S to package their software as an R package.

I would welcome suggestions of possible projects, especially projects
that come under the heading of "Useful facilities to be added to R".
Please keep in mind that the project must be completed by mid-December
and that not all the students have extensive experience programming in
S and C.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Sep 14 17:46:41 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 14 Sep 2000 18:46:41 +0200
Subject: [Rd] Projects
In-Reply-To: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
Message-ID: <14785.241.670605.528570@gargle.gargle.HOWL>


1) Design of Experiments :

 - S (even before "-plus" existed) has had functions like

   fac.design
   oa.design
   fractionate   etc  ["White book", chapter 5].

		 [also a set of pre-stored useful fractional designs
		  for (> 2)-leveled factors.]

  Some of these would look like ``student exercises'' to do.
  If you could have them work in an environment where S-plus was *not*
  installed, this would end up as "clean table" project 
  w/o problematic code copying...

 - One could also think of  code for SEQUENTIAL design
  [do a  2^{m-k} (= 8) initially; 
   do a  (fractionated) n1 x .. x n_N on the remaining N important factors,
   given the data for the first 8 experiments].

 - Or "Taguchi" [- using (at least two) different kind of factors, some cheap,
		   some expensive to change
		 - multiple Y's, for some the "local" variance should be
		   minimized, etc etc
		 ]
	      
  This looks tedious and maybe can well be partitioned into different student
  projects.  Maybe JMC, AEF, RMH (authors of ch.5) or other experts can say
  much more here.

------

2) For Computer Scientists :
    "Differentiation" / Symbolic derivatives,..

   Improve the possibilities of  D() and deriv(), and document them.
   Make these user-extensible.

   Think about the hessian in addition to the gradient.

  

--------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Sep 14 17:52:48 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 14 Sep 2000 09:52:48 -0700
Subject: [Rd] Projects
In-Reply-To: <14785.241.670605.528570@gargle.gargle.HOWL>
 (Martin Maechler's message of "Thu, 14 Sep 2000 18:46:41 +0200")
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
Message-ID: <873dj2ncf3.fsf@jeeves.blindglobe.net>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:


    MM> 2) For Computer Scientists : "Differentiation" / Symbolic
    MM> derivatives,..

    MM>    Improve the possibilities of D() and deriv(), and document
    MM> them.  Make these user-extensible.

    MM>    Think about the hessian in addition to the gradient.

Even automating/specifications for numerical derivatives would be
nice. 


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Sep 14 18:16:42 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Sep 2000 19:16:42 +0200
Subject: [Rd] Projects
In-Reply-To: Douglas Bates's message of "14 Sep 2000 10:37:25 -0500"
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
Message-ID: <x2og1qzyf9.fsf@blueberry.kubism.ku.dk>

Douglas Bates <bates@stat.wisc.edu> writes:

> I am teaching a graduate course on Statistical Computing this
> semester.  A major part of the grade is determined by a project in
> which a student or small group of students produce, test, and document
> some software for statistics.  I will encourage those students who are
> developing in S to package their software as an R package.
> 
> I would welcome suggestions of possible projects, especially projects
> that come under the heading of "Useful facilities to be added to R".
> Please keep in mind that the project must be completed by mid-December
> and that not all the students have extensive experience programming in
> S and C.

These are probably too hard and too narrow, but now the topic is up:

- getting predictions to work on new data in cases where model depends
  on data set (notably regressions splines with auto knot placement)

- in lme, we can predict at level K would be nice to get SE of
  prediction (this also takes levels, extending distinction between
  confidence and tolerance intervals) 

- conditional tolerance in lme (much too hard I suspect)

- in model.tables.aov, SE's for type="means" are sorely missed.

This is not very hard, but maybe too small (although one will have to
study issues of contrasts and internals of an lm object rather
carefully):

- extend pairwise.t.test to take a linear model and a factor in the
  model as argument. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Sep 14 18:27:43 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 14 Sep 2000 12:27:43 -0500
Subject: [Rd] Projects
In-Reply-To: rossini@blindglobe.net's message of "14 Sep 2000 09:52:48 -0700"
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu> <14785.241.670605.528570@gargle.gargle.HOWL> <873dj2ncf3.fsf@jeeves.blindglobe.net>
Message-ID: <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>

>>>>> "AJR" == A J Rossini <rossini@blindglobe.net> writes:

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
  MM> 2) For Computer Scientists : "Differentiation" / Symbolic
  MM> derivatives,..

  MM> Improve the possibilities of D() and deriv(), and document them.
  MM> Make these user-extensible.

  MM> Think about the hessian in addition to the gradient.

  AJR> Even automating/specifications for numerical derivatives would
  AJR> be nice.

The nls package has a function called numericDeriv - with a little
modification it could be used elsewhere. An earlier version of the
underlying C code is used as an example in the R Extensions manual.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Sep 14 18:43:05 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 14 Sep 2000 10:43:05 -0700
Subject: [Rd] Projects
In-Reply-To: <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
 (Saikat DebRoy's message of "14 Sep 2000 12:27:43 -0500")
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
 <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
Message-ID: <87og1qlviu.fsf@jeeves.blindglobe.net>

>>>>> "SD" == Saikat DebRoy <saikat@stat.wisc.edu> writes:


>>>>> "AJR" == A J Rossini <rossini@blindglobe.net> writes:
>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:
    MM> 2) For Computer Scientists : "Differentiation" / Symbolic
    MM> derivatives,..

    MM> Improve the possibilities of D() and deriv(), and document
    MM> them.  Make these user-extensible.

    MM> Think about the hessian in addition to the gradient.

    AJR> Even automating/specifications for numerical derivatives
    AJR> would be nice.

    SD> The nls package has a function called numericDeriv - with a
    SD> little modification it could be used elsewhere. An earlier
    SD> version of the underlying C code is used as an example in the
    SD> R Extensions manual.

Right, and it would be nice (necessary?) for testing and verification
of the "symbolic" side of the package as well as for "drop-in" or
"change a parameter" design functionality.  As well as being a
starting point for the interface for the symbolicDeriv package.

best,
-tony


-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Fri Sep 15 00:31:11 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Fri, 15 Sep 2000 09:31:11 +1000
Subject: [Rd] classed
Message-ID: <3.0.32.20000915093110.012a4c70@pophost.nsw.cmis.csiro.au>

At 10:31 14/09/00 -0400, Paul Gilbert wrote:
>For a long time now I've been using a function:
>
>classed <- function (x, cls)
>{
>    class(x) <- cls
>    x
>}
>
>as a utility at the end other functions to set the class of an object and
return
>the object. I've  noticed examples where others have been doing a similar
thing
>and I think it would be a useful addition to R base (unless there is already
>something there to do this - it wouldn't be the first time I've missed
>something). The function is useful not so much because it saves a line of
code
>in other functions, but because I think it encourages a cleaner, easier to
read
>style.

In a sense it is there already as structure()

classed(x, "foo")

has exactly the same effect (in R and S3) as

structure(x, class = "foo")

but structure() is more general allowing several attributes to be set at
once via additional arguments (though all have to be named).

I should point out, though, that there is a danger in going this way
entirely if there is any intention of porting the code to S4 because in S4
the class of an object is NOT an attribute.  Once you get into the swing of
using structure() in this way it can become habitual and then going through
your code to find all the instances where you have set a class attribute
this way and changing it for S4 can be quite tedious.

Bill Venables.


>
>Paul Gilbert
>
>-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
.-.-
>r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
>Send "info", "help", or "[un]subscribe"
>(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
._._
>
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Fri Sep 15 03:15:52 2000
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Fri, 15 Sep 2000 02:15:52 GMT
Subject: [Rd] Projects
In-Reply-To: <87og1qlviu.fsf@jeeves.blindglobe.net>
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu> <14785.241.670605.528570@gargle.gargle.HOWL> <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu> <87og1qlviu.fsf@jeeves.blindglobe.net>
Message-ID: <39c38587.1708646@julian.uwo.ca>

On 14 Sep 2000 10:43:05 -0700, you wrote:

>Right, and it would be nice (necessary?) for testing and verification
>of the "symbolic" side of the package as well as for "drop-in" or
>"change a parameter" design functionality.  As well as being a
>starting point for the interface for the symbolicDeriv package.

I'm not sure if this is what Tony has in mind, but something I always
do when working with optimizers that take a supplied derivative is to
write a little numerical derivative routine to check that my calculus
and programming were done correctly.  Putting that into a single
function which took arguments just like the ones you pass to the
optimizer would be very convenient.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Fri Sep 15 03:18:24 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Fri, 15 Sep 2000 12:18:24 +1000
Subject: [Rd] Projects
Message-ID: <3.0.32.20000915121819.012af4d0@pophost.nsw.cmis.csiro.au>

At 18:46 14/09/00 +0200, Martin Maechler wrote:
>
>1) Design of Experiments :
>
> - S (even before "-plus" existed) has had functions like
>
>   fac.design
>   oa.design
>   fractionate   etc  ["White book", chapter 5].
>
>		 [also a set of pre-stored useful fractional designs
>		  for (> 2)-leveled factors.]

The drawback with this project, worthy as it is, is that if you are not
really on top of experimental design the computations can be surprisingly
tricky.

On the quiet I have just released a miniscule library for R, conf.design,
that might make a good first step, though.  It generates confounded
symmetrical designs for the p^n case.  You tell it which contrasts you are
prepared to sacrifice across blocks and it generates the design that will
do it.  It also has things to generate "pseudo-factors", that is if you
have a composite number of levels for your real factor it will generate a
number of factors each with a prime number of levels which together are
equivalent to yours.  In this way you can partially extend the thing to the
non-prime case, but not very far.  There is a really interesting
programming exercise in this waiting to be done here, I have to say, but
the trickiness should not be under-estimated.

I released it because I kept getting requests to do so, but it was done a
long time ago and it is not exactly tidy.  In particular the front end is
obscure and should be formula based rather than matrix based.  This would
make a nice little programming project for a wet weekend or so.

(conf.design also has a function, primes(), that is way overkill for the
sorts of things I need it for in this library, but it generates primes < N
using the classical sieve of eratosthenes in a pretty slick way.)

Another approach to this whole problem is to look for approximate designs
rather than insist on exact balance, orthogonality, or even absolutely
highest efficiency.  In the experimental design context (as opposed to,
say, coding theory) you never need anything but a reasonably good design,
anyway.  

There is some freely available software around for doing that, such as
"Dopt" a fortran program by Alan Miller and Nam Nguyen that was published
in Applied Statistics algorithms some time ago for constructing D-optimal
(or nearly so) experiments for a given simple block structure.  

I had a go at putting a front-end on this some time ago and I think the
result is still floating around StatLib, but the S code is c*o*m*p*l*e*x
and probably far too optimistic in what it sets out to do.  I have never
returned to it but again, this had a fair following for some time (maybe
even still) and would be a very useful thing to have for R.  I also have
some simulated annealing-type software that constructs near optimal block
and row-column designs but I left that problem alone 9 years ago and have
not thought much about it since.  It could be resurrected, though, if
anyone were interested.  This is written in C and has never had an S front
end.

Bill Venables.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Fri Sep 15 04:26:33 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 14 Sep 2000 20:26:33 -0700
Subject: [Rd] Projects
In-Reply-To: <39c38587.1708646@julian.uwo.ca>
 (Duncan Murdoch's message of "Fri, 15 Sep 2000 02:15:52 GMT")
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
 <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
 <87og1qlviu.fsf@jeeves.blindglobe.net> <39c38587.1708646@julian.uwo.ca>
Message-ID: <87n1ha1gk6.fsf@jeeves.blindglobe.net>

>>>>> "DM" == Duncan Murdoch <dmurdoch@pair.com> writes:


    DM> On 14 Sep 2000 10:43:05 -0700, you wrote:
    >> Right, and it would be nice (necessary?) for testing and
    >> verification of the "symbolic" side of the package as well as
    >> for "drop-in" or "change a parameter" design functionality.  As
    >> well as being a starting point for the interface for the
    >> symbolicDeriv package.

    DM> I'm not sure if this is what Tony has in mind, but something I
    DM> always do when working with optimizers that take a supplied
    DM> derivative is to write a little numerical derivative routine
    DM> to check that my calculus and programming were done correctly.
    DM> Putting that into a single function which took arguments just
    DM> like the ones you pass to the optimizer would be very
    DM> convenient.

That's exactly it.  (but perhaps have at least the 3 basic forms --
f(point + eps) - f(point), f(point + eps/2) - f(point - eps/2),
f(point) - f(point - eps)).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Fri Sep 15 05:00:52 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Fri, 15 Sep 2000 15:00:52 +1100
Subject: [Rd] classed
In-Reply-To: <39C0E13E.2710F02D@bank-banque-canada.ca>; from pgilbert@bank-banque-canada.ca on Thu, Sep 14, 2000 at 10:31:26AM -0400
References: <39C0E13E.2710F02D@bank-banque-canada.ca>
Message-ID: <20000915150052.B24267@ftoomsh.progsoc.uts.edu.au>

On Thu, Sep 14, 2000 at 10:31:26AM -0400, Paul Gilbert wrote:
> classed <- function (x, cls)
> {
>     class(x) <- cls
>     x
> }
[snip]
> The function is useful not so much because it saves a line of code
> in other functions, but because I think it encourages a cleaner, easier to read
> style.

Just to add my 2c, I don't believe it is cleaner to hide assignment
statements inside functions without some reasonably sensible reason to
do so. When I see something like:

	y <- wibble( x, "foo" );

I would expect `x' not to change. Now OK this isn't a watertight rule
(nothing ever is) but little functions containing hidden assignment
statements are usually confusing to a reader not already familiar
with the code.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Fri Sep 15 05:40:36 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Fri, 15 Sep 2000 15:40:36 +1100
Subject: [Rd] Projects (i.e. wishlist)
In-Reply-To: <14785.241.670605.528570@gargle.gargle.HOWL>; from maechler@stat.math.ethz.ch on Thu, Sep 14, 2000 at 06:46:41PM +0200
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu> <14785.241.670605.528570@gargle.gargle.HOWL>
Message-ID: <20000915154036.C24267@ftoomsh.progsoc.uts.edu.au>

On Thu, Sep 14, 2000 at 06:46:41PM +0200, Martin Maechler wrote:
> 2) For Computer Scientists :
>     "Differentiation" / Symbolic derivatives,..
> 
>    Improve the possibilities of  D() and deriv(), and document them.
>    Make these user-extensible.
> 
>    Think about the hessian in addition to the gradient.

Now that you mention it, I'd like this to work:

> X <- expression( x )
> X + 1
expression(x + 1)
> (X + 1) + 2
expression((x + 1) + 2)
> simplify(( X + 1 ) + 2 )
expression( x + 3 )
> simplify( expand(( X + 2 ) * ( X + 5 ) * ( X + 7 )))
expression(x^3 + 14 * x^2 + 59 * x + 70)
> factorise( X^3 + 14 * X^2 + 59 * X + 70 ))
expression((x + 2) * (x + 5) * (x + 7))


If the roots have small imaginary components due to round off,
that is still OK. If there is a good reason for the operations
to return objects of mode ``call'' rather than mode ``expression''
(like what D() does) that would be OK too, although I prefer
to work with the expression() wrappers on because then the printed
form is identical to what you type in. At any rate, the operations
have to handle objects of mode ``expression'', ``call'' and all the
numericals as their inputs.

And as many others as you get time to do plus a system for
categorising, organising, documenting and extending the available
manipulations...

... I'm sure this is all very useful for statistics, it would
be useful to me at any rate. 

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@cmis.csiro.au  Fri Sep 15 05:21:29 2000
From: Bill.Venables@cmis.csiro.au (Bill Venables)
Date: Fri, 15 Sep 2000 14:21:29 +1000
Subject: [Rd] classed
Message-ID: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au>

At 15:00 15/09/00 +1100, Telford Tendys wrote:
>On Thu, Sep 14, 2000 at 10:31:26AM -0400, Paul Gilbert wrote:
>> classed <- function (x, cls)
>> {
>>     class(x) <- cls
>>     x
>> }
>[snip]
>> The function is useful not so much because it saves a line of code
>> in other functions, but because I think it encourages a cleaner, easier
to read
>> style.
>
>Just to add my 2c, I don't believe it is cleaner to hide assignment
>statements inside functions without some reasonably sensible reason to
>do so. When I see something like:
>
>	y <- wibble( x, "foo" );
>
>I would expect `x' not to change. 

And nor does it.  What happens is that a new object is constructed from x,
with (in this case) extra bits and pieces tacked on and (here) that new
object is assigned the name y.

Writing a function to modify its argument is possible (e.g. fix() does it)
but not altogether straightforward, especially if you want it to work in
the most general case.

> Now OK this isn't a watertight rule
>(nothing ever is) but little functions containing hidden assignment
>statements are usually confusing to a reader not already familiar
>with the code.

If that was what was happening I would agree with you, but it isn't.  You
have been misled by the old function/macro thing.  What was presented was a
true function but you read it as if it were a macro.  

Bill V.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Fri Sep 15 06:58:09 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Fri, 15 Sep 2000 16:58:09 +1100
Subject: [Rd] classed
In-Reply-To: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au>; from Bill.Venables@cmis.csiro.au on Fri, Sep 15, 2000 at 02:21:29PM +1000
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au>
Message-ID: <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au>

On Fri, Sep 15, 2000 at 02:21:29PM +1000, Bill Venables wrote:
> And nor does it.  What happens is that a new object is constructed from x,
> with (in this case) extra bits and pieces tacked on and (here) that new
> object is assigned the name y.
> 
> Writing a function to modify its argument is possible (e.g. fix() does it)
> but not altogether straightforward, especially if you want it to work in
> the most general case.

Hmmm, OK now that I test it out you are quite correct. But that implies
that the whole object is copied because later modification of either the
original or the result do not propagate between x and y... unless R has
some sort of copy-on-write flag which I never noticed when wandering 
through the R source (a lot probably falls into that category).

If it doesn't use copy-on-write then the result will be additional
slowdown when all your data is copied again and again (I guess it depends
on how big the object is).

	- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From twoday@freeatlast.com  Fri Sep 15 09:44:07 2000
From: twoday@freeatlast.com (twoday@freeatlast.com)
Date: Fri, 15 Sep 2000 10:44:07 +0200 (MET DST)
Subject: [Rd] AD:Family Reunion T Shirts & More (PR#659)
Message-ID: <200009150844.KAA12494@pubhealth.ku.dk>

Message sent by:  Kuppler Graphics, 32 West Main Street, Maple 
Shade, New Jersey, 08052,
1-800-810-4330.   This list will NOT be sold.  All addresses 
are automatically added to our remove list.

Hello.  My name is Bill from Kuppler Graphics.  We do 
screenprinting on T Shirts, Sweatshirts,
Jackets, Hats, Tote Bags and more!

Do you or someone you know have a Family Reunion coming up?  
Kuppler Graphics would like to
provide you with some great looking T Shirts for your Reunion.

Kuppler Graphics can also provide you with custom T's and 
promotional items such as imprinted
magnets, keychains, pens, mugs, hats, etc. for your business or 
any fundraising activity
(church, school, business etc.) We also can provide you with 
quality embroidery. 

We are a family owned company with over 15 years of experience.  

All work is done at this location.  No middle man.  Our prices 
are great!

Please call toll free 1-800-810-4330 if the reply to email is 
down for a quote or to
discuss your screenprinting needs 

Bill
Kuppler Graphics
 
 
 
 
 
 
 
 
 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep 15 10:23:33 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 15 Sep 2000 11:23:33 +0200 (MET DST)
Subject: [Rd] identify.default ignores any setting of cex. (PR#660)
Message-ID: <200009150923.LAA13337@pubhealth.ku.dk>

R 1.1.1 on Windows, but I think this is widespread.

Using either

par(cex=0.5)
plot(1:10)
identify(1:10)

or

plot(1:10)
identify(1:10, cex=0.5)

ignores the cex setting.  The root cause is that par(cex=0.5)
alters cexbase for the device but sets cex=1.0, and the internal
text plotting routines use cex and not cexbase.

The obvious fix is to set cex to cexbase in do_identify. However,
if this is fixed, there is another problem, The offset of the label
is related to the cex in use for the label, and not for the symbol.
So

plot(1:10, type="n")
points(1:10, cex=5)
identify(1:10)

is not sensible in placing the labels.  That may be hard to anticipate,
but 

plot(1:10)
identify(1:10, cex=0.5)

needs to use cex=1 not cex=0.5 for the adjustment.  Perhaps identify is
trying too hard, and should give the user more control over the precise
position of the label (as S-PLUS does).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep 15 10:30:55 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Sep 2000 11:30:55 +0200
Subject: [Rd] AD:Family Reunion T Shirts & More (PR#659)
In-Reply-To: twoday@freeatlast.com's message of "Fri, 15 Sep 2000 10:44:07 +0200 (MET DST)"
References: <200009150844.KAA12494@pubhealth.ku.dk>
Message-ID: <x2hf7ivw6o.fsf@blueberry.kubism.ku.dk>

twoday@freeatlast.com writes:

> Message sent by:  Kuppler Graphics, 32 West Main Street, Maple 
> Shade, New Jersey, 08052,
<etc.>

Looks like Martins spamfilter needs to learn to catch the 'AD:' prefix
there....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Sep 15 13:31:48 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 15 Sep 2000 14:31:48 +0200
Subject: [Rd] NULL == NULL
Message-ID: <14786.5812.611071.633622@gargle.gargle.HOWL>

gives an error in R.

In both S+3 and S+5, it "works" by returning NULL or logical(0),
respectively.

As a consequence,

   all(x == y)

returns TRUE in Splus, when x <- y <- NULL
but gives an error in R.

Do we have a good reason *not* to return  logical(0) ?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Sep 15 16:10:33 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 15 Sep 2000 17:10:33 +0200
Subject: [Rd] "==" for calls and expressions ??
In-Reply-To: <14786.5812.611071.633622@gargle.gargle.HOWL>
References: <14786.5812.611071.633622@gargle.gargle.HOWL>
Message-ID: <14786.15337.398835.357060@gargle.gargle.HOWL>

{following up myself on the     NULL == NULL   topic}

I found	that 
	 x == y
is allowed in R when x and y are (generalized) ``Vectors''
(accidentally, I'm quite sure !), which includes
lists and  expressions, but the result is pretty `funny' in some cases, e.g.

    > e3 <- expression(1,x,x^2)
    > e3 == expression(1,x,x^2)
    [1] FALSE  TRUE FALSE
    > e3 == e3 ## all TRUE..
    [1] TRUE TRUE TRUE

Note that it's not just "==", but all 6 relation operators ( "!=", "<", ...).

It's been quite easy for me to make R produce an error in these cases
{the same as for

  > cl <- quote(sin(x)) ; cl == cl
  Error in cl == cl : comparison (1) is possible only for vector types
}
But with that "make check" would fail
(we have at least on case in the examples where we test equality of two expr)
and it might be that people's R code already is doing these comparisons
with list()s and expression()s.

What should be done?

--
One possibility would be to make these work for call()s and expressions,
by using deparse(.) on the non-symbol calls
{symbol calls already *do* work -- and this is *not* accidental :

  > cl <- as.name("X"); cl == cl; cl > cl
  [1] TRUE
  [1] FALSE
}
and dealing with expressions as "vector of calls".
It is still less clear how list()s should be dealt with.

We really have the problem of differing 
backcompatibility to R and compatibility to S
(in S, these rel.ops only apply to atomic objects and NULL).

Opinions?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Sep 15 16:19:50 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 15 Sep 2000 17:19:50 +0200 (MET DST)
Subject: [Rd] PR 640 (diff.default computes an incorrect starting time) (PR#658)
Message-ID: <200009151519.RAA18995@pubhealth.ku.dk>

The reported bug in  diff.default()
has already been corrected for R 1.1.1

thank you anyway, ;-)

Martin Maechler


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Sep 15 16:24:46 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 15 Sep 2000 17:24:46 +0200 (MET DST)
Subject: [Rd] diff.default / diff.ts in wrong package bug (PR#640)
Message-ID: <200009151524.RAA19061@pubhealth.ku.dk>


>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
    PD> maechler@stat.math.ethz.ch writes:
    >> One easy and "clean" fix is to put the following at the very
    >> beginning of diff.default :
    >> 
    >> if(is.ts(x)) { require(ts)
    >>                UseMethod("diff") }
    PD> ...
    >> The above passes "make check" (and more).
    >> 
    >> Anybody against this?

    PD> I'm not really pro or con, but what is wrong with autoloading
    PD> diff.ts??

    MM> it does not work, i.e.

    MM>    autload("diff.ts", "ts") diff(ts(1:10))

    MM> does not load package ts.  It's not so clear if this is a bug in
    MM> method dispatching ...  but assuming ``standard semantic'' (diff.ts
    MM> is in search() i.e. diff() should dispatch to it), it is one..

    MM> Shall I 1) commit my proposed change to "R-release-patches" (since
    MM> it fixes a bug in R 1.1.1) 2) submit a new bug report about the
    MM> non-dispatching to "Autoloads" objects ?

Just a report to the non-core audience and for the bug-archive:

Both of these have been resolved now for "R-devel" [R 1.2 unstable]

 i.  autoload("diff.ts", "ts")  now *does* work (thanks to Thomas Lumley)

 ii. the above autoload is now in the system profile and fixes the diff(.) bug.

--
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Sep 15 16:42:44 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 15 Sep 2000 08:42:44 -0700 (PDT)
Subject: [Rd] NULL == NULL
In-Reply-To: <14786.5812.611071.633622@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.21.0009150835420.26164-100000@atlas.biostat.washington.edu>

On Fri, 15 Sep 2000, Martin Maechler wrote:

> gives an error in R.
> 
> In both S+3 and S+5, it "works" by returning NULL or logical(0),
> respectively.
> 
> As a consequence,
> 
>    all(x == y)
> 
> returns TRUE in Splus, when x <- y <- NULL
> but gives an error in R.
> 
> Do we have a good reason *not* to return  logical(0) ?

I think returning logical(0) is a good idea. Having all(NULL==NULL) be
TRUE is consistent with what we do for vacuous cases of min and max. 

However, a arguable reason for not doing it is that NULL is actually a
list with no elements rather than a vector with no elements, and you can't
compare lists with ==. On the gripping hand, you can't turn NULL into a
vector of length zero using eg unlist(), so the only way to get this
comparison to work is to have NULL==NULL.

	-thomas



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 15 16:53:04 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Sep 2000 11:53:04 -0400
Subject: [Rd] classed
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au>
Message-ID: <39C245E0.A2B36FA6@bank-banque-canada.ca>

>> classed <- function (x, cls)
>> {
>>     class(x) <- cls
>>     x
>> }

>If it doesn't use copy-on-write then the result will be additional
>slowdown when all your data is copied again and again (I guess it depends
>on how big the object is).

I've often wondered about this. Any comments from someone who really knows the
internals of R? When I first implemented it I did some testing and didn't notice
any really big slowdown and I do use a lot of fairly big (multi MB size)
objects. But notice that the difference is really in the function call, not in
the copying of objects. A function using classed would end

  classed(x, "whatever") }

rather than

 class(x) <- "whatever"
 x}

I think the copy is (or is not) made in both cases.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 15 17:34:49 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Sep 2000 12:34:49 -0400
Subject: [Rd] Projects
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
 <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
 <87og1qlviu.fsf@jeeves.blindglobe.net> <39c38587.1708646@julian.uwo.ca> <87n1ha1gk6.fsf@jeeves.blindglobe.net>
Message-ID: <39C24FA8.4D681B01@bank-banque-canada.ca>

    DM> Putting that into a single function which took arguments just
    DM> like the ones you pass to the optimizer would be very
    DM> convenient.

>That's exactly it.  (but perhaps have at least the 3 basic forms --
>f(point + eps) - f(point), f(point + eps/2) - f(point - eps/2),
>f(point) - f(point - eps)).

Buried somewhere in one of my packages is code for doing Richardson
extrapolation, which usually gives a much better estimate than these 3 basic
forms. If this project goes ahead I will dig it out.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Fri Sep 15 17:58:25 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 15 Sep 2000 09:58:25 -0700
Subject: [Rd] Projects
In-Reply-To: <39C24FA8.4D681B01@bank-banque-canada.ca>
 (Paul Gilbert's message of "Fri, 15 Sep 2000 12:34:49 -0400")
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
 <14785.241.670605.528570@gargle.gargle.HOWL>
 <873dj2ncf3.fsf@jeeves.blindglobe.net> <qxpaeda6fzk.fsf@verdi.stat.wisc.edu>
 <87og1qlviu.fsf@jeeves.blindglobe.net> <39c38587.1708646@julian.uwo.ca>
 <87n1ha1gk6.fsf@jeeves.blindglobe.net>
 <39C24FA8.4D681B01@bank-banque-canada.ca>
Message-ID: <87wvgdbnim.fsf@jeeves.blindglobe.net>

(not to the list)

>>>>> "PG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    DM> Putting that into a single function which took arguments just
    DM> like the ones you pass to the optimizer would be very
    DM> convenient.

    >> That's exactly it.  (but perhaps have at least the 3 basic
    >> forms -- f(point + eps) - f(point), f(point + eps/2) - f(point
    >> - eps/2), f(point) - f(point - eps)).

    PG> Buried somewhere in one of my packages is code for doing
    PG> Richardson extrapolation, which usually gives a much better
    PG> estimate than these 3 basic forms. If this project goes ahead
    PG> I will dig it out.

That would be cool, and I believe there are other, more precise,
approaches!  BUT, I'm worried that this (_numerical_ derivatives),
might become a package unto itself (which gets amusing, especially if
you consider the many ways one might want to differentiate a
multi-array vector by a vector...).

All of a sudden, I'm starting to see 2 projects out of one, depending
on the scope.

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Fri Sep 15 18:33:33 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Fri, 15 Sep 2000 10:33:33 -0700 (PDT)
Subject: [Rd] classed
In-Reply-To: <39C245E0.A2B36FA6@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.21.0009151018330.27057-100000@atlas.biostat.washington.edu>

On Fri, 15 Sep 2000, Paul Gilbert wrote:
> 
> I've often wondered about this. Any comments from someone who really knows the
> internals of R? When I first implemented it I did some testing and didn't notice
> any really big slowdown and I do use a lot of fairly big (multi MB size)
> objects. But notice that the difference is really in the function call, not in
> the copying of objects. A function using classed would end
> 
>   classed(x, "whatever") }
> 
> rather than
> 
>  class(x) <- "whatever"
>  x}
> 
> I think the copy is (or is not) made in both cases.
> 

Setting an attribute doesn't result in a copy, but setting one in a
function will: a reference to x is initially passed to the function, but
when the attribute is set a copy is made so that the local x rather than
the global one is modified.  I don't think another copy is made when
classed() returns, but I'm not sure. Using classed() makes at least one
more copy that using class()<-.

For interpreted "foo<-" functions this wouldn't be true -- the same
amount of copying would be done either way -- but class() is special.


	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Sep 15 18:47:28 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 15 Sep 2000 12:47:28 -0500
Subject: [Rd] classed
In-Reply-To: Paul Gilbert's message of "Fri, 15 Sep 2000 11:53:04 -0400"
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au> <39C245E0.A2B36FA6@bank-banque-canada.ca>
Message-ID: <6rn1h9mtsf.fsf@franz.stat.wisc.edu>

I reached a similar conclusion to Thomas Lumley.  Here is the response
I wrote before I got a chance to read Thomas's response.

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> >If it doesn't use copy-on-write then the result will be additional
> >slowdown when all your data is copied again and again (I guess it depends
> >on how big the object is).
> 
> I've often wondered about this. Any comments from someone who really knows the
> internals of R? When I first implemented it I did some testing and didn't notice
> any really big slowdown and I do use a lot of fairly big (multi MB size)
> objects. But notice that the difference is really in the function call, not in
> the copying of objects. A function using classed would end
> 
>   classed(x, "whatever") }
> 
> rather than
> 
>  class(x) <- "whatever"
>  x}

Assignment functions like "class<-" are allowed to modify their first
argument in place.  That's the whole reason for using constructions
like foo[] <- bar, which is really a call to "[<-" with arguments foo
and bar, instead of foo <- bar.  It saves on copying.

An R function like classed(x, "cname") cannot modify its
arguments so it must return a copy.

I think the internal C code in src/main/attrib.c indicates that
do_classgets does not copy the first argument unless it happens to be
a named object.  (Does anyone know why a named object has to be copied?)

SEXP do_classgets(SEXP call, SEXP op, SEXP args, SEXP env)
{
    checkArity(op, args);
    if (NAMED(CAR(args)) == 2) SETCAR(args, duplicate(CAR(args)));
    if (length(CADR(args)) == 0) SETCADR(args, R_NilValue);
    setAttrib(CAR(args), R_ClassSymbol, CADR(args));
    return CAR(args);
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Sep 15 19:44:20 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 15 Sep 2000 20:44:20 +0200 (MET DST)
Subject: [Rd] .Random.seed resetting (PR#656)
Message-ID: <200009151844.UAA19859@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "lej25" == lej25  <lej25@statslab.cam.ac.uk> writes:
    lej25> Full_Name: Lara Jamieson Version: 1.1.1 OS: Linux Submission
    lej25> from: (NULL) (131.111.20.203)

    lej25> I've checked for other reports on this and can't find anything.
    lej25> It seems that the .Random.seed isn't updated properly after
    lej25> using rm(.Random.seed).  Mu understanding from the help file
    lej25> indicates that a new 'random' seed will be generated.  It
    lej25> appears that sometimes the old one is just reinstated.

    lej25> I removed my .RData file and the problem remains.  It seems to
    lej25> happen when calls are made in succession to the same 'random
    lej25> generation type' function; but appears to

    lej25> work when different calls are made in succession.  An example is
    lej25> given below.  I was using the sample command when I found the
    lej25> problem but it happens with runif as well...

    >>> runif(1)
    lej25> [1] 0.5551602
    >>> runif(1)
    lej25> [1] 0.2575637
    >>> rm(.Random.seed) runif(1)
    lej25> [1] 0.5551602
    >>> rm(.Random.seed) rm(.Random.seed)
    lej25> Warning message: remove: variable ".Random.seed" was not found
    >>> runif(1)
    lej25> [1] 0.2575637


    MM> [I don't get your behavior] Could it be that you have a
    MM> .Random.seed further up in your search() path?  This would explain
    MM> everything.

Well I *could* reproduce the bogous behavior in R 1.1.1, after all.

The problem is that .Random.seed is not only in .GlobalEnv, but also 
"Autoloads" :

R --vanilla

  > runif(1)
  [1] 0.4659391
  > find(".Random.seed")
  [1] ".GlobalEnv" "Autoloads" 
  > all.equal(.Random.seed, get(".Random.seed", envir = .AutoloadEnv))
  [1] TRUE

and hence, after rm(.Random.seed), runif(*) still gets the one from the
autoloads... 

This bug has just been fixed in R-devel
(by an expert, not me!), together with the even more peculiar

    > library(stepfun)
    > AbC <<- "Z"
    > find("AbC")
    [1] ".GlobalEnv"      "package:stepfun" "Autoloads"      

 {but you were told never to use "<<-"  ;-) }
     
--
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Fri Sep 15 20:09:46 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 15 Sep 2000 14:09:46 -0500
Subject: [Rd] classed
In-Reply-To: Douglas Bates's message of "15 Sep 2000 12:47:28 -0500"
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au> <39C245E0.A2B36FA6@bank-banque-canada.ca> <6rn1h9mtsf.fsf@franz.stat.wisc.edu>
Message-ID: <qxp1yylii9x.fsf@verdi.stat.wisc.edu>

I decided to experiment with this a little. I use a little C function
called printAddress that prints the address of an R object to standard
error.

> x <- 1
> .Call("printAddress", x)
0x891fedc
NULL
> x <- classd(x, "a")
> .Call("printAddress", x)
0x891fd2c
NULL

So the address has changed. Now we can go inside a debugger and see if
do_classgets has anything to do with it.

...

> x <- 1
> .Call("printAddress", x)
0x891fc78
NULL
> x <- classd(x, "a")
# now go to debugger
Breakpoint 1, do_classgets (call=0x89221f0, op=0x81d6720, args=0x8922164, 
    env=0x8922298) at ../../../r-devel/src/main/attrib.c:315
(gdb) p args->u.listsxp.carval
$7 = (struct SEXPREC *) 0x8921aa8
(gdb) n
(gdb) n
(gdb) n
(gdb) p args->u.listsxp.carval
$9 = (struct SEXPREC *) 0x8921aa8
(gdb) n
Rf_eval (e=0x89221f0, rho=0x8922298) at ../../../r-devel/src/main/eval.c:335

So do_classgets does not change the 
(gdb) c
Continuing.
# now we are back to R
> .Call("printAddress", x)
0x89219f4
NULL

The interesting thing is that the object address changed twice. That
is, x is getting copied twice - once after classd is called but before
setting the class and another time when it returns from classd. I was
expecting the second change but not the first.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Fri Sep 15 20:31:02 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 15 Sep 2000 14:31:02 -0500
Subject: [Rd] classed
In-Reply-To: Saikat DebRoy's message of "15 Sep 2000 14:09:46 -0500"
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au> <39C245E0.A2B36FA6@bank-banque-canada.ca> <6rn1h9mtsf.fsf@franz.stat.wisc.edu> <qxp1yylii9x.fsf@verdi.stat.wisc.edu>
Message-ID: <qxpwvgdh2q1.fsf@verdi.stat.wisc.edu>

I should have looked more carefully before sending

> So do_classgets does not change the 

That should read

So do_classgets does not change the value of CAR(args).


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 15 21:14:26 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Sep 2000 16:14:26 -0400
Subject: [Rd] classed
References: <3.0.32.20000915142129.0129d2d0@pophost.nsw.cmis.csiro.au> <20000915165809.I24267@ftoomsh.progsoc.uts.edu.au> <39C245E0.A2B36FA6@bank-banque-canada.ca> <6rn1h9mtsf.fsf@franz.stat.wisc.edu>
Message-ID: <39C28322.4F5F5685@bank-banque-canada.ca>



TL>For interpreted "foo<-" functions this wouldn't be true -- the same
TL>amount of copying would be done either way -- but class() is special.

DB>Assignment functions like "class<-" are allowed to modify their first
DB>argument in place.  That's the whole reason for using constructions
DB>like foo[] <- bar, which is really a call to "[<-" with arguments foo
DB>and bar, instead of foo <- bar.  It saves on copying.

Doug
These seem slightly different (but I've already demonstrated that I don't
understand this, so maybe they're not).  I don't think that what you are saying
is true in general or there would be no "back out" of the function below, and
there is.  I can believe that class is special (and this would be an arguement
for classed being in the base and special too). But if it was special when I did
timing tests I'm a bit surprized that I didn't find much difference.

> "test<-" <- function(x, value) {attr(x, "zot") <-  value ; stop(); x}
> x  <- 2
> test(x) <- 5
Error in test<-(*tmp*, value = 5) :
> x
[1] 2
> attr(x, "zot")
NULL
>

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Sep 17 15:08:00 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 17 Sep 2000 16:08:00 +0200 (CEST)
Subject: [Rd] Re: [R] problems with R COMPILE in make
In-Reply-To: <200009041539.LAA13736@jessie.research.bell-labs.com>
References: <200009041539.LAA13736@jessie.research.bell-labs.com>
Message-ID: <14788.53312.712613.772740@aragorn.ci.tuwien.ac.at>

>>>>> Duncan Temple Lang writes:

> Hi Peter.

>  I took a quick look at the R COMPILE problem and it seems that there
> are in fact two problems.  One is the problem with the attempt to
> build a target `w'. And the other is that if that error didn't arise,
> you would have an infinite loop.

> Here is quick fix to your problem. Add the line

>   include $(R_HOME)/etc/Makeconf

> to your Makefile. Then, make will compile imageio.o with the correct flags.

> eyore[RCompile-174]>make
> gcc -I/home2/FlowData/AltProjects/R-shared//include  -I/usr/local/include -mieee-fp -D__NO_MATH_INLINES  -fPIC  -g -O2 -c imageio.c -o imageio.o 


> That should be enough to get things working.  The more detailed
> explanation is as follows.

> a) The rule
> imageio.o: imageio.c
>  	R COMPILE imageio.c

> is executed by the first call to make.
> The COMPILE script expands this to call

>      make -f $R_HOME/etc/Makeconf -f Makefile imageio.o

> At this point, this second make process sees the same rule, and does
> the same thing. Hence, you have infinite recursion.

Duncan,

Thanks for answering this.

Should we consider this behavior a bug?  I am not sure I see an easy way
out ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun Sep 17 23:51:12 2000
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 18 Sep 2000 00:51:12 +0200
Subject: [Rd] Projects
In-Reply-To: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
References: <6rk8cfkmru.fsf@franz.stat.wisc.edu>
Message-ID: <200009172251.AAA19182@aragorn.ci.tuwien.ac.at>

>>>>> Douglas Bates writes:

> I am teaching a graduate course on Statistical Computing this
> semester.  A major part of the grade is determined by a project in
> which a student or small group of students produce, test, and document
> some software for statistics.  I will encourage those students who are
> developing in S to package their software as an R package.

> I would welcome suggestions of possible projects, especially projects
> that come under the heading of "Useful facilities to be added to R".
> Please keep in mind that the project must be completed by mid-December
> and that not all the students have extensive experience programming in
> S and C.

Hopefully not too late for me to join the wishlist ...

In addition to the useful suggestions re experimental design and by
Peter, I have the following ctest-related projects which I think would
fit very nicely.  Ordering is according to decreasing priority.

* Improved support for exact inference (p-values and, where appropriate,
also confidence intervals ) for some of the tests, in particular for
Kruskal-Wallis and (2-sample) Smirnov.  In addition, we currently don't
have exact p-values in the rank-based tests in case of ties, and one
could deal with this using the Streitberg-Roehmel path suggested by
Torsten Hothorn (see add-on package ExactDistr).  Also, permutation
tests might be useful in some cases ...

[I have an NEW implementation of the Mehta-Patel network algorithm for
dealing with the common odds ratio in 2 x 2 x k tables ready, hence will
take care of mantelhaen.test() myself.]

* Implement alternative definitions of the 2-sided p-value using

	p = 2[f P(X=x) + min{P(X<x),P(X>x)}]

with 0 <= f <= 1 as definition.

* Improve the code for fisher.test(), maybe re-implement from scratch?
The memory management definitely needs to be rewritten for 1.2.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Paul.White@dsto.defence.gov.au  Mon Sep 18 04:39:34 2000
From: Paul.White@dsto.defence.gov.au (Paul.White@dsto.defence.gov.au)
Date: Mon, 18 Sep 2000 05:39:34 +0200 (MET DST)
Subject: [Rd] bug with line widths in postscript output (PR#661)
Message-ID: <200009180339.FAA25870@pubhealth.ku.dk>

Hello R-people,

When I set the line width using par(lwd=2) this correctly changes the line
size on the screen output however it does not change the linewidth when the
output is sent to a postscript file. I think this is a bug.

Here is the version info

platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    1                
minor    1.1              
year     2000             
month    August           
day      15               
language R                


Thanks

Paul White
Aeronautical and Maritime Research Laboratory
Melbourne, Australia.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Mon Sep 18 07:05:30 2000
From: john.maindonald@anu.edu.au (John Maindonald)
Date: Mon, 18 Sep 2000 16:05:30 +1000
Subject: [Rd] Projects
Message-ID: <3.0.6.32.20000918160530.007e5950@pophost.anu.edu.au>

Here are some further possibilities:

1. An equivalent of S-PLUS plot.gam(), which I
would call plot.terms().
[predict(.., type="terms") provides the
information that is plotted.]

2. An option in print.lm() summary.lm() etc.
that would relate the number of decimal
places shown for coefficients etc. to the SE,
e.g. a precision equivalent to the 2nd d.p.
of the SE.
(This may be hard to get right!)

3. Label output where factors appear so that it
is clear what parameterisation has been used.
(Peter Dalgaard suggested a scheme some time
ago that seemed to me eminently sensible.)

4. As an interim measure, until lattice arrives,
implement simplified versions of trellis
bwplot, qqmath, etc that allow two conditioning
factors.  This can be done as fairly easy
adaptations of coplot().  So that it is not
repeated in each individual function, the
coplot() code that decodes the graphics formula
should come out into a separate function.
It needs slight modification to allow formulae
such as ~x|a+b.
(I have a version of such a function.  Adding
the code for e.g. a primitive version of 
bwplot is straightforward. I will do it myself 
shortly if there are not other offers.)

5. I have been investigating a function that has 
one list of information for each panel in a 
trellis type layout, then allowing the user to p
rovide a panel function that operates on the list 
elements. For example, one may want graphs with 
different numbers of x-values to be superimposed 
in the same panel.  Or a theoretical curve or plot
of simulated data may be specified by a small
number of parameters that are specific to each
panel.
(I have a primitive version of such a function.)

John Maindonald.
John Maindonald               email : john.maindonald@anu.edu.au        
Statistical Consulting Unit,  phone : (6249)3998        
c/o CMA, SMS,                 fax   : (6249)5549  
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Mon Sep 18 07:22:44 2000
From: jago@mclink.it (Stefano Iacus)
Date: Mon, 18 Sep 2000 08:22:44 +0200
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
Message-ID: <a04330100b5eb64f27ce1@[159.149.74.61]>

This is my second post. Is  the R porting  no more interesting ? I hope no. :)




Hy (I hope this is the right list).

1. Mac porting

I'm finishing the porting of R for Mac. I hope to finish it for the 
end of september. Thanks to the porting of  R 0.64 by Ross (that he 
gave me) I succeded in this porting. This is the current state:

Both R 1.1.1. and 1.2.0 works with minor modification to the original 
code. The Macintosh device has been updated to the new version of 
WASTE library that is Carbon-izable (for who knows MacOS, Carbon is a 
collections of libraries  that allow macintosh applications developed 
for pre-MacOS X to run under MacOS X with minor modification, MacOS X 
is beeing released in september).
There is  a lot of work to do in testing the 1.1.1 porting. The code 
I have modified is not all commented, so give me some times to fix 
this and I'll release the sources to who will ask for.
The porting runs only on PPC machines.
I  compiled 1.2 only to verify how much the changes are sensitive to 
new releases of the code. It seems to work without problems.

Is there anyone working on R porting for Mac at the moment?

Actually, I have problems on building the base package and packages 
in general and I just pick Win base package and adapt it, so the 
check I can do are not so accurate. Where can I find the proper 
documentation on building packages?
Makefiles on Mac are a problem for me at the moment, but I'll try to 
fix this also.



2. About the bug (?)

I've to remark one problem in the source code of PS and Xfig devices. 
When the device look for "afm" it is system dependent because slashes 
such "/" are used to search for fonts:

i.e. (in xfig, the same is for PS)

static int XFig_Open(DevDesc *dd, XFigDesc *pd)
{
     char buf[512];
     int i;

     for(i = 0; i < 5 ; i++) {
	sprintf(buf, "%s/afm/%s.%s", R_Home,             <--- HERE
		Family[pd->fontfamily].font[i].abbr,
		(i == 4) ? "afm" : Extension[pd->encoding]);


the slashes should be replaced by the FILESEP  definition.


Both devices fixed for FILESEP (and pictex as well) works on Mac.

Regards,

         Stefano
-- 
Stefano Maria Iacus
Dipartimento di Politica Economica ed Aziendale
Universita' di Milano
Via Conservatorio 7
20122 Milano
Tel: 02 760 74 462
Fax: 02 760 23 198
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep 18 09:41:08 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 18 Sep 2000 10:41:08 +0200
Subject: [Rd] Fortran 90 / 95 compilers? // interface packages for R ?
Message-ID: <14789.54564.400197.692342@gargle.gargle.HOWL>

We have (spatial statistics) group here that are (about to) interface
Fortran 90 and/or 95 software to R and/or S-plus.

My recommendation has been against this because of non-availability of
GNU or other free (not only moneywise, in the GNU sense) compilers for
Fortran 9x.   Does anybody have good guesses about the future here?
The user group here say they like F 9[05] because of its ``object
oriented'' approach and data types.  Probably we shouldn't start a
discussion about this statement, but rather acknowledge that in the
numerical analysis community, there seems to be a drive from F77 to F90

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep 18 10:19:08 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 18 Sep 2000 11:19:08 +0200
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
In-Reply-To: <a04330100b5eb64f27ce1@[159.149.74.61]>
References: <a04330100b5eb64f27ce1@[159.149.74.61]>
Message-ID: <14789.56844.138209.426953@gargle.gargle.HOWL>

>>>>> "StefI" == Stefano Iacus <jago@mclink.it> writes:

    StefI> This is my second post. Is the R porting no more interesting ? I
    StefI> hope no. :) Hy (I hope this is the right list).

No, to the contrary.  There is quite a base of potential users who'd
welcome a Mac port very much! {I'm "unix only" though.}

Thanks a lot for your efforts!

I think you should send specific patches (as the one below, using FILESEP)
-- using "diff -c" against a recent version of R-devel --
to R-core at R-project.org which is the core team's (non-public) E-mail list.
One of us could then "slice" your code into the current development version.

    StefI> 1. Mac porting

    StefI> I'm finishing the porting of R for Mac. I hope to finish it for
    StefI> the end of september. Thanks to the porting of R 0.64 by Ross
    StefI> (that he gave me) I succeded in this porting. This is the
    StefI> current state:

    StefI> Both R 1.1.1. and 1.2.0 works with minor modification to the
    StefI> original code. The Macintosh device has been updated to the new
    StefI> version of WASTE library that is Carbon-izable (for who knows
    StefI> MacOS, Carbon is a collections of libraries that allow macintosh
    StefI> applications developed for pre-MacOS X to run under MacOS X with
    StefI> minor modification, MacOS X is beeing released in september).
    StefI> There is a lot of work to do in testing the 1.1.1 porting. The
    StefI> code I have modified is not all commented, so give me some times
    StefI> to fix this and I'll release the sources to who will ask for.
    StefI> The porting runs only on PPC machines.  I compiled 1.2 only to
    StefI> verify how much the changes are sensitive to new releases of the
    StefI> code. It seems to work without problems.

    StefI> Is there anyone working on R porting for Mac at the moment?

    StefI> Actually, I have problems on building the base package and
    StefI> packages in general and I just pick Win base package and adapt
    StefI> it, so the check I can do are not so accurate. Where can I find
    StefI> the proper documentation on building packages?  Makefiles on Mac
    StefI> are a problem for me at the moment, but I'll try to fix this
    StefI> also.



    StefI> 2. About the bug (?)

    StefI> I've to remark one problem in the source code of PS and Xfig
    StefI> devices.  When the device look for "afm" it is system dependent
    StefI> because slashes such "/" are used to search for fonts:

    StefI> i.e. (in xfig, the same is for PS)

    StefI> static int XFig_Open(DevDesc *dd, XFigDesc *pd) { char buf[512];
    StefI> int i;

    StefI>      for(i = 0; i < 5 ; i++) { sprintf(buf, "%s/afm/%s.%s",
    StefI> R_Home, <--- HERE Family[pd->fontfamily].font[i].abbr, (i == 4)
    StefI> ? "afm" : Extension[pd->encoding]);

    StefI> the slashes should be replaced by the FILESEP definition.

    StefI> Both devices fixed for FILESEP (and pictex as well) works on
    StefI> Mac.

    StefI> Regards,

    StefI>          Stefano -- Stefano Maria Iacus Dipartimento di Politica
    StefI> Economica ed Aziendale Universita' di Milano Via Conservatorio 7
    StefI> 20122 Milano Tel: 02 760 74 462 Fax: 02 760 23 198
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Sep 18 10:58:41 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 18 Sep 2000 11:58:41 +0200
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
In-Reply-To: Martin Maechler's message of "Mon, 18 Sep 2000 11:19:08 +0200"
References: <a04330100b5eb64f27ce1@[159.149.74.61]> <14789.56844.138209.426953@gargle.gargle.HOWL>
Message-ID: <x2pum26my6.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> >>>>> "StefI" == Stefano Iacus <jago@mclink.it> writes:
> 
>     StefI> This is my second post. Is the R porting no more interesting ? I
>     StefI> hope no. :) Hy (I hope this is the right list).
> 
> No, to the contrary.  There is quite a base of potential users who'd
> welcome a Mac port very much! {I'm "unix only" though.}
> 
> Thanks a lot for your efforts!

Seconded (but of course you must be aware that the absence of a Mac
port makes Mac programmers a scarce resource on R-devel...)

> I think you should send specific patches (as the one below, using FILESEP)
> -- using "diff -c" against a recent version of R-devel --
> to R-core at R-project.org which is the core team's (non-public) E-mail list.
> One of us could then "slice" your code into the current development version.

Not necessary in this case. I've folded in the FILESEP change already.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep 18 11:56:55 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 18 Sep 2000 11:56:55 +0100 (BST)
Subject: [Rd] Fortran 90 / 95 compilers? // interface packages for R ?
In-Reply-To: <14789.54564.400197.692342@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10009181153470.17763-100000@toucan.stats>

On Mon, 18 Sep 2000, Martin Maechler wrote:

> We have (spatial statistics) group here that are (about to) interface
> Fortran 90 and/or 95 software to R and/or S-plus.
> 
> My recommendation has been against this because of non-availability of
> GNU or other free (not only moneywise, in the GNU sense) compilers for
> Fortran 9x.   Does anybody have good guesses about the future here?
> The user group here say they like F 9[05] because of its ``object
> oriented'' approach and data types.  Probably we shouldn't start a
> discussion about this statement, but rather acknowledge that in the
> numerical analysis community, there seems to be a drive from F77 to F90

The prime developer of g77 has withdrawn, so last time I looked its
future was in serious doubt.  

I agree that Fortran 95 is the future for the Fortran-using community,
and is the standard used by commercial compilers nowadays. I think 
using it on Windows for R would cause us serious difficulties.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Malcolm Gillies <M.B.Gillies@pharm.uu.nl>  Mon Sep 18 12:52:27 2000
From: Malcolm Gillies <M.B.Gillies@pharm.uu.nl> (Malcolm Gillies)
Date: Mon, 18 Sep 2000 13:52:27 +0200
Subject: [Rd] Fortran 90 / 95 compilers? // interface packages for R ?
In-Reply-To: Your message of "Mon, 18 Sep 2000 11:56:55 MDT."
 <Pine.GSO.4.05.10009181153470.17763-100000@toucan.stats>
Message-ID: <200009181152.NAA36919@fischer.pharm.uu.nl>

>> My recommendation has been against this because of non-availability of
>> GNU or other free (not only moneywise, in the GNU sense) compilers for
>> Fortran 9x.   Does anybody have good guesses about the future here?

There is an (embryonic) g95 project. From the status reports it appears
to be under active (but slow?) development. They're currently working on
the parser, and are up to about version 0.1

    http://g95.sourceforge.net/

cheers,

Malcolm
--
Malcolm Gillies <M.B.Gillies@pharm.uu.nl>
PhD student, computational medicinal chemistry
Dept of Medicinal Chemistry, Faculty of Pharmacy,
Utrecht University, The Netherlands
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Malcolm Gillies <M.B.Gillies@pharm.uu.nl>  Mon Sep 18 13:13:07 2000
From: Malcolm Gillies <M.B.Gillies@pharm.uu.nl> (Malcolm Gillies)
Date: Mon, 18 Sep 2000 14:13:07 +0200
Subject: [Rd] Latin1 encoded AFM files
Message-ID: <200009181213.OAA39666@fischer.pharm.uu.nl>

Hi,

I patched my R-1.1.1 sources to add support for a couple more fonts to
the postscript device.

It works for alphanumeric characters, but I notice that I should be
supplying an AFM file with ISOLatin1Encoding (I'm using a standard AFM
for now, and get some parsing errors from R when I open the postscript
device).

Is there a program/script which will re-encode my AFM files from
AdobeStandardEncoding to ISOLatin1Encoding?

Or will I have to bite the bullet and do it by hand?

cheers,

Malcolm
--
Malcolm Gillies <M.B.Gillies@pharm.uu.nl>
PhD student, computational medicinal chemistry
Dept of Medicinal Chemistry, Faculty of Pharmacy,
Utrecht University, The Netherlands
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From M.B.Gillies@pharm.uu.nl  Mon Sep 18 13:20:39 2000
From: M.B.Gillies@pharm.uu.nl (M.B.Gillies@pharm.uu.nl)
Date: Mon, 18 Sep 2000 14:20:39 +0200 (MET DST)
Subject: [Rd] phantom(0) doesn't do what I expect it to [plotmath] (PR#662)
Message-ID: <200009181220.OAA03612@pubhealth.ku.dk>

Full_Name: Malcolm Gillies
Version: 1.1.1
OS: Debian GNU/Linux 2.2
Submission from: (NULL) (131.211.56.47)


I'm trying to make a legend with a justified list of numbers, so I
thought I would use phantom(0) to align the 3-digit numbers properly
with the 4-digit ones:

    plot(1); legend(1, 1, xjust=1, yjust=1, lty=c(1,2,3,4,5), adj=c(0,0.5),
           legend=expression(phantom(0)*300*plain(K),
                             phantom(0)*550*plain(K),
                             phantom(0)*830*plain(K),
                                       1440*plain(K),
                                       2500*plain(K)))

Unfortunately, phantom(0) doesn't seem to be adding any space, whether
I use the X11 or the postscript device.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Sep 18 13:36:48 2000
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 18 Sep 2000 13:36:48 +0100 (BST)
Subject: [Rd] Latin1 encoded AFM files
In-Reply-To: <200009181213.OAA39666@fischer.pharm.uu.nl>
Message-ID: <Pine.GSO.4.05.10009181333150.17891-100000@toucan.stats>

On Mon, 18 Sep 2000, Malcolm Gillies wrote:

> Hi,
> 
> I patched my R-1.1.1 sources to add support for a couple more fonts to
> the postscript device.
> 
> It works for alphanumeric characters, but I notice that I should be
> supplying an AFM file with ISOLatin1Encoding (I'm using a standard AFM
> for now, and get some parsing errors from R when I open the postscript
> device).

I have re-written that code to allow you to use an afm file in any
encoding. I'll send you the patch in a couple of days (I'm away from base
at present).  My idea is that 1.2.0 will support user-specified families,
but the work is not yet complete.

> Is there a program/script which will re-encode my AFM files from
> AdobeStandardEncoding to ISOLatin1Encoding?

You can use some of the postscript utility files that come with gs to
write a ps program to do so. PostScript experts only, of course.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Mon Sep 18 16:38:49 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 18 Sep 2000 11:38:49 -0400
Subject: [Rd] classed or as
Message-ID: <39C63709.DD243011@bank-banque-canada.ca>

It was pointed out to me in a separate communication from Bill Venables
that the S4 as(,) function, instead of the classed( ,) function I
previously suggested, might result in a better strategy for developing
code that would run in both S3 and S4. (One of my reasons for defining
classed in the first place was to help get my code to run in both S3 and
S4.)

If I understand the previous discussion correctly, putting this function
in R base would also result in a speed-up relative to my interpreted
code.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Tue Sep 19 00:08:15 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Mon, 18 Sep 2000 16:08:15 -0700 (PDT)
Subject: [Rd] Projects
In-Reply-To: <3.0.6.32.20000918160530.007e5950@pophost.anu.edu.au>
Message-ID: <Pine.GSO.4.21.0009181605010.19383-100000@atlas.biostat.washington.edu>

On Mon, 18 Sep 2000, John Maindonald wrote:

> Here are some further possibilities:
> 
> 1. An equivalent of S-PLUS plot.gam(), which I
> would call plot.terms().
> [predict(.., type="terms") provides the
> information that is plotted.]

There is a version of this in termplot() -- it was the motivation for
getting predict(,type="terms") to work.  Improvements are welcome. I think
it's even aliased so that help(plot.gam) gives the termplot help.

	-thomas


Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Tue Sep 19 01:14:54 2000
From: telford@progsoc.uts.edu.au (Telford Tendys)
Date: Tue, 19 Sep 2000 11:14:54 +1100
Subject: [Rd] R 1.1.1 (and 1.2.0) on Mac (PPC) and "/afm/" bugs (?)
In-Reply-To: <a04330100b5eb64f27ce1@[159.149.74.61]>; from jago@mclink.it on Mon, Sep 18, 2000 at 08:22:44AM +0200
References: <a04330100b5eb64f27ce1@[159.149.74.61]>
Message-ID: <20000919111454.C11320@ftoomsh.progsoc.uts.edu.au>

On Mon, Sep 18, 2000 at 08:22:44AM +0200, Stefano Iacus wrote:
> Is there anyone working on R porting for Mac at the moment?

Well I am actually running R on a Mac already and both the R
base and all the packages that I have tried worked for me with
no modifications... but I will admit that I started out by
installing linux.

About fifteen years ago, Apple got offside with the free-software
community because of ``look-and-feel'' litigation. They are still
feeling the backlash off that (and probably will be for some time)
because of the scarcity of free-software developers using MacOS.
It is a snowball, once developers turn away from a platform,
there is nothing to encourage new developers to get interested.

> the slashes should be replaced by the FILESEP  definition.

Yup, good work spotting that and good luck with your porting
efforts. My Mac is a blue G3, running at 350 MHz. If you have
similar hardware then I would like to compare a few benchmarks
of R running under linux and MacOS. Failing that, if you make
available a binary package of the R base for MacOS then I'll
reboot into MacOS and do the comparison for myself.

	- Tel

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zivan.karaman@limagrain.com  Tue Sep 19 12:53:21 2000
From: zivan.karaman@limagrain.com (zivan.karaman@limagrain.com)
Date: Tue, 19 Sep 2000 13:53:21 +0200 (MET DST)
Subject: [Rd] bug.report("unused argument(s) crash R when options(error=quote (PR#663)
Message-ID: <200009191153.NAA14999@pubhealth.ku.dk>


# Your mailer is set to "none" (default on Windows),
# hence we cannot send the bug report directly from R.
# Please copy the bug report (after finishing it) to
# your favorite email program and send it to
#
#       r-bugs@biostat.ku.dk
#
######################################################

Hello!

I have observed a curious problem with the Windows version of R.
> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.1
year     2000
month    August
day      15
language R
> win.version()
[1] "Windows NT 4.0 (build 1381) Service Pack 5"

When I mistype an argument in a function call (like in the example below), Rgui
crashes with the message:
The instruction at "0x025571b8" uses the memory address "0x00000008". The memory
 can't be "read". (This is my translation from French, but I guess it's
something like that in English.)

Example:
> ls(poq=3)
Normally, one should get a message saying:
Error in ls(poq = 3) : unused argument(s) (poq ...)

In my etc/Rprofile file I have added the following line:
options(error=quote(dump.frames()))

When I comment this line out, Rgui works OK (i.e. I get the message "Error in
ls(poq = 3) : unused argument(s) (poq ...)").

This happens for any other typo that should normally cause the message "unused
argument(s)", like "matrix(1:15, nrow=5, byrox=TRUE)", or anything else.

The same happens with Rterm, except that you see the error message before Rterm
dies, and the message is little bit different:
The instruction at "0x02556678" uses the memory address "0xec83e591". The memory
 can't be "read".

It happens on both my desktop and my laptop, but since both are running the same
 OS version (NT4 SP5), it's not so surprising.

Also, I have the same behaviour with the previous version of R
> version
         _
platform Windows
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    1.0
year     2000
month    June
day      15
language R


Did I do anything wrong, or is it a problem with R.dll?

It is not a big problem, but I just wanted let you know about it.

Best regards

Zivan



--please do not edit the information below--

Version:
 platform = Windows
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Windows NT 4.0 (build 1381) Service Pack 5

Search Path:
 .GlobalEnv, Autoloads, package:base



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Sep 19 13:40:31 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 19 Sep 2000 14:40:31 +0200
Subject: [Rd] bug.report("unused argument(s) crash R when options(error=quote (PR#663)
In-Reply-To: zivan.karaman@limagrain.com's message of "Tue, 19 Sep 2000 13:53:21 +0200 (MET DST)"
References: <200009191153.NAA14999@pubhealth.ku.dk>
Message-ID: <x2u2bctv0f.fsf@blueberry.kubism.ku.dk>

zivan.karaman@limagrain.com writes:

> The instruction at "0x025571b8" uses the memory address "0x00000008". The memory
>  can't be "read". (This is my translation from French, but I guess it's
> something like that in English.)
> 
> Example:
> > ls(poq=3)
> Normally, one should get a message saying:
> Error in ls(poq = 3) : unused argument(s) (poq ...)
> 
> In my etc/Rprofile file I have added the following line:
> options(error=quote(dump.frames()))

Whoops. This also crashes on Linux (good - then we can debug it more
conveniently...) In the development version too:


> ls(poq=3)
Error in ls(poq = 3) : unused argument(s) (poq ...)

Program received signal SIGSEGV, Segmentation fault.
0x807e1c7 in Rf_findVarInFrame (rho=0xbffff4cc, symbol=0x83c7354)
    at ../../../R/src/main/envir.c:677
677             hashcode = HASHVALUE(c) % HASHSIZE(HASHTAB(rho));
(gdb) l
672             c = PRINTNAME(symbol);
673             if( !HASHASH(c) ) {
674                 SET_HASHVALUE(c, R_Newhashpjw(CHAR(c)));
675                 SET_HASHASH(c, 1);
676             }
677             hashcode = HASHVALUE(c) % HASHSIZE(HASHTAB(rho));

(I don't really have time to debug this further just now, the symbol is
"dump.frames" in case anyone wants to dig deeper)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Tue Sep 19 16:41:42 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 19 Sep 2000 10:41:42 -0500
Subject: [Rd] Scalable vector graphics
Message-ID: <6r3diwie2x.fsf@franz.stat.wisc.edu>

I noticed a request on S-news today about support for scalable vector
graphics (http://www.w3.org/TR/SVG/).  Is there any interest in that
for R?  Is there anyone interested in doing it?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Sep 19 17:40:43 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 19 Sep 2000 18:40:43 +0200
Subject: [Rd] Re: more experience with formulas
In-Reply-To: <14791.33767.96707.611162@gargle.gargle.HOWL>
References: <14791.33767.96707.611162@gargle.gargle.HOWL>
Message-ID: <14791.38667.631499.957513@gargle.gargle.HOWL>

>>>>> "WSt" == Werner Stahel <stahel@stat.math.ethz.ch> writes:
[to me privately]

    WSt> I do not want to call this a bug, but it bugged me. Please try the
    WSt> following:

 WSt>  tform <- sqrt(RADAI) ~ sqrt(RADAI.e) + TAGE.ej + SPITAL + ARZT + DAS28 + 
 WSt>     SJC + TJC + DGA + HAQ + PGA + PAIN + YEAR.SYM + YEAR.DIA + 
 WSt>     ALTER + IndV + m.NSAIDs + m.Stereoids + DM.Cyclosp + DM.Penic
 WSt> 
 WSt>  as.character(tform) 

--> length-3 vector "~" "<LHS>" "<RHS>".
However, the end of <RHS> is TRUNCATED!
and that truncation of the third part is a bug in my opinion.

The fact that it returns a vector of the same length as its argument is
very consistent behavior even though it maybe unexpected to the casual R user.

I think you'd want to use format() instead.
There, we can see that format.default really uses deparse(x) when x is such
a language object.
One could argue that the optional "width.cutoff = 60" argument to deparse()
should also be settable from format(), in that case,
since
	format(tform) == deparse(tform)

really returns a vector of "3 lines" instead of just one line
which we'd get by the result of
     deparse(tfrom, width = 200)
       
Opinions?

 WSt> paste(tform,collapse="")# "y ~ x" becomes "~yx" -- is S compatible
 WSt> as.character(tform[[3]])# again length-3 vector  "+" "sqr..." "DM.Penic"
 WSt> 
 WSt> as.character.formula <- function(x, ...) paste(deparse(x),collapse="")
 WSt> ## now ,
 WSt> as.character(tform)
 WSt> paste(tform,collapse="")
 WSt> ## work, but
 WSt> as.character(tform[[3]])
 WSt> ## still does not, since it is of mode language, but not of class formula.
 WSt> ## It would be better to write as.character.default such that is works for
 WSt> ## mode language.

It *does* work; it just returns a vector of character, again
fulfilling the semantic that
when
	    y <- as.character(x)
then
	  y[i] == as.character(x[i])

    WSt> PS: Thanks for your efforts in developping R.

    WSt> Werner Stahel

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Sep 19 18:41:00 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Sep 2000 18:41:00 +0100 (BST)
Subject: [Rd] Scalable vector graphics
In-Reply-To: <6r3diwie2x.fsf@franz.stat.wisc.edu>
Message-ID: <Pine.GSO.4.05.10009191833220.29971-100000@auk.stats>

On 19 Sep 2000, Douglas Bates wrote:

> I noticed a request on S-news today about support for scalable vector
> graphics (http://www.w3.org/TR/SVG/).  Is there any interest in that
> for R?  Is there anyone interested in doing it?

I noticed it on the W3C site a couple of weeks ago, and concluded that it
was premature. (It is not yet a W3C standard, and look at the platforms
that have tool support: mainly Windows, perhaps a Java2 SDK will also
work.)

I would give higher priority to a real PDF driver (not via bitmap())
at present, as these are already widely-available tools to use PDF.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Sep 19 18:47:18 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Sep 2000 18:47:18 +0100 (BST)
Subject: [Rd] Re: more experience with formulas
In-Reply-To: <14791.38667.631499.957513@gargle.gargle.HOWL>
Message-ID: <Pine.GSO.4.05.10009191842450.29971-100000@auk.stats>

On Tue, 19 Sep 2000, Martin Maechler wrote:

> >>>>> "WSt" == Werner Stahel <stahel@stat.math.ethz.ch> writes:
> [to me privately]
> 
>     WSt> I do not want to call this a bug, but it bugged me. Please try the
>     WSt> following:
> 
>  WSt>  tform <- sqrt(RADAI) ~ sqrt(RADAI.e) + TAGE.ej + SPITAL + ARZT + DAS28 + 
>  WSt>     SJC + TJC + DGA + HAQ + PGA + PAIN + YEAR.SYM + YEAR.DIA + 
>  WSt>     ALTER + IndV + m.NSAIDs + m.Stereoids + DM.Cyclosp + DM.Penic
>  WSt> 
>  WSt>  as.character(tform) 
> 
> --> length-3 vector "~" "<LHS>" "<RHS>".
> However, the end of <RHS> is TRUNCATED!
> and that truncation of the third part is a bug in my opinion.

I think using as.character() is the problem: this is what deparse() is
for.  Similar things happen in S too.  You may notice that in
versions of R up to and including 1.1.1 that anova methods had this bug:
I even filed a bug report against it.

I suspect it may be relatively unproblematic to change as.character because
where it matters the cognescenti (read, `the much-bitten') would
use deparse() anyway.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Tue Sep 19 23:27:29 2000
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Tue, 19 Sep 2000 18:27:29 -0400 (EDT)
Subject: [Rd] Scalable vector graphics
Message-ID: <200009192227.SAA25026@jessie.research.bell-labs.com>


> From: Douglas Bates <bates@stat.wisc.edu>
> Date: 19 Sep 2000 10:41:42 -0500
> Lines: 3
> User-Agent: Gnus/5.0803 (Gnus v5.8.3) Emacs/20.7
> Sender: owner-r-devel@stat.math.ethz.ch
> Precedence: bulk
> 
> I noticed a request on S-news today about support for scalable vector
> graphics (http://www.w3.org/TR/SVG/).  Is there any interest in that
> for R?  Is there anyone interested in doing it?
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


yes there definitely is some interest in doing this.
I have a very simple example of this and MathML in the
latest version of the XML package for R and S
in the Omegahat tree. That has now been cleaned up so that
it only needs libxml to do both DOM and event parsing
and contains many more examples of how to use things.

Actually, I was going to suggest an SVG driver as
a project for a student in your statistical computing class.
As I mentioned to David Nelson (the originator of the query on S-news)
it is a relatively straightforward task: provide R functions
to map XML elements to R graphics commands. There are examples
for this and MathML on the Omegahat web site and I will create an R
package of the XML library if anyone wants it soon.

D.


-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan

      "Languages shape the way we think, and determine what 
       we can think about."        
                                      Benjamin Whorf
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@biostat.ku.dk  Thu Sep 21 06:15:05 2000
From: pd@biostat.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Sep 2000 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200009210515.HAA29118@biostat.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 631 *
Subject: svd error 
From: =?iso-8859-1?Q?J=F6rg?= Polzehl <polzehl@wias-berlin.de>
Date: Thu, 10 Aug 2000 16:54:46 +0200
* PR# 630 *
Subject: lda and svd error
From: Torsten Hothorn <Torsten.Hothorn@rzmail.uni-erlangen.de>
Date: Thu, 10 Aug 2000 15:13:38 +0200 (CEST)
* PR# 594 *
Subject: svd() (Linpack) problems/bug for ill-conditioned matrices
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Wed, 5 Jul 2000 18:32:01 +0200 (CEST)

Directory:  Add-ons

* PR# 644 *
Subject: crash using fisher.test on Windows; was [R] unexpected crash of R under 
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 25 Aug 2000 08:47:00 +0200
* PR# 503 *
Subject: dmvnorm() bug in e1071
From: "Gregory R. Warnes" <warnes@biostat.washington.edu>
Date: Fri, 24 Mar 2000 03:24:45 +0000 (GMT)
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.
* PR# 567 *
Subject: ctest not works
From: George Diniz <george@cpqam.fiocruz.br>
Date: Sun, 12 Mar 2000 12:03:45 -0200
--possibly the RH6.2 Fortran bug

Directory:  Analyses

none

Directory:  Documentation

none

Directory:  Graphics

* PR# 639 *
Subject: symbols: xlim and ylim cannot be specified
From: Werner Stahel <stahel@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 15:54:08 +0200 (CEST)
--Fixed for 1.1.2 (?)
* PR# 625 *
Subject: Re: [Rd] Re: [R] problem clipping R postscript plots within latex
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Wed, 2 Aug 2000 21:38:31 +0100 (GMT Daylight Time)
--Believed to be fixed in 1.2. Patch on r-bugs website.
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.

Directory:  In-Out

* PR# 649 *
Subject: Unable to read.table with > 256? columns
From: r@marksmucker.com
Date: Thu, 31 Aug 2000 07:28:02 +0200 (MET DST)
--Unable to reproduce from information supplied 
--(and there is no 256 col limit)

Directory:  Installation

* PR# 597 *
Subject: multiply defined symbols
From: plucas@csd.abdn.ac.uk
Date: Fri, 7 Jul 2000 12:23:44 +0200 (MET DST)
--Probably system-specific due to use of fort77

Directory:  Language

* PR# 645 *
Subject: unlisting a list with names components
From: Peter Perkins <pperkins@ucsd.edu>
Date: Fri, 25 Aug 2000 23:07:47 -0700
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 642 *
Subject:  Method dispatch fails for autoloaded methods 
From: maechler@stat.math.ethz.ch
Date: Thu, 24 Aug 2000 17:09:09 +0200
--fixed for next (1.2) R version
* PR# 587 *
Subject: dim(a <- ...) sets invisible flag erronously
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 30 Jun 2000 20:15:59 +0200 (MET DST)
--Not specific to dim: R differs from S for most functions here.

Directory:  Low-level

* PR# 551 *
Subject: Bus Error crash
From: kjetikj@astro.uio.no
Date: Mon, 22 May 2000 13:06:48 +0200 (MET DST)
--- ??? -- not (yet) reproducible with small examples
--- after load()ing large objects
--- on two different DEC alpha versions
* PR# 545 *
Subject: Segmentation Fault of unknown cause
From: kjetikj@astro.uio.no
Date: Mon, 15 May 2000 16:29:29 +0200 (MET DST)
* PR# 536 *
Subject: Problem with match.arg()
From: kjetikj@astro.uio.no
Date: Sun, 7 May 2000 13:58:21 +0200 (MET DST)
--1.0.0 bug fixed for 1.0.1 ??
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 628 *
Subject: Re: [Rd] predict.lm is broken in 1.1.0-patched (2000-August-7)
From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
Date: Mon, 7 Aug 2000 22:41:50 +0100 (BST)
--We've fixed the predict() problem, but need to make coef.lm and coef.aov
--consistent

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 592 *
Subject: tseries bug
From: przemat@itti.com.pl
Date: Tue, 4 Jul 2000 14:52:17 +0200 (MET DST)
--Still broken?
* PR# 452 *
Subject: problem with glm
From: Brad McNeney <mcneney@cs.sfu.ca>
Date: Fri, 18 Feb 2000 17:51:54 -0800 (PST)
--Problems on Alpha's with glm. Status unclear
* PR# 533 *
Subject: acepack, akima and tripack will not load 
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:18:59 +0200 (MET DST)
--related to PR#521: probably compiler-specific
* PR# 521 *
Subject: akima core dumps on loading
From: santini@dsi.unimi.it
Date: Mon, 17 Apr 2000 11:30:41 +0200 (MET DST)
--Probably compiler-specific
* PR# 547 *
Subject: system(.., ignore.stderr = TRUE)  problem on Solaris
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Fri, 19 May 2000 21:12:02 +0200 (CEST)
--redirection of stderr to /dev/null in system occurs before the command
--is tried on some systems and after on others.
* PR# 537 *
Subject: eigen broken on AIX with R-devel?
From: Thomas J Vogels <tov@ece.cmu.edu>
Date: 08 May 2000 12:01:04 -0400
--AIX, probably compiler-specific
* PR# 534 *
Subject: wsfe bug report just made
From: mallen@tntech.edu
Date: Thu, 4 May 2000 19:20:35 +0200 (MET DST)
--follow up to PR#533

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 664 *
Subject: Returned mail: User unknown
Subject: Notification: incoming/661
Subject:  bug with line widths in postscript output
From: Mail Delivery Subsystem <MAILER-DAEMON@biostat.ku.dk>
From: R-bugs@biostat.ku.dk
From: "White, Paul" <Paul.White@dsto.defence.gov.au>
Date: Thu, 21 Sep 2000 04:45:10 +0200
Date: Thu, 21 Sep 2000 04:45:09 +0200
Date: Mon, 18 Sep 2000 14:33:36 +1100
* PR# 653 *
Subject: bug in spline()?
From: Ian White <imsw@holyrood.ed.ac.uk>
Date: Mon, 4 Sep 2000 12:29:26 +0100 (BST)
* PR# 652 *
Subject: R INSTALL *.tgz fails (minor docs/feature bug)
From: RPO <bobbyo@speakeasy.org>
Date: Sat, 2 Sep 2000 13:34:22 -0700 (PDT)
* PR# 640 *
Subject: diff.default / diff.ts in wrong package bug
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 21 Aug 2000 18:28:36 +0200 (CEST)
* PR# 656 *
Subject: .Random.seed resetting
From: lej25@statslab.cam.ac.uk
Date: Mon, 11 Sep 2000 13:13:27 +0200 (MET DST)
* PR# 655 *
Subject: Installing R from source 
From: jniesch@gwdg.de
Date: Fri, 8 Sep 2000 11:40:00 +0200 (MET DST)
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 658 *
Subject: PR 640 (diff.default computes an incorrect starting time)
From: Laimonis Kavalieris <lkavalieris@maths.otago.ac.nz>
Date: Wed, 13 Sep 2000 13:44:38 +0000
* PR# 663 *
Subject: bug.report("unused argument(s) crash R when options(error=quote
From: zivan.karaman@limagrain.com
Date: Tue, 19 Sep 2000 13:51:33 +0200
* PR# 662 *
Subject: phantom(0) doesn't do what I expect it to [plotmath]
From: M.B.Gillies@pharm.uu.nl
Date: Mon, 18 Sep 2000 14:20:37 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Sep 21 08:28:57 2000
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 21 Sep 2000 09:28:57 +0200
Subject: [Rd] scatterplot3d
Message-ID: <39C9B8B9.F8A85481@statistik.uni-dortmund.de>

Hi!

A new version (0.3.3) of scatterplot3d (plots a 3D point cloud
perspectively) is available at
http://www.statistik.uni-dortmund.de/leute/ligges.htm

I am especially interested in bug reports and reports of unexpected
results (always with examples to reproduce the error, please).

Also feel free to send feature requests. 
Some R users (see the parts of two emails below) are missing a function,
which plots a 3D perspective of a matrix. So I am thinking about
creating a new function (based on the code of scatterplot3d, if there
are no more known bugs in it), which does the trick.


  Charles RAUX wrote:
  > 
  > How can I draw a 3D perspective of a contingency table, that is
  > showing 3D bars whose height is in proportion of the table cells?

  s-luppescu@uchicago.edu wrote:
  >
  > I want to do a 3d scatterplot of the upper triangle of a matrix,
where the
  > z-values are the values in the matrix, and the row and column
indices are the y-
  > and x-values.

Best regards,
Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Sep 21 09:18:33 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Sep 2000 10:18:33 +0200 (MET DST)
Subject: [Rd] "[.data.frame" forgets about "AsIs" (PR#665)
Message-ID: <200009210818.KAA05524@pubhealth.ku.dk>

Short example:

 > str(d <- data.frame(a = I(letters[1:5])))
 `data.frame':	5 obs. of  1 variable:
  $ a:Class 'AsIs'  chr [1:5] "a" "b" "c" "d" ...
 > str(d[TRUE,,drop = FALSE])
 `data.frame':	5 obs. of  1 variable:
  $ a: chr  "a" "b" "c" "d" ...

The real problem about this is, that as soon as the data.frame is further
"transformed", the character component is coerced to a factor, e.g.

   > str(rbind(d[TRUE,,drop = FALSE], "E"))
   `data.frame':	6 obs. of  1 variable:
    $ a: Factor w/ 6 levels "a","b","c","d",..: 1 2 3 4 6 5

--- 

I'm looking at a fix myself.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aprasad@fs.fed.us  Thu Sep 21 16:46:42 2000
From: aprasad@fs.fed.us (aprasad@fs.fed.us)
Date: Thu, 21 Sep 2000 17:46:42 +0200 (MET DST)
Subject: [Rd] width in options() (PR#666)
Message-ID: <200009211546.RAA12787@pubhealth.ku.dk>

Full_Name: Anantha Prasad
Version: 1.1.1
OS: Linux
Submission from: (NULL) (199.131.134.57)


When I try to use 
> options(width=201)
Error in options(...) : invalid width parameter
It looks like 200 is the max. limit. THis is a huge limitation...for if I am
trying
to sink() an R object that has 50 variables with a width of say 1000 characters
and
a length of say 1000 lines, the output I get gets split at 200 characters so
that it
has 5000 lines!
Eg.,
Say an R object x with 1000 lines and 50 variables (1000 characters of width)
> sink("tst.dat")
> x
> sink()
Now, tst.dat has the output split at 200 characters making it very difficult to
use
this dataset. So, scripts that depend on the entire file structure to come
intact
will produce errors.

This limitation is not there in S-PLUS where you can set the width to any
number.
Hope this is fixed soon as many scripts I use depend on me setting width to
atleast
2000!

Thanks



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas@biostat.washington.edu  Thu Sep 21 16:49:31 2000
From: thomas@biostat.washington.edu (Thomas Lumley)
Date: Thu, 21 Sep 2000 08:49:31 -0700 (PDT)
Subject: [Rd] width in options() (PR#666)
In-Reply-To: <200009211546.RAA12787@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.21.0009210848220.27694-100000@atlas.biostat.washington.edu>

On Thu, 21 Sep 2000 aprasad@fs.fed.us wrote:

> Full_Name: Anantha Prasad
> Version: 1.1.1
> OS: Linux
> Submission from: (NULL) (199.131.134.57)
> 
> 
> When I try to use 
> > options(width=201)
> Error in options(...) : invalid width parameter
> It looks like 200 is the max. limit. THis is a huge limitation...for if I am
> trying
> to sink() an R object that has 50 variables with a width of say 1000 characters
> and
> a length of say 1000 lines, the output I get gets split at 200 characters so
> that it
> has 5000 lines!
> Eg.,
> Say an R object x with 1000 lines and 50 variables (1000 characters of width)
> > sink("tst.dat")
> > x
> > sink()
> Now, tst.dat has the output split at 200 characters making it very difficult to
> use
> this dataset. So, scripts that depend on the entire file structure to come
> intact
> will produce errors.
> 
> This limitation is not there in S-PLUS where you can set the width to any
> number.
> Hope this is fixed soon as many scripts I use depend on me setting width to
> atleast
> 2000!


While this may well be a useful feature to add, note that the preferred
way of writing a rectangular dataset to a file is with write.table(),
which does not have width restrictions

	-thomas

Thomas Lumley
Assistant Professor, Biostatistics
University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Sep 21 16:56:31 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Sep 2000 17:56:31 +0200 (MET DST)
Subject: [Rd] "[.data.frame" forgets about "AsIs" (PR#665)
Message-ID: <200009211556.RAA12851@pubhealth.ku.dk>

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> Short example:
    >> str(d <- data.frame(a = I(letters[1:5])))
    MM> `data.frame':	5 obs. of  1 variable:
    MM> $ a:Class 'AsIs'  chr [1:5] "a" "b" "c" "d" ...
    >> str(d[TRUE,,drop = FALSE])
    MM> `data.frame':	5 obs. of  1 variable:
    MM> $ a: chr  "a" "b" "c" "d" ...

    MM> The real problem about this is, that as soon as the data.frame is
    MM> further "transformed", the character component is coerced to a
    MM> factor, e.g.

    >> str(rbind(d[TRUE,,drop = FALSE], "E"))
    MM> `data.frame':	6 obs. of  1 variable:
    MM> $ a: Factor w/ 6 levels "a","b","c","d",..: 1 2 3 4 6 5


Probably the cleanest fix is the addition of 

  "[.AsIs" <- function(x, i) structure(NextMethod("["), class = class(x))

--
Will go into R-devel unless someone has a better idea.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From aprasad@fs.fed.us  Fri Sep 22 21:31:08 2000
From: aprasad@fs.fed.us (aprasad@fs.fed.us)
Date: Fri, 22 Sep 2000 22:31:08 +0200 (MET DST)
Subject: [Rd] eval functions... (PR#668)
Message-ID: <200009222031.WAA23892@pubhealth.ku.dk>

Full_Name: Anantha Prasad
Version: 1.1.1
OS: Linux
Submission from: (NULL) (199.131.134.30)


I am trying to convert some S-PLUS code to R (a tcl/tk application that uses
R)...
here is the error I got in R (but not in S-PLUS)...so I am wondering if it is a
bug.

Eg., the foll. extract from a function runs fine in S-PLUS but gives the error:
Error in x[[j]] : subscript out of bounds
in R

code snippet .....

 attach(xd)
	 resp <- "iv802"
	pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
	lmexp <- paste(resp, " ~ ", pickedlist,sep="")
        tmpzx <- eval(lm(lmexp,data=xd))

Essentially, I want to do:
 lm(iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL, data=xd)
thru a function that has the parameters passed thru TclTk and Perl......

Thanks much.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Sep 22 22:15:36 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Sep 2000 23:15:36 +0200
Subject: [Rd] eval functions... (PR#668)
In-Reply-To: aprasad@fs.fed.us's message of "Fri, 22 Sep 2000 22:31:08 +0200 (MET DST)"
References: <200009222031.WAA23892@pubhealth.ku.dk>
Message-ID: <x2u2b8ruvb.fsf@blueberry.kubism.ku.dk>

aprasad@fs.fed.us writes:

> Eg., the foll. extract from a function runs fine in S-PLUS but gives the error:
> Error in x[[j]] : subscript out of bounds
> in R
> 
> code snippet .....
> 
>  attach(xd)
> 	 resp <- "iv802"
> 	pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
> 	lmexp <- paste(resp, " ~ ", pickedlist,sep="")
>         tmpzx <- eval(lm(lmexp,data=xd))
> 
> Essentially, I want to do:
>  lm(iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL, data=xd)
> thru a function that has the parameters passed thru TclTk and Perl......

Um, I'm somewhat surprised that this gives sensible results in
Splus... It does, since Splus accepts a text string for a formula
which R does not. 

[The use of eval is also unnecessary, and the sep="" is peculiar in
view of the spaces around the ~...]

In R you need to jump through an extra hoop to create a formula object
from the string representation:

lmexp <- formula(paste(resp, "~", pickedlist))
tmpzx <- lm(lmexp,data=xd)

The Splus docs explicitly say that the first argument to lm should be
a formula object, and R's behaviour is consistent with that.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Fri Sep 22 22:29:52 2000
From: bates@stat.wisc.edu (Douglas Bates)
Date: 22 Sep 2000 16:29:52 -0500
Subject: [Rd] eval functions... (PR#668)
In-Reply-To: aprasad@fs.fed.us's message of "Fri, 22 Sep 2000 22:31:08 +0200 (MET DST)"
References: <200009222031.WAA23892@pubhealth.ku.dk>
Message-ID: <6rya0kdsj3.fsf@franz.stat.wisc.edu>

aprasad@fs.fed.us writes:

> I am trying to convert some S-PLUS code to R (a tcl/tk application that uses
> R)...
> here is the error I got in R (but not in S-PLUS)...so I am wondering if it is a
> bug.
> 
> Eg., the foll. extract from a function runs fine in S-PLUS but gives the error:
> Error in x[[j]] : subscript out of bounds
> in R
> 
> code snippet .....
> 
>  attach(xd)
> 	 resp <- "iv802"
> 	pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
> 	lmexp <- paste(resp, " ~ ", pickedlist,sep="")
>         tmpzx <- eval(lm(lmexp,data=xd))
> 
> Essentially, I want to do:
>  lm(iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL, data=xd)
> thru a function that has the parameters passed thru TclTk and Perl......

I think in both R and S-PLUS you would be better off using as.formula.

> as.formula("iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL")
iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL

You may want to use Bill Venables' favorite function do.call as well.  Try

resp <- "iv802"
pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
tmpzx <- do.call("lm", 
          list(formula = as.formula(paste(resp, "~", pickedlist)),
               data = xd))

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Sep 23 07:42:49 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 23 Sep 2000 07:42:49 +0100 (BST)
Subject: [Rd] eval functions... (PR#668)
In-Reply-To: <200009222031.WAA23892@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.05.10009230726310.15421-100000@auk.stats>

On Fri, 22 Sep 2000 aprasad@fs.fed.us wrote:

> Full_Name: Anantha Prasad
> Version: 1.1.1
> OS: Linux
> Submission from: (NULL) (199.131.134.30)
> 
> 
> I am trying to convert some S-PLUS code to R (a tcl/tk application that uses
> R)...
> here is the error I got in R (but not in S-PLUS)...so I am wondering if it is a
> bug.
> 
> Eg., the foll. extract from a function runs fine in S-PLUS but gives the error:
> Error in x[[j]] : subscript out of bounds
> in R

A tracback helps ...

> 
> code snippet .....
> 
>  attach(xd)
> 	 resp <- "iv802"
> 	pickedlist <- "BD + CEC + CLAY + ERODFAC + INCEPTSL"
> 	lmexp <- paste(resp, " ~ ", pickedlist,sep="")
>         tmpzx <- eval(lm(lmexp,data=xd))
> 
> Essentially, I want to do:
>  lm(iv802 ~ BD + CEC + CLAY + ERODFAC + INCEPTSL, data=xd)
> thru a function that has the parameters passed thru TclTk and Perl......

I don't understand why that would work in S-PLUS!  You apply eval to
expressions or calls, but lm(mexp,data=xd) is not a call. Probably S-PLUS
has an implicit as.formula in its version.

The essence can be seen in

> lm(formula="y ~ x")
Error in x[[j]] : subscript out of bounds
> traceback()
[1] "eval(expr, envir, enclos)"                                        
[2] "eval(attr(formula, \"variables\"), data, sys.frame(sys.parent()))"
[3] "model.frame.default(formula = y ~ x, drop.unused.levels = TRUE)"  
[4] "model.frame(formula = y ~ x, drop.unused.levels = TRUE)"          
[5] "eval(expr, envir, enclos)"                                        
[6] "eval(mf, sys.frame(sys.parent()))"                                
[7] "lm(formula = y ~ x)"                                              

The point is that the formula argument should be a formula, not a 
character string, so this is not a bug per se.

There are lots of correct ways to do this.  Perhaps the simplest is

lm(as.formula(lmexp), data=xd)

but that will record the call as 

lm(formula = as.formula(lmexp), data = xd)

To avoid that, if you need to, use something like

do.call("lm", list(formula = as.formula(lmexp), data=xd))

(There are lots more ways too, including using parse or substitute.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ammann@metronet.com  Sat Sep 23 14:48:49 2000
From: ammann@metronet.com (Larry Ammann)
Date: Sat, 23 Sep 2000 08:48:49 -0500
Subject: [Rd] bug in apply with median
Message-ID: <39CCB4C0.9F104660@metronet.com>

I have found a problem in R version 1.1.1 when using apply with the
median function.
The problem can be illustrated with the following data matrix:

X1  X2  X3
1     2     3
 4    5     6
 7    8    NA

Enter this data matrix as X and then try
    apply(X,2,median,na.rm=T)
The problem here is that the median function returns a named scalar if
the number of
observations is odd, but returns an unnamed scalar if the number of
observations is
even. This confuses the apply function in this case at:

    ans.names <- names(ans[[1]])
    if (!ans.list)
        ans.list <- any(unlist(lapply(ans, length)) != l.ans)
    if (!ans.list && length(ans.names)) {
        all.same <- sapply(ans, function(x) all(names(x) == ans.names))
#here is the offending line
        if (!all(all.same))
            ans.names <- NULL
    }

This problem does not occur with S-Plus. My quick solution was to use
the quantile function
instead of the median function:

   apply(X,2,quantile,probs=.5,na.rm=T)

One way of fixing the problem then is to redefine median as

median <- function(x,na.rm=F,names=T)
quantile(x,probs=.5,na.rm=na.rm,names=names)

I don't know if this is a long-term solution though, since there may be
other functions with inconsistent
naming policies that can confuse apply as it is currently written.

Larry Ammann
Professor of Mathematical Sciences
University of Texas at Dallas
 http://www.utdallas.edu/~ammann


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Sep 23 15:55:58 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 Sep 2000 16:55:58 +0200
Subject: [Rd] bug in apply with median
In-Reply-To: Larry Ammann's message of "Sat, 23 Sep 2000 08:48:49 -0500"
References: <39CCB4C0.9F104660@metronet.com>
Message-ID: <x2snqrrwch.fsf@blueberry.kubism.ku.dk>

Larry Ammann <ammann@metronet.com> writes:

> I have found a problem in R version 1.1.1 when using apply with the
> median function.
> The problem can be illustrated with the following data matrix:
> 
> X1  X2  X3
> 1     2     3
>  4    5     6
>  7    8    NA
> 
> Enter this data matrix as X and then try
>     apply(X,2,median,na.rm=T)
> The problem here is that the median function returns a named scalar if
> the number of
> observations is odd, but returns an unnamed scalar if the number of
> observations is
> even. This confuses the apply function in this case at:

for ( i in 1:1000 ) cat("Data frames are not matrices!\n")

> X<-matrix(c(1:8,NA),3,3)
> X
     [,1] [,2] [,3]
[1,]    1    4    7
[2,]    2    5    8
[3,]    3    6   NA
> apply(X,2,median,na.rm=T)
[1] 2.0 5.0 7.5

Works fine.

However,

> Z<-data.frame(X)
> apply(Z,2,median,na.rm=T)
Error in names(x) == ans.names : comparison (1) is possible only for vector types

Question is whether this is a bug. Apply() never promised to work on
non-arrays. When applied columnwise, it would anyway be more obvious
to use

> sapply(Z,median,na.rm=T)
 X1  X2  X3 
2.0 5.0 7.5 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Sep 25 08:48:16 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 25 Sep 2000 09:48:16 +0200
Subject: [Rd] constructing empty data.frames [RFC]
Message-ID: <14799.832.915696.744509@gargle.gargle.HOWL>

somewhat `esoteric' problem/bug :

## Constructing an empty data.frame  (e.g. for later rbind()ing), works with

data.frame(a = 1[-1])
## or
data.frame(a = 1[-1], b = "c"[-1])

## but {these give warnings, but *work* with S+ (5.1)
##      giving the NULL data.frame, i.e. the same as data.frame()
##      --- which I don't like either: NULL should behave as numeric(0) here!}:
data.frame(a = NULL)         # fails with R
data.frame(a = NULL, b= NULL)# fails


---------- 

This is really a request for comment.
In my opinion I should get data.frames with 1 or 2 columns and 0 rows in
all cases.  R fails completely, and S+ (5.1) gives the NULL.

I'd like to fix R such that  `` NULL behaves as numeric(0) '' in this
situation. 

Comments?

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon Sep 25 09:17:02 2000
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 25 Sep 2000 10:17:02 +0200 (MET DST)
Subject: [Rd] Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ? (PR#669)
Message-ID: <200009250817.KAA01917@pubhealth.ku.dk>

This is not only bug report, but also a RFC (request for comments):

The basic problem is that there are (at least) two ways of easily getting
non-factor character columns in data.frames.
The first is  
    read.table(*, as.is = TRUE) 
and the second is
    data.frame(.., I(...), ..)	      

which differ in their result. Whereas the first produces `pure' character
columns in the data.frame, the second approach gives `AsIs' classed
columns (character, or, e.g. logical).

Now, as the following shows,  rbind.data.frame()  *is* buggy anyway,
I wonder if we shouldn't change read.table(*, as.is = TRUE)
such that the non-numeric columns of its result become "AsIs" classed as
well:

-----------

str(d1 <- data.frame(a=1:3, b = I(letters[1:3])))
## d1 is `alright'
## d0: The same but a `character' *not* protected by AsIs:
d0 <- d1
d0$b <- unclass(d0$b)
str(d0)
## Note that this is *really* the same as a what you get from
##  read.table(*, as.is = TRUE)
##  ----------
##  R's read.table() is S+ compatible; however I wonder if
##  we shouldn't add  "AsIs" classes to all non-numeric components...
##  the classes, shouldn't harm, but ensure consistency of treatment..

str(d11 <- rbind(d1, new = c(7, "N"))) ## alright
str(d01 <- rbind(d0, new = c(7, "N"))) ## all wrong :
## Both columns were coerced to factors !!
##-- S-PLUS 5 coerces both to "character" -- which is better,
##  since the new row *is* all character

## R makes nonsense with 'b' [factor w/ 1 level "N": NA NA NA 1]
## S+ 5.1 does exactly the right thing [both a & b still look like in d0,d1 :
str(d12 <- rbind(d1, new = data.frame(a= 7, b="N")))##
str(d02 <- rbind(d0, new = data.frame(a= 7, b="N")))##

---------

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Sep 26 15:14:13 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Tue, 26 Sep 2000 16:14:13 +0200 (MET DST)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
Message-ID: <200009261414.QAA22305@pubhealth.ku.dk>


  I'm having some trouble with optim(method="L-BFGS-B"),
and I'm not sure I have the ability to track down and fix
what seem to be bugs within optim().
  I'm bootstrapping an original data set and fitting a model
to each bootstrapped data set.  For some bootstrapped samples,
optim() sets negative parameter values (despite the fact that
I have explicitly set non-zero lower bounds on the parameters)
and chokes.  For other samples, it appears to get into an infinite
loop (ignoring the finite value of maxit).
 
  Functions and samples that provoke the problem are below: I
was able to reproduce the problems running this with --vanilla.

  Not exactly a bug but: there is no tracing information built
into L-BFGS-B (setting trace=TRUE has no effect).

  Also, a general question: are both nlm() and optim() going to
be around indefinitely?  Should I be using one or the other?

  For the moment I've managed to (sort of) get around the problem
with try(), but the infinite loops are a real nuisance ...

cfunc2_function(input,N1,N2,G=1.0){
  pmin(1,1/((1+((input - N1)/N2))^G))
}

nllfun2g.boot_function(q,debug=FALSE){
#  if (i==93) debug <- TRUE
  N1_q[1]
  N2_q[2]
  G_q[3]
  L_cfunc2(boot.total,N1,N2,G)
  if (debug) cat(c(N1,N2,G,range(L)),"\n")
  r <- -sum(dbinom(boot.pred, boot.total, L, log=TRUE))
  if (!is.finite(r)) {
    cat(c(N1,N2,G,range(L)),"\n")
    cat(boot.pred,"\n")
    cat(boot.total,"\n")
    cat(L,"\n")
    cat(dbinom(boot.pred, boot.total, L, log=TRUE),"\n")
  }
  r
}

fuzz <- 0.001

boot.pred <- c(91,22,44,31,47,83,31,56,22,83,53,73)
boot.total <- c(900,150,900,200,150,100,200,300,150,300,200,500)
n <- try(optim(c(min(boot.total)-1,100,1),nllfun2g.boot,
        lower=rep(fuzz,3),upper=c(min(boot.total)-fuzz,Inf,Inf),
           method="L-BFGS-B",control=list(trace=TRUE),debug=TRUE))

boot.pred <- c(31,73,56,22,22,56,83,22,83,91,30,44)
boot.total <- c(200,100,300,150,150,300,100,150,300,900,500,900)
n <- optim(c(min(boot.total)-1,100,1),nllfun2g.boot,
        lower=rep(fuzz,3),upper=c(min(boot.total)-fuzz,Inf,Inf),
           method="L-BFGS-B",control=list(trace=TRUE),debug=TRUE)


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Sep 26 18:51:02 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 26 Sep 2000 19:51:02 +0200
Subject: [Rd] bug in apply with median
In-Reply-To: <x2snqrrwch.fsf@blueberry.kubism.ku.dk>
References: <39CCB4C0.9F104660@metronet.com>
 <x2snqrrwch.fsf@blueberry.kubism.ku.dk>
Message-ID: <14800.57862.150376.54471@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:
(Sep 23):

    PD> Larry Ammann <ammann@metronet.com> writes:
    >> I have found a problem in R version 1.1.1 when using apply with the
    >> median function.
    >> The problem can be illustrated with the following data matrix:
    >> 
    >> X1  X2  X3
    >> 1     2     3
    >> 4    5     6
    >> 7    8    NA
    >> 
    >> Enter this data matrix as X and then try
    >> apply(X,2,median,na.rm=T)
    >> The problem here is that the median function returns a named scalar if
    >> the number of
    >> observations is odd, but returns an unnamed scalar if the number of
    >> observations is
    >> even. This confuses the apply function in this case at:

    PD> for ( i in 1:1000 ) cat("Data frames are not matrices!\n")

                                 ==============================
    >> X<-matrix(c(1:8,NA),3,3)
    >> X
    PD> [,1] [,2] [,3]
    PD> [1,]    1    4    7
    PD> [2,]    2    5    8
    PD> [3,]    3    6   NA
    >> apply(X,2,median,na.rm=T)
    PD> [1] 2.0 5.0 7.5

    PD> Works fine.

    PD> However,

    >> Z<-data.frame(X)
    >> apply(Z,2,median,na.rm=T)
    PD> Error in names(x) == ans.names : comparison (1) is possible only for vector types

    PD> Question is whether this is a bug. Apply() never promised to work on
    PD> non-arrays.

I think we should 
  either   make it promiss and do this
  or	   make it produce a warning    when used with data.frames

The above problem is too common for non-experts to stumble on..


    PD> When applied columnwise, it would anyway be more obvious to use

    >> sapply(Z,median,na.rm=T)
    PD> X1  X2  X3 
    PD> 2.0 5.0 7.5 

This could be what   
     apply(<dataframe>, 2, * )   
should do
whereas we could have
	apply(dfr, 1, *)  === apply(data.matrix(dfr), 1, *)
when dfr is a data.frame.

Opinions ?
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Sep 26 20:52:47 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 26 Sep 2000 21:52:47 +0200
Subject: [Rd] subset()  wish: allow "select" for non-dataframes
Message-ID: <14800.65167.494938.453452@gargle.gargle.HOWL>

{Mainly to the author of the subset() function,
 but RFC to all "R-develers": }

Wouldn't it be worth redefining  subset.default() such
that `anything reasonable' would allow a select argument?

Currently, only subset.data.frame() allows a select argument,
and hence we can have

  > (x <- c(a=1, b=3, d= 7:10))
   a  b d1 d2 d3 d4 
   1  3  7  8  9 10 

  > subset(as.data.frame(rbind(x)), select = -(d2:d3))
    a b d1 d4
  x 1 3  7 10

{and ``subset(as.data.frame(rbind(x)))'' might already be a sensible
 definition for  subset.default  at least 
 if(!missing(select) && !is.null(names(x))); 
 and similarly for matrices.
}

---

Using  ranges and "-" in indices for names instead of just integers 
is a feature that I have been missing for a long time.
It would allow much more expressive code in some situations.


2nd thought: 
      One could even start thinking if we should n't even enhance
      "[" and "[[" instead of just  subset()...

I agree that one might not like things like   x[- d1] that are
undefined when not part of the index, but then 
"i , j" is also not really defined when not inside "[ .. ]" ...

--
[Evening musings;  maybe I'm too close to dream already...]

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Sep 26 21:27:27 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 Sep 2000 22:27:27 +0200
Subject: [Rd] Re: subset()  wish: allow "select" for non-dataframes
In-Reply-To: Martin Maechler's message of "Tue, 26 Sep 2000 21:52:47 +0200"
References: <14800.65167.494938.453452@gargle.gargle.HOWL>
Message-ID: <x266nic30w.fsf@blueberry.kubism.ku.dk>

Martin Maechler <maechler@stat.math.ethz.ch> writes:

> {Mainly to the author of the subset() function,
>  but RFC to all "R-develers": }

Man, that was many moons ago...

> Wouldn't it be worth redefining  subset.default() such
> that `anything reasonable' would allow a select argument?
> 
> Currently, only subset.data.frame() allows a select argument,
> and hence we can have
> 
>   > (x <- c(a=1, b=3, d= 7:10))
>    a  b d1 d2 d3 d4 
>    1  3  7  8  9 10 
> 
>   > subset(as.data.frame(rbind(x)), select = -(d2:d3))
>     a b d1 d4
>   x 1 3  7 10
> 
> {and ``subset(as.data.frame(rbind(x)))'' might already be a sensible
>  definition for  subset.default  at least 
>  if(!missing(select) && !is.null(names(x))); 
>  and similarly for matrices.
> }

This sounds doable.

> 2nd thought: 
>       One could even start thinking if we should n't even enhance
>       "[" and "[[" instead of just  subset()...
> 
> I agree that one might not like things like   x[- d1] that are
> undefined when not part of the index, but then 
> "i , j" is also not really defined when not inside "[ .. ]" ...

You do need to be careful since x[i] is ambiguous if "i" is both a
variable name in the environment and the name of an element of x. One
idea could be to allow indexing with unevaluated calls like
x[quote(-(d2:d3))] and internally have

if (is.language(ix)) {
    nl<-as.list(1:dim)
    names(nl)<-names(x)
    ix<-eval(ix,nl)
}

(good luck with [.data.frame &friends, though...)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Don.Wingate@intellichem.com  Wed Sep 27 02:34:49 2000
From: Don.Wingate@intellichem.com (Don Wingate)
Date: Tue, 26 Sep 2000 18:34:49 -0700
Subject: [Rd] Wrapping R for windows in a com dll
Message-ID: <MPEHJEGLNPNFGJFOJMKNMEBFCAAA.Don.Wingate@IntelliChem.com>

Dear R Community,

I am trying to create a com dll wrapper for R in a mannor similiar to the R
Com Server by Thomas Baier except that I would much rather avoid using the
proxy dll ("Rproxy.dll"). Perhaps I don't really understand the reason for
going throug the proxy in the first place, but it seems like an unnecessary
indirection for an application which is not intended to use DCom. To this
end I have been trying to use the functions declared in rproxy_impl.h (I've
tried rtest.c as well, aka the readme file in the front-ends directory). It
is my understanding that these functions provide access to interface
functions contained in R.dll. However, there does not seem to be an R.exp or
R.lib file in the source code or R binary distribution.

I work in the VC++ ide and am building a VC++ project. As I am sorely
unpracticed in the use of makefiles and the command line for compiling, I
have been avoiding the daunting task of compiling the R dll itself, if in
fact that would be at all helpful. (From what I have been able to gather, it
is either not possible or a big problem to compile R inside the VC++ ide, is
this correct??)

My questions are as follows:

1) Is it possible to build a project containing calls to functions contained
in rtest.c and/or rproxy_impl.h from the VC++ ide?

2) Are the compiled R.exp and/or R.lib files available?

3) If these files are not available (or even if they are) is there another
way to access R.dll which I have not tried, other than through RProxy.dll?

4) Is there any documentation on the interface exposed by R.dll and its
dependencies?

Thankyou in advance,

Don Wingate.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Sep 27 09:37:42 2000
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 27 Sep 2000 10:37:42 +0200
Subject: [Rd] bug in apply with median -- fixed in R-devel (NULL == ..)
In-Reply-To: <39CCB4C0.9F104660@metronet.com>
References: <39CCB4C0.9F104660@metronet.com>
Message-ID: <14801.45526.915173.955637@gargle.gargle.HOWL>

>>>>> "LarAm" == Larry Ammann <ammann@metronet.com> writes:

    LarAm> I have found a problem in R version 1.1.1 when using apply with the
    LarAm> median function.
    LarAm> The problem can be illustrated with the following data matrix:

    LarAm> X1  X2  X3
    LarAm> 1     2     3
    LarAm> 4    5     6
    LarAm> 7    8    NA

    LarAm> Enter this data matrix as X and then try
    LarAm>	 apply(X,2,median,na.rm=T)

Reproducible by

 X <- matrix(c(1:8,NA),3,3, dimnames = list(1:3,paste("V",1:3,sep="")))
 apply(X,2,median,na.rm=T)

Thank you!

    LarAm> The problem here is that the median function returns a named
    LarAm> scalar if the number of observations is odd, but returns an
    LarAm> unnamed scalar if the number of observations is even. This
    LarAm> confuses the apply function in this case at:

    LarAm>    ans.names <- names(ans[[1]])
    LarAm>    if (!ans.list)
    LarAm>       ans.list <- any(unlist(lapply(ans, length)) != l.ans)
    LarAm>    if (!ans.list && length(ans.names)) {
    LarAm>       all.same <- sapply(ans, function(x) all(names(x) == ans.names))
    LarAm> #here is the offending line
    LarAm>    if (!all(all.same))
    LarAm>        ans.names <- NULL
    LarAm> }

Yes, your analysis is correct.

The reason this problem is now fixed (in R-devel, aka "1.2 unstable"),
is explained by the following entry in the BUG FIXES part of the ./NEWS
file :

    o	NULL == ... now gives logical(0) instead of an error.
	This fixes a bug with e.g. apply(X,2,median, na.rm = TRUE) and
	all(NULL == NULL) is now TRUE.




    LarAm> This problem does not occur with S-Plus. My quick solution was to use
    LarAm> the quantile function
    LarAm> instead of the median function:

    LarAm> apply(X,2,quantile,probs=.5,na.rm=T)

    LarAm> One way of fixing the problem then is to redefine median as

    LarAm> median <- function(x,na.rm=F,names=T)
    LarAm> quantile(x,probs=.5,na.rm=na.rm,names=names)

    LarAm> I don't know if this is a long-term solution though, since there may be
    LarAm> other functions with inconsistent
    LarAm> naming policies that can confuse apply as it is currently written.

yes.
and the above fix should fix all these as well!

    LarAm> Larry Ammann
    LarAm> Professor of Mathematical Sciences
    LarAm> University of Texas at Dallas

Thanks again!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kleiweg@let.rug.nl  Wed Sep 27 10:46:06 2000
From: kleiweg@let.rug.nl (kleiweg@let.rug.nl)
Date: Wed, 27 Sep 2000 11:46:06 +0200 (MET DST)
Subject: [Rd] R 1.1.0: scan (PR#672)
Message-ID: <200009270946.LAA00625@pubhealth.ku.dk>


I'm using R 1.1.0 on Linux and HP-UX 10.20. I encountered a bug
in the HP-UX version.

When I do this:

lines <- scan(file="filename", what="", sep="\n", strip.white=c(TRUE), quiet=TRUE) 

.. it works OK on Linux. On HP-UX, the last line is read in
twice, giving 'lines' an extra element that is identical to the 
previous element.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Sep 27 13:51:50 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 27 Sep 2000 13:51:50 +0100 (BST)
Subject: [Rd] Wrapping R for windows in a com dll
In-Reply-To: <MPEHJEGLNPNFGJFOJMKNMEBFCAAA.Don.Wingate@IntelliChem.com>
Message-ID: <Pine.GSO.4.05.10009271343020.20991-100000@auk.stats>

On Tue, 26 Sep 2000, Don Wingate wrote:

> Dear R Community,
> 
> I am trying to create a com dll wrapper for R in a mannor similiar to the R
> Com Server by Thomas Baier except that I would much rather avoid using the
> proxy dll ("Rproxy.dll"). Perhaps I don't really understand the reason for
> going throug the proxy in the first place, but it seems like an unnecessary
> indirection for an application which is not intended to use DCom. To this

Right, but it *is* intended to use DCOM.  You can directly link the R.dll
into your application too.

> end I have been trying to use the functions declared in rproxy_impl.h (I've
> tried rtest.c as well, aka the readme file in the front-ends directory). It
> is my understanding that these functions provide access to interface
> functions contained in R.dll. However, there does not seem to be an R.exp or
> R.lib file in the source code or R binary distribution.

There is in the binary distribution, as well as instructions on
how to build them in the source distribution.

> I work in the VC++ ide and am building a VC++ project. As I am sorely
> unpracticed in the use of makefiles and the command line for compiling, I
> have been avoiding the daunting task of compiling the R dll itself, if in
> fact that would be at all helpful. (From what I have been able to gather, it
> is either not possible or a big problem to compile R inside the VC++ ide, is
> this correct??)

VC++ is a big problem, period.  If it were standards-conforming, one could
build R with it, but it has too many bugs.

> My questions are as follows:
> 
> 1) Is it possible to build a project containing calls to functions contained
> in rtest.c and/or rproxy_impl.h from the VC++ ide?

rtest.c, yes. It's easy, but telling anyone how to use an IDE is
very lengthy, and the command-line versions are much much shorter.

> 2) Are the compiled R.exp and/or R.lib files available?

R.exp is in rw1011sp.zip!  Read readme.packages there, which has
explicit instructions for using VC++ to build an import library.

> 3) If these files are not available (or even if they are) is there another
> way to access R.dll which I have not tried, other than through RProxy.dll?
> 
> 4) Is there any documentation on the interface exposed by R.dll and its
> dependencies?

Yes, in the front-ends directory.  All you can do is pass commands to
R and receive back the results.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Sep 27 20:12:07 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 27 Sep 2000 15:12:07 -0400
Subject: [Rd] R CMD check   dev.cur()
Message-ID: <39D24687.91A52BFD@bank-banque-canada.ca>

I am having trouble tracking down a "R CMD check"  problem in Linux.
The code works in Solaris and interactively in Linux. Is it possible
that dev.cur() when running "R CMD check" returns 1 in Solaris and
something different in Linux (Mandrake 2.2.14-1 and Gnome)?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Wed Sep 27 20:21:23 2000
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Wed, 27 Sep 2000 21:21:23 +0200 (CEST)
Subject: [Rd] R CMD check   dev.cur()
In-Reply-To: <39D24687.91A52BFD@bank-banque-canada.ca>
References: <39D24687.91A52BFD@bank-banque-canada.ca>
Message-ID: <14802.18611.142952.540878@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 27 Sep 2000 15:12:07 -0400,
>>>>> Paul Gilbert (PG) wrote:

PG> I am having trouble tracking down a "R CMD check"  problem in Linux.
PG> The code works in Solaris and interactively in Linux. Is it possible
PG> that dev.cur() when running "R CMD check" returns 1 in Solaris and
PG> something different in Linux (Mandrake 2.2.14-1 and Gnome)?

Which version of R?

Could you not simply do a

	cat(dev.cur(), file="xxx")

or something similar to see what it returns? 

best,
.f
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu Sep 28 01:03:00 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 27 Sep 2000 20:03:00 -0400
Subject: [Rd] R CMD check   dev.cur()
References: <39D24687.91A52BFD@bank-banque-canada.ca> <14802.18611.142952.540878@galadriel.ci.tuwien.ac.at>
Message-ID: <39D28AB4.2EB80924@bank-banque-canada.ca>

PG> I am having trouble tracking down a "R CMD check"  problem in Linux.

PG> The code works in Solaris and interactively in Linux. Is it possible

PG> that dev.cur() when running "R CMD check" returns 1 in Solaris and
PG> something different in Linux (Mandrake 2.2.14-1 and Gnome)?

FL>Which version of R?

R 1.1.1

FL>Could you not simply do a
FL>      cat(dev.cur(), file="xxx")

Both Solaris and Linux give 2 so I guess that is not the problem. I'll
check further.
Thanks,
Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kohnicho@comp.nus.edu.sg  Thu Sep 28 07:08:51 2000
From: kohnicho@comp.nus.edu.sg (Nicholas Lewin-Koh)
Date: Thu, 28 Sep 2000 14:08:51 +0800 (GMT-8)
Subject: [Rd] New Web page -- Ideas list
In-Reply-To: <14802.18611.142952.540878@galadriel.ci.tuwien.ac.at>
Message-ID: <Pine.GSO.4.21.0009281340120.3143-100000@sununx.comp.nus.edu.sg>

Hi,
I was looking over the developer page of the new web site. In the ideas
section dynamic graphics and mapping are mentioned. I have a few comments
and wanted to get some feedback. 

Mapping: I am working on a package for mapping (I have sent notice to the
list). The ideas section of the web page mentions the Beckers/Wilks
code. I think ther model is very restrictive and perhaps a better system
could be implemented. I think there are two goals that the mapping
routines/data structures should address 1) display, and 2) analysis. On
the display end what I have noticed that could be improved: a) The display
when resized does not stay equally scaled, this is important for map
display. b) The polygon code does not deal well with multi-part polygons,
many gis and graphics systems allow holes, and islands, the polygon and
clipping routines can easily be adjusted to handle this. I can volunteer
to
do the polygon stuff, I have looked at the code in graphics.c and I think
I undestand what is going on. A zoom function on the device would be very
useful, especially if it would interact withhow the device is partioned by
the user, so that the first level of zoom would be to an individual
plot. These are the most immediate things that affect the R base code
directly.

Some other things that are more of a wishlist would be better color and
symbol facilities, I just finished writing an interactive color picker and
pallete selector using graphapp that works nicely from R. A tree node data
type that can be passed as a SEXP for making linked lists, binary trees
etc. I am writing an R+ tree as part of the map object and i am worried
about the overhead of using lists as node structures. For most spatial
calculations (variograms, polygon adjacency, weight matrices, neighbor
finding etc.) trees are essential for better than O(n^2) performance.

I hope my comments are construed as constructive rather than whining. Most
of what I have indicated I would be willing to help implement.

Nicholas 


                 CH3
                  |
                  N             Nicholas Lewin-Koh
                 / \            Dept of Statistics
           N----C   C==O        Program in Ecology and Evolutionary Biology
          ||   ||   |           Iowa State University
          ||   ||   |           Ames, IA 50011
          CH    C   N--CH3      http://www.public.iastate.edu/~nlewin
            \  / \ /            nlewin@iastate.edu
             N    C
             |   ||             Currently
            CH3   O             Graphics Lab
                                School of Computing
                                National University of Singapore
     The Real Part of Coffee    kohnicho@comp.nus.edu.sg


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Prof Brian Ripley <ripley@stats.ox.ac.uk>  Thu Sep 28 13:51:12 2000
From: Prof Brian Ripley <ripley@stats.ox.ac.uk> (Prof Brian Ripley)
Date: Thu, 28 Sep 2000 13:51:12 +0100 (BST)
Subject: [Rd] Re: [R] Nothing can be pasted...
Message-ID: <200009281251.NAA10367@toucan.stats.ox.ac.uk>

> Date: Thu, 28 Sep 2000 14:28:31 +0200 (CEST)
> From: gb <gb@stat.umu.se>
> 
> 
> Compiling R-1.1.1 on RedHat Linux 7.0 gives lots of warnings like
> 
> In file included from tabulate.c:24:
> ../../src/include/config.h:192:21: warning: nothing can be pasted after
> this token
> 
> which I didn't see with RH6.2. However,  R  seems to run just fine
> nevertheless. The offending line in config.h is
> 
> #define DYNLOADEXT  "." ## SHLIBEXT
> 
> I'm not too familiar with  C  programming, but if ## SHLIBEXT
> is meant as a comment, shouldn't it be surrounded by /* */?

A bit more on this. I understood from PD's recent post that RH7.0 uses
gcc 2.96, even though that is not yet released accoring to the gcc site
(gcc.gnu.org) has as NEWS for Sept 11, 2000:

   Neil Booth has contributed a new lexer and macro-expander for the C
   preprocessor. The lexer makes a single pass over the source files,
   whereas previously it made two. The macro expander works without
   re-scanning for nested macros to expand, and operates on lexical tokens
   instead of text strings.

   ISO C, C++, and Objective C use the new preprocessor. Traditional (K+R)
   C, Fortran, and Chill use an older implementation (taken from GCC 1)
   which obeys the rules for pre-standard C preprocessing. Either version
   may be used to preprocess assembly language.

I wonder if this is a problem with using a beta compiler?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Sep 28 16:05:53 2000
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Sep 2000 17:05:53 +0200
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: Prof Brian Ripley's message of "Thu, 28 Sep 2000 13:51:12 +0100 (BST)"
References: <200009281251.NAA10367@toucan.stats.ox.ac.uk>
Message-ID: <x24s30sgj2.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> > which I didn't see with RH6.2. However,  R  seems to run just fine
> > nevertheless. The offending line in config.h is
> > 
> > #define DYNLOADEXT  "." ## SHLIBEXT
> > 
> > I'm not too familiar with  C  programming, but if ## SHLIBEXT
> > is meant as a comment, shouldn't it be surrounded by /* */?
> 

> I wonder if this is a problem with using a beta compiler?

I certainly wouldn't put such a goof beyond RedHat, but it might be a
question of tighter standards compliance. What happens if the spaces
around ## are removed? (The error message might read as "can't paste
onto a whitespace token")

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@goose.stat.umn.edu  Thu Sep 28 16:12:18 2000
From: luke@goose.stat.umn.edu (Luke Tierney)
Date: Thu, 28 Sep 2000 10:12:18 -0500 (CDT)
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: <x24s30sgj2.fsf@blueberry.kubism.ku.dk> from Peter Dalgaard BSA at "Sep 28, 2000 05:05:53 pm"
Message-ID: <200009281512.KAA04710@goose.stat.umn.edu>

Peter Dalgaard BSA wrote:
> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > > which I didn't see with RH6.2. However,  R  seems to run just fine
> > > nevertheless. The offending line in config.h is
> > > 
> > > #define DYNLOADEXT  "." ## SHLIBEXT
> > > 
> > > I'm not too familiar with  C  programming, but if ## SHLIBEXT
> > > is meant as a comment, shouldn't it be surrounded by /* */?
> > 
> 
> > I wonder if this is a problem with using a beta compiler?
> 
> I certainly wouldn't put such a goof beyond RedHat, but it might be a
> question of tighter standards compliance. What happens if the spaces
> around ## are removed? (The error message might read as "can't paste
> onto a whitespace token")
> 

White space should be fine, from my reading of Harbison & Steele at least.
The old KR way of doing token concatenation was

#define CONCAT(x,y) x/**/y

and there leaving white space would not work, but with the ## operator

#define CONCAT(x,y) x##y

and

#define CONCAT(x,y) x ## y

should be equivalent.

Since the two bits are literal strings, it would also be possible to define

#define DYNLOADEXT  "." SHLIBEXT

My fear is that the preprocessor is complaining about SHLIBEXT being
defined but empty because of a configure problem.

luke


-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@blindglobe.net  Thu Sep 28 16:43:29 2000
From: rossini@blindglobe.net (A.J. Rossini)
Date: 28 Sep 2000 08:43:29 -0700
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: <200009281251.NAA10367@toucan.stats.ox.ac.uk>
 (Prof Brian Ripley's message of "Thu, 28 Sep 2000 13:51:12 +0100 (BST)")
References: <200009281251.NAA10367@toucan.stats.ox.ac.uk>
Message-ID: <87bsx8o732.fsf@jeeves.blindglobe.net>

>>>>> "PBR" == Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:


    PBR> A bit more on this. I understood from PD's recent post that
    PBR> RH7.0 uses gcc 2.96, even though that is not yet released
    PBR> accoring to the gcc site (gcc.gnu.org) has as NEWS for Sept
    PBR> 11, 2000:


    PBR> I wonder if this is a problem with using a beta compiler?

I would be very careful with upgrading a production machine to RedHat
7.0; based on my recent experiences with Debian/Woody, it's hazardous
to stability (Debian/Woody is currently is messed up with similar but
slightly better patched (later) version of glibc, though using older
version of gcc (2.95.2))

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
BlindGlobe Networks (home/default)	rossini@blindglobe.net	
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org

FHCRC: M/Tu: 206-667-7025 (fax=4812) | Voicemail is pretty sketchy
CFAR:   W/F: 206-731-3647 (fax=3694) | Email is far better than phone
UW:    Th/F: 206-543-1044 (fax=3286) | Change last 4 digits of phone for fax
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Sep 28 17:05:44 2000
From: gb@stat.umu.se (gb)
Date: Thu, 28 Sep 2000 18:05:44 +0200 (CEST)
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: <x24s30sgj2.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.21.0009281804570.2168-100000@pc16.stat.umu.se>

On 28 Sep 2000, Peter Dalgaard BSA wrote:

> Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> 
> > > which I didn't see with RH6.2. However,  R  seems to run just fine
> > > nevertheless. The offending line in config.h is
> > > 
> > > #define DYNLOADEXT  "." ## SHLIBEXT
> > > 
> > > I'm not too familiar with  C  programming, but if ## SHLIBEXT
> > > is meant as a comment, shouldn't it be surrounded by /* */?
> > 
> 
> > I wonder if this is a problem with using a beta compiler?
> 
> I certainly wouldn't put such a goof beyond RedHat, but it might be a
> question of tighter standards compliance. What happens if the spaces
> around ## are removed? (The error message might read as "can't paste
> onto a whitespace token")
> 

I tried that, but I get the same warnings.

Gran

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gb@stat.umu.se  Thu Sep 28 17:21:32 2000
From: gb@stat.umu.se (gb)
Date: Thu, 28 Sep 2000 18:21:32 +0200 (CEST)
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: <200009281512.KAA04710@goose.stat.umn.edu>
Message-ID: <Pine.LNX.4.21.0009281812510.2168-100000@pc16.stat.umu.se>

On Thu, 28 Sep 2000, Luke Tierney wrote:

> Peter Dalgaard BSA wrote:
> > Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:
> > 
> > > > which I didn't see with RH6.2. However,  R  seems to run just fine
> > > > nevertheless. The offending line in config.h is
> > > > 
> > > > #define DYNLOADEXT  "." ## SHLIBEXT
> > > > 
> > > > I'm not too familiar with  C  programming, but if ## SHLIBEXT
> > > > is meant as a comment, shouldn't it be surrounded by /* */?
> > > 
> > 
> > > I wonder if this is a problem with using a beta compiler?
> > 
> > I certainly wouldn't put such a goof beyond RedHat, but it might be a
> > question of tighter standards compliance. What happens if the spaces
> > around ## are removed? (The error message might read as "can't paste
> > onto a whitespace token")
> > 
> 
> White space should be fine, from my reading of Harbison & Steele at least.
> The old KR way of doing token concatenation was
> 
> #define CONCAT(x,y) x/**/y
> 
> and there leaving white space would not work, but with the ## operator
> 
> #define CONCAT(x,y) x##y
> 
> and
> 
> #define CONCAT(x,y) x ## y
> 
> should be equivalent.
> 
> Since the two bits are literal strings, it would also be possible to define
> 
> #define DYNLOADEXT  "." SHLIBEXT

This did the trick! But still this warning several times:

../../src/include/FFTab.h:40:29: warning: pasting would not give a valid
preprocessing token

(But different line numbers). Line 40:

	{ F77_QSYMBOL(lminfl),	F77_SYMBOL(lminfl)},

Gran 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Sep 28 18:12:44 2000
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Sep 2000 19:12:44 +0200 (MET DST)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
Message-ID: <200009281712.TAA20426@pubhealth.ku.dk>


> From: bolker@zoo.ufl.edu
> Date: Tue, 26 Sep 2000 16:14:13 +0200 (MET DST)
> 
>   I'm having some trouble with optim(method="L-BFGS-B"),
> and I'm not sure I have the ability to track down and fix
> what seem to be bugs within optim().
>   I'm bootstrapping an original data set and fitting a model
> to each bootstrapped data set.  For some bootstrapped samples,
> optim() sets negative parameter values (despite the fact that
> I have explicitly set non-zero lower bounds on the parameters)
> and chokes.  For other samples, it appears to get into an infinite
> loop (ignoring the finite value of maxit).
>  
>   Functions and samples that provoke the problem are below: I
> was able to reproduce the problems running this with --vanilla.
> 
>   Not exactly a bug but: there is no tracing information built
> into L-BFGS-B (setting trace=TRUE has no effect).

It's a feature, on the TODO list to be added one day.

>   Also, a general question: are both nlm() and optim() going to
> be around indefinitely?  Should I be using one or the other?

There are no plans to remove either.  `indefinitely' is not part
of the non-warranty.
 
>   For the moment I've managed to (sort of) get around the problem
> with try(), but the infinite loops are a real nuisance ...

On Solaris, I get neither negative values nor an infinite loop
on your examples. 

On Linux RH6.2/gcc 2.95.2 I get

NA 1 NA 1 1 1 1 0.6831783 1 0.6831783 1 NA 
NA -Inf NA -Inf -Inf -Inf -Inf -160.2173 -Inf -107.0805 -Inf NA 
Error in optim(c(min(boot.total) - 1, 100, 1), nllfun2g.boot, lower = rep(fuzz,  
: 
        L-BFGS-B needs finite values of fn

for the first, and probably a loop for the second.  I think this is
the usual problem with inconsistent internal precision on Linux
compilers, so try compiling optim.c with -ffloat-store to make gcc
IEEE-compliant.  (At least, that's what the Linux gcc man page says.)

Can you provide some evidence for negative parameter values?  That's
not supposed to happen, but as I rarely fail to supply derivatives,
I have not tested it much.

Finally, I think you have omitted to supply scaling consts for your problem,
and optim will work a lot better if you do, as it will also do if
you can supply analytical derivatives.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From technologic@mediaone.net  Thu Sep 28 16:12:51 2000
From: technologic@mediaone.net (technologic@mediaone.net)
Date: Thu, 28 Sep 00 10:12:51 EST
Subject: [Rd] Announcement
Message-ID: <technologic@mediaone.net>

Hello-

I'm writing to you for a request to see our new site, http://www.buyitpc.com/signup.html   and the add your name to our list if you like to know 
about computer components and software!

http://www.buyitpc.com

Thank you for your time!


There is a legal way of sending large ammounts of e-mails. 
If you want to show that you are in full compliance with the law and are completely legal, you shall  observe the following issues:

1.	The term "Advertisement" shall appear as the first word of the subject line.
2.	Paste this statement below into the beginning or end of your e-mail.

This message is sent in compliance of e-mail bill: SECTION 301, Paragraph (a)(2)(C) of s. 1618
Sender : Tech Logic Comptuers - BuyIt PC - La Mirada, CA.
Phone : 562 943 7745
E-mail : sales@buyitpc.com
To be removed from our mailing list, simply reply with "REMOVE" in the subject. 

By pasting the above announcement into all of the unsolicited e-mails you send, people will realize that you are obviously not breaking any laws. And that's a very important point that should be made.
3.	Finally, you shall honor the REMOVE requests not later than 48 hours after receipt of the request, by cease initiating transmissions to the requester and removing him or her from the correspondent mailing list.

To know more about this issue, consut the "Unsolicited Commercial Electronic Mail Choice Act of 1997'':
http://www.senate.gov/~murkowski/commercialemail/S771index.html

All rigths reserved.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From saikat@stat.wisc.edu  Thu Sep 28 18:33:58 2000
From: saikat@stat.wisc.edu (Saikat DebRoy)
Date: 28 Sep 2000 12:33:58 -0500
Subject: [Rd] Re: [R] Nothing can be pasted...
In-Reply-To: gb's message of "Thu, 28 Sep 2000 18:21:32 +0200 (CEST)"
References: <Pine.LNX.4.21.0009281812510.2168-100000@pc16.stat.umu.se>
Message-ID: <qxpya0ch14p.fsf@verdi.stat.wisc.edu>

I think some of the behaviors with respect to ## has changed in recent
versions of gcc. The following quote from the latest gcc cpp.texinfo
file might be relevent as far as the warnings about F77_SYMBOL is
concerned :



The following features are deprecated and will likely be removed at some
point in the future:-

@itemize @bullet

@item Attempting to paste two tokens which together do not form a valid
preprocessing token

The preprocessor currently warns about this and outputs the two tokens
adjacently, which is probably the behavior the programmer intends.  It
may not work in future, though.

Most of the time, when you get this warning, you will find that @samp{##}
is being used superstitiously, to guard against whitespace appearing
between two tokens.  It is almost always safe to delete the @samp{##}.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Don.Wingate@intellichem.com  Fri Sep 29 00:21:38 2000
From: Don.Wingate@intellichem.com (Don Wingate)
Date: Thu, 28 Sep 2000 16:21:38 -0700
Subject: [Rd] creating custom I/O for R
Message-ID: <MPEHJEGLNPNFGJFOJMKNKEBNCAAA.Don.Wingate@IntelliChem.com>

Dear R developers,

I am building an ActiveX Com wrapper for R. I have successfully implemented
an Evaluate function using rproxy_impl.c and rtest.c as examples. The Com
object as it stands at the moment is similar to Thomas Baier's automation
server StatConnectorSrv.exe except that it does not use the Proxy. My goal
it to include a couple of activeX controls in the library: One to provide a
terminal-like interface to R and the other to provide a window for graphics
output.

These two activeX components will serve the exact functions as the
corresponding components of RGui.exe. The difference (and great benefit) is
that as ActiveX components, they can be placed inside an ActiveX container
(like a VB form) and manipulated as an application developer sees fit.

My questions involve how to accomplish these goals:

1) Graphics.

a. For the graphics output, is there a way to pass R a Windows GDI
(graphics) device to draw with? (This would be a very helpful feature!)

b. If not, is there a way to get a metafile and/or a bitmap of a plot
without having first displayed the plot in the standard window?

2) Terminal

a. Is possible to quickly explain the mechanism provided by the functions
pointed at by the members WriteConsole and ReadConsole of the struct
structRstart?

I would appreciate any help and/or suggestions.

Thanks, Don Wingate.

P.S. Thankyou Prof. Ripley for your help earlier.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Sep 29 07:37:03 2000
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 29 Sep 2000 07:37:03 +0100 (BST)
Subject: [Rd] creating custom I/O for R
In-Reply-To: <MPEHJEGLNPNFGJFOJMKNKEBNCAAA.Don.Wingate@IntelliChem.com>
Message-ID: <Pine.GSO.4.05.10009290732350.7403-100000@auk.stats>

On Thu, 28 Sep 2000, Don Wingate wrote:

> Dear R developers,
> 
> I am building an ActiveX Com wrapper for R. I have successfully implemented
> an Evaluate function using rproxy_impl.c and rtest.c as examples. The Com
> object as it stands at the moment is similar to Thomas Baier's automation
> server StatConnectorSrv.exe except that it does not use the Proxy. My goal
> it to include a couple of activeX controls in the library: One to provide a
> terminal-like interface to R and the other to provide a window for graphics
> output.
> 
> These two activeX components will serve the exact functions as the
> corresponding components of RGui.exe. The difference (and great benefit) is
> that as ActiveX components, they can be placed inside an ActiveX container
> (like a VB form) and manipulated as an application developer sees fit.
> 
> My questions involve how to accomplish these goals:
> 
> 1) Graphics.
> 
> a. For the graphics output, is there a way to pass R a Windows GDI
> (graphics) device to draw with? (This would be a very helpful feature!)

Do you mean draw on?  If so, no, but the devga device could be modified to
do so.

> b. If not, is there a way to get a metafile and/or a bitmap of a plot
> without having first displayed the plot in the standard window?

Use a win.metafile device. See ?windows. See also ?bmp.

> 2) Terminal
> 
> a. Is possible to quickly explain the mechanism provided by the functions
> pointed at by the members WriteConsole and ReadConsole of the struct
> structRstart?

src/unix/system.txt is the documentation.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Sep 29 14:37:47 2000
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 29 Sep 2000 09:37:47 -0400
Subject: [Rd] Re: [R] non-ideal behavior in princomp/ not a feature but a bug
References: <F169284AF6DDD111AA000001FAF836E8012308D8@LLNBBS22>
Message-ID: <39D49B2B.C054D6FA@bank-banque-canada.ca>

>2. However, not all matrices work, such as the first one I tried yesterday.
>Here is
>an example of a matrix which does not work.
>> x
>     [,1] [,2] [,3] [,4]
>[1,] -0.4 -1.6 -1.0 -1.8
>[2,] -2.2 -0.3  1.4  0.2
>> princomp(x)
>Error in princomp(x) : covariance matrix is not non-negative definite

This does not happen with this example in Solaris, but I have had similar
problems with eigen before and had to use something like eigen( (cv + t(cv))/2 )
to avoid it. It seems to me that if eigen is called with symmetric = TRUE, as is
done in princomp, then eigen should return an error message about a
non-symmetric matrix, rather than return a possibly spurious answer from which
negative eigenvalues are checked to test for a non symmetric matrix.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Sep 29 21:49:08 2000
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Fri, 29 Sep 2000 16:49:08 -0400 (EDT)
Subject: [Rd] bounds violations, infinite loops in optim/L-BFGS-B (PR#671)
In-Reply-To: <200009281712.TAA20426@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.10.10009291633590.22920-100000@bolker.zoo.ufl.edu>

On Thu, 28 Sep 2000 ripley@stats.ox.ac.uk wrote:

> It's a feature, on the TODO list to be added one day.

  A quick hack (if anyone wants to do it) is to change line 975 from

/*	Rprintf("in lbfgsb - %s\n", task);*/

 to

	if (trace) Rprintf("in lbfgsb - %s\n", task);

however, the debugging output that you get is pretty ugly.

> >   Also, a general question: are both nlm() and optim() going to
> > be around indefinitely?  Should I be using one or the other?

  Well, my question was more whether one was preferred or not ... I did
see a comment in some NEWS file at some point that a built-in function had
been switched to optim() and so should converge more often.

  At your suggestion I compiled optim.c (and ../appl/lbfgsb.c for good
measure) with -ffloat-store.  The negative parameter jumps went away, but
I can still provoke optim() to hang with the right (not uncommon) choice
of bootstrap values.  Adding what I thought were reasonable parscale
values makes my code hang in different places [i.e. the particular values
that I give below are no longer a problem], but doesn't stop it hanging or
even reduce the frequency with which it hangs.  Perhaps now that I have
ffloat-store enabled the values below will hang under Solaris as well.

  Should ffloat-store be enabled in general for compilation on Linux
boxes?

  Just for the record, the apparent internal behavior (which I extracted
by uncommenting/modifying line 975 of optim.c as above) is that the
routine does task FG_START, followed by 20 FG_LNSRCH, followed by
ABNORMAL_TERMINATION_IN_LNSRCH, then repeats this indefinitely.  I
wouldn't mind so much if optim/lbfgsb looped until a maximum number of
iterations and then stopped with an error code, but as it stands these
particular cycles never make it to an iteration check and so the loop
never stops -- in order to do the bootstrap run I have to sit and hit
Ctrl-C to restart every time it looks like it's hanging.

  I agree that supplying derivatives would probably fix the problem
(parscale doesn't seem to help enough to fix the problem), but I'm in part
trying to provide this as a tool for non-analytically-inclined students
and I don't want to have to hold their hands while they take the
derivatives of their functions ...

 I greatly appreciate the time that you, and the rest of the core team,
have put into R.

  Ben Bolker

======================
cfunc2_function(input,N1,N2,G=1.0){
  pmin(1,1/((1+((input - N1)/N2))^G))
}

nllfun2g.boot_function(q,debug=FALSE){
  N1_q[1]
  N2_q[2]
  G_q[3]
  maxval <- 1e8
  L_cfunc2(boot.total,N1,N2,G)
  if (debug) cat(c(N1,N2,G,range(L)),"\n")
  r <- -sum(dbinom(boot.pred, boot.total, L, log=TRUE))
  r[!is.finite(r)] <- maxval*sign(r[!is.finite(r)])
  r
}
  
debug <- FALSE
trace <- TRUE
fuzz <- 0.001

## hangs

boot.pred <- c(53,73,73,44,22,31,73,22,53,53,91,73)
boot.total <- c(200,500,100,900,150,200,500,150,200,200,900,100)

n <- try(optim(c(min(boot.total)-1,100,1),nllfun2g.boot,
        lower=rep(fuzz,3),upper=c(min(boot.total)-fuzz,Inf,Inf),
           method="L-BFGS-B",control=list(trace=trace),debug=debug))


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david@orion-10.cs.byu.edu  Fri Sep 29 21:57:58 2000
From: david@orion-10.cs.byu.edu (david@orion-10.cs.byu.edu)
Date: Fri, 29 Sep 2000 22:57:58 +0200 (MET DST)
Subject: [Rd] pretty not covering the range properly (PR#673)
Message-ID: <200009292057.WAA02794@pubhealth.ku.dk>

When I issue the command:

if ( c(2.8,3)[1] < pretty (c(2.8,3))[1]) print ("problem")

the result is "problem" prints.
I have traced it to bits and the 2.8 of the returned vector from pretty is slightly larger.
This seems to be due to the conversion to base 10 with the ns and unit variables in src/appl/pretty.c.

Anyway if I do something like:
hist(c(2.8,3))
it fails as well because it uses pretty.

Thanks for you attention,
DavidMcLaughlin@byu.edu




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 1.1
 year = 2000
 month = August
 day = 23
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From cberry@tajo.ucsd.edu  Fri Sep 29 22:18:10 2000
From: cberry@tajo.ucsd.edu (cberry@tajo.ucsd.edu)
Date: Fri, 29 Sep 2000 23:18:10 +0200 (MET DST)
Subject: [Rd] all.equal.list() sometimes fails with unnamed and named components (PR#674)
Message-ID: <200009292118.XAA02892@pubhealth.ku.dk>


examples:

1) Fails to report that components 2 and 3 differ

all.equal(list(1,2,3,zap=1),list(1,3,4,zap=2))
[1] "Component zap: Mean relative  difference: 1


2) Incorrectly asserts all are equal when components 2 and 3 differ

> all.equal(list(1,2,3,zap=1),list(1,3,4,zap=1))
[1] TRUE

3) Removing named component reveals differences:

> all.equal(list(1,2,3,1),list(1,3,4,1))
[1] "Component 2: Mean relative  difference: 0.5"      
[2] "Component 3: Mean relative  difference: 0.3333333"

4) Unequal first component reveals differences

> all.equal(list(2,2,3,zap=1),list(1,3,4,zap=1))
[1] "Component : Mean relative  difference: 0.5"
[2] "Component : Mean relative  difference: 0.5"
[3] "Component : Mean relative  difference: 0.5"
> all.equal(list(2,2,3,zap=1),list(1,3,4,zap=2))
[1] "Component : Mean relative  difference: 0.5" 
[2] "Component : Mean relative  difference: 0.5" 
[3] "Component : Mean relative  difference: 0.5" 
[4] "Component zap: Mean relative  difference: 1"
> 

5) Second component IS equal, but:

> all.equal(list(2,2,3,zap=1),list(1,2,4,zap=2))
[1] "Component : Mean relative  difference: 0.5" 
[2] "Component : Mean relative  difference: 0.5" 
[3] "Component : Mean relative  difference: 0.5" 
[4] "Component zap: Mean relative  difference: 1"

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 1.0
 year = 2000
 month = June
 day = 15
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

Chuck Berry

-- 
Charles C. Berry                        (858) 534-2098 
                                         Dept of Family/Preventive Medicine
E mailto:cberry@tajo.ucsd.edu	         UC San Diego
http://hacuna.ucsd.edu/members/ccb.html  La Jolla, San Diego 92093-0645

 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

