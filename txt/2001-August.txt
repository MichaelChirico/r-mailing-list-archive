From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug  1 10:00:16 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 1 Aug 2001 11:00:16 +0200
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <pxbsm1jg8b.fsf@infiniti.ece.cmu.edu>
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
 <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
 <15205.38703.553276.335905@mithrandir.hornik.net>
 <pxbsm1jg8b.fsf@infiniti.ece.cmu.edu>
Message-ID: <15207.50464.266507.281379@mithrandir.hornik.net>

>>>>> Thomas Vogels writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>> >>>>> Thomas Vogels writes:
>> 
>> > Excerpt from Kurt's email this morning:
>> 
>> >>>> > 2) after configure (with CC=gcc but using AIX's linker
>> >> /usr/bin/ld), the
>> >>>> > Makefile in src/library/tcltk/src doesn't protect the linker
>> >> flags
>> >> -bI
>> >>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
>> >> linker flags
>> >>>> > are passed on to ld correctly.  Which I know that you know...)
>> >>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
>> >> looked into
>> >>>> > patching configure yet...
>> >> 
>> >> Very strange.  Configure has
>> >> 
>> >> *aix4.[2-9]*)
>> >> EXPORTFILE="\$(top_builddir)/etc/R.exp"
>> >> cpicflags=
>> >> cxxpicflags=
>> >> fpicflags=
>> >> wl="-Wl,"
>> >> main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
>> >> shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
>> >> ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
>> >> SHLIB_LIBADD="\$(LIBM)"
>> >> ;;
>> >> 
>> >> so unless I am missing something obvious all linker flages are
>> >> protected
>> >> via `-Wl,' (which should also work if the C compiler is not gcc).
>> >> 
>> 
>> > Sorry, should have been more explicit, I guess: the problem is with
>> > PKG_LIBS (which is the only variable in that Makefile using linker
>> > flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
>> > in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
>> > used AIX's 'cc' compiler, you get in trouble with later using gcc
>> > (e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.
>> 
>> > There is the question, why configure didn't "see" this coming.  What
>> > would be nice is a warning to the effect that tkConfig.sh is broken
>> > when R can't compile tcltk.c.  (Currently I get messages about libc.a
>> > not found...)
>> 
>> This is asking for a bit much, I think.  How would configure know for
>> sure that tkConfig.sh is broken?

> I promise to get more sleep soon... 'What would be nice is a warning
> to the effect that the Tcl/Tk configuration failed, like:
> checking how to compile and link tcl/tk.... failed
> '  Asking about tkConfig.sh (or tclConfig.sh) is probably too muc as
> threre are other factors that can cause the fail (config.site...).

> What this would boil down to is trying to compile e.g. tkAppInit.c and
> see whether compilation and linking works.  But even this may
> be asking  fortoo much, this is just one architecture.  Things like these
> will continue to happen with AIX as long as there are those '.exp'
> files around...


>> On second thought: the comment in tkConfig.sh says
>> 
>> # String to pass to linker to pick up the Tk library from its
>> # installed directory.
>> TK_LIB_SPEC='@TK_LIB_SPEC@'
>> 
>> so maybe this assumes to be called by ld directly ...
>> 
>> What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?

> hell breaks loose.  TK_LIB_SPEC contains '-bI/some/path/libtk8.3.exp'
> which is needed badly when linking on AIX.

Argh.  After sinking some more time into this ... here's what happens.

Assuming that both tclConfig.sh and tkConfig.sh are found, we do

	TCLTL_LIBS="${TCL_LIB_SPEC} ${TK_LIB_SPEC} ${TK_LIBS}"

Using tcl8.4a1 and tk8.4a1 one gets for a shared build on AIX from the
TclTk configure code:

    if test "$using_gcc" = "yes" ; then
        TCL_BUILD_LIB_SPEC="-Wl,-bI:`pwd`/${TCL_BUILD_EXP_FILE} -L`pwd`"
        TCL_LIB_SPEC="-Wl,-bI:${exec_prefix}/lib/${TCL_EXP_FILE} -L`pwd`"    
    else
        TCL_BUILD_LIB_SPEC="-bI:`pwd`/${TCL_BUILD_EXP_FILE}"
        TCL_LIB_SPEC="-bI:${exec_prefix}/lib/${TCL_EXP_FILE}"    
    fi

    TK_LIB_SPEC="-bI:${exec_prefix}/lib/${TK_EXP_FILE}"

So the TclTk maintainers in their infinite wisdom have caught the gcc
case for tcl but not for tk.

I therefore suggest the following.

* Can you try replacing

      TCLTK_LIBS="${TCLTK_LIBS} ${TK_LIB_SPEC} ${TK_LIBS}"

  in m4/R.m4 by

      TCLTK_LIBS="${TCLTK_LIBS} ${wl}${TK_LIB_SPEC} ${TK_LIBS}"

  and see if that works?  (You will have to configure using
  --enable-maintainer-mode to get configure rebuilt.  Or, you could
  simply edit configure.)  By `works' I mean under both gcc and cc.

* If so, this is the short-term fix we could go for.  If not, we may
  need to infer wl for non-gcc from libtool, which is doable.

* It may be useful to report the discrepancy to the TclTk maintainers.

* Provided they fix the problem, we need to think about better
  strategies.  (Something like if wl is not the empty string and
  TK_LIB_SPEC does not start with it then add it as prefix.)  But let us
  not worry about this now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vogels@cmu.edu  Thu Aug  2 04:30:33 2001
From: vogels@cmu.edu (Thomas J Vogels)
Date: Wed, 1 Aug 2001 23:30:33 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <15207.50464.266507.281379@mithrandir.hornik.net>
Message-ID: <NFBBKIAHMMCHOBIBLMMPMEBPCAAA.tov@ece.cmu.edu>

Excerpt from email by Kurt Hornik:

>>> On second thought: the comment in tkConfig.sh says
>>>
>>> # String to pass to linker to pick up the Tk library from its
>>> # installed directory.
>>> TK_LIB_SPEC='@TK_LIB_SPEC@'
>>>
>>> so maybe this assumes to be called by ld directly ...

I think you're right with this assumption, but sadly, the current devel
release for tcl/tk 8.4a2 is broken--even the maintainers of tcl/tk don't
know how they want to handle TK_LIB_SPEC, TK_LIBS and friends!  When I tried
to compile Tk it failed for 'wish'.  I'll check out how to file bug reports
against tcl/tk...

>>>
>>> What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?
>
>> hell breaks loose.  TK_LIB_SPEC contains '-bI/some/path/libtk8.3.exp'
>> which is needed badly when linking on AIX.
>
> Argh.  After sinking some more time into this ... here's what happens.
>
> Assuming that both tclConfig.sh and tkConfig.sh are found, we do
>
> 	TCLTL_LIBS="${TCL_LIB_SPEC} ${TK_LIB_SPEC} ${TK_LIBS}"
>
> Using tcl8.4a1 and tk8.4a1 one gets for a shared build on AIX from the
> TclTk configure code:
>
>     if test "$using_gcc" = "yes" ; then
>         TCL_BUILD_LIB_SPEC="-Wl,-bI:`pwd`/${TCL_BUILD_EXP_FILE} -L`pwd`"
>         TCL_LIB_SPEC="-Wl,-bI:${exec_prefix}/lib/${TCL_EXP_FILE} -L`pwd`"

... which is wrong, BTW:  TCL_LIB_SPEC should refer to ${exec_prefix}/lib
not `pwd` ...

>     else
>         TCL_BUILD_LIB_SPEC="-bI:`pwd`/${TCL_BUILD_EXP_FILE}"
>         TCL_LIB_SPEC="-bI:${exec_prefix}/lib/${TCL_EXP_FILE}"
>     fi
>
>    TK_LIB_SPEC="-bI:${exec_prefix}/lib/${TK_EXP_FILE}"
>
> So the TclTk maintainers in their infinite wisdom have caught the gcc
> case for tcl but not for tk.

That would explain why Tcl/Tk compiles with Aix's cc but not gcc.

>
> I therefore suggest the following.
>
> * Can you try replacing
>
>       TCLTK_LIBS="${TCLTK_LIBS} ${TK_LIB_SPEC} ${TK_LIBS}"
>
>   in m4/R.m4 by
>
>       TCLTK_LIBS="${TCLTK_LIBS} ${wl}${TK_LIB_SPEC} ${TK_LIBS}"
>
>   and see if that works?  (You will have to configure using
>   --enable-maintainer-mode to get configure rebuilt.  Or, you could
>   simply edit configure.)  By `works' I mean under both gcc and cc.

I changed configure since I don't have autoconf etc. installed.
Your solution works when compiling with gcc! I haven't tried cc yet but will
do so tomorrow.

> * If so, this is the short-term fix we could go for.  If not, we may
>   need to infer wl for non-gcc from libtool, which is doable.
>
> * It may be useful to report the discrepancy to the TclTk maintainers.

I'll try to compile tcl and tk with gcc and send in reports.

> * Provided they fix the problem, we need to think about better
>   strategies.  (Something like if wl is not the empty string and
>   TK_LIB_SPEC does not start with it then add it as prefix.)  But let us
>   not worry about this now.

Do you really want to go this way?  Is AIX the only OS where you can run
into this kind of trouble?  If so, why not add a compilation of a little
test program  in configure in case you have os==AIX, that would use the same
flags that you'll use in library/src/tcltk.c?  If that fails, it's flagged
early on and directly points to the tcl/tk installation (and not to R).

Thanks,
  -tom

--
Email: vogels@cmu.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug  2 07:19:35 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 2 Aug 2001 08:19:35 +0200
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <NFBBKIAHMMCHOBIBLMMPMEBPCAAA.tov@ece.cmu.edu>
References: <15207.50464.266507.281379@mithrandir.hornik.net>
 <NFBBKIAHMMCHOBIBLMMPMEBPCAAA.tov@ece.cmu.edu>
Message-ID: <15208.61687.130864.413709@mithrandir.hornik.net>

>>>>> Thomas J Vogels writes:

> Excerpt from email by Kurt Hornik:
>>>> On second thought: the comment in tkConfig.sh says
>>>> 
>>>> # String to pass to linker to pick up the Tk library from its
>>>> # installed directory.
>>>> TK_LIB_SPEC='@TK_LIB_SPEC@'
>>>> 
>>>> so maybe this assumes to be called by ld directly ...

> I think you're right with this assumption, but sadly, the current
> devel release for tcl/tk 8.4a2 is broken--even the maintainers of
> tcl/tk don't know how they want to handle TK_LIB_SPEC, TK_LIBS and
> friends!  When I tried to compile Tk it failed for 'wish'.  I'll check
> out how to file bug reports against tcl/tk...

[Well getting AIX right is not that easy.  Fortunately, R has Tom Vogels
to help ...]

>>>> 
>>>> What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?
>> 
>>> hell breaks loose.  TK_LIB_SPEC contains '-bI/some/path/libtk8.3.exp'
>>> which is needed badly when linking on AIX.
>> 
>> Argh.  After sinking some more time into this ... here's what happens.
>> 
>> Assuming that both tclConfig.sh and tkConfig.sh are found, we do
>> 
>> TCLTL_LIBS="${TCL_LIB_SPEC} ${TK_LIB_SPEC} ${TK_LIBS}"
>> 
>> Using tcl8.4a1 and tk8.4a1 one gets for a shared build on AIX from the
>> TclTk configure code:
>> 
>> if test "$using_gcc" = "yes" ; then
>> TCL_BUILD_LIB_SPEC="-Wl,-bI:`pwd`/${TCL_BUILD_EXP_FILE} -L`pwd`"
>> TCL_LIB_SPEC="-Wl,-bI:${exec_prefix}/lib/${TCL_EXP_FILE} -L`pwd`"

> ... which is wrong, BTW:  TCL_LIB_SPEC should refer to
> ${exec_prefix}/lib not `pwd` ...

You mean in the `-L' part?  Certainly correct ...

>> else
>> TCL_BUILD_LIB_SPEC="-bI:`pwd`/${TCL_BUILD_EXP_FILE}"
>> TCL_LIB_SPEC="-bI:${exec_prefix}/lib/${TCL_EXP_FILE}"
>> fi
>> 
>> TK_LIB_SPEC="-bI:${exec_prefix}/lib/${TK_EXP_FILE}"
>> 
>> So the TclTk maintainers in their infinite wisdom have caught the gcc
>> case for tcl but not for tk.

> That would explain why Tcl/Tk compiles with Aix's cc but not gcc.

Yep.

>> 
>> I therefore suggest the following.
>> 
>> * Can you try replacing
>> 
>> TCLTK_LIBS="${TCLTK_LIBS} ${TK_LIB_SPEC} ${TK_LIBS}"
>> 
>> in m4/R.m4 by
>> 
>> TCLTK_LIBS="${TCLTK_LIBS} ${wl}${TK_LIB_SPEC} ${TK_LIBS}"
>> 
>> and see if that works?  (You will have to configure using
>> --enable-maintainer-mode to get configure rebuilt.  Or, you could
>> simply edit configure.)  By `works' I mean under both gcc and cc.

> I changed configure since I don't have autoconf etc. installed.  Your
> solution works when compiling with gcc! I haven't tried cc yet but
> will do so tomorrow.

Ok, great.  My assumption/hope is that this should work ...

>> * If so, this is the short-term fix we could go for.  If not, we may
>> need to infer wl for non-gcc from libtool, which is doable.
>> 
>> * It may be useful to report the discrepancy to the TclTk maintainers.

> I'll try to compile tcl and tk with gcc and send in reports.

>> * Provided they fix the problem, we need to think about better
>> strategies.  (Something like if wl is not the empty string and
>> TK_LIB_SPEC does not start with it then add it as prefix.)  But let us
>> not worry about this now.

> Do you really want to go this way?  Is AIX the only OS where you can
> run into this kind of trouble?  If so, why not add a compilation of a
> little test program in configure in case you have os==AIX, that would
> use the same flags that you'll use in library/src/tcltk.c?  If that
> fails, it's flagged early on and directly points to the tcl/tk
> installation (and not to R).

I think I want to go this way.  Reason: the current situation is a
mixture of an R bug and a Tk inconsistency.  The R bug is that I had not
realized that the LIB_SPECs are meant as flags to ld.  The Tk problem is
that this is not true.

The whole thing is a bit tricky, and it might be interesting to see how
e.g. GNOME projects deal with this in their -config scripts.  As this is
hidden inside libtool could you maybe try compiling libxml2 on your AIX
system and see what xml2-config --libs does?

Also, what does
	./libtool --config | grep ^wl
give for configuration with native cc?

In general, the portable way would be to have package config scripts use
$wl or alike.  But that will not do in general: someone could have gcc
but a native C++ compiler and $wl might be different between these ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Aug  2 16:16:16 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Thu, 2 Aug 2001 17:16:16 +0200 (MET DST)
Subject: [Rd] arrows()/log scale/clipping (?) (PR#1039)
Message-ID: <200108021516.RAA27588@pubhealth.ku.dk>


   arrows() seems to hang when either x or y scale of the plot
is logarithmic and the arrows requested go beyond the plot
(by more than a certain amount).  I didn't go into C code to
find it, but here's a function that exercises the bug a bit ...

arrow.bug2 <- function(y0=1,y1=10,log="y") {
  plot(c(0.1,1),c(1,10),log=log)
  arrows(x0=0.5,
         y0=y0,
         x1=0.5,
         y1=y1,
         length=0.05,angle=90)
}

arrow.bug2() ## OK
arrow.bug2(log="x") ## OK
arrow.bug2(y0=0.01)  ##hangs
arrow.bug2(y1=11)  ## OK
arrow.bug2(y1=20)  ## hangs
arrow.bug2(log="x",y1=20) ## hangs


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

Permanent address: Zoology Department, University of Florida
bolker@zoo.ufl.edu (352) 392-5697


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  2 18:52:20 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Aug 2001 19:52:20 +0200
Subject: [Rd] arrows()/log scale/clipping (?) (PR#1039)
In-Reply-To: bolker@zoo.ufl.edu's message of "Thu, 2 Aug 2001 17:16:16 +0200 (MET DST)"
References: <200108021516.RAA27588@pubhealth.ku.dk>
Message-ID: <x21ymumjsb.fsf@blueberry.kubism.ku.dk>

bolker@zoo.ufl.edu writes:

>    arrows() seems to hang when either x or y scale of the plot
> is logarithmic and the arrows requested go beyond the plot
> (by more than a certain amount).  I didn't go into C code to
> find it, but here's a function that exercises the bug a bit ...
> 
> arrow.bug2 <- function(y0=1,y1=10,log="y") {
>   plot(c(0.1,1),c(1,10),log=log)
>   arrows(x0=0.5,
>          y0=y0,
>          x1=0.5,
>          y1=y1,
>          length=0.05,angle=90)
> }
> 
> arrow.bug2() ## OK
> arrow.bug2(log="x") ## OK
> arrow.bug2(y0=0.01)  ##hangs
> arrow.bug2(y1=11)  ## OK
> arrow.bug2(y1=20)  ## hangs
> arrow.bug2(log="x",y1=20) ## hangs

This is gone in the development version. Didn't we have a very similar
report quite recently??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vogels@cmu.edu  Fri Aug  3 04:16:28 2001
From: vogels@cmu.edu (Thomas J Vogels)
Date: Thu, 2 Aug 2001 23:16:28 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <15208.61687.130864.413709@mithrandir.hornik.net>
Message-ID: <NFBBKIAHMMCHOBIBLMMPOECACAAA.tov@ece.cmu.edu>

Kurt,

here is the update:  With your change in TCLTK_LIBS
TCLTK_LIBS="${TCLTK_LIBS} ${wl}${TK_LIB_SPEC} ${TK_LIBS}"
I can compile with both cc and gcc:

-- using no CC in config.site I'll get gcc and compilation proceeds nicely.

-- using CC=cc in config.site forces compilation with cc and compilation
proceeds with warnings for all modules. E.g. for X11 I get the following:

       cc -Wl,-bM:SRE -Wl,-H512 -Wl,-T512 -Wl,-bnoentry       -Wl,-bexpall
-Wl,-bI:../../../etc/R.exp  -o R_X11.so  dataentry.lo devX11.lo rotated.lo
rbitmap.lo -lSM -lICE -lX11  -L/home/tov/opt/z/lib -L/home/tov/opt/z/lib  -l
dl -lm -lc
cc: 1501-218 file dataentry.lo contains an incorrect file suffix
cc: 1501-218 file devX11.lo contains an incorrect file suffix
cc: 1501-218 file rotated.lo contains an incorrect file suffix
cc: 1501-218 file rbitmap.lo contains an incorrect file suffix

-- Note that I can't just use LIBS and CPPFLAGS to set up the paths to Tcl
and Tk (as in LIBS=-L/home/tov/opt/lib and CPPFLAGS=-I/home/tov/opt/include)
since configure will try compile with -ltcl, i.e. without version number and
so doesn't find libtcl8.4.so.  Use of --with-tcltk=/home/tov/opt/lib works.
(Applies to both, cc and gcc)

-- With CC=cc I get warnings about /usr/include/stdarg.h and
/usr/include/varargs.h stepping on each other's toes with macro
re-definitions.

Excerpt form Kurt Hornik's email from Thursday, August 02, 2001 1:20 AM:

>> Do you really want to go this way?  Is AIX the only OS where you can
>> run into this kind of trouble?  If so, why not add a compilation of a
>> little test program in configure in case you have os==AIX, that would
>> use the same flags that you'll use in library/src/tcltk.c?  If that
>> fails, it's flagged early on and directly points to the tcl/tk
>> installation (and not to R).
>
> I think I want to go this way.  Reason: the current situation is a
> mixture of an R bug and a Tk inconsistency.  The R bug is that I had not
> realized that the LIB_SPECs are meant as flags to ld.  The Tk problem is
> that this is not true.
>
> The whole thing is a bit tricky, and it might be interesting to see how
> e.g. GNOME projects deal with this in their -config scripts.  As this is
> hidden inside libtool could you maybe try compiling libxml2 on your AIX
> system and see what xml2-config --libs does?

What and where is xml2?


> Also, what does
> 	./libtool --config | grep ^wl
> give for configuration with native cc?

With cc: wl=""
With gcc: wl="-Wl,"

>
> In general, the portable way would be to have package config scripts use
> $wl or alike.  But that will not do in general: someone could have gcc
> but a native C++ compiler and $wl might be different between these ...

Interestingly I saw today in Tk's configure:

case $SHLIB_LD in
   *ld*)
      TK_LD_SEARCH_FLAGS=`echo ${TK_CC_SEARCH_FLAGS} |sed -e "s|-Wl,||g" -e
"s|,| |g"`
      ;;
    *)
      TK_LD_SEARCH_FLAGS="${TK_CC_SEARCH_FLAGS}"
      ;;
esac

So they thought about throwing out the -Wl when calling the linker with
flags meant for the compiler.  I think you could turn that around and
add -Wl for linker flags that you pass to the compiler.  (My point being
that the echo&sed combination is saver than just prefixing a variable with
${wl}.)

Thanks,
  -tom

--
Email: vogels@cmu.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From possolo@crd.ge.com  Fri Aug  3 16:04:59 2001
From: possolo@crd.ge.com (possolo@crd.ge.com)
Date: Fri, 3 Aug 2001 17:04:59 +0200 (MET DST)
Subject: [Rd] String Length Limit (PR#1040)
Message-ID: <200108031504.RAA05722@pubhealth.ku.dk>

Full_Name: Antonio Possolo
Version: 1.3.0
OS: Linux
Submission from: (NULL) (192.35.44.3)


If one attempts to read a character string from a file using scan,
and the string comprises more than 8190 characters, then the string
is truncated to this length, and no warning is issued.

I've observed this both in the Linux and Win implementations of R 1.3.0.
S-PLUS (v. 6.0 rel. 1 for Sun SPARC0 does not suffer from this behavior. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  3 16:50:18 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 3 Aug 2001 17:50:18 +0200 (MET DST)
Subject: [Rd] String Length Limit (PR#1040)
Message-ID: <200108031550.RAA05929@pubhealth.ku.dk>

On Fri, 3 Aug 2001 possolo@crd.ge.com wrote:

> Full_Name: Antonio Possolo
> Version: 1.3.0
> OS: Linux
> Submission from: (NULL) (192.35.44.3)
>
>
> If one attempts to read a character string from a file using scan,
> and the string comprises more than 8190 characters, then the string
> is truncated to this length, and no warning is issued.
>
> I've observed this both in the Linux and Win implementations of R 1.3.0.
> S-PLUS (v. 6.0 rel. 1 for Sun SPARC0 does not suffer from this behavior.

Yes, that's an R limitation.  Why is it a problem?  I think you would
do better using readLines if it is a line-oriented file.  AFAIK that is
unlimited.

It would be easy to issue a warning, quite a bit harder to remove the limit
(which dates from the days when character strings were in most places
limited to 8191 chars).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Aug  4 15:06:12 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Aug 2001 16:06:12 +0200
Subject: [Rd] Next release of R, August 31st
Message-ID: <x2ae1f3oob.fsf@blueberry.kubism.ku.dk>


I'm trying to make a habit of announcing upcoming releases on r-devel,
to give package maintainers a chance of staying in sync, and to
encourage everyone to report bugs in the prerelease versions.

So: R-1.3.1 is scheduled for release on August 31st. In order to be
able to get a solid round of testing on different platforms,
maintainers of the group of recommended packages are requested to
respect a feature freeze starting on August 24th. This means that only
critical bugfixes should go into these packages. The list of
recommended packages are (hope I didn't forget any...)

  KernSmooth
  VR
  boot
  cluster
  foreign
  nlme
  rpart
  survival
  mgcv

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Sat Aug  4 17:04:41 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Sat, 4 Aug 2001 12:04:41 -0400
Subject: [Rd] Summary: too many arguments in foreign function call
Message-ID: <01080412044100.16791@haplo>


> John M. Chambers <jmc@bell-labs.com> wrote:
>
[snip]
> 
> Empirical evidence is that the limit in S-Plus is 128. (The call 
> manyArgs(N) constructs a .C with N arguments to a C routine (with 200 
> arguments)). 

OK.  I've modifed my patch to bring R's limits to 128, the same as in S-Plus, 
as well as noting that this is the limit in Foreign.Rd.   I suppose that this 
limit is as good as any, and at least means that code written and tested with 
S-Plus won't have to be changed to work with R and vice versa (at least for 
this reason). 

The patch has been uploaded to 
ftp://cran.r-project.org/incoming/dotcall_128.gz

(I hope this will make it into R-1.3.1)

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From martin.lenze@to.com  Sun Aug  5 19:03:32 2001
From: martin.lenze@to.com (martin.lenze@to.com)
Date: Sun, 5 Aug 2001 20:03:32 +0200 (MET DST)
Subject: [Rd] xtabs, drop.unused.levels (PR#1041)
Message-ID: <200108051803.UAA11343@pubhealth.ku.dk>

Full_Name: Martin Lenze
Version: 1.3.0 22.06.2001
OS: win32,x86
Submission from: (NULL) (194.221.251.1)


As a newbie I'm not sure, whether this is a bug, but I don't know how to get
around this behaviour:
> x <- list("A"=rep(c(1:5),30),
+ "B"=c(rep(letters[1:3],30),rep(letters[2:4],20)))
> y <- as.data.frame(x)
> xtabs(~A+B,y)
   B
A   a  b  c d
  1 6 10 10 4
  2 6 10 10 4
  3 6 10 10 4
  4 6 10 10 4
  5 6 10 10 4
> y <- subset(y,B!="d")
> xtabs(~A+B,y,drop.unused.levels=TRUE)
   B
A   a  b  c d
  1 6 10 10 0
  2 6 10 10 0
  3 6 10 10 0
  4 6 10 10 0
  5 6 10 10 0

I'd expect "xtabs" to drop "d".

Kindest regards
M. Lenze


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Aug  5 19:43:52 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Aug 2001 20:43:52 +0200
Subject: [Rd] xtabs, drop.unused.levels (PR#1041)
In-Reply-To: martin.lenze@to.com's message of "Sun, 5 Aug 2001 20:03:32 +0200 (MET DST)"
References: <200108051803.UAA11343@pubhealth.ku.dk>
Message-ID: <x2puaal53r.fsf@blueberry.kubism.ku.dk>

martin.lenze@to.com writes:

> > y <- subset(y,B!="d")
> > xtabs(~A+B,y,drop.unused.levels=TRUE)
>    B
> A   a  b  c d
>   1 6 10 10 0
>   2 6 10 10 0
>   3 6 10 10 0
>   4 6 10 10 0
>   5 6 10 10 0
> 
> I'd expect "xtabs" to drop "d".

Yes, that's a bug. The culprit is

  do.call("table", mf)

using "mf" rather than "by" which was carefully computed to handle
drop.unused.levels a couple of lines above.

Actually, I think that table(by) would work just as well (and look better).

(A quick workaround could be y$B <- factor(y$B))
 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug  5 19:34:45 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 5 Aug 2001 19:34:45 +0100 (BST)
Subject: [Rd] xtabs, drop.unused.levels (PR#1041)
In-Reply-To: <200108051803.UAA11343@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0108051930230.12342-100000@auk.stats>

On Sun, 5 Aug 2001 martin.lenze@to.com wrote:

> Full_Name: Martin Lenze
> Version: 1.3.0 22.06.2001
> OS: win32,x86
> Submission from: (NULL) (194.221.251.1)
>
>
> As a newbie I'm not sure, whether this is a bug, but I don't know how to get
> around this behaviour:
> > x <- list("A"=rep(c(1:5),30),
> + "B"=c(rep(letters[1:3],30),rep(letters[2:4],20)))
> > y <- as.data.frame(x)
> > xtabs(~A+B,y)
>    B
> A   a  b  c d
>   1 6 10 10 4
>   2 6 10 10 4
>   3 6 10 10 4
>   4 6 10 10 4
>   5 6 10 10 4
> > y <- subset(y,B!="d")
> > xtabs(~A+B,y,drop.unused.levels=TRUE)
>    B
> A   a  b  c d
>   1 6 10 10 0
>   2 6 10 10 0
>   3 6 10 10 0
>   4 6 10 10 0
>   5 6 10 10 0
>
> I'd expect "xtabs" to drop "d".

The line

    x <- if (is.null(y))
        do.call("table", mf)

should be

    x <- if (is.null(y))
        do.call("table", by)

Currently drop.unused.levels=TRUE is ignored unless there is a response.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Mon Aug  6 01:29:00 2001
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Mon, 6 Aug 2001 12:29:00 +1200
Subject: [Rd] arrows()/log scale/clipping (?) (PR#1039)
References: <200108021516.RAA27588@pubhealth.ku.dk> <x21ymumjsb.fsf@blueberry.kubism.ku.dk>
Message-ID: <013201c11e0e$c9fbc3a0$175dd882@stat.auckland.ac.nz>

Hi


> >    arrows() seems to hang when either x or y scale of the plot
> > is logarithmic and the arrows requested go beyond the plot
> > (by more than a certain amount).  I didn't go into C code to
> > find it, but here's a function that exercises the bug a bit ...
> >
> > arrow.bug2 <- function(y0=1,y1=10,log="y") {
> >   plot(c(0.1,1),c(1,10),log=log)
> >   arrows(x0=0.5,
> >          y0=y0,
> >          x1=0.5,
> >          y1=y1,
> >          length=0.05,angle=90)
> > }
> >
> > arrow.bug2() ## OK
> > arrow.bug2(log="x") ## OK
> > arrow.bug2(y0=0.01)  ##hangs
> > arrow.bug2(y1=11)  ## OK
> > arrow.bug2(y1=20)  ## hangs
> > arrow.bug2(log="x",y1=20) ## hangs
>
> This is gone in the development version. Didn't we have a very similar
> report quite recently??


Yes.  There was a bug in the line-clipping code (which I presume is what
this code is tickling), which has been fixed for 1.3.1

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From martin.lenze@to.com  Mon Aug  6 10:04:33 2001
From: martin.lenze@to.com (Martin Lenze)
Date: Mon, 6 Aug 2001 11:04:33 +0200 (W. Europe Daylight Time)
Subject: [Rd] xtabs, drop.unused.levels (PR#1041)
In-Reply-To: <Pine.GSO.4.31.0108051930230.12342-100000@auk.stats>
Message-ID: <Pine.WNT.4.33.0108061059070.740-100000@lt-ml>


Many, many thanks for your answers, especially within this astonishing
timeframe.

Your solutions worked well. I changed the lines pointed out in
<R-HOME>/library/R/base and now it works as expedted.

Hopefully I'll be able to track down such mistakes myself sometimes.

with kindest regards
Martin Lenze

-------------------------------------------------------
martin.lenze@to.com, http://www.to.com/
Thinking Objects Software GmbH
Lilienthalstr. 2, 70825 Stuttgart-Korntal, Germany
office +49 711 88770-400, fax +49 711 88770-449
mobile +49 170 7917721, home +49 6221 618036


On Sun, 5 Aug 2001, Prof Brian D Ripley wrote:

PBDR>Date: Sun, 5 Aug 2001 19:34:45 +0100 (BST)
PBDR>From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
PBDR>To: martin.lenze@to.com
PBDR>Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
PBDR>Subject: Re: [Rd] xtabs, drop.unused.levels (PR#1041)
PBDR>
PBDR>On Sun, 5 Aug 2001 martin.lenze@to.com wrote:
PBDR>
PBDR>> Full_Name: Martin Lenze
PBDR>> Version: 1.3.0 22.06.2001
PBDR>> OS: win32,x86
PBDR>> Submission from: (NULL) (194.221.251.1)
PBDR>>
PBDR>>
PBDR>> As a newbie I'm not sure, whether this is a bug, but I don't know how to get
PBDR>> around this behaviour:
PBDR>> > x <- list("A"=rep(c(1:5),30),
PBDR>> + "B"=c(rep(letters[1:3],30),rep(letters[2:4],20)))
PBDR>> > y <- as.data.frame(x)
PBDR>> > xtabs(~A+B,y)
PBDR>>    B
PBDR>> A   a  b  c d
PBDR>>   1 6 10 10 4
PBDR>>   2 6 10 10 4
PBDR>>   3 6 10 10 4
PBDR>>   4 6 10 10 4
PBDR>>   5 6 10 10 4
PBDR>> > y <- subset(y,B!="d")
PBDR>> > xtabs(~A+B,y,drop.unused.levels=TRUE)
PBDR>>    B
PBDR>> A   a  b  c d
PBDR>>   1 6 10 10 0
PBDR>>   2 6 10 10 0
PBDR>>   3 6 10 10 0
PBDR>>   4 6 10 10 0
PBDR>>   5 6 10 10 0
PBDR>>
PBDR>> I'd expect "xtabs" to drop "d".
PBDR>
PBDR>The line
PBDR>
PBDR>    x <- if (is.null(y))
PBDR>        do.call("table", mf)
PBDR>
PBDR>should be
PBDR>
PBDR>    x <- if (is.null(y))
PBDR>        do.call("table", by)
PBDR>
PBDR>Currently drop.unused.levels=TRUE is ignored unless there is a response.
PBDR>
PBDR>--
PBDR>Brian D. Ripley,                  ripley@stats.ox.ac.uk
PBDR>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
PBDR>University of Oxford,             Tel:  +44 1865 272861 (self)
PBDR>1 South Parks Road,                     +44 1865 272860 (secr)
PBDR>Oxford OX1 3TG, UK                Fax:  +44 1865 272595
PBDR>
PBDR>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  6 17:08:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 6 Aug 2001 17:08:17 +0100 (BST)
Subject: [Rd] String Length Limit (PR#1040)
In-Reply-To: <200108031504.RAA05722@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0108061703440.8289-100000@gannet.stats>

On Fri, 3 Aug 2001 possolo@crd.ge.com wrote:

> Full_Name: Antonio Possolo
> Version: 1.3.0
> OS: Linux
> Submission from: (NULL) (192.35.44.3)
>
>
> If one attempts to read a character string from a file using scan,
> and the string comprises more than 8190 characters, then the string
> is truncated to this length, and no warning is issued.
>
> I've observed this both in the Linux and Win implementations of R 1.3.0.
> S-PLUS (v. 6.0 rel. 1 for Sun SPARC) does not suffer from this behavior.

Although readLines is normally to be preferred (in R and S-PLUS 6: it's a
lot faster for a start), we've fixed this so that scan() in

R 1.3.1 will give a warning
R 1.4.0 will allow unlimited lines (unlimited by R, that is).

As ever, previews are in r-patched and r-devel (tar bundles/rysnc)
respectively.

The 1.4.0 version needed quite a lot of re-writing of code, too much for a
patch release.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayan@stat.wisc.edu  Mon Aug  6 21:06:30 2001
From: deepayan@stat.wisc.edu (Deepayan Sarkar)
Date: Mon, 6 Aug 2001 15:06:30 -0500 (CDT)
Subject: [Rd] panel.loess
Message-ID: <Pine.LNX.4.21.0108061454500.25605-100000@gstat203.stat.wisc.edu>


Hi, 

I'm not sure what the recommended thing to do here would be:

In the lattice library, panel.loess needs to use loess.smooth(), which is
in the modreg library. Now should I 

(1) make lattice depend on modreg, and call require(modreg) in zzz.R

OR

(2) use autoload("loess", "modreg")

I like the second option better, as a particular session might not need
panel.loess. Are there any general guidelines, or any other possibilities?

Also, should I include modreg on the `depends' line in DESCRIPTION ? 

- Deepayan



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Tue Aug  7 06:15:05 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue, 7 Aug 2001 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200108070515.HAA08059@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400

Directory:  Language

* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)

Directory:  Macintosh

* PR# 1023 *
Subject: data function
From: wild@stat.auckland.ac.nz
Date: Fri, 13 Jul 2001 02:48:53 +0200 (MET DST)
--Mac-specific
* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Madrake 8.0, not 7.2
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1041 *
Subject: xtabs, drop.unused.levels
From: martin.lenze@to.com
Date: Sun, 5 Aug 2001 20:03:30 +0200 (MET DST)
* PR# 1040 *
Subject: String Length Limit
From: possolo@crd.ge.com
Date: Fri, 3 Aug 2001 17:04:58 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Aug  7 06:45:31 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 7 Aug 2001 07:45:31 +0200
Subject: [Rd] panel.loess
In-Reply-To: <Pine.LNX.4.21.0108061454500.25605-100000@gstat203.stat.wisc.edu>
References: <Pine.LNX.4.21.0108061454500.25605-100000@gstat203.stat.wisc.edu>
Message-ID: <15215.32891.785583.349785@mithrandir.hornik.net>

>>>>> Deepayan Sarkar writes:

> Hi, 

> I'm not sure what the recommended thing to do here would be:

> In the lattice library, panel.loess needs to use loess.smooth(), which is
> in the modreg library. Now should I 

> (1) make lattice depend on modreg, and call require(modreg) in zzz.R

> OR

> (2) use autoload("loess", "modreg")

> I like the second option better, as a particular session might not
> need panel.loess. Are there any general guidelines, or any other
> possibilities?

No strong preference.

> Also, should I include modreg on the `depends' line in DESCRIPTION ?

In either case, yes.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug  7 13:10:55 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2001 14:10:55 +0200
Subject: [Rd] bugs.r-project.org down for a while
Message-ID: <x2elqot6i8.fsf@blueberry.kubism.ku.dk>


The bug repository will be down briefly (I hope), due to a hardware
upgrade.   

	-p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Tue Aug  7 14:17:52 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Tue, 07 Aug 2001 09:17:52 -0400
Subject: [Rd] Next release of R, August 31st
References: <x2ae1f3oob.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B6FEA80.EE667BEF@umsanet.edu.bo>

Hola!

A problem I have had for some versions now: When using R html help,
different browsers are started on different machines. On one machine, it
starts the opera browser, where html search not functions. On my home
machine (with a new version of win98), it insists on starting M$
internet
explorer, even though netscape is defined as default (when cliking on
the relevant help files in "explorador de windows", netscape opens). On
still
another machine, we have two different versions of netscape installed
(4.7 and 6.?, ?), and R insist on using the old version. Would
there be a good idea to define browser as an option(), so the exact
location of the .exe can be defined?

Thanks, Kjetil.

Peter Dalgaard BSA wrote:
> 
> I'm trying to make a habit of announcing upcoming releases on r-devel,
> to give package maintainers a chance of staying in sync, and to
> encourage everyone to report bugs in the prerelease versions.
> 
> So: R-1.3.1 is scheduled for release on August 31st. In order to be
> able to get a solid round of testing on different platforms,
> maintainers of the group of recommended packages are requested to
> respect a feature freeze starting on August 24th. This means that only
> critical bugfixes should go into these packages. The list of
> recommended packages are (hope I didn't forget any...)
> 
>   KernSmooth
>   VR
>   boot
>   cluster
>   foreign
>   nlme
>   rpart
>   survival
>   mgcv
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  7 14:27:43 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 7 Aug 2001 14:27:43 +0100 (BST)
Subject: [Rd] Next release of R, August 31st
In-Reply-To: <3B6FEA80.EE667BEF@umsanet.edu.bo>
Message-ID: <Pine.LNX.4.31.0108071423490.11379-100000@gannet.stats>

On Tue, 7 Aug 2001, kjetil halvorsen wrote:

> Hola!
>
> A problem I have had for some versions now: When using R html help,
> different browsers are started on different machines. On one machine, it
> starts the opera browser, where html search not functions.

(Should do if Java support is installed: did when I tested.)

On my home
> machine (with a new version of win98), it insists on starting M$
> internet
> explorer, even though netscape is defined as default (when cliking on
> the relevant help files in "explorador de windows", netscape opens). On
> still
> another machine, we have two different versions of netscape installed
> (4.7 and 6.?, ?), and R insist on using the old version. Would
> there be a good idea to define browser as an option(), so the exact
> location of the .exe can be defined?

No. It's done by the OS facilities, and launches whichever browser is set
via the file associations (that is if you double-click on a .html file).
There is no way to do this via .exe's (which is why Unix R is tied to
Netscape 4.x).

This works here correctly for IE or Netscape on lots of different
machines.  You need to get your file associations sorted out.  Sorry, but
it is a Windows issue: we just use the official calls.

>
> Thanks, Kjetil.
>
> Peter Dalgaard BSA wrote:
> >
> > I'm trying to make a habit of announcing upcoming releases on r-devel,
> > to give package maintainers a chance of staying in sync, and to
> > encourage everyone to report bugs in the prerelease versions.
> >
> > So: R-1.3.1 is scheduled for release on August 31st. In order to be
> > able to get a solid round of testing on different platforms,
> > maintainers of the group of recommended packages are requested to
> > respect a feature freeze starting on August 24th. This means that only
> > critical bugfixes should go into these packages. The list of
> > recommended packages are (hope I didn't forget any...)
> >
> >   KernSmooth
> >   VR
> >   boot
> >   cluster
> >   foreign
> >   nlme
> >   rpart
> >   survival
> >   mgcv
> >
> > --
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Tue Aug  7 18:05:27 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Tue, 07 Aug 2001 13:05:27 -0400
Subject: [Rd] Next release of R, August 31st
References: <Pine.LNX.4.31.0108071423490.11379-100000@gannet.stats>
Message-ID: <3B701FD7.3693B5CC@umsanet.edu.bo>



Prof Brian Ripley wrote:
> 
> On Tue, 7 Aug 2001, kjetil halvorsen wrote:
> 
> > Hola!
> >
> > A problem I have had for some versions now: When using R html help,
> > different browsers are started on different machines. On one machine, it
> > starts the opera browser, where html search not functions.
> 
> (Should do if Java support is installed: did when I tested.)

	Ill try again
> 
> On my home
> > machine (with a new version of win98), it insists on starting M$
> > internet
> > explorer, even though netscape is defined as default (when cliking on
> > the relevant help files in "explorador de windows", netscape opens).

On that macvhine, the file associations is set to netscape, and all
other ways to open a browser opens netscape, but R insists on
opening M$ internet explorer.

Kjetil.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  7 18:14:26 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 7 Aug 2001 18:14:26 +0100 (BST)
Subject: [Rd] Next release of R, August 31st
In-Reply-To: <3B701FD7.3693B5CC@umsanet.edu.bo>
Message-ID: <Pine.GSO.4.31.0108071809150.13622-100000@toucan.stats>

On Tue, 7 Aug 2001, kjetil halvorsen wrote:

>
>
> Prof Brian Ripley wrote:
> >
> > On Tue, 7 Aug 2001, kjetil halvorsen wrote:
> >
> > > Hola!
> > >
> > > A problem I have had for some versions now: When using R html help,
> > > different browsers are started on different machines. On one machine, it
> > > starts the opera browser, where html search not functions.
> >
> > (Should do if Java support is installed: did when I tested.)
>
> 	Ill try again
> >
> > On my home
> > > machine (with a new version of win98), it insists on starting M$
> > > internet
> > > explorer, even though netscape is defined as default (when cliking on
> > > the relevant help files in "explorador de windows", netscape opens).
>
> On that macvhine, the file associations is set to netscape, and all
> other ways to open a browser opens netscape, but R insists on
> opening M$ internet explorer.

R knows absolutely nothing about this `M$ internet explorer'. It calls
the Windows API call ShellExecute(). Looks like your machine has a corrupt
Registry.

As I said before, R calls the official Windows API call and what happens
then is not our responsibility.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug  7 18:37:12 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2001 19:37:12 +0200
Subject: [Rd] bugs.r-project.org down for a while
In-Reply-To: <x2elqot6i8.fsf@blueberry.kubism.ku.dk>
References: <x2elqot6i8.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2zo9b4vqv.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> The bug repository will be down briefly (I hope), due to a hardware
> upgrade.   

Apparently functional again, and I have no obvious reason to reboot
the system for a while. Let me know if something went wrong.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From htang@hpl.hp.com  Tue Aug  7 20:14:51 2001
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Tue, 7 Aug 2001 21:14:51 +0200 (MET DST)
Subject: [Rd] cannot assign to NULL dimnames (PR#1042)
Message-ID: <200108071914.VAA01546@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.3.0
OS: GNU/Linux (Debian unstable)
Submission from: (NULL) (192.6.19.124)


Hi all,

    I am not sure this is a bug rather than an intentional design, but here
goes:
If I do

> a <- matrix(1:4, nrow=2)
> dimnames(a)[[1]] <- c("a", "b")

I get the following error message because dimnames(a) is NULL:

Error: more elements supplied than there are to replace

What is the proper way to do this?  I know this works:

> dimnames(a) <- list(c("a", "b"), NULL)

   Incidentally, in SPlus, I can assign to NULL dimnames.

Thanks,
Hsiu-Khuern.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  7 20:33:10 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 Aug 2001 21:33:10 +0200 (MET DST)
Subject: [Rd] cannot assign to NULL dimnames (PR#1042)
Message-ID: <200108071933.VAA01601@pubhealth.ku.dk>

On Tue, 7 Aug 2001 htang@hpl.hp.com wrote:

> Full_Name: Hsiu-Khuern Tang
> Version: 1.3.0
> OS: GNU/Linux (Debian unstable)
> Submission from: (NULL) (192.6.19.124)
>
>
> Hi all,
>
>     I am not sure this is a bug rather than an intentional design, but here
> goes:

None of the above.

> If I do
>
> > a <- matrix(1:4, nrow=2)
> > dimnames(a)[[1]] <- c("a", "b")
>
> I get the following error message because dimnames(a) is NULL:
>
> Error: more elements supplied than there are to replace

Which is a correct error message.

> What is the proper way to do this?

rownames(a) <- c("a", "b")


> I know this works:
>
> > dimnames(a) <- list(c("a", "b"), NULL)
>
>    Incidentally, in SPlus, I can assign to NULL dimnames.


Really?  Your own example fails in the versions I have to hand:

S-PLUS 3.4 gives

> dimnames(a)[[1]] <- c("a", "b")
Error in dimnames(a) <- .A0: data of mode character can't be used as
dimnames
        (need a list)
In addition: Warning messages:
  Replacement length not a multiple of number of elements to replace in:
.A0[[1
        ]] <- .A1
Dumped

and S-PLUS 6.0 gives

> dimnames(a)[[1]] <- c("a", "b")
Problem in dimnames(a) <- .A0: Invalid length (1) for dimnames attribute;
needs to be 2

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From buhr@stat.wisc.edu  Tue Aug  7 21:38:04 2001
From: buhr@stat.wisc.edu (buhr@stat.wisc.edu)
Date: Tue, 7 Aug 2001 22:38:04 +0200 (MET DST)
Subject: [Rd] R 1.3.0 bug: after "y _ 10; x[[1]] _ y", assigning to "y[1]" modifies "x" (PR#1043)
Message-ID: <200108072038.WAA01720@pubhealth.ku.dk>

After a list element has been assigned from a vector variable,
assigments to elements of the original vector variable modify the copy
stored in the list as well.

Here's a transcript illustrating the problem:

        R : Copyright 2001, The R Development Core Team
        Version 1.3.0  (2001-06-22)

        [ . . . ]

        > x _ list()
        > y _ 10
        > x[[1]] _ y
        > x
        [[1]]
        [1] 10

        > y[1] _ 20   # should only modify "y"
        > x
        [[1]]
        [1] 20        # ACK!  we modified "x", too

        > 

Kevin <buhr@stat.wisc.edu>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pleu@hotmail.com  Tue Aug  7 21:42:08 2001
From: pleu@hotmail.com (pleu@hotmail.com)
Date: Tue, 7 Aug 2001 22:42:08 +0200 (MET DST)
Subject: [Rd] Polymarsall.c (PR#1044)
Message-ID: <200108072042.WAA01762@pubhealth.ku.dk>

Full_Name: Paul Leu
Version: 1.2.3
OS: Windows NT
Submission from: (NULL) (12.2.142.7)


There is a bug in the polymars code.  

Line 655   m=m+k-1;

ought to be moved in front of the for loop in line 652 or else the levels array
will go out of bounds in the loop.

This does not seem to cause any errors in R, but caused crashes when I attempted
to link the file to PV-wave.  

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug  7 21:54:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2001 22:54:53 +0200
Subject: [Rd] R 1.3.0 bug: after "y _ 10; x[[1]] _ y", assigning to "y[1]" modifies "x" (PR#1043)
In-Reply-To: <200108072038.WAA01720@pubhealth.ku.dk>
References: <200108072038.WAA01720@pubhealth.ku.dk>
Message-ID: <x28zgvr3oi.fsf@blueberry.kubism.ku.dk>

buhr@stat.wisc.edu writes:

> After a list element has been assigned from a vector variable,
> assigments to elements of the original vector variable modify the copy
> stored in the list as well.
> 
> Here's a transcript illustrating the problem:
> 
>         R : Copyright 2001, The R Development Core Team
>         Version 1.3.0  (2001-06-22)
> 
>         [ . . . ]
> 
>         > x _ list()
>         > y _ 10
>         > x[[1]] _ y
>         > x
>         [[1]]
>         [1] 10
> 
>         > y[1] _ 20   # should only modify "y"
>         > x
>         [[1]]
>         [1] 20        # ACK!  we modified "x", too
> 
>         > 
> 
> Kevin <buhr@stat.wisc.edu>

Confirmed with 1.3.0-patched on RedHat 7.1. For easier reproduction:

x <- list()
y <- 10
x[[1]] <- y
x
y[1] <- 20   # should only modify "y"
# y <- 20 # Works OK with this instead
x
 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Wed Aug  8 01:08:00 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Tue, 7 Aug 2001 19:08:00 -0500
Subject: [Rd] R 1.3.0 bug: after "y _ 10; x[[1]] _ y", assigning to "y[1]" modifies "x" (PR#1043)
In-Reply-To: <x28zgvr3oi.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Tue, Aug 07, 2001 at 10:54:53PM +0200
References: <200108072038.WAA01720@pubhealth.ku.dk> <x28zgvr3oi.fsf@blueberry.kubism.ku.dk>
Message-ID: <20010807190800.A6993@nokomis.stat.umn.edu>

On Tue, Aug 07, 2001 at 10:54:53PM +0200, Peter Dalgaard BSA wrote:
> buhr@stat.wisc.edu writes:
> 
> Confirmed with 1.3.0-patched on RedHat 7.1. For easier reproduction:
> 
> x <- list()
> y <- 10
> x[[1]] <- y
> x
> y[1] <- 20   # should only modify "y"
> # y <- 20 # Works OK with this instead
> x
>  

Should be fixed.  The particular branch in
subassign.c:SubassignTypeFix did not duplicate the RHS when it is
NAMED--I added that on R-1-3-patches.

I've looked briefly at the subassign code before and had the nagging
feeling that there may be several places where this sort of change is
needed but I haven't had the stomach to look carefully.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Wed Aug  8 03:23:20 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Tue, 7 Aug 2001 21:23:20 -0500
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <87g0bjdbwl.fsf@jeeves.blindglobe.net>
References: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>
 <x2wv4wf10t.fsf@blueberry.kubism.ku.dk>
 <87g0bjdbwl.fsf@jeeves.blindglobe.net>
Message-ID: <15216.41624.175567.86470@sonny.eddelbuettel.com>


[ Sorry for chiming in late, but was off email when this thread started ] 

  "Tony" == A J Rossini <rossini@blindglobe.net> writes:
  Peter> "Peter" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
  Peter> later. Whatever happened to the internal Debian discussions on
  Peter> creating a faster upgrade path for applications?

That is not the real problem. The real problem is (soon, hopefully: was) the
dependency on Atlas in Debian's r-base package, and the lack of Atlas libs
for architectures beyond i386, alpha and sparc. Because of the this, the last
pre-Atlas-as-default remained in the released distribution (aka "stable") as
release are required to contain the same package set across architectures.

However, the Atlas maintainer has a new scheme of defaulting to the blas
library.  Where atlas exists and is installed, it will automagically be used
instead. This way, no architectures should be held back (as blas exists on
almost all) but the main archs can still reap the benefit of fast blas
operations.

  Tony>  They created Woody/testing, which is a broken nightmare.

I could not disagree more. I am running testing on systems at home and work,
and am very, very pleased with it. I prefer this over unstable (where real
blowups occurred in the last few months). And I typically upgrade daily.

  Timothy> face after an apt-get.  Debian has a bad case of SADD (stable
  Timothy> attention deficit disorder).  None of the developers care much
  Timothy> about updating stable.  Its too much fun crashing unstable.  I

Blah. We have over 6000 packages, at least 13 architectures [1] and two
releases to support (as security backports are of course done).  And on top
of that you suggest we backport every package from unstable to stable?

As I said above, the situation with r-base is hopefully going to improve
soon. In the meantime, R packages are available from CRAN, including current
one compiled for "stable"

Dirk


[1] alpha, arm, hppa, hurd-i386, i386, ia64, m68k, mips, mipsel, powerpc,
s390, sh, sparc


-- 
Our mailserver had a hardware failure while we were gone during the 2nd half 
of July. I did not respond to a mail you sent then, or if you experienced a
a mail bounce, could you kindly resend it? Sorry for the inconvenience --Dirk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  8 08:01:07 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 8 Aug 2001 08:01:07 +0100 (BST)
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <15216.41624.175567.86470@sonny.eddelbuettel.com>
Message-ID: <Pine.GSO.4.31.0108080754290.22113-100000@auk.stats>

On Tue, 7 Aug 2001, Dirk Eddelbuettel wrote:

>
> [ Sorry for chiming in late, but was off email when this thread started ]
>
>   "Tony" == A J Rossini <rossini@blindglobe.net> writes:
>   Peter> "Peter" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
>   Peter> later. Whatever happened to the internal Debian discussions on
>   Peter> creating a faster upgrade path for applications?
>
> That is not the real problem. The real problem is (soon, hopefully: was) the
> dependency on Atlas in Debian's r-base package, and the lack of Atlas libs
> for architectures beyond i386, alpha and sparc. Because of the this, the last
> pre-Atlas-as-default remained in the released distribution (aka "stable") as
> release are required to contain the same package set across architectures.

Just for information, can someone tell me how Debian (which has a `i386'
port) can possibly use ATLAS properly?  I find that there are major
performance differences between versions of ATLAS tuned on different
Pentium II chips (PII-450 vs mobile PII-366, for example) so that a large
part of the performance gain goes if they are switched.

Reason for question: I might put out an ATLAS-equipped Windows version of R
if I had any idea how to produce a `i386' version of ATLAS.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Wed Aug  8 12:50:21 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Wed, 8 Aug 2001 06:50:21 -0500
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <Pine.GSO.4.31.0108080754290.22113-100000@auk.stats>
References: <15216.41624.175567.86470@sonny.eddelbuettel.com>
 <Pine.GSO.4.31.0108080754290.22113-100000@auk.stats>
Message-ID: <15217.10109.334750.86058@sonny.eddelbuettel.com>


  Brian>  Just for information, can someone tell me how Debian (which has a
  Brian> `i386' port) can possibly use ATLAS properly?  I find that there are
  Brian> major performance differences between versions of ATLAS tuned on
  Brian> different Pentium II chips (PII-450 vs mobile PII-366, for example)
  Brian> so that a large part of the performance gain goes if they are
  Brian> switched.

That is a problem, just as is cross-compilation. What is provided (for i386)
are three distinct packages for athlon, p3 and p4 sub-architectures.  The
README still advises users to optimise for their particular machines. 

Dirk

-- 
Our mailserver had a hardware failure while we were gone during the 2nd half 
of July. I did not respond to a mail you sent then, or if you experienced a
a mail bounce, could you kindly resend it? Sorry for the inconvenience --Dirk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug  8 18:08:00 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 8 Aug 2001 19:08:00 +0200 (MET DST)
Subject: [Rd] Palette changes on redraw (PR#1045)
Message-ID: <200108081708.TAA11359@pubhealth.ku.dk>

Try this

example(palette)

then trigger a redraw e.g. by resizing the window. Shouldn't the
palette be stored as part of the display list?

(This only happens because the palette was reset at the end of the
example, but still...)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Aug  8 21:37:46 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 09 Aug 2001 08:37:46 +1200
Subject: [Rd] Palette changes on redraw (PR#1045)
References: <200108081708.TAA11359@pubhealth.ku.dk>
Message-ID: <3B71A31A.8BB29F85@stat.auckland.ac.nz>

p.dalgaard@biostat.ku.dk wrote:
> 
> Try this
> 
> example(palette)
> 
> then trigger a redraw e.g. by resizing the window. Shouldn't the
> palette be stored as part of the display list?
> 
> (This only happens because the palette was reset at the end of the
> example, but still...)

I could argue either way on this.

I agree that its nasty to have plot colours change in mid-stream,
but I suspect that adding the palette to the display list may not
be the "right" solution.

A different approach would be to map the colour indices (and names)
to RGB values at a slightly higher level.  That way it would be the
RGB values which would be captured in the display list, not the
indices.

[ I'm afraid that I think that the whole display list mechanism is
  "wrong".  We need a much higher level way of describing plots. ]

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  9 16:44:23 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 9 Aug 2001 16:44:23 +0100 (BST)
Subject: No subject
Message-ID: <Pine.LNX.4.31.0108091640220.8965-100000@gannet.stats>

Philippe Grosjean raised the question of transparency in the context of
writing Windows metafiles, but it has come up before for bitmapped
graphics.

I've taken a look in the sources, and what we do now is inconsistent.
The postscript/xfig/pdf devices do not paint the background iff it is
"white".  All the screen devices always paint the background, as do
the bitmap devices and all the Windows devices (including writing to
metafile and to the printer).

I think this is unsatisfactory, and inconsistent with the way
colour is handled for filled objects (rectangles and circles).
Not painting a white background is also undocumented!

For 1.3.1 I think we should document this, and alter win.metafile and
win.printer to make a white background mean transparent. (I've tested
that, and it works.)

However, for the future (1.4.x), I think we should handle "white" and
"transparent" differently, and have bg default to "transparent" for
all devices.  A quick look shows that this is would be easy, as only
24 bits of the rcolor type are used.  So would there be an objections
to using a bit (or a single value) of the upper byte to denote
"transparent"?  (Actually, Peter D has 0xffffffff in use as invalid,
but that's more bits than are needed.)  For consistency "transparent"
should be an alternative to NA in the fill routines, which means that
the obvious rcolor value is (unsigned) NA_INTEGER.

One question then is what bg="transparent" would mean for a screen
device. I think it should mean "white", but the difference would
emerge if the device was copied.  An alternative for the windows()
device (which can have a canvas larger than the device region) would
be the canvas colour (default grey50).  In that case one might want a
default of "white".

Clearly some thought would be needed to get the png devices to handle
transparency, but it should be doable.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmiddleton@fisheries.gov.fk  Thu Aug  9 21:32:00 2001
From: dmiddleton@fisheries.gov.fk (dmiddleton@fisheries.gov.fk)
Date: Thu, 9 Aug 2001 22:32:00 +0200 (MET DST)
Subject: [Rd] bug (and fix) in seq.POSIXt (PR#1046)
Message-ID: <200108092032.WAA20524@pubhealth.ku.dk>


I can't reach r-project.org at the moment so cannot check whether this
is a known bug.

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    3.0            
year     2001           
month    06             
day      22             
language R


The help page for seq.POSIXt states that the "by" argument can be
specified in several ways, including "A character string, containing one
of "sec", "min", "hour", "day", "week", "month" or "year". This can
optionally be preceded by an integer and a space".  I have found that
preceding the character string by an integer and space only works for
months and years.

The solution (or my solution at any rate) is to change 

        if (valid <= 5) 
            by <- c(1, 60, 3600, 86400, 7 * 86400)[valid]

to

        if (valid <= 5) {
            by <- c(1, 60, 3600, 86400, 7 * 86400)[valid]
	    if (length(by2) == 2) by <- by * as.integer(by2[1])
	}

in the seq.POSIXt code.

Thanks to those who worked to add the DateTimeClasses.  I have only
started making use of these recently, but am finding them very useful.

David Middleton

Dr David A. J. Middleton, Stock Assessment Scientist
Fisheries Department, Falkland Islands Government
Stanley, Falkland Islands
Tel: +500 27260  Fax +500 27265  Email: dmiddleton@fisheries.gov.fk
Web: http://www.falklandislands.com/business/fisheries.htm


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  9 23:21:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Aug 2001 00:21:53 +0200
Subject: [Rd] bug (and fix) in seq.POSIXt (PR#1046)
In-Reply-To: <200108092032.WAA20524@pubhealth.ku.dk>
References: <200108092032.WAA20524@pubhealth.ku.dk>
Message-ID: <x2ofposwla.fsf@blueberry.kubism.ku.dk>

dmiddleton@fisheries.gov.fk writes:

> I can't reach r-project.org at the moment so cannot check whether this
> is a known bug.

You mean bugs.r-project.org (machines in the r-project.org domain are
spread over four different countries or more...).

It's up and running but it seems that communications are being blocked
somewhere along the way. Several nearby webservers are unreachable
too. Looks like a selective block on the HTTP port -- I wouldn't be
surprised if it turns out to be related to the Code Red worm...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 10 07:45:52 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 10 Aug 2001 08:45:52 +0200 (MET DST)
Subject: [Rd] [<-.data.frame bug (PR#1047)
Message-ID: <200108100645.IAA22935@pubhealth.ku.dk>

The following gives an error

test <- df <- data.frame(x=1:10, y=11:20)
test[] <- lapply(df, factor)
Error in "[<-.data.frame"(*tmp*, , value = lapply(df, factor)) : 
        Argument "i" is missing, with no default

It is correct S code, and works in S+3.4 and 6.0.


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian@maths.uwa.edu.au  Fri Aug 10 09:24:05 2001
From: adrian@maths.uwa.edu.au (adrian@maths.uwa.edu.au)
Date: Fri, 10 Aug 2001 10:24:05 +0200 (MET DST)
Subject: [Rd] bug in dummy.coef.lm? (PR#1048)
Message-ID: <200108100824.KAA24354@pubhealth.ku.dk>

Hi - 
I'm running R 1.3.0 on i686-pc-linux-gnu

	> rm(x, y, z)
	> df <- data.frame(x=1:20,y=1:20,z=factor(1:20 <= 10))

dummy.coef falls over:

	> dummy.coef.lm(lm(y ~ z * poly(x,1), data=df))
	Error in poly(x, 1): Object "x" not found
	> dummy.coef.lm(lm(y ~ z * I(x), data=df))
	Error in unique(c("AsIs", class(x))): Object "x" not found

but works OK with:
	> dummy.coef.lm(lm(y ~ z * x, data=df))
	> dummy.coef.lm(lm(y ~ poly(x,1), data=df))
	> dummy.coef.lm(lm(y ~ I(x), data=df))
	
	> x <- df$x
	> y <- df$y
	> z <- df$z
	> dummy.coef.lm(lm(y ~ z * poly(x,1)))
	> dummy.coef.lm(lm(y ~ z * I(x)))

cheers
----
Adrian Baddeley, Mathematics & Statistics, University of Western Australia
		<http://maths.uwa.edu.au/~adrian/>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 10 12:56:02 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 10 Aug 2001 12:56:02 +0100 (BST)
Subject: [Rd] bug in dummy.coef.lm? (PR#1048)
In-Reply-To: <200108100824.KAA24354@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0108101251250.31406-100000@gannet.stats>

On Fri, 10 Aug 2001 adrian@maths.uwa.edu.au wrote:

> Hi -
> I'm running R 1.3.0 on i686-pc-linux-gnu
>
> 	> rm(x, y, z)
> 	> df <- data.frame(x=1:20,y=1:20,z=factor(1:20 <= 10))
>
> dummy.coef falls over:
>
> 	> dummy.coef.lm(lm(y ~ z * poly(x,1), data=df))
> 	Error in poly(x, 1): Object "x" not found
> 	> dummy.coef.lm(lm(y ~ z * I(x), data=df))
> 	Error in unique(c("AsIs", class(x))): Object "x" not found
>
> but works OK with:
> 	> dummy.coef.lm(lm(y ~ z * x, data=df))
> 	> dummy.coef.lm(lm(y ~ poly(x,1), data=df))
> 	> dummy.coef.lm(lm(y ~ I(x), data=df))
>
> 	> x <- df$x
> 	> y <- df$y
> 	> z <- df$z
> 	> dummy.coef.lm(lm(y ~ z * poly(x,1)))
> 	> dummy.coef.lm(lm(y ~ z * I(x)))

Not for me it doesn't ...

This is a known design problem: it's been like it for three years.
I think I know how to solve it ....

Note: ?dummy.coef says

     There will be
     little point in using `dummy.coef' for `contr.treatment'
     contrasts, as the missing coefficients are by definition zero.

and what are the default contrasts in R?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Aug 10 17:49:33 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 10 Aug 2001 09:49:33 -0700 (PDT)
Subject: [Rd] re: transparency
In-Reply-To: <Pine.LNX.4.31.0108091640220.8965-100000@gannet.stats>
Message-ID: <Pine.A41.4.33.0108100943360.8708-100000@homer01.u.washington.edu>

On Thu, 9 Aug 2001, Prof Brian Ripley wrote:

> However, for the future (1.4.x), I think we should handle "white" and
> "transparent" differently, and have bg default to "transparent" for
> all devices.  A quick look shows that this is would be easy, as only
> 24 bits of the rcolor type are used.  So would there be an objections
> to using a bit (or a single value) of the upper byte to denote
> "transparent"?  (Actually, Peter D has 0xffffffff in use as invalid,
> but that's more bits than are needed.)  For consistency "transparent"
> should be an alternative to NA in the fill routines, which means that
> the obvious rcolor value is (unsigned) NA_INTEGER.

Definitely transparency would be very useful, and I think a bit in the
upper byte is a good place to store it.

> One question then is what bg="transparent" would mean for a screen
> device. I think it should mean "white", but the difference would
> emerge if the device was copied.  An alternative for the windows()
> device (which can have a canvas larger than the device region) would
> be the canvas colour (default grey50).  In that case one might want a
> default of "white".

If "transparent" is to be the default then I think it should show up as
white on screen (at least by default)

It would be nice if a canvas color were available for other screen
devices, to allow easier previewing of transparent graphics against
different background colors.  It's obviously not that important, since you
can always plot the graph against a filled background of that color, but
it would be convenient if it isn't too hard. That is, the default color
would be set by some sort of options(canvas.color) that would default to
eg "grey50" or "white".

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 10 18:13:17 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Aug 2001 19:13:17 +0200
Subject: [Rd] re: transparency
In-Reply-To: <Pine.A41.4.33.0108100943360.8708-100000@homer01.u.washington.edu>
References: <Pine.A41.4.33.0108100943360.8708-100000@homer01.u.washington.edu>
Message-ID: <x2lmkrx2he.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On Thu, 9 Aug 2001, Prof Brian Ripley wrote:
> 
> > However, for the future (1.4.x), I think we should handle "white" and
> > "transparent" differently, and have bg default to "transparent" for
> > all devices.  A quick look shows that this is would be easy, as only
> > 24 bits of the rcolor type are used.  So would there be an objections
> > to using a bit (or a single value) of the upper byte to denote
> > "transparent"?  (Actually, Peter D has 0xffffffff in use as invalid,
> > but that's more bits than are needed.)  For consistency "transparent"
> > should be an alternative to NA in the fill routines, which means that
> > the obvious rcolor value is (unsigned) NA_INTEGER.
> 
> Definitely transparency would be very useful, and I think a bit in the
> upper byte is a good place to store it.

And if must be (and I remember this correctly), the "magic" 0xffffffff
is only in there to prevent color settings to carry from on page to
the next and breaking the Document Structuring conventions. If so, it
can be replaced with internal driver flags indicating whether there
was a (say) setbg call earlier on the page or not.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 10 18:30:48 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Aug 2001 19:30:48 +0200
Subject: [Rd] Bug repository
Message-ID: <x2hevfx1o7.fsf@blueberry.kubism.ku.dk>


As I suspected, the University blocks incoming HTTP traffic (port 80)
on our net segment, which is why bugs.r-project.org has been
unreachable. 

I've asked to have the line reopened for that machine. It hasn't
happened yet, but it shouldn't take too long.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Aug 10 22:40:42 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 11 Aug 2001 09:40:42 +1200
Subject: [Rd] re: transparency
References: <Pine.A41.4.33.0108100943360.8708-100000@homer01.u.washington.edu>
Message-ID: <3B7454DA.688106FC@stat.auckland.ac.nz>

Rather than a yes/no tranparency indicator, should we consider using
entire "unused byte" as an alpha-channel? (meaning that we specify
transparency as a value in [0,255]).  Many graphics/paint programs (e.g.
gimp) do this sort of thing.  Transparency would need to be device
dependent, but a simple yes/no transparency could be obtained by
thresholding the alpha value.  This would entail a change to way indices
into colour palettes are handled, but Peter D has pointed out that this
is currently broken anyway.

The rendering extension to the X server includes support for
transparency and this might be a place to look for how screen devices
should behave.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Fri Aug 10 23:37:08 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Fri, 10 Aug 2001 18:37:08 -0400 (EDT)
Subject: [Rd] re: transparency
In-Reply-To: <3B7454DA.688106FC@stat.auckland.ac.nz>
Message-ID: <Pine.GSO.4.10.10108101834440.14782-100000@hsph.harvard.edu>

IMHO that would be a Good Idea. It would also make people less inclined to
use color references to mean things other than color.

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

On Sat, 11 Aug 2001, Ross Ihaka wrote:

> Rather than a yes/no tranparency indicator, should we consider using
> entire "unused byte" as an alpha-channel? (meaning that we specify
> transparency as a value in [0,255]).  Many graphics/paint programs (e.g.
> gimp) do this sort of thing.  Transparency would need to be device
> dependent, but a simple yes/no transparency could be obtained by
> thresholding the alpha value.  This would entail a change to way indices
> into colour palettes are handled, but Peter D has pointed out that this
> is currently broken anyway.
> 
> The rendering extension to the X server includes support for
> transparency and this might be a place to look for how screen devices
> should behave.
> 
> 	Ross
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 10 23:37:52 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 10 Aug 2001 23:37:52 +0100 (BST)
Subject: [Rd] re: transparency
In-Reply-To: <3B7454DA.688106FC@stat.auckland.ac.nz>
Message-ID: <Pine.GSO.4.31.0108102324540.23420-100000@auk.stats>

On Sat, 11 Aug 2001, Ross Ihaka wrote:

> Rather than a yes/no tranparency indicator, should we consider using
> entire "unused byte" as an alpha-channel? (meaning that we specify
> transparency as a value in [0,255]).  Many graphics/paint programs (e.g.
> gimp) do this sort of thing.  Transparency would need to be device
> dependent, but a simple yes/no transparency could be obtained by
> thresholding the alpha value.  This would entail a change to way indices
> into colour palettes are handled, but Peter D has pointed out that this
> is currently broken anyway.
>
> The rendering extension to the X server includes support for
> transparency and this might be a place to look for how screen devices
> should behave.

I had thought of that, but it's a lot more complicated (and software does
not even agree which of 0 or 255 is transparent).  I think for now I am
going to look into using 0 and 255 (for solid and transparent) and leave
open the possibility of implementing the intermediate values. For example,
it may be my ignorance, but I don't know of support for alpha channels in
postscript or PDF (at least, PDF 1.3) or Windows Metafiles. PNG does have
alpha channel support, but simple transparency is more widely implemented.

An hour hacking has convinced me we can get something rather useful out of
this.


One design question, probably to Ross.  The postscript() device has a `bg'
argument, but all the others seem to use par("bg"), and that works on
postscript() too.  Is there any reason for this, or anything subtle I have
missed?   Thomas' suggestion to add a canvas colour arg to the
screen devices is a good one that looks easy to add.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sat Aug 11 02:40:33 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Fri, 10 Aug 2001 21:40:33 -0400 (EDT)
Subject: [Rd] re: transparency
In-Reply-To: <Pine.GSO.4.31.0108102324540.23420-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10108102130310.5464-100000@hsph.harvard.edu>



On Fri, 10 Aug 2001, Prof Brian D Ripley wrote:

> On Sat, 11 Aug 2001, Ross Ihaka wrote:
> 
> 
> I had thought of that, but it's a lot more complicated (and software does
> not even agree which of 0 or 255 is transparent).  I think for now I am
> going to look into using 0 and 255 (for solid and transparent) and leave
> open the possibility of implementing the intermediate values. For example,
> it may be my ignorance, but I don't know of support for alpha channels in
> postscript or PDF (at least, PDF 1.3) or Windows Metafiles. PNG does have
> alpha channel support, but simple transparency is more widely implemented.

Transparency is supported in Postscript Level 3 (I don't have my red book
handy, but its there) and will be supported in PDF 1.4, both of those are
full alpha channel transparency models.  WMF doesn't support transparency
in the sense that we're discussing here (it supports a variant of the
region transparency---an all or nothing ordeal). 

As far as interactive displays are concerned-- there probably won't be
true transparency as in the OS X sense where a window can have some
intrinsic alpha value, but most modern canvas packages (the GTK package
obviously and there is support in the Windows GDI API...sort of... I
haven't had a chance to look at GDI+, part of WinXP, but judging from its 
gratitous use in WinXP betas... :-) ) do support some notion of an alpha
channel, though as you point out they might decide 0xFF is opaque rather
than 0x00... This isn't that big of a problem, R would just pick one and
the device implementation should be responsible for subtracting properly
(or doing whatever needs be done to system palettes).

> 
> Brian
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.holena@reverecapital.com  Sun Aug 12 18:39:10 2001
From: john.holena@reverecapital.com (john.holena@reverecapital.com)
Date: Sun, 12 Aug 2001 19:39:10 +0200 (MET DST)
Subject: [Rd] predict.mlm: Error: Object "X" not found (PR#1049)
Message-ID: <200108121739.TAA06257@pubhealth.ku.dk>

predict.mlm fails with the error: Object "X" not found.

CAUSE:
looking at the predict.mlm function, we have:

x <- model.matrix(object, newdata)

two lines later, we have:

pred <- X[, piv, drop=FALSE] %*%  object$coefficients[piv,]


SOLUTION(?):
change the case of one of the x's, since it seems like what is meant in 
the second line is lowercase x...







platform: i686-pc-linux-gnu
arch: i686
os: linux-gnu
system: i686, linux-gnu
status
major 1
minor 3.0
year 2001
month 06
day 22
language R





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From htang@hpl.hp.com  Mon Aug 13 03:57:47 2001
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Mon, 13 Aug 2001 04:57:47 +0200 (MET DST)
Subject: [Rd] error in ksmooth C code + patch (PR#1050)
Message-ID: <200108130257.EAA07438@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.3.0
OS: GNU/Linux (Debian unstable)
Submission from: (NULL) (192.6.19.190)


Hi!

    If

x <- 1:4
y <- 1:4
z <- ksmooth(x, y, x.points=x)

I get for z

$x
[1] 1 2 3 4

$y
[1] 1.0 1.5 2.0 3.0

    In this case, the default bandwidth (0.5) makes it so that the neighborhood
of any point of x.points contains only one point in x, so z$y should be equal to
y.  I think the error is in
ksmooth.c:

Replace
	  if(x[i] < x0 - cutoff) imin = i;

by
	  if(x[i] < x0 - cutoff) {imin = i; continue;}


Best,
Hsiu-Khuern.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 13 09:51:12 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 13 Aug 2001 10:51:12 +0200
Subject: [Rd] Rnews 2001/3
Message-ID: <15223.38144.509412.705201@mithrandir.hornik.net>

Dear package author,

We are now accepting submissions for the third issue of the R
Newsletter.  For more information see

      http://cran.r-project.org/doc/Rnews/

If you are the author of a package on CRAN and you would like to promote
it a little bit, or if you simply have an interesting application using
R, we hope you can find some time to write a short article on it.  We
suggest that it be approximately 2 pages or less.  The idea of the
newsletter is that it be interesting to R users without being too
technical.  For example an article describing a package could begin by
briefly outlining the statistical background and go on to demonstrate
the usage on some typical data set.  Of course graphics are more than
welcome!

Bill Venables is also encouraging submissions to the more specialist
Programmer's Niche column.  In this case the technical level could be a
little higher, of course, but not necessarily: ingeniousness is the key.

Instructions for authors can be found in ``Writing Articles for R News''
in the first issue of Rnews; more detailed instructions will shortly be
available on the web page.  Remember that submissions have to be in
LaTeX, and that graphics are preferred in PDF or EPS format.  (Bitmaps
like JPG are also OK but please keep in mind that those cannot be scaled
easily and hence might look ugly in the final version.)

The deadline for submissions is

	 September 14, 2001

Keep the contributions rolling in!

For the Editorial Board,
-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From info@eminidaytrading.com  Mon Aug 13 14:32:12 2001
From: info@eminidaytrading.com (info@eminidaytrading.com)
Date: Mon, 13 Aug 2001 15:32:12 +0200 (MET DST)
Subject: [Rd] erappin' - daily morning update 8-13-01 (PR#1051)
Message-ID: <200108131332.PAA13985@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_002D_01C123D8.F95B41A0
Content-Type: text/plain;
        charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

erappin' - daily morning update


----------------------------------------------------------------------------
----

 BLEAK ECONOMIC PICTURE

      We got a mixed bag of reports by retailers at the end of last week. As
you know, retail sales are a key element to this economy's growth as
continued consumer spending is necessary to remain out of a recession.
Market analysts are hoping consumers will be spending part of their $40
billion tax refund in the coming months. Consumer spending is the only part
of this economy that is still stagnating without reflecting signs of this
slowing economy...for now. This week, we get several clues on the latest
economic condition, on top of the consumer spending reports that will give
the market a further indication how they are coping with the weakening job
market. Analysts are expecting today's Retail Sales report to come in -0.2%.

      Earlier last week, the Fed Beige Book, even though limited in its
number of anecdotes, showed a slowing factory sector, flat to falling bank
loan demand, and most importantly, retail sales below plan. Pretty much all
U.S. regions are presenting a picture of "slow growth or lateral movement in
economic activity" over the past few months. The economy keeps touching that
bottom without showing any improvements. On August 7, we had Chicago Fed
President Moskow citing that, "an underperforming economy may be rare, but
it is nothing new. What is different today are the mixed signals we see in
the marketplace. The combination of weaknesses and strengths and risks is
both unusual and challenging."


            Symbol Close High Low  Gain/Loss
            SPU01 1191.20 1197.50 1171.50  3.40
            ESU01 1191.25 1197.50 1172.00  3.50
            NDU01 1624.00 1652.50 1581.00  15.50
            NQU01 1624.00 1652.50 1582.50  15.50
            DOW 10416.25 10433.46 10197.32  117.69
            NASDAQ 1956.47 1967.03 1915.99  6.85
            SPX 1190.16 1193.33 1169.55  6.73
            SOX 593.05 595.63 572.29  7.16
            VIX 22.81 24.91 22.68  0.83


      TRADING

      We have seen this market trade in quite the range these past few
months (Nasdaq 2000-2300). Unless we are getting something different than
the clouded visibility companies are reporting, some economic data showing
signs of a bottom, we will not be trading outside that range. Going into the
weekend, we saw a technical rather than a fundamental-based rally. Traders
want more than just reports telling them there is no worry about inflation.
It is time for some reports saying there is no worry about this economy
slowing any further! For now, economic news is not showing signs of
stabilization so traders will remain anxious about the timing of the
economic turnaround hoping that the next data reports are giving them reason
to believe it is sooner rather than later.

      Curious to see how this week's earnings come in for Hewlett-Packard,
Applied Materials and Dell and of course how they see next quarter's
numbers. HWP is expecting a 91% drop in earnings per share, Applied
Materials a 97% drop while Dell sees a 27% step back in EPS.


      EUROPE'S SLOWING ECONOMY

      The European Central Bank (ECB) indicated in its August report that it
might need to cut interest rates again. So far, the ECB has been reluctant
to do so as they were experiencing troubles with rising inflation. Latest
economic reports are indicating a pause in inflationary pressures, which
introduces the possibility now of another 25 basis point rate cut as soon as
August 31st. Especially given Europe's largest economy, Germany, is
reporting weak industrial production, factory orders, and factory orders
besides its seventh consecutive rise in unemployment.

      It seems that central banks around the world are now in the race to
reverse direction on their slowing economies. Greenspan and company have cut
interest rates six times so far this year, with possibly another two coming
up later this quarter, the Bank of England has reduced them four times while
the Bank of Japan.... well they are still stuck with their zero interest
rate situation. Based on the economic data we have seen these past few
months, it does not look like Europe's economic bottom is in sight any time
soon either. Last week, the ECB released a statement saying, "there is an
increased uncertainty surrounding economic growth in the euro area in the
second half of 2001," and they might feel the effects of, "deteriorating
growth performances in several other regions of the world."

      On Friday, back on U.S. soil, the Chicago Board of Trade's Fed Fund
Futures are indicating a 100% chance of a 25 basis point rate cut to 3.50%
at the next FOMC meeting on August 21st and even a slight 18% probability of
a 50 bp cut at that time. Given a cut to 3.50% end of August, traders are
expecting with an 88% probability another 25 bp cut to 3.25% by year end.

      Have a great trading day -- and honor those stops !!


      If you would like to signup for a free trial of our interactive
trading room called the epit, where trading signals are posted in realtime
throughout the day, please fill out form at
http://www.eminidaytrading.com/eminisignup.html All questions regarding the
epit service, please email info@eminidaytrading.com . Erap service is not an
investment advisory service, nor a registered investment advisor or broker
and does not purport to tell or suggest which securities members should buy
or sell for themselves. Members should always check with their licensed
financial advisor and their tax advisor to determine the suitability of any
investment. You are currently subscribed to erap. To unsubscribe, please
send a blank email to erappers-unsubscribe-request@eminidaytrading.com

      Copyright 2001 by eminidaytrading Inc.
     Number 1
      08/13/2001

            Futures - The Basics
       Futures, the Basics - Are you a stock / option trader and have
considered trading futures but are constantly reminded how terribly risky
they are? If you are new to futures trading, then this session is a must as
emaster and emagine will cover the basics. What you need to know about
futures, how it differs from stocks & options trading and how to add them to
your trading arsenal.

            August 23rd and August 27th.


      Targets

      Both ES/NQ continue their downtrend. ES had a double bottom in the
1174-78 area which was briefly taken out, low 1172, before it bounced back.
However, until we make a clean break and close above 1235 level, we aren't
getting bullish. That area has been tested twice and failed. We have been
trading within this 1174-1233 range for over a month now. NQ has same story.
Even though it penetrated the upper trendline, it has resumed trend making a
new low of 1582.50. A break of this level could leave us testing 1550 and
1500 levels. We need a close above 1800 to get bullish.

            Intraday Epit Targets Hit
            ES  NQ
            1174.50  1604
            1188   1590
            1195.75   1619
            1631











------=_NextPart_000_002D_01C123D8.F95B41A0
Content-Type: text/html;
        charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>erappin' - daily morning update</TITLE><BASE=20
href=3Dhttp://www.eminidaytrading.com/erappin/erappin_081301a.html>
<META http-equiv=3Dcontent-type =
content=3Dtext/html;charset=3DISO-8859-1>
<META content=3D"MSHTML 5.50.4522.1800" name=3DGENERATOR></HEAD>
<BODY vLink=3D#ff00ff link=3D#ff00ff bgColor=3Dblack>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<HR>

<DIV align=3Dcenter><IMG height=3D120=20
src=3D"http://www.eminidaytrading.com/erappin/images/erappin_top.gif" =
width=3D580=20
useMap=3D#erappin_topb794dc2a border=3D0><MAP =
name=3Derappin_topb794dc2a><AREA=20
  shape=3DRECT coords=3D488,32,556,100><AREA shape=3DRECT =
coords=3D524,3,571,24=20
  href=3D"http://www.invest-store.com/eminidaytrading/"><AREA =
shape=3DRECT=20
  coords=3D461,3,509,23=20
  href=3D"http://www.eminidaytrading.com/eminisignup.html"><AREA =
shape=3DRECT=20
  coords=3D414,3,444,24 =
href=3D"http://www.eminidaytrading.com/epit/epit.html"><AREA=20
  shape=3DRECT coords=3D205,4,370,27 =
href=3D"http://www.eminidaytrading.com"><AREA=20
  shape=3DRECT coords=3D132,4,167,24 =
href=3D"mailto:info@eminidaytrading.com"><AREA=20
  shape=3DRECT coords=3D12,3,55,23=20
href=3D"http://www.eminidaytrading.com/main.html"></MAP>=20
<TABLE cellSpacing=3D0 cellPadding=3D14 width=3D560 bgColor=3D#ffffff =
border=3D0>
  <TBODY>
  <TR>
    <TD vAlign=3Dtop align=3Dleft width=3D370><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D4><B>BLEAK ECONOMIC PICTURE<BR><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D2>We =
got a mixed=20
      bag of reports by retailers at the end of last week. As you know, =
retail=20
      sales are a key element to this economy's growth as continued =
consumer=20
      spending is necessary to remain out of a recession. Market =
analysts are=20
      hoping consumers will be spending part of their $40 billion tax =
refund in=20
      the coming months. Consumer spending is the only part of this =
economy that=20
      is still stagnating without reflecting signs of this slowing =
economy...for=20
      now. This week, we get several clues on the latest economic =
condition, on=20
      top of the consumer spending reports that will give the market a =
further=20
      indication how they are coping with the weakening job market. =
Analysts are=20
      expecting today's Retail Sales report to come in =
-0.2%.<BR><BR>Earlier=20
      last week, the Fed Beige Book, even though limited in its number =
of=20
      anecdotes, showed a slowing factory sector, flat to falling bank =
loan=20
      demand, and most importantly, retail sales below plan. Pretty much =
all=20
      U.S. regions are presenting a picture of "slow growth or lateral =
movement=20
      in economic activity" over the past few months. The economy keeps =
touching=20
      that bottom without showing any improvements. On August 7, we had =
Chicago=20
      Fed President Moskow citing that, "an underperforming economy may =
be rare,=20
      but it is nothing new. What is different today are the mixed =
signals we=20
      see in the marketplace. The combination of weaknesses and =
strengths and=20
      risks is both unusual and challenging."<BR><BR></FONT>
      <P><FONT face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2>
      <TABLE cellSpacing=3D0 cellPadding=3D3 width=3D366 bgColor=3Dwhite =
border=3D0>
        <TBODY>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Symbol</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Close</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>High</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Low</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle></TD>
          <TD vAlign=3Dtop align=3Dleft><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2>Gain/Loss</FONT></B></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SPU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1191.20</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1197.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1171.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>3.40</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>ESU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1191.25</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1197.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1172.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>3.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NDU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1624.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1652.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1581.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>15.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NQU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1624.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1652.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1582.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>15.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>DOW</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10416.25</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10433.46</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10197.32</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>117.69</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NASDAQ</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1956.47</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1967.03</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1915.99</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>6.85</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SPX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1190.16</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1193.33</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1169.55</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>6.73</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SOX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>593.05</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>595.63</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>572.29</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>7.16</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>VIX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>22.81</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>24.91</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>22.68</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D13 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            =
size=3D2><B>0.83</B></FONT></TD></TR></TBODY></TABLE><BR><BR></FONT><FONT=
=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D4><B>TRADING<BR><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D2>We =
have seen this=20
      market trade in quite the range these past few months (Nasdaq =
2000-2300).=20
      Unless we are getting something different than the clouded =
visibility=20
      companies are reporting, some economic data showing signs of a =
bottom, we=20
      will not be trading outside that range. Going into the weekend, we =
saw a=20
      technical rather than a fundamental-based rally. Traders want more =
than=20
      just reports telling them there is no worry about inflation. It is =
time=20
      for some reports saying there is no worry about this economy =
slowing any=20
      further!&nbsp;For now, economic news is not showing signs of =
stabilization=20
      so traders will remain anxious about the timing of the economic =
turnaround=20
      hoping that the next data reports are giving them reason to =
believe it is=20
      sooner rather than later.<BR><BR>Curious to see how this week's =
earnings=20
      come in for Hewlett-Packard, Applied Materials and Dell and of =
course how=20
      they see next quarter's numbers. HWP is expecting a 91% drop in =
earnings=20
      per share, Applied Materials a 97% drop while Dell sees a 27% step =
back in=20
      EPS.<BR><BR><BR></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D4><B>EUROPE'S SLOWING ECONOMY<BR><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D2>The =
European=20
      Central Bank (ECB) indicated in its August report that it might =
need to=20
      cut interest rates again. So far, the ECB has been reluctant to do =
so as=20
      they were experiencing troubles with rising inflation. Latest =
economic=20
      reports are indicating a pause in inflationary pressures, which =
introduces=20
      the possibility now of another 25 basis point rate cut as soon as =
August=20
      31st. Especially given Europe's largest economy, Germany, is =
reporting=20
      weak industrial production, factory orders, and factory orders =
besides its=20
      seventh consecutive rise in unemployment.<BR><BR>It seems that =
central=20
      banks around the world are now in the race to reverse direction on =
their=20
      slowing economies. Greenspan and company have cut interest rates =
six times=20
      so far this year, with possibly another two coming up later this =
quarter,=20
      the Bank of England has reduced them four times while the Bank of=20
      Japan.... well they are still stuck with their zero interest rate=20
      situation. Based on the economic data we have seen these past few =
months,=20
      it does not look like Europe's economic bottom is in sight any =
time soon=20
      either. Last week, the ECB released a statement saying, "there is =
an=20
      increased uncertainty surrounding economic growth in the euro area =
in the=20
      second half of 2001," and they might feel the effects of, =
"deteriorating=20
      growth performances in several other regions of the =
world."<BR><BR>On=20
      Friday, back on U.S. soil, the Chicago Board of Trade's Fed Fund =
Futures=20
      are indicating a 100% chance of a 25 basis point rate cut to 3.50% =
at the=20
      next FOMC meeting on August 21st and even a slight 18% probability =
of a 50=20
      bp cut at that time. Given a cut to 3.50% end of August, traders =
are=20
      expecting with an 88% probability another 25 bp cut to 3.25% by =
year end.=20
      <BR><BR>Have a great trading day -- and honor those stops=20
      !!<BR><BR><BR></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular color=3Dblack =
size=3D1>If=20
      you would like to signup for a free trial of our interactive =
trading room=20
      called the epit, where trading signals are posted in realtime =
throughout=20
      the day, please fill out form at <A=20
      =
href=3D"http://www.eminidaytrading.com/eminisignup.htm">http://www.eminid=
aytrading.com/eminisignup.htm</A>l=20
      All questions regarding the epit service, please email <A=20
      =
href=3D"mailto:info@eminidaytrading.com">info@eminidaytrading.com</A> . =
Erap=20
      service is not an investment advisory service, nor a registered =
investment=20
      advisor or broker and does not purport to tell or suggest which =
securities=20
      members should buy or sell for themselves. Members should always =
check=20
      with their licensed financial advisor and their tax advisor to =
determine=20
      the suitability of any investment. You are currently subscribed to =
erap.=20
      To unsubscribe, please send a blank email to <A=20
      =
href=3D"mailto:erap@eminidaytrading.com">erappers-unsubscribe-request@emi=
nidaytrading.com<BR><BR></A><B>Copyright=20
      2001 by eminidaytrading Inc.</B></FONT> </P></TD>
    <TD vAlign=3Dtop align=3Dleft><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><B>Number=20
      1<BR>08/13/2001<BR><BR></B></FONT>
      <TABLE cellSpacing=3D0 cellPadding=3D5 width=3D125 border=3D0>
        <TBODY>
        <TR>
          <TD bgColor=3D#000000 colSpan=3D4><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>Futures - The =
Basics</B></FONT></TD></TR></TBODY></TABLE><IMG=20
      height=3D35=20
      =
src=3D"http://www.eminidaytrading.com/erappin/images/erap_basics.gif"=20
      width=3D125 border=3D0>=20
      <TABLE cellSpacing=3D0 cellPadding=3D5 width=3D125 border=3D0>
        <TBODY>
        <TR>
          <TD bgColor=3D#000000 colSpan=3D4><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ffffff=20
            size=3D1>Futures, the Basics - Are you a stock / option =
trader and=20
            have considered trading futures but are constantly reminded =
how=20
            terribly risky they are? If you are new to futures trading, =
then=20
            this session is a must as emaster and emagine will cover the =
basics.=20
            What you need to know about futures, how it differs from =
stocks=20
            &amp; options trading and how to add them to your trading=20
            arsenal.<BR><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ffffff=20
            size=3D2>August 23rd and August 27th</FONT></B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ffffff=20
            size=3D2><B>.</B></FONT></TD></TR></TBODY></TABLE><BR><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D1><BR></FONT><FONT =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
      color=3D#000000 size=3D2><B>Targets</B><B><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
      size=3D1><B><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>Both =
ES/NQ=20
      continue their downtrend. ES had a double bottom in the 1174-78 =
area which=20
      was briefly taken out, low 1172, before it bounced back. However, =
until we=20
      make a clean break and close above 1235 level, we aren't getting =
bullish.=20
      That area has been tested twice and failed. We have been trading =
within=20
      this 1174-1233 range for over a month now. NQ has same story. Even =
though=20
      it penetrated the upper trendline, it has resumed trend making a =
new low=20
      of 1582.50. A break of this level could leave us testing 1550 and =
1500=20
      levels. We need a close above 1800 to get bullish. <BR><BR>
      <TABLE cellSpacing=3D0 cellPadding=3D4 width=3D129 border=3D0>
        <TBODY>
        <TR>
          <TD bgColor=3D#000000 colSpan=3D4><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ffffff=20
            size=3D2><B>Intraday Epit Targets Hit</B></FONT></TD></TR>
        <TR>
          <TD width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>ES</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"></TD>
          <TD width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>NQ</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"></TD></TR>
        <TR>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>174.50</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><IMG height=3D13 =

            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>604</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D1><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></FONT></TD></TR>
        <TR>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>188</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0> </FONT></TD>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>590</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D1><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></FONT></TD></TR>
        <TR>
          <TD width=3D"50%"><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>1</FONT></B></FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>195.75</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0> </FONT></TD></FONT>
          <TD width=3D"50%"><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>1619</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0> </FONT></TD></TR></FONT>
        <TR>
          <TD width=3D"50%"></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"></TD>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>631</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 =
border=3D0></FONT></TD></TR></TBODY></TABLE></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D1><BR><BR></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
      =
size=3D1><BR><BR></FONT></FONT></FONT></FONT></FONT></FONT></FONT></TD></=
TR></TBODY></TABLE><IMG=20
height=3D81 =
src=3D"http://www.eminidaytrading.com/erappin/images/erappin_bottom.gif" =

width=3D559 useMap=3D#erappin_bottomb794de78=20
border=3D0><BR><BR><BR><BR></DIV></BODY></HTML>

------=_NextPart_000_002D_01C123D8.F95B41A0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Aug 14 09:09:18 2001
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 14 Aug 2001 10:09:18 +0200 (MET DST)
Subject: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
Message-ID: <200108140809.KAA19242@pubhealth.ku.dk>

Hi everyone,

I have noticed that is.vector returns FALSE if I attach
attributes:

> x <- c(a = 1, b = 2)
> attributes(x)
$names
[1] "a" "b"

> is.vector(x)
[1] TRUE
> attr(x, "fred") <- "happy"
> attributes(x)
$names
[1] "a" "b"

$fred
[1] "happy"

> is.vector(x)
[1] FALSE

This seems inconsistent to me, as "names" is itself an attribute
yet this does negate is.vector.  As the original x is clearly a
vector, albeit one with names, wouldn't it be consistent to allow
any attributes?  This appears to be the case for is.matrix ...

> x <- matrix(1:4, 2, 2)
> is.matrix(x)
[1] TRUE
> attributes(x)
$dim
[1] 2 2
> attr(x, "fred") <- "happy"
> x
     [,1] [,2]
[1,]    1    3
[2,]    2    4
attr(,"fred")
[1] "happy"
> is.matrix(x)
[1] TRUE

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 27
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 14 09:43:26 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 14 Aug 2001 10:43:26 +0200 (MET DST)
Subject: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
Message-ID: <200108140843.KAA19934@pubhealth.ku.dk>

This seems intentional.  as.vector(x) changes x, and is.vector should be a
test of no change.  It is in S:

>From S-PLUS 3.4:

       is.vector returns TRUE if x is a simple object of the mode
       specified, and FALSE otherwise.  If the mode is "any", any
       simple object will match,  that  is,  an  object  with  no
       attributes.   Note  that  a  list is typically a vector in
       this sense.

Note the `simple' in there.

R appears to allow names as attributes but nothing else, but does not
document this (except in the source code).  Anyone want to explain why R
is incompatible with S?  And why as.vector and is.vector are inconsistent?
(Note that the isas tests do not pick this up.)

This is a documentation bug, at least.


On Tue, 14 Aug 2001 J.C.Rougier@durham.ac.uk wrote:

> Hi everyone,
>
> I have noticed that is.vector returns FALSE if I attach
> attributes:
>
> > x <- c(a = 1, b = 2)
> > attributes(x)
> $names
> [1] "a" "b"
>
> > is.vector(x)
> [1] TRUE
> > attr(x, "fred") <- "happy"
> > attributes(x)
> $names
> [1] "a" "b"
>
> $fred
> [1] "happy"
>
> > is.vector(x)
> [1] FALSE
>
> This seems inconsistent to me, as "names" is itself an attribute
> yet this does negate is.vector.  As the original x is clearly a
> vector, albeit one with names, wouldn't it be consistent to allow
> any attributes?

Well, dim is an attribute, so you want an array to be a vector?

> This appears to be the case for is.matrix ...
>
> > x <- matrix(1:4, 2, 2)
> > is.matrix(x)
> [1] TRUE
> > attributes(x)
> $dim
> [1] 2 2
> > attr(x, "fred") <- "happy"
> > x
>      [,1] [,2]
> [1,]    1    3
> [2,]    2    4
> attr(,"fred")
> [1] "happy"
> > is.matrix(x)
> [1] TRUE
>
> Cheers, Jonathan.
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Patched
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 27
>  language = R
>
> Search Path:
>  .GlobalEnv, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 14 11:45:04 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Aug 2001 12:45:04 +0200
Subject: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
In-Reply-To: <200108140843.KAA19934@pubhealth.ku.dk>
References: <200108140843.KAA19934@pubhealth.ku.dk>
Message-ID: <x2d75y3opb.fsf@blueberry.kubism.ku.dk>


[R-bugs snipped from recipients]

ripley@stats.ox.ac.uk writes:

> R appears to allow names as attributes but nothing else, but does not
> document this (except in the source code).  Anyone want to explain why R
> is incompatible with S?  And why as.vector and is.vector are inconsistent?
> (Note that the isas tests do not pick this up.)

It was discussed during 1997 and 1998... Ross, Thomas, Kurt, and
Martin seem to have been involved at some point. I'm not up to a full
reconstruction of the discussion just now, though. One of the earliest
cases is in this note from Thomas on the R-alpha mailing list:

(excerpted)
----
On Mon, 7 Apr 1997, Ross Ihaka wrote:
>               What should is.vector do?
> 
<snip> 
> Essentially, everything in S is a vector unless it has attributes.
> This is utterly unreasonable!  Why should something stop being a
> vector because it has a names attribute attached.

There is method to this.  Something is a vector in S if as.vector() has 
no effect on it. This includes functions but excludes matrices, vectors 
with names, and data.frames.  You might then ask why as.vector() works 
the way it does and I would have no sensible explanation. A particularly 
bizarre example is
S> is.vector(lm)
T
S> is.vector(lm(y~x)$coef)
F
i.e., the lm() function is a vector but the coefficient vector isn't.
----
There was also some discussion in December 1998, between Kurt and
Martin, but I cannot see how it got resolved.

(I seem to remember that we had as.vector retaining names for a while,
but got burned by package porting(?). Very early versions of R had
is.vector returning true for anything that could be subscripted,
including matrices.) 

BTW: My list archives seem to go further back than the "official"
ones. Do we want to do anything about that? Unfortunately they are in
Gnus's mail directory format and have been respooled so they are
slightly out of numerical order.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Aug 14 18:36:26 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 14 Aug 2001 19:36:26 +0200
Subject: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
In-Reply-To: <x2d75y3opb.fsf@blueberry.kubism.ku.dk>
References: <200108140843.KAA19934@pubhealth.ku.dk>
 <x2d75y3opb.fsf@blueberry.kubism.ku.dk>
Message-ID: <15225.24986.517771.993107@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> [R-bugs snipped from recipients]

> ripley@stats.ox.ac.uk writes:

>> R appears to allow names as attributes but nothing else, but does not
>> document this (except in the source code).  Anyone want to explain why R
>> is incompatible with S?  And why as.vector and is.vector are inconsistent?
>> (Note that the isas tests do not pick this up.)

> It was discussed during 1997 and 1998... Ross, Thomas, Kurt, and
> Martin seem to have been involved at some point. I'm not up to a full
> reconstruction of the discussion just now, though. One of the earliest
> cases is in this note from Thomas on the R-alpha mailing list:

I only vaguely recall this.  Note however that this is in the FAQ:

   * Named vectors are considered vectors in R but not in S (e.g.,
     `is.vector(c(a = 1:3))' returns `FALSE' in S and `TRUE' in R).

I assume that way back then I argued that it was silly that is.vector
gave FALSE for c(a = 1) and TRUE for c(1).  I think my understanding
would now be different: I would think that as.vector/is.vector should
match what the `generator' vector() does, and that cannot set names.
Otoh it cannot really set data either ...

Just in case someone brings this one up as well: we also have a diff in
is.matrix on a data frame.  Splus 6 still has

> is.matrix(data.frame(x = 1:3))
[1] T

and in fact is.matrix <- function(x) length(dim(x)) == 2, but I am
strongly against that: I still think that

	if as.foo(x) is different from x then is.foo(x) must be false.

And that also `proves' that is.vector is wrong, as

R> x <- c(a = 1)
R> x
a 
1 
R> as.vector(x)
[1] 1
R> is.vector(x)
[1] TRUE

-k

> (excerpted)
> ----
> On Mon, 7 Apr 1997, Ross Ihaka wrote:
>> What should is.vector do?
>> 
> <snip> 
>> Essentially, everything in S is a vector unless it has attributes.
>> This is utterly unreasonable!  Why should something stop being a
>> vector because it has a names attribute attached.

> There is method to this.  Something is a vector in S if as.vector() has 
> no effect on it. This includes functions but excludes matrices, vectors 
> with names, and data.frames.  You might then ask why as.vector() works 
> the way it does and I would have no sensible explanation. A particularly 
> bizarre example is
S> is.vector(lm)
> T
S> is.vector(lm(y~x)$coef)
> F
> i.e., the lm() function is a vector but the coefficient vector isn't.
> ----
> There was also some discussion in December 1998, between Kurt and
> Martin, but I cannot see how it got resolved.

> (I seem to remember that we had as.vector retaining names for a while,
> but got burned by package porting(?). Very early versions of R had
> is.vector returning true for anything that could be subscripted,
> including matrices.) 

> BTW: My list archives seem to go further back than the "official"
> ones. Do we want to do anything about that? Unfortunately they are in
> Gnus's mail directory format and have been respooled so they are
> slightly out of numerical order.

> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Aug 14 21:29:48 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 14 Aug 2001 16:29:48 -0400
Subject: [Rd] R-devel.tar.gz
Message-ID: <3B798A3C.FF7DF041@bank-banque-canada.ca>

R-devel.tar.gz  seems to be missing from //fangorn.ci.tuwien.ac.at/R/src/devel.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 14 23:18:42 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Aug 2001 00:18:42 +0200
Subject: [Rd] R-devel.tar.gz
In-Reply-To: <3B798A3C.FF7DF041@bank-banque-canada.ca>
References: <3B798A3C.FF7DF041@bank-banque-canada.ca>
Message-ID: <x2pu9y70al.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> R-devel.tar.gz  seems to be missing from //fangorn.ci.tuwien.ac.at/R/src/devel.

However there is

http://fangorn.ci.tuwien.ac.at/R/src/devel/R-devel_2001-08-14.tar.gz

The current maintenance scheme for that directory does look a little
curious: We have R-devel.tar.bz2 pointing to the latest bzip2
compressed version and no similar pointer to the gzipped one, but
we keep 10 older versions in tar.gz format... Martin?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 15 08:41:51 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 15 Aug 2001 09:41:51 +0200
Subject: [Rd] R-devel.tar.gz
In-Reply-To: <x2pu9y70al.fsf@blueberry.kubism.ku.dk>
References: <3B798A3C.FF7DF041@bank-banque-canada.ca>
 <x2pu9y70al.fsf@blueberry.kubism.ku.dk>
Message-ID: <15226.10175.362134.42393@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
    >> R-devel.tar.gz  seems to be missing from //fangorn.ci.tuwien.ac.at/R/src/devel.

    PD> However there is

    PD> http://fangorn.ci.tuwien.ac.at/R/src/devel/R-devel_2001-08-14.tar.gz

    PD> The current maintenance scheme for that directory does look a little
    PD> curious: We have R-devel.tar.bz2 pointing to the latest bzip2
    PD> compressed version and no similar pointer to the gzipped one, but
    PD> we keep 10 older versions in tar.gz format... Martin?

We (Fritz and I) have changed the setup of this scheme a bit, now using
"dated" file names upon Fritz' request.  
We've always kept the 10 latest versions and always only the .tar.gz ones.
I think the new scheme does the same also for the bz2 ones 
(which can be considered a waste of disk space and I could well change back).

The transition phase (from one to the other scheme) lasts 10 days and we
are still in midst of it.  I saw no real reason for doing the transition
manually at once when it happens all automatically over the 10 days period.

The real new thing about it is that we now also snapshot the "R-ng"
[aka `R (next|new) generation'].  
However, dear "R-devel"ers please note that "R-ng" currently has nothing
interesting in it AFAIK and in fact is not even tracking "R-patched" or
"R-devel" ...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Aug 15 17:19:34 2001
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Wed, 15 Aug 2001 18:19:34 +0200 (MET DST)
Subject: [Rd] documented but missing from the code (PR#1054)
Message-ID: <200108151619.SAA10100@pubhealth.ku.dk>

In R-devel (Aug 15) I am getting some warnings
"Objects documented but missing from the code:"

The ones I have checked are definitely in the code, so I suspect there is a bug in
this check. I'm very busy today and then away until after the projected release of
the new version so I cannot follow up on this as carefully as I would like to. I
expect the problem is reproducible with dse from CRAN, though I have been testing
with my own working copy.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 15 18:30:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 15 Aug 2001 19:30:08 +0200 (MET DST)
Subject: [Rd] documented but missing from the code (PR#1054)
Message-ID: <200108151730.TAA10351@pubhealth.ku.dk>

On Wed, 15 Aug 2001 pgilbert@bank-banque-canada.ca wrote:

> In R-devel (Aug 15) I am getting some warnings
> "Objects documented but missing from the code:"
>
> The ones I have checked are definitely in the code, so I suspect there is a bug in
> this check. I'm very busy today and then away until after the projected release of
> the new version so I cannot follow up on this as carefully as I would like to. I
> expect the problem is reproducible with dse from CRAN, though I have been testing
> with my own working copy.

Until very recently this was true for objects in zzz.R. One example in dse
is scale.default, which is not in the code and is in the documentation
(incorrectly). Generated objects are (correctly) marked as not in the code.


R-devel does not have a projected release date, and is not the next version
planned (1.3.1 on August 31).  I'd guess its release is several months off.


BTW, is it you who is responsible for the scale generic in R?
dse has

      scale <- function(x, ..., scale = TRUE) UseMethod("scale")

as R did, and that is incompatible with scale.default (and hence S's
scale) which does not have a ... argument.  Adding one forces the
scale argument to be named and breaks a lot of ported code.

Your own scale methods are also incompatible with your own generic.
Try running checkMethods().

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From durso@hussle.harvard.edu  Wed Aug 15 21:21:22 2001
From: durso@hussle.harvard.edu (Brian D'Urso)
Date: Wed, 15 Aug 2001 16:21:22 -0400 (EDT)
Subject: [Rd] Computer Modern Fonts in R
Message-ID: <Pine.LNX.4.33.0108151605070.15434-100000@hussle.harvard.edu>

About a month ago I sent a message to the list about some changes which
could allow R to fully utilize the (La)TeX Computer Modern fonts. I didn't
get any replies indicating the changes would be accepted in some form,
what could be improved in them, or that the changes were not wanted.

The patches and other files needed are available from:
http://hussle.harvard.edu/~durso/CM_R.tar.gz

Even if there is no interest in including full support for CM fonts, it
would be very helpful if the "family" option of the postscript driver
could be expanded to (optionally) take list of five afm files instead of
four. The fifth would be for the symbol afm file. This would then allow me
to write a script which could make the remaining changes to an otherwise
standard R eps file (after it was written with the standard postscript
driver) so it would properly use the CM fonts. I could then distribute
this as some sort of package so others who might want to use the CM fonts
could also do so.

Thank you,
Brian D'Urso

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Aug 15 21:43:15 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 15 Aug 2001 16:43:15 -0400
Subject: [Rd] documented but missing from the code (PR#1054)
References: <200108151730.TAA10351@pubhealth.ku.dk>
Message-ID: <3B7ADEE3.146C63F9@bank-banque-canada.ca>

BDR>Until very recently this was true for objects in zzz.R. One example in dse
BDR>is scale.default, which is not in the code and is in the documentation
BDR>(incorrectly). Generated objects are (correctly) marked as not in the code.

I take this to mean that if I do

  if(!exists(zzz)) zzz <- whatever

then any documentation for zzz will generate the warning.
I do this, but I think there may be a bug in addition.

BDR>R-devel does not have a projected release date, and is not the next version
BDR>planned (1.3.1 on August 31).  I'd guess its release is several months off.

Ok, thanks.  I mis-interpreted something in a previous post.

BDR>BTW, is it you who is responsible for the scale generic in R?
BDR>dse has
BDR>      scale <- function(x, ..., scale = TRUE) UseMethod("scale")
BDR>as R did,

As R still does I believe. I don't recall being responsible for this, but I vaguely
recall being involved in a discussion and I believe I changed my generic to match
R's. My original scale generic pre-dates Splus 3.4 and scale was not generic in Splus
3.3 (nor in R in the previous millennium).

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug 15 21:00:38 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 15 Aug 2001 22:00:38 +0200
Subject: [Rd] documented but missing from the code (PR#1054)
In-Reply-To: <200108151730.TAA10351@pubhealth.ku.dk>
References: <200108151730.TAA10351@pubhealth.ku.dk>
Message-ID: <15226.54502.941259.677297@mithrandir.hornik.net>

>>>>> ripley  writes:

> On Wed, 15 Aug 2001 pgilbert@bank-banque-canada.ca wrote:
>> In R-devel (Aug 15) I am getting some warnings
>> "Objects documented but missing from the code:"
>> 
>> The ones I have checked are definitely in the code, so I suspect there is a bug in
>> this check. I'm very busy today and then away until after the projected release of
>> the new version so I cannot follow up on this as carefully as I would like to. I
>> expect the problem is reproducible with dse from CRAN, though I have been testing
>> with my own working copy.

> Until very recently this was true for objects in zzz.R. One example in
> dse is scale.default, which is not in the code and is in the
> documentation (incorrectly). Generated objects are (correctly) marked
> as not in the code.

> R-devel does not have a projected release date, and is not the next
> version planned (1.3.1 on August 31).  I'd guess its release is
> several months off.

> BTW, is it you who is responsible for the scale generic in R?  dse has

>       scale <- function(x, ..., scale = TRUE) UseMethod("scale")

> as R did, and that is incompatible with scale.default (and hence S's
> scale) which does not have a ... argument.  Adding one forces the
> scale argument to be named and breaks a lot of ported code.

> Your own scale methods are also incompatible with your own generic.
> Try running checkMethods().

I have only tried a random sample of the warnings: e.g., dse2 has one
about `combine'.  This comes from the usage in combine.forecast.cov.Rd
being

    combine(obj1, obj2)

whereas the file actually documents the topics

\alias{combine.forecast.cov}
\alias{combine.forecast.cov.estimators.wrt.data}
\alias{combine.forecast.cov.estimators.wrt.true} 

and there is no object `combine' in the package:

hornik@mithrandir:~/tmp/dse.Rcheck/dse2/R$ grep combine *
combine.forecast.cov.estimators.wrt.data <- function(e1,e2)
combine.forecast.cov.estimators.wrt.true <- function(e1,e2)
combine.forecast.cov <- function(e1,e2)

So I would think that \usage documents an object that is missing from
the code.

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From laurent@cbs.dtu.dk  Thu Aug 16 07:52:35 2001
From: laurent@cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Thu, 16 Aug 2001 08:52:35 +0200 (MET DST)
Subject: [Rd] crt1.o skipped at configure time ? (PR#1057)
Message-ID: <200108160652.IAA12811@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: 1.3.0-patched
OS: IRIX 6.5
Submission from: (NULL) (130.225.67.199)





During the configuration step, things do not go perfect:

The file config.log has :

configure:3754: gcc -o conftest -g -O2 -I/usr/freeware/include
-I/usr/local/include  -static conftest.c -L/usr/local/lib 1>&5
ld32: FATAL   9  : I/O error (/usr/lib32/mips3/nonshared/crt1.o): No such file
or directory

here is a list of what's in mips3
laurent@ibiology> ls /usr/lib32/mips3/
crt1.o             libdmnet.so        libfpe.so          libmalloc_cv.so
crtn.o             libdmnet.so.1      libfpe_ss.so       libmalloc_ss.so
dmedia             libdplace.so       libftn.so          libmangle.a
dsmcrt.o           libdprof.so        libftn90.so        libmp.a
fixade.o           libelfutil.a       libinstr.so        libmp.so
libMMmalloc.a      libelfutil_xtnd.a  libio_ss.so        libmpc.a
libMMmalloc.so     libexc.so          libkapio.a         libmpi_ss.so
libblas.so         libfastm.a         libkmem.a          libmx.a
libblas_mp.so      libfastm.so        libksync.so        libmx.so
libc.so            libfetchop.so      libksync.so.1      libsgidl.a
libc.so.1          libffio.a          libm.a             libss.so
libdlook.so        libffio.so         libm.so            libssrt.so
libdmedia.so       libfortran.so      libm43.a           mcrt1.o
libdmedia.so.1     libfpe.a           libm43.so



...if it's a real problem (and not the installation here being _really_ exotic,
 it should be fixed in a wink)


Best regards,



Laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 16 08:17:38 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 16 Aug 2001 08:17:38 +0100 (BST)
Subject: [Rd] crt1.o skipped at configure time ? (PR#1057)
In-Reply-To: <200108160652.IAA12811@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0108160816060.19719-100000@auk.stats>

Looks like a compiler installation problem.  Was that gcc built on that
version of Irix on that box?


On Thu, 16 Aug 2001 laurent@cbs.dtu.dk wrote:

> Full_Name: Laurent Gautier
> Version: 1.3.0-patched
> OS: IRIX 6.5
> Submission from: (NULL) (130.225.67.199)
>
>
>
>
>
> During the configuration step, things do not go perfect:
>
> The file config.log has :
>
> configure:3754: gcc -o conftest -g -O2 -I/usr/freeware/include
> -I/usr/local/include  -static conftest.c -L/usr/local/lib 1>&5
> ld32: FATAL   9  : I/O error (/usr/lib32/mips3/nonshared/crt1.o): No such file
> or directory
>
> here is a list of what's in mips3
> laurent@ibiology> ls /usr/lib32/mips3/
> crt1.o             libdmnet.so        libfpe.so          libmalloc_cv.so
> crtn.o             libdmnet.so.1      libfpe_ss.so       libmalloc_ss.so
> dmedia             libdplace.so       libftn.so          libmangle.a
> dsmcrt.o           libdprof.so        libftn90.so        libmp.a
> fixade.o           libelfutil.a       libinstr.so        libmp.so
> libMMmalloc.a      libelfutil_xtnd.a  libio_ss.so        libmpc.a
> libMMmalloc.so     libexc.so          libkapio.a         libmpi_ss.so
> libblas.so         libfastm.a         libkmem.a          libmx.a
> libblas_mp.so      libfastm.so        libksync.so        libmx.so
> libc.so            libfetchop.so      libksync.so.1      libsgidl.a
> libc.so.1          libffio.a          libm.a             libss.so
> libdlook.so        libffio.so         libm.so            libssrt.so
> libdmedia.so       libfortran.so      libm43.a           mcrt1.o
> libdmedia.so.1     libfpe.a           libm43.so
>
>
>
> ...if it's a real problem (and not the installation here being _really_ exotic,
>  it should be fixed in a wink)
>
>
> Best regards,
>
>
>
> Laurent
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 16 08:27:29 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 16 Aug 2001 09:27:29 +0200
Subject: [Rd] scale() generic {was "documented but missing..."}
In-Reply-To: <3B7ADEE3.146C63F9@bank-banque-canada.ca>
References: <200108151730.TAA10351@pubhealth.ku.dk>
 <3B7ADEE3.146C63F9@bank-banque-canada.ca>
Message-ID: <15227.30177.440433.558758@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:


    BDR> BTW, is it you who is responsible for the scale generic in R?  dse
    BDR> has scale <- function(x, ..., scale = TRUE) UseMethod("scale")
    BDR> as R did,

    PaulG> As R still does I believe.

yes, 1.3.0 does

    PaulG> I don't recall being responsible for
    PaulG> this, but I vaguely recall being involved in a discussion and I
    PaulG> believe I changed my generic to match R's. My original scale
    PaulG> generic pre-dates Splus 3.4 and scale was not generic in Splus
    PaulG> 3.3 (nor in R in the previous millennium).

I was somehow involved in this discussion, maybe impementation as well.
It started with someone asking for scale() to become generic,
because he wanted to write methods for it and because the S-plus coders
had made it generic.
Very vaguely I also remember that the request was also to allow other
arguments than those of scale.default() which *does* make sense, just think
of specialized matrix classes, etc.
Unfortunately, `scale' is not a good word to grep for in the mailing list
archives...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 16 08:54:26 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 16 Aug 2001 09:54:26 +0200
Subject: [Rd] documented but missing from the code (PR#1054)
In-Reply-To: <3B7ADEE3.146C63F9@bank-banque-canada.ca>
References: <200108151730.TAA10351@pubhealth.ku.dk>
 <3B7ADEE3.146C63F9@bank-banque-canada.ca>
Message-ID: <15227.31794.780031.428261@mithrandir.hornik.net>

>>>>> Paul Gilbert writes:

BDR> Until very recently this was true for objects in zzz.R. One example in dse
BDR> is scale.default, which is not in the code and is in the documentation
BDR> (incorrectly). Generated objects are (correctly) marked as not in the code.

> I take this to mean that if I do

>   if(!exists(zzz)) zzz <- whatever

> then any documentation for zzz will generate the warning.

Correct.  Codoc could be refined to catch this: is currently only looks
at the top-level assignments.  But in the above case, one can argue that
defensiveness should give a warning: the package writer could provide a
totally different zzz and document it, and consistency of code and docs
would be conditional on non-existence of zzz ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From JDiaz-Saiz@uh.edu  Thu Aug 16 18:31:09 2001
From: JDiaz-Saiz@uh.edu (JDiaz-Saiz@uh.edu)
Date: Thu, 16 Aug 2001 19:31:09 +0200 (MET DST)
Subject: [Rd] lm() (PR#1059)
Message-ID: <200108161731.TAA19810@pubhealth.ku.dk>

Full_Name: Joaquin Diaz-Saiz
Version: 1.3.0
OS: Windows
Submission from: (NULL) (129.7.120.106)


The lm() function applied to a particular data set produces a negative value for
the adjusted R-square. See the output below.


=======================================================
R : Copyright 2001, The R Development Core Team
Version 1.3.0  (2001-06-22)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> w<-read.table("accres.txt")
> w
   V1 V2
1   9  1
2   3  1
3   8  1
4   7  1
5  12  1
6   4  0
7  13  0
8  10  0
9   9  0
10  9  0
11  6  0
> x<-w$V1
> t<-w$V2
> x
 [1]  9  3  8  7 12  4 13 10  9  9  6
> t
 [1] 1 1 1 1 1 0 0 0 0 0 0
> out<-lm(x~t)
> summary(out)

Call:
lm(formula = x ~ t)

Residuals:
   Min     1Q Median     3Q    Max 
 -4.80  -1.65   0.50   1.35   4.50 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)    8.500      1.307   6.502 0.000111 ***
t             -0.700      1.939  -0.361 0.726443    
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1 

Residual standard error: 3.202 on 9 degrees of freedom
Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525 
F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264 

> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Thu Aug 16 18:42:08 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Thu, 16 Aug 2001 13:42:08 -0400
Subject: [Rd] lm() (PR#1059)
References: <200108161731.TAA19810@pubhealth.ku.dk>
Message-ID: <3B7C05EF.2066625A@umsanet.edu.bo>

Hola!

This is not an error. If the r-squared is small, the formula 
defining "adjusted r-square" can give negative values, correctly.

Kjetil Halvorsen.

JDiaz-Saiz@uh.edu wrote:
> 
> Full_Name: Joaquin Diaz-Saiz
> Version: 1.3.0
> OS: Windows
> Submission from: (NULL) (129.7.120.106)
> 
> The lm() function applied to a particular data set produces a negative value for
> the adjusted R-square. See the output below.
> 
> =======================================================
> R : Copyright 2001, The R Development Core Team
> Version 1.3.0  (2001-06-22)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> [Previously saved workspace restored]
> 
> > w<-read.table("accres.txt")
> > w
>    V1 V2
> 1   9  1
> 2   3  1
> 3   8  1
> 4   7  1
> 5  12  1
> 6   4  0
> 7  13  0
> 8  10  0
> 9   9  0
> 10  9  0
> 11  6  0
> > x<-w$V1
> > t<-w$V2
> > x
>  [1]  9  3  8  7 12  4 13 10  9  9  6
> > t
>  [1] 1 1 1 1 1 0 0 0 0 0 0
> > out<-lm(x~t)
> > summary(out)
> 
> Call:
> lm(formula = x ~ t)
> 
> Residuals:
>    Min     1Q Median     3Q    Max
>  -4.80  -1.65   0.50   1.35   4.50
> 
> Coefficients:
>             Estimate Std. Error t value Pr(>|t|)
> (Intercept)    8.500      1.307   6.502 0.000111 ***
> t             -0.700      1.939  -0.361 0.726443
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
> 
> Residual standard error: 3.202 on 9 degrees of freedom
> Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525
> F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264
> 
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 16 20:31:51 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Aug 2001 21:31:51 +0200
Subject: [Rd] lm() (PR#1059)
In-Reply-To: <3B7C05EF.2066625A@umsanet.edu.bo>
References: <200108161731.TAA19810@pubhealth.ku.dk>
 <3B7C05EF.2066625A@umsanet.edu.bo>
Message-ID: <x27kw37qe0.fsf@blueberry.kubism.ku.dk>

kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:

> Hola!
> 
> This is not an error. If the r-squared is small, the formula 
> defining "adjusted r-square" can give negative values, correctly.

Yep. Essentially it is  100 * "% variance accounted for" and the
variance can be larger under the model than under the null. Whenever
the F for the model is less than 1, in fact.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Fri Aug 17 00:23:39 2001
From: Bill.Venables@CMIS.CSIRO.AU (Venables, Bill (CMIS, Cleveland))
Date: Fri, 17 Aug 2001 09:23:39 +1000
Subject: [Rd] lm() (PR#1059)
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A9048F1A@Roper-CV.qld.cmis.csiro.au>

Where's the bug?

The adjusted R-squared is an approximately unbiased estimator of the true
R^2.  Like most unbiased estimators of positive parameters it can sometimes
take on negative values.  Most people will understand this, too, so I don't
see much point in artificially replacing the result by zero if its value is
negative.

Bill Venables.

-----Original Message-----
From: JDiaz-Saiz@uh.edu [mailto:JDiaz-Saiz@uh.edu]
Sent: Friday, 17 August 2001 3:31 AM
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: [Rd] lm() (PR#1059)


Full_Name: Joaquin Diaz-Saiz
Version: 1.3.0
OS: Windows
Submission from: (NULL) (129.7.120.106)


The lm() function applied to a particular data set produces a negative value
for
the adjusted R-square. See the output below.


=======================================================
R : Copyright 2001, The R Development Core Team
Version 1.3.0  (2001-06-22)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> w<-read.table("accres.txt")
> w
   V1 V2
1   9  1
2   3  1
3   8  1
4   7  1
5  12  1
6   4  0
7  13  0
8  10  0
9   9  0
10  9  0
11  6  0
> x<-w$V1
> t<-w$V2
> x
 [1]  9  3  8  7 12  4 13 10  9  9  6
> t
 [1] 1 1 1 1 1 0 0 0 0 0 0
> out<-lm(x~t)
> summary(out)

Call:
lm(formula = x ~ t)

Residuals:
   Min     1Q Median     3Q    Max 
 -4.80  -1.65   0.50   1.35   4.50 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)    8.500      1.307   6.502 0.000111 ***
t             -0.700      1.939  -0.361 0.726443    
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1 

Residual standard error: 3.202 on 9 degrees of freedom
Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525 
F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264 

> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xoaquin@computer.org  Fri Aug 17 02:14:31 2001
From: xoaquin@computer.org (xoaquin@computer.org)
Date: Fri, 17 Aug 2001 03:14:31 +0200 (MET DST)
Subject: [Rd] Error in report. (PR#1060)
Message-ID: <200108170114.DAA21193@pubhealth.ku.dk>

To all the people involved:

I incorrectly reported the negative value of the adjusted R-squared as a bug
in the last version of R.

I was not careful enough in checking the details and I apologize for the
time that some people had to waste. I will be more careful next time.

Some packages report values greater that or equal to zero and use zero when
negative, but certainly this is not necessary.

Joaquin Diaz-Saiz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Joaquin Diaz-Saiz" <xoaquin@computer.org  Fri Aug 17 02:52:05 2001
From: Joaquin Diaz-Saiz" <xoaquin@computer.org (Joaquin Diaz-Saiz)
Date: Thu, 16 Aug 2001 20:52:05 -0500
Subject: [Rd] lm() (PR#1059)
References: <E09E527B56BE2D438A3D6A246DDD27A9048F1A@Roper-CV.qld.cmis.csiro.au>
Message-ID: <002301c126bf$493f9fc0$bff2520c@usinet.xoaquin>

To all the people involved:

I incorrectly reported the negative value of the adjusted R-squared as a bug
in the last version of R.

I was not careful enough in checking the details and I apologize for the
time that some people had to waste. I will be more careful next time.

Some packages report values greater that or equal to zero and use zero when
negative, but certainly this is not necessary.

Joaquin Diaz-Saiz

----- Original Message -----
From: "Venables, Bill (CMIS, Cleveland)" <Bill.Venables@CMIS.CSIRO.AU>
To: "'JDiaz-Saiz@uh.edu'" <JDiaz-Saiz@UH.EDU>; <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
Sent: Thursday, August 16, 2001 6:23 PM
Subject: RE: [Rd] lm() (PR#1059)


> Where's the bug?
>
> The adjusted R-squared is an approximately unbiased estimator of the true
> R^2.  Like most unbiased estimators of positive parameters it can
sometimes
> take on negative values.  Most people will understand this, too, so I
don't
> see much point in artificially replacing the result by zero if its value
is
> negative.
>
> Bill Venables.
>
> -----Original Message-----
> From: JDiaz-Saiz@uh.edu [mailto:JDiaz-Saiz@uh.edu]
> Sent: Friday, 17 August 2001 3:31 AM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] lm() (PR#1059)
>
>
> Full_Name: Joaquin Diaz-Saiz
> Version: 1.3.0
> OS: Windows
> Submission from: (NULL) (129.7.120.106)
>
>
> The lm() function applied to a particular data set produces a negative
value
> for
> the adjusted R-square. See the output below.
>
>
> =======================================================
> R : Copyright 2001, The R Development Core Team
> Version 1.3.0  (2001-06-22)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> [Previously saved workspace restored]
>
> > w<-read.table("accres.txt")
> > w
>    V1 V2
> 1   9  1
> 2   3  1
> 3   8  1
> 4   7  1
> 5  12  1
> 6   4  0
> 7  13  0
> 8  10  0
> 9   9  0
> 10  9  0
> 11  6  0
> > x<-w$V1
> > t<-w$V2
> > x
>  [1]  9  3  8  7 12  4 13 10  9  9  6
> > t
>  [1] 1 1 1 1 1 0 0 0 0 0 0
> > out<-lm(x~t)
> > summary(out)
>
> Call:
> lm(formula = x ~ t)
>
> Residuals:
>    Min     1Q Median     3Q    Max
>  -4.80  -1.65   0.50   1.35   4.50
>
> Coefficients:
>             Estimate Std. Error t value Pr(>|t|)
> (Intercept)    8.500      1.307   6.502 0.000111 ***
> t             -0.700      1.939  -0.361 0.726443
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
>
> Residual standard error: 3.202 on 9 degrees of freedom
> Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525
> F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264
>
> >
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.
> -.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xoaquin@computer.org  Fri Aug 17 02:53:19 2001
From: xoaquin@computer.org (xoaquin@computer.org)
Date: Fri, 17 Aug 2001 03:53:19 +0200 (MET DST)
Subject: [Rd] lm() (PR#1059)
Message-ID: <200108170153.DAA21272@pubhealth.ku.dk>

To all the people involved:

I incorrectly reported the negative value of the adjusted R-squared as a bug
in the last version of R.

I was not careful enough in checking the details and I apologize for the
time that some people had to waste. I will be more careful next time.

Some packages report values greater that or equal to zero and use zero when
negative, but certainly this is not necessary.

Joaquin Diaz-Saiz

----- Original Message -----
From: "Venables, Bill (CMIS, Cleveland)" <Bill.Venables@CMIS.CSIRO.AU>
To: "'JDiaz-Saiz@uh.edu'" <JDiaz-Saiz@UH.EDU>; <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
Sent: Thursday, August 16, 2001 6:23 PM
Subject: RE: [Rd] lm() (PR#1059)


> Where's the bug?
>
> The adjusted R-squared is an approximately unbiased estimator of the true
> R^2.  Like most unbiased estimators of positive parameters it can
sometimes
> take on negative values.  Most people will understand this, too, so I
don't
> see much point in artificially replacing the result by zero if its value
is
> negative.
>
> Bill Venables.
>
> -----Original Message-----
> From: JDiaz-Saiz@uh.edu [mailto:JDiaz-Saiz@uh.edu]
> Sent: Friday, 17 August 2001 3:31 AM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] lm() (PR#1059)
>
>
> Full_Name: Joaquin Diaz-Saiz
> Version: 1.3.0
> OS: Windows
> Submission from: (NULL) (129.7.120.106)
>
>
> The lm() function applied to a particular data set produces a negative
value
> for
> the adjusted R-square. See the output below.
>
>
> =======================================================
> R : Copyright 2001, The R Development Core Team
> Version 1.3.0  (2001-06-22)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> [Previously saved workspace restored]
>
> > w<-read.table("accres.txt")
> > w
>    V1 V2
> 1   9  1
> 2   3  1
> 3   8  1
> 4   7  1
> 5  12  1
> 6   4  0
> 7  13  0
> 8  10  0
> 9   9  0
> 10  9  0
> 11  6  0
> > x<-w$V1
> > t<-w$V2
> > x
>  [1]  9  3  8  7 12  4 13 10  9  9  6
> > t
>  [1] 1 1 1 1 1 0 0 0 0 0 0
> > out<-lm(x~t)
> > summary(out)
>
> Call:
> lm(formula = x ~ t)
>
> Residuals:
>    Min     1Q Median     3Q    Max
>  -4.80  -1.65   0.50   1.35   4.50
>
> Coefficients:
>             Estimate Std. Error t value Pr(>|t|)
> (Intercept)    8.500      1.307   6.502 0.000111 ***
> t             -0.700      1.939  -0.361 0.726443
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
>
> Residual standard error: 3.202 on 9 degrees of freedom
> Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525
> F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264
>
> >
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.
> -.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Aug 17 14:49:55 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 17 Aug 2001 15:49:55 +0200
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
Message-ID: <15229.8451.41084.531037@gargle.gargle.HOWL>

A colleague has a dozen of excel sheets and also expects to get updates
regularly.  He could open these in M$-Excel and export as *.csv manually,
"bring back to Unix" and then read into R.  Of course there must be options to
start programming this in something like visual basic,
but we wouldn't to really want to...

We also know that probably Gnumeric could do the job (since the xls files
are said to be simple ...), but as far as I know that also does only work
manually (and via GUI). 
"gnumeric --help" does not suggest a command line version.
Are there other options (i.e. free software programs) to use from the
command line (i.e. also in a shell script or from inside R)?

Since this is not really an R topic, please reply to my e-mail only,
not to R-help, and I'll summarize.  Thanks in advance!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Sun Aug 19 22:05:49 2001
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Sun, 19 Aug 2001 23:05:49 +0200 (MET DST)
Subject: [Rd] error message in chol() (PR#1061)
Message-ID: <200108192105.XAA05577@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.3.0
OS: Windows 98
Submission from: (NULL) (24.77.112.193)



I am having accuracy problems involving the computation of inverse of
nonnegative definite matrices with solve(). I also have to compute the
Choleski decomposition of matrices. My numerical problems involving solve()
made me find a bug in the chol() function. Here is an example.

#Please, load the (8x8) matrix "mat" given below.
#The matrix "mat" is indeed invertible as
solve(mat)
#exists. However, the command
chol(mat)
#claims that "mat" is singular. The correct error message should be
#that "mat" is not symmetric positive definite.

#In fact, the matrix "mat" should be symmetric, but if
#we adjust for rounding errors by
chol((mat+t(mat))/2)
#we have the same error message in R, whereas S-Plus works (with
#a warning message saying that the rank is not full).

mat <- structure(c(0.587765115222886, 0.167899163888134, -1.17517413388306e-05,
  2.84014489816759e-05, -0.00314742260306333, 0.00957598738126672, 
 -0.000181283657365524, 0.000268404362197193, 0.167899163888134, 
 0.830166933867836, 2.84014489816759e-05, -6.37164529062413e-05,  
-0.00221693916036902, 0.00290212917834065, 9.0762242654496e-05, 
 -0.000148298146106774, -1.17517413388306e-05, 2.84014489816759e-05, 
 0.592681746779869, 0.155708697468761, -0.000181283657365506, 
 0.000268404362197185, -0.00203952216264033, 0.00850865103383899, 
 2.84014489816759e-05, -6.37164529062413e-05, 0.155708697468761, 
 0.856464279975445, 9.0762242654496e-05, -0.000148298146106784, 
 -0.00296804648853004, 0.00336588501549565, -0.00314742260306333,
  -0.00221693916036901, -0.000181283657365512, 9.07622426544948e-05,
  1.72579173368880, 0.238005942444999, 0.120912001671674, -0.141897803793986,
  0.00957598738126672, 0.00290212917834065, 0.000268404362197191, 
 -0.000148298146106782, 0.238005942444999, 1.56986591648628, 
-0.141897803793988,  0.213872027136185, -0.000181283657365518, 
9.07622426544981e-05,  -0.00203952216264033, -0.00296804648853004,
 0.120912001671674,  -0.141897803793987, 1.53425760353976, 1.16174845591861,
 0.000268404362197194,  -0.000148298146106774, 0.00850865103383899,
 0.00336588501549565,  -0.141897803793985, 0.213872027136185, 
1.16174845591861, 0.773168806527852 ), .Dim = c(8, 8)) 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug 20 00:02:06 2001
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Mon, 20 Aug 2001 01:02:06 +0200 (MET DST)
Subject: [Rd] system.file("",package) (PR#1062)
Message-ID: <200108192302.BAA05935@pubhealth.ku.dk>


system.file("",package") is documented to return the root of the package
(as it did in the past). It actually returns "" (Win98, R1.3.0), breaking
the SJava package

Omitting the first argument does work correctly and so is a workaround if
the argument is explicitly "" but not if it is the value of a variable.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 20 07:15:22 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 20 Aug 2001 08:15:22 +0200
Subject: [Rd] system.file("",package) (PR#1062)
In-Reply-To: <200108192302.BAA05935@pubhealth.ku.dk>
References: <200108192302.BAA05935@pubhealth.ku.dk>
Message-ID: <15232.43770.872451.726047@mithrandir.hornik.net>

>>>>> tlumley  writes:

> system.file("",package") is documented to return the root of the
> package (as it did in the past). It actually returns "" (Win98,
> R1.3.0), breaking the SJava package

> Omitting the first argument does work correctly and so is a workaround
> if the argument is explicitly "" but not if it is the value of a
> variable.

Thomas,

I think you are misreading the docs: we have

     system.file(..., package = "base", lib.loc = .lib.loc, pkg, lib)

so the package argument must be named.

I think you were caught by

	R> system.file("", "eda")
	[1] ""

but you need to do

	R> system.file("", package = "eda")
	[1] "/usr/local/lib/R/library/eda/"

-k


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 20 07:44:02 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 Aug 2001 08:44:02 +0200 (MET DST)
Subject: [Rd] system.file("",package) (PR#1062)
Message-ID: <200108200644.IAA06705@pubhealth.ku.dk>

On Mon, 20 Aug 2001 tlumley@u.washington.edu wrote:

>
> system.file("",package") is documented to return the root of the package
> (as it did in the past). It actually returns "" (Win98, R1.3.0), breaking
> the SJava package

My Unix systems give results like

> system.file("", package="eda")
[1] "/ext/R/1.3.0/lib/R/library/eda/"
> system.file("",package="Rstreams")
[1] "/ext/R/library/Rstreams/"

under 1.3.0.  It's the trailing slash that is the problem, and which is not
as documented in the Value section. That is not a file under Windows, and
so file.exists() fails.  (That suprised me a bit, but one could argue it is
not actually a file under Unix either: the directory file is
/ext/R/1.3.0/lib/R/library/eda and that does work.)

Rather than special-case system.file("",package), I think we should remove
the `or \code{""}' from the documentation.


(The problem with SJava on Windows is one of several I reported to DTL on
Mon Jul 16.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 20 07:43:41 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 20 Aug 2001 07:43:41 +0100 (BST)
Subject: [Rd] system.file("",package) (PR#1062)
In-Reply-To: <15232.43770.872451.726047@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.31.0108200742240.16994-100000@auk.stats>

On Mon, 20 Aug 2001, Kurt Hornik wrote:

> >>>>> tlumley  writes:
>
> > system.file("",package") is documented to return the root of the
> > package (as it did in the past). It actually returns "" (Win98,
> > R1.3.0), breaking the SJava package
>
> > Omitting the first argument does work correctly and so is a workaround
> > if the argument is explicitly "" but not if it is the value of a
> > variable.
>
> Thomas,
>
> I think you are misreading the docs: we have
>
>      system.file(..., package = "base", lib.loc = .lib.loc, pkg, lib)
>
> so the package argument must be named.
>
> I think you were caught by
>
> 	R> system.file("", "eda")
> 	[1] ""
>
> but you need to do
>
> 	R> system.file("", package = "eda")
> 	[1] "/usr/local/lib/R/library/eda/"

Sorry, that's using a Unix-specific interpretation of file.exists,
so does not work under Windows.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug 20 09:00:17 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 20 Aug 2001 10:00:17 +0200
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <15229.8451.41084.531037@gargle.gargle.HOWL>
References: <15229.8451.41084.531037@gargle.gargle.HOWL>
Message-ID: <15232.50065.506799.227682@gargle.gargle.HOWL>

Thanks got to Brian Ripley, John Chambers, Tony Rossini, Setzer Woodrow,
Dirk Eddelbuettel, Uwe Ligges, Detlef Steuer, and Kurt Hornik (in
"historical" order) who have answered very helpfully!

I was interested primarily in "commandline" solutions inside Unix/Linux,
and hence not ODBC inside windows.  The other answers fall into three groups :

1) newer Perl versions (newer than Redhat 6.2 or Debian potato) have modules
   Spreadsheet::ParseExcel and built on that DBI::Excel
   {as "libspreadsheet-parseexcel-perl" and "libdbi-excel-perl" in Debian,
    thanks to Dirk}.

   Dirk has also done a done a perl script "xls2csv" built on the above,
   sent to Brian Ripley who forwarded it to me.  
   Dirk, maybe you'd post the latest version of that here as well, or give us
   a pointer where that is available?

2) There's a GPL package "catdoc" with primary aim of 
   "cat *.doc files" (i.e. `look at' M$-Word files).  The catdoc package is
   written in C and also has an "xls2csv" (same name as above script!) program.
   catdoc is in Debian or available at  http://www.fe.msk.ru/~vitus/catdoc/
   Looking at that webpage however seems to indicate that development
   somehow stopped end of 1999 (a "2k" bug ? :-).

I've not yet compared the two xls2csv versions now potentially available
to me, one reason being that I'd have to upgrade perl (or Redhat) first.
At the moment, I'd tend to use the perl based solution.

3) John Chambers mentioned Duncan's  `R Gnumeric' interface --- the only
   R-related answer--- at http://www.omegahat.org/RGnumeric/  
   It is fairly new, but I'll definitely am looking at it, as well.

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> A colleague has a dozen of excel sheets and also expects to get
    MM> updates regularly.  He could open these in M$-Excel and export as
    MM> *.csv manually, "bring back to Unix" and then read into R.  Of
    MM> course there must be options to start programming this in something
    MM> like visual basic, but we wouldn't to really want to...

    MM> We also know that probably Gnumeric could do the job (since the xls
    MM> files are said to be simple ...), but as far as I know that also
    MM> does only work manually (and via GUI).  "gnumeric --help" does not
    MM> suggest a command line version.  Are there other options (i.e. free
    MM> software programs) to use from the command line (i.e. also in a
    MM> shell script or from inside R)?

    MM> Since this is not really an R topic, please reply to my e-mail
    MM> only, not to R-help, and I'll summarize.  Thanks in advance!

Thanks a lot, once more!
-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 20 11:28:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 Aug 2001 12:28:08 +0200 (MET DST)
Subject: [Rd] error message in chol() (PR#1061)
Message-ID: <200108201028.MAA10728@pubhealth.ku.dk>

On Sun, 19 Aug 2001 jerome@stat.ubc.ca wrote:

> Full_Name: Jerome Asselin
> Version: 1.3.0
> OS: Windows 98
> Submission from: (NULL) (24.77.112.193)
>
>
>
> I am having accuracy problems involving the computation of inverse of
> nonnegative definite matrices with solve(). I also have to compute the
> Choleski decomposition of matrices. My numerical problems involving solve()
> made me find a bug in the chol() function. Here is an example.
>
> #Please, load the (8x8) matrix "mat" given below.
> #The matrix "mat" is indeed invertible as
> solve(mat)
> #exists. However, the command
> chol(mat)
> #claims that "mat" is singular. The correct error message should be
> #that "mat" is not symmetric positive definite.

Yes.  Message changed.  Actually, it only uses the upper triangle,
so symmetry is assumed, as the help page says....

> #In fact, the matrix "mat" should be symmetric, but if
> #we adjust for rounding errors by
> chol((mat+t(mat))/2)
> #we have the same error message in R, whereas S-Plus works (with
> #a warning message saying that the rank is not full).

Well, the symmetrized matrix is not even close to positive definite, so
what does `works' mean?

> eigen((mat+t(mat))/2)
$values:
[1]  2.3768888  1.8976031  1.4630238  0.9286787  0.9159388  0.5205478  0.5018393
[8] -0.1343581
 ...

L <- chol((mat+t(mat))/2)
t(L) %*% L - (mat+t(mat))/2

has one element of about 0.27.  That's just undocumented in S-PLUS.

Generally, if you want good numerical control you should be using eigen
and not chol, and if you know your matrix is symmetric, you can do better
than solve().  Have you considered the Matrix package?


> mat <- structure(c(0.587765115222886, 0.167899163888134, -1.17517413388306e-05,
>   2.84014489816759e-05, -0.00314742260306333, 0.00957598738126672,
>  -0.000181283657365524, 0.000268404362197193, 0.167899163888134,
>  0.830166933867836, 2.84014489816759e-05, -6.37164529062413e-05,
> -0.00221693916036902, 0.00290212917834065, 9.0762242654496e-05,
>  -0.000148298146106774, -1.17517413388306e-05, 2.84014489816759e-05,
>  0.592681746779869, 0.155708697468761, -0.000181283657365506,
>  0.000268404362197185, -0.00203952216264033, 0.00850865103383899,
>  2.84014489816759e-05, -6.37164529062413e-05, 0.155708697468761,
>  0.856464279975445, 9.0762242654496e-05, -0.000148298146106784,
>  -0.00296804648853004, 0.00336588501549565, -0.00314742260306333,
>   -0.00221693916036901, -0.000181283657365512, 9.07622426544948e-05,
>   1.72579173368880, 0.238005942444999, 0.120912001671674, -0.141897803793986,
>   0.00957598738126672, 0.00290212917834065, 0.000268404362197191,
>  -0.000148298146106782, 0.238005942444999, 1.56986591648628,
> -0.141897803793988,  0.213872027136185, -0.000181283657365518,
> 9.07622426544981e-05,  -0.00203952216264033, -0.00296804648853004,
>  0.120912001671674,  -0.141897803793987, 1.53425760353976, 1.16174845591861,
>  0.000268404362197194,  -0.000148298146106774, 0.00850865103383899,
>  0.00336588501549565,  -0.141897803793985, 0.213872027136185,
> 1.16174845591861, 0.773168806527852 ), .Dim = c(8, 8))
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug 20 16:28:02 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 20 Aug 2001 08:28:02 -0700 (PDT)
Subject: [Rd] system.file("",package) (PR#1062)
In-Reply-To: <200108200644.IAA06705@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0108200825180.142352-100000@homer28.u.washington.edu>

On Mon, 20 Aug 2001 ripley@stats.ox.ac.uk wrote:

>
> Rather than special-case system.file("",package), I think we should remove
> the `or \code{""}' from the documentation.
>
>

Yes. I didn't think so initially, but on reflection
  system.file(some.file,package="blah")
probably should return "" if some.file happens to be "" or have length 0.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 20 17:38:51 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 20 Aug 2001 18:38:51 +0200
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <15232.50065.506799.227682@gargle.gargle.HOWL>
References: <15229.8451.41084.531037@gargle.gargle.HOWL>
 <15232.50065.506799.227682@gargle.gargle.HOWL>
Message-ID: <15233.15643.232282.557687@mithrandir.hornik.net>

>>>>> Martin Maechler writes:

> Thanks got to Brian Ripley, John Chambers, Tony Rossini, Setzer Woodrow,
> Dirk Eddelbuettel, Uwe Ligges, Detlef Steuer, and Kurt Hornik (in
> "historical" order) who have answered very helpfully!

> I was interested primarily in "commandline" solutions inside Unix/Linux,
> and hence not ODBC inside windows.  The other answers fall into three groups :

> 1) newer Perl versions (newer than Redhat 6.2 or Debian potato) have modules
>    Spreadsheet::ParseExcel and built on that DBI::Excel
>    {as "libspreadsheet-parseexcel-perl" and "libdbi-excel-perl" in Debian,
>     thanks to Dirk}.

>    Dirk has also done a done a perl script "xls2csv" built on the above,
>    sent to Brian Ripley who forwarded it to me.  
>    Dirk, maybe you'd post the latest version of that here as well, or give us
>    a pointer where that is available?

> 2) There's a GPL package "catdoc" with primary aim of 
>    "cat *.doc files" (i.e. `look at' M$-Word files).  The catdoc package is
>    written in C and also has an "xls2csv" (same name as above script!) program.
>    catdoc is in Debian or available at  http://www.fe.msk.ru/~vitus/catdoc/
>    Looking at that webpage however seems to indicate that development
>    somehow stopped end of 1999 (a "2k" bug ? :-).

> I've not yet compared the two xls2csv versions now potentially available
> to me, one reason being that I'd have to upgrade perl (or Redhat) first.
> At the moment, I'd tend to use the perl based solution.

> 3) John Chambers mentioned Duncan's  `R Gnumeric' interface --- the only
>    R-related answer--- at http://www.omegahat.org/RGnumeric/  
>    It is fairly new, but I'll definitely am looking at it, as well.

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

MM> A colleague has a dozen of excel sheets and also expects to get
MM> updates regularly.  He could open these in M$-Excel and export as
MM> *.csv manually, "bring back to Unix" and then read into R.  Of
MM> course there must be options to start programming this in something
MM> like visual basic, but we wouldn't to really want to...

MM> We also know that probably Gnumeric could do the job (since the xls
MM> files are said to be simple ...), but as far as I know that also
MM> does only work manually (and via GUI).  "gnumeric --help" does not
MM> suggest a command line version.  Are there other options (i.e. free
MM> software programs) to use from the command line (i.e. also in a
MM> shell script or from inside R)?

MM> Since this is not really an R topic, please reply to my e-mail
MM> only, not to R-help, and I'll summarize.  Thanks in advance!

> Thanks a lot, once more!

Martin,

One remark.  If we think we want to be able to import Excel data
directly into R then neither solution will do I think: the xls2csv
program from (2) is not good enough, and the other solutions require
tools that may not be available.  (Effort is currently put into removing
run-time and even build-time dependency on Perl and shell tools, and use
R scripts instead.)

I think it would be nice if package `foreign' had at least limited
support for reading in .xls files ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Mon Aug 20 19:45:33 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Mon, 20 Aug 2001 14:45:33 -0400 (EDT)
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <15233.15643.232282.557687@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.10.10108201442190.3905-100000@hsph.harvard.edu>

On Mon, 20 Aug 2001, Kurt Hornik wrote:
> 
> Martin,
> 
> One remark.  If we think we want to be able to import Excel data
> directly into R then neither solution will do I think: the xls2csv
> program from (2) is not good enough, and the other solutions require
> tools that may not be available.  (Effort is currently put into removing
> run-time and even build-time dependency on Perl and shell tools, and use
> R scripts instead.)
> 
> I think it would be nice if package `foreign' had at least limited
> support for reading in .xls files ...

There is complete documentation for the Excel format (BIFF I think its
called) in the Excel SDK--- I'm not sure where you get it (it is probably
on one of the MSDN CDs somewhere, but it doesn't appear to be on the
website). For Excel 2002 (aka ExcelXP) as with most of the MS OfficeXP 
line, they've added native XML support making reading/writing files much
less of a problem.


 > > -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 20 19:52:35 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 20 Aug 2001 19:52:35 +0100 (BST)
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <Pine.GSO.4.10.10108201442190.3905-100000@hsph.harvard.edu>
Message-ID: <Pine.LNX.4.31.0108201949330.22859-100000@gannet.stats>

On Mon, 20 Aug 2001, Byron Ellis wrote:

> On Mon, 20 Aug 2001, Kurt Hornik wrote:
> >
> > Martin,
> >
> > One remark.  If we think we want to be able to import Excel data
> > directly into R then neither solution will do I think: the xls2csv
> > program from (2) is not good enough, and the other solutions require
> > tools that may not be available.  (Effort is currently put into removing
> > run-time and even build-time dependency on Perl and shell tools, and use
> > R scripts instead.)
> >
> > I think it would be nice if package `foreign' had at least limited
> > support for reading in .xls files ...
>
> There is complete documentation for the Excel format (BIFF I think its
> called) in the Excel SDK--- I'm not sure where you get it (it is probably
> on one of the MSDN CDs somewhere, but it doesn't appear to be on the
> website). For Excel 2002 (aka ExcelXP) as with most of the MS OfficeXP
> line, they've added native XML support making reading/writing files much
> less of a problem.

Unfortunately, it's plain wrong according to the authors of the Perl
addons.

Gnumeric has reasonably readable code for this ...

It's a problem: those who really need this have ways (Star Office,
Gnumeric, Perl scripts, rebooting into W2k) and those who don't haven;t
the motivation.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug 20 21:55:37 2001
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Mon, 20 Aug 2001 22:55:37 +0200 (MET DST)
Subject: [Rd] interrupting Sys.sleep (PR#1063)
Message-ID: <200108202055.WAA16443@pubhealth.ku.dk>


On Linux R1.3.0 (and current pre1.3.1 and pre1.4.0)
 Sys.sleep(30)
interrupt with CTRL-C
 Sys.sleep(30)
causes a segmentation fault. It doesn't happen under Windows (2000).


	-thomas





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Mon Aug 20 22:24:04 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Mon, 20 Aug 2001 14:24:04 -0700
Subject: [Rd] interrupting Sys.sleep (PR#1063)
In-Reply-To: <200108202055.WAA16443@pubhealth.ku.dk>
Message-ID: <200108202125.OAA01261@pine.frazmtn.com>

With both pre 1.3.1 and pre 1.4.0:
doesn't happen on Darwin either.

On Monday, August 20, 2001, at 01:55 PM, tlumley@u.washington.edu wrote:

>
> On Linux R1.3.0 (and current pre1.3.1 and pre1.4.0)
>  Sys.sleep(30)
> interrupt with CTRL-C
>  Sys.sleep(30)
> causes a segmentation fault. It doesn't happen under Windows (2000).
>
>
> 	-thomas
>
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Tue Aug 21 00:13:29 2001
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Tue, 21 Aug 2001 01:13:29 +0200 (MET DST)
Subject: [Rd] error message in chol() (PR#1061)
Message-ID: <200108202313.BAA16976@pubhealth.ku.dk>


On Mon, 20 Aug 2001, Prof Brian Ripley wrote:

> On Sun, 19 Aug 2001 jerome@stat.ubc.ca wrote:
> 
> > Full_Name: Jerome Asselin
> > Version: 1.3.0
> > OS: Windows 98
> > Submission from: (NULL) (24.77.112.193)
> >
> >
> >
> > I am having accuracy problems involving the computation of inverse of
> > nonnegative definite matrices with solve(). I also have to compute the
> > Choleski decomposition of matrices. My numerical problems involving solve()
> > made me find a bug in the chol() function. Here is an example.
> >
> > #Please, load the (8x8) matrix "mat" given below.
> > #The matrix "mat" is indeed invertible as
> > solve(mat)
> > #exists. However, the command
> > chol(mat)
> > #claims that "mat" is singular. The correct error message should be
> > #that "mat" is not symmetric positive definite.
> 
> Yes.  Message changed.  Actually, it only uses the upper triangle,
> so symmetry is assumed, as the help page says....

Ok. Thank you.

> > #In fact, the matrix "mat" should be symmetric, but if
> > #we adjust for rounding errors by
> > chol((mat+t(mat))/2)
> > #we have the same error message in R, whereas S-Plus works (with
> > #a warning message saying that the rank is not full).
> 
> Well, the symmetrized matrix is not even close to positive definite, so
> what does `works' mean?
> 
> > eigen((mat+t(mat))/2)
> $values:
> [1]  2.3768888  1.8976031  1.4630238  0.9286787  0.9159388  0.5205478  0.5018393
> [8] -0.1343581
>  ...
> 
> L <- chol((mat+t(mat))/2)
> t(L) %*% L - (mat+t(mat))/2
> 
> has one element of about 0.27.  That's just undocumented in S-PLUS.
> 
> Generally, if you want good numerical control you should be using eigen
> and not chol, and if you know your matrix is symmetric, you can do better
> than solve().  Have you considered the Matrix package?

Thanks for the tips about eigen(). My attempt to reduce the use of solve()
and to use eigen to resolve rank deficiencies appears to be successful.

Jerome Asselin

> > mat <- structure(c(0.587765115222886, 0.167899163888134, -1.17517413388306e-05,
> >   2.84014489816759e-05, -0.00314742260306333, 0.00957598738126672,
> >  -0.000181283657365524, 0.000268404362197193, 0.167899163888134,
> >  0.830166933867836, 2.84014489816759e-05, -6.37164529062413e-05,
> > -0.00221693916036902, 0.00290212917834065, 9.0762242654496e-05,
> >  -0.000148298146106774, -1.17517413388306e-05, 2.84014489816759e-05,
> >  0.592681746779869, 0.155708697468761, -0.000181283657365506,
> >  0.000268404362197185, -0.00203952216264033, 0.00850865103383899,
> >  2.84014489816759e-05, -6.37164529062413e-05, 0.155708697468761,
> >  0.856464279975445, 9.0762242654496e-05, -0.000148298146106784,
> >  -0.00296804648853004, 0.00336588501549565, -0.00314742260306333,
> >   -0.00221693916036901, -0.000181283657365512, 9.07622426544948e-05,
> >   1.72579173368880, 0.238005942444999, 0.120912001671674, -0.141897803793986,
> >   0.00957598738126672, 0.00290212917834065, 0.000268404362197191,
> >  -0.000148298146106782, 0.238005942444999, 1.56986591648628,
> > -0.141897803793988,  0.213872027136185, -0.000181283657365518,
> > 9.07622426544981e-05,  -0.00203952216264033, -0.00296804648853004,
> >  0.120912001671674,  -0.141897803793987, 1.53425760353976, 1.16174845591861,
> >  0.000268404362197194,  -0.000148298146106774, 0.00850865103383899,
> >  0.00336588501549565,  -0.141897803793985, 0.213872027136185,
> > 1.16174845591861, 0.773168806527852 ), .Dim = c(8, 8))
> >
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Aug 21 02:57:15 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Mon, 20 Aug 2001 20:57:15 -0500
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <15232.50065.506799.227682@gargle.gargle.HOWL>
References: <15229.8451.41084.531037@gargle.gargle.HOWL>
 <15232.50065.506799.227682@gargle.gargle.HOWL>
Message-ID: <15233.49147.3828.874363@sonny.eddelbuettel.com>


  Martin> 1) newer Perl versions (newer than Redhat 6.2 or Debian potato) 

The Perl version shouldn't matter for as long it can install from the CPAN
sources. 

  Martin>    Dirk has also done a done a perl script "xls2csv" built on the
  Martin> above, sent to Brian Ripley who forwarded it to me.  Dirk, maybe
  Martin> you'd post the latest version of that here as well, or give us a
  Martin> pointer where that is available?

It just so happened that Brian had asked about that topic when I was playing
with an example from the Spreadsheet::ParseExcel module I was revisiting. I
sent him the hand-edited version (mostly more indentation, renamed variables)
I had plauyed to grok it better. As I'm currently on a different machine, I
can only the (somewhat terse) original dmpEx.pl. There are variants of in the
sample/ directory of Spreadsheet::ParseExcel.

IMHO trying to teach R to read .xls files is opening a huge can of worms with
users who might be a little too agnostic about exactly how they have saved
their data.

Regards, Dirk


use strict;
if(!(defined $ARGV[0])) {
    print<<EOF;
Usage: $0 Excel_File
EOF
    exit;
}
use Spreadsheet::ParseExcel;
my $oExcel = new Spreadsheet::ParseExcel;
my $oBook = $oExcel->Parse($ARGV[0]);

my($iR, $iC, $oWkS, $oWkC);
print "=========================================\n";
print "FILE  :", $oBook->{File} , "\n";
print "COUNT :", $oBook->{SheetCount} , "\n";
print "AUTHOR:", $oBook->{Author} , "\n";
#for(my $iSheet=0; $iSheet < $oBook->{SheetCount} ; $iSheet++) {
#    $oWkS = $oBook->{Worksheet}[$iSheet];
foreach my $oWkS (@{$oBook->{Worksheet}}) {
    print "--------- SHEET:", $oWkS->{Name}, "\n";
    for(my $iR = $oWkS->{MinRow} ; 
            defined $oWkS->{MaxRow} && $iR <= $oWkS->{MaxRow} ; $iR++) {
        for(my $iC = $oWkS->{MinCol} ;
                        defined $oWkS->{MaxCol} && $iC <= $oWkS->{MaxCol} ; $iC++) {
            $oWkC = $oWkS->{Cells}[$iR][$iC];
            print "( $iR , $iC ) =>", $oWkC->Value, "\n" if($oWkC);
print $oWkC->{_Kind}, "\n";
        }
    }
}


-- 
Our mailserver had a hardware failure while we were gone during the 2nd half 
of July. If I did not respond to a mail you sent then, or if you experienced a
a mail bounce, could you kindly resend it? Sorry for the inconvenience -- Dirk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Tue Aug 21 06:15:02 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue, 21 Aug 2001 07:15:02 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200108210515.f7L5F2Z15769@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1050 *
Subject: error in ksmooth C code + patch
From: htang@hpl.hp.com
Date: Mon, 13 Aug 2001 04:57:46 +0200 (MET DST)
--fixed for 1.3.1

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)

Directory:  Macintosh

* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800
* PR# 1023 *
Subject: data function
From: wild@stat.auckland.ac.nz
Date: Fri, 13 Jul 2001 02:48:53 +0200 (MET DST)
--Mac-specific

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1051 *
Subject:      erappin' - daily morning update 8-13-01
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Mon, 13 Aug 2001 09:18:54 -0400
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
* PR# 1053 *
Subject:      erappin' - daily morning update 8-14-01
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Tue, 14 Aug 2001 07:00:20 -0400
* PR# 1054 *
Subject: documented but missing from the code
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Wed, 15 Aug 2001 12:11:42 -0400
* PR# 1055 *
Subject:      books - special offers by eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Wed, 15 Aug 2001 22:01:34 -0400
* PR# 1056 *
Subject:      books - special offers by eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Thu, 16 Aug 2001 00:03:08 -0400
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
* PR# 1058 *
Subject:      erappin' - daily morning update 8-16-01
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Thu, 16 Aug 2001 07:40:00 -0400
* PR# 1059 *
Subject: lm()
From: JDiaz-Saiz@uh.edu
Date: Thu, 16 Aug 2001 19:31:07 +0200 (MET DST)
* PR# 1060 *
Subject: Error in report.
From: "Joaquin Diaz-Saiz" <xoaquin@worldnet.att.net>
Date: Thu, 16 Aug 2001 20:13:32 -0500
* PR# 1061 *
Subject: error message in chol()
From: jerome@stat.ubc.ca
Date: Sun, 19 Aug 2001 23:05:47 +0200 (MET DST)
* PR# 1062 *
Subject: system.file("",package)
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Sun, 19 Aug 2001 16:01:57 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 21 16:22:57 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 21 Aug 2001 16:22:57 +0100 (BST)
Subject: [Rd] Re: [R] Problem using GLM in a loop (fwd)
Message-ID: <Pine.LNX.4.31.0108211605490.11097-100000@gannet.stats>

This example is caused by R's messing with formula environments.

That's explained in ?formula, but should it not be explained in
?model.frame ?

Simple test:

data <- data.frame(y=rnorm(100), x=1:100)

testit <- function(formula)
{
   weights <- runif(100)
   glm(formula, weights=weights, data=data)
}
testit(y ~ x)

weights is looked for in the environment of the formula, not of the call
to glm.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

---------- Forwarded message ----------
Date: Tue, 21 Aug 2001 15:47:34 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
To: Isabelle ZABALZA <isabelle.zabalza-mezghani@ifp.fr>
Subject: Re: [R] Problem using GLM in a loop

It's a scope problem: use

data$weights <- 1/sig

and it will work.  It's finding the system function weights, not your
variable.

I don't really understand this one as yet.


On Tue, 21 Aug 2001, Isabelle ZABALZA wrote:

> Hello,
>
> I am try to perform a modeling which is relevant in a strongly
> heteroscedastic context.
> So I perform a dual modeling (modeling of both mean and variance of a
> response) in using the following loop:
>
> jointmod <- function(formula, data, itercrit=10,devcrit=0.0001)
> {
> #
> # Init step
> #
> init <- glm(formula=formula,family=gaussian, data=data)
> response <- resid(init,type="response") + predict(init,type="response")
> mu <- predict(init,type="response")
> iter <- 1
> dev <- init$deviance
> if (dev != 0) vardev <- 1
> else stop(message="Null deviance in initialisation step")
> endformula_ strsplit(formula,"~")[[3]]
> formulavar_paste("d","~")
> formulavar_as.formula(paste(formulavar,endformula))
> #
> # Modeling loop
> #
> while ((iter <= itercrit)| (vardev > devcrit)) {
> d_(response - mu)^2
> modvar_glm(formula=formulavar,family=Gamma(link=log),data=data)
> sig <- predict(modvar,type="response")
> weights <- 1/sig
> modesp <- glm(formula=formula,
> family=gaussian,data=data,weights=weights)
> mu <- predict(modesp,type="response")
> devold <- dev
> dev <- modesp$deviance
> vardev <- (devold -dev)/devold
> iter <- iter + 1
> }
>
> list(modesp=modesp, modvar=modvar, iter=iter, vardev=vardev)
> }
>
> This program evaluation always stops when evaluating the "modesp" line :
>
>          modesp <- glm(formula=formula,
> family=gaussian,data=data,weights=weights)
> with the following error:
> error in
> model.frame(formula,rownames,variables,varnames,extras,extranames, :
>            invalid variable type.
>
> The same program without specifying weights runs.
> I don't understand this behavior since when I execute the glm command
> with weights out of the program, it runs.
>
> I run R1.3.0 under Windows.
>
> If someone can help me ...
>
> Isabelle Zabalza-Mezghani
>
>
>
>
>
>
> --
> Isabelle Zabalza-Mezghani          Tel : 01 47 52 61 99
> Institut Franais du Ptrole       E-mail : isabelle.zabalza-mezghani@ifp.fr
> 1-4 Av. Bois Preau - Bat Lauriers
> 92852 Rueil Malmaison Cedex, France
>
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jamesmeyers@etex.net  Tue Aug 21 18:31:33 2001
From: jamesmeyers@etex.net (jamesmeyers@etex.net)
Date: Tue, 21 Aug 2001 19:31:33 +0200 (MET DST)
Subject: [Rd] GREAT DEAL (PR#1064)
Message-ID: <200108211731.TAA27331@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0007_01C12A3B.2E9D91C0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

GO HERE CHECK OUT THESE GREAT ITEMS=20

IF YOU OUR INTERESTED IN WHOLESALE PRICES FOR YOUR BUSINESS OR =
FLEAMARKET BUSINESS, THEN EMAIL US AND WE WILL SEND YOU A WHOLE SALE =
PRICE LIST....THAT YOU CAN ORDER ITEMS 1 AT A TIME OR AS MANY AS YOU =
WANT....=20

START YOUR OWN HOME BUSINESS , SEND FOR YOUR PRICE LIST TODAY.. AND =
START MAKING MONEY RIGHT AWAY, WITH YOUR OWN GIFT SHOP, SALE AT =
FLEAMARKETS,=20

PARTYS=20

OR WHAT EVER YOU WANT...=20

OR VISIT OUR PRODUCTS PAGE. AND LET US KNOW BY EMAIL WHAT YOU WANT, AND =
WE WILL OFFER YOU A GREAT DISCOUNT ON WHAT YOU WANT ,,=20

HURRY CHISTMAS IS JUST ABOUT HERE..=20

THANK YOU
JAMES MEYERS=20

jamesmeyers@etex.net=20



<http://members.fortunecity.com/jamesmeyers1>


------=_NextPart_000_0007_01C12A3B.2E9D91C0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<META content=3D"MSHTML 5.50.4207.2601" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>GO HERE CHECK OUT THESE GREAT ITEMS</FONT><FONT=20
face=3D"Times New Roman"> </P></FONT><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>IF YOU OUR INTERESTED IN WHOLESALE PRICES FOR YOUR =
BUSINESS OR=20
FLEAMARKET BUSINESS, THEN EMAIL US AND WE WILL SEND YOU A WHOLE SALE =
PRICE=20
LIST....THAT YOU CAN ORDER ITEMS 1 AT A TIME OR AS MANY AS YOU=20
WANT....</FONT><FONT face=3D"Times New Roman"> </P></FONT><FONT =
color=3D#ff0000=20
size=3D2>
<P align=3Dcenter>START YOUR OWN HOME BUSINESS , SEND FOR YOUR PRICE =
LIST TODAY..=20
AND START MAKING MONEY RIGHT AWAY, WITH YOUR OWN GIFT SHOP, SALE AT =
FLEAMARKETS,=20
</P>
<P align=3Dcenter>PARTYS</FONT><FONT face=3D"Times New Roman"> =
</P></FONT><FONT=20
color=3D#ff0000 size=3D2>
<P align=3Dcenter>OR WHAT EVER YOU WANT...</FONT><FONT face=3D"Times New =
Roman">=20
</P></FONT><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>OR VISIT OUR PRODUCTS PAGE. AND LET US KNOW BY EMAIL =
WHAT YOU=20
WANT, AND WE WILL OFFER YOU A GREAT DISCOUNT ON WHAT YOU WANT =
,,</FONT><FONT=20
face=3D"Times New Roman"> </P></FONT><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>HURRY CHISTMAS IS JUST ABOUT HERE..</FONT><FONT=20
face=3D"Times New Roman"> </P></FONT><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>THANK YOU<BR>JAMES MEYERS</FONT><FONT face=3D"Times =
New Roman">=20
</P></FONT><U><FONT color=3D#0000ff size=3D2>
<P align=3Dcenter><A =
href=3D"mailto:jamesmeyers@etex.net">jamesmeyers@etex.net</A>=20
</P>
<P align=3Dcenter></U></FONT><FONT=20
face=3D"Times New Roman">&nbsp;</P></FONT><U><FONT color=3D#0000ff =
size=3D2>
<P=20
align=3Dcenter>&lt;http://members.fortunecity.com/jamesmeyers1&gt;</P></U=
></FONT></DIV></BODY></HTML>

------=_NextPart_000_0007_01C12A3B.2E9D91C0--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue Aug 21 19:23:26 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 21 Aug 2001 11:23:26 -0700 (PDT)
Subject: [Rd] interrupting Sys.sleep (PR#1063)
In-Reply-To: <200108202055.WAA16443@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0108211114160.88898-100000@homer06.u.washington.edu>

On Mon, 20 Aug 2001 tlumley@u.washington.edu wrote:

>
> On Linux R1.3.0 (and current pre1.3.1 and pre1.4.0)
>  Sys.sleep(30)
> interrupt with CTRL-C
>  Sys.sleep(30)
> causes a segmentation fault. It doesn't happen under Windows (2000).
>

The problem is that SleepHandler is not removed if the sleep is
interrupted. The segfault occurs if Sys.sleep() called again, or as soon
as the timer runs out.

It looks as though either do_syssleep needs to handle SIGINT itself or
jump_to_toplevel needs to know about event handlers.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 22 07:27:27 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 22 Aug 2001 08:27:27 +0200 (MET DST)
Subject: [Rd] X11 protocol errors after all x11 devices are closed (PR#1065)
Message-ID: <200108220627.IAA29451@pubhealth.ku.dk>

> x11()
> dev.off()
null device
          1
> x11()
> plot.new()
Warning messages:
1: X11 protocol error: BadAccess (attempt to access private resource denied)
2: X11 protocol error: BadAccess (attempt to access private resource denied)

This only happens if all x11 devices are shut down, so the X11 connection
is restarted.  We had problems with this when the event handlers
were changed prior to 1.3.0, and it looks as if the logic is still
incorrect.

As far as I can see subsequent plots are correct.

Carrying on:

> dev.off()
null device
          1
> x11()
> plot.new()
Warning message:
X11 protocol error: BadAccess (attempt to access private resource denied)

(only one error this time).


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status =
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug 22 10:50:49 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 22 Aug 2001 11:50:49 +0200
Subject: [Rd] X11 protocol errors after all x11 devices are closed (PR#1065)
In-Reply-To: <200108220627.IAA29451@pubhealth.ku.dk>
References: <200108220627.IAA29451@pubhealth.ku.dk>
Message-ID: <15235.32889.867213.440574@mithrandir.hornik.net>

>>>>> ripley  writes:

>> x11()
>> dev.off()
> null device
>           1
>> x11()
>> plot.new()
> Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)

> This only happens if all x11 devices are shut down, so the X11 connection
> is restarted.  We had problems with this when the event handlers
> were changed prior to 1.3.0, and it looks as if the logic is still
> incorrect.

> As far as I can see subsequent plots are correct.

> Carrying on:

>> dev.off()
> null device
>           1
>> x11()
>> plot.new()
> Warning message:
> X11 protocol error: BadAccess (attempt to access private resource denied)

> (only one error this time).

On Debian GNU/Linux, I do not seem to get the errors:

R> x11()
R> dev.off()
null device 
          1 
R> x11()
R> plot.new()
R> dev.off()
null device 
          1 
R> x11()
R> plot.new()

-k


> --please do not edit the information below--

> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status =
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 22
>  language = R

> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maslcgr@bath.ac.uk  Wed Aug 22 12:04:58 2001
From: maslcgr@bath.ac.uk (maslcgr@bath.ac.uk)
Date: Wed, 22 Aug 2001 13:04:58 +0200 (MET DST)
Subject: [Rd] Corrupted binary?? (PR#1066)
Message-ID: <200108221104.NAA03544@pubhealth.ku.dk>


I've tried downloading SetupR.exe from the Bristol site and 
from the Vienna site, and in both cases the file appears to 
have become corrupted ...  do you know whether other users 
have had similar problems?

Thanks

Chris Rogers

-----------------------------------------------------------------------
L C G Rogers, Professor of Probability              tel:+44 1225 826224
Department of Mathematical Sciences                 fax:+44 1225 826492
University of Bath, Bath BA2 7AY, GB

Email: L.C.G.Rogers@bath.ac.uk  web: www.bath.ac.uk/~maslcgr/home.html
-----------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Aug 22 13:35:24 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 22 Aug 2001 14:35:24 +0200 (MET DST)
Subject: [Rd] X11 protocol errors after all x11 devices are closed (PR#1065)
Message-ID: <200108221235.OAA05855@pubhealth.ku.dk>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    >> x11()
    >> dev.off()
    BDR> null device
    BDR> 1
    >> x11()
    >> plot.new()
    BDR> Warning messages:
    BDR> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
    BDR> 2: X11 protocol error: BadAccess (attempt to access private resource denied)

    BDR> This only happens if all x11 devices are shut down, so the X11 connection
    BDR> is restarted.  We had problems with this when the event handlers
    BDR> were changed prior to 1.3.0, and it looks as if the logic is still
    BDR> incorrect.

    BDR> As far as I can see subsequent plots are correct.

    BDR> Carrying on:

    >> dev.off()
    BDR> null device
    BDR> 1
    >> x11()
    >> plot.new()
    BDR> Warning message:
    BDR> X11 protocol error: BadAccess (attempt to access private resource denied)
    BDR> (only one error this time).

Just this morning,
I found (again!, we had something close to this before) 
the following related bugous behavior :
After interrupting a plot (which would have taken a few minutes and was
"wrong" anyway), starting another plot, interrupting again [with C-c],
and maybe the same once more,
R started just giving a ">" prompt
but did not react any further at all.
(C-c would return the prompt, but no other reaction was possible)
Only killing the R process helped.

I may try to reproduce more exactly later today.
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Wed Aug 22 16:07:53 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 22 Aug 2001 11:07:53 -0400
Subject: [Rd] X11 protocol errors after all x11 devices are closed (PR#1065)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 22 Aug 2001 08:27:27 +0200 (MET DST)"
References: <200108220627.IAA29451@pubhealth.ku.dk>
Message-ID: <pxzo8sgmk6.fsf@infiniti.ece.cmu.edu>


ripley@stats.ox.ac.uk writes:

> > x11()
> > dev.off()
> null device
>           1
> > x11()
> > plot.new()
> Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 
> This only happens if all x11 devices are shut down, so the X11 connection
> is restarted.  We had problems with this when the event handlers
> were changed prior to 1.3.0, and it looks as if the logic is still
> incorrect.
> 
> As far as I can see subsequent plots are correct.
> 
> Carrying on:
> 
> > dev.off()
> null device
>           1
> > x11()
> > plot.new()
> Warning message:
> X11 protocol error: BadAccess (attempt to access private resource denied)
> 
> (only one error this time).


I see the same thing on an AIX machine with the patched R-release of
yesterday.  I've recently noticed this problem when I tried to change
the colortype.  For this you have to shutdown all devices, then I got
the error messages.  I figured this might be an "AIX" thing at
first...

Possibly related (if not, I'll file separate bug reports):

1) I cannot reset the colortype.  When I run out of colors, I used to
   be able to just shutdown all devices, then restart with
   x11(colortype=....).  Now I get:

R> x11()
R> plot(1:100,col=rainbow(100))
Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  : 
        Error: X11 cannot allocate additional graphics colors.
Consider using X11 with colortype="pseudo.cube" or "gray".
R> dev.off()
null device 
          1 
R> x11(colortype="pseudo.cube")
R> plot(1:100,col=rainbow(100))
Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  : 
        Error: X11 cannot allocate additional graphics colors.
Consider using X11 with colortype="pseudo.cube" or "gray".
In addition: Warning messages: 
1: X11 protocol error: BadAccess (attempt to access private resource denied) 
2: X11 protocol error: BadAccess (attempt to access private resource denied) 
3: X11 protocol error: BadAccess (attempt to access private resource denied) 
R> dev.off()
null device 
          1 
R> x11(colortype="gray")
R> plot(1:100,col=rainbow(100))
Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  : 
        Error: X11 cannot allocate additional graphics colors.
Consider using X11 with colortype="pseudo.cube" or "gray".
In addition: Warning messages: 
1: X11 protocol error: BadAccess (attempt to access private resource denied) 
2: X11 protocol error: BadAccess (attempt to access private resource denied) 
3: X11 protocol error: BadAccess (attempt to access private resource denied) 
R> dev.off()
null device 
          1 


2) Plots are not updated if the window is made visible (from being
   partially obscured) during a computation before or during the plot.
   Let's say my xterm (or emacs window) covers the north-west quadrant
   of R's x11 device window.  Then:

R> data(iris)
R> pairs(iris[,1:4])

   While pairs is drawing, I bring the device window to the front.
   All plots that were drawn by pairs will not be redrawn once pairs
   is done.  So I have to push the device window in the back, then
   bring it to the front again to force a redraw/refresh.

   This gets really annoying when you have two X11 devices open.  If
   you bring the inactive one to the front while R is busy plotting on
   the active device, the inactive one will not be redrawn/refreshed
   once plotting is done.  Just white space staring back at you...

Regards,
  -tom



R> R.version
         _                     
platform powerpc-ibm-aix4.3.1.0
arch     powerpc               
os       aix4.3.1.0            
system   powerpc, aix4.3.1.0   
status   Patched               
major    1                     
minor    3.0                   
year     2001                  
month    08                    
day      21                    
language R                     


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 22 18:27:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 22 Aug 2001 18:27:05 +0100 (BST)
Subject: [Rd] X11 protocol errors after all x11 devices are closed
 (PR#1065)
In-Reply-To: <pxzo8sgmk6.fsf@infiniti.ece.cmu.edu>
Message-ID: <Pine.GSO.4.31.0108221824520.29653-100000@auk.stats>

Tom,

Thanks.  Yes, I think 1) is related, and the original bug seems only to
happen on pseudocolor screens (which I was using).

I suspect that narrows it down enough for me to find it.

Brian

On 22 Aug 2001, Thomas Vogels wrote:

>
> ripley@stats.ox.ac.uk writes:
>
> > > x11()
> > > dev.off()
> > null device
> >           1
> > > x11()
> > > plot.new()
> > Warning messages:
> > 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> > 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> >
> > This only happens if all x11 devices are shut down, so the X11 connection
> > is restarted.  We had problems with this when the event handlers
> > were changed prior to 1.3.0, and it looks as if the logic is still
> > incorrect.
> >
> > As far as I can see subsequent plots are correct.
> >
> > Carrying on:
> >
> > > dev.off()
> > null device
> >           1
> > > x11()
> > > plot.new()
> > Warning message:
> > X11 protocol error: BadAccess (attempt to access private resource denied)
> >
> > (only one error this time).
>
>
> I see the same thing on an AIX machine with the patched R-release of
> yesterday.  I've recently noticed this problem when I tried to change
> the colortype.  For this you have to shutdown all devices, then I got
> the error messages.  I figured this might be an "AIX" thing at
> first...
>
> Possibly related (if not, I'll file separate bug reports):
>
> 1) I cannot reset the colortype.  When I run out of colors, I used to
>    be able to just shutdown all devices, then restart with
>    x11(colortype=....).  Now I get:
>
> R> x11()
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> R> dev.off()
> null device
>           1
> R> x11(colortype="pseudo.cube")
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> In addition: Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 3: X11 protocol error: BadAccess (attempt to access private resource denied)
> R> dev.off()
> null device
>           1
> R> x11(colortype="gray")
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> In addition: Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 3: X11 protocol error: BadAccess (attempt to access private resource denied)
> R> dev.off()
> null device
>           1
>
>
> 2) Plots are not updated if the window is made visible (from being
>    partially obscured) during a computation before or during the plot.
>    Let's say my xterm (or emacs window) covers the north-west quadrant
>    of R's x11 device window.  Then:
>
> R> data(iris)
> R> pairs(iris[,1:4])
>
>    While pairs is drawing, I bring the device window to the front.
>    All plots that were drawn by pairs will not be redrawn once pairs
>    is done.  So I have to push the device window in the back, then
>    bring it to the front again to force a redraw/refresh.
>
>    This gets really annoying when you have two X11 devices open.  If
>    you bring the inactive one to the front while R is busy plotting on
>    the active device, the inactive one will not be redrawn/refreshed
>    once plotting is done.  Just white space staring back at you...
>
> Regards,
>   -tom
>
>
>
> R> R.version
>          _
> platform powerpc-ibm-aix4.3.1.0
> arch     powerpc
> os       aix4.3.1.0
> system   powerpc, aix4.3.1.0
> status   Patched
> major    1
> minor    3.0
> year     2001
> month    08
> day      21
> language R
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From heydebre@molgen.mpg.de  Wed Aug 22 19:29:29 2001
From: heydebre@molgen.mpg.de (heydebre@molgen.mpg.de)
Date: Wed, 22 Aug 2001 20:29:29 +0200 (MET DST)
Subject: [Rd] cutree (PR#1067)
Message-ID: <200108221829.UAA08571@pubhealth.ku.dk>

Full_Name: Anja von Heydebreck
Version: 1.3.0
OS: Alpha Unix
Submission from: (NULL) (141.14.19.61)


Hi,

I repeatedly obtained meaningless results from the function 'cutree' 
in the 'mva' package, when the argument 'h' was greater or equal to 
the maximum height occuring: 

> library('mva')
> y
     [,1] [,2] [,3] [,4]
[1,]    0    1   -1    1
[2,]    0   -1    1    0
[3,]    0   -1    1    1
[4,]   -1   -2    1    0
> d <- dist(y, method="manhattan")
> hc <- hclust(d, method = "complete")
> hc$height
[1] 1 3 7
> cluster <- cutree(hc, h=max(hc$height))
> cluster
[1] 1108612352          1 1074517880          1

Best regards,

Anja


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Thu Aug 23 01:32:51 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Wed, 22 Aug 2001 19:32:51 -0500
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <200108221235.OAA05855@pubhealth.ku.dk>; from maechler@stat.math.ethz.ch on Wed, Aug 22, 2001 at 02:35:24PM +0200
References: <200108221235.OAA05855@pubhealth.ku.dk>
Message-ID: <20010822193251.A10682@nokomis.stat.umn.edu>

Martin wrote:

> Just this morning,
> I found (again!, we had something close to this before) 
> the following related bugous behavior :
> After interrupting a plot (which would have taken a few minutes and was
> "wrong" anyway), starting another plot, interrupting again [with C-c],
> and maybe the same once more,
> R started just giving a ">" prompt
> but did not react any further at all.
> (C-c would return the prompt, but no other reaction was possible)
> Only killing the R process helped.
> 
> I may try to reproduce more exactly later today.

I'm surprised we don't get more of these sorts of things on UNIX.  Our
current UNIX interrupt handling approach takes an immediate LONGJMP
out of the signal handler no matter where the signal occurs (except
for two places where signals are suspended).  Any place where an
invariant is temporarily broken, any place where an assignment is not
yet complete, is a potential trouble spot.

I've been meaning to raise this issue at some point: I think we will
need to eventually spend some time re-examining how we want to handle
interrupts.  Right now on Windows/Mac interrupts are only processed at
special points in the evaluation process, which is a bit restrictive
(but perhaps unavoidable due to OS limitations).  On UNIX on the other
hand we LONGJUMP out of the signal handler except for the very few
places where the signal gets masked temporarily (GC and one place in
graphics I believe).  The UNIX approach is much too loose even now,
and it becomes even more untenable if we add any kind of threading
support.

We will I think have to come up with a cleaner model for very
selectively enabling interrupt processing, perhaps with some
integration with the external function registration mechanism Duncan
added recently (e.g. marking a function as one where LONGJMP's are
safe).  We will also need some means of controlling interrupt
behaviour from R, such as having some sort of without.interrupts and
with.interrupts functions to be able to program reliable interaction
with interrupts at the R level. (Another sort of thing we might
consider is suspending interrupts during on.exit processing.)

It's a farily big can of worms, and probably not urgent for now, but
we will need to look at it eventually.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Thu Aug 23 01:32:59 2001
From: luke@nokomis.stat.umn.edu (luke@nokomis.stat.umn.edu)
Date: Thu, 23 Aug 2001 02:32:59 +0200 (MET DST)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...) (PR#1068)
Message-ID: <200108230032.CAA09962@pubhealth.ku.dk>

Martin wrote:

> Just this morning,
> I found (again!, we had something close to this before) 
> the following related bugous behavior :
> After interrupting a plot (which would have taken a few minutes and was
> "wrong" anyway), starting another plot, interrupting again [with C-c],
> and maybe the same once more,
> R started just giving a ">" prompt
> but did not react any further at all.
> (C-c would return the prompt, but no other reaction was possible)
> Only killing the R process helped.
> 
> I may try to reproduce more exactly later today.

I'm surprised we don't get more of these sorts of things on UNIX.  Our
current UNIX interrupt handling approach takes an immediate LONGJMP
out of the signal handler no matter where the signal occurs (except
for two places where signals are suspended).  Any place where an
invariant is temporarily broken, any place where an assignment is not
yet complete, is a potential trouble spot.

I've been meaning to raise this issue at some point: I think we will
need to eventually spend some time re-examining how we want to handle
interrupts.  Right now on Windows/Mac interrupts are only processed at
special points in the evaluation process, which is a bit restrictive
(but perhaps unavoidable due to OS limitations).  On UNIX on the other
hand we LONGJUMP out of the signal handler except for the very few
places where the signal gets masked temporarily (GC and one place in
graphics I believe).  The UNIX approach is much too loose even now,
and it becomes even more untenable if we add any kind of threading
support.

We will I think have to come up with a cleaner model for very
selectively enabling interrupt processing, perhaps with some
integration with the external function registration mechanism Duncan
added recently (e.g. marking a function as one where LONGJMP's are
safe).  We will also need some means of controlling interrupt
behaviour from R, such as having some sort of without.interrupts and
with.interrupts functions to be able to program reliable interaction
with interrupts at the R level. (Another sort of thing we might
consider is suspending interrupts during on.exit processing.)

It's a farily big can of worms, and probably not urgent for now, but
we will need to look at it eventually.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jwe@bevo.che.wisc.edu  Thu Aug 23 03:56:33 2001
From: jwe@bevo.che.wisc.edu (John W. Eaton)
Date: Wed, 22 Aug 2001 21:56:33 -0500
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010822193251.A10682@nokomis.stat.umn.edu>
References: <200108221235.OAA05855@pubhealth.ku.dk>
 <20010822193251.A10682@nokomis.stat.umn.edu>
Message-ID: <15236.28897.468790.842201@ricotta.che.wisc.edu>

On 22-Aug-2001, Luke Tierney <luke@nokomis.stat.umn.edu> wrote:

| We will I think have to come up with a cleaner model for very
| selectively enabling interrupt processing, perhaps with some
| integration with the external function registration mechanism Duncan
| added recently (e.g. marking a function as one where LONGJMP's are
| safe).

FWIW, Octave doesn't do this correctly either, it just does a longjmp,
same as R, which can result in leaking memory, and possibly other bad
things.

The way Bash handles this is to only set a flag in the handler for
SIGINT, then at safe places in the code, there are

  QUIT;

statements.  These are macros that expand to some code that may
longjump somewhere depending on the interrupt state.  This method
avoids the problems of jumping out of the signal handler, which may
result in memory leaks or inconsistencies in global state.  The hard
part is inserting the (many!) QUIT statements, though it is probably
somewhat easier if this type of choice is made early on in the life of
the program instead of late.

I only mention Bash because it is a program that is expected to
handle a lot of interrupts without leaking memory or crashing, and
seems to do so reasonably well.

Packages like R and Octave also have to be able to handle interrupts
in calls Fortran or C code that may run for a long time, and which
cannot be modified (at least not easily) to add the equivalent QUIT
calls.  I'm not sure what the right solution is for cases like that.

jwe

-- 
www.octave.org        | Unfortunately we were hoplessly optimistic in 1954
www.che.wisc.edu/~jwe | about the problems of debugging FORTRAN programs.
                      |                                       -- J. Backus
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jwe@bevo.che.wisc.edu  Thu Aug 23 03:57:12 2001
From: jwe@bevo.che.wisc.edu (jwe@bevo.che.wisc.edu)
Date: Thu, 23 Aug 2001 04:57:12 +0200 (MET DST)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...) (PR#1069)
Message-ID: <200108230257.EAA10185@pubhealth.ku.dk>

On 22-Aug-2001, Luke Tierney <luke@nokomis.stat.umn.edu> wrote:

| We will I think have to come up with a cleaner model for very
| selectively enabling interrupt processing, perhaps with some
| integration with the external function registration mechanism Duncan
| added recently (e.g. marking a function as one where LONGJMP's are
| safe).

FWIW, Octave doesn't do this correctly either, it just does a longjmp,
same as R, which can result in leaking memory, and possibly other bad
things.

The way Bash handles this is to only set a flag in the handler for
SIGINT, then at safe places in the code, there are

  QUIT;

statements.  These are macros that expand to some code that may
longjump somewhere depending on the interrupt state.  This method
avoids the problems of jumping out of the signal handler, which may
result in memory leaks or inconsistencies in global state.  The hard
part is inserting the (many!) QUIT statements, though it is probably
somewhat easier if this type of choice is made early on in the life of
the program instead of late.

I only mention Bash because it is a program that is expected to
handle a lot of interrupts without leaking memory or crashing, and
seems to do so reasonably well.

Packages like R and Octave also have to be able to handle interrupts
in calls Fortran or C code that may run for a long time, and which
cannot be modified (at least not easily) to add the equivalent QUIT
calls.  I'm not sure what the right solution is for cases like that.

jwe

-- 
www.octave.org        | Unfortunately we were hoplessly optimistic in 1954
www.che.wisc.edu/~jwe | about the problems of debugging FORTRAN programs.
                      |                                       -- J. Backus

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Thu Aug 23 05:31:37 2001
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Thu, 23 Aug 2001 06:31:37 +0200 (MET DST)
Subject: [Rd] cex.axis in barplot() (PR#1070)
Message-ID: <200108230431.GAA10293@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.3.0
OS: Windows 98
Submission from: (NULL) (24.77.112.193)


I have a hard time to magnify the axis annotations in barplot()
Here are some examples:

#This one has no effect.
barplot(1:3,names.arg=1:3,cex.axis=3,xlab="x",ylab="y")
#This one magnifies the x and y labels
barplot(1:3,names.arg=1:3,cex.lab=3,xlab="x",ylab="y")
#This one has no effect.
barplot(1:3,names.arg=1:3,cex=3,xlab="x",ylab="y")

Maybe this could be added to the "wish list".

I assume that I will be able to create my own axis with
the axis() function.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Aug 23 07:52:24 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 23 Aug 2001 08:52:24 +0200
Subject: [Rd] cex.axis in barplot() (PR#1070)
References: <200108230431.GAA10293@pubhealth.ku.dk>
Message-ID: <3B84A828.E57B14DC@statistik.uni-dortmund.de>

jerome@stat.ubc.ca wrote:
> 
> Full_Name: Jerome Asselin
> Version: 1.3.0
> OS: Windows 98
> Submission from: (NULL) (24.77.112.193)
> 
> I have a hard time to magnify the axis annotations in barplot()
> Here are some examples:
> 
> #This one has no effect.
> barplot(1:3,names.arg=1:3,cex.axis=3,xlab="x",ylab="y")


>From the help:
 ...  further graphical parameters (par) are passed to plot.window() and
title(). 
[let me add: ... and not to axis()...]

But you can use:

 par(cex.axis=3)
 barplot(1:3, names.arg=1:3, xlab="x", ylab="y")


> #This one magnifies the x and y labels
> barplot(1:3,names.arg=1:3,cex.lab=3,xlab="x",ylab="y")

... as expected.


> #This one has no effect.
> barplot(1:3,names.arg=1:3,cex=3,xlab="x",ylab="y")

In this case (no symbols are drawn inside the plot, ...) also expected.

 
> Maybe this could be added to the "wish list".
> 
> I assume that I will be able to create my own axis with
> the axis() function.


Without looking at the code not so easy as the workaround described
above. An example:

  barplot(1:3, names.arg=1:3, xlab="x", ylab="y")
  axis(1, at=1:3)


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Thu Aug 23 10:46:46 2001
From: jerome@stat.ubc.ca (Jerome Asselin)
Date: Thu, 23 Aug 2001 02:46:46 -0700 (PDT)
Subject: [Rd] cex.axis in barplot() (PR#1070)
In-Reply-To: <3B84A828.E57B14DC@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.3.96.1010823024300.13312A-100000@hajek.stat.ubc.ca>


On Thu, 23 Aug 2001, Uwe Ligges wrote:

> jerome@stat.ubc.ca wrote:
> > 
> > Full_Name: Jerome Asselin
> > Version: 1.3.0
> > OS: Windows 98
> > Submission from: (NULL) (24.77.112.193)
> > 
> > I have a hard time to magnify the axis annotations in barplot()
> > Here are some examples:
> > 
> > #This one has no effect.
> > barplot(1:3,names.arg=1:3,cex.axis=3,xlab="x",ylab="y")
> 
> 
> >From the help:
>  ...  further graphical parameters (par) are passed to plot.window() and
> title(). 
> [let me add: ... and not to axis()...]

I did not realize that it wouldn't work because barplot() passes the
parameters to plot.window() or title(). Sorry about that.

> 
> But you can use:
> 
>  par(cex.axis=3)
>  barplot(1:3, names.arg=1:3, xlab="x", ylab="y")
> 

Thanks for the tip!

Jerome Asselin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Thu Aug 23 13:10:54 2001
From: fharrell@virginia.edu (fharrell@virginia.edu)
Date: Thu, 23 Aug 2001 08:10:54 -0400
Subject: [Rd] Fortran routines from LINPACK in S+ but not R
Message-ID: <3B84F2CE.695A20B0@virginia.edu>

Dear R Developers,

I should have had the Design library running in R by now but
have kept putting off changing some calls to LINPACK routines
to use those builtin to R.  Specifically I call dqrsl1 and dqr.
Would it be an easy task to put those in the next release of
R?  If not I'll finally bite the bullet and get back into
reading LINPACK documentation (which I have but haven't
examined in depth). 

If dqrsl1 and dqr are not truly parts of LINPACK but are
front-ends to routines that are, and if anyone has
those front-ends to share, that would also solve my problem
immediately.

Thanks -Frank
-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Thu Aug 23 13:16:09 2001
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 23 Aug 2001 08:16:09 -0400
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010822193251.A10682@nokomis.stat.umn.edu>
References: <200108221235.OAA05855@pubhealth.ku.dk> <20010822193251.A10682@nokomis.stat.umn.edu>
Message-ID: <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com>

On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
>I'm surprised we don't get more of these sorts of things on UNIX.  Our
>current UNIX interrupt handling approach takes an immediate LONGJMP
>out of the signal handler no matter where the signal occurs (except
>for two places where signals are suspended).  Any place where an
>invariant is temporarily broken, any place where an assignment is not
>yet complete, is a potential trouble spot.

Delphi protects against these kind of errors with "try ... except ..."
and "try ... finally ..." blocks to deal with exceptions.  The first
one executes special code if an exception occurs, the second
guarantees execution of cleanup code.

These are implemented as a linked list of records on the stack which
the exception handler knows how to interpret.  When a particular kind
of exception occurs, all "finally" blocks are executed in the
appropriate order (and the stack base pointer is moved to simulate
exits from all active routines) until an "except" block handling the
particular kind of exception is reached.

C doesn't have these statements built in, but presumably someone has
written macros to do the same sort of thing.  Adding them would be a
lot of work, but would be worthwhile.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 23 13:27:22 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 23 Aug 2001 13:27:22 +0100 (BST)
Subject: [Rd] Fortran routines from LINPACK in S+ but not R
In-Reply-To: <3B84F2CE.695A20B0@virginia.edu>
Message-ID: <Pine.LNX.4.31.0108231317420.27971-100000@gannet.stats>

On Thu, 23 Aug 2001 fharrell@virginia.edu wrote:

> Dear R Developers,
>
> I should have had the Design library running in R by now but
> have kept putting off changing some calls to LINPACK routines
> to use those builtin to R.  Specifically I call dqrsl1 and dqr.
> Would it be an easy task to put those in the next release of
> R?  If not I'll finally bite the bullet and get back into
> reading LINPACK documentation (which I have but haven't
> examined in depth).
>
> If dqrsl1 and dqr are not truly parts of LINPACK but are
> front-ends to routines that are, and if anyone has
> those front-ends to share, that would also solve my problem
> immediately.

I am pretty sure that they are not part of LINPACK: certainly dqr is not
and neither has a LINPACK name.  dqr is called by qr.default in S-PLUS,
and you should find dqrdc2 (also not LINPACK) called by R's qr an adequate
substitute.

As for dqrsl1, I've never known exactly what it supposed to do.
Would dqrsl (which is there) suffice?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Thu Aug 23 13:54:31 2001
From: fharrell@virginia.edu (fharrell@virginia.edu)
Date: Thu, 23 Aug 2001 08:54:31 -0400
Subject: [Rd] Fortran routines from LINPACK in S+ but not R
References: <Pine.LNX.4.31.0108231317420.27971-100000@gannet.stats>
Message-ID: <3B84FD07.B056ED1B@virginia.edu>

Prof Brian Ripley wrote:
> 
> On Thu, 23 Aug 2001 fharrell@virginia.edu wrote:
> 
> > Dear R Developers,
> >
> > I should have had the Design library running in R by now but
> > have kept putting off changing some calls to LINPACK routines
> > to use those builtin to R.  Specifically I call dqrsl1 and dqr.
> > Would it be an easy task to put those in the next release of
> > R?  If not I'll finally bite the bullet and get back into
> > reading LINPACK documentation (which I have but haven't
> > examined in depth).
> >
> > If dqrsl1 and dqr are not truly parts of LINPACK but are
> > front-ends to routines that are, and if anyone has
> > those front-ends to share, that would also solve my problem
> > immediately.
> 
> I am pretty sure that they are not part of LINPACK: certainly dqr is not
> and neither has a LINPACK name.  dqr is called by qr.default in S-PLUS,
> and you should find dqrdc2 (also not LINPACK) called by R's qr an adequate
> substitute.

Thanks

> 
> As for dqrsl1, I've never known exactly what it supposed to do.
> Would dqrsl (which is there) suffice?

It probably will, after I get into it.  Calls are very different
on the surface.  Thanks -Frank

> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 23 15:27:07 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 23 Aug 2001 16:27:07 +0200 (MET DST)
Subject: (PR#1065)[Rd] X11 protocol errors after all x11 devices are
Message-ID: <200108231427.QAA19349@pubhealth.ku.dk>

I've fixed the original report and Tom's first.   Someone had incorrrectly
arranged for most of the initialization to be done only once per session.
I did ask before 1.3.0 what the intention was ....  For pseudocolor devices
at least this was biting since the palette was not re-initialized.

I don't see point two on my system, and Martin's point about interruption
was first shown to me by Guido a year ago, so is unrelated.

I am going to close this topic: Tom and Martin feel free to re-submit
your reports separately.

Brian



On 22 Aug 2001, Thomas Vogels wrote:

>
> ripley@stats.ox.ac.uk writes:
>
> > > x11()
> > > dev.off()
> > null device
> >           1
> > > x11()
> > > plot.new()
> > Warning messages:
> > 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> > 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> >
> > This only happens if all x11 devices are shut down, so the X11 connection
> > is restarted.  We had problems with this when the event handlers
> > were changed prior to 1.3.0, and it looks as if the logic is still
> > incorrect.
> >
> > As far as I can see subsequent plots are correct.
> >
> > Carrying on:
> >
> > > dev.off()
> > null device
> >           1
> > > x11()
> > > plot.new()
> > Warning message:
> > X11 protocol error: BadAccess (attempt to access private resource denied)
> >
> > (only one error this time).
>
>
> I see the same thing on an AIX machine with the patched R-release of
> yesterday.  I've recently noticed this problem when I tried to change
> the colortype.  For this you have to shutdown all devices, then I got
> the error messages.  I figured this might be an "AIX" thing at
> first...
>
> Possibly related (if not, I'll file separate bug reports):
>
> 1) I cannot reset the colortype.  When I run out of colors, I used to
>    be able to just shutdown all devices, then restart with
>    x11(colortype=....).  Now I get:
>
> R> x11()
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> R> dev.off()
> null device
>           1
> R> x11(colortype="pseudo.cube")
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> In addition: Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 3: X11 protocol error: BadAccess (attempt to access private resource denied)
> R> dev.off()
> null device
>           1
> R> x11(colortype="gray")
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> In addition: Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 3: X11 protocol error: BadAccess (attempt to access private resource denied)
> R> dev.off()
> null device
>           1
>
>
> 2) Plots are not updated if the window is made visible (from being
>    partially obscured) during a computation before or during the plot.
>    Let's say my xterm (or emacs window) covers the north-west quadrant
>    of R's x11 device window.  Then:
>
> R> data(iris)
> R> pairs(iris[,1:4])
>
>    While pairs is drawing, I bring the device window to the front.
>    All plots that were drawn by pairs will not be redrawn once pairs
>    is done.  So I have to push the device window in the back, then
>    bring it to the front again to force a redraw/refresh.
>
>    This gets really annoying when you have two X11 devices open.  If
>    you bring the inactive one to the front while R is busy plotting on
>    the active device, the inactive one will not be redrawn/refreshed
>    once plotting is done.  Just white space staring back at you...
>
> Regards,
>   -tom
>
>
>
> R> R.version
>          _
> platform powerpc-ibm-aix4.3.1.0
> arch     powerpc
> os       aix4.3.1.0
> system   powerpc, aix4.3.1.0
> status   Patched
> major    1
> minor    3.0
> year     2001
> month    08
> day      21
> language R
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 23 15:38:21 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 23 Aug 2001 16:38:21 +0200 (MET DST)
Subject: [Rd] cex.axis in barplot() (PR#1070)
Message-ID: <200108231438.QAA19530@pubhealth.ku.dk>

I've added a note to the help page for R-patched giving Uwe's workaround,
and will shortly parse ... for R-devel so cex.axis can be inlined.



On Thu, 23 Aug 2001, Uwe Ligges wrote:

> jerome@stat.ubc.ca wrote:
> >
> > Full_Name: Jerome Asselin
> > Version: 1.3.0
> > OS: Windows 98
> > Submission from: (NULL) (24.77.112.193)
> >
> > I have a hard time to magnify the axis annotations in barplot()
> > Here are some examples:
> >
> > #This one has no effect.
> > barplot(1:3,names.arg=1:3,cex.axis=3,xlab="x",ylab="y")
>
>
> >From the help:
>  ...  further graphical parameters (par) are passed to plot.window() and
> title().
> [let me add: ... and not to axis()...]
>
> But you can use:
>
>  par(cex.axis=3)
>  barplot(1:3, names.arg=1:3, xlab="x", ylab="y")
>
>
> > #This one magnifies the x and y labels
> > barplot(1:3,names.arg=1:3,cex.lab=3,xlab="x",ylab="y")
>
> ... as expected.
>
>
> > #This one has no effect.
> > barplot(1:3,names.arg=1:3,cex=3,xlab="x",ylab="y")
>
> In this case (no symbols are drawn inside the plot, ...) also expected.
>
>
> > Maybe this could be added to the "wish list".
> >
> > I assume that I will be able to create my own axis with
> > the axis() function.
>
>
> Without looking at the code not so easy as the workaround described
> above. An example:
>
>   barplot(1:3, names.arg=1:3, xlab="x", ylab="y")
>   axis(1, at=1:3)
>
>
> Uwe Ligges
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Thu Aug 23 15:39:37 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Thu, 23 Aug 2001 09:39:37 -0500
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com>; from dmurdoch@pair.com on Thu, Aug 23, 2001 at 08:16:09AM -0400
References: <200108221235.OAA05855@pubhealth.ku.dk> <20010822193251.A10682@nokomis.stat.umn.edu> <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com>
Message-ID: <20010823093937.A12583@nokomis.stat.umn.edu>

On Thu, Aug 23, 2001 at 08:16:09AM -0400, Duncan Murdoch wrote:
> On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
> >I'm surprised we don't get more of these sorts of things on UNIX.  Our
> >current UNIX interrupt handling approach takes an immediate LONGJMP
> >out of the signal handler no matter where the signal occurs (except
> >for two places where signals are suspended).  Any place where an
> >invariant is temporarily broken, any place where an assignment is not
> >yet complete, is a potential trouble spot.
> 
> Delphi protects against these kind of errors with "try ... except ..."
> and "try ... finally ..." blocks to deal with exceptions.  The first
> one executes special code if an exception occurs, the second
> guarantees execution of cleanup code.
> 
> These are implemented as a linked list of records on the stack which
> the exception handler knows how to interpret.  When a particular kind
> of exception occurs, all "finally" blocks are executed in the
> appropriate order (and the stack base pointer is moved to simulate
> exits from all active routines) until an "except" block handling the
> particular kind of exception is reached.
> 
> C doesn't have these statements built in, but presumably someone has
> written macros to do the same sort of thing.  Adding them would be a
> lot of work, but would be worthwhile.
> 

I'm talking about something related but different: controlling the
point at which an asynchronous signal is brought into the system (and
turned into an exception if we have a proper exception system.)  R
currently has on.exit, and Robert Gentleman and I proposed a more
structured exception mechanism for possible addition to R in the neas
future.

[I sent a posting about the proposed mechanism a while back.  So far
we have received little feedback, so here is another request: Please
have a look at http://www.stat.umn.edu/~luke/R/exceptions/simpcond.html
and let us know if you have any comments/suggestions]

But that is not the issue here.  The issue is whether we allow a
SIGINT signal in UNIX (and whatever its analog is on other systems) to
interrupt the current calculation immediately, no matter where it
might be, or whether we impose more structure.  Windows/Mac pretty
much force more structure at the C level, since their analogs have to
arrive through mechnisms that require explicit polling.  So on Windows
you know that an expression like

	x = malloc(n)

will not get interrupted between the malloc call and the assignment to
x (unless some very low level tricks are involved).  On UNIX, the
signal can arrive in between those two operations.

The safe thing to do on UNIX is to have the signal handler just set a
flag which is then checked at appropriate points.  This is the
approach that John Eaton mentioned, and is used by most Scheme systems
I've looked at.  I suspect Python and Perl do this as well, but I'll
have to check.  This is also the way Java handles thread interrupts.
It would make the UNIX behavior identical to the WIndows behavior.

The drawback for systems like R and Octave is that we rely on being
able to use chunks of C/Fortran that can potentially run for a long
time (forever if they happen to get into infinite loops occasionally)
and where it is either impractical or impossible to insert flag
checking code.  For those situations it is nice to be able to use a
signal handler to force a jump out of that code.  We live without this
ability on Windows/Mac, and don't do too badly there, but it would be
nice not to compltely loose this facility on UNIX. Most numerical code
tends to not behave too badly when exited by a longjmp, but there are
no guarantees.  For example, if a piece of C code does something like this:

	static inited = FALSE;
	if (! inited) {
	    inited = TRUE;
	    ... initialize a table needed for computations ...
        }
        ... use the table ..

and a Control-C arrives in the first call after inited=TRUE is executad
but before the table is fully initialized, then future calls to this
function will happily return nonsense.

One option would be to tag routines at library regestration time as
safe for LONGJMP's or not.  That way we can disable LONGJUMP
interrupts everywhere except in explicitly marked .C or .Fortran calls
(and blocking IO operations). This will insure that no internal R
state gets messed up by asynchronous signals that arrive at on
inopportune time.

But this only addresses the C level.  On Windows/Mac, the place where
a user break is turned into an R exception is (mainly) in the internal
eval, where every 1000 calculatins (or some such number) the flag is
checked and a jump is done if the flag is set.  UNIX would work the
same way.  Since the internals know exactly where this jump can occur,
unlike jumps out of a signal handler, they can make sure all internal
state is consistent before checking the flag.

>From the R level things look different: the 1000'th eval step can
happen anywhere, so a piece of R code that does

	file <- file(file, "w")
        on.exit(close(file))
        ... do something with file ...

has a race condition: an interrupt that arrives between the creation
of the file and the registration of the on.exit handler will leave
the file open.  Something along the lines of

	without.interrupts({
            file <- file(file, "w")
            on.exit(close(file))
            with.interrupts(... do something with file ...)
        })

would be safe but is too awkward in this form. [Using a structured
exception handling mechanism, some sort of try/finally construct,
would make this code cleaner but would not resolve the race
condition.]

There are no easy solutions I think, but we need to look at a range of
options and see what works best.

[Threads add the additional problem that an interrupted thread might
be holding a lock, and failure to release the lock could cause
deadlock.  Using a structured exception handling mechanism to manage
lock release helps, but race conditions are still potentially an issue
with asynchronous interrupts.]

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug 23 16:40:53 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 23 Aug 2001 08:40:53 -0700
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com>
Message-ID: <200108231540.IAA77857@pine.frazmtn.com>

You can get the macros from "C Interfaces and Implementations" by
David Hanson, Chapter 4. He has some references to other C work
by Eric Roberts and Steve Maguire on this.

On Thursday, August 23, 2001, at 05:16 AM, Duncan Murdoch wrote:

> On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
>> I'm surprised we don't get more of these sorts of things on UNIX.  Our
>> current UNIX interrupt handling approach takes an immediate LONGJMP
>> out of the signal handler no matter where the signal occurs (except
>> for two places where signals are suspended).  Any place where an
>> invariant is temporarily broken, any place where an assignment is not
>> yet complete, is a potential trouble spot.
>
> Delphi protects against these kind of errors with "try ... except ..."
> and "try ... finally ..." blocks to deal with exceptions.  The first
> one executes special code if an exception occurs, the second
> guarantees execution of cleanup code.
>
> These are implemented as a linked list of records on the stack which
> the exception handler knows how to interpret.  When a particular kind
> of exception occurs, all "finally" blocks are executed in the
> appropriate order (and the stack base pointer is moved to simulate
> exits from all active routines) until an "except" block handling the
> particular kind of exception is reached.
>
> C doesn't have these statements built in, but presumably someone has
> written macros to do the same sort of thing.  Adding them would be a
> lot of work, but would be worthwhile.
>
> Duncan Murdoch
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug 23 16:50:31 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 23 Aug 2001 08:50:31 -0700 (PDT)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010823093937.A12583@nokomis.stat.umn.edu>
Message-ID: <Pine.A41.4.33.0108230843490.135314-100000@homer05.u.washington.edu>

On Thu, 23 Aug 2001, Luke Tierney wrote:

> On Thu, Aug 23, 2001 at 08:16:09AM -0400, Duncan Murdoch wrote:
> > On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
> > >I'm surprised we don't get more of these sorts of things on UNIX.  Our
> > >current UNIX interrupt handling approach takes an immediate LONGJMP
> > >out of the signal handler no matter where the signal occurs (except
> > >for two places where signals are suspended).  Any place where an
> > >invariant is temporarily broken, any place where an assignment is not
> > >yet complete, is a potential trouble spot.

This is what is happening in the segfault caused by interrupting
Sys.sleep under Linux.  Presumably the fix is to wait and take the
interrupt after restoring the InputHandler.  It would be nice if someone
who understood this sort of thing could fix it before 1.3.1

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 23 18:05:43 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 23 Aug 2001 18:05:43 +0100 (BST)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <Pine.A41.4.33.0108230843490.135314-100000@homer05.u.washington.edu>
Message-ID: <Pine.GSO.4.31.0108231804080.6282-100000@auk.stats>

On Thu, 23 Aug 2001, Thomas Lumley wrote:

> On Thu, 23 Aug 2001, Luke Tierney wrote:
>
> > On Thu, Aug 23, 2001 at 08:16:09AM -0400, Duncan Murdoch wrote:
> > > On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
> > > >I'm surprised we don't get more of these sorts of things on UNIX.  Our
> > > >current UNIX interrupt handling approach takes an immediate LONGJMP
> > > >out of the signal handler no matter where the signal occurs (except
> > > >for two places where signals are suspended).  Any place where an
> > > >invariant is temporarily broken, any place where an assignment is not
> > > >yet complete, is a potential trouble spot.
>
> This is what is happening in the segfault caused by interrupting
> Sys.sleep under Linux.  Presumably the fix is to wait and take the
> interrupt after restoring the InputHandler.  It would be nice if someone
> who understood this sort of thing could fix it before 1.3.1

Well, I don't know if I will have time, but I do think I know how to do it.
I suspect I always knew this could happen, but forgot to secure against it,
and it hadn't (hasn't) come up in earnest yet .

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Thu Aug 23 18:37:16 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Thu, 23 Aug 2001 13:37:16 -0400 (EDT)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010823093937.A12583@nokomis.stat.umn.edu>
Message-ID: <Pine.GSO.4.10.10108231311180.15781-100000@hsph.harvard.edu>

On Thu, 23 Aug 2001, Luke Tierney wrote:

> I'm talking about something related but different: controlling the
> point at which an asynchronous signal is brought into the system (and
> turned into an exception if we have a proper exception system.)  R
> currently has on.exit, and Robert Gentleman and I proposed a more
> structured exception mechanism for possible addition to R in the neas
> future.
> 
> [I sent a posting about the proposed mechanism a while back.  So far
> we have received little feedback, so here is another request: Please
> have a look at http://www.stat.umn.edu/~luke/R/exceptions/simpcond.html
> and let us know if you have any comments/suggestions]
> 
> But that is not the issue here.  The issue is whether we allow a
> SIGINT signal in UNIX (and whatever its analog is on other systems) to
> interrupt the current calculation immediately, no matter where it
> might be, or whether we impose more structure.  Windows/Mac pretty
> much force more structure at the C level, since their analogs have to
> arrive through mechnisms that require explicit polling.  So on Windows
> you know that an expression like
> 
> 	x = malloc(n)
> 
> will not get interrupted between the malloc call and the assignment to
> x (unless some very low level tricks are involved).  On UNIX, the
> signal can arrive in between those two operations.

That sounds like two problems--- the first being how to make sure that the
allocation and assignment happen as an atomic operation (that's not
difficult--- we just throw a critical section around it) but also in the
event of an interrupt, what to do with things like allocated memory in the
case of an interrupt (which was Duncan's point in the earlier message that
got snipped). Unfortunately, I think the transactional (is that a word?) 
database people may be the only ones with a good handle on that particular
problem and thats expensive... Though I suppose if you're wrapping
everything in an environment and interrupt could just ensure the
destruction of the environment, but it doesn't handle global variables.
You'd need some sort of stack on each variable that kept weak references
to previous values (since R doesn't usually access things by reference
unless you force it, right?) until they're garbage collected at which
point their weak references will also be removed from the stack--- "Undo
Capability, Limited Time Only!" :-)


> 
> The safe thing to do on UNIX is to have the signal handler just set a
> flag which is then checked at appropriate points.  This is the
> approach that John Eaton mentioned, and is used by most Scheme systems
> I've looked at.  I suspect Python and Perl do this as well, but I'll
> have to check.  This is also the way Java handles thread interrupts.
> It would make the UNIX behavior identical to the WIndows behavior.
> 
> The drawback for systems like R and Octave is that we rely on being
> able to use chunks of C/Fortran that can potentially run for a long
> time (forever if they happen to get into infinite loops occasionally)
> and where it is either impractical or impossible to insert flag
> checking code.  For those situations it is nice to be able to use a
> signal handler to force a jump out of that code.  We live without this
> ability on Windows/Mac, and don't do too badly there, but it would be
> nice not to compltely loose this facility on UNIX. Most numerical code
> tends to not behave too badly when exited by a longjmp, but there are
> no guarantees.  For example, if a piece of C code does something like this:
> 
> 	static inited = FALSE;
> 	if (! inited) {
> 	    inited = TRUE;
> 	    ... initialize a table needed for computations ...
>         }
>         ... use the table ..
> 
> and a Control-C arrives in the first call after inited=TRUE is executad
> but before the table is fully initialized, then future calls to this
> function will happily return nonsense.

Step 1. Have anyone who uses statics burned at the stake for not writing
threadsafe code ;-) 

> 
> One option would be to tag routines at library regestration time as
> safe for LONGJMP's or not.  That way we can disable LONGJUMP
> interrupts everywhere except in explicitly marked .C or .Fortran calls
> (and blocking IO operations). This will insure that no internal R
> state gets messed up by asynchronous signals that arrive at on
> inopportune time.

I think you'll want finer grain control as well--- my guess would be to
have external calls execute within a critical section (like Java, if my
understanding is correct) unless explicitly marked otherwise but still
allow for a critical section to be entered (and left) within the code
block. An example would be something like reading from a URL where I may
spend some time blocked waiting for a connection where you would want the
ability to break out without having to wait for a timeout, but if for some
reason once the transfer is started it must be allowed to complete I would
want to engage the critical section later in the function. 

> 
> But this only addresses the C level.  On Windows/Mac, the place where
> a user break is turned into an R exception is (mainly) in the internal
> eval, where every 1000 calculatins (or some such number) the flag is
> checked and a jump is done if the flag is set.  UNIX would work the
> same way.  Since the internals know exactly where this jump can occur,
> unlike jumps out of a signal handler, they can make sure all internal
> state is consistent before checking the flag.
> 
> >From the R level things look different: the 1000'th eval step can
> happen anywhere, so a piece of R code that does
> 
> 	file <- file(file, "w")
>         on.exit(close(file))
>         ... do something with file ...
> 
> has a race condition: an interrupt that arrives between the creation
> of the file and the registration of the on.exit handler will leave
> the file open.  Something along the lines of
> 
> 	without.interrupts({
>             file <- file(file, "w")
>             on.exit(close(file))
>             with.interrupts(... do something with file ...)
>         })
> 
> would be safe but is too awkward in this form. [Using a structured
> exception handling mechanism, some sort of try/finally construct,
> would make this code cleaner but would not resolve the race
> condition.]
> 
> There are no easy solutions I think, but we need to look at a range of
> options and see what works best.
> 
> [Threads add the additional problem that an interrupted thread might
> be holding a lock, and failure to release the lock could cause
> deadlock.  Using a structured exception handling mechanism to manage
> lock release helps, but race conditions are still potentially an issue
> with asynchronous interrupts.]

I'm just sort of pulling stuff out of thin air and I don't expect this
stuff to be easy to implement, but here goes: :-)

Say, we have an ideal world where R executes in a bytecode VM like Java or
something else---I've noticed that this idea pops up every now and then
for performance reasons. In this case, why not just take it one step
further and have the R environment actually be something of a lightweight
operating system (they don't have to be bloaty and the VM's nature means
it can be fairly abstracted---no need for 'device drivers' in the
traditional sense and whatnot) that manages each of R's user-level threads
as a distinct process. The 'OS' then handles the context switching and
preemption that we'll need anyway but also handles interrupt cases by
trapping them from the operating system (using signal handlers or the
particular OS's analogue). The interrupt handler would then be able to
forcibly shutdown whatever shared resources and memory allocated to the
'process' in the same way it happens in a real OS (this would obviously
require that the I/O system be abstracted away in internal and C calls---
but I think we've already got a good start on that with the connection
mechanism and we want it for other reasons as well). My thought is that
this sort of set up would also change the flavour of the native threading
as well since it actually becomes more analogous to developing an SMP
operating system, which people already know how to do, though you would
want to keep the 'OS' bits to an absolute minimum more like an RTOS than a
UNIX or something like that (read: primitive :-)). 

> 
> luke
> 
> -- 
> Luke Tierney
> University of Minnesota                      Phone:           612-625-7843
> School of Statistics                         Fax:             612-624-8868
> 313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
> Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Thu Aug 23 18:41:37 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Thu, 23 Aug 2001 12:41:37 -0500
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <200108231540.IAA77857@pine.frazmtn.com>; from deleeuw@stat.ucla.edu on Thu, Aug 23, 2001 at 08:40:53AM -0700
References: <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com> <200108231540.IAA77857@pine.frazmtn.com>
Message-ID: <20010823124136.A13455@nokomis.stat.umn.edu>

That's a good set of tools for starting from scratch.  But we really
have all the internal harness already in the form of the R context
structure, and Hansen's exception objects are more primitive (not a
criticism: they're designed to be quite simple) than the things we
have in the proposal I mentioned.  Wrapping some macros like Hansen's
or others around what we have isn't hard.

One thing to keep in mind though: whatever tools you use, all code has
to agree on it.  (You can't mix Hansen's macros with R's contexts
since both assume they are the only ones using LONGJMP.)  When the
implementation language provides the mechanism, like C++ or Java
exceptions, you are guaranteed that.  When grafting onto a language
like C you need to put someone in charge and make everyone else play
nice with that one.

luke


On Thu, Aug 23, 2001 at 08:40:53AM -0700, Jan de Leeuw wrote:
> You can get the macros from "C Interfaces and Implementations" by
> David Hanson, Chapter 4. He has some references to other C work
> by Eric Roberts and Steve Maguire on this.
> 
> On Thursday, August 23, 2001, at 05:16 AM, Duncan Murdoch wrote:
> 
> > On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
> >> I'm surprised we don't get more of these sorts of things on UNIX.  Our
> >> current UNIX interrupt handling approach takes an immediate LONGJMP
> >> out of the signal handler no matter where the signal occurs (except
> >> for two places where signals are suspended).  Any place where an
> >> invariant is temporarily broken, any place where an assignment is not
> >> yet complete, is a potential trouble spot.
> >
> > Delphi protects against these kind of errors with "try ... except ..."
> > and "try ... finally ..." blocks to deal with exceptions.  The first
> > one executes special code if an exception occurs, the second
> > guarantees execution of cleanup code.
> >
> > These are implemented as a linked list of records on the stack which
> > the exception handler knows how to interpret.  When a particular kind
> > of exception occurs, all "finally" blocks are executed in the
> > appropriate order (and the stack base pointer is moved to simulate
> > exits from all active routines) until an "except" block handling the
> > particular kind of exception is reached.
> >
> > C doesn't have these statements built in, but presumably someone has
> > written macros to do the same sort of thing.  Adding them would be a
> > lot of work, but would be worthwhile.
> >
> > Duncan Murdoch
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > .-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> > FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-
> > request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > ._._._
> >
> 
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
> homepage: http://www.stat.ucla.edu/~deleeuw
> ========================================================
>            No matter where you go, there you are. --- Buckaroo Banzai
>                     http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
> ========================================================
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kevin.Wright@pioneer.com  Thu Aug 23 19:38:15 2001
From: Kevin.Wright@pioneer.com (Kevin.Wright@pioneer.com)
Date: Thu, 23 Aug 2001 20:38:15 +0200 (MET DST)
Subject: [Rd] postscript & ps.options documentation (PR#1071)
Message-ID: <200108231838.UAA20793@pubhealth.ku.dk>

Full_Name: Kevin Wright
Version: 1.3
OS: Windows 95
Submission from: (NULL) (170.54.59.130)



In the help pages for postscript and ps.options, it is not clear that the
ps.options must be set before calling the postscript driver.

I was calling postscript() and then trying to set ps.options().  This gave
unexpected results.

Sorry if this is clear to everyone else.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 24 08:30:44 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 24 Aug 2001 08:30:44 +0100 (BST)
Subject: [Rd] RFC: type conversion in read.table
Message-ID: <Pine.LNX.4.31.0108240825520.29809-100000@gannet.stats>

Currently read.table is rather limited in its type conversion.
The algorithm is

0) Read as character
1) Try to convert to numeric. If that works, quit
2) Convert to factor unless !as.is.

I am thinking about adding more flexibility and more classes by the
following two changes.


A) Anticipating the arrival of classes for all R objects, add an
argument say `colClasses' that allows the user to specify the desired
class for every column.  This could default to "auto", or NA if people
think "auto" might be a relevant class name one day.

The effect would be equivalent to running

data[[i]] <- as(data[[i]], colClasses[i])

instead of

data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)

except that standard classes such as "numeric", "factor", "logical",
"character" would be dispatched directly, and argument "dec" would be
consulted where appropriate.

colClasses = "character" would suppress all conversions, which cannot
currently be done.


B) Make the default "auto" option somewhat cleverer.  I am thinking of
trying the following in turn

logical
integer
numeric
complex
factor   (only if !as.is[i] for backwards compatibility).

The `dec' option needs to be used for numeric/complex.

This would be done by a documented typeConvert function, and
should normally be fast (just look at the first item to rule
out much of the list).


This does mean that data frames would be much more likely to end up
containing integer or logical variables (although they can now).
I have already fixed model.frame/matrix to handle logical variables,
and would need to check that they do handle integer variables.


Questions:

1) Is this desirable?

2) Are the names sensible?

3) Is there any need to allow users to specify either the set of
   classes used by "auto" or lists of classes on a column-specific
   basis?

4) Currently the default is to get something without much information
   loss, and that would remain.  My intention is that if a class is
   specified and conversion is not possible that the result would be
   (mainly?) NAs.  Any problem with that?


Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Aug 24 10:56:35 2001
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Fri, 24 Aug 2001 11:56:35 +0200 (MET DST)
Subject: [Rd] Reading Inf and NaN values under windows (PR#1072)
Message-ID: <200108240956.LAA26764@pubhealth.ku.dk>

Under windows, R supports IEEE floating point arithmetic, but doesn't
allow conversion of Inf and NaN from character to numeric.

R> is.nan(NaN)
[1] TRUE
R> as.numeric(as.character(NaN))
[1] NA
Warning message: 
NAs introduced by coercion 
R> is.infinite(Inf)
[1] TRUE
R> as.numeric(as.character(Inf))
[1] NA
Warning message: 
NAs introduced by coercion 

whereas under Linux

R> as.numeric(as.character(NaN))
[1] NaN
R> as.numeric(as.character(Inf))
[1] Inf

S-PLUS 3.3 for Windows gives

S-PLUS> as.numeric(as.character(Inf))
[1] Inf
S-PLUS> as.numeric(as.character(NaN))
[1] NA
Warning messages:
  1 missing value  generated coercing from character to numeric in: 
        as.numeric(as.character(NaN))

I first came across this problem when trying to read in a dataset with
Inf values using read.table().  Under Windows, the variable with the
infinite value is converted to a factor. The scan() function also refuses
to read in Inf and NaN as numeric values under Windows.

Martyn

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 24 14:17:05 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Aug 2001 15:17:05 +0200
Subject: Bug report numbers. Re: Interrupts (was Re: [Rd] X11 protocol errors ...) (PR#1069)
In-Reply-To: <200108230257.EAA10185@pubhealth.ku.dk>
References: <200108230257.EAA10185@pubhealth.ku.dk>
Message-ID: <x27kvtk372.fsf@blueberry.kubism.ku.dk>

jwe@bevo.che.wisc.edu writes:
...


Argh! Would you please everyone try to be careful with the
R-devel/R-bugs issues! If you remove the PR# without removing R-bugs
from the Cc: list, you'll generate a new bug report. And so will
anyone who follows up on the version that gets sent directly to
r-devel without PR#.

We now have this issue as PR#1065, 1068 and 1069....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Aug 24 14:18:17 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 24 Aug 2001 09:18:17 -0400
Subject: [Rd] RFC: type conversion in read.table
References: <Pine.LNX.4.31.0108240825520.29809-100000@gannet.stats>
Message-ID: <3B865419.68732554@research.bell-labs.com>

Prof Brian Ripley wrote:
> 
> Currently read.table is rather limited in its type conversion.
> The algorithm is
> 
> 0) Read as character
> 1) Try to convert to numeric. If that works, quit
> 2) Convert to factor unless !as.is.
> 
> I am thinking about adding more flexibility and more classes by the
> following two changes.
> 
> A) Anticipating the arrival of classes for all R objects, add an
> argument say `colClasses' that allows the user to specify the desired
> class for every column.  This could default to "auto", or NA if people
> think "auto" might be a relevant class name one day.
> 
> The effect would be equivalent to running
> 
> data[[i]] <- as(data[[i]], colClasses[i])
> 
> instead of
> 
> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
> 
> except that standard classes such as "numeric", "factor", "logical",
> "character" would be dispatched directly, and argument "dec" would be
> consulted where appropriate.
> 
> colClasses = "character" would suppress all conversions, which cannot
> currently be done.
> 
> B) Make the default "auto" option somewhat cleverer.  I am thinking of
> trying the following in turn
> 
> logical
> integer
> numeric
> complex
> factor   (only if !as.is[i] for backwards compatibility).
> 
> The `dec' option needs to be used for numeric/complex.
> 
> This would be done by a documented typeConvert function, and
> should normally be fast (just look at the first item to rule
> out much of the list).
> 
> This does mean that data frames would be much more likely to end up
> containing integer or logical variables (although they can now).
> I have already fixed model.frame/matrix to handle logical variables,
> and would need to check that they do handle integer variables.
> 
> Questions:
> 
> 1) Is this desirable?

Yes, definitely.  It also fits very well into the formal class idiom. 
Couple of suggestions below.

> 
> 2) Are the names sensible?
> 
> 3) Is there any need to allow users to specify either the set of
>    classes used by "auto" or lists of classes on a column-specific
>    basis?

I think the most flexible way to get what you want is something like the
following.

The natural default for the colClasses argument is the name of a class,
but a "virtual" class in green book terminology.

I've been playing around with some data-frame related software mostly as
tests for the methods code (in SLanguage/SModels in the Omegahat tree).

The class used there for this purpose is called "dataVariable", meaning
anything that can conceptually be a variable in a data frame.  Actual
classes for variables extend this class, maybe trivially, maybe by some
method.

What's needed for the default here is essentially a method to coerce
class "character" to "dataVariable" (or whatever name one wants to
use).  When we are really using formal methods, this would be specified
by a call to setAs (green book, p307).  Then in effect
  data[[i]] <- as(data[[i]], colClasses[i])
applies in the default case as well.

Users could specialize the default by over-riding the setAs, but a
better way would be to define a new virtual class, with its own method
for coercion.  Users would then have essentially unlimited flexibility,
by supplying the name of that class in the colClasses argument.

> 4) Currently the default is to get something without much information
>    loss, and that would remain.  My intention is that if a class is
>    specified and conversion is not possible that the result would be
>    (mainly?) NAs.  Any problem with that?

As a default, seems fine.  When the user supplies a class, this implies
an as() method, which can then decide what to do in case of
problems--error, NA, or whatever.

> Brian
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 24 15:23:56 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 24 Aug 2001 15:23:56 +0100 (BST)
Subject: [Rd] Reading Inf and NaN values under windows (PR#1072)
In-Reply-To: <200108240956.LAA26764@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0108241514200.8075-100000@gannet.stats>

On Fri, 24 Aug 2001 plummer@iarc.fr wrote:

> Under windows, R supports IEEE floating point arithmetic, but doesn't
> allow conversion of Inf and NaN from character to numeric.
>
> R> is.nan(NaN)
> [1] TRUE
> R> as.numeric(as.character(NaN))
> [1] NA
> Warning message:
> NAs introduced by coercion
> R> is.infinite(Inf)
> [1] TRUE
> R> as.numeric(as.character(Inf))
> [1] NA
> Warning message:
> NAs introduced by coercion
>
> whereas under Linux
>
> R> as.numeric(as.character(NaN))
> [1] NaN
> R> as.numeric(as.character(Inf))
> [1] Inf
>
> S-PLUS 3.3 for Windows gives
>
> S-PLUS> as.numeric(as.character(Inf))
> [1] Inf
> S-PLUS> as.numeric(as.character(NaN))
> [1] NA
> Warning messages:
>   1 missing value  generated coercing from character to numeric in:
>         as.numeric(as.character(NaN))
>
> I first came across this problem when trying to read in a dataset with
> Inf values using read.table().  Under Windows, the variable with the
> infinite value is converted to a factor. The scan() function also refuses
> to read in Inf and NaN as numeric values under Windows.

It's the same cause: strtod is used.  That's not required to support
IEC 60559 (to be correct) specials, but glibc happens to.

We have R_strtod: we should make proper use of it.  I'll do that for
1.3.1.

Brian

>
> Martyn
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status =
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 22
>  language = R
>
> Windows NT 4.0 (build 1381) Service Pack 6
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Aug 24 16:36:23 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 24 Aug 2001 17:36:23 +0200 (MET DST)
Subject: [Rd] cutree (PR#1067)
Message-ID: <200108241536.RAA01942@pubhealth.ku.dk>

>>>>> "Anja" == Anja von Heydebreck <heydebre@molgen.mpg.de> writes:

    Anja> Full_Name: Anja von Heydebreck Version: 1.3.0 OS: Alpha Unix
    Anja> Submission from: (NULL) (141.14.19.61)

Thank you

    Anja> I repeatedly obtained meaningless results from the function
    Anja> 'cutree' in the 'mva' package, when the argument 'h' was greater
    Anja> or equal to the maximum height occuring:

Here is an executable version of Anja's example:

 library('mva')
 y <-
 rbind(c( 0,  1, -1, 1),
       c( 0, -1,  1, 0),
       c( 0, -1,  1, 1),
       c(-1, -2,  1, 0))
 d <- dist(y, method="manhattan")
 hc <- hclust(d, method = "complete")
 hc$height
 ## [1] 1 3 7
 ( cluster <- cutree(hc, h=max(hc$height)))

  ## Anja got
  ## [1] 1108612352          1 1074517880          1

  ## Martin: I get
  ## [1] 0 0 0 0

even though I don't get random results, it's still wrong.
I'll look at a fix.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Fri Aug 24 19:18:24 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 24 Aug 2001 14:18:24 -0400
Subject: [Rd] RE: Variable lables (was Re: [R] Reading SAS version 8 data into
Message-ID: <5429125E11E4D411AF7300805FE603A8014CED54@groexmbcr02.pfizer.com>

[Moved from R-help]

> From: fharrell@virginia.edu [mailto:fharrell@virginia.edu]
> I store variable labels as "label" attributes of vectors
> and use then in various plotting functions as well as the
> describe() function.

I would like to see general support for label attributes in the R plotting
and modeling functions.  One possible way of implementing this is to create
a replacement for the standard "deparse(substitute(blah))" idiom. This
function, getlabel(), checks for a label attribute and returns that if
present. Otherwise it returns the variable's name as a string.

Here's some code I've put together:

label  <-  function(x) attr(x,"label")

"label<-" <-  function(x, value )
  {
    m  <-  match.call()
    m[[1]]  <- as.name("attr<-")
    m$value  <- NULL
    m$which  <- "label"
    m$value  <- value
    eval(m)
  }

getlabel <- function(x)
  {
    tmp <- attr(x,"label")
    if(is.null(tmp) || tmp=="")
      {
        m  <- match.call()
        m[[1]] <- as.name('substitute')
        tmp <- deparse(eval(m,envir=parent.frame()))
      }
    return(tmp)
  }

I've done some testing, and getlabel seems to work fine as a substitute for
"deparse(subsitute(x))" in the plot commands.

There are a couple of problems.  First, attributes are carried along in
sometime unexpected ways.  For example, attributes are carried along by all
of the arethmetic operations I tried:
   > x <- rnorm(1)
   > label(x) <- "x label"
   > 
   > sqrt(x)
    [1] 0.8888801
   attr(,"label")
   [1] "x label"
   > x+1
    [1] 1.8888801
   attr(,"label")
   [1] "x label"
Ideally, performing an operation the creates a new variable should mask off
the label attribute (what about other attributes?).  I recognize that this
would require changes to R.  Would this be a big task?

Second, unless one bounds the length of the labels, it can get pretty messy
to use them in some places, (eg the coefficients table reported by
print.summary).  I can see a couple of solutions for this problem.  A)
Truncate labels when necessary.   B) Have 2 attributes--One short 'label'
that has a fixed length (say 30 characters), and one long 'description' that
can has no length limit.  C) Continue to use the variable name given in the
call for places where length is a problem, but show a translation between
the variable name and the label somewhere else as part of the output.

Except for the problem of the label attribute getting 'carried along' when
it is not desirable, I think that it would be straightforward and 'backwards
compatible' to add general support for variable labels.  

I am willing to submit patches for functions that I regularly use.  Would
others be willing to contribute?  Would the patches be accepted?

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Sat Aug 25 03:08:04 2001
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Sat, 25 Aug 2001 04:08:04 +0200 (MET DST)
Subject: [Rd] Wierd problem comparing numeric values and list using == (PR#1073)
Message-ID: <200108250208.EAA03656@pubhealth.ku.dk>


Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
applied to elements of a list, particularly when one of the elements is of
mode integer:

	> list(1) == list(1)
	[1] FALSE
	> 1 == list(1)
	[1] TRUE
	> as.integer(1)==list(as.integer(1))
	[1] FALSE
	> as.integer(1)==list(as.double(1))
	[1] FALSE
	> list(as.integer(1))==list(as.integer(1))
	[1] FALSE
	> list(as.integer(1))==as.integer(1)
	[1] FALSE
	> list(as.double(1))==list(as.double(1))
	[1] FALSE

However, these cases work:

	> as.double(1)==list(as.integer(1))
	[1] TRUE
	> list(as.integer(1))==as.double(1)
	[1] TRUE

Replacing the bare integer/double with a vector constructed with c() doesn't
change the results, and comparing between vectors created with c() appears
correct.

-Greg

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows NT 4.0 (build 1381) Service Pack 5

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Sat Aug 25 14:42:34 2001
From: fharrell@virginia.edu (fharrell@virginia.edu)
Date: Sat, 25 Aug 2001 09:42:34 -0400
Subject: [Rd] Re: Variable lables (was Re: [R] Reading SAS version 8 data into
References: <5429125E11E4D411AF7300805FE603A8014CED54@groexmbcr02.pfizer.com>
Message-ID: <3B87AB4A.B3A498DD@virginia.edu>

Dear Greg,

I too would like to see labels be more a part of R.
In Hmisc I allow labels to be any length but plotting
and table making functions have options to abbreviate()
them or use variable names instead of labels.

I think your code is more complex that is really needed.

The problem with defaulting to deparse(...) is that
multiple function pass-throughs return the wrong result:

> f <- function(w)getlabel(w)
> g <- function(z)f(z)
> g(y)
[1] "z"

So I don't see a large role for the deparse(...) method.

The Hmisc library already defines label<- so if you
are willing to use another name for your version that
would prevent confusion from users of Hmisc.

The problem of labels being retained after you do
arithmetic on the variable is a real one, and one
I've put up with for a long time with S-Plus.  It would
be nice if R could prevent that but that is getting tricky.
What I've wanted more generally is the ability for the
user to specify a vector of attribute names in options()
that would be preserved upon subsetting.  That way I
wouldn't have to go to trouble to write local versions
of [.factor, etc. that carry the 'label' attribute.
Im my usage, 'label's are always logically carried
forward for subsetting.

Frank


"Warnes, Gregory R" wrote:
> 
> [Moved from R-help]
> 
> > From: fharrell@virginia.edu [mailto:fharrell@virginia.edu]
> > I store variable labels as "label" attributes of vectors
> > and use then in various plotting functions as well as the
> > describe() function.
> 
> I would like to see general support for label attributes in the R plotting
> and modeling functions.  One possible way of implementing this is to create
> a replacement for the standard "deparse(substitute(blah))" idiom. This
> function, getlabel(), checks for a label attribute and returns that if
> present. Otherwise it returns the variable's name as a string.
> 
> Here's some code I've put together:
> 
> label  <-  function(x) attr(x,"label")
> 
> "label<-" <-  function(x, value )
>   {
>     m  <-  match.call()
>     m[[1]]  <- as.name("attr<-")
>     m$value  <- NULL
>     m$which  <- "label"
>     m$value  <- value
>     eval(m)
>   }
> 
> getlabel <- function(x)
>   {
>     tmp <- attr(x,"label")
>     if(is.null(tmp) || tmp=="")
>       {
>         m  <- match.call()
>         m[[1]] <- as.name('substitute')
>         tmp <- deparse(eval(m,envir=parent.frame()))
>       }
>     return(tmp)
>   }
> 
> I've done some testing, and getlabel seems to work fine as a substitute for
> "deparse(subsitute(x))" in the plot commands.
> 
> There are a couple of problems.  First, attributes are carried along in
> sometime unexpected ways.  For example, attributes are carried along by all
> of the arethmetic operations I tried:
>    > x <- rnorm(1)
>    > label(x) <- "x label"
>    >
>    > sqrt(x)
>     [1] 0.8888801
>    attr(,"label")
>    [1] "x label"
>    > x+1
>     [1] 1.8888801
>    attr(,"label")
>    [1] "x label"
> Ideally, performing an operation the creates a new variable should mask off
> the label attribute (what about other attributes?).  I recognize that this
> would require changes to R.  Would this be a big task?
> 
> Second, unless one bounds the length of the labels, it can get pretty messy
> to use them in some places, (eg the coefficients table reported by
> print.summary).  I can see a couple of solutions for this problem.  A)
> Truncate labels when necessary.   B) Have 2 attributes--One short 'label'
> that has a fixed length (say 30 characters), and one long 'description' that
> can has no length limit.  C) Continue to use the variable name given in the
> call for places where length is a problem, but show a translation between
> the variable name and the label somewhere else as part of the output.
> 
> Except for the problem of the label attribute getting 'carried along' when
> it is not desirable, I think that it would be straightforward and 'backwards
> compatible' to add general support for variable labels.
> 
> I am willing to submit patches for functions that I regularly use.  Would
> others be willing to contribute?  Would the patches be accepted?
> 
> -Greg
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Aug 25 14:57:09 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Aug 2001 15:57:09 +0200
Subject: [Rd] Wierd problem comparing numeric values and list using == (PR#1073)
In-Reply-To: <200108250208.EAA03656@pubhealth.ku.dk>
References: <200108250208.EAA03656@pubhealth.ku.dk>
Message-ID: <x23d6gmedm.fsf@blueberry.kubism.ku.dk>

gregory_r_warnes@groton.pfizer.com writes:

> Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
> applied to elements of a list, particularly when one of the elements is of
> mode integer:
> 
> 	> list(1) == list(1)
> 	[1] FALSE
> 	> 1 == list(1)
> 	[1] TRUE
> 	> as.integer(1)==list(as.integer(1))
> 	[1] FALSE
> 	> as.integer(1)==list(as.double(1))
> 	[1] FALSE
> 	> list(as.integer(1))==list(as.integer(1))
> 	[1] FALSE
> 	> list(as.integer(1))==as.integer(1)
> 	[1] FALSE
> 	> list(as.double(1))==list(as.double(1))
> 	[1] FALSE
> 
> However, these cases work:
> 
> 	> as.double(1)==list(as.integer(1))
> 	[1] TRUE
> 	> list(as.integer(1))==as.double(1)
> 	[1] TRUE
> 
> Replacing the bare integer/double with a vector constructed with c() doesn't
> change the results, and comparing between vectors created with c() appears
> correct.

It is not entirely clear what we *should* be doing here. S (-PLUS 3.4)
is at least consistent:

> list(1) == list(1)
Error in list(1) == list(1): == operation on mode "list" undefined
Dumped
>  1 == list(1)
Error in 1 == list(1): == operation on mode "list" undefined
Dumped
> as.integer(1)==list(as.integer(1))
Error in as.integer(1) == list(as.integer(1)): == operation on mode "list"
        undefined
Dumped
...

so one might argue that you shouldn't do that in the first place...
(or that the bug is that we do not expressly forbid doing this.)

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Sun Aug 26 06:15:20 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Sun, 26 Aug 2001 01:15:20 -0400
Subject: [Rd] Re: Variable labels (was Re: [R] Reading SAS version 8 d
 ata into
Message-ID: <5429125E11E4D411AF7300805FE603A8014CED5C@groexmbcr02.pfizer.com>


> From: fharrell@virginia.edu [mailto:fharrell@virginia.edu]
> 
[snip]
> I think your code is more complex that is really needed.
> 
> The problem with defaulting to deparse(...) is that
> multiple function pass-throughs return the wrong result:
> 
[snip]
> So I don't see a large role for the deparse(...) method.
>

Actually one of the reasons that I included the deparse(...) method was to
create a 'drop-in' substitute for the current calls to deparse(...) that are
found throughout the code and that would be backward-compatible.  Having
such a call will immensely simplify changing existing code.

It's true that the variable names don't get correctly handled once you down
a layer of function calls, but that applies AFAIK to the current
deparse(...) method  as well.  

> 
> The Hmisc library already defines label<- so if you
> are willing to use another name for your version that
> would prevent confusion from users of Hmisc.

I don't think there will be a problem as long as the functions do exactly
the same thing.  To that end, perhaps we should agree on a common set of
functions and keep them in sync.  I expect that your functions are better
tested than mine, since they've been available for some time.


> 
> The problem of labels being retained after you do
> arithmetic on the variable is a real one, and one
> I've put up with for a long time with S-Plus.  It would
> be nice if R could prevent that but that is getting tricky.

> What I've wanted more generally is the ability for the
> user to specify a vector of attribute names in options()
> that would be preserved upon subsetting.  That way I
> wouldn't have to go to trouble to write local versions
> of [.factor, etc. that carry the 'label' attribute.
> Im my usage, 'label's are always logically carried
> forward for subsetting.

It seems to be a good idea to preserve the labels during subset operations.
What are the possible cons?

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Sun Aug 26 13:45:02 2001
From: fharrell@virginia.edu (fharrell@virginia.edu)
Date: Sun, 26 Aug 2001 08:45:02 -0400
Subject: [Rd] Re: Variable labels (was Re: [R] Reading SAS version 8 data
 into
References: <5429125E11E4D411AF7300805FE603A8014CED5C@groexmbcr02.pfizer.com>
Message-ID: <3B88EF4E.F256232B@virginia.edu>

"Warnes, Gregory R" wrote:
> 
> > From: fharrell@virginia.edu [mailto:fharrell@virginia.edu]
> >
> [snip]
> > I think your code is more complex that is really needed.
> >
> > The problem with defaulting to deparse(...) is that
> > multiple function pass-throughs return the wrong result:
> >
> [snip]
> > So I don't see a large role for the deparse(...) method.
> >
> 
> Actually one of the reasons that I included the deparse(...) method was to
> create a 'drop-in' substitute for the current calls to deparse(...) that are
> found throughout the code and that would be backward-compatible.  Having
> such a call will immensely simplify changing existing code.

Thanks for your reply Greg.
The "complex" code I was referring to was the eval()
and as.name() parts of your code.  The deparse can be
handy although I have done that on a case-by-case basis.
For example in a high-level plotting function I'll retrieve
label(an argument) and if that is empty I'll use
deparse(substitute(argument)).  
> 
> It's true that the variable names don't get correctly handled once you down
> a layer of function calls, but that applies AFAIK to the current
> deparse(...) method  as well.

Right.  That's why I try to define labels early when a data
frame is being created (e.g, in sas.get).

> 
> >
> > The Hmisc library already defines label<- so if you
> > are willing to use another name for your version that
> > would prevent confusion from users of Hmisc.
> 
> I don't think there will be a problem as long as the functions do exactly
> the same thing.  To that end, perhaps we should agree on a common set of
> functions and keep them in sync.  I expect that your functions are better
> tested than mine, since they've been available for some time.

Mine are simple:

label <- function(x)  {
	lab<-attr(x, "label")
	if(is.null(lab))lab<-""
	lab
	}

#From Bill Dunlap, StatSci  15Mar95:

"label<-" <- if(!.SV4.) function(x, value)
  structure(x, label=value,
            class=c('labelled',
              attr(x,'class')[attr(x,'class')!='labelled'])) else
function(x, value) {    # 1Nov00 for Splus 5.x, 6.x
  attr(x,'label') <- value
  x
}

For non SV4 systems (which include R) you see above that
when putting a label on a variable a class "labelled" is
added.  This is really to handle the subsetting problem
but I would rather get rid of it if subsetting can
respect selected attributes.

> 
> >
> > The problem of labels being retained after you do
> > arithmetic on the variable is a real one, and one
> > I've put up with for a long time with S-Plus.  It would
> > be nice if R could prevent that but that is getting tricky.
> 
> > What I've wanted more generally is the ability for the
> > user to specify a vector of attribute names in options()
> > that would be preserved upon subsetting.  That way I
> > wouldn't have to go to trouble to write local versions
> > of [.factor, etc. that carry the 'label' attribute.
> > Im my usage, 'label's are always logically carried
> > forward for subsetting.
> 
> It seems to be a good idea to preserve the labels during subset operations.
> What are the possible cons?

If the user or a package specifies the list of attribute names
to preserve (I can only think of 'label' and 'units' right now)
I don't see a downside.  -Frank

> 
> -Greg
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@cogsci.ed.ac.uk  Sun Aug 26 23:54:31 2001
From: stephen@cogsci.ed.ac.uk (stephen@cogsci.ed.ac.uk)
Date: Mon, 27 Aug 2001 00:54:31 +0200 (MET DST)
Subject: [Rd] typo in lines.Rd (PR#1075)
Message-ID: <200108262254.AAA08537@pubhealth.ku.dk>

Full_Name: Stephen Eglen
Version: 1.30
OS: Linux
Submission from: (NULL) (128.252.204.21)


The Details section of the help for `lines' has the typo "liens"
(line 30 of R-1.3.0/src/library/base/man/lines.Rd)

Stephen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 27 07:39:00 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 27 Aug 2001 08:39:00 +0200
Subject: [Rd] typo in lines.Rd (PR#1075)
In-Reply-To: <200108262254.AAA08537@pubhealth.ku.dk>
References: <200108262254.AAA08537@pubhealth.ku.dk>
Message-ID: <15241.60164.989595.741475@mithrandir.hornik.net>

>>>>> stephen  writes:

> Full_Name: Stephen Eglen
> Version: 1.30
> OS: Linux
> Submission from: (NULL) (128.252.204.21)


> The Details section of the help for `lines' has the typo "liens"
> (line 30 of R-1.3.0/src/library/base/man/lines.Rd)

Thanks, fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Aug 27 13:45:41 2001
From: jmc@research.bell-labs.com (jmc@research.bell-labs.com)
Date: Mon, 27 Aug 2001 14:45:41 +0200 (MET DST)
Subject: [Rd] Wierd problem comparing numeric values and list using == (PR#1076)
Message-ID: <200108271245.OAA16874@pubhealth.ku.dk>

Peter Dalgaard BSA wrote:
> 
> gregory_r_warnes@groton.pfizer.com writes:
> 
> > Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
> > applied to elements of a list, particularly when one of the elements is of
> > mode integer:
> >
> >       > list(1) == list(1)
> >       [1] FALSE
> >       > 1 == list(1)
> >       [1] TRUE
> >       > as.integer(1)==list(as.integer(1))
> >       [1] FALSE
> >       > as.integer(1)==list(as.double(1))
> >       [1] FALSE
> >       > list(as.integer(1))==list(as.integer(1))
> >       [1] FALSE
> >       > list(as.integer(1))==as.integer(1)
> >       [1] FALSE
> >       > list(as.double(1))==list(as.double(1))
> >       [1] FALSE
> >
> > However, these cases work:
> >
> >       > as.double(1)==list(as.integer(1))
> >       [1] TRUE
> >       > list(as.integer(1))==as.double(1)
> >       [1] TRUE
> >
> > Replacing the bare integer/double with a vector constructed with c() doesn't
> > change the results, and comparing between vectors created with c() appears
> > correct.
> 
> It is not entirely clear what we *should* be doing here. S (-PLUS 3.4)
> is at least consistent:
> 
> > list(1) == list(1)
> Error in list(1) == list(1): == operation on mode "list" undefined
> Dumped
> >  1 == list(1)
> Error in 1 == list(1): == operation on mode "list" undefined
> Dumped
> > as.integer(1)==list(as.integer(1))
> Error in as.integer(1) == list(as.integer(1)): == operation on mode "list"
>         undefined
> Dumped
> ...
> 
> so one might argue that you shouldn't do that in the first place...
> (or that the bug is that we do not expressly forbid doing this.)
> 
>         -p
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

As of 1.4, we will have the `identical' function, which is the right way
to do such comparisons in any case.

So I'd vote for making a use of the comparison operators an error unless
the type is correct (or there is a method defined).  There is even code
in relop.c (commented out) that looks like the right test.  Any
objections?

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Aug 27 13:44:22 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 27 Aug 2001 08:44:22 -0400
Subject: [Rd] Wierd problem comparing numeric values and list using ==
 (PR#1073)
References: <200108250208.EAA03656@pubhealth.ku.dk> <x23d6gmedm.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B8A40A6.15AF96C2@research.bell-labs.com>

Peter Dalgaard BSA wrote:
> 
> gregory_r_warnes@groton.pfizer.com writes:
> 
> > Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
> > applied to elements of a list, particularly when one of the elements is of
> > mode integer:
> >
> >       > list(1) == list(1)
> >       [1] FALSE
> >       > 1 == list(1)
> >       [1] TRUE
> >       > as.integer(1)==list(as.integer(1))
> >       [1] FALSE
> >       > as.integer(1)==list(as.double(1))
> >       [1] FALSE
> >       > list(as.integer(1))==list(as.integer(1))
> >       [1] FALSE
> >       > list(as.integer(1))==as.integer(1)
> >       [1] FALSE
> >       > list(as.double(1))==list(as.double(1))
> >       [1] FALSE
> >
> > However, these cases work:
> >
> >       > as.double(1)==list(as.integer(1))
> >       [1] TRUE
> >       > list(as.integer(1))==as.double(1)
> >       [1] TRUE
> >
> > Replacing the bare integer/double with a vector constructed with c() doesn't
> > change the results, and comparing between vectors created with c() appears
> > correct.
> 
> It is not entirely clear what we *should* be doing here. S (-PLUS 3.4)
> is at least consistent:
> 
> > list(1) == list(1)
> Error in list(1) == list(1): == operation on mode "list" undefined
> Dumped
> >  1 == list(1)
> Error in 1 == list(1): == operation on mode "list" undefined
> Dumped
> > as.integer(1)==list(as.integer(1))
> Error in as.integer(1) == list(as.integer(1)): == operation on mode "list"
>         undefined
> Dumped
> ...
> 
> so one might argue that you shouldn't do that in the first place...
> (or that the bug is that we do not expressly forbid doing this.)
> 
>         -p
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

As of 1.4, we will have the `identical' function, which is the right way
to do such comparisons in any case.

So I'd vote for making a use of the comparison operators an error unless
the type is correct (or there is a method defined).  There is even code
in relop.c (commented out) that looks like the right test.  Any
objections?

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 27 14:35:17 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Aug 2001 15:35:17 +0200
Subject: [Rd] Wierd problem comparing numeric values and list using == (PR#1076)
In-Reply-To: <200108271245.OAA16874@pubhealth.ku.dk>
References: <200108271245.OAA16874@pubhealth.ku.dk>
Message-ID: <x27kvpwrqi.fsf@blueberry.kubism.ku.dk>

jmc@research.bell-labs.com writes:

> > >       > list(1) == list(1)
> > >       [1] FALSE
> > >       > 1 == list(1)
> > >       [1] TRUE
> > >       > as.integer(1)==list(as.integer(1))
> > >       [1] FALSE
> > >       > as.integer(1)==list(as.double(1))
> > >       [1] FALSE
> > >       > list(as.integer(1))==list(as.integer(1))
> > >       [1] FALSE
> > >       > list(as.integer(1))==as.integer(1)
> > >       [1] FALSE
> > >       > list(as.double(1))==list(as.double(1))
> > >       [1] FALSE
> > >
> > > However, these cases work:
> > >
> > >       > as.double(1)==list(as.integer(1))
> > >       [1] TRUE
> > >       > list(as.integer(1))==as.double(1)
> > >       [1] TRUE
....
> As of 1.4, we will have the `identical' function, which is the right way
> to do such comparisons in any case.
> 
> So I'd vote for making a use of the comparison operators an error unless
> the type is correct (or there is a method defined).  There is even code
> in relop.c (commented out) that looks like the right test.  Any
> objections?

Not really, except that I get the usual nagging suspicion that someone
(who?) meant something by doing it this way...

The current logic seems to be that if either side of the == is a
vector of atomic type, try to coerce the list on the other side to a
similar object and then test. However this has a clear bug in that the
coercion is to double even when the atomic vector is integer. If there
are lists on both sides, a pointer comparison is done:

> x<-2
> list(x)==list(x)
[1] FALSE
> list(.Alias(x))==list(.Alias(x))
[1] TRUE

The latter seems highly dubious to me. I'd rather have a recursive
pairwise application of "==" there. However, none of this is what
identical does, is it?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Aug 27 15:31:25 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 27 Aug 2001 10:31:25 -0400
Subject: [Rd] Wierd problem comparing numeric values and list using ==
 (PR#1076)
References: <200108271245.OAA16874@pubhealth.ku.dk> <x27kvpwrqi.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B8A59BD.BE5F7188@research.bell-labs.com>

Peter Dalgaard BSA wrote:
 ....
> > As of 1.4, we will have the `identical' function, which is the right way
> > to do such comparisons in any case.
> >
> > So I'd vote for making a use of the comparison operators an error unless
> > the type is correct (or there is a method defined).  There is even code
> > in relop.c (commented out) that looks like the right test.  Any
> > objections?
> 
> Not really, except that I get the usual nagging suspicion that someone
> (who?) meant something by doing it this way...
> 
> The current logic seems to be that if either side of the == is a
> vector of atomic type, try to coerce the list on the other side to a
> similar object and then test. However this has a clear bug in that the
> coercion is to double even when the atomic vector is integer. If there
> are lists on both sides, a pointer comparison is done:
> 
> > x<-2
> > list(x)==list(x)
> [1] FALSE
> > list(.Alias(x))==list(.Alias(x))
> [1] TRUE
> 
> The latter seems highly dubious to me. I'd rather have a recursive
> pairwise application of "==" there. However, none of this is what
> identical does, is it?

identical essentially applies itself recursively until it encounters an
non-recursive element (in which case it does element-wise comparisons or
something specific to the special type, such as a symbol).  

My take is that the "==" operator is for generating data structures that
look like the arguments but with TRUE, FALSE, or NA in the appropriate
elements. Notice, e.g., that identical(1,NA) is FALSE while 1==NA is NA.

It's possible one would like to do == recursively to all the elements of
two lists, suggesting an lapply of the "==" function.  (R doesn't yet
have a recursive apply to do this at all levels of recursion.)

But in most examples I've seen, users really wanted a single TRUE/FALSE
result, in which case they should _not_ be using the "==" operator.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas.baumann@ch.tum.de  Mon Aug 27 22:05:41 2001
From: thomas.baumann@ch.tum.de (thomas.baumann@ch.tum.de)
Date: Mon, 27 Aug 2001 16:05:41 -0500 (CDT)
Subject: [Rd] colorbar legend for image()
Message-ID: <200108272105.f7RL5gk06656@rc1021.ce.uiuc.edu>

Hi,

are there any plans to add a colorbar legend to image()?

Or such a possibility already implemented which I just haven't
discovered yet. Anyway, I will be willing to spent some time on the
implementation if there isn't anyone working on that already.

Thanks
Thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Aug 27 22:53:09 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 27 Aug 2001 17:53:09 -0400
Subject: [Rd] is.environment, as.environment, and NULL
Message-ID: <3B8AC145.E9483D4F@research.bell-labs.com>

The r-devel (1.4) code has C implementations now of the class and
class<- functions in package methods, and also of as.environment.

The last brings up a question (it shows up in the isas-tests test
suite).

as.environment(NULL) is NULL.  Seems like it has to be, since NULL is
the environment associated with package:base.

But is.environment(NULL) is FALSE, which is also fairly natural, if we
think of testing the type of the argument.

The inconsistency causes a related test in isas-tests.R to produce a
FALSE (where generally they should either evaluate to TRUE or generate
an error).

Looking at the uses of is.environment in the R source itself, most of
them seem to hedge their bets on whether is.environment(NULL) is TRUE or
FALSE.

There isn't a completely consistent solution, given the use of NULL as
an environment.  For the moment it seemed best to live with that one
anomalous result in the tests.

John
-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 27 23:22:54 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Aug 2001 00:22:54 +0200
Subject: [Rd] is.environment, as.environment, and NULL
In-Reply-To: <3B8AC145.E9483D4F@research.bell-labs.com>
References: <3B8AC145.E9483D4F@research.bell-labs.com>
Message-ID: <x2wv3prvlt.fsf@blueberry.kubism.ku.dk>

John Chambers <jmc@research.bell-labs.com> writes:

> There isn't a completely consistent solution, given the use of NULL as
> an environment.  For the moment it seemed best to live with that one
> anomalous result in the tests.

The use of NULL for the base environment is something which I would
like to see go away anyway. It makes little sense semantically (if
anything, you would want the NULL environment to be an empty one), and
there are pitfalls where a NULL value returned by accident can cause
code to work in base but not in a package.

I did start to look into it at some point but ran out of stamina or
got distracted (probably by release timings as usual...). As I recall
it, NULL for base envir is only really used in a handful of places as
a sentinel for searches through the search path, as in:

    for (rho = R_GlobalEnv; rho != R_NilValue; rho = ENCLOS(rho)) ..

The base environment is special because the symbol lookups are
different there, but it could be represented by R_BaseEnv or some such
instead of R_NilValue. I doubt that much interpreted code needs to
explicitly test whether an environment is the base environment. One
thing to watch out for might be saved workspaces, though. On the other
hand, we do not save the search path, so maybe not...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Aug 28 07:25:39 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 28 Aug 2001 08:25:39 +0200
Subject: [Rd] is.environment, as.environment, and NULL
In-Reply-To: <x2wv3prvlt.fsf@blueberry.kubism.ku.dk>
References: <3B8AC145.E9483D4F@research.bell-labs.com>
 <x2wv3prvlt.fsf@blueberry.kubism.ku.dk>
Message-ID: <15243.14691.106481.288305@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> John Chambers <jmc@research.bell-labs.com> writes:
>> There isn't a completely consistent solution, given the use of NULL as
>> an environment.  For the moment it seemed best to live with that one
>> anomalous result in the tests.

> The use of NULL for the base environment is something which I would
> like to see go away anyway. It makes little sense semantically (if
> anything, you would want the NULL environment to be an empty one), and
> there are pitfalls where a NULL value returned by accident can cause
> code to work in base but not in a package.

> I did start to look into it at some point but ran out of stamina or
> got distracted (probably by release timings as usual...). As I recall
> it, NULL for base envir is only really used in a handful of places as
> a sentinel for searches through the search path, as in:

>     for (rho = R_GlobalEnv; rho != R_NilValue; rho = ENCLOS(rho)) ..

> The base environment is special because the symbol lookups are
> different there, but it could be represented by R_BaseEnv or some such
> instead of R_NilValue. I doubt that much interpreted code needs to
> explicitly test whether an environment is the base environment. One
> thing to watch out for might be saved workspaces, though. On the other
> hand, we do not save the search path, so maybe not...

A question, and a remark.

Question, would we want to keep as.environment(NULL) to give the base
package, so that code like ls(envir = NULL) will still work?

Remark, we once discussed making package environments (in particular for
base) read-only.  One way of doing this is via setting attributes, but
we cannot do this on NULL.  Not that I think this is the way to do it,
though ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From christian.hoffmann@wsl.ch  Tue Aug 28 07:40:37 2001
From: christian.hoffmann@wsl.ch (christian.hoffmann@wsl.ch)
Date: Tue, 28 Aug 2001 08:40:37 +0200 (MET DST)
Subject: [Rd] log10 error ?? (PR#1077)
Message-ID: <200108280640.IAA22157@pubhealth.ku.dk>

format((1000000*(1+.Machine$double.eps)),digits=18)
[1] "1000000.0000000002"
> .Machine$double.rounding
[1] 5
format(log10(1000000*(1+.Machine$double.eps)),digits=18)
[1] "5.9999999999999991"  # MUST be > 6 !!!???

format((1000000*(1-.Machine$double.eps)),digits=18)
[1] " 999999.9999999998"
> format(log10(1000000*(1-.Machine$double.eps)),digits=18)
[1] "5.9999999999999991"  

format(10^5.9999999999999991,digits=18)
[1] "999999.9999999979"

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:RODBC, package:MASS, package:prlib, package:pllib,
package:mathlib, package:mva, package:strlib, package:chlib, Autoloads,
package:base

Dr.sc.math.Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Research Institute WSL 
Zuercherstrasse 111
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
e-mail: christian.hoffmann_at_wsl.ch__prevent_spamming
www: http://www.wsl.ch/staff/christian.hoffmann/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 28 08:22:32 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 28 Aug 2001 08:22:32 +0100 (BST)
Subject: [Rd] is.environment, as.environment, and NULL
In-Reply-To: <15243.14691.106481.288305@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0108280819020.20238-100000@gannet.stats>

On Tue, 28 Aug 2001, Kurt Hornik wrote:

> >>>>> Peter Dalgaard BSA writes:
>
> > John Chambers <jmc@research.bell-labs.com> writes:
> >> There isn't a completely consistent solution, given the use of NULL as
> >> an environment.  For the moment it seemed best to live with that one
> >> anomalous result in the tests.
>
> > The use of NULL for the base environment is something which I would
> > like to see go away anyway. It makes little sense semantically (if
> > anything, you would want the NULL environment to be an empty one), and
> > there are pitfalls where a NULL value returned by accident can cause
> > code to work in base but not in a package.
>
> > I did start to look into it at some point but ran out of stamina or
> > got distracted (probably by release timings as usual...). As I recall
> > it, NULL for base envir is only really used in a handful of places as
> > a sentinel for searches through the search path, as in:
>
> >     for (rho = R_GlobalEnv; rho != R_NilValue; rho = ENCLOS(rho)) ..
>
> > The base environment is special because the symbol lookups are
> > different there, but it could be represented by R_BaseEnv or some such
> > instead of R_NilValue. I doubt that much interpreted code needs to
> > explicitly test whether an environment is the base environment. One
> > thing to watch out for might be saved workspaces, though. On the other
> > hand, we do not save the search path, so maybe not...
>
> A question, and a remark.
>
> Question, would we want to keep as.environment(NULL) to give the base
> package, so that code like ls(envir = NULL) will still work?

Interesting.  Was it ever documented to?

> Remark, we once discussed making package environments (in particular for
> base) read-only.  One way of doing this is via setting attributes, but
> we cannot do this on NULL.  Not that I think this is the way to do it,
> though ...

NULL is just shorthand: there is a proper R object for base:

> .GlobalEnv
<environment: R_GlobalEnv>
> is.null(.GlobalEnv)
[1] FALSE

It was news to me that NULL for .GlobalEnv worked at R level.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 28 09:21:43 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 28 Aug 2001 10:21:43 +0200
Subject: [Rd] colorbar legend for image()
In-Reply-To: <200108272105.f7RL5gk06656@rc1021.ce.uiuc.edu>
References: <200108272105.f7RL5gk06656@rc1021.ce.uiuc.edu>
Message-ID: <15243.21655.237789.712132@gargle.gargle.HOWL>


--LSat2th5Z+
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit

>>>>> "thomas" == thomas baumann <thomas.baumann@ch.tum.de> writes:

    thomas> Hi, are there any plans to add a colorbar legend to image()?

    thomas> Or such a possibility already implemented which I just haven't
    thomas> discovered yet. Anyway, I will be willing to spent some time on
    thomas> the implementation if there isn't anyone working on that
    thomas> already.

to the contrary:  Martin Schlather wanted to use legend() on top of image()
and found a buglet in legend()  which has been corrected for 1.3.1 which is
due coming weekend. 
To illustrate the new possibility of legend, I had produced a function
image.legend() and he improved (?!) it to image.scale()
which isn't yet part of any official version of R.
Hence, feedback on the following is *very* welcome. Note that it would only work
correctly for R version >= 1.3.1.  and hence I also attach the 1.3.1
version of legend() {at the end}.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><



--LSat2th5Z+
Content-Type: text/plain
Content-Description: Help for image.scale()
Content-Disposition: inline;
	filename="image.scale.Rd"
Content-Transfer-Encoding: 7bit

\name{image.scale}

\alias{image.scale}

\title{Provide scale to image plots}

\usage{
image.scale(z, col, x, y=NULL, size=NULL, digits=2, labels=c("breaks", "ranges"))
}

\arguments{
 \item{z}{Data from image plot}
 \item{col}{Colours from image plot}
 \item{x}{Horizintal location of top-left corner of scale, or list with
\code{x} and \code{y} components}
 \item{y}{Vertical location of top-left corner of scale}
 \item{size}{1- or 2-vector of colour-box dimensions}
 \item{digits}{Number of digits after the decimal point in labels}
 \item{labels}{Type of labels}
}

\description{
Provides a vertical colour scale to accompany an image plot.  The
location defaults to the right of the plot, the colour-boxes
default to square, and the style of the labels defaults to giving
the breaks to the right of the scale.}

\details{
Use \code{x=locator(1)} or give both \code{x} and \code{y}
arguments to specify the top-left corner of the scale.  The
colour-boxes then default to squares, and the image is centred
around the vertical midpoint.  Use \code{x=locator(2)} for
complete control of the scale size and location.  The usual scale
(labels to the right) requires a top-left and bottom-right.  To
reverse the scale, go bottom-top.  To swith labels to the left,
go right-left.

The labels default to single values giving the breaks, centred
between colour-boxes.  For ranges centred vertically on each
colour-box (wider), specify \code{labels="ranges"}.}

\author{Jonathan Rougier}

\seealso{\code{\link{image}}}

\examples{
# create an image plot
x <- seq(-0.5, 0.5, len = 31)
qform <- function(x, y) 3*x^2 + y^2 - 2*x*y
z <- outer(x, x, FUN = qform)

par("mar" = c(5, 4, 4, 10) + 0.1)	# wide righthand margin
image(x, x, z, col=gray(6:12/15))
image.scale(z, gray(6:12/15))		# the default

image(x, x, z, col=gray(6:12/15))
image.scale(z, gray(6:12/15), labels="range")	# with range labels

# play around with the following ...
image(x, x, z, col=gray(6:12/15))
image.scale(z, gray(6:12/15), x=locator(1))	# or locator(2)
}

\keyword{aplot,iplot,color}
--LSat2th5Z+
Content-Type: text/plain
Content-Description: image.scale() by two Martins
Content-Disposition: inline;
	filename="image.scale.R"
Content-Transfer-Encoding: 7bit

"image.scale" <-
function (z, col, x, y = NULL, size = NULL, digits = 2, labels = c("breaks", 
    "ranges"))
{
    # sort out the location
    n <- length(col)
    usr <- par("usr")
    mx <- mean(usr[1:2]); my <- mean(usr[3:4])
    dx <- diff(usr[1:2]); dy <- diff(usr[3:4])
    if (missing(x))
        x <- mx + 1.05*dx/2	# default x to right of image
    else if (is.list(x)) {
        if (length(x$x) == 2) 
          size <- c(diff(x$x), -diff(x$y)/n)
        y <- x$y[1]
        x <- x$x[1]
    } else x <- x[1]
    if (is.null(size))
        if (is.null(y)) {
          size <- 0.618*dy/n	# default size, golden ratio
          y <- my + 0.618*dy/2	# default y to give centred scale
        } else size <- (y-my)*2/n
    if (length(size)==1)
        size <- rep(size, 2)	# default square boxes
    if (is.null(y))
        y <- my + n*size[2]/2
    # draw the image scale
    i <- seq(along = col)
    rect(x, y - i * size[2], x + size[1], y - (i - 1) * size[2], 
        col = rev(col), xpd = TRUE)
    # sort out the labels
    rng <- range(z, na.rm = TRUE)
    bks <- seq(from = rng[2], to = rng[1], length = n + 1)
    bks <- formatC(bks, format="f", digits=digits)
    labels <- match.arg(labels)
    if (labels == "breaks")
        ypts <- y - c(0, i) * size[2]
    else {
        bks <- paste(bks[-1], bks[-(n+1)], sep = " - ")
        ypts <- y - (i - 0.5) * size[2]
    }
    text(x = x + 1.2 * size[1], y = ypts, labels = bks, adj =
        ifelse(size[1]>0, 0, 1), xpd = TRUE) 
}

--LSat2th5Z+
Content-Type: text/plain
Content-Description: legend.R from "R-patched" aka "1.3.1 to be"
Content-Disposition: inline;
	filename="legend.R"
Content-Transfer-Encoding: 7bit

legend <-
function(x, y, legend, fill, col = "black", lty, lwd, pch, bty = "o",
         bg = par("bg"), pt.bg = NA, cex = 1,
         xjust = 0, yjust = 1, x.intersp = 1, y.intersp = 1, adj = 0,
         text.width = NULL, merge = do.lines && has.pch, trace = FALSE,
         ncol = 1, horiz = FALSE)
{
    if(is.list(x)) {
	if(!missing(y)) {	# the 2nd arg may really be `legend'
            if(!missing(legend))
                stop("`y' and `legend' when `x' is list (need no `y')")
            legend <- y
        }
        y <- x$y; x <- x$x
    } else if(missing(y)) stop("missing y")
    if (!is.numeric(x) || !is.numeric(y))
	stop("non-numeric coordinates")
    if ((nx <- length(x)) <= 0 || nx != length(y) || nx > 2)
	stop("invalid coordinate lengths")

    xlog <- par("xlog")
    ylog <- par("ylog")

    rect2 <- function(left, top, dx, dy, ...) {
	r <- left + dx; if(xlog) { left <- 10^left; r <- 10^r }
	b <- top  - dy; if(ylog) {  top <- 10^top;  b <- 10^b }
	rect(left, top, r, b, ...)
    }
    segments2 <- function(x1, y1, dx, dy, ...) {
	x2 <- x1 + dx; if(xlog) { x1 <- 10^x1; x2 <- 10^x2 }
	y2 <- y1 + dy; if(ylog) { y1 <- 10^y1; y2 <- 10^y2 }
	segments(x1, y1, x2, y2, ...)
    }
    points2 <- function(x, y, ...) {
	if(xlog) x <- 10^x
	if(ylog) y <- 10^y
	points(x, y, ...)
    }
    text2 <- function(x, y, ...) {
	##--- need to adjust  adj == c(xadj, yadj) ?? --
	if(xlog) x <- 10^x
	if(ylog) y <- 10^y
	text(x, y, ...)
    }
    if(trace)
        catn <- function(...)
            do.call("cat", c(lapply(list(...),formatC), list("\n")))

    cin <- par("cin")
    Cex <- cex * par("cex")             # = the `effective' cex for text

    if(is.null(text.width))
	text.width <- max(strwidth(legend, u="user", cex=cex))
    else if(!is.numeric(text.width) || text.width < 0)
	stop("text.width must be numeric, >= 0")

    xc <- Cex * xinch(cin[1], warn.log=FALSE)# [uses par("usr") and "pin"]
    yc <- Cex * yinch(cin[2], warn.log=FALSE)

    xchar  <- xc
    yextra <- yc * (y.intersp - 1)
    ymax   <- max(yc, strheight(legend, u="user", cex=cex))
    ychar <- yextra + ymax
    if(trace) catn("  xchar=", xchar, "; (yextra,ychar)=", c(yextra,ychar))

    if(!missing(fill)) {
        ##= sizes of filled boxes.
        xbox <- xc * 0.8
        ybox <- yc * 0.5
        dx.fill <- xbox ## + x.intersp*xchar
    }
    do.lines <- (!missing(lty) && any(lty > 0)) || !missing(lwd)
    n.leg <- length(legend)

    ## legends per column:
    n.legpercol <-
        if(horiz) {
            if(ncol != 1)
                warning(paste(
             "horizontal specification overrides: Number of columns :=",n.leg))
            ncol <- n.leg
            1
        } else ceiling(n.leg / ncol)

    if(has.pch <- !missing(pch)) {
	if(is.character(pch) && nchar(pch[1]) > 1) {
            if(length(pch) > 1)
                warning("Not using pch[2..] since pch[1] has multiple chars")
	    np <- nchar(pch[1])
	    pch <- substr(rep(pch[1], np), 1:np, 1:np)
	}
	if(!merge) dx.pch <- x.intersp/2 * xchar
    }
    x.off <- if(merge) -0.7 else 0

    ##- Adjust (x,y) :
    if (xlog) x <- log10(x)
    if (ylog) y <- log10(y)

    if(nx == 2) {
        ## (x,y) are specifiying OPPOSITE corners of the box
        x <- sort(x)
        y <- sort(y)
        left <- x[1]
        top  <- y[2]
        w <- diff(x)# width
        h <- diff(y)# height
	w0 <- w/ncol # column width

	x <- mean(x)
	y <- mean(y)
	if(missing(xjust)) xjust <- 0.5
	if(missing(yjust)) yjust <- 0.5

    }
    else {## nx == 1
        ## -- (w,h) := (width,height) of the box to draw -- computed in steps
        h <- n.legpercol * ychar + yc
        w0 <- text.width + (x.intersp + 1) * xchar
        if(!missing(fill))      w0 <- w0 + dx.fill
        if(has.pch && !merge)   w0 <- w0 + dx.pch
        if(do.lines)		w0 <- w0 + (2+x.off) * xchar
        w <- ncol*w0 + .5* xchar
        ##-- (w,h) are now the final box width/height.
        left <- x      - xjust  * w
        top  <- y + (1 - yjust) * h
    }

    if (bty != "n") {
        if(trace)
            catn("  rect2(",left,",",top,", w=",w,", h=",h,"...)",sep="")
	rect2(left, top, dx = w, dy = h, col = bg)
    }
    ## (xt[],yt[]) := `current' vectors of (x/y) legend text
    xt <- left + xchar + (w0 * rep(0:(ncol-1), rep(n.legpercol,ncol)))[1:n.leg]
    yt <- top - (rep(1:n.legpercol,ncol)[1:n.leg]-1) * ychar - 0.5 * yextra - ymax

    if (!missing(fill)) {               #- draw filled boxes -------------
	fill <- rep(fill, length.out=n.leg)
	rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill)
	xt <- xt + dx.fill
    }
    if(has.pch || do.lines)
        col <- rep(col,length.out=n.leg)

    if (do.lines) {                     #- draw lines ---------------------
        seg.len <- 2 # length of drawn segment, in xchar units
	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
	if(missing(lwd)) lwd <- par("lwd")
	lty <- rep(lty, length.out = n.leg)
	lwd <- rep(lwd, length.out = n.leg)
	if(trace)
	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
                 ", dx=",seg.len*xchar,", dy=0, ...)", sep="")
	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= seg.len*xchar, dy=0,
		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
	# if (!merge)
        xt <- xt + (seg.len+x.off) * xchar
    }
    if (has.pch) {                      #- draw points -------------------
	pch   <- rep(pch, length.out=n.leg)
	pt.bg <- rep(pt.bg, length.out=n.leg)
	ok <- is.character(pch) | pch >= 0
	x1 <- (if(merge) xt-(seg.len/2)*xchar else xt)[ok]
	y1 <- yt[ok]
	if(trace)
	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
	if (!merge) xt <- xt + dx.pch
    }

    xt <- xt + x.intersp * xchar
    text2(xt, yt, labels= legend, adj= adj, cex= cex)

    invisible(list(rect = list(w=w, h=h, left=left, top=top),
                   text = list(x = xt, y = yt)))
}

--LSat2th5Z+--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 28 09:34:51 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 28 Aug 2001 10:34:51 +0200
Subject: [Rd] log10 error ?? (PR#1077)
In-Reply-To: <200108280640.IAA22157@pubhealth.ku.dk>
References: <200108280640.IAA22157@pubhealth.ku.dk>
Message-ID: <15243.22443.374714.952324@gargle.gargle.HOWL>

>>>>> "ChHo" == christian hoffmann <christian.hoffmann@wsl.ch> writes:

    ChHo> format((1000000*(1+.Machine$double.eps)),digits=18)
    ChHo> [1] "1000000.0000000002"
    >> .Machine$double.rounding
    ChHo> [1] 5
    ChHo> format(log10(1000000*(1+.Machine$double.eps)),digits=18)
    ChHo> [1] "5.9999999999999991"  # MUST be > 6 !!!???

no. 
you assume that every arithmetic operation is correct to the last
bit, which is too much. Note that you have two conversions
decimal <-> binary, and  log10(x) internally really maps to log(x)/log(10)
(where log(10) is stored as constant).


    ChHo> format((1000000*(1-.Machine$double.eps)),digits=18)
    ChHo> [1] " 999999.9999999998"
    >> format(log10(1000000*(1-.Machine$double.eps)),digits=18)
    ChHo> [1] "5.9999999999999991"  

    ChHo> format(10^5.9999999999999991,digits=18)
    ChHo> [1] "999999.9999999979"

You have to expect more than one bit difference..
Definitely no bug.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 28 09:38:49 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Aug 2001 10:38:49 +0200
Subject: [Rd] is.environment, as.environment, and NULL
In-Reply-To: <Pine.LNX.4.31.0108280819020.20238-100000@gannet.stats>
References: <Pine.LNX.4.31.0108280819020.20238-100000@gannet.stats>
Message-ID: <x2n14kd1eu.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> >
> > A question, and a remark.
> >
> > Question, would we want to keep as.environment(NULL) to give the base
> > package, so that code like ls(envir = NULL) will still work?
> 
> Interesting.  Was it ever documented to?

Implicitly at least, but ls("package:base") has been preferable for a
long time.

> > Remark, we once discussed making package environments (in particular for
> > base) read-only.  One way of doing this is via setting attributes, but
> > we cannot do this on NULL.  Not that I think this is the way to do it,
> > though ...
> 
> NULL is just shorthand: there is a proper R object for base:
> 
> > .GlobalEnv
> <environment: R_GlobalEnv>
> > is.null(.GlobalEnv)
> [1] FALSE

Nope...

> It was news to me that NULL for .GlobalEnv worked at R level.
> 
> Brian

It doesn't. NULL is the *base* environment i.e. the one at the very
end of the search path. This is what gives the mess where things like
evalq(foo(x), NULL) will find "foo" in base, but not in a package.
(One gotcha being that taking environment(formula) returns NULL if no
environment was ever set.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 28 09:45:23 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 28 Aug 2001 10:45:23 +0200
Subject: [Rd] colorbar legend for image()
In-Reply-To: <15243.21655.237789.712132@gargle.gargle.HOWL>
References: <200108272105.f7RL5gk06656@rc1021.ce.uiuc.edu>
 <15243.21655.237789.712132@gargle.gargle.HOWL>
Message-ID: <15243.23075.23970.457550@gargle.gargle.HOWL>


--GtXdrZquwx
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "thomas" == thomas baumann <thomas.baumann@ch.tum.de> writes:
    thomas> Hi, are there any plans to add a colorbar legend to image()?

    thomas> Or such a possibility already implemented which I just haven't
    thomas> discovered yet. Anyway, I will be willing to spent some time on
    thomas> the implementation if there isn't anyone working on that
    thomas> already.

    MM> to the contrary: Martin Schlather wanted to use legend() on top of
    MM> image() and found a buglet in legend() which has been corrected for
    MM> 1.3.1 which is due coming weekend.  To illustrate the new
    MM> possibility of legend, I had produced a function image.legend() and
    MM> he improved (?!) it to image.scale() which isn't yet part of any
    MM> official version of R.  Hence, feedback on the following is *very*
    MM> welcome. Note that it would only work correctly for R version >=
    MM> 1.3.1.  and hence I also attach the 1.3.1 version of legend() {at
    MM> the end}.

(and then I've included the three files
  image.scale.Rd,  image.scale.R  and legend.R )

My error was to confuse Jonathan Rougier's  image.scale()  
  {from a post to R-help, on 21 Sep 1999}
with Martin and Martin's  image.legend() ...

So here is our unfinished stuff with some examples appended.
The code still has a few comments in German (which won't be a problem for
Thomas ..).

Feedback *still* very welcome to both image.annotation versions..

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


--GtXdrZquwx
Content-Type: text/plain; charset=iso-8859-1
Content-Description: image.legend() by Martin&Martin
Content-Disposition: inline;
	filename="image-legend.R"
Content-Transfer-Encoding: 7bit


image.legend <-
    function(x,y, zlim, at.z = NULL, col = heat.colors(12), legnd=NULL,
             lwd = max(3,32/length(col)), bg = NA, bty = "", ...)
  ## * kein y.i -- Benutzer soll rein ueber lwd steuern; sollte reichen.
  ## * legnd koennte interessant sein, falls Text geschrieben werden soll
  ##   (weiss mal wieder nicht, wie man aus legnd legend als option
  ##     macht)
  ## * lwd wird per default in Abh. von col gewaehlt.
{
    ## Purpose:
    ## Authors: Martin Maechler,   9 Jul 2001
    ##          Martin Schlather, 24 Jul 2001

  if (!is.null(legnd) && is.null(at.z))
      stop("at.z must be given if legnd is") ## falls legnd darf at.z
    ##                                nicht automatisch gewaehlt werden

    if(!is.numeric(zlim) || zlim[1] > zlim[2])
        stop("`zlim' must be numeric; zlim[1] <= zlim[2]")
    if(is.null(at.z)) {
        ## hier ein Versuch in Abhaengigkeit von n
        ## die Anzahl der labels zu bestimmen:
        n <- min(5, max(1,length(col)/10))
        at.z <- pretty(zlim,n=n,min.n=max(n %/% 3,1))

        ## es sieht nicht schoen aus, wenn pretty die letzte oder
        ## erste zahl weit ausserhalb des zlim legt.
        ## heuristisch nur 25%  (oder so) ueberschreitung bzgl
        ## intervalllaenge zulassen:
        tol <- diff(at.z)[1] / 4
        at.z <- at.z[(at.z>=zlim[1]-tol) & (at.z<=zlim[2]+tol)]
      }
    if(!is.numeric(at.z) || is.unsorted(at.z))
        stop("`at.z' must be numeric non-decreasing")
    n.at <- length(at.z)
    nc   <- length(col)
    if(n.at >= nc)
        stop("length(at.z) must be (much) smaller than length(col)")
    dz <- diff(zlim)
    ## The colors must run equidistantly from zlim[1] to zlim[2];
    ## col[i] is for z-interval zlim[1] + [i-1, i) * dz/nc  ; i = 1:nc
    ## i.e., an at.z[] value z0 is color i0 = floor(nc * (z0 - zlim[1])/dz)
    at.i <- floor(nc * (at.z - zlim[1])/dz )
    ## Possibly extend colors by `background' to the left and right
    bgC <- if(is.null(bg)) NA else bg
    if((xtra.l <- 1 - at.i[1]) > 0) {
        at.i <- at.i + xtra.l
        col <- c(rep(bgC, xtra.l), col)
    }
    if((xtra.r <- at.i[n.at] - nc) > 0)
        col <- c(col, rep(bgC, xtra.r))
    lgd <- character(length(col))

    ## folgende if-Anweisung ist neu:
    if (is.null(legnd)) lgd[at.i] <-format(at.z, dig = 3)
    else {
      if (length(legnd)!=length(at.z))
        stop("at.z and legnd must have the same length")
      lgd[at.i] <- legnd
    }
    if((V <- R.version)$major <= 1 && V$minor <= 3.0 && V$status == "")
{
        ## stop-gap fix around the bug that "NA" is not a valid color:
        if(is.na(bgC)) {
            lgd <- lgd[!is.na(col)]
            col <- col[!is.na(col)]
        }
    }
    legend(x,y, legend = rev(lgd), col = rev(col),
           y.i = lwd/16, bty = bty, lwd = lwd, bg = bg, ...)
}



## From  example(image):
data(volcano)
x <- 10*(1:nrow(volcano))
y <- 10*(1:ncol(volcano))

cols <- terrain.colors(100)

op <- par(mar = par("mar")+c(0,0,0,3), xpd = NA)
image(x, y, volcano, col = cols)
## Look :
image.legend(800, 600, zlim= range(volcano), col = cols, trace=TRUE)
image.legend(730, 600, zlim= range(volcano), col = cols, bg = "thistle")
image.legend(730,  15, zlim= range(volcano), col = cols, bg = "light
blue",
             at.z = range(volcano), yjust = 0, lwd = 2, y.interspace = 0.12)
## to check the legend:
contour(x, y, volcano, levels = seq(90, 200, by=5), add = TRUE, col = "peru")


#########################
## ein paar mehr Beispiele
image(x, y, volcano, col = cols)
n <- c(5,10,20,30,40,100)
for (i in 1:length(n))
  image.legend( (i-1)*140,  15, zlim= range(volcano),bg=0,yju=0,
               col=heat.colors(n[i]))

image(x, y, volcano, col = cols)
image.legend( 700,  15, zlim= range(volcano),bg=0,yju=0,
               col=heat.colors(30),
             at.z = range(volcano), legnd=c("low","high"))


--GtXdrZquwx--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tklistaddr@keittlab.bio.sunysb.edu  Tue Aug 28 21:52:46 2001
From: tklistaddr@keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Tue, 28 Aug 2001 16:52:46 -0400
Subject: [Rd] Suggested change to documentation
Message-ID: <3B8C049E.3010100@keittlab.bio.sunysb.edu>

Its not clear from the documentation whether one should do

\keyword[key1, key2}

or

\keyword{key1}
\keyword{key2}

in .Rd files.  I believe the latter is correct.  (At least 'R CMD check' 
complains when given the first version.)  It would help to make this 
explicit in the R extension writing docs.

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 28 22:16:42 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 28 Aug 2001 22:16:42 +0100 (BST)
Subject: [Rd] Suggested change to documentation
In-Reply-To: <3B8C049E.3010100@keittlab.bio.sunysb.edu>
Message-ID: <Pine.GSO.4.31.0108282213040.29684-100000@auk.stats>

On Tue, 28 Aug 2001, Timothy H. Keitt wrote:

> Its not clear from the documentation whether one should do
>
> \keyword[key1, key2}
>
> or
>
> \keyword{key1}
> \keyword{key2}
>
> in .Rd files.  I believe the latter is correct.  (At least 'R CMD check'
> complains when given the first version.)  It would help to make this
> explicit in the R extension writing docs.

The second is indeed correct.

Where is this unclear in R-exts.texi?  That says

@item \keyword@{@var{key}@}
Each @code{\keyword} entry should specify one of the standard keywords
(as listed in the file @file{$R_HOME/doc/KEYWORDS.db}).  There must be
at least one @code{\keyword} entry, but can be more that one if the @R{}
object being documented falls into more than one category.

Note `one of'.  If you can point us at the problem, we can fix it in time
for 1.3.1, but this has come up before and we've not located anything that
might lead to the idea that the first is correct.  (It is \keyword{} not
\keywords{}, too.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tklistaddr@keittlab.bio.sunysb.edu  Wed Aug 29 04:14:48 2001
From: tklistaddr@keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Tue, 28 Aug 2001 23:14:48 -0400
Subject: [Rd] Suggested change to documentation
References: <Pine.GSO.4.31.0108282213040.29684-100000@auk.stats>
Message-ID: <3B8C5E28.20608@keittlab.bio.sunysb.edu>

Actually, I noticed the latest version of prompt() nicely comments the 
keyword entry with "ONLY ONE KEYWORD PER ENTRY..." or something like 
that, so its probably not a big deal.  Just remember, we read these 
things at break-neck speed (at least I don't have time to carefully 
digest complicated documentation), so it has to be really simple.  I got 
tripped up with "keyword entry" thinking that there were multiple 
entries per \keyword{} section.  Perhaps "Each \keyword 
(section|stanza|clause|?) can contain one and only one keyword [from the 
database...].  Use multiple \keyword ?? if more than one keyword is 
desired."  Even better, put several keywords in one of the examples.

Tim

Prof Brian D Ripley wrote:

>On Tue, 28 Aug 2001, Timothy H. Keitt wrote:
>
>>Its not clear from the documentation whether one should do
>>
>>\keyword[key1, key2}
>>
>>or
>>
>>\keyword{key1}
>>\keyword{key2}
>>
>>in .Rd files.  I believe the latter is correct.  (At least 'R CMD check'
>>complains when given the first version.)  It would help to make this
>>explicit in the R extension writing docs.
>>
>
>The second is indeed correct.
>
>Where is this unclear in R-exts.texi?  That says
>
>@item \keyword@{@var{key}@}
>Each @code{\keyword} entry should specify one of the standard keywords
>(as listed in the file @file{$R_HOME/doc/KEYWORDS.db}).  There must be
>at least one @code{\keyword} entry, but can be more that one if the @R{}
>object being documented falls into more than one category.
>
>Note `one of'.  If you can point us at the problem, we can fix it in time
>for 1.3.1, but this has come up before and we've not located anything that
>might lead to the idea that the first is correct.  (It is \keyword{} not
>\keywords{}, too.)
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Wed Aug 29 18:14:19 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Wed, 29 Aug 2001 19:14:19 +0200 (MET DST)
Subject: [Rd] problem in plot(), combining log="y" with type="s" (PR#1078)
Message-ID: <200108291714.TAA15580@pubhealth.ku.dk>

I just noticed this behavior of plot().  If you combine: log="y", with type
="s", specify ylim, AND have plotting points outside of ylim, then the R
process hangs.
For example:

plot(1:10,seq(0.0001,1,length=10),ylim=c(0.01,1),type="s",log="y")

It will also hang if the original plot() command did not specify ylim, but
a subsequent
lines(x,y,type="s")
has data points outside the plotting limits established by plot.

In Windows 98, [Esc] does not interrupt the loop, but in Irix, ^C does.

I've found this in both:

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

AND

--please do not edit the information below--

Version:
 platform = mips-sgi-irix6.5
 arch = mips
 os = irix6.5
 system = mips, irix6.5
 status =
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@cogsci.ed.ac.uk  Wed Aug 29 19:46:17 2001
From: stephen@cogsci.ed.ac.uk (stephen@cogsci.ed.ac.uk)
Date: Wed, 29 Aug 2001 20:46:17 +0200 (MET DST)
Subject: [Rd] Array.rd - typos and suggestion (PR#1079)
Message-ID: <200108291846.UAA16020@pubhealth.ku.dk>

Full_Name: Stephen Eglen
Version: 1.3.0
OS: Redhat 6.1
Submission from: (NULL) (128.252.204.21)


in R-1.3.0/src/library/base/man/array.Rd there are a few typos:

line 16 reated -> created
line 17 idices -> indices
line 19 compoent -> component

The documentation also seems to refer to the first argument as both
`data' and `x' (for the default value of arg 2) which is confusing.
I suggest changing line 10 to:
array(data, dim = length(data), dimnames = NULL)

and changing \code{x} to \code{data} on lines 26,28 and 29.

Cheers, Stephen



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Wed Aug 29 21:53:42 2001
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Thu, 30 Aug 2001 08:53:42 +1200
Subject: [Rd] problem in plot(), combining log="y" with type="s" (PR#1078)
References: <200108291714.TAA15580@pubhealth.ku.dk>
Message-ID: <005801c130cc$b035c4e0$175dd882@stat.auckland.ac.nz>

Hi


> I just noticed this behavior of plot().  If you combine: log="y", with
type
> ="s", specify ylim, AND have plotting points outside of ylim, then the R
> process hangs.
> For example:
>
> plot(1:10,seq(0.0001,1,length=10),ylim=c(0.01,1),type="s",log="y")
>
> It will also hang if the original plot() command did not specify ylim, but
> a subsequent
> lines(x,y,type="s")
> has data points outside the plotting limits established by plot.
>
> In Windows 98, [Esc] does not interrupt the loop, but in Irix, ^C does.


Thanks for the report.  This is fixed in 1.3.1 (coming soon).

For the record, I'm assuming this is (yet another) example of the bug that
was fixed for bug#997 (bug in CSclipline)

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ljlehou@sandia.gov  Thu Aug 30 00:40:15 2001
From: ljlehou@sandia.gov (ljlehou@sandia.gov)
Date: Thu, 30 Aug 2001 01:40:15 +0200 (MET DST)
Subject: [Rd] bug in histogram rendering (PR#1080)
Message-ID: <200108292340.BAA17093@pubhealth.ku.dk>

Full_Name: Leslea J. Lehoucq
Version: 1.3.0
OS: Solaris 7
Submission from: (NULL) (134.253.26.10)


When one creates a histogram with the freq=FALSE (i.e. plot
the density on the Y-axis), the density values are off by a 
factor of 10.  For instance, a bin in which 50% of the plotted
values fall is marked 0.05, not 0.50, on the Y-axis.  Instead
of the density summing to 1.0, it sums to 0.1.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 30 06:56:41 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 30 Aug 2001 07:56:41 +0200 (MET DST)
Subject: [Rd] bug in histogram rendering (PR#1080)
Message-ID: <200108300556.HAA17714@pubhealth.ku.dk>

On Thu, 30 Aug 2001 ljlehou@sandia.gov wrote:

> Full_Name: Leslea J. Lehoucq
> Version: 1.3.0
> OS: Solaris 7
> Submission from: (NULL) (134.253.26.10)
>
>
> When one creates a histogram with the freq=FALSE (i.e. plot
> the density on the Y-axis), the density values are off by a
> factor of 10.  For instance, a bin in which 50% of the plotted
> values fall is marked 0.05, not 0.50, on the Y-axis.  Instead
> of the density summing to 1.0, it sums to 0.1.

It should integrate to one, not sum to one.
Can you give us an example of what you think is wrong?
For example,

set.seed(1)
Y <- runif(100)
hist(Y, freq=F)

correctly has an average level of 1, sum 5.

Calling them `relative frequencies' is perhaps misleading (relative to
what?), but then what hist() does by default is not a histogram in the
terminology in use in much of the world.  Some of also argue it is
extremely misleading unless the bins are all of the same width.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pollari@sun3.oulu.fi  Fri Aug 31 06:54:36 2001
From: pollari@sun3.oulu.fi (pollari@sun3.oulu.fi)
Date: Fri, 31 Aug 2001 07:54:36 +0200 (MET DST)
Subject: [Rd] problems installing R on Solaris 2.8 machine (PR#1081)
Message-ID: <200108310554.HAA29912@pubhealth.ku.dk>

I've just installed R 1.3.0, and everything went fine except that
the resulting directories and files were owned by root, and for ordinary
users there was no access for most of them. This was also the case with
a large amount of files. I've fixed the installation manually, but it
took quite a lot of time.

	Pivi Pollari
	University of Oulu
	Computer services center

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From replypro@mcgraw-hill.com.tw  Fri Aug 31 11:48:20 2001
From: replypro@mcgraw-hill.com.tw (=?big5?B?s8Gu5sO5p8a6uA==?=)
Date: Fri, 31 Aug 2001 18:48:20 +0800
Subject: [Rd] =?big5?B?tfizpbZWrMm3c67RqHQgLS2hbanKvKShQsV2pE+hQrRjpua7ULdMr7otLb9ztfg=?=
 =?big5?B?uEGpVOCsqrqopKbip+q6dLlDwLihbg==?=
Message-ID: <200108311049.MAA20089@stat.math.ethz.ch>

This is a multi-part message in MIME format.

------=_NextPart_000_0009_01C1324D.85230560
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_000A_01C1324D.85230560"


------=_NextPart_001_000A_01C1324D.85230560
Content-Type: text/plain;
	charset="big5"
Content-Transfer-Encoding: quoted-printable

Dear r-devel,

=AC=B0=A4=B0=BB=F2=A4@=AF=EB=A4H=B9=EF=A4k=A5=CD=AA=BA=A8=E8=AAO=A6L=B6H=B4=
N=ACO=B7=C5=ACX=A1B=B5=BD=C5=E9=A4H=B7N=A1B=BBy=A8=A5=AF=E0=A4O=B1j=A1F
=A6=D3=AC=DB=B9=EF=A6a=BB{=AC=B0=A8k=A5=CD=ABh=A4=F1=B8=FB=ABi=B4=B1=A1B=BD=
=C4=B0=CA=A1B=A6n=A6=E2=A1B=AA=C5=B6=A1=B7P=A1B=A4=E8=A6V=B7P=A8=CE=A1H
=A7A=ACO=A7_=B4=BF=B8g=C3h=BA=C3=B9L=A1A
=B3o=A8=C7=A8=E8=AAO=A6L=B6H=A4=A4=AA=BA=A8=E2=A9=CA=AEt=B2=A7=A8s=B3=BA=AC=
O=A8k=A4k=A8=E2=A9=CA=A6b=A5=CD=B2z=B5o=AEi=A4W=BBP=A5=CD=AD=D1=A8=D3=AA=BA=
=A4=A3=A6P=BF=F2=B6=C7=A6]=A4l=A9=D2=B3y=A6=A8=AA=BA=A1A
=A9=CE=ACO=AB=E1=A4=D1=AA=BA=B1=D0=BEi=BBP=A4=E5=A4=C6=A9=D2=AB=AC=B6=EC=A5=
X=A8=D3=AA=BA=A1H
=A6=D3=A4=A3=A6P=A4=E5=A4=C6=A4=A4=B9=EF=A8k=A4l=AE=F0=B7=A7=BBP=A4k=A9=CA=
=AFS=BD=E8=A9=CE=A6h=A9=CE=A4=D6=AA=BA=B1j=BD=D5=BBP=AD=AB=B5=F8=A1A
=A4S=A9M=B3o=BC=CB=AA=BA=A8=E8=AAO=A6L=B6H=A6=B3=A4=B0=BB=F2=C3=F6=ABY=A9=
O=A1H
=A5=E7=A9=CE=B3o=A4@=A4=C1=A5u=ACO=AC=B0=AE=BA=B6=EC=A5X=C2=F9=A9=CA=A4G=A4=
=B8=BB=F9=AD=C8=C6[=A6=D3=AC=EF=C6w=AA=FE=B7|=A5X=AA=BA=B9L=AE=C9=B0g=AB=E4=
=A1H
=AA=BE=A6W=AA=C0=B7|=A4=DF=B2z=BE=C7=AEa=C0=B9=ACf=B4=B5=B1=D0=B1=C2=B1N=A6=
b=A5=BB=AE=D1=A4=A4=A1A
=B1q=B8A=A9T=E0=AC=AA=BA=C6[=C2I=A1A=AC=B0=A7A=B8=D1=B6}=B3o=A4@=B3s=A6=EA=
=C3=F6=A9=F3=A9=CA=A7O=BBP=A6=E6=AC=B0=BC=D2=A6=A1=AA=BA=BA=C3=B0=DD=A1C
=A6b=A5=BB=AE=D1=A4=A4=A1A=C0=B9=ACf=B4=B5=B1=D0=B1=C2=A5H=B7=A5=AC=B0=A4=
=DE=A4H=A4J=B3=D3=AA=BA=A4=E8=A6=A1=A1A
=AC=B0=A7=DA=AD=CC=A4=B6=B2=D0=A4F=BE=C7=AC=C9=A5=D8=ABe=B9=EF=B8A=A9T=E0=
=AC=A4=CE=A8=E4=B1q=A5j=A6=DC=A4=B5=B9=EF=A4H=C3=FE=A4=DF=B2z=AA=BA=BCv=C5=
T=AA=BA=BB{=C3=D1=A1C
=A7@=AA=CC=A4=DE=A5=CE=A4F=B0w=B9=EF=B6W=B9L=A4K=A4d=A6W=A6=A8=A6~=A8k=A4=
k=A9M=A8=E0=B5=A3=A9=D2=B0=B5=AA=BA=AD=EC=B3=D0=A9=CA=AC=E3=A8s=A1A=A5H=A4=
=CE=A9M=B3o=AD=D3=A5D=C3D=A6=B3=C3=F6=AA=BA=A5@=AC=C9=A4=E5=BE=C7=A1A
=B1N=A8p=B1K=AA=BA=AD=D3=AE=D7=A5v=A9M=B2=C4=A4@=A4=E2=AA=BA=AC=EC=BE=C7=AC=
=E3=A8s=A5=A9=A7=AE=A6=EA=B3s=A1A
=A5H=B1=B4=AF=C1=B8A=A9T=E0=AC=A6b=A4H=C3=FE=A4=DF=B4=BC=A9M=A4H=C3=FE=A9=
R=B9B=B4X=A5G=A6U=AD=D3=AD=B1=A6V=A4W=A9=D2=A7=EA=BAt=AA=BA=A8=A4=A6=E2=A1=
C
=A7@=AA=CC=A7i=B6D=A7=DA=AD=CC=A1A=B8A=A9T=E0=AC=ACO=A6p=A6=F3=BCv=C5T=BB=
y=A8=A5=AF=E0=A4O=A1B=BB{=AA=BE=A1B=AA=C5=B6=A1=A9w=A6=EC=A1B=A7=DA=AD=CC=
=A9=D2=B1q=A8=C6=AA=BA=C2=BE=B7~=A1B
=A7=DA=AD=CC=B7|=A6=A8=AC=B0=A4=B0=BB=F2=BC=CB=AA=BA=B1=A1=A4H=A1B=A4V=A4=
=D2=A1B=A9d=A4l=A9M=A4=F7=A5=C0=A1B
=AC=C6=A6=DC=A9=F3=A7=DA=AD=CC=B7L=AF=BA=AA=BA=A4=E8=A6=A1=B5=A5=A1C
=B8A=A9T=E0=AC=B6=EC=B3y=A4F=A7=DA=AD=CC=B9=EF=A9=CA=A1B=C5v=A4O=A1B=BC=C9=
=A4O=A6=E6=AC=B0=BBP=BFW=A5e=A6a=A6=EC=AA=BA=BC=A4=B1=E6=A1A
=A7=F3=ACO=A7=DA=AD=CC=B7Q=B1=E6=A6=A8=AC=B0=AD^=B6=AF=A1B=A5D=AE_=AA=CC=A1=
A=A9=CE=ACO=C1=E2=A5=FA=BFO=B5J=C2I=AA=BA=AE=DA=B7=BD=A1C
=A5L=A8=C3=A5B=BB=A1=A9=FA=A4F=A1A=B8A=A9T=E0=AC=A6p=A6=F3=AF=E0=B8=D1=C4=
=C0=A8=E2=A9=CA=A4@=AF=EB=A6b=AB=E4=A6=D2=A9M=B7=BE=B3q=A4=E8=A6=A1=A4W=AA=
=BA=AEt=B2=A7=A1C
=B9=EF=A9=F3=B8A=A9T=E0=AC=B3o=AD=D3=B4=AE=ADt=A4F=B3=CC=A6h=B4c=A6W=A1B=BE=
D=A8=FC=B3=CC=A6h=BB~=B8=D1=AA=BA=A4H=C3=FE=BFE=AF=C0=A1A=A5=BB=AE=D1=B4=A3=
=A8=D1=A4F=A4@=AD=D3=A7O=A5X=A4=DF=B5=F4=AA=BA=C6[=C2I=A1C
=A5=F4=A6=F3=B9=EF=A4H=C3=FE=A6=E6=AC=B0=AA=BA=A5=CD=AA=AB=A9=CA=AE=DA=B7=
=BD=B7P=BF=B3=BD=EC=AA=BA=C5=AA=AA=CC=A1A=B1N=B1q=A5=BB=AE=D1=C0=F2=B1o=C5=
=E5=A9_=AA=BA=BE\=C5=AA=B7P=A8=FC=A9M=C2=D7=B4I=AA=BA=B7s=AA=BE=A1C


=20
=A1m=A9=CA=BC=A4=A1B=C5v=A4O=A1B=B4c=A6=E6=BBP=B7L=AF=BA=A1G=BFs=B5=F8=B8=
A=A9T=E0=AC=AA=BA=A8=A4=A6=E2=A7=EA=BAt=B9C=C0=B8=A1n
 =A7@    =AA=CC=A1GJames McBride Dabbs/Mary Godwin Dabbs =
=B3\=AE=CA=BA=D6 =C4=B6
 =AE=D1    =A8t=A1G=B5=F8=B3=A5=B6V=AC=C9 BB001
 =C1` =AD=B6 =BC=C6=A1G320=AD=B6
 =A9w    =BB=F9=A1G320=A4=B8
 I S B N =A1G957-493-412-8

-------------------------------------------------------------------------=
-------



=B3=C1=AE=E6=C3=B9=A7=C6=BA=B8=A5X=AA=A9=A4=BD=A5q =
=A5x=C6W=A4=C0=A4=BD=A5q
Tel 02-27272211  Fax 02-23463300
=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw


------=_NextPart_001_000A_01C1324D.85230560
Content-Type: text/html;
	charset="big5"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; charset=3Dbig5">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#000000 background=3D"">
<DIV><FONT face=3DArial color=3D#ffffff size=3D2>Dear =
r-devel,</FONT></DIV>
<DIV><FONT face=3DArial color=3D#c0c0c0></FONT>&nbsp;</DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=AC=B0=A4=B0=BB=F2=A4@=AF=EB=A4H=B9=EF=A4k=A5=CD=AA=BA=A8=E8=AAO=
=A6L=B6H=B4N=ACO=B7=C5=ACX=A1B=B5=BD=C5=E9=A4H=B7N=A1B=BBy=A8=A5=AF=E0=A4=
O=B1j=A1F</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A6=D3=AC=DB=B9=EF=A6a=BB{=AC=B0=A8k=A5=CD=ABh=A4=F1=B8=FB=ABi=B4=
=B1=A1B=BD=C4=B0=CA=A1B=A6n=A6=E2=A1B=AA=C5=B6=A1=B7P=A1B=A4=E8=A6V=B7P=A8=
=CE=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A7A=ACO=A7_=B4=BF=B8g=C3h=BA=C3=B9L=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B3o=A8=C7=A8=E8=AAO=A6L=B6H=A4=A4=AA=BA=A8=E2=A9=CA=AEt=B2=A7=A8=
s=B3=BA=ACO=A8k=A4k=A8=E2=A9=CA=A6b=A5=CD=B2z=B5o=AEi=A4W=BBP=A5=CD=AD=D1=
=A8=D3=AA=BA=A4=A3=A6P=BF=F2=B6=C7=A6]=A4l=A9=D2=B3y=A6=A8=AA=BA=A1A</FON=
T></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A9=CE=ACO=AB=E1=A4=D1=AA=BA=B1=D0=BEi=BBP=A4=E5=A4=C6=A9=D2=AB=AC=
=B6=EC=A5X=A8=D3=AA=BA=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A6=D3=A4=A3=A6P=A4=E5=A4=C6=A4=A4=B9=EF=A8k=A4l=AE=F0=B7=A7=BBP=
=A4k=A9=CA=AFS=BD=E8=A9=CE=A6h=A9=CE=A4=D6=AA=BA=B1j=BD=D5=BBP=AD=AB=B5=F8=
=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A4S=A9M=B3o=BC=CB=AA=BA=A8=E8=AAO=A6L=B6H=A6=B3=A4=B0=BB=F2=C3=F6=
=ABY=A9O=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5=E7=A9=CE=B3o=A4@=A4=C1=A5u=ACO=AC=B0=AE=BA=B6=EC=A5X=C2=F9=A9=
=CA=A4G=A4=B8=BB=F9=AD=C8=C6[=A6=D3=AC=EF=C6w=AA=FE=B7|=A5X=AA=BA=B9L=AE=C9=
=B0g=AB=E4=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=AA=BE=A6W=AA=C0=B7|=A4=DF=B2z=BE=C7=AEa=C0=B9=ACf=B4=B5=B1=D0=B1=
=C2=B1N=A6b=A5=BB=AE=D1=A4=A4=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B1q=B8A=A9T=E0=AC=AA=BA=C6[=C2I=A1A=AC=B0=A7A=B8=D1=B6}=B3o=A4@=
=B3s=A6=EA=C3=F6=A9=F3=A9=CA=A7O=BBP=A6=E6=AC=B0=BC=D2=A6=A1=AA=BA=BA=C3=B0=
=DD=A1C<BR>=A6b=A5=BB=AE=D1=A4=A4=A1A=C0=B9=ACf=B4=B5=B1=D0=B1=C2=A5H=B7=A5=
=AC=B0=A4=DE=A4H=A4J=B3=D3=AA=BA=A4=E8=A6=A1=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=AC=B0=A7=DA=AD=CC=A4=B6=B2=D0=A4F=BE=C7=AC=C9=A5=D8=ABe=B9=EF=B8=
A=A9T=E0=AC=A4=CE=A8=E4=B1q=A5j=A6=DC=A4=B5=B9=EF=A4H=C3=FE=A4=DF=B2z=AA=BA=
=BCv=C5T=AA=BA=BB{=C3=D1=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7@=AA=CC=A4=DE=A5=CE=A4F=B0w=B9=EF=B6W=B9L=A4K=A4d=A6W=A6=A8=A6=
~=A8k=A4k=A9M=A8=E0=B5=A3=A9=D2=B0=B5=AA=BA=AD=EC=B3=D0=A9=CA=AC=E3=A8s=A1=
A=A5H=A4=CE=A9M=B3o=AD=D3=A5D=C3D=A6=B3=C3=F6=AA=BA=A5@=AC=C9=A4=E5=BE=C7=
=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=B1N=A8p=B1K=AA=BA=AD=D3=AE=D7=A5v=A9M=B2=C4=A4@=A4=E2=AA=BA=AC=EC=
=BE=C7=AC=E3=A8s=A5=A9=A7=AE=A6=EA=B3s=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5H=B1=B4=AF=C1=B8A=A9T=E0=AC=A6b=A4H=C3=FE=A4=DF=B4=BC=A9M=A4H=
=C3=FE=A9R=B9B=B4X=A5G=A6U=AD=D3=AD=B1=A6V=A4W=A9=D2=A7=EA=BAt=AA=BA=A8=A4=
=A6=E2=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7@=AA=CC=A7i=B6D=A7=DA=AD=CC=A1A=B8A=A9T=E0=AC=ACO=A6p=A6=F3=BC=
v=C5T=BBy=A8=A5=AF=E0=A4O=A1B=BB{=AA=BE=A1B=AA=C5=B6=A1=A9w=A6=EC=A1B=A7=DA=
=AD=CC=A9=D2=B1q=A8=C6=AA=BA=C2=BE=B7~=A1B</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A7=DA=AD=CC=B7|=A6=A8=AC=B0=A4=B0=BB=F2=BC=CB=AA=BA=B1=A1=A4H=A1=
B=A4V=A4=D2=A1B=A9d=A4l=A9M=A4=F7=A5=C0=A1B</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=AC=C6=A6=DC=A9=F3=A7=DA=AD=CC=B7L=AF=BA=AA=BA=A4=E8=A6=A1=B5=A5=
=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B8A=A9T=E0=AC=B6=EC=B3y=A4F=A7=DA=AD=CC=B9=EF=A9=CA=A1B=C5v=A4O=
=A1B=BC=C9=A4O=A6=E6=AC=B0=BBP=BFW=A5e=A6a=A6=EC=AA=BA=BC=A4=B1=E6=A1A</F=
ONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7=F3=ACO=A7=DA=AD=CC=B7Q=B1=E6=A6=A8=AC=B0=AD^=B6=AF=A1B=A5D=AE=
_=AA=CC=A1A=A9=CE=ACO=C1=E2=A5=FA=BFO=B5J=C2I=AA=BA=AE=DA=B7=BD=A1C</FONT=
></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5L=A8=C3=A5B=BB=A1=A9=FA=A4F=A1A=B8A=A9T=E0=AC=A6p=A6=F3=AF=E0=
=B8=D1=C4=C0=A8=E2=A9=CA=A4@=AF=EB=A6b=AB=E4=A6=D2=A9M=B7=BE=B3q=A4=E8=A6=
=A1=A4W=AA=BA=AEt=B2=A7=A1C<BR>=B9=EF=A9=F3=B8A=A9T=E0=AC=B3o=AD=D3=B4=AE=
=ADt=A4F=B3=CC=A6h=B4c=A6W=A1B=BED=A8=FC=B3=CC=A6h=BB~=B8=D1=AA=BA=A4H=C3=
=FE=BFE=AF=C0=A1A=A5=BB=AE=D1=B4=A3=A8=D1=A4F=A4@=AD=D3=A7O=A5X=A4=DF=B5=F4=
=AA=BA=C6[=C2I=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#ffffff size=3D2><FONT=20
color=3D#c0c0c0>=A5=F4=A6=F3=B9=EF=A4H=C3=FE=A6=E6=AC=B0=AA=BA=A5=CD=AA=AB=
=A9=CA=AE=DA=B7=BD=B7P=BF=B3=BD=EC=AA=BA=C5=AA=AA=CC=A1A=B1N=B1q=A5=BB=AE=
=D1=C0=F2=B1o=C5=E5=A9_=AA=BA=BE\=C5=AA=B7P=A8=FC=A9M=C2=D7=B4I=AA=BA=B7s=
=AA=BE=A1C</FONT></FONT></DIV>
<DIV><FONT face=3DMingLiu size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2><IMG style=3D"WIDTH: =
127px; HEIGHT: 178px" alt=3D""=20
hspace=3D0 src=3D"cid:000401c1320a$733269b0$1264a8c0@mie31" =
align=3Dbaseline=20
border=3D1><FONT face=3DMingLiu>&nbsp;</FONT></FONT></DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 color=3D#ffffff =
size=3D2>=A1m=A9=CA=BC=A4=A1B=C5v=A4O=A1B=B4c=A6=E6=BBP=B7L=AF=BA=A1G=BFs=
=B5=F8=B8A=A9T=E0=AC=AA=BA=A8=A4=A6=E2=A7=EA=BAt=B9C=C0=B8</FONT><FONT=20
face=3D=B2=D3=A9=FA=C5=E9 color=3D#ffffff =
size=3D2>=A1n<BR>&nbsp;=A7@&nbsp;&nbsp;&nbsp; =AA=CC=A1G<FONT=20
face=3DArial>James McBride Dabbs/Mary Godwin Dabbs</FONT> =
=B3\=AE=CA=BA=D6=20
=C4=B6<BR>&nbsp;=AE=D1&nbsp;&nbsp;&nbsp; =
=A8t=A1G=B5=F8=B3=A5=B6V=AC=C9&nbsp;BB001<BR>&nbsp;=C1` =AD=B6=20
=BC=C6=A1G320=AD=B6<BR>&nbsp;=A9w&nbsp;&nbsp;&nbsp; =
=BB=F9=A1G320=A4=B8<BR>&nbsp;I S B N=20
=A1G957-493-412-8</FONT></DIV>
<DIV>
<HR>
</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9><FONT color=3D#c0c0c0 =
size=3D2></FONT></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 color=3D#c0c0c0 =
size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2><FONT=20
color=3D#c0c0c0>=B3=C1=AE=E6=C3=B9=A7=C6=BA=B8=A5X=AA=A9=A4=BD=A5q&nbsp;=A5=
x=C6W=A4=C0=A4=BD=A5q</FONT></FONT></DIV>
<DIV><FONT face=3D"Comic Sans MS" color=3D#c0c0c0=20
size=3D2>Tel&nbsp;02-27272211&nbsp;&nbsp;Fax 02-23463300</FONT></DIV>
<DIV>
<DIV><FONT face=3DMingLiu size=3D2><A=20
href=3D"mailto:=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw"><FONT =
face=3D"Comic Sans MS"=20
color=3D#c0c0c0>=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw</FONT></A><=
/FONT><FONT face=3D=B2=D3=A9=FA=C5=E9=20
size=3D2></DIV></DIV></FONT>
<DIV><FONT face=3DMingLiu size=3D2></FONT>&nbsp;</DIV></BODY></HTML>

------=_NextPart_001_000A_01C1324D.85230560--

------=_NextPart_000_0009_01C1324D.85230560
Content-Type: image/jpeg;
	name="heros.jpg"
Content-Transfer-Encoding: base64
Content-ID: <000401c1320a$733269b0$1264a8c0@mie31>

/9j/4AAQSkZJRgABAQEB0QHRAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0a
HBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIy
MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCACyAH8DASIA
AhEBAxEB/8QAHAABAAIDAQEBAAAAAAAAAAAAAAUGAwQHAgEI/8QANRAAAQQBAwIEBAUDBAMAAAAA
AQACAwQRBRIhBjETQVFxFCIyYQcjgaGxFUKRJDRi0YPB4f/EABoBAQACAwEAAAAAAAAAAAAAAAAB
BAIDBQb/xAApEQACAgEDAwMDBQAAAAAAAAAAAQIDEQQhMQUSQSJhkXGh8DJCgdHh/9oADAMBAAIR
AxEAPwDv6IiAIiIAiZRAEREAREQBERAEREAREQBERAERUvr/AKjtaDBUFWRjHSuduLx5BbaaZXTV
ceWarro0wdkuEVrrH8VNV6WuOhOj8l5EZm+l7QT8wIPtwQo/Tvxt1Gy+MT6CxocM7mvdj+FTdY6l
Zq9vxLzjblk+XBYMYHoPRbmh02TbalWCUxz92M+oeeRnOMLuR6XWvVNp4W6Rx59Sml2qLTb2b/o6
Vpf4ou1CN736UGBm7c1kxccNBOR8v2PdWmzrs0Wiuvms2DONnjSAYB7E/wDQ5VGh0OrX6TdeNKF0
gqTx8P2ljg9/zf8AL0/RWmbTY2aG+q/TvBksvZGwROMp7fUcjAwMrh2yi36Y4OxVGSXqlk0p+u7U
G6U6ZughLBYAeA+PdwB6EkkEYPbv2Vs025PfossS1JKjn5PhS4LgPLsqJpIqF726jcrWRclGysHM
a5sp/Lw5oA5AAPbjlWqhFqb6dOSK3LvicWTxWmD52g47gdx5Ed1qNpK3bTaNOe1Kfy4WGRwAycAZ
OOVE2erdLpzRxzWcOc3c4bD8ozjy+5wtbryOSfpueKGBr5C0uMjhxE0cuPvjj9VzaWjZfqzC9rhD
FZbGGx13N3fKHHAwTjgED79lKJwdnrX4LcXiQOc9mSNwaccLxJq1CKcQSW4WSn+xzsH/AAq9pM2p
QdGwTsEDovhnSF0z3B/OT6emF5gFqtpejw29OpTCd0cJLnEuAIyTyO/CLGdzGXd+0sjdUoP+m7XP
/kCysuVpPosRO9ngqsax0TSsOhno1KkT4+HRuiy2Rp75wQqT1S6hBahqaVSEMrGj8yu/vjII2gke
Xur1Glrvkowk/hbfcoX6qyiLlOK+Xv8AY7IiIqB0AuPfitVj1nXadOS0YI68RccAuyT2GP0C7CuR
dZaJrF3qSxPFp9iSIgBr2MJGF0OmKDv9bxsyh1GVkac1rLyil6PoFNt9kEksdcD65pDnGPRS+lap
/SNVJhe+aqXgEbcF4zwcZ7/qsEuiauw/mabc9zC4/wDpab2S1JwyZjoX8Ha9uDj2K9R21WJx7k01
xseXc7oyU2mmny8/B0XUqFO1o0TK8OpQNsy7Hse5+AHZLiWtKx1TYpwRvi1Ka18TDGXAzSg8yObk
ccDHrjsqXb1WzGHsrxGSF7Hcu/sJH9mc4ycf4Ux0kxjpHafVgfYifXLmy2mvbscMHYXZAIJPA8sr
y2q0c6t/B6jS62Fqw+ToL9VkGqtr14aYLY9zBbcWPkwcF27BwPTIyeVKUrt2a0Y7UdKOMsyzwbJk
cTn02jhRWh6ZXZc1OO03x3NfFnx8P2nwwcD0AzhbOj0abPj54a8ccosStZKxg3NHbjj9lQL5TdY1
GxbfPXlmsFjbFnxDDYaXCNheAPDOABjHfPZSmiaBV1nUdQt3XTSFssbm+I6N5Dtgzy0Y7EcL2OmL
l/x/Cs2IqxZLsdYjYJJHvdlxI25DSfXlS+gV30JLk9ud8JklDZIpWMYzfgAOYRjIIwEBmdpUjq8e
kQB0enM5lkeQXPGc7Ggdh6n04C+Sx37muVI5KQhqVHGUTCUODzggADGR3UpqEksdR5heGvPG7aXE
D1DRyT9lz86tqenR2KVXVXzOgLpGtfVe+WQFxcGnjjPIORx5IC+0qditYsmS06avI4OiY8fNH6jP
mPRe4dOp17MlmKtGyaT63taAXe6+0X2pKwdbjjjkPO1hJAH6+a2VKbXBDSfIREUEhfMBfUQHzA9F
xvq62/UuuZqUNqJrMthLXR4LCBknd5g8rr1yw2pSnsOBLYo3PIA5wBlfnPRrUdvqsWI5pJY57G/f
IMFxJyc/5K6PTa1Kbk/COd1GbjBRXlnYRBPplCqye5XZG6sI43mMOBlOcuPB45GFuOoXGC06IU7D
QGthOxu4Ozh2cADP2/hZr9Sq46TXdVmlax+6NzCSIsDOSf25UMRTsso7a1mE2bu8xPGfm47ny4Oc
YJ4PoqDe50EtiVbpe6w+Ozp8MsEhY3LBtz8vzOIyc8j9/spGHQqNaHwazXwRg52xvIGVD2a9StYt
V32rL2Qls8jd3PzE4aMYPmTnPos9PUalabxGXnmJ2+eWN7DnaQ0gnPIAzj7k4UZZJn1qjPHotjwL
88W1mXSOk+lo+o++MrljJtZtWIWM1KZ8skgmMQeXv2DB3DLQ3gNGPuCuuT6tpU1ZzJ5Q6JzGuc18
buzjgAjHmeMKHHSDprEUktgMiia1jWsacua1zyAT6YeAR9lAI7TYtY1Pp+vNFPHqIc+QtmstA7OI
B7ZHHooqJlrTb8k1bXfHlnOLDIWuLoSOx2cnaM4XQdI0eDRavw9aSUx99r3ZAPmR6ZPOOyrEXSvw
n4ku1Su8thmhMkjR5Ozg/oeFsgoNPu58GEnJNdvHknK7OoIa7GeLUsYaPneHBzvuVlE2vj6qtI+0
jlL9kWszCIiAIiIDFZh+IqzQk48RhZnHbIwuY0fwuv6Xcq2K92tJ8NIHgPYRuXU0W6q+yrKg+TTb
RXbhzXBV7NrquGVxi02lJFtw0NlOQfXtyo3+sdR1/Ckt0/maTuYIst/yFel8wFMb0lhwREqW3lSZ
BDX6D4WSWG7XkYcMD/HsoLWuoqd0gabrVWo7aWSR2Ku8PHlk9xhXWWpXmBEsMbx/yaCoq10lotzP
iUYwT5t4SudSeZL8/lE2RsksQePz2ZzZ/UXUDJpBNq2kWa4jA2NhOH7e33z78Lqei6k3U9KrWdwL
nxguwMDPmqxb/DTTJsmCWSI++Qox/Qeu6eGnS9XezZktAOMZ/ZWLZ6WyCUE4v6FaqvVQm3JqS+v+
Fn6j6x0zQWSQvsMde2F0cGeSfLPotToOzb1Ola1S68vlnl2tz2DQOw+2crkeq/h51FTsusPZLKSc
ueMuJ+55Xaeh6Umn9JUYJSTJtLnZGOS4lYSlRGhxhvJvn2M1C6V6nL9KT29yxIiKmXAiIgCIiAIi
IAiIgCIiAIiIBjPdAMdkRAEREAREQBERAEREAREQBERAEREAREQBERAEREAWhrUVybR7Uenv2XHM
IidnGHeRW+iAolbTus2P0nxbmWxyH4seIDvG7I/ZbmrUeqpeo5JqFpjNO+HcGxl2D4m04/fCt6ID
m50r8QDXrD48CVsrzL+aPmYQ3b/DlY9Ur9SP1qKWjZa2kA0Ojw3n1PPv/CsqICgM07ruKhPG/UWy
TibfHI3by3HblS+lQdSM1uSXUJWupOjdtYMfK7jGP3VoRCSsaFV6ghs6h/U5SYpP9v8Am7yzk/b2
Xrperr9RlsaxL4xc7dEXP3Y47Z/+KyohBWOl9P6hp27jtZu+PE85ibu3Ac+XorOiIAiIgCIiAIiI
AiIgCIiAIiIAiIgCIiAIiIAixOswsnELpGiQjIaTyVibqVJwH+pj5GQC7lAbSLUfqVSN7WunYC4Z
bz35x/K+DVKbi4CwzLSQRn0z/wBFAbiLVOo1BtJnZhw3A54I90g1CpZIEM7HE4wAeeUBtIiIAiIg
CIiAIiIAiIgNe1EXMEkUMb5mkY38fuo74O27xSadIHA2cZz6g/oplEBExw2nOa2ejVLc92+/ovL6
1prMfBU8nku+/t7kqYWKzXZagdC8kNdjOPscoCOdFOY9nwdMfI4AZyAfIYx2yvDIr7Jvy6tIbXcE
HBxn9uOFmdoVNz935jTlpyHY5GcfytmGhDBcmtMB8WYAPJPkOyAzxGQxgytDX+YByF7REAREQBER
AEREAREQBERAEREAREQBERAEREAREQBERAEREB//2Q==

------=_NextPart_000_0009_01C1324D.85230560--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From replypro@mcgraw-hill.com.tw  Fri Aug 31 11:52:56 2001
From: replypro@mcgraw-hill.com.tw (replypro@mcgraw-hill.com.tw)
Date: Fri, 31 Aug 2001 12:52:56 +0200 (MET DST)
Subject: [Rd] =?big5?B?tfizpbZWrMm3c67RqHQgLS2hbanKvKShQsV2pE+hQrRjpua7ULdMr7otLb9ztfg=?= (PR#1082)
Message-ID: <200108311052.MAA04173@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0009_01C1324D.85230560
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_000A_01C1324D.85230560"


------=_NextPart_001_000A_01C1324D.85230560
Content-Type: text/plain;
	charset="big5"
Content-Transfer-Encoding: quoted-printable

Dear r-bugs,

=AC=B0=A4=B0=BB=F2=A4@=AF=EB=A4H=B9=EF=A4k=A5=CD=AA=BA=A8=E8=AAO=A6L=B6H=B4=
N=ACO=B7=C5=ACX=A1B=B5=BD=C5=E9=A4H=B7N=A1B=BBy=A8=A5=AF=E0=A4O=B1j=A1F
=A6=D3=AC=DB=B9=EF=A6a=BB{=AC=B0=A8k=A5=CD=ABh=A4=F1=B8=FB=ABi=B4=B1=A1B=BD=
=C4=B0=CA=A1B=A6n=A6=E2=A1B=AA=C5=B6=A1=B7P=A1B=A4=E8=A6V=B7P=A8=CE=A1H
=A7A=ACO=A7_=B4=BF=B8g=C3h=BA=C3=B9L=A1A
=B3o=A8=C7=A8=E8=AAO=A6L=B6H=A4=A4=AA=BA=A8=E2=A9=CA=AEt=B2=A7=A8s=B3=BA=AC=
O=A8k=A4k=A8=E2=A9=CA=A6b=A5=CD=B2z=B5o=AEi=A4W=BBP=A5=CD=AD=D1=A8=D3=AA=BA=
=A4=A3=A6P=BF=F2=B6=C7=A6]=A4l=A9=D2=B3y=A6=A8=AA=BA=A1A
=A9=CE=ACO=AB=E1=A4=D1=AA=BA=B1=D0=BEi=BBP=A4=E5=A4=C6=A9=D2=AB=AC=B6=EC=A5=
X=A8=D3=AA=BA=A1H
=A6=D3=A4=A3=A6P=A4=E5=A4=C6=A4=A4=B9=EF=A8k=A4l=AE=F0=B7=A7=BBP=A4k=A9=CA=
=AFS=BD=E8=A9=CE=A6h=A9=CE=A4=D6=AA=BA=B1j=BD=D5=BBP=AD=AB=B5=F8=A1A
=A4S=A9M=B3o=BC=CB=AA=BA=A8=E8=AAO=A6L=B6H=A6=B3=A4=B0=BB=F2=C3=F6=ABY=A9=
O=A1H
=A5=E7=A9=CE=B3o=A4@=A4=C1=A5u=ACO=AC=B0=AE=BA=B6=EC=A5X=C2=F9=A9=CA=A4G=A4=
=B8=BB=F9=AD=C8=C6[=A6=D3=AC=EF=C6w=AA=FE=B7|=A5X=AA=BA=B9L=AE=C9=B0g=AB=E4=
=A1H
=AA=BE=A6W=AA=C0=B7|=A4=DF=B2z=BE=C7=AEa=C0=B9=ACf=B4=B5=B1=D0=B1=C2=B1N=A6=
b=A5=BB=AE=D1=A4=A4=A1A
=B1q=B8A=A9T=E0=AC=AA=BA=C6[=C2I=A1A=AC=B0=A7A=B8=D1=B6}=B3o=A4@=B3s=A6=EA=
=C3=F6=A9=F3=A9=CA=A7O=BBP=A6=E6=AC=B0=BC=D2=A6=A1=AA=BA=BA=C3=B0=DD=A1C
=A6b=A5=BB=AE=D1=A4=A4=A1A=C0=B9=ACf=B4=B5=B1=D0=B1=C2=A5H=B7=A5=AC=B0=A4=
=DE=A4H=A4J=B3=D3=AA=BA=A4=E8=A6=A1=A1A
=AC=B0=A7=DA=AD=CC=A4=B6=B2=D0=A4F=BE=C7=AC=C9=A5=D8=ABe=B9=EF=B8A=A9T=E0=
=AC=A4=CE=A8=E4=B1q=A5j=A6=DC=A4=B5=B9=EF=A4H=C3=FE=A4=DF=B2z=AA=BA=BCv=C5=
T=AA=BA=BB{=C3=D1=A1C
=A7@=AA=CC=A4=DE=A5=CE=A4F=B0w=B9=EF=B6W=B9L=A4K=A4d=A6W=A6=A8=A6~=A8k=A4=
k=A9M=A8=E0=B5=A3=A9=D2=B0=B5=AA=BA=AD=EC=B3=D0=A9=CA=AC=E3=A8s=A1A=A5H=A4=
=CE=A9M=B3o=AD=D3=A5D=C3D=A6=B3=C3=F6=AA=BA=A5@=AC=C9=A4=E5=BE=C7=A1A
=B1N=A8p=B1K=AA=BA=AD=D3=AE=D7=A5v=A9M=B2=C4=A4@=A4=E2=AA=BA=AC=EC=BE=C7=AC=
=E3=A8s=A5=A9=A7=AE=A6=EA=B3s=A1A
=A5H=B1=B4=AF=C1=B8A=A9T=E0=AC=A6b=A4H=C3=FE=A4=DF=B4=BC=A9M=A4H=C3=FE=A9=
R=B9B=B4X=A5G=A6U=AD=D3=AD=B1=A6V=A4W=A9=D2=A7=EA=BAt=AA=BA=A8=A4=A6=E2=A1=
C
=A7@=AA=CC=A7i=B6D=A7=DA=AD=CC=A1A=B8A=A9T=E0=AC=ACO=A6p=A6=F3=BCv=C5T=BB=
y=A8=A5=AF=E0=A4O=A1B=BB{=AA=BE=A1B=AA=C5=B6=A1=A9w=A6=EC=A1B=A7=DA=AD=CC=
=A9=D2=B1q=A8=C6=AA=BA=C2=BE=B7~=A1B
=A7=DA=AD=CC=B7|=A6=A8=AC=B0=A4=B0=BB=F2=BC=CB=AA=BA=B1=A1=A4H=A1B=A4V=A4=
=D2=A1B=A9d=A4l=A9M=A4=F7=A5=C0=A1B
=AC=C6=A6=DC=A9=F3=A7=DA=AD=CC=B7L=AF=BA=AA=BA=A4=E8=A6=A1=B5=A5=A1C
=B8A=A9T=E0=AC=B6=EC=B3y=A4F=A7=DA=AD=CC=B9=EF=A9=CA=A1B=C5v=A4O=A1B=BC=C9=
=A4O=A6=E6=AC=B0=BBP=BFW=A5e=A6a=A6=EC=AA=BA=BC=A4=B1=E6=A1A
=A7=F3=ACO=A7=DA=AD=CC=B7Q=B1=E6=A6=A8=AC=B0=AD^=B6=AF=A1B=A5D=AE_=AA=CC=A1=
A=A9=CE=ACO=C1=E2=A5=FA=BFO=B5J=C2I=AA=BA=AE=DA=B7=BD=A1C
=A5L=A8=C3=A5B=BB=A1=A9=FA=A4F=A1A=B8A=A9T=E0=AC=A6p=A6=F3=AF=E0=B8=D1=C4=
=C0=A8=E2=A9=CA=A4@=AF=EB=A6b=AB=E4=A6=D2=A9M=B7=BE=B3q=A4=E8=A6=A1=A4W=AA=
=BA=AEt=B2=A7=A1C
=B9=EF=A9=F3=B8A=A9T=E0=AC=B3o=AD=D3=B4=AE=ADt=A4F=B3=CC=A6h=B4c=A6W=A1B=BE=
D=A8=FC=B3=CC=A6h=BB~=B8=D1=AA=BA=A4H=C3=FE=BFE=AF=C0=A1A=A5=BB=AE=D1=B4=A3=
=A8=D1=A4F=A4@=AD=D3=A7O=A5X=A4=DF=B5=F4=AA=BA=C6[=C2I=A1C
=A5=F4=A6=F3=B9=EF=A4H=C3=FE=A6=E6=AC=B0=AA=BA=A5=CD=AA=AB=A9=CA=AE=DA=B7=
=BD=B7P=BF=B3=BD=EC=AA=BA=C5=AA=AA=CC=A1A=B1N=B1q=A5=BB=AE=D1=C0=F2=B1o=C5=
=E5=A9_=AA=BA=BE\=C5=AA=B7P=A8=FC=A9M=C2=D7=B4I=AA=BA=B7s=AA=BE=A1C


=20
=A1m=A9=CA=BC=A4=A1B=C5v=A4O=A1B=B4c=A6=E6=BBP=B7L=AF=BA=A1G=BFs=B5=F8=B8=
A=A9T=E0=AC=AA=BA=A8=A4=A6=E2=A7=EA=BAt=B9C=C0=B8=A1n
 =A7@    =AA=CC=A1GJames McBride Dabbs/Mary Godwin Dabbs =
=B3\=AE=CA=BA=D6 =C4=B6
 =AE=D1    =A8t=A1G=B5=F8=B3=A5=B6V=AC=C9 BB001
 =C1` =AD=B6 =BC=C6=A1G320=AD=B6
 =A9w    =BB=F9=A1G320=A4=B8
 I S B N =A1G957-493-412-8

-------------------------------------------------------------------------=
-------



=B3=C1=AE=E6=C3=B9=A7=C6=BA=B8=A5X=AA=A9=A4=BD=A5q =
=A5x=C6W=A4=C0=A4=BD=A5q
Tel 02-27272211  Fax 02-23463300
=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw


------=_NextPart_001_000A_01C1324D.85230560
Content-Type: text/html;
	charset="big5"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; charset=3Dbig5">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#000000 background=3D"">
<DIV><FONT face=3DArial color=3D#ffffff size=3D2>Dear =
r-bugs,</FONT></DIV>
<DIV><FONT face=3DArial color=3D#c0c0c0></FONT>&nbsp;</DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=AC=B0=A4=B0=BB=F2=A4@=AF=EB=A4H=B9=EF=A4k=A5=CD=AA=BA=A8=E8=AAO=
=A6L=B6H=B4N=ACO=B7=C5=ACX=A1B=B5=BD=C5=E9=A4H=B7N=A1B=BBy=A8=A5=AF=E0=A4=
O=B1j=A1F</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A6=D3=AC=DB=B9=EF=A6a=BB{=AC=B0=A8k=A5=CD=ABh=A4=F1=B8=FB=ABi=B4=
=B1=A1B=BD=C4=B0=CA=A1B=A6n=A6=E2=A1B=AA=C5=B6=A1=B7P=A1B=A4=E8=A6V=B7P=A8=
=CE=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A7A=ACO=A7_=B4=BF=B8g=C3h=BA=C3=B9L=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B3o=A8=C7=A8=E8=AAO=A6L=B6H=A4=A4=AA=BA=A8=E2=A9=CA=AEt=B2=A7=A8=
s=B3=BA=ACO=A8k=A4k=A8=E2=A9=CA=A6b=A5=CD=B2z=B5o=AEi=A4W=BBP=A5=CD=AD=D1=
=A8=D3=AA=BA=A4=A3=A6P=BF=F2=B6=C7=A6]=A4l=A9=D2=B3y=A6=A8=AA=BA=A1A</FON=
T></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A9=CE=ACO=AB=E1=A4=D1=AA=BA=B1=D0=BEi=BBP=A4=E5=A4=C6=A9=D2=AB=AC=
=B6=EC=A5X=A8=D3=AA=BA=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A6=D3=A4=A3=A6P=A4=E5=A4=C6=A4=A4=B9=EF=A8k=A4l=AE=F0=B7=A7=BBP=
=A4k=A9=CA=AFS=BD=E8=A9=CE=A6h=A9=CE=A4=D6=AA=BA=B1j=BD=D5=BBP=AD=AB=B5=F8=
=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A4S=A9M=B3o=BC=CB=AA=BA=A8=E8=AAO=A6L=B6H=A6=B3=A4=B0=BB=F2=C3=F6=
=ABY=A9O=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5=E7=A9=CE=B3o=A4@=A4=C1=A5u=ACO=AC=B0=AE=BA=B6=EC=A5X=C2=F9=A9=
=CA=A4G=A4=B8=BB=F9=AD=C8=C6[=A6=D3=AC=EF=C6w=AA=FE=B7|=A5X=AA=BA=B9L=AE=C9=
=B0g=AB=E4=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=AA=BE=A6W=AA=C0=B7|=A4=DF=B2z=BE=C7=AEa=C0=B9=ACf=B4=B5=B1=D0=B1=
=C2=B1N=A6b=A5=BB=AE=D1=A4=A4=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B1q=B8A=A9T=E0=AC=AA=BA=C6[=C2I=A1A=AC=B0=A7A=B8=D1=B6}=B3o=A4@=
=B3s=A6=EA=C3=F6=A9=F3=A9=CA=A7O=BBP=A6=E6=AC=B0=BC=D2=A6=A1=AA=BA=BA=C3=B0=
=DD=A1C<BR>=A6b=A5=BB=AE=D1=A4=A4=A1A=C0=B9=ACf=B4=B5=B1=D0=B1=C2=A5H=B7=A5=
=AC=B0=A4=DE=A4H=A4J=B3=D3=AA=BA=A4=E8=A6=A1=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=AC=B0=A7=DA=AD=CC=A4=B6=B2=D0=A4F=BE=C7=AC=C9=A5=D8=ABe=B9=EF=B8=
A=A9T=E0=AC=A4=CE=A8=E4=B1q=A5j=A6=DC=A4=B5=B9=EF=A4H=C3=FE=A4=DF=B2z=AA=BA=
=BCv=C5T=AA=BA=BB{=C3=D1=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7@=AA=CC=A4=DE=A5=CE=A4F=B0w=B9=EF=B6W=B9L=A4K=A4d=A6W=A6=A8=A6=
~=A8k=A4k=A9M=A8=E0=B5=A3=A9=D2=B0=B5=AA=BA=AD=EC=B3=D0=A9=CA=AC=E3=A8s=A1=
A=A5H=A4=CE=A9M=B3o=AD=D3=A5D=C3D=A6=B3=C3=F6=AA=BA=A5@=AC=C9=A4=E5=BE=C7=
=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=B1N=A8p=B1K=AA=BA=AD=D3=AE=D7=A5v=A9M=B2=C4=A4@=A4=E2=AA=BA=AC=EC=
=BE=C7=AC=E3=A8s=A5=A9=A7=AE=A6=EA=B3s=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5H=B1=B4=AF=C1=B8A=A9T=E0=AC=A6b=A4H=C3=FE=A4=DF=B4=BC=A9M=A4H=
=C3=FE=A9R=B9B=B4X=A5G=A6U=AD=D3=AD=B1=A6V=A4W=A9=D2=A7=EA=BAt=AA=BA=A8=A4=
=A6=E2=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7@=AA=CC=A7i=B6D=A7=DA=AD=CC=A1A=B8A=A9T=E0=AC=ACO=A6p=A6=F3=BC=
v=C5T=BBy=A8=A5=AF=E0=A4O=A1B=BB{=AA=BE=A1B=AA=C5=B6=A1=A9w=A6=EC=A1B=A7=DA=
=AD=CC=A9=D2=B1q=A8=C6=AA=BA=C2=BE=B7~=A1B</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A7=DA=AD=CC=B7|=A6=A8=AC=B0=A4=B0=BB=F2=BC=CB=AA=BA=B1=A1=A4H=A1=
B=A4V=A4=D2=A1B=A9d=A4l=A9M=A4=F7=A5=C0=A1B</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=AC=C6=A6=DC=A9=F3=A7=DA=AD=CC=B7L=AF=BA=AA=BA=A4=E8=A6=A1=B5=A5=
=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B8A=A9T=E0=AC=B6=EC=B3y=A4F=A7=DA=AD=CC=B9=EF=A9=CA=A1B=C5v=A4O=
=A1B=BC=C9=A4O=A6=E6=AC=B0=BBP=BFW=A5e=A6a=A6=EC=AA=BA=BC=A4=B1=E6=A1A</F=
ONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7=F3=ACO=A7=DA=AD=CC=B7Q=B1=E6=A6=A8=AC=B0=AD^=B6=AF=A1B=A5D=AE=
_=AA=CC=A1A=A9=CE=ACO=C1=E2=A5=FA=BFO=B5J=C2I=AA=BA=AE=DA=B7=BD=A1C</FONT=
></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5L=A8=C3=A5B=BB=A1=A9=FA=A4F=A1A=B8A=A9T=E0=AC=A6p=A6=F3=AF=E0=
=B8=D1=C4=C0=A8=E2=A9=CA=A4@=AF=EB=A6b=AB=E4=A6=D2=A9M=B7=BE=B3q=A4=E8=A6=
=A1=A4W=AA=BA=AEt=B2=A7=A1C<BR>=B9=EF=A9=F3=B8A=A9T=E0=AC=B3o=AD=D3=B4=AE=
=ADt=A4F=B3=CC=A6h=B4c=A6W=A1B=BED=A8=FC=B3=CC=A6h=BB~=B8=D1=AA=BA=A4H=C3=
=FE=BFE=AF=C0=A1A=A5=BB=AE=D1=B4=A3=A8=D1=A4F=A4@=AD=D3=A7O=A5X=A4=DF=B5=F4=
=AA=BA=C6[=C2I=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#ffffff size=3D2><FONT=20
color=3D#c0c0c0>=A5=F4=A6=F3=B9=EF=A4H=C3=FE=A6=E6=AC=B0=AA=BA=A5=CD=AA=AB=
=A9=CA=AE=DA=B7=BD=B7P=BF=B3=BD=EC=AA=BA=C5=AA=AA=CC=A1A=B1N=B1q=A5=BB=AE=
=D1=C0=F2=B1o=C5=E5=A9_=AA=BA=BE\=C5=AA=B7P=A8=FC=A9M=C2=D7=B4I=AA=BA=B7s=
=AA=BE=A1C</FONT></FONT></DIV>
<DIV><FONT face=3DMingLiu size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2><IMG style=3D"WIDTH: =
127px; HEIGHT: 178px" alt=3D""=20
hspace=3D0 src=3D"cid:000401c1320a$733269b0$1264a8c0@mie31" =
align=3Dbaseline=20
border=3D1><FONT face=3DMingLiu>&nbsp;</FONT></FONT></DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 color=3D#ffffff =
size=3D2>=A1m=A9=CA=BC=A4=A1B=C5v=A4O=A1B=B4c=A6=E6=BBP=B7L=AF=BA=A1G=BFs=
=B5=F8=B8A=A9T=E0=AC=AA=BA=A8=A4=A6=E2=A7=EA=BAt=B9C=C0=B8</FONT><FONT=20
face=3D=B2=D3=A9=FA=C5=E9 color=3D#ffffff =
size=3D2>=A1n<BR>&nbsp;=A7@&nbsp;&nbsp;&nbsp; =AA=CC=A1G<FONT=20
face=3DArial>James McBride Dabbs/Mary Godwin Dabbs</FONT> =
=B3\=AE=CA=BA=D6=20
=C4=B6<BR>&nbsp;=AE=D1&nbsp;&nbsp;&nbsp; =
=A8t=A1G=B5=F8=B3=A5=B6V=AC=C9&nbsp;BB001<BR>&nbsp;=C1` =AD=B6=20
=BC=C6=A1G320=AD=B6<BR>&nbsp;=A9w&nbsp;&nbsp;&nbsp; =
=BB=F9=A1G320=A4=B8<BR>&nbsp;I S B N=20
=A1G957-493-412-8</FONT></DIV>
<DIV>
<HR>
</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9><FONT color=3D#c0c0c0 =
size=3D2></FONT></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 color=3D#c0c0c0 =
size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2><FONT=20
color=3D#c0c0c0>=B3=C1=AE=E6=C3=B9=A7=C6=BA=B8=A5X=AA=A9=A4=BD=A5q&nbsp;=A5=
x=C6W=A4=C0=A4=BD=A5q</FONT></FONT></DIV>
<DIV><FONT face=3D"Comic Sans MS" color=3D#c0c0c0=20
size=3D2>Tel&nbsp;02-27272211&nbsp;&nbsp;Fax 02-23463300</FONT></DIV>
<DIV>
<DIV><FONT face=3DMingLiu size=3D2><A=20
href=3D"mailto:=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw"><FONT =
face=3D"Comic Sans MS"=20
color=3D#c0c0c0>=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw</FONT></A><=
/FONT><FONT face=3D=B2=D3=A9=FA=C5=E9=20
size=3D2></DIV></DIV></FONT>
<DIV><FONT face=3DMingLiu size=3D2></FONT>&nbsp;</DIV></BODY></HTML>

------=_NextPart_001_000A_01C1324D.85230560--

------=_NextPart_000_0009_01C1324D.85230560
Content-Type: image/jpeg;
	name="heros.jpg"
Content-Transfer-Encoding: base64
Content-ID: <000401c1320a$733269b0$1264a8c0@mie31>

/9j/4AAQSkZJRgABAQEB0QHRAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0a
HBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIy
MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCACyAH8DASIA
AhEBAxEB/8QAHAABAAIDAQEBAAAAAAAAAAAAAAUGAwQHAgEI/8QANRAAAQQBAwIEBAUDBAMAAAAA
AQACAwQRBRIhBjETQVFxFCIyYQcjgaGxFUKRJDRi0YPB4f/EABoBAQACAwEAAAAAAAAAAAAAAAAB
BAIDBQb/xAApEQACAgEDAwMDBQAAAAAAAAAAAQIDEQQhMQUSQSJhkXGh8DJCgdHh/9oADAMBAAIR
AxEAPwDv6IiAIiIAiZRAEREAREQBERAEREAREQBERAERUvr/AKjtaDBUFWRjHSuduLx5BbaaZXTV
ceWarro0wdkuEVrrH8VNV6WuOhOj8l5EZm+l7QT8wIPtwQo/Tvxt1Gy+MT6CxocM7mvdj+FTdY6l
Zq9vxLzjblk+XBYMYHoPRbmh02TbalWCUxz92M+oeeRnOMLuR6XWvVNp4W6Rx59Sml2qLTb2b/o6
Vpf4ou1CN736UGBm7c1kxccNBOR8v2PdWmzrs0Wiuvms2DONnjSAYB7E/wDQ5VGh0OrX6TdeNKF0
gqTx8P2ljg9/zf8AL0/RWmbTY2aG+q/TvBksvZGwROMp7fUcjAwMrh2yi36Y4OxVGSXqlk0p+u7U
G6U6ZughLBYAeA+PdwB6EkkEYPbv2Vs025PfossS1JKjn5PhS4LgPLsqJpIqF726jcrWRclGysHM
a5sp/Lw5oA5AAPbjlWqhFqb6dOSK3LvicWTxWmD52g47gdx5Ed1qNpK3bTaNOe1Kfy4WGRwAycAZ
OOVE2erdLpzRxzWcOc3c4bD8ozjy+5wtbryOSfpueKGBr5C0uMjhxE0cuPvjj9VzaWjZfqzC9rhD
FZbGGx13N3fKHHAwTjgED79lKJwdnrX4LcXiQOc9mSNwaccLxJq1CKcQSW4WSn+xzsH/AAq9pM2p
QdGwTsEDovhnSF0z3B/OT6emF5gFqtpejw29OpTCd0cJLnEuAIyTyO/CLGdzGXd+0sjdUoP+m7XP
/kCysuVpPosRO9ngqsax0TSsOhno1KkT4+HRuiy2Rp75wQqT1S6hBahqaVSEMrGj8yu/vjII2gke
Xur1Glrvkowk/hbfcoX6qyiLlOK+Xv8AY7IiIqB0AuPfitVj1nXadOS0YI68RccAuyT2GP0C7CuR
dZaJrF3qSxPFp9iSIgBr2MJGF0OmKDv9bxsyh1GVkac1rLyil6PoFNt9kEksdcD65pDnGPRS+lap
/SNVJhe+aqXgEbcF4zwcZ7/qsEuiauw/mabc9zC4/wDpab2S1JwyZjoX8Ha9uDj2K9R21WJx7k01
xseXc7oyU2mmny8/B0XUqFO1o0TK8OpQNsy7Hse5+AHZLiWtKx1TYpwRvi1Ka18TDGXAzSg8yObk
ccDHrjsqXb1WzGHsrxGSF7Hcu/sJH9mc4ycf4Ux0kxjpHafVgfYifXLmy2mvbscMHYXZAIJPA8sr
y2q0c6t/B6jS62Fqw+ToL9VkGqtr14aYLY9zBbcWPkwcF27BwPTIyeVKUrt2a0Y7UdKOMsyzwbJk
cTn02jhRWh6ZXZc1OO03x3NfFnx8P2nwwcD0AzhbOj0abPj54a8ccosStZKxg3NHbjj9lQL5TdY1
GxbfPXlmsFjbFnxDDYaXCNheAPDOABjHfPZSmiaBV1nUdQt3XTSFssbm+I6N5Dtgzy0Y7EcL2OmL
l/x/Cs2IqxZLsdYjYJJHvdlxI25DSfXlS+gV30JLk9ud8JklDZIpWMYzfgAOYRjIIwEBmdpUjq8e
kQB0enM5lkeQXPGc7Ggdh6n04C+Sx37muVI5KQhqVHGUTCUODzggADGR3UpqEksdR5heGvPG7aXE
D1DRyT9lz86tqenR2KVXVXzOgLpGtfVe+WQFxcGnjjPIORx5IC+0qditYsmS06avI4OiY8fNH6jP
mPRe4dOp17MlmKtGyaT63taAXe6+0X2pKwdbjjjkPO1hJAH6+a2VKbXBDSfIREUEhfMBfUQHzA9F
xvq62/UuuZqUNqJrMthLXR4LCBknd5g8rr1yw2pSnsOBLYo3PIA5wBlfnPRrUdvqsWI5pJY57G/f
IMFxJyc/5K6PTa1Kbk/COd1GbjBRXlnYRBPplCqye5XZG6sI43mMOBlOcuPB45GFuOoXGC06IU7D
QGthOxu4Ozh2cADP2/hZr9Sq46TXdVmlax+6NzCSIsDOSf25UMRTsso7a1mE2bu8xPGfm47ny4Oc
YJ4PoqDe50EtiVbpe6w+Ozp8MsEhY3LBtz8vzOIyc8j9/spGHQqNaHwazXwRg52xvIGVD2a9StYt
V32rL2Qls8jd3PzE4aMYPmTnPos9PUalabxGXnmJ2+eWN7DnaQ0gnPIAzj7k4UZZJn1qjPHotjwL
88W1mXSOk+lo+o++MrljJtZtWIWM1KZ8skgmMQeXv2DB3DLQ3gNGPuCuuT6tpU1ZzJ5Q6JzGuc18
buzjgAjHmeMKHHSDprEUktgMiia1jWsacua1zyAT6YeAR9lAI7TYtY1Pp+vNFPHqIc+QtmstA7OI
B7ZHHooqJlrTb8k1bXfHlnOLDIWuLoSOx2cnaM4XQdI0eDRavw9aSUx99r3ZAPmR6ZPOOyrEXSvw
n4ku1Su8thmhMkjR5Ozg/oeFsgoNPu58GEnJNdvHknK7OoIa7GeLUsYaPneHBzvuVlE2vj6qtI+0
jlL9kWszCIiAIiIDFZh+IqzQk48RhZnHbIwuY0fwuv6Xcq2K92tJ8NIHgPYRuXU0W6q+yrKg+TTb
RXbhzXBV7NrquGVxi02lJFtw0NlOQfXtyo3+sdR1/Ckt0/maTuYIst/yFel8wFMb0lhwREqW3lSZ
BDX6D4WSWG7XkYcMD/HsoLWuoqd0gabrVWo7aWSR2Ku8PHlk9xhXWWpXmBEsMbx/yaCoq10lotzP
iUYwT5t4SudSeZL8/lE2RsksQePz2ZzZ/UXUDJpBNq2kWa4jA2NhOH7e33z78Lqei6k3U9KrWdwL
nxguwMDPmqxb/DTTJsmCWSI++Qox/Qeu6eGnS9XezZktAOMZ/ZWLZ6WyCUE4v6FaqvVQm3JqS+v+
Fn6j6x0zQWSQvsMde2F0cGeSfLPotToOzb1Ola1S68vlnl2tz2DQOw+2crkeq/h51FTsusPZLKSc
ueMuJ+55Xaeh6Umn9JUYJSTJtLnZGOS4lYSlRGhxhvJvn2M1C6V6nL9KT29yxIiKmXAiIgCIiAIi
IAiIgCIiAIiIBjPdAMdkRAEREAREQBERAEREAREQBERAEREAREQBERAEREAWhrUVybR7Uenv2XHM
IidnGHeRW+iAolbTus2P0nxbmWxyH4seIDvG7I/ZbmrUeqpeo5JqFpjNO+HcGxl2D4m04/fCt6ID
m50r8QDXrD48CVsrzL+aPmYQ3b/DlY9Ur9SP1qKWjZa2kA0Ojw3n1PPv/CsqICgM07ruKhPG/UWy
TibfHI3by3HblS+lQdSM1uSXUJWupOjdtYMfK7jGP3VoRCSsaFV6ghs6h/U5SYpP9v8Am7yzk/b2
Xrperr9RlsaxL4xc7dEXP3Y47Z/+KyohBWOl9P6hp27jtZu+PE85ibu3Ac+XorOiIAiIgCIiAIiI
AiIgCIiAIiIAiIgCIiAIiIAixOswsnELpGiQjIaTyVibqVJwH+pj5GQC7lAbSLUfqVSN7WunYC4Z
bz35x/K+DVKbi4CwzLSQRn0z/wBFAbiLVOo1BtJnZhw3A54I90g1CpZIEM7HE4wAeeUBtIiIAiIg
CIiAIiIAiIgNe1EXMEkUMb5mkY38fuo74O27xSadIHA2cZz6g/oplEBExw2nOa2ejVLc92+/ovL6
1prMfBU8nku+/t7kqYWKzXZagdC8kNdjOPscoCOdFOY9nwdMfI4AZyAfIYx2yvDIr7Jvy6tIbXcE
HBxn9uOFmdoVNz935jTlpyHY5GcfytmGhDBcmtMB8WYAPJPkOyAzxGQxgytDX+YByF7REAREQBER
AEREAREQBERAEREAREQBERAEREAREQBERAEREB//2Q==

------=_NextPart_000_0009_01C1324D.85230560--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Aug 31 13:03:24 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 31 Aug 2001 14:03:24 +0200
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <3B865419.68732554@research.bell-labs.com>
References: <Pine.LNX.4.31.0108240825520.29809-100000@gannet.stats>
 <3B865419.68732554@research.bell-labs.com>
Message-ID: <15247.32012.939118.454204@mithrandir.hornik.net>

>>>>> John Chambers writes:

> Prof Brian Ripley wrote:
>> 
>> Currently read.table is rather limited in its type conversion.
>> The algorithm is
>> 
>> 0) Read as character
>> 1) Try to convert to numeric. If that works, quit
>> 2) Convert to factor unless !as.is.
>> 
>> I am thinking about adding more flexibility and more classes by the
>> following two changes.
>> 
>> A) Anticipating the arrival of classes for all R objects, add an
>> argument say `colClasses' that allows the user to specify the desired
>> class for every column.  This could default to "auto", or NA if people
>> think "auto" might be a relevant class name one day.
>> 
>> The effect would be equivalent to running
>> 
>> data[[i]] <- as(data[[i]], colClasses[i])
>> 
>> instead of
>> 
>> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
>> 
>> except that standard classes such as "numeric", "factor", "logical",
>> "character" would be dispatched directly, and argument "dec" would be
>> consulted where appropriate.
>> 
>> colClasses = "character" would suppress all conversions, which cannot
>> currently be done.

Just a small remark.  I would prefer `NA' to "auto" (or "unknown").  May
be too late to change this now :-)

I would also be happier if we did not refer to the variables explicitly
as `columns'.  (This sounds a bit stupid from the person who wrote
write.table and introduced arguments `row.names' and `col.names'.
Although, at least one of these was modelled after an existing
function).  E.g. something like

	read.table(......, caseNames, varNames, varClasses, .....)

would be nice ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 31 13:13:03 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 31 Aug 2001 13:13:03 +0100 (BST)
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <15247.32012.939118.454204@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>

On Fri, 31 Aug 2001, Kurt Hornik wrote:

> > Prof Brian Ripley wrote:
> >>
> >> Currently read.table is rather limited in its type conversion.
> >> The algorithm is
> >>
> >> 0) Read as character
> >> 1) Try to convert to numeric. If that works, quit
> >> 2) Convert to factor unless !as.is.
> >>
> >> I am thinking about adding more flexibility and more classes by the
> >> following two changes.
> >>
> >> A) Anticipating the arrival of classes for all R objects, add an
> >> argument say `colClasses' that allows the user to specify the desired
> >> class for every column.  This could default to "auto", or NA if people
> >> think "auto" might be a relevant class name one day.
> >>
> >> The effect would be equivalent to running
> >>
> >> data[[i]] <- as(data[[i]], colClasses[i])
> >>
> >> instead of
> >>
> >> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
> >>
> >> except that standard classes such as "numeric", "factor", "logical",
> >> "character" would be dispatched directly, and argument "dec" would be
> >> consulted where appropriate.
> >>
> >> colClasses = "character" would suppress all conversions, which cannot
> >> currently be done.
>
> Just a small remark.  I would prefer `NA' to "auto" (or "unknown").  May
> be too late to change this now :-)

Anything can be changed up to 1.4.0 release.  In particular, the present
code will have to be changed unless as() is in base by then.

> I would also be happier if we did not refer to the variables explicitly
> as `columns'.  (This sounds a bit stupid from the person who wrote
> write.table and introduced arguments `row.names' and `col.names'.
> Although, at least one of these was modelled after an existing
> function).  E.g. something like
>
> 	read.table(......, caseNames, varNames, varClasses, .....)
>
> would be nice ...

The problem is that what is being referred to *is* columns and not
variables.  If you have row names on the file, the numbering is different.
So it matters to use sufficiently precise terminology.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Aug 31 13:20:33 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 31 Aug 2001 05:20:33 -0700
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
References: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
Message-ID: <87y9o08lpq.fsf@jeeves.blindglobe.net>

>>>>> "BDR" == Brian D Ripley <Prof> writes:


    >> I would also be happier if we did not refer to the variables
    >> explicitly as `columns'.  (This sounds a bit stupid from the
    >> person who wrote write.table and introduced arguments
    >> `row.names' and `col.names'.  Although, at least one of these
    >> was modelled after an existing function).  E.g. something like
    >> 
    >> read.table(......, caseNames, varNames, varClasses, .....)
    >> 
    >> would be nice ...

    BDR> The problem is that what is being referred to *is* columns
    BDR> and not variables.  If you have row names on the file, the
    BDR> numbering is different.  So it matters to use sufficiently
    BDR> precise terminology.

I would tend to agree with Brian.  To me, caseNames / varNames
sounds a rather bit arrogant, since there are a number of other
"formats" (contingency tables come to mind) for which read.table is
one possible way for slurping in the data prior to munging it, though
I guess one could argue that this is an abuse of tools.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Fri Aug 31 18:08:33 2001
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Fri, 31 Aug 2001 19:08:33 +0200 (MET DST)
Subject: [Rd] --quiet flag sets echo option to TRUE (PR#1083)
Message-ID: <200108311708.TAA09196@pubhealth.ku.dk>

The help for options says:

    echo: logical.  Only used in non-interactive mode, when it controls
          whether input is echoed. Command-line options `--quiet' and
          `--slave' set this initially to `FALSE'.

I don't think that this is correct for me.


Consider the following session:

mica|junk> ls
test.R
mica|junk> cat test.R 
cat("Why was this command echoed?\n")
mica|junk> R CMD BATCH --quiet test.R 
mica|junk> ls
test.R		test.Rout
mica|junk> cat test.Rout 
> invisible(options(echo = TRUE))
> cat("Why was this command echoed?\n")
Why was this command echoed?
> proc.time()
[1] 1.13 0.11 1.20 0.00 0.00
> 
mica|junk> 

Either using --quiet should set echo to FALSE (my personal preference) or the
documentation for options should be changed.

Apologies if I have misunderstood something here.

Regards,

Dave Kane

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 31 18:21:06 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 2001 19:21:06 +0200
Subject: [Rd] --quiet flag sets echo option to TRUE (PR#1083)
In-Reply-To: <200108311708.TAA09196@pubhealth.ku.dk>
References: <200108311708.TAA09196@pubhealth.ku.dk>
Message-ID: <x2zo8gqh6l.fsf@blueberry.kubism.ku.dk>

a296180@mica.fmr.com writes:

> The help for options says:
> 
>     echo: logical.  Only used in non-interactive mode, when it controls
>           whether input is echoed. Command-line options `--quiet' and
>           `--slave' set this initially to `FALSE'.
> 
> I don't think that this is correct for me.
> 
> 
> Consider the following session:
> 
> mica|junk> ls
> test.R
> mica|junk> cat test.R 
> cat("Why was this command echoed?\n")
> mica|junk> R CMD BATCH --quiet test.R 
> mica|junk> ls
> test.R		test.Rout
> mica|junk> cat test.Rout 
> > invisible(options(echo = TRUE))
> > cat("Why was this command echoed?\n")
> Why was this command echoed?
> > proc.time()
> [1] 1.13 0.11 1.20 0.00 0.00
> > 
> mica|junk> 
> 
> Either using --quiet should set echo to FALSE (my personal preference) or the
> documentation for options should be changed.
> 
> Apologies if I have misunderstood something here.

You seem to be right, but since BATCH is messing with options()
itself, your example doesn't prove it. However, this does:

[pd@blueberry R]$ R --quiet --vanilla < test.R
> cat("Why was this command echoed?\n")
Why was this command echoed?
>

(with 1.3.1)

Since --slave turns the echoing off, and it is nice to be able to
kill just the startup blurb, my vote is to change the docs.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug  1 10:00:16 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 1 Aug 2001 11:00:16 +0200
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <pxbsm1jg8b.fsf@infiniti.ece.cmu.edu>
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
 <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
 <15205.38703.553276.335905@mithrandir.hornik.net>
 <pxbsm1jg8b.fsf@infiniti.ece.cmu.edu>
Message-ID: <15207.50464.266507.281379@mithrandir.hornik.net>

>>>>> Thomas Vogels writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>> >>>>> Thomas Vogels writes:
>> 
>> > Excerpt from Kurt's email this morning:
>> 
>> >>>> > 2) after configure (with CC=gcc but using AIX's linker
>> >> /usr/bin/ld), the
>> >>>> > Makefile in src/library/tcltk/src doesn't protect the linker
>> >> flags
>> >> -bI
>> >>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
>> >> linker flags
>> >>>> > are passed on to ld correctly.  Which I know that you know...)
>> >>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
>> >> looked into
>> >>>> > patching configure yet...
>> >> 
>> >> Very strange.  Configure has
>> >> 
>> >> *aix4.[2-9]*)
>> >> EXPORTFILE="\$(top_builddir)/etc/R.exp"
>> >> cpicflags=
>> >> cxxpicflags=
>> >> fpicflags=
>> >> wl="-Wl,"
>> >> main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
>> >> shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
>> >> ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
>> >> SHLIB_LIBADD="\$(LIBM)"
>> >> ;;
>> >> 
>> >> so unless I am missing something obvious all linker flages are
>> >> protected
>> >> via `-Wl,' (which should also work if the C compiler is not gcc).
>> >> 
>> 
>> > Sorry, should have been more explicit, I guess: the problem is with
>> > PKG_LIBS (which is the only variable in that Makefile using linker
>> > flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
>> > in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
>> > used AIX's 'cc' compiler, you get in trouble with later using gcc
>> > (e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.
>> 
>> > There is the question, why configure didn't "see" this coming.  What
>> > would be nice is a warning to the effect that tkConfig.sh is broken
>> > when R can't compile tcltk.c.  (Currently I get messages about libc.a
>> > not found...)
>> 
>> This is asking for a bit much, I think.  How would configure know for
>> sure that tkConfig.sh is broken?

> I promise to get more sleep soon... 'What would be nice is a warning
> to the effect that the Tcl/Tk configuration failed, like:
> checking how to compile and link tcl/tk.... failed
> '  Asking about tkConfig.sh (or tclConfig.sh) is probably too muc as
> threre are other factors that can cause the fail (config.site...).

> What this would boil down to is trying to compile e.g. tkAppInit.c and
> see whether compilation and linking works.  But even this may
> be asking  fortoo much, this is just one architecture.  Things like these
> will continue to happen with AIX as long as there are those '.exp'
> files around...


>> On second thought: the comment in tkConfig.sh says
>> 
>> # String to pass to linker to pick up the Tk library from its
>> # installed directory.
>> TK_LIB_SPEC='@TK_LIB_SPEC@'
>> 
>> so maybe this assumes to be called by ld directly ...
>> 
>> What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?

> hell breaks loose.  TK_LIB_SPEC contains '-bI/some/path/libtk8.3.exp'
> which is needed badly when linking on AIX.

Argh.  After sinking some more time into this ... here's what happens.

Assuming that both tclConfig.sh and tkConfig.sh are found, we do

	TCLTL_LIBS="${TCL_LIB_SPEC} ${TK_LIB_SPEC} ${TK_LIBS}"

Using tcl8.4a1 and tk8.4a1 one gets for a shared build on AIX from the
TclTk configure code:

    if test "$using_gcc" = "yes" ; then
        TCL_BUILD_LIB_SPEC="-Wl,-bI:`pwd`/${TCL_BUILD_EXP_FILE} -L`pwd`"
        TCL_LIB_SPEC="-Wl,-bI:${exec_prefix}/lib/${TCL_EXP_FILE} -L`pwd`"    
    else
        TCL_BUILD_LIB_SPEC="-bI:`pwd`/${TCL_BUILD_EXP_FILE}"
        TCL_LIB_SPEC="-bI:${exec_prefix}/lib/${TCL_EXP_FILE}"    
    fi

    TK_LIB_SPEC="-bI:${exec_prefix}/lib/${TK_EXP_FILE}"

So the TclTk maintainers in their infinite wisdom have caught the gcc
case for tcl but not for tk.

I therefore suggest the following.

* Can you try replacing

      TCLTK_LIBS="${TCLTK_LIBS} ${TK_LIB_SPEC} ${TK_LIBS}"

  in m4/R.m4 by

      TCLTK_LIBS="${TCLTK_LIBS} ${wl}${TK_LIB_SPEC} ${TK_LIBS}"

  and see if that works?  (You will have to configure using
  --enable-maintainer-mode to get configure rebuilt.  Or, you could
  simply edit configure.)  By `works' I mean under both gcc and cc.

* If so, this is the short-term fix we could go for.  If not, we may
  need to infer wl for non-gcc from libtool, which is doable.

* It may be useful to report the discrepancy to the TclTk maintainers.

* Provided they fix the problem, we need to think about better
  strategies.  (Something like if wl is not the empty string and
  TK_LIB_SPEC does not start with it then add it as prefix.)  But let us
  not worry about this now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vogels@cmu.edu  Thu Aug  2 04:30:33 2001
From: vogels@cmu.edu (Thomas J Vogels)
Date: Wed, 1 Aug 2001 23:30:33 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <15207.50464.266507.281379@mithrandir.hornik.net>
Message-ID: <NFBBKIAHMMCHOBIBLMMPMEBPCAAA.tov@ece.cmu.edu>

Excerpt from email by Kurt Hornik:

>>> On second thought: the comment in tkConfig.sh says
>>>
>>> # String to pass to linker to pick up the Tk library from its
>>> # installed directory.
>>> TK_LIB_SPEC='@TK_LIB_SPEC@'
>>>
>>> so maybe this assumes to be called by ld directly ...

I think you're right with this assumption, but sadly, the current devel
release for tcl/tk 8.4a2 is broken--even the maintainers of tcl/tk don't
know how they want to handle TK_LIB_SPEC, TK_LIBS and friends!  When I tried
to compile Tk it failed for 'wish'.  I'll check out how to file bug reports
against tcl/tk...

>>>
>>> What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?
>
>> hell breaks loose.  TK_LIB_SPEC contains '-bI/some/path/libtk8.3.exp'
>> which is needed badly when linking on AIX.
>
> Argh.  After sinking some more time into this ... here's what happens.
>
> Assuming that both tclConfig.sh and tkConfig.sh are found, we do
>
> 	TCLTL_LIBS="${TCL_LIB_SPEC} ${TK_LIB_SPEC} ${TK_LIBS}"
>
> Using tcl8.4a1 and tk8.4a1 one gets for a shared build on AIX from the
> TclTk configure code:
>
>     if test "$using_gcc" = "yes" ; then
>         TCL_BUILD_LIB_SPEC="-Wl,-bI:`pwd`/${TCL_BUILD_EXP_FILE} -L`pwd`"
>         TCL_LIB_SPEC="-Wl,-bI:${exec_prefix}/lib/${TCL_EXP_FILE} -L`pwd`"

... which is wrong, BTW:  TCL_LIB_SPEC should refer to ${exec_prefix}/lib
not `pwd` ...

>     else
>         TCL_BUILD_LIB_SPEC="-bI:`pwd`/${TCL_BUILD_EXP_FILE}"
>         TCL_LIB_SPEC="-bI:${exec_prefix}/lib/${TCL_EXP_FILE}"
>     fi
>
>    TK_LIB_SPEC="-bI:${exec_prefix}/lib/${TK_EXP_FILE}"
>
> So the TclTk maintainers in their infinite wisdom have caught the gcc
> case for tcl but not for tk.

That would explain why Tcl/Tk compiles with Aix's cc but not gcc.

>
> I therefore suggest the following.
>
> * Can you try replacing
>
>       TCLTK_LIBS="${TCLTK_LIBS} ${TK_LIB_SPEC} ${TK_LIBS}"
>
>   in m4/R.m4 by
>
>       TCLTK_LIBS="${TCLTK_LIBS} ${wl}${TK_LIB_SPEC} ${TK_LIBS}"
>
>   and see if that works?  (You will have to configure using
>   --enable-maintainer-mode to get configure rebuilt.  Or, you could
>   simply edit configure.)  By `works' I mean under both gcc and cc.

I changed configure since I don't have autoconf etc. installed.
Your solution works when compiling with gcc! I haven't tried cc yet but will
do so tomorrow.

> * If so, this is the short-term fix we could go for.  If not, we may
>   need to infer wl for non-gcc from libtool, which is doable.
>
> * It may be useful to report the discrepancy to the TclTk maintainers.

I'll try to compile tcl and tk with gcc and send in reports.

> * Provided they fix the problem, we need to think about better
>   strategies.  (Something like if wl is not the empty string and
>   TK_LIB_SPEC does not start with it then add it as prefix.)  But let us
>   not worry about this now.

Do you really want to go this way?  Is AIX the only OS where you can run
into this kind of trouble?  If so, why not add a compilation of a little
test program  in configure in case you have os==AIX, that would use the same
flags that you'll use in library/src/tcltk.c?  If that fails, it's flagged
early on and directly points to the tcl/tk installation (and not to R).

Thanks,
  -tom

--
Email: vogels@cmu.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug  2 07:19:35 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 2 Aug 2001 08:19:35 +0200
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <NFBBKIAHMMCHOBIBLMMPMEBPCAAA.tov@ece.cmu.edu>
References: <15207.50464.266507.281379@mithrandir.hornik.net>
 <NFBBKIAHMMCHOBIBLMMPMEBPCAAA.tov@ece.cmu.edu>
Message-ID: <15208.61687.130864.413709@mithrandir.hornik.net>

>>>>> Thomas J Vogels writes:

> Excerpt from email by Kurt Hornik:
>>>> On second thought: the comment in tkConfig.sh says
>>>> 
>>>> # String to pass to linker to pick up the Tk library from its
>>>> # installed directory.
>>>> TK_LIB_SPEC='@TK_LIB_SPEC@'
>>>> 
>>>> so maybe this assumes to be called by ld directly ...

> I think you're right with this assumption, but sadly, the current
> devel release for tcl/tk 8.4a2 is broken--even the maintainers of
> tcl/tk don't know how they want to handle TK_LIB_SPEC, TK_LIBS and
> friends!  When I tried to compile Tk it failed for 'wish'.  I'll check
> out how to file bug reports against tcl/tk...

[Well getting AIX right is not that easy.  Fortunately, R has Tom Vogels
to help ...]

>>>> 
>>>> What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?
>> 
>>> hell breaks loose.  TK_LIB_SPEC contains '-bI/some/path/libtk8.3.exp'
>>> which is needed badly when linking on AIX.
>> 
>> Argh.  After sinking some more time into this ... here's what happens.
>> 
>> Assuming that both tclConfig.sh and tkConfig.sh are found, we do
>> 
>> TCLTL_LIBS="${TCL_LIB_SPEC} ${TK_LIB_SPEC} ${TK_LIBS}"
>> 
>> Using tcl8.4a1 and tk8.4a1 one gets for a shared build on AIX from the
>> TclTk configure code:
>> 
>> if test "$using_gcc" = "yes" ; then
>> TCL_BUILD_LIB_SPEC="-Wl,-bI:`pwd`/${TCL_BUILD_EXP_FILE} -L`pwd`"
>> TCL_LIB_SPEC="-Wl,-bI:${exec_prefix}/lib/${TCL_EXP_FILE} -L`pwd`"

> ... which is wrong, BTW:  TCL_LIB_SPEC should refer to
> ${exec_prefix}/lib not `pwd` ...

You mean in the `-L' part?  Certainly correct ...

>> else
>> TCL_BUILD_LIB_SPEC="-bI:`pwd`/${TCL_BUILD_EXP_FILE}"
>> TCL_LIB_SPEC="-bI:${exec_prefix}/lib/${TCL_EXP_FILE}"
>> fi
>> 
>> TK_LIB_SPEC="-bI:${exec_prefix}/lib/${TK_EXP_FILE}"
>> 
>> So the TclTk maintainers in their infinite wisdom have caught the gcc
>> case for tcl but not for tk.

> That would explain why Tcl/Tk compiles with Aix's cc but not gcc.

Yep.

>> 
>> I therefore suggest the following.
>> 
>> * Can you try replacing
>> 
>> TCLTK_LIBS="${TCLTK_LIBS} ${TK_LIB_SPEC} ${TK_LIBS}"
>> 
>> in m4/R.m4 by
>> 
>> TCLTK_LIBS="${TCLTK_LIBS} ${wl}${TK_LIB_SPEC} ${TK_LIBS}"
>> 
>> and see if that works?  (You will have to configure using
>> --enable-maintainer-mode to get configure rebuilt.  Or, you could
>> simply edit configure.)  By `works' I mean under both gcc and cc.

> I changed configure since I don't have autoconf etc. installed.  Your
> solution works when compiling with gcc! I haven't tried cc yet but
> will do so tomorrow.

Ok, great.  My assumption/hope is that this should work ...

>> * If so, this is the short-term fix we could go for.  If not, we may
>> need to infer wl for non-gcc from libtool, which is doable.
>> 
>> * It may be useful to report the discrepancy to the TclTk maintainers.

> I'll try to compile tcl and tk with gcc and send in reports.

>> * Provided they fix the problem, we need to think about better
>> strategies.  (Something like if wl is not the empty string and
>> TK_LIB_SPEC does not start with it then add it as prefix.)  But let us
>> not worry about this now.

> Do you really want to go this way?  Is AIX the only OS where you can
> run into this kind of trouble?  If so, why not add a compilation of a
> little test program in configure in case you have os==AIX, that would
> use the same flags that you'll use in library/src/tcltk.c?  If that
> fails, it's flagged early on and directly points to the tcl/tk
> installation (and not to R).

I think I want to go this way.  Reason: the current situation is a
mixture of an R bug and a Tk inconsistency.  The R bug is that I had not
realized that the LIB_SPECs are meant as flags to ld.  The Tk problem is
that this is not true.

The whole thing is a bit tricky, and it might be interesting to see how
e.g. GNOME projects deal with this in their -config scripts.  As this is
hidden inside libtool could you maybe try compiling libxml2 on your AIX
system and see what xml2-config --libs does?

Also, what does
	./libtool --config | grep ^wl
give for configuration with native cc?

In general, the portable way would be to have package config scripts use
$wl or alike.  But that will not do in general: someone could have gcc
but a native C++ compiler and $wl might be different between these ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Aug  2 16:16:16 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Thu, 2 Aug 2001 17:16:16 +0200 (MET DST)
Subject: [Rd] arrows()/log scale/clipping (?) (PR#1039)
Message-ID: <200108021516.RAA27588@pubhealth.ku.dk>


   arrows() seems to hang when either x or y scale of the plot
is logarithmic and the arrows requested go beyond the plot
(by more than a certain amount).  I didn't go into C code to
find it, but here's a function that exercises the bug a bit ...

arrow.bug2 <- function(y0=1,y1=10,log="y") {
  plot(c(0.1,1),c(1,10),log=log)
  arrows(x0=0.5,
         y0=y0,
         x1=0.5,
         y1=y1,
         length=0.05,angle=90)
}

arrow.bug2() ## OK
arrow.bug2(log="x") ## OK
arrow.bug2(y0=0.01)  ##hangs
arrow.bug2(y1=11)  ## OK
arrow.bug2(y1=20)  ## hangs
arrow.bug2(log="x",y1=20) ## hangs


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

Permanent address: Zoology Department, University of Florida
bolker@zoo.ufl.edu (352) 392-5697


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  2 18:52:20 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Aug 2001 19:52:20 +0200
Subject: [Rd] arrows()/log scale/clipping (?) (PR#1039)
In-Reply-To: bolker@zoo.ufl.edu's message of "Thu, 2 Aug 2001 17:16:16 +0200 (MET DST)"
References: <200108021516.RAA27588@pubhealth.ku.dk>
Message-ID: <x21ymumjsb.fsf@blueberry.kubism.ku.dk>

bolker@zoo.ufl.edu writes:

>    arrows() seems to hang when either x or y scale of the plot
> is logarithmic and the arrows requested go beyond the plot
> (by more than a certain amount).  I didn't go into C code to
> find it, but here's a function that exercises the bug a bit ...
> 
> arrow.bug2 <- function(y0=1,y1=10,log="y") {
>   plot(c(0.1,1),c(1,10),log=log)
>   arrows(x0=0.5,
>          y0=y0,
>          x1=0.5,
>          y1=y1,
>          length=0.05,angle=90)
> }
> 
> arrow.bug2() ## OK
> arrow.bug2(log="x") ## OK
> arrow.bug2(y0=0.01)  ##hangs
> arrow.bug2(y1=11)  ## OK
> arrow.bug2(y1=20)  ## hangs
> arrow.bug2(log="x",y1=20) ## hangs

This is gone in the development version. Didn't we have a very similar
report quite recently??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vogels@cmu.edu  Fri Aug  3 04:16:28 2001
From: vogels@cmu.edu (Thomas J Vogels)
Date: Thu, 2 Aug 2001 23:16:28 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <15208.61687.130864.413709@mithrandir.hornik.net>
Message-ID: <NFBBKIAHMMCHOBIBLMMPOECACAAA.tov@ece.cmu.edu>

Kurt,

here is the update:  With your change in TCLTK_LIBS
TCLTK_LIBS="${TCLTK_LIBS} ${wl}${TK_LIB_SPEC} ${TK_LIBS}"
I can compile with both cc and gcc:

-- using no CC in config.site I'll get gcc and compilation proceeds nicely.

-- using CC=cc in config.site forces compilation with cc and compilation
proceeds with warnings for all modules. E.g. for X11 I get the following:

       cc -Wl,-bM:SRE -Wl,-H512 -Wl,-T512 -Wl,-bnoentry       -Wl,-bexpall
-Wl,-bI:../../../etc/R.exp  -o R_X11.so  dataentry.lo devX11.lo rotated.lo
rbitmap.lo -lSM -lICE -lX11  -L/home/tov/opt/z/lib -L/home/tov/opt/z/lib  -l
dl -lm -lc
cc: 1501-218 file dataentry.lo contains an incorrect file suffix
cc: 1501-218 file devX11.lo contains an incorrect file suffix
cc: 1501-218 file rotated.lo contains an incorrect file suffix
cc: 1501-218 file rbitmap.lo contains an incorrect file suffix

-- Note that I can't just use LIBS and CPPFLAGS to set up the paths to Tcl
and Tk (as in LIBS=-L/home/tov/opt/lib and CPPFLAGS=-I/home/tov/opt/include)
since configure will try compile with -ltcl, i.e. without version number and
so doesn't find libtcl8.4.so.  Use of --with-tcltk=/home/tov/opt/lib works.
(Applies to both, cc and gcc)

-- With CC=cc I get warnings about /usr/include/stdarg.h and
/usr/include/varargs.h stepping on each other's toes with macro
re-definitions.

Excerpt form Kurt Hornik's email from Thursday, August 02, 2001 1:20 AM:

>> Do you really want to go this way?  Is AIX the only OS where you can
>> run into this kind of trouble?  If so, why not add a compilation of a
>> little test program in configure in case you have os==AIX, that would
>> use the same flags that you'll use in library/src/tcltk.c?  If that
>> fails, it's flagged early on and directly points to the tcl/tk
>> installation (and not to R).
>
> I think I want to go this way.  Reason: the current situation is a
> mixture of an R bug and a Tk inconsistency.  The R bug is that I had not
> realized that the LIB_SPECs are meant as flags to ld.  The Tk problem is
> that this is not true.
>
> The whole thing is a bit tricky, and it might be interesting to see how
> e.g. GNOME projects deal with this in their -config scripts.  As this is
> hidden inside libtool could you maybe try compiling libxml2 on your AIX
> system and see what xml2-config --libs does?

What and where is xml2?


> Also, what does
> 	./libtool --config | grep ^wl
> give for configuration with native cc?

With cc: wl=""
With gcc: wl="-Wl,"

>
> In general, the portable way would be to have package config scripts use
> $wl or alike.  But that will not do in general: someone could have gcc
> but a native C++ compiler and $wl might be different between these ...

Interestingly I saw today in Tk's configure:

case $SHLIB_LD in
   *ld*)
      TK_LD_SEARCH_FLAGS=`echo ${TK_CC_SEARCH_FLAGS} |sed -e "s|-Wl,||g" -e
"s|,| |g"`
      ;;
    *)
      TK_LD_SEARCH_FLAGS="${TK_CC_SEARCH_FLAGS}"
      ;;
esac

So they thought about throwing out the -Wl when calling the linker with
flags meant for the compiler.  I think you could turn that around and
add -Wl for linker flags that you pass to the compiler.  (My point being
that the echo&sed combination is saver than just prefixing a variable with
${wl}.)

Thanks,
  -tom

--
Email: vogels@cmu.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From possolo@crd.ge.com  Fri Aug  3 16:04:59 2001
From: possolo@crd.ge.com (possolo@crd.ge.com)
Date: Fri, 3 Aug 2001 17:04:59 +0200 (MET DST)
Subject: [Rd] String Length Limit (PR#1040)
Message-ID: <200108031504.RAA05722@pubhealth.ku.dk>

Full_Name: Antonio Possolo
Version: 1.3.0
OS: Linux
Submission from: (NULL) (192.35.44.3)


If one attempts to read a character string from a file using scan,
and the string comprises more than 8190 characters, then the string
is truncated to this length, and no warning is issued.

I've observed this both in the Linux and Win implementations of R 1.3.0.
S-PLUS (v. 6.0 rel. 1 for Sun SPARC0 does not suffer from this behavior. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  3 16:50:18 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 3 Aug 2001 17:50:18 +0200 (MET DST)
Subject: [Rd] String Length Limit (PR#1040)
Message-ID: <200108031550.RAA05929@pubhealth.ku.dk>

On Fri, 3 Aug 2001 possolo@crd.ge.com wrote:

> Full_Name: Antonio Possolo
> Version: 1.3.0
> OS: Linux
> Submission from: (NULL) (192.35.44.3)
>
>
> If one attempts to read a character string from a file using scan,
> and the string comprises more than 8190 characters, then the string
> is truncated to this length, and no warning is issued.
>
> I've observed this both in the Linux and Win implementations of R 1.3.0.
> S-PLUS (v. 6.0 rel. 1 for Sun SPARC0 does not suffer from this behavior.

Yes, that's an R limitation.  Why is it a problem?  I think you would
do better using readLines if it is a line-oriented file.  AFAIK that is
unlimited.

It would be easy to issue a warning, quite a bit harder to remove the limit
(which dates from the days when character strings were in most places
limited to 8191 chars).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Aug  4 15:06:12 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Aug 2001 16:06:12 +0200
Subject: [Rd] Next release of R, August 31st
Message-ID: <x2ae1f3oob.fsf@blueberry.kubism.ku.dk>


I'm trying to make a habit of announcing upcoming releases on r-devel,
to give package maintainers a chance of staying in sync, and to
encourage everyone to report bugs in the prerelease versions.

So: R-1.3.1 is scheduled for release on August 31st. In order to be
able to get a solid round of testing on different platforms,
maintainers of the group of recommended packages are requested to
respect a feature freeze starting on August 24th. This means that only
critical bugfixes should go into these packages. The list of
recommended packages are (hope I didn't forget any...)

  KernSmooth
  VR
  boot
  cluster
  foreign
  nlme
  rpart
  survival
  mgcv

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Sat Aug  4 17:04:41 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Sat, 4 Aug 2001 12:04:41 -0400
Subject: [Rd] Summary: too many arguments in foreign function call
Message-ID: <01080412044100.16791@haplo>


> John M. Chambers <jmc@bell-labs.com> wrote:
>
[snip]
> 
> Empirical evidence is that the limit in S-Plus is 128. (The call 
> manyArgs(N) constructs a .C with N arguments to a C routine (with 200 
> arguments)). 

OK.  I've modifed my patch to bring R's limits to 128, the same as in S-Plus, 
as well as noting that this is the limit in Foreign.Rd.   I suppose that this 
limit is as good as any, and at least means that code written and tested with 
S-Plus won't have to be changed to work with R and vice versa (at least for 
this reason). 

The patch has been uploaded to 
ftp://cran.r-project.org/incoming/dotcall_128.gz

(I hope this will make it into R-1.3.1)

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From martin.lenze@to.com  Sun Aug  5 19:03:32 2001
From: martin.lenze@to.com (martin.lenze@to.com)
Date: Sun, 5 Aug 2001 20:03:32 +0200 (MET DST)
Subject: [Rd] xtabs, drop.unused.levels (PR#1041)
Message-ID: <200108051803.UAA11343@pubhealth.ku.dk>

Full_Name: Martin Lenze
Version: 1.3.0 22.06.2001
OS: win32,x86
Submission from: (NULL) (194.221.251.1)


As a newbie I'm not sure, whether this is a bug, but I don't know how to get
around this behaviour:
> x <- list("A"=rep(c(1:5),30),
+ "B"=c(rep(letters[1:3],30),rep(letters[2:4],20)))
> y <- as.data.frame(x)
> xtabs(~A+B,y)
   B
A   a  b  c d
  1 6 10 10 4
  2 6 10 10 4
  3 6 10 10 4
  4 6 10 10 4
  5 6 10 10 4
> y <- subset(y,B!="d")
> xtabs(~A+B,y,drop.unused.levels=TRUE)
   B
A   a  b  c d
  1 6 10 10 0
  2 6 10 10 0
  3 6 10 10 0
  4 6 10 10 0
  5 6 10 10 0

I'd expect "xtabs" to drop "d".

Kindest regards
M. Lenze


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Aug  5 19:43:52 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Aug 2001 20:43:52 +0200
Subject: [Rd] xtabs, drop.unused.levels (PR#1041)
In-Reply-To: martin.lenze@to.com's message of "Sun, 5 Aug 2001 20:03:32 +0200 (MET DST)"
References: <200108051803.UAA11343@pubhealth.ku.dk>
Message-ID: <x2puaal53r.fsf@blueberry.kubism.ku.dk>

martin.lenze@to.com writes:

> > y <- subset(y,B!="d")
> > xtabs(~A+B,y,drop.unused.levels=TRUE)
>    B
> A   a  b  c d
>   1 6 10 10 0
>   2 6 10 10 0
>   3 6 10 10 0
>   4 6 10 10 0
>   5 6 10 10 0
> 
> I'd expect "xtabs" to drop "d".

Yes, that's a bug. The culprit is

  do.call("table", mf)

using "mf" rather than "by" which was carefully computed to handle
drop.unused.levels a couple of lines above.

Actually, I think that table(by) would work just as well (and look better).

(A quick workaround could be y$B <- factor(y$B))
 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug  5 19:34:45 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 5 Aug 2001 19:34:45 +0100 (BST)
Subject: [Rd] xtabs, drop.unused.levels (PR#1041)
In-Reply-To: <200108051803.UAA11343@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0108051930230.12342-100000@auk.stats>

On Sun, 5 Aug 2001 martin.lenze@to.com wrote:

> Full_Name: Martin Lenze
> Version: 1.3.0 22.06.2001
> OS: win32,x86
> Submission from: (NULL) (194.221.251.1)
>
>
> As a newbie I'm not sure, whether this is a bug, but I don't know how to get
> around this behaviour:
> > x <- list("A"=rep(c(1:5),30),
> + "B"=c(rep(letters[1:3],30),rep(letters[2:4],20)))
> > y <- as.data.frame(x)
> > xtabs(~A+B,y)
>    B
> A   a  b  c d
>   1 6 10 10 4
>   2 6 10 10 4
>   3 6 10 10 4
>   4 6 10 10 4
>   5 6 10 10 4
> > y <- subset(y,B!="d")
> > xtabs(~A+B,y,drop.unused.levels=TRUE)
>    B
> A   a  b  c d
>   1 6 10 10 0
>   2 6 10 10 0
>   3 6 10 10 0
>   4 6 10 10 0
>   5 6 10 10 0
>
> I'd expect "xtabs" to drop "d".

The line

    x <- if (is.null(y))
        do.call("table", mf)

should be

    x <- if (is.null(y))
        do.call("table", by)

Currently drop.unused.levels=TRUE is ignored unless there is a response.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Mon Aug  6 01:29:00 2001
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Mon, 6 Aug 2001 12:29:00 +1200
Subject: [Rd] arrows()/log scale/clipping (?) (PR#1039)
References: <200108021516.RAA27588@pubhealth.ku.dk> <x21ymumjsb.fsf@blueberry.kubism.ku.dk>
Message-ID: <013201c11e0e$c9fbc3a0$175dd882@stat.auckland.ac.nz>

Hi


> >    arrows() seems to hang when either x or y scale of the plot
> > is logarithmic and the arrows requested go beyond the plot
> > (by more than a certain amount).  I didn't go into C code to
> > find it, but here's a function that exercises the bug a bit ...
> >
> > arrow.bug2 <- function(y0=1,y1=10,log="y") {
> >   plot(c(0.1,1),c(1,10),log=log)
> >   arrows(x0=0.5,
> >          y0=y0,
> >          x1=0.5,
> >          y1=y1,
> >          length=0.05,angle=90)
> > }
> >
> > arrow.bug2() ## OK
> > arrow.bug2(log="x") ## OK
> > arrow.bug2(y0=0.01)  ##hangs
> > arrow.bug2(y1=11)  ## OK
> > arrow.bug2(y1=20)  ## hangs
> > arrow.bug2(log="x",y1=20) ## hangs
>
> This is gone in the development version. Didn't we have a very similar
> report quite recently??


Yes.  There was a bug in the line-clipping code (which I presume is what
this code is tickling), which has been fixed for 1.3.1

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From martin.lenze@to.com  Mon Aug  6 10:04:33 2001
From: martin.lenze@to.com (Martin Lenze)
Date: Mon, 6 Aug 2001 11:04:33 +0200 (W. Europe Daylight Time)
Subject: [Rd] xtabs, drop.unused.levels (PR#1041)
In-Reply-To: <Pine.GSO.4.31.0108051930230.12342-100000@auk.stats>
Message-ID: <Pine.WNT.4.33.0108061059070.740-100000@lt-ml>


Many, many thanks for your answers, especially within this astonishing
timeframe.

Your solutions worked well. I changed the lines pointed out in
<R-HOME>/library/R/base and now it works as expedted.

Hopefully I'll be able to track down such mistakes myself sometimes.

with kindest regards
Martin Lenze

-------------------------------------------------------
martin.lenze@to.com, http://www.to.com/
Thinking Objects Software GmbH
Lilienthalstr. 2, 70825 Stuttgart-Korntal, Germany
office +49 711 88770-400, fax +49 711 88770-449
mobile +49 170 7917721, home +49 6221 618036


On Sun, 5 Aug 2001, Prof Brian D Ripley wrote:

PBDR>Date: Sun, 5 Aug 2001 19:34:45 +0100 (BST)
PBDR>From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
PBDR>To: martin.lenze@to.com
PBDR>Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
PBDR>Subject: Re: [Rd] xtabs, drop.unused.levels (PR#1041)
PBDR>
PBDR>On Sun, 5 Aug 2001 martin.lenze@to.com wrote:
PBDR>
PBDR>> Full_Name: Martin Lenze
PBDR>> Version: 1.3.0 22.06.2001
PBDR>> OS: win32,x86
PBDR>> Submission from: (NULL) (194.221.251.1)
PBDR>>
PBDR>>
PBDR>> As a newbie I'm not sure, whether this is a bug, but I don't know how to get
PBDR>> around this behaviour:
PBDR>> > x <- list("A"=rep(c(1:5),30),
PBDR>> + "B"=c(rep(letters[1:3],30),rep(letters[2:4],20)))
PBDR>> > y <- as.data.frame(x)
PBDR>> > xtabs(~A+B,y)
PBDR>>    B
PBDR>> A   a  b  c d
PBDR>>   1 6 10 10 4
PBDR>>   2 6 10 10 4
PBDR>>   3 6 10 10 4
PBDR>>   4 6 10 10 4
PBDR>>   5 6 10 10 4
PBDR>> > y <- subset(y,B!="d")
PBDR>> > xtabs(~A+B,y,drop.unused.levels=TRUE)
PBDR>>    B
PBDR>> A   a  b  c d
PBDR>>   1 6 10 10 0
PBDR>>   2 6 10 10 0
PBDR>>   3 6 10 10 0
PBDR>>   4 6 10 10 0
PBDR>>   5 6 10 10 0
PBDR>>
PBDR>> I'd expect "xtabs" to drop "d".
PBDR>
PBDR>The line
PBDR>
PBDR>    x <- if (is.null(y))
PBDR>        do.call("table", mf)
PBDR>
PBDR>should be
PBDR>
PBDR>    x <- if (is.null(y))
PBDR>        do.call("table", by)
PBDR>
PBDR>Currently drop.unused.levels=TRUE is ignored unless there is a response.
PBDR>
PBDR>--
PBDR>Brian D. Ripley,                  ripley@stats.ox.ac.uk
PBDR>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
PBDR>University of Oxford,             Tel:  +44 1865 272861 (self)
PBDR>1 South Parks Road,                     +44 1865 272860 (secr)
PBDR>Oxford OX1 3TG, UK                Fax:  +44 1865 272595
PBDR>
PBDR>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  6 17:08:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 6 Aug 2001 17:08:17 +0100 (BST)
Subject: [Rd] String Length Limit (PR#1040)
In-Reply-To: <200108031504.RAA05722@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0108061703440.8289-100000@gannet.stats>

On Fri, 3 Aug 2001 possolo@crd.ge.com wrote:

> Full_Name: Antonio Possolo
> Version: 1.3.0
> OS: Linux
> Submission from: (NULL) (192.35.44.3)
>
>
> If one attempts to read a character string from a file using scan,
> and the string comprises more than 8190 characters, then the string
> is truncated to this length, and no warning is issued.
>
> I've observed this both in the Linux and Win implementations of R 1.3.0.
> S-PLUS (v. 6.0 rel. 1 for Sun SPARC) does not suffer from this behavior.

Although readLines is normally to be preferred (in R and S-PLUS 6: it's a
lot faster for a start), we've fixed this so that scan() in

R 1.3.1 will give a warning
R 1.4.0 will allow unlimited lines (unlimited by R, that is).

As ever, previews are in r-patched and r-devel (tar bundles/rysnc)
respectively.

The 1.4.0 version needed quite a lot of re-writing of code, too much for a
patch release.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayan@stat.wisc.edu  Mon Aug  6 21:06:30 2001
From: deepayan@stat.wisc.edu (Deepayan Sarkar)
Date: Mon, 6 Aug 2001 15:06:30 -0500 (CDT)
Subject: [Rd] panel.loess
Message-ID: <Pine.LNX.4.21.0108061454500.25605-100000@gstat203.stat.wisc.edu>


Hi, 

I'm not sure what the recommended thing to do here would be:

In the lattice library, panel.loess needs to use loess.smooth(), which is
in the modreg library. Now should I 

(1) make lattice depend on modreg, and call require(modreg) in zzz.R

OR

(2) use autoload("loess", "modreg")

I like the second option better, as a particular session might not need
panel.loess. Are there any general guidelines, or any other possibilities?

Also, should I include modreg on the `depends' line in DESCRIPTION ? 

- Deepayan



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Tue Aug  7 06:15:05 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue, 7 Aug 2001 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200108070515.HAA08059@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400

Directory:  Language

* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)

Directory:  Macintosh

* PR# 1023 *
Subject: data function
From: wild@stat.auckland.ac.nz
Date: Fri, 13 Jul 2001 02:48:53 +0200 (MET DST)
--Mac-specific
* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Madrake 8.0, not 7.2
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1041 *
Subject: xtabs, drop.unused.levels
From: martin.lenze@to.com
Date: Sun, 5 Aug 2001 20:03:30 +0200 (MET DST)
* PR# 1040 *
Subject: String Length Limit
From: possolo@crd.ge.com
Date: Fri, 3 Aug 2001 17:04:58 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Aug  7 06:45:31 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 7 Aug 2001 07:45:31 +0200
Subject: [Rd] panel.loess
In-Reply-To: <Pine.LNX.4.21.0108061454500.25605-100000@gstat203.stat.wisc.edu>
References: <Pine.LNX.4.21.0108061454500.25605-100000@gstat203.stat.wisc.edu>
Message-ID: <15215.32891.785583.349785@mithrandir.hornik.net>

>>>>> Deepayan Sarkar writes:

> Hi, 

> I'm not sure what the recommended thing to do here would be:

> In the lattice library, panel.loess needs to use loess.smooth(), which is
> in the modreg library. Now should I 

> (1) make lattice depend on modreg, and call require(modreg) in zzz.R

> OR

> (2) use autoload("loess", "modreg")

> I like the second option better, as a particular session might not
> need panel.loess. Are there any general guidelines, or any other
> possibilities?

No strong preference.

> Also, should I include modreg on the `depends' line in DESCRIPTION ?

In either case, yes.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug  7 13:10:55 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2001 14:10:55 +0200
Subject: [Rd] bugs.r-project.org down for a while
Message-ID: <x2elqot6i8.fsf@blueberry.kubism.ku.dk>


The bug repository will be down briefly (I hope), due to a hardware
upgrade.   

	-p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Tue Aug  7 14:17:52 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Tue, 07 Aug 2001 09:17:52 -0400
Subject: [Rd] Next release of R, August 31st
References: <x2ae1f3oob.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B6FEA80.EE667BEF@umsanet.edu.bo>

Hola!

A problem I have had for some versions now: When using R html help,
different browsers are started on different machines. On one machine, it
starts the opera browser, where html search not functions. On my home
machine (with a new version of win98), it insists on starting M$
internet
explorer, even though netscape is defined as default (when cliking on
the relevant help files in "explorador de windows", netscape opens). On
still
another machine, we have two different versions of netscape installed
(4.7 and 6.?, ?), and R insist on using the old version. Would
there be a good idea to define browser as an option(), so the exact
location of the .exe can be defined?

Thanks, Kjetil.

Peter Dalgaard BSA wrote:
> 
> I'm trying to make a habit of announcing upcoming releases on r-devel,
> to give package maintainers a chance of staying in sync, and to
> encourage everyone to report bugs in the prerelease versions.
> 
> So: R-1.3.1 is scheduled for release on August 31st. In order to be
> able to get a solid round of testing on different platforms,
> maintainers of the group of recommended packages are requested to
> respect a feature freeze starting on August 24th. This means that only
> critical bugfixes should go into these packages. The list of
> recommended packages are (hope I didn't forget any...)
> 
>   KernSmooth
>   VR
>   boot
>   cluster
>   foreign
>   nlme
>   rpart
>   survival
>   mgcv
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  7 14:27:43 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 7 Aug 2001 14:27:43 +0100 (BST)
Subject: [Rd] Next release of R, August 31st
In-Reply-To: <3B6FEA80.EE667BEF@umsanet.edu.bo>
Message-ID: <Pine.LNX.4.31.0108071423490.11379-100000@gannet.stats>

On Tue, 7 Aug 2001, kjetil halvorsen wrote:

> Hola!
>
> A problem I have had for some versions now: When using R html help,
> different browsers are started on different machines. On one machine, it
> starts the opera browser, where html search not functions.

(Should do if Java support is installed: did when I tested.)

On my home
> machine (with a new version of win98), it insists on starting M$
> internet
> explorer, even though netscape is defined as default (when cliking on
> the relevant help files in "explorador de windows", netscape opens). On
> still
> another machine, we have two different versions of netscape installed
> (4.7 and 6.?, ?), and R insist on using the old version. Would
> there be a good idea to define browser as an option(), so the exact
> location of the .exe can be defined?

No. It's done by the OS facilities, and launches whichever browser is set
via the file associations (that is if you double-click on a .html file).
There is no way to do this via .exe's (which is why Unix R is tied to
Netscape 4.x).

This works here correctly for IE or Netscape on lots of different
machines.  You need to get your file associations sorted out.  Sorry, but
it is a Windows issue: we just use the official calls.

>
> Thanks, Kjetil.
>
> Peter Dalgaard BSA wrote:
> >
> > I'm trying to make a habit of announcing upcoming releases on r-devel,
> > to give package maintainers a chance of staying in sync, and to
> > encourage everyone to report bugs in the prerelease versions.
> >
> > So: R-1.3.1 is scheduled for release on August 31st. In order to be
> > able to get a solid round of testing on different platforms,
> > maintainers of the group of recommended packages are requested to
> > respect a feature freeze starting on August 24th. This means that only
> > critical bugfixes should go into these packages. The list of
> > recommended packages are (hope I didn't forget any...)
> >
> >   KernSmooth
> >   VR
> >   boot
> >   cluster
> >   foreign
> >   nlme
> >   rpart
> >   survival
> >   mgcv
> >
> > --
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Tue Aug  7 18:05:27 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Tue, 07 Aug 2001 13:05:27 -0400
Subject: [Rd] Next release of R, August 31st
References: <Pine.LNX.4.31.0108071423490.11379-100000@gannet.stats>
Message-ID: <3B701FD7.3693B5CC@umsanet.edu.bo>



Prof Brian Ripley wrote:
> 
> On Tue, 7 Aug 2001, kjetil halvorsen wrote:
> 
> > Hola!
> >
> > A problem I have had for some versions now: When using R html help,
> > different browsers are started on different machines. On one machine, it
> > starts the opera browser, where html search not functions.
> 
> (Should do if Java support is installed: did when I tested.)

	Ill try again
> 
> On my home
> > machine (with a new version of win98), it insists on starting M$
> > internet
> > explorer, even though netscape is defined as default (when cliking on
> > the relevant help files in "explorador de windows", netscape opens).

On that macvhine, the file associations is set to netscape, and all
other ways to open a browser opens netscape, but R insists on
opening M$ internet explorer.

Kjetil.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  7 18:14:26 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 7 Aug 2001 18:14:26 +0100 (BST)
Subject: [Rd] Next release of R, August 31st
In-Reply-To: <3B701FD7.3693B5CC@umsanet.edu.bo>
Message-ID: <Pine.GSO.4.31.0108071809150.13622-100000@toucan.stats>

On Tue, 7 Aug 2001, kjetil halvorsen wrote:

>
>
> Prof Brian Ripley wrote:
> >
> > On Tue, 7 Aug 2001, kjetil halvorsen wrote:
> >
> > > Hola!
> > >
> > > A problem I have had for some versions now: When using R html help,
> > > different browsers are started on different machines. On one machine, it
> > > starts the opera browser, where html search not functions.
> >
> > (Should do if Java support is installed: did when I tested.)
>
> 	Ill try again
> >
> > On my home
> > > machine (with a new version of win98), it insists on starting M$
> > > internet
> > > explorer, even though netscape is defined as default (when cliking on
> > > the relevant help files in "explorador de windows", netscape opens).
>
> On that macvhine, the file associations is set to netscape, and all
> other ways to open a browser opens netscape, but R insists on
> opening M$ internet explorer.

R knows absolutely nothing about this `M$ internet explorer'. It calls
the Windows API call ShellExecute(). Looks like your machine has a corrupt
Registry.

As I said before, R calls the official Windows API call and what happens
then is not our responsibility.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug  7 18:37:12 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2001 19:37:12 +0200
Subject: [Rd] bugs.r-project.org down for a while
In-Reply-To: <x2elqot6i8.fsf@blueberry.kubism.ku.dk>
References: <x2elqot6i8.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2zo9b4vqv.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> The bug repository will be down briefly (I hope), due to a hardware
> upgrade.   

Apparently functional again, and I have no obvious reason to reboot
the system for a while. Let me know if something went wrong.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From htang@hpl.hp.com  Tue Aug  7 20:14:51 2001
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Tue, 7 Aug 2001 21:14:51 +0200 (MET DST)
Subject: [Rd] cannot assign to NULL dimnames (PR#1042)
Message-ID: <200108071914.VAA01546@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.3.0
OS: GNU/Linux (Debian unstable)
Submission from: (NULL) (192.6.19.124)


Hi all,

    I am not sure this is a bug rather than an intentional design, but here
goes:
If I do

> a <- matrix(1:4, nrow=2)
> dimnames(a)[[1]] <- c("a", "b")

I get the following error message because dimnames(a) is NULL:

Error: more elements supplied than there are to replace

What is the proper way to do this?  I know this works:

> dimnames(a) <- list(c("a", "b"), NULL)

   Incidentally, in SPlus, I can assign to NULL dimnames.

Thanks,
Hsiu-Khuern.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  7 20:33:10 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 Aug 2001 21:33:10 +0200 (MET DST)
Subject: [Rd] cannot assign to NULL dimnames (PR#1042)
Message-ID: <200108071933.VAA01601@pubhealth.ku.dk>

On Tue, 7 Aug 2001 htang@hpl.hp.com wrote:

> Full_Name: Hsiu-Khuern Tang
> Version: 1.3.0
> OS: GNU/Linux (Debian unstable)
> Submission from: (NULL) (192.6.19.124)
>
>
> Hi all,
>
>     I am not sure this is a bug rather than an intentional design, but here
> goes:

None of the above.

> If I do
>
> > a <- matrix(1:4, nrow=2)
> > dimnames(a)[[1]] <- c("a", "b")
>
> I get the following error message because dimnames(a) is NULL:
>
> Error: more elements supplied than there are to replace

Which is a correct error message.

> What is the proper way to do this?

rownames(a) <- c("a", "b")


> I know this works:
>
> > dimnames(a) <- list(c("a", "b"), NULL)
>
>    Incidentally, in SPlus, I can assign to NULL dimnames.


Really?  Your own example fails in the versions I have to hand:

S-PLUS 3.4 gives

> dimnames(a)[[1]] <- c("a", "b")
Error in dimnames(a) <- .A0: data of mode character can't be used as
dimnames
        (need a list)
In addition: Warning messages:
  Replacement length not a multiple of number of elements to replace in:
.A0[[1
        ]] <- .A1
Dumped

and S-PLUS 6.0 gives

> dimnames(a)[[1]] <- c("a", "b")
Problem in dimnames(a) <- .A0: Invalid length (1) for dimnames attribute;
needs to be 2

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From buhr@stat.wisc.edu  Tue Aug  7 21:38:04 2001
From: buhr@stat.wisc.edu (buhr@stat.wisc.edu)
Date: Tue, 7 Aug 2001 22:38:04 +0200 (MET DST)
Subject: [Rd] R 1.3.0 bug: after "y _ 10; x[[1]] _ y", assigning to "y[1]" modifies "x" (PR#1043)
Message-ID: <200108072038.WAA01720@pubhealth.ku.dk>

After a list element has been assigned from a vector variable,
assigments to elements of the original vector variable modify the copy
stored in the list as well.

Here's a transcript illustrating the problem:

        R : Copyright 2001, The R Development Core Team
        Version 1.3.0  (2001-06-22)

        [ . . . ]

        > x _ list()
        > y _ 10
        > x[[1]] _ y
        > x
        [[1]]
        [1] 10

        > y[1] _ 20   # should only modify "y"
        > x
        [[1]]
        [1] 20        # ACK!  we modified "x", too

        > 

Kevin <buhr@stat.wisc.edu>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pleu@hotmail.com  Tue Aug  7 21:42:08 2001
From: pleu@hotmail.com (pleu@hotmail.com)
Date: Tue, 7 Aug 2001 22:42:08 +0200 (MET DST)
Subject: [Rd] Polymarsall.c (PR#1044)
Message-ID: <200108072042.WAA01762@pubhealth.ku.dk>

Full_Name: Paul Leu
Version: 1.2.3
OS: Windows NT
Submission from: (NULL) (12.2.142.7)


There is a bug in the polymars code.  

Line 655   m=m+k-1;

ought to be moved in front of the for loop in line 652 or else the levels array
will go out of bounds in the loop.

This does not seem to cause any errors in R, but caused crashes when I attempted
to link the file to PV-wave.  

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug  7 21:54:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2001 22:54:53 +0200
Subject: [Rd] R 1.3.0 bug: after "y _ 10; x[[1]] _ y", assigning to "y[1]" modifies "x" (PR#1043)
In-Reply-To: <200108072038.WAA01720@pubhealth.ku.dk>
References: <200108072038.WAA01720@pubhealth.ku.dk>
Message-ID: <x28zgvr3oi.fsf@blueberry.kubism.ku.dk>

buhr@stat.wisc.edu writes:

> After a list element has been assigned from a vector variable,
> assigments to elements of the original vector variable modify the copy
> stored in the list as well.
> 
> Here's a transcript illustrating the problem:
> 
>         R : Copyright 2001, The R Development Core Team
>         Version 1.3.0  (2001-06-22)
> 
>         [ . . . ]
> 
>         > x _ list()
>         > y _ 10
>         > x[[1]] _ y
>         > x
>         [[1]]
>         [1] 10
> 
>         > y[1] _ 20   # should only modify "y"
>         > x
>         [[1]]
>         [1] 20        # ACK!  we modified "x", too
> 
>         > 
> 
> Kevin <buhr@stat.wisc.edu>

Confirmed with 1.3.0-patched on RedHat 7.1. For easier reproduction:

x <- list()
y <- 10
x[[1]] <- y
x
y[1] <- 20   # should only modify "y"
# y <- 20 # Works OK with this instead
x
 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Wed Aug  8 01:08:00 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Tue, 7 Aug 2001 19:08:00 -0500
Subject: [Rd] R 1.3.0 bug: after "y _ 10; x[[1]] _ y", assigning to "y[1]" modifies "x" (PR#1043)
In-Reply-To: <x28zgvr3oi.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Tue, Aug 07, 2001 at 10:54:53PM +0200
References: <200108072038.WAA01720@pubhealth.ku.dk> <x28zgvr3oi.fsf@blueberry.kubism.ku.dk>
Message-ID: <20010807190800.A6993@nokomis.stat.umn.edu>

On Tue, Aug 07, 2001 at 10:54:53PM +0200, Peter Dalgaard BSA wrote:
> buhr@stat.wisc.edu writes:
> 
> Confirmed with 1.3.0-patched on RedHat 7.1. For easier reproduction:
> 
> x <- list()
> y <- 10
> x[[1]] <- y
> x
> y[1] <- 20   # should only modify "y"
> # y <- 20 # Works OK with this instead
> x
>  

Should be fixed.  The particular branch in
subassign.c:SubassignTypeFix did not duplicate the RHS when it is
NAMED--I added that on R-1-3-patches.

I've looked briefly at the subassign code before and had the nagging
feeling that there may be several places where this sort of change is
needed but I haven't had the stomach to look carefully.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Wed Aug  8 03:23:20 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Tue, 7 Aug 2001 21:23:20 -0500
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <87g0bjdbwl.fsf@jeeves.blindglobe.net>
References: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>
 <x2wv4wf10t.fsf@blueberry.kubism.ku.dk>
 <87g0bjdbwl.fsf@jeeves.blindglobe.net>
Message-ID: <15216.41624.175567.86470@sonny.eddelbuettel.com>


[ Sorry for chiming in late, but was off email when this thread started ] 

  "Tony" == A J Rossini <rossini@blindglobe.net> writes:
  Peter> "Peter" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
  Peter> later. Whatever happened to the internal Debian discussions on
  Peter> creating a faster upgrade path for applications?

That is not the real problem. The real problem is (soon, hopefully: was) the
dependency on Atlas in Debian's r-base package, and the lack of Atlas libs
for architectures beyond i386, alpha and sparc. Because of the this, the last
pre-Atlas-as-default remained in the released distribution (aka "stable") as
release are required to contain the same package set across architectures.

However, the Atlas maintainer has a new scheme of defaulting to the blas
library.  Where atlas exists and is installed, it will automagically be used
instead. This way, no architectures should be held back (as blas exists on
almost all) but the main archs can still reap the benefit of fast blas
operations.

  Tony>  They created Woody/testing, which is a broken nightmare.

I could not disagree more. I am running testing on systems at home and work,
and am very, very pleased with it. I prefer this over unstable (where real
blowups occurred in the last few months). And I typically upgrade daily.

  Timothy> face after an apt-get.  Debian has a bad case of SADD (stable
  Timothy> attention deficit disorder).  None of the developers care much
  Timothy> about updating stable.  Its too much fun crashing unstable.  I

Blah. We have over 6000 packages, at least 13 architectures [1] and two
releases to support (as security backports are of course done).  And on top
of that you suggest we backport every package from unstable to stable?

As I said above, the situation with r-base is hopefully going to improve
soon. In the meantime, R packages are available from CRAN, including current
one compiled for "stable"

Dirk


[1] alpha, arm, hppa, hurd-i386, i386, ia64, m68k, mips, mipsel, powerpc,
s390, sh, sparc


-- 
Our mailserver had a hardware failure while we were gone during the 2nd half 
of July. I did not respond to a mail you sent then, or if you experienced a
a mail bounce, could you kindly resend it? Sorry for the inconvenience --Dirk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  8 08:01:07 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 8 Aug 2001 08:01:07 +0100 (BST)
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <15216.41624.175567.86470@sonny.eddelbuettel.com>
Message-ID: <Pine.GSO.4.31.0108080754290.22113-100000@auk.stats>

On Tue, 7 Aug 2001, Dirk Eddelbuettel wrote:

>
> [ Sorry for chiming in late, but was off email when this thread started ]
>
>   "Tony" == A J Rossini <rossini@blindglobe.net> writes:
>   Peter> "Peter" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
>   Peter> later. Whatever happened to the internal Debian discussions on
>   Peter> creating a faster upgrade path for applications?
>
> That is not the real problem. The real problem is (soon, hopefully: was) the
> dependency on Atlas in Debian's r-base package, and the lack of Atlas libs
> for architectures beyond i386, alpha and sparc. Because of the this, the last
> pre-Atlas-as-default remained in the released distribution (aka "stable") as
> release are required to contain the same package set across architectures.

Just for information, can someone tell me how Debian (which has a `i386'
port) can possibly use ATLAS properly?  I find that there are major
performance differences between versions of ATLAS tuned on different
Pentium II chips (PII-450 vs mobile PII-366, for example) so that a large
part of the performance gain goes if they are switched.

Reason for question: I might put out an ATLAS-equipped Windows version of R
if I had any idea how to produce a `i386' version of ATLAS.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Wed Aug  8 12:50:21 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Wed, 8 Aug 2001 06:50:21 -0500
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <Pine.GSO.4.31.0108080754290.22113-100000@auk.stats>
References: <15216.41624.175567.86470@sonny.eddelbuettel.com>
 <Pine.GSO.4.31.0108080754290.22113-100000@auk.stats>
Message-ID: <15217.10109.334750.86058@sonny.eddelbuettel.com>


  Brian>  Just for information, can someone tell me how Debian (which has a
  Brian> `i386' port) can possibly use ATLAS properly?  I find that there are
  Brian> major performance differences between versions of ATLAS tuned on
  Brian> different Pentium II chips (PII-450 vs mobile PII-366, for example)
  Brian> so that a large part of the performance gain goes if they are
  Brian> switched.

That is a problem, just as is cross-compilation. What is provided (for i386)
are three distinct packages for athlon, p3 and p4 sub-architectures.  The
README still advises users to optimise for their particular machines. 

Dirk

-- 
Our mailserver had a hardware failure while we were gone during the 2nd half 
of July. I did not respond to a mail you sent then, or if you experienced a
a mail bounce, could you kindly resend it? Sorry for the inconvenience --Dirk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug  8 18:08:00 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 8 Aug 2001 19:08:00 +0200 (MET DST)
Subject: [Rd] Palette changes on redraw (PR#1045)
Message-ID: <200108081708.TAA11359@pubhealth.ku.dk>

Try this

example(palette)

then trigger a redraw e.g. by resizing the window. Shouldn't the
palette be stored as part of the display list?

(This only happens because the palette was reset at the end of the
example, but still...)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Aug  8 21:37:46 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 09 Aug 2001 08:37:46 +1200
Subject: [Rd] Palette changes on redraw (PR#1045)
References: <200108081708.TAA11359@pubhealth.ku.dk>
Message-ID: <3B71A31A.8BB29F85@stat.auckland.ac.nz>

p.dalgaard@biostat.ku.dk wrote:
> 
> Try this
> 
> example(palette)
> 
> then trigger a redraw e.g. by resizing the window. Shouldn't the
> palette be stored as part of the display list?
> 
> (This only happens because the palette was reset at the end of the
> example, but still...)

I could argue either way on this.

I agree that its nasty to have plot colours change in mid-stream,
but I suspect that adding the palette to the display list may not
be the "right" solution.

A different approach would be to map the colour indices (and names)
to RGB values at a slightly higher level.  That way it would be the
RGB values which would be captured in the display list, not the
indices.

[ I'm afraid that I think that the whole display list mechanism is
  "wrong".  We need a much higher level way of describing plots. ]

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  9 16:44:23 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 9 Aug 2001 16:44:23 +0100 (BST)
Subject: No subject
Message-ID: <Pine.LNX.4.31.0108091640220.8965-100000@gannet.stats>

Philippe Grosjean raised the question of transparency in the context of
writing Windows metafiles, but it has come up before for bitmapped
graphics.

I've taken a look in the sources, and what we do now is inconsistent.
The postscript/xfig/pdf devices do not paint the background iff it is
"white".  All the screen devices always paint the background, as do
the bitmap devices and all the Windows devices (including writing to
metafile and to the printer).

I think this is unsatisfactory, and inconsistent with the way
colour is handled for filled objects (rectangles and circles).
Not painting a white background is also undocumented!

For 1.3.1 I think we should document this, and alter win.metafile and
win.printer to make a white background mean transparent. (I've tested
that, and it works.)

However, for the future (1.4.x), I think we should handle "white" and
"transparent" differently, and have bg default to "transparent" for
all devices.  A quick look shows that this is would be easy, as only
24 bits of the rcolor type are used.  So would there be an objections
to using a bit (or a single value) of the upper byte to denote
"transparent"?  (Actually, Peter D has 0xffffffff in use as invalid,
but that's more bits than are needed.)  For consistency "transparent"
should be an alternative to NA in the fill routines, which means that
the obvious rcolor value is (unsigned) NA_INTEGER.

One question then is what bg="transparent" would mean for a screen
device. I think it should mean "white", but the difference would
emerge if the device was copied.  An alternative for the windows()
device (which can have a canvas larger than the device region) would
be the canvas colour (default grey50).  In that case one might want a
default of "white".

Clearly some thought would be needed to get the png devices to handle
transparency, but it should be doable.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmiddleton@fisheries.gov.fk  Thu Aug  9 21:32:00 2001
From: dmiddleton@fisheries.gov.fk (dmiddleton@fisheries.gov.fk)
Date: Thu, 9 Aug 2001 22:32:00 +0200 (MET DST)
Subject: [Rd] bug (and fix) in seq.POSIXt (PR#1046)
Message-ID: <200108092032.WAA20524@pubhealth.ku.dk>


I can't reach r-project.org at the moment so cannot check whether this
is a known bug.

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    3.0            
year     2001           
month    06             
day      22             
language R


The help page for seq.POSIXt states that the "by" argument can be
specified in several ways, including "A character string, containing one
of "sec", "min", "hour", "day", "week", "month" or "year". This can
optionally be preceded by an integer and a space".  I have found that
preceding the character string by an integer and space only works for
months and years.

The solution (or my solution at any rate) is to change 

        if (valid <= 5) 
            by <- c(1, 60, 3600, 86400, 7 * 86400)[valid]

to

        if (valid <= 5) {
            by <- c(1, 60, 3600, 86400, 7 * 86400)[valid]
	    if (length(by2) == 2) by <- by * as.integer(by2[1])
	}

in the seq.POSIXt code.

Thanks to those who worked to add the DateTimeClasses.  I have only
started making use of these recently, but am finding them very useful.

David Middleton

Dr David A. J. Middleton, Stock Assessment Scientist
Fisheries Department, Falkland Islands Government
Stanley, Falkland Islands
Tel: +500 27260  Fax +500 27265  Email: dmiddleton@fisheries.gov.fk
Web: http://www.falklandislands.com/business/fisheries.htm


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  9 23:21:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Aug 2001 00:21:53 +0200
Subject: [Rd] bug (and fix) in seq.POSIXt (PR#1046)
In-Reply-To: <200108092032.WAA20524@pubhealth.ku.dk>
References: <200108092032.WAA20524@pubhealth.ku.dk>
Message-ID: <x2ofposwla.fsf@blueberry.kubism.ku.dk>

dmiddleton@fisheries.gov.fk writes:

> I can't reach r-project.org at the moment so cannot check whether this
> is a known bug.

You mean bugs.r-project.org (machines in the r-project.org domain are
spread over four different countries or more...).

It's up and running but it seems that communications are being blocked
somewhere along the way. Several nearby webservers are unreachable
too. Looks like a selective block on the HTTP port -- I wouldn't be
surprised if it turns out to be related to the Code Red worm...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 10 07:45:52 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 10 Aug 2001 08:45:52 +0200 (MET DST)
Subject: [Rd] [<-.data.frame bug (PR#1047)
Message-ID: <200108100645.IAA22935@pubhealth.ku.dk>

The following gives an error

test <- df <- data.frame(x=1:10, y=11:20)
test[] <- lapply(df, factor)
Error in "[<-.data.frame"(*tmp*, , value = lapply(df, factor)) : 
        Argument "i" is missing, with no default

It is correct S code, and works in S+3.4 and 6.0.


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian@maths.uwa.edu.au  Fri Aug 10 09:24:05 2001
From: adrian@maths.uwa.edu.au (adrian@maths.uwa.edu.au)
Date: Fri, 10 Aug 2001 10:24:05 +0200 (MET DST)
Subject: [Rd] bug in dummy.coef.lm? (PR#1048)
Message-ID: <200108100824.KAA24354@pubhealth.ku.dk>

Hi - 
I'm running R 1.3.0 on i686-pc-linux-gnu

	> rm(x, y, z)
	> df <- data.frame(x=1:20,y=1:20,z=factor(1:20 <= 10))

dummy.coef falls over:

	> dummy.coef.lm(lm(y ~ z * poly(x,1), data=df))
	Error in poly(x, 1): Object "x" not found
	> dummy.coef.lm(lm(y ~ z * I(x), data=df))
	Error in unique(c("AsIs", class(x))): Object "x" not found

but works OK with:
	> dummy.coef.lm(lm(y ~ z * x, data=df))
	> dummy.coef.lm(lm(y ~ poly(x,1), data=df))
	> dummy.coef.lm(lm(y ~ I(x), data=df))
	
	> x <- df$x
	> y <- df$y
	> z <- df$z
	> dummy.coef.lm(lm(y ~ z * poly(x,1)))
	> dummy.coef.lm(lm(y ~ z * I(x)))

cheers
----
Adrian Baddeley, Mathematics & Statistics, University of Western Australia
		<http://maths.uwa.edu.au/~adrian/>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 10 12:56:02 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 10 Aug 2001 12:56:02 +0100 (BST)
Subject: [Rd] bug in dummy.coef.lm? (PR#1048)
In-Reply-To: <200108100824.KAA24354@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0108101251250.31406-100000@gannet.stats>

On Fri, 10 Aug 2001 adrian@maths.uwa.edu.au wrote:

> Hi -
> I'm running R 1.3.0 on i686-pc-linux-gnu
>
> 	> rm(x, y, z)
> 	> df <- data.frame(x=1:20,y=1:20,z=factor(1:20 <= 10))
>
> dummy.coef falls over:
>
> 	> dummy.coef.lm(lm(y ~ z * poly(x,1), data=df))
> 	Error in poly(x, 1): Object "x" not found
> 	> dummy.coef.lm(lm(y ~ z * I(x), data=df))
> 	Error in unique(c("AsIs", class(x))): Object "x" not found
>
> but works OK with:
> 	> dummy.coef.lm(lm(y ~ z * x, data=df))
> 	> dummy.coef.lm(lm(y ~ poly(x,1), data=df))
> 	> dummy.coef.lm(lm(y ~ I(x), data=df))
>
> 	> x <- df$x
> 	> y <- df$y
> 	> z <- df$z
> 	> dummy.coef.lm(lm(y ~ z * poly(x,1)))
> 	> dummy.coef.lm(lm(y ~ z * I(x)))

Not for me it doesn't ...

This is a known design problem: it's been like it for three years.
I think I know how to solve it ....

Note: ?dummy.coef says

     There will be
     little point in using `dummy.coef' for `contr.treatment'
     contrasts, as the missing coefficients are by definition zero.

and what are the default contrasts in R?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Aug 10 17:49:33 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 10 Aug 2001 09:49:33 -0700 (PDT)
Subject: [Rd] re: transparency
In-Reply-To: <Pine.LNX.4.31.0108091640220.8965-100000@gannet.stats>
Message-ID: <Pine.A41.4.33.0108100943360.8708-100000@homer01.u.washington.edu>

On Thu, 9 Aug 2001, Prof Brian Ripley wrote:

> However, for the future (1.4.x), I think we should handle "white" and
> "transparent" differently, and have bg default to "transparent" for
> all devices.  A quick look shows that this is would be easy, as only
> 24 bits of the rcolor type are used.  So would there be an objections
> to using a bit (or a single value) of the upper byte to denote
> "transparent"?  (Actually, Peter D has 0xffffffff in use as invalid,
> but that's more bits than are needed.)  For consistency "transparent"
> should be an alternative to NA in the fill routines, which means that
> the obvious rcolor value is (unsigned) NA_INTEGER.

Definitely transparency would be very useful, and I think a bit in the
upper byte is a good place to store it.

> One question then is what bg="transparent" would mean for a screen
> device. I think it should mean "white", but the difference would
> emerge if the device was copied.  An alternative for the windows()
> device (which can have a canvas larger than the device region) would
> be the canvas colour (default grey50).  In that case one might want a
> default of "white".

If "transparent" is to be the default then I think it should show up as
white on screen (at least by default)

It would be nice if a canvas color were available for other screen
devices, to allow easier previewing of transparent graphics against
different background colors.  It's obviously not that important, since you
can always plot the graph against a filled background of that color, but
it would be convenient if it isn't too hard. That is, the default color
would be set by some sort of options(canvas.color) that would default to
eg "grey50" or "white".

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 10 18:13:17 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Aug 2001 19:13:17 +0200
Subject: [Rd] re: transparency
In-Reply-To: <Pine.A41.4.33.0108100943360.8708-100000@homer01.u.washington.edu>
References: <Pine.A41.4.33.0108100943360.8708-100000@homer01.u.washington.edu>
Message-ID: <x2lmkrx2he.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On Thu, 9 Aug 2001, Prof Brian Ripley wrote:
> 
> > However, for the future (1.4.x), I think we should handle "white" and
> > "transparent" differently, and have bg default to "transparent" for
> > all devices.  A quick look shows that this is would be easy, as only
> > 24 bits of the rcolor type are used.  So would there be an objections
> > to using a bit (or a single value) of the upper byte to denote
> > "transparent"?  (Actually, Peter D has 0xffffffff in use as invalid,
> > but that's more bits than are needed.)  For consistency "transparent"
> > should be an alternative to NA in the fill routines, which means that
> > the obvious rcolor value is (unsigned) NA_INTEGER.
> 
> Definitely transparency would be very useful, and I think a bit in the
> upper byte is a good place to store it.

And if must be (and I remember this correctly), the "magic" 0xffffffff
is only in there to prevent color settings to carry from on page to
the next and breaking the Document Structuring conventions. If so, it
can be replaced with internal driver flags indicating whether there
was a (say) setbg call earlier on the page or not.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 10 18:30:48 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Aug 2001 19:30:48 +0200
Subject: [Rd] Bug repository
Message-ID: <x2hevfx1o7.fsf@blueberry.kubism.ku.dk>


As I suspected, the University blocks incoming HTTP traffic (port 80)
on our net segment, which is why bugs.r-project.org has been
unreachable. 

I've asked to have the line reopened for that machine. It hasn't
happened yet, but it shouldn't take too long.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Aug 10 22:40:42 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 11 Aug 2001 09:40:42 +1200
Subject: [Rd] re: transparency
References: <Pine.A41.4.33.0108100943360.8708-100000@homer01.u.washington.edu>
Message-ID: <3B7454DA.688106FC@stat.auckland.ac.nz>

Rather than a yes/no tranparency indicator, should we consider using
entire "unused byte" as an alpha-channel? (meaning that we specify
transparency as a value in [0,255]).  Many graphics/paint programs (e.g.
gimp) do this sort of thing.  Transparency would need to be device
dependent, but a simple yes/no transparency could be obtained by
thresholding the alpha value.  This would entail a change to way indices
into colour palettes are handled, but Peter D has pointed out that this
is currently broken anyway.

The rendering extension to the X server includes support for
transparency and this might be a place to look for how screen devices
should behave.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Fri Aug 10 23:37:08 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Fri, 10 Aug 2001 18:37:08 -0400 (EDT)
Subject: [Rd] re: transparency
In-Reply-To: <3B7454DA.688106FC@stat.auckland.ac.nz>
Message-ID: <Pine.GSO.4.10.10108101834440.14782-100000@hsph.harvard.edu>

IMHO that would be a Good Idea. It would also make people less inclined to
use color references to mean things other than color.

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

On Sat, 11 Aug 2001, Ross Ihaka wrote:

> Rather than a yes/no tranparency indicator, should we consider using
> entire "unused byte" as an alpha-channel? (meaning that we specify
> transparency as a value in [0,255]).  Many graphics/paint programs (e.g.
> gimp) do this sort of thing.  Transparency would need to be device
> dependent, but a simple yes/no transparency could be obtained by
> thresholding the alpha value.  This would entail a change to way indices
> into colour palettes are handled, but Peter D has pointed out that this
> is currently broken anyway.
> 
> The rendering extension to the X server includes support for
> transparency and this might be a place to look for how screen devices
> should behave.
> 
> 	Ross
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 10 23:37:52 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 10 Aug 2001 23:37:52 +0100 (BST)
Subject: [Rd] re: transparency
In-Reply-To: <3B7454DA.688106FC@stat.auckland.ac.nz>
Message-ID: <Pine.GSO.4.31.0108102324540.23420-100000@auk.stats>

On Sat, 11 Aug 2001, Ross Ihaka wrote:

> Rather than a yes/no tranparency indicator, should we consider using
> entire "unused byte" as an alpha-channel? (meaning that we specify
> transparency as a value in [0,255]).  Many graphics/paint programs (e.g.
> gimp) do this sort of thing.  Transparency would need to be device
> dependent, but a simple yes/no transparency could be obtained by
> thresholding the alpha value.  This would entail a change to way indices
> into colour palettes are handled, but Peter D has pointed out that this
> is currently broken anyway.
>
> The rendering extension to the X server includes support for
> transparency and this might be a place to look for how screen devices
> should behave.

I had thought of that, but it's a lot more complicated (and software does
not even agree which of 0 or 255 is transparent).  I think for now I am
going to look into using 0 and 255 (for solid and transparent) and leave
open the possibility of implementing the intermediate values. For example,
it may be my ignorance, but I don't know of support for alpha channels in
postscript or PDF (at least, PDF 1.3) or Windows Metafiles. PNG does have
alpha channel support, but simple transparency is more widely implemented.

An hour hacking has convinced me we can get something rather useful out of
this.


One design question, probably to Ross.  The postscript() device has a `bg'
argument, but all the others seem to use par("bg"), and that works on
postscript() too.  Is there any reason for this, or anything subtle I have
missed?   Thomas' suggestion to add a canvas colour arg to the
screen devices is a good one that looks easy to add.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sat Aug 11 02:40:33 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Fri, 10 Aug 2001 21:40:33 -0400 (EDT)
Subject: [Rd] re: transparency
In-Reply-To: <Pine.GSO.4.31.0108102324540.23420-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10108102130310.5464-100000@hsph.harvard.edu>



On Fri, 10 Aug 2001, Prof Brian D Ripley wrote:

> On Sat, 11 Aug 2001, Ross Ihaka wrote:
> 
> 
> I had thought of that, but it's a lot more complicated (and software does
> not even agree which of 0 or 255 is transparent).  I think for now I am
> going to look into using 0 and 255 (for solid and transparent) and leave
> open the possibility of implementing the intermediate values. For example,
> it may be my ignorance, but I don't know of support for alpha channels in
> postscript or PDF (at least, PDF 1.3) or Windows Metafiles. PNG does have
> alpha channel support, but simple transparency is more widely implemented.

Transparency is supported in Postscript Level 3 (I don't have my red book
handy, but its there) and will be supported in PDF 1.4, both of those are
full alpha channel transparency models.  WMF doesn't support transparency
in the sense that we're discussing here (it supports a variant of the
region transparency---an all or nothing ordeal). 

As far as interactive displays are concerned-- there probably won't be
true transparency as in the OS X sense where a window can have some
intrinsic alpha value, but most modern canvas packages (the GTK package
obviously and there is support in the Windows GDI API...sort of... I
haven't had a chance to look at GDI+, part of WinXP, but judging from its 
gratitous use in WinXP betas... :-) ) do support some notion of an alpha
channel, though as you point out they might decide 0xFF is opaque rather
than 0x00... This isn't that big of a problem, R would just pick one and
the device implementation should be responsible for subtracting properly
(or doing whatever needs be done to system palettes).

> 
> Brian
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.holena@reverecapital.com  Sun Aug 12 18:39:10 2001
From: john.holena@reverecapital.com (john.holena@reverecapital.com)
Date: Sun, 12 Aug 2001 19:39:10 +0200 (MET DST)
Subject: [Rd] predict.mlm: Error: Object "X" not found (PR#1049)
Message-ID: <200108121739.TAA06257@pubhealth.ku.dk>

predict.mlm fails with the error: Object "X" not found.

CAUSE:
looking at the predict.mlm function, we have:

x <- model.matrix(object, newdata)

two lines later, we have:

pred <- X[, piv, drop=FALSE] %*%  object$coefficients[piv,]


SOLUTION(?):
change the case of one of the x's, since it seems like what is meant in 
the second line is lowercase x...







platform: i686-pc-linux-gnu
arch: i686
os: linux-gnu
system: i686, linux-gnu
status
major 1
minor 3.0
year 2001
month 06
day 22
language R





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From htang@hpl.hp.com  Mon Aug 13 03:57:47 2001
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Mon, 13 Aug 2001 04:57:47 +0200 (MET DST)
Subject: [Rd] error in ksmooth C code + patch (PR#1050)
Message-ID: <200108130257.EAA07438@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.3.0
OS: GNU/Linux (Debian unstable)
Submission from: (NULL) (192.6.19.190)


Hi!

    If

x <- 1:4
y <- 1:4
z <- ksmooth(x, y, x.points=x)

I get for z

$x
[1] 1 2 3 4

$y
[1] 1.0 1.5 2.0 3.0

    In this case, the default bandwidth (0.5) makes it so that the neighborhood
of any point of x.points contains only one point in x, so z$y should be equal to
y.  I think the error is in
ksmooth.c:

Replace
	  if(x[i] < x0 - cutoff) imin = i;

by
	  if(x[i] < x0 - cutoff) {imin = i; continue;}


Best,
Hsiu-Khuern.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 13 09:51:12 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 13 Aug 2001 10:51:12 +0200
Subject: [Rd] Rnews 2001/3
Message-ID: <15223.38144.509412.705201@mithrandir.hornik.net>

Dear package author,

We are now accepting submissions for the third issue of the R
Newsletter.  For more information see

      http://cran.r-project.org/doc/Rnews/

If you are the author of a package on CRAN and you would like to promote
it a little bit, or if you simply have an interesting application using
R, we hope you can find some time to write a short article on it.  We
suggest that it be approximately 2 pages or less.  The idea of the
newsletter is that it be interesting to R users without being too
technical.  For example an article describing a package could begin by
briefly outlining the statistical background and go on to demonstrate
the usage on some typical data set.  Of course graphics are more than
welcome!

Bill Venables is also encouraging submissions to the more specialist
Programmer's Niche column.  In this case the technical level could be a
little higher, of course, but not necessarily: ingeniousness is the key.

Instructions for authors can be found in ``Writing Articles for R News''
in the first issue of Rnews; more detailed instructions will shortly be
available on the web page.  Remember that submissions have to be in
LaTeX, and that graphics are preferred in PDF or EPS format.  (Bitmaps
like JPG are also OK but please keep in mind that those cannot be scaled
easily and hence might look ugly in the final version.)

The deadline for submissions is

	 September 14, 2001

Keep the contributions rolling in!

For the Editorial Board,
-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From info@eminidaytrading.com  Mon Aug 13 14:32:12 2001
From: info@eminidaytrading.com (info@eminidaytrading.com)
Date: Mon, 13 Aug 2001 15:32:12 +0200 (MET DST)
Subject: [Rd] erappin' - daily morning update 8-13-01 (PR#1051)
Message-ID: <200108131332.PAA13985@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_002D_01C123D8.F95B41A0
Content-Type: text/plain;
        charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

erappin' - daily morning update


----------------------------------------------------------------------------
----

 BLEAK ECONOMIC PICTURE

      We got a mixed bag of reports by retailers at the end of last week. As
you know, retail sales are a key element to this economy's growth as
continued consumer spending is necessary to remain out of a recession.
Market analysts are hoping consumers will be spending part of their $40
billion tax refund in the coming months. Consumer spending is the only part
of this economy that is still stagnating without reflecting signs of this
slowing economy...for now. This week, we get several clues on the latest
economic condition, on top of the consumer spending reports that will give
the market a further indication how they are coping with the weakening job
market. Analysts are expecting today's Retail Sales report to come in -0.2%.

      Earlier last week, the Fed Beige Book, even though limited in its
number of anecdotes, showed a slowing factory sector, flat to falling bank
loan demand, and most importantly, retail sales below plan. Pretty much all
U.S. regions are presenting a picture of "slow growth or lateral movement in
economic activity" over the past few months. The economy keeps touching that
bottom without showing any improvements. On August 7, we had Chicago Fed
President Moskow citing that, "an underperforming economy may be rare, but
it is nothing new. What is different today are the mixed signals we see in
the marketplace. The combination of weaknesses and strengths and risks is
both unusual and challenging."


            Symbol Close High Low  Gain/Loss
            SPU01 1191.20 1197.50 1171.50  3.40
            ESU01 1191.25 1197.50 1172.00  3.50
            NDU01 1624.00 1652.50 1581.00  15.50
            NQU01 1624.00 1652.50 1582.50  15.50
            DOW 10416.25 10433.46 10197.32  117.69
            NASDAQ 1956.47 1967.03 1915.99  6.85
            SPX 1190.16 1193.33 1169.55  6.73
            SOX 593.05 595.63 572.29  7.16
            VIX 22.81 24.91 22.68  0.83


      TRADING

      We have seen this market trade in quite the range these past few
months (Nasdaq 2000-2300). Unless we are getting something different than
the clouded visibility companies are reporting, some economic data showing
signs of a bottom, we will not be trading outside that range. Going into the
weekend, we saw a technical rather than a fundamental-based rally. Traders
want more than just reports telling them there is no worry about inflation.
It is time for some reports saying there is no worry about this economy
slowing any further! For now, economic news is not showing signs of
stabilization so traders will remain anxious about the timing of the
economic turnaround hoping that the next data reports are giving them reason
to believe it is sooner rather than later.

      Curious to see how this week's earnings come in for Hewlett-Packard,
Applied Materials and Dell and of course how they see next quarter's
numbers. HWP is expecting a 91% drop in earnings per share, Applied
Materials a 97% drop while Dell sees a 27% step back in EPS.


      EUROPE'S SLOWING ECONOMY

      The European Central Bank (ECB) indicated in its August report that it
might need to cut interest rates again. So far, the ECB has been reluctant
to do so as they were experiencing troubles with rising inflation. Latest
economic reports are indicating a pause in inflationary pressures, which
introduces the possibility now of another 25 basis point rate cut as soon as
August 31st. Especially given Europe's largest economy, Germany, is
reporting weak industrial production, factory orders, and factory orders
besides its seventh consecutive rise in unemployment.

      It seems that central banks around the world are now in the race to
reverse direction on their slowing economies. Greenspan and company have cut
interest rates six times so far this year, with possibly another two coming
up later this quarter, the Bank of England has reduced them four times while
the Bank of Japan.... well they are still stuck with their zero interest
rate situation. Based on the economic data we have seen these past few
months, it does not look like Europe's economic bottom is in sight any time
soon either. Last week, the ECB released a statement saying, "there is an
increased uncertainty surrounding economic growth in the euro area in the
second half of 2001," and they might feel the effects of, "deteriorating
growth performances in several other regions of the world."

      On Friday, back on U.S. soil, the Chicago Board of Trade's Fed Fund
Futures are indicating a 100% chance of a 25 basis point rate cut to 3.50%
at the next FOMC meeting on August 21st and even a slight 18% probability of
a 50 bp cut at that time. Given a cut to 3.50% end of August, traders are
expecting with an 88% probability another 25 bp cut to 3.25% by year end.

      Have a great trading day -- and honor those stops !!


      If you would like to signup for a free trial of our interactive
trading room called the epit, where trading signals are posted in realtime
throughout the day, please fill out form at
http://www.eminidaytrading.com/eminisignup.html All questions regarding the
epit service, please email info@eminidaytrading.com . Erap service is not an
investment advisory service, nor a registered investment advisor or broker
and does not purport to tell or suggest which securities members should buy
or sell for themselves. Members should always check with their licensed
financial advisor and their tax advisor to determine the suitability of any
investment. You are currently subscribed to erap. To unsubscribe, please
send a blank email to erappers-unsubscribe-request@eminidaytrading.com

      Copyright 2001 by eminidaytrading Inc.
     Number 1
      08/13/2001

            Futures - The Basics
       Futures, the Basics - Are you a stock / option trader and have
considered trading futures but are constantly reminded how terribly risky
they are? If you are new to futures trading, then this session is a must as
emaster and emagine will cover the basics. What you need to know about
futures, how it differs from stocks & options trading and how to add them to
your trading arsenal.

            August 23rd and August 27th.


      Targets

      Both ES/NQ continue their downtrend. ES had a double bottom in the
1174-78 area which was briefly taken out, low 1172, before it bounced back.
However, until we make a clean break and close above 1235 level, we aren't
getting bullish. That area has been tested twice and failed. We have been
trading within this 1174-1233 range for over a month now. NQ has same story.
Even though it penetrated the upper trendline, it has resumed trend making a
new low of 1582.50. A break of this level could leave us testing 1550 and
1500 levels. We need a close above 1800 to get bullish.

            Intraday Epit Targets Hit
            ES  NQ
            1174.50  1604
            1188   1590
            1195.75   1619
            1631











------=_NextPart_000_002D_01C123D8.F95B41A0
Content-Type: text/html;
        charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>erappin' - daily morning update</TITLE><BASE=20
href=3Dhttp://www.eminidaytrading.com/erappin/erappin_081301a.html>
<META http-equiv=3Dcontent-type =
content=3Dtext/html;charset=3DISO-8859-1>
<META content=3D"MSHTML 5.50.4522.1800" name=3DGENERATOR></HEAD>
<BODY vLink=3D#ff00ff link=3D#ff00ff bgColor=3Dblack>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<HR>

<DIV align=3Dcenter><IMG height=3D120=20
src=3D"http://www.eminidaytrading.com/erappin/images/erappin_top.gif" =
width=3D580=20
useMap=3D#erappin_topb794dc2a border=3D0><MAP =
name=3Derappin_topb794dc2a><AREA=20
  shape=3DRECT coords=3D488,32,556,100><AREA shape=3DRECT =
coords=3D524,3,571,24=20
  href=3D"http://www.invest-store.com/eminidaytrading/"><AREA =
shape=3DRECT=20
  coords=3D461,3,509,23=20
  href=3D"http://www.eminidaytrading.com/eminisignup.html"><AREA =
shape=3DRECT=20
  coords=3D414,3,444,24 =
href=3D"http://www.eminidaytrading.com/epit/epit.html"><AREA=20
  shape=3DRECT coords=3D205,4,370,27 =
href=3D"http://www.eminidaytrading.com"><AREA=20
  shape=3DRECT coords=3D132,4,167,24 =
href=3D"mailto:info@eminidaytrading.com"><AREA=20
  shape=3DRECT coords=3D12,3,55,23=20
href=3D"http://www.eminidaytrading.com/main.html"></MAP>=20
<TABLE cellSpacing=3D0 cellPadding=3D14 width=3D560 bgColor=3D#ffffff =
border=3D0>
  <TBODY>
  <TR>
    <TD vAlign=3Dtop align=3Dleft width=3D370><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D4><B>BLEAK ECONOMIC PICTURE<BR><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D2>We =
got a mixed=20
      bag of reports by retailers at the end of last week. As you know, =
retail=20
      sales are a key element to this economy's growth as continued =
consumer=20
      spending is necessary to remain out of a recession. Market =
analysts are=20
      hoping consumers will be spending part of their $40 billion tax =
refund in=20
      the coming months. Consumer spending is the only part of this =
economy that=20
      is still stagnating without reflecting signs of this slowing =
economy...for=20
      now. This week, we get several clues on the latest economic =
condition, on=20
      top of the consumer spending reports that will give the market a =
further=20
      indication how they are coping with the weakening job market. =
Analysts are=20
      expecting today's Retail Sales report to come in =
-0.2%.<BR><BR>Earlier=20
      last week, the Fed Beige Book, even though limited in its number =
of=20
      anecdotes, showed a slowing factory sector, flat to falling bank =
loan=20
      demand, and most importantly, retail sales below plan. Pretty much =
all=20
      U.S. regions are presenting a picture of "slow growth or lateral =
movement=20
      in economic activity" over the past few months. The economy keeps =
touching=20
      that bottom without showing any improvements. On August 7, we had =
Chicago=20
      Fed President Moskow citing that, "an underperforming economy may =
be rare,=20
      but it is nothing new. What is different today are the mixed =
signals we=20
      see in the marketplace. The combination of weaknesses and =
strengths and=20
      risks is both unusual and challenging."<BR><BR></FONT>
      <P><FONT face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2>
      <TABLE cellSpacing=3D0 cellPadding=3D3 width=3D366 bgColor=3Dwhite =
border=3D0>
        <TBODY>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Symbol</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Close</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>High</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Low</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle></TD>
          <TD vAlign=3Dtop align=3Dleft><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2>Gain/Loss</FONT></B></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SPU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1191.20</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1197.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1171.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>3.40</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>ESU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1191.25</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1197.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1172.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>3.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NDU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1624.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1652.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1581.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>15.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NQU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1624.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1652.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1582.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>15.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>DOW</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10416.25</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10433.46</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10197.32</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>117.69</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NASDAQ</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1956.47</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1967.03</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1915.99</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>6.85</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SPX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1190.16</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1193.33</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1169.55</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>6.73</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SOX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>593.05</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>595.63</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>572.29</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>7.16</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>VIX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>22.81</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>24.91</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>22.68</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D13 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            =
size=3D2><B>0.83</B></FONT></TD></TR></TBODY></TABLE><BR><BR></FONT><FONT=
=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D4><B>TRADING<BR><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D2>We =
have seen this=20
      market trade in quite the range these past few months (Nasdaq =
2000-2300).=20
      Unless we are getting something different than the clouded =
visibility=20
      companies are reporting, some economic data showing signs of a =
bottom, we=20
      will not be trading outside that range. Going into the weekend, we =
saw a=20
      technical rather than a fundamental-based rally. Traders want more =
than=20
      just reports telling them there is no worry about inflation. It is =
time=20
      for some reports saying there is no worry about this economy =
slowing any=20
      further!&nbsp;For now, economic news is not showing signs of =
stabilization=20
      so traders will remain anxious about the timing of the economic =
turnaround=20
      hoping that the next data reports are giving them reason to =
believe it is=20
      sooner rather than later.<BR><BR>Curious to see how this week's =
earnings=20
      come in for Hewlett-Packard, Applied Materials and Dell and of =
course how=20
      they see next quarter's numbers. HWP is expecting a 91% drop in =
earnings=20
      per share, Applied Materials a 97% drop while Dell sees a 27% step =
back in=20
      EPS.<BR><BR><BR></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D4><B>EUROPE'S SLOWING ECONOMY<BR><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D2>The =
European=20
      Central Bank (ECB) indicated in its August report that it might =
need to=20
      cut interest rates again. So far, the ECB has been reluctant to do =
so as=20
      they were experiencing troubles with rising inflation. Latest =
economic=20
      reports are indicating a pause in inflationary pressures, which =
introduces=20
      the possibility now of another 25 basis point rate cut as soon as =
August=20
      31st. Especially given Europe's largest economy, Germany, is =
reporting=20
      weak industrial production, factory orders, and factory orders =
besides its=20
      seventh consecutive rise in unemployment.<BR><BR>It seems that =
central=20
      banks around the world are now in the race to reverse direction on =
their=20
      slowing economies. Greenspan and company have cut interest rates =
six times=20
      so far this year, with possibly another two coming up later this =
quarter,=20
      the Bank of England has reduced them four times while the Bank of=20
      Japan.... well they are still stuck with their zero interest rate=20
      situation. Based on the economic data we have seen these past few =
months,=20
      it does not look like Europe's economic bottom is in sight any =
time soon=20
      either. Last week, the ECB released a statement saying, "there is =
an=20
      increased uncertainty surrounding economic growth in the euro area =
in the=20
      second half of 2001," and they might feel the effects of, =
"deteriorating=20
      growth performances in several other regions of the =
world."<BR><BR>On=20
      Friday, back on U.S. soil, the Chicago Board of Trade's Fed Fund =
Futures=20
      are indicating a 100% chance of a 25 basis point rate cut to 3.50% =
at the=20
      next FOMC meeting on August 21st and even a slight 18% probability =
of a 50=20
      bp cut at that time. Given a cut to 3.50% end of August, traders =
are=20
      expecting with an 88% probability another 25 bp cut to 3.25% by =
year end.=20
      <BR><BR>Have a great trading day -- and honor those stops=20
      !!<BR><BR><BR></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular color=3Dblack =
size=3D1>If=20
      you would like to signup for a free trial of our interactive =
trading room=20
      called the epit, where trading signals are posted in realtime =
throughout=20
      the day, please fill out form at <A=20
      =
href=3D"http://www.eminidaytrading.com/eminisignup.htm">http://www.eminid=
aytrading.com/eminisignup.htm</A>l=20
      All questions regarding the epit service, please email <A=20
      =
href=3D"mailto:info@eminidaytrading.com">info@eminidaytrading.com</A> . =
Erap=20
      service is not an investment advisory service, nor a registered =
investment=20
      advisor or broker and does not purport to tell or suggest which =
securities=20
      members should buy or sell for themselves. Members should always =
check=20
      with their licensed financial advisor and their tax advisor to =
determine=20
      the suitability of any investment. You are currently subscribed to =
erap.=20
      To unsubscribe, please send a blank email to <A=20
      =
href=3D"mailto:erap@eminidaytrading.com">erappers-unsubscribe-request@emi=
nidaytrading.com<BR><BR></A><B>Copyright=20
      2001 by eminidaytrading Inc.</B></FONT> </P></TD>
    <TD vAlign=3Dtop align=3Dleft><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><B>Number=20
      1<BR>08/13/2001<BR><BR></B></FONT>
      <TABLE cellSpacing=3D0 cellPadding=3D5 width=3D125 border=3D0>
        <TBODY>
        <TR>
          <TD bgColor=3D#000000 colSpan=3D4><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>Futures - The =
Basics</B></FONT></TD></TR></TBODY></TABLE><IMG=20
      height=3D35=20
      =
src=3D"http://www.eminidaytrading.com/erappin/images/erap_basics.gif"=20
      width=3D125 border=3D0>=20
      <TABLE cellSpacing=3D0 cellPadding=3D5 width=3D125 border=3D0>
        <TBODY>
        <TR>
          <TD bgColor=3D#000000 colSpan=3D4><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ffffff=20
            size=3D1>Futures, the Basics - Are you a stock / option =
trader and=20
            have considered trading futures but are constantly reminded =
how=20
            terribly risky they are? If you are new to futures trading, =
then=20
            this session is a must as emaster and emagine will cover the =
basics.=20
            What you need to know about futures, how it differs from =
stocks=20
            &amp; options trading and how to add them to your trading=20
            arsenal.<BR><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ffffff=20
            size=3D2>August 23rd and August 27th</FONT></B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ffffff=20
            size=3D2><B>.</B></FONT></TD></TR></TBODY></TABLE><BR><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D1><BR></FONT><FONT =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
      color=3D#000000 size=3D2><B>Targets</B><B><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
      size=3D1><B><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>Both =
ES/NQ=20
      continue their downtrend. ES had a double bottom in the 1174-78 =
area which=20
      was briefly taken out, low 1172, before it bounced back. However, =
until we=20
      make a clean break and close above 1235 level, we aren't getting =
bullish.=20
      That area has been tested twice and failed. We have been trading =
within=20
      this 1174-1233 range for over a month now. NQ has same story. Even =
though=20
      it penetrated the upper trendline, it has resumed trend making a =
new low=20
      of 1582.50. A break of this level could leave us testing 1550 and =
1500=20
      levels. We need a close above 1800 to get bullish. <BR><BR>
      <TABLE cellSpacing=3D0 cellPadding=3D4 width=3D129 border=3D0>
        <TBODY>
        <TR>
          <TD bgColor=3D#000000 colSpan=3D4><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ffffff=20
            size=3D2><B>Intraday Epit Targets Hit</B></FONT></TD></TR>
        <TR>
          <TD width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>ES</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"></TD>
          <TD width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>NQ</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"></TD></TR>
        <TR>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>174.50</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><IMG height=3D13 =

            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>604</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D1><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></FONT></TD></TR>
        <TR>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>188</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0> </FONT></TD>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>590</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D1><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></FONT></TD></TR>
        <TR>
          <TD width=3D"50%"><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>1</FONT></B></FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>195.75</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0> </FONT></TD></FONT>
          <TD width=3D"50%"><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>1619</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0> </FONT></TD></TR></FONT>
        <TR>
          <TD width=3D"50%"></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"></TD>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>631</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 =
border=3D0></FONT></TD></TR></TBODY></TABLE></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D1><BR><BR></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
      =
size=3D1><BR><BR></FONT></FONT></FONT></FONT></FONT></FONT></FONT></TD></=
TR></TBODY></TABLE><IMG=20
height=3D81 =
src=3D"http://www.eminidaytrading.com/erappin/images/erappin_bottom.gif" =

width=3D559 useMap=3D#erappin_bottomb794de78=20
border=3D0><BR><BR><BR><BR></DIV></BODY></HTML>

------=_NextPart_000_002D_01C123D8.F95B41A0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Aug 14 09:09:18 2001
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 14 Aug 2001 10:09:18 +0200 (MET DST)
Subject: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
Message-ID: <200108140809.KAA19242@pubhealth.ku.dk>

Hi everyone,

I have noticed that is.vector returns FALSE if I attach
attributes:

> x <- c(a = 1, b = 2)
> attributes(x)
$names
[1] "a" "b"

> is.vector(x)
[1] TRUE
> attr(x, "fred") <- "happy"
> attributes(x)
$names
[1] "a" "b"

$fred
[1] "happy"

> is.vector(x)
[1] FALSE

This seems inconsistent to me, as "names" is itself an attribute
yet this does negate is.vector.  As the original x is clearly a
vector, albeit one with names, wouldn't it be consistent to allow
any attributes?  This appears to be the case for is.matrix ...

> x <- matrix(1:4, 2, 2)
> is.matrix(x)
[1] TRUE
> attributes(x)
$dim
[1] 2 2
> attr(x, "fred") <- "happy"
> x
     [,1] [,2]
[1,]    1    3
[2,]    2    4
attr(,"fred")
[1] "happy"
> is.matrix(x)
[1] TRUE

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 27
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 14 09:43:26 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 14 Aug 2001 10:43:26 +0200 (MET DST)
Subject: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
Message-ID: <200108140843.KAA19934@pubhealth.ku.dk>

This seems intentional.  as.vector(x) changes x, and is.vector should be a
test of no change.  It is in S:

>From S-PLUS 3.4:

       is.vector returns TRUE if x is a simple object of the mode
       specified, and FALSE otherwise.  If the mode is "any", any
       simple object will match,  that  is,  an  object  with  no
       attributes.   Note  that  a  list is typically a vector in
       this sense.

Note the `simple' in there.

R appears to allow names as attributes but nothing else, but does not
document this (except in the source code).  Anyone want to explain why R
is incompatible with S?  And why as.vector and is.vector are inconsistent?
(Note that the isas tests do not pick this up.)

This is a documentation bug, at least.


On Tue, 14 Aug 2001 J.C.Rougier@durham.ac.uk wrote:

> Hi everyone,
>
> I have noticed that is.vector returns FALSE if I attach
> attributes:
>
> > x <- c(a = 1, b = 2)
> > attributes(x)
> $names
> [1] "a" "b"
>
> > is.vector(x)
> [1] TRUE
> > attr(x, "fred") <- "happy"
> > attributes(x)
> $names
> [1] "a" "b"
>
> $fred
> [1] "happy"
>
> > is.vector(x)
> [1] FALSE
>
> This seems inconsistent to me, as "names" is itself an attribute
> yet this does negate is.vector.  As the original x is clearly a
> vector, albeit one with names, wouldn't it be consistent to allow
> any attributes?

Well, dim is an attribute, so you want an array to be a vector?

> This appears to be the case for is.matrix ...
>
> > x <- matrix(1:4, 2, 2)
> > is.matrix(x)
> [1] TRUE
> > attributes(x)
> $dim
> [1] 2 2
> > attr(x, "fred") <- "happy"
> > x
>      [,1] [,2]
> [1,]    1    3
> [2,]    2    4
> attr(,"fred")
> [1] "happy"
> > is.matrix(x)
> [1] TRUE
>
> Cheers, Jonathan.
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Patched
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 27
>  language = R
>
> Search Path:
>  .GlobalEnv, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 14 11:45:04 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Aug 2001 12:45:04 +0200
Subject: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
In-Reply-To: <200108140843.KAA19934@pubhealth.ku.dk>
References: <200108140843.KAA19934@pubhealth.ku.dk>
Message-ID: <x2d75y3opb.fsf@blueberry.kubism.ku.dk>


[R-bugs snipped from recipients]

ripley@stats.ox.ac.uk writes:

> R appears to allow names as attributes but nothing else, but does not
> document this (except in the source code).  Anyone want to explain why R
> is incompatible with S?  And why as.vector and is.vector are inconsistent?
> (Note that the isas tests do not pick this up.)

It was discussed during 1997 and 1998... Ross, Thomas, Kurt, and
Martin seem to have been involved at some point. I'm not up to a full
reconstruction of the discussion just now, though. One of the earliest
cases is in this note from Thomas on the R-alpha mailing list:

(excerpted)
----
On Mon, 7 Apr 1997, Ross Ihaka wrote:
>               What should is.vector do?
> 
<snip> 
> Essentially, everything in S is a vector unless it has attributes.
> This is utterly unreasonable!  Why should something stop being a
> vector because it has a names attribute attached.

There is method to this.  Something is a vector in S if as.vector() has 
no effect on it. This includes functions but excludes matrices, vectors 
with names, and data.frames.  You might then ask why as.vector() works 
the way it does and I would have no sensible explanation. A particularly 
bizarre example is
S> is.vector(lm)
T
S> is.vector(lm(y~x)$coef)
F
i.e., the lm() function is a vector but the coefficient vector isn't.
----
There was also some discussion in December 1998, between Kurt and
Martin, but I cannot see how it got resolved.

(I seem to remember that we had as.vector retaining names for a while,
but got burned by package porting(?). Very early versions of R had
is.vector returning true for anything that could be subscripted,
including matrices.) 

BTW: My list archives seem to go further back than the "official"
ones. Do we want to do anything about that? Unfortunately they are in
Gnus's mail directory format and have been respooled so they are
slightly out of numerical order.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Aug 14 18:36:26 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 14 Aug 2001 19:36:26 +0200
Subject: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
In-Reply-To: <x2d75y3opb.fsf@blueberry.kubism.ku.dk>
References: <200108140843.KAA19934@pubhealth.ku.dk>
 <x2d75y3opb.fsf@blueberry.kubism.ku.dk>
Message-ID: <15225.24986.517771.993107@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> [R-bugs snipped from recipients]

> ripley@stats.ox.ac.uk writes:

>> R appears to allow names as attributes but nothing else, but does not
>> document this (except in the source code).  Anyone want to explain why R
>> is incompatible with S?  And why as.vector and is.vector are inconsistent?
>> (Note that the isas tests do not pick this up.)

> It was discussed during 1997 and 1998... Ross, Thomas, Kurt, and
> Martin seem to have been involved at some point. I'm not up to a full
> reconstruction of the discussion just now, though. One of the earliest
> cases is in this note from Thomas on the R-alpha mailing list:

I only vaguely recall this.  Note however that this is in the FAQ:

   * Named vectors are considered vectors in R but not in S (e.g.,
     `is.vector(c(a = 1:3))' returns `FALSE' in S and `TRUE' in R).

I assume that way back then I argued that it was silly that is.vector
gave FALSE for c(a = 1) and TRUE for c(1).  I think my understanding
would now be different: I would think that as.vector/is.vector should
match what the `generator' vector() does, and that cannot set names.
Otoh it cannot really set data either ...

Just in case someone brings this one up as well: we also have a diff in
is.matrix on a data frame.  Splus 6 still has

> is.matrix(data.frame(x = 1:3))
[1] T

and in fact is.matrix <- function(x) length(dim(x)) == 2, but I am
strongly against that: I still think that

	if as.foo(x) is different from x then is.foo(x) must be false.

And that also `proves' that is.vector is wrong, as

R> x <- c(a = 1)
R> x
a 
1 
R> as.vector(x)
[1] 1
R> is.vector(x)
[1] TRUE

-k

> (excerpted)
> ----
> On Mon, 7 Apr 1997, Ross Ihaka wrote:
>> What should is.vector do?
>> 
> <snip> 
>> Essentially, everything in S is a vector unless it has attributes.
>> This is utterly unreasonable!  Why should something stop being a
>> vector because it has a names attribute attached.

> There is method to this.  Something is a vector in S if as.vector() has 
> no effect on it. This includes functions but excludes matrices, vectors 
> with names, and data.frames.  You might then ask why as.vector() works 
> the way it does and I would have no sensible explanation. A particularly 
> bizarre example is
S> is.vector(lm)
> T
S> is.vector(lm(y~x)$coef)
> F
> i.e., the lm() function is a vector but the coefficient vector isn't.
> ----
> There was also some discussion in December 1998, between Kurt and
> Martin, but I cannot see how it got resolved.

> (I seem to remember that we had as.vector retaining names for a while,
> but got burned by package porting(?). Very early versions of R had
> is.vector returning true for anything that could be subscripted,
> including matrices.) 

> BTW: My list archives seem to go further back than the "official"
> ones. Do we want to do anything about that? Unfortunately they are in
> Gnus's mail directory format and have been respooled so they are
> slightly out of numerical order.

> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Aug 14 21:29:48 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 14 Aug 2001 16:29:48 -0400
Subject: [Rd] R-devel.tar.gz
Message-ID: <3B798A3C.FF7DF041@bank-banque-canada.ca>

R-devel.tar.gz  seems to be missing from //fangorn.ci.tuwien.ac.at/R/src/devel.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 14 23:18:42 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Aug 2001 00:18:42 +0200
Subject: [Rd] R-devel.tar.gz
In-Reply-To: <3B798A3C.FF7DF041@bank-banque-canada.ca>
References: <3B798A3C.FF7DF041@bank-banque-canada.ca>
Message-ID: <x2pu9y70al.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> R-devel.tar.gz  seems to be missing from //fangorn.ci.tuwien.ac.at/R/src/devel.

However there is

http://fangorn.ci.tuwien.ac.at/R/src/devel/R-devel_2001-08-14.tar.gz

The current maintenance scheme for that directory does look a little
curious: We have R-devel.tar.bz2 pointing to the latest bzip2
compressed version and no similar pointer to the gzipped one, but
we keep 10 older versions in tar.gz format... Martin?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 15 08:41:51 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 15 Aug 2001 09:41:51 +0200
Subject: [Rd] R-devel.tar.gz
In-Reply-To: <x2pu9y70al.fsf@blueberry.kubism.ku.dk>
References: <3B798A3C.FF7DF041@bank-banque-canada.ca>
 <x2pu9y70al.fsf@blueberry.kubism.ku.dk>
Message-ID: <15226.10175.362134.42393@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
    >> R-devel.tar.gz  seems to be missing from //fangorn.ci.tuwien.ac.at/R/src/devel.

    PD> However there is

    PD> http://fangorn.ci.tuwien.ac.at/R/src/devel/R-devel_2001-08-14.tar.gz

    PD> The current maintenance scheme for that directory does look a little
    PD> curious: We have R-devel.tar.bz2 pointing to the latest bzip2
    PD> compressed version and no similar pointer to the gzipped one, but
    PD> we keep 10 older versions in tar.gz format... Martin?

We (Fritz and I) have changed the setup of this scheme a bit, now using
"dated" file names upon Fritz' request.  
We've always kept the 10 latest versions and always only the .tar.gz ones.
I think the new scheme does the same also for the bz2 ones 
(which can be considered a waste of disk space and I could well change back).

The transition phase (from one to the other scheme) lasts 10 days and we
are still in midst of it.  I saw no real reason for doing the transition
manually at once when it happens all automatically over the 10 days period.

The real new thing about it is that we now also snapshot the "R-ng"
[aka `R (next|new) generation'].  
However, dear "R-devel"ers please note that "R-ng" currently has nothing
interesting in it AFAIK and in fact is not even tracking "R-patched" or
"R-devel" ...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Aug 15 17:19:34 2001
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Wed, 15 Aug 2001 18:19:34 +0200 (MET DST)
Subject: [Rd] documented but missing from the code (PR#1054)
Message-ID: <200108151619.SAA10100@pubhealth.ku.dk>

In R-devel (Aug 15) I am getting some warnings
"Objects documented but missing from the code:"

The ones I have checked are definitely in the code, so I suspect there is a bug in
this check. I'm very busy today and then away until after the projected release of
the new version so I cannot follow up on this as carefully as I would like to. I
expect the problem is reproducible with dse from CRAN, though I have been testing
with my own working copy.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 15 18:30:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 15 Aug 2001 19:30:08 +0200 (MET DST)
Subject: [Rd] documented but missing from the code (PR#1054)
Message-ID: <200108151730.TAA10351@pubhealth.ku.dk>

On Wed, 15 Aug 2001 pgilbert@bank-banque-canada.ca wrote:

> In R-devel (Aug 15) I am getting some warnings
> "Objects documented but missing from the code:"
>
> The ones I have checked are definitely in the code, so I suspect there is a bug in
> this check. I'm very busy today and then away until after the projected release of
> the new version so I cannot follow up on this as carefully as I would like to. I
> expect the problem is reproducible with dse from CRAN, though I have been testing
> with my own working copy.

Until very recently this was true for objects in zzz.R. One example in dse
is scale.default, which is not in the code and is in the documentation
(incorrectly). Generated objects are (correctly) marked as not in the code.


R-devel does not have a projected release date, and is not the next version
planned (1.3.1 on August 31).  I'd guess its release is several months off.


BTW, is it you who is responsible for the scale generic in R?
dse has

      scale <- function(x, ..., scale = TRUE) UseMethod("scale")

as R did, and that is incompatible with scale.default (and hence S's
scale) which does not have a ... argument.  Adding one forces the
scale argument to be named and breaks a lot of ported code.

Your own scale methods are also incompatible with your own generic.
Try running checkMethods().

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From durso@hussle.harvard.edu  Wed Aug 15 21:21:22 2001
From: durso@hussle.harvard.edu (Brian D'Urso)
Date: Wed, 15 Aug 2001 16:21:22 -0400 (EDT)
Subject: [Rd] Computer Modern Fonts in R
Message-ID: <Pine.LNX.4.33.0108151605070.15434-100000@hussle.harvard.edu>

About a month ago I sent a message to the list about some changes which
could allow R to fully utilize the (La)TeX Computer Modern fonts. I didn't
get any replies indicating the changes would be accepted in some form,
what could be improved in them, or that the changes were not wanted.

The patches and other files needed are available from:
http://hussle.harvard.edu/~durso/CM_R.tar.gz

Even if there is no interest in including full support for CM fonts, it
would be very helpful if the "family" option of the postscript driver
could be expanded to (optionally) take list of five afm files instead of
four. The fifth would be for the symbol afm file. This would then allow me
to write a script which could make the remaining changes to an otherwise
standard R eps file (after it was written with the standard postscript
driver) so it would properly use the CM fonts. I could then distribute
this as some sort of package so others who might want to use the CM fonts
could also do so.

Thank you,
Brian D'Urso

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Aug 15 21:43:15 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 15 Aug 2001 16:43:15 -0400
Subject: [Rd] documented but missing from the code (PR#1054)
References: <200108151730.TAA10351@pubhealth.ku.dk>
Message-ID: <3B7ADEE3.146C63F9@bank-banque-canada.ca>

BDR>Until very recently this was true for objects in zzz.R. One example in dse
BDR>is scale.default, which is not in the code and is in the documentation
BDR>(incorrectly). Generated objects are (correctly) marked as not in the code.

I take this to mean that if I do

  if(!exists(zzz)) zzz <- whatever

then any documentation for zzz will generate the warning.
I do this, but I think there may be a bug in addition.

BDR>R-devel does not have a projected release date, and is not the next version
BDR>planned (1.3.1 on August 31).  I'd guess its release is several months off.

Ok, thanks.  I mis-interpreted something in a previous post.

BDR>BTW, is it you who is responsible for the scale generic in R?
BDR>dse has
BDR>      scale <- function(x, ..., scale = TRUE) UseMethod("scale")
BDR>as R did,

As R still does I believe. I don't recall being responsible for this, but I vaguely
recall being involved in a discussion and I believe I changed my generic to match
R's. My original scale generic pre-dates Splus 3.4 and scale was not generic in Splus
3.3 (nor in R in the previous millennium).

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug 15 21:00:38 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 15 Aug 2001 22:00:38 +0200
Subject: [Rd] documented but missing from the code (PR#1054)
In-Reply-To: <200108151730.TAA10351@pubhealth.ku.dk>
References: <200108151730.TAA10351@pubhealth.ku.dk>
Message-ID: <15226.54502.941259.677297@mithrandir.hornik.net>

>>>>> ripley  writes:

> On Wed, 15 Aug 2001 pgilbert@bank-banque-canada.ca wrote:
>> In R-devel (Aug 15) I am getting some warnings
>> "Objects documented but missing from the code:"
>> 
>> The ones I have checked are definitely in the code, so I suspect there is a bug in
>> this check. I'm very busy today and then away until after the projected release of
>> the new version so I cannot follow up on this as carefully as I would like to. I
>> expect the problem is reproducible with dse from CRAN, though I have been testing
>> with my own working copy.

> Until very recently this was true for objects in zzz.R. One example in
> dse is scale.default, which is not in the code and is in the
> documentation (incorrectly). Generated objects are (correctly) marked
> as not in the code.

> R-devel does not have a projected release date, and is not the next
> version planned (1.3.1 on August 31).  I'd guess its release is
> several months off.

> BTW, is it you who is responsible for the scale generic in R?  dse has

>       scale <- function(x, ..., scale = TRUE) UseMethod("scale")

> as R did, and that is incompatible with scale.default (and hence S's
> scale) which does not have a ... argument.  Adding one forces the
> scale argument to be named and breaks a lot of ported code.

> Your own scale methods are also incompatible with your own generic.
> Try running checkMethods().

I have only tried a random sample of the warnings: e.g., dse2 has one
about `combine'.  This comes from the usage in combine.forecast.cov.Rd
being

    combine(obj1, obj2)

whereas the file actually documents the topics

\alias{combine.forecast.cov}
\alias{combine.forecast.cov.estimators.wrt.data}
\alias{combine.forecast.cov.estimators.wrt.true} 

and there is no object `combine' in the package:

hornik@mithrandir:~/tmp/dse.Rcheck/dse2/R$ grep combine *
combine.forecast.cov.estimators.wrt.data <- function(e1,e2)
combine.forecast.cov.estimators.wrt.true <- function(e1,e2)
combine.forecast.cov <- function(e1,e2)

So I would think that \usage documents an object that is missing from
the code.

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From laurent@cbs.dtu.dk  Thu Aug 16 07:52:35 2001
From: laurent@cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Thu, 16 Aug 2001 08:52:35 +0200 (MET DST)
Subject: [Rd] crt1.o skipped at configure time ? (PR#1057)
Message-ID: <200108160652.IAA12811@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: 1.3.0-patched
OS: IRIX 6.5
Submission from: (NULL) (130.225.67.199)





During the configuration step, things do not go perfect:

The file config.log has :

configure:3754: gcc -o conftest -g -O2 -I/usr/freeware/include
-I/usr/local/include  -static conftest.c -L/usr/local/lib 1>&5
ld32: FATAL   9  : I/O error (/usr/lib32/mips3/nonshared/crt1.o): No such file
or directory

here is a list of what's in mips3
laurent@ibiology> ls /usr/lib32/mips3/
crt1.o             libdmnet.so        libfpe.so          libmalloc_cv.so
crtn.o             libdmnet.so.1      libfpe_ss.so       libmalloc_ss.so
dmedia             libdplace.so       libftn.so          libmangle.a
dsmcrt.o           libdprof.so        libftn90.so        libmp.a
fixade.o           libelfutil.a       libinstr.so        libmp.so
libMMmalloc.a      libelfutil_xtnd.a  libio_ss.so        libmpc.a
libMMmalloc.so     libexc.so          libkapio.a         libmpi_ss.so
libblas.so         libfastm.a         libkmem.a          libmx.a
libblas_mp.so      libfastm.so        libksync.so        libmx.so
libc.so            libfetchop.so      libksync.so.1      libsgidl.a
libc.so.1          libffio.a          libm.a             libss.so
libdlook.so        libffio.so         libm.so            libssrt.so
libdmedia.so       libfortran.so      libm43.a           mcrt1.o
libdmedia.so.1     libfpe.a           libm43.so



...if it's a real problem (and not the installation here being _really_ exotic,
 it should be fixed in a wink)


Best regards,



Laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 16 08:17:38 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 16 Aug 2001 08:17:38 +0100 (BST)
Subject: [Rd] crt1.o skipped at configure time ? (PR#1057)
In-Reply-To: <200108160652.IAA12811@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0108160816060.19719-100000@auk.stats>

Looks like a compiler installation problem.  Was that gcc built on that
version of Irix on that box?


On Thu, 16 Aug 2001 laurent@cbs.dtu.dk wrote:

> Full_Name: Laurent Gautier
> Version: 1.3.0-patched
> OS: IRIX 6.5
> Submission from: (NULL) (130.225.67.199)
>
>
>
>
>
> During the configuration step, things do not go perfect:
>
> The file config.log has :
>
> configure:3754: gcc -o conftest -g -O2 -I/usr/freeware/include
> -I/usr/local/include  -static conftest.c -L/usr/local/lib 1>&5
> ld32: FATAL   9  : I/O error (/usr/lib32/mips3/nonshared/crt1.o): No such file
> or directory
>
> here is a list of what's in mips3
> laurent@ibiology> ls /usr/lib32/mips3/
> crt1.o             libdmnet.so        libfpe.so          libmalloc_cv.so
> crtn.o             libdmnet.so.1      libfpe_ss.so       libmalloc_ss.so
> dmedia             libdplace.so       libftn.so          libmangle.a
> dsmcrt.o           libdprof.so        libftn90.so        libmp.a
> fixade.o           libelfutil.a       libinstr.so        libmp.so
> libMMmalloc.a      libelfutil_xtnd.a  libio_ss.so        libmpc.a
> libMMmalloc.so     libexc.so          libkapio.a         libmpi_ss.so
> libblas.so         libfastm.a         libkmem.a          libmx.a
> libblas_mp.so      libfastm.so        libksync.so        libmx.so
> libc.so            libfetchop.so      libksync.so.1      libsgidl.a
> libc.so.1          libffio.a          libm.a             libss.so
> libdlook.so        libffio.so         libm.so            libssrt.so
> libdmedia.so       libfortran.so      libm43.a           mcrt1.o
> libdmedia.so.1     libfpe.a           libm43.so
>
>
>
> ...if it's a real problem (and not the installation here being _really_ exotic,
>  it should be fixed in a wink)
>
>
> Best regards,
>
>
>
> Laurent
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 16 08:27:29 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 16 Aug 2001 09:27:29 +0200
Subject: [Rd] scale() generic {was "documented but missing..."}
In-Reply-To: <3B7ADEE3.146C63F9@bank-banque-canada.ca>
References: <200108151730.TAA10351@pubhealth.ku.dk>
 <3B7ADEE3.146C63F9@bank-banque-canada.ca>
Message-ID: <15227.30177.440433.558758@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:


    BDR> BTW, is it you who is responsible for the scale generic in R?  dse
    BDR> has scale <- function(x, ..., scale = TRUE) UseMethod("scale")
    BDR> as R did,

    PaulG> As R still does I believe.

yes, 1.3.0 does

    PaulG> I don't recall being responsible for
    PaulG> this, but I vaguely recall being involved in a discussion and I
    PaulG> believe I changed my generic to match R's. My original scale
    PaulG> generic pre-dates Splus 3.4 and scale was not generic in Splus
    PaulG> 3.3 (nor in R in the previous millennium).

I was somehow involved in this discussion, maybe impementation as well.
It started with someone asking for scale() to become generic,
because he wanted to write methods for it and because the S-plus coders
had made it generic.
Very vaguely I also remember that the request was also to allow other
arguments than those of scale.default() which *does* make sense, just think
of specialized matrix classes, etc.
Unfortunately, `scale' is not a good word to grep for in the mailing list
archives...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 16 08:54:26 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 16 Aug 2001 09:54:26 +0200
Subject: [Rd] documented but missing from the code (PR#1054)
In-Reply-To: <3B7ADEE3.146C63F9@bank-banque-canada.ca>
References: <200108151730.TAA10351@pubhealth.ku.dk>
 <3B7ADEE3.146C63F9@bank-banque-canada.ca>
Message-ID: <15227.31794.780031.428261@mithrandir.hornik.net>

>>>>> Paul Gilbert writes:

BDR> Until very recently this was true for objects in zzz.R. One example in dse
BDR> is scale.default, which is not in the code and is in the documentation
BDR> (incorrectly). Generated objects are (correctly) marked as not in the code.

> I take this to mean that if I do

>   if(!exists(zzz)) zzz <- whatever

> then any documentation for zzz will generate the warning.

Correct.  Codoc could be refined to catch this: is currently only looks
at the top-level assignments.  But in the above case, one can argue that
defensiveness should give a warning: the package writer could provide a
totally different zzz and document it, and consistency of code and docs
would be conditional on non-existence of zzz ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From JDiaz-Saiz@uh.edu  Thu Aug 16 18:31:09 2001
From: JDiaz-Saiz@uh.edu (JDiaz-Saiz@uh.edu)
Date: Thu, 16 Aug 2001 19:31:09 +0200 (MET DST)
Subject: [Rd] lm() (PR#1059)
Message-ID: <200108161731.TAA19810@pubhealth.ku.dk>

Full_Name: Joaquin Diaz-Saiz
Version: 1.3.0
OS: Windows
Submission from: (NULL) (129.7.120.106)


The lm() function applied to a particular data set produces a negative value for
the adjusted R-square. See the output below.


=======================================================
R : Copyright 2001, The R Development Core Team
Version 1.3.0  (2001-06-22)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> w<-read.table("accres.txt")
> w
   V1 V2
1   9  1
2   3  1
3   8  1
4   7  1
5  12  1
6   4  0
7  13  0
8  10  0
9   9  0
10  9  0
11  6  0
> x<-w$V1
> t<-w$V2
> x
 [1]  9  3  8  7 12  4 13 10  9  9  6
> t
 [1] 1 1 1 1 1 0 0 0 0 0 0
> out<-lm(x~t)
> summary(out)

Call:
lm(formula = x ~ t)

Residuals:
   Min     1Q Median     3Q    Max 
 -4.80  -1.65   0.50   1.35   4.50 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)    8.500      1.307   6.502 0.000111 ***
t             -0.700      1.939  -0.361 0.726443    
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1 

Residual standard error: 3.202 on 9 degrees of freedom
Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525 
F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264 

> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Thu Aug 16 18:42:08 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Thu, 16 Aug 2001 13:42:08 -0400
Subject: [Rd] lm() (PR#1059)
References: <200108161731.TAA19810@pubhealth.ku.dk>
Message-ID: <3B7C05EF.2066625A@umsanet.edu.bo>

Hola!

This is not an error. If the r-squared is small, the formula 
defining "adjusted r-square" can give negative values, correctly.

Kjetil Halvorsen.

JDiaz-Saiz@uh.edu wrote:
> 
> Full_Name: Joaquin Diaz-Saiz
> Version: 1.3.0
> OS: Windows
> Submission from: (NULL) (129.7.120.106)
> 
> The lm() function applied to a particular data set produces a negative value for
> the adjusted R-square. See the output below.
> 
> =======================================================
> R : Copyright 2001, The R Development Core Team
> Version 1.3.0  (2001-06-22)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> [Previously saved workspace restored]
> 
> > w<-read.table("accres.txt")
> > w
>    V1 V2
> 1   9  1
> 2   3  1
> 3   8  1
> 4   7  1
> 5  12  1
> 6   4  0
> 7  13  0
> 8  10  0
> 9   9  0
> 10  9  0
> 11  6  0
> > x<-w$V1
> > t<-w$V2
> > x
>  [1]  9  3  8  7 12  4 13 10  9  9  6
> > t
>  [1] 1 1 1 1 1 0 0 0 0 0 0
> > out<-lm(x~t)
> > summary(out)
> 
> Call:
> lm(formula = x ~ t)
> 
> Residuals:
>    Min     1Q Median     3Q    Max
>  -4.80  -1.65   0.50   1.35   4.50
> 
> Coefficients:
>             Estimate Std. Error t value Pr(>|t|)
> (Intercept)    8.500      1.307   6.502 0.000111 ***
> t             -0.700      1.939  -0.361 0.726443
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
> 
> Residual standard error: 3.202 on 9 degrees of freedom
> Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525
> F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264
> 
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 16 20:31:51 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Aug 2001 21:31:51 +0200
Subject: [Rd] lm() (PR#1059)
In-Reply-To: <3B7C05EF.2066625A@umsanet.edu.bo>
References: <200108161731.TAA19810@pubhealth.ku.dk>
 <3B7C05EF.2066625A@umsanet.edu.bo>
Message-ID: <x27kw37qe0.fsf@blueberry.kubism.ku.dk>

kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:

> Hola!
> 
> This is not an error. If the r-squared is small, the formula 
> defining "adjusted r-square" can give negative values, correctly.

Yep. Essentially it is  100 * "% variance accounted for" and the
variance can be larger under the model than under the null. Whenever
the F for the model is less than 1, in fact.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Fri Aug 17 00:23:39 2001
From: Bill.Venables@CMIS.CSIRO.AU (Venables, Bill (CMIS, Cleveland))
Date: Fri, 17 Aug 2001 09:23:39 +1000
Subject: [Rd] lm() (PR#1059)
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A9048F1A@Roper-CV.qld.cmis.csiro.au>

Where's the bug?

The adjusted R-squared is an approximately unbiased estimator of the true
R^2.  Like most unbiased estimators of positive parameters it can sometimes
take on negative values.  Most people will understand this, too, so I don't
see much point in artificially replacing the result by zero if its value is
negative.

Bill Venables.

-----Original Message-----
From: JDiaz-Saiz@uh.edu [mailto:JDiaz-Saiz@uh.edu]
Sent: Friday, 17 August 2001 3:31 AM
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: [Rd] lm() (PR#1059)


Full_Name: Joaquin Diaz-Saiz
Version: 1.3.0
OS: Windows
Submission from: (NULL) (129.7.120.106)


The lm() function applied to a particular data set produces a negative value
for
the adjusted R-square. See the output below.


=======================================================
R : Copyright 2001, The R Development Core Team
Version 1.3.0  (2001-06-22)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> w<-read.table("accres.txt")
> w
   V1 V2
1   9  1
2   3  1
3   8  1
4   7  1
5  12  1
6   4  0
7  13  0
8  10  0
9   9  0
10  9  0
11  6  0
> x<-w$V1
> t<-w$V2
> x
 [1]  9  3  8  7 12  4 13 10  9  9  6
> t
 [1] 1 1 1 1 1 0 0 0 0 0 0
> out<-lm(x~t)
> summary(out)

Call:
lm(formula = x ~ t)

Residuals:
   Min     1Q Median     3Q    Max 
 -4.80  -1.65   0.50   1.35   4.50 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)    8.500      1.307   6.502 0.000111 ***
t             -0.700      1.939  -0.361 0.726443    
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1 

Residual standard error: 3.202 on 9 degrees of freedom
Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525 
F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264 

> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xoaquin@computer.org  Fri Aug 17 02:14:31 2001
From: xoaquin@computer.org (xoaquin@computer.org)
Date: Fri, 17 Aug 2001 03:14:31 +0200 (MET DST)
Subject: [Rd] Error in report. (PR#1060)
Message-ID: <200108170114.DAA21193@pubhealth.ku.dk>

To all the people involved:

I incorrectly reported the negative value of the adjusted R-squared as a bug
in the last version of R.

I was not careful enough in checking the details and I apologize for the
time that some people had to waste. I will be more careful next time.

Some packages report values greater that or equal to zero and use zero when
negative, but certainly this is not necessary.

Joaquin Diaz-Saiz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Joaquin Diaz-Saiz" <xoaquin@computer.org  Fri Aug 17 02:52:05 2001
From: Joaquin Diaz-Saiz" <xoaquin@computer.org (Joaquin Diaz-Saiz)
Date: Thu, 16 Aug 2001 20:52:05 -0500
Subject: [Rd] lm() (PR#1059)
References: <E09E527B56BE2D438A3D6A246DDD27A9048F1A@Roper-CV.qld.cmis.csiro.au>
Message-ID: <002301c126bf$493f9fc0$bff2520c@usinet.xoaquin>

To all the people involved:

I incorrectly reported the negative value of the adjusted R-squared as a bug
in the last version of R.

I was not careful enough in checking the details and I apologize for the
time that some people had to waste. I will be more careful next time.

Some packages report values greater that or equal to zero and use zero when
negative, but certainly this is not necessary.

Joaquin Diaz-Saiz

----- Original Message -----
From: "Venables, Bill (CMIS, Cleveland)" <Bill.Venables@CMIS.CSIRO.AU>
To: "'JDiaz-Saiz@uh.edu'" <JDiaz-Saiz@UH.EDU>; <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
Sent: Thursday, August 16, 2001 6:23 PM
Subject: RE: [Rd] lm() (PR#1059)


> Where's the bug?
>
> The adjusted R-squared is an approximately unbiased estimator of the true
> R^2.  Like most unbiased estimators of positive parameters it can
sometimes
> take on negative values.  Most people will understand this, too, so I
don't
> see much point in artificially replacing the result by zero if its value
is
> negative.
>
> Bill Venables.
>
> -----Original Message-----
> From: JDiaz-Saiz@uh.edu [mailto:JDiaz-Saiz@uh.edu]
> Sent: Friday, 17 August 2001 3:31 AM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] lm() (PR#1059)
>
>
> Full_Name: Joaquin Diaz-Saiz
> Version: 1.3.0
> OS: Windows
> Submission from: (NULL) (129.7.120.106)
>
>
> The lm() function applied to a particular data set produces a negative
value
> for
> the adjusted R-square. See the output below.
>
>
> =======================================================
> R : Copyright 2001, The R Development Core Team
> Version 1.3.0  (2001-06-22)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> [Previously saved workspace restored]
>
> > w<-read.table("accres.txt")
> > w
>    V1 V2
> 1   9  1
> 2   3  1
> 3   8  1
> 4   7  1
> 5  12  1
> 6   4  0
> 7  13  0
> 8  10  0
> 9   9  0
> 10  9  0
> 11  6  0
> > x<-w$V1
> > t<-w$V2
> > x
>  [1]  9  3  8  7 12  4 13 10  9  9  6
> > t
>  [1] 1 1 1 1 1 0 0 0 0 0 0
> > out<-lm(x~t)
> > summary(out)
>
> Call:
> lm(formula = x ~ t)
>
> Residuals:
>    Min     1Q Median     3Q    Max
>  -4.80  -1.65   0.50   1.35   4.50
>
> Coefficients:
>             Estimate Std. Error t value Pr(>|t|)
> (Intercept)    8.500      1.307   6.502 0.000111 ***
> t             -0.700      1.939  -0.361 0.726443
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
>
> Residual standard error: 3.202 on 9 degrees of freedom
> Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525
> F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264
>
> >
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.
> -.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xoaquin@computer.org  Fri Aug 17 02:53:19 2001
From: xoaquin@computer.org (xoaquin@computer.org)
Date: Fri, 17 Aug 2001 03:53:19 +0200 (MET DST)
Subject: [Rd] lm() (PR#1059)
Message-ID: <200108170153.DAA21272@pubhealth.ku.dk>

To all the people involved:

I incorrectly reported the negative value of the adjusted R-squared as a bug
in the last version of R.

I was not careful enough in checking the details and I apologize for the
time that some people had to waste. I will be more careful next time.

Some packages report values greater that or equal to zero and use zero when
negative, but certainly this is not necessary.

Joaquin Diaz-Saiz

----- Original Message -----
From: "Venables, Bill (CMIS, Cleveland)" <Bill.Venables@CMIS.CSIRO.AU>
To: "'JDiaz-Saiz@uh.edu'" <JDiaz-Saiz@UH.EDU>; <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
Sent: Thursday, August 16, 2001 6:23 PM
Subject: RE: [Rd] lm() (PR#1059)


> Where's the bug?
>
> The adjusted R-squared is an approximately unbiased estimator of the true
> R^2.  Like most unbiased estimators of positive parameters it can
sometimes
> take on negative values.  Most people will understand this, too, so I
don't
> see much point in artificially replacing the result by zero if its value
is
> negative.
>
> Bill Venables.
>
> -----Original Message-----
> From: JDiaz-Saiz@uh.edu [mailto:JDiaz-Saiz@uh.edu]
> Sent: Friday, 17 August 2001 3:31 AM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] lm() (PR#1059)
>
>
> Full_Name: Joaquin Diaz-Saiz
> Version: 1.3.0
> OS: Windows
> Submission from: (NULL) (129.7.120.106)
>
>
> The lm() function applied to a particular data set produces a negative
value
> for
> the adjusted R-square. See the output below.
>
>
> =======================================================
> R : Copyright 2001, The R Development Core Team
> Version 1.3.0  (2001-06-22)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> [Previously saved workspace restored]
>
> > w<-read.table("accres.txt")
> > w
>    V1 V2
> 1   9  1
> 2   3  1
> 3   8  1
> 4   7  1
> 5  12  1
> 6   4  0
> 7  13  0
> 8  10  0
> 9   9  0
> 10  9  0
> 11  6  0
> > x<-w$V1
> > t<-w$V2
> > x
>  [1]  9  3  8  7 12  4 13 10  9  9  6
> > t
>  [1] 1 1 1 1 1 0 0 0 0 0 0
> > out<-lm(x~t)
> > summary(out)
>
> Call:
> lm(formula = x ~ t)
>
> Residuals:
>    Min     1Q Median     3Q    Max
>  -4.80  -1.65   0.50   1.35   4.50
>
> Coefficients:
>             Estimate Std. Error t value Pr(>|t|)
> (Intercept)    8.500      1.307   6.502 0.000111 ***
> t             -0.700      1.939  -0.361 0.726443
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
>
> Residual standard error: 3.202 on 9 degrees of freedom
> Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525
> F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264
>
> >
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.
> -.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Aug 17 14:49:55 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 17 Aug 2001 15:49:55 +0200
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
Message-ID: <15229.8451.41084.531037@gargle.gargle.HOWL>

A colleague has a dozen of excel sheets and also expects to get updates
regularly.  He could open these in M$-Excel and export as *.csv manually,
"bring back to Unix" and then read into R.  Of course there must be options to
start programming this in something like visual basic,
but we wouldn't to really want to...

We also know that probably Gnumeric could do the job (since the xls files
are said to be simple ...), but as far as I know that also does only work
manually (and via GUI). 
"gnumeric --help" does not suggest a command line version.
Are there other options (i.e. free software programs) to use from the
command line (i.e. also in a shell script or from inside R)?

Since this is not really an R topic, please reply to my e-mail only,
not to R-help, and I'll summarize.  Thanks in advance!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Sun Aug 19 22:05:49 2001
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Sun, 19 Aug 2001 23:05:49 +0200 (MET DST)
Subject: [Rd] error message in chol() (PR#1061)
Message-ID: <200108192105.XAA05577@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.3.0
OS: Windows 98
Submission from: (NULL) (24.77.112.193)



I am having accuracy problems involving the computation of inverse of
nonnegative definite matrices with solve(). I also have to compute the
Choleski decomposition of matrices. My numerical problems involving solve()
made me find a bug in the chol() function. Here is an example.

#Please, load the (8x8) matrix "mat" given below.
#The matrix "mat" is indeed invertible as
solve(mat)
#exists. However, the command
chol(mat)
#claims that "mat" is singular. The correct error message should be
#that "mat" is not symmetric positive definite.

#In fact, the matrix "mat" should be symmetric, but if
#we adjust for rounding errors by
chol((mat+t(mat))/2)
#we have the same error message in R, whereas S-Plus works (with
#a warning message saying that the rank is not full).

mat <- structure(c(0.587765115222886, 0.167899163888134, -1.17517413388306e-05,
  2.84014489816759e-05, -0.00314742260306333, 0.00957598738126672, 
 -0.000181283657365524, 0.000268404362197193, 0.167899163888134, 
 0.830166933867836, 2.84014489816759e-05, -6.37164529062413e-05,  
-0.00221693916036902, 0.00290212917834065, 9.0762242654496e-05, 
 -0.000148298146106774, -1.17517413388306e-05, 2.84014489816759e-05, 
 0.592681746779869, 0.155708697468761, -0.000181283657365506, 
 0.000268404362197185, -0.00203952216264033, 0.00850865103383899, 
 2.84014489816759e-05, -6.37164529062413e-05, 0.155708697468761, 
 0.856464279975445, 9.0762242654496e-05, -0.000148298146106784, 
 -0.00296804648853004, 0.00336588501549565, -0.00314742260306333,
  -0.00221693916036901, -0.000181283657365512, 9.07622426544948e-05,
  1.72579173368880, 0.238005942444999, 0.120912001671674, -0.141897803793986,
  0.00957598738126672, 0.00290212917834065, 0.000268404362197191, 
 -0.000148298146106782, 0.238005942444999, 1.56986591648628, 
-0.141897803793988,  0.213872027136185, -0.000181283657365518, 
9.07622426544981e-05,  -0.00203952216264033, -0.00296804648853004,
 0.120912001671674,  -0.141897803793987, 1.53425760353976, 1.16174845591861,
 0.000268404362197194,  -0.000148298146106774, 0.00850865103383899,
 0.00336588501549565,  -0.141897803793985, 0.213872027136185, 
1.16174845591861, 0.773168806527852 ), .Dim = c(8, 8)) 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug 20 00:02:06 2001
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Mon, 20 Aug 2001 01:02:06 +0200 (MET DST)
Subject: [Rd] system.file("",package) (PR#1062)
Message-ID: <200108192302.BAA05935@pubhealth.ku.dk>


system.file("",package") is documented to return the root of the package
(as it did in the past). It actually returns "" (Win98, R1.3.0), breaking
the SJava package

Omitting the first argument does work correctly and so is a workaround if
the argument is explicitly "" but not if it is the value of a variable.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 20 07:15:22 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 20 Aug 2001 08:15:22 +0200
Subject: [Rd] system.file("",package) (PR#1062)
In-Reply-To: <200108192302.BAA05935@pubhealth.ku.dk>
References: <200108192302.BAA05935@pubhealth.ku.dk>
Message-ID: <15232.43770.872451.726047@mithrandir.hornik.net>

>>>>> tlumley  writes:

> system.file("",package") is documented to return the root of the
> package (as it did in the past). It actually returns "" (Win98,
> R1.3.0), breaking the SJava package

> Omitting the first argument does work correctly and so is a workaround
> if the argument is explicitly "" but not if it is the value of a
> variable.

Thomas,

I think you are misreading the docs: we have

     system.file(..., package = "base", lib.loc = .lib.loc, pkg, lib)

so the package argument must be named.

I think you were caught by

	R> system.file("", "eda")
	[1] ""

but you need to do

	R> system.file("", package = "eda")
	[1] "/usr/local/lib/R/library/eda/"

-k


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 20 07:44:02 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 Aug 2001 08:44:02 +0200 (MET DST)
Subject: [Rd] system.file("",package) (PR#1062)
Message-ID: <200108200644.IAA06705@pubhealth.ku.dk>

On Mon, 20 Aug 2001 tlumley@u.washington.edu wrote:

>
> system.file("",package") is documented to return the root of the package
> (as it did in the past). It actually returns "" (Win98, R1.3.0), breaking
> the SJava package

My Unix systems give results like

> system.file("", package="eda")
[1] "/ext/R/1.3.0/lib/R/library/eda/"
> system.file("",package="Rstreams")
[1] "/ext/R/library/Rstreams/"

under 1.3.0.  It's the trailing slash that is the problem, and which is not
as documented in the Value section. That is not a file under Windows, and
so file.exists() fails.  (That suprised me a bit, but one could argue it is
not actually a file under Unix either: the directory file is
/ext/R/1.3.0/lib/R/library/eda and that does work.)

Rather than special-case system.file("",package), I think we should remove
the `or \code{""}' from the documentation.


(The problem with SJava on Windows is one of several I reported to DTL on
Mon Jul 16.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 20 07:43:41 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 20 Aug 2001 07:43:41 +0100 (BST)
Subject: [Rd] system.file("",package) (PR#1062)
In-Reply-To: <15232.43770.872451.726047@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.31.0108200742240.16994-100000@auk.stats>

On Mon, 20 Aug 2001, Kurt Hornik wrote:

> >>>>> tlumley  writes:
>
> > system.file("",package") is documented to return the root of the
> > package (as it did in the past). It actually returns "" (Win98,
> > R1.3.0), breaking the SJava package
>
> > Omitting the first argument does work correctly and so is a workaround
> > if the argument is explicitly "" but not if it is the value of a
> > variable.
>
> Thomas,
>
> I think you are misreading the docs: we have
>
>      system.file(..., package = "base", lib.loc = .lib.loc, pkg, lib)
>
> so the package argument must be named.
>
> I think you were caught by
>
> 	R> system.file("", "eda")
> 	[1] ""
>
> but you need to do
>
> 	R> system.file("", package = "eda")
> 	[1] "/usr/local/lib/R/library/eda/"

Sorry, that's using a Unix-specific interpretation of file.exists,
so does not work under Windows.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug 20 09:00:17 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 20 Aug 2001 10:00:17 +0200
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <15229.8451.41084.531037@gargle.gargle.HOWL>
References: <15229.8451.41084.531037@gargle.gargle.HOWL>
Message-ID: <15232.50065.506799.227682@gargle.gargle.HOWL>

Thanks got to Brian Ripley, John Chambers, Tony Rossini, Setzer Woodrow,
Dirk Eddelbuettel, Uwe Ligges, Detlef Steuer, and Kurt Hornik (in
"historical" order) who have answered very helpfully!

I was interested primarily in "commandline" solutions inside Unix/Linux,
and hence not ODBC inside windows.  The other answers fall into three groups :

1) newer Perl versions (newer than Redhat 6.2 or Debian potato) have modules
   Spreadsheet::ParseExcel and built on that DBI::Excel
   {as "libspreadsheet-parseexcel-perl" and "libdbi-excel-perl" in Debian,
    thanks to Dirk}.

   Dirk has also done a done a perl script "xls2csv" built on the above,
   sent to Brian Ripley who forwarded it to me.  
   Dirk, maybe you'd post the latest version of that here as well, or give us
   a pointer where that is available?

2) There's a GPL package "catdoc" with primary aim of 
   "cat *.doc files" (i.e. `look at' M$-Word files).  The catdoc package is
   written in C and also has an "xls2csv" (same name as above script!) program.
   catdoc is in Debian or available at  http://www.fe.msk.ru/~vitus/catdoc/
   Looking at that webpage however seems to indicate that development
   somehow stopped end of 1999 (a "2k" bug ? :-).

I've not yet compared the two xls2csv versions now potentially available
to me, one reason being that I'd have to upgrade perl (or Redhat) first.
At the moment, I'd tend to use the perl based solution.

3) John Chambers mentioned Duncan's  `R Gnumeric' interface --- the only
   R-related answer--- at http://www.omegahat.org/RGnumeric/  
   It is fairly new, but I'll definitely am looking at it, as well.

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> A colleague has a dozen of excel sheets and also expects to get
    MM> updates regularly.  He could open these in M$-Excel and export as
    MM> *.csv manually, "bring back to Unix" and then read into R.  Of
    MM> course there must be options to start programming this in something
    MM> like visual basic, but we wouldn't to really want to...

    MM> We also know that probably Gnumeric could do the job (since the xls
    MM> files are said to be simple ...), but as far as I know that also
    MM> does only work manually (and via GUI).  "gnumeric --help" does not
    MM> suggest a command line version.  Are there other options (i.e. free
    MM> software programs) to use from the command line (i.e. also in a
    MM> shell script or from inside R)?

    MM> Since this is not really an R topic, please reply to my e-mail
    MM> only, not to R-help, and I'll summarize.  Thanks in advance!

Thanks a lot, once more!
-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 20 11:28:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 Aug 2001 12:28:08 +0200 (MET DST)
Subject: [Rd] error message in chol() (PR#1061)
Message-ID: <200108201028.MAA10728@pubhealth.ku.dk>

On Sun, 19 Aug 2001 jerome@stat.ubc.ca wrote:

> Full_Name: Jerome Asselin
> Version: 1.3.0
> OS: Windows 98
> Submission from: (NULL) (24.77.112.193)
>
>
>
> I am having accuracy problems involving the computation of inverse of
> nonnegative definite matrices with solve(). I also have to compute the
> Choleski decomposition of matrices. My numerical problems involving solve()
> made me find a bug in the chol() function. Here is an example.
>
> #Please, load the (8x8) matrix "mat" given below.
> #The matrix "mat" is indeed invertible as
> solve(mat)
> #exists. However, the command
> chol(mat)
> #claims that "mat" is singular. The correct error message should be
> #that "mat" is not symmetric positive definite.

Yes.  Message changed.  Actually, it only uses the upper triangle,
so symmetry is assumed, as the help page says....

> #In fact, the matrix "mat" should be symmetric, but if
> #we adjust for rounding errors by
> chol((mat+t(mat))/2)
> #we have the same error message in R, whereas S-Plus works (with
> #a warning message saying that the rank is not full).

Well, the symmetrized matrix is not even close to positive definite, so
what does `works' mean?

> eigen((mat+t(mat))/2)
$values:
[1]  2.3768888  1.8976031  1.4630238  0.9286787  0.9159388  0.5205478  0.5018393
[8] -0.1343581
 ...

L <- chol((mat+t(mat))/2)
t(L) %*% L - (mat+t(mat))/2

has one element of about 0.27.  That's just undocumented in S-PLUS.

Generally, if you want good numerical control you should be using eigen
and not chol, and if you know your matrix is symmetric, you can do better
than solve().  Have you considered the Matrix package?


> mat <- structure(c(0.587765115222886, 0.167899163888134, -1.17517413388306e-05,
>   2.84014489816759e-05, -0.00314742260306333, 0.00957598738126672,
>  -0.000181283657365524, 0.000268404362197193, 0.167899163888134,
>  0.830166933867836, 2.84014489816759e-05, -6.37164529062413e-05,
> -0.00221693916036902, 0.00290212917834065, 9.0762242654496e-05,
>  -0.000148298146106774, -1.17517413388306e-05, 2.84014489816759e-05,
>  0.592681746779869, 0.155708697468761, -0.000181283657365506,
>  0.000268404362197185, -0.00203952216264033, 0.00850865103383899,
>  2.84014489816759e-05, -6.37164529062413e-05, 0.155708697468761,
>  0.856464279975445, 9.0762242654496e-05, -0.000148298146106784,
>  -0.00296804648853004, 0.00336588501549565, -0.00314742260306333,
>   -0.00221693916036901, -0.000181283657365512, 9.07622426544948e-05,
>   1.72579173368880, 0.238005942444999, 0.120912001671674, -0.141897803793986,
>   0.00957598738126672, 0.00290212917834065, 0.000268404362197191,
>  -0.000148298146106782, 0.238005942444999, 1.56986591648628,
> -0.141897803793988,  0.213872027136185, -0.000181283657365518,
> 9.07622426544981e-05,  -0.00203952216264033, -0.00296804648853004,
>  0.120912001671674,  -0.141897803793987, 1.53425760353976, 1.16174845591861,
>  0.000268404362197194,  -0.000148298146106774, 0.00850865103383899,
>  0.00336588501549565,  -0.141897803793985, 0.213872027136185,
> 1.16174845591861, 0.773168806527852 ), .Dim = c(8, 8))
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug 20 16:28:02 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 20 Aug 2001 08:28:02 -0700 (PDT)
Subject: [Rd] system.file("",package) (PR#1062)
In-Reply-To: <200108200644.IAA06705@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0108200825180.142352-100000@homer28.u.washington.edu>

On Mon, 20 Aug 2001 ripley@stats.ox.ac.uk wrote:

>
> Rather than special-case system.file("",package), I think we should remove
> the `or \code{""}' from the documentation.
>
>

Yes. I didn't think so initially, but on reflection
  system.file(some.file,package="blah")
probably should return "" if some.file happens to be "" or have length 0.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 20 17:38:51 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 20 Aug 2001 18:38:51 +0200
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <15232.50065.506799.227682@gargle.gargle.HOWL>
References: <15229.8451.41084.531037@gargle.gargle.HOWL>
 <15232.50065.506799.227682@gargle.gargle.HOWL>
Message-ID: <15233.15643.232282.557687@mithrandir.hornik.net>

>>>>> Martin Maechler writes:

> Thanks got to Brian Ripley, John Chambers, Tony Rossini, Setzer Woodrow,
> Dirk Eddelbuettel, Uwe Ligges, Detlef Steuer, and Kurt Hornik (in
> "historical" order) who have answered very helpfully!

> I was interested primarily in "commandline" solutions inside Unix/Linux,
> and hence not ODBC inside windows.  The other answers fall into three groups :

> 1) newer Perl versions (newer than Redhat 6.2 or Debian potato) have modules
>    Spreadsheet::ParseExcel and built on that DBI::Excel
>    {as "libspreadsheet-parseexcel-perl" and "libdbi-excel-perl" in Debian,
>     thanks to Dirk}.

>    Dirk has also done a done a perl script "xls2csv" built on the above,
>    sent to Brian Ripley who forwarded it to me.  
>    Dirk, maybe you'd post the latest version of that here as well, or give us
>    a pointer where that is available?

> 2) There's a GPL package "catdoc" with primary aim of 
>    "cat *.doc files" (i.e. `look at' M$-Word files).  The catdoc package is
>    written in C and also has an "xls2csv" (same name as above script!) program.
>    catdoc is in Debian or available at  http://www.fe.msk.ru/~vitus/catdoc/
>    Looking at that webpage however seems to indicate that development
>    somehow stopped end of 1999 (a "2k" bug ? :-).

> I've not yet compared the two xls2csv versions now potentially available
> to me, one reason being that I'd have to upgrade perl (or Redhat) first.
> At the moment, I'd tend to use the perl based solution.

> 3) John Chambers mentioned Duncan's  `R Gnumeric' interface --- the only
>    R-related answer--- at http://www.omegahat.org/RGnumeric/  
>    It is fairly new, but I'll definitely am looking at it, as well.

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

MM> A colleague has a dozen of excel sheets and also expects to get
MM> updates regularly.  He could open these in M$-Excel and export as
MM> *.csv manually, "bring back to Unix" and then read into R.  Of
MM> course there must be options to start programming this in something
MM> like visual basic, but we wouldn't to really want to...

MM> We also know that probably Gnumeric could do the job (since the xls
MM> files are said to be simple ...), but as far as I know that also
MM> does only work manually (and via GUI).  "gnumeric --help" does not
MM> suggest a command line version.  Are there other options (i.e. free
MM> software programs) to use from the command line (i.e. also in a
MM> shell script or from inside R)?

MM> Since this is not really an R topic, please reply to my e-mail
MM> only, not to R-help, and I'll summarize.  Thanks in advance!

> Thanks a lot, once more!

Martin,

One remark.  If we think we want to be able to import Excel data
directly into R then neither solution will do I think: the xls2csv
program from (2) is not good enough, and the other solutions require
tools that may not be available.  (Effort is currently put into removing
run-time and even build-time dependency on Perl and shell tools, and use
R scripts instead.)

I think it would be nice if package `foreign' had at least limited
support for reading in .xls files ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Mon Aug 20 19:45:33 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Mon, 20 Aug 2001 14:45:33 -0400 (EDT)
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <15233.15643.232282.557687@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.10.10108201442190.3905-100000@hsph.harvard.edu>

On Mon, 20 Aug 2001, Kurt Hornik wrote:
> 
> Martin,
> 
> One remark.  If we think we want to be able to import Excel data
> directly into R then neither solution will do I think: the xls2csv
> program from (2) is not good enough, and the other solutions require
> tools that may not be available.  (Effort is currently put into removing
> run-time and even build-time dependency on Perl and shell tools, and use
> R scripts instead.)
> 
> I think it would be nice if package `foreign' had at least limited
> support for reading in .xls files ...

There is complete documentation for the Excel format (BIFF I think its
called) in the Excel SDK--- I'm not sure where you get it (it is probably
on one of the MSDN CDs somewhere, but it doesn't appear to be on the
website). For Excel 2002 (aka ExcelXP) as with most of the MS OfficeXP 
line, they've added native XML support making reading/writing files much
less of a problem.


 > > -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 20 19:52:35 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 20 Aug 2001 19:52:35 +0100 (BST)
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <Pine.GSO.4.10.10108201442190.3905-100000@hsph.harvard.edu>
Message-ID: <Pine.LNX.4.31.0108201949330.22859-100000@gannet.stats>

On Mon, 20 Aug 2001, Byron Ellis wrote:

> On Mon, 20 Aug 2001, Kurt Hornik wrote:
> >
> > Martin,
> >
> > One remark.  If we think we want to be able to import Excel data
> > directly into R then neither solution will do I think: the xls2csv
> > program from (2) is not good enough, and the other solutions require
> > tools that may not be available.  (Effort is currently put into removing
> > run-time and even build-time dependency on Perl and shell tools, and use
> > R scripts instead.)
> >
> > I think it would be nice if package `foreign' had at least limited
> > support for reading in .xls files ...
>
> There is complete documentation for the Excel format (BIFF I think its
> called) in the Excel SDK--- I'm not sure where you get it (it is probably
> on one of the MSDN CDs somewhere, but it doesn't appear to be on the
> website). For Excel 2002 (aka ExcelXP) as with most of the MS OfficeXP
> line, they've added native XML support making reading/writing files much
> less of a problem.

Unfortunately, it's plain wrong according to the authors of the Perl
addons.

Gnumeric has reasonably readable code for this ...

It's a problem: those who really need this have ways (Star Office,
Gnumeric, Perl scripts, rebooting into W2k) and those who don't haven;t
the motivation.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug 20 21:55:37 2001
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Mon, 20 Aug 2001 22:55:37 +0200 (MET DST)
Subject: [Rd] interrupting Sys.sleep (PR#1063)
Message-ID: <200108202055.WAA16443@pubhealth.ku.dk>


On Linux R1.3.0 (and current pre1.3.1 and pre1.4.0)
 Sys.sleep(30)
interrupt with CTRL-C
 Sys.sleep(30)
causes a segmentation fault. It doesn't happen under Windows (2000).


	-thomas





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Mon Aug 20 22:24:04 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Mon, 20 Aug 2001 14:24:04 -0700
Subject: [Rd] interrupting Sys.sleep (PR#1063)
In-Reply-To: <200108202055.WAA16443@pubhealth.ku.dk>
Message-ID: <200108202125.OAA01261@pine.frazmtn.com>

With both pre 1.3.1 and pre 1.4.0:
doesn't happen on Darwin either.

On Monday, August 20, 2001, at 01:55 PM, tlumley@u.washington.edu wrote:

>
> On Linux R1.3.0 (and current pre1.3.1 and pre1.4.0)
>  Sys.sleep(30)
> interrupt with CTRL-C
>  Sys.sleep(30)
> causes a segmentation fault. It doesn't happen under Windows (2000).
>
>
> 	-thomas
>
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Tue Aug 21 00:13:29 2001
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Tue, 21 Aug 2001 01:13:29 +0200 (MET DST)
Subject: [Rd] error message in chol() (PR#1061)
Message-ID: <200108202313.BAA16976@pubhealth.ku.dk>


On Mon, 20 Aug 2001, Prof Brian Ripley wrote:

> On Sun, 19 Aug 2001 jerome@stat.ubc.ca wrote:
> 
> > Full_Name: Jerome Asselin
> > Version: 1.3.0
> > OS: Windows 98
> > Submission from: (NULL) (24.77.112.193)
> >
> >
> >
> > I am having accuracy problems involving the computation of inverse of
> > nonnegative definite matrices with solve(). I also have to compute the
> > Choleski decomposition of matrices. My numerical problems involving solve()
> > made me find a bug in the chol() function. Here is an example.
> >
> > #Please, load the (8x8) matrix "mat" given below.
> > #The matrix "mat" is indeed invertible as
> > solve(mat)
> > #exists. However, the command
> > chol(mat)
> > #claims that "mat" is singular. The correct error message should be
> > #that "mat" is not symmetric positive definite.
> 
> Yes.  Message changed.  Actually, it only uses the upper triangle,
> so symmetry is assumed, as the help page says....

Ok. Thank you.

> > #In fact, the matrix "mat" should be symmetric, but if
> > #we adjust for rounding errors by
> > chol((mat+t(mat))/2)
> > #we have the same error message in R, whereas S-Plus works (with
> > #a warning message saying that the rank is not full).
> 
> Well, the symmetrized matrix is not even close to positive definite, so
> what does `works' mean?
> 
> > eigen((mat+t(mat))/2)
> $values:
> [1]  2.3768888  1.8976031  1.4630238  0.9286787  0.9159388  0.5205478  0.5018393
> [8] -0.1343581
>  ...
> 
> L <- chol((mat+t(mat))/2)
> t(L) %*% L - (mat+t(mat))/2
> 
> has one element of about 0.27.  That's just undocumented in S-PLUS.
> 
> Generally, if you want good numerical control you should be using eigen
> and not chol, and if you know your matrix is symmetric, you can do better
> than solve().  Have you considered the Matrix package?

Thanks for the tips about eigen(). My attempt to reduce the use of solve()
and to use eigen to resolve rank deficiencies appears to be successful.

Jerome Asselin

> > mat <- structure(c(0.587765115222886, 0.167899163888134, -1.17517413388306e-05,
> >   2.84014489816759e-05, -0.00314742260306333, 0.00957598738126672,
> >  -0.000181283657365524, 0.000268404362197193, 0.167899163888134,
> >  0.830166933867836, 2.84014489816759e-05, -6.37164529062413e-05,
> > -0.00221693916036902, 0.00290212917834065, 9.0762242654496e-05,
> >  -0.000148298146106774, -1.17517413388306e-05, 2.84014489816759e-05,
> >  0.592681746779869, 0.155708697468761, -0.000181283657365506,
> >  0.000268404362197185, -0.00203952216264033, 0.00850865103383899,
> >  2.84014489816759e-05, -6.37164529062413e-05, 0.155708697468761,
> >  0.856464279975445, 9.0762242654496e-05, -0.000148298146106784,
> >  -0.00296804648853004, 0.00336588501549565, -0.00314742260306333,
> >   -0.00221693916036901, -0.000181283657365512, 9.07622426544948e-05,
> >   1.72579173368880, 0.238005942444999, 0.120912001671674, -0.141897803793986,
> >   0.00957598738126672, 0.00290212917834065, 0.000268404362197191,
> >  -0.000148298146106782, 0.238005942444999, 1.56986591648628,
> > -0.141897803793988,  0.213872027136185, -0.000181283657365518,
> > 9.07622426544981e-05,  -0.00203952216264033, -0.00296804648853004,
> >  0.120912001671674,  -0.141897803793987, 1.53425760353976, 1.16174845591861,
> >  0.000268404362197194,  -0.000148298146106774, 0.00850865103383899,
> >  0.00336588501549565,  -0.141897803793985, 0.213872027136185,
> > 1.16174845591861, 0.773168806527852 ), .Dim = c(8, 8))
> >
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Aug 21 02:57:15 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Mon, 20 Aug 2001 20:57:15 -0500
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <15232.50065.506799.227682@gargle.gargle.HOWL>
References: <15229.8451.41084.531037@gargle.gargle.HOWL>
 <15232.50065.506799.227682@gargle.gargle.HOWL>
Message-ID: <15233.49147.3828.874363@sonny.eddelbuettel.com>


  Martin> 1) newer Perl versions (newer than Redhat 6.2 or Debian potato) 

The Perl version shouldn't matter for as long it can install from the CPAN
sources. 

  Martin>    Dirk has also done a done a perl script "xls2csv" built on the
  Martin> above, sent to Brian Ripley who forwarded it to me.  Dirk, maybe
  Martin> you'd post the latest version of that here as well, or give us a
  Martin> pointer where that is available?

It just so happened that Brian had asked about that topic when I was playing
with an example from the Spreadsheet::ParseExcel module I was revisiting. I
sent him the hand-edited version (mostly more indentation, renamed variables)
I had plauyed to grok it better. As I'm currently on a different machine, I
can only the (somewhat terse) original dmpEx.pl. There are variants of in the
sample/ directory of Spreadsheet::ParseExcel.

IMHO trying to teach R to read .xls files is opening a huge can of worms with
users who might be a little too agnostic about exactly how they have saved
their data.

Regards, Dirk


use strict;
if(!(defined $ARGV[0])) {
    print<<EOF;
Usage: $0 Excel_File
EOF
    exit;
}
use Spreadsheet::ParseExcel;
my $oExcel = new Spreadsheet::ParseExcel;
my $oBook = $oExcel->Parse($ARGV[0]);

my($iR, $iC, $oWkS, $oWkC);
print "=========================================\n";
print "FILE  :", $oBook->{File} , "\n";
print "COUNT :", $oBook->{SheetCount} , "\n";
print "AUTHOR:", $oBook->{Author} , "\n";
#for(my $iSheet=0; $iSheet < $oBook->{SheetCount} ; $iSheet++) {
#    $oWkS = $oBook->{Worksheet}[$iSheet];
foreach my $oWkS (@{$oBook->{Worksheet}}) {
    print "--------- SHEET:", $oWkS->{Name}, "\n";
    for(my $iR = $oWkS->{MinRow} ; 
            defined $oWkS->{MaxRow} && $iR <= $oWkS->{MaxRow} ; $iR++) {
        for(my $iC = $oWkS->{MinCol} ;
                        defined $oWkS->{MaxCol} && $iC <= $oWkS->{MaxCol} ; $iC++) {
            $oWkC = $oWkS->{Cells}[$iR][$iC];
            print "( $iR , $iC ) =>", $oWkC->Value, "\n" if($oWkC);
print $oWkC->{_Kind}, "\n";
        }
    }
}


-- 
Our mailserver had a hardware failure while we were gone during the 2nd half 
of July. If I did not respond to a mail you sent then, or if you experienced a
a mail bounce, could you kindly resend it? Sorry for the inconvenience -- Dirk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Tue Aug 21 06:15:02 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue, 21 Aug 2001 07:15:02 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200108210515.f7L5F2Z15769@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1050 *
Subject: error in ksmooth C code + patch
From: htang@hpl.hp.com
Date: Mon, 13 Aug 2001 04:57:46 +0200 (MET DST)
--fixed for 1.3.1

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)

Directory:  Macintosh

* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800
* PR# 1023 *
Subject: data function
From: wild@stat.auckland.ac.nz
Date: Fri, 13 Jul 2001 02:48:53 +0200 (MET DST)
--Mac-specific

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1051 *
Subject:      erappin' - daily morning update 8-13-01
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Mon, 13 Aug 2001 09:18:54 -0400
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
* PR# 1053 *
Subject:      erappin' - daily morning update 8-14-01
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Tue, 14 Aug 2001 07:00:20 -0400
* PR# 1054 *
Subject: documented but missing from the code
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Wed, 15 Aug 2001 12:11:42 -0400
* PR# 1055 *
Subject:      books - special offers by eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Wed, 15 Aug 2001 22:01:34 -0400
* PR# 1056 *
Subject:      books - special offers by eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Thu, 16 Aug 2001 00:03:08 -0400
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
* PR# 1058 *
Subject:      erappin' - daily morning update 8-16-01
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Thu, 16 Aug 2001 07:40:00 -0400
* PR# 1059 *
Subject: lm()
From: JDiaz-Saiz@uh.edu
Date: Thu, 16 Aug 2001 19:31:07 +0200 (MET DST)
* PR# 1060 *
Subject: Error in report.
From: "Joaquin Diaz-Saiz" <xoaquin@worldnet.att.net>
Date: Thu, 16 Aug 2001 20:13:32 -0500
* PR# 1061 *
Subject: error message in chol()
From: jerome@stat.ubc.ca
Date: Sun, 19 Aug 2001 23:05:47 +0200 (MET DST)
* PR# 1062 *
Subject: system.file("",package)
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Sun, 19 Aug 2001 16:01:57 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 21 16:22:57 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 21 Aug 2001 16:22:57 +0100 (BST)
Subject: [Rd] Re: [R] Problem using GLM in a loop (fwd)
Message-ID: <Pine.LNX.4.31.0108211605490.11097-100000@gannet.stats>

This example is caused by R's messing with formula environments.

That's explained in ?formula, but should it not be explained in
?model.frame ?

Simple test:

data <- data.frame(y=rnorm(100), x=1:100)

testit <- function(formula)
{
   weights <- runif(100)
   glm(formula, weights=weights, data=data)
}
testit(y ~ x)

weights is looked for in the environment of the formula, not of the call
to glm.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

---------- Forwarded message ----------
Date: Tue, 21 Aug 2001 15:47:34 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
To: Isabelle ZABALZA <isabelle.zabalza-mezghani@ifp.fr>
Subject: Re: [R] Problem using GLM in a loop

It's a scope problem: use

data$weights <- 1/sig

and it will work.  It's finding the system function weights, not your
variable.

I don't really understand this one as yet.


On Tue, 21 Aug 2001, Isabelle ZABALZA wrote:

> Hello,
>
> I am try to perform a modeling which is relevant in a strongly
> heteroscedastic context.
> So I perform a dual modeling (modeling of both mean and variance of a
> response) in using the following loop:
>
> jointmod <- function(formula, data, itercrit=10,devcrit=0.0001)
> {
> #
> # Init step
> #
> init <- glm(formula=formula,family=gaussian, data=data)
> response <- resid(init,type="response") + predict(init,type="response")
> mu <- predict(init,type="response")
> iter <- 1
> dev <- init$deviance
> if (dev != 0) vardev <- 1
> else stop(message="Null deviance in initialisation step")
> endformula_ strsplit(formula,"~")[[3]]
> formulavar_paste("d","~")
> formulavar_as.formula(paste(formulavar,endformula))
> #
> # Modeling loop
> #
> while ((iter <= itercrit)| (vardev > devcrit)) {
> d_(response - mu)^2
> modvar_glm(formula=formulavar,family=Gamma(link=log),data=data)
> sig <- predict(modvar,type="response")
> weights <- 1/sig
> modesp <- glm(formula=formula,
> family=gaussian,data=data,weights=weights)
> mu <- predict(modesp,type="response")
> devold <- dev
> dev <- modesp$deviance
> vardev <- (devold -dev)/devold
> iter <- iter + 1
> }
>
> list(modesp=modesp, modvar=modvar, iter=iter, vardev=vardev)
> }
>
> This program evaluation always stops when evaluating the "modesp" line :
>
>          modesp <- glm(formula=formula,
> family=gaussian,data=data,weights=weights)
> with the following error:
> error in
> model.frame(formula,rownames,variables,varnames,extras,extranames, :
>            invalid variable type.
>
> The same program without specifying weights runs.
> I don't understand this behavior since when I execute the glm command
> with weights out of the program, it runs.
>
> I run R1.3.0 under Windows.
>
> If someone can help me ...
>
> Isabelle Zabalza-Mezghani
>
>
>
>
>
>
> --
> Isabelle Zabalza-Mezghani          Tel : 01 47 52 61 99
> Institut Franais du Ptrole       E-mail : isabelle.zabalza-mezghani@ifp.fr
> 1-4 Av. Bois Preau - Bat Lauriers
> 92852 Rueil Malmaison Cedex, France
>
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jamesmeyers@etex.net  Tue Aug 21 18:31:33 2001
From: jamesmeyers@etex.net (jamesmeyers@etex.net)
Date: Tue, 21 Aug 2001 19:31:33 +0200 (MET DST)
Subject: [Rd] GREAT DEAL (PR#1064)
Message-ID: <200108211731.TAA27331@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0007_01C12A3B.2E9D91C0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

GO HERE CHECK OUT THESE GREAT ITEMS=20

IF YOU OUR INTERESTED IN WHOLESALE PRICES FOR YOUR BUSINESS OR =
FLEAMARKET BUSINESS, THEN EMAIL US AND WE WILL SEND YOU A WHOLE SALE =
PRICE LIST....THAT YOU CAN ORDER ITEMS 1 AT A TIME OR AS MANY AS YOU =
WANT....=20

START YOUR OWN HOME BUSINESS , SEND FOR YOUR PRICE LIST TODAY.. AND =
START MAKING MONEY RIGHT AWAY, WITH YOUR OWN GIFT SHOP, SALE AT =
FLEAMARKETS,=20

PARTYS=20

OR WHAT EVER YOU WANT...=20

OR VISIT OUR PRODUCTS PAGE. AND LET US KNOW BY EMAIL WHAT YOU WANT, AND =
WE WILL OFFER YOU A GREAT DISCOUNT ON WHAT YOU WANT ,,=20

HURRY CHISTMAS IS JUST ABOUT HERE..=20

THANK YOU
JAMES MEYERS=20

jamesmeyers@etex.net=20



<http://members.fortunecity.com/jamesmeyers1>


------=_NextPart_000_0007_01C12A3B.2E9D91C0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<META content=3D"MSHTML 5.50.4207.2601" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>GO HERE CHECK OUT THESE GREAT ITEMS</FONT><FONT=20
face=3D"Times New Roman"> </P></FONT><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>IF YOU OUR INTERESTED IN WHOLESALE PRICES FOR YOUR =
BUSINESS OR=20
FLEAMARKET BUSINESS, THEN EMAIL US AND WE WILL SEND YOU A WHOLE SALE =
PRICE=20
LIST....THAT YOU CAN ORDER ITEMS 1 AT A TIME OR AS MANY AS YOU=20
WANT....</FONT><FONT face=3D"Times New Roman"> </P></FONT><FONT =
color=3D#ff0000=20
size=3D2>
<P align=3Dcenter>START YOUR OWN HOME BUSINESS , SEND FOR YOUR PRICE =
LIST TODAY..=20
AND START MAKING MONEY RIGHT AWAY, WITH YOUR OWN GIFT SHOP, SALE AT =
FLEAMARKETS,=20
</P>
<P align=3Dcenter>PARTYS</FONT><FONT face=3D"Times New Roman"> =
</P></FONT><FONT=20
color=3D#ff0000 size=3D2>
<P align=3Dcenter>OR WHAT EVER YOU WANT...</FONT><FONT face=3D"Times New =
Roman">=20
</P></FONT><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>OR VISIT OUR PRODUCTS PAGE. AND LET US KNOW BY EMAIL =
WHAT YOU=20
WANT, AND WE WILL OFFER YOU A GREAT DISCOUNT ON WHAT YOU WANT =
,,</FONT><FONT=20
face=3D"Times New Roman"> </P></FONT><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>HURRY CHISTMAS IS JUST ABOUT HERE..</FONT><FONT=20
face=3D"Times New Roman"> </P></FONT><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>THANK YOU<BR>JAMES MEYERS</FONT><FONT face=3D"Times =
New Roman">=20
</P></FONT><U><FONT color=3D#0000ff size=3D2>
<P align=3Dcenter><A =
href=3D"mailto:jamesmeyers@etex.net">jamesmeyers@etex.net</A>=20
</P>
<P align=3Dcenter></U></FONT><FONT=20
face=3D"Times New Roman">&nbsp;</P></FONT><U><FONT color=3D#0000ff =
size=3D2>
<P=20
align=3Dcenter>&lt;http://members.fortunecity.com/jamesmeyers1&gt;</P></U=
></FONT></DIV></BODY></HTML>

------=_NextPart_000_0007_01C12A3B.2E9D91C0--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue Aug 21 19:23:26 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 21 Aug 2001 11:23:26 -0700 (PDT)
Subject: [Rd] interrupting Sys.sleep (PR#1063)
In-Reply-To: <200108202055.WAA16443@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0108211114160.88898-100000@homer06.u.washington.edu>

On Mon, 20 Aug 2001 tlumley@u.washington.edu wrote:

>
> On Linux R1.3.0 (and current pre1.3.1 and pre1.4.0)
>  Sys.sleep(30)
> interrupt with CTRL-C
>  Sys.sleep(30)
> causes a segmentation fault. It doesn't happen under Windows (2000).
>

The problem is that SleepHandler is not removed if the sleep is
interrupted. The segfault occurs if Sys.sleep() called again, or as soon
as the timer runs out.

It looks as though either do_syssleep needs to handle SIGINT itself or
jump_to_toplevel needs to know about event handlers.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 22 07:27:27 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 22 Aug 2001 08:27:27 +0200 (MET DST)
Subject: [Rd] X11 protocol errors after all x11 devices are closed (PR#1065)
Message-ID: <200108220627.IAA29451@pubhealth.ku.dk>

> x11()
> dev.off()
null device
          1
> x11()
> plot.new()
Warning messages:
1: X11 protocol error: BadAccess (attempt to access private resource denied)
2: X11 protocol error: BadAccess (attempt to access private resource denied)

This only happens if all x11 devices are shut down, so the X11 connection
is restarted.  We had problems with this when the event handlers
were changed prior to 1.3.0, and it looks as if the logic is still
incorrect.

As far as I can see subsequent plots are correct.

Carrying on:

> dev.off()
null device
          1
> x11()
> plot.new()
Warning message:
X11 protocol error: BadAccess (attempt to access private resource denied)

(only one error this time).


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status =
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug 22 10:50:49 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 22 Aug 2001 11:50:49 +0200
Subject: [Rd] X11 protocol errors after all x11 devices are closed (PR#1065)
In-Reply-To: <200108220627.IAA29451@pubhealth.ku.dk>
References: <200108220627.IAA29451@pubhealth.ku.dk>
Message-ID: <15235.32889.867213.440574@mithrandir.hornik.net>

>>>>> ripley  writes:

>> x11()
>> dev.off()
> null device
>           1
>> x11()
>> plot.new()
> Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)

> This only happens if all x11 devices are shut down, so the X11 connection
> is restarted.  We had problems with this when the event handlers
> were changed prior to 1.3.0, and it looks as if the logic is still
> incorrect.

> As far as I can see subsequent plots are correct.

> Carrying on:

>> dev.off()
> null device
>           1
>> x11()
>> plot.new()
> Warning message:
> X11 protocol error: BadAccess (attempt to access private resource denied)

> (only one error this time).

On Debian GNU/Linux, I do not seem to get the errors:

R> x11()
R> dev.off()
null device 
          1 
R> x11()
R> plot.new()
R> dev.off()
null device 
          1 
R> x11()
R> plot.new()

-k


> --please do not edit the information below--

> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status =
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 22
>  language = R

> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maslcgr@bath.ac.uk  Wed Aug 22 12:04:58 2001
From: maslcgr@bath.ac.uk (maslcgr@bath.ac.uk)
Date: Wed, 22 Aug 2001 13:04:58 +0200 (MET DST)
Subject: [Rd] Corrupted binary?? (PR#1066)
Message-ID: <200108221104.NAA03544@pubhealth.ku.dk>


I've tried downloading SetupR.exe from the Bristol site and 
from the Vienna site, and in both cases the file appears to 
have become corrupted ...  do you know whether other users 
have had similar problems?

Thanks

Chris Rogers

-----------------------------------------------------------------------
L C G Rogers, Professor of Probability              tel:+44 1225 826224
Department of Mathematical Sciences                 fax:+44 1225 826492
University of Bath, Bath BA2 7AY, GB

Email: L.C.G.Rogers@bath.ac.uk  web: www.bath.ac.uk/~maslcgr/home.html
-----------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Aug 22 13:35:24 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 22 Aug 2001 14:35:24 +0200 (MET DST)
Subject: [Rd] X11 protocol errors after all x11 devices are closed (PR#1065)
Message-ID: <200108221235.OAA05855@pubhealth.ku.dk>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    >> x11()
    >> dev.off()
    BDR> null device
    BDR> 1
    >> x11()
    >> plot.new()
    BDR> Warning messages:
    BDR> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
    BDR> 2: X11 protocol error: BadAccess (attempt to access private resource denied)

    BDR> This only happens if all x11 devices are shut down, so the X11 connection
    BDR> is restarted.  We had problems with this when the event handlers
    BDR> were changed prior to 1.3.0, and it looks as if the logic is still
    BDR> incorrect.

    BDR> As far as I can see subsequent plots are correct.

    BDR> Carrying on:

    >> dev.off()
    BDR> null device
    BDR> 1
    >> x11()
    >> plot.new()
    BDR> Warning message:
    BDR> X11 protocol error: BadAccess (attempt to access private resource denied)
    BDR> (only one error this time).

Just this morning,
I found (again!, we had something close to this before) 
the following related bugous behavior :
After interrupting a plot (which would have taken a few minutes and was
"wrong" anyway), starting another plot, interrupting again [with C-c],
and maybe the same once more,
R started just giving a ">" prompt
but did not react any further at all.
(C-c would return the prompt, but no other reaction was possible)
Only killing the R process helped.

I may try to reproduce more exactly later today.
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Wed Aug 22 16:07:53 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 22 Aug 2001 11:07:53 -0400
Subject: [Rd] X11 protocol errors after all x11 devices are closed (PR#1065)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 22 Aug 2001 08:27:27 +0200 (MET DST)"
References: <200108220627.IAA29451@pubhealth.ku.dk>
Message-ID: <pxzo8sgmk6.fsf@infiniti.ece.cmu.edu>


ripley@stats.ox.ac.uk writes:

> > x11()
> > dev.off()
> null device
>           1
> > x11()
> > plot.new()
> Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 
> This only happens if all x11 devices are shut down, so the X11 connection
> is restarted.  We had problems with this when the event handlers
> were changed prior to 1.3.0, and it looks as if the logic is still
> incorrect.
> 
> As far as I can see subsequent plots are correct.
> 
> Carrying on:
> 
> > dev.off()
> null device
>           1
> > x11()
> > plot.new()
> Warning message:
> X11 protocol error: BadAccess (attempt to access private resource denied)
> 
> (only one error this time).


I see the same thing on an AIX machine with the patched R-release of
yesterday.  I've recently noticed this problem when I tried to change
the colortype.  For this you have to shutdown all devices, then I got
the error messages.  I figured this might be an "AIX" thing at
first...

Possibly related (if not, I'll file separate bug reports):

1) I cannot reset the colortype.  When I run out of colors, I used to
   be able to just shutdown all devices, then restart with
   x11(colortype=....).  Now I get:

R> x11()
R> plot(1:100,col=rainbow(100))
Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  : 
        Error: X11 cannot allocate additional graphics colors.
Consider using X11 with colortype="pseudo.cube" or "gray".
R> dev.off()
null device 
          1 
R> x11(colortype="pseudo.cube")
R> plot(1:100,col=rainbow(100))
Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  : 
        Error: X11 cannot allocate additional graphics colors.
Consider using X11 with colortype="pseudo.cube" or "gray".
In addition: Warning messages: 
1: X11 protocol error: BadAccess (attempt to access private resource denied) 
2: X11 protocol error: BadAccess (attempt to access private resource denied) 
3: X11 protocol error: BadAccess (attempt to access private resource denied) 
R> dev.off()
null device 
          1 
R> x11(colortype="gray")
R> plot(1:100,col=rainbow(100))
Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  : 
        Error: X11 cannot allocate additional graphics colors.
Consider using X11 with colortype="pseudo.cube" or "gray".
In addition: Warning messages: 
1: X11 protocol error: BadAccess (attempt to access private resource denied) 
2: X11 protocol error: BadAccess (attempt to access private resource denied) 
3: X11 protocol error: BadAccess (attempt to access private resource denied) 
R> dev.off()
null device 
          1 


2) Plots are not updated if the window is made visible (from being
   partially obscured) during a computation before or during the plot.
   Let's say my xterm (or emacs window) covers the north-west quadrant
   of R's x11 device window.  Then:

R> data(iris)
R> pairs(iris[,1:4])

   While pairs is drawing, I bring the device window to the front.
   All plots that were drawn by pairs will not be redrawn once pairs
   is done.  So I have to push the device window in the back, then
   bring it to the front again to force a redraw/refresh.

   This gets really annoying when you have two X11 devices open.  If
   you bring the inactive one to the front while R is busy plotting on
   the active device, the inactive one will not be redrawn/refreshed
   once plotting is done.  Just white space staring back at you...

Regards,
  -tom



R> R.version
         _                     
platform powerpc-ibm-aix4.3.1.0
arch     powerpc               
os       aix4.3.1.0            
system   powerpc, aix4.3.1.0   
status   Patched               
major    1                     
minor    3.0                   
year     2001                  
month    08                    
day      21                    
language R                     


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 22 18:27:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 22 Aug 2001 18:27:05 +0100 (BST)
Subject: [Rd] X11 protocol errors after all x11 devices are closed
 (PR#1065)
In-Reply-To: <pxzo8sgmk6.fsf@infiniti.ece.cmu.edu>
Message-ID: <Pine.GSO.4.31.0108221824520.29653-100000@auk.stats>

Tom,

Thanks.  Yes, I think 1) is related, and the original bug seems only to
happen on pseudocolor screens (which I was using).

I suspect that narrows it down enough for me to find it.

Brian

On 22 Aug 2001, Thomas Vogels wrote:

>
> ripley@stats.ox.ac.uk writes:
>
> > > x11()
> > > dev.off()
> > null device
> >           1
> > > x11()
> > > plot.new()
> > Warning messages:
> > 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> > 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> >
> > This only happens if all x11 devices are shut down, so the X11 connection
> > is restarted.  We had problems with this when the event handlers
> > were changed prior to 1.3.0, and it looks as if the logic is still
> > incorrect.
> >
> > As far as I can see subsequent plots are correct.
> >
> > Carrying on:
> >
> > > dev.off()
> > null device
> >           1
> > > x11()
> > > plot.new()
> > Warning message:
> > X11 protocol error: BadAccess (attempt to access private resource denied)
> >
> > (only one error this time).
>
>
> I see the same thing on an AIX machine with the patched R-release of
> yesterday.  I've recently noticed this problem when I tried to change
> the colortype.  For this you have to shutdown all devices, then I got
> the error messages.  I figured this might be an "AIX" thing at
> first...
>
> Possibly related (if not, I'll file separate bug reports):
>
> 1) I cannot reset the colortype.  When I run out of colors, I used to
>    be able to just shutdown all devices, then restart with
>    x11(colortype=....).  Now I get:
>
> R> x11()
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> R> dev.off()
> null device
>           1
> R> x11(colortype="pseudo.cube")
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> In addition: Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 3: X11 protocol error: BadAccess (attempt to access private resource denied)
> R> dev.off()
> null device
>           1
> R> x11(colortype="gray")
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> In addition: Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 3: X11 protocol error: BadAccess (attempt to access private resource denied)
> R> dev.off()
> null device
>           1
>
>
> 2) Plots are not updated if the window is made visible (from being
>    partially obscured) during a computation before or during the plot.
>    Let's say my xterm (or emacs window) covers the north-west quadrant
>    of R's x11 device window.  Then:
>
> R> data(iris)
> R> pairs(iris[,1:4])
>
>    While pairs is drawing, I bring the device window to the front.
>    All plots that were drawn by pairs will not be redrawn once pairs
>    is done.  So I have to push the device window in the back, then
>    bring it to the front again to force a redraw/refresh.
>
>    This gets really annoying when you have two X11 devices open.  If
>    you bring the inactive one to the front while R is busy plotting on
>    the active device, the inactive one will not be redrawn/refreshed
>    once plotting is done.  Just white space staring back at you...
>
> Regards,
>   -tom
>
>
>
> R> R.version
>          _
> platform powerpc-ibm-aix4.3.1.0
> arch     powerpc
> os       aix4.3.1.0
> system   powerpc, aix4.3.1.0
> status   Patched
> major    1
> minor    3.0
> year     2001
> month    08
> day      21
> language R
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From heydebre@molgen.mpg.de  Wed Aug 22 19:29:29 2001
From: heydebre@molgen.mpg.de (heydebre@molgen.mpg.de)
Date: Wed, 22 Aug 2001 20:29:29 +0200 (MET DST)
Subject: [Rd] cutree (PR#1067)
Message-ID: <200108221829.UAA08571@pubhealth.ku.dk>

Full_Name: Anja von Heydebreck
Version: 1.3.0
OS: Alpha Unix
Submission from: (NULL) (141.14.19.61)


Hi,

I repeatedly obtained meaningless results from the function 'cutree' 
in the 'mva' package, when the argument 'h' was greater or equal to 
the maximum height occuring: 

> library('mva')
> y
     [,1] [,2] [,3] [,4]
[1,]    0    1   -1    1
[2,]    0   -1    1    0
[3,]    0   -1    1    1
[4,]   -1   -2    1    0
> d <- dist(y, method="manhattan")
> hc <- hclust(d, method = "complete")
> hc$height
[1] 1 3 7
> cluster <- cutree(hc, h=max(hc$height))
> cluster
[1] 1108612352          1 1074517880          1

Best regards,

Anja


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Thu Aug 23 01:32:51 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Wed, 22 Aug 2001 19:32:51 -0500
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <200108221235.OAA05855@pubhealth.ku.dk>; from maechler@stat.math.ethz.ch on Wed, Aug 22, 2001 at 02:35:24PM +0200
References: <200108221235.OAA05855@pubhealth.ku.dk>
Message-ID: <20010822193251.A10682@nokomis.stat.umn.edu>

Martin wrote:

> Just this morning,
> I found (again!, we had something close to this before) 
> the following related bugous behavior :
> After interrupting a plot (which would have taken a few minutes and was
> "wrong" anyway), starting another plot, interrupting again [with C-c],
> and maybe the same once more,
> R started just giving a ">" prompt
> but did not react any further at all.
> (C-c would return the prompt, but no other reaction was possible)
> Only killing the R process helped.
> 
> I may try to reproduce more exactly later today.

I'm surprised we don't get more of these sorts of things on UNIX.  Our
current UNIX interrupt handling approach takes an immediate LONGJMP
out of the signal handler no matter where the signal occurs (except
for two places where signals are suspended).  Any place where an
invariant is temporarily broken, any place where an assignment is not
yet complete, is a potential trouble spot.

I've been meaning to raise this issue at some point: I think we will
need to eventually spend some time re-examining how we want to handle
interrupts.  Right now on Windows/Mac interrupts are only processed at
special points in the evaluation process, which is a bit restrictive
(but perhaps unavoidable due to OS limitations).  On UNIX on the other
hand we LONGJUMP out of the signal handler except for the very few
places where the signal gets masked temporarily (GC and one place in
graphics I believe).  The UNIX approach is much too loose even now,
and it becomes even more untenable if we add any kind of threading
support.

We will I think have to come up with a cleaner model for very
selectively enabling interrupt processing, perhaps with some
integration with the external function registration mechanism Duncan
added recently (e.g. marking a function as one where LONGJMP's are
safe).  We will also need some means of controlling interrupt
behaviour from R, such as having some sort of without.interrupts and
with.interrupts functions to be able to program reliable interaction
with interrupts at the R level. (Another sort of thing we might
consider is suspending interrupts during on.exit processing.)

It's a farily big can of worms, and probably not urgent for now, but
we will need to look at it eventually.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Thu Aug 23 01:32:59 2001
From: luke@nokomis.stat.umn.edu (luke@nokomis.stat.umn.edu)
Date: Thu, 23 Aug 2001 02:32:59 +0200 (MET DST)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...) (PR#1068)
Message-ID: <200108230032.CAA09962@pubhealth.ku.dk>

Martin wrote:

> Just this morning,
> I found (again!, we had something close to this before) 
> the following related bugous behavior :
> After interrupting a plot (which would have taken a few minutes and was
> "wrong" anyway), starting another plot, interrupting again [with C-c],
> and maybe the same once more,
> R started just giving a ">" prompt
> but did not react any further at all.
> (C-c would return the prompt, but no other reaction was possible)
> Only killing the R process helped.
> 
> I may try to reproduce more exactly later today.

I'm surprised we don't get more of these sorts of things on UNIX.  Our
current UNIX interrupt handling approach takes an immediate LONGJMP
out of the signal handler no matter where the signal occurs (except
for two places where signals are suspended).  Any place where an
invariant is temporarily broken, any place where an assignment is not
yet complete, is a potential trouble spot.

I've been meaning to raise this issue at some point: I think we will
need to eventually spend some time re-examining how we want to handle
interrupts.  Right now on Windows/Mac interrupts are only processed at
special points in the evaluation process, which is a bit restrictive
(but perhaps unavoidable due to OS limitations).  On UNIX on the other
hand we LONGJUMP out of the signal handler except for the very few
places where the signal gets masked temporarily (GC and one place in
graphics I believe).  The UNIX approach is much too loose even now,
and it becomes even more untenable if we add any kind of threading
support.

We will I think have to come up with a cleaner model for very
selectively enabling interrupt processing, perhaps with some
integration with the external function registration mechanism Duncan
added recently (e.g. marking a function as one where LONGJMP's are
safe).  We will also need some means of controlling interrupt
behaviour from R, such as having some sort of without.interrupts and
with.interrupts functions to be able to program reliable interaction
with interrupts at the R level. (Another sort of thing we might
consider is suspending interrupts during on.exit processing.)

It's a farily big can of worms, and probably not urgent for now, but
we will need to look at it eventually.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jwe@bevo.che.wisc.edu  Thu Aug 23 03:56:33 2001
From: jwe@bevo.che.wisc.edu (John W. Eaton)
Date: Wed, 22 Aug 2001 21:56:33 -0500
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010822193251.A10682@nokomis.stat.umn.edu>
References: <200108221235.OAA05855@pubhealth.ku.dk>
 <20010822193251.A10682@nokomis.stat.umn.edu>
Message-ID: <15236.28897.468790.842201@ricotta.che.wisc.edu>

On 22-Aug-2001, Luke Tierney <luke@nokomis.stat.umn.edu> wrote:

| We will I think have to come up with a cleaner model for very
| selectively enabling interrupt processing, perhaps with some
| integration with the external function registration mechanism Duncan
| added recently (e.g. marking a function as one where LONGJMP's are
| safe).

FWIW, Octave doesn't do this correctly either, it just does a longjmp,
same as R, which can result in leaking memory, and possibly other bad
things.

The way Bash handles this is to only set a flag in the handler for
SIGINT, then at safe places in the code, there are

  QUIT;

statements.  These are macros that expand to some code that may
longjump somewhere depending on the interrupt state.  This method
avoids the problems of jumping out of the signal handler, which may
result in memory leaks or inconsistencies in global state.  The hard
part is inserting the (many!) QUIT statements, though it is probably
somewhat easier if this type of choice is made early on in the life of
the program instead of late.

I only mention Bash because it is a program that is expected to
handle a lot of interrupts without leaking memory or crashing, and
seems to do so reasonably well.

Packages like R and Octave also have to be able to handle interrupts
in calls Fortran or C code that may run for a long time, and which
cannot be modified (at least not easily) to add the equivalent QUIT
calls.  I'm not sure what the right solution is for cases like that.

jwe

-- 
www.octave.org        | Unfortunately we were hoplessly optimistic in 1954
www.che.wisc.edu/~jwe | about the problems of debugging FORTRAN programs.
                      |                                       -- J. Backus
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jwe@bevo.che.wisc.edu  Thu Aug 23 03:57:12 2001
From: jwe@bevo.che.wisc.edu (jwe@bevo.che.wisc.edu)
Date: Thu, 23 Aug 2001 04:57:12 +0200 (MET DST)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...) (PR#1069)
Message-ID: <200108230257.EAA10185@pubhealth.ku.dk>

On 22-Aug-2001, Luke Tierney <luke@nokomis.stat.umn.edu> wrote:

| We will I think have to come up with a cleaner model for very
| selectively enabling interrupt processing, perhaps with some
| integration with the external function registration mechanism Duncan
| added recently (e.g. marking a function as one where LONGJMP's are
| safe).

FWIW, Octave doesn't do this correctly either, it just does a longjmp,
same as R, which can result in leaking memory, and possibly other bad
things.

The way Bash handles this is to only set a flag in the handler for
SIGINT, then at safe places in the code, there are

  QUIT;

statements.  These are macros that expand to some code that may
longjump somewhere depending on the interrupt state.  This method
avoids the problems of jumping out of the signal handler, which may
result in memory leaks or inconsistencies in global state.  The hard
part is inserting the (many!) QUIT statements, though it is probably
somewhat easier if this type of choice is made early on in the life of
the program instead of late.

I only mention Bash because it is a program that is expected to
handle a lot of interrupts without leaking memory or crashing, and
seems to do so reasonably well.

Packages like R and Octave also have to be able to handle interrupts
in calls Fortran or C code that may run for a long time, and which
cannot be modified (at least not easily) to add the equivalent QUIT
calls.  I'm not sure what the right solution is for cases like that.

jwe

-- 
www.octave.org        | Unfortunately we were hoplessly optimistic in 1954
www.che.wisc.edu/~jwe | about the problems of debugging FORTRAN programs.
                      |                                       -- J. Backus

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Thu Aug 23 05:31:37 2001
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Thu, 23 Aug 2001 06:31:37 +0200 (MET DST)
Subject: [Rd] cex.axis in barplot() (PR#1070)
Message-ID: <200108230431.GAA10293@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.3.0
OS: Windows 98
Submission from: (NULL) (24.77.112.193)


I have a hard time to magnify the axis annotations in barplot()
Here are some examples:

#This one has no effect.
barplot(1:3,names.arg=1:3,cex.axis=3,xlab="x",ylab="y")
#This one magnifies the x and y labels
barplot(1:3,names.arg=1:3,cex.lab=3,xlab="x",ylab="y")
#This one has no effect.
barplot(1:3,names.arg=1:3,cex=3,xlab="x",ylab="y")

Maybe this could be added to the "wish list".

I assume that I will be able to create my own axis with
the axis() function.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Aug 23 07:52:24 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 23 Aug 2001 08:52:24 +0200
Subject: [Rd] cex.axis in barplot() (PR#1070)
References: <200108230431.GAA10293@pubhealth.ku.dk>
Message-ID: <3B84A828.E57B14DC@statistik.uni-dortmund.de>

jerome@stat.ubc.ca wrote:
> 
> Full_Name: Jerome Asselin
> Version: 1.3.0
> OS: Windows 98
> Submission from: (NULL) (24.77.112.193)
> 
> I have a hard time to magnify the axis annotations in barplot()
> Here are some examples:
> 
> #This one has no effect.
> barplot(1:3,names.arg=1:3,cex.axis=3,xlab="x",ylab="y")


>From the help:
 ...  further graphical parameters (par) are passed to plot.window() and
title(). 
[let me add: ... and not to axis()...]

But you can use:

 par(cex.axis=3)
 barplot(1:3, names.arg=1:3, xlab="x", ylab="y")


> #This one magnifies the x and y labels
> barplot(1:3,names.arg=1:3,cex.lab=3,xlab="x",ylab="y")

... as expected.


> #This one has no effect.
> barplot(1:3,names.arg=1:3,cex=3,xlab="x",ylab="y")

In this case (no symbols are drawn inside the plot, ...) also expected.

 
> Maybe this could be added to the "wish list".
> 
> I assume that I will be able to create my own axis with
> the axis() function.


Without looking at the code not so easy as the workaround described
above. An example:

  barplot(1:3, names.arg=1:3, xlab="x", ylab="y")
  axis(1, at=1:3)


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Thu Aug 23 10:46:46 2001
From: jerome@stat.ubc.ca (Jerome Asselin)
Date: Thu, 23 Aug 2001 02:46:46 -0700 (PDT)
Subject: [Rd] cex.axis in barplot() (PR#1070)
In-Reply-To: <3B84A828.E57B14DC@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.3.96.1010823024300.13312A-100000@hajek.stat.ubc.ca>


On Thu, 23 Aug 2001, Uwe Ligges wrote:

> jerome@stat.ubc.ca wrote:
> > 
> > Full_Name: Jerome Asselin
> > Version: 1.3.0
> > OS: Windows 98
> > Submission from: (NULL) (24.77.112.193)
> > 
> > I have a hard time to magnify the axis annotations in barplot()
> > Here are some examples:
> > 
> > #This one has no effect.
> > barplot(1:3,names.arg=1:3,cex.axis=3,xlab="x",ylab="y")
> 
> 
> >From the help:
>  ...  further graphical parameters (par) are passed to plot.window() and
> title(). 
> [let me add: ... and not to axis()...]

I did not realize that it wouldn't work because barplot() passes the
parameters to plot.window() or title(). Sorry about that.

> 
> But you can use:
> 
>  par(cex.axis=3)
>  barplot(1:3, names.arg=1:3, xlab="x", ylab="y")
> 

Thanks for the tip!

Jerome Asselin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Thu Aug 23 13:10:54 2001
From: fharrell@virginia.edu (fharrell@virginia.edu)
Date: Thu, 23 Aug 2001 08:10:54 -0400
Subject: [Rd] Fortran routines from LINPACK in S+ but not R
Message-ID: <3B84F2CE.695A20B0@virginia.edu>

Dear R Developers,

I should have had the Design library running in R by now but
have kept putting off changing some calls to LINPACK routines
to use those builtin to R.  Specifically I call dqrsl1 and dqr.
Would it be an easy task to put those in the next release of
R?  If not I'll finally bite the bullet and get back into
reading LINPACK documentation (which I have but haven't
examined in depth). 

If dqrsl1 and dqr are not truly parts of LINPACK but are
front-ends to routines that are, and if anyone has
those front-ends to share, that would also solve my problem
immediately.

Thanks -Frank
-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Thu Aug 23 13:16:09 2001
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 23 Aug 2001 08:16:09 -0400
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010822193251.A10682@nokomis.stat.umn.edu>
References: <200108221235.OAA05855@pubhealth.ku.dk> <20010822193251.A10682@nokomis.stat.umn.edu>
Message-ID: <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com>

On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
>I'm surprised we don't get more of these sorts of things on UNIX.  Our
>current UNIX interrupt handling approach takes an immediate LONGJMP
>out of the signal handler no matter where the signal occurs (except
>for two places where signals are suspended).  Any place where an
>invariant is temporarily broken, any place where an assignment is not
>yet complete, is a potential trouble spot.

Delphi protects against these kind of errors with "try ... except ..."
and "try ... finally ..." blocks to deal with exceptions.  The first
one executes special code if an exception occurs, the second
guarantees execution of cleanup code.

These are implemented as a linked list of records on the stack which
the exception handler knows how to interpret.  When a particular kind
of exception occurs, all "finally" blocks are executed in the
appropriate order (and the stack base pointer is moved to simulate
exits from all active routines) until an "except" block handling the
particular kind of exception is reached.

C doesn't have these statements built in, but presumably someone has
written macros to do the same sort of thing.  Adding them would be a
lot of work, but would be worthwhile.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 23 13:27:22 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 23 Aug 2001 13:27:22 +0100 (BST)
Subject: [Rd] Fortran routines from LINPACK in S+ but not R
In-Reply-To: <3B84F2CE.695A20B0@virginia.edu>
Message-ID: <Pine.LNX.4.31.0108231317420.27971-100000@gannet.stats>

On Thu, 23 Aug 2001 fharrell@virginia.edu wrote:

> Dear R Developers,
>
> I should have had the Design library running in R by now but
> have kept putting off changing some calls to LINPACK routines
> to use those builtin to R.  Specifically I call dqrsl1 and dqr.
> Would it be an easy task to put those in the next release of
> R?  If not I'll finally bite the bullet and get back into
> reading LINPACK documentation (which I have but haven't
> examined in depth).
>
> If dqrsl1 and dqr are not truly parts of LINPACK but are
> front-ends to routines that are, and if anyone has
> those front-ends to share, that would also solve my problem
> immediately.

I am pretty sure that they are not part of LINPACK: certainly dqr is not
and neither has a LINPACK name.  dqr is called by qr.default in S-PLUS,
and you should find dqrdc2 (also not LINPACK) called by R's qr an adequate
substitute.

As for dqrsl1, I've never known exactly what it supposed to do.
Would dqrsl (which is there) suffice?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Thu Aug 23 13:54:31 2001
From: fharrell@virginia.edu (fharrell@virginia.edu)
Date: Thu, 23 Aug 2001 08:54:31 -0400
Subject: [Rd] Fortran routines from LINPACK in S+ but not R
References: <Pine.LNX.4.31.0108231317420.27971-100000@gannet.stats>
Message-ID: <3B84FD07.B056ED1B@virginia.edu>

Prof Brian Ripley wrote:
> 
> On Thu, 23 Aug 2001 fharrell@virginia.edu wrote:
> 
> > Dear R Developers,
> >
> > I should have had the Design library running in R by now but
> > have kept putting off changing some calls to LINPACK routines
> > to use those builtin to R.  Specifically I call dqrsl1 and dqr.
> > Would it be an easy task to put those in the next release of
> > R?  If not I'll finally bite the bullet and get back into
> > reading LINPACK documentation (which I have but haven't
> > examined in depth).
> >
> > If dqrsl1 and dqr are not truly parts of LINPACK but are
> > front-ends to routines that are, and if anyone has
> > those front-ends to share, that would also solve my problem
> > immediately.
> 
> I am pretty sure that they are not part of LINPACK: certainly dqr is not
> and neither has a LINPACK name.  dqr is called by qr.default in S-PLUS,
> and you should find dqrdc2 (also not LINPACK) called by R's qr an adequate
> substitute.

Thanks

> 
> As for dqrsl1, I've never known exactly what it supposed to do.
> Would dqrsl (which is there) suffice?

It probably will, after I get into it.  Calls are very different
on the surface.  Thanks -Frank

> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 23 15:27:07 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 23 Aug 2001 16:27:07 +0200 (MET DST)
Subject: (PR#1065)[Rd] X11 protocol errors after all x11 devices are
Message-ID: <200108231427.QAA19349@pubhealth.ku.dk>

I've fixed the original report and Tom's first.   Someone had incorrrectly
arranged for most of the initialization to be done only once per session.
I did ask before 1.3.0 what the intention was ....  For pseudocolor devices
at least this was biting since the palette was not re-initialized.

I don't see point two on my system, and Martin's point about interruption
was first shown to me by Guido a year ago, so is unrelated.

I am going to close this topic: Tom and Martin feel free to re-submit
your reports separately.

Brian



On 22 Aug 2001, Thomas Vogels wrote:

>
> ripley@stats.ox.ac.uk writes:
>
> > > x11()
> > > dev.off()
> > null device
> >           1
> > > x11()
> > > plot.new()
> > Warning messages:
> > 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> > 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> >
> > This only happens if all x11 devices are shut down, so the X11 connection
> > is restarted.  We had problems with this when the event handlers
> > were changed prior to 1.3.0, and it looks as if the logic is still
> > incorrect.
> >
> > As far as I can see subsequent plots are correct.
> >
> > Carrying on:
> >
> > > dev.off()
> > null device
> >           1
> > > x11()
> > > plot.new()
> > Warning message:
> > X11 protocol error: BadAccess (attempt to access private resource denied)
> >
> > (only one error this time).
>
>
> I see the same thing on an AIX machine with the patched R-release of
> yesterday.  I've recently noticed this problem when I tried to change
> the colortype.  For this you have to shutdown all devices, then I got
> the error messages.  I figured this might be an "AIX" thing at
> first...
>
> Possibly related (if not, I'll file separate bug reports):
>
> 1) I cannot reset the colortype.  When I run out of colors, I used to
>    be able to just shutdown all devices, then restart with
>    x11(colortype=....).  Now I get:
>
> R> x11()
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> R> dev.off()
> null device
>           1
> R> x11(colortype="pseudo.cube")
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> In addition: Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 3: X11 protocol error: BadAccess (attempt to access private resource denied)
> R> dev.off()
> null device
>           1
> R> x11(colortype="gray")
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> In addition: Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 3: X11 protocol error: BadAccess (attempt to access private resource denied)
> R> dev.off()
> null device
>           1
>
>
> 2) Plots are not updated if the window is made visible (from being
>    partially obscured) during a computation before or during the plot.
>    Let's say my xterm (or emacs window) covers the north-west quadrant
>    of R's x11 device window.  Then:
>
> R> data(iris)
> R> pairs(iris[,1:4])
>
>    While pairs is drawing, I bring the device window to the front.
>    All plots that were drawn by pairs will not be redrawn once pairs
>    is done.  So I have to push the device window in the back, then
>    bring it to the front again to force a redraw/refresh.
>
>    This gets really annoying when you have two X11 devices open.  If
>    you bring the inactive one to the front while R is busy plotting on
>    the active device, the inactive one will not be redrawn/refreshed
>    once plotting is done.  Just white space staring back at you...
>
> Regards,
>   -tom
>
>
>
> R> R.version
>          _
> platform powerpc-ibm-aix4.3.1.0
> arch     powerpc
> os       aix4.3.1.0
> system   powerpc, aix4.3.1.0
> status   Patched
> major    1
> minor    3.0
> year     2001
> month    08
> day      21
> language R
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 23 15:38:21 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 23 Aug 2001 16:38:21 +0200 (MET DST)
Subject: [Rd] cex.axis in barplot() (PR#1070)
Message-ID: <200108231438.QAA19530@pubhealth.ku.dk>

I've added a note to the help page for R-patched giving Uwe's workaround,
and will shortly parse ... for R-devel so cex.axis can be inlined.



On Thu, 23 Aug 2001, Uwe Ligges wrote:

> jerome@stat.ubc.ca wrote:
> >
> > Full_Name: Jerome Asselin
> > Version: 1.3.0
> > OS: Windows 98
> > Submission from: (NULL) (24.77.112.193)
> >
> > I have a hard time to magnify the axis annotations in barplot()
> > Here are some examples:
> >
> > #This one has no effect.
> > barplot(1:3,names.arg=1:3,cex.axis=3,xlab="x",ylab="y")
>
>
> >From the help:
>  ...  further graphical parameters (par) are passed to plot.window() and
> title().
> [let me add: ... and not to axis()...]
>
> But you can use:
>
>  par(cex.axis=3)
>  barplot(1:3, names.arg=1:3, xlab="x", ylab="y")
>
>
> > #This one magnifies the x and y labels
> > barplot(1:3,names.arg=1:3,cex.lab=3,xlab="x",ylab="y")
>
> ... as expected.
>
>
> > #This one has no effect.
> > barplot(1:3,names.arg=1:3,cex=3,xlab="x",ylab="y")
>
> In this case (no symbols are drawn inside the plot, ...) also expected.
>
>
> > Maybe this could be added to the "wish list".
> >
> > I assume that I will be able to create my own axis with
> > the axis() function.
>
>
> Without looking at the code not so easy as the workaround described
> above. An example:
>
>   barplot(1:3, names.arg=1:3, xlab="x", ylab="y")
>   axis(1, at=1:3)
>
>
> Uwe Ligges
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Thu Aug 23 15:39:37 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Thu, 23 Aug 2001 09:39:37 -0500
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com>; from dmurdoch@pair.com on Thu, Aug 23, 2001 at 08:16:09AM -0400
References: <200108221235.OAA05855@pubhealth.ku.dk> <20010822193251.A10682@nokomis.stat.umn.edu> <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com>
Message-ID: <20010823093937.A12583@nokomis.stat.umn.edu>

On Thu, Aug 23, 2001 at 08:16:09AM -0400, Duncan Murdoch wrote:
> On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
> >I'm surprised we don't get more of these sorts of things on UNIX.  Our
> >current UNIX interrupt handling approach takes an immediate LONGJMP
> >out of the signal handler no matter where the signal occurs (except
> >for two places where signals are suspended).  Any place where an
> >invariant is temporarily broken, any place where an assignment is not
> >yet complete, is a potential trouble spot.
> 
> Delphi protects against these kind of errors with "try ... except ..."
> and "try ... finally ..." blocks to deal with exceptions.  The first
> one executes special code if an exception occurs, the second
> guarantees execution of cleanup code.
> 
> These are implemented as a linked list of records on the stack which
> the exception handler knows how to interpret.  When a particular kind
> of exception occurs, all "finally" blocks are executed in the
> appropriate order (and the stack base pointer is moved to simulate
> exits from all active routines) until an "except" block handling the
> particular kind of exception is reached.
> 
> C doesn't have these statements built in, but presumably someone has
> written macros to do the same sort of thing.  Adding them would be a
> lot of work, but would be worthwhile.
> 

I'm talking about something related but different: controlling the
point at which an asynchronous signal is brought into the system (and
turned into an exception if we have a proper exception system.)  R
currently has on.exit, and Robert Gentleman and I proposed a more
structured exception mechanism for possible addition to R in the neas
future.

[I sent a posting about the proposed mechanism a while back.  So far
we have received little feedback, so here is another request: Please
have a look at http://www.stat.umn.edu/~luke/R/exceptions/simpcond.html
and let us know if you have any comments/suggestions]

But that is not the issue here.  The issue is whether we allow a
SIGINT signal in UNIX (and whatever its analog is on other systems) to
interrupt the current calculation immediately, no matter where it
might be, or whether we impose more structure.  Windows/Mac pretty
much force more structure at the C level, since their analogs have to
arrive through mechnisms that require explicit polling.  So on Windows
you know that an expression like

	x = malloc(n)

will not get interrupted between the malloc call and the assignment to
x (unless some very low level tricks are involved).  On UNIX, the
signal can arrive in between those two operations.

The safe thing to do on UNIX is to have the signal handler just set a
flag which is then checked at appropriate points.  This is the
approach that John Eaton mentioned, and is used by most Scheme systems
I've looked at.  I suspect Python and Perl do this as well, but I'll
have to check.  This is also the way Java handles thread interrupts.
It would make the UNIX behavior identical to the WIndows behavior.

The drawback for systems like R and Octave is that we rely on being
able to use chunks of C/Fortran that can potentially run for a long
time (forever if they happen to get into infinite loops occasionally)
and where it is either impractical or impossible to insert flag
checking code.  For those situations it is nice to be able to use a
signal handler to force a jump out of that code.  We live without this
ability on Windows/Mac, and don't do too badly there, but it would be
nice not to compltely loose this facility on UNIX. Most numerical code
tends to not behave too badly when exited by a longjmp, but there are
no guarantees.  For example, if a piece of C code does something like this:

	static inited = FALSE;
	if (! inited) {
	    inited = TRUE;
	    ... initialize a table needed for computations ...
        }
        ... use the table ..

and a Control-C arrives in the first call after inited=TRUE is executad
but before the table is fully initialized, then future calls to this
function will happily return nonsense.

One option would be to tag routines at library regestration time as
safe for LONGJMP's or not.  That way we can disable LONGJUMP
interrupts everywhere except in explicitly marked .C or .Fortran calls
(and blocking IO operations). This will insure that no internal R
state gets messed up by asynchronous signals that arrive at on
inopportune time.

But this only addresses the C level.  On Windows/Mac, the place where
a user break is turned into an R exception is (mainly) in the internal
eval, where every 1000 calculatins (or some such number) the flag is
checked and a jump is done if the flag is set.  UNIX would work the
same way.  Since the internals know exactly where this jump can occur,
unlike jumps out of a signal handler, they can make sure all internal
state is consistent before checking the flag.

>From the R level things look different: the 1000'th eval step can
happen anywhere, so a piece of R code that does

	file <- file(file, "w")
        on.exit(close(file))
        ... do something with file ...

has a race condition: an interrupt that arrives between the creation
of the file and the registration of the on.exit handler will leave
the file open.  Something along the lines of

	without.interrupts({
            file <- file(file, "w")
            on.exit(close(file))
            with.interrupts(... do something with file ...)
        })

would be safe but is too awkward in this form. [Using a structured
exception handling mechanism, some sort of try/finally construct,
would make this code cleaner but would not resolve the race
condition.]

There are no easy solutions I think, but we need to look at a range of
options and see what works best.

[Threads add the additional problem that an interrupted thread might
be holding a lock, and failure to release the lock could cause
deadlock.  Using a structured exception handling mechanism to manage
lock release helps, but race conditions are still potentially an issue
with asynchronous interrupts.]

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug 23 16:40:53 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 23 Aug 2001 08:40:53 -0700
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com>
Message-ID: <200108231540.IAA77857@pine.frazmtn.com>

You can get the macros from "C Interfaces and Implementations" by
David Hanson, Chapter 4. He has some references to other C work
by Eric Roberts and Steve Maguire on this.

On Thursday, August 23, 2001, at 05:16 AM, Duncan Murdoch wrote:

> On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
>> I'm surprised we don't get more of these sorts of things on UNIX.  Our
>> current UNIX interrupt handling approach takes an immediate LONGJMP
>> out of the signal handler no matter where the signal occurs (except
>> for two places where signals are suspended).  Any place where an
>> invariant is temporarily broken, any place where an assignment is not
>> yet complete, is a potential trouble spot.
>
> Delphi protects against these kind of errors with "try ... except ..."
> and "try ... finally ..." blocks to deal with exceptions.  The first
> one executes special code if an exception occurs, the second
> guarantees execution of cleanup code.
>
> These are implemented as a linked list of records on the stack which
> the exception handler knows how to interpret.  When a particular kind
> of exception occurs, all "finally" blocks are executed in the
> appropriate order (and the stack base pointer is moved to simulate
> exits from all active routines) until an "except" block handling the
> particular kind of exception is reached.
>
> C doesn't have these statements built in, but presumably someone has
> written macros to do the same sort of thing.  Adding them would be a
> lot of work, but would be worthwhile.
>
> Duncan Murdoch
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug 23 16:50:31 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 23 Aug 2001 08:50:31 -0700 (PDT)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010823093937.A12583@nokomis.stat.umn.edu>
Message-ID: <Pine.A41.4.33.0108230843490.135314-100000@homer05.u.washington.edu>

On Thu, 23 Aug 2001, Luke Tierney wrote:

> On Thu, Aug 23, 2001 at 08:16:09AM -0400, Duncan Murdoch wrote:
> > On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
> > >I'm surprised we don't get more of these sorts of things on UNIX.  Our
> > >current UNIX interrupt handling approach takes an immediate LONGJMP
> > >out of the signal handler no matter where the signal occurs (except
> > >for two places where signals are suspended).  Any place where an
> > >invariant is temporarily broken, any place where an assignment is not
> > >yet complete, is a potential trouble spot.

This is what is happening in the segfault caused by interrupting
Sys.sleep under Linux.  Presumably the fix is to wait and take the
interrupt after restoring the InputHandler.  It would be nice if someone
who understood this sort of thing could fix it before 1.3.1

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 23 18:05:43 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 23 Aug 2001 18:05:43 +0100 (BST)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <Pine.A41.4.33.0108230843490.135314-100000@homer05.u.washington.edu>
Message-ID: <Pine.GSO.4.31.0108231804080.6282-100000@auk.stats>

On Thu, 23 Aug 2001, Thomas Lumley wrote:

> On Thu, 23 Aug 2001, Luke Tierney wrote:
>
> > On Thu, Aug 23, 2001 at 08:16:09AM -0400, Duncan Murdoch wrote:
> > > On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
> > > >I'm surprised we don't get more of these sorts of things on UNIX.  Our
> > > >current UNIX interrupt handling approach takes an immediate LONGJMP
> > > >out of the signal handler no matter where the signal occurs (except
> > > >for two places where signals are suspended).  Any place where an
> > > >invariant is temporarily broken, any place where an assignment is not
> > > >yet complete, is a potential trouble spot.
>
> This is what is happening in the segfault caused by interrupting
> Sys.sleep under Linux.  Presumably the fix is to wait and take the
> interrupt after restoring the InputHandler.  It would be nice if someone
> who understood this sort of thing could fix it before 1.3.1

Well, I don't know if I will have time, but I do think I know how to do it.
I suspect I always knew this could happen, but forgot to secure against it,
and it hadn't (hasn't) come up in earnest yet .

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Thu Aug 23 18:37:16 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Thu, 23 Aug 2001 13:37:16 -0400 (EDT)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010823093937.A12583@nokomis.stat.umn.edu>
Message-ID: <Pine.GSO.4.10.10108231311180.15781-100000@hsph.harvard.edu>

On Thu, 23 Aug 2001, Luke Tierney wrote:

> I'm talking about something related but different: controlling the
> point at which an asynchronous signal is brought into the system (and
> turned into an exception if we have a proper exception system.)  R
> currently has on.exit, and Robert Gentleman and I proposed a more
> structured exception mechanism for possible addition to R in the neas
> future.
> 
> [I sent a posting about the proposed mechanism a while back.  So far
> we have received little feedback, so here is another request: Please
> have a look at http://www.stat.umn.edu/~luke/R/exceptions/simpcond.html
> and let us know if you have any comments/suggestions]
> 
> But that is not the issue here.  The issue is whether we allow a
> SIGINT signal in UNIX (and whatever its analog is on other systems) to
> interrupt the current calculation immediately, no matter where it
> might be, or whether we impose more structure.  Windows/Mac pretty
> much force more structure at the C level, since their analogs have to
> arrive through mechnisms that require explicit polling.  So on Windows
> you know that an expression like
> 
> 	x = malloc(n)
> 
> will not get interrupted between the malloc call and the assignment to
> x (unless some very low level tricks are involved).  On UNIX, the
> signal can arrive in between those two operations.

That sounds like two problems--- the first being how to make sure that the
allocation and assignment happen as an atomic operation (that's not
difficult--- we just throw a critical section around it) but also in the
event of an interrupt, what to do with things like allocated memory in the
case of an interrupt (which was Duncan's point in the earlier message that
got snipped). Unfortunately, I think the transactional (is that a word?) 
database people may be the only ones with a good handle on that particular
problem and thats expensive... Though I suppose if you're wrapping
everything in an environment and interrupt could just ensure the
destruction of the environment, but it doesn't handle global variables.
You'd need some sort of stack on each variable that kept weak references
to previous values (since R doesn't usually access things by reference
unless you force it, right?) until they're garbage collected at which
point their weak references will also be removed from the stack--- "Undo
Capability, Limited Time Only!" :-)


> 
> The safe thing to do on UNIX is to have the signal handler just set a
> flag which is then checked at appropriate points.  This is the
> approach that John Eaton mentioned, and is used by most Scheme systems
> I've looked at.  I suspect Python and Perl do this as well, but I'll
> have to check.  This is also the way Java handles thread interrupts.
> It would make the UNIX behavior identical to the WIndows behavior.
> 
> The drawback for systems like R and Octave is that we rely on being
> able to use chunks of C/Fortran that can potentially run for a long
> time (forever if they happen to get into infinite loops occasionally)
> and where it is either impractical or impossible to insert flag
> checking code.  For those situations it is nice to be able to use a
> signal handler to force a jump out of that code.  We live without this
> ability on Windows/Mac, and don't do too badly there, but it would be
> nice not to compltely loose this facility on UNIX. Most numerical code
> tends to not behave too badly when exited by a longjmp, but there are
> no guarantees.  For example, if a piece of C code does something like this:
> 
> 	static inited = FALSE;
> 	if (! inited) {
> 	    inited = TRUE;
> 	    ... initialize a table needed for computations ...
>         }
>         ... use the table ..
> 
> and a Control-C arrives in the first call after inited=TRUE is executad
> but before the table is fully initialized, then future calls to this
> function will happily return nonsense.

Step 1. Have anyone who uses statics burned at the stake for not writing
threadsafe code ;-) 

> 
> One option would be to tag routines at library regestration time as
> safe for LONGJMP's or not.  That way we can disable LONGJUMP
> interrupts everywhere except in explicitly marked .C or .Fortran calls
> (and blocking IO operations). This will insure that no internal R
> state gets messed up by asynchronous signals that arrive at on
> inopportune time.

I think you'll want finer grain control as well--- my guess would be to
have external calls execute within a critical section (like Java, if my
understanding is correct) unless explicitly marked otherwise but still
allow for a critical section to be entered (and left) within the code
block. An example would be something like reading from a URL where I may
spend some time blocked waiting for a connection where you would want the
ability to break out without having to wait for a timeout, but if for some
reason once the transfer is started it must be allowed to complete I would
want to engage the critical section later in the function. 

> 
> But this only addresses the C level.  On Windows/Mac, the place where
> a user break is turned into an R exception is (mainly) in the internal
> eval, where every 1000 calculatins (or some such number) the flag is
> checked and a jump is done if the flag is set.  UNIX would work the
> same way.  Since the internals know exactly where this jump can occur,
> unlike jumps out of a signal handler, they can make sure all internal
> state is consistent before checking the flag.
> 
> >From the R level things look different: the 1000'th eval step can
> happen anywhere, so a piece of R code that does
> 
> 	file <- file(file, "w")
>         on.exit(close(file))
>         ... do something with file ...
> 
> has a race condition: an interrupt that arrives between the creation
> of the file and the registration of the on.exit handler will leave
> the file open.  Something along the lines of
> 
> 	without.interrupts({
>             file <- file(file, "w")
>             on.exit(close(file))
>             with.interrupts(... do something with file ...)
>         })
> 
> would be safe but is too awkward in this form. [Using a structured
> exception handling mechanism, some sort of try/finally construct,
> would make this code cleaner but would not resolve the race
> condition.]
> 
> There are no easy solutions I think, but we need to look at a range of
> options and see what works best.
> 
> [Threads add the additional problem that an interrupted thread might
> be holding a lock, and failure to release the lock could cause
> deadlock.  Using a structured exception handling mechanism to manage
> lock release helps, but race conditions are still potentially an issue
> with asynchronous interrupts.]

I'm just sort of pulling stuff out of thin air and I don't expect this
stuff to be easy to implement, but here goes: :-)

Say, we have an ideal world where R executes in a bytecode VM like Java or
something else---I've noticed that this idea pops up every now and then
for performance reasons. In this case, why not just take it one step
further and have the R environment actually be something of a lightweight
operating system (they don't have to be bloaty and the VM's nature means
it can be fairly abstracted---no need for 'device drivers' in the
traditional sense and whatnot) that manages each of R's user-level threads
as a distinct process. The 'OS' then handles the context switching and
preemption that we'll need anyway but also handles interrupt cases by
trapping them from the operating system (using signal handlers or the
particular OS's analogue). The interrupt handler would then be able to
forcibly shutdown whatever shared resources and memory allocated to the
'process' in the same way it happens in a real OS (this would obviously
require that the I/O system be abstracted away in internal and C calls---
but I think we've already got a good start on that with the connection
mechanism and we want it for other reasons as well). My thought is that
this sort of set up would also change the flavour of the native threading
as well since it actually becomes more analogous to developing an SMP
operating system, which people already know how to do, though you would
want to keep the 'OS' bits to an absolute minimum more like an RTOS than a
UNIX or something like that (read: primitive :-)). 

> 
> luke
> 
> -- 
> Luke Tierney
> University of Minnesota                      Phone:           612-625-7843
> School of Statistics                         Fax:             612-624-8868
> 313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
> Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Thu Aug 23 18:41:37 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Thu, 23 Aug 2001 12:41:37 -0500
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <200108231540.IAA77857@pine.frazmtn.com>; from deleeuw@stat.ucla.edu on Thu, Aug 23, 2001 at 08:40:53AM -0700
References: <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com> <200108231540.IAA77857@pine.frazmtn.com>
Message-ID: <20010823124136.A13455@nokomis.stat.umn.edu>

That's a good set of tools for starting from scratch.  But we really
have all the internal harness already in the form of the R context
structure, and Hansen's exception objects are more primitive (not a
criticism: they're designed to be quite simple) than the things we
have in the proposal I mentioned.  Wrapping some macros like Hansen's
or others around what we have isn't hard.

One thing to keep in mind though: whatever tools you use, all code has
to agree on it.  (You can't mix Hansen's macros with R's contexts
since both assume they are the only ones using LONGJMP.)  When the
implementation language provides the mechanism, like C++ or Java
exceptions, you are guaranteed that.  When grafting onto a language
like C you need to put someone in charge and make everyone else play
nice with that one.

luke


On Thu, Aug 23, 2001 at 08:40:53AM -0700, Jan de Leeuw wrote:
> You can get the macros from "C Interfaces and Implementations" by
> David Hanson, Chapter 4. He has some references to other C work
> by Eric Roberts and Steve Maguire on this.
> 
> On Thursday, August 23, 2001, at 05:16 AM, Duncan Murdoch wrote:
> 
> > On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
> >> I'm surprised we don't get more of these sorts of things on UNIX.  Our
> >> current UNIX interrupt handling approach takes an immediate LONGJMP
> >> out of the signal handler no matter where the signal occurs (except
> >> for two places where signals are suspended).  Any place where an
> >> invariant is temporarily broken, any place where an assignment is not
> >> yet complete, is a potential trouble spot.
> >
> > Delphi protects against these kind of errors with "try ... except ..."
> > and "try ... finally ..." blocks to deal with exceptions.  The first
> > one executes special code if an exception occurs, the second
> > guarantees execution of cleanup code.
> >
> > These are implemented as a linked list of records on the stack which
> > the exception handler knows how to interpret.  When a particular kind
> > of exception occurs, all "finally" blocks are executed in the
> > appropriate order (and the stack base pointer is moved to simulate
> > exits from all active routines) until an "except" block handling the
> > particular kind of exception is reached.
> >
> > C doesn't have these statements built in, but presumably someone has
> > written macros to do the same sort of thing.  Adding them would be a
> > lot of work, but would be worthwhile.
> >
> > Duncan Murdoch
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > .-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> > FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-
> > request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > ._._._
> >
> 
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
> homepage: http://www.stat.ucla.edu/~deleeuw
> ========================================================
>            No matter where you go, there you are. --- Buckaroo Banzai
>                     http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
> ========================================================
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kevin.Wright@pioneer.com  Thu Aug 23 19:38:15 2001
From: Kevin.Wright@pioneer.com (Kevin.Wright@pioneer.com)
Date: Thu, 23 Aug 2001 20:38:15 +0200 (MET DST)
Subject: [Rd] postscript & ps.options documentation (PR#1071)
Message-ID: <200108231838.UAA20793@pubhealth.ku.dk>

Full_Name: Kevin Wright
Version: 1.3
OS: Windows 95
Submission from: (NULL) (170.54.59.130)



In the help pages for postscript and ps.options, it is not clear that the
ps.options must be set before calling the postscript driver.

I was calling postscript() and then trying to set ps.options().  This gave
unexpected results.

Sorry if this is clear to everyone else.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 24 08:30:44 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 24 Aug 2001 08:30:44 +0100 (BST)
Subject: [Rd] RFC: type conversion in read.table
Message-ID: <Pine.LNX.4.31.0108240825520.29809-100000@gannet.stats>

Currently read.table is rather limited in its type conversion.
The algorithm is

0) Read as character
1) Try to convert to numeric. If that works, quit
2) Convert to factor unless !as.is.

I am thinking about adding more flexibility and more classes by the
following two changes.


A) Anticipating the arrival of classes for all R objects, add an
argument say `colClasses' that allows the user to specify the desired
class for every column.  This could default to "auto", or NA if people
think "auto" might be a relevant class name one day.

The effect would be equivalent to running

data[[i]] <- as(data[[i]], colClasses[i])

instead of

data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)

except that standard classes such as "numeric", "factor", "logical",
"character" would be dispatched directly, and argument "dec" would be
consulted where appropriate.

colClasses = "character" would suppress all conversions, which cannot
currently be done.


B) Make the default "auto" option somewhat cleverer.  I am thinking of
trying the following in turn

logical
integer
numeric
complex
factor   (only if !as.is[i] for backwards compatibility).

The `dec' option needs to be used for numeric/complex.

This would be done by a documented typeConvert function, and
should normally be fast (just look at the first item to rule
out much of the list).


This does mean that data frames would be much more likely to end up
containing integer or logical variables (although they can now).
I have already fixed model.frame/matrix to handle logical variables,
and would need to check that they do handle integer variables.


Questions:

1) Is this desirable?

2) Are the names sensible?

3) Is there any need to allow users to specify either the set of
   classes used by "auto" or lists of classes on a column-specific
   basis?

4) Currently the default is to get something without much information
   loss, and that would remain.  My intention is that if a class is
   specified and conversion is not possible that the result would be
   (mainly?) NAs.  Any problem with that?


Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Aug 24 10:56:35 2001
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Fri, 24 Aug 2001 11:56:35 +0200 (MET DST)
Subject: [Rd] Reading Inf and NaN values under windows (PR#1072)
Message-ID: <200108240956.LAA26764@pubhealth.ku.dk>

Under windows, R supports IEEE floating point arithmetic, but doesn't
allow conversion of Inf and NaN from character to numeric.

R> is.nan(NaN)
[1] TRUE
R> as.numeric(as.character(NaN))
[1] NA
Warning message: 
NAs introduced by coercion 
R> is.infinite(Inf)
[1] TRUE
R> as.numeric(as.character(Inf))
[1] NA
Warning message: 
NAs introduced by coercion 

whereas under Linux

R> as.numeric(as.character(NaN))
[1] NaN
R> as.numeric(as.character(Inf))
[1] Inf

S-PLUS 3.3 for Windows gives

S-PLUS> as.numeric(as.character(Inf))
[1] Inf
S-PLUS> as.numeric(as.character(NaN))
[1] NA
Warning messages:
  1 missing value  generated coercing from character to numeric in: 
        as.numeric(as.character(NaN))

I first came across this problem when trying to read in a dataset with
Inf values using read.table().  Under Windows, the variable with the
infinite value is converted to a factor. The scan() function also refuses
to read in Inf and NaN as numeric values under Windows.

Martyn

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 24 14:17:05 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Aug 2001 15:17:05 +0200
Subject: Bug report numbers. Re: Interrupts (was Re: [Rd] X11 protocol errors ...) (PR#1069)
In-Reply-To: <200108230257.EAA10185@pubhealth.ku.dk>
References: <200108230257.EAA10185@pubhealth.ku.dk>
Message-ID: <x27kvtk372.fsf@blueberry.kubism.ku.dk>

jwe@bevo.che.wisc.edu writes:
...


Argh! Would you please everyone try to be careful with the
R-devel/R-bugs issues! If you remove the PR# without removing R-bugs
from the Cc: list, you'll generate a new bug report. And so will
anyone who follows up on the version that gets sent directly to
r-devel without PR#.

We now have this issue as PR#1065, 1068 and 1069....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Aug 24 14:18:17 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 24 Aug 2001 09:18:17 -0400
Subject: [Rd] RFC: type conversion in read.table
References: <Pine.LNX.4.31.0108240825520.29809-100000@gannet.stats>
Message-ID: <3B865419.68732554@research.bell-labs.com>

Prof Brian Ripley wrote:
> 
> Currently read.table is rather limited in its type conversion.
> The algorithm is
> 
> 0) Read as character
> 1) Try to convert to numeric. If that works, quit
> 2) Convert to factor unless !as.is.
> 
> I am thinking about adding more flexibility and more classes by the
> following two changes.
> 
> A) Anticipating the arrival of classes for all R objects, add an
> argument say `colClasses' that allows the user to specify the desired
> class for every column.  This could default to "auto", or NA if people
> think "auto" might be a relevant class name one day.
> 
> The effect would be equivalent to running
> 
> data[[i]] <- as(data[[i]], colClasses[i])
> 
> instead of
> 
> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
> 
> except that standard classes such as "numeric", "factor", "logical",
> "character" would be dispatched directly, and argument "dec" would be
> consulted where appropriate.
> 
> colClasses = "character" would suppress all conversions, which cannot
> currently be done.
> 
> B) Make the default "auto" option somewhat cleverer.  I am thinking of
> trying the following in turn
> 
> logical
> integer
> numeric
> complex
> factor   (only if !as.is[i] for backwards compatibility).
> 
> The `dec' option needs to be used for numeric/complex.
> 
> This would be done by a documented typeConvert function, and
> should normally be fast (just look at the first item to rule
> out much of the list).
> 
> This does mean that data frames would be much more likely to end up
> containing integer or logical variables (although they can now).
> I have already fixed model.frame/matrix to handle logical variables,
> and would need to check that they do handle integer variables.
> 
> Questions:
> 
> 1) Is this desirable?

Yes, definitely.  It also fits very well into the formal class idiom. 
Couple of suggestions below.

> 
> 2) Are the names sensible?
> 
> 3) Is there any need to allow users to specify either the set of
>    classes used by "auto" or lists of classes on a column-specific
>    basis?

I think the most flexible way to get what you want is something like the
following.

The natural default for the colClasses argument is the name of a class,
but a "virtual" class in green book terminology.

I've been playing around with some data-frame related software mostly as
tests for the methods code (in SLanguage/SModels in the Omegahat tree).

The class used there for this purpose is called "dataVariable", meaning
anything that can conceptually be a variable in a data frame.  Actual
classes for variables extend this class, maybe trivially, maybe by some
method.

What's needed for the default here is essentially a method to coerce
class "character" to "dataVariable" (or whatever name one wants to
use).  When we are really using formal methods, this would be specified
by a call to setAs (green book, p307).  Then in effect
  data[[i]] <- as(data[[i]], colClasses[i])
applies in the default case as well.

Users could specialize the default by over-riding the setAs, but a
better way would be to define a new virtual class, with its own method
for coercion.  Users would then have essentially unlimited flexibility,
by supplying the name of that class in the colClasses argument.

> 4) Currently the default is to get something without much information
>    loss, and that would remain.  My intention is that if a class is
>    specified and conversion is not possible that the result would be
>    (mainly?) NAs.  Any problem with that?

As a default, seems fine.  When the user supplies a class, this implies
an as() method, which can then decide what to do in case of
problems--error, NA, or whatever.

> Brian
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 24 15:23:56 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 24 Aug 2001 15:23:56 +0100 (BST)
Subject: [Rd] Reading Inf and NaN values under windows (PR#1072)
In-Reply-To: <200108240956.LAA26764@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0108241514200.8075-100000@gannet.stats>

On Fri, 24 Aug 2001 plummer@iarc.fr wrote:

> Under windows, R supports IEEE floating point arithmetic, but doesn't
> allow conversion of Inf and NaN from character to numeric.
>
> R> is.nan(NaN)
> [1] TRUE
> R> as.numeric(as.character(NaN))
> [1] NA
> Warning message:
> NAs introduced by coercion
> R> is.infinite(Inf)
> [1] TRUE
> R> as.numeric(as.character(Inf))
> [1] NA
> Warning message:
> NAs introduced by coercion
>
> whereas under Linux
>
> R> as.numeric(as.character(NaN))
> [1] NaN
> R> as.numeric(as.character(Inf))
> [1] Inf
>
> S-PLUS 3.3 for Windows gives
>
> S-PLUS> as.numeric(as.character(Inf))
> [1] Inf
> S-PLUS> as.numeric(as.character(NaN))
> [1] NA
> Warning messages:
>   1 missing value  generated coercing from character to numeric in:
>         as.numeric(as.character(NaN))
>
> I first came across this problem when trying to read in a dataset with
> Inf values using read.table().  Under Windows, the variable with the
> infinite value is converted to a factor. The scan() function also refuses
> to read in Inf and NaN as numeric values under Windows.

It's the same cause: strtod is used.  That's not required to support
IEC 60559 (to be correct) specials, but glibc happens to.

We have R_strtod: we should make proper use of it.  I'll do that for
1.3.1.

Brian

>
> Martyn
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status =
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 22
>  language = R
>
> Windows NT 4.0 (build 1381) Service Pack 6
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Aug 24 16:36:23 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 24 Aug 2001 17:36:23 +0200 (MET DST)
Subject: [Rd] cutree (PR#1067)
Message-ID: <200108241536.RAA01942@pubhealth.ku.dk>

>>>>> "Anja" == Anja von Heydebreck <heydebre@molgen.mpg.de> writes:

    Anja> Full_Name: Anja von Heydebreck Version: 1.3.0 OS: Alpha Unix
    Anja> Submission from: (NULL) (141.14.19.61)

Thank you

    Anja> I repeatedly obtained meaningless results from the function
    Anja> 'cutree' in the 'mva' package, when the argument 'h' was greater
    Anja> or equal to the maximum height occuring:

Here is an executable version of Anja's example:

 library('mva')
 y <-
 rbind(c( 0,  1, -1, 1),
       c( 0, -1,  1, 0),
       c( 0, -1,  1, 1),
       c(-1, -2,  1, 0))
 d <- dist(y, method="manhattan")
 hc <- hclust(d, method = "complete")
 hc$height
 ## [1] 1 3 7
 ( cluster <- cutree(hc, h=max(hc$height)))

  ## Anja got
  ## [1] 1108612352          1 1074517880          1

  ## Martin: I get
  ## [1] 0 0 0 0

even though I don't get random results, it's still wrong.
I'll look at a fix.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Fri Aug 24 19:18:24 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 24 Aug 2001 14:18:24 -0400
Subject: [Rd] RE: Variable lables (was Re: [R] Reading SAS version 8 data into
Message-ID: <5429125E11E4D411AF7300805FE603A8014CED54@groexmbcr02.pfizer.com>

[Moved from R-help]

> From: fharrell@virginia.edu [mailto:fharrell@virginia.edu]
> I store variable labels as "label" attributes of vectors
> and use then in various plotting functions as well as the
> describe() function.

I would like to see general support for label attributes in the R plotting
and modeling functions.  One possible way of implementing this is to create
a replacement for the standard "deparse(substitute(blah))" idiom. This
function, getlabel(), checks for a label attribute and returns that if
present. Otherwise it returns the variable's name as a string.

Here's some code I've put together:

label  <-  function(x) attr(x,"label")

"label<-" <-  function(x, value )
  {
    m  <-  match.call()
    m[[1]]  <- as.name("attr<-")
    m$value  <- NULL
    m$which  <- "label"
    m$value  <- value
    eval(m)
  }

getlabel <- function(x)
  {
    tmp <- attr(x,"label")
    if(is.null(tmp) || tmp=="")
      {
        m  <- match.call()
        m[[1]] <- as.name('substitute')
        tmp <- deparse(eval(m,envir=parent.frame()))
      }
    return(tmp)
  }

I've done some testing, and getlabel seems to work fine as a substitute for
"deparse(subsitute(x))" in the plot commands.

There are a couple of problems.  First, attributes are carried along in
sometime unexpected ways.  For example, attributes are carried along by all
of the arethmetic operations I tried:
   > x <- rnorm(1)
   > label(x) <- "x label"
   > 
   > sqrt(x)
    [1] 0.8888801
   attr(,"label")
   [1] "x label"
   > x+1
    [1] 1.8888801
   attr(,"label")
   [1] "x label"
Ideally, performing an operation the creates a new variable should mask off
the label attribute (what about other attributes?).  I recognize that this
would require changes to R.  Would this be a big task?

Second, unless one bounds the length of the labels, it can get pretty messy
to use them in some places, (eg the coefficients table reported by
print.summary).  I can see a couple of solutions for this problem.  A)
Truncate labels when necessary.   B) Have 2 attributes--One short 'label'
that has a fixed length (say 30 characters), and one long 'description' that
can has no length limit.  C) Continue to use the variable name given in the
call for places where length is a problem, but show a translation between
the variable name and the label somewhere else as part of the output.

Except for the problem of the label attribute getting 'carried along' when
it is not desirable, I think that it would be straightforward and 'backwards
compatible' to add general support for variable labels.  

I am willing to submit patches for functions that I regularly use.  Would
others be willing to contribute?  Would the patches be accepted?

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Sat Aug 25 03:08:04 2001
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Sat, 25 Aug 2001 04:08:04 +0200 (MET DST)
Subject: [Rd] Wierd problem comparing numeric values and list using == (PR#1073)
Message-ID: <200108250208.EAA03656@pubhealth.ku.dk>


Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
applied to elements of a list, particularly when one of the elements is of
mode integer:

	> list(1) == list(1)
	[1] FALSE
	> 1 == list(1)
	[1] TRUE
	> as.integer(1)==list(as.integer(1))
	[1] FALSE
	> as.integer(1)==list(as.double(1))
	[1] FALSE
	> list(as.integer(1))==list(as.integer(1))
	[1] FALSE
	> list(as.integer(1))==as.integer(1)
	[1] FALSE
	> list(as.double(1))==list(as.double(1))
	[1] FALSE

However, these cases work:

	> as.double(1)==list(as.integer(1))
	[1] TRUE
	> list(as.integer(1))==as.double(1)
	[1] TRUE

Replacing the bare integer/double with a vector constructed with c() doesn't
change the results, and comparing between vectors created with c() appears
correct.

-Greg

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows NT 4.0 (build 1381) Service Pack 5

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Sat Aug 25 14:42:34 2001
From: fharrell@virginia.edu (fharrell@virginia.edu)
Date: Sat, 25 Aug 2001 09:42:34 -0400
Subject: [Rd] Re: Variable lables (was Re: [R] Reading SAS version 8 data into
References: <5429125E11E4D411AF7300805FE603A8014CED54@groexmbcr02.pfizer.com>
Message-ID: <3B87AB4A.B3A498DD@virginia.edu>

Dear Greg,

I too would like to see labels be more a part of R.
In Hmisc I allow labels to be any length but plotting
and table making functions have options to abbreviate()
them or use variable names instead of labels.

I think your code is more complex that is really needed.

The problem with defaulting to deparse(...) is that
multiple function pass-throughs return the wrong result:

> f <- function(w)getlabel(w)
> g <- function(z)f(z)
> g(y)
[1] "z"

So I don't see a large role for the deparse(...) method.

The Hmisc library already defines label<- so if you
are willing to use another name for your version that
would prevent confusion from users of Hmisc.

The problem of labels being retained after you do
arithmetic on the variable is a real one, and one
I've put up with for a long time with S-Plus.  It would
be nice if R could prevent that but that is getting tricky.
What I've wanted more generally is the ability for the
user to specify a vector of attribute names in options()
that would be preserved upon subsetting.  That way I
wouldn't have to go to trouble to write local versions
of [.factor, etc. that carry the 'label' attribute.
Im my usage, 'label's are always logically carried
forward for subsetting.

Frank


"Warnes, Gregory R" wrote:
> 
> [Moved from R-help]
> 
> > From: fharrell@virginia.edu [mailto:fharrell@virginia.edu]
> > I store variable labels as "label" attributes of vectors
> > and use then in various plotting functions as well as the
> > describe() function.
> 
> I would like to see general support for label attributes in the R plotting
> and modeling functions.  One possible way of implementing this is to create
> a replacement for the standard "deparse(substitute(blah))" idiom. This
> function, getlabel(), checks for a label attribute and returns that if
> present. Otherwise it returns the variable's name as a string.
> 
> Here's some code I've put together:
> 
> label  <-  function(x) attr(x,"label")
> 
> "label<-" <-  function(x, value )
>   {
>     m  <-  match.call()
>     m[[1]]  <- as.name("attr<-")
>     m$value  <- NULL
>     m$which  <- "label"
>     m$value  <- value
>     eval(m)
>   }
> 
> getlabel <- function(x)
>   {
>     tmp <- attr(x,"label")
>     if(is.null(tmp) || tmp=="")
>       {
>         m  <- match.call()
>         m[[1]] <- as.name('substitute')
>         tmp <- deparse(eval(m,envir=parent.frame()))
>       }
>     return(tmp)
>   }
> 
> I've done some testing, and getlabel seems to work fine as a substitute for
> "deparse(subsitute(x))" in the plot commands.
> 
> There are a couple of problems.  First, attributes are carried along in
> sometime unexpected ways.  For example, attributes are carried along by all
> of the arethmetic operations I tried:
>    > x <- rnorm(1)
>    > label(x) <- "x label"
>    >
>    > sqrt(x)
>     [1] 0.8888801
>    attr(,"label")
>    [1] "x label"
>    > x+1
>     [1] 1.8888801
>    attr(,"label")
>    [1] "x label"
> Ideally, performing an operation the creates a new variable should mask off
> the label attribute (what about other attributes?).  I recognize that this
> would require changes to R.  Would this be a big task?
> 
> Second, unless one bounds the length of the labels, it can get pretty messy
> to use them in some places, (eg the coefficients table reported by
> print.summary).  I can see a couple of solutions for this problem.  A)
> Truncate labels when necessary.   B) Have 2 attributes--One short 'label'
> that has a fixed length (say 30 characters), and one long 'description' that
> can has no length limit.  C) Continue to use the variable name given in the
> call for places where length is a problem, but show a translation between
> the variable name and the label somewhere else as part of the output.
> 
> Except for the problem of the label attribute getting 'carried along' when
> it is not desirable, I think that it would be straightforward and 'backwards
> compatible' to add general support for variable labels.
> 
> I am willing to submit patches for functions that I regularly use.  Would
> others be willing to contribute?  Would the patches be accepted?
> 
> -Greg
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Aug 25 14:57:09 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Aug 2001 15:57:09 +0200
Subject: [Rd] Wierd problem comparing numeric values and list using == (PR#1073)
In-Reply-To: <200108250208.EAA03656@pubhealth.ku.dk>
References: <200108250208.EAA03656@pubhealth.ku.dk>
Message-ID: <x23d6gmedm.fsf@blueberry.kubism.ku.dk>

gregory_r_warnes@groton.pfizer.com writes:

> Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
> applied to elements of a list, particularly when one of the elements is of
> mode integer:
> 
> 	> list(1) == list(1)
> 	[1] FALSE
> 	> 1 == list(1)
> 	[1] TRUE
> 	> as.integer(1)==list(as.integer(1))
> 	[1] FALSE
> 	> as.integer(1)==list(as.double(1))
> 	[1] FALSE
> 	> list(as.integer(1))==list(as.integer(1))
> 	[1] FALSE
> 	> list(as.integer(1))==as.integer(1)
> 	[1] FALSE
> 	> list(as.double(1))==list(as.double(1))
> 	[1] FALSE
> 
> However, these cases work:
> 
> 	> as.double(1)==list(as.integer(1))
> 	[1] TRUE
> 	> list(as.integer(1))==as.double(1)
> 	[1] TRUE
> 
> Replacing the bare integer/double with a vector constructed with c() doesn't
> change the results, and comparing between vectors created with c() appears
> correct.

It is not entirely clear what we *should* be doing here. S (-PLUS 3.4)
is at least consistent:

> list(1) == list(1)
Error in list(1) == list(1): == operation on mode "list" undefined
Dumped
>  1 == list(1)
Error in 1 == list(1): == operation on mode "list" undefined
Dumped
> as.integer(1)==list(as.integer(1))
Error in as.integer(1) == list(as.integer(1)): == operation on mode "list"
        undefined
Dumped
...

so one might argue that you shouldn't do that in the first place...
(or that the bug is that we do not expressly forbid doing this.)

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Sun Aug 26 06:15:20 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Sun, 26 Aug 2001 01:15:20 -0400
Subject: [Rd] Re: Variable labels (was Re: [R] Reading SAS version 8 d
 ata into
Message-ID: <5429125E11E4D411AF7300805FE603A8014CED5C@groexmbcr02.pfizer.com>


> From: fharrell@virginia.edu [mailto:fharrell@virginia.edu]
> 
[snip]
> I think your code is more complex that is really needed.
> 
> The problem with defaulting to deparse(...) is that
> multiple function pass-throughs return the wrong result:
> 
[snip]
> So I don't see a large role for the deparse(...) method.
>

Actually one of the reasons that I included the deparse(...) method was to
create a 'drop-in' substitute for the current calls to deparse(...) that are
found throughout the code and that would be backward-compatible.  Having
such a call will immensely simplify changing existing code.

It's true that the variable names don't get correctly handled once you down
a layer of function calls, but that applies AFAIK to the current
deparse(...) method  as well.  

> 
> The Hmisc library already defines label<- so if you
> are willing to use another name for your version that
> would prevent confusion from users of Hmisc.

I don't think there will be a problem as long as the functions do exactly
the same thing.  To that end, perhaps we should agree on a common set of
functions and keep them in sync.  I expect that your functions are better
tested than mine, since they've been available for some time.


> 
> The problem of labels being retained after you do
> arithmetic on the variable is a real one, and one
> I've put up with for a long time with S-Plus.  It would
> be nice if R could prevent that but that is getting tricky.

> What I've wanted more generally is the ability for the
> user to specify a vector of attribute names in options()
> that would be preserved upon subsetting.  That way I
> wouldn't have to go to trouble to write local versions
> of [.factor, etc. that carry the 'label' attribute.
> Im my usage, 'label's are always logically carried
> forward for subsetting.

It seems to be a good idea to preserve the labels during subset operations.
What are the possible cons?

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Sun Aug 26 13:45:02 2001
From: fharrell@virginia.edu (fharrell@virginia.edu)
Date: Sun, 26 Aug 2001 08:45:02 -0400
Subject: [Rd] Re: Variable labels (was Re: [R] Reading SAS version 8 data
 into
References: <5429125E11E4D411AF7300805FE603A8014CED5C@groexmbcr02.pfizer.com>
Message-ID: <3B88EF4E.F256232B@virginia.edu>

"Warnes, Gregory R" wrote:
> 
> > From: fharrell@virginia.edu [mailto:fharrell@virginia.edu]
> >
> [snip]
> > I think your code is more complex that is really needed.
> >
> > The problem with defaulting to deparse(...) is that
> > multiple function pass-throughs return the wrong result:
> >
> [snip]
> > So I don't see a large role for the deparse(...) method.
> >
> 
> Actually one of the reasons that I included the deparse(...) method was to
> create a 'drop-in' substitute for the current calls to deparse(...) that are
> found throughout the code and that would be backward-compatible.  Having
> such a call will immensely simplify changing existing code.

Thanks for your reply Greg.
The "complex" code I was referring to was the eval()
and as.name() parts of your code.  The deparse can be
handy although I have done that on a case-by-case basis.
For example in a high-level plotting function I'll retrieve
label(an argument) and if that is empty I'll use
deparse(substitute(argument)).  
> 
> It's true that the variable names don't get correctly handled once you down
> a layer of function calls, but that applies AFAIK to the current
> deparse(...) method  as well.

Right.  That's why I try to define labels early when a data
frame is being created (e.g, in sas.get).

> 
> >
> > The Hmisc library already defines label<- so if you
> > are willing to use another name for your version that
> > would prevent confusion from users of Hmisc.
> 
> I don't think there will be a problem as long as the functions do exactly
> the same thing.  To that end, perhaps we should agree on a common set of
> functions and keep them in sync.  I expect that your functions are better
> tested than mine, since they've been available for some time.

Mine are simple:

label <- function(x)  {
	lab<-attr(x, "label")
	if(is.null(lab))lab<-""
	lab
	}

#From Bill Dunlap, StatSci  15Mar95:

"label<-" <- if(!.SV4.) function(x, value)
  structure(x, label=value,
            class=c('labelled',
              attr(x,'class')[attr(x,'class')!='labelled'])) else
function(x, value) {    # 1Nov00 for Splus 5.x, 6.x
  attr(x,'label') <- value
  x
}

For non SV4 systems (which include R) you see above that
when putting a label on a variable a class "labelled" is
added.  This is really to handle the subsetting problem
but I would rather get rid of it if subsetting can
respect selected attributes.

> 
> >
> > The problem of labels being retained after you do
> > arithmetic on the variable is a real one, and one
> > I've put up with for a long time with S-Plus.  It would
> > be nice if R could prevent that but that is getting tricky.
> 
> > What I've wanted more generally is the ability for the
> > user to specify a vector of attribute names in options()
> > that would be preserved upon subsetting.  That way I
> > wouldn't have to go to trouble to write local versions
> > of [.factor, etc. that carry the 'label' attribute.
> > Im my usage, 'label's are always logically carried
> > forward for subsetting.
> 
> It seems to be a good idea to preserve the labels during subset operations.
> What are the possible cons?

If the user or a package specifies the list of attribute names
to preserve (I can only think of 'label' and 'units' right now)
I don't see a downside.  -Frank

> 
> -Greg
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@cogsci.ed.ac.uk  Sun Aug 26 23:54:31 2001
From: stephen@cogsci.ed.ac.uk (stephen@cogsci.ed.ac.uk)
Date: Mon, 27 Aug 2001 00:54:31 +0200 (MET DST)
Subject: [Rd] typo in lines.Rd (PR#1075)
Message-ID: <200108262254.AAA08537@pubhealth.ku.dk>

Full_Name: Stephen Eglen
Version: 1.30
OS: Linux
Submission from: (NULL) (128.252.204.21)


The Details section of the help for `lines' has the typo "liens"
(line 30 of R-1.3.0/src/library/base/man/lines.Rd)

Stephen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 27 07:39:00 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 27 Aug 2001 08:39:00 +0200
Subject: [Rd] typo in lines.Rd (PR#1075)
In-Reply-To: <200108262254.AAA08537@pubhealth.ku.dk>
References: <200108262254.AAA08537@pubhealth.ku.dk>
Message-ID: <15241.60164.989595.741475@mithrandir.hornik.net>

>>>>> stephen  writes:

> Full_Name: Stephen Eglen
> Version: 1.30
> OS: Linux
> Submission from: (NULL) (128.252.204.21)


> The Details section of the help for `lines' has the typo "liens"
> (line 30 of R-1.3.0/src/library/base/man/lines.Rd)

Thanks, fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Aug 27 13:45:41 2001
From: jmc@research.bell-labs.com (jmc@research.bell-labs.com)
Date: Mon, 27 Aug 2001 14:45:41 +0200 (MET DST)
Subject: [Rd] Wierd problem comparing numeric values and list using == (PR#1076)
Message-ID: <200108271245.OAA16874@pubhealth.ku.dk>

Peter Dalgaard BSA wrote:
> 
> gregory_r_warnes@groton.pfizer.com writes:
> 
> > Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
> > applied to elements of a list, particularly when one of the elements is of
> > mode integer:
> >
> >       > list(1) == list(1)
> >       [1] FALSE
> >       > 1 == list(1)
> >       [1] TRUE
> >       > as.integer(1)==list(as.integer(1))
> >       [1] FALSE
> >       > as.integer(1)==list(as.double(1))
> >       [1] FALSE
> >       > list(as.integer(1))==list(as.integer(1))
> >       [1] FALSE
> >       > list(as.integer(1))==as.integer(1)
> >       [1] FALSE
> >       > list(as.double(1))==list(as.double(1))
> >       [1] FALSE
> >
> > However, these cases work:
> >
> >       > as.double(1)==list(as.integer(1))
> >       [1] TRUE
> >       > list(as.integer(1))==as.double(1)
> >       [1] TRUE
> >
> > Replacing the bare integer/double with a vector constructed with c() doesn't
> > change the results, and comparing between vectors created with c() appears
> > correct.
> 
> It is not entirely clear what we *should* be doing here. S (-PLUS 3.4)
> is at least consistent:
> 
> > list(1) == list(1)
> Error in list(1) == list(1): == operation on mode "list" undefined
> Dumped
> >  1 == list(1)
> Error in 1 == list(1): == operation on mode "list" undefined
> Dumped
> > as.integer(1)==list(as.integer(1))
> Error in as.integer(1) == list(as.integer(1)): == operation on mode "list"
>         undefined
> Dumped
> ...
> 
> so one might argue that you shouldn't do that in the first place...
> (or that the bug is that we do not expressly forbid doing this.)
> 
>         -p
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

As of 1.4, we will have the `identical' function, which is the right way
to do such comparisons in any case.

So I'd vote for making a use of the comparison operators an error unless
the type is correct (or there is a method defined).  There is even code
in relop.c (commented out) that looks like the right test.  Any
objections?

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Aug 27 13:44:22 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 27 Aug 2001 08:44:22 -0400
Subject: [Rd] Wierd problem comparing numeric values and list using ==
 (PR#1073)
References: <200108250208.EAA03656@pubhealth.ku.dk> <x23d6gmedm.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B8A40A6.15AF96C2@research.bell-labs.com>

Peter Dalgaard BSA wrote:
> 
> gregory_r_warnes@groton.pfizer.com writes:
> 
> > Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
> > applied to elements of a list, particularly when one of the elements is of
> > mode integer:
> >
> >       > list(1) == list(1)
> >       [1] FALSE
> >       > 1 == list(1)
> >       [1] TRUE
> >       > as.integer(1)==list(as.integer(1))
> >       [1] FALSE
> >       > as.integer(1)==list(as.double(1))
> >       [1] FALSE
> >       > list(as.integer(1))==list(as.integer(1))
> >       [1] FALSE
> >       > list(as.integer(1))==as.integer(1)
> >       [1] FALSE
> >       > list(as.double(1))==list(as.double(1))
> >       [1] FALSE
> >
> > However, these cases work:
> >
> >       > as.double(1)==list(as.integer(1))
> >       [1] TRUE
> >       > list(as.integer(1))==as.double(1)
> >       [1] TRUE
> >
> > Replacing the bare integer/double with a vector constructed with c() doesn't
> > change the results, and comparing between vectors created with c() appears
> > correct.
> 
> It is not entirely clear what we *should* be doing here. S (-PLUS 3.4)
> is at least consistent:
> 
> > list(1) == list(1)
> Error in list(1) == list(1): == operation on mode "list" undefined
> Dumped
> >  1 == list(1)
> Error in 1 == list(1): == operation on mode "list" undefined
> Dumped
> > as.integer(1)==list(as.integer(1))
> Error in as.integer(1) == list(as.integer(1)): == operation on mode "list"
>         undefined
> Dumped
> ...
> 
> so one might argue that you shouldn't do that in the first place...
> (or that the bug is that we do not expressly forbid doing this.)
> 
>         -p
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

As of 1.4, we will have the `identical' function, which is the right way
to do such comparisons in any case.

So I'd vote for making a use of the comparison operators an error unless
the type is correct (or there is a method defined).  There is even code
in relop.c (commented out) that looks like the right test.  Any
objections?

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 27 14:35:17 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Aug 2001 15:35:17 +0200
Subject: [Rd] Wierd problem comparing numeric values and list using == (PR#1076)
In-Reply-To: <200108271245.OAA16874@pubhealth.ku.dk>
References: <200108271245.OAA16874@pubhealth.ku.dk>
Message-ID: <x27kvpwrqi.fsf@blueberry.kubism.ku.dk>

jmc@research.bell-labs.com writes:

> > >       > list(1) == list(1)
> > >       [1] FALSE
> > >       > 1 == list(1)
> > >       [1] TRUE
> > >       > as.integer(1)==list(as.integer(1))
> > >       [1] FALSE
> > >       > as.integer(1)==list(as.double(1))
> > >       [1] FALSE
> > >       > list(as.integer(1))==list(as.integer(1))
> > >       [1] FALSE
> > >       > list(as.integer(1))==as.integer(1)
> > >       [1] FALSE
> > >       > list(as.double(1))==list(as.double(1))
> > >       [1] FALSE
> > >
> > > However, these cases work:
> > >
> > >       > as.double(1)==list(as.integer(1))
> > >       [1] TRUE
> > >       > list(as.integer(1))==as.double(1)
> > >       [1] TRUE
....
> As of 1.4, we will have the `identical' function, which is the right way
> to do such comparisons in any case.
> 
> So I'd vote for making a use of the comparison operators an error unless
> the type is correct (or there is a method defined).  There is even code
> in relop.c (commented out) that looks like the right test.  Any
> objections?

Not really, except that I get the usual nagging suspicion that someone
(who?) meant something by doing it this way...

The current logic seems to be that if either side of the == is a
vector of atomic type, try to coerce the list on the other side to a
similar object and then test. However this has a clear bug in that the
coercion is to double even when the atomic vector is integer. If there
are lists on both sides, a pointer comparison is done:

> x<-2
> list(x)==list(x)
[1] FALSE
> list(.Alias(x))==list(.Alias(x))
[1] TRUE

The latter seems highly dubious to me. I'd rather have a recursive
pairwise application of "==" there. However, none of this is what
identical does, is it?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Aug 27 15:31:25 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 27 Aug 2001 10:31:25 -0400
Subject: [Rd] Wierd problem comparing numeric values and list using ==
 (PR#1076)
References: <200108271245.OAA16874@pubhealth.ku.dk> <x27kvpwrqi.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B8A59BD.BE5F7188@research.bell-labs.com>

Peter Dalgaard BSA wrote:
 ....
> > As of 1.4, we will have the `identical' function, which is the right way
> > to do such comparisons in any case.
> >
> > So I'd vote for making a use of the comparison operators an error unless
> > the type is correct (or there is a method defined).  There is even code
> > in relop.c (commented out) that looks like the right test.  Any
> > objections?
> 
> Not really, except that I get the usual nagging suspicion that someone
> (who?) meant something by doing it this way...
> 
> The current logic seems to be that if either side of the == is a
> vector of atomic type, try to coerce the list on the other side to a
> similar object and then test. However this has a clear bug in that the
> coercion is to double even when the atomic vector is integer. If there
> are lists on both sides, a pointer comparison is done:
> 
> > x<-2
> > list(x)==list(x)
> [1] FALSE
> > list(.Alias(x))==list(.Alias(x))
> [1] TRUE
> 
> The latter seems highly dubious to me. I'd rather have a recursive
> pairwise application of "==" there. However, none of this is what
> identical does, is it?

identical essentially applies itself recursively until it encounters an
non-recursive element (in which case it does element-wise comparisons or
something specific to the special type, such as a symbol).  

My take is that the "==" operator is for generating data structures that
look like the arguments but with TRUE, FALSE, or NA in the appropriate
elements. Notice, e.g., that identical(1,NA) is FALSE while 1==NA is NA.

It's possible one would like to do == recursively to all the elements of
two lists, suggesting an lapply of the "==" function.  (R doesn't yet
have a recursive apply to do this at all levels of recursion.)

But in most examples I've seen, users really wanted a single TRUE/FALSE
result, in which case they should _not_ be using the "==" operator.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas.baumann@ch.tum.de  Mon Aug 27 22:05:41 2001
From: thomas.baumann@ch.tum.de (thomas.baumann@ch.tum.de)
Date: Mon, 27 Aug 2001 16:05:41 -0500 (CDT)
Subject: [Rd] colorbar legend for image()
Message-ID: <200108272105.f7RL5gk06656@rc1021.ce.uiuc.edu>

Hi,

are there any plans to add a colorbar legend to image()?

Or such a possibility already implemented which I just haven't
discovered yet. Anyway, I will be willing to spent some time on the
implementation if there isn't anyone working on that already.

Thanks
Thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Aug 27 22:53:09 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 27 Aug 2001 17:53:09 -0400
Subject: [Rd] is.environment, as.environment, and NULL
Message-ID: <3B8AC145.E9483D4F@research.bell-labs.com>

The r-devel (1.4) code has C implementations now of the class and
class<- functions in package methods, and also of as.environment.

The last brings up a question (it shows up in the isas-tests test
suite).

as.environment(NULL) is NULL.  Seems like it has to be, since NULL is
the environment associated with package:base.

But is.environment(NULL) is FALSE, which is also fairly natural, if we
think of testing the type of the argument.

The inconsistency causes a related test in isas-tests.R to produce a
FALSE (where generally they should either evaluate to TRUE or generate
an error).

Looking at the uses of is.environment in the R source itself, most of
them seem to hedge their bets on whether is.environment(NULL) is TRUE or
FALSE.

There isn't a completely consistent solution, given the use of NULL as
an environment.  For the moment it seemed best to live with that one
anomalous result in the tests.

John
-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 27 23:22:54 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Aug 2001 00:22:54 +0200
Subject: [Rd] is.environment, as.environment, and NULL
In-Reply-To: <3B8AC145.E9483D4F@research.bell-labs.com>
References: <3B8AC145.E9483D4F@research.bell-labs.com>
Message-ID: <x2wv3prvlt.fsf@blueberry.kubism.ku.dk>

John Chambers <jmc@research.bell-labs.com> writes:

> There isn't a completely consistent solution, given the use of NULL as
> an environment.  For the moment it seemed best to live with that one
> anomalous result in the tests.

The use of NULL for the base environment is something which I would
like to see go away anyway. It makes little sense semantically (if
anything, you would want the NULL environment to be an empty one), and
there are pitfalls where a NULL value returned by accident can cause
code to work in base but not in a package.

I did start to look into it at some point but ran out of stamina or
got distracted (probably by release timings as usual...). As I recall
it, NULL for base envir is only really used in a handful of places as
a sentinel for searches through the search path, as in:

    for (rho = R_GlobalEnv; rho != R_NilValue; rho = ENCLOS(rho)) ..

The base environment is special because the symbol lookups are
different there, but it could be represented by R_BaseEnv or some such
instead of R_NilValue. I doubt that much interpreted code needs to
explicitly test whether an environment is the base environment. One
thing to watch out for might be saved workspaces, though. On the other
hand, we do not save the search path, so maybe not...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Aug 28 07:25:39 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 28 Aug 2001 08:25:39 +0200
Subject: [Rd] is.environment, as.environment, and NULL
In-Reply-To: <x2wv3prvlt.fsf@blueberry.kubism.ku.dk>
References: <3B8AC145.E9483D4F@research.bell-labs.com>
 <x2wv3prvlt.fsf@blueberry.kubism.ku.dk>
Message-ID: <15243.14691.106481.288305@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> John Chambers <jmc@research.bell-labs.com> writes:
>> There isn't a completely consistent solution, given the use of NULL as
>> an environment.  For the moment it seemed best to live with that one
>> anomalous result in the tests.

> The use of NULL for the base environment is something which I would
> like to see go away anyway. It makes little sense semantically (if
> anything, you would want the NULL environment to be an empty one), and
> there are pitfalls where a NULL value returned by accident can cause
> code to work in base but not in a package.

> I did start to look into it at some point but ran out of stamina or
> got distracted (probably by release timings as usual...). As I recall
> it, NULL for base envir is only really used in a handful of places as
> a sentinel for searches through the search path, as in:

>     for (rho = R_GlobalEnv; rho != R_NilValue; rho = ENCLOS(rho)) ..

> The base environment is special because the symbol lookups are
> different there, but it could be represented by R_BaseEnv or some such
> instead of R_NilValue. I doubt that much interpreted code needs to
> explicitly test whether an environment is the base environment. One
> thing to watch out for might be saved workspaces, though. On the other
> hand, we do not save the search path, so maybe not...

A question, and a remark.

Question, would we want to keep as.environment(NULL) to give the base
package, so that code like ls(envir = NULL) will still work?

Remark, we once discussed making package environments (in particular for
base) read-only.  One way of doing this is via setting attributes, but
we cannot do this on NULL.  Not that I think this is the way to do it,
though ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From christian.hoffmann@wsl.ch  Tue Aug 28 07:40:37 2001
From: christian.hoffmann@wsl.ch (christian.hoffmann@wsl.ch)
Date: Tue, 28 Aug 2001 08:40:37 +0200 (MET DST)
Subject: [Rd] log10 error ?? (PR#1077)
Message-ID: <200108280640.IAA22157@pubhealth.ku.dk>

format((1000000*(1+.Machine$double.eps)),digits=18)
[1] "1000000.0000000002"
> .Machine$double.rounding
[1] 5
format(log10(1000000*(1+.Machine$double.eps)),digits=18)
[1] "5.9999999999999991"  # MUST be > 6 !!!???

format((1000000*(1-.Machine$double.eps)),digits=18)
[1] " 999999.9999999998"
> format(log10(1000000*(1-.Machine$double.eps)),digits=18)
[1] "5.9999999999999991"  

format(10^5.9999999999999991,digits=18)
[1] "999999.9999999979"

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:RODBC, package:MASS, package:prlib, package:pllib,
package:mathlib, package:mva, package:strlib, package:chlib, Autoloads,
package:base

Dr.sc.math.Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Research Institute WSL 
Zuercherstrasse 111
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
e-mail: christian.hoffmann_at_wsl.ch__prevent_spamming
www: http://www.wsl.ch/staff/christian.hoffmann/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 28 08:22:32 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 28 Aug 2001 08:22:32 +0100 (BST)
Subject: [Rd] is.environment, as.environment, and NULL
In-Reply-To: <15243.14691.106481.288305@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0108280819020.20238-100000@gannet.stats>

On Tue, 28 Aug 2001, Kurt Hornik wrote:

> >>>>> Peter Dalgaard BSA writes:
>
> > John Chambers <jmc@research.bell-labs.com> writes:
> >> There isn't a completely consistent solution, given the use of NULL as
> >> an environment.  For the moment it seemed best to live with that one
> >> anomalous result in the tests.
>
> > The use of NULL for the base environment is something which I would
> > like to see go away anyway. It makes little sense semantically (if
> > anything, you would want the NULL environment to be an empty one), and
> > there are pitfalls where a NULL value returned by accident can cause
> > code to work in base but not in a package.
>
> > I did start to look into it at some point but ran out of stamina or
> > got distracted (probably by release timings as usual...). As I recall
> > it, NULL for base envir is only really used in a handful of places as
> > a sentinel for searches through the search path, as in:
>
> >     for (rho = R_GlobalEnv; rho != R_NilValue; rho = ENCLOS(rho)) ..
>
> > The base environment is special because the symbol lookups are
> > different there, but it could be represented by R_BaseEnv or some such
> > instead of R_NilValue. I doubt that much interpreted code needs to
> > explicitly test whether an environment is the base environment. One
> > thing to watch out for might be saved workspaces, though. On the other
> > hand, we do not save the search path, so maybe not...
>
> A question, and a remark.
>
> Question, would we want to keep as.environment(NULL) to give the base
> package, so that code like ls(envir = NULL) will still work?

Interesting.  Was it ever documented to?

> Remark, we once discussed making package environments (in particular for
> base) read-only.  One way of doing this is via setting attributes, but
> we cannot do this on NULL.  Not that I think this is the way to do it,
> though ...

NULL is just shorthand: there is a proper R object for base:

> .GlobalEnv
<environment: R_GlobalEnv>
> is.null(.GlobalEnv)
[1] FALSE

It was news to me that NULL for .GlobalEnv worked at R level.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 28 09:21:43 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 28 Aug 2001 10:21:43 +0200
Subject: [Rd] colorbar legend for image()
In-Reply-To: <200108272105.f7RL5gk06656@rc1021.ce.uiuc.edu>
References: <200108272105.f7RL5gk06656@rc1021.ce.uiuc.edu>
Message-ID: <15243.21655.237789.712132@gargle.gargle.HOWL>


--LSat2th5Z+
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit

>>>>> "thomas" == thomas baumann <thomas.baumann@ch.tum.de> writes:

    thomas> Hi, are there any plans to add a colorbar legend to image()?

    thomas> Or such a possibility already implemented which I just haven't
    thomas> discovered yet. Anyway, I will be willing to spent some time on
    thomas> the implementation if there isn't anyone working on that
    thomas> already.

to the contrary:  Martin Schlather wanted to use legend() on top of image()
and found a buglet in legend()  which has been corrected for 1.3.1 which is
due coming weekend. 
To illustrate the new possibility of legend, I had produced a function
image.legend() and he improved (?!) it to image.scale()
which isn't yet part of any official version of R.
Hence, feedback on the following is *very* welcome. Note that it would only work
correctly for R version >= 1.3.1.  and hence I also attach the 1.3.1
version of legend() {at the end}.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><



--LSat2th5Z+
Content-Type: text/plain
Content-Description: Help for image.scale()
Content-Disposition: inline;
	filename="image.scale.Rd"
Content-Transfer-Encoding: 7bit

\name{image.scale}

\alias{image.scale}

\title{Provide scale to image plots}

\usage{
image.scale(z, col, x, y=NULL, size=NULL, digits=2, labels=c("breaks", "ranges"))
}

\arguments{
 \item{z}{Data from image plot}
 \item{col}{Colours from image plot}
 \item{x}{Horizintal location of top-left corner of scale, or list with
\code{x} and \code{y} components}
 \item{y}{Vertical location of top-left corner of scale}
 \item{size}{1- or 2-vector of colour-box dimensions}
 \item{digits}{Number of digits after the decimal point in labels}
 \item{labels}{Type of labels}
}

\description{
Provides a vertical colour scale to accompany an image plot.  The
location defaults to the right of the plot, the colour-boxes
default to square, and the style of the labels defaults to giving
the breaks to the right of the scale.}

\details{
Use \code{x=locator(1)} or give both \code{x} and \code{y}
arguments to specify the top-left corner of the scale.  The
colour-boxes then default to squares, and the image is centred
around the vertical midpoint.  Use \code{x=locator(2)} for
complete control of the scale size and location.  The usual scale
(labels to the right) requires a top-left and bottom-right.  To
reverse the scale, go bottom-top.  To swith labels to the left,
go right-left.

The labels default to single values giving the breaks, centred
between colour-boxes.  For ranges centred vertically on each
colour-box (wider), specify \code{labels="ranges"}.}

\author{Jonathan Rougier}

\seealso{\code{\link{image}}}

\examples{
# create an image plot
x <- seq(-0.5, 0.5, len = 31)
qform <- function(x, y) 3*x^2 + y^2 - 2*x*y
z <- outer(x, x, FUN = qform)

par("mar" = c(5, 4, 4, 10) + 0.1)	# wide righthand margin
image(x, x, z, col=gray(6:12/15))
image.scale(z, gray(6:12/15))		# the default

image(x, x, z, col=gray(6:12/15))
image.scale(z, gray(6:12/15), labels="range")	# with range labels

# play around with the following ...
image(x, x, z, col=gray(6:12/15))
image.scale(z, gray(6:12/15), x=locator(1))	# or locator(2)
}

\keyword{aplot,iplot,color}
--LSat2th5Z+
Content-Type: text/plain
Content-Description: image.scale() by two Martins
Content-Disposition: inline;
	filename="image.scale.R"
Content-Transfer-Encoding: 7bit

"image.scale" <-
function (z, col, x, y = NULL, size = NULL, digits = 2, labels = c("breaks", 
    "ranges"))
{
    # sort out the location
    n <- length(col)
    usr <- par("usr")
    mx <- mean(usr[1:2]); my <- mean(usr[3:4])
    dx <- diff(usr[1:2]); dy <- diff(usr[3:4])
    if (missing(x))
        x <- mx + 1.05*dx/2	# default x to right of image
    else if (is.list(x)) {
        if (length(x$x) == 2) 
          size <- c(diff(x$x), -diff(x$y)/n)
        y <- x$y[1]
        x <- x$x[1]
    } else x <- x[1]
    if (is.null(size))
        if (is.null(y)) {
          size <- 0.618*dy/n	# default size, golden ratio
          y <- my + 0.618*dy/2	# default y to give centred scale
        } else size <- (y-my)*2/n
    if (length(size)==1)
        size <- rep(size, 2)	# default square boxes
    if (is.null(y))
        y <- my + n*size[2]/2
    # draw the image scale
    i <- seq(along = col)
    rect(x, y - i * size[2], x + size[1], y - (i - 1) * size[2], 
        col = rev(col), xpd = TRUE)
    # sort out the labels
    rng <- range(z, na.rm = TRUE)
    bks <- seq(from = rng[2], to = rng[1], length = n + 1)
    bks <- formatC(bks, format="f", digits=digits)
    labels <- match.arg(labels)
    if (labels == "breaks")
        ypts <- y - c(0, i) * size[2]
    else {
        bks <- paste(bks[-1], bks[-(n+1)], sep = " - ")
        ypts <- y - (i - 0.5) * size[2]
    }
    text(x = x + 1.2 * size[1], y = ypts, labels = bks, adj =
        ifelse(size[1]>0, 0, 1), xpd = TRUE) 
}

--LSat2th5Z+
Content-Type: text/plain
Content-Description: legend.R from "R-patched" aka "1.3.1 to be"
Content-Disposition: inline;
	filename="legend.R"
Content-Transfer-Encoding: 7bit

legend <-
function(x, y, legend, fill, col = "black", lty, lwd, pch, bty = "o",
         bg = par("bg"), pt.bg = NA, cex = 1,
         xjust = 0, yjust = 1, x.intersp = 1, y.intersp = 1, adj = 0,
         text.width = NULL, merge = do.lines && has.pch, trace = FALSE,
         ncol = 1, horiz = FALSE)
{
    if(is.list(x)) {
	if(!missing(y)) {	# the 2nd arg may really be `legend'
            if(!missing(legend))
                stop("`y' and `legend' when `x' is list (need no `y')")
            legend <- y
        }
        y <- x$y; x <- x$x
    } else if(missing(y)) stop("missing y")
    if (!is.numeric(x) || !is.numeric(y))
	stop("non-numeric coordinates")
    if ((nx <- length(x)) <= 0 || nx != length(y) || nx > 2)
	stop("invalid coordinate lengths")

    xlog <- par("xlog")
    ylog <- par("ylog")

    rect2 <- function(left, top, dx, dy, ...) {
	r <- left + dx; if(xlog) { left <- 10^left; r <- 10^r }
	b <- top  - dy; if(ylog) {  top <- 10^top;  b <- 10^b }
	rect(left, top, r, b, ...)
    }
    segments2 <- function(x1, y1, dx, dy, ...) {
	x2 <- x1 + dx; if(xlog) { x1 <- 10^x1; x2 <- 10^x2 }
	y2 <- y1 + dy; if(ylog) { y1 <- 10^y1; y2 <- 10^y2 }
	segments(x1, y1, x2, y2, ...)
    }
    points2 <- function(x, y, ...) {
	if(xlog) x <- 10^x
	if(ylog) y <- 10^y
	points(x, y, ...)
    }
    text2 <- function(x, y, ...) {
	##--- need to adjust  adj == c(xadj, yadj) ?? --
	if(xlog) x <- 10^x
	if(ylog) y <- 10^y
	text(x, y, ...)
    }
    if(trace)
        catn <- function(...)
            do.call("cat", c(lapply(list(...),formatC), list("\n")))

    cin <- par("cin")
    Cex <- cex * par("cex")             # = the `effective' cex for text

    if(is.null(text.width))
	text.width <- max(strwidth(legend, u="user", cex=cex))
    else if(!is.numeric(text.width) || text.width < 0)
	stop("text.width must be numeric, >= 0")

    xc <- Cex * xinch(cin[1], warn.log=FALSE)# [uses par("usr") and "pin"]
    yc <- Cex * yinch(cin[2], warn.log=FALSE)

    xchar  <- xc
    yextra <- yc * (y.intersp - 1)
    ymax   <- max(yc, strheight(legend, u="user", cex=cex))
    ychar <- yextra + ymax
    if(trace) catn("  xchar=", xchar, "; (yextra,ychar)=", c(yextra,ychar))

    if(!missing(fill)) {
        ##= sizes of filled boxes.
        xbox <- xc * 0.8
        ybox <- yc * 0.5
        dx.fill <- xbox ## + x.intersp*xchar
    }
    do.lines <- (!missing(lty) && any(lty > 0)) || !missing(lwd)
    n.leg <- length(legend)

    ## legends per column:
    n.legpercol <-
        if(horiz) {
            if(ncol != 1)
                warning(paste(
             "horizontal specification overrides: Number of columns :=",n.leg))
            ncol <- n.leg
            1
        } else ceiling(n.leg / ncol)

    if(has.pch <- !missing(pch)) {
	if(is.character(pch) && nchar(pch[1]) > 1) {
            if(length(pch) > 1)
                warning("Not using pch[2..] since pch[1] has multiple chars")
	    np <- nchar(pch[1])
	    pch <- substr(rep(pch[1], np), 1:np, 1:np)
	}
	if(!merge) dx.pch <- x.intersp/2 * xchar
    }
    x.off <- if(merge) -0.7 else 0

    ##- Adjust (x,y) :
    if (xlog) x <- log10(x)
    if (ylog) y <- log10(y)

    if(nx == 2) {
        ## (x,y) are specifiying OPPOSITE corners of the box
        x <- sort(x)
        y <- sort(y)
        left <- x[1]
        top  <- y[2]
        w <- diff(x)# width
        h <- diff(y)# height
	w0 <- w/ncol # column width

	x <- mean(x)
	y <- mean(y)
	if(missing(xjust)) xjust <- 0.5
	if(missing(yjust)) yjust <- 0.5

    }
    else {## nx == 1
        ## -- (w,h) := (width,height) of the box to draw -- computed in steps
        h <- n.legpercol * ychar + yc
        w0 <- text.width + (x.intersp + 1) * xchar
        if(!missing(fill))      w0 <- w0 + dx.fill
        if(has.pch && !merge)   w0 <- w0 + dx.pch
        if(do.lines)		w0 <- w0 + (2+x.off) * xchar
        w <- ncol*w0 + .5* xchar
        ##-- (w,h) are now the final box width/height.
        left <- x      - xjust  * w
        top  <- y + (1 - yjust) * h
    }

    if (bty != "n") {
        if(trace)
            catn("  rect2(",left,",",top,", w=",w,", h=",h,"...)",sep="")
	rect2(left, top, dx = w, dy = h, col = bg)
    }
    ## (xt[],yt[]) := `current' vectors of (x/y) legend text
    xt <- left + xchar + (w0 * rep(0:(ncol-1), rep(n.legpercol,ncol)))[1:n.leg]
    yt <- top - (rep(1:n.legpercol,ncol)[1:n.leg]-1) * ychar - 0.5 * yextra - ymax

    if (!missing(fill)) {               #- draw filled boxes -------------
	fill <- rep(fill, length.out=n.leg)
	rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill)
	xt <- xt + dx.fill
    }
    if(has.pch || do.lines)
        col <- rep(col,length.out=n.leg)

    if (do.lines) {                     #- draw lines ---------------------
        seg.len <- 2 # length of drawn segment, in xchar units
	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
	if(missing(lwd)) lwd <- par("lwd")
	lty <- rep(lty, length.out = n.leg)
	lwd <- rep(lwd, length.out = n.leg)
	if(trace)
	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
                 ", dx=",seg.len*xchar,", dy=0, ...)", sep="")
	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= seg.len*xchar, dy=0,
		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
	# if (!merge)
        xt <- xt + (seg.len+x.off) * xchar
    }
    if (has.pch) {                      #- draw points -------------------
	pch   <- rep(pch, length.out=n.leg)
	pt.bg <- rep(pt.bg, length.out=n.leg)
	ok <- is.character(pch) | pch >= 0
	x1 <- (if(merge) xt-(seg.len/2)*xchar else xt)[ok]
	y1 <- yt[ok]
	if(trace)
	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
	if (!merge) xt <- xt + dx.pch
    }

    xt <- xt + x.intersp * xchar
    text2(xt, yt, labels= legend, adj= adj, cex= cex)

    invisible(list(rect = list(w=w, h=h, left=left, top=top),
                   text = list(x = xt, y = yt)))
}

--LSat2th5Z+--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 28 09:34:51 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 28 Aug 2001 10:34:51 +0200
Subject: [Rd] log10 error ?? (PR#1077)
In-Reply-To: <200108280640.IAA22157@pubhealth.ku.dk>
References: <200108280640.IAA22157@pubhealth.ku.dk>
Message-ID: <15243.22443.374714.952324@gargle.gargle.HOWL>

>>>>> "ChHo" == christian hoffmann <christian.hoffmann@wsl.ch> writes:

    ChHo> format((1000000*(1+.Machine$double.eps)),digits=18)
    ChHo> [1] "1000000.0000000002"
    >> .Machine$double.rounding
    ChHo> [1] 5
    ChHo> format(log10(1000000*(1+.Machine$double.eps)),digits=18)
    ChHo> [1] "5.9999999999999991"  # MUST be > 6 !!!???

no. 
you assume that every arithmetic operation is correct to the last
bit, which is too much. Note that you have two conversions
decimal <-> binary, and  log10(x) internally really maps to log(x)/log(10)
(where log(10) is stored as constant).


    ChHo> format((1000000*(1-.Machine$double.eps)),digits=18)
    ChHo> [1] " 999999.9999999998"
    >> format(log10(1000000*(1-.Machine$double.eps)),digits=18)
    ChHo> [1] "5.9999999999999991"  

    ChHo> format(10^5.9999999999999991,digits=18)
    ChHo> [1] "999999.9999999979"

You have to expect more than one bit difference..
Definitely no bug.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 28 09:38:49 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Aug 2001 10:38:49 +0200
Subject: [Rd] is.environment, as.environment, and NULL
In-Reply-To: <Pine.LNX.4.31.0108280819020.20238-100000@gannet.stats>
References: <Pine.LNX.4.31.0108280819020.20238-100000@gannet.stats>
Message-ID: <x2n14kd1eu.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> >
> > A question, and a remark.
> >
> > Question, would we want to keep as.environment(NULL) to give the base
> > package, so that code like ls(envir = NULL) will still work?
> 
> Interesting.  Was it ever documented to?

Implicitly at least, but ls("package:base") has been preferable for a
long time.

> > Remark, we once discussed making package environments (in particular for
> > base) read-only.  One way of doing this is via setting attributes, but
> > we cannot do this on NULL.  Not that I think this is the way to do it,
> > though ...
> 
> NULL is just shorthand: there is a proper R object for base:
> 
> > .GlobalEnv
> <environment: R_GlobalEnv>
> > is.null(.GlobalEnv)
> [1] FALSE

Nope...

> It was news to me that NULL for .GlobalEnv worked at R level.
> 
> Brian

It doesn't. NULL is the *base* environment i.e. the one at the very
end of the search path. This is what gives the mess where things like
evalq(foo(x), NULL) will find "foo" in base, but not in a package.
(One gotcha being that taking environment(formula) returns NULL if no
environment was ever set.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 28 09:45:23 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 28 Aug 2001 10:45:23 +0200
Subject: [Rd] colorbar legend for image()
In-Reply-To: <15243.21655.237789.712132@gargle.gargle.HOWL>
References: <200108272105.f7RL5gk06656@rc1021.ce.uiuc.edu>
 <15243.21655.237789.712132@gargle.gargle.HOWL>
Message-ID: <15243.23075.23970.457550@gargle.gargle.HOWL>


--GtXdrZquwx
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "thomas" == thomas baumann <thomas.baumann@ch.tum.de> writes:
    thomas> Hi, are there any plans to add a colorbar legend to image()?

    thomas> Or such a possibility already implemented which I just haven't
    thomas> discovered yet. Anyway, I will be willing to spent some time on
    thomas> the implementation if there isn't anyone working on that
    thomas> already.

    MM> to the contrary: Martin Schlather wanted to use legend() on top of
    MM> image() and found a buglet in legend() which has been corrected for
    MM> 1.3.1 which is due coming weekend.  To illustrate the new
    MM> possibility of legend, I had produced a function image.legend() and
    MM> he improved (?!) it to image.scale() which isn't yet part of any
    MM> official version of R.  Hence, feedback on the following is *very*
    MM> welcome. Note that it would only work correctly for R version >=
    MM> 1.3.1.  and hence I also attach the 1.3.1 version of legend() {at
    MM> the end}.

(and then I've included the three files
  image.scale.Rd,  image.scale.R  and legend.R )

My error was to confuse Jonathan Rougier's  image.scale()  
  {from a post to R-help, on 21 Sep 1999}
with Martin and Martin's  image.legend() ...

So here is our unfinished stuff with some examples appended.
The code still has a few comments in German (which won't be a problem for
Thomas ..).

Feedback *still* very welcome to both image.annotation versions..

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


--GtXdrZquwx
Content-Type: text/plain; charset=iso-8859-1
Content-Description: image.legend() by Martin&Martin
Content-Disposition: inline;
	filename="image-legend.R"
Content-Transfer-Encoding: 7bit


image.legend <-
    function(x,y, zlim, at.z = NULL, col = heat.colors(12), legnd=NULL,
             lwd = max(3,32/length(col)), bg = NA, bty = "", ...)
  ## * kein y.i -- Benutzer soll rein ueber lwd steuern; sollte reichen.
  ## * legnd koennte interessant sein, falls Text geschrieben werden soll
  ##   (weiss mal wieder nicht, wie man aus legnd legend als option
  ##     macht)
  ## * lwd wird per default in Abh. von col gewaehlt.
{
    ## Purpose:
    ## Authors: Martin Maechler,   9 Jul 2001
    ##          Martin Schlather, 24 Jul 2001

  if (!is.null(legnd) && is.null(at.z))
      stop("at.z must be given if legnd is") ## falls legnd darf at.z
    ##                                nicht automatisch gewaehlt werden

    if(!is.numeric(zlim) || zlim[1] > zlim[2])
        stop("`zlim' must be numeric; zlim[1] <= zlim[2]")
    if(is.null(at.z)) {
        ## hier ein Versuch in Abhaengigkeit von n
        ## die Anzahl der labels zu bestimmen:
        n <- min(5, max(1,length(col)/10))
        at.z <- pretty(zlim,n=n,min.n=max(n %/% 3,1))

        ## es sieht nicht schoen aus, wenn pretty die letzte oder
        ## erste zahl weit ausserhalb des zlim legt.
        ## heuristisch nur 25%  (oder so) ueberschreitung bzgl
        ## intervalllaenge zulassen:
        tol <- diff(at.z)[1] / 4
        at.z <- at.z[(at.z>=zlim[1]-tol) & (at.z<=zlim[2]+tol)]
      }
    if(!is.numeric(at.z) || is.unsorted(at.z))
        stop("`at.z' must be numeric non-decreasing")
    n.at <- length(at.z)
    nc   <- length(col)
    if(n.at >= nc)
        stop("length(at.z) must be (much) smaller than length(col)")
    dz <- diff(zlim)
    ## The colors must run equidistantly from zlim[1] to zlim[2];
    ## col[i] is for z-interval zlim[1] + [i-1, i) * dz/nc  ; i = 1:nc
    ## i.e., an at.z[] value z0 is color i0 = floor(nc * (z0 - zlim[1])/dz)
    at.i <- floor(nc * (at.z - zlim[1])/dz )
    ## Possibly extend colors by `background' to the left and right
    bgC <- if(is.null(bg)) NA else bg
    if((xtra.l <- 1 - at.i[1]) > 0) {
        at.i <- at.i + xtra.l
        col <- c(rep(bgC, xtra.l), col)
    }
    if((xtra.r <- at.i[n.at] - nc) > 0)
        col <- c(col, rep(bgC, xtra.r))
    lgd <- character(length(col))

    ## folgende if-Anweisung ist neu:
    if (is.null(legnd)) lgd[at.i] <-format(at.z, dig = 3)
    else {
      if (length(legnd)!=length(at.z))
        stop("at.z and legnd must have the same length")
      lgd[at.i] <- legnd
    }
    if((V <- R.version)$major <= 1 && V$minor <= 3.0 && V$status == "")
{
        ## stop-gap fix around the bug that "NA" is not a valid color:
        if(is.na(bgC)) {
            lgd <- lgd[!is.na(col)]
            col <- col[!is.na(col)]
        }
    }
    legend(x,y, legend = rev(lgd), col = rev(col),
           y.i = lwd/16, bty = bty, lwd = lwd, bg = bg, ...)
}



## From  example(image):
data(volcano)
x <- 10*(1:nrow(volcano))
y <- 10*(1:ncol(volcano))

cols <- terrain.colors(100)

op <- par(mar = par("mar")+c(0,0,0,3), xpd = NA)
image(x, y, volcano, col = cols)
## Look :
image.legend(800, 600, zlim= range(volcano), col = cols, trace=TRUE)
image.legend(730, 600, zlim= range(volcano), col = cols, bg = "thistle")
image.legend(730,  15, zlim= range(volcano), col = cols, bg = "light
blue",
             at.z = range(volcano), yjust = 0, lwd = 2, y.interspace = 0.12)
## to check the legend:
contour(x, y, volcano, levels = seq(90, 200, by=5), add = TRUE, col = "peru")


#########################
## ein paar mehr Beispiele
image(x, y, volcano, col = cols)
n <- c(5,10,20,30,40,100)
for (i in 1:length(n))
  image.legend( (i-1)*140,  15, zlim= range(volcano),bg=0,yju=0,
               col=heat.colors(n[i]))

image(x, y, volcano, col = cols)
image.legend( 700,  15, zlim= range(volcano),bg=0,yju=0,
               col=heat.colors(30),
             at.z = range(volcano), legnd=c("low","high"))


--GtXdrZquwx--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tklistaddr@keittlab.bio.sunysb.edu  Tue Aug 28 21:52:46 2001
From: tklistaddr@keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Tue, 28 Aug 2001 16:52:46 -0400
Subject: [Rd] Suggested change to documentation
Message-ID: <3B8C049E.3010100@keittlab.bio.sunysb.edu>

Its not clear from the documentation whether one should do

\keyword[key1, key2}

or

\keyword{key1}
\keyword{key2}

in .Rd files.  I believe the latter is correct.  (At least 'R CMD check' 
complains when given the first version.)  It would help to make this 
explicit in the R extension writing docs.

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 28 22:16:42 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 28 Aug 2001 22:16:42 +0100 (BST)
Subject: [Rd] Suggested change to documentation
In-Reply-To: <3B8C049E.3010100@keittlab.bio.sunysb.edu>
Message-ID: <Pine.GSO.4.31.0108282213040.29684-100000@auk.stats>

On Tue, 28 Aug 2001, Timothy H. Keitt wrote:

> Its not clear from the documentation whether one should do
>
> \keyword[key1, key2}
>
> or
>
> \keyword{key1}
> \keyword{key2}
>
> in .Rd files.  I believe the latter is correct.  (At least 'R CMD check'
> complains when given the first version.)  It would help to make this
> explicit in the R extension writing docs.

The second is indeed correct.

Where is this unclear in R-exts.texi?  That says

@item \keyword@{@var{key}@}
Each @code{\keyword} entry should specify one of the standard keywords
(as listed in the file @file{$R_HOME/doc/KEYWORDS.db}).  There must be
at least one @code{\keyword} entry, but can be more that one if the @R{}
object being documented falls into more than one category.

Note `one of'.  If you can point us at the problem, we can fix it in time
for 1.3.1, but this has come up before and we've not located anything that
might lead to the idea that the first is correct.  (It is \keyword{} not
\keywords{}, too.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tklistaddr@keittlab.bio.sunysb.edu  Wed Aug 29 04:14:48 2001
From: tklistaddr@keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Tue, 28 Aug 2001 23:14:48 -0400
Subject: [Rd] Suggested change to documentation
References: <Pine.GSO.4.31.0108282213040.29684-100000@auk.stats>
Message-ID: <3B8C5E28.20608@keittlab.bio.sunysb.edu>

Actually, I noticed the latest version of prompt() nicely comments the 
keyword entry with "ONLY ONE KEYWORD PER ENTRY..." or something like 
that, so its probably not a big deal.  Just remember, we read these 
things at break-neck speed (at least I don't have time to carefully 
digest complicated documentation), so it has to be really simple.  I got 
tripped up with "keyword entry" thinking that there were multiple 
entries per \keyword{} section.  Perhaps "Each \keyword 
(section|stanza|clause|?) can contain one and only one keyword [from the 
database...].  Use multiple \keyword ?? if more than one keyword is 
desired."  Even better, put several keywords in one of the examples.

Tim

Prof Brian D Ripley wrote:

>On Tue, 28 Aug 2001, Timothy H. Keitt wrote:
>
>>Its not clear from the documentation whether one should do
>>
>>\keyword[key1, key2}
>>
>>or
>>
>>\keyword{key1}
>>\keyword{key2}
>>
>>in .Rd files.  I believe the latter is correct.  (At least 'R CMD check'
>>complains when given the first version.)  It would help to make this
>>explicit in the R extension writing docs.
>>
>
>The second is indeed correct.
>
>Where is this unclear in R-exts.texi?  That says
>
>@item \keyword@{@var{key}@}
>Each @code{\keyword} entry should specify one of the standard keywords
>(as listed in the file @file{$R_HOME/doc/KEYWORDS.db}).  There must be
>at least one @code{\keyword} entry, but can be more that one if the @R{}
>object being documented falls into more than one category.
>
>Note `one of'.  If you can point us at the problem, we can fix it in time
>for 1.3.1, but this has come up before and we've not located anything that
>might lead to the idea that the first is correct.  (It is \keyword{} not
>\keywords{}, too.)
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Wed Aug 29 18:14:19 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Wed, 29 Aug 2001 19:14:19 +0200 (MET DST)
Subject: [Rd] problem in plot(), combining log="y" with type="s" (PR#1078)
Message-ID: <200108291714.TAA15580@pubhealth.ku.dk>

I just noticed this behavior of plot().  If you combine: log="y", with type
="s", specify ylim, AND have plotting points outside of ylim, then the R
process hangs.
For example:

plot(1:10,seq(0.0001,1,length=10),ylim=c(0.01,1),type="s",log="y")

It will also hang if the original plot() command did not specify ylim, but
a subsequent
lines(x,y,type="s")
has data points outside the plotting limits established by plot.

In Windows 98, [Esc] does not interrupt the loop, but in Irix, ^C does.

I've found this in both:

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

AND

--please do not edit the information below--

Version:
 platform = mips-sgi-irix6.5
 arch = mips
 os = irix6.5
 system = mips, irix6.5
 status =
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@cogsci.ed.ac.uk  Wed Aug 29 19:46:17 2001
From: stephen@cogsci.ed.ac.uk (stephen@cogsci.ed.ac.uk)
Date: Wed, 29 Aug 2001 20:46:17 +0200 (MET DST)
Subject: [Rd] Array.rd - typos and suggestion (PR#1079)
Message-ID: <200108291846.UAA16020@pubhealth.ku.dk>

Full_Name: Stephen Eglen
Version: 1.3.0
OS: Redhat 6.1
Submission from: (NULL) (128.252.204.21)


in R-1.3.0/src/library/base/man/array.Rd there are a few typos:

line 16 reated -> created
line 17 idices -> indices
line 19 compoent -> component

The documentation also seems to refer to the first argument as both
`data' and `x' (for the default value of arg 2) which is confusing.
I suggest changing line 10 to:
array(data, dim = length(data), dimnames = NULL)

and changing \code{x} to \code{data} on lines 26,28 and 29.

Cheers, Stephen



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Wed Aug 29 21:53:42 2001
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Thu, 30 Aug 2001 08:53:42 +1200
Subject: [Rd] problem in plot(), combining log="y" with type="s" (PR#1078)
References: <200108291714.TAA15580@pubhealth.ku.dk>
Message-ID: <005801c130cc$b035c4e0$175dd882@stat.auckland.ac.nz>

Hi


> I just noticed this behavior of plot().  If you combine: log="y", with
type
> ="s", specify ylim, AND have plotting points outside of ylim, then the R
> process hangs.
> For example:
>
> plot(1:10,seq(0.0001,1,length=10),ylim=c(0.01,1),type="s",log="y")
>
> It will also hang if the original plot() command did not specify ylim, but
> a subsequent
> lines(x,y,type="s")
> has data points outside the plotting limits established by plot.
>
> In Windows 98, [Esc] does not interrupt the loop, but in Irix, ^C does.


Thanks for the report.  This is fixed in 1.3.1 (coming soon).

For the record, I'm assuming this is (yet another) example of the bug that
was fixed for bug#997 (bug in CSclipline)

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ljlehou@sandia.gov  Thu Aug 30 00:40:15 2001
From: ljlehou@sandia.gov (ljlehou@sandia.gov)
Date: Thu, 30 Aug 2001 01:40:15 +0200 (MET DST)
Subject: [Rd] bug in histogram rendering (PR#1080)
Message-ID: <200108292340.BAA17093@pubhealth.ku.dk>

Full_Name: Leslea J. Lehoucq
Version: 1.3.0
OS: Solaris 7
Submission from: (NULL) (134.253.26.10)


When one creates a histogram with the freq=FALSE (i.e. plot
the density on the Y-axis), the density values are off by a 
factor of 10.  For instance, a bin in which 50% of the plotted
values fall is marked 0.05, not 0.50, on the Y-axis.  Instead
of the density summing to 1.0, it sums to 0.1.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 30 06:56:41 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 30 Aug 2001 07:56:41 +0200 (MET DST)
Subject: [Rd] bug in histogram rendering (PR#1080)
Message-ID: <200108300556.HAA17714@pubhealth.ku.dk>

On Thu, 30 Aug 2001 ljlehou@sandia.gov wrote:

> Full_Name: Leslea J. Lehoucq
> Version: 1.3.0
> OS: Solaris 7
> Submission from: (NULL) (134.253.26.10)
>
>
> When one creates a histogram with the freq=FALSE (i.e. plot
> the density on the Y-axis), the density values are off by a
> factor of 10.  For instance, a bin in which 50% of the plotted
> values fall is marked 0.05, not 0.50, on the Y-axis.  Instead
> of the density summing to 1.0, it sums to 0.1.

It should integrate to one, not sum to one.
Can you give us an example of what you think is wrong?
For example,

set.seed(1)
Y <- runif(100)
hist(Y, freq=F)

correctly has an average level of 1, sum 5.

Calling them `relative frequencies' is perhaps misleading (relative to
what?), but then what hist() does by default is not a histogram in the
terminology in use in much of the world.  Some of also argue it is
extremely misleading unless the bins are all of the same width.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pollari@sun3.oulu.fi  Fri Aug 31 06:54:36 2001
From: pollari@sun3.oulu.fi (pollari@sun3.oulu.fi)
Date: Fri, 31 Aug 2001 07:54:36 +0200 (MET DST)
Subject: [Rd] problems installing R on Solaris 2.8 machine (PR#1081)
Message-ID: <200108310554.HAA29912@pubhealth.ku.dk>

I've just installed R 1.3.0, and everything went fine except that
the resulting directories and files were owned by root, and for ordinary
users there was no access for most of them. This was also the case with
a large amount of files. I've fixed the installation manually, but it
took quite a lot of time.

	Pivi Pollari
	University of Oulu
	Computer services center

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From replypro@mcgraw-hill.com.tw  Fri Aug 31 11:48:20 2001
From: replypro@mcgraw-hill.com.tw (=?big5?B?s8Gu5sO5p8a6uA==?=)
Date: Fri, 31 Aug 2001 18:48:20 +0800
Subject: [Rd] =?big5?B?tfizpbZWrMm3c67RqHQgLS2hbanKvKShQsV2pE+hQrRjpua7ULdMr7otLb9ztfg=?=
 =?big5?B?uEGpVOCsqrqopKbip+q6dLlDwLihbg==?=
Message-ID: <200108311049.MAA20089@stat.math.ethz.ch>

This is a multi-part message in MIME format.

------=_NextPart_000_0009_01C1324D.85230560
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_000A_01C1324D.85230560"


------=_NextPart_001_000A_01C1324D.85230560
Content-Type: text/plain;
	charset="big5"
Content-Transfer-Encoding: quoted-printable

Dear r-devel,

=AC=B0=A4=B0=BB=F2=A4@=AF=EB=A4H=B9=EF=A4k=A5=CD=AA=BA=A8=E8=AAO=A6L=B6H=B4=
N=ACO=B7=C5=ACX=A1B=B5=BD=C5=E9=A4H=B7N=A1B=BBy=A8=A5=AF=E0=A4O=B1j=A1F
=A6=D3=AC=DB=B9=EF=A6a=BB{=AC=B0=A8k=A5=CD=ABh=A4=F1=B8=FB=ABi=B4=B1=A1B=BD=
=C4=B0=CA=A1B=A6n=A6=E2=A1B=AA=C5=B6=A1=B7P=A1B=A4=E8=A6V=B7P=A8=CE=A1H
=A7A=ACO=A7_=B4=BF=B8g=C3h=BA=C3=B9L=A1A
=B3o=A8=C7=A8=E8=AAO=A6L=B6H=A4=A4=AA=BA=A8=E2=A9=CA=AEt=B2=A7=A8s=B3=BA=AC=
O=A8k=A4k=A8=E2=A9=CA=A6b=A5=CD=B2z=B5o=AEi=A4W=BBP=A5=CD=AD=D1=A8=D3=AA=BA=
=A4=A3=A6P=BF=F2=B6=C7=A6]=A4l=A9=D2=B3y=A6=A8=AA=BA=A1A
=A9=CE=ACO=AB=E1=A4=D1=AA=BA=B1=D0=BEi=BBP=A4=E5=A4=C6=A9=D2=AB=AC=B6=EC=A5=
X=A8=D3=AA=BA=A1H
=A6=D3=A4=A3=A6P=A4=E5=A4=C6=A4=A4=B9=EF=A8k=A4l=AE=F0=B7=A7=BBP=A4k=A9=CA=
=AFS=BD=E8=A9=CE=A6h=A9=CE=A4=D6=AA=BA=B1j=BD=D5=BBP=AD=AB=B5=F8=A1A
=A4S=A9M=B3o=BC=CB=AA=BA=A8=E8=AAO=A6L=B6H=A6=B3=A4=B0=BB=F2=C3=F6=ABY=A9=
O=A1H
=A5=E7=A9=CE=B3o=A4@=A4=C1=A5u=ACO=AC=B0=AE=BA=B6=EC=A5X=C2=F9=A9=CA=A4G=A4=
=B8=BB=F9=AD=C8=C6[=A6=D3=AC=EF=C6w=AA=FE=B7|=A5X=AA=BA=B9L=AE=C9=B0g=AB=E4=
=A1H
=AA=BE=A6W=AA=C0=B7|=A4=DF=B2z=BE=C7=AEa=C0=B9=ACf=B4=B5=B1=D0=B1=C2=B1N=A6=
b=A5=BB=AE=D1=A4=A4=A1A
=B1q=B8A=A9T=E0=AC=AA=BA=C6[=C2I=A1A=AC=B0=A7A=B8=D1=B6}=B3o=A4@=B3s=A6=EA=
=C3=F6=A9=F3=A9=CA=A7O=BBP=A6=E6=AC=B0=BC=D2=A6=A1=AA=BA=BA=C3=B0=DD=A1C
=A6b=A5=BB=AE=D1=A4=A4=A1A=C0=B9=ACf=B4=B5=B1=D0=B1=C2=A5H=B7=A5=AC=B0=A4=
=DE=A4H=A4J=B3=D3=AA=BA=A4=E8=A6=A1=A1A
=AC=B0=A7=DA=AD=CC=A4=B6=B2=D0=A4F=BE=C7=AC=C9=A5=D8=ABe=B9=EF=B8A=A9T=E0=
=AC=A4=CE=A8=E4=B1q=A5j=A6=DC=A4=B5=B9=EF=A4H=C3=FE=A4=DF=B2z=AA=BA=BCv=C5=
T=AA=BA=BB{=C3=D1=A1C
=A7@=AA=CC=A4=DE=A5=CE=A4F=B0w=B9=EF=B6W=B9L=A4K=A4d=A6W=A6=A8=A6~=A8k=A4=
k=A9M=A8=E0=B5=A3=A9=D2=B0=B5=AA=BA=AD=EC=B3=D0=A9=CA=AC=E3=A8s=A1A=A5H=A4=
=CE=A9M=B3o=AD=D3=A5D=C3D=A6=B3=C3=F6=AA=BA=A5@=AC=C9=A4=E5=BE=C7=A1A
=B1N=A8p=B1K=AA=BA=AD=D3=AE=D7=A5v=A9M=B2=C4=A4@=A4=E2=AA=BA=AC=EC=BE=C7=AC=
=E3=A8s=A5=A9=A7=AE=A6=EA=B3s=A1A
=A5H=B1=B4=AF=C1=B8A=A9T=E0=AC=A6b=A4H=C3=FE=A4=DF=B4=BC=A9M=A4H=C3=FE=A9=
R=B9B=B4X=A5G=A6U=AD=D3=AD=B1=A6V=A4W=A9=D2=A7=EA=BAt=AA=BA=A8=A4=A6=E2=A1=
C
=A7@=AA=CC=A7i=B6D=A7=DA=AD=CC=A1A=B8A=A9T=E0=AC=ACO=A6p=A6=F3=BCv=C5T=BB=
y=A8=A5=AF=E0=A4O=A1B=BB{=AA=BE=A1B=AA=C5=B6=A1=A9w=A6=EC=A1B=A7=DA=AD=CC=
=A9=D2=B1q=A8=C6=AA=BA=C2=BE=B7~=A1B
=A7=DA=AD=CC=B7|=A6=A8=AC=B0=A4=B0=BB=F2=BC=CB=AA=BA=B1=A1=A4H=A1B=A4V=A4=
=D2=A1B=A9d=A4l=A9M=A4=F7=A5=C0=A1B
=AC=C6=A6=DC=A9=F3=A7=DA=AD=CC=B7L=AF=BA=AA=BA=A4=E8=A6=A1=B5=A5=A1C
=B8A=A9T=E0=AC=B6=EC=B3y=A4F=A7=DA=AD=CC=B9=EF=A9=CA=A1B=C5v=A4O=A1B=BC=C9=
=A4O=A6=E6=AC=B0=BBP=BFW=A5e=A6a=A6=EC=AA=BA=BC=A4=B1=E6=A1A
=A7=F3=ACO=A7=DA=AD=CC=B7Q=B1=E6=A6=A8=AC=B0=AD^=B6=AF=A1B=A5D=AE_=AA=CC=A1=
A=A9=CE=ACO=C1=E2=A5=FA=BFO=B5J=C2I=AA=BA=AE=DA=B7=BD=A1C
=A5L=A8=C3=A5B=BB=A1=A9=FA=A4F=A1A=B8A=A9T=E0=AC=A6p=A6=F3=AF=E0=B8=D1=C4=
=C0=A8=E2=A9=CA=A4@=AF=EB=A6b=AB=E4=A6=D2=A9M=B7=BE=B3q=A4=E8=A6=A1=A4W=AA=
=BA=AEt=B2=A7=A1C
=B9=EF=A9=F3=B8A=A9T=E0=AC=B3o=AD=D3=B4=AE=ADt=A4F=B3=CC=A6h=B4c=A6W=A1B=BE=
D=A8=FC=B3=CC=A6h=BB~=B8=D1=AA=BA=A4H=C3=FE=BFE=AF=C0=A1A=A5=BB=AE=D1=B4=A3=
=A8=D1=A4F=A4@=AD=D3=A7O=A5X=A4=DF=B5=F4=AA=BA=C6[=C2I=A1C
=A5=F4=A6=F3=B9=EF=A4H=C3=FE=A6=E6=AC=B0=AA=BA=A5=CD=AA=AB=A9=CA=AE=DA=B7=
=BD=B7P=BF=B3=BD=EC=AA=BA=C5=AA=AA=CC=A1A=B1N=B1q=A5=BB=AE=D1=C0=F2=B1o=C5=
=E5=A9_=AA=BA=BE\=C5=AA=B7P=A8=FC=A9M=C2=D7=B4I=AA=BA=B7s=AA=BE=A1C


=20
=A1m=A9=CA=BC=A4=A1B=C5v=A4O=A1B=B4c=A6=E6=BBP=B7L=AF=BA=A1G=BFs=B5=F8=B8=
A=A9T=E0=AC=AA=BA=A8=A4=A6=E2=A7=EA=BAt=B9C=C0=B8=A1n
 =A7@    =AA=CC=A1GJames McBride Dabbs/Mary Godwin Dabbs =
=B3\=AE=CA=BA=D6 =C4=B6
 =AE=D1    =A8t=A1G=B5=F8=B3=A5=B6V=AC=C9 BB001
 =C1` =AD=B6 =BC=C6=A1G320=AD=B6
 =A9w    =BB=F9=A1G320=A4=B8
 I S B N =A1G957-493-412-8

-------------------------------------------------------------------------=
-------



=B3=C1=AE=E6=C3=B9=A7=C6=BA=B8=A5X=AA=A9=A4=BD=A5q =
=A5x=C6W=A4=C0=A4=BD=A5q
Tel 02-27272211  Fax 02-23463300
=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw


------=_NextPart_001_000A_01C1324D.85230560
Content-Type: text/html;
	charset="big5"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; charset=3Dbig5">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#000000 background=3D"">
<DIV><FONT face=3DArial color=3D#ffffff size=3D2>Dear =
r-devel,</FONT></DIV>
<DIV><FONT face=3DArial color=3D#c0c0c0></FONT>&nbsp;</DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=AC=B0=A4=B0=BB=F2=A4@=AF=EB=A4H=B9=EF=A4k=A5=CD=AA=BA=A8=E8=AAO=
=A6L=B6H=B4N=ACO=B7=C5=ACX=A1B=B5=BD=C5=E9=A4H=B7N=A1B=BBy=A8=A5=AF=E0=A4=
O=B1j=A1F</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A6=D3=AC=DB=B9=EF=A6a=BB{=AC=B0=A8k=A5=CD=ABh=A4=F1=B8=FB=ABi=B4=
=B1=A1B=BD=C4=B0=CA=A1B=A6n=A6=E2=A1B=AA=C5=B6=A1=B7P=A1B=A4=E8=A6V=B7P=A8=
=CE=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A7A=ACO=A7_=B4=BF=B8g=C3h=BA=C3=B9L=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B3o=A8=C7=A8=E8=AAO=A6L=B6H=A4=A4=AA=BA=A8=E2=A9=CA=AEt=B2=A7=A8=
s=B3=BA=ACO=A8k=A4k=A8=E2=A9=CA=A6b=A5=CD=B2z=B5o=AEi=A4W=BBP=A5=CD=AD=D1=
=A8=D3=AA=BA=A4=A3=A6P=BF=F2=B6=C7=A6]=A4l=A9=D2=B3y=A6=A8=AA=BA=A1A</FON=
T></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A9=CE=ACO=AB=E1=A4=D1=AA=BA=B1=D0=BEi=BBP=A4=E5=A4=C6=A9=D2=AB=AC=
=B6=EC=A5X=A8=D3=AA=BA=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A6=D3=A4=A3=A6P=A4=E5=A4=C6=A4=A4=B9=EF=A8k=A4l=AE=F0=B7=A7=BBP=
=A4k=A9=CA=AFS=BD=E8=A9=CE=A6h=A9=CE=A4=D6=AA=BA=B1j=BD=D5=BBP=AD=AB=B5=F8=
=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A4S=A9M=B3o=BC=CB=AA=BA=A8=E8=AAO=A6L=B6H=A6=B3=A4=B0=BB=F2=C3=F6=
=ABY=A9O=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5=E7=A9=CE=B3o=A4@=A4=C1=A5u=ACO=AC=B0=AE=BA=B6=EC=A5X=C2=F9=A9=
=CA=A4G=A4=B8=BB=F9=AD=C8=C6[=A6=D3=AC=EF=C6w=AA=FE=B7|=A5X=AA=BA=B9L=AE=C9=
=B0g=AB=E4=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=AA=BE=A6W=AA=C0=B7|=A4=DF=B2z=BE=C7=AEa=C0=B9=ACf=B4=B5=B1=D0=B1=
=C2=B1N=A6b=A5=BB=AE=D1=A4=A4=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B1q=B8A=A9T=E0=AC=AA=BA=C6[=C2I=A1A=AC=B0=A7A=B8=D1=B6}=B3o=A4@=
=B3s=A6=EA=C3=F6=A9=F3=A9=CA=A7O=BBP=A6=E6=AC=B0=BC=D2=A6=A1=AA=BA=BA=C3=B0=
=DD=A1C<BR>=A6b=A5=BB=AE=D1=A4=A4=A1A=C0=B9=ACf=B4=B5=B1=D0=B1=C2=A5H=B7=A5=
=AC=B0=A4=DE=A4H=A4J=B3=D3=AA=BA=A4=E8=A6=A1=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=AC=B0=A7=DA=AD=CC=A4=B6=B2=D0=A4F=BE=C7=AC=C9=A5=D8=ABe=B9=EF=B8=
A=A9T=E0=AC=A4=CE=A8=E4=B1q=A5j=A6=DC=A4=B5=B9=EF=A4H=C3=FE=A4=DF=B2z=AA=BA=
=BCv=C5T=AA=BA=BB{=C3=D1=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7@=AA=CC=A4=DE=A5=CE=A4F=B0w=B9=EF=B6W=B9L=A4K=A4d=A6W=A6=A8=A6=
~=A8k=A4k=A9M=A8=E0=B5=A3=A9=D2=B0=B5=AA=BA=AD=EC=B3=D0=A9=CA=AC=E3=A8s=A1=
A=A5H=A4=CE=A9M=B3o=AD=D3=A5D=C3D=A6=B3=C3=F6=AA=BA=A5@=AC=C9=A4=E5=BE=C7=
=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=B1N=A8p=B1K=AA=BA=AD=D3=AE=D7=A5v=A9M=B2=C4=A4@=A4=E2=AA=BA=AC=EC=
=BE=C7=AC=E3=A8s=A5=A9=A7=AE=A6=EA=B3s=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5H=B1=B4=AF=C1=B8A=A9T=E0=AC=A6b=A4H=C3=FE=A4=DF=B4=BC=A9M=A4H=
=C3=FE=A9R=B9B=B4X=A5G=A6U=AD=D3=AD=B1=A6V=A4W=A9=D2=A7=EA=BAt=AA=BA=A8=A4=
=A6=E2=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7@=AA=CC=A7i=B6D=A7=DA=AD=CC=A1A=B8A=A9T=E0=AC=ACO=A6p=A6=F3=BC=
v=C5T=BBy=A8=A5=AF=E0=A4O=A1B=BB{=AA=BE=A1B=AA=C5=B6=A1=A9w=A6=EC=A1B=A7=DA=
=AD=CC=A9=D2=B1q=A8=C6=AA=BA=C2=BE=B7~=A1B</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A7=DA=AD=CC=B7|=A6=A8=AC=B0=A4=B0=BB=F2=BC=CB=AA=BA=B1=A1=A4H=A1=
B=A4V=A4=D2=A1B=A9d=A4l=A9M=A4=F7=A5=C0=A1B</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=AC=C6=A6=DC=A9=F3=A7=DA=AD=CC=B7L=AF=BA=AA=BA=A4=E8=A6=A1=B5=A5=
=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B8A=A9T=E0=AC=B6=EC=B3y=A4F=A7=DA=AD=CC=B9=EF=A9=CA=A1B=C5v=A4O=
=A1B=BC=C9=A4O=A6=E6=AC=B0=BBP=BFW=A5e=A6a=A6=EC=AA=BA=BC=A4=B1=E6=A1A</F=
ONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7=F3=ACO=A7=DA=AD=CC=B7Q=B1=E6=A6=A8=AC=B0=AD^=B6=AF=A1B=A5D=AE=
_=AA=CC=A1A=A9=CE=ACO=C1=E2=A5=FA=BFO=B5J=C2I=AA=BA=AE=DA=B7=BD=A1C</FONT=
></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5L=A8=C3=A5B=BB=A1=A9=FA=A4F=A1A=B8A=A9T=E0=AC=A6p=A6=F3=AF=E0=
=B8=D1=C4=C0=A8=E2=A9=CA=A4@=AF=EB=A6b=AB=E4=A6=D2=A9M=B7=BE=B3q=A4=E8=A6=
=A1=A4W=AA=BA=AEt=B2=A7=A1C<BR>=B9=EF=A9=F3=B8A=A9T=E0=AC=B3o=AD=D3=B4=AE=
=ADt=A4F=B3=CC=A6h=B4c=A6W=A1B=BED=A8=FC=B3=CC=A6h=BB~=B8=D1=AA=BA=A4H=C3=
=FE=BFE=AF=C0=A1A=A5=BB=AE=D1=B4=A3=A8=D1=A4F=A4@=AD=D3=A7O=A5X=A4=DF=B5=F4=
=AA=BA=C6[=C2I=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#ffffff size=3D2><FONT=20
color=3D#c0c0c0>=A5=F4=A6=F3=B9=EF=A4H=C3=FE=A6=E6=AC=B0=AA=BA=A5=CD=AA=AB=
=A9=CA=AE=DA=B7=BD=B7P=BF=B3=BD=EC=AA=BA=C5=AA=AA=CC=A1A=B1N=B1q=A5=BB=AE=
=D1=C0=F2=B1o=C5=E5=A9_=AA=BA=BE\=C5=AA=B7P=A8=FC=A9M=C2=D7=B4I=AA=BA=B7s=
=AA=BE=A1C</FONT></FONT></DIV>
<DIV><FONT face=3DMingLiu size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2><IMG style=3D"WIDTH: =
127px; HEIGHT: 178px" alt=3D""=20
hspace=3D0 src=3D"cid:000401c1320a$733269b0$1264a8c0@mie31" =
align=3Dbaseline=20
border=3D1><FONT face=3DMingLiu>&nbsp;</FONT></FONT></DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 color=3D#ffffff =
size=3D2>=A1m=A9=CA=BC=A4=A1B=C5v=A4O=A1B=B4c=A6=E6=BBP=B7L=AF=BA=A1G=BFs=
=B5=F8=B8A=A9T=E0=AC=AA=BA=A8=A4=A6=E2=A7=EA=BAt=B9C=C0=B8</FONT><FONT=20
face=3D=B2=D3=A9=FA=C5=E9 color=3D#ffffff =
size=3D2>=A1n<BR>&nbsp;=A7@&nbsp;&nbsp;&nbsp; =AA=CC=A1G<FONT=20
face=3DArial>James McBride Dabbs/Mary Godwin Dabbs</FONT> =
=B3\=AE=CA=BA=D6=20
=C4=B6<BR>&nbsp;=AE=D1&nbsp;&nbsp;&nbsp; =
=A8t=A1G=B5=F8=B3=A5=B6V=AC=C9&nbsp;BB001<BR>&nbsp;=C1` =AD=B6=20
=BC=C6=A1G320=AD=B6<BR>&nbsp;=A9w&nbsp;&nbsp;&nbsp; =
=BB=F9=A1G320=A4=B8<BR>&nbsp;I S B N=20
=A1G957-493-412-8</FONT></DIV>
<DIV>
<HR>
</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9><FONT color=3D#c0c0c0 =
size=3D2></FONT></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 color=3D#c0c0c0 =
size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2><FONT=20
color=3D#c0c0c0>=B3=C1=AE=E6=C3=B9=A7=C6=BA=B8=A5X=AA=A9=A4=BD=A5q&nbsp;=A5=
x=C6W=A4=C0=A4=BD=A5q</FONT></FONT></DIV>
<DIV><FONT face=3D"Comic Sans MS" color=3D#c0c0c0=20
size=3D2>Tel&nbsp;02-27272211&nbsp;&nbsp;Fax 02-23463300</FONT></DIV>
<DIV>
<DIV><FONT face=3DMingLiu size=3D2><A=20
href=3D"mailto:=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw"><FONT =
face=3D"Comic Sans MS"=20
color=3D#c0c0c0>=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw</FONT></A><=
/FONT><FONT face=3D=B2=D3=A9=FA=C5=E9=20
size=3D2></DIV></DIV></FONT>
<DIV><FONT face=3DMingLiu size=3D2></FONT>&nbsp;</DIV></BODY></HTML>

------=_NextPart_001_000A_01C1324D.85230560--

------=_NextPart_000_0009_01C1324D.85230560
Content-Type: image/jpeg;
	name="heros.jpg"
Content-Transfer-Encoding: base64
Content-ID: <000401c1320a$733269b0$1264a8c0@mie31>

/9j/4AAQSkZJRgABAQEB0QHRAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0a
HBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIy
MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCACyAH8DASIA
AhEBAxEB/8QAHAABAAIDAQEBAAAAAAAAAAAAAAUGAwQHAgEI/8QANRAAAQQBAwIEBAUDBAMAAAAA
AQACAwQRBRIhBjETQVFxFCIyYQcjgaGxFUKRJDRi0YPB4f/EABoBAQACAwEAAAAAAAAAAAAAAAAB
BAIDBQb/xAApEQACAgEDAwMDBQAAAAAAAAAAAQIDEQQhMQUSQSJhkXGh8DJCgdHh/9oADAMBAAIR
AxEAPwDv6IiAIiIAiZRAEREAREQBERAEREAREQBERAERUvr/AKjtaDBUFWRjHSuduLx5BbaaZXTV
ceWarro0wdkuEVrrH8VNV6WuOhOj8l5EZm+l7QT8wIPtwQo/Tvxt1Gy+MT6CxocM7mvdj+FTdY6l
Zq9vxLzjblk+XBYMYHoPRbmh02TbalWCUxz92M+oeeRnOMLuR6XWvVNp4W6Rx59Sml2qLTb2b/o6
Vpf4ou1CN736UGBm7c1kxccNBOR8v2PdWmzrs0Wiuvms2DONnjSAYB7E/wDQ5VGh0OrX6TdeNKF0
gqTx8P2ljg9/zf8AL0/RWmbTY2aG+q/TvBksvZGwROMp7fUcjAwMrh2yi36Y4OxVGSXqlk0p+u7U
G6U6ZughLBYAeA+PdwB6EkkEYPbv2Vs025PfossS1JKjn5PhS4LgPLsqJpIqF726jcrWRclGysHM
a5sp/Lw5oA5AAPbjlWqhFqb6dOSK3LvicWTxWmD52g47gdx5Ed1qNpK3bTaNOe1Kfy4WGRwAycAZ
OOVE2erdLpzRxzWcOc3c4bD8ozjy+5wtbryOSfpueKGBr5C0uMjhxE0cuPvjj9VzaWjZfqzC9rhD
FZbGGx13N3fKHHAwTjgED79lKJwdnrX4LcXiQOc9mSNwaccLxJq1CKcQSW4WSn+xzsH/AAq9pM2p
QdGwTsEDovhnSF0z3B/OT6emF5gFqtpejw29OpTCd0cJLnEuAIyTyO/CLGdzGXd+0sjdUoP+m7XP
/kCysuVpPosRO9ngqsax0TSsOhno1KkT4+HRuiy2Rp75wQqT1S6hBahqaVSEMrGj8yu/vjII2gke
Xur1Glrvkowk/hbfcoX6qyiLlOK+Xv8AY7IiIqB0AuPfitVj1nXadOS0YI68RccAuyT2GP0C7CuR
dZaJrF3qSxPFp9iSIgBr2MJGF0OmKDv9bxsyh1GVkac1rLyil6PoFNt9kEksdcD65pDnGPRS+lap
/SNVJhe+aqXgEbcF4zwcZ7/qsEuiauw/mabc9zC4/wDpab2S1JwyZjoX8Ha9uDj2K9R21WJx7k01
xseXc7oyU2mmny8/B0XUqFO1o0TK8OpQNsy7Hse5+AHZLiWtKx1TYpwRvi1Ka18TDGXAzSg8yObk
ccDHrjsqXb1WzGHsrxGSF7Hcu/sJH9mc4ycf4Ux0kxjpHafVgfYifXLmy2mvbscMHYXZAIJPA8sr
y2q0c6t/B6jS62Fqw+ToL9VkGqtr14aYLY9zBbcWPkwcF27BwPTIyeVKUrt2a0Y7UdKOMsyzwbJk
cTn02jhRWh6ZXZc1OO03x3NfFnx8P2nwwcD0AzhbOj0abPj54a8ccosStZKxg3NHbjj9lQL5TdY1
GxbfPXlmsFjbFnxDDYaXCNheAPDOABjHfPZSmiaBV1nUdQt3XTSFssbm+I6N5Dtgzy0Y7EcL2OmL
l/x/Cs2IqxZLsdYjYJJHvdlxI25DSfXlS+gV30JLk9ud8JklDZIpWMYzfgAOYRjIIwEBmdpUjq8e
kQB0enM5lkeQXPGc7Ggdh6n04C+Sx37muVI5KQhqVHGUTCUODzggADGR3UpqEksdR5heGvPG7aXE
D1DRyT9lz86tqenR2KVXVXzOgLpGtfVe+WQFxcGnjjPIORx5IC+0qditYsmS06avI4OiY8fNH6jP
mPRe4dOp17MlmKtGyaT63taAXe6+0X2pKwdbjjjkPO1hJAH6+a2VKbXBDSfIREUEhfMBfUQHzA9F
xvq62/UuuZqUNqJrMthLXR4LCBknd5g8rr1yw2pSnsOBLYo3PIA5wBlfnPRrUdvqsWI5pJY57G/f
IMFxJyc/5K6PTa1Kbk/COd1GbjBRXlnYRBPplCqye5XZG6sI43mMOBlOcuPB45GFuOoXGC06IU7D
QGthOxu4Ozh2cADP2/hZr9Sq46TXdVmlax+6NzCSIsDOSf25UMRTsso7a1mE2bu8xPGfm47ny4Oc
YJ4PoqDe50EtiVbpe6w+Ozp8MsEhY3LBtz8vzOIyc8j9/spGHQqNaHwazXwRg52xvIGVD2a9StYt
V32rL2Qls8jd3PzE4aMYPmTnPos9PUalabxGXnmJ2+eWN7DnaQ0gnPIAzj7k4UZZJn1qjPHotjwL
88W1mXSOk+lo+o++MrljJtZtWIWM1KZ8skgmMQeXv2DB3DLQ3gNGPuCuuT6tpU1ZzJ5Q6JzGuc18
buzjgAjHmeMKHHSDprEUktgMiia1jWsacua1zyAT6YeAR9lAI7TYtY1Pp+vNFPHqIc+QtmstA7OI
B7ZHHooqJlrTb8k1bXfHlnOLDIWuLoSOx2cnaM4XQdI0eDRavw9aSUx99r3ZAPmR6ZPOOyrEXSvw
n4ku1Su8thmhMkjR5Ozg/oeFsgoNPu58GEnJNdvHknK7OoIa7GeLUsYaPneHBzvuVlE2vj6qtI+0
jlL9kWszCIiAIiIDFZh+IqzQk48RhZnHbIwuY0fwuv6Xcq2K92tJ8NIHgPYRuXU0W6q+yrKg+TTb
RXbhzXBV7NrquGVxi02lJFtw0NlOQfXtyo3+sdR1/Ckt0/maTuYIst/yFel8wFMb0lhwREqW3lSZ
BDX6D4WSWG7XkYcMD/HsoLWuoqd0gabrVWo7aWSR2Ku8PHlk9xhXWWpXmBEsMbx/yaCoq10lotzP
iUYwT5t4SudSeZL8/lE2RsksQePz2ZzZ/UXUDJpBNq2kWa4jA2NhOH7e33z78Lqei6k3U9KrWdwL
nxguwMDPmqxb/DTTJsmCWSI++Qox/Qeu6eGnS9XezZktAOMZ/ZWLZ6WyCUE4v6FaqvVQm3JqS+v+
Fn6j6x0zQWSQvsMde2F0cGeSfLPotToOzb1Ola1S68vlnl2tz2DQOw+2crkeq/h51FTsusPZLKSc
ueMuJ+55Xaeh6Umn9JUYJSTJtLnZGOS4lYSlRGhxhvJvn2M1C6V6nL9KT29yxIiKmXAiIgCIiAIi
IAiIgCIiAIiIBjPdAMdkRAEREAREQBERAEREAREQBERAEREAREQBERAEREAWhrUVybR7Uenv2XHM
IidnGHeRW+iAolbTus2P0nxbmWxyH4seIDvG7I/ZbmrUeqpeo5JqFpjNO+HcGxl2D4m04/fCt6ID
m50r8QDXrD48CVsrzL+aPmYQ3b/DlY9Ur9SP1qKWjZa2kA0Ojw3n1PPv/CsqICgM07ruKhPG/UWy
TibfHI3by3HblS+lQdSM1uSXUJWupOjdtYMfK7jGP3VoRCSsaFV6ghs6h/U5SYpP9v8Am7yzk/b2
Xrperr9RlsaxL4xc7dEXP3Y47Z/+KyohBWOl9P6hp27jtZu+PE85ibu3Ac+XorOiIAiIgCIiAIiI
AiIgCIiAIiIAiIgCIiAIiIAixOswsnELpGiQjIaTyVibqVJwH+pj5GQC7lAbSLUfqVSN7WunYC4Z
bz35x/K+DVKbi4CwzLSQRn0z/wBFAbiLVOo1BtJnZhw3A54I90g1CpZIEM7HE4wAeeUBtIiIAiIg
CIiAIiIAiIgNe1EXMEkUMb5mkY38fuo74O27xSadIHA2cZz6g/oplEBExw2nOa2ejVLc92+/ovL6
1prMfBU8nku+/t7kqYWKzXZagdC8kNdjOPscoCOdFOY9nwdMfI4AZyAfIYx2yvDIr7Jvy6tIbXcE
HBxn9uOFmdoVNz935jTlpyHY5GcfytmGhDBcmtMB8WYAPJPkOyAzxGQxgytDX+YByF7REAREQBER
AEREAREQBERAEREAREQBERAEREAREQBERAEREB//2Q==

------=_NextPart_000_0009_01C1324D.85230560--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From replypro@mcgraw-hill.com.tw  Fri Aug 31 11:52:56 2001
From: replypro@mcgraw-hill.com.tw (replypro@mcgraw-hill.com.tw)
Date: Fri, 31 Aug 2001 12:52:56 +0200 (MET DST)
Subject: [Rd] =?big5?B?tfizpbZWrMm3c67RqHQgLS2hbanKvKShQsV2pE+hQrRjpua7ULdMr7otLb9ztfg=?= (PR#1082)
Message-ID: <200108311052.MAA04173@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0009_01C1324D.85230560
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_000A_01C1324D.85230560"


------=_NextPart_001_000A_01C1324D.85230560
Content-Type: text/plain;
	charset="big5"
Content-Transfer-Encoding: quoted-printable

Dear r-bugs,

=AC=B0=A4=B0=BB=F2=A4@=AF=EB=A4H=B9=EF=A4k=A5=CD=AA=BA=A8=E8=AAO=A6L=B6H=B4=
N=ACO=B7=C5=ACX=A1B=B5=BD=C5=E9=A4H=B7N=A1B=BBy=A8=A5=AF=E0=A4O=B1j=A1F
=A6=D3=AC=DB=B9=EF=A6a=BB{=AC=B0=A8k=A5=CD=ABh=A4=F1=B8=FB=ABi=B4=B1=A1B=BD=
=C4=B0=CA=A1B=A6n=A6=E2=A1B=AA=C5=B6=A1=B7P=A1B=A4=E8=A6V=B7P=A8=CE=A1H
=A7A=ACO=A7_=B4=BF=B8g=C3h=BA=C3=B9L=A1A
=B3o=A8=C7=A8=E8=AAO=A6L=B6H=A4=A4=AA=BA=A8=E2=A9=CA=AEt=B2=A7=A8s=B3=BA=AC=
O=A8k=A4k=A8=E2=A9=CA=A6b=A5=CD=B2z=B5o=AEi=A4W=BBP=A5=CD=AD=D1=A8=D3=AA=BA=
=A4=A3=A6P=BF=F2=B6=C7=A6]=A4l=A9=D2=B3y=A6=A8=AA=BA=A1A
=A9=CE=ACO=AB=E1=A4=D1=AA=BA=B1=D0=BEi=BBP=A4=E5=A4=C6=A9=D2=AB=AC=B6=EC=A5=
X=A8=D3=AA=BA=A1H
=A6=D3=A4=A3=A6P=A4=E5=A4=C6=A4=A4=B9=EF=A8k=A4l=AE=F0=B7=A7=BBP=A4k=A9=CA=
=AFS=BD=E8=A9=CE=A6h=A9=CE=A4=D6=AA=BA=B1j=BD=D5=BBP=AD=AB=B5=F8=A1A
=A4S=A9M=B3o=BC=CB=AA=BA=A8=E8=AAO=A6L=B6H=A6=B3=A4=B0=BB=F2=C3=F6=ABY=A9=
O=A1H
=A5=E7=A9=CE=B3o=A4@=A4=C1=A5u=ACO=AC=B0=AE=BA=B6=EC=A5X=C2=F9=A9=CA=A4G=A4=
=B8=BB=F9=AD=C8=C6[=A6=D3=AC=EF=C6w=AA=FE=B7|=A5X=AA=BA=B9L=AE=C9=B0g=AB=E4=
=A1H
=AA=BE=A6W=AA=C0=B7|=A4=DF=B2z=BE=C7=AEa=C0=B9=ACf=B4=B5=B1=D0=B1=C2=B1N=A6=
b=A5=BB=AE=D1=A4=A4=A1A
=B1q=B8A=A9T=E0=AC=AA=BA=C6[=C2I=A1A=AC=B0=A7A=B8=D1=B6}=B3o=A4@=B3s=A6=EA=
=C3=F6=A9=F3=A9=CA=A7O=BBP=A6=E6=AC=B0=BC=D2=A6=A1=AA=BA=BA=C3=B0=DD=A1C
=A6b=A5=BB=AE=D1=A4=A4=A1A=C0=B9=ACf=B4=B5=B1=D0=B1=C2=A5H=B7=A5=AC=B0=A4=
=DE=A4H=A4J=B3=D3=AA=BA=A4=E8=A6=A1=A1A
=AC=B0=A7=DA=AD=CC=A4=B6=B2=D0=A4F=BE=C7=AC=C9=A5=D8=ABe=B9=EF=B8A=A9T=E0=
=AC=A4=CE=A8=E4=B1q=A5j=A6=DC=A4=B5=B9=EF=A4H=C3=FE=A4=DF=B2z=AA=BA=BCv=C5=
T=AA=BA=BB{=C3=D1=A1C
=A7@=AA=CC=A4=DE=A5=CE=A4F=B0w=B9=EF=B6W=B9L=A4K=A4d=A6W=A6=A8=A6~=A8k=A4=
k=A9M=A8=E0=B5=A3=A9=D2=B0=B5=AA=BA=AD=EC=B3=D0=A9=CA=AC=E3=A8s=A1A=A5H=A4=
=CE=A9M=B3o=AD=D3=A5D=C3D=A6=B3=C3=F6=AA=BA=A5@=AC=C9=A4=E5=BE=C7=A1A
=B1N=A8p=B1K=AA=BA=AD=D3=AE=D7=A5v=A9M=B2=C4=A4@=A4=E2=AA=BA=AC=EC=BE=C7=AC=
=E3=A8s=A5=A9=A7=AE=A6=EA=B3s=A1A
=A5H=B1=B4=AF=C1=B8A=A9T=E0=AC=A6b=A4H=C3=FE=A4=DF=B4=BC=A9M=A4H=C3=FE=A9=
R=B9B=B4X=A5G=A6U=AD=D3=AD=B1=A6V=A4W=A9=D2=A7=EA=BAt=AA=BA=A8=A4=A6=E2=A1=
C
=A7@=AA=CC=A7i=B6D=A7=DA=AD=CC=A1A=B8A=A9T=E0=AC=ACO=A6p=A6=F3=BCv=C5T=BB=
y=A8=A5=AF=E0=A4O=A1B=BB{=AA=BE=A1B=AA=C5=B6=A1=A9w=A6=EC=A1B=A7=DA=AD=CC=
=A9=D2=B1q=A8=C6=AA=BA=C2=BE=B7~=A1B
=A7=DA=AD=CC=B7|=A6=A8=AC=B0=A4=B0=BB=F2=BC=CB=AA=BA=B1=A1=A4H=A1B=A4V=A4=
=D2=A1B=A9d=A4l=A9M=A4=F7=A5=C0=A1B
=AC=C6=A6=DC=A9=F3=A7=DA=AD=CC=B7L=AF=BA=AA=BA=A4=E8=A6=A1=B5=A5=A1C
=B8A=A9T=E0=AC=B6=EC=B3y=A4F=A7=DA=AD=CC=B9=EF=A9=CA=A1B=C5v=A4O=A1B=BC=C9=
=A4O=A6=E6=AC=B0=BBP=BFW=A5e=A6a=A6=EC=AA=BA=BC=A4=B1=E6=A1A
=A7=F3=ACO=A7=DA=AD=CC=B7Q=B1=E6=A6=A8=AC=B0=AD^=B6=AF=A1B=A5D=AE_=AA=CC=A1=
A=A9=CE=ACO=C1=E2=A5=FA=BFO=B5J=C2I=AA=BA=AE=DA=B7=BD=A1C
=A5L=A8=C3=A5B=BB=A1=A9=FA=A4F=A1A=B8A=A9T=E0=AC=A6p=A6=F3=AF=E0=B8=D1=C4=
=C0=A8=E2=A9=CA=A4@=AF=EB=A6b=AB=E4=A6=D2=A9M=B7=BE=B3q=A4=E8=A6=A1=A4W=AA=
=BA=AEt=B2=A7=A1C
=B9=EF=A9=F3=B8A=A9T=E0=AC=B3o=AD=D3=B4=AE=ADt=A4F=B3=CC=A6h=B4c=A6W=A1B=BE=
D=A8=FC=B3=CC=A6h=BB~=B8=D1=AA=BA=A4H=C3=FE=BFE=AF=C0=A1A=A5=BB=AE=D1=B4=A3=
=A8=D1=A4F=A4@=AD=D3=A7O=A5X=A4=DF=B5=F4=AA=BA=C6[=C2I=A1C
=A5=F4=A6=F3=B9=EF=A4H=C3=FE=A6=E6=AC=B0=AA=BA=A5=CD=AA=AB=A9=CA=AE=DA=B7=
=BD=B7P=BF=B3=BD=EC=AA=BA=C5=AA=AA=CC=A1A=B1N=B1q=A5=BB=AE=D1=C0=F2=B1o=C5=
=E5=A9_=AA=BA=BE\=C5=AA=B7P=A8=FC=A9M=C2=D7=B4I=AA=BA=B7s=AA=BE=A1C


=20
=A1m=A9=CA=BC=A4=A1B=C5v=A4O=A1B=B4c=A6=E6=BBP=B7L=AF=BA=A1G=BFs=B5=F8=B8=
A=A9T=E0=AC=AA=BA=A8=A4=A6=E2=A7=EA=BAt=B9C=C0=B8=A1n
 =A7@    =AA=CC=A1GJames McBride Dabbs/Mary Godwin Dabbs =
=B3\=AE=CA=BA=D6 =C4=B6
 =AE=D1    =A8t=A1G=B5=F8=B3=A5=B6V=AC=C9 BB001
 =C1` =AD=B6 =BC=C6=A1G320=AD=B6
 =A9w    =BB=F9=A1G320=A4=B8
 I S B N =A1G957-493-412-8

-------------------------------------------------------------------------=
-------



=B3=C1=AE=E6=C3=B9=A7=C6=BA=B8=A5X=AA=A9=A4=BD=A5q =
=A5x=C6W=A4=C0=A4=BD=A5q
Tel 02-27272211  Fax 02-23463300
=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw


------=_NextPart_001_000A_01C1324D.85230560
Content-Type: text/html;
	charset="big5"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; charset=3Dbig5">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#000000 background=3D"">
<DIV><FONT face=3DArial color=3D#ffffff size=3D2>Dear =
r-bugs,</FONT></DIV>
<DIV><FONT face=3DArial color=3D#c0c0c0></FONT>&nbsp;</DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=AC=B0=A4=B0=BB=F2=A4@=AF=EB=A4H=B9=EF=A4k=A5=CD=AA=BA=A8=E8=AAO=
=A6L=B6H=B4N=ACO=B7=C5=ACX=A1B=B5=BD=C5=E9=A4H=B7N=A1B=BBy=A8=A5=AF=E0=A4=
O=B1j=A1F</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A6=D3=AC=DB=B9=EF=A6a=BB{=AC=B0=A8k=A5=CD=ABh=A4=F1=B8=FB=ABi=B4=
=B1=A1B=BD=C4=B0=CA=A1B=A6n=A6=E2=A1B=AA=C5=B6=A1=B7P=A1B=A4=E8=A6V=B7P=A8=
=CE=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A7A=ACO=A7_=B4=BF=B8g=C3h=BA=C3=B9L=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B3o=A8=C7=A8=E8=AAO=A6L=B6H=A4=A4=AA=BA=A8=E2=A9=CA=AEt=B2=A7=A8=
s=B3=BA=ACO=A8k=A4k=A8=E2=A9=CA=A6b=A5=CD=B2z=B5o=AEi=A4W=BBP=A5=CD=AD=D1=
=A8=D3=AA=BA=A4=A3=A6P=BF=F2=B6=C7=A6]=A4l=A9=D2=B3y=A6=A8=AA=BA=A1A</FON=
T></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A9=CE=ACO=AB=E1=A4=D1=AA=BA=B1=D0=BEi=BBP=A4=E5=A4=C6=A9=D2=AB=AC=
=B6=EC=A5X=A8=D3=AA=BA=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A6=D3=A4=A3=A6P=A4=E5=A4=C6=A4=A4=B9=EF=A8k=A4l=AE=F0=B7=A7=BBP=
=A4k=A9=CA=AFS=BD=E8=A9=CE=A6h=A9=CE=A4=D6=AA=BA=B1j=BD=D5=BBP=AD=AB=B5=F8=
=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A4S=A9M=B3o=BC=CB=AA=BA=A8=E8=AAO=A6L=B6H=A6=B3=A4=B0=BB=F2=C3=F6=
=ABY=A9O=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5=E7=A9=CE=B3o=A4@=A4=C1=A5u=ACO=AC=B0=AE=BA=B6=EC=A5X=C2=F9=A9=
=CA=A4G=A4=B8=BB=F9=AD=C8=C6[=A6=D3=AC=EF=C6w=AA=FE=B7|=A5X=AA=BA=B9L=AE=C9=
=B0g=AB=E4=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=AA=BE=A6W=AA=C0=B7|=A4=DF=B2z=BE=C7=AEa=C0=B9=ACf=B4=B5=B1=D0=B1=
=C2=B1N=A6b=A5=BB=AE=D1=A4=A4=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B1q=B8A=A9T=E0=AC=AA=BA=C6[=C2I=A1A=AC=B0=A7A=B8=D1=B6}=B3o=A4@=
=B3s=A6=EA=C3=F6=A9=F3=A9=CA=A7O=BBP=A6=E6=AC=B0=BC=D2=A6=A1=AA=BA=BA=C3=B0=
=DD=A1C<BR>=A6b=A5=BB=AE=D1=A4=A4=A1A=C0=B9=ACf=B4=B5=B1=D0=B1=C2=A5H=B7=A5=
=AC=B0=A4=DE=A4H=A4J=B3=D3=AA=BA=A4=E8=A6=A1=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=AC=B0=A7=DA=AD=CC=A4=B6=B2=D0=A4F=BE=C7=AC=C9=A5=D8=ABe=B9=EF=B8=
A=A9T=E0=AC=A4=CE=A8=E4=B1q=A5j=A6=DC=A4=B5=B9=EF=A4H=C3=FE=A4=DF=B2z=AA=BA=
=BCv=C5T=AA=BA=BB{=C3=D1=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7@=AA=CC=A4=DE=A5=CE=A4F=B0w=B9=EF=B6W=B9L=A4K=A4d=A6W=A6=A8=A6=
~=A8k=A4k=A9M=A8=E0=B5=A3=A9=D2=B0=B5=AA=BA=AD=EC=B3=D0=A9=CA=AC=E3=A8s=A1=
A=A5H=A4=CE=A9M=B3o=AD=D3=A5D=C3D=A6=B3=C3=F6=AA=BA=A5@=AC=C9=A4=E5=BE=C7=
=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=B1N=A8p=B1K=AA=BA=AD=D3=AE=D7=A5v=A9M=B2=C4=A4@=A4=E2=AA=BA=AC=EC=
=BE=C7=AC=E3=A8s=A5=A9=A7=AE=A6=EA=B3s=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5H=B1=B4=AF=C1=B8A=A9T=E0=AC=A6b=A4H=C3=FE=A4=DF=B4=BC=A9M=A4H=
=C3=FE=A9R=B9B=B4X=A5G=A6U=AD=D3=AD=B1=A6V=A4W=A9=D2=A7=EA=BAt=AA=BA=A8=A4=
=A6=E2=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7@=AA=CC=A7i=B6D=A7=DA=AD=CC=A1A=B8A=A9T=E0=AC=ACO=A6p=A6=F3=BC=
v=C5T=BBy=A8=A5=AF=E0=A4O=A1B=BB{=AA=BE=A1B=AA=C5=B6=A1=A9w=A6=EC=A1B=A7=DA=
=AD=CC=A9=D2=B1q=A8=C6=AA=BA=C2=BE=B7~=A1B</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A7=DA=AD=CC=B7|=A6=A8=AC=B0=A4=B0=BB=F2=BC=CB=AA=BA=B1=A1=A4H=A1=
B=A4V=A4=D2=A1B=A9d=A4l=A9M=A4=F7=A5=C0=A1B</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=AC=C6=A6=DC=A9=F3=A7=DA=AD=CC=B7L=AF=BA=AA=BA=A4=E8=A6=A1=B5=A5=
=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B8A=A9T=E0=AC=B6=EC=B3y=A4F=A7=DA=AD=CC=B9=EF=A9=CA=A1B=C5v=A4O=
=A1B=BC=C9=A4O=A6=E6=AC=B0=BBP=BFW=A5e=A6a=A6=EC=AA=BA=BC=A4=B1=E6=A1A</F=
ONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7=F3=ACO=A7=DA=AD=CC=B7Q=B1=E6=A6=A8=AC=B0=AD^=B6=AF=A1B=A5D=AE=
_=AA=CC=A1A=A9=CE=ACO=C1=E2=A5=FA=BFO=B5J=C2I=AA=BA=AE=DA=B7=BD=A1C</FONT=
></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5L=A8=C3=A5B=BB=A1=A9=FA=A4F=A1A=B8A=A9T=E0=AC=A6p=A6=F3=AF=E0=
=B8=D1=C4=C0=A8=E2=A9=CA=A4@=AF=EB=A6b=AB=E4=A6=D2=A9M=B7=BE=B3q=A4=E8=A6=
=A1=A4W=AA=BA=AEt=B2=A7=A1C<BR>=B9=EF=A9=F3=B8A=A9T=E0=AC=B3o=AD=D3=B4=AE=
=ADt=A4F=B3=CC=A6h=B4c=A6W=A1B=BED=A8=FC=B3=CC=A6h=BB~=B8=D1=AA=BA=A4H=C3=
=FE=BFE=AF=C0=A1A=A5=BB=AE=D1=B4=A3=A8=D1=A4F=A4@=AD=D3=A7O=A5X=A4=DF=B5=F4=
=AA=BA=C6[=C2I=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#ffffff size=3D2><FONT=20
color=3D#c0c0c0>=A5=F4=A6=F3=B9=EF=A4H=C3=FE=A6=E6=AC=B0=AA=BA=A5=CD=AA=AB=
=A9=CA=AE=DA=B7=BD=B7P=BF=B3=BD=EC=AA=BA=C5=AA=AA=CC=A1A=B1N=B1q=A5=BB=AE=
=D1=C0=F2=B1o=C5=E5=A9_=AA=BA=BE\=C5=AA=B7P=A8=FC=A9M=C2=D7=B4I=AA=BA=B7s=
=AA=BE=A1C</FONT></FONT></DIV>
<DIV><FONT face=3DMingLiu size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2><IMG style=3D"WIDTH: =
127px; HEIGHT: 178px" alt=3D""=20
hspace=3D0 src=3D"cid:000401c1320a$733269b0$1264a8c0@mie31" =
align=3Dbaseline=20
border=3D1><FONT face=3DMingLiu>&nbsp;</FONT></FONT></DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 color=3D#ffffff =
size=3D2>=A1m=A9=CA=BC=A4=A1B=C5v=A4O=A1B=B4c=A6=E6=BBP=B7L=AF=BA=A1G=BFs=
=B5=F8=B8A=A9T=E0=AC=AA=BA=A8=A4=A6=E2=A7=EA=BAt=B9C=C0=B8</FONT><FONT=20
face=3D=B2=D3=A9=FA=C5=E9 color=3D#ffffff =
size=3D2>=A1n<BR>&nbsp;=A7@&nbsp;&nbsp;&nbsp; =AA=CC=A1G<FONT=20
face=3DArial>James McBride Dabbs/Mary Godwin Dabbs</FONT> =
=B3\=AE=CA=BA=D6=20
=C4=B6<BR>&nbsp;=AE=D1&nbsp;&nbsp;&nbsp; =
=A8t=A1G=B5=F8=B3=A5=B6V=AC=C9&nbsp;BB001<BR>&nbsp;=C1` =AD=B6=20
=BC=C6=A1G320=AD=B6<BR>&nbsp;=A9w&nbsp;&nbsp;&nbsp; =
=BB=F9=A1G320=A4=B8<BR>&nbsp;I S B N=20
=A1G957-493-412-8</FONT></DIV>
<DIV>
<HR>
</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9><FONT color=3D#c0c0c0 =
size=3D2></FONT></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 color=3D#c0c0c0 =
size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2><FONT=20
color=3D#c0c0c0>=B3=C1=AE=E6=C3=B9=A7=C6=BA=B8=A5X=AA=A9=A4=BD=A5q&nbsp;=A5=
x=C6W=A4=C0=A4=BD=A5q</FONT></FONT></DIV>
<DIV><FONT face=3D"Comic Sans MS" color=3D#c0c0c0=20
size=3D2>Tel&nbsp;02-27272211&nbsp;&nbsp;Fax 02-23463300</FONT></DIV>
<DIV>
<DIV><FONT face=3DMingLiu size=3D2><A=20
href=3D"mailto:=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw"><FONT =
face=3D"Comic Sans MS"=20
color=3D#c0c0c0>=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw</FONT></A><=
/FONT><FONT face=3D=B2=D3=A9=FA=C5=E9=20
size=3D2></DIV></DIV></FONT>
<DIV><FONT face=3DMingLiu size=3D2></FONT>&nbsp;</DIV></BODY></HTML>

------=_NextPart_001_000A_01C1324D.85230560--

------=_NextPart_000_0009_01C1324D.85230560
Content-Type: image/jpeg;
	name="heros.jpg"
Content-Transfer-Encoding: base64
Content-ID: <000401c1320a$733269b0$1264a8c0@mie31>

/9j/4AAQSkZJRgABAQEB0QHRAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0a
HBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIy
MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCACyAH8DASIA
AhEBAxEB/8QAHAABAAIDAQEBAAAAAAAAAAAAAAUGAwQHAgEI/8QANRAAAQQBAwIEBAUDBAMAAAAA
AQACAwQRBRIhBjETQVFxFCIyYQcjgaGxFUKRJDRi0YPB4f/EABoBAQACAwEAAAAAAAAAAAAAAAAB
BAIDBQb/xAApEQACAgEDAwMDBQAAAAAAAAAAAQIDEQQhMQUSQSJhkXGh8DJCgdHh/9oADAMBAAIR
AxEAPwDv6IiAIiIAiZRAEREAREQBERAEREAREQBERAERUvr/AKjtaDBUFWRjHSuduLx5BbaaZXTV
ceWarro0wdkuEVrrH8VNV6WuOhOj8l5EZm+l7QT8wIPtwQo/Tvxt1Gy+MT6CxocM7mvdj+FTdY6l
Zq9vxLzjblk+XBYMYHoPRbmh02TbalWCUxz92M+oeeRnOMLuR6XWvVNp4W6Rx59Sml2qLTb2b/o6
Vpf4ou1CN736UGBm7c1kxccNBOR8v2PdWmzrs0Wiuvms2DONnjSAYB7E/wDQ5VGh0OrX6TdeNKF0
gqTx8P2ljg9/zf8AL0/RWmbTY2aG+q/TvBksvZGwROMp7fUcjAwMrh2yi36Y4OxVGSXqlk0p+u7U
G6U6ZughLBYAeA+PdwB6EkkEYPbv2Vs025PfossS1JKjn5PhS4LgPLsqJpIqF726jcrWRclGysHM
a5sp/Lw5oA5AAPbjlWqhFqb6dOSK3LvicWTxWmD52g47gdx5Ed1qNpK3bTaNOe1Kfy4WGRwAycAZ
OOVE2erdLpzRxzWcOc3c4bD8ozjy+5wtbryOSfpueKGBr5C0uMjhxE0cuPvjj9VzaWjZfqzC9rhD
FZbGGx13N3fKHHAwTjgED79lKJwdnrX4LcXiQOc9mSNwaccLxJq1CKcQSW4WSn+xzsH/AAq9pM2p
QdGwTsEDovhnSF0z3B/OT6emF5gFqtpejw29OpTCd0cJLnEuAIyTyO/CLGdzGXd+0sjdUoP+m7XP
/kCysuVpPosRO9ngqsax0TSsOhno1KkT4+HRuiy2Rp75wQqT1S6hBahqaVSEMrGj8yu/vjII2gke
Xur1Glrvkowk/hbfcoX6qyiLlOK+Xv8AY7IiIqB0AuPfitVj1nXadOS0YI68RccAuyT2GP0C7CuR
dZaJrF3qSxPFp9iSIgBr2MJGF0OmKDv9bxsyh1GVkac1rLyil6PoFNt9kEksdcD65pDnGPRS+lap
/SNVJhe+aqXgEbcF4zwcZ7/qsEuiauw/mabc9zC4/wDpab2S1JwyZjoX8Ha9uDj2K9R21WJx7k01
xseXc7oyU2mmny8/B0XUqFO1o0TK8OpQNsy7Hse5+AHZLiWtKx1TYpwRvi1Ka18TDGXAzSg8yObk
ccDHrjsqXb1WzGHsrxGSF7Hcu/sJH9mc4ycf4Ux0kxjpHafVgfYifXLmy2mvbscMHYXZAIJPA8sr
y2q0c6t/B6jS62Fqw+ToL9VkGqtr14aYLY9zBbcWPkwcF27BwPTIyeVKUrt2a0Y7UdKOMsyzwbJk
cTn02jhRWh6ZXZc1OO03x3NfFnx8P2nwwcD0AzhbOj0abPj54a8ccosStZKxg3NHbjj9lQL5TdY1
GxbfPXlmsFjbFnxDDYaXCNheAPDOABjHfPZSmiaBV1nUdQt3XTSFssbm+I6N5Dtgzy0Y7EcL2OmL
l/x/Cs2IqxZLsdYjYJJHvdlxI25DSfXlS+gV30JLk9ud8JklDZIpWMYzfgAOYRjIIwEBmdpUjq8e
kQB0enM5lkeQXPGc7Ggdh6n04C+Sx37muVI5KQhqVHGUTCUODzggADGR3UpqEksdR5heGvPG7aXE
D1DRyT9lz86tqenR2KVXVXzOgLpGtfVe+WQFxcGnjjPIORx5IC+0qditYsmS06avI4OiY8fNH6jP
mPRe4dOp17MlmKtGyaT63taAXe6+0X2pKwdbjjjkPO1hJAH6+a2VKbXBDSfIREUEhfMBfUQHzA9F
xvq62/UuuZqUNqJrMthLXR4LCBknd5g8rr1yw2pSnsOBLYo3PIA5wBlfnPRrUdvqsWI5pJY57G/f
IMFxJyc/5K6PTa1Kbk/COd1GbjBRXlnYRBPplCqye5XZG6sI43mMOBlOcuPB45GFuOoXGC06IU7D
QGthOxu4Ozh2cADP2/hZr9Sq46TXdVmlax+6NzCSIsDOSf25UMRTsso7a1mE2bu8xPGfm47ny4Oc
YJ4PoqDe50EtiVbpe6w+Ozp8MsEhY3LBtz8vzOIyc8j9/spGHQqNaHwazXwRg52xvIGVD2a9StYt
V32rL2Qls8jd3PzE4aMYPmTnPos9PUalabxGXnmJ2+eWN7DnaQ0gnPIAzj7k4UZZJn1qjPHotjwL
88W1mXSOk+lo+o++MrljJtZtWIWM1KZ8skgmMQeXv2DB3DLQ3gNGPuCuuT6tpU1ZzJ5Q6JzGuc18
buzjgAjHmeMKHHSDprEUktgMiia1jWsacua1zyAT6YeAR9lAI7TYtY1Pp+vNFPHqIc+QtmstA7OI
B7ZHHooqJlrTb8k1bXfHlnOLDIWuLoSOx2cnaM4XQdI0eDRavw9aSUx99r3ZAPmR6ZPOOyrEXSvw
n4ku1Su8thmhMkjR5Ozg/oeFsgoNPu58GEnJNdvHknK7OoIa7GeLUsYaPneHBzvuVlE2vj6qtI+0
jlL9kWszCIiAIiIDFZh+IqzQk48RhZnHbIwuY0fwuv6Xcq2K92tJ8NIHgPYRuXU0W6q+yrKg+TTb
RXbhzXBV7NrquGVxi02lJFtw0NlOQfXtyo3+sdR1/Ckt0/maTuYIst/yFel8wFMb0lhwREqW3lSZ
BDX6D4WSWG7XkYcMD/HsoLWuoqd0gabrVWo7aWSR2Ku8PHlk9xhXWWpXmBEsMbx/yaCoq10lotzP
iUYwT5t4SudSeZL8/lE2RsksQePz2ZzZ/UXUDJpBNq2kWa4jA2NhOH7e33z78Lqei6k3U9KrWdwL
nxguwMDPmqxb/DTTJsmCWSI++Qox/Qeu6eGnS9XezZktAOMZ/ZWLZ6WyCUE4v6FaqvVQm3JqS+v+
Fn6j6x0zQWSQvsMde2F0cGeSfLPotToOzb1Ola1S68vlnl2tz2DQOw+2crkeq/h51FTsusPZLKSc
ueMuJ+55Xaeh6Umn9JUYJSTJtLnZGOS4lYSlRGhxhvJvn2M1C6V6nL9KT29yxIiKmXAiIgCIiAIi
IAiIgCIiAIiIBjPdAMdkRAEREAREQBERAEREAREQBERAEREAREQBERAEREAWhrUVybR7Uenv2XHM
IidnGHeRW+iAolbTus2P0nxbmWxyH4seIDvG7I/ZbmrUeqpeo5JqFpjNO+HcGxl2D4m04/fCt6ID
m50r8QDXrD48CVsrzL+aPmYQ3b/DlY9Ur9SP1qKWjZa2kA0Ojw3n1PPv/CsqICgM07ruKhPG/UWy
TibfHI3by3HblS+lQdSM1uSXUJWupOjdtYMfK7jGP3VoRCSsaFV6ghs6h/U5SYpP9v8Am7yzk/b2
Xrperr9RlsaxL4xc7dEXP3Y47Z/+KyohBWOl9P6hp27jtZu+PE85ibu3Ac+XorOiIAiIgCIiAIiI
AiIgCIiAIiIAiIgCIiAIiIAixOswsnELpGiQjIaTyVibqVJwH+pj5GQC7lAbSLUfqVSN7WunYC4Z
bz35x/K+DVKbi4CwzLSQRn0z/wBFAbiLVOo1BtJnZhw3A54I90g1CpZIEM7HE4wAeeUBtIiIAiIg
CIiAIiIAiIgNe1EXMEkUMb5mkY38fuo74O27xSadIHA2cZz6g/oplEBExw2nOa2ejVLc92+/ovL6
1prMfBU8nku+/t7kqYWKzXZagdC8kNdjOPscoCOdFOY9nwdMfI4AZyAfIYx2yvDIr7Jvy6tIbXcE
HBxn9uOFmdoVNz935jTlpyHY5GcfytmGhDBcmtMB8WYAPJPkOyAzxGQxgytDX+YByF7REAREQBER
AEREAREQBERAEREAREQBERAEREAREQBERAEREB//2Q==

------=_NextPart_000_0009_01C1324D.85230560--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Aug 31 13:03:24 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 31 Aug 2001 14:03:24 +0200
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <3B865419.68732554@research.bell-labs.com>
References: <Pine.LNX.4.31.0108240825520.29809-100000@gannet.stats>
 <3B865419.68732554@research.bell-labs.com>
Message-ID: <15247.32012.939118.454204@mithrandir.hornik.net>

>>>>> John Chambers writes:

> Prof Brian Ripley wrote:
>> 
>> Currently read.table is rather limited in its type conversion.
>> The algorithm is
>> 
>> 0) Read as character
>> 1) Try to convert to numeric. If that works, quit
>> 2) Convert to factor unless !as.is.
>> 
>> I am thinking about adding more flexibility and more classes by the
>> following two changes.
>> 
>> A) Anticipating the arrival of classes for all R objects, add an
>> argument say `colClasses' that allows the user to specify the desired
>> class for every column.  This could default to "auto", or NA if people
>> think "auto" might be a relevant class name one day.
>> 
>> The effect would be equivalent to running
>> 
>> data[[i]] <- as(data[[i]], colClasses[i])
>> 
>> instead of
>> 
>> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
>> 
>> except that standard classes such as "numeric", "factor", "logical",
>> "character" would be dispatched directly, and argument "dec" would be
>> consulted where appropriate.
>> 
>> colClasses = "character" would suppress all conversions, which cannot
>> currently be done.

Just a small remark.  I would prefer `NA' to "auto" (or "unknown").  May
be too late to change this now :-)

I would also be happier if we did not refer to the variables explicitly
as `columns'.  (This sounds a bit stupid from the person who wrote
write.table and introduced arguments `row.names' and `col.names'.
Although, at least one of these was modelled after an existing
function).  E.g. something like

	read.table(......, caseNames, varNames, varClasses, .....)

would be nice ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 31 13:13:03 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 31 Aug 2001 13:13:03 +0100 (BST)
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <15247.32012.939118.454204@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>

On Fri, 31 Aug 2001, Kurt Hornik wrote:

> > Prof Brian Ripley wrote:
> >>
> >> Currently read.table is rather limited in its type conversion.
> >> The algorithm is
> >>
> >> 0) Read as character
> >> 1) Try to convert to numeric. If that works, quit
> >> 2) Convert to factor unless !as.is.
> >>
> >> I am thinking about adding more flexibility and more classes by the
> >> following two changes.
> >>
> >> A) Anticipating the arrival of classes for all R objects, add an
> >> argument say `colClasses' that allows the user to specify the desired
> >> class for every column.  This could default to "auto", or NA if people
> >> think "auto" might be a relevant class name one day.
> >>
> >> The effect would be equivalent to running
> >>
> >> data[[i]] <- as(data[[i]], colClasses[i])
> >>
> >> instead of
> >>
> >> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
> >>
> >> except that standard classes such as "numeric", "factor", "logical",
> >> "character" would be dispatched directly, and argument "dec" would be
> >> consulted where appropriate.
> >>
> >> colClasses = "character" would suppress all conversions, which cannot
> >> currently be done.
>
> Just a small remark.  I would prefer `NA' to "auto" (or "unknown").  May
> be too late to change this now :-)

Anything can be changed up to 1.4.0 release.  In particular, the present
code will have to be changed unless as() is in base by then.

> I would also be happier if we did not refer to the variables explicitly
> as `columns'.  (This sounds a bit stupid from the person who wrote
> write.table and introduced arguments `row.names' and `col.names'.
> Although, at least one of these was modelled after an existing
> function).  E.g. something like
>
> 	read.table(......, caseNames, varNames, varClasses, .....)
>
> would be nice ...

The problem is that what is being referred to *is* columns and not
variables.  If you have row names on the file, the numbering is different.
So it matters to use sufficiently precise terminology.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Aug 31 13:20:33 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 31 Aug 2001 05:20:33 -0700
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
References: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
Message-ID: <87y9o08lpq.fsf@jeeves.blindglobe.net>

>>>>> "BDR" == Brian D Ripley <Prof> writes:


    >> I would also be happier if we did not refer to the variables
    >> explicitly as `columns'.  (This sounds a bit stupid from the
    >> person who wrote write.table and introduced arguments
    >> `row.names' and `col.names'.  Although, at least one of these
    >> was modelled after an existing function).  E.g. something like
    >> 
    >> read.table(......, caseNames, varNames, varClasses, .....)
    >> 
    >> would be nice ...

    BDR> The problem is that what is being referred to *is* columns
    BDR> and not variables.  If you have row names on the file, the
    BDR> numbering is different.  So it matters to use sufficiently
    BDR> precise terminology.

I would tend to agree with Brian.  To me, caseNames / varNames
sounds a rather bit arrogant, since there are a number of other
"formats" (contingency tables come to mind) for which read.table is
one possible way for slurping in the data prior to munging it, though
I guess one could argue that this is an abuse of tools.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Fri Aug 31 18:08:33 2001
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Fri, 31 Aug 2001 19:08:33 +0200 (MET DST)
Subject: [Rd] --quiet flag sets echo option to TRUE (PR#1083)
Message-ID: <200108311708.TAA09196@pubhealth.ku.dk>

The help for options says:

    echo: logical.  Only used in non-interactive mode, when it controls
          whether input is echoed. Command-line options `--quiet' and
          `--slave' set this initially to `FALSE'.

I don't think that this is correct for me.


Consider the following session:

mica|junk> ls
test.R
mica|junk> cat test.R 
cat("Why was this command echoed?\n")
mica|junk> R CMD BATCH --quiet test.R 
mica|junk> ls
test.R		test.Rout
mica|junk> cat test.Rout 
> invisible(options(echo = TRUE))
> cat("Why was this command echoed?\n")
Why was this command echoed?
> proc.time()
[1] 1.13 0.11 1.20 0.00 0.00
> 
mica|junk> 

Either using --quiet should set echo to FALSE (my personal preference) or the
documentation for options should be changed.

Apologies if I have misunderstood something here.

Regards,

Dave Kane

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 31 18:21:06 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 2001 19:21:06 +0200
Subject: [Rd] --quiet flag sets echo option to TRUE (PR#1083)
In-Reply-To: <200108311708.TAA09196@pubhealth.ku.dk>
References: <200108311708.TAA09196@pubhealth.ku.dk>
Message-ID: <x2zo8gqh6l.fsf@blueberry.kubism.ku.dk>

a296180@mica.fmr.com writes:

> The help for options says:
> 
>     echo: logical.  Only used in non-interactive mode, when it controls
>           whether input is echoed. Command-line options `--quiet' and
>           `--slave' set this initially to `FALSE'.
> 
> I don't think that this is correct for me.
> 
> 
> Consider the following session:
> 
> mica|junk> ls
> test.R
> mica|junk> cat test.R 
> cat("Why was this command echoed?\n")
> mica|junk> R CMD BATCH --quiet test.R 
> mica|junk> ls
> test.R		test.Rout
> mica|junk> cat test.Rout 
> > invisible(options(echo = TRUE))
> > cat("Why was this command echoed?\n")
> Why was this command echoed?
> > proc.time()
> [1] 1.13 0.11 1.20 0.00 0.00
> > 
> mica|junk> 
> 
> Either using --quiet should set echo to FALSE (my personal preference) or the
> documentation for options should be changed.
> 
> Apologies if I have misunderstood something here.

You seem to be right, but since BATCH is messing with options()
itself, your example doesn't prove it. However, this does:

[pd@blueberry R]$ R --quiet --vanilla < test.R
> cat("Why was this command echoed?\n")
Why was this command echoed?
>

(with 1.3.1)

Since --slave turns the echoing off, and it is nice to be able to
kill just the startup blurb, my vote is to change the docs.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug  1 10:00:16 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 1 Aug 2001 11:00:16 +0200
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <pxbsm1jg8b.fsf@infiniti.ece.cmu.edu>
References: <200107291917.VAA24794@pubhealth.ku.dk>
 <pxsnffpkc8.fsf@infiniti.ece.cmu.edu>
 <pxlml6cxfo.fsf@infiniti.ece.cmu.edu>
 <15205.38703.553276.335905@mithrandir.hornik.net>
 <pxbsm1jg8b.fsf@infiniti.ece.cmu.edu>
Message-ID: <15207.50464.266507.281379@mithrandir.hornik.net>

>>>>> Thomas Vogels writes:

> Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at> writes:

>> >>>>> Thomas Vogels writes:
>> 
>> > Excerpt from Kurt's email this morning:
>> 
>> >>>> > 2) after configure (with CC=gcc but using AIX's linker
>> >> /usr/bin/ld), the
>> >>>> > Makefile in src/library/tcltk/src doesn't protect the linker
>> >> flags
>> >> -bI
>> >>>> > with -Xlinker! (-Xlinker is required when using gcc so that the
>> >> linker flags
>> >>>> > are passed on to ld correctly.  Which I know that you know...)
>> >>>> >   The fix is to add -Xlinker before every -bI. Sorry, haven't
>> >> looked into
>> >>>> > patching configure yet...
>> >> 
>> >> Very strange.  Configure has
>> >> 
>> >> *aix4.[2-9]*)
>> >> EXPORTFILE="\$(top_builddir)/etc/R.exp"
>> >> cpicflags=
>> >> cxxpicflags=
>> >> fpicflags=
>> >> wl="-Wl,"
>> >> main_ldflags="${wl}-bdynamic ${wl}-bE:${EXPORTFILE} ${wl}-bM:SRE"
>> >> shlib_ldflags="${wl}-bM:SRE ${wl}-H512 ${wl}-T512 ${wl}-bnoentry \
>> >> ${wl}-bexpall ${wl}-bI:\$(R_HOME)/etc/R.exp"
>> >> SHLIB_LIBADD="\$(LIBM)"
>> >> ;;
>> >> 
>> >> so unless I am missing something obvious all linker flages are
>> >> protected
>> >> via `-Wl,' (which should also work if the C compiler is not gcc).
>> >> 
>> 
>> > Sorry, should have been more explicit, I guess: the problem is with
>> > PKG_LIBS (which is the only variable in that Makefile using linker
>> > flags...)  Some digging shows that '-Wl,' (or '-Xlinker') is missing
>> > in tkConfig.sh.  So if you have Tcl/Tk (8.3 in my case) installed and
>> > used AIX's 'cc' compiler, you get in trouble with later using gcc
>> > (e.g. for R).  Oddly, this didn't show when compiling, say, Tktable.
>> 
>> > There is the question, why configure didn't "see" this coming.  What
>> > would be nice is a warning to the effect that tkConfig.sh is broken
>> > when R can't compile tcltk.c.  (Currently I get messages about libc.a
>> > not found...)
>> 
>> This is asking for a bit much, I think.  How would configure know for
>> sure that tkConfig.sh is broken?

> I promise to get more sleep soon... 'What would be nice is a warning
> to the effect that the Tcl/Tk configuration failed, like:
> checking how to compile and link tcl/tk.... failed
> '  Asking about tkConfig.sh (or tclConfig.sh) is probably too muc as
> threre are other factors that can cause the fail (config.site...).

> What this would boil down to is trying to compile e.g. tkAppInit.c and
> see whether compilation and linking works.  But even this may
> be asking  fortoo much, this is just one architecture.  Things like these
> will continue to happen with AIX as long as there are those '.exp'
> files around...


>> On second thought: the comment in tkConfig.sh says
>> 
>> # String to pass to linker to pick up the Tk library from its
>> # installed directory.
>> TK_LIB_SPEC='@TK_LIB_SPEC@'
>> 
>> so maybe this assumes to be called by ld directly ...
>> 
>> What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?

> hell breaks loose.  TK_LIB_SPEC contains '-bI/some/path/libtk8.3.exp'
> which is needed badly when linking on AIX.

Argh.  After sinking some more time into this ... here's what happens.

Assuming that both tclConfig.sh and tkConfig.sh are found, we do

	TCLTL_LIBS="${TCL_LIB_SPEC} ${TK_LIB_SPEC} ${TK_LIBS}"

Using tcl8.4a1 and tk8.4a1 one gets for a shared build on AIX from the
TclTk configure code:

    if test "$using_gcc" = "yes" ; then
        TCL_BUILD_LIB_SPEC="-Wl,-bI:`pwd`/${TCL_BUILD_EXP_FILE} -L`pwd`"
        TCL_LIB_SPEC="-Wl,-bI:${exec_prefix}/lib/${TCL_EXP_FILE} -L`pwd`"    
    else
        TCL_BUILD_LIB_SPEC="-bI:`pwd`/${TCL_BUILD_EXP_FILE}"
        TCL_LIB_SPEC="-bI:${exec_prefix}/lib/${TCL_EXP_FILE}"    
    fi

    TK_LIB_SPEC="-bI:${exec_prefix}/lib/${TK_EXP_FILE}"

So the TclTk maintainers in their infinite wisdom have caught the gcc
case for tcl but not for tk.

I therefore suggest the following.

* Can you try replacing

      TCLTK_LIBS="${TCLTK_LIBS} ${TK_LIB_SPEC} ${TK_LIBS}"

  in m4/R.m4 by

      TCLTK_LIBS="${TCLTK_LIBS} ${wl}${TK_LIB_SPEC} ${TK_LIBS}"

  and see if that works?  (You will have to configure using
  --enable-maintainer-mode to get configure rebuilt.  Or, you could
  simply edit configure.)  By `works' I mean under both gcc and cc.

* If so, this is the short-term fix we could go for.  If not, we may
  need to infer wl for non-gcc from libtool, which is doable.

* It may be useful to report the discrepancy to the TclTk maintainers.

* Provided they fix the problem, we need to think about better
  strategies.  (Something like if wl is not the empty string and
  TK_LIB_SPEC does not start with it then add it as prefix.)  But let us
  not worry about this now.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vogels@cmu.edu  Thu Aug  2 04:30:33 2001
From: vogels@cmu.edu (Thomas J Vogels)
Date: Wed, 1 Aug 2001 23:30:33 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <15207.50464.266507.281379@mithrandir.hornik.net>
Message-ID: <NFBBKIAHMMCHOBIBLMMPMEBPCAAA.tov@ece.cmu.edu>

Excerpt from email by Kurt Hornik:

>>> On second thought: the comment in tkConfig.sh says
>>>
>>> # String to pass to linker to pick up the Tk library from its
>>> # installed directory.
>>> TK_LIB_SPEC='@TK_LIB_SPEC@'
>>>
>>> so maybe this assumes to be called by ld directly ...

I think you're right with this assumption, but sadly, the current devel
release for tcl/tk 8.4a2 is broken--even the maintainers of tcl/tk don't
know how they want to handle TK_LIB_SPEC, TK_LIBS and friends!  When I tried
to compile Tk it failed for 'wish'.  I'll check out how to file bug reports
against tcl/tk...

>>>
>>> What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?
>
>> hell breaks loose.  TK_LIB_SPEC contains '-bI/some/path/libtk8.3.exp'
>> which is needed badly when linking on AIX.
>
> Argh.  After sinking some more time into this ... here's what happens.
>
> Assuming that both tclConfig.sh and tkConfig.sh are found, we do
>
> 	TCLTL_LIBS="${TCL_LIB_SPEC} ${TK_LIB_SPEC} ${TK_LIBS}"
>
> Using tcl8.4a1 and tk8.4a1 one gets for a shared build on AIX from the
> TclTk configure code:
>
>     if test "$using_gcc" = "yes" ; then
>         TCL_BUILD_LIB_SPEC="-Wl,-bI:`pwd`/${TCL_BUILD_EXP_FILE} -L`pwd`"
>         TCL_LIB_SPEC="-Wl,-bI:${exec_prefix}/lib/${TCL_EXP_FILE} -L`pwd`"

... which is wrong, BTW:  TCL_LIB_SPEC should refer to ${exec_prefix}/lib
not `pwd` ...

>     else
>         TCL_BUILD_LIB_SPEC="-bI:`pwd`/${TCL_BUILD_EXP_FILE}"
>         TCL_LIB_SPEC="-bI:${exec_prefix}/lib/${TCL_EXP_FILE}"
>     fi
>
>    TK_LIB_SPEC="-bI:${exec_prefix}/lib/${TK_EXP_FILE}"
>
> So the TclTk maintainers in their infinite wisdom have caught the gcc
> case for tcl but not for tk.

That would explain why Tcl/Tk compiles with Aix's cc but not gcc.

>
> I therefore suggest the following.
>
> * Can you try replacing
>
>       TCLTK_LIBS="${TCLTK_LIBS} ${TK_LIB_SPEC} ${TK_LIBS}"
>
>   in m4/R.m4 by
>
>       TCLTK_LIBS="${TCLTK_LIBS} ${wl}${TK_LIB_SPEC} ${TK_LIBS}"
>
>   and see if that works?  (You will have to configure using
>   --enable-maintainer-mode to get configure rebuilt.  Or, you could
>   simply edit configure.)  By `works' I mean under both gcc and cc.

I changed configure since I don't have autoconf etc. installed.
Your solution works when compiling with gcc! I haven't tried cc yet but will
do so tomorrow.

> * If so, this is the short-term fix we could go for.  If not, we may
>   need to infer wl for non-gcc from libtool, which is doable.
>
> * It may be useful to report the discrepancy to the TclTk maintainers.

I'll try to compile tcl and tk with gcc and send in reports.

> * Provided they fix the problem, we need to think about better
>   strategies.  (Something like if wl is not the empty string and
>   TK_LIB_SPEC does not start with it then add it as prefix.)  But let us
>   not worry about this now.

Do you really want to go this way?  Is AIX the only OS where you can run
into this kind of trouble?  If so, why not add a compilation of a little
test program  in configure in case you have os==AIX, that would use the same
flags that you'll use in library/src/tcltk.c?  If that fails, it's flagged
early on and directly points to the tcl/tk installation (and not to R).

Thanks,
  -tom

--
Email: vogels@cmu.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug  2 07:19:35 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 2 Aug 2001 08:19:35 +0200
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <NFBBKIAHMMCHOBIBLMMPMEBPCAAA.tov@ece.cmu.edu>
References: <15207.50464.266507.281379@mithrandir.hornik.net>
 <NFBBKIAHMMCHOBIBLMMPMEBPCAAA.tov@ece.cmu.edu>
Message-ID: <15208.61687.130864.413709@mithrandir.hornik.net>

>>>>> Thomas J Vogels writes:

> Excerpt from email by Kurt Hornik:
>>>> On second thought: the comment in tkConfig.sh says
>>>> 
>>>> # String to pass to linker to pick up the Tk library from its
>>>> # installed directory.
>>>> TK_LIB_SPEC='@TK_LIB_SPEC@'
>>>> 
>>>> so maybe this assumes to be called by ld directly ...

> I think you're right with this assumption, but sadly, the current
> devel release for tcl/tk 8.4a2 is broken--even the maintainers of
> tcl/tk don't know how they want to handle TK_LIB_SPEC, TK_LIBS and
> friends!  When I tried to compile Tk it failed for 'wish'.  I'll check
> out how to file bug reports against tcl/tk...

[Well getting AIX right is not that easy.  Fortunately, R has Tom Vogels
to help ...]

>>>> 
>>>> What happens if we omit TK_LIB_SPEC from TCLTK_LIBS?
>> 
>>> hell breaks loose.  TK_LIB_SPEC contains '-bI/some/path/libtk8.3.exp'
>>> which is needed badly when linking on AIX.
>> 
>> Argh.  After sinking some more time into this ... here's what happens.
>> 
>> Assuming that both tclConfig.sh and tkConfig.sh are found, we do
>> 
>> TCLTL_LIBS="${TCL_LIB_SPEC} ${TK_LIB_SPEC} ${TK_LIBS}"
>> 
>> Using tcl8.4a1 and tk8.4a1 one gets for a shared build on AIX from the
>> TclTk configure code:
>> 
>> if test "$using_gcc" = "yes" ; then
>> TCL_BUILD_LIB_SPEC="-Wl,-bI:`pwd`/${TCL_BUILD_EXP_FILE} -L`pwd`"
>> TCL_LIB_SPEC="-Wl,-bI:${exec_prefix}/lib/${TCL_EXP_FILE} -L`pwd`"

> ... which is wrong, BTW:  TCL_LIB_SPEC should refer to
> ${exec_prefix}/lib not `pwd` ...

You mean in the `-L' part?  Certainly correct ...

>> else
>> TCL_BUILD_LIB_SPEC="-bI:`pwd`/${TCL_BUILD_EXP_FILE}"
>> TCL_LIB_SPEC="-bI:${exec_prefix}/lib/${TCL_EXP_FILE}"
>> fi
>> 
>> TK_LIB_SPEC="-bI:${exec_prefix}/lib/${TK_EXP_FILE}"
>> 
>> So the TclTk maintainers in their infinite wisdom have caught the gcc
>> case for tcl but not for tk.

> That would explain why Tcl/Tk compiles with Aix's cc but not gcc.

Yep.

>> 
>> I therefore suggest the following.
>> 
>> * Can you try replacing
>> 
>> TCLTK_LIBS="${TCLTK_LIBS} ${TK_LIB_SPEC} ${TK_LIBS}"
>> 
>> in m4/R.m4 by
>> 
>> TCLTK_LIBS="${TCLTK_LIBS} ${wl}${TK_LIB_SPEC} ${TK_LIBS}"
>> 
>> and see if that works?  (You will have to configure using
>> --enable-maintainer-mode to get configure rebuilt.  Or, you could
>> simply edit configure.)  By `works' I mean under both gcc and cc.

> I changed configure since I don't have autoconf etc. installed.  Your
> solution works when compiling with gcc! I haven't tried cc yet but
> will do so tomorrow.

Ok, great.  My assumption/hope is that this should work ...

>> * If so, this is the short-term fix we could go for.  If not, we may
>> need to infer wl for non-gcc from libtool, which is doable.
>> 
>> * It may be useful to report the discrepancy to the TclTk maintainers.

> I'll try to compile tcl and tk with gcc and send in reports.

>> * Provided they fix the problem, we need to think about better
>> strategies.  (Something like if wl is not the empty string and
>> TK_LIB_SPEC does not start with it then add it as prefix.)  But let us
>> not worry about this now.

> Do you really want to go this way?  Is AIX the only OS where you can
> run into this kind of trouble?  If so, why not add a compilation of a
> little test program in configure in case you have os==AIX, that would
> use the same flags that you'll use in library/src/tcltk.c?  If that
> fails, it's flagged early on and directly points to the tcl/tk
> installation (and not to R).

I think I want to go this way.  Reason: the current situation is a
mixture of an R bug and a Tk inconsistency.  The R bug is that I had not
realized that the LIB_SPECs are meant as flags to ld.  The Tk problem is
that this is not true.

The whole thing is a bit tricky, and it might be interesting to see how
e.g. GNOME projects deal with this in their -config scripts.  As this is
hidden inside libtool could you maybe try compiling libxml2 on your AIX
system and see what xml2-config --libs does?

Also, what does
	./libtool --config | grep ^wl
give for configuration with native cc?

In general, the portable way would be to have package config scripts use
$wl or alike.  But that will not do in general: someone could have gcc
but a native C++ compiler and $wl might be different between these ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Thu Aug  2 16:16:16 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Thu, 2 Aug 2001 17:16:16 +0200 (MET DST)
Subject: [Rd] arrows()/log scale/clipping (?) (PR#1039)
Message-ID: <200108021516.RAA27588@pubhealth.ku.dk>


   arrows() seems to hang when either x or y scale of the plot
is logarithmic and the arrows requested go beyond the plot
(by more than a certain amount).  I didn't go into C code to
find it, but here's a function that exercises the bug a bit ...

arrow.bug2 <- function(y0=1,y1=10,log="y") {
  plot(c(0.1,1),c(1,10),log=log)
  arrows(x0=0.5,
         y0=y0,
         x1=0.5,
         y1=y1,
         length=0.05,angle=90)
}

arrow.bug2() ## OK
arrow.bug2(log="x") ## OK
arrow.bug2(y0=0.01)  ##hangs
arrow.bug2(y1=11)  ## OK
arrow.bug2(y1=20)  ## hangs
arrow.bug2(log="x",y1=20) ## hangs


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status =
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

Permanent address: Zoology Department, University of Florida
bolker@zoo.ufl.edu (352) 392-5697


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  2 18:52:20 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 02 Aug 2001 19:52:20 +0200
Subject: [Rd] arrows()/log scale/clipping (?) (PR#1039)
In-Reply-To: bolker@zoo.ufl.edu's message of "Thu, 2 Aug 2001 17:16:16 +0200 (MET DST)"
References: <200108021516.RAA27588@pubhealth.ku.dk>
Message-ID: <x21ymumjsb.fsf@blueberry.kubism.ku.dk>

bolker@zoo.ufl.edu writes:

>    arrows() seems to hang when either x or y scale of the plot
> is logarithmic and the arrows requested go beyond the plot
> (by more than a certain amount).  I didn't go into C code to
> find it, but here's a function that exercises the bug a bit ...
> 
> arrow.bug2 <- function(y0=1,y1=10,log="y") {
>   plot(c(0.1,1),c(1,10),log=log)
>   arrows(x0=0.5,
>          y0=y0,
>          x1=0.5,
>          y1=y1,
>          length=0.05,angle=90)
> }
> 
> arrow.bug2() ## OK
> arrow.bug2(log="x") ## OK
> arrow.bug2(y0=0.01)  ##hangs
> arrow.bug2(y1=11)  ## OK
> arrow.bug2(y1=20)  ## hangs
> arrow.bug2(log="x",y1=20) ## hangs

This is gone in the development version. Didn't we have a very similar
report quite recently??

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From vogels@cmu.edu  Fri Aug  3 04:16:28 2001
From: vogels@cmu.edu (Thomas J Vogels)
Date: Thu, 2 Aug 2001 23:16:28 -0400
Subject: [Rd] Compiling R (1.3.0) on AIX (4.3) fails (PR#1034)
In-Reply-To: <15208.61687.130864.413709@mithrandir.hornik.net>
Message-ID: <NFBBKIAHMMCHOBIBLMMPOECACAAA.tov@ece.cmu.edu>

Kurt,

here is the update:  With your change in TCLTK_LIBS
TCLTK_LIBS="${TCLTK_LIBS} ${wl}${TK_LIB_SPEC} ${TK_LIBS}"
I can compile with both cc and gcc:

-- using no CC in config.site I'll get gcc and compilation proceeds nicely.

-- using CC=cc in config.site forces compilation with cc and compilation
proceeds with warnings for all modules. E.g. for X11 I get the following:

       cc -Wl,-bM:SRE -Wl,-H512 -Wl,-T512 -Wl,-bnoentry       -Wl,-bexpall
-Wl,-bI:../../../etc/R.exp  -o R_X11.so  dataentry.lo devX11.lo rotated.lo
rbitmap.lo -lSM -lICE -lX11  -L/home/tov/opt/z/lib -L/home/tov/opt/z/lib  -l
dl -lm -lc
cc: 1501-218 file dataentry.lo contains an incorrect file suffix
cc: 1501-218 file devX11.lo contains an incorrect file suffix
cc: 1501-218 file rotated.lo contains an incorrect file suffix
cc: 1501-218 file rbitmap.lo contains an incorrect file suffix

-- Note that I can't just use LIBS and CPPFLAGS to set up the paths to Tcl
and Tk (as in LIBS=-L/home/tov/opt/lib and CPPFLAGS=-I/home/tov/opt/include)
since configure will try compile with -ltcl, i.e. without version number and
so doesn't find libtcl8.4.so.  Use of --with-tcltk=/home/tov/opt/lib works.
(Applies to both, cc and gcc)

-- With CC=cc I get warnings about /usr/include/stdarg.h and
/usr/include/varargs.h stepping on each other's toes with macro
re-definitions.

Excerpt form Kurt Hornik's email from Thursday, August 02, 2001 1:20 AM:

>> Do you really want to go this way?  Is AIX the only OS where you can
>> run into this kind of trouble?  If so, why not add a compilation of a
>> little test program in configure in case you have os==AIX, that would
>> use the same flags that you'll use in library/src/tcltk.c?  If that
>> fails, it's flagged early on and directly points to the tcl/tk
>> installation (and not to R).
>
> I think I want to go this way.  Reason: the current situation is a
> mixture of an R bug and a Tk inconsistency.  The R bug is that I had not
> realized that the LIB_SPECs are meant as flags to ld.  The Tk problem is
> that this is not true.
>
> The whole thing is a bit tricky, and it might be interesting to see how
> e.g. GNOME projects deal with this in their -config scripts.  As this is
> hidden inside libtool could you maybe try compiling libxml2 on your AIX
> system and see what xml2-config --libs does?

What and where is xml2?


> Also, what does
> 	./libtool --config | grep ^wl
> give for configuration with native cc?

With cc: wl=""
With gcc: wl="-Wl,"

>
> In general, the portable way would be to have package config scripts use
> $wl or alike.  But that will not do in general: someone could have gcc
> but a native C++ compiler and $wl might be different between these ...

Interestingly I saw today in Tk's configure:

case $SHLIB_LD in
   *ld*)
      TK_LD_SEARCH_FLAGS=`echo ${TK_CC_SEARCH_FLAGS} |sed -e "s|-Wl,||g" -e
"s|,| |g"`
      ;;
    *)
      TK_LD_SEARCH_FLAGS="${TK_CC_SEARCH_FLAGS}"
      ;;
esac

So they thought about throwing out the -Wl when calling the linker with
flags meant for the compiler.  I think you could turn that around and
add -Wl for linker flags that you pass to the compiler.  (My point being
that the echo&sed combination is saver than just prefixing a variable with
${wl}.)

Thanks,
  -tom

--
Email: vogels@cmu.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From possolo@crd.ge.com  Fri Aug  3 16:04:59 2001
From: possolo@crd.ge.com (possolo@crd.ge.com)
Date: Fri, 3 Aug 2001 17:04:59 +0200 (MET DST)
Subject: [Rd] String Length Limit (PR#1040)
Message-ID: <200108031504.RAA05722@pubhealth.ku.dk>

Full_Name: Antonio Possolo
Version: 1.3.0
OS: Linux
Submission from: (NULL) (192.35.44.3)


If one attempts to read a character string from a file using scan,
and the string comprises more than 8190 characters, then the string
is truncated to this length, and no warning is issued.

I've observed this both in the Linux and Win implementations of R 1.3.0.
S-PLUS (v. 6.0 rel. 1 for Sun SPARC0 does not suffer from this behavior. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug  3 16:50:18 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 3 Aug 2001 17:50:18 +0200 (MET DST)
Subject: [Rd] String Length Limit (PR#1040)
Message-ID: <200108031550.RAA05929@pubhealth.ku.dk>

On Fri, 3 Aug 2001 possolo@crd.ge.com wrote:

> Full_Name: Antonio Possolo
> Version: 1.3.0
> OS: Linux
> Submission from: (NULL) (192.35.44.3)
>
>
> If one attempts to read a character string from a file using scan,
> and the string comprises more than 8190 characters, then the string
> is truncated to this length, and no warning is issued.
>
> I've observed this both in the Linux and Win implementations of R 1.3.0.
> S-PLUS (v. 6.0 rel. 1 for Sun SPARC0 does not suffer from this behavior.

Yes, that's an R limitation.  Why is it a problem?  I think you would
do better using readLines if it is a line-oriented file.  AFAIK that is
unlimited.

It would be easy to issue a warning, quite a bit harder to remove the limit
(which dates from the days when character strings were in most places
limited to 8191 chars).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Aug  4 15:06:12 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 Aug 2001 16:06:12 +0200
Subject: [Rd] Next release of R, August 31st
Message-ID: <x2ae1f3oob.fsf@blueberry.kubism.ku.dk>


I'm trying to make a habit of announcing upcoming releases on r-devel,
to give package maintainers a chance of staying in sync, and to
encourage everyone to report bugs in the prerelease versions.

So: R-1.3.1 is scheduled for release on August 31st. In order to be
able to get a solid round of testing on different platforms,
maintainers of the group of recommended packages are requested to
respect a feature freeze starting on August 24th. This means that only
critical bugfixes should go into these packages. The list of
recommended packages are (hope I didn't forget any...)

  KernSmooth
  VR
  boot
  cluster
  foreign
  nlme
  rpart
  survival
  mgcv

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From greg@warnes.net  Sat Aug  4 17:04:41 2001
From: greg@warnes.net (Gregory R. Warnes)
Date: Sat, 4 Aug 2001 12:04:41 -0400
Subject: [Rd] Summary: too many arguments in foreign function call
Message-ID: <01080412044100.16791@haplo>


> John M. Chambers <jmc@bell-labs.com> wrote:
>
[snip]
> 
> Empirical evidence is that the limit in S-Plus is 128. (The call 
> manyArgs(N) constructs a .C with N arguments to a C routine (with 200 
> arguments)). 

OK.  I've modifed my patch to bring R's limits to 128, the same as in S-Plus, 
as well as noting that this is the limit in Foreign.Rd.   I suppose that this 
limit is as good as any, and at least means that code written and tested with 
S-Plus won't have to be changed to work with R and vice versa (at least for 
this reason). 

The patch has been uploaded to 
ftp://cran.r-project.org/incoming/dotcall_128.gz

(I hope this will make it into R-1.3.1)

-Greg
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From martin.lenze@to.com  Sun Aug  5 19:03:32 2001
From: martin.lenze@to.com (martin.lenze@to.com)
Date: Sun, 5 Aug 2001 20:03:32 +0200 (MET DST)
Subject: [Rd] xtabs, drop.unused.levels (PR#1041)
Message-ID: <200108051803.UAA11343@pubhealth.ku.dk>

Full_Name: Martin Lenze
Version: 1.3.0 22.06.2001
OS: win32,x86
Submission from: (NULL) (194.221.251.1)


As a newbie I'm not sure, whether this is a bug, but I don't know how to get
around this behaviour:
> x <- list("A"=rep(c(1:5),30),
+ "B"=c(rep(letters[1:3],30),rep(letters[2:4],20)))
> y <- as.data.frame(x)
> xtabs(~A+B,y)
   B
A   a  b  c d
  1 6 10 10 4
  2 6 10 10 4
  3 6 10 10 4
  4 6 10 10 4
  5 6 10 10 4
> y <- subset(y,B!="d")
> xtabs(~A+B,y,drop.unused.levels=TRUE)
   B
A   a  b  c d
  1 6 10 10 0
  2 6 10 10 0
  3 6 10 10 0
  4 6 10 10 0
  5 6 10 10 0

I'd expect "xtabs" to drop "d".

Kindest regards
M. Lenze


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sun Aug  5 19:43:52 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 05 Aug 2001 20:43:52 +0200
Subject: [Rd] xtabs, drop.unused.levels (PR#1041)
In-Reply-To: martin.lenze@to.com's message of "Sun, 5 Aug 2001 20:03:32 +0200 (MET DST)"
References: <200108051803.UAA11343@pubhealth.ku.dk>
Message-ID: <x2puaal53r.fsf@blueberry.kubism.ku.dk>

martin.lenze@to.com writes:

> > y <- subset(y,B!="d")
> > xtabs(~A+B,y,drop.unused.levels=TRUE)
>    B
> A   a  b  c d
>   1 6 10 10 0
>   2 6 10 10 0
>   3 6 10 10 0
>   4 6 10 10 0
>   5 6 10 10 0
> 
> I'd expect "xtabs" to drop "d".

Yes, that's a bug. The culprit is

  do.call("table", mf)

using "mf" rather than "by" which was carefully computed to handle
drop.unused.levels a couple of lines above.

Actually, I think that table(by) would work just as well (and look better).

(A quick workaround could be y$B <- factor(y$B))
 
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Aug  5 19:34:45 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 5 Aug 2001 19:34:45 +0100 (BST)
Subject: [Rd] xtabs, drop.unused.levels (PR#1041)
In-Reply-To: <200108051803.UAA11343@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0108051930230.12342-100000@auk.stats>

On Sun, 5 Aug 2001 martin.lenze@to.com wrote:

> Full_Name: Martin Lenze
> Version: 1.3.0 22.06.2001
> OS: win32,x86
> Submission from: (NULL) (194.221.251.1)
>
>
> As a newbie I'm not sure, whether this is a bug, but I don't know how to get
> around this behaviour:
> > x <- list("A"=rep(c(1:5),30),
> + "B"=c(rep(letters[1:3],30),rep(letters[2:4],20)))
> > y <- as.data.frame(x)
> > xtabs(~A+B,y)
>    B
> A   a  b  c d
>   1 6 10 10 4
>   2 6 10 10 4
>   3 6 10 10 4
>   4 6 10 10 4
>   5 6 10 10 4
> > y <- subset(y,B!="d")
> > xtabs(~A+B,y,drop.unused.levels=TRUE)
>    B
> A   a  b  c d
>   1 6 10 10 0
>   2 6 10 10 0
>   3 6 10 10 0
>   4 6 10 10 0
>   5 6 10 10 0
>
> I'd expect "xtabs" to drop "d".

The line

    x <- if (is.null(y))
        do.call("table", mf)

should be

    x <- if (is.null(y))
        do.call("table", by)

Currently drop.unused.levels=TRUE is ignored unless there is a response.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Mon Aug  6 01:29:00 2001
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Mon, 6 Aug 2001 12:29:00 +1200
Subject: [Rd] arrows()/log scale/clipping (?) (PR#1039)
References: <200108021516.RAA27588@pubhealth.ku.dk> <x21ymumjsb.fsf@blueberry.kubism.ku.dk>
Message-ID: <013201c11e0e$c9fbc3a0$175dd882@stat.auckland.ac.nz>

Hi


> >    arrows() seems to hang when either x or y scale of the plot
> > is logarithmic and the arrows requested go beyond the plot
> > (by more than a certain amount).  I didn't go into C code to
> > find it, but here's a function that exercises the bug a bit ...
> >
> > arrow.bug2 <- function(y0=1,y1=10,log="y") {
> >   plot(c(0.1,1),c(1,10),log=log)
> >   arrows(x0=0.5,
> >          y0=y0,
> >          x1=0.5,
> >          y1=y1,
> >          length=0.05,angle=90)
> > }
> >
> > arrow.bug2() ## OK
> > arrow.bug2(log="x") ## OK
> > arrow.bug2(y0=0.01)  ##hangs
> > arrow.bug2(y1=11)  ## OK
> > arrow.bug2(y1=20)  ## hangs
> > arrow.bug2(log="x",y1=20) ## hangs
>
> This is gone in the development version. Didn't we have a very similar
> report quite recently??


Yes.  There was a bug in the line-clipping code (which I presume is what
this code is tickling), which has been fixed for 1.3.1

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From martin.lenze@to.com  Mon Aug  6 10:04:33 2001
From: martin.lenze@to.com (Martin Lenze)
Date: Mon, 6 Aug 2001 11:04:33 +0200 (W. Europe Daylight Time)
Subject: [Rd] xtabs, drop.unused.levels (PR#1041)
In-Reply-To: <Pine.GSO.4.31.0108051930230.12342-100000@auk.stats>
Message-ID: <Pine.WNT.4.33.0108061059070.740-100000@lt-ml>


Many, many thanks for your answers, especially within this astonishing
timeframe.

Your solutions worked well. I changed the lines pointed out in
<R-HOME>/library/R/base and now it works as expedted.

Hopefully I'll be able to track down such mistakes myself sometimes.

with kindest regards
Martin Lenze

-------------------------------------------------------
martin.lenze@to.com, http://www.to.com/
Thinking Objects Software GmbH
Lilienthalstr. 2, 70825 Stuttgart-Korntal, Germany
office +49 711 88770-400, fax +49 711 88770-449
mobile +49 170 7917721, home +49 6221 618036


On Sun, 5 Aug 2001, Prof Brian D Ripley wrote:

PBDR>Date: Sun, 5 Aug 2001 19:34:45 +0100 (BST)
PBDR>From: Prof Brian D Ripley <ripley@stats.ox.ac.uk>
PBDR>To: martin.lenze@to.com
PBDR>Cc: r-devel@stat.math.ethz.ch, R-bugs@biostat.ku.dk
PBDR>Subject: Re: [Rd] xtabs, drop.unused.levels (PR#1041)
PBDR>
PBDR>On Sun, 5 Aug 2001 martin.lenze@to.com wrote:
PBDR>
PBDR>> Full_Name: Martin Lenze
PBDR>> Version: 1.3.0 22.06.2001
PBDR>> OS: win32,x86
PBDR>> Submission from: (NULL) (194.221.251.1)
PBDR>>
PBDR>>
PBDR>> As a newbie I'm not sure, whether this is a bug, but I don't know how to get
PBDR>> around this behaviour:
PBDR>> > x <- list("A"=rep(c(1:5),30),
PBDR>> + "B"=c(rep(letters[1:3],30),rep(letters[2:4],20)))
PBDR>> > y <- as.data.frame(x)
PBDR>> > xtabs(~A+B,y)
PBDR>>    B
PBDR>> A   a  b  c d
PBDR>>   1 6 10 10 4
PBDR>>   2 6 10 10 4
PBDR>>   3 6 10 10 4
PBDR>>   4 6 10 10 4
PBDR>>   5 6 10 10 4
PBDR>> > y <- subset(y,B!="d")
PBDR>> > xtabs(~A+B,y,drop.unused.levels=TRUE)
PBDR>>    B
PBDR>> A   a  b  c d
PBDR>>   1 6 10 10 0
PBDR>>   2 6 10 10 0
PBDR>>   3 6 10 10 0
PBDR>>   4 6 10 10 0
PBDR>>   5 6 10 10 0
PBDR>>
PBDR>> I'd expect "xtabs" to drop "d".
PBDR>
PBDR>The line
PBDR>
PBDR>    x <- if (is.null(y))
PBDR>        do.call("table", mf)
PBDR>
PBDR>should be
PBDR>
PBDR>    x <- if (is.null(y))
PBDR>        do.call("table", by)
PBDR>
PBDR>Currently drop.unused.levels=TRUE is ignored unless there is a response.
PBDR>
PBDR>--
PBDR>Brian D. Ripley,                  ripley@stats.ox.ac.uk
PBDR>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
PBDR>University of Oxford,             Tel:  +44 1865 272861 (self)
PBDR>1 South Parks Road,                     +44 1865 272860 (secr)
PBDR>Oxford OX1 3TG, UK                Fax:  +44 1865 272595
PBDR>
PBDR>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug  6 17:08:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 6 Aug 2001 17:08:17 +0100 (BST)
Subject: [Rd] String Length Limit (PR#1040)
In-Reply-To: <200108031504.RAA05722@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0108061703440.8289-100000@gannet.stats>

On Fri, 3 Aug 2001 possolo@crd.ge.com wrote:

> Full_Name: Antonio Possolo
> Version: 1.3.0
> OS: Linux
> Submission from: (NULL) (192.35.44.3)
>
>
> If one attempts to read a character string from a file using scan,
> and the string comprises more than 8190 characters, then the string
> is truncated to this length, and no warning is issued.
>
> I've observed this both in the Linux and Win implementations of R 1.3.0.
> S-PLUS (v. 6.0 rel. 1 for Sun SPARC) does not suffer from this behavior.

Although readLines is normally to be preferred (in R and S-PLUS 6: it's a
lot faster for a start), we've fixed this so that scan() in

R 1.3.1 will give a warning
R 1.4.0 will allow unlimited lines (unlimited by R, that is).

As ever, previews are in r-patched and r-devel (tar bundles/rysnc)
respectively.

The 1.4.0 version needed quite a lot of re-writing of code, too much for a
patch release.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayan@stat.wisc.edu  Mon Aug  6 21:06:30 2001
From: deepayan@stat.wisc.edu (Deepayan Sarkar)
Date: Mon, 6 Aug 2001 15:06:30 -0500 (CDT)
Subject: [Rd] panel.loess
Message-ID: <Pine.LNX.4.21.0108061454500.25605-100000@gstat203.stat.wisc.edu>


Hi, 

I'm not sure what the recommended thing to do here would be:

In the lattice library, panel.loess needs to use loess.smooth(), which is
in the modreg library. Now should I 

(1) make lattice depend on modreg, and call require(modreg) in zzz.R

OR

(2) use autoload("loess", "modreg")

I like the second option better, as a particular session might not need
panel.loess. Are there any general guidelines, or any other possibilities?

Also, should I include modreg on the `depends' line in DESCRIPTION ? 

- Deepayan



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Tue Aug  7 06:15:05 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue, 7 Aug 2001 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200108070515.HAA08059@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400

Directory:  Language

* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)

Directory:  Macintosh

* PR# 1023 *
Subject: data function
From: wild@stat.auckland.ac.nz
Date: Fri, 13 Jul 2001 02:48:53 +0200 (MET DST)
--Mac-specific
* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Madrake 8.0, not 7.2
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1041 *
Subject: xtabs, drop.unused.levels
From: martin.lenze@to.com
Date: Sun, 5 Aug 2001 20:03:30 +0200 (MET DST)
* PR# 1040 *
Subject: String Length Limit
From: possolo@crd.ge.com
Date: Fri, 3 Aug 2001 17:04:58 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Aug  7 06:45:31 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 7 Aug 2001 07:45:31 +0200
Subject: [Rd] panel.loess
In-Reply-To: <Pine.LNX.4.21.0108061454500.25605-100000@gstat203.stat.wisc.edu>
References: <Pine.LNX.4.21.0108061454500.25605-100000@gstat203.stat.wisc.edu>
Message-ID: <15215.32891.785583.349785@mithrandir.hornik.net>

>>>>> Deepayan Sarkar writes:

> Hi, 

> I'm not sure what the recommended thing to do here would be:

> In the lattice library, panel.loess needs to use loess.smooth(), which is
> in the modreg library. Now should I 

> (1) make lattice depend on modreg, and call require(modreg) in zzz.R

> OR

> (2) use autoload("loess", "modreg")

> I like the second option better, as a particular session might not
> need panel.loess. Are there any general guidelines, or any other
> possibilities?

No strong preference.

> Also, should I include modreg on the `depends' line in DESCRIPTION ?

In either case, yes.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug  7 13:10:55 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2001 14:10:55 +0200
Subject: [Rd] bugs.r-project.org down for a while
Message-ID: <x2elqot6i8.fsf@blueberry.kubism.ku.dk>


The bug repository will be down briefly (I hope), due to a hardware
upgrade.   

	-p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Tue Aug  7 14:17:52 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Tue, 07 Aug 2001 09:17:52 -0400
Subject: [Rd] Next release of R, August 31st
References: <x2ae1f3oob.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B6FEA80.EE667BEF@umsanet.edu.bo>

Hola!

A problem I have had for some versions now: When using R html help,
different browsers are started on different machines. On one machine, it
starts the opera browser, where html search not functions. On my home
machine (with a new version of win98), it insists on starting M$
internet
explorer, even though netscape is defined as default (when cliking on
the relevant help files in "explorador de windows", netscape opens). On
still
another machine, we have two different versions of netscape installed
(4.7 and 6.?, ?), and R insist on using the old version. Would
there be a good idea to define browser as an option(), so the exact
location of the .exe can be defined?

Thanks, Kjetil.

Peter Dalgaard BSA wrote:
> 
> I'm trying to make a habit of announcing upcoming releases on r-devel,
> to give package maintainers a chance of staying in sync, and to
> encourage everyone to report bugs in the prerelease versions.
> 
> So: R-1.3.1 is scheduled for release on August 31st. In order to be
> able to get a solid round of testing on different platforms,
> maintainers of the group of recommended packages are requested to
> respect a feature freeze starting on August 24th. This means that only
> critical bugfixes should go into these packages. The list of
> recommended packages are (hope I didn't forget any...)
> 
>   KernSmooth
>   VR
>   boot
>   cluster
>   foreign
>   nlme
>   rpart
>   survival
>   mgcv
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  7 14:27:43 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 7 Aug 2001 14:27:43 +0100 (BST)
Subject: [Rd] Next release of R, August 31st
In-Reply-To: <3B6FEA80.EE667BEF@umsanet.edu.bo>
Message-ID: <Pine.LNX.4.31.0108071423490.11379-100000@gannet.stats>

On Tue, 7 Aug 2001, kjetil halvorsen wrote:

> Hola!
>
> A problem I have had for some versions now: When using R html help,
> different browsers are started on different machines. On one machine, it
> starts the opera browser, where html search not functions.

(Should do if Java support is installed: did when I tested.)

On my home
> machine (with a new version of win98), it insists on starting M$
> internet
> explorer, even though netscape is defined as default (when cliking on
> the relevant help files in "explorador de windows", netscape opens). On
> still
> another machine, we have two different versions of netscape installed
> (4.7 and 6.?, ?), and R insist on using the old version. Would
> there be a good idea to define browser as an option(), so the exact
> location of the .exe can be defined?

No. It's done by the OS facilities, and launches whichever browser is set
via the file associations (that is if you double-click on a .html file).
There is no way to do this via .exe's (which is why Unix R is tied to
Netscape 4.x).

This works here correctly for IE or Netscape on lots of different
machines.  You need to get your file associations sorted out.  Sorry, but
it is a Windows issue: we just use the official calls.

>
> Thanks, Kjetil.
>
> Peter Dalgaard BSA wrote:
> >
> > I'm trying to make a habit of announcing upcoming releases on r-devel,
> > to give package maintainers a chance of staying in sync, and to
> > encourage everyone to report bugs in the prerelease versions.
> >
> > So: R-1.3.1 is scheduled for release on August 31st. In order to be
> > able to get a solid round of testing on different platforms,
> > maintainers of the group of recommended packages are requested to
> > respect a feature freeze starting on August 24th. This means that only
> > critical bugfixes should go into these packages. The list of
> > recommended packages are (hope I didn't forget any...)
> >
> >   KernSmooth
> >   VR
> >   boot
> >   cluster
> >   foreign
> >   nlme
> >   rpart
> >   survival
> >   mgcv
> >
> > --
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Tue Aug  7 18:05:27 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Tue, 07 Aug 2001 13:05:27 -0400
Subject: [Rd] Next release of R, August 31st
References: <Pine.LNX.4.31.0108071423490.11379-100000@gannet.stats>
Message-ID: <3B701FD7.3693B5CC@umsanet.edu.bo>



Prof Brian Ripley wrote:
> 
> On Tue, 7 Aug 2001, kjetil halvorsen wrote:
> 
> > Hola!
> >
> > A problem I have had for some versions now: When using R html help,
> > different browsers are started on different machines. On one machine, it
> > starts the opera browser, where html search not functions.
> 
> (Should do if Java support is installed: did when I tested.)

	Ill try again
> 
> On my home
> > machine (with a new version of win98), it insists on starting M$
> > internet
> > explorer, even though netscape is defined as default (when cliking on
> > the relevant help files in "explorador de windows", netscape opens).

On that macvhine, the file associations is set to netscape, and all
other ways to open a browser opens netscape, but R insists on
opening M$ internet explorer.

Kjetil.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  7 18:14:26 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 7 Aug 2001 18:14:26 +0100 (BST)
Subject: [Rd] Next release of R, August 31st
In-Reply-To: <3B701FD7.3693B5CC@umsanet.edu.bo>
Message-ID: <Pine.GSO.4.31.0108071809150.13622-100000@toucan.stats>

On Tue, 7 Aug 2001, kjetil halvorsen wrote:

>
>
> Prof Brian Ripley wrote:
> >
> > On Tue, 7 Aug 2001, kjetil halvorsen wrote:
> >
> > > Hola!
> > >
> > > A problem I have had for some versions now: When using R html help,
> > > different browsers are started on different machines. On one machine, it
> > > starts the opera browser, where html search not functions.
> >
> > (Should do if Java support is installed: did when I tested.)
>
> 	Ill try again
> >
> > On my home
> > > machine (with a new version of win98), it insists on starting M$
> > > internet
> > > explorer, even though netscape is defined as default (when cliking on
> > > the relevant help files in "explorador de windows", netscape opens).
>
> On that macvhine, the file associations is set to netscape, and all
> other ways to open a browser opens netscape, but R insists on
> opening M$ internet explorer.

R knows absolutely nothing about this `M$ internet explorer'. It calls
the Windows API call ShellExecute(). Looks like your machine has a corrupt
Registry.

As I said before, R calls the official Windows API call and what happens
then is not our responsibility.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug  7 18:37:12 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2001 19:37:12 +0200
Subject: [Rd] bugs.r-project.org down for a while
In-Reply-To: <x2elqot6i8.fsf@blueberry.kubism.ku.dk>
References: <x2elqot6i8.fsf@blueberry.kubism.ku.dk>
Message-ID: <x2zo9b4vqv.fsf@blueberry.kubism.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

> The bug repository will be down briefly (I hope), due to a hardware
> upgrade.   

Apparently functional again, and I have no obvious reason to reboot
the system for a while. Let me know if something went wrong.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From htang@hpl.hp.com  Tue Aug  7 20:14:51 2001
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Tue, 7 Aug 2001 21:14:51 +0200 (MET DST)
Subject: [Rd] cannot assign to NULL dimnames (PR#1042)
Message-ID: <200108071914.VAA01546@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.3.0
OS: GNU/Linux (Debian unstable)
Submission from: (NULL) (192.6.19.124)


Hi all,

    I am not sure this is a bug rather than an intentional design, but here
goes:
If I do

> a <- matrix(1:4, nrow=2)
> dimnames(a)[[1]] <- c("a", "b")

I get the following error message because dimnames(a) is NULL:

Error: more elements supplied than there are to replace

What is the proper way to do this?  I know this works:

> dimnames(a) <- list(c("a", "b"), NULL)

   Incidentally, in SPlus, I can assign to NULL dimnames.

Thanks,
Hsiu-Khuern.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug  7 20:33:10 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 7 Aug 2001 21:33:10 +0200 (MET DST)
Subject: [Rd] cannot assign to NULL dimnames (PR#1042)
Message-ID: <200108071933.VAA01601@pubhealth.ku.dk>

On Tue, 7 Aug 2001 htang@hpl.hp.com wrote:

> Full_Name: Hsiu-Khuern Tang
> Version: 1.3.0
> OS: GNU/Linux (Debian unstable)
> Submission from: (NULL) (192.6.19.124)
>
>
> Hi all,
>
>     I am not sure this is a bug rather than an intentional design, but here
> goes:

None of the above.

> If I do
>
> > a <- matrix(1:4, nrow=2)
> > dimnames(a)[[1]] <- c("a", "b")
>
> I get the following error message because dimnames(a) is NULL:
>
> Error: more elements supplied than there are to replace

Which is a correct error message.

> What is the proper way to do this?

rownames(a) <- c("a", "b")


> I know this works:
>
> > dimnames(a) <- list(c("a", "b"), NULL)
>
>    Incidentally, in SPlus, I can assign to NULL dimnames.


Really?  Your own example fails in the versions I have to hand:

S-PLUS 3.4 gives

> dimnames(a)[[1]] <- c("a", "b")
Error in dimnames(a) <- .A0: data of mode character can't be used as
dimnames
        (need a list)
In addition: Warning messages:
  Replacement length not a multiple of number of elements to replace in:
.A0[[1
        ]] <- .A1
Dumped

and S-PLUS 6.0 gives

> dimnames(a)[[1]] <- c("a", "b")
Problem in dimnames(a) <- .A0: Invalid length (1) for dimnames attribute;
needs to be 2

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From buhr@stat.wisc.edu  Tue Aug  7 21:38:04 2001
From: buhr@stat.wisc.edu (buhr@stat.wisc.edu)
Date: Tue, 7 Aug 2001 22:38:04 +0200 (MET DST)
Subject: [Rd] R 1.3.0 bug: after "y _ 10; x[[1]] _ y", assigning to "y[1]" modifies "x" (PR#1043)
Message-ID: <200108072038.WAA01720@pubhealth.ku.dk>

After a list element has been assigned from a vector variable,
assigments to elements of the original vector variable modify the copy
stored in the list as well.

Here's a transcript illustrating the problem:

        R : Copyright 2001, The R Development Core Team
        Version 1.3.0  (2001-06-22)

        [ . . . ]

        > x _ list()
        > y _ 10
        > x[[1]] _ y
        > x
        [[1]]
        [1] 10

        > y[1] _ 20   # should only modify "y"
        > x
        [[1]]
        [1] 20        # ACK!  we modified "x", too

        > 

Kevin <buhr@stat.wisc.edu>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pleu@hotmail.com  Tue Aug  7 21:42:08 2001
From: pleu@hotmail.com (pleu@hotmail.com)
Date: Tue, 7 Aug 2001 22:42:08 +0200 (MET DST)
Subject: [Rd] Polymarsall.c (PR#1044)
Message-ID: <200108072042.WAA01762@pubhealth.ku.dk>

Full_Name: Paul Leu
Version: 1.2.3
OS: Windows NT
Submission from: (NULL) (12.2.142.7)


There is a bug in the polymars code.  

Line 655   m=m+k-1;

ought to be moved in front of the for loop in line 652 or else the levels array
will go out of bounds in the loop.

This does not seem to cause any errors in R, but caused crashes when I attempted
to link the file to PV-wave.  

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug  7 21:54:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Aug 2001 22:54:53 +0200
Subject: [Rd] R 1.3.0 bug: after "y _ 10; x[[1]] _ y", assigning to "y[1]" modifies "x" (PR#1043)
In-Reply-To: <200108072038.WAA01720@pubhealth.ku.dk>
References: <200108072038.WAA01720@pubhealth.ku.dk>
Message-ID: <x28zgvr3oi.fsf@blueberry.kubism.ku.dk>

buhr@stat.wisc.edu writes:

> After a list element has been assigned from a vector variable,
> assigments to elements of the original vector variable modify the copy
> stored in the list as well.
> 
> Here's a transcript illustrating the problem:
> 
>         R : Copyright 2001, The R Development Core Team
>         Version 1.3.0  (2001-06-22)
> 
>         [ . . . ]
> 
>         > x _ list()
>         > y _ 10
>         > x[[1]] _ y
>         > x
>         [[1]]
>         [1] 10
> 
>         > y[1] _ 20   # should only modify "y"
>         > x
>         [[1]]
>         [1] 20        # ACK!  we modified "x", too
> 
>         > 
> 
> Kevin <buhr@stat.wisc.edu>

Confirmed with 1.3.0-patched on RedHat 7.1. For easier reproduction:

x <- list()
y <- 10
x[[1]] <- y
x
y[1] <- 20   # should only modify "y"
# y <- 20 # Works OK with this instead
x
 


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Wed Aug  8 01:08:00 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Tue, 7 Aug 2001 19:08:00 -0500
Subject: [Rd] R 1.3.0 bug: after "y _ 10; x[[1]] _ y", assigning to "y[1]" modifies "x" (PR#1043)
In-Reply-To: <x28zgvr3oi.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Tue, Aug 07, 2001 at 10:54:53PM +0200
References: <200108072038.WAA01720@pubhealth.ku.dk> <x28zgvr3oi.fsf@blueberry.kubism.ku.dk>
Message-ID: <20010807190800.A6993@nokomis.stat.umn.edu>

On Tue, Aug 07, 2001 at 10:54:53PM +0200, Peter Dalgaard BSA wrote:
> buhr@stat.wisc.edu writes:
> 
> Confirmed with 1.3.0-patched on RedHat 7.1. For easier reproduction:
> 
> x <- list()
> y <- 10
> x[[1]] <- y
> x
> y[1] <- 20   # should only modify "y"
> # y <- 20 # Works OK with this instead
> x
>  

Should be fixed.  The particular branch in
subassign.c:SubassignTypeFix did not duplicate the RHS when it is
NAMED--I added that on R-1-3-patches.

I've looked briefly at the subassign code before and had the nagging
feeling that there may be several places where this sort of change is
needed but I haven't had the stomach to look carefully.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Wed Aug  8 03:23:20 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Tue, 7 Aug 2001 21:23:20 -0500
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <87g0bjdbwl.fsf@jeeves.blindglobe.net>
References: <Pine.GSO.4.10.10107261024030.17007-100000@humilis>
 <x2wv4wf10t.fsf@blueberry.kubism.ku.dk>
 <87g0bjdbwl.fsf@jeeves.blindglobe.net>
Message-ID: <15216.41624.175567.86470@sonny.eddelbuettel.com>


[ Sorry for chiming in late, but was off email when this thread started ] 

  "Tony" == A J Rossini <rossini@blindglobe.net> writes:
  Peter> "Peter" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
  Peter> later. Whatever happened to the internal Debian discussions on
  Peter> creating a faster upgrade path for applications?

That is not the real problem. The real problem is (soon, hopefully: was) the
dependency on Atlas in Debian's r-base package, and the lack of Atlas libs
for architectures beyond i386, alpha and sparc. Because of the this, the last
pre-Atlas-as-default remained in the released distribution (aka "stable") as
release are required to contain the same package set across architectures.

However, the Atlas maintainer has a new scheme of defaulting to the blas
library.  Where atlas exists and is installed, it will automagically be used
instead. This way, no architectures should be held back (as blas exists on
almost all) but the main archs can still reap the benefit of fast blas
operations.

  Tony>  They created Woody/testing, which is a broken nightmare.

I could not disagree more. I am running testing on systems at home and work,
and am very, very pleased with it. I prefer this over unstable (where real
blowups occurred in the last few months). And I typically upgrade daily.

  Timothy> face after an apt-get.  Debian has a bad case of SADD (stable
  Timothy> attention deficit disorder).  None of the developers care much
  Timothy> about updating stable.  Its too much fun crashing unstable.  I

Blah. We have over 6000 packages, at least 13 architectures [1] and two
releases to support (as security backports are of course done).  And on top
of that you suggest we backport every package from unstable to stable?

As I said above, the situation with r-base is hopefully going to improve
soon. In the meantime, R packages are available from CRAN, including current
one compiled for "stable"

Dirk


[1] alpha, arm, hppa, hurd-i386, i386, ia64, m68k, mips, mipsel, powerpc,
s390, sh, sparc


-- 
Our mailserver had a hardware failure while we were gone during the 2nd half 
of July. I did not respond to a mail you sent then, or if you experienced a
a mail bounce, could you kindly resend it? Sorry for the inconvenience --Dirk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug  8 08:01:07 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 8 Aug 2001 08:01:07 +0100 (BST)
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <15216.41624.175567.86470@sonny.eddelbuettel.com>
Message-ID: <Pine.GSO.4.31.0108080754290.22113-100000@auk.stats>

On Tue, 7 Aug 2001, Dirk Eddelbuettel wrote:

>
> [ Sorry for chiming in late, but was off email when this thread started ]
>
>   "Tony" == A J Rossini <rossini@blindglobe.net> writes:
>   Peter> "Peter" == Peter Dalgaard <BSA <p.dalgaard@biostat.ku.dk>> writes:
>   Peter> later. Whatever happened to the internal Debian discussions on
>   Peter> creating a faster upgrade path for applications?
>
> That is not the real problem. The real problem is (soon, hopefully: was) the
> dependency on Atlas in Debian's r-base package, and the lack of Atlas libs
> for architectures beyond i386, alpha and sparc. Because of the this, the last
> pre-Atlas-as-default remained in the released distribution (aka "stable") as
> release are required to contain the same package set across architectures.

Just for information, can someone tell me how Debian (which has a `i386'
port) can possibly use ATLAS properly?  I find that there are major
performance differences between versions of ATLAS tuned on different
Pentium II chips (PII-450 vs mobile PII-366, for example) so that a large
part of the performance gain goes if they are switched.

Reason for question: I might put out an ATLAS-equipped Windows version of R
if I had any idea how to produce a `i386' version of ATLAS.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Wed Aug  8 12:50:21 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Wed, 8 Aug 2001 06:50:21 -0500
Subject: [Rd] Why not in Debian distro?
In-Reply-To: <Pine.GSO.4.31.0108080754290.22113-100000@auk.stats>
References: <15216.41624.175567.86470@sonny.eddelbuettel.com>
 <Pine.GSO.4.31.0108080754290.22113-100000@auk.stats>
Message-ID: <15217.10109.334750.86058@sonny.eddelbuettel.com>


  Brian>  Just for information, can someone tell me how Debian (which has a
  Brian> `i386' port) can possibly use ATLAS properly?  I find that there are
  Brian> major performance differences between versions of ATLAS tuned on
  Brian> different Pentium II chips (PII-450 vs mobile PII-366, for example)
  Brian> so that a large part of the performance gain goes if they are
  Brian> switched.

That is a problem, just as is cross-compilation. What is provided (for i386)
are three distinct packages for athlon, p3 and p4 sub-architectures.  The
README still advises users to optimise for their particular machines. 

Dirk

-- 
Our mailserver had a hardware failure while we were gone during the 2nd half 
of July. I did not respond to a mail you sent then, or if you experienced a
a mail bounce, could you kindly resend it? Sorry for the inconvenience --Dirk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Aug  8 18:08:00 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Wed, 8 Aug 2001 19:08:00 +0200 (MET DST)
Subject: [Rd] Palette changes on redraw (PR#1045)
Message-ID: <200108081708.TAA11359@pubhealth.ku.dk>

Try this

example(palette)

then trigger a redraw e.g. by resizing the window. Shouldn't the
palette be stored as part of the display list?

(This only happens because the palette was reset at the end of the
example, but still...)
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed Aug  8 21:37:46 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 09 Aug 2001 08:37:46 +1200
Subject: [Rd] Palette changes on redraw (PR#1045)
References: <200108081708.TAA11359@pubhealth.ku.dk>
Message-ID: <3B71A31A.8BB29F85@stat.auckland.ac.nz>

p.dalgaard@biostat.ku.dk wrote:
> 
> Try this
> 
> example(palette)
> 
> then trigger a redraw e.g. by resizing the window. Shouldn't the
> palette be stored as part of the display list?
> 
> (This only happens because the palette was reset at the end of the
> example, but still...)

I could argue either way on this.

I agree that its nasty to have plot colours change in mid-stream,
but I suspect that adding the palette to the display list may not
be the "right" solution.

A different approach would be to map the colour indices (and names)
to RGB values at a slightly higher level.  That way it would be the
RGB values which would be captured in the display list, not the
indices.

[ I'm afraid that I think that the whole display list mechanism is
  "wrong".  We need a much higher level way of describing plots. ]

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug  9 16:44:23 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 9 Aug 2001 16:44:23 +0100 (BST)
Subject: No subject
Message-ID: <Pine.LNX.4.31.0108091640220.8965-100000@gannet.stats>

Philippe Grosjean raised the question of transparency in the context of
writing Windows metafiles, but it has come up before for bitmapped
graphics.

I've taken a look in the sources, and what we do now is inconsistent.
The postscript/xfig/pdf devices do not paint the background iff it is
"white".  All the screen devices always paint the background, as do
the bitmap devices and all the Windows devices (including writing to
metafile and to the printer).

I think this is unsatisfactory, and inconsistent with the way
colour is handled for filled objects (rectangles and circles).
Not painting a white background is also undocumented!

For 1.3.1 I think we should document this, and alter win.metafile and
win.printer to make a white background mean transparent. (I've tested
that, and it works.)

However, for the future (1.4.x), I think we should handle "white" and
"transparent" differently, and have bg default to "transparent" for
all devices.  A quick look shows that this is would be easy, as only
24 bits of the rcolor type are used.  So would there be an objections
to using a bit (or a single value) of the upper byte to denote
"transparent"?  (Actually, Peter D has 0xffffffff in use as invalid,
but that's more bits than are needed.)  For consistency "transparent"
should be an alternative to NA in the fill routines, which means that
the obvious rcolor value is (unsigned) NA_INTEGER.

One question then is what bg="transparent" would mean for a screen
device. I think it should mean "white", but the difference would
emerge if the device was copied.  An alternative for the windows()
device (which can have a canvas larger than the device region) would
be the canvas colour (default grey50).  In that case one might want a
default of "white".

Clearly some thought would be needed to get the png devices to handle
transparency, but it should be doable.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmiddleton@fisheries.gov.fk  Thu Aug  9 21:32:00 2001
From: dmiddleton@fisheries.gov.fk (dmiddleton@fisheries.gov.fk)
Date: Thu, 9 Aug 2001 22:32:00 +0200 (MET DST)
Subject: [Rd] bug (and fix) in seq.POSIXt (PR#1046)
Message-ID: <200108092032.WAA20524@pubhealth.ku.dk>


I can't reach r-project.org at the moment so cannot check whether this
is a known bug.

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    3.0            
year     2001           
month    06             
day      22             
language R


The help page for seq.POSIXt states that the "by" argument can be
specified in several ways, including "A character string, containing one
of "sec", "min", "hour", "day", "week", "month" or "year". This can
optionally be preceded by an integer and a space".  I have found that
preceding the character string by an integer and space only works for
months and years.

The solution (or my solution at any rate) is to change 

        if (valid <= 5) 
            by <- c(1, 60, 3600, 86400, 7 * 86400)[valid]

to

        if (valid <= 5) {
            by <- c(1, 60, 3600, 86400, 7 * 86400)[valid]
	    if (length(by2) == 2) by <- by * as.integer(by2[1])
	}

in the seq.POSIXt code.

Thanks to those who worked to add the DateTimeClasses.  I have only
started making use of these recently, but am finding them very useful.

David Middleton

Dr David A. J. Middleton, Stock Assessment Scientist
Fisheries Department, Falkland Islands Government
Stanley, Falkland Islands
Tel: +500 27260  Fax +500 27265  Email: dmiddleton@fisheries.gov.fk
Web: http://www.falklandislands.com/business/fisheries.htm


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug  9 23:21:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Aug 2001 00:21:53 +0200
Subject: [Rd] bug (and fix) in seq.POSIXt (PR#1046)
In-Reply-To: <200108092032.WAA20524@pubhealth.ku.dk>
References: <200108092032.WAA20524@pubhealth.ku.dk>
Message-ID: <x2ofposwla.fsf@blueberry.kubism.ku.dk>

dmiddleton@fisheries.gov.fk writes:

> I can't reach r-project.org at the moment so cannot check whether this
> is a known bug.

You mean bugs.r-project.org (machines in the r-project.org domain are
spread over four different countries or more...).

It's up and running but it seems that communications are being blocked
somewhere along the way. Several nearby webservers are unreachable
too. Looks like a selective block on the HTTP port -- I wouldn't be
surprised if it turns out to be related to the Code Red worm...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 10 07:45:52 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 10 Aug 2001 08:45:52 +0200 (MET DST)
Subject: [Rd] [<-.data.frame bug (PR#1047)
Message-ID: <200108100645.IAA22935@pubhealth.ku.dk>

The following gives an error

test <- df <- data.frame(x=1:10, y=11:20)
test[] <- lapply(df, factor)
Error in "[<-.data.frame"(*tmp*, , value = lapply(df, factor)) : 
        Argument "i" is missing, with no default

It is correct S code, and works in S+3.4 and 6.0.


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From adrian@maths.uwa.edu.au  Fri Aug 10 09:24:05 2001
From: adrian@maths.uwa.edu.au (adrian@maths.uwa.edu.au)
Date: Fri, 10 Aug 2001 10:24:05 +0200 (MET DST)
Subject: [Rd] bug in dummy.coef.lm? (PR#1048)
Message-ID: <200108100824.KAA24354@pubhealth.ku.dk>

Hi - 
I'm running R 1.3.0 on i686-pc-linux-gnu

	> rm(x, y, z)
	> df <- data.frame(x=1:20,y=1:20,z=factor(1:20 <= 10))

dummy.coef falls over:

	> dummy.coef.lm(lm(y ~ z * poly(x,1), data=df))
	Error in poly(x, 1): Object "x" not found
	> dummy.coef.lm(lm(y ~ z * I(x), data=df))
	Error in unique(c("AsIs", class(x))): Object "x" not found

but works OK with:
	> dummy.coef.lm(lm(y ~ z * x, data=df))
	> dummy.coef.lm(lm(y ~ poly(x,1), data=df))
	> dummy.coef.lm(lm(y ~ I(x), data=df))
	
	> x <- df$x
	> y <- df$y
	> z <- df$z
	> dummy.coef.lm(lm(y ~ z * poly(x,1)))
	> dummy.coef.lm(lm(y ~ z * I(x)))

cheers
----
Adrian Baddeley, Mathematics & Statistics, University of Western Australia
		<http://maths.uwa.edu.au/~adrian/>



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 10 12:56:02 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 10 Aug 2001 12:56:02 +0100 (BST)
Subject: [Rd] bug in dummy.coef.lm? (PR#1048)
In-Reply-To: <200108100824.KAA24354@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0108101251250.31406-100000@gannet.stats>

On Fri, 10 Aug 2001 adrian@maths.uwa.edu.au wrote:

> Hi -
> I'm running R 1.3.0 on i686-pc-linux-gnu
>
> 	> rm(x, y, z)
> 	> df <- data.frame(x=1:20,y=1:20,z=factor(1:20 <= 10))
>
> dummy.coef falls over:
>
> 	> dummy.coef.lm(lm(y ~ z * poly(x,1), data=df))
> 	Error in poly(x, 1): Object "x" not found
> 	> dummy.coef.lm(lm(y ~ z * I(x), data=df))
> 	Error in unique(c("AsIs", class(x))): Object "x" not found
>
> but works OK with:
> 	> dummy.coef.lm(lm(y ~ z * x, data=df))
> 	> dummy.coef.lm(lm(y ~ poly(x,1), data=df))
> 	> dummy.coef.lm(lm(y ~ I(x), data=df))
>
> 	> x <- df$x
> 	> y <- df$y
> 	> z <- df$z
> 	> dummy.coef.lm(lm(y ~ z * poly(x,1)))
> 	> dummy.coef.lm(lm(y ~ z * I(x)))

Not for me it doesn't ...

This is a known design problem: it's been like it for three years.
I think I know how to solve it ....

Note: ?dummy.coef says

     There will be
     little point in using `dummy.coef' for `contr.treatment'
     contrasts, as the missing coefficients are by definition zero.

and what are the default contrasts in R?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Aug 10 17:49:33 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 10 Aug 2001 09:49:33 -0700 (PDT)
Subject: [Rd] re: transparency
In-Reply-To: <Pine.LNX.4.31.0108091640220.8965-100000@gannet.stats>
Message-ID: <Pine.A41.4.33.0108100943360.8708-100000@homer01.u.washington.edu>

On Thu, 9 Aug 2001, Prof Brian Ripley wrote:

> However, for the future (1.4.x), I think we should handle "white" and
> "transparent" differently, and have bg default to "transparent" for
> all devices.  A quick look shows that this is would be easy, as only
> 24 bits of the rcolor type are used.  So would there be an objections
> to using a bit (or a single value) of the upper byte to denote
> "transparent"?  (Actually, Peter D has 0xffffffff in use as invalid,
> but that's more bits than are needed.)  For consistency "transparent"
> should be an alternative to NA in the fill routines, which means that
> the obvious rcolor value is (unsigned) NA_INTEGER.

Definitely transparency would be very useful, and I think a bit in the
upper byte is a good place to store it.

> One question then is what bg="transparent" would mean for a screen
> device. I think it should mean "white", but the difference would
> emerge if the device was copied.  An alternative for the windows()
> device (which can have a canvas larger than the device region) would
> be the canvas colour (default grey50).  In that case one might want a
> default of "white".

If "transparent" is to be the default then I think it should show up as
white on screen (at least by default)

It would be nice if a canvas color were available for other screen
devices, to allow easier previewing of transparent graphics against
different background colors.  It's obviously not that important, since you
can always plot the graph against a filled background of that color, but
it would be convenient if it isn't too hard. That is, the default color
would be set by some sort of options(canvas.color) that would default to
eg "grey50" or "white".

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 10 18:13:17 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Aug 2001 19:13:17 +0200
Subject: [Rd] re: transparency
In-Reply-To: <Pine.A41.4.33.0108100943360.8708-100000@homer01.u.washington.edu>
References: <Pine.A41.4.33.0108100943360.8708-100000@homer01.u.washington.edu>
Message-ID: <x2lmkrx2he.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On Thu, 9 Aug 2001, Prof Brian Ripley wrote:
> 
> > However, for the future (1.4.x), I think we should handle "white" and
> > "transparent" differently, and have bg default to "transparent" for
> > all devices.  A quick look shows that this is would be easy, as only
> > 24 bits of the rcolor type are used.  So would there be an objections
> > to using a bit (or a single value) of the upper byte to denote
> > "transparent"?  (Actually, Peter D has 0xffffffff in use as invalid,
> > but that's more bits than are needed.)  For consistency "transparent"
> > should be an alternative to NA in the fill routines, which means that
> > the obvious rcolor value is (unsigned) NA_INTEGER.
> 
> Definitely transparency would be very useful, and I think a bit in the
> upper byte is a good place to store it.

And if must be (and I remember this correctly), the "magic" 0xffffffff
is only in there to prevent color settings to carry from on page to
the next and breaking the Document Structuring conventions. If so, it
can be replaced with internal driver flags indicating whether there
was a (say) setbg call earlier on the page or not.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 10 18:30:48 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 Aug 2001 19:30:48 +0200
Subject: [Rd] Bug repository
Message-ID: <x2hevfx1o7.fsf@blueberry.kubism.ku.dk>


As I suspected, the University blocks incoming HTTP traffic (port 80)
on our net segment, which is why bugs.r-project.org has been
unreachable. 

I've asked to have the line reopened for that machine. It hasn't
happened yet, but it shouldn't take too long.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Fri Aug 10 22:40:42 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Sat, 11 Aug 2001 09:40:42 +1200
Subject: [Rd] re: transparency
References: <Pine.A41.4.33.0108100943360.8708-100000@homer01.u.washington.edu>
Message-ID: <3B7454DA.688106FC@stat.auckland.ac.nz>

Rather than a yes/no tranparency indicator, should we consider using
entire "unused byte" as an alpha-channel? (meaning that we specify
transparency as a value in [0,255]).  Many graphics/paint programs (e.g.
gimp) do this sort of thing.  Transparency would need to be device
dependent, but a simple yes/no transparency could be obtained by
thresholding the alpha value.  This would entail a change to way indices
into colour palettes are handled, but Peter D has pointed out that this
is currently broken anyway.

The rendering extension to the X server includes support for
transparency and this might be a place to look for how screen devices
should behave.

	Ross
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Fri Aug 10 23:37:08 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Fri, 10 Aug 2001 18:37:08 -0400 (EDT)
Subject: [Rd] re: transparency
In-Reply-To: <3B7454DA.688106FC@stat.auckland.ac.nz>
Message-ID: <Pine.GSO.4.10.10108101834440.14782-100000@hsph.harvard.edu>

IMHO that would be a Good Idea. It would also make people less inclined to
use color references to mean things other than color.

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

On Sat, 11 Aug 2001, Ross Ihaka wrote:

> Rather than a yes/no tranparency indicator, should we consider using
> entire "unused byte" as an alpha-channel? (meaning that we specify
> transparency as a value in [0,255]).  Many graphics/paint programs (e.g.
> gimp) do this sort of thing.  Transparency would need to be device
> dependent, but a simple yes/no transparency could be obtained by
> thresholding the alpha value.  This would entail a change to way indices
> into colour palettes are handled, but Peter D has pointed out that this
> is currently broken anyway.
> 
> The rendering extension to the X server includes support for
> transparency and this might be a place to look for how screen devices
> should behave.
> 
> 	Ross
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 10 23:37:52 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 10 Aug 2001 23:37:52 +0100 (BST)
Subject: [Rd] re: transparency
In-Reply-To: <3B7454DA.688106FC@stat.auckland.ac.nz>
Message-ID: <Pine.GSO.4.31.0108102324540.23420-100000@auk.stats>

On Sat, 11 Aug 2001, Ross Ihaka wrote:

> Rather than a yes/no tranparency indicator, should we consider using
> entire "unused byte" as an alpha-channel? (meaning that we specify
> transparency as a value in [0,255]).  Many graphics/paint programs (e.g.
> gimp) do this sort of thing.  Transparency would need to be device
> dependent, but a simple yes/no transparency could be obtained by
> thresholding the alpha value.  This would entail a change to way indices
> into colour palettes are handled, but Peter D has pointed out that this
> is currently broken anyway.
>
> The rendering extension to the X server includes support for
> transparency and this might be a place to look for how screen devices
> should behave.

I had thought of that, but it's a lot more complicated (and software does
not even agree which of 0 or 255 is transparent).  I think for now I am
going to look into using 0 and 255 (for solid and transparent) and leave
open the possibility of implementing the intermediate values. For example,
it may be my ignorance, but I don't know of support for alpha channels in
postscript or PDF (at least, PDF 1.3) or Windows Metafiles. PNG does have
alpha channel support, but simple transparency is more widely implemented.

An hour hacking has convinced me we can get something rather useful out of
this.


One design question, probably to Ross.  The postscript() device has a `bg'
argument, but all the others seem to use par("bg"), and that works on
postscript() too.  Is there any reason for this, or anything subtle I have
missed?   Thomas' suggestion to add a canvas colour arg to the
screen devices is a good one that looks easy to add.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Sat Aug 11 02:40:33 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Fri, 10 Aug 2001 21:40:33 -0400 (EDT)
Subject: [Rd] re: transparency
In-Reply-To: <Pine.GSO.4.31.0108102324540.23420-100000@auk.stats>
Message-ID: <Pine.GSO.4.10.10108102130310.5464-100000@hsph.harvard.edu>



On Fri, 10 Aug 2001, Prof Brian D Ripley wrote:

> On Sat, 11 Aug 2001, Ross Ihaka wrote:
> 
> 
> I had thought of that, but it's a lot more complicated (and software does
> not even agree which of 0 or 255 is transparent).  I think for now I am
> going to look into using 0 and 255 (for solid and transparent) and leave
> open the possibility of implementing the intermediate values. For example,
> it may be my ignorance, but I don't know of support for alpha channels in
> postscript or PDF (at least, PDF 1.3) or Windows Metafiles. PNG does have
> alpha channel support, but simple transparency is more widely implemented.

Transparency is supported in Postscript Level 3 (I don't have my red book
handy, but its there) and will be supported in PDF 1.4, both of those are
full alpha channel transparency models.  WMF doesn't support transparency
in the sense that we're discussing here (it supports a variant of the
region transparency---an all or nothing ordeal). 

As far as interactive displays are concerned-- there probably won't be
true transparency as in the OS X sense where a window can have some
intrinsic alpha value, but most modern canvas packages (the GTK package
obviously and there is support in the Windows GDI API...sort of... I
haven't had a chance to look at GDI+, part of WinXP, but judging from its 
gratitous use in WinXP betas... :-) ) do support some notion of an alpha
channel, though as you point out they might decide 0xFF is opaque rather
than 0x00... This isn't that big of a problem, R would just pick one and
the device implementation should be responsible for subtracting properly
(or doing whatever needs be done to system palettes).

> 
> Brian
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.holena@reverecapital.com  Sun Aug 12 18:39:10 2001
From: john.holena@reverecapital.com (john.holena@reverecapital.com)
Date: Sun, 12 Aug 2001 19:39:10 +0200 (MET DST)
Subject: [Rd] predict.mlm: Error: Object "X" not found (PR#1049)
Message-ID: <200108121739.TAA06257@pubhealth.ku.dk>

predict.mlm fails with the error: Object "X" not found.

CAUSE:
looking at the predict.mlm function, we have:

x <- model.matrix(object, newdata)

two lines later, we have:

pred <- X[, piv, drop=FALSE] %*%  object$coefficients[piv,]


SOLUTION(?):
change the case of one of the x's, since it seems like what is meant in 
the second line is lowercase x...







platform: i686-pc-linux-gnu
arch: i686
os: linux-gnu
system: i686, linux-gnu
status
major 1
minor 3.0
year 2001
month 06
day 22
language R





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From htang@hpl.hp.com  Mon Aug 13 03:57:47 2001
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Mon, 13 Aug 2001 04:57:47 +0200 (MET DST)
Subject: [Rd] error in ksmooth C code + patch (PR#1050)
Message-ID: <200108130257.EAA07438@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.3.0
OS: GNU/Linux (Debian unstable)
Submission from: (NULL) (192.6.19.190)


Hi!

    If

x <- 1:4
y <- 1:4
z <- ksmooth(x, y, x.points=x)

I get for z

$x
[1] 1 2 3 4

$y
[1] 1.0 1.5 2.0 3.0

    In this case, the default bandwidth (0.5) makes it so that the neighborhood
of any point of x.points contains only one point in x, so z$y should be equal to
y.  I think the error is in
ksmooth.c:

Replace
	  if(x[i] < x0 - cutoff) imin = i;

by
	  if(x[i] < x0 - cutoff) {imin = i; continue;}


Best,
Hsiu-Khuern.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 13 09:51:12 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 13 Aug 2001 10:51:12 +0200
Subject: [Rd] Rnews 2001/3
Message-ID: <15223.38144.509412.705201@mithrandir.hornik.net>

Dear package author,

We are now accepting submissions for the third issue of the R
Newsletter.  For more information see

      http://cran.r-project.org/doc/Rnews/

If you are the author of a package on CRAN and you would like to promote
it a little bit, or if you simply have an interesting application using
R, we hope you can find some time to write a short article on it.  We
suggest that it be approximately 2 pages or less.  The idea of the
newsletter is that it be interesting to R users without being too
technical.  For example an article describing a package could begin by
briefly outlining the statistical background and go on to demonstrate
the usage on some typical data set.  Of course graphics are more than
welcome!

Bill Venables is also encouraging submissions to the more specialist
Programmer's Niche column.  In this case the technical level could be a
little higher, of course, but not necessarily: ingeniousness is the key.

Instructions for authors can be found in ``Writing Articles for R News''
in the first issue of Rnews; more detailed instructions will shortly be
available on the web page.  Remember that submissions have to be in
LaTeX, and that graphics are preferred in PDF or EPS format.  (Bitmaps
like JPG are also OK but please keep in mind that those cannot be scaled
easily and hence might look ugly in the final version.)

The deadline for submissions is

	 September 14, 2001

Keep the contributions rolling in!

For the Editorial Board,
-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From info@eminidaytrading.com  Mon Aug 13 14:32:12 2001
From: info@eminidaytrading.com (info@eminidaytrading.com)
Date: Mon, 13 Aug 2001 15:32:12 +0200 (MET DST)
Subject: [Rd] erappin' - daily morning update 8-13-01 (PR#1051)
Message-ID: <200108131332.PAA13985@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_002D_01C123D8.F95B41A0
Content-Type: text/plain;
        charset="iso-8859-1"
Content-Transfer-Encoding: 7bit

erappin' - daily morning update


----------------------------------------------------------------------------
----

 BLEAK ECONOMIC PICTURE

      We got a mixed bag of reports by retailers at the end of last week. As
you know, retail sales are a key element to this economy's growth as
continued consumer spending is necessary to remain out of a recession.
Market analysts are hoping consumers will be spending part of their $40
billion tax refund in the coming months. Consumer spending is the only part
of this economy that is still stagnating without reflecting signs of this
slowing economy...for now. This week, we get several clues on the latest
economic condition, on top of the consumer spending reports that will give
the market a further indication how they are coping with the weakening job
market. Analysts are expecting today's Retail Sales report to come in -0.2%.

      Earlier last week, the Fed Beige Book, even though limited in its
number of anecdotes, showed a slowing factory sector, flat to falling bank
loan demand, and most importantly, retail sales below plan. Pretty much all
U.S. regions are presenting a picture of "slow growth or lateral movement in
economic activity" over the past few months. The economy keeps touching that
bottom without showing any improvements. On August 7, we had Chicago Fed
President Moskow citing that, "an underperforming economy may be rare, but
it is nothing new. What is different today are the mixed signals we see in
the marketplace. The combination of weaknesses and strengths and risks is
both unusual and challenging."


            Symbol Close High Low  Gain/Loss
            SPU01 1191.20 1197.50 1171.50  3.40
            ESU01 1191.25 1197.50 1172.00  3.50
            NDU01 1624.00 1652.50 1581.00  15.50
            NQU01 1624.00 1652.50 1582.50  15.50
            DOW 10416.25 10433.46 10197.32  117.69
            NASDAQ 1956.47 1967.03 1915.99  6.85
            SPX 1190.16 1193.33 1169.55  6.73
            SOX 593.05 595.63 572.29  7.16
            VIX 22.81 24.91 22.68  0.83


      TRADING

      We have seen this market trade in quite the range these past few
months (Nasdaq 2000-2300). Unless we are getting something different than
the clouded visibility companies are reporting, some economic data showing
signs of a bottom, we will not be trading outside that range. Going into the
weekend, we saw a technical rather than a fundamental-based rally. Traders
want more than just reports telling them there is no worry about inflation.
It is time for some reports saying there is no worry about this economy
slowing any further! For now, economic news is not showing signs of
stabilization so traders will remain anxious about the timing of the
economic turnaround hoping that the next data reports are giving them reason
to believe it is sooner rather than later.

      Curious to see how this week's earnings come in for Hewlett-Packard,
Applied Materials and Dell and of course how they see next quarter's
numbers. HWP is expecting a 91% drop in earnings per share, Applied
Materials a 97% drop while Dell sees a 27% step back in EPS.


      EUROPE'S SLOWING ECONOMY

      The European Central Bank (ECB) indicated in its August report that it
might need to cut interest rates again. So far, the ECB has been reluctant
to do so as they were experiencing troubles with rising inflation. Latest
economic reports are indicating a pause in inflationary pressures, which
introduces the possibility now of another 25 basis point rate cut as soon as
August 31st. Especially given Europe's largest economy, Germany, is
reporting weak industrial production, factory orders, and factory orders
besides its seventh consecutive rise in unemployment.

      It seems that central banks around the world are now in the race to
reverse direction on their slowing economies. Greenspan and company have cut
interest rates six times so far this year, with possibly another two coming
up later this quarter, the Bank of England has reduced them four times while
the Bank of Japan.... well they are still stuck with their zero interest
rate situation. Based on the economic data we have seen these past few
months, it does not look like Europe's economic bottom is in sight any time
soon either. Last week, the ECB released a statement saying, "there is an
increased uncertainty surrounding economic growth in the euro area in the
second half of 2001," and they might feel the effects of, "deteriorating
growth performances in several other regions of the world."

      On Friday, back on U.S. soil, the Chicago Board of Trade's Fed Fund
Futures are indicating a 100% chance of a 25 basis point rate cut to 3.50%
at the next FOMC meeting on August 21st and even a slight 18% probability of
a 50 bp cut at that time. Given a cut to 3.50% end of August, traders are
expecting with an 88% probability another 25 bp cut to 3.25% by year end.

      Have a great trading day -- and honor those stops !!


      If you would like to signup for a free trial of our interactive
trading room called the epit, where trading signals are posted in realtime
throughout the day, please fill out form at
http://www.eminidaytrading.com/eminisignup.html All questions regarding the
epit service, please email info@eminidaytrading.com . Erap service is not an
investment advisory service, nor a registered investment advisor or broker
and does not purport to tell or suggest which securities members should buy
or sell for themselves. Members should always check with their licensed
financial advisor and their tax advisor to determine the suitability of any
investment. You are currently subscribed to erap. To unsubscribe, please
send a blank email to erappers-unsubscribe-request@eminidaytrading.com

      Copyright 2001 by eminidaytrading Inc.
     Number 1
      08/13/2001

            Futures - The Basics
       Futures, the Basics - Are you a stock / option trader and have
considered trading futures but are constantly reminded how terribly risky
they are? If you are new to futures trading, then this session is a must as
emaster and emagine will cover the basics. What you need to know about
futures, how it differs from stocks & options trading and how to add them to
your trading arsenal.

            August 23rd and August 27th.


      Targets

      Both ES/NQ continue their downtrend. ES had a double bottom in the
1174-78 area which was briefly taken out, low 1172, before it bounced back.
However, until we make a clean break and close above 1235 level, we aren't
getting bullish. That area has been tested twice and failed. We have been
trading within this 1174-1233 range for over a month now. NQ has same story.
Even though it penetrated the upper trendline, it has resumed trend making a
new low of 1582.50. A break of this level could leave us testing 1550 and
1500 levels. We need a close above 1800 to get bullish.

            Intraday Epit Targets Hit
            ES  NQ
            1174.50  1604
            1188   1590
            1195.75   1619
            1631











------=_NextPart_000_002D_01C123D8.F95B41A0
Content-Type: text/html;
        charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD><TITLE>erappin' - daily morning update</TITLE><BASE=20
href=3Dhttp://www.eminidaytrading.com/erappin/erappin_081301a.html>
<META http-equiv=3Dcontent-type =
content=3Dtext/html;charset=3DISO-8859-1>
<META content=3D"MSHTML 5.50.4522.1800" name=3DGENERATOR></HEAD>
<BODY vLink=3D#ff00ff link=3D#ff00ff bgColor=3Dblack>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<HR>

<DIV align=3Dcenter><IMG height=3D120=20
src=3D"http://www.eminidaytrading.com/erappin/images/erappin_top.gif" =
width=3D580=20
useMap=3D#erappin_topb794dc2a border=3D0><MAP =
name=3Derappin_topb794dc2a><AREA=20
  shape=3DRECT coords=3D488,32,556,100><AREA shape=3DRECT =
coords=3D524,3,571,24=20
  href=3D"http://www.invest-store.com/eminidaytrading/"><AREA =
shape=3DRECT=20
  coords=3D461,3,509,23=20
  href=3D"http://www.eminidaytrading.com/eminisignup.html"><AREA =
shape=3DRECT=20
  coords=3D414,3,444,24 =
href=3D"http://www.eminidaytrading.com/epit/epit.html"><AREA=20
  shape=3DRECT coords=3D205,4,370,27 =
href=3D"http://www.eminidaytrading.com"><AREA=20
  shape=3DRECT coords=3D132,4,167,24 =
href=3D"mailto:info@eminidaytrading.com"><AREA=20
  shape=3DRECT coords=3D12,3,55,23=20
href=3D"http://www.eminidaytrading.com/main.html"></MAP>=20
<TABLE cellSpacing=3D0 cellPadding=3D14 width=3D560 bgColor=3D#ffffff =
border=3D0>
  <TBODY>
  <TR>
    <TD vAlign=3Dtop align=3Dleft width=3D370><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D4><B>BLEAK ECONOMIC PICTURE<BR><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D2>We =
got a mixed=20
      bag of reports by retailers at the end of last week. As you know, =
retail=20
      sales are a key element to this economy's growth as continued =
consumer=20
      spending is necessary to remain out of a recession. Market =
analysts are=20
      hoping consumers will be spending part of their $40 billion tax =
refund in=20
      the coming months. Consumer spending is the only part of this =
economy that=20
      is still stagnating without reflecting signs of this slowing =
economy...for=20
      now. This week, we get several clues on the latest economic =
condition, on=20
      top of the consumer spending reports that will give the market a =
further=20
      indication how they are coping with the weakening job market. =
Analysts are=20
      expecting today's Retail Sales report to come in =
-0.2%.<BR><BR>Earlier=20
      last week, the Fed Beige Book, even though limited in its number =
of=20
      anecdotes, showed a slowing factory sector, flat to falling bank =
loan=20
      demand, and most importantly, retail sales below plan. Pretty much =
all=20
      U.S. regions are presenting a picture of "slow growth or lateral =
movement=20
      in economic activity" over the past few months. The economy keeps =
touching=20
      that bottom without showing any improvements. On August 7, we had =
Chicago=20
      Fed President Moskow citing that, "an underperforming economy may =
be rare,=20
      but it is nothing new. What is different today are the mixed =
signals we=20
      see in the marketplace. The combination of weaknesses and =
strengths and=20
      risks is both unusual and challenging."<BR><BR></FONT>
      <P><FONT face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2>
      <TABLE cellSpacing=3D0 cellPadding=3D3 width=3D366 bgColor=3Dwhite =
border=3D0>
        <TBODY>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Symbol</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Close</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>High</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>Low</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle></TD>
          <TD vAlign=3Dtop align=3Dleft><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2>Gain/Loss</FONT></B></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SPU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1191.20</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1197.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1171.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>3.40</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>ESU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1191.25</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1197.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1172.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>3.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NDU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1624.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1652.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1581.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>15.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NQU01</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1624.00</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1652.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1582.50</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>15.50</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>DOW</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10416.25</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10433.46</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>10197.32</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>117.69</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>NASDAQ</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1956.47</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1967.03</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1915.99</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            size=3D2><B>6.85</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SPX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1190.16</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1193.33</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>1169.55</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>6.73</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>SOX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>593.05</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>595.63</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>572.29</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><IMG height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>7.16</B></FONT></TD></TR>
        <TR>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>VIX</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>22.81</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>24.91</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3Dblack=20
            size=3D2><B>22.68</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D13 border=3D0></FONT></TD>
          <TD vAlign=3Dtop align=3Dleft><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff0000=20
            =
size=3D2><B>0.83</B></FONT></TD></TR></TBODY></TABLE><BR><BR></FONT><FONT=
=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D4><B>TRADING<BR><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D2>We =
have seen this=20
      market trade in quite the range these past few months (Nasdaq =
2000-2300).=20
      Unless we are getting something different than the clouded =
visibility=20
      companies are reporting, some economic data showing signs of a =
bottom, we=20
      will not be trading outside that range. Going into the weekend, we =
saw a=20
      technical rather than a fundamental-based rally. Traders want more =
than=20
      just reports telling them there is no worry about inflation. It is =
time=20
      for some reports saying there is no worry about this economy =
slowing any=20
      further!&nbsp;For now, economic news is not showing signs of =
stabilization=20
      so traders will remain anxious about the timing of the economic =
turnaround=20
      hoping that the next data reports are giving them reason to =
believe it is=20
      sooner rather than later.<BR><BR>Curious to see how this week's =
earnings=20
      come in for Hewlett-Packard, Applied Materials and Dell and of =
course how=20
      they see next quarter's numbers. HWP is expecting a 91% drop in =
earnings=20
      per share, Applied Materials a 97% drop while Dell sees a 27% step =
back in=20
      EPS.<BR><BR><BR></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D4><B>EUROPE'S SLOWING ECONOMY<BR><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D2>The =
European=20
      Central Bank (ECB) indicated in its August report that it might =
need to=20
      cut interest rates again. So far, the ECB has been reluctant to do =
so as=20
      they were experiencing troubles with rising inflation. Latest =
economic=20
      reports are indicating a pause in inflationary pressures, which =
introduces=20
      the possibility now of another 25 basis point rate cut as soon as =
August=20
      31st. Especially given Europe's largest economy, Germany, is =
reporting=20
      weak industrial production, factory orders, and factory orders =
besides its=20
      seventh consecutive rise in unemployment.<BR><BR>It seems that =
central=20
      banks around the world are now in the race to reverse direction on =
their=20
      slowing economies. Greenspan and company have cut interest rates =
six times=20
      so far this year, with possibly another two coming up later this =
quarter,=20
      the Bank of England has reduced them four times while the Bank of=20
      Japan.... well they are still stuck with their zero interest rate=20
      situation. Based on the economic data we have seen these past few =
months,=20
      it does not look like Europe's economic bottom is in sight any =
time soon=20
      either. Last week, the ECB released a statement saying, "there is =
an=20
      increased uncertainty surrounding economic growth in the euro area =
in the=20
      second half of 2001," and they might feel the effects of, =
"deteriorating=20
      growth performances in several other regions of the =
world."<BR><BR>On=20
      Friday, back on U.S. soil, the Chicago Board of Trade's Fed Fund =
Futures=20
      are indicating a 100% chance of a 25 basis point rate cut to 3.50% =
at the=20
      next FOMC meeting on August 21st and even a slight 18% probability =
of a 50=20
      bp cut at that time. Given a cut to 3.50% end of August, traders =
are=20
      expecting with an 88% probability another 25 bp cut to 3.25% by =
year end.=20
      <BR><BR>Have a great trading day -- and honor those stops=20
      !!<BR><BR><BR></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular color=3Dblack =
size=3D1>If=20
      you would like to signup for a free trial of our interactive =
trading room=20
      called the epit, where trading signals are posted in realtime =
throughout=20
      the day, please fill out form at <A=20
      =
href=3D"http://www.eminidaytrading.com/eminisignup.htm">http://www.eminid=
aytrading.com/eminisignup.htm</A>l=20
      All questions regarding the epit service, please email <A=20
      =
href=3D"mailto:info@eminidaytrading.com">info@eminidaytrading.com</A> . =
Erap=20
      service is not an investment advisory service, nor a registered =
investment=20
      advisor or broker and does not purport to tell or suggest which =
securities=20
      members should buy or sell for themselves. Members should always =
check=20
      with their licensed financial advisor and their tax advisor to =
determine=20
      the suitability of any investment. You are currently subscribed to =
erap.=20
      To unsubscribe, please send a blank email to <A=20
      =
href=3D"mailto:erap@eminidaytrading.com">erappers-unsubscribe-request@emi=
nidaytrading.com<BR><BR></A><B>Copyright=20
      2001 by eminidaytrading Inc.</B></FONT> </P></TD>
    <TD vAlign=3Dtop align=3Dleft><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><B>Number=20
      1<BR>08/13/2001<BR><BR></B></FONT>
      <TABLE cellSpacing=3D0 cellPadding=3D5 width=3D125 border=3D0>
        <TBODY>
        <TR>
          <TD bgColor=3D#000000 colSpan=3D4><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
            size=3D2><B>Futures - The =
Basics</B></FONT></TD></TR></TBODY></TABLE><IMG=20
      height=3D35=20
      =
src=3D"http://www.eminidaytrading.com/erappin/images/erap_basics.gif"=20
      width=3D125 border=3D0>=20
      <TABLE cellSpacing=3D0 cellPadding=3D5 width=3D125 border=3D0>
        <TBODY>
        <TR>
          <TD bgColor=3D#000000 colSpan=3D4><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ffffff=20
            size=3D1>Futures, the Basics - Are you a stock / option =
trader and=20
            have considered trading futures but are constantly reminded =
how=20
            terribly risky they are? If you are new to futures trading, =
then=20
            this session is a must as emaster and emagine will cover the =
basics.=20
            What you need to know about futures, how it differs from =
stocks=20
            &amp; options trading and how to add them to your trading=20
            arsenal.<BR><BR></FONT><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ffffff=20
            size=3D2>August 23rd and August 27th</FONT></B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ffffff=20
            size=3D2><B>.</B></FONT></TD></TR></TBODY></TABLE><BR><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D1><BR></FONT><FONT =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
      color=3D#000000 size=3D2><B>Targets</B><B><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#33cc00=20
      size=3D1><B><BR></B></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>Both =
ES/NQ=20
      continue their downtrend. ES had a double bottom in the 1174-78 =
area which=20
      was briefly taken out, low 1172, before it bounced back. However, =
until we=20
      make a clean break and close above 1235 level, we aren't getting =
bullish.=20
      That area has been tested twice and failed. We have been trading =
within=20
      this 1174-1233 range for over a month now. NQ has same story. Even =
though=20
      it penetrated the upper trendline, it has resumed trend making a =
new low=20
      of 1582.50. A break of this level could leave us testing 1550 and =
1500=20
      levels. We need a close above 1800 to get bullish. <BR><BR>
      <TABLE cellSpacing=3D0 cellPadding=3D4 width=3D129 border=3D0>
        <TBODY>
        <TR>
          <TD bgColor=3D#000000 colSpan=3D4><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ffffff=20
            size=3D2><B>Intraday Epit Targets Hit</B></FONT></TD></TR>
        <TR>
          <TD width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>ES</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"></TD>
          <TD width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#ff00ff=20
            size=3D2><B>NQ</B></FONT></TD>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"></TD></TR>
        <TR>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>174.50</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><IMG height=3D13 =

            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></TD>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>604</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D1><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></FONT></TD></TR>
        <TR>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>188</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0> </FONT></TD>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>590</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D1><IMG=20
            height=3D13=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_down.gif"=20
            width=3D12 border=3D0></FONT></TD></TR>
        <TR>
          <TD width=3D"50%"><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>1</FONT></B></FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>195.75</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0> </FONT></TD></FONT>
          <TD width=3D"50%"><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>1619</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 border=3D0> </FONT></TD></TR></FONT>
        <TR>
          <TD width=3D"50%"></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"></TD>
          <TD width=3D"50%"><B><FONT size=3D2><FONT=20
            =
face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular>1</FONT></FONT></B></=
FONT><B><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
            size=3D2>631</FONT></B></TD><FONT=20
          face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular size=3D1>
          <TD vAlign=3Dtop align=3Dmiddle width=3D"50%"><FONT=20
            face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
size=3D2><IMG=20
            height=3D14=20
            =
src=3D"http://www.eminidaytrading.com/erappin/images/arrow_up.gif"=20
            width=3D12 =
border=3D0></FONT></TD></TR></TBODY></TABLE></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular =
color=3D#000000=20
      size=3D1><BR><BR></FONT><FONT=20
      face=3DArial,Helvetica,Geneva,Swiss,SunSans-Regular=20
      =
size=3D1><BR><BR></FONT></FONT></FONT></FONT></FONT></FONT></FONT></TD></=
TR></TBODY></TABLE><IMG=20
height=3D81 =
src=3D"http://www.eminidaytrading.com/erappin/images/erappin_bottom.gif" =

width=3D559 useMap=3D#erappin_bottomb794de78=20
border=3D0><BR><BR><BR><BR></DIV></BODY></HTML>

------=_NextPart_000_002D_01C123D8.F95B41A0--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Tue Aug 14 09:09:18 2001
From: J.C.Rougier@durham.ac.uk (J.C.Rougier@durham.ac.uk)
Date: Tue, 14 Aug 2001 10:09:18 +0200 (MET DST)
Subject: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
Message-ID: <200108140809.KAA19242@pubhealth.ku.dk>

Hi everyone,

I have noticed that is.vector returns FALSE if I attach
attributes:

> x <- c(a = 1, b = 2)
> attributes(x)
$names
[1] "a" "b"

> is.vector(x)
[1] TRUE
> attr(x, "fred") <- "happy"
> attributes(x)
$names
[1] "a" "b"

$fred
[1] "happy"

> is.vector(x)
[1] FALSE

This seems inconsistent to me, as "names" is itself an attribute
yet this does negate is.vector.  As the original x is clearly a
vector, albeit one with names, wouldn't it be consistent to allow
any attributes?  This appears to be the case for is.matrix ...

> x <- matrix(1:4, 2, 2)
> is.matrix(x)
[1] TRUE
> attributes(x)
$dim
[1] 2 2
> attr(x, "fred") <- "happy"
> x
     [,1] [,2]
[1,]    1    3
[2,]    2    4
attr(,"fred")
[1] "happy"
> is.matrix(x)
[1] TRUE

Cheers, Jonathan.

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Patched
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 27
 language = R

Search Path:
 .GlobalEnv, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 14 09:43:26 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 14 Aug 2001 10:43:26 +0200 (MET DST)
Subject: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
Message-ID: <200108140843.KAA19934@pubhealth.ku.dk>

This seems intentional.  as.vector(x) changes x, and is.vector should be a
test of no change.  It is in S:

>From S-PLUS 3.4:

       is.vector returns TRUE if x is a simple object of the mode
       specified, and FALSE otherwise.  If the mode is "any", any
       simple object will match,  that  is,  an  object  with  no
       attributes.   Note  that  a  list is typically a vector in
       this sense.

Note the `simple' in there.

R appears to allow names as attributes but nothing else, but does not
document this (except in the source code).  Anyone want to explain why R
is incompatible with S?  And why as.vector and is.vector are inconsistent?
(Note that the isas tests do not pick this up.)

This is a documentation bug, at least.


On Tue, 14 Aug 2001 J.C.Rougier@durham.ac.uk wrote:

> Hi everyone,
>
> I have noticed that is.vector returns FALSE if I attach
> attributes:
>
> > x <- c(a = 1, b = 2)
> > attributes(x)
> $names
> [1] "a" "b"
>
> > is.vector(x)
> [1] TRUE
> > attr(x, "fred") <- "happy"
> > attributes(x)
> $names
> [1] "a" "b"
>
> $fred
> [1] "happy"
>
> > is.vector(x)
> [1] FALSE
>
> This seems inconsistent to me, as "names" is itself an attribute
> yet this does negate is.vector.  As the original x is clearly a
> vector, albeit one with names, wouldn't it be consistent to allow
> any attributes?

Well, dim is an attribute, so you want an array to be a vector?

> This appears to be the case for is.matrix ...
>
> > x <- matrix(1:4, 2, 2)
> > is.matrix(x)
> [1] TRUE
> > attributes(x)
> $dim
> [1] 2 2
> > attr(x, "fred") <- "happy"
> > x
>      [,1] [,2]
> [1,]    1    3
> [2,]    2    4
> attr(,"fred")
> [1] "happy"
> > is.matrix(x)
> [1] TRUE
>
> Cheers, Jonathan.
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Patched
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 27
>  language = R
>
> Search Path:
>  .GlobalEnv, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 14 11:45:04 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Aug 2001 12:45:04 +0200
Subject: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
In-Reply-To: <200108140843.KAA19934@pubhealth.ku.dk>
References: <200108140843.KAA19934@pubhealth.ku.dk>
Message-ID: <x2d75y3opb.fsf@blueberry.kubism.ku.dk>


[R-bugs snipped from recipients]

ripley@stats.ox.ac.uk writes:

> R appears to allow names as attributes but nothing else, but does not
> document this (except in the source code).  Anyone want to explain why R
> is incompatible with S?  And why as.vector and is.vector are inconsistent?
> (Note that the isas tests do not pick this up.)

It was discussed during 1997 and 1998... Ross, Thomas, Kurt, and
Martin seem to have been involved at some point. I'm not up to a full
reconstruction of the discussion just now, though. One of the earliest
cases is in this note from Thomas on the R-alpha mailing list:

(excerpted)
----
On Mon, 7 Apr 1997, Ross Ihaka wrote:
>               What should is.vector do?
> 
<snip> 
> Essentially, everything in S is a vector unless it has attributes.
> This is utterly unreasonable!  Why should something stop being a
> vector because it has a names attribute attached.

There is method to this.  Something is a vector in S if as.vector() has 
no effect on it. This includes functions but excludes matrices, vectors 
with names, and data.frames.  You might then ask why as.vector() works 
the way it does and I would have no sensible explanation. A particularly 
bizarre example is
S> is.vector(lm)
T
S> is.vector(lm(y~x)$coef)
F
i.e., the lm() function is a vector but the coefficient vector isn't.
----
There was also some discussion in December 1998, between Kurt and
Martin, but I cannot see how it got resolved.

(I seem to remember that we had as.vector retaining names for a while,
but got burned by package porting(?). Very early versions of R had
is.vector returning true for anything that could be subscripted,
including matrices.) 

BTW: My list archives seem to go further back than the "official"
ones. Do we want to do anything about that? Unfortunately they are in
Gnus's mail directory format and have been respooled so they are
slightly out of numerical order.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Aug 14 18:36:26 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 14 Aug 2001 19:36:26 +0200
Subject: [Rd] Inconsistent behaviour of is.vector? (PR#1052)
In-Reply-To: <x2d75y3opb.fsf@blueberry.kubism.ku.dk>
References: <200108140843.KAA19934@pubhealth.ku.dk>
 <x2d75y3opb.fsf@blueberry.kubism.ku.dk>
Message-ID: <15225.24986.517771.993107@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> [R-bugs snipped from recipients]

> ripley@stats.ox.ac.uk writes:

>> R appears to allow names as attributes but nothing else, but does not
>> document this (except in the source code).  Anyone want to explain why R
>> is incompatible with S?  And why as.vector and is.vector are inconsistent?
>> (Note that the isas tests do not pick this up.)

> It was discussed during 1997 and 1998... Ross, Thomas, Kurt, and
> Martin seem to have been involved at some point. I'm not up to a full
> reconstruction of the discussion just now, though. One of the earliest
> cases is in this note from Thomas on the R-alpha mailing list:

I only vaguely recall this.  Note however that this is in the FAQ:

   * Named vectors are considered vectors in R but not in S (e.g.,
     `is.vector(c(a = 1:3))' returns `FALSE' in S and `TRUE' in R).

I assume that way back then I argued that it was silly that is.vector
gave FALSE for c(a = 1) and TRUE for c(1).  I think my understanding
would now be different: I would think that as.vector/is.vector should
match what the `generator' vector() does, and that cannot set names.
Otoh it cannot really set data either ...

Just in case someone brings this one up as well: we also have a diff in
is.matrix on a data frame.  Splus 6 still has

> is.matrix(data.frame(x = 1:3))
[1] T

and in fact is.matrix <- function(x) length(dim(x)) == 2, but I am
strongly against that: I still think that

	if as.foo(x) is different from x then is.foo(x) must be false.

And that also `proves' that is.vector is wrong, as

R> x <- c(a = 1)
R> x
a 
1 
R> as.vector(x)
[1] 1
R> is.vector(x)
[1] TRUE

-k

> (excerpted)
> ----
> On Mon, 7 Apr 1997, Ross Ihaka wrote:
>> What should is.vector do?
>> 
> <snip> 
>> Essentially, everything in S is a vector unless it has attributes.
>> This is utterly unreasonable!  Why should something stop being a
>> vector because it has a names attribute attached.

> There is method to this.  Something is a vector in S if as.vector() has 
> no effect on it. This includes functions but excludes matrices, vectors 
> with names, and data.frames.  You might then ask why as.vector() works 
> the way it does and I would have no sensible explanation. A particularly 
> bizarre example is
S> is.vector(lm)
> T
S> is.vector(lm(y~x)$coef)
> F
> i.e., the lm() function is a vector but the coefficient vector isn't.
> ----
> There was also some discussion in December 1998, between Kurt and
> Martin, but I cannot see how it got resolved.

> (I seem to remember that we had as.vector retaining names for a while,
> but got burned by package porting(?). Very early versions of R had
> is.vector returning true for anything that could be subscripted,
> including matrices.) 

> BTW: My list archives seem to go further back than the "official"
> ones. Do we want to do anything about that? Unfortunately they are in
> Gnus's mail directory format and have been respooled so they are
> slightly out of numerical order.

> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue Aug 14 21:29:48 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 14 Aug 2001 16:29:48 -0400
Subject: [Rd] R-devel.tar.gz
Message-ID: <3B798A3C.FF7DF041@bank-banque-canada.ca>

R-devel.tar.gz  seems to be missing from //fangorn.ci.tuwien.ac.at/R/src/devel.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 14 23:18:42 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 15 Aug 2001 00:18:42 +0200
Subject: [Rd] R-devel.tar.gz
In-Reply-To: <3B798A3C.FF7DF041@bank-banque-canada.ca>
References: <3B798A3C.FF7DF041@bank-banque-canada.ca>
Message-ID: <x2pu9y70al.fsf@blueberry.kubism.ku.dk>

Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

> R-devel.tar.gz  seems to be missing from //fangorn.ci.tuwien.ac.at/R/src/devel.

However there is

http://fangorn.ci.tuwien.ac.at/R/src/devel/R-devel_2001-08-14.tar.gz

The current maintenance scheme for that directory does look a little
curious: We have R-devel.tar.bz2 pointing to the latest bzip2
compressed version and no similar pointer to the gzipped one, but
we keep 10 older versions in tar.gz format... Martin?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Wed Aug 15 08:41:51 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Wed, 15 Aug 2001 09:41:51 +0200
Subject: [Rd] R-devel.tar.gz
In-Reply-To: <x2pu9y70al.fsf@blueberry.kubism.ku.dk>
References: <3B798A3C.FF7DF041@bank-banque-canada.ca>
 <x2pu9y70al.fsf@blueberry.kubism.ku.dk>
Message-ID: <15226.10175.362134.42393@gargle.gargle.HOWL>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:
    >> R-devel.tar.gz  seems to be missing from //fangorn.ci.tuwien.ac.at/R/src/devel.

    PD> However there is

    PD> http://fangorn.ci.tuwien.ac.at/R/src/devel/R-devel_2001-08-14.tar.gz

    PD> The current maintenance scheme for that directory does look a little
    PD> curious: We have R-devel.tar.bz2 pointing to the latest bzip2
    PD> compressed version and no similar pointer to the gzipped one, but
    PD> we keep 10 older versions in tar.gz format... Martin?

We (Fritz and I) have changed the setup of this scheme a bit, now using
"dated" file names upon Fritz' request.  
We've always kept the 10 latest versions and always only the .tar.gz ones.
I think the new scheme does the same also for the bz2 ones 
(which can be considered a waste of disk space and I could well change back).

The transition phase (from one to the other scheme) lasts 10 days and we
are still in midst of it.  I saw no real reason for doing the transition
manually at once when it happens all automatically over the 10 days period.

The real new thing about it is that we now also snapshot the "R-ng"
[aka `R (next|new) generation'].  
However, dear "R-devel"ers please note that "R-ng" currently has nothing
interesting in it AFAIK and in fact is not even tracking "R-patched" or
"R-devel" ...

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Aug 15 17:19:34 2001
From: pgilbert@bank-banque-canada.ca (pgilbert@bank-banque-canada.ca)
Date: Wed, 15 Aug 2001 18:19:34 +0200 (MET DST)
Subject: [Rd] documented but missing from the code (PR#1054)
Message-ID: <200108151619.SAA10100@pubhealth.ku.dk>

In R-devel (Aug 15) I am getting some warnings
"Objects documented but missing from the code:"

The ones I have checked are definitely in the code, so I suspect there is a bug in
this check. I'm very busy today and then away until after the projected release of
the new version so I cannot follow up on this as carefully as I would like to. I
expect the problem is reproducible with dse from CRAN, though I have been testing
with my own working copy.

Paul Gilbert



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 15 18:30:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 15 Aug 2001 19:30:08 +0200 (MET DST)
Subject: [Rd] documented but missing from the code (PR#1054)
Message-ID: <200108151730.TAA10351@pubhealth.ku.dk>

On Wed, 15 Aug 2001 pgilbert@bank-banque-canada.ca wrote:

> In R-devel (Aug 15) I am getting some warnings
> "Objects documented but missing from the code:"
>
> The ones I have checked are definitely in the code, so I suspect there is a bug in
> this check. I'm very busy today and then away until after the projected release of
> the new version so I cannot follow up on this as carefully as I would like to. I
> expect the problem is reproducible with dse from CRAN, though I have been testing
> with my own working copy.

Until very recently this was true for objects in zzz.R. One example in dse
is scale.default, which is not in the code and is in the documentation
(incorrectly). Generated objects are (correctly) marked as not in the code.


R-devel does not have a projected release date, and is not the next version
planned (1.3.1 on August 31).  I'd guess its release is several months off.


BTW, is it you who is responsible for the scale generic in R?
dse has

      scale <- function(x, ..., scale = TRUE) UseMethod("scale")

as R did, and that is incompatible with scale.default (and hence S's
scale) which does not have a ... argument.  Adding one forces the
scale argument to be named and breaks a lot of ported code.

Your own scale methods are also incompatible with your own generic.
Try running checkMethods().

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From durso@hussle.harvard.edu  Wed Aug 15 21:21:22 2001
From: durso@hussle.harvard.edu (Brian D'Urso)
Date: Wed, 15 Aug 2001 16:21:22 -0400 (EDT)
Subject: [Rd] Computer Modern Fonts in R
Message-ID: <Pine.LNX.4.33.0108151605070.15434-100000@hussle.harvard.edu>

About a month ago I sent a message to the list about some changes which
could allow R to fully utilize the (La)TeX Computer Modern fonts. I didn't
get any replies indicating the changes would be accepted in some form,
what could be improved in them, or that the changes were not wanted.

The patches and other files needed are available from:
http://hussle.harvard.edu/~durso/CM_R.tar.gz

Even if there is no interest in including full support for CM fonts, it
would be very helpful if the "family" option of the postscript driver
could be expanded to (optionally) take list of five afm files instead of
four. The fifth would be for the symbol afm file. This would then allow me
to write a script which could make the remaining changes to an otherwise
standard R eps file (after it was written with the standard postscript
driver) so it would properly use the CM fonts. I could then distribute
this as some sort of package so others who might want to use the CM fonts
could also do so.

Thank you,
Brian D'Urso

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed Aug 15 21:43:15 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 15 Aug 2001 16:43:15 -0400
Subject: [Rd] documented but missing from the code (PR#1054)
References: <200108151730.TAA10351@pubhealth.ku.dk>
Message-ID: <3B7ADEE3.146C63F9@bank-banque-canada.ca>

BDR>Until very recently this was true for objects in zzz.R. One example in dse
BDR>is scale.default, which is not in the code and is in the documentation
BDR>(incorrectly). Generated objects are (correctly) marked as not in the code.

I take this to mean that if I do

  if(!exists(zzz)) zzz <- whatever

then any documentation for zzz will generate the warning.
I do this, but I think there may be a bug in addition.

BDR>R-devel does not have a projected release date, and is not the next version
BDR>planned (1.3.1 on August 31).  I'd guess its release is several months off.

Ok, thanks.  I mis-interpreted something in a previous post.

BDR>BTW, is it you who is responsible for the scale generic in R?
BDR>dse has
BDR>      scale <- function(x, ..., scale = TRUE) UseMethod("scale")
BDR>as R did,

As R still does I believe. I don't recall being responsible for this, but I vaguely
recall being involved in a discussion and I believe I changed my generic to match
R's. My original scale generic pre-dates Splus 3.4 and scale was not generic in Splus
3.3 (nor in R in the previous millennium).

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug 15 21:00:38 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 15 Aug 2001 22:00:38 +0200
Subject: [Rd] documented but missing from the code (PR#1054)
In-Reply-To: <200108151730.TAA10351@pubhealth.ku.dk>
References: <200108151730.TAA10351@pubhealth.ku.dk>
Message-ID: <15226.54502.941259.677297@mithrandir.hornik.net>

>>>>> ripley  writes:

> On Wed, 15 Aug 2001 pgilbert@bank-banque-canada.ca wrote:
>> In R-devel (Aug 15) I am getting some warnings
>> "Objects documented but missing from the code:"
>> 
>> The ones I have checked are definitely in the code, so I suspect there is a bug in
>> this check. I'm very busy today and then away until after the projected release of
>> the new version so I cannot follow up on this as carefully as I would like to. I
>> expect the problem is reproducible with dse from CRAN, though I have been testing
>> with my own working copy.

> Until very recently this was true for objects in zzz.R. One example in
> dse is scale.default, which is not in the code and is in the
> documentation (incorrectly). Generated objects are (correctly) marked
> as not in the code.

> R-devel does not have a projected release date, and is not the next
> version planned (1.3.1 on August 31).  I'd guess its release is
> several months off.

> BTW, is it you who is responsible for the scale generic in R?  dse has

>       scale <- function(x, ..., scale = TRUE) UseMethod("scale")

> as R did, and that is incompatible with scale.default (and hence S's
> scale) which does not have a ... argument.  Adding one forces the
> scale argument to be named and breaks a lot of ported code.

> Your own scale methods are also incompatible with your own generic.
> Try running checkMethods().

I have only tried a random sample of the warnings: e.g., dse2 has one
about `combine'.  This comes from the usage in combine.forecast.cov.Rd
being

    combine(obj1, obj2)

whereas the file actually documents the topics

\alias{combine.forecast.cov}
\alias{combine.forecast.cov.estimators.wrt.data}
\alias{combine.forecast.cov.estimators.wrt.true} 

and there is no object `combine' in the package:

hornik@mithrandir:~/tmp/dse.Rcheck/dse2/R$ grep combine *
combine.forecast.cov.estimators.wrt.data <- function(e1,e2)
combine.forecast.cov.estimators.wrt.true <- function(e1,e2)
combine.forecast.cov <- function(e1,e2)

So I would think that \usage documents an object that is missing from
the code.

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From laurent@cbs.dtu.dk  Thu Aug 16 07:52:35 2001
From: laurent@cbs.dtu.dk (laurent@cbs.dtu.dk)
Date: Thu, 16 Aug 2001 08:52:35 +0200 (MET DST)
Subject: [Rd] crt1.o skipped at configure time ? (PR#1057)
Message-ID: <200108160652.IAA12811@pubhealth.ku.dk>

Full_Name: Laurent Gautier
Version: 1.3.0-patched
OS: IRIX 6.5
Submission from: (NULL) (130.225.67.199)





During the configuration step, things do not go perfect:

The file config.log has :

configure:3754: gcc -o conftest -g -O2 -I/usr/freeware/include
-I/usr/local/include  -static conftest.c -L/usr/local/lib 1>&5
ld32: FATAL   9  : I/O error (/usr/lib32/mips3/nonshared/crt1.o): No such file
or directory

here is a list of what's in mips3
laurent@ibiology> ls /usr/lib32/mips3/
crt1.o             libdmnet.so        libfpe.so          libmalloc_cv.so
crtn.o             libdmnet.so.1      libfpe_ss.so       libmalloc_ss.so
dmedia             libdplace.so       libftn.so          libmangle.a
dsmcrt.o           libdprof.so        libftn90.so        libmp.a
fixade.o           libelfutil.a       libinstr.so        libmp.so
libMMmalloc.a      libelfutil_xtnd.a  libio_ss.so        libmpc.a
libMMmalloc.so     libexc.so          libkapio.a         libmpi_ss.so
libblas.so         libfastm.a         libkmem.a          libmx.a
libblas_mp.so      libfastm.so        libksync.so        libmx.so
libc.so            libfetchop.so      libksync.so.1      libsgidl.a
libc.so.1          libffio.a          libm.a             libss.so
libdlook.so        libffio.so         libm.so            libssrt.so
libdmedia.so       libfortran.so      libm43.a           mcrt1.o
libdmedia.so.1     libfpe.a           libm43.so



...if it's a real problem (and not the installation here being _really_ exotic,
 it should be fixed in a wink)


Best regards,



Laurent

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 16 08:17:38 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 16 Aug 2001 08:17:38 +0100 (BST)
Subject: [Rd] crt1.o skipped at configure time ? (PR#1057)
In-Reply-To: <200108160652.IAA12811@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0108160816060.19719-100000@auk.stats>

Looks like a compiler installation problem.  Was that gcc built on that
version of Irix on that box?


On Thu, 16 Aug 2001 laurent@cbs.dtu.dk wrote:

> Full_Name: Laurent Gautier
> Version: 1.3.0-patched
> OS: IRIX 6.5
> Submission from: (NULL) (130.225.67.199)
>
>
>
>
>
> During the configuration step, things do not go perfect:
>
> The file config.log has :
>
> configure:3754: gcc -o conftest -g -O2 -I/usr/freeware/include
> -I/usr/local/include  -static conftest.c -L/usr/local/lib 1>&5
> ld32: FATAL   9  : I/O error (/usr/lib32/mips3/nonshared/crt1.o): No such file
> or directory
>
> here is a list of what's in mips3
> laurent@ibiology> ls /usr/lib32/mips3/
> crt1.o             libdmnet.so        libfpe.so          libmalloc_cv.so
> crtn.o             libdmnet.so.1      libfpe_ss.so       libmalloc_ss.so
> dmedia             libdplace.so       libftn.so          libmangle.a
> dsmcrt.o           libdprof.so        libftn90.so        libmp.a
> fixade.o           libelfutil.a       libinstr.so        libmp.so
> libMMmalloc.a      libelfutil_xtnd.a  libio_ss.so        libmpc.a
> libMMmalloc.so     libexc.so          libkapio.a         libmpi_ss.so
> libblas.so         libfastm.a         libkmem.a          libmx.a
> libblas_mp.so      libfastm.so        libksync.so        libmx.so
> libc.so            libfetchop.so      libksync.so.1      libsgidl.a
> libc.so.1          libffio.a          libm.a             libss.so
> libdlook.so        libffio.so         libm.so            libssrt.so
> libdmedia.so       libfortran.so      libm43.a           mcrt1.o
> libdmedia.so.1     libfpe.a           libm43.so
>
>
>
> ...if it's a real problem (and not the installation here being _really_ exotic,
>  it should be fixed in a wink)
>
>
> Best regards,
>
>
>
> Laurent
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Aug 16 08:27:29 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 16 Aug 2001 09:27:29 +0200
Subject: [Rd] scale() generic {was "documented but missing..."}
In-Reply-To: <3B7ADEE3.146C63F9@bank-banque-canada.ca>
References: <200108151730.TAA10351@pubhealth.ku.dk>
 <3B7ADEE3.146C63F9@bank-banque-canada.ca>
Message-ID: <15227.30177.440433.558758@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:


    BDR> BTW, is it you who is responsible for the scale generic in R?  dse
    BDR> has scale <- function(x, ..., scale = TRUE) UseMethod("scale")
    BDR> as R did,

    PaulG> As R still does I believe.

yes, 1.3.0 does

    PaulG> I don't recall being responsible for
    PaulG> this, but I vaguely recall being involved in a discussion and I
    PaulG> believe I changed my generic to match R's. My original scale
    PaulG> generic pre-dates Splus 3.4 and scale was not generic in Splus
    PaulG> 3.3 (nor in R in the previous millennium).

I was somehow involved in this discussion, maybe impementation as well.
It started with someone asking for scale() to become generic,
because he wanted to write methods for it and because the S-plus coders
had made it generic.
Very vaguely I also remember that the request was also to allow other
arguments than those of scale.default() which *does* make sense, just think
of specialized matrix classes, etc.
Unfortunately, `scale' is not a good word to grep for in the mailing list
archives...

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Thu Aug 16 08:54:26 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Thu, 16 Aug 2001 09:54:26 +0200
Subject: [Rd] documented but missing from the code (PR#1054)
In-Reply-To: <3B7ADEE3.146C63F9@bank-banque-canada.ca>
References: <200108151730.TAA10351@pubhealth.ku.dk>
 <3B7ADEE3.146C63F9@bank-banque-canada.ca>
Message-ID: <15227.31794.780031.428261@mithrandir.hornik.net>

>>>>> Paul Gilbert writes:

BDR> Until very recently this was true for objects in zzz.R. One example in dse
BDR> is scale.default, which is not in the code and is in the documentation
BDR> (incorrectly). Generated objects are (correctly) marked as not in the code.

> I take this to mean that if I do

>   if(!exists(zzz)) zzz <- whatever

> then any documentation for zzz will generate the warning.

Correct.  Codoc could be refined to catch this: is currently only looks
at the top-level assignments.  But in the above case, one can argue that
defensiveness should give a warning: the package writer could provide a
totally different zzz and document it, and consistency of code and docs
would be conditional on non-existence of zzz ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From JDiaz-Saiz@uh.edu  Thu Aug 16 18:31:09 2001
From: JDiaz-Saiz@uh.edu (JDiaz-Saiz@uh.edu)
Date: Thu, 16 Aug 2001 19:31:09 +0200 (MET DST)
Subject: [Rd] lm() (PR#1059)
Message-ID: <200108161731.TAA19810@pubhealth.ku.dk>

Full_Name: Joaquin Diaz-Saiz
Version: 1.3.0
OS: Windows
Submission from: (NULL) (129.7.120.106)


The lm() function applied to a particular data set produces a negative value for
the adjusted R-square. See the output below.


=======================================================
R : Copyright 2001, The R Development Core Team
Version 1.3.0  (2001-06-22)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> w<-read.table("accres.txt")
> w
   V1 V2
1   9  1
2   3  1
3   8  1
4   7  1
5  12  1
6   4  0
7  13  0
8  10  0
9   9  0
10  9  0
11  6  0
> x<-w$V1
> t<-w$V2
> x
 [1]  9  3  8  7 12  4 13 10  9  9  6
> t
 [1] 1 1 1 1 1 0 0 0 0 0 0
> out<-lm(x~t)
> summary(out)

Call:
lm(formula = x ~ t)

Residuals:
   Min     1Q Median     3Q    Max 
 -4.80  -1.65   0.50   1.35   4.50 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)    8.500      1.307   6.502 0.000111 ***
t             -0.700      1.939  -0.361 0.726443    
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1 

Residual standard error: 3.202 on 9 degrees of freedom
Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525 
F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264 

> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Thu Aug 16 18:42:08 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Thu, 16 Aug 2001 13:42:08 -0400
Subject: [Rd] lm() (PR#1059)
References: <200108161731.TAA19810@pubhealth.ku.dk>
Message-ID: <3B7C05EF.2066625A@umsanet.edu.bo>

Hola!

This is not an error. If the r-squared is small, the formula 
defining "adjusted r-square" can give negative values, correctly.

Kjetil Halvorsen.

JDiaz-Saiz@uh.edu wrote:
> 
> Full_Name: Joaquin Diaz-Saiz
> Version: 1.3.0
> OS: Windows
> Submission from: (NULL) (129.7.120.106)
> 
> The lm() function applied to a particular data set produces a negative value for
> the adjusted R-square. See the output below.
> 
> =======================================================
> R : Copyright 2001, The R Development Core Team
> Version 1.3.0  (2001-06-22)
> 
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
> 
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
> 
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
> 
> [Previously saved workspace restored]
> 
> > w<-read.table("accres.txt")
> > w
>    V1 V2
> 1   9  1
> 2   3  1
> 3   8  1
> 4   7  1
> 5  12  1
> 6   4  0
> 7  13  0
> 8  10  0
> 9   9  0
> 10  9  0
> 11  6  0
> > x<-w$V1
> > t<-w$V2
> > x
>  [1]  9  3  8  7 12  4 13 10  9  9  6
> > t
>  [1] 1 1 1 1 1 0 0 0 0 0 0
> > out<-lm(x~t)
> > summary(out)
> 
> Call:
> lm(formula = x ~ t)
> 
> Residuals:
>    Min     1Q Median     3Q    Max
>  -4.80  -1.65   0.50   1.35   4.50
> 
> Coefficients:
>             Estimate Std. Error t value Pr(>|t|)
> (Intercept)    8.500      1.307   6.502 0.000111 ***
> t             -0.700      1.939  -0.361 0.726443
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
> 
> Residual standard error: 3.202 on 9 degrees of freedom
> Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525
> F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264
> 
> >
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Aug 16 20:31:51 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 Aug 2001 21:31:51 +0200
Subject: [Rd] lm() (PR#1059)
In-Reply-To: <3B7C05EF.2066625A@umsanet.edu.bo>
References: <200108161731.TAA19810@pubhealth.ku.dk>
 <3B7C05EF.2066625A@umsanet.edu.bo>
Message-ID: <x27kw37qe0.fsf@blueberry.kubism.ku.dk>

kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:

> Hola!
> 
> This is not an error. If the r-squared is small, the formula 
> defining "adjusted r-square" can give negative values, correctly.

Yep. Essentially it is  100 * "% variance accounted for" and the
variance can be larger under the model than under the null. Whenever
the F for the model is less than 1, in fact.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Fri Aug 17 00:23:39 2001
From: Bill.Venables@CMIS.CSIRO.AU (Venables, Bill (CMIS, Cleveland))
Date: Fri, 17 Aug 2001 09:23:39 +1000
Subject: [Rd] lm() (PR#1059)
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A9048F1A@Roper-CV.qld.cmis.csiro.au>

Where's the bug?

The adjusted R-squared is an approximately unbiased estimator of the true
R^2.  Like most unbiased estimators of positive parameters it can sometimes
take on negative values.  Most people will understand this, too, so I don't
see much point in artificially replacing the result by zero if its value is
negative.

Bill Venables.

-----Original Message-----
From: JDiaz-Saiz@uh.edu [mailto:JDiaz-Saiz@uh.edu]
Sent: Friday, 17 August 2001 3:31 AM
To: r-devel@stat.math.ethz.ch
Cc: R-bugs@biostat.ku.dk
Subject: [Rd] lm() (PR#1059)


Full_Name: Joaquin Diaz-Saiz
Version: 1.3.0
OS: Windows
Submission from: (NULL) (129.7.120.106)


The lm() function applied to a particular data set produces a negative value
for
the adjusted R-square. See the output below.


=======================================================
R : Copyright 2001, The R Development Core Team
Version 1.3.0  (2001-06-22)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

[Previously saved workspace restored]

> w<-read.table("accres.txt")
> w
   V1 V2
1   9  1
2   3  1
3   8  1
4   7  1
5  12  1
6   4  0
7  13  0
8  10  0
9   9  0
10  9  0
11  6  0
> x<-w$V1
> t<-w$V2
> x
 [1]  9  3  8  7 12  4 13 10  9  9  6
> t
 [1] 1 1 1 1 1 0 0 0 0 0 0
> out<-lm(x~t)
> summary(out)

Call:
lm(formula = x ~ t)

Residuals:
   Min     1Q Median     3Q    Max 
 -4.80  -1.65   0.50   1.35   4.50 

Coefficients:
            Estimate Std. Error t value Pr(>|t|)    
(Intercept)    8.500      1.307   6.502 0.000111 ***
t             -0.700      1.939  -0.361 0.726443    
---
Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1 

Residual standard error: 3.202 on 9 degrees of freedom
Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525 
F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264 

> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xoaquin@computer.org  Fri Aug 17 02:14:31 2001
From: xoaquin@computer.org (xoaquin@computer.org)
Date: Fri, 17 Aug 2001 03:14:31 +0200 (MET DST)
Subject: [Rd] Error in report. (PR#1060)
Message-ID: <200108170114.DAA21193@pubhealth.ku.dk>

To all the people involved:

I incorrectly reported the negative value of the adjusted R-squared as a bug
in the last version of R.

I was not careful enough in checking the details and I apologize for the
time that some people had to waste. I will be more careful next time.

Some packages report values greater that or equal to zero and use zero when
negative, but certainly this is not necessary.

Joaquin Diaz-Saiz


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Joaquin Diaz-Saiz" <xoaquin@computer.org  Fri Aug 17 02:52:05 2001
From: Joaquin Diaz-Saiz" <xoaquin@computer.org (Joaquin Diaz-Saiz)
Date: Thu, 16 Aug 2001 20:52:05 -0500
Subject: [Rd] lm() (PR#1059)
References: <E09E527B56BE2D438A3D6A246DDD27A9048F1A@Roper-CV.qld.cmis.csiro.au>
Message-ID: <002301c126bf$493f9fc0$bff2520c@usinet.xoaquin>

To all the people involved:

I incorrectly reported the negative value of the adjusted R-squared as a bug
in the last version of R.

I was not careful enough in checking the details and I apologize for the
time that some people had to waste. I will be more careful next time.

Some packages report values greater that or equal to zero and use zero when
negative, but certainly this is not necessary.

Joaquin Diaz-Saiz

----- Original Message -----
From: "Venables, Bill (CMIS, Cleveland)" <Bill.Venables@CMIS.CSIRO.AU>
To: "'JDiaz-Saiz@uh.edu'" <JDiaz-Saiz@UH.EDU>; <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
Sent: Thursday, August 16, 2001 6:23 PM
Subject: RE: [Rd] lm() (PR#1059)


> Where's the bug?
>
> The adjusted R-squared is an approximately unbiased estimator of the true
> R^2.  Like most unbiased estimators of positive parameters it can
sometimes
> take on negative values.  Most people will understand this, too, so I
don't
> see much point in artificially replacing the result by zero if its value
is
> negative.
>
> Bill Venables.
>
> -----Original Message-----
> From: JDiaz-Saiz@uh.edu [mailto:JDiaz-Saiz@uh.edu]
> Sent: Friday, 17 August 2001 3:31 AM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] lm() (PR#1059)
>
>
> Full_Name: Joaquin Diaz-Saiz
> Version: 1.3.0
> OS: Windows
> Submission from: (NULL) (129.7.120.106)
>
>
> The lm() function applied to a particular data set produces a negative
value
> for
> the adjusted R-square. See the output below.
>
>
> =======================================================
> R : Copyright 2001, The R Development Core Team
> Version 1.3.0  (2001-06-22)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> [Previously saved workspace restored]
>
> > w<-read.table("accres.txt")
> > w
>    V1 V2
> 1   9  1
> 2   3  1
> 3   8  1
> 4   7  1
> 5  12  1
> 6   4  0
> 7  13  0
> 8  10  0
> 9   9  0
> 10  9  0
> 11  6  0
> > x<-w$V1
> > t<-w$V2
> > x
>  [1]  9  3  8  7 12  4 13 10  9  9  6
> > t
>  [1] 1 1 1 1 1 0 0 0 0 0 0
> > out<-lm(x~t)
> > summary(out)
>
> Call:
> lm(formula = x ~ t)
>
> Residuals:
>    Min     1Q Median     3Q    Max
>  -4.80  -1.65   0.50   1.35   4.50
>
> Coefficients:
>             Estimate Std. Error t value Pr(>|t|)
> (Intercept)    8.500      1.307   6.502 0.000111 ***
> t             -0.700      1.939  -0.361 0.726443
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
>
> Residual standard error: 3.202 on 9 degrees of freedom
> Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525
> F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264
>
> >
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.
> -.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xoaquin@computer.org  Fri Aug 17 02:53:19 2001
From: xoaquin@computer.org (xoaquin@computer.org)
Date: Fri, 17 Aug 2001 03:53:19 +0200 (MET DST)
Subject: [Rd] lm() (PR#1059)
Message-ID: <200108170153.DAA21272@pubhealth.ku.dk>

To all the people involved:

I incorrectly reported the negative value of the adjusted R-squared as a bug
in the last version of R.

I was not careful enough in checking the details and I apologize for the
time that some people had to waste. I will be more careful next time.

Some packages report values greater that or equal to zero and use zero when
negative, but certainly this is not necessary.

Joaquin Diaz-Saiz

----- Original Message -----
From: "Venables, Bill (CMIS, Cleveland)" <Bill.Venables@CMIS.CSIRO.AU>
To: "'JDiaz-Saiz@uh.edu'" <JDiaz-Saiz@UH.EDU>; <r-devel@stat.math.ethz.ch>
Cc: <R-bugs@biostat.ku.dk>
Sent: Thursday, August 16, 2001 6:23 PM
Subject: RE: [Rd] lm() (PR#1059)


> Where's the bug?
>
> The adjusted R-squared is an approximately unbiased estimator of the true
> R^2.  Like most unbiased estimators of positive parameters it can
sometimes
> take on negative values.  Most people will understand this, too, so I
don't
> see much point in artificially replacing the result by zero if its value
is
> negative.
>
> Bill Venables.
>
> -----Original Message-----
> From: JDiaz-Saiz@uh.edu [mailto:JDiaz-Saiz@uh.edu]
> Sent: Friday, 17 August 2001 3:31 AM
> To: r-devel@stat.math.ethz.ch
> Cc: R-bugs@biostat.ku.dk
> Subject: [Rd] lm() (PR#1059)
>
>
> Full_Name: Joaquin Diaz-Saiz
> Version: 1.3.0
> OS: Windows
> Submission from: (NULL) (129.7.120.106)
>
>
> The lm() function applied to a particular data set produces a negative
value
> for
> the adjusted R-square. See the output below.
>
>
> =======================================================
> R : Copyright 2001, The R Development Core Team
> Version 1.3.0  (2001-06-22)
>
> R is free software and comes with ABSOLUTELY NO WARRANTY.
> You are welcome to redistribute it under certain conditions.
> Type `license()' or `licence()' for distribution details.
>
> R is a collaborative project with many contributors.
> Type `contributors()' for more information.
>
> Type `demo()' for some demos, `help()' for on-line help, or
> `help.start()' for a HTML browser interface to help.
> Type `q()' to quit R.
>
> [Previously saved workspace restored]
>
> > w<-read.table("accres.txt")
> > w
>    V1 V2
> 1   9  1
> 2   3  1
> 3   8  1
> 4   7  1
> 5  12  1
> 6   4  0
> 7  13  0
> 8  10  0
> 9   9  0
> 10  9  0
> 11  6  0
> > x<-w$V1
> > t<-w$V2
> > x
>  [1]  9  3  8  7 12  4 13 10  9  9  6
> > t
>  [1] 1 1 1 1 1 0 0 0 0 0 0
> > out<-lm(x~t)
> > summary(out)
>
> Call:
> lm(formula = x ~ t)
>
> Residuals:
>    Min     1Q Median     3Q    Max
>  -4.80  -1.65   0.50   1.35   4.50
>
> Coefficients:
>             Estimate Std. Error t value Pr(>|t|)
> (Intercept)    8.500      1.307   6.502 0.000111 ***
> t             -0.700      1.939  -0.361 0.726443
> ---
> Signif. codes:  0 `***' 0.001 `**' 0.01 `*' 0.05 `.' 0.1 ` ' 1
>
> Residual standard error: 3.202 on 9 degrees of freedom
> Multiple R-Squared: 0.01427,    Adjusted R-squared: -0.09525
> F-statistic: 0.1303 on 1 and 9 DF,  p-value: 0.7264
>
> >
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.
> -.-
> r-devel mailing list -- Read
http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
> _._


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Aug 17 14:49:55 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 17 Aug 2001 15:49:55 +0200
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
Message-ID: <15229.8451.41084.531037@gargle.gargle.HOWL>

A colleague has a dozen of excel sheets and also expects to get updates
regularly.  He could open these in M$-Excel and export as *.csv manually,
"bring back to Unix" and then read into R.  Of course there must be options to
start programming this in something like visual basic,
but we wouldn't to really want to...

We also know that probably Gnumeric could do the job (since the xls files
are said to be simple ...), but as far as I know that also does only work
manually (and via GUI). 
"gnumeric --help" does not suggest a command line version.
Are there other options (i.e. free software programs) to use from the
command line (i.e. also in a shell script or from inside R)?

Since this is not really an R topic, please reply to my e-mail only,
not to R-help, and I'll summarize.  Thanks in advance!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Sun Aug 19 22:05:49 2001
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Sun, 19 Aug 2001 23:05:49 +0200 (MET DST)
Subject: [Rd] error message in chol() (PR#1061)
Message-ID: <200108192105.XAA05577@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.3.0
OS: Windows 98
Submission from: (NULL) (24.77.112.193)



I am having accuracy problems involving the computation of inverse of
nonnegative definite matrices with solve(). I also have to compute the
Choleski decomposition of matrices. My numerical problems involving solve()
made me find a bug in the chol() function. Here is an example.

#Please, load the (8x8) matrix "mat" given below.
#The matrix "mat" is indeed invertible as
solve(mat)
#exists. However, the command
chol(mat)
#claims that "mat" is singular. The correct error message should be
#that "mat" is not symmetric positive definite.

#In fact, the matrix "mat" should be symmetric, but if
#we adjust for rounding errors by
chol((mat+t(mat))/2)
#we have the same error message in R, whereas S-Plus works (with
#a warning message saying that the rank is not full).

mat <- structure(c(0.587765115222886, 0.167899163888134, -1.17517413388306e-05,
  2.84014489816759e-05, -0.00314742260306333, 0.00957598738126672, 
 -0.000181283657365524, 0.000268404362197193, 0.167899163888134, 
 0.830166933867836, 2.84014489816759e-05, -6.37164529062413e-05,  
-0.00221693916036902, 0.00290212917834065, 9.0762242654496e-05, 
 -0.000148298146106774, -1.17517413388306e-05, 2.84014489816759e-05, 
 0.592681746779869, 0.155708697468761, -0.000181283657365506, 
 0.000268404362197185, -0.00203952216264033, 0.00850865103383899, 
 2.84014489816759e-05, -6.37164529062413e-05, 0.155708697468761, 
 0.856464279975445, 9.0762242654496e-05, -0.000148298146106784, 
 -0.00296804648853004, 0.00336588501549565, -0.00314742260306333,
  -0.00221693916036901, -0.000181283657365512, 9.07622426544948e-05,
  1.72579173368880, 0.238005942444999, 0.120912001671674, -0.141897803793986,
  0.00957598738126672, 0.00290212917834065, 0.000268404362197191, 
 -0.000148298146106782, 0.238005942444999, 1.56986591648628, 
-0.141897803793988,  0.213872027136185, -0.000181283657365518, 
9.07622426544981e-05,  -0.00203952216264033, -0.00296804648853004,
 0.120912001671674,  -0.141897803793987, 1.53425760353976, 1.16174845591861,
 0.000268404362197194,  -0.000148298146106774, 0.00850865103383899,
 0.00336588501549565,  -0.141897803793985, 0.213872027136185, 
1.16174845591861, 0.773168806527852 ), .Dim = c(8, 8)) 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug 20 00:02:06 2001
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Mon, 20 Aug 2001 01:02:06 +0200 (MET DST)
Subject: [Rd] system.file("",package) (PR#1062)
Message-ID: <200108192302.BAA05935@pubhealth.ku.dk>


system.file("",package") is documented to return the root of the package
(as it did in the past). It actually returns "" (Win98, R1.3.0), breaking
the SJava package

Omitting the first argument does work correctly and so is a workaround if
the argument is explicitly "" but not if it is the value of a variable.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 20 07:15:22 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 20 Aug 2001 08:15:22 +0200
Subject: [Rd] system.file("",package) (PR#1062)
In-Reply-To: <200108192302.BAA05935@pubhealth.ku.dk>
References: <200108192302.BAA05935@pubhealth.ku.dk>
Message-ID: <15232.43770.872451.726047@mithrandir.hornik.net>

>>>>> tlumley  writes:

> system.file("",package") is documented to return the root of the
> package (as it did in the past). It actually returns "" (Win98,
> R1.3.0), breaking the SJava package

> Omitting the first argument does work correctly and so is a workaround
> if the argument is explicitly "" but not if it is the value of a
> variable.

Thomas,

I think you are misreading the docs: we have

     system.file(..., package = "base", lib.loc = .lib.loc, pkg, lib)

so the package argument must be named.

I think you were caught by

	R> system.file("", "eda")
	[1] ""

but you need to do

	R> system.file("", package = "eda")
	[1] "/usr/local/lib/R/library/eda/"

-k


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 20 07:44:02 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 Aug 2001 08:44:02 +0200 (MET DST)
Subject: [Rd] system.file("",package) (PR#1062)
Message-ID: <200108200644.IAA06705@pubhealth.ku.dk>

On Mon, 20 Aug 2001 tlumley@u.washington.edu wrote:

>
> system.file("",package") is documented to return the root of the package
> (as it did in the past). It actually returns "" (Win98, R1.3.0), breaking
> the SJava package

My Unix systems give results like

> system.file("", package="eda")
[1] "/ext/R/1.3.0/lib/R/library/eda/"
> system.file("",package="Rstreams")
[1] "/ext/R/library/Rstreams/"

under 1.3.0.  It's the trailing slash that is the problem, and which is not
as documented in the Value section. That is not a file under Windows, and
so file.exists() fails.  (That suprised me a bit, but one could argue it is
not actually a file under Unix either: the directory file is
/ext/R/1.3.0/lib/R/library/eda and that does work.)

Rather than special-case system.file("",package), I think we should remove
the `or \code{""}' from the documentation.


(The problem with SJava on Windows is one of several I reported to DTL on
Mon Jul 16.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 20 07:43:41 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 20 Aug 2001 07:43:41 +0100 (BST)
Subject: [Rd] system.file("",package) (PR#1062)
In-Reply-To: <15232.43770.872451.726047@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.31.0108200742240.16994-100000@auk.stats>

On Mon, 20 Aug 2001, Kurt Hornik wrote:

> >>>>> tlumley  writes:
>
> > system.file("",package") is documented to return the root of the
> > package (as it did in the past). It actually returns "" (Win98,
> > R1.3.0), breaking the SJava package
>
> > Omitting the first argument does work correctly and so is a workaround
> > if the argument is explicitly "" but not if it is the value of a
> > variable.
>
> Thomas,
>
> I think you are misreading the docs: we have
>
>      system.file(..., package = "base", lib.loc = .lib.loc, pkg, lib)
>
> so the package argument must be named.
>
> I think you were caught by
>
> 	R> system.file("", "eda")
> 	[1] ""
>
> but you need to do
>
> 	R> system.file("", package = "eda")
> 	[1] "/usr/local/lib/R/library/eda/"

Sorry, that's using a Unix-specific interpretation of file.exists,
so does not work under Windows.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Aug 20 09:00:17 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 20 Aug 2001 10:00:17 +0200
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <15229.8451.41084.531037@gargle.gargle.HOWL>
References: <15229.8451.41084.531037@gargle.gargle.HOWL>
Message-ID: <15232.50065.506799.227682@gargle.gargle.HOWL>

Thanks got to Brian Ripley, John Chambers, Tony Rossini, Setzer Woodrow,
Dirk Eddelbuettel, Uwe Ligges, Detlef Steuer, and Kurt Hornik (in
"historical" order) who have answered very helpfully!

I was interested primarily in "commandline" solutions inside Unix/Linux,
and hence not ODBC inside windows.  The other answers fall into three groups :

1) newer Perl versions (newer than Redhat 6.2 or Debian potato) have modules
   Spreadsheet::ParseExcel and built on that DBI::Excel
   {as "libspreadsheet-parseexcel-perl" and "libdbi-excel-perl" in Debian,
    thanks to Dirk}.

   Dirk has also done a done a perl script "xls2csv" built on the above,
   sent to Brian Ripley who forwarded it to me.  
   Dirk, maybe you'd post the latest version of that here as well, or give us
   a pointer where that is available?

2) There's a GPL package "catdoc" with primary aim of 
   "cat *.doc files" (i.e. `look at' M$-Word files).  The catdoc package is
   written in C and also has an "xls2csv" (same name as above script!) program.
   catdoc is in Debian or available at  http://www.fe.msk.ru/~vitus/catdoc/
   Looking at that webpage however seems to indicate that development
   somehow stopped end of 1999 (a "2k" bug ? :-).

I've not yet compared the two xls2csv versions now potentially available
to me, one reason being that I'd have to upgrade perl (or Redhat) first.
At the moment, I'd tend to use the perl based solution.

3) John Chambers mentioned Duncan's  `R Gnumeric' interface --- the only
   R-related answer--- at http://www.omegahat.org/RGnumeric/  
   It is fairly new, but I'll definitely am looking at it, as well.

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

    MM> A colleague has a dozen of excel sheets and also expects to get
    MM> updates regularly.  He could open these in M$-Excel and export as
    MM> *.csv manually, "bring back to Unix" and then read into R.  Of
    MM> course there must be options to start programming this in something
    MM> like visual basic, but we wouldn't to really want to...

    MM> We also know that probably Gnumeric could do the job (since the xls
    MM> files are said to be simple ...), but as far as I know that also
    MM> does only work manually (and via GUI).  "gnumeric --help" does not
    MM> suggest a command line version.  Are there other options (i.e. free
    MM> software programs) to use from the command line (i.e. also in a
    MM> shell script or from inside R)?

    MM> Since this is not really an R topic, please reply to my e-mail
    MM> only, not to R-help, and I'll summarize.  Thanks in advance!

Thanks a lot, once more!
-- 
Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 20 11:28:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 20 Aug 2001 12:28:08 +0200 (MET DST)
Subject: [Rd] error message in chol() (PR#1061)
Message-ID: <200108201028.MAA10728@pubhealth.ku.dk>

On Sun, 19 Aug 2001 jerome@stat.ubc.ca wrote:

> Full_Name: Jerome Asselin
> Version: 1.3.0
> OS: Windows 98
> Submission from: (NULL) (24.77.112.193)
>
>
>
> I am having accuracy problems involving the computation of inverse of
> nonnegative definite matrices with solve(). I also have to compute the
> Choleski decomposition of matrices. My numerical problems involving solve()
> made me find a bug in the chol() function. Here is an example.
>
> #Please, load the (8x8) matrix "mat" given below.
> #The matrix "mat" is indeed invertible as
> solve(mat)
> #exists. However, the command
> chol(mat)
> #claims that "mat" is singular. The correct error message should be
> #that "mat" is not symmetric positive definite.

Yes.  Message changed.  Actually, it only uses the upper triangle,
so symmetry is assumed, as the help page says....

> #In fact, the matrix "mat" should be symmetric, but if
> #we adjust for rounding errors by
> chol((mat+t(mat))/2)
> #we have the same error message in R, whereas S-Plus works (with
> #a warning message saying that the rank is not full).

Well, the symmetrized matrix is not even close to positive definite, so
what does `works' mean?

> eigen((mat+t(mat))/2)
$values:
[1]  2.3768888  1.8976031  1.4630238  0.9286787  0.9159388  0.5205478  0.5018393
[8] -0.1343581
 ...

L <- chol((mat+t(mat))/2)
t(L) %*% L - (mat+t(mat))/2

has one element of about 0.27.  That's just undocumented in S-PLUS.

Generally, if you want good numerical control you should be using eigen
and not chol, and if you know your matrix is symmetric, you can do better
than solve().  Have you considered the Matrix package?


> mat <- structure(c(0.587765115222886, 0.167899163888134, -1.17517413388306e-05,
>   2.84014489816759e-05, -0.00314742260306333, 0.00957598738126672,
>  -0.000181283657365524, 0.000268404362197193, 0.167899163888134,
>  0.830166933867836, 2.84014489816759e-05, -6.37164529062413e-05,
> -0.00221693916036902, 0.00290212917834065, 9.0762242654496e-05,
>  -0.000148298146106774, -1.17517413388306e-05, 2.84014489816759e-05,
>  0.592681746779869, 0.155708697468761, -0.000181283657365506,
>  0.000268404362197185, -0.00203952216264033, 0.00850865103383899,
>  2.84014489816759e-05, -6.37164529062413e-05, 0.155708697468761,
>  0.856464279975445, 9.0762242654496e-05, -0.000148298146106784,
>  -0.00296804648853004, 0.00336588501549565, -0.00314742260306333,
>   -0.00221693916036901, -0.000181283657365512, 9.07622426544948e-05,
>   1.72579173368880, 0.238005942444999, 0.120912001671674, -0.141897803793986,
>   0.00957598738126672, 0.00290212917834065, 0.000268404362197191,
>  -0.000148298146106782, 0.238005942444999, 1.56986591648628,
> -0.141897803793988,  0.213872027136185, -0.000181283657365518,
> 9.07622426544981e-05,  -0.00203952216264033, -0.00296804648853004,
>  0.120912001671674,  -0.141897803793987, 1.53425760353976, 1.16174845591861,
>  0.000268404362197194,  -0.000148298146106774, 0.00850865103383899,
>  0.00336588501549565,  -0.141897803793985, 0.213872027136185,
> 1.16174845591861, 0.773168806527852 ), .Dim = c(8, 8))
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug 20 16:28:02 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 20 Aug 2001 08:28:02 -0700 (PDT)
Subject: [Rd] system.file("",package) (PR#1062)
In-Reply-To: <200108200644.IAA06705@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0108200825180.142352-100000@homer28.u.washington.edu>

On Mon, 20 Aug 2001 ripley@stats.ox.ac.uk wrote:

>
> Rather than special-case system.file("",package), I think we should remove
> the `or \code{""}' from the documentation.
>
>

Yes. I didn't think so initially, but on reflection
  system.file(some.file,package="blah")
probably should return "" if some.file happens to be "" or have length 0.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 20 17:38:51 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 20 Aug 2001 18:38:51 +0200
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <15232.50065.506799.227682@gargle.gargle.HOWL>
References: <15229.8451.41084.531037@gargle.gargle.HOWL>
 <15232.50065.506799.227682@gargle.gargle.HOWL>
Message-ID: <15233.15643.232282.557687@mithrandir.hornik.net>

>>>>> Martin Maechler writes:

> Thanks got to Brian Ripley, John Chambers, Tony Rossini, Setzer Woodrow,
> Dirk Eddelbuettel, Uwe Ligges, Detlef Steuer, and Kurt Hornik (in
> "historical" order) who have answered very helpfully!

> I was interested primarily in "commandline" solutions inside Unix/Linux,
> and hence not ODBC inside windows.  The other answers fall into three groups :

> 1) newer Perl versions (newer than Redhat 6.2 or Debian potato) have modules
>    Spreadsheet::ParseExcel and built on that DBI::Excel
>    {as "libspreadsheet-parseexcel-perl" and "libdbi-excel-perl" in Debian,
>     thanks to Dirk}.

>    Dirk has also done a done a perl script "xls2csv" built on the above,
>    sent to Brian Ripley who forwarded it to me.  
>    Dirk, maybe you'd post the latest version of that here as well, or give us
>    a pointer where that is available?

> 2) There's a GPL package "catdoc" with primary aim of 
>    "cat *.doc files" (i.e. `look at' M$-Word files).  The catdoc package is
>    written in C and also has an "xls2csv" (same name as above script!) program.
>    catdoc is in Debian or available at  http://www.fe.msk.ru/~vitus/catdoc/
>    Looking at that webpage however seems to indicate that development
>    somehow stopped end of 1999 (a "2k" bug ? :-).

> I've not yet compared the two xls2csv versions now potentially available
> to me, one reason being that I'd have to upgrade perl (or Redhat) first.
> At the moment, I'd tend to use the perl based solution.

> 3) John Chambers mentioned Duncan's  `R Gnumeric' interface --- the only
>    R-related answer--- at http://www.omegahat.org/RGnumeric/  
>    It is fairly new, but I'll definitely am looking at it, as well.

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

MM> A colleague has a dozen of excel sheets and also expects to get
MM> updates regularly.  He could open these in M$-Excel and export as
MM> *.csv manually, "bring back to Unix" and then read into R.  Of
MM> course there must be options to start programming this in something
MM> like visual basic, but we wouldn't to really want to...

MM> We also know that probably Gnumeric could do the job (since the xls
MM> files are said to be simple ...), but as far as I know that also
MM> does only work manually (and via GUI).  "gnumeric --help" does not
MM> suggest a command line version.  Are there other options (i.e. free
MM> software programs) to use from the command line (i.e. also in a
MM> shell script or from inside R)?

MM> Since this is not really an R topic, please reply to my e-mail
MM> only, not to R-help, and I'll summarize.  Thanks in advance!

> Thanks a lot, once more!

Martin,

One remark.  If we think we want to be able to import Excel data
directly into R then neither solution will do I think: the xls2csv
program from (2) is not good enough, and the other solutions require
tools that may not be available.  (Effort is currently put into removing
run-time and even build-time dependency on Perl and shell tools, and use
R scripts instead.)

I think it would be nice if package `foreign' had at least limited
support for reading in .xls files ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Mon Aug 20 19:45:33 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Mon, 20 Aug 2001 14:45:33 -0400 (EDT)
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <15233.15643.232282.557687@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.10.10108201442190.3905-100000@hsph.harvard.edu>

On Mon, 20 Aug 2001, Kurt Hornik wrote:
> 
> Martin,
> 
> One remark.  If we think we want to be able to import Excel data
> directly into R then neither solution will do I think: the xls2csv
> program from (2) is not good enough, and the other solutions require
> tools that may not be available.  (Effort is currently put into removing
> run-time and even build-time dependency on Perl and shell tools, and use
> R scripts instead.)
> 
> I think it would be nice if package `foreign' had at least limited
> support for reading in .xls files ...

There is complete documentation for the Excel format (BIFF I think its
called) in the Excel SDK--- I'm not sure where you get it (it is probably
on one of the MSDN CDs somewhere, but it doesn't appear to be on the
website). For Excel 2002 (aka ExcelXP) as with most of the MS OfficeXP 
line, they've added native XML support making reading/writing files much
less of a problem.


 > > -k
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Aug 20 19:52:35 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 20 Aug 2001 19:52:35 +0100 (BST)
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <Pine.GSO.4.10.10108201442190.3905-100000@hsph.harvard.edu>
Message-ID: <Pine.LNX.4.31.0108201949330.22859-100000@gannet.stats>

On Mon, 20 Aug 2001, Byron Ellis wrote:

> On Mon, 20 Aug 2001, Kurt Hornik wrote:
> >
> > Martin,
> >
> > One remark.  If we think we want to be able to import Excel data
> > directly into R then neither solution will do I think: the xls2csv
> > program from (2) is not good enough, and the other solutions require
> > tools that may not be available.  (Effort is currently put into removing
> > run-time and even build-time dependency on Perl and shell tools, and use
> > R scripts instead.)
> >
> > I think it would be nice if package `foreign' had at least limited
> > support for reading in .xls files ...
>
> There is complete documentation for the Excel format (BIFF I think its
> called) in the Excel SDK--- I'm not sure where you get it (it is probably
> on one of the MSDN CDs somewhere, but it doesn't appear to be on the
> website). For Excel 2002 (aka ExcelXP) as with most of the MS OfficeXP
> line, they've added native XML support making reading/writing files much
> less of a problem.

Unfortunately, it's plain wrong according to the authors of the Perl
addons.

Gnumeric has reasonably readable code for this ...

It's a problem: those who really need this have ways (Star Office,
Gnumeric, Perl scripts, rebooting into W2k) and those who don't haven;t
the motivation.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon Aug 20 21:55:37 2001
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Mon, 20 Aug 2001 22:55:37 +0200 (MET DST)
Subject: [Rd] interrupting Sys.sleep (PR#1063)
Message-ID: <200108202055.WAA16443@pubhealth.ku.dk>


On Linux R1.3.0 (and current pre1.3.1 and pre1.4.0)
 Sys.sleep(30)
interrupt with CTRL-C
 Sys.sleep(30)
causes a segmentation fault. It doesn't happen under Windows (2000).


	-thomas





-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Mon Aug 20 22:24:04 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Mon, 20 Aug 2001 14:24:04 -0700
Subject: [Rd] interrupting Sys.sleep (PR#1063)
In-Reply-To: <200108202055.WAA16443@pubhealth.ku.dk>
Message-ID: <200108202125.OAA01261@pine.frazmtn.com>

With both pre 1.3.1 and pre 1.4.0:
doesn't happen on Darwin either.

On Monday, August 20, 2001, at 01:55 PM, tlumley@u.washington.edu wrote:

>
> On Linux R1.3.0 (and current pre1.3.1 and pre1.4.0)
>  Sys.sleep(30)
> interrupt with CTRL-C
>  Sys.sleep(30)
> causes a segmentation fault. It doesn't happen under Windows (2000).
>
>
> 	-thomas
>
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Tue Aug 21 00:13:29 2001
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Tue, 21 Aug 2001 01:13:29 +0200 (MET DST)
Subject: [Rd] error message in chol() (PR#1061)
Message-ID: <200108202313.BAA16976@pubhealth.ku.dk>


On Mon, 20 Aug 2001, Prof Brian Ripley wrote:

> On Sun, 19 Aug 2001 jerome@stat.ubc.ca wrote:
> 
> > Full_Name: Jerome Asselin
> > Version: 1.3.0
> > OS: Windows 98
> > Submission from: (NULL) (24.77.112.193)
> >
> >
> >
> > I am having accuracy problems involving the computation of inverse of
> > nonnegative definite matrices with solve(). I also have to compute the
> > Choleski decomposition of matrices. My numerical problems involving solve()
> > made me find a bug in the chol() function. Here is an example.
> >
> > #Please, load the (8x8) matrix "mat" given below.
> > #The matrix "mat" is indeed invertible as
> > solve(mat)
> > #exists. However, the command
> > chol(mat)
> > #claims that "mat" is singular. The correct error message should be
> > #that "mat" is not symmetric positive definite.
> 
> Yes.  Message changed.  Actually, it only uses the upper triangle,
> so symmetry is assumed, as the help page says....

Ok. Thank you.

> > #In fact, the matrix "mat" should be symmetric, but if
> > #we adjust for rounding errors by
> > chol((mat+t(mat))/2)
> > #we have the same error message in R, whereas S-Plus works (with
> > #a warning message saying that the rank is not full).
> 
> Well, the symmetrized matrix is not even close to positive definite, so
> what does `works' mean?
> 
> > eigen((mat+t(mat))/2)
> $values:
> [1]  2.3768888  1.8976031  1.4630238  0.9286787  0.9159388  0.5205478  0.5018393
> [8] -0.1343581
>  ...
> 
> L <- chol((mat+t(mat))/2)
> t(L) %*% L - (mat+t(mat))/2
> 
> has one element of about 0.27.  That's just undocumented in S-PLUS.
> 
> Generally, if you want good numerical control you should be using eigen
> and not chol, and if you know your matrix is symmetric, you can do better
> than solve().  Have you considered the Matrix package?

Thanks for the tips about eigen(). My attempt to reduce the use of solve()
and to use eigen to resolve rank deficiencies appears to be successful.

Jerome Asselin

> > mat <- structure(c(0.587765115222886, 0.167899163888134, -1.17517413388306e-05,
> >   2.84014489816759e-05, -0.00314742260306333, 0.00957598738126672,
> >  -0.000181283657365524, 0.000268404362197193, 0.167899163888134,
> >  0.830166933867836, 2.84014489816759e-05, -6.37164529062413e-05,
> > -0.00221693916036902, 0.00290212917834065, 9.0762242654496e-05,
> >  -0.000148298146106774, -1.17517413388306e-05, 2.84014489816759e-05,
> >  0.592681746779869, 0.155708697468761, -0.000181283657365506,
> >  0.000268404362197185, -0.00203952216264033, 0.00850865103383899,
> >  2.84014489816759e-05, -6.37164529062413e-05, 0.155708697468761,
> >  0.856464279975445, 9.0762242654496e-05, -0.000148298146106784,
> >  -0.00296804648853004, 0.00336588501549565, -0.00314742260306333,
> >   -0.00221693916036901, -0.000181283657365512, 9.07622426544948e-05,
> >   1.72579173368880, 0.238005942444999, 0.120912001671674, -0.141897803793986,
> >   0.00957598738126672, 0.00290212917834065, 0.000268404362197191,
> >  -0.000148298146106782, 0.238005942444999, 1.56986591648628,
> > -0.141897803793988,  0.213872027136185, -0.000181283657365518,
> > 9.07622426544981e-05,  -0.00203952216264033, -0.00296804648853004,
> >  0.120912001671674,  -0.141897803793987, 1.53425760353976, 1.16174845591861,
> >  0.000268404362197194,  -0.000148298146106774, 0.00850865103383899,
> >  0.00336588501549565,  -0.141897803793985, 0.213872027136185,
> > 1.16174845591861, 0.773168806527852 ), .Dim = c(8, 8))
> >
> >
> >
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> >
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> 



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Tue Aug 21 02:57:15 2001
From: edd@debian.org (Dirk Eddelbuettel)
Date: Mon, 20 Aug 2001 20:57:15 -0500
Subject: [Rd] Excel -> *.CSV in Unix (Linux) command line?
In-Reply-To: <15232.50065.506799.227682@gargle.gargle.HOWL>
References: <15229.8451.41084.531037@gargle.gargle.HOWL>
 <15232.50065.506799.227682@gargle.gargle.HOWL>
Message-ID: <15233.49147.3828.874363@sonny.eddelbuettel.com>


  Martin> 1) newer Perl versions (newer than Redhat 6.2 or Debian potato) 

The Perl version shouldn't matter for as long it can install from the CPAN
sources. 

  Martin>    Dirk has also done a done a perl script "xls2csv" built on the
  Martin> above, sent to Brian Ripley who forwarded it to me.  Dirk, maybe
  Martin> you'd post the latest version of that here as well, or give us a
  Martin> pointer where that is available?

It just so happened that Brian had asked about that topic when I was playing
with an example from the Spreadsheet::ParseExcel module I was revisiting. I
sent him the hand-edited version (mostly more indentation, renamed variables)
I had plauyed to grok it better. As I'm currently on a different machine, I
can only the (somewhat terse) original dmpEx.pl. There are variants of in the
sample/ directory of Spreadsheet::ParseExcel.

IMHO trying to teach R to read .xls files is opening a huge can of worms with
users who might be a little too agnostic about exactly how they have saved
their data.

Regards, Dirk


use strict;
if(!(defined $ARGV[0])) {
    print<<EOF;
Usage: $0 Excel_File
EOF
    exit;
}
use Spreadsheet::ParseExcel;
my $oExcel = new Spreadsheet::ParseExcel;
my $oBook = $oExcel->Parse($ARGV[0]);

my($iR, $iC, $oWkS, $oWkC);
print "=========================================\n";
print "FILE  :", $oBook->{File} , "\n";
print "COUNT :", $oBook->{SheetCount} , "\n";
print "AUTHOR:", $oBook->{Author} , "\n";
#for(my $iSheet=0; $iSheet < $oBook->{SheetCount} ; $iSheet++) {
#    $oWkS = $oBook->{Worksheet}[$iSheet];
foreach my $oWkS (@{$oBook->{Worksheet}}) {
    print "--------- SHEET:", $oWkS->{Name}, "\n";
    for(my $iR = $oWkS->{MinRow} ; 
            defined $oWkS->{MaxRow} && $iR <= $oWkS->{MaxRow} ; $iR++) {
        for(my $iC = $oWkS->{MinCol} ;
                        defined $oWkS->{MaxCol} && $iC <= $oWkS->{MaxCol} ; $iC++) {
            $oWkC = $oWkS->{Cells}[$iR][$iC];
            print "( $iR , $iC ) =>", $oWkC->Value, "\n" if($oWkC);
print $oWkC->{_Kind}, "\n";
        }
    }
}


-- 
Our mailserver had a hardware failure while we were gone during the 2nd half 
of July. If I did not respond to a mail you sent then, or if you experienced a
a mail bounce, could you kindly resend it? Sorry for the inconvenience -- Dirk
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Tue Aug 21 06:15:02 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Tue, 21 Aug 2001 07:15:02 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200108210515.f7L5F2Z15769@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

none

Directory:  Add-ons

* PR# 948 *
Subject:  xyplot,grid.text segfault 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 13:24:11 +0200
* PR# 950 *
Subject:  lattice: dev.print(postscript) gives probl. false background Info 
From: Peter Malewski <p.malewski@tu-bs.de>
Date: Sat, 26 May 2001 23:20:29 +0200
* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
* PR# 981 *
Subject: read.xport() bug
From: abroman@jhu.edu
Date: Fri, 15 Jun 2001 00:25:54 +0200 (MET DST)
--confirmed on Windows and Solaris.
--Seems that file is not in the expected format
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1050 *
Subject: error in ksmooth C code + patch
From: htang@hpl.hp.com
Date: Mon, 13 Aug 2001 04:57:46 +0200 (MET DST)
--fixed for 1.3.1

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200

Directory:  In-Out

none

Directory:  Installation

* PR# 1034 *
Subject: Compiling R (1.3.0) on AIX (4.3) fails
From: "Thomas J Vogels" <tov@ece.cmu.edu>
Date: Sun, 29 Jul 2001 12:27:51 -0400

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)

Directory:  Macintosh

* PR# 1015 *
Subject: R 1.3  on iMacs
From: Con Savas <con@maths.uwa.edu.au>
Date: Fri, 06 Jul 2001 16:40:05 +0800
* PR# 1023 *
Subject: data function
From: wild@stat.auckland.ac.nz
Date: Fri, 13 Jul 2001 02:48:53 +0200 (MET DST)
--Mac-specific

Directory:  Misc

none

Directory:  Models

* PR# 1003 *
Subject: interaction() -- problem with drop
From: Matthew Wiener <mcw@ln.nimh.nih.gov>
Date: Thu, 28 Jun 2001 20:14:47 -0400 (EDT)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 964 *
Subject: R-1.2.3 OSF precompiled binary doesn't run under DU4.0D
From: paul@gromit.dlib.vt.edu
Date: Fri, 1 Jun 2001 17:47:10 +0200 (MET DST)
--Builder needs to avoid -ldnet in distributed binaries..
* PR# 1002 *
Subject: core dump running modreg-Ex.R
From: WhiteG@dfo-mpo.gc.ca
Date: Thu, 28 Jun 2001 19:14:18 +0200 (MET DST)
--Only reported on SGI, solved by removing optimization.
--Needs debugging there.
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1026 *
Subject: make check failure on SGI-IRIX6.5
From: laurent@cbs.dtu.dk
Date: Mon, 16 Jul 2001 15:06:17 +0200 (MET DST)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1051 *
Subject:      erappin' - daily morning update 8-13-01
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Mon, 13 Aug 2001 09:18:54 -0400
* PR# 1052 *
Subject:  Inconsistent behaviour of is.vector? 
From: J.C.Rougier@durham.ac.uk
Date: Tue, 14 Aug 2001 09:04:57 +0100
* PR# 1053 *
Subject:      erappin' - daily morning update 8-14-01
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Tue, 14 Aug 2001 07:00:20 -0400
* PR# 1054 *
Subject: documented but missing from the code
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Wed, 15 Aug 2001 12:11:42 -0400
* PR# 1055 *
Subject:      books - special offers by eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Wed, 15 Aug 2001 22:01:34 -0400
* PR# 1056 *
Subject:      books - special offers by eminidaytrading.com
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Thu, 16 Aug 2001 00:03:08 -0400
* PR# 1057 *
Subject: crt1.o skipped at configure time ?
From: laurent@cbs.dtu.dk
Date: Thu, 16 Aug 2001 08:52:34 +0200 (MET DST)
* PR# 1058 *
Subject:      erappin' - daily morning update 8-16-01
From: eminidaytrading <erap@eminidaytrading.com>
Date:         Thu, 16 Aug 2001 07:40:00 -0400
* PR# 1059 *
Subject: lm()
From: JDiaz-Saiz@uh.edu
Date: Thu, 16 Aug 2001 19:31:07 +0200 (MET DST)
* PR# 1060 *
Subject: Error in report.
From: "Joaquin Diaz-Saiz" <xoaquin@worldnet.att.net>
Date: Thu, 16 Aug 2001 20:13:32 -0500
* PR# 1061 *
Subject: error message in chol()
From: jerome@stat.ubc.ca
Date: Sun, 19 Aug 2001 23:05:47 +0200 (MET DST)
* PR# 1062 *
Subject: system.file("",package)
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Sun, 19 Aug 2001 16:01:57 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 21 16:22:57 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 21 Aug 2001 16:22:57 +0100 (BST)
Subject: [Rd] Re: [R] Problem using GLM in a loop (fwd)
Message-ID: <Pine.LNX.4.31.0108211605490.11097-100000@gannet.stats>

This example is caused by R's messing with formula environments.

That's explained in ?formula, but should it not be explained in
?model.frame ?

Simple test:

data <- data.frame(y=rnorm(100), x=1:100)

testit <- function(formula)
{
   weights <- runif(100)
   glm(formula, weights=weights, data=data)
}
testit(y ~ x)

weights is looked for in the environment of the formula, not of the call
to glm.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

---------- Forwarded message ----------
Date: Tue, 21 Aug 2001 15:47:34 +0100 (BST)
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
To: Isabelle ZABALZA <isabelle.zabalza-mezghani@ifp.fr>
Subject: Re: [R] Problem using GLM in a loop

It's a scope problem: use

data$weights <- 1/sig

and it will work.  It's finding the system function weights, not your
variable.

I don't really understand this one as yet.


On Tue, 21 Aug 2001, Isabelle ZABALZA wrote:

> Hello,
>
> I am try to perform a modeling which is relevant in a strongly
> heteroscedastic context.
> So I perform a dual modeling (modeling of both mean and variance of a
> response) in using the following loop:
>
> jointmod <- function(formula, data, itercrit=10,devcrit=0.0001)
> {
> #
> # Init step
> #
> init <- glm(formula=formula,family=gaussian, data=data)
> response <- resid(init,type="response") + predict(init,type="response")
> mu <- predict(init,type="response")
> iter <- 1
> dev <- init$deviance
> if (dev != 0) vardev <- 1
> else stop(message="Null deviance in initialisation step")
> endformula_ strsplit(formula,"~")[[3]]
> formulavar_paste("d","~")
> formulavar_as.formula(paste(formulavar,endformula))
> #
> # Modeling loop
> #
> while ((iter <= itercrit)| (vardev > devcrit)) {
> d_(response - mu)^2
> modvar_glm(formula=formulavar,family=Gamma(link=log),data=data)
> sig <- predict(modvar,type="response")
> weights <- 1/sig
> modesp <- glm(formula=formula,
> family=gaussian,data=data,weights=weights)
> mu <- predict(modesp,type="response")
> devold <- dev
> dev <- modesp$deviance
> vardev <- (devold -dev)/devold
> iter <- iter + 1
> }
>
> list(modesp=modesp, modvar=modvar, iter=iter, vardev=vardev)
> }
>
> This program evaluation always stops when evaluating the "modesp" line :
>
>          modesp <- glm(formula=formula,
> family=gaussian,data=data,weights=weights)
> with the following error:
> error in
> model.frame(formula,rownames,variables,varnames,extras,extranames, :
>            invalid variable type.
>
> The same program without specifying weights runs.
> I don't understand this behavior since when I execute the glm command
> with weights out of the program, it runs.
>
> I run R1.3.0 under Windows.
>
> If someone can help me ...
>
> Isabelle Zabalza-Mezghani
>
>
>
>
>
>
> --
> Isabelle Zabalza-Mezghani          Tel : 01 47 52 61 99
> Institut Franais du Ptrole       E-mail : isabelle.zabalza-mezghani@ifp.fr
> 1-4 Av. Bois Preau - Bat Lauriers
> 92852 Rueil Malmaison Cedex, France
>
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jamesmeyers@etex.net  Tue Aug 21 18:31:33 2001
From: jamesmeyers@etex.net (jamesmeyers@etex.net)
Date: Tue, 21 Aug 2001 19:31:33 +0200 (MET DST)
Subject: [Rd] GREAT DEAL (PR#1064)
Message-ID: <200108211731.TAA27331@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0007_01C12A3B.2E9D91C0
Content-Type: text/plain;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

GO HERE CHECK OUT THESE GREAT ITEMS=20

IF YOU OUR INTERESTED IN WHOLESALE PRICES FOR YOUR BUSINESS OR =
FLEAMARKET BUSINESS, THEN EMAIL US AND WE WILL SEND YOU A WHOLE SALE =
PRICE LIST....THAT YOU CAN ORDER ITEMS 1 AT A TIME OR AS MANY AS YOU =
WANT....=20

START YOUR OWN HOME BUSINESS , SEND FOR YOUR PRICE LIST TODAY.. AND =
START MAKING MONEY RIGHT AWAY, WITH YOUR OWN GIFT SHOP, SALE AT =
FLEAMARKETS,=20

PARTYS=20

OR WHAT EVER YOU WANT...=20

OR VISIT OUR PRODUCTS PAGE. AND LET US KNOW BY EMAIL WHAT YOU WANT, AND =
WE WILL OFFER YOU A GREAT DISCOUNT ON WHAT YOU WANT ,,=20

HURRY CHISTMAS IS JUST ABOUT HERE..=20

THANK YOU
JAMES MEYERS=20

jamesmeyers@etex.net=20



<http://members.fortunecity.com/jamesmeyers1>


------=_NextPart_000_0007_01C12A3B.2E9D91C0
Content-Type: text/html;
	charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; =
charset=3Diso-8859-1">
<META content=3D"MSHTML 5.50.4207.2601" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>GO HERE CHECK OUT THESE GREAT ITEMS</FONT><FONT=20
face=3D"Times New Roman"> </P></FONT><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>IF YOU OUR INTERESTED IN WHOLESALE PRICES FOR YOUR =
BUSINESS OR=20
FLEAMARKET BUSINESS, THEN EMAIL US AND WE WILL SEND YOU A WHOLE SALE =
PRICE=20
LIST....THAT YOU CAN ORDER ITEMS 1 AT A TIME OR AS MANY AS YOU=20
WANT....</FONT><FONT face=3D"Times New Roman"> </P></FONT><FONT =
color=3D#ff0000=20
size=3D2>
<P align=3Dcenter>START YOUR OWN HOME BUSINESS , SEND FOR YOUR PRICE =
LIST TODAY..=20
AND START MAKING MONEY RIGHT AWAY, WITH YOUR OWN GIFT SHOP, SALE AT =
FLEAMARKETS,=20
</P>
<P align=3Dcenter>PARTYS</FONT><FONT face=3D"Times New Roman"> =
</P></FONT><FONT=20
color=3D#ff0000 size=3D2>
<P align=3Dcenter>OR WHAT EVER YOU WANT...</FONT><FONT face=3D"Times New =
Roman">=20
</P></FONT><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>OR VISIT OUR PRODUCTS PAGE. AND LET US KNOW BY EMAIL =
WHAT YOU=20
WANT, AND WE WILL OFFER YOU A GREAT DISCOUNT ON WHAT YOU WANT =
,,</FONT><FONT=20
face=3D"Times New Roman"> </P></FONT><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>HURRY CHISTMAS IS JUST ABOUT HERE..</FONT><FONT=20
face=3D"Times New Roman"> </P></FONT><FONT color=3D#ff0000 size=3D2>
<P align=3Dcenter>THANK YOU<BR>JAMES MEYERS</FONT><FONT face=3D"Times =
New Roman">=20
</P></FONT><U><FONT color=3D#0000ff size=3D2>
<P align=3Dcenter><A =
href=3D"mailto:jamesmeyers@etex.net">jamesmeyers@etex.net</A>=20
</P>
<P align=3Dcenter></U></FONT><FONT=20
face=3D"Times New Roman">&nbsp;</P></FONT><U><FONT color=3D#0000ff =
size=3D2>
<P=20
align=3Dcenter>&lt;http://members.fortunecity.com/jamesmeyers1&gt;</P></U=
></FONT></DIV></BODY></HTML>

------=_NextPart_000_0007_01C12A3B.2E9D91C0--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue Aug 21 19:23:26 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 21 Aug 2001 11:23:26 -0700 (PDT)
Subject: [Rd] interrupting Sys.sleep (PR#1063)
In-Reply-To: <200108202055.WAA16443@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0108211114160.88898-100000@homer06.u.washington.edu>

On Mon, 20 Aug 2001 tlumley@u.washington.edu wrote:

>
> On Linux R1.3.0 (and current pre1.3.1 and pre1.4.0)
>  Sys.sleep(30)
> interrupt with CTRL-C
>  Sys.sleep(30)
> causes a segmentation fault. It doesn't happen under Windows (2000).
>

The problem is that SleepHandler is not removed if the sleep is
interrupted. The segfault occurs if Sys.sleep() called again, or as soon
as the timer runs out.

It looks as though either do_syssleep needs to handle SIGINT itself or
jump_to_toplevel needs to know about event handlers.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 22 07:27:27 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 22 Aug 2001 08:27:27 +0200 (MET DST)
Subject: [Rd] X11 protocol errors after all x11 devices are closed (PR#1065)
Message-ID: <200108220627.IAA29451@pubhealth.ku.dk>

> x11()
> dev.off()
null device
          1
> x11()
> plot.new()
Warning messages:
1: X11 protocol error: BadAccess (attempt to access private resource denied)
2: X11 protocol error: BadAccess (attempt to access private resource denied)

This only happens if all x11 devices are shut down, so the X11 connection
is restarted.  We had problems with this when the event handlers
were changed prior to 1.3.0, and it looks as if the logic is still
incorrect.

As far as I can see subsequent plots are correct.

Carrying on:

> dev.off()
null device
          1
> x11()
> plot.new()
Warning message:
X11 protocol error: BadAccess (attempt to access private resource denied)

(only one error this time).


--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status =
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed Aug 22 10:50:49 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 22 Aug 2001 11:50:49 +0200
Subject: [Rd] X11 protocol errors after all x11 devices are closed (PR#1065)
In-Reply-To: <200108220627.IAA29451@pubhealth.ku.dk>
References: <200108220627.IAA29451@pubhealth.ku.dk>
Message-ID: <15235.32889.867213.440574@mithrandir.hornik.net>

>>>>> ripley  writes:

>> x11()
>> dev.off()
> null device
>           1
>> x11()
>> plot.new()
> Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)

> This only happens if all x11 devices are shut down, so the X11 connection
> is restarted.  We had problems with this when the event handlers
> were changed prior to 1.3.0, and it looks as if the logic is still
> incorrect.

> As far as I can see subsequent plots are correct.

> Carrying on:

>> dev.off()
> null device
>           1
>> x11()
>> plot.new()
> Warning message:
> X11 protocol error: BadAccess (attempt to access private resource denied)

> (only one error this time).

On Debian GNU/Linux, I do not seem to get the errors:

R> x11()
R> dev.off()
null device 
          1 
R> x11()
R> plot.new()
R> dev.off()
null device 
          1 
R> x11()
R> plot.new()

-k


> --please do not edit the information below--

> Version:
>  platform = sparc-sun-solaris2.7
>  arch = sparc
>  os = solaris2.7
>  system = sparc, solaris2.7
>  status =
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 22
>  language = R

> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maslcgr@bath.ac.uk  Wed Aug 22 12:04:58 2001
From: maslcgr@bath.ac.uk (maslcgr@bath.ac.uk)
Date: Wed, 22 Aug 2001 13:04:58 +0200 (MET DST)
Subject: [Rd] Corrupted binary?? (PR#1066)
Message-ID: <200108221104.NAA03544@pubhealth.ku.dk>


I've tried downloading SetupR.exe from the Bristol site and 
from the Vienna site, and in both cases the file appears to 
have become corrupted ...  do you know whether other users 
have had similar problems?

Thanks

Chris Rogers

-----------------------------------------------------------------------
L C G Rogers, Professor of Probability              tel:+44 1225 826224
Department of Mathematical Sciences                 fax:+44 1225 826492
University of Bath, Bath BA2 7AY, GB

Email: L.C.G.Rogers@bath.ac.uk  web: www.bath.ac.uk/~maslcgr/home.html
-----------------------------------------------------------------------


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Wed Aug 22 13:35:24 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 22 Aug 2001 14:35:24 +0200 (MET DST)
Subject: [Rd] X11 protocol errors after all x11 devices are closed (PR#1065)
Message-ID: <200108221235.OAA05855@pubhealth.ku.dk>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    >> x11()
    >> dev.off()
    BDR> null device
    BDR> 1
    >> x11()
    >> plot.new()
    BDR> Warning messages:
    BDR> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
    BDR> 2: X11 protocol error: BadAccess (attempt to access private resource denied)

    BDR> This only happens if all x11 devices are shut down, so the X11 connection
    BDR> is restarted.  We had problems with this when the event handlers
    BDR> were changed prior to 1.3.0, and it looks as if the logic is still
    BDR> incorrect.

    BDR> As far as I can see subsequent plots are correct.

    BDR> Carrying on:

    >> dev.off()
    BDR> null device
    BDR> 1
    >> x11()
    >> plot.new()
    BDR> Warning message:
    BDR> X11 protocol error: BadAccess (attempt to access private resource denied)
    BDR> (only one error this time).

Just this morning,
I found (again!, we had something close to this before) 
the following related bugous behavior :
After interrupting a plot (which would have taken a few minutes and was
"wrong" anyway), starting another plot, interrupting again [with C-c],
and maybe the same once more,
R started just giving a ">" prompt
but did not react any further at all.
(C-c would return the prompt, but no other reaction was possible)
Only killing the R process helped.

I may try to reproduce more exactly later today.
Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Vogels <tov@ece.cmu.edu>  Wed Aug 22 16:07:53 2001
From: Thomas Vogels <tov@ece.cmu.edu> (Thomas Vogels)
Date: 22 Aug 2001 11:07:53 -0400
Subject: [Rd] X11 protocol errors after all x11 devices are closed (PR#1065)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Wed, 22 Aug 2001 08:27:27 +0200 (MET DST)"
References: <200108220627.IAA29451@pubhealth.ku.dk>
Message-ID: <pxzo8sgmk6.fsf@infiniti.ece.cmu.edu>


ripley@stats.ox.ac.uk writes:

> > x11()
> > dev.off()
> null device
>           1
> > x11()
> > plot.new()
> Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 
> This only happens if all x11 devices are shut down, so the X11 connection
> is restarted.  We had problems with this when the event handlers
> were changed prior to 1.3.0, and it looks as if the logic is still
> incorrect.
> 
> As far as I can see subsequent plots are correct.
> 
> Carrying on:
> 
> > dev.off()
> null device
>           1
> > x11()
> > plot.new()
> Warning message:
> X11 protocol error: BadAccess (attempt to access private resource denied)
> 
> (only one error this time).


I see the same thing on an AIX machine with the patched R-release of
yesterday.  I've recently noticed this problem when I tried to change
the colortype.  For this you have to shutdown all devices, then I got
the error messages.  I figured this might be an "AIX" thing at
first...

Possibly related (if not, I'll file separate bug reports):

1) I cannot reset the colortype.  When I run out of colors, I used to
   be able to just shutdown all devices, then restart with
   x11(colortype=....).  Now I get:

R> x11()
R> plot(1:100,col=rainbow(100))
Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  : 
        Error: X11 cannot allocate additional graphics colors.
Consider using X11 with colortype="pseudo.cube" or "gray".
R> dev.off()
null device 
          1 
R> x11(colortype="pseudo.cube")
R> plot(1:100,col=rainbow(100))
Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  : 
        Error: X11 cannot allocate additional graphics colors.
Consider using X11 with colortype="pseudo.cube" or "gray".
In addition: Warning messages: 
1: X11 protocol error: BadAccess (attempt to access private resource denied) 
2: X11 protocol error: BadAccess (attempt to access private resource denied) 
3: X11 protocol error: BadAccess (attempt to access private resource denied) 
R> dev.off()
null device 
          1 
R> x11(colortype="gray")
R> plot(1:100,col=rainbow(100))
Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  : 
        Error: X11 cannot allocate additional graphics colors.
Consider using X11 with colortype="pseudo.cube" or "gray".
In addition: Warning messages: 
1: X11 protocol error: BadAccess (attempt to access private resource denied) 
2: X11 protocol error: BadAccess (attempt to access private resource denied) 
3: X11 protocol error: BadAccess (attempt to access private resource denied) 
R> dev.off()
null device 
          1 


2) Plots are not updated if the window is made visible (from being
   partially obscured) during a computation before or during the plot.
   Let's say my xterm (or emacs window) covers the north-west quadrant
   of R's x11 device window.  Then:

R> data(iris)
R> pairs(iris[,1:4])

   While pairs is drawing, I bring the device window to the front.
   All plots that were drawn by pairs will not be redrawn once pairs
   is done.  So I have to push the device window in the back, then
   bring it to the front again to force a redraw/refresh.

   This gets really annoying when you have two X11 devices open.  If
   you bring the inactive one to the front while R is busy plotting on
   the active device, the inactive one will not be redrawn/refreshed
   once plotting is done.  Just white space staring back at you...

Regards,
  -tom



R> R.version
         _                     
platform powerpc-ibm-aix4.3.1.0
arch     powerpc               
os       aix4.3.1.0            
system   powerpc, aix4.3.1.0   
status   Patched               
major    1                     
minor    3.0                   
year     2001                  
month    08                    
day      21                    
language R                     


-- 
mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Aug 22 18:27:05 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 22 Aug 2001 18:27:05 +0100 (BST)
Subject: [Rd] X11 protocol errors after all x11 devices are closed
 (PR#1065)
In-Reply-To: <pxzo8sgmk6.fsf@infiniti.ece.cmu.edu>
Message-ID: <Pine.GSO.4.31.0108221824520.29653-100000@auk.stats>

Tom,

Thanks.  Yes, I think 1) is related, and the original bug seems only to
happen on pseudocolor screens (which I was using).

I suspect that narrows it down enough for me to find it.

Brian

On 22 Aug 2001, Thomas Vogels wrote:

>
> ripley@stats.ox.ac.uk writes:
>
> > > x11()
> > > dev.off()
> > null device
> >           1
> > > x11()
> > > plot.new()
> > Warning messages:
> > 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> > 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> >
> > This only happens if all x11 devices are shut down, so the X11 connection
> > is restarted.  We had problems with this when the event handlers
> > were changed prior to 1.3.0, and it looks as if the logic is still
> > incorrect.
> >
> > As far as I can see subsequent plots are correct.
> >
> > Carrying on:
> >
> > > dev.off()
> > null device
> >           1
> > > x11()
> > > plot.new()
> > Warning message:
> > X11 protocol error: BadAccess (attempt to access private resource denied)
> >
> > (only one error this time).
>
>
> I see the same thing on an AIX machine with the patched R-release of
> yesterday.  I've recently noticed this problem when I tried to change
> the colortype.  For this you have to shutdown all devices, then I got
> the error messages.  I figured this might be an "AIX" thing at
> first...
>
> Possibly related (if not, I'll file separate bug reports):
>
> 1) I cannot reset the colortype.  When I run out of colors, I used to
>    be able to just shutdown all devices, then restart with
>    x11(colortype=....).  Now I get:
>
> R> x11()
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> R> dev.off()
> null device
>           1
> R> x11(colortype="pseudo.cube")
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> In addition: Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 3: X11 protocol error: BadAccess (attempt to access private resource denied)
> R> dev.off()
> null device
>           1
> R> x11(colortype="gray")
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> In addition: Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 3: X11 protocol error: BadAccess (attempt to access private resource denied)
> R> dev.off()
> null device
>           1
>
>
> 2) Plots are not updated if the window is made visible (from being
>    partially obscured) during a computation before or during the plot.
>    Let's say my xterm (or emacs window) covers the north-west quadrant
>    of R's x11 device window.  Then:
>
> R> data(iris)
> R> pairs(iris[,1:4])
>
>    While pairs is drawing, I bring the device window to the front.
>    All plots that were drawn by pairs will not be redrawn once pairs
>    is done.  So I have to push the device window in the back, then
>    bring it to the front again to force a redraw/refresh.
>
>    This gets really annoying when you have two X11 devices open.  If
>    you bring the inactive one to the front while R is busy plotting on
>    the active device, the inactive one will not be redrawn/refreshed
>    once plotting is done.  Just white space staring back at you...
>
> Regards,
>   -tom
>
>
>
> R> R.version
>          _
> platform powerpc-ibm-aix4.3.1.0
> arch     powerpc
> os       aix4.3.1.0
> system   powerpc, aix4.3.1.0
> status   Patched
> major    1
> minor    3.0
> year     2001
> month    08
> day      21
> language R
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From heydebre@molgen.mpg.de  Wed Aug 22 19:29:29 2001
From: heydebre@molgen.mpg.de (heydebre@molgen.mpg.de)
Date: Wed, 22 Aug 2001 20:29:29 +0200 (MET DST)
Subject: [Rd] cutree (PR#1067)
Message-ID: <200108221829.UAA08571@pubhealth.ku.dk>

Full_Name: Anja von Heydebreck
Version: 1.3.0
OS: Alpha Unix
Submission from: (NULL) (141.14.19.61)


Hi,

I repeatedly obtained meaningless results from the function 'cutree' 
in the 'mva' package, when the argument 'h' was greater or equal to 
the maximum height occuring: 

> library('mva')
> y
     [,1] [,2] [,3] [,4]
[1,]    0    1   -1    1
[2,]    0   -1    1    0
[3,]    0   -1    1    1
[4,]   -1   -2    1    0
> d <- dist(y, method="manhattan")
> hc <- hclust(d, method = "complete")
> hc$height
[1] 1 3 7
> cluster <- cutree(hc, h=max(hc$height))
> cluster
[1] 1108612352          1 1074517880          1

Best regards,

Anja


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Thu Aug 23 01:32:51 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Wed, 22 Aug 2001 19:32:51 -0500
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <200108221235.OAA05855@pubhealth.ku.dk>; from maechler@stat.math.ethz.ch on Wed, Aug 22, 2001 at 02:35:24PM +0200
References: <200108221235.OAA05855@pubhealth.ku.dk>
Message-ID: <20010822193251.A10682@nokomis.stat.umn.edu>

Martin wrote:

> Just this morning,
> I found (again!, we had something close to this before) 
> the following related bugous behavior :
> After interrupting a plot (which would have taken a few minutes and was
> "wrong" anyway), starting another plot, interrupting again [with C-c],
> and maybe the same once more,
> R started just giving a ">" prompt
> but did not react any further at all.
> (C-c would return the prompt, but no other reaction was possible)
> Only killing the R process helped.
> 
> I may try to reproduce more exactly later today.

I'm surprised we don't get more of these sorts of things on UNIX.  Our
current UNIX interrupt handling approach takes an immediate LONGJMP
out of the signal handler no matter where the signal occurs (except
for two places where signals are suspended).  Any place where an
invariant is temporarily broken, any place where an assignment is not
yet complete, is a potential trouble spot.

I've been meaning to raise this issue at some point: I think we will
need to eventually spend some time re-examining how we want to handle
interrupts.  Right now on Windows/Mac interrupts are only processed at
special points in the evaluation process, which is a bit restrictive
(but perhaps unavoidable due to OS limitations).  On UNIX on the other
hand we LONGJUMP out of the signal handler except for the very few
places where the signal gets masked temporarily (GC and one place in
graphics I believe).  The UNIX approach is much too loose even now,
and it becomes even more untenable if we add any kind of threading
support.

We will I think have to come up with a cleaner model for very
selectively enabling interrupt processing, perhaps with some
integration with the external function registration mechanism Duncan
added recently (e.g. marking a function as one where LONGJMP's are
safe).  We will also need some means of controlling interrupt
behaviour from R, such as having some sort of without.interrupts and
with.interrupts functions to be able to program reliable interaction
with interrupts at the R level. (Another sort of thing we might
consider is suspending interrupts during on.exit processing.)

It's a farily big can of worms, and probably not urgent for now, but
we will need to look at it eventually.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Thu Aug 23 01:32:59 2001
From: luke@nokomis.stat.umn.edu (luke@nokomis.stat.umn.edu)
Date: Thu, 23 Aug 2001 02:32:59 +0200 (MET DST)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...) (PR#1068)
Message-ID: <200108230032.CAA09962@pubhealth.ku.dk>

Martin wrote:

> Just this morning,
> I found (again!, we had something close to this before) 
> the following related bugous behavior :
> After interrupting a plot (which would have taken a few minutes and was
> "wrong" anyway), starting another plot, interrupting again [with C-c],
> and maybe the same once more,
> R started just giving a ">" prompt
> but did not react any further at all.
> (C-c would return the prompt, but no other reaction was possible)
> Only killing the R process helped.
> 
> I may try to reproduce more exactly later today.

I'm surprised we don't get more of these sorts of things on UNIX.  Our
current UNIX interrupt handling approach takes an immediate LONGJMP
out of the signal handler no matter where the signal occurs (except
for two places where signals are suspended).  Any place where an
invariant is temporarily broken, any place where an assignment is not
yet complete, is a potential trouble spot.

I've been meaning to raise this issue at some point: I think we will
need to eventually spend some time re-examining how we want to handle
interrupts.  Right now on Windows/Mac interrupts are only processed at
special points in the evaluation process, which is a bit restrictive
(but perhaps unavoidable due to OS limitations).  On UNIX on the other
hand we LONGJUMP out of the signal handler except for the very few
places where the signal gets masked temporarily (GC and one place in
graphics I believe).  The UNIX approach is much too loose even now,
and it becomes even more untenable if we add any kind of threading
support.

We will I think have to come up with a cleaner model for very
selectively enabling interrupt processing, perhaps with some
integration with the external function registration mechanism Duncan
added recently (e.g. marking a function as one where LONGJMP's are
safe).  We will also need some means of controlling interrupt
behaviour from R, such as having some sort of without.interrupts and
with.interrupts functions to be able to program reliable interaction
with interrupts at the R level. (Another sort of thing we might
consider is suspending interrupts during on.exit processing.)

It's a farily big can of worms, and probably not urgent for now, but
we will need to look at it eventually.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jwe@bevo.che.wisc.edu  Thu Aug 23 03:56:33 2001
From: jwe@bevo.che.wisc.edu (John W. Eaton)
Date: Wed, 22 Aug 2001 21:56:33 -0500
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010822193251.A10682@nokomis.stat.umn.edu>
References: <200108221235.OAA05855@pubhealth.ku.dk>
 <20010822193251.A10682@nokomis.stat.umn.edu>
Message-ID: <15236.28897.468790.842201@ricotta.che.wisc.edu>

On 22-Aug-2001, Luke Tierney <luke@nokomis.stat.umn.edu> wrote:

| We will I think have to come up with a cleaner model for very
| selectively enabling interrupt processing, perhaps with some
| integration with the external function registration mechanism Duncan
| added recently (e.g. marking a function as one where LONGJMP's are
| safe).

FWIW, Octave doesn't do this correctly either, it just does a longjmp,
same as R, which can result in leaking memory, and possibly other bad
things.

The way Bash handles this is to only set a flag in the handler for
SIGINT, then at safe places in the code, there are

  QUIT;

statements.  These are macros that expand to some code that may
longjump somewhere depending on the interrupt state.  This method
avoids the problems of jumping out of the signal handler, which may
result in memory leaks or inconsistencies in global state.  The hard
part is inserting the (many!) QUIT statements, though it is probably
somewhat easier if this type of choice is made early on in the life of
the program instead of late.

I only mention Bash because it is a program that is expected to
handle a lot of interrupts without leaking memory or crashing, and
seems to do so reasonably well.

Packages like R and Octave also have to be able to handle interrupts
in calls Fortran or C code that may run for a long time, and which
cannot be modified (at least not easily) to add the equivalent QUIT
calls.  I'm not sure what the right solution is for cases like that.

jwe

-- 
www.octave.org        | Unfortunately we were hoplessly optimistic in 1954
www.che.wisc.edu/~jwe | about the problems of debugging FORTRAN programs.
                      |                                       -- J. Backus
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jwe@bevo.che.wisc.edu  Thu Aug 23 03:57:12 2001
From: jwe@bevo.che.wisc.edu (jwe@bevo.che.wisc.edu)
Date: Thu, 23 Aug 2001 04:57:12 +0200 (MET DST)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...) (PR#1069)
Message-ID: <200108230257.EAA10185@pubhealth.ku.dk>

On 22-Aug-2001, Luke Tierney <luke@nokomis.stat.umn.edu> wrote:

| We will I think have to come up with a cleaner model for very
| selectively enabling interrupt processing, perhaps with some
| integration with the external function registration mechanism Duncan
| added recently (e.g. marking a function as one where LONGJMP's are
| safe).

FWIW, Octave doesn't do this correctly either, it just does a longjmp,
same as R, which can result in leaking memory, and possibly other bad
things.

The way Bash handles this is to only set a flag in the handler for
SIGINT, then at safe places in the code, there are

  QUIT;

statements.  These are macros that expand to some code that may
longjump somewhere depending on the interrupt state.  This method
avoids the problems of jumping out of the signal handler, which may
result in memory leaks or inconsistencies in global state.  The hard
part is inserting the (many!) QUIT statements, though it is probably
somewhat easier if this type of choice is made early on in the life of
the program instead of late.

I only mention Bash because it is a program that is expected to
handle a lot of interrupts without leaking memory or crashing, and
seems to do so reasonably well.

Packages like R and Octave also have to be able to handle interrupts
in calls Fortran or C code that may run for a long time, and which
cannot be modified (at least not easily) to add the equivalent QUIT
calls.  I'm not sure what the right solution is for cases like that.

jwe

-- 
www.octave.org        | Unfortunately we were hoplessly optimistic in 1954
www.che.wisc.edu/~jwe | about the problems of debugging FORTRAN programs.
                      |                                       -- J. Backus

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Thu Aug 23 05:31:37 2001
From: jerome@stat.ubc.ca (jerome@stat.ubc.ca)
Date: Thu, 23 Aug 2001 06:31:37 +0200 (MET DST)
Subject: [Rd] cex.axis in barplot() (PR#1070)
Message-ID: <200108230431.GAA10293@pubhealth.ku.dk>

Full_Name: Jerome Asselin
Version: 1.3.0
OS: Windows 98
Submission from: (NULL) (24.77.112.193)


I have a hard time to magnify the axis annotations in barplot()
Here are some examples:

#This one has no effect.
barplot(1:3,names.arg=1:3,cex.axis=3,xlab="x",ylab="y")
#This one magnifies the x and y labels
barplot(1:3,names.arg=1:3,cex.lab=3,xlab="x",ylab="y")
#This one has no effect.
barplot(1:3,names.arg=1:3,cex=3,xlab="x",ylab="y")

Maybe this could be added to the "wish list".

I assume that I will be able to create my own axis with
the axis() function.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu Aug 23 07:52:24 2001
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 23 Aug 2001 08:52:24 +0200
Subject: [Rd] cex.axis in barplot() (PR#1070)
References: <200108230431.GAA10293@pubhealth.ku.dk>
Message-ID: <3B84A828.E57B14DC@statistik.uni-dortmund.de>

jerome@stat.ubc.ca wrote:
> 
> Full_Name: Jerome Asselin
> Version: 1.3.0
> OS: Windows 98
> Submission from: (NULL) (24.77.112.193)
> 
> I have a hard time to magnify the axis annotations in barplot()
> Here are some examples:
> 
> #This one has no effect.
> barplot(1:3,names.arg=1:3,cex.axis=3,xlab="x",ylab="y")


>From the help:
 ...  further graphical parameters (par) are passed to plot.window() and
title(). 
[let me add: ... and not to axis()...]

But you can use:

 par(cex.axis=3)
 barplot(1:3, names.arg=1:3, xlab="x", ylab="y")


> #This one magnifies the x and y labels
> barplot(1:3,names.arg=1:3,cex.lab=3,xlab="x",ylab="y")

... as expected.


> #This one has no effect.
> barplot(1:3,names.arg=1:3,cex=3,xlab="x",ylab="y")

In this case (no symbols are drawn inside the plot, ...) also expected.

 
> Maybe this could be added to the "wish list".
> 
> I assume that I will be able to create my own axis with
> the axis() function.


Without looking at the code not so easy as the workaround described
above. An example:

  barplot(1:3, names.arg=1:3, xlab="x", ylab="y")
  axis(1, at=1:3)


Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jerome@stat.ubc.ca  Thu Aug 23 10:46:46 2001
From: jerome@stat.ubc.ca (Jerome Asselin)
Date: Thu, 23 Aug 2001 02:46:46 -0700 (PDT)
Subject: [Rd] cex.axis in barplot() (PR#1070)
In-Reply-To: <3B84A828.E57B14DC@statistik.uni-dortmund.de>
Message-ID: <Pine.GSO.3.96.1010823024300.13312A-100000@hajek.stat.ubc.ca>


On Thu, 23 Aug 2001, Uwe Ligges wrote:

> jerome@stat.ubc.ca wrote:
> > 
> > Full_Name: Jerome Asselin
> > Version: 1.3.0
> > OS: Windows 98
> > Submission from: (NULL) (24.77.112.193)
> > 
> > I have a hard time to magnify the axis annotations in barplot()
> > Here are some examples:
> > 
> > #This one has no effect.
> > barplot(1:3,names.arg=1:3,cex.axis=3,xlab="x",ylab="y")
> 
> 
> >From the help:
>  ...  further graphical parameters (par) are passed to plot.window() and
> title(). 
> [let me add: ... and not to axis()...]

I did not realize that it wouldn't work because barplot() passes the
parameters to plot.window() or title(). Sorry about that.

> 
> But you can use:
> 
>  par(cex.axis=3)
>  barplot(1:3, names.arg=1:3, xlab="x", ylab="y")
> 

Thanks for the tip!

Jerome Asselin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Thu Aug 23 13:10:54 2001
From: fharrell@virginia.edu (fharrell@virginia.edu)
Date: Thu, 23 Aug 2001 08:10:54 -0400
Subject: [Rd] Fortran routines from LINPACK in S+ but not R
Message-ID: <3B84F2CE.695A20B0@virginia.edu>

Dear R Developers,

I should have had the Design library running in R by now but
have kept putting off changing some calls to LINPACK routines
to use those builtin to R.  Specifically I call dqrsl1 and dqr.
Would it be an easy task to put those in the next release of
R?  If not I'll finally bite the bullet and get back into
reading LINPACK documentation (which I have but haven't
examined in depth). 

If dqrsl1 and dqr are not truly parts of LINPACK but are
front-ends to routines that are, and if anyone has
those front-ends to share, that would also solve my problem
immediately.

Thanks -Frank
-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Thu Aug 23 13:16:09 2001
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Thu, 23 Aug 2001 08:16:09 -0400
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010822193251.A10682@nokomis.stat.umn.edu>
References: <200108221235.OAA05855@pubhealth.ku.dk> <20010822193251.A10682@nokomis.stat.umn.edu>
Message-ID: <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com>

On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
>I'm surprised we don't get more of these sorts of things on UNIX.  Our
>current UNIX interrupt handling approach takes an immediate LONGJMP
>out of the signal handler no matter where the signal occurs (except
>for two places where signals are suspended).  Any place where an
>invariant is temporarily broken, any place where an assignment is not
>yet complete, is a potential trouble spot.

Delphi protects against these kind of errors with "try ... except ..."
and "try ... finally ..." blocks to deal with exceptions.  The first
one executes special code if an exception occurs, the second
guarantees execution of cleanup code.

These are implemented as a linked list of records on the stack which
the exception handler knows how to interpret.  When a particular kind
of exception occurs, all "finally" blocks are executed in the
appropriate order (and the stack base pointer is moved to simulate
exits from all active routines) until an "except" block handling the
particular kind of exception is reached.

C doesn't have these statements built in, but presumably someone has
written macros to do the same sort of thing.  Adding them would be a
lot of work, but would be worthwhile.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 23 13:27:22 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 23 Aug 2001 13:27:22 +0100 (BST)
Subject: [Rd] Fortran routines from LINPACK in S+ but not R
In-Reply-To: <3B84F2CE.695A20B0@virginia.edu>
Message-ID: <Pine.LNX.4.31.0108231317420.27971-100000@gannet.stats>

On Thu, 23 Aug 2001 fharrell@virginia.edu wrote:

> Dear R Developers,
>
> I should have had the Design library running in R by now but
> have kept putting off changing some calls to LINPACK routines
> to use those builtin to R.  Specifically I call dqrsl1 and dqr.
> Would it be an easy task to put those in the next release of
> R?  If not I'll finally bite the bullet and get back into
> reading LINPACK documentation (which I have but haven't
> examined in depth).
>
> If dqrsl1 and dqr are not truly parts of LINPACK but are
> front-ends to routines that are, and if anyone has
> those front-ends to share, that would also solve my problem
> immediately.

I am pretty sure that they are not part of LINPACK: certainly dqr is not
and neither has a LINPACK name.  dqr is called by qr.default in S-PLUS,
and you should find dqrdc2 (also not LINPACK) called by R's qr an adequate
substitute.

As for dqrsl1, I've never known exactly what it supposed to do.
Would dqrsl (which is there) suffice?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Thu Aug 23 13:54:31 2001
From: fharrell@virginia.edu (fharrell@virginia.edu)
Date: Thu, 23 Aug 2001 08:54:31 -0400
Subject: [Rd] Fortran routines from LINPACK in S+ but not R
References: <Pine.LNX.4.31.0108231317420.27971-100000@gannet.stats>
Message-ID: <3B84FD07.B056ED1B@virginia.edu>

Prof Brian Ripley wrote:
> 
> On Thu, 23 Aug 2001 fharrell@virginia.edu wrote:
> 
> > Dear R Developers,
> >
> > I should have had the Design library running in R by now but
> > have kept putting off changing some calls to LINPACK routines
> > to use those builtin to R.  Specifically I call dqrsl1 and dqr.
> > Would it be an easy task to put those in the next release of
> > R?  If not I'll finally bite the bullet and get back into
> > reading LINPACK documentation (which I have but haven't
> > examined in depth).
> >
> > If dqrsl1 and dqr are not truly parts of LINPACK but are
> > front-ends to routines that are, and if anyone has
> > those front-ends to share, that would also solve my problem
> > immediately.
> 
> I am pretty sure that they are not part of LINPACK: certainly dqr is not
> and neither has a LINPACK name.  dqr is called by qr.default in S-PLUS,
> and you should find dqrdc2 (also not LINPACK) called by R's qr an adequate
> substitute.

Thanks

> 
> As for dqrsl1, I've never known exactly what it supposed to do.
> Would dqrsl (which is there) suffice?

It probably will, after I get into it.  Calls are very different
on the surface.  Thanks -Frank

> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 23 15:27:07 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 23 Aug 2001 16:27:07 +0200 (MET DST)
Subject: (PR#1065)[Rd] X11 protocol errors after all x11 devices are
Message-ID: <200108231427.QAA19349@pubhealth.ku.dk>

I've fixed the original report and Tom's first.   Someone had incorrrectly
arranged for most of the initialization to be done only once per session.
I did ask before 1.3.0 what the intention was ....  For pseudocolor devices
at least this was biting since the palette was not re-initialized.

I don't see point two on my system, and Martin's point about interruption
was first shown to me by Guido a year ago, so is unrelated.

I am going to close this topic: Tom and Martin feel free to re-submit
your reports separately.

Brian



On 22 Aug 2001, Thomas Vogels wrote:

>
> ripley@stats.ox.ac.uk writes:
>
> > > x11()
> > > dev.off()
> > null device
> >           1
> > > x11()
> > > plot.new()
> > Warning messages:
> > 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> > 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> >
> > This only happens if all x11 devices are shut down, so the X11 connection
> > is restarted.  We had problems with this when the event handlers
> > were changed prior to 1.3.0, and it looks as if the logic is still
> > incorrect.
> >
> > As far as I can see subsequent plots are correct.
> >
> > Carrying on:
> >
> > > dev.off()
> > null device
> >           1
> > > x11()
> > > plot.new()
> > Warning message:
> > X11 protocol error: BadAccess (attempt to access private resource denied)
> >
> > (only one error this time).
>
>
> I see the same thing on an AIX machine with the patched R-release of
> yesterday.  I've recently noticed this problem when I tried to change
> the colortype.  For this you have to shutdown all devices, then I got
> the error messages.  I figured this might be an "AIX" thing at
> first...
>
> Possibly related (if not, I'll file separate bug reports):
>
> 1) I cannot reset the colortype.  When I run out of colors, I used to
>    be able to just shutdown all devices, then restart with
>    x11(colortype=....).  Now I get:
>
> R> x11()
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> R> dev.off()
> null device
>           1
> R> x11(colortype="pseudo.cube")
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> In addition: Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 3: X11 protocol error: BadAccess (attempt to access private resource denied)
> R> dev.off()
> null device
>           1
> R> x11(colortype="gray")
> R> plot(1:100,col=rainbow(100))
> Error in plot.xy(xy, type, col = col, pch = pch, cex = cex, bg = bg, lty = lty,  :
>         Error: X11 cannot allocate additional graphics colors.
> Consider using X11 with colortype="pseudo.cube" or "gray".
> In addition: Warning messages:
> 1: X11 protocol error: BadAccess (attempt to access private resource denied)
> 2: X11 protocol error: BadAccess (attempt to access private resource denied)
> 3: X11 protocol error: BadAccess (attempt to access private resource denied)
> R> dev.off()
> null device
>           1
>
>
> 2) Plots are not updated if the window is made visible (from being
>    partially obscured) during a computation before or during the plot.
>    Let's say my xterm (or emacs window) covers the north-west quadrant
>    of R's x11 device window.  Then:
>
> R> data(iris)
> R> pairs(iris[,1:4])
>
>    While pairs is drawing, I bring the device window to the front.
>    All plots that were drawn by pairs will not be redrawn once pairs
>    is done.  So I have to push the device window in the back, then
>    bring it to the front again to force a redraw/refresh.
>
>    This gets really annoying when you have two X11 devices open.  If
>    you bring the inactive one to the front while R is busy plotting on
>    the active device, the inactive one will not be redrawn/refreshed
>    once plotting is done.  Just white space staring back at you...
>
> Regards,
>   -tom
>
>
>
> R> R.version
>          _
> platform powerpc-ibm-aix4.3.1.0
> arch     powerpc
> os       aix4.3.1.0
> system   powerpc, aix4.3.1.0
> status   Patched
> major    1
> minor    3.0
> year     2001
> month    08
> day      21
> language R
>
>
> --
> mailto:tov@ece.cmu.edu (Tom Vogels)   Tel: (412) 268-6638   FAX: -3204
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 23 15:38:21 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 23 Aug 2001 16:38:21 +0200 (MET DST)
Subject: [Rd] cex.axis in barplot() (PR#1070)
Message-ID: <200108231438.QAA19530@pubhealth.ku.dk>

I've added a note to the help page for R-patched giving Uwe's workaround,
and will shortly parse ... for R-devel so cex.axis can be inlined.



On Thu, 23 Aug 2001, Uwe Ligges wrote:

> jerome@stat.ubc.ca wrote:
> >
> > Full_Name: Jerome Asselin
> > Version: 1.3.0
> > OS: Windows 98
> > Submission from: (NULL) (24.77.112.193)
> >
> > I have a hard time to magnify the axis annotations in barplot()
> > Here are some examples:
> >
> > #This one has no effect.
> > barplot(1:3,names.arg=1:3,cex.axis=3,xlab="x",ylab="y")
>
>
> >From the help:
>  ...  further graphical parameters (par) are passed to plot.window() and
> title().
> [let me add: ... and not to axis()...]
>
> But you can use:
>
>  par(cex.axis=3)
>  barplot(1:3, names.arg=1:3, xlab="x", ylab="y")
>
>
> > #This one magnifies the x and y labels
> > barplot(1:3,names.arg=1:3,cex.lab=3,xlab="x",ylab="y")
>
> ... as expected.
>
>
> > #This one has no effect.
> > barplot(1:3,names.arg=1:3,cex=3,xlab="x",ylab="y")
>
> In this case (no symbols are drawn inside the plot, ...) also expected.
>
>
> > Maybe this could be added to the "wish list".
> >
> > I assume that I will be able to create my own axis with
> > the axis() function.
>
>
> Without looking at the code not so easy as the workaround described
> above. An example:
>
>   barplot(1:3, names.arg=1:3, xlab="x", ylab="y")
>   axis(1, at=1:3)
>
>
> Uwe Ligges
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Thu Aug 23 15:39:37 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Thu, 23 Aug 2001 09:39:37 -0500
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com>; from dmurdoch@pair.com on Thu, Aug 23, 2001 at 08:16:09AM -0400
References: <200108221235.OAA05855@pubhealth.ku.dk> <20010822193251.A10682@nokomis.stat.umn.edu> <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com>
Message-ID: <20010823093937.A12583@nokomis.stat.umn.edu>

On Thu, Aug 23, 2001 at 08:16:09AM -0400, Duncan Murdoch wrote:
> On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
> >I'm surprised we don't get more of these sorts of things on UNIX.  Our
> >current UNIX interrupt handling approach takes an immediate LONGJMP
> >out of the signal handler no matter where the signal occurs (except
> >for two places where signals are suspended).  Any place where an
> >invariant is temporarily broken, any place where an assignment is not
> >yet complete, is a potential trouble spot.
> 
> Delphi protects against these kind of errors with "try ... except ..."
> and "try ... finally ..." blocks to deal with exceptions.  The first
> one executes special code if an exception occurs, the second
> guarantees execution of cleanup code.
> 
> These are implemented as a linked list of records on the stack which
> the exception handler knows how to interpret.  When a particular kind
> of exception occurs, all "finally" blocks are executed in the
> appropriate order (and the stack base pointer is moved to simulate
> exits from all active routines) until an "except" block handling the
> particular kind of exception is reached.
> 
> C doesn't have these statements built in, but presumably someone has
> written macros to do the same sort of thing.  Adding them would be a
> lot of work, but would be worthwhile.
> 

I'm talking about something related but different: controlling the
point at which an asynchronous signal is brought into the system (and
turned into an exception if we have a proper exception system.)  R
currently has on.exit, and Robert Gentleman and I proposed a more
structured exception mechanism for possible addition to R in the neas
future.

[I sent a posting about the proposed mechanism a while back.  So far
we have received little feedback, so here is another request: Please
have a look at http://www.stat.umn.edu/~luke/R/exceptions/simpcond.html
and let us know if you have any comments/suggestions]

But that is not the issue here.  The issue is whether we allow a
SIGINT signal in UNIX (and whatever its analog is on other systems) to
interrupt the current calculation immediately, no matter where it
might be, or whether we impose more structure.  Windows/Mac pretty
much force more structure at the C level, since their analogs have to
arrive through mechnisms that require explicit polling.  So on Windows
you know that an expression like

	x = malloc(n)

will not get interrupted between the malloc call and the assignment to
x (unless some very low level tricks are involved).  On UNIX, the
signal can arrive in between those two operations.

The safe thing to do on UNIX is to have the signal handler just set a
flag which is then checked at appropriate points.  This is the
approach that John Eaton mentioned, and is used by most Scheme systems
I've looked at.  I suspect Python and Perl do this as well, but I'll
have to check.  This is also the way Java handles thread interrupts.
It would make the UNIX behavior identical to the WIndows behavior.

The drawback for systems like R and Octave is that we rely on being
able to use chunks of C/Fortran that can potentially run for a long
time (forever if they happen to get into infinite loops occasionally)
and where it is either impractical or impossible to insert flag
checking code.  For those situations it is nice to be able to use a
signal handler to force a jump out of that code.  We live without this
ability on Windows/Mac, and don't do too badly there, but it would be
nice not to compltely loose this facility on UNIX. Most numerical code
tends to not behave too badly when exited by a longjmp, but there are
no guarantees.  For example, if a piece of C code does something like this:

	static inited = FALSE;
	if (! inited) {
	    inited = TRUE;
	    ... initialize a table needed for computations ...
        }
        ... use the table ..

and a Control-C arrives in the first call after inited=TRUE is executad
but before the table is fully initialized, then future calls to this
function will happily return nonsense.

One option would be to tag routines at library regestration time as
safe for LONGJMP's or not.  That way we can disable LONGJUMP
interrupts everywhere except in explicitly marked .C or .Fortran calls
(and blocking IO operations). This will insure that no internal R
state gets messed up by asynchronous signals that arrive at on
inopportune time.

But this only addresses the C level.  On Windows/Mac, the place where
a user break is turned into an R exception is (mainly) in the internal
eval, where every 1000 calculatins (or some such number) the flag is
checked and a jump is done if the flag is set.  UNIX would work the
same way.  Since the internals know exactly where this jump can occur,
unlike jumps out of a signal handler, they can make sure all internal
state is consistent before checking the flag.

>From the R level things look different: the 1000'th eval step can
happen anywhere, so a piece of R code that does

	file <- file(file, "w")
        on.exit(close(file))
        ... do something with file ...

has a race condition: an interrupt that arrives between the creation
of the file and the registration of the on.exit handler will leave
the file open.  Something along the lines of

	without.interrupts({
            file <- file(file, "w")
            on.exit(close(file))
            with.interrupts(... do something with file ...)
        })

would be safe but is too awkward in this form. [Using a structured
exception handling mechanism, some sort of try/finally construct,
would make this code cleaner but would not resolve the race
condition.]

There are no easy solutions I think, but we need to look at a range of
options and see what works best.

[Threads add the additional problem that an interrupted thread might
be holding a lock, and failure to release the lock could cause
deadlock.  Using a structured exception handling mechanism to manage
lock release helps, but race conditions are still potentially an issue
with asynchronous interrupts.]

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Thu Aug 23 16:40:53 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Thu, 23 Aug 2001 08:40:53 -0700
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com>
Message-ID: <200108231540.IAA77857@pine.frazmtn.com>

You can get the macros from "C Interfaces and Implementations" by
David Hanson, Chapter 4. He has some references to other C work
by Eric Roberts and Steve Maguire on this.

On Thursday, August 23, 2001, at 05:16 AM, Duncan Murdoch wrote:

> On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
>> I'm surprised we don't get more of these sorts of things on UNIX.  Our
>> current UNIX interrupt handling approach takes an immediate LONGJMP
>> out of the signal handler no matter where the signal occurs (except
>> for two places where signals are suspended).  Any place where an
>> invariant is temporarily broken, any place where an assignment is not
>> yet complete, is a potential trouble spot.
>
> Delphi protects against these kind of errors with "try ... except ..."
> and "try ... finally ..." blocks to deal with exceptions.  The first
> one executes special code if an exception occurs, the second
> guarantees execution of cleanup code.
>
> These are implemented as a linked list of records on the stack which
> the exception handler knows how to interpret.  When a particular kind
> of exception occurs, all "finally" blocks are executed in the
> appropriate order (and the stack base pointer is moved to simulate
> exits from all active routines) until an "except" block handling the
> particular kind of exception is reached.
>
> C doesn't have these statements built in, but presumably someone has
> written macros to do the same sort of thing.  Adding them would be a
> lot of work, but would be worthwhile.
>
> Duncan Murdoch
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Thu Aug 23 16:50:31 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Thu, 23 Aug 2001 08:50:31 -0700 (PDT)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010823093937.A12583@nokomis.stat.umn.edu>
Message-ID: <Pine.A41.4.33.0108230843490.135314-100000@homer05.u.washington.edu>

On Thu, 23 Aug 2001, Luke Tierney wrote:

> On Thu, Aug 23, 2001 at 08:16:09AM -0400, Duncan Murdoch wrote:
> > On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
> > >I'm surprised we don't get more of these sorts of things on UNIX.  Our
> > >current UNIX interrupt handling approach takes an immediate LONGJMP
> > >out of the signal handler no matter where the signal occurs (except
> > >for two places where signals are suspended).  Any place where an
> > >invariant is temporarily broken, any place where an assignment is not
> > >yet complete, is a potential trouble spot.

This is what is happening in the segfault caused by interrupting
Sys.sleep under Linux.  Presumably the fix is to wait and take the
interrupt after restoring the InputHandler.  It would be nice if someone
who understood this sort of thing could fix it before 1.3.1

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 23 18:05:43 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 23 Aug 2001 18:05:43 +0100 (BST)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <Pine.A41.4.33.0108230843490.135314-100000@homer05.u.washington.edu>
Message-ID: <Pine.GSO.4.31.0108231804080.6282-100000@auk.stats>

On Thu, 23 Aug 2001, Thomas Lumley wrote:

> On Thu, 23 Aug 2001, Luke Tierney wrote:
>
> > On Thu, Aug 23, 2001 at 08:16:09AM -0400, Duncan Murdoch wrote:
> > > On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
> > > >I'm surprised we don't get more of these sorts of things on UNIX.  Our
> > > >current UNIX interrupt handling approach takes an immediate LONGJMP
> > > >out of the signal handler no matter where the signal occurs (except
> > > >for two places where signals are suspended).  Any place where an
> > > >invariant is temporarily broken, any place where an assignment is not
> > > >yet complete, is a potential trouble spot.
>
> This is what is happening in the segfault caused by interrupting
> Sys.sleep under Linux.  Presumably the fix is to wait and take the
> interrupt after restoring the InputHandler.  It would be nice if someone
> who understood this sort of thing could fix it before 1.3.1

Well, I don't know if I will have time, but I do think I know how to do it.
I suspect I always knew this could happen, but forgot to secure against it,
and it hadn't (hasn't) come up in earnest yet .

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Thu Aug 23 18:37:16 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Thu, 23 Aug 2001 13:37:16 -0400 (EDT)
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <20010823093937.A12583@nokomis.stat.umn.edu>
Message-ID: <Pine.GSO.4.10.10108231311180.15781-100000@hsph.harvard.edu>

On Thu, 23 Aug 2001, Luke Tierney wrote:

> I'm talking about something related but different: controlling the
> point at which an asynchronous signal is brought into the system (and
> turned into an exception if we have a proper exception system.)  R
> currently has on.exit, and Robert Gentleman and I proposed a more
> structured exception mechanism for possible addition to R in the neas
> future.
> 
> [I sent a posting about the proposed mechanism a while back.  So far
> we have received little feedback, so here is another request: Please
> have a look at http://www.stat.umn.edu/~luke/R/exceptions/simpcond.html
> and let us know if you have any comments/suggestions]
> 
> But that is not the issue here.  The issue is whether we allow a
> SIGINT signal in UNIX (and whatever its analog is on other systems) to
> interrupt the current calculation immediately, no matter where it
> might be, or whether we impose more structure.  Windows/Mac pretty
> much force more structure at the C level, since their analogs have to
> arrive through mechnisms that require explicit polling.  So on Windows
> you know that an expression like
> 
> 	x = malloc(n)
> 
> will not get interrupted between the malloc call and the assignment to
> x (unless some very low level tricks are involved).  On UNIX, the
> signal can arrive in between those two operations.

That sounds like two problems--- the first being how to make sure that the
allocation and assignment happen as an atomic operation (that's not
difficult--- we just throw a critical section around it) but also in the
event of an interrupt, what to do with things like allocated memory in the
case of an interrupt (which was Duncan's point in the earlier message that
got snipped). Unfortunately, I think the transactional (is that a word?) 
database people may be the only ones with a good handle on that particular
problem and thats expensive... Though I suppose if you're wrapping
everything in an environment and interrupt could just ensure the
destruction of the environment, but it doesn't handle global variables.
You'd need some sort of stack on each variable that kept weak references
to previous values (since R doesn't usually access things by reference
unless you force it, right?) until they're garbage collected at which
point their weak references will also be removed from the stack--- "Undo
Capability, Limited Time Only!" :-)


> 
> The safe thing to do on UNIX is to have the signal handler just set a
> flag which is then checked at appropriate points.  This is the
> approach that John Eaton mentioned, and is used by most Scheme systems
> I've looked at.  I suspect Python and Perl do this as well, but I'll
> have to check.  This is also the way Java handles thread interrupts.
> It would make the UNIX behavior identical to the WIndows behavior.
> 
> The drawback for systems like R and Octave is that we rely on being
> able to use chunks of C/Fortran that can potentially run for a long
> time (forever if they happen to get into infinite loops occasionally)
> and where it is either impractical or impossible to insert flag
> checking code.  For those situations it is nice to be able to use a
> signal handler to force a jump out of that code.  We live without this
> ability on Windows/Mac, and don't do too badly there, but it would be
> nice not to compltely loose this facility on UNIX. Most numerical code
> tends to not behave too badly when exited by a longjmp, but there are
> no guarantees.  For example, if a piece of C code does something like this:
> 
> 	static inited = FALSE;
> 	if (! inited) {
> 	    inited = TRUE;
> 	    ... initialize a table needed for computations ...
>         }
>         ... use the table ..
> 
> and a Control-C arrives in the first call after inited=TRUE is executad
> but before the table is fully initialized, then future calls to this
> function will happily return nonsense.

Step 1. Have anyone who uses statics burned at the stake for not writing
threadsafe code ;-) 

> 
> One option would be to tag routines at library regestration time as
> safe for LONGJMP's or not.  That way we can disable LONGJUMP
> interrupts everywhere except in explicitly marked .C or .Fortran calls
> (and blocking IO operations). This will insure that no internal R
> state gets messed up by asynchronous signals that arrive at on
> inopportune time.

I think you'll want finer grain control as well--- my guess would be to
have external calls execute within a critical section (like Java, if my
understanding is correct) unless explicitly marked otherwise but still
allow for a critical section to be entered (and left) within the code
block. An example would be something like reading from a URL where I may
spend some time blocked waiting for a connection where you would want the
ability to break out without having to wait for a timeout, but if for some
reason once the transfer is started it must be allowed to complete I would
want to engage the critical section later in the function. 

> 
> But this only addresses the C level.  On Windows/Mac, the place where
> a user break is turned into an R exception is (mainly) in the internal
> eval, where every 1000 calculatins (or some such number) the flag is
> checked and a jump is done if the flag is set.  UNIX would work the
> same way.  Since the internals know exactly where this jump can occur,
> unlike jumps out of a signal handler, they can make sure all internal
> state is consistent before checking the flag.
> 
> >From the R level things look different: the 1000'th eval step can
> happen anywhere, so a piece of R code that does
> 
> 	file <- file(file, "w")
>         on.exit(close(file))
>         ... do something with file ...
> 
> has a race condition: an interrupt that arrives between the creation
> of the file and the registration of the on.exit handler will leave
> the file open.  Something along the lines of
> 
> 	without.interrupts({
>             file <- file(file, "w")
>             on.exit(close(file))
>             with.interrupts(... do something with file ...)
>         })
> 
> would be safe but is too awkward in this form. [Using a structured
> exception handling mechanism, some sort of try/finally construct,
> would make this code cleaner but would not resolve the race
> condition.]
> 
> There are no easy solutions I think, but we need to look at a range of
> options and see what works best.
> 
> [Threads add the additional problem that an interrupted thread might
> be holding a lock, and failure to release the lock could cause
> deadlock.  Using a structured exception handling mechanism to manage
> lock release helps, but race conditions are still potentially an issue
> with asynchronous interrupts.]

I'm just sort of pulling stuff out of thin air and I don't expect this
stuff to be easy to implement, but here goes: :-)

Say, we have an ideal world where R executes in a bytecode VM like Java or
something else---I've noticed that this idea pops up every now and then
for performance reasons. In this case, why not just take it one step
further and have the R environment actually be something of a lightweight
operating system (they don't have to be bloaty and the VM's nature means
it can be fairly abstracted---no need for 'device drivers' in the
traditional sense and whatnot) that manages each of R's user-level threads
as a distinct process. The 'OS' then handles the context switching and
preemption that we'll need anyway but also handles interrupt cases by
trapping them from the operating system (using signal handlers or the
particular OS's analogue). The interrupt handler would then be able to
forcibly shutdown whatever shared resources and memory allocated to the
'process' in the same way it happens in a real OS (this would obviously
require that the I/O system be abstracted away in internal and C calls---
but I think we've already got a good start on that with the connection
mechanism and we want it for other reasons as well). My thought is that
this sort of set up would also change the flavour of the native threading
as well since it actually becomes more analogous to developing an SMP
operating system, which people already know how to do, though you would
want to keep the 'OS' bits to an absolute minimum more like an RTOS than a
UNIX or something like that (read: primitive :-)). 

> 
> luke
> 
> -- 
> Luke Tierney
> University of Minnesota                      Phone:           612-625-7843
> School of Statistics                         Fax:             612-624-8868
> 313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
> Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@nokomis.stat.umn.edu  Thu Aug 23 18:41:37 2001
From: luke@nokomis.stat.umn.edu (Luke Tierney)
Date: Thu, 23 Aug 2001 12:41:37 -0500
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
In-Reply-To: <200108231540.IAA77857@pine.frazmtn.com>; from deleeuw@stat.ucla.edu on Thu, Aug 23, 2001 at 08:40:53AM -0700
References: <5es9otoskjdfdho75hqnrd96h702mt89fr@4ax.com> <200108231540.IAA77857@pine.frazmtn.com>
Message-ID: <20010823124136.A13455@nokomis.stat.umn.edu>

That's a good set of tools for starting from scratch.  But we really
have all the internal harness already in the form of the R context
structure, and Hansen's exception objects are more primitive (not a
criticism: they're designed to be quite simple) than the things we
have in the proposal I mentioned.  Wrapping some macros like Hansen's
or others around what we have isn't hard.

One thing to keep in mind though: whatever tools you use, all code has
to agree on it.  (You can't mix Hansen's macros with R's contexts
since both assume they are the only ones using LONGJMP.)  When the
implementation language provides the mechanism, like C++ or Java
exceptions, you are guaranteed that.  When grafting onto a language
like C you need to put someone in charge and make everyone else play
nice with that one.

luke


On Thu, Aug 23, 2001 at 08:40:53AM -0700, Jan de Leeuw wrote:
> You can get the macros from "C Interfaces and Implementations" by
> David Hanson, Chapter 4. He has some references to other C work
> by Eric Roberts and Steve Maguire on this.
> 
> On Thursday, August 23, 2001, at 05:16 AM, Duncan Murdoch wrote:
> 
> > On Wed, 22 Aug 2001 19:32:51 -0500, you wrote:
> >> I'm surprised we don't get more of these sorts of things on UNIX.  Our
> >> current UNIX interrupt handling approach takes an immediate LONGJMP
> >> out of the signal handler no matter where the signal occurs (except
> >> for two places where signals are suspended).  Any place where an
> >> invariant is temporarily broken, any place where an assignment is not
> >> yet complete, is a potential trouble spot.
> >
> > Delphi protects against these kind of errors with "try ... except ..."
> > and "try ... finally ..." blocks to deal with exceptions.  The first
> > one executes special code if an exception occurs, the second
> > guarantees execution of cleanup code.
> >
> > These are implemented as a linked list of records on the stack which
> > the exception handler knows how to interpret.  When a particular kind
> > of exception occurs, all "finally" blocks are executed in the
> > appropriate order (and the stack base pointer is moved to simulate
> > exits from all active routines) until an "except" block handling the
> > particular kind of exception is reached.
> >
> > C doesn't have these statements built in, but presumably someone has
> > written macros to do the same sort of thing.  Adding them would be a
> > lot of work, but would be worthwhile.
> >
> > Duncan Murdoch
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > .-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> > FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-
> > request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> > ._._._
> >
> 
> ===
> Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
> US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554
> phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
> homepage: http://www.stat.ucla.edu/~deleeuw
> ========================================================
>            No matter where you go, there you are. --- Buckaroo Banzai
>                     http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
> ========================================================
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kevin.Wright@pioneer.com  Thu Aug 23 19:38:15 2001
From: Kevin.Wright@pioneer.com (Kevin.Wright@pioneer.com)
Date: Thu, 23 Aug 2001 20:38:15 +0200 (MET DST)
Subject: [Rd] postscript & ps.options documentation (PR#1071)
Message-ID: <200108231838.UAA20793@pubhealth.ku.dk>

Full_Name: Kevin Wright
Version: 1.3
OS: Windows 95
Submission from: (NULL) (170.54.59.130)



In the help pages for postscript and ps.options, it is not clear that the
ps.options must be set before calling the postscript driver.

I was calling postscript() and then trying to set ps.options().  This gave
unexpected results.

Sorry if this is clear to everyone else.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 24 08:30:44 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 24 Aug 2001 08:30:44 +0100 (BST)
Subject: [Rd] RFC: type conversion in read.table
Message-ID: <Pine.LNX.4.31.0108240825520.29809-100000@gannet.stats>

Currently read.table is rather limited in its type conversion.
The algorithm is

0) Read as character
1) Try to convert to numeric. If that works, quit
2) Convert to factor unless !as.is.

I am thinking about adding more flexibility and more classes by the
following two changes.


A) Anticipating the arrival of classes for all R objects, add an
argument say `colClasses' that allows the user to specify the desired
class for every column.  This could default to "auto", or NA if people
think "auto" might be a relevant class name one day.

The effect would be equivalent to running

data[[i]] <- as(data[[i]], colClasses[i])

instead of

data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)

except that standard classes such as "numeric", "factor", "logical",
"character" would be dispatched directly, and argument "dec" would be
consulted where appropriate.

colClasses = "character" would suppress all conversions, which cannot
currently be done.


B) Make the default "auto" option somewhat cleverer.  I am thinking of
trying the following in turn

logical
integer
numeric
complex
factor   (only if !as.is[i] for backwards compatibility).

The `dec' option needs to be used for numeric/complex.

This would be done by a documented typeConvert function, and
should normally be fast (just look at the first item to rule
out much of the list).


This does mean that data frames would be much more likely to end up
containing integer or logical variables (although they can now).
I have already fixed model.frame/matrix to handle logical variables,
and would need to check that they do handle integer variables.


Questions:

1) Is this desirable?

2) Are the names sensible?

3) Is there any need to allow users to specify either the set of
   classes used by "auto" or lists of classes on a column-specific
   basis?

4) Currently the default is to get something without much information
   loss, and that would remain.  My intention is that if a class is
   specified and conversion is not possible that the result would be
   (mainly?) NAs.  Any problem with that?


Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Fri Aug 24 10:56:35 2001
From: plummer@iarc.fr (plummer@iarc.fr)
Date: Fri, 24 Aug 2001 11:56:35 +0200 (MET DST)
Subject: [Rd] Reading Inf and NaN values under windows (PR#1072)
Message-ID: <200108240956.LAA26764@pubhealth.ku.dk>

Under windows, R supports IEEE floating point arithmetic, but doesn't
allow conversion of Inf and NaN from character to numeric.

R> is.nan(NaN)
[1] TRUE
R> as.numeric(as.character(NaN))
[1] NA
Warning message: 
NAs introduced by coercion 
R> is.infinite(Inf)
[1] TRUE
R> as.numeric(as.character(Inf))
[1] NA
Warning message: 
NAs introduced by coercion 

whereas under Linux

R> as.numeric(as.character(NaN))
[1] NaN
R> as.numeric(as.character(Inf))
[1] Inf

S-PLUS 3.3 for Windows gives

S-PLUS> as.numeric(as.character(Inf))
[1] Inf
S-PLUS> as.numeric(as.character(NaN))
[1] NA
Warning messages:
  1 missing value  generated coercing from character to numeric in: 
        as.numeric(as.character(NaN))

I first came across this problem when trying to read in a dataset with
Inf values using read.table().  Under Windows, the variable with the
infinite value is converted to a factor. The scan() function also refuses
to read in Inf and NaN as numeric values under Windows.

Martyn

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 24 14:17:05 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 24 Aug 2001 15:17:05 +0200
Subject: Bug report numbers. Re: Interrupts (was Re: [Rd] X11 protocol errors ...) (PR#1069)
In-Reply-To: <200108230257.EAA10185@pubhealth.ku.dk>
References: <200108230257.EAA10185@pubhealth.ku.dk>
Message-ID: <x27kvtk372.fsf@blueberry.kubism.ku.dk>

jwe@bevo.che.wisc.edu writes:
...


Argh! Would you please everyone try to be careful with the
R-devel/R-bugs issues! If you remove the PR# without removing R-bugs
from the Cc: list, you'll generate a new bug report. And so will
anyone who follows up on the version that gets sent directly to
r-devel without PR#.

We now have this issue as PR#1065, 1068 and 1069....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Fri Aug 24 14:18:17 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Fri, 24 Aug 2001 09:18:17 -0400
Subject: [Rd] RFC: type conversion in read.table
References: <Pine.LNX.4.31.0108240825520.29809-100000@gannet.stats>
Message-ID: <3B865419.68732554@research.bell-labs.com>

Prof Brian Ripley wrote:
> 
> Currently read.table is rather limited in its type conversion.
> The algorithm is
> 
> 0) Read as character
> 1) Try to convert to numeric. If that works, quit
> 2) Convert to factor unless !as.is.
> 
> I am thinking about adding more flexibility and more classes by the
> following two changes.
> 
> A) Anticipating the arrival of classes for all R objects, add an
> argument say `colClasses' that allows the user to specify the desired
> class for every column.  This could default to "auto", or NA if people
> think "auto" might be a relevant class name one day.
> 
> The effect would be equivalent to running
> 
> data[[i]] <- as(data[[i]], colClasses[i])
> 
> instead of
> 
> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
> 
> except that standard classes such as "numeric", "factor", "logical",
> "character" would be dispatched directly, and argument "dec" would be
> consulted where appropriate.
> 
> colClasses = "character" would suppress all conversions, which cannot
> currently be done.
> 
> B) Make the default "auto" option somewhat cleverer.  I am thinking of
> trying the following in turn
> 
> logical
> integer
> numeric
> complex
> factor   (only if !as.is[i] for backwards compatibility).
> 
> The `dec' option needs to be used for numeric/complex.
> 
> This would be done by a documented typeConvert function, and
> should normally be fast (just look at the first item to rule
> out much of the list).
> 
> This does mean that data frames would be much more likely to end up
> containing integer or logical variables (although they can now).
> I have already fixed model.frame/matrix to handle logical variables,
> and would need to check that they do handle integer variables.
> 
> Questions:
> 
> 1) Is this desirable?

Yes, definitely.  It also fits very well into the formal class idiom. 
Couple of suggestions below.

> 
> 2) Are the names sensible?
> 
> 3) Is there any need to allow users to specify either the set of
>    classes used by "auto" or lists of classes on a column-specific
>    basis?

I think the most flexible way to get what you want is something like the
following.

The natural default for the colClasses argument is the name of a class,
but a "virtual" class in green book terminology.

I've been playing around with some data-frame related software mostly as
tests for the methods code (in SLanguage/SModels in the Omegahat tree).

The class used there for this purpose is called "dataVariable", meaning
anything that can conceptually be a variable in a data frame.  Actual
classes for variables extend this class, maybe trivially, maybe by some
method.

What's needed for the default here is essentially a method to coerce
class "character" to "dataVariable" (or whatever name one wants to
use).  When we are really using formal methods, this would be specified
by a call to setAs (green book, p307).  Then in effect
  data[[i]] <- as(data[[i]], colClasses[i])
applies in the default case as well.

Users could specialize the default by over-riding the setAs, but a
better way would be to define a new virtual class, with its own method
for coercion.  Users would then have essentially unlimited flexibility,
by supplying the name of that class in the colClasses argument.

> 4) Currently the default is to get something without much information
>    loss, and that would remain.  My intention is that if a class is
>    specified and conversion is not possible that the result would be
>    (mainly?) NAs.  Any problem with that?

As a default, seems fine.  When the user supplies a class, this implies
an as() method, which can then decide what to do in case of
problems--error, NA, or whatever.

> Brian
> 
> --
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 24 15:23:56 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 24 Aug 2001 15:23:56 +0100 (BST)
Subject: [Rd] Reading Inf and NaN values under windows (PR#1072)
In-Reply-To: <200108240956.LAA26764@pubhealth.ku.dk>
Message-ID: <Pine.LNX.4.31.0108241514200.8075-100000@gannet.stats>

On Fri, 24 Aug 2001 plummer@iarc.fr wrote:

> Under windows, R supports IEEE floating point arithmetic, but doesn't
> allow conversion of Inf and NaN from character to numeric.
>
> R> is.nan(NaN)
> [1] TRUE
> R> as.numeric(as.character(NaN))
> [1] NA
> Warning message:
> NAs introduced by coercion
> R> is.infinite(Inf)
> [1] TRUE
> R> as.numeric(as.character(Inf))
> [1] NA
> Warning message:
> NAs introduced by coercion
>
> whereas under Linux
>
> R> as.numeric(as.character(NaN))
> [1] NaN
> R> as.numeric(as.character(Inf))
> [1] Inf
>
> S-PLUS 3.3 for Windows gives
>
> S-PLUS> as.numeric(as.character(Inf))
> [1] Inf
> S-PLUS> as.numeric(as.character(NaN))
> [1] NA
> Warning messages:
>   1 missing value  generated coercing from character to numeric in:
>         as.numeric(as.character(NaN))
>
> I first came across this problem when trying to read in a dataset with
> Inf values using read.table().  Under Windows, the variable with the
> infinite value is converted to a factor. The scan() function also refuses
> to read in Inf and NaN as numeric values under Windows.

It's the same cause: strtod is used.  That's not required to support
IEC 60559 (to be correct) specials, but glibc happens to.

We have R_strtod: we should make proper use of it.  I'll do that for
1.3.1.

Brian

>
> Martyn
>
> --please do not edit the information below--
>
> Version:
>  platform = i386-pc-mingw32
>  arch = x86
>  os = Win32
>  system = x86, Win32
>  status =
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 06
>  day = 22
>  language = R
>
> Windows NT 4.0 (build 1381) Service Pack 6
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Aug 24 16:36:23 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 24 Aug 2001 17:36:23 +0200 (MET DST)
Subject: [Rd] cutree (PR#1067)
Message-ID: <200108241536.RAA01942@pubhealth.ku.dk>

>>>>> "Anja" == Anja von Heydebreck <heydebre@molgen.mpg.de> writes:

    Anja> Full_Name: Anja von Heydebreck Version: 1.3.0 OS: Alpha Unix
    Anja> Submission from: (NULL) (141.14.19.61)

Thank you

    Anja> I repeatedly obtained meaningless results from the function
    Anja> 'cutree' in the 'mva' package, when the argument 'h' was greater
    Anja> or equal to the maximum height occuring:

Here is an executable version of Anja's example:

 library('mva')
 y <-
 rbind(c( 0,  1, -1, 1),
       c( 0, -1,  1, 0),
       c( 0, -1,  1, 1),
       c(-1, -2,  1, 0))
 d <- dist(y, method="manhattan")
 hc <- hclust(d, method = "complete")
 hc$height
 ## [1] 1 3 7
 ( cluster <- cutree(hc, h=max(hc$height)))

  ## Anja got
  ## [1] 1108612352          1 1074517880          1

  ## Martin: I get
  ## [1] 0 0 0 0

even though I don't get random results, it's still wrong.
I'll look at a fix.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Fri Aug 24 19:18:24 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Fri, 24 Aug 2001 14:18:24 -0400
Subject: [Rd] RE: Variable lables (was Re: [R] Reading SAS version 8 data into
Message-ID: <5429125E11E4D411AF7300805FE603A8014CED54@groexmbcr02.pfizer.com>

[Moved from R-help]

> From: fharrell@virginia.edu [mailto:fharrell@virginia.edu]
> I store variable labels as "label" attributes of vectors
> and use then in various plotting functions as well as the
> describe() function.

I would like to see general support for label attributes in the R plotting
and modeling functions.  One possible way of implementing this is to create
a replacement for the standard "deparse(substitute(blah))" idiom. This
function, getlabel(), checks for a label attribute and returns that if
present. Otherwise it returns the variable's name as a string.

Here's some code I've put together:

label  <-  function(x) attr(x,"label")

"label<-" <-  function(x, value )
  {
    m  <-  match.call()
    m[[1]]  <- as.name("attr<-")
    m$value  <- NULL
    m$which  <- "label"
    m$value  <- value
    eval(m)
  }

getlabel <- function(x)
  {
    tmp <- attr(x,"label")
    if(is.null(tmp) || tmp=="")
      {
        m  <- match.call()
        m[[1]] <- as.name('substitute')
        tmp <- deparse(eval(m,envir=parent.frame()))
      }
    return(tmp)
  }

I've done some testing, and getlabel seems to work fine as a substitute for
"deparse(subsitute(x))" in the plot commands.

There are a couple of problems.  First, attributes are carried along in
sometime unexpected ways.  For example, attributes are carried along by all
of the arethmetic operations I tried:
   > x <- rnorm(1)
   > label(x) <- "x label"
   > 
   > sqrt(x)
    [1] 0.8888801
   attr(,"label")
   [1] "x label"
   > x+1
    [1] 1.8888801
   attr(,"label")
   [1] "x label"
Ideally, performing an operation the creates a new variable should mask off
the label attribute (what about other attributes?).  I recognize that this
would require changes to R.  Would this be a big task?

Second, unless one bounds the length of the labels, it can get pretty messy
to use them in some places, (eg the coefficients table reported by
print.summary).  I can see a couple of solutions for this problem.  A)
Truncate labels when necessary.   B) Have 2 attributes--One short 'label'
that has a fixed length (say 30 characters), and one long 'description' that
can has no length limit.  C) Continue to use the variable name given in the
call for places where length is a problem, but show a translation between
the variable name and the label somewhere else as part of the output.

Except for the problem of the label attribute getting 'carried along' when
it is not desirable, I think that it would be straightforward and 'backwards
compatible' to add general support for variable labels.  

I am willing to submit patches for functions that I regularly use.  Would
others be willing to contribute?  Would the patches be accepted?

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Sat Aug 25 03:08:04 2001
From: gregory_r_warnes@groton.pfizer.com (gregory_r_warnes@groton.pfizer.com)
Date: Sat, 25 Aug 2001 04:08:04 +0200 (MET DST)
Subject: [Rd] Wierd problem comparing numeric values and list using == (PR#1073)
Message-ID: <200108250208.EAA03656@pubhealth.ku.dk>


Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
applied to elements of a list, particularly when one of the elements is of
mode integer:

	> list(1) == list(1)
	[1] FALSE
	> 1 == list(1)
	[1] TRUE
	> as.integer(1)==list(as.integer(1))
	[1] FALSE
	> as.integer(1)==list(as.double(1))
	[1] FALSE
	> list(as.integer(1))==list(as.integer(1))
	[1] FALSE
	> list(as.integer(1))==as.integer(1)
	[1] FALSE
	> list(as.double(1))==list(as.double(1))
	[1] FALSE

However, these cases work:

	> as.double(1)==list(as.integer(1))
	[1] TRUE
	> list(as.integer(1))==as.double(1)
	[1] TRUE

Replacing the bare integer/double with a vector constructed with c() doesn't
change the results, and comparing between vectors created with c() appears
correct.

-Greg

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows NT 4.0 (build 1381) Service Pack 5

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Sat Aug 25 14:42:34 2001
From: fharrell@virginia.edu (fharrell@virginia.edu)
Date: Sat, 25 Aug 2001 09:42:34 -0400
Subject: [Rd] Re: Variable lables (was Re: [R] Reading SAS version 8 data into
References: <5429125E11E4D411AF7300805FE603A8014CED54@groexmbcr02.pfizer.com>
Message-ID: <3B87AB4A.B3A498DD@virginia.edu>

Dear Greg,

I too would like to see labels be more a part of R.
In Hmisc I allow labels to be any length but plotting
and table making functions have options to abbreviate()
them or use variable names instead of labels.

I think your code is more complex that is really needed.

The problem with defaulting to deparse(...) is that
multiple function pass-throughs return the wrong result:

> f <- function(w)getlabel(w)
> g <- function(z)f(z)
> g(y)
[1] "z"

So I don't see a large role for the deparse(...) method.

The Hmisc library already defines label<- so if you
are willing to use another name for your version that
would prevent confusion from users of Hmisc.

The problem of labels being retained after you do
arithmetic on the variable is a real one, and one
I've put up with for a long time with S-Plus.  It would
be nice if R could prevent that but that is getting tricky.
What I've wanted more generally is the ability for the
user to specify a vector of attribute names in options()
that would be preserved upon subsetting.  That way I
wouldn't have to go to trouble to write local versions
of [.factor, etc. that carry the 'label' attribute.
Im my usage, 'label's are always logically carried
forward for subsetting.

Frank


"Warnes, Gregory R" wrote:
> 
> [Moved from R-help]
> 
> > From: fharrell@virginia.edu [mailto:fharrell@virginia.edu]
> > I store variable labels as "label" attributes of vectors
> > and use then in various plotting functions as well as the
> > describe() function.
> 
> I would like to see general support for label attributes in the R plotting
> and modeling functions.  One possible way of implementing this is to create
> a replacement for the standard "deparse(substitute(blah))" idiom. This
> function, getlabel(), checks for a label attribute and returns that if
> present. Otherwise it returns the variable's name as a string.
> 
> Here's some code I've put together:
> 
> label  <-  function(x) attr(x,"label")
> 
> "label<-" <-  function(x, value )
>   {
>     m  <-  match.call()
>     m[[1]]  <- as.name("attr<-")
>     m$value  <- NULL
>     m$which  <- "label"
>     m$value  <- value
>     eval(m)
>   }
> 
> getlabel <- function(x)
>   {
>     tmp <- attr(x,"label")
>     if(is.null(tmp) || tmp=="")
>       {
>         m  <- match.call()
>         m[[1]] <- as.name('substitute')
>         tmp <- deparse(eval(m,envir=parent.frame()))
>       }
>     return(tmp)
>   }
> 
> I've done some testing, and getlabel seems to work fine as a substitute for
> "deparse(subsitute(x))" in the plot commands.
> 
> There are a couple of problems.  First, attributes are carried along in
> sometime unexpected ways.  For example, attributes are carried along by all
> of the arethmetic operations I tried:
>    > x <- rnorm(1)
>    > label(x) <- "x label"
>    >
>    > sqrt(x)
>     [1] 0.8888801
>    attr(,"label")
>    [1] "x label"
>    > x+1
>     [1] 1.8888801
>    attr(,"label")
>    [1] "x label"
> Ideally, performing an operation the creates a new variable should mask off
> the label attribute (what about other attributes?).  I recognize that this
> would require changes to R.  Would this be a big task?
> 
> Second, unless one bounds the length of the labels, it can get pretty messy
> to use them in some places, (eg the coefficients table reported by
> print.summary).  I can see a couple of solutions for this problem.  A)
> Truncate labels when necessary.   B) Have 2 attributes--One short 'label'
> that has a fixed length (say 30 characters), and one long 'description' that
> can has no length limit.  C) Continue to use the variable name given in the
> call for places where length is a problem, but show a translation between
> the variable name and the label somewhere else as part of the output.
> 
> Except for the problem of the label attribute getting 'carried along' when
> it is not desirable, I think that it would be straightforward and 'backwards
> compatible' to add general support for variable labels.
> 
> I am willing to submit patches for functions that I regularly use.  Would
> others be willing to contribute?  Would the patches be accepted?
> 
> -Greg
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Aug 25 14:57:09 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Aug 2001 15:57:09 +0200
Subject: [Rd] Wierd problem comparing numeric values and list using == (PR#1073)
In-Reply-To: <200108250208.EAA03656@pubhealth.ku.dk>
References: <200108250208.EAA03656@pubhealth.ku.dk>
Message-ID: <x23d6gmedm.fsf@blueberry.kubism.ku.dk>

gregory_r_warnes@groton.pfizer.com writes:

> Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
> applied to elements of a list, particularly when one of the elements is of
> mode integer:
> 
> 	> list(1) == list(1)
> 	[1] FALSE
> 	> 1 == list(1)
> 	[1] TRUE
> 	> as.integer(1)==list(as.integer(1))
> 	[1] FALSE
> 	> as.integer(1)==list(as.double(1))
> 	[1] FALSE
> 	> list(as.integer(1))==list(as.integer(1))
> 	[1] FALSE
> 	> list(as.integer(1))==as.integer(1)
> 	[1] FALSE
> 	> list(as.double(1))==list(as.double(1))
> 	[1] FALSE
> 
> However, these cases work:
> 
> 	> as.double(1)==list(as.integer(1))
> 	[1] TRUE
> 	> list(as.integer(1))==as.double(1)
> 	[1] TRUE
> 
> Replacing the bare integer/double with a vector constructed with c() doesn't
> change the results, and comparing between vectors created with c() appears
> correct.

It is not entirely clear what we *should* be doing here. S (-PLUS 3.4)
is at least consistent:

> list(1) == list(1)
Error in list(1) == list(1): == operation on mode "list" undefined
Dumped
>  1 == list(1)
Error in 1 == list(1): == operation on mode "list" undefined
Dumped
> as.integer(1)==list(as.integer(1))
Error in as.integer(1) == list(as.integer(1)): == operation on mode "list"
        undefined
Dumped
...

so one might argue that you shouldn't do that in the first place...
(or that the bug is that we do not expressly forbid doing this.)

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Sun Aug 26 06:15:20 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Sun, 26 Aug 2001 01:15:20 -0400
Subject: [Rd] Re: Variable labels (was Re: [R] Reading SAS version 8 d
 ata into
Message-ID: <5429125E11E4D411AF7300805FE603A8014CED5C@groexmbcr02.pfizer.com>


> From: fharrell@virginia.edu [mailto:fharrell@virginia.edu]
> 
[snip]
> I think your code is more complex that is really needed.
> 
> The problem with defaulting to deparse(...) is that
> multiple function pass-throughs return the wrong result:
> 
[snip]
> So I don't see a large role for the deparse(...) method.
>

Actually one of the reasons that I included the deparse(...) method was to
create a 'drop-in' substitute for the current calls to deparse(...) that are
found throughout the code and that would be backward-compatible.  Having
such a call will immensely simplify changing existing code.

It's true that the variable names don't get correctly handled once you down
a layer of function calls, but that applies AFAIK to the current
deparse(...) method  as well.  

> 
> The Hmisc library already defines label<- so if you
> are willing to use another name for your version that
> would prevent confusion from users of Hmisc.

I don't think there will be a problem as long as the functions do exactly
the same thing.  To that end, perhaps we should agree on a common set of
functions and keep them in sync.  I expect that your functions are better
tested than mine, since they've been available for some time.


> 
> The problem of labels being retained after you do
> arithmetic on the variable is a real one, and one
> I've put up with for a long time with S-Plus.  It would
> be nice if R could prevent that but that is getting tricky.

> What I've wanted more generally is the ability for the
> user to specify a vector of attribute names in options()
> that would be preserved upon subsetting.  That way I
> wouldn't have to go to trouble to write local versions
> of [.factor, etc. that carry the 'label' attribute.
> Im my usage, 'label's are always logically carried
> forward for subsetting.

It seems to be a good idea to preserve the labels during subset operations.
What are the possible cons?

-Greg


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fharrell@virginia.edu  Sun Aug 26 13:45:02 2001
From: fharrell@virginia.edu (fharrell@virginia.edu)
Date: Sun, 26 Aug 2001 08:45:02 -0400
Subject: [Rd] Re: Variable labels (was Re: [R] Reading SAS version 8 data
 into
References: <5429125E11E4D411AF7300805FE603A8014CED5C@groexmbcr02.pfizer.com>
Message-ID: <3B88EF4E.F256232B@virginia.edu>

"Warnes, Gregory R" wrote:
> 
> > From: fharrell@virginia.edu [mailto:fharrell@virginia.edu]
> >
> [snip]
> > I think your code is more complex that is really needed.
> >
> > The problem with defaulting to deparse(...) is that
> > multiple function pass-throughs return the wrong result:
> >
> [snip]
> > So I don't see a large role for the deparse(...) method.
> >
> 
> Actually one of the reasons that I included the deparse(...) method was to
> create a 'drop-in' substitute for the current calls to deparse(...) that are
> found throughout the code and that would be backward-compatible.  Having
> such a call will immensely simplify changing existing code.

Thanks for your reply Greg.
The "complex" code I was referring to was the eval()
and as.name() parts of your code.  The deparse can be
handy although I have done that on a case-by-case basis.
For example in a high-level plotting function I'll retrieve
label(an argument) and if that is empty I'll use
deparse(substitute(argument)).  
> 
> It's true that the variable names don't get correctly handled once you down
> a layer of function calls, but that applies AFAIK to the current
> deparse(...) method  as well.

Right.  That's why I try to define labels early when a data
frame is being created (e.g, in sas.get).

> 
> >
> > The Hmisc library already defines label<- so if you
> > are willing to use another name for your version that
> > would prevent confusion from users of Hmisc.
> 
> I don't think there will be a problem as long as the functions do exactly
> the same thing.  To that end, perhaps we should agree on a common set of
> functions and keep them in sync.  I expect that your functions are better
> tested than mine, since they've been available for some time.

Mine are simple:

label <- function(x)  {
	lab<-attr(x, "label")
	if(is.null(lab))lab<-""
	lab
	}

#From Bill Dunlap, StatSci  15Mar95:

"label<-" <- if(!.SV4.) function(x, value)
  structure(x, label=value,
            class=c('labelled',
              attr(x,'class')[attr(x,'class')!='labelled'])) else
function(x, value) {    # 1Nov00 for Splus 5.x, 6.x
  attr(x,'label') <- value
  x
}

For non SV4 systems (which include R) you see above that
when putting a label on a variable a class "labelled" is
added.  This is really to handle the subsetting problem
but I would rather get rid of it if subsetting can
respect selected attributes.

> 
> >
> > The problem of labels being retained after you do
> > arithmetic on the variable is a real one, and one
> > I've put up with for a long time with S-Plus.  It would
> > be nice if R could prevent that but that is getting tricky.
> 
> > What I've wanted more generally is the ability for the
> > user to specify a vector of attribute names in options()
> > that would be preserved upon subsetting.  That way I
> > wouldn't have to go to trouble to write local versions
> > of [.factor, etc. that carry the 'label' attribute.
> > Im my usage, 'label's are always logically carried
> > forward for subsetting.
> 
> It seems to be a good idea to preserve the labels during subset operations.
> What are the possible cons?

If the user or a package specifies the list of attribute names
to preserve (I can only think of 'label' and 'units' right now)
I don't see a downside.  -Frank

> 
> -Greg
> 
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.

-- 
Frank E Harrell Jr              Prof. of Biostatistics & Statistics
Div. of Biostatistics & Epidem. Dept. of Health Evaluation Sciences
U. Virginia School of Medicine  http://hesweb1.med.virginia.edu/biostat
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@cogsci.ed.ac.uk  Sun Aug 26 23:54:31 2001
From: stephen@cogsci.ed.ac.uk (stephen@cogsci.ed.ac.uk)
Date: Mon, 27 Aug 2001 00:54:31 +0200 (MET DST)
Subject: [Rd] typo in lines.Rd (PR#1075)
Message-ID: <200108262254.AAA08537@pubhealth.ku.dk>

Full_Name: Stephen Eglen
Version: 1.30
OS: Linux
Submission from: (NULL) (128.252.204.21)


The Details section of the help for `lines' has the typo "liens"
(line 30 of R-1.3.0/src/library/base/man/lines.Rd)

Stephen


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Mon Aug 27 07:39:00 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Mon, 27 Aug 2001 08:39:00 +0200
Subject: [Rd] typo in lines.Rd (PR#1075)
In-Reply-To: <200108262254.AAA08537@pubhealth.ku.dk>
References: <200108262254.AAA08537@pubhealth.ku.dk>
Message-ID: <15241.60164.989595.741475@mithrandir.hornik.net>

>>>>> stephen  writes:

> Full_Name: Stephen Eglen
> Version: 1.30
> OS: Linux
> Submission from: (NULL) (128.252.204.21)


> The Details section of the help for `lines' has the typo "liens"
> (line 30 of R-1.3.0/src/library/base/man/lines.Rd)

Thanks, fixed.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Aug 27 13:45:41 2001
From: jmc@research.bell-labs.com (jmc@research.bell-labs.com)
Date: Mon, 27 Aug 2001 14:45:41 +0200 (MET DST)
Subject: [Rd] Wierd problem comparing numeric values and list using == (PR#1076)
Message-ID: <200108271245.OAA16874@pubhealth.ku.dk>

Peter Dalgaard BSA wrote:
> 
> gregory_r_warnes@groton.pfizer.com writes:
> 
> > Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
> > applied to elements of a list, particularly when one of the elements is of
> > mode integer:
> >
> >       > list(1) == list(1)
> >       [1] FALSE
> >       > 1 == list(1)
> >       [1] TRUE
> >       > as.integer(1)==list(as.integer(1))
> >       [1] FALSE
> >       > as.integer(1)==list(as.double(1))
> >       [1] FALSE
> >       > list(as.integer(1))==list(as.integer(1))
> >       [1] FALSE
> >       > list(as.integer(1))==as.integer(1)
> >       [1] FALSE
> >       > list(as.double(1))==list(as.double(1))
> >       [1] FALSE
> >
> > However, these cases work:
> >
> >       > as.double(1)==list(as.integer(1))
> >       [1] TRUE
> >       > list(as.integer(1))==as.double(1)
> >       [1] TRUE
> >
> > Replacing the bare integer/double with a vector constructed with c() doesn't
> > change the results, and comparing between vectors created with c() appears
> > correct.
> 
> It is not entirely clear what we *should* be doing here. S (-PLUS 3.4)
> is at least consistent:
> 
> > list(1) == list(1)
> Error in list(1) == list(1): == operation on mode "list" undefined
> Dumped
> >  1 == list(1)
> Error in 1 == list(1): == operation on mode "list" undefined
> Dumped
> > as.integer(1)==list(as.integer(1))
> Error in as.integer(1) == list(as.integer(1)): == operation on mode "list"
>         undefined
> Dumped
> ...
> 
> so one might argue that you shouldn't do that in the first place...
> (or that the bug is that we do not expressly forbid doing this.)
> 
>         -p
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

As of 1.4, we will have the `identical' function, which is the right way
to do such comparisons in any case.

So I'd vote for making a use of the comparison operators an error unless
the type is correct (or there is a method defined).  There is even code
in relop.c (commented out) that looks like the right test.  Any
objections?

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Aug 27 13:44:22 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 27 Aug 2001 08:44:22 -0400
Subject: [Rd] Wierd problem comparing numeric values and list using ==
 (PR#1073)
References: <200108250208.EAA03656@pubhealth.ku.dk> <x23d6gmedm.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B8A40A6.15AF96C2@research.bell-labs.com>

Peter Dalgaard BSA wrote:
> 
> gregory_r_warnes@groton.pfizer.com writes:
> 
> > Under R 1.3.0 on Solaris and Windows NT  there seems to be a bug in == when
> > applied to elements of a list, particularly when one of the elements is of
> > mode integer:
> >
> >       > list(1) == list(1)
> >       [1] FALSE
> >       > 1 == list(1)
> >       [1] TRUE
> >       > as.integer(1)==list(as.integer(1))
> >       [1] FALSE
> >       > as.integer(1)==list(as.double(1))
> >       [1] FALSE
> >       > list(as.integer(1))==list(as.integer(1))
> >       [1] FALSE
> >       > list(as.integer(1))==as.integer(1)
> >       [1] FALSE
> >       > list(as.double(1))==list(as.double(1))
> >       [1] FALSE
> >
> > However, these cases work:
> >
> >       > as.double(1)==list(as.integer(1))
> >       [1] TRUE
> >       > list(as.integer(1))==as.double(1)
> >       [1] TRUE
> >
> > Replacing the bare integer/double with a vector constructed with c() doesn't
> > change the results, and comparing between vectors created with c() appears
> > correct.
> 
> It is not entirely clear what we *should* be doing here. S (-PLUS 3.4)
> is at least consistent:
> 
> > list(1) == list(1)
> Error in list(1) == list(1): == operation on mode "list" undefined
> Dumped
> >  1 == list(1)
> Error in 1 == list(1): == operation on mode "list" undefined
> Dumped
> > as.integer(1)==list(as.integer(1))
> Error in as.integer(1) == list(as.integer(1)): == operation on mode "list"
>         undefined
> Dumped
> ...
> 
> so one might argue that you shouldn't do that in the first place...
> (or that the bug is that we do not expressly forbid doing this.)
> 
>         -p
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

As of 1.4, we will have the `identical' function, which is the right way
to do such comparisons in any case.

So I'd vote for making a use of the comparison operators an error unless
the type is correct (or there is a method defined).  There is even code
in relop.c (commented out) that looks like the right test.  Any
objections?

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 27 14:35:17 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Aug 2001 15:35:17 +0200
Subject: [Rd] Wierd problem comparing numeric values and list using == (PR#1076)
In-Reply-To: <200108271245.OAA16874@pubhealth.ku.dk>
References: <200108271245.OAA16874@pubhealth.ku.dk>
Message-ID: <x27kvpwrqi.fsf@blueberry.kubism.ku.dk>

jmc@research.bell-labs.com writes:

> > >       > list(1) == list(1)
> > >       [1] FALSE
> > >       > 1 == list(1)
> > >       [1] TRUE
> > >       > as.integer(1)==list(as.integer(1))
> > >       [1] FALSE
> > >       > as.integer(1)==list(as.double(1))
> > >       [1] FALSE
> > >       > list(as.integer(1))==list(as.integer(1))
> > >       [1] FALSE
> > >       > list(as.integer(1))==as.integer(1)
> > >       [1] FALSE
> > >       > list(as.double(1))==list(as.double(1))
> > >       [1] FALSE
> > >
> > > However, these cases work:
> > >
> > >       > as.double(1)==list(as.integer(1))
> > >       [1] TRUE
> > >       > list(as.integer(1))==as.double(1)
> > >       [1] TRUE
....
> As of 1.4, we will have the `identical' function, which is the right way
> to do such comparisons in any case.
> 
> So I'd vote for making a use of the comparison operators an error unless
> the type is correct (or there is a method defined).  There is even code
> in relop.c (commented out) that looks like the right test.  Any
> objections?

Not really, except that I get the usual nagging suspicion that someone
(who?) meant something by doing it this way...

The current logic seems to be that if either side of the == is a
vector of atomic type, try to coerce the list on the other side to a
similar object and then test. However this has a clear bug in that the
coercion is to double even when the atomic vector is integer. If there
are lists on both sides, a pointer comparison is done:

> x<-2
> list(x)==list(x)
[1] FALSE
> list(.Alias(x))==list(.Alias(x))
[1] TRUE

The latter seems highly dubious to me. I'd rather have a recursive
pairwise application of "==" there. However, none of this is what
identical does, is it?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Aug 27 15:31:25 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 27 Aug 2001 10:31:25 -0400
Subject: [Rd] Wierd problem comparing numeric values and list using ==
 (PR#1076)
References: <200108271245.OAA16874@pubhealth.ku.dk> <x27kvpwrqi.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B8A59BD.BE5F7188@research.bell-labs.com>

Peter Dalgaard BSA wrote:
 ....
> > As of 1.4, we will have the `identical' function, which is the right way
> > to do such comparisons in any case.
> >
> > So I'd vote for making a use of the comparison operators an error unless
> > the type is correct (or there is a method defined).  There is even code
> > in relop.c (commented out) that looks like the right test.  Any
> > objections?
> 
> Not really, except that I get the usual nagging suspicion that someone
> (who?) meant something by doing it this way...
> 
> The current logic seems to be that if either side of the == is a
> vector of atomic type, try to coerce the list on the other side to a
> similar object and then test. However this has a clear bug in that the
> coercion is to double even when the atomic vector is integer. If there
> are lists on both sides, a pointer comparison is done:
> 
> > x<-2
> > list(x)==list(x)
> [1] FALSE
> > list(.Alias(x))==list(.Alias(x))
> [1] TRUE
> 
> The latter seems highly dubious to me. I'd rather have a recursive
> pairwise application of "==" there. However, none of this is what
> identical does, is it?

identical essentially applies itself recursively until it encounters an
non-recursive element (in which case it does element-wise comparisons or
something specific to the special type, such as a symbol).  

My take is that the "==" operator is for generating data structures that
look like the arguments but with TRUE, FALSE, or NA in the appropriate
elements. Notice, e.g., that identical(1,NA) is FALSE while 1==NA is NA.

It's possible one would like to do == recursively to all the elements of
two lists, suggesting an lapply of the "==" function.  (R doesn't yet
have a recursive apply to do this at all levels of recursion.)

But in most examples I've seen, users really wanted a single TRUE/FALSE
result, in which case they should _not_ be using the "==" operator.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thomas.baumann@ch.tum.de  Mon Aug 27 22:05:41 2001
From: thomas.baumann@ch.tum.de (thomas.baumann@ch.tum.de)
Date: Mon, 27 Aug 2001 16:05:41 -0500 (CDT)
Subject: [Rd] colorbar legend for image()
Message-ID: <200108272105.f7RL5gk06656@rc1021.ce.uiuc.edu>

Hi,

are there any plans to add a colorbar legend to image()?

Or such a possibility already implemented which I just haven't
discovered yet. Anyway, I will be willing to spent some time on the
implementation if there isn't anyone working on that already.

Thanks
Thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Mon Aug 27 22:53:09 2001
From: jmc@research.bell-labs.com (John Chambers)
Date: Mon, 27 Aug 2001 17:53:09 -0400
Subject: [Rd] is.environment, as.environment, and NULL
Message-ID: <3B8AC145.E9483D4F@research.bell-labs.com>

The r-devel (1.4) code has C implementations now of the class and
class<- functions in package methods, and also of as.environment.

The last brings up a question (it shows up in the isas-tests test
suite).

as.environment(NULL) is NULL.  Seems like it has to be, since NULL is
the environment associated with package:base.

But is.environment(NULL) is FALSE, which is also fairly natural, if we
think of testing the type of the argument.

The inconsistency causes a related test in isas-tests.R to produce a
FALSE (where generally they should either evaluate to TRUE or generate
an error).

Looking at the uses of is.environment in the R source itself, most of
them seem to hedge their bets on whether is.environment(NULL) is TRUE or
FALSE.

There isn't a completely consistent solution, given the use of NULL as
an environment.  For the moment it seemed best to live with that one
anomalous result in the tests.

John
-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Aug 27 23:22:54 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Aug 2001 00:22:54 +0200
Subject: [Rd] is.environment, as.environment, and NULL
In-Reply-To: <3B8AC145.E9483D4F@research.bell-labs.com>
References: <3B8AC145.E9483D4F@research.bell-labs.com>
Message-ID: <x2wv3prvlt.fsf@blueberry.kubism.ku.dk>

John Chambers <jmc@research.bell-labs.com> writes:

> There isn't a completely consistent solution, given the use of NULL as
> an environment.  For the moment it seemed best to live with that one
> anomalous result in the tests.

The use of NULL for the base environment is something which I would
like to see go away anyway. It makes little sense semantically (if
anything, you would want the NULL environment to be an empty one), and
there are pitfalls where a NULL value returned by accident can cause
code to work in base but not in a package.

I did start to look into it at some point but ran out of stamina or
got distracted (probably by release timings as usual...). As I recall
it, NULL for base envir is only really used in a handful of places as
a sentinel for searches through the search path, as in:

    for (rho = R_GlobalEnv; rho != R_NilValue; rho = ENCLOS(rho)) ..

The base environment is special because the symbol lookups are
different there, but it could be represented by R_BaseEnv or some such
instead of R_NilValue. I doubt that much interpreted code needs to
explicitly test whether an environment is the base environment. One
thing to watch out for might be saved workspaces, though. On the other
hand, we do not save the search path, so maybe not...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue Aug 28 07:25:39 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 28 Aug 2001 08:25:39 +0200
Subject: [Rd] is.environment, as.environment, and NULL
In-Reply-To: <x2wv3prvlt.fsf@blueberry.kubism.ku.dk>
References: <3B8AC145.E9483D4F@research.bell-labs.com>
 <x2wv3prvlt.fsf@blueberry.kubism.ku.dk>
Message-ID: <15243.14691.106481.288305@mithrandir.hornik.net>

>>>>> Peter Dalgaard BSA writes:

> John Chambers <jmc@research.bell-labs.com> writes:
>> There isn't a completely consistent solution, given the use of NULL as
>> an environment.  For the moment it seemed best to live with that one
>> anomalous result in the tests.

> The use of NULL for the base environment is something which I would
> like to see go away anyway. It makes little sense semantically (if
> anything, you would want the NULL environment to be an empty one), and
> there are pitfalls where a NULL value returned by accident can cause
> code to work in base but not in a package.

> I did start to look into it at some point but ran out of stamina or
> got distracted (probably by release timings as usual...). As I recall
> it, NULL for base envir is only really used in a handful of places as
> a sentinel for searches through the search path, as in:

>     for (rho = R_GlobalEnv; rho != R_NilValue; rho = ENCLOS(rho)) ..

> The base environment is special because the symbol lookups are
> different there, but it could be represented by R_BaseEnv or some such
> instead of R_NilValue. I doubt that much interpreted code needs to
> explicitly test whether an environment is the base environment. One
> thing to watch out for might be saved workspaces, though. On the other
> hand, we do not save the search path, so maybe not...

A question, and a remark.

Question, would we want to keep as.environment(NULL) to give the base
package, so that code like ls(envir = NULL) will still work?

Remark, we once discussed making package environments (in particular for
base) read-only.  One way of doing this is via setting attributes, but
we cannot do this on NULL.  Not that I think this is the way to do it,
though ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From christian.hoffmann@wsl.ch  Tue Aug 28 07:40:37 2001
From: christian.hoffmann@wsl.ch (christian.hoffmann@wsl.ch)
Date: Tue, 28 Aug 2001 08:40:37 +0200 (MET DST)
Subject: [Rd] log10 error ?? (PR#1077)
Message-ID: <200108280640.IAA22157@pubhealth.ku.dk>

format((1000000*(1+.Machine$double.eps)),digits=18)
[1] "1000000.0000000002"
> .Machine$double.rounding
[1] 5
format(log10(1000000*(1+.Machine$double.eps)),digits=18)
[1] "5.9999999999999991"  # MUST be > 6 !!!???

format((1000000*(1-.Machine$double.eps)),digits=18)
[1] " 999999.9999999998"
> format(log10(1000000*(1-.Machine$double.eps)),digits=18)
[1] "5.9999999999999991"  

format(10^5.9999999999999991,digits=18)
[1] "999999.9999999979"

Version:
 platform = sparc-sun-solaris2.7
 arch = sparc
 os = solaris2.7
 system = sparc, solaris2.7
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:RODBC, package:MASS, package:prlib, package:pllib,
package:mathlib, package:mva, package:strlib, package:chlib, Autoloads,
package:base

Dr.sc.math.Christian W. Hoffmann
Mathematics and Statistical Computing
Landscape Modeling and Web Applications
Swiss Federal Research Institute WSL 
Zuercherstrasse 111
CH-8903 Birmensdorf, Switzerland
phone: ++41-1-739 22 77    fax: ++41-1-739 22 15
e-mail: christian.hoffmann_at_wsl.ch__prevent_spamming
www: http://www.wsl.ch/staff/christian.hoffmann/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 28 08:22:32 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 28 Aug 2001 08:22:32 +0100 (BST)
Subject: [Rd] is.environment, as.environment, and NULL
In-Reply-To: <15243.14691.106481.288305@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0108280819020.20238-100000@gannet.stats>

On Tue, 28 Aug 2001, Kurt Hornik wrote:

> >>>>> Peter Dalgaard BSA writes:
>
> > John Chambers <jmc@research.bell-labs.com> writes:
> >> There isn't a completely consistent solution, given the use of NULL as
> >> an environment.  For the moment it seemed best to live with that one
> >> anomalous result in the tests.
>
> > The use of NULL for the base environment is something which I would
> > like to see go away anyway. It makes little sense semantically (if
> > anything, you would want the NULL environment to be an empty one), and
> > there are pitfalls where a NULL value returned by accident can cause
> > code to work in base but not in a package.
>
> > I did start to look into it at some point but ran out of stamina or
> > got distracted (probably by release timings as usual...). As I recall
> > it, NULL for base envir is only really used in a handful of places as
> > a sentinel for searches through the search path, as in:
>
> >     for (rho = R_GlobalEnv; rho != R_NilValue; rho = ENCLOS(rho)) ..
>
> > The base environment is special because the symbol lookups are
> > different there, but it could be represented by R_BaseEnv or some such
> > instead of R_NilValue. I doubt that much interpreted code needs to
> > explicitly test whether an environment is the base environment. One
> > thing to watch out for might be saved workspaces, though. On the other
> > hand, we do not save the search path, so maybe not...
>
> A question, and a remark.
>
> Question, would we want to keep as.environment(NULL) to give the base
> package, so that code like ls(envir = NULL) will still work?

Interesting.  Was it ever documented to?

> Remark, we once discussed making package environments (in particular for
> base) read-only.  One way of doing this is via setting attributes, but
> we cannot do this on NULL.  Not that I think this is the way to do it,
> though ...

NULL is just shorthand: there is a proper R object for base:

> .GlobalEnv
<environment: R_GlobalEnv>
> is.null(.GlobalEnv)
[1] FALSE

It was news to me that NULL for .GlobalEnv worked at R level.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 28 09:21:43 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 28 Aug 2001 10:21:43 +0200
Subject: [Rd] colorbar legend for image()
In-Reply-To: <200108272105.f7RL5gk06656@rc1021.ce.uiuc.edu>
References: <200108272105.f7RL5gk06656@rc1021.ce.uiuc.edu>
Message-ID: <15243.21655.237789.712132@gargle.gargle.HOWL>


--LSat2th5Z+
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit

>>>>> "thomas" == thomas baumann <thomas.baumann@ch.tum.de> writes:

    thomas> Hi, are there any plans to add a colorbar legend to image()?

    thomas> Or such a possibility already implemented which I just haven't
    thomas> discovered yet. Anyway, I will be willing to spent some time on
    thomas> the implementation if there isn't anyone working on that
    thomas> already.

to the contrary:  Martin Schlather wanted to use legend() on top of image()
and found a buglet in legend()  which has been corrected for 1.3.1 which is
due coming weekend. 
To illustrate the new possibility of legend, I had produced a function
image.legend() and he improved (?!) it to image.scale()
which isn't yet part of any official version of R.
Hence, feedback on the following is *very* welcome. Note that it would only work
correctly for R version >= 1.3.1.  and hence I also attach the 1.3.1
version of legend() {at the end}.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><



--LSat2th5Z+
Content-Type: text/plain
Content-Description: Help for image.scale()
Content-Disposition: inline;
	filename="image.scale.Rd"
Content-Transfer-Encoding: 7bit

\name{image.scale}

\alias{image.scale}

\title{Provide scale to image plots}

\usage{
image.scale(z, col, x, y=NULL, size=NULL, digits=2, labels=c("breaks", "ranges"))
}

\arguments{
 \item{z}{Data from image plot}
 \item{col}{Colours from image plot}
 \item{x}{Horizintal location of top-left corner of scale, or list with
\code{x} and \code{y} components}
 \item{y}{Vertical location of top-left corner of scale}
 \item{size}{1- or 2-vector of colour-box dimensions}
 \item{digits}{Number of digits after the decimal point in labels}
 \item{labels}{Type of labels}
}

\description{
Provides a vertical colour scale to accompany an image plot.  The
location defaults to the right of the plot, the colour-boxes
default to square, and the style of the labels defaults to giving
the breaks to the right of the scale.}

\details{
Use \code{x=locator(1)} or give both \code{x} and \code{y}
arguments to specify the top-left corner of the scale.  The
colour-boxes then default to squares, and the image is centred
around the vertical midpoint.  Use \code{x=locator(2)} for
complete control of the scale size and location.  The usual scale
(labels to the right) requires a top-left and bottom-right.  To
reverse the scale, go bottom-top.  To swith labels to the left,
go right-left.

The labels default to single values giving the breaks, centred
between colour-boxes.  For ranges centred vertically on each
colour-box (wider), specify \code{labels="ranges"}.}

\author{Jonathan Rougier}

\seealso{\code{\link{image}}}

\examples{
# create an image plot
x <- seq(-0.5, 0.5, len = 31)
qform <- function(x, y) 3*x^2 + y^2 - 2*x*y
z <- outer(x, x, FUN = qform)

par("mar" = c(5, 4, 4, 10) + 0.1)	# wide righthand margin
image(x, x, z, col=gray(6:12/15))
image.scale(z, gray(6:12/15))		# the default

image(x, x, z, col=gray(6:12/15))
image.scale(z, gray(6:12/15), labels="range")	# with range labels

# play around with the following ...
image(x, x, z, col=gray(6:12/15))
image.scale(z, gray(6:12/15), x=locator(1))	# or locator(2)
}

\keyword{aplot,iplot,color}
--LSat2th5Z+
Content-Type: text/plain
Content-Description: image.scale() by two Martins
Content-Disposition: inline;
	filename="image.scale.R"
Content-Transfer-Encoding: 7bit

"image.scale" <-
function (z, col, x, y = NULL, size = NULL, digits = 2, labels = c("breaks", 
    "ranges"))
{
    # sort out the location
    n <- length(col)
    usr <- par("usr")
    mx <- mean(usr[1:2]); my <- mean(usr[3:4])
    dx <- diff(usr[1:2]); dy <- diff(usr[3:4])
    if (missing(x))
        x <- mx + 1.05*dx/2	# default x to right of image
    else if (is.list(x)) {
        if (length(x$x) == 2) 
          size <- c(diff(x$x), -diff(x$y)/n)
        y <- x$y[1]
        x <- x$x[1]
    } else x <- x[1]
    if (is.null(size))
        if (is.null(y)) {
          size <- 0.618*dy/n	# default size, golden ratio
          y <- my + 0.618*dy/2	# default y to give centred scale
        } else size <- (y-my)*2/n
    if (length(size)==1)
        size <- rep(size, 2)	# default square boxes
    if (is.null(y))
        y <- my + n*size[2]/2
    # draw the image scale
    i <- seq(along = col)
    rect(x, y - i * size[2], x + size[1], y - (i - 1) * size[2], 
        col = rev(col), xpd = TRUE)
    # sort out the labels
    rng <- range(z, na.rm = TRUE)
    bks <- seq(from = rng[2], to = rng[1], length = n + 1)
    bks <- formatC(bks, format="f", digits=digits)
    labels <- match.arg(labels)
    if (labels == "breaks")
        ypts <- y - c(0, i) * size[2]
    else {
        bks <- paste(bks[-1], bks[-(n+1)], sep = " - ")
        ypts <- y - (i - 0.5) * size[2]
    }
    text(x = x + 1.2 * size[1], y = ypts, labels = bks, adj =
        ifelse(size[1]>0, 0, 1), xpd = TRUE) 
}

--LSat2th5Z+
Content-Type: text/plain
Content-Description: legend.R from "R-patched" aka "1.3.1 to be"
Content-Disposition: inline;
	filename="legend.R"
Content-Transfer-Encoding: 7bit

legend <-
function(x, y, legend, fill, col = "black", lty, lwd, pch, bty = "o",
         bg = par("bg"), pt.bg = NA, cex = 1,
         xjust = 0, yjust = 1, x.intersp = 1, y.intersp = 1, adj = 0,
         text.width = NULL, merge = do.lines && has.pch, trace = FALSE,
         ncol = 1, horiz = FALSE)
{
    if(is.list(x)) {
	if(!missing(y)) {	# the 2nd arg may really be `legend'
            if(!missing(legend))
                stop("`y' and `legend' when `x' is list (need no `y')")
            legend <- y
        }
        y <- x$y; x <- x$x
    } else if(missing(y)) stop("missing y")
    if (!is.numeric(x) || !is.numeric(y))
	stop("non-numeric coordinates")
    if ((nx <- length(x)) <= 0 || nx != length(y) || nx > 2)
	stop("invalid coordinate lengths")

    xlog <- par("xlog")
    ylog <- par("ylog")

    rect2 <- function(left, top, dx, dy, ...) {
	r <- left + dx; if(xlog) { left <- 10^left; r <- 10^r }
	b <- top  - dy; if(ylog) {  top <- 10^top;  b <- 10^b }
	rect(left, top, r, b, ...)
    }
    segments2 <- function(x1, y1, dx, dy, ...) {
	x2 <- x1 + dx; if(xlog) { x1 <- 10^x1; x2 <- 10^x2 }
	y2 <- y1 + dy; if(ylog) { y1 <- 10^y1; y2 <- 10^y2 }
	segments(x1, y1, x2, y2, ...)
    }
    points2 <- function(x, y, ...) {
	if(xlog) x <- 10^x
	if(ylog) y <- 10^y
	points(x, y, ...)
    }
    text2 <- function(x, y, ...) {
	##--- need to adjust  adj == c(xadj, yadj) ?? --
	if(xlog) x <- 10^x
	if(ylog) y <- 10^y
	text(x, y, ...)
    }
    if(trace)
        catn <- function(...)
            do.call("cat", c(lapply(list(...),formatC), list("\n")))

    cin <- par("cin")
    Cex <- cex * par("cex")             # = the `effective' cex for text

    if(is.null(text.width))
	text.width <- max(strwidth(legend, u="user", cex=cex))
    else if(!is.numeric(text.width) || text.width < 0)
	stop("text.width must be numeric, >= 0")

    xc <- Cex * xinch(cin[1], warn.log=FALSE)# [uses par("usr") and "pin"]
    yc <- Cex * yinch(cin[2], warn.log=FALSE)

    xchar  <- xc
    yextra <- yc * (y.intersp - 1)
    ymax   <- max(yc, strheight(legend, u="user", cex=cex))
    ychar <- yextra + ymax
    if(trace) catn("  xchar=", xchar, "; (yextra,ychar)=", c(yextra,ychar))

    if(!missing(fill)) {
        ##= sizes of filled boxes.
        xbox <- xc * 0.8
        ybox <- yc * 0.5
        dx.fill <- xbox ## + x.intersp*xchar
    }
    do.lines <- (!missing(lty) && any(lty > 0)) || !missing(lwd)
    n.leg <- length(legend)

    ## legends per column:
    n.legpercol <-
        if(horiz) {
            if(ncol != 1)
                warning(paste(
             "horizontal specification overrides: Number of columns :=",n.leg))
            ncol <- n.leg
            1
        } else ceiling(n.leg / ncol)

    if(has.pch <- !missing(pch)) {
	if(is.character(pch) && nchar(pch[1]) > 1) {
            if(length(pch) > 1)
                warning("Not using pch[2..] since pch[1] has multiple chars")
	    np <- nchar(pch[1])
	    pch <- substr(rep(pch[1], np), 1:np, 1:np)
	}
	if(!merge) dx.pch <- x.intersp/2 * xchar
    }
    x.off <- if(merge) -0.7 else 0

    ##- Adjust (x,y) :
    if (xlog) x <- log10(x)
    if (ylog) y <- log10(y)

    if(nx == 2) {
        ## (x,y) are specifiying OPPOSITE corners of the box
        x <- sort(x)
        y <- sort(y)
        left <- x[1]
        top  <- y[2]
        w <- diff(x)# width
        h <- diff(y)# height
	w0 <- w/ncol # column width

	x <- mean(x)
	y <- mean(y)
	if(missing(xjust)) xjust <- 0.5
	if(missing(yjust)) yjust <- 0.5

    }
    else {## nx == 1
        ## -- (w,h) := (width,height) of the box to draw -- computed in steps
        h <- n.legpercol * ychar + yc
        w0 <- text.width + (x.intersp + 1) * xchar
        if(!missing(fill))      w0 <- w0 + dx.fill
        if(has.pch && !merge)   w0 <- w0 + dx.pch
        if(do.lines)		w0 <- w0 + (2+x.off) * xchar
        w <- ncol*w0 + .5* xchar
        ##-- (w,h) are now the final box width/height.
        left <- x      - xjust  * w
        top  <- y + (1 - yjust) * h
    }

    if (bty != "n") {
        if(trace)
            catn("  rect2(",left,",",top,", w=",w,", h=",h,"...)",sep="")
	rect2(left, top, dx = w, dy = h, col = bg)
    }
    ## (xt[],yt[]) := `current' vectors of (x/y) legend text
    xt <- left + xchar + (w0 * rep(0:(ncol-1), rep(n.legpercol,ncol)))[1:n.leg]
    yt <- top - (rep(1:n.legpercol,ncol)[1:n.leg]-1) * ychar - 0.5 * yextra - ymax

    if (!missing(fill)) {               #- draw filled boxes -------------
	fill <- rep(fill, length.out=n.leg)
	rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill)
	xt <- xt + dx.fill
    }
    if(has.pch || do.lines)
        col <- rep(col,length.out=n.leg)

    if (do.lines) {                     #- draw lines ---------------------
        seg.len <- 2 # length of drawn segment, in xchar units
	ok.l <- if(missing(lty)) { lty <- 1; TRUE } else lty > 0
	if(missing(lwd)) lwd <- par("lwd")
	lty <- rep(lty, length.out = n.leg)
	lwd <- rep(lwd, length.out = n.leg)
	if(trace)
	    catn("  segments2(",xt[ok.l] + x.off*xchar ,",", yt[ok.l],
                 ", dx=",seg.len*xchar,", dy=0, ...)", sep="")
	segments2(xt[ok.l] + x.off*xchar, yt[ok.l], dx= seg.len*xchar, dy=0,
		  lty = lty[ok.l], lwd = lwd[ok.l], col = col[ok.l])
	# if (!merge)
        xt <- xt + (seg.len+x.off) * xchar
    }
    if (has.pch) {                      #- draw points -------------------
	pch   <- rep(pch, length.out=n.leg)
	pt.bg <- rep(pt.bg, length.out=n.leg)
	ok <- is.character(pch) | pch >= 0
	x1 <- (if(merge) xt-(seg.len/2)*xchar else xt)[ok]
	y1 <- yt[ok]
	if(trace)
	    catn("  points2(", x1,",", y1,", pch=", pch[ok],"...)")
	points2(x1, y1, pch=pch[ok], col=col[ok], cex=cex, bg = pt.bg[ok])
	if (!merge) xt <- xt + dx.pch
    }

    xt <- xt + x.intersp * xchar
    text2(xt, yt, labels= legend, adj= adj, cex= cex)

    invisible(list(rect = list(w=w, h=h, left=left, top=top),
                   text = list(x = xt, y = yt)))
}

--LSat2th5Z+--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 28 09:34:51 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 28 Aug 2001 10:34:51 +0200
Subject: [Rd] log10 error ?? (PR#1077)
In-Reply-To: <200108280640.IAA22157@pubhealth.ku.dk>
References: <200108280640.IAA22157@pubhealth.ku.dk>
Message-ID: <15243.22443.374714.952324@gargle.gargle.HOWL>

>>>>> "ChHo" == christian hoffmann <christian.hoffmann@wsl.ch> writes:

    ChHo> format((1000000*(1+.Machine$double.eps)),digits=18)
    ChHo> [1] "1000000.0000000002"
    >> .Machine$double.rounding
    ChHo> [1] 5
    ChHo> format(log10(1000000*(1+.Machine$double.eps)),digits=18)
    ChHo> [1] "5.9999999999999991"  # MUST be > 6 !!!???

no. 
you assume that every arithmetic operation is correct to the last
bit, which is too much. Note that you have two conversions
decimal <-> binary, and  log10(x) internally really maps to log(x)/log(10)
(where log(10) is stored as constant).


    ChHo> format((1000000*(1-.Machine$double.eps)),digits=18)
    ChHo> [1] " 999999.9999999998"
    >> format(log10(1000000*(1-.Machine$double.eps)),digits=18)
    ChHo> [1] "5.9999999999999991"  

    ChHo> format(10^5.9999999999999991,digits=18)
    ChHo> [1] "999999.9999999979"

You have to expect more than one bit difference..
Definitely no bug.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue Aug 28 09:38:49 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 Aug 2001 10:38:49 +0200
Subject: [Rd] is.environment, as.environment, and NULL
In-Reply-To: <Pine.LNX.4.31.0108280819020.20238-100000@gannet.stats>
References: <Pine.LNX.4.31.0108280819020.20238-100000@gannet.stats>
Message-ID: <x2n14kd1eu.fsf@blueberry.kubism.ku.dk>

Prof Brian Ripley <ripley@stats.ox.ac.uk> writes:

> >
> > A question, and a remark.
> >
> > Question, would we want to keep as.environment(NULL) to give the base
> > package, so that code like ls(envir = NULL) will still work?
> 
> Interesting.  Was it ever documented to?

Implicitly at least, but ls("package:base") has been preferable for a
long time.

> > Remark, we once discussed making package environments (in particular for
> > base) read-only.  One way of doing this is via setting attributes, but
> > we cannot do this on NULL.  Not that I think this is the way to do it,
> > though ...
> 
> NULL is just shorthand: there is a proper R object for base:
> 
> > .GlobalEnv
> <environment: R_GlobalEnv>
> > is.null(.GlobalEnv)
> [1] FALSE

Nope...

> It was news to me that NULL for .GlobalEnv worked at R level.
> 
> Brian

It doesn't. NULL is the *base* environment i.e. the one at the very
end of the search path. This is what gives the mess where things like
evalq(foo(x), NULL) will find "foo" in base, but not in a package.
(One gotcha being that taking environment(formula) returns NULL if no
environment was ever set.)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Tue Aug 28 09:45:23 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Tue, 28 Aug 2001 10:45:23 +0200
Subject: [Rd] colorbar legend for image()
In-Reply-To: <15243.21655.237789.712132@gargle.gargle.HOWL>
References: <200108272105.f7RL5gk06656@rc1021.ce.uiuc.edu>
 <15243.21655.237789.712132@gargle.gargle.HOWL>
Message-ID: <15243.23075.23970.457550@gargle.gargle.HOWL>


--GtXdrZquwx
Content-Type: text/plain; charset=us-ascii
Content-Description: message body text
Content-Transfer-Encoding: 7bit

>>>>> "MM" == Martin Maechler <maechler@stat.math.ethz.ch> writes:

>>>>> "thomas" == thomas baumann <thomas.baumann@ch.tum.de> writes:
    thomas> Hi, are there any plans to add a colorbar legend to image()?

    thomas> Or such a possibility already implemented which I just haven't
    thomas> discovered yet. Anyway, I will be willing to spent some time on
    thomas> the implementation if there isn't anyone working on that
    thomas> already.

    MM> to the contrary: Martin Schlather wanted to use legend() on top of
    MM> image() and found a buglet in legend() which has been corrected for
    MM> 1.3.1 which is due coming weekend.  To illustrate the new
    MM> possibility of legend, I had produced a function image.legend() and
    MM> he improved (?!) it to image.scale() which isn't yet part of any
    MM> official version of R.  Hence, feedback on the following is *very*
    MM> welcome. Note that it would only work correctly for R version >=
    MM> 1.3.1.  and hence I also attach the 1.3.1 version of legend() {at
    MM> the end}.

(and then I've included the three files
  image.scale.Rd,  image.scale.R  and legend.R )

My error was to confuse Jonathan Rougier's  image.scale()  
  {from a post to R-help, on 21 Sep 1999}
with Martin and Martin's  image.legend() ...

So here is our unfinished stuff with some examples appended.
The code still has a few comments in German (which won't be a problem for
Thomas ..).

Feedback *still* very welcome to both image.annotation versions..

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><


--GtXdrZquwx
Content-Type: text/plain; charset=iso-8859-1
Content-Description: image.legend() by Martin&Martin
Content-Disposition: inline;
	filename="image-legend.R"
Content-Transfer-Encoding: 7bit


image.legend <-
    function(x,y, zlim, at.z = NULL, col = heat.colors(12), legnd=NULL,
             lwd = max(3,32/length(col)), bg = NA, bty = "", ...)
  ## * kein y.i -- Benutzer soll rein ueber lwd steuern; sollte reichen.
  ## * legnd koennte interessant sein, falls Text geschrieben werden soll
  ##   (weiss mal wieder nicht, wie man aus legnd legend als option
  ##     macht)
  ## * lwd wird per default in Abh. von col gewaehlt.
{
    ## Purpose:
    ## Authors: Martin Maechler,   9 Jul 2001
    ##          Martin Schlather, 24 Jul 2001

  if (!is.null(legnd) && is.null(at.z))
      stop("at.z must be given if legnd is") ## falls legnd darf at.z
    ##                                nicht automatisch gewaehlt werden

    if(!is.numeric(zlim) || zlim[1] > zlim[2])
        stop("`zlim' must be numeric; zlim[1] <= zlim[2]")
    if(is.null(at.z)) {
        ## hier ein Versuch in Abhaengigkeit von n
        ## die Anzahl der labels zu bestimmen:
        n <- min(5, max(1,length(col)/10))
        at.z <- pretty(zlim,n=n,min.n=max(n %/% 3,1))

        ## es sieht nicht schoen aus, wenn pretty die letzte oder
        ## erste zahl weit ausserhalb des zlim legt.
        ## heuristisch nur 25%  (oder so) ueberschreitung bzgl
        ## intervalllaenge zulassen:
        tol <- diff(at.z)[1] / 4
        at.z <- at.z[(at.z>=zlim[1]-tol) & (at.z<=zlim[2]+tol)]
      }
    if(!is.numeric(at.z) || is.unsorted(at.z))
        stop("`at.z' must be numeric non-decreasing")
    n.at <- length(at.z)
    nc   <- length(col)
    if(n.at >= nc)
        stop("length(at.z) must be (much) smaller than length(col)")
    dz <- diff(zlim)
    ## The colors must run equidistantly from zlim[1] to zlim[2];
    ## col[i] is for z-interval zlim[1] + [i-1, i) * dz/nc  ; i = 1:nc
    ## i.e., an at.z[] value z0 is color i0 = floor(nc * (z0 - zlim[1])/dz)
    at.i <- floor(nc * (at.z - zlim[1])/dz )
    ## Possibly extend colors by `background' to the left and right
    bgC <- if(is.null(bg)) NA else bg
    if((xtra.l <- 1 - at.i[1]) > 0) {
        at.i <- at.i + xtra.l
        col <- c(rep(bgC, xtra.l), col)
    }
    if((xtra.r <- at.i[n.at] - nc) > 0)
        col <- c(col, rep(bgC, xtra.r))
    lgd <- character(length(col))

    ## folgende if-Anweisung ist neu:
    if (is.null(legnd)) lgd[at.i] <-format(at.z, dig = 3)
    else {
      if (length(legnd)!=length(at.z))
        stop("at.z and legnd must have the same length")
      lgd[at.i] <- legnd
    }
    if((V <- R.version)$major <= 1 && V$minor <= 3.0 && V$status == "")
{
        ## stop-gap fix around the bug that "NA" is not a valid color:
        if(is.na(bgC)) {
            lgd <- lgd[!is.na(col)]
            col <- col[!is.na(col)]
        }
    }
    legend(x,y, legend = rev(lgd), col = rev(col),
           y.i = lwd/16, bty = bty, lwd = lwd, bg = bg, ...)
}



## From  example(image):
data(volcano)
x <- 10*(1:nrow(volcano))
y <- 10*(1:ncol(volcano))

cols <- terrain.colors(100)

op <- par(mar = par("mar")+c(0,0,0,3), xpd = NA)
image(x, y, volcano, col = cols)
## Look :
image.legend(800, 600, zlim= range(volcano), col = cols, trace=TRUE)
image.legend(730, 600, zlim= range(volcano), col = cols, bg = "thistle")
image.legend(730,  15, zlim= range(volcano), col = cols, bg = "light
blue",
             at.z = range(volcano), yjust = 0, lwd = 2, y.interspace = 0.12)
## to check the legend:
contour(x, y, volcano, levels = seq(90, 200, by=5), add = TRUE, col = "peru")


#########################
## ein paar mehr Beispiele
image(x, y, volcano, col = cols)
n <- c(5,10,20,30,40,100)
for (i in 1:length(n))
  image.legend( (i-1)*140,  15, zlim= range(volcano),bg=0,yju=0,
               col=heat.colors(n[i]))

image(x, y, volcano, col = cols)
image.legend( 700,  15, zlim= range(volcano),bg=0,yju=0,
               col=heat.colors(30),
             at.z = range(volcano), legnd=c("low","high"))


--GtXdrZquwx--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tklistaddr@keittlab.bio.sunysb.edu  Tue Aug 28 21:52:46 2001
From: tklistaddr@keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Tue, 28 Aug 2001 16:52:46 -0400
Subject: [Rd] Suggested change to documentation
Message-ID: <3B8C049E.3010100@keittlab.bio.sunysb.edu>

Its not clear from the documentation whether one should do

\keyword[key1, key2}

or

\keyword{key1}
\keyword{key2}

in .Rd files.  I believe the latter is correct.  (At least 'R CMD check' 
complains when given the first version.)  It would help to make this 
explicit in the R extension writing docs.

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Aug 28 22:16:42 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 28 Aug 2001 22:16:42 +0100 (BST)
Subject: [Rd] Suggested change to documentation
In-Reply-To: <3B8C049E.3010100@keittlab.bio.sunysb.edu>
Message-ID: <Pine.GSO.4.31.0108282213040.29684-100000@auk.stats>

On Tue, 28 Aug 2001, Timothy H. Keitt wrote:

> Its not clear from the documentation whether one should do
>
> \keyword[key1, key2}
>
> or
>
> \keyword{key1}
> \keyword{key2}
>
> in .Rd files.  I believe the latter is correct.  (At least 'R CMD check'
> complains when given the first version.)  It would help to make this
> explicit in the R extension writing docs.

The second is indeed correct.

Where is this unclear in R-exts.texi?  That says

@item \keyword@{@var{key}@}
Each @code{\keyword} entry should specify one of the standard keywords
(as listed in the file @file{$R_HOME/doc/KEYWORDS.db}).  There must be
at least one @code{\keyword} entry, but can be more that one if the @R{}
object being documented falls into more than one category.

Note `one of'.  If you can point us at the problem, we can fix it in time
for 1.3.1, but this has come up before and we've not located anything that
might lead to the idea that the first is correct.  (It is \keyword{} not
\keywords{}, too.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tklistaddr@keittlab.bio.sunysb.edu  Wed Aug 29 04:14:48 2001
From: tklistaddr@keittlab.bio.sunysb.edu (Timothy H. Keitt)
Date: Tue, 28 Aug 2001 23:14:48 -0400
Subject: [Rd] Suggested change to documentation
References: <Pine.GSO.4.31.0108282213040.29684-100000@auk.stats>
Message-ID: <3B8C5E28.20608@keittlab.bio.sunysb.edu>

Actually, I noticed the latest version of prompt() nicely comments the 
keyword entry with "ONLY ONE KEYWORD PER ENTRY..." or something like 
that, so its probably not a big deal.  Just remember, we read these 
things at break-neck speed (at least I don't have time to carefully 
digest complicated documentation), so it has to be really simple.  I got 
tripped up with "keyword entry" thinking that there were multiple 
entries per \keyword{} section.  Perhaps "Each \keyword 
(section|stanza|clause|?) can contain one and only one keyword [from the 
database...].  Use multiple \keyword ?? if more than one keyword is 
desired."  Even better, put several keywords in one of the examples.

Tim

Prof Brian D Ripley wrote:

>On Tue, 28 Aug 2001, Timothy H. Keitt wrote:
>
>>Its not clear from the documentation whether one should do
>>
>>\keyword[key1, key2}
>>
>>or
>>
>>\keyword{key1}
>>\keyword{key2}
>>
>>in .Rd files.  I believe the latter is correct.  (At least 'R CMD check'
>>complains when given the first version.)  It would help to make this
>>explicit in the R extension writing docs.
>>
>
>The second is indeed correct.
>
>Where is this unclear in R-exts.texi?  That says
>
>@item \keyword@{@var{key}@}
>Each @code{\keyword} entry should specify one of the standard keywords
>(as listed in the file @file{$R_HOME/doc/KEYWORDS.db}).  There must be
>at least one @code{\keyword} entry, but can be more that one if the @R{}
>object being documented falls into more than one category.
>
>Note `one of'.  If you can point us at the problem, we can fix it in time
>for 1.3.1, but this has come up before and we've not located anything that
>might lead to the idea that the first is correct.  (It is \keyword{} not
>\keywords{}, too.)
>


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Wed Aug 29 18:14:19 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Wed, 29 Aug 2001 19:14:19 +0200 (MET DST)
Subject: [Rd] problem in plot(), combining log="y" with type="s" (PR#1078)
Message-ID: <200108291714.TAA15580@pubhealth.ku.dk>

I just noticed this behavior of plot().  If you combine: log="y", with type
="s", specify ylim, AND have plotting points outside of ylim, then the R
process hangs.
For example:

plot(1:10,seq(0.0001,1,length=10),ylim=c(0.01,1),type="s",log="y")

It will also hang if the original plot() command did not specify ylim, but
a subsequent
lines(x,y,type="s")
has data points outside the plotting limits established by plot.

In Windows 98, [Esc] does not interrupt the loop, but in Irix, ^C does.

I've found this in both:

--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status =
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

AND

--please do not edit the information below--

Version:
 platform = mips-sgi-irix6.5
 arch = mips
 os = irix6.5
 system = mips, irix6.5
 status =
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base


R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From stephen@cogsci.ed.ac.uk  Wed Aug 29 19:46:17 2001
From: stephen@cogsci.ed.ac.uk (stephen@cogsci.ed.ac.uk)
Date: Wed, 29 Aug 2001 20:46:17 +0200 (MET DST)
Subject: [Rd] Array.rd - typos and suggestion (PR#1079)
Message-ID: <200108291846.UAA16020@pubhealth.ku.dk>

Full_Name: Stephen Eglen
Version: 1.3.0
OS: Redhat 6.1
Submission from: (NULL) (128.252.204.21)


in R-1.3.0/src/library/base/man/array.Rd there are a few typos:

line 16 reated -> created
line 17 idices -> indices
line 19 compoent -> component

The documentation also seems to refer to the first argument as both
`data' and `x' (for the default value of arg 2) which is confusing.
I suggest changing line 10 to:
array(data, dim = length(data), dimnames = NULL)

and changing \code{x} to \code{data} on lines 26,28 and 29.

Cheers, Stephen



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.murrell@auckland.ac.nz  Wed Aug 29 21:53:42 2001
From: p.murrell@auckland.ac.nz (Paul Murrell)
Date: Thu, 30 Aug 2001 08:53:42 +1200
Subject: [Rd] problem in plot(), combining log="y" with type="s" (PR#1078)
References: <200108291714.TAA15580@pubhealth.ku.dk>
Message-ID: <005801c130cc$b035c4e0$175dd882@stat.auckland.ac.nz>

Hi


> I just noticed this behavior of plot().  If you combine: log="y", with
type
> ="s", specify ylim, AND have plotting points outside of ylim, then the R
> process hangs.
> For example:
>
> plot(1:10,seq(0.0001,1,length=10),ylim=c(0.01,1),type="s",log="y")
>
> It will also hang if the original plot() command did not specify ylim, but
> a subsequent
> lines(x,y,type="s")
> has data points outside the plotting limits established by plot.
>
> In Windows 98, [Esc] does not interrupt the loop, but in Irix, ^C does.


Thanks for the report.  This is fixed in 1.3.1 (coming soon).

For the record, I'm assuming this is (yet another) example of the bug that
was fixed for bug#997 (bug in CSclipline)

Paul



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ljlehou@sandia.gov  Thu Aug 30 00:40:15 2001
From: ljlehou@sandia.gov (ljlehou@sandia.gov)
Date: Thu, 30 Aug 2001 01:40:15 +0200 (MET DST)
Subject: [Rd] bug in histogram rendering (PR#1080)
Message-ID: <200108292340.BAA17093@pubhealth.ku.dk>

Full_Name: Leslea J. Lehoucq
Version: 1.3.0
OS: Solaris 7
Submission from: (NULL) (134.253.26.10)


When one creates a histogram with the freq=FALSE (i.e. plot
the density on the Y-axis), the density values are off by a 
factor of 10.  For instance, a bin in which 50% of the plotted
values fall is marked 0.05, not 0.50, on the Y-axis.  Instead
of the density summing to 1.0, it sums to 0.1.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Aug 30 06:56:41 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 30 Aug 2001 07:56:41 +0200 (MET DST)
Subject: [Rd] bug in histogram rendering (PR#1080)
Message-ID: <200108300556.HAA17714@pubhealth.ku.dk>

On Thu, 30 Aug 2001 ljlehou@sandia.gov wrote:

> Full_Name: Leslea J. Lehoucq
> Version: 1.3.0
> OS: Solaris 7
> Submission from: (NULL) (134.253.26.10)
>
>
> When one creates a histogram with the freq=FALSE (i.e. plot
> the density on the Y-axis), the density values are off by a
> factor of 10.  For instance, a bin in which 50% of the plotted
> values fall is marked 0.05, not 0.50, on the Y-axis.  Instead
> of the density summing to 1.0, it sums to 0.1.

It should integrate to one, not sum to one.
Can you give us an example of what you think is wrong?
For example,

set.seed(1)
Y <- runif(100)
hist(Y, freq=F)

correctly has an average level of 1, sum 5.

Calling them `relative frequencies' is perhaps misleading (relative to
what?), but then what hist() does by default is not a histogram in the
terminology in use in much of the world.  Some of also argue it is
extremely misleading unless the bins are all of the same width.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pollari@sun3.oulu.fi  Fri Aug 31 06:54:36 2001
From: pollari@sun3.oulu.fi (pollari@sun3.oulu.fi)
Date: Fri, 31 Aug 2001 07:54:36 +0200 (MET DST)
Subject: [Rd] problems installing R on Solaris 2.8 machine (PR#1081)
Message-ID: <200108310554.HAA29912@pubhealth.ku.dk>

I've just installed R 1.3.0, and everything went fine except that
the resulting directories and files were owned by root, and for ordinary
users there was no access for most of them. This was also the case with
a large amount of files. I've fixed the installation manually, but it
took quite a lot of time.

	Pivi Pollari
	University of Oulu
	Computer services center

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From replypro@mcgraw-hill.com.tw  Fri Aug 31 11:48:20 2001
From: replypro@mcgraw-hill.com.tw (=?big5?B?s8Gu5sO5p8a6uA==?=)
Date: Fri, 31 Aug 2001 18:48:20 +0800
Subject: [Rd] =?big5?B?tfizpbZWrMm3c67RqHQgLS2hbanKvKShQsV2pE+hQrRjpua7ULdMr7otLb9ztfg=?=
 =?big5?B?uEGpVOCsqrqopKbip+q6dLlDwLihbg==?=
Message-ID: <200108311049.MAA20089@stat.math.ethz.ch>

This is a multi-part message in MIME format.

------=_NextPart_000_0009_01C1324D.85230560
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_000A_01C1324D.85230560"


------=_NextPart_001_000A_01C1324D.85230560
Content-Type: text/plain;
	charset="big5"
Content-Transfer-Encoding: quoted-printable

Dear r-devel,

=AC=B0=A4=B0=BB=F2=A4@=AF=EB=A4H=B9=EF=A4k=A5=CD=AA=BA=A8=E8=AAO=A6L=B6H=B4=
N=ACO=B7=C5=ACX=A1B=B5=BD=C5=E9=A4H=B7N=A1B=BBy=A8=A5=AF=E0=A4O=B1j=A1F
=A6=D3=AC=DB=B9=EF=A6a=BB{=AC=B0=A8k=A5=CD=ABh=A4=F1=B8=FB=ABi=B4=B1=A1B=BD=
=C4=B0=CA=A1B=A6n=A6=E2=A1B=AA=C5=B6=A1=B7P=A1B=A4=E8=A6V=B7P=A8=CE=A1H
=A7A=ACO=A7_=B4=BF=B8g=C3h=BA=C3=B9L=A1A
=B3o=A8=C7=A8=E8=AAO=A6L=B6H=A4=A4=AA=BA=A8=E2=A9=CA=AEt=B2=A7=A8s=B3=BA=AC=
O=A8k=A4k=A8=E2=A9=CA=A6b=A5=CD=B2z=B5o=AEi=A4W=BBP=A5=CD=AD=D1=A8=D3=AA=BA=
=A4=A3=A6P=BF=F2=B6=C7=A6]=A4l=A9=D2=B3y=A6=A8=AA=BA=A1A
=A9=CE=ACO=AB=E1=A4=D1=AA=BA=B1=D0=BEi=BBP=A4=E5=A4=C6=A9=D2=AB=AC=B6=EC=A5=
X=A8=D3=AA=BA=A1H
=A6=D3=A4=A3=A6P=A4=E5=A4=C6=A4=A4=B9=EF=A8k=A4l=AE=F0=B7=A7=BBP=A4k=A9=CA=
=AFS=BD=E8=A9=CE=A6h=A9=CE=A4=D6=AA=BA=B1j=BD=D5=BBP=AD=AB=B5=F8=A1A
=A4S=A9M=B3o=BC=CB=AA=BA=A8=E8=AAO=A6L=B6H=A6=B3=A4=B0=BB=F2=C3=F6=ABY=A9=
O=A1H
=A5=E7=A9=CE=B3o=A4@=A4=C1=A5u=ACO=AC=B0=AE=BA=B6=EC=A5X=C2=F9=A9=CA=A4G=A4=
=B8=BB=F9=AD=C8=C6[=A6=D3=AC=EF=C6w=AA=FE=B7|=A5X=AA=BA=B9L=AE=C9=B0g=AB=E4=
=A1H
=AA=BE=A6W=AA=C0=B7|=A4=DF=B2z=BE=C7=AEa=C0=B9=ACf=B4=B5=B1=D0=B1=C2=B1N=A6=
b=A5=BB=AE=D1=A4=A4=A1A
=B1q=B8A=A9T=E0=AC=AA=BA=C6[=C2I=A1A=AC=B0=A7A=B8=D1=B6}=B3o=A4@=B3s=A6=EA=
=C3=F6=A9=F3=A9=CA=A7O=BBP=A6=E6=AC=B0=BC=D2=A6=A1=AA=BA=BA=C3=B0=DD=A1C
=A6b=A5=BB=AE=D1=A4=A4=A1A=C0=B9=ACf=B4=B5=B1=D0=B1=C2=A5H=B7=A5=AC=B0=A4=
=DE=A4H=A4J=B3=D3=AA=BA=A4=E8=A6=A1=A1A
=AC=B0=A7=DA=AD=CC=A4=B6=B2=D0=A4F=BE=C7=AC=C9=A5=D8=ABe=B9=EF=B8A=A9T=E0=
=AC=A4=CE=A8=E4=B1q=A5j=A6=DC=A4=B5=B9=EF=A4H=C3=FE=A4=DF=B2z=AA=BA=BCv=C5=
T=AA=BA=BB{=C3=D1=A1C
=A7@=AA=CC=A4=DE=A5=CE=A4F=B0w=B9=EF=B6W=B9L=A4K=A4d=A6W=A6=A8=A6~=A8k=A4=
k=A9M=A8=E0=B5=A3=A9=D2=B0=B5=AA=BA=AD=EC=B3=D0=A9=CA=AC=E3=A8s=A1A=A5H=A4=
=CE=A9M=B3o=AD=D3=A5D=C3D=A6=B3=C3=F6=AA=BA=A5@=AC=C9=A4=E5=BE=C7=A1A
=B1N=A8p=B1K=AA=BA=AD=D3=AE=D7=A5v=A9M=B2=C4=A4@=A4=E2=AA=BA=AC=EC=BE=C7=AC=
=E3=A8s=A5=A9=A7=AE=A6=EA=B3s=A1A
=A5H=B1=B4=AF=C1=B8A=A9T=E0=AC=A6b=A4H=C3=FE=A4=DF=B4=BC=A9M=A4H=C3=FE=A9=
R=B9B=B4X=A5G=A6U=AD=D3=AD=B1=A6V=A4W=A9=D2=A7=EA=BAt=AA=BA=A8=A4=A6=E2=A1=
C
=A7@=AA=CC=A7i=B6D=A7=DA=AD=CC=A1A=B8A=A9T=E0=AC=ACO=A6p=A6=F3=BCv=C5T=BB=
y=A8=A5=AF=E0=A4O=A1B=BB{=AA=BE=A1B=AA=C5=B6=A1=A9w=A6=EC=A1B=A7=DA=AD=CC=
=A9=D2=B1q=A8=C6=AA=BA=C2=BE=B7~=A1B
=A7=DA=AD=CC=B7|=A6=A8=AC=B0=A4=B0=BB=F2=BC=CB=AA=BA=B1=A1=A4H=A1B=A4V=A4=
=D2=A1B=A9d=A4l=A9M=A4=F7=A5=C0=A1B
=AC=C6=A6=DC=A9=F3=A7=DA=AD=CC=B7L=AF=BA=AA=BA=A4=E8=A6=A1=B5=A5=A1C
=B8A=A9T=E0=AC=B6=EC=B3y=A4F=A7=DA=AD=CC=B9=EF=A9=CA=A1B=C5v=A4O=A1B=BC=C9=
=A4O=A6=E6=AC=B0=BBP=BFW=A5e=A6a=A6=EC=AA=BA=BC=A4=B1=E6=A1A
=A7=F3=ACO=A7=DA=AD=CC=B7Q=B1=E6=A6=A8=AC=B0=AD^=B6=AF=A1B=A5D=AE_=AA=CC=A1=
A=A9=CE=ACO=C1=E2=A5=FA=BFO=B5J=C2I=AA=BA=AE=DA=B7=BD=A1C
=A5L=A8=C3=A5B=BB=A1=A9=FA=A4F=A1A=B8A=A9T=E0=AC=A6p=A6=F3=AF=E0=B8=D1=C4=
=C0=A8=E2=A9=CA=A4@=AF=EB=A6b=AB=E4=A6=D2=A9M=B7=BE=B3q=A4=E8=A6=A1=A4W=AA=
=BA=AEt=B2=A7=A1C
=B9=EF=A9=F3=B8A=A9T=E0=AC=B3o=AD=D3=B4=AE=ADt=A4F=B3=CC=A6h=B4c=A6W=A1B=BE=
D=A8=FC=B3=CC=A6h=BB~=B8=D1=AA=BA=A4H=C3=FE=BFE=AF=C0=A1A=A5=BB=AE=D1=B4=A3=
=A8=D1=A4F=A4@=AD=D3=A7O=A5X=A4=DF=B5=F4=AA=BA=C6[=C2I=A1C
=A5=F4=A6=F3=B9=EF=A4H=C3=FE=A6=E6=AC=B0=AA=BA=A5=CD=AA=AB=A9=CA=AE=DA=B7=
=BD=B7P=BF=B3=BD=EC=AA=BA=C5=AA=AA=CC=A1A=B1N=B1q=A5=BB=AE=D1=C0=F2=B1o=C5=
=E5=A9_=AA=BA=BE\=C5=AA=B7P=A8=FC=A9M=C2=D7=B4I=AA=BA=B7s=AA=BE=A1C


=20
=A1m=A9=CA=BC=A4=A1B=C5v=A4O=A1B=B4c=A6=E6=BBP=B7L=AF=BA=A1G=BFs=B5=F8=B8=
A=A9T=E0=AC=AA=BA=A8=A4=A6=E2=A7=EA=BAt=B9C=C0=B8=A1n
 =A7@    =AA=CC=A1GJames McBride Dabbs/Mary Godwin Dabbs =
=B3\=AE=CA=BA=D6 =C4=B6
 =AE=D1    =A8t=A1G=B5=F8=B3=A5=B6V=AC=C9 BB001
 =C1` =AD=B6 =BC=C6=A1G320=AD=B6
 =A9w    =BB=F9=A1G320=A4=B8
 I S B N =A1G957-493-412-8

-------------------------------------------------------------------------=
-------



=B3=C1=AE=E6=C3=B9=A7=C6=BA=B8=A5X=AA=A9=A4=BD=A5q =
=A5x=C6W=A4=C0=A4=BD=A5q
Tel 02-27272211  Fax 02-23463300
=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw


------=_NextPart_001_000A_01C1324D.85230560
Content-Type: text/html;
	charset="big5"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; charset=3Dbig5">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#000000 background=3D"">
<DIV><FONT face=3DArial color=3D#ffffff size=3D2>Dear =
r-devel,</FONT></DIV>
<DIV><FONT face=3DArial color=3D#c0c0c0></FONT>&nbsp;</DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=AC=B0=A4=B0=BB=F2=A4@=AF=EB=A4H=B9=EF=A4k=A5=CD=AA=BA=A8=E8=AAO=
=A6L=B6H=B4N=ACO=B7=C5=ACX=A1B=B5=BD=C5=E9=A4H=B7N=A1B=BBy=A8=A5=AF=E0=A4=
O=B1j=A1F</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A6=D3=AC=DB=B9=EF=A6a=BB{=AC=B0=A8k=A5=CD=ABh=A4=F1=B8=FB=ABi=B4=
=B1=A1B=BD=C4=B0=CA=A1B=A6n=A6=E2=A1B=AA=C5=B6=A1=B7P=A1B=A4=E8=A6V=B7P=A8=
=CE=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A7A=ACO=A7_=B4=BF=B8g=C3h=BA=C3=B9L=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B3o=A8=C7=A8=E8=AAO=A6L=B6H=A4=A4=AA=BA=A8=E2=A9=CA=AEt=B2=A7=A8=
s=B3=BA=ACO=A8k=A4k=A8=E2=A9=CA=A6b=A5=CD=B2z=B5o=AEi=A4W=BBP=A5=CD=AD=D1=
=A8=D3=AA=BA=A4=A3=A6P=BF=F2=B6=C7=A6]=A4l=A9=D2=B3y=A6=A8=AA=BA=A1A</FON=
T></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A9=CE=ACO=AB=E1=A4=D1=AA=BA=B1=D0=BEi=BBP=A4=E5=A4=C6=A9=D2=AB=AC=
=B6=EC=A5X=A8=D3=AA=BA=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A6=D3=A4=A3=A6P=A4=E5=A4=C6=A4=A4=B9=EF=A8k=A4l=AE=F0=B7=A7=BBP=
=A4k=A9=CA=AFS=BD=E8=A9=CE=A6h=A9=CE=A4=D6=AA=BA=B1j=BD=D5=BBP=AD=AB=B5=F8=
=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A4S=A9M=B3o=BC=CB=AA=BA=A8=E8=AAO=A6L=B6H=A6=B3=A4=B0=BB=F2=C3=F6=
=ABY=A9O=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5=E7=A9=CE=B3o=A4@=A4=C1=A5u=ACO=AC=B0=AE=BA=B6=EC=A5X=C2=F9=A9=
=CA=A4G=A4=B8=BB=F9=AD=C8=C6[=A6=D3=AC=EF=C6w=AA=FE=B7|=A5X=AA=BA=B9L=AE=C9=
=B0g=AB=E4=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=AA=BE=A6W=AA=C0=B7|=A4=DF=B2z=BE=C7=AEa=C0=B9=ACf=B4=B5=B1=D0=B1=
=C2=B1N=A6b=A5=BB=AE=D1=A4=A4=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B1q=B8A=A9T=E0=AC=AA=BA=C6[=C2I=A1A=AC=B0=A7A=B8=D1=B6}=B3o=A4@=
=B3s=A6=EA=C3=F6=A9=F3=A9=CA=A7O=BBP=A6=E6=AC=B0=BC=D2=A6=A1=AA=BA=BA=C3=B0=
=DD=A1C<BR>=A6b=A5=BB=AE=D1=A4=A4=A1A=C0=B9=ACf=B4=B5=B1=D0=B1=C2=A5H=B7=A5=
=AC=B0=A4=DE=A4H=A4J=B3=D3=AA=BA=A4=E8=A6=A1=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=AC=B0=A7=DA=AD=CC=A4=B6=B2=D0=A4F=BE=C7=AC=C9=A5=D8=ABe=B9=EF=B8=
A=A9T=E0=AC=A4=CE=A8=E4=B1q=A5j=A6=DC=A4=B5=B9=EF=A4H=C3=FE=A4=DF=B2z=AA=BA=
=BCv=C5T=AA=BA=BB{=C3=D1=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7@=AA=CC=A4=DE=A5=CE=A4F=B0w=B9=EF=B6W=B9L=A4K=A4d=A6W=A6=A8=A6=
~=A8k=A4k=A9M=A8=E0=B5=A3=A9=D2=B0=B5=AA=BA=AD=EC=B3=D0=A9=CA=AC=E3=A8s=A1=
A=A5H=A4=CE=A9M=B3o=AD=D3=A5D=C3D=A6=B3=C3=F6=AA=BA=A5@=AC=C9=A4=E5=BE=C7=
=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=B1N=A8p=B1K=AA=BA=AD=D3=AE=D7=A5v=A9M=B2=C4=A4@=A4=E2=AA=BA=AC=EC=
=BE=C7=AC=E3=A8s=A5=A9=A7=AE=A6=EA=B3s=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5H=B1=B4=AF=C1=B8A=A9T=E0=AC=A6b=A4H=C3=FE=A4=DF=B4=BC=A9M=A4H=
=C3=FE=A9R=B9B=B4X=A5G=A6U=AD=D3=AD=B1=A6V=A4W=A9=D2=A7=EA=BAt=AA=BA=A8=A4=
=A6=E2=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7@=AA=CC=A7i=B6D=A7=DA=AD=CC=A1A=B8A=A9T=E0=AC=ACO=A6p=A6=F3=BC=
v=C5T=BBy=A8=A5=AF=E0=A4O=A1B=BB{=AA=BE=A1B=AA=C5=B6=A1=A9w=A6=EC=A1B=A7=DA=
=AD=CC=A9=D2=B1q=A8=C6=AA=BA=C2=BE=B7~=A1B</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A7=DA=AD=CC=B7|=A6=A8=AC=B0=A4=B0=BB=F2=BC=CB=AA=BA=B1=A1=A4H=A1=
B=A4V=A4=D2=A1B=A9d=A4l=A9M=A4=F7=A5=C0=A1B</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=AC=C6=A6=DC=A9=F3=A7=DA=AD=CC=B7L=AF=BA=AA=BA=A4=E8=A6=A1=B5=A5=
=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B8A=A9T=E0=AC=B6=EC=B3y=A4F=A7=DA=AD=CC=B9=EF=A9=CA=A1B=C5v=A4O=
=A1B=BC=C9=A4O=A6=E6=AC=B0=BBP=BFW=A5e=A6a=A6=EC=AA=BA=BC=A4=B1=E6=A1A</F=
ONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7=F3=ACO=A7=DA=AD=CC=B7Q=B1=E6=A6=A8=AC=B0=AD^=B6=AF=A1B=A5D=AE=
_=AA=CC=A1A=A9=CE=ACO=C1=E2=A5=FA=BFO=B5J=C2I=AA=BA=AE=DA=B7=BD=A1C</FONT=
></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5L=A8=C3=A5B=BB=A1=A9=FA=A4F=A1A=B8A=A9T=E0=AC=A6p=A6=F3=AF=E0=
=B8=D1=C4=C0=A8=E2=A9=CA=A4@=AF=EB=A6b=AB=E4=A6=D2=A9M=B7=BE=B3q=A4=E8=A6=
=A1=A4W=AA=BA=AEt=B2=A7=A1C<BR>=B9=EF=A9=F3=B8A=A9T=E0=AC=B3o=AD=D3=B4=AE=
=ADt=A4F=B3=CC=A6h=B4c=A6W=A1B=BED=A8=FC=B3=CC=A6h=BB~=B8=D1=AA=BA=A4H=C3=
=FE=BFE=AF=C0=A1A=A5=BB=AE=D1=B4=A3=A8=D1=A4F=A4@=AD=D3=A7O=A5X=A4=DF=B5=F4=
=AA=BA=C6[=C2I=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#ffffff size=3D2><FONT=20
color=3D#c0c0c0>=A5=F4=A6=F3=B9=EF=A4H=C3=FE=A6=E6=AC=B0=AA=BA=A5=CD=AA=AB=
=A9=CA=AE=DA=B7=BD=B7P=BF=B3=BD=EC=AA=BA=C5=AA=AA=CC=A1A=B1N=B1q=A5=BB=AE=
=D1=C0=F2=B1o=C5=E5=A9_=AA=BA=BE\=C5=AA=B7P=A8=FC=A9M=C2=D7=B4I=AA=BA=B7s=
=AA=BE=A1C</FONT></FONT></DIV>
<DIV><FONT face=3DMingLiu size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2><IMG style=3D"WIDTH: =
127px; HEIGHT: 178px" alt=3D""=20
hspace=3D0 src=3D"cid:000401c1320a$733269b0$1264a8c0@mie31" =
align=3Dbaseline=20
border=3D1><FONT face=3DMingLiu>&nbsp;</FONT></FONT></DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 color=3D#ffffff =
size=3D2>=A1m=A9=CA=BC=A4=A1B=C5v=A4O=A1B=B4c=A6=E6=BBP=B7L=AF=BA=A1G=BFs=
=B5=F8=B8A=A9T=E0=AC=AA=BA=A8=A4=A6=E2=A7=EA=BAt=B9C=C0=B8</FONT><FONT=20
face=3D=B2=D3=A9=FA=C5=E9 color=3D#ffffff =
size=3D2>=A1n<BR>&nbsp;=A7@&nbsp;&nbsp;&nbsp; =AA=CC=A1G<FONT=20
face=3DArial>James McBride Dabbs/Mary Godwin Dabbs</FONT> =
=B3\=AE=CA=BA=D6=20
=C4=B6<BR>&nbsp;=AE=D1&nbsp;&nbsp;&nbsp; =
=A8t=A1G=B5=F8=B3=A5=B6V=AC=C9&nbsp;BB001<BR>&nbsp;=C1` =AD=B6=20
=BC=C6=A1G320=AD=B6<BR>&nbsp;=A9w&nbsp;&nbsp;&nbsp; =
=BB=F9=A1G320=A4=B8<BR>&nbsp;I S B N=20
=A1G957-493-412-8</FONT></DIV>
<DIV>
<HR>
</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9><FONT color=3D#c0c0c0 =
size=3D2></FONT></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 color=3D#c0c0c0 =
size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2><FONT=20
color=3D#c0c0c0>=B3=C1=AE=E6=C3=B9=A7=C6=BA=B8=A5X=AA=A9=A4=BD=A5q&nbsp;=A5=
x=C6W=A4=C0=A4=BD=A5q</FONT></FONT></DIV>
<DIV><FONT face=3D"Comic Sans MS" color=3D#c0c0c0=20
size=3D2>Tel&nbsp;02-27272211&nbsp;&nbsp;Fax 02-23463300</FONT></DIV>
<DIV>
<DIV><FONT face=3DMingLiu size=3D2><A=20
href=3D"mailto:=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw"><FONT =
face=3D"Comic Sans MS"=20
color=3D#c0c0c0>=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw</FONT></A><=
/FONT><FONT face=3D=B2=D3=A9=FA=C5=E9=20
size=3D2></DIV></DIV></FONT>
<DIV><FONT face=3DMingLiu size=3D2></FONT>&nbsp;</DIV></BODY></HTML>

------=_NextPart_001_000A_01C1324D.85230560--

------=_NextPart_000_0009_01C1324D.85230560
Content-Type: image/jpeg;
	name="heros.jpg"
Content-Transfer-Encoding: base64
Content-ID: <000401c1320a$733269b0$1264a8c0@mie31>

/9j/4AAQSkZJRgABAQEB0QHRAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0a
HBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIy
MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCACyAH8DASIA
AhEBAxEB/8QAHAABAAIDAQEBAAAAAAAAAAAAAAUGAwQHAgEI/8QANRAAAQQBAwIEBAUDBAMAAAAA
AQACAwQRBRIhBjETQVFxFCIyYQcjgaGxFUKRJDRi0YPB4f/EABoBAQACAwEAAAAAAAAAAAAAAAAB
BAIDBQb/xAApEQACAgEDAwMDBQAAAAAAAAAAAQIDEQQhMQUSQSJhkXGh8DJCgdHh/9oADAMBAAIR
AxEAPwDv6IiAIiIAiZRAEREAREQBERAEREAREQBERAERUvr/AKjtaDBUFWRjHSuduLx5BbaaZXTV
ceWarro0wdkuEVrrH8VNV6WuOhOj8l5EZm+l7QT8wIPtwQo/Tvxt1Gy+MT6CxocM7mvdj+FTdY6l
Zq9vxLzjblk+XBYMYHoPRbmh02TbalWCUxz92M+oeeRnOMLuR6XWvVNp4W6Rx59Sml2qLTb2b/o6
Vpf4ou1CN736UGBm7c1kxccNBOR8v2PdWmzrs0Wiuvms2DONnjSAYB7E/wDQ5VGh0OrX6TdeNKF0
gqTx8P2ljg9/zf8AL0/RWmbTY2aG+q/TvBksvZGwROMp7fUcjAwMrh2yi36Y4OxVGSXqlk0p+u7U
G6U6ZughLBYAeA+PdwB6EkkEYPbv2Vs025PfossS1JKjn5PhS4LgPLsqJpIqF726jcrWRclGysHM
a5sp/Lw5oA5AAPbjlWqhFqb6dOSK3LvicWTxWmD52g47gdx5Ed1qNpK3bTaNOe1Kfy4WGRwAycAZ
OOVE2erdLpzRxzWcOc3c4bD8ozjy+5wtbryOSfpueKGBr5C0uMjhxE0cuPvjj9VzaWjZfqzC9rhD
FZbGGx13N3fKHHAwTjgED79lKJwdnrX4LcXiQOc9mSNwaccLxJq1CKcQSW4WSn+xzsH/AAq9pM2p
QdGwTsEDovhnSF0z3B/OT6emF5gFqtpejw29OpTCd0cJLnEuAIyTyO/CLGdzGXd+0sjdUoP+m7XP
/kCysuVpPosRO9ngqsax0TSsOhno1KkT4+HRuiy2Rp75wQqT1S6hBahqaVSEMrGj8yu/vjII2gke
Xur1Glrvkowk/hbfcoX6qyiLlOK+Xv8AY7IiIqB0AuPfitVj1nXadOS0YI68RccAuyT2GP0C7CuR
dZaJrF3qSxPFp9iSIgBr2MJGF0OmKDv9bxsyh1GVkac1rLyil6PoFNt9kEksdcD65pDnGPRS+lap
/SNVJhe+aqXgEbcF4zwcZ7/qsEuiauw/mabc9zC4/wDpab2S1JwyZjoX8Ha9uDj2K9R21WJx7k01
xseXc7oyU2mmny8/B0XUqFO1o0TK8OpQNsy7Hse5+AHZLiWtKx1TYpwRvi1Ka18TDGXAzSg8yObk
ccDHrjsqXb1WzGHsrxGSF7Hcu/sJH9mc4ycf4Ux0kxjpHafVgfYifXLmy2mvbscMHYXZAIJPA8sr
y2q0c6t/B6jS62Fqw+ToL9VkGqtr14aYLY9zBbcWPkwcF27BwPTIyeVKUrt2a0Y7UdKOMsyzwbJk
cTn02jhRWh6ZXZc1OO03x3NfFnx8P2nwwcD0AzhbOj0abPj54a8ccosStZKxg3NHbjj9lQL5TdY1
GxbfPXlmsFjbFnxDDYaXCNheAPDOABjHfPZSmiaBV1nUdQt3XTSFssbm+I6N5Dtgzy0Y7EcL2OmL
l/x/Cs2IqxZLsdYjYJJHvdlxI25DSfXlS+gV30JLk9ud8JklDZIpWMYzfgAOYRjIIwEBmdpUjq8e
kQB0enM5lkeQXPGc7Ggdh6n04C+Sx37muVI5KQhqVHGUTCUODzggADGR3UpqEksdR5heGvPG7aXE
D1DRyT9lz86tqenR2KVXVXzOgLpGtfVe+WQFxcGnjjPIORx5IC+0qditYsmS06avI4OiY8fNH6jP
mPRe4dOp17MlmKtGyaT63taAXe6+0X2pKwdbjjjkPO1hJAH6+a2VKbXBDSfIREUEhfMBfUQHzA9F
xvq62/UuuZqUNqJrMthLXR4LCBknd5g8rr1yw2pSnsOBLYo3PIA5wBlfnPRrUdvqsWI5pJY57G/f
IMFxJyc/5K6PTa1Kbk/COd1GbjBRXlnYRBPplCqye5XZG6sI43mMOBlOcuPB45GFuOoXGC06IU7D
QGthOxu4Ozh2cADP2/hZr9Sq46TXdVmlax+6NzCSIsDOSf25UMRTsso7a1mE2bu8xPGfm47ny4Oc
YJ4PoqDe50EtiVbpe6w+Ozp8MsEhY3LBtz8vzOIyc8j9/spGHQqNaHwazXwRg52xvIGVD2a9StYt
V32rL2Qls8jd3PzE4aMYPmTnPos9PUalabxGXnmJ2+eWN7DnaQ0gnPIAzj7k4UZZJn1qjPHotjwL
88W1mXSOk+lo+o++MrljJtZtWIWM1KZ8skgmMQeXv2DB3DLQ3gNGPuCuuT6tpU1ZzJ5Q6JzGuc18
buzjgAjHmeMKHHSDprEUktgMiia1jWsacua1zyAT6YeAR9lAI7TYtY1Pp+vNFPHqIc+QtmstA7OI
B7ZHHooqJlrTb8k1bXfHlnOLDIWuLoSOx2cnaM4XQdI0eDRavw9aSUx99r3ZAPmR6ZPOOyrEXSvw
n4ku1Su8thmhMkjR5Ozg/oeFsgoNPu58GEnJNdvHknK7OoIa7GeLUsYaPneHBzvuVlE2vj6qtI+0
jlL9kWszCIiAIiIDFZh+IqzQk48RhZnHbIwuY0fwuv6Xcq2K92tJ8NIHgPYRuXU0W6q+yrKg+TTb
RXbhzXBV7NrquGVxi02lJFtw0NlOQfXtyo3+sdR1/Ckt0/maTuYIst/yFel8wFMb0lhwREqW3lSZ
BDX6D4WSWG7XkYcMD/HsoLWuoqd0gabrVWo7aWSR2Ku8PHlk9xhXWWpXmBEsMbx/yaCoq10lotzP
iUYwT5t4SudSeZL8/lE2RsksQePz2ZzZ/UXUDJpBNq2kWa4jA2NhOH7e33z78Lqei6k3U9KrWdwL
nxguwMDPmqxb/DTTJsmCWSI++Qox/Qeu6eGnS9XezZktAOMZ/ZWLZ6WyCUE4v6FaqvVQm3JqS+v+
Fn6j6x0zQWSQvsMde2F0cGeSfLPotToOzb1Ola1S68vlnl2tz2DQOw+2crkeq/h51FTsusPZLKSc
ueMuJ+55Xaeh6Umn9JUYJSTJtLnZGOS4lYSlRGhxhvJvn2M1C6V6nL9KT29yxIiKmXAiIgCIiAIi
IAiIgCIiAIiIBjPdAMdkRAEREAREQBERAEREAREQBERAEREAREQBERAEREAWhrUVybR7Uenv2XHM
IidnGHeRW+iAolbTus2P0nxbmWxyH4seIDvG7I/ZbmrUeqpeo5JqFpjNO+HcGxl2D4m04/fCt6ID
m50r8QDXrD48CVsrzL+aPmYQ3b/DlY9Ur9SP1qKWjZa2kA0Ojw3n1PPv/CsqICgM07ruKhPG/UWy
TibfHI3by3HblS+lQdSM1uSXUJWupOjdtYMfK7jGP3VoRCSsaFV6ghs6h/U5SYpP9v8Am7yzk/b2
Xrperr9RlsaxL4xc7dEXP3Y47Z/+KyohBWOl9P6hp27jtZu+PE85ibu3Ac+XorOiIAiIgCIiAIiI
AiIgCIiAIiIAiIgCIiAIiIAixOswsnELpGiQjIaTyVibqVJwH+pj5GQC7lAbSLUfqVSN7WunYC4Z
bz35x/K+DVKbi4CwzLSQRn0z/wBFAbiLVOo1BtJnZhw3A54I90g1CpZIEM7HE4wAeeUBtIiIAiIg
CIiAIiIAiIgNe1EXMEkUMb5mkY38fuo74O27xSadIHA2cZz6g/oplEBExw2nOa2ejVLc92+/ovL6
1prMfBU8nku+/t7kqYWKzXZagdC8kNdjOPscoCOdFOY9nwdMfI4AZyAfIYx2yvDIr7Jvy6tIbXcE
HBxn9uOFmdoVNz935jTlpyHY5GcfytmGhDBcmtMB8WYAPJPkOyAzxGQxgytDX+YByF7REAREQBER
AEREAREQBERAEREAREQBERAEREAREQBERAEREB//2Q==

------=_NextPart_000_0009_01C1324D.85230560--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From replypro@mcgraw-hill.com.tw  Fri Aug 31 11:52:56 2001
From: replypro@mcgraw-hill.com.tw (replypro@mcgraw-hill.com.tw)
Date: Fri, 31 Aug 2001 12:52:56 +0200 (MET DST)
Subject: [Rd] =?big5?B?tfizpbZWrMm3c67RqHQgLS2hbanKvKShQsV2pE+hQrRjpua7ULdMr7otLb9ztfg=?= (PR#1082)
Message-ID: <200108311052.MAA04173@pubhealth.ku.dk>

This is a multi-part message in MIME format.

------=_NextPart_000_0009_01C1324D.85230560
Content-Type: multipart/alternative;
	boundary="----=_NextPart_001_000A_01C1324D.85230560"


------=_NextPart_001_000A_01C1324D.85230560
Content-Type: text/plain;
	charset="big5"
Content-Transfer-Encoding: quoted-printable

Dear r-bugs,

=AC=B0=A4=B0=BB=F2=A4@=AF=EB=A4H=B9=EF=A4k=A5=CD=AA=BA=A8=E8=AAO=A6L=B6H=B4=
N=ACO=B7=C5=ACX=A1B=B5=BD=C5=E9=A4H=B7N=A1B=BBy=A8=A5=AF=E0=A4O=B1j=A1F
=A6=D3=AC=DB=B9=EF=A6a=BB{=AC=B0=A8k=A5=CD=ABh=A4=F1=B8=FB=ABi=B4=B1=A1B=BD=
=C4=B0=CA=A1B=A6n=A6=E2=A1B=AA=C5=B6=A1=B7P=A1B=A4=E8=A6V=B7P=A8=CE=A1H
=A7A=ACO=A7_=B4=BF=B8g=C3h=BA=C3=B9L=A1A
=B3o=A8=C7=A8=E8=AAO=A6L=B6H=A4=A4=AA=BA=A8=E2=A9=CA=AEt=B2=A7=A8s=B3=BA=AC=
O=A8k=A4k=A8=E2=A9=CA=A6b=A5=CD=B2z=B5o=AEi=A4W=BBP=A5=CD=AD=D1=A8=D3=AA=BA=
=A4=A3=A6P=BF=F2=B6=C7=A6]=A4l=A9=D2=B3y=A6=A8=AA=BA=A1A
=A9=CE=ACO=AB=E1=A4=D1=AA=BA=B1=D0=BEi=BBP=A4=E5=A4=C6=A9=D2=AB=AC=B6=EC=A5=
X=A8=D3=AA=BA=A1H
=A6=D3=A4=A3=A6P=A4=E5=A4=C6=A4=A4=B9=EF=A8k=A4l=AE=F0=B7=A7=BBP=A4k=A9=CA=
=AFS=BD=E8=A9=CE=A6h=A9=CE=A4=D6=AA=BA=B1j=BD=D5=BBP=AD=AB=B5=F8=A1A
=A4S=A9M=B3o=BC=CB=AA=BA=A8=E8=AAO=A6L=B6H=A6=B3=A4=B0=BB=F2=C3=F6=ABY=A9=
O=A1H
=A5=E7=A9=CE=B3o=A4@=A4=C1=A5u=ACO=AC=B0=AE=BA=B6=EC=A5X=C2=F9=A9=CA=A4G=A4=
=B8=BB=F9=AD=C8=C6[=A6=D3=AC=EF=C6w=AA=FE=B7|=A5X=AA=BA=B9L=AE=C9=B0g=AB=E4=
=A1H
=AA=BE=A6W=AA=C0=B7|=A4=DF=B2z=BE=C7=AEa=C0=B9=ACf=B4=B5=B1=D0=B1=C2=B1N=A6=
b=A5=BB=AE=D1=A4=A4=A1A
=B1q=B8A=A9T=E0=AC=AA=BA=C6[=C2I=A1A=AC=B0=A7A=B8=D1=B6}=B3o=A4@=B3s=A6=EA=
=C3=F6=A9=F3=A9=CA=A7O=BBP=A6=E6=AC=B0=BC=D2=A6=A1=AA=BA=BA=C3=B0=DD=A1C
=A6b=A5=BB=AE=D1=A4=A4=A1A=C0=B9=ACf=B4=B5=B1=D0=B1=C2=A5H=B7=A5=AC=B0=A4=
=DE=A4H=A4J=B3=D3=AA=BA=A4=E8=A6=A1=A1A
=AC=B0=A7=DA=AD=CC=A4=B6=B2=D0=A4F=BE=C7=AC=C9=A5=D8=ABe=B9=EF=B8A=A9T=E0=
=AC=A4=CE=A8=E4=B1q=A5j=A6=DC=A4=B5=B9=EF=A4H=C3=FE=A4=DF=B2z=AA=BA=BCv=C5=
T=AA=BA=BB{=C3=D1=A1C
=A7@=AA=CC=A4=DE=A5=CE=A4F=B0w=B9=EF=B6W=B9L=A4K=A4d=A6W=A6=A8=A6~=A8k=A4=
k=A9M=A8=E0=B5=A3=A9=D2=B0=B5=AA=BA=AD=EC=B3=D0=A9=CA=AC=E3=A8s=A1A=A5H=A4=
=CE=A9M=B3o=AD=D3=A5D=C3D=A6=B3=C3=F6=AA=BA=A5@=AC=C9=A4=E5=BE=C7=A1A
=B1N=A8p=B1K=AA=BA=AD=D3=AE=D7=A5v=A9M=B2=C4=A4@=A4=E2=AA=BA=AC=EC=BE=C7=AC=
=E3=A8s=A5=A9=A7=AE=A6=EA=B3s=A1A
=A5H=B1=B4=AF=C1=B8A=A9T=E0=AC=A6b=A4H=C3=FE=A4=DF=B4=BC=A9M=A4H=C3=FE=A9=
R=B9B=B4X=A5G=A6U=AD=D3=AD=B1=A6V=A4W=A9=D2=A7=EA=BAt=AA=BA=A8=A4=A6=E2=A1=
C
=A7@=AA=CC=A7i=B6D=A7=DA=AD=CC=A1A=B8A=A9T=E0=AC=ACO=A6p=A6=F3=BCv=C5T=BB=
y=A8=A5=AF=E0=A4O=A1B=BB{=AA=BE=A1B=AA=C5=B6=A1=A9w=A6=EC=A1B=A7=DA=AD=CC=
=A9=D2=B1q=A8=C6=AA=BA=C2=BE=B7~=A1B
=A7=DA=AD=CC=B7|=A6=A8=AC=B0=A4=B0=BB=F2=BC=CB=AA=BA=B1=A1=A4H=A1B=A4V=A4=
=D2=A1B=A9d=A4l=A9M=A4=F7=A5=C0=A1B
=AC=C6=A6=DC=A9=F3=A7=DA=AD=CC=B7L=AF=BA=AA=BA=A4=E8=A6=A1=B5=A5=A1C
=B8A=A9T=E0=AC=B6=EC=B3y=A4F=A7=DA=AD=CC=B9=EF=A9=CA=A1B=C5v=A4O=A1B=BC=C9=
=A4O=A6=E6=AC=B0=BBP=BFW=A5e=A6a=A6=EC=AA=BA=BC=A4=B1=E6=A1A
=A7=F3=ACO=A7=DA=AD=CC=B7Q=B1=E6=A6=A8=AC=B0=AD^=B6=AF=A1B=A5D=AE_=AA=CC=A1=
A=A9=CE=ACO=C1=E2=A5=FA=BFO=B5J=C2I=AA=BA=AE=DA=B7=BD=A1C
=A5L=A8=C3=A5B=BB=A1=A9=FA=A4F=A1A=B8A=A9T=E0=AC=A6p=A6=F3=AF=E0=B8=D1=C4=
=C0=A8=E2=A9=CA=A4@=AF=EB=A6b=AB=E4=A6=D2=A9M=B7=BE=B3q=A4=E8=A6=A1=A4W=AA=
=BA=AEt=B2=A7=A1C
=B9=EF=A9=F3=B8A=A9T=E0=AC=B3o=AD=D3=B4=AE=ADt=A4F=B3=CC=A6h=B4c=A6W=A1B=BE=
D=A8=FC=B3=CC=A6h=BB~=B8=D1=AA=BA=A4H=C3=FE=BFE=AF=C0=A1A=A5=BB=AE=D1=B4=A3=
=A8=D1=A4F=A4@=AD=D3=A7O=A5X=A4=DF=B5=F4=AA=BA=C6[=C2I=A1C
=A5=F4=A6=F3=B9=EF=A4H=C3=FE=A6=E6=AC=B0=AA=BA=A5=CD=AA=AB=A9=CA=AE=DA=B7=
=BD=B7P=BF=B3=BD=EC=AA=BA=C5=AA=AA=CC=A1A=B1N=B1q=A5=BB=AE=D1=C0=F2=B1o=C5=
=E5=A9_=AA=BA=BE\=C5=AA=B7P=A8=FC=A9M=C2=D7=B4I=AA=BA=B7s=AA=BE=A1C


=20
=A1m=A9=CA=BC=A4=A1B=C5v=A4O=A1B=B4c=A6=E6=BBP=B7L=AF=BA=A1G=BFs=B5=F8=B8=
A=A9T=E0=AC=AA=BA=A8=A4=A6=E2=A7=EA=BAt=B9C=C0=B8=A1n
 =A7@    =AA=CC=A1GJames McBride Dabbs/Mary Godwin Dabbs =
=B3\=AE=CA=BA=D6 =C4=B6
 =AE=D1    =A8t=A1G=B5=F8=B3=A5=B6V=AC=C9 BB001
 =C1` =AD=B6 =BC=C6=A1G320=AD=B6
 =A9w    =BB=F9=A1G320=A4=B8
 I S B N =A1G957-493-412-8

-------------------------------------------------------------------------=
-------



=B3=C1=AE=E6=C3=B9=A7=C6=BA=B8=A5X=AA=A9=A4=BD=A5q =
=A5x=C6W=A4=C0=A4=BD=A5q
Tel 02-27272211  Fax 02-23463300
=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw


------=_NextPart_001_000A_01C1324D.85230560
Content-Type: text/html;
	charset="big5"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D"text/html; charset=3Dbig5">
<META content=3D"MSHTML 5.50.4134.600" name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#000000 background=3D"">
<DIV><FONT face=3DArial color=3D#ffffff size=3D2>Dear =
r-bugs,</FONT></DIV>
<DIV><FONT face=3DArial color=3D#c0c0c0></FONT>&nbsp;</DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=AC=B0=A4=B0=BB=F2=A4@=AF=EB=A4H=B9=EF=A4k=A5=CD=AA=BA=A8=E8=AAO=
=A6L=B6H=B4N=ACO=B7=C5=ACX=A1B=B5=BD=C5=E9=A4H=B7N=A1B=BBy=A8=A5=AF=E0=A4=
O=B1j=A1F</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A6=D3=AC=DB=B9=EF=A6a=BB{=AC=B0=A8k=A5=CD=ABh=A4=F1=B8=FB=ABi=B4=
=B1=A1B=BD=C4=B0=CA=A1B=A6n=A6=E2=A1B=AA=C5=B6=A1=B7P=A1B=A4=E8=A6V=B7P=A8=
=CE=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A7A=ACO=A7_=B4=BF=B8g=C3h=BA=C3=B9L=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B3o=A8=C7=A8=E8=AAO=A6L=B6H=A4=A4=AA=BA=A8=E2=A9=CA=AEt=B2=A7=A8=
s=B3=BA=ACO=A8k=A4k=A8=E2=A9=CA=A6b=A5=CD=B2z=B5o=AEi=A4W=BBP=A5=CD=AD=D1=
=A8=D3=AA=BA=A4=A3=A6P=BF=F2=B6=C7=A6]=A4l=A9=D2=B3y=A6=A8=AA=BA=A1A</FON=
T></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A9=CE=ACO=AB=E1=A4=D1=AA=BA=B1=D0=BEi=BBP=A4=E5=A4=C6=A9=D2=AB=AC=
=B6=EC=A5X=A8=D3=AA=BA=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A6=D3=A4=A3=A6P=A4=E5=A4=C6=A4=A4=B9=EF=A8k=A4l=AE=F0=B7=A7=BBP=
=A4k=A9=CA=AFS=BD=E8=A9=CE=A6h=A9=CE=A4=D6=AA=BA=B1j=BD=D5=BBP=AD=AB=B5=F8=
=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A4S=A9M=B3o=BC=CB=AA=BA=A8=E8=AAO=A6L=B6H=A6=B3=A4=B0=BB=F2=C3=F6=
=ABY=A9O=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5=E7=A9=CE=B3o=A4@=A4=C1=A5u=ACO=AC=B0=AE=BA=B6=EC=A5X=C2=F9=A9=
=CA=A4G=A4=B8=BB=F9=AD=C8=C6[=A6=D3=AC=EF=C6w=AA=FE=B7|=A5X=AA=BA=B9L=AE=C9=
=B0g=AB=E4=A1H</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=AA=BE=A6W=AA=C0=B7|=A4=DF=B2z=BE=C7=AEa=C0=B9=ACf=B4=B5=B1=D0=B1=
=C2=B1N=A6b=A5=BB=AE=D1=A4=A4=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B1q=B8A=A9T=E0=AC=AA=BA=C6[=C2I=A1A=AC=B0=A7A=B8=D1=B6}=B3o=A4@=
=B3s=A6=EA=C3=F6=A9=F3=A9=CA=A7O=BBP=A6=E6=AC=B0=BC=D2=A6=A1=AA=BA=BA=C3=B0=
=DD=A1C<BR>=A6b=A5=BB=AE=D1=A4=A4=A1A=C0=B9=ACf=B4=B5=B1=D0=B1=C2=A5H=B7=A5=
=AC=B0=A4=DE=A4H=A4J=B3=D3=AA=BA=A4=E8=A6=A1=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=AC=B0=A7=DA=AD=CC=A4=B6=B2=D0=A4F=BE=C7=AC=C9=A5=D8=ABe=B9=EF=B8=
A=A9T=E0=AC=A4=CE=A8=E4=B1q=A5j=A6=DC=A4=B5=B9=EF=A4H=C3=FE=A4=DF=B2z=AA=BA=
=BCv=C5T=AA=BA=BB{=C3=D1=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7@=AA=CC=A4=DE=A5=CE=A4F=B0w=B9=EF=B6W=B9L=A4K=A4d=A6W=A6=A8=A6=
~=A8k=A4k=A9M=A8=E0=B5=A3=A9=D2=B0=B5=AA=BA=AD=EC=B3=D0=A9=CA=AC=E3=A8s=A1=
A=A5H=A4=CE=A9M=B3o=AD=D3=A5D=C3D=A6=B3=C3=F6=AA=BA=A5@=AC=C9=A4=E5=BE=C7=
=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=B1N=A8p=B1K=AA=BA=AD=D3=AE=D7=A5v=A9M=B2=C4=A4@=A4=E2=AA=BA=AC=EC=
=BE=C7=AC=E3=A8s=A5=A9=A7=AE=A6=EA=B3s=A1A</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5H=B1=B4=AF=C1=B8A=A9T=E0=AC=A6b=A4H=C3=FE=A4=DF=B4=BC=A9M=A4H=
=C3=FE=A9R=B9B=B4X=A5G=A6U=AD=D3=AD=B1=A6V=A4W=A9=D2=A7=EA=BAt=AA=BA=A8=A4=
=A6=E2=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7@=AA=CC=A7i=B6D=A7=DA=AD=CC=A1A=B8A=A9T=E0=AC=ACO=A6p=A6=F3=BC=
v=C5T=BBy=A8=A5=AF=E0=A4O=A1B=BB{=AA=BE=A1B=AA=C5=B6=A1=A9w=A6=EC=A1B=A7=DA=
=AD=CC=A9=D2=B1q=A8=C6=AA=BA=C2=BE=B7~=A1B</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=A7=DA=AD=CC=B7|=A6=A8=AC=B0=A4=B0=BB=F2=BC=CB=AA=BA=B1=A1=A4H=A1=
B=A4V=A4=D2=A1B=A9d=A4l=A9M=A4=F7=A5=C0=A1B</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0 =
size=3D2>=AC=C6=A6=DC=A9=F3=A7=DA=AD=CC=B7L=AF=BA=AA=BA=A4=E8=A6=A1=B5=A5=
=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=B8A=A9T=E0=AC=B6=EC=B3y=A4F=A7=DA=AD=CC=B9=EF=A9=CA=A1B=C5v=A4O=
=A1B=BC=C9=A4O=A6=E6=AC=B0=BBP=BFW=A5e=A6a=A6=EC=AA=BA=BC=A4=B1=E6=A1A</F=
ONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A7=F3=ACO=A7=DA=AD=CC=B7Q=B1=E6=A6=A8=AC=B0=AD^=B6=AF=A1B=A5D=AE=
_=AA=CC=A1A=A9=CE=ACO=C1=E2=A5=FA=BFO=B5J=C2I=AA=BA=AE=DA=B7=BD=A1C</FONT=
></DIV>
<DIV><FONT face=3DMingLiu color=3D#c0c0c0=20
size=3D2>=A5L=A8=C3=A5B=BB=A1=A9=FA=A4F=A1A=B8A=A9T=E0=AC=A6p=A6=F3=AF=E0=
=B8=D1=C4=C0=A8=E2=A9=CA=A4@=AF=EB=A6b=AB=E4=A6=D2=A9M=B7=BE=B3q=A4=E8=A6=
=A1=A4W=AA=BA=AEt=B2=A7=A1C<BR>=B9=EF=A9=F3=B8A=A9T=E0=AC=B3o=AD=D3=B4=AE=
=ADt=A4F=B3=CC=A6h=B4c=A6W=A1B=BED=A8=FC=B3=CC=A6h=BB~=B8=D1=AA=BA=A4H=C3=
=FE=BFE=AF=C0=A1A=A5=BB=AE=D1=B4=A3=A8=D1=A4F=A4@=AD=D3=A7O=A5X=A4=DF=B5=F4=
=AA=BA=C6[=C2I=A1C</FONT></DIV>
<DIV><FONT face=3DMingLiu color=3D#ffffff size=3D2><FONT=20
color=3D#c0c0c0>=A5=F4=A6=F3=B9=EF=A4H=C3=FE=A6=E6=AC=B0=AA=BA=A5=CD=AA=AB=
=A9=CA=AE=DA=B7=BD=B7P=BF=B3=BD=EC=AA=BA=C5=AA=AA=CC=A1A=B1N=B1q=A5=BB=AE=
=D1=C0=F2=B1o=C5=E5=A9_=AA=BA=BE\=C5=AA=B7P=A8=FC=A9M=C2=D7=B4I=AA=BA=B7s=
=AA=BE=A1C</FONT></FONT></DIV>
<DIV><FONT face=3DMingLiu size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2><IMG style=3D"WIDTH: =
127px; HEIGHT: 178px" alt=3D""=20
hspace=3D0 src=3D"cid:000401c1320a$733269b0$1264a8c0@mie31" =
align=3Dbaseline=20
border=3D1><FONT face=3DMingLiu>&nbsp;</FONT></FONT></DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 color=3D#ffffff =
size=3D2>=A1m=A9=CA=BC=A4=A1B=C5v=A4O=A1B=B4c=A6=E6=BBP=B7L=AF=BA=A1G=BFs=
=B5=F8=B8A=A9T=E0=AC=AA=BA=A8=A4=A6=E2=A7=EA=BAt=B9C=C0=B8</FONT><FONT=20
face=3D=B2=D3=A9=FA=C5=E9 color=3D#ffffff =
size=3D2>=A1n<BR>&nbsp;=A7@&nbsp;&nbsp;&nbsp; =AA=CC=A1G<FONT=20
face=3DArial>James McBride Dabbs/Mary Godwin Dabbs</FONT> =
=B3\=AE=CA=BA=D6=20
=C4=B6<BR>&nbsp;=AE=D1&nbsp;&nbsp;&nbsp; =
=A8t=A1G=B5=F8=B3=A5=B6V=AC=C9&nbsp;BB001<BR>&nbsp;=C1` =AD=B6=20
=BC=C6=A1G320=AD=B6<BR>&nbsp;=A9w&nbsp;&nbsp;&nbsp; =
=BB=F9=A1G320=A4=B8<BR>&nbsp;I S B N=20
=A1G957-493-412-8</FONT></DIV>
<DIV>
<HR>
</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9><FONT color=3D#c0c0c0 =
size=3D2></FONT></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 color=3D#c0c0c0 =
size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3D=B2=D3=A9=FA=C5=E9 size=3D2><FONT=20
color=3D#c0c0c0>=B3=C1=AE=E6=C3=B9=A7=C6=BA=B8=A5X=AA=A9=A4=BD=A5q&nbsp;=A5=
x=C6W=A4=C0=A4=BD=A5q</FONT></FONT></DIV>
<DIV><FONT face=3D"Comic Sans MS" color=3D#c0c0c0=20
size=3D2>Tel&nbsp;02-27272211&nbsp;&nbsp;Fax 02-23463300</FONT></DIV>
<DIV>
<DIV><FONT face=3DMingLiu size=3D2><A=20
href=3D"mailto:=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw"><FONT =
face=3D"Comic Sans MS"=20
color=3D#c0c0c0>=B7N=A8=A3=BDc=A1Gfeedback@mcgraw-hill.com.tw</FONT></A><=
/FONT><FONT face=3D=B2=D3=A9=FA=C5=E9=20
size=3D2></DIV></DIV></FONT>
<DIV><FONT face=3DMingLiu size=3D2></FONT>&nbsp;</DIV></BODY></HTML>

------=_NextPart_001_000A_01C1324D.85230560--

------=_NextPart_000_0009_01C1324D.85230560
Content-Type: image/jpeg;
	name="heros.jpg"
Content-Transfer-Encoding: base64
Content-ID: <000401c1320a$733269b0$1264a8c0@mie31>

/9j/4AAQSkZJRgABAQEB0QHRAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0a
HBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIy
MjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCACyAH8DASIA
AhEBAxEB/8QAHAABAAIDAQEBAAAAAAAAAAAAAAUGAwQHAgEI/8QANRAAAQQBAwIEBAUDBAMAAAAA
AQACAwQRBRIhBjETQVFxFCIyYQcjgaGxFUKRJDRi0YPB4f/EABoBAQACAwEAAAAAAAAAAAAAAAAB
BAIDBQb/xAApEQACAgEDAwMDBQAAAAAAAAAAAQIDEQQhMQUSQSJhkXGh8DJCgdHh/9oADAMBAAIR
AxEAPwDv6IiAIiIAiZRAEREAREQBERAEREAREQBERAERUvr/AKjtaDBUFWRjHSuduLx5BbaaZXTV
ceWarro0wdkuEVrrH8VNV6WuOhOj8l5EZm+l7QT8wIPtwQo/Tvxt1Gy+MT6CxocM7mvdj+FTdY6l
Zq9vxLzjblk+XBYMYHoPRbmh02TbalWCUxz92M+oeeRnOMLuR6XWvVNp4W6Rx59Sml2qLTb2b/o6
Vpf4ou1CN736UGBm7c1kxccNBOR8v2PdWmzrs0Wiuvms2DONnjSAYB7E/wDQ5VGh0OrX6TdeNKF0
gqTx8P2ljg9/zf8AL0/RWmbTY2aG+q/TvBksvZGwROMp7fUcjAwMrh2yi36Y4OxVGSXqlk0p+u7U
G6U6ZughLBYAeA+PdwB6EkkEYPbv2Vs025PfossS1JKjn5PhS4LgPLsqJpIqF726jcrWRclGysHM
a5sp/Lw5oA5AAPbjlWqhFqb6dOSK3LvicWTxWmD52g47gdx5Ed1qNpK3bTaNOe1Kfy4WGRwAycAZ
OOVE2erdLpzRxzWcOc3c4bD8ozjy+5wtbryOSfpueKGBr5C0uMjhxE0cuPvjj9VzaWjZfqzC9rhD
FZbGGx13N3fKHHAwTjgED79lKJwdnrX4LcXiQOc9mSNwaccLxJq1CKcQSW4WSn+xzsH/AAq9pM2p
QdGwTsEDovhnSF0z3B/OT6emF5gFqtpejw29OpTCd0cJLnEuAIyTyO/CLGdzGXd+0sjdUoP+m7XP
/kCysuVpPosRO9ngqsax0TSsOhno1KkT4+HRuiy2Rp75wQqT1S6hBahqaVSEMrGj8yu/vjII2gke
Xur1Glrvkowk/hbfcoX6qyiLlOK+Xv8AY7IiIqB0AuPfitVj1nXadOS0YI68RccAuyT2GP0C7CuR
dZaJrF3qSxPFp9iSIgBr2MJGF0OmKDv9bxsyh1GVkac1rLyil6PoFNt9kEksdcD65pDnGPRS+lap
/SNVJhe+aqXgEbcF4zwcZ7/qsEuiauw/mabc9zC4/wDpab2S1JwyZjoX8Ha9uDj2K9R21WJx7k01
xseXc7oyU2mmny8/B0XUqFO1o0TK8OpQNsy7Hse5+AHZLiWtKx1TYpwRvi1Ka18TDGXAzSg8yObk
ccDHrjsqXb1WzGHsrxGSF7Hcu/sJH9mc4ycf4Ux0kxjpHafVgfYifXLmy2mvbscMHYXZAIJPA8sr
y2q0c6t/B6jS62Fqw+ToL9VkGqtr14aYLY9zBbcWPkwcF27BwPTIyeVKUrt2a0Y7UdKOMsyzwbJk
cTn02jhRWh6ZXZc1OO03x3NfFnx8P2nwwcD0AzhbOj0abPj54a8ccosStZKxg3NHbjj9lQL5TdY1
GxbfPXlmsFjbFnxDDYaXCNheAPDOABjHfPZSmiaBV1nUdQt3XTSFssbm+I6N5Dtgzy0Y7EcL2OmL
l/x/Cs2IqxZLsdYjYJJHvdlxI25DSfXlS+gV30JLk9ud8JklDZIpWMYzfgAOYRjIIwEBmdpUjq8e
kQB0enM5lkeQXPGc7Ggdh6n04C+Sx37muVI5KQhqVHGUTCUODzggADGR3UpqEksdR5heGvPG7aXE
D1DRyT9lz86tqenR2KVXVXzOgLpGtfVe+WQFxcGnjjPIORx5IC+0qditYsmS06avI4OiY8fNH6jP
mPRe4dOp17MlmKtGyaT63taAXe6+0X2pKwdbjjjkPO1hJAH6+a2VKbXBDSfIREUEhfMBfUQHzA9F
xvq62/UuuZqUNqJrMthLXR4LCBknd5g8rr1yw2pSnsOBLYo3PIA5wBlfnPRrUdvqsWI5pJY57G/f
IMFxJyc/5K6PTa1Kbk/COd1GbjBRXlnYRBPplCqye5XZG6sI43mMOBlOcuPB45GFuOoXGC06IU7D
QGthOxu4Ozh2cADP2/hZr9Sq46TXdVmlax+6NzCSIsDOSf25UMRTsso7a1mE2bu8xPGfm47ny4Oc
YJ4PoqDe50EtiVbpe6w+Ozp8MsEhY3LBtz8vzOIyc8j9/spGHQqNaHwazXwRg52xvIGVD2a9StYt
V32rL2Qls8jd3PzE4aMYPmTnPos9PUalabxGXnmJ2+eWN7DnaQ0gnPIAzj7k4UZZJn1qjPHotjwL
88W1mXSOk+lo+o++MrljJtZtWIWM1KZ8skgmMQeXv2DB3DLQ3gNGPuCuuT6tpU1ZzJ5Q6JzGuc18
buzjgAjHmeMKHHSDprEUktgMiia1jWsacua1zyAT6YeAR9lAI7TYtY1Pp+vNFPHqIc+QtmstA7OI
B7ZHHooqJlrTb8k1bXfHlnOLDIWuLoSOx2cnaM4XQdI0eDRavw9aSUx99r3ZAPmR6ZPOOyrEXSvw
n4ku1Su8thmhMkjR5Ozg/oeFsgoNPu58GEnJNdvHknK7OoIa7GeLUsYaPneHBzvuVlE2vj6qtI+0
jlL9kWszCIiAIiIDFZh+IqzQk48RhZnHbIwuY0fwuv6Xcq2K92tJ8NIHgPYRuXU0W6q+yrKg+TTb
RXbhzXBV7NrquGVxi02lJFtw0NlOQfXtyo3+sdR1/Ckt0/maTuYIst/yFel8wFMb0lhwREqW3lSZ
BDX6D4WSWG7XkYcMD/HsoLWuoqd0gabrVWo7aWSR2Ku8PHlk9xhXWWpXmBEsMbx/yaCoq10lotzP
iUYwT5t4SudSeZL8/lE2RsksQePz2ZzZ/UXUDJpBNq2kWa4jA2NhOH7e33z78Lqei6k3U9KrWdwL
nxguwMDPmqxb/DTTJsmCWSI++Qox/Qeu6eGnS9XezZktAOMZ/ZWLZ6WyCUE4v6FaqvVQm3JqS+v+
Fn6j6x0zQWSQvsMde2F0cGeSfLPotToOzb1Ola1S68vlnl2tz2DQOw+2crkeq/h51FTsusPZLKSc
ueMuJ+55Xaeh6Umn9JUYJSTJtLnZGOS4lYSlRGhxhvJvn2M1C6V6nL9KT29yxIiKmXAiIgCIiAIi
IAiIgCIiAIiIBjPdAMdkRAEREAREQBERAEREAREQBERAEREAREQBERAEREAWhrUVybR7Uenv2XHM
IidnGHeRW+iAolbTus2P0nxbmWxyH4seIDvG7I/ZbmrUeqpeo5JqFpjNO+HcGxl2D4m04/fCt6ID
m50r8QDXrD48CVsrzL+aPmYQ3b/DlY9Ur9SP1qKWjZa2kA0Ojw3n1PPv/CsqICgM07ruKhPG/UWy
TibfHI3by3HblS+lQdSM1uSXUJWupOjdtYMfK7jGP3VoRCSsaFV6ghs6h/U5SYpP9v8Am7yzk/b2
Xrperr9RlsaxL4xc7dEXP3Y47Z/+KyohBWOl9P6hp27jtZu+PE85ibu3Ac+XorOiIAiIgCIiAIiI
AiIgCIiAIiIAiIgCIiAIiIAixOswsnELpGiQjIaTyVibqVJwH+pj5GQC7lAbSLUfqVSN7WunYC4Z
bz35x/K+DVKbi4CwzLSQRn0z/wBFAbiLVOo1BtJnZhw3A54I90g1CpZIEM7HE4wAeeUBtIiIAiIg
CIiAIiIAiIgNe1EXMEkUMb5mkY38fuo74O27xSadIHA2cZz6g/oplEBExw2nOa2ejVLc92+/ovL6
1prMfBU8nku+/t7kqYWKzXZagdC8kNdjOPscoCOdFOY9nwdMfI4AZyAfIYx2yvDIr7Jvy6tIbXcE
HBxn9uOFmdoVNz935jTlpyHY5GcfytmGhDBcmtMB8WYAPJPkOyAzxGQxgytDX+YByF7REAREQBER
AEREAREQBERAEREAREQBERAEREAREQBERAEREB//2Q==

------=_NextPart_000_0009_01C1324D.85230560--


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri Aug 31 13:03:24 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 31 Aug 2001 14:03:24 +0200
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <3B865419.68732554@research.bell-labs.com>
References: <Pine.LNX.4.31.0108240825520.29809-100000@gannet.stats>
 <3B865419.68732554@research.bell-labs.com>
Message-ID: <15247.32012.939118.454204@mithrandir.hornik.net>

>>>>> John Chambers writes:

> Prof Brian Ripley wrote:
>> 
>> Currently read.table is rather limited in its type conversion.
>> The algorithm is
>> 
>> 0) Read as character
>> 1) Try to convert to numeric. If that works, quit
>> 2) Convert to factor unless !as.is.
>> 
>> I am thinking about adding more flexibility and more classes by the
>> following two changes.
>> 
>> A) Anticipating the arrival of classes for all R objects, add an
>> argument say `colClasses' that allows the user to specify the desired
>> class for every column.  This could default to "auto", or NA if people
>> think "auto" might be a relevant class name one day.
>> 
>> The effect would be equivalent to running
>> 
>> data[[i]] <- as(data[[i]], colClasses[i])
>> 
>> instead of
>> 
>> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
>> 
>> except that standard classes such as "numeric", "factor", "logical",
>> "character" would be dispatched directly, and argument "dec" would be
>> consulted where appropriate.
>> 
>> colClasses = "character" would suppress all conversions, which cannot
>> currently be done.

Just a small remark.  I would prefer `NA' to "auto" (or "unknown").  May
be too late to change this now :-)

I would also be happier if we did not refer to the variables explicitly
as `columns'.  (This sounds a bit stupid from the person who wrote
write.table and introduced arguments `row.names' and `col.names'.
Although, at least one of these was modelled after an existing
function).  E.g. something like

	read.table(......, caseNames, varNames, varClasses, .....)

would be nice ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Aug 31 13:13:03 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 31 Aug 2001 13:13:03 +0100 (BST)
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <15247.32012.939118.454204@mithrandir.hornik.net>
Message-ID: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>

On Fri, 31 Aug 2001, Kurt Hornik wrote:

> > Prof Brian Ripley wrote:
> >>
> >> Currently read.table is rather limited in its type conversion.
> >> The algorithm is
> >>
> >> 0) Read as character
> >> 1) Try to convert to numeric. If that works, quit
> >> 2) Convert to factor unless !as.is.
> >>
> >> I am thinking about adding more flexibility and more classes by the
> >> following two changes.
> >>
> >> A) Anticipating the arrival of classes for all R objects, add an
> >> argument say `colClasses' that allows the user to specify the desired
> >> class for every column.  This could default to "auto", or NA if people
> >> think "auto" might be a relevant class name one day.
> >>
> >> The effect would be equivalent to running
> >>
> >> data[[i]] <- as(data[[i]], colClasses[i])
> >>
> >> instead of
> >>
> >> data[[i]] <- type.convert(data[[i]], as.is = as.is[i], dec = dec)
> >>
> >> except that standard classes such as "numeric", "factor", "logical",
> >> "character" would be dispatched directly, and argument "dec" would be
> >> consulted where appropriate.
> >>
> >> colClasses = "character" would suppress all conversions, which cannot
> >> currently be done.
>
> Just a small remark.  I would prefer `NA' to "auto" (or "unknown").  May
> be too late to change this now :-)

Anything can be changed up to 1.4.0 release.  In particular, the present
code will have to be changed unless as() is in base by then.

> I would also be happier if we did not refer to the variables explicitly
> as `columns'.  (This sounds a bit stupid from the person who wrote
> write.table and introduced arguments `row.names' and `col.names'.
> Although, at least one of these was modelled after an existing
> function).  E.g. something like
>
> 	read.table(......, caseNames, varNames, varClasses, .....)
>
> would be nice ...

The problem is that what is being referred to *is* columns and not
variables.  If you have row names on the file, the numbering is different.
So it matters to use sufficiently precise terminology.

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Fri Aug 31 13:20:33 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 31 Aug 2001 05:20:33 -0700
Subject: [Rd] RFC: type conversion in read.table
In-Reply-To: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
References: <Pine.GSO.4.31.0108311309340.28183-100000@auk.stats>
Message-ID: <87y9o08lpq.fsf@jeeves.blindglobe.net>

>>>>> "BDR" == Brian D Ripley <Prof> writes:


    >> I would also be happier if we did not refer to the variables
    >> explicitly as `columns'.  (This sounds a bit stupid from the
    >> person who wrote write.table and introduced arguments
    >> `row.names' and `col.names'.  Although, at least one of these
    >> was modelled after an existing function).  E.g. something like
    >> 
    >> read.table(......, caseNames, varNames, varClasses, .....)
    >> 
    >> would be nice ...

    BDR> The problem is that what is being referred to *is* columns
    BDR> and not variables.  If you have row names on the file, the
    BDR> numbering is different.  So it matters to use sufficiently
    BDR> precise terminology.

I would tend to agree with Brian.  To me, caseNames / varNames
sounds a rather bit arrogant, since there are a number of other
"formats" (contingency tables come to mind) for which read.table is
one possible way for slurping in the data prior to munging it, though
I guess one could argue that this is an abuse of tools.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Fri Aug 31 18:08:33 2001
From: a296180@mica.fmr.com (a296180@mica.fmr.com)
Date: Fri, 31 Aug 2001 19:08:33 +0200 (MET DST)
Subject: [Rd] --quiet flag sets echo option to TRUE (PR#1083)
Message-ID: <200108311708.TAA09196@pubhealth.ku.dk>

The help for options says:

    echo: logical.  Only used in non-interactive mode, when it controls
          whether input is echoed. Command-line options `--quiet' and
          `--slave' set this initially to `FALSE'.

I don't think that this is correct for me.


Consider the following session:

mica|junk> ls
test.R
mica|junk> cat test.R 
cat("Why was this command echoed?\n")
mica|junk> R CMD BATCH --quiet test.R 
mica|junk> ls
test.R		test.Rout
mica|junk> cat test.Rout 
> invisible(options(echo = TRUE))
> cat("Why was this command echoed?\n")
Why was this command echoed?
> proc.time()
[1] 1.13 0.11 1.20 0.00 0.00
> 
mica|junk> 

Either using --quiet should set echo to FALSE (my personal preference) or the
documentation for options should be changed.

Apologies if I have misunderstood something here.

Regards,

Dave Kane

--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 3.0
 year = 2001
 month = 06
 day = 22
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Aug 31 18:21:06 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 31 Aug 2001 19:21:06 +0200
Subject: [Rd] --quiet flag sets echo option to TRUE (PR#1083)
In-Reply-To: <200108311708.TAA09196@pubhealth.ku.dk>
References: <200108311708.TAA09196@pubhealth.ku.dk>
Message-ID: <x2zo8gqh6l.fsf@blueberry.kubism.ku.dk>

a296180@mica.fmr.com writes:

> The help for options says:
> 
>     echo: logical.  Only used in non-interactive mode, when it controls
>           whether input is echoed. Command-line options `--quiet' and
>           `--slave' set this initially to `FALSE'.
> 
> I don't think that this is correct for me.
> 
> 
> Consider the following session:
> 
> mica|junk> ls
> test.R
> mica|junk> cat test.R 
> cat("Why was this command echoed?\n")
> mica|junk> R CMD BATCH --quiet test.R 
> mica|junk> ls
> test.R		test.Rout
> mica|junk> cat test.Rout 
> > invisible(options(echo = TRUE))
> > cat("Why was this command echoed?\n")
> Why was this command echoed?
> > proc.time()
> [1] 1.13 0.11 1.20 0.00 0.00
> > 
> mica|junk> 
> 
> Either using --quiet should set echo to FALSE (my personal preference) or the
> documentation for options should be changed.
> 
> Apologies if I have misunderstood something here.

You seem to be right, but since BATCH is messing with options()
itself, your example doesn't prove it. However, this does:

[pd@blueberry R]$ R --quiet --vanilla < test.R
> cat("Why was this command echoed?\n")
Why was this command echoed?
>

(with 1.3.1)

Since --slave turns the echoing off, and it is nice to be able to
kill just the startup blurb, my vote is to change the docs.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

