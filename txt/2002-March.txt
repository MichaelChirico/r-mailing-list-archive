From schutz@wehi.edu.au  Fri Mar  1 06:06:38 2002
From: schutz@wehi.edu.au (schutz@wehi.edu.au)
Date: Fri, 1 Mar 2002 07:06:38 +0100 (MET)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
Message-ID: <200203010606.HAA10892@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-1141662977-1014960253=:3119
Content-Type: TEXT/PLAIN; CHARSET=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
Content-ID: <Pine.SOL.4.33.0203011649142.3119@unix09.wehi.edu.au>

Don Knuth recently updated its RNG, following the discovery of a
weakness in the seed initialisation (see
http://Sunburn.Stanford.EDU/~knuth/news02.html), so I believe that the
corresponding code in R should be updated as well. If it may be usefull,
I attach a patch to do the change.

Notes:

  - only a few lines of code have really changed, but the order of the
    functions has changed in Knuth's original code, so the patch is
    longer than it should really be;
  - Despite Knuth's request that no change should be made to the code,
    the present R code (1.5.0-devel and previous) contains a change (the
    line "long ran_x[KK];" is commented, and ran_x is defined elsewhere
    in the program). The patch contains the _same_ change; I let you
    decide if this is acceptable in regard to Knuth's request.

Frederic
--
Fr=E9d=E9ric SCH=DCTZ                      email: schutz@wehi.edu.au
Genetics and Bioinformatics Group
The Walter and Eliza Hall Institute of Medical Research
Phone: +61 3 9345 2627               Fax: +61 3 9347 0852
Post Office
Royal Melbourne Hospital, 3050
Victoria, Australia

---559023410-1141662977-1014960253=:3119
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII; NAME="RNG.c.patch"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.SOL.4.33.0203011624131.3119@unix09.wehi.edu.au>
Content-Description: 
Content-Disposition: ATTACHMENT; FILENAME="RNG.c.patch"

LS0tIFJORy5jLm9sZAlGcmkgTWFyICAxIDA4OjQyOjQ1IDIwMDINCisrKyBS
TkcuYwlGcmkgTWFyICAxIDE0OjI2OjA4IDIwMDINCkBAIC01NDMsNiArNTQz
LDcgQEANCiAjZGVmaW5lIHJhbl94ICAgICAgICAgICAgIGR1bW15DQogDQog
LyogPT09PT09PT09PT09PT09PT09PSAgS251dGggVEFPQ1AgPT09PT09PT09
PT09PT09PT09PT09PT09PT0gKi8NCisvKiBGcm9tIGh0dHA6Ly93d3ctY3Mt
ZmFjdWx0eS5TdGFuZm9yZC5FRFUvfmtudXRoL3Byb2dyYW1zL3JuZy5jICov
DQogDQogICAgICAgICAgLyogUGxlYXNlIGRvIE5PVCBhbHRlciB0aGlzIHBh
cnQgb2YgdGhlIGNvZGUgKi8NCiANCkBAIC01NTEsMTUgKzU1MiwxNyBAQA0K
ICAqICAgIEl0IGlzIGV4cGxhaW5lZCBpbiBTZW1pbnVtZXJpY2FsIEFsZ29y
aXRobXMsIDNyZCBlZGl0aW9uLCBTZWN0aW9uIDMuNg0KICAqICAgIChvciBp
biB0aGUgZXJyYXRhIHRvIHRoZSAybmQgZWRpdGlvbiAtLS0gc2VlDQogICog
ICAgICAgIGh0dHA6Ly93d3ctY3MtZmFjdWx0eS5zdGFuZm9yZC5lZHUvfmtu
dXRoL3Rhb2NwLmh0bWwNCi0gKiAgICBpbiB0aGUgY2hhbmdlcyB0byBwYWdl
cyAxNzEgYW5kIGZvbGxvd2luZyBvZiBWb2x1bWUgMikuICAgICAgICAgICAg
ICAqLw0KKyAqICAgIGluIHRoZSBjaGFuZ2VzIHRvIFZvbHVtZSAyIG9uIHBh
Z2VzIDE3MSBhbmQgZm9sbG93aW5nKS4gICAgICAgICAgICAgICovDQorDQor
LyogICAgTi5CLiBUaGUgTU9ESUZJQ0FUSU9OUyBpbnRyb2R1Y2VkIGluIHRo
ZSA5dGggcHJpbnRpbmcgKDIwMDIpIGFyZQ0KKyAgICAgIGluY2x1ZGVkIGhl
cmU7IHRoZXJlJ3Mgbm8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCB0
aGUgb3JpZ2luYWwuICovDQogDQogLyogICAgSWYgeW91IGZpbmQgYW55IGJ1
Z3MsIHBsZWFzZSByZXBvcnQgdGhlbSBpbW1lZGlhdGVseSB0bw0KICAqICAg
ICAgICAgICAgICAgICB0YW9jcEBjcy5zdGFuZm9yZC5lZHUNCiAgKiAgICAo
YW5kIHlvdSB3aWxsIGJlIHJld2FyZGVkIGlmIHRoZSBidWcgaXMgZ2VudWlu
ZSkuIFRoYW5rcyEgICAgICAgICAgICAqLw0KIA0KIC8qKioqKioqKioqKiog
c2VlIHRoZSBib29rIGZvciBleHBsYW5hdGlvbnMgYW5kIGNhdmVhdHMhICoq
KioqKioqKioqKioqKioqKiovDQotDQotLyogdGhlIG9sZCBDIGNhbGxpbmcg
Y29udmVudGlvbnMgYXJlIHVzZWQgaGVyZSwgZm9yIHJlYXNvbnMgb2YgcG9y
dGFiaWxpdHkgKi8NCisvKioqKioqKioqKioqIGluIHBhcnRpY3VsYXIsIHlv
dSBuZWVkIHR3bydzIGNvbXBsZW1lbnQgYXJpdGhtZXRpYyAqKioqKioqKioq
Lw0KIA0KICNkZWZpbmUgS0sgMTAwICAgICAgICAgICAgICAgICAgICAgLyog
dGhlIGxvbmcgbGFnICovDQogI2RlZmluZSBMTCAgMzcgICAgICAgICAgICAg
ICAgICAgICAvKiB0aGUgc2hvcnQgbGFnICovDQpAQCAtNTY4LDEwICs1NzEs
MTMgQEANCiANCiAvKmxvbmcgcmFuX3hbS0tdOyAqLyAgICAgICAgICAgICAg
ICAgICAvKiB0aGUgZ2VuZXJhdG9yIHN0YXRlICovDQogDQotLyogdm9pZCBy
YW5fYXJyYXkobG9uZyBhYVtdLGludCBuKSAqLw0KKyNpZmRlZiBfX1NURENf
Xw0KK3ZvaWQgcmFuX2FycmF5KGxvbmcgYWFbXSxpbnQgbikNCisjZWxzZQ0K
IHZvaWQgcmFuX2FycmF5KGFhLG4pICAgIC8qIHB1dCBuIG5ldyByYW5kb20g
bnVtYmVycyBpbiBhYSAqLw0KICAgbG9uZyAqYWE7ICAgLyogZGVzdGluYXRp
b24gKi8NCiAgIGludCBuOyAgICAgIC8qIGFycmF5IGxlbmd0aCAobXVzdCBi
ZSBhdCBsZWFzdCBLSykgKi8NCisjZW5kaWYNCiB7DQogICByZWdpc3RlciBp
bnQgaSxqOw0KICAgZm9yIChqPTA7ajxLSztqKyspIGFhW2pdPXJhbl94W2pd
Ow0KQEAgLTU4MCw1NyArNTg2LDU3IEBADQogICBmb3IgKDtpPEtLO2krKyxq
KyspIHJhbl94W2ldPW1vZF9kaWZmKGFhW2otS0tdLHJhbl94W2ktTExdKTsN
CiB9DQogDQorLyogdGhlIGZvbGxvd2luZyByb3V0aW5lcyBhcmUgZnJvbSBl
eGVyY2lzZSAzLjYtLTE1ICovDQorLyogYWZ0ZXIgY2FsbGluZyByYW5fc3Rh
cnQsIGdldCBuZXcgcmFuZG9tcyBieSwgZS5nLiwgIng9cmFuX2Fycl9uZXh0
KCkiICovDQorDQorI2RlZmluZSBRVUFMSVRZIDEwMDkgLyogcmVjb21tZW5k
ZWQgcXVhbGl0eSBsZXZlbCBmb3IgaGlnaC1yZXMgdXNlICovDQorbG9uZyBy
YW5fYXJyX2J1ZltRVUFMSVRZXTsNCitsb25nIHJhbl9hcnJfc2VudGluZWw9
LTE7DQorbG9uZyAqcmFuX2Fycl9wdHI9JnJhbl9hcnJfc2VudGluZWw7IC8q
IHRoZSBuZXh0IHJhbmRvbSBudW1iZXIsIG9yIC0xICovDQorDQorI2RlZmlu
ZSByYW5fYXJyX25leHQoKSAoKnJhbl9hcnJfcHRyPj0wPyAqcmFuX2Fycl9w
dHIrKzogcmFuX2Fycl9jeWNsZSgpKQ0KK2xvbmcgcmFuX2Fycl9jeWNsZSgp
DQorew0KKyAgcmFuX2FycmF5KHJhbl9hcnJfYnVmLFFVQUxJVFkpOw0KKyAg
cmFuX2Fycl9idWZbMTAwXT0tMTsNCisgIHJhbl9hcnJfcHRyPXJhbl9hcnJf
YnVmKzE7DQorICByZXR1cm4gcmFuX2Fycl9idWZbMF07DQorfQ0KKw0KICNk
ZWZpbmUgVFQgIDcwICAgLyogZ3VhcmFudGVlZCBzZXBhcmF0aW9uIGJldHdl
ZW4gc3RyZWFtcyAqLw0KICNkZWZpbmUgaXNfb2RkKHgpICAoKHgpJjEpICAg
ICAgICAgIC8qIHVuaXRzIGJpdCBvZiB4ICovDQotI2RlZmluZSBldmVuaXpl
KHgpICgoeCkmKE1NLTIpKSAgIC8qIG1ha2UgeCBldmVuICovDQogDQotLyog
dm9pZCByYW5fc3RhcnQobG9uZyBzZWVkKSAqLw0KKyNpZmRlZiBfX1NURENf
Xw0KK3ZvaWQgcmFuX3N0YXJ0KGxvbmcgc2VlZCkNCisjZWxzZQ0KIHZvaWQg
cmFuX3N0YXJ0KHNlZWQpICAgIC8qIGRvIHRoaXMgYmVmb3JlIHVzaW5nIHJh
bl9hcnJheSAqLw0KICAgbG9uZyBzZWVkOyAgICAgICAgICAgIC8qIHNlbGVj
dG9yIGZvciBkaWZmZXJlbnQgc3RyZWFtcyAqLw0KKyNlbmRpZg0KIHsNCiAg
IHJlZ2lzdGVyIGludCB0LGo7DQogICBsb25nIHhbS0srS0stMV07ICAgICAg
ICAgICAgICAvKiB0aGUgcHJlcGFyYXRpb24gYnVmZmVyICovDQotICByZWdp
c3RlciBsb25nIHNzPWV2ZW5pemUoc2VlZCsyKTsNCisgIHJlZ2lzdGVyIGxv
bmcgc3M9KHNlZWQrMikmKE1NLTIpOw0KICAgZm9yIChqPTA7ajxLSztqKysp
IHsNCiAgICAgeFtqXT1zczsgICAgICAgICAgICAgICAgICAgICAgLyogYm9v
dHN0cmFwIHRoZSBidWZmZXIgKi8NCiAgICAgc3M8PD0xOyBpZiAoc3M+PU1N
KSBzcy09TU0tMjsgLyogY3ljbGljIHNoaWZ0IDI5IGJpdHMgKi8NCiAgIH0N
Ci0gIGZvciAoO2o8S0srS0stMTtqKyspIHhbal09MDsNCiAgIHhbMV0rKzsg
ICAgICAgICAgICAgIC8qIG1ha2UgeFsxXSAoYW5kIG9ubHkgeFsxXSkgb2Rk
ICovDQotICBzcz1zZWVkJihNTS0xKTsNCi0gIHQ9VFQtMTsgd2hpbGUgKHQp
IHsNCi0gICAgZm9yIChqPUtLLTE7aj4wO2otLSkgeFtqK2pdPXhbal07ICAv
KiAic3F1YXJlIiAqLw0KLSAgICBmb3IgKGo9S0srS0stMjtqPktLLUxMO2ot
PTIpIHhbS0srS0stMS1qXT1ldmVuaXplKHhbal0pOw0KLSAgICBmb3IgKGo9
S0srS0stMjtqPj1LSztqLS0pIGlmKGlzX29kZCh4W2pdKSkgew0KLSAgICAg
IHhbai0oS0stTEwpXT1tb2RfZGlmZih4W2otKEtLLUxMKV0seFtqXSk7DQor
ICBmb3IgKHNzPXNlZWQmKE1NLTEpLHQ9VFQtMTsgdDsgKSB7ICAgICAgIA0K
KyAgICBmb3IgKGo9S0stMTtqPjA7ai0tKSB4W2oral09eFtqXSwgeFtqK2ot
MV09MDsgLyogInNxdWFyZSIgKi8NCisgICAgZm9yIChqPUtLK0tLLTI7aj49
S0s7ai0tKQ0KKyAgICAgIHhbai0oS0stTEwpXT1tb2RfZGlmZih4W2otKEtL
LUxMKV0seFtqXSksDQogICAgICAgeFtqLUtLXT1tb2RfZGlmZih4W2otS0td
LHhbal0pOw0KLSAgICB9DQogICAgIGlmIChpc19vZGQoc3MpKSB7ICAgICAg
ICAgICAgICAvKiAibXVsdGlwbHkgYnkgeiIgKi8NCiAgICAgICBmb3IgKGo9
S0s7aj4wO2otLSkgIHhbal09eFtqLTFdOw0KICAgICAgIHhbMF09eFtLS107
ICAgICAgICAgICAgLyogc2hpZnQgdGhlIGJ1ZmZlciBjeWNsaWNhbGx5ICov
DQotICAgICAgaWYgKGlzX29kZCh4W0tLXSkpIHhbTExdPW1vZF9kaWZmKHhb
TExdLHhbS0tdKTsNCisgICAgICB4W0xMXT1tb2RfZGlmZih4W0xMXSx4W0tL
XSk7DQogICAgIH0NCiAgICAgaWYgKHNzKSBzcz4+PTE7IGVsc2UgdC0tOw0K
ICAgfQ0KICAgZm9yIChqPTA7ajxMTDtqKyspIHJhbl94W2orS0stTExdPXhb
al07DQogICBmb3IgKDtqPEtLO2orKykgcmFuX3hbai1MTF09eFtqXTsNCi19
DQotDQotLyogdGhlIGZvbGxvd2luZyByb3V0aW5lcyBhcmUgZnJvbSBleGVy
Y2lzZSAzLjYtLTE1ICovDQotLyogYWZ0ZXIgY2FsbGluZyByYW5fc3RhcnQs
IGdldCBuZXcgcmFuZG9tcyBieSwgZS5nLiwgIng9cmFuX2Fycl9uZXh0KCki
ICovDQotDQotI2RlZmluZSBRVUFMSVRZIDEwMDkgLyogcmVjb21tZW5kZWQg
cXVhbGl0eSBsZXZlbCBmb3IgaGlnaC1yZXMgdXNlICovDQotbG9uZyByYW5f
YXJyX2J1ZltRVUFMSVRZXTsNCi1sb25nIHJhbl9hcnJfc2VudGluZWw9LTE7
DQotbG9uZyAqcmFuX2Fycl9wdHI9JnJhbl9hcnJfc2VudGluZWw7IC8qIHRo
ZSBuZXh0IHJhbmRvbSBudW1iZXIsIG9yIC0xICovDQotDQotI2RlZmluZSBy
YW5fYXJyX25leHQoKSAoKnJhbl9hcnJfcHRyPj0wPyAqcmFuX2Fycl9wdHIr
KzogcmFuX2Fycl9jeWNsZSgpKQ0KLWxvbmcgcmFuX2Fycl9jeWNsZSgpDQot
ew0KLSAgcmFuX2FycmF5KHJhbl9hcnJfYnVmLFFVQUxJVFkpOw0KLSAgcmFu
X2Fycl9idWZbMTAwXT0tMTsNCi0gIHJhbl9hcnJfcHRyPXJhbl9hcnJfYnVm
KzE7DQotICByZXR1cm4gcmFuX2Fycl9idWZbMF07DQorICBmb3IgKGo9MDtq
PDEwO2orKykgcmFuX2FycmF5KHgsS0srS0stMSk7IC8qIHdhcm0gdGhpbmdz
IHVwICovDQorICByYW5fYXJyX3B0cj0mcmFuX2Fycl9zZW50aW5lbDsNCiB9
DQogDQogLyogPT09PT09PT09PT09PT09PT09PT09IGVuZCBvZiBLbnV0aCdz
IGNvZGUgPT09PT09PT09PT09PT09PT09PT09PSAqLw0K
---559023410-1141662977-1014960253=:3119--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar  1 06:38:12 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Mar 2002 07:38:12 +0100 (MET)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
Message-ID: <200203010638.HAA10983@pubhealth.ku.dk>

Attachments don't really work with R-bugs.  To save us trying to unpick
this manually, could you re-send it as the body of a message to R-bugs
in reply to this one, or quoting (PR#1336) in the subject, please?

On Fri, 1 Mar 2002 schutz@wehi.edu.au wrote:

>   This message is in MIME format.  The first part should be readable text,
>   while the remaining parts are likely unreadable without MIME-aware tools.
>   Send mail to mime@docserver.cac.washington.edu for more info.
>
> ---559023410-1141662977-1014960253=:3119
> Content-Type: TEXT/PLAIN; CHARSET=iso-8859-1
> Content-Transfer-Encoding: QUOTED-PRINTABLE
> Content-ID: <Pine.SOL.4.33.0203011649142.3119@unix09.wehi.edu.au>
>
> Don Knuth recently updated its RNG, following the discovery of a
> weakness in the seed initialisation (see
> http://Sunburn.Stanford.EDU/~knuth/news02.html), so I believe that the
> corresponding code in R should be updated as well. If it may be usefull,
> I attach a patch to do the change.
>
> Notes:
>
>   - only a few lines of code have really changed, but the order of the
>     functions has changed in Knuth's original code, so the patch is
>     longer than it should really be;
>   - Despite Knuth's request that no change should be made to the code,
>     the present R code (1.5.0-devel and previous) contains a change (the
>     line "long ran_x[KK];" is commented, and ran_x is defined elsewhere
>     in the program). The patch contains the _same_ change; I let you
>     decide if this is acceptable in regard to Knuth's request.
>
> Frederic
> --
> Fr=E9d=E9ric SCH=DCTZ                      email: schutz@wehi.edu.au
> Genetics and Bioinformatics Group
> The Walter and Eliza Hall Institute of Medical Research
> Phone: +61 3 9345 2627               Fax: +61 3 9347 0852
> Post Office
> Royal Melbourne Hospital, 3050
> Victoria, Australia
>
> ---559023410-1141662977-1014960253=:3119
> Content-Type: TEXT/PLAIN; CHARSET=US-ASCII; NAME="RNG.c.patch"
> Content-Transfer-Encoding: BASE64
> Content-ID: <Pine.SOL.4.33.0203011624131.3119@unix09.wehi.edu.au>
> Content-Description:
> Content-Disposition: ATTACHMENT; FILENAME="RNG.c.patch"
>
> LS0tIFJORy5jLm9sZAlGcmkgTWFyICAxIDA4OjQyOjQ1IDIwMDINCisrKyBS
> TkcuYwlGcmkgTWFyICAxIDE0OjI2OjA4IDIwMDINCkBAIC01NDMsNiArNTQz
> LDcgQEANCiAjZGVmaW5lIHJhbl94ICAgICAgICAgICAgIGR1bW15DQogDQog
> LyogPT09PT09PT09PT09PT09PT09PSAgS251dGggVEFPQ1AgPT09PT09PT09
> PT09PT09PT09PT09PT09PT0gKi8NCisvKiBGcm9tIGh0dHA6Ly93d3ctY3Mt
> ZmFjdWx0eS5TdGFuZm9yZC5FRFUvfmtudXRoL3Byb2dyYW1zL3JuZy5jICov
> DQogDQogICAgICAgICAgLyogUGxlYXNlIGRvIE5PVCBhbHRlciB0aGlzIHBh
> cnQgb2YgdGhlIGNvZGUgKi8NCiANCkBAIC01NTEsMTUgKzU1MiwxNyBAQA0K
> ICAqICAgIEl0IGlzIGV4cGxhaW5lZCBpbiBTZW1pbnVtZXJpY2FsIEFsZ29y
> aXRobXMsIDNyZCBlZGl0aW9uLCBTZWN0aW9uIDMuNg0KICAqICAgIChvciBp
> biB0aGUgZXJyYXRhIHRvIHRoZSAybmQgZWRpdGlvbiAtLS0gc2VlDQogICog
> ICAgICAgIGh0dHA6Ly93d3ctY3MtZmFjdWx0eS5zdGFuZm9yZC5lZHUvfmtu
> dXRoL3Rhb2NwLmh0bWwNCi0gKiAgICBpbiB0aGUgY2hhbmdlcyB0byBwYWdl
> cyAxNzEgYW5kIGZvbGxvd2luZyBvZiBWb2x1bWUgMikuICAgICAgICAgICAg
> ICAqLw0KKyAqICAgIGluIHRoZSBjaGFuZ2VzIHRvIFZvbHVtZSAyIG9uIHBh
> Z2VzIDE3MSBhbmQgZm9sbG93aW5nKS4gICAgICAgICAgICAgICovDQorDQor
> LyogICAgTi5CLiBUaGUgTU9ESUZJQ0FUSU9OUyBpbnRyb2R1Y2VkIGluIHRo
> ZSA5dGggcHJpbnRpbmcgKDIwMDIpIGFyZQ0KKyAgICAgIGluY2x1ZGVkIGhl
> cmU7IHRoZXJlJ3Mgbm8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCB0
> aGUgb3JpZ2luYWwuICovDQogDQogLyogICAgSWYgeW91IGZpbmQgYW55IGJ1
> Z3MsIHBsZWFzZSByZXBvcnQgdGhlbSBpbW1lZGlhdGVseSB0bw0KICAqICAg
> ICAgICAgICAgICAgICB0YW9jcEBjcy5zdGFuZm9yZC5lZHUNCiAgKiAgICAo
> YW5kIHlvdSB3aWxsIGJlIHJld2FyZGVkIGlmIHRoZSBidWcgaXMgZ2VudWlu
> ZSkuIFRoYW5rcyEgICAgICAgICAgICAqLw0KIA0KIC8qKioqKioqKioqKiog
> c2VlIHRoZSBib29rIGZvciBleHBsYW5hdGlvbnMgYW5kIGNhdmVhdHMhICoq
> KioqKioqKioqKioqKioqKiovDQotDQotLyogdGhlIG9sZCBDIGNhbGxpbmcg
> Y29udmVudGlvbnMgYXJlIHVzZWQgaGVyZSwgZm9yIHJlYXNvbnMgb2YgcG9y
> dGFiaWxpdHkgKi8NCisvKioqKioqKioqKioqIGluIHBhcnRpY3VsYXIsIHlv
> dSBuZWVkIHR3bydzIGNvbXBsZW1lbnQgYXJpdGhtZXRpYyAqKioqKioqKioq
> Lw0KIA0KICNkZWZpbmUgS0sgMTAwICAgICAgICAgICAgICAgICAgICAgLyog
> dGhlIGxvbmcgbGFnICovDQogI2RlZmluZSBMTCAgMzcgICAgICAgICAgICAg
> ICAgICAgICAvKiB0aGUgc2hvcnQgbGFnICovDQpAQCAtNTY4LDEwICs1NzEs
> MTMgQEANCiANCiAvKmxvbmcgcmFuX3hbS0tdOyAqLyAgICAgICAgICAgICAg
> ICAgICAvKiB0aGUgZ2VuZXJhdG9yIHN0YXRlICovDQogDQotLyogdm9pZCBy
> YW5fYXJyYXkobG9uZyBhYVtdLGludCBuKSAqLw0KKyNpZmRlZiBfX1NURENf
> Xw0KK3ZvaWQgcmFuX2FycmF5KGxvbmcgYWFbXSxpbnQgbikNCisjZWxzZQ0K
> IHZvaWQgcmFuX2FycmF5KGFhLG4pICAgIC8qIHB1dCBuIG5ldyByYW5kb20g
> bnVtYmVycyBpbiBhYSAqLw0KICAgbG9uZyAqYWE7ICAgLyogZGVzdGluYXRp
> b24gKi8NCiAgIGludCBuOyAgICAgIC8qIGFycmF5IGxlbmd0aCAobXVzdCBi
> ZSBhdCBsZWFzdCBLSykgKi8NCisjZW5kaWYNCiB7DQogICByZWdpc3RlciBp
> bnQgaSxqOw0KICAgZm9yIChqPTA7ajxLSztqKyspIGFhW2pdPXJhbl94W2pd
> Ow0KQEAgLTU4MCw1NyArNTg2LDU3IEBADQogICBmb3IgKDtpPEtLO2krKyxq
> KyspIHJhbl94W2ldPW1vZF9kaWZmKGFhW2otS0tdLHJhbl94W2ktTExdKTsN
> CiB9DQogDQorLyogdGhlIGZvbGxvd2luZyByb3V0aW5lcyBhcmUgZnJvbSBl
> eGVyY2lzZSAzLjYtLTE1ICovDQorLyogYWZ0ZXIgY2FsbGluZyByYW5fc3Rh
> cnQsIGdldCBuZXcgcmFuZG9tcyBieSwgZS5nLiwgIng9cmFuX2Fycl9uZXh0
> KCkiICovDQorDQorI2RlZmluZSBRVUFMSVRZIDEwMDkgLyogcmVjb21tZW5k
> ZWQgcXVhbGl0eSBsZXZlbCBmb3IgaGlnaC1yZXMgdXNlICovDQorbG9uZyBy
> YW5fYXJyX2J1ZltRVUFMSVRZXTsNCitsb25nIHJhbl9hcnJfc2VudGluZWw9
> LTE7DQorbG9uZyAqcmFuX2Fycl9wdHI9JnJhbl9hcnJfc2VudGluZWw7IC8q
> IHRoZSBuZXh0IHJhbmRvbSBudW1iZXIsIG9yIC0xICovDQorDQorI2RlZmlu
> ZSByYW5fYXJyX25leHQoKSAoKnJhbl9hcnJfcHRyPj0wPyAqcmFuX2Fycl9w
> dHIrKzogcmFuX2Fycl9jeWNsZSgpKQ0KK2xvbmcgcmFuX2Fycl9jeWNsZSgp
> DQorew0KKyAgcmFuX2FycmF5KHJhbl9hcnJfYnVmLFFVQUxJVFkpOw0KKyAg
> cmFuX2Fycl9idWZbMTAwXT0tMTsNCisgIHJhbl9hcnJfcHRyPXJhbl9hcnJf
> YnVmKzE7DQorICByZXR1cm4gcmFuX2Fycl9idWZbMF07DQorfQ0KKw0KICNk
> ZWZpbmUgVFQgIDcwICAgLyogZ3VhcmFudGVlZCBzZXBhcmF0aW9uIGJldHdl
> ZW4gc3RyZWFtcyAqLw0KICNkZWZpbmUgaXNfb2RkKHgpICAoKHgpJjEpICAg
> ICAgICAgIC8qIHVuaXRzIGJpdCBvZiB4ICovDQotI2RlZmluZSBldmVuaXpl
> KHgpICgoeCkmKE1NLTIpKSAgIC8qIG1ha2UgeCBldmVuICovDQogDQotLyog
> dm9pZCByYW5fc3RhcnQobG9uZyBzZWVkKSAqLw0KKyNpZmRlZiBfX1NURENf
> Xw0KK3ZvaWQgcmFuX3N0YXJ0KGxvbmcgc2VlZCkNCisjZWxzZQ0KIHZvaWQg
> cmFuX3N0YXJ0KHNlZWQpICAgIC8qIGRvIHRoaXMgYmVmb3JlIHVzaW5nIHJh
> bl9hcnJheSAqLw0KICAgbG9uZyBzZWVkOyAgICAgICAgICAgIC8qIHNlbGVj
> dG9yIGZvciBkaWZmZXJlbnQgc3RyZWFtcyAqLw0KKyNlbmRpZg0KIHsNCiAg
> IHJlZ2lzdGVyIGludCB0LGo7DQogICBsb25nIHhbS0srS0stMV07ICAgICAg
> ICAgICAgICAvKiB0aGUgcHJlcGFyYXRpb24gYnVmZmVyICovDQotICByZWdp
> c3RlciBsb25nIHNzPWV2ZW5pemUoc2VlZCsyKTsNCisgIHJlZ2lzdGVyIGxv
> bmcgc3M9KHNlZWQrMikmKE1NLTIpOw0KICAgZm9yIChqPTA7ajxLSztqKysp
> IHsNCiAgICAgeFtqXT1zczsgICAgICAgICAgICAgICAgICAgICAgLyogYm9v
> dHN0cmFwIHRoZSBidWZmZXIgKi8NCiAgICAgc3M8PD0xOyBpZiAoc3M+PU1N
> KSBzcy09TU0tMjsgLyogY3ljbGljIHNoaWZ0IDI5IGJpdHMgKi8NCiAgIH0N
> Ci0gIGZvciAoO2o8S0srS0stMTtqKyspIHhbal09MDsNCiAgIHhbMV0rKzsg
> ICAgICAgICAgICAgIC8qIG1ha2UgeFsxXSAoYW5kIG9ubHkgeFsxXSkgb2Rk
> ICovDQotICBzcz1zZWVkJihNTS0xKTsNCi0gIHQ9VFQtMTsgd2hpbGUgKHQp
> IHsNCi0gICAgZm9yIChqPUtLLTE7aj4wO2otLSkgeFtqK2pdPXhbal07ICAv
> KiAic3F1YXJlIiAqLw0KLSAgICBmb3IgKGo9S0srS0stMjtqPktLLUxMO2ot
> PTIpIHhbS0srS0stMS1qXT1ldmVuaXplKHhbal0pOw0KLSAgICBmb3IgKGo9
> S0srS0stMjtqPj1LSztqLS0pIGlmKGlzX29kZCh4W2pdKSkgew0KLSAgICAg
> IHhbai0oS0stTEwpXT1tb2RfZGlmZih4W2otKEtLLUxMKV0seFtqXSk7DQor
> ICBmb3IgKHNzPXNlZWQmKE1NLTEpLHQ9VFQtMTsgdDsgKSB7ICAgICAgIA0K
> KyAgICBmb3IgKGo9S0stMTtqPjA7ai0tKSB4W2oral09eFtqXSwgeFtqK2ot
> MV09MDsgLyogInNxdWFyZSIgKi8NCisgICAgZm9yIChqPUtLK0tLLTI7aj49
> S0s7ai0tKQ0KKyAgICAgIHhbai0oS0stTEwpXT1tb2RfZGlmZih4W2otKEtL
> LUxMKV0seFtqXSksDQogICAgICAgeFtqLUtLXT1tb2RfZGlmZih4W2otS0td
> LHhbal0pOw0KLSAgICB9DQogICAgIGlmIChpc19vZGQoc3MpKSB7ICAgICAg
> ICAgICAgICAvKiAibXVsdGlwbHkgYnkgeiIgKi8NCiAgICAgICBmb3IgKGo9
> S0s7aj4wO2otLSkgIHhbal09eFtqLTFdOw0KICAgICAgIHhbMF09eFtLS107
> ICAgICAgICAgICAgLyogc2hpZnQgdGhlIGJ1ZmZlciBjeWNsaWNhbGx5ICov
> DQotICAgICAgaWYgKGlzX29kZCh4W0tLXSkpIHhbTExdPW1vZF9kaWZmKHhb
> TExdLHhbS0tdKTsNCisgICAgICB4W0xMXT1tb2RfZGlmZih4W0xMXSx4W0tL
> XSk7DQogICAgIH0NCiAgICAgaWYgKHNzKSBzcz4+PTE7IGVsc2UgdC0tOw0K
> ICAgfQ0KICAgZm9yIChqPTA7ajxMTDtqKyspIHJhbl94W2orS0stTExdPXhb
> al07DQogICBmb3IgKDtqPEtLO2orKykgcmFuX3hbai1MTF09eFtqXTsNCi19
> DQotDQotLyogdGhlIGZvbGxvd2luZyByb3V0aW5lcyBhcmUgZnJvbSBleGVy
> Y2lzZSAzLjYtLTE1ICovDQotLyogYWZ0ZXIgY2FsbGluZyByYW5fc3RhcnQs
> IGdldCBuZXcgcmFuZG9tcyBieSwgZS5nLiwgIng9cmFuX2Fycl9uZXh0KCki
> ICovDQotDQotI2RlZmluZSBRVUFMSVRZIDEwMDkgLyogcmVjb21tZW5kZWQg
> cXVhbGl0eSBsZXZlbCBmb3IgaGlnaC1yZXMgdXNlICovDQotbG9uZyByYW5f
> YXJyX2J1ZltRVUFMSVRZXTsNCi1sb25nIHJhbl9hcnJfc2VudGluZWw9LTE7
> DQotbG9uZyAqcmFuX2Fycl9wdHI9JnJhbl9hcnJfc2VudGluZWw7IC8qIHRo
> ZSBuZXh0IHJhbmRvbSBudW1iZXIsIG9yIC0xICovDQotDQotI2RlZmluZSBy
> YW5fYXJyX25leHQoKSAoKnJhbl9hcnJfcHRyPj0wPyAqcmFuX2Fycl9wdHIr
> KzogcmFuX2Fycl9jeWNsZSgpKQ0KLWxvbmcgcmFuX2Fycl9jeWNsZSgpDQot
> ew0KLSAgcmFuX2FycmF5KHJhbl9hcnJfYnVmLFFVQUxJVFkpOw0KLSAgcmFu
> X2Fycl9idWZbMTAwXT0tMTsNCi0gIHJhbl9hcnJfcHRyPXJhbl9hcnJfYnVm
> KzE7DQotICByZXR1cm4gcmFuX2Fycl9idWZbMF07DQorICBmb3IgKGo9MDtq
> PDEwO2orKykgcmFuX2FycmF5KHgsS0srS0stMSk7IC8qIHdhcm0gdGhpbmdz
> IHVwICovDQorICByYW5fYXJyX3B0cj0mcmFuX2Fycl9zZW50aW5lbDsNCiB9
> DQogDQogLyogPT09PT09PT09PT09PT09PT09PT09IGVuZCBvZiBLbnV0aCdz
> IGNvZGUgPT09PT09PT09PT09PT09PT09PT09PSAqLw0K
> ---559023410-1141662977-1014960253=:3119--
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar  1 07:53:07 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 1 Mar 2002 08:53:07 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200203010753.IAA11315@pubhealth.ku.dk>

>>>>> "terra" == terra  <terra@diku.dk> writes:

    terra> Full_Name: M Welinder Version: 1.4 OS: (src)
    terra> Submission from: (NULL) (192.5.35.38)

    terra> It seems to me that pexp can be improved in the
    terra> lower_tail=TRUE and log_p=FALSE case by using expm1.
    terra> Something like

    terra> -expm1 (-x / scale);

    terra> I think.

Thank you, "terra".
Similar thoughts had crossed my mind quite a few months ago,
e.g. you find in  src/nmath/qt.c :

	    /* FIXME: Following cutoff is machine-precision dependent
	       -----  Really, use stable impl. of expm1(y) == exp(y) - 1,
	              as it is in GNU's mathlib ..*/
	    if (y > 1e-6) /* was (y > 0.002) */
		y = exp(y) - 1;
	    else { /* Taylor of	 e^y -1 : */
		y = (0.5 * y + 1) * y;
	    }

Unfortunately,  expm1() is NOT    ANSI C / ISO C as far as I know.

For the `complementary' function, log1p(),
we have been having our own builtin (src/nmath/log1p.c) to use
(unfortunately, we've used it unconditionally; from 1.5.0 on, we
 will only use it when there's no system log1p() available).


For expm1() it's the same:  
We (i.e. the "configure" script) should check for availability of a system
"exp1m()" and when it is not available, for portability, we need
to provide our own version.

Since GNU's mathlib does provide it, the source code is
available under GPL, i.e. directly usable for R.

Would you provide a  src/nmath/expm1.c  file,
modeled after R-devel's (not R 1.4.x!)  src/nmath/log1p.c one?
Feel free to ask me for more advice,
thank you in advance!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Fri Mar  1 07:56:17 2002
From: Martin.Schlather@uni-bayreuth.de (Martin.Schlather@uni-bayreuth.de)
Date: Fri, 01 Mar 2002 08:56:17 +0100
Subject: [Rd] fft
Message-ID: <3C7F3421.FCBF66C@uni-bayreuth.de>

This is a multi-part message in MIME format.
--------------CFA855794B7333D088726B1A
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,

I have problems when calling fft_factor and fft_work directly in my 
C-code. Martin Maechler already told me that I should not do this -- 
anyway, the code works fine if the length of the vector is a multiple 
of 2,3,5.
If the length of the vector has different form I get, in some cases, a 
segmentation fault when work and iwork are freed (I use C's malloc to 
allocate memory for work and iwork). No or less problems occur if I 
allocate more memory than stated in  src/appl/fft.c.

However R's fft in called in R does not fail.

I would be grateful if anybody would tell me why this happens or to 
which fact I did not pay attention.
Please find attached the package containing the relevant files.
Details can be found in  tests/test.R

Many thanks in advance.
Martin



-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193          
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/
--------------CFA855794B7333D088726B1A
Content-Type: application/x-gzip;
 name="FFT_0.0.0.tar.gz"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="FFT_0.0.0.tar.gz"

H4sICKkyfzwCA0ZGVF8wLjAuMC50YXIA7Rrtctu40X+Lp9iT2xvSoShSEiXXtjzNJXbOM06a
UZxOZ9KMB6JACQ0JckDStu4m9+xdgB+WlcR36ZwV94q1LQKLBbjYXewu1jo9vejtPDB43tAb
BwE+PW88GuqnP6yeNex44+FgPBr4/cDf8Xx/6Ps7EOxsAcq8oBJgJw+XMS2WTH6Rjsl85w8H
p6j/5ydvnk3PXl+c/f3Vw+jf97xRre/P6T9AZWv9+6P+aDxCerSDwQ54Rv8PDq9p+IEu2AGg
IUC3C7NyAZJlqSzIP3DDPBUH4Ln4Qy54ESPdGsHTslim8gBeUllwAW8aCcJRhXFbzN9Kwbsz
upIMp7hzdkxeUi4K/GP/5fznLGNinh/AFKzjCfju0PVsxOah5Fmh2YYszXM+ixnyDLh+lJaS
M+mGfwIN5JyHTOS4pxevz6HeLfQhlYBvRULydnp+AMuiyA56vevra3fBUneDk94vieaV/A+f
/4SK3qPw//4oCIZjPP99H92A8f9b0n8uw8ehfxX/K/33vcDof5v6j6LCRdfuLr9B/PeDcXv+
R8NAxf+xH5j4vw3Y5ZGYs0iF/8sf3r64/JHsYhfj8i0GfELYDQZEAZ1nHbhK+RySFRqMNU9L
FV735rSgDobYAvaS+jnnTSuT9iEhuxiteUR2DDzu8x+GWz//A3842PD/Q29ozv9WgOxyEcbl
nMFRgtt3l8eYGN/i8mLOU0TeRcV8dhc3vUQH0XuaZTEP747QHOVWKNwtstMGmw4h2p1ENC/q
9Pwep6J9yixNY0CfQgB6e1AseQ5RKUKV8gPqKEcUA3zBLXa2gmk6Qy7gBRN4h8F0F4i+AVAx
x6E8h7Ml/aBfhteJauisAFw5SdFpcYYMyjQBdU4SvLP02psE0u71CPkZn4pBLq4cwBvFovrs
48MReSYc7iT0JlIfmcOkTKUDe/w6lR8O65k40lAoogp9BRPo9lVbrYadmgpbdTPDpq8IGqE1
a+JvhPcYiyOBdwj8CGWHjydPbPhZb5BHYCXv+Hs4Br/BgZLbZUTDIpV60IHvNVf6kdmHNVWl
U0uz8h2u3w7oRRX2uGHVXuNZPTYos5Yys9e21IhAgd76HuKQnwr3kVR/WsRIXVFA/1CvqrHH
6HHsimCCzUPo9bQ8MonC5mIBWSnxdojWkop4RUjFEFpVRRFZnb/Mof39l+g4rYYaNhtF5/wn
lka11dp2LXx8n7JDdkOTDPViBfv7zshWBlawvHCnoBSl3o6RFMI0yUqMr4oJbb1pHKfXis1Y
BWK0w2pFvHbHNERrnK0qRK0ISy2GgqiZ2FOixBVCa4hisWrGn6Ca9za5tb+bvHp7fq657vUI
/KYVG43eu1qzEG9WQrHeLtOoul0CR+/MV+ptbFudIN3+1KzhCH6bYes10IpEa1awblK1mfXW
CNaOgvjCOVAkanvW95ZyVu+89zaSVG1ftWtX4OjXO5V7UBOwqR72XXtuTLDiudrnRB9ebcj1
LlsDjQCtUr+Lv69XasbQYDXmYyUxyZjVvk/3mtd/JLUD/rp8TnF4x2VreiSoyCzlo+068/to
cr7Hnv9dnF2cnzzk/f9X7n9ek/+p+q83qO7/Y5P/bUn/dTm0hh/a+q6KTugVzPn9o5//6QP/
B/Ar6r+Doa/uf/7IN/XfLeq/uZBNv4n/D0bBhv4H/bHx/9u5/xOd+sFRt70w1+mcTiYnF9O3
J1VKqtJTnrsJLSS/0TS2jRdPNROzvgoBLM5ZhYuZWBTLCo2zsauwNHdxVbbApDGT6dya22pQ
EdWjVQpqgZxxMbduEXodR0Umy3NwMVtPlKwopbDcZ1ZHb6POiCfVDtZeNrfvdBvmbNsh68Hv
DnvqTuLYf652gJlyxz3lEi9vMZ911uUFFmJQXh8WNuhSAHYllSt3vhI0sTp4xDp62FEj9uPK
iNX5V1fSvPcI/P9o4OGvyv+CYGD8/3b1XxUmvoH/7w/7gw39D0aB+f7HVqB1fZewAWQ3Q4FE
qUyAj/ZH3SzsxlyUN92FKMkuleGyquTh2Ma8NK+bLf3tWL7KC5bU85x1ChwraFHm8Bkguwn9
dypV0//MGBfV2ND1N8dWjOoh6KOhbc5LRaE34fmfrDmnq6o58D4Zi6lYlHTBYErI7i7kaBow
dgfYaVy/hcdKe/tJ55fexcvXHZusjdh6WlUBzJiMWFjEK6Lj4/CvpAmGKtT5jrBJonp1gWYt
Mp8+PX9zYpNIh6J2jIurZiSkhdXB2BxFk46Tl4lFZ7mlQtwV02WtNsTW/SmzIruKkzXmLFEY
DPPdBAd0WYlo3ucpy0Gkhd7EJ1VMVYgvaQxTVT9nYCnCGS3CpQ00UhSqyEln6RXTBc5crZjq
6qdkNGMFmytM9xjesEXCBFqFirIRLeOCZFLtV++QiDCNVS/Y3z8EIdNr1UFjbEVY5yqyFDyy
FPWeolKFOWxP1Iej5000+h5R3qkOW9E7/yDw3n9RM+q/E7+z8JXcP2c1ukxIIU7FAgqeMIJW
w2ihE7ZGPGtJTR+eQCUN3/EcdMueTqMa2d1HqQn1rlQ5XMtOTXMwtems53BfKXOAL0sd4H7T
r/n5PaWsCqL/d/f/s1fPT/75Let/t/f/ofrih/7+19DEfwMGDBgwYMCAAQMGDBgwYMCAAQMG
DBgwYMCAAQMGDBgwYMCAAQMGfg3+A2oMCkwAUAAA
--------------CFA855794B7333D088726B1A--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From o.christensen@lancaster.ac.uk  Fri Mar  1 11:06:14 2002
From: o.christensen@lancaster.ac.uk (Ole Christensen)
Date: Fri, 01 Mar 2002 11:06:14 +0000
Subject: [Rd] fft
References: <3C7F3421.FCBF66C@uni-bayreuth.de>
Message-ID: <3C7F60A6.4648041B@lancs.ac.uk>

This is a multi-part message in MIME format.
--------------583A5CD90029B2577BD50770
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi Martin

I tried your FFT stuff. Here is my report:

1. I observed similar behaviour as you did (on my Linux machine with
R-1.4.1)

2. Changing from malloc to S_alloc seems to remove the problem (see
attachment).

I remember I had a similar problem long time ago (which caused me to
change from malloc to S_alloc everywhere) when calling the same function
twice (as you have). As far as I remember this problem was present on
Linux but not on Solaris. I could try running your test functions on
Solaris, but first I have to install a new R-version there (R-1.3.0 is
probably too old for this ?).

Hope this sheds a little light on the problem, but we are not there yet
(I do not understand the reason for the difference between S_alloc and
malloc). 


Ole


Martin.Schlather@uni-bayreuth.de wrote:
> 
> Hi,
> 
> I have problems when calling fft_factor and fft_work directly in my
> C-code. Martin Maechler already told me that I should not do this --
> anyway, the code works fine if the length of the vector is a multiple
> of 2,3,5.
> If the length of the vector has different form I get, in some cases, a
> segmentation fault when work and iwork are freed (I use C's malloc to
> allocate memory for work and iwork). No or less problems occur if I
> allocate more memory than stated in  src/appl/fft.c.
> 
> However R's fft in called in R does not fail.
> 
> I would be grateful if anybody would tell me why this happens or to
> which fact I did not pay attention.
> Please find attached the package containing the relevant files.
> Details can be found in  tests/test.R
> 
> Many thanks in advance.
> Martin
> 
> --
> Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
> Abteilung Bodenphysik            phone: +49 (0)921 55 2193
> Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
> D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/
> 
>   ------------------------------------------------------------------------
>                        Name: FFT_0.0.0.tar.gz
>    FFT_0.0.0.tar.gz    Type: Unix Tape Archive (application/x-tar)
>                    Encoding: base64

-- 
Ole F. Christensen
Department of Mathematics and Statistics
Fylde College, Lancaster University 
Lancaster, LA1 4YF, England
--------------583A5CD90029B2577BD50770
Content-Type: application/x-gzip;
 name="FFT_0.0.1.tar.gz"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="FFT_0.0.1.tar.gz"

H4sICO1bfzwCA0ZGVF8wLjAuMS50YXIA7Rprb9s4Ml+Pv2LWuVtIrixLsmznkjq4bpt0A6Td
wkkPB/SKgJYpm1u9QElJfIvub98hJfnVJrs9bNxcj4M0ooZDajjvYXp6etnde2BwHN8Z9vvy
2ev7Lj4dp+d76lnDnjP0e8NBv6/oXKffG+5Bf28HUOYFFQB7wVzwvGDJXXTZbO9bhFPU/4uT
i+fjszeXZz+9fhj9u44z8P079d/vrfTvDZHO9byevweO1v+DwxsafKAzdghoCNDpwKScgWBZ
KgryTyZyniaH4NiO7ZJLXkRItyIAI06nNkwW8NPpc5M8K4t5Kg7hFRUFT+AimEe0mDMBTyuM
vcT8o0x4Z0IXguESe8qOySvKkwL/sf9y/QuWsWSaH8IYjOMRuLZvOyZi80DwrFCHgCzNcz6J
mDoBfiBMS8GZsIO/gAJyzgOW5HjEl2/OoT48eJAKwM8iIXk7Pj+EeVFkh93uzc2NPWOpvcVK
99dYMUv+l/w/pkn3UcR/FwOAP0T/d3tOX8f/Xek/F8Hj0L/M/72e0r/naf3vUv9hWNgYGO35
V8j/bn+49P+BL+u/nuPp/L8T2OdhMmWhTP9XP7x9efUj2cdXzMQrDLiEsFvMgAm0nrfgOuVT
iBdoMMY0LWVCbU9pQS3MqQW04/o55c0oE+YRIfuYn3lI9jQ8bv8Pgp37f8/v+1vxv+cOhtr/
dwFknydBVE4ZPI2xuLbnx1gJr3B5MeUpIjdREZ9s4sZXGCC6z7Is4sHmDM1zJgqJWyFby2TT
IqTbhjLnyQwuaBSlAbS7a6sv1GZQR6SKwkiswgSjaJsXVw0i5/9haWgUpkkIUQEqpHlRV/j3
hCkVpSZpGgFGKQKAzBRznkNYJoFsG5A1liOKAbK8wmLLM04neC54yRLsirCABqKaCJpMcSrP
4WxOP6iPYUtSTZ0VgDtjy8RDzpBBkcYgPS/Gvqe7bEaQFiVAfsGnZJAn1xZgUzKrfnv4sJI8
SyxuxfQ2lL8yiwmRCgva/CYVH47qlTjTUEiiCn0NI+h4cix3w5eaCkf1MMOhKwkaoTV74k+I
rZDBkcA5Av4UZYePJ09M+EUdkIfYEL7j7+EY3AYHUm5XIQ2KVKhJC75XXKlHZh7VVJWVGIqV
73D/5YTaVGKPG1bNNZ7lY4syW1Jm5tqRGhFIUEdvIw75qXAfSfVPiRipKwrwjtSuCnuMMcys
CEY4PIJuV8kjEyhsab5ZKbDDRGtJk2hBSMUQWlVFERqtv01h+fPvpGUtNdSw2Si6NuZKAaZZ
Cx+/J+2Q3dI4Q70Y/YMDa2BKAytYXthjkIqSX8fcDEEaZyVmbMmEst4UHeVGshlJR0I7rHbE
Rj6iAVrjZFEhakUYcjMURM1EW4pSuZqPYjFqxp+gmtvb3JrfjV6/PT9XXHe7NevtP7Rvo9d7
92w24s1OKNzVNo3Cl1vg7OZ66VywzU4TWda4sKD5+j0fv9j4qgop6/TSohp3kk7bjDf8CJ7C
H/MktQOabbK0Y1i34dquu2sEa76X3OF4kkQexvjekNHxnfPeRJJq7MpxHXss9XmrikdyAQ7l
w9x0oMbmK56rc45UtFCeU59y6REhoBuob/H39U7NHHqIwnys7CcUjBnLD6q31fdRpx+buP9l
hankcyNTKHokqMgMmRrMuoT9SL7V+u/y7PL85CH7/9/p/xDd9H/ewKn6f3eg678d6b++/6zh
h9X9LuYSdCbds33r/d/4gf8C+AX3vz3flfe/ztDT97871H/TkI2/SvzvD/pb+vd8R8f/3fT/
RFVM8LSzbG/rKkhVYqPL8duTqp6TtR3P7ZgWgt8qGtPENlGuxGKpQgCLclbhIpbMinmFxtX4
KrE0t3FXNsNaKxPp1JiaclIS1bNV5WaAmPBkaqwQah9LZibDsXAzUy0UrChFYtjPjZY6Rl1O
jqoTrH1sam68NsyZpkXWk98Ge7Kat8y/VifAArNln3KBrVbEJ611eYGBGJTXh5kJqnHHV0HF
wp4uEhobLXSxlpq25Iz5uApJ6f+ygcy7jyD+D/q9QU/e/7uDoa/j/271X10jfIX47/leXf8P
es5A/l8Q1xsOPB3/dwHL0HcFW0D2s4hiZyxi4IODQScLOhFPytvOLCnJPhXBvLp3w7mtdWle
D5f0q7l8gUKO63XWOgXOFbQoc/gMkP2Y/pwKOXQ/M8eTas633e25BaNqCjw0tO11aVKoQzju
J3tO6aIa9pxP5iKazEo6YzAmZH8f8hJz3tDu4UsT+g10KxXtR61fu5ev3rRMsjZjqmXVfV3G
RMiCIloQlR/9v5MmGcpU51qJSWL5Vt9rrGXm02fnFycmCVUqWs7x5LqZCWhhtDA3h+GoZeVl
bNBJbsgUd83UndAyxdbvY2aEZpUna8xZLDGY5jsxTqg7GaJ4n6YshyQt1CE+uXOU1+YljWAs
b7sZGJJwQotgbgINJYW8kqST9Jqp68hc7piqu0rBaMYKNpWYzjFcsFnMErQKmWVDWkYFyYQ8
rzohSYI0km/9g4MjSER6I1/QGJcirGsVUSY8NCR1W1LJWy0cj+QvS60bKfQ9oty4yzXCd+5h
33l/p2bk3xL+ZOFLuX/OatQdG4UoTWZQ8JgRtBpGC1WwNeJZK2o8eAKVNFzLsTAsO6qMamR3
H6UiVKeSl9dKdnKZhaVNa72G+0KZA9wtdYD7Tb/m58+UsrxH/L/r/89evzj519e8/1v1//7Q
7Vf//6un878GDRo0aNCgQYMGDRo0aNCgQYMGDRo0aNCgQYMGDRo0aNCgQYMGDb8HvwE4vgnp
AFAAAA==
--------------583A5CD90029B2577BD50770--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From terra@diku.dk  Fri Mar  1 14:58:08 2002
From: terra@diku.dk (terra@diku.dk)
Date: Fri, 1 Mar 2002 15:58:08 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200203011458.PAA16714@pubhealth.ku.dk>



If you want an expm1, this will do just fine, given the availability
of log1p.  It compares well with Solaris' expm1.  (And, luckily, is
much better than just exp(x)-1...)

Morten



double
myexpm1 (double x)
{
  double y;

  if (fabs (x) > 1e-6)
    {
      y = exp (x) - 1;
      if (y > 10000)
      return y;
    }
  else
    y = (x / 2 + 1) * x; /* Taylor expansion */

  /* Newton step.  */
  y -= (1 + y) * (log1p (y) - x);
  return y;
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmf@atmiserv.com  Fri Mar  1 15:19:57 2002
From: jmf@atmiserv.com (jmf@atmiserv.com)
Date: Fri, 1 Mar 2002 16:19:57 +0100 (MET)
Subject: [Rd] Setting working directory (PR#1338)
Message-ID: <200203011519.QAA16850@pubhealth.ku.dk>

Full_Name: Jeffrey M. Freedman
Version: 1.4.1
OS: Mac OSX
Submission from: (NULL) (169.226.200.51)


I'm running R version 1.4.1 (NOT DARWIN VERSION) and it crashes every time I set
a working directory (either from the menu or using setwd) to a path that is
longer than a certain number of characters. This was not a problem in version
1.3.1.

Thank you.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar  1 17:30:48 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 1 Mar 2002 09:30:48 -0800 (PST)
Subject: [Rd] Setting working directory (PR#1338)
In-Reply-To: <200203011519.QAA16850@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203010930250.248186-100000@homer05.u.washington.edu>

On Fri, 1 Mar 2002 jmf@atmiserv.com wrote:

> Full_Name: Jeffrey M. Freedman
> Version: 1.4.1
> OS: Mac OSX
> Submission from: (NULL) (169.226.200.51)
>
>
> I'm running R version 1.4.1 (NOT DARWIN VERSION) and it crashes every time I set
> a working directory (either from the menu or using setwd) to a path that is
> longer than a certain number of characters. This was not a problem in version
> 1.3.1.

WHAT number of characters (ie can you give us an example).

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar  1 20:23:55 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 1 Mar 2002 21:23:55 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200203012023.VAA17931@pubhealth.ku.dk>

>>>>> "Morten" == Morten Welinder <terra@diku.dk> writes:

    Morten> If you want an expm1, this will do just fine, given
    Morten> the availability of log1p.  It compares well with
    Morten> Solaris' expm1.  (And, luckily, is much better than
    Morten> just exp(x)-1...)

    Morten> Morten

looks very reasonable;  this might make it 
(no promises yet).

Martin

    Morten> double
    Morten> myexpm1 (double x)
    Morten> {
    Morten> double y;

    Morten> if (fabs (x) > 1e-6)
    Morten> {
    Morten> y = exp (x) - 1;
    Morten> if (y > 10000)
    Morten> return y;
    Morten> }
    Morten> else
    Morten> y = (x / 2 + 1) * x; /* Taylor expansion */

    Morten> /* Newton step.  */
    Morten> y -= (1 + y) * (log1p (y) - x);
    Morten> return y;
    Morten> }


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Fri Mar  1 20:31:42 2002
From: jago@mclink.it (Stefano Iacus)
Date: Fri, 1 Mar 2002 21:31:42 +0100
Subject: [Rd] Setting working directory (PR#1338)
In-Reply-To: <200203011519.QAA16850@pubhealth.ku.dk>
Message-ID: <57294498-2D53-11D6-AD9E-003065CC4CB8@mclink.it>

Yes, I'm investigating that.

Normally path longer then 255 chars are not allowed. I'll try to fix 
this in time for 1.5.0

stefano

On Venerdì, marzo 1, 2002, at 04:19 , jmf@atmiserv.com wrote:

> Full_Name: Jeffrey M. Freedman
> Version: 1.4.1
> OS: Mac OSX
> Submission from: (NULL) (169.226.200.51)
>
>
> I'm running R version 1.4.1 (NOT DARWIN VERSION) and it crashes every 
> time I set
> a working directory (either from the menu or using setwd) to a path 
> that is
> longer than a certain number of characters. This was not a problem in 
> version
> 1.3.1.
>
> Thank you.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar  1 22:55:10 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 1 Mar 2002 14:55:10 -0800 (PST)
Subject: [Rd] Setting working directory (PR#1338)
In-Reply-To: <200203011519.QAA16850@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203011441490.248186-100000@homer05.u.washington.edu>

On Fri, 1 Mar 2002 jmf@atmiserv.com wrote:

> Full_Name: Jeffrey M. Freedman
> Version: 1.4.1
> OS: Mac OSX
> Submission from: (NULL) (169.226.200.51)
>
>
> I'm running R version 1.4.1 (NOT DARWIN VERSION) and it crashes every time I set
> a working directory (either from the menu or using setwd) to a path that is
> longer than a certain number of characters. This was not a problem in version
> 1.3.1.


I can duplicate this.

setwd("Macintosh HD:Users:thomas:pointless:pointless:pointless:pointless")
getwd()
crashes (the directory does exist)

The error doesn't depend on levels of nesting (replacing 'pointless' by
'a' removes the crash), and it doesn't require the directory to exist

setwd("R is free software and comes with ABSOLUTELY NO WARRANTY. You are welcome to redistribute it under certain conditions.")
getwd()

which is a legal, non existent path, causes the crash.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From daven@llnl.gov  Sat Mar  2 00:19:27 2002
From: daven@llnl.gov (daven@llnl.gov)
Date: Sat, 2 Mar 2002 01:19:27 +0100 (MET)
Subject: [Rd] GNU tar does not ignore files in .Rbuildignore (PR#1339)
Message-ID: <200203020019.BAA18363@pubhealth.ku.dk>

Full_Name: David O. Nelson
Version: 1.4.1
OS: solaris 2.7
Submission from: (NULL) (128.115.150.74)


Putting patterns in .Rbuildignore has no effect when the tar being used is gnu
tar (1.13) on solaris 2.7, whilst /usr/sbin/tar works perfectly.

TO REPRODUCE:

The current directory contains a source package directory ./mypkg...

bimini.jgi-psf.org% echo >mypkg/foo
bimini.jgi-psf.org% echo "foo" >mypkg/.Rbuildignore
bimini.jgi-psf.org% R CMD build mypkg
* checking for file `mypkg/DESCRIPTION' ... OK
* preparing `mypkg':
* checking whether `INDEX' is up-to-date ... NO
* creating new INDEX
* removing junk files
* building `mypkg_0.1.tar.gz'

bimini.jgi-psf.org% gzcat mypkg_0.1.tar.gz |tar tf -
mypkg/
mypkg/DESCRIPTION
mypkg/R/
mypkg/R/First.lib.R
mypkg/INDEX
mypkg/man/
mypkg/man/First.lib.Rd
bimini.jgi-psf.org% setenv PATH /usr/local/bin:$PATH
bimini.jgi-psf.org% tar --version
tar (GNU tar) 1.13

Copyright (C) 1988, 92,93,94,95,96,97,98, 1999 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

Written by John Gilmore and Jay Fenlason.
bimini.jgi-psf.org% R CMD build mypkg
* checking for file `mypkg/DESCRIPTION' ... OK
* preparing `mypkg':
* checking whether `INDEX' is up-to-date ... OK
* removing junk files
* building `mypkg_0.1.tar.gz'

bimini.jgi-psf.org% gzcat mypkg_0.1.tar.gz | tar tf -
mypkg/
mypkg/foo
mypkg/DESCRIPTION
mypkg/.Rbuildignore
mypkg/R/
mypkg/R/First.lib.R
mypkg/INDEX
mypkg/man/
mypkg/man/First.lib.Rd
bimini.jgi-psf.org% 


THE PROBLEM:

The exclude file produced by build and placed in /tmp/Rbuild.$$ contain file
names of the form mypkg/xxx, where mypkg is the package directory and xxx is the
path name relative to mypkg. This is the format accepted by /usr/sbin/tar,
whilst gnu tar expects patterns without the preceding package name mypkg/.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar  2 07:56:55 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 2 Mar 2002 08:56:55 +0100 (MET)
Subject: [Rd] GNU tar does not ignore files in .Rbuildignore (PR#1339)
Message-ID: <200203020756.IAA18816@pubhealth.ku.dk>

This appears to be a bug in GNU tar 1.13 and not in R.  I can confirm it
for that version of tar on Solaris, but was aware that it went away when
the cygwin port moved to later versions.  All of 1.13.17 on Linux, 1.13.19
on cygwin and 1.13.25 (which I have just built on Solaris from
alpha.gnu.org) work correctly.  My memory is that 1.12 used to work, too.

Assuming info is finding the correct manual for 1.13, my reading of the
definition of exclude patterns is that build has it correct.

I don't like using alpha software in production work, but the lack of a GNU
tar release since 1999 makes this essential and it looks like all the
common Linux distributions supply later versions.

On Sat, 2 Mar 2002 daven@llnl.gov wrote:

> Full_Name: David O. Nelson
> Version: 1.4.1
> OS: solaris 2.7
> Submission from: (NULL) (128.115.150.74)
>
>
> Putting patterns in .Rbuildignore has no effect when the tar being used is gnu
> tar (1.13) on solaris 2.7, whilst /usr/sbin/tar works perfectly.
>
> TO REPRODUCE:
>
> The current directory contains a source package directory ./mypkg...
>
> bimini.jgi-psf.org% echo >mypkg/foo
> bimini.jgi-psf.org% echo "foo" >mypkg/.Rbuildignore
> bimini.jgi-psf.org% R CMD build mypkg
> * checking for file `mypkg/DESCRIPTION' ... OK
> * preparing `mypkg':
> * checking whether `INDEX' is up-to-date ... NO
> * creating new INDEX
> * removing junk files
> * building `mypkg_0.1.tar.gz'
>
> bimini.jgi-psf.org% gzcat mypkg_0.1.tar.gz |tar tf -
> mypkg/
> mypkg/DESCRIPTION
> mypkg/R/
> mypkg/R/First.lib.R
> mypkg/INDEX
> mypkg/man/
> mypkg/man/First.lib.Rd
> bimini.jgi-psf.org% setenv PATH /usr/local/bin:$PATH
> bimini.jgi-psf.org% tar --version
> tar (GNU tar) 1.13
>
> Copyright (C) 1988, 92,93,94,95,96,97,98, 1999 Free Software Foundation, Inc.
> This is free software; see the source for copying conditions.  There is NO
> warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
>
> Written by John Gilmore and Jay Fenlason.
> bimini.jgi-psf.org% R CMD build mypkg
> * checking for file `mypkg/DESCRIPTION' ... OK
> * preparing `mypkg':
> * checking whether `INDEX' is up-to-date ... OK
> * removing junk files
> * building `mypkg_0.1.tar.gz'
>
> bimini.jgi-psf.org% gzcat mypkg_0.1.tar.gz | tar tf -
> mypkg/
> mypkg/foo
> mypkg/DESCRIPTION
> mypkg/.Rbuildignore
> mypkg/R/
> mypkg/R/First.lib.R
> mypkg/INDEX
> mypkg/man/
> mypkg/man/First.lib.Rd
> bimini.jgi-psf.org%
>
>
> THE PROBLEM:
>
> The exclude file produced by build and placed in /tmp/Rbuild.$$ contain file
> names of the form mypkg/xxx, where mypkg is the package directory and xxx is the
> path name relative to mypkg. This is the format accepted by /usr/sbin/tar,
> whilst gnu tar expects patterns without the preceding package name mypkg/.
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Mar  2 15:58:18 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 2 Mar 2002 16:58:18 +0100
Subject: [Rd] pweibull.c (PR#1334)
In-Reply-To: <200202282048.VAA09961@pubhealth.ku.dk>
References: <200202282048.VAA09961@pubhealth.ku.dk>
Message-ID: <15488.63130.426668.170319@gargle.gargle.HOWL>

>>>>> "Morten" == Morten Welinder <terra@diku.dk> writes:

    Morten> Full_Name: M Welinder Version: 1.4 OS: (src)
    Morten> Submission from: (NULL) (192.5.35.38)


    Morten> It seems to me that pweibull can be improved in the
    Morten> lower_tail=TRUE and log_p=FALSE case by using expm1.
    Morten> Something like

    Morten> -expm1(-pow(x / scale, shape)),

yes; now that in R-devel (1.5.0 to be)
 expm1() is guaranteed to be available -- I've changed it there.

Note that this is not only for log_p=FALSE, but for both cases
of lower_tail=TRUE

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Sat Mar  2 16:02:27 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat, 2 Mar 2002 17:02:27 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200203021602.RAA19606@pubhealth.ku.dk>

>>>>> "Morten" == Morten Welinder <terra@diku.dk> writes:

    Morten> If you want an expm1, this will do just fine, given
    Morten> the availability of log1p.  It compares well with
    Morten> Solaris' expm1.  (And, luckily, is much better than
    Morten> just exp(x)-1...)

yes, it looks fine; I've compared it with several other versions
(in R, of course).

I've added it for R-devel -- only when there's no system expm1().

    Morten> double myexpm1 (double x) { double y;

    Morten>   if (fabs (x) > 1e-6) { y = exp (x) - 1; if (y >
    Morten> 10000) return y; } else y = (x / 2 + 1) * x; /*
    Morten> Taylor expansion */

    Morten>   /* Newton step.  */ y -= (1 + y) * (log1p (y) -
    Morten> x); return y; }

I've also improved pexp() following your suggestion -- but note my
answer to #1334 (pweibull) which applies here as well!

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From schutz@wehi.edu.au  Sun Mar  3 03:17:10 2002
From: schutz@wehi.edu.au (schutz@wehi.edu.au)
Date: Sun, 3 Mar 2002 04:17:10 +0100 (MET)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
Message-ID: <200203030317.EAA20430@pubhealth.ku.dk>

Prof Brian D Ripley wrote:

>Attachments don't really work with R-bugs.  To save us trying to unpick
>this manually, could you re-send it as the body of a message to R-bugs
>in reply to this one, or quoting (PR#1336) in the subject, please?

Sorry about that (Pine sometimes modify lines of the body without warning,
so I preferred using an attachment). Here is the patch for src/main/RNG.c.

Frédéric
---
>> Don Knuth recently updated its RNG, following the discovery of a
>> weakness in the seed initialisation (see
>> http://Sunburn.Stanford.EDU/~knuth/news02.html), so I believe that the
>> corresponding code in R should be updated as well. If it may be usefull,
>> I attach a patch to do the change.
>>
>> Notes:
>>
>>   - only a few lines of code have really changed, but the order of the
>>     functions has changed in Knuth's original code, so the patch is
>>     longer than it should really be;
>>   - Despite Knuth's request that no change should be made to the code,
>>     the present R code (1.5.0-devel and previous) contains a change (the
>>     line "long ran_x[KK];" is commented, and ran_x is defined elsewhere
>>     in the program). The patch contains the _same_ change; I let you
>>     decide if this is acceptable in regard to Knuth's request.

--- RNG.c.old	Fri Mar  1 08:42:45 2002
+++ RNG.c	Fri Mar  1 14:26:08 2002
@@ -543,6 +543,7 @@
 #define ran_x             dummy
 
 /* ===================  Knuth TAOCP ========================== */
+/* From http://www-cs-faculty.Stanford.EDU/~knuth/programs/rng.c */
 
          /* Please do NOT alter this part of the code */
 
@@ -551,15 +552,17 @@
  *    It is explained in Seminumerical Algorithms, 3rd edition, Section 3.6
  *    (or in the errata to the 2nd edition --- see
  *        http://www-cs-faculty.stanford.edu/~knuth/taocp.html
- *    in the changes to pages 171 and following of Volume 2).              */
+ *    in the changes to Volume 2 on pages 171 and following).              */
+
+/*    N.B. The MODIFICATIONS introduced in the 9th printing (2002) are
+      included here; there's no backwards compatibility with the original. */
 
 /*    If you find any bugs, please report them immediately to
  *                 taocp@cs.stanford.edu
  *    (and you will be rewarded if the bug is genuine). Thanks!            */
 
 /************ see the book for explanations and caveats! *******************/
-
-/* the old C calling conventions are used here, for reasons of portability */
+/************ in particular, you need two's complement arithmetic **********/
 
 #define KK 100                     /* the long lag */
 #define LL  37                     /* the short lag */
@@ -568,10 +571,13 @@
 
 /*long ran_x[KK]; */                   /* the generator state */
 
-/* void ran_array(long aa[],int n) */
+#ifdef __STDC__
+void ran_array(long aa[],int n)
+#else
 void ran_array(aa,n)    /* put n new random numbers in aa */
   long *aa;   /* destination */
   int n;      /* array length (must be at least KK) */
+#endif
 {
   register int i,j;
   for (j=0;j<KK;j++) aa[j]=ran_x[j];
@@ -580,57 +586,57 @@
   for (;i<KK;i++,j++) ran_x[i]=mod_diff(aa[j-KK],ran_x[i-LL]);
 }
 
+/* the following routines are from exercise 3.6--15 */
+/* after calling ran_start, get new randoms by, e.g., "x=ran_arr_next()" */
+
+#define QUALITY 1009 /* recommended quality level for high-res use */
+long ran_arr_buf[QUALITY];
+long ran_arr_sentinel=-1;
+long *ran_arr_ptr=&ran_arr_sentinel; /* the next random number, or -1 */
+
+#define ran_arr_next() (*ran_arr_ptr>=0? *ran_arr_ptr++: ran_arr_cycle())
+long ran_arr_cycle()
+{
+  ran_array(ran_arr_buf,QUALITY);
+  ran_arr_buf[100]=-1;
+  ran_arr_ptr=ran_arr_buf+1;
+  return ran_arr_buf[0];
+}
+
 #define TT  70   /* guaranteed separation between streams */
 #define is_odd(x)  ((x)&1)          /* units bit of x */
-#define evenize(x) ((x)&(MM-2))   /* make x even */
 
-/* void ran_start(long seed) */
+#ifdef __STDC__
+void ran_start(long seed)
+#else
 void ran_start(seed)    /* do this before using ran_array */
   long seed;            /* selector for different streams */
+#endif
 {
   register int t,j;
   long x[KK+KK-1];              /* the preparation buffer */
-  register long ss=evenize(seed+2);
+  register long ss=(seed+2)&(MM-2);
   for (j=0;j<KK;j++) {
     x[j]=ss;                      /* bootstrap the buffer */
     ss<<=1; if (ss>=MM) ss-=MM-2; /* cyclic shift 29 bits */
   }
-  for (;j<KK+KK-1;j++) x[j]=0;
   x[1]++;              /* make x[1] (and only x[1]) odd */
-  ss=seed&(MM-1);
-  t=TT-1; while (t) {
-    for (j=KK-1;j>0;j--) x[j+j]=x[j];  /* "square" */
-    for (j=KK+KK-2;j>KK-LL;j-=2) x[KK+KK-1-j]=evenize(x[j]);
-    for (j=KK+KK-2;j>=KK;j--) if(is_odd(x[j])) {
-      x[j-(KK-LL)]=mod_diff(x[j-(KK-LL)],x[j]);
+  for (ss=seed&(MM-1),t=TT-1; t; ) {       
+    for (j=KK-1;j>0;j--) x[j+j]=x[j], x[j+j-1]=0; /* "square" */
+    for (j=KK+KK-2;j>=KK;j--)
+      x[j-(KK-LL)]=mod_diff(x[j-(KK-LL)],x[j]),
       x[j-KK]=mod_diff(x[j-KK],x[j]);
-    }
     if (is_odd(ss)) {              /* "multiply by z" */
       for (j=KK;j>0;j--)  x[j]=x[j-1];
       x[0]=x[KK];            /* shift the buffer cyclically */
-      if (is_odd(x[KK])) x[LL]=mod_diff(x[LL],x[KK]);
+      x[LL]=mod_diff(x[LL],x[KK]);
     }
     if (ss) ss>>=1; else t--;
   }
   for (j=0;j<LL;j++) ran_x[j+KK-LL]=x[j];
   for (;j<KK;j++) ran_x[j-LL]=x[j];
-}
-
-/* the following routines are from exercise 3.6--15 */
-/* after calling ran_start, get new randoms by, e.g., "x=ran_arr_next()" */
-
-#define QUALITY 1009 /* recommended quality level for high-res use */
-long ran_arr_buf[QUALITY];
-long ran_arr_sentinel=-1;
-long *ran_arr_ptr=&ran_arr_sentinel; /* the next random number, or -1 */
-
-#define ran_arr_next() (*ran_arr_ptr>=0? *ran_arr_ptr++: ran_arr_cycle())
-long ran_arr_cycle()
-{
-  ran_array(ran_arr_buf,QUALITY);
-  ran_arr_buf[100]=-1;
-  ran_arr_ptr=ran_arr_buf+1;
-  return ran_arr_buf[0];
+  for (j=0;j<10;j++) ran_array(x,KK+KK-1); /* warm things up */
+  ran_arr_ptr=&ran_arr_sentinel;
 }
 
 /* ===================== end of Knuth's code ====================== */


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Mar  3 09:28:04 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 3 Mar 2002 09:28:04 +0000 (GMT)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
In-Reply-To: <200203030317.EAA20430@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0203030923530.27666-100000@auk.stats>

It's not that simple.  This is an new generator, incompatible with
the old one.

I am sure the `weakness' does not arise in reasonable R usage, but I was
amazed that Knuth was unaware of the problem (which I regard as
well-known): but then he is a theoretician.

I will have to add this as a separate generator, since we really, really
can't re-define random number generators and so make work unreproducible.

On Sun, 3 Mar 2002 schutz@wehi.edu.au wrote:

> Prof Brian D Ripley wrote:
>
> >Attachments don't really work with R-bugs.  To save us trying to unpick
> >this manually, could you re-send it as the body of a message to R-bugs
> >in reply to this one, or quoting (PR#1336) in the subject, please?
>
> Sorry about that (Pine sometimes modify lines of the body without warning,
> so I preferred using an attachment). Here is the patch for src/main/RNG.c.
>
> Frédéric
> ---
> >> Don Knuth recently updated its RNG, following the discovery of a
> >> weakness in the seed initialisation (see
> >> http://Sunburn.Stanford.EDU/~knuth/news02.html), so I believe that the
> >> corresponding code in R should be updated as well. If it may be usefull,
> >> I attach a patch to do the change.
> >>
> >> Notes:
> >>
> >>   - only a few lines of code have really changed, but the order of the
> >>     functions has changed in Knuth's original code, so the patch is
> >>     longer than it should really be;
> >>   - Despite Knuth's request that no change should be made to the code,
> >>     the present R code (1.5.0-devel and previous) contains a change (the
> >>     line "long ran_x[KK];" is commented, and ran_x is defined elsewhere
> >>     in the program). The patch contains the _same_ change; I let you
> >>     decide if this is acceptable in regard to Knuth's request.
>
> --- RNG.c.old	Fri Mar  1 08:42:45 2002
> +++ RNG.c	Fri Mar  1 14:26:08 2002
> @@ -543,6 +543,7 @@
>  #define ran_x             dummy
>
>  /* ===================  Knuth TAOCP ========================== */
> +/* From http://www-cs-faculty.Stanford.EDU/~knuth/programs/rng.c */
>
>           /* Please do NOT alter this part of the code */
>
> @@ -551,15 +552,17 @@
>   *    It is explained in Seminumerical Algorithms, 3rd edition, Section 3.6
>   *    (or in the errata to the 2nd edition --- see
>   *        http://www-cs-faculty.stanford.edu/~knuth/taocp.html
> - *    in the changes to pages 171 and following of Volume 2).              */
> + *    in the changes to Volume 2 on pages 171 and following).              */
> +
> +/*    N.B. The MODIFICATIONS introduced in the 9th printing (2002) are
> +      included here; there's no backwards compatibility with the original. */
>
>  /*    If you find any bugs, please report them immediately to
>   *                 taocp@cs.stanford.edu
>   *    (and you will be rewarded if the bug is genuine). Thanks!            */
>
>  /************ see the book for explanations and caveats! *******************/
> -
> -/* the old C calling conventions are used here, for reasons of portability */
> +/************ in particular, you need two's complement arithmetic **********/
>
>  #define KK 100                     /* the long lag */
>  #define LL  37                     /* the short lag */
> @@ -568,10 +571,13 @@
>
>  /*long ran_x[KK]; */                   /* the generator state */
>
> -/* void ran_array(long aa[],int n) */
> +#ifdef __STDC__
> +void ran_array(long aa[],int n)
> +#else
>  void ran_array(aa,n)    /* put n new random numbers in aa */
>    long *aa;   /* destination */
>    int n;      /* array length (must be at least KK) */
> +#endif
>  {
>    register int i,j;
>    for (j=0;j<KK;j++) aa[j]=ran_x[j];
> @@ -580,57 +586,57 @@
>    for (;i<KK;i++,j++) ran_x[i]=mod_diff(aa[j-KK],ran_x[i-LL]);
>  }
>
> +/* the following routines are from exercise 3.6--15 */
> +/* after calling ran_start, get new randoms by, e.g., "x=ran_arr_next()" */
> +
> +#define QUALITY 1009 /* recommended quality level for high-res use */
> +long ran_arr_buf[QUALITY];
> +long ran_arr_sentinel=-1;
> +long *ran_arr_ptr=&ran_arr_sentinel; /* the next random number, or -1 */
> +
> +#define ran_arr_next() (*ran_arr_ptr>=0? *ran_arr_ptr++: ran_arr_cycle())
> +long ran_arr_cycle()
> +{
> +  ran_array(ran_arr_buf,QUALITY);
> +  ran_arr_buf[100]=-1;
> +  ran_arr_ptr=ran_arr_buf+1;
> +  return ran_arr_buf[0];
> +}
> +
>  #define TT  70   /* guaranteed separation between streams */
>  #define is_odd(x)  ((x)&1)          /* units bit of x */
> -#define evenize(x) ((x)&(MM-2))   /* make x even */
>
> -/* void ran_start(long seed) */
> +#ifdef __STDC__
> +void ran_start(long seed)
> +#else
>  void ran_start(seed)    /* do this before using ran_array */
>    long seed;            /* selector for different streams */
> +#endif
>  {
>    register int t,j;
>    long x[KK+KK-1];              /* the preparation buffer */
> -  register long ss=evenize(seed+2);
> +  register long ss=(seed+2)&(MM-2);
>    for (j=0;j<KK;j++) {
>      x[j]=ss;                      /* bootstrap the buffer */
>      ss<<=1; if (ss>=MM) ss-=MM-2; /* cyclic shift 29 bits */
>    }
> -  for (;j<KK+KK-1;j++) x[j]=0;
>    x[1]++;              /* make x[1] (and only x[1]) odd */
> -  ss=seed&(MM-1);
> -  t=TT-1; while (t) {
> -    for (j=KK-1;j>0;j--) x[j+j]=x[j];  /* "square" */
> -    for (j=KK+KK-2;j>KK-LL;j-=2) x[KK+KK-1-j]=evenize(x[j]);
> -    for (j=KK+KK-2;j>=KK;j--) if(is_odd(x[j])) {
> -      x[j-(KK-LL)]=mod_diff(x[j-(KK-LL)],x[j]);
> +  for (ss=seed&(MM-1),t=TT-1; t; ) {
> +    for (j=KK-1;j>0;j--) x[j+j]=x[j], x[j+j-1]=0; /* "square" */
> +    for (j=KK+KK-2;j>=KK;j--)
> +      x[j-(KK-LL)]=mod_diff(x[j-(KK-LL)],x[j]),
>        x[j-KK]=mod_diff(x[j-KK],x[j]);
> -    }
>      if (is_odd(ss)) {              /* "multiply by z" */
>        for (j=KK;j>0;j--)  x[j]=x[j-1];
>        x[0]=x[KK];            /* shift the buffer cyclically */
> -      if (is_odd(x[KK])) x[LL]=mod_diff(x[LL],x[KK]);
> +      x[LL]=mod_diff(x[LL],x[KK]);
>      }
>      if (ss) ss>>=1; else t--;
>    }
>    for (j=0;j<LL;j++) ran_x[j+KK-LL]=x[j];
>    for (;j<KK;j++) ran_x[j-LL]=x[j];
> -}
> -
> -/* the following routines are from exercise 3.6--15 */
> -/* after calling ran_start, get new randoms by, e.g., "x=ran_arr_next()" */
> -
> -#define QUALITY 1009 /* recommended quality level for high-res use */
> -long ran_arr_buf[QUALITY];
> -long ran_arr_sentinel=-1;
> -long *ran_arr_ptr=&ran_arr_sentinel; /* the next random number, or -1 */
> -
> -#define ran_arr_next() (*ran_arr_ptr>=0? *ran_arr_ptr++: ran_arr_cycle())
> -long ran_arr_cycle()
> -{
> -  ran_array(ran_arr_buf,QUALITY);
> -  ran_arr_buf[100]=-1;
> -  ran_arr_ptr=ran_arr_buf+1;
> -  return ran_arr_buf[0];
> +  for (j=0;j<10;j++) ran_array(x,KK+KK-1); /* warm things up */
> +  ran_arr_ptr=&ran_arr_sentinel;
>  }
>
>  /* ===================== end of Knuth's code ====================== */
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From schutz@wehi.edu.au  Sun Mar  3 13:54:40 2002
From: schutz@wehi.edu.au (Frederic Schutz)
Date: Mon, 04 Mar 2002 00:54:40 +1100
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
In-Reply-To: <Pine.GSO.4.44.0203030923530.27666-100000@auk.stats>
References: <200203030317.EAA20430@pubhealth.ku.dk> <Pine.GSO.4.44.0203030923530.27666-100000@auk.stats>
Message-ID: <6ka48u0s4ptvkltf5o0pst8gca1gh0p384@4ax.com>

>It's not that simple.  This is an new generator, incompatible with
>the old one.
>
>I will have to add this as a separate generator, since we really, really
>can't re-define random number generators and so make work unreproducible.

I thought about that, but I do not know the source code well enough to add
a new generator. I let you do it the way you want.

Frédéric
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Mar  3 14:10:37 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 3 Mar 2002 14:10:37 +0000 (GMT)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
In-Reply-To: <6ka48u0s4ptvkltf5o0pst8gca1gh0p384@4ax.com>
Message-ID: <Pine.GSO.4.31.0203031409430.15096-100000@toucan.stats>

On Mon, 4 Mar 2002, Frederic Schutz wrote:

> >It's not that simple.  This is an new generator, incompatible with
> >the old one.
> >
> >I will have to add this as a separate generator, since we really, really
> >can't re-define random number generators and so make work unreproducible.
>
> I thought about that, but I do not know the source code well enough to add
> a new generator. I let you do it the way you want.

BTW, R already scrambled the seeds and so did not suffer from the weakness
being addressed by the incompatible change.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From w.huber@dkfz.de  Sun Mar  3 18:04:39 2002
From: w.huber@dkfz.de (w.huber@dkfz.de)
Date: Sun, 3 Mar 2002 19:04:39 +0100 (MET)
Subject: [Rd] optim: gr called at different parameter values than previous fn call if hessian=T (PR#1354)
Message-ID: <200203031804.TAA21826@pubhealth.ku.dk>

Full_Name: Wolfgang Huber
Version: 1.4.0
OS: OSF1
Submission from: (NULL) (193.174.62.46)


The documentation to "optim" (packpage base) says "It is guaranteed that `gr' 
will be called immediately after a call to `fn' at the same parameter values."
I found this not to be true when I called 

   optim(fn=fn,gr=gr,method="L-BFGS-B",hessian=T,...)

When I changed this to hessian=F), every single call to gr was indeed preceded
by
a call to fn at the same parameter values. Apparently the final calculation of 
the hessian violates the above guarantee. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From martin.schlather@uni-bayreuth.de  Mon Mar  4 08:04:54 2002
From: martin.schlather@uni-bayreuth.de (martin.schlather@uni-bayreuth.de)
Date: Mon, 4 Mar 2002 09:04:54 +0100 (MET)
Subject: [Rd] bessel_i (PR#1356)
Message-ID: <200203040804.JAA23319@pubhealth.ku.dk>

Full_Name: Martin Schlather
Version: 1.4.1
OS: Linux, Suse 7.3
Submission from: (NULL) (132.180.7.27)


Hi,

The following simple C-program causes my computer to break down after 
some time when called by .C("test") 

#include <Rmath.h>
void test(){
  for(;;) bessel_i(1.0, 1.0, 1.0);
}

since memory allocated by bessel_i is not freed, in contrast to the standalone
version of Rmath.
(Actually, a self-written package calls bessel_i about 3,000,000 times, 
 causing the same effect.)

Cheers,
Martin


PS:
A very simple package that calls test() can be found at
    http://www.geo.uni-bayreuth.de/~martin/filetransfer/MEMORY_0.0.0.tar.gz



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hyu@stats.uwo.ca  Tue Mar  5 20:19:47 2002
From: hyu@stats.uwo.ca (hyu@stats.uwo.ca)
Date: Tue, 5 Mar 2002 21:19:47 +0100 (MET)
Subject: [Rd] Matrix identification bug (PR#1361)
Message-ID: <200203052019.VAA08035@pubhealth.ku.dk>

Full_Name: Hao Yu
Version: 1.4.1
OS: Windws and Linux
Submission from: (NULL) (129.100.45.161)


Hi,
   Recently we did some benchmarks regarding matrix inverse operation and found
some strange things. See the following results (the package Matrix is most
updated).

1. load the function Toeplitz and library(Matrix)
"Toeplitz"
function(x)
{
        matrix(x[1 + abs(outer(seq(along = x), seq(along = x), FUN = "-"))], 
                byrow = T, ncol = length(x))
}
2. On a PIII 1.125GHz (256kb cache)desktop PC with win2k, the results are
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 38.25  0.22 42.01    NA    NA
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 28.01  0.17 30.94    NA    NA

On a PIII-M 1.2GHz (512kb cache) laptop PC with winxp pro, the results are
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 33.94  0.25 34.01    NA    NA
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 9.40  0.13 9.54    NA    NA

On a PIII Xeon 1GHz (256kb cache) RedHat 7.2 Linux, the results are
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 53.79  0.48 00.01    NA    NA
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 30.29  0.21 30.59    NA    NA

This was the first time that windows R outperformed linux R even PIII Xeon 1GHz
is slightly faster than PIII 1.125GHz. Notice the abnormal result 9.4s from
PIII-M 1.2GHz (cannot be three times faster). After using native fortran lapack
(call to dpotrf and dpotri returns 9s for PIII Xeon), I realized that R may
treat the matrix as a general matrix rather than symmetric except the abnormal
case.  To confirm this, I modified the R_LapackPP.cc in Matrix package and it
turned out that
    is.MMatrix() failed to return true.
Hence 
        if (checkClass(classes, "Hermitian")) 
            return new LaSymmMatDouble(x);
is not executed in static LaMatDouble* asLaMatrix(SEXP x). Instead
    if (isMatrix(x)) {
            return new LaGenMatDouble(x);  
        }
is used. 
After replaced
    return new LaGenMatDouble(x);   
with 
    return new LaSymmMatDouble(x);

the result was (PIII Xeon 1GHz RedHat 7.2 Linux))
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 9.76 0.22 9.97 0.00 0.00

Clearly there are some bugs in solve() and solve.Matrix(). Notice that all have
> is.Hermitian(Toeplitz(.5^seq(0,999)))
[1] TRUE


Thanks 
Hao Yu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  5 21:32:36 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 5 Mar 2002 22:32:36 +0100 (MET)
Subject: [Rd] Matrix identification bug (PR#1361)
Message-ID: <200203052132.WAA08217@pubhealth.ku.dk>

On Tue, 5 Mar 2002 hyu@stats.uwo.ca wrote:

> Full_Name: Hao Yu
> Version: 1.4.1
> OS: Windws and Linux
> Submission from: (NULL) (129.100.45.161)

[...]

> the result was (PIII Xeon 1GHz RedHat 7.2 Linux))
> > system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
> [1] 9.76 0.22 9.97 0.00 0.00
>
> Clearly there are some bugs in solve() and solve.Matrix(). Notice that all have

Nothing in this report suggests a bug in solve().  Can you please provide
some evidence for your claim (which is not `clear' to me), and

> solve
function (a, b, ...)
UseMethod("solve")

seems hard to get wrong!  (It matters: solve is part of R: solve.Matrix is
a contributed addon.)

Incidentally, these sort of timings are crucially dependent on the BLAS
library used, and in my experience that is a far larger factor that the OS
used.  However, that was not part of the report ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Thu Mar  7 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Mar 2002 07:15:03 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200203070615.g276F3517360@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1244 *
Subject: possible bug in det using method="qr"
From: armin@approximity.com
Date: Sat, 5 Jan 2002 01:48:13 +0100 (MET)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1257 *
Subject: documentation of `las' on `par' help page
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Fri, 11 Jan 2002 12:30:20 +0100
* PR# 1323 *
Subject: bug in options() - help page
From: Ole Christensen <o.christensen@lancaster.ac.uk>
Date: Sat, 23 Feb 2002 16:56:56 +0000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1248 *
Subject: piechart default colour
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Jan 2002 18:54:02 +0100
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1267 *
Subject: hashing NaN
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Wed, 16 Jan 2002 16:29:35 -0800 (PST)
--Patch put in R-devel for further testing.
* PR# 1301 *
Subject: incorrect handling of arrays of list elements
From: =?iso-8859-1?Q?Jens=20Oehlschl=E4gel?= <joehl@web.de>
Date: Thu, 7 Feb 2002 13:43:19 +0100

Directory:  Macintosh

* PR# 1318 *
Subject: Multiple macintosh() graphics devices
From: d.orme@ic.ac.uk
Date: Wed, 20 Feb 2002 16:41:27 +0100 (MET)
* PR# 1338 *
Subject: Setting working directory
From: jmf@atmiserv.com
Date: Fri, 1 Mar 2002 16:19:56 +0100 (MET)

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1321 *
Subject: Gnome causes different behaviour of some R functions 
From: alobo@ija.csic.es
Date: Fri, 22 Feb 2002 14:41:17 +0100 (MET)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1283 *
Subject: max/min of NULL gives MININT/MAXINT instead of -INF/+INF
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 14:36:52 -0500
--this was on purpose (type preserving); R 1.4.1 at least documents this
--We currently plan to return -/+ Inf from 1.5.0 on		-- MMä
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
* PR# 1312 *
Subject: latitude <-> longitude in quake.tab
From: ckhung@cyut.edu.tw
Date: Sat, 16 Feb 2002 01:35:20 +0100 (MET)
* PR# 1330 *
Subject:  itemize/item crashes R CMD check 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Tue, 26 Feb 2002 15:13:04 -0500
* PR# 1331 *
Subject: Bug in glm.fit?
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Wed, 27 Feb 2002 16:15:24 +0800 (WST)
* PR# 1333 *
Subject: Failed file("foo", "r") keeps file open?
From: hb@maths.lth.se
Date: Thu, 28 Feb 2002 17:20:02 +0100 (MET)
* PR# 1356 *
Subject: bessel_i
From: martin.schlather@uni-bayreuth.de
Date: Mon, 4 Mar 2002 09:04:50 +0100 (MET)
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  7 13:18:06 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2002 14:18:06 +0100
Subject: [Rd] R 1.5.0 scheduled for April 29th, feature freeze April 8
Message-ID: <x28z94zfch.fsf@blueberry.kubism.ku.dk>


The core team has decided to release R 1.5.0 on April 29th. Somewhat
earlier than maybe expected, but we realized that we needed a
phase-shift away from our usual cycle with main releases in June and
December since it was placing feature freezes just when several
members were in a creative phase due to end of teaching.

The roadmap is as follows

April 8 feature freeze on r-base
April 15 code freeze on r-base, feature freeze on recommended packages
April 22 code freeze on recommended packages, final round of platform testing

("code freeze" in the sense that only clear and critical bugs will get
fixed)

If you maintain R packages (on CRAN or otherwise), it would be a good
idea to track the development version (via rsync or the daily
snapshots) and see if anything needs changing. No changes affecting
packages are expected after April 15.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar  8 21:02:17 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Fri, 8 Mar 2002 22:02:17 +0100 (MET)
Subject: [Rd] 1st January isn't (PR#1370)
Message-ID: <200203082102.WAA01438@pubhealth.ku.dk>


In today's pre1.5.0

> ISOdate(2002,1,1)
[1] "2002-03-01 04:00:00 PST"

> ISOdate(2002,1,1)==ISOdate(2002,3,1)
[1] TRUE

It doesn't seem to happen for days other than 1/1

	-thomas

> version
         _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status   Under development (unstable)
major    1
minor    5.0
year     2002
month    03
day      08
language R



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a215020@onyx.fmr.com  Fri Mar  8 21:36:49 2002
From: a215020@onyx.fmr.com (a215020@onyx.fmr.com)
Date: Fri, 8 Mar 2002 22:36:49 +0100 (MET)
Subject: [Rd] Sys.putenv environment variables disappear (PR#1371)
Message-ID: <200203082136.WAA01499@pubhealth.ku.dk>

Environment variables set with Sys.putenv() disappear (i.e. become "")
after a while, especially after heavy-duty I/O.  Example:

  R> x <- matrix(1., 3000, 3000)
  R> save(x, file="myx.RData")
  R> Sys.putenv(HOME="/tmp")
  R> while (Sys.getenv("HOME") != "") {cat("ok\n"); load("myx.RData")}

The loop prints "ok" twice, then exits because HOME has been destroyed.

I'm running R-1.4.1 (I also saw this in earlier versions), under
Solaris 2.6.  Dave Kane reported this problem to R-help on 6/4/01, and
I reported it on 11/30/01, but nobody else has confirmed (or denied)
seeing it (except Kjetil Halvorsen did not see it on Windows).

FYI, my include/config.h file has "#define HAVE_PUTENV 1".  Here's the
usual version info.
Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar  8 21:47:51 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 8 Mar 2002 13:47:51 -0800 (PST)
Subject: [Rd] Sys.putenv environment variables disappear (PR#1371)
In-Reply-To: <200203082136.WAA01499@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203081344100.69958-100000@homer34.u.washington.edu>

On Fri, 8 Mar 2002 a215020@onyx.fmr.com wrote:

> Environment variables set with Sys.putenv() disappear (i.e. become "")
> after a while, especially after heavy-duty I/O.  Example:
>
>   R> x <- matrix(1., 3000, 3000)
>   R> save(x, file="myx.RData")
>   R> Sys.putenv(HOME="/tmp")
>   R> while (Sys.getenv("HOME") != "") {cat("ok\n"); load("myx.RData")}
>
> The loop prints "ok" twice, then exits because HOME has been destroyed.
>
> I'm running R-1.4.1 (I also saw this in earlier versions), under
> Solaris 2.6.  Dave Kane reported this problem to R-help on 6/4/01, and
> I reported it on 11/30/01, but nobody else has confirmed (or denied)
> seeing it (except Kjetil Halvorsen did not see it on Windows).
>

It's happening on Linux with the current source tree.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Fri Mar  8 21:54:10 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Fri, 8 Mar 2002 16:54:10 -0500
Subject: [Rd] Sys.putenv environment variables disappear (PR#1371)
In-Reply-To: <200203082136.WAA01499@pubhealth.ku.dk>; from a215020@onyx.fmr.com on Fri, Mar 08, 2002 at 10:36:49PM +0100
References: <200203082136.WAA01499@pubhealth.ku.dk>
Message-ID: <20020308165410.X11590@jimmy.harvard.edu>

On Fri, Mar 08, 2002 at 10:36:49PM +0100, a215020@onyx.fmr.com wrote:
> Environment variables set with Sys.putenv() disappear (i.e. become "")
> after a while, especially after heavy-duty I/O.  Example:
> 
>   R> x <- matrix(1., 3000, 3000)
>   R> save(x, file="myx.RData")
>   R> Sys.putenv(HOME="/tmp")
>   R> while (Sys.getenv("HOME") != "") {cat("ok\n"); load("myx.RData")}
> 

  We use 
   for (i = 0; i < n; i++) {
        LOGICAL(ans)[i] = putenv(CHAR(STRING_ELT(vars, i))) == 0;
    }
 and the man page for RedHat says:
         int putenv(const char *string);

DESCRIPTION
       The  putenv()  function adds or changes the value of envi-
       ronment variables.  The argument string  is  of  the  form
       name=value.   If  name does not already exist in the envi-
       ronment, then string is added to the environment.  If name
       does  exist,  then the value of name in the environment is
       changed to value.  The string pointed to by string becomes
       part  of  the  environment, so altering the string changes
       the environment.

  So, after we UNPROTECT this is bad. Seems like we need to 
  do something different.


> The loop prints "ok" twice, then exits because HOME has been destroyed.
> 
> I'm running R-1.4.1 (I also saw this in earlier versions), under
> Solaris 2.6.  Dave Kane reported this problem to R-help on 6/4/01, and
> I reported it on 11/30/01, but nobody else has confirmed (or denied)
> seeing it (except Kjetil Halvorsen did not see it on Windows).
> 
> FYI, my include/config.h file has "#define HAVE_PUTENV 1".  Here's the
> usual version info.
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 4.1
>  year = 2002
>  month = 01
>  day = 30
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base
> 
>                               -- David Brahm (brahm@alum.mit.edu)
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar  9 02:22:14 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Mar 2002 03:22:14 +0100
Subject: [Rd] 1st January isn't (PR#1370)
In-Reply-To: <200203082102.WAA01438@pubhealth.ku.dk>
References: <200203082102.WAA01438@pubhealth.ku.dk>
Message-ID: <x23czatr8p.fsf@blueberry.kubism.ku.dk>

tlumley@u.washington.edu writes:

> In today's pre1.5.0
> 
> > ISOdate(2002,1,1)
> [1] "2002-03-01 04:00:00 PST"
> 
> > ISOdate(2002,1,1)==ISOdate(2002,3,1)
> [1] TRUE
> 
> It doesn't seem to happen for days other than 1/1
> 
> 	-thomas

Confirmed. I don't see how it could have happened from anything
other than this change

diff -u -r1.16 -r1.17
--- src/main/datetime.c 31 Oct 2001 13:35:39 -0000      1.16
+++ src/main/datetime.c 6 Mar 2002 11:27:37 -0000       1.17
@@ -674,6 +674,10 @@
            !strptime(CHAR(STRING_ELT(x, i%n)),
                      CHAR(STRING_ELT(sformat, i%m)), &tm);
        if(!invalid) {
+           /* Solaris sets missing fields to 0: but that's a valid year */
+           if(tm.tm_mday == 0) tm.tm_mday = NA_INTEGER;
+           if(tm.tm_yday == 0) tm.tm_yday = NA_INTEGER;
+           if(tm.tm_mon == 0) tm.tm_mon = NA_INTEGER;
            if(tm.tm_mon == NA_INTEGER || tm.tm_mday == NA_INTEGER
               || tm.tm_year == NA_INTEGER)
                glibc_fix(&tm, &invalid);

I don't see how that could cause it either, though....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar  9 07:32:55 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 9 Mar 2002 07:32:55 +0000 (GMT)
Subject: [Rd] Sys.putenv environment variables disappear (PR#1371)
In-Reply-To: <20020308165410.X11590@jimmy.harvard.edu>
Message-ID: <Pine.GSO.4.44.0203090726550.3971-100000@auk.stats>

On Fri, 8 Mar 2002, Robert Gentleman wrote:

> On Fri, Mar 08, 2002 at 10:36:49PM +0100, a215020@onyx.fmr.com wrote:
> > Environment variables set with Sys.putenv() disappear (i.e. become "")
> > after a while, especially after heavy-duty I/O.  Example:
> >
> >   R> x <- matrix(1., 3000, 3000)
> >   R> save(x, file="myx.RData")
> >   R> Sys.putenv(HOME="/tmp")
> >   R> while (Sys.getenv("HOME") != "") {cat("ok\n"); load("myx.RData")}
> >
>
>   We use
>    for (i = 0; i < n; i++) {
>         LOGICAL(ans)[i] = putenv(CHAR(STRING_ELT(vars, i))) == 0;
>     }
>  and the man page for RedHat says:
>          int putenv(const char *string);
>
> DESCRIPTION
>        The  putenv()  function adds or changes the value of envi-
>        ronment variables.  The argument string  is  of  the  form
>        name=value.   If  name does not already exist in the envi-
>        ronment, then string is added to the environment.  If name
>        does  exist,  then the value of name in the environment is
>        changed to value.  The string pointed to by string becomes
>        part  of  the  environment, so altering the string changes
>        the environment.
>
>   So, after we UNPROTECT this is bad. Seems like we need to
>   do something different.

And what is needed is in the function Putenv in the same file, since
environment variables read from startup files are working correctly.

I've copied the code across (actually from the Windows version).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar  9 08:43:24 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 9 Mar 2002 08:43:24 +0000 (GMT)
Subject: [Rd] 1st January isn't (PR#1370)
In-Reply-To: <x23czatr8p.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.44.0203090840590.13515-100000@auk.stats>

On 9 Mar 2002, Peter Dalgaard BSA wrote:

> tlumley@u.washington.edu writes:
>
> > In today's pre1.5.0
> >
> > > ISOdate(2002,1,1)
> > [1] "2002-03-01 04:00:00 PST"
> >
> > > ISOdate(2002,1,1)==ISOdate(2002,3,1)
> > [1] TRUE
> >
> > It doesn't seem to happen for days other than 1/1
> >
> > 	-thomas
>
> Confirmed. I don't see how it could have happened from anything
> other than this change
>
> diff -u -r1.16 -r1.17
> --- src/main/datetime.c 31 Oct 2001 13:35:39 -0000      1.16
> +++ src/main/datetime.c 6 Mar 2002 11:27:37 -0000       1.17
> @@ -674,6 +674,10 @@
>             !strptime(CHAR(STRING_ELT(x, i%n)),
>                       CHAR(STRING_ELT(sformat, i%m)), &tm);
>         if(!invalid) {
> +           /* Solaris sets missing fields to 0: but that's a valid year */
> +           if(tm.tm_mday == 0) tm.tm_mday = NA_INTEGER;
> +           if(tm.tm_yday == 0) tm.tm_yday = NA_INTEGER;
> +           if(tm.tm_mon == 0) tm.tm_mon = NA_INTEGER;
>             if(tm.tm_mon == NA_INTEGER || tm.tm_mday == NA_INTEGER
>                || tm.tm_year == NA_INTEGER)
>                 glibc_fix(&tm, &invalid);
>
> I don't see how that could cause it either, though....

It can.  Unfortunately the Solaris man page is incorrect.  mon runs from 0
to 11, hence the fix is incorrect.

Fixed again.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Mar  9 18:08:20 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 9 Mar 2002 10:08:20 -0800
Subject: [Rd] L
Message-ID: <A36ED260-3388-11D6-9E97-000393860F3C@stat.ucla.edu>

As I mentioned earlier, it makes sense to maintain the Darwin/X11
version of R through fink (fink.sourceforge.net is a package management
system). Jeff Whitaker (jsw@cdc.noaa.gov), the fink maintainer of R
will install and maintain four versions of R,

-- r-base
-- r-base-atlas
-- r-base-gnome
-- r-base-gnome-atlas

as well as r-recommended. fink will handle all dependencies elegantly,
so people will have no problems any more with missing dynamic
libraries and so on.

Jeff has recently ported rpy to fink as well, and I will try to find some
resources to set up fink patch and info files for other R packages,
either the ones on CRAN or the ones to be found elsewhere. This
will hopefully make it easy to solve various installation and dependency
problems in a reasonable way (remember that fink has mysql, postgres,
netpbm, python, hdf5, expat, tcl/tk and so on).
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Mar 11 10:07:53 2002
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 11 Mar 2002 11:07:53 +0100 (CET)
Subject: [Rd] GNOME locale bug (PR#1321)
In-Reply-To: <200202221341.OAA04115@pubhealth.ku.dk>
Message-ID: <XFMail.20020311110753.plummer@iarc.fr>

Fixed in R-devel (R 1.5.0)

Martyn

PS. Original title was
[Rd] Gnome causes different behaviour of some R functions (PR#1321)
But my mailer snips off the bug number when I reply.

On 22-Feb-2002 alobo@ija.csic.es wrote:
> Full_Name: Agustin Lobo
> Version: 1.4.0
> OS: linux (suse 7.3)
> Submission from: (NULL) (193.144.102.102)
> 
> 
>  Saving lda.default as text files from within gui="none" and from within
>  gui="gnome" 
>  and comparing afterwards with diff, I get:
>  
>  alobo@humboldt:> diff lda.default.gnome.txt lda.default.nognome.txt
>  1c1
>  < function (x, grouping, prior = proportions, tol = 1, method =
>  c("moment",
>  ---
>> function (x, grouping, prior = proportions, tol = 1e-04, method =
>  c("moment",
>  61c61
>  <             if (all(abs(w - w0) < 0,01))
>  ---
>>             if (all(abs(w - w0) < 0.01))
>  109c109
>  <         dist <- 0 * dist - matrix(log(prior), n, ng, byrow = TRUE)
>  ---
>>         dist <- 0.5 * dist - matrix(log(prior), n, ng, byrow = TRUE)
> 
> 
> While lda.default works fine within R --gui="none", it produces the following
> error
> from within R --gui="gnome" for the same data:
> 
>> a
> <-lda.default(x=mod23puriflda[,2:5],grouping=mod23puriflda[,6],CV=F,method="mo
> ment")
> Error in lda.default(x = mod23puriflda[, 2:5], grouping = mod23puriflda[,
>: 
>         length of dimnames[2] not equal to array extent
> In addition: Warning message: 
> variables are collinear in: lda.default(x = mod23puriflda[, 2:5], grouping
> = mod23puriflda[, 
> 
> This problem is not particular to lda.default. The following code, which
> works
> fine from within R --gui="none", fails from within within R --gui="gnome":
> 
>> x1<-rnorm(20)
>> x2<-rnorm(20)
>> boxplot(list(x1=x1,x2=x2))
> Error in if (any(out[nna])) stats[c(1, 5)] <- range(x[!out], na.rm = TRUE) : 
>       missing value where logical needed
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Mar 12 14:36:49 2002
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Tue, 12 Mar 2002 15:36:49 +0100 (MET)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
Message-ID: <200203121436.PAA18972@pubhealth.ku.dk>

rbinom (in R-1.4.1) silently rounds its "size" argument. 
  The C code contains 

    n = floor(nin + 0.5); 

  I would argue that this should this either be documented or changed (to 
return NA). (The behavior is inconsistent with dbinom). 

  I sent this in to the devel list a couple of weeks ago to
provoke discussion; no disagreement (or agreement) so I'm
submitting it as a bug.

  Ben Bolker

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Mar 12 15:00:28 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Tue, 12 Mar 2002 10:00:28 -0500 (EST)
Subject: [Rd] using R API in dynamically loaded code?
Message-ID: <Pine.LNX.4.30.0203120947030.3612-100000@bolker.zoo.ufl.edu>


  I'm probably missing something very basic here, but:

  I've written some C code that I load into R dynamically.  In the course
of this C code, I generate some multinomial random deviates.  I initially
used the publically available "randlib"  library, which also implements
its own random number generator and binomial deviates (which are used to
generate the multinomial deviates).  For parsimony and for licensing
reasons (the randlib licensing is not entirely clear, but there's some
wording about ACM algorithms that contradict GPL), I thought I should pull
out just the multinomial generator from randlib and use it along with
rbinom calls from the R API.  Following the R-exts document, I included
<R.h> in my code, used GetRNGstate/PutRNGstate to initialize the random
number generator, and called rbinom from within my code.
  When using "R CMD check" to build the library and test it, the dynamic
library (turtle.so) fails to load, complaining that rbinom is an
unresolved symbol.  If I force now=FALSE in the dyn.lib call (which seemed
like it *might* solve the problem), I get a "relocation error" when trying
to load the library instead.
  How do I indicate that these symbols within the library refer to
functions that should be called from R?  Am I simply on the wrong track?

  I can provide a stripped-down example if that will clarify things.

  thanks,
    Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rmh@surfer.sbm.temple.edu  Wed Mar 13 07:45:49 2002
From: rmh@surfer.sbm.temple.edu (rmh@surfer.sbm.temple.edu)
Date: Wed, 13 Mar 2002 08:45:49 +0100 (MET)
Subject: [Rd] several bugs (PR#918) lists and matrices
Message-ID: <200203130745.IAA22120@pubhealth.ku.dk>

### I got bit again by the same bugs I wrote about a year ago.
### The bugs are related to matrices and arrays of lists.

### 1. There is a clear inconsistency in how R handles two
### functionally equivalent statements.
### array() is able to take a list and create a matrix.
### matrix() is unable to create that matrix.


> vector("list", 2)
[[1]]
NULL

[[2]]
NULL

> array(vector("list", 2), dim=c(2,1))
     [,1]  
[1,] "NULL"
[2,] "NULL"
> tmpa <- array(vector("list", 2), dim=c(2,1))
> class(tmpa)
NULL
> is.array(tmpa)
[1] TRUE
> is.matrix(tmpa)
[1] TRUE
> tmpm <- matrix(vector("list", 2), nrow=2)
Error in matrix(vector("list", 2), nrow = 2) : 
	Unimplemented feature in copyVector
> 




### 2. Here the matrix single-[ subscript is doing the wrong thing,
### without giving a warning.

> tmp <- array(vector("list", 2), 1:2)
> tmp
     [,1]   [,2]  
[1,] "NULL" "NULL"
> tmp[1]
[[1]]
NULL

> tmp[[1]]
NULL
> tmp[1,1]
[[1]]
NULL

> tmp[[1,1]]
NULL
> list("abc")
[[1]]
[1] "abc"

> tmp[1] <- list("abc")  ## assignment
> tmp[1]
[[1]]
[1] "abc"

> tmp[[1]]
[1] "abc"
> tmp[1,1]     ## incorrect retrieval
[[1]]
NULL

> tmp[[1,1]]
[1] "abc"

> tmp[1,2] <- list("def")  ## refuse to do similar assignment
Error: incompatible types in subset assignment
> 



### 3. subsetting a vector of lists doesn't behave the way I anticipate.
### It looks like NULL is not handled consistently inside a vector.
### Sometimes it can be an element, sometimes not.

> tmpv <- vector("list", 2)
> tmpv
[[1]]
NULL

[[2]]
NULL

> tmpv[1] <- "abcd"  ## I assigned to the first element.
> tmpv               ## Both elements are still here.
[[1]]
[1] "abcd"

[[2]]
NULL

> tmpv[1] <- NULL    ## I assigned to the first element.
> tmpv               ## The second element is gone.
[[1]]
NULL

> 



### This time the issue came up in an attempt to make abind work with R.
### abind() is a generalization of rbind and cbind to arrays.
### Tony Plate and I posted it to StatLib in 1996
### (http://lib.stat.cmu.edu/S/abind).

### I would like you to consider adding abind to R.
### The posted abind doesn't work in R, for the reasons above and due to
### a difference in behavior of match.call between S -Plusand R that I am
### reporting in a separate bug report.
### There are two revised files, currently available at
### http://surfer.sbm.temple.edu/~rmh/abind.r
### http://surfer.sbm.temple.edu/~rmh/abind.test.in.r
### The documentation in statlib applies to these files.
### I will update the statlib version after I understand why R differs.

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R              
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 13 07:56:22 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 13 Mar 2002 08:56:22 +0100 (MET)
Subject: [Rd] several bugs (PR#918) lists and matrices
Message-ID: <200203130756.IAA22216@pubhealth.ku.dk>

Points 1 and 2 are already fixed in R-devel, as I did indicate on R-help,
yesterday.

Point 3 is in the FAQ, no less:

   * In R, if `x' is a list, then `x[i] <- NULL' and `x[[i]] <- NULL'
     remove the specified elements from `x'.  The first of these is
     incompatible with S, where it is a no-op.  (Note that you can set
     elements to `NULL' using `x[i] <- list(NULL)'.)

Please don't mix up unrelated reports: point 3 has nothing to do with
matrix lists.


On Wed, 13 Mar 2002 rmh@surfer.sbm.temple.edu wrote:

> ### I got bit again by the same bugs I wrote about a year ago.
> ### The bugs are related to matrices and arrays of lists.
>
> ### 1. There is a clear inconsistency in how R handles two
> ### functionally equivalent statements.
> ### array() is able to take a list and create a matrix.
> ### matrix() is unable to create that matrix.
>
>
> > vector("list", 2)
> [[1]]
> NULL
>
> [[2]]
> NULL
>
> > array(vector("list", 2), dim=c(2,1))
>      [,1]
> [1,] "NULL"
> [2,] "NULL"
> > tmpa <- array(vector("list", 2), dim=c(2,1))
> > class(tmpa)
> NULL
> > is.array(tmpa)
> [1] TRUE
> > is.matrix(tmpa)
> [1] TRUE
> > tmpm <- matrix(vector("list", 2), nrow=2)
> Error in matrix(vector("list", 2), nrow = 2) :
> 	Unimplemented feature in copyVector
> >
>
>
>
>
> ### 2. Here the matrix single-[ subscript is doing the wrong thing,
> ### without giving a warning.
>
> > tmp <- array(vector("list", 2), 1:2)
> > tmp
>      [,1]   [,2]
> [1,] "NULL" "NULL"
> > tmp[1]
> [[1]]
> NULL
>
> > tmp[[1]]
> NULL
> > tmp[1,1]
> [[1]]
> NULL
>
> > tmp[[1,1]]
> NULL
> > list("abc")
> [[1]]
> [1] "abc"
>
> > tmp[1] <- list("abc")  ## assignment
> > tmp[1]
> [[1]]
> [1] "abc"
>
> > tmp[[1]]
> [1] "abc"
> > tmp[1,1]     ## incorrect retrieval
> [[1]]
> NULL
>
> > tmp[[1,1]]
> [1] "abc"
>
> > tmp[1,2] <- list("def")  ## refuse to do similar assignment
> Error: incompatible types in subset assignment
> >
>
>
>
> ### 3. subsetting a vector of lists doesn't behave the way I anticipate.
> ### It looks like NULL is not handled consistently inside a vector.
> ### Sometimes it can be an element, sometimes not.
>
> > tmpv <- vector("list", 2)
> > tmpv
> [[1]]
> NULL
>
> [[2]]
> NULL
>
> > tmpv[1] <- "abcd"  ## I assigned to the first element.
> > tmpv               ## Both elements are still here.
> [[1]]
> [1] "abcd"
>
> [[2]]
> NULL
>
> > tmpv[1] <- NULL    ## I assigned to the first element.
> > tmpv               ## The second element is gone.
> [[1]]
> NULL
>
> >
>
>
>
> ### This time the issue came up in an attempt to make abind work with R.
> ### abind() is a generalization of rbind and cbind to arrays.
> ### Tony Plate and I posted it to StatLib in 1996
> ### (http://lib.stat.cmu.edu/S/abind).
>
> ### I would like you to consider adding abind to R.
> ### The posted abind doesn't work in R, for the reasons above and due to
> ### a difference in behavior of match.call between S -Plusand R that I am
> ### reporting in a separate bug report.
> ### There are two revised files, currently available at
> ### http://surfer.sbm.temple.edu/~rmh/abind.r
> ### http://surfer.sbm.temple.edu/~rmh/abind.test.in.r
> ### The documentation in statlib applies to these files.
> ### I will update the statlib version after I understand why R differs.
>
> > version
>          _
> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    4.1
> year     2002
> month    01
> day      30
> language R
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 13 10:05:14 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 13 Mar 2002 11:05:14 +0100 (MET)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
Message-ID: <200203131005.LAA23904@pubhealth.ku.dk>

Fixed for 1.5.0.  Note that pbinom and qbinom did it too.

On Tue, 12 Mar 2002 bolker@zoo.ufl.edu wrote:

> rbinom (in R-1.4.1) silently rounds its "size" argument.
>   The C code contains
>
>     n = floor(nin + 0.5);
>
>   I would argue that this should this either be documented or changed (to
> return NA). (The behavior is inconsistent with dbinom).
>
>   I sent this in to the devel list a couple of weeks ago to
> provoke discussion; no disagreement (or agreement) so I'm
> submitting it as a bug.
>
>   Ben Bolker
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status =
>  major = 1
>  minor = 4.1
>  year = 2002
>  month = 01
>  day = 30
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Mar 13 17:04:29 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 13 Mar 2002 09:04:29 -0800 (PST)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
In-Reply-To: <200203131005.LAA23904@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203130901320.83416-100000@homer34.u.washington.edu>

On Wed, 13 Mar 2002 ripley@stats.ox.ac.uk wrote:

> Fixed for 1.5.0.  Note that pbinom and qbinom did it too.
>

But isn't it right for pbinom and qbinom to do it?  P(X<=4.5) is a
perfectly reasonable quantity and is equal to P(X<=4) if X is binomial and
(with rounding the other way) the same for quantile functions.

dbinom, OTOH, is a density wrt counting measure and is not defined for
non-integers (though one could make a case for zero).

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From matthew_wiener@merck.com  Wed Mar 13 17:05:42 2002
From: matthew_wiener@merck.com (matthew_wiener@merck.com)
Date: Wed, 13 Mar 2002 18:05:42 +0100 (MET)
Subject: [Rd] rpart error with 0-frequency factor levels (with partial fix) (PR#1378)
Message-ID: <200203131705.SAA28926@pubhealth.ku.dk>

(I'm sending to r-bugs because rpart is one of the recommended packages and
is always installed.  I'm also sending it directly to Dr. Ripley, as the
maintainer.)

rpart working as a classifier does not work (produces no splits) when the
class indicator has no instances of one of the factor levels, as long as the
factor level is not the final level. I have at least a partial fix, which I
describe after the example.  I don't think the fix is ideal.  I also don't
know whether some of the other rpart methods might have a similar problem.

This may be an atypical situation, but I have come across this when using
rpart on a subset of a data frame that happens not to have any instances of
one level of a factor.

I've gotten identical results with R-1.4.1 on NT 4.0 and Mac OS X (Darwin
version, running as an inferior process under emacs).  System info for both
machines is below.

----------------------------------------------------------------------------
----------------------------------------------------------------------------
-

Here's an example.

The following is run immediately following startup in a completely empty
directory (no .RData, no .Rhistory).

> t1 <- data.frame(V1 = sample(c("A", "B"), 100, replace = T), V2 =
runif(100), V3 = runif(100))
> 
> levels(t1$V1)
[1] "A" "B"
> 
> t2 <- t1
> t2$V1 <- factor(t2$V1, levels = c("A", "B", "C"))
> t3 <- t2
> t3$V1[t3$V1 == "B"] <- "C"
> 
> table(t2$V1)

 A  B  C 
51 49  0 
> table(t3$V1)

 A  B  C 
51  0 49 
> 
> library(rpart)
> t1.rpart <- rpart(V1 ~ V2 + V3, data = t1, method = "class")
> t2.rpart <- rpart(V1 ~ V2 + V3, data = t2, method = "class")
> t3.rpart <- rpart(V1 ~ V2 + V3, data = t3, method = "class")
> 
> print(t1.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 100 49 A (0.5100000 0.4900000)  
   2) V3< 0.319873 33 13 A (0.6060606 0.3939394)  
     4) V3>=0.0740043 26  8 A (0.6923077 0.3076923) *
     5) V3< 0.0740043 7  2 B (0.2857143 0.7142857) *
   3) V3>=0.319873 67 31 B (0.4626866 0.5373134)  
     6) V2>=0.2482707 54 26 A (0.5185185 0.4814815)  
      12) V3< 0.7424548 31 13 A (0.5806452 0.4193548)  
        24) V3>=0.3740281 23  8 A (0.6521739 0.3478261) *
        25) V3< 0.3740281 8  3 B (0.3750000 0.6250000) *
      13) V3>=0.7424548 23 10 B (0.4347826 0.5652174)  
        26) V3>=0.9291285 8  3 A (0.6250000 0.3750000) *
        27) V3< 0.9291285 15  5 B (0.3333333 0.6666667) *
     7) V2< 0.2482707 13  3 B (0.2307692 0.7692308) *
> 
> print(t2.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 100 49 A (0.5100000 0.4900000)  
   2) V3< 0.319873 33 13 A (0.6060606 0.3939394)  
     4) V3>=0.0740043 26  8 A (0.6923077 0.3076923) *
     5) V3< 0.0740043 7  2 B (0.2857143 0.7142857) *
   3) V3>=0.319873 67 31 B (0.4626866 0.5373134)  
     6) V2>=0.2482707 54 26 A (0.5185185 0.4814815)  
      12) V3< 0.7424548 31 13 A (0.5806452 0.4193548)  
        24) V3>=0.3740281 23  8 A (0.6521739 0.3478261) *
        25) V3< 0.3740281 8  3 B (0.3750000 0.6250000) *
      13) V3>=0.7424548 23 10 B (0.4347826 0.5652174)  
        26) V3>=0.9291285 8  3 A (0.6250000 0.3750000) *
        27) V3< 0.9291285 15  5 B (0.3333333 0.6666667) *
     7) V2< 0.2482707 13  3 B (0.2307692 0.7692308) *
> 
> print(t3.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

1) root 100 NaN A (NaN NaN NaN) *
> 
> 

If I recode the factor back down to 2 levels it works again:

> t4 <- t3
> t4$V1 <- factor(t4$V1, levels = c("A", "C"))
> table(t4$V1)

 A  C 
51 49 
> 
> t4.rpart <- rpart(V1 ~ V2 + V3, data = t4, method = "class")
> print(t4.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 100 49 A (0.5100000 0.4900000)  
   2) V3< 0.319873 33 13 A (0.6060606 0.3939394)  
     4) V3>=0.0740043 26  8 A (0.6923077 0.3076923) *
     5) V3< 0.0740043 7  2 C (0.2857143 0.7142857) *
   3) V3>=0.319873 67 31 C (0.4626866 0.5373134)  
     6) V2>=0.2482707 54 26 A (0.5185185 0.4814815)  
      12) V3< 0.7424548 31 13 A (0.5806452 0.4193548)  
        24) V3>=0.3740281 23  8 A (0.6521739 0.3478261) *
        25) V3< 0.3740281 8  3 C (0.3750000 0.6250000) *
      13) V3>=0.7424548 23 10 C (0.4347826 0.5652174)  
        26) V3>=0.9291285 8  3 A (0.6250000 0.3750000) *
        27) V3< 0.9291285 15  5 C (0.3333333 0.6666667) *
     7) V2< 0.2482707 13  3 C (0.2307692 0.7692308) *

And, just to make sure I get the same result if it's the first factor level
missing (so it's not just a property of the middle level missing):

> t5 <- t3
> t5$V1[t5$V1 == "A"] <- "B"
> table(t5$V1)

 A  B  C 
 0 51 49 
> 
> 
> t5.rpart <- rpart(V1 ~ V2 + V3, data = t5, method = "class")
> 
> print(t5.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

1) root 100 NaN A (NaN NaN NaN) *
> 
----------------------------------------------------------------------------
-----------------------------------
I tried to trace the problem, and took a look at the beginning of
rpart.class:

"rpart.class" <-
  function (y, offset, parms, wt) 
{
  if (!is.null(offset)) 
    stop("No offset allowed in classification models")
  fy <- as.factor(y)
  y <- as.integer(fy)
  numclass <- max(y[!is.na(y)])
...
}
I thought the problem might have to do with the fact that numclass would
register 3 for my examples t3 and t5, but 2 for my examples t2 and t4.  So I
tried substituting 

numclass <- length(unique(y[!is.na(y)])) 

to get the number of factors present rather than the largest integer code
used, but that didn't help.

Then I tried running nnet using this data, and it worked fine on all the
examples, with a warning about an empty level.  So I lifted some code from
nnet to make the beginning of rpart.class look like this:


"rpart.class" <-
  function (y, offset, parms, wt) 
{
  if (!is.null(offset)) 
    stop("No offset allowed in classification models")
  fy <- as.factor(y)
### here comes code from nnet
    lev <- levels(y)
  counts <-  table(fy)
  if (any(counts == 0)) {
      warning(paste("group(s)", paste(lev[counts == 0], 
                                      collapse = " "), "are empty"))
      fy <- factor(fy, levels = lev[counts > 0])
    }
### done with code from nnet
  y <- as.integer(fy)
  numclass <- max(y[!is.na(y)])
...
}

When I run this it works, but the factor gets recoded.  For many
applications that's fine -- It seems to work OK when I use (say) the
predicted factor as a factor, but I'm worried about what could happen if I
use as.integer(predict(rpart.obj)) eventually and compare it to something
with the original encoding.   Not good programming practice, but I wouldn't
be surprised to find that I did it somewhere.

So the ideal would be saving the coding and restoring it somewhere.  But it
looks to me like that would require saving this somewhere and restoring the
coding after rpart (if I restore it in rpart.class, I should just run into
the problems I had before).  And then I'm not sure whether the core group
wants to mess with rpart to this extent.

Thanks for the terrific software.  I hope this is helpful.

Matthew Wiener
Applied Computer Science and Mathematics Department
Merck Research Labs
Rahway, NJ  07065-0900
732-594-5303



--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:rpart, package:ctest, Autoloads, package:base


--please do not edit the information below--

Version:
 platform = powerpc-apple-darwin5.2
 arch = powerpc
 os = darwin5.2
 system = powerpc, darwin5.2
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:rpart, package:ctest, Autoloads, package:base







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Wed Mar 13 17:14:19 2002
From: a296180@mica.fmr.com (David Kane  <David Kane)
Date: Wed, 13 Mar 2002 12:14:19 -0500
Subject: [Rd] File permissions test during R CMD check
Message-ID: <15503.35051.255583.275317@gargle.gargle.HOWL>

I think that I understand why R CMD check should warn if the permissions on a
file are too restrictive, but I don't understand why it should warn if they are
"too" loose. On UNIX, why is a file with 644 OK, but one with 664 (just adding
group writability) problematic enough to require a warning?

Thanks,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 13 17:17:40 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 13 Mar 2002 17:17:40 +0000 (GMT)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
In-Reply-To: <Pine.A41.4.44.0203130901320.83416-100000@homer34.u.washington.edu>
Message-ID: <Pine.LNX.4.31.0203131713490.5107-100000@gannet.stats>

Read the subject again, please.

pbinom(2, size=4.1, p=0.5)

makes no sense, but R 1.4.1 gave the result for (2, 4, 0.5) (and S+6 gives
NA).

On Wed, 13 Mar 2002, Thomas Lumley wrote:

> On Wed, 13 Mar 2002 ripley@stats.ox.ac.uk wrote:
>
> > Fixed for 1.5.0.  Note that pbinom and qbinom did it too.
> >
>
> But isn't it right for pbinom and qbinom to do it?  P(X<=4.5) is a
> perfectly reasonable quantity and is equal to P(X<=4) if X is binomial and
> (with rounding the other way) the same for quantile functions.
>
> dbinom, OTOH, is a density wrt counting measure and is not defined for
> non-integers (though one could make a case for zero).
>
> 	-thomas
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Mar 13 17:23:39 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 13 Mar 2002 09:23:39 -0800 (PST)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
In-Reply-To: <Pine.LNX.4.31.0203131713490.5107-100000@gannet.stats>
Message-ID: <Pine.A41.4.44.0203130923260.83416-100000@homer34.u.washington.edu>

On Wed, 13 Mar 2002 ripley@stats.ox.ac.uk wrote:

> Read the subject again, please.
>

Yes. Of course. Sorry.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Mar 13 18:05:14 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 13 Mar 2002 13:05:14 -0500
Subject: [Rd] Commas in formatC
Message-ID: <15503.38106.38626.976198@gargle.gargle.HOWL>

formatC() is great for formatting numbers!  But it would be even better if it
could optionally insert commas (or semicolons), e.g.
 R> formatC(1234567.89, digits=2, format="f", commas=T)
    [1] "1,234,567.89"

Here's a snippet of code that does that, which could more or less just be
inserted into at the end of formatC if any R-core guru were so inclined.  "r"
is the result so far, and "commas" is a logical flag:

  stp <- regexpr("[0-9]+", r);  len <- attr(stp, "match.length")
  if (commas && (maxl <- max(len)) > 3) for (i in seq(3, maxl-1, 3))
    r[len>i] <- paste(substring(r[len>i], 1, (stp+len-1-i)[len>i]),
                      substring(r[len>i], (stp+len-i)[len>i]), sep=",")
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Mar 13 19:53:59 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 13 Mar 2002 14:53:59 -0500 (EST)
Subject: [Rd] using R API in dynamically loaded code?
Message-ID: <Pine.LNX.4.30.0203131451540.25505-100000@bolker.zoo.ufl.edu>


  Brian Ripley pointed out that I neglected to

#include <Rmath.h>

(which of course is right there in the documentation).  Ooops.

  It all works fine now (I still have the completely separate problem that
generating gamma variates with small shape parameters underflows to zero a
lot of the time, but that seems to be my problem rather than R's problem).

  thanks,
    Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From patrick.lindsey@luc.ac.be  Thu Mar 14 11:16:34 2002
From: patrick.lindsey@luc.ac.be (Patrick Lindsey)
Date: Thu, 14 Mar 2002 12:16:34 +0100 (MET)
Subject: [Rd] Row-binding factor variables looses the ordered attribute.
Message-ID: <200203141116.MAA27679@luc.ac.be>

Hi everyone,
  I've just notice a problem with ordered factor variables. It appears
that row-binding two ordered factors together looses the ordered
attribute. The following example happens both in R1.3.1 and R1.4.1 (on
RedHat 7.2):

> y <- ordered(gl(3,6),labels=1:3)
> y
 [1] 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3
Levels:  1 < 2 < 3
> data <- data.frame(y=ordered(gl(3,6),labels=1:3))
> data[,1]    
 [1] 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3
Levels:  1 < 2 < 3 
> rbind(data,data)[,1]
 [1] 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3
Levels:  1 2 3

I've also noticed a change of behavior, between R1.3.1 and R1.4.1, in the
way some covariate names are constructed. This is really a minor comment
but this change in behavior seems unnecessary and complicates the retrieval
of coefficients using the covariate's name. For example, fitting the
following glm model in R1.3.1 results in

> data <- data.frame(y=rnorm(20),cov=gl(4,5))
> glm(y~I(cov!=2),data=data)

Call:  glm(formula = y ~ I(cov != 2), data = data)

Coefficients:
(Intercept)  I(cov != 2)
     0.8009      -0.7547

Degrees of Freedom: 19 Total (i.e. Null);  18 Residual
Null Deviance:      16.34
Residual Deviance: 14.21        AIC: 55.92

whereas with R1.4.1 we now get

> data <- data.frame(y=rnorm(20),cov=gl(4,5))
> glm(y~I(cov!=2),data=data)

Call:  glm(formula = y ~ I(cov != 2), data = data) 

Coefficients:
    (Intercept)  I(cov != 2)TRUE  
         0.4570          -0.7629  

Degrees of Freedom: 19 Total (i.e. Null);  18 Residual
Null Deviance:      24.39 
Residual Deviance: 22.2         AIC: 64.85 

The covariate name "I(cov != 2)" is now (in R1.4.1) appended by the value
TRUE. I think that this must come from "model.matrix" which must be
transforming a boolean vector into a factor variable (which I would guess
is not really necessary as this is just a binary vector).
  This change of behavior is not really a problem in itself (if it only
concerns the behavior of "model.matrix") but quite unexpected.
Thanks too all,
Patrick.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar 14 11:38:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 14 Mar 2002 11:38:30 +0000 (GMT)
Subject: [Rd] Row-binding factor variables looses the ordered attribute.
In-Reply-To: <200203141116.MAA27679@luc.ac.be>
Message-ID: <Pine.LNX.4.31.0203141135510.8480-100000@gannet.stats>

On Thu, 14 Mar 2002, Patrick Lindsey wrote:

[...]

> The covariate name "I(cov != 2)" is now (in R1.4.1) appended by the value
> TRUE. I think that this must come from "model.matrix" which must be
> transforming a boolean vector into a factor variable (which I would guess
> is not really necessary as this is just a binary vector).
>   This change of behavior is not really a problem in itself (if it only
> concerns the behavior of "model.matrix") but quite unexpected.

It is in the NEWS file ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From span@psy.uva.nl  Thu Mar 14 13:09:40 2002
From: span@psy.uva.nl (span@psy.uva.nl)
Date: Thu, 14 Mar 2002 14:09:40 +0100 (MET)
Subject: [Rd] promax (PR#1382)
Message-ID: <200203141309.OAA05371@pubhealth.ku.dk>

Full_Name: mark M. Span
Version: 1.4.1
OS: Windows NT
Submission from: (NULL) (145.18.152.205)


The attribute 'covariances' in the output of promax in the mva package does not
contain the covariances but the inverted correlation matrix of the common
factors following promax rotation.

cheers, MMS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From newsletter@marinedigital.com  Thu Mar 14 13:40:49 2002
From: newsletter@marinedigital.com (newsletter@marinedigital.com)
Date: Thu, 14 Mar 2002 14:40:49 +0100 (MET)
Subject: [Rd] INVITATION - SHIPORT CHINA 2002 (PR#1383)
Message-ID: <200203141340.OAA05707@pubhealth.ku.dk>

<html>
<head>
<title>Marine Digital Newsletter</title>
<link rel="stylesheet" type="text/css" href="http://www.marinedigital.com/css/style_feedback.css">
</head>
<body bgcolor="#FFFFFF" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<div align="center">
<table width="580" border="1" bordercolordark="ffffff" bordercolorlight="#003399" cellspacing="0" cellpadding="0">
<tr>
<td>
<table width="580" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="http://www.marinedigital.com/en/news/img/top_special.gif" width="580" height="51"></td>
</tr>
<tr><td height="1" bgcolor="#f2f2f2"></td></tr>
<tr><td height="3" bgcolor="#9392AE"></td></tr>
<tr><td height="1" bgcolor="#000000"></td></tr>
<tr><td>
<table width="580" border="0" cellspacing="0" cellpadding="0" background="http://www.marinedigital.com/img/bg_l.gif">
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td align="center">
<table width="530" border="0" cellspacing="0" cellpadding="0" bgcolor="#ffffff">
<tr>
<td height="5"></td>
</tr>
<tr>
<td align="center"><img src="http://www.marinedigital.com/en/news/img/invitation.gif" width="140" height="31"></td>
</tr>
<tr>
<td height="5"></td>
</tr>
<tr>
<td align="center"><img src="http://www.marinedigital.com/en/news/img/shiport_title.gif" width="447" height="17"></td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td align="center">
<table width="530" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="530">
<p align="center"><a href="http://www.marinedigital.com/en/shiport/intro.asp"><img border="0" src="http://www.marinedigital.com/en/news/img/shiport_intro.gif" width="530" height="70"></a>&nbsp;</p>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td align="center"><b><font color="#000099">We invite
the leading companies to the Gateway of the East
Maritime World.</font></b></td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td>
<table width="530" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="180"><a href="http://www.marinedigital.com/en/shiport/summary.asp"><img border="0" src="http://www.marinedigital.com/en/news/img/booth02.gif" width="180" height="138"></a></td>
<td width="10" rowspan="2">&nbsp;</td>
<td width="340" rowspan="2">
<table width="340" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="http://www.marinedigital.com/en/news/img/icon.gif" " width="9" height="9">
<b><font color="#cc0000">What is it?</font></b></td>
</tr>
<tr>
<td height="8"></td>
</tr>
<tr>
<td style="padding-top: 3; padding-bottom: 3">If
you plan to be an exhibitor of&nbsp; Shiport China, which
has grown just in three years as the
largest maritime event in China. In 2000,
over 200 exhibitors and 25,000 visitors
met and did business on this one-stop
platform, a sharp rise if 82% and 66%
respectively compared with its '98 debut,
highlighting the steering role of the
Exhibition in the industry.</td>
</tr>
<tr>
<td height="5"></td>
</tr>
<tr>
<td style="padding-top: 3; padding-bottom: 3">Among the visitors, over 70% visitors
were management executives and engineers
from container terminals, shipyards, ship
repairers, harbors, equipment
manufacturers, and trading firms.<br>
It is easier for you to register as an
exhibitor through on-line on our website, <a href="http://www.marinedigital.com">www.marinedigital.com</a></td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td><img src="http://www.marinedigital.com/en/news/img/icon.gif" " width="9" height="9">
<b><font color="#cc0000">What to do</font></b></td>
</tr>
<tr>
<td height="8"></td>
</tr>
<tr>
<td>Hurry up. Do not miss the opportunity
that will make you become world-class maritime
business.&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="180"><a href="http://www.marinedigital.com/en/shiport/organizers.asp"><img border="0" src="http://www.marinedigital.com/en/news/img/booth03.gif" width="180" height="139"></a></td>
</tr>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td>
<table width="530" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="340">
<table width="340" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="15" align="center"><img src="http://www.marinedigital.com/en/news/img/icon.gif" " width="9" height="9">
</td>
<td width="325"><b><font color="#cc0000"><a href="http://www.marinedigital.com/en/shiport/booth.asp">Booth
Configuration</a></font></b></td>
</tr>
<tr>
<td align="center" height="8"></td>
<td height="8"></td>
</tr>
<tr>
<td align="center">&nbsp;</td>
<td>Expanded to an exhibition area of more
than 20,000 sq.m., Shiport China 2002 is
set to meet your every aggressive
marketing need.<br>
A trend-setter in the maritime industry,
Shiport China 2002 generates a complete
overview on the latest development of the
market :</td>
</tr>
<tr>
<td align="center" height="8"></td>
<td height="8"></td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Shipbuilding</td>
</tr>
<tr>
<td align="center" height="5"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Marine Technology</td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Port Industry</td>
</tr>
<tr>
<td align="center" height="5"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Transportation Equipment</td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Naval Supplies</td>
</tr>
<tr>
<td align="center" height="5"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Related Equipment</td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td></td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><b><font color="#fd651d">- Space Only</font></b></td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td>For exhibitors who wish to design and
build their own booths. (minimum 27 sq.m.)</td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><b><font color="#fd651d">- Shell Scheme</font></b></td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td>Exhibitors will be provided with
ready-to-display facilities. (minimum 9
sq.m.)</td>
</tr>
</table>
</td>
<td width="10">&nbsp;</td>
<td width="180"><a href="http://www.marinedigital.com/en/shiport/general.asp" target="_blank"><img src="http://www.marinedigital.com/en/news/img/dalian.gif"  border="0" width="180" height="180"></a></td>
</tr>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td>
<table width="530" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="100" valign="bottom"><img src="http://www.marinedigital.com/en/news/img/img.jpg" width="100" height="140" ></td>
<td width="10">&nbsp;</td>
<td width="310">&nbsp;&nbsp;&nbsp;&nbsp;<img src="http://www.marinedigital.com/en/news/img/icon.gif" " width="9" height="9">
<b><font color="#cc0000">Great Opportunity</font><font color="#990000">
</font></b>
<table width="310" border="0" cellspacing="0" cellpadding="0">
<tr>
<td height="8"></td>
</tr>
<tr>
<td>
<p align="left" style="margin-left:15px;">Come
and embrace the exhibition as an opportunity
to approach the Gateway to the East maritime
World,
especially Shipbuilding, Port Industry
and Related Equipment. Don't miss the best chance to
inform you of business competence to maritime
elites.
</td>
</tr>
<tr>
<td height="5"></td>
</tr>
<tr>
<td><p align="left" style="margin-left:15px;">If you need any other questions or
inquiries,
please send e-mail at</td>
</tr>
<tr>
<td height="5"></td>
</tr>
<tr>
<td><p align="center"><b>James Song,
Executive Director </b>(<a href="mailto:jbsong@marinedigital.com">jbsong@marinedigitial.com</a>)</td>
</tr>
</table>
</td>
<td width="2">&nbsp;</td>
<td width="108" valign="bottom"><a href="http://www.marinedigital.com/en/shiport/registration.asp" target="_blank"><img src="http://www.marinedigital.com/en/news/img/register_online.gif" border="0" width="108" height="150"></a></td>
</tr>
</table>
</td>
</tr>
<tr>
<td style="padding-top: 10; padding-bottom: 10">
<p align="center"><b><font color="#0000FF">We look
forward to welcoming you to the exhibition.</font></b></td>
</tr>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
</table>
</td></tr>
<tr><td height="1" bgcolor="#003399"></td></tr>
<tr>
<td bgcolor="#f3f3f6" align="center">
<table width="520" border="0" cellspacing="0" cellpadding="0">
<tr>
<td align="center"><font color="#003399">President &amp; CEO,
Terry Kim is responsible for VOICE OF CUSTOMER</font></td>
</tr>
<tr>
<td align="center"><font color="#003399">( e-Mail : <a href="mailto:terry@marinedigital.com">terry@marinedigital.com</a>
)</font></td>
</tr>
<tr>
<td align="center"><font color="#003399">Tel : 82-2-966-6701,
Fax : 82-2-966-6703, URL : <a href="http://www.marinedigital.com" target="_blank">www.marinedigital.com</a></font></td>
</tr>
</table>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</body>
</html>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Thu Mar 14 14:21:04 2002
From: egonw@sci.kun.nl (egonw@sci.kun.nl)
Date: Thu, 14 Mar 2002 15:21:04 +0100 (MET)
Subject: [Rd] KDE frontend (PR#1384)
Message-ID: <200203141421.PAA06318@pubhealth.ku.dk>

Full_Name: Egon Willighagen
Version: 1.4.x
OS: Linux/Solaris
Submission from: (NULL) (131.174.179.30)


I would like to have an gui for KDE (like gnome).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 14 14:46:17 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 2002 15:46:17 +0100
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <200203141421.PAA06318@pubhealth.ku.dk>
References: <200203141421.PAA06318@pubhealth.ku.dk>
Message-ID: <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>

egonw@sci.kun.nl writes:

> Full_Name: Egon Willighagen
> Version: 1.4.x
> OS: Linux/Solaris
> Submission from: (NULL) (131.174.179.30)
> 
> 
> I would like to have an gui for KDE (like gnome).

This is hardly a bug, so you might have put "wishlist" or so in the
subject. On the other hand it is fairly useful to file enhancement
requests too.

However, this is a bit of a mouthful to implement. Do you have a
handle on how to go about it? Contributions are welcome...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Thu Mar 14 14:58:47 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Thu, 14 Mar 2002 15:58:47 +0100
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>
References: <200203141421.PAA06318@pubhealth.ku.dk> <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>
Message-ID: <200203141458.g2EEwmB02843@wn1.sci.kun.nl>

On Thursday 14 March 2002 15:46, Peter Dalgaard BSA wrote:
> egonw@sci.kun.nl writes:
> > Full_Name: Egon Willighagen
> > Version: 1.4.x
> > OS: Linux/Solaris
> > Submission from: (NULL) (131.174.179.30)
> >
> >
> > I would like to have an gui for KDE (like gnome).
>
> This is hardly a bug, so you might have put "wishlist" or so in the
> subject. On the other hand it is fairly useful to file enhancement
> requests too.

It was intended a wishlist bug... The bug submit page [1] did not ask
a bug level, and I assumed it was going to be asked in a subsequent
page... my apologies.

I cannot change the status myself... but it should indeed be wishlist.

> However, this is a bit of a mouthful to implement. Do you have a
> handle on how to go about it? Contributions are welcome...

At this time I do not know how to write a KDE frontend, but once I have some 
more insight I will share this info.... i can send such info to which email 
address to automatically have it included in the bug archive?

Egon

1. http://r-bugs.biostat.ku.dk/cgi-bin/R
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Thu Mar 14 15:06:19 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Thu, 14 Mar 2002 09:06:19 -0600
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <200203141421.PAA06318@pubhealth.ku.dk>
References: <200203141421.PAA06318@pubhealth.ku.dk>
Message-ID: <20020314150619.GA12205@sonny.eddelbuettel.com>

On Thu, Mar 14, 2002 at 03:21:04PM +0100, egonw@sci.kun.nl wrote:
> Full_Name: Egon Willighagen
> Version: 1.4.x
> OS: Linux/Solaris
> Submission from: (NULL) (131.174.179.30)
> 
> 
> I would like to have an gui for KDE (like gnome).

Great. 

You know which address you need to send code contributions too, don't you?  
Money might be accepted too so that we can hire a programmer if you are
short of time yourself.

Oh, and I would like a BMW motorcycle. Where do I file that bug report?

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 14 15:19:41 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 2002 16:19:41 +0100
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <200203141458.g2EEwmB02843@wn1.sci.kun.nl>
References: <200203141421.PAA06318@pubhealth.ku.dk>
 <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>
 <200203141458.g2EEwmB02843@wn1.sci.kun.nl>
Message-ID: <x2bsdrxjle.fsf@blueberry.kubism.ku.dk>

"E.L. Willighagen" <egonw@sci.kun.nl> writes:

> At this time I do not know how to write a KDE frontend, but once I have some 
> more insight I will share this info.... i can send such info to which email 
> address to automatically have it included in the bug archive?

For small notes, you can follow up on this report, just make sure
that the subject line has "(PR#1384)" in it. 

If it gets excessive (it likely will...) there's the r-devel mailing
list for discussions of the development plans and process.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu Mar 14 15:22:01 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Thu, 14 Mar 2002 10:22:01 -0500
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Thu, Mar 14, 2002 at 03:46:17PM +0100
References: <200203141421.PAA06318@pubhealth.ku.dk> <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>
Message-ID: <20020314102201.D15816@jessie.research.bell-labs.com>

Peter Dalgaard BSA wrote:
> egonw@sci.kun.nl writes:
> 
> > Full_Name: Egon Willighagen
> > Version: 1.4.x
> > OS: Linux/Solaris
> > Submission from: (NULL) (131.174.179.30)
> > 
> > 
> > I would like to have an gui for KDE (like gnome).
> 
> ...
> However, this is a bit of a mouthful to implement. Do you have a
> handle on how to go about it? Contributions are welcome...
> 

Just thought I'd add this for the record.....

As a general strategy for building GUIs for use in R, I believe it
will be much more beneficial to do this in two steps:

   a) create a set of R-language bindings to the GUI toolkit 
      of interest (Qt in this case)
   b) build one or more GUIs for R in the R language.

The obvious benefits are that i) we can use the bindings to write
other GUIs, and ii) more people can adapt the GUI code to create their
own customized version(s).  This hopefully avoids us creating "the" R
GUI containing an interface to every function known to mankind!  A
third benefit is that perhaps the GUI design can be more readily
adapted for different toolkits (e.g. Gtk, Qt, wxWindows, MFC, etc.)

We already have bindings for several toolkits: the tcltk package to
Tk, RGtk for Gtk/Gnome, (a recently more stable) SJava for Swing/AWT.
The SWIG, the RGtk package, etc. might provide a place to look for
automating the bindings to Qt.

The KDE toolkit, Qt, is C++ which makes it slightly more tricky to
handle. But there are C bindings for it.





> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Thu Mar 14 15:40:24 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Thu, 14 Mar 2002 16:40:24 +0100
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <20020314150619.GA12205@sonny.eddelbuettel.com>
References: <200203141421.PAA06318@pubhealth.ku.dk> <20020314150619.GA12205@sonny.eddelbuettel.com>
Message-ID: <200203141540.g2EFePB14412@wn1.sci.kun.nl>

On Thursday 14 March 2002 16:06, Dirk Eddelbuettel wrote:
> On Thu, Mar 14, 2002 at 03:21:04PM +0100, egonw@sci.kun.nl wrote:
> > Full_Name: Egon Willighagen
> > Version: 1.4.x
> > OS: Linux/Solaris
> > Submission from: (NULL) (131.174.179.30)
> >
> >
> > I would like to have an gui for KDE (like gnome).
>
> Great.
>
> You know which address you need to send code contributions too, don't you?
> Money might be accepted too so that we can hire a programmer if you are
> short of time yourself.

I like this kind of sarcasm... But you understand that I am probably not the 
only one interested in this... Moreover, a note (read: wishlist bug) on such 
a request does not mean it has to be implemented (at once/any time). It is 
just a note that people are/i am interested in it...

> Oh, and I would like a BMW motorcycle. Where do I file that bug report?

What about http://www.bmwusacycles.com/lit_request.html?

Egon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Thu Mar 14 18:57:42 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Thu, 14 Mar 2002 13:57:42 -0500 (EST)
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <20020314102201.D15816@jessie.research.bell-labs.com>
Message-ID: <Pine.GSO.4.10.10203141343460.4473-100000@hsph.harvard.edu>

On Thu, 14 Mar 2002, Duncan Temple Lang wrote:

> Peter Dalgaard BSA wrote:
> > egonw@sci.kun.nl writes:
> > 
> > > Full_Name: Egon Willighagen
> > > Version: 1.4.x
> > > OS: Linux/Solaris
> > > Submission from: (NULL) (131.174.179.30)
> > > 
> > > 
> > > I would like to have an gui for KDE (like gnome).
> > 
> > ...
> > However, this is a bit of a mouthful to implement. Do you have a
> > handle on how to go about it? Contributions are welcome...
> > 
> 
> Just thought I'd add this for the record.....
> 
> As a general strategy for building GUIs for use in R, I believe it
> will be much more beneficial to do this in two steps:
> 
>    a) create a set of R-language bindings to the GUI toolkit 
>       of interest (Qt in this case)
>    b) build one or more GUIs for R in the R language.
> 
> The obvious benefits are that i) we can use the bindings to write
> other GUIs, and ii) more people can adapt the GUI code to create their
> own customized version(s).  This hopefully avoids us creating "the" R
> GUI containing an interface to every function known to mankind!  A
> third benefit is that perhaps the GUI design can be more readily
> adapted for different toolkits (e.g. Gtk, Qt, wxWindows, MFC, etc.)

To toss in my $.02--it seems to me that it would be nice to push the GUIs
(or any interface) "out of the core" s.t. GUIs are basically creating an R
context just like any other embedding program. For most GUIs the main
executable (if I understand Duncan's comments correctly) would mostly be a
stub to get the GUI moving inside of the package that actually implements
the GUI itself (allowing for more control over the GUI from the R
environment---dynamic menus, etc, etc). Alternatively, there could be a
generalized GUI interface whose C interface is implemented by the main
executable and then registered (now that registration is nice)---this is
probably the more difficult route and perhaps the more limiting route in
the long run (various GUIs may have various nice features).

> 
> We already have bindings for several toolkits: the tcltk package to
> Tk, RGtk for Gtk/Gnome, (a recently more stable) SJava for Swing/AWT.
> The SWIG, the RGtk package, etc. might provide a place to look for
> automating the bindings to Qt.
> 
> The KDE toolkit, Qt, is C++ which makes it slightly more tricky to
> handle. But there are C bindings for it.

Well, it could be an ObjC binding :-)

> 
> 
> 
> 
> 
> > -- 
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3  
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> _______________________________________________________________
> 
> Duncan Temple Lang                duncan@research.bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-3217
> 700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
> Murray Hill, NJ  07974-2070       
>          http://cm.bell-labs.com/stat/duncan
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Thu Mar 14 18:58:45 2002
From: bellis@hsph.harvard.edu (bellis@hsph.harvard.edu)
Date: Thu, 14 Mar 2002 19:58:45 +0100 (MET)
Subject: [Rd] KDE frontend (PR#1384)
Message-ID: <200203141858.TAA08022@pubhealth.ku.dk>

On Thu, 14 Mar 2002, Duncan Temple Lang wrote:

> Peter Dalgaard BSA wrote:
> > egonw@sci.kun.nl writes:
> > 
> > > Full_Name: Egon Willighagen
> > > Version: 1.4.x
> > > OS: Linux/Solaris
> > > Submission from: (NULL) (131.174.179.30)
> > > 
> > > 
> > > I would like to have an gui for KDE (like gnome).
> > 
> > ...
> > However, this is a bit of a mouthful to implement. Do you have a
> > handle on how to go about it? Contributions are welcome...
> > 
> 
> Just thought I'd add this for the record.....
> 
> As a general strategy for building GUIs for use in R, I believe it
> will be much more beneficial to do this in two steps:
> 
>    a) create a set of R-language bindings to the GUI toolkit 
>       of interest (Qt in this case)
>    b) build one or more GUIs for R in the R language.
> 
> The obvious benefits are that i) we can use the bindings to write
> other GUIs, and ii) more people can adapt the GUI code to create their
> own customized version(s).  This hopefully avoids us creating "the" R
> GUI containing an interface to every function known to mankind!  A
> third benefit is that perhaps the GUI design can be more readily
> adapted for different toolkits (e.g. Gtk, Qt, wxWindows, MFC, etc.)

To toss in my $.02--it seems to me that it would be nice to push the GUIs
(or any interface) "out of the core" s.t. GUIs are basically creating an R
context just like any other embedding program. For most GUIs the main
executable (if I understand Duncan's comments correctly) would mostly be a
stub to get the GUI moving inside of the package that actually implements
the GUI itself (allowing for more control over the GUI from the R
environment---dynamic menus, etc, etc). Alternatively, there could be a
generalized GUI interface whose C interface is implemented by the main
executable and then registered (now that registration is nice)---this is
probably the more difficult route and perhaps the more limiting route in
the long run (various GUIs may have various nice features).

> 
> We already have bindings for several toolkits: the tcltk package to
> Tk, RGtk for Gtk/Gnome, (a recently more stable) SJava for Swing/AWT.
> The SWIG, the RGtk package, etc. might provide a place to look for
> automating the bindings to Qt.
> 
> The KDE toolkit, Qt, is C++ which makes it slightly more tricky to
> handle. But there are C bindings for it.

Well, it could be an ObjC binding :-)

> 
> 
> 
> 
> 
> > -- 
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3  
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> _______________________________________________________________
> 
> Duncan Temple Lang                duncan@research.bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-3217
> 700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
> Murray Hill, NJ  07974-2070       
>          http://cm.bell-labs.com/stat/duncan
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eneafse@lumc.edu  Thu Mar 14 20:05:43 2002
From: eneafse@lumc.edu (eneafse@lumc.edu)
Date: Thu, 14 Mar 2002 21:05:43 +0100 (MET)
Subject: [Rd] "evaluating expression 0" bug in R-1.4.1 (PR#1385)
Message-ID: <200203142005.VAA08230@pubhealth.ku.dk>

Full_Name: Edward J. Neafsey 
Version: 1.4.1
OS: linux
Submission from: (NULL) (147.126.192.93)


R-1.4.1 failed to finish compiling building package `methods', as seen in
output from make below.
============================================================================
Make output:
../../../library/methods/man/methods.Rd is unchanged
make[4]: Entering directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[5]: Entering directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[5]: `Makedeps' is up to date.
make[5]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[5]: Entering directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
../../../../library/methods/libs/methods.so is unchanged
make[5]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[4]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[4]: Entering directory `/usr/src/SOURCES/R-1.4.1/src/library/methods'
dumping R code in package `methods'
Error: syntax error: evaluating expression 0
Execution halted
make[4]: *** [../../../library/methods/R/all.rda] Error 1
make[4]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods'
make[3]: *** [all] Error 2
make[3]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods'
make[2]: *** [R] Error 1
make[2]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src'
make: *** [R] Error 1 


When I examined things further, it became clear problem was in new R.bin 
file, since after exporting the proper value for R_HOME, running just R.bin
by itself caused the same "evaluating expression 0" error, as seen below.
========================================================================
R.bin by itself output
[/usr/src/SOURCES/R-1.4.1/bin]# export R_HOME=/usr/src/SOURCES/R-1.4.1
[/usr/src/SOURCES/R-1.4.1/bin]# ./R.bin

R : Copyright 2002, The R Development Core Team
Version 1.4.1 Patched (2002-03-13)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

Error: syntax error: evaluating expression 0
Error: syntax error: evaluating expression 0
> 

This happened even if run with --vanilla.  Interestingly, removing the 
Rprofile file removed one of the two "Error: syntax error:..." messages.

I have been successfully compiling R through a number of versions, and
this is first time I have had a real problem.

Thanks for R.

E.J. Neafsey
eneafse@lumc.edu



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 14 22:35:14 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 2002 23:35:14 +0100
Subject: [Rd] "evaluating expression 0" bug in R-1.4.1 (PR#1385)
In-Reply-To: <200203142005.VAA08230@pubhealth.ku.dk>
References: <200203142005.VAA08230@pubhealth.ku.dk>
Message-ID: <x2it7ypyl9.fsf@blueberry.kubism.ku.dk>

eneafse@lumc.edu writes:

> Full_Name: Edward J. Neafsey 
> Version: 1.4.1
> OS: linux

Which one? Distrib./compiler set? Given the number of Linux systems
among the core developers, it seems rather unlikely that R-patched
would be broken on all all of them without anyone noticing... 

It does build OK for me.

> Submission from: (NULL) (147.126.192.93)
> 
> 
> R-1.4.1 failed to finish compiling building package `methods', as seen in
> output from make below.
> ============================================================================
> dumping R code in package `methods'
> Error: syntax error: evaluating expression 0
> Execution halted
...
> When I examined things further, it became clear problem was in new R.bin 
> file, since after exporting the proper value for R_HOME, running just R.bin
> by itself caused the same "evaluating expression 0" error, as seen below.
> ========================================================================
...
> Type `q()' to quit R.
> 
> Error: syntax error: evaluating expression 0
> Error: syntax error: evaluating expression 0
> > 
> 
> This happened even if run with --vanilla.  Interestingly, removing the 
> Rprofile file removed one of the two "Error: syntax error:..." messages.

This could come from a corrupted base package. You'd have to track it
down a bit further though. Binary search on the library/base/R/base
file is a possibility. Or you might try sourcing the file with echo=T.

Are you sure you are doing a clean build? Delete config.cache, make
clean, etc.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tplate@blackmesacapital.com  Fri Mar 15 04:59:03 2002
From: tplate@blackmesacapital.com (Tony Plate)
Date: Thu, 14 Mar 2002 21:59:03 -0700
Subject: [Rd] two minor differences in behavior of R and S-plus
Message-ID: <5.1.0.14.2.20020313175440.038cee98@a.paloma.com>

I found two minor differences when porting some S-plus code to R (the code 
was written for Splus 3.5 Unix).

(1) The function c(), when applied to a name and a character, under S-plus 
coerces the name to character data and returns a vector of character data, 
but in R returns a list containing both objects intact

(2) The call match.call(expand.dots=F) returns an object that behaves 
differently: under S-plus it is a call object with a "list" functor, under 
R it is an ordinary list with no "list" functor.  (e.g., 
as.character(match.call(expand.dots=F)$...) under S-plus has 
length(list(...))+1 elements, of which the first is "list", but under R it 
has just length(list(...)) elements)

Example of (1)

under R (both 1.5 and 1.4.1):

 > c("foo", as.name("bar"))
[[1]]
[1] "foo"

[[2]]
bar

under S-plus 6.0 (and earlier, I believe)

 > c("foo", as.name("bar"))
[1] "foo" "bar"

[I would agree that it is unclear what the most desirable behavior is, and 
would also agree that clean code would do an as.character() on a name 
before attempting to concatenate it with character data - I changed my code 
to do this.]

Example of (2)

Under R 1.4.1:
 > (function(...)browser())(x=1,y=2)
Called from: (function(...) browser())(x = 1, y = 2)
Browse[1]> match.call(expand.dots=F)
(function(...) browser())(... = list(x = 1, y = 2))
Browse[1]> match.call(expand.dots=F)$...
$x
[1] 1

$y
[1] 2

Browse[1]> is.call(match.call(expand.dots=F)$...)
[1] FALSE
Browse[1]> names(match.call(expand.dots=F)$...)
[1] "x" "y"
Browse[1]> as.character(match.call(expand.dots=F)$...)
[1] "1" "2"


Under S-plus 6.0:
 > (function(...)browser())(x=1,y=2)
Called from: (function(...)  browser())....
b()> match.call(expand.dots=F)
(function(...)
browser())(... = list(x = 1, y = 2))
b()> match.call(expand.dots=F)$...
list(x = 1, y = 2)
b()> is.call(match.call(expand.dots=F)$...)
[1] T
b()> names(match.call(expand.dots=F)$...)
[1] ""  "x" "y"
b()> as.character(match.call(expand.dots=F)$...)
[1] "list" "1"    "2"


(Feel free to let me know whether or not minor incompatibilities like this 
are of interest to the R-developers -- I don't know to what degree people 
are trying to make R compatible with S-plus.)

-- Tony Plate

 > version
          _
platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    4.1
year     2002
month    01
day      30
language R
 > 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Mar 14 16:09:46 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 14 Mar 2002 17:09:46 +0100
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <15503.35051.255583.275317@gargle.gargle.HOWL>
References: <15503.35051.255583.275317@gargle.gargle.HOWL>
Message-ID: <15504.52042.451614.174105@mithrandir.hornik.net>

>>>>> "David Kane writes:

> I think that I understand why R CMD check should warn if the
> permissions on a file are too restrictive, but I don't understand why
> it should warn if they are "too" loose. On UNIX, why is a file with
> 644 OK, but one with 664 (just adding group writability) problematic
> enough to require a warning?

I think we want the *installed* files to be 644 and dirs to be 755 (by
default).  Can we be sure that all routes to installing a package (as
source or binary) lead to this even if permissions originally were too
loose?  I don't, hence I prefer being on the defensive side.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 15 08:07:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 15 Mar 2002 08:07:35 +0000 (GMT)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <15504.52042.451614.174105@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0203150758090.18980-100000@gannet.stats>

On Thu, 14 Mar 2002, Kurt Hornik wrote:

> >>>>> "David Kane writes:
>
> > I think that I understand why R CMD check should warn if the
> > permissions on a file are too restrictive, but I don't understand why
> > it should warn if they are "too" loose. On UNIX, why is a file with
> > 644 OK, but one with 664 (just adding group writability) problematic
> > enough to require a warning?
>
> I think we want the *installed* files to be 644 and dirs to be 755 (by
> default).  Can we be sure that all routes to installing a package (as
> source or binary) lead to this even if permissions originally were too
> loose?  I don't, hence I prefer being on the defensive side.

There is an assumption that

umask 022

in INSTALL (on Unix-alikes) actually works.  If so, installing from source
should work.  You can't be sure about binary packages: they might not be
installed by INSTALL.

I don't see this.  We do not insist that R itself is installed as
world-readable, and I don't see why we should be doing so for packages.
Further, it would be convenient to have installed packages
group-writeable, as then anyone in the group can run update.packages().

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Mar 15 10:01:44 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 15 Mar 2002 10:01:44 +0000
Subject: [Rd] Thought on crossprod
Message-ID: <3C91C688.E297B0FE@durham.ac.uk>

Hi everyone,

I do a lot of work with large variance matrices, and I like to use
"crossprod" for speed and to keep everything symmetric, i.e. I often
compute "crossprod(Q %*% t(A))" for "A %*% Sigma %*% t(A)", where
"Sigma" decomposes as "t(Q) %*% Q".  I notice in the code that
"crossprod", current definition

> crossprod
function (x, y = x) 
.Internal(crossprod(x, y))

does not recognise the case where y is the same as x as special.  I'd
like to extend crossprod to something like

> crossprod
function(x, y = NULL)
if (is.null(y))
  .Internal(crossprod.symm(x))
else
  .Internal(crossprod(x, y))

Before I start mesing up my R-1.4.1 installation, does anyone have any
thoughts on this?

Cheers, Jonathan.
-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Mar 15 13:45:24 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 15 Mar 2002 14:45:24 +0100
Subject: [Rd] Thought on crossprod
In-Reply-To: <3C91C688.E297B0FE@durham.ac.uk>
References: <3C91C688.E297B0FE@durham.ac.uk>
Message-ID: <15505.64244.865792.272476@gargle.gargle.HOWL>

>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> Hi everyone, I do a lot of work with large variance
    JonR> matrices, and I like to use "crossprod" for speed and
    JonR> to keep everything symmetric, i.e. I often compute
    JonR> "crossprod(Q %*% t(A))" for "A %*% Sigma %*% t(A)",
    JonR> where "Sigma" decomposes as "t(Q) %*% Q".  I notice in
    JonR> the code that "crossprod", current definition

    >> crossprod
    JonR> function (x, y = x) 
    JonR> .Internal(crossprod(x, y))

    JonR> does not recognise the case where y is the same as x as special.  I'd
    JonR> like to extend crossprod to something like

    >> crossprod
    JonR> function(x, y = NULL)
    JonR> if (is.null(y))
    JonR>    .Internal(crossprod.symm(x))
    JonR> else
    JonR>    .Internal(crossprod(x, y))

    JonR> Before I start mesing up my R-1.4.1 installation, does anyone have any
    JonR> thoughts on this?

Just for clarification:
The main point of your suggestion is to pass only half as much
data down to C, right?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Mar 15 15:06:51 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 15 Mar 2002 10:06:51 -0500 (EST)
Subject: [Rd] Re: [R] persp(): add second plane
In-Reply-To: <3C91B04E.9004F81@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.30.0203151003270.20916-100000@bolker.zoo.ufl.edu>


  [forwarded to R-devel]

  I'm most interested in integrating persp() and scatterplot3d() so that
we can (e.g.) easily draw graphs like response surfaces with associated
points (yes, there are serious questions about whether 3d perspective
plots are good general tools for data presentation, but there are some
places where it's really useful).  I can think of a bunch of quick hacks,
but I don't really know how an integrated system should be designed for
consistency and ease of use.

  Ben

On Fri, 15 Mar 2002, Uwe Ligges wrote:

> Henrik Bengtsson wrote:
> >
> > Hmm, very interesting. I guess I am not the only one that thought about
> > extending Ben Bolkers idea to plot R^3 data by starting with an empty
> > persp(). Except from the "risk" of plotting outside the bounds of 3d-box
> > created by persp()
>
> Have a look into the code of the package "scatterplot3d". That "risk" is
> already solved in there and the ideas will also work for your example.
> Also some other generalizations could be adapt for the "persp()-3d"
> case.
>
> > I can't see any problems with this approach. I wrote up
> > some code for a plot3d() and a points3d() method. I have pasted the code at
> > the end and as you see I made the plot3d() code to be almost identical to
> > the one for persp(). First an example how the functions can be used and then
> > the code:
>
> [snip]
>
>
> Uwe Ligges
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar 15 15:19:32 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Mar 2002 10:19:32 -0500
Subject: [Rd] File permissions test during R CMD check
References: <Pine.LNX.4.31.0203150758090.18980-100000@gannet.stats>
Message-ID: <3C921104.B7E710E0@bank-banque-canada.ca>


ripley@stats.ox.ac.uk wrote:
>
> There is an assumption that
> 
> umask 022
> 
> in INSTALL (on Unix-alikes) actually works. 

I have discovered that Mandrake 8.1 /etc/bashrc sets the umask for many
users to 002, which is a problem because files extracted from cvs have
group write priviledges. It is fairly easy to fix, once the source of
the problem is recognized. I'm not sure how widespread this is in other
Linux distributions.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 15 15:22:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 15 Mar 2002 15:22:21 +0000 (GMT)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <3C921104.B7E710E0@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0203151521070.25930-100000@gannet.stats>

On Fri, 15 Mar 2002, Paul Gilbert wrote:

>
> ripley@stats.ox.ac.uk wrote:
> >
> > There is an assumption that
> >
> > umask 022
> >
> > in INSTALL (on Unix-alikes) actually works.
>
> I have discovered that Mandrake 8.1 /etc/bashrc sets the umask for many
> users to 002, which is a problem because files extracted from cvs have
> group write priviledges. It is fairly easy to fix, once the source of
> the problem is recognized. I'm not sure how widespread this is in other
> Linux distributions.

Relevance?  INSTALL sets the umask, not uses an existing one.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgentry@jimmy.harvard.edu  Fri Mar 15 16:05:58 2002
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Fri, 15 Mar 2002 11:05:58 -0500 (EST)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <3C921104.B7E710E0@bank-banque-canada.ca>
Message-ID: <Pine.SOL.4.20.0203151104150.26946-100000@santiam.dfci.harvard.edu>

> I have discovered that Mandrake 8.1 /etc/bashrc sets the umask for many
> users to 002, which is a problem because files extracted from cvs have

Redhat 7.2 also has a default umask of 002.

-Jeff

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Mar 15 16:16:47 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 15 Mar 2002 17:16:47 +0100
Subject: [Rd] Re: [R] persp(): add second plane
References: <Pine.LNX.4.30.0203151003270.20916-100000@bolker.zoo.ufl.edu>
Message-ID: <3C921E6F.BB81543B@statistik.uni-dortmund.de>


Ben Bolker wrote:
> 
>   [forwarded to R-devel]
> 
>   I'm most interested in integrating persp() and scatterplot3d() so that
> we can (e.g.) easily draw graphs like response surfaces with associated
> points (yes, there are serious questions about whether 3d perspective
> plots are good general tools for data presentation, but there are some
> places where it's really useful).  I can think of a bunch of quick hacks,
> but I don't really know how an integrated system should be designed for
> consistency and ease of use.


I think it's not possible to write an integrated system that uses the
functions scatterplot3d() and persp() as they are. The straightforward
way, from my point of view, is to write a new function (suggestions for
a name?) along scatterplot3d()'s code, that uses persp() instead of
scatterplot3d()'s own plot function in principle.

I'll volunteer to write such a function during the next months, but
there are still some other points on my todo list (and I myself don't
need such a function at present). 

Uwe


>   Ben
> 
> On Fri, 15 Mar 2002, Uwe Ligges wrote:
> 
> > Henrik Bengtsson wrote:
> > >
> > > Hmm, very interesting. I guess I am not the only one that thought about
> > > extending Ben Bolkers idea to plot R^3 data by starting with an empty
> > > persp(). Except from the "risk" of plotting outside the bounds of 3d-box
> > > created by persp()
> >
> > Have a look into the code of the package "scatterplot3d". That "risk" is
> > already solved in there and the ideas will also work for your example.
> > Also some other generalizations could be adapt for the "persp()-3d"
> > case.
> >
> > > I can't see any problems with this approach. I wrote up
> > > some code for a plot3d() and a points3d() method. I have pasted the code at
> > > the end and as you see I made the plot3d() code to be almost identical to
> > > the one for persp(). First an example how the functions can be used and then
> > > the code:
> >
> > [snip]
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar 15 16:31:35 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 15 Mar 2002 08:31:35 -0800 (PST)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <Pine.LNX.4.31.0203150758090.18980-100000@gannet.stats>
Message-ID: <Pine.A41.4.44.0203150828500.25112-100000@homer14.u.washington.edu>

On Fri, 15 Mar 2002 ripley@stats.ox.ac.uk wrote:

>
> I don't see this.  We do not insist that R itself is installed as
> world-readable, and I don't see why we should be doing so for packages.
> Further, it would be convenient to have installed packages
> group-writeable, as then anyone in the group can run update.packages().
>

Yes --  and many people would argue that it is positively undesirable for
update.packages() to be run as root even if only one person were to run
it.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar 15 16:42:58 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 15 Mar 2002 08:42:58 -0800 (PST)
Subject: [Rd] Thought on crossprod
In-Reply-To: <15505.64244.865792.272476@gargle.gargle.HOWL>
Message-ID: <Pine.A41.4.44.0203150840250.25112-100000@homer14.u.washington.edu>

On Fri, 15 Mar 2002, Martin Maechler wrote:

> >>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
>
>     JonR> does not recognise the case where y is the same as x as special.  I'd
>     JonR> like to extend crossprod to something like
>
>     >> crossprod
>     JonR> function(x, y = NULL)
>     JonR> if (is.null(y))
>     JonR>    .Internal(crossprod.symm(x))
>     JonR> else
>     JonR>    .Internal(crossprod(x, y))
>
>     JonR> Before I start mesing up my R-1.4.1 installation, does anyone have any
>     JonR> thoughts on this?
>
> Just for clarification:
> The main point of your suggestion is to pass only half as much
> data down to C, right?
>

If this can be done with the BLAS functions then halving the necessary
memory bandwidth will also help -- that's one of the limiting factors in
ATLAS, for example.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 15 17:13:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 15 Mar 2002 17:13:31 +0000 (GMT)
Subject: [Rd] Thought on crossprod
In-Reply-To: <Pine.A41.4.44.0203150840250.25112-100000@homer14.u.washington.edu>
Message-ID: <Pine.LNX.4.31.0203151701340.26291-100000@gannet.stats>

On Fri, 15 Mar 2002, Thomas Lumley wrote:

> On Fri, 15 Mar 2002, Martin Maechler wrote:
>
> > >>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
> >
> >     JonR> does not recognise the case where y is the same as x as special.  I'd
> >     JonR> like to extend crossprod to something like
> >
> >     >> crossprod
> >     JonR> function(x, y = NULL)
> >     JonR> if (is.null(y))
> >     JonR>    .Internal(crossprod.symm(x))
> >     JonR> else
> >     JonR>    .Internal(crossprod(x, y))
> >
> >     JonR> Before I start mesing up my R-1.4.1 installation, does anyone have any
> >     JonR> thoughts on this?
> >
> > Just for clarification:
> > The main point of your suggestion is to pass only half as much
> > data down to C, right?
> >
>
> If this can be done with the BLAS functions then halving the necessary
> memory bandwidth will also help -- that's one of the limiting factors in
> ATLAS, for example.

Looks like dsyrk can do this: despite the definition of *sy* BLAS routines
on my quick reference card it does not need a symmetric matrix, which is
why I overlooked it in earlier correspondence with Jonathan.  As from
1.5.0 dsyrk will be available in R.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar 15 17:44:34 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Mar 2002 12:44:34 -0500
Subject: [Rd] File permissions test during R CMD check
References: <Pine.LNX.4.31.0203151521070.25930-100000@gannet.stats>
Message-ID: <3C923302.664FAE6A@bank-banque-canada.ca>

ripley@stats.ox.ac.uk wrote:

> Relevance?  INSTALL sets the umask, not uses an existing one.

Well, if you keep your files in cvs as lots of people do, then R CMD
check gives lots of warnings messages about the file permissions after
you checkout your files with the wrong umask. Not that this in itself is
so bad, but when one gets lots of warning messages all the time then
they often get ignored and the important ones are missed. So I think it
is useful to get the settings right and avoid the warning messages.

Don't get me wrong, I think this is a problem in the Linux
distributions, not in R.

Paul
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Fri Mar 15 22:30:20 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Fri, 15 Mar 2002 17:30:20 -0500
Subject: [Rd] NA in character vectors
Message-ID: <15506.30204.173083.457974@gargle.gargle.HOWL>

Hi all,

While R-1.5.0 is still unfrozen, I'd like to try again to generate interest in
my favorite pet peeve: NA's in character vectors.  Last October I wrote:

> LETTERS[c(NA,2)] in S is c("","B"), but in R is c("NA","B").

We had an interesting discussion then, and I learned (from Duncan Murdoch and
Thomas Lumley) that R does have an internal code for missing char values
(R_NaString), but it gets easily confused with the string "NA".  Check this:

  R> z <- c(LETTERS[c(2,NA)], "NA", paste("NA"))
  R> is.na(z)
     [1] FALSE  TRUE  TRUE FALSE
  R> z[3]==z[4]
     [1] TRUE
  R> z=="NA"
     [1] FALSE  TRUE  TRUE  TRUE

Thomas Lumley <tlumley@u.washington.edu> suggested that this weird behavior
essentially arises because the parser converts "NA" to R_NaString, and so...
> It looks like we basically need to
>  1) stop the parser generating R_NaString from \"NA\"
>  2) Change PRINTNAME(R_NaString) to avoid ambiguity

While I still like the simple S-Plus model (""), Thomas's suggestions (with
PRINTNAME(R_NaString) = "<NA>" for example) would be OK too.  Thanks for
listening (again)!
-- 
                              -- David Brahm (brahm@alum.mit.edu)
"I write this letter not to nag nor to whine, but to prod." - Lisa Simpson
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Sat Mar 16 02:27:33 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 15 Mar 2002 20:27:33 -0600
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <3C923302.664FAE6A@bank-banque-canada.ca>
References: <Pine.LNX.4.31.0203151521070.25930-100000@gannet.stats> <3C923302.664FAE6A@bank-banque-canada.ca>
Message-ID: <20020316022733.GA23564@sonny.eddelbuettel.com>

On Fri, Mar 15, 2002 at 12:44:34PM -0500, Paul Gilbert wrote:
> Don't get me wrong, I think this is a problem in the Linux
> distributions, not in R.

Please don't generalise. Debian had 022 since at least 1995:

edd@sonny:~> grep umask /etc/skel/.[a-z]*
/etc/skel/.bash_profile:umask 022


Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Edwin@balpol.tudelft.nl  Sat Mar 16 14:40:33 2002
From: Edwin@balpol.tudelft.nl (Edwin@balpol.tudelft.nl)
Date: Sat, 16 Mar 2002 15:40:33 +0100 (MET)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual (PR#1387)
Message-ID: <200203161440.PAA18107@pubhealth.ku.dk>

Full_Name: Edwin
Version: 1.4.1
OS: SunOS/Solaris
Submission from: (NULL) (130.161.1.115)


When selecting an X11 visual on Solaris 2.7 with

X11(colortype="true")

a PseudoColor visual is actually created. (verified with xwininfo)

The system in question (like many UNIX workstations) has both Pseudo and
truecolor visual types available, however the default type points to an 8 plane
PseudoColor visual. 
Some applications look for the truecolor visual (netscape, acroread) and use it
when available. For others it needs to be explicitely requested (VNC viewer). R
seems to do neither and just goes with the default, even if a truecolor type is
requested.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar 16 18:12:29 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 16 Mar 2002 19:12:29 +0100 (MET)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual (PR#1388)
Message-ID: <200203161812.TAA18426@pubhealth.ku.dk>

On Sat, 16 Mar 2002 Edwin@balpol.tudelft.nl wrote:

> Full_Name: Edwin
> Version: 1.4.1
> OS: SunOS/Solaris
> Submission from: (NULL) (130.161.1.115)
>
>
> When selecting an X11 visual on Solaris 2.7 with
>
> X11(colortype="true")
>
> a PseudoColor visual is actually created. (verified with xwininfo)

Note that the help page does *not* say that this `selects a visual'. It
says it selects a `color model'.  One can use a model which differs from
the X11 visual class, but the default class and depth are always used.

This seems to be a misunderstanding of the `colortype' argument: there is
no argument to select a visual class.

> The system in question (like many UNIX workstations) has both Pseudo and
> truecolor visual types available, however the default type points to an 8 plane
> PseudoColor visual.

I believe that is unusual.  Sun Xservers allow you to set the default
visual on the command line: has the default been overridden?  Ours with
multiple visuals are selecting TrueColor, but it does say the default is
hardware-dependent.

> Some applications look for the truecolor visual (netscape, acroread) and use it
> when available. For others it needs to be explicitely requested (VNC viewer). R
> seems to do neither and just goes with the default, even if a truecolor type is
> requested.

As it does not say it will do anything else, this is not strictly a bug.
It needs someone with the problem to contribute an enhancement, perhaps
additional arguments to select the visual class and depth?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From conor@psy.uva.nl  Sat Mar 16 20:08:30 2002
From: conor@psy.uva.nl (conor@psy.uva.nl)
Date: Sat, 16 Mar 2002 21:08:30 +0100 (MET)
Subject: [Rd] promax (PR#1389)
Message-ID: <200203162008.VAA18574@pubhealth.ku.dk>

Full_Name: conor dolan
Version: 1.4.0
OS: windows98
Submission from: (NULL) (146.50.170.247)


On the basis of Lawley and Maxwell's explanation in Factor Analysis as a
Statistical Method (London: Butterworth, 1971), the following line in the promax
routine (library, mva):

attr(z, "covariance") <- crossprod(U)

should be 

attr(z, "covariance") <- solve(crossprod(U))

the attribute as calculated at present is the inverse correlation matrix. 
try following example:

# start example
l<-matrix(c(.8,.7,.6,0,0,0,0,0,0,.7,.8,.9),6,2)
y<-matrix(c(1,.4,.4,1),2,2)
s1<-l%*%y%*%t(l)
t<-diag(1,6)-diag(diag(s1))
s1<-s1+t
library(mva)
res1<-factanal(cov=s1,factors=2)
l1<-res1$loadings
# note: the parameter m is set to a relatively large value 
# to ensure that almost exact values are recovered (try m=20, and compare
results)
res2<-promax(l1,m=10)
y2<-attr(res2$loadings,"covariance")
print(" true common factor inter correlation matrix ")
print(y)
print(" attr designated `covariance` ")
print(y2)
print("inverse of latter ")
print(solve(y2))
# end example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Mar 16 21:06:49 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Sat, 16 Mar 2002 22:06:49 +0100 (MET)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual (PR#1390)
Message-ID: <200203162106.WAA18650@pubhealth.ku.dk>

On Sat, 16 Mar 2002 ripley@stats.ox.ac.uk wrote:

> On Sat, 16 Mar 2002 Edwin@balpol.tudelft.nl wrote:
>
>
> > The system in question (like many UNIX workstations) has both Pseudo and
> > truecolor visual types available, however the default type points to an 8 plane
> > PseudoColor visual.
>
> I believe that is unusual.  Sun Xservers allow you to set the default
> visual on the command line: has the default been overridden?  Ours with
> multiple visuals are selecting TrueColor, but it does say the default is
> hardware-dependent.
>

As another data point: The Sun workstation that I had a couple of years
ago had this setup as well, and I'm fairly sure that the defaults hadn't
been overridden, but I seem to remember that I raised this issue back then
and no-one else reported a similar problem.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Mar 16 21:06:09 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Sat, 16 Mar 2002 13:06:09 -0800 (PST)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual
 (PR#1388)
In-Reply-To: <200203161812.TAA18426@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203161302530.183056-100000@homer01.u.washington.edu>

On Sat, 16 Mar 2002 ripley@stats.ox.ac.uk wrote:

> On Sat, 16 Mar 2002 Edwin@balpol.tudelft.nl wrote:
>
>
> > The system in question (like many UNIX workstations) has both Pseudo and
> > truecolor visual types available, however the default type points to an 8 plane
> > PseudoColor visual.
>
> I believe that is unusual.  Sun Xservers allow you to set the default
> visual on the command line: has the default been overridden?  Ours with
> multiple visuals are selecting TrueColor, but it does say the default is
> hardware-dependent.
>

As another data point: The Sun workstation that I had a couple of years
ago had this setup as well, and I'm fairly sure that the defaults hadn't
been overridden, but I seem to remember that I raised this issue back then
and no-one else reported a similar problem.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From E.Velds@balpol.tudelft.nl  Sat Mar 16 21:08:50 2002
From: E.Velds@balpol.tudelft.nl (E.Velds@balpol.tudelft.nl)
Date: Sat, 16 Mar 2002 22:08:50 +0100 (MET)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual(PR#1387)
Message-ID: <200203162108.WAA18671@pubhealth.ku.dk>

ripley@stats.ox.ac.uk wrote:
> 
> On Sat, 16 Mar 2002 Edwin@balpol.tudelft.nl wrote:
> 
> > Full_Name: Edwin
> > Version: 1.4.1
> > OS: SunOS/Solaris
> > Submission from: (NULL) (130.161.1.115)
> >
> >
> > When selecting an X11 visual on Solaris 2.7 with
> >
> > X11(colortype="true")
> >
> > a PseudoColor visual is actually created. (verified with xwininfo)
> 
> Note that the help page does *not* say that this `selects a visual'. It
> says it selects a `color model'.  One can use a model which differs from
> the X11 visual class, but the default class and depth are always used.
> 
> This seems to be a misunderstanding of the `colortype' argument: there is
> no argument to select a visual class.

Not as much a misunderstanding, but more considered as closely related.

> 
> > The system in question (like many UNIX workstations) has both Pseudo and
> > truecolor visual types available, however the default type points to an 8 plane
> > PseudoColor visual.
> 
> I believe that is unusual.  Sun Xservers allow you to set the default
> visual on the command line: has the default been overridden?  Ours with
> multiple visuals are selecting TrueColor, but it does say the default is
> hardware-dependent.

It *can* be set as default, but on all of the Suns and most of the SGIs
I work with, it isn't. And I don't have the ability to change that
unfortunately. And there's an added problem that the truecolor visuals
in 2D are very slow compared to the pseudocolor, which makes it
undesireable to have the truecolor as default.

> 
> > Some applications look for the truecolor visual (netscape, acroread) and use it
> > when available. For others it needs to be explicitely requested (VNC viewer). R
> > seems to do neither and just goes with the default, even if a truecolor type is
> > requested.
> 
> As it does not say it will do anything else, this is not strictly a bug.
> It needs someone with the problem to contribute an enhancement, perhaps
> additional arguments to select the visual class and depth?
> 

I wondered about whether to file this as a bug and I reasoned that when
selecting a colour mode which is incompatible with the created visual,
there is something wrong. It does seem logical that the driver would try
to get the best suited visual for the colour mode and that there would
be a warning if the colour mode can't be supported.

In any case, it would be a nice enhancement for graphics support.

Edwin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar 16 21:35:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 16 Mar 2002 22:35:41 +0100 (MET)
Subject: [Rd] promax (PR#1389)
Message-ID: <200203162135.WAA18704@pubhealth.ku.dk>

The line is no longer present. It was never documented to be what you are
guessing it to be.

On Sat, 16 Mar 2002 conor@psy.uva.nl wrote:

> Full_Name: conor dolan
> Version: 1.4.0
> OS: windows98
> Submission from: (NULL) (146.50.170.247)
>
>
> On the basis of Lawley and Maxwell's explanation in Factor Analysis as a
> Statistical Method (London: Butterworth, 1971), the following line in the promax
> routine (library, mva):
>
> attr(z, "covariance") <- crossprod(U)
>
> should be
>
> attr(z, "covariance") <- solve(crossprod(U))
>
> the attribute as calculated at present is the inverse correlation matrix.
> try following example:
>
> # start example
> l<-matrix(c(.8,.7,.6,0,0,0,0,0,0,.7,.8,.9),6,2)
> y<-matrix(c(1,.4,.4,1),2,2)
> s1<-l%*%y%*%t(l)
> t<-diag(1,6)-diag(diag(s1))
> s1<-s1+t
> library(mva)
> res1<-factanal(cov=s1,factors=2)
> l1<-res1$loadings
> # note: the parameter m is set to a relatively large value
> # to ensure that almost exact values are recovered (try m=20, and compare
> results)
> res2<-promax(l1,m=10)
> y2<-attr(res2$loadings,"covariance")
> print(" true common factor inter correlation matrix ")
> print(y)
> print(" attr designated `covariance` ")
> print(y2)
> print("inverse of latter ")
> print(solve(y2))
> # end example
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Mar 18 08:51:35 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Mon, 18 Mar 2002 08:51:35 +0000
Subject: [Rd] Thought on crossprod
References: <Pine.LNX.4.31.0203151701340.26291-100000@gannet.stats>
Message-ID: <3C95AA97.D677DDDC@durham.ac.uk>

ripley@stats.ox.ac.uk wrote:
> 
> On Fri, 15 Mar 2002, Thomas Lumley wrote:
> 
> > On Fri, 15 Mar 2002, Martin Maechler wrote:
> >
> > > >>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
> > >
> > >     JonR> does not recognise the case where y is the same as x as special.  I'd
> > >     JonR> like to extend crossprod to something like
> > >
> > >     >> crossprod
> > >     JonR> function(x, y = NULL)
> > >     JonR> if (is.null(y))
> > >     JonR>    .Internal(crossprod.symm(x))
> > >     JonR> else
> > >     JonR>    .Internal(crossprod(x, y))
> > >
> > >     JonR> Before I start mesing up my R-1.4.1 installation, does anyone have any
> > >     JonR> thoughts on this?
> > >
> > > Just for clarification:
> > > The main point of your suggestion is to pass only half as much
> > > data down to C, right?
> > >
> >
> > If this can be done with the BLAS functions then halving the necessary
> > memory bandwidth will also help -- that's one of the limiting factors in
> > ATLAS, for example.
> 
> Looks like dsyrk can do this: despite the definition of *sy* BLAS routines
> on my quick reference card it does not need a symmetric matrix, which is
> why I overlooked it in earlier correspondence with Jonathan.  As from
> 1.5.0 dsyrk will be available in R.

Sorry -- I've been away for the weekend.  My intention in the original
post was not to save on memory but simply to do half as many
inner-products (it seems inelegant not to exploit the symmetry!).  I had
not thought about losing the benefit of an optimised BLAS (I am not
using one myself at present).  I take it from this correspondence that,
for now, my best approach might be to write my own "crossprod.symm" in
C, but that this might actually slow me down in the future.

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 18 08:58:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 18 Mar 2002 08:58:44 +0000 (GMT)
Subject: [Rd] Thought on crossprod
In-Reply-To: <3C95AA97.D677DDDC@durham.ac.uk>
Message-ID: <Pine.LNX.4.31.0203180852490.17211-100000@gannet.stats>

On Mon, 18 Mar 2002, Jonathan Rougier wrote:

[...]

> Sorry -- I've been away for the weekend.  My intention in the original
> post was not to save on memory but simply to do half as many
> inner-products (it seems inelegant not to exploit the symmetry!).  I had
> not thought about losing the benefit of an optimised BLAS (I am not
> using one myself at present).  I take it from this correspondence that,
> for now, my best approach might be to write my own "crossprod.symm" in
> C, but that this might actually slow me down in the future.

You really should investigate optimized BLASs before worrying about this.

I think the best approach is for us to modify crossprod to recognize the
symmetric case in 1.5.0 and call the appropriate BLAS routine.
Or, at least do so for real (not complex) inputs on IEEE-compliant
machines (which we believe all current R platforms are).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 18 10:16:37 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 18 Mar 2002 10:16:37 +0000 (GMT)
Subject: [Rd] Thought on crossprod
In-Reply-To: <Pine.LNX.4.31.0203180852490.17211-100000@gannet.stats>
Message-ID: <Pine.GSO.4.44.0203181008440.11450-100000@auk.stats>

On Mon, 18 Mar 2002 ripley@stats.ox.ac.uk wrote:

> On Mon, 18 Mar 2002, Jonathan Rougier wrote:
>
> [...]
>
> > Sorry -- I've been away for the weekend.  My intention in the original
> > post was not to save on memory but simply to do half as many
> > inner-products (it seems inelegant not to exploit the symmetry!).  I had
> > not thought about losing the benefit of an optimised BLAS (I am not
> > using one myself at present).  I take it from this correspondence that,
> > for now, my best approach might be to write my own "crossprod.symm" in
> > C, but that this might actually slow me down in the future.
>
> You really should investigate optimized BLASs before worrying about this.
>
> I think the best approach is for us to modify crossprod to recognize the
> symmetric case in 1.5.0 and call the appropriate BLAS routine.
> Or, at least do so for real (not complex) inputs on IEEE-compliant
> machines (which we believe all current R platforms are).

Some data (on an old Sun):

A <- matrix(rnorm(500*500), 500)

without extra BLAS
> system.time(B <- crossprod(A, A))
[1] 7.21 0.02 7.31 0.00 0.00

with ATLAS
> system.time(B <- crossprod(A,A))
[1] 1.01 0.00 1.02 0.00 0.00

after adding the symmetric case
> system.time(B <- crossprod(A))
[1] 0.74 0.00 0.75 0.00 0.00

A <- matrix(rnorm(500*500), 5000)
without extra BLAS
> system.time(B <- crossprod(A,A))
[1] 0.83 0.00 0.85 0.00 0.00

with ATLAS
>  system.time(B <- crossprod(A,A))
[1] 0.15 0.00 0.17 0.00 0.00

using symmetry
>  system.time(B <- crossprod(A))
[1] 0.15 0.00 0.16 0.00 0.00

So the potential gains are minor compared to using an optimized BLAS.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Mon Mar 18 21:26:25 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Mon, 18 Mar 2002 16:26:25 -0500
Subject: [Rd] Missing zlib.h and zconf.h in R-devel/src/main
Message-ID: <15510.23425.252658.366764@gargle.gargle.HOWL>

Hi all,

When I tried to "make" R-devel (3/18) on Solaris 2.6, I got this error:
  In file included from dounzip.c:28:
  unzip.h:49: zlib.h: No such file or directory
  dounzip.c:365: zlib.h: No such file or directory
  make[3]: *** [dounzip.o] Error 1
  make[3]: Leaving directory `/home/a215020/Xperiment/R-devel/src/main'

So I went into R-devel/src/main and made two symbolic links:
  ln -s ../extra/zlib/zlib.h .
  ln -s ../extra/zlib/zconf.h .
and then it worked.

   I understand R-devel is never guaranteed to be complete, but I thought you
might want to know...
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From htang@hpl.hp.com  Tue Mar 19 01:29:14 2002
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Tue, 19 Mar 2002 02:29:14 +0100 (MET)
Subject: [Rd] levels(f)<-list doesn't work as expected when list is longer than nlevels(f) (PR#1394)
Message-ID: <200203190129.CAA29194@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.4.1
OS: Linux
Submission from: (NULL) (192.6.19.190)


Hi all,

   When renaming the levels of a factor f using levels(f)<-list(...), if the
list is longer than the original number of levels in f, the result is wrong.

Example:

> f <- factor(c("a","b"))

> levels(f) <- list(C="C", A="a", B="b")

Warning message: 
number of items to replace is not a multiple of replacement length 

> f
[1] C A
Levels:  C A 

The answer should be something like

[1] A B
Levels:  C A B

Thanks,
Hsiu-Khuern Tang.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@niwa.cri.nz  Tue Mar 19 05:11:52 2002
From: mh.smith@niwa.cri.nz (mh.smith@niwa.cri.nz)
Date: Tue, 19 Mar 2002 06:11:52 +0100 (MET)
Subject: [Rd] mgp parameter in par() (PR#1395)
Message-ID: <200203190511.GAA29496@pubhealth.ku.dk>

Full_Name: Murray H Smith
Version: 1.4.1
OS: Windows 2000
Submission from: (NULL) (202.36.29.1)


The mgp parameter in par() does not allow negative values. That is, it does not
allow plots with axes ticks and labels inside the plot. The help document,
Introduction to R, under Graphics: Axes and tick marks, specifically mentions
negative values for mgp as a way to achieve internal ticks and labels. 

Code:
> par(mgp=c(-3,-1,0))
Error in par(mgp = c(-3, -1, 0)) : invalid value specified for graphics
parameter "mgp"

> par(mgp=c(3,-1,0))
Error in par(mgp = c(3, -1, 0)) : invalid value specified for graphics parameter
"mgp".

> par(mgp=c(3,1,-1))
Error in par(mgp = c(3, 1, -1)) : invalid value specified for graphics parameter
"mgp".

> par(mgp=c(-3,1,0))
Error in par(mgp = c(-3, 1, 0)) : invalid value specified for graphics parameter
"mgp".






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fgfgf@we.cv  Tue Mar 19 11:44:37 2002
From: fgfgf@we.cv (fgfgf@we.cv)
Date: Tue, 19 Mar 2002 12:44:37 +0100 (MET)
Subject: [Rd] =?big5?Q?=AB=A2=B9=C6 =B3=CC=AA=F1=A6n=B6=DC=3F=3F=3F=3F=3F=3F=3F=3F?= rmJ4DQRldwFQR1v
Message-ID: <Fj4JOEGLwu@ibm.com>

ªÅ¤ù§åµo»ù4.99¤¸°_¦A°e¥d³qvcd©Î­^¤å±Ð¾Ç³nÅé

°âëä¼wÀu­±ªÅ¤ù,¸g´ú¸Õ¤£¨}²v2%¥ª¥k 
²M·¡ªºªÅ¤ù¤À¯Å¡A
µ´¤£®³B·íA¡A®³C·íB¶RªÅ¤ù¤]­n¬Ý»s³y¼t¡A¤j¼t¥X³f«~½è«Oµý¡A¬Ò¥i24¼g
¨C±i¤u¼t§åµo»ù4.99¤¸°_,¦Û¨ú´N°e¥d³qvcd©Î­^¤å±Ð¾Ç³nÅé!!!!!
¶R¤­¦Ê¦A°e¥®±Ðvcd©Î­^¤å±Ð¾Ç³nÅé°e§¹¬°¤î 
¥®±Ðvcd ¥d³qvcd©Î­^¤å±Ð¾Ç³nÅé¨C±i¯S´f»ù49¤¸
¤Å¦^«H½Ð¥H¿ËÁ{¥»©±©Î¹q¸ÜÁpµ¸ ¥¼±µÅ¥½Ð¯d¨¥©Îµy«á¦A¼·
0939099572 ÁÂ¥ý¥Í

°ª«~½èªÅ¥ÕªÅ¥Õ¥úºÐ¤ù±M·~§åµo 

¥t¦³¦U«~µP CD-RªÅ¥Õ¤ù§C»ù¨ÑÀ³¡A«~½è«OÃÒ¡G 

             °ê¤ºªÅ¤ù¤j¼t³ø»ù
 ¤ù¦W       ¤u¼t    µ¥¯Å   ¤ùºØ       ¦Ê¤ù³ø»ù       
¢i¢i¢i¢i¢i¢i¢i¢i¢i¢«ëä¼w±M°Ï¢¨¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i
TDK        ëä¼w74¤À  S    ¤ôÂÅ¤ù       (850) 
RICOH      ëä¼w74¤À  S    ¥Õª÷¤ù       (800) 
RIDATA     ëä¼w      A    ¤ôÂÅ¤ù       (699) 
TGK        ëä¼w      A    ¤ôÂÅ¤ù       (599) 
MEGADATE   ëä¼w      A    ¤ôÂÅ¤ù       (680) 
SUMMER     ëä¼w      A    ¥Õª÷¤ù       (680) 
KGB        ëä¼w80¤À  A    ¤ôÂÅ¤ù       (499) 
¥ú¨~       ëä¼w      A    ¥Õª÷¤ù       (600)        
¢i¢i¢i¢i¢i¢i¢i¢i¢i¢«¤¤Àô±M°Ï¢¨¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i
YAMAHA     ¤¤Àô80¤À  A+   ¥Õª÷¤ù       (699)        
PHILIPS    ¤¤Àô80¤À  A+   ¤ôÂÅ¤ù       (750)        
PHILIPS    ¤¤Àô80¤À  A+   ¥Õª÷¤ù       (750)
GKN        ¤¤Àô80¤À  A+   ¤ôÂÅ¤ù       (699) 
GKN        ¤¤Àô80¤À  A+   ¥Õª÷¤ù       (699)
JJKL       ¤¤Àô80¤À  A+   ¤ôÂÅ¤ù       (599)        
JJKL       ¤¤Àô80¤À  A+   ¥Õª÷¤ù       (599)        
KAFULLY    ¤¤Àô80¤À  A    ¥Õª÷¤ù       (499) 



µù1: ´«¤ù½Ð¿í¦u¥H¤U¤T¤j­ì«h¡G
¡@1)¤£¥i¥Hµ²§À(CLOSE)¡A´N¬ODIR¬Ý¤£¨ì¦³¥ô¦ó¸ê®Æ
  2)¤£¥i¥H¦b¤ù¤l¤W¶î¶î¼g¼g
  3)¤£¥i¥H¦³ÄY­«¿i·l
> µù2: ¥H¤W³ø»ù¬Ò¥¼§tÀç·~µ|5%;
>      

> 
> ¥H¤W°Ó«~¡A´±¼Ð¥X¨Ó´N¬O¦³³f!!µ´«D¨S³f¦b¶Ã¥«³õªº!! 
> Åwªï¸g¾P°Ó¤Î¶T©ö°Óªø´Á°t¦X!!!!! 
> Åwªï¦U¾÷Ãö¡B¤½¥q¦æ¸¹¡B¾Ç®Õ³æ¦ì­qÁÊ¡A¥i¶}µo²¼³ø±b!! 
> Åwªï¶T©ö°Ó,½L°Ó,©±®a¨Ó¹q¸ß»ù 
> 
> ¤£º¡·N»ù¿ú ,Åwªï¥´¹q¸Ü¸ß°Ý,Åwªï±þ»ù 
> ¸ò§Ú½æªº¸Ü¦n¥Î«~½è¤£¿ù ½ÐÀ°§Ú¤¶²ÐªB¤Í¨Ó¶R 
> °µªÅ¤ù·å²«¥i´««Oµý¡A 
> Åý§A¶Rªº¦w¤ß,¥Îªº¦w¤ß,¤£¥Î¾á¤ß¶R¤FªÅ¤ù«o§ä¤£¨ì½æ¥D 
> §Ú­Ìªº©v¦®¬O,±M·~,¿Ë¤Á,¹D¼w 
> Åý®ø¶OªÌ¥H¦X²zªº»ù®æ®³¨ì¦n«~½èªº¥úºÐ¤ù 
> ¦W§»¨t¦CªÅ¤ù¤u¼tª½Àç¡A¤@¤À¿ú¥i¥H¶R¨ì¨â¤À³f­ò!! 
2.¥~°e
> ¾P°â¤èªk¬O¥H¥~°eªA°Èª½±µ­±¹ï®ø¶OªÌªº¡C 
> ¶RªÅ¥Õ¤ù´NÀ°«È¤á°e¨ì©²¬O§Ú­Ìªº°í«ù 
>
¥~°eªA°ÈÁöµM²Ö¤H¦ý¬Ý¨ì·R¥ÎªÌªº¨}¦n¦^À³¡C¦A²Ö³£¬O­È±oªº¡C
> ¥þ¬Ù¦U¦a¥i¶l±H¡B³f¹B¡B¥N¦¬³f»ù¨ì©² 
> ¦W§»¥~°e¸ß°Ý­q³f±M½u 0939099572 ÁÂ¥ý¥Í
> (¤G¤Q¥|¤p®ÉªA°È) 
> 
> ¥t¦b¥H¤U¦aÂI¥i±M¤H°e³f¦Û¨ú
> 1.¥x¥_¦a°Ï¦Û¨ú¦aÂI: ­q³f±M½u 0939099572 ÁÂ¥ý¥Í(24H) 
> 
> ·s©± ²H¤ô(²H¤j) ¤hªL(¦ÊÄÖ¾ô) ©Ó¼w¸ô(³Á·í³Ò) 
> ¤¤©M ¥Ã©M ¥úµØ ªO¾ô(µØ¦¿¾ô) ©µ¥­¥_¸ô¤T­«(¤¤§µ¾ô)
> Ãö´ç
> ¬õ¾ðªL 
> ¤TªÛ(·s®H) ¤ì¬](¬F¤j) ¤½À](¥x¤j) ¤­ªÑ(¦¨®õ¸ô) 
> Äª¬w(¤T¥Á°ê¤¤) ®v¤j ´º¬ü ¤jº~¾ô¦Û¨ú 
> 
> 
> 2.°ª¶¯¦a°Ï¦Û¨ú¦aÂI: ­q³f±M½u 0939099572 ÁÂ¥ý¥Í(24H) 
> 
> NOVA «Ø°ê°Ó³õ ¶¶µo3C Ä_¼Ö¤û±ÆÀ] ¤jµØ¹´À¸°| ¦y¬ü¦Ê³f
> ³Ò¤u¤½¶é ¥Á±Ú¤j¼Ö ¥úµØ¤j¼Ö 
>
¥H¤U¦U³Á·í³Ò¬Ò¥i(¤å¤Æ¤¤¤ßªù¥«,¤E¦p¥æ¬y¹Dªù¥«,¶§©ú¸ôªù¥«,¼á²M´òªù¥«,
> ÆQÑL°Ï¤­ºÖ¸ôªù¥«,°ªÂåªù¥«,»ñ¤sªù¥«,¥ªÀçªù¥«) 

¥H¤U¾Ç®Õ¬Ò¥i°e³f(¤¤¤s¤j¾Ç,°ª®v¤j,¸q¦u¤j¾Ç,¶¯¤¤,¹D©ú,ªþ¤¤,»ñ¤¤,
´_µØ,¥¿­×,¤åÄ¦,°ª¶¯¤u±M,¶¯°Ó,¤T«H,°ê»Ú,¾ð¼w) 

3.¥x«n¦a°Ï¦Û¨ú¦aÂI: ­q³f±M½u 0939099572 ÁÂ¥ý¥Í(24H) 

¥_ªù°Ó³õ ¦¨¤j¤j¾Ç¸ô³Á·í³Ò ¤¤¥¿¸ô³Á·í³Ò
¤p¥_©]¥«³Á·í³Ò
·s¥ú¦Ê³f³Á·í³Ò ¨}¬ü¦Ê³f®Ç¤pÃM¤h
°·±d¸ô¤T¬P©]¥«®ÇªÖ¼w°ò
¤¤µØªF¸ôÀé©[®ÇªÖ¼w°ò
¥H¤U¾Ç®Õ¬Ò¥i°e³f¦¨¤j,±X¤s,«n¥x,¤¤µØÂå±M,
«n¤@¤¤,«n¤G¤¤)
 
4.¥x¤¤,¹ü¤Æ¦a°Ï¦Û¨ú¦aÂI:­q³f±M½u 0939099572
 ÁÂ¥ý¥Í(24H) 

¥x¤¤¨®¯¸³Á·í³Ò ¹ü¤Æ¨®¯¸³Á·í³Ò ­ûªL¶Àª÷«Ò°ê¦Ê³f
ªá¾Â¤¤¤s¸ô³Á·í³Ò ³À´ä¼q¤f¥x¤¤¨®¯¸ 

³{¥Ò³Á·í³Ò ³{¥Ò³Á·í³Ò 
¥H¤U¾Ç®Õ¬Ò¥i°e³f(ªF®ü,³{¥Ò,ÀR©y,¹ü®v¤j,¤j¸­,¤¤¤@¤¤) 
 
5.®ç¦Ë­]¦a°Ï¦Û¨ú¦aÂI:­q³f±M½u 0939099572 ÁÂ¥ý¥Í(24H)
 
±M¤H°e³f!!!!!!!


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Tue Mar 19 14:17:19 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Tue, 19 Mar 2002 15:17:19 +0100 (CET)
Subject: [Rd] Small typo in An Introduction to R
In-Reply-To: <x28z94zfch.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.33L2.0203191506430.2390-100000@localhost.localdomain>


At a snail's pace I keep on translating an introduction to R into italian;
I have reached the section describing the glm() function, in which some
example code is presented. The very last line of code, before the
beginning of the section on Poisson models is:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fmp)); c(ldp, ldl)

which of course gives results 43.663 and 43.663; the correct code should
be:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fml)); c(ldp, ldl)

which gives the expected results 43.663 and 43.601

-- 
Michele Alzetta

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Mar 19 17:43:38 2002
From: rossini@u.washington.edu (Anthony Rossini)
Date: Tue, 19 Mar 2002 09:43:38 -0800 (PST)
Subject: [Rd] Question re:S4 classes and design; clashing classes?
Message-ID: <Pine.LNX.4.43.0203190943380.28638@hymn08.u.washington.edu>

Thanks to Duncan's recent work on SJava, I've got a (so far) stable
platform to put together the R-Orca interface (dynamic graphics,
including brushing, subseting, etc).  While the first version will be
looking at installation issues and study basic user interfaces for providing a  
few working examples, it will be important for this particular package to look  at how one integrates a "toolkit" at the user-level with other R libraries.

The obvious place (to me, at least initially) to look is at how the S4
classes might be used for this.

However, I'm having a heck of a time wrapping my head around the
proper design for this.

Here is the general issue:

For "normal data objects" with standard data views (i.e. class of
grand tours, etc), I can simply setMethod on the standard data views,
i.e.

setMethod("grandtour","dataframe", ...)  # standard unstructured grand tour
setMethod("grandtour","Surv", ... )      # tour, restricting temporal data,
                                         # handling survival

etc.  I'm fine on this, and have an acceptable sense of what I'd like
to do here.  Note that here, I'm talking about visualizations that
currently exist, not that might be written for such data.  This is in
fact the first step beyond the package I'm currently finishing up.

For the third version (beyond the initial package and beyond the initial methods version of the package), I've got a second class of objects,
i.e. the data views (possibly customized themselves), which I'd like
to think about.  In particular, I'd like to be able to extend/subclass
"grandtour", for example, to regular ("nice") longitudinal and
spatio-temporal data, i.e. classify the methods, not just the data
being acted on by the methods.

I think I'm missing something really obvious here, and I suspect it is
related to using too many object-oriented systems (I'm more used to
Python's, right now, for example; but even with Java, there is a sense
of balance between methods and data within a class).  Thinking about
it more, I guess I'm not clear on the path or approach that S4 classes
use for inheritance and for contractual negotiation.

Here's the example that I'm using as a basis for thinking about design:

I've got a grandtour object which has slots for Data, Colors (a vector
used for subsetting from brushes -- one can color points in orca or
from R, this being the first approach for it), as well as Guidance (at
this point, merely a string, but will be classed for robustness and
extensibility at somepoint).

At the first step, this is for a single sample.  Now, I'd like to
extend this to problems where one variable is fixed (i.e. TIME, in the
longitudinal or time-series problem, or GROUP, in the correlated data
setting).  So we've got, in a sense, the multiple inheritance problem.
I'd like to be able to inherit from both the Orca object as well as
the data library object.

In other OO systems, I'd subclass grandtour, probably using multiple
inheritance, and modify only the methods which change (or to
paraphrase the Java approach, use interfaces for the orca toolkit, and
classes for the data libraries).  For example, I might want to try a
different visualization for survival data, and only want to change the
display in some way (not the brushing/colors or guidance methods).
I'd like to be able to "rerun" numerical analyses on potentially
interesting subsets, or possibly even predict from current fit models,
and have the required objects be part of the orca object.

Orca objects could have associated methods: dumpPipeline, buildPipeline, brush/selectData, getData, setData, addPipe, rmPipe.  In particular, the Data methods will need to use S4 data objects.

Do I simply extend the data classes to add slots for visualization and the requisite parameters and subclass from existing R libraries?  (i.e. add slots for both parameters and dispatched functions). 

Is there a better approach to approaching this problem (which should
be phrased as: "I've got more than one set of initial classes to build from; what might be the preferred approach to extend"?)

I think I'm missing something from reading John's Green book.  If
anyone has pointers to pages/sections I need to read much more
carefully, I'd be grateful to hear them!

(note: I know a number of approaches for how I can implement it, but I
don't have a good enough sense of S4 class design intentions to pick
any of them as being "reasonably faithful" to good S4 design).

best,
-tony


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rechung@aol.com  Tue Mar 19 20:50:05 2002
From: rechung@aol.com (rechung@aol.com)
Date: Tue, 19 Mar 2002 21:50:05 +0100 (MET)
Subject: [Rd] truehist (MASS) nbins problem (PR#1396)
Message-ID: <200203192050.VAA07111@pubhealth.ku.dk>

Full_Name: Robert Chung
Version: 1.4.1
OS: Windows 98
Submission from: (NULL) (212.198.0.94)


If I try to use the nbins="FD" argument to truehist, I get an 
error that says nclass.fd can't be found. If I edit the 
truehist function to look for nclass.FD the function works 
as I expect.

An example:
> x <- rnorm(100)
> library(mass)
> truehist(x,nbins="scott")  # This works
> truehist(x,nbins="FD")     # This doesn't
Error in switch(casefold(nbins), scott = nclass.scott(data), "freedman-diaconis"
= ,  : 
        couldn't find function "nclass.fd"
> ?nclass.fd  
Error in help("nclass.fd") : No documentation for `nclass.fd' in specified
packages and libraries:
  you could try `help.search("nclass.fd")'
> ?nclass.FD  # this finds the proper help page


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Tue Mar 19 21:15:47 2002
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: 19 Mar 2002 16:15:47 -0500
Subject: [Rd] should lapply preserve attributes?
Message-ID: <1016572547.29959.23.camel@keittlab-6>

I have an application where I need to preserve object attributes across
calls to 'lapply'. The current definition is:

lapply <- function (X, FUN, ...) 
{
    FUN <- match.fun(FUN)
    if (!is.list(X)) 
        X <- as.list(X)
    rval <- .Internal(lapply(X, FUN))
    names(rval) <- names(X)
    return(rval)
}

Would it make sense to replace

	names(rval) <- names(X)

with

	attributes(rval) <- attributes(X)

?? I can, of course, make a local function for this, but wondered if
this change would be useful in general.

Cheers,
Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 19 21:31:35 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Mar 2002 21:31:35 +0000 (GMT)
Subject: [Rd] should lapply preserve attributes?
In-Reply-To: <1016572547.29959.23.camel@keittlab-6>
Message-ID: <Pine.GSO.4.44.0203192128260.24417-100000@auk.stats>

On 19 Mar 2002, Timothy H. Keitt wrote:

> I have an application where I need to preserve object attributes across
> calls to 'lapply'. The current definition is:
>
> lapply <- function (X, FUN, ...)
> {
>     FUN <- match.fun(FUN)
>     if (!is.list(X))
>         X <- as.list(X)
>     rval <- .Internal(lapply(X, FUN))
>     names(rval) <- names(X)
>     return(rval)
> }
>
> Would it make sense to replace
>
> 	names(rval) <- names(X)
>
> with
>
> 	attributes(rval) <- attributes(X)
>
> ?? I can, of course, make a local function for this, but wondered if
> this change would be useful in general.

No, it would be positively harmful.  X might be a data frame, or a time
series .., but rval is only guaranteed to be the same length as X.  If you
know more, adjust the object returned by lapply.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Tue Mar 19 22:29:03 2002
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: 19 Mar 2002 17:29:03 -0500
Subject: [Rd] should lapply preserve attributes?
In-Reply-To: <Pine.GSO.4.44.0203192128260.24417-100000@auk.stats>
References: <Pine.GSO.4.44.0203192128260.24417-100000@auk.stats>
Message-ID: <1016576943.30316.43.camel@keittlab-6>

On Tue, 2002-03-19 at 16:31, Prof Brian D Ripley wrote:
> On 19 Mar 2002, Timothy H. Keitt wrote:
> >
> > Would it make sense to replace
> >
> > 	names(rval) <- names(X)
> >
> > with
> >
> > 	attributes(rval) <- attributes(X)
> >
> > ?? I can, of course, make a local function for this, but wondered if
> > this change would be useful in general.
> 
> No, it would be positively harmful.  X might be a data frame, or a time
> series .., but rval is only guaranteed to be the same length as X.  If you
> know more, adjust the object returned by lapply.
> 

Yes, nevermind. Ah, tiredness... I realized that's not what I meant
after hitting "send" (and that Brian would catch it before I could reply
to my own email! ;-).

What I want is to apply a function to a list of objects and have the
attributes of the objects copied to the resulting list items, e.g.,

out <- lapply(list(ts1=ts(1:10), ts2=ts(1:5)), sample)

and have 'out' be a list of time series instead of attributeless
vectors. Obviously the solution is to make a function that both permutes
the values and copies the attributes as well.

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hyu@stats.uwo.ca  Wed Mar 20 03:50:40 2002
From: hyu@stats.uwo.ca (hyu@stats.uwo.ca)
Date: Wed, 20 Mar 2002 04:50:40 +0100 (MET)
Subject: [Rd] solve() benchmark in R-1.4.1 (PR#1397)
Message-ID: <200203200350.EAA07993@pubhealth.ku.dk>

Full_Name: Hao Yu
Version: R-1.4.1
OS: Windows and Linux
Submission from: (NULL) (129.100.242.16)


I just report what I find for the solve() function when I was doing benchmark.

A specific function Toeplitz is used as following 
"Toeplitz" <- function(x)
{
        matrix(x[1 + abs(outer(seq(along = x), seq(along = x), FUN = "-"))], 
                byrow = T, ncol = length(x))
}

A. On a dual  PIII 1GHz Xeon Linux Redhat 7.2 (R-1.4.1 is recompiled to create
libR.so. No change to other settings. All libraries come with redhat.)
*****************************************************
> system.time(solve(matrix(rnorm(1000000),nrow=1000)))
[1] 35.04  0.30 35.33  0.00  0.00
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 53.28  0.43 53.69  0.00  0.00
*****************************************************
B. On a PIII-M 1.2GHz laptop running Windows Xp Pro (download binary R from
CRAN)
*****************************************************
> system.time(solve(matrix(rnorm(1000000),nrow=1000)))
[1] 28.18  0.05 28.24    NA    NA
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 33.80  0.03 34.14    NA    NA
*****************************************************
C. On a PIII 1.125GHz desktop Windows 2k (Download binary R from CRAN)
*****************************************************
> system.time(solve(matrix(rnorm(1000000),nrow=1000)))
[1] 32.31  0.14 36.37    NA    NA
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 36.45  0.16 40.84    NA    NA
*****************************************************


Clearly solve() does a random matrix inverse faster than a positive definite and
symmetric matrix (covariance matrix). I do not think the results (inverses) are
wrong. But it is odd regarding the timing for solve(). Using solve.Matrix() from
the package Matrix, I got almost identical timings (it fails to identify
positive definite and symmetric matrices). 

Thanks
Hao Yu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jan.wiener@tuebingen.mpg.de  Wed Mar 20 08:07:34 2002
From: jan.wiener@tuebingen.mpg.de (jan.wiener@tuebingen.mpg.de)
Date: Wed, 20 Mar 2002 09:07:34 +0100 (MET)
Subject: [Rd] barplots & ylim (PR#1398)
Message-ID: <200203200807.JAA08835@pubhealth.ku.dk>

hi,
when having a barplot one might wants to start the y-axis at some 
certain value (besides 0).

e.g.

x <- c(4,5,6,7)
barplot(x, ylim=c(3,8))


as you can see, the bars are plotted below the limit specified by ylim.


jan wiener



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From matthias.piksa@web.de  Wed Mar 20 12:41:38 2002
From: matthias.piksa@web.de (matthias.piksa@web.de)
Date: Wed, 20 Mar 2002 13:41:38 +0100 (MET)
Subject: [Rd] RMySQL integer range bug (PR#1400)
Message-ID: <200203201241.NAA12502@pubhealth.ku.dk>

Full_Name: Matthias Piksa
Version: 1.4.1
OS: Redhat 7.1 2.96-85
Submission from: (NULL) (131.220.6.43)


There is a bug when retrieving values out of MySQL (3.23.36) which are of type
UNSIGNED INTEGER(10). The values can vary between 0 and 2^32 but R only accepts
those below 2^31-1. Anything above goes as 2^31-1.

thats what one gets:
print(quickSQL(con,"select ip_dst from iphdr where ip_dst>=2212233216 limit
5"))
      ip_dst
1 2147483647
2 2147483647
3 2147483647
4 2147483647
5 2147483647

and thats what the numbers really are (conversion to character type first):
print(quickSQL(con,"select concat(ip_dst) from iphdr where ip_dst>=2212233216
limit 5"))
  concat(ip_dst)
1     2212234077
2     2212234085
3     2212234085
4     2212234085
5     2212234086

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dj@research.bell-labs.com  Wed Mar 20 14:55:24 2002
From: dj@research.bell-labs.com (David James)
Date: Wed, 20 Mar 2002 09:55:24 -0500
Subject: [Rd] RMySQL integer range bug (PR#1400)
In-Reply-To: <200203201241.NAA12502@pubhealth.ku.dk>; from matthias.piksa@web.de on Wed, Mar 20, 2002 at 01:41:38PM +0100
References: <200203201241.NAA12502@pubhealth.ku.dk>
Message-ID: <20020320095524.A20541@jessie.research.bell-labs.com>


--82I3+IH0IqGh5yIs
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

Hi,

matthias.piksa@web.de wrote:
> Full_Name: Matthias Piksa
> Version: 1.4.1
> OS: Redhat 7.1 2.96-85
> Submission from: (NULL) (131.220.6.43)
> 
> 
> There is a bug when retrieving values out of MySQL (3.23.36) which are of type
> UNSIGNED INTEGER(10). The values can vary between 0 and 2^32 but R only accepts
> those below 2^31-1. Anything above goes as 2^31-1.

Yes, that causes an overflow.  The attached patch to the file
RS-MySQL.c fixes the problem with unsigned integers, but it may not
be general enough -- I'll have to take a closer look for other cases.
By the way, you may notice that the largest unsigned integer in
MySQL is 4294967295, which may not be large enough for some IP
addresses (your data appears to be IP address, if I'm not mistaken).

Thanks for the report,

--
David

> 
> thats what one gets:
> print(quickSQL(con,"select ip_dst from iphdr where ip_dst>=2212233216 limit
> 5"))
>       ip_dst
> 1 2147483647
> 2 2147483647
> 3 2147483647
> 4 2147483647
> 5 2147483647
> 
> and thats what the numbers really are (conversion to character type first):
> print(quickSQL(con,"select concat(ip_dst) from iphdr where ip_dst>=2212233216
> limit 5"))
>   concat(ip_dst)
> 1     2212234077
> 2     2212234085
> 3     2212234085
> 4     2212234085
> 5     2212234086
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636

--82I3+IH0IqGh5yIs
Content-Type: text/plain; charset=us-ascii
Content-Description: RMySQL_0.4-3.patch
Content-Disposition: attachment; filename="RMySQL_0.4-3.patch"

494d493
<     case FIELD_TYPE_LONG:            /* 4-byte INTEGER   */
495a495,501
>       break;
>     case FIELD_TYPE_LONG:            /* 4-byte INTEGER   */
>       /* if unsigned, turn into numeric (may be too large for ints/long)*/
>       if(select_dp[j].flags & UNSIGNED_FLAG)
>         flds->Sclass[j] = NUMERIC_TYPE;
>       else
>         flds->Sclass[j] = INTEGER_TYPE;

--82I3+IH0IqGh5yIs--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Wed Mar 20 15:21:48 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed, 20 Mar 2002 10:21:48 -0500
Subject: [Rd] Question re:S4 classes and design; clashing classes?
References: <Pine.LNX.4.43.0203190943380.28638@hymn08.u.washington.edu>
Message-ID: <3C98A90C.484269EB@research.bell-labs.com>

It wasn't entirely clear what your design goals were, but the general
question of comparing functional method languages (S, CLOS, Dylan) and
OOP languages (Java, etc) is of much interest to me, so here are some
general comments.  Maybe we can then iterate on your example, with or
without r-devel.

The basic difference in approach is easy to state:

 Functional languages define methods based on the function and a
signature (a list matching classes to formal arguments);  OOP languages
attach all methods to a class definition.

The distinction becomes relevant if a function does "multiple dispatch";
that is, defining methods that depend on more than one argument.  (In
that sense, S3 methods made no use of the functional nature of the
language.)

If, say, f(x, y) only has methods that depend on x, then it's just
syntactic sugar, and a matter of organization, that distinguishes the
functional form f(x, y) from an OOP-style form, say x$f(y).  

(That's a slight exaggeration, because the functional language model
thinks that "f" should mean something similar regardless of the class of
x, where in OOP you could define the method in a totally inconsistent
way.)

In that sense, I read your description as essentially OOP.  You talk of
"Orca objects having methods", but in a functional language the question
is how the functions that do the computation depend on the objects that
are their arguments.

Nothing wrong with the OOP view, but it means that your question goes
more to how, and if, the underlying R code uses functions.  If it's just
basically an interface to an OOP definition, then it can stay in that
form.  (And I'd like to discuss in separate mail using the Omegahat OOP
package to formalize the R side.)

Functional methods would become relevant if the R software involved
multiple objects.  Not knowing the innards of how things work, let me
make up an example.

If the current view included, say, an object describing a wireframe that
was displayed around the points, then one might have useful classes of
wireframe objects, then a function that stepped the display to the next
view could have methods that depended on both the current data and the
wireframe:
  step(data, wireframe)
(Definitely not asserting this is a relevant example, but perhaps the
general distinction is clear.)

John


Anthony Rossini wrote:
> 
> Thanks to Duncan's recent work on SJava, I've got a (so far) stable
> platform to put together the R-Orca interface (dynamic graphics,
> including brushing, subseting, etc).  While the first version will be
> looking at installation issues and study basic user interfaces for providing a
> few working examples, it will be important for this particular package to look  at how one integrates a "toolkit" at the user-level with other R libraries.
> 
> The obvious place (to me, at least initially) to look is at how the S4
> classes might be used for this.
> 
> However, I'm having a heck of a time wrapping my head around the
> proper design for this.
> 
> Here is the general issue:
> 
> For "normal data objects" with standard data views (i.e. class of
> grand tours, etc), I can simply setMethod on the standard data views,
> i.e.
> 
> setMethod("grandtour","dataframe", ...)  # standard unstructured grand tour
> setMethod("grandtour","Surv", ... )      # tour, restricting temporal data,
>                                          # handling survival
> 
> etc.  I'm fine on this, and have an acceptable sense of what I'd like
> to do here.  Note that here, I'm talking about visualizations that
> currently exist, not that might be written for such data.  This is in
> fact the first step beyond the package I'm currently finishing up.
> 
> For the third version (beyond the initial package and beyond the initial methods version of the package), I've got a second class of objects,
> i.e. the data views (possibly customized themselves), which I'd like
> to think about.  In particular, I'd like to be able to extend/subclass
> "grandtour", for example, to regular ("nice") longitudinal and
> spatio-temporal data, i.e. classify the methods, not just the data
> being acted on by the methods.
> 
> I think I'm missing something really obvious here, and I suspect it is
> related to using too many object-oriented systems (I'm more used to
> Python's, right now, for example; but even with Java, there is a sense
> of balance between methods and data within a class).  Thinking about
> it more, I guess I'm not clear on the path or approach that S4 classes
> use for inheritance and for contractual negotiation.
> 
> Here's the example that I'm using as a basis for thinking about design:
> 
> I've got a grandtour object which has slots for Data, Colors (a vector
> used for subsetting from brushes -- one can color points in orca or
> from R, this being the first approach for it), as well as Guidance (at
> this point, merely a string, but will be classed for robustness and
> extensibility at somepoint).
> 
> At the first step, this is for a single sample.  Now, I'd like to
> extend this to problems where one variable is fixed (i.e. TIME, in the
> longitudinal or time-series problem, or GROUP, in the correlated data
> setting).  So we've got, in a sense, the multiple inheritance problem.
> I'd like to be able to inherit from both the Orca object as well as
> the data library object.
> 
> In other OO systems, I'd subclass grandtour, probably using multiple
> inheritance, and modify only the methods which change (or to
> paraphrase the Java approach, use interfaces for the orca toolkit, and
> classes for the data libraries).  For example, I might want to try a
> different visualization for survival data, and only want to change the
> display in some way (not the brushing/colors or guidance methods).
> I'd like to be able to "rerun" numerical analyses on potentially
> interesting subsets, or possibly even predict from current fit models,
> and have the required objects be part of the orca object.
> 
> Orca objects could have associated methods: dumpPipeline, buildPipeline, brush/selectData, getData, setData, addPipe, rmPipe.  In particular, the Data methods will need to use S4 data objects.
> 
> Do I simply extend the data classes to add slots for visualization and the requisite parameters and subclass from existing R libraries?  (i.e. add slots for both parameters and dispatched functions).
> 
> Is there a better approach to approaching this problem (which should
> be phrased as: "I've got more than one set of initial classes to build from; what might be the preferred approach to extend"?)
> 
> I think I'm missing something from reading John's Green book.  If
> anyone has pointers to pages/sections I need to read much more
> carefully, I'd be grateful to hear them!
> 
> (note: I know a number of approaches for how I can implement it, but I
> don't have a good enough sense of S4 class design intentions to pick
> any of them as being "reasonably faithful" to good S4 design).
> 
> best,
> -tony
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Mar 20 20:00:52 2002
From: rossini@u.washington.edu (Anthony Rossini)
Date: Wed, 20 Mar 2002 12:00:52 -0800 (PST)
Subject: [Rd] Question re:S4 classes and design; clashing classes?
In-Reply-To: <3c98a90c.484269eb@research.bell_labs.com>
Message-ID: <Pine.LNX.4.43.0203201200520.640@hymn02.u.washington.edu>

On Wed, 20 Mar 2002, John Chambers wrote:

> It wasn't entirely clear what your design goals were, but the general
> question of comparing functional method languages (S, CLOS, Dylan) and
> OOP languages (Java, etc) is of much interest to me, so here are some
> general comments.  Maybe we can then iterate on your example, with or
> without r-devel.

I'll keep it on r-devel until someone (anyone?) screams.  I suspect it might be useful, at least for a bit.
 
> The basic difference in approach is easy to state:
> 
>  Functional languages define methods based on the function and a
> signature (a list matching classes to formal arguments);  OOP languages
> attach all methods to a class definition.

I'll try to clarify the issues by typing through them, and then provide the problem I'd like to address, which was ill-stated in my last email. 

Issues:

1. I've got an object oriented toolkit which constructs visualization pipelines (i.e. sets of views connected in a data processing network).  These are constructed using a OOP paradigm, realized in Java, with the goal being flexible additions of new (higher level) interactive visualizations for exploration (of both data as well as visualization approaches).

2. I really want to connect this with an interactive data analysis language.  S (via R) is a no-brainer, in this respect.  However, it's a functional programming language.

3. I'd like to do so in such as way to play off of the strengths of both approaches (I'll label one, "the computing with data approach", and the second, the "OOP" approach). 

4. Note that there are two intertwined goals, here.  First, I'd like to be able to use the strengths of S, in the sense of being able to provide the right thing for the right set of inputs, (i.e. "plot" does the right thing).   So I'd like to continue to have this interactive strength.  Second, I'd like to be able to develop new visualizations rapidly, by subclassing, to use the strengths of Java and the flexibility of the classes that we designed for Orca.

So this leads me to pose the following hypothesis:  Since I'm thinking (in the OOP approach) of visualizations as subclassing numerical summaries (this could be controversial, but those who know me understand where I'm coming from), I'd also like to be able to "intertwine" the extensibility approaches.  For me, this would mean being able to build visualization summaries on top of the numerical summaries, as well as be able to provide a "feedback loop" in the sense of being able to apply numerical methods both to visualization objects (with resulting changes to visualization) as well as to subsets of the data extracted from various points of the visualization pipeline.  I'm rambling, but in a sense, I'm thinking of a possibly cyclic graph in the sense of the original ViSta workmaps, which would provide some form of audit-trail and reproducibility as needed.

> The distinction becomes relevant if a function does "multiple dispatch";
> that is, defining methods that depend on more than one argument.  (In
> that sense, S3 methods made no use of the functional nature of the
> language.)

Exactly.  Since I'm considering S4 methods, this is critical.  Especially since I'd like to do some form of interplay, if possible.

> In that sense, I read your description as essentially OOP.  You talk of
> "Orca objects having methods", but in a functional language the question
> is how the functions that do the computation depend on the objects that
> are their arguments.

This is what I'm trying to understand -- i.e. how to do both, in a flexible and extensible manner, from the R command line.

> Nothing wrong with the OOP view, but it means that your question goes
> more to how, and if, the underlying R code uses functions.  If it's just
> basically an interface to an OOP definition, then it can stay in that
> form.  (And I'd like to discuss in separate mail using the Omegahat OOP
> package to formalize the R side.)

Please do.  I'm busy, but it would help to ground my thinking about this general problem.

> Functional methods would become relevant if the R software involved
> multiple objects.  Not knowing the innards of how things work, let me
> make up an example.
> 
> If the current view included, say, an object describing a wireframe that
> was displayed around the points, then one might have useful classes of
> wireframe objects, then a function that stepped the display to the next
> view could have methods that depended on both the current data and the
> wireframe:
>   step(data, wireframe)
> (Definitely not asserting this is a relevant example, but perhaps the
> general distinction is clear.)

I'm not sure.  I think that what I'm trying to do is to explore the possibility of systems integration at the user-level.  

So, what I'd like is to be able to do is more like (note that this is a fake example, while the components are there, it isn't quite there yet):

grandTour(x)

setMethod("grandtour","matrix", 
          function(x) { gt <- .JNew(org.orca.viz.grandtour)
                        gt$initData(x)})

Note that the grandtour class is a pipeline of lots of things.  So, I'd like to do something similar with time series, so that:

setMethod("grandtour","ts",
          function(x) {gt <- .JNew(org.orca.viz.grandtour)
                       gt$insertPipe(knownLocation,
                            .JNew(org.omegahat.compiler( new presentation 
                                               code in Java)))
                       gt$initData(x)})

While it looks like I'm answering my own question -- Duncan and John have provided all the technology I need to work it out today, in a sense I'd like to have a tighter means for building the code in the second .JNew statement, i.e. the compiler code.

I could simply provide a functional mapping over, but then I seem to lose (Duncan, correct me if wrong) the advantage of understanding the Java interfaces and classes.  Yes, I can hack it out.  Yes I am hacking it out.  But it doesn't have the right aesthetic feel to it.

Now, to provide more context - we can treat as a constant, the knownLocation (it is either fixed or can be discovered via introspection).  What I'd like to be able to do is more like:

.JNew(subclass(org.orca.viz.grandtour)$setfinalDisplayPipe(TimeSeriesDisplayPipe))

i.e. something like: subclass the grandtour, replacing the finalDisplay pipe to be a TimeSeriesDisplayPipe

Note that Orca examples do look sort of functional-like (since we construct DAGs for the visualization pipeline).  So this would just mean that we need to replace a componentPipe (or insert a new componentPipe between two others).

Now, for a part that is incomplete for me; I still need to think through what I want with:

y <- grandtour(as.matrix(x))

Here, y will be the link to the grandtour, to the original data, and to any subsetted data pieces.

So, while I could let y be a closure/list of components to work with, another possibility, which "might" be useful, is for y to both represent the R "matrix" class (for data operations), as well as the Java "orca" class (for visualization extension operations).

best,
-tony




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Thu Mar 21 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Mar 2002 07:15:03 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200203210615.g2L6F3l06225@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1244 *
Subject: possible bug in det using method="qr"
From: armin@approximity.com
Date: Sat, 5 Jan 2002 01:48:13 +0100 (MET)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1257 *
Subject: documentation of `las' on `par' help page
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Fri, 11 Jan 2002 12:30:20 +0100
* PR# 1323 *
Subject: bug in options() - help page
From: Ole Christensen <o.christensen@lancaster.ac.uk>
Date: Sat, 23 Feb 2002 16:56:56 +0000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1398 *
Subject: barplots & ylim
From: Jan Malte Wiener <jan.wiener@tuebingen.mpg.de>
Date: Wed, 20 Mar 2002 09:06:57 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

* PR# 1331 *
Subject: Bug in glm.fit?
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Wed, 27 Feb 2002 16:15:24 +0800 (WST)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1283 *
Subject: max/min of NULL gives MININT/MAXINT instead of -INF/+INF
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 14:36:52 -0500
--this was on purpose (type preserving); R 1.4.1 at least documents this
--We currently plan to return -/+ Inf from 1.5.0 on		-- MMä
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
* PR# 1330 *
Subject:  itemize/item crashes R CMD check 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Tue, 26 Feb 2002 15:13:04 -0500
* PR# 1397 *
Subject: solve() benchmark in R-1.4.1
From: hyu@stats.uwo.ca
Date: Wed, 20 Mar 2002 04:50:38 +0100 (MET)
* PR# 1399 *
Subject: Have a good Lady Day
From: "t.lockx" <t.lockx@liftoff.nl>
Date: Wed, 20 Mar 2002 06:04:37 -0600
* PR# 1400 *
Subject: RMySQL integer range bug
From: matthias.piksa@web.de
Date: Wed, 20 Mar 2002 13:41:37 +0100 (MET)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Thu Mar 21 07:47:56 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Thu, 21 Mar 2002 08:47:56 +0100 (MET)
Subject: [Rd] Small typo in An Introduction to R (PR#1402)
Message-ID: <200203210747.IAA17526@pubhealth.ku.dk>

At a snail's pace I keep on translating an introduction to R into italian;
I have reached the section describing the glm() function, in which some
example code is presented. The very last line of code, before the
beginning of the section on Poisson models is:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fmp)); c(ldp, ldl)

which of course gives results 43.663 and 43.663; the correct code should
be:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fml)); c(ldp, ldl)

which gives the expected results 43.663 and 43.601

-- 
Michele Alzetta




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Thu Mar 21 07:48:49 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Thu, 21 Mar 2002 08:48:49 +0100 (MET)
Subject: [Rd] Small typo in An Introduction to R (PR#1403)
Message-ID: <200203210748.IAA17548@pubhealth.ku.dk>

At a snail's pace I keep on translating an introduction to R into italian;
I have reached the section describing the glm() function, in which some
example code is presented. The very last line of code, before the
beginning of the section on Poisson models is:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fmp)); c(ldp, ldl)

which of course gives results 43.663 and 43.663; the correct code should
be:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fml)); c(ldp, ldl)

which gives the expected results 43.663 and 43.601

-- 
Michele Alzetta




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Thu Mar 21 12:13:52 2002
From: ligges@amadeus.statistik.uni-dortmund.de (ligges@amadeus.statistik.uni-dortmund.de)
Date: Thu, 21 Mar 2002 13:13:52 +0100 (MET)
Subject: [Rd] legend - bug with argument angle (PR#1404)
Message-ID: <200203211213.NAA21145@pubhealth.ku.dk>

When legend() is used with the angle argument as follows, not only the
boxes beside the legend text, but also the whole legend box is filled
with shading lines.
I think this is not intended:

 plot(1:10)
 legend(8, 4, c("A", "B"), angle=c(10, 80), fill=NULL, density=20)


I'd suggest as a fix (legend.R of R-1.5.0):

25c25
<     rect2 <- function(left, top, dx, dy, ...) {
---
>     rect2 <- function(left, top, dx, dy, angle, ...) {
133c133
<     rect2(left, top, dx = w, dy = h, col = bg)
---
>     rect2(left, top, dx = w, dy = h, col = bg, angle = NULL)
141c141
<     rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill)
---
>     rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill, angle = angle)



Uwe Ligges

       _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1   [and 1.5.0]
year     2002           
month    01             
day      30             
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Mar 21 16:13:42 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Mar 2002 17:13:42 +0100 (MET)
Subject: [Rd] legend - bug with argument angle (PR#1404)
Message-ID: <200203211613.RAA24151@pubhealth.ku.dk>

>>>>> "UweL" == Uwe Ligges <ligges@amadeus.statistik.uni-dortmund.de> writes:

    UweL> When legend() is used with the angle argument as follows, not only the
    UweL> boxes beside the legend text, but also the whole legend box is filled
    UweL> with shading lines.
    UweL> I think this is not intended:

    UweL> plot(1:10)
    UweL> legend(8, 4, c("A", "B"), angle=c(10, 80), fill=NULL, density=20)


    UweL> I'd suggest as a fix (legend.R of R-1.5.0):

    UweL> 25c25
    UweL> <     rect2 <- function(left, top, dx, dy, ...) {
    UweL> ---
    >> rect2 <- function(left, top, dx, dy, angle, ...) {
    UweL> 133c133
    UweL> <     rect2(left, top, dx = w, dy = h, col = bg)
    UweL> ---
    >> rect2(left, top, dx = w, dy = h, col = bg, angle = NULL)
    UweL> 141c141
    UweL> <     rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill)
    UweL> ---
    >> rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill, angle = angle)

Thank you, Uwe!
The fix looks very reasonable and should make it to R-devel
soon.

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 21 16:25:35 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 21 Mar 2002 17:25:35 +0100
Subject: [Rd] Commas in formatC
In-Reply-To: <15503.38106.38626.976198@gargle.gargle.HOWL>
References: <15503.38106.38626.976198@gargle.gargle.HOWL>
Message-ID: <15514.2431.937670.625276@gargle.gargle.HOWL>

>>>>> "DavidB" == David Brahm <brahm@alum.mit.edu> writes:

    DavidB> formatC() is great for formatting numbers!  But it
    DavidB> would be even better if it could optionally insert
    DavidB> commas (or semicolons), e.g.

    R> formatC(1234567.89, digits=2, format="f", commas=T)
    DavidB> [1] "1,234,567.89"

    DavidB> Here's a snippet of code that does that, which could
    DavidB> more or less just be inserted into at the end of
    DavidB> formatC if any R-core guru were so inclined.  "r" is
    DavidB> the result so far, and "commas" is a logical flag:

    DavidB> stp <- regexpr("[0-9]+", r);  len <- attr(stp, "match.length")
    DavidB> if (commas && (maxl <- max(len)) > 3) for (i in seq(3, maxl-1, 3))
    DavidB> r[len>i] <- paste(substring(r[len>i], 1, (stp+len-1-i)[len>i]),
    DavidB> substring(r[len>i], (stp+len-i)[len>i]), sep=",")

Thank you, David, for the suggestion.

I'm looking at adding something quite a bit more general
to both format.default() and formatC(), using a new function
prettyNum() and using new arguments (that are compatible to S-plus'
format.default). 

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rdquest12@microsoft.com  Thu Mar 21 17:25:59 2002
From: rdquest12@microsoft.com (rdquest12@microsoft.com)
Date: Thu, 21 Mar 2002 18:25:59 +0100 (MET)
Subject: [Rd] Internet Security Update (PR#1405)
Message-ID: <200203211725.SAA24506@pubhealth.ku.dk>

This is a multi-part message in MIME format.
You should read this with client which 
supported MIME standard.

--NextPart_000235
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Thu Mar 21 21:00:42 2002
From: ligges@amadeus.statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 21 Mar 2002 22:00:42 +0100
Subject: [Rd] barplots & ylim (PR#1398)
References: <200203200807.JAA08835@pubhealth.ku.dk>
Message-ID: <3C9A49FA.7E1DC0F0@statistik.uni-dortmund.de>

jan.wiener@tuebingen.mpg.de wrote:
> 
> hi,
> when having a barplot one might wants to start the y-axis at some
> certain value (besides 0).
> 
> e.g.
> 
> x <- c(4,5,6,7)
> barplot(x, ylim=c(3,8))
> 
> as you can see, the bars are plotted below the limit specified by ylim.


The bug was already filed as bug report #1088 by Peter Whiting,
including the suggestion for a fix.
So far the fix looks reasonable, if the setting of xpd=TRUE is needed
anywhere [and cannot determined automatically by a smart piece of code].
I cannot imagine such a situation, can anyone tell me the reason why
par(xpd=TRUE) should be set (hard coded or as a default), please? Thank
you.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 22 08:02:06 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 22 Mar 2002 09:02:06 +0100 (MET)
Subject: [Rd] Inconsistencies in sum() (PR#1408)
Message-ID: <200203220802.JAA26660@pubhealth.ku.dk>

R 1.4.1

sum() tries to keep the result integer, although that is not
currently documented (and I am about to change it).

> x <- as.integer(2^30)
> x

1) inconsistent in warning or not:

> sum(x, x)
[1] NA
> sum(c(x, x))
[1] NA
Warning message:
Integer overflow in sum(.); use sum(as.numeric(.))

2) It's order-dependent:

> sum(0.0, x, x)
[1] 2147483648
> typeof(.Last.value)
[1] "double"
> sum(x, x, 0.0)
[1] NA
> typeof(.Last.value)
[1] "double"

I believe that it should calculate in integers only if *all* the
arguments are integers, that is behave like

> sum(c(x, x, 0.0))
[1] 2147483648


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Mar 22 08:13:57 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 22 Mar 2002 08:13:57 +0000
Subject: [Rd] Commas in formatC
References: <15503.38106.38626.976198@gargle.gargle.HOWL> <15514.2431.937670.625276@gargle.gargle.HOWL>
Message-ID: <3C9AE7C5.829F6629@durham.ac.uk>

Martin Maechler wrote:
> 
> >>>>> "DavidB" == David Brahm <brahm@alum.mit.edu> writes:
> 
>     DavidB> formatC() is great for formatting numbers!  But it
>     DavidB> would be even better if it could optionally insert
>     DavidB> commas (or semicolons), e.g.
> 
>     R> formatC(1234567.89, digits=2, format="f", commas=T)
>     DavidB> [1] "1,234,567.89"
> 
>     DavidB> Here's a snippet of code that does that, which could
>     DavidB> more or less just be inserted into at the end of
>     DavidB> formatC if any R-core guru were so inclined.  "r" is
>     DavidB> the result so far, and "commas" is a logical flag:
> 
>     DavidB> stp <- regexpr("[0-9]+", r);  len <- attr(stp, "match.length")
>     DavidB> if (commas && (maxl <- max(len)) > 3) for (i in seq(3, maxl-1, 3))
>     DavidB> r[len>i] <- paste(substring(r[len>i], 1, (stp+len-1-i)[len>i]),
>     DavidB> substring(r[len>i], (stp+len-i)[len>i]), sep=",")
> 
> Thank you, David, for the suggestion.
> 
> I'm looking at adding something quite a bit more general
> to both format.default() and formatC(), using a new function
> prettyNum() and using new arguments (that are compatible to S-plus'
> format.default).

Hi Martin,

Maybe this is a step in the wrong direction, but I actually like using C
string formatting, eg I would like to be able to type something like

  str <- stringC("The man called %s is %i feet tall", "Sven", 6)

which is also used in Python via the string formatting operator, '%'. 
Is this a possibility?

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Mar 22 11:15:20 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 22 Mar 2002 12:15:20 +0100
Subject: [Rd] Commas in formatC
In-Reply-To: <3C9AE7C5.829F6629@durham.ac.uk>
References: <15503.38106.38626.976198@gargle.gargle.HOWL>
 <15514.2431.937670.625276@gargle.gargle.HOWL>
 <3C9AE7C5.829F6629@durham.ac.uk>
Message-ID: <15515.4680.624272.966586@gargle.gargle.HOWL>

>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> Martin Maechler wrote:
    >>  >>>>> "DavidB" == David Brahm <brahm@alum.mit.edu>
    >> writes:
    >> 
    DavidB> formatC() is great for formatting numbers!  But it
    DavidB> would be even better if it could optionally insert
    DavidB> commas (or semicolons), e.g.
    >>
    R> formatC(1234567.89, digits=2, format="f", commas=T)
    DavidB> [1] "1,234,567.89"
    >>
    DavidB> Here's a snippet of code that does that, which could
    DavidB> more or less just be inserted into at the end of
    DavidB> formatC if any R-core guru were so inclined.  "r" is
    DavidB> the result so far, and "commas" is a logical flag:
    >>
    DavidB> stp <- regexpr("[0-9]+", r); len <- attr(stp,
    DavidB> "match.length") if (commas && (maxl <- max(len)) >
    DavidB> 3) for (i in seq(3, maxl-1, 3)) r[len>i] <-
    DavidB> paste(substring(r[len>i], 1, (stp+len-1-i)[len>i]),
    DavidB> substring(r[len>i], (stp+len-i)[len>i]), sep=",")
    >>  Thank you, David, for the suggestion.
    >> 
    >> I'm looking at adding something quite a bit more general
    >> to both format.default() and formatC(), using a new
    >> function prettyNum() and using new arguments (that are
    >> compatible to S-plus' format.default).

(in the mean time available in R-devel's snapshot of last night)


    JonR> Hi Martin,

    JonR> Maybe this is a step in the wrong direction, but I
    JonR> actually like using C string formatting, eg I would
    JonR> like to be able to type something like

    JonR>   str <- stringC("The man called %s is %i feet tall", "Sven", 6)

    JonR> which is also used in Python via the string formatting
    JonR> operator, '%'.  Is this a possibility?

of course. But just a ``nice to have'' possibility.
If we had it, I'd probably rather call it sprintf(.....) though.

This should be a nice exercise to solve with  .External()
{so we could switch it to .Internal(..) easily},
using C's  sprintf() -- the most tricky part might be to pass an
arbitrary number of arguments to sprintf().

Submissions are welcome... ;-)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Fri Mar 22 15:55:11 2002
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: 22 Mar 2002 10:55:11 -0500
Subject: [Rd] name spaces?
Message-ID: <1016812511.22201.19.camel@keittlab-6>

I'm revisiting the R/S DBI package and was wondering if there is any
plan to implement package name spaces in R/S. I've taken to the habit of
prepending a few characters to function names in packages to avoid
collisions, e.g., dbConnect(). An alternative would be DBI::connect()
(s/::/preferred/) which in some ways I find more pleasing. Not having
thought about it in detail, it seems pretty simple, except for backward
compatibility. Packages already load function defs into their own
environment. Keeping the name space seperate means simply not adding
that environment to the search path and using the package name as an
index into a name space lookup table, i.e., connect() looks in global
and DBI::connect() looks in the DBI package environment. One could then
have a use(DBI::connect) function that loads 'connect' into the global
name space, and a global option 'use.name.spaces' or something to change
the default behavior. (An alternate approach would be to use
DBI.connect() and add a switch to 'library' or global option that strips
off the 'DBI' prefix.) Anyway, it would help in nailing down the DBI
interface to know if some name space mechanism is in the works.

Cheers,
Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 22 17:01:20 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Mar 2002 18:01:20 +0100 (MET)
Subject: [Rd] Small typo in An Introduction to R (PR#1402)
Message-ID: <200203221701.SAA02447@pubhealth.ku.dk>

Thank you, Michele.

I've fixed it now.
Martin

>>>>> "Michele" == Michele Alzetta <mikalzet@libero.it> writes:

    Michele> At a snail's pace I keep on translating an
    Michele> introduction to R into italian; I have reached the
    Michele> section describing the glm() function, in which
    Michele> some example code is presented. The very last line
    Michele> of code, before the beginning of the section on
    Michele> Poisson models is:

    Michele> ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fmp)); c(ldp, ldl)

    Michele> ........ the correct code should    Michele> be:

    Michele> ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fml)); c(ldp, ldl)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 22 17:08:14 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Mar 2002 18:08:14 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200203221708.SAA02492@pubhealth.ku.dk>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Sat, 23 Feb 2002 o.christensen@lancaster.ac.uk
    BDR> wrote:
    >> Not all options listed on the help page for options() are
    >> set initially.  This should be said on the help page.

    BDR> Is it said that they are?

no, and of course you are right.
but I still have added a short sentence in the details section.
Closing this bug now.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 22 17:37:45 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Mar 2002 18:37:45 +0100 (MET)
Subject: [Rd] Rdconv -> HTML bug {was ... `las' on `par' help...} (PR#1257)
Message-ID: <200203221737.SAA02593@pubhealth.ku.dk>

>>>>> "Achim" == Achim Zeileis <zeileis@ci.tuwien.ac.at> writes:

    Achim> Just a small documentation bug: something went wrong
    Achim> for the description of the graphical parameter `las'
    Achim> on the HTML version of the `par' help page: `las' is
    Achim> missing and instead a line from the description is
    Achim> used. 

Danke, Achim.

Confirmed and still present in the current R-devel;
and as you say, it's only in the HTML version.

I'm quite sure it is only a bug in the underlying  Rdconv perl
script, probably a consequence of the nesting of \{..\} inside  \describe{..}.
The same things works e.g. in pretty.Rd.

   R CMD Rdconv --type=html par.Rd

still gives html with that line missing (and replaced by a wrong
one).


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 22 19:42:38 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Mar 2002 20:42:38 +0100 (MET)
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
Message-ID: <200203221942.UAA02846@pubhealth.ku.dk>

I found this tracing a bug when experimenting with a new sort()
function using match.arg().

It was triggered because mosaicplot.default(.) has an argument
called `sort' and calls itself the sort() function  in which I
was using match.arg()...

Here is (input for) a small clean example :

####  bad  match.arg() // sys.function() bug :
####  MM, 22.3.2002

callme <- function(a = 1, mm = c("Abc", "Bde")){
    mm <- match.arg(mm)
    cat("mm = "); str(mm)
    invisible()
}


## These are as desired
callme()
callme(mm="B")

mycaller <- function(x = 1, callme = pi) {
    callme(x)
}

mycaller()
##-> mm = NULL

## but should give "Abc !!

-------

Explanation :

 In match.arg(), there's
     formal.args <- formals(sys.function(sys.parent()))
 and you can check that  sys.function(sys.parent())
 gives the number pi instead of the the callme function !! :

debug(match.arg)
mycaller()
.....

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 22 22:39:10 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2002 23:39:10 +0100
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
In-Reply-To: <200203221942.UAA02846@pubhealth.ku.dk>
References: <200203221942.UAA02846@pubhealth.ku.dk>
Message-ID: <x2adt0448h.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> I found this tracing a bug when experimenting with a new sort()
> function using match.arg().
> 
> It was triggered because mosaicplot.default(.) has an argument
> called `sort' and calls itself the sort() function  in which I
> was using match.arg()...
> 
> Here is (input for) a small clean example :
> 
> ####  bad  match.arg() // sys.function() bug :
> ####  MM, 22.3.2002
> 
> callme <- function(a = 1, mm = c("Abc", "Bde")){
>     mm <- match.arg(mm)
>     cat("mm = "); str(mm)
>     invisible()
> }
> 
> 
> ## These are as desired
> callme()
> callme(mm="B")
> 
> mycaller <- function(x = 1, callme = pi) {
>     callme(x)
> }
> 
> mycaller()
> ##-> mm = NULL
> 
> ## but should give "Abc !!
> 
> -------
> 
> Explanation :
> 
>  In match.arg(), there's
>      formal.args <- formals(sys.function(sys.parent()))
>  and you can check that  sys.function(sys.parent())
>  gives the number pi instead of the the callme function !! :
> 
> debug(match.arg)
> mycaller()
> .....

This looks suspiciously like the same issue as PR#921. Did someone
have plans to change the context stack handling so that we could have
a "real" sys.function()? To quote my own followup to PR#921:

"The problem is that we only actually store the call in the context
structure, not the function, so sys.function has to grab the call,
take the 1st element, and reevaluate it in the parent frame."



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Sat Mar 23 18:01:33 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat, 23 Mar 2002 19:01:33 +0100 (MET)
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
Message-ID: <200203231801.TAA04756@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> I found this tracing a bug when experimenting with a new
    >> sort() function using match.arg().
    >> 
    >> It was triggered because mosaicplot.default(.) has an
    >> argument called `sort' and calls itself the sort()
    >> function in which I was using match.arg()...
    >> 
    >> Here is (input for) a small clean example :
    >> 
    >> #### bad match.arg() // sys.function() bug : #### MM,
    >> 22.3.2002
    >> 
    >> callme <- function(a = 1, mm = c("Abc", "Bde")){ mm <-
    >> match.arg(mm) cat("mm = "); str(mm) invisible() }
    >> 
    >> 
    >> ## These are as desired callme() callme(mm="B")
    >> 
    >> mycaller <- function(x = 1, callme = pi) { callme(x) }
    >> 
    >> mycaller() ##-> mm = NULL
    >> 
    >> ## but should give "Abc !!
    >> 
    >> -------
    >> 
    >> Explanation :
    >> 
    >> In match.arg(), there's formal.args <-
    >> formals(sys.function(sys.parent())) and you can check
    >> that sys.function(sys.parent()) gives the number pi
    >> instead of the the callme function !! :
    >> 
    >> debug(match.arg) mycaller() .....

    PD> This looks suspiciously like the same issue as
    PD> PR#921. Did someone have plans to change the context
    PD> stack handling so that we could have a "real"
    PD> sys.function()? To quote my own followup to PR#921:

    PD> "The problem is that we only actually store the call in
    PD> the context structure, not the function, so sys.function
    PD> has to grab the call, take the 1st element, and
    PD> reevaluate it in the parent frame."

hmm, bad news.  
but couldn't it try to do the equivalent of
    get(name, mode = "function")
instead of simply
    get(name)
?

[I think this *must* be fixed, at least we'd have to program
  around it in match.arg()]

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Mar 24 20:35:38 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 24 Mar 2002 15:35:38 -0500
Subject: [Rd] monthplot() in R?
Message-ID: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com>

The monthplot function in S is useful for plotting seasonal data.
It's not in base R or the ts package; is it in one of the contributed
packages?  (I've written a quick version for myself; if there isn't
one generally available already, I'll make it public somehow.)

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Sun Mar 24 22:01:06 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sun, 24 Mar 2002 23:01:06 +0100
Subject: [Rd] Rnews 2002/2
Message-ID: <15518.19619.318520.376886@mithrandir.hornik.net>

Dear package author,

We are now accepting submissions for the 2002/2 issue of the R
Newsletter.  For more information see

      http://cran.r-project.org/doc/Rnews/

If you are the author of a package on CRAN and you would like to promote
it a little bit, or if you simply have an interesting application using
R, we hope you can find some time to write a short article on it.  We
suggest that it be approximately 2 pages or less.  The idea of the
newsletter is that it be interesting to R users without being too
technical.  For example an article describing a package could begin by
briefly outlining the statistical background and go on to demonstrate
the usage on some typical data set.  Of course graphics are more than
welcome!

Bill Venables is also encouraging submissions to the more specialist
Programmer's Niche column.  In this case the technical level could be a
little higher, of course, but not necessarily: ingeniousness is the key.

Instructions for authors can be found in ``Writing Articles for R News''
in the first issue of Rnews.  Remember that submissions have to be in
LaTeX, and that graphics are preferred in PDF or EPS format.  (Bitmaps
like JPG are also OK but please keep in mind that those cannot be scaled
easily and hence might look ugly in the final version.)

The deadline for submissions is

	 May 17, 2002

Keep the contributions rolling in!

For the Editorial Board,
-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Sun Mar 24 20:36:11 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sun, 24 Mar 2002 21:36:11 +0100
Subject: [Rd] R on AIX
Message-ID: <15518.14523.141912.214609@mithrandir.hornik.net>

Two issues re R on AIX that came up in recent email exchange with Dan
Million <lio@hpss1.ccs.ornl.gov>:

* We currently use the Autoconf AC_AIX macro which essentially 'defines'
  _ALL_SOURCE on AIX.  According to Dan, on AIX one ends up with

	#define _ALL_SOURCE 1

  which follows Autoconf's general pattern, but causes a problem as the
  system headers (unconditionally?) have

	#define _ALL_SOURCE

  which gives a redefinition error.  Now the Autoconf source has

	AC_DEFUN([AC_AIX],
	[AH_VERBATIM([_ALL_SOURCE],
	[/* Define to 1 if on AIX 3.
	   System headers sometimes define this.
	   We just want to avoid a redefinition error message.  */

  etc ... noting the 'AIX 3' part, I am wondering if we need the macro
  at all.  Does anyone know?

* Dan also pointed me to 'run-time linking' vs the usual AIX style
  linking.  Using run-time linking one could simply do

       MAIN_LDFLAGS=-brtl
       SHLIB_LDFLAGS="-G"

  instead of the complicated import/export handling with AIX linking,
  and apparently also no longer need an export file?

  Dan says that run-time linking is available in AIX 4.2 or better, does
  anyone know more about this?  Should it perhaps be made the default if
  available?

Note that I have no access to AIX, hence need help ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Mon Mar 25 00:55:53 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Mon, 25 Mar 2002 01:55:53 +0100 (MET)
Subject: [Rd] Typos in R/src/library/base/man/hist.Rd (PR#1412)
Message-ID: <200203250055.BAA07288@pubhealth.ku.dk>

(Line numbers against current r-devel)

line 24: \item AN function to compute the number of cells.
  should be "a"

line 49: is to use the standard FOREGOUND color.}
  should be "foreground".


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Mar 25 08:36:33 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 25 Mar 2002 09:36:33 +0100
Subject: [Rd] monthplot() in R?
In-Reply-To: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com>
References: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com>
Message-ID: <15518.57745.596938.55703@gargle.gargle.HOWL>

>>>>> "Duncan" == Duncan Murdoch <dmurdoch@pair.com> writes:

    Duncan> The monthplot function in S is useful for plotting
    Duncan> seasonal data.  It's not in base R or the ts
    Duncan> package; is it in one of the contributed packages?
    Duncan> (I've written a quick version for myself; if there
    Duncan> isn't one generally available already, I'll make it
    Duncan> public somehow.)

yes; I've found this a missing feature occasionally myself.
If I remember properly, S' version built on the output of sabl()
whereas we'd need one building on stl() out --- if any at all.
As a matter of fact, I'd like a more general setup that does not
only work with periodicity 12.
monthplot() would then only be a compatibility wrapper calling
the more general function.

Note that Brian Ripley has recently added quite a few things to
`ts' in R-devel, including StructTS() for structured time-series
analysis which includes seasonality.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Mon Mar 25 08:40:23 2002
From: jago@mclink.it (Stefano Iacus)
Date: Mon, 25 Mar 2002 09:40:23 +0100
Subject: [Rd] system() function under OSX
Message-ID: <F2A50A71-3FCB-11D6-B953-003065CC4CB8@mclink.it>

Hy,

this is just to say that I have added the system() function to Carbon R. 
Of course, it will work only when R is launched under MacOS X.

Stefano

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 25 10:56:31 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 2002 11:56:31 +0100
Subject: [Rd] R-bugs outage
Message-ID: <x24rj47w68.fsf@blueberry.kubism.ku.dk>


Looks like someone or something turned off the machine that runs the
bugs.r-project.org website on Sunday (a glance at my floor seems to
disprove the hypothesis that the cleaners did it...). Physically
turning it on this morning seems to have normalized things. The email
interface runs on another machine and was unaffected.

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Mon Mar 25 12:38:58 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Mon, 25 Mar 2002 07:38:58 -0500 (EST)
Subject: [Rd] Re: R on AIX
In-Reply-To: <15518.14523.141912.214609@mithrandir.hornik.net>
Message-ID: <Pine.A41.4.44.0203250732250.29538-100000@hpss1.ccs.ornl.gov>

On Sun, 24 Mar 2002, Kurt Hornik wrote:

> Two issues re R on AIX that came up in recent email exchange with Dan
> Million <lio@hpss1.ccs.ornl.gov>:
>
> * We currently use the Autoconf AC_AIX macro which essentially 'defines'
>   _ALL_SOURCE on AIX.
>
>   ... I am wondering if we need the macro
>   at all.  Does anyone know?

I don't think you do (at least in AIX 4.2 and later).  Any code that
includes stdio.h or just about anything else is going to end up defining
_ALL_SOURCE via system headers, unless _XOPEN_SOURCE or _POSIX_SOURCE
are defined.

> * Dan also pointed me to 'run-time linking' vs the usual AIX style
>   linking.  Using run-time linking one could simply do
>
>        MAIN_LDFLAGS=-brtl
>        SHLIB_LDFLAGS="-G"
>
>   instead of the complicated import/export handling with AIX linking,
>   and apparently also no longer need an export file?
>
>   Dan says that run-time linking is available in AIX 4.2 or better, does
>   anyone know more about this?  Should it perhaps be made the default if
>   available?
>
> Note that I have no access to AIX, hence need help ...

If you use gcc, you still need the -Wl prefix to these options; e.g.:

	MAIN_LDFLAGS=-Wl,-brtl
	SHLIB_LDFLAGS=-Wl,-G

I did still use the exports file when I did the build.

As to when runtime linking is needed and when it isn't, I have no
definitive answers.  All I know is that everything worked when I used
runtime linking, and it did not work when I didn't.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Mon Mar 25 12:50:30 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Mon, 25 Mar 2002 06:50:30 -0600
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
In-Reply-To: <x2adt0448h.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Fri, Mar 22, 2002 at 11:39:10PM +0100
References: <200203221942.UAA02846@pubhealth.ku.dk> <x2adt0448h.fsf@blueberry.kubism.ku.dk>
Message-ID: <20020325065030.C7310@nokomis.stat.umn.edu>

On Fri, Mar 22, 2002 at 11:39:10PM +0100, Peter Dalgaard BSA wrote:
> maechler@stat.math.ethz.ch writes:
> 
> This looks suspiciously like the same issue as PR#921. Did someone
> have plans to change the context stack handling so that we could have
> a "real" sys.function()? To quote my own followup to PR#921:
> 
> "The problem is that we only actually store the call in the context
> structure, not the function, so sys.function has to grab the call,
> take the 1st element, and reevaluate it in the parent frame."
> 

I have it on my list but won't get to it for 1.5.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Mon Mar 25 13:57:26 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Mon, 25 Mar 2002 07:57:26 -0600
Subject: [Rd] name spaces?
In-Reply-To: <1016812511.22201.19.camel@keittlab-6>; from Timothy.Keitt@stonybrook.edu on Fri, Mar 22, 2002 at 10:55:11AM -0500
References: <1016812511.22201.19.camel@keittlab-6>
Message-ID: <20020325075726.E7310@nokomis.stat.umn.edu>

This is in the works and will hopefully make it into 1.5 or, more
likely at this point, 1.6.  A preliminary version is available at
http://www.stat.umn.edu/~luke/R/namespaces/morenames.html or off
the developer page http://developer.r-project.org.

We do not yet have a syntactic mechanism like DBI::connect for
referring to an exported variable from a package without explicitly
importing the variable, but we will probably add something along those
lines.

One change that is likely to happen as part of introducing name spaces
is that functions defined in base package will have .BaseNamespaceEnv
as their environment rather than .GlobalEnv.  Evaluating in this
environment means base is searched before the global environment and
attached packages.  As a result, variable assignments in loaded
packages and at top level will no longer shadow variables used within
the definition of base functions.  This will eliminate certain errors
of accidentally redefining things like pi that come up occasionally,
but will also make deliberate redefinition of functions in base harder
(not impossible, just harder).

In principle implementing name spaces is just a matter of using
environments as you describe, but there are a few complications.  One
is that with importing from one name space into another a variable can
in some sense exist in two environments at the same time, and what
this means needs to be resolved.  I've chosen the easy way out of
making variables in name spaces read-only (which is useful for other
reasons as well).  Another issue is that in R a closure can capture a
reference to a name space which can then be stored in a .Rdata file.
Making sure that sensible things happen when storing (_not_ writing
out the contents of the entire name space) and loading (attempting to
locate and load the right name space) makes things a bit tricky and
forces some compromises, but I think this is all mostly resolved.

luke

On Fri, Mar 22, 2002 at 10:55:11AM -0500, Timothy H. Keitt wrote:
> I'm revisiting the R/S DBI package and was wondering if there is any
> plan to implement package name spaces in R/S. I've taken to the habit of
> prepending a few characters to function names in packages to avoid
> collisions, e.g., dbConnect(). An alternative would be DBI::connect()
> (s/::/preferred/) which in some ways I find more pleasing. Not having
> thought about it in detail, it seems pretty simple, except for backward
> compatibility. Packages already load function defs into their own
> environment. Keeping the name space seperate means simply not adding
> that environment to the search path and using the package name as an
> index into a name space lookup table, i.e., connect() looks in global
> and DBI::connect() looks in the DBI package environment. One could then
> have a use(DBI::connect) function that loads 'connect' into the global
> name space, and a global option 'use.name.spaces' or something to change
> the default behavior. (An alternate approach would be to use
> DBI.connect() and add a switch to 'library' or global option that strips
> off the 'DBI' prefix.) Anyway, it would help in nailing down the DBI
> interface to know if some name space mechanism is in the works.
> 
> Cheers,
> Tim
> 
> -- 
> Timothy H. Keitt
> Department of Ecology and Evolution
> State University of New York at Stony Brook
> Stony Brook, New York 11794 USA
> Phone: 631-632-1101, FAX: 631-632-7626
> http://life.bio.sunysb.edu/ee/keitt/
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Mon Mar 25 14:33:14 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Mon, 25 Mar 2002 09:33:14 -0500
Subject: [Rd] monthplot() in R?
In-Reply-To: <15518.57745.596938.55703@gargle.gargle.HOWL>
References: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com> <15518.57745.596938.55703@gargle.gargle.HOWL>
Message-ID: <81du9ugn9kq7plt4g8l65s9ai83hgcio0c@4ax.com>

On Mon, 25 Mar 2002 09:36:33 +0100, you wrote in message
<15518.57745.596938.55703@gargle.gargle.HOWL>:

>>>>>> "Duncan" == Duncan Murdoch <dmurdoch@pair.com> writes:
>
>    Duncan> The monthplot function in S is useful for plotting
>    Duncan> seasonal data. 

>yes; I've found this a missing feature occasionally myself.
>If I remember properly, S' version built on the output of sabl()
>whereas we'd need one building on stl() out --- if any at all.
>As a matter of fact, I'd like a more general setup that does not
>only work with periodicity 12.
>monthplot() would then only be a compatibility wrapper calling
>the more general function.

Okay, I'll put something together.  I was also thinking of a more
general base function which would be called by monthplot.ts or
monthplot.stl.  The base function would show subsets of the time
series broken up according to arbitrary categories; for monthplot, the
categories would be the months.

Duncan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Mon Mar 25 14:53:37 2002
From: ligges@amadeus.statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 25 Mar 2002 15:53:37 +0100
Subject: [Rd] Re: [R] persp(): add second plane
References: <Pine.LNX.4.30.0203151003270.20916-100000@bolker.zoo.ufl.edu> <3C921E6F.BB81543B@statistik.uni-dortmund.de>
Message-ID: <3C9F39F1.4C9B9C6C@statistik.uni-dortmund.de>

Uwe Ligges wrote:
> 
> Ben Bolker wrote:
> >
> >   [forwarded to R-devel]
> >
> >   I'm most interested in integrating persp() and scatterplot3d() so that
> > we can (e.g.) easily draw graphs like response surfaces with associated
> > points (yes, there are serious questions about whether 3d perspective
> > plots are good general tools for data presentation, but there are some
> > places where it's really useful).  I can think of a bunch of quick hacks,
> > but I don't really know how an integrated system should be designed for
> > consistency and ease of use.
> 
> I think it's not possible to write an integrated system that uses the
> functions scatterplot3d() and persp() as they are. The straightforward
> way, from my point of view, is to write a new function (suggestions for
> a name?) along scatterplot3d()'s code, that uses persp() instead of
> scatterplot3d()'s own plot function in principle.
> 
> I'll volunteer to write such a function during the next months, but
> there are still some other points on my todo list (and I myself don't
> need such a function at present).

After some investigations:
I think for a really clean solution for plotting surfaces *and*
points/lines or other elements into a *perspective* 3D plot a redesign
of persp() is needed, or much better a whole 3D graphics system in R
(very similar to the existing 2D graphics system), but I don't have the
time to work on the latter.

Instead of the above mentioned solutions, I did a quick hack and added a
function s3d.persp() to the package scatterplot3d_0.3-10. This version
is *only* available at
http://www.statistik.uni-dortmund.de/leute/ligges.htm .
The function can plot points and other elements into surface plots.
Most of the code is stolen from persp() and scatterplot3d().
Bug (not so easy to fix, needs the redesign mentioned above): All
elements except the surface are plotted in front of the surface, even if
they shouldn't appear (i.e. located behind or below the surface).
I don't want to upload to CRAN until the function is not tested
extensively and as long it is heavily under development. Bug reports and
suggestions are welcome.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Mon Mar 25 15:37:05 2002
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Mon, 25 Mar 2002 16:37:05 +0100
Subject: [Rd] some problems with r 1.5.0 on win2k
References: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com> <15518.57745.596938.55703@gargle.gargle.HOWL> <81du9ugn9kq7plt4g8l65s9ai83hgcio0c@4ax.com>
Message-ID: <3C9F4421.AB4D3D2C@univie.ac.at>

i managed to build r-devel 1.5.0 on win2k 

during the build, i experienced the following problems:


1. Failure in make when starting from scratch
make in src/gnuwin fails at the first run because it tries to use
Rpwd.exe. It does, however, create Rpwd.exe before it fails.
Copying Rpwd.exe to a directory on the path the allows 
a complete pass through make.


2. Warning when building docs
make docs

(Function and Variable Index) [53] (R-lang.vrs [54]) Appendix A [55]
[56] )
(see the transcript file for additional information)
! pdfTeX warning (dest): name{Writing R documentation} has been
referenced but
does not exist, replaced by a fixed one

! pdfTeX warning (dest): name{Preface} has been referenced but does not
exist,
replaced by a fixed one

this might indicate some broken links in the pdf file.


3. Warning when building docs
D:\Work\R-devel\doc\manual>make -f Makefile.win info
makeinfo  -D UseExternalXrefs R-FAQ.texi
makeinfo  -D UseExternalXrefs R-admin.texi
makeinfo  -D UseExternalXrefs R-data.texi
makeinfo  -D UseExternalXrefs R-exts.texi
makeinfo  -D UseExternalXrefs R-intro.texi
R-intro.texi:781: warning: Info cannot handle `:' in index entry `:'.
makeinfo  -D UseExternalXrefs R-lang.texi

4. after installation:
Help -> R language (html)
starts mozilla 0.9.9 (which is the default browser on this machine),
but when i go to the search page and enter a search term,
the browser does NOT jump to any other page, it stays on the search
page.

p.s.:
gnuwin32/INSTALL
tells one to send messages to
R-windows@r-project.org
but mail sent there bounces




--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 25 16:50:25 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 25 Mar 2002 16:50:25 +0000 (GMT)
Subject: [Rd] some problems with r 1.5.0 on win2k
In-Reply-To: <3C9F4421.AB4D3D2C@univie.ac.at>
Message-ID: <Pine.LNX.4.31.0203251646410.6383-100000@gannet.stats>

On Mon, 25 Mar 2002, Erich Neuwirth wrote:

> i managed to build r-devel 1.5.0 on win2k
>
> during the build, i experienced the following problems:
>
>
> 1. Failure in make when starting from scratch
> make in src/gnuwin fails at the first run because it tries to use
> Rpwd.exe. It does, however, create Rpwd.exe before it fails.
> Copying Rpwd.exe to a directory on the path the allows
> a complete pass through make.

On all my machines its makes Rpwd.exe, and then spawns a separate make
which proceeds.  It should not fail.

> 3. Warning when building docs
> D:\Work\R-devel\doc\manual>make -f Makefile.win info
> makeinfo  -D UseExternalXrefs R-FAQ.texi
> makeinfo  -D UseExternalXrefs R-admin.texi
> makeinfo  -D UseExternalXrefs R-data.texi
> makeinfo  -D UseExternalXrefs R-exts.texi
> makeinfo  -D UseExternalXrefs R-intro.texi
> R-intro.texi:781: warning: Info cannot handle `:' in index entry `:'.
> makeinfo  -D UseExternalXrefs R-lang.texi

That's an incorrect warning from makeinfo 4.1.

> 4. after installation:
> Help -> R language (html)
> starts mozilla 0.9.9 (which is the default browser on this machine),
> but when i go to the search page and enter a search term,
> the browser does NOT jump to any other page, it stays on the search
> page.

That has worked for me, but I took that browser off as it was too flaky.

> p.s.:
> gnuwin32/INSTALL
> tells one to send messages to
> R-windows@r-project.org
> but mail sent there bounces

Well, it may work by release time.  The request to set up the address has
been made.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kss28@mail.cba.nau.edu  Mon Mar 25 20:18:59 2002
From: kss28@mail.cba.nau.edu (kss28@mail.cba.nau.edu)
Date: Mon, 25 Mar 2002 21:18:59 +0100 (MET)
Subject: [Rd] int 32 bit error on SPARC 64bit (PR#1415)
Message-ID: <200203252018.VAA13406@pubhealth.ku.dk>

Full_Name: Krassimir Sedmakov
Version: R-1.4.1
OS: Solaris 8
Submission from: (NULL) (134.114.165.52)


********
Problem:
********

When running make for R-1.4.1 on Solaris 8, SPARC 64 bit the following error
message is generated:

arithmetic.c:672: #error code requires that int have 32 bits
gmake[3]: *** [arithmetic.o] Error 1
gmake[3]: Leaving directory `/opt/R/R-1.4.1/src/main'
gmake[2]: *** [R] Error 2
gmake[2]: Leaving directory `/opt/R/R-1.4.1/src/main'
gmake[1]: *** [R] Error 1
gmake[1]: Leaving directory `/opt/R/R-1.4.1/src'
gmake: *** [R] Error 

*************
Related Code:
*************

***Related code in arithemtic.c file:

667  #ifndef INT_32_BITS
   668  /* configure checks whehter int is 32 bits.  If not this code will
   669     need to be rewritten.  Since 32 bit ints are pretty much universal,
   670     we can worry about writing alternate code when the need arises.
   671     To be safe, we signal a compiler error if int is not 32 bits. */
   672  # error code requires that int have 32 bits
   673  #else
   674  /* Just to be on the safe side, configure ought to check that the
   675     mashine uses two's complement. A define like
   676  #define USES_TWOS_COMPLEMENT (~0 == (unsigned) -1)
   677     might work, but at least one compiler (CodeWarrior 6) chokes on it.
   678     So for now just assume it is true.
   679  */

***Related code in configure file:

10871  if test "${ac_cv_sizeof_int}" = 4; then
10872    cat >> confdefs.h <<\EOF
10873  #define INT_32_BITS 1
10874  EOF
10875
10876  fi
10877  if test "${cross_compiling}" = yes; then
10878    warn_xcompile_sizeof_long="assuming C longs are 4 byte on ${host}"
10879    echo "configure: warning: ${warn_xcompile_sizeof_long}" 1>&2
10880  fi

*********
Solution:
*********
Run ./configure
Ignore warnings
in R-1.4.1/ directory create a file confdefs.h and enter (*see related configure
file)
#define INT_32_BITS 1
Run make
run make install



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 25 20:48:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 25 Mar 2002 21:48:35 +0100 (MET)
Subject: [Rd] int 32 bit error on SPARC 64bit (PR#1415)
Message-ID: <200203252048.VAA13486@pubhealth.ku.dk>

You haven't told us anything about your compilers.  You can set options to
make ints 64bits, and you must not for use with R.

This works correctly for me, using SunPro 6 compilers.

The configure script reports the size of ints, and if this is not 4 bytes,
change the options.  If it is 4 bytes, the correct option will be set.


On Mon, 25 Mar 2002 kss28@mail.cba.nau.edu wrote:

> Full_Name: Krassimir Sedmakov
> Version: R-1.4.1
> OS: Solaris 8
> Submission from: (NULL) (134.114.165.52)
>
>
> ********
> Problem:
> ********
>
> When running make for R-1.4.1 on Solaris 8, SPARC 64 bit the following error
> message is generated:
>
> arithmetic.c:672: #error code requires that int have 32 bits
> gmake[3]: *** [arithmetic.o] Error 1
> gmake[3]: Leaving directory `/opt/R/R-1.4.1/src/main'
> gmake[2]: *** [R] Error 2
> gmake[2]: Leaving directory `/opt/R/R-1.4.1/src/main'
> gmake[1]: *** [R] Error 1
> gmake[1]: Leaving directory `/opt/R/R-1.4.1/src'
> gmake: *** [R] Error
>
> *************
> Related Code:
> *************
>
> ***Related code in arithemtic.c file:
>
> 667  #ifndef INT_32_BITS
>    668  /* configure checks whehter int is 32 bits.  If not this code will
>    669     need to be rewritten.  Since 32 bit ints are pretty much universal,
>    670     we can worry about writing alternate code when the need arises.
>    671     To be safe, we signal a compiler error if int is not 32 bits. */
>    672  # error code requires that int have 32 bits
>    673  #else
>    674  /* Just to be on the safe side, configure ought to check that the
>    675     mashine uses two's complement. A define like
>    676  #define USES_TWOS_COMPLEMENT (~0 == (unsigned) -1)
>    677     might work, but at least one compiler (CodeWarrior 6) chokes on it.
>    678     So for now just assume it is true.
>    679  */
>
> ***Related code in configure file:
>
> 10871  if test "${ac_cv_sizeof_int}" = 4; then
> 10872    cat >> confdefs.h <<\EOF
> 10873  #define INT_32_BITS 1
> 10874  EOF
> 10875
> 10876  fi
> 10877  if test "${cross_compiling}" = yes; then
> 10878    warn_xcompile_sizeof_long="assuming C longs are 4 byte on ${host}"
> 10879    echo "configure: warning: ${warn_xcompile_sizeof_long}" 1>&2
> 10880  fi
>
> *********
> Solution:
> *********
> Run ./configure
> Ignore warnings
> in R-1.4.1/ directory create a file confdefs.h and enter (*see related configure
> file)
> #define INT_32_BITS 1
> Run make
> run make install
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Tue Mar 26 16:03:44 2002
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Tue, 26 Mar 2002 17:03:44 +0100
Subject: [Rd] some problems with r 1.5.0 on win2k
References: <20020325183731.43602.qmail@web14204.mail.yahoo.com>
Message-ID: <3CA09BE0.3000205@univie.ac.at>

That was the solution.
Perhaps it is worth mentioning in the INSTALL file.


Garfield Brown wrote:

>>1. Failure in make when starting from scratch
>>make in src/gnuwin fails at the first run because it tries to use
>>Rpwd.exe. It does, however, create Rpwd.exe before it fails.
>>Copying Rpwd.exe to a directory on the path the allows 
>>a complete pass through make.
>>
> 
> I think by default most shells will not search the current directory for
> binaries.
> 
> On win2k using bash with the following line in by .bashrc I have no
> problems
> export PATH=.:$PATH
> 
> likewise with cmd.exe
> set PATH=.;%PATH% does the trick
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Everything you'll ever need on one web page
> from News and Sport to Email and Music Charts
> http://uk.my.yahoo.com
> 
> 
> 


-- 
--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From macq@llnl.gov  Tue Mar 26 18:01:07 2002
From: macq@llnl.gov (macq@llnl.gov)
Date: Tue, 26 Mar 2002 19:01:07 +0100 (MET)
Subject: [Rd] seq.default test for relative range (PR#1416)
Message-ID: <200203261801.TAA19418@pubhealth.ku.dk>

seq.default() tests for the relative range of the from and to 
arguments (see excerpt below) and returns from (only) when the 
relative range is small. The problem is that "small" is too large. 
Also undocumented.

At 17:25 +0000 3/26/02, ripley@stats.ox.ac.uk wrote:
>On Tue, 26 Mar 2002, Don MacQueen wrote:
>
>>  I was surprised when seq.POSIXt() returned a single value rather than
>>  a vector, from inputs that I thought were reasonable. Here's an
>>  example to illustrate:
>>
>>  >  t0 <- ISOdatetime(2002,6,24,0,0,10)
>>
>>  ## expected a sequence of 16 times 1 second apart
>>  >  seq.POSIXt(from=t0,to=t0+15,by='1 sec')
>>  [1] "2002-06-24 00:00:10 PDT"
>>
>>  ## traces to this call
>>  >  seq.default(1024902010,1024902025,by=1)
>>  [1] 1024902010
>>  >
>>
>>  ## which is due to the following expressions in seq.default()
>>        del <- to - from
>>        ## a few lines omitted
>>        dd <- abs(del)/max(abs(to), abs(from))
>>        if (dd < sqrt(.Machine$double.eps)) return(from)
>>
>>  This looks like a trap to catch bad input, and return something
>>  reasonable (or at least not crash).
>>
>>  It's a given that seq.default() pre-dates seq.POSIXt() by many years,
>>  and the test for relative range undoubtedly has good reasons, so it's
>>  probably not a good idea to change seq.default().
>
>Oh, I think it needs to be changed.  That is far too generous a test for
>numerical inaccuracies, by say 5 orders of magnitude.  It is also
>undocumented, so I'd post a bug report on seq.default.
>

Remainder of my original post to R-help and Prof. Ripley's response 
not included in bug report. Subject line was "seq.POSIXt() with short 
time intervals" on 2002-03-26 if anyone wants to see the whole of it.

-Don
-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA
--------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jun_sung@hotmail.com  Wed Mar 27 01:00:25 2002
From: jun_sung@hotmail.com (Jun Sung)
Date: Wed, 27 Mar 2002 01:00:25 +0000
Subject: [Rd] 3D visualization using vtk library
Message-ID: <F846yL2m9lHiu3fQtYd00000e6f@hotmail.com>

has there been any attempt to improve the 3D visualization (interactive)
features in R, using the vtk library?
It seems fairly straight forward.
maybe even trivial for somebody who has experience with vtk library.

let me know if there are any obvious reasons i may have overlooked

thanks, in advance for any feedback


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 27 11:19:36 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Mar 2002 12:19:36 +0100
Subject: [Rd] 3D visualization using vtk library
In-Reply-To: <F846yL2m9lHiu3fQtYd00000e6f@hotmail.com>
References: <F846yL2m9lHiu3fQtYd00000e6f@hotmail.com>
Message-ID: <x2bsdaw94n.fsf@blueberry.kubism.ku.dk>

"Jun Sung" <jun_sung@hotmail.com> writes:

> has there been any attempt to improve the 3D visualization (interactive)
> features in R, using the vtk library?
> It seems fairly straight forward.
> maybe even trivial for somebody who has experience with vtk library.
> 
> let me know if there are any obvious reasons i may have overlooked

The same kind of thoughts have crossed my mind, but I don't think
anyone has actually tried it. It is certainly attractive, not just
because the pictures are pretty, but because it offers an interface at
a higher level than e.g. OpenGl (vtk is, for instance, object-based
rather than pixel-based).

It would be very useful if someone cared to sit down and create a few
simple examples.

Some things are clearly trivial since you can access a Tcl interpreter
directly from R via the tcltk package so whatever you can do in Tcl
you can do in R too. You can do it via .Tcl if you must, but you can
also create R commands that parallel the Tcl ones in the same way as
tkbutton() and friends. 

In fact, that interface is a pretty straight subroutine mapping and
actually not very Tcl-ish, so it would probably be rather easy to make
a mapping directly into R as it has already been done for Python and
Java. Easy in principle, that is. You would need an automated
interface generating tool because of the sheer size of the library.

What I don't quite see is how the data interfaces are pieced together.
If you have a data array in R, how do you get it across to the
renderer? This might be easy, but you need to dig deeper to find out.
The non-trivial objects in the example codes seem to be reading from
files, but surely they can also get the information from objects in
their hosting language. 

Much harder is the generic discussion about how you would want to
structure a set of 3D methods for statistical data, so that it becomes
simple and yet flexible in the same way as our current 2D methods (and
even those are under some attack because of the "indelible ink" aspect
and general lack of interactivity).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Wed Mar 27 12:16:33 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Wed, 27 Mar 2002 07:16:33 -0500
Subject: [Rd] Re: monthplot() in R?
Message-ID: <3pd3au8ni58jmbft5qa5jegfvbmjgrctta@4ax.com>

I wrote up monthplot, and Brian Ripley put it in r-devel (to be 1.5.0
at the end of next month).

The default method takes 3 inputs:  x, time, and phase.  x is the time
series, time is the time corresponding to each observation (not
necessarily evenly spaced), and phase is a variable that categorizes
the observations, e.g. the month.  It produces a separate small time
series plot for each value of phase.  The ts, stl, and StructTS
methods automatically fill in the time and phase values from the time
series attributes.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 27 15:45:05 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Mar 2002 16:45:05 +0100
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
In-Reply-To: <20020325065030.C7310@nokomis.stat.umn.edu>
References: <200203221942.UAA02846@pubhealth.ku.dk>
 <x2adt0448h.fsf@blueberry.kubism.ku.dk>
 <20020325065030.C7310@nokomis.stat.umn.edu>
Message-ID: <x23cymvwu6.fsf@blueberry.kubism.ku.dk>

Luke Tierney <luke@stat.umn.edu> writes:

> On Fri, Mar 22, 2002 at 11:39:10PM +0100, Peter Dalgaard BSA wrote:
> > maechler@stat.math.ethz.ch writes:
> > 
> > This looks suspiciously like the same issue as PR#921. Did someone
> > have plans to change the context stack handling so that we could have
> > a "real" sys.function()? To quote my own followup to PR#921:
> > 
> > "The problem is that we only actually store the call in the context
> > structure, not the function, so sys.function has to grab the call,
> > take the 1st element, and reevaluate it in the parent frame."
> > 
> 
> I have it on my list but won't get to it for 1.5.

OK. 

Obvious stopgap measure inserted for now (use findVar1, testing for
FUNSXP). Still won't handle the (f(foo))(bar) cases properly, of course. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Mar 27 16:58:59 2002
From: rossini@u.washington.edu (Anthony Rossini)
Date: Wed, 27 Mar 2002 08:58:59 -0800 (PST)
Subject: [Rd] 3D visualization using vtk library
In-Reply-To: <f846yl2m9lhiu3fqtyd00000e6f@hotmail.com>
Message-ID: <Pine.LNX.4.43.0203270858590.24841@hymn03.u.washington.edu>

It should be fairly straightforward.  I'm doing (wrapping a viz library) it for Orca.

best,
-tony


On Wed, 27 Mar 2002, Jun Sung wrote:

> has there been any attempt to improve the 3D visualization (interactive)
> features in R, using the vtk library?
> It seems fairly straight forward.
> maybe even trivial for somebody who has experience with vtk library.
> 
> let me know if there are any obvious reasons i may have overlooked
> 
> thanks, in advance for any feedback
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Wed Mar 27 23:27:12 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Thu, 28 Mar 2002 00:27:12 +0100 (MET)
Subject: [Rd] possible typo in integrate.Rd? (PR#1417)
Message-ID: <200203272327.AAA25697@pubhealth.ku.dk>

Lines 15,16 of R/src/library/base/man/integrate.Rd say:

  \item{f}{An \R function taking a numeric first argument and returning
    a numeric vector the same length. Returning a non-finite [] will

Where I put [], should a word such as "vector", "value", or "element"
be added?

Stephen




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From leisch@ci.tuwien.ac.at  Thu Mar 28 09:18:48 2002
From: leisch@ci.tuwien.ac.at (leisch@ci.tuwien.ac.at)
Date: Thu, 28 Mar 2002 10:18:48 +0100 (MET)
Subject: [Rd] persp + postscript/pdf (PR#1419)
Message-ID: <200203280918.KAA26477@pubhealth.ku.dk>

persp(outer(1:5, 1:5), shade=0.1)

looks nice on the screen, but

postscript()
persp(outer(1:5, 1:5), shade=0.1)
dev.off()


gives an all black surface.
same when using the pdf() device. has already been like that in 1.4.0.

.f




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 03
 day = 28
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Thu Mar 28 10:39:58 2002
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Thu, 28 Mar 2002 11:39:58 +0100
Subject: [Rd] help browsers in win2k
Message-ID: <3CA2F2FE.5F6E65FC@univie.ac.at>

With all the browser hassles in win2k now
it would be useful if
options(browser=___)
also works in windows if it is set.
if it is not set, the default brwoser should be used.

according to the documentation 
options(browser=____)
only has an effect in unix.

does it seem reasonable to put this on the wish list?


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar 28 11:10:53 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Mar 2002 11:10:53 +0000 (GMT)
Subject: [Rd] help browsers in win2k
In-Reply-To: <3CA2F2FE.5F6E65FC@univie.ac.at>
Message-ID: <Pine.LNX.4.31.0203281110001.16731-100000@gannet.stats>

On Thu, 28 Mar 2002, Erich Neuwirth wrote:

> With all the browser hassles in win2k now
> it would be useful if
> options(browser=___)
> also works in windows if it is set.
> if it is not set, the default brwoser should be used.
>
> according to the documentation
> options(browser=____)
> only has an effect in unix.
>
> does it seem reasonable to put this on the wish list?

Patches accepted.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Mar 28 14:50:09 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Thu, 28 Mar 2002 09:50:09 -0500
Subject: [Rd] R 1.5.0 pre-release snapshots available on Windows
Message-ID: <8ua6aug1nmvbjon0894ere0o24ugi679em@4ax.com>

I'm planning to put snapshots of Windows builds of the r-devel
pre-release version online at

<http://www.stats.uwo.ca/faculty/murdoch/software/r-devel>

a few times before feature freeze, and then more frequently as we
approach the release date.  Look at the dates on the files to see
whether I've posted a new build.

Please send comments about errors in the builds directly to me rather
than to the list, as there are likely to be numerous problems with
them until I get my setup perfected.  For example, I'm pretty sure
that today's build picked up obsolete versions of the recommended
libraries. 

These shouldn't be considered to be stable; don't trust anything
really important to them.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hammour@msn.com  Thu Mar 28 15:20:33 2002
From: hammour@msn.com (hammour@msn.com)
Date: Thu, 28 Mar 2002 16:20:33 +0100 (MET)
Subject: [Rd] Resize in graphics window cause R to crash (PR#1420)
Message-ID: <200203281520.QAA27153@pubhealth.ku.dk>

Full_Name: Ahmad Abu Hammour
Version: 1.4.1
OS: windows 98
Submission from: (NULL) (206.216.76.228)


Hi,
I made a plot then I wanted to resize it using drop-menue resize. I first
selected fixed then I resized it to smaller. Scroll bars appear. Next, I
selected fit to window. The scoll bars remains. When I scroll horizontally (back
and forth) or vertically (up and dowm), the window started to flash and then the
following message appeared:
"This program has performed an illegal operation and will be shut down.
RGUI caused an invalid page fault in
module R.DLL at 0167:0048f684.
Registers:
EAX=00000000 CS=0167 EIP=0048f684 EFLGS=00010246
EBX=00000000 SS=016f ESP=008f9ad8 EBP=008f9b20
ECX=00000001 DS=016f ESI=01789140 FS=218f
EDX=008f9b08 ES=016f EDI=008f9b00 GS=0000
Bytes at CS:EIP:
80 38 00 74 0f 8d 76 00 80 38 0a 75 01 43 40 80 
Stack dump:
01788d0d 013e5728 013e572e 0000000d 01789140 40280000 008f9b10 008f9b08 00000000
3fe00000 013e572e 00435aa0 00000000 00000000 008f9c30 0048fe47"

This error is caused everytime I do the same thing.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu Mar 28 19:43:08 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 28 Mar 2002 14:43:08 -0500
Subject: [Rd] Some new things in r-devel
Message-ID: <3CA3724C.3A9EA9C9@research.bell-labs.com>

Some code committed today includes:

1.  the recover() interactive browser moved into base from the methods
package (see ?recover)

2.  an extended version of trace() that allows interactive browsing in
the style of S and S-Plus.  This is in the methods package because it
uses classes, but it can be applied to any function.  See ?trace after
library(methods).

3.  Formal classes can have intializer methods to modify how the new()
function works.  See ?initialize.

4.  The behavior of setGeneric should be more sensible, with respect to
nonstandard generics and default methods.

5.  Classes that have a "data part" (that extend, e.g., numeric or
function) should behave better.

6.  A NextMethod mechanism for the methods package (introduced
previously and fixed up some this time).  See ?callNextMethod.

Testing appreciated.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Mar 28 22:52:05 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Thu, 28 Mar 2002 17:52:05 -0500
Subject: [Rd] pos argument to library
Message-ID: <15523.40597.925815.816765@gargle.gargle.HOWL>

While R-1.5.0 is still unfrozen, I'd like to lobby again for a "pos" argument
in library().  It seems straightforward to implement -- just change this line:
  env <- attach(NULL, name=pkgname)
to:
  env <- attach(NULL, pos, name=pkgname)

The reason I want this, by the way, is to mimic the S-Plus synchronize()
command.  Essentially, my version of synchronize() simply detaches a package
and then re-attaches it in the same position (thus requiring the "pos"
argument).  A fancier version would handle dynamic shared libraries correctly.
Here it is (it's called g.sync), if anyone is interested.

--- begin code ---
g.sync <- function(pos=2) {
  if (is.character(pos)) pos <- match(pos, sub("package:","",search()))
  pkg <- sub("package:", "", search()[pos])
  path <- searchpaths()[pos]
  is.lib <- match(dirname(path), .lib.loc, 0) > 0
  g.library <- g.library;  g.data.attach <- g.data.attach
  detach(pos=pos)
  if (is.lib) g.library(pkg, char=T, pos=pos) else g.data.attach(path, pos)
}
--- end code ---

Note that g.library is my copy of library() with the "pos" argument added, and
that I've assumed the "g.data" package is in use.  g.sync makes local copies of
g.library and g.data.attach in case the package being sync'ed contains one of
those functions!

-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Fri Mar 29 03:04:03 2002
From: presnell@stat.ufl.edu (presnell@stat.ufl.edu)
Date: Fri, 29 Mar 2002 04:04:03 +0100 (MET)
Subject: [Rd] glm start/offset bugs (PR#1422)
Message-ID: <200203290304.EAA28509@pubhealth.ku.dk>


--fupGvOGOQM
Content-Type: text/plain; charset=us-ascii
Content-Description: message body and .signature
Content-Transfer-Encoding: 7bit


There's a simple bug in the handling of the start and offset arguments
in glm and glm.fit.  The bug exists in the latest development version
of R (version information below), but it appears that glm.R has not
been touched much lately, so the bug affects at least the most recent
stable release of R.

Here is a simple example:

> data(ships, package=MASS)
> ships.glm <- glm(incidents ~ type + year + period + offset(log(service)),
+ 		  family=poisson, data=ships, subset=service != 0)
> glm(incidents ~ type + year + period + offset(log(service)),
+     family=poisson, data=ships, subset=service != 0, start=coef(ships.glm))

or more simply

> update(ships.glm, start=coef(ships.glm))

The problem is caused by a bad initialization of etastart in glm.fit()
when an offset is present.  Fixing this and retrying the example above
then reveals another bug, this time in glm(), that is tickled only
when non-NULL values are given to both the offset and start arguments.

I've attached to the bottom of this message a simple patch to
src/library/base/R/glm.R that I believe correctly repairs these bugs.

Essentially the same change is needed in Berwin Turlach's Wed, 27 Feb
2002 version of glm.fit() reported on the R bug tracking site as
"Models/1331".  (The change to glm() is still required as well of
course.)  As an aside, I'm wondering if there has been any thought
given to adopting Berwin's patches.  Though I must admit that I
haven't taken the time to check carefully through his changes, I know
Berwin to be a very careful and skillful programmer, and I suspect
that he is the only person to have looked very closely at those
particular details of glm.fit in recent months (years?).  Also, some
of the simpler changes that he made seem to be needed just to cleanup
the code.  Would it be useful if a number of us began using his
version as an informal test?  After discovering this bug earlier
today, I have already begun to do so and so far have not encountered
any problems.

-- 
Brett Presnell
Department of Statistics
University of Florida
http://www.stat.ufl.edu/~presnell/


Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 03
 day = 27
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



--fupGvOGOQM
Content-Type: text/plain
Content-Description: glm patch
Content-Disposition: inline;
	filename="glm.patch"
Content-Transfer-Encoding: 7bit

*** glm.R	Wed Feb 27 01:11:03 2002
--- glm-patched.R	Thu Mar 28 21:09:24 2002
***************
*** 67,71 ****
  	    if(is.empty.model(mt)) fit$deviance
  	    else glm.fit(x=X[,"(Intercept)",drop=FALSE], y=Y, weights=weights,
! 			 start=start, offset=offset, family=family,
  			 control=control, intercept=TRUE)$deviance
      }
--- 67,71 ----
  	    if(is.empty.model(mt)) fit$deviance
  	    else glm.fit(x=X[,"(Intercept)",drop=FALSE], y=Y, weights=weights,
! 			 offset=offset, family=family,
  			 control=control, intercept=TRUE)$deviance
      }
***************
*** 152,156 ****
  			   "and correspond to initial coefs for",
  			   deparse(xnames)))
! 	    else as.vector(if (NCOL(x) == 1) x * start else x %*% start)
  	else family$linkfun(mustart)
      mu <- linkinv(eta)
--- 152,157 ----
  			   "and correspond to initial coefs for",
  			   deparse(xnames)))
! 	    else offset +
!               as.vector(if (NCOL(x) == 1) x * start else x %*% start)
  	else family$linkfun(mustart)
      mu <- linkinv(eta)

--fupGvOGOQM--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 29 06:25:11 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 29 Mar 2002 06:25:11 +0000 (GMT)
Subject: [Rd] glm start/offset bugs (PR#1422)
In-Reply-To: <200203290304.EAA28509@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0203290619580.9066-100000@auk.stats>

On Fri, 29 Mar 2002 presnell@stat.ufl.edu wrote:

>
> --fupGvOGOQM
> Content-Type: text/plain; charset=us-ascii
> Content-Description: message body and .signature
> Content-Transfer-Encoding: 7bit
>
>
> There's a simple bug in the handling of the start and offset arguments
> in glm and glm.fit.  The bug exists in the latest development version
> of R (version information below), but it appears that glm.R has not
> been touched much lately, so the bug affects at least the most recent
> stable release of R.
>
> Here is a simple example:
>
> > data(ships, package=MASS)
> > ships.glm <- glm(incidents ~ type + year + period + offset(log(service)),
> + 		  family=poisson, data=ships, subset=service != 0)
> > glm(incidents ~ type + year + period + offset(log(service)),
> +     family=poisson, data=ships, subset=service != 0, start=coef(ships.glm))
>
> or more simply
>
> > update(ships.glm, start=coef(ships.glm))
>
> The problem is caused by a bad initialization of etastart in glm.fit()
> when an offset is present.  Fixing this and retrying the example above
> then reveals another bug, this time in glm(), that is tickled only
> when non-NULL values are given to both the offset and start arguments.
>
> I've attached to the bottom of this message a simple patch to
> src/library/base/R/glm.R that I believe correctly repairs these bugs.
>
> Essentially the same change is needed in Berwin Turlach's Wed, 27 Feb
> 2002 version of glm.fit() reported on the R bug tracking site as
> "Models/1331".  (The change to glm() is still required as well of
> course.)  As an aside, I'm wondering if there has been any thought
> given to adopting Berwin's patches.  Though I must admit that I
> haven't taken the time to check carefully through his changes, I know
> Berwin to be a very careful and skillful programmer, and I suspect
> that he is the only person to have looked very closely at those
> particular details of glm.fit in recent months (years?).  Also, some
> of the simpler changes that he made seem to be needed just to cleanup
> the code.  Would it be useful if a number of us began using his
> version as an informal test?  After discovering this bug earlier
> today, I have already begun to do so and so far have not encountered
> any problems.

Yes, thought has been given, and the code has been looked at. (People
do look at R code you know, even if they don't jump in to change it
after a few hour's use.)

Given the time pressures, this is not going to get looked at for 1.5.0. I
have long thought that given the history of problems maintaining glm()
that it might be easier to rewrite it for scratch.  Having .null versions
serves no useful purpose, for example.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jfox@mcmaster.ca  Fri Mar 29 15:59:26 2002
From: jfox@mcmaster.ca (jfox@mcmaster.ca)
Date: Fri, 29 Mar 2002 16:59:26 +0100 (MET)
Subject: [Rd] expand.model.frame fails when call creating model has no data (PR#1423)
Message-ID: <200203291559.QAA29688@pubhealth.ku.dk>

I've encounted a problem using expand.model.frame. To illustrate, consider 
the function

     > test <- function(model){
     +     expand.model.frame(model, "income")
     +     }
     >

The data frame Prestige (from the car library) has several variables, 
including prestige, income and education. I've attached this data frame and 
fit the following model

     > mod.1 <- lm(prestige ~ (log(income) + education)*type)
     >

 From the documentation for expand.model.frame, the default environment in 
which "things" are evaluated is environment(formula(model)), where model is 
the first argument to expand.model frame; in this case

     > environment(formula(mod.1))
     <environment: R_GlobalEnv>
     >

When I call the test function with mod.1, however, I get the following error:

     > test(mod.1)
     Error in eval(expr, envir, enclos) : Object "prestige" not found
     >

But if I fit the same model specifying the data argument to lm as Prestige, 
then test works,

     > mod.2 <- lm(prestige ~ (log(income) + education)*type, data=Prestige)
     > test(mod.2)
                             prestige log(income) education type income
     GOV.ADMINISTRATORS            68.8    9.421492     13.11 prof  12351
     GENERAL.MANAGERS              69.1   10.161187     12.26 prof  25879
     ACCOUNTANTS                   63.4    9.134647     12.77 prof   9271
     . . .
     TYPESETTERS                   42.2    8.773694     10.00   bc   6462
     BOOKBINDERS                   35.2    8.193400      8.55   bc   3617
     >

even though

     > environment(formula(mod.2))
     <environment: R_GlobalEnv>
     >

that is, still the global environment.


I'm able to get expand.model.frame to do what I think it's supposed to do 
by replacing the line

	rval <- eval(call("model.frame", ff, data = data, subset = subset,
             	na.action = I), envir)

with

         rval <- if (is.null(data)) eval(call("model.frame", ff, subset = 
subset, na.action = naa), envir)
            	else eval(call("model.frame", ff, data = data, subset = 
subset, na.action = naa), envir)


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 4.1
  year = 2002
  month = 01
  day = 30
  language = R

Windows 2000 Professional (build 2195) Service Pack 2.0

Search Path:
  .GlobalEnv, Prestige, package:lattice, package:grid, package:car, 
package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 29 16:13:46 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2002 17:13:46 +0100
Subject: [Rd] expand.model.frame fails when call creating model has no data (PR#1423)
In-Reply-To: <200203291559.QAA29688@pubhealth.ku.dk>
References: <200203291559.QAA29688@pubhealth.ku.dk>
Message-ID: <x2sn6jpd1h.fsf@blueberry.kubism.ku.dk>

jfox@mcmaster.ca writes:

> I'm able to get expand.model.frame to do what I think it's supposed to do 
> by replacing the line
> 
> 	rval <- eval(call("model.frame", ff, data = data, subset = subset,
>              	na.action = I), envir)
> 
> with
> 
>          rval <- if (is.null(data)) eval(call("model.frame", ff, subset = 
> subset, na.action = naa), envir)
>             	else eval(call("model.frame", ff, data = data, subset = 
> subset, na.action = naa), envir)

Yes, but a better fix seems to be to have model.frame check for an
explicit NULL data argument. Looks like a few cases of missing(data)
in there might as well have read is.null(data) since that is the
default. Anyone know better?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Fri Mar 29 16:51:19 2002
From: presnell@stat.ufl.edu (Brett Presnell)
Date: Fri, 29 Mar 2002 11:51:19 -0500
Subject: [Rd] glm start/offset bugs (PR#1422)
In-Reply-To: <Pine.GSO.4.44.0203290619580.9066-100000@auk.stats>
References: <200203290304.EAA28509@pubhealth.ku.dk>
 <Pine.GSO.4.44.0203290619580.9066-100000@auk.stats>
Message-ID: <15524.39815.880724.274750@minke.stat.ufl.edu>


Prof Brian D Ripley writes:
> 
> Yes, thought has been given, and the code has been looked at. (People
> do look at R code you know, even if they don't jump in to change it
> after a few hour's use.)

Sorry. No insult intended.

> Given the time pressures, this is not going to get looked at for
> 1.5.0.

Does this mean that my patch will not make it in either?  Berwin's
work is obviously more complicated and requires more attention and
careful reading to check.  My changes actually only have an effect if
both an offset and a starting value are given, and clearly the current
version falls down badly in that case anyway.

> I have long thought that given the history of problems maintaining
> glm() that it might be easier to rewrite it for scratch.  Having
> .null versions serves no useful purpose, for example.

Yes, having ploughed around in the code a bit, I'm very sympathetic to
this view.

-- 
Brett Presnell
Department of Statistics
University of Florida
http://www.stat.ufl.edu/~presnell/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Mar 29 17:41:59 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 29 Mar 2002 12:41:59 -0500 (EST)
Subject: [Rd] wmf on Unix?
Message-ID: <Pine.LNX.4.30.0203291237340.25056-100000@bolker.zoo.ufl.edu>


  libEMF (http://sourceforge.net/projects/libemf/) looks like it may be
the solution to generating WMF/EMF files on Unix.  It's a general-purpose
(LGPL) library that implements the EMF API ...

  (I was originally going to write to the list to ask why small circles
appear to be filled (in src/gnuwin32/graphapp/gdraw.c) by generating a
series of rectangles rather than using some kind of "filled circle"
primitive; someone I passed an R-generated EMF file to was worried that
the profusion of little rectangle objects might give the printer hiccups
... I assume there is some good reason for this, probably now lost in the
mists of time.)

  Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 29 19:23:23 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Mar 2002 19:23:23 +0000 (GMT)
Subject: [Rd] wmf on Unix?
In-Reply-To: <Pine.LNX.4.30.0203291237340.25056-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.31.0203291919280.4980-100000@gannet.stats>

On Fri, 29 Mar 2002, Ben Bolker wrote:

>
>   libEMF (http://sourceforge.net/projects/libemf/) looks like it may be
> the solution to generating WMF/EMF files on Unix.  It's a general-purpose
> (LGPL) library that implements the EMF API ...
>
>   (I was originally going to write to the list to ask why small circles
> appear to be filled (in src/gnuwin32/graphapp/gdraw.c) by generating a
> series of rectangles rather than using some kind of "filled circle"
> primitive; someone I passed an R-generated EMF file to was worried that
> the profusion of little rectangle objects might give the printer hiccups
> ... I assume there is some good reason for this, probably now lost in the
> mists of time.)

Such as the filled circle code in the Windows GDI does not work
adequately? The name `fastfillrectangle' might give you a clue.

Drawing filled circles through the Windows GDI is notoriously slow
and buggy.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 29 19:32:53 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Mar 2002 19:32:53 +0000 (GMT)
Subject: [Rd] glm start/offset bugs (PR#1422)
In-Reply-To: <15524.39815.880724.274750@minke.stat.ufl.edu>
Message-ID: <Pine.LNX.4.31.0203291927110.4980-100000@gannet.stats>

On Fri, 29 Mar 2002, Brett Presnell wrote:

>
> Prof Brian D Ripley writes:
> >
> > Yes, thought has been given, and the code has been looked at. (People
> > do look at R code you know, even if they don't jump in to change it
> > after a few hour's use.)
>
> Sorry. No insult intended.
>
> > Given the time pressures, this is not going to get looked at for
> > 1.5.0.
>
> Does this mean that my patch will not make it in either?  Berwin's

Probably not.  People seem very reluctant to deal with bugs these days.

> work is obviously more complicated and requires more attention and
> careful reading to check.  My changes actually only have an effect if
> both an offset and a starting value are given, and clearly the current
> version falls down badly in that case anyway.
>
> > I have long thought that given the history of problems maintaining
> > glm() that it might be easier to rewrite it for scratch.  Having
> > .null versions serves no useful purpose, for example.
>
> Yes, having ploughed around in the code a bit, I'm very sympathetic to
> this view.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Sat Mar 30 01:24:11 2002
From: rossini@u.washington.edu (Anthony Rossini)
Date: Fri, 29 Mar 2002 17:24:11 -0800 (PST)
Subject: [Rd] First sample release of the R-Orca package.
Message-ID: <Pine.LNX.4.43.0203291724110.2317@hymn10.u.washington.edu>

For all those few of you who care about weird statistical visualization software, I've finally made available a "test" release for R-Orca.  There are 
examples of a 2-d variable selection plot (i.e. 2-d straight projection, with selection of the 2 variables to view), a GrandTour plot, and a Simplicial data plot.  The points of interest are the ability to brush and select from the command line, etc.

Requires Duncan's recent SJava for "stability" under Linux, I've heard reports that it has always been stable under Microsoft Windows.  I don't have a Mac, so am clueless as to whether it works.

D/L the rorca package and test.R example from

http://software.biostat.washington.edu/~rossini/rorca/

I'd appreciate any comments.  For examples of visualizations that I've implemented, you might "checkout" the orca distribution and look in the examples directory.  The java code "ports" in a straightforward way from Java to R.

Really straightforward, thanks to Duncan :-).

I've not provided linked-views examples yet, but hope to do that next week, if nothing interrupts.

best,
-tony

----
A.J. Rossini                            Rsrch Asst Professor of Biostatistics
rossini@u.washington.edu                http://software.biostat.washington.edu/
Biostatistics/Univ. of Washington       206-543-1044 (3286=fax) (Thursdays)
HIV Vaccine Trials Network/FHCRC        206-667-7025 (4812=fax) (M/Tu/W)
(Friday location is generally unknown).




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar 30 11:35:37 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 30 Mar 2002 12:35:37 +0100 (MET)
Subject: [Rd] persp + postscript/pdf (PR#1419)
Message-ID: <200203301135.MAA01348@pubhealth.ku.dk>

This is rather a documentation bug which means you are misusing persp().

The shading is done in the colour given by the `col' argument, and that
defaults to NULL.  What NULL means is undocumented, but it appears to mean
par("bg"), and that is transparent on postscript/pdf.  Set a value for
`col' and it works as you expect.

I've changed the default to col = "white" and also ensured that
transparent colours are treated as transparent.

On Thu, 28 Mar 2002 leisch@ci.tuwien.ac.at wrote:

> persp(outer(1:5, 1:5), shade=0.1)
>
> looks nice on the screen, but
>
> postscript()
> persp(outer(1:5, 1:5), shade=0.1)
> dev.off()
>
>
> gives an all black surface.
> same when using the pdf() device. has already been like that in 1.4.0.
>
> .f
>
>
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Under development (unstable)
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 03
>  day = 28
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Sat Mar 30 13:08:21 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Sat, 30 Mar 2002 14:08:21 +0100
Subject: [Rd] Highlighting in KDE editor Kate
Message-ID: <200203301308.g2UD8MV20497@wn1.sci.kun.nl>


Hi all,

Anyone interested in a highlighting module for Kate (as in KDE 2.2.2)?
Below is the module, which should be placed in something like:
~/.kde/share/apps/kate/syntax/

Or globally, in something like:
/opt/kde2/share/apps/kate/syntax/

Rather little functions are recognized right now, but it is clear how to add 
them.

The module:

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE language SYSTEM "language.dtd">
<language name="R Script" section="Sources" extensions="*.R" 
mimetype="application/x-R">
  <highlighting>
    <list name="commands">
      <item> c </item>
      <item> dev </item>
      <item> grey </item>
      <item> lm </item>
      <item> matrix </item>
      <item> outer </item>
      <item> persp </item>
      <item> postscript </item>
      <item> scan </item>
      <item> seq </item>
    </list>
    <contexts>
      <context attribute="0" lineEndContext="0">
        <keyword attribute="1" context="0" String="commands"/>
        <RegExpr attribute="2" context="0" String="#.*$" />
        <RangeDetect attribute="3" context="0" char="&quot;" char1="&quot;"/>
      </context>
    </contexts>
    <itemDatas>
      <itemData name="Normal Text" defStyleNum="dsNormal"/>
      <itemData name="Keyword" defStyleNum="dsKeyword"/>
      <itemData name="Comment" defStyleNum="dsComment"/>
      <itemData name="String"  defStyleNum="dsString"/>
      <itemData name="Attribute" defStyleNum="dsNormal" italic="1"/>
    </itemDatas>
  </highlighting>
  <general>
    <comments>
      <comment name="singleLine" start="#" />
    </comments>
  </general>
</language>

Regards,

Egon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From schutz@wehi.edu.au  Fri Mar  1 06:06:38 2002
From: schutz@wehi.edu.au (schutz@wehi.edu.au)
Date: Fri, 1 Mar 2002 07:06:38 +0100 (MET)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
Message-ID: <200203010606.HAA10892@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-1141662977-1014960253=:3119
Content-Type: TEXT/PLAIN; CHARSET=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
Content-ID: <Pine.SOL.4.33.0203011649142.3119@unix09.wehi.edu.au>

Don Knuth recently updated its RNG, following the discovery of a
weakness in the seed initialisation (see
http://Sunburn.Stanford.EDU/~knuth/news02.html), so I believe that the
corresponding code in R should be updated as well. If it may be usefull,
I attach a patch to do the change.

Notes:

  - only a few lines of code have really changed, but the order of the
    functions has changed in Knuth's original code, so the patch is
    longer than it should really be;
  - Despite Knuth's request that no change should be made to the code,
    the present R code (1.5.0-devel and previous) contains a change (the
    line "long ran_x[KK];" is commented, and ran_x is defined elsewhere
    in the program). The patch contains the _same_ change; I let you
    decide if this is acceptable in regard to Knuth's request.

Frederic
--
Fr=E9d=E9ric SCH=DCTZ                      email: schutz@wehi.edu.au
Genetics and Bioinformatics Group
The Walter and Eliza Hall Institute of Medical Research
Phone: +61 3 9345 2627               Fax: +61 3 9347 0852
Post Office
Royal Melbourne Hospital, 3050
Victoria, Australia

---559023410-1141662977-1014960253=:3119
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII; NAME="RNG.c.patch"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.SOL.4.33.0203011624131.3119@unix09.wehi.edu.au>
Content-Description: 
Content-Disposition: ATTACHMENT; FILENAME="RNG.c.patch"

LS0tIFJORy5jLm9sZAlGcmkgTWFyICAxIDA4OjQyOjQ1IDIwMDINCisrKyBS
TkcuYwlGcmkgTWFyICAxIDE0OjI2OjA4IDIwMDINCkBAIC01NDMsNiArNTQz
LDcgQEANCiAjZGVmaW5lIHJhbl94ICAgICAgICAgICAgIGR1bW15DQogDQog
LyogPT09PT09PT09PT09PT09PT09PSAgS251dGggVEFPQ1AgPT09PT09PT09
PT09PT09PT09PT09PT09PT0gKi8NCisvKiBGcm9tIGh0dHA6Ly93d3ctY3Mt
ZmFjdWx0eS5TdGFuZm9yZC5FRFUvfmtudXRoL3Byb2dyYW1zL3JuZy5jICov
DQogDQogICAgICAgICAgLyogUGxlYXNlIGRvIE5PVCBhbHRlciB0aGlzIHBh
cnQgb2YgdGhlIGNvZGUgKi8NCiANCkBAIC01NTEsMTUgKzU1MiwxNyBAQA0K
ICAqICAgIEl0IGlzIGV4cGxhaW5lZCBpbiBTZW1pbnVtZXJpY2FsIEFsZ29y
aXRobXMsIDNyZCBlZGl0aW9uLCBTZWN0aW9uIDMuNg0KICAqICAgIChvciBp
biB0aGUgZXJyYXRhIHRvIHRoZSAybmQgZWRpdGlvbiAtLS0gc2VlDQogICog
ICAgICAgIGh0dHA6Ly93d3ctY3MtZmFjdWx0eS5zdGFuZm9yZC5lZHUvfmtu
dXRoL3Rhb2NwLmh0bWwNCi0gKiAgICBpbiB0aGUgY2hhbmdlcyB0byBwYWdl
cyAxNzEgYW5kIGZvbGxvd2luZyBvZiBWb2x1bWUgMikuICAgICAgICAgICAg
ICAqLw0KKyAqICAgIGluIHRoZSBjaGFuZ2VzIHRvIFZvbHVtZSAyIG9uIHBh
Z2VzIDE3MSBhbmQgZm9sbG93aW5nKS4gICAgICAgICAgICAgICovDQorDQor
LyogICAgTi5CLiBUaGUgTU9ESUZJQ0FUSU9OUyBpbnRyb2R1Y2VkIGluIHRo
ZSA5dGggcHJpbnRpbmcgKDIwMDIpIGFyZQ0KKyAgICAgIGluY2x1ZGVkIGhl
cmU7IHRoZXJlJ3Mgbm8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCB0
aGUgb3JpZ2luYWwuICovDQogDQogLyogICAgSWYgeW91IGZpbmQgYW55IGJ1
Z3MsIHBsZWFzZSByZXBvcnQgdGhlbSBpbW1lZGlhdGVseSB0bw0KICAqICAg
ICAgICAgICAgICAgICB0YW9jcEBjcy5zdGFuZm9yZC5lZHUNCiAgKiAgICAo
YW5kIHlvdSB3aWxsIGJlIHJld2FyZGVkIGlmIHRoZSBidWcgaXMgZ2VudWlu
ZSkuIFRoYW5rcyEgICAgICAgICAgICAqLw0KIA0KIC8qKioqKioqKioqKiog
c2VlIHRoZSBib29rIGZvciBleHBsYW5hdGlvbnMgYW5kIGNhdmVhdHMhICoq
KioqKioqKioqKioqKioqKiovDQotDQotLyogdGhlIG9sZCBDIGNhbGxpbmcg
Y29udmVudGlvbnMgYXJlIHVzZWQgaGVyZSwgZm9yIHJlYXNvbnMgb2YgcG9y
dGFiaWxpdHkgKi8NCisvKioqKioqKioqKioqIGluIHBhcnRpY3VsYXIsIHlv
dSBuZWVkIHR3bydzIGNvbXBsZW1lbnQgYXJpdGhtZXRpYyAqKioqKioqKioq
Lw0KIA0KICNkZWZpbmUgS0sgMTAwICAgICAgICAgICAgICAgICAgICAgLyog
dGhlIGxvbmcgbGFnICovDQogI2RlZmluZSBMTCAgMzcgICAgICAgICAgICAg
ICAgICAgICAvKiB0aGUgc2hvcnQgbGFnICovDQpAQCAtNTY4LDEwICs1NzEs
MTMgQEANCiANCiAvKmxvbmcgcmFuX3hbS0tdOyAqLyAgICAgICAgICAgICAg
ICAgICAvKiB0aGUgZ2VuZXJhdG9yIHN0YXRlICovDQogDQotLyogdm9pZCBy
YW5fYXJyYXkobG9uZyBhYVtdLGludCBuKSAqLw0KKyNpZmRlZiBfX1NURENf
Xw0KK3ZvaWQgcmFuX2FycmF5KGxvbmcgYWFbXSxpbnQgbikNCisjZWxzZQ0K
IHZvaWQgcmFuX2FycmF5KGFhLG4pICAgIC8qIHB1dCBuIG5ldyByYW5kb20g
bnVtYmVycyBpbiBhYSAqLw0KICAgbG9uZyAqYWE7ICAgLyogZGVzdGluYXRp
b24gKi8NCiAgIGludCBuOyAgICAgIC8qIGFycmF5IGxlbmd0aCAobXVzdCBi
ZSBhdCBsZWFzdCBLSykgKi8NCisjZW5kaWYNCiB7DQogICByZWdpc3RlciBp
bnQgaSxqOw0KICAgZm9yIChqPTA7ajxLSztqKyspIGFhW2pdPXJhbl94W2pd
Ow0KQEAgLTU4MCw1NyArNTg2LDU3IEBADQogICBmb3IgKDtpPEtLO2krKyxq
KyspIHJhbl94W2ldPW1vZF9kaWZmKGFhW2otS0tdLHJhbl94W2ktTExdKTsN
CiB9DQogDQorLyogdGhlIGZvbGxvd2luZyByb3V0aW5lcyBhcmUgZnJvbSBl
eGVyY2lzZSAzLjYtLTE1ICovDQorLyogYWZ0ZXIgY2FsbGluZyByYW5fc3Rh
cnQsIGdldCBuZXcgcmFuZG9tcyBieSwgZS5nLiwgIng9cmFuX2Fycl9uZXh0
KCkiICovDQorDQorI2RlZmluZSBRVUFMSVRZIDEwMDkgLyogcmVjb21tZW5k
ZWQgcXVhbGl0eSBsZXZlbCBmb3IgaGlnaC1yZXMgdXNlICovDQorbG9uZyBy
YW5fYXJyX2J1ZltRVUFMSVRZXTsNCitsb25nIHJhbl9hcnJfc2VudGluZWw9
LTE7DQorbG9uZyAqcmFuX2Fycl9wdHI9JnJhbl9hcnJfc2VudGluZWw7IC8q
IHRoZSBuZXh0IHJhbmRvbSBudW1iZXIsIG9yIC0xICovDQorDQorI2RlZmlu
ZSByYW5fYXJyX25leHQoKSAoKnJhbl9hcnJfcHRyPj0wPyAqcmFuX2Fycl9w
dHIrKzogcmFuX2Fycl9jeWNsZSgpKQ0KK2xvbmcgcmFuX2Fycl9jeWNsZSgp
DQorew0KKyAgcmFuX2FycmF5KHJhbl9hcnJfYnVmLFFVQUxJVFkpOw0KKyAg
cmFuX2Fycl9idWZbMTAwXT0tMTsNCisgIHJhbl9hcnJfcHRyPXJhbl9hcnJf
YnVmKzE7DQorICByZXR1cm4gcmFuX2Fycl9idWZbMF07DQorfQ0KKw0KICNk
ZWZpbmUgVFQgIDcwICAgLyogZ3VhcmFudGVlZCBzZXBhcmF0aW9uIGJldHdl
ZW4gc3RyZWFtcyAqLw0KICNkZWZpbmUgaXNfb2RkKHgpICAoKHgpJjEpICAg
ICAgICAgIC8qIHVuaXRzIGJpdCBvZiB4ICovDQotI2RlZmluZSBldmVuaXpl
KHgpICgoeCkmKE1NLTIpKSAgIC8qIG1ha2UgeCBldmVuICovDQogDQotLyog
dm9pZCByYW5fc3RhcnQobG9uZyBzZWVkKSAqLw0KKyNpZmRlZiBfX1NURENf
Xw0KK3ZvaWQgcmFuX3N0YXJ0KGxvbmcgc2VlZCkNCisjZWxzZQ0KIHZvaWQg
cmFuX3N0YXJ0KHNlZWQpICAgIC8qIGRvIHRoaXMgYmVmb3JlIHVzaW5nIHJh
bl9hcnJheSAqLw0KICAgbG9uZyBzZWVkOyAgICAgICAgICAgIC8qIHNlbGVj
dG9yIGZvciBkaWZmZXJlbnQgc3RyZWFtcyAqLw0KKyNlbmRpZg0KIHsNCiAg
IHJlZ2lzdGVyIGludCB0LGo7DQogICBsb25nIHhbS0srS0stMV07ICAgICAg
ICAgICAgICAvKiB0aGUgcHJlcGFyYXRpb24gYnVmZmVyICovDQotICByZWdp
c3RlciBsb25nIHNzPWV2ZW5pemUoc2VlZCsyKTsNCisgIHJlZ2lzdGVyIGxv
bmcgc3M9KHNlZWQrMikmKE1NLTIpOw0KICAgZm9yIChqPTA7ajxLSztqKysp
IHsNCiAgICAgeFtqXT1zczsgICAgICAgICAgICAgICAgICAgICAgLyogYm9v
dHN0cmFwIHRoZSBidWZmZXIgKi8NCiAgICAgc3M8PD0xOyBpZiAoc3M+PU1N
KSBzcy09TU0tMjsgLyogY3ljbGljIHNoaWZ0IDI5IGJpdHMgKi8NCiAgIH0N
Ci0gIGZvciAoO2o8S0srS0stMTtqKyspIHhbal09MDsNCiAgIHhbMV0rKzsg
ICAgICAgICAgICAgIC8qIG1ha2UgeFsxXSAoYW5kIG9ubHkgeFsxXSkgb2Rk
ICovDQotICBzcz1zZWVkJihNTS0xKTsNCi0gIHQ9VFQtMTsgd2hpbGUgKHQp
IHsNCi0gICAgZm9yIChqPUtLLTE7aj4wO2otLSkgeFtqK2pdPXhbal07ICAv
KiAic3F1YXJlIiAqLw0KLSAgICBmb3IgKGo9S0srS0stMjtqPktLLUxMO2ot
PTIpIHhbS0srS0stMS1qXT1ldmVuaXplKHhbal0pOw0KLSAgICBmb3IgKGo9
S0srS0stMjtqPj1LSztqLS0pIGlmKGlzX29kZCh4W2pdKSkgew0KLSAgICAg
IHhbai0oS0stTEwpXT1tb2RfZGlmZih4W2otKEtLLUxMKV0seFtqXSk7DQor
ICBmb3IgKHNzPXNlZWQmKE1NLTEpLHQ9VFQtMTsgdDsgKSB7ICAgICAgIA0K
KyAgICBmb3IgKGo9S0stMTtqPjA7ai0tKSB4W2oral09eFtqXSwgeFtqK2ot
MV09MDsgLyogInNxdWFyZSIgKi8NCisgICAgZm9yIChqPUtLK0tLLTI7aj49
S0s7ai0tKQ0KKyAgICAgIHhbai0oS0stTEwpXT1tb2RfZGlmZih4W2otKEtL
LUxMKV0seFtqXSksDQogICAgICAgeFtqLUtLXT1tb2RfZGlmZih4W2otS0td
LHhbal0pOw0KLSAgICB9DQogICAgIGlmIChpc19vZGQoc3MpKSB7ICAgICAg
ICAgICAgICAvKiAibXVsdGlwbHkgYnkgeiIgKi8NCiAgICAgICBmb3IgKGo9
S0s7aj4wO2otLSkgIHhbal09eFtqLTFdOw0KICAgICAgIHhbMF09eFtLS107
ICAgICAgICAgICAgLyogc2hpZnQgdGhlIGJ1ZmZlciBjeWNsaWNhbGx5ICov
DQotICAgICAgaWYgKGlzX29kZCh4W0tLXSkpIHhbTExdPW1vZF9kaWZmKHhb
TExdLHhbS0tdKTsNCisgICAgICB4W0xMXT1tb2RfZGlmZih4W0xMXSx4W0tL
XSk7DQogICAgIH0NCiAgICAgaWYgKHNzKSBzcz4+PTE7IGVsc2UgdC0tOw0K
ICAgfQ0KICAgZm9yIChqPTA7ajxMTDtqKyspIHJhbl94W2orS0stTExdPXhb
al07DQogICBmb3IgKDtqPEtLO2orKykgcmFuX3hbai1MTF09eFtqXTsNCi19
DQotDQotLyogdGhlIGZvbGxvd2luZyByb3V0aW5lcyBhcmUgZnJvbSBleGVy
Y2lzZSAzLjYtLTE1ICovDQotLyogYWZ0ZXIgY2FsbGluZyByYW5fc3RhcnQs
IGdldCBuZXcgcmFuZG9tcyBieSwgZS5nLiwgIng9cmFuX2Fycl9uZXh0KCki
ICovDQotDQotI2RlZmluZSBRVUFMSVRZIDEwMDkgLyogcmVjb21tZW5kZWQg
cXVhbGl0eSBsZXZlbCBmb3IgaGlnaC1yZXMgdXNlICovDQotbG9uZyByYW5f
YXJyX2J1ZltRVUFMSVRZXTsNCi1sb25nIHJhbl9hcnJfc2VudGluZWw9LTE7
DQotbG9uZyAqcmFuX2Fycl9wdHI9JnJhbl9hcnJfc2VudGluZWw7IC8qIHRo
ZSBuZXh0IHJhbmRvbSBudW1iZXIsIG9yIC0xICovDQotDQotI2RlZmluZSBy
YW5fYXJyX25leHQoKSAoKnJhbl9hcnJfcHRyPj0wPyAqcmFuX2Fycl9wdHIr
KzogcmFuX2Fycl9jeWNsZSgpKQ0KLWxvbmcgcmFuX2Fycl9jeWNsZSgpDQot
ew0KLSAgcmFuX2FycmF5KHJhbl9hcnJfYnVmLFFVQUxJVFkpOw0KLSAgcmFu
X2Fycl9idWZbMTAwXT0tMTsNCi0gIHJhbl9hcnJfcHRyPXJhbl9hcnJfYnVm
KzE7DQotICByZXR1cm4gcmFuX2Fycl9idWZbMF07DQorICBmb3IgKGo9MDtq
PDEwO2orKykgcmFuX2FycmF5KHgsS0srS0stMSk7IC8qIHdhcm0gdGhpbmdz
IHVwICovDQorICByYW5fYXJyX3B0cj0mcmFuX2Fycl9zZW50aW5lbDsNCiB9
DQogDQogLyogPT09PT09PT09PT09PT09PT09PT09IGVuZCBvZiBLbnV0aCdz
IGNvZGUgPT09PT09PT09PT09PT09PT09PT09PSAqLw0K
---559023410-1141662977-1014960253=:3119--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar  1 06:38:12 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Mar 2002 07:38:12 +0100 (MET)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
Message-ID: <200203010638.HAA10983@pubhealth.ku.dk>

Attachments don't really work with R-bugs.  To save us trying to unpick
this manually, could you re-send it as the body of a message to R-bugs
in reply to this one, or quoting (PR#1336) in the subject, please?

On Fri, 1 Mar 2002 schutz@wehi.edu.au wrote:

>   This message is in MIME format.  The first part should be readable text,
>   while the remaining parts are likely unreadable without MIME-aware tools.
>   Send mail to mime@docserver.cac.washington.edu for more info.
>
> ---559023410-1141662977-1014960253=:3119
> Content-Type: TEXT/PLAIN; CHARSET=iso-8859-1
> Content-Transfer-Encoding: QUOTED-PRINTABLE
> Content-ID: <Pine.SOL.4.33.0203011649142.3119@unix09.wehi.edu.au>
>
> Don Knuth recently updated its RNG, following the discovery of a
> weakness in the seed initialisation (see
> http://Sunburn.Stanford.EDU/~knuth/news02.html), so I believe that the
> corresponding code in R should be updated as well. If it may be usefull,
> I attach a patch to do the change.
>
> Notes:
>
>   - only a few lines of code have really changed, but the order of the
>     functions has changed in Knuth's original code, so the patch is
>     longer than it should really be;
>   - Despite Knuth's request that no change should be made to the code,
>     the present R code (1.5.0-devel and previous) contains a change (the
>     line "long ran_x[KK];" is commented, and ran_x is defined elsewhere
>     in the program). The patch contains the _same_ change; I let you
>     decide if this is acceptable in regard to Knuth's request.
>
> Frederic
> --
> Fr=E9d=E9ric SCH=DCTZ                      email: schutz@wehi.edu.au
> Genetics and Bioinformatics Group
> The Walter and Eliza Hall Institute of Medical Research
> Phone: +61 3 9345 2627               Fax: +61 3 9347 0852
> Post Office
> Royal Melbourne Hospital, 3050
> Victoria, Australia
>
> ---559023410-1141662977-1014960253=:3119
> Content-Type: TEXT/PLAIN; CHARSET=US-ASCII; NAME="RNG.c.patch"
> Content-Transfer-Encoding: BASE64
> Content-ID: <Pine.SOL.4.33.0203011624131.3119@unix09.wehi.edu.au>
> Content-Description:
> Content-Disposition: ATTACHMENT; FILENAME="RNG.c.patch"
>
> LS0tIFJORy5jLm9sZAlGcmkgTWFyICAxIDA4OjQyOjQ1IDIwMDINCisrKyBS
> TkcuYwlGcmkgTWFyICAxIDE0OjI2OjA4IDIwMDINCkBAIC01NDMsNiArNTQz
> LDcgQEANCiAjZGVmaW5lIHJhbl94ICAgICAgICAgICAgIGR1bW15DQogDQog
> LyogPT09PT09PT09PT09PT09PT09PSAgS251dGggVEFPQ1AgPT09PT09PT09
> PT09PT09PT09PT09PT09PT0gKi8NCisvKiBGcm9tIGh0dHA6Ly93d3ctY3Mt
> ZmFjdWx0eS5TdGFuZm9yZC5FRFUvfmtudXRoL3Byb2dyYW1zL3JuZy5jICov
> DQogDQogICAgICAgICAgLyogUGxlYXNlIGRvIE5PVCBhbHRlciB0aGlzIHBh
> cnQgb2YgdGhlIGNvZGUgKi8NCiANCkBAIC01NTEsMTUgKzU1MiwxNyBAQA0K
> ICAqICAgIEl0IGlzIGV4cGxhaW5lZCBpbiBTZW1pbnVtZXJpY2FsIEFsZ29y
> aXRobXMsIDNyZCBlZGl0aW9uLCBTZWN0aW9uIDMuNg0KICAqICAgIChvciBp
> biB0aGUgZXJyYXRhIHRvIHRoZSAybmQgZWRpdGlvbiAtLS0gc2VlDQogICog
> ICAgICAgIGh0dHA6Ly93d3ctY3MtZmFjdWx0eS5zdGFuZm9yZC5lZHUvfmtu
> dXRoL3Rhb2NwLmh0bWwNCi0gKiAgICBpbiB0aGUgY2hhbmdlcyB0byBwYWdl
> cyAxNzEgYW5kIGZvbGxvd2luZyBvZiBWb2x1bWUgMikuICAgICAgICAgICAg
> ICAqLw0KKyAqICAgIGluIHRoZSBjaGFuZ2VzIHRvIFZvbHVtZSAyIG9uIHBh
> Z2VzIDE3MSBhbmQgZm9sbG93aW5nKS4gICAgICAgICAgICAgICovDQorDQor
> LyogICAgTi5CLiBUaGUgTU9ESUZJQ0FUSU9OUyBpbnRyb2R1Y2VkIGluIHRo
> ZSA5dGggcHJpbnRpbmcgKDIwMDIpIGFyZQ0KKyAgICAgIGluY2x1ZGVkIGhl
> cmU7IHRoZXJlJ3Mgbm8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCB0
> aGUgb3JpZ2luYWwuICovDQogDQogLyogICAgSWYgeW91IGZpbmQgYW55IGJ1
> Z3MsIHBsZWFzZSByZXBvcnQgdGhlbSBpbW1lZGlhdGVseSB0bw0KICAqICAg
> ICAgICAgICAgICAgICB0YW9jcEBjcy5zdGFuZm9yZC5lZHUNCiAgKiAgICAo
> YW5kIHlvdSB3aWxsIGJlIHJld2FyZGVkIGlmIHRoZSBidWcgaXMgZ2VudWlu
> ZSkuIFRoYW5rcyEgICAgICAgICAgICAqLw0KIA0KIC8qKioqKioqKioqKiog
> c2VlIHRoZSBib29rIGZvciBleHBsYW5hdGlvbnMgYW5kIGNhdmVhdHMhICoq
> KioqKioqKioqKioqKioqKiovDQotDQotLyogdGhlIG9sZCBDIGNhbGxpbmcg
> Y29udmVudGlvbnMgYXJlIHVzZWQgaGVyZSwgZm9yIHJlYXNvbnMgb2YgcG9y
> dGFiaWxpdHkgKi8NCisvKioqKioqKioqKioqIGluIHBhcnRpY3VsYXIsIHlv
> dSBuZWVkIHR3bydzIGNvbXBsZW1lbnQgYXJpdGhtZXRpYyAqKioqKioqKioq
> Lw0KIA0KICNkZWZpbmUgS0sgMTAwICAgICAgICAgICAgICAgICAgICAgLyog
> dGhlIGxvbmcgbGFnICovDQogI2RlZmluZSBMTCAgMzcgICAgICAgICAgICAg
> ICAgICAgICAvKiB0aGUgc2hvcnQgbGFnICovDQpAQCAtNTY4LDEwICs1NzEs
> MTMgQEANCiANCiAvKmxvbmcgcmFuX3hbS0tdOyAqLyAgICAgICAgICAgICAg
> ICAgICAvKiB0aGUgZ2VuZXJhdG9yIHN0YXRlICovDQogDQotLyogdm9pZCBy
> YW5fYXJyYXkobG9uZyBhYVtdLGludCBuKSAqLw0KKyNpZmRlZiBfX1NURENf
> Xw0KK3ZvaWQgcmFuX2FycmF5KGxvbmcgYWFbXSxpbnQgbikNCisjZWxzZQ0K
> IHZvaWQgcmFuX2FycmF5KGFhLG4pICAgIC8qIHB1dCBuIG5ldyByYW5kb20g
> bnVtYmVycyBpbiBhYSAqLw0KICAgbG9uZyAqYWE7ICAgLyogZGVzdGluYXRp
> b24gKi8NCiAgIGludCBuOyAgICAgIC8qIGFycmF5IGxlbmd0aCAobXVzdCBi
> ZSBhdCBsZWFzdCBLSykgKi8NCisjZW5kaWYNCiB7DQogICByZWdpc3RlciBp
> bnQgaSxqOw0KICAgZm9yIChqPTA7ajxLSztqKyspIGFhW2pdPXJhbl94W2pd
> Ow0KQEAgLTU4MCw1NyArNTg2LDU3IEBADQogICBmb3IgKDtpPEtLO2krKyxq
> KyspIHJhbl94W2ldPW1vZF9kaWZmKGFhW2otS0tdLHJhbl94W2ktTExdKTsN
> CiB9DQogDQorLyogdGhlIGZvbGxvd2luZyByb3V0aW5lcyBhcmUgZnJvbSBl
> eGVyY2lzZSAzLjYtLTE1ICovDQorLyogYWZ0ZXIgY2FsbGluZyByYW5fc3Rh
> cnQsIGdldCBuZXcgcmFuZG9tcyBieSwgZS5nLiwgIng9cmFuX2Fycl9uZXh0
> KCkiICovDQorDQorI2RlZmluZSBRVUFMSVRZIDEwMDkgLyogcmVjb21tZW5k
> ZWQgcXVhbGl0eSBsZXZlbCBmb3IgaGlnaC1yZXMgdXNlICovDQorbG9uZyBy
> YW5fYXJyX2J1ZltRVUFMSVRZXTsNCitsb25nIHJhbl9hcnJfc2VudGluZWw9
> LTE7DQorbG9uZyAqcmFuX2Fycl9wdHI9JnJhbl9hcnJfc2VudGluZWw7IC8q
> IHRoZSBuZXh0IHJhbmRvbSBudW1iZXIsIG9yIC0xICovDQorDQorI2RlZmlu
> ZSByYW5fYXJyX25leHQoKSAoKnJhbl9hcnJfcHRyPj0wPyAqcmFuX2Fycl9w
> dHIrKzogcmFuX2Fycl9jeWNsZSgpKQ0KK2xvbmcgcmFuX2Fycl9jeWNsZSgp
> DQorew0KKyAgcmFuX2FycmF5KHJhbl9hcnJfYnVmLFFVQUxJVFkpOw0KKyAg
> cmFuX2Fycl9idWZbMTAwXT0tMTsNCisgIHJhbl9hcnJfcHRyPXJhbl9hcnJf
> YnVmKzE7DQorICByZXR1cm4gcmFuX2Fycl9idWZbMF07DQorfQ0KKw0KICNk
> ZWZpbmUgVFQgIDcwICAgLyogZ3VhcmFudGVlZCBzZXBhcmF0aW9uIGJldHdl
> ZW4gc3RyZWFtcyAqLw0KICNkZWZpbmUgaXNfb2RkKHgpICAoKHgpJjEpICAg
> ICAgICAgIC8qIHVuaXRzIGJpdCBvZiB4ICovDQotI2RlZmluZSBldmVuaXpl
> KHgpICgoeCkmKE1NLTIpKSAgIC8qIG1ha2UgeCBldmVuICovDQogDQotLyog
> dm9pZCByYW5fc3RhcnQobG9uZyBzZWVkKSAqLw0KKyNpZmRlZiBfX1NURENf
> Xw0KK3ZvaWQgcmFuX3N0YXJ0KGxvbmcgc2VlZCkNCisjZWxzZQ0KIHZvaWQg
> cmFuX3N0YXJ0KHNlZWQpICAgIC8qIGRvIHRoaXMgYmVmb3JlIHVzaW5nIHJh
> bl9hcnJheSAqLw0KICAgbG9uZyBzZWVkOyAgICAgICAgICAgIC8qIHNlbGVj
> dG9yIGZvciBkaWZmZXJlbnQgc3RyZWFtcyAqLw0KKyNlbmRpZg0KIHsNCiAg
> IHJlZ2lzdGVyIGludCB0LGo7DQogICBsb25nIHhbS0srS0stMV07ICAgICAg
> ICAgICAgICAvKiB0aGUgcHJlcGFyYXRpb24gYnVmZmVyICovDQotICByZWdp
> c3RlciBsb25nIHNzPWV2ZW5pemUoc2VlZCsyKTsNCisgIHJlZ2lzdGVyIGxv
> bmcgc3M9KHNlZWQrMikmKE1NLTIpOw0KICAgZm9yIChqPTA7ajxLSztqKysp
> IHsNCiAgICAgeFtqXT1zczsgICAgICAgICAgICAgICAgICAgICAgLyogYm9v
> dHN0cmFwIHRoZSBidWZmZXIgKi8NCiAgICAgc3M8PD0xOyBpZiAoc3M+PU1N
> KSBzcy09TU0tMjsgLyogY3ljbGljIHNoaWZ0IDI5IGJpdHMgKi8NCiAgIH0N
> Ci0gIGZvciAoO2o8S0srS0stMTtqKyspIHhbal09MDsNCiAgIHhbMV0rKzsg
> ICAgICAgICAgICAgIC8qIG1ha2UgeFsxXSAoYW5kIG9ubHkgeFsxXSkgb2Rk
> ICovDQotICBzcz1zZWVkJihNTS0xKTsNCi0gIHQ9VFQtMTsgd2hpbGUgKHQp
> IHsNCi0gICAgZm9yIChqPUtLLTE7aj4wO2otLSkgeFtqK2pdPXhbal07ICAv
> KiAic3F1YXJlIiAqLw0KLSAgICBmb3IgKGo9S0srS0stMjtqPktLLUxMO2ot
> PTIpIHhbS0srS0stMS1qXT1ldmVuaXplKHhbal0pOw0KLSAgICBmb3IgKGo9
> S0srS0stMjtqPj1LSztqLS0pIGlmKGlzX29kZCh4W2pdKSkgew0KLSAgICAg
> IHhbai0oS0stTEwpXT1tb2RfZGlmZih4W2otKEtLLUxMKV0seFtqXSk7DQor
> ICBmb3IgKHNzPXNlZWQmKE1NLTEpLHQ9VFQtMTsgdDsgKSB7ICAgICAgIA0K
> KyAgICBmb3IgKGo9S0stMTtqPjA7ai0tKSB4W2oral09eFtqXSwgeFtqK2ot
> MV09MDsgLyogInNxdWFyZSIgKi8NCisgICAgZm9yIChqPUtLK0tLLTI7aj49
> S0s7ai0tKQ0KKyAgICAgIHhbai0oS0stTEwpXT1tb2RfZGlmZih4W2otKEtL
> LUxMKV0seFtqXSksDQogICAgICAgeFtqLUtLXT1tb2RfZGlmZih4W2otS0td
> LHhbal0pOw0KLSAgICB9DQogICAgIGlmIChpc19vZGQoc3MpKSB7ICAgICAg
> ICAgICAgICAvKiAibXVsdGlwbHkgYnkgeiIgKi8NCiAgICAgICBmb3IgKGo9
> S0s7aj4wO2otLSkgIHhbal09eFtqLTFdOw0KICAgICAgIHhbMF09eFtLS107
> ICAgICAgICAgICAgLyogc2hpZnQgdGhlIGJ1ZmZlciBjeWNsaWNhbGx5ICov
> DQotICAgICAgaWYgKGlzX29kZCh4W0tLXSkpIHhbTExdPW1vZF9kaWZmKHhb
> TExdLHhbS0tdKTsNCisgICAgICB4W0xMXT1tb2RfZGlmZih4W0xMXSx4W0tL
> XSk7DQogICAgIH0NCiAgICAgaWYgKHNzKSBzcz4+PTE7IGVsc2UgdC0tOw0K
> ICAgfQ0KICAgZm9yIChqPTA7ajxMTDtqKyspIHJhbl94W2orS0stTExdPXhb
> al07DQogICBmb3IgKDtqPEtLO2orKykgcmFuX3hbai1MTF09eFtqXTsNCi19
> DQotDQotLyogdGhlIGZvbGxvd2luZyByb3V0aW5lcyBhcmUgZnJvbSBleGVy
> Y2lzZSAzLjYtLTE1ICovDQotLyogYWZ0ZXIgY2FsbGluZyByYW5fc3RhcnQs
> IGdldCBuZXcgcmFuZG9tcyBieSwgZS5nLiwgIng9cmFuX2Fycl9uZXh0KCki
> ICovDQotDQotI2RlZmluZSBRVUFMSVRZIDEwMDkgLyogcmVjb21tZW5kZWQg
> cXVhbGl0eSBsZXZlbCBmb3IgaGlnaC1yZXMgdXNlICovDQotbG9uZyByYW5f
> YXJyX2J1ZltRVUFMSVRZXTsNCi1sb25nIHJhbl9hcnJfc2VudGluZWw9LTE7
> DQotbG9uZyAqcmFuX2Fycl9wdHI9JnJhbl9hcnJfc2VudGluZWw7IC8qIHRo
> ZSBuZXh0IHJhbmRvbSBudW1iZXIsIG9yIC0xICovDQotDQotI2RlZmluZSBy
> YW5fYXJyX25leHQoKSAoKnJhbl9hcnJfcHRyPj0wPyAqcmFuX2Fycl9wdHIr
> KzogcmFuX2Fycl9jeWNsZSgpKQ0KLWxvbmcgcmFuX2Fycl9jeWNsZSgpDQot
> ew0KLSAgcmFuX2FycmF5KHJhbl9hcnJfYnVmLFFVQUxJVFkpOw0KLSAgcmFu
> X2Fycl9idWZbMTAwXT0tMTsNCi0gIHJhbl9hcnJfcHRyPXJhbl9hcnJfYnVm
> KzE7DQotICByZXR1cm4gcmFuX2Fycl9idWZbMF07DQorICBmb3IgKGo9MDtq
> PDEwO2orKykgcmFuX2FycmF5KHgsS0srS0stMSk7IC8qIHdhcm0gdGhpbmdz
> IHVwICovDQorICByYW5fYXJyX3B0cj0mcmFuX2Fycl9zZW50aW5lbDsNCiB9
> DQogDQogLyogPT09PT09PT09PT09PT09PT09PT09IGVuZCBvZiBLbnV0aCdz
> IGNvZGUgPT09PT09PT09PT09PT09PT09PT09PSAqLw0K
> ---559023410-1141662977-1014960253=:3119--
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar  1 07:53:07 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 1 Mar 2002 08:53:07 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200203010753.IAA11315@pubhealth.ku.dk>

>>>>> "terra" == terra  <terra@diku.dk> writes:

    terra> Full_Name: M Welinder Version: 1.4 OS: (src)
    terra> Submission from: (NULL) (192.5.35.38)

    terra> It seems to me that pexp can be improved in the
    terra> lower_tail=TRUE and log_p=FALSE case by using expm1.
    terra> Something like

    terra> -expm1 (-x / scale);

    terra> I think.

Thank you, "terra".
Similar thoughts had crossed my mind quite a few months ago,
e.g. you find in  src/nmath/qt.c :

	    /* FIXME: Following cutoff is machine-precision dependent
	       -----  Really, use stable impl. of expm1(y) == exp(y) - 1,
	              as it is in GNU's mathlib ..*/
	    if (y > 1e-6) /* was (y > 0.002) */
		y = exp(y) - 1;
	    else { /* Taylor of	 e^y -1 : */
		y = (0.5 * y + 1) * y;
	    }

Unfortunately,  expm1() is NOT    ANSI C / ISO C as far as I know.

For the `complementary' function, log1p(),
we have been having our own builtin (src/nmath/log1p.c) to use
(unfortunately, we've used it unconditionally; from 1.5.0 on, we
 will only use it when there's no system log1p() available).


For expm1() it's the same:  
We (i.e. the "configure" script) should check for availability of a system
"exp1m()" and when it is not available, for portability, we need
to provide our own version.

Since GNU's mathlib does provide it, the source code is
available under GPL, i.e. directly usable for R.

Would you provide a  src/nmath/expm1.c  file,
modeled after R-devel's (not R 1.4.x!)  src/nmath/log1p.c one?
Feel free to ask me for more advice,
thank you in advance!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Fri Mar  1 07:56:17 2002
From: Martin.Schlather@uni-bayreuth.de (Martin.Schlather@uni-bayreuth.de)
Date: Fri, 01 Mar 2002 08:56:17 +0100
Subject: [Rd] fft
Message-ID: <3C7F3421.FCBF66C@uni-bayreuth.de>

This is a multi-part message in MIME format.
--------------CFA855794B7333D088726B1A
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,

I have problems when calling fft_factor and fft_work directly in my 
C-code. Martin Maechler already told me that I should not do this -- 
anyway, the code works fine if the length of the vector is a multiple 
of 2,3,5.
If the length of the vector has different form I get, in some cases, a 
segmentation fault when work and iwork are freed (I use C's malloc to 
allocate memory for work and iwork). No or less problems occur if I 
allocate more memory than stated in  src/appl/fft.c.

However R's fft in called in R does not fail.

I would be grateful if anybody would tell me why this happens or to 
which fact I did not pay attention.
Please find attached the package containing the relevant files.
Details can be found in  tests/test.R

Many thanks in advance.
Martin



-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193          
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/
--------------CFA855794B7333D088726B1A
Content-Type: application/x-gzip;
 name="FFT_0.0.0.tar.gz"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="FFT_0.0.0.tar.gz"

H4sICKkyfzwCA0ZGVF8wLjAuMC50YXIA7Rrtctu40X+Lp9iT2xvSoShSEiXXtjzNJXbOM06a
UZxOZ9KMB6JACQ0JckDStu4m9+xdgB+WlcR36ZwV94q1LQKLBbjYXewu1jo9vejtPDB43tAb
BwE+PW88GuqnP6yeNex44+FgPBr4/cDf8Xx/6Ps7EOxsAcq8oBJgJw+XMS2WTH6Rjsl85w8H
p6j/5ydvnk3PXl+c/f3Vw+jf97xRre/P6T9AZWv9+6P+aDxCerSDwQ54Rv8PDq9p+IEu2AGg
IUC3C7NyAZJlqSzIP3DDPBUH4Ln4Qy54ESPdGsHTslim8gBeUllwAW8aCcJRhXFbzN9Kwbsz
upIMp7hzdkxeUi4K/GP/5fznLGNinh/AFKzjCfju0PVsxOah5Fmh2YYszXM+ixnyDLh+lJaS
M+mGfwIN5JyHTOS4pxevz6HeLfQhlYBvRULydnp+AMuiyA56vevra3fBUneDk94vieaV/A+f
/4SK3qPw//4oCIZjPP99H92A8f9b0n8uw8ehfxX/K/33vcDof5v6j6LCRdfuLr9B/PeDcXv+
R8NAxf+xH5j4vw3Y5ZGYs0iF/8sf3r64/JHsYhfj8i0GfELYDQZEAZ1nHbhK+RySFRqMNU9L
FV735rSgDobYAvaS+jnnTSuT9iEhuxiteUR2DDzu8x+GWz//A3842PD/Q29ozv9WgOxyEcbl
nMFRgtt3l8eYGN/i8mLOU0TeRcV8dhc3vUQH0XuaZTEP747QHOVWKNwtstMGmw4h2p1ENC/q
9Pwep6J9yixNY0CfQgB6e1AseQ5RKUKV8gPqKEcUA3zBLXa2gmk6Qy7gBRN4h8F0F4i+AVAx
x6E8h7Ml/aBfhteJauisAFw5SdFpcYYMyjQBdU4SvLP02psE0u71CPkZn4pBLq4cwBvFovrs
48MReSYc7iT0JlIfmcOkTKUDe/w6lR8O65k40lAoogp9BRPo9lVbrYadmgpbdTPDpq8IGqE1
a+JvhPcYiyOBdwj8CGWHjydPbPhZb5BHYCXv+Hs4Br/BgZLbZUTDIpV60IHvNVf6kdmHNVWl
U0uz8h2u3w7oRRX2uGHVXuNZPTYos5Yys9e21IhAgd76HuKQnwr3kVR/WsRIXVFA/1CvqrHH
6HHsimCCzUPo9bQ8MonC5mIBWSnxdojWkop4RUjFEFpVRRFZnb/Mof39l+g4rYYaNhtF5/wn
lka11dp2LXx8n7JDdkOTDPViBfv7zshWBlawvHCnoBSl3o6RFMI0yUqMr4oJbb1pHKfXis1Y
BWK0w2pFvHbHNERrnK0qRK0ISy2GgqiZ2FOixBVCa4hisWrGn6Ca9za5tb+bvHp7fq657vUI
/KYVG43eu1qzEG9WQrHeLtOoul0CR+/MV+ptbFudIN3+1KzhCH6bYes10IpEa1awblK1mfXW
CNaOgvjCOVAkanvW95ZyVu+89zaSVG1ftWtX4OjXO5V7UBOwqR72XXtuTLDiudrnRB9ebcj1
LlsDjQCtUr+Lv69XasbQYDXmYyUxyZjVvk/3mtd/JLUD/rp8TnF4x2VreiSoyCzlo+068/to
cr7Hnv9dnF2cnzzk/f9X7n9ek/+p+q83qO7/Y5P/bUn/dTm0hh/a+q6KTugVzPn9o5//6QP/
B/Ar6r+Doa/uf/7IN/XfLeq/uZBNv4n/D0bBhv4H/bHx/9u5/xOd+sFRt70w1+mcTiYnF9O3
J1VKqtJTnrsJLSS/0TS2jRdPNROzvgoBLM5ZhYuZWBTLCo2zsauwNHdxVbbApDGT6dya22pQ
EdWjVQpqgZxxMbduEXodR0Umy3NwMVtPlKwopbDcZ1ZHb6POiCfVDtZeNrfvdBvmbNsh68Hv
DnvqTuLYf652gJlyxz3lEi9vMZ911uUFFmJQXh8WNuhSAHYllSt3vhI0sTp4xDp62FEj9uPK
iNX5V1fSvPcI/P9o4OGvyv+CYGD8/3b1XxUmvoH/7w/7gw39D0aB+f7HVqB1fZewAWQ3Q4FE
qUyAj/ZH3SzsxlyUN92FKMkuleGyquTh2Ma8NK+bLf3tWL7KC5bU85x1ChwraFHm8Bkguwn9
dypV0//MGBfV2ND1N8dWjOoh6KOhbc5LRaE34fmfrDmnq6o58D4Zi6lYlHTBYErI7i7kaBow
dgfYaVy/hcdKe/tJ55fexcvXHZusjdh6WlUBzJiMWFjEK6Lj4/CvpAmGKtT5jrBJonp1gWYt
Mp8+PX9zYpNIh6J2jIurZiSkhdXB2BxFk46Tl4lFZ7mlQtwV02WtNsTW/SmzIruKkzXmLFEY
DPPdBAd0WYlo3ucpy0Gkhd7EJ1VMVYgvaQxTVT9nYCnCGS3CpQ00UhSqyEln6RXTBc5crZjq
6qdkNGMFmytM9xjesEXCBFqFirIRLeOCZFLtV++QiDCNVS/Y3z8EIdNr1UFjbEVY5yqyFDyy
FPWeolKFOWxP1Iej5000+h5R3qkOW9E7/yDw3n9RM+q/E7+z8JXcP2c1ukxIIU7FAgqeMIJW
w2ihE7ZGPGtJTR+eQCUN3/EcdMueTqMa2d1HqQn1rlQ5XMtOTXMwtems53BfKXOAL0sd4H7T
r/n5PaWsCqL/d/f/s1fPT/75Let/t/f/ofrih/7+19DEfwMGDBgwYMCAAQMGDBgwYMCAAQMG
DBgwYMCAAQMGDBgwYMCAAQMGfg3+A2oMCkwAUAAA
--------------CFA855794B7333D088726B1A--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From o.christensen@lancaster.ac.uk  Fri Mar  1 11:06:14 2002
From: o.christensen@lancaster.ac.uk (Ole Christensen)
Date: Fri, 01 Mar 2002 11:06:14 +0000
Subject: [Rd] fft
References: <3C7F3421.FCBF66C@uni-bayreuth.de>
Message-ID: <3C7F60A6.4648041B@lancs.ac.uk>

This is a multi-part message in MIME format.
--------------583A5CD90029B2577BD50770
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi Martin

I tried your FFT stuff. Here is my report:

1. I observed similar behaviour as you did (on my Linux machine with
R-1.4.1)

2. Changing from malloc to S_alloc seems to remove the problem (see
attachment).

I remember I had a similar problem long time ago (which caused me to
change from malloc to S_alloc everywhere) when calling the same function
twice (as you have). As far as I remember this problem was present on
Linux but not on Solaris. I could try running your test functions on
Solaris, but first I have to install a new R-version there (R-1.3.0 is
probably too old for this ?).

Hope this sheds a little light on the problem, but we are not there yet
(I do not understand the reason for the difference between S_alloc and
malloc). 


Ole


Martin.Schlather@uni-bayreuth.de wrote:
> 
> Hi,
> 
> I have problems when calling fft_factor and fft_work directly in my
> C-code. Martin Maechler already told me that I should not do this --
> anyway, the code works fine if the length of the vector is a multiple
> of 2,3,5.
> If the length of the vector has different form I get, in some cases, a
> segmentation fault when work and iwork are freed (I use C's malloc to
> allocate memory for work and iwork). No or less problems occur if I
> allocate more memory than stated in  src/appl/fft.c.
> 
> However R's fft in called in R does not fail.
> 
> I would be grateful if anybody would tell me why this happens or to
> which fact I did not pay attention.
> Please find attached the package containing the relevant files.
> Details can be found in  tests/test.R
> 
> Many thanks in advance.
> Martin
> 
> --
> Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
> Abteilung Bodenphysik            phone: +49 (0)921 55 2193
> Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
> D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/
> 
>   ------------------------------------------------------------------------
>                        Name: FFT_0.0.0.tar.gz
>    FFT_0.0.0.tar.gz    Type: Unix Tape Archive (application/x-tar)
>                    Encoding: base64

-- 
Ole F. Christensen
Department of Mathematics and Statistics
Fylde College, Lancaster University 
Lancaster, LA1 4YF, England
--------------583A5CD90029B2577BD50770
Content-Type: application/x-gzip;
 name="FFT_0.0.1.tar.gz"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="FFT_0.0.1.tar.gz"

H4sICO1bfzwCA0ZGVF8wLjAuMS50YXIA7Rprb9s4Ml+Pv2LWuVtIrixLsmznkjq4bpt0A6Td
wkkPB/SKgJYpm1u9QElJfIvub98hJfnVJrs9bNxcj4M0ooZDajjvYXp6etnde2BwHN8Z9vvy
2ev7Lj4dp+d76lnDnjP0e8NBv6/oXKffG+5Bf28HUOYFFQB7wVzwvGDJXXTZbO9bhFPU/4uT
i+fjszeXZz+9fhj9u44z8P079d/vrfTvDZHO9byevweO1v+DwxsafKAzdghoCNDpwKScgWBZ
KgryTyZyniaH4NiO7ZJLXkRItyIAI06nNkwW8NPpc5M8K4t5Kg7hFRUFT+AimEe0mDMBTyuM
vcT8o0x4Z0IXguESe8qOySvKkwL/sf9y/QuWsWSaH8IYjOMRuLZvOyZi80DwrFCHgCzNcz6J
mDoBfiBMS8GZsIO/gAJyzgOW5HjEl2/OoT48eJAKwM8iIXk7Pj+EeVFkh93uzc2NPWOpvcVK
99dYMUv+l/w/pkn3UcR/FwOAP0T/d3tOX8f/Xek/F8Hj0L/M/72e0r/naf3vUv9hWNgYGO35
V8j/bn+49P+BL+u/nuPp/L8T2OdhMmWhTP9XP7x9efUj2cdXzMQrDLiEsFvMgAm0nrfgOuVT
iBdoMMY0LWVCbU9pQS3MqQW04/o55c0oE+YRIfuYn3lI9jQ8bv8Pgp37f8/v+1vxv+cOhtr/
dwFknydBVE4ZPI2xuLbnx1gJr3B5MeUpIjdREZ9s4sZXGCC6z7Is4sHmDM1zJgqJWyFby2TT
IqTbhjLnyQwuaBSlAbS7a6sv1GZQR6SKwkiswgSjaJsXVw0i5/9haWgUpkkIUQEqpHlRV/j3
hCkVpSZpGgFGKQKAzBRznkNYJoFsG5A1liOKAbK8wmLLM04neC54yRLsirCABqKaCJpMcSrP
4WxOP6iPYUtSTZ0VgDtjy8RDzpBBkcYgPS/Gvqe7bEaQFiVAfsGnZJAn1xZgUzKrfnv4sJI8
SyxuxfQ2lL8yiwmRCgva/CYVH47qlTjTUEiiCn0NI+h4cix3w5eaCkf1MMOhKwkaoTV74k+I
rZDBkcA5Av4UZYePJ09M+EUdkIfYEL7j7+EY3AYHUm5XIQ2KVKhJC75XXKlHZh7VVJWVGIqV
73D/5YTaVGKPG1bNNZ7lY4syW1Jm5tqRGhFIUEdvIw75qXAfSfVPiRipKwrwjtSuCnuMMcys
CEY4PIJuV8kjEyhsab5ZKbDDRGtJk2hBSMUQWlVFERqtv01h+fPvpGUtNdSw2Si6NuZKAaZZ
Cx+/J+2Q3dI4Q70Y/YMDa2BKAytYXthjkIqSX8fcDEEaZyVmbMmEst4UHeVGshlJR0I7rHbE
Rj6iAVrjZFEhakUYcjMURM1EW4pSuZqPYjFqxp+gmtvb3JrfjV6/PT9XXHe7NevtP7Rvo9d7
92w24s1OKNzVNo3Cl1vg7OZ66VywzU4TWda4sKD5+j0fv9j4qgop6/TSohp3kk7bjDf8CJ7C
H/MktQOabbK0Y1i34dquu2sEa76X3OF4kkQexvjekNHxnfPeRJJq7MpxHXss9XmrikdyAQ7l
w9x0oMbmK56rc45UtFCeU59y6REhoBuob/H39U7NHHqIwnys7CcUjBnLD6q31fdRpx+buP9l
hankcyNTKHokqMgMmRrMuoT9SL7V+u/y7PL85CH7/9/p/xDd9H/ewKn6f3eg678d6b++/6zh
h9X9LuYSdCbds33r/d/4gf8C+AX3vz3flfe/ztDT97871H/TkI2/SvzvD/pb+vd8R8f/3fT/
RFVM8LSzbG/rKkhVYqPL8duTqp6TtR3P7ZgWgt8qGtPENlGuxGKpQgCLclbhIpbMinmFxtX4
KrE0t3FXNsNaKxPp1JiaclIS1bNV5WaAmPBkaqwQah9LZibDsXAzUy0UrChFYtjPjZY6Rl1O
jqoTrH1sam68NsyZpkXWk98Ge7Kat8y/VifAArNln3KBrVbEJ611eYGBGJTXh5kJqnHHV0HF
wp4uEhobLXSxlpq25Iz5uApJ6f+ygcy7jyD+D/q9QU/e/7uDoa/j/271X10jfIX47/leXf8P
es5A/l8Q1xsOPB3/dwHL0HcFW0D2s4hiZyxi4IODQScLOhFPytvOLCnJPhXBvLp3w7mtdWle
D5f0q7l8gUKO63XWOgXOFbQoc/gMkP2Y/pwKOXQ/M8eTas633e25BaNqCjw0tO11aVKoQzju
J3tO6aIa9pxP5iKazEo6YzAmZH8f8hJz3tDu4UsT+g10KxXtR61fu5ev3rRMsjZjqmXVfV3G
RMiCIloQlR/9v5MmGcpU51qJSWL5Vt9rrGXm02fnFycmCVUqWs7x5LqZCWhhtDA3h+GoZeVl
bNBJbsgUd83UndAyxdbvY2aEZpUna8xZLDGY5jsxTqg7GaJ4n6YshyQt1CE+uXOU1+YljWAs
b7sZGJJwQotgbgINJYW8kqST9Jqp68hc7piqu0rBaMYKNpWYzjFcsFnMErQKmWVDWkYFyYQ8
rzohSYI0km/9g4MjSER6I1/QGJcirGsVUSY8NCR1W1LJWy0cj+QvS60bKfQ9oty4yzXCd+5h
33l/p2bk3xL+ZOFLuX/OatQdG4UoTWZQ8JgRtBpGC1WwNeJZK2o8eAKVNFzLsTAsO6qMamR3
H6UiVKeSl9dKdnKZhaVNa72G+0KZA9wtdYD7Tb/m58+UsrxH/L/r/89evzj519e8/1v1//7Q
7Vf//6un878GDRo0aNCgQYMGDRo0aNCgQYMGDRo0aNCgQYMGDRo0aNCgQYMGDb8HvwE4vgnp
AFAAAA==
--------------583A5CD90029B2577BD50770--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From terra@diku.dk  Fri Mar  1 14:58:08 2002
From: terra@diku.dk (terra@diku.dk)
Date: Fri, 1 Mar 2002 15:58:08 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200203011458.PAA16714@pubhealth.ku.dk>



If you want an expm1, this will do just fine, given the availability
of log1p.  It compares well with Solaris' expm1.  (And, luckily, is
much better than just exp(x)-1...)

Morten



double
myexpm1 (double x)
{
  double y;

  if (fabs (x) > 1e-6)
    {
      y = exp (x) - 1;
      if (y > 10000)
      return y;
    }
  else
    y = (x / 2 + 1) * x; /* Taylor expansion */

  /* Newton step.  */
  y -= (1 + y) * (log1p (y) - x);
  return y;
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmf@atmiserv.com  Fri Mar  1 15:19:57 2002
From: jmf@atmiserv.com (jmf@atmiserv.com)
Date: Fri, 1 Mar 2002 16:19:57 +0100 (MET)
Subject: [Rd] Setting working directory (PR#1338)
Message-ID: <200203011519.QAA16850@pubhealth.ku.dk>

Full_Name: Jeffrey M. Freedman
Version: 1.4.1
OS: Mac OSX
Submission from: (NULL) (169.226.200.51)


I'm running R version 1.4.1 (NOT DARWIN VERSION) and it crashes every time I set
a working directory (either from the menu or using setwd) to a path that is
longer than a certain number of characters. This was not a problem in version
1.3.1.

Thank you.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar  1 17:30:48 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 1 Mar 2002 09:30:48 -0800 (PST)
Subject: [Rd] Setting working directory (PR#1338)
In-Reply-To: <200203011519.QAA16850@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203010930250.248186-100000@homer05.u.washington.edu>

On Fri, 1 Mar 2002 jmf@atmiserv.com wrote:

> Full_Name: Jeffrey M. Freedman
> Version: 1.4.1
> OS: Mac OSX
> Submission from: (NULL) (169.226.200.51)
>
>
> I'm running R version 1.4.1 (NOT DARWIN VERSION) and it crashes every time I set
> a working directory (either from the menu or using setwd) to a path that is
> longer than a certain number of characters. This was not a problem in version
> 1.3.1.

WHAT number of characters (ie can you give us an example).

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar  1 20:23:55 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 1 Mar 2002 21:23:55 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200203012023.VAA17931@pubhealth.ku.dk>

>>>>> "Morten" == Morten Welinder <terra@diku.dk> writes:

    Morten> If you want an expm1, this will do just fine, given
    Morten> the availability of log1p.  It compares well with
    Morten> Solaris' expm1.  (And, luckily, is much better than
    Morten> just exp(x)-1...)

    Morten> Morten

looks very reasonable;  this might make it 
(no promises yet).

Martin

    Morten> double
    Morten> myexpm1 (double x)
    Morten> {
    Morten> double y;

    Morten> if (fabs (x) > 1e-6)
    Morten> {
    Morten> y = exp (x) - 1;
    Morten> if (y > 10000)
    Morten> return y;
    Morten> }
    Morten> else
    Morten> y = (x / 2 + 1) * x; /* Taylor expansion */

    Morten> /* Newton step.  */
    Morten> y -= (1 + y) * (log1p (y) - x);
    Morten> return y;
    Morten> }


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Fri Mar  1 20:31:42 2002
From: jago@mclink.it (Stefano Iacus)
Date: Fri, 1 Mar 2002 21:31:42 +0100
Subject: [Rd] Setting working directory (PR#1338)
In-Reply-To: <200203011519.QAA16850@pubhealth.ku.dk>
Message-ID: <57294498-2D53-11D6-AD9E-003065CC4CB8@mclink.it>

Yes, I'm investigating that.

Normally path longer then 255 chars are not allowed. I'll try to fix 
this in time for 1.5.0

stefano

On Venerdì, marzo 1, 2002, at 04:19 , jmf@atmiserv.com wrote:

> Full_Name: Jeffrey M. Freedman
> Version: 1.4.1
> OS: Mac OSX
> Submission from: (NULL) (169.226.200.51)
>
>
> I'm running R version 1.4.1 (NOT DARWIN VERSION) and it crashes every 
> time I set
> a working directory (either from the menu or using setwd) to a path 
> that is
> longer than a certain number of characters. This was not a problem in 
> version
> 1.3.1.
>
> Thank you.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar  1 22:55:10 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 1 Mar 2002 14:55:10 -0800 (PST)
Subject: [Rd] Setting working directory (PR#1338)
In-Reply-To: <200203011519.QAA16850@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203011441490.248186-100000@homer05.u.washington.edu>

On Fri, 1 Mar 2002 jmf@atmiserv.com wrote:

> Full_Name: Jeffrey M. Freedman
> Version: 1.4.1
> OS: Mac OSX
> Submission from: (NULL) (169.226.200.51)
>
>
> I'm running R version 1.4.1 (NOT DARWIN VERSION) and it crashes every time I set
> a working directory (either from the menu or using setwd) to a path that is
> longer than a certain number of characters. This was not a problem in version
> 1.3.1.


I can duplicate this.

setwd("Macintosh HD:Users:thomas:pointless:pointless:pointless:pointless")
getwd()
crashes (the directory does exist)

The error doesn't depend on levels of nesting (replacing 'pointless' by
'a' removes the crash), and it doesn't require the directory to exist

setwd("R is free software and comes with ABSOLUTELY NO WARRANTY. You are welcome to redistribute it under certain conditions.")
getwd()

which is a legal, non existent path, causes the crash.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From daven@llnl.gov  Sat Mar  2 00:19:27 2002
From: daven@llnl.gov (daven@llnl.gov)
Date: Sat, 2 Mar 2002 01:19:27 +0100 (MET)
Subject: [Rd] GNU tar does not ignore files in .Rbuildignore (PR#1339)
Message-ID: <200203020019.BAA18363@pubhealth.ku.dk>

Full_Name: David O. Nelson
Version: 1.4.1
OS: solaris 2.7
Submission from: (NULL) (128.115.150.74)


Putting patterns in .Rbuildignore has no effect when the tar being used is gnu
tar (1.13) on solaris 2.7, whilst /usr/sbin/tar works perfectly.

TO REPRODUCE:

The current directory contains a source package directory ./mypkg...

bimini.jgi-psf.org% echo >mypkg/foo
bimini.jgi-psf.org% echo "foo" >mypkg/.Rbuildignore
bimini.jgi-psf.org% R CMD build mypkg
* checking for file `mypkg/DESCRIPTION' ... OK
* preparing `mypkg':
* checking whether `INDEX' is up-to-date ... NO
* creating new INDEX
* removing junk files
* building `mypkg_0.1.tar.gz'

bimini.jgi-psf.org% gzcat mypkg_0.1.tar.gz |tar tf -
mypkg/
mypkg/DESCRIPTION
mypkg/R/
mypkg/R/First.lib.R
mypkg/INDEX
mypkg/man/
mypkg/man/First.lib.Rd
bimini.jgi-psf.org% setenv PATH /usr/local/bin:$PATH
bimini.jgi-psf.org% tar --version
tar (GNU tar) 1.13

Copyright (C) 1988, 92,93,94,95,96,97,98, 1999 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

Written by John Gilmore and Jay Fenlason.
bimini.jgi-psf.org% R CMD build mypkg
* checking for file `mypkg/DESCRIPTION' ... OK
* preparing `mypkg':
* checking whether `INDEX' is up-to-date ... OK
* removing junk files
* building `mypkg_0.1.tar.gz'

bimini.jgi-psf.org% gzcat mypkg_0.1.tar.gz | tar tf -
mypkg/
mypkg/foo
mypkg/DESCRIPTION
mypkg/.Rbuildignore
mypkg/R/
mypkg/R/First.lib.R
mypkg/INDEX
mypkg/man/
mypkg/man/First.lib.Rd
bimini.jgi-psf.org% 


THE PROBLEM:

The exclude file produced by build and placed in /tmp/Rbuild.$$ contain file
names of the form mypkg/xxx, where mypkg is the package directory and xxx is the
path name relative to mypkg. This is the format accepted by /usr/sbin/tar,
whilst gnu tar expects patterns without the preceding package name mypkg/.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar  2 07:56:55 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 2 Mar 2002 08:56:55 +0100 (MET)
Subject: [Rd] GNU tar does not ignore files in .Rbuildignore (PR#1339)
Message-ID: <200203020756.IAA18816@pubhealth.ku.dk>

This appears to be a bug in GNU tar 1.13 and not in R.  I can confirm it
for that version of tar on Solaris, but was aware that it went away when
the cygwin port moved to later versions.  All of 1.13.17 on Linux, 1.13.19
on cygwin and 1.13.25 (which I have just built on Solaris from
alpha.gnu.org) work correctly.  My memory is that 1.12 used to work, too.

Assuming info is finding the correct manual for 1.13, my reading of the
definition of exclude patterns is that build has it correct.

I don't like using alpha software in production work, but the lack of a GNU
tar release since 1999 makes this essential and it looks like all the
common Linux distributions supply later versions.

On Sat, 2 Mar 2002 daven@llnl.gov wrote:

> Full_Name: David O. Nelson
> Version: 1.4.1
> OS: solaris 2.7
> Submission from: (NULL) (128.115.150.74)
>
>
> Putting patterns in .Rbuildignore has no effect when the tar being used is gnu
> tar (1.13) on solaris 2.7, whilst /usr/sbin/tar works perfectly.
>
> TO REPRODUCE:
>
> The current directory contains a source package directory ./mypkg...
>
> bimini.jgi-psf.org% echo >mypkg/foo
> bimini.jgi-psf.org% echo "foo" >mypkg/.Rbuildignore
> bimini.jgi-psf.org% R CMD build mypkg
> * checking for file `mypkg/DESCRIPTION' ... OK
> * preparing `mypkg':
> * checking whether `INDEX' is up-to-date ... NO
> * creating new INDEX
> * removing junk files
> * building `mypkg_0.1.tar.gz'
>
> bimini.jgi-psf.org% gzcat mypkg_0.1.tar.gz |tar tf -
> mypkg/
> mypkg/DESCRIPTION
> mypkg/R/
> mypkg/R/First.lib.R
> mypkg/INDEX
> mypkg/man/
> mypkg/man/First.lib.Rd
> bimini.jgi-psf.org% setenv PATH /usr/local/bin:$PATH
> bimini.jgi-psf.org% tar --version
> tar (GNU tar) 1.13
>
> Copyright (C) 1988, 92,93,94,95,96,97,98, 1999 Free Software Foundation, Inc.
> This is free software; see the source for copying conditions.  There is NO
> warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
>
> Written by John Gilmore and Jay Fenlason.
> bimini.jgi-psf.org% R CMD build mypkg
> * checking for file `mypkg/DESCRIPTION' ... OK
> * preparing `mypkg':
> * checking whether `INDEX' is up-to-date ... OK
> * removing junk files
> * building `mypkg_0.1.tar.gz'
>
> bimini.jgi-psf.org% gzcat mypkg_0.1.tar.gz | tar tf -
> mypkg/
> mypkg/foo
> mypkg/DESCRIPTION
> mypkg/.Rbuildignore
> mypkg/R/
> mypkg/R/First.lib.R
> mypkg/INDEX
> mypkg/man/
> mypkg/man/First.lib.Rd
> bimini.jgi-psf.org%
>
>
> THE PROBLEM:
>
> The exclude file produced by build and placed in /tmp/Rbuild.$$ contain file
> names of the form mypkg/xxx, where mypkg is the package directory and xxx is the
> path name relative to mypkg. This is the format accepted by /usr/sbin/tar,
> whilst gnu tar expects patterns without the preceding package name mypkg/.
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Mar  2 15:58:18 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 2 Mar 2002 16:58:18 +0100
Subject: [Rd] pweibull.c (PR#1334)
In-Reply-To: <200202282048.VAA09961@pubhealth.ku.dk>
References: <200202282048.VAA09961@pubhealth.ku.dk>
Message-ID: <15488.63130.426668.170319@gargle.gargle.HOWL>

>>>>> "Morten" == Morten Welinder <terra@diku.dk> writes:

    Morten> Full_Name: M Welinder Version: 1.4 OS: (src)
    Morten> Submission from: (NULL) (192.5.35.38)


    Morten> It seems to me that pweibull can be improved in the
    Morten> lower_tail=TRUE and log_p=FALSE case by using expm1.
    Morten> Something like

    Morten> -expm1(-pow(x / scale, shape)),

yes; now that in R-devel (1.5.0 to be)
 expm1() is guaranteed to be available -- I've changed it there.

Note that this is not only for log_p=FALSE, but for both cases
of lower_tail=TRUE

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Sat Mar  2 16:02:27 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat, 2 Mar 2002 17:02:27 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200203021602.RAA19606@pubhealth.ku.dk>

>>>>> "Morten" == Morten Welinder <terra@diku.dk> writes:

    Morten> If you want an expm1, this will do just fine, given
    Morten> the availability of log1p.  It compares well with
    Morten> Solaris' expm1.  (And, luckily, is much better than
    Morten> just exp(x)-1...)

yes, it looks fine; I've compared it with several other versions
(in R, of course).

I've added it for R-devel -- only when there's no system expm1().

    Morten> double myexpm1 (double x) { double y;

    Morten>   if (fabs (x) > 1e-6) { y = exp (x) - 1; if (y >
    Morten> 10000) return y; } else y = (x / 2 + 1) * x; /*
    Morten> Taylor expansion */

    Morten>   /* Newton step.  */ y -= (1 + y) * (log1p (y) -
    Morten> x); return y; }

I've also improved pexp() following your suggestion -- but note my
answer to #1334 (pweibull) which applies here as well!

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From schutz@wehi.edu.au  Sun Mar  3 03:17:10 2002
From: schutz@wehi.edu.au (schutz@wehi.edu.au)
Date: Sun, 3 Mar 2002 04:17:10 +0100 (MET)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
Message-ID: <200203030317.EAA20430@pubhealth.ku.dk>

Prof Brian D Ripley wrote:

>Attachments don't really work with R-bugs.  To save us trying to unpick
>this manually, could you re-send it as the body of a message to R-bugs
>in reply to this one, or quoting (PR#1336) in the subject, please?

Sorry about that (Pine sometimes modify lines of the body without warning,
so I preferred using an attachment). Here is the patch for src/main/RNG.c.

Frédéric
---
>> Don Knuth recently updated its RNG, following the discovery of a
>> weakness in the seed initialisation (see
>> http://Sunburn.Stanford.EDU/~knuth/news02.html), so I believe that the
>> corresponding code in R should be updated as well. If it may be usefull,
>> I attach a patch to do the change.
>>
>> Notes:
>>
>>   - only a few lines of code have really changed, but the order of the
>>     functions has changed in Knuth's original code, so the patch is
>>     longer than it should really be;
>>   - Despite Knuth's request that no change should be made to the code,
>>     the present R code (1.5.0-devel and previous) contains a change (the
>>     line "long ran_x[KK];" is commented, and ran_x is defined elsewhere
>>     in the program). The patch contains the _same_ change; I let you
>>     decide if this is acceptable in regard to Knuth's request.

--- RNG.c.old	Fri Mar  1 08:42:45 2002
+++ RNG.c	Fri Mar  1 14:26:08 2002
@@ -543,6 +543,7 @@
 #define ran_x             dummy
 
 /* ===================  Knuth TAOCP ========================== */
+/* From http://www-cs-faculty.Stanford.EDU/~knuth/programs/rng.c */
 
          /* Please do NOT alter this part of the code */
 
@@ -551,15 +552,17 @@
  *    It is explained in Seminumerical Algorithms, 3rd edition, Section 3.6
  *    (or in the errata to the 2nd edition --- see
  *        http://www-cs-faculty.stanford.edu/~knuth/taocp.html
- *    in the changes to pages 171 and following of Volume 2).              */
+ *    in the changes to Volume 2 on pages 171 and following).              */
+
+/*    N.B. The MODIFICATIONS introduced in the 9th printing (2002) are
+      included here; there's no backwards compatibility with the original. */
 
 /*    If you find any bugs, please report them immediately to
  *                 taocp@cs.stanford.edu
  *    (and you will be rewarded if the bug is genuine). Thanks!            */
 
 /************ see the book for explanations and caveats! *******************/
-
-/* the old C calling conventions are used here, for reasons of portability */
+/************ in particular, you need two's complement arithmetic **********/
 
 #define KK 100                     /* the long lag */
 #define LL  37                     /* the short lag */
@@ -568,10 +571,13 @@
 
 /*long ran_x[KK]; */                   /* the generator state */
 
-/* void ran_array(long aa[],int n) */
+#ifdef __STDC__
+void ran_array(long aa[],int n)
+#else
 void ran_array(aa,n)    /* put n new random numbers in aa */
   long *aa;   /* destination */
   int n;      /* array length (must be at least KK) */
+#endif
 {
   register int i,j;
   for (j=0;j<KK;j++) aa[j]=ran_x[j];
@@ -580,57 +586,57 @@
   for (;i<KK;i++,j++) ran_x[i]=mod_diff(aa[j-KK],ran_x[i-LL]);
 }
 
+/* the following routines are from exercise 3.6--15 */
+/* after calling ran_start, get new randoms by, e.g., "x=ran_arr_next()" */
+
+#define QUALITY 1009 /* recommended quality level for high-res use */
+long ran_arr_buf[QUALITY];
+long ran_arr_sentinel=-1;
+long *ran_arr_ptr=&ran_arr_sentinel; /* the next random number, or -1 */
+
+#define ran_arr_next() (*ran_arr_ptr>=0? *ran_arr_ptr++: ran_arr_cycle())
+long ran_arr_cycle()
+{
+  ran_array(ran_arr_buf,QUALITY);
+  ran_arr_buf[100]=-1;
+  ran_arr_ptr=ran_arr_buf+1;
+  return ran_arr_buf[0];
+}
+
 #define TT  70   /* guaranteed separation between streams */
 #define is_odd(x)  ((x)&1)          /* units bit of x */
-#define evenize(x) ((x)&(MM-2))   /* make x even */
 
-/* void ran_start(long seed) */
+#ifdef __STDC__
+void ran_start(long seed)
+#else
 void ran_start(seed)    /* do this before using ran_array */
   long seed;            /* selector for different streams */
+#endif
 {
   register int t,j;
   long x[KK+KK-1];              /* the preparation buffer */
-  register long ss=evenize(seed+2);
+  register long ss=(seed+2)&(MM-2);
   for (j=0;j<KK;j++) {
     x[j]=ss;                      /* bootstrap the buffer */
     ss<<=1; if (ss>=MM) ss-=MM-2; /* cyclic shift 29 bits */
   }
-  for (;j<KK+KK-1;j++) x[j]=0;
   x[1]++;              /* make x[1] (and only x[1]) odd */
-  ss=seed&(MM-1);
-  t=TT-1; while (t) {
-    for (j=KK-1;j>0;j--) x[j+j]=x[j];  /* "square" */
-    for (j=KK+KK-2;j>KK-LL;j-=2) x[KK+KK-1-j]=evenize(x[j]);
-    for (j=KK+KK-2;j>=KK;j--) if(is_odd(x[j])) {
-      x[j-(KK-LL)]=mod_diff(x[j-(KK-LL)],x[j]);
+  for (ss=seed&(MM-1),t=TT-1; t; ) {       
+    for (j=KK-1;j>0;j--) x[j+j]=x[j], x[j+j-1]=0; /* "square" */
+    for (j=KK+KK-2;j>=KK;j--)
+      x[j-(KK-LL)]=mod_diff(x[j-(KK-LL)],x[j]),
       x[j-KK]=mod_diff(x[j-KK],x[j]);
-    }
     if (is_odd(ss)) {              /* "multiply by z" */
       for (j=KK;j>0;j--)  x[j]=x[j-1];
       x[0]=x[KK];            /* shift the buffer cyclically */
-      if (is_odd(x[KK])) x[LL]=mod_diff(x[LL],x[KK]);
+      x[LL]=mod_diff(x[LL],x[KK]);
     }
     if (ss) ss>>=1; else t--;
   }
   for (j=0;j<LL;j++) ran_x[j+KK-LL]=x[j];
   for (;j<KK;j++) ran_x[j-LL]=x[j];
-}
-
-/* the following routines are from exercise 3.6--15 */
-/* after calling ran_start, get new randoms by, e.g., "x=ran_arr_next()" */
-
-#define QUALITY 1009 /* recommended quality level for high-res use */
-long ran_arr_buf[QUALITY];
-long ran_arr_sentinel=-1;
-long *ran_arr_ptr=&ran_arr_sentinel; /* the next random number, or -1 */
-
-#define ran_arr_next() (*ran_arr_ptr>=0? *ran_arr_ptr++: ran_arr_cycle())
-long ran_arr_cycle()
-{
-  ran_array(ran_arr_buf,QUALITY);
-  ran_arr_buf[100]=-1;
-  ran_arr_ptr=ran_arr_buf+1;
-  return ran_arr_buf[0];
+  for (j=0;j<10;j++) ran_array(x,KK+KK-1); /* warm things up */
+  ran_arr_ptr=&ran_arr_sentinel;
 }
 
 /* ===================== end of Knuth's code ====================== */


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Mar  3 09:28:04 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 3 Mar 2002 09:28:04 +0000 (GMT)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
In-Reply-To: <200203030317.EAA20430@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0203030923530.27666-100000@auk.stats>

It's not that simple.  This is an new generator, incompatible with
the old one.

I am sure the `weakness' does not arise in reasonable R usage, but I was
amazed that Knuth was unaware of the problem (which I regard as
well-known): but then he is a theoretician.

I will have to add this as a separate generator, since we really, really
can't re-define random number generators and so make work unreproducible.

On Sun, 3 Mar 2002 schutz@wehi.edu.au wrote:

> Prof Brian D Ripley wrote:
>
> >Attachments don't really work with R-bugs.  To save us trying to unpick
> >this manually, could you re-send it as the body of a message to R-bugs
> >in reply to this one, or quoting (PR#1336) in the subject, please?
>
> Sorry about that (Pine sometimes modify lines of the body without warning,
> so I preferred using an attachment). Here is the patch for src/main/RNG.c.
>
> Frédéric
> ---
> >> Don Knuth recently updated its RNG, following the discovery of a
> >> weakness in the seed initialisation (see
> >> http://Sunburn.Stanford.EDU/~knuth/news02.html), so I believe that the
> >> corresponding code in R should be updated as well. If it may be usefull,
> >> I attach a patch to do the change.
> >>
> >> Notes:
> >>
> >>   - only a few lines of code have really changed, but the order of the
> >>     functions has changed in Knuth's original code, so the patch is
> >>     longer than it should really be;
> >>   - Despite Knuth's request that no change should be made to the code,
> >>     the present R code (1.5.0-devel and previous) contains a change (the
> >>     line "long ran_x[KK];" is commented, and ran_x is defined elsewhere
> >>     in the program). The patch contains the _same_ change; I let you
> >>     decide if this is acceptable in regard to Knuth's request.
>
> --- RNG.c.old	Fri Mar  1 08:42:45 2002
> +++ RNG.c	Fri Mar  1 14:26:08 2002
> @@ -543,6 +543,7 @@
>  #define ran_x             dummy
>
>  /* ===================  Knuth TAOCP ========================== */
> +/* From http://www-cs-faculty.Stanford.EDU/~knuth/programs/rng.c */
>
>           /* Please do NOT alter this part of the code */
>
> @@ -551,15 +552,17 @@
>   *    It is explained in Seminumerical Algorithms, 3rd edition, Section 3.6
>   *    (or in the errata to the 2nd edition --- see
>   *        http://www-cs-faculty.stanford.edu/~knuth/taocp.html
> - *    in the changes to pages 171 and following of Volume 2).              */
> + *    in the changes to Volume 2 on pages 171 and following).              */
> +
> +/*    N.B. The MODIFICATIONS introduced in the 9th printing (2002) are
> +      included here; there's no backwards compatibility with the original. */
>
>  /*    If you find any bugs, please report them immediately to
>   *                 taocp@cs.stanford.edu
>   *    (and you will be rewarded if the bug is genuine). Thanks!            */
>
>  /************ see the book for explanations and caveats! *******************/
> -
> -/* the old C calling conventions are used here, for reasons of portability */
> +/************ in particular, you need two's complement arithmetic **********/
>
>  #define KK 100                     /* the long lag */
>  #define LL  37                     /* the short lag */
> @@ -568,10 +571,13 @@
>
>  /*long ran_x[KK]; */                   /* the generator state */
>
> -/* void ran_array(long aa[],int n) */
> +#ifdef __STDC__
> +void ran_array(long aa[],int n)
> +#else
>  void ran_array(aa,n)    /* put n new random numbers in aa */
>    long *aa;   /* destination */
>    int n;      /* array length (must be at least KK) */
> +#endif
>  {
>    register int i,j;
>    for (j=0;j<KK;j++) aa[j]=ran_x[j];
> @@ -580,57 +586,57 @@
>    for (;i<KK;i++,j++) ran_x[i]=mod_diff(aa[j-KK],ran_x[i-LL]);
>  }
>
> +/* the following routines are from exercise 3.6--15 */
> +/* after calling ran_start, get new randoms by, e.g., "x=ran_arr_next()" */
> +
> +#define QUALITY 1009 /* recommended quality level for high-res use */
> +long ran_arr_buf[QUALITY];
> +long ran_arr_sentinel=-1;
> +long *ran_arr_ptr=&ran_arr_sentinel; /* the next random number, or -1 */
> +
> +#define ran_arr_next() (*ran_arr_ptr>=0? *ran_arr_ptr++: ran_arr_cycle())
> +long ran_arr_cycle()
> +{
> +  ran_array(ran_arr_buf,QUALITY);
> +  ran_arr_buf[100]=-1;
> +  ran_arr_ptr=ran_arr_buf+1;
> +  return ran_arr_buf[0];
> +}
> +
>  #define TT  70   /* guaranteed separation between streams */
>  #define is_odd(x)  ((x)&1)          /* units bit of x */
> -#define evenize(x) ((x)&(MM-2))   /* make x even */
>
> -/* void ran_start(long seed) */
> +#ifdef __STDC__
> +void ran_start(long seed)
> +#else
>  void ran_start(seed)    /* do this before using ran_array */
>    long seed;            /* selector for different streams */
> +#endif
>  {
>    register int t,j;
>    long x[KK+KK-1];              /* the preparation buffer */
> -  register long ss=evenize(seed+2);
> +  register long ss=(seed+2)&(MM-2);
>    for (j=0;j<KK;j++) {
>      x[j]=ss;                      /* bootstrap the buffer */
>      ss<<=1; if (ss>=MM) ss-=MM-2; /* cyclic shift 29 bits */
>    }
> -  for (;j<KK+KK-1;j++) x[j]=0;
>    x[1]++;              /* make x[1] (and only x[1]) odd */
> -  ss=seed&(MM-1);
> -  t=TT-1; while (t) {
> -    for (j=KK-1;j>0;j--) x[j+j]=x[j];  /* "square" */
> -    for (j=KK+KK-2;j>KK-LL;j-=2) x[KK+KK-1-j]=evenize(x[j]);
> -    for (j=KK+KK-2;j>=KK;j--) if(is_odd(x[j])) {
> -      x[j-(KK-LL)]=mod_diff(x[j-(KK-LL)],x[j]);
> +  for (ss=seed&(MM-1),t=TT-1; t; ) {
> +    for (j=KK-1;j>0;j--) x[j+j]=x[j], x[j+j-1]=0; /* "square" */
> +    for (j=KK+KK-2;j>=KK;j--)
> +      x[j-(KK-LL)]=mod_diff(x[j-(KK-LL)],x[j]),
>        x[j-KK]=mod_diff(x[j-KK],x[j]);
> -    }
>      if (is_odd(ss)) {              /* "multiply by z" */
>        for (j=KK;j>0;j--)  x[j]=x[j-1];
>        x[0]=x[KK];            /* shift the buffer cyclically */
> -      if (is_odd(x[KK])) x[LL]=mod_diff(x[LL],x[KK]);
> +      x[LL]=mod_diff(x[LL],x[KK]);
>      }
>      if (ss) ss>>=1; else t--;
>    }
>    for (j=0;j<LL;j++) ran_x[j+KK-LL]=x[j];
>    for (;j<KK;j++) ran_x[j-LL]=x[j];
> -}
> -
> -/* the following routines are from exercise 3.6--15 */
> -/* after calling ran_start, get new randoms by, e.g., "x=ran_arr_next()" */
> -
> -#define QUALITY 1009 /* recommended quality level for high-res use */
> -long ran_arr_buf[QUALITY];
> -long ran_arr_sentinel=-1;
> -long *ran_arr_ptr=&ran_arr_sentinel; /* the next random number, or -1 */
> -
> -#define ran_arr_next() (*ran_arr_ptr>=0? *ran_arr_ptr++: ran_arr_cycle())
> -long ran_arr_cycle()
> -{
> -  ran_array(ran_arr_buf,QUALITY);
> -  ran_arr_buf[100]=-1;
> -  ran_arr_ptr=ran_arr_buf+1;
> -  return ran_arr_buf[0];
> +  for (j=0;j<10;j++) ran_array(x,KK+KK-1); /* warm things up */
> +  ran_arr_ptr=&ran_arr_sentinel;
>  }
>
>  /* ===================== end of Knuth's code ====================== */
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From schutz@wehi.edu.au  Sun Mar  3 13:54:40 2002
From: schutz@wehi.edu.au (Frederic Schutz)
Date: Mon, 04 Mar 2002 00:54:40 +1100
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
In-Reply-To: <Pine.GSO.4.44.0203030923530.27666-100000@auk.stats>
References: <200203030317.EAA20430@pubhealth.ku.dk> <Pine.GSO.4.44.0203030923530.27666-100000@auk.stats>
Message-ID: <6ka48u0s4ptvkltf5o0pst8gca1gh0p384@4ax.com>

>It's not that simple.  This is an new generator, incompatible with
>the old one.
>
>I will have to add this as a separate generator, since we really, really
>can't re-define random number generators and so make work unreproducible.

I thought about that, but I do not know the source code well enough to add
a new generator. I let you do it the way you want.

Frédéric
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Mar  3 14:10:37 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 3 Mar 2002 14:10:37 +0000 (GMT)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
In-Reply-To: <6ka48u0s4ptvkltf5o0pst8gca1gh0p384@4ax.com>
Message-ID: <Pine.GSO.4.31.0203031409430.15096-100000@toucan.stats>

On Mon, 4 Mar 2002, Frederic Schutz wrote:

> >It's not that simple.  This is an new generator, incompatible with
> >the old one.
> >
> >I will have to add this as a separate generator, since we really, really
> >can't re-define random number generators and so make work unreproducible.
>
> I thought about that, but I do not know the source code well enough to add
> a new generator. I let you do it the way you want.

BTW, R already scrambled the seeds and so did not suffer from the weakness
being addressed by the incompatible change.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From w.huber@dkfz.de  Sun Mar  3 18:04:39 2002
From: w.huber@dkfz.de (w.huber@dkfz.de)
Date: Sun, 3 Mar 2002 19:04:39 +0100 (MET)
Subject: [Rd] optim: gr called at different parameter values than previous fn call if hessian=T (PR#1354)
Message-ID: <200203031804.TAA21826@pubhealth.ku.dk>

Full_Name: Wolfgang Huber
Version: 1.4.0
OS: OSF1
Submission from: (NULL) (193.174.62.46)


The documentation to "optim" (packpage base) says "It is guaranteed that `gr' 
will be called immediately after a call to `fn' at the same parameter values."
I found this not to be true when I called 

   optim(fn=fn,gr=gr,method="L-BFGS-B",hessian=T,...)

When I changed this to hessian=F), every single call to gr was indeed preceded
by
a call to fn at the same parameter values. Apparently the final calculation of 
the hessian violates the above guarantee. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From martin.schlather@uni-bayreuth.de  Mon Mar  4 08:04:54 2002
From: martin.schlather@uni-bayreuth.de (martin.schlather@uni-bayreuth.de)
Date: Mon, 4 Mar 2002 09:04:54 +0100 (MET)
Subject: [Rd] bessel_i (PR#1356)
Message-ID: <200203040804.JAA23319@pubhealth.ku.dk>

Full_Name: Martin Schlather
Version: 1.4.1
OS: Linux, Suse 7.3
Submission from: (NULL) (132.180.7.27)


Hi,

The following simple C-program causes my computer to break down after 
some time when called by .C("test") 

#include <Rmath.h>
void test(){
  for(;;) bessel_i(1.0, 1.0, 1.0);
}

since memory allocated by bessel_i is not freed, in contrast to the standalone
version of Rmath.
(Actually, a self-written package calls bessel_i about 3,000,000 times, 
 causing the same effect.)

Cheers,
Martin


PS:
A very simple package that calls test() can be found at
    http://www.geo.uni-bayreuth.de/~martin/filetransfer/MEMORY_0.0.0.tar.gz



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hyu@stats.uwo.ca  Tue Mar  5 20:19:47 2002
From: hyu@stats.uwo.ca (hyu@stats.uwo.ca)
Date: Tue, 5 Mar 2002 21:19:47 +0100 (MET)
Subject: [Rd] Matrix identification bug (PR#1361)
Message-ID: <200203052019.VAA08035@pubhealth.ku.dk>

Full_Name: Hao Yu
Version: 1.4.1
OS: Windws and Linux
Submission from: (NULL) (129.100.45.161)


Hi,
   Recently we did some benchmarks regarding matrix inverse operation and found
some strange things. See the following results (the package Matrix is most
updated).

1. load the function Toeplitz and library(Matrix)
"Toeplitz"
function(x)
{
        matrix(x[1 + abs(outer(seq(along = x), seq(along = x), FUN = "-"))], 
                byrow = T, ncol = length(x))
}
2. On a PIII 1.125GHz (256kb cache)desktop PC with win2k, the results are
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 38.25  0.22 42.01    NA    NA
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 28.01  0.17 30.94    NA    NA

On a PIII-M 1.2GHz (512kb cache) laptop PC with winxp pro, the results are
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 33.94  0.25 34.01    NA    NA
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 9.40  0.13 9.54    NA    NA

On a PIII Xeon 1GHz (256kb cache) RedHat 7.2 Linux, the results are
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 53.79  0.48 00.01    NA    NA
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 30.29  0.21 30.59    NA    NA

This was the first time that windows R outperformed linux R even PIII Xeon 1GHz
is slightly faster than PIII 1.125GHz. Notice the abnormal result 9.4s from
PIII-M 1.2GHz (cannot be three times faster). After using native fortran lapack
(call to dpotrf and dpotri returns 9s for PIII Xeon), I realized that R may
treat the matrix as a general matrix rather than symmetric except the abnormal
case.  To confirm this, I modified the R_LapackPP.cc in Matrix package and it
turned out that
    is.MMatrix() failed to return true.
Hence 
        if (checkClass(classes, "Hermitian")) 
            return new LaSymmMatDouble(x);
is not executed in static LaMatDouble* asLaMatrix(SEXP x). Instead
    if (isMatrix(x)) {
            return new LaGenMatDouble(x);  
        }
is used. 
After replaced
    return new LaGenMatDouble(x);   
with 
    return new LaSymmMatDouble(x);

the result was (PIII Xeon 1GHz RedHat 7.2 Linux))
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 9.76 0.22 9.97 0.00 0.00

Clearly there are some bugs in solve() and solve.Matrix(). Notice that all have
> is.Hermitian(Toeplitz(.5^seq(0,999)))
[1] TRUE


Thanks 
Hao Yu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  5 21:32:36 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 5 Mar 2002 22:32:36 +0100 (MET)
Subject: [Rd] Matrix identification bug (PR#1361)
Message-ID: <200203052132.WAA08217@pubhealth.ku.dk>

On Tue, 5 Mar 2002 hyu@stats.uwo.ca wrote:

> Full_Name: Hao Yu
> Version: 1.4.1
> OS: Windws and Linux
> Submission from: (NULL) (129.100.45.161)

[...]

> the result was (PIII Xeon 1GHz RedHat 7.2 Linux))
> > system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
> [1] 9.76 0.22 9.97 0.00 0.00
>
> Clearly there are some bugs in solve() and solve.Matrix(). Notice that all have

Nothing in this report suggests a bug in solve().  Can you please provide
some evidence for your claim (which is not `clear' to me), and

> solve
function (a, b, ...)
UseMethod("solve")

seems hard to get wrong!  (It matters: solve is part of R: solve.Matrix is
a contributed addon.)

Incidentally, these sort of timings are crucially dependent on the BLAS
library used, and in my experience that is a far larger factor that the OS
used.  However, that was not part of the report ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Thu Mar  7 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Mar 2002 07:15:03 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200203070615.g276F3517360@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1244 *
Subject: possible bug in det using method="qr"
From: armin@approximity.com
Date: Sat, 5 Jan 2002 01:48:13 +0100 (MET)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1257 *
Subject: documentation of `las' on `par' help page
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Fri, 11 Jan 2002 12:30:20 +0100
* PR# 1323 *
Subject: bug in options() - help page
From: Ole Christensen <o.christensen@lancaster.ac.uk>
Date: Sat, 23 Feb 2002 16:56:56 +0000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1248 *
Subject: piechart default colour
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Jan 2002 18:54:02 +0100
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1267 *
Subject: hashing NaN
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Wed, 16 Jan 2002 16:29:35 -0800 (PST)
--Patch put in R-devel for further testing.
* PR# 1301 *
Subject: incorrect handling of arrays of list elements
From: =?iso-8859-1?Q?Jens=20Oehlschl=E4gel?= <joehl@web.de>
Date: Thu, 7 Feb 2002 13:43:19 +0100

Directory:  Macintosh

* PR# 1318 *
Subject: Multiple macintosh() graphics devices
From: d.orme@ic.ac.uk
Date: Wed, 20 Feb 2002 16:41:27 +0100 (MET)
* PR# 1338 *
Subject: Setting working directory
From: jmf@atmiserv.com
Date: Fri, 1 Mar 2002 16:19:56 +0100 (MET)

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1321 *
Subject: Gnome causes different behaviour of some R functions 
From: alobo@ija.csic.es
Date: Fri, 22 Feb 2002 14:41:17 +0100 (MET)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1283 *
Subject: max/min of NULL gives MININT/MAXINT instead of -INF/+INF
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 14:36:52 -0500
--this was on purpose (type preserving); R 1.4.1 at least documents this
--We currently plan to return -/+ Inf from 1.5.0 on		-- MMä
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
* PR# 1312 *
Subject: latitude <-> longitude in quake.tab
From: ckhung@cyut.edu.tw
Date: Sat, 16 Feb 2002 01:35:20 +0100 (MET)
* PR# 1330 *
Subject:  itemize/item crashes R CMD check 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Tue, 26 Feb 2002 15:13:04 -0500
* PR# 1331 *
Subject: Bug in glm.fit?
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Wed, 27 Feb 2002 16:15:24 +0800 (WST)
* PR# 1333 *
Subject: Failed file("foo", "r") keeps file open?
From: hb@maths.lth.se
Date: Thu, 28 Feb 2002 17:20:02 +0100 (MET)
* PR# 1356 *
Subject: bessel_i
From: martin.schlather@uni-bayreuth.de
Date: Mon, 4 Mar 2002 09:04:50 +0100 (MET)
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  7 13:18:06 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2002 14:18:06 +0100
Subject: [Rd] R 1.5.0 scheduled for April 29th, feature freeze April 8
Message-ID: <x28z94zfch.fsf@blueberry.kubism.ku.dk>


The core team has decided to release R 1.5.0 on April 29th. Somewhat
earlier than maybe expected, but we realized that we needed a
phase-shift away from our usual cycle with main releases in June and
December since it was placing feature freezes just when several
members were in a creative phase due to end of teaching.

The roadmap is as follows

April 8 feature freeze on r-base
April 15 code freeze on r-base, feature freeze on recommended packages
April 22 code freeze on recommended packages, final round of platform testing

("code freeze" in the sense that only clear and critical bugs will get
fixed)

If you maintain R packages (on CRAN or otherwise), it would be a good
idea to track the development version (via rsync or the daily
snapshots) and see if anything needs changing. No changes affecting
packages are expected after April 15.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar  8 21:02:17 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Fri, 8 Mar 2002 22:02:17 +0100 (MET)
Subject: [Rd] 1st January isn't (PR#1370)
Message-ID: <200203082102.WAA01438@pubhealth.ku.dk>


In today's pre1.5.0

> ISOdate(2002,1,1)
[1] "2002-03-01 04:00:00 PST"

> ISOdate(2002,1,1)==ISOdate(2002,3,1)
[1] TRUE

It doesn't seem to happen for days other than 1/1

	-thomas

> version
         _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status   Under development (unstable)
major    1
minor    5.0
year     2002
month    03
day      08
language R



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a215020@onyx.fmr.com  Fri Mar  8 21:36:49 2002
From: a215020@onyx.fmr.com (a215020@onyx.fmr.com)
Date: Fri, 8 Mar 2002 22:36:49 +0100 (MET)
Subject: [Rd] Sys.putenv environment variables disappear (PR#1371)
Message-ID: <200203082136.WAA01499@pubhealth.ku.dk>

Environment variables set with Sys.putenv() disappear (i.e. become "")
after a while, especially after heavy-duty I/O.  Example:

  R> x <- matrix(1., 3000, 3000)
  R> save(x, file="myx.RData")
  R> Sys.putenv(HOME="/tmp")
  R> while (Sys.getenv("HOME") != "") {cat("ok\n"); load("myx.RData")}

The loop prints "ok" twice, then exits because HOME has been destroyed.

I'm running R-1.4.1 (I also saw this in earlier versions), under
Solaris 2.6.  Dave Kane reported this problem to R-help on 6/4/01, and
I reported it on 11/30/01, but nobody else has confirmed (or denied)
seeing it (except Kjetil Halvorsen did not see it on Windows).

FYI, my include/config.h file has "#define HAVE_PUTENV 1".  Here's the
usual version info.
Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar  8 21:47:51 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 8 Mar 2002 13:47:51 -0800 (PST)
Subject: [Rd] Sys.putenv environment variables disappear (PR#1371)
In-Reply-To: <200203082136.WAA01499@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203081344100.69958-100000@homer34.u.washington.edu>

On Fri, 8 Mar 2002 a215020@onyx.fmr.com wrote:

> Environment variables set with Sys.putenv() disappear (i.e. become "")
> after a while, especially after heavy-duty I/O.  Example:
>
>   R> x <- matrix(1., 3000, 3000)
>   R> save(x, file="myx.RData")
>   R> Sys.putenv(HOME="/tmp")
>   R> while (Sys.getenv("HOME") != "") {cat("ok\n"); load("myx.RData")}
>
> The loop prints "ok" twice, then exits because HOME has been destroyed.
>
> I'm running R-1.4.1 (I also saw this in earlier versions), under
> Solaris 2.6.  Dave Kane reported this problem to R-help on 6/4/01, and
> I reported it on 11/30/01, but nobody else has confirmed (or denied)
> seeing it (except Kjetil Halvorsen did not see it on Windows).
>

It's happening on Linux with the current source tree.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Fri Mar  8 21:54:10 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Fri, 8 Mar 2002 16:54:10 -0500
Subject: [Rd] Sys.putenv environment variables disappear (PR#1371)
In-Reply-To: <200203082136.WAA01499@pubhealth.ku.dk>; from a215020@onyx.fmr.com on Fri, Mar 08, 2002 at 10:36:49PM +0100
References: <200203082136.WAA01499@pubhealth.ku.dk>
Message-ID: <20020308165410.X11590@jimmy.harvard.edu>

On Fri, Mar 08, 2002 at 10:36:49PM +0100, a215020@onyx.fmr.com wrote:
> Environment variables set with Sys.putenv() disappear (i.e. become "")
> after a while, especially after heavy-duty I/O.  Example:
> 
>   R> x <- matrix(1., 3000, 3000)
>   R> save(x, file="myx.RData")
>   R> Sys.putenv(HOME="/tmp")
>   R> while (Sys.getenv("HOME") != "") {cat("ok\n"); load("myx.RData")}
> 

  We use 
   for (i = 0; i < n; i++) {
        LOGICAL(ans)[i] = putenv(CHAR(STRING_ELT(vars, i))) == 0;
    }
 and the man page for RedHat says:
         int putenv(const char *string);

DESCRIPTION
       The  putenv()  function adds or changes the value of envi-
       ronment variables.  The argument string  is  of  the  form
       name=value.   If  name does not already exist in the envi-
       ronment, then string is added to the environment.  If name
       does  exist,  then the value of name in the environment is
       changed to value.  The string pointed to by string becomes
       part  of  the  environment, so altering the string changes
       the environment.

  So, after we UNPROTECT this is bad. Seems like we need to 
  do something different.


> The loop prints "ok" twice, then exits because HOME has been destroyed.
> 
> I'm running R-1.4.1 (I also saw this in earlier versions), under
> Solaris 2.6.  Dave Kane reported this problem to R-help on 6/4/01, and
> I reported it on 11/30/01, but nobody else has confirmed (or denied)
> seeing it (except Kjetil Halvorsen did not see it on Windows).
> 
> FYI, my include/config.h file has "#define HAVE_PUTENV 1".  Here's the
> usual version info.
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 4.1
>  year = 2002
>  month = 01
>  day = 30
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base
> 
>                               -- David Brahm (brahm@alum.mit.edu)
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar  9 02:22:14 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Mar 2002 03:22:14 +0100
Subject: [Rd] 1st January isn't (PR#1370)
In-Reply-To: <200203082102.WAA01438@pubhealth.ku.dk>
References: <200203082102.WAA01438@pubhealth.ku.dk>
Message-ID: <x23czatr8p.fsf@blueberry.kubism.ku.dk>

tlumley@u.washington.edu writes:

> In today's pre1.5.0
> 
> > ISOdate(2002,1,1)
> [1] "2002-03-01 04:00:00 PST"
> 
> > ISOdate(2002,1,1)==ISOdate(2002,3,1)
> [1] TRUE
> 
> It doesn't seem to happen for days other than 1/1
> 
> 	-thomas

Confirmed. I don't see how it could have happened from anything
other than this change

diff -u -r1.16 -r1.17
--- src/main/datetime.c 31 Oct 2001 13:35:39 -0000      1.16
+++ src/main/datetime.c 6 Mar 2002 11:27:37 -0000       1.17
@@ -674,6 +674,10 @@
            !strptime(CHAR(STRING_ELT(x, i%n)),
                      CHAR(STRING_ELT(sformat, i%m)), &tm);
        if(!invalid) {
+           /* Solaris sets missing fields to 0: but that's a valid year */
+           if(tm.tm_mday == 0) tm.tm_mday = NA_INTEGER;
+           if(tm.tm_yday == 0) tm.tm_yday = NA_INTEGER;
+           if(tm.tm_mon == 0) tm.tm_mon = NA_INTEGER;
            if(tm.tm_mon == NA_INTEGER || tm.tm_mday == NA_INTEGER
               || tm.tm_year == NA_INTEGER)
                glibc_fix(&tm, &invalid);

I don't see how that could cause it either, though....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar  9 07:32:55 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 9 Mar 2002 07:32:55 +0000 (GMT)
Subject: [Rd] Sys.putenv environment variables disappear (PR#1371)
In-Reply-To: <20020308165410.X11590@jimmy.harvard.edu>
Message-ID: <Pine.GSO.4.44.0203090726550.3971-100000@auk.stats>

On Fri, 8 Mar 2002, Robert Gentleman wrote:

> On Fri, Mar 08, 2002 at 10:36:49PM +0100, a215020@onyx.fmr.com wrote:
> > Environment variables set with Sys.putenv() disappear (i.e. become "")
> > after a while, especially after heavy-duty I/O.  Example:
> >
> >   R> x <- matrix(1., 3000, 3000)
> >   R> save(x, file="myx.RData")
> >   R> Sys.putenv(HOME="/tmp")
> >   R> while (Sys.getenv("HOME") != "") {cat("ok\n"); load("myx.RData")}
> >
>
>   We use
>    for (i = 0; i < n; i++) {
>         LOGICAL(ans)[i] = putenv(CHAR(STRING_ELT(vars, i))) == 0;
>     }
>  and the man page for RedHat says:
>          int putenv(const char *string);
>
> DESCRIPTION
>        The  putenv()  function adds or changes the value of envi-
>        ronment variables.  The argument string  is  of  the  form
>        name=value.   If  name does not already exist in the envi-
>        ronment, then string is added to the environment.  If name
>        does  exist,  then the value of name in the environment is
>        changed to value.  The string pointed to by string becomes
>        part  of  the  environment, so altering the string changes
>        the environment.
>
>   So, after we UNPROTECT this is bad. Seems like we need to
>   do something different.

And what is needed is in the function Putenv in the same file, since
environment variables read from startup files are working correctly.

I've copied the code across (actually from the Windows version).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar  9 08:43:24 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 9 Mar 2002 08:43:24 +0000 (GMT)
Subject: [Rd] 1st January isn't (PR#1370)
In-Reply-To: <x23czatr8p.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.44.0203090840590.13515-100000@auk.stats>

On 9 Mar 2002, Peter Dalgaard BSA wrote:

> tlumley@u.washington.edu writes:
>
> > In today's pre1.5.0
> >
> > > ISOdate(2002,1,1)
> > [1] "2002-03-01 04:00:00 PST"
> >
> > > ISOdate(2002,1,1)==ISOdate(2002,3,1)
> > [1] TRUE
> >
> > It doesn't seem to happen for days other than 1/1
> >
> > 	-thomas
>
> Confirmed. I don't see how it could have happened from anything
> other than this change
>
> diff -u -r1.16 -r1.17
> --- src/main/datetime.c 31 Oct 2001 13:35:39 -0000      1.16
> +++ src/main/datetime.c 6 Mar 2002 11:27:37 -0000       1.17
> @@ -674,6 +674,10 @@
>             !strptime(CHAR(STRING_ELT(x, i%n)),
>                       CHAR(STRING_ELT(sformat, i%m)), &tm);
>         if(!invalid) {
> +           /* Solaris sets missing fields to 0: but that's a valid year */
> +           if(tm.tm_mday == 0) tm.tm_mday = NA_INTEGER;
> +           if(tm.tm_yday == 0) tm.tm_yday = NA_INTEGER;
> +           if(tm.tm_mon == 0) tm.tm_mon = NA_INTEGER;
>             if(tm.tm_mon == NA_INTEGER || tm.tm_mday == NA_INTEGER
>                || tm.tm_year == NA_INTEGER)
>                 glibc_fix(&tm, &invalid);
>
> I don't see how that could cause it either, though....

It can.  Unfortunately the Solaris man page is incorrect.  mon runs from 0
to 11, hence the fix is incorrect.

Fixed again.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Mar  9 18:08:20 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 9 Mar 2002 10:08:20 -0800
Subject: [Rd] L
Message-ID: <A36ED260-3388-11D6-9E97-000393860F3C@stat.ucla.edu>

As I mentioned earlier, it makes sense to maintain the Darwin/X11
version of R through fink (fink.sourceforge.net is a package management
system). Jeff Whitaker (jsw@cdc.noaa.gov), the fink maintainer of R
will install and maintain four versions of R,

-- r-base
-- r-base-atlas
-- r-base-gnome
-- r-base-gnome-atlas

as well as r-recommended. fink will handle all dependencies elegantly,
so people will have no problems any more with missing dynamic
libraries and so on.

Jeff has recently ported rpy to fink as well, and I will try to find some
resources to set up fink patch and info files for other R packages,
either the ones on CRAN or the ones to be found elsewhere. This
will hopefully make it easy to solve various installation and dependency
problems in a reasonable way (remember that fink has mysql, postgres,
netpbm, python, hdf5, expat, tcl/tk and so on).
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Mar 11 10:07:53 2002
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 11 Mar 2002 11:07:53 +0100 (CET)
Subject: [Rd] GNOME locale bug (PR#1321)
In-Reply-To: <200202221341.OAA04115@pubhealth.ku.dk>
Message-ID: <XFMail.20020311110753.plummer@iarc.fr>

Fixed in R-devel (R 1.5.0)

Martyn

PS. Original title was
[Rd] Gnome causes different behaviour of some R functions (PR#1321)
But my mailer snips off the bug number when I reply.

On 22-Feb-2002 alobo@ija.csic.es wrote:
> Full_Name: Agustin Lobo
> Version: 1.4.0
> OS: linux (suse 7.3)
> Submission from: (NULL) (193.144.102.102)
> 
> 
>  Saving lda.default as text files from within gui="none" and from within
>  gui="gnome" 
>  and comparing afterwards with diff, I get:
>  
>  alobo@humboldt:> diff lda.default.gnome.txt lda.default.nognome.txt
>  1c1
>  < function (x, grouping, prior = proportions, tol = 1, method =
>  c("moment",
>  ---
>> function (x, grouping, prior = proportions, tol = 1e-04, method =
>  c("moment",
>  61c61
>  <             if (all(abs(w - w0) < 0,01))
>  ---
>>             if (all(abs(w - w0) < 0.01))
>  109c109
>  <         dist <- 0 * dist - matrix(log(prior), n, ng, byrow = TRUE)
>  ---
>>         dist <- 0.5 * dist - matrix(log(prior), n, ng, byrow = TRUE)
> 
> 
> While lda.default works fine within R --gui="none", it produces the following
> error
> from within R --gui="gnome" for the same data:
> 
>> a
> <-lda.default(x=mod23puriflda[,2:5],grouping=mod23puriflda[,6],CV=F,method="mo
> ment")
> Error in lda.default(x = mod23puriflda[, 2:5], grouping = mod23puriflda[,
>: 
>         length of dimnames[2] not equal to array extent
> In addition: Warning message: 
> variables are collinear in: lda.default(x = mod23puriflda[, 2:5], grouping
> = mod23puriflda[, 
> 
> This problem is not particular to lda.default. The following code, which
> works
> fine from within R --gui="none", fails from within within R --gui="gnome":
> 
>> x1<-rnorm(20)
>> x2<-rnorm(20)
>> boxplot(list(x1=x1,x2=x2))
> Error in if (any(out[nna])) stats[c(1, 5)] <- range(x[!out], na.rm = TRUE) : 
>       missing value where logical needed
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Mar 12 14:36:49 2002
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Tue, 12 Mar 2002 15:36:49 +0100 (MET)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
Message-ID: <200203121436.PAA18972@pubhealth.ku.dk>

rbinom (in R-1.4.1) silently rounds its "size" argument. 
  The C code contains 

    n = floor(nin + 0.5); 

  I would argue that this should this either be documented or changed (to 
return NA). (The behavior is inconsistent with dbinom). 

  I sent this in to the devel list a couple of weeks ago to
provoke discussion; no disagreement (or agreement) so I'm
submitting it as a bug.

  Ben Bolker

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Mar 12 15:00:28 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Tue, 12 Mar 2002 10:00:28 -0500 (EST)
Subject: [Rd] using R API in dynamically loaded code?
Message-ID: <Pine.LNX.4.30.0203120947030.3612-100000@bolker.zoo.ufl.edu>


  I'm probably missing something very basic here, but:

  I've written some C code that I load into R dynamically.  In the course
of this C code, I generate some multinomial random deviates.  I initially
used the publically available "randlib"  library, which also implements
its own random number generator and binomial deviates (which are used to
generate the multinomial deviates).  For parsimony and for licensing
reasons (the randlib licensing is not entirely clear, but there's some
wording about ACM algorithms that contradict GPL), I thought I should pull
out just the multinomial generator from randlib and use it along with
rbinom calls from the R API.  Following the R-exts document, I included
<R.h> in my code, used GetRNGstate/PutRNGstate to initialize the random
number generator, and called rbinom from within my code.
  When using "R CMD check" to build the library and test it, the dynamic
library (turtle.so) fails to load, complaining that rbinom is an
unresolved symbol.  If I force now=FALSE in the dyn.lib call (which seemed
like it *might* solve the problem), I get a "relocation error" when trying
to load the library instead.
  How do I indicate that these symbols within the library refer to
functions that should be called from R?  Am I simply on the wrong track?

  I can provide a stripped-down example if that will clarify things.

  thanks,
    Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rmh@surfer.sbm.temple.edu  Wed Mar 13 07:45:49 2002
From: rmh@surfer.sbm.temple.edu (rmh@surfer.sbm.temple.edu)
Date: Wed, 13 Mar 2002 08:45:49 +0100 (MET)
Subject: [Rd] several bugs (PR#918) lists and matrices
Message-ID: <200203130745.IAA22120@pubhealth.ku.dk>

### I got bit again by the same bugs I wrote about a year ago.
### The bugs are related to matrices and arrays of lists.

### 1. There is a clear inconsistency in how R handles two
### functionally equivalent statements.
### array() is able to take a list and create a matrix.
### matrix() is unable to create that matrix.


> vector("list", 2)
[[1]]
NULL

[[2]]
NULL

> array(vector("list", 2), dim=c(2,1))
     [,1]  
[1,] "NULL"
[2,] "NULL"
> tmpa <- array(vector("list", 2), dim=c(2,1))
> class(tmpa)
NULL
> is.array(tmpa)
[1] TRUE
> is.matrix(tmpa)
[1] TRUE
> tmpm <- matrix(vector("list", 2), nrow=2)
Error in matrix(vector("list", 2), nrow = 2) : 
	Unimplemented feature in copyVector
> 




### 2. Here the matrix single-[ subscript is doing the wrong thing,
### without giving a warning.

> tmp <- array(vector("list", 2), 1:2)
> tmp
     [,1]   [,2]  
[1,] "NULL" "NULL"
> tmp[1]
[[1]]
NULL

> tmp[[1]]
NULL
> tmp[1,1]
[[1]]
NULL

> tmp[[1,1]]
NULL
> list("abc")
[[1]]
[1] "abc"

> tmp[1] <- list("abc")  ## assignment
> tmp[1]
[[1]]
[1] "abc"

> tmp[[1]]
[1] "abc"
> tmp[1,1]     ## incorrect retrieval
[[1]]
NULL

> tmp[[1,1]]
[1] "abc"

> tmp[1,2] <- list("def")  ## refuse to do similar assignment
Error: incompatible types in subset assignment
> 



### 3. subsetting a vector of lists doesn't behave the way I anticipate.
### It looks like NULL is not handled consistently inside a vector.
### Sometimes it can be an element, sometimes not.

> tmpv <- vector("list", 2)
> tmpv
[[1]]
NULL

[[2]]
NULL

> tmpv[1] <- "abcd"  ## I assigned to the first element.
> tmpv               ## Both elements are still here.
[[1]]
[1] "abcd"

[[2]]
NULL

> tmpv[1] <- NULL    ## I assigned to the first element.
> tmpv               ## The second element is gone.
[[1]]
NULL

> 



### This time the issue came up in an attempt to make abind work with R.
### abind() is a generalization of rbind and cbind to arrays.
### Tony Plate and I posted it to StatLib in 1996
### (http://lib.stat.cmu.edu/S/abind).

### I would like you to consider adding abind to R.
### The posted abind doesn't work in R, for the reasons above and due to
### a difference in behavior of match.call between S -Plusand R that I am
### reporting in a separate bug report.
### There are two revised files, currently available at
### http://surfer.sbm.temple.edu/~rmh/abind.r
### http://surfer.sbm.temple.edu/~rmh/abind.test.in.r
### The documentation in statlib applies to these files.
### I will update the statlib version after I understand why R differs.

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R              
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 13 07:56:22 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 13 Mar 2002 08:56:22 +0100 (MET)
Subject: [Rd] several bugs (PR#918) lists and matrices
Message-ID: <200203130756.IAA22216@pubhealth.ku.dk>

Points 1 and 2 are already fixed in R-devel, as I did indicate on R-help,
yesterday.

Point 3 is in the FAQ, no less:

   * In R, if `x' is a list, then `x[i] <- NULL' and `x[[i]] <- NULL'
     remove the specified elements from `x'.  The first of these is
     incompatible with S, where it is a no-op.  (Note that you can set
     elements to `NULL' using `x[i] <- list(NULL)'.)

Please don't mix up unrelated reports: point 3 has nothing to do with
matrix lists.


On Wed, 13 Mar 2002 rmh@surfer.sbm.temple.edu wrote:

> ### I got bit again by the same bugs I wrote about a year ago.
> ### The bugs are related to matrices and arrays of lists.
>
> ### 1. There is a clear inconsistency in how R handles two
> ### functionally equivalent statements.
> ### array() is able to take a list and create a matrix.
> ### matrix() is unable to create that matrix.
>
>
> > vector("list", 2)
> [[1]]
> NULL
>
> [[2]]
> NULL
>
> > array(vector("list", 2), dim=c(2,1))
>      [,1]
> [1,] "NULL"
> [2,] "NULL"
> > tmpa <- array(vector("list", 2), dim=c(2,1))
> > class(tmpa)
> NULL
> > is.array(tmpa)
> [1] TRUE
> > is.matrix(tmpa)
> [1] TRUE
> > tmpm <- matrix(vector("list", 2), nrow=2)
> Error in matrix(vector("list", 2), nrow = 2) :
> 	Unimplemented feature in copyVector
> >
>
>
>
>
> ### 2. Here the matrix single-[ subscript is doing the wrong thing,
> ### without giving a warning.
>
> > tmp <- array(vector("list", 2), 1:2)
> > tmp
>      [,1]   [,2]
> [1,] "NULL" "NULL"
> > tmp[1]
> [[1]]
> NULL
>
> > tmp[[1]]
> NULL
> > tmp[1,1]
> [[1]]
> NULL
>
> > tmp[[1,1]]
> NULL
> > list("abc")
> [[1]]
> [1] "abc"
>
> > tmp[1] <- list("abc")  ## assignment
> > tmp[1]
> [[1]]
> [1] "abc"
>
> > tmp[[1]]
> [1] "abc"
> > tmp[1,1]     ## incorrect retrieval
> [[1]]
> NULL
>
> > tmp[[1,1]]
> [1] "abc"
>
> > tmp[1,2] <- list("def")  ## refuse to do similar assignment
> Error: incompatible types in subset assignment
> >
>
>
>
> ### 3. subsetting a vector of lists doesn't behave the way I anticipate.
> ### It looks like NULL is not handled consistently inside a vector.
> ### Sometimes it can be an element, sometimes not.
>
> > tmpv <- vector("list", 2)
> > tmpv
> [[1]]
> NULL
>
> [[2]]
> NULL
>
> > tmpv[1] <- "abcd"  ## I assigned to the first element.
> > tmpv               ## Both elements are still here.
> [[1]]
> [1] "abcd"
>
> [[2]]
> NULL
>
> > tmpv[1] <- NULL    ## I assigned to the first element.
> > tmpv               ## The second element is gone.
> [[1]]
> NULL
>
> >
>
>
>
> ### This time the issue came up in an attempt to make abind work with R.
> ### abind() is a generalization of rbind and cbind to arrays.
> ### Tony Plate and I posted it to StatLib in 1996
> ### (http://lib.stat.cmu.edu/S/abind).
>
> ### I would like you to consider adding abind to R.
> ### The posted abind doesn't work in R, for the reasons above and due to
> ### a difference in behavior of match.call between S -Plusand R that I am
> ### reporting in a separate bug report.
> ### There are two revised files, currently available at
> ### http://surfer.sbm.temple.edu/~rmh/abind.r
> ### http://surfer.sbm.temple.edu/~rmh/abind.test.in.r
> ### The documentation in statlib applies to these files.
> ### I will update the statlib version after I understand why R differs.
>
> > version
>          _
> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    4.1
> year     2002
> month    01
> day      30
> language R
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 13 10:05:14 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 13 Mar 2002 11:05:14 +0100 (MET)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
Message-ID: <200203131005.LAA23904@pubhealth.ku.dk>

Fixed for 1.5.0.  Note that pbinom and qbinom did it too.

On Tue, 12 Mar 2002 bolker@zoo.ufl.edu wrote:

> rbinom (in R-1.4.1) silently rounds its "size" argument.
>   The C code contains
>
>     n = floor(nin + 0.5);
>
>   I would argue that this should this either be documented or changed (to
> return NA). (The behavior is inconsistent with dbinom).
>
>   I sent this in to the devel list a couple of weeks ago to
> provoke discussion; no disagreement (or agreement) so I'm
> submitting it as a bug.
>
>   Ben Bolker
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status =
>  major = 1
>  minor = 4.1
>  year = 2002
>  month = 01
>  day = 30
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Mar 13 17:04:29 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 13 Mar 2002 09:04:29 -0800 (PST)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
In-Reply-To: <200203131005.LAA23904@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203130901320.83416-100000@homer34.u.washington.edu>

On Wed, 13 Mar 2002 ripley@stats.ox.ac.uk wrote:

> Fixed for 1.5.0.  Note that pbinom and qbinom did it too.
>

But isn't it right for pbinom and qbinom to do it?  P(X<=4.5) is a
perfectly reasonable quantity and is equal to P(X<=4) if X is binomial and
(with rounding the other way) the same for quantile functions.

dbinom, OTOH, is a density wrt counting measure and is not defined for
non-integers (though one could make a case for zero).

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From matthew_wiener@merck.com  Wed Mar 13 17:05:42 2002
From: matthew_wiener@merck.com (matthew_wiener@merck.com)
Date: Wed, 13 Mar 2002 18:05:42 +0100 (MET)
Subject: [Rd] rpart error with 0-frequency factor levels (with partial fix) (PR#1378)
Message-ID: <200203131705.SAA28926@pubhealth.ku.dk>

(I'm sending to r-bugs because rpart is one of the recommended packages and
is always installed.  I'm also sending it directly to Dr. Ripley, as the
maintainer.)

rpart working as a classifier does not work (produces no splits) when the
class indicator has no instances of one of the factor levels, as long as the
factor level is not the final level. I have at least a partial fix, which I
describe after the example.  I don't think the fix is ideal.  I also don't
know whether some of the other rpart methods might have a similar problem.

This may be an atypical situation, but I have come across this when using
rpart on a subset of a data frame that happens not to have any instances of
one level of a factor.

I've gotten identical results with R-1.4.1 on NT 4.0 and Mac OS X (Darwin
version, running as an inferior process under emacs).  System info for both
machines is below.

----------------------------------------------------------------------------
----------------------------------------------------------------------------
-

Here's an example.

The following is run immediately following startup in a completely empty
directory (no .RData, no .Rhistory).

> t1 <- data.frame(V1 = sample(c("A", "B"), 100, replace = T), V2 =
runif(100), V3 = runif(100))
> 
> levels(t1$V1)
[1] "A" "B"
> 
> t2 <- t1
> t2$V1 <- factor(t2$V1, levels = c("A", "B", "C"))
> t3 <- t2
> t3$V1[t3$V1 == "B"] <- "C"
> 
> table(t2$V1)

 A  B  C 
51 49  0 
> table(t3$V1)

 A  B  C 
51  0 49 
> 
> library(rpart)
> t1.rpart <- rpart(V1 ~ V2 + V3, data = t1, method = "class")
> t2.rpart <- rpart(V1 ~ V2 + V3, data = t2, method = "class")
> t3.rpart <- rpart(V1 ~ V2 + V3, data = t3, method = "class")
> 
> print(t1.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 100 49 A (0.5100000 0.4900000)  
   2) V3< 0.319873 33 13 A (0.6060606 0.3939394)  
     4) V3>=0.0740043 26  8 A (0.6923077 0.3076923) *
     5) V3< 0.0740043 7  2 B (0.2857143 0.7142857) *
   3) V3>=0.319873 67 31 B (0.4626866 0.5373134)  
     6) V2>=0.2482707 54 26 A (0.5185185 0.4814815)  
      12) V3< 0.7424548 31 13 A (0.5806452 0.4193548)  
        24) V3>=0.3740281 23  8 A (0.6521739 0.3478261) *
        25) V3< 0.3740281 8  3 B (0.3750000 0.6250000) *
      13) V3>=0.7424548 23 10 B (0.4347826 0.5652174)  
        26) V3>=0.9291285 8  3 A (0.6250000 0.3750000) *
        27) V3< 0.9291285 15  5 B (0.3333333 0.6666667) *
     7) V2< 0.2482707 13  3 B (0.2307692 0.7692308) *
> 
> print(t2.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 100 49 A (0.5100000 0.4900000)  
   2) V3< 0.319873 33 13 A (0.6060606 0.3939394)  
     4) V3>=0.0740043 26  8 A (0.6923077 0.3076923) *
     5) V3< 0.0740043 7  2 B (0.2857143 0.7142857) *
   3) V3>=0.319873 67 31 B (0.4626866 0.5373134)  
     6) V2>=0.2482707 54 26 A (0.5185185 0.4814815)  
      12) V3< 0.7424548 31 13 A (0.5806452 0.4193548)  
        24) V3>=0.3740281 23  8 A (0.6521739 0.3478261) *
        25) V3< 0.3740281 8  3 B (0.3750000 0.6250000) *
      13) V3>=0.7424548 23 10 B (0.4347826 0.5652174)  
        26) V3>=0.9291285 8  3 A (0.6250000 0.3750000) *
        27) V3< 0.9291285 15  5 B (0.3333333 0.6666667) *
     7) V2< 0.2482707 13  3 B (0.2307692 0.7692308) *
> 
> print(t3.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

1) root 100 NaN A (NaN NaN NaN) *
> 
> 

If I recode the factor back down to 2 levels it works again:

> t4 <- t3
> t4$V1 <- factor(t4$V1, levels = c("A", "C"))
> table(t4$V1)

 A  C 
51 49 
> 
> t4.rpart <- rpart(V1 ~ V2 + V3, data = t4, method = "class")
> print(t4.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 100 49 A (0.5100000 0.4900000)  
   2) V3< 0.319873 33 13 A (0.6060606 0.3939394)  
     4) V3>=0.0740043 26  8 A (0.6923077 0.3076923) *
     5) V3< 0.0740043 7  2 C (0.2857143 0.7142857) *
   3) V3>=0.319873 67 31 C (0.4626866 0.5373134)  
     6) V2>=0.2482707 54 26 A (0.5185185 0.4814815)  
      12) V3< 0.7424548 31 13 A (0.5806452 0.4193548)  
        24) V3>=0.3740281 23  8 A (0.6521739 0.3478261) *
        25) V3< 0.3740281 8  3 C (0.3750000 0.6250000) *
      13) V3>=0.7424548 23 10 C (0.4347826 0.5652174)  
        26) V3>=0.9291285 8  3 A (0.6250000 0.3750000) *
        27) V3< 0.9291285 15  5 C (0.3333333 0.6666667) *
     7) V2< 0.2482707 13  3 C (0.2307692 0.7692308) *

And, just to make sure I get the same result if it's the first factor level
missing (so it's not just a property of the middle level missing):

> t5 <- t3
> t5$V1[t5$V1 == "A"] <- "B"
> table(t5$V1)

 A  B  C 
 0 51 49 
> 
> 
> t5.rpart <- rpart(V1 ~ V2 + V3, data = t5, method = "class")
> 
> print(t5.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

1) root 100 NaN A (NaN NaN NaN) *
> 
----------------------------------------------------------------------------
-----------------------------------
I tried to trace the problem, and took a look at the beginning of
rpart.class:

"rpart.class" <-
  function (y, offset, parms, wt) 
{
  if (!is.null(offset)) 
    stop("No offset allowed in classification models")
  fy <- as.factor(y)
  y <- as.integer(fy)
  numclass <- max(y[!is.na(y)])
...
}
I thought the problem might have to do with the fact that numclass would
register 3 for my examples t3 and t5, but 2 for my examples t2 and t4.  So I
tried substituting 

numclass <- length(unique(y[!is.na(y)])) 

to get the number of factors present rather than the largest integer code
used, but that didn't help.

Then I tried running nnet using this data, and it worked fine on all the
examples, with a warning about an empty level.  So I lifted some code from
nnet to make the beginning of rpart.class look like this:


"rpart.class" <-
  function (y, offset, parms, wt) 
{
  if (!is.null(offset)) 
    stop("No offset allowed in classification models")
  fy <- as.factor(y)
### here comes code from nnet
    lev <- levels(y)
  counts <-  table(fy)
  if (any(counts == 0)) {
      warning(paste("group(s)", paste(lev[counts == 0], 
                                      collapse = " "), "are empty"))
      fy <- factor(fy, levels = lev[counts > 0])
    }
### done with code from nnet
  y <- as.integer(fy)
  numclass <- max(y[!is.na(y)])
...
}

When I run this it works, but the factor gets recoded.  For many
applications that's fine -- It seems to work OK when I use (say) the
predicted factor as a factor, but I'm worried about what could happen if I
use as.integer(predict(rpart.obj)) eventually and compare it to something
with the original encoding.   Not good programming practice, but I wouldn't
be surprised to find that I did it somewhere.

So the ideal would be saving the coding and restoring it somewhere.  But it
looks to me like that would require saving this somewhere and restoring the
coding after rpart (if I restore it in rpart.class, I should just run into
the problems I had before).  And then I'm not sure whether the core group
wants to mess with rpart to this extent.

Thanks for the terrific software.  I hope this is helpful.

Matthew Wiener
Applied Computer Science and Mathematics Department
Merck Research Labs
Rahway, NJ  07065-0900
732-594-5303



--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:rpart, package:ctest, Autoloads, package:base


--please do not edit the information below--

Version:
 platform = powerpc-apple-darwin5.2
 arch = powerpc
 os = darwin5.2
 system = powerpc, darwin5.2
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:rpart, package:ctest, Autoloads, package:base







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Wed Mar 13 17:14:19 2002
From: a296180@mica.fmr.com (David Kane  <David Kane)
Date: Wed, 13 Mar 2002 12:14:19 -0500
Subject: [Rd] File permissions test during R CMD check
Message-ID: <15503.35051.255583.275317@gargle.gargle.HOWL>

I think that I understand why R CMD check should warn if the permissions on a
file are too restrictive, but I don't understand why it should warn if they are
"too" loose. On UNIX, why is a file with 644 OK, but one with 664 (just adding
group writability) problematic enough to require a warning?

Thanks,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 13 17:17:40 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 13 Mar 2002 17:17:40 +0000 (GMT)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
In-Reply-To: <Pine.A41.4.44.0203130901320.83416-100000@homer34.u.washington.edu>
Message-ID: <Pine.LNX.4.31.0203131713490.5107-100000@gannet.stats>

Read the subject again, please.

pbinom(2, size=4.1, p=0.5)

makes no sense, but R 1.4.1 gave the result for (2, 4, 0.5) (and S+6 gives
NA).

On Wed, 13 Mar 2002, Thomas Lumley wrote:

> On Wed, 13 Mar 2002 ripley@stats.ox.ac.uk wrote:
>
> > Fixed for 1.5.0.  Note that pbinom and qbinom did it too.
> >
>
> But isn't it right for pbinom and qbinom to do it?  P(X<=4.5) is a
> perfectly reasonable quantity and is equal to P(X<=4) if X is binomial and
> (with rounding the other way) the same for quantile functions.
>
> dbinom, OTOH, is a density wrt counting measure and is not defined for
> non-integers (though one could make a case for zero).
>
> 	-thomas
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Mar 13 17:23:39 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 13 Mar 2002 09:23:39 -0800 (PST)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
In-Reply-To: <Pine.LNX.4.31.0203131713490.5107-100000@gannet.stats>
Message-ID: <Pine.A41.4.44.0203130923260.83416-100000@homer34.u.washington.edu>

On Wed, 13 Mar 2002 ripley@stats.ox.ac.uk wrote:

> Read the subject again, please.
>

Yes. Of course. Sorry.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Mar 13 18:05:14 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 13 Mar 2002 13:05:14 -0500
Subject: [Rd] Commas in formatC
Message-ID: <15503.38106.38626.976198@gargle.gargle.HOWL>

formatC() is great for formatting numbers!  But it would be even better if it
could optionally insert commas (or semicolons), e.g.
 R> formatC(1234567.89, digits=2, format="f", commas=T)
    [1] "1,234,567.89"

Here's a snippet of code that does that, which could more or less just be
inserted into at the end of formatC if any R-core guru were so inclined.  "r"
is the result so far, and "commas" is a logical flag:

  stp <- regexpr("[0-9]+", r);  len <- attr(stp, "match.length")
  if (commas && (maxl <- max(len)) > 3) for (i in seq(3, maxl-1, 3))
    r[len>i] <- paste(substring(r[len>i], 1, (stp+len-1-i)[len>i]),
                      substring(r[len>i], (stp+len-i)[len>i]), sep=",")
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Mar 13 19:53:59 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 13 Mar 2002 14:53:59 -0500 (EST)
Subject: [Rd] using R API in dynamically loaded code?
Message-ID: <Pine.LNX.4.30.0203131451540.25505-100000@bolker.zoo.ufl.edu>


  Brian Ripley pointed out that I neglected to

#include <Rmath.h>

(which of course is right there in the documentation).  Ooops.

  It all works fine now (I still have the completely separate problem that
generating gamma variates with small shape parameters underflows to zero a
lot of the time, but that seems to be my problem rather than R's problem).

  thanks,
    Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From patrick.lindsey@luc.ac.be  Thu Mar 14 11:16:34 2002
From: patrick.lindsey@luc.ac.be (Patrick Lindsey)
Date: Thu, 14 Mar 2002 12:16:34 +0100 (MET)
Subject: [Rd] Row-binding factor variables looses the ordered attribute.
Message-ID: <200203141116.MAA27679@luc.ac.be>

Hi everyone,
  I've just notice a problem with ordered factor variables. It appears
that row-binding two ordered factors together looses the ordered
attribute. The following example happens both in R1.3.1 and R1.4.1 (on
RedHat 7.2):

> y <- ordered(gl(3,6),labels=1:3)
> y
 [1] 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3
Levels:  1 < 2 < 3
> data <- data.frame(y=ordered(gl(3,6),labels=1:3))
> data[,1]    
 [1] 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3
Levels:  1 < 2 < 3 
> rbind(data,data)[,1]
 [1] 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3
Levels:  1 2 3

I've also noticed a change of behavior, between R1.3.1 and R1.4.1, in the
way some covariate names are constructed. This is really a minor comment
but this change in behavior seems unnecessary and complicates the retrieval
of coefficients using the covariate's name. For example, fitting the
following glm model in R1.3.1 results in

> data <- data.frame(y=rnorm(20),cov=gl(4,5))
> glm(y~I(cov!=2),data=data)

Call:  glm(formula = y ~ I(cov != 2), data = data)

Coefficients:
(Intercept)  I(cov != 2)
     0.8009      -0.7547

Degrees of Freedom: 19 Total (i.e. Null);  18 Residual
Null Deviance:      16.34
Residual Deviance: 14.21        AIC: 55.92

whereas with R1.4.1 we now get

> data <- data.frame(y=rnorm(20),cov=gl(4,5))
> glm(y~I(cov!=2),data=data)

Call:  glm(formula = y ~ I(cov != 2), data = data) 

Coefficients:
    (Intercept)  I(cov != 2)TRUE  
         0.4570          -0.7629  

Degrees of Freedom: 19 Total (i.e. Null);  18 Residual
Null Deviance:      24.39 
Residual Deviance: 22.2         AIC: 64.85 

The covariate name "I(cov != 2)" is now (in R1.4.1) appended by the value
TRUE. I think that this must come from "model.matrix" which must be
transforming a boolean vector into a factor variable (which I would guess
is not really necessary as this is just a binary vector).
  This change of behavior is not really a problem in itself (if it only
concerns the behavior of "model.matrix") but quite unexpected.
Thanks too all,
Patrick.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar 14 11:38:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 14 Mar 2002 11:38:30 +0000 (GMT)
Subject: [Rd] Row-binding factor variables looses the ordered attribute.
In-Reply-To: <200203141116.MAA27679@luc.ac.be>
Message-ID: <Pine.LNX.4.31.0203141135510.8480-100000@gannet.stats>

On Thu, 14 Mar 2002, Patrick Lindsey wrote:

[...]

> The covariate name "I(cov != 2)" is now (in R1.4.1) appended by the value
> TRUE. I think that this must come from "model.matrix" which must be
> transforming a boolean vector into a factor variable (which I would guess
> is not really necessary as this is just a binary vector).
>   This change of behavior is not really a problem in itself (if it only
> concerns the behavior of "model.matrix") but quite unexpected.

It is in the NEWS file ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From span@psy.uva.nl  Thu Mar 14 13:09:40 2002
From: span@psy.uva.nl (span@psy.uva.nl)
Date: Thu, 14 Mar 2002 14:09:40 +0100 (MET)
Subject: [Rd] promax (PR#1382)
Message-ID: <200203141309.OAA05371@pubhealth.ku.dk>

Full_Name: mark M. Span
Version: 1.4.1
OS: Windows NT
Submission from: (NULL) (145.18.152.205)


The attribute 'covariances' in the output of promax in the mva package does not
contain the covariances but the inverted correlation matrix of the common
factors following promax rotation.

cheers, MMS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From newsletter@marinedigital.com  Thu Mar 14 13:40:49 2002
From: newsletter@marinedigital.com (newsletter@marinedigital.com)
Date: Thu, 14 Mar 2002 14:40:49 +0100 (MET)
Subject: [Rd] INVITATION - SHIPORT CHINA 2002 (PR#1383)
Message-ID: <200203141340.OAA05707@pubhealth.ku.dk>

<html>
<head>
<title>Marine Digital Newsletter</title>
<link rel="stylesheet" type="text/css" href="http://www.marinedigital.com/css/style_feedback.css">
</head>
<body bgcolor="#FFFFFF" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<div align="center">
<table width="580" border="1" bordercolordark="ffffff" bordercolorlight="#003399" cellspacing="0" cellpadding="0">
<tr>
<td>
<table width="580" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="http://www.marinedigital.com/en/news/img/top_special.gif" width="580" height="51"></td>
</tr>
<tr><td height="1" bgcolor="#f2f2f2"></td></tr>
<tr><td height="3" bgcolor="#9392AE"></td></tr>
<tr><td height="1" bgcolor="#000000"></td></tr>
<tr><td>
<table width="580" border="0" cellspacing="0" cellpadding="0" background="http://www.marinedigital.com/img/bg_l.gif">
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td align="center">
<table width="530" border="0" cellspacing="0" cellpadding="0" bgcolor="#ffffff">
<tr>
<td height="5"></td>
</tr>
<tr>
<td align="center"><img src="http://www.marinedigital.com/en/news/img/invitation.gif" width="140" height="31"></td>
</tr>
<tr>
<td height="5"></td>
</tr>
<tr>
<td align="center"><img src="http://www.marinedigital.com/en/news/img/shiport_title.gif" width="447" height="17"></td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td align="center">
<table width="530" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="530">
<p align="center"><a href="http://www.marinedigital.com/en/shiport/intro.asp"><img border="0" src="http://www.marinedigital.com/en/news/img/shiport_intro.gif" width="530" height="70"></a>&nbsp;</p>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td align="center"><b><font color="#000099">We invite
the leading companies to the Gateway of the East
Maritime World.</font></b></td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td>
<table width="530" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="180"><a href="http://www.marinedigital.com/en/shiport/summary.asp"><img border="0" src="http://www.marinedigital.com/en/news/img/booth02.gif" width="180" height="138"></a></td>
<td width="10" rowspan="2">&nbsp;</td>
<td width="340" rowspan="2">
<table width="340" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="http://www.marinedigital.com/en/news/img/icon.gif" " width="9" height="9">
<b><font color="#cc0000">What is it?</font></b></td>
</tr>
<tr>
<td height="8"></td>
</tr>
<tr>
<td style="padding-top: 3; padding-bottom: 3">If
you plan to be an exhibitor of&nbsp; Shiport China, which
has grown just in three years as the
largest maritime event in China. In 2000,
over 200 exhibitors and 25,000 visitors
met and did business on this one-stop
platform, a sharp rise if 82% and 66%
respectively compared with its '98 debut,
highlighting the steering role of the
Exhibition in the industry.</td>
</tr>
<tr>
<td height="5"></td>
</tr>
<tr>
<td style="padding-top: 3; padding-bottom: 3">Among the visitors, over 70% visitors
were management executives and engineers
from container terminals, shipyards, ship
repairers, harbors, equipment
manufacturers, and trading firms.<br>
It is easier for you to register as an
exhibitor through on-line on our website, <a href="http://www.marinedigital.com">www.marinedigital.com</a></td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td><img src="http://www.marinedigital.com/en/news/img/icon.gif" " width="9" height="9">
<b><font color="#cc0000">What to do</font></b></td>
</tr>
<tr>
<td height="8"></td>
</tr>
<tr>
<td>Hurry up. Do not miss the opportunity
that will make you become world-class maritime
business.&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="180"><a href="http://www.marinedigital.com/en/shiport/organizers.asp"><img border="0" src="http://www.marinedigital.com/en/news/img/booth03.gif" width="180" height="139"></a></td>
</tr>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td>
<table width="530" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="340">
<table width="340" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="15" align="center"><img src="http://www.marinedigital.com/en/news/img/icon.gif" " width="9" height="9">
</td>
<td width="325"><b><font color="#cc0000"><a href="http://www.marinedigital.com/en/shiport/booth.asp">Booth
Configuration</a></font></b></td>
</tr>
<tr>
<td align="center" height="8"></td>
<td height="8"></td>
</tr>
<tr>
<td align="center">&nbsp;</td>
<td>Expanded to an exhibition area of more
than 20,000 sq.m., Shiport China 2002 is
set to meet your every aggressive
marketing need.<br>
A trend-setter in the maritime industry,
Shiport China 2002 generates a complete
overview on the latest development of the
market :</td>
</tr>
<tr>
<td align="center" height="8"></td>
<td height="8"></td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Shipbuilding</td>
</tr>
<tr>
<td align="center" height="5"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Marine Technology</td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Port Industry</td>
</tr>
<tr>
<td align="center" height="5"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Transportation Equipment</td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Naval Supplies</td>
</tr>
<tr>
<td align="center" height="5"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Related Equipment</td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td></td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><b><font color="#fd651d">- Space Only</font></b></td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td>For exhibitors who wish to design and
build their own booths. (minimum 27 sq.m.)</td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><b><font color="#fd651d">- Shell Scheme</font></b></td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td>Exhibitors will be provided with
ready-to-display facilities. (minimum 9
sq.m.)</td>
</tr>
</table>
</td>
<td width="10">&nbsp;</td>
<td width="180"><a href="http://www.marinedigital.com/en/shiport/general.asp" target="_blank"><img src="http://www.marinedigital.com/en/news/img/dalian.gif"  border="0" width="180" height="180"></a></td>
</tr>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td>
<table width="530" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="100" valign="bottom"><img src="http://www.marinedigital.com/en/news/img/img.jpg" width="100" height="140" ></td>
<td width="10">&nbsp;</td>
<td width="310">&nbsp;&nbsp;&nbsp;&nbsp;<img src="http://www.marinedigital.com/en/news/img/icon.gif" " width="9" height="9">
<b><font color="#cc0000">Great Opportunity</font><font color="#990000">
</font></b>
<table width="310" border="0" cellspacing="0" cellpadding="0">
<tr>
<td height="8"></td>
</tr>
<tr>
<td>
<p align="left" style="margin-left:15px;">Come
and embrace the exhibition as an opportunity
to approach the Gateway to the East maritime
World,
especially Shipbuilding, Port Industry
and Related Equipment. Don't miss the best chance to
inform you of business competence to maritime
elites.
</td>
</tr>
<tr>
<td height="5"></td>
</tr>
<tr>
<td><p align="left" style="margin-left:15px;">If you need any other questions or
inquiries,
please send e-mail at</td>
</tr>
<tr>
<td height="5"></td>
</tr>
<tr>
<td><p align="center"><b>James Song,
Executive Director </b>(<a href="mailto:jbsong@marinedigital.com">jbsong@marinedigitial.com</a>)</td>
</tr>
</table>
</td>
<td width="2">&nbsp;</td>
<td width="108" valign="bottom"><a href="http://www.marinedigital.com/en/shiport/registration.asp" target="_blank"><img src="http://www.marinedigital.com/en/news/img/register_online.gif" border="0" width="108" height="150"></a></td>
</tr>
</table>
</td>
</tr>
<tr>
<td style="padding-top: 10; padding-bottom: 10">
<p align="center"><b><font color="#0000FF">We look
forward to welcoming you to the exhibition.</font></b></td>
</tr>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
</table>
</td></tr>
<tr><td height="1" bgcolor="#003399"></td></tr>
<tr>
<td bgcolor="#f3f3f6" align="center">
<table width="520" border="0" cellspacing="0" cellpadding="0">
<tr>
<td align="center"><font color="#003399">President &amp; CEO,
Terry Kim is responsible for VOICE OF CUSTOMER</font></td>
</tr>
<tr>
<td align="center"><font color="#003399">( e-Mail : <a href="mailto:terry@marinedigital.com">terry@marinedigital.com</a>
)</font></td>
</tr>
<tr>
<td align="center"><font color="#003399">Tel : 82-2-966-6701,
Fax : 82-2-966-6703, URL : <a href="http://www.marinedigital.com" target="_blank">www.marinedigital.com</a></font></td>
</tr>
</table>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</body>
</html>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Thu Mar 14 14:21:04 2002
From: egonw@sci.kun.nl (egonw@sci.kun.nl)
Date: Thu, 14 Mar 2002 15:21:04 +0100 (MET)
Subject: [Rd] KDE frontend (PR#1384)
Message-ID: <200203141421.PAA06318@pubhealth.ku.dk>

Full_Name: Egon Willighagen
Version: 1.4.x
OS: Linux/Solaris
Submission from: (NULL) (131.174.179.30)


I would like to have an gui for KDE (like gnome).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 14 14:46:17 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 2002 15:46:17 +0100
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <200203141421.PAA06318@pubhealth.ku.dk>
References: <200203141421.PAA06318@pubhealth.ku.dk>
Message-ID: <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>

egonw@sci.kun.nl writes:

> Full_Name: Egon Willighagen
> Version: 1.4.x
> OS: Linux/Solaris
> Submission from: (NULL) (131.174.179.30)
> 
> 
> I would like to have an gui for KDE (like gnome).

This is hardly a bug, so you might have put "wishlist" or so in the
subject. On the other hand it is fairly useful to file enhancement
requests too.

However, this is a bit of a mouthful to implement. Do you have a
handle on how to go about it? Contributions are welcome...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Thu Mar 14 14:58:47 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Thu, 14 Mar 2002 15:58:47 +0100
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>
References: <200203141421.PAA06318@pubhealth.ku.dk> <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>
Message-ID: <200203141458.g2EEwmB02843@wn1.sci.kun.nl>

On Thursday 14 March 2002 15:46, Peter Dalgaard BSA wrote:
> egonw@sci.kun.nl writes:
> > Full_Name: Egon Willighagen
> > Version: 1.4.x
> > OS: Linux/Solaris
> > Submission from: (NULL) (131.174.179.30)
> >
> >
> > I would like to have an gui for KDE (like gnome).
>
> This is hardly a bug, so you might have put "wishlist" or so in the
> subject. On the other hand it is fairly useful to file enhancement
> requests too.

It was intended a wishlist bug... The bug submit page [1] did not ask
a bug level, and I assumed it was going to be asked in a subsequent
page... my apologies.

I cannot change the status myself... but it should indeed be wishlist.

> However, this is a bit of a mouthful to implement. Do you have a
> handle on how to go about it? Contributions are welcome...

At this time I do not know how to write a KDE frontend, but once I have some 
more insight I will share this info.... i can send such info to which email 
address to automatically have it included in the bug archive?

Egon

1. http://r-bugs.biostat.ku.dk/cgi-bin/R
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Thu Mar 14 15:06:19 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Thu, 14 Mar 2002 09:06:19 -0600
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <200203141421.PAA06318@pubhealth.ku.dk>
References: <200203141421.PAA06318@pubhealth.ku.dk>
Message-ID: <20020314150619.GA12205@sonny.eddelbuettel.com>

On Thu, Mar 14, 2002 at 03:21:04PM +0100, egonw@sci.kun.nl wrote:
> Full_Name: Egon Willighagen
> Version: 1.4.x
> OS: Linux/Solaris
> Submission from: (NULL) (131.174.179.30)
> 
> 
> I would like to have an gui for KDE (like gnome).

Great. 

You know which address you need to send code contributions too, don't you?  
Money might be accepted too so that we can hire a programmer if you are
short of time yourself.

Oh, and I would like a BMW motorcycle. Where do I file that bug report?

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 14 15:19:41 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 2002 16:19:41 +0100
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <200203141458.g2EEwmB02843@wn1.sci.kun.nl>
References: <200203141421.PAA06318@pubhealth.ku.dk>
 <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>
 <200203141458.g2EEwmB02843@wn1.sci.kun.nl>
Message-ID: <x2bsdrxjle.fsf@blueberry.kubism.ku.dk>

"E.L. Willighagen" <egonw@sci.kun.nl> writes:

> At this time I do not know how to write a KDE frontend, but once I have some 
> more insight I will share this info.... i can send such info to which email 
> address to automatically have it included in the bug archive?

For small notes, you can follow up on this report, just make sure
that the subject line has "(PR#1384)" in it. 

If it gets excessive (it likely will...) there's the r-devel mailing
list for discussions of the development plans and process.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu Mar 14 15:22:01 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Thu, 14 Mar 2002 10:22:01 -0500
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Thu, Mar 14, 2002 at 03:46:17PM +0100
References: <200203141421.PAA06318@pubhealth.ku.dk> <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>
Message-ID: <20020314102201.D15816@jessie.research.bell-labs.com>

Peter Dalgaard BSA wrote:
> egonw@sci.kun.nl writes:
> 
> > Full_Name: Egon Willighagen
> > Version: 1.4.x
> > OS: Linux/Solaris
> > Submission from: (NULL) (131.174.179.30)
> > 
> > 
> > I would like to have an gui for KDE (like gnome).
> 
> ...
> However, this is a bit of a mouthful to implement. Do you have a
> handle on how to go about it? Contributions are welcome...
> 

Just thought I'd add this for the record.....

As a general strategy for building GUIs for use in R, I believe it
will be much more beneficial to do this in two steps:

   a) create a set of R-language bindings to the GUI toolkit 
      of interest (Qt in this case)
   b) build one or more GUIs for R in the R language.

The obvious benefits are that i) we can use the bindings to write
other GUIs, and ii) more people can adapt the GUI code to create their
own customized version(s).  This hopefully avoids us creating "the" R
GUI containing an interface to every function known to mankind!  A
third benefit is that perhaps the GUI design can be more readily
adapted for different toolkits (e.g. Gtk, Qt, wxWindows, MFC, etc.)

We already have bindings for several toolkits: the tcltk package to
Tk, RGtk for Gtk/Gnome, (a recently more stable) SJava for Swing/AWT.
The SWIG, the RGtk package, etc. might provide a place to look for
automating the bindings to Qt.

The KDE toolkit, Qt, is C++ which makes it slightly more tricky to
handle. But there are C bindings for it.





> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Thu Mar 14 15:40:24 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Thu, 14 Mar 2002 16:40:24 +0100
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <20020314150619.GA12205@sonny.eddelbuettel.com>
References: <200203141421.PAA06318@pubhealth.ku.dk> <20020314150619.GA12205@sonny.eddelbuettel.com>
Message-ID: <200203141540.g2EFePB14412@wn1.sci.kun.nl>

On Thursday 14 March 2002 16:06, Dirk Eddelbuettel wrote:
> On Thu, Mar 14, 2002 at 03:21:04PM +0100, egonw@sci.kun.nl wrote:
> > Full_Name: Egon Willighagen
> > Version: 1.4.x
> > OS: Linux/Solaris
> > Submission from: (NULL) (131.174.179.30)
> >
> >
> > I would like to have an gui for KDE (like gnome).
>
> Great.
>
> You know which address you need to send code contributions too, don't you?
> Money might be accepted too so that we can hire a programmer if you are
> short of time yourself.

I like this kind of sarcasm... But you understand that I am probably not the 
only one interested in this... Moreover, a note (read: wishlist bug) on such 
a request does not mean it has to be implemented (at once/any time). It is 
just a note that people are/i am interested in it...

> Oh, and I would like a BMW motorcycle. Where do I file that bug report?

What about http://www.bmwusacycles.com/lit_request.html?

Egon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Thu Mar 14 18:57:42 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Thu, 14 Mar 2002 13:57:42 -0500 (EST)
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <20020314102201.D15816@jessie.research.bell-labs.com>
Message-ID: <Pine.GSO.4.10.10203141343460.4473-100000@hsph.harvard.edu>

On Thu, 14 Mar 2002, Duncan Temple Lang wrote:

> Peter Dalgaard BSA wrote:
> > egonw@sci.kun.nl writes:
> > 
> > > Full_Name: Egon Willighagen
> > > Version: 1.4.x
> > > OS: Linux/Solaris
> > > Submission from: (NULL) (131.174.179.30)
> > > 
> > > 
> > > I would like to have an gui for KDE (like gnome).
> > 
> > ...
> > However, this is a bit of a mouthful to implement. Do you have a
> > handle on how to go about it? Contributions are welcome...
> > 
> 
> Just thought I'd add this for the record.....
> 
> As a general strategy for building GUIs for use in R, I believe it
> will be much more beneficial to do this in two steps:
> 
>    a) create a set of R-language bindings to the GUI toolkit 
>       of interest (Qt in this case)
>    b) build one or more GUIs for R in the R language.
> 
> The obvious benefits are that i) we can use the bindings to write
> other GUIs, and ii) more people can adapt the GUI code to create their
> own customized version(s).  This hopefully avoids us creating "the" R
> GUI containing an interface to every function known to mankind!  A
> third benefit is that perhaps the GUI design can be more readily
> adapted for different toolkits (e.g. Gtk, Qt, wxWindows, MFC, etc.)

To toss in my $.02--it seems to me that it would be nice to push the GUIs
(or any interface) "out of the core" s.t. GUIs are basically creating an R
context just like any other embedding program. For most GUIs the main
executable (if I understand Duncan's comments correctly) would mostly be a
stub to get the GUI moving inside of the package that actually implements
the GUI itself (allowing for more control over the GUI from the R
environment---dynamic menus, etc, etc). Alternatively, there could be a
generalized GUI interface whose C interface is implemented by the main
executable and then registered (now that registration is nice)---this is
probably the more difficult route and perhaps the more limiting route in
the long run (various GUIs may have various nice features).

> 
> We already have bindings for several toolkits: the tcltk package to
> Tk, RGtk for Gtk/Gnome, (a recently more stable) SJava for Swing/AWT.
> The SWIG, the RGtk package, etc. might provide a place to look for
> automating the bindings to Qt.
> 
> The KDE toolkit, Qt, is C++ which makes it slightly more tricky to
> handle. But there are C bindings for it.

Well, it could be an ObjC binding :-)

> 
> 
> 
> 
> 
> > -- 
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3  
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> _______________________________________________________________
> 
> Duncan Temple Lang                duncan@research.bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-3217
> 700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
> Murray Hill, NJ  07974-2070       
>          http://cm.bell-labs.com/stat/duncan
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Thu Mar 14 18:58:45 2002
From: bellis@hsph.harvard.edu (bellis@hsph.harvard.edu)
Date: Thu, 14 Mar 2002 19:58:45 +0100 (MET)
Subject: [Rd] KDE frontend (PR#1384)
Message-ID: <200203141858.TAA08022@pubhealth.ku.dk>

On Thu, 14 Mar 2002, Duncan Temple Lang wrote:

> Peter Dalgaard BSA wrote:
> > egonw@sci.kun.nl writes:
> > 
> > > Full_Name: Egon Willighagen
> > > Version: 1.4.x
> > > OS: Linux/Solaris
> > > Submission from: (NULL) (131.174.179.30)
> > > 
> > > 
> > > I would like to have an gui for KDE (like gnome).
> > 
> > ...
> > However, this is a bit of a mouthful to implement. Do you have a
> > handle on how to go about it? Contributions are welcome...
> > 
> 
> Just thought I'd add this for the record.....
> 
> As a general strategy for building GUIs for use in R, I believe it
> will be much more beneficial to do this in two steps:
> 
>    a) create a set of R-language bindings to the GUI toolkit 
>       of interest (Qt in this case)
>    b) build one or more GUIs for R in the R language.
> 
> The obvious benefits are that i) we can use the bindings to write
> other GUIs, and ii) more people can adapt the GUI code to create their
> own customized version(s).  This hopefully avoids us creating "the" R
> GUI containing an interface to every function known to mankind!  A
> third benefit is that perhaps the GUI design can be more readily
> adapted for different toolkits (e.g. Gtk, Qt, wxWindows, MFC, etc.)

To toss in my $.02--it seems to me that it would be nice to push the GUIs
(or any interface) "out of the core" s.t. GUIs are basically creating an R
context just like any other embedding program. For most GUIs the main
executable (if I understand Duncan's comments correctly) would mostly be a
stub to get the GUI moving inside of the package that actually implements
the GUI itself (allowing for more control over the GUI from the R
environment---dynamic menus, etc, etc). Alternatively, there could be a
generalized GUI interface whose C interface is implemented by the main
executable and then registered (now that registration is nice)---this is
probably the more difficult route and perhaps the more limiting route in
the long run (various GUIs may have various nice features).

> 
> We already have bindings for several toolkits: the tcltk package to
> Tk, RGtk for Gtk/Gnome, (a recently more stable) SJava for Swing/AWT.
> The SWIG, the RGtk package, etc. might provide a place to look for
> automating the bindings to Qt.
> 
> The KDE toolkit, Qt, is C++ which makes it slightly more tricky to
> handle. But there are C bindings for it.

Well, it could be an ObjC binding :-)

> 
> 
> 
> 
> 
> > -- 
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3  
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> _______________________________________________________________
> 
> Duncan Temple Lang                duncan@research.bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-3217
> 700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
> Murray Hill, NJ  07974-2070       
>          http://cm.bell-labs.com/stat/duncan
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eneafse@lumc.edu  Thu Mar 14 20:05:43 2002
From: eneafse@lumc.edu (eneafse@lumc.edu)
Date: Thu, 14 Mar 2002 21:05:43 +0100 (MET)
Subject: [Rd] "evaluating expression 0" bug in R-1.4.1 (PR#1385)
Message-ID: <200203142005.VAA08230@pubhealth.ku.dk>

Full_Name: Edward J. Neafsey 
Version: 1.4.1
OS: linux
Submission from: (NULL) (147.126.192.93)


R-1.4.1 failed to finish compiling building package `methods', as seen in
output from make below.
============================================================================
Make output:
../../../library/methods/man/methods.Rd is unchanged
make[4]: Entering directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[5]: Entering directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[5]: `Makedeps' is up to date.
make[5]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[5]: Entering directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
../../../../library/methods/libs/methods.so is unchanged
make[5]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[4]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[4]: Entering directory `/usr/src/SOURCES/R-1.4.1/src/library/methods'
dumping R code in package `methods'
Error: syntax error: evaluating expression 0
Execution halted
make[4]: *** [../../../library/methods/R/all.rda] Error 1
make[4]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods'
make[3]: *** [all] Error 2
make[3]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods'
make[2]: *** [R] Error 1
make[2]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src'
make: *** [R] Error 1 


When I examined things further, it became clear problem was in new R.bin 
file, since after exporting the proper value for R_HOME, running just R.bin
by itself caused the same "evaluating expression 0" error, as seen below.
========================================================================
R.bin by itself output
[/usr/src/SOURCES/R-1.4.1/bin]# export R_HOME=/usr/src/SOURCES/R-1.4.1
[/usr/src/SOURCES/R-1.4.1/bin]# ./R.bin

R : Copyright 2002, The R Development Core Team
Version 1.4.1 Patched (2002-03-13)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

Error: syntax error: evaluating expression 0
Error: syntax error: evaluating expression 0
> 

This happened even if run with --vanilla.  Interestingly, removing the 
Rprofile file removed one of the two "Error: syntax error:..." messages.

I have been successfully compiling R through a number of versions, and
this is first time I have had a real problem.

Thanks for R.

E.J. Neafsey
eneafse@lumc.edu



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 14 22:35:14 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 2002 23:35:14 +0100
Subject: [Rd] "evaluating expression 0" bug in R-1.4.1 (PR#1385)
In-Reply-To: <200203142005.VAA08230@pubhealth.ku.dk>
References: <200203142005.VAA08230@pubhealth.ku.dk>
Message-ID: <x2it7ypyl9.fsf@blueberry.kubism.ku.dk>

eneafse@lumc.edu writes:

> Full_Name: Edward J. Neafsey 
> Version: 1.4.1
> OS: linux

Which one? Distrib./compiler set? Given the number of Linux systems
among the core developers, it seems rather unlikely that R-patched
would be broken on all all of them without anyone noticing... 

It does build OK for me.

> Submission from: (NULL) (147.126.192.93)
> 
> 
> R-1.4.1 failed to finish compiling building package `methods', as seen in
> output from make below.
> ============================================================================
> dumping R code in package `methods'
> Error: syntax error: evaluating expression 0
> Execution halted
...
> When I examined things further, it became clear problem was in new R.bin 
> file, since after exporting the proper value for R_HOME, running just R.bin
> by itself caused the same "evaluating expression 0" error, as seen below.
> ========================================================================
...
> Type `q()' to quit R.
> 
> Error: syntax error: evaluating expression 0
> Error: syntax error: evaluating expression 0
> > 
> 
> This happened even if run with --vanilla.  Interestingly, removing the 
> Rprofile file removed one of the two "Error: syntax error:..." messages.

This could come from a corrupted base package. You'd have to track it
down a bit further though. Binary search on the library/base/R/base
file is a possibility. Or you might try sourcing the file with echo=T.

Are you sure you are doing a clean build? Delete config.cache, make
clean, etc.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tplate@blackmesacapital.com  Fri Mar 15 04:59:03 2002
From: tplate@blackmesacapital.com (Tony Plate)
Date: Thu, 14 Mar 2002 21:59:03 -0700
Subject: [Rd] two minor differences in behavior of R and S-plus
Message-ID: <5.1.0.14.2.20020313175440.038cee98@a.paloma.com>

I found two minor differences when porting some S-plus code to R (the code 
was written for Splus 3.5 Unix).

(1) The function c(), when applied to a name and a character, under S-plus 
coerces the name to character data and returns a vector of character data, 
but in R returns a list containing both objects intact

(2) The call match.call(expand.dots=F) returns an object that behaves 
differently: under S-plus it is a call object with a "list" functor, under 
R it is an ordinary list with no "list" functor.  (e.g., 
as.character(match.call(expand.dots=F)$...) under S-plus has 
length(list(...))+1 elements, of which the first is "list", but under R it 
has just length(list(...)) elements)

Example of (1)

under R (both 1.5 and 1.4.1):

 > c("foo", as.name("bar"))
[[1]]
[1] "foo"

[[2]]
bar

under S-plus 6.0 (and earlier, I believe)

 > c("foo", as.name("bar"))
[1] "foo" "bar"

[I would agree that it is unclear what the most desirable behavior is, and 
would also agree that clean code would do an as.character() on a name 
before attempting to concatenate it with character data - I changed my code 
to do this.]

Example of (2)

Under R 1.4.1:
 > (function(...)browser())(x=1,y=2)
Called from: (function(...) browser())(x = 1, y = 2)
Browse[1]> match.call(expand.dots=F)
(function(...) browser())(... = list(x = 1, y = 2))
Browse[1]> match.call(expand.dots=F)$...
$x
[1] 1

$y
[1] 2

Browse[1]> is.call(match.call(expand.dots=F)$...)
[1] FALSE
Browse[1]> names(match.call(expand.dots=F)$...)
[1] "x" "y"
Browse[1]> as.character(match.call(expand.dots=F)$...)
[1] "1" "2"


Under S-plus 6.0:
 > (function(...)browser())(x=1,y=2)
Called from: (function(...)  browser())....
b()> match.call(expand.dots=F)
(function(...)
browser())(... = list(x = 1, y = 2))
b()> match.call(expand.dots=F)$...
list(x = 1, y = 2)
b()> is.call(match.call(expand.dots=F)$...)
[1] T
b()> names(match.call(expand.dots=F)$...)
[1] ""  "x" "y"
b()> as.character(match.call(expand.dots=F)$...)
[1] "list" "1"    "2"


(Feel free to let me know whether or not minor incompatibilities like this 
are of interest to the R-developers -- I don't know to what degree people 
are trying to make R compatible with S-plus.)

-- Tony Plate

 > version
          _
platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    4.1
year     2002
month    01
day      30
language R
 > 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Mar 14 16:09:46 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 14 Mar 2002 17:09:46 +0100
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <15503.35051.255583.275317@gargle.gargle.HOWL>
References: <15503.35051.255583.275317@gargle.gargle.HOWL>
Message-ID: <15504.52042.451614.174105@mithrandir.hornik.net>

>>>>> "David Kane writes:

> I think that I understand why R CMD check should warn if the
> permissions on a file are too restrictive, but I don't understand why
> it should warn if they are "too" loose. On UNIX, why is a file with
> 644 OK, but one with 664 (just adding group writability) problematic
> enough to require a warning?

I think we want the *installed* files to be 644 and dirs to be 755 (by
default).  Can we be sure that all routes to installing a package (as
source or binary) lead to this even if permissions originally were too
loose?  I don't, hence I prefer being on the defensive side.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 15 08:07:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 15 Mar 2002 08:07:35 +0000 (GMT)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <15504.52042.451614.174105@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0203150758090.18980-100000@gannet.stats>

On Thu, 14 Mar 2002, Kurt Hornik wrote:

> >>>>> "David Kane writes:
>
> > I think that I understand why R CMD check should warn if the
> > permissions on a file are too restrictive, but I don't understand why
> > it should warn if they are "too" loose. On UNIX, why is a file with
> > 644 OK, but one with 664 (just adding group writability) problematic
> > enough to require a warning?
>
> I think we want the *installed* files to be 644 and dirs to be 755 (by
> default).  Can we be sure that all routes to installing a package (as
> source or binary) lead to this even if permissions originally were too
> loose?  I don't, hence I prefer being on the defensive side.

There is an assumption that

umask 022

in INSTALL (on Unix-alikes) actually works.  If so, installing from source
should work.  You can't be sure about binary packages: they might not be
installed by INSTALL.

I don't see this.  We do not insist that R itself is installed as
world-readable, and I don't see why we should be doing so for packages.
Further, it would be convenient to have installed packages
group-writeable, as then anyone in the group can run update.packages().

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Mar 15 10:01:44 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 15 Mar 2002 10:01:44 +0000
Subject: [Rd] Thought on crossprod
Message-ID: <3C91C688.E297B0FE@durham.ac.uk>

Hi everyone,

I do a lot of work with large variance matrices, and I like to use
"crossprod" for speed and to keep everything symmetric, i.e. I often
compute "crossprod(Q %*% t(A))" for "A %*% Sigma %*% t(A)", where
"Sigma" decomposes as "t(Q) %*% Q".  I notice in the code that
"crossprod", current definition

> crossprod
function (x, y = x) 
.Internal(crossprod(x, y))

does not recognise the case where y is the same as x as special.  I'd
like to extend crossprod to something like

> crossprod
function(x, y = NULL)
if (is.null(y))
  .Internal(crossprod.symm(x))
else
  .Internal(crossprod(x, y))

Before I start mesing up my R-1.4.1 installation, does anyone have any
thoughts on this?

Cheers, Jonathan.
-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Mar 15 13:45:24 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 15 Mar 2002 14:45:24 +0100
Subject: [Rd] Thought on crossprod
In-Reply-To: <3C91C688.E297B0FE@durham.ac.uk>
References: <3C91C688.E297B0FE@durham.ac.uk>
Message-ID: <15505.64244.865792.272476@gargle.gargle.HOWL>

>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> Hi everyone, I do a lot of work with large variance
    JonR> matrices, and I like to use "crossprod" for speed and
    JonR> to keep everything symmetric, i.e. I often compute
    JonR> "crossprod(Q %*% t(A))" for "A %*% Sigma %*% t(A)",
    JonR> where "Sigma" decomposes as "t(Q) %*% Q".  I notice in
    JonR> the code that "crossprod", current definition

    >> crossprod
    JonR> function (x, y = x) 
    JonR> .Internal(crossprod(x, y))

    JonR> does not recognise the case where y is the same as x as special.  I'd
    JonR> like to extend crossprod to something like

    >> crossprod
    JonR> function(x, y = NULL)
    JonR> if (is.null(y))
    JonR>    .Internal(crossprod.symm(x))
    JonR> else
    JonR>    .Internal(crossprod(x, y))

    JonR> Before I start mesing up my R-1.4.1 installation, does anyone have any
    JonR> thoughts on this?

Just for clarification:
The main point of your suggestion is to pass only half as much
data down to C, right?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Mar 15 15:06:51 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 15 Mar 2002 10:06:51 -0500 (EST)
Subject: [Rd] Re: [R] persp(): add second plane
In-Reply-To: <3C91B04E.9004F81@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.30.0203151003270.20916-100000@bolker.zoo.ufl.edu>


  [forwarded to R-devel]

  I'm most interested in integrating persp() and scatterplot3d() so that
we can (e.g.) easily draw graphs like response surfaces with associated
points (yes, there are serious questions about whether 3d perspective
plots are good general tools for data presentation, but there are some
places where it's really useful).  I can think of a bunch of quick hacks,
but I don't really know how an integrated system should be designed for
consistency and ease of use.

  Ben

On Fri, 15 Mar 2002, Uwe Ligges wrote:

> Henrik Bengtsson wrote:
> >
> > Hmm, very interesting. I guess I am not the only one that thought about
> > extending Ben Bolkers idea to plot R^3 data by starting with an empty
> > persp(). Except from the "risk" of plotting outside the bounds of 3d-box
> > created by persp()
>
> Have a look into the code of the package "scatterplot3d". That "risk" is
> already solved in there and the ideas will also work for your example.
> Also some other generalizations could be adapt for the "persp()-3d"
> case.
>
> > I can't see any problems with this approach. I wrote up
> > some code for a plot3d() and a points3d() method. I have pasted the code at
> > the end and as you see I made the plot3d() code to be almost identical to
> > the one for persp(). First an example how the functions can be used and then
> > the code:
>
> [snip]
>
>
> Uwe Ligges
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar 15 15:19:32 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Mar 2002 10:19:32 -0500
Subject: [Rd] File permissions test during R CMD check
References: <Pine.LNX.4.31.0203150758090.18980-100000@gannet.stats>
Message-ID: <3C921104.B7E710E0@bank-banque-canada.ca>


ripley@stats.ox.ac.uk wrote:
>
> There is an assumption that
> 
> umask 022
> 
> in INSTALL (on Unix-alikes) actually works. 

I have discovered that Mandrake 8.1 /etc/bashrc sets the umask for many
users to 002, which is a problem because files extracted from cvs have
group write priviledges. It is fairly easy to fix, once the source of
the problem is recognized. I'm not sure how widespread this is in other
Linux distributions.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 15 15:22:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 15 Mar 2002 15:22:21 +0000 (GMT)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <3C921104.B7E710E0@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0203151521070.25930-100000@gannet.stats>

On Fri, 15 Mar 2002, Paul Gilbert wrote:

>
> ripley@stats.ox.ac.uk wrote:
> >
> > There is an assumption that
> >
> > umask 022
> >
> > in INSTALL (on Unix-alikes) actually works.
>
> I have discovered that Mandrake 8.1 /etc/bashrc sets the umask for many
> users to 002, which is a problem because files extracted from cvs have
> group write priviledges. It is fairly easy to fix, once the source of
> the problem is recognized. I'm not sure how widespread this is in other
> Linux distributions.

Relevance?  INSTALL sets the umask, not uses an existing one.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgentry@jimmy.harvard.edu  Fri Mar 15 16:05:58 2002
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Fri, 15 Mar 2002 11:05:58 -0500 (EST)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <3C921104.B7E710E0@bank-banque-canada.ca>
Message-ID: <Pine.SOL.4.20.0203151104150.26946-100000@santiam.dfci.harvard.edu>

> I have discovered that Mandrake 8.1 /etc/bashrc sets the umask for many
> users to 002, which is a problem because files extracted from cvs have

Redhat 7.2 also has a default umask of 002.

-Jeff

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Mar 15 16:16:47 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 15 Mar 2002 17:16:47 +0100
Subject: [Rd] Re: [R] persp(): add second plane
References: <Pine.LNX.4.30.0203151003270.20916-100000@bolker.zoo.ufl.edu>
Message-ID: <3C921E6F.BB81543B@statistik.uni-dortmund.de>


Ben Bolker wrote:
> 
>   [forwarded to R-devel]
> 
>   I'm most interested in integrating persp() and scatterplot3d() so that
> we can (e.g.) easily draw graphs like response surfaces with associated
> points (yes, there are serious questions about whether 3d perspective
> plots are good general tools for data presentation, but there are some
> places where it's really useful).  I can think of a bunch of quick hacks,
> but I don't really know how an integrated system should be designed for
> consistency and ease of use.


I think it's not possible to write an integrated system that uses the
functions scatterplot3d() and persp() as they are. The straightforward
way, from my point of view, is to write a new function (suggestions for
a name?) along scatterplot3d()'s code, that uses persp() instead of
scatterplot3d()'s own plot function in principle.

I'll volunteer to write such a function during the next months, but
there are still some other points on my todo list (and I myself don't
need such a function at present). 

Uwe


>   Ben
> 
> On Fri, 15 Mar 2002, Uwe Ligges wrote:
> 
> > Henrik Bengtsson wrote:
> > >
> > > Hmm, very interesting. I guess I am not the only one that thought about
> > > extending Ben Bolkers idea to plot R^3 data by starting with an empty
> > > persp(). Except from the "risk" of plotting outside the bounds of 3d-box
> > > created by persp()
> >
> > Have a look into the code of the package "scatterplot3d". That "risk" is
> > already solved in there and the ideas will also work for your example.
> > Also some other generalizations could be adapt for the "persp()-3d"
> > case.
> >
> > > I can't see any problems with this approach. I wrote up
> > > some code for a plot3d() and a points3d() method. I have pasted the code at
> > > the end and as you see I made the plot3d() code to be almost identical to
> > > the one for persp(). First an example how the functions can be used and then
> > > the code:
> >
> > [snip]
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar 15 16:31:35 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 15 Mar 2002 08:31:35 -0800 (PST)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <Pine.LNX.4.31.0203150758090.18980-100000@gannet.stats>
Message-ID: <Pine.A41.4.44.0203150828500.25112-100000@homer14.u.washington.edu>

On Fri, 15 Mar 2002 ripley@stats.ox.ac.uk wrote:

>
> I don't see this.  We do not insist that R itself is installed as
> world-readable, and I don't see why we should be doing so for packages.
> Further, it would be convenient to have installed packages
> group-writeable, as then anyone in the group can run update.packages().
>

Yes --  and many people would argue that it is positively undesirable for
update.packages() to be run as root even if only one person were to run
it.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar 15 16:42:58 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 15 Mar 2002 08:42:58 -0800 (PST)
Subject: [Rd] Thought on crossprod
In-Reply-To: <15505.64244.865792.272476@gargle.gargle.HOWL>
Message-ID: <Pine.A41.4.44.0203150840250.25112-100000@homer14.u.washington.edu>

On Fri, 15 Mar 2002, Martin Maechler wrote:

> >>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
>
>     JonR> does not recognise the case where y is the same as x as special.  I'd
>     JonR> like to extend crossprod to something like
>
>     >> crossprod
>     JonR> function(x, y = NULL)
>     JonR> if (is.null(y))
>     JonR>    .Internal(crossprod.symm(x))
>     JonR> else
>     JonR>    .Internal(crossprod(x, y))
>
>     JonR> Before I start mesing up my R-1.4.1 installation, does anyone have any
>     JonR> thoughts on this?
>
> Just for clarification:
> The main point of your suggestion is to pass only half as much
> data down to C, right?
>

If this can be done with the BLAS functions then halving the necessary
memory bandwidth will also help -- that's one of the limiting factors in
ATLAS, for example.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 15 17:13:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 15 Mar 2002 17:13:31 +0000 (GMT)
Subject: [Rd] Thought on crossprod
In-Reply-To: <Pine.A41.4.44.0203150840250.25112-100000@homer14.u.washington.edu>
Message-ID: <Pine.LNX.4.31.0203151701340.26291-100000@gannet.stats>

On Fri, 15 Mar 2002, Thomas Lumley wrote:

> On Fri, 15 Mar 2002, Martin Maechler wrote:
>
> > >>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
> >
> >     JonR> does not recognise the case where y is the same as x as special.  I'd
> >     JonR> like to extend crossprod to something like
> >
> >     >> crossprod
> >     JonR> function(x, y = NULL)
> >     JonR> if (is.null(y))
> >     JonR>    .Internal(crossprod.symm(x))
> >     JonR> else
> >     JonR>    .Internal(crossprod(x, y))
> >
> >     JonR> Before I start mesing up my R-1.4.1 installation, does anyone have any
> >     JonR> thoughts on this?
> >
> > Just for clarification:
> > The main point of your suggestion is to pass only half as much
> > data down to C, right?
> >
>
> If this can be done with the BLAS functions then halving the necessary
> memory bandwidth will also help -- that's one of the limiting factors in
> ATLAS, for example.

Looks like dsyrk can do this: despite the definition of *sy* BLAS routines
on my quick reference card it does not need a symmetric matrix, which is
why I overlooked it in earlier correspondence with Jonathan.  As from
1.5.0 dsyrk will be available in R.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar 15 17:44:34 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Mar 2002 12:44:34 -0500
Subject: [Rd] File permissions test during R CMD check
References: <Pine.LNX.4.31.0203151521070.25930-100000@gannet.stats>
Message-ID: <3C923302.664FAE6A@bank-banque-canada.ca>

ripley@stats.ox.ac.uk wrote:

> Relevance?  INSTALL sets the umask, not uses an existing one.

Well, if you keep your files in cvs as lots of people do, then R CMD
check gives lots of warnings messages about the file permissions after
you checkout your files with the wrong umask. Not that this in itself is
so bad, but when one gets lots of warning messages all the time then
they often get ignored and the important ones are missed. So I think it
is useful to get the settings right and avoid the warning messages.

Don't get me wrong, I think this is a problem in the Linux
distributions, not in R.

Paul
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Fri Mar 15 22:30:20 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Fri, 15 Mar 2002 17:30:20 -0500
Subject: [Rd] NA in character vectors
Message-ID: <15506.30204.173083.457974@gargle.gargle.HOWL>

Hi all,

While R-1.5.0 is still unfrozen, I'd like to try again to generate interest in
my favorite pet peeve: NA's in character vectors.  Last October I wrote:

> LETTERS[c(NA,2)] in S is c("","B"), but in R is c("NA","B").

We had an interesting discussion then, and I learned (from Duncan Murdoch and
Thomas Lumley) that R does have an internal code for missing char values
(R_NaString), but it gets easily confused with the string "NA".  Check this:

  R> z <- c(LETTERS[c(2,NA)], "NA", paste("NA"))
  R> is.na(z)
     [1] FALSE  TRUE  TRUE FALSE
  R> z[3]==z[4]
     [1] TRUE
  R> z=="NA"
     [1] FALSE  TRUE  TRUE  TRUE

Thomas Lumley <tlumley@u.washington.edu> suggested that this weird behavior
essentially arises because the parser converts "NA" to R_NaString, and so...
> It looks like we basically need to
>  1) stop the parser generating R_NaString from \"NA\"
>  2) Change PRINTNAME(R_NaString) to avoid ambiguity

While I still like the simple S-Plus model (""), Thomas's suggestions (with
PRINTNAME(R_NaString) = "<NA>" for example) would be OK too.  Thanks for
listening (again)!
-- 
                              -- David Brahm (brahm@alum.mit.edu)
"I write this letter not to nag nor to whine, but to prod." - Lisa Simpson
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Sat Mar 16 02:27:33 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 15 Mar 2002 20:27:33 -0600
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <3C923302.664FAE6A@bank-banque-canada.ca>
References: <Pine.LNX.4.31.0203151521070.25930-100000@gannet.stats> <3C923302.664FAE6A@bank-banque-canada.ca>
Message-ID: <20020316022733.GA23564@sonny.eddelbuettel.com>

On Fri, Mar 15, 2002 at 12:44:34PM -0500, Paul Gilbert wrote:
> Don't get me wrong, I think this is a problem in the Linux
> distributions, not in R.

Please don't generalise. Debian had 022 since at least 1995:

edd@sonny:~> grep umask /etc/skel/.[a-z]*
/etc/skel/.bash_profile:umask 022


Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Edwin@balpol.tudelft.nl  Sat Mar 16 14:40:33 2002
From: Edwin@balpol.tudelft.nl (Edwin@balpol.tudelft.nl)
Date: Sat, 16 Mar 2002 15:40:33 +0100 (MET)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual (PR#1387)
Message-ID: <200203161440.PAA18107@pubhealth.ku.dk>

Full_Name: Edwin
Version: 1.4.1
OS: SunOS/Solaris
Submission from: (NULL) (130.161.1.115)


When selecting an X11 visual on Solaris 2.7 with

X11(colortype="true")

a PseudoColor visual is actually created. (verified with xwininfo)

The system in question (like many UNIX workstations) has both Pseudo and
truecolor visual types available, however the default type points to an 8 plane
PseudoColor visual. 
Some applications look for the truecolor visual (netscape, acroread) and use it
when available. For others it needs to be explicitely requested (VNC viewer). R
seems to do neither and just goes with the default, even if a truecolor type is
requested.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar 16 18:12:29 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 16 Mar 2002 19:12:29 +0100 (MET)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual (PR#1388)
Message-ID: <200203161812.TAA18426@pubhealth.ku.dk>

On Sat, 16 Mar 2002 Edwin@balpol.tudelft.nl wrote:

> Full_Name: Edwin
> Version: 1.4.1
> OS: SunOS/Solaris
> Submission from: (NULL) (130.161.1.115)
>
>
> When selecting an X11 visual on Solaris 2.7 with
>
> X11(colortype="true")
>
> a PseudoColor visual is actually created. (verified with xwininfo)

Note that the help page does *not* say that this `selects a visual'. It
says it selects a `color model'.  One can use a model which differs from
the X11 visual class, but the default class and depth are always used.

This seems to be a misunderstanding of the `colortype' argument: there is
no argument to select a visual class.

> The system in question (like many UNIX workstations) has both Pseudo and
> truecolor visual types available, however the default type points to an 8 plane
> PseudoColor visual.

I believe that is unusual.  Sun Xservers allow you to set the default
visual on the command line: has the default been overridden?  Ours with
multiple visuals are selecting TrueColor, but it does say the default is
hardware-dependent.

> Some applications look for the truecolor visual (netscape, acroread) and use it
> when available. For others it needs to be explicitely requested (VNC viewer). R
> seems to do neither and just goes with the default, even if a truecolor type is
> requested.

As it does not say it will do anything else, this is not strictly a bug.
It needs someone with the problem to contribute an enhancement, perhaps
additional arguments to select the visual class and depth?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From conor@psy.uva.nl  Sat Mar 16 20:08:30 2002
From: conor@psy.uva.nl (conor@psy.uva.nl)
Date: Sat, 16 Mar 2002 21:08:30 +0100 (MET)
Subject: [Rd] promax (PR#1389)
Message-ID: <200203162008.VAA18574@pubhealth.ku.dk>

Full_Name: conor dolan
Version: 1.4.0
OS: windows98
Submission from: (NULL) (146.50.170.247)


On the basis of Lawley and Maxwell's explanation in Factor Analysis as a
Statistical Method (London: Butterworth, 1971), the following line in the promax
routine (library, mva):

attr(z, "covariance") <- crossprod(U)

should be 

attr(z, "covariance") <- solve(crossprod(U))

the attribute as calculated at present is the inverse correlation matrix. 
try following example:

# start example
l<-matrix(c(.8,.7,.6,0,0,0,0,0,0,.7,.8,.9),6,2)
y<-matrix(c(1,.4,.4,1),2,2)
s1<-l%*%y%*%t(l)
t<-diag(1,6)-diag(diag(s1))
s1<-s1+t
library(mva)
res1<-factanal(cov=s1,factors=2)
l1<-res1$loadings
# note: the parameter m is set to a relatively large value 
# to ensure that almost exact values are recovered (try m=20, and compare
results)
res2<-promax(l1,m=10)
y2<-attr(res2$loadings,"covariance")
print(" true common factor inter correlation matrix ")
print(y)
print(" attr designated `covariance` ")
print(y2)
print("inverse of latter ")
print(solve(y2))
# end example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Mar 16 21:06:49 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Sat, 16 Mar 2002 22:06:49 +0100 (MET)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual (PR#1390)
Message-ID: <200203162106.WAA18650@pubhealth.ku.dk>

On Sat, 16 Mar 2002 ripley@stats.ox.ac.uk wrote:

> On Sat, 16 Mar 2002 Edwin@balpol.tudelft.nl wrote:
>
>
> > The system in question (like many UNIX workstations) has both Pseudo and
> > truecolor visual types available, however the default type points to an 8 plane
> > PseudoColor visual.
>
> I believe that is unusual.  Sun Xservers allow you to set the default
> visual on the command line: has the default been overridden?  Ours with
> multiple visuals are selecting TrueColor, but it does say the default is
> hardware-dependent.
>

As another data point: The Sun workstation that I had a couple of years
ago had this setup as well, and I'm fairly sure that the defaults hadn't
been overridden, but I seem to remember that I raised this issue back then
and no-one else reported a similar problem.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Mar 16 21:06:09 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Sat, 16 Mar 2002 13:06:09 -0800 (PST)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual
 (PR#1388)
In-Reply-To: <200203161812.TAA18426@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203161302530.183056-100000@homer01.u.washington.edu>

On Sat, 16 Mar 2002 ripley@stats.ox.ac.uk wrote:

> On Sat, 16 Mar 2002 Edwin@balpol.tudelft.nl wrote:
>
>
> > The system in question (like many UNIX workstations) has both Pseudo and
> > truecolor visual types available, however the default type points to an 8 plane
> > PseudoColor visual.
>
> I believe that is unusual.  Sun Xservers allow you to set the default
> visual on the command line: has the default been overridden?  Ours with
> multiple visuals are selecting TrueColor, but it does say the default is
> hardware-dependent.
>

As another data point: The Sun workstation that I had a couple of years
ago had this setup as well, and I'm fairly sure that the defaults hadn't
been overridden, but I seem to remember that I raised this issue back then
and no-one else reported a similar problem.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From E.Velds@balpol.tudelft.nl  Sat Mar 16 21:08:50 2002
From: E.Velds@balpol.tudelft.nl (E.Velds@balpol.tudelft.nl)
Date: Sat, 16 Mar 2002 22:08:50 +0100 (MET)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual(PR#1387)
Message-ID: <200203162108.WAA18671@pubhealth.ku.dk>

ripley@stats.ox.ac.uk wrote:
> 
> On Sat, 16 Mar 2002 Edwin@balpol.tudelft.nl wrote:
> 
> > Full_Name: Edwin
> > Version: 1.4.1
> > OS: SunOS/Solaris
> > Submission from: (NULL) (130.161.1.115)
> >
> >
> > When selecting an X11 visual on Solaris 2.7 with
> >
> > X11(colortype="true")
> >
> > a PseudoColor visual is actually created. (verified with xwininfo)
> 
> Note that the help page does *not* say that this `selects a visual'. It
> says it selects a `color model'.  One can use a model which differs from
> the X11 visual class, but the default class and depth are always used.
> 
> This seems to be a misunderstanding of the `colortype' argument: there is
> no argument to select a visual class.

Not as much a misunderstanding, but more considered as closely related.

> 
> > The system in question (like many UNIX workstations) has both Pseudo and
> > truecolor visual types available, however the default type points to an 8 plane
> > PseudoColor visual.
> 
> I believe that is unusual.  Sun Xservers allow you to set the default
> visual on the command line: has the default been overridden?  Ours with
> multiple visuals are selecting TrueColor, but it does say the default is
> hardware-dependent.

It *can* be set as default, but on all of the Suns and most of the SGIs
I work with, it isn't. And I don't have the ability to change that
unfortunately. And there's an added problem that the truecolor visuals
in 2D are very slow compared to the pseudocolor, which makes it
undesireable to have the truecolor as default.

> 
> > Some applications look for the truecolor visual (netscape, acroread) and use it
> > when available. For others it needs to be explicitely requested (VNC viewer). R
> > seems to do neither and just goes with the default, even if a truecolor type is
> > requested.
> 
> As it does not say it will do anything else, this is not strictly a bug.
> It needs someone with the problem to contribute an enhancement, perhaps
> additional arguments to select the visual class and depth?
> 

I wondered about whether to file this as a bug and I reasoned that when
selecting a colour mode which is incompatible with the created visual,
there is something wrong. It does seem logical that the driver would try
to get the best suited visual for the colour mode and that there would
be a warning if the colour mode can't be supported.

In any case, it would be a nice enhancement for graphics support.

Edwin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar 16 21:35:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 16 Mar 2002 22:35:41 +0100 (MET)
Subject: [Rd] promax (PR#1389)
Message-ID: <200203162135.WAA18704@pubhealth.ku.dk>

The line is no longer present. It was never documented to be what you are
guessing it to be.

On Sat, 16 Mar 2002 conor@psy.uva.nl wrote:

> Full_Name: conor dolan
> Version: 1.4.0
> OS: windows98
> Submission from: (NULL) (146.50.170.247)
>
>
> On the basis of Lawley and Maxwell's explanation in Factor Analysis as a
> Statistical Method (London: Butterworth, 1971), the following line in the promax
> routine (library, mva):
>
> attr(z, "covariance") <- crossprod(U)
>
> should be
>
> attr(z, "covariance") <- solve(crossprod(U))
>
> the attribute as calculated at present is the inverse correlation matrix.
> try following example:
>
> # start example
> l<-matrix(c(.8,.7,.6,0,0,0,0,0,0,.7,.8,.9),6,2)
> y<-matrix(c(1,.4,.4,1),2,2)
> s1<-l%*%y%*%t(l)
> t<-diag(1,6)-diag(diag(s1))
> s1<-s1+t
> library(mva)
> res1<-factanal(cov=s1,factors=2)
> l1<-res1$loadings
> # note: the parameter m is set to a relatively large value
> # to ensure that almost exact values are recovered (try m=20, and compare
> results)
> res2<-promax(l1,m=10)
> y2<-attr(res2$loadings,"covariance")
> print(" true common factor inter correlation matrix ")
> print(y)
> print(" attr designated `covariance` ")
> print(y2)
> print("inverse of latter ")
> print(solve(y2))
> # end example
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Mar 18 08:51:35 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Mon, 18 Mar 2002 08:51:35 +0000
Subject: [Rd] Thought on crossprod
References: <Pine.LNX.4.31.0203151701340.26291-100000@gannet.stats>
Message-ID: <3C95AA97.D677DDDC@durham.ac.uk>

ripley@stats.ox.ac.uk wrote:
> 
> On Fri, 15 Mar 2002, Thomas Lumley wrote:
> 
> > On Fri, 15 Mar 2002, Martin Maechler wrote:
> >
> > > >>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
> > >
> > >     JonR> does not recognise the case where y is the same as x as special.  I'd
> > >     JonR> like to extend crossprod to something like
> > >
> > >     >> crossprod
> > >     JonR> function(x, y = NULL)
> > >     JonR> if (is.null(y))
> > >     JonR>    .Internal(crossprod.symm(x))
> > >     JonR> else
> > >     JonR>    .Internal(crossprod(x, y))
> > >
> > >     JonR> Before I start mesing up my R-1.4.1 installation, does anyone have any
> > >     JonR> thoughts on this?
> > >
> > > Just for clarification:
> > > The main point of your suggestion is to pass only half as much
> > > data down to C, right?
> > >
> >
> > If this can be done with the BLAS functions then halving the necessary
> > memory bandwidth will also help -- that's one of the limiting factors in
> > ATLAS, for example.
> 
> Looks like dsyrk can do this: despite the definition of *sy* BLAS routines
> on my quick reference card it does not need a symmetric matrix, which is
> why I overlooked it in earlier correspondence with Jonathan.  As from
> 1.5.0 dsyrk will be available in R.

Sorry -- I've been away for the weekend.  My intention in the original
post was not to save on memory but simply to do half as many
inner-products (it seems inelegant not to exploit the symmetry!).  I had
not thought about losing the benefit of an optimised BLAS (I am not
using one myself at present).  I take it from this correspondence that,
for now, my best approach might be to write my own "crossprod.symm" in
C, but that this might actually slow me down in the future.

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 18 08:58:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 18 Mar 2002 08:58:44 +0000 (GMT)
Subject: [Rd] Thought on crossprod
In-Reply-To: <3C95AA97.D677DDDC@durham.ac.uk>
Message-ID: <Pine.LNX.4.31.0203180852490.17211-100000@gannet.stats>

On Mon, 18 Mar 2002, Jonathan Rougier wrote:

[...]

> Sorry -- I've been away for the weekend.  My intention in the original
> post was not to save on memory but simply to do half as many
> inner-products (it seems inelegant not to exploit the symmetry!).  I had
> not thought about losing the benefit of an optimised BLAS (I am not
> using one myself at present).  I take it from this correspondence that,
> for now, my best approach might be to write my own "crossprod.symm" in
> C, but that this might actually slow me down in the future.

You really should investigate optimized BLASs before worrying about this.

I think the best approach is for us to modify crossprod to recognize the
symmetric case in 1.5.0 and call the appropriate BLAS routine.
Or, at least do so for real (not complex) inputs on IEEE-compliant
machines (which we believe all current R platforms are).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 18 10:16:37 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 18 Mar 2002 10:16:37 +0000 (GMT)
Subject: [Rd] Thought on crossprod
In-Reply-To: <Pine.LNX.4.31.0203180852490.17211-100000@gannet.stats>
Message-ID: <Pine.GSO.4.44.0203181008440.11450-100000@auk.stats>

On Mon, 18 Mar 2002 ripley@stats.ox.ac.uk wrote:

> On Mon, 18 Mar 2002, Jonathan Rougier wrote:
>
> [...]
>
> > Sorry -- I've been away for the weekend.  My intention in the original
> > post was not to save on memory but simply to do half as many
> > inner-products (it seems inelegant not to exploit the symmetry!).  I had
> > not thought about losing the benefit of an optimised BLAS (I am not
> > using one myself at present).  I take it from this correspondence that,
> > for now, my best approach might be to write my own "crossprod.symm" in
> > C, but that this might actually slow me down in the future.
>
> You really should investigate optimized BLASs before worrying about this.
>
> I think the best approach is for us to modify crossprod to recognize the
> symmetric case in 1.5.0 and call the appropriate BLAS routine.
> Or, at least do so for real (not complex) inputs on IEEE-compliant
> machines (which we believe all current R platforms are).

Some data (on an old Sun):

A <- matrix(rnorm(500*500), 500)

without extra BLAS
> system.time(B <- crossprod(A, A))
[1] 7.21 0.02 7.31 0.00 0.00

with ATLAS
> system.time(B <- crossprod(A,A))
[1] 1.01 0.00 1.02 0.00 0.00

after adding the symmetric case
> system.time(B <- crossprod(A))
[1] 0.74 0.00 0.75 0.00 0.00

A <- matrix(rnorm(500*500), 5000)
without extra BLAS
> system.time(B <- crossprod(A,A))
[1] 0.83 0.00 0.85 0.00 0.00

with ATLAS
>  system.time(B <- crossprod(A,A))
[1] 0.15 0.00 0.17 0.00 0.00

using symmetry
>  system.time(B <- crossprod(A))
[1] 0.15 0.00 0.16 0.00 0.00

So the potential gains are minor compared to using an optimized BLAS.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Mon Mar 18 21:26:25 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Mon, 18 Mar 2002 16:26:25 -0500
Subject: [Rd] Missing zlib.h and zconf.h in R-devel/src/main
Message-ID: <15510.23425.252658.366764@gargle.gargle.HOWL>

Hi all,

When I tried to "make" R-devel (3/18) on Solaris 2.6, I got this error:
  In file included from dounzip.c:28:
  unzip.h:49: zlib.h: No such file or directory
  dounzip.c:365: zlib.h: No such file or directory
  make[3]: *** [dounzip.o] Error 1
  make[3]: Leaving directory `/home/a215020/Xperiment/R-devel/src/main'

So I went into R-devel/src/main and made two symbolic links:
  ln -s ../extra/zlib/zlib.h .
  ln -s ../extra/zlib/zconf.h .
and then it worked.

   I understand R-devel is never guaranteed to be complete, but I thought you
might want to know...
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From htang@hpl.hp.com  Tue Mar 19 01:29:14 2002
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Tue, 19 Mar 2002 02:29:14 +0100 (MET)
Subject: [Rd] levels(f)<-list doesn't work as expected when list is longer than nlevels(f) (PR#1394)
Message-ID: <200203190129.CAA29194@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.4.1
OS: Linux
Submission from: (NULL) (192.6.19.190)


Hi all,

   When renaming the levels of a factor f using levels(f)<-list(...), if the
list is longer than the original number of levels in f, the result is wrong.

Example:

> f <- factor(c("a","b"))

> levels(f) <- list(C="C", A="a", B="b")

Warning message: 
number of items to replace is not a multiple of replacement length 

> f
[1] C A
Levels:  C A 

The answer should be something like

[1] A B
Levels:  C A B

Thanks,
Hsiu-Khuern Tang.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@niwa.cri.nz  Tue Mar 19 05:11:52 2002
From: mh.smith@niwa.cri.nz (mh.smith@niwa.cri.nz)
Date: Tue, 19 Mar 2002 06:11:52 +0100 (MET)
Subject: [Rd] mgp parameter in par() (PR#1395)
Message-ID: <200203190511.GAA29496@pubhealth.ku.dk>

Full_Name: Murray H Smith
Version: 1.4.1
OS: Windows 2000
Submission from: (NULL) (202.36.29.1)


The mgp parameter in par() does not allow negative values. That is, it does not
allow plots with axes ticks and labels inside the plot. The help document,
Introduction to R, under Graphics: Axes and tick marks, specifically mentions
negative values for mgp as a way to achieve internal ticks and labels. 

Code:
> par(mgp=c(-3,-1,0))
Error in par(mgp = c(-3, -1, 0)) : invalid value specified for graphics
parameter "mgp"

> par(mgp=c(3,-1,0))
Error in par(mgp = c(3, -1, 0)) : invalid value specified for graphics parameter
"mgp".

> par(mgp=c(3,1,-1))
Error in par(mgp = c(3, 1, -1)) : invalid value specified for graphics parameter
"mgp".

> par(mgp=c(-3,1,0))
Error in par(mgp = c(-3, 1, 0)) : invalid value specified for graphics parameter
"mgp".






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fgfgf@we.cv  Tue Mar 19 11:44:37 2002
From: fgfgf@we.cv (fgfgf@we.cv)
Date: Tue, 19 Mar 2002 12:44:37 +0100 (MET)
Subject: [Rd] =?big5?Q?=AB=A2=B9=C6 =B3=CC=AA=F1=A6n=B6=DC=3F=3F=3F=3F=3F=3F=3F=3F?= rmJ4DQRldwFQR1v
Message-ID: <Fj4JOEGLwu@ibm.com>

ªÅ¤ù§åµo»ù4.99¤¸°_¦A°e¥d³qvcd©Î­^¤å±Ð¾Ç³nÅé

°âëä¼wÀu­±ªÅ¤ù,¸g´ú¸Õ¤£¨}²v2%¥ª¥k 
²M·¡ªºªÅ¤ù¤À¯Å¡A
µ´¤£®³B·íA¡A®³C·íB¶RªÅ¤ù¤]­n¬Ý»s³y¼t¡A¤j¼t¥X³f«~½è«Oµý¡A¬Ò¥i24¼g
¨C±i¤u¼t§åµo»ù4.99¤¸°_,¦Û¨ú´N°e¥d³qvcd©Î­^¤å±Ð¾Ç³nÅé!!!!!
¶R¤­¦Ê¦A°e¥®±Ðvcd©Î­^¤å±Ð¾Ç³nÅé°e§¹¬°¤î 
¥®±Ðvcd ¥d³qvcd©Î­^¤å±Ð¾Ç³nÅé¨C±i¯S´f»ù49¤¸
¤Å¦^«H½Ð¥H¿ËÁ{¥»©±©Î¹q¸ÜÁpµ¸ ¥¼±µÅ¥½Ð¯d¨¥©Îµy«á¦A¼·
0939099572 ÁÂ¥ý¥Í

°ª«~½èªÅ¥ÕªÅ¥Õ¥úºÐ¤ù±M·~§åµo 

¥t¦³¦U«~µP CD-RªÅ¥Õ¤ù§C»ù¨ÑÀ³¡A«~½è«OÃÒ¡G 

             °ê¤ºªÅ¤ù¤j¼t³ø»ù
 ¤ù¦W       ¤u¼t    µ¥¯Å   ¤ùºØ       ¦Ê¤ù³ø»ù       
¢i¢i¢i¢i¢i¢i¢i¢i¢i¢«ëä¼w±M°Ï¢¨¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i
TDK        ëä¼w74¤À  S    ¤ôÂÅ¤ù       (850) 
RICOH      ëä¼w74¤À  S    ¥Õª÷¤ù       (800) 
RIDATA     ëä¼w      A    ¤ôÂÅ¤ù       (699) 
TGK        ëä¼w      A    ¤ôÂÅ¤ù       (599) 
MEGADATE   ëä¼w      A    ¤ôÂÅ¤ù       (680) 
SUMMER     ëä¼w      A    ¥Õª÷¤ù       (680) 
KGB        ëä¼w80¤À  A    ¤ôÂÅ¤ù       (499) 
¥ú¨~       ëä¼w      A    ¥Õª÷¤ù       (600)        
¢i¢i¢i¢i¢i¢i¢i¢i¢i¢«¤¤Àô±M°Ï¢¨¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i
YAMAHA     ¤¤Àô80¤À  A+   ¥Õª÷¤ù       (699)        
PHILIPS    ¤¤Àô80¤À  A+   ¤ôÂÅ¤ù       (750)        
PHILIPS    ¤¤Àô80¤À  A+   ¥Õª÷¤ù       (750)
GKN        ¤¤Àô80¤À  A+   ¤ôÂÅ¤ù       (699) 
GKN        ¤¤Àô80¤À  A+   ¥Õª÷¤ù       (699)
JJKL       ¤¤Àô80¤À  A+   ¤ôÂÅ¤ù       (599)        
JJKL       ¤¤Àô80¤À  A+   ¥Õª÷¤ù       (599)        
KAFULLY    ¤¤Àô80¤À  A    ¥Õª÷¤ù       (499) 



µù1: ´«¤ù½Ð¿í¦u¥H¤U¤T¤j­ì«h¡G
¡@1)¤£¥i¥Hµ²§À(CLOSE)¡A´N¬ODIR¬Ý¤£¨ì¦³¥ô¦ó¸ê®Æ
  2)¤£¥i¥H¦b¤ù¤l¤W¶î¶î¼g¼g
  3)¤£¥i¥H¦³ÄY­«¿i·l
> µù2: ¥H¤W³ø»ù¬Ò¥¼§tÀç·~µ|5%;
>      

> 
> ¥H¤W°Ó«~¡A´±¼Ð¥X¨Ó´N¬O¦³³f!!µ´«D¨S³f¦b¶Ã¥«³õªº!! 
> Åwªï¸g¾P°Ó¤Î¶T©ö°Óªø´Á°t¦X!!!!! 
> Åwªï¦U¾÷Ãö¡B¤½¥q¦æ¸¹¡B¾Ç®Õ³æ¦ì­qÁÊ¡A¥i¶}µo²¼³ø±b!! 
> Åwªï¶T©ö°Ó,½L°Ó,©±®a¨Ó¹q¸ß»ù 
> 
> ¤£º¡·N»ù¿ú ,Åwªï¥´¹q¸Ü¸ß°Ý,Åwªï±þ»ù 
> ¸ò§Ú½æªº¸Ü¦n¥Î«~½è¤£¿ù ½ÐÀ°§Ú¤¶²ÐªB¤Í¨Ó¶R 
> °µªÅ¤ù·å²«¥i´««Oµý¡A 
> Åý§A¶Rªº¦w¤ß,¥Îªº¦w¤ß,¤£¥Î¾á¤ß¶R¤FªÅ¤ù«o§ä¤£¨ì½æ¥D 
> §Ú­Ìªº©v¦®¬O,±M·~,¿Ë¤Á,¹D¼w 
> Åý®ø¶OªÌ¥H¦X²zªº»ù®æ®³¨ì¦n«~½èªº¥úºÐ¤ù 
> ¦W§»¨t¦CªÅ¤ù¤u¼tª½Àç¡A¤@¤À¿ú¥i¥H¶R¨ì¨â¤À³f­ò!! 
2.¥~°e
> ¾P°â¤èªk¬O¥H¥~°eªA°Èª½±µ­±¹ï®ø¶OªÌªº¡C 
> ¶RªÅ¥Õ¤ù´NÀ°«È¤á°e¨ì©²¬O§Ú­Ìªº°í«ù 
>
¥~°eªA°ÈÁöµM²Ö¤H¦ý¬Ý¨ì·R¥ÎªÌªº¨}¦n¦^À³¡C¦A²Ö³£¬O­È±oªº¡C
> ¥þ¬Ù¦U¦a¥i¶l±H¡B³f¹B¡B¥N¦¬³f»ù¨ì©² 
> ¦W§»¥~°e¸ß°Ý­q³f±M½u 0939099572 ÁÂ¥ý¥Í
> (¤G¤Q¥|¤p®ÉªA°È) 
> 
> ¥t¦b¥H¤U¦aÂI¥i±M¤H°e³f¦Û¨ú
> 1.¥x¥_¦a°Ï¦Û¨ú¦aÂI: ­q³f±M½u 0939099572 ÁÂ¥ý¥Í(24H) 
> 
> ·s©± ²H¤ô(²H¤j) ¤hªL(¦ÊÄÖ¾ô) ©Ó¼w¸ô(³Á·í³Ò) 
> ¤¤©M ¥Ã©M ¥úµØ ªO¾ô(µØ¦¿¾ô) ©µ¥­¥_¸ô¤T­«(¤¤§µ¾ô)
> Ãö´ç
> ¬õ¾ðªL 
> ¤TªÛ(·s®H) ¤ì¬](¬F¤j) ¤½À](¥x¤j) ¤­ªÑ(¦¨®õ¸ô) 
> Äª¬w(¤T¥Á°ê¤¤) ®v¤j ´º¬ü ¤jº~¾ô¦Û¨ú 
> 
> 
> 2.°ª¶¯¦a°Ï¦Û¨ú¦aÂI: ­q³f±M½u 0939099572 ÁÂ¥ý¥Í(24H) 
> 
> NOVA «Ø°ê°Ó³õ ¶¶µo3C Ä_¼Ö¤û±ÆÀ] ¤jµØ¹´À¸°| ¦y¬ü¦Ê³f
> ³Ò¤u¤½¶é ¥Á±Ú¤j¼Ö ¥úµØ¤j¼Ö 
>
¥H¤U¦U³Á·í³Ò¬Ò¥i(¤å¤Æ¤¤¤ßªù¥«,¤E¦p¥æ¬y¹Dªù¥«,¶§©ú¸ôªù¥«,¼á²M´òªù¥«,
> ÆQÑL°Ï¤­ºÖ¸ôªù¥«,°ªÂåªù¥«,»ñ¤sªù¥«,¥ªÀçªù¥«) 

¥H¤U¾Ç®Õ¬Ò¥i°e³f(¤¤¤s¤j¾Ç,°ª®v¤j,¸q¦u¤j¾Ç,¶¯¤¤,¹D©ú,ªþ¤¤,»ñ¤¤,
´_µØ,¥¿­×,¤åÄ¦,°ª¶¯¤u±M,¶¯°Ó,¤T«H,°ê»Ú,¾ð¼w) 

3.¥x«n¦a°Ï¦Û¨ú¦aÂI: ­q³f±M½u 0939099572 ÁÂ¥ý¥Í(24H) 

¥_ªù°Ó³õ ¦¨¤j¤j¾Ç¸ô³Á·í³Ò ¤¤¥¿¸ô³Á·í³Ò
¤p¥_©]¥«³Á·í³Ò
·s¥ú¦Ê³f³Á·í³Ò ¨}¬ü¦Ê³f®Ç¤pÃM¤h
°·±d¸ô¤T¬P©]¥«®ÇªÖ¼w°ò
¤¤µØªF¸ôÀé©[®ÇªÖ¼w°ò
¥H¤U¾Ç®Õ¬Ò¥i°e³f¦¨¤j,±X¤s,«n¥x,¤¤µØÂå±M,
«n¤@¤¤,«n¤G¤¤)
 
4.¥x¤¤,¹ü¤Æ¦a°Ï¦Û¨ú¦aÂI:­q³f±M½u 0939099572
 ÁÂ¥ý¥Í(24H) 

¥x¤¤¨®¯¸³Á·í³Ò ¹ü¤Æ¨®¯¸³Á·í³Ò ­ûªL¶Àª÷«Ò°ê¦Ê³f
ªá¾Â¤¤¤s¸ô³Á·í³Ò ³À´ä¼q¤f¥x¤¤¨®¯¸ 

³{¥Ò³Á·í³Ò ³{¥Ò³Á·í³Ò 
¥H¤U¾Ç®Õ¬Ò¥i°e³f(ªF®ü,³{¥Ò,ÀR©y,¹ü®v¤j,¤j¸­,¤¤¤@¤¤) 
 
5.®ç¦Ë­]¦a°Ï¦Û¨ú¦aÂI:­q³f±M½u 0939099572 ÁÂ¥ý¥Í(24H)
 
±M¤H°e³f!!!!!!!


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Tue Mar 19 14:17:19 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Tue, 19 Mar 2002 15:17:19 +0100 (CET)
Subject: [Rd] Small typo in An Introduction to R
In-Reply-To: <x28z94zfch.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.33L2.0203191506430.2390-100000@localhost.localdomain>


At a snail's pace I keep on translating an introduction to R into italian;
I have reached the section describing the glm() function, in which some
example code is presented. The very last line of code, before the
beginning of the section on Poisson models is:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fmp)); c(ldp, ldl)

which of course gives results 43.663 and 43.663; the correct code should
be:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fml)); c(ldp, ldl)

which gives the expected results 43.663 and 43.601

-- 
Michele Alzetta

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Mar 19 17:43:38 2002
From: rossini@u.washington.edu (Anthony Rossini)
Date: Tue, 19 Mar 2002 09:43:38 -0800 (PST)
Subject: [Rd] Question re:S4 classes and design; clashing classes?
Message-ID: <Pine.LNX.4.43.0203190943380.28638@hymn08.u.washington.edu>

Thanks to Duncan's recent work on SJava, I've got a (so far) stable
platform to put together the R-Orca interface (dynamic graphics,
including brushing, subseting, etc).  While the first version will be
looking at installation issues and study basic user interfaces for providing a  
few working examples, it will be important for this particular package to look  at how one integrates a "toolkit" at the user-level with other R libraries.

The obvious place (to me, at least initially) to look is at how the S4
classes might be used for this.

However, I'm having a heck of a time wrapping my head around the
proper design for this.

Here is the general issue:

For "normal data objects" with standard data views (i.e. class of
grand tours, etc), I can simply setMethod on the standard data views,
i.e.

setMethod("grandtour","dataframe", ...)  # standard unstructured grand tour
setMethod("grandtour","Surv", ... )      # tour, restricting temporal data,
                                         # handling survival

etc.  I'm fine on this, and have an acceptable sense of what I'd like
to do here.  Note that here, I'm talking about visualizations that
currently exist, not that might be written for such data.  This is in
fact the first step beyond the package I'm currently finishing up.

For the third version (beyond the initial package and beyond the initial methods version of the package), I've got a second class of objects,
i.e. the data views (possibly customized themselves), which I'd like
to think about.  In particular, I'd like to be able to extend/subclass
"grandtour", for example, to regular ("nice") longitudinal and
spatio-temporal data, i.e. classify the methods, not just the data
being acted on by the methods.

I think I'm missing something really obvious here, and I suspect it is
related to using too many object-oriented systems (I'm more used to
Python's, right now, for example; but even with Java, there is a sense
of balance between methods and data within a class).  Thinking about
it more, I guess I'm not clear on the path or approach that S4 classes
use for inheritance and for contractual negotiation.

Here's the example that I'm using as a basis for thinking about design:

I've got a grandtour object which has slots for Data, Colors (a vector
used for subsetting from brushes -- one can color points in orca or
from R, this being the first approach for it), as well as Guidance (at
this point, merely a string, but will be classed for robustness and
extensibility at somepoint).

At the first step, this is for a single sample.  Now, I'd like to
extend this to problems where one variable is fixed (i.e. TIME, in the
longitudinal or time-series problem, or GROUP, in the correlated data
setting).  So we've got, in a sense, the multiple inheritance problem.
I'd like to be able to inherit from both the Orca object as well as
the data library object.

In other OO systems, I'd subclass grandtour, probably using multiple
inheritance, and modify only the methods which change (or to
paraphrase the Java approach, use interfaces for the orca toolkit, and
classes for the data libraries).  For example, I might want to try a
different visualization for survival data, and only want to change the
display in some way (not the brushing/colors or guidance methods).
I'd like to be able to "rerun" numerical analyses on potentially
interesting subsets, or possibly even predict from current fit models,
and have the required objects be part of the orca object.

Orca objects could have associated methods: dumpPipeline, buildPipeline, brush/selectData, getData, setData, addPipe, rmPipe.  In particular, the Data methods will need to use S4 data objects.

Do I simply extend the data classes to add slots for visualization and the requisite parameters and subclass from existing R libraries?  (i.e. add slots for both parameters and dispatched functions). 

Is there a better approach to approaching this problem (which should
be phrased as: "I've got more than one set of initial classes to build from; what might be the preferred approach to extend"?)

I think I'm missing something from reading John's Green book.  If
anyone has pointers to pages/sections I need to read much more
carefully, I'd be grateful to hear them!

(note: I know a number of approaches for how I can implement it, but I
don't have a good enough sense of S4 class design intentions to pick
any of them as being "reasonably faithful" to good S4 design).

best,
-tony


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rechung@aol.com  Tue Mar 19 20:50:05 2002
From: rechung@aol.com (rechung@aol.com)
Date: Tue, 19 Mar 2002 21:50:05 +0100 (MET)
Subject: [Rd] truehist (MASS) nbins problem (PR#1396)
Message-ID: <200203192050.VAA07111@pubhealth.ku.dk>

Full_Name: Robert Chung
Version: 1.4.1
OS: Windows 98
Submission from: (NULL) (212.198.0.94)


If I try to use the nbins="FD" argument to truehist, I get an 
error that says nclass.fd can't be found. If I edit the 
truehist function to look for nclass.FD the function works 
as I expect.

An example:
> x <- rnorm(100)
> library(mass)
> truehist(x,nbins="scott")  # This works
> truehist(x,nbins="FD")     # This doesn't
Error in switch(casefold(nbins), scott = nclass.scott(data), "freedman-diaconis"
= ,  : 
        couldn't find function "nclass.fd"
> ?nclass.fd  
Error in help("nclass.fd") : No documentation for `nclass.fd' in specified
packages and libraries:
  you could try `help.search("nclass.fd")'
> ?nclass.FD  # this finds the proper help page


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Tue Mar 19 21:15:47 2002
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: 19 Mar 2002 16:15:47 -0500
Subject: [Rd] should lapply preserve attributes?
Message-ID: <1016572547.29959.23.camel@keittlab-6>

I have an application where I need to preserve object attributes across
calls to 'lapply'. The current definition is:

lapply <- function (X, FUN, ...) 
{
    FUN <- match.fun(FUN)
    if (!is.list(X)) 
        X <- as.list(X)
    rval <- .Internal(lapply(X, FUN))
    names(rval) <- names(X)
    return(rval)
}

Would it make sense to replace

	names(rval) <- names(X)

with

	attributes(rval) <- attributes(X)

?? I can, of course, make a local function for this, but wondered if
this change would be useful in general.

Cheers,
Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 19 21:31:35 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Mar 2002 21:31:35 +0000 (GMT)
Subject: [Rd] should lapply preserve attributes?
In-Reply-To: <1016572547.29959.23.camel@keittlab-6>
Message-ID: <Pine.GSO.4.44.0203192128260.24417-100000@auk.stats>

On 19 Mar 2002, Timothy H. Keitt wrote:

> I have an application where I need to preserve object attributes across
> calls to 'lapply'. The current definition is:
>
> lapply <- function (X, FUN, ...)
> {
>     FUN <- match.fun(FUN)
>     if (!is.list(X))
>         X <- as.list(X)
>     rval <- .Internal(lapply(X, FUN))
>     names(rval) <- names(X)
>     return(rval)
> }
>
> Would it make sense to replace
>
> 	names(rval) <- names(X)
>
> with
>
> 	attributes(rval) <- attributes(X)
>
> ?? I can, of course, make a local function for this, but wondered if
> this change would be useful in general.

No, it would be positively harmful.  X might be a data frame, or a time
series .., but rval is only guaranteed to be the same length as X.  If you
know more, adjust the object returned by lapply.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Tue Mar 19 22:29:03 2002
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: 19 Mar 2002 17:29:03 -0500
Subject: [Rd] should lapply preserve attributes?
In-Reply-To: <Pine.GSO.4.44.0203192128260.24417-100000@auk.stats>
References: <Pine.GSO.4.44.0203192128260.24417-100000@auk.stats>
Message-ID: <1016576943.30316.43.camel@keittlab-6>

On Tue, 2002-03-19 at 16:31, Prof Brian D Ripley wrote:
> On 19 Mar 2002, Timothy H. Keitt wrote:
> >
> > Would it make sense to replace
> >
> > 	names(rval) <- names(X)
> >
> > with
> >
> > 	attributes(rval) <- attributes(X)
> >
> > ?? I can, of course, make a local function for this, but wondered if
> > this change would be useful in general.
> 
> No, it would be positively harmful.  X might be a data frame, or a time
> series .., but rval is only guaranteed to be the same length as X.  If you
> know more, adjust the object returned by lapply.
> 

Yes, nevermind. Ah, tiredness... I realized that's not what I meant
after hitting "send" (and that Brian would catch it before I could reply
to my own email! ;-).

What I want is to apply a function to a list of objects and have the
attributes of the objects copied to the resulting list items, e.g.,

out <- lapply(list(ts1=ts(1:10), ts2=ts(1:5)), sample)

and have 'out' be a list of time series instead of attributeless
vectors. Obviously the solution is to make a function that both permutes
the values and copies the attributes as well.

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hyu@stats.uwo.ca  Wed Mar 20 03:50:40 2002
From: hyu@stats.uwo.ca (hyu@stats.uwo.ca)
Date: Wed, 20 Mar 2002 04:50:40 +0100 (MET)
Subject: [Rd] solve() benchmark in R-1.4.1 (PR#1397)
Message-ID: <200203200350.EAA07993@pubhealth.ku.dk>

Full_Name: Hao Yu
Version: R-1.4.1
OS: Windows and Linux
Submission from: (NULL) (129.100.242.16)


I just report what I find for the solve() function when I was doing benchmark.

A specific function Toeplitz is used as following 
"Toeplitz" <- function(x)
{
        matrix(x[1 + abs(outer(seq(along = x), seq(along = x), FUN = "-"))], 
                byrow = T, ncol = length(x))
}

A. On a dual  PIII 1GHz Xeon Linux Redhat 7.2 (R-1.4.1 is recompiled to create
libR.so. No change to other settings. All libraries come with redhat.)
*****************************************************
> system.time(solve(matrix(rnorm(1000000),nrow=1000)))
[1] 35.04  0.30 35.33  0.00  0.00
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 53.28  0.43 53.69  0.00  0.00
*****************************************************
B. On a PIII-M 1.2GHz laptop running Windows Xp Pro (download binary R from
CRAN)
*****************************************************
> system.time(solve(matrix(rnorm(1000000),nrow=1000)))
[1] 28.18  0.05 28.24    NA    NA
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 33.80  0.03 34.14    NA    NA
*****************************************************
C. On a PIII 1.125GHz desktop Windows 2k (Download binary R from CRAN)
*****************************************************
> system.time(solve(matrix(rnorm(1000000),nrow=1000)))
[1] 32.31  0.14 36.37    NA    NA
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 36.45  0.16 40.84    NA    NA
*****************************************************


Clearly solve() does a random matrix inverse faster than a positive definite and
symmetric matrix (covariance matrix). I do not think the results (inverses) are
wrong. But it is odd regarding the timing for solve(). Using solve.Matrix() from
the package Matrix, I got almost identical timings (it fails to identify
positive definite and symmetric matrices). 

Thanks
Hao Yu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jan.wiener@tuebingen.mpg.de  Wed Mar 20 08:07:34 2002
From: jan.wiener@tuebingen.mpg.de (jan.wiener@tuebingen.mpg.de)
Date: Wed, 20 Mar 2002 09:07:34 +0100 (MET)
Subject: [Rd] barplots & ylim (PR#1398)
Message-ID: <200203200807.JAA08835@pubhealth.ku.dk>

hi,
when having a barplot one might wants to start the y-axis at some 
certain value (besides 0).

e.g.

x <- c(4,5,6,7)
barplot(x, ylim=c(3,8))


as you can see, the bars are plotted below the limit specified by ylim.


jan wiener



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From matthias.piksa@web.de  Wed Mar 20 12:41:38 2002
From: matthias.piksa@web.de (matthias.piksa@web.de)
Date: Wed, 20 Mar 2002 13:41:38 +0100 (MET)
Subject: [Rd] RMySQL integer range bug (PR#1400)
Message-ID: <200203201241.NAA12502@pubhealth.ku.dk>

Full_Name: Matthias Piksa
Version: 1.4.1
OS: Redhat 7.1 2.96-85
Submission from: (NULL) (131.220.6.43)


There is a bug when retrieving values out of MySQL (3.23.36) which are of type
UNSIGNED INTEGER(10). The values can vary between 0 and 2^32 but R only accepts
those below 2^31-1. Anything above goes as 2^31-1.

thats what one gets:
print(quickSQL(con,"select ip_dst from iphdr where ip_dst>=2212233216 limit
5"))
      ip_dst
1 2147483647
2 2147483647
3 2147483647
4 2147483647
5 2147483647

and thats what the numbers really are (conversion to character type first):
print(quickSQL(con,"select concat(ip_dst) from iphdr where ip_dst>=2212233216
limit 5"))
  concat(ip_dst)
1     2212234077
2     2212234085
3     2212234085
4     2212234085
5     2212234086

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dj@research.bell-labs.com  Wed Mar 20 14:55:24 2002
From: dj@research.bell-labs.com (David James)
Date: Wed, 20 Mar 2002 09:55:24 -0500
Subject: [Rd] RMySQL integer range bug (PR#1400)
In-Reply-To: <200203201241.NAA12502@pubhealth.ku.dk>; from matthias.piksa@web.de on Wed, Mar 20, 2002 at 01:41:38PM +0100
References: <200203201241.NAA12502@pubhealth.ku.dk>
Message-ID: <20020320095524.A20541@jessie.research.bell-labs.com>


--82I3+IH0IqGh5yIs
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

Hi,

matthias.piksa@web.de wrote:
> Full_Name: Matthias Piksa
> Version: 1.4.1
> OS: Redhat 7.1 2.96-85
> Submission from: (NULL) (131.220.6.43)
> 
> 
> There is a bug when retrieving values out of MySQL (3.23.36) which are of type
> UNSIGNED INTEGER(10). The values can vary between 0 and 2^32 but R only accepts
> those below 2^31-1. Anything above goes as 2^31-1.

Yes, that causes an overflow.  The attached patch to the file
RS-MySQL.c fixes the problem with unsigned integers, but it may not
be general enough -- I'll have to take a closer look for other cases.
By the way, you may notice that the largest unsigned integer in
MySQL is 4294967295, which may not be large enough for some IP
addresses (your data appears to be IP address, if I'm not mistaken).

Thanks for the report,

--
David

> 
> thats what one gets:
> print(quickSQL(con,"select ip_dst from iphdr where ip_dst>=2212233216 limit
> 5"))
>       ip_dst
> 1 2147483647
> 2 2147483647
> 3 2147483647
> 4 2147483647
> 5 2147483647
> 
> and thats what the numbers really are (conversion to character type first):
> print(quickSQL(con,"select concat(ip_dst) from iphdr where ip_dst>=2212233216
> limit 5"))
>   concat(ip_dst)
> 1     2212234077
> 2     2212234085
> 3     2212234085
> 4     2212234085
> 5     2212234086
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636

--82I3+IH0IqGh5yIs
Content-Type: text/plain; charset=us-ascii
Content-Description: RMySQL_0.4-3.patch
Content-Disposition: attachment; filename="RMySQL_0.4-3.patch"

494d493
<     case FIELD_TYPE_LONG:            /* 4-byte INTEGER   */
495a495,501
>       break;
>     case FIELD_TYPE_LONG:            /* 4-byte INTEGER   */
>       /* if unsigned, turn into numeric (may be too large for ints/long)*/
>       if(select_dp[j].flags & UNSIGNED_FLAG)
>         flds->Sclass[j] = NUMERIC_TYPE;
>       else
>         flds->Sclass[j] = INTEGER_TYPE;

--82I3+IH0IqGh5yIs--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Wed Mar 20 15:21:48 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed, 20 Mar 2002 10:21:48 -0500
Subject: [Rd] Question re:S4 classes and design; clashing classes?
References: <Pine.LNX.4.43.0203190943380.28638@hymn08.u.washington.edu>
Message-ID: <3C98A90C.484269EB@research.bell-labs.com>

It wasn't entirely clear what your design goals were, but the general
question of comparing functional method languages (S, CLOS, Dylan) and
OOP languages (Java, etc) is of much interest to me, so here are some
general comments.  Maybe we can then iterate on your example, with or
without r-devel.

The basic difference in approach is easy to state:

 Functional languages define methods based on the function and a
signature (a list matching classes to formal arguments);  OOP languages
attach all methods to a class definition.

The distinction becomes relevant if a function does "multiple dispatch";
that is, defining methods that depend on more than one argument.  (In
that sense, S3 methods made no use of the functional nature of the
language.)

If, say, f(x, y) only has methods that depend on x, then it's just
syntactic sugar, and a matter of organization, that distinguishes the
functional form f(x, y) from an OOP-style form, say x$f(y).  

(That's a slight exaggeration, because the functional language model
thinks that "f" should mean something similar regardless of the class of
x, where in OOP you could define the method in a totally inconsistent
way.)

In that sense, I read your description as essentially OOP.  You talk of
"Orca objects having methods", but in a functional language the question
is how the functions that do the computation depend on the objects that
are their arguments.

Nothing wrong with the OOP view, but it means that your question goes
more to how, and if, the underlying R code uses functions.  If it's just
basically an interface to an OOP definition, then it can stay in that
form.  (And I'd like to discuss in separate mail using the Omegahat OOP
package to formalize the R side.)

Functional methods would become relevant if the R software involved
multiple objects.  Not knowing the innards of how things work, let me
make up an example.

If the current view included, say, an object describing a wireframe that
was displayed around the points, then one might have useful classes of
wireframe objects, then a function that stepped the display to the next
view could have methods that depended on both the current data and the
wireframe:
  step(data, wireframe)
(Definitely not asserting this is a relevant example, but perhaps the
general distinction is clear.)

John


Anthony Rossini wrote:
> 
> Thanks to Duncan's recent work on SJava, I've got a (so far) stable
> platform to put together the R-Orca interface (dynamic graphics,
> including brushing, subseting, etc).  While the first version will be
> looking at installation issues and study basic user interfaces for providing a
> few working examples, it will be important for this particular package to look  at how one integrates a "toolkit" at the user-level with other R libraries.
> 
> The obvious place (to me, at least initially) to look is at how the S4
> classes might be used for this.
> 
> However, I'm having a heck of a time wrapping my head around the
> proper design for this.
> 
> Here is the general issue:
> 
> For "normal data objects" with standard data views (i.e. class of
> grand tours, etc), I can simply setMethod on the standard data views,
> i.e.
> 
> setMethod("grandtour","dataframe", ...)  # standard unstructured grand tour
> setMethod("grandtour","Surv", ... )      # tour, restricting temporal data,
>                                          # handling survival
> 
> etc.  I'm fine on this, and have an acceptable sense of what I'd like
> to do here.  Note that here, I'm talking about visualizations that
> currently exist, not that might be written for such data.  This is in
> fact the first step beyond the package I'm currently finishing up.
> 
> For the third version (beyond the initial package and beyond the initial methods version of the package), I've got a second class of objects,
> i.e. the data views (possibly customized themselves), which I'd like
> to think about.  In particular, I'd like to be able to extend/subclass
> "grandtour", for example, to regular ("nice") longitudinal and
> spatio-temporal data, i.e. classify the methods, not just the data
> being acted on by the methods.
> 
> I think I'm missing something really obvious here, and I suspect it is
> related to using too many object-oriented systems (I'm more used to
> Python's, right now, for example; but even with Java, there is a sense
> of balance between methods and data within a class).  Thinking about
> it more, I guess I'm not clear on the path or approach that S4 classes
> use for inheritance and for contractual negotiation.
> 
> Here's the example that I'm using as a basis for thinking about design:
> 
> I've got a grandtour object which has slots for Data, Colors (a vector
> used for subsetting from brushes -- one can color points in orca or
> from R, this being the first approach for it), as well as Guidance (at
> this point, merely a string, but will be classed for robustness and
> extensibility at somepoint).
> 
> At the first step, this is for a single sample.  Now, I'd like to
> extend this to problems where one variable is fixed (i.e. TIME, in the
> longitudinal or time-series problem, or GROUP, in the correlated data
> setting).  So we've got, in a sense, the multiple inheritance problem.
> I'd like to be able to inherit from both the Orca object as well as
> the data library object.
> 
> In other OO systems, I'd subclass grandtour, probably using multiple
> inheritance, and modify only the methods which change (or to
> paraphrase the Java approach, use interfaces for the orca toolkit, and
> classes for the data libraries).  For example, I might want to try a
> different visualization for survival data, and only want to change the
> display in some way (not the brushing/colors or guidance methods).
> I'd like to be able to "rerun" numerical analyses on potentially
> interesting subsets, or possibly even predict from current fit models,
> and have the required objects be part of the orca object.
> 
> Orca objects could have associated methods: dumpPipeline, buildPipeline, brush/selectData, getData, setData, addPipe, rmPipe.  In particular, the Data methods will need to use S4 data objects.
> 
> Do I simply extend the data classes to add slots for visualization and the requisite parameters and subclass from existing R libraries?  (i.e. add slots for both parameters and dispatched functions).
> 
> Is there a better approach to approaching this problem (which should
> be phrased as: "I've got more than one set of initial classes to build from; what might be the preferred approach to extend"?)
> 
> I think I'm missing something from reading John's Green book.  If
> anyone has pointers to pages/sections I need to read much more
> carefully, I'd be grateful to hear them!
> 
> (note: I know a number of approaches for how I can implement it, but I
> don't have a good enough sense of S4 class design intentions to pick
> any of them as being "reasonably faithful" to good S4 design).
> 
> best,
> -tony
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Mar 20 20:00:52 2002
From: rossini@u.washington.edu (Anthony Rossini)
Date: Wed, 20 Mar 2002 12:00:52 -0800 (PST)
Subject: [Rd] Question re:S4 classes and design; clashing classes?
In-Reply-To: <3c98a90c.484269eb@research.bell_labs.com>
Message-ID: <Pine.LNX.4.43.0203201200520.640@hymn02.u.washington.edu>

On Wed, 20 Mar 2002, John Chambers wrote:

> It wasn't entirely clear what your design goals were, but the general
> question of comparing functional method languages (S, CLOS, Dylan) and
> OOP languages (Java, etc) is of much interest to me, so here are some
> general comments.  Maybe we can then iterate on your example, with or
> without r-devel.

I'll keep it on r-devel until someone (anyone?) screams.  I suspect it might be useful, at least for a bit.
 
> The basic difference in approach is easy to state:
> 
>  Functional languages define methods based on the function and a
> signature (a list matching classes to formal arguments);  OOP languages
> attach all methods to a class definition.

I'll try to clarify the issues by typing through them, and then provide the problem I'd like to address, which was ill-stated in my last email. 

Issues:

1. I've got an object oriented toolkit which constructs visualization pipelines (i.e. sets of views connected in a data processing network).  These are constructed using a OOP paradigm, realized in Java, with the goal being flexible additions of new (higher level) interactive visualizations for exploration (of both data as well as visualization approaches).

2. I really want to connect this with an interactive data analysis language.  S (via R) is a no-brainer, in this respect.  However, it's a functional programming language.

3. I'd like to do so in such as way to play off of the strengths of both approaches (I'll label one, "the computing with data approach", and the second, the "OOP" approach). 

4. Note that there are two intertwined goals, here.  First, I'd like to be able to use the strengths of S, in the sense of being able to provide the right thing for the right set of inputs, (i.e. "plot" does the right thing).   So I'd like to continue to have this interactive strength.  Second, I'd like to be able to develop new visualizations rapidly, by subclassing, to use the strengths of Java and the flexibility of the classes that we designed for Orca.

So this leads me to pose the following hypothesis:  Since I'm thinking (in the OOP approach) of visualizations as subclassing numerical summaries (this could be controversial, but those who know me understand where I'm coming from), I'd also like to be able to "intertwine" the extensibility approaches.  For me, this would mean being able to build visualization summaries on top of the numerical summaries, as well as be able to provide a "feedback loop" in the sense of being able to apply numerical methods both to visualization objects (with resulting changes to visualization) as well as to subsets of the data extracted from various points of the visualization pipeline.  I'm rambling, but in a sense, I'm thinking of a possibly cyclic graph in the sense of the original ViSta workmaps, which would provide some form of audit-trail and reproducibility as needed.

> The distinction becomes relevant if a function does "multiple dispatch";
> that is, defining methods that depend on more than one argument.  (In
> that sense, S3 methods made no use of the functional nature of the
> language.)

Exactly.  Since I'm considering S4 methods, this is critical.  Especially since I'd like to do some form of interplay, if possible.

> In that sense, I read your description as essentially OOP.  You talk of
> "Orca objects having methods", but in a functional language the question
> is how the functions that do the computation depend on the objects that
> are their arguments.

This is what I'm trying to understand -- i.e. how to do both, in a flexible and extensible manner, from the R command line.

> Nothing wrong with the OOP view, but it means that your question goes
> more to how, and if, the underlying R code uses functions.  If it's just
> basically an interface to an OOP definition, then it can stay in that
> form.  (And I'd like to discuss in separate mail using the Omegahat OOP
> package to formalize the R side.)

Please do.  I'm busy, but it would help to ground my thinking about this general problem.

> Functional methods would become relevant if the R software involved
> multiple objects.  Not knowing the innards of how things work, let me
> make up an example.
> 
> If the current view included, say, an object describing a wireframe that
> was displayed around the points, then one might have useful classes of
> wireframe objects, then a function that stepped the display to the next
> view could have methods that depended on both the current data and the
> wireframe:
>   step(data, wireframe)
> (Definitely not asserting this is a relevant example, but perhaps the
> general distinction is clear.)

I'm not sure.  I think that what I'm trying to do is to explore the possibility of systems integration at the user-level.  

So, what I'd like is to be able to do is more like (note that this is a fake example, while the components are there, it isn't quite there yet):

grandTour(x)

setMethod("grandtour","matrix", 
          function(x) { gt <- .JNew(org.orca.viz.grandtour)
                        gt$initData(x)})

Note that the grandtour class is a pipeline of lots of things.  So, I'd like to do something similar with time series, so that:

setMethod("grandtour","ts",
          function(x) {gt <- .JNew(org.orca.viz.grandtour)
                       gt$insertPipe(knownLocation,
                            .JNew(org.omegahat.compiler( new presentation 
                                               code in Java)))
                       gt$initData(x)})

While it looks like I'm answering my own question -- Duncan and John have provided all the technology I need to work it out today, in a sense I'd like to have a tighter means for building the code in the second .JNew statement, i.e. the compiler code.

I could simply provide a functional mapping over, but then I seem to lose (Duncan, correct me if wrong) the advantage of understanding the Java interfaces and classes.  Yes, I can hack it out.  Yes I am hacking it out.  But it doesn't have the right aesthetic feel to it.

Now, to provide more context - we can treat as a constant, the knownLocation (it is either fixed or can be discovered via introspection).  What I'd like to be able to do is more like:

.JNew(subclass(org.orca.viz.grandtour)$setfinalDisplayPipe(TimeSeriesDisplayPipe))

i.e. something like: subclass the grandtour, replacing the finalDisplay pipe to be a TimeSeriesDisplayPipe

Note that Orca examples do look sort of functional-like (since we construct DAGs for the visualization pipeline).  So this would just mean that we need to replace a componentPipe (or insert a new componentPipe between two others).

Now, for a part that is incomplete for me; I still need to think through what I want with:

y <- grandtour(as.matrix(x))

Here, y will be the link to the grandtour, to the original data, and to any subsetted data pieces.

So, while I could let y be a closure/list of components to work with, another possibility, which "might" be useful, is for y to both represent the R "matrix" class (for data operations), as well as the Java "orca" class (for visualization extension operations).

best,
-tony




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Thu Mar 21 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Mar 2002 07:15:03 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200203210615.g2L6F3l06225@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1244 *
Subject: possible bug in det using method="qr"
From: armin@approximity.com
Date: Sat, 5 Jan 2002 01:48:13 +0100 (MET)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1257 *
Subject: documentation of `las' on `par' help page
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Fri, 11 Jan 2002 12:30:20 +0100
* PR# 1323 *
Subject: bug in options() - help page
From: Ole Christensen <o.christensen@lancaster.ac.uk>
Date: Sat, 23 Feb 2002 16:56:56 +0000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1398 *
Subject: barplots & ylim
From: Jan Malte Wiener <jan.wiener@tuebingen.mpg.de>
Date: Wed, 20 Mar 2002 09:06:57 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

* PR# 1331 *
Subject: Bug in glm.fit?
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Wed, 27 Feb 2002 16:15:24 +0800 (WST)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1283 *
Subject: max/min of NULL gives MININT/MAXINT instead of -INF/+INF
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 14:36:52 -0500
--this was on purpose (type preserving); R 1.4.1 at least documents this
--We currently plan to return -/+ Inf from 1.5.0 on		-- MMä
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
* PR# 1330 *
Subject:  itemize/item crashes R CMD check 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Tue, 26 Feb 2002 15:13:04 -0500
* PR# 1397 *
Subject: solve() benchmark in R-1.4.1
From: hyu@stats.uwo.ca
Date: Wed, 20 Mar 2002 04:50:38 +0100 (MET)
* PR# 1399 *
Subject: Have a good Lady Day
From: "t.lockx" <t.lockx@liftoff.nl>
Date: Wed, 20 Mar 2002 06:04:37 -0600
* PR# 1400 *
Subject: RMySQL integer range bug
From: matthias.piksa@web.de
Date: Wed, 20 Mar 2002 13:41:37 +0100 (MET)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Thu Mar 21 07:47:56 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Thu, 21 Mar 2002 08:47:56 +0100 (MET)
Subject: [Rd] Small typo in An Introduction to R (PR#1402)
Message-ID: <200203210747.IAA17526@pubhealth.ku.dk>

At a snail's pace I keep on translating an introduction to R into italian;
I have reached the section describing the glm() function, in which some
example code is presented. The very last line of code, before the
beginning of the section on Poisson models is:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fmp)); c(ldp, ldl)

which of course gives results 43.663 and 43.663; the correct code should
be:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fml)); c(ldp, ldl)

which gives the expected results 43.663 and 43.601

-- 
Michele Alzetta




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Thu Mar 21 07:48:49 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Thu, 21 Mar 2002 08:48:49 +0100 (MET)
Subject: [Rd] Small typo in An Introduction to R (PR#1403)
Message-ID: <200203210748.IAA17548@pubhealth.ku.dk>

At a snail's pace I keep on translating an introduction to R into italian;
I have reached the section describing the glm() function, in which some
example code is presented. The very last line of code, before the
beginning of the section on Poisson models is:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fmp)); c(ldp, ldl)

which of course gives results 43.663 and 43.663; the correct code should
be:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fml)); c(ldp, ldl)

which gives the expected results 43.663 and 43.601

-- 
Michele Alzetta




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Thu Mar 21 12:13:52 2002
From: ligges@amadeus.statistik.uni-dortmund.de (ligges@amadeus.statistik.uni-dortmund.de)
Date: Thu, 21 Mar 2002 13:13:52 +0100 (MET)
Subject: [Rd] legend - bug with argument angle (PR#1404)
Message-ID: <200203211213.NAA21145@pubhealth.ku.dk>

When legend() is used with the angle argument as follows, not only the
boxes beside the legend text, but also the whole legend box is filled
with shading lines.
I think this is not intended:

 plot(1:10)
 legend(8, 4, c("A", "B"), angle=c(10, 80), fill=NULL, density=20)


I'd suggest as a fix (legend.R of R-1.5.0):

25c25
<     rect2 <- function(left, top, dx, dy, ...) {
---
>     rect2 <- function(left, top, dx, dy, angle, ...) {
133c133
<     rect2(left, top, dx = w, dy = h, col = bg)
---
>     rect2(left, top, dx = w, dy = h, col = bg, angle = NULL)
141c141
<     rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill)
---
>     rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill, angle = angle)



Uwe Ligges

       _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1   [and 1.5.0]
year     2002           
month    01             
day      30             
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Mar 21 16:13:42 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Mar 2002 17:13:42 +0100 (MET)
Subject: [Rd] legend - bug with argument angle (PR#1404)
Message-ID: <200203211613.RAA24151@pubhealth.ku.dk>

>>>>> "UweL" == Uwe Ligges <ligges@amadeus.statistik.uni-dortmund.de> writes:

    UweL> When legend() is used with the angle argument as follows, not only the
    UweL> boxes beside the legend text, but also the whole legend box is filled
    UweL> with shading lines.
    UweL> I think this is not intended:

    UweL> plot(1:10)
    UweL> legend(8, 4, c("A", "B"), angle=c(10, 80), fill=NULL, density=20)


    UweL> I'd suggest as a fix (legend.R of R-1.5.0):

    UweL> 25c25
    UweL> <     rect2 <- function(left, top, dx, dy, ...) {
    UweL> ---
    >> rect2 <- function(left, top, dx, dy, angle, ...) {
    UweL> 133c133
    UweL> <     rect2(left, top, dx = w, dy = h, col = bg)
    UweL> ---
    >> rect2(left, top, dx = w, dy = h, col = bg, angle = NULL)
    UweL> 141c141
    UweL> <     rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill)
    UweL> ---
    >> rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill, angle = angle)

Thank you, Uwe!
The fix looks very reasonable and should make it to R-devel
soon.

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 21 16:25:35 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 21 Mar 2002 17:25:35 +0100
Subject: [Rd] Commas in formatC
In-Reply-To: <15503.38106.38626.976198@gargle.gargle.HOWL>
References: <15503.38106.38626.976198@gargle.gargle.HOWL>
Message-ID: <15514.2431.937670.625276@gargle.gargle.HOWL>

>>>>> "DavidB" == David Brahm <brahm@alum.mit.edu> writes:

    DavidB> formatC() is great for formatting numbers!  But it
    DavidB> would be even better if it could optionally insert
    DavidB> commas (or semicolons), e.g.

    R> formatC(1234567.89, digits=2, format="f", commas=T)
    DavidB> [1] "1,234,567.89"

    DavidB> Here's a snippet of code that does that, which could
    DavidB> more or less just be inserted into at the end of
    DavidB> formatC if any R-core guru were so inclined.  "r" is
    DavidB> the result so far, and "commas" is a logical flag:

    DavidB> stp <- regexpr("[0-9]+", r);  len <- attr(stp, "match.length")
    DavidB> if (commas && (maxl <- max(len)) > 3) for (i in seq(3, maxl-1, 3))
    DavidB> r[len>i] <- paste(substring(r[len>i], 1, (stp+len-1-i)[len>i]),
    DavidB> substring(r[len>i], (stp+len-i)[len>i]), sep=",")

Thank you, David, for the suggestion.

I'm looking at adding something quite a bit more general
to both format.default() and formatC(), using a new function
prettyNum() and using new arguments (that are compatible to S-plus'
format.default). 

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rdquest12@microsoft.com  Thu Mar 21 17:25:59 2002
From: rdquest12@microsoft.com (rdquest12@microsoft.com)
Date: Thu, 21 Mar 2002 18:25:59 +0100 (MET)
Subject: [Rd] Internet Security Update (PR#1405)
Message-ID: <200203211725.SAA24506@pubhealth.ku.dk>

This is a multi-part message in MIME format.
You should read this with client which 
supported MIME standard.

--NextPart_000235
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Thu Mar 21 21:00:42 2002
From: ligges@amadeus.statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 21 Mar 2002 22:00:42 +0100
Subject: [Rd] barplots & ylim (PR#1398)
References: <200203200807.JAA08835@pubhealth.ku.dk>
Message-ID: <3C9A49FA.7E1DC0F0@statistik.uni-dortmund.de>

jan.wiener@tuebingen.mpg.de wrote:
> 
> hi,
> when having a barplot one might wants to start the y-axis at some
> certain value (besides 0).
> 
> e.g.
> 
> x <- c(4,5,6,7)
> barplot(x, ylim=c(3,8))
> 
> as you can see, the bars are plotted below the limit specified by ylim.


The bug was already filed as bug report #1088 by Peter Whiting,
including the suggestion for a fix.
So far the fix looks reasonable, if the setting of xpd=TRUE is needed
anywhere [and cannot determined automatically by a smart piece of code].
I cannot imagine such a situation, can anyone tell me the reason why
par(xpd=TRUE) should be set (hard coded or as a default), please? Thank
you.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 22 08:02:06 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 22 Mar 2002 09:02:06 +0100 (MET)
Subject: [Rd] Inconsistencies in sum() (PR#1408)
Message-ID: <200203220802.JAA26660@pubhealth.ku.dk>

R 1.4.1

sum() tries to keep the result integer, although that is not
currently documented (and I am about to change it).

> x <- as.integer(2^30)
> x

1) inconsistent in warning or not:

> sum(x, x)
[1] NA
> sum(c(x, x))
[1] NA
Warning message:
Integer overflow in sum(.); use sum(as.numeric(.))

2) It's order-dependent:

> sum(0.0, x, x)
[1] 2147483648
> typeof(.Last.value)
[1] "double"
> sum(x, x, 0.0)
[1] NA
> typeof(.Last.value)
[1] "double"

I believe that it should calculate in integers only if *all* the
arguments are integers, that is behave like

> sum(c(x, x, 0.0))
[1] 2147483648


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Mar 22 08:13:57 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 22 Mar 2002 08:13:57 +0000
Subject: [Rd] Commas in formatC
References: <15503.38106.38626.976198@gargle.gargle.HOWL> <15514.2431.937670.625276@gargle.gargle.HOWL>
Message-ID: <3C9AE7C5.829F6629@durham.ac.uk>

Martin Maechler wrote:
> 
> >>>>> "DavidB" == David Brahm <brahm@alum.mit.edu> writes:
> 
>     DavidB> formatC() is great for formatting numbers!  But it
>     DavidB> would be even better if it could optionally insert
>     DavidB> commas (or semicolons), e.g.
> 
>     R> formatC(1234567.89, digits=2, format="f", commas=T)
>     DavidB> [1] "1,234,567.89"
> 
>     DavidB> Here's a snippet of code that does that, which could
>     DavidB> more or less just be inserted into at the end of
>     DavidB> formatC if any R-core guru were so inclined.  "r" is
>     DavidB> the result so far, and "commas" is a logical flag:
> 
>     DavidB> stp <- regexpr("[0-9]+", r);  len <- attr(stp, "match.length")
>     DavidB> if (commas && (maxl <- max(len)) > 3) for (i in seq(3, maxl-1, 3))
>     DavidB> r[len>i] <- paste(substring(r[len>i], 1, (stp+len-1-i)[len>i]),
>     DavidB> substring(r[len>i], (stp+len-i)[len>i]), sep=",")
> 
> Thank you, David, for the suggestion.
> 
> I'm looking at adding something quite a bit more general
> to both format.default() and formatC(), using a new function
> prettyNum() and using new arguments (that are compatible to S-plus'
> format.default).

Hi Martin,

Maybe this is a step in the wrong direction, but I actually like using C
string formatting, eg I would like to be able to type something like

  str <- stringC("The man called %s is %i feet tall", "Sven", 6)

which is also used in Python via the string formatting operator, '%'. 
Is this a possibility?

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Mar 22 11:15:20 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 22 Mar 2002 12:15:20 +0100
Subject: [Rd] Commas in formatC
In-Reply-To: <3C9AE7C5.829F6629@durham.ac.uk>
References: <15503.38106.38626.976198@gargle.gargle.HOWL>
 <15514.2431.937670.625276@gargle.gargle.HOWL>
 <3C9AE7C5.829F6629@durham.ac.uk>
Message-ID: <15515.4680.624272.966586@gargle.gargle.HOWL>

>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> Martin Maechler wrote:
    >>  >>>>> "DavidB" == David Brahm <brahm@alum.mit.edu>
    >> writes:
    >> 
    DavidB> formatC() is great for formatting numbers!  But it
    DavidB> would be even better if it could optionally insert
    DavidB> commas (or semicolons), e.g.
    >>
    R> formatC(1234567.89, digits=2, format="f", commas=T)
    DavidB> [1] "1,234,567.89"
    >>
    DavidB> Here's a snippet of code that does that, which could
    DavidB> more or less just be inserted into at the end of
    DavidB> formatC if any R-core guru were so inclined.  "r" is
    DavidB> the result so far, and "commas" is a logical flag:
    >>
    DavidB> stp <- regexpr("[0-9]+", r); len <- attr(stp,
    DavidB> "match.length") if (commas && (maxl <- max(len)) >
    DavidB> 3) for (i in seq(3, maxl-1, 3)) r[len>i] <-
    DavidB> paste(substring(r[len>i], 1, (stp+len-1-i)[len>i]),
    DavidB> substring(r[len>i], (stp+len-i)[len>i]), sep=",")
    >>  Thank you, David, for the suggestion.
    >> 
    >> I'm looking at adding something quite a bit more general
    >> to both format.default() and formatC(), using a new
    >> function prettyNum() and using new arguments (that are
    >> compatible to S-plus' format.default).

(in the mean time available in R-devel's snapshot of last night)


    JonR> Hi Martin,

    JonR> Maybe this is a step in the wrong direction, but I
    JonR> actually like using C string formatting, eg I would
    JonR> like to be able to type something like

    JonR>   str <- stringC("The man called %s is %i feet tall", "Sven", 6)

    JonR> which is also used in Python via the string formatting
    JonR> operator, '%'.  Is this a possibility?

of course. But just a ``nice to have'' possibility.
If we had it, I'd probably rather call it sprintf(.....) though.

This should be a nice exercise to solve with  .External()
{so we could switch it to .Internal(..) easily},
using C's  sprintf() -- the most tricky part might be to pass an
arbitrary number of arguments to sprintf().

Submissions are welcome... ;-)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Fri Mar 22 15:55:11 2002
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: 22 Mar 2002 10:55:11 -0500
Subject: [Rd] name spaces?
Message-ID: <1016812511.22201.19.camel@keittlab-6>

I'm revisiting the R/S DBI package and was wondering if there is any
plan to implement package name spaces in R/S. I've taken to the habit of
prepending a few characters to function names in packages to avoid
collisions, e.g., dbConnect(). An alternative would be DBI::connect()
(s/::/preferred/) which in some ways I find more pleasing. Not having
thought about it in detail, it seems pretty simple, except for backward
compatibility. Packages already load function defs into their own
environment. Keeping the name space seperate means simply not adding
that environment to the search path and using the package name as an
index into a name space lookup table, i.e., connect() looks in global
and DBI::connect() looks in the DBI package environment. One could then
have a use(DBI::connect) function that loads 'connect' into the global
name space, and a global option 'use.name.spaces' or something to change
the default behavior. (An alternate approach would be to use
DBI.connect() and add a switch to 'library' or global option that strips
off the 'DBI' prefix.) Anyway, it would help in nailing down the DBI
interface to know if some name space mechanism is in the works.

Cheers,
Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 22 17:01:20 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Mar 2002 18:01:20 +0100 (MET)
Subject: [Rd] Small typo in An Introduction to R (PR#1402)
Message-ID: <200203221701.SAA02447@pubhealth.ku.dk>

Thank you, Michele.

I've fixed it now.
Martin

>>>>> "Michele" == Michele Alzetta <mikalzet@libero.it> writes:

    Michele> At a snail's pace I keep on translating an
    Michele> introduction to R into italian; I have reached the
    Michele> section describing the glm() function, in which
    Michele> some example code is presented. The very last line
    Michele> of code, before the beginning of the section on
    Michele> Poisson models is:

    Michele> ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fmp)); c(ldp, ldl)

    Michele> ........ the correct code should    Michele> be:

    Michele> ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fml)); c(ldp, ldl)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 22 17:08:14 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Mar 2002 18:08:14 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200203221708.SAA02492@pubhealth.ku.dk>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Sat, 23 Feb 2002 o.christensen@lancaster.ac.uk
    BDR> wrote:
    >> Not all options listed on the help page for options() are
    >> set initially.  This should be said on the help page.

    BDR> Is it said that they are?

no, and of course you are right.
but I still have added a short sentence in the details section.
Closing this bug now.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 22 17:37:45 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Mar 2002 18:37:45 +0100 (MET)
Subject: [Rd] Rdconv -> HTML bug {was ... `las' on `par' help...} (PR#1257)
Message-ID: <200203221737.SAA02593@pubhealth.ku.dk>

>>>>> "Achim" == Achim Zeileis <zeileis@ci.tuwien.ac.at> writes:

    Achim> Just a small documentation bug: something went wrong
    Achim> for the description of the graphical parameter `las'
    Achim> on the HTML version of the `par' help page: `las' is
    Achim> missing and instead a line from the description is
    Achim> used. 

Danke, Achim.

Confirmed and still present in the current R-devel;
and as you say, it's only in the HTML version.

I'm quite sure it is only a bug in the underlying  Rdconv perl
script, probably a consequence of the nesting of \{..\} inside  \describe{..}.
The same things works e.g. in pretty.Rd.

   R CMD Rdconv --type=html par.Rd

still gives html with that line missing (and replaced by a wrong
one).


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 22 19:42:38 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Mar 2002 20:42:38 +0100 (MET)
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
Message-ID: <200203221942.UAA02846@pubhealth.ku.dk>

I found this tracing a bug when experimenting with a new sort()
function using match.arg().

It was triggered because mosaicplot.default(.) has an argument
called `sort' and calls itself the sort() function  in which I
was using match.arg()...

Here is (input for) a small clean example :

####  bad  match.arg() // sys.function() bug :
####  MM, 22.3.2002

callme <- function(a = 1, mm = c("Abc", "Bde")){
    mm <- match.arg(mm)
    cat("mm = "); str(mm)
    invisible()
}


## These are as desired
callme()
callme(mm="B")

mycaller <- function(x = 1, callme = pi) {
    callme(x)
}

mycaller()
##-> mm = NULL

## but should give "Abc !!

-------

Explanation :

 In match.arg(), there's
     formal.args <- formals(sys.function(sys.parent()))
 and you can check that  sys.function(sys.parent())
 gives the number pi instead of the the callme function !! :

debug(match.arg)
mycaller()
.....

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 22 22:39:10 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2002 23:39:10 +0100
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
In-Reply-To: <200203221942.UAA02846@pubhealth.ku.dk>
References: <200203221942.UAA02846@pubhealth.ku.dk>
Message-ID: <x2adt0448h.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> I found this tracing a bug when experimenting with a new sort()
> function using match.arg().
> 
> It was triggered because mosaicplot.default(.) has an argument
> called `sort' and calls itself the sort() function  in which I
> was using match.arg()...
> 
> Here is (input for) a small clean example :
> 
> ####  bad  match.arg() // sys.function() bug :
> ####  MM, 22.3.2002
> 
> callme <- function(a = 1, mm = c("Abc", "Bde")){
>     mm <- match.arg(mm)
>     cat("mm = "); str(mm)
>     invisible()
> }
> 
> 
> ## These are as desired
> callme()
> callme(mm="B")
> 
> mycaller <- function(x = 1, callme = pi) {
>     callme(x)
> }
> 
> mycaller()
> ##-> mm = NULL
> 
> ## but should give "Abc !!
> 
> -------
> 
> Explanation :
> 
>  In match.arg(), there's
>      formal.args <- formals(sys.function(sys.parent()))
>  and you can check that  sys.function(sys.parent())
>  gives the number pi instead of the the callme function !! :
> 
> debug(match.arg)
> mycaller()
> .....

This looks suspiciously like the same issue as PR#921. Did someone
have plans to change the context stack handling so that we could have
a "real" sys.function()? To quote my own followup to PR#921:

"The problem is that we only actually store the call in the context
structure, not the function, so sys.function has to grab the call,
take the 1st element, and reevaluate it in the parent frame."



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Sat Mar 23 18:01:33 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat, 23 Mar 2002 19:01:33 +0100 (MET)
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
Message-ID: <200203231801.TAA04756@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> I found this tracing a bug when experimenting with a new
    >> sort() function using match.arg().
    >> 
    >> It was triggered because mosaicplot.default(.) has an
    >> argument called `sort' and calls itself the sort()
    >> function in which I was using match.arg()...
    >> 
    >> Here is (input for) a small clean example :
    >> 
    >> #### bad match.arg() // sys.function() bug : #### MM,
    >> 22.3.2002
    >> 
    >> callme <- function(a = 1, mm = c("Abc", "Bde")){ mm <-
    >> match.arg(mm) cat("mm = "); str(mm) invisible() }
    >> 
    >> 
    >> ## These are as desired callme() callme(mm="B")
    >> 
    >> mycaller <- function(x = 1, callme = pi) { callme(x) }
    >> 
    >> mycaller() ##-> mm = NULL
    >> 
    >> ## but should give "Abc !!
    >> 
    >> -------
    >> 
    >> Explanation :
    >> 
    >> In match.arg(), there's formal.args <-
    >> formals(sys.function(sys.parent())) and you can check
    >> that sys.function(sys.parent()) gives the number pi
    >> instead of the the callme function !! :
    >> 
    >> debug(match.arg) mycaller() .....

    PD> This looks suspiciously like the same issue as
    PD> PR#921. Did someone have plans to change the context
    PD> stack handling so that we could have a "real"
    PD> sys.function()? To quote my own followup to PR#921:

    PD> "The problem is that we only actually store the call in
    PD> the context structure, not the function, so sys.function
    PD> has to grab the call, take the 1st element, and
    PD> reevaluate it in the parent frame."

hmm, bad news.  
but couldn't it try to do the equivalent of
    get(name, mode = "function")
instead of simply
    get(name)
?

[I think this *must* be fixed, at least we'd have to program
  around it in match.arg()]

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Mar 24 20:35:38 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 24 Mar 2002 15:35:38 -0500
Subject: [Rd] monthplot() in R?
Message-ID: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com>

The monthplot function in S is useful for plotting seasonal data.
It's not in base R or the ts package; is it in one of the contributed
packages?  (I've written a quick version for myself; if there isn't
one generally available already, I'll make it public somehow.)

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Sun Mar 24 22:01:06 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sun, 24 Mar 2002 23:01:06 +0100
Subject: [Rd] Rnews 2002/2
Message-ID: <15518.19619.318520.376886@mithrandir.hornik.net>

Dear package author,

We are now accepting submissions for the 2002/2 issue of the R
Newsletter.  For more information see

      http://cran.r-project.org/doc/Rnews/

If you are the author of a package on CRAN and you would like to promote
it a little bit, or if you simply have an interesting application using
R, we hope you can find some time to write a short article on it.  We
suggest that it be approximately 2 pages or less.  The idea of the
newsletter is that it be interesting to R users without being too
technical.  For example an article describing a package could begin by
briefly outlining the statistical background and go on to demonstrate
the usage on some typical data set.  Of course graphics are more than
welcome!

Bill Venables is also encouraging submissions to the more specialist
Programmer's Niche column.  In this case the technical level could be a
little higher, of course, but not necessarily: ingeniousness is the key.

Instructions for authors can be found in ``Writing Articles for R News''
in the first issue of Rnews.  Remember that submissions have to be in
LaTeX, and that graphics are preferred in PDF or EPS format.  (Bitmaps
like JPG are also OK but please keep in mind that those cannot be scaled
easily and hence might look ugly in the final version.)

The deadline for submissions is

	 May 17, 2002

Keep the contributions rolling in!

For the Editorial Board,
-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Sun Mar 24 20:36:11 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sun, 24 Mar 2002 21:36:11 +0100
Subject: [Rd] R on AIX
Message-ID: <15518.14523.141912.214609@mithrandir.hornik.net>

Two issues re R on AIX that came up in recent email exchange with Dan
Million <lio@hpss1.ccs.ornl.gov>:

* We currently use the Autoconf AC_AIX macro which essentially 'defines'
  _ALL_SOURCE on AIX.  According to Dan, on AIX one ends up with

	#define _ALL_SOURCE 1

  which follows Autoconf's general pattern, but causes a problem as the
  system headers (unconditionally?) have

	#define _ALL_SOURCE

  which gives a redefinition error.  Now the Autoconf source has

	AC_DEFUN([AC_AIX],
	[AH_VERBATIM([_ALL_SOURCE],
	[/* Define to 1 if on AIX 3.
	   System headers sometimes define this.
	   We just want to avoid a redefinition error message.  */

  etc ... noting the 'AIX 3' part, I am wondering if we need the macro
  at all.  Does anyone know?

* Dan also pointed me to 'run-time linking' vs the usual AIX style
  linking.  Using run-time linking one could simply do

       MAIN_LDFLAGS=-brtl
       SHLIB_LDFLAGS="-G"

  instead of the complicated import/export handling with AIX linking,
  and apparently also no longer need an export file?

  Dan says that run-time linking is available in AIX 4.2 or better, does
  anyone know more about this?  Should it perhaps be made the default if
  available?

Note that I have no access to AIX, hence need help ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Mon Mar 25 00:55:53 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Mon, 25 Mar 2002 01:55:53 +0100 (MET)
Subject: [Rd] Typos in R/src/library/base/man/hist.Rd (PR#1412)
Message-ID: <200203250055.BAA07288@pubhealth.ku.dk>

(Line numbers against current r-devel)

line 24: \item AN function to compute the number of cells.
  should be "a"

line 49: is to use the standard FOREGOUND color.}
  should be "foreground".


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Mar 25 08:36:33 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 25 Mar 2002 09:36:33 +0100
Subject: [Rd] monthplot() in R?
In-Reply-To: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com>
References: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com>
Message-ID: <15518.57745.596938.55703@gargle.gargle.HOWL>

>>>>> "Duncan" == Duncan Murdoch <dmurdoch@pair.com> writes:

    Duncan> The monthplot function in S is useful for plotting
    Duncan> seasonal data.  It's not in base R or the ts
    Duncan> package; is it in one of the contributed packages?
    Duncan> (I've written a quick version for myself; if there
    Duncan> isn't one generally available already, I'll make it
    Duncan> public somehow.)

yes; I've found this a missing feature occasionally myself.
If I remember properly, S' version built on the output of sabl()
whereas we'd need one building on stl() out --- if any at all.
As a matter of fact, I'd like a more general setup that does not
only work with periodicity 12.
monthplot() would then only be a compatibility wrapper calling
the more general function.

Note that Brian Ripley has recently added quite a few things to
`ts' in R-devel, including StructTS() for structured time-series
analysis which includes seasonality.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Mon Mar 25 08:40:23 2002
From: jago@mclink.it (Stefano Iacus)
Date: Mon, 25 Mar 2002 09:40:23 +0100
Subject: [Rd] system() function under OSX
Message-ID: <F2A50A71-3FCB-11D6-B953-003065CC4CB8@mclink.it>

Hy,

this is just to say that I have added the system() function to Carbon R. 
Of course, it will work only when R is launched under MacOS X.

Stefano

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 25 10:56:31 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 2002 11:56:31 +0100
Subject: [Rd] R-bugs outage
Message-ID: <x24rj47w68.fsf@blueberry.kubism.ku.dk>


Looks like someone or something turned off the machine that runs the
bugs.r-project.org website on Sunday (a glance at my floor seems to
disprove the hypothesis that the cleaners did it...). Physically
turning it on this morning seems to have normalized things. The email
interface runs on another machine and was unaffected.

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Mon Mar 25 12:38:58 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Mon, 25 Mar 2002 07:38:58 -0500 (EST)
Subject: [Rd] Re: R on AIX
In-Reply-To: <15518.14523.141912.214609@mithrandir.hornik.net>
Message-ID: <Pine.A41.4.44.0203250732250.29538-100000@hpss1.ccs.ornl.gov>

On Sun, 24 Mar 2002, Kurt Hornik wrote:

> Two issues re R on AIX that came up in recent email exchange with Dan
> Million <lio@hpss1.ccs.ornl.gov>:
>
> * We currently use the Autoconf AC_AIX macro which essentially 'defines'
>   _ALL_SOURCE on AIX.
>
>   ... I am wondering if we need the macro
>   at all.  Does anyone know?

I don't think you do (at least in AIX 4.2 and later).  Any code that
includes stdio.h or just about anything else is going to end up defining
_ALL_SOURCE via system headers, unless _XOPEN_SOURCE or _POSIX_SOURCE
are defined.

> * Dan also pointed me to 'run-time linking' vs the usual AIX style
>   linking.  Using run-time linking one could simply do
>
>        MAIN_LDFLAGS=-brtl
>        SHLIB_LDFLAGS="-G"
>
>   instead of the complicated import/export handling with AIX linking,
>   and apparently also no longer need an export file?
>
>   Dan says that run-time linking is available in AIX 4.2 or better, does
>   anyone know more about this?  Should it perhaps be made the default if
>   available?
>
> Note that I have no access to AIX, hence need help ...

If you use gcc, you still need the -Wl prefix to these options; e.g.:

	MAIN_LDFLAGS=-Wl,-brtl
	SHLIB_LDFLAGS=-Wl,-G

I did still use the exports file when I did the build.

As to when runtime linking is needed and when it isn't, I have no
definitive answers.  All I know is that everything worked when I used
runtime linking, and it did not work when I didn't.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Mon Mar 25 12:50:30 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Mon, 25 Mar 2002 06:50:30 -0600
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
In-Reply-To: <x2adt0448h.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Fri, Mar 22, 2002 at 11:39:10PM +0100
References: <200203221942.UAA02846@pubhealth.ku.dk> <x2adt0448h.fsf@blueberry.kubism.ku.dk>
Message-ID: <20020325065030.C7310@nokomis.stat.umn.edu>

On Fri, Mar 22, 2002 at 11:39:10PM +0100, Peter Dalgaard BSA wrote:
> maechler@stat.math.ethz.ch writes:
> 
> This looks suspiciously like the same issue as PR#921. Did someone
> have plans to change the context stack handling so that we could have
> a "real" sys.function()? To quote my own followup to PR#921:
> 
> "The problem is that we only actually store the call in the context
> structure, not the function, so sys.function has to grab the call,
> take the 1st element, and reevaluate it in the parent frame."
> 

I have it on my list but won't get to it for 1.5.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Mon Mar 25 13:57:26 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Mon, 25 Mar 2002 07:57:26 -0600
Subject: [Rd] name spaces?
In-Reply-To: <1016812511.22201.19.camel@keittlab-6>; from Timothy.Keitt@stonybrook.edu on Fri, Mar 22, 2002 at 10:55:11AM -0500
References: <1016812511.22201.19.camel@keittlab-6>
Message-ID: <20020325075726.E7310@nokomis.stat.umn.edu>

This is in the works and will hopefully make it into 1.5 or, more
likely at this point, 1.6.  A preliminary version is available at
http://www.stat.umn.edu/~luke/R/namespaces/morenames.html or off
the developer page http://developer.r-project.org.

We do not yet have a syntactic mechanism like DBI::connect for
referring to an exported variable from a package without explicitly
importing the variable, but we will probably add something along those
lines.

One change that is likely to happen as part of introducing name spaces
is that functions defined in base package will have .BaseNamespaceEnv
as their environment rather than .GlobalEnv.  Evaluating in this
environment means base is searched before the global environment and
attached packages.  As a result, variable assignments in loaded
packages and at top level will no longer shadow variables used within
the definition of base functions.  This will eliminate certain errors
of accidentally redefining things like pi that come up occasionally,
but will also make deliberate redefinition of functions in base harder
(not impossible, just harder).

In principle implementing name spaces is just a matter of using
environments as you describe, but there are a few complications.  One
is that with importing from one name space into another a variable can
in some sense exist in two environments at the same time, and what
this means needs to be resolved.  I've chosen the easy way out of
making variables in name spaces read-only (which is useful for other
reasons as well).  Another issue is that in R a closure can capture a
reference to a name space which can then be stored in a .Rdata file.
Making sure that sensible things happen when storing (_not_ writing
out the contents of the entire name space) and loading (attempting to
locate and load the right name space) makes things a bit tricky and
forces some compromises, but I think this is all mostly resolved.

luke

On Fri, Mar 22, 2002 at 10:55:11AM -0500, Timothy H. Keitt wrote:
> I'm revisiting the R/S DBI package and was wondering if there is any
> plan to implement package name spaces in R/S. I've taken to the habit of
> prepending a few characters to function names in packages to avoid
> collisions, e.g., dbConnect(). An alternative would be DBI::connect()
> (s/::/preferred/) which in some ways I find more pleasing. Not having
> thought about it in detail, it seems pretty simple, except for backward
> compatibility. Packages already load function defs into their own
> environment. Keeping the name space seperate means simply not adding
> that environment to the search path and using the package name as an
> index into a name space lookup table, i.e., connect() looks in global
> and DBI::connect() looks in the DBI package environment. One could then
> have a use(DBI::connect) function that loads 'connect' into the global
> name space, and a global option 'use.name.spaces' or something to change
> the default behavior. (An alternate approach would be to use
> DBI.connect() and add a switch to 'library' or global option that strips
> off the 'DBI' prefix.) Anyway, it would help in nailing down the DBI
> interface to know if some name space mechanism is in the works.
> 
> Cheers,
> Tim
> 
> -- 
> Timothy H. Keitt
> Department of Ecology and Evolution
> State University of New York at Stony Brook
> Stony Brook, New York 11794 USA
> Phone: 631-632-1101, FAX: 631-632-7626
> http://life.bio.sunysb.edu/ee/keitt/
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Mon Mar 25 14:33:14 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Mon, 25 Mar 2002 09:33:14 -0500
Subject: [Rd] monthplot() in R?
In-Reply-To: <15518.57745.596938.55703@gargle.gargle.HOWL>
References: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com> <15518.57745.596938.55703@gargle.gargle.HOWL>
Message-ID: <81du9ugn9kq7plt4g8l65s9ai83hgcio0c@4ax.com>

On Mon, 25 Mar 2002 09:36:33 +0100, you wrote in message
<15518.57745.596938.55703@gargle.gargle.HOWL>:

>>>>>> "Duncan" == Duncan Murdoch <dmurdoch@pair.com> writes:
>
>    Duncan> The monthplot function in S is useful for plotting
>    Duncan> seasonal data. 

>yes; I've found this a missing feature occasionally myself.
>If I remember properly, S' version built on the output of sabl()
>whereas we'd need one building on stl() out --- if any at all.
>As a matter of fact, I'd like a more general setup that does not
>only work with periodicity 12.
>monthplot() would then only be a compatibility wrapper calling
>the more general function.

Okay, I'll put something together.  I was also thinking of a more
general base function which would be called by monthplot.ts or
monthplot.stl.  The base function would show subsets of the time
series broken up according to arbitrary categories; for monthplot, the
categories would be the months.

Duncan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Mon Mar 25 14:53:37 2002
From: ligges@amadeus.statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 25 Mar 2002 15:53:37 +0100
Subject: [Rd] Re: [R] persp(): add second plane
References: <Pine.LNX.4.30.0203151003270.20916-100000@bolker.zoo.ufl.edu> <3C921E6F.BB81543B@statistik.uni-dortmund.de>
Message-ID: <3C9F39F1.4C9B9C6C@statistik.uni-dortmund.de>

Uwe Ligges wrote:
> 
> Ben Bolker wrote:
> >
> >   [forwarded to R-devel]
> >
> >   I'm most interested in integrating persp() and scatterplot3d() so that
> > we can (e.g.) easily draw graphs like response surfaces with associated
> > points (yes, there are serious questions about whether 3d perspective
> > plots are good general tools for data presentation, but there are some
> > places where it's really useful).  I can think of a bunch of quick hacks,
> > but I don't really know how an integrated system should be designed for
> > consistency and ease of use.
> 
> I think it's not possible to write an integrated system that uses the
> functions scatterplot3d() and persp() as they are. The straightforward
> way, from my point of view, is to write a new function (suggestions for
> a name?) along scatterplot3d()'s code, that uses persp() instead of
> scatterplot3d()'s own plot function in principle.
> 
> I'll volunteer to write such a function during the next months, but
> there are still some other points on my todo list (and I myself don't
> need such a function at present).

After some investigations:
I think for a really clean solution for plotting surfaces *and*
points/lines or other elements into a *perspective* 3D plot a redesign
of persp() is needed, or much better a whole 3D graphics system in R
(very similar to the existing 2D graphics system), but I don't have the
time to work on the latter.

Instead of the above mentioned solutions, I did a quick hack and added a
function s3d.persp() to the package scatterplot3d_0.3-10. This version
is *only* available at
http://www.statistik.uni-dortmund.de/leute/ligges.htm .
The function can plot points and other elements into surface plots.
Most of the code is stolen from persp() and scatterplot3d().
Bug (not so easy to fix, needs the redesign mentioned above): All
elements except the surface are plotted in front of the surface, even if
they shouldn't appear (i.e. located behind or below the surface).
I don't want to upload to CRAN until the function is not tested
extensively and as long it is heavily under development. Bug reports and
suggestions are welcome.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Mon Mar 25 15:37:05 2002
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Mon, 25 Mar 2002 16:37:05 +0100
Subject: [Rd] some problems with r 1.5.0 on win2k
References: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com> <15518.57745.596938.55703@gargle.gargle.HOWL> <81du9ugn9kq7plt4g8l65s9ai83hgcio0c@4ax.com>
Message-ID: <3C9F4421.AB4D3D2C@univie.ac.at>

i managed to build r-devel 1.5.0 on win2k 

during the build, i experienced the following problems:


1. Failure in make when starting from scratch
make in src/gnuwin fails at the first run because it tries to use
Rpwd.exe. It does, however, create Rpwd.exe before it fails.
Copying Rpwd.exe to a directory on the path the allows 
a complete pass through make.


2. Warning when building docs
make docs

(Function and Variable Index) [53] (R-lang.vrs [54]) Appendix A [55]
[56] )
(see the transcript file for additional information)
! pdfTeX warning (dest): name{Writing R documentation} has been
referenced but
does not exist, replaced by a fixed one

! pdfTeX warning (dest): name{Preface} has been referenced but does not
exist,
replaced by a fixed one

this might indicate some broken links in the pdf file.


3. Warning when building docs
D:\Work\R-devel\doc\manual>make -f Makefile.win info
makeinfo  -D UseExternalXrefs R-FAQ.texi
makeinfo  -D UseExternalXrefs R-admin.texi
makeinfo  -D UseExternalXrefs R-data.texi
makeinfo  -D UseExternalXrefs R-exts.texi
makeinfo  -D UseExternalXrefs R-intro.texi
R-intro.texi:781: warning: Info cannot handle `:' in index entry `:'.
makeinfo  -D UseExternalXrefs R-lang.texi

4. after installation:
Help -> R language (html)
starts mozilla 0.9.9 (which is the default browser on this machine),
but when i go to the search page and enter a search term,
the browser does NOT jump to any other page, it stays on the search
page.

p.s.:
gnuwin32/INSTALL
tells one to send messages to
R-windows@r-project.org
but mail sent there bounces




--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 25 16:50:25 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 25 Mar 2002 16:50:25 +0000 (GMT)
Subject: [Rd] some problems with r 1.5.0 on win2k
In-Reply-To: <3C9F4421.AB4D3D2C@univie.ac.at>
Message-ID: <Pine.LNX.4.31.0203251646410.6383-100000@gannet.stats>

On Mon, 25 Mar 2002, Erich Neuwirth wrote:

> i managed to build r-devel 1.5.0 on win2k
>
> during the build, i experienced the following problems:
>
>
> 1. Failure in make when starting from scratch
> make in src/gnuwin fails at the first run because it tries to use
> Rpwd.exe. It does, however, create Rpwd.exe before it fails.
> Copying Rpwd.exe to a directory on the path the allows
> a complete pass through make.

On all my machines its makes Rpwd.exe, and then spawns a separate make
which proceeds.  It should not fail.

> 3. Warning when building docs
> D:\Work\R-devel\doc\manual>make -f Makefile.win info
> makeinfo  -D UseExternalXrefs R-FAQ.texi
> makeinfo  -D UseExternalXrefs R-admin.texi
> makeinfo  -D UseExternalXrefs R-data.texi
> makeinfo  -D UseExternalXrefs R-exts.texi
> makeinfo  -D UseExternalXrefs R-intro.texi
> R-intro.texi:781: warning: Info cannot handle `:' in index entry `:'.
> makeinfo  -D UseExternalXrefs R-lang.texi

That's an incorrect warning from makeinfo 4.1.

> 4. after installation:
> Help -> R language (html)
> starts mozilla 0.9.9 (which is the default browser on this machine),
> but when i go to the search page and enter a search term,
> the browser does NOT jump to any other page, it stays on the search
> page.

That has worked for me, but I took that browser off as it was too flaky.

> p.s.:
> gnuwin32/INSTALL
> tells one to send messages to
> R-windows@r-project.org
> but mail sent there bounces

Well, it may work by release time.  The request to set up the address has
been made.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kss28@mail.cba.nau.edu  Mon Mar 25 20:18:59 2002
From: kss28@mail.cba.nau.edu (kss28@mail.cba.nau.edu)
Date: Mon, 25 Mar 2002 21:18:59 +0100 (MET)
Subject: [Rd] int 32 bit error on SPARC 64bit (PR#1415)
Message-ID: <200203252018.VAA13406@pubhealth.ku.dk>

Full_Name: Krassimir Sedmakov
Version: R-1.4.1
OS: Solaris 8
Submission from: (NULL) (134.114.165.52)


********
Problem:
********

When running make for R-1.4.1 on Solaris 8, SPARC 64 bit the following error
message is generated:

arithmetic.c:672: #error code requires that int have 32 bits
gmake[3]: *** [arithmetic.o] Error 1
gmake[3]: Leaving directory `/opt/R/R-1.4.1/src/main'
gmake[2]: *** [R] Error 2
gmake[2]: Leaving directory `/opt/R/R-1.4.1/src/main'
gmake[1]: *** [R] Error 1
gmake[1]: Leaving directory `/opt/R/R-1.4.1/src'
gmake: *** [R] Error 

*************
Related Code:
*************

***Related code in arithemtic.c file:

667  #ifndef INT_32_BITS
   668  /* configure checks whehter int is 32 bits.  If not this code will
   669     need to be rewritten.  Since 32 bit ints are pretty much universal,
   670     we can worry about writing alternate code when the need arises.
   671     To be safe, we signal a compiler error if int is not 32 bits. */
   672  # error code requires that int have 32 bits
   673  #else
   674  /* Just to be on the safe side, configure ought to check that the
   675     mashine uses two's complement. A define like
   676  #define USES_TWOS_COMPLEMENT (~0 == (unsigned) -1)
   677     might work, but at least one compiler (CodeWarrior 6) chokes on it.
   678     So for now just assume it is true.
   679  */

***Related code in configure file:

10871  if test "${ac_cv_sizeof_int}" = 4; then
10872    cat >> confdefs.h <<\EOF
10873  #define INT_32_BITS 1
10874  EOF
10875
10876  fi
10877  if test "${cross_compiling}" = yes; then
10878    warn_xcompile_sizeof_long="assuming C longs are 4 byte on ${host}"
10879    echo "configure: warning: ${warn_xcompile_sizeof_long}" 1>&2
10880  fi

*********
Solution:
*********
Run ./configure
Ignore warnings
in R-1.4.1/ directory create a file confdefs.h and enter (*see related configure
file)
#define INT_32_BITS 1
Run make
run make install



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 25 20:48:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 25 Mar 2002 21:48:35 +0100 (MET)
Subject: [Rd] int 32 bit error on SPARC 64bit (PR#1415)
Message-ID: <200203252048.VAA13486@pubhealth.ku.dk>

You haven't told us anything about your compilers.  You can set options to
make ints 64bits, and you must not for use with R.

This works correctly for me, using SunPro 6 compilers.

The configure script reports the size of ints, and if this is not 4 bytes,
change the options.  If it is 4 bytes, the correct option will be set.


On Mon, 25 Mar 2002 kss28@mail.cba.nau.edu wrote:

> Full_Name: Krassimir Sedmakov
> Version: R-1.4.1
> OS: Solaris 8
> Submission from: (NULL) (134.114.165.52)
>
>
> ********
> Problem:
> ********
>
> When running make for R-1.4.1 on Solaris 8, SPARC 64 bit the following error
> message is generated:
>
> arithmetic.c:672: #error code requires that int have 32 bits
> gmake[3]: *** [arithmetic.o] Error 1
> gmake[3]: Leaving directory `/opt/R/R-1.4.1/src/main'
> gmake[2]: *** [R] Error 2
> gmake[2]: Leaving directory `/opt/R/R-1.4.1/src/main'
> gmake[1]: *** [R] Error 1
> gmake[1]: Leaving directory `/opt/R/R-1.4.1/src'
> gmake: *** [R] Error
>
> *************
> Related Code:
> *************
>
> ***Related code in arithemtic.c file:
>
> 667  #ifndef INT_32_BITS
>    668  /* configure checks whehter int is 32 bits.  If not this code will
>    669     need to be rewritten.  Since 32 bit ints are pretty much universal,
>    670     we can worry about writing alternate code when the need arises.
>    671     To be safe, we signal a compiler error if int is not 32 bits. */
>    672  # error code requires that int have 32 bits
>    673  #else
>    674  /* Just to be on the safe side, configure ought to check that the
>    675     mashine uses two's complement. A define like
>    676  #define USES_TWOS_COMPLEMENT (~0 == (unsigned) -1)
>    677     might work, but at least one compiler (CodeWarrior 6) chokes on it.
>    678     So for now just assume it is true.
>    679  */
>
> ***Related code in configure file:
>
> 10871  if test "${ac_cv_sizeof_int}" = 4; then
> 10872    cat >> confdefs.h <<\EOF
> 10873  #define INT_32_BITS 1
> 10874  EOF
> 10875
> 10876  fi
> 10877  if test "${cross_compiling}" = yes; then
> 10878    warn_xcompile_sizeof_long="assuming C longs are 4 byte on ${host}"
> 10879    echo "configure: warning: ${warn_xcompile_sizeof_long}" 1>&2
> 10880  fi
>
> *********
> Solution:
> *********
> Run ./configure
> Ignore warnings
> in R-1.4.1/ directory create a file confdefs.h and enter (*see related configure
> file)
> #define INT_32_BITS 1
> Run make
> run make install
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Tue Mar 26 16:03:44 2002
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Tue, 26 Mar 2002 17:03:44 +0100
Subject: [Rd] some problems with r 1.5.0 on win2k
References: <20020325183731.43602.qmail@web14204.mail.yahoo.com>
Message-ID: <3CA09BE0.3000205@univie.ac.at>

That was the solution.
Perhaps it is worth mentioning in the INSTALL file.


Garfield Brown wrote:

>>1. Failure in make when starting from scratch
>>make in src/gnuwin fails at the first run because it tries to use
>>Rpwd.exe. It does, however, create Rpwd.exe before it fails.
>>Copying Rpwd.exe to a directory on the path the allows 
>>a complete pass through make.
>>
> 
> I think by default most shells will not search the current directory for
> binaries.
> 
> On win2k using bash with the following line in by .bashrc I have no
> problems
> export PATH=.:$PATH
> 
> likewise with cmd.exe
> set PATH=.;%PATH% does the trick
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Everything you'll ever need on one web page
> from News and Sport to Email and Music Charts
> http://uk.my.yahoo.com
> 
> 
> 


-- 
--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From macq@llnl.gov  Tue Mar 26 18:01:07 2002
From: macq@llnl.gov (macq@llnl.gov)
Date: Tue, 26 Mar 2002 19:01:07 +0100 (MET)
Subject: [Rd] seq.default test for relative range (PR#1416)
Message-ID: <200203261801.TAA19418@pubhealth.ku.dk>

seq.default() tests for the relative range of the from and to 
arguments (see excerpt below) and returns from (only) when the 
relative range is small. The problem is that "small" is too large. 
Also undocumented.

At 17:25 +0000 3/26/02, ripley@stats.ox.ac.uk wrote:
>On Tue, 26 Mar 2002, Don MacQueen wrote:
>
>>  I was surprised when seq.POSIXt() returned a single value rather than
>>  a vector, from inputs that I thought were reasonable. Here's an
>>  example to illustrate:
>>
>>  >  t0 <- ISOdatetime(2002,6,24,0,0,10)
>>
>>  ## expected a sequence of 16 times 1 second apart
>>  >  seq.POSIXt(from=t0,to=t0+15,by='1 sec')
>>  [1] "2002-06-24 00:00:10 PDT"
>>
>>  ## traces to this call
>>  >  seq.default(1024902010,1024902025,by=1)
>>  [1] 1024902010
>>  >
>>
>>  ## which is due to the following expressions in seq.default()
>>        del <- to - from
>>        ## a few lines omitted
>>        dd <- abs(del)/max(abs(to), abs(from))
>>        if (dd < sqrt(.Machine$double.eps)) return(from)
>>
>>  This looks like a trap to catch bad input, and return something
>>  reasonable (or at least not crash).
>>
>>  It's a given that seq.default() pre-dates seq.POSIXt() by many years,
>>  and the test for relative range undoubtedly has good reasons, so it's
>>  probably not a good idea to change seq.default().
>
>Oh, I think it needs to be changed.  That is far too generous a test for
>numerical inaccuracies, by say 5 orders of magnitude.  It is also
>undocumented, so I'd post a bug report on seq.default.
>

Remainder of my original post to R-help and Prof. Ripley's response 
not included in bug report. Subject line was "seq.POSIXt() with short 
time intervals" on 2002-03-26 if anyone wants to see the whole of it.

-Don
-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA
--------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jun_sung@hotmail.com  Wed Mar 27 01:00:25 2002
From: jun_sung@hotmail.com (Jun Sung)
Date: Wed, 27 Mar 2002 01:00:25 +0000
Subject: [Rd] 3D visualization using vtk library
Message-ID: <F846yL2m9lHiu3fQtYd00000e6f@hotmail.com>

has there been any attempt to improve the 3D visualization (interactive)
features in R, using the vtk library?
It seems fairly straight forward.
maybe even trivial for somebody who has experience with vtk library.

let me know if there are any obvious reasons i may have overlooked

thanks, in advance for any feedback


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 27 11:19:36 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Mar 2002 12:19:36 +0100
Subject: [Rd] 3D visualization using vtk library
In-Reply-To: <F846yL2m9lHiu3fQtYd00000e6f@hotmail.com>
References: <F846yL2m9lHiu3fQtYd00000e6f@hotmail.com>
Message-ID: <x2bsdaw94n.fsf@blueberry.kubism.ku.dk>

"Jun Sung" <jun_sung@hotmail.com> writes:

> has there been any attempt to improve the 3D visualization (interactive)
> features in R, using the vtk library?
> It seems fairly straight forward.
> maybe even trivial for somebody who has experience with vtk library.
> 
> let me know if there are any obvious reasons i may have overlooked

The same kind of thoughts have crossed my mind, but I don't think
anyone has actually tried it. It is certainly attractive, not just
because the pictures are pretty, but because it offers an interface at
a higher level than e.g. OpenGl (vtk is, for instance, object-based
rather than pixel-based).

It would be very useful if someone cared to sit down and create a few
simple examples.

Some things are clearly trivial since you can access a Tcl interpreter
directly from R via the tcltk package so whatever you can do in Tcl
you can do in R too. You can do it via .Tcl if you must, but you can
also create R commands that parallel the Tcl ones in the same way as
tkbutton() and friends. 

In fact, that interface is a pretty straight subroutine mapping and
actually not very Tcl-ish, so it would probably be rather easy to make
a mapping directly into R as it has already been done for Python and
Java. Easy in principle, that is. You would need an automated
interface generating tool because of the sheer size of the library.

What I don't quite see is how the data interfaces are pieced together.
If you have a data array in R, how do you get it across to the
renderer? This might be easy, but you need to dig deeper to find out.
The non-trivial objects in the example codes seem to be reading from
files, but surely they can also get the information from objects in
their hosting language. 

Much harder is the generic discussion about how you would want to
structure a set of 3D methods for statistical data, so that it becomes
simple and yet flexible in the same way as our current 2D methods (and
even those are under some attack because of the "indelible ink" aspect
and general lack of interactivity).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Wed Mar 27 12:16:33 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Wed, 27 Mar 2002 07:16:33 -0500
Subject: [Rd] Re: monthplot() in R?
Message-ID: <3pd3au8ni58jmbft5qa5jegfvbmjgrctta@4ax.com>

I wrote up monthplot, and Brian Ripley put it in r-devel (to be 1.5.0
at the end of next month).

The default method takes 3 inputs:  x, time, and phase.  x is the time
series, time is the time corresponding to each observation (not
necessarily evenly spaced), and phase is a variable that categorizes
the observations, e.g. the month.  It produces a separate small time
series plot for each value of phase.  The ts, stl, and StructTS
methods automatically fill in the time and phase values from the time
series attributes.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 27 15:45:05 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Mar 2002 16:45:05 +0100
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
In-Reply-To: <20020325065030.C7310@nokomis.stat.umn.edu>
References: <200203221942.UAA02846@pubhealth.ku.dk>
 <x2adt0448h.fsf@blueberry.kubism.ku.dk>
 <20020325065030.C7310@nokomis.stat.umn.edu>
Message-ID: <x23cymvwu6.fsf@blueberry.kubism.ku.dk>

Luke Tierney <luke@stat.umn.edu> writes:

> On Fri, Mar 22, 2002 at 11:39:10PM +0100, Peter Dalgaard BSA wrote:
> > maechler@stat.math.ethz.ch writes:
> > 
> > This looks suspiciously like the same issue as PR#921. Did someone
> > have plans to change the context stack handling so that we could have
> > a "real" sys.function()? To quote my own followup to PR#921:
> > 
> > "The problem is that we only actually store the call in the context
> > structure, not the function, so sys.function has to grab the call,
> > take the 1st element, and reevaluate it in the parent frame."
> > 
> 
> I have it on my list but won't get to it for 1.5.

OK. 

Obvious stopgap measure inserted for now (use findVar1, testing for
FUNSXP). Still won't handle the (f(foo))(bar) cases properly, of course. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Mar 27 16:58:59 2002
From: rossini@u.washington.edu (Anthony Rossini)
Date: Wed, 27 Mar 2002 08:58:59 -0800 (PST)
Subject: [Rd] 3D visualization using vtk library
In-Reply-To: <f846yl2m9lhiu3fqtyd00000e6f@hotmail.com>
Message-ID: <Pine.LNX.4.43.0203270858590.24841@hymn03.u.washington.edu>

It should be fairly straightforward.  I'm doing (wrapping a viz library) it for Orca.

best,
-tony


On Wed, 27 Mar 2002, Jun Sung wrote:

> has there been any attempt to improve the 3D visualization (interactive)
> features in R, using the vtk library?
> It seems fairly straight forward.
> maybe even trivial for somebody who has experience with vtk library.
> 
> let me know if there are any obvious reasons i may have overlooked
> 
> thanks, in advance for any feedback
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Wed Mar 27 23:27:12 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Thu, 28 Mar 2002 00:27:12 +0100 (MET)
Subject: [Rd] possible typo in integrate.Rd? (PR#1417)
Message-ID: <200203272327.AAA25697@pubhealth.ku.dk>

Lines 15,16 of R/src/library/base/man/integrate.Rd say:

  \item{f}{An \R function taking a numeric first argument and returning
    a numeric vector the same length. Returning a non-finite [] will

Where I put [], should a word such as "vector", "value", or "element"
be added?

Stephen




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From leisch@ci.tuwien.ac.at  Thu Mar 28 09:18:48 2002
From: leisch@ci.tuwien.ac.at (leisch@ci.tuwien.ac.at)
Date: Thu, 28 Mar 2002 10:18:48 +0100 (MET)
Subject: [Rd] persp + postscript/pdf (PR#1419)
Message-ID: <200203280918.KAA26477@pubhealth.ku.dk>

persp(outer(1:5, 1:5), shade=0.1)

looks nice on the screen, but

postscript()
persp(outer(1:5, 1:5), shade=0.1)
dev.off()


gives an all black surface.
same when using the pdf() device. has already been like that in 1.4.0.

.f




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 03
 day = 28
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Thu Mar 28 10:39:58 2002
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Thu, 28 Mar 2002 11:39:58 +0100
Subject: [Rd] help browsers in win2k
Message-ID: <3CA2F2FE.5F6E65FC@univie.ac.at>

With all the browser hassles in win2k now
it would be useful if
options(browser=___)
also works in windows if it is set.
if it is not set, the default brwoser should be used.

according to the documentation 
options(browser=____)
only has an effect in unix.

does it seem reasonable to put this on the wish list?


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar 28 11:10:53 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Mar 2002 11:10:53 +0000 (GMT)
Subject: [Rd] help browsers in win2k
In-Reply-To: <3CA2F2FE.5F6E65FC@univie.ac.at>
Message-ID: <Pine.LNX.4.31.0203281110001.16731-100000@gannet.stats>

On Thu, 28 Mar 2002, Erich Neuwirth wrote:

> With all the browser hassles in win2k now
> it would be useful if
> options(browser=___)
> also works in windows if it is set.
> if it is not set, the default brwoser should be used.
>
> according to the documentation
> options(browser=____)
> only has an effect in unix.
>
> does it seem reasonable to put this on the wish list?

Patches accepted.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Mar 28 14:50:09 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Thu, 28 Mar 2002 09:50:09 -0500
Subject: [Rd] R 1.5.0 pre-release snapshots available on Windows
Message-ID: <8ua6aug1nmvbjon0894ere0o24ugi679em@4ax.com>

I'm planning to put snapshots of Windows builds of the r-devel
pre-release version online at

<http://www.stats.uwo.ca/faculty/murdoch/software/r-devel>

a few times before feature freeze, and then more frequently as we
approach the release date.  Look at the dates on the files to see
whether I've posted a new build.

Please send comments about errors in the builds directly to me rather
than to the list, as there are likely to be numerous problems with
them until I get my setup perfected.  For example, I'm pretty sure
that today's build picked up obsolete versions of the recommended
libraries. 

These shouldn't be considered to be stable; don't trust anything
really important to them.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hammour@msn.com  Thu Mar 28 15:20:33 2002
From: hammour@msn.com (hammour@msn.com)
Date: Thu, 28 Mar 2002 16:20:33 +0100 (MET)
Subject: [Rd] Resize in graphics window cause R to crash (PR#1420)
Message-ID: <200203281520.QAA27153@pubhealth.ku.dk>

Full_Name: Ahmad Abu Hammour
Version: 1.4.1
OS: windows 98
Submission from: (NULL) (206.216.76.228)


Hi,
I made a plot then I wanted to resize it using drop-menue resize. I first
selected fixed then I resized it to smaller. Scroll bars appear. Next, I
selected fit to window. The scoll bars remains. When I scroll horizontally (back
and forth) or vertically (up and dowm), the window started to flash and then the
following message appeared:
"This program has performed an illegal operation and will be shut down.
RGUI caused an invalid page fault in
module R.DLL at 0167:0048f684.
Registers:
EAX=00000000 CS=0167 EIP=0048f684 EFLGS=00010246
EBX=00000000 SS=016f ESP=008f9ad8 EBP=008f9b20
ECX=00000001 DS=016f ESI=01789140 FS=218f
EDX=008f9b08 ES=016f EDI=008f9b00 GS=0000
Bytes at CS:EIP:
80 38 00 74 0f 8d 76 00 80 38 0a 75 01 43 40 80 
Stack dump:
01788d0d 013e5728 013e572e 0000000d 01789140 40280000 008f9b10 008f9b08 00000000
3fe00000 013e572e 00435aa0 00000000 00000000 008f9c30 0048fe47"

This error is caused everytime I do the same thing.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu Mar 28 19:43:08 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 28 Mar 2002 14:43:08 -0500
Subject: [Rd] Some new things in r-devel
Message-ID: <3CA3724C.3A9EA9C9@research.bell-labs.com>

Some code committed today includes:

1.  the recover() interactive browser moved into base from the methods
package (see ?recover)

2.  an extended version of trace() that allows interactive browsing in
the style of S and S-Plus.  This is in the methods package because it
uses classes, but it can be applied to any function.  See ?trace after
library(methods).

3.  Formal classes can have intializer methods to modify how the new()
function works.  See ?initialize.

4.  The behavior of setGeneric should be more sensible, with respect to
nonstandard generics and default methods.

5.  Classes that have a "data part" (that extend, e.g., numeric or
function) should behave better.

6.  A NextMethod mechanism for the methods package (introduced
previously and fixed up some this time).  See ?callNextMethod.

Testing appreciated.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Mar 28 22:52:05 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Thu, 28 Mar 2002 17:52:05 -0500
Subject: [Rd] pos argument to library
Message-ID: <15523.40597.925815.816765@gargle.gargle.HOWL>

While R-1.5.0 is still unfrozen, I'd like to lobby again for a "pos" argument
in library().  It seems straightforward to implement -- just change this line:
  env <- attach(NULL, name=pkgname)
to:
  env <- attach(NULL, pos, name=pkgname)

The reason I want this, by the way, is to mimic the S-Plus synchronize()
command.  Essentially, my version of synchronize() simply detaches a package
and then re-attaches it in the same position (thus requiring the "pos"
argument).  A fancier version would handle dynamic shared libraries correctly.
Here it is (it's called g.sync), if anyone is interested.

--- begin code ---
g.sync <- function(pos=2) {
  if (is.character(pos)) pos <- match(pos, sub("package:","",search()))
  pkg <- sub("package:", "", search()[pos])
  path <- searchpaths()[pos]
  is.lib <- match(dirname(path), .lib.loc, 0) > 0
  g.library <- g.library;  g.data.attach <- g.data.attach
  detach(pos=pos)
  if (is.lib) g.library(pkg, char=T, pos=pos) else g.data.attach(path, pos)
}
--- end code ---

Note that g.library is my copy of library() with the "pos" argument added, and
that I've assumed the "g.data" package is in use.  g.sync makes local copies of
g.library and g.data.attach in case the package being sync'ed contains one of
those functions!

-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Fri Mar 29 03:04:03 2002
From: presnell@stat.ufl.edu (presnell@stat.ufl.edu)
Date: Fri, 29 Mar 2002 04:04:03 +0100 (MET)
Subject: [Rd] glm start/offset bugs (PR#1422)
Message-ID: <200203290304.EAA28509@pubhealth.ku.dk>


--fupGvOGOQM
Content-Type: text/plain; charset=us-ascii
Content-Description: message body and .signature
Content-Transfer-Encoding: 7bit


There's a simple bug in the handling of the start and offset arguments
in glm and glm.fit.  The bug exists in the latest development version
of R (version information below), but it appears that glm.R has not
been touched much lately, so the bug affects at least the most recent
stable release of R.

Here is a simple example:

> data(ships, package=MASS)
> ships.glm <- glm(incidents ~ type + year + period + offset(log(service)),
+ 		  family=poisson, data=ships, subset=service != 0)
> glm(incidents ~ type + year + period + offset(log(service)),
+     family=poisson, data=ships, subset=service != 0, start=coef(ships.glm))

or more simply

> update(ships.glm, start=coef(ships.glm))

The problem is caused by a bad initialization of etastart in glm.fit()
when an offset is present.  Fixing this and retrying the example above
then reveals another bug, this time in glm(), that is tickled only
when non-NULL values are given to both the offset and start arguments.

I've attached to the bottom of this message a simple patch to
src/library/base/R/glm.R that I believe correctly repairs these bugs.

Essentially the same change is needed in Berwin Turlach's Wed, 27 Feb
2002 version of glm.fit() reported on the R bug tracking site as
"Models/1331".  (The change to glm() is still required as well of
course.)  As an aside, I'm wondering if there has been any thought
given to adopting Berwin's patches.  Though I must admit that I
haven't taken the time to check carefully through his changes, I know
Berwin to be a very careful and skillful programmer, and I suspect
that he is the only person to have looked very closely at those
particular details of glm.fit in recent months (years?).  Also, some
of the simpler changes that he made seem to be needed just to cleanup
the code.  Would it be useful if a number of us began using his
version as an informal test?  After discovering this bug earlier
today, I have already begun to do so and so far have not encountered
any problems.

-- 
Brett Presnell
Department of Statistics
University of Florida
http://www.stat.ufl.edu/~presnell/


Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 03
 day = 27
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



--fupGvOGOQM
Content-Type: text/plain
Content-Description: glm patch
Content-Disposition: inline;
	filename="glm.patch"
Content-Transfer-Encoding: 7bit

*** glm.R	Wed Feb 27 01:11:03 2002
--- glm-patched.R	Thu Mar 28 21:09:24 2002
***************
*** 67,71 ****
  	    if(is.empty.model(mt)) fit$deviance
  	    else glm.fit(x=X[,"(Intercept)",drop=FALSE], y=Y, weights=weights,
! 			 start=start, offset=offset, family=family,
  			 control=control, intercept=TRUE)$deviance
      }
--- 67,71 ----
  	    if(is.empty.model(mt)) fit$deviance
  	    else glm.fit(x=X[,"(Intercept)",drop=FALSE], y=Y, weights=weights,
! 			 offset=offset, family=family,
  			 control=control, intercept=TRUE)$deviance
      }
***************
*** 152,156 ****
  			   "and correspond to initial coefs for",
  			   deparse(xnames)))
! 	    else as.vector(if (NCOL(x) == 1) x * start else x %*% start)
  	else family$linkfun(mustart)
      mu <- linkinv(eta)
--- 152,157 ----
  			   "and correspond to initial coefs for",
  			   deparse(xnames)))
! 	    else offset +
!               as.vector(if (NCOL(x) == 1) x * start else x %*% start)
  	else family$linkfun(mustart)
      mu <- linkinv(eta)

--fupGvOGOQM--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 29 06:25:11 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 29 Mar 2002 06:25:11 +0000 (GMT)
Subject: [Rd] glm start/offset bugs (PR#1422)
In-Reply-To: <200203290304.EAA28509@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0203290619580.9066-100000@auk.stats>

On Fri, 29 Mar 2002 presnell@stat.ufl.edu wrote:

>
> --fupGvOGOQM
> Content-Type: text/plain; charset=us-ascii
> Content-Description: message body and .signature
> Content-Transfer-Encoding: 7bit
>
>
> There's a simple bug in the handling of the start and offset arguments
> in glm and glm.fit.  The bug exists in the latest development version
> of R (version information below), but it appears that glm.R has not
> been touched much lately, so the bug affects at least the most recent
> stable release of R.
>
> Here is a simple example:
>
> > data(ships, package=MASS)
> > ships.glm <- glm(incidents ~ type + year + period + offset(log(service)),
> + 		  family=poisson, data=ships, subset=service != 0)
> > glm(incidents ~ type + year + period + offset(log(service)),
> +     family=poisson, data=ships, subset=service != 0, start=coef(ships.glm))
>
> or more simply
>
> > update(ships.glm, start=coef(ships.glm))
>
> The problem is caused by a bad initialization of etastart in glm.fit()
> when an offset is present.  Fixing this and retrying the example above
> then reveals another bug, this time in glm(), that is tickled only
> when non-NULL values are given to both the offset and start arguments.
>
> I've attached to the bottom of this message a simple patch to
> src/library/base/R/glm.R that I believe correctly repairs these bugs.
>
> Essentially the same change is needed in Berwin Turlach's Wed, 27 Feb
> 2002 version of glm.fit() reported on the R bug tracking site as
> "Models/1331".  (The change to glm() is still required as well of
> course.)  As an aside, I'm wondering if there has been any thought
> given to adopting Berwin's patches.  Though I must admit that I
> haven't taken the time to check carefully through his changes, I know
> Berwin to be a very careful and skillful programmer, and I suspect
> that he is the only person to have looked very closely at those
> particular details of glm.fit in recent months (years?).  Also, some
> of the simpler changes that he made seem to be needed just to cleanup
> the code.  Would it be useful if a number of us began using his
> version as an informal test?  After discovering this bug earlier
> today, I have already begun to do so and so far have not encountered
> any problems.

Yes, thought has been given, and the code has been looked at. (People
do look at R code you know, even if they don't jump in to change it
after a few hour's use.)

Given the time pressures, this is not going to get looked at for 1.5.0. I
have long thought that given the history of problems maintaining glm()
that it might be easier to rewrite it for scratch.  Having .null versions
serves no useful purpose, for example.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jfox@mcmaster.ca  Fri Mar 29 15:59:26 2002
From: jfox@mcmaster.ca (jfox@mcmaster.ca)
Date: Fri, 29 Mar 2002 16:59:26 +0100 (MET)
Subject: [Rd] expand.model.frame fails when call creating model has no data (PR#1423)
Message-ID: <200203291559.QAA29688@pubhealth.ku.dk>

I've encounted a problem using expand.model.frame. To illustrate, consider 
the function

     > test <- function(model){
     +     expand.model.frame(model, "income")
     +     }
     >

The data frame Prestige (from the car library) has several variables, 
including prestige, income and education. I've attached this data frame and 
fit the following model

     > mod.1 <- lm(prestige ~ (log(income) + education)*type)
     >

 From the documentation for expand.model.frame, the default environment in 
which "things" are evaluated is environment(formula(model)), where model is 
the first argument to expand.model frame; in this case

     > environment(formula(mod.1))
     <environment: R_GlobalEnv>
     >

When I call the test function with mod.1, however, I get the following error:

     > test(mod.1)
     Error in eval(expr, envir, enclos) : Object "prestige" not found
     >

But if I fit the same model specifying the data argument to lm as Prestige, 
then test works,

     > mod.2 <- lm(prestige ~ (log(income) + education)*type, data=Prestige)
     > test(mod.2)
                             prestige log(income) education type income
     GOV.ADMINISTRATORS            68.8    9.421492     13.11 prof  12351
     GENERAL.MANAGERS              69.1   10.161187     12.26 prof  25879
     ACCOUNTANTS                   63.4    9.134647     12.77 prof   9271
     . . .
     TYPESETTERS                   42.2    8.773694     10.00   bc   6462
     BOOKBINDERS                   35.2    8.193400      8.55   bc   3617
     >

even though

     > environment(formula(mod.2))
     <environment: R_GlobalEnv>
     >

that is, still the global environment.


I'm able to get expand.model.frame to do what I think it's supposed to do 
by replacing the line

	rval <- eval(call("model.frame", ff, data = data, subset = subset,
             	na.action = I), envir)

with

         rval <- if (is.null(data)) eval(call("model.frame", ff, subset = 
subset, na.action = naa), envir)
            	else eval(call("model.frame", ff, data = data, subset = 
subset, na.action = naa), envir)


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 4.1
  year = 2002
  month = 01
  day = 30
  language = R

Windows 2000 Professional (build 2195) Service Pack 2.0

Search Path:
  .GlobalEnv, Prestige, package:lattice, package:grid, package:car, 
package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 29 16:13:46 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2002 17:13:46 +0100
Subject: [Rd] expand.model.frame fails when call creating model has no data (PR#1423)
In-Reply-To: <200203291559.QAA29688@pubhealth.ku.dk>
References: <200203291559.QAA29688@pubhealth.ku.dk>
Message-ID: <x2sn6jpd1h.fsf@blueberry.kubism.ku.dk>

jfox@mcmaster.ca writes:

> I'm able to get expand.model.frame to do what I think it's supposed to do 
> by replacing the line
> 
> 	rval <- eval(call("model.frame", ff, data = data, subset = subset,
>              	na.action = I), envir)
> 
> with
> 
>          rval <- if (is.null(data)) eval(call("model.frame", ff, subset = 
> subset, na.action = naa), envir)
>             	else eval(call("model.frame", ff, data = data, subset = 
> subset, na.action = naa), envir)

Yes, but a better fix seems to be to have model.frame check for an
explicit NULL data argument. Looks like a few cases of missing(data)
in there might as well have read is.null(data) since that is the
default. Anyone know better?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Fri Mar 29 16:51:19 2002
From: presnell@stat.ufl.edu (Brett Presnell)
Date: Fri, 29 Mar 2002 11:51:19 -0500
Subject: [Rd] glm start/offset bugs (PR#1422)
In-Reply-To: <Pine.GSO.4.44.0203290619580.9066-100000@auk.stats>
References: <200203290304.EAA28509@pubhealth.ku.dk>
 <Pine.GSO.4.44.0203290619580.9066-100000@auk.stats>
Message-ID: <15524.39815.880724.274750@minke.stat.ufl.edu>


Prof Brian D Ripley writes:
> 
> Yes, thought has been given, and the code has been looked at. (People
> do look at R code you know, even if they don't jump in to change it
> after a few hour's use.)

Sorry. No insult intended.

> Given the time pressures, this is not going to get looked at for
> 1.5.0.

Does this mean that my patch will not make it in either?  Berwin's
work is obviously more complicated and requires more attention and
careful reading to check.  My changes actually only have an effect if
both an offset and a starting value are given, and clearly the current
version falls down badly in that case anyway.

> I have long thought that given the history of problems maintaining
> glm() that it might be easier to rewrite it for scratch.  Having
> .null versions serves no useful purpose, for example.

Yes, having ploughed around in the code a bit, I'm very sympathetic to
this view.

-- 
Brett Presnell
Department of Statistics
University of Florida
http://www.stat.ufl.edu/~presnell/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Mar 29 17:41:59 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 29 Mar 2002 12:41:59 -0500 (EST)
Subject: [Rd] wmf on Unix?
Message-ID: <Pine.LNX.4.30.0203291237340.25056-100000@bolker.zoo.ufl.edu>


  libEMF (http://sourceforge.net/projects/libemf/) looks like it may be
the solution to generating WMF/EMF files on Unix.  It's a general-purpose
(LGPL) library that implements the EMF API ...

  (I was originally going to write to the list to ask why small circles
appear to be filled (in src/gnuwin32/graphapp/gdraw.c) by generating a
series of rectangles rather than using some kind of "filled circle"
primitive; someone I passed an R-generated EMF file to was worried that
the profusion of little rectangle objects might give the printer hiccups
... I assume there is some good reason for this, probably now lost in the
mists of time.)

  Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 29 19:23:23 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Mar 2002 19:23:23 +0000 (GMT)
Subject: [Rd] wmf on Unix?
In-Reply-To: <Pine.LNX.4.30.0203291237340.25056-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.31.0203291919280.4980-100000@gannet.stats>

On Fri, 29 Mar 2002, Ben Bolker wrote:

>
>   libEMF (http://sourceforge.net/projects/libemf/) looks like it may be
> the solution to generating WMF/EMF files on Unix.  It's a general-purpose
> (LGPL) library that implements the EMF API ...
>
>   (I was originally going to write to the list to ask why small circles
> appear to be filled (in src/gnuwin32/graphapp/gdraw.c) by generating a
> series of rectangles rather than using some kind of "filled circle"
> primitive; someone I passed an R-generated EMF file to was worried that
> the profusion of little rectangle objects might give the printer hiccups
> ... I assume there is some good reason for this, probably now lost in the
> mists of time.)

Such as the filled circle code in the Windows GDI does not work
adequately? The name `fastfillrectangle' might give you a clue.

Drawing filled circles through the Windows GDI is notoriously slow
and buggy.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 29 19:32:53 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Mar 2002 19:32:53 +0000 (GMT)
Subject: [Rd] glm start/offset bugs (PR#1422)
In-Reply-To: <15524.39815.880724.274750@minke.stat.ufl.edu>
Message-ID: <Pine.LNX.4.31.0203291927110.4980-100000@gannet.stats>

On Fri, 29 Mar 2002, Brett Presnell wrote:

>
> Prof Brian D Ripley writes:
> >
> > Yes, thought has been given, and the code has been looked at. (People
> > do look at R code you know, even if they don't jump in to change it
> > after a few hour's use.)
>
> Sorry. No insult intended.
>
> > Given the time pressures, this is not going to get looked at for
> > 1.5.0.
>
> Does this mean that my patch will not make it in either?  Berwin's

Probably not.  People seem very reluctant to deal with bugs these days.

> work is obviously more complicated and requires more attention and
> careful reading to check.  My changes actually only have an effect if
> both an offset and a starting value are given, and clearly the current
> version falls down badly in that case anyway.
>
> > I have long thought that given the history of problems maintaining
> > glm() that it might be easier to rewrite it for scratch.  Having
> > .null versions serves no useful purpose, for example.
>
> Yes, having ploughed around in the code a bit, I'm very sympathetic to
> this view.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Sat Mar 30 01:24:11 2002
From: rossini@u.washington.edu (Anthony Rossini)
Date: Fri, 29 Mar 2002 17:24:11 -0800 (PST)
Subject: [Rd] First sample release of the R-Orca package.
Message-ID: <Pine.LNX.4.43.0203291724110.2317@hymn10.u.washington.edu>

For all those few of you who care about weird statistical visualization software, I've finally made available a "test" release for R-Orca.  There are 
examples of a 2-d variable selection plot (i.e. 2-d straight projection, with selection of the 2 variables to view), a GrandTour plot, and a Simplicial data plot.  The points of interest are the ability to brush and select from the command line, etc.

Requires Duncan's recent SJava for "stability" under Linux, I've heard reports that it has always been stable under Microsoft Windows.  I don't have a Mac, so am clueless as to whether it works.

D/L the rorca package and test.R example from

http://software.biostat.washington.edu/~rossini/rorca/

I'd appreciate any comments.  For examples of visualizations that I've implemented, you might "checkout" the orca distribution and look in the examples directory.  The java code "ports" in a straightforward way from Java to R.

Really straightforward, thanks to Duncan :-).

I've not provided linked-views examples yet, but hope to do that next week, if nothing interrupts.

best,
-tony

----
A.J. Rossini                            Rsrch Asst Professor of Biostatistics
rossini@u.washington.edu                http://software.biostat.washington.edu/
Biostatistics/Univ. of Washington       206-543-1044 (3286=fax) (Thursdays)
HIV Vaccine Trials Network/FHCRC        206-667-7025 (4812=fax) (M/Tu/W)
(Friday location is generally unknown).




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar 30 11:35:37 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 30 Mar 2002 12:35:37 +0100 (MET)
Subject: [Rd] persp + postscript/pdf (PR#1419)
Message-ID: <200203301135.MAA01348@pubhealth.ku.dk>

This is rather a documentation bug which means you are misusing persp().

The shading is done in the colour given by the `col' argument, and that
defaults to NULL.  What NULL means is undocumented, but it appears to mean
par("bg"), and that is transparent on postscript/pdf.  Set a value for
`col' and it works as you expect.

I've changed the default to col = "white" and also ensured that
transparent colours are treated as transparent.

On Thu, 28 Mar 2002 leisch@ci.tuwien.ac.at wrote:

> persp(outer(1:5, 1:5), shade=0.1)
>
> looks nice on the screen, but
>
> postscript()
> persp(outer(1:5, 1:5), shade=0.1)
> dev.off()
>
>
> gives an all black surface.
> same when using the pdf() device. has already been like that in 1.4.0.
>
> .f
>
>
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Under development (unstable)
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 03
>  day = 28
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Sat Mar 30 13:08:21 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Sat, 30 Mar 2002 14:08:21 +0100
Subject: [Rd] Highlighting in KDE editor Kate
Message-ID: <200203301308.g2UD8MV20497@wn1.sci.kun.nl>


Hi all,

Anyone interested in a highlighting module for Kate (as in KDE 2.2.2)?
Below is the module, which should be placed in something like:
~/.kde/share/apps/kate/syntax/

Or globally, in something like:
/opt/kde2/share/apps/kate/syntax/

Rather little functions are recognized right now, but it is clear how to add 
them.

The module:

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE language SYSTEM "language.dtd">
<language name="R Script" section="Sources" extensions="*.R" 
mimetype="application/x-R">
  <highlighting>
    <list name="commands">
      <item> c </item>
      <item> dev </item>
      <item> grey </item>
      <item> lm </item>
      <item> matrix </item>
      <item> outer </item>
      <item> persp </item>
      <item> postscript </item>
      <item> scan </item>
      <item> seq </item>
    </list>
    <contexts>
      <context attribute="0" lineEndContext="0">
        <keyword attribute="1" context="0" String="commands"/>
        <RegExpr attribute="2" context="0" String="#.*$" />
        <RangeDetect attribute="3" context="0" char="&quot;" char1="&quot;"/>
      </context>
    </contexts>
    <itemDatas>
      <itemData name="Normal Text" defStyleNum="dsNormal"/>
      <itemData name="Keyword" defStyleNum="dsKeyword"/>
      <itemData name="Comment" defStyleNum="dsComment"/>
      <itemData name="String"  defStyleNum="dsString"/>
      <itemData name="Attribute" defStyleNum="dsNormal" italic="1"/>
    </itemDatas>
  </highlighting>
  <general>
    <comments>
      <comment name="singleLine" start="#" />
    </comments>
  </general>
</language>

Regards,

Egon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From schutz@wehi.edu.au  Fri Mar  1 06:06:38 2002
From: schutz@wehi.edu.au (schutz@wehi.edu.au)
Date: Fri, 1 Mar 2002 07:06:38 +0100 (MET)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
Message-ID: <200203010606.HAA10892@pubhealth.ku.dk>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---559023410-1141662977-1014960253=:3119
Content-Type: TEXT/PLAIN; CHARSET=iso-8859-1
Content-Transfer-Encoding: QUOTED-PRINTABLE
Content-ID: <Pine.SOL.4.33.0203011649142.3119@unix09.wehi.edu.au>

Don Knuth recently updated its RNG, following the discovery of a
weakness in the seed initialisation (see
http://Sunburn.Stanford.EDU/~knuth/news02.html), so I believe that the
corresponding code in R should be updated as well. If it may be usefull,
I attach a patch to do the change.

Notes:

  - only a few lines of code have really changed, but the order of the
    functions has changed in Knuth's original code, so the patch is
    longer than it should really be;
  - Despite Knuth's request that no change should be made to the code,
    the present R code (1.5.0-devel and previous) contains a change (the
    line "long ran_x[KK];" is commented, and ran_x is defined elsewhere
    in the program). The patch contains the _same_ change; I let you
    decide if this is acceptable in regard to Knuth's request.

Frederic
--
Fr=E9d=E9ric SCH=DCTZ                      email: schutz@wehi.edu.au
Genetics and Bioinformatics Group
The Walter and Eliza Hall Institute of Medical Research
Phone: +61 3 9345 2627               Fax: +61 3 9347 0852
Post Office
Royal Melbourne Hospital, 3050
Victoria, Australia

---559023410-1141662977-1014960253=:3119
Content-Type: TEXT/PLAIN; CHARSET=US-ASCII; NAME="RNG.c.patch"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.SOL.4.33.0203011624131.3119@unix09.wehi.edu.au>
Content-Description: 
Content-Disposition: ATTACHMENT; FILENAME="RNG.c.patch"

LS0tIFJORy5jLm9sZAlGcmkgTWFyICAxIDA4OjQyOjQ1IDIwMDINCisrKyBS
TkcuYwlGcmkgTWFyICAxIDE0OjI2OjA4IDIwMDINCkBAIC01NDMsNiArNTQz
LDcgQEANCiAjZGVmaW5lIHJhbl94ICAgICAgICAgICAgIGR1bW15DQogDQog
LyogPT09PT09PT09PT09PT09PT09PSAgS251dGggVEFPQ1AgPT09PT09PT09
PT09PT09PT09PT09PT09PT0gKi8NCisvKiBGcm9tIGh0dHA6Ly93d3ctY3Mt
ZmFjdWx0eS5TdGFuZm9yZC5FRFUvfmtudXRoL3Byb2dyYW1zL3JuZy5jICov
DQogDQogICAgICAgICAgLyogUGxlYXNlIGRvIE5PVCBhbHRlciB0aGlzIHBh
cnQgb2YgdGhlIGNvZGUgKi8NCiANCkBAIC01NTEsMTUgKzU1MiwxNyBAQA0K
ICAqICAgIEl0IGlzIGV4cGxhaW5lZCBpbiBTZW1pbnVtZXJpY2FsIEFsZ29y
aXRobXMsIDNyZCBlZGl0aW9uLCBTZWN0aW9uIDMuNg0KICAqICAgIChvciBp
biB0aGUgZXJyYXRhIHRvIHRoZSAybmQgZWRpdGlvbiAtLS0gc2VlDQogICog
ICAgICAgIGh0dHA6Ly93d3ctY3MtZmFjdWx0eS5zdGFuZm9yZC5lZHUvfmtu
dXRoL3Rhb2NwLmh0bWwNCi0gKiAgICBpbiB0aGUgY2hhbmdlcyB0byBwYWdl
cyAxNzEgYW5kIGZvbGxvd2luZyBvZiBWb2x1bWUgMikuICAgICAgICAgICAg
ICAqLw0KKyAqICAgIGluIHRoZSBjaGFuZ2VzIHRvIFZvbHVtZSAyIG9uIHBh
Z2VzIDE3MSBhbmQgZm9sbG93aW5nKS4gICAgICAgICAgICAgICovDQorDQor
LyogICAgTi5CLiBUaGUgTU9ESUZJQ0FUSU9OUyBpbnRyb2R1Y2VkIGluIHRo
ZSA5dGggcHJpbnRpbmcgKDIwMDIpIGFyZQ0KKyAgICAgIGluY2x1ZGVkIGhl
cmU7IHRoZXJlJ3Mgbm8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCB0
aGUgb3JpZ2luYWwuICovDQogDQogLyogICAgSWYgeW91IGZpbmQgYW55IGJ1
Z3MsIHBsZWFzZSByZXBvcnQgdGhlbSBpbW1lZGlhdGVseSB0bw0KICAqICAg
ICAgICAgICAgICAgICB0YW9jcEBjcy5zdGFuZm9yZC5lZHUNCiAgKiAgICAo
YW5kIHlvdSB3aWxsIGJlIHJld2FyZGVkIGlmIHRoZSBidWcgaXMgZ2VudWlu
ZSkuIFRoYW5rcyEgICAgICAgICAgICAqLw0KIA0KIC8qKioqKioqKioqKiog
c2VlIHRoZSBib29rIGZvciBleHBsYW5hdGlvbnMgYW5kIGNhdmVhdHMhICoq
KioqKioqKioqKioqKioqKiovDQotDQotLyogdGhlIG9sZCBDIGNhbGxpbmcg
Y29udmVudGlvbnMgYXJlIHVzZWQgaGVyZSwgZm9yIHJlYXNvbnMgb2YgcG9y
dGFiaWxpdHkgKi8NCisvKioqKioqKioqKioqIGluIHBhcnRpY3VsYXIsIHlv
dSBuZWVkIHR3bydzIGNvbXBsZW1lbnQgYXJpdGhtZXRpYyAqKioqKioqKioq
Lw0KIA0KICNkZWZpbmUgS0sgMTAwICAgICAgICAgICAgICAgICAgICAgLyog
dGhlIGxvbmcgbGFnICovDQogI2RlZmluZSBMTCAgMzcgICAgICAgICAgICAg
ICAgICAgICAvKiB0aGUgc2hvcnQgbGFnICovDQpAQCAtNTY4LDEwICs1NzEs
MTMgQEANCiANCiAvKmxvbmcgcmFuX3hbS0tdOyAqLyAgICAgICAgICAgICAg
ICAgICAvKiB0aGUgZ2VuZXJhdG9yIHN0YXRlICovDQogDQotLyogdm9pZCBy
YW5fYXJyYXkobG9uZyBhYVtdLGludCBuKSAqLw0KKyNpZmRlZiBfX1NURENf
Xw0KK3ZvaWQgcmFuX2FycmF5KGxvbmcgYWFbXSxpbnQgbikNCisjZWxzZQ0K
IHZvaWQgcmFuX2FycmF5KGFhLG4pICAgIC8qIHB1dCBuIG5ldyByYW5kb20g
bnVtYmVycyBpbiBhYSAqLw0KICAgbG9uZyAqYWE7ICAgLyogZGVzdGluYXRp
b24gKi8NCiAgIGludCBuOyAgICAgIC8qIGFycmF5IGxlbmd0aCAobXVzdCBi
ZSBhdCBsZWFzdCBLSykgKi8NCisjZW5kaWYNCiB7DQogICByZWdpc3RlciBp
bnQgaSxqOw0KICAgZm9yIChqPTA7ajxLSztqKyspIGFhW2pdPXJhbl94W2pd
Ow0KQEAgLTU4MCw1NyArNTg2LDU3IEBADQogICBmb3IgKDtpPEtLO2krKyxq
KyspIHJhbl94W2ldPW1vZF9kaWZmKGFhW2otS0tdLHJhbl94W2ktTExdKTsN
CiB9DQogDQorLyogdGhlIGZvbGxvd2luZyByb3V0aW5lcyBhcmUgZnJvbSBl
eGVyY2lzZSAzLjYtLTE1ICovDQorLyogYWZ0ZXIgY2FsbGluZyByYW5fc3Rh
cnQsIGdldCBuZXcgcmFuZG9tcyBieSwgZS5nLiwgIng9cmFuX2Fycl9uZXh0
KCkiICovDQorDQorI2RlZmluZSBRVUFMSVRZIDEwMDkgLyogcmVjb21tZW5k
ZWQgcXVhbGl0eSBsZXZlbCBmb3IgaGlnaC1yZXMgdXNlICovDQorbG9uZyBy
YW5fYXJyX2J1ZltRVUFMSVRZXTsNCitsb25nIHJhbl9hcnJfc2VudGluZWw9
LTE7DQorbG9uZyAqcmFuX2Fycl9wdHI9JnJhbl9hcnJfc2VudGluZWw7IC8q
IHRoZSBuZXh0IHJhbmRvbSBudW1iZXIsIG9yIC0xICovDQorDQorI2RlZmlu
ZSByYW5fYXJyX25leHQoKSAoKnJhbl9hcnJfcHRyPj0wPyAqcmFuX2Fycl9w
dHIrKzogcmFuX2Fycl9jeWNsZSgpKQ0KK2xvbmcgcmFuX2Fycl9jeWNsZSgp
DQorew0KKyAgcmFuX2FycmF5KHJhbl9hcnJfYnVmLFFVQUxJVFkpOw0KKyAg
cmFuX2Fycl9idWZbMTAwXT0tMTsNCisgIHJhbl9hcnJfcHRyPXJhbl9hcnJf
YnVmKzE7DQorICByZXR1cm4gcmFuX2Fycl9idWZbMF07DQorfQ0KKw0KICNk
ZWZpbmUgVFQgIDcwICAgLyogZ3VhcmFudGVlZCBzZXBhcmF0aW9uIGJldHdl
ZW4gc3RyZWFtcyAqLw0KICNkZWZpbmUgaXNfb2RkKHgpICAoKHgpJjEpICAg
ICAgICAgIC8qIHVuaXRzIGJpdCBvZiB4ICovDQotI2RlZmluZSBldmVuaXpl
KHgpICgoeCkmKE1NLTIpKSAgIC8qIG1ha2UgeCBldmVuICovDQogDQotLyog
dm9pZCByYW5fc3RhcnQobG9uZyBzZWVkKSAqLw0KKyNpZmRlZiBfX1NURENf
Xw0KK3ZvaWQgcmFuX3N0YXJ0KGxvbmcgc2VlZCkNCisjZWxzZQ0KIHZvaWQg
cmFuX3N0YXJ0KHNlZWQpICAgIC8qIGRvIHRoaXMgYmVmb3JlIHVzaW5nIHJh
bl9hcnJheSAqLw0KICAgbG9uZyBzZWVkOyAgICAgICAgICAgIC8qIHNlbGVj
dG9yIGZvciBkaWZmZXJlbnQgc3RyZWFtcyAqLw0KKyNlbmRpZg0KIHsNCiAg
IHJlZ2lzdGVyIGludCB0LGo7DQogICBsb25nIHhbS0srS0stMV07ICAgICAg
ICAgICAgICAvKiB0aGUgcHJlcGFyYXRpb24gYnVmZmVyICovDQotICByZWdp
c3RlciBsb25nIHNzPWV2ZW5pemUoc2VlZCsyKTsNCisgIHJlZ2lzdGVyIGxv
bmcgc3M9KHNlZWQrMikmKE1NLTIpOw0KICAgZm9yIChqPTA7ajxLSztqKysp
IHsNCiAgICAgeFtqXT1zczsgICAgICAgICAgICAgICAgICAgICAgLyogYm9v
dHN0cmFwIHRoZSBidWZmZXIgKi8NCiAgICAgc3M8PD0xOyBpZiAoc3M+PU1N
KSBzcy09TU0tMjsgLyogY3ljbGljIHNoaWZ0IDI5IGJpdHMgKi8NCiAgIH0N
Ci0gIGZvciAoO2o8S0srS0stMTtqKyspIHhbal09MDsNCiAgIHhbMV0rKzsg
ICAgICAgICAgICAgIC8qIG1ha2UgeFsxXSAoYW5kIG9ubHkgeFsxXSkgb2Rk
ICovDQotICBzcz1zZWVkJihNTS0xKTsNCi0gIHQ9VFQtMTsgd2hpbGUgKHQp
IHsNCi0gICAgZm9yIChqPUtLLTE7aj4wO2otLSkgeFtqK2pdPXhbal07ICAv
KiAic3F1YXJlIiAqLw0KLSAgICBmb3IgKGo9S0srS0stMjtqPktLLUxMO2ot
PTIpIHhbS0srS0stMS1qXT1ldmVuaXplKHhbal0pOw0KLSAgICBmb3IgKGo9
S0srS0stMjtqPj1LSztqLS0pIGlmKGlzX29kZCh4W2pdKSkgew0KLSAgICAg
IHhbai0oS0stTEwpXT1tb2RfZGlmZih4W2otKEtLLUxMKV0seFtqXSk7DQor
ICBmb3IgKHNzPXNlZWQmKE1NLTEpLHQ9VFQtMTsgdDsgKSB7ICAgICAgIA0K
KyAgICBmb3IgKGo9S0stMTtqPjA7ai0tKSB4W2oral09eFtqXSwgeFtqK2ot
MV09MDsgLyogInNxdWFyZSIgKi8NCisgICAgZm9yIChqPUtLK0tLLTI7aj49
S0s7ai0tKQ0KKyAgICAgIHhbai0oS0stTEwpXT1tb2RfZGlmZih4W2otKEtL
LUxMKV0seFtqXSksDQogICAgICAgeFtqLUtLXT1tb2RfZGlmZih4W2otS0td
LHhbal0pOw0KLSAgICB9DQogICAgIGlmIChpc19vZGQoc3MpKSB7ICAgICAg
ICAgICAgICAvKiAibXVsdGlwbHkgYnkgeiIgKi8NCiAgICAgICBmb3IgKGo9
S0s7aj4wO2otLSkgIHhbal09eFtqLTFdOw0KICAgICAgIHhbMF09eFtLS107
ICAgICAgICAgICAgLyogc2hpZnQgdGhlIGJ1ZmZlciBjeWNsaWNhbGx5ICov
DQotICAgICAgaWYgKGlzX29kZCh4W0tLXSkpIHhbTExdPW1vZF9kaWZmKHhb
TExdLHhbS0tdKTsNCisgICAgICB4W0xMXT1tb2RfZGlmZih4W0xMXSx4W0tL
XSk7DQogICAgIH0NCiAgICAgaWYgKHNzKSBzcz4+PTE7IGVsc2UgdC0tOw0K
ICAgfQ0KICAgZm9yIChqPTA7ajxMTDtqKyspIHJhbl94W2orS0stTExdPXhb
al07DQogICBmb3IgKDtqPEtLO2orKykgcmFuX3hbai1MTF09eFtqXTsNCi19
DQotDQotLyogdGhlIGZvbGxvd2luZyByb3V0aW5lcyBhcmUgZnJvbSBleGVy
Y2lzZSAzLjYtLTE1ICovDQotLyogYWZ0ZXIgY2FsbGluZyByYW5fc3RhcnQs
IGdldCBuZXcgcmFuZG9tcyBieSwgZS5nLiwgIng9cmFuX2Fycl9uZXh0KCki
ICovDQotDQotI2RlZmluZSBRVUFMSVRZIDEwMDkgLyogcmVjb21tZW5kZWQg
cXVhbGl0eSBsZXZlbCBmb3IgaGlnaC1yZXMgdXNlICovDQotbG9uZyByYW5f
YXJyX2J1ZltRVUFMSVRZXTsNCi1sb25nIHJhbl9hcnJfc2VudGluZWw9LTE7
DQotbG9uZyAqcmFuX2Fycl9wdHI9JnJhbl9hcnJfc2VudGluZWw7IC8qIHRo
ZSBuZXh0IHJhbmRvbSBudW1iZXIsIG9yIC0xICovDQotDQotI2RlZmluZSBy
YW5fYXJyX25leHQoKSAoKnJhbl9hcnJfcHRyPj0wPyAqcmFuX2Fycl9wdHIr
KzogcmFuX2Fycl9jeWNsZSgpKQ0KLWxvbmcgcmFuX2Fycl9jeWNsZSgpDQot
ew0KLSAgcmFuX2FycmF5KHJhbl9hcnJfYnVmLFFVQUxJVFkpOw0KLSAgcmFu
X2Fycl9idWZbMTAwXT0tMTsNCi0gIHJhbl9hcnJfcHRyPXJhbl9hcnJfYnVm
KzE7DQotICByZXR1cm4gcmFuX2Fycl9idWZbMF07DQorICBmb3IgKGo9MDtq
PDEwO2orKykgcmFuX2FycmF5KHgsS0srS0stMSk7IC8qIHdhcm0gdGhpbmdz
IHVwICovDQorICByYW5fYXJyX3B0cj0mcmFuX2Fycl9zZW50aW5lbDsNCiB9
DQogDQogLyogPT09PT09PT09PT09PT09PT09PT09IGVuZCBvZiBLbnV0aCdz
IGNvZGUgPT09PT09PT09PT09PT09PT09PT09PSAqLw0K
---559023410-1141662977-1014960253=:3119--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar  1 06:38:12 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Mar 2002 07:38:12 +0100 (MET)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
Message-ID: <200203010638.HAA10983@pubhealth.ku.dk>

Attachments don't really work with R-bugs.  To save us trying to unpick
this manually, could you re-send it as the body of a message to R-bugs
in reply to this one, or quoting (PR#1336) in the subject, please?

On Fri, 1 Mar 2002 schutz@wehi.edu.au wrote:

>   This message is in MIME format.  The first part should be readable text,
>   while the remaining parts are likely unreadable without MIME-aware tools.
>   Send mail to mime@docserver.cac.washington.edu for more info.
>
> ---559023410-1141662977-1014960253=:3119
> Content-Type: TEXT/PLAIN; CHARSET=iso-8859-1
> Content-Transfer-Encoding: QUOTED-PRINTABLE
> Content-ID: <Pine.SOL.4.33.0203011649142.3119@unix09.wehi.edu.au>
>
> Don Knuth recently updated its RNG, following the discovery of a
> weakness in the seed initialisation (see
> http://Sunburn.Stanford.EDU/~knuth/news02.html), so I believe that the
> corresponding code in R should be updated as well. If it may be usefull,
> I attach a patch to do the change.
>
> Notes:
>
>   - only a few lines of code have really changed, but the order of the
>     functions has changed in Knuth's original code, so the patch is
>     longer than it should really be;
>   - Despite Knuth's request that no change should be made to the code,
>     the present R code (1.5.0-devel and previous) contains a change (the
>     line "long ran_x[KK];" is commented, and ran_x is defined elsewhere
>     in the program). The patch contains the _same_ change; I let you
>     decide if this is acceptable in regard to Knuth's request.
>
> Frederic
> --
> Fr=E9d=E9ric SCH=DCTZ                      email: schutz@wehi.edu.au
> Genetics and Bioinformatics Group
> The Walter and Eliza Hall Institute of Medical Research
> Phone: +61 3 9345 2627               Fax: +61 3 9347 0852
> Post Office
> Royal Melbourne Hospital, 3050
> Victoria, Australia
>
> ---559023410-1141662977-1014960253=:3119
> Content-Type: TEXT/PLAIN; CHARSET=US-ASCII; NAME="RNG.c.patch"
> Content-Transfer-Encoding: BASE64
> Content-ID: <Pine.SOL.4.33.0203011624131.3119@unix09.wehi.edu.au>
> Content-Description:
> Content-Disposition: ATTACHMENT; FILENAME="RNG.c.patch"
>
> LS0tIFJORy5jLm9sZAlGcmkgTWFyICAxIDA4OjQyOjQ1IDIwMDINCisrKyBS
> TkcuYwlGcmkgTWFyICAxIDE0OjI2OjA4IDIwMDINCkBAIC01NDMsNiArNTQz
> LDcgQEANCiAjZGVmaW5lIHJhbl94ICAgICAgICAgICAgIGR1bW15DQogDQog
> LyogPT09PT09PT09PT09PT09PT09PSAgS251dGggVEFPQ1AgPT09PT09PT09
> PT09PT09PT09PT09PT09PT0gKi8NCisvKiBGcm9tIGh0dHA6Ly93d3ctY3Mt
> ZmFjdWx0eS5TdGFuZm9yZC5FRFUvfmtudXRoL3Byb2dyYW1zL3JuZy5jICov
> DQogDQogICAgICAgICAgLyogUGxlYXNlIGRvIE5PVCBhbHRlciB0aGlzIHBh
> cnQgb2YgdGhlIGNvZGUgKi8NCiANCkBAIC01NTEsMTUgKzU1MiwxNyBAQA0K
> ICAqICAgIEl0IGlzIGV4cGxhaW5lZCBpbiBTZW1pbnVtZXJpY2FsIEFsZ29y
> aXRobXMsIDNyZCBlZGl0aW9uLCBTZWN0aW9uIDMuNg0KICAqICAgIChvciBp
> biB0aGUgZXJyYXRhIHRvIHRoZSAybmQgZWRpdGlvbiAtLS0gc2VlDQogICog
> ICAgICAgIGh0dHA6Ly93d3ctY3MtZmFjdWx0eS5zdGFuZm9yZC5lZHUvfmtu
> dXRoL3Rhb2NwLmh0bWwNCi0gKiAgICBpbiB0aGUgY2hhbmdlcyB0byBwYWdl
> cyAxNzEgYW5kIGZvbGxvd2luZyBvZiBWb2x1bWUgMikuICAgICAgICAgICAg
> ICAqLw0KKyAqICAgIGluIHRoZSBjaGFuZ2VzIHRvIFZvbHVtZSAyIG9uIHBh
> Z2VzIDE3MSBhbmQgZm9sbG93aW5nKS4gICAgICAgICAgICAgICovDQorDQor
> LyogICAgTi5CLiBUaGUgTU9ESUZJQ0FUSU9OUyBpbnRyb2R1Y2VkIGluIHRo
> ZSA5dGggcHJpbnRpbmcgKDIwMDIpIGFyZQ0KKyAgICAgIGluY2x1ZGVkIGhl
> cmU7IHRoZXJlJ3Mgbm8gYmFja3dhcmRzIGNvbXBhdGliaWxpdHkgd2l0aCB0
> aGUgb3JpZ2luYWwuICovDQogDQogLyogICAgSWYgeW91IGZpbmQgYW55IGJ1
> Z3MsIHBsZWFzZSByZXBvcnQgdGhlbSBpbW1lZGlhdGVseSB0bw0KICAqICAg
> ICAgICAgICAgICAgICB0YW9jcEBjcy5zdGFuZm9yZC5lZHUNCiAgKiAgICAo
> YW5kIHlvdSB3aWxsIGJlIHJld2FyZGVkIGlmIHRoZSBidWcgaXMgZ2VudWlu
> ZSkuIFRoYW5rcyEgICAgICAgICAgICAqLw0KIA0KIC8qKioqKioqKioqKiog
> c2VlIHRoZSBib29rIGZvciBleHBsYW5hdGlvbnMgYW5kIGNhdmVhdHMhICoq
> KioqKioqKioqKioqKioqKiovDQotDQotLyogdGhlIG9sZCBDIGNhbGxpbmcg
> Y29udmVudGlvbnMgYXJlIHVzZWQgaGVyZSwgZm9yIHJlYXNvbnMgb2YgcG9y
> dGFiaWxpdHkgKi8NCisvKioqKioqKioqKioqIGluIHBhcnRpY3VsYXIsIHlv
> dSBuZWVkIHR3bydzIGNvbXBsZW1lbnQgYXJpdGhtZXRpYyAqKioqKioqKioq
> Lw0KIA0KICNkZWZpbmUgS0sgMTAwICAgICAgICAgICAgICAgICAgICAgLyog
> dGhlIGxvbmcgbGFnICovDQogI2RlZmluZSBMTCAgMzcgICAgICAgICAgICAg
> ICAgICAgICAvKiB0aGUgc2hvcnQgbGFnICovDQpAQCAtNTY4LDEwICs1NzEs
> MTMgQEANCiANCiAvKmxvbmcgcmFuX3hbS0tdOyAqLyAgICAgICAgICAgICAg
> ICAgICAvKiB0aGUgZ2VuZXJhdG9yIHN0YXRlICovDQogDQotLyogdm9pZCBy
> YW5fYXJyYXkobG9uZyBhYVtdLGludCBuKSAqLw0KKyNpZmRlZiBfX1NURENf
> Xw0KK3ZvaWQgcmFuX2FycmF5KGxvbmcgYWFbXSxpbnQgbikNCisjZWxzZQ0K
> IHZvaWQgcmFuX2FycmF5KGFhLG4pICAgIC8qIHB1dCBuIG5ldyByYW5kb20g
> bnVtYmVycyBpbiBhYSAqLw0KICAgbG9uZyAqYWE7ICAgLyogZGVzdGluYXRp
> b24gKi8NCiAgIGludCBuOyAgICAgIC8qIGFycmF5IGxlbmd0aCAobXVzdCBi
> ZSBhdCBsZWFzdCBLSykgKi8NCisjZW5kaWYNCiB7DQogICByZWdpc3RlciBp
> bnQgaSxqOw0KICAgZm9yIChqPTA7ajxLSztqKyspIGFhW2pdPXJhbl94W2pd
> Ow0KQEAgLTU4MCw1NyArNTg2LDU3IEBADQogICBmb3IgKDtpPEtLO2krKyxq
> KyspIHJhbl94W2ldPW1vZF9kaWZmKGFhW2otS0tdLHJhbl94W2ktTExdKTsN
> CiB9DQogDQorLyogdGhlIGZvbGxvd2luZyByb3V0aW5lcyBhcmUgZnJvbSBl
> eGVyY2lzZSAzLjYtLTE1ICovDQorLyogYWZ0ZXIgY2FsbGluZyByYW5fc3Rh
> cnQsIGdldCBuZXcgcmFuZG9tcyBieSwgZS5nLiwgIng9cmFuX2Fycl9uZXh0
> KCkiICovDQorDQorI2RlZmluZSBRVUFMSVRZIDEwMDkgLyogcmVjb21tZW5k
> ZWQgcXVhbGl0eSBsZXZlbCBmb3IgaGlnaC1yZXMgdXNlICovDQorbG9uZyBy
> YW5fYXJyX2J1ZltRVUFMSVRZXTsNCitsb25nIHJhbl9hcnJfc2VudGluZWw9
> LTE7DQorbG9uZyAqcmFuX2Fycl9wdHI9JnJhbl9hcnJfc2VudGluZWw7IC8q
> IHRoZSBuZXh0IHJhbmRvbSBudW1iZXIsIG9yIC0xICovDQorDQorI2RlZmlu
> ZSByYW5fYXJyX25leHQoKSAoKnJhbl9hcnJfcHRyPj0wPyAqcmFuX2Fycl9w
> dHIrKzogcmFuX2Fycl9jeWNsZSgpKQ0KK2xvbmcgcmFuX2Fycl9jeWNsZSgp
> DQorew0KKyAgcmFuX2FycmF5KHJhbl9hcnJfYnVmLFFVQUxJVFkpOw0KKyAg
> cmFuX2Fycl9idWZbMTAwXT0tMTsNCisgIHJhbl9hcnJfcHRyPXJhbl9hcnJf
> YnVmKzE7DQorICByZXR1cm4gcmFuX2Fycl9idWZbMF07DQorfQ0KKw0KICNk
> ZWZpbmUgVFQgIDcwICAgLyogZ3VhcmFudGVlZCBzZXBhcmF0aW9uIGJldHdl
> ZW4gc3RyZWFtcyAqLw0KICNkZWZpbmUgaXNfb2RkKHgpICAoKHgpJjEpICAg
> ICAgICAgIC8qIHVuaXRzIGJpdCBvZiB4ICovDQotI2RlZmluZSBldmVuaXpl
> KHgpICgoeCkmKE1NLTIpKSAgIC8qIG1ha2UgeCBldmVuICovDQogDQotLyog
> dm9pZCByYW5fc3RhcnQobG9uZyBzZWVkKSAqLw0KKyNpZmRlZiBfX1NURENf
> Xw0KK3ZvaWQgcmFuX3N0YXJ0KGxvbmcgc2VlZCkNCisjZWxzZQ0KIHZvaWQg
> cmFuX3N0YXJ0KHNlZWQpICAgIC8qIGRvIHRoaXMgYmVmb3JlIHVzaW5nIHJh
> bl9hcnJheSAqLw0KICAgbG9uZyBzZWVkOyAgICAgICAgICAgIC8qIHNlbGVj
> dG9yIGZvciBkaWZmZXJlbnQgc3RyZWFtcyAqLw0KKyNlbmRpZg0KIHsNCiAg
> IHJlZ2lzdGVyIGludCB0LGo7DQogICBsb25nIHhbS0srS0stMV07ICAgICAg
> ICAgICAgICAvKiB0aGUgcHJlcGFyYXRpb24gYnVmZmVyICovDQotICByZWdp
> c3RlciBsb25nIHNzPWV2ZW5pemUoc2VlZCsyKTsNCisgIHJlZ2lzdGVyIGxv
> bmcgc3M9KHNlZWQrMikmKE1NLTIpOw0KICAgZm9yIChqPTA7ajxLSztqKysp
> IHsNCiAgICAgeFtqXT1zczsgICAgICAgICAgICAgICAgICAgICAgLyogYm9v
> dHN0cmFwIHRoZSBidWZmZXIgKi8NCiAgICAgc3M8PD0xOyBpZiAoc3M+PU1N
> KSBzcy09TU0tMjsgLyogY3ljbGljIHNoaWZ0IDI5IGJpdHMgKi8NCiAgIH0N
> Ci0gIGZvciAoO2o8S0srS0stMTtqKyspIHhbal09MDsNCiAgIHhbMV0rKzsg
> ICAgICAgICAgICAgIC8qIG1ha2UgeFsxXSAoYW5kIG9ubHkgeFsxXSkgb2Rk
> ICovDQotICBzcz1zZWVkJihNTS0xKTsNCi0gIHQ9VFQtMTsgd2hpbGUgKHQp
> IHsNCi0gICAgZm9yIChqPUtLLTE7aj4wO2otLSkgeFtqK2pdPXhbal07ICAv
> KiAic3F1YXJlIiAqLw0KLSAgICBmb3IgKGo9S0srS0stMjtqPktLLUxMO2ot
> PTIpIHhbS0srS0stMS1qXT1ldmVuaXplKHhbal0pOw0KLSAgICBmb3IgKGo9
> S0srS0stMjtqPj1LSztqLS0pIGlmKGlzX29kZCh4W2pdKSkgew0KLSAgICAg
> IHhbai0oS0stTEwpXT1tb2RfZGlmZih4W2otKEtLLUxMKV0seFtqXSk7DQor
> ICBmb3IgKHNzPXNlZWQmKE1NLTEpLHQ9VFQtMTsgdDsgKSB7ICAgICAgIA0K
> KyAgICBmb3IgKGo9S0stMTtqPjA7ai0tKSB4W2oral09eFtqXSwgeFtqK2ot
> MV09MDsgLyogInNxdWFyZSIgKi8NCisgICAgZm9yIChqPUtLK0tLLTI7aj49
> S0s7ai0tKQ0KKyAgICAgIHhbai0oS0stTEwpXT1tb2RfZGlmZih4W2otKEtL
> LUxMKV0seFtqXSksDQogICAgICAgeFtqLUtLXT1tb2RfZGlmZih4W2otS0td
> LHhbal0pOw0KLSAgICB9DQogICAgIGlmIChpc19vZGQoc3MpKSB7ICAgICAg
> ICAgICAgICAvKiAibXVsdGlwbHkgYnkgeiIgKi8NCiAgICAgICBmb3IgKGo9
> S0s7aj4wO2otLSkgIHhbal09eFtqLTFdOw0KICAgICAgIHhbMF09eFtLS107
> ICAgICAgICAgICAgLyogc2hpZnQgdGhlIGJ1ZmZlciBjeWNsaWNhbGx5ICov
> DQotICAgICAgaWYgKGlzX29kZCh4W0tLXSkpIHhbTExdPW1vZF9kaWZmKHhb
> TExdLHhbS0tdKTsNCisgICAgICB4W0xMXT1tb2RfZGlmZih4W0xMXSx4W0tL
> XSk7DQogICAgIH0NCiAgICAgaWYgKHNzKSBzcz4+PTE7IGVsc2UgdC0tOw0K
> ICAgfQ0KICAgZm9yIChqPTA7ajxMTDtqKyspIHJhbl94W2orS0stTExdPXhb
> al07DQogICBmb3IgKDtqPEtLO2orKykgcmFuX3hbai1MTF09eFtqXTsNCi19
> DQotDQotLyogdGhlIGZvbGxvd2luZyByb3V0aW5lcyBhcmUgZnJvbSBleGVy
> Y2lzZSAzLjYtLTE1ICovDQotLyogYWZ0ZXIgY2FsbGluZyByYW5fc3RhcnQs
> IGdldCBuZXcgcmFuZG9tcyBieSwgZS5nLiwgIng9cmFuX2Fycl9uZXh0KCki
> ICovDQotDQotI2RlZmluZSBRVUFMSVRZIDEwMDkgLyogcmVjb21tZW5kZWQg
> cXVhbGl0eSBsZXZlbCBmb3IgaGlnaC1yZXMgdXNlICovDQotbG9uZyByYW5f
> YXJyX2J1ZltRVUFMSVRZXTsNCi1sb25nIHJhbl9hcnJfc2VudGluZWw9LTE7
> DQotbG9uZyAqcmFuX2Fycl9wdHI9JnJhbl9hcnJfc2VudGluZWw7IC8qIHRo
> ZSBuZXh0IHJhbmRvbSBudW1iZXIsIG9yIC0xICovDQotDQotI2RlZmluZSBy
> YW5fYXJyX25leHQoKSAoKnJhbl9hcnJfcHRyPj0wPyAqcmFuX2Fycl9wdHIr
> KzogcmFuX2Fycl9jeWNsZSgpKQ0KLWxvbmcgcmFuX2Fycl9jeWNsZSgpDQot
> ew0KLSAgcmFuX2FycmF5KHJhbl9hcnJfYnVmLFFVQUxJVFkpOw0KLSAgcmFu
> X2Fycl9idWZbMTAwXT0tMTsNCi0gIHJhbl9hcnJfcHRyPXJhbl9hcnJfYnVm
> KzE7DQotICByZXR1cm4gcmFuX2Fycl9idWZbMF07DQorICBmb3IgKGo9MDtq
> PDEwO2orKykgcmFuX2FycmF5KHgsS0srS0stMSk7IC8qIHdhcm0gdGhpbmdz
> IHVwICovDQorICByYW5fYXJyX3B0cj0mcmFuX2Fycl9zZW50aW5lbDsNCiB9
> DQogDQogLyogPT09PT09PT09PT09PT09PT09PT09IGVuZCBvZiBLbnV0aCdz
> IGNvZGUgPT09PT09PT09PT09PT09PT09PT09PSAqLw0K
> ---559023410-1141662977-1014960253=:3119--
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar  1 07:53:07 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 1 Mar 2002 08:53:07 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200203010753.IAA11315@pubhealth.ku.dk>

>>>>> "terra" == terra  <terra@diku.dk> writes:

    terra> Full_Name: M Welinder Version: 1.4 OS: (src)
    terra> Submission from: (NULL) (192.5.35.38)

    terra> It seems to me that pexp can be improved in the
    terra> lower_tail=TRUE and log_p=FALSE case by using expm1.
    terra> Something like

    terra> -expm1 (-x / scale);

    terra> I think.

Thank you, "terra".
Similar thoughts had crossed my mind quite a few months ago,
e.g. you find in  src/nmath/qt.c :

	    /* FIXME: Following cutoff is machine-precision dependent
	       -----  Really, use stable impl. of expm1(y) == exp(y) - 1,
	              as it is in GNU's mathlib ..*/
	    if (y > 1e-6) /* was (y > 0.002) */
		y = exp(y) - 1;
	    else { /* Taylor of	 e^y -1 : */
		y = (0.5 * y + 1) * y;
	    }

Unfortunately,  expm1() is NOT    ANSI C / ISO C as far as I know.

For the `complementary' function, log1p(),
we have been having our own builtin (src/nmath/log1p.c) to use
(unfortunately, we've used it unconditionally; from 1.5.0 on, we
 will only use it when there's no system log1p() available).


For expm1() it's the same:  
We (i.e. the "configure" script) should check for availability of a system
"exp1m()" and when it is not available, for portability, we need
to provide our own version.

Since GNU's mathlib does provide it, the source code is
available under GPL, i.e. directly usable for R.

Would you provide a  src/nmath/expm1.c  file,
modeled after R-devel's (not R 1.4.x!)  src/nmath/log1p.c one?
Feel free to ask me for more advice,
thank you in advance!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin.Schlather@uni-bayreuth.de  Fri Mar  1 07:56:17 2002
From: Martin.Schlather@uni-bayreuth.de (Martin.Schlather@uni-bayreuth.de)
Date: Fri, 01 Mar 2002 08:56:17 +0100
Subject: [Rd] fft
Message-ID: <3C7F3421.FCBF66C@uni-bayreuth.de>

This is a multi-part message in MIME format.
--------------CFA855794B7333D088726B1A
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit


Hi,

I have problems when calling fft_factor and fft_work directly in my 
C-code. Martin Maechler already told me that I should not do this -- 
anyway, the code works fine if the length of the vector is a multiple 
of 2,3,5.
If the length of the vector has different form I get, in some cases, a 
segmentation fault when work and iwork are freed (I use C's malloc to 
allocate memory for work and iwork). No or less problems occur if I 
allocate more memory than stated in  src/appl/fft.c.

However R's fft in called in R does not fail.

I would be grateful if anybody would tell me why this happens or to 
which fact I did not pay attention.
Please find attached the package containing the relevant files.
Details can be found in  tests/test.R

Many thanks in advance.
Martin



-- 
Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
Abteilung Bodenphysik            phone: +49 (0)921 55 2193          
Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/
--------------CFA855794B7333D088726B1A
Content-Type: application/x-gzip;
 name="FFT_0.0.0.tar.gz"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="FFT_0.0.0.tar.gz"

H4sICKkyfzwCA0ZGVF8wLjAuMC50YXIA7Rrtctu40X+Lp9iT2xvSoShSEiXXtjzNJXbOM06a
UZxOZ9KMB6JACQ0JckDStu4m9+xdgB+WlcR36ZwV94q1LQKLBbjYXewu1jo9vejtPDB43tAb
BwE+PW88GuqnP6yeNex44+FgPBr4/cDf8Xx/6Ps7EOxsAcq8oBJgJw+XMS2WTH6Rjsl85w8H
p6j/5ydvnk3PXl+c/f3Vw+jf97xRre/P6T9AZWv9+6P+aDxCerSDwQ54Rv8PDq9p+IEu2AGg
IUC3C7NyAZJlqSzIP3DDPBUH4Ln4Qy54ESPdGsHTslim8gBeUllwAW8aCcJRhXFbzN9Kwbsz
upIMp7hzdkxeUi4K/GP/5fznLGNinh/AFKzjCfju0PVsxOah5Fmh2YYszXM+ixnyDLh+lJaS
M+mGfwIN5JyHTOS4pxevz6HeLfQhlYBvRULydnp+AMuiyA56vevra3fBUneDk94vieaV/A+f
/4SK3qPw//4oCIZjPP99H92A8f9b0n8uw8ehfxX/K/33vcDof5v6j6LCRdfuLr9B/PeDcXv+
R8NAxf+xH5j4vw3Y5ZGYs0iF/8sf3r64/JHsYhfj8i0GfELYDQZEAZ1nHbhK+RySFRqMNU9L
FV735rSgDobYAvaS+jnnTSuT9iEhuxiteUR2DDzu8x+GWz//A3842PD/Q29ozv9WgOxyEcbl
nMFRgtt3l8eYGN/i8mLOU0TeRcV8dhc3vUQH0XuaZTEP747QHOVWKNwtstMGmw4h2p1ENC/q
9Pwep6J9yixNY0CfQgB6e1AseQ5RKUKV8gPqKEcUA3zBLXa2gmk6Qy7gBRN4h8F0F4i+AVAx
x6E8h7Ml/aBfhteJauisAFw5SdFpcYYMyjQBdU4SvLP02psE0u71CPkZn4pBLq4cwBvFovrs
48MReSYc7iT0JlIfmcOkTKUDe/w6lR8O65k40lAoogp9BRPo9lVbrYadmgpbdTPDpq8IGqE1
a+JvhPcYiyOBdwj8CGWHjydPbPhZb5BHYCXv+Hs4Br/BgZLbZUTDIpV60IHvNVf6kdmHNVWl
U0uz8h2u3w7oRRX2uGHVXuNZPTYos5Yys9e21IhAgd76HuKQnwr3kVR/WsRIXVFA/1CvqrHH
6HHsimCCzUPo9bQ8MonC5mIBWSnxdojWkop4RUjFEFpVRRFZnb/Mof39l+g4rYYaNhtF5/wn
lka11dp2LXx8n7JDdkOTDPViBfv7zshWBlawvHCnoBSl3o6RFMI0yUqMr4oJbb1pHKfXis1Y
BWK0w2pFvHbHNERrnK0qRK0ISy2GgqiZ2FOixBVCa4hisWrGn6Ca9za5tb+bvHp7fq657vUI
/KYVG43eu1qzEG9WQrHeLtOoul0CR+/MV+ptbFudIN3+1KzhCH6bYes10IpEa1awblK1mfXW
CNaOgvjCOVAkanvW95ZyVu+89zaSVG1ftWtX4OjXO5V7UBOwqR72XXtuTLDiudrnRB9ebcj1
LlsDjQCtUr+Lv69XasbQYDXmYyUxyZjVvk/3mtd/JLUD/rp8TnF4x2VreiSoyCzlo+068/to
cr7Hnv9dnF2cnzzk/f9X7n9ek/+p+q83qO7/Y5P/bUn/dTm0hh/a+q6KTugVzPn9o5//6QP/
B/Ar6r+Doa/uf/7IN/XfLeq/uZBNv4n/D0bBhv4H/bHx/9u5/xOd+sFRt70w1+mcTiYnF9O3
J1VKqtJTnrsJLSS/0TS2jRdPNROzvgoBLM5ZhYuZWBTLCo2zsauwNHdxVbbApDGT6dya22pQ
EdWjVQpqgZxxMbduEXodR0Umy3NwMVtPlKwopbDcZ1ZHb6POiCfVDtZeNrfvdBvmbNsh68Hv
DnvqTuLYf652gJlyxz3lEi9vMZ911uUFFmJQXh8WNuhSAHYllSt3vhI0sTp4xDp62FEj9uPK
iNX5V1fSvPcI/P9o4OGvyv+CYGD8/3b1XxUmvoH/7w/7gw39D0aB+f7HVqB1fZewAWQ3Q4FE
qUyAj/ZH3SzsxlyUN92FKMkuleGyquTh2Ma8NK+bLf3tWL7KC5bU85x1ChwraFHm8Bkguwn9
dypV0//MGBfV2ND1N8dWjOoh6KOhbc5LRaE34fmfrDmnq6o58D4Zi6lYlHTBYErI7i7kaBow
dgfYaVy/hcdKe/tJ55fexcvXHZusjdh6WlUBzJiMWFjEK6Lj4/CvpAmGKtT5jrBJonp1gWYt
Mp8+PX9zYpNIh6J2jIurZiSkhdXB2BxFk46Tl4lFZ7mlQtwV02WtNsTW/SmzIruKkzXmLFEY
DPPdBAd0WYlo3ucpy0Gkhd7EJ1VMVYgvaQxTVT9nYCnCGS3CpQ00UhSqyEln6RXTBc5crZjq
6qdkNGMFmytM9xjesEXCBFqFirIRLeOCZFLtV++QiDCNVS/Y3z8EIdNr1UFjbEVY5yqyFDyy
FPWeolKFOWxP1Iej5000+h5R3qkOW9E7/yDw3n9RM+q/E7+z8JXcP2c1ukxIIU7FAgqeMIJW
w2ihE7ZGPGtJTR+eQCUN3/EcdMueTqMa2d1HqQn1rlQ5XMtOTXMwtems53BfKXOAL0sd4H7T
r/n5PaWsCqL/d/f/s1fPT/75Let/t/f/ofrih/7+19DEfwMGDBgwYMCAAQMGDBgwYMCAAQMG
DBgwYMCAAQMGDBgwYMCAAQMGfg3+A2oMCkwAUAAA
--------------CFA855794B7333D088726B1A--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From o.christensen@lancaster.ac.uk  Fri Mar  1 11:06:14 2002
From: o.christensen@lancaster.ac.uk (Ole Christensen)
Date: Fri, 01 Mar 2002 11:06:14 +0000
Subject: [Rd] fft
References: <3C7F3421.FCBF66C@uni-bayreuth.de>
Message-ID: <3C7F60A6.4648041B@lancs.ac.uk>

This is a multi-part message in MIME format.
--------------583A5CD90029B2577BD50770
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: 7bit

Hi Martin

I tried your FFT stuff. Here is my report:

1. I observed similar behaviour as you did (on my Linux machine with
R-1.4.1)

2. Changing from malloc to S_alloc seems to remove the problem (see
attachment).

I remember I had a similar problem long time ago (which caused me to
change from malloc to S_alloc everywhere) when calling the same function
twice (as you have). As far as I remember this problem was present on
Linux but not on Solaris. I could try running your test functions on
Solaris, but first I have to install a new R-version there (R-1.3.0 is
probably too old for this ?).

Hope this sheds a little light on the problem, but we are not there yet
(I do not understand the reason for the difference between S_alloc and
malloc). 


Ole


Martin.Schlather@uni-bayreuth.de wrote:
> 
> Hi,
> 
> I have problems when calling fft_factor and fft_work directly in my
> C-code. Martin Maechler already told me that I should not do this --
> anyway, the code works fine if the length of the vector is a multiple
> of 2,3,5.
> If the length of the vector has different form I get, in some cases, a
> segmentation fault when work and iwork are freed (I use C's malloc to
> allocate memory for work and iwork). No or less problems occur if I
> allocate more memory than stated in  src/appl/fft.c.
> 
> However R's fft in called in R does not fail.
> 
> I would be grateful if anybody would tell me why this happens or to
> which fact I did not pay attention.
> Please find attached the package containing the relevant files.
> Details can be found in  tests/test.R
> 
> Many thanks in advance.
> Martin
> 
> --
> Martin Schlather                 email: Martin.Schlather@uni-bayreuth.de
> Abteilung Bodenphysik            phone: +49 (0)921 55 2193
> Univ. Bayreuth                   Fax  : +49 (0)921 55 2246
> D -- 95440 Bayreuth, Germany     http://www.geo.uni-bayreuth.de/~martin/
> 
>   ------------------------------------------------------------------------
>                        Name: FFT_0.0.0.tar.gz
>    FFT_0.0.0.tar.gz    Type: Unix Tape Archive (application/x-tar)
>                    Encoding: base64

-- 
Ole F. Christensen
Department of Mathematics and Statistics
Fylde College, Lancaster University 
Lancaster, LA1 4YF, England
--------------583A5CD90029B2577BD50770
Content-Type: application/x-gzip;
 name="FFT_0.0.1.tar.gz"
Content-Transfer-Encoding: base64
Content-Disposition: inline;
 filename="FFT_0.0.1.tar.gz"

H4sICO1bfzwCA0ZGVF8wLjAuMS50YXIA7Rprb9s4Ml+Pv2LWuVtIrixLsmznkjq4bpt0A6Td
wkkPB/SKgJYpm1u9QElJfIvub98hJfnVJrs9bNxcj4M0ooZDajjvYXp6etnde2BwHN8Z9vvy
2ev7Lj4dp+d76lnDnjP0e8NBv6/oXKffG+5Bf28HUOYFFQB7wVzwvGDJXXTZbO9bhFPU/4uT
i+fjszeXZz+9fhj9u44z8P079d/vrfTvDZHO9byevweO1v+DwxsafKAzdghoCNDpwKScgWBZ
KgryTyZyniaH4NiO7ZJLXkRItyIAI06nNkwW8NPpc5M8K4t5Kg7hFRUFT+AimEe0mDMBTyuM
vcT8o0x4Z0IXguESe8qOySvKkwL/sf9y/QuWsWSaH8IYjOMRuLZvOyZi80DwrFCHgCzNcz6J
mDoBfiBMS8GZsIO/gAJyzgOW5HjEl2/OoT48eJAKwM8iIXk7Pj+EeVFkh93uzc2NPWOpvcVK
99dYMUv+l/w/pkn3UcR/FwOAP0T/d3tOX8f/Xek/F8Hj0L/M/72e0r/naf3vUv9hWNgYGO35
V8j/bn+49P+BL+u/nuPp/L8T2OdhMmWhTP9XP7x9efUj2cdXzMQrDLiEsFvMgAm0nrfgOuVT
iBdoMMY0LWVCbU9pQS3MqQW04/o55c0oE+YRIfuYn3lI9jQ8bv8Pgp37f8/v+1vxv+cOhtr/
dwFknydBVE4ZPI2xuLbnx1gJr3B5MeUpIjdREZ9s4sZXGCC6z7Is4sHmDM1zJgqJWyFby2TT
IqTbhjLnyQwuaBSlAbS7a6sv1GZQR6SKwkiswgSjaJsXVw0i5/9haWgUpkkIUQEqpHlRV/j3
hCkVpSZpGgFGKQKAzBRznkNYJoFsG5A1liOKAbK8wmLLM04neC54yRLsirCABqKaCJpMcSrP
4WxOP6iPYUtSTZ0VgDtjy8RDzpBBkcYgPS/Gvqe7bEaQFiVAfsGnZJAn1xZgUzKrfnv4sJI8
SyxuxfQ2lL8yiwmRCgva/CYVH47qlTjTUEiiCn0NI+h4cix3w5eaCkf1MMOhKwkaoTV74k+I
rZDBkcA5Av4UZYePJ09M+EUdkIfYEL7j7+EY3AYHUm5XIQ2KVKhJC75XXKlHZh7VVJWVGIqV
73D/5YTaVGKPG1bNNZ7lY4syW1Jm5tqRGhFIUEdvIw75qXAfSfVPiRipKwrwjtSuCnuMMcys
CEY4PIJuV8kjEyhsab5ZKbDDRGtJk2hBSMUQWlVFERqtv01h+fPvpGUtNdSw2Si6NuZKAaZZ
Cx+/J+2Q3dI4Q70Y/YMDa2BKAytYXthjkIqSX8fcDEEaZyVmbMmEst4UHeVGshlJR0I7rHbE
Rj6iAVrjZFEhakUYcjMURM1EW4pSuZqPYjFqxp+gmtvb3JrfjV6/PT9XXHe7NevtP7Rvo9d7
92w24s1OKNzVNo3Cl1vg7OZ66VywzU4TWda4sKD5+j0fv9j4qgop6/TSohp3kk7bjDf8CJ7C
H/MktQOabbK0Y1i34dquu2sEa76X3OF4kkQexvjekNHxnfPeRJJq7MpxHXss9XmrikdyAQ7l
w9x0oMbmK56rc45UtFCeU59y6REhoBuob/H39U7NHHqIwnys7CcUjBnLD6q31fdRpx+buP9l
hankcyNTKHokqMgMmRrMuoT9SL7V+u/y7PL85CH7/9/p/xDd9H/ewKn6f3eg678d6b++/6zh
h9X9LuYSdCbds33r/d/4gf8C+AX3vz3flfe/ztDT97871H/TkI2/SvzvD/pb+vd8R8f/3fT/
RFVM8LSzbG/rKkhVYqPL8duTqp6TtR3P7ZgWgt8qGtPENlGuxGKpQgCLclbhIpbMinmFxtX4
KrE0t3FXNsNaKxPp1JiaclIS1bNV5WaAmPBkaqwQah9LZibDsXAzUy0UrChFYtjPjZY6Rl1O
jqoTrH1sam68NsyZpkXWk98Ge7Kat8y/VifAArNln3KBrVbEJ611eYGBGJTXh5kJqnHHV0HF
wp4uEhobLXSxlpq25Iz5uApJ6f+ygcy7jyD+D/q9QU/e/7uDoa/j/271X10jfIX47/leXf8P
es5A/l8Q1xsOPB3/dwHL0HcFW0D2s4hiZyxi4IODQScLOhFPytvOLCnJPhXBvLp3w7mtdWle
D5f0q7l8gUKO63XWOgXOFbQoc/gMkP2Y/pwKOXQ/M8eTas633e25BaNqCjw0tO11aVKoQzju
J3tO6aIa9pxP5iKazEo6YzAmZH8f8hJz3tDu4UsT+g10KxXtR61fu5ev3rRMsjZjqmXVfV3G
RMiCIloQlR/9v5MmGcpU51qJSWL5Vt9rrGXm02fnFycmCVUqWs7x5LqZCWhhtDA3h+GoZeVl
bNBJbsgUd83UndAyxdbvY2aEZpUna8xZLDGY5jsxTqg7GaJ4n6YshyQt1CE+uXOU1+YljWAs
b7sZGJJwQotgbgINJYW8kqST9Jqp68hc7piqu0rBaMYKNpWYzjFcsFnMErQKmWVDWkYFyYQ8
rzohSYI0km/9g4MjSER6I1/QGJcirGsVUSY8NCR1W1LJWy0cj+QvS60bKfQ9oty4yzXCd+5h
33l/p2bk3xL+ZOFLuX/OatQdG4UoTWZQ8JgRtBpGC1WwNeJZK2o8eAKVNFzLsTAsO6qMamR3
H6UiVKeSl9dKdnKZhaVNa72G+0KZA9wtdYD7Tb/m58+UsrxH/L/r/89evzj519e8/1v1//7Q
7Vf//6un878GDRo0aNCgQYMGDRo0aNCgQYMGDRo0aNCgQYMGDRo0aNCgQYMGDb8HvwE4vgnp
AFAAAA==
--------------583A5CD90029B2577BD50770--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From terra@diku.dk  Fri Mar  1 14:58:08 2002
From: terra@diku.dk (terra@diku.dk)
Date: Fri, 1 Mar 2002 15:58:08 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200203011458.PAA16714@pubhealth.ku.dk>



If you want an expm1, this will do just fine, given the availability
of log1p.  It compares well with Solaris' expm1.  (And, luckily, is
much better than just exp(x)-1...)

Morten



double
myexpm1 (double x)
{
  double y;

  if (fabs (x) > 1e-6)
    {
      y = exp (x) - 1;
      if (y > 10000)
      return y;
    }
  else
    y = (x / 2 + 1) * x; /* Taylor expansion */

  /* Newton step.  */
  y -= (1 + y) * (log1p (y) - x);
  return y;
}

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmf@atmiserv.com  Fri Mar  1 15:19:57 2002
From: jmf@atmiserv.com (jmf@atmiserv.com)
Date: Fri, 1 Mar 2002 16:19:57 +0100 (MET)
Subject: [Rd] Setting working directory (PR#1338)
Message-ID: <200203011519.QAA16850@pubhealth.ku.dk>

Full_Name: Jeffrey M. Freedman
Version: 1.4.1
OS: Mac OSX
Submission from: (NULL) (169.226.200.51)


I'm running R version 1.4.1 (NOT DARWIN VERSION) and it crashes every time I set
a working directory (either from the menu or using setwd) to a path that is
longer than a certain number of characters. This was not a problem in version
1.3.1.

Thank you.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar  1 17:30:48 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 1 Mar 2002 09:30:48 -0800 (PST)
Subject: [Rd] Setting working directory (PR#1338)
In-Reply-To: <200203011519.QAA16850@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203010930250.248186-100000@homer05.u.washington.edu>

On Fri, 1 Mar 2002 jmf@atmiserv.com wrote:

> Full_Name: Jeffrey M. Freedman
> Version: 1.4.1
> OS: Mac OSX
> Submission from: (NULL) (169.226.200.51)
>
>
> I'm running R version 1.4.1 (NOT DARWIN VERSION) and it crashes every time I set
> a working directory (either from the menu or using setwd) to a path that is
> longer than a certain number of characters. This was not a problem in version
> 1.3.1.

WHAT number of characters (ie can you give us an example).

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar  1 20:23:55 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 1 Mar 2002 21:23:55 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200203012023.VAA17931@pubhealth.ku.dk>

>>>>> "Morten" == Morten Welinder <terra@diku.dk> writes:

    Morten> If you want an expm1, this will do just fine, given
    Morten> the availability of log1p.  It compares well with
    Morten> Solaris' expm1.  (And, luckily, is much better than
    Morten> just exp(x)-1...)

    Morten> Morten

looks very reasonable;  this might make it 
(no promises yet).

Martin

    Morten> double
    Morten> myexpm1 (double x)
    Morten> {
    Morten> double y;

    Morten> if (fabs (x) > 1e-6)
    Morten> {
    Morten> y = exp (x) - 1;
    Morten> if (y > 10000)
    Morten> return y;
    Morten> }
    Morten> else
    Morten> y = (x / 2 + 1) * x; /* Taylor expansion */

    Morten> /* Newton step.  */
    Morten> y -= (1 + y) * (log1p (y) - x);
    Morten> return y;
    Morten> }


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Fri Mar  1 20:31:42 2002
From: jago@mclink.it (Stefano Iacus)
Date: Fri, 1 Mar 2002 21:31:42 +0100
Subject: [Rd] Setting working directory (PR#1338)
In-Reply-To: <200203011519.QAA16850@pubhealth.ku.dk>
Message-ID: <57294498-2D53-11D6-AD9E-003065CC4CB8@mclink.it>

Yes, I'm investigating that.

Normally path longer then 255 chars are not allowed. I'll try to fix 
this in time for 1.5.0

stefano

On Venerdì, marzo 1, 2002, at 04:19 , jmf@atmiserv.com wrote:

> Full_Name: Jeffrey M. Freedman
> Version: 1.4.1
> OS: Mac OSX
> Submission from: (NULL) (169.226.200.51)
>
>
> I'm running R version 1.4.1 (NOT DARWIN VERSION) and it crashes every 
> time I set
> a working directory (either from the menu or using setwd) to a path 
> that is
> longer than a certain number of characters. This was not a problem in 
> version
> 1.3.1.
>
> Thank you.
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> .-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-
> FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-
> request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> ._._._
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar  1 22:55:10 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 1 Mar 2002 14:55:10 -0800 (PST)
Subject: [Rd] Setting working directory (PR#1338)
In-Reply-To: <200203011519.QAA16850@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203011441490.248186-100000@homer05.u.washington.edu>

On Fri, 1 Mar 2002 jmf@atmiserv.com wrote:

> Full_Name: Jeffrey M. Freedman
> Version: 1.4.1
> OS: Mac OSX
> Submission from: (NULL) (169.226.200.51)
>
>
> I'm running R version 1.4.1 (NOT DARWIN VERSION) and it crashes every time I set
> a working directory (either from the menu or using setwd) to a path that is
> longer than a certain number of characters. This was not a problem in version
> 1.3.1.


I can duplicate this.

setwd("Macintosh HD:Users:thomas:pointless:pointless:pointless:pointless")
getwd()
crashes (the directory does exist)

The error doesn't depend on levels of nesting (replacing 'pointless' by
'a' removes the crash), and it doesn't require the directory to exist

setwd("R is free software and comes with ABSOLUTELY NO WARRANTY. You are welcome to redistribute it under certain conditions.")
getwd()

which is a legal, non existent path, causes the crash.


	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From daven@llnl.gov  Sat Mar  2 00:19:27 2002
From: daven@llnl.gov (daven@llnl.gov)
Date: Sat, 2 Mar 2002 01:19:27 +0100 (MET)
Subject: [Rd] GNU tar does not ignore files in .Rbuildignore (PR#1339)
Message-ID: <200203020019.BAA18363@pubhealth.ku.dk>

Full_Name: David O. Nelson
Version: 1.4.1
OS: solaris 2.7
Submission from: (NULL) (128.115.150.74)


Putting patterns in .Rbuildignore has no effect when the tar being used is gnu
tar (1.13) on solaris 2.7, whilst /usr/sbin/tar works perfectly.

TO REPRODUCE:

The current directory contains a source package directory ./mypkg...

bimini.jgi-psf.org% echo >mypkg/foo
bimini.jgi-psf.org% echo "foo" >mypkg/.Rbuildignore
bimini.jgi-psf.org% R CMD build mypkg
* checking for file `mypkg/DESCRIPTION' ... OK
* preparing `mypkg':
* checking whether `INDEX' is up-to-date ... NO
* creating new INDEX
* removing junk files
* building `mypkg_0.1.tar.gz'

bimini.jgi-psf.org% gzcat mypkg_0.1.tar.gz |tar tf -
mypkg/
mypkg/DESCRIPTION
mypkg/R/
mypkg/R/First.lib.R
mypkg/INDEX
mypkg/man/
mypkg/man/First.lib.Rd
bimini.jgi-psf.org% setenv PATH /usr/local/bin:$PATH
bimini.jgi-psf.org% tar --version
tar (GNU tar) 1.13

Copyright (C) 1988, 92,93,94,95,96,97,98, 1999 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.

Written by John Gilmore and Jay Fenlason.
bimini.jgi-psf.org% R CMD build mypkg
* checking for file `mypkg/DESCRIPTION' ... OK
* preparing `mypkg':
* checking whether `INDEX' is up-to-date ... OK
* removing junk files
* building `mypkg_0.1.tar.gz'

bimini.jgi-psf.org% gzcat mypkg_0.1.tar.gz | tar tf -
mypkg/
mypkg/foo
mypkg/DESCRIPTION
mypkg/.Rbuildignore
mypkg/R/
mypkg/R/First.lib.R
mypkg/INDEX
mypkg/man/
mypkg/man/First.lib.Rd
bimini.jgi-psf.org% 


THE PROBLEM:

The exclude file produced by build and placed in /tmp/Rbuild.$$ contain file
names of the form mypkg/xxx, where mypkg is the package directory and xxx is the
path name relative to mypkg. This is the format accepted by /usr/sbin/tar,
whilst gnu tar expects patterns without the preceding package name mypkg/.




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar  2 07:56:55 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 2 Mar 2002 08:56:55 +0100 (MET)
Subject: [Rd] GNU tar does not ignore files in .Rbuildignore (PR#1339)
Message-ID: <200203020756.IAA18816@pubhealth.ku.dk>

This appears to be a bug in GNU tar 1.13 and not in R.  I can confirm it
for that version of tar on Solaris, but was aware that it went away when
the cygwin port moved to later versions.  All of 1.13.17 on Linux, 1.13.19
on cygwin and 1.13.25 (which I have just built on Solaris from
alpha.gnu.org) work correctly.  My memory is that 1.12 used to work, too.

Assuming info is finding the correct manual for 1.13, my reading of the
definition of exclude patterns is that build has it correct.

I don't like using alpha software in production work, but the lack of a GNU
tar release since 1999 makes this essential and it looks like all the
common Linux distributions supply later versions.

On Sat, 2 Mar 2002 daven@llnl.gov wrote:

> Full_Name: David O. Nelson
> Version: 1.4.1
> OS: solaris 2.7
> Submission from: (NULL) (128.115.150.74)
>
>
> Putting patterns in .Rbuildignore has no effect when the tar being used is gnu
> tar (1.13) on solaris 2.7, whilst /usr/sbin/tar works perfectly.
>
> TO REPRODUCE:
>
> The current directory contains a source package directory ./mypkg...
>
> bimini.jgi-psf.org% echo >mypkg/foo
> bimini.jgi-psf.org% echo "foo" >mypkg/.Rbuildignore
> bimini.jgi-psf.org% R CMD build mypkg
> * checking for file `mypkg/DESCRIPTION' ... OK
> * preparing `mypkg':
> * checking whether `INDEX' is up-to-date ... NO
> * creating new INDEX
> * removing junk files
> * building `mypkg_0.1.tar.gz'
>
> bimini.jgi-psf.org% gzcat mypkg_0.1.tar.gz |tar tf -
> mypkg/
> mypkg/DESCRIPTION
> mypkg/R/
> mypkg/R/First.lib.R
> mypkg/INDEX
> mypkg/man/
> mypkg/man/First.lib.Rd
> bimini.jgi-psf.org% setenv PATH /usr/local/bin:$PATH
> bimini.jgi-psf.org% tar --version
> tar (GNU tar) 1.13
>
> Copyright (C) 1988, 92,93,94,95,96,97,98, 1999 Free Software Foundation, Inc.
> This is free software; see the source for copying conditions.  There is NO
> warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
>
> Written by John Gilmore and Jay Fenlason.
> bimini.jgi-psf.org% R CMD build mypkg
> * checking for file `mypkg/DESCRIPTION' ... OK
> * preparing `mypkg':
> * checking whether `INDEX' is up-to-date ... OK
> * removing junk files
> * building `mypkg_0.1.tar.gz'
>
> bimini.jgi-psf.org% gzcat mypkg_0.1.tar.gz | tar tf -
> mypkg/
> mypkg/foo
> mypkg/DESCRIPTION
> mypkg/.Rbuildignore
> mypkg/R/
> mypkg/R/First.lib.R
> mypkg/INDEX
> mypkg/man/
> mypkg/man/First.lib.Rd
> bimini.jgi-psf.org%
>
>
> THE PROBLEM:
>
> The exclude file produced by build and placed in /tmp/Rbuild.$$ contain file
> names of the form mypkg/xxx, where mypkg is the package directory and xxx is the
> path name relative to mypkg. This is the format accepted by /usr/sbin/tar,
> whilst gnu tar expects patterns without the preceding package name mypkg/.
>
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Sat Mar  2 15:58:18 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Sat, 2 Mar 2002 16:58:18 +0100
Subject: [Rd] pweibull.c (PR#1334)
In-Reply-To: <200202282048.VAA09961@pubhealth.ku.dk>
References: <200202282048.VAA09961@pubhealth.ku.dk>
Message-ID: <15488.63130.426668.170319@gargle.gargle.HOWL>

>>>>> "Morten" == Morten Welinder <terra@diku.dk> writes:

    Morten> Full_Name: M Welinder Version: 1.4 OS: (src)
    Morten> Submission from: (NULL) (192.5.35.38)


    Morten> It seems to me that pweibull can be improved in the
    Morten> lower_tail=TRUE and log_p=FALSE case by using expm1.
    Morten> Something like

    Morten> -expm1(-pow(x / scale, shape)),

yes; now that in R-devel (1.5.0 to be)
 expm1() is guaranteed to be available -- I've changed it there.

Note that this is not only for log_p=FALSE, but for both cases
of lower_tail=TRUE

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Sat Mar  2 16:02:27 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat, 2 Mar 2002 17:02:27 +0100 (MET)
Subject: [Rd] pexp.c (PR#1335)
Message-ID: <200203021602.RAA19606@pubhealth.ku.dk>

>>>>> "Morten" == Morten Welinder <terra@diku.dk> writes:

    Morten> If you want an expm1, this will do just fine, given
    Morten> the availability of log1p.  It compares well with
    Morten> Solaris' expm1.  (And, luckily, is much better than
    Morten> just exp(x)-1...)

yes, it looks fine; I've compared it with several other versions
(in R, of course).

I've added it for R-devel -- only when there's no system expm1().

    Morten> double myexpm1 (double x) { double y;

    Morten>   if (fabs (x) > 1e-6) { y = exp (x) - 1; if (y >
    Morten> 10000) return y; } else y = (x / 2 + 1) * x; /*
    Morten> Taylor expansion */

    Morten>   /* Newton step.  */ y -= (1 + y) * (log1p (y) -
    Morten> x); return y; }

I've also improved pexp() following your suggestion -- but note my
answer to #1334 (pweibull) which applies here as well!

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From schutz@wehi.edu.au  Sun Mar  3 03:17:10 2002
From: schutz@wehi.edu.au (schutz@wehi.edu.au)
Date: Sun, 3 Mar 2002 04:17:10 +0100 (MET)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
Message-ID: <200203030317.EAA20430@pubhealth.ku.dk>

Prof Brian D Ripley wrote:

>Attachments don't really work with R-bugs.  To save us trying to unpick
>this manually, could you re-send it as the body of a message to R-bugs
>in reply to this one, or quoting (PR#1336) in the subject, please?

Sorry about that (Pine sometimes modify lines of the body without warning,
so I preferred using an attachment). Here is the patch for src/main/RNG.c.

Frédéric
---
>> Don Knuth recently updated its RNG, following the discovery of a
>> weakness in the seed initialisation (see
>> http://Sunburn.Stanford.EDU/~knuth/news02.html), so I believe that the
>> corresponding code in R should be updated as well. If it may be usefull,
>> I attach a patch to do the change.
>>
>> Notes:
>>
>>   - only a few lines of code have really changed, but the order of the
>>     functions has changed in Knuth's original code, so the patch is
>>     longer than it should really be;
>>   - Despite Knuth's request that no change should be made to the code,
>>     the present R code (1.5.0-devel and previous) contains a change (the
>>     line "long ran_x[KK];" is commented, and ran_x is defined elsewhere
>>     in the program). The patch contains the _same_ change; I let you
>>     decide if this is acceptable in regard to Knuth's request.

--- RNG.c.old	Fri Mar  1 08:42:45 2002
+++ RNG.c	Fri Mar  1 14:26:08 2002
@@ -543,6 +543,7 @@
 #define ran_x             dummy
 
 /* ===================  Knuth TAOCP ========================== */
+/* From http://www-cs-faculty.Stanford.EDU/~knuth/programs/rng.c */
 
          /* Please do NOT alter this part of the code */
 
@@ -551,15 +552,17 @@
  *    It is explained in Seminumerical Algorithms, 3rd edition, Section 3.6
  *    (or in the errata to the 2nd edition --- see
  *        http://www-cs-faculty.stanford.edu/~knuth/taocp.html
- *    in the changes to pages 171 and following of Volume 2).              */
+ *    in the changes to Volume 2 on pages 171 and following).              */
+
+/*    N.B. The MODIFICATIONS introduced in the 9th printing (2002) are
+      included here; there's no backwards compatibility with the original. */
 
 /*    If you find any bugs, please report them immediately to
  *                 taocp@cs.stanford.edu
  *    (and you will be rewarded if the bug is genuine). Thanks!            */
 
 /************ see the book for explanations and caveats! *******************/
-
-/* the old C calling conventions are used here, for reasons of portability */
+/************ in particular, you need two's complement arithmetic **********/
 
 #define KK 100                     /* the long lag */
 #define LL  37                     /* the short lag */
@@ -568,10 +571,13 @@
 
 /*long ran_x[KK]; */                   /* the generator state */
 
-/* void ran_array(long aa[],int n) */
+#ifdef __STDC__
+void ran_array(long aa[],int n)
+#else
 void ran_array(aa,n)    /* put n new random numbers in aa */
   long *aa;   /* destination */
   int n;      /* array length (must be at least KK) */
+#endif
 {
   register int i,j;
   for (j=0;j<KK;j++) aa[j]=ran_x[j];
@@ -580,57 +586,57 @@
   for (;i<KK;i++,j++) ran_x[i]=mod_diff(aa[j-KK],ran_x[i-LL]);
 }
 
+/* the following routines are from exercise 3.6--15 */
+/* after calling ran_start, get new randoms by, e.g., "x=ran_arr_next()" */
+
+#define QUALITY 1009 /* recommended quality level for high-res use */
+long ran_arr_buf[QUALITY];
+long ran_arr_sentinel=-1;
+long *ran_arr_ptr=&ran_arr_sentinel; /* the next random number, or -1 */
+
+#define ran_arr_next() (*ran_arr_ptr>=0? *ran_arr_ptr++: ran_arr_cycle())
+long ran_arr_cycle()
+{
+  ran_array(ran_arr_buf,QUALITY);
+  ran_arr_buf[100]=-1;
+  ran_arr_ptr=ran_arr_buf+1;
+  return ran_arr_buf[0];
+}
+
 #define TT  70   /* guaranteed separation between streams */
 #define is_odd(x)  ((x)&1)          /* units bit of x */
-#define evenize(x) ((x)&(MM-2))   /* make x even */
 
-/* void ran_start(long seed) */
+#ifdef __STDC__
+void ran_start(long seed)
+#else
 void ran_start(seed)    /* do this before using ran_array */
   long seed;            /* selector for different streams */
+#endif
 {
   register int t,j;
   long x[KK+KK-1];              /* the preparation buffer */
-  register long ss=evenize(seed+2);
+  register long ss=(seed+2)&(MM-2);
   for (j=0;j<KK;j++) {
     x[j]=ss;                      /* bootstrap the buffer */
     ss<<=1; if (ss>=MM) ss-=MM-2; /* cyclic shift 29 bits */
   }
-  for (;j<KK+KK-1;j++) x[j]=0;
   x[1]++;              /* make x[1] (and only x[1]) odd */
-  ss=seed&(MM-1);
-  t=TT-1; while (t) {
-    for (j=KK-1;j>0;j--) x[j+j]=x[j];  /* "square" */
-    for (j=KK+KK-2;j>KK-LL;j-=2) x[KK+KK-1-j]=evenize(x[j]);
-    for (j=KK+KK-2;j>=KK;j--) if(is_odd(x[j])) {
-      x[j-(KK-LL)]=mod_diff(x[j-(KK-LL)],x[j]);
+  for (ss=seed&(MM-1),t=TT-1; t; ) {       
+    for (j=KK-1;j>0;j--) x[j+j]=x[j], x[j+j-1]=0; /* "square" */
+    for (j=KK+KK-2;j>=KK;j--)
+      x[j-(KK-LL)]=mod_diff(x[j-(KK-LL)],x[j]),
       x[j-KK]=mod_diff(x[j-KK],x[j]);
-    }
     if (is_odd(ss)) {              /* "multiply by z" */
       for (j=KK;j>0;j--)  x[j]=x[j-1];
       x[0]=x[KK];            /* shift the buffer cyclically */
-      if (is_odd(x[KK])) x[LL]=mod_diff(x[LL],x[KK]);
+      x[LL]=mod_diff(x[LL],x[KK]);
     }
     if (ss) ss>>=1; else t--;
   }
   for (j=0;j<LL;j++) ran_x[j+KK-LL]=x[j];
   for (;j<KK;j++) ran_x[j-LL]=x[j];
-}
-
-/* the following routines are from exercise 3.6--15 */
-/* after calling ran_start, get new randoms by, e.g., "x=ran_arr_next()" */
-
-#define QUALITY 1009 /* recommended quality level for high-res use */
-long ran_arr_buf[QUALITY];
-long ran_arr_sentinel=-1;
-long *ran_arr_ptr=&ran_arr_sentinel; /* the next random number, or -1 */
-
-#define ran_arr_next() (*ran_arr_ptr>=0? *ran_arr_ptr++: ran_arr_cycle())
-long ran_arr_cycle()
-{
-  ran_array(ran_arr_buf,QUALITY);
-  ran_arr_buf[100]=-1;
-  ran_arr_ptr=ran_arr_buf+1;
-  return ran_arr_buf[0];
+  for (j=0;j<10;j++) ran_array(x,KK+KK-1); /* warm things up */
+  ran_arr_ptr=&ran_arr_sentinel;
 }
 
 /* ===================== end of Knuth's code ====================== */


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Mar  3 09:28:04 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 3 Mar 2002 09:28:04 +0000 (GMT)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
In-Reply-To: <200203030317.EAA20430@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0203030923530.27666-100000@auk.stats>

It's not that simple.  This is an new generator, incompatible with
the old one.

I am sure the `weakness' does not arise in reasonable R usage, but I was
amazed that Knuth was unaware of the problem (which I regard as
well-known): but then he is a theoretician.

I will have to add this as a separate generator, since we really, really
can't re-define random number generators and so make work unreproducible.

On Sun, 3 Mar 2002 schutz@wehi.edu.au wrote:

> Prof Brian D Ripley wrote:
>
> >Attachments don't really work with R-bugs.  To save us trying to unpick
> >this manually, could you re-send it as the body of a message to R-bugs
> >in reply to this one, or quoting (PR#1336) in the subject, please?
>
> Sorry about that (Pine sometimes modify lines of the body without warning,
> so I preferred using an attachment). Here is the patch for src/main/RNG.c.
>
> Frédéric
> ---
> >> Don Knuth recently updated its RNG, following the discovery of a
> >> weakness in the seed initialisation (see
> >> http://Sunburn.Stanford.EDU/~knuth/news02.html), so I believe that the
> >> corresponding code in R should be updated as well. If it may be usefull,
> >> I attach a patch to do the change.
> >>
> >> Notes:
> >>
> >>   - only a few lines of code have really changed, but the order of the
> >>     functions has changed in Knuth's original code, so the patch is
> >>     longer than it should really be;
> >>   - Despite Knuth's request that no change should be made to the code,
> >>     the present R code (1.5.0-devel and previous) contains a change (the
> >>     line "long ran_x[KK];" is commented, and ran_x is defined elsewhere
> >>     in the program). The patch contains the _same_ change; I let you
> >>     decide if this is acceptable in regard to Knuth's request.
>
> --- RNG.c.old	Fri Mar  1 08:42:45 2002
> +++ RNG.c	Fri Mar  1 14:26:08 2002
> @@ -543,6 +543,7 @@
>  #define ran_x             dummy
>
>  /* ===================  Knuth TAOCP ========================== */
> +/* From http://www-cs-faculty.Stanford.EDU/~knuth/programs/rng.c */
>
>           /* Please do NOT alter this part of the code */
>
> @@ -551,15 +552,17 @@
>   *    It is explained in Seminumerical Algorithms, 3rd edition, Section 3.6
>   *    (or in the errata to the 2nd edition --- see
>   *        http://www-cs-faculty.stanford.edu/~knuth/taocp.html
> - *    in the changes to pages 171 and following of Volume 2).              */
> + *    in the changes to Volume 2 on pages 171 and following).              */
> +
> +/*    N.B. The MODIFICATIONS introduced in the 9th printing (2002) are
> +      included here; there's no backwards compatibility with the original. */
>
>  /*    If you find any bugs, please report them immediately to
>   *                 taocp@cs.stanford.edu
>   *    (and you will be rewarded if the bug is genuine). Thanks!            */
>
>  /************ see the book for explanations and caveats! *******************/
> -
> -/* the old C calling conventions are used here, for reasons of portability */
> +/************ in particular, you need two's complement arithmetic **********/
>
>  #define KK 100                     /* the long lag */
>  #define LL  37                     /* the short lag */
> @@ -568,10 +571,13 @@
>
>  /*long ran_x[KK]; */                   /* the generator state */
>
> -/* void ran_array(long aa[],int n) */
> +#ifdef __STDC__
> +void ran_array(long aa[],int n)
> +#else
>  void ran_array(aa,n)    /* put n new random numbers in aa */
>    long *aa;   /* destination */
>    int n;      /* array length (must be at least KK) */
> +#endif
>  {
>    register int i,j;
>    for (j=0;j<KK;j++) aa[j]=ran_x[j];
> @@ -580,57 +586,57 @@
>    for (;i<KK;i++,j++) ran_x[i]=mod_diff(aa[j-KK],ran_x[i-LL]);
>  }
>
> +/* the following routines are from exercise 3.6--15 */
> +/* after calling ran_start, get new randoms by, e.g., "x=ran_arr_next()" */
> +
> +#define QUALITY 1009 /* recommended quality level for high-res use */
> +long ran_arr_buf[QUALITY];
> +long ran_arr_sentinel=-1;
> +long *ran_arr_ptr=&ran_arr_sentinel; /* the next random number, or -1 */
> +
> +#define ran_arr_next() (*ran_arr_ptr>=0? *ran_arr_ptr++: ran_arr_cycle())
> +long ran_arr_cycle()
> +{
> +  ran_array(ran_arr_buf,QUALITY);
> +  ran_arr_buf[100]=-1;
> +  ran_arr_ptr=ran_arr_buf+1;
> +  return ran_arr_buf[0];
> +}
> +
>  #define TT  70   /* guaranteed separation between streams */
>  #define is_odd(x)  ((x)&1)          /* units bit of x */
> -#define evenize(x) ((x)&(MM-2))   /* make x even */
>
> -/* void ran_start(long seed) */
> +#ifdef __STDC__
> +void ran_start(long seed)
> +#else
>  void ran_start(seed)    /* do this before using ran_array */
>    long seed;            /* selector for different streams */
> +#endif
>  {
>    register int t,j;
>    long x[KK+KK-1];              /* the preparation buffer */
> -  register long ss=evenize(seed+2);
> +  register long ss=(seed+2)&(MM-2);
>    for (j=0;j<KK;j++) {
>      x[j]=ss;                      /* bootstrap the buffer */
>      ss<<=1; if (ss>=MM) ss-=MM-2; /* cyclic shift 29 bits */
>    }
> -  for (;j<KK+KK-1;j++) x[j]=0;
>    x[1]++;              /* make x[1] (and only x[1]) odd */
> -  ss=seed&(MM-1);
> -  t=TT-1; while (t) {
> -    for (j=KK-1;j>0;j--) x[j+j]=x[j];  /* "square" */
> -    for (j=KK+KK-2;j>KK-LL;j-=2) x[KK+KK-1-j]=evenize(x[j]);
> -    for (j=KK+KK-2;j>=KK;j--) if(is_odd(x[j])) {
> -      x[j-(KK-LL)]=mod_diff(x[j-(KK-LL)],x[j]);
> +  for (ss=seed&(MM-1),t=TT-1; t; ) {
> +    for (j=KK-1;j>0;j--) x[j+j]=x[j], x[j+j-1]=0; /* "square" */
> +    for (j=KK+KK-2;j>=KK;j--)
> +      x[j-(KK-LL)]=mod_diff(x[j-(KK-LL)],x[j]),
>        x[j-KK]=mod_diff(x[j-KK],x[j]);
> -    }
>      if (is_odd(ss)) {              /* "multiply by z" */
>        for (j=KK;j>0;j--)  x[j]=x[j-1];
>        x[0]=x[KK];            /* shift the buffer cyclically */
> -      if (is_odd(x[KK])) x[LL]=mod_diff(x[LL],x[KK]);
> +      x[LL]=mod_diff(x[LL],x[KK]);
>      }
>      if (ss) ss>>=1; else t--;
>    }
>    for (j=0;j<LL;j++) ran_x[j+KK-LL]=x[j];
>    for (;j<KK;j++) ran_x[j-LL]=x[j];
> -}
> -
> -/* the following routines are from exercise 3.6--15 */
> -/* after calling ran_start, get new randoms by, e.g., "x=ran_arr_next()" */
> -
> -#define QUALITY 1009 /* recommended quality level for high-res use */
> -long ran_arr_buf[QUALITY];
> -long ran_arr_sentinel=-1;
> -long *ran_arr_ptr=&ran_arr_sentinel; /* the next random number, or -1 */
> -
> -#define ran_arr_next() (*ran_arr_ptr>=0? *ran_arr_ptr++: ran_arr_cycle())
> -long ran_arr_cycle()
> -{
> -  ran_array(ran_arr_buf,QUALITY);
> -  ran_arr_buf[100]=-1;
> -  ran_arr_ptr=ran_arr_buf+1;
> -  return ran_arr_buf[0];
> +  for (j=0;j<10;j++) ran_array(x,KK+KK-1); /* warm things up */
> +  ran_arr_ptr=&ran_arr_sentinel;
>  }
>
>  /* ===================== end of Knuth's code ====================== */
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From schutz@wehi.edu.au  Sun Mar  3 13:54:40 2002
From: schutz@wehi.edu.au (Frederic Schutz)
Date: Mon, 04 Mar 2002 00:54:40 +1100
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
In-Reply-To: <Pine.GSO.4.44.0203030923530.27666-100000@auk.stats>
References: <200203030317.EAA20430@pubhealth.ku.dk> <Pine.GSO.4.44.0203030923530.27666-100000@auk.stats>
Message-ID: <6ka48u0s4ptvkltf5o0pst8gca1gh0p384@4ax.com>

>It's not that simple.  This is an new generator, incompatible with
>the old one.
>
>I will have to add this as a separate generator, since we really, really
>can't re-define random number generators and so make work unreproducible.

I thought about that, but I do not know the source code well enough to add
a new generator. I let you do it the way you want.

Frédéric
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun Mar  3 14:10:37 2002
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 3 Mar 2002 14:10:37 +0000 (GMT)
Subject: [Rd] Weakness in Knuth-TAOCP RNG (fwd) (PR#1336)
In-Reply-To: <6ka48u0s4ptvkltf5o0pst8gca1gh0p384@4ax.com>
Message-ID: <Pine.GSO.4.31.0203031409430.15096-100000@toucan.stats>

On Mon, 4 Mar 2002, Frederic Schutz wrote:

> >It's not that simple.  This is an new generator, incompatible with
> >the old one.
> >
> >I will have to add this as a separate generator, since we really, really
> >can't re-define random number generators and so make work unreproducible.
>
> I thought about that, but I do not know the source code well enough to add
> a new generator. I let you do it the way you want.

BTW, R already scrambled the seeds and so did not suffer from the weakness
being addressed by the incompatible change.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From w.huber@dkfz.de  Sun Mar  3 18:04:39 2002
From: w.huber@dkfz.de (w.huber@dkfz.de)
Date: Sun, 3 Mar 2002 19:04:39 +0100 (MET)
Subject: [Rd] optim: gr called at different parameter values than previous fn call if hessian=T (PR#1354)
Message-ID: <200203031804.TAA21826@pubhealth.ku.dk>

Full_Name: Wolfgang Huber
Version: 1.4.0
OS: OSF1
Submission from: (NULL) (193.174.62.46)


The documentation to "optim" (packpage base) says "It is guaranteed that `gr' 
will be called immediately after a call to `fn' at the same parameter values."
I found this not to be true when I called 

   optim(fn=fn,gr=gr,method="L-BFGS-B",hessian=T,...)

When I changed this to hessian=F), every single call to gr was indeed preceded
by
a call to fn at the same parameter values. Apparently the final calculation of 
the hessian violates the above guarantee. 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From martin.schlather@uni-bayreuth.de  Mon Mar  4 08:04:54 2002
From: martin.schlather@uni-bayreuth.de (martin.schlather@uni-bayreuth.de)
Date: Mon, 4 Mar 2002 09:04:54 +0100 (MET)
Subject: [Rd] bessel_i (PR#1356)
Message-ID: <200203040804.JAA23319@pubhealth.ku.dk>

Full_Name: Martin Schlather
Version: 1.4.1
OS: Linux, Suse 7.3
Submission from: (NULL) (132.180.7.27)


Hi,

The following simple C-program causes my computer to break down after 
some time when called by .C("test") 

#include <Rmath.h>
void test(){
  for(;;) bessel_i(1.0, 1.0, 1.0);
}

since memory allocated by bessel_i is not freed, in contrast to the standalone
version of Rmath.
(Actually, a self-written package calls bessel_i about 3,000,000 times, 
 causing the same effect.)

Cheers,
Martin


PS:
A very simple package that calls test() can be found at
    http://www.geo.uni-bayreuth.de/~martin/filetransfer/MEMORY_0.0.0.tar.gz



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hyu@stats.uwo.ca  Tue Mar  5 20:19:47 2002
From: hyu@stats.uwo.ca (hyu@stats.uwo.ca)
Date: Tue, 5 Mar 2002 21:19:47 +0100 (MET)
Subject: [Rd] Matrix identification bug (PR#1361)
Message-ID: <200203052019.VAA08035@pubhealth.ku.dk>

Full_Name: Hao Yu
Version: 1.4.1
OS: Windws and Linux
Submission from: (NULL) (129.100.45.161)


Hi,
   Recently we did some benchmarks regarding matrix inverse operation and found
some strange things. See the following results (the package Matrix is most
updated).

1. load the function Toeplitz and library(Matrix)
"Toeplitz"
function(x)
{
        matrix(x[1 + abs(outer(seq(along = x), seq(along = x), FUN = "-"))], 
                byrow = T, ncol = length(x))
}
2. On a PIII 1.125GHz (256kb cache)desktop PC with win2k, the results are
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 38.25  0.22 42.01    NA    NA
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 28.01  0.17 30.94    NA    NA

On a PIII-M 1.2GHz (512kb cache) laptop PC with winxp pro, the results are
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 33.94  0.25 34.01    NA    NA
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 9.40  0.13 9.54    NA    NA

On a PIII Xeon 1GHz (256kb cache) RedHat 7.2 Linux, the results are
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 53.79  0.48 00.01    NA    NA
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 30.29  0.21 30.59    NA    NA

This was the first time that windows R outperformed linux R even PIII Xeon 1GHz
is slightly faster than PIII 1.125GHz. Notice the abnormal result 9.4s from
PIII-M 1.2GHz (cannot be three times faster). After using native fortran lapack
(call to dpotrf and dpotri returns 9s for PIII Xeon), I realized that R may
treat the matrix as a general matrix rather than symmetric except the abnormal
case.  To confirm this, I modified the R_LapackPP.cc in Matrix package and it
turned out that
    is.MMatrix() failed to return true.
Hence 
        if (checkClass(classes, "Hermitian")) 
            return new LaSymmMatDouble(x);
is not executed in static LaMatDouble* asLaMatrix(SEXP x). Instead
    if (isMatrix(x)) {
            return new LaGenMatDouble(x);  
        }
is used. 
After replaced
    return new LaGenMatDouble(x);   
with 
    return new LaSymmMatDouble(x);

the result was (PIII Xeon 1GHz RedHat 7.2 Linux))
> system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
[1] 9.76 0.22 9.97 0.00 0.00

Clearly there are some bugs in solve() and solve.Matrix(). Notice that all have
> is.Hermitian(Toeplitz(.5^seq(0,999)))
[1] TRUE


Thanks 
Hao Yu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar  5 21:32:36 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Tue, 5 Mar 2002 22:32:36 +0100 (MET)
Subject: [Rd] Matrix identification bug (PR#1361)
Message-ID: <200203052132.WAA08217@pubhealth.ku.dk>

On Tue, 5 Mar 2002 hyu@stats.uwo.ca wrote:

> Full_Name: Hao Yu
> Version: 1.4.1
> OS: Windws and Linux
> Submission from: (NULL) (129.100.45.161)

[...]

> the result was (PIII Xeon 1GHz RedHat 7.2 Linux))
> > system.time(solve.Matrix(Toeplitz(.5^seq(0,999))))
> [1] 9.76 0.22 9.97 0.00 0.00
>
> Clearly there are some bugs in solve() and solve.Matrix(). Notice that all have

Nothing in this report suggests a bug in solve().  Can you please provide
some evidence for your claim (which is not `clear' to me), and

> solve
function (a, b, ...)
UseMethod("solve")

seems hard to get wrong!  (It matters: solve is part of R: solve.Matrix is
a contributed addon.)

Incidentally, these sort of timings are crucially dependent on the BLAS
library used, and in my experience that is a far larger factor that the OS
used.  However, that was not part of the report ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Thu Mar  7 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Thu, 7 Mar 2002 07:15:03 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200203070615.g276F3517360@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1244 *
Subject: possible bug in det using method="qr"
From: armin@approximity.com
Date: Sat, 5 Jan 2002 01:48:13 +0100 (MET)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1257 *
Subject: documentation of `las' on `par' help page
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Fri, 11 Jan 2002 12:30:20 +0100
* PR# 1323 *
Subject: bug in options() - help page
From: Ole Christensen <o.christensen@lancaster.ac.uk>
Date: Sat, 23 Feb 2002 16:56:56 +0000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1248 *
Subject: piechart default colour
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 07 Jan 2002 18:54:02 +0100
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500
* PR# 1267 *
Subject: hashing NaN
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Wed, 16 Jan 2002 16:29:35 -0800 (PST)
--Patch put in R-devel for further testing.
* PR# 1301 *
Subject: incorrect handling of arrays of list elements
From: =?iso-8859-1?Q?Jens=20Oehlschl=E4gel?= <joehl@web.de>
Date: Thu, 7 Feb 2002 13:43:19 +0100

Directory:  Macintosh

* PR# 1318 *
Subject: Multiple macintosh() graphics devices
From: d.orme@ic.ac.uk
Date: Wed, 20 Feb 2002 16:41:27 +0100 (MET)
* PR# 1338 *
Subject: Setting working directory
From: jmf@atmiserv.com
Date: Fri, 1 Mar 2002 16:19:56 +0100 (MET)

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

none

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)
* PR# 1321 *
Subject: Gnome causes different behaviour of some R functions 
From: alobo@ija.csic.es
Date: Fri, 22 Feb 2002 14:41:17 +0100 (MET)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1283 *
Subject: max/min of NULL gives MININT/MAXINT instead of -INF/+INF
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 14:36:52 -0500
--this was on purpose (type preserving); R 1.4.1 at least documents this
--We currently plan to return -/+ Inf from 1.5.0 on		-- MMä
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
* PR# 1312 *
Subject: latitude <-> longitude in quake.tab
From: ckhung@cyut.edu.tw
Date: Sat, 16 Feb 2002 01:35:20 +0100 (MET)
* PR# 1330 *
Subject:  itemize/item crashes R CMD check 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Tue, 26 Feb 2002 15:13:04 -0500
* PR# 1331 *
Subject: Bug in glm.fit?
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Wed, 27 Feb 2002 16:15:24 +0800 (WST)
* PR# 1333 *
Subject: Failed file("foo", "r") keeps file open?
From: hb@maths.lth.se
Date: Thu, 28 Feb 2002 17:20:02 +0100 (MET)
* PR# 1356 *
Subject: bessel_i
From: martin.schlather@uni-bayreuth.de
Date: Mon, 4 Mar 2002 09:04:50 +0100 (MET)
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar  7 13:18:06 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 07 Mar 2002 14:18:06 +0100
Subject: [Rd] R 1.5.0 scheduled for April 29th, feature freeze April 8
Message-ID: <x28z94zfch.fsf@blueberry.kubism.ku.dk>


The core team has decided to release R 1.5.0 on April 29th. Somewhat
earlier than maybe expected, but we realized that we needed a
phase-shift away from our usual cycle with main releases in June and
December since it was placing feature freezes just when several
members were in a creative phase due to end of teaching.

The roadmap is as follows

April 8 feature freeze on r-base
April 15 code freeze on r-base, feature freeze on recommended packages
April 22 code freeze on recommended packages, final round of platform testing

("code freeze" in the sense that only clear and critical bugs will get
fixed)

If you maintain R packages (on CRAN or otherwise), it would be a good
idea to track the development version (via rsync or the daily
snapshots) and see if anything needs changing. No changes affecting
packages are expected after April 15.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar  8 21:02:17 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Fri, 8 Mar 2002 22:02:17 +0100 (MET)
Subject: [Rd] 1st January isn't (PR#1370)
Message-ID: <200203082102.WAA01438@pubhealth.ku.dk>


In today's pre1.5.0

> ISOdate(2002,1,1)
[1] "2002-03-01 04:00:00 PST"

> ISOdate(2002,1,1)==ISOdate(2002,3,1)
[1] TRUE

It doesn't seem to happen for days other than 1/1

	-thomas

> version
         _
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status   Under development (unstable)
major    1
minor    5.0
year     2002
month    03
day      08
language R



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a215020@onyx.fmr.com  Fri Mar  8 21:36:49 2002
From: a215020@onyx.fmr.com (a215020@onyx.fmr.com)
Date: Fri, 8 Mar 2002 22:36:49 +0100 (MET)
Subject: [Rd] Sys.putenv environment variables disappear (PR#1371)
Message-ID: <200203082136.WAA01499@pubhealth.ku.dk>

Environment variables set with Sys.putenv() disappear (i.e. become "")
after a while, especially after heavy-duty I/O.  Example:

  R> x <- matrix(1., 3000, 3000)
  R> save(x, file="myx.RData")
  R> Sys.putenv(HOME="/tmp")
  R> while (Sys.getenv("HOME") != "") {cat("ok\n"); load("myx.RData")}

The loop prints "ok" twice, then exits because HOME has been destroyed.

I'm running R-1.4.1 (I also saw this in earlier versions), under
Solaris 2.6.  Dave Kane reported this problem to R-help on 6/4/01, and
I reported it on 11/30/01, but nobody else has confirmed (or denied)
seeing it (except Kjetil Halvorsen did not see it on Windows).

FYI, my include/config.h file has "#define HAVE_PUTENV 1".  Here's the
usual version info.
Version:
 platform = sparc-sun-solaris2.6
 arch = sparc
 os = solaris2.6
 system = sparc, solaris2.6
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base

                              -- David Brahm (brahm@alum.mit.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar  8 21:47:51 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 8 Mar 2002 13:47:51 -0800 (PST)
Subject: [Rd] Sys.putenv environment variables disappear (PR#1371)
In-Reply-To: <200203082136.WAA01499@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203081344100.69958-100000@homer34.u.washington.edu>

On Fri, 8 Mar 2002 a215020@onyx.fmr.com wrote:

> Environment variables set with Sys.putenv() disappear (i.e. become "")
> after a while, especially after heavy-duty I/O.  Example:
>
>   R> x <- matrix(1., 3000, 3000)
>   R> save(x, file="myx.RData")
>   R> Sys.putenv(HOME="/tmp")
>   R> while (Sys.getenv("HOME") != "") {cat("ok\n"); load("myx.RData")}
>
> The loop prints "ok" twice, then exits because HOME has been destroyed.
>
> I'm running R-1.4.1 (I also saw this in earlier versions), under
> Solaris 2.6.  Dave Kane reported this problem to R-help on 6/4/01, and
> I reported it on 11/30/01, but nobody else has confirmed (or denied)
> seeing it (except Kjetil Halvorsen did not see it on Windows).
>

It's happening on Linux with the current source tree.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Fri Mar  8 21:54:10 2002
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Fri, 8 Mar 2002 16:54:10 -0500
Subject: [Rd] Sys.putenv environment variables disappear (PR#1371)
In-Reply-To: <200203082136.WAA01499@pubhealth.ku.dk>; from a215020@onyx.fmr.com on Fri, Mar 08, 2002 at 10:36:49PM +0100
References: <200203082136.WAA01499@pubhealth.ku.dk>
Message-ID: <20020308165410.X11590@jimmy.harvard.edu>

On Fri, Mar 08, 2002 at 10:36:49PM +0100, a215020@onyx.fmr.com wrote:
> Environment variables set with Sys.putenv() disappear (i.e. become "")
> after a while, especially after heavy-duty I/O.  Example:
> 
>   R> x <- matrix(1., 3000, 3000)
>   R> save(x, file="myx.RData")
>   R> Sys.putenv(HOME="/tmp")
>   R> while (Sys.getenv("HOME") != "") {cat("ok\n"); load("myx.RData")}
> 

  We use 
   for (i = 0; i < n; i++) {
        LOGICAL(ans)[i] = putenv(CHAR(STRING_ELT(vars, i))) == 0;
    }
 and the man page for RedHat says:
         int putenv(const char *string);

DESCRIPTION
       The  putenv()  function adds or changes the value of envi-
       ronment variables.  The argument string  is  of  the  form
       name=value.   If  name does not already exist in the envi-
       ronment, then string is added to the environment.  If name
       does  exist,  then the value of name in the environment is
       changed to value.  The string pointed to by string becomes
       part  of  the  environment, so altering the string changes
       the environment.

  So, after we UNPROTECT this is bad. Seems like we need to 
  do something different.


> The loop prints "ok" twice, then exits because HOME has been destroyed.
> 
> I'm running R-1.4.1 (I also saw this in earlier versions), under
> Solaris 2.6.  Dave Kane reported this problem to R-help on 6/4/01, and
> I reported it on 11/30/01, but nobody else has confirmed (or denied)
> seeing it (except Kjetil Halvorsen did not see it on Windows).
> 
> FYI, my include/config.h file has "#define HAVE_PUTENV 1".  Here's the
> usual version info.
> Version:
>  platform = sparc-sun-solaris2.6
>  arch = sparc
>  os = solaris2.6
>  system = sparc, solaris2.6
>  status = 
>  major = 1
>  minor = 4.1
>  year = 2002
>  month = 01
>  day = 30
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:misc, package:io, package:arrays, package:ls1, package:g.data, package:db, package:ts, package:ctest, Autoloads, package:base
> 
>                               -- David Brahm (brahm@alum.mit.edu)
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat Mar  9 02:22:14 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 09 Mar 2002 03:22:14 +0100
Subject: [Rd] 1st January isn't (PR#1370)
In-Reply-To: <200203082102.WAA01438@pubhealth.ku.dk>
References: <200203082102.WAA01438@pubhealth.ku.dk>
Message-ID: <x23czatr8p.fsf@blueberry.kubism.ku.dk>

tlumley@u.washington.edu writes:

> In today's pre1.5.0
> 
> > ISOdate(2002,1,1)
> [1] "2002-03-01 04:00:00 PST"
> 
> > ISOdate(2002,1,1)==ISOdate(2002,3,1)
> [1] TRUE
> 
> It doesn't seem to happen for days other than 1/1
> 
> 	-thomas

Confirmed. I don't see how it could have happened from anything
other than this change

diff -u -r1.16 -r1.17
--- src/main/datetime.c 31 Oct 2001 13:35:39 -0000      1.16
+++ src/main/datetime.c 6 Mar 2002 11:27:37 -0000       1.17
@@ -674,6 +674,10 @@
            !strptime(CHAR(STRING_ELT(x, i%n)),
                      CHAR(STRING_ELT(sformat, i%m)), &tm);
        if(!invalid) {
+           /* Solaris sets missing fields to 0: but that's a valid year */
+           if(tm.tm_mday == 0) tm.tm_mday = NA_INTEGER;
+           if(tm.tm_yday == 0) tm.tm_yday = NA_INTEGER;
+           if(tm.tm_mon == 0) tm.tm_mon = NA_INTEGER;
            if(tm.tm_mon == NA_INTEGER || tm.tm_mday == NA_INTEGER
               || tm.tm_year == NA_INTEGER)
                glibc_fix(&tm, &invalid);

I don't see how that could cause it either, though....

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar  9 07:32:55 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 9 Mar 2002 07:32:55 +0000 (GMT)
Subject: [Rd] Sys.putenv environment variables disappear (PR#1371)
In-Reply-To: <20020308165410.X11590@jimmy.harvard.edu>
Message-ID: <Pine.GSO.4.44.0203090726550.3971-100000@auk.stats>

On Fri, 8 Mar 2002, Robert Gentleman wrote:

> On Fri, Mar 08, 2002 at 10:36:49PM +0100, a215020@onyx.fmr.com wrote:
> > Environment variables set with Sys.putenv() disappear (i.e. become "")
> > after a while, especially after heavy-duty I/O.  Example:
> >
> >   R> x <- matrix(1., 3000, 3000)
> >   R> save(x, file="myx.RData")
> >   R> Sys.putenv(HOME="/tmp")
> >   R> while (Sys.getenv("HOME") != "") {cat("ok\n"); load("myx.RData")}
> >
>
>   We use
>    for (i = 0; i < n; i++) {
>         LOGICAL(ans)[i] = putenv(CHAR(STRING_ELT(vars, i))) == 0;
>     }
>  and the man page for RedHat says:
>          int putenv(const char *string);
>
> DESCRIPTION
>        The  putenv()  function adds or changes the value of envi-
>        ronment variables.  The argument string  is  of  the  form
>        name=value.   If  name does not already exist in the envi-
>        ronment, then string is added to the environment.  If name
>        does  exist,  then the value of name in the environment is
>        changed to value.  The string pointed to by string becomes
>        part  of  the  environment, so altering the string changes
>        the environment.
>
>   So, after we UNPROTECT this is bad. Seems like we need to
>   do something different.

And what is needed is in the function Putenv in the same file, since
environment variables read from startup files are working correctly.

I've copied the code across (actually from the Windows version).

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar  9 08:43:24 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sat, 9 Mar 2002 08:43:24 +0000 (GMT)
Subject: [Rd] 1st January isn't (PR#1370)
In-Reply-To: <x23czatr8p.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.GSO.4.44.0203090840590.13515-100000@auk.stats>

On 9 Mar 2002, Peter Dalgaard BSA wrote:

> tlumley@u.washington.edu writes:
>
> > In today's pre1.5.0
> >
> > > ISOdate(2002,1,1)
> > [1] "2002-03-01 04:00:00 PST"
> >
> > > ISOdate(2002,1,1)==ISOdate(2002,3,1)
> > [1] TRUE
> >
> > It doesn't seem to happen for days other than 1/1
> >
> > 	-thomas
>
> Confirmed. I don't see how it could have happened from anything
> other than this change
>
> diff -u -r1.16 -r1.17
> --- src/main/datetime.c 31 Oct 2001 13:35:39 -0000      1.16
> +++ src/main/datetime.c 6 Mar 2002 11:27:37 -0000       1.17
> @@ -674,6 +674,10 @@
>             !strptime(CHAR(STRING_ELT(x, i%n)),
>                       CHAR(STRING_ELT(sformat, i%m)), &tm);
>         if(!invalid) {
> +           /* Solaris sets missing fields to 0: but that's a valid year */
> +           if(tm.tm_mday == 0) tm.tm_mday = NA_INTEGER;
> +           if(tm.tm_yday == 0) tm.tm_yday = NA_INTEGER;
> +           if(tm.tm_mon == 0) tm.tm_mon = NA_INTEGER;
>             if(tm.tm_mon == NA_INTEGER || tm.tm_mday == NA_INTEGER
>                || tm.tm_year == NA_INTEGER)
>                 glibc_fix(&tm, &invalid);
>
> I don't see how that could cause it either, though....

It can.  Unfortunately the Solaris man page is incorrect.  mon runs from 0
to 11, hence the fix is incorrect.

Fixed again.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Sat Mar  9 18:08:20 2002
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Sat, 9 Mar 2002 10:08:20 -0800
Subject: [Rd] L
Message-ID: <A36ED260-3388-11D6-9E97-000393860F3C@stat.ucla.edu>

As I mentioned earlier, it makes sense to maintain the Darwin/X11
version of R through fink (fink.sourceforge.net is a package management
system). Jeff Whitaker (jsw@cdc.noaa.gov), the fink maintainer of R
will install and maintain four versions of R,

-- r-base
-- r-base-atlas
-- r-base-gnome
-- r-base-gnome-atlas

as well as r-recommended. fink will handle all dependencies elegantly,
so people will have no problems any more with missing dynamic
libraries and so on.

Jeff has recently ported rpy to fink as well, and I will try to find some
resources to set up fink patch and info files for other R packages,
either the ones on CRAN or the ones to be found elsewhere. This
will hopefully make it easy to solve various installation and dependency
problems in a reasonable way (remember that fink has mysql, postgres,
netpbm, python, hdf5, expat, tcl/tk and so on).
===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boelter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/~deleeuw/sounds/nomatter.au
========================================================

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Mon Mar 11 10:07:53 2002
From: plummer@iarc.fr (Martyn Plummer)
Date: Mon, 11 Mar 2002 11:07:53 +0100 (CET)
Subject: [Rd] GNOME locale bug (PR#1321)
In-Reply-To: <200202221341.OAA04115@pubhealth.ku.dk>
Message-ID: <XFMail.20020311110753.plummer@iarc.fr>

Fixed in R-devel (R 1.5.0)

Martyn

PS. Original title was
[Rd] Gnome causes different behaviour of some R functions (PR#1321)
But my mailer snips off the bug number when I reply.

On 22-Feb-2002 alobo@ija.csic.es wrote:
> Full_Name: Agustin Lobo
> Version: 1.4.0
> OS: linux (suse 7.3)
> Submission from: (NULL) (193.144.102.102)
> 
> 
>  Saving lda.default as text files from within gui="none" and from within
>  gui="gnome" 
>  and comparing afterwards with diff, I get:
>  
>  alobo@humboldt:> diff lda.default.gnome.txt lda.default.nognome.txt
>  1c1
>  < function (x, grouping, prior = proportions, tol = 1, method =
>  c("moment",
>  ---
>> function (x, grouping, prior = proportions, tol = 1e-04, method =
>  c("moment",
>  61c61
>  <             if (all(abs(w - w0) < 0,01))
>  ---
>>             if (all(abs(w - w0) < 0.01))
>  109c109
>  <         dist <- 0 * dist - matrix(log(prior), n, ng, byrow = TRUE)
>  ---
>>         dist <- 0.5 * dist - matrix(log(prior), n, ng, byrow = TRUE)
> 
> 
> While lda.default works fine within R --gui="none", it produces the following
> error
> from within R --gui="gnome" for the same data:
> 
>> a
> <-lda.default(x=mod23puriflda[,2:5],grouping=mod23puriflda[,6],CV=F,method="mo
> ment")
> Error in lda.default(x = mod23puriflda[, 2:5], grouping = mod23puriflda[,
>: 
>         length of dimnames[2] not equal to array extent
> In addition: Warning message: 
> variables are collinear in: lda.default(x = mod23puriflda[, 2:5], grouping
> = mod23puriflda[, 
> 
> This problem is not particular to lda.default. The following code, which
> works
> fine from within R --gui="none", fails from within within R --gui="gnome":
> 
>> x1<-rnorm(20)
>> x2<-rnorm(20)
>> boxplot(list(x1=x1,x2=x2))
> Error in if (any(out[nna])) stats[c(1, 5)] <- range(x[!out], na.rm = TRUE) : 
>       missing value where logical needed
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Mar 12 14:36:49 2002
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Tue, 12 Mar 2002 15:36:49 +0100 (MET)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
Message-ID: <200203121436.PAA18972@pubhealth.ku.dk>

rbinom (in R-1.4.1) silently rounds its "size" argument. 
  The C code contains 

    n = floor(nin + 0.5); 

  I would argue that this should this either be documented or changed (to 
return NA). (The behavior is inconsistent with dbinom). 

  I sent this in to the devel list a couple of weeks ago to
provoke discussion; no disagreement (or agreement) so I'm
submitting it as a bug.

  Ben Bolker

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Tue Mar 12 15:00:28 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Tue, 12 Mar 2002 10:00:28 -0500 (EST)
Subject: [Rd] using R API in dynamically loaded code?
Message-ID: <Pine.LNX.4.30.0203120947030.3612-100000@bolker.zoo.ufl.edu>


  I'm probably missing something very basic here, but:

  I've written some C code that I load into R dynamically.  In the course
of this C code, I generate some multinomial random deviates.  I initially
used the publically available "randlib"  library, which also implements
its own random number generator and binomial deviates (which are used to
generate the multinomial deviates).  For parsimony and for licensing
reasons (the randlib licensing is not entirely clear, but there's some
wording about ACM algorithms that contradict GPL), I thought I should pull
out just the multinomial generator from randlib and use it along with
rbinom calls from the R API.  Following the R-exts document, I included
<R.h> in my code, used GetRNGstate/PutRNGstate to initialize the random
number generator, and called rbinom from within my code.
  When using "R CMD check" to build the library and test it, the dynamic
library (turtle.so) fails to load, complaining that rbinom is an
unresolved symbol.  If I force now=FALSE in the dyn.lib call (which seemed
like it *might* solve the problem), I get a "relocation error" when trying
to load the library instead.
  How do I indicate that these symbols within the library refer to
functions that should be called from R?  Am I simply on the wrong track?

  I can provide a stripped-down example if that will clarify things.

  thanks,
    Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rmh@surfer.sbm.temple.edu  Wed Mar 13 07:45:49 2002
From: rmh@surfer.sbm.temple.edu (rmh@surfer.sbm.temple.edu)
Date: Wed, 13 Mar 2002 08:45:49 +0100 (MET)
Subject: [Rd] several bugs (PR#918) lists and matrices
Message-ID: <200203130745.IAA22120@pubhealth.ku.dk>

### I got bit again by the same bugs I wrote about a year ago.
### The bugs are related to matrices and arrays of lists.

### 1. There is a clear inconsistency in how R handles two
### functionally equivalent statements.
### array() is able to take a list and create a matrix.
### matrix() is unable to create that matrix.


> vector("list", 2)
[[1]]
NULL

[[2]]
NULL

> array(vector("list", 2), dim=c(2,1))
     [,1]  
[1,] "NULL"
[2,] "NULL"
> tmpa <- array(vector("list", 2), dim=c(2,1))
> class(tmpa)
NULL
> is.array(tmpa)
[1] TRUE
> is.matrix(tmpa)
[1] TRUE
> tmpm <- matrix(vector("list", 2), nrow=2)
Error in matrix(vector("list", 2), nrow = 2) : 
	Unimplemented feature in copyVector
> 




### 2. Here the matrix single-[ subscript is doing the wrong thing,
### without giving a warning.

> tmp <- array(vector("list", 2), 1:2)
> tmp
     [,1]   [,2]  
[1,] "NULL" "NULL"
> tmp[1]
[[1]]
NULL

> tmp[[1]]
NULL
> tmp[1,1]
[[1]]
NULL

> tmp[[1,1]]
NULL
> list("abc")
[[1]]
[1] "abc"

> tmp[1] <- list("abc")  ## assignment
> tmp[1]
[[1]]
[1] "abc"

> tmp[[1]]
[1] "abc"
> tmp[1,1]     ## incorrect retrieval
[[1]]
NULL

> tmp[[1,1]]
[1] "abc"

> tmp[1,2] <- list("def")  ## refuse to do similar assignment
Error: incompatible types in subset assignment
> 



### 3. subsetting a vector of lists doesn't behave the way I anticipate.
### It looks like NULL is not handled consistently inside a vector.
### Sometimes it can be an element, sometimes not.

> tmpv <- vector("list", 2)
> tmpv
[[1]]
NULL

[[2]]
NULL

> tmpv[1] <- "abcd"  ## I assigned to the first element.
> tmpv               ## Both elements are still here.
[[1]]
[1] "abcd"

[[2]]
NULL

> tmpv[1] <- NULL    ## I assigned to the first element.
> tmpv               ## The second element is gone.
[[1]]
NULL

> 



### This time the issue came up in an attempt to make abind work with R.
### abind() is a generalization of rbind and cbind to arrays.
### Tony Plate and I posted it to StatLib in 1996
### (http://lib.stat.cmu.edu/S/abind).

### I would like you to consider adding abind to R.
### The posted abind doesn't work in R, for the reasons above and due to
### a difference in behavior of match.call between S -Plusand R that I am
### reporting in a separate bug report.
### There are two revised files, currently available at
### http://surfer.sbm.temple.edu/~rmh/abind.r
### http://surfer.sbm.temple.edu/~rmh/abind.test.in.r
### The documentation in statlib applies to these files.
### I will update the statlib version after I understand why R differs.

> version
         _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1            
year     2002           
month    01             
day      30             
language R              
>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 13 07:56:22 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 13 Mar 2002 08:56:22 +0100 (MET)
Subject: [Rd] several bugs (PR#918) lists and matrices
Message-ID: <200203130756.IAA22216@pubhealth.ku.dk>

Points 1 and 2 are already fixed in R-devel, as I did indicate on R-help,
yesterday.

Point 3 is in the FAQ, no less:

   * In R, if `x' is a list, then `x[i] <- NULL' and `x[[i]] <- NULL'
     remove the specified elements from `x'.  The first of these is
     incompatible with S, where it is a no-op.  (Note that you can set
     elements to `NULL' using `x[i] <- list(NULL)'.)

Please don't mix up unrelated reports: point 3 has nothing to do with
matrix lists.


On Wed, 13 Mar 2002 rmh@surfer.sbm.temple.edu wrote:

> ### I got bit again by the same bugs I wrote about a year ago.
> ### The bugs are related to matrices and arrays of lists.
>
> ### 1. There is a clear inconsistency in how R handles two
> ### functionally equivalent statements.
> ### array() is able to take a list and create a matrix.
> ### matrix() is unable to create that matrix.
>
>
> > vector("list", 2)
> [[1]]
> NULL
>
> [[2]]
> NULL
>
> > array(vector("list", 2), dim=c(2,1))
>      [,1]
> [1,] "NULL"
> [2,] "NULL"
> > tmpa <- array(vector("list", 2), dim=c(2,1))
> > class(tmpa)
> NULL
> > is.array(tmpa)
> [1] TRUE
> > is.matrix(tmpa)
> [1] TRUE
> > tmpm <- matrix(vector("list", 2), nrow=2)
> Error in matrix(vector("list", 2), nrow = 2) :
> 	Unimplemented feature in copyVector
> >
>
>
>
>
> ### 2. Here the matrix single-[ subscript is doing the wrong thing,
> ### without giving a warning.
>
> > tmp <- array(vector("list", 2), 1:2)
> > tmp
>      [,1]   [,2]
> [1,] "NULL" "NULL"
> > tmp[1]
> [[1]]
> NULL
>
> > tmp[[1]]
> NULL
> > tmp[1,1]
> [[1]]
> NULL
>
> > tmp[[1,1]]
> NULL
> > list("abc")
> [[1]]
> [1] "abc"
>
> > tmp[1] <- list("abc")  ## assignment
> > tmp[1]
> [[1]]
> [1] "abc"
>
> > tmp[[1]]
> [1] "abc"
> > tmp[1,1]     ## incorrect retrieval
> [[1]]
> NULL
>
> > tmp[[1,1]]
> [1] "abc"
>
> > tmp[1,2] <- list("def")  ## refuse to do similar assignment
> Error: incompatible types in subset assignment
> >
>
>
>
> ### 3. subsetting a vector of lists doesn't behave the way I anticipate.
> ### It looks like NULL is not handled consistently inside a vector.
> ### Sometimes it can be an element, sometimes not.
>
> > tmpv <- vector("list", 2)
> > tmpv
> [[1]]
> NULL
>
> [[2]]
> NULL
>
> > tmpv[1] <- "abcd"  ## I assigned to the first element.
> > tmpv               ## Both elements are still here.
> [[1]]
> [1] "abcd"
>
> [[2]]
> NULL
>
> > tmpv[1] <- NULL    ## I assigned to the first element.
> > tmpv               ## The second element is gone.
> [[1]]
> NULL
>
> >
>
>
>
> ### This time the issue came up in an attempt to make abind work with R.
> ### abind() is a generalization of rbind and cbind to arrays.
> ### Tony Plate and I posted it to StatLib in 1996
> ### (http://lib.stat.cmu.edu/S/abind).
>
> ### I would like you to consider adding abind to R.
> ### The posted abind doesn't work in R, for the reasons above and due to
> ### a difference in behavior of match.call between S -Plusand R that I am
> ### reporting in a separate bug report.
> ### There are two revised files, currently available at
> ### http://surfer.sbm.temple.edu/~rmh/abind.r
> ### http://surfer.sbm.temple.edu/~rmh/abind.test.in.r
> ### The documentation in statlib applies to these files.
> ### I will update the statlib version after I understand why R differs.
>
> > version
>          _
> platform i386-pc-mingw32
> arch     x86
> os       Win32
> system   x86, Win32
> status
> major    1
> minor    4.1
> year     2002
> month    01
> day      30
> language R
> >
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 13 10:05:14 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 13 Mar 2002 11:05:14 +0100 (MET)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
Message-ID: <200203131005.LAA23904@pubhealth.ku.dk>

Fixed for 1.5.0.  Note that pbinom and qbinom did it too.

On Tue, 12 Mar 2002 bolker@zoo.ufl.edu wrote:

> rbinom (in R-1.4.1) silently rounds its "size" argument.
>   The C code contains
>
>     n = floor(nin + 0.5);
>
>   I would argue that this should this either be documented or changed (to
> return NA). (The behavior is inconsistent with dbinom).
>
>   I sent this in to the devel list a couple of weeks ago to
> provoke discussion; no disagreement (or agreement) so I'm
> submitting it as a bug.
>
>   Ben Bolker
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status =
>  major = 1
>  minor = 4.1
>  year = 2002
>  month = 01
>  day = 30
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Mar 13 17:04:29 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 13 Mar 2002 09:04:29 -0800 (PST)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
In-Reply-To: <200203131005.LAA23904@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203130901320.83416-100000@homer34.u.washington.edu>

On Wed, 13 Mar 2002 ripley@stats.ox.ac.uk wrote:

> Fixed for 1.5.0.  Note that pbinom and qbinom did it too.
>

But isn't it right for pbinom and qbinom to do it?  P(X<=4.5) is a
perfectly reasonable quantity and is equal to P(X<=4) if X is binomial and
(with rounding the other way) the same for quantile functions.

dbinom, OTOH, is a density wrt counting measure and is not defined for
non-integers (though one could make a case for zero).

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From matthew_wiener@merck.com  Wed Mar 13 17:05:42 2002
From: matthew_wiener@merck.com (matthew_wiener@merck.com)
Date: Wed, 13 Mar 2002 18:05:42 +0100 (MET)
Subject: [Rd] rpart error with 0-frequency factor levels (with partial fix) (PR#1378)
Message-ID: <200203131705.SAA28926@pubhealth.ku.dk>

(I'm sending to r-bugs because rpart is one of the recommended packages and
is always installed.  I'm also sending it directly to Dr. Ripley, as the
maintainer.)

rpart working as a classifier does not work (produces no splits) when the
class indicator has no instances of one of the factor levels, as long as the
factor level is not the final level. I have at least a partial fix, which I
describe after the example.  I don't think the fix is ideal.  I also don't
know whether some of the other rpart methods might have a similar problem.

This may be an atypical situation, but I have come across this when using
rpart on a subset of a data frame that happens not to have any instances of
one level of a factor.

I've gotten identical results with R-1.4.1 on NT 4.0 and Mac OS X (Darwin
version, running as an inferior process under emacs).  System info for both
machines is below.

----------------------------------------------------------------------------
----------------------------------------------------------------------------
-

Here's an example.

The following is run immediately following startup in a completely empty
directory (no .RData, no .Rhistory).

> t1 <- data.frame(V1 = sample(c("A", "B"), 100, replace = T), V2 =
runif(100), V3 = runif(100))
> 
> levels(t1$V1)
[1] "A" "B"
> 
> t2 <- t1
> t2$V1 <- factor(t2$V1, levels = c("A", "B", "C"))
> t3 <- t2
> t3$V1[t3$V1 == "B"] <- "C"
> 
> table(t2$V1)

 A  B  C 
51 49  0 
> table(t3$V1)

 A  B  C 
51  0 49 
> 
> library(rpart)
> t1.rpart <- rpart(V1 ~ V2 + V3, data = t1, method = "class")
> t2.rpart <- rpart(V1 ~ V2 + V3, data = t2, method = "class")
> t3.rpart <- rpart(V1 ~ V2 + V3, data = t3, method = "class")
> 
> print(t1.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 100 49 A (0.5100000 0.4900000)  
   2) V3< 0.319873 33 13 A (0.6060606 0.3939394)  
     4) V3>=0.0740043 26  8 A (0.6923077 0.3076923) *
     5) V3< 0.0740043 7  2 B (0.2857143 0.7142857) *
   3) V3>=0.319873 67 31 B (0.4626866 0.5373134)  
     6) V2>=0.2482707 54 26 A (0.5185185 0.4814815)  
      12) V3< 0.7424548 31 13 A (0.5806452 0.4193548)  
        24) V3>=0.3740281 23  8 A (0.6521739 0.3478261) *
        25) V3< 0.3740281 8  3 B (0.3750000 0.6250000) *
      13) V3>=0.7424548 23 10 B (0.4347826 0.5652174)  
        26) V3>=0.9291285 8  3 A (0.6250000 0.3750000) *
        27) V3< 0.9291285 15  5 B (0.3333333 0.6666667) *
     7) V2< 0.2482707 13  3 B (0.2307692 0.7692308) *
> 
> print(t2.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 100 49 A (0.5100000 0.4900000)  
   2) V3< 0.319873 33 13 A (0.6060606 0.3939394)  
     4) V3>=0.0740043 26  8 A (0.6923077 0.3076923) *
     5) V3< 0.0740043 7  2 B (0.2857143 0.7142857) *
   3) V3>=0.319873 67 31 B (0.4626866 0.5373134)  
     6) V2>=0.2482707 54 26 A (0.5185185 0.4814815)  
      12) V3< 0.7424548 31 13 A (0.5806452 0.4193548)  
        24) V3>=0.3740281 23  8 A (0.6521739 0.3478261) *
        25) V3< 0.3740281 8  3 B (0.3750000 0.6250000) *
      13) V3>=0.7424548 23 10 B (0.4347826 0.5652174)  
        26) V3>=0.9291285 8  3 A (0.6250000 0.3750000) *
        27) V3< 0.9291285 15  5 B (0.3333333 0.6666667) *
     7) V2< 0.2482707 13  3 B (0.2307692 0.7692308) *
> 
> print(t3.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

1) root 100 NaN A (NaN NaN NaN) *
> 
> 

If I recode the factor back down to 2 levels it works again:

> t4 <- t3
> t4$V1 <- factor(t4$V1, levels = c("A", "C"))
> table(t4$V1)

 A  C 
51 49 
> 
> t4.rpart <- rpart(V1 ~ V2 + V3, data = t4, method = "class")
> print(t4.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

 1) root 100 49 A (0.5100000 0.4900000)  
   2) V3< 0.319873 33 13 A (0.6060606 0.3939394)  
     4) V3>=0.0740043 26  8 A (0.6923077 0.3076923) *
     5) V3< 0.0740043 7  2 C (0.2857143 0.7142857) *
   3) V3>=0.319873 67 31 C (0.4626866 0.5373134)  
     6) V2>=0.2482707 54 26 A (0.5185185 0.4814815)  
      12) V3< 0.7424548 31 13 A (0.5806452 0.4193548)  
        24) V3>=0.3740281 23  8 A (0.6521739 0.3478261) *
        25) V3< 0.3740281 8  3 C (0.3750000 0.6250000) *
      13) V3>=0.7424548 23 10 C (0.4347826 0.5652174)  
        26) V3>=0.9291285 8  3 A (0.6250000 0.3750000) *
        27) V3< 0.9291285 15  5 C (0.3333333 0.6666667) *
     7) V2< 0.2482707 13  3 C (0.2307692 0.7692308) *

And, just to make sure I get the same result if it's the first factor level
missing (so it's not just a property of the middle level missing):

> t5 <- t3
> t5$V1[t5$V1 == "A"] <- "B"
> table(t5$V1)

 A  B  C 
 0 51 49 
> 
> 
> t5.rpart <- rpart(V1 ~ V2 + V3, data = t5, method = "class")
> 
> print(t5.rpart)
n= 100 

node), split, n, loss, yval, (yprob)
      * denotes terminal node

1) root 100 NaN A (NaN NaN NaN) *
> 
----------------------------------------------------------------------------
-----------------------------------
I tried to trace the problem, and took a look at the beginning of
rpart.class:

"rpart.class" <-
  function (y, offset, parms, wt) 
{
  if (!is.null(offset)) 
    stop("No offset allowed in classification models")
  fy <- as.factor(y)
  y <- as.integer(fy)
  numclass <- max(y[!is.na(y)])
...
}
I thought the problem might have to do with the fact that numclass would
register 3 for my examples t3 and t5, but 2 for my examples t2 and t4.  So I
tried substituting 

numclass <- length(unique(y[!is.na(y)])) 

to get the number of factors present rather than the largest integer code
used, but that didn't help.

Then I tried running nnet using this data, and it worked fine on all the
examples, with a warning about an empty level.  So I lifted some code from
nnet to make the beginning of rpart.class look like this:


"rpart.class" <-
  function (y, offset, parms, wt) 
{
  if (!is.null(offset)) 
    stop("No offset allowed in classification models")
  fy <- as.factor(y)
### here comes code from nnet
    lev <- levels(y)
  counts <-  table(fy)
  if (any(counts == 0)) {
      warning(paste("group(s)", paste(lev[counts == 0], 
                                      collapse = " "), "are empty"))
      fy <- factor(fy, levels = lev[counts > 0])
    }
### done with code from nnet
  y <- as.integer(fy)
  numclass <- max(y[!is.na(y)])
...
}

When I run this it works, but the factor gets recoded.  For many
applications that's fine -- It seems to work OK when I use (say) the
predicted factor as a factor, but I'm worried about what could happen if I
use as.integer(predict(rpart.obj)) eventually and compare it to something
with the original encoding.   Not good programming practice, but I wouldn't
be surprised to find that I did it somewhere.

So the ideal would be saving the coding and restoring it somewhere.  But it
looks to me like that would require saving this somewhere and restoring the
coding after rpart (if I restore it in rpart.class, I should just run into
the problems I had before).  And then I'm not sure whether the core group
wants to mess with rpart to this extent.

Thanks for the terrific software.  I hope this is helpful.

Matthew Wiener
Applied Computer Science and Mathematics Department
Merck Research Labs
Rahway, NJ  07065-0900
732-594-5303



--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:rpart, package:ctest, Autoloads, package:base


--please do not edit the information below--

Version:
 platform = powerpc-apple-darwin5.2
 arch = powerpc
 os = darwin5.2
 system = powerpc, darwin5.2
 status = 
 major = 1
 minor = 4.1
 year = 2002
 month = 01
 day = 30
 language = R

Search Path:
 .GlobalEnv, package:rpart, package:ctest, Autoloads, package:base







-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From a296180@mica.fmr.com  Wed Mar 13 17:14:19 2002
From: a296180@mica.fmr.com (David Kane  <David Kane)
Date: Wed, 13 Mar 2002 12:14:19 -0500
Subject: [Rd] File permissions test during R CMD check
Message-ID: <15503.35051.255583.275317@gargle.gargle.HOWL>

I think that I understand why R CMD check should warn if the permissions on a
file are too restrictive, but I don't understand why it should warn if they are
"too" loose. On UNIX, why is a file with 644 OK, but one with 664 (just adding
group writability) problematic enough to require a warning?

Thanks,

Dave Kane
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed Mar 13 17:17:40 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 13 Mar 2002 17:17:40 +0000 (GMT)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
In-Reply-To: <Pine.A41.4.44.0203130901320.83416-100000@homer34.u.washington.edu>
Message-ID: <Pine.LNX.4.31.0203131713490.5107-100000@gannet.stats>

Read the subject again, please.

pbinom(2, size=4.1, p=0.5)

makes no sense, but R 1.4.1 gave the result for (2, 4, 0.5) (and S+6 gives
NA).

On Wed, 13 Mar 2002, Thomas Lumley wrote:

> On Wed, 13 Mar 2002 ripley@stats.ox.ac.uk wrote:
>
> > Fixed for 1.5.0.  Note that pbinom and qbinom did it too.
> >
>
> But isn't it right for pbinom and qbinom to do it?  P(X<=4.5) is a
> perfectly reasonable quantity and is equal to P(X<=4) if X is binomial and
> (with rounding the other way) the same for quantile functions.
>
> dbinom, OTOH, is a density wrt counting measure and is not defined for
> non-integers (though one could make a case for zero).
>
> 	-thomas
>
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed Mar 13 17:23:39 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 13 Mar 2002 09:23:39 -0800 (PST)
Subject: [Rd] rbinom silently rounds size argument (PR#1377)
In-Reply-To: <Pine.LNX.4.31.0203131713490.5107-100000@gannet.stats>
Message-ID: <Pine.A41.4.44.0203130923260.83416-100000@homer34.u.washington.edu>

On Wed, 13 Mar 2002 ripley@stats.ox.ac.uk wrote:

> Read the subject again, please.
>

Yes. Of course. Sorry.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Wed Mar 13 18:05:14 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Wed, 13 Mar 2002 13:05:14 -0500
Subject: [Rd] Commas in formatC
Message-ID: <15503.38106.38626.976198@gargle.gargle.HOWL>

formatC() is great for formatting numbers!  But it would be even better if it
could optionally insert commas (or semicolons), e.g.
 R> formatC(1234567.89, digits=2, format="f", commas=T)
    [1] "1,234,567.89"

Here's a snippet of code that does that, which could more or less just be
inserted into at the end of formatC if any R-core guru were so inclined.  "r"
is the result so far, and "commas" is a logical flag:

  stp <- regexpr("[0-9]+", r);  len <- attr(stp, "match.length")
  if (commas && (maxl <- max(len)) > 3) for (i in seq(3, maxl-1, 3))
    r[len>i] <- paste(substring(r[len>i], 1, (stp+len-1-i)[len>i]),
                      substring(r[len>i], (stp+len-i)[len>i]), sep=",")
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed Mar 13 19:53:59 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Wed, 13 Mar 2002 14:53:59 -0500 (EST)
Subject: [Rd] using R API in dynamically loaded code?
Message-ID: <Pine.LNX.4.30.0203131451540.25505-100000@bolker.zoo.ufl.edu>


  Brian Ripley pointed out that I neglected to

#include <Rmath.h>

(which of course is right there in the documentation).  Ooops.

  It all works fine now (I still have the completely separate problem that
generating gamma variates with small shape parameters underflows to zero a
lot of the time, but that seems to be my problem rather than R's problem).

  thanks,
    Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From patrick.lindsey@luc.ac.be  Thu Mar 14 11:16:34 2002
From: patrick.lindsey@luc.ac.be (Patrick Lindsey)
Date: Thu, 14 Mar 2002 12:16:34 +0100 (MET)
Subject: [Rd] Row-binding factor variables looses the ordered attribute.
Message-ID: <200203141116.MAA27679@luc.ac.be>

Hi everyone,
  I've just notice a problem with ordered factor variables. It appears
that row-binding two ordered factors together looses the ordered
attribute. The following example happens both in R1.3.1 and R1.4.1 (on
RedHat 7.2):

> y <- ordered(gl(3,6),labels=1:3)
> y
 [1] 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3
Levels:  1 < 2 < 3
> data <- data.frame(y=ordered(gl(3,6),labels=1:3))
> data[,1]    
 [1] 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3
Levels:  1 < 2 < 3 
> rbind(data,data)[,1]
 [1] 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3 1 1 1 1 1 1 2 2 2 2 2 2 3 3 3 3 3 3
Levels:  1 2 3

I've also noticed a change of behavior, between R1.3.1 and R1.4.1, in the
way some covariate names are constructed. This is really a minor comment
but this change in behavior seems unnecessary and complicates the retrieval
of coefficients using the covariate's name. For example, fitting the
following glm model in R1.3.1 results in

> data <- data.frame(y=rnorm(20),cov=gl(4,5))
> glm(y~I(cov!=2),data=data)

Call:  glm(formula = y ~ I(cov != 2), data = data)

Coefficients:
(Intercept)  I(cov != 2)
     0.8009      -0.7547

Degrees of Freedom: 19 Total (i.e. Null);  18 Residual
Null Deviance:      16.34
Residual Deviance: 14.21        AIC: 55.92

whereas with R1.4.1 we now get

> data <- data.frame(y=rnorm(20),cov=gl(4,5))
> glm(y~I(cov!=2),data=data)

Call:  glm(formula = y ~ I(cov != 2), data = data) 

Coefficients:
    (Intercept)  I(cov != 2)TRUE  
         0.4570          -0.7629  

Degrees of Freedom: 19 Total (i.e. Null);  18 Residual
Null Deviance:      24.39 
Residual Deviance: 22.2         AIC: 64.85 

The covariate name "I(cov != 2)" is now (in R1.4.1) appended by the value
TRUE. I think that this must come from "model.matrix" which must be
transforming a boolean vector into a factor variable (which I would guess
is not really necessary as this is just a binary vector).
  This change of behavior is not really a problem in itself (if it only
concerns the behavior of "model.matrix") but quite unexpected.
Thanks too all,
Patrick.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar 14 11:38:30 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 14 Mar 2002 11:38:30 +0000 (GMT)
Subject: [Rd] Row-binding factor variables looses the ordered attribute.
In-Reply-To: <200203141116.MAA27679@luc.ac.be>
Message-ID: <Pine.LNX.4.31.0203141135510.8480-100000@gannet.stats>

On Thu, 14 Mar 2002, Patrick Lindsey wrote:

[...]

> The covariate name "I(cov != 2)" is now (in R1.4.1) appended by the value
> TRUE. I think that this must come from "model.matrix" which must be
> transforming a boolean vector into a factor variable (which I would guess
> is not really necessary as this is just a binary vector).
>   This change of behavior is not really a problem in itself (if it only
> concerns the behavior of "model.matrix") but quite unexpected.

It is in the NEWS file ....

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From span@psy.uva.nl  Thu Mar 14 13:09:40 2002
From: span@psy.uva.nl (span@psy.uva.nl)
Date: Thu, 14 Mar 2002 14:09:40 +0100 (MET)
Subject: [Rd] promax (PR#1382)
Message-ID: <200203141309.OAA05371@pubhealth.ku.dk>

Full_Name: mark M. Span
Version: 1.4.1
OS: Windows NT
Submission from: (NULL) (145.18.152.205)


The attribute 'covariances' in the output of promax in the mva package does not
contain the covariances but the inverted correlation matrix of the common
factors following promax rotation.

cheers, MMS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From newsletter@marinedigital.com  Thu Mar 14 13:40:49 2002
From: newsletter@marinedigital.com (newsletter@marinedigital.com)
Date: Thu, 14 Mar 2002 14:40:49 +0100 (MET)
Subject: [Rd] INVITATION - SHIPORT CHINA 2002 (PR#1383)
Message-ID: <200203141340.OAA05707@pubhealth.ku.dk>

<html>
<head>
<title>Marine Digital Newsletter</title>
<link rel="stylesheet" type="text/css" href="http://www.marinedigital.com/css/style_feedback.css">
</head>
<body bgcolor="#FFFFFF" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<div align="center">
<table width="580" border="1" bordercolordark="ffffff" bordercolorlight="#003399" cellspacing="0" cellpadding="0">
<tr>
<td>
<table width="580" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="http://www.marinedigital.com/en/news/img/top_special.gif" width="580" height="51"></td>
</tr>
<tr><td height="1" bgcolor="#f2f2f2"></td></tr>
<tr><td height="3" bgcolor="#9392AE"></td></tr>
<tr><td height="1" bgcolor="#000000"></td></tr>
<tr><td>
<table width="580" border="0" cellspacing="0" cellpadding="0" background="http://www.marinedigital.com/img/bg_l.gif">
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td align="center">
<table width="530" border="0" cellspacing="0" cellpadding="0" bgcolor="#ffffff">
<tr>
<td height="5"></td>
</tr>
<tr>
<td align="center"><img src="http://www.marinedigital.com/en/news/img/invitation.gif" width="140" height="31"></td>
</tr>
<tr>
<td height="5"></td>
</tr>
<tr>
<td align="center"><img src="http://www.marinedigital.com/en/news/img/shiport_title.gif" width="447" height="17"></td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td align="center">
<table width="530" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="530">
<p align="center"><a href="http://www.marinedigital.com/en/shiport/intro.asp"><img border="0" src="http://www.marinedigital.com/en/news/img/shiport_intro.gif" width="530" height="70"></a>&nbsp;</p>
</td>
</tr>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td align="center"><b><font color="#000099">We invite
the leading companies to the Gateway of the East
Maritime World.</font></b></td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td>
<table width="530" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="180"><a href="http://www.marinedigital.com/en/shiport/summary.asp"><img border="0" src="http://www.marinedigital.com/en/news/img/booth02.gif" width="180" height="138"></a></td>
<td width="10" rowspan="2">&nbsp;</td>
<td width="340" rowspan="2">
<table width="340" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="http://www.marinedigital.com/en/news/img/icon.gif" " width="9" height="9">
<b><font color="#cc0000">What is it?</font></b></td>
</tr>
<tr>
<td height="8"></td>
</tr>
<tr>
<td style="padding-top: 3; padding-bottom: 3">If
you plan to be an exhibitor of&nbsp; Shiport China, which
has grown just in three years as the
largest maritime event in China. In 2000,
over 200 exhibitors and 25,000 visitors
met and did business on this one-stop
platform, a sharp rise if 82% and 66%
respectively compared with its '98 debut,
highlighting the steering role of the
Exhibition in the industry.</td>
</tr>
<tr>
<td height="5"></td>
</tr>
<tr>
<td style="padding-top: 3; padding-bottom: 3">Among the visitors, over 70% visitors
were management executives and engineers
from container terminals, shipyards, ship
repairers, harbors, equipment
manufacturers, and trading firms.<br>
It is easier for you to register as an
exhibitor through on-line on our website, <a href="http://www.marinedigital.com">www.marinedigital.com</a></td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td><img src="http://www.marinedigital.com/en/news/img/icon.gif" " width="9" height="9">
<b><font color="#cc0000">What to do</font></b></td>
</tr>
<tr>
<td height="8"></td>
</tr>
<tr>
<td>Hurry up. Do not miss the opportunity
that will make you become world-class maritime
business.&nbsp;</td>
</tr>
</table>
</td>
</tr>
<tr>
<td width="180"><a href="http://www.marinedigital.com/en/shiport/organizers.asp"><img border="0" src="http://www.marinedigital.com/en/news/img/booth03.gif" width="180" height="139"></a></td>
</tr>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td>
<table width="530" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="340">
<table width="340" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="15" align="center"><img src="http://www.marinedigital.com/en/news/img/icon.gif" " width="9" height="9">
</td>
<td width="325"><b><font color="#cc0000"><a href="http://www.marinedigital.com/en/shiport/booth.asp">Booth
Configuration</a></font></b></td>
</tr>
<tr>
<td align="center" height="8"></td>
<td height="8"></td>
</tr>
<tr>
<td align="center">&nbsp;</td>
<td>Expanded to an exhibition area of more
than 20,000 sq.m., Shiport China 2002 is
set to meet your every aggressive
marketing need.<br>
A trend-setter in the maritime industry,
Shiport China 2002 generates a complete
overview on the latest development of the
market :</td>
</tr>
<tr>
<td align="center" height="8"></td>
<td height="8"></td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Shipbuilding</td>
</tr>
<tr>
<td align="center" height="5"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Marine Technology</td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Port Industry</td>
</tr>
<tr>
<td align="center" height="5"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Transportation Equipment</td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Naval Supplies</td>
</tr>
<tr>
<td align="center" height="5"></td>
<td><img src="http://www.marinedigital.com/img/square_s.gif" width="10" height="10">
Related Equipment</td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td></td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><b><font color="#fd651d">- Space Only</font></b></td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td>For exhibitors who wish to design and
build their own booths. (minimum 27 sq.m.)</td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td><b><font color="#fd651d">- Shell Scheme</font></b></td>
</tr>
<tr>
<td align="center" valign="top"></td>
<td>Exhibitors will be provided with
ready-to-display facilities. (minimum 9
sq.m.)</td>
</tr>
</table>
</td>
<td width="10">&nbsp;</td>
<td width="180"><a href="http://www.marinedigital.com/en/shiport/general.asp" target="_blank"><img src="http://www.marinedigital.com/en/news/img/dalian.gif"  border="0" width="180" height="180"></a></td>
</tr>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td>
<table width="530" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="100" valign="bottom"><img src="http://www.marinedigital.com/en/news/img/img.jpg" width="100" height="140" ></td>
<td width="10">&nbsp;</td>
<td width="310">&nbsp;&nbsp;&nbsp;&nbsp;<img src="http://www.marinedigital.com/en/news/img/icon.gif" " width="9" height="9">
<b><font color="#cc0000">Great Opportunity</font><font color="#990000">
</font></b>
<table width="310" border="0" cellspacing="0" cellpadding="0">
<tr>
<td height="8"></td>
</tr>
<tr>
<td>
<p align="left" style="margin-left:15px;">Come
and embrace the exhibition as an opportunity
to approach the Gateway to the East maritime
World,
especially Shipbuilding, Port Industry
and Related Equipment. Don't miss the best chance to
inform you of business competence to maritime
elites.
</td>
</tr>
<tr>
<td height="5"></td>
</tr>
<tr>
<td><p align="left" style="margin-left:15px;">If you need any other questions or
inquiries,
please send e-mail at</td>
</tr>
<tr>
<td height="5"></td>
</tr>
<tr>
<td><p align="center"><b>James Song,
Executive Director </b>(<a href="mailto:jbsong@marinedigital.com">jbsong@marinedigitial.com</a>)</td>
</tr>
</table>
</td>
<td width="2">&nbsp;</td>
<td width="108" valign="bottom"><a href="http://www.marinedigital.com/en/shiport/registration.asp" target="_blank"><img src="http://www.marinedigital.com/en/news/img/register_online.gif" border="0" width="108" height="150"></a></td>
</tr>
</table>
</td>
</tr>
<tr>
<td style="padding-top: 10; padding-bottom: 10">
<p align="center"><b><font color="#0000FF">We look
forward to welcoming you to the exhibition.</font></b></td>
</tr>
</table>
</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
</table>
</td></tr>
<tr><td height="1" bgcolor="#003399"></td></tr>
<tr>
<td bgcolor="#f3f3f6" align="center">
<table width="520" border="0" cellspacing="0" cellpadding="0">
<tr>
<td align="center"><font color="#003399">President &amp; CEO,
Terry Kim is responsible for VOICE OF CUSTOMER</font></td>
</tr>
<tr>
<td align="center"><font color="#003399">( e-Mail : <a href="mailto:terry@marinedigital.com">terry@marinedigital.com</a>
)</font></td>
</tr>
<tr>
<td align="center"><font color="#003399">Tel : 82-2-966-6701,
Fax : 82-2-966-6703, URL : <a href="http://www.marinedigital.com" target="_blank">www.marinedigital.com</a></font></td>
</tr>
</table>
</td>
</tr>
</table>
</td>
</tr>
</table>
</div>
</body>
</html>

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Thu Mar 14 14:21:04 2002
From: egonw@sci.kun.nl (egonw@sci.kun.nl)
Date: Thu, 14 Mar 2002 15:21:04 +0100 (MET)
Subject: [Rd] KDE frontend (PR#1384)
Message-ID: <200203141421.PAA06318@pubhealth.ku.dk>

Full_Name: Egon Willighagen
Version: 1.4.x
OS: Linux/Solaris
Submission from: (NULL) (131.174.179.30)


I would like to have an gui for KDE (like gnome).

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 14 14:46:17 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 2002 15:46:17 +0100
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <200203141421.PAA06318@pubhealth.ku.dk>
References: <200203141421.PAA06318@pubhealth.ku.dk>
Message-ID: <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>

egonw@sci.kun.nl writes:

> Full_Name: Egon Willighagen
> Version: 1.4.x
> OS: Linux/Solaris
> Submission from: (NULL) (131.174.179.30)
> 
> 
> I would like to have an gui for KDE (like gnome).

This is hardly a bug, so you might have put "wishlist" or so in the
subject. On the other hand it is fairly useful to file enhancement
requests too.

However, this is a bit of a mouthful to implement. Do you have a
handle on how to go about it? Contributions are welcome...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Thu Mar 14 14:58:47 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Thu, 14 Mar 2002 15:58:47 +0100
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>
References: <200203141421.PAA06318@pubhealth.ku.dk> <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>
Message-ID: <200203141458.g2EEwmB02843@wn1.sci.kun.nl>

On Thursday 14 March 2002 15:46, Peter Dalgaard BSA wrote:
> egonw@sci.kun.nl writes:
> > Full_Name: Egon Willighagen
> > Version: 1.4.x
> > OS: Linux/Solaris
> > Submission from: (NULL) (131.174.179.30)
> >
> >
> > I would like to have an gui for KDE (like gnome).
>
> This is hardly a bug, so you might have put "wishlist" or so in the
> subject. On the other hand it is fairly useful to file enhancement
> requests too.

It was intended a wishlist bug... The bug submit page [1] did not ask
a bug level, and I assumed it was going to be asked in a subsequent
page... my apologies.

I cannot change the status myself... but it should indeed be wishlist.

> However, this is a bit of a mouthful to implement. Do you have a
> handle on how to go about it? Contributions are welcome...

At this time I do not know how to write a KDE frontend, but once I have some 
more insight I will share this info.... i can send such info to which email 
address to automatically have it included in the bug archive?

Egon

1. http://r-bugs.biostat.ku.dk/cgi-bin/R
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Thu Mar 14 15:06:19 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Thu, 14 Mar 2002 09:06:19 -0600
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <200203141421.PAA06318@pubhealth.ku.dk>
References: <200203141421.PAA06318@pubhealth.ku.dk>
Message-ID: <20020314150619.GA12205@sonny.eddelbuettel.com>

On Thu, Mar 14, 2002 at 03:21:04PM +0100, egonw@sci.kun.nl wrote:
> Full_Name: Egon Willighagen
> Version: 1.4.x
> OS: Linux/Solaris
> Submission from: (NULL) (131.174.179.30)
> 
> 
> I would like to have an gui for KDE (like gnome).

Great. 

You know which address you need to send code contributions too, don't you?  
Money might be accepted too so that we can hire a programmer if you are
short of time yourself.

Oh, and I would like a BMW motorcycle. Where do I file that bug report?

Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 14 15:19:41 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 2002 16:19:41 +0100
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <200203141458.g2EEwmB02843@wn1.sci.kun.nl>
References: <200203141421.PAA06318@pubhealth.ku.dk>
 <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>
 <200203141458.g2EEwmB02843@wn1.sci.kun.nl>
Message-ID: <x2bsdrxjle.fsf@blueberry.kubism.ku.dk>

"E.L. Willighagen" <egonw@sci.kun.nl> writes:

> At this time I do not know how to write a KDE frontend, but once I have some 
> more insight I will share this info.... i can send such info to which email 
> address to automatically have it included in the bug archive?

For small notes, you can follow up on this report, just make sure
that the subject line has "(PR#1384)" in it. 

If it gets excessive (it likely will...) there's the r-devel mailing
list for discussions of the development plans and process.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Thu Mar 14 15:22:01 2002
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Thu, 14 Mar 2002 10:22:01 -0500
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Thu, Mar 14, 2002 at 03:46:17PM +0100
References: <200203141421.PAA06318@pubhealth.ku.dk> <x2k7sfxl52.fsf@blueberry.kubism.ku.dk>
Message-ID: <20020314102201.D15816@jessie.research.bell-labs.com>

Peter Dalgaard BSA wrote:
> egonw@sci.kun.nl writes:
> 
> > Full_Name: Egon Willighagen
> > Version: 1.4.x
> > OS: Linux/Solaris
> > Submission from: (NULL) (131.174.179.30)
> > 
> > 
> > I would like to have an gui for KDE (like gnome).
> 
> ...
> However, this is a bit of a mouthful to implement. Do you have a
> handle on how to go about it? Contributions are welcome...
> 

Just thought I'd add this for the record.....

As a general strategy for building GUIs for use in R, I believe it
will be much more beneficial to do this in two steps:

   a) create a set of R-language bindings to the GUI toolkit 
      of interest (Qt in this case)
   b) build one or more GUIs for R in the R language.

The obvious benefits are that i) we can use the bindings to write
other GUIs, and ii) more people can adapt the GUI code to create their
own customized version(s).  This hopefully avoids us creating "the" R
GUI containing an interface to every function known to mankind!  A
third benefit is that perhaps the GUI design can be more readily
adapted for different toolkits (e.g. Gtk, Qt, wxWindows, MFC, etc.)

We already have bindings for several toolkits: the tcltk package to
Tk, RGtk for Gtk/Gnome, (a recently more stable) SJava for Swing/AWT.
The SWIG, the RGtk package, etc. might provide a place to look for
automating the bindings to Qt.

The KDE toolkit, Qt, is C++ which makes it slightly more tricky to
handle. But there are C bindings for it.





> -- 
>    O__  ---- Peter Dalgaard             Blegdamsvej 3  
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
_______________________________________________________________

Duncan Temple Lang                duncan@research.bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-3217
700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
Murray Hill, NJ  07974-2070       
         http://cm.bell-labs.com/stat/duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Thu Mar 14 15:40:24 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Thu, 14 Mar 2002 16:40:24 +0100
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <20020314150619.GA12205@sonny.eddelbuettel.com>
References: <200203141421.PAA06318@pubhealth.ku.dk> <20020314150619.GA12205@sonny.eddelbuettel.com>
Message-ID: <200203141540.g2EFePB14412@wn1.sci.kun.nl>

On Thursday 14 March 2002 16:06, Dirk Eddelbuettel wrote:
> On Thu, Mar 14, 2002 at 03:21:04PM +0100, egonw@sci.kun.nl wrote:
> > Full_Name: Egon Willighagen
> > Version: 1.4.x
> > OS: Linux/Solaris
> > Submission from: (NULL) (131.174.179.30)
> >
> >
> > I would like to have an gui for KDE (like gnome).
>
> Great.
>
> You know which address you need to send code contributions too, don't you?
> Money might be accepted too so that we can hire a programmer if you are
> short of time yourself.

I like this kind of sarcasm... But you understand that I am probably not the 
only one interested in this... Moreover, a note (read: wishlist bug) on such 
a request does not mean it has to be implemented (at once/any time). It is 
just a note that people are/i am interested in it...

> Oh, and I would like a BMW motorcycle. Where do I file that bug report?

What about http://www.bmwusacycles.com/lit_request.html?

Egon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Thu Mar 14 18:57:42 2002
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Thu, 14 Mar 2002 13:57:42 -0500 (EST)
Subject: [Rd] KDE frontend (PR#1384)
In-Reply-To: <20020314102201.D15816@jessie.research.bell-labs.com>
Message-ID: <Pine.GSO.4.10.10203141343460.4473-100000@hsph.harvard.edu>

On Thu, 14 Mar 2002, Duncan Temple Lang wrote:

> Peter Dalgaard BSA wrote:
> > egonw@sci.kun.nl writes:
> > 
> > > Full_Name: Egon Willighagen
> > > Version: 1.4.x
> > > OS: Linux/Solaris
> > > Submission from: (NULL) (131.174.179.30)
> > > 
> > > 
> > > I would like to have an gui for KDE (like gnome).
> > 
> > ...
> > However, this is a bit of a mouthful to implement. Do you have a
> > handle on how to go about it? Contributions are welcome...
> > 
> 
> Just thought I'd add this for the record.....
> 
> As a general strategy for building GUIs for use in R, I believe it
> will be much more beneficial to do this in two steps:
> 
>    a) create a set of R-language bindings to the GUI toolkit 
>       of interest (Qt in this case)
>    b) build one or more GUIs for R in the R language.
> 
> The obvious benefits are that i) we can use the bindings to write
> other GUIs, and ii) more people can adapt the GUI code to create their
> own customized version(s).  This hopefully avoids us creating "the" R
> GUI containing an interface to every function known to mankind!  A
> third benefit is that perhaps the GUI design can be more readily
> adapted for different toolkits (e.g. Gtk, Qt, wxWindows, MFC, etc.)

To toss in my $.02--it seems to me that it would be nice to push the GUIs
(or any interface) "out of the core" s.t. GUIs are basically creating an R
context just like any other embedding program. For most GUIs the main
executable (if I understand Duncan's comments correctly) would mostly be a
stub to get the GUI moving inside of the package that actually implements
the GUI itself (allowing for more control over the GUI from the R
environment---dynamic menus, etc, etc). Alternatively, there could be a
generalized GUI interface whose C interface is implemented by the main
executable and then registered (now that registration is nice)---this is
probably the more difficult route and perhaps the more limiting route in
the long run (various GUIs may have various nice features).

> 
> We already have bindings for several toolkits: the tcltk package to
> Tk, RGtk for Gtk/Gnome, (a recently more stable) SJava for Swing/AWT.
> The SWIG, the RGtk package, etc. might provide a place to look for
> automating the bindings to Qt.
> 
> The KDE toolkit, Qt, is C++ which makes it slightly more tricky to
> handle. But there are C bindings for it.

Well, it could be an ObjC binding :-)

> 
> 
> 
> 
> 
> > -- 
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3  
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> _______________________________________________________________
> 
> Duncan Temple Lang                duncan@research.bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-3217
> 700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
> Murray Hill, NJ  07974-2070       
>          http://cm.bell-labs.com/stat/duncan
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Thu Mar 14 18:58:45 2002
From: bellis@hsph.harvard.edu (bellis@hsph.harvard.edu)
Date: Thu, 14 Mar 2002 19:58:45 +0100 (MET)
Subject: [Rd] KDE frontend (PR#1384)
Message-ID: <200203141858.TAA08022@pubhealth.ku.dk>

On Thu, 14 Mar 2002, Duncan Temple Lang wrote:

> Peter Dalgaard BSA wrote:
> > egonw@sci.kun.nl writes:
> > 
> > > Full_Name: Egon Willighagen
> > > Version: 1.4.x
> > > OS: Linux/Solaris
> > > Submission from: (NULL) (131.174.179.30)
> > > 
> > > 
> > > I would like to have an gui for KDE (like gnome).
> > 
> > ...
> > However, this is a bit of a mouthful to implement. Do you have a
> > handle on how to go about it? Contributions are welcome...
> > 
> 
> Just thought I'd add this for the record.....
> 
> As a general strategy for building GUIs for use in R, I believe it
> will be much more beneficial to do this in two steps:
> 
>    a) create a set of R-language bindings to the GUI toolkit 
>       of interest (Qt in this case)
>    b) build one or more GUIs for R in the R language.
> 
> The obvious benefits are that i) we can use the bindings to write
> other GUIs, and ii) more people can adapt the GUI code to create their
> own customized version(s).  This hopefully avoids us creating "the" R
> GUI containing an interface to every function known to mankind!  A
> third benefit is that perhaps the GUI design can be more readily
> adapted for different toolkits (e.g. Gtk, Qt, wxWindows, MFC, etc.)

To toss in my $.02--it seems to me that it would be nice to push the GUIs
(or any interface) "out of the core" s.t. GUIs are basically creating an R
context just like any other embedding program. For most GUIs the main
executable (if I understand Duncan's comments correctly) would mostly be a
stub to get the GUI moving inside of the package that actually implements
the GUI itself (allowing for more control over the GUI from the R
environment---dynamic menus, etc, etc). Alternatively, there could be a
generalized GUI interface whose C interface is implemented by the main
executable and then registered (now that registration is nice)---this is
probably the more difficult route and perhaps the more limiting route in
the long run (various GUIs may have various nice features).

> 
> We already have bindings for several toolkits: the tcltk package to
> Tk, RGtk for Gtk/Gnome, (a recently more stable) SJava for Swing/AWT.
> The SWIG, the RGtk package, etc. might provide a place to look for
> automating the bindings to Qt.
> 
> The KDE toolkit, Qt, is C++ which makes it slightly more tricky to
> handle. But there are C bindings for it.

Well, it could be an ObjC binding :-)

> 
> 
> 
> 
> 
> > -- 
> >    O__  ---- Peter Dalgaard             Blegdamsvej 3  
> >   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
> >  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> > ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> > -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> > r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> > Send "info", "help", or "[un]subscribe"
> > (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> > _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 
> -- 
> _______________________________________________________________
> 
> Duncan Temple Lang                duncan@research.bell-labs.com
> Bell Labs, Lucent Technologies    office: (908)582-3217
> 700 Mountain Avenue, Room 2C-259  fax:    (908)582-3340
> Murray Hill, NJ  07974-2070       
>          http://cm.bell-labs.com/stat/duncan
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


Byron Ellis (bellis@hsph.harvard.edu)
"Oook" - The Librarian

Please finger bellis@hsph.harvard.edu for PGP keys




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eneafse@lumc.edu  Thu Mar 14 20:05:43 2002
From: eneafse@lumc.edu (eneafse@lumc.edu)
Date: Thu, 14 Mar 2002 21:05:43 +0100 (MET)
Subject: [Rd] "evaluating expression 0" bug in R-1.4.1 (PR#1385)
Message-ID: <200203142005.VAA08230@pubhealth.ku.dk>

Full_Name: Edward J. Neafsey 
Version: 1.4.1
OS: linux
Submission from: (NULL) (147.126.192.93)


R-1.4.1 failed to finish compiling building package `methods', as seen in
output from make below.
============================================================================
Make output:
../../../library/methods/man/methods.Rd is unchanged
make[4]: Entering directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[5]: Entering directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[5]: `Makedeps' is up to date.
make[5]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[5]: Entering directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
../../../../library/methods/libs/methods.so is unchanged
make[5]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[4]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods/src'
make[4]: Entering directory `/usr/src/SOURCES/R-1.4.1/src/library/methods'
dumping R code in package `methods'
Error: syntax error: evaluating expression 0
Execution halted
make[4]: *** [../../../library/methods/R/all.rda] Error 1
make[4]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods'
make[3]: *** [all] Error 2
make[3]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library/methods'
make[2]: *** [R] Error 1
make[2]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src/library'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/usr/src/SOURCES/R-1.4.1/src'
make: *** [R] Error 1 


When I examined things further, it became clear problem was in new R.bin 
file, since after exporting the proper value for R_HOME, running just R.bin
by itself caused the same "evaluating expression 0" error, as seen below.
========================================================================
R.bin by itself output
[/usr/src/SOURCES/R-1.4.1/bin]# export R_HOME=/usr/src/SOURCES/R-1.4.1
[/usr/src/SOURCES/R-1.4.1/bin]# ./R.bin

R : Copyright 2002, The R Development Core Team
Version 1.4.1 Patched (2002-03-13)

R is free software and comes with ABSOLUTELY NO WARRANTY.
You are welcome to redistribute it under certain conditions.
Type `license()' or `licence()' for distribution details.

R is a collaborative project with many contributors.
Type `contributors()' for more information.

Type `demo()' for some demos, `help()' for on-line help, or
`help.start()' for a HTML browser interface to help.
Type `q()' to quit R.

Error: syntax error: evaluating expression 0
Error: syntax error: evaluating expression 0
> 

This happened even if run with --vanilla.  Interestingly, removing the 
Rprofile file removed one of the two "Error: syntax error:..." messages.

I have been successfully compiling R through a number of versions, and
this is first time I have had a real problem.

Thanks for R.

E.J. Neafsey
eneafse@lumc.edu



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu Mar 14 22:35:14 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 14 Mar 2002 23:35:14 +0100
Subject: [Rd] "evaluating expression 0" bug in R-1.4.1 (PR#1385)
In-Reply-To: <200203142005.VAA08230@pubhealth.ku.dk>
References: <200203142005.VAA08230@pubhealth.ku.dk>
Message-ID: <x2it7ypyl9.fsf@blueberry.kubism.ku.dk>

eneafse@lumc.edu writes:

> Full_Name: Edward J. Neafsey 
> Version: 1.4.1
> OS: linux

Which one? Distrib./compiler set? Given the number of Linux systems
among the core developers, it seems rather unlikely that R-patched
would be broken on all all of them without anyone noticing... 

It does build OK for me.

> Submission from: (NULL) (147.126.192.93)
> 
> 
> R-1.4.1 failed to finish compiling building package `methods', as seen in
> output from make below.
> ============================================================================
> dumping R code in package `methods'
> Error: syntax error: evaluating expression 0
> Execution halted
...
> When I examined things further, it became clear problem was in new R.bin 
> file, since after exporting the proper value for R_HOME, running just R.bin
> by itself caused the same "evaluating expression 0" error, as seen below.
> ========================================================================
...
> Type `q()' to quit R.
> 
> Error: syntax error: evaluating expression 0
> Error: syntax error: evaluating expression 0
> > 
> 
> This happened even if run with --vanilla.  Interestingly, removing the 
> Rprofile file removed one of the two "Error: syntax error:..." messages.

This could come from a corrupted base package. You'd have to track it
down a bit further though. Binary search on the library/base/R/base
file is a possibility. Or you might try sourcing the file with echo=T.

Are you sure you are doing a clean build? Delete config.cache, make
clean, etc.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tplate@blackmesacapital.com  Fri Mar 15 04:59:03 2002
From: tplate@blackmesacapital.com (Tony Plate)
Date: Thu, 14 Mar 2002 21:59:03 -0700
Subject: [Rd] two minor differences in behavior of R and S-plus
Message-ID: <5.1.0.14.2.20020313175440.038cee98@a.paloma.com>

I found two minor differences when porting some S-plus code to R (the code 
was written for Splus 3.5 Unix).

(1) The function c(), when applied to a name and a character, under S-plus 
coerces the name to character data and returns a vector of character data, 
but in R returns a list containing both objects intact

(2) The call match.call(expand.dots=F) returns an object that behaves 
differently: under S-plus it is a call object with a "list" functor, under 
R it is an ordinary list with no "list" functor.  (e.g., 
as.character(match.call(expand.dots=F)$...) under S-plus has 
length(list(...))+1 elements, of which the first is "list", but under R it 
has just length(list(...)) elements)

Example of (1)

under R (both 1.5 and 1.4.1):

 > c("foo", as.name("bar"))
[[1]]
[1] "foo"

[[2]]
bar

under S-plus 6.0 (and earlier, I believe)

 > c("foo", as.name("bar"))
[1] "foo" "bar"

[I would agree that it is unclear what the most desirable behavior is, and 
would also agree that clean code would do an as.character() on a name 
before attempting to concatenate it with character data - I changed my code 
to do this.]

Example of (2)

Under R 1.4.1:
 > (function(...)browser())(x=1,y=2)
Called from: (function(...) browser())(x = 1, y = 2)
Browse[1]> match.call(expand.dots=F)
(function(...) browser())(... = list(x = 1, y = 2))
Browse[1]> match.call(expand.dots=F)$...
$x
[1] 1

$y
[1] 2

Browse[1]> is.call(match.call(expand.dots=F)$...)
[1] FALSE
Browse[1]> names(match.call(expand.dots=F)$...)
[1] "x" "y"
Browse[1]> as.character(match.call(expand.dots=F)$...)
[1] "1" "2"


Under S-plus 6.0:
 > (function(...)browser())(x=1,y=2)
Called from: (function(...)  browser())....
b()> match.call(expand.dots=F)
(function(...)
browser())(... = list(x = 1, y = 2))
b()> match.call(expand.dots=F)$...
list(x = 1, y = 2)
b()> is.call(match.call(expand.dots=F)$...)
[1] T
b()> names(match.call(expand.dots=F)$...)
[1] ""  "x" "y"
b()> as.character(match.call(expand.dots=F)$...)
[1] "list" "1"    "2"


(Feel free to let me know whether or not minor incompatibilities like this 
are of interest to the R-developers -- I don't know to what degree people 
are trying to make R compatible with S-plus.)

-- Tony Plate

 > version
          _
platform i386-pc-mingw32
arch     x86
os       Win32
system   x86, Win32
status
major    1
minor    4.1
year     2002
month    01
day      30
language R
 > 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Thu Mar 14 16:09:46 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Thu, 14 Mar 2002 17:09:46 +0100
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <15503.35051.255583.275317@gargle.gargle.HOWL>
References: <15503.35051.255583.275317@gargle.gargle.HOWL>
Message-ID: <15504.52042.451614.174105@mithrandir.hornik.net>

>>>>> "David Kane writes:

> I think that I understand why R CMD check should warn if the
> permissions on a file are too restrictive, but I don't understand why
> it should warn if they are "too" loose. On UNIX, why is a file with
> 644 OK, but one with 664 (just adding group writability) problematic
> enough to require a warning?

I think we want the *installed* files to be 644 and dirs to be 755 (by
default).  Can we be sure that all routes to installing a package (as
source or binary) lead to this even if permissions originally were too
loose?  I don't, hence I prefer being on the defensive side.

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 15 08:07:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 15 Mar 2002 08:07:35 +0000 (GMT)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <15504.52042.451614.174105@mithrandir.hornik.net>
Message-ID: <Pine.LNX.4.31.0203150758090.18980-100000@gannet.stats>

On Thu, 14 Mar 2002, Kurt Hornik wrote:

> >>>>> "David Kane writes:
>
> > I think that I understand why R CMD check should warn if the
> > permissions on a file are too restrictive, but I don't understand why
> > it should warn if they are "too" loose. On UNIX, why is a file with
> > 644 OK, but one with 664 (just adding group writability) problematic
> > enough to require a warning?
>
> I think we want the *installed* files to be 644 and dirs to be 755 (by
> default).  Can we be sure that all routes to installing a package (as
> source or binary) lead to this even if permissions originally were too
> loose?  I don't, hence I prefer being on the defensive side.

There is an assumption that

umask 022

in INSTALL (on Unix-alikes) actually works.  If so, installing from source
should work.  You can't be sure about binary packages: they might not be
installed by INSTALL.

I don't see this.  We do not insist that R itself is installed as
world-readable, and I don't see why we should be doing so for packages.
Further, it would be convenient to have installed packages
group-writeable, as then anyone in the group can run update.packages().

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Mar 15 10:01:44 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 15 Mar 2002 10:01:44 +0000
Subject: [Rd] Thought on crossprod
Message-ID: <3C91C688.E297B0FE@durham.ac.uk>

Hi everyone,

I do a lot of work with large variance matrices, and I like to use
"crossprod" for speed and to keep everything symmetric, i.e. I often
compute "crossprod(Q %*% t(A))" for "A %*% Sigma %*% t(A)", where
"Sigma" decomposes as "t(Q) %*% Q".  I notice in the code that
"crossprod", current definition

> crossprod
function (x, y = x) 
.Internal(crossprod(x, y))

does not recognise the case where y is the same as x as special.  I'd
like to extend crossprod to something like

> crossprod
function(x, y = NULL)
if (is.null(y))
  .Internal(crossprod.symm(x))
else
  .Internal(crossprod(x, y))

Before I start mesing up my R-1.4.1 installation, does anyone have any
thoughts on this?

Cheers, Jonathan.
-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Mar 15 13:45:24 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 15 Mar 2002 14:45:24 +0100
Subject: [Rd] Thought on crossprod
In-Reply-To: <3C91C688.E297B0FE@durham.ac.uk>
References: <3C91C688.E297B0FE@durham.ac.uk>
Message-ID: <15505.64244.865792.272476@gargle.gargle.HOWL>

>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> Hi everyone, I do a lot of work with large variance
    JonR> matrices, and I like to use "crossprod" for speed and
    JonR> to keep everything symmetric, i.e. I often compute
    JonR> "crossprod(Q %*% t(A))" for "A %*% Sigma %*% t(A)",
    JonR> where "Sigma" decomposes as "t(Q) %*% Q".  I notice in
    JonR> the code that "crossprod", current definition

    >> crossprod
    JonR> function (x, y = x) 
    JonR> .Internal(crossprod(x, y))

    JonR> does not recognise the case where y is the same as x as special.  I'd
    JonR> like to extend crossprod to something like

    >> crossprod
    JonR> function(x, y = NULL)
    JonR> if (is.null(y))
    JonR>    .Internal(crossprod.symm(x))
    JonR> else
    JonR>    .Internal(crossprod(x, y))

    JonR> Before I start mesing up my R-1.4.1 installation, does anyone have any
    JonR> thoughts on this?

Just for clarification:
The main point of your suggestion is to pass only half as much
data down to C, right?

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Mar 15 15:06:51 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 15 Mar 2002 10:06:51 -0500 (EST)
Subject: [Rd] Re: [R] persp(): add second plane
In-Reply-To: <3C91B04E.9004F81@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.30.0203151003270.20916-100000@bolker.zoo.ufl.edu>


  [forwarded to R-devel]

  I'm most interested in integrating persp() and scatterplot3d() so that
we can (e.g.) easily draw graphs like response surfaces with associated
points (yes, there are serious questions about whether 3d perspective
plots are good general tools for data presentation, but there are some
places where it's really useful).  I can think of a bunch of quick hacks,
but I don't really know how an integrated system should be designed for
consistency and ease of use.

  Ben

On Fri, 15 Mar 2002, Uwe Ligges wrote:

> Henrik Bengtsson wrote:
> >
> > Hmm, very interesting. I guess I am not the only one that thought about
> > extending Ben Bolkers idea to plot R^3 data by starting with an empty
> > persp(). Except from the "risk" of plotting outside the bounds of 3d-box
> > created by persp()
>
> Have a look into the code of the package "scatterplot3d". That "risk" is
> already solved in there and the ideas will also work for your example.
> Also some other generalizations could be adapt for the "persp()-3d"
> case.
>
> > I can't see any problems with this approach. I wrote up
> > some code for a plot3d() and a points3d() method. I have pasted the code at
> > the end and as you see I made the plot3d() code to be almost identical to
> > the one for persp(). First an example how the functions can be used and then
> > the code:
>
> [snip]
>
>
> Uwe Ligges
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-help mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-help-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar 15 15:19:32 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Mar 2002 10:19:32 -0500
Subject: [Rd] File permissions test during R CMD check
References: <Pine.LNX.4.31.0203150758090.18980-100000@gannet.stats>
Message-ID: <3C921104.B7E710E0@bank-banque-canada.ca>


ripley@stats.ox.ac.uk wrote:
>
> There is an assumption that
> 
> umask 022
> 
> in INSTALL (on Unix-alikes) actually works. 

I have discovered that Mandrake 8.1 /etc/bashrc sets the umask for many
users to 002, which is a problem because files extracted from cvs have
group write priviledges. It is fairly easy to fix, once the source of
the problem is recognized. I'm not sure how widespread this is in other
Linux distributions.

Paul Gilbert
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 15 15:22:21 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 15 Mar 2002 15:22:21 +0000 (GMT)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <3C921104.B7E710E0@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0203151521070.25930-100000@gannet.stats>

On Fri, 15 Mar 2002, Paul Gilbert wrote:

>
> ripley@stats.ox.ac.uk wrote:
> >
> > There is an assumption that
> >
> > umask 022
> >
> > in INSTALL (on Unix-alikes) actually works.
>
> I have discovered that Mandrake 8.1 /etc/bashrc sets the umask for many
> users to 002, which is a problem because files extracted from cvs have
> group write priviledges. It is fairly easy to fix, once the source of
> the problem is recognized. I'm not sure how widespread this is in other
> Linux distributions.

Relevance?  INSTALL sets the umask, not uses an existing one.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jgentry@jimmy.harvard.edu  Fri Mar 15 16:05:58 2002
From: jgentry@jimmy.harvard.edu (Jeff Gentry)
Date: Fri, 15 Mar 2002 11:05:58 -0500 (EST)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <3C921104.B7E710E0@bank-banque-canada.ca>
Message-ID: <Pine.SOL.4.20.0203151104150.26946-100000@santiam.dfci.harvard.edu>

> I have discovered that Mandrake 8.1 /etc/bashrc sets the umask for many
> users to 002, which is a problem because files extracted from cvs have

Redhat 7.2 also has a default umask of 002.

-Jeff

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Fri Mar 15 16:16:47 2002
From: ligges@statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 15 Mar 2002 17:16:47 +0100
Subject: [Rd] Re: [R] persp(): add second plane
References: <Pine.LNX.4.30.0203151003270.20916-100000@bolker.zoo.ufl.edu>
Message-ID: <3C921E6F.BB81543B@statistik.uni-dortmund.de>


Ben Bolker wrote:
> 
>   [forwarded to R-devel]
> 
>   I'm most interested in integrating persp() and scatterplot3d() so that
> we can (e.g.) easily draw graphs like response surfaces with associated
> points (yes, there are serious questions about whether 3d perspective
> plots are good general tools for data presentation, but there are some
> places where it's really useful).  I can think of a bunch of quick hacks,
> but I don't really know how an integrated system should be designed for
> consistency and ease of use.


I think it's not possible to write an integrated system that uses the
functions scatterplot3d() and persp() as they are. The straightforward
way, from my point of view, is to write a new function (suggestions for
a name?) along scatterplot3d()'s code, that uses persp() instead of
scatterplot3d()'s own plot function in principle.

I'll volunteer to write such a function during the next months, but
there are still some other points on my todo list (and I myself don't
need such a function at present). 

Uwe


>   Ben
> 
> On Fri, 15 Mar 2002, Uwe Ligges wrote:
> 
> > Henrik Bengtsson wrote:
> > >
> > > Hmm, very interesting. I guess I am not the only one that thought about
> > > extending Ben Bolkers idea to plot R^3 data by starting with an empty
> > > persp(). Except from the "risk" of plotting outside the bounds of 3d-box
> > > created by persp()
> >
> > Have a look into the code of the package "scatterplot3d". That "risk" is
> > already solved in there and the ideas will also work for your example.
> > Also some other generalizations could be adapt for the "persp()-3d"
> > case.
> >
> > > I can't see any problems with this approach. I wrote up
> > > some code for a plot3d() and a points3d() method. I have pasted the code at
> > > the end and as you see I made the plot3d() code to be almost identical to
> > > the one for persp(). First an example how the functions can be used and then
> > > the code:
> >
> > [snip]
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar 15 16:31:35 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 15 Mar 2002 08:31:35 -0800 (PST)
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <Pine.LNX.4.31.0203150758090.18980-100000@gannet.stats>
Message-ID: <Pine.A41.4.44.0203150828500.25112-100000@homer14.u.washington.edu>

On Fri, 15 Mar 2002 ripley@stats.ox.ac.uk wrote:

>
> I don't see this.  We do not insist that R itself is installed as
> world-readable, and I don't see why we should be doing so for packages.
> Further, it would be convenient to have installed packages
> group-writeable, as then anyone in the group can run update.packages().
>

Yes --  and many people would argue that it is positively undesirable for
update.packages() to be run as root even if only one person were to run
it.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri Mar 15 16:42:58 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 15 Mar 2002 08:42:58 -0800 (PST)
Subject: [Rd] Thought on crossprod
In-Reply-To: <15505.64244.865792.272476@gargle.gargle.HOWL>
Message-ID: <Pine.A41.4.44.0203150840250.25112-100000@homer14.u.washington.edu>

On Fri, 15 Mar 2002, Martin Maechler wrote:

> >>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
>
>     JonR> does not recognise the case where y is the same as x as special.  I'd
>     JonR> like to extend crossprod to something like
>
>     >> crossprod
>     JonR> function(x, y = NULL)
>     JonR> if (is.null(y))
>     JonR>    .Internal(crossprod.symm(x))
>     JonR> else
>     JonR>    .Internal(crossprod(x, y))
>
>     JonR> Before I start mesing up my R-1.4.1 installation, does anyone have any
>     JonR> thoughts on this?
>
> Just for clarification:
> The main point of your suggestion is to pass only half as much
> data down to C, right?
>

If this can be done with the BLAS functions then halving the necessary
memory bandwidth will also help -- that's one of the limiting factors in
ATLAS, for example.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 15 17:13:31 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 15 Mar 2002 17:13:31 +0000 (GMT)
Subject: [Rd] Thought on crossprod
In-Reply-To: <Pine.A41.4.44.0203150840250.25112-100000@homer14.u.washington.edu>
Message-ID: <Pine.LNX.4.31.0203151701340.26291-100000@gannet.stats>

On Fri, 15 Mar 2002, Thomas Lumley wrote:

> On Fri, 15 Mar 2002, Martin Maechler wrote:
>
> > >>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
> >
> >     JonR> does not recognise the case where y is the same as x as special.  I'd
> >     JonR> like to extend crossprod to something like
> >
> >     >> crossprod
> >     JonR> function(x, y = NULL)
> >     JonR> if (is.null(y))
> >     JonR>    .Internal(crossprod.symm(x))
> >     JonR> else
> >     JonR>    .Internal(crossprod(x, y))
> >
> >     JonR> Before I start mesing up my R-1.4.1 installation, does anyone have any
> >     JonR> thoughts on this?
> >
> > Just for clarification:
> > The main point of your suggestion is to pass only half as much
> > data down to C, right?
> >
>
> If this can be done with the BLAS functions then halving the necessary
> memory bandwidth will also help -- that's one of the limiting factors in
> ATLAS, for example.

Looks like dsyrk can do this: despite the definition of *sy* BLAS routines
on my quick reference card it does not need a symmetric matrix, which is
why I overlooked it in earlier correspondence with Jonathan.  As from
1.5.0 dsyrk will be available in R.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri Mar 15 17:44:34 2002
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 15 Mar 2002 12:44:34 -0500
Subject: [Rd] File permissions test during R CMD check
References: <Pine.LNX.4.31.0203151521070.25930-100000@gannet.stats>
Message-ID: <3C923302.664FAE6A@bank-banque-canada.ca>

ripley@stats.ox.ac.uk wrote:

> Relevance?  INSTALL sets the umask, not uses an existing one.

Well, if you keep your files in cvs as lots of people do, then R CMD
check gives lots of warnings messages about the file permissions after
you checkout your files with the wrong umask. Not that this in itself is
so bad, but when one gets lots of warning messages all the time then
they often get ignored and the important ones are missed. So I think it
is useful to get the settings right and avoid the warning messages.

Don't get me wrong, I think this is a problem in the Linux
distributions, not in R.

Paul
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Fri Mar 15 22:30:20 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Fri, 15 Mar 2002 17:30:20 -0500
Subject: [Rd] NA in character vectors
Message-ID: <15506.30204.173083.457974@gargle.gargle.HOWL>

Hi all,

While R-1.5.0 is still unfrozen, I'd like to try again to generate interest in
my favorite pet peeve: NA's in character vectors.  Last October I wrote:

> LETTERS[c(NA,2)] in S is c("","B"), but in R is c("NA","B").

We had an interesting discussion then, and I learned (from Duncan Murdoch and
Thomas Lumley) that R does have an internal code for missing char values
(R_NaString), but it gets easily confused with the string "NA".  Check this:

  R> z <- c(LETTERS[c(2,NA)], "NA", paste("NA"))
  R> is.na(z)
     [1] FALSE  TRUE  TRUE FALSE
  R> z[3]==z[4]
     [1] TRUE
  R> z=="NA"
     [1] FALSE  TRUE  TRUE  TRUE

Thomas Lumley <tlumley@u.washington.edu> suggested that this weird behavior
essentially arises because the parser converts "NA" to R_NaString, and so...
> It looks like we basically need to
>  1) stop the parser generating R_NaString from \"NA\"
>  2) Change PRINTNAME(R_NaString) to avoid ambiguity

While I still like the simple S-Plus model (""), Thomas's suggestions (with
PRINTNAME(R_NaString) = "<NA>" for example) would be OK too.  Thanks for
listening (again)!
-- 
                              -- David Brahm (brahm@alum.mit.edu)
"I write this letter not to nag nor to whine, but to prod." - Lisa Simpson
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From edd@debian.org  Sat Mar 16 02:27:33 2002
From: edd@debian.org (Dirk Eddelbuettel)
Date: Fri, 15 Mar 2002 20:27:33 -0600
Subject: [Rd] File permissions test during R CMD check
In-Reply-To: <3C923302.664FAE6A@bank-banque-canada.ca>
References: <Pine.LNX.4.31.0203151521070.25930-100000@gannet.stats> <3C923302.664FAE6A@bank-banque-canada.ca>
Message-ID: <20020316022733.GA23564@sonny.eddelbuettel.com>

On Fri, Mar 15, 2002 at 12:44:34PM -0500, Paul Gilbert wrote:
> Don't get me wrong, I think this is a problem in the Linux
> distributions, not in R.

Please don't generalise. Debian had 022 since at least 1995:

edd@sonny:~> grep umask /etc/skel/.[a-z]*
/etc/skel/.bash_profile:umask 022


Dirk

-- 
Good judgement comes from experience; experience comes from bad judgement. 
							    -- Fred Brooks
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Edwin@balpol.tudelft.nl  Sat Mar 16 14:40:33 2002
From: Edwin@balpol.tudelft.nl (Edwin@balpol.tudelft.nl)
Date: Sat, 16 Mar 2002 15:40:33 +0100 (MET)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual (PR#1387)
Message-ID: <200203161440.PAA18107@pubhealth.ku.dk>

Full_Name: Edwin
Version: 1.4.1
OS: SunOS/Solaris
Submission from: (NULL) (130.161.1.115)


When selecting an X11 visual on Solaris 2.7 with

X11(colortype="true")

a PseudoColor visual is actually created. (verified with xwininfo)

The system in question (like many UNIX workstations) has both Pseudo and
truecolor visual types available, however the default type points to an 8 plane
PseudoColor visual. 
Some applications look for the truecolor visual (netscape, acroread) and use it
when available. For others it needs to be explicitely requested (VNC viewer). R
seems to do neither and just goes with the default, even if a truecolor type is
requested.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar 16 18:12:29 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 16 Mar 2002 19:12:29 +0100 (MET)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual (PR#1388)
Message-ID: <200203161812.TAA18426@pubhealth.ku.dk>

On Sat, 16 Mar 2002 Edwin@balpol.tudelft.nl wrote:

> Full_Name: Edwin
> Version: 1.4.1
> OS: SunOS/Solaris
> Submission from: (NULL) (130.161.1.115)
>
>
> When selecting an X11 visual on Solaris 2.7 with
>
> X11(colortype="true")
>
> a PseudoColor visual is actually created. (verified with xwininfo)

Note that the help page does *not* say that this `selects a visual'. It
says it selects a `color model'.  One can use a model which differs from
the X11 visual class, but the default class and depth are always used.

This seems to be a misunderstanding of the `colortype' argument: there is
no argument to select a visual class.

> The system in question (like many UNIX workstations) has both Pseudo and
> truecolor visual types available, however the default type points to an 8 plane
> PseudoColor visual.

I believe that is unusual.  Sun Xservers allow you to set the default
visual on the command line: has the default been overridden?  Ours with
multiple visuals are selecting TrueColor, but it does say the default is
hardware-dependent.

> Some applications look for the truecolor visual (netscape, acroread) and use it
> when available. For others it needs to be explicitely requested (VNC viewer). R
> seems to do neither and just goes with the default, even if a truecolor type is
> requested.

As it does not say it will do anything else, this is not strictly a bug.
It needs someone with the problem to contribute an enhancement, perhaps
additional arguments to select the visual class and depth?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From conor@psy.uva.nl  Sat Mar 16 20:08:30 2002
From: conor@psy.uva.nl (conor@psy.uva.nl)
Date: Sat, 16 Mar 2002 21:08:30 +0100 (MET)
Subject: [Rd] promax (PR#1389)
Message-ID: <200203162008.VAA18574@pubhealth.ku.dk>

Full_Name: conor dolan
Version: 1.4.0
OS: windows98
Submission from: (NULL) (146.50.170.247)


On the basis of Lawley and Maxwell's explanation in Factor Analysis as a
Statistical Method (London: Butterworth, 1971), the following line in the promax
routine (library, mva):

attr(z, "covariance") <- crossprod(U)

should be 

attr(z, "covariance") <- solve(crossprod(U))

the attribute as calculated at present is the inverse correlation matrix. 
try following example:

# start example
l<-matrix(c(.8,.7,.6,0,0,0,0,0,0,.7,.8,.9),6,2)
y<-matrix(c(1,.4,.4,1),2,2)
s1<-l%*%y%*%t(l)
t<-diag(1,6)-diag(diag(s1))
s1<-s1+t
library(mva)
res1<-factanal(cov=s1,factors=2)
l1<-res1$loadings
# note: the parameter m is set to a relatively large value 
# to ensure that almost exact values are recovered (try m=20, and compare
results)
res2<-promax(l1,m=10)
y2<-attr(res2$loadings,"covariance")
print(" true common factor inter correlation matrix ")
print(y)
print(" attr designated `covariance` ")
print(y2)
print("inverse of latter ")
print(solve(y2))
# end example

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Mar 16 21:06:49 2002
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Sat, 16 Mar 2002 22:06:49 +0100 (MET)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual (PR#1390)
Message-ID: <200203162106.WAA18650@pubhealth.ku.dk>

On Sat, 16 Mar 2002 ripley@stats.ox.ac.uk wrote:

> On Sat, 16 Mar 2002 Edwin@balpol.tudelft.nl wrote:
>
>
> > The system in question (like many UNIX workstations) has both Pseudo and
> > truecolor visual types available, however the default type points to an 8 plane
> > PseudoColor visual.
>
> I believe that is unusual.  Sun Xservers allow you to set the default
> visual on the command line: has the default been overridden?  Ours with
> multiple visuals are selecting TrueColor, but it does say the default is
> hardware-dependent.
>

As another data point: The Sun workstation that I had a couple of years
ago had this setup as well, and I'm fairly sure that the defaults hadn't
been overridden, but I seem to remember that I raised this issue back then
and no-one else reported a similar problem.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Sat Mar 16 21:06:09 2002
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Sat, 16 Mar 2002 13:06:09 -0800 (PST)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual
 (PR#1388)
In-Reply-To: <200203161812.TAA18426@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.44.0203161302530.183056-100000@homer01.u.washington.edu>

On Sat, 16 Mar 2002 ripley@stats.ox.ac.uk wrote:

> On Sat, 16 Mar 2002 Edwin@balpol.tudelft.nl wrote:
>
>
> > The system in question (like many UNIX workstations) has both Pseudo and
> > truecolor visual types available, however the default type points to an 8 plane
> > PseudoColor visual.
>
> I believe that is unusual.  Sun Xservers allow you to set the default
> visual on the command line: has the default been overridden?  Ours with
> multiple visuals are selecting TrueColor, but it does say the default is
> hardware-dependent.
>

As another data point: The Sun workstation that I had a couple of years
ago had this setup as well, and I'm fairly sure that the defaults hadn't
been overridden, but I seem to remember that I raised this issue back then
and no-one else reported a similar problem.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From E.Velds@balpol.tudelft.nl  Sat Mar 16 21:08:50 2002
From: E.Velds@balpol.tudelft.nl (E.Velds@balpol.tudelft.nl)
Date: Sat, 16 Mar 2002 22:08:50 +0100 (MET)
Subject: [Rd] X11(colortype="true") does not give a truecolor visual(PR#1387)
Message-ID: <200203162108.WAA18671@pubhealth.ku.dk>

ripley@stats.ox.ac.uk wrote:
> 
> On Sat, 16 Mar 2002 Edwin@balpol.tudelft.nl wrote:
> 
> > Full_Name: Edwin
> > Version: 1.4.1
> > OS: SunOS/Solaris
> > Submission from: (NULL) (130.161.1.115)
> >
> >
> > When selecting an X11 visual on Solaris 2.7 with
> >
> > X11(colortype="true")
> >
> > a PseudoColor visual is actually created. (verified with xwininfo)
> 
> Note that the help page does *not* say that this `selects a visual'. It
> says it selects a `color model'.  One can use a model which differs from
> the X11 visual class, but the default class and depth are always used.
> 
> This seems to be a misunderstanding of the `colortype' argument: there is
> no argument to select a visual class.

Not as much a misunderstanding, but more considered as closely related.

> 
> > The system in question (like many UNIX workstations) has both Pseudo and
> > truecolor visual types available, however the default type points to an 8 plane
> > PseudoColor visual.
> 
> I believe that is unusual.  Sun Xservers allow you to set the default
> visual on the command line: has the default been overridden?  Ours with
> multiple visuals are selecting TrueColor, but it does say the default is
> hardware-dependent.

It *can* be set as default, but on all of the Suns and most of the SGIs
I work with, it isn't. And I don't have the ability to change that
unfortunately. And there's an added problem that the truecolor visuals
in 2D are very slow compared to the pseudocolor, which makes it
undesireable to have the truecolor as default.

> 
> > Some applications look for the truecolor visual (netscape, acroread) and use it
> > when available. For others it needs to be explicitely requested (VNC viewer). R
> > seems to do neither and just goes with the default, even if a truecolor type is
> > requested.
> 
> As it does not say it will do anything else, this is not strictly a bug.
> It needs someone with the problem to contribute an enhancement, perhaps
> additional arguments to select the visual class and depth?
> 

I wondered about whether to file this as a bug and I reasoned that when
selecting a colour mode which is incompatible with the created visual,
there is something wrong. It does seem logical that the driver would try
to get the best suited visual for the colour mode and that there would
be a warning if the colour mode can't be supported.

In any case, it would be a nice enhancement for graphics support.

Edwin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar 16 21:35:41 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 16 Mar 2002 22:35:41 +0100 (MET)
Subject: [Rd] promax (PR#1389)
Message-ID: <200203162135.WAA18704@pubhealth.ku.dk>

The line is no longer present. It was never documented to be what you are
guessing it to be.

On Sat, 16 Mar 2002 conor@psy.uva.nl wrote:

> Full_Name: conor dolan
> Version: 1.4.0
> OS: windows98
> Submission from: (NULL) (146.50.170.247)
>
>
> On the basis of Lawley and Maxwell's explanation in Factor Analysis as a
> Statistical Method (London: Butterworth, 1971), the following line in the promax
> routine (library, mva):
>
> attr(z, "covariance") <- crossprod(U)
>
> should be
>
> attr(z, "covariance") <- solve(crossprod(U))
>
> the attribute as calculated at present is the inverse correlation matrix.
> try following example:
>
> # start example
> l<-matrix(c(.8,.7,.6,0,0,0,0,0,0,.7,.8,.9),6,2)
> y<-matrix(c(1,.4,.4,1),2,2)
> s1<-l%*%y%*%t(l)
> t<-diag(1,6)-diag(diag(s1))
> s1<-s1+t
> library(mva)
> res1<-factanal(cov=s1,factors=2)
> l1<-res1$loadings
> # note: the parameter m is set to a relatively large value
> # to ensure that almost exact values are recovered (try m=20, and compare
> results)
> res2<-promax(l1,m=10)
> y2<-attr(res2$loadings,"covariance")
> print(" true common factor inter correlation matrix ")
> print(y)
> print(" attr designated `covariance` ")
> print(y2)
> print("inverse of latter ")
> print(solve(y2))
> # end example
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Mon Mar 18 08:51:35 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Mon, 18 Mar 2002 08:51:35 +0000
Subject: [Rd] Thought on crossprod
References: <Pine.LNX.4.31.0203151701340.26291-100000@gannet.stats>
Message-ID: <3C95AA97.D677DDDC@durham.ac.uk>

ripley@stats.ox.ac.uk wrote:
> 
> On Fri, 15 Mar 2002, Thomas Lumley wrote:
> 
> > On Fri, 15 Mar 2002, Martin Maechler wrote:
> >
> > > >>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:
> > >
> > >     JonR> does not recognise the case where y is the same as x as special.  I'd
> > >     JonR> like to extend crossprod to something like
> > >
> > >     >> crossprod
> > >     JonR> function(x, y = NULL)
> > >     JonR> if (is.null(y))
> > >     JonR>    .Internal(crossprod.symm(x))
> > >     JonR> else
> > >     JonR>    .Internal(crossprod(x, y))
> > >
> > >     JonR> Before I start mesing up my R-1.4.1 installation, does anyone have any
> > >     JonR> thoughts on this?
> > >
> > > Just for clarification:
> > > The main point of your suggestion is to pass only half as much
> > > data down to C, right?
> > >
> >
> > If this can be done with the BLAS functions then halving the necessary
> > memory bandwidth will also help -- that's one of the limiting factors in
> > ATLAS, for example.
> 
> Looks like dsyrk can do this: despite the definition of *sy* BLAS routines
> on my quick reference card it does not need a symmetric matrix, which is
> why I overlooked it in earlier correspondence with Jonathan.  As from
> 1.5.0 dsyrk will be available in R.

Sorry -- I've been away for the weekend.  My intention in the original
post was not to save on memory but simply to do half as many
inner-products (it seems inelegant not to exploit the symmetry!).  I had
not thought about losing the benefit of an optimised BLAS (I am not
using one myself at present).  I take it from this correspondence that,
for now, my best approach might be to write my own "crossprod.symm" in
C, but that this might actually slow me down in the future.

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 18 08:58:44 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 18 Mar 2002 08:58:44 +0000 (GMT)
Subject: [Rd] Thought on crossprod
In-Reply-To: <3C95AA97.D677DDDC@durham.ac.uk>
Message-ID: <Pine.LNX.4.31.0203180852490.17211-100000@gannet.stats>

On Mon, 18 Mar 2002, Jonathan Rougier wrote:

[...]

> Sorry -- I've been away for the weekend.  My intention in the original
> post was not to save on memory but simply to do half as many
> inner-products (it seems inelegant not to exploit the symmetry!).  I had
> not thought about losing the benefit of an optimised BLAS (I am not
> using one myself at present).  I take it from this correspondence that,
> for now, my best approach might be to write my own "crossprod.symm" in
> C, but that this might actually slow me down in the future.

You really should investigate optimized BLASs before worrying about this.

I think the best approach is for us to modify crossprod to recognize the
symmetric case in 1.5.0 and call the appropriate BLAS routine.
Or, at least do so for real (not complex) inputs on IEEE-compliant
machines (which we believe all current R platforms are).

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 18 10:16:37 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Mon, 18 Mar 2002 10:16:37 +0000 (GMT)
Subject: [Rd] Thought on crossprod
In-Reply-To: <Pine.LNX.4.31.0203180852490.17211-100000@gannet.stats>
Message-ID: <Pine.GSO.4.44.0203181008440.11450-100000@auk.stats>

On Mon, 18 Mar 2002 ripley@stats.ox.ac.uk wrote:

> On Mon, 18 Mar 2002, Jonathan Rougier wrote:
>
> [...]
>
> > Sorry -- I've been away for the weekend.  My intention in the original
> > post was not to save on memory but simply to do half as many
> > inner-products (it seems inelegant not to exploit the symmetry!).  I had
> > not thought about losing the benefit of an optimised BLAS (I am not
> > using one myself at present).  I take it from this correspondence that,
> > for now, my best approach might be to write my own "crossprod.symm" in
> > C, but that this might actually slow me down in the future.
>
> You really should investigate optimized BLASs before worrying about this.
>
> I think the best approach is for us to modify crossprod to recognize the
> symmetric case in 1.5.0 and call the appropriate BLAS routine.
> Or, at least do so for real (not complex) inputs on IEEE-compliant
> machines (which we believe all current R platforms are).

Some data (on an old Sun):

A <- matrix(rnorm(500*500), 500)

without extra BLAS
> system.time(B <- crossprod(A, A))
[1] 7.21 0.02 7.31 0.00 0.00

with ATLAS
> system.time(B <- crossprod(A,A))
[1] 1.01 0.00 1.02 0.00 0.00

after adding the symmetric case
> system.time(B <- crossprod(A))
[1] 0.74 0.00 0.75 0.00 0.00

A <- matrix(rnorm(500*500), 5000)
without extra BLAS
> system.time(B <- crossprod(A,A))
[1] 0.83 0.00 0.85 0.00 0.00

with ATLAS
>  system.time(B <- crossprod(A,A))
[1] 0.15 0.00 0.17 0.00 0.00

using symmetry
>  system.time(B <- crossprod(A))
[1] 0.15 0.00 0.16 0.00 0.00

So the potential gains are minor compared to using an optimized BLAS.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Mon Mar 18 21:26:25 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Mon, 18 Mar 2002 16:26:25 -0500
Subject: [Rd] Missing zlib.h and zconf.h in R-devel/src/main
Message-ID: <15510.23425.252658.366764@gargle.gargle.HOWL>

Hi all,

When I tried to "make" R-devel (3/18) on Solaris 2.6, I got this error:
  In file included from dounzip.c:28:
  unzip.h:49: zlib.h: No such file or directory
  dounzip.c:365: zlib.h: No such file or directory
  make[3]: *** [dounzip.o] Error 1
  make[3]: Leaving directory `/home/a215020/Xperiment/R-devel/src/main'

So I went into R-devel/src/main and made two symbolic links:
  ln -s ../extra/zlib/zlib.h .
  ln -s ../extra/zlib/zconf.h .
and then it worked.

   I understand R-devel is never guaranteed to be complete, but I thought you
might want to know...
-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From htang@hpl.hp.com  Tue Mar 19 01:29:14 2002
From: htang@hpl.hp.com (htang@hpl.hp.com)
Date: Tue, 19 Mar 2002 02:29:14 +0100 (MET)
Subject: [Rd] levels(f)<-list doesn't work as expected when list is longer than nlevels(f) (PR#1394)
Message-ID: <200203190129.CAA29194@pubhealth.ku.dk>

Full_Name: Hsiu-Khuern Tang
Version: 1.4.1
OS: Linux
Submission from: (NULL) (192.6.19.190)


Hi all,

   When renaming the levels of a factor f using levels(f)<-list(...), if the
list is longer than the original number of levels in f, the result is wrong.

Example:

> f <- factor(c("a","b"))

> levels(f) <- list(C="C", A="a", B="b")

Warning message: 
number of items to replace is not a multiple of replacement length 

> f
[1] C A
Levels:  C A 

The answer should be something like

[1] A B
Levels:  C A B

Thanks,
Hsiu-Khuern Tang.



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@niwa.cri.nz  Tue Mar 19 05:11:52 2002
From: mh.smith@niwa.cri.nz (mh.smith@niwa.cri.nz)
Date: Tue, 19 Mar 2002 06:11:52 +0100 (MET)
Subject: [Rd] mgp parameter in par() (PR#1395)
Message-ID: <200203190511.GAA29496@pubhealth.ku.dk>

Full_Name: Murray H Smith
Version: 1.4.1
OS: Windows 2000
Submission from: (NULL) (202.36.29.1)


The mgp parameter in par() does not allow negative values. That is, it does not
allow plots with axes ticks and labels inside the plot. The help document,
Introduction to R, under Graphics: Axes and tick marks, specifically mentions
negative values for mgp as a way to achieve internal ticks and labels. 

Code:
> par(mgp=c(-3,-1,0))
Error in par(mgp = c(-3, -1, 0)) : invalid value specified for graphics
parameter "mgp"

> par(mgp=c(3,-1,0))
Error in par(mgp = c(3, -1, 0)) : invalid value specified for graphics parameter
"mgp".

> par(mgp=c(3,1,-1))
Error in par(mgp = c(3, 1, -1)) : invalid value specified for graphics parameter
"mgp".

> par(mgp=c(-3,1,0))
Error in par(mgp = c(-3, 1, 0)) : invalid value specified for graphics parameter
"mgp".






-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From fgfgf@we.cv  Tue Mar 19 11:44:37 2002
From: fgfgf@we.cv (fgfgf@we.cv)
Date: Tue, 19 Mar 2002 12:44:37 +0100 (MET)
Subject: [Rd] =?big5?Q?=AB=A2=B9=C6 =B3=CC=AA=F1=A6n=B6=DC=3F=3F=3F=3F=3F=3F=3F=3F?= rmJ4DQRldwFQR1v
Message-ID: <Fj4JOEGLwu@ibm.com>

ªÅ¤ù§åµo»ù4.99¤¸°_¦A°e¥d³qvcd©Î­^¤å±Ð¾Ç³nÅé

°âëä¼wÀu­±ªÅ¤ù,¸g´ú¸Õ¤£¨}²v2%¥ª¥k 
²M·¡ªºªÅ¤ù¤À¯Å¡A
µ´¤£®³B·íA¡A®³C·íB¶RªÅ¤ù¤]­n¬Ý»s³y¼t¡A¤j¼t¥X³f«~½è«Oµý¡A¬Ò¥i24¼g
¨C±i¤u¼t§åµo»ù4.99¤¸°_,¦Û¨ú´N°e¥d³qvcd©Î­^¤å±Ð¾Ç³nÅé!!!!!
¶R¤­¦Ê¦A°e¥®±Ðvcd©Î­^¤å±Ð¾Ç³nÅé°e§¹¬°¤î 
¥®±Ðvcd ¥d³qvcd©Î­^¤å±Ð¾Ç³nÅé¨C±i¯S´f»ù49¤¸
¤Å¦^«H½Ð¥H¿ËÁ{¥»©±©Î¹q¸ÜÁpµ¸ ¥¼±µÅ¥½Ð¯d¨¥©Îµy«á¦A¼·
0939099572 ÁÂ¥ý¥Í

°ª«~½èªÅ¥ÕªÅ¥Õ¥úºÐ¤ù±M·~§åµo 

¥t¦³¦U«~µP CD-RªÅ¥Õ¤ù§C»ù¨ÑÀ³¡A«~½è«OÃÒ¡G 

             °ê¤ºªÅ¤ù¤j¼t³ø»ù
 ¤ù¦W       ¤u¼t    µ¥¯Å   ¤ùºØ       ¦Ê¤ù³ø»ù       
¢i¢i¢i¢i¢i¢i¢i¢i¢i¢«ëä¼w±M°Ï¢¨¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i
TDK        ëä¼w74¤À  S    ¤ôÂÅ¤ù       (850) 
RICOH      ëä¼w74¤À  S    ¥Õª÷¤ù       (800) 
RIDATA     ëä¼w      A    ¤ôÂÅ¤ù       (699) 
TGK        ëä¼w      A    ¤ôÂÅ¤ù       (599) 
MEGADATE   ëä¼w      A    ¤ôÂÅ¤ù       (680) 
SUMMER     ëä¼w      A    ¥Õª÷¤ù       (680) 
KGB        ëä¼w80¤À  A    ¤ôÂÅ¤ù       (499) 
¥ú¨~       ëä¼w      A    ¥Õª÷¤ù       (600)        
¢i¢i¢i¢i¢i¢i¢i¢i¢i¢«¤¤Àô±M°Ï¢¨¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i¢i
YAMAHA     ¤¤Àô80¤À  A+   ¥Õª÷¤ù       (699)        
PHILIPS    ¤¤Àô80¤À  A+   ¤ôÂÅ¤ù       (750)        
PHILIPS    ¤¤Àô80¤À  A+   ¥Õª÷¤ù       (750)
GKN        ¤¤Àô80¤À  A+   ¤ôÂÅ¤ù       (699) 
GKN        ¤¤Àô80¤À  A+   ¥Õª÷¤ù       (699)
JJKL       ¤¤Àô80¤À  A+   ¤ôÂÅ¤ù       (599)        
JJKL       ¤¤Àô80¤À  A+   ¥Õª÷¤ù       (599)        
KAFULLY    ¤¤Àô80¤À  A    ¥Õª÷¤ù       (499) 



µù1: ´«¤ù½Ð¿í¦u¥H¤U¤T¤j­ì«h¡G
¡@1)¤£¥i¥Hµ²§À(CLOSE)¡A´N¬ODIR¬Ý¤£¨ì¦³¥ô¦ó¸ê®Æ
  2)¤£¥i¥H¦b¤ù¤l¤W¶î¶î¼g¼g
  3)¤£¥i¥H¦³ÄY­«¿i·l
> µù2: ¥H¤W³ø»ù¬Ò¥¼§tÀç·~µ|5%;
>      

> 
> ¥H¤W°Ó«~¡A´±¼Ð¥X¨Ó´N¬O¦³³f!!µ´«D¨S³f¦b¶Ã¥«³õªº!! 
> Åwªï¸g¾P°Ó¤Î¶T©ö°Óªø´Á°t¦X!!!!! 
> Åwªï¦U¾÷Ãö¡B¤½¥q¦æ¸¹¡B¾Ç®Õ³æ¦ì­qÁÊ¡A¥i¶}µo²¼³ø±b!! 
> Åwªï¶T©ö°Ó,½L°Ó,©±®a¨Ó¹q¸ß»ù 
> 
> ¤£º¡·N»ù¿ú ,Åwªï¥´¹q¸Ü¸ß°Ý,Åwªï±þ»ù 
> ¸ò§Ú½æªº¸Ü¦n¥Î«~½è¤£¿ù ½ÐÀ°§Ú¤¶²ÐªB¤Í¨Ó¶R 
> °µªÅ¤ù·å²«¥i´««Oµý¡A 
> Åý§A¶Rªº¦w¤ß,¥Îªº¦w¤ß,¤£¥Î¾á¤ß¶R¤FªÅ¤ù«o§ä¤£¨ì½æ¥D 
> §Ú­Ìªº©v¦®¬O,±M·~,¿Ë¤Á,¹D¼w 
> Åý®ø¶OªÌ¥H¦X²zªº»ù®æ®³¨ì¦n«~½èªº¥úºÐ¤ù 
> ¦W§»¨t¦CªÅ¤ù¤u¼tª½Àç¡A¤@¤À¿ú¥i¥H¶R¨ì¨â¤À³f­ò!! 
2.¥~°e
> ¾P°â¤èªk¬O¥H¥~°eªA°Èª½±µ­±¹ï®ø¶OªÌªº¡C 
> ¶RªÅ¥Õ¤ù´NÀ°«È¤á°e¨ì©²¬O§Ú­Ìªº°í«ù 
>
¥~°eªA°ÈÁöµM²Ö¤H¦ý¬Ý¨ì·R¥ÎªÌªº¨}¦n¦^À³¡C¦A²Ö³£¬O­È±oªº¡C
> ¥þ¬Ù¦U¦a¥i¶l±H¡B³f¹B¡B¥N¦¬³f»ù¨ì©² 
> ¦W§»¥~°e¸ß°Ý­q³f±M½u 0939099572 ÁÂ¥ý¥Í
> (¤G¤Q¥|¤p®ÉªA°È) 
> 
> ¥t¦b¥H¤U¦aÂI¥i±M¤H°e³f¦Û¨ú
> 1.¥x¥_¦a°Ï¦Û¨ú¦aÂI: ­q³f±M½u 0939099572 ÁÂ¥ý¥Í(24H) 
> 
> ·s©± ²H¤ô(²H¤j) ¤hªL(¦ÊÄÖ¾ô) ©Ó¼w¸ô(³Á·í³Ò) 
> ¤¤©M ¥Ã©M ¥úµØ ªO¾ô(µØ¦¿¾ô) ©µ¥­¥_¸ô¤T­«(¤¤§µ¾ô)
> Ãö´ç
> ¬õ¾ðªL 
> ¤TªÛ(·s®H) ¤ì¬](¬F¤j) ¤½À](¥x¤j) ¤­ªÑ(¦¨®õ¸ô) 
> Äª¬w(¤T¥Á°ê¤¤) ®v¤j ´º¬ü ¤jº~¾ô¦Û¨ú 
> 
> 
> 2.°ª¶¯¦a°Ï¦Û¨ú¦aÂI: ­q³f±M½u 0939099572 ÁÂ¥ý¥Í(24H) 
> 
> NOVA «Ø°ê°Ó³õ ¶¶µo3C Ä_¼Ö¤û±ÆÀ] ¤jµØ¹´À¸°| ¦y¬ü¦Ê³f
> ³Ò¤u¤½¶é ¥Á±Ú¤j¼Ö ¥úµØ¤j¼Ö 
>
¥H¤U¦U³Á·í³Ò¬Ò¥i(¤å¤Æ¤¤¤ßªù¥«,¤E¦p¥æ¬y¹Dªù¥«,¶§©ú¸ôªù¥«,¼á²M´òªù¥«,
> ÆQÑL°Ï¤­ºÖ¸ôªù¥«,°ªÂåªù¥«,»ñ¤sªù¥«,¥ªÀçªù¥«) 

¥H¤U¾Ç®Õ¬Ò¥i°e³f(¤¤¤s¤j¾Ç,°ª®v¤j,¸q¦u¤j¾Ç,¶¯¤¤,¹D©ú,ªþ¤¤,»ñ¤¤,
´_µØ,¥¿­×,¤åÄ¦,°ª¶¯¤u±M,¶¯°Ó,¤T«H,°ê»Ú,¾ð¼w) 

3.¥x«n¦a°Ï¦Û¨ú¦aÂI: ­q³f±M½u 0939099572 ÁÂ¥ý¥Í(24H) 

¥_ªù°Ó³õ ¦¨¤j¤j¾Ç¸ô³Á·í³Ò ¤¤¥¿¸ô³Á·í³Ò
¤p¥_©]¥«³Á·í³Ò
·s¥ú¦Ê³f³Á·í³Ò ¨}¬ü¦Ê³f®Ç¤pÃM¤h
°·±d¸ô¤T¬P©]¥«®ÇªÖ¼w°ò
¤¤µØªF¸ôÀé©[®ÇªÖ¼w°ò
¥H¤U¾Ç®Õ¬Ò¥i°e³f¦¨¤j,±X¤s,«n¥x,¤¤µØÂå±M,
«n¤@¤¤,«n¤G¤¤)
 
4.¥x¤¤,¹ü¤Æ¦a°Ï¦Û¨ú¦aÂI:­q³f±M½u 0939099572
 ÁÂ¥ý¥Í(24H) 

¥x¤¤¨®¯¸³Á·í³Ò ¹ü¤Æ¨®¯¸³Á·í³Ò ­ûªL¶Àª÷«Ò°ê¦Ê³f
ªá¾Â¤¤¤s¸ô³Á·í³Ò ³À´ä¼q¤f¥x¤¤¨®¯¸ 

³{¥Ò³Á·í³Ò ³{¥Ò³Á·í³Ò 
¥H¤U¾Ç®Õ¬Ò¥i°e³f(ªF®ü,³{¥Ò,ÀR©y,¹ü®v¤j,¤j¸­,¤¤¤@¤¤) 
 
5.®ç¦Ë­]¦a°Ï¦Û¨ú¦aÂI:­q³f±M½u 0939099572 ÁÂ¥ý¥Í(24H)
 
±M¤H°e³f!!!!!!!


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Tue Mar 19 14:17:19 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Tue, 19 Mar 2002 15:17:19 +0100 (CET)
Subject: [Rd] Small typo in An Introduction to R
In-Reply-To: <x28z94zfch.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.33L2.0203191506430.2390-100000@localhost.localdomain>


At a snail's pace I keep on translating an introduction to R into italian;
I have reached the section describing the glm() function, in which some
example code is presented. The very last line of code, before the
beginning of the section on Poisson models is:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fmp)); c(ldp, ldl)

which of course gives results 43.663 and 43.663; the correct code should
be:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fml)); c(ldp, ldl)

which gives the expected results 43.663 and 43.601

-- 
Michele Alzetta

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue Mar 19 17:43:38 2002
From: rossini@u.washington.edu (Anthony Rossini)
Date: Tue, 19 Mar 2002 09:43:38 -0800 (PST)
Subject: [Rd] Question re:S4 classes and design; clashing classes?
Message-ID: <Pine.LNX.4.43.0203190943380.28638@hymn08.u.washington.edu>

Thanks to Duncan's recent work on SJava, I've got a (so far) stable
platform to put together the R-Orca interface (dynamic graphics,
including brushing, subseting, etc).  While the first version will be
looking at installation issues and study basic user interfaces for providing a  
few working examples, it will be important for this particular package to look  at how one integrates a "toolkit" at the user-level with other R libraries.

The obvious place (to me, at least initially) to look is at how the S4
classes might be used for this.

However, I'm having a heck of a time wrapping my head around the
proper design for this.

Here is the general issue:

For "normal data objects" with standard data views (i.e. class of
grand tours, etc), I can simply setMethod on the standard data views,
i.e.

setMethod("grandtour","dataframe", ...)  # standard unstructured grand tour
setMethod("grandtour","Surv", ... )      # tour, restricting temporal data,
                                         # handling survival

etc.  I'm fine on this, and have an acceptable sense of what I'd like
to do here.  Note that here, I'm talking about visualizations that
currently exist, not that might be written for such data.  This is in
fact the first step beyond the package I'm currently finishing up.

For the third version (beyond the initial package and beyond the initial methods version of the package), I've got a second class of objects,
i.e. the data views (possibly customized themselves), which I'd like
to think about.  In particular, I'd like to be able to extend/subclass
"grandtour", for example, to regular ("nice") longitudinal and
spatio-temporal data, i.e. classify the methods, not just the data
being acted on by the methods.

I think I'm missing something really obvious here, and I suspect it is
related to using too many object-oriented systems (I'm more used to
Python's, right now, for example; but even with Java, there is a sense
of balance between methods and data within a class).  Thinking about
it more, I guess I'm not clear on the path or approach that S4 classes
use for inheritance and for contractual negotiation.

Here's the example that I'm using as a basis for thinking about design:

I've got a grandtour object which has slots for Data, Colors (a vector
used for subsetting from brushes -- one can color points in orca or
from R, this being the first approach for it), as well as Guidance (at
this point, merely a string, but will be classed for robustness and
extensibility at somepoint).

At the first step, this is for a single sample.  Now, I'd like to
extend this to problems where one variable is fixed (i.e. TIME, in the
longitudinal or time-series problem, or GROUP, in the correlated data
setting).  So we've got, in a sense, the multiple inheritance problem.
I'd like to be able to inherit from both the Orca object as well as
the data library object.

In other OO systems, I'd subclass grandtour, probably using multiple
inheritance, and modify only the methods which change (or to
paraphrase the Java approach, use interfaces for the orca toolkit, and
classes for the data libraries).  For example, I might want to try a
different visualization for survival data, and only want to change the
display in some way (not the brushing/colors or guidance methods).
I'd like to be able to "rerun" numerical analyses on potentially
interesting subsets, or possibly even predict from current fit models,
and have the required objects be part of the orca object.

Orca objects could have associated methods: dumpPipeline, buildPipeline, brush/selectData, getData, setData, addPipe, rmPipe.  In particular, the Data methods will need to use S4 data objects.

Do I simply extend the data classes to add slots for visualization and the requisite parameters and subclass from existing R libraries?  (i.e. add slots for both parameters and dispatched functions). 

Is there a better approach to approaching this problem (which should
be phrased as: "I've got more than one set of initial classes to build from; what might be the preferred approach to extend"?)

I think I'm missing something from reading John's Green book.  If
anyone has pointers to pages/sections I need to read much more
carefully, I'd be grateful to hear them!

(note: I know a number of approaches for how I can implement it, but I
don't have a good enough sense of S4 class design intentions to pick
any of them as being "reasonably faithful" to good S4 design).

best,
-tony


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rechung@aol.com  Tue Mar 19 20:50:05 2002
From: rechung@aol.com (rechung@aol.com)
Date: Tue, 19 Mar 2002 21:50:05 +0100 (MET)
Subject: [Rd] truehist (MASS) nbins problem (PR#1396)
Message-ID: <200203192050.VAA07111@pubhealth.ku.dk>

Full_Name: Robert Chung
Version: 1.4.1
OS: Windows 98
Submission from: (NULL) (212.198.0.94)


If I try to use the nbins="FD" argument to truehist, I get an 
error that says nclass.fd can't be found. If I edit the 
truehist function to look for nclass.FD the function works 
as I expect.

An example:
> x <- rnorm(100)
> library(mass)
> truehist(x,nbins="scott")  # This works
> truehist(x,nbins="FD")     # This doesn't
Error in switch(casefold(nbins), scott = nclass.scott(data), "freedman-diaconis"
= ,  : 
        couldn't find function "nclass.fd"
> ?nclass.fd  
Error in help("nclass.fd") : No documentation for `nclass.fd' in specified
packages and libraries:
  you could try `help.search("nclass.fd")'
> ?nclass.FD  # this finds the proper help page


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Tue Mar 19 21:15:47 2002
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: 19 Mar 2002 16:15:47 -0500
Subject: [Rd] should lapply preserve attributes?
Message-ID: <1016572547.29959.23.camel@keittlab-6>

I have an application where I need to preserve object attributes across
calls to 'lapply'. The current definition is:

lapply <- function (X, FUN, ...) 
{
    FUN <- match.fun(FUN)
    if (!is.list(X)) 
        X <- as.list(X)
    rval <- .Internal(lapply(X, FUN))
    names(rval) <- names(X)
    return(rval)
}

Would it make sense to replace

	names(rval) <- names(X)

with

	attributes(rval) <- attributes(X)

?? I can, of course, make a local function for this, but wondered if
this change would be useful in general.

Cheers,
Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue Mar 19 21:31:35 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 19 Mar 2002 21:31:35 +0000 (GMT)
Subject: [Rd] should lapply preserve attributes?
In-Reply-To: <1016572547.29959.23.camel@keittlab-6>
Message-ID: <Pine.GSO.4.44.0203192128260.24417-100000@auk.stats>

On 19 Mar 2002, Timothy H. Keitt wrote:

> I have an application where I need to preserve object attributes across
> calls to 'lapply'. The current definition is:
>
> lapply <- function (X, FUN, ...)
> {
>     FUN <- match.fun(FUN)
>     if (!is.list(X))
>         X <- as.list(X)
>     rval <- .Internal(lapply(X, FUN))
>     names(rval) <- names(X)
>     return(rval)
> }
>
> Would it make sense to replace
>
> 	names(rval) <- names(X)
>
> with
>
> 	attributes(rval) <- attributes(X)
>
> ?? I can, of course, make a local function for this, but wondered if
> this change would be useful in general.

No, it would be positively harmful.  X might be a data frame, or a time
series .., but rval is only guaranteed to be the same length as X.  If you
know more, adjust the object returned by lapply.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Tue Mar 19 22:29:03 2002
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: 19 Mar 2002 17:29:03 -0500
Subject: [Rd] should lapply preserve attributes?
In-Reply-To: <Pine.GSO.4.44.0203192128260.24417-100000@auk.stats>
References: <Pine.GSO.4.44.0203192128260.24417-100000@auk.stats>
Message-ID: <1016576943.30316.43.camel@keittlab-6>

On Tue, 2002-03-19 at 16:31, Prof Brian D Ripley wrote:
> On 19 Mar 2002, Timothy H. Keitt wrote:
> >
> > Would it make sense to replace
> >
> > 	names(rval) <- names(X)
> >
> > with
> >
> > 	attributes(rval) <- attributes(X)
> >
> > ?? I can, of course, make a local function for this, but wondered if
> > this change would be useful in general.
> 
> No, it would be positively harmful.  X might be a data frame, or a time
> series .., but rval is only guaranteed to be the same length as X.  If you
> know more, adjust the object returned by lapply.
> 

Yes, nevermind. Ah, tiredness... I realized that's not what I meant
after hitting "send" (and that Brian would catch it before I could reply
to my own email! ;-).

What I want is to apply a function to a list of objects and have the
attributes of the objects copied to the resulting list items, e.g.,

out <- lapply(list(ts1=ts(1:10), ts2=ts(1:5)), sample)

and have 'out' be a list of time series instead of attributeless
vectors. Obviously the solution is to make a function that both permutes
the values and copies the attributes as well.

Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hyu@stats.uwo.ca  Wed Mar 20 03:50:40 2002
From: hyu@stats.uwo.ca (hyu@stats.uwo.ca)
Date: Wed, 20 Mar 2002 04:50:40 +0100 (MET)
Subject: [Rd] solve() benchmark in R-1.4.1 (PR#1397)
Message-ID: <200203200350.EAA07993@pubhealth.ku.dk>

Full_Name: Hao Yu
Version: R-1.4.1
OS: Windows and Linux
Submission from: (NULL) (129.100.242.16)


I just report what I find for the solve() function when I was doing benchmark.

A specific function Toeplitz is used as following 
"Toeplitz" <- function(x)
{
        matrix(x[1 + abs(outer(seq(along = x), seq(along = x), FUN = "-"))], 
                byrow = T, ncol = length(x))
}

A. On a dual  PIII 1GHz Xeon Linux Redhat 7.2 (R-1.4.1 is recompiled to create
libR.so. No change to other settings. All libraries come with redhat.)
*****************************************************
> system.time(solve(matrix(rnorm(1000000),nrow=1000)))
[1] 35.04  0.30 35.33  0.00  0.00
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 53.28  0.43 53.69  0.00  0.00
*****************************************************
B. On a PIII-M 1.2GHz laptop running Windows Xp Pro (download binary R from
CRAN)
*****************************************************
> system.time(solve(matrix(rnorm(1000000),nrow=1000)))
[1] 28.18  0.05 28.24    NA    NA
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 33.80  0.03 34.14    NA    NA
*****************************************************
C. On a PIII 1.125GHz desktop Windows 2k (Download binary R from CRAN)
*****************************************************
> system.time(solve(matrix(rnorm(1000000),nrow=1000)))
[1] 32.31  0.14 36.37    NA    NA
> system.time(solve(Toeplitz(.5^seq(0,999))))
[1] 36.45  0.16 40.84    NA    NA
*****************************************************


Clearly solve() does a random matrix inverse faster than a positive definite and
symmetric matrix (covariance matrix). I do not think the results (inverses) are
wrong. But it is odd regarding the timing for solve(). Using solve.Matrix() from
the package Matrix, I got almost identical timings (it fails to identify
positive definite and symmetric matrices). 

Thanks
Hao Yu


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jan.wiener@tuebingen.mpg.de  Wed Mar 20 08:07:34 2002
From: jan.wiener@tuebingen.mpg.de (jan.wiener@tuebingen.mpg.de)
Date: Wed, 20 Mar 2002 09:07:34 +0100 (MET)
Subject: [Rd] barplots & ylim (PR#1398)
Message-ID: <200203200807.JAA08835@pubhealth.ku.dk>

hi,
when having a barplot one might wants to start the y-axis at some 
certain value (besides 0).

e.g.

x <- c(4,5,6,7)
barplot(x, ylim=c(3,8))


as you can see, the bars are plotted below the limit specified by ylim.


jan wiener



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From matthias.piksa@web.de  Wed Mar 20 12:41:38 2002
From: matthias.piksa@web.de (matthias.piksa@web.de)
Date: Wed, 20 Mar 2002 13:41:38 +0100 (MET)
Subject: [Rd] RMySQL integer range bug (PR#1400)
Message-ID: <200203201241.NAA12502@pubhealth.ku.dk>

Full_Name: Matthias Piksa
Version: 1.4.1
OS: Redhat 7.1 2.96-85
Submission from: (NULL) (131.220.6.43)


There is a bug when retrieving values out of MySQL (3.23.36) which are of type
UNSIGNED INTEGER(10). The values can vary between 0 and 2^32 but R only accepts
those below 2^31-1. Anything above goes as 2^31-1.

thats what one gets:
print(quickSQL(con,"select ip_dst from iphdr where ip_dst>=2212233216 limit
5"))
      ip_dst
1 2147483647
2 2147483647
3 2147483647
4 2147483647
5 2147483647

and thats what the numbers really are (conversion to character type first):
print(quickSQL(con,"select concat(ip_dst) from iphdr where ip_dst>=2212233216
limit 5"))
  concat(ip_dst)
1     2212234077
2     2212234085
3     2212234085
4     2212234085
5     2212234086

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dj@research.bell-labs.com  Wed Mar 20 14:55:24 2002
From: dj@research.bell-labs.com (David James)
Date: Wed, 20 Mar 2002 09:55:24 -0500
Subject: [Rd] RMySQL integer range bug (PR#1400)
In-Reply-To: <200203201241.NAA12502@pubhealth.ku.dk>; from matthias.piksa@web.de on Wed, Mar 20, 2002 at 01:41:38PM +0100
References: <200203201241.NAA12502@pubhealth.ku.dk>
Message-ID: <20020320095524.A20541@jessie.research.bell-labs.com>


--82I3+IH0IqGh5yIs
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

Hi,

matthias.piksa@web.de wrote:
> Full_Name: Matthias Piksa
> Version: 1.4.1
> OS: Redhat 7.1 2.96-85
> Submission from: (NULL) (131.220.6.43)
> 
> 
> There is a bug when retrieving values out of MySQL (3.23.36) which are of type
> UNSIGNED INTEGER(10). The values can vary between 0 and 2^32 but R only accepts
> those below 2^31-1. Anything above goes as 2^31-1.

Yes, that causes an overflow.  The attached patch to the file
RS-MySQL.c fixes the problem with unsigned integers, but it may not
be general enough -- I'll have to take a closer look for other cases.
By the way, you may notice that the largest unsigned integer in
MySQL is 4294967295, which may not be large enough for some IP
addresses (your data appears to be IP address, if I'm not mistaken).

Thanks for the report,

--
David

> 
> thats what one gets:
> print(quickSQL(con,"select ip_dst from iphdr where ip_dst>=2212233216 limit
> 5"))
>       ip_dst
> 1 2147483647
> 2 2147483647
> 3 2147483647
> 4 2147483647
> 5 2147483647
> 
> and thats what the numbers really are (conversion to character type first):
> print(quickSQL(con,"select concat(ip_dst) from iphdr where ip_dst>=2212233216
> limit 5"))
>   concat(ip_dst)
> 1     2212234077
> 2     2212234085
> 3     2212234085
> 4     2212234085
> 5     2212234086
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
David A. James
Statistics Research, Room 2C-253            Phone:  (908) 582-3082       
Bell Labs, Lucent Technologies              Fax:    (908) 582-3340
Murray Hill, NJ 09794-0636

--82I3+IH0IqGh5yIs
Content-Type: text/plain; charset=us-ascii
Content-Description: RMySQL_0.4-3.patch
Content-Disposition: attachment; filename="RMySQL_0.4-3.patch"

494d493
<     case FIELD_TYPE_LONG:            /* 4-byte INTEGER   */
495a495,501
>       break;
>     case FIELD_TYPE_LONG:            /* 4-byte INTEGER   */
>       /* if unsigned, turn into numeric (may be too large for ints/long)*/
>       if(select_dp[j].flags & UNSIGNED_FLAG)
>         flds->Sclass[j] = NUMERIC_TYPE;
>       else
>         flds->Sclass[j] = INTEGER_TYPE;

--82I3+IH0IqGh5yIs--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Wed Mar 20 15:21:48 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Wed, 20 Mar 2002 10:21:48 -0500
Subject: [Rd] Question re:S4 classes and design; clashing classes?
References: <Pine.LNX.4.43.0203190943380.28638@hymn08.u.washington.edu>
Message-ID: <3C98A90C.484269EB@research.bell-labs.com>

It wasn't entirely clear what your design goals were, but the general
question of comparing functional method languages (S, CLOS, Dylan) and
OOP languages (Java, etc) is of much interest to me, so here are some
general comments.  Maybe we can then iterate on your example, with or
without r-devel.

The basic difference in approach is easy to state:

 Functional languages define methods based on the function and a
signature (a list matching classes to formal arguments);  OOP languages
attach all methods to a class definition.

The distinction becomes relevant if a function does "multiple dispatch";
that is, defining methods that depend on more than one argument.  (In
that sense, S3 methods made no use of the functional nature of the
language.)

If, say, f(x, y) only has methods that depend on x, then it's just
syntactic sugar, and a matter of organization, that distinguishes the
functional form f(x, y) from an OOP-style form, say x$f(y).  

(That's a slight exaggeration, because the functional language model
thinks that "f" should mean something similar regardless of the class of
x, where in OOP you could define the method in a totally inconsistent
way.)

In that sense, I read your description as essentially OOP.  You talk of
"Orca objects having methods", but in a functional language the question
is how the functions that do the computation depend on the objects that
are their arguments.

Nothing wrong with the OOP view, but it means that your question goes
more to how, and if, the underlying R code uses functions.  If it's just
basically an interface to an OOP definition, then it can stay in that
form.  (And I'd like to discuss in separate mail using the Omegahat OOP
package to formalize the R side.)

Functional methods would become relevant if the R software involved
multiple objects.  Not knowing the innards of how things work, let me
make up an example.

If the current view included, say, an object describing a wireframe that
was displayed around the points, then one might have useful classes of
wireframe objects, then a function that stepped the display to the next
view could have methods that depended on both the current data and the
wireframe:
  step(data, wireframe)
(Definitely not asserting this is a relevant example, but perhaps the
general distinction is clear.)

John


Anthony Rossini wrote:
> 
> Thanks to Duncan's recent work on SJava, I've got a (so far) stable
> platform to put together the R-Orca interface (dynamic graphics,
> including brushing, subseting, etc).  While the first version will be
> looking at installation issues and study basic user interfaces for providing a
> few working examples, it will be important for this particular package to look  at how one integrates a "toolkit" at the user-level with other R libraries.
> 
> The obvious place (to me, at least initially) to look is at how the S4
> classes might be used for this.
> 
> However, I'm having a heck of a time wrapping my head around the
> proper design for this.
> 
> Here is the general issue:
> 
> For "normal data objects" with standard data views (i.e. class of
> grand tours, etc), I can simply setMethod on the standard data views,
> i.e.
> 
> setMethod("grandtour","dataframe", ...)  # standard unstructured grand tour
> setMethod("grandtour","Surv", ... )      # tour, restricting temporal data,
>                                          # handling survival
> 
> etc.  I'm fine on this, and have an acceptable sense of what I'd like
> to do here.  Note that here, I'm talking about visualizations that
> currently exist, not that might be written for such data.  This is in
> fact the first step beyond the package I'm currently finishing up.
> 
> For the third version (beyond the initial package and beyond the initial methods version of the package), I've got a second class of objects,
> i.e. the data views (possibly customized themselves), which I'd like
> to think about.  In particular, I'd like to be able to extend/subclass
> "grandtour", for example, to regular ("nice") longitudinal and
> spatio-temporal data, i.e. classify the methods, not just the data
> being acted on by the methods.
> 
> I think I'm missing something really obvious here, and I suspect it is
> related to using too many object-oriented systems (I'm more used to
> Python's, right now, for example; but even with Java, there is a sense
> of balance between methods and data within a class).  Thinking about
> it more, I guess I'm not clear on the path or approach that S4 classes
> use for inheritance and for contractual negotiation.
> 
> Here's the example that I'm using as a basis for thinking about design:
> 
> I've got a grandtour object which has slots for Data, Colors (a vector
> used for subsetting from brushes -- one can color points in orca or
> from R, this being the first approach for it), as well as Guidance (at
> this point, merely a string, but will be classed for robustness and
> extensibility at somepoint).
> 
> At the first step, this is for a single sample.  Now, I'd like to
> extend this to problems where one variable is fixed (i.e. TIME, in the
> longitudinal or time-series problem, or GROUP, in the correlated data
> setting).  So we've got, in a sense, the multiple inheritance problem.
> I'd like to be able to inherit from both the Orca object as well as
> the data library object.
> 
> In other OO systems, I'd subclass grandtour, probably using multiple
> inheritance, and modify only the methods which change (or to
> paraphrase the Java approach, use interfaces for the orca toolkit, and
> classes for the data libraries).  For example, I might want to try a
> different visualization for survival data, and only want to change the
> display in some way (not the brushing/colors or guidance methods).
> I'd like to be able to "rerun" numerical analyses on potentially
> interesting subsets, or possibly even predict from current fit models,
> and have the required objects be part of the orca object.
> 
> Orca objects could have associated methods: dumpPipeline, buildPipeline, brush/selectData, getData, setData, addPipe, rmPipe.  In particular, the Data methods will need to use S4 data objects.
> 
> Do I simply extend the data classes to add slots for visualization and the requisite parameters and subclass from existing R libraries?  (i.e. add slots for both parameters and dispatched functions).
> 
> Is there a better approach to approaching this problem (which should
> be phrased as: "I've got more than one set of initial classes to build from; what might be the preferred approach to extend"?)
> 
> I think I'm missing something from reading John's Green book.  If
> anyone has pointers to pages/sections I need to read much more
> carefully, I'd be grateful to hear them!
> 
> (note: I know a number of approaches for how I can implement it, but I
> don't have a good enough sense of S4 class design intentions to pick
> any of them as being "reasonably faithful" to good S4 design).
> 
> best,
> -tony
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Mar 20 20:00:52 2002
From: rossini@u.washington.edu (Anthony Rossini)
Date: Wed, 20 Mar 2002 12:00:52 -0800 (PST)
Subject: [Rd] Question re:S4 classes and design; clashing classes?
In-Reply-To: <3c98a90c.484269eb@research.bell_labs.com>
Message-ID: <Pine.LNX.4.43.0203201200520.640@hymn02.u.washington.edu>

On Wed, 20 Mar 2002, John Chambers wrote:

> It wasn't entirely clear what your design goals were, but the general
> question of comparing functional method languages (S, CLOS, Dylan) and
> OOP languages (Java, etc) is of much interest to me, so here are some
> general comments.  Maybe we can then iterate on your example, with or
> without r-devel.

I'll keep it on r-devel until someone (anyone?) screams.  I suspect it might be useful, at least for a bit.
 
> The basic difference in approach is easy to state:
> 
>  Functional languages define methods based on the function and a
> signature (a list matching classes to formal arguments);  OOP languages
> attach all methods to a class definition.

I'll try to clarify the issues by typing through them, and then provide the problem I'd like to address, which was ill-stated in my last email. 

Issues:

1. I've got an object oriented toolkit which constructs visualization pipelines (i.e. sets of views connected in a data processing network).  These are constructed using a OOP paradigm, realized in Java, with the goal being flexible additions of new (higher level) interactive visualizations for exploration (of both data as well as visualization approaches).

2. I really want to connect this with an interactive data analysis language.  S (via R) is a no-brainer, in this respect.  However, it's a functional programming language.

3. I'd like to do so in such as way to play off of the strengths of both approaches (I'll label one, "the computing with data approach", and the second, the "OOP" approach). 

4. Note that there are two intertwined goals, here.  First, I'd like to be able to use the strengths of S, in the sense of being able to provide the right thing for the right set of inputs, (i.e. "plot" does the right thing).   So I'd like to continue to have this interactive strength.  Second, I'd like to be able to develop new visualizations rapidly, by subclassing, to use the strengths of Java and the flexibility of the classes that we designed for Orca.

So this leads me to pose the following hypothesis:  Since I'm thinking (in the OOP approach) of visualizations as subclassing numerical summaries (this could be controversial, but those who know me understand where I'm coming from), I'd also like to be able to "intertwine" the extensibility approaches.  For me, this would mean being able to build visualization summaries on top of the numerical summaries, as well as be able to provide a "feedback loop" in the sense of being able to apply numerical methods both to visualization objects (with resulting changes to visualization) as well as to subsets of the data extracted from various points of the visualization pipeline.  I'm rambling, but in a sense, I'm thinking of a possibly cyclic graph in the sense of the original ViSta workmaps, which would provide some form of audit-trail and reproducibility as needed.

> The distinction becomes relevant if a function does "multiple dispatch";
> that is, defining methods that depend on more than one argument.  (In
> that sense, S3 methods made no use of the functional nature of the
> language.)

Exactly.  Since I'm considering S4 methods, this is critical.  Especially since I'd like to do some form of interplay, if possible.

> In that sense, I read your description as essentially OOP.  You talk of
> "Orca objects having methods", but in a functional language the question
> is how the functions that do the computation depend on the objects that
> are their arguments.

This is what I'm trying to understand -- i.e. how to do both, in a flexible and extensible manner, from the R command line.

> Nothing wrong with the OOP view, but it means that your question goes
> more to how, and if, the underlying R code uses functions.  If it's just
> basically an interface to an OOP definition, then it can stay in that
> form.  (And I'd like to discuss in separate mail using the Omegahat OOP
> package to formalize the R side.)

Please do.  I'm busy, but it would help to ground my thinking about this general problem.

> Functional methods would become relevant if the R software involved
> multiple objects.  Not knowing the innards of how things work, let me
> make up an example.
> 
> If the current view included, say, an object describing a wireframe that
> was displayed around the points, then one might have useful classes of
> wireframe objects, then a function that stepped the display to the next
> view could have methods that depended on both the current data and the
> wireframe:
>   step(data, wireframe)
> (Definitely not asserting this is a relevant example, but perhaps the
> general distinction is clear.)

I'm not sure.  I think that what I'm trying to do is to explore the possibility of systems integration at the user-level.  

So, what I'd like is to be able to do is more like (note that this is a fake example, while the components are there, it isn't quite there yet):

grandTour(x)

setMethod("grandtour","matrix", 
          function(x) { gt <- .JNew(org.orca.viz.grandtour)
                        gt$initData(x)})

Note that the grandtour class is a pipeline of lots of things.  So, I'd like to do something similar with time series, so that:

setMethod("grandtour","ts",
          function(x) {gt <- .JNew(org.orca.viz.grandtour)
                       gt$insertPipe(knownLocation,
                            .JNew(org.omegahat.compiler( new presentation 
                                               code in Java)))
                       gt$initData(x)})

While it looks like I'm answering my own question -- Duncan and John have provided all the technology I need to work it out today, in a sense I'd like to have a tighter means for building the code in the second .JNew statement, i.e. the compiler code.

I could simply provide a functional mapping over, but then I seem to lose (Duncan, correct me if wrong) the advantage of understanding the Java interfaces and classes.  Yes, I can hack it out.  Yes I am hacking it out.  But it doesn't have the right aesthetic feel to it.

Now, to provide more context - we can treat as a constant, the knownLocation (it is either fixed or can be discovered via introspection).  What I'd like to be able to do is more like:

.JNew(subclass(org.orca.viz.grandtour)$setfinalDisplayPipe(TimeSeriesDisplayPipe))

i.e. something like: subclass the grandtour, replacing the finalDisplay pipe to be a TimeSeriesDisplayPipe

Note that Orca examples do look sort of functional-like (since we construct DAGs for the visualization pipeline).  So this would just mean that we need to replace a componentPipe (or insert a new componentPipe between two others).

Now, for a part that is incomplete for me; I still need to think through what I want with:

y <- grandtour(as.matrix(x))

Here, y will be the link to the grandtour, to the original data, and to any subsetted data pieces.

So, while I could let y be a closure/list of components to work with, another possibility, which "might" be useful, is for y to both represent the R "matrix" class (for data operations), as well as the Java "orca" class (for visualization extension operations).

best,
-tony




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Thu Mar 21 06:15:03 2002
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Thu, 21 Mar 2002 07:15:03 +0100
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200203210615.g2L6F3l06225@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 1218 *
Subject:  behavior of r* and d* functions at boundaries 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Mon, 17 Dec 2001 11:04:27 -0500
--points 1 and 2 were fixed for 1.4.0
* PR# 1228 *
Subject: bug with var(rep(1e30, 3))
From: Emmanuel Paradis <paradis@isem.univ-montp2.fr>
Date: Wed, 26 Dec 2001 13:03:31 +0100
* PR# 1244 *
Subject: possible bug in det using method="qr"
From: armin@approximity.com
Date: Sat, 5 Jan 2002 01:48:13 +0100 (MET)

Directory:  Add-ons

* PR# 974 *
Subject: Lattice: panel.superpose with ordered factor groups
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 9 Jun 2001 11:08:51 +1000 (EST)
--The warning is standard S and R behaviour.
--Probably xyplot needs to avoid it (by unclassing?)
--Still there in lattice 0.3-0.
* PR# 1038 *
Subject: nlme: bug in getCovariateFormula
From: Setzer.Woodrow@epamail.epa.gov
Date: Tue, 31 Jul 2001 11:24:09 -0400
--change needed in package nlme
* PR# 1044 *
Subject: Polymarsall.c
From: pleu@hotmail.com
Date: Tue, 7 Aug 2001 22:42:07 +0200 (MET DST)
* PR# 1116 *
Subject: get.hist.quote does not work
From: arto.luoma@uta.fi
Date: Thu, 4 Oct 2001 14:45:29 +0200 (MET DST)
--Seems specific to one locale on one system.
--The bug is unlikely to be in R.
* PR# 1178 *
Subject: segfault using svm from e1071
From: Jan Rychter <jan@rychter.com>
Date: Tue, 20 Nov 2001 23:38:17 +0100
* PR# 1199 *
Subject: pixmap: infinite recursion with nonascii pnm-files
From: thomas.baumann@ch.tum.de
Date: Fri, 7 Dec 2001 11:07:52 +0100 (CET)
* PR# 1266 *
Subject: bug in survival package basehaz function
From: Nicholas Lewin-Koh <kohnicho@comp.nus.edu.sg>
Date: Wed, 16 Jan 2002 14:15:21 +0800 (GMT-8)
* PR# 1295 *
Subject:  typo and user-proofing in odesolve() 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Fri, 1 Feb 2002 12:42:25 -0500
* PR# 1361 *
Subject: Matrix identification bug
From: hyu@stats.uwo.ca
Date: Tue, 5 Mar 2002 21:19:46 +0100 (MET)
--seems to be about Matrix package, not solve

Directory:  Analyses

none

Directory:  Documentation

* PR# 988 *
Subject: input for R-intro
From: "Paul E. Johnson" <pauljohn@ku.edu>
Date: Mon, 18 Jun 2001 13:57:10 -0500
* PR# 1011 *
Subject: R-intro suggestions part II
From: "Paul E. Johnson" <pauljohn@ukans.edu>
Date: Tue, 03 Jul 2001 15:50:06 -0500
* PR# 1136 *
Subject: cex/col/etc. in title(): documentation?
From: Ben Bolker <ben@zoo.ufl.edu>
Date: Mon, 22 Oct 2001 11:55:14 -0400 (EDT)
--MM:actually the documentation still could elaborate a bit..
* PR# 1195 *
Subject: help(dbinom) recommended documentation improvement
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 4 Dec 2001 11:29:58 -0500 (EST)
--This isn't really a bug: the line in question is a plain-text equation, not a
--piece of R code.
* PR# 1257 *
Subject: documentation of `las' on `par' help page
From: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Date: Fri, 11 Jan 2002 12:30:20 +0100
* PR# 1323 *
Subject: bug in options() - help page
From: Ole Christensen <o.christensen@lancaster.ac.uk>
Date: Sat, 23 Feb 2002 16:56:56 +0000

Directory:  Graphics

* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3.
--
--Fix doesn't work. One problem is that the opar<-par();par(opar) idiom updates
--xaxp before xlog, and the new value of xaxp may only be valid under the new
--value of xlog.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 997 *
Subject:  las=1 with log axis 
From: Peter Dalgaard BSA <pd@pubhealth.ku.dk>
Date: Wed, 27 Jun 2001 11:54:06 +0200
* PR# 1045 *
Subject: Palette changes on redraw
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 08 Aug 2001 19:08:01 +0200
* PR# 1088 *
Subject:  barplot forces xpd=TRUE 
From: Peter Whiting <pwhiting@whitings.org>
Date: Sat, 8 Sep 2001 10:19:00 -0500
* PR# 1147 *
Subject: postscript problem
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 26 Oct 2001 15:23:45 -0400
--This seems to be a problem with screen/layout rather than postscript.
* PR# 1161 *
Subject: x-axis label in persp()
From: Rolf Turner <rolf@maths.uwa.edu.au>
Date: Wed, 7 Nov 2001 18:07:22 +0800 (WST)
* PR# 1207 *
Subject: boxplot labels incorrect when horizontal = TRUE
From: Rashid Nassar <rnassar@duke.edu>
Date: Sun, 9 Dec 2001 21:46:32 -0500 (EST)
* PR# 1235 *
Subject: Axes labelling with logarithmic scales
From: tobias.hoevekamp@ilw.agrl.ethz.ch
Date: Thu, 3 Jan 2002 15:29:02 +0100 (MET)
* PR# 1243 *
Subject: abline and log plots
From: stephen@cogsci.ed.ac.uk
Date: Sat, 5 Jan 2002 01:11:47 +0100 (MET)
* PR# 1300 *
Subject: FW: layout and piechart diameter problem
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Thu, 7 Feb 2002 11:05:15 -0500 
* PR# 1305 *
Subject: interaction.plot (with misplaced legend)
From: Uwe Ligges <ligges@statistik.uni-dortmund.de>
Date: Fri, 08 Feb 2002 14:27:01 +0100
* PR# 1395 *
Subject: mgp parameter in par()
From: mh.smith@niwa.cri.nz
Date: Tue, 19 Mar 2002 06:11:49 +0100 (MET)
* PR# 1398 *
Subject: barplots & ylim
From: Jan Malte Wiener <jan.wiener@tuebingen.mpg.de>
Date: Wed, 20 Mar 2002 09:06:57 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 1222 *
Subject: configure: sed: Function s%@PDFLATEX@%/usr/local/bin/pdflatex%g
From: Peter Kleiweg <kleiweg@let.rug.nl>
Date: Thu, 20 Dec 2001 14:09:42 +0100 (CET)
--problem is on hppa2.0-hp-hpux10.20: may be HP-UX specific

Directory:  Language

* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 1073 *
Subject: Wierd problem comparing numeric values and list using ==
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 24 Aug 2001 22:07:41 -0400
--see also PR#1075
* PR# 1076 *
Subject: Re: [Rd] Wierd problem comparing numeric values and list using == 
From: John Chambers <jmc@research.bell-labs.com>
Date: Mon, 27 Aug 2001 08:44:22 -0400
--part of PR#1073
* PR# 1186 *
Subject: a patch to tapply
From: Vadim Ogranovich <vograno@arbitrade.com>
Date: Thu, 29 Nov 2001 14:48:35 -0600
* PR# 1193 *
Subject: Re: [R] appending similar data frames?
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 3 Dec 2001 13:46:35 -0800 (PST)
* PR# 1214 *
Subject: syntax questtion, maybe a bug
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Thu, 13 Dec 2001 13:46:54 -0500 (EST)
--Is .2logl meant to be a valid name in R? It is S
* PR# 1241 *
Subject:  Problem with "missing" in "local" 
From: J.C.Rougier@durham.ac.uk
Date: Fri, 4 Jan 2002 13:34:34 GMT

Directory:  Low-level

* PR# 989 *
Subject: "[.data.frame" allows un-named 3rd subscript
From: "Charles C. Berry" <cberry@tajo.ucsd.edu>
Date: Mon, 18 Jun 2001 13:13:46 -0700 (PDT)
* PR# 1063 *
Subject: interrupting Sys.sleep
From: Thomas Lumley <tlumley@u.washington.edu>
Date: Mon, 20 Aug 2001 13:55:29 -0700 (PDT)
* PR# 1068 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: Luke Tierney <luke@nokomis.stat.umn.edu>
Date: Wed, 22 Aug 2001 19:32:51 -0500
--see also followup in PR#1069
* PR# 1069 *
Subject: Interrupts (was Re: [Rd] X11 protocol errors ...)
From: "John W. Eaton" <jwe@bevo.che.wisc.edu>
Date: Wed, 22 Aug 2001 21:56:33 -0500
--part of PR#1068
* PR# 1120 *
Subject: bug in write.table?
From: Ott Toomet <siim@obs.ee>
Date: Sun, 7 Oct 2001 18:24:34 +0200 (CEST)
--Traced down to an effect of read.dta in foreign interacting with do_paste. Fixed
--in foreign, but do_paste may need to use strlen() rather than LENGTH().
--
* PR# 1211 *
Subject: crash bug in get("function.name")()
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Tue, 11 Dec 2001 17:34:07 -0500 (EST)
* PR# 1247 *
Subject: Mishandling missing "..."
From: David Brahm  <brahm@alum.mit.edu>
Date: Mon, 7 Jan 2002 10:52:09 -0500

Directory:  Macintosh

none

Directory:  Misc

* PR# 1126 *
Subject: R-bug report www page whishlist
From: jens.lund@nordea.com
Date: Wed, 10 Oct 2001 18:24:29 +0200 (MET DST)
* PR# 1158 *
Subject: bug.report()sends empty message
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Mon, 05 Nov 2001 10:05:27 -0500

Directory:  Models

* PR# 1331 *
Subject: Bug in glm.fit?
From: Berwin Turlach <berwin@maths.uwa.edu.au>
Date: Wed, 27 Feb 2002 16:15:24 +0800 (WST)

Directory:  Startup

none

Directory:  System-specific

* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500
* PR# 1020 *
Subject: .Call and Mandrake 8.0
From: lcottret@yahoo.fr
Date: Wed, 11 Jul 2001 15:34:23 +0200 (MET DST)
--problem with symbol names only on Mandrake 8.0, not 7.2
--needs reply to follow-up
* PR# 1097 *
Subject: R 1.3.1 fails 'make check' on arm in the Bessel example
From: Dirk Eddelbuettel <edd@debian.org>
Date: Thu, 20 Sep 2001 23:54:19 -0500
* PR# 1140 *
Subject: Possible bug, Rprof() and scan(pipe())
From: Don MacQueen <macq@llnl.gov>
Date: Tue, 23 Oct 2001 13:50:26 -0700
--Doesn't happen on Solaris or Linux
* PR# 1145 *
Subject: Problem testing R version 1.3.1 on SGI Irix
From: Gordon Lack <gml4410@ggr.co.uk>
Date: Fri, 26 Oct 2001 19:04:04 +0100
--error from using SGI libblas (not reported on other systems?)
--use --without-blas
* PR# 1261 *
Subject: R_140 AND RHL_72 AND Packages
From: Patrick Gonin <gonin@genethon.fr>
Date: Wed, 15 Jan 2003 13:25:17 +0100
--Seems to relate to RH7.2 rpms
* PR# 1268 *
Subject: Solaris 2.6 Compile
From: gm81640@development.nssmb.com
Date: Thu, 17 Jan 2002 06:28:26 +0100 (MET)
--Most likely a compiler installation problem
* PR# 1272 *
Subject: eigen segfault with GCC 3 on Solaris
From: Paul Gilbert <pgilbert@bank-banque-canada.ca>
Date: Thu, 17 Jan 2002 15:14:33 -0500
--Seems to be a problem with g77 in gcc 3.0.2 on Solaris only.
--Probably a compiler bug
* PR# 1275 *
Subject: compile problem with bessel_i.c on IRIX64 flexor 6.5 10100655 IP35 (uname -a)
From: Walter Tautz <wtautz@math.uwaterloo.ca>
Date: Tue, 22 Jan 2002 10:05:20 -0500 (EST)
* PR# 1289 *
Subject: R 1.4.0 build fails on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Wed, 30 Jan 2002 14:10:30 +0100 (MET)
* PR# 1291 *
Subject: Installation problem : SunOS
From: brendan_mcmahon@prusec.com
Date: Thu, 31 Jan 2002 18:00:55 +0100 (MET)
--looks like gcc compiled under different OS version.
* PR# 1316 *
Subject: shared libraries on AIX
From: lio@hpss1.ccs.ornl.gov
Date: Mon, 18 Feb 2002 18:53:41 +0100 (MET)

Directory:  TooMuchAtOnce

none

Directory:  Windows

none

Directory:  incoming

* PR# 1240 *
Subject:  R CMD check 
From: hoffmann@wsl.ch
Date: Fri, 4 Jan 2002 12:51:15 +0100 (MET)
* PR# 1283 *
Subject: max/min of NULL gives MININT/MAXINT instead of -INF/+INF
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 14:36:52 -0500
--this was on purpose (type preserving); R 1.4.1 at least documents this
--We currently plan to return -/+ Inf from 1.5.0 on		-- MMä
* PR# 1284 *
Subject: make check fails when R_HOME env var set
From: "Warnes, Gregory R" <gregory_r_warnes@groton.pfizer.com>
Date: Fri, 25 Jan 2002 15:08:33 -0500
* PR# 1330 *
Subject:  itemize/item crashes R CMD check 
From: Ben Bolker <bolker@zoo.ufl.edu>
Date: Tue, 26 Feb 2002 15:13:04 -0500
* PR# 1397 *
Subject: solve() benchmark in R-1.4.1
From: hyu@stats.uwo.ca
Date: Wed, 20 Mar 2002 04:50:38 +0100 (MET)
* PR# 1399 *
Subject: Have a good Lady Day
From: "t.lockx" <t.lockx@liftoff.nl>
Date: Wed, 20 Mar 2002 06:04:37 -0600
* PR# 1400 *
Subject: RMySQL integer range bug
From: matthias.piksa@web.de
Date: Wed, 20 Mar 2002 13:41:37 +0100 (MET)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Thu Mar 21 07:47:56 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Thu, 21 Mar 2002 08:47:56 +0100 (MET)
Subject: [Rd] Small typo in An Introduction to R (PR#1402)
Message-ID: <200203210747.IAA17526@pubhealth.ku.dk>

At a snail's pace I keep on translating an introduction to R into italian;
I have reached the section describing the glm() function, in which some
example code is presented. The very last line of code, before the
beginning of the section on Poisson models is:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fmp)); c(ldp, ldl)

which of course gives results 43.663 and 43.663; the correct code should
be:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fml)); c(ldp, ldl)

which gives the expected results 43.663 and 43.601

-- 
Michele Alzetta




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mikalzet@libero.it  Thu Mar 21 07:48:49 2002
From: mikalzet@libero.it (mikalzet@libero.it)
Date: Thu, 21 Mar 2002 08:48:49 +0100 (MET)
Subject: [Rd] Small typo in An Introduction to R (PR#1403)
Message-ID: <200203210748.IAA17548@pubhealth.ku.dk>

At a snail's pace I keep on translating an introduction to R into italian;
I have reached the section describing the glm() function, in which some
example code is presented. The very last line of code, before the
beginning of the section on Poisson models is:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fmp)); c(ldp, ldl)

which of course gives results 43.663 and 43.663; the correct code should
be:

ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fml)); c(ldp, ldl)

which gives the expected results 43.663 and 43.601

-- 
Michele Alzetta




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Thu Mar 21 12:13:52 2002
From: ligges@amadeus.statistik.uni-dortmund.de (ligges@amadeus.statistik.uni-dortmund.de)
Date: Thu, 21 Mar 2002 13:13:52 +0100 (MET)
Subject: [Rd] legend - bug with argument angle (PR#1404)
Message-ID: <200203211213.NAA21145@pubhealth.ku.dk>

When legend() is used with the angle argument as follows, not only the
boxes beside the legend text, but also the whole legend box is filled
with shading lines.
I think this is not intended:

 plot(1:10)
 legend(8, 4, c("A", "B"), angle=c(10, 80), fill=NULL, density=20)


I'd suggest as a fix (legend.R of R-1.5.0):

25c25
<     rect2 <- function(left, top, dx, dy, ...) {
---
>     rect2 <- function(left, top, dx, dy, angle, ...) {
133c133
<     rect2(left, top, dx = w, dy = h, col = bg)
---
>     rect2(left, top, dx = w, dy = h, col = bg, angle = NULL)
141c141
<     rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill)
---
>     rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill, angle = angle)



Uwe Ligges

       _              
platform i386-pc-mingw32
arch     x86            
os       Win32          
system   x86, Win32     
status                  
major    1              
minor    4.1   [and 1.5.0]
year     2002           
month    01             
day      30             
language R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Thu Mar 21 16:13:42 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 21 Mar 2002 17:13:42 +0100 (MET)
Subject: [Rd] legend - bug with argument angle (PR#1404)
Message-ID: <200203211613.RAA24151@pubhealth.ku.dk>

>>>>> "UweL" == Uwe Ligges <ligges@amadeus.statistik.uni-dortmund.de> writes:

    UweL> When legend() is used with the angle argument as follows, not only the
    UweL> boxes beside the legend text, but also the whole legend box is filled
    UweL> with shading lines.
    UweL> I think this is not intended:

    UweL> plot(1:10)
    UweL> legend(8, 4, c("A", "B"), angle=c(10, 80), fill=NULL, density=20)


    UweL> I'd suggest as a fix (legend.R of R-1.5.0):

    UweL> 25c25
    UweL> <     rect2 <- function(left, top, dx, dy, ...) {
    UweL> ---
    >> rect2 <- function(left, top, dx, dy, angle, ...) {
    UweL> 133c133
    UweL> <     rect2(left, top, dx = w, dy = h, col = bg)
    UweL> ---
    >> rect2(left, top, dx = w, dy = h, col = bg, angle = NULL)
    UweL> 141c141
    UweL> <     rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill)
    UweL> ---
    >> rect2(left=xt, top=yt+ybox/2, dx = xbox, dy = ybox, col = fill, angle = angle)

Thank you, Uwe!
The fix looks very reasonable and should make it to R-devel
soon.

Martin


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu Mar 21 16:25:35 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 21 Mar 2002 17:25:35 +0100
Subject: [Rd] Commas in formatC
In-Reply-To: <15503.38106.38626.976198@gargle.gargle.HOWL>
References: <15503.38106.38626.976198@gargle.gargle.HOWL>
Message-ID: <15514.2431.937670.625276@gargle.gargle.HOWL>

>>>>> "DavidB" == David Brahm <brahm@alum.mit.edu> writes:

    DavidB> formatC() is great for formatting numbers!  But it
    DavidB> would be even better if it could optionally insert
    DavidB> commas (or semicolons), e.g.

    R> formatC(1234567.89, digits=2, format="f", commas=T)
    DavidB> [1] "1,234,567.89"

    DavidB> Here's a snippet of code that does that, which could
    DavidB> more or less just be inserted into at the end of
    DavidB> formatC if any R-core guru were so inclined.  "r" is
    DavidB> the result so far, and "commas" is a logical flag:

    DavidB> stp <- regexpr("[0-9]+", r);  len <- attr(stp, "match.length")
    DavidB> if (commas && (maxl <- max(len)) > 3) for (i in seq(3, maxl-1, 3))
    DavidB> r[len>i] <- paste(substring(r[len>i], 1, (stp+len-1-i)[len>i]),
    DavidB> substring(r[len>i], (stp+len-i)[len>i]), sep=",")

Thank you, David, for the suggestion.

I'm looking at adding something quite a bit more general
to both format.default() and formatC(), using a new function
prettyNum() and using new arguments (that are compatible to S-plus'
format.default). 

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rdquest12@microsoft.com  Thu Mar 21 17:25:59 2002
From: rdquest12@microsoft.com (rdquest12@microsoft.com)
Date: Thu, 21 Mar 2002 18:25:59 +0100 (MET)
Subject: [Rd] Internet Security Update (PR#1405)
Message-ID: <200203211725.SAA24506@pubhealth.ku.dk>

This is a multi-part message in MIME format.
You should read this with client which 
supported MIME standard.

--NextPart_000235
Content-Type: text/plain;
	charset="us-ascii"
Content-Transfer-Encoding: quoted-printable


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Thu Mar 21 21:00:42 2002
From: ligges@amadeus.statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 21 Mar 2002 22:00:42 +0100
Subject: [Rd] barplots & ylim (PR#1398)
References: <200203200807.JAA08835@pubhealth.ku.dk>
Message-ID: <3C9A49FA.7E1DC0F0@statistik.uni-dortmund.de>

jan.wiener@tuebingen.mpg.de wrote:
> 
> hi,
> when having a barplot one might wants to start the y-axis at some
> certain value (besides 0).
> 
> e.g.
> 
> x <- c(4,5,6,7)
> barplot(x, ylim=c(3,8))
> 
> as you can see, the bars are plotted below the limit specified by ylim.


The bug was already filed as bug report #1088 by Peter Whiting,
including the suggestion for a fix.
So far the fix looks reasonable, if the setting of xpd=TRUE is needed
anywhere [and cannot determined automatically by a smart piece of code].
I cannot imagine such a situation, can anyone tell me the reason why
par(xpd=TRUE) should be set (hard coded or as a default), please? Thank
you.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 22 08:02:06 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 22 Mar 2002 09:02:06 +0100 (MET)
Subject: [Rd] Inconsistencies in sum() (PR#1408)
Message-ID: <200203220802.JAA26660@pubhealth.ku.dk>

R 1.4.1

sum() tries to keep the result integer, although that is not
currently documented (and I am about to change it).

> x <- as.integer(2^30)
> x

1) inconsistent in warning or not:

> sum(x, x)
[1] NA
> sum(c(x, x))
[1] NA
Warning message:
Integer overflow in sum(.); use sum(as.numeric(.))

2) It's order-dependent:

> sum(0.0, x, x)
[1] 2147483648
> typeof(.Last.value)
[1] "double"
> sum(x, x, 0.0)
[1] NA
> typeof(.Last.value)
[1] "double"

I believe that it should calculate in integers only if *all* the
arguments are integers, that is behave like

> sum(c(x, x, 0.0))
[1] 2147483648


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri Mar 22 08:13:57 2002
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 22 Mar 2002 08:13:57 +0000
Subject: [Rd] Commas in formatC
References: <15503.38106.38626.976198@gargle.gargle.HOWL> <15514.2431.937670.625276@gargle.gargle.HOWL>
Message-ID: <3C9AE7C5.829F6629@durham.ac.uk>

Martin Maechler wrote:
> 
> >>>>> "DavidB" == David Brahm <brahm@alum.mit.edu> writes:
> 
>     DavidB> formatC() is great for formatting numbers!  But it
>     DavidB> would be even better if it could optionally insert
>     DavidB> commas (or semicolons), e.g.
> 
>     R> formatC(1234567.89, digits=2, format="f", commas=T)
>     DavidB> [1] "1,234,567.89"
> 
>     DavidB> Here's a snippet of code that does that, which could
>     DavidB> more or less just be inserted into at the end of
>     DavidB> formatC if any R-core guru were so inclined.  "r" is
>     DavidB> the result so far, and "commas" is a logical flag:
> 
>     DavidB> stp <- regexpr("[0-9]+", r);  len <- attr(stp, "match.length")
>     DavidB> if (commas && (maxl <- max(len)) > 3) for (i in seq(3, maxl-1, 3))
>     DavidB> r[len>i] <- paste(substring(r[len>i], 1, (stp+len-1-i)[len>i]),
>     DavidB> substring(r[len>i], (stp+len-i)[len>i]), sep=",")
> 
> Thank you, David, for the suggestion.
> 
> I'm looking at adding something quite a bit more general
> to both format.default() and formatC(), using a new function
> prettyNum() and using new arguments (that are compatible to S-plus'
> format.default).

Hi Martin,

Maybe this is a step in the wrong direction, but I actually like using C
string formatting, eg I would like to be able to type something like

  str <- stringC("The man called %s is %i feet tall", "Sven", 6)

which is also used in Python via the string formatting operator, '%'. 
Is this a possibility?

Cheers, Jonathan.

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Fri Mar 22 11:15:20 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Fri, 22 Mar 2002 12:15:20 +0100
Subject: [Rd] Commas in formatC
In-Reply-To: <3C9AE7C5.829F6629@durham.ac.uk>
References: <15503.38106.38626.976198@gargle.gargle.HOWL>
 <15514.2431.937670.625276@gargle.gargle.HOWL>
 <3C9AE7C5.829F6629@durham.ac.uk>
Message-ID: <15515.4680.624272.966586@gargle.gargle.HOWL>

>>>>> "JonR" == Jonathan Rougier <J.C.Rougier@durham.ac.uk> writes:

    JonR> Martin Maechler wrote:
    >>  >>>>> "DavidB" == David Brahm <brahm@alum.mit.edu>
    >> writes:
    >> 
    DavidB> formatC() is great for formatting numbers!  But it
    DavidB> would be even better if it could optionally insert
    DavidB> commas (or semicolons), e.g.
    >>
    R> formatC(1234567.89, digits=2, format="f", commas=T)
    DavidB> [1] "1,234,567.89"
    >>
    DavidB> Here's a snippet of code that does that, which could
    DavidB> more or less just be inserted into at the end of
    DavidB> formatC if any R-core guru were so inclined.  "r" is
    DavidB> the result so far, and "commas" is a logical flag:
    >>
    DavidB> stp <- regexpr("[0-9]+", r); len <- attr(stp,
    DavidB> "match.length") if (commas && (maxl <- max(len)) >
    DavidB> 3) for (i in seq(3, maxl-1, 3)) r[len>i] <-
    DavidB> paste(substring(r[len>i], 1, (stp+len-1-i)[len>i]),
    DavidB> substring(r[len>i], (stp+len-i)[len>i]), sep=",")
    >>  Thank you, David, for the suggestion.
    >> 
    >> I'm looking at adding something quite a bit more general
    >> to both format.default() and formatC(), using a new
    >> function prettyNum() and using new arguments (that are
    >> compatible to S-plus' format.default).

(in the mean time available in R-devel's snapshot of last night)


    JonR> Hi Martin,

    JonR> Maybe this is a step in the wrong direction, but I
    JonR> actually like using C string formatting, eg I would
    JonR> like to be able to type something like

    JonR>   str <- stringC("The man called %s is %i feet tall", "Sven", 6)

    JonR> which is also used in Python via the string formatting
    JonR> operator, '%'.  Is this a possibility?

of course. But just a ``nice to have'' possibility.
If we had it, I'd probably rather call it sprintf(.....) though.

This should be a nice exercise to solve with  .External()
{so we could switch it to .Internal(..) easily},
using C's  sprintf() -- the most tricky part might be to pass an
arbitrary number of arguments to sprintf().

Submissions are welcome... ;-)

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Timothy.Keitt@stonybrook.edu  Fri Mar 22 15:55:11 2002
From: Timothy.Keitt@stonybrook.edu (Timothy H. Keitt)
Date: 22 Mar 2002 10:55:11 -0500
Subject: [Rd] name spaces?
Message-ID: <1016812511.22201.19.camel@keittlab-6>

I'm revisiting the R/S DBI package and was wondering if there is any
plan to implement package name spaces in R/S. I've taken to the habit of
prepending a few characters to function names in packages to avoid
collisions, e.g., dbConnect(). An alternative would be DBI::connect()
(s/::/preferred/) which in some ways I find more pleasing. Not having
thought about it in detail, it seems pretty simple, except for backward
compatibility. Packages already load function defs into their own
environment. Keeping the name space seperate means simply not adding
that environment to the search path and using the package name as an
index into a name space lookup table, i.e., connect() looks in global
and DBI::connect() looks in the DBI package environment. One could then
have a use(DBI::connect) function that loads 'connect' into the global
name space, and a global option 'use.name.spaces' or something to change
the default behavior. (An alternate approach would be to use
DBI.connect() and add a switch to 'library' or global option that strips
off the 'DBI' prefix.) Anyway, it would help in nailing down the DBI
interface to know if some name space mechanism is in the works.

Cheers,
Tim

-- 
Timothy H. Keitt
Department of Ecology and Evolution
State University of New York at Stony Brook
Stony Brook, New York 11794 USA
Phone: 631-632-1101, FAX: 631-632-7626
http://life.bio.sunysb.edu/ee/keitt/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 22 17:01:20 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Mar 2002 18:01:20 +0100 (MET)
Subject: [Rd] Small typo in An Introduction to R (PR#1402)
Message-ID: <200203221701.SAA02447@pubhealth.ku.dk>

Thank you, Michele.

I've fixed it now.
Martin

>>>>> "Michele" == Michele Alzetta <mikalzet@libero.it> writes:

    Michele> At a snail's pace I keep on translating an
    Michele> introduction to R into italian; I have reached the
    Michele> section describing the glm() function, in which
    Michele> some example code is presented. The very last line
    Michele> of code, before the beginning of the section on
    Michele> Poisson models is:

    Michele> ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fmp)); c(ldp, ldl)

    Michele> ........ the correct code should    Michele> be:

    Michele> ldp <- ld50(coef(fmp)); ldl <- ld50(coef(fml)); c(ldp, ldl)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 22 17:08:14 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Mar 2002 18:08:14 +0100 (MET)
Subject: [Rd] bug in options() - help page (PR#1323)
Message-ID: <200203221708.SAA02492@pubhealth.ku.dk>

>>>>> "BDR" == Brian D Ripley <ripley@stats.ox.ac.uk> writes:

    BDR> On Sat, 23 Feb 2002 o.christensen@lancaster.ac.uk
    BDR> wrote:
    >> Not all options listed on the help page for options() are
    >> set initially.  This should be said on the help page.

    BDR> Is it said that they are?

no, and of course you are right.
but I still have added a short sentence in the details section.
Closing this bug now.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 22 17:37:45 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Mar 2002 18:37:45 +0100 (MET)
Subject: [Rd] Rdconv -> HTML bug {was ... `las' on `par' help...} (PR#1257)
Message-ID: <200203221737.SAA02593@pubhealth.ku.dk>

>>>>> "Achim" == Achim Zeileis <zeileis@ci.tuwien.ac.at> writes:

    Achim> Just a small documentation bug: something went wrong
    Achim> for the description of the graphical parameter `las'
    Achim> on the HTML version of the `par' help page: `las' is
    Achim> missing and instead a line from the description is
    Achim> used. 

Danke, Achim.

Confirmed and still present in the current R-devel;
and as you say, it's only in the HTML version.

I'm quite sure it is only a bug in the underlying  Rdconv perl
script, probably a consequence of the nesting of \{..\} inside  \describe{..}.
The same things works e.g. in pretty.Rd.

   R CMD Rdconv --type=html par.Rd

still gives html with that line missing (and replaced by a wrong
one).


Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Fri Mar 22 19:42:38 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Fri, 22 Mar 2002 20:42:38 +0100 (MET)
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
Message-ID: <200203221942.UAA02846@pubhealth.ku.dk>

I found this tracing a bug when experimenting with a new sort()
function using match.arg().

It was triggered because mosaicplot.default(.) has an argument
called `sort' and calls itself the sort() function  in which I
was using match.arg()...

Here is (input for) a small clean example :

####  bad  match.arg() // sys.function() bug :
####  MM, 22.3.2002

callme <- function(a = 1, mm = c("Abc", "Bde")){
    mm <- match.arg(mm)
    cat("mm = "); str(mm)
    invisible()
}


## These are as desired
callme()
callme(mm="B")

mycaller <- function(x = 1, callme = pi) {
    callme(x)
}

mycaller()
##-> mm = NULL

## but should give "Abc !!

-------

Explanation :

 In match.arg(), there's
     formal.args <- formals(sys.function(sys.parent()))
 and you can check that  sys.function(sys.parent())
 gives the number pi instead of the the callme function !! :

debug(match.arg)
mycaller()
.....

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 22 22:39:10 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 22 Mar 2002 23:39:10 +0100
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
In-Reply-To: <200203221942.UAA02846@pubhealth.ku.dk>
References: <200203221942.UAA02846@pubhealth.ku.dk>
Message-ID: <x2adt0448h.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> I found this tracing a bug when experimenting with a new sort()
> function using match.arg().
> 
> It was triggered because mosaicplot.default(.) has an argument
> called `sort' and calls itself the sort() function  in which I
> was using match.arg()...
> 
> Here is (input for) a small clean example :
> 
> ####  bad  match.arg() // sys.function() bug :
> ####  MM, 22.3.2002
> 
> callme <- function(a = 1, mm = c("Abc", "Bde")){
>     mm <- match.arg(mm)
>     cat("mm = "); str(mm)
>     invisible()
> }
> 
> 
> ## These are as desired
> callme()
> callme(mm="B")
> 
> mycaller <- function(x = 1, callme = pi) {
>     callme(x)
> }
> 
> mycaller()
> ##-> mm = NULL
> 
> ## but should give "Abc !!
> 
> -------
> 
> Explanation :
> 
>  In match.arg(), there's
>      formal.args <- formals(sys.function(sys.parent()))
>  and you can check that  sys.function(sys.parent())
>  gives the number pi instead of the the callme function !! :
> 
> debug(match.arg)
> mycaller()
> .....

This looks suspiciously like the same issue as PR#921. Did someone
have plans to change the context stack handling so that we could have
a "real" sys.function()? To quote my own followup to PR#921:

"The problem is that we only actually store the call in the context
structure, not the function, so sys.function has to grab the call,
take the 1st element, and reevaluate it in the parent frame."



-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Sat Mar 23 18:01:33 2002
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Sat, 23 Mar 2002 19:01:33 +0100 (MET)
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
Message-ID: <200203231801.TAA04756@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> I found this tracing a bug when experimenting with a new
    >> sort() function using match.arg().
    >> 
    >> It was triggered because mosaicplot.default(.) has an
    >> argument called `sort' and calls itself the sort()
    >> function in which I was using match.arg()...
    >> 
    >> Here is (input for) a small clean example :
    >> 
    >> #### bad match.arg() // sys.function() bug : #### MM,
    >> 22.3.2002
    >> 
    >> callme <- function(a = 1, mm = c("Abc", "Bde")){ mm <-
    >> match.arg(mm) cat("mm = "); str(mm) invisible() }
    >> 
    >> 
    >> ## These are as desired callme() callme(mm="B")
    >> 
    >> mycaller <- function(x = 1, callme = pi) { callme(x) }
    >> 
    >> mycaller() ##-> mm = NULL
    >> 
    >> ## but should give "Abc !!
    >> 
    >> -------
    >> 
    >> Explanation :
    >> 
    >> In match.arg(), there's formal.args <-
    >> formals(sys.function(sys.parent())) and you can check
    >> that sys.function(sys.parent()) gives the number pi
    >> instead of the the callme function !! :
    >> 
    >> debug(match.arg) mycaller() .....

    PD> This looks suspiciously like the same issue as
    PD> PR#921. Did someone have plans to change the context
    PD> stack handling so that we could have a "real"
    PD> sys.function()? To quote my own followup to PR#921:

    PD> "The problem is that we only actually store the call in
    PD> the context structure, not the function, so sys.function
    PD> has to grab the call, take the 1st element, and
    PD> reevaluate it in the parent frame."

hmm, bad news.  
but couldn't it try to do the equivalent of
    get(name, mode = "function")
instead of simply
    get(name)
?

[I think this *must* be fixed, at least we'd have to program
  around it in match.arg()]

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Sun Mar 24 20:35:38 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Sun, 24 Mar 2002 15:35:38 -0500
Subject: [Rd] monthplot() in R?
Message-ID: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com>

The monthplot function in S is useful for plotting seasonal data.
It's not in base R or the ts package; is it in one of the contributed
packages?  (I've written a quick version for myself; if there isn't
one generally available already, I'll make it public somehow.)

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Sun Mar 24 22:01:06 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sun, 24 Mar 2002 23:01:06 +0100
Subject: [Rd] Rnews 2002/2
Message-ID: <15518.19619.318520.376886@mithrandir.hornik.net>

Dear package author,

We are now accepting submissions for the 2002/2 issue of the R
Newsletter.  For more information see

      http://cran.r-project.org/doc/Rnews/

If you are the author of a package on CRAN and you would like to promote
it a little bit, or if you simply have an interesting application using
R, we hope you can find some time to write a short article on it.  We
suggest that it be approximately 2 pages or less.  The idea of the
newsletter is that it be interesting to R users without being too
technical.  For example an article describing a package could begin by
briefly outlining the statistical background and go on to demonstrate
the usage on some typical data set.  Of course graphics are more than
welcome!

Bill Venables is also encouraging submissions to the more specialist
Programmer's Niche column.  In this case the technical level could be a
little higher, of course, but not necessarily: ingeniousness is the key.

Instructions for authors can be found in ``Writing Articles for R News''
in the first issue of Rnews.  Remember that submissions have to be in
LaTeX, and that graphics are preferred in PDF or EPS format.  (Bitmaps
like JPG are also OK but please keep in mind that those cannot be scaled
easily and hence might look ugly in the final version.)

The deadline for submissions is

	 May 17, 2002

Keep the contributions rolling in!

For the Editorial Board,
-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@wu-wien.ac.at  Sun Mar 24 20:36:11 2002
From: Kurt.Hornik@wu-wien.ac.at (Kurt Hornik)
Date: Sun, 24 Mar 2002 21:36:11 +0100
Subject: [Rd] R on AIX
Message-ID: <15518.14523.141912.214609@mithrandir.hornik.net>

Two issues re R on AIX that came up in recent email exchange with Dan
Million <lio@hpss1.ccs.ornl.gov>:

* We currently use the Autoconf AC_AIX macro which essentially 'defines'
  _ALL_SOURCE on AIX.  According to Dan, on AIX one ends up with

	#define _ALL_SOURCE 1

  which follows Autoconf's general pattern, but causes a problem as the
  system headers (unconditionally?) have

	#define _ALL_SOURCE

  which gives a redefinition error.  Now the Autoconf source has

	AC_DEFUN([AC_AIX],
	[AH_VERBATIM([_ALL_SOURCE],
	[/* Define to 1 if on AIX 3.
	   System headers sometimes define this.
	   We just want to avoid a redefinition error message.  */

  etc ... noting the 'AIX 3' part, I am wondering if we need the macro
  at all.  Does anyone know?

* Dan also pointed me to 'run-time linking' vs the usual AIX style
  linking.  Using run-time linking one could simply do

       MAIN_LDFLAGS=-brtl
       SHLIB_LDFLAGS="-G"

  instead of the complicated import/export handling with AIX linking,
  and apparently also no longer need an export file?

  Dan says that run-time linking is available in AIX 4.2 or better, does
  anyone know more about this?  Should it perhaps be made the default if
  available?

Note that I have no access to AIX, hence need help ...

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Mon Mar 25 00:55:53 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Mon, 25 Mar 2002 01:55:53 +0100 (MET)
Subject: [Rd] Typos in R/src/library/base/man/hist.Rd (PR#1412)
Message-ID: <200203250055.BAA07288@pubhealth.ku.dk>

(Line numbers against current r-devel)

line 24: \item AN function to compute the number of cells.
  should be "a"

line 49: is to use the standard FOREGOUND color.}
  should be "foreground".


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon Mar 25 08:36:33 2002
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 25 Mar 2002 09:36:33 +0100
Subject: [Rd] monthplot() in R?
In-Reply-To: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com>
References: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com>
Message-ID: <15518.57745.596938.55703@gargle.gargle.HOWL>

>>>>> "Duncan" == Duncan Murdoch <dmurdoch@pair.com> writes:

    Duncan> The monthplot function in S is useful for plotting
    Duncan> seasonal data.  It's not in base R or the ts
    Duncan> package; is it in one of the contributed packages?
    Duncan> (I've written a quick version for myself; if there
    Duncan> isn't one generally available already, I'll make it
    Duncan> public somehow.)

yes; I've found this a missing feature occasionally myself.
If I remember properly, S' version built on the output of sabl()
whereas we'd need one building on stl() out --- if any at all.
As a matter of fact, I'd like a more general setup that does not
only work with periodicity 12.
monthplot() would then only be a compatibility wrapper calling
the more general function.

Note that Brian Ripley has recently added quite a few things to
`ts' in R-devel, including StructTS() for structured time-series
analysis which includes seasonality.

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO C16	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jago@mclink.it  Mon Mar 25 08:40:23 2002
From: jago@mclink.it (Stefano Iacus)
Date: Mon, 25 Mar 2002 09:40:23 +0100
Subject: [Rd] system() function under OSX
Message-ID: <F2A50A71-3FCB-11D6-B953-003065CC4CB8@mclink.it>

Hy,

this is just to say that I have added the system() function to Carbon R. 
Of course, it will work only when R is launched under MacOS X.

Stefano

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon Mar 25 10:56:31 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 25 Mar 2002 11:56:31 +0100
Subject: [Rd] R-bugs outage
Message-ID: <x24rj47w68.fsf@blueberry.kubism.ku.dk>


Looks like someone or something turned off the machine that runs the
bugs.r-project.org website on Sunday (a glance at my floor seems to
disprove the hypothesis that the cleaners did it...). Physically
turning it on this morning seems to have normalized things. The email
interface runs on another machine and was unaffected.

        -p

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From lio@hpss1.ccs.ornl.gov  Mon Mar 25 12:38:58 2002
From: lio@hpss1.ccs.ornl.gov (Dan Million)
Date: Mon, 25 Mar 2002 07:38:58 -0500 (EST)
Subject: [Rd] Re: R on AIX
In-Reply-To: <15518.14523.141912.214609@mithrandir.hornik.net>
Message-ID: <Pine.A41.4.44.0203250732250.29538-100000@hpss1.ccs.ornl.gov>

On Sun, 24 Mar 2002, Kurt Hornik wrote:

> Two issues re R on AIX that came up in recent email exchange with Dan
> Million <lio@hpss1.ccs.ornl.gov>:
>
> * We currently use the Autoconf AC_AIX macro which essentially 'defines'
>   _ALL_SOURCE on AIX.
>
>   ... I am wondering if we need the macro
>   at all.  Does anyone know?

I don't think you do (at least in AIX 4.2 and later).  Any code that
includes stdio.h or just about anything else is going to end up defining
_ALL_SOURCE via system headers, unless _XOPEN_SOURCE or _POSIX_SOURCE
are defined.

> * Dan also pointed me to 'run-time linking' vs the usual AIX style
>   linking.  Using run-time linking one could simply do
>
>        MAIN_LDFLAGS=-brtl
>        SHLIB_LDFLAGS="-G"
>
>   instead of the complicated import/export handling with AIX linking,
>   and apparently also no longer need an export file?
>
>   Dan says that run-time linking is available in AIX 4.2 or better, does
>   anyone know more about this?  Should it perhaps be made the default if
>   available?
>
> Note that I have no access to AIX, hence need help ...

If you use gcc, you still need the -Wl prefix to these options; e.g.:

	MAIN_LDFLAGS=-Wl,-brtl
	SHLIB_LDFLAGS=-Wl,-G

I did still use the exports file when I did the build.

As to when runtime linking is needed and when it isn't, I have no
definitive answers.  All I know is that everything worked when I used
runtime linking, and it did not work when I didn't.

Dan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Mon Mar 25 12:50:30 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Mon, 25 Mar 2002 06:50:30 -0600
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
In-Reply-To: <x2adt0448h.fsf@blueberry.kubism.ku.dk>; from p.dalgaard@biostat.ku.dk on Fri, Mar 22, 2002 at 11:39:10PM +0100
References: <200203221942.UAA02846@pubhealth.ku.dk> <x2adt0448h.fsf@blueberry.kubism.ku.dk>
Message-ID: <20020325065030.C7310@nokomis.stat.umn.edu>

On Fri, Mar 22, 2002 at 11:39:10PM +0100, Peter Dalgaard BSA wrote:
> maechler@stat.math.ethz.ch writes:
> 
> This looks suspiciously like the same issue as PR#921. Did someone
> have plans to change the context stack handling so that we could have
> a "real" sys.function()? To quote my own followup to PR#921:
> 
> "The problem is that we only actually store the call in the context
> structure, not the function, so sys.function has to grab the call,
> take the 1st element, and reevaluate it in the parent frame."
> 

I have it on my list but won't get to it for 1.5.

luke

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From luke@stat.umn.edu  Mon Mar 25 13:57:26 2002
From: luke@stat.umn.edu (Luke Tierney)
Date: Mon, 25 Mar 2002 07:57:26 -0600
Subject: [Rd] name spaces?
In-Reply-To: <1016812511.22201.19.camel@keittlab-6>; from Timothy.Keitt@stonybrook.edu on Fri, Mar 22, 2002 at 10:55:11AM -0500
References: <1016812511.22201.19.camel@keittlab-6>
Message-ID: <20020325075726.E7310@nokomis.stat.umn.edu>

This is in the works and will hopefully make it into 1.5 or, more
likely at this point, 1.6.  A preliminary version is available at
http://www.stat.umn.edu/~luke/R/namespaces/morenames.html or off
the developer page http://developer.r-project.org.

We do not yet have a syntactic mechanism like DBI::connect for
referring to an exported variable from a package without explicitly
importing the variable, but we will probably add something along those
lines.

One change that is likely to happen as part of introducing name spaces
is that functions defined in base package will have .BaseNamespaceEnv
as their environment rather than .GlobalEnv.  Evaluating in this
environment means base is searched before the global environment and
attached packages.  As a result, variable assignments in loaded
packages and at top level will no longer shadow variables used within
the definition of base functions.  This will eliminate certain errors
of accidentally redefining things like pi that come up occasionally,
but will also make deliberate redefinition of functions in base harder
(not impossible, just harder).

In principle implementing name spaces is just a matter of using
environments as you describe, but there are a few complications.  One
is that with importing from one name space into another a variable can
in some sense exist in two environments at the same time, and what
this means needs to be resolved.  I've chosen the easy way out of
making variables in name spaces read-only (which is useful for other
reasons as well).  Another issue is that in R a closure can capture a
reference to a name space which can then be stored in a .Rdata file.
Making sure that sensible things happen when storing (_not_ writing
out the contents of the entire name space) and loading (attempting to
locate and load the right name space) makes things a bit tricky and
forces some compromises, but I think this is all mostly resolved.

luke

On Fri, Mar 22, 2002 at 10:55:11AM -0500, Timothy H. Keitt wrote:
> I'm revisiting the R/S DBI package and was wondering if there is any
> plan to implement package name spaces in R/S. I've taken to the habit of
> prepending a few characters to function names in packages to avoid
> collisions, e.g., dbConnect(). An alternative would be DBI::connect()
> (s/::/preferred/) which in some ways I find more pleasing. Not having
> thought about it in detail, it seems pretty simple, except for backward
> compatibility. Packages already load function defs into their own
> environment. Keeping the name space seperate means simply not adding
> that environment to the search path and using the package name as an
> index into a name space lookup table, i.e., connect() looks in global
> and DBI::connect() looks in the DBI package environment. One could then
> have a use(DBI::connect) function that loads 'connect' into the global
> name space, and a global option 'use.name.spaces' or something to change
> the default behavior. (An alternate approach would be to use
> DBI.connect() and add a switch to 'library' or global option that strips
> off the 'DBI' prefix.) Anyway, it would help in nailing down the DBI
> interface to know if some name space mechanism is in the works.
> 
> Cheers,
> Tim
> 
> -- 
> Timothy H. Keitt
> Department of Ecology and Evolution
> State University of New York at Stony Brook
> Stony Brook, New York 11794 USA
> Phone: 631-632-1101, FAX: 631-632-7626
> http://life.bio.sunysb.edu/ee/keitt/
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
Luke Tierney
University of Minnesota                      Phone:           612-625-7843
School of Statistics                         Fax:             612-624-8868
313 Ford Hall, 224 Church St. S.E.           email:      luke@stat.umn.edu
Minneapolis, MN 55455 USA                    WWW:  http://www.stat.umn.edu
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Mon Mar 25 14:33:14 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Mon, 25 Mar 2002 09:33:14 -0500
Subject: [Rd] monthplot() in R?
In-Reply-To: <15518.57745.596938.55703@gargle.gargle.HOWL>
References: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com> <15518.57745.596938.55703@gargle.gargle.HOWL>
Message-ID: <81du9ugn9kq7plt4g8l65s9ai83hgcio0c@4ax.com>

On Mon, 25 Mar 2002 09:36:33 +0100, you wrote in message
<15518.57745.596938.55703@gargle.gargle.HOWL>:

>>>>>> "Duncan" == Duncan Murdoch <dmurdoch@pair.com> writes:
>
>    Duncan> The monthplot function in S is useful for plotting
>    Duncan> seasonal data. 

>yes; I've found this a missing feature occasionally myself.
>If I remember properly, S' version built on the output of sabl()
>whereas we'd need one building on stl() out --- if any at all.
>As a matter of fact, I'd like a more general setup that does not
>only work with periodicity 12.
>monthplot() would then only be a compatibility wrapper calling
>the more general function.

Okay, I'll put something together.  I was also thinking of a more
general base function which would be called by monthplot.ts or
monthplot.stl.  The base function would show subsets of the time
series broken up according to arbitrary categories; for monthplot, the
categories would be the months.

Duncan


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@amadeus.statistik.uni-dortmund.de  Mon Mar 25 14:53:37 2002
From: ligges@amadeus.statistik.uni-dortmund.de (Uwe Ligges)
Date: Mon, 25 Mar 2002 15:53:37 +0100
Subject: [Rd] Re: [R] persp(): add second plane
References: <Pine.LNX.4.30.0203151003270.20916-100000@bolker.zoo.ufl.edu> <3C921E6F.BB81543B@statistik.uni-dortmund.de>
Message-ID: <3C9F39F1.4C9B9C6C@statistik.uni-dortmund.de>

Uwe Ligges wrote:
> 
> Ben Bolker wrote:
> >
> >   [forwarded to R-devel]
> >
> >   I'm most interested in integrating persp() and scatterplot3d() so that
> > we can (e.g.) easily draw graphs like response surfaces with associated
> > points (yes, there are serious questions about whether 3d perspective
> > plots are good general tools for data presentation, but there are some
> > places where it's really useful).  I can think of a bunch of quick hacks,
> > but I don't really know how an integrated system should be designed for
> > consistency and ease of use.
> 
> I think it's not possible to write an integrated system that uses the
> functions scatterplot3d() and persp() as they are. The straightforward
> way, from my point of view, is to write a new function (suggestions for
> a name?) along scatterplot3d()'s code, that uses persp() instead of
> scatterplot3d()'s own plot function in principle.
> 
> I'll volunteer to write such a function during the next months, but
> there are still some other points on my todo list (and I myself don't
> need such a function at present).

After some investigations:
I think for a really clean solution for plotting surfaces *and*
points/lines or other elements into a *perspective* 3D plot a redesign
of persp() is needed, or much better a whole 3D graphics system in R
(very similar to the existing 2D graphics system), but I don't have the
time to work on the latter.

Instead of the above mentioned solutions, I did a quick hack and added a
function s3d.persp() to the package scatterplot3d_0.3-10. This version
is *only* available at
http://www.statistik.uni-dortmund.de/leute/ligges.htm .
The function can plot points and other elements into surface plots.
Most of the code is stolen from persp() and scatterplot3d().
Bug (not so easy to fix, needs the redesign mentioned above): All
elements except the surface are plotted in front of the surface, even if
they shouldn't appear (i.e. located behind or below the surface).
I don't want to upload to CRAN until the function is not tested
extensively and as long it is heavily under development. Bug reports and
suggestions are welcome.

Uwe Ligges
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Mon Mar 25 15:37:05 2002
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Mon, 25 Mar 2002 16:37:05 +0100
Subject: [Rd] some problems with r 1.5.0 on win2k
References: <ssds9u84ndrakgg6h56bq9b6jcoafuaolu@4ax.com> <15518.57745.596938.55703@gargle.gargle.HOWL> <81du9ugn9kq7plt4g8l65s9ai83hgcio0c@4ax.com>
Message-ID: <3C9F4421.AB4D3D2C@univie.ac.at>

i managed to build r-devel 1.5.0 on win2k 

during the build, i experienced the following problems:


1. Failure in make when starting from scratch
make in src/gnuwin fails at the first run because it tries to use
Rpwd.exe. It does, however, create Rpwd.exe before it fails.
Copying Rpwd.exe to a directory on the path the allows 
a complete pass through make.


2. Warning when building docs
make docs

(Function and Variable Index) [53] (R-lang.vrs [54]) Appendix A [55]
[56] )
(see the transcript file for additional information)
! pdfTeX warning (dest): name{Writing R documentation} has been
referenced but
does not exist, replaced by a fixed one

! pdfTeX warning (dest): name{Preface} has been referenced but does not
exist,
replaced by a fixed one

this might indicate some broken links in the pdf file.


3. Warning when building docs
D:\Work\R-devel\doc\manual>make -f Makefile.win info
makeinfo  -D UseExternalXrefs R-FAQ.texi
makeinfo  -D UseExternalXrefs R-admin.texi
makeinfo  -D UseExternalXrefs R-data.texi
makeinfo  -D UseExternalXrefs R-exts.texi
makeinfo  -D UseExternalXrefs R-intro.texi
R-intro.texi:781: warning: Info cannot handle `:' in index entry `:'.
makeinfo  -D UseExternalXrefs R-lang.texi

4. after installation:
Help -> R language (html)
starts mozilla 0.9.9 (which is the default browser on this machine),
but when i go to the search page and enter a search term,
the browser does NOT jump to any other page, it stays on the search
page.

p.s.:
gnuwin32/INSTALL
tells one to send messages to
R-windows@r-project.org
but mail sent there bounces




--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 25 16:50:25 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 25 Mar 2002 16:50:25 +0000 (GMT)
Subject: [Rd] some problems with r 1.5.0 on win2k
In-Reply-To: <3C9F4421.AB4D3D2C@univie.ac.at>
Message-ID: <Pine.LNX.4.31.0203251646410.6383-100000@gannet.stats>

On Mon, 25 Mar 2002, Erich Neuwirth wrote:

> i managed to build r-devel 1.5.0 on win2k
>
> during the build, i experienced the following problems:
>
>
> 1. Failure in make when starting from scratch
> make in src/gnuwin fails at the first run because it tries to use
> Rpwd.exe. It does, however, create Rpwd.exe before it fails.
> Copying Rpwd.exe to a directory on the path the allows
> a complete pass through make.

On all my machines its makes Rpwd.exe, and then spawns a separate make
which proceeds.  It should not fail.

> 3. Warning when building docs
> D:\Work\R-devel\doc\manual>make -f Makefile.win info
> makeinfo  -D UseExternalXrefs R-FAQ.texi
> makeinfo  -D UseExternalXrefs R-admin.texi
> makeinfo  -D UseExternalXrefs R-data.texi
> makeinfo  -D UseExternalXrefs R-exts.texi
> makeinfo  -D UseExternalXrefs R-intro.texi
> R-intro.texi:781: warning: Info cannot handle `:' in index entry `:'.
> makeinfo  -D UseExternalXrefs R-lang.texi

That's an incorrect warning from makeinfo 4.1.

> 4. after installation:
> Help -> R language (html)
> starts mozilla 0.9.9 (which is the default browser on this machine),
> but when i go to the search page and enter a search term,
> the browser does NOT jump to any other page, it stays on the search
> page.

That has worked for me, but I took that browser off as it was too flaky.

> p.s.:
> gnuwin32/INSTALL
> tells one to send messages to
> R-windows@r-project.org
> but mail sent there bounces

Well, it may work by release time.  The request to set up the address has
been made.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kss28@mail.cba.nau.edu  Mon Mar 25 20:18:59 2002
From: kss28@mail.cba.nau.edu (kss28@mail.cba.nau.edu)
Date: Mon, 25 Mar 2002 21:18:59 +0100 (MET)
Subject: [Rd] int 32 bit error on SPARC 64bit (PR#1415)
Message-ID: <200203252018.VAA13406@pubhealth.ku.dk>

Full_Name: Krassimir Sedmakov
Version: R-1.4.1
OS: Solaris 8
Submission from: (NULL) (134.114.165.52)


********
Problem:
********

When running make for R-1.4.1 on Solaris 8, SPARC 64 bit the following error
message is generated:

arithmetic.c:672: #error code requires that int have 32 bits
gmake[3]: *** [arithmetic.o] Error 1
gmake[3]: Leaving directory `/opt/R/R-1.4.1/src/main'
gmake[2]: *** [R] Error 2
gmake[2]: Leaving directory `/opt/R/R-1.4.1/src/main'
gmake[1]: *** [R] Error 1
gmake[1]: Leaving directory `/opt/R/R-1.4.1/src'
gmake: *** [R] Error 

*************
Related Code:
*************

***Related code in arithemtic.c file:

667  #ifndef INT_32_BITS
   668  /* configure checks whehter int is 32 bits.  If not this code will
   669     need to be rewritten.  Since 32 bit ints are pretty much universal,
   670     we can worry about writing alternate code when the need arises.
   671     To be safe, we signal a compiler error if int is not 32 bits. */
   672  # error code requires that int have 32 bits
   673  #else
   674  /* Just to be on the safe side, configure ought to check that the
   675     mashine uses two's complement. A define like
   676  #define USES_TWOS_COMPLEMENT (~0 == (unsigned) -1)
   677     might work, but at least one compiler (CodeWarrior 6) chokes on it.
   678     So for now just assume it is true.
   679  */

***Related code in configure file:

10871  if test "${ac_cv_sizeof_int}" = 4; then
10872    cat >> confdefs.h <<\EOF
10873  #define INT_32_BITS 1
10874  EOF
10875
10876  fi
10877  if test "${cross_compiling}" = yes; then
10878    warn_xcompile_sizeof_long="assuming C longs are 4 byte on ${host}"
10879    echo "configure: warning: ${warn_xcompile_sizeof_long}" 1>&2
10880  fi

*********
Solution:
*********
Run ./configure
Ignore warnings
in R-1.4.1/ directory create a file confdefs.h and enter (*see related configure
file)
#define INT_32_BITS 1
Run make
run make install



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon Mar 25 20:48:35 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 25 Mar 2002 21:48:35 +0100 (MET)
Subject: [Rd] int 32 bit error on SPARC 64bit (PR#1415)
Message-ID: <200203252048.VAA13486@pubhealth.ku.dk>

You haven't told us anything about your compilers.  You can set options to
make ints 64bits, and you must not for use with R.

This works correctly for me, using SunPro 6 compilers.

The configure script reports the size of ints, and if this is not 4 bytes,
change the options.  If it is 4 bytes, the correct option will be set.


On Mon, 25 Mar 2002 kss28@mail.cba.nau.edu wrote:

> Full_Name: Krassimir Sedmakov
> Version: R-1.4.1
> OS: Solaris 8
> Submission from: (NULL) (134.114.165.52)
>
>
> ********
> Problem:
> ********
>
> When running make for R-1.4.1 on Solaris 8, SPARC 64 bit the following error
> message is generated:
>
> arithmetic.c:672: #error code requires that int have 32 bits
> gmake[3]: *** [arithmetic.o] Error 1
> gmake[3]: Leaving directory `/opt/R/R-1.4.1/src/main'
> gmake[2]: *** [R] Error 2
> gmake[2]: Leaving directory `/opt/R/R-1.4.1/src/main'
> gmake[1]: *** [R] Error 1
> gmake[1]: Leaving directory `/opt/R/R-1.4.1/src'
> gmake: *** [R] Error
>
> *************
> Related Code:
> *************
>
> ***Related code in arithemtic.c file:
>
> 667  #ifndef INT_32_BITS
>    668  /* configure checks whehter int is 32 bits.  If not this code will
>    669     need to be rewritten.  Since 32 bit ints are pretty much universal,
>    670     we can worry about writing alternate code when the need arises.
>    671     To be safe, we signal a compiler error if int is not 32 bits. */
>    672  # error code requires that int have 32 bits
>    673  #else
>    674  /* Just to be on the safe side, configure ought to check that the
>    675     mashine uses two's complement. A define like
>    676  #define USES_TWOS_COMPLEMENT (~0 == (unsigned) -1)
>    677     might work, but at least one compiler (CodeWarrior 6) chokes on it.
>    678     So for now just assume it is true.
>    679  */
>
> ***Related code in configure file:
>
> 10871  if test "${ac_cv_sizeof_int}" = 4; then
> 10872    cat >> confdefs.h <<\EOF
> 10873  #define INT_32_BITS 1
> 10874  EOF
> 10875
> 10876  fi
> 10877  if test "${cross_compiling}" = yes; then
> 10878    warn_xcompile_sizeof_long="assuming C longs are 4 byte on ${host}"
> 10879    echo "configure: warning: ${warn_xcompile_sizeof_long}" 1>&2
> 10880  fi
>
> *********
> Solution:
> *********
> Run ./configure
> Ignore warnings
> in R-1.4.1/ directory create a file confdefs.h and enter (*see related configure
> file)
> #define INT_32_BITS 1
> Run make
> run make install
>
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Tue Mar 26 16:03:44 2002
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Tue, 26 Mar 2002 17:03:44 +0100
Subject: [Rd] some problems with r 1.5.0 on win2k
References: <20020325183731.43602.qmail@web14204.mail.yahoo.com>
Message-ID: <3CA09BE0.3000205@univie.ac.at>

That was the solution.
Perhaps it is worth mentioning in the INSTALL file.


Garfield Brown wrote:

>>1. Failure in make when starting from scratch
>>make in src/gnuwin fails at the first run because it tries to use
>>Rpwd.exe. It does, however, create Rpwd.exe before it fails.
>>Copying Rpwd.exe to a directory on the path the allows 
>>a complete pass through make.
>>
> 
> I think by default most shells will not search the current directory for
> binaries.
> 
> On win2k using bash with the following line in by .bashrc I have no
> problems
> export PATH=.:$PATH
> 
> likewise with cmd.exe
> set PATH=.;%PATH% does the trick
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Everything you'll ever need on one web page
> from News and Sport to Email and Music Charts
> http://uk.my.yahoo.com
> 
> 
> 


-- 
--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From macq@llnl.gov  Tue Mar 26 18:01:07 2002
From: macq@llnl.gov (macq@llnl.gov)
Date: Tue, 26 Mar 2002 19:01:07 +0100 (MET)
Subject: [Rd] seq.default test for relative range (PR#1416)
Message-ID: <200203261801.TAA19418@pubhealth.ku.dk>

seq.default() tests for the relative range of the from and to 
arguments (see excerpt below) and returns from (only) when the 
relative range is small. The problem is that "small" is too large. 
Also undocumented.

At 17:25 +0000 3/26/02, ripley@stats.ox.ac.uk wrote:
>On Tue, 26 Mar 2002, Don MacQueen wrote:
>
>>  I was surprised when seq.POSIXt() returned a single value rather than
>>  a vector, from inputs that I thought were reasonable. Here's an
>>  example to illustrate:
>>
>>  >  t0 <- ISOdatetime(2002,6,24,0,0,10)
>>
>>  ## expected a sequence of 16 times 1 second apart
>>  >  seq.POSIXt(from=t0,to=t0+15,by='1 sec')
>>  [1] "2002-06-24 00:00:10 PDT"
>>
>>  ## traces to this call
>>  >  seq.default(1024902010,1024902025,by=1)
>>  [1] 1024902010
>>  >
>>
>>  ## which is due to the following expressions in seq.default()
>>        del <- to - from
>>        ## a few lines omitted
>>        dd <- abs(del)/max(abs(to), abs(from))
>>        if (dd < sqrt(.Machine$double.eps)) return(from)
>>
>>  This looks like a trap to catch bad input, and return something
>>  reasonable (or at least not crash).
>>
>>  It's a given that seq.default() pre-dates seq.POSIXt() by many years,
>>  and the test for relative range undoubtedly has good reasons, so it's
>>  probably not a good idea to change seq.default().
>
>Oh, I think it needs to be changed.  That is far too generous a test for
>numerical inaccuracies, by say 5 orders of magnitude.  It is also
>undocumented, so I'd post a bug report on seq.default.
>

Remainder of my original post to R-help and Prof. Ripley's response 
not included in bug report. Subject line was "seq.POSIXt() with short 
time intervals" on 2002-03-26 if anyone wants to see the whole of it.

-Don
-- 
--------------------------------------
Don MacQueen
Environmental Protection Department
Lawrence Livermore National Laboratory
Livermore, CA, USA
--------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jun_sung@hotmail.com  Wed Mar 27 01:00:25 2002
From: jun_sung@hotmail.com (Jun Sung)
Date: Wed, 27 Mar 2002 01:00:25 +0000
Subject: [Rd] 3D visualization using vtk library
Message-ID: <F846yL2m9lHiu3fQtYd00000e6f@hotmail.com>

has there been any attempt to improve the 3D visualization (interactive)
features in R, using the vtk library?
It seems fairly straight forward.
maybe even trivial for somebody who has experience with vtk library.

let me know if there are any obvious reasons i may have overlooked

thanks, in advance for any feedback


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 27 11:19:36 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Mar 2002 12:19:36 +0100
Subject: [Rd] 3D visualization using vtk library
In-Reply-To: <F846yL2m9lHiu3fQtYd00000e6f@hotmail.com>
References: <F846yL2m9lHiu3fQtYd00000e6f@hotmail.com>
Message-ID: <x2bsdaw94n.fsf@blueberry.kubism.ku.dk>

"Jun Sung" <jun_sung@hotmail.com> writes:

> has there been any attempt to improve the 3D visualization (interactive)
> features in R, using the vtk library?
> It seems fairly straight forward.
> maybe even trivial for somebody who has experience with vtk library.
> 
> let me know if there are any obvious reasons i may have overlooked

The same kind of thoughts have crossed my mind, but I don't think
anyone has actually tried it. It is certainly attractive, not just
because the pictures are pretty, but because it offers an interface at
a higher level than e.g. OpenGl (vtk is, for instance, object-based
rather than pixel-based).

It would be very useful if someone cared to sit down and create a few
simple examples.

Some things are clearly trivial since you can access a Tcl interpreter
directly from R via the tcltk package so whatever you can do in Tcl
you can do in R too. You can do it via .Tcl if you must, but you can
also create R commands that parallel the Tcl ones in the same way as
tkbutton() and friends. 

In fact, that interface is a pretty straight subroutine mapping and
actually not very Tcl-ish, so it would probably be rather easy to make
a mapping directly into R as it has already been done for Python and
Java. Easy in principle, that is. You would need an automated
interface generating tool because of the sheer size of the library.

What I don't quite see is how the data interfaces are pieced together.
If you have a data array in R, how do you get it across to the
renderer? This might be easy, but you need to dig deeper to find out.
The non-trivial objects in the example codes seem to be reading from
files, but surely they can also get the information from objects in
their hosting language. 

Much harder is the generic discussion about how you would want to
structure a set of 3D methods for statistical data, so that it becomes
simple and yet flexible in the same way as our current 2D methods (and
even those are under some attack because of the "indelible ink" aspect
and general lack of interactivity).

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From dmurdoch@pair.com  Wed Mar 27 12:16:33 2002
From: dmurdoch@pair.com (Duncan Murdoch)
Date: Wed, 27 Mar 2002 07:16:33 -0500
Subject: [Rd] Re: monthplot() in R?
Message-ID: <3pd3au8ni58jmbft5qa5jegfvbmjgrctta@4ax.com>

I wrote up monthplot, and Brian Ripley put it in r-devel (to be 1.5.0
at the end of next month).

The default method takes 3 inputs:  x, time, and phase.  x is the time
series, time is the time corresponding to each observation (not
necessarily evenly spaced), and phase is a variable that categorizes
the observations, e.g. the month.  It produces a separate small time
series plot for each value of phase.  The ts, stl, and StructTS
methods automatically fill in the time and phase values from the time
series attributes.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed Mar 27 15:45:05 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 27 Mar 2002 16:45:05 +0100
Subject: [Rd] rare bad bug in sys.function() {or match.arg()} (PR#1409)
In-Reply-To: <20020325065030.C7310@nokomis.stat.umn.edu>
References: <200203221942.UAA02846@pubhealth.ku.dk>
 <x2adt0448h.fsf@blueberry.kubism.ku.dk>
 <20020325065030.C7310@nokomis.stat.umn.edu>
Message-ID: <x23cymvwu6.fsf@blueberry.kubism.ku.dk>

Luke Tierney <luke@stat.umn.edu> writes:

> On Fri, Mar 22, 2002 at 11:39:10PM +0100, Peter Dalgaard BSA wrote:
> > maechler@stat.math.ethz.ch writes:
> > 
> > This looks suspiciously like the same issue as PR#921. Did someone
> > have plans to change the context stack handling so that we could have
> > a "real" sys.function()? To quote my own followup to PR#921:
> > 
> > "The problem is that we only actually store the call in the context
> > structure, not the function, so sys.function has to grab the call,
> > take the 1st element, and reevaluate it in the parent frame."
> > 
> 
> I have it on my list but won't get to it for 1.5.

OK. 

Obvious stopgap measure inserted for now (use findVar1, testing for
FUNSXP). Still won't handle the (f(foo))(bar) cases properly, of course. 

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed Mar 27 16:58:59 2002
From: rossini@u.washington.edu (Anthony Rossini)
Date: Wed, 27 Mar 2002 08:58:59 -0800 (PST)
Subject: [Rd] 3D visualization using vtk library
In-Reply-To: <f846yl2m9lhiu3fqtyd00000e6f@hotmail.com>
Message-ID: <Pine.LNX.4.43.0203270858590.24841@hymn03.u.washington.edu>

It should be fairly straightforward.  I'm doing (wrapping a viz library) it for Orca.

best,
-tony


On Wed, 27 Mar 2002, Jun Sung wrote:

> has there been any attempt to improve the 3D visualization (interactive)
> features in R, using the vtk library?
> It seems fairly straight forward.
> maybe even trivial for somebody who has experience with vtk library.
> 
> let me know if there are any obvious reasons i may have overlooked
> 
> thanks, in advance for any feedback
> 
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Wed Mar 27 23:27:12 2002
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Thu, 28 Mar 2002 00:27:12 +0100 (MET)
Subject: [Rd] possible typo in integrate.Rd? (PR#1417)
Message-ID: <200203272327.AAA25697@pubhealth.ku.dk>

Lines 15,16 of R/src/library/base/man/integrate.Rd say:

  \item{f}{An \R function taking a numeric first argument and returning
    a numeric vector the same length. Returning a non-finite [] will

Where I put [], should a word such as "vector", "value", or "element"
be added?

Stephen




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From leisch@ci.tuwien.ac.at  Thu Mar 28 09:18:48 2002
From: leisch@ci.tuwien.ac.at (leisch@ci.tuwien.ac.at)
Date: Thu, 28 Mar 2002 10:18:48 +0100 (MET)
Subject: [Rd] persp + postscript/pdf (PR#1419)
Message-ID: <200203280918.KAA26477@pubhealth.ku.dk>

persp(outer(1:5, 1:5), shade=0.1)

looks nice on the screen, but

postscript()
persp(outer(1:5, 1:5), shade=0.1)
dev.off()


gives an all black surface.
same when using the pdf() device. has already been like that in 1.4.0.

.f




--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 03
 day = 28
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Thu Mar 28 10:39:58 2002
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Thu, 28 Mar 2002 11:39:58 +0100
Subject: [Rd] help browsers in win2k
Message-ID: <3CA2F2FE.5F6E65FC@univie.ac.at>

With all the browser hassles in win2k now
it would be useful if
options(browser=___)
also works in windows if it is set.
if it is not set, the default brwoser should be used.

according to the documentation 
options(browser=____)
only has an effect in unix.

does it seem reasonable to put this on the wish list?


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu Mar 28 11:10:53 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 28 Mar 2002 11:10:53 +0000 (GMT)
Subject: [Rd] help browsers in win2k
In-Reply-To: <3CA2F2FE.5F6E65FC@univie.ac.at>
Message-ID: <Pine.LNX.4.31.0203281110001.16731-100000@gannet.stats>

On Thu, 28 Mar 2002, Erich Neuwirth wrote:

> With all the browser hassles in win2k now
> it would be useful if
> options(browser=___)
> also works in windows if it is set.
> if it is not set, the default brwoser should be used.
>
> according to the documentation
> options(browser=____)
> only has an effect in unix.
>
> does it seem reasonable to put this on the wish list?

Patches accepted.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Thu Mar 28 14:50:09 2002
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Thu, 28 Mar 2002 09:50:09 -0500
Subject: [Rd] R 1.5.0 pre-release snapshots available on Windows
Message-ID: <8ua6aug1nmvbjon0894ere0o24ugi679em@4ax.com>

I'm planning to put snapshots of Windows builds of the r-devel
pre-release version online at

<http://www.stats.uwo.ca/faculty/murdoch/software/r-devel>

a few times before feature freeze, and then more frequently as we
approach the release date.  Look at the dates on the files to see
whether I've posted a new build.

Please send comments about errors in the builds directly to me rather
than to the list, as there are likely to be numerous problems with
them until I get my setup perfected.  For example, I'm pretty sure
that today's build picked up obsolete versions of the recommended
libraries. 

These shouldn't be considered to be stable; don't trust anything
really important to them.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From hammour@msn.com  Thu Mar 28 15:20:33 2002
From: hammour@msn.com (hammour@msn.com)
Date: Thu, 28 Mar 2002 16:20:33 +0100 (MET)
Subject: [Rd] Resize in graphics window cause R to crash (PR#1420)
Message-ID: <200203281520.QAA27153@pubhealth.ku.dk>

Full_Name: Ahmad Abu Hammour
Version: 1.4.1
OS: windows 98
Submission from: (NULL) (206.216.76.228)


Hi,
I made a plot then I wanted to resize it using drop-menue resize. I first
selected fixed then I resized it to smaller. Scroll bars appear. Next, I
selected fit to window. The scoll bars remains. When I scroll horizontally (back
and forth) or vertically (up and dowm), the window started to flash and then the
following message appeared:
"This program has performed an illegal operation and will be shut down.
RGUI caused an invalid page fault in
module R.DLL at 0167:0048f684.
Registers:
EAX=00000000 CS=0167 EIP=0048f684 EFLGS=00010246
EBX=00000000 SS=016f ESP=008f9ad8 EBP=008f9b20
ECX=00000001 DS=016f ESI=01789140 FS=218f
EDX=008f9b08 ES=016f EDI=008f9b00 GS=0000
Bytes at CS:EIP:
80 38 00 74 0f 8d 76 00 80 38 0a 75 01 43 40 80 
Stack dump:
01788d0d 013e5728 013e572e 0000000d 01789140 40280000 008f9b10 008f9b08 00000000
3fe00000 013e572e 00435aa0 00000000 00000000 008f9c30 0048fe47"

This error is caused everytime I do the same thing.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jmc@research.bell-labs.com  Thu Mar 28 19:43:08 2002
From: jmc@research.bell-labs.com (John Chambers)
Date: Thu, 28 Mar 2002 14:43:08 -0500
Subject: [Rd] Some new things in r-devel
Message-ID: <3CA3724C.3A9EA9C9@research.bell-labs.com>

Some code committed today includes:

1.  the recover() interactive browser moved into base from the methods
package (see ?recover)

2.  an extended version of trace() that allows interactive browsing in
the style of S and S-Plus.  This is in the methods package because it
uses classes, but it can be applied to any function.  See ?trace after
library(methods).

3.  Formal classes can have intializer methods to modify how the new()
function works.  See ?initialize.

4.  The behavior of setGeneric should be more sensible, with respect to
nonstandard generics and default methods.

5.  Classes that have a "data part" (that extend, e.g., numeric or
function) should behave better.

6.  A NextMethod mechanism for the methods package (introduced
previously and fixed up some this time).  See ?callNextMethod.

Testing appreciated.

John

-- 
John M. Chambers                  jmc@bell-labs.com
Bell Labs, Lucent Technologies    office: (908)582-2681
700 Mountain Avenue, Room 2C-282  fax:    (908)582-3340
Murray Hill, NJ  07974            web: http://www.cs.bell-labs.com/~jmc
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From brahm@alum.mit.edu  Thu Mar 28 22:52:05 2002
From: brahm@alum.mit.edu (David Brahm)
Date: Thu, 28 Mar 2002 17:52:05 -0500
Subject: [Rd] pos argument to library
Message-ID: <15523.40597.925815.816765@gargle.gargle.HOWL>

While R-1.5.0 is still unfrozen, I'd like to lobby again for a "pos" argument
in library().  It seems straightforward to implement -- just change this line:
  env <- attach(NULL, name=pkgname)
to:
  env <- attach(NULL, pos, name=pkgname)

The reason I want this, by the way, is to mimic the S-Plus synchronize()
command.  Essentially, my version of synchronize() simply detaches a package
and then re-attaches it in the same position (thus requiring the "pos"
argument).  A fancier version would handle dynamic shared libraries correctly.
Here it is (it's called g.sync), if anyone is interested.

--- begin code ---
g.sync <- function(pos=2) {
  if (is.character(pos)) pos <- match(pos, sub("package:","",search()))
  pkg <- sub("package:", "", search()[pos])
  path <- searchpaths()[pos]
  is.lib <- match(dirname(path), .lib.loc, 0) > 0
  g.library <- g.library;  g.data.attach <- g.data.attach
  detach(pos=pos)
  if (is.lib) g.library(pkg, char=T, pos=pos) else g.data.attach(path, pos)
}
--- end code ---

Note that g.library is my copy of library() with the "pos" argument added, and
that I've assumed the "g.data" package is in use.  g.sync makes local copies of
g.library and g.data.attach in case the package being sync'ed contains one of
those functions!

-- 
                              -- David Brahm (brahm@alum.mit.edu)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Fri Mar 29 03:04:03 2002
From: presnell@stat.ufl.edu (presnell@stat.ufl.edu)
Date: Fri, 29 Mar 2002 04:04:03 +0100 (MET)
Subject: [Rd] glm start/offset bugs (PR#1422)
Message-ID: <200203290304.EAA28509@pubhealth.ku.dk>


--fupGvOGOQM
Content-Type: text/plain; charset=us-ascii
Content-Description: message body and .signature
Content-Transfer-Encoding: 7bit


There's a simple bug in the handling of the start and offset arguments
in glm and glm.fit.  The bug exists in the latest development version
of R (version information below), but it appears that glm.R has not
been touched much lately, so the bug affects at least the most recent
stable release of R.

Here is a simple example:

> data(ships, package=MASS)
> ships.glm <- glm(incidents ~ type + year + period + offset(log(service)),
+ 		  family=poisson, data=ships, subset=service != 0)
> glm(incidents ~ type + year + period + offset(log(service)),
+     family=poisson, data=ships, subset=service != 0, start=coef(ships.glm))

or more simply

> update(ships.glm, start=coef(ships.glm))

The problem is caused by a bad initialization of etastart in glm.fit()
when an offset is present.  Fixing this and retrying the example above
then reveals another bug, this time in glm(), that is tickled only
when non-NULL values are given to both the offset and start arguments.

I've attached to the bottom of this message a simple patch to
src/library/base/R/glm.R that I believe correctly repairs these bugs.

Essentially the same change is needed in Berwin Turlach's Wed, 27 Feb
2002 version of glm.fit() reported on the R bug tracking site as
"Models/1331".  (The change to glm() is still required as well of
course.)  As an aside, I'm wondering if there has been any thought
given to adopting Berwin's patches.  Though I must admit that I
haven't taken the time to check carefully through his changes, I know
Berwin to be a very careful and skillful programmer, and I suspect
that he is the only person to have looked very closely at those
particular details of glm.fit in recent months (years?).  Also, some
of the simpler changes that he made seem to be needed just to cleanup
the code.  Would it be useful if a number of us began using his
version as an informal test?  After discovering this bug earlier
today, I have already begun to do so and so far have not encountered
any problems.

-- 
Brett Presnell
Department of Statistics
University of Florida
http://www.stat.ufl.edu/~presnell/


Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 5.0
 year = 2002
 month = 03
 day = 27
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base



--fupGvOGOQM
Content-Type: text/plain
Content-Description: glm patch
Content-Disposition: inline;
	filename="glm.patch"
Content-Transfer-Encoding: 7bit

*** glm.R	Wed Feb 27 01:11:03 2002
--- glm-patched.R	Thu Mar 28 21:09:24 2002
***************
*** 67,71 ****
  	    if(is.empty.model(mt)) fit$deviance
  	    else glm.fit(x=X[,"(Intercept)",drop=FALSE], y=Y, weights=weights,
! 			 start=start, offset=offset, family=family,
  			 control=control, intercept=TRUE)$deviance
      }
--- 67,71 ----
  	    if(is.empty.model(mt)) fit$deviance
  	    else glm.fit(x=X[,"(Intercept)",drop=FALSE], y=Y, weights=weights,
! 			 offset=offset, family=family,
  			 control=control, intercept=TRUE)$deviance
      }
***************
*** 152,156 ****
  			   "and correspond to initial coefs for",
  			   deparse(xnames)))
! 	    else as.vector(if (NCOL(x) == 1) x * start else x %*% start)
  	else family$linkfun(mustart)
      mu <- linkinv(eta)
--- 152,157 ----
  			   "and correspond to initial coefs for",
  			   deparse(xnames)))
! 	    else offset +
!               as.vector(if (NCOL(x) == 1) x * start else x %*% start)
  	else family$linkfun(mustart)
      mu <- linkinv(eta)

--fupGvOGOQM--

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 29 06:25:11 2002
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Fri, 29 Mar 2002 06:25:11 +0000 (GMT)
Subject: [Rd] glm start/offset bugs (PR#1422)
In-Reply-To: <200203290304.EAA28509@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.44.0203290619580.9066-100000@auk.stats>

On Fri, 29 Mar 2002 presnell@stat.ufl.edu wrote:

>
> --fupGvOGOQM
> Content-Type: text/plain; charset=us-ascii
> Content-Description: message body and .signature
> Content-Transfer-Encoding: 7bit
>
>
> There's a simple bug in the handling of the start and offset arguments
> in glm and glm.fit.  The bug exists in the latest development version
> of R (version information below), but it appears that glm.R has not
> been touched much lately, so the bug affects at least the most recent
> stable release of R.
>
> Here is a simple example:
>
> > data(ships, package=MASS)
> > ships.glm <- glm(incidents ~ type + year + period + offset(log(service)),
> + 		  family=poisson, data=ships, subset=service != 0)
> > glm(incidents ~ type + year + period + offset(log(service)),
> +     family=poisson, data=ships, subset=service != 0, start=coef(ships.glm))
>
> or more simply
>
> > update(ships.glm, start=coef(ships.glm))
>
> The problem is caused by a bad initialization of etastart in glm.fit()
> when an offset is present.  Fixing this and retrying the example above
> then reveals another bug, this time in glm(), that is tickled only
> when non-NULL values are given to both the offset and start arguments.
>
> I've attached to the bottom of this message a simple patch to
> src/library/base/R/glm.R that I believe correctly repairs these bugs.
>
> Essentially the same change is needed in Berwin Turlach's Wed, 27 Feb
> 2002 version of glm.fit() reported on the R bug tracking site as
> "Models/1331".  (The change to glm() is still required as well of
> course.)  As an aside, I'm wondering if there has been any thought
> given to adopting Berwin's patches.  Though I must admit that I
> haven't taken the time to check carefully through his changes, I know
> Berwin to be a very careful and skillful programmer, and I suspect
> that he is the only person to have looked very closely at those
> particular details of glm.fit in recent months (years?).  Also, some
> of the simpler changes that he made seem to be needed just to cleanup
> the code.  Would it be useful if a number of us began using his
> version as an informal test?  After discovering this bug earlier
> today, I have already begun to do so and so far have not encountered
> any problems.

Yes, thought has been given, and the code has been looked at. (People
do look at R code you know, even if they don't jump in to change it
after a few hour's use.)

Given the time pressures, this is not going to get looked at for 1.5.0. I
have long thought that given the history of problems maintaining glm()
that it might be easier to rewrite it for scratch.  Having .null versions
serves no useful purpose, for example.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jfox@mcmaster.ca  Fri Mar 29 15:59:26 2002
From: jfox@mcmaster.ca (jfox@mcmaster.ca)
Date: Fri, 29 Mar 2002 16:59:26 +0100 (MET)
Subject: [Rd] expand.model.frame fails when call creating model has no data (PR#1423)
Message-ID: <200203291559.QAA29688@pubhealth.ku.dk>

I've encounted a problem using expand.model.frame. To illustrate, consider 
the function

     > test <- function(model){
     +     expand.model.frame(model, "income")
     +     }
     >

The data frame Prestige (from the car library) has several variables, 
including prestige, income and education. I've attached this data frame and 
fit the following model

     > mod.1 <- lm(prestige ~ (log(income) + education)*type)
     >

 From the documentation for expand.model.frame, the default environment in 
which "things" are evaluated is environment(formula(model)), where model is 
the first argument to expand.model frame; in this case

     > environment(formula(mod.1))
     <environment: R_GlobalEnv>
     >

When I call the test function with mod.1, however, I get the following error:

     > test(mod.1)
     Error in eval(expr, envir, enclos) : Object "prestige" not found
     >

But if I fit the same model specifying the data argument to lm as Prestige, 
then test works,

     > mod.2 <- lm(prestige ~ (log(income) + education)*type, data=Prestige)
     > test(mod.2)
                             prestige log(income) education type income
     GOV.ADMINISTRATORS            68.8    9.421492     13.11 prof  12351
     GENERAL.MANAGERS              69.1   10.161187     12.26 prof  25879
     ACCOUNTANTS                   63.4    9.134647     12.77 prof   9271
     . . .
     TYPESETTERS                   42.2    8.773694     10.00   bc   6462
     BOOKBINDERS                   35.2    8.193400      8.55   bc   3617
     >

even though

     > environment(formula(mod.2))
     <environment: R_GlobalEnv>
     >

that is, still the global environment.


I'm able to get expand.model.frame to do what I think it's supposed to do 
by replacing the line

	rval <- eval(call("model.frame", ff, data = data, subset = subset,
             	na.action = I), envir)

with

         rval <- if (is.null(data)) eval(call("model.frame", ff, subset = 
subset, na.action = naa), envir)
            	else eval(call("model.frame", ff, data = data, subset = 
subset, na.action = naa), envir)


--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 4.1
  year = 2002
  month = 01
  day = 30
  language = R

Windows 2000 Professional (build 2195) Service Pack 2.0

Search Path:
  .GlobalEnv, Prestige, package:lattice, package:grid, package:car, 
package:ctest, Autoloads, package:base


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri Mar 29 16:13:46 2002
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 Mar 2002 17:13:46 +0100
Subject: [Rd] expand.model.frame fails when call creating model has no data (PR#1423)
In-Reply-To: <200203291559.QAA29688@pubhealth.ku.dk>
References: <200203291559.QAA29688@pubhealth.ku.dk>
Message-ID: <x2sn6jpd1h.fsf@blueberry.kubism.ku.dk>

jfox@mcmaster.ca writes:

> I'm able to get expand.model.frame to do what I think it's supposed to do 
> by replacing the line
> 
> 	rval <- eval(call("model.frame", ff, data = data, subset = subset,
>              	na.action = I), envir)
> 
> with
> 
>          rval <- if (is.null(data)) eval(call("model.frame", ff, subset = 
> subset, na.action = naa), envir)
>             	else eval(call("model.frame", ff, data = data, subset = 
> subset, na.action = naa), envir)

Yes, but a better fix seems to be to have model.frame check for an
explicit NULL data argument. Looks like a few cases of missing(data)
in there might as well have read is.null(data) since that is the
default. Anyone know better?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From presnell@stat.ufl.edu  Fri Mar 29 16:51:19 2002
From: presnell@stat.ufl.edu (Brett Presnell)
Date: Fri, 29 Mar 2002 11:51:19 -0500
Subject: [Rd] glm start/offset bugs (PR#1422)
In-Reply-To: <Pine.GSO.4.44.0203290619580.9066-100000@auk.stats>
References: <200203290304.EAA28509@pubhealth.ku.dk>
 <Pine.GSO.4.44.0203290619580.9066-100000@auk.stats>
Message-ID: <15524.39815.880724.274750@minke.stat.ufl.edu>


Prof Brian D Ripley writes:
> 
> Yes, thought has been given, and the code has been looked at. (People
> do look at R code you know, even if they don't jump in to change it
> after a few hour's use.)

Sorry. No insult intended.

> Given the time pressures, this is not going to get looked at for
> 1.5.0.

Does this mean that my patch will not make it in either?  Berwin's
work is obviously more complicated and requires more attention and
careful reading to check.  My changes actually only have an effect if
both an offset and a starting value are given, and clearly the current
version falls down badly in that case anyway.

> I have long thought that given the history of problems maintaining
> glm() that it might be easier to rewrite it for scratch.  Having
> .null versions serves no useful purpose, for example.

Yes, having ploughed around in the code a bit, I'm very sympathetic to
this view.

-- 
Brett Presnell
Department of Statistics
University of Florida
http://www.stat.ufl.edu/~presnell/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Fri Mar 29 17:41:59 2002
From: bolker@zoo.ufl.edu (Ben Bolker)
Date: Fri, 29 Mar 2002 12:41:59 -0500 (EST)
Subject: [Rd] wmf on Unix?
Message-ID: <Pine.LNX.4.30.0203291237340.25056-100000@bolker.zoo.ufl.edu>


  libEMF (http://sourceforge.net/projects/libemf/) looks like it may be
the solution to generating WMF/EMF files on Unix.  It's a general-purpose
(LGPL) library that implements the EMF API ...

  (I was originally going to write to the list to ask why small circles
appear to be filled (in src/gnuwin32/graphapp/gdraw.c) by generating a
series of rectangles rather than using some kind of "filled circle"
primitive; someone I passed an R-generated EMF file to was worried that
the profusion of little rectangle objects might give the printer hiccups
... I assume there is some good reason for this, probably now lost in the
mists of time.)

  Ben Bolker

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 29 19:23:23 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Mar 2002 19:23:23 +0000 (GMT)
Subject: [Rd] wmf on Unix?
In-Reply-To: <Pine.LNX.4.30.0203291237340.25056-100000@bolker.zoo.ufl.edu>
Message-ID: <Pine.LNX.4.31.0203291919280.4980-100000@gannet.stats>

On Fri, 29 Mar 2002, Ben Bolker wrote:

>
>   libEMF (http://sourceforge.net/projects/libemf/) looks like it may be
> the solution to generating WMF/EMF files on Unix.  It's a general-purpose
> (LGPL) library that implements the EMF API ...
>
>   (I was originally going to write to the list to ask why small circles
> appear to be filled (in src/gnuwin32/graphapp/gdraw.c) by generating a
> series of rectangles rather than using some kind of "filled circle"
> primitive; someone I passed an R-generated EMF file to was worried that
> the profusion of little rectangle objects might give the printer hiccups
> ... I assume there is some good reason for this, probably now lost in the
> mists of time.)

Such as the filled circle code in the Windows GDI does not work
adequately? The name `fastfillrectangle' might give you a clue.

Drawing filled circles through the Windows GDI is notoriously slow
and buggy.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri Mar 29 19:32:53 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 29 Mar 2002 19:32:53 +0000 (GMT)
Subject: [Rd] glm start/offset bugs (PR#1422)
In-Reply-To: <15524.39815.880724.274750@minke.stat.ufl.edu>
Message-ID: <Pine.LNX.4.31.0203291927110.4980-100000@gannet.stats>

On Fri, 29 Mar 2002, Brett Presnell wrote:

>
> Prof Brian D Ripley writes:
> >
> > Yes, thought has been given, and the code has been looked at. (People
> > do look at R code you know, even if they don't jump in to change it
> > after a few hour's use.)
>
> Sorry. No insult intended.
>
> > Given the time pressures, this is not going to get looked at for
> > 1.5.0.
>
> Does this mean that my patch will not make it in either?  Berwin's

Probably not.  People seem very reluctant to deal with bugs these days.

> work is obviously more complicated and requires more attention and
> careful reading to check.  My changes actually only have an effect if
> both an offset and a starting value are given, and clearly the current
> version falls down badly in that case anyway.
>
> > I have long thought that given the history of problems maintaining
> > glm() that it might be easier to rewrite it for scratch.  Having
> > .null versions serves no useful purpose, for example.
>
> Yes, having ploughed around in the code a bit, I'm very sympathetic to
> this view.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Sat Mar 30 01:24:11 2002
From: rossini@u.washington.edu (Anthony Rossini)
Date: Fri, 29 Mar 2002 17:24:11 -0800 (PST)
Subject: [Rd] First sample release of the R-Orca package.
Message-ID: <Pine.LNX.4.43.0203291724110.2317@hymn10.u.washington.edu>

For all those few of you who care about weird statistical visualization software, I've finally made available a "test" release for R-Orca.  There are 
examples of a 2-d variable selection plot (i.e. 2-d straight projection, with selection of the 2 variables to view), a GrandTour plot, and a Simplicial data plot.  The points of interest are the ability to brush and select from the command line, etc.

Requires Duncan's recent SJava for "stability" under Linux, I've heard reports that it has always been stable under Microsoft Windows.  I don't have a Mac, so am clueless as to whether it works.

D/L the rorca package and test.R example from

http://software.biostat.washington.edu/~rossini/rorca/

I'd appreciate any comments.  For examples of visualizations that I've implemented, you might "checkout" the orca distribution and look in the examples directory.  The java code "ports" in a straightforward way from Java to R.

Really straightforward, thanks to Duncan :-).

I've not provided linked-views examples yet, but hope to do that next week, if nothing interrupts.

best,
-tony

----
A.J. Rossini                            Rsrch Asst Professor of Biostatistics
rossini@u.washington.edu                http://software.biostat.washington.edu/
Biostatistics/Univ. of Washington       206-543-1044 (3286=fax) (Thursdays)
HIV Vaccine Trials Network/FHCRC        206-667-7025 (4812=fax) (M/Tu/W)
(Friday location is generally unknown).




-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sat Mar 30 11:35:37 2002
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 30 Mar 2002 12:35:37 +0100 (MET)
Subject: [Rd] persp + postscript/pdf (PR#1419)
Message-ID: <200203301135.MAA01348@pubhealth.ku.dk>

This is rather a documentation bug which means you are misusing persp().

The shading is done in the colour given by the `col' argument, and that
defaults to NULL.  What NULL means is undocumented, but it appears to mean
par("bg"), and that is transparent on postscript/pdf.  Set a value for
`col' and it works as you expect.

I've changed the default to col = "white" and also ensured that
transparent colours are treated as transparent.

On Thu, 28 Mar 2002 leisch@ci.tuwien.ac.at wrote:

> persp(outer(1:5, 1:5), shade=0.1)
>
> looks nice on the screen, but
>
> postscript()
> persp(outer(1:5, 1:5), shade=0.1)
> dev.off()
>
>
> gives an all black surface.
> same when using the pdf() device. has already been like that in 1.4.0.
>
> .f
>
>
>
>
> --please do not edit the information below--
>
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Under development (unstable)
>  major = 1
>  minor = 5.0
>  year = 2002
>  month = 03
>  day = 28
>  language = R
>
> Search Path:
>  .GlobalEnv, package:ctest, Autoloads, package:base
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From egonw@sci.kun.nl  Sat Mar 30 13:08:21 2002
From: egonw@sci.kun.nl (E.L. Willighagen)
Date: Sat, 30 Mar 2002 14:08:21 +0100
Subject: [Rd] Highlighting in KDE editor Kate
Message-ID: <200203301308.g2UD8MV20497@wn1.sci.kun.nl>


Hi all,

Anyone interested in a highlighting module for Kate (as in KDE 2.2.2)?
Below is the module, which should be placed in something like:
~/.kde/share/apps/kate/syntax/

Or globally, in something like:
/opt/kde2/share/apps/kate/syntax/

Rather little functions are recognized right now, but it is clear how to add 
them.

The module:

<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE language SYSTEM "language.dtd">
<language name="R Script" section="Sources" extensions="*.R" 
mimetype="application/x-R">
  <highlighting>
    <list name="commands">
      <item> c </item>
      <item> dev </item>
      <item> grey </item>
      <item> lm </item>
      <item> matrix </item>
      <item> outer </item>
      <item> persp </item>
      <item> postscript </item>
      <item> scan </item>
      <item> seq </item>
    </list>
    <contexts>
      <context attribute="0" lineEndContext="0">
        <keyword attribute="1" context="0" String="commands"/>
        <RegExpr attribute="2" context="0" String="#.*$" />
        <RangeDetect attribute="3" context="0" char="&quot;" char1="&quot;"/>
      </context>
    </contexts>
    <itemDatas>
      <itemData name="Normal Text" defStyleNum="dsNormal"/>
      <itemData name="Keyword" defStyleNum="dsKeyword"/>
      <itemData name="Comment" defStyleNum="dsComment"/>
      <itemData name="String"  defStyleNum="dsString"/>
      <itemData name="Attribute" defStyleNum="dsNormal" italic="1"/>
    </itemDatas>
  </highlighting>
  <general>
    <comments>
      <comment name="singleLine" start="#" />
    </comments>
  </general>
</language>

Regards,

Egon
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

