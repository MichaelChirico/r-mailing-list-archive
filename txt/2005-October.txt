From academic at feferraz.net  Sat Oct  1 01:50:24 2005
From: academic at feferraz.net (Fernando Henrique Ferraz P. da Rosa)
Date: Fri, 30 Sep 2005 20:50:24 -0300
Subject: [Rd] Summary of translation status
In-Reply-To: <433D45C2.9070508@stats.uwo.ca>
References: <20050929035016.GA16165@ime.usp.br> <433D45C2.9070508@stats.uwo.ca>
Message-ID: <20050930234929.GA18785@ime.usp.br>

Duncan Murdoch writes:
> 
> Hi Fernando.  That's a nice page.  I'd add an explicit statement about 
> which branch the statistics apply to.  You say "Statistics based on SVN: 
> 35706", presumably on the trunk, but soon interest will shift to the 
> R-2-2-patches branch.  (If this is automated and you have the disk space 
> for both, perhaps both trunk and the current patch branch could be 
> listed, but I expect the statistics will be very similar.)
> 
> Duncan Murdoch

        Hum that's true. I'm using the trunk branch. The process is
somewhat automated, but I'd have to keep a working copy of the patch
branch in order to run the status on it. Anyways I also think the statistics
will probably be the same. Everytime I submit a translation I see it appearing
on trunk so I think it won't matter much.


--
Fernando Henrique Ferraz P. da Rosa
http://www.feferraz.net


From debarr at mitre.org  Sun Oct  2 03:09:02 2005
From: debarr at mitre.org (debarr@mitre.org)
Date: Sun,  2 Oct 2005 03:09:02 +0200 (CEST)
Subject: [Rd] plot.acf() error (PR#8168)
Message-ID: <20051002010902.591ED1C92D@slim.kubism.ku.dk>

Full_Name: Dave DeBarr
Version: 2.1.1
OS: Windows XP Professional
Submission from: (NULL) (68.227.217.198)


When issuing the command "acf(ts.union(mdeaths, fdeaths))", the plot.acf()
function plots the negative lags of the autocorrelation values for mdeaths and
fdeaths in the lower left-hand corner of the graphics window, but plot.acf()
labels this graph as "fdeaths & mdeaths" (instead of "mdeaths & fdeaths").  The
order of the variables does matter for the autocorrelation function.


From erich.neuwirth at univie.ac.at  Sun Oct  2 09:39:36 2005
From: erich.neuwirth at univie.ac.at (Erich Neuwirth)
Date: Sun, 02 Oct 2005 09:39:36 +0200
Subject: [Rd] Question about colnames behavior
Message-ID: <433F8EB8.70703@univie.ac.at>

The following code

zzz<-1:10
dim(zzz)<-10
rownames(zzz)
colnames(zzz)

yields NULL for the rownames and colnames calls.
Let us set rownames

rownames(zzz)<-1:10

Now rownames(zzz) returns the expected result, but colnames(zzz)
produces an error:
Error in dn[[2]] : subscript out of bounds

So given a onedimensional structure the return behavior of colnames
is different depending on the fact if rownames are set or not.

Should the behavior of colnames be changed to make the result
independent from this fact?



-- 
Erich Neuwirth, Didactic Center for Computer Science
University of Vienna
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-39902 Fax: +43-1-4277-9399


From peter.warren at verizon.net  Sun Oct  2 16:18:09 2005
From: peter.warren at verizon.net (Peter G. Warren)
Date: Sun, 02 Oct 2005 10:18:09 -0400
Subject: [Rd] Problem Sweaving vignettes: MiKTeX's texi2dvi reports errors
Message-ID: <0INQ003XTL1ZWBC0@vms048.mailsrvcs.net>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051002/5d57137c/attachment.pl

From ripley at stats.ox.ac.uk  Sun Oct  2 22:01:27 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 2 Oct 2005 21:01:27 +0100 (BST)
Subject: [Rd] Problem Sweaving vignettes: MiKTeX's texi2dvi reports
	errors
In-Reply-To: <0INQ003XTL1ZWBC0@vms048.mailsrvcs.net>
References: <0INQ003XTL1ZWBC0@vms048.mailsrvcs.net>
Message-ID: <Pine.LNX.4.61.0510022053330.21391@gannet.stats>

I get

> texi2dvi("Sweave-test-1.tex", pdf=TRUE, quiet=FALSE)
This is pdfeTeX, Version 3.141592-1.20a-rc7.2-2.2 (MiKTeX 2.4)
output format initialized to PDF
entering extended mode
(Sweave-test-1.tex
LaTeX2e <2003/12/01>
Babel <v3.8a> and hyphenation patterns for english, french, german, 
ngerman, dumylang, nohyphenation, loaded.
(C:\packages\MikTeX\tex\latex\base\article.cls
Document Class: article 2004/02/16 v1.4f Standard LaTeX document class
(C:\packages\MikTeX\tex\latex\base\size10.clo))
(C:\packages\MikTeX\tex\latex\ltxmisc\a4wide.sty
(C:\packages\MikTeX\tex\latex\ntgclass\a4.sty))
(d:/R/svn/trunk/share/texmf/Sweave.sty

LaTeX Warning: You have requested package 
`d:/R/svn/trunk/share/texmf/Sweave',
                but the package provides `Sweave'.

so my guess is that this a path problem with your MiKTeX and it is not 
finding Sweave.sty.

Simple questions: where did you install R?  Is there a space in the path?


On Sun, 2 Oct 2005, Peter G. Warren wrote:

> Hi,
>
> I am trying to create a Bioconductor package. Everything installs and checks
> fine. Now I'm on my last step, which is to create a vignette. I'm trying to
> test the Sweave process, to make sure I can build a vignette. I am stuck at
> the texi2dvi stage, which fails when I try to process the example
> Sweave-test-1.tex file.
>
> I am using Windows binary R distributions, and have the same problem on both
> the latest developer version (2.2.0 Beta) and the latest patched version
> (2.1.1) . For the Tex processing, I first tried downloading and installing
> fpTex, but found that it doesn't have texi2dvi. Some Googling informed me
> that recent MiKTeX versions now have that function, so I just downloaded
> that (the small installation). Indeed there is a texi2dvi. The first time I
> ran it, it downloaded a class file it needed, so now it at least executes.
> However, when I try to run it on the test Sweave tex file, I get an error.
> Here's the sequence in R:
>
>> library(tools)
>> example(Sweave)
> [...output suppressed]
>> texi2dvi("Sweave-test-1.tex", pdf=TRUE, quiet=FALSE)
> Error in texi2dvi("Sweave-test-1.tex", pdf=TRUE, quiet = FALSE) :
>        running texi2dvi on 'Sweave-test-1.tex' failed
>
> [A command window pops up, and the following is from that window: ]
>
> This is pdfeTeX, Version 3.141592-1.20a-rc7.2-2.2 (MiKTeX 2.4)
> output format initialized to PDF
> entering extended mode
> (Sweave-test-1.tex
> LaTeX2e <2003/12/01>
> Babel <v3.8a> and hyphenation patterns for english, french, german, ngerman,
> du
> mylang, nohyphenation, loaded.
> (C:\MiKTex\texmf\tex\latex\base\article.cls
> Document Class: article 2004/02/16 v1.4f Standard LaTeX document class
> (C:\MiKTex\texmf\tex\latex\base\size10.clo))
> (C:\MiKTex\texmf\tex\latex\ltxmisc\a4wide.sty
> (C:\MiKTex\texmf\tex\latex\ntgclass\a4.sty))
> ! Missing \endcsname inserted.
> <to be read again>
>                   \protect
> l.11 \begin
>           {document}
> ?
>
> [ Here, I hit a <CR>, and get the following:]
>
> ! LaTeX Error: Missing \begin{document}.
>
> See the LaTeX manual or LaTeX Companion for explanation.
> Type  H <return>  for immedi ate help.
> ...
>
> l.11 \begin
>           {document}
> ?
>
> -----------------
> I have also tried running texi2dvi directly on the command line, and get the
> same result. I've looked at the manual on the MiKTeX site, but find nothing
> that tells me what may be wrong. The Sweave test file looks fine to me. I
> have also tried running texify --pdf on the same file on the command line,
> but get the same results exactly.
>
> I also went to the R-tools site, and went through their page on MiKTeX
> issues. Using their second suggestion (since I'm using the recent MiKTeX
> version, which defaults to e-TeX mode), I tried changing the mode for
> texinfo from e-TeX Extended to e-TeX Compatibility mode: no change in
> results. (I'm assuming that texi2dvi is part of texinfo package - please
> correct me if I'm wrong.) [I also tried changing texinfo from e-TeX to TeX
> mode, and rebuilt/reloade/refreshed, but this did not seem to take: texi2dvi
> still reports that it's in e-TeX mode.]
>
> Finally, I did try posting this to the bioc-devel list, and got some good
> suggestions (which I've tried, results above). They then suggested I move
> the question over here.
>
> Regards, and thanks,
> - Peter Warren
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From atp at piskorski.com  Mon Oct  3 09:25:35 2005
From: atp at piskorski.com (Andrew Piskorski)
Date: Mon, 3 Oct 2005 03:25:35 -0400
Subject: [Rd] access to R parse tree for Lisp-style macros?
Message-ID: <20051003072535.GA28802@tehun.pair.com>

R folks, I'm curious about possible support for Lisp-style macros in
R.  I'm aware of the "defmacro" support for S-Plus and R discussed
here:

  http://www.biostat.wustl.edu/archives/html/s-news/2002-10/msg00064.html 

but that's really just a syntactic short-cut to the run-time use of
substitute() and eval(), which you could manually put into a function
yourself if you cared too.  (AKA, not at all equivalent to Lisp
macros.)  The mlocal() function in mvbutils also has seemingly similar
macro-using-eval properties:

  http://cran.r-project.org/src/contrib/Descriptions/mvbutils.html 
  http://www.maths.lth.se/help/R/.R/library/mvbutils/html/mlocal.html 

I could of course pre-process R source code, either using a custom
script or something like M5:

  http://www.soe.ucsc.edu/~brucem/samples.html
  http://groups.google.com/group/comp.compilers/browse_thread/thread/8ece2f34620f7957/000475ab31140327

But that's not what I'm asking about here.  As I understand it,
Lisp-style macros manipulate the already-parsed syntax tree.  This
seems very uncommon in non-Lisp languages and environments, but some -
like Python - do have such support.  (I don't use Python, but I'm told
that its standard parser APIs are as powerful as Lisp macros, although
clunkier to use.)

Is implementing Lisp-style macros feasible in R?  Has anyone
investigated this or tried to do it?

What internal representation does R use for its parse tree, and how
could I go about manipulating it in some fashion, either at package
build time or at run time, in order to support true Lisp-style macros?

Whenever I try something like this in R:

  > dput(parse(text="1+2"))
  expression(1 + 2)

what I see looks exactly like R code - that '1 + 2' expression doesn't
look very "parsed" to me.  Is that really it, or is there some sort of
Scheme-like parse tree hiding underneath?  I see that the interactive
Read-Eval-Print loop basically calls R_Parse1() in "src/main/gram.c",
but from there I'm pretty much lost.

Also, what happens at package build time?  I know that R CMD INSTALL
generates binary *.rdb and *.rdx files for my package, but what do
those do exactly, and how do they relate to the REPL and R_Parse1()?

Finally, are there any docs describing the design and implementation
of the R internals?  Should I be looking anywhere other than the R
developer page here?:

  http://developer.r-project.org/

Thanks!

-- 
Andrew Piskorski <atp at piskorski.com>
http://www.piskorski.com/


From maechler at stat.math.ethz.ch  Mon Oct  3 10:28:51 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 3 Oct 2005 10:28:51 +0200
Subject: [Rd] Question about colnames behavior
In-Reply-To: <433F8EB8.70703@univie.ac.at>
References: <433F8EB8.70703@univie.ac.at>
Message-ID: <17216.60355.877530.104575@stat.math.ethz.ch>

>>>>> "Erich" == Erich Neuwirth <erich.neuwirth at univie.ac.at>
>>>>>     on Sun, 02 Oct 2005 09:39:36 +0200 writes:

    Erich> The following code
    Erich> zzz<-1:10
    Erich> dim(zzz)<-10
    Erich> rownames(zzz)
    Erich> colnames(zzz)

    Erich> yields NULL for the rownames and colnames calls.
    Erich> Let us set rownames

    Erich> rownames(zzz)<-1:10

    Erich> Now rownames(zzz) returns the expected result, but colnames(zzz)
    Erich> produces an error:
    Erich> Error in dn[[2]] : subscript out of bounds

    Erich> So given a onedimensional structure the return behavior of colnames
    Erich> is different depending on the fact if rownames are set or not.

    Erich> Should the behavior of colnames be changed to make the result
    Erich> independent from this fact?

yes, thank you, Erich. 
It should give an error also in the 1st  case which is
BTW identical to  
    zzz <- array(1:10)

Not for R 2.2.0 though, but rather 2.2.1.

Martin


From ripley at stats.ox.ac.uk  Mon Oct  3 10:44:47 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 3 Oct 2005 09:44:47 +0100 (BST)
Subject: [Rd] Question about colnames behavior
In-Reply-To: <17216.60355.877530.104575@stat.math.ethz.ch>
References: <433F8EB8.70703@univie.ac.at>
	<17216.60355.877530.104575@stat.math.ethz.ch>
Message-ID: <Pine.LNX.4.61.0510030940050.30152@gannet.stats>

On Mon, 3 Oct 2005, Martin Maechler wrote:

>>>>>> "Erich" == Erich Neuwirth <erich.neuwirth at univie.ac.at>
>>>>>>     on Sun, 02 Oct 2005 09:39:36 +0200 writes:
>
>    Erich> The following code
>    Erich> zzz<-1:10
>    Erich> dim(zzz)<-10
>    Erich> rownames(zzz)
>    Erich> colnames(zzz)
>
>    Erich> yields NULL for the rownames and colnames calls.
>    Erich> Let us set rownames
>
>    Erich> rownames(zzz)<-1:10
>
>    Erich> Now rownames(zzz) returns the expected result, but colnames(zzz)
>    Erich> produces an error:
>    Erich> Error in dn[[2]] : subscript out of bounds
>
>    Erich> So given a onedimensional structure the return behavior of colnames
>    Erich> is different depending on the fact if rownames are set or not.
>
>    Erich> Should the behavior of colnames be changed to make the result
>    Erich> independent from this fact?
>
> yes, thank you, Erich.
> It should give an error also in the 1st  case which is
> BTW identical to
>    zzz <- array(1:10)

Not according to my reading of the help, which says

      The extractor functions try to do something sensible for any
      matrix-like object 'x'.  If the object has 'dimnames' the first
      component is used as the row names, and the second component (if
      any) is used for the col names.

and reading on, I think it should give NULL in both cases.  You could 
argue that a 1D array is not `matrix-like', but that seems a narrow 
interpretation (especially as rownames does work for such arrays).

> Not for R 2.2.0 though, but rather 2.2.1.

Agreed.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From u9126801 at stat.nctu.edu.tw  Mon Oct  3 10:46:04 2005
From: u9126801 at stat.nctu.edu.tw (u9126801@stat.nctu.edu.tw)
Date: Mon,  3 Oct 2005 10:46:04 +0200 (CEST)
Subject: [Rd] Foreign function calls without 'PACKAGE' argument (PR#8171)
Message-ID: <20051003084604.4C9A215A70@slim.kubism.ku.dk>

as title,when I check my own R package
It appear the warning:Foreign function calls without 'PACKAGE' argument, I =
don't know what's wrong....can somebody help me ,thanks
	[[alternative HTML version deleted]]


From ripley at stats.ox.ac.uk  Mon Oct  3 11:23:19 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 3 Oct 2005 10:23:19 +0100 (BST)
Subject: [Rd] Foreign function calls without 'PACKAGE' argument (PR#8171)
In-Reply-To: <20051003084604.4C9A215A70@slim.kubism.ku.dk>
References: <20051003084604.4C9A215A70@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.61.0510031020110.30526@gannet.stats>

Please do not abuse the R-bugs repository to ask questions.  This is made 
very clear in the FAQ.

The meaning of these messages is discussed in the `Writing R Extensions' 
manual: search for `PACKAGE'.

On Mon, 3 Oct 2005 u9126801 at stat.nctu.edu.tw wrote:

> as title,when I check my own R package
> It appear the warning:Foreign function calls without 'PACKAGE' argument, I =
> don't know what's wrong....can somebody help me ,thanks
> 	[[alternative HTML version deleted]]

Please do not send HTML mail, as the posting guide asks.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mick at cict.fr  Mon Oct  3 13:49:18 2005
From: mick at cict.fr (mick@cict.fr)
Date: Mon,  3 Oct 2005 13:49:18 +0200 (CEST)
Subject: [Rd] tcltk (PR#8173)
Message-ID: <20051003114918.1138A1C76F@slim.kubism.ku.dk>

Full_Name: Castagner Michel
Version: 2.1.1
OS: Solaris
Submission from: (NULL) (195.220.60.11)


> library(tcltk)
Error in namespaceExport(ns, exports) : undefined exports :addTclPath,
as.tclObj, is.tclObj, is.tkwin
In addition: Warning message:
S3 methods '$.tclvar', '$<-.tclvar', 'as.character.tclObj',
'as.character.tclVar', 'as.double.tclObj', 'as.integer.tclObj',
'as.logical.tclObj', 'print.tclObj', '[[.tclArray', '[[<-.tclArray',
'$.tclArray', '$<-.tclArray', 'names.tclArray', 'names<-.tclArray',
'length.tclArray', 'length<-.tclArray', 'tclObj.tclVar', 'tclObj<-.tclVar',
'tclvalue.default', 'tclvalue.tclObj', 'tclvalue.tclVar', 'tclvalue<-.default',
'tclvalue<-.tclVar' were declared in NAMESPACE but not found 
Error: package/namespace load failed for 'tcltk'


From maechler at stat.math.ethz.ch  Mon Oct  3 15:04:00 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Mon, 3 Oct 2005 15:04:00 +0200
Subject: [Rd] Question about colnames behavior
In-Reply-To: <Pine.LNX.4.61.0510030940050.30152@gannet.stats>
References: <433F8EB8.70703@univie.ac.at>
	<17216.60355.877530.104575@stat.math.ethz.ch>
	<Pine.LNX.4.61.0510030940050.30152@gannet.stats>
Message-ID: <17217.11328.557519.163509@stat.math.ethz.ch>

>>>>> "BDR" == Prof Brian Ripley <ripley at stats.ox.ac.uk>
>>>>>     on Mon, 3 Oct 2005 09:44:47 +0100 (BST) writes:

    BDR> On Mon, 3 Oct 2005, Martin Maechler wrote:
    >>>>>>> "Erich" == Erich Neuwirth <erich.neuwirth at univie.ac.at>
    >>>>>>> on Sun, 02 Oct 2005 09:39:36 +0200 writes:
    >> 
    Erich> The following code
    Erich> zzz<-1:10
    Erich> dim(zzz)<-10
    Erich> rownames(zzz)
    Erich> colnames(zzz)
    >> 
    Erich> yields NULL for the rownames and colnames calls.
    Erich> Let us set rownames
    >> 
    Erich> rownames(zzz)<-1:10
    >> 
    Erich> Now rownames(zzz) returns the expected result, but colnames(zzz)
    Erich> produces an error:
    Erich> Error in dn[[2]] : subscript out of bounds
    >> 
    Erich> So given a onedimensional structure the return behavior of colnames
    Erich> is different depending on the fact if rownames are set or not.
    >> 
    Erich> Should the behavior of colnames be changed to make the result
    Erich> independent from this fact?
    >> 
    >> yes, thank you, Erich.
    >> It should give an error also in the 1st  case which is
    >> BTW identical to
    >> zzz <- array(1:10)

    BDR> Not according to my reading of the help, which says

      >> The extractor functions try to do something sensible for any
      >> matrix-like object 'x'.  If the object has 'dimnames' the first
      >> component is used as the row names, and the second component (if
      >> any) is used for the col names.

    BDR> and reading on, I think it should give NULL in both cases.  You could 
    BDR> argue that a 1D array is not `matrix-like', but that seems a narrow 
    BDR> interpretation (especially as rownames does work for such arrays).

I was lead to my conclusion by the same help page, reading

 >> Arguments:
 >> 
 >>    x: a matrix-like R object, with at least two dimensions for 'colnames'.

from which I concluded an error was appropriate for 'colnames'
when 'x' doesn't have two dimensions.

If we adopt your proposal (NULL in any case), we should
definitely also fix that paragraph...

Martin


From murdoch at stats.uwo.ca  Mon Oct  3 15:42:50 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 03 Oct 2005 09:42:50 -0400
Subject: [Rd] access to R parse tree for Lisp-style macros?
In-Reply-To: <20051003072535.GA28802@tehun.pair.com>
References: <20051003072535.GA28802@tehun.pair.com>
Message-ID: <4341355A.3080001@stats.uwo.ca>

On 10/3/2005 3:25 AM, Andrew Piskorski wrote:
> R folks, I'm curious about possible support for Lisp-style macros in
> R.  I'm aware of the "defmacro" support for S-Plus and R discussed
> here:
> 
>   http://www.biostat.wustl.edu/archives/html/s-news/2002-10/msg00064.html 
> 
> but that's really just a syntactic short-cut to the run-time use of
> substitute() and eval(), which you could manually put into a function
> yourself if you cared too.  (AKA, not at all equivalent to Lisp
> macros.)  The mlocal() function in mvbutils also has seemingly similar
> macro-using-eval properties:
> 
>   http://cran.r-project.org/src/contrib/Descriptions/mvbutils.html 
>   http://www.maths.lth.se/help/R/.R/library/mvbutils/html/mlocal.html 
> 
> I could of course pre-process R source code, either using a custom
> script or something like M5:
> 
>   http://www.soe.ucsc.edu/~brucem/samples.html
>   http://groups.google.com/group/comp.compilers/browse_thread/thread/8ece2f34620f7957/000475ab31140327
> 
> But that's not what I'm asking about here.  As I understand it,
> Lisp-style macros manipulate the already-parsed syntax tree.  This
> seems very uncommon in non-Lisp languages and environments, but some -
> like Python - do have such support.  (I don't use Python, but I'm told
> that its standard parser APIs are as powerful as Lisp macros, although
> clunkier to use.)
> 
> Is implementing Lisp-style macros feasible in R?  Has anyone
> investigated this or tried to do it?
> 
> What internal representation does R use for its parse tree, and how
> could I go about manipulating it in some fashion, either at package
> build time or at run time, in order to support true Lisp-style macros?

It is like a list of lists, with modes attached that say how they are to 
be interpreted.  parse() gives a list of mode "expression", containing a 
list of function calls or atomic objects.  Function calls are stored as 
a list whose head is the function name with subsequent entries being the 
arguments.

The mode may be "expression", or "call", or others, depending on what 
you are actually dealing with.
> 
> Whenever I try something like this in R:
> 
>   > dput(parse(text="1+2"))
>   expression(1 + 2)
> 
> what I see looks exactly like R code - that '1 + 2' expression doesn't
> look very "parsed" to me.  Is that really it, or is there some sort of
> Scheme-like parse tree hiding underneath?  I see that the interactive
> Read-Eval-Print loop basically calls R_Parse1() in "src/main/gram.c",
> but from there I'm pretty much lost.

There's a parse tree underneath.  R is being helpful and deparsing it 
for you for display purposes.

To see it as a list, use "as.list" to strip off the mode, e.g.

 > as.list(parse(text="1+2"))
[[1]]
1 + 2

# A list containing one expression.  Expand it:

 > as.list(parse(text="1+2")[[1]])
[[1]]
`+`

[[2]]
[1] 1

[[3]]
[1] 2

# A function call to `+` with two arguments.  The arguments are atomic.

Use "mode" to work out how these are interpreted:

 > mode(parse(text="1+2"))
[1] "expression"
 > mode(parse(text="1+2")[[1]])
[1] "call"


> 
> Also, what happens at package build time?  I know that R CMD INSTALL
> generates binary *.rdb and *.rdx files for my package, but what do
> those do exactly, and how do they relate to the REPL and R_Parse1()?
> 
> Finally, are there any docs describing the design and implementation
> of the R internals?  Should I be looking anywhere other than the R
> developer page here?:

The source code is sometimes the best place for low level details like 
this.  The R Language manual sometimes gives low level details, but is 
is uneven in its coverage; I forget if it covers this.

Duncan Murdoch


From tlumley at u.washington.edu  Mon Oct  3 16:22:14 2005
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 3 Oct 2005 07:22:14 -0700 (PDT)
Subject: [Rd] access to R parse tree for Lisp-style macros?
In-Reply-To: <4341355A.3080001@stats.uwo.ca>
References: <20051003072535.GA28802@tehun.pair.com>
	<4341355A.3080001@stats.uwo.ca>
Message-ID: <Pine.LNX.4.63a.0510030716080.8804@homer22.u.washington.edu>

On Mon, 3 Oct 2005, Duncan Murdoch wrote:

> On 10/3/2005 3:25 AM, Andrew Piskorski wrote:
>> R folks, I'm curious about possible support for Lisp-style macros in
>> R.  I'm aware of the "defmacro" support for S-Plus and R discussed
>> here:
>>
>>   http://www.biostat.wustl.edu/archives/html/s-news/2002-10/msg00064.html
>>
>> but that's really just a syntactic short-cut to the run-time use of
>> substitute() and eval(), which you could manually put into a function
>> yourself if you cared too.  (AKA, not at all equivalent to Lisp
>> macros.)

Well, yes and no.  It is a syntactic shortcut using functions, but what it 
does is manipulate and then evaluate pieces of parse tree.  It doesn't 
have the efficiency under compilation that real macros would, but we don't 
have compilation.  It doesn't have gensyms, but again, R fails to support 
these in a fairly fundamental way, so they have to be faked using 
variables with weird random names.

I have a long-term plan to add real macros, but not until after Luke 
Tierney's byte-code compiler is finished.

 	-thomas


From Heather.Turner at warwick.ac.uk  Mon Oct  3 17:00:53 2005
From: Heather.Turner at warwick.ac.uk (Heather Turner)
Date: Mon, 03 Oct 2005 16:00:53 +0100
Subject: [Rd] storage.mode, C data types and speed
Message-ID: <s34155bf.091@liberator.csv.warwick.ac.uk>

Hi,

I am trying to speed up part of an algorithm in which certain columns of a large matrix (X) are replaced by the element-wise product of a matrix (M) and a vector (v). In R, the code might be

X[, ind] <- M * v

I have written a small C routine to do this for me, but the timing depends on how I define the storage.mode of the objects in R and the data types in C, in a way which I don't understand.

To illustrate, suppose I have the following for X, M and v:
nr <- 10000
X <- matrix(1, nr, 500)
M <- matrix(1:(nr*450), nr, 450)
v <- 1:nr
storage.mode(X) <- storage.mode(M) <- storage.mode(v) <- "double"

Then I have the following integers required by my C code - these are the objects which I'm not sure how to handle
a <- 50*nr            #index of X indicating where to start replacing values
nm <- length(M)
nv <- length(v)

I would have thought I wanted

storage.mode(a) <- storage.mode(nm) <- storage.mode(nv) <- "integer"

to go with the following C code

# include <Rinternals.h>

SEXP prod_integer(SEXP X, SEXP M, SEXP v, SEXP a, SEXP nm, SEXP nv) {
  int i = INTEGER(a)[0], i1 = 0, i2 = 0;

  for ( ; i1 < INTEGER(nm)[0]; i2 = (++i2 == INTEGER(nv)[0]) ? 0 : i2) { 
    REAL(X)[i++] = REAL(M)[i1++] * REAL(v)[i2];
  }
  return(X);
}

Running this is R gives the following timings on my PC

> dyn.load("D:/C_routines/prod_integer")
> for(i in 1:3) {print(system.time(.Call("prod_integer", X, M, v, a, nm, nv)))}
[1] 0.17 0.00 0.18   NA   NA
[1] 0.18 0.00 0.17   NA   NA
[1] 0.15 0.00 0.17   NA   NA

But strangely (to me) if I change the storage mode of my integers to "double", I get

> storage.mode(a) <- storage.mode(nm) <- storage.mode(nv) <- "double"
> for(i in 1:3) {print(system.time(.Call("prod_integer", X, M, v, a, nm, nv)))}
[1]  0  0  0 NA NA
[1]  0  0  0 NA NA
[1]  0  0  0 NA NA

If on the other hand I use REAL instead of INTEGER in my C code:

# include <Rinternals.h>

SEXP prod_real(SEXP X, SEXP M, SEXP v, SEXP a, SEXP nm, SEXP nv) {
  int i = REAL(a)[0], i1 = 0, i2 = 0;

  for ( ; i1 < REAL(nm)[0]; i2 = (++i2 == REAL(nv)[0]) ? 0 : i2) { 
    REAL(X)[i++] = REAL(M)[i1++] * REAL(v)[i2];
  }
  return(X);
}

The reverse is true:
> storage.mode(a) <- storage.mode(nm) <- storage.mode(nv) <- "integer"
> for(i in 1:3) {print(system.time(.Call("prod_real", X, M, v, a, nm, nv)))}
[1]  0  0  0 NA NA
[1]  0  0  0 NA NA
[1]  0  0  0 NA NA
> storage.mode(a) <- storage.mode(nm) <- storage.mode(nv) <- "double"
> for(i in 1:3) {print(system.time(.Call("prod_real", X, M, v, a, nm, nv)))}
[1] 0.22 0.00 0.22   NA   NA
[1] 0.21 0.00 0.20   NA   NA
[1] 0.21 0.00 0.22   NA   NA
> identical(.Call("prod_integer", X, M, v, a, nm, nv), .Call("prod_real", X, M, v, a, nm, nv))
[1] TRUE

So I seem to get the fastest results if I store a, nm and nv as doubles in R and treat them as integers in C or if I store them as integers in R and treat them as doubles in C, rather than matching the storage in R to the data type in C.

I must be misunderstanding something here. Can someone explain what's going on - please note I have only just begun to learn C, apologies if this is a basic C issue.

Thanks,

Heather

Dr H Turner
Research Assistant
Dept. of Statistics
The University of Warwick
Coventry
CV4 7AL

Tel: 024 76575870
Url: www.warwick.ac.uk/go/heatherturner


From peter.warren at verizon.net  Mon Oct  3 17:12:57 2005
From: peter.warren at verizon.net (Peter G. Warren)
Date: Mon, 03 Oct 2005 11:12:57 -0400
Subject: [Rd] Problem Sweaving vignettes: MiKTeX's texi2dvi reports
	errors
In-Reply-To: <Pine.LNX.4.61.0510022053330.21391@gannet.stats>
Message-ID: <0INS00H0BI982YZ1@vms040.mailsrvcs.net>

Hi, Prof. Ripley,

Yes, indeed, that was my problem - thank you! I made the mistake of
installing in the default path of C:\Program Files\R. I just now reinstalled
in C:\R, and everything worked fine. However, if anyone else runs into this,
you cannot just go off and run texi2dvi on an existing .tex file after
installing in a non-space path: you should rerun the whole Sweave example,
which forces a number of additional required items to be downloaded. Let
that process complete, then rerun again. It works fine! The finished pdf
file sure looks sweet.

Thank you again!

Regards,
= Peter

-----Original Message-----
From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk] 
Sent: Sunday, October 02, 2005 3:01 PM
To: Peter G. Warren
Cc: r-devel at r-project.org
Subject: Re: [Rd] Problem Sweaving vignettes: MiKTeX's texi2dvi reports
errors

I get

> texi2dvi("Sweave-test-1.tex", pdf=TRUE, quiet=FALSE)
This is pdfeTeX, Version 3.141592-1.20a-rc7.2-2.2 (MiKTeX 2.4) output format
initialized to PDF entering extended mode (Sweave-test-1.tex LaTeX2e
<2003/12/01> Babel <v3.8a> and hyphenation patterns for english, french,
german, ngerman, dumylang, nohyphenation, loaded.
(C:\packages\MikTeX\tex\latex\base\article.cls
Document Class: article 2004/02/16 v1.4f Standard LaTeX document class
(C:\packages\MikTeX\tex\latex\base\size10.clo))
(C:\packages\MikTeX\tex\latex\ltxmisc\a4wide.sty
(C:\packages\MikTeX\tex\latex\ntgclass\a4.sty))
(d:/R/svn/trunk/share/texmf/Sweave.sty

LaTeX Warning: You have requested package
`d:/R/svn/trunk/share/texmf/Sweave',
                but the package provides `Sweave'.

so my guess is that this a path problem with your MiKTeX and it is not
finding Sweave.sty.

Simple questions: where did you install R?  Is there a space in the path?


On Sun, 2 Oct 2005, Peter G. Warren wrote:

> Hi,
>
> I am trying to create a Bioconductor package. Everything installs and 
> checks fine. Now I'm on my last step, which is to create a vignette. 
> I'm trying to test the Sweave process, to make sure I can build a 
> vignette. I am stuck at the texi2dvi stage, which fails when I try to 
> process the example Sweave-test-1.tex file.
>
> I am using Windows binary R distributions, and have the same problem 
> on both the latest developer version (2.2.0 Beta) and the latest 
> patched version
> (2.1.1) . For the Tex processing, I first tried downloading and 
> installing fpTex, but found that it doesn't have texi2dvi. Some 
> Googling informed me that recent MiKTeX versions now have that 
> function, so I just downloaded that (the small installation). Indeed 
> there is a texi2dvi. The first time I ran it, it downloaded a class file
it needed, so now it at least executes.
> However, when I try to run it on the test Sweave tex file, I get an error.
> Here's the sequence in R:
>
>> library(tools)
>> example(Sweave)
> [...output suppressed]
>> texi2dvi("Sweave-test-1.tex", pdf=TRUE, quiet=FALSE)
> Error in texi2dvi("Sweave-test-1.tex", pdf=TRUE, quiet = FALSE) :
>        running texi2dvi on 'Sweave-test-1.tex' failed
>
> [A command window pops up, and the following is from that window: ]
>
> This is pdfeTeX, Version 3.141592-1.20a-rc7.2-2.2 (MiKTeX 2.4) output 
> format initialized to PDF entering extended mode (Sweave-test-1.tex 
> LaTeX2e <2003/12/01> Babel <v3.8a> and hyphenation patterns for 
> english, french, german, ngerman, du mylang, nohyphenation, loaded.
> (C:\MiKTex\texmf\tex\latex\base\article.cls
> Document Class: article 2004/02/16 v1.4f Standard LaTeX document class
> (C:\MiKTex\texmf\tex\latex\base\size10.clo))
> (C:\MiKTex\texmf\tex\latex\ltxmisc\a4wide.sty
> (C:\MiKTex\texmf\tex\latex\ntgclass\a4.sty))
> ! Missing \endcsname inserted.
> <to be read again>
>                   \protect
> l.11 \begin
>           {document}
> ?
>
> [ Here, I hit a <CR>, and get the following:]
>
> ! LaTeX Error: Missing \begin{document}.
>
> See the LaTeX manual or LaTeX Companion for explanation.
> Type  H <return>  for immedi ate help.
> ...
>
> l.11 \begin
>           {document}
> ?
>
> -----------------
> I have also tried running texi2dvi directly on the command line, and 
> get the same result. I've looked at the manual on the MiKTeX site, but 
> find nothing that tells me what may be wrong. The Sweave test file 
> looks fine to me. I have also tried running texify --pdf on the same 
> file on the command line, but get the same results exactly.
>
> I also went to the R-tools site, and went through their page on MiKTeX 
> issues. Using their second suggestion (since I'm using the recent 
> MiKTeX version, which defaults to e-TeX mode), I tried changing the 
> mode for texinfo from e-TeX Extended to e-TeX Compatibility mode: no 
> change in results. (I'm assuming that texi2dvi is part of texinfo 
> package - please correct me if I'm wrong.) [I also tried changing 
> texinfo from e-TeX to TeX mode, and rebuilt/reloade/refreshed, but 
> this did not seem to take: texi2dvi still reports that it's in e-TeX 
> mode.]
>
> Finally, I did try posting this to the bioc-devel list, and got some 
> good suggestions (which I've tried, results above). They then 
> suggested I move the question over here.
>
> Regards, and thanks,
> - Peter Warren
>
>
>
>
>
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Mon Oct  3 17:13:21 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 3 Oct 2005 16:13:21 +0100 (BST)
Subject: [Rd] storage.mode, C data types and speed
In-Reply-To: <s34155bf.091@liberator.csv.warwick.ac.uk>
References: <s34155bf.091@liberator.csv.warwick.ac.uk>
Message-ID: <Pine.LNX.4.61.0510031609260.5366@gannet.stats>

If nm is double, very likely INTEGER(nm)[0] is negative and your C code 
does nothing at all.  Hence it could be fast but useless.

On Mon, 3 Oct 2005, Heather Turner wrote:

> Hi,
>
> I am trying to speed up part of an algorithm in which certain columns of 
> a large matrix (X) are replaced by the element-wise product of a matrix 
> (M) and a vector (v). In R, the code might be
>
> X[, ind] <- M * v
>
> I have written a small C routine to do this for me, but the timing 
> depends on how I define the storage.mode of the objects in R and the 
> data types in C, in a way which I don't understand.
>
> To illustrate, suppose I have the following for X, M and v:
> nr <- 10000
> X <- matrix(1, nr, 500)
> M <- matrix(1:(nr*450), nr, 450)
> v <- 1:nr
> storage.mode(X) <- storage.mode(M) <- storage.mode(v) <- "double"
>
> Then I have the following integers required by my C code - these are the 
> objects which I'm not sure how to handle
> a <- 50*nr            #index of X indicating where to start replacing values
> nm <- length(M)
> nv <- length(v)
>
> I would have thought I wanted
>
> storage.mode(a) <- storage.mode(nm) <- storage.mode(nv) <- "integer"
>
> to go with the following C code
>
> # include <Rinternals.h>
>
> SEXP prod_integer(SEXP X, SEXP M, SEXP v, SEXP a, SEXP nm, SEXP nv) {
>  int i = INTEGER(a)[0], i1 = 0, i2 = 0;
>
>  for ( ; i1 < INTEGER(nm)[0]; i2 = (++i2 == INTEGER(nv)[0]) ? 0 : i2) {
>    REAL(X)[i++] = REAL(M)[i1++] * REAL(v)[i2];
>  }
>  return(X);
> }
>
> Running this is R gives the following timings on my PC
>
>> dyn.load("D:/C_routines/prod_integer")
>> for(i in 1:3) {print(system.time(.Call("prod_integer", X, M, v, a, nm, nv)))}
> [1] 0.17 0.00 0.18   NA   NA
> [1] 0.18 0.00 0.17   NA   NA
> [1] 0.15 0.00 0.17   NA   NA
>
> But strangely (to me) if I change the storage mode of my integers to "double", I get
>
>> storage.mode(a) <- storage.mode(nm) <- storage.mode(nv) <- "double"
>> for(i in 1:3) {print(system.time(.Call("prod_integer", X, M, v, a, nm, nv)))}
> [1]  0  0  0 NA NA
> [1]  0  0  0 NA NA
> [1]  0  0  0 NA NA
>
> If on the other hand I use REAL instead of INTEGER in my C code:
>
> # include <Rinternals.h>
>
> SEXP prod_real(SEXP X, SEXP M, SEXP v, SEXP a, SEXP nm, SEXP nv) {
>  int i = REAL(a)[0], i1 = 0, i2 = 0;
>
>  for ( ; i1 < REAL(nm)[0]; i2 = (++i2 == REAL(nv)[0]) ? 0 : i2) {
>    REAL(X)[i++] = REAL(M)[i1++] * REAL(v)[i2];
>  }
>  return(X);
> }
>
> The reverse is true:
>> storage.mode(a) <- storage.mode(nm) <- storage.mode(nv) <- "integer"
>> for(i in 1:3) {print(system.time(.Call("prod_real", X, M, v, a, nm, nv)))}
> [1]  0  0  0 NA NA
> [1]  0  0  0 NA NA
> [1]  0  0  0 NA NA
>> storage.mode(a) <- storage.mode(nm) <- storage.mode(nv) <- "double"
>> for(i in 1:3) {print(system.time(.Call("prod_real", X, M, v, a, nm, nv)))}
> [1] 0.22 0.00 0.22   NA   NA
> [1] 0.21 0.00 0.20   NA   NA
> [1] 0.21 0.00 0.22   NA   NA
>> identical(.Call("prod_integer", X, M, v, a, nm, nv), .Call("prod_real", X, M, v, a, nm, nv))
> [1] TRUE
>
> So I seem to get the fastest results if I store a, nm and nv as doubles in R and treat them as integers in C or if I store them as integers in R and treat them as doubles in C, rather than matching the storage in R to the data type in C.
>
> I must be misunderstanding something here. Can someone explain what's going on - please note I have only just begun to learn C, apologies if this is a basic C issue.
>
> Thanks,
>
> Heather
>
> Dr H Turner
> Research Assistant
> Dept. of Statistics
> The University of Warwick
> Coventry
> CV4 7AL
>
> Tel: 024 76575870
> Url: www.warwick.ac.uk/go/heatherturner
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Mon Oct  3 17:30:24 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 3 Oct 2005 16:30:24 +0100 (BST)
Subject: [Rd] Problem Sweaving vignettes: MiKTeX's texi2dvi reports
	errors
In-Reply-To: <0INS00H0BI982YZ1@vms040.mailsrvcs.net>
References: <0INS00H0BI982YZ1@vms040.mailsrvcs.net>
Message-ID: <Pine.LNX.4.61.0510031616370.5366@gannet.stats>

On Mon, 3 Oct 2005, Peter G. Warren wrote:

> Hi, Prof. Ripley,
>
> Yes, indeed, that was my problem - thank you! I made the mistake of
> installing in the default path of C:\Program Files\R. I just now reinstalled
> in C:\R, and everything worked fine. However, if anyone else runs into this,
> you cannot just go off and run texi2dvi on an existing .tex file after
> installing in a non-space path: you should rerun the whole Sweave example,
> which forces a number of additional required items to be downloaded.

Indeed as the path is hardcoded in the .tex file generated by Sweave.  In 
my case

% -*- mode: noweb; noweb-default-code-mode: R-mode; -*-
\documentclass[a4paper]{article}

\title{A Test File}
\author{Friedrich Leisch}


\usepackage{a4wide}

\usepackage{d:/R/svn/trunk/share/texmf/Sweave}

> Let that process complete, then rerun again. It works fine! The finished 
> pdf file sure looks sweet.

Good.  We should try to fix this at R level if we can.  To Fritz Leisch: I 
presume this is coming from RweaveLatexSetup's

     if(stylepath){
         styfile <- file.path(R.home("share"), "texmf", "Sweave")
         if(.Platform$OS.type == "windows")
             styfile <- gsub("\\\\", "/", styfile)
         if(any(grep(" ", styfile)))
             warning(gettextf("path to '%s' contains spaces,\n", styfile),
                     gettext("this may cause problems when running LaTeX"),
                     domain = NA)
     }
     else
         styfile <- "Sweave"

So, there should have been a warning that seems not to have been seen. 
However, if we added the opposite of normalizePath() to form the short 
path, would that fix this?


>
> Thank you again!
>
> Regards,
> = Peter
>
> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: Sunday, October 02, 2005 3:01 PM
> To: Peter G. Warren
> Cc: r-devel at r-project.org
> Subject: Re: [Rd] Problem Sweaving vignettes: MiKTeX's texi2dvi reports
> errors
>
> I get
>
>> texi2dvi("Sweave-test-1.tex", pdf=TRUE, quiet=FALSE)
> This is pdfeTeX, Version 3.141592-1.20a-rc7.2-2.2 (MiKTeX 2.4) output format
> initialized to PDF entering extended mode (Sweave-test-1.tex LaTeX2e
> <2003/12/01> Babel <v3.8a> and hyphenation patterns for english, french,
> german, ngerman, dumylang, nohyphenation, loaded.
> (C:\packages\MikTeX\tex\latex\base\article.cls
> Document Class: article 2004/02/16 v1.4f Standard LaTeX document class
> (C:\packages\MikTeX\tex\latex\base\size10.clo))
> (C:\packages\MikTeX\tex\latex\ltxmisc\a4wide.sty
> (C:\packages\MikTeX\tex\latex\ntgclass\a4.sty))
> (d:/R/svn/trunk/share/texmf/Sweave.sty
>
> LaTeX Warning: You have requested package
> `d:/R/svn/trunk/share/texmf/Sweave',
>                but the package provides `Sweave'.
>
> so my guess is that this a path problem with your MiKTeX and it is not
> finding Sweave.sty.
>
> Simple questions: where did you install R?  Is there a space in the path?
>
>
> On Sun, 2 Oct 2005, Peter G. Warren wrote:
>
>> Hi,
>>
>> I am trying to create a Bioconductor package. Everything installs and
>> checks fine. Now I'm on my last step, which is to create a vignette.
>> I'm trying to test the Sweave process, to make sure I can build a
>> vignette. I am stuck at the texi2dvi stage, which fails when I try to
>> process the example Sweave-test-1.tex file.
>>
>> I am using Windows binary R distributions, and have the same problem
>> on both the latest developer version (2.2.0 Beta) and the latest
>> patched version
>> (2.1.1) . For the Tex processing, I first tried downloading and
>> installing fpTex, but found that it doesn't have texi2dvi. Some
>> Googling informed me that recent MiKTeX versions now have that
>> function, so I just downloaded that (the small installation). Indeed
>> there is a texi2dvi. The first time I ran it, it downloaded a class file
> it needed, so now it at least executes.
>> However, when I try to run it on the test Sweave tex file, I get an error.
>> Here's the sequence in R:
>>
>>> library(tools)
>>> example(Sweave)
>> [...output suppressed]
>>> texi2dvi("Sweave-test-1.tex", pdf=TRUE, quiet=FALSE)
>> Error in texi2dvi("Sweave-test-1.tex", pdf=TRUE, quiet = FALSE) :
>>        running texi2dvi on 'Sweave-test-1.tex' failed
>>
>> [A command window pops up, and the following is from that window: ]
>>
>> This is pdfeTeX, Version 3.141592-1.20a-rc7.2-2.2 (MiKTeX 2.4) output
>> format initialized to PDF entering extended mode (Sweave-test-1.tex
>> LaTeX2e <2003/12/01> Babel <v3.8a> and hyphenation patterns for
>> english, french, german, ngerman, du mylang, nohyphenation, loaded.
>> (C:\MiKTex\texmf\tex\latex\base\article.cls
>> Document Class: article 2004/02/16 v1.4f Standard LaTeX document class
>> (C:\MiKTex\texmf\tex\latex\base\size10.clo))
>> (C:\MiKTex\texmf\tex\latex\ltxmisc\a4wide.sty
>> (C:\MiKTex\texmf\tex\latex\ntgclass\a4.sty))
>> ! Missing \endcsname inserted.
>> <to be read again>
>>                   \protect
>> l.11 \begin
>>           {document}
>> ?
>>
>> [ Here, I hit a <CR>, and get the following:]
>>
>> ! LaTeX Error: Missing \begin{document}.
>>
>> See the LaTeX manual or LaTeX Companion for explanation.
>> Type  H <return>  for immedi ate help.
>> ...
>>
>> l.11 \begin
>>           {document}
>> ?
>>
>> -----------------
>> I have also tried running texi2dvi directly on the command line, and
>> get the same result. I've looked at the manual on the MiKTeX site, but
>> find nothing that tells me what may be wrong. The Sweave test file
>> looks fine to me. I have also tried running texify --pdf on the same
>> file on the command line, but get the same results exactly.
>>
>> I also went to the R-tools site, and went through their page on MiKTeX
>> issues. Using their second suggestion (since I'm using the recent
>> MiKTeX version, which defaults to e-TeX mode), I tried changing the
>> mode for texinfo from e-TeX Extended to e-TeX Compatibility mode: no
>> change in results. (I'm assuming that texi2dvi is part of texinfo
>> package - please correct me if I'm wrong.) [I also tried changing
>> texinfo from e-TeX to TeX mode, and rebuilt/reloade/refreshed, but
>> this did not seem to take: texi2dvi still reports that it's in e-TeX
>> mode.]
>>
>> Finally, I did try posting this to the bioc-devel list, and got some
>> good suggestions (which I've tried, results above). They then
>> suggested I move the question over here.
>>
>> Regards, and thanks,
>> - Peter Warren
>>
>>
>>
>>
>>
>> 	[[alternative HTML version deleted]]
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ggrothendieck at gmail.com  Mon Oct  3 17:31:40 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 3 Oct 2005 11:31:40 -0400
Subject: [Rd] Problem Sweaving vignettes: MiKTeX's texi2dvi reports
	errors
In-Reply-To: <0INS00H0BI982YZ1@vms040.mailsrvcs.net>
References: <Pine.LNX.4.61.0510022053330.21391@gannet.stats>
	<0INS00H0BI982YZ1@vms040.mailsrvcs.net>
Message-ID: <971536df0510030831p5c511783m462ac8aebb657ea3@mail.gmail.com>

I have R installed in c:\Program Files\R and I use MiKTeX and texi2dvi
to process my vignettes.  I do keep my package sources elsewhere;
e.g. I would keep the source for mypkg in c:\Rpkgs\mypkg .
and I would install it into c:\Rpkg\library or once I am ready to use it
in production into e.g. c:\Program Files\R\rw2011pat\library
thus I don't think its necessary to relocate R itself.

On 10/3/05, Peter G. Warren <peter.warren at verizon.net> wrote:
> Hi, Prof. Ripley,
>
> Yes, indeed, that was my problem - thank you! I made the mistake of
> installing in the default path of C:\Program Files\R. I just now reinstalled
> in C:\R, and everything worked fine. However, if anyone else runs into this,
> you cannot just go off and run texi2dvi on an existing .tex file after
> installing in a non-space path: you should rerun the whole Sweave example,
> which forces a number of additional required items to be downloaded. Let
> that process complete, then rerun again. It works fine! The finished pdf
> file sure looks sweet.
>
> Thank you again!
>
> Regards,
> = Peter
>
> -----Original Message-----
> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: Sunday, October 02, 2005 3:01 PM
> To: Peter G. Warren
> Cc: r-devel at r-project.org
> Subject: Re: [Rd] Problem Sweaving vignettes: MiKTeX's texi2dvi reports
> errors
>
> I get
>
> > texi2dvi("Sweave-test-1.tex", pdf=TRUE, quiet=FALSE)
> This is pdfeTeX, Version 3.141592-1.20a-rc7.2-2.2 (MiKTeX 2.4) output format
> initialized to PDF entering extended mode (Sweave-test-1.tex LaTeX2e
> <2003/12/01> Babel <v3.8a> and hyphenation patterns for english, french,
> german, ngerman, dumylang, nohyphenation, loaded.
> (C:\packages\MikTeX\tex\latex\base\article.cls
> Document Class: article 2004/02/16 v1.4f Standard LaTeX document class
> (C:\packages\MikTeX\tex\latex\base\size10.clo))
> (C:\packages\MikTeX\tex\latex\ltxmisc\a4wide.sty
> (C:\packages\MikTeX\tex\latex\ntgclass\a4.sty))
> (d:/R/svn/trunk/share/texmf/Sweave.sty
>
> LaTeX Warning: You have requested package
> `d:/R/svn/trunk/share/texmf/Sweave',
>                but the package provides `Sweave'.
>
> so my guess is that this a path problem with your MiKTeX and it is not
> finding Sweave.sty.
>
> Simple questions: where did you install R?  Is there a space in the path?
>
>
> On Sun, 2 Oct 2005, Peter G. Warren wrote:
>
> > Hi,
> >
> > I am trying to create a Bioconductor package. Everything installs and
> > checks fine. Now I'm on my last step, which is to create a vignette.
> > I'm trying to test the Sweave process, to make sure I can build a
> > vignette. I am stuck at the texi2dvi stage, which fails when I try to
> > process the example Sweave-test-1.tex file.
> >
> > I am using Windows binary R distributions, and have the same problem
> > on both the latest developer version (2.2.0 Beta) and the latest
> > patched version
> > (2.1.1) . For the Tex processing, I first tried downloading and
> > installing fpTex, but found that it doesn't have texi2dvi. Some
> > Googling informed me that recent MiKTeX versions now have that
> > function, so I just downloaded that (the small installation). Indeed
> > there is a texi2dvi. The first time I ran it, it downloaded a class file
> it needed, so now it at least executes.
> > However, when I try to run it on the test Sweave tex file, I get an error.
> > Here's the sequence in R:
> >
> >> library(tools)
> >> example(Sweave)
> > [...output suppressed]
> >> texi2dvi("Sweave-test-1.tex", pdf=TRUE, quiet=FALSE)
> > Error in texi2dvi("Sweave-test-1.tex", pdf=TRUE, quiet = FALSE) :
> >        running texi2dvi on 'Sweave-test-1.tex' failed
> >
> > [A command window pops up, and the following is from that window: ]
> >
> > This is pdfeTeX, Version 3.141592-1.20a-rc7.2-2.2 (MiKTeX 2.4) output
> > format initialized to PDF entering extended mode (Sweave-test-1.tex
> > LaTeX2e <2003/12/01> Babel <v3.8a> and hyphenation patterns for
> > english, french, german, ngerman, du mylang, nohyphenation, loaded.
> > (C:\MiKTex\texmf\tex\latex\base\article.cls
> > Document Class: article 2004/02/16 v1.4f Standard LaTeX document class
> > (C:\MiKTex\texmf\tex\latex\base\size10.clo))
> > (C:\MiKTex\texmf\tex\latex\ltxmisc\a4wide.sty
> > (C:\MiKTex\texmf\tex\latex\ntgclass\a4.sty))
> > ! Missing \endcsname inserted.
> > <to be read again>
> >                   \protect
> > l.11 \begin
> >           {document}
> > ?
> >
> > [ Here, I hit a <CR>, and get the following:]
> >
> > ! LaTeX Error: Missing \begin{document}.
> >
> > See the LaTeX manual or LaTeX Companion for explanation.
> > Type  H <return>  for immedi ate help.
> > ...
> >
> > l.11 \begin
> >           {document}
> > ?
> >
> > -----------------
> > I have also tried running texi2dvi directly on the command line, and
> > get the same result. I've looked at the manual on the MiKTeX site, but
> > find nothing that tells me what may be wrong. The Sweave test file
> > looks fine to me. I have also tried running texify --pdf on the same
> > file on the command line, but get the same results exactly.
> >
> > I also went to the R-tools site, and went through their page on MiKTeX
> > issues. Using their second suggestion (since I'm using the recent
> > MiKTeX version, which defaults to e-TeX mode), I tried changing the
> > mode for texinfo from e-TeX Extended to e-TeX Compatibility mode: no
> > change in results. (I'm assuming that texi2dvi is part of texinfo
> > package - please correct me if I'm wrong.) [I also tried changing
> > texinfo from e-TeX to TeX mode, and rebuilt/reloade/refreshed, but
> > this did not seem to take: texi2dvi still reports that it's in e-TeX
> > mode.]
> >
> > Finally, I did try posting this to the bioc-devel list, and got some
> > good suggestions (which I've tried, results above). They then
> > suggested I move the question over here.
> >
> > Regards, and thanks,
> > - Peter Warren
> >
> >
> >
> >
> >
> >       [[alternative HTML version deleted]]
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> >
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From Friedrich.Leisch at tuwien.ac.at  Mon Oct  3 17:48:12 2005
From: Friedrich.Leisch at tuwien.ac.at (Friedrich.Leisch@tuwien.ac.at)
Date: Mon, 3 Oct 2005 17:48:12 +0200
Subject: [Rd] Problem Sweaving vignettes: MiKTeX's texi2dvi
	reports	errors
In-Reply-To: <971536df0510030831p5c511783m462ac8aebb657ea3@mail.gmail.com>
References: <Pine.LNX.4.61.0510022053330.21391@gannet.stats>
	<0INS00H0BI982YZ1@vms040.mailsrvcs.net>
	<971536df0510030831p5c511783m462ac8aebb657ea3@mail.gmail.com>
Message-ID: <17217.21180.971714.394488@galadriel.ci.tuwien.ac.at>

>>>>> On Mon, 3 Oct 2005 11:31:40 -0400,
>>>>> Gabor Grothendieck (GG) wrote:

  > I have R installed in c:\Program Files\R and I use MiKTeX and texi2dvi
  > to process my vignettes.  I do keep my package sources elsewhere;
  > e.g. I would keep the source for mypkg in c:\Rpkgs\mypkg .
  > and I would install it into c:\Rpkg\library or once I am ready to use it
  > in production into e.g. c:\Program Files\R\rw2011pat\library
  > thus I don't think its necessary to relocate R itself.

The problem is the path to the *style file* sitting in
$RHOME/share/texmf, so having the packages in a different place has
nothing to do with it. It is also not really necessary to relocate R
itself, you just have to move the style file to some place where latex
finds it (e.g., by including $RHOME/share/texmf in your TEXINPUTS path
... but that will make troubles when the path contains spaces and we
are back at the beginning).

.f


From Friedrich.Leisch at tuwien.ac.at  Mon Oct  3 17:53:21 2005
From: Friedrich.Leisch at tuwien.ac.at (Friedrich.Leisch@tuwien.ac.at)
Date: Mon, 3 Oct 2005 17:53:21 +0200
Subject: [Rd] Problem Sweaving vignettes: MiKTeX's texi2dvi
	reports	errors
In-Reply-To: <Pine.LNX.4.61.0510031616370.5366@gannet.stats>
References: <0INS00H0BI982YZ1@vms040.mailsrvcs.net>
	<Pine.LNX.4.61.0510031616370.5366@gannet.stats>
Message-ID: <17217.21489.322649.903620@galadriel.ci.tuwien.ac.at>

>>>>> On Mon, 3 Oct 2005 16:30:24 +0100 (BST),
>>>>> Prof Brian Ripley (PBR) wrote:

  > On Mon, 3 Oct 2005, Peter G. Warren wrote:
  >> Hi, Prof. Ripley,
  >> 
  >> Yes, indeed, that was my problem - thank you! I made the mistake of
  >> installing in the default path of C:\Program Files\R. I just now reinstalled
  >> in C:\R, and everything worked fine. However, if anyone else runs into this,
  >> you cannot just go off and run texi2dvi on an existing .tex file after
  >> installing in a non-space path: you should rerun the whole Sweave example,
  >> which forces a number of additional required items to be downloaded.

  > Indeed as the path is hardcoded in the .tex file generated by Sweave.  In 
  > my case

  > % -*- mode: noweb; noweb-default-code-mode: R-mode; -*-
  > \documentclass[a4paper]{article}

  > \title{A Test File}
  > \author{Friedrich Leisch}


  > \usepackage{a4wide}

  > \usepackage{d:/R/svn/trunk/share/texmf/Sweave}

  >> Let that process complete, then rerun again. It works fine! The finished 
  >> pdf file sure looks sweet.

  > Good.  We should try to fix this at R level if we can.  To Fritz Leisch: I 
  > presume this is coming from RweaveLatexSetup's

  >      if(stylepath){
  >          styfile <- file.path(R.home("share"), "texmf", "Sweave")
  >          if(.Platform$OS.type == "windows")
  >              styfile <- gsub("\\\\", "/", styfile)
  >          if(any(grep(" ", styfile)))
  >              warning(gettextf("path to '%s' contains spaces,\n", styfile),
  >                      gettext("this may cause problems when running LaTeX"),
  >                      domain = NA)
  >      }
  >      else
  >          styfile <- "Sweave"


Yes.


  > So, there should have been a warning that seems not to have been seen. 
  > However, if we added the opposite of normalizePath() to form the short 
  > path, would that fix this?

Actually, thinking about it again makes me wonder if the best solution
isn't to simply copy the few lines I need to the .tex file if no
\usepackage[...]{Sweave} is found.

Too late for 2.2.0 but I would consider the problem a bug, so could
try to fix it for 2.2.1.

Best,
Fritz

-- 
-------------------------------------------------------------------
                        Friedrich Leisch 
Institut f?r Statistik                     Tel: (+43 1) 58801 10715
Technische Universit?t Wien                Fax: (+43 1) 58801 10798
Wiedner Hauptstra?e 8-10/1071
A-1040 Wien, Austria             http://www.ci.tuwien.ac.at/~leisch


From ggrothendieck at gmail.com  Mon Oct  3 18:10:23 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 3 Oct 2005 12:10:23 -0400
Subject: [Rd] Problem Sweaving vignettes: MiKTeX's texi2dvi reports
	errors
In-Reply-To: <17217.21180.971714.394488@galadriel.ci.tuwien.ac.at>
References: <Pine.LNX.4.61.0510022053330.21391@gannet.stats>
	<0INS00H0BI982YZ1@vms040.mailsrvcs.net>
	<971536df0510030831p5c511783m462ac8aebb657ea3@mail.gmail.com>
	<17217.21180.971714.394488@galadriel.ci.tuwien.ac.at>
Message-ID: <971536df0510030910t3c381c4cm5d208180ee7afefb@mail.gmail.com>

There is a batch file in batchfiles at
http://cran.r-project.org/contrib/extra/batchfiles/
that copies the .sty files to miktex's directory.  This is also discussed on
Duncan's rtools MiKTeX site.  My understanding is that this will not be
necessary from R 2.2.0 onwards but was needed previously.

On 10/3/05, Friedrich.Leisch at tuwien.ac.at <Friedrich.Leisch at tuwien.ac.at> wrote:
> >>>>> On Mon, 3 Oct 2005 11:31:40 -0400,
> >>>>> Gabor Grothendieck (GG) wrote:
>
>  > I have R installed in c:\Program Files\R and I use MiKTeX and texi2dvi
>  > to process my vignettes.  I do keep my package sources elsewhere;
>  > e.g. I would keep the source for mypkg in c:\Rpkgs\mypkg .
>  > and I would install it into c:\Rpkg\library or once I am ready to use it
>  > in production into e.g. c:\Program Files\R\rw2011pat\library
>  > thus I don't think its necessary to relocate R itself.
>
> The problem is the path to the *style file* sitting in
> $RHOME/share/texmf, so having the packages in a different place has
> nothing to do with it. It is also not really necessary to relocate R
> itself, you just have to move the style file to some place where latex
> finds it (e.g., by including $RHOME/share/texmf in your TEXINPUTS path
> ... but that will make troubles when the path contains spaces and we
> are back at the beginning).
>
> .f
>


From jonathan_lees at unc.edu  Mon Oct  3 18:13:16 2005
From: jonathan_lees at unc.edu (jonathan_lees@unc.edu)
Date: Mon,  3 Oct 2005 18:13:16 +0200 (CEST)
Subject: [Rd] interpolation using akima (PR#8174)
Message-ID: <20051003161316.35D4A1DA5C@slim.kubism.ku.dk>

Full_Name: Jonathan Lees
Version: 2.0.1
OS: linux-gnu
Submission from: (NULL) (152.2.75.65)


there is a problem with calculating the convex hull in 2-D interpolation using
the codes interp fromt eh akima package:

x =c(0.6505304, -1.1821562, -0.2600792,  0.7913716)
y = c(1.0424226,  0.1754048, -1.4523334,  0.2349112)
z =  c(0.000, 3.042, 0.370, 0.122)


   EX = seq(from=min(x), to=max(x), length=100)
    WHY = seq(from=min(y), to=max(y), length=100)

 ZZ = interp(x=x, y=y, z=z, xo=EX, yo=WHY, extrap=FALSE)

plot(x,y, type='n')
image(ZZ, add=TRUE)
points(x,y)
text(x,y,labels=z)

BUG:
Notice the convex hull is wrong.
It includes only 3 of the 4 points provided.
If you add another point near by it does some
really wierd stuff.
x = c(x,  -0.3950865)
y = c(y,  -1.449117)
z = c(z, .37)



I do not think it should behave in this manner.


From ripley at stats.ox.ac.uk  Mon Oct  3 18:18:48 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 3 Oct 2005 17:18:48 +0100 (BST)
Subject: [Rd] interpolation using akima (PR#8174)
In-Reply-To: <20051003161316.35D4A1DA5C@slim.kubism.ku.dk>
References: <20051003161316.35D4A1DA5C@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.61.0510031716180.17627@gannet.stats>

Please do read the posting guide and FAQ, as we do ask you to do before 
sending a bug report.

1) Your version of R is not current.

2) akima is a contributed package and you are not the maintainer.

We do ask you not to `behave in this manner'.


On Mon, 3 Oct 2005 jonathan_lees at unc.edu wrote:

> Full_Name: Jonathan Lees
> Version: 2.0.1
> OS: linux-gnu
> Submission from: (NULL) (152.2.75.65)
>
>
> there is a problem with calculating the convex hull in 2-D interpolation using
> the codes interp fromt eh akima package:
>
> x =c(0.6505304, -1.1821562, -0.2600792,  0.7913716)
> y = c(1.0424226,  0.1754048, -1.4523334,  0.2349112)
> z =  c(0.000, 3.042, 0.370, 0.122)
>
>
>   EX = seq(from=min(x), to=max(x), length=100)
>    WHY = seq(from=min(y), to=max(y), length=100)
>
> ZZ = interp(x=x, y=y, z=z, xo=EX, yo=WHY, extrap=FALSE)
>
> plot(x,y, type='n')
> image(ZZ, add=TRUE)
> points(x,y)
> text(x,y,labels=z)
>
> BUG:
> Notice the convex hull is wrong.
> It includes only 3 of the 4 points provided.
> If you add another point near by it does some
> really wierd stuff.
> x = c(x,  -0.3950865)
> y = c(y,  -1.449117)
> z = c(z, .37)
>
>
>
> I do not think it should behave in this manner.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From renaud.lancelot at gmail.com  Mon Oct  3 18:29:57 2005
From: renaud.lancelot at gmail.com (Renaud Lancelot)
Date: Mon, 3 Oct 2005 18:29:57 +0200
Subject: [Rd] interpolation using akima (PR#8174)
In-Reply-To: <20051003161316.35D4A1DA5C@slim.kubism.ku.dk>
References: <20051003161316.35D4A1DA5C@slim.kubism.ku.dk>
Message-ID: <c2ee568005100309296238eb58@mail.gmail.com>

This message should be sent to the package maintainer, not to this list.

Moreover, it works fine with my installation (i.e., I don't get the
bug you describe):

R:

platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status   beta
major    2
minor    2.0
year     2005
month    09
day      24
svn rev  35666
language R


akima:
Package:       akima
Version:       0.4-5
Date:          2005-07-21

Best,

Renaud


2005/10/3, jonathan_lees at unc.edu <jonathan_lees at unc.edu>:
> Full_Name: Jonathan Lees
> Version: 2.0.1
> OS: linux-gnu
> Submission from: (NULL) (152.2.75.65)
>
>
> there is a problem with calculating the convex hull in 2-D interpolation using
> the codes interp fromt eh akima package:
>
> x =c(0.6505304, -1.1821562, -0.2600792,  0.7913716)
> y = c(1.0424226,  0.1754048, -1.4523334,  0.2349112)
> z =  c(0.000, 3.042, 0.370, 0.122)
>
>
>    EX = seq(from=min(x), to=max(x), length=100)
>     WHY = seq(from=min(y), to=max(y), length=100)
>
>  ZZ = interp(x=x, y=y, z=z, xo=EX, yo=WHY, extrap=FALSE)
>
> plot(x,y, type='n')
> image(ZZ, add=TRUE)
> points(x,y)
> text(x,y,labels=z)
>
> BUG:
> Notice the convex hull is wrong.
> It includes only 3 of the 4 points provided.
> If you add another point near by it does some
> really wierd stuff.
> x = c(x,  -0.3950865)
> y = c(y,  -1.449117)
> z = c(z, .37)
>
>
>
> I do not think it should behave in this manner.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


--
Renaud LANCELOT
Directeur Adjoint charg? des Affaires Scientifiques
Deputy Director for Scientific Affairs

D?partement EMVT du CIRAD, TA 30/B
Campus International de Baillarguet
34398 Montpellier Cedex 5 - France
Tel.  +33 (0)4 67 59 37 17
Secr. +33 (0)4 67 59 39 04
Fax   +33 (0)4 67 59 37 95


From blindglobe at gmail.com  Tue Oct  4 13:50:53 2005
From: blindglobe at gmail.com (A.J. Rossini)
Date: Tue, 4 Oct 2005 13:50:53 +0200
Subject: [Rd] more problems when using "installWithVers"
Message-ID: <1abe3fa90510040450s124226a5oae8361f723002e8d@mail.gmail.com>

R-devel, SVN revision 35729 (this morning, euro-time)

So far, I'm having awful luck with the "installWithVers" flags.

Recent example:

I can install.packages("lattice", installWithVers=TRUE)
successfully (no errors, at least it looks like a successful install),
but can't load it:

Error in library.dynam(pkg,pkg,lib) : shared library 'lattice_0.12-7' not found
Error: .onLoad failed in 'loadNamesspace' for 'lattice_0.12-7'
Error: package/namespace load filed for 'lattice'

It's there.  (note: no problems on a different installation, avoiding
the "installWithVers" flags for package installation).

best,
-tony

blindglobe at gmail.com
Muttenz, Switzerland.
"Commit early,commit often, and commit in a repository from which we can easily
roll-back your mistakes" (AJR, 4Jan05).


From ripley at stats.ox.ac.uk  Tue Oct  4 14:48:01 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 4 Oct 2005 13:48:01 +0100 (BST)
Subject: [Rd] more problems when using "installWithVers"
In-Reply-To: <1abe3fa90510040450s124226a5oae8361f723002e8d@mail.gmail.com>
References: <1abe3fa90510040450s124226a5oae8361f723002e8d@mail.gmail.com>
Message-ID: <Pine.LNX.4.61.0510041334350.3776@gannet.stats>

Tony,

The problem is specific to your example:

> install.packages("ash")
...
> install.packages("ash", installWithVers=TRUE)
> library("ash", version="1.0-9")
> search()
  [1] ".GlobalEnv"        "package:ash_1.0-9" "package:methods"
  [4] "package:stats"     "package:graphics"  "package:grDevices"
  [7] "package:utils"     "package:datasets"  "Autoloads"
[10] "package:base"

and lies in lattice's .onLoad (as the message says, and hence the Cc: to 
Deepayan).  That has

.onLoad <- function(lib, pkg)
{
     library.dynam(pkg, pkg, lib )
     lattice.options(.defaultLatticeOptions())
     lattice.setStatus(.defaultLatticeStatus())
}

which is incorrect: it should be library.dynam("lattice", pkg, lib)
OTOH, 'ash' has it correctly and so works.

I am not sure BTW that lattice_0.12-7 is necessarily compatible with R 
2.2.0.

Brian

On Tue, 4 Oct 2005, A.J. Rossini wrote:

> R-devel, SVN revision 35729 (this morning, euro-time)
>
> So far, I'm having awful luck with the "installWithVers" flags.
>
> Recent example:
>
> I can install.packages("lattice", installWithVers=TRUE)
> successfully (no errors, at least it looks like a successful install),
> but can't load it:
>
> Error in library.dynam(pkg,pkg,lib) : shared library 'lattice_0.12-7' not found
> Error: .onLoad failed in 'loadNamesspace' for 'lattice_0.12-7'
> Error: package/namespace load filed for 'lattice'

Did you really get those typos?  I don't.

Error in library.dynam(pkg, pkg, lib) : shared library 'lattice_0.12-7' not found
Error: .onLoad failed in 'loadNamespace' for 'lattice_0.12-7'
Error: package/namespace load failed for 'lattice'


> It's there.  (note: no problems on a different installation, avoiding
> the "installWithVers" flags for package installation).
>
> best,
> -tony
>
> blindglobe at gmail.com
> Muttenz, Switzerland.
> "Commit early,commit often, and commit in a repository from which we can easily
> roll-back your mistakes" (AJR, 4Jan05).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From blindglobe at gmail.com  Tue Oct  4 15:22:14 2005
From: blindglobe at gmail.com (A.J. Rossini)
Date: Tue, 4 Oct 2005 15:22:14 +0200
Subject: [Rd] more problems when using "installWithVers"
In-Reply-To: <Pine.LNX.4.61.0510041334350.3776@gannet.stats>
References: <1abe3fa90510040450s124226a5oae8361f723002e8d@mail.gmail.com>
	<Pine.LNX.4.61.0510041334350.3776@gannet.stats>
Message-ID: <1abe3fa90510040622n339faa37j90544acef27af696@mail.gmail.com>

And wasn't to my last example.  Since it probably is clear that I'm
retyping errors, there is a reason that I'm delaying on the next few.

On 10/4/05, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> Tony,
>
> The problem is specific to your example:
>
> > install.packages("ash")
> ...
> > install.packages("ash", installWithVers=TRUE)
> > library("ash", version="1.0-9")
> > search()
>  [1] ".GlobalEnv"        "package:ash_1.0-9" "package:methods"
>  [4] "package:stats"     "package:graphics"  "package:grDevices"
>  [7] "package:utils"     "package:datasets"  "Autoloads"
> [10] "package:base"
>
> and lies in lattice's .onLoad (as the message says, and hence the Cc: to
> Deepayan).  That has
>
> .onLoad <- function(lib, pkg)
> {
>     library.dynam(pkg, pkg, lib )
>     lattice.options(.defaultLatticeOptions())
>     lattice.setStatus(.defaultLatticeStatus())
> }
>
> which is incorrect: it should be library.dynam("lattice", pkg, lib)
> OTOH, 'ash' has it correctly and so works.
>
> I am not sure BTW that lattice_0.12-7 is necessarily compatible with R
> 2.2.0.
>
> Brian
>
> On Tue, 4 Oct 2005, A.J. Rossini wrote:
>
> > R-devel, SVN revision 35729 (this morning, euro-time)
> >
> > So far, I'm having awful luck with the "installWithVers" flags.
> >
> > Recent example:
> >
> > I can install.packages("lattice", installWithVers=TRUE)
> > successfully (no errors, at least it looks like a successful install),
> > but can't load it:
> >
> > Error in library.dynam(pkg,pkg,lib) : shared library 'lattice_0.12-7' not found
> > Error: .onLoad failed in 'loadNamesspace' for 'lattice_0.12-7'
> > Error: package/namespace load filed for 'lattice'
>
> Did you really get those typos?  I don't.
>
> Error in library.dynam(pkg, pkg, lib) : shared library 'lattice_0.12-7' not found
> Error: .onLoad failed in 'loadNamespace' for 'lattice_0.12-7'
> Error: package/namespace load failed for 'lattice'
>
>
> > It's there.  (note: no problems on a different installation, avoiding
> > the "installWithVers" flags for package installation).
> >
> > best,
> > -tony
> >
> > blindglobe at gmail.com
> > Muttenz, Switzerland.
> > "Commit early,commit often, and commit in a repository from which we can easily
> > roll-back your mistakes" (AJR, 4Jan05).
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>


--
best,
-tony

blindglobe at gmail.com
Muttenz, Switzerland.
"Commit early,commit often, and commit in a repository from which we can easily
roll-back your mistakes" (AJR, 4Jan05).


From ripley at stats.ox.ac.uk  Tue Oct  4 15:27:43 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 4 Oct 2005 14:27:43 +0100 (BST)
Subject: [Rd] Option "installWithVers" seems to impact new.packages()
 badly?
In-Reply-To: <1abe3fa90509300151i641e4408y9e74f728fe681785@mail.gmail.com>
References: <1abe3fa90509300151i641e4408y9e74f728fe681785@mail.gmail.com>
Message-ID: <Pine.LNX.4.61.0510041406460.5316@gannet.stats>

Hard to know what you expect here.  There is no recent change that I can 
see.

I removed ash and then installed it with version.  new.packages() showed 
it as new in both 2.1.1 and 2.2.0-beta.

The issue is that installed.packages() has never been taught about 
versioned installs, and you might like to take that up with your BioC 
colleagues who added the idea.

On Fri, 30 Sep 2005, A.J. Rossini wrote:

> In Rdevel, SVN version built this morning around 10am central european
> time, it looks like
>
>   install.packages(new.packages(),installWithVers=TRUE)
>
> seem to ignore the version information -- that is, it reinstalls
> current versions of packages.

I believe it always did: it certainly does in 2.1.1 for me.

> This did not happen before I used "installWithVers=TRUE" option, that is
> I could use
>
>   update.packages()
> and
>   install.packages(new.packages())
>
> to keep a current, platform-complete, installed base of CRAN.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From blindglobe at gmail.com  Tue Oct  4 15:30:08 2005
From: blindglobe at gmail.com (A.J. Rossini)
Date: Tue, 4 Oct 2005 15:30:08 +0200
Subject: [Rd] Option "installWithVers" seems to impact new.packages()
	badly?
In-Reply-To: <Pine.LNX.4.61.0510041406460.5316@gannet.stats>
References: <1abe3fa90509300151i641e4408y9e74f728fe681785@mail.gmail.com>
	<Pine.LNX.4.61.0510041406460.5316@gannet.stats>
Message-ID: <1abe3fa90510040630s46652b00seeecf1a430717fc3@mail.gmail.com>

I expect "new.packages()" to not report on packages which I've
installed, as per documentation.

best,
-tony

On 10/4/05, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> Hard to know what you expect here.  There is no recent change that I can
> see.
>
> I removed ash and then installed it with version.  new.packages() showed
> it as new in both 2.1.1 and 2.2.0-beta.
>
> The issue is that installed.packages() has never been taught about
> versioned installs, and you might like to take that up with your BioC
> colleagues who added the idea.
>
> On Fri, 30 Sep 2005, A.J. Rossini wrote:
>
> > In Rdevel, SVN version built this morning around 10am central european
> > time, it looks like
> >
> >   install.packages(new.packages(),installWithVers=TRUE)
> >
> > seem to ignore the version information -- that is, it reinstalls
> > current versions of packages.
>
> I believe it always did: it certainly does in 2.1.1 for me.
>
> > This did not happen before I used "installWithVers=TRUE" option, that is
> > I could use
> >
> >   update.packages()
> > and
> >   install.packages(new.packages())
> >
> > to keep a current, platform-complete, installed base of CRAN.
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>


--
best,
-tony

blindglobe at gmail.com
Muttenz, Switzerland.
"Commit early,commit often, and commit in a repository from which we can easily
roll-back your mistakes" (AJR, 4Jan05).


From blindglobe at gmail.com  Tue Oct  4 15:32:14 2005
From: blindglobe at gmail.com (A.J. Rossini)
Date: Tue, 4 Oct 2005 15:32:14 +0200
Subject: [Rd] Option "installWithVers" seems to impact new.packages()
	badly?
In-Reply-To: <1abe3fa90510040630s46652b00seeecf1a430717fc3@mail.gmail.com>
References: <1abe3fa90509300151i641e4408y9e74f728fe681785@mail.gmail.com>
	<Pine.LNX.4.61.0510041406460.5316@gannet.stats>
	<1abe3fa90510040630s46652b00seeecf1a430717fc3@mail.gmail.com>
Message-ID: <1abe3fa90510040632k405f9e42yf29b926172cafee6@mail.gmail.com>

Also, I don't know what this has to do with BioC.  This is core R, so
pertinent to this list.  Otherwise, perhaps it should be taken out?

On 10/4/05, A.J. Rossini <blindglobe at gmail.com> wrote:
> I expect "new.packages()" to not report on packages which I've
> installed, as per documentation.
>
> best,
> -tony
>
> On 10/4/05, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> > Hard to know what you expect here.  There is no recent change that I can
> > see.
> >
> > I removed ash and then installed it with version.  new.packages() showed
> > it as new in both 2.1.1 and 2.2.0-beta.
> >
> > The issue is that installed.packages() has never been taught about
> > versioned installs, and you might like to take that up with your BioC
> > colleagues who added the idea.
> >
> > On Fri, 30 Sep 2005, A.J. Rossini wrote:
> >
> > > In Rdevel, SVN version built this morning around 10am central european
> > > time, it looks like
> > >
> > >   install.packages(new.packages(),installWithVers=TRUE)
> > >
> > > seem to ignore the version information -- that is, it reinstalls
> > > current versions of packages.
> >
> > I believe it always did: it certainly does in 2.1.1 for me.
> >
> > > This did not happen before I used "installWithVers=TRUE" option, that is
> > > I could use
> > >
> > >   update.packages()
> > > and
> > >   install.packages(new.packages())
> > >
> > > to keep a current, platform-complete, installed base of CRAN.
> >
> > --
> > Brian D. Ripley,                  ripley at stats.ox.ac.uk
> > Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> > University of Oxford,             Tel:  +44 1865 272861 (self)
> > 1 South Parks Road,                     +44 1865 272866 (PA)
> > Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> >
>
>
> --
> best,
> -tony
>
> blindglobe at gmail.com
> Muttenz, Switzerland.
> "Commit early,commit often, and commit in a repository from which we can easily
> roll-back your mistakes" (AJR, 4Jan05).
>


--
best,
-tony

blindglobe at gmail.com
Muttenz, Switzerland.
"Commit early,commit often, and commit in a repository from which we can easily
roll-back your mistakes" (AJR, 4Jan05).


From p.dalgaard at biostat.ku.dk  Tue Oct  4 16:42:14 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 04 Oct 2005 16:42:14 +0200
Subject: [Rd] Option "installWithVers" seems to impact new.packages()
	badly?
In-Reply-To: <1abe3fa90510040632k405f9e42yf29b926172cafee6@mail.gmail.com>
References: <1abe3fa90509300151i641e4408y9e74f728fe681785@mail.gmail.com>
	<Pine.LNX.4.61.0510041406460.5316@gannet.stats>
	<1abe3fa90510040630s46652b00seeecf1a430717fc3@mail.gmail.com>
	<1abe3fa90510040632k405f9e42yf29b926172cafee6@mail.gmail.com>
Message-ID: <x2hdbxuywp.fsf@viggo.kubism.ku.dk>

"A.J. Rossini" <blindglobe at gmail.com> writes:

> Also, I don't know what this has to do with BioC.  This is core R, so
> pertinent to this list.  Otherwise, perhaps it should be taken out?

...

> > > The issue is that installed.packages() has never been taught about
> > > versioned installs, and you might like to take that up with your BioC
> > > colleagues who added the idea.

Brian can of course speak for himself, but I think his point was just
that the request for the feature came from BioC, not that the
discussion was on the wrong list. 


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From gregory.r.warnes at pfizer.com  Tue Oct  4 17:35:13 2005
From: gregory.r.warnes at pfizer.com (Warnes, Gregory R)
Date: Tue, 4 Oct 2005 11:35:13 -0400 
Subject: [Rd] access to R parse tree for Lisp-style macros?
Message-ID: <915D2D65A9986440A277AC5C98AA466F01863413@groamrexm02.amer.pfizer.com>

FWIW, the latest version of the 'gtools' package includes a slightly
enhanced version of Thomas's 'defmacro' function, as well as the 'strmacro'
function that does string-based macro processing.  Feel free to take a look
at them and suggest enhancements (via patches :^)

-Greg


> -----Original Message-----
> From: r-devel-bounces at r-project.org
> [mailto:r-devel-bounces at r-project.org]On Behalf Of Thomas Lumley
> Sent: Monday, October 03, 2005 10:22 AM
> To: Duncan Murdoch
> Cc: r-devel at r-project.org; Andrew Piskorski
> Subject: Re: [Rd] access to R parse tree for Lisp-style macros?
> 
> 
> On Mon, 3 Oct 2005, Duncan Murdoch wrote:
> 
> > On 10/3/2005 3:25 AM, Andrew Piskorski wrote:
> >> R folks, I'm curious about possible support for Lisp-style 
> macros in
> >> R.  I'm aware of the "defmacro" support for S-Plus and R discussed
> >> here:
> >>
> >>   
> http://www.biostat.wustl.edu/archives/html/s-news/2002-10/msg0
0064.html
>>
>> but that's really just a syntactic short-cut to the run-time use of
>> substitute() and eval(), which you could manually put into a function
>> yourself if you cared too.  (AKA, not at all equivalent to Lisp
>> macros.)

Well, yes and no.  It is a syntactic shortcut using functions, but what it 
does is manipulate and then evaluate pieces of parse tree.  It doesn't 
have the efficiency under compilation that real macros would, but we don't 
have compilation.  It doesn't have gensyms, but again, R fails to support 
these in a fairly fundamental way, so they have to be faked using 
variables with weird random names.

I have a long-term plan to add real macros, but not until after Luke 
Tierney's byte-code compiler is finished.

 	-thomas

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel

----------------------------------------------------------------------
LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}


From finak at mcb.mcgill.ca  Tue Oct  4 19:36:25 2005
From: finak at mcb.mcgill.ca (Greg Finak)
Date: Tue, 4 Oct 2005 13:36:25 -0400
Subject: [Rd] vector labels are not permuted properly in a call to sort() (R
	2.1)
Message-ID: <78B3C176-3297-47CB-8907-37BDFAE3D08F@mcb.mcgill.ca>

Not sure if this is the correct forum for this, but I've found what I  
would consider to be a potentially serious bug to the unsuspecting user.
Given a numeric vector V with class labels in R,  the following calls

1.
 > sort(as.matrix(V))

and

2.
 >as.matrix(sort(V))

produce different ouput. The vector is sorted properly in both cases,  
but only 2. produces the correct labeling of the vector. The call to  
1. produces a vector with incorrect labels (not sorted).

Code:
 >X<-c("A","B","C","D","E","F","G","H")
 >Y<-rev(1:8)
 >names(Y)<-X
 > Y
A B C D E F G H
8 7 6 5 4 3 2 1
 > sort(as.matrix(Y))
   [,1]
A    1
B    2
C    3
D    4
E    5
F    6
G    7
H    8
 > as.matrix(sort(Y))
   [,1]
H    1
G    2
F    3
E    4
D    5
C    6
B    7
A    8

Cheers,


From andy_liaw at merck.com  Tue Oct  4 19:51:11 2005
From: andy_liaw at merck.com (Liaw, Andy)
Date: Tue, 4 Oct 2005 13:51:11 -0400
Subject: [Rd] vector labels are not permuted properly in a call to
 sort() (R 2.1)
Message-ID: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED4C6@usctmx1106.merck.com>

The `problem' is that sort() does not doing anything special when given
a matrix: it only treat it as a vector.  After sorting, it copies
attributes of the original input to the output.  Since dimnames are
attributes, they get copied as is.

Try:

> y <- matrix(8:1, 4, 2, dimnames=list(LETTERS[1:4], NULL))
> y
  [,1] [,2]
A    8    4
B    7    3
C    6    2
D    5    1
> sort(y)
  [,1] [,2]
A    1    5
B    2    6
C    3    7
D    4    8

Notice the row names stay the same.  I'd argue that this is the correct
behavior.

Andy


> From: Greg Finak
> 
> Not sure if this is the correct forum for this, but I've 
> found what I  
> would consider to be a potentially serious bug to the 
> unsuspecting user.
> Given a numeric vector V with class labels in R,  the following calls
> 
> 1.
>  > sort(as.matrix(V))
> 
> and
> 
> 2.
>  >as.matrix(sort(V))
> 
> produce different ouput. The vector is sorted properly in 
> both cases,  
> but only 2. produces the correct labeling of the vector. The call to  
> 1. produces a vector with incorrect labels (not sorted).
> 
> Code:
>  >X<-c("A","B","C","D","E","F","G","H")
>  >Y<-rev(1:8)
>  >names(Y)<-X
>  > Y
> A B C D E F G H
> 8 7 6 5 4 3 2 1
>  > sort(as.matrix(Y))
>    [,1]
> A    1
> B    2
> C    3
> D    4
> E    5
> F    6
> G    7
> H    8
>  > as.matrix(sort(Y))
>    [,1]
> H    1
> G    2
> F    3
> E    4
> D    5
> C    6
> B    7
> A    8
> 
> Cheers,
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>


From deepayan at stat.wisc.edu  Tue Oct  4 20:47:29 2005
From: deepayan at stat.wisc.edu (Deepayan Sarkar)
Date: Tue, 4 Oct 2005 13:47:29 -0500
Subject: [Rd] more problems when using "installWithVers"
In-Reply-To: <Pine.LNX.4.61.0510041334350.3776@gannet.stats>
References: <1abe3fa90510040450s124226a5oae8361f723002e8d@mail.gmail.com>
	<Pine.LNX.4.61.0510041334350.3776@gannet.stats>
Message-ID: <200510041347.29859.deepayan@stat.wisc.edu>

On Tuesday 04 October 2005 07:48, Prof Brian Ripley wrote:
> Tony,
>
> The problem is specific to your example:
> > install.packages("ash")
>
> ...
>
> > install.packages("ash", installWithVers=TRUE)
> > library("ash", version="1.0-9")
> > search()
>
>   [1] ".GlobalEnv"        "package:ash_1.0-9" "package:methods"
>   [4] "package:stats"     "package:graphics"  "package:grDevices"
>   [7] "package:utils"     "package:datasets"  "Autoloads"
> [10] "package:base"
>
> and lies in lattice's .onLoad (as the message says, and hence the Cc: to
> Deepayan).  That has
>
> .onLoad <- function(lib, pkg)
> {
>      library.dynam(pkg, pkg, lib )
>      lattice.options(.defaultLatticeOptions())
>      lattice.setStatus(.defaultLatticeStatus())
> }
>
> which is incorrect: it should be library.dynam("lattice", pkg, lib)
> OTOH, 'ash' has it correctly and so works.

I'll upload a fixed version. There was a related discussion a while back about 
having a PACKAGE= argument in .Call()'s, but I don't remember the details. 
What's the current recommendation?

Deepayan


From ripley at stats.ox.ac.uk  Tue Oct  4 20:52:40 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 4 Oct 2005 19:52:40 +0100 (BST)
Subject: [Rd] more problems when using "installWithVers"
In-Reply-To: <200510041347.29859.deepayan@stat.wisc.edu>
References: <1abe3fa90510040450s124226a5oae8361f723002e8d@mail.gmail.com>
	<Pine.LNX.4.61.0510041334350.3776@gannet.stats>
	<200510041347.29859.deepayan@stat.wisc.edu>
Message-ID: <Pine.LNX.4.61.0510041945580.12433@gannet.stats>

On Tue, 4 Oct 2005, Deepayan Sarkar wrote:

> On Tuesday 04 October 2005 07:48, Prof Brian Ripley wrote:
>> Tony,
>>
>> The problem is specific to your example:
>>> install.packages("ash")
>>
>> ...
>>
>>> install.packages("ash", installWithVers=TRUE)
>>> library("ash", version="1.0-9")
>>> search()
>>
>>   [1] ".GlobalEnv"        "package:ash_1.0-9" "package:methods"
>>   [4] "package:stats"     "package:graphics"  "package:grDevices"
>>   [7] "package:utils"     "package:datasets"  "Autoloads"
>> [10] "package:base"
>>
>> and lies in lattice's .onLoad (as the message says, and hence the Cc: to
>> Deepayan).  That has
>>
>> .onLoad <- function(lib, pkg)
>> {
>>      library.dynam(pkg, pkg, lib )
>>      lattice.options(.defaultLatticeOptions())
>>      lattice.setStatus(.defaultLatticeStatus())
>> }
>>
>> which is incorrect: it should be library.dynam("lattice", pkg, lib)
>> OTOH, 'ash' has it correctly and so works.
>
> I'll upload a fixed version. There was a related discussion a while back about
> having a PACKAGE= argument in .Call()'s, but I don't remember the details.
> What's the current recommendation?

I would recommend that you do.  I think in your case you could also use 
useDynlib in the NAMESPACE file (since it is called before .onLoad), and 
only then is it reasonably safe to omit PACKAGE=.  The issue is about if 
you can load two versions simultaneously, and I don't see that as very 
safe with lattice (since it is tied to a grid version).

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From blindglobe at gmail.com  Tue Oct  4 21:07:34 2005
From: blindglobe at gmail.com (A.J. Rossini)
Date: Tue, 4 Oct 2005 21:07:34 +0200
Subject: [Rd] Option "installWithVers" seems to impact new.packages()
	badly?
In-Reply-To: <x2hdbxuywp.fsf@viggo.kubism.ku.dk>
References: <1abe3fa90509300151i641e4408y9e74f728fe681785@mail.gmail.com>
	<Pine.LNX.4.61.0510041406460.5316@gannet.stats>
	<1abe3fa90510040630s46652b00seeecf1a430717fc3@mail.gmail.com>
	<1abe3fa90510040632k405f9e42yf29b926172cafee6@mail.gmail.com>
	<x2hdbxuywp.fsf@viggo.kubism.ku.dk>
Message-ID: <1abe3fa90510041207n48416741ke546c44596837b8b@mail.gmail.com>

On 04 Oct 2005 16:42:14 +0200, Peter Dalgaard <p.dalgaard at biostat.ku.dk> wrote:

>
> > > > The issue is that installed.packages() has never been taught about
> > > > versioned installs, and you might like to take that up with your BioC
> > > > colleagues who added the idea.
> >
> "A.J. Rossini" <blindglobe at gmail.com> writes:
> > Also, I don't know what this has to do with BioC.  This is core R, so
> > pertinent to this list.  Otherwise, perhaps it should be taken out?
>
> Brian can of course speak for himself, but I think his point was just
> that the request for the feature came from BioC, not that the
> discussion was on the wrong list.

But what the heck did that have to do with anything?   Should I be
making comments to  Brian about Peter Donnelly or Jotun Hein if I've
got comments about their work just because he's at Oxford?

Irrelevant network connections are irrelevant, and the comment about
BioC made no sense whatsoever to me.

best,
-tony

blindglobe at gmail.com
Muttenz, Switzerland.
"Commit early,commit often, and commit in a repository from which we can easily
roll-back your mistakes" (AJR, 4Jan05).


From ripley at stats.ox.ac.uk  Tue Oct  4 21:24:26 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 4 Oct 2005 20:24:26 +0100 (BST)
Subject: [Rd] Option "installWithVers" seems to impact new.packages()
 badly?
In-Reply-To: <1abe3fa90510041207n48416741ke546c44596837b8b@mail.gmail.com>
References: <1abe3fa90509300151i641e4408y9e74f728fe681785@mail.gmail.com> 
	<Pine.LNX.4.61.0510041406460.5316@gannet.stats> 
	<1abe3fa90510040630s46652b00seeecf1a430717fc3@mail.gmail.com> 
	<1abe3fa90510040632k405f9e42yf29b926172cafee6@mail.gmail.com> 
	<x2hdbxuywp.fsf@viggo.kubism.ku.dk>
	<1abe3fa90510041207n48416741ke546c44596837b8b@mail.gmail.com>
Message-ID: <Pine.LNX.4.61.0510042008380.12433@gannet.stats>

Please don't mangle replies like this to make them unreadable.

Peter's comment is spot-on.  The request for versioned installs and the 
original code came from the BioC team via Robert Gentleman.  I presume it 
was a deliberate choice that a versioned install of 'ash' is reported as 
an installation of 'ash_1.0-9', not 'ash', and I was referring you to the 
authors (and RG was one and will know who else was involved, as I recall 
at least Jeff Gentry) as to their intentions.


On Tue, 4 Oct 2005, A.J. Rossini wrote:

> On 04 Oct 2005 16:42:14 +0200, Peter Dalgaard <p.dalgaard at biostat.ku.dk> wrote:
>>>>>> The issue is that installed.packages() has never been taught about> > > > versioned installs, and you might like to take that up with your BioC> > > > colleagues who added the idea.> >> "A.J. Rossini" <blindglobe at gmail.com> writes:> > Also, I don't know what this has to do with BioC.  This is core R, so> > pertinent to this list.  Otherwise, perhaps it should be taken out?>> Brian can of course speak for himself, but I think his point was just> that the request for the feature came from BioC, not that the> discussion was on the wrong list.
> But what the heck did that have to do with anything?   Should I bemaking comments to  Brian about Peter Donnelly or Jotun Hein if I'vegot comments about their work just because he's at Oxford?
> Irrelevant network connections are irrelevant, and the comment aboutBioC made no sense whatsoever to me.
> best,-tony
> blindglobe at gmail.comMuttenz, Switzerland."Commit early,commit often, and commit in a repository from which we can easilyroll-back your mistakes" (AJR, 4Jan05).
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From blindglobe at gmail.com  Tue Oct  4 21:45:57 2005
From: blindglobe at gmail.com (A.J. Rossini)
Date: Tue, 4 Oct 2005 21:45:57 +0200
Subject: [Rd] Option "installWithVers" seems to impact new.packages()
	badly?
In-Reply-To: <Pine.LNX.4.61.0510042008380.12433@gannet.stats>
References: <1abe3fa90509300151i641e4408y9e74f728fe681785@mail.gmail.com>
	<Pine.LNX.4.61.0510041406460.5316@gannet.stats>
	<1abe3fa90510040630s46652b00seeecf1a430717fc3@mail.gmail.com>
	<1abe3fa90510040632k405f9e42yf29b926172cafee6@mail.gmail.com>
	<x2hdbxuywp.fsf@viggo.kubism.ku.dk>
	<1abe3fa90510041207n48416741ke546c44596837b8b@mail.gmail.com>
	<Pine.LNX.4.61.0510042008380.12433@gannet.stats>
Message-ID: <1abe3fa90510041245o784661a4h2d63437128d1e563@mail.gmail.com>

Please grow up, Brian.   If you want to side track the issue, why
don't you wait for Robert, etc, to answer?  Are you pissed at that
particular change, so that if anyone brings up a problem with it, and
who might happen to have had a conversation with them once or twice, 
that you will jump on them?  Or do you need to enlighten me on your
perceptions of my failings on my part for not knowing what everyone I
know is doing and whether what they are doing is correct?  Gosh
almightly.

Right now, as has been true for nearly a year now, my time with R is
strictly a hobby, as is any little time I might spend on BioC.

Thankfully, Luke's ancient Common LispStat works on SBCL.  Hobbys are
for enjoyment, and given the berating I've just gotten on the two
questions, it's almost enough to make the switch complete.

If you want to report issues about ash, feel free to.  That wasn't the
issue I reported on.  I reported on two, we've solved one, and I've
had a snide clueless remark and a rather tactless remark on the other.

best,
-tony



On 10/4/05, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> Please don't mangle replies like this to make them unreadable.
>
> Peter's comment is spot-on.  The request for versioned installs and the
> original code came from the BioC team via Robert Gentleman.  I presume it
> was a deliberate choice that a versioned install of 'ash' is reported as
> an installation of 'ash_1.0-9', not 'ash', and I was referring you to the
> authors (and RG was one and will know who else was involved, as I recall
> at least Jeff Gentry) as to their intentions.
>
>
> On Tue, 4 Oct 2005, A.J. Rossini wrote:
>
> > On 04 Oct 2005 16:42:14 +0200, Peter Dalgaard <p.dalgaard at biostat.ku.dk> wrote:
> >>>>>> The issue is that installed.packages() has never been taught about> > > > versioned installs, and you might like to take that up with your BioC> > > > colleagues who added the idea.> >> "A.J. Rossini" <blindglobe at gmail.com> writes:> > Also, I don't know what this has to do with BioC.  This is core R, so> > pertinent to this list.  Otherwise, perhaps it should be taken out?>> Brian can of course speak for himself, but I think his point was just> that the request for the feature came from BioC, not that the> discussion was on the wrong list.
> > But what the heck did that have to do with anything?   Should I bemaking comments to  Brian about Peter Donnelly or Jotun Hein if I'vegot comments about their work just because he's at Oxford?
> > Irrelevant network connections are irrelevant, and the comment aboutBioC made no sense whatsoever to me.
> > best,-tony
> > blindglobe at gmail.comMuttenz, Switzerland."Commit early,commit often, and commit in a repository from which we can easilyroll-back your mistakes" (AJR, 4Jan05).
> >
> >
>
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>


--
best,
-tony

blindglobe at gmail.com
Muttenz, Switzerland.
"Commit early,commit often, and commit in a repository from which we can easily
roll-back your mistakes" (AJR, 4Jan05).


From vasu.akkineni at gmail.com  Wed Oct  5 02:53:52 2005
From: vasu.akkineni at gmail.com (Vasundhara Akkineni)
Date: Tue, 4 Oct 2005 20:53:52 -0400
Subject: [Rd] R and Java
Message-ID: <3b67376c0510041753g1ec0f3c7jef9ce735731e5d81@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051004/ac5dec5a/attachment.pl

From maechler at stat.math.ethz.ch  Wed Oct  5 09:46:01 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Wed, 5 Oct 2005 09:46:01 +0200
Subject: [Rd] vector labels are not permuted properly in a call to
 sort() (R 2.1)
In-Reply-To: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED4C6@usctmx1106.merck.com>
References: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED4C6@usctmx1106.merck.com>
Message-ID: <17219.33977.703689.753165@stat.math.ethz.ch>

>>>>> "AndyL" == Liaw, Andy <andy_liaw at merck.com>
>>>>>     on Tue, 4 Oct 2005 13:51:11 -0400 writes:

    AndyL> The `problem' is that sort() does not doing anything special when given
    AndyL> a matrix: it only treat it as a vector.  After sorting, it copies
    AndyL> attributes of the original input to the output.  Since dimnames are
    AndyL> attributes, they get copied as is.

exactly. Thanks Andy.

And I think users would want this (copying of attributes) in
many cases; in particular for user-created attributes

?sort  really talks about sorting of vectors and factors;
       and it doesn't mention attributes explicitly at all
       {which should probably be improved}.

One could wonder if R should keep the dim & dimnames
attributes for arrays and matrices.  
S-plus (6.2) simply drops them {returning a bare unnames vector}
and that seems pretty reasonable to me.

At least the user would never make the wrong assumptions that
Greg made about ``matrix sorting''.


    AndyL> Try:

    >> y <- matrix(8:1, 4, 2, dimnames=list(LETTERS[1:4], NULL))
    >> y
    AndyL> [,1] [,2]
    AndyL> A    8    4
    AndyL> B    7    3
    AndyL> C    6    2
    AndyL> D    5    1
    >> sort(y)
    AndyL> [,1] [,2]
    AndyL> A    1    5
    AndyL> B    2    6
    AndyL> C    3    7
    AndyL> D    4    8

    AndyL> Notice the row names stay the same.  I'd argue that this is the correct
    AndyL> behavior.

    AndyL> Andy


    >> From: Greg Finak
    >> 
    >> Not sure if this is the correct forum for this, 

yes, R-devel is the proper forum.
{also since this is really a proposal for a change in R ...}

    >> but I've found what I  
    >> would consider to be a potentially serious bug to the 
    >> unsuspecting user.
    >> Given a numeric vector V with class labels in R,  the following calls
    >> 
    >> 1.
    >> > sort(as.matrix(V))
    >> 
    >> and
    >> 
    >> 2.
    >> >as.matrix(sort(V))
    >> 
    >> produce different ouput. The vector is sorted properly in 
    >> both cases,  
    >> but only 2. produces the correct labeling of the vector. The call to  
    >> 1. produces a vector with incorrect labels (not sorted).
    >> 
    >> Code:
    >> >X<-c("A","B","C","D","E","F","G","H")
    >> >Y<-rev(1:8)
    >> >names(Y)<-X
    >> > Y
    >> A B C D E F G H
    >> 8 7 6 5 4 3 2 1
    >> > sort(as.matrix(Y))
    >> [,1]
    >> A    1
    >> B    2
    >> C    3
    >> D    4
    >> E    5
    >> F    6
    >> G    7
    >> H    8
    >> > as.matrix(sort(Y))
    >> [,1]
    >> H    1
    >> G    2
    >> F    3
    >> E    4
    >> D    5
    >> C    6
    >> B    7
    >> A    8
    >>


From hallgeir.grinde at elkem.no  Wed Oct  5 13:13:11 2005
From: hallgeir.grinde at elkem.no (hallgeir.grinde@elkem.no)
Date: Wed,  5 Oct 2005 13:13:11 +0200 (CEST)
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
Message-ID: <20051005111311.018711DD7C@slim.kubism.ku.dk>

Full_Name: Hallgeir Grinde
Version: 2.1.1
OS: Windows XP
Submission from: (NULL) (144.127.1.1)


While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the numbers of variables
are at least 8.


From knoblauch at lyon.inserm.fr  Wed Oct  5 17:17:39 2005
From: knoblauch at lyon.inserm.fr (Ken Knoblauch)
Date: Wed, 5 Oct 2005 13:17:39 -0200 (CEST)
Subject: [Rd]  R crashes for large formulas in lm() (PR#8180)
Message-ID: <50191.194.57.165.22.1128511059.squirrel@webmail.lyon.inserm.fr>

Have you considered that 8 variables will give you
sum(choose(8,1:8))
[1] 255
terms.
That's a suspicious number.  Have you checked whether there is a limit in
the code?

-------------------------
Full_Name: Hallgeir Grinde
Version: 2.1.1
OS: Windows XP
Submission from: (NULL) (144.127.1.1)


While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the numbers of
variables
are at least 8.


-- 
Ken Knoblauch
Inserm U371
Cerveau et Vision
Dept. of Cognitive Neuroscience
18 avenue du Doyen L?pine
69500 Bron
France
tel: +33 (0)4 72 91 34 77
fax: +33 (0)4 72 91 34 61
portable: +33 (0)6 84 10 64 10
http://www.lyon.inserm.fr/371/


From knoblauch at lyon.inserm.fr  Wed Oct  5 17:21:21 2005
From: knoblauch at lyon.inserm.fr (Ken Knoblauch)
Date: Wed, 5 Oct 2005 13:21:21 -0200 (CEST)
Subject: [Rd]  R crashes for large formulas in lm() (PR#8180)
Message-ID: <50214.194.57.165.22.1128511281.squirrel@webmail.lyon.inserm.fr>

Oops, sorry.  I didn't notice the ^2...
Nevermind.


________________
Have you considered that 8 variables will give you
sum(choose(8,1:8))
[1] 255
terms.
That's a suspicious number.  Have you checked whether there is a limit in
the code?

-------------------------
Full_Name: Hallgeir Grinde
Version: 2.1.1
OS: Windows XP
Submission from: (NULL) (144.127.1.1)


While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the numbers of
variables
are at least 8.
-- 
Ken Knoblauch
Inserm U371
Cerveau et Vision
Dept. of Cognitive Neuroscience
18 avenue du Doyen L?pine
69500 Bron
France
tel: +33 (0)4 72 91 34 77
fax: +33 (0)4 72 91 34 61
portable: +33 (0)6 84 10 64 10
http://www.lyon.inserm.fr/371/


From ripley at stats.ox.ac.uk  Wed Oct  5 14:02:12 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 5 Oct 2005 13:02:12 +0100 (BST)
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
In-Reply-To: <20051005111311.018711DD7C@slim.kubism.ku.dk>
References: <20051005111311.018711DD7C@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.61.0510051256110.24974@gannet.stats>

On Wed, 5 Oct 2005 hallgeir.grinde at elkem.no wrote:

> Full_Name: Hallgeir Grinde
> Version: 2.1.1
> OS: Windows XP
> Submission from: (NULL) (144.127.1.1)
>
>
> While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the numbers of variables
> are at least 8.

OK, let's try to reproduce that:

> x1 <- runif(1000)
> x2 <- runif(1000)
> x3 <- runif(1000)
> x4 <- runif(1000)
> x5 <- runif(1000)
> x6 <- runif(1000)
> x7 <- runif(1000)
> x8 <- runif(1000)
> y <- rnorm(1000)
> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)

No crash, a quite reasonable fit.

Can we please have a reproducible example, as we do ask?

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From p.dalgaard at biostat.ku.dk  Wed Oct  5 14:01:50 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 05 Oct 2005 14:01:50 +0200
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
In-Reply-To: <50214.194.57.165.22.1128511281.squirrel@webmail.lyon.inserm.fr>
References: <50214.194.57.165.22.1128511281.squirrel@webmail.lyon.inserm.fr>
Message-ID: <x27jcsnpe9.fsf@viggo.kubism.ku.dk>

"Ken Knoblauch" <knoblauch at lyon.inserm.fr> writes:

> Oops, sorry.  I didn't notice the ^2...
> Nevermind.

You could still have a point, but with 255^2 terms (all but 255 of
which will be redundant since x^2 == x:x == x in modeling language).
Presumably someone thought that noone in their right mind would
specify 65000 terms...


> ________________
> Have you considered that 8 variables will give you
> sum(choose(8,1:8))
> [1] 255
> terms.
> That's a suspicious number.  Have you checked whether there is a limit in
> the code?
> 
> -------------------------
> Full_Name: Hallgeir Grinde
> Version: 2.1.1
> OS: Windows XP
> Submission from: (NULL) (144.127.1.1)
> 
> 
> While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the numbers of
> variables
> are at least 8.
> -- 
> Ken Knoblauch
> Inserm U371
> Cerveau et Vision
> Dept. of Cognitive Neuroscience
> 18 avenue du Doyen L?pine
> 69500 Bron
> France
> tel: +33 (0)4 72 91 34 77
> fax: +33 (0)4 72 91 34 61
> portable: +33 (0)6 84 10 64 10
> http://www.lyon.inserm.fr/371/
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From jourdren at gmail.com  Wed Oct  5 14:08:49 2005
From: jourdren at gmail.com (Laurent Jourdren)
Date: Wed, 5 Oct 2005 14:08:49 +0200
Subject: [Rd] Fwd:  R and Java
In-Reply-To: <73dae3060510050448x3aaad2dfi8bf324cf00495597@mail.gmail.com>
References: <3b67376c0510041753g1ec0f3c7jef9ce735731e5d81@mail.gmail.com>
	<73dae3060510050448x3aaad2dfi8bf324cf00495597@mail.gmail.com>
Message-ID: <200510051408.49503.jourdren@gmail.com>

> I am a grad student and am working on a project where i need to integrate
> java and R. I have a front end in java and i need to call R functions and
> be able to dispaly the plots and graphs produced by R on my java front end.
> I came across some tools like SJava and rserve...but am not sure which best
> suits my application. Your suggestion will be really helpful.


	The only valuable choice to integrate java and R is rserve.

	With RSjava,  data don't persist between 2 two commands, so you can't set a 
variable in R from java in one instruction and re-use this data in the next 
instruction.

	Rserve is an client/server library, client is pure java (you can easily 
deploy it  on *nix and Windows) and each connection has its own object space 
in R (only under *nix).

	Laurent.


From B.Rowlingson at lancaster.ac.uk  Wed Oct  5 14:10:13 2005
From: B.Rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 05 Oct 2005 13:10:13 +0100
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
In-Reply-To: <Pine.LNX.4.61.0510051256110.24974@gannet.stats>
References: <20051005111311.018711DD7C@slim.kubism.ku.dk>
	<Pine.LNX.4.61.0510051256110.24974@gannet.stats>
Message-ID: <4343C2A5.2060102@lancaster.ac.uk>

Prof Brian Ripley wrote:

> OK, let's try to reproduce that:
> 
> 
>>x1 <- runif(1000)
...
>>y <- rnorm(1000)
>>fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
> 
> 
> No crash, a quite reasonable fit.

  Add one more:

  > x9 <- runif(1000)

  works with 8:

  > fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)

  but go 'one over the eight' and:

  > fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8*x9)^2)
  Segmentation fault


platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    2
minor    1.1
year     2005
month    06
day      20
language R

Baz


From B.Rowlingson at lancaster.ac.uk  Wed Oct  5 14:10:31 2005
From: B.Rowlingson at lancaster.ac.uk (B.Rowlingson@lancaster.ac.uk)
Date: Wed,  5 Oct 2005 14:10:31 +0200 (CEST)
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
Message-ID: <20051005121031.4D17F1DD92@slim.kubism.ku.dk>

Prof Brian Ripley wrote:

> OK, let's try to reproduce that:
> 
> 
>>x1 <- runif(1000)
...
>>y <- rnorm(1000)
>>fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
> 
> 
> No crash, a quite reasonable fit.

  Add one more:

  > x9 <- runif(1000)

  works with 8:

  > fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)

  but go 'one over the eight' and:

  > fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8*x9)^2)
  Segmentation fault


platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status
major    2
minor    1.1
year     2005
month    06
day      20
language R

Baz


From ligges at statistik.uni-dortmund.de  Wed Oct  5 14:12:10 2005
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Wed,  5 Oct 2005 14:12:10 +0200 (CEST)
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
Message-ID: <20051005121210.9ECE41DD2B@slim.kubism.ku.dk>

Prof Brian Ripley wrote:

> On Wed, 5 Oct 2005 hallgeir.grinde at elkem.no wrote:
> 
> 
>>Full_Name: Hallgeir Grinde
>>Version: 2.1.1
>>OS: Windows XP
>>Submission from: (NULL) (144.127.1.1)
>>
>>
>>While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the numbers of variables
>>are at least 8.
> 
> 
> OK, let's try to reproduce that:
> 
> 
>>x1 <- runif(1000)
>>x2 <- runif(1000)
>>x3 <- runif(1000)
>>x4 <- runif(1000)
>>x5 <- runif(1000)
>>x6 <- runif(1000)
>>x7 <- runif(1000)
>>x8 <- runif(1000)
>>y <- rnorm(1000)
>>fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
> 
> 
> No crash, a quite reasonable fit.
> 
> Can we please have a reproducible example, as we do ask?
> 

Hmm, crashes for me as well with R-2.1.1 and R-2.2.0 beta (2005-09-27 
r35682M) on WinNT 4.0, SP6.


Let's make it reproducible:

set.seed(123)
x1 <- runif(1000)
x2 <- runif(1000)
x3 <- runif(1000)
x4 <- runif(1000)
x5 <- runif(1000)
x6 <- runif(1000)
x7 <- runif(1000)
x8 <- runif(1000)
y <- rnorm(1000)
fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)


Uwe Ligges


From B.Rowlingson at lancaster.ac.uk  Wed Oct  5 14:25:27 2005
From: B.Rowlingson at lancaster.ac.uk (Barry Rowlingson)
Date: Wed, 05 Oct 2005 13:25:27 +0100
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
In-Reply-To: <20051005121210.9ECE41DD2B@slim.kubism.ku.dk>
References: <20051005121210.9ECE41DD2B@slim.kubism.ku.dk>
Message-ID: <4343C637.6040908@lancaster.ac.uk>


> set.seed(123)
> x1 <- runif(1000)
> x2 <- runif(1000)
> x3 <- runif(1000)
> x4 <- runif(1000)
> x5 <- runif(1000)
> x6 <- runif(1000)
> x7 <- runif(1000)
> x8 <- runif(1000)
> y <- rnorm(1000)
> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)

  For me (with 9 variables) this crashes in model.matrix:

  > f1=y~(x1*x2*x3*x4*x5*x6*x7*x8*x9)^2
  > model.matrix(f1)
  Segmentation fault

  I guess someone with a debug-compiled R can get a bit further...

Baz


From MSchwartz at mn.rr.com  Wed Oct  5 14:31:51 2005
From: MSchwartz at mn.rr.com (MSchwartz@mn.rr.com)
Date: Wed,  5 Oct 2005 14:31:51 +0200 (CEST)
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
Message-ID: <20051005123151.8BA4C1DD9F@slim.kubism.ku.dk>

On Wed, 2005-10-05 at 14:12 +0200, ligges at statistik.uni-dortmund.de
wrote:
> Prof Brian Ripley wrote:
> 
> > On Wed, 5 Oct 2005 hallgeir.grinde at elkem.no wrote:
> > 
> > 
> >>Full_Name: Hallgeir Grinde
> >>Version: 2.1.1
> >>OS: Windows XP
> >>Submission from: (NULL) (144.127.1.1)
> >>
> >>
> >>While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the numbers of variables
> >>are at least 8.
> > 
> > 
> > OK, let's try to reproduce that:
> > 
> > 
> >>x1 <- runif(1000)
> >>x2 <- runif(1000)
> >>x3 <- runif(1000)
> >>x4 <- runif(1000)
> >>x5 <- runif(1000)
> >>x6 <- runif(1000)
> >>x7 <- runif(1000)
> >>x8 <- runif(1000)
> >>y <- rnorm(1000)
> >>fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
> > 
> > 
> > No crash, a quite reasonable fit.
> > 
> > Can we please have a reproducible example, as we do ask?
> > 
> 
> Hmm, crashes for me as well with R-2.1.1 and R-2.2.0 beta (2005-09-27 
> r35682M) on WinNT 4.0, SP6.
> 
> 
> Let's make it reproducible:
> 
> set.seed(123)
> x1 <- runif(1000)
> x2 <- runif(1000)
> x3 <- runif(1000)
> x4 <- runif(1000)
> x5 <- runif(1000)
> x6 <- runif(1000)
> x7 <- runif(1000)
> x8 <- runif(1000)
> y <- rnorm(1000)
> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)


No problems on FC4 using Version 2.1.1 Patched (2005-10-04):

> summary(fit)

Call:
lm(formula = y ~ (x1 * x2 * x3 * x4 * x5 * x6 * x7 * x8)^2)

Residuals:
      Min        1Q    Median        3Q       Max
-3.315028 -0.532338  0.005368  0.548012  2.957057

Coefficients:
                          Estimate Std. Error t value Pr(>|t|)
(Intercept)                16.2460    15.7375   1.032   0.3023
x1                        -10.0310    29.7557  -0.337   0.7361
x2                        -26.2678    24.0473  -1.092   0.2750
x3                        -42.5713    32.9481  -1.292   0.1967

...

x1:x2:x4:x5:x6:x7:x8     -339.8099  1024.8652  -0.332   0.7403
x1:x3:x4:x5:x6:x7:x8     -833.5375  1095.1153  -0.761   0.4468
x2:x3:x4:x5:x6:x7:x8     -546.0684  1050.8648  -0.520   0.6035
x1:x2:x3:x4:x5:x6:x7:x8   533.8390  1861.5862   0.287   0.7744
---
Signif. codes:  0 ???***??? 0.001 ???**??? 0.01 ???*??? 0.05 ???.??? 0.1 ??? ??? 1

Residual standard error: 1.001 on 744 degrees of freedom
Multiple R-Squared: 0.2541,     Adjusted R-squared: -0.001499
F-statistic: 0.9941 on 255 and 744 DF,  p-value: 0.5161


Is this perhaps a RAM issue? I have 2 Gb.

Marc


From Hallgeir.Grinde at elkem.no  Wed Oct  5 14:31:17 2005
From: Hallgeir.Grinde at elkem.no (Hallgeir.Grinde@elkem.no)
Date: Wed, 5 Oct 2005 12:31:17 +0000
Subject: [Rd] Ad: Re:  R crashes for large formulas in lm() (PR#8180)
In-Reply-To: <Pine.LNX.4.61.0510051256110.24974@gannet.stats>
Message-ID: <OF172257B0.AACD1FA4-ONC1257091.004468BF-00257091.0044C7E9@elkem.no>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051005/1b5dde28/attachment.pl

From MSchwartz at mn.rr.com  Wed Oct  5 14:35:50 2005
From: MSchwartz at mn.rr.com (Marc Schwartz)
Date: Wed, 05 Oct 2005 07:35:50 -0500
Subject: [Rd] Fwd:  R and Java
In-Reply-To: <200510051408.49503.jourdren@gmail.com>
References: <3b67376c0510041753g1ec0f3c7jef9ce735731e5d81@mail.gmail.com>
	<73dae3060510050448x3aaad2dfi8bf324cf00495597@mail.gmail.com>
	<200510051408.49503.jourdren@gmail.com>
Message-ID: <1128515751.5576.14.camel@localhost.localdomain>

On Wed, 2005-10-05 at 14:08 +0200, Laurent Jourdren wrote:
> > I am a grad student and am working on a project where i need to integrate
> > java and R. I have a front end in java and i need to call R functions and
> > be able to dispaly the plots and graphs produced by R on my java front end.
> > I came across some tools like SJava and rserve...but am not sure which best
> > suits my application. Your suggestion will be really helpful.
> 
> 
> 	The only valuable choice to integrate java and R is rserve.
> 
> 	With RSjava,  data don't persist between 2 two commands, so you can't set a 
> variable in R from java in one instruction and re-use this data in the next 
> instruction.
> 
> 	Rserve is an client/server library, client is pure java (you can easily 
> deploy it  on *nix and Windows) and each connection has its own object space 
> in R (only under *nix).
> 
> 	Laurent.


You might also want to look at JGR (a Java GUI for R) to see how they
have done things:

  http://stats.math.uni-augsburg.de/JGR/

HTH,

Marc Schwartz


From ripley at stats.ox.ac.uk  Wed Oct  5 14:38:12 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 5 Oct 2005 13:38:12 +0100 (BST)
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
In-Reply-To: <4343C2A5.2060102@lancaster.ac.uk>
References: <20051005111311.018711DD7C@slim.kubism.ku.dk>
	<Pine.LNX.4.61.0510051256110.24974@gannet.stats>
	<4343C2A5.2060102@lancaster.ac.uk>
Message-ID: <Pine.LNX.4.61.0510051327310.25562@gannet.stats>

This is almost certainly C stack overflow, which will be _very_ 
OS-specific. I can run this 9-var example in Linux with a stacksize of 
30Mb, but not the default 10Mb. I tried it with the default stack under 
valgrind, and it works.

Windows versions of R have I believe a stack of 8Mb, and so I suspect are 
running close to that with 8-var example.

The problem appears to be recursion in StripTerm.


On Wed, 5 Oct 2005, Barry Rowlingson wrote:

> Prof Brian Ripley wrote:
>
>> OK, let's try to reproduce that:
>> 
>> 
>>> x1 <- runif(1000)
> ...
>>> y <- rnorm(1000)
>>> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
>> 
>> 
>> No crash, a quite reasonable fit.
>
> Add one more:
>
> > x9 <- runif(1000)
>
> works with 8:
>
> > fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
>
> but go 'one over the eight' and:
>
> > fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8*x9)^2)
> Segmentation fault
>
>
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    2
> minor    1.1
> year     2005
> month    06
> day      20
> language R
>
> Baz
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Hallgeir.Grinde at elkem.no  Wed Oct  5 14:45:42 2005
From: Hallgeir.Grinde at elkem.no (Hallgeir.Grinde@elkem.no)
Date: Wed,  5 Oct 2005 14:45:42 +0200 (CEST)
Subject: [Rd] Ad: Re:  R crashes for large formulas in lm() (PR#8180)
Message-ID: <20051005124542.46EA21DD81@slim.kubism.ku.dk>

Dette er en melding med flere deler i MIME-format.
--=_alternative 004613C000257091_=
Content-Type: text/plain; charset="US-ASCII"

And some more informastion I forgot.
R does not crash if I write out the formula:

set.seed(123)
x1 <- runif(1000)
x2 <- runif(1000)
x3 <- runif(1000)
x4 <- runif(1000)
x5 <- runif(1000)
x6 <- runif(1000)
x7 <- runif(1000)
x8 <- runif(1000)
y <- rnorm(1000)
fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
-> R crashes

fit <- lm(y~x1+x2+x3+x4+x5+x6+x7+x8
                +x1:x2+x1:x3+x1:x4+x1:x5+x1:x6+x1:x7+x1:x8
                +x2:x3++x2:x4+x2:x5+x2:x6+x2:x7+x2:x8
                +x3:x4+x3:x5+x3:x6+x3:x7+x3:x8
                +x4:x5+x4:x6+x4:x7+x4:x8
                +x5:x6+x5:x7+x5:x8
                +x6:x7+x6:x8
                +x7:x8)
-> R does not crash
This is the same formula, at least it should be.





Uwe Ligges <ligges at statistik.uni-dortmund.de>
05.10.2005 12:13
 
        Til:    Prof Brian Ripley <ripley at stats.ox.ac.uk>
        cc:     hallgeir.grinde at elkem.no, R-bugs at biostat.ku.dk
        Emne:   Re: [Rd] R crashes for large formulas in lm() (PR#8180)


Prof Brian Ripley wrote:

> On Wed, 5 Oct 2005 hallgeir.grinde at elkem.no wrote:
> 
> 
>>Full_Name: Hallgeir Grinde
>>Version: 2.1.1
>>OS: Windows XP
>>Submission from: (NULL) (144.127.1.1)
>>
>>
>>While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the numbers of 
variables
>>are at least 8.
> 
> 
> OK, let's try to reproduce that:
> 
> 
>>x1 <- runif(1000)
>>x2 <- runif(1000)
>>x3 <- runif(1000)
>>x4 <- runif(1000)
>>x5 <- runif(1000)
>>x6 <- runif(1000)
>>x7 <- runif(1000)
>>x8 <- runif(1000)
>>y <- rnorm(1000)
>>fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
> 
> 
> No crash, a quite reasonable fit.
> 
> Can we please have a reproducible example, as we do ask?
> 

Hmm, crashes for me as well with R-2.1.1 and R-2.2.0 beta (2005-09-27 
r35682M) on WinNT 4.0, SP6.


Let's make it reproducible:

set.seed(123)
x1 <- runif(1000)
x2 <- runif(1000)
x3 <- runif(1000)
x4 <- runif(1000)
x5 <- runif(1000)
x6 <- runif(1000)
x7 <- runif(1000)
x8 <- runif(1000)
y <- rnorm(1000)
fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)


Uwe Ligges



                                NOTICE
               Please immediately e-mail back to sender 
               if you are not the intended recipient. 

               Thereafter delete the e-mail along with 
               any attachments without making copies. 

               Elkem reserves all rights of privilege, 
               confidentiality and copyright.


--=_alternative 004613C000257091_=
Content-Type: text/html; charset="US-ASCII"


<br><font size=2 face="sans-serif">And some more informastion I forgot.</font>
<br><font size=2 face="sans-serif">R does not crash if I write out the
formula:</font>
<br>
<br><font size=2><tt>set.seed(123)<br>
x1 &lt;- runif(1000)<br>
x2 &lt;- runif(1000)<br>
x3 &lt;- runif(1000)<br>
x4 &lt;- runif(1000)<br>
x5 &lt;- runif(1000)<br>
x6 &lt;- runif(1000)<br>
x7 &lt;- runif(1000)<br>
x8 &lt;- runif(1000)<br>
y &lt;- rnorm(1000)<br>
fit &lt;- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)</tt></font>
<br><font size=2><tt>-&gt; R crashes</tt></font>
<br>
<br><font size=2><tt>fit &lt;- lm(y~x1+x2+x3+x4+x5+x6+x7+x8</tt></font>
<br><font size=2><tt>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; +x1:x2+x1:x3+x1:x4+x1:x5+x1:x6+x1:x7+x1:x8</tt></font>
<br><font size=2><tt>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; +x2:x3++x2:x4+x2:x5+x2:x6+x2:x7+x2:x8</tt></font>
<br><font size=2><tt>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; +x3:x4+x3:x5+x3:x6+x3:x7+x3:x8</tt></font>
<br><font size=2><tt>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; +x4:x5+x4:x6+x4:x7+x4:x8</tt></font>
<br><font size=2><tt>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; +x5:x6+x5:x7+x5:x8</tt></font>
<br><font size=2><tt>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; +x6:x7+x6:x8</tt></font>
<br><font size=2><tt>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; +x7:x8)</tt></font>
<br><font size=2><tt>-&gt; R does not crash</tt></font>
<br><font size=2><tt>This is the same formula, at least it should be.</tt></font>
<br>
<br>
<br>
<br>
<table width=100%>
<tr valign=top>
<td>
<td><font size=1 face="sans-serif"><b>Uwe Ligges &lt;ligges at statistik.uni-dortmund.de&gt;</b></font>
<p><font size=1 face="sans-serif">05.10.2005 12:13</font>
<td><font size=1 face="Arial">&nbsp; &nbsp; &nbsp; &nbsp; </font>
<br><font size=1 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; Til:
&nbsp; &nbsp; &nbsp; &nbsp;Prof Brian Ripley &lt;ripley at stats.ox.ac.uk&gt;</font>
<br><font size=1 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; cc:
&nbsp; &nbsp; &nbsp; &nbsp;hallgeir.grinde at elkem.no, R-bugs at biostat.ku.dk</font>
<br><font size=1 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; Emne:
&nbsp; &nbsp; &nbsp; &nbsp;Re: [Rd] R crashes for large formulas
in lm() (PR#8180)</font></table>
<br>
<br>
<br><font size=2><tt>Prof Brian Ripley wrote:<br>
<br>
&gt; On Wed, 5 Oct 2005 hallgeir.grinde at elkem.no wrote:<br>
&gt; <br>
&gt; <br>
&gt;&gt;Full_Name: Hallgeir Grinde<br>
&gt;&gt;Version: 2.1.1<br>
&gt;&gt;OS: Windows XP<br>
&gt;&gt;Submission from: (NULL) (144.127.1.1)<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the numbers
of variables<br>
&gt;&gt;are at least 8.<br>
&gt; <br>
&gt; <br>
&gt; OK, let's try to reproduce that:<br>
&gt; <br>
&gt; <br>
&gt;&gt;x1 &lt;- runif(1000)<br>
&gt;&gt;x2 &lt;- runif(1000)<br>
&gt;&gt;x3 &lt;- runif(1000)<br>
&gt;&gt;x4 &lt;- runif(1000)<br>
&gt;&gt;x5 &lt;- runif(1000)<br>
&gt;&gt;x6 &lt;- runif(1000)<br>
&gt;&gt;x7 &lt;- runif(1000)<br>
&gt;&gt;x8 &lt;- runif(1000)<br>
&gt;&gt;y &lt;- rnorm(1000)<br>
&gt;&gt;fit &lt;- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)<br>
&gt; <br>
&gt; <br>
&gt; No crash, a quite reasonable fit.<br>
&gt; <br>
&gt; Can we please have a reproducible example, as we do ask?<br>
&gt; <br>
<br>
Hmm, crashes for me as well with R-2.1.1 and R-2.2.0 beta (2005-09-27 <br>
r35682M) on WinNT 4.0, SP6.<br>
<br>
<br>
Let's make it reproducible:<br>
<br>
set.seed(123)<br>
x1 &lt;- runif(1000)<br>
x2 &lt;- runif(1000)<br>
x3 &lt;- runif(1000)<br>
x4 &lt;- runif(1000)<br>
x5 &lt;- runif(1000)<br>
x6 &lt;- runif(1000)<br>
x7 &lt;- runif(1000)<br>
x8 &lt;- runif(1000)<br>
y &lt;- rnorm(1000)<br>
fit &lt;- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)<br>
<br>
<br>
Uwe Ligges<br>
</tt></font>
<br><FONT SIZE=3><BR>
<BR>
                                NOTICE<BR>
               Please immediately e-mail back to sender <BR>
               if you are not the intended recipient. <BR>
<BR>
               Thereafter delete the e-mail along with <BR>
               any attachments without making copies. <BR>
<BR>
               Elkem reserves all rights of privilege, <BR>
               confidentiality and copyright.<BR>
</FONT>

--=_alternative 004613C000257091_=--


From W.E.Wolski at newcastle.ac.uk  Wed Oct  5 14:46:34 2005
From: W.E.Wolski at newcastle.ac.uk (nwew)
Date: Wed, 5 Oct 2005 13:46:34 +0100
Subject: [Rd] Problems with autoconf example from r-ext.
Message-ID: <433C6B7B@webmail.ncl.ac.uk>

Dear R-developers,

I am trying to reproduce the autoconf.ac example from R-ext and fail.

My autoconf file looks like this

[autoconf.ac]
# original by Friedrich Leisch, much changed by BDR

AC_INIT([SBMLodeSolveR])

dnl Select an optional include path, from a configure option
dnl or from an environment variable.
AC_ARG_WITH([sbmlode-include],
            AC_HELP_STRING([--with-sbmlode-include=INCLUDE_PATH],
                           [the location of SBMLODE header files]),
            [sbmlode_include_path=$withval])
if test [ -n "$sbmlode_include_path" ] ; then
   AC_SUBST([CPPFLAGS],["-I${sbmlode_include_path} ${CPPFLAGS}"])
else
  if test [ -n "${SBMLODE_INCLUDE}" ] ; then
     AC_SUBST([CPPFLAGS],["-I${SBMLODE_INCLUDE} ${CPPFLAGS}"])
  fi
fi


dnl ditto for a library path
AC_ARG_WITH([sbmlode-lib],AC_HELP_STRING([--with-sbmlode-lib=LIB_PATH],[the 
location of libsbmlode libraries]),[sbmlode_lib_path=$withval])

          if test [ -n "$sbmlode_lib_path" ] ; then
             AC_SUBST([LIBS],[" -L${sbmlode_lib_path} ${LIBS}"])
          else
            if test [ -n "${SBMLODE_LIBS}" ] ; then
               AC_SUBST([LIBS],["-I${SBMLODE_LIBS} ${LIBS}"])
            fi
          fi

dnl Now find the compiler and compiler flags to use
          : ${R_HOME=`R RHOME`}
          if test -z "${R_HOME}"; then
            echo "could not determine R_HOME"
            exit 1
          fi
          CC=`"${R_HOME}/bin/R" CMD config CC`
          CFLAGS=`"${R_HOME}/bin/R" CMD config CFLAGS`

          
dnl substitute CPPFLAGS and LIBS
          AC_SUBST(CPPFLAGS)
          AC_SUBST(LIBS)
dnl and do subsitution in the src/Makevars.in
          AC_OUTPUT(src/Makevars)

[end autoconf.ac]

I rund autoconf..

[Makevars.in]
PKG_CFLAGS=@CPPFLAGS@
PKG_LIBS=@LIBS@
[end-Makevars.in]

I rund R CMD with

R CMD INSTALL 
--configure-args='--with-sbmlode-lib=/data/opt/sbmlodesolve/include \
--with-sbmlode-include=/data/opt/sbmlodesolve/lib' \
 SBMLodeSolveR


What I am getting is a

[Makvars]
PKG_CFLAGS=
PKG_LIBS= -L/data/opt/sbmlodesolve/include
[end-Makevars]


and the following warnings

[warnings]
* Installing *source* package 'SBMLodeSolveR' ...
configure: WARNING: you should use --build, --host, --target
configure: WARNING: invalid host type: /data/opt/sbmlodesolve/lib
configure: creating ./config.status
config.status: creating src/Makevars
*
[end-warnings]

Any suggestions?

Eryk


From ripley at stats.ox.ac.uk  Wed Oct  5 14:50:34 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed,  5 Oct 2005 14:50:34 +0200 (CEST)
Subject: [Rd] Ad: Re:  R crashes for large formulas in lm() (PR#8180)
Message-ID: <20051005125034.2E8E11DD81@slim.kubism.ku.dk>

On Wed, 5 Oct 2005 Hallgeir.Grinde at elkem.no wrote:

> And some more informastion I forgot.
> R does not crash if I write out the formula:
>
> set.seed(123)
> x1 <- runif(1000)
> x2 <- runif(1000)
> x3 <- runif(1000)
> x4 <- runif(1000)
> x5 <- runif(1000)
> x6 <- runif(1000)
> x7 <- runif(1000)
> x8 <- runif(1000)
> y <- rnorm(1000)
> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
> -> R crashes
>
> fit <- lm(y~x1+x2+x3+x4+x5+x6+x7+x8
>                +x1:x2+x1:x3+x1:x4+x1:x5+x1:x6+x1:x7+x1:x8
>                +x2:x3++x2:x4+x2:x5+x2:x6+x2:x7+x2:x8
>                +x3:x4+x3:x5+x3:x6+x3:x7+x3:x8
>                +x4:x5+x4:x6+x4:x7+x4:x8
>                +x5:x6+x5:x7+x5:x8
>                +x6:x7+x6:x8
>                +x7:x8)
> -> R does not crash
> This is the same formula, at least it should be.

It is not the same formula at all.  Try

> terms(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2, simplify=TRUE)
y ~ x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x1:x2 + x1:x3 + x1:x4 +
     x1:x5 + x1:x6 + x1:x7 + x1:x8 + x2:x3 + x2:x4 + x2:x5 + x2:x6 +
     x2:x7 + x2:x8 + x3:x4 + x3:x5 + x3:x6 + x3:x7 + x3:x8 + x4:x5 +
     x4:x6 + x4:x7 + x4:x8 + x5:x6 + x5:x7 + x5:x8 + x6:x7 + x6:x8 +
     x7:x8 + x1:x2:x3 + x1:x2:x4 + x1:x3:x4 + x1:x2:x5 + x1:x3:x5 +
...
     x1:x3:x4:x5:x6:x7:x8 + x2:x3:x4:x5:x6:x7:x8 + x1:x2:x3:x4:x5:x6:x7:x8

Did you actually want lm(y~(x1+x2+x3+x4+x5+x6+x7+x8)^2) ?

>
>
>
>
>
> Uwe Ligges <ligges at statistik.uni-dortmund.de>
> 05.10.2005 12:13
>
>        Til:    Prof Brian Ripley <ripley at stats.ox.ac.uk>
>        cc:     hallgeir.grinde at elkem.no, R-bugs at biostat.ku.dk
>        Emne:   Re: [Rd] R crashes for large formulas in lm() (PR#8180)
>
>
> Prof Brian Ripley wrote:
>
>> On Wed, 5 Oct 2005 hallgeir.grinde at elkem.no wrote:
>>
>>
>>> Full_Name: Hallgeir Grinde
>>> Version: 2.1.1
>>> OS: Windows XP
>>> Submission from: (NULL) (144.127.1.1)
>>>
>>>
>>> While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the numbers of
> variables
>>> are at least 8.
>>
>>
>> OK, let's try to reproduce that:
>>
>>
>>> x1 <- runif(1000)
>>> x2 <- runif(1000)
>>> x3 <- runif(1000)
>>> x4 <- runif(1000)
>>> x5 <- runif(1000)
>>> x6 <- runif(1000)
>>> x7 <- runif(1000)
>>> x8 <- runif(1000)
>>> y <- rnorm(1000)
>>> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
>>
>>
>> No crash, a quite reasonable fit.
>>
>> Can we please have a reproducible example, as we do ask?
>>
>
> Hmm, crashes for me as well with R-2.1.1 and R-2.2.0 beta (2005-09-27
> r35682M) on WinNT 4.0, SP6.
>
>
> Let's make it reproducible:
>
> set.seed(123)
> x1 <- runif(1000)
> x2 <- runif(1000)
> x3 <- runif(1000)
> x4 <- runif(1000)
> x5 <- runif(1000)
> x6 <- runif(1000)
> x7 <- runif(1000)
> x8 <- runif(1000)
> y <- rnorm(1000)
> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
>
>
> Uwe Ligges
>
>
>
>                                NOTICE
>               Please immediately e-mail back to sender
>               if you are not the intended recipient.
>
>               Thereafter delete the e-mail along with
>               any attachments without making copies.
>
>               Elkem reserves all rights of privilege,
>               confidentiality and copyright.
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From p.dalgaard at biostat.ku.dk  Wed Oct  5 15:02:55 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 05 Oct 2005 15:02:55 +0200
Subject: [Rd] Ad: Re:  R crashes for large formulas in lm() (PR#8180)
In-Reply-To: <20051005124542.46EA21DD81@slim.kubism.ku.dk>
References: <20051005124542.46EA21DD81@slim.kubism.ku.dk>
Message-ID: <x2ll1815hc.fsf@viggo.kubism.ku.dk>

Hallgeir.Grinde at elkem.no writes:

> Dette er en melding med flere deler i MIME-format.
> --=_alternative 004613C000257091_=
> Content-Type: text/plain; charset="US-ASCII"
> 
> And some more informastion I forgot.
> R does not crash if I write out the formula:
> 
> set.seed(123)
> x1 <- runif(1000)
> x2 <- runif(1000)
> x3 <- runif(1000)
> x4 <- runif(1000)
> x5 <- runif(1000)
> x6 <- runif(1000)
> x7 <- runif(1000)
> x8 <- runif(1000)
> y <- rnorm(1000)
> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
> -> R crashes
> 
> fit <- lm(y~x1+x2+x3+x4+x5+x6+x7+x8
>                 +x1:x2+x1:x3+x1:x4+x1:x5+x1:x6+x1:x7+x1:x8
>                 +x2:x3++x2:x4+x2:x5+x2:x6+x2:x7+x2:x8
>                 +x3:x4+x3:x5+x3:x6+x3:x7+x3:x8
>                 +x4:x5+x4:x6+x4:x7+x4:x8
>                 +x5:x6+x5:x7+x5:x8
>                 +x6:x7+x6:x8
>                 +x7:x8)
> -> R does not crash
> This is the same formula, at least it should be.

It isn't and it shouldn't. (Try it for smaller values of 8)

y~(x1+x2+x3+x4+x5+x6+x7+x8)^2 should be same as the second formula,
modulo the syntax error.


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From andy_liaw at merck.com  Wed Oct  5 15:12:42 2005
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed, 5 Oct 2005 09:12:42 -0400
Subject: [Rd] Ad: Re: R crashes for large formulas in lm() (PR#8180)
Message-ID: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED4CC@usctmx1106.merck.com>

> From: Peter Dalgaard
> 
> Hallgeir.Grinde at elkem.no writes:
> 
> > Dette er en melding med flere deler i MIME-format.
> > --=_alternative 004613C000257091_=
> > Content-Type: text/plain; charset="US-ASCII"
> > 
> > And some more informastion I forgot.
> > R does not crash if I write out the formula:
> > 
> > set.seed(123)
> > x1 <- runif(1000)
> > x2 <- runif(1000)
> > x3 <- runif(1000)
> > x4 <- runif(1000)
> > x5 <- runif(1000)
> > x6 <- runif(1000)
> > x7 <- runif(1000)
> > x8 <- runif(1000)
> > y <- rnorm(1000)
> > fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
> > -> R crashes
> > 
> > fit <- lm(y~x1+x2+x3+x4+x5+x6+x7+x8
> >                 +x1:x2+x1:x3+x1:x4+x1:x5+x1:x6+x1:x7+x1:x8
> >                 +x2:x3++x2:x4+x2:x5+x2:x6+x2:x7+x2:x8
> >                 +x3:x4+x3:x5+x3:x6+x3:x7+x3:x8
> >                 +x4:x5+x4:x6+x4:x7+x4:x8
> >                 +x5:x6+x5:x7+x5:x8
> >                 +x6:x7+x6:x8
> >                 +x7:x8)
> > -> R does not crash
> > This is the same formula, at least it should be.
> 
> It isn't and it shouldn't. (Try it for smaller values of 8)

Er, which smaller values of 8 would you suggest?  8-)

Andy

 
> y~(x1+x2+x3+x4+x5+x6+x7+x8)^2 should be same as the second formula,
> modulo the syntax error.
> 
> 
> -- 
>    O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
>   c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
>  (*) \(*) -- University of Copenhagen   Denmark          Ph:  
> (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: 
> (+45) 35327907
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>


From dj at research.bell-labs.com  Wed Oct  5 15:16:19 2005
From: dj at research.bell-labs.com (David James)
Date: Wed, 5 Oct 2005 09:16:19 -0400
Subject: [Rd] vector labels are not permuted properly in a call to
	sort() (R 2.1)
In-Reply-To: <17219.33977.703689.753165@stat.math.ethz.ch>
References: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED4C6@usctmx1106.merck.com>
	<17219.33977.703689.753165@stat.math.ethz.ch>
Message-ID: <20051005131618.GB27410@jessie.research.bell-labs.com>

Martin Maechler wrote:
> >>>>> "AndyL" == Liaw, Andy <andy_liaw at merck.com>
> >>>>>     on Tue, 4 Oct 2005 13:51:11 -0400 writes:
> 
>     AndyL> The `problem' is that sort() does not doing anything special when given
>     AndyL> a matrix: it only treat it as a vector.  After sorting, it copies
>     AndyL> attributes of the original input to the output.  Since dimnames are
>     AndyL> attributes, they get copied as is.
> 
> exactly. Thanks Andy.
> 
> And I think users would want this (copying of attributes) in
> many cases; in particular for user-created attributes
> 
> ?sort  really talks about sorting of vectors and factors;
>        and it doesn't mention attributes explicitly at all
>        {which should probably be improved}.
> 
> One could wonder if R should keep the dim & dimnames
> attributes for arrays and matrices.  
> S-plus (6.2) simply drops them {returning a bare unnames vector}
> and that seems pretty reasonable to me.

This is as described in the Blue book, p.146, "Throwing Away Attributes".

> 
> At least the user would never make the wrong assumptions that
> Greg made about ``matrix sorting''.
> 
> 
>     AndyL> Try:
> 
>     >> y <- matrix(8:1, 4, 2, dimnames=list(LETTERS[1:4], NULL))
>     >> y
>     AndyL> [,1] [,2]
>     AndyL> A    8    4
>     AndyL> B    7    3
>     AndyL> C    6    2
>     AndyL> D    5    1
>     >> sort(y)
>     AndyL> [,1] [,2]
>     AndyL> A    1    5
>     AndyL> B    2    6
>     AndyL> C    3    7
>     AndyL> D    4    8
> 
>     AndyL> Notice the row names stay the same.  I'd argue that this is the correct
>     AndyL> behavior.
> 
>     AndyL> Andy
> 
> 
>     >> From: Greg Finak
>     >> 
>     >> Not sure if this is the correct forum for this, 
> 
> yes, R-devel is the proper forum.
> {also since this is really a proposal for a change in R ...}
> 
>     >> but I've found what I  
>     >> would consider to be a potentially serious bug to the 
>     >> unsuspecting user.
>     >> Given a numeric vector V with class labels in R,  the following calls
>     >> 
>     >> 1.
>     >> > sort(as.matrix(V))
>     >> 
>     >> and
>     >> 
>     >> 2.
>     >> >as.matrix(sort(V))
>     >> 
>     >> produce different ouput. The vector is sorted properly in 
>     >> both cases,  
>     >> but only 2. produces the correct labeling of the vector. The call to  
>     >> 1. produces a vector with incorrect labels (not sorted).
>     >> 
>     >> Code:
>     >> >X<-c("A","B","C","D","E","F","G","H")
>     >> >Y<-rev(1:8)
>     >> >names(Y)<-X
>     >> > Y
>     >> A B C D E F G H
>     >> 8 7 6 5 4 3 2 1
>     >> > sort(as.matrix(Y))
>     >> [,1]
>     >> A    1
>     >> B    2
>     >> C    3
>     >> D    4
>     >> E    5
>     >> F    6
>     >> G    7
>     >> H    8
>     >> > as.matrix(sort(Y))
>     >> [,1]
>     >> H    1
>     >> G    2
>     >> F    3
>     >> E    4
>     >> D    5
>     >> C    6
>     >> B    7
>     >> A    8
>     >>
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


--
David


From ripley at stats.ox.ac.uk  Wed Oct  5 15:39:47 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 5 Oct 2005 14:39:47 +0100 (BST)
Subject: [Rd] Problems with autoconf example from r-ext.
In-Reply-To: <433C6B7B@webmail.ncl.ac.uk>
References: <433C6B7B@webmail.ncl.ac.uk>
Message-ID: <Pine.LNX.4.61.0510051435040.26864@gannet.stats>

The current R-exts.texi has

AC_INIT([RODBC], 1.1.4) dnl package name, version

and that is crucially different from your example.  Autoconf 2.59 has a 
barely documented back-compatibility mode than is invoked for AC_INIT with 
just one argument.


since in has a pare

On Wed, 5 Oct 2005, nwew wrote:

> Dear R-developers,
>
> I am trying to reproduce the autoconf.ac example from R-ext and fail.
>
> My autoconf file looks like this
>
> [autoconf.ac]
> # original by Friedrich Leisch, much changed by BDR
>
> AC_INIT([SBMLodeSolveR])
>
> dnl Select an optional include path, from a configure option
> dnl or from an environment variable.
> AC_ARG_WITH([sbmlode-include],
>            AC_HELP_STRING([--with-sbmlode-include=INCLUDE_PATH],
>                           [the location of SBMLODE header files]),
>            [sbmlode_include_path=$withval])
> if test [ -n "$sbmlode_include_path" ] ; then
>   AC_SUBST([CPPFLAGS],["-I${sbmlode_include_path} ${CPPFLAGS}"])
> else
>  if test [ -n "${SBMLODE_INCLUDE}" ] ; then
>     AC_SUBST([CPPFLAGS],["-I${SBMLODE_INCLUDE} ${CPPFLAGS}"])
>  fi
> fi
>
>
> dnl ditto for a library path
> AC_ARG_WITH([sbmlode-lib],AC_HELP_STRING([--with-sbmlode-lib=LIB_PATH],[the
> location of libsbmlode libraries]),[sbmlode_lib_path=$withval])
>
>          if test [ -n "$sbmlode_lib_path" ] ; then
>             AC_SUBST([LIBS],[" -L${sbmlode_lib_path} ${LIBS}"])
>          else
>            if test [ -n "${SBMLODE_LIBS}" ] ; then
>               AC_SUBST([LIBS],["-I${SBMLODE_LIBS} ${LIBS}"])
>            fi
>          fi
>
> dnl Now find the compiler and compiler flags to use
>          : ${R_HOME=`R RHOME`}
>          if test -z "${R_HOME}"; then
>            echo "could not determine R_HOME"
>            exit 1
>          fi
>          CC=`"${R_HOME}/bin/R" CMD config CC`
>          CFLAGS=`"${R_HOME}/bin/R" CMD config CFLAGS`
>
>
> dnl substitute CPPFLAGS and LIBS
>          AC_SUBST(CPPFLAGS)
>          AC_SUBST(LIBS)
> dnl and do subsitution in the src/Makevars.in
>          AC_OUTPUT(src/Makevars)
>
> [end autoconf.ac]
>
> I rund autoconf..
>
> [Makevars.in]
> PKG_CFLAGS=@CPPFLAGS@
> PKG_LIBS=@LIBS@
> [end-Makevars.in]
>
> I rund R CMD with
>
> R CMD INSTALL
> --configure-args='--with-sbmlode-lib=/data/opt/sbmlodesolve/include \
> --with-sbmlode-include=/data/opt/sbmlodesolve/lib' \
> SBMLodeSolveR
>
>
> What I am getting is a
>
> [Makvars]
> PKG_CFLAGS=
> PKG_LIBS= -L/data/opt/sbmlodesolve/include
> [end-Makevars]
>
>
> and the following warnings
>
> [warnings]
> * Installing *source* package 'SBMLodeSolveR' ...
> configure: WARNING: you should use --build, --host, --target
> configure: WARNING: invalid host type: /data/opt/sbmlodesolve/lib
> configure: creating ./config.status
> config.status: creating src/Makevars
> *
> [end-warnings]
>
> Any suggestions?
>
> Eryk
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Hallgeir.Grinde at elkem.no  Wed Oct  5 15:53:53 2005
From: Hallgeir.Grinde at elkem.no (Hallgeir.Grinde@elkem.no)
Date: Wed,  5 Oct 2005 15:53:53 +0200 (CEST)
Subject: [Rd] Ad: Re: Ad: Re: R crashes for large formulas in lm() (PR#8180)
Message-ID: <20051005135353.11EBB1DE48@slim.kubism.ku.dk>

Dette er en melding med flere deler i MIME-format.
--=_alternative 004C4E4A00257091_=
Content-Type: text/plain; charset="US-ASCII"

Yes.
so (x1*x2*x3*x4*x5*x6*x7*x8)^2 = (x1+x2+x3+x4+x5+x6+x7+x8)^8 ?
and there is a difference in
(x1*x2*x3*x4*x5*x6*x7*x8)^2
and
(x1*x2*x3*x4*x5*x6*x7*x8)
althoug the resulting formulas are the same, or?

This fikses my problem, but R still crashes for the large formula. It may 
be due to stack owerflow, but i guess this can be altered maually?







Prof Brian Ripley <ripley at stats.ox.ac.uk>
05.10.2005 12:50
 
        Til:    Hallgeir.Grinde at elkem.no
        cc:     Uwe Ligges <ligges at statistik.uni-dortmund.de>, 
R-bugs at biostat.ku.dk
        Emne:   Re: Ad: Re: [Rd] R crashes for large formulas in lm() 
(PR#8180)


On Wed, 5 Oct 2005 Hallgeir.Grinde at elkem.no wrote:

> And some more informastion I forgot.
> R does not crash if I write out the formula:
>
> set.seed(123)
> x1 <- runif(1000)
> x2 <- runif(1000)
> x3 <- runif(1000)
> x4 <- runif(1000)
> x5 <- runif(1000)
> x6 <- runif(1000)
> x7 <- runif(1000)
> x8 <- runif(1000)
> y <- rnorm(1000)
> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
> -> R crashes
>
> fit <- lm(y~x1+x2+x3+x4+x5+x6+x7+x8
>                +x1:x2+x1:x3+x1:x4+x1:x5+x1:x6+x1:x7+x1:x8
>                +x2:x3++x2:x4+x2:x5+x2:x6+x2:x7+x2:x8
>                +x3:x4+x3:x5+x3:x6+x3:x7+x3:x8
>                +x4:x5+x4:x6+x4:x7+x4:x8
>                +x5:x6+x5:x7+x5:x8
>                +x6:x7+x6:x8
>                +x7:x8)
> -> R does not crash
> This is the same formula, at least it should be.

It is not the same formula at all.  Try

> terms(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2, simplify=TRUE)
y ~ x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x1:x2 + x1:x3 + x1:x4 +
     x1:x5 + x1:x6 + x1:x7 + x1:x8 + x2:x3 + x2:x4 + x2:x5 + x2:x6 +
     x2:x7 + x2:x8 + x3:x4 + x3:x5 + x3:x6 + x3:x7 + x3:x8 + x4:x5 +
     x4:x6 + x4:x7 + x4:x8 + x5:x6 + x5:x7 + x5:x8 + x6:x7 + x6:x8 +
     x7:x8 + x1:x2:x3 + x1:x2:x4 + x1:x3:x4 + x1:x2:x5 + x1:x3:x5 +
...
     x1:x3:x4:x5:x6:x7:x8 + x2:x3:x4:x5:x6:x7:x8 + x1:x2:x3:x4:x5:x6:x7:x8

Did you actually want lm(y~(x1+x2+x3+x4+x5+x6+x7+x8)^2) ?

>
>
>
>
>
> Uwe Ligges <ligges at statistik.uni-dortmund.de>
> 05.10.2005 12:13
>
>        Til:    Prof Brian Ripley <ripley at stats.ox.ac.uk>
>        cc:     hallgeir.grinde at elkem.no, R-bugs at biostat.ku.dk
>        Emne:   Re: [Rd] R crashes for large formulas in lm() (PR#8180)
>
>
> Prof Brian Ripley wrote:
>
>> On Wed, 5 Oct 2005 hallgeir.grinde at elkem.no wrote:
>>
>>
>>> Full_Name: Hallgeir Grinde
>>> Version: 2.1.1
>>> OS: Windows XP
>>> Submission from: (NULL) (144.127.1.1)
>>>
>>>
>>> While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the numbers of
> variables
>>> are at least 8.
>>
>>
>> OK, let's try to reproduce that:
>>
>>
>>> x1 <- runif(1000)
>>> x2 <- runif(1000)
>>> x3 <- runif(1000)
>>> x4 <- runif(1000)
>>> x5 <- runif(1000)
>>> x6 <- runif(1000)
>>> x7 <- runif(1000)
>>> x8 <- runif(1000)
>>> y <- rnorm(1000)
>>> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
>>
>>
>> No crash, a quite reasonable fit.
>>
>> Can we please have a reproducible example, as we do ask?
>>
>
> Hmm, crashes for me as well with R-2.1.1 and R-2.2.0 beta (2005-09-27
> r35682M) on WinNT 4.0, SP6.
>
>
> Let's make it reproducible:
>
> set.seed(123)
> x1 <- runif(1000)
> x2 <- runif(1000)
> x3 <- runif(1000)
> x4 <- runif(1000)
> x5 <- runif(1000)
> x6 <- runif(1000)
> x7 <- runif(1000)
> x8 <- runif(1000)
> y <- rnorm(1000)
> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
>
>
> Uwe Ligges
>
>
>
>                                NOTICE
>               Please immediately e-mail back to sender
>               if you are not the intended recipient.
>
>               Thereafter delete the e-mail along with
>               any attachments without making copies.
>
>               Elkem reserves all rights of privilege,
>               confidentiality and copyright.
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


--=_alternative 004C4E4A00257091_=
Content-Type: text/html; charset="US-ASCII"


<br><font size=2 face="sans-serif">Yes.</font>
<br><font size=2 face="sans-serif">so </font><font size=2><tt>(x1*x2*x3*x4*x5*x6*x7*x8)^2</tt></font><font size=2 face="sans-serif">
= </font><font size=2><tt>(x1+x2+x3+x4+x5+x6+x7+x8)^8 ?</tt></font>
<br><font size=2><tt>and there is a difference in</tt></font>
<br><font size=2><tt>(x1*x2*x3*x4*x5*x6*x7*x8)^2</tt></font>
<br><font size=2><tt>and</tt></font>
<br><font size=2><tt>(x1*x2*x3*x4*x5*x6*x7*x8)</tt></font>
<br><font size=2><tt>althoug the resulting formulas are the same, or?</tt></font>
<br>
<br><font size=2><tt>This fikses my problem, but R still crashes for the
large formula. It may be due to stack owerflow, but i guess this can be
altered maually?</tt></font>
<br>
<br>
<br>
<br>
<br>
<br>
<table width=100%>
<tr valign=top>
<td>
<td><font size=1 face="sans-serif"><b>Prof Brian Ripley &lt;ripley at stats.ox.ac.uk&gt;</b></font>
<p><font size=1 face="sans-serif">05.10.2005 12:50</font>
<td><font size=1 face="Arial">&nbsp; &nbsp; &nbsp; &nbsp; </font>
<br><font size=1 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; Til:
&nbsp; &nbsp; &nbsp; &nbsp;Hallgeir.Grinde at elkem.no</font>
<br><font size=1 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; cc:
&nbsp; &nbsp; &nbsp; &nbsp;Uwe Ligges &lt;ligges at statistik.uni-dortmund.de&gt;,
R-bugs at biostat.ku.dk</font>
<br><font size=1 face="sans-serif">&nbsp; &nbsp; &nbsp; &nbsp; Emne:
&nbsp; &nbsp; &nbsp; &nbsp;Re: Ad: Re: [Rd] R crashes for large
formulas in lm() (PR#8180)</font></table>
<br>
<br>
<br><font size=2><tt>On Wed, 5 Oct 2005 Hallgeir.Grinde at elkem.no wrote:<br>
<br>
&gt; And some more informastion I forgot.<br>
&gt; R does not crash if I write out the formula:<br>
&gt;<br>
&gt; set.seed(123)<br>
&gt; x1 &lt;- runif(1000)<br>
&gt; x2 &lt;- runif(1000)<br>
&gt; x3 &lt;- runif(1000)<br>
&gt; x4 &lt;- runif(1000)<br>
&gt; x5 &lt;- runif(1000)<br>
&gt; x6 &lt;- runif(1000)<br>
&gt; x7 &lt;- runif(1000)<br>
&gt; x8 &lt;- runif(1000)<br>
&gt; y &lt;- rnorm(1000)<br>
&gt; fit &lt;- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)<br>
&gt; -&gt; R crashes<br>
&gt;<br>
&gt; fit &lt;- lm(y~x1+x2+x3+x4+x5+x6+x7+x8<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+x1:x2+x1:x3+x1:x4+x1:x5+x1:x6+x1:x7+x1:x8<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+x2:x3++x2:x4+x2:x5+x2:x6+x2:x7+x2:x8<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+x3:x4+x3:x5+x3:x6+x3:x7+x3:x8<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+x4:x5+x4:x6+x4:x7+x4:x8<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+x5:x6+x5:x7+x5:x8<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+x6:x7+x6:x8<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;+x7:x8)<br>
&gt; -&gt; R does not crash<br>
&gt; This is the same formula, at least it should be.<br>
<br>
It is not the same formula at all. &nbsp;Try<br>
<br>
&gt; terms(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2, simplify=TRUE)<br>
y ~ x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x1:x2 + x1:x3 + x1:x4 +<br>
 &nbsp; &nbsp; x1:x5 + x1:x6 + x1:x7 + x1:x8 + x2:x3 + x2:x4 + x2:x5 +
x2:x6 +<br>
 &nbsp; &nbsp; x2:x7 + x2:x8 + x3:x4 + x3:x5 + x3:x6 + x3:x7 + x3:x8 +
x4:x5 +<br>
 &nbsp; &nbsp; x4:x6 + x4:x7 + x4:x8 + x5:x6 + x5:x7 + x5:x8 + x6:x7 +
x6:x8 +<br>
 &nbsp; &nbsp; x7:x8 + x1:x2:x3 + x1:x2:x4 + x1:x3:x4 + x1:x2:x5 + x1:x3:x5
+<br>
...<br>
 &nbsp; &nbsp; x1:x3:x4:x5:x6:x7:x8 + x2:x3:x4:x5:x6:x7:x8 + x1:x2:x3:x4:x5:x6:x7:x8<br>
<br>
Did you actually want lm(y~(x1+x2+x3+x4+x5+x6+x7+x8)^2) ?<br>
<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt; Uwe Ligges &lt;ligges at statistik.uni-dortmund.de&gt;<br>
&gt; 05.10.2005 12:13<br>
&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp;Til: &nbsp; &nbsp;Prof Brian Ripley &lt;ripley at stats.ox.ac.uk&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp;cc: &nbsp; &nbsp; hallgeir.grinde at elkem.no,
R-bugs at biostat.ku.dk<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp;Emne: &nbsp; Re: [Rd] R crashes for large
formulas in lm() (PR#8180)<br>
&gt;<br>
&gt;<br>
&gt; Prof Brian Ripley wrote:<br>
&gt;<br>
&gt;&gt; On Wed, 5 Oct 2005 hallgeir.grinde at elkem.no wrote:<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;&gt; Full_Name: Hallgeir Grinde<br>
&gt;&gt;&gt; Version: 2.1.1<br>
&gt;&gt;&gt; OS: Windows XP<br>
&gt;&gt;&gt; Submission from: (NULL) (144.127.1.1)<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt;<br>
&gt;&gt;&gt; While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the
numbers of<br>
&gt; variables<br>
&gt;&gt;&gt; are at least 8.<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; OK, let's try to reproduce that:<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt;&gt; x1 &lt;- runif(1000)<br>
&gt;&gt;&gt; x2 &lt;- runif(1000)<br>
&gt;&gt;&gt; x3 &lt;- runif(1000)<br>
&gt;&gt;&gt; x4 &lt;- runif(1000)<br>
&gt;&gt;&gt; x5 &lt;- runif(1000)<br>
&gt;&gt;&gt; x6 &lt;- runif(1000)<br>
&gt;&gt;&gt; x7 &lt;- runif(1000)<br>
&gt;&gt;&gt; x8 &lt;- runif(1000)<br>
&gt;&gt;&gt; y &lt;- rnorm(1000)<br>
&gt;&gt;&gt; fit &lt;- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)<br>
&gt;&gt;<br>
&gt;&gt;<br>
&gt;&gt; No crash, a quite reasonable fit.<br>
&gt;&gt;<br>
&gt;&gt; Can we please have a reproducible example, as we do ask?<br>
&gt;&gt;<br>
&gt;<br>
&gt; Hmm, crashes for me as well with R-2.1.1 and R-2.2.0 beta (2005-09-27<br>
&gt; r35682M) on WinNT 4.0, SP6.<br>
&gt;<br>
&gt;<br>
&gt; Let's make it reproducible:<br>
&gt;<br>
&gt; set.seed(123)<br>
&gt; x1 &lt;- runif(1000)<br>
&gt; x2 &lt;- runif(1000)<br>
&gt; x3 &lt;- runif(1000)<br>
&gt; x4 &lt;- runif(1000)<br>
&gt; x5 &lt;- runif(1000)<br>
&gt; x6 &lt;- runif(1000)<br>
&gt; x7 &lt;- runif(1000)<br>
&gt; x8 &lt;- runif(1000)<br>
&gt; y &lt;- rnorm(1000)<br>
&gt; fit &lt;- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)<br>
&gt;<br>
&gt;<br>
&gt; Uwe Ligges<br>
&gt;<br>
&gt;<br>
&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;NOTICE<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Please immediately
e-mail back to sender<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; if you are not the
intended recipient.<br>
&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Thereafter delete
the e-mail along with<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; any attachments without
making copies.<br>
&gt;<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Elkem reserves all
rights of privilege,<br>
&gt; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; confidentiality and
copyright.<br>
&gt;<br>
&gt;<br>
<br>
-- <br>
Brian D. Ripley, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp;ripley at stats.ox.ac.uk<br>
Professor of Applied Statistics, &nbsp;http://www.stats.ox.ac.uk/~ripley/<br>
University of Oxford, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Tel: &nbsp;+44
1865 272861 (self)<br>
1 South Parks Road, &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
&nbsp; &nbsp; +44 1865 272866 (PA)<br>
Oxford OX1 3TG, UK &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;Fax:
&nbsp;+44 1865 272595<br>
</tt></font>
<br>
--=_alternative 004C4E4A00257091_=--


From ripley at stats.ox.ac.uk  Wed Oct  5 16:01:34 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed,  5 Oct 2005 16:01:34 +0200 (CEST)
Subject: [Rd] Ad: Re: Ad: Re: R crashes for large formulas in lm()
	(PR#8181)
Message-ID: <20051005140134.F2CC61DE63@slim.kubism.ku.dk>

On Wed, 5 Oct 2005 Hallgeir.Grinde at elkem.no wrote:

> Yes.
> so (x1*x2*x3*x4*x5*x6*x7*x8)^2 = (x1+x2+x3+x4+x5+x6+x7+x8)^8 ?

Yes in the sense that the simplified formula given by terms() is the same.

> and there is a difference in
> (x1*x2*x3*x4*x5*x6*x7*x8)^2
> and
> (x1*x2*x3*x4*x5*x6*x7*x8)
> althoug the resulting formulas are the same, or?

The first is reduced to the second by terms().

> This fikses my problem, but R still crashes for the large formula. It may
> be due to stack owerflow, but i guess this can be altered maually?

On Unix-alikes, at least.

The way the calculation is done can be improved, but is anyone going 
intentionally to write a 100,000 term formula?

>
> Prof Brian Ripley <ripley at stats.ox.ac.uk>
> 05.10.2005 12:50
>
>        Til:    Hallgeir.Grinde at elkem.no
>        cc:     Uwe Ligges <ligges at statistik.uni-dortmund.de>,
> R-bugs at biostat.ku.dk
>        Emne:   Re: Ad: Re: [Rd] R crashes for large formulas in lm()
> (PR#8180)
>
>
> On Wed, 5 Oct 2005 Hallgeir.Grinde at elkem.no wrote:
>
>> And some more informastion I forgot.
>> R does not crash if I write out the formula:
>>
>> set.seed(123)
>> x1 <- runif(1000)
>> x2 <- runif(1000)
>> x3 <- runif(1000)
>> x4 <- runif(1000)
>> x5 <- runif(1000)
>> x6 <- runif(1000)
>> x7 <- runif(1000)
>> x8 <- runif(1000)
>> y <- rnorm(1000)
>> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
>> -> R crashes
>>
>> fit <- lm(y~x1+x2+x3+x4+x5+x6+x7+x8
>>                +x1:x2+x1:x3+x1:x4+x1:x5+x1:x6+x1:x7+x1:x8
>>                +x2:x3++x2:x4+x2:x5+x2:x6+x2:x7+x2:x8
>>                +x3:x4+x3:x5+x3:x6+x3:x7+x3:x8
>>                +x4:x5+x4:x6+x4:x7+x4:x8
>>                +x5:x6+x5:x7+x5:x8
>>                +x6:x7+x6:x8
>>                +x7:x8)
>> -> R does not crash
>> This is the same formula, at least it should be.
>
> It is not the same formula at all.  Try
>
>> terms(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2, simplify=TRUE)
> y ~ x1 + x2 + x3 + x4 + x5 + x6 + x7 + x8 + x1:x2 + x1:x3 + x1:x4 +
>     x1:x5 + x1:x6 + x1:x7 + x1:x8 + x2:x3 + x2:x4 + x2:x5 + x2:x6 +
>     x2:x7 + x2:x8 + x3:x4 + x3:x5 + x3:x6 + x3:x7 + x3:x8 + x4:x5 +
>     x4:x6 + x4:x7 + x4:x8 + x5:x6 + x5:x7 + x5:x8 + x6:x7 + x6:x8 +
>     x7:x8 + x1:x2:x3 + x1:x2:x4 + x1:x3:x4 + x1:x2:x5 + x1:x3:x5 +
> ...
>     x1:x3:x4:x5:x6:x7:x8 + x2:x3:x4:x5:x6:x7:x8 + x1:x2:x3:x4:x5:x6:x7:x8
>
> Did you actually want lm(y~(x1+x2+x3+x4+x5+x6+x7+x8)^2) ?
>
>>
>>
>>
>>
>>
>> Uwe Ligges <ligges at statistik.uni-dortmund.de>
>> 05.10.2005 12:13
>>
>>        Til:    Prof Brian Ripley <ripley at stats.ox.ac.uk>
>>        cc:     hallgeir.grinde at elkem.no, R-bugs at biostat.ku.dk
>>        Emne:   Re: [Rd] R crashes for large formulas in lm() (PR#8180)
>>
>>
>> Prof Brian Ripley wrote:
>>
>>> On Wed, 5 Oct 2005 hallgeir.grinde at elkem.no wrote:
>>>
>>>
>>>> Full_Name: Hallgeir Grinde
>>>> Version: 2.1.1
>>>> OS: Windows XP
>>>> Submission from: (NULL) (144.127.1.1)
>>>>
>>>>
>>>> While using lm(y~(x*z*c*...*v)^2) R crashes/closes if the numbers of
>> variables
>>>> are at least 8.
>>>
>>>
>>> OK, let's try to reproduce that:
>>>
>>>
>>>> x1 <- runif(1000)
>>>> x2 <- runif(1000)
>>>> x3 <- runif(1000)
>>>> x4 <- runif(1000)
>>>> x5 <- runif(1000)
>>>> x6 <- runif(1000)
>>>> x7 <- runif(1000)
>>>> x8 <- runif(1000)
>>>> y <- rnorm(1000)
>>>> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
>>>
>>>
>>> No crash, a quite reasonable fit.
>>>
>>> Can we please have a reproducible example, as we do ask?
>>>
>>
>> Hmm, crashes for me as well with R-2.1.1 and R-2.2.0 beta (2005-09-27
>> r35682M) on WinNT 4.0, SP6.
>>
>>
>> Let's make it reproducible:
>>
>> set.seed(123)
>> x1 <- runif(1000)
>> x2 <- runif(1000)
>> x3 <- runif(1000)
>> x4 <- runif(1000)
>> x5 <- runif(1000)
>> x6 <- runif(1000)
>> x7 <- runif(1000)
>> x8 <- runif(1000)
>> y <- rnorm(1000)
>> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8)^2)
>>
>>
>> Uwe Ligges
>>
>>
>>
>>                                NOTICE
>>               Please immediately e-mail back to sender
>>               if you are not the intended recipient.
>>
>>               Thereafter delete the e-mail along with
>>               any attachments without making copies.
>>
>>               Elkem reserves all rights of privilege,
>>               confidentiality and copyright.
>>
>>
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Wed Oct  5 16:05:12 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 5 Oct 2005 15:05:12 +0100 (BST)
Subject: [Rd] vector labels are not permuted properly in a call to
 sort() (R 2.1)
In-Reply-To: <17219.33977.703689.753165@stat.math.ethz.ch>
References: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED4C6@usctmx1106.merck.com>
	<17219.33977.703689.753165@stat.math.ethz.ch>
Message-ID: <Pine.LNX.4.61.0510050903580.22199@gannet.stats>

The main problem is that R is inconsistent here.  There are lots of 
branches through the sort() code.  Greg showed one.  Here are four more

> sort(y, method="quick")
   [,1] [,2]
A    1    5
B    2    6
C    3    7
D    4    8
> names(y) <- letters[1:8]
> sort(y)
h g f e d c b a
1 2 3 4 5 6 7 8
> sort(y, method="quick")
   [,1] [,2]
A    1    5
B    2    6
C    3    7
D    4    8
attr(,"names")
[1] "h" "g" "f" "e" "d" "c" "b" "a"
> sort(y, partial=4)
   [,1] [,2]
A    1    5
B    2    6
C    3    7
D    4    8
attr(,"names")
[1] "a" "b" "c" "d" "e" "f" "g" "h"

I believe Svr4 does keep names but does not allow names on matrices.

There are other problems: should sorting a time-series preserve the ts 
properties (probably not, but it does).  Should (S3 or S4) class 
information be preserved (it seems inappropriate for a time series, for 
example)?

The course of least resistance here is to always preserve attributes and 
to document that we do so.  Probably the most S-compliant solution is to 
preserve only names (and sort them as now).

David James quotes the Blue Book, but note that S itself no longer follows 
the principle stated there.


On Wed, 5 Oct 2005, Martin Maechler wrote:

>>>>>> "AndyL" == Liaw, Andy <andy_liaw at merck.com>
>>>>>>     on Tue, 4 Oct 2005 13:51:11 -0400 writes:
>
>    AndyL> The `problem' is that sort() does not doing anything special when given
>    AndyL> a matrix: it only treat it as a vector.  After sorting, it copies
>    AndyL> attributes of the original input to the output.  Since dimnames are
>    AndyL> attributes, they get copied as is.
>
> exactly. Thanks Andy.
>
> And I think users would want this (copying of attributes) in
> many cases; in particular for user-created attributes
>
> ?sort  really talks about sorting of vectors and factors;
>       and it doesn't mention attributes explicitly at all
>       {which should probably be improved}.
>
> One could wonder if R should keep the dim & dimnames
> attributes for arrays and matrices.
> S-plus (6.2) simply drops them {returning a bare unnames vector}
> and that seems pretty reasonable to me.
>
> At least the user would never make the wrong assumptions that
> Greg made about ``matrix sorting''.
>
>
>    AndyL> Try:
>
>    >> y <- matrix(8:1, 4, 2, dimnames=list(LETTERS[1:4], NULL))
>    >> y
>    AndyL> [,1] [,2]
>    AndyL> A    8    4
>    AndyL> B    7    3
>    AndyL> C    6    2
>    AndyL> D    5    1
>    >> sort(y)
>    AndyL> [,1] [,2]
>    AndyL> A    1    5
>    AndyL> B    2    6
>    AndyL> C    3    7
>    AndyL> D    4    8
>
>    AndyL> Notice the row names stay the same.  I'd argue that this is the correct
>    AndyL> behavior.
>
>    AndyL> Andy
>
>
>    >> From: Greg Finak
>    >>
>    >> Not sure if this is the correct forum for this,
>
> yes, R-devel is the proper forum.
> {also since this is really a proposal for a change in R ...}
>
>    >> but I've found what I
>    >> would consider to be a potentially serious bug to the
>    >> unsuspecting user.
>    >> Given a numeric vector V with class labels in R,  the following calls
>    >>
>    >> 1.
>    >> > sort(as.matrix(V))
>    >>
>    >> and
>    >>
>    >> 2.
>    >> >as.matrix(sort(V))
>    >>
>    >> produce different ouput. The vector is sorted properly in
>    >> both cases,
>    >> but only 2. produces the correct labeling of the vector. The call to
>    >> 1. produces a vector with incorrect labels (not sorted).
>    >>
>    >> Code:
>    >> >X<-c("A","B","C","D","E","F","G","H")
>    >> >Y<-rev(1:8)
>    >> >names(Y)<-X
>    >> > Y
>    >> A B C D E F G H
>    >> 8 7 6 5 4 3 2 1
>    >> > sort(as.matrix(Y))
>    >> [,1]
>    >> A    1
>    >> B    2
>    >> C    3
>    >> D    4
>    >> E    5
>    >> F    6
>    >> G    7
>    >> H    8
>    >> > as.matrix(sort(Y))
>    >> [,1]
>    >> H    1
>    >> G    2
>    >> F    3
>    >> E    4
>    >> D    5
>    >> C    6
>    >> B    7
>    >> A    8
>    >>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From nakama at ki.rim.or.jp  Wed Oct  5 17:30:27 2005
From: nakama at ki.rim.or.jp (Ei-ji Nakama)
Date: Thu, 06 Oct 2005 00:30:27 +0900 (JST)
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
In-Reply-To: <Pine.LNX.4.61.0510051327310.25562@gannet.stats>
References: <Pine.LNX.4.61.0510051256110.24974@gannet.stats>
	<4343C2A5.2060102@lancaster.ac.uk>
	<Pine.LNX.4.61.0510051327310.25562@gannet.stats>
Message-ID: <20051006.003027.884028680.nakama@ki.rim.or.jp>

Hi,

Wed, 5 Oct 2005 13:38:12 +0100 (BST)
Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote.
> This is almost certainly C stack overflow, which will be _very_ 
> OS-specific. I can run this 9-var example in Linux with a stacksize of 
> 30Mb, but not the default 10Mb. I tried it with the default stack under 
> valgrind, and it works.
> 
> Windows versions of R have I believe a stack of 8Mb, and so I suspect are 
> running close to that with 8-var example.
> 
> The problem appears to be recursion in StripTerm.

default of stack of ld for Mingw seems to be 2M.
see. binutils-2.16.91-20050827-1/ld/emultempl/pe.em
   289    D(SizeOfStackReserve,"__size_of_stack_reserve__", 0x200000),

How about adding the following to MkRules?
MINGW32LDFLAG=-Wl,--stack=33554432
--
http://www.nakama.ne.jp
e-mail : EIJI Nakama <nakama at ki.rim.or.jp>


From ripley at stats.ox.ac.uk  Wed Oct  5 18:01:28 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 5 Oct 2005 17:01:28 +0100 (BST)
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
In-Reply-To: <20051006.003027.884028680.nakama@ki.rim.or.jp>
References: <Pine.LNX.4.61.0510051256110.24974@gannet.stats>
	<4343C2A5.2060102@lancaster.ac.uk>
	<Pine.LNX.4.61.0510051327310.25562@gannet.stats>
	<20051006.003027.884028680.nakama@ki.rim.or.jp>
Message-ID: <Pine.LNX.4.61.0510051637490.22717@gannet.stats>

On Thu, 6 Oct 2005, Ei-ji Nakama wrote:

> Hi,
>
> Wed, 5 Oct 2005 13:38:12 +0100 (BST)
> Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote.
>> This is almost certainly C stack overflow, which will be _very_
>> OS-specific. I can run this 9-var example in Linux with a stacksize of
>> 30Mb, but not the default 10Mb. I tried it with the default stack under
>> valgrind, and it works.
>>
>> Windows versions of R have I believe a stack of 8Mb, and so I suspect are
>> running close to that with 8-var example.
>>
>> The problem appears to be recursion in StripTerm.
>
> default of stack of ld for Mingw seems to be 2M.

Yes thanks I have since found that (from ld --help)

> see. binutils-2.16.91-20050827-1/ld/emultempl/pe.em
>   289    D(SizeOfStackReserve,"__size_of_stack_reserve__", 0x200000),
>
> How about adding the following to MkRules?
> MINGW32LDFLAG=-Wl,--stack=33554432

I have been trying that but I cannot make it work (checking the header).
It seems the way that does work is -Wl,--stack=0xA00000.  That does allow 
this example (with 8 vars) to always run on WinXP.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From peerouqa at brc.medtronic.com  Thu Oct  6 09:29:31 2005
From: peerouqa at brc.medtronic.com (Kara Floyd)
Date: Thu, 6 Oct 2005 00:29:31 -0700
Subject: [Rd] Dont loose your chance list
Message-ID: <8476381409.9933583924@brc.medtronic.com>

Sehr geehrte Frau/Herr, made


Suchen Sie eine Arbeit? your

Eine der besten Finanzgesellschaften in Osteuropa freut sich sehr 
darauf,
Ihnen eine ausgezeichnete Arbeit vorzuschlagen, die wirklich ein gro?es
Einkommen erm?glicht!! Sie sollen nichts investieren oder keine Waren
kaufen, um bei uns zu arbeiten. best

Kein Geld anzufangen? made


?ber uns:

Real Capitalz Finance Company, Litauen wurde im Jahre 1995 von einer
Gruppe der Antiquit?texperten gestiftet. Bis heute hat sich die
Gesellschaft aus einer kleinen Firma mit 7 Mitarbeitern zu einer
internationalen Gruppe mit einigen Vertretungen in verschiednen L?ndern
der Welt entwickelt. Heute sind wir nicht nur mit der 
Antiquit?tshandlung
besch?ftigt, sondern organisieren auch internationale Ausstellungen,
Seminare, Toure und viele andere Veranstaltungen. F?r mehr 
Informationen:
http://www.trustbizjob.com


Unsere Arbeitsstellen:

Jetzt macht die Klientschaft der Gesellschaft weltweite
Finanztransaktionen, einschlie?lich Australien, aber wegen der
ungen?genden Vollkommenheit des australischen Bankservicen haben wir
einige Schwierigkeiten bei der Reorganisation und Transformation 
unseres
Gesch?fts. Deswegen haben wir uns entschieden, Zweigstellen zu 
errichten,
und dazu brauchen wir Mitarbeiter aus Australien. Wir suchen
Finanzassistenten, die die Zahlungen der Kunden erhalten werden. Wir
schlagen Fernarbeit vor, aber wenn wir in Australien Zweigstellen
errichten, haben Sie dann die M?glichkeit auch im Office zu arbeiten. their

Wir suchen Finanzassistenten, die die Bezahlung der Kunden durch
Bankanweisung akzeptieren werden. Wegen der Mangelhaftigkeit des
Banksystems, haben australische Partner von unseren Kunden einige
Schwierigkeiten mit Bankanweisungen und Schecks in Osteuropa.  they

Sie k?nnen 10% Kommission von jeder Bankanweisung bekommen, die mit
unserem Gesch?ft zu tun hat. Das ?brige ist an unseren Vertreter zu 
senden
durch Western Union Service. Alle Western Union Geb?hre werden von uns
bezahlt. Im Durchschnitt werden Sie 2,000 US Dollars pro Woche 
bekommen. and

Wir glauben, dass Sie bei unserer Gesellschaft gute Perspektiven f?r 
die
Zukunft finden und Vieles erreichen k?nnen. Wenn unser Vorschlag f?r 
Sie
interessant ist, bitte schicken Sie ein E-Mail an unser HR-Office. Wir
werden gern Ihre Fragen beantworten. drive

Wenn Sie bereit sind mit uns zu arbeiten, bitte registrieren Sie sich 
an
unsrer Website um personale Account f?r unsere Website zu bekommen. In 
24
Stunden nach der Registration auf Web werden Sie einen Vertrag von uns 
bei
E-Mail bekommen und wir beginnen mit Ihnen zu arbeiten. old

Mit freundlichen Gr?sse drive
WorldWide Company Lithuania out
contact at realjob-inworld.com


From andy_liaw at merck.com  Wed Oct  5 18:44:42 2005
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed, 5 Oct 2005 12:44:42 -0400
Subject: [Rd] how do I write Rd file for this?
Message-ID: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED4D1@usctmx1106.merck.com>

Dear R-devel,

I'm working on Prof. Loader's new version of locfit to try to get it
pass R CMD check.  I'm almost there, but I have a problem with some Rd
files that I hope some one can help me resolve.  Here's an example:

In the package there's a function called locfit.censor().  This function
can be used in a few different ways:

locfit.censor(x, y, cens, ...) 
locfit.censor(formula, ...)
locfit(formula, ..., lfproc=locfit.censor)

What I did in locfit.censor.Rd is have something like:

\synopsis{
locfit.censor(x, y, cens, ..., iter=3, km=FALSE)
}
\usage{
locfit(formula, cens=cens, lfproc=locfit.censor)
locfit.censor(formula, cens, ..., iter=3, km=FALSE)
}

However, R CMD check gives me:

Undocumented arguments in documentation object 'locfit.censor'
  formula lfproc
Documented arguments not in \usage in documentation object
'locfit.censor':
  x y
Objects in \usage without \alias in documentation object
'locfit.censor':
  locfit

Can some one tell me what would be the preferred way of fixing this?

Best,
Andy



Andy Liaw, PhD
Biometrics Research      PO Box 2000, RY33-300     
Merck Research Labs           Rahway, NJ 07065
mailto:andy_liaw at merck.com        732-594-0820


From ripley at stats.ox.ac.uk  Wed Oct  5 18:57:21 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 5 Oct 2005 17:57:21 +0100 (BST)
Subject: [Rd] how do I write Rd file for this?
In-Reply-To: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED4D1@usctmx1106.merck.com>
References: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED4D1@usctmx1106.merck.com>
Message-ID: <Pine.LNX.4.61.0510051750490.23721@gannet.stats>

On Wed, 5 Oct 2005, Liaw, Andy wrote:

> Dear R-devel,
>
> I'm working on Prof. Loader's new version of locfit to try to get it
> pass R CMD check.  I'm almost there, but I have a problem with some Rd
> files that I hope some one can help me resolve.  Here's an example:
>
> In the package there's a function called locfit.censor().  This function
> can be used in a few different ways:
>
> locfit.censor(x, y, cens, ...)
> locfit.censor(formula, ...)

I don't think so (you cannot give named arguments like that?).  What does 
args(locfit.censor) give?

Do you mean that x can be a vector or a formula, and y and cens are 
ignored if x is a formula?  If so that is what you need to say.  E.g.

\usage{
locfit.censor(x, y, cens, \dots)
}
\arguments{
   \item{x}{a vector or a formula ...}
   \item{y, cens}{.... Ignored if \code{x} is a formula.}
   \item{\dots}{....}
}

> locfit(formula, ..., lfproc=locfit.censor)

That's calling another function, locfit,  which presumably you have 
documented elsewhere.

BTW, \synopsis is likely to be deprecated for 2.3.0, so you don't want to 
start using it for new help files now.


> What I did in locfit.censor.Rd is have something like:
>
> \synopsis{
> locfit.censor(x, y, cens, ..., iter=3, km=FALSE)
> }
> \usage{
> locfit(formula, cens=cens, lfproc=locfit.censor)
> locfit.censor(formula, cens, ..., iter=3, km=FALSE)
> }
>
> However, R CMD check gives me:
>
> Undocumented arguments in documentation object 'locfit.censor'
>  formula lfproc
> Documented arguments not in \usage in documentation object
> 'locfit.censor':
>  x y
> Objects in \usage without \alias in documentation object
> 'locfit.censor':
>  locfit
>
> Can some one tell me what would be the preferred way of fixing this?

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From roebuck at wotan.mdacc.tmc.edu  Wed Oct  5 19:01:00 2005
From: roebuck at wotan.mdacc.tmc.edu (Paul Roebuck)
Date: Wed, 5 Oct 2005 12:01:00 -0500 (CDT)
Subject: [Rd] R and Java
In-Reply-To: <3b67376c0510041753g1ec0f3c7jef9ce735731e5d81@mail.gmail.com>
References: <3b67376c0510041753g1ec0f3c7jef9ce735731e5d81@mail.gmail.com>
Message-ID: <Pine.OSF.4.58.0510051155010.103669@wotan.mdacc.tmc.edu>

On Tue, 4 Oct 2005, Vasundhara Akkineni wrote:

> I am a grad student and am working on a project where i
> need to integrate java and R. I have a front end in java
> and i need to call R functions and be able to dispaly the
> plots and graphs produced by R on my java front end. I
> came across some tools like SJava and rserve...but am not
> sure which best suits my application. Your suggestion
> will be really helpful.

If Un*x-based, you can just run R/S-plus as a coprocess,
manipulating the file descriptors such that you can send
input and receive output from the Java GUI. If you tag
output from R, you can grep your tags and display info
for a progress bar.

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From duncan at wald.ucdavis.edu  Wed Oct  5 19:49:32 2005
From: duncan at wald.ucdavis.edu (Duncan Temple Lang)
Date: Wed, 05 Oct 2005 10:49:32 -0700
Subject: [Rd] Fwd:  R and Java
In-Reply-To: <200510051408.49503.jourdren@gmail.com>
References: <3b67376c0510041753g1ec0f3c7jef9ce735731e5d81@mail.gmail.com>	<73dae3060510050448x3aaad2dfi8bf324cf00495597@mail.gmail.com>
	<200510051408.49503.jourdren@gmail.com>
Message-ID: <4344122C.4040905@wald.ucdavis.edu>

Laurent Jourdren wrote:
>>I am a grad student and am working on a project where i need to integrate
>>java and R. I have a front end in java and i need to call R functions and
>>be able to dispaly the plots and graphs produced by R on my java front end.
>>I came across some tools like SJava and rserve...but am not sure which best
>>suits my application. Your suggestion will be really helpful.
> 
> 
> 
> 	The only valuable choice to integrate java and R is rserve.
> 
> 	With RSjava,  data don't persist between 2 two commands, so you can't set a 
> variable in R from java in one instruction and re-use this data in the next 
> instruction.

Unfortunately, this is simply not correct.
Objects don't persist in the global namespace between commands.
The computational model does not use R variables in the
global environment because that is well-established as a poor
approach to software engineering and programming.
Unfortunately it is the approach most inter-system interfaces
have taken and that many users expect.
SJava has a much more flexible computational model
that allows the use of references in the local
language to objects in the foreign system.
And this allows one, for example, to pass R functions as Java
methods, e.g for use in an optimizer implemented in Java
but the function to be optimized being written in R.

Rserve has a different, more traditional computational model
for distributed computing.

> 
> 	Rserve is an client/server library, client is pure java (you can easily 
> deploy it  on *nix and Windows) and each connection has its own object space 
> in R (only under *nix).
> 
> 	Laurent.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From dhinds at sonic.net  Wed Oct  5 20:40:26 2005
From: dhinds at sonic.net (dhinds@sonic.net)
Date: Wed, 5 Oct 2005 18:40:26 +0000 (UTC)
Subject: [Rd] Problems with autoconf example from r-ext.
References: <433C6B7B@webmail.ncl.ac.uk>
	<Pine.LNX.4.61.0510051435040.26864@gannet.stats>
Message-ID: <di16mq$c5q$1@sea.gmane.org>

Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> The current R-exts.texi has

> AC_INIT([RODBC], 1.1.4) dnl package name, version

> and that is crucially different from your example.  Autoconf 2.59 has a 
> barely documented back-compatibility mode than is invoked for AC_INIT with 
> just one argument.

I was tripped up by this same issue, and was not easily able to figure
out from the autoconf documentation how AC_INIT had changed over time.
The one-argument AC_INIT, for the version of autoconf I was using
(2.57), expects its argument to be a path to a file that is relatively
unique to the package.

However, this isn't actually related to the problem at hand:

> > R CMD INSTALL
> > --configure-args='--with-sbmlode-lib=/data/opt/sbmlodesolve/include \
> > --with-sbmlode-include=/data/opt/sbmlodesolve/lib' \
> > SBMLodeSolveR

This is a shell programming error.  Remove the '\' inside your quoted
--configure-args argument.  The backslash causes the newline to be
escaped in the string passed to the configure script, which confuses
the argument parser.  You don't need the backslash because a quoted
string is automatically continued until the closing quote is seen.

-- Dave


From andy_liaw at merck.com  Wed Oct  5 22:17:31 2005
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed, 5 Oct 2005 16:17:31 -0400
Subject: [Rd] bug found in predict.locfit in locfit package ( PR#8057)
Message-ID: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED4D5@usctmx1106.merck.com>

Apologies for the coming to this late...

1. By now I hope Somkiat has realized that R-bugs is not the place to
report problems in contributed packages.  Please direct such reports to
the package maintainer.

2. This is really user error.  predict() expect the newdata to be a data
frame containing variables with the same names as those used in the
fitting process.  E.g., you fitted the model with objects named `y',
`x1' and `x2'.  predict() will try to look for objects by those names,
first in newdata, then in the global environment.  Since you supplied
newdata as data.frame(x1new, x2new), predict() cannot find x1 and x2
there, so it ends up using the copy you have in the global environment.
You need to use newdata=data.frame(x1=x1new, x2=x2new).

FYI, thanks to help from Uwe and Brian, I now have Prof. Loader's new
version of locfit passing R CMD check (using R-2.2.0 beta).  It will be
uploaded to CRAN when Prof. Loader is OK with what I have.

Andy



> From: apipatta at colorado.edu
> 
> Full_Name: Somkiat Apipattanavis
> Version: 2.1.1
> OS: Windows
> Submission from: (NULL) (128.138.44.123)
> 
> 
> Bug found in predict.locfit for density estimation
> 
> # Example of bug found in prdict.locfit (Locfit)
> library('locfit')
> 
> # generate data
> y =c(4281,2497,4346,5588,5593,3474,4291,2542,5195,4056,
>      3114,2864,4904,7625,3377,4001,4999,7191,8062,5668)
> x1=c( 0.258729, 1.460156, 0.192323, 0.067062,-0.304291,
>      -0.420917, 0.214729, 0.239979,-0.421938,-0.571229,
>       1.310990, 2.043032, 0.449906,-0.951917,-0.077104,
>      -0.356833,-0.286042, 0.065750, 0.159677,-0.075792)
> x2=c(-0.3050, 1.0125, 0.2050, 0.1025, 0.9550,
>       0.6975, 1.5550, 0.0225, 0.2575, 0.3725,
>       2.0075, 2.1275, 0.7200, 0.2950, 0.2875,
>      -0.2800,-0.6050, 0.2125,-0.5525,-1.7850)
> 
> ndat=length(y)
> ybk=y
> x1bk=x1
> x2bk=x2
> ######## Joint probability function of y, x1 and x2
> # fit joint probability function
> fityxv=locfit(~y+x1+x2,alpha=1,deg=1)
> fyxv=predict(fityxv,where="data")
> 
> ######## Marginal distribution of gxv
> # fit marginal distribution of y
> fitxv=locfit(~x1+x2,alpha=0.5,deg=1)
> gxv=predict(fitxv,where="data")
> 
> ######## Prediction of fyxv and gxv
> # new data
> vx1=0.2
> vx2=0.7
> x1new=rep(vx1,ndat)
> x2new=rep(vx2,ndat)
> ynew=y
> 
> # marginal distribution of gxv for new data
> newdata=data.frame(x1new,x2new)
> gxvnew=predict(fitxv,newdata)   #bug!!! gave the same values as gxv
> 
> # This bug can be avoid by setting new values into old variables
> # then, we will get the new predicted values
> # for example
> x1=x1new
> x2=x2new
> gxvnew2=predict(fitxv,where="data")
> 
> # predict joint probability function of fyxv for new data
> newdat2=data.frame(ynew,x1new,x2new)
> fyxvnew=predict(fityxv,newdat2) #bug! same as 2D density
> 
> # but setting new values into old variables DOES NOT
> # work for solving this kind of problem for 3D density
> # for example
> x1=x1bk
> x2=x2bk
> fyxvnew2=predict(fityxv,where="data")
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 
>


From giles_pg at midcoast.com  Thu Oct  6 06:19:12 2005
From: giles_pg at midcoast.com (Jane Giles)
Date: Thu, 06 Oct 2005 04:19:12 +0000
Subject: [Rd] Will these Shares Go higher?
Message-ID: <JHNAICKFPKBEANDADMMNGJMIGEAA.giles_pg@midcoast.com>

Undiscovered Gem St0ck_Report

Company Profile:
+++++++++++++++++++++++++++++++++++++++++++++++++
CEO AMERICA INC.

Symbol: CEOA . pk
Recent Price: $3.00
Expected Trading Range: $5.50 - $6.00 (post split)
Shares Outstanding: 35M (est.)
Float (est.): 5M
++++++++++++++++++++++++++++++++++++++++++++++++++


This st0ck has just started a Major PR Campaign!!
How will it react to th0usands of investors 
in the know now?

Could this be some fast cash?
We are expecting a explosion in the price.
Don't wait act early watch this one trade Thursday
and ALL following days!!

*Read Below Why we think this one is going to take 
off this week with this major PR campaign.

Recent News Headlines Late September:

 1. CEO America announces 3 for 1 forward split.

 2. Sales and marketing expertise joins CEO America

 3. Creditz used to fund local education foundation


*Goto Your Favorite Financial Site to read the Full Stories!


CEO America, Inc. is the sole licensee of the Creditz 
Digital Currency System - Creditz is the worlds first 
digital currency, transforming cash, reward points, and 
miles into digital form enabling secure transactions in 
retail stores, online, and wireless.  

CEOA believes it will generate approximately $45M in 
revenue its first full year of operations as a Digital 
Currency Vendor, commencing in 2006 and will produce 
$25OM, with net income of $35M in calendar 2007.

                  
Partners & Alliances:
IBM
MERRILL LYNCH
FIRST DATA
VERIFONE
SCRIP ADVANTAGE
*In negotiations with national retailers  

Editors Pick:    

We have selected CEOA as an editors pick based on the 
following fundamentals:

1. Strong Management
2. World-Class Partners
3. Cutting Edge Technology
4. Secure Financing
5. High Consumer Demand
6. Undervalued (Post-Split)
        
CEOA is postured to dominate the retail community in the US 
and internationally. 

Researchers say Creditz is fast becoming the countrys foremost 
choice of currency in e-commerce, a $2O_bill10n a year industry.

________________________________________


This is a marketing and information firm, and is n0t a financial 
analyst. This report is based on independent analysis but also 
relies on information supplied by sources believed to be reliable. 
This report may or may not be the opinion of CEOAs management. 
We have been retained to reprint and distribute this information. 
We have not been compensated by CEOA. Compensation was made by a 
third party investor of CEOA The Market Invest0r_Al3rt and its 
officers and directors may from time to time buy and sell CEOA 
shares in the open market without notice. Ongoing technical 
analysis may from time to time cause the target price to fluctuate
 without notice. The information contained in this report is not 
intended to be, and shall not constitute, an offer to sell or 
s0licitation of any offer to buy any security. This report contains 
f0rw4rd-l00k1ng_st4tem3nts, which involve risks and uncertainties 
that may cause actual results to differ materially from those 
set forth in the f0rw4rd-l00k1ng_st4tem3nts.It is intended for 
information only. Consult with your financial advisor about CEOA.
To be removed from our data base please Email us NOSTK at Yahoo.com


From jfontain at free.fr  Thu Oct  6 10:56:54 2005
From: jfontain at free.fr (jfontain@free.fr)
Date: Thu, 06 Oct 2005 10:56:54 +0200
Subject: [Rd] arima: segmentation fault
Message-ID: <1128589014.4344e6d65d37d@imp6-g19.free.fr>

(please CC me as I have attempted to subscribe but got no reply)

> arima(t, order = c(0, 0, 0), seasonal = list(order = c(1, 0, 2), period =
168))

Program received signal SIGSEGV, Segmentation fault.
0xb77e405a in getQ0 (sPhi=0xae17fc, sTheta=0xc8) at arima.c:775
775                     rbar[ithisr++] = cbar * rbthis + sbar * xk;
(gdb)

What should I do about this? Do you want the data file?
Please let me know what I can do to help.

Many thanks in advance,

--
Jean-Luc


From ulf.lindstroem at imr.no  Thu Oct  6 10:59:23 2005
From: ulf.lindstroem at imr.no (ulf.lindstroem@imr.no)
Date: Thu,  6 Oct 2005 10:59:23 +0200 (CEST)
Subject: [Rd] How do I install rbugs ? (PR#8183)
Message-ID: <20051006085923.9F5431DD92@slim.kubism.ku.dk>

Dear rbugs,

6 month a ago the homepage of R showed how I could install and do a =
test-Run of rbugs. This information is not available anymore. I would =
appreciate if you could help me installing rbugs and making wun =
properly.

All the best,

Ulf Lindstr=F8m

Forsker/Scientist
Havforskningsinstituttet/Institute of Marine Research
Avd. Troms=F8/Troms=F8 Branch
Sykehusveien 23
PB 6404
N-9294 Troms=F8
Tlf.: + 47 77 60 97 28
Faks/Fax: + 47 77 60 97 01
E-mail: ulf.lindstroem at imr.no
Internett: imr.no

=20


From ligges at statistik.uni-dortmund.de  Thu Oct  6 11:31:03 2005
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu,  6 Oct 2005 11:31:03 +0200 (CEST)
Subject: [Rd] How do I install rbugs ? (PR#8183)
Message-ID: <20051006093103.736381E71E@slim.kubism.ku.dk>

ulf.lindstroem at imr.no wrote:

> Dear rbugs,
> 
> 6 month a ago the homepage of R showed how I could install and do a =
> test-Run of rbugs. This information is not available anymore. I would =
> appreciate if you could help me installing rbugs and making wun =
> properly.

This is not a bug in any sense. Please use the R-help list for 
questions! Please do read about what a bug is and notice that manual 
work is required to delete your bug report from the database again.

Additionally, I do not understand your message at all, because the 
package "rbugs" *is* available from CRAN, the current source tarball is:
rbugs_0.3-1.tar.gz


Uwe Ligges



> All the best,
> 
> Ulf Lindstr=F8m
> 
> Forsker/Scientist
> Havforskningsinstituttet/Institute of Marine Research
> Avd. Troms=F8/Troms=F8 Branch
> Sykehusveien 23
> PB 6404
> N-9294 Troms=F8
> Tlf.: + 47 77 60 97 28
> Faks/Fax: + 47 77 60 97 01
> E-mail: ulf.lindstroem at imr.no
> Internett: imr.no
> 
> =20
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From Roger.Bivand at nhh.no  Thu Oct  6 11:33:47 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu, 6 Oct 2005 11:33:47 +0200 (CEST)
Subject: [Rd] How do I install rbugs ? (PR#8183)
In-Reply-To: <20051006085923.9F5431DD92@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.44.0510061130240.2837-100000@reclus.nhh.no>

On Thu, 6 Oct 2005 ulf.lindstroem at imr.no wrote:

> Dear rbugs,
> 
> 6 month a ago the homepage of R showed how I could install and do a =
> test-Run of rbugs. This information is not available anymore. I would =
> appreciate if you could help me installing rbugs and making wun =
> properly.

Please NEVER use the R-bugs reporting system unless you are absolutely 
sure that you are reporting a major failure in the software - do read the 
guidance notes! Especially on release day, reporting non-bugs does raise 
pressure unnecessarily.

Google on "rbugs" gives:

http://cran.r-project.org/src/contrib/Descriptions/rbugs.html

Please also read http://www.r-project.org/posting-guide.html carefully.

> 
> All the best,
> 
> Ulf Lindstr=F8m
> 
> Forsker/Scientist
> Havforskningsinstituttet/Institute of Marine Research
> Avd. Troms=F8/Troms=F8 Branch
> Sykehusveien 23
> PB 6404
> N-9294 Troms=F8
> Tlf.: + 47 77 60 97 28
> Faks/Fax: + 47 77 60 97 01
> E-mail: ulf.lindstroem at imr.no
> Internett: imr.no
> 
> =20
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From ripley at stats.ox.ac.uk  Thu Oct  6 11:48:06 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 6 Oct 2005 10:48:06 +0100 (BST)
Subject: [Rd] arima: segmentation fault
In-Reply-To: <1128589014.4344e6d65d37d@imp6-g19.free.fr>
Message-ID: <Pine.GSO.4.31.0510061034140.2035-100000@toucan.stats>

A seasonal ARIMA model with period 168 is normally unrealistic: how long
is the series?  This model has several hundred parameters.

I suggest you try arima0, as that is likely to use less memory, but either
is going to be inefficient as you are essentially fitting 168 separate
ARMA(1, 2) models for (I guess) each hour of the week.

(The basic information we ask for in the posting guide such as the version
of R and your platform is missing here.)

On Thu, 6 Oct 2005 jfontain at free.fr wrote:

> (please CC me as I have attempted to subscribe but got no reply)
>
> > arima(t, order = c(0, 0, 0), seasonal = list(order = c(1, 0, 2), period =
> 168))
>
> Program received signal SIGSEGV, Segmentation fault.
> 0xb77e405a in getQ0 (sPhi=0xae17fc, sTheta=0xc8) at arima.c:775
> 775                     rbar[ithisr++] = cbar * rbthis + sbar * xk;
> (gdb)
>
> What should I do about this? Do you want the data file?
> Please let me know what I can do to help.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From plummer at iarc.fr  Thu Oct  6 11:59:14 2005
From: plummer at iarc.fr (Martyn Plummer)
Date: Thu, 06 Oct 2005 11:59:14 +0200
Subject: [Rd] How do I install rbugs ? (PR#8183)
In-Reply-To: <Pine.LNX.4.44.0510061130240.2837-100000@reclus.nhh.no>
References: <Pine.LNX.4.44.0510061130240.2837-100000@reclus.nhh.no>
Message-ID: <1128592754.3544.19.camel@seurat>

On Thu, 2005-10-06 at 11:33 +0200, Roger Bivand wrote:
> On Thu, 6 Oct 2005 ulf.lindstroem at imr.no wrote:
> 
> > Dear rbugs,
> > 
> > 6 month a ago the homepage of R showed how I could install and do a =
> > test-Run of rbugs. This information is not available anymore. I would =
> > appreciate if you could help me installing rbugs and making wun =
> > properly.
> 
> Please NEVER use the R-bugs reporting system unless you are absolutely 
> sure that you are reporting a major failure in the software - do read the 
> guidance notes! Especially on release day, reporting non-bugs does raise 
> pressure unnecessarily.
> 
> Google on "rbugs" gives:
> 
> http://cran.r-project.org/src/contrib/Descriptions/rbugs.html
> 
> Please also read http://www.r-project.org/posting-guide.html carefully.

This looks like a semantic error. The address R-bugs is not a mailing
list for the discussion of R and BUGS (Bayesian Inference using Gibbs
Sampling), but for reporting "bugs" (i.e. programming errors) in R. A
moment of research would have revealed this. 

Ulf is probably thinking of the article published in R news by Sun Yan,
co-author of the rbugs package. It is still available:

http://cran.r-project.org/doc/Rnews/

Martyn

-----------------------------------------------------------------------
This message and its attachments are strictly confidential. ...{{dropped}}


From plummer at iarc.fr  Thu Oct  6 12:04:47 2005
From: plummer at iarc.fr (plummer@iarc.fr)
Date: Thu,  6 Oct 2005 12:04:47 +0200 (CEST)
Subject: [Rd] How do I install rbugs ? (PR#8183)
Message-ID: <20051006100447.0CF101DDAD@slim.kubism.ku.dk>

On Thu, 2005-10-06 at 11:33 +0200, Roger Bivand wrote:
> On Thu, 6 Oct 2005 ulf.lindstroem at imr.no wrote:
> 
> > Dear rbugs,
> > 
> > 6 month a ago the homepage of R showed how I could install and do a =
> > test-Run of rbugs. This information is not available anymore. I would =
> > appreciate if you could help me installing rbugs and making wun =
> > properly.
> 
> Please NEVER use the R-bugs reporting system unless you are absolutely 
> sure that you are reporting a major failure in the software - do read the 
> guidance notes! Especially on release day, reporting non-bugs does raise 
> pressure unnecessarily.
> 
> Google on "rbugs" gives:
> 
> http://cran.r-project.org/src/contrib/Descriptions/rbugs.html
> 
> Please also read http://www.r-project.org/posting-guide.html carefully.

This looks like a semantic error. The address R-bugs is not a mailing
list for the discussion of R and BUGS (Bayesian Inference using Gibbs
Sampling), but for reporting "bugs" (i.e. programming errors) in R. A
moment of research would have revealed this. 

Ulf is probably thinking of the article published in R news by Sun Yan,
co-author of the rbugs package. It is still available:

http://cran.r-project.org/doc/Rnews/

Martyn

-----------------------------------------------------------------------
This message and its attachments are strictly confidential. ...{{dropped}}


From jfontain at free.fr  Thu Oct  6 12:27:12 2005
From: jfontain at free.fr (jfontain@free.fr)
Date: Thu, 06 Oct 2005 12:27:12 +0200
Subject: [Rd] arima: segmentation fault
In-Reply-To: <Pine.GSO.4.31.0510061034140.2035-100000@toucan.stats>
References: <Pine.GSO.4.31.0510061034140.2035-100000@toucan.stats>
Message-ID: <1128594432.4344fc005ac9d@imp3-g19.free.fr>

Quoting Prof Brian Ripley <ripley at stats.ox.ac.uk>:

> A seasonal ARIMA model with period 168 is normally unrealistic: how long
> is the series?  This model has several hundred parameters.

The series is 1000 long.

> I suggest you try arima0, as that is likely to use less memory, but either
> is going to be inefficient as you are essentially fitting 168 separate
> ARMA(1, 2) models for (I guess) each hour of the week.

Correct guess! ARIMA gave me good results using the last 336 samples as input,
so I though I'd try with the whole 1000. I am abviously not an expert
statistician and I am working on a brute force approach by trying all the p, d,
q and P, D, Q seasonal parameters...

> (The basic information we ask for in the posting guide such as the version
> of R and your platform is missing here.)

Sorry:
R : Copyright 2005, The R Foundation for Statistical Computing
Version 2.1.1  (2005-06-20), ISBN 3-900051-07-0
  on
a Linux Fedora Core 3 machine with 2 Xeon processors:
Linux version 2.6.10 (gcc version 3.4.2 20041017 (Red Hat 3.4.2-6.fc3)) #1 SMP

Thanks for your help!



--
Jean-Luc


From bhs2 at mevik.net  Thu Oct  6 13:30:57 2005
From: bhs2 at mevik.net (=?iso-8859-1?q?Bj=F8rn-Helge_Mevik?=)
Date: Thu, 06 Oct 2005 13:30:57 +0200
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
In-Reply-To: <x27jcsnpe9.fsf@viggo.kubism.ku.dk> (Peter Dalgaard's message
	of "05 Oct 2005 14:01:50 +0200")
References: <50214.194.57.165.22.1128511281.squirrel@webmail.lyon.inserm.fr>
	<x27jcsnpe9.fsf@viggo.kubism.ku.dk>
Message-ID: <m0hdbuvq4u.fsf@bar.nemo-project.org>

Peter Dalgaard wrote:

> You could still have a point, but with 255^2 terms (all but 255 of
> which will be redundant since x^2 == x:x == x in modeling language).
> Presumably someone thought that noone in their right mind would
> specify 65000 terms...

I don't think this is a fixed limit on the number of terms: On "my" R
(see below),

set.seed(123)
x1 <- runif(1000)
x2 <- runif(1000)
x3 <- runif(1000)
x4 <- runif(1000)
x5 <- runif(1000)
x6 <- runif(1000)
x7 <- runif(1000)
x8 <- runif(1000)
x9 <- runif(1000)
x10 <- runif(1000)
y <- rnorm(1000)
fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8*x9)^2)

works fine, but

fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8*x9*x10)^2)

crashes.


> version
         _                
platform i686-pc-linux-gnu
arch     i686             
os       linux-gnu        
system   i686, linux-gnu  
status                    
major    2                
minor    1.1              
year     2005             
month    06               
day      20               
language R                

The OS is Debian 3.1, the machine has 512MB RAM, and R was compiled
"out of the box" from the official sources.

-- 
Bj?rn-Helge Mevik


From ripley at stats.ox.ac.uk  Thu Oct  6 13:51:32 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 6 Oct 2005 12:51:32 +0100 (BST)
Subject: [Rd] R crashes for large formulas in lm() (PR#8180)
In-Reply-To: <m0hdbuvq4u.fsf@bar.nemo-project.org>
Message-ID: <Pine.GSO.4.31.0510061248320.2328-100000@toucan.stats>

Please see earlier in this thread, where the cause has already been
identified.

This resulted from C stack overflow, which is _very_ OS-specific (and may
even vary by shell). The author used recursion on terms which is not
necessary but not a problem for a modest number of terms.

On Thu, 6 Oct 2005, [iso-8859-1] Bjrn-Helge Mevik wrote:

> Peter Dalgaard wrote:
>
> > You could still have a point, but with 255^2 terms (all but 255 of
> > which will be redundant since x^2 == x:x == x in modeling language).
> > Presumably someone thought that noone in their right mind would
> > specify 65000 terms...
>
> I don't think this is a fixed limit on the number of terms: On "my" R
> (see below),
>
> set.seed(123)
> x1 <- runif(1000)
> x2 <- runif(1000)
> x3 <- runif(1000)
> x4 <- runif(1000)
> x5 <- runif(1000)
> x6 <- runif(1000)
> x7 <- runif(1000)
> x8 <- runif(1000)
> x9 <- runif(1000)
> x10 <- runif(1000)
> y <- rnorm(1000)
> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8*x9)^2)
>
> works fine, but
>
> fit <- lm(y~(x1*x2*x3*x4*x5*x6*x7*x8*x9*x10)^2)
>
> crashes.
>
>
> > version
>          _
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status
> major    2
> minor    1.1
> year     2005
> month    06
> day      20
> language R
>
> The OS is Debian 3.1, the machine has 512MB RAM, and R was compiled
> "out of the box" from the official sources.
>
> --
> Bjrn-Helge Mevik
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From joehl at gmx.de  Thu Oct  6 18:38:05 2005
From: joehl at gmx.de (=?ISO-8859-1?Q?=22Jens_Oehlschl=E4gel=22?=)
Date: Thu, 6 Oct 2005 18:38:05 +0200 (MEST)
Subject: [Rd] Subscripting fails if name of element is "" (PR#8161)
Message-ID: <14643.1128616685@www34.gmx.net>

Dear Thomas,

> This looks deliberate (there is a function NonNullStringMatch that does 
> the matching).  I assume this is because there is no other way to 
> indicate that an element has no name.

> If so, it is a documentation bug -- help(names) and FAQ 7.14 should 
> specify this behaviour.  Too late for 2.2.0, unfortunately.

I respectfully disagree: the element has a name, its an empty string. Of
course "" is a doubtful name for an element, but as long as we allow this
name when assigning names()<- we also should handle it like a name in
subscripting. The alternative would be to disallow "" in names at all.
However, both alternatives rather look like code changes, not only
documentation. 

Best regards


Jens Oehlschl?gel

-- 
Highspeed-Freiheit. Bei GMX superg?nstig, z.B. GMX DSL_Cityflat,


From bvesperman at wisc.edu  Thu Oct  6 19:22:48 2005
From: bvesperman at wisc.edu (Brian Vesperman)
Date: Thu, 06 Oct 2005 12:22:48 -0500
Subject: [Rd] .Net Framework Wrapper
Message-ID: <001901c5ca9a$92b9c670$0f2b6880@ad.education.wisc.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051006/0855f3a6/attachment.pl

From duncan at wald.ucdavis.edu  Thu Oct  6 23:12:34 2005
From: duncan at wald.ucdavis.edu (Duncan Temple Lang)
Date: Thu, 06 Oct 2005 14:12:34 -0700
Subject: [Rd] .Net Framework Wrapper
In-Reply-To: <001901c5ca9a$92b9c670$0f2b6880@ad.education.wisc.edu>
References: <001901c5ca9a$92b9c670$0f2b6880@ad.education.wisc.edu>
Message-ID: <43459342.3000009@wald.ucdavis.edu>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


Cyrus Harmon has used the same approach to interface R to Lisp
and I recently discussed this with him. He has gotten a long way.

I have developed a "lot" of inter-system interfaces and I
hadn't really considered going this route, i.e. interfacing
to the C routines in the R API or further still those
not necessarily "published" in the DLL.  I tend to work
at higher level with a very thin engine that
connects the two systems.  Instead of calling,
for example, Rf_parse() (or whatever) and the Rf_eval(),
I create a very general C routine that can call an arbitrary R function
and with arbitrary arguments. Then I can call the R function parse().
Then I can also call the R function eval(). And the nice thing about
this is that error handling is done correctly.
If you call Rf_parse() at the C-level, where will you return
to if there is an error.

I have waited to interface to .Net until there appeared to be a need
for it. But I had planned on using the approach for interfacing to
other systems, i.e. using the thin engine.
I will be interested to compare the relative merits of your approach.
You have access to every aspect of R and can build the interface
in either language. So in principal, you can do everything in
a variety of languages.

  D.

Brian Vesperman wrote:
> I am going to attempt to develop a wrapper for the R.dll library in the .Net
> framework. 
> 
>  
> 
> I successfully interfaced with some very simple functions from the library,
> but nothing close to do some data analysis.
> 
>  
> 
> I dumped all the "publicly" available functions and attributes from the
> windows dll and found there are 2671 functions and attributes.
> 
>  
> 
> I created an API document that just has the function signatures and what
> code file I found the function in; I have links to the file below:
> 
>  
> 
> http://valueadded.wceruw.org/LinkClick.aspx?link=R-API.pdf
> <http://valueadded.wceruw.org/LinkClick.aspx?link=R-API.pdf&tabid=36&mid=377
> 
>>&tabid=36&mid=377 PDF file
> 
> 
> http://valueadded.wceruw.org/LinkClick.aspx?link=R-API.doc
> <http://valueadded.wceruw.org/LinkClick.aspx?link=R-API.doc&tabid=36&mid=377
> 
>>&tabid=36&mid=377 MS Word life
> 
> 
>  
> 
>  
> 
> If this information is useful to anyone else please contact me. If there is
> any interest to expand this document, I might setup some sort of help file
> Wiki where people could add to the documentation.
> 
>  
> 
> If anyone would like to join my effort please contact me. Hopefully it
> doesn't become too difficult and I will be able to make some headway.
> 
>  
> 
>  
> 
> Brian Vesperman
> 
> Associate Information Processing Consultant
> 
> Wisconsin Center for Education Research
> 
> RM 772
> 
> 1025 W. Johnson St
> 
> Madison WI, 53706
> 
> 608-265-5623
> 
>  
> 
> 
> 	[[alternative HTML version deleted]]
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

- --
Duncan Temple Lang                duncan at wald.ucdavis.edu
Department of Statistics          work:  (530) 752-4782
371 Kerr Hall                     fax:   (530) 752-7099
One Shields Ave.
University of California at Davis
Davis, CA 95616, USA
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (Darwin)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFDRZNC9p/Jzwa2QP4RAl/MAJ0axT/rpc36jvcoInScMd+nXYQ8WQCdEjVB
d9aD4Yrc/5m5Twbu8n//n2o=
=gQdX
-----END PGP SIGNATURE-----


From ripley at stats.ox.ac.uk  Thu Oct  6 23:41:35 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 6 Oct 2005 22:41:35 +0100 (BST)
Subject: [Rd] Subscripting fails if name of element is "" (PR#8161)
In-Reply-To: <14643.1128616685@www34.gmx.net>
References: <14643.1128616685@www34.gmx.net>
Message-ID: <Pine.LNX.4.61.0510062158040.10139@gannet.stats>

On Thu, 6 Oct 2005, "Jens Oehlschl?gel" wrote:

> Dear Thomas,
>
>> This looks deliberate (there is a function NonNullStringMatch that does
>> the matching).  I assume this is because there is no other way to
>> indicate that an element has no name.
>
>> If so, it is a documentation bug -- help(names) and FAQ 7.14 should
>> specify this behaviour.  Too late for 2.2.0, unfortunately.
>
> I respectfully disagree: the element has a name, its an empty string. Of
> course "" is a doubtful name for an element, but as long as we allow this
> name when assigning names()<- we also should handle it like a name in
> subscripting. The alternative would be to disallow "" in names at all.
> However, both alternatives rather look like code changes, not only
> documentation.

I think Thomas is right as to how S interprets this: "" is no name on 
assignment, wheread NA as a name is a different thing (there probably is a 
name, we just do not know what it is).

Here is the crux of the example.

p <- c(a=1, 2)
> p <- c(a=1, 2)
> names(p)
[1] "a" ""
> p
a
1 2
> p2 <- c(1,2)
> names(p2) <- c("a", "")
> identical(p, p2)
[1] TRUE

so giving the name is "" really is the same as giving no name.

`Error 1' is said to be

> p[""]
<NA>
   NA

You haven't given a name, so I think that is right.  S (which has no 
character NAs) uses "" as the name, but here there may be a name or not.

> P <- list(a=1, 2)

I think Jens then meant as `error 2' that

> P
$a
[1] 1

[[2]]
[1] 2

shows no name for the second element, and that seems right to me (although 
S shows "" here).

Finally (`error 3')

> P[""]
$"NA"
NULL

is a length-one list with name character-NA.  (S has no name here.)  That 
seems the right answer but if so is printed inconsistently.

I would say that

> Q <- list(1, 2)
> names(Q) <- c("a", NA)
> Q
$a
[1] 1

$"NA"
[1] 2

was the only bug here (the name should be printed as <NA>).  Now that
comes from this bit of code

 		    if( isValidName(CHAR(PRINTNAME(TAG(s)))) )
 			sprintf(ptag, "$%s", CHAR(PRINTNAME(TAG(s))));
 		    else
 			sprintf(ptag, "$\"%s\"", CHAR(PRINTNAME(TAG(s))));

so non-syntactic names are printed surrounded by "".  Nowadays I think we 
would prefer ``, as in

> A <- list("a+b"=1)
> A
$"a+b"
[1] 1

> A$"a+b"
[1] 1
> A$`a+b`
[1] 1

but NA needs to be a special case as in

> A <- list(1, 2)
> names(A) <- c("NA", NA)
> A
$"NA"
[1] 1

$"NA"
[1] 2

> is.na(names(A))
[1] FALSE  TRUE


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From pkleiweg at xs4all.nl  Fri Oct  7 00:06:56 2005
From: pkleiweg at xs4all.nl (Peter Kleiweg)
Date: Fri, 7 Oct 2005 00:06:56 +0200 (CEST)
Subject: [Rd] Building packages on Windows fails
Message-ID: <Pine.LNX.4.63.0510070000210.1079@kleigh.nl>


What has changed in R for Windows from version 1.7.1 to
2.2.0 that won't allow me to build binary packages?

On 1.7.1 I built a packge with this command:

    Rcmd build --force --binary iL04

On 2.2.0 this fails. First I had to copy sh.exe from d:\bin to 
c:\bin. This got me over the first hurdle. But then I got stuck 
at a later point. Here are the last lines of output:

---------- Making package iL04 ------------
latex: not found
  adding build stamp to DESCRIPTION
latex: not found
latex: not found
latex: not found
  installing R files
latex: not found
  installing demos
  installing data files
latex: not found
  installing man source files
  installing indices
cat: d:/R-2.2.0/library/*/CONTENTS: No such file or directory
make[2]: *** [indices] Error 1
make[1]: *** [all] Error 2
make: *** [pkg-iL04] Error 2
*** Installation of iL04 failed ***

-- 
Peter Kleiweg


From murdoch at stats.uwo.ca  Fri Oct  7 04:33:08 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu, 6 Oct 2005 22:33:08 -0400 (EDT)
Subject: [Rd] Building packages on Windows fails
In-Reply-To: <Pine.LNX.4.63.0510070000210.1079@kleigh.nl>
References: <Pine.LNX.4.63.0510070000210.1079@kleigh.nl>
Message-ID: <Pine.LNX.4.62.0510062230530.6985@fisher.stats.uwo.ca>



On Fri, 7 Oct 2005, Peter Kleiweg wrote:

>
> What has changed in R for Windows from version 1.7.1 to
> 2.2.0 that won't allow me to build binary packages?

Many things have changed; I don't know which is causing the failure you 
see.  One change is that instructions are now collected in the 
Installation and Administration manual. Try following the setup 
instructions there and see if it still fails.

Duncan Murdoch

>
> On 1.7.1 I built a packge with this command:
>
>    Rcmd build --force --binary iL04
>
> On 2.2.0 this fails. First I had to copy sh.exe from d:\bin to
> c:\bin. This got me over the first hurdle. But then I got stuck
> at a later point. Here are the last lines of output:
>
> ---------- Making package iL04 ------------
> latex: not found
>  adding build stamp to DESCRIPTION
> latex: not found
> latex: not found
> latex: not found
>  installing R files
> latex: not found
>  installing demos
>  installing data files
> latex: not found
>  installing man source files
>  installing indices
> cat: d:/R-2.2.0/library/*/CONTENTS: No such file or directory
> make[2]: *** [indices] Error 1
> make[1]: *** [all] Error 2
> make: *** [pkg-iL04] Error 2
> *** Installation of iL04 failed ***
>
> -- 
> Peter Kleiweg
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From oehl_list at gmx.de  Fri Oct  7 14:09:46 2005
From: oehl_list at gmx.de (=?ISO-8859-1?Q?=22Jens_Oehlschl=E4gel=22?=)
Date: Fri, 7 Oct 2005 14:09:46 +0200 (MEST)
Subject: [Rd] Subscripting fails if name of element is "" (PR#8161)
Message-ID: <20906.1128686986@www81.gmx.net>

Dear Brian,

Thanks for picking this up. 
I think the critical point is that it is not a single isolated bug and it
would be a main effort to get this stuff consistent, because it (and
implications) seems to be spread all over the code. The to be applauded
efforts to properly sort out "NA" vs. as.character(NA) have not been fully
successful yet and "" is a similar issue. Please consider the following,
sorry for the length:


# ERROR 1

# I agree that c() disallows "" and NA names
# it makes sense discouraging users from using such names

> c(as.character(NA)=1)
Fehler: Syntaxfehler in Zeile "c(as.character(NA)="
> c("NA"=2, "a"=3)
NA  a 
 2  3 
> c(""=4)
Fehler: Versuch einen Variablennamen der L?nge 0 zu nutzen

# however, "NA" must be expected as a legal name, e.g. when importing data
# and in your example specifying "no-name" in fact results in a "" name

> names(c(a=1, 2))
[1] "a" "" 
> 

# My interpreteation is that the user specifies a mixture of elements with
and without names, 
# and therefore the no-names must be co-erced to "" names, and in principle
that's completely fine

# a character vector is defined to have either as.character(NA) OR "NA" OR
"" or another positive length string 
# (which is complicated enough)
# formally the names is an attribute (character vector) of an object and can
be manipulated as such

> x <- 1:4
> names(x) <- c(NA, "NA", "a", "")
> names(x)
[1] NA   "NA" "a"  ""  
> # and in principle all of those can be properly distinguished
> x[match(names(x), names(x))]
<NA>   NA    a      
   1    2    3    4 


# introducing a fifth non-name state that sometimes equals "" and sometimes
not, introduces inconsistency into the language
# e.g. the fact that elements can be selected by their name but not by their
non-name
# Thus currently selecting by names is a mess from a consistency perspective


> x[names(x)]
<NA> <NA>    a <NA> 
   1    1    3   NA 
 
# in the following subscripting with "" works, but not with "NA"
> for (i in names(x))
+ print(x[[i]])
[1] 1
[1] 1
[1] 3
[1] 4


# ERROR 1a: If failing on "NA" is not a bug, I switch from programming to
Kafka
> x["NA"]
<NA> 

   1 
# ERROR 1b: clearly wrong
> x[["NA"]]
[1] 1
# ERROR 1c: and from my humble understanding failing on "" is a bug as well 
> x[""]
<NA> 
  NA 
# wheras interestingly this is correct
> x[[""]]
[1] 4

  
# I think it is obvious how to remove these inconsistencies 
# (as long as we do not disallow "" in names alltogether, 
#  which is almost impossible, since every users legally can set the names
vector in a variety of ways )
 
# these are not easy, but perfectly fine
> x[as.character(NA)]
<NA> 
   1 
> x[as.integer(NA)]
<NA> 
  NA 
 
# and these are really debatable difficult ones
> x[NA]
<NA> <NA> <NA> <NA> 
  NA   NA   NA   NA 
> x[as.logical(NA)]
<NA> <NA> <NA> <NA> 
  NA   NA   NA   NA 



## ERROR 2+3: the above inconsistencies generalize to lists

lx <- as.list(x)

> lx
$"NA"		(ERROR 2a)
[1] 1

$"NA"
[1] 2

$a
[1] 3

[[4]]		(ERROR 2b)
[1] 4

# and should read 

> lx
$NA		(  or $as.character(NA) for clarity and warning )
[1] 1

$"NA"
[1] 2

$a
[1] 3

$""
[1] 4


# Note that - except for printing - match works perfectly in 
> lx[match(names(lx), names(lx))]
$"NA"
[1] 1

$"NA"
[1] 2

$a
[1] 3

[[4]]
[1] 4

# and also in 
> for (i in match(names(lx), names(lx)))
+ print(lx[[i]])
[1] 1
[1] 2
[1] 3
[1] 4


# Of course I consider the following behaviour as inconsistent
> lx[names(lx)]
$"NA"
[1] 1

$"NA"
[1] 1		(ERROR 3a)

$a
[1] 3

$"NA"
NULL		(ERROR 3b)


# using [[ the second one fails
> for (i in names(lx))
+ print(lx[[i]])
[1] 1
[1] 1		(ERROR 3c)
[1] 3
[1] 4		(interestingly correct)


# finally note that this works
> eval(substitute(lx$y, list(y=as.character(NA))))
# but not this
> get("$")(lx, as.character(NA))
Fehler in get("$")(lx, as.character(NA)) : ung?ltiger Indextyp
# and both go wrong with "NA"

--


From blindglobe at gmail.com  Fri Oct  7 14:48:01 2005
From: blindglobe at gmail.com (blindglobe@gmail.com)
Date: Fri,  7 Oct 2005 14:48:01 +0200 (CEST)
Subject: [Rd] new.packages() problem (PR#8185)
Message-ID: <20051007124801.C65101E546@slim.kubism.ku.dk>

Full_Name: AJ Rossini
Version: 2.2.0
OS: Unix
Submission from: (NULL) (160.62.4.10)


new.packages() reports on packages which are installed as well as not installed,
for packages installed using install.packages() and the argument
installWithVers=TRUE

This contrasts with reporting only on uninstalled packages (correct behavior)
for packages installed using install.packages() and the argument
installWithVers=FALSE.

i.e. 

install.packages(new.packages(),installWithVers=TRUE)   run again and again will
keep installing the same packages.

install.packages(new.packages())  run again and again will only install the
packages once.


From pkleiweg at xs4all.nl  Fri Oct  7 15:09:35 2005
From: pkleiweg at xs4all.nl (Peter Kleiweg)
Date: Fri, 7 Oct 2005 15:09:35 +0200 (CEST)
Subject: [Rd] Building packages on Windows fails
In-Reply-To: <Pine.LNX.4.62.0510062230530.6985@fisher.stats.uwo.ca>
References: <Pine.LNX.4.63.0510070000210.1079@kleigh.nl>
	<Pine.LNX.4.62.0510062230530.6985@fisher.stats.uwo.ca>
Message-ID: <Pine.LNX.4.63.0510071457290.1081@kleigh.nl>

Duncan Murdoch schreef op de 6e dag van de wijnmaand van het jaar 2005:

> On Fri, 7 Oct 2005, Peter Kleiweg wrote:
> 
> > 
> > What has changed in R for Windows from version 1.7.1 to
> > 2.2.0 that won't allow me to build binary packages?
> 
> Many things have changed; I don't know which is causing the failure you see.
> One change is that instructions are now collected in the Installation and
> Administration manual. Try following the setup instructions there and see if
> it still fails.

I can't find anything on building packages for Windows in that 
manual.

I did find a solution to the problem. On a Linux install, each 
package has a file CONTENTS. These are missing from the Windows 
install. I copied those files from my Linux install to my 
Windows install, and then I could build my own package. So I 
guess, these CONTENTS files should be included in the Windows 
install.

I got another error message when I remove a package, but I 
couldn't see what effect this error has. When I run:

    d:\>Rcmd REMOVE iL04

The package gets removed, but I get:

    make: *** No rule to make target `indices'.  Stop.


> > ---------- Making package iL04 ------------
> >  adding build stamp to DESCRIPTION
> >  installing R files
> >  installing demos
> >  installing data files
> >  installing man source files
> >  installing indices
> > cat: d:/R-2.2.0/library/*/CONTENTS: No such file or directory
> > make[2]: *** [indices] Error 1
> > make[1]: *** [all] Error 2
> > make: *** [pkg-iL04] Error 2
> > *** Installation of iL04 failed ***




-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


From ggrothendieck at gmail.com  Fri Oct  7 15:12:16 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 7 Oct 2005 09:12:16 -0400
Subject: [Rd] svn version number
Message-ID: <971536df0510070612m1e45d1e8ya4f51afdc1e698b7@mail.gmail.com>

Is there some way of automatically including the svn version number
of a package in the DESCRIPTION file or otherwise so that one
can check from within R which svn version number one has?


From pkleiweg at xs4all.nl  Fri Oct  7 15:20:28 2005
From: pkleiweg at xs4all.nl (Peter Kleiweg)
Date: Fri, 7 Oct 2005 15:20:28 +0200 (CEST)
Subject: [Rd] Links to stylesheet are broken
Message-ID: <Pine.LNX.4.63.0510071513390.1081@kleigh.nl>


I did a standard install of R 2.2.0 on Linux. When I run 
help.start(), I get an intro page that has a broken link to a 
stylesheet. The same for the pages "Packages", "Search Engine & 
Keywords", "About R", and "Resources". The other help pages do 
have a correct link to the stylesheet.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


From ripley at stats.ox.ac.uk  Fri Oct  7 15:30:30 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 7 Oct 2005 14:30:30 +0100 (BST)
Subject: [Rd] Building packages on Windows fails
In-Reply-To: <Pine.LNX.4.63.0510071457290.1081@kleigh.nl>
References: <Pine.LNX.4.63.0510070000210.1079@kleigh.nl>
	<Pine.LNX.4.62.0510062230530.6985@fisher.stats.uwo.ca>
	<Pine.LNX.4.63.0510071457290.1081@kleigh.nl>
Message-ID: <Pine.LNX.4.61.0510071417300.1818@gannet.stats>

On Fri, 7 Oct 2005, Peter Kleiweg wrote:

> Duncan Murdoch schreef op de 6e dag van de wijnmaand van het jaar 2005:
>
>> On Fri, 7 Oct 2005, Peter Kleiweg wrote:
>>
>>>
>>> What has changed in R for Windows from version 1.7.1 to
>>> 2.2.0 that won't allow me to build binary packages?
>>
>> Many things have changed; I don't know which is causing the failure you see.
>> One change is that instructions are now collected in the Installation and
>> Administration manual. Try following the setup instructions there and see if
>> it still fails.
>
> I can't find anything on building packages for Windows in that
> manual.

Your problems was installing, so the section on `Installing Packages' 
should help you.

A binary build is an install plus wrapping-up.

> I did find a solution to the problem. On a Linux install, each
> package has a file CONTENTS. These are missing from the Windows
> install. I copied those files from my Linux install to my
> Windows install, and then I could build my own package. So I
> guess, these CONTENTS files should be included in the Windows
> install.

And indeed they are, as the presence of 500+ packages on CRAN for
Windows will show you.

The recommended way to build a binary package on Windows is

R CMD INSTALL --build

since that is able to get HTML links made (on Windows, you need to install 
in the main library tree to do so).

>
> I got another error message when I remove a package, but I
> couldn't see what effect this error has. When I run:
>
>    d:\>Rcmd REMOVE iL04
>
> The package gets removed, but I get:
>
>    make: *** No rule to make target `indices'.  Stop.

That does seem a recent bug, soon to be fixed in R-patched.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Fri Oct  7 15:40:48 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 7 Oct 2005 14:40:48 +0100 (BST)
Subject: [Rd] Links to stylesheet are broken
In-Reply-To: <Pine.LNX.4.63.0510071513390.1081@kleigh.nl>
References: <Pine.LNX.4.63.0510071513390.1081@kleigh.nl>
Message-ID: <Pine.LNX.4.61.0510071430570.1818@gannet.stats>

On Fri, 7 Oct 2005, Peter Kleiweg wrote:

>
> I did a standard install of R 2.2.0 on Linux. When I run
> help.start(), I get an intro page that has a broken link to a
> stylesheet. The same for the pages "Packages", "Search Engine &
> Keywords", "About R", and "Resources". The other help pages do
> have a correct link to the stylesheet.

Confirmed.  help-links.sh is not linking R.css, and is expected to.

The help pages link to the stylesheet in their library tree, not the one 
in doc/html.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ggrothendieck at gmail.com  Fri Oct  7 15:44:51 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 7 Oct 2005 09:44:51 -0400
Subject: [Rd] svn version number
In-Reply-To: <971536df0510070612m1e45d1e8ya4f51afdc1e698b7@mail.gmail.com>
References: <971536df0510070612m1e45d1e8ya4f51afdc1e698b7@mail.gmail.com>
Message-ID: <971536df0510070644sae30161t6179a7e6c494255f@mail.gmail.com>

Just want to clarify that it is the package itself that is being developed
under svn; I was not referring to the svn version number of R.

On 10/7/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> Is there some way of automatically including the svn version number
> of a package in the DESCRIPTION file or otherwise so that one
> can check from within R which svn version number one has?
>


From ukkodxrhjtqapplebau at intertechusa.com  Fri Oct  7 16:24:56 2005
From: ukkodxrhjtqapplebau at intertechusa.com (Ukko Applebaum)
Date: Fri, 7 Oct 2005 09:24:56 -0500
Subject: [Rd] Gunilla aetiology
Message-ID: <002001c5cb4a$e3cfec00$a4c9a8c0@unmarried>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051007/8df56346/attachment.ksh

From pkleiweg at xs4all.nl  Fri Oct  7 17:12:55 2005
From: pkleiweg at xs4all.nl (Peter Kleiweg)
Date: Fri, 7 Oct 2005 17:12:55 +0200 (CEST)
Subject: [Rd] Building packages on Windows fails
In-Reply-To: <Pine.LNX.4.61.0510071417300.1818@gannet.stats>
References: <Pine.LNX.4.63.0510070000210.1079@kleigh.nl>
	<Pine.LNX.4.62.0510062230530.6985@fisher.stats.uwo.ca>
	<Pine.LNX.4.63.0510071457290.1081@kleigh.nl>
	<Pine.LNX.4.61.0510071417300.1818@gannet.stats>
Message-ID: <Pine.LNX.4.63.0510071654410.1081@kleigh.nl>

Prof Brian Ripley schreef op de 7e dag van de wijnmaand van het jaar 2005:

> On Fri, 7 Oct 2005, Peter Kleiweg wrote:
> 
> > Duncan Murdoch schreef op de 6e dag van de wijnmaand van het jaar 2005:
> > 
> > > On Fri, 7 Oct 2005, Peter Kleiweg wrote:
> > > 
> > > > What has changed in R for Windows from version 1.7.1 to 
> > > > 2.2.0 that won't allow me to build binary packages?
> > > 
> > > Many things have changed; I don't know which is causing 
> > > the failure you see. One change is that instructions are 
> > > now collected in the Installation and Administration 
> > > manual. Try following the setup instructions there and see 
> > > if it still fails.
> > 
> > I can't find anything on building packages for Windows in 
> > that manual.
> 
> Your problems was installing, so the section on `Installing 
> Packages' should help you.

Installing worked fine. Building a binary distribution (with 
compiled help files) is what didn't work.

This worked fine:

    Rcmd build iL04

But that just gave a gzip'ed tarfile, not a zip-file, and 
without the compiled helpfiles.

This didn't work:

    Rcmd build --force --binary iL04


> > I did find a solution to the problem. On a Linux install, 
> > each package has a file CONTENTS. These are missing from the 
> > Windows install. I copied those files from my Linux install 
> > to my Windows install, and then I could build my own 
> > package. So I guess, these CONTENTS files should be included 
> > in the Windows install.
> 
> And indeed they are, as the presence of 500+ packages on CRAN 
> for Windows will show you.

Well, I just ran the install program for Windows, with compiled 
html help, but without the ordinary html help files. In that 
case, no CONTENTS files get installed.
 
> The recommended way to build a binary package on Windows is
> 
> R CMD INSTALL --build

Yes, that works. Even without the CONTENTS files. And this is 
recommended in the manual "Creating R packages", another manual 
than Duncan Murdoch was referring to.

I was using a method that was recommended in earlier versions. 
Perhaps that method should just be disabled, with a 
message about the current method, instead of having it fail for 
obscure reasons.


-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


From ripley at stats.ox.ac.uk  Fri Oct  7 17:24:29 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 7 Oct 2005 16:24:29 +0100 (BST)
Subject: [Rd] Building packages on Windows fails
In-Reply-To: <Pine.LNX.4.63.0510071654410.1081@kleigh.nl>
References: <Pine.LNX.4.63.0510070000210.1079@kleigh.nl>
	<Pine.LNX.4.62.0510062230530.6985@fisher.stats.uwo.ca>
	<Pine.LNX.4.63.0510071457290.1081@kleigh.nl>
	<Pine.LNX.4.61.0510071417300.1818@gannet.stats>
	<Pine.LNX.4.63.0510071654410.1081@kleigh.nl>
Message-ID: <Pine.LNX.4.61.0510071622220.14092@gannet.stats>

On Fri, 7 Oct 2005, Peter Kleiweg wrote:

> Prof Brian Ripley schreef op de 7e dag van de wijnmaand van het jaar 2005:
>
>> On Fri, 7 Oct 2005, Peter Kleiweg wrote:
>>
>>> Duncan Murdoch schreef op de 6e dag van de wijnmaand van het jaar 2005:
>>>
>>>> On Fri, 7 Oct 2005, Peter Kleiweg wrote:
>>>>
>>>>> What has changed in R for Windows from version 1.7.1 to
>>>>> 2.2.0 that won't allow me to build binary packages?
>>>>
>>>> Many things have changed; I don't know which is causing
>>>> the failure you see. One change is that instructions are
>>>> now collected in the Installation and Administration
>>>> manual. Try following the setup instructions there and see
>>>> if it still fails.
>>>
>>> I can't find anything on building packages for Windows in
>>> that manual.
>>
>> Your problems was installing, so the section on `Installing
>> Packages' should help you.
>
> Installing worked fine. Building a binary distribution (with
> compiled help files) is what didn't work.
>
> This worked fine:
>
>    Rcmd build iL04
>
> But that just gave a gzip'ed tarfile, not a zip-file, and
> without the compiled helpfiles.
>
> This didn't work:
>
>    Rcmd build --force --binary iL04
>
>
>>> I did find a solution to the problem. On a Linux install,
>>> each package has a file CONTENTS. These are missing from the
>>> Windows install. I copied those files from my Linux install
>>> to my Windows install, and then I could build my own
>>> package. So I guess, these CONTENTS files should be included
>>> in the Windows install.
>>
>> And indeed they are, as the presence of 500+ packages on CRAN
>> for Windows will show you.
>
> Well, I just ran the install program for Windows, with compiled
> html help, but without the ordinary html help files. In that
> case, no CONTENTS files get installed.

Ah, that's the clue.  People normally build complete binary distributions: 
let's see if we can track that down.

>> The recommended way to build a binary package on Windows is
>>
>> R CMD INSTALL --build
>
> Yes, that works. Even without the CONTENTS files. And this is
> recommended in the manual "Creating R packages", another manual
> than Duncan Murdoch was referring to.
>
> I was using a method that was recommended in earlier versions.
> Perhaps that method should just be disabled, with a
> message about the current method, instead of having it fail for
> obscure reasons.

It is not quite the same thing.  I have been in favour of removing it, but 
others have differed in their opinions.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From murdoch at stats.uwo.ca  Fri Oct  7 17:47:59 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 07 Oct 2005 11:47:59 -0400
Subject: [Rd] Subscripting fails if name of element is "" (PR#8161)
In-Reply-To: <Pine.LNX.4.61.0510062158040.10139@gannet.stats>
References: <14643.1128616685@www34.gmx.net>
	<Pine.LNX.4.61.0510062158040.10139@gannet.stats>
Message-ID: <434698AF.2020006@stats.uwo.ca>

I haven't been following this conversation in order, but I think there's 
another bug here besides the one(s?) you identified:

Jens had this example:

 > x <- 1:4
 > names(x) <- c(NA, "NA", "a", "")
 > x[names(x)]
<NA> <NA>    a <NA>
    1    1    3   NA

Shouldn't the second entry in the result be 2, with name "NA"?  It seems 
the string "NA" has been converted to <NA> here.

Duncan Murdoch


Prof Brian Ripley wrote:
> On Thu, 6 Oct 2005, "Jens Oehlschl?gel" wrote:
> 
> 
>>Dear Thomas,
>>
>>
>>>This looks deliberate (there is a function NonNullStringMatch that does
>>>the matching).  I assume this is because there is no other way to
>>>indicate that an element has no name.
>>
>>>If so, it is a documentation bug -- help(names) and FAQ 7.14 should
>>>specify this behaviour.  Too late for 2.2.0, unfortunately.
>>
>>I respectfully disagree: the element has a name, its an empty string. Of
>>course "" is a doubtful name for an element, but as long as we allow this
>>name when assigning names()<- we also should handle it like a name in
>>subscripting. The alternative would be to disallow "" in names at all.
>>However, both alternatives rather look like code changes, not only
>>documentation.
> 
> 
> I think Thomas is right as to how S interprets this: "" is no name on 
> assignment, wheread NA as a name is a different thing (there probably is a 
> name, we just do not know what it is).
> 
> Here is the crux of the example.
> 
> p <- c(a=1, 2)
> 
>>p <- c(a=1, 2)
>>names(p)
> 
> [1] "a" ""
> 
>>p
> 
> a
> 1 2
> 
>>p2 <- c(1,2)
>>names(p2) <- c("a", "")
>>identical(p, p2)
> 
> [1] TRUE
> 
> so giving the name is "" really is the same as giving no name.
> 
> `Error 1' is said to be
> 
> 
>>p[""]
> 
> <NA>
>    NA
> 
> You haven't given a name, so I think that is right.  S (which has no 
> character NAs) uses "" as the name, but here there may be a name or not.
> 
> 
>>P <- list(a=1, 2)
> 
> 
> I think Jens then meant as `error 2' that
> 
> 
>>P
> 
> $a
> [1] 1
> 
> [[2]]
> [1] 2
> 
> shows no name for the second element, and that seems right to me (although 
> S shows "" here).
> 
> Finally (`error 3')
> 
> 
>>P[""]
> 
> $"NA"
> NULL
> 
> is a length-one list with name character-NA.  (S has no name here.)  That 
> seems the right answer but if so is printed inconsistently.
> 
> I would say that
> 
> 
>>Q <- list(1, 2)
>>names(Q) <- c("a", NA)
>>Q
> 
> $a
> [1] 1
> 
> $"NA"
> [1] 2
> 
> was the only bug here (the name should be printed as <NA>).  Now that
> comes from this bit of code
> 
>  		    if( isValidName(CHAR(PRINTNAME(TAG(s)))) )
>  			sprintf(ptag, "$%s", CHAR(PRINTNAME(TAG(s))));
>  		    else
>  			sprintf(ptag, "$\"%s\"", CHAR(PRINTNAME(TAG(s))));
> 
> so non-syntactic names are printed surrounded by "".  Nowadays I think we 
> would prefer ``, as in
> 
> 
>>A <- list("a+b"=1)
>>A
> 
> $"a+b"
> [1] 1
> 
> 
>>A$"a+b"
> 
> [1] 1
> 
>>A$`a+b`
> 
> [1] 1
> 
> but NA needs to be a special case as in
> 
> 
>>A <- list(1, 2)
>>names(A) <- c("NA", NA)
>>A
> 
> $"NA"
> [1] 1
> 
> $"NA"
> [1] 2
> 
> 
>>is.na(names(A))
> 
> [1] FALSE  TRUE
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch at stats.uwo.ca  Fri Oct  7 17:58:02 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 07 Oct 2005 11:58:02 -0400
Subject: [Rd] Building packages on Windows fails
In-Reply-To: <Pine.LNX.4.63.0510071654410.1081@kleigh.nl>
References: <Pine.LNX.4.63.0510070000210.1079@kleigh.nl>	<Pine.LNX.4.62.0510062230530.6985@fisher.stats.uwo.ca>	<Pine.LNX.4.63.0510071457290.1081@kleigh.nl>	<Pine.LNX.4.61.0510071417300.1818@gannet.stats>
	<Pine.LNX.4.63.0510071654410.1081@kleigh.nl>
Message-ID: <43469B0A.7070709@stats.uwo.ca>

Peter Kleiweg wrote:
> Prof Brian Ripley schreef op de 7e dag van de wijnmaand van het jaar 2005:
> 
> 
>>On Fri, 7 Oct 2005, Peter Kleiweg wrote:
>>
>>
>>>Duncan Murdoch schreef op de 6e dag van de wijnmaand van het jaar 2005:
>>>
>>>
>>>>On Fri, 7 Oct 2005, Peter Kleiweg wrote:
>>>>
>>>>
>>>>>What has changed in R for Windows from version 1.7.1 to 
>>>>>2.2.0 that won't allow me to build binary packages?
>>>>
>>>>Many things have changed; I don't know which is causing 
>>>>the failure you see. One change is that instructions are 
>>>>now collected in the Installation and Administration 
>>>>manual. Try following the setup instructions there and see 
>>>>if it still fails.
>>>
>>>I can't find anything on building packages for Windows in 
>>>that manual.
>>
>>Your problems was installing, so the section on `Installing 
>>Packages' should help you.
> 
> 
> Installing worked fine. Building a binary distribution (with 
> compiled help files) is what didn't work.
> 
> This worked fine:
> 
>     Rcmd build iL04
> 
> But that just gave a gzip'ed tarfile, not a zip-file, and 
> without the compiled helpfiles.
> 
> This didn't work:
> 
>     Rcmd build --force --binary iL04
> 
> 
> 
>>>I did find a solution to the problem. On a Linux install, 
>>>each package has a file CONTENTS. These are missing from the 
>>>Windows install. I copied those files from my Linux install 
>>>to my Windows install, and then I could build my own 
>>>package. So I guess, these CONTENTS files should be included 
>>>in the Windows install.
>>
>>And indeed they are, as the presence of 500+ packages on CRAN 
>>for Windows will show you.
> 
> 
> Well, I just ran the install program for Windows, with compiled 
> html help, but without the ordinary html help files. In that 
> case, no CONTENTS files get installed.
>  
> 
>>The recommended way to build a binary package on Windows is
>>
>>R CMD INSTALL --build
> 
> 
> Yes, that works. Even without the CONTENTS files. And this is 
> recommended in the manual "Creating R packages", another manual 
> than Duncan Murdoch was referring to.
> 
> I was using a method that was recommended in earlier versions. 
> Perhaps that method should just be disabled, with a 
> message about the current method, instead of having it fail for 
> obscure reasons.

I agree there should be only one method, and it should work.  The 
problem is:

  - Users with limited permissions can't run INSTALL, because it needs 
write access to R_HOME/library.

  - Because Windows doesn't have soft links, the only way we have to get 
cross references in the help files to work is to install to R_HOME/library.

I'd prefer to fix "Rcmd build --binary" so that it got the help links 
right and then have "Rcmd INSTALL --build" use it first, then install 
the .zip file, but I haven't taken the time to do this.  I don't like 
having two parallel tracks of very similar code (because of problems 
like yours, where the one I don't personnally use falls out of date and 
stops working).

Duncan Murdoch


From murdoch at stats.uwo.ca  Fri Oct  7 18:02:27 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 07 Oct 2005 12:02:27 -0400
Subject: [Rd] svn version number
In-Reply-To: <971536df0510070612m1e45d1e8ya4f51afdc1e698b7@mail.gmail.com>
References: <971536df0510070612m1e45d1e8ya4f51afdc1e698b7@mail.gmail.com>
Message-ID: <43469C13.2020206@stats.uwo.ca>

Gabor Grothendieck wrote:
> Is there some way of automatically including the svn version number
> of a package in the DESCRIPTION file or otherwise so that one
> can check from within R which svn version number one has?

You could do this by writing it into your Makefile, but there's no other 
existing support for it.  I'd recommend combining the URL reported by 
"svn info" with the result of svnversion to get the most informative 
version.  Watch out for cases of people who are trying to make your 
package from a tarfile, rather than an svn checkout.  We have ended up 
with some fairly tricky Makefile programming to get what we want into 
the R banner.

Duncan Murdoch


From ggrothendieck at gmail.com  Fri Oct  7 18:23:47 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 7 Oct 2005 12:23:47 -0400
Subject: [Rd] svn version number
In-Reply-To: <43469C13.2020206@stats.uwo.ca>
References: <971536df0510070612m1e45d1e8ya4f51afdc1e698b7@mail.gmail.com>
	<43469C13.2020206@stats.uwo.ca>
Message-ID: <971536df0510070923t45f310e1ic63fa4734ac954@mail.gmail.com>

On 10/7/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
> Gabor Grothendieck wrote:
> > Is there some way of automatically including the svn version number
> > of a package in the DESCRIPTION file or otherwise so that one
> > can check from within R which svn version number one has?
>
> You could do this by writing it into your Makefile, but there's no other
> existing support for it.  I'd recommend combining the URL reported by
> "svn info" with the result of svnversion to get the most informative
> version.  Watch out for cases of people who are trying to make your
> package from a tarfile, rather than an svn checkout.  We have ended up
> with some fairly tricky Makefile programming to get what we want into
> the R banner.

There is no makefile at all currently as my package is all R.  Also, I
currently use TortoiseSVN.


From ripley at stats.ox.ac.uk  Fri Oct  7 18:30:38 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 7 Oct 2005 17:30:38 +0100 (BST)
Subject: [Rd] Subscripting fails if name of element is "" (PR#8161)
In-Reply-To: <434698AF.2020006@stats.uwo.ca>
References: <14643.1128616685@www34.gmx.net>
	<Pine.LNX.4.61.0510062158040.10139@gannet.stats>
	<434698AF.2020006@stats.uwo.ca>
Message-ID: <Pine.LNX.4.61.0510071725200.32172@gannet.stats>

On Fri, 7 Oct 2005, Duncan Murdoch wrote:

> I haven't been following this conversation in order, but I think there's 
> another bug here besides the one(s?) you identified:
>
> Jens had this example:
>
>> x <- 1:4
>> names(x) <- c(NA, "NA", "a", "")
>> x[names(x)]
> <NA> <NA>    a <NA>
>   1    1    3   NA
>
> Shouldn't the second entry in the result be 2, with name "NA"?  It seems the 
> string "NA" has been converted to <NA> here.

Yes, but I don't see it in PR#8161 where there is no name "NA" that I can
see.  (In other words it is not an instance of the subject line.)

The issue is that <NA> is matching "NA", and it should not.  As in the
code

Rboolean NonNullStringMatch(SEXP s, SEXP t)
{
     if (CHAR(s)[0] && CHAR(t)[0] && strcmp(CHAR(s), CHAR(t)) == 0)
 	return TRUE;
     else
 	return FALSE;
}

and there are more instances around.



>
> Duncan Murdoch
>
>
> Prof Brian Ripley wrote:
>> On Thu, 6 Oct 2005, "Jens Oehlschl?gel" wrote:
>> 
>> 
>>> Dear Thomas,
>>> 
>>> 
>>>> This looks deliberate (there is a function NonNullStringMatch that does
>>>> the matching).  I assume this is because there is no other way to
>>>> indicate that an element has no name.
>>> 
>>>> If so, it is a documentation bug -- help(names) and FAQ 7.14 should
>>>> specify this behaviour.  Too late for 2.2.0, unfortunately.
>>> 
>>> I respectfully disagree: the element has a name, its an empty string. Of
>>> course "" is a doubtful name for an element, but as long as we allow this
>>> name when assigning names()<- we also should handle it like a name in
>>> subscripting. The alternative would be to disallow "" in names at all.
>>> However, both alternatives rather look like code changes, not only
>>> documentation.
>> 
>> 
>> I think Thomas is right as to how S interprets this: "" is no name on 
>> assignment, wheread NA as a name is a different thing (there probably is a 
>> name, we just do not know what it is).
>> 
>> Here is the crux of the example.
>> 
>> p <- c(a=1, 2)
>> 
>>> p <- c(a=1, 2)
>>> names(p)
>> 
>> [1] "a" ""
>> 
>>> p
>> 
>> a
>> 1 2
>> 
>>> p2 <- c(1,2)
>>> names(p2) <- c("a", "")
>>> identical(p, p2)
>> 
>> [1] TRUE
>> 
>> so giving the name is "" really is the same as giving no name.
>> 
>> `Error 1' is said to be
>> 
>> 
>>> p[""]
>> 
>> <NA>
>>    NA
>> 
>> You haven't given a name, so I think that is right.  S (which has no 
>> character NAs) uses "" as the name, but here there may be a name or not.
>> 
>> 
>>> P <- list(a=1, 2)
>> 
>> 
>> I think Jens then meant as `error 2' that
>> 
>> 
>>> P
>> 
>> $a
>> [1] 1
>> 
>> [[2]]
>> [1] 2
>> 
>> shows no name for the second element, and that seems right to me (although 
>> S shows "" here).
>> 
>> Finally (`error 3')
>> 
>> 
>>> P[""]
>> 
>> $"NA"
>> NULL
>> 
>> is a length-one list with name character-NA.  (S has no name here.)  That 
>> seems the right answer but if so is printed inconsistently.
>> 
>> I would say that
>> 
>> 
>>> Q <- list(1, 2)
>>> names(Q) <- c("a", NA)
>>> Q
>> 
>> $a
>> [1] 1
>> 
>> $"NA"
>> [1] 2
>> 
>> was the only bug here (the name should be printed as <NA>).  Now that
>> comes from this bit of code
>> 
>>  		    if( isValidName(CHAR(PRINTNAME(TAG(s)))) )
>>  			sprintf(ptag, "$%s", CHAR(PRINTNAME(TAG(s))));
>>  		    else
>>  			sprintf(ptag, "$\"%s\"", CHAR(PRINTNAME(TAG(s))));
>> 
>> so non-syntactic names are printed surrounded by "".  Nowadays I think we 
>> would prefer ``, as in
>> 
>> 
>>> A <- list("a+b"=1)
>>> A
>> 
>> $"a+b"
>> [1] 1
>> 
>> 
>>> A$"a+b"
>> 
>> [1] 1
>> 
>>> A$`a+b`
>> 
>> [1] 1
>> 
>> but NA needs to be a special case as in
>> 
>> 
>>> A <- list(1, 2)
>>> names(A) <- c("NA", NA)
>>> A
>> 
>> $"NA"
>> [1] 1
>> 
>> $"NA"
>> [1] 2
>> 
>> 
>>> is.na(names(A))
>> 
>> [1] FALSE  TRUE
>> 
>> 
>> 
>> 
>> ------------------------------------------------------------------------
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From sfalcon at fhcrc.org  Fri Oct  7 18:54:09 2005
From: sfalcon at fhcrc.org (Seth Falcon)
Date: Fri, 07 Oct 2005 09:54:09 -0700
Subject: [Rd] svn version number
In-Reply-To: <971536df0510070923t45f310e1ic63fa4734ac954@mail.gmail.com>
	(Gabor Grothendieck's message of "Fri, 7 Oct 2005 12:23:47 -0400")
References: <971536df0510070612m1e45d1e8ya4f51afdc1e698b7@mail.gmail.com>
	<43469C13.2020206@stats.uwo.ca>
	<971536df0510070923t45f310e1ic63fa4734ac954@mail.gmail.com>
Message-ID: <m2br218dzi.fsf@macaroni.local>

On  7 Oct 2005, ggrothendieck at gmail.com wrote:

> On 10/7/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
>> Gabor Grothendieck wrote:
>>> Is there some way of automatically including the svn version
>>> number of a package in the DESCRIPTION file or otherwise so that
>>> one can check from within R which svn version number one has?
>>
>> You could do this by writing it into your Makefile, but there's no
>> other existing support for it.  I'd recommend combining the URL
>> reported by "svn info" with the result of svnversion to get the
>> most informative version.  Watch out for cases of people who are
>> trying to make your package from a tarfile, rather than an svn
>> checkout.  We have ended up with some fairly tricky Makefile
>> programming to get what we want into the R banner.
>
> There is no makefile at all currently as my package is all R.  Also,
> I currently use TortoiseSVN.

This is really an svn question.  Perhaps asking/searching on an svn
list would be helpful.

Personally, I don't think R's package building tools should do
anything svn specific.  There is no reason to expect/enforce svn as
*the* SCM that people use to develop R packages.

+ seth


From ripley at stats.ox.ac.uk  Fri Oct  7 19:38:26 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 7 Oct 2005 18:38:26 +0100 (BST)
Subject: [Rd] Subscripting issues unrelated to [Subscripting fails if
 name of element is "" (PR#8161)]
In-Reply-To: <20906.1128686986@www81.gmx.net>
References: <20906.1128686986@www81.gmx.net>
Message-ID: <Pine.LNX.4.61.0510071751560.32476@gannet.stats>

Jens,

This is a completely separate issue.  In indexing, character NA matches 
the name "NA".  That was a bug, but it is nothing to do with the subject 
line or PR#8161, and for the record let's keep this separate.  The 
`critical point' is not to build a theory around misunderstandings of 
several unrelated examples.

You say

>> get("$")(lx, as.character(NA))

goes wrong.  Now the documentation has x$name for 'name' a symbol or a 
character string, and you have passed an _expression_ and got an 
appropriate error message,

Error in get("$")(lx, as.character(NA)) : invalid subscript type

If you don't see that, please review the section in R-lang or the Blue 
Book.  Equally

>  get("$")(lx, as.character("a"))
Error in get("$")(lx, as.character("a")) : invalid subscript type

so it nothing to do with NA or "" or the subject line here.

On the other hand

>> substitute(lx$y, list(y=as.character(NA)))

is lx$NA, using a name (and no longer a character NA).

Brian


On Fri, 7 Oct 2005, "Jens Oehlschl?gel" wrote:

> Dear Brian,
>
> Thanks for picking this up.
> I think the critical point is that it is not a single isolated bug and it
> would be a main effort to get this stuff consistent, because it (and
> implications) seems to be spread all over the code. The to be applauded
> efforts to properly sort out "NA" vs. as.character(NA) have not been fully
> successful yet and "" is a similar issue. Please consider the following,
> sorry for the length:
>
>
> # ERROR 1
>
> # I agree that c() disallows "" and NA names
> # it makes sense discouraging users from using such names
>
>> c(as.character(NA)=1)
> Fehler: Syntaxfehler in Zeile "c(as.character(NA)="
>> c("NA"=2, "a"=3)
> NA  a
> 2  3
>> c(""=4)
> Fehler: Versuch einen Variablennamen der L?nge 0 zu nutzen
>
> # however, "NA" must be expected as a legal name, e.g. when importing data
> # and in your example specifying "no-name" in fact results in a "" name
>
>> names(c(a=1, 2))
> [1] "a" ""
>>
>
> # My interpreteation is that the user specifies a mixture of elements with
> and without names,
> # and therefore the no-names must be co-erced to "" names, and in principle
> that's completely fine
>
> # a character vector is defined to have either as.character(NA) OR "NA" OR
> "" or another positive length string
> # (which is complicated enough)
> # formally the names is an attribute (character vector) of an object and can
> be manipulated as such
>
>> x <- 1:4
>> names(x) <- c(NA, "NA", "a", "")
>> names(x)
> [1] NA   "NA" "a"  ""
>> # and in principle all of those can be properly distinguished
>> x[match(names(x), names(x))]
> <NA>   NA    a
>   1    2    3    4
>
>
> # introducing a fifth non-name state that sometimes equals "" and sometimes
> not, introduces inconsistency into the language
> # e.g. the fact that elements can be selected by their name but not by their
> non-name
> # Thus currently selecting by names is a mess from a consistency perspective
>
>
>> x[names(x)]
> <NA> <NA>    a <NA>
>   1    1    3   NA
>
> # in the following subscripting with "" works, but not with "NA"
>> for (i in names(x))
> + print(x[[i]])
> [1] 1
> [1] 1
> [1] 3
> [1] 4
>
>
> # ERROR 1a: If failing on "NA" is not a bug, I switch from programming to
> Kafka
>> x["NA"]
> <NA>
>
>   1
> # ERROR 1b: clearly wrong
>> x[["NA"]]
> [1] 1
> # ERROR 1c: and from my humble understanding failing on "" is a bug as well
>> x[""]
> <NA>
>  NA
> # wheras interestingly this is correct
>> x[[""]]
> [1] 4
>
>
> # I think it is obvious how to remove these inconsistencies
> # (as long as we do not disallow "" in names alltogether,
> #  which is almost impossible, since every users legally can set the names
> vector in a variety of ways )
>
> # these are not easy, but perfectly fine
>> x[as.character(NA)]
> <NA>
>   1
>> x[as.integer(NA)]
> <NA>
>  NA
>
> # and these are really debatable difficult ones
>> x[NA]
> <NA> <NA> <NA> <NA>
>  NA   NA   NA   NA
>> x[as.logical(NA)]
> <NA> <NA> <NA> <NA>
>  NA   NA   NA   NA
>
>
>
> ## ERROR 2+3: the above inconsistencies generalize to lists
>
> lx <- as.list(x)
>
>> lx
> $"NA"		(ERROR 2a)
> [1] 1
>
> $"NA"
> [1] 2
>
> $a
> [1] 3
>
> [[4]]		(ERROR 2b)
> [1] 4
>
> # and should read
>
>> lx
> $NA		(  or $as.character(NA) for clarity and warning )
> [1] 1
>
> $"NA"
> [1] 2
>
> $a
> [1] 3
>
> $""
> [1] 4
>
>
> # Note that - except for printing - match works perfectly in
>> lx[match(names(lx), names(lx))]
> $"NA"
> [1] 1
>
> $"NA"
> [1] 2
>
> $a
> [1] 3
>
> [[4]]
> [1] 4
>
> # and also in
>> for (i in match(names(lx), names(lx)))
> + print(lx[[i]])
> [1] 1
> [1] 2
> [1] 3
> [1] 4
>
>
> # Of course I consider the following behaviour as inconsistent
>> lx[names(lx)]
> $"NA"
> [1] 1
>
> $"NA"
> [1] 1		(ERROR 3a)
>
> $a
> [1] 3
>
> $"NA"
> NULL		(ERROR 3b)
>
>
> # using [[ the second one fails
>> for (i in names(lx))
> + print(lx[[i]])
> [1] 1
> [1] 1		(ERROR 3c)
> [1] 3
> [1] 4		(interestingly correct)
>
>
> # finally note that this works
>> eval(substitute(lx$y, list(y=as.character(NA))))
> # but not this
>> get("$")(lx, as.character(NA))
> Fehler in get("$")(lx, as.character(NA)) : ung?ltiger Indextyp
> # and both go wrong with "NA"
>
> -- 
> Lust, ein paar Euro nebenbei zu verdienen? Ohne Kosten, ohne Risiko!
> Satte Provisionen f?r GMX Partner: http://www.gmx.net/de/go/partner
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From murdoch at stats.uwo.ca  Fri Oct  7 20:10:45 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 07 Oct 2005 14:10:45 -0400
Subject: [Rd] svn version number
In-Reply-To: <971536df0510070923t45f310e1ic63fa4734ac954@mail.gmail.com>
References: <971536df0510070612m1e45d1e8ya4f51afdc1e698b7@mail.gmail.com>	
	<43469C13.2020206@stats.uwo.ca>
	<971536df0510070923t45f310e1ic63fa4734ac954@mail.gmail.com>
Message-ID: <4346BA25.9030606@stats.uwo.ca>

Gabor Grothendieck wrote:
> On 10/7/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
> 
>>Gabor Grothendieck wrote:
>>
>>>Is there some way of automatically including the svn version number
>>>of a package in the DESCRIPTION file or otherwise so that one
>>>can check from within R which svn version number one has?
>>
>>You could do this by writing it into your Makefile, but there's no other
>>existing support for it.  I'd recommend combining the URL reported by
>>"svn info" with the result of svnversion to get the most informative
>>version.  Watch out for cases of people who are trying to make your
>>package from a tarfile, rather than an svn checkout.  We have ended up
>>with some fairly tricky Makefile programming to get what we want into
>>the R banner.
> 
> 
> There is no makefile at all currently as my package is all R.  Also, I
> currently use TortoiseSVN.

Probably the simplest option is to set an svn:keywords property on one 
of your source files, and get Subversion to put the revision number into 
the source when you check out.  This won't tell you if you've got a 
mixed or modified revision, but as long as you are careful not to do 
this, it might give you what you want.

I've got no idea how to do this in TortoiseSVN (I use command line svn), 
but presumably the documentation will talk about it.

Duncan Murdoch


From lai at lindaspaces.com  Fri Oct  7 23:33:26 2005
From: lai at lindaspaces.com (Jennifer Lai)
Date: Fri, 07 Oct 2005 17:33:26 -0400
Subject: [Rd] FFT
Message-ID: <4346E9A6.5000904@lindaspaces.com>

Hi,
    Is FFT implemented in R takes advantage of multi-processors?
I ran this benchmark from from http://www.sciviews.org, and AMD Opteron 
2.2 GHz performs better than AMD Opteron 1.8 GHz on all test cases, 
except FFT operation.
Both machines run same OSs (RedHat WS 3) and 2.2 GHz has more memory (2 
GB RAM) than 1.8 GHz (1 GB RAM). The only difference is that 1.8 GHz is 
a dual-processor machine, and
2.2 GHz is a single processor machine. Could this be the reason?
Does anyone has insights on this?


Thanks,
Jennifer


From KKIII at Indiana.Edu  Sat Oct  8 06:10:59 2005
From: KKIII at Indiana.Edu (KKIII@Indiana.Edu)
Date: Sat,  8 Oct 2005 06:10:59 +0200 (CEST)
Subject: [Rd] optim warning message. (PR#8186)
Message-ID: <20051008041059.C40D61DCF8@slim.kubism.ku.dk>

Full_Name: Ken Kelley
Version: 2.1.1
OS: Windows XP
Submission from: (NULL) (156.56.79.54)



A warning from optim() when reltol was specified for the L-BFGS-B method:


"method L-BFGS-B uses 'fact' (and 'pgtol') instead of 'reltol' and 'abstol' in:
optim(par = LL.0, fn = Low.Lim.NC.F, gr = NULL, method = c("Nelder-Mead","

But, "fact" should be "factr," which is the name of the control parameter or
interest.


From ripley at stats.ox.ac.uk  Sat Oct  8 11:26:36 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 8 Oct 2005 10:26:36 +0100 (BST)
Subject: [Rd] FFT
In-Reply-To: <4346E9A6.5000904@lindaspaces.com>
References: <4346E9A6.5000904@lindaspaces.com>
Message-ID: <Pine.LNX.4.61.0510081010510.24390@gannet.stats>

On Fri, 7 Oct 2005, Jennifer Lai wrote:

>    Is FFT implemented in R takes advantage of multi-processors?
> I ran this benchmark from from http://www.sciviews.org, and AMD Opteron
> 2.2 GHz performs better than AMD Opteron 1.8 GHz on all test cases,
> except FFT operation.
> Both machines run same OSs (RedHat WS 3) and 2.2 GHz has more memory (2
> GB RAM) than 1.8 GHz (1 GB RAM). The only difference is that 1.8 GHz is
> a dual-processor machine, and
> 2.2 GHz is a single processor machine. Could this be the reason?
> Does anyone has insights on this?

I am pretty confident that nothing in Unix-alike R is multi-threaded. 
(The Windows port is.) However, you can use some multi-threaded addons, 
e.g. a BLAS library.

AFAIK those chips differ in more than just speed, including exact cache 
details.  Other details of the CPU architecture are often more important 
than small differences in clock speed.  Even small compiler differences 
can affect performance a lot.

I would also caution aginst drawing any conclusions at all from this sort 
of `benchmark' (indeed, would say it was a misuse of the term). 
Fortunately the computer world has moved on to using realistic tasks as 
comparators.  When we last had a large procurement (a many-processor 
system fufilled by Opterons) we used real data-analysis programs written 
in C++ and Java.  The tenders managed a very surprising difference in 
throughput on apparently identical CPUs, and results even from the same 
tender on different models of Opteron did not scale even approximately 
with clock speed.  In the end we learnt more about the support skills of 
the potential suppliers than about the optimized performance of their 
systems.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ggrothendieck at gmail.com  Sat Oct  8 13:09:46 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 8 Oct 2005 07:09:46 -0400
Subject: [Rd] svn version number
In-Reply-To: <4346BA25.9030606@stats.uwo.ca>
References: <971536df0510070612m1e45d1e8ya4f51afdc1e698b7@mail.gmail.com>
	<43469C13.2020206@stats.uwo.ca>
	<971536df0510070923t45f310e1ic63fa4734ac954@mail.gmail.com>
	<4346BA25.9030606@stats.uwo.ca>
Message-ID: <971536df0510080409v184a5f0av5b128705dab495ed@mail.gmail.com>

On 10/7/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
> Gabor Grothendieck wrote:
> > On 10/7/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
> >
> >>Gabor Grothendieck wrote:
> >>
> >>>Is there some way of automatically including the svn version number
> >>>of a package in the DESCRIPTION file or otherwise so that one
> >>>can check from within R which svn version number one has?
> >>
> >>You could do this by writing it into your Makefile, but there's no other
> >>existing support for it.  I'd recommend combining the URL reported by
> >>"svn info" with the result of svnversion to get the most informative
> >>version.  Watch out for cases of people who are trying to make your
> >>package from a tarfile, rather than an svn checkout.  We have ended up
> >>with some fairly tricky Makefile programming to get what we want into
> >>the R banner.
> >
> >
> > There is no makefile at all currently as my package is all R.  Also, I
> > currently use TortoiseSVN.
>
> Probably the simplest option is to set an svn:keywords property on one
> of your source files, and get Subversion to put the revision number into
> the source when you check out.  This won't tell you if you've got a
> mixed or modified revision, but as long as you are careful not to do
> this, it might give you what you want.
>
> I've got no idea how to do this in TortoiseSVN (I use command line svn),
> but presumably the documentation will talk about it.
>
> Duncan Murdoch
>

Thanks.  That seems to work.  I created a file called VERSION
in the inst subdirectory with the single line:

$Id$

and added Id to that file's svn properties by right-clicking on
VERSION file in Windows Explorer, choosing Properties, click
on Subversion tab and enter the Id property. I then did a commit.

I was originally thinking of putting the version information in the
DESCRIPTION file since I think that that is where one would
normally look but am not too sure if there is a logical place for it
there so for the moment at least its in my VERSION file and one
can access it from R via:

    file.show(system.file("VERSION", package = "mypkg"))

Question: Any other ideas of a good place to put this information?
The key requirement I have is that it should be accessible from
within R so that one can check that one is using the svn version
that one thinks one is using.


From joel3000 at gmail.com  Sat Oct  8 23:41:41 2005
From: joel3000 at gmail.com (Joel Bremson)
Date: Sat, 8 Oct 2005 14:41:41 -0700
Subject: [Rd] windows/g95 peculiarity
Message-ID: <1253d67a0510081441j66c8ff99u845fbba7f4b2f749@mail.gmail.com>

I'm not looking for an answer here, this is just a report of a
peculiar event I've observed
and can reproduce.

I'm developing a g95 (20050129) compiled package on windows xp pro
using R-2.1.1, and gcc-3.4.2 (mingw special). An older version of the
F95 package compiled and ran without problems. The new version of the
package includes extensive changes in the code.

The package has a test function, rtest(), which sets up a testing
scenario and runs it.

If I try to immediately load the library after starting up R and
running rtest(), the following
occurs:

> library("bpkg")
.onLoad: running R_g95_init
> o = rtest()
Testing cm.estimate...
Using short data set (testing)...
 25500.0000000000 2499.00000000000 11.0000000000000 300.000000000000
...
 5 0.000000000000000
 6 0.000000000000000
Operating system error: Not enough space
Memory allocation failed

(R exits in terminal, or freezes as GUI)

However, if I import a data element the rtest runs fine. I know
rtest() doesn't need the extra data import because it runs without
problems on our OS X version.

> library("bpkg")
.onLoad: running R_g95_init
> data(yij)
> o = rtest()
Testing cm.estimate...
Using short data set (testing)...
 25500.0000000000 2499.00000000000 11.0000000000000 300.000000000000
...
 6 0.000000000000000
Done

>
(R continues to run without problems)

The default rtest runs a short data set because the full test data set
takes about
30 seconds to compute. When I start off by running the full rtest data
set I also
don't have any problems with R.

This package runs without problems on a G4/Tiger OS X mac with R-2.1.1, although
we do compile it with gfortran on that platform.

This is just a report. If anyone has any questions let me know.

Best,

Joel

--
Joel Bremson
Graduate Student
Institute for Transportation Studies - UC Davis
http://etrans.blogspot.com


From murdoch at stats.uwo.ca  Sun Oct  9 01:46:04 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sat, 8 Oct 2005 19:46:04 -0400 (EDT)
Subject: [Rd] windows/g95 peculiarity
In-Reply-To: <1253d67a0510081441j66c8ff99u845fbba7f4b2f749@mail.gmail.com>
References: <1253d67a0510081441j66c8ff99u845fbba7f4b2f749@mail.gmail.com>
Message-ID: <Pine.LNX.4.62.0510081942490.3445@fisher.stats.uwo.ca>



On Sat, 8 Oct 2005, Joel Bremson wrote:

> I'm not looking for an answer here, this is just a report of a
> peculiar event I've observed
> and can reproduce.
>
> I'm developing a g95 (20050129) compiled package on windows xp pro
> using R-2.1.1, and gcc-3.4.2 (mingw special). An older version of the
> F95 package compiled and ran without problems. The new version of the
> package includes extensive changes in the code.
>
> The package has a test function, rtest(), which sets up a testing
> scenario and runs it.
>
> If I try to immediately load the library after starting up R and
> running rtest(), the following
> occurs:
>
>> library("bpkg")
> .onLoad: running R_g95_init
>> o = rtest()
> Testing cm.estimate...
> Using short data set (testing)...
> 25500.0000000000 2499.00000000000 11.0000000000000 300.000000000000
> ...
> 5 0.000000000000000
> 6 0.000000000000000
> Operating system error: Not enough space
> Memory allocation failed
>
> (R exits in terminal, or freezes as GUI)
>
> However, if I import a data element the rtest runs fine. I know
> rtest() doesn't need the extra data import because it runs without
> problems on our OS X version.

I would guess your package (or something it is calling) is corrupting the 
heap, or has another error in it.  I'd suggest running under gdb and 
identifying where the error message is coming from, and seeing at that 
point what is causing it.

I have some instructions for debugging R packages in Windows on
http://www.stats.uwo.ca/faculty/murdoch/software/debuggingR/.

Duncan Murdoch

>
>> library("bpkg")
> .onLoad: running R_g95_init
>> data(yij)
>> o = rtest()
> Testing cm.estimate...
> Using short data set (testing)...
> 25500.0000000000 2499.00000000000 11.0000000000000 300.000000000000
> ...
> 6 0.000000000000000
> Done
>
>>
> (R continues to run without problems)
>
> The default rtest runs a short data set because the full test data set
> takes about
> 30 seconds to compute. When I start off by running the full rtest data
> set I also
> don't have any problems with R.
>
> This package runs without problems on a G4/Tiger OS X mac with R-2.1.1, although
> we do compile it with gfortran on that platform.
>
> This is just a report. If anyone has any questions let me know.
>
> Best,
>
> Joel
>
> --
> Joel Bremson
> Graduate Student
> Institute for Transportation Studies - UC Davis
> http://etrans.blogspot.com
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From admin at biostatistic.de  Sun Oct  9 12:10:24 2005
From: admin at biostatistic.de (Knut Krueger)
Date: Sun, 09 Oct 2005 12:10:24 +0200
Subject: [Rd] Project suggestion: Interface between R and graphic devices
Message-ID: <4348EC90.8030105@biostatistic.de>

Hi to all developer,
sure that I will not be the first one with this idea but I did not found 
treads about this.
I realized that there are some user interfaces like Brodgar and SciViews.
There was used a lot of manpower to develop those programs.
On the other side I realized that it could be very helpful to have such 
programs if somebody would like to change the statistical software from 
SPSS or other commercial software to R-Statistic. The first steps would 
be more easy and the acceptance of R would be much more than with the 
command line interpreter.
It would be a great help to introduce R in the institutes, which does 
not use R just now.
One of the features of R is that it is state of the art all the time. If 
anybody would use R version 1.?? because of any graphic devise it would 
not be helpful.

So my suggestion:
Is it possible to define any interface between the R-system and the Gui 
applications, so that the GUIs, but only the interface does  need to 
rebuild if the R-system is changed.

I am out of order with programming since ten years, but it seems (but it 
not sure just now) that I have more time to oversee such a project. But 
I will need a lot of advice the first time.
I was developing the software for medical systems and this would be a 
complete new subject for me.

with regards
Knut Krueger
http://www.biostatistic.de


From ripley at stats.ox.ac.uk  Sun Oct  9 12:32:12 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 9 Oct 2005 11:32:12 +0100 (BST)
Subject: [Rd] Project suggestion: Interface between R and graphic devices
In-Reply-To: <4348EC90.8030105@biostatistic.de>
References: <4348EC90.8030105@biostatistic.de>
Message-ID: <Pine.LNX.4.61.0510091117550.27441@gannet.stats>

I think you do not mean `graphics devices' as used by R (pdf, postscript, 
X11, windows, quartz etc).

Rather I think you mean interfacing to a different front end.  That is a 
subject discussed in `Writing R Extensions' and an API for it has been 
defined for a few R versions now.

The JGR and MacGUI front ends are examples of what can be done, and 
gnoneGUI is a reference example.  There is a mailing list (R-SIG-GUI) and 
an overview page at http://www.sciviews.org/_rgui/  (I noted that JGR for 
Windows seems to need updating to work on 2.2.0: it demands 2.1.x.)

Rcmdr is a powerful example of how a cross-platform GUI can be built 
entirely in R.  In particular, my understanding is that it is specifically 
designed to ease the transition from SPSS to R.

Given that background, what more precisely do you think is needed and 
would not the R-SIG-GUI list be more appropriate?


On Sun, 9 Oct 2005, Knut Krueger wrote:

> Hi to all developer,
> sure that I will not be the first one with this idea but I did not found
> treads about this.
> I realized that there are some user interfaces like Brodgar and SciViews.
> There was used a lot of manpower to develop those programs.
> On the other side I realized that it could be very helpful to have such
> programs if somebody would like to change the statistical software from
> SPSS or other commercial software to R-Statistic. The first steps would
> be more easy and the acceptance of R would be much more than with the
> command line interpreter.
> It would be a great help to introduce R in the institutes, which does
> not use R just now.
> One of the features of R is that it is state of the art all the time. If
> anybody would use R version 1.?? because of any graphic devise it would
> not be helpful.
>
> So my suggestion:
> Is it possible to define any interface between the R-system and the Gui
> applications, so that the GUIs, but only the interface does  need to
> rebuild if the R-system is changed.
>
> I am out of order with programming since ten years, but it seems (but it
> not sure just now) that I have more time to oversee such a project. But
> I will need a lot of advice the first time.
> I was developing the software for medical systems and this would be a
> complete new subject for me.
>
> with regards
> Knut Krueger
> http://www.biostatistic.de
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Knut-krueger at einthal.de  Sun Oct  9 15:17:22 2005
From: Knut-krueger at einthal.de (Knut Krueger)
Date: Sun, 09 Oct 2005 15:17:22 +0200
Subject: [Rd] Project suggestion: Interface between R and graphic devices
In-Reply-To: <Pine.LNX.4.61.0510091117550.27441@gannet.stats>
References: <4348EC90.8030105@biostatistic.de>
	<Pine.LNX.4.61.0510091117550.27441@gannet.stats>
Message-ID: <43491862.9060102@einthal.de>



Prof Brian Ripley schrieb:

> I think you do not mean `graphics devices' as used by R (pdf, 
> postscript, X11, windows, quartz etc). 

Sorry no I do not mean such "devices"
I thought about the Graphic User Interfaces, to use the R-System with a
windows like surface http://www.sciviews.org/.
I see the difficulties for the user which want to change from SPSS or
Statistica or ? to R just inside my family.
I am using R to reproduce the SPSS results (just for fun because I want
my to learn R) my wife is using SPSS for her research program.
But it takes a long time for scientist to learn the command line syntax.
There is not time for this if the scientist is just inside a any
research ... and the scientist is mostly inside any research.

for example http://www.sciviews.org/. was broken since the new version
2.?? (I think so). But if there would be a defined interface between the
GUIs and R the developer of this interface must only change one
interface instead all developer of the  GUIs must change their GUIs
If i remember then I it was a great improvement of Linux in the past
after there was a GUI available which was like windows. This was a great
step for the acceptance of LINUX. I think this would be the same for R.
but there must be a stable interface for GUI programmers available before.
Hope this could clarify my suggestion :-)

Regards Knut


From admin at biostatistic.de  Sun Oct  9 15:25:12 2005
From: admin at biostatistic.de (Knut Krueger)
Date: Sun, 09 Oct 2005 15:25:12 +0200
Subject: [Rd] Project suggestion: Interface between R and graphic devices
In-Reply-To: <43491862.9060102@einthal.de>
References: <4348EC90.8030105@biostatistic.de>	<Pine.LNX.4.61.0510091117550.27441@gannet.stats>
	<43491862.9060102@einthal.de>
Message-ID: <43491A38.1070903@biostatistic.de>

>
>
> Prof Brian Ripley wrote:   
> Please so read the part of my message that you have silently deleted 
> here.
>
> There IS A STABLE API, as I said there. 




What could be the problem for the developer of the GUIs.
One of the Gui is only working with a 1.4? version,
one of the GUI is only working with the lower than 2.0.
and so on.
Don't they use the API or is the API not suitable for them?


Regards Knut


From phgrosjean at sciviews.org  Sun Oct  9 17:58:26 2005
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Sun, 09 Oct 2005 17:58:26 +0200
Subject: [Rd] Project suggestion: Interface between R and graphic devices
In-Reply-To: <43491862.9060102@einthal.de>
References: <4348EC90.8030105@biostatistic.de>	<Pine.LNX.4.61.0510091117550.27441@gannet.stats>
	<43491862.9060102@einthal.de>
Message-ID: <43493E22.30408@sciviews.org>

Knut Krueger wrote:
> 
> Prof Brian Ripley schrieb:
> 
> 
>>I think you do not mean `graphics devices' as used by R (pdf, 
>>postscript, X11, windows, quartz etc). 
> 
> 
> Sorry no I do not mean such "devices"
> I thought about the Graphic User Interfaces, to use the R-System with a
> windows like surface http://www.sciviews.org/.
> I see the difficulties for the user which want to change from SPSS or
> Statistica or ? to R just inside my family.
> I am using R to reproduce the SPSS results (just for fun because I want
> my to learn R) my wife is using SPSS for her research program.
> But it takes a long time for scientist to learn the command line syntax.
> There is not time for this if the scientist is just inside a any
> research ... and the scientist is mostly inside any research.
> 
> for example http://www.sciviews.org/. was broken since the new version
> 2.?? (I think so). But if there would be a defined interface between the
> GUIs and R the developer of this interface must only change one
> interface instead all developer of the  GUIs must change their GUIs
> If i remember then I it was a great improvement of Linux in the past
> after there was a GUI available which was like windows. This was a great
> step for the acceptance of LINUX. I think this would be the same for R.
> but there must be a stable interface for GUI programmers available before.
> Hope this could clarify my suggestion :-)
> 
> Regards Knut

This is not true. Version 0.8-8 of SciViews-R 
(http://www.sciviews.org/SciViews-R) is compatible with R 2.1.1. There 
were several months of delay between R 2.1.X and the compatible 
SciViews-R version... There were a lot of changes required in my code, 
because of the internationalization of R. I though translating R in 
French was a priority, so, I have been working on "R French" first. 
Also, I took a little time with my baby that was born in April... life 
is not limited to programming R!

Remember that Open Source is a collaborative and voluntary approach of 
developing software. If you want to use all the time the latest R 
version, just learn to use its standard command line interface. If you 
prefer SciViews, JGR, R Commander, etc., then you should expect some 
delay before R releases and compatible GUI releases. Indeed, one must 
say that R Commander has always been released on time with the latest R 
version, as fart as I know, and JGR is very close to. Latest SciViews 
version was very, very late. I apologize for that.

Best regards,

Philippe Grosjean


..............................................<?}))><........
  ) ) ) ) )
( ( ( ( (    Prof. Philippe Grosjean
  ) ) ) ) )
( ( ( ( (    Numerical Ecology of Aquatic Systems
  ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
  ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
( ( ( ( (
  ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
  ) ) ) ) )
( ( ( ( (    web:   http://www.umh.ac.be/~econum
  ) ) ) ) )          http://www.sciviews.org
( ( ( ( (
..............................................................


From atp at piskorski.com  Sun Oct  9 19:08:04 2005
From: atp at piskorski.com (atp@piskorski.com)
Date: Sun,  9 Oct 2005 19:08:04 +0200 (CEST)
Subject: [Rd] all.equal() improvements (PR#8191)
Message-ID: <20051009170804.0D04E1C7D9@slim.kubism.ku.dk>


--k1lZvvs/B4yU6o8G
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

The attached patch against R 2.2.0 makes the following improvements to
the all.equal() function:

1. Check names!  Stock R all.equal() (unlike S-Plus) ignores names
   completely on some objects.  I consider this wrong - if the names
   are different, the object is NOT "the same".

2. When a difference is detected, return better output to help the
   user understand just WHAT is different.

Further details are included in the code comments, but in particular,
all.equal.list() is much enhanced.  By default it still checks list
values by postion rather than name, as that behavior is more strict
and thus more correct.

But when using the by.name="auto" and by.pos=TRUE options (which are
the defaults), in addition to by-positing differences,
all.equal.list() now also reports by-name differences in those places
(and only those places) where doing so should be helpful to the user.

Also, optionally, using by.name=TRUE and by.pos=FALSE will give
behavior like S-Plus.

The attached patch is also available here:

  http://www.piskorski.com/R/patches/all-equal-patch-20051009.txt

If you want to see the entire file rather than a patch against R
2.2.0, that is also available here:

  http://www.piskorski.com/R/patches/all.equal.R

-- 
Andrew Piskorski <atp at piskorski.com>
http://www.piskorski.com/

--k1lZvvs/B4yU6o8G
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="all-equal-patch-20051009.txt"

Index: all.equal.R
===================================================================
RCS file: /home/cvsroot/dtk/Splus/patches/all.equal.R,v
retrieving revision 1.1.1.1
retrieving revision 1.4
diff -u -r1.1.1.1 -r1.4
--- all.equal.R	1 Oct 2005 06:51:06 -0000	1.1.1.1
+++ all.equal.R	1 Oct 2005 13:10:25 -0000	1.4
@@ -1,4 +1,75 @@
-all.equal <- function(target, current, ...) UseMethod("all.equal")
+#
+# This is a copy of "src/library/base/R/all.equal.R" from
+# "R-beta_2005-09-24_r35666.tar.gz", plus our modifications.  (The
+# all.equal.R in that tarball seems to be unchanged at least as far
+# back as R 2.1.0.)
+#
+# Further detail is in the comments in each function, but basically,
+# all modifications here involve either of two sorts of improvements:
+#
+# 1. Check names!  Stock R all.equal() (unlike S-Plus) ignores names
+#    completely on some objects.  I consider this bogus, if the names
+#    are different, the object is NOT "the same".
+#
+# 2. When the object is different, return more output to help the user
+#    understand just WHAT is different.
+#
+# Note: Here in our patches package, we purposely CVS import and than
+# override ALL the base all.equal() methods, NOT just the ones we're
+# actually modifying.  At first I tried only overriding some of them,
+# but in that case, even though package:patches was earlier on the
+# search path than package:base, base methods appeared to
+# preferentially call the original base versions, rather than the
+# patches versions that I wanted.  So, big hammer it, override
+# everything - which will probably make it easier to contribute these
+# improvements back to stock R anyway.
+#
+# --atp at piskorski.com, 2005/10/01 02:29 EDT
+#
+# $Id: all.equal.R,v 1.4 2005/10/01 13:10:25 andy Exp $
+
+
+# In S-Plus, all.equal() prefers to index objects by name, while in
+# stock R, it prefers to index by position.  IMO, *NEITHER* of those
+# behaviors are fully correct.  What we really want is to compare
+# things BOTH by name and by position.
+#
+# Here's ONE example of the effect of these R patches:
+#
+## S-Plus 6.2, no patches to all.equal():
+#> all.equal(list(a=2,2,x=3,zap=1,foo=42,"NA"=T) ,list(b=1,2,y=4,foo=7,zap=1,"NA"=F))
+#[1] "Names: 4 string mismatches"                        
+#[2] "Components not in target: b, y"                    
+#[3] "Components not in current: a, x"                   
+#[4] "Component foo: Mean relative difference: 0.8333333"
+#[5] "Component NA: Mean relative difference: 1"         
+#
+## R 2.1.0, no patches to all.equal():
+#> all.equal(list(a=2,2,x=3,zap=1,foo=42,"NA"=T) ,list(b=1,2,y=4,foo=7,zap=1,"NA"=F))
+#[1] "Names: 4 string mismatches"                       
+#[2] "Component 1: Mean relative  difference: 0.5"      
+#[3] "Component 3: Mean relative  difference: 0.3333333"
+#[4] "Component 4: Mean relative  difference: 6"        
+#[5] "Component 5: Mean relative  difference: 0.9761905"
+#[6] "Component 6: Mean relative  difference: 1"        
+#
+## R 2.1.0 with our patches here:
+#> all.equal(list(a=2,2,x=3,zap=1,foo=42,"NA"=T) ,list(b=1,2,y=4,foo=7,zap=1,"NA"=F))
+# [1] "Names: 4 string mismatches"                         
+# [2] "Components not in target: b, y"                     
+# [3] "Components not in current: a, x"                    
+# [4] "Component foo: Mean relative  difference: 0.8333333"
+# [5] "Component NA: Mean relative  difference: 1"         
+# [6] "Component 1: Mean relative  difference: 0.5"        
+# [7] "Component 3: Mean relative  difference: 0.3333333"  
+# [8] "Component 4: Mean relative  difference: 6"          
+# [9] "Component 5: Mean relative  difference: 0.9761905"  
+#[10] "Component 6: Mean relative  difference: 1"          
+
+
+#all.equal.original.fcn <- get("all.equal" ,pos="package:base")
+all.equal <- function(target, current, ... ,debug.p=FALSE) UseMethod("all.equal")
+
 
 ## NO:  is.*(x) should be like S4  is(x, *) ! -- use  isTRUE(all.equal(*))
 ## is.all.equal <- function(target, current, ...)
@@ -32,23 +103,32 @@
 function(target, current, tolerance = .Machine$double.eps ^ .5,
          scale=NULL, ...)
 {
-    if(data.class(target) != data.class(current))
-        return(paste("target is ", data.class(target), ", current is ",
-		       data.class(current), sep = ""))
+    msg <- attr.all.equal(target, current ,...)
+    if(data.class(target) != data.class(current)) {
+        msg <- c(msg ,paste("target is ", data.class(target), ", current is ",
+                            data.class(current), sep = ""))
+        return(msg)
+    }
+
     lt <- length(target)
     lc <- length(current)
     cplx <- is.complex(target)
-    if(lt != lc)
-	return(paste(if(cplx)"Complex" else "Numeric",
-                     ": lengths (", lt, ", ", lc, ") differ", sep = ""))
+    if(lt != lc) {
+        msg <- c(msg ,paste(if(cplx)"Complex" else "Numeric",
+                            ": lengths (", lt, ", ", lc, ") differ", sep = ""))
+	return(msg)
+    }
     target <- as.vector(target)
     current <- as.vector(current)
     out <- is.na(target)
-    if(any(out != is.na(current)))
-	return(paste("`is.NA' value mismatches:", sum(is.na(current)),
-		     "in current,", sum(out), " in target"))
+    if(any(out != is.na(current))) {
+        msg <- c(msg ,paste("`is.NA' value mismatches:", sum(is.na(current)),
+                            "in current,", sum(out), " in target"))
+	return(msg)
+    }
     out <- out | target == current
-    if(all(out)) return(TRUE)
+    if(all(out)) { if (is.null(msg)) return(TRUE) else return(msg) }
+
     target <- target[!out]
     current <- current[!out]
     xy <- mean((if(cplx)Mod else abs)(target - current))
@@ -63,29 +143,37 @@
 	    xy <- xy/scale
 	    "scaled"
 	}
+
     if(is.na(xy) || xy > tolerance)
-	paste("Mean", what, if(cplx)"Mod", "difference:", format(xy)) else TRUE
+       msg <- c(msg ,paste("Mean", what, if(cplx)"Mod", "difference:", format(xy)))
+
+    if(is.null(msg)) TRUE else msg
 }
 
 all.equal.character <- function(target, current, ...)
 {
-    if(data.class(target) != data.class(current))
-        return(paste("target is ", data.class(target), ", current is ",
-		       data.class(current), sep = ""))
+    msg <- attr.all.equal(target, current ,...)
+    if(data.class(target) != data.class(current)) {
+        msg <- c(msg ,paste("target is ", data.class(target), ", current is ",
+                            data.class(current), sep = ""))
+        return(msg)
+    }
     lt <- length(target)
     lc <- length(current)
     if(lt != lc) {
-	msg <- paste("Lengths (", lt, ", ", lc,
+	msg <- c(msg ,paste("Lengths (", lt, ", ", lc,
 		     ") differ (string compare on first ", ll <- min(lt, lc),
-		     ")", sep = "")
+		     ")", sep = ""))
 	ll <- seq(length = ll)
 	target <- target[ll]
 	current <- current[ll]
-    } else msg <- NULL
+    }
     nas <- is.na(target)
-    if (any(nas != is.na(current)))
-        return(paste("`is.NA' value mismatches:", sum(is.na(current)),
+    if (any(nas != is.na(current))) {
+        msg <- c(msg ,paste("`is.NA' value mismatches:", sum(is.na(current)),
                      "in current,", sum(nas), " in target"))
+        return(msg)
+    }
     ne <- !nas & (target != current)
     if(!any(ne) && is.null(msg)) TRUE
     else if(any(ne)) c(msg, paste(sum(ne), "string mismatches"))
@@ -141,76 +229,205 @@
     if(is.null(msg)) TRUE else msg
 }
 
-all.equal.list <- function(target, current, ...)
-{
-    msg <- attr.all.equal(target, current, ...)
-#    nt <- names(target)
-    nc <- names(current)
-    iseq <-
-        ## <FIXME>
-        ## Commenting this eliminates PR#674, and assumes that lists are
-        ## regarded as generic vectors, so that they are equal iff they
-        ## have identical names attributes and all components are equal.
-        ## if(length(nt) && length(nc)) {
-        ##     if(any(not.in <- (c.in.t <- match(nc, nt, 0)) == 0))
-        ## 	msg <- c(msg, paste("Components not in target:",
-        ## 			    paste(nc[not.in], collapse = ", ")))
-        ##     if(any(not.in <- match(nt, nc, 0) == 0))
-        ## 	msg <- c(msg, paste("Components not in current:",
-        ## 			    paste(nt[not.in], collapse = ", ")))
-        ##     nt[c.in.t]
-        ## } else
-        ## </FIXME>
-        if(length(target) == length(current)) {
-	    seq(along = target)
-	} else {
-	    nc <- min(length(target), length(current))
-	    msg <- c(msg, paste("Length mismatch: comparison on first",
-				nc, "components"))
-	    seq(length = nc)
-	}
-    for(i in iseq) {
-	mi <- all.equal(target[[i]], current[[i]], ...)
-	if(is.character(mi))
-	    msg <- c(msg, paste("Component ", i, ": ", mi, sep=""))
-    }
-    if(is.null(msg)) TRUE else msg
+all.equal.list <- function
+(target, current, ..., by.name="auto", by.pos=TRUE, debug.p=FALSE) {
+   # This is copied from "R-beta_2005-09-24_r35666.tar.gz" (which
+   # seems to be unchangd since at least R 2.1.0) and then
+   # modified.
+   #
+   # The stock implementation checked names (and other attributes)
+   # on the list itself but NOT on the components of the list!  We
+   # fix that below.  Furthermore, when reporting differences, it
+   # is much more helpful to report the name-indexed as well as
+   # position-indexed differences, so do that too.
+   #
+   # See also:
+   #   http://r-bugs.biostat.ku.dk/cgi-bin/R/Language-fixed?id=674
+   #   https://stat.ethz.ch/pipermail/r-devel/2000-October/thread.html#21323
+   #
+   # --atp at piskorski.com, 2005/09/27 20:32 EDT
+
+   # - by.name:  When set to "auto" (and by.pos=T), we display the
+   #   by.name=T messages if and only if the by.pos=T checks found
+   #   that one or more names differ.  This is particularly useful for
+   #   data frames, as it immediately disambiguates the "columns are
+   #   just in different orders" vs. "columns of the same name really
+   #   do have different values" cases.
+
+   msg <- attr.all.equal(target, current, ... ,debug.p=debug.p)
+
+   recurse <- function(by.which ,show.other.p) {
+      msg <- c()
+      if (by.which == "name") {
+         by.name <- TRUE ; by.pos <- FALSE
+      } else {
+         by.pos <- TRUE
+         if (by.name != "auto") by.name <- FALSE
+      }
+
+      for (i in iseq) {
+         other.str <- ""
+         mi <- all.equal(target[[i]], current[[i]], ...
+                         ,by.name=by.name ,by.pos=by.pos ,debug.p=debug.p)
+         if (is.character(mi)) {
+            names.differ.p <- F
+            if (by.which == "pos") {
+               name.c <- nc[[i]] ; name.t <- nt[[i]]
+               tmp <- (name.c == name.t)
+               if (length(name.c)==0 && length(name.t)==0) {
+                  # No names at all, show nothing.
+               } else if (length(tmp) && !is.na(tmp) && tmp) {
+                  # Names are the same, only show one:
+                  other.str <- paste(" (" ,name.c ,")" ,sep="")
+               } else {
+                  # Current and Target names differ, show both:
+                  other.str <- paste(" (" ,name.c ," / " ,name.t ,")" ,sep="")
+                  names.differ.p <- T
+               }
+            }
+            msg <- c(msg, paste("Component ", i, other.str, ": ", mi, sep=""))
+
+            if (by.which == "pos" && names.differ.p && by.name == "auto") {
+               tmp <- which(name.c == names(target))
+               if (length(tmp)==0) {
+                  ## This is redundant with the "names not in Target:"
+                  ## message we already printed out:
+                  #msg <- c(msg, paste("Component ", name.c, ": ", "Not in Target.", sep=""))
+               } else {
+                  if (length(tmp) > 1) {
+                     msg <- c(msg, paste("Warning:" ,length(tmp) ,"components in Target w/ name:" ,name.c))
+                     # The code below will check only the first named component:
+                  }
+                  mi <- all.equal(target[[name.c]] ,current[[name.c]] ,...
+                                  ,by.name=TRUE ,by.pos=FALSE ,debug.p=debug.p)
+                  if (is.character(mi))
+                     msg <- c(msg, paste("Component ", name.c, ": ", mi, sep=""))
+                  else
+                     msg <- c(msg, paste("Component ", name.c, ": ", "[same]", sep=""))
+               }
+            }
+         }
+      }
+      return(msg)
+   }
+
+   if (by.name==FALSE && !by.pos)
+      stop("Cannot have both by.pos and by.name False!")
+   if (!is.logical(by.name) && by.name != "auto")
+      stop(paste("Invalid value for by.name:" ,by.name))
+   nt <- names(target) ; nc <- names(current)
+
+   if (by.name == TRUE && length(nt) > 0 && length(nc) > 0) {
+      ## These "Components not in" messages are redundant with the
+      ## "names not in" messages we've already printed out:
+      ## --atp at piskorski.com, 2005/10/01 08:05 EDT
+      if(any(not.in <- (c.in.t <- match(nc, nt, 0)) == 0)) {
+         #msg <- c(msg, paste("Components not in target:", paste(nc[not.in], collapse = ", ")))
+      }
+      #if(any(not.in <- match(nt, nc, 0) == 0)) {
+      #   msg <- c(msg, paste("Components not in current:", paste(nt[not.in], collapse = ", ")))
+      #}
+      iseq <- nt[c.in.t]
+      msg <- c(msg ,recurse(by.which="name"))
+   }
+
+   if (by.pos) {
+      iseq <-
+         (if(length(target) == length(current)) {
+            seq(along = target)
+         } else {
+            tmp <- min(length(target), length(current))
+            msg <- c(msg, paste("Length mismatch: comparison on first",
+                                tmp, "components"))
+            seq(length = tmp)
+         })
+      msg <- c(msg ,recurse(by.which="pos"))
+   }
+
+   if(is.null(msg)) TRUE else msg
 }
 
+
 
-attr.all.equal <- function(target, current, ...)
-{
-    ##--- "all.equal(.)" for attributes ---
-    ##---  Auxiliary in all.equal(.) methods --- return NULL or character()
-    msg <- NULL
-    if(mode(target) != mode(current))
-	msg <- paste("Modes: ", mode(target), ", ", mode(current), sep = "")
-    if(length(target) != length(current))
-	msg <- c(msg, paste("Lengths: ", length(target), ", ",
-			    length(current), sep = ""))
-    ax <- attributes(target)
-    ay <- attributes(current)
-    nx <- names(target)
-    ny <- names(current)
-    if((lx <- length(nx)) | (ly <- length(ny))) {
-	## names() treated now; hence NOT with attributes()
-	ax$names <- ay$names <- NULL
-	if(lx && ly) {
-	    if(is.character(m <- all.equal.character(nx, ny)))
-		msg <- c(msg, paste("Names:", m))
-	} else if(lx)
-	    msg <- c(msg, "names for target but not for current")
-	else msg <- c(msg, "names for current but not for target")
-    }
-    if(length(ax) || length(ay)) {# some (more) attributes
-	## order by names before comparison:
-	nx <- names(ax)
-	ny <- names(ay)
-	if(length(nx))	    ax <- ax[order(nx)]
-	if(length(ny))	    ay <- ay[order(ny)]
-	tt <- all.equal(ax, ay, ...)
-	if(is.character(tt)) msg <- c(msg, paste("Attributes: <", tt, ">"))
-    }
-    msg # NULL or character
+attr.all.equal <- function(target, current, ... ,debug.p=FALSE) {
+   # Based on stock "R-beta_2005-09-24_r35666.tar.gz".  Differences are:
+   # - Also report WHICH names differ.
+   # - Do same checks on row.names and dimnames (if present) as on
+   #   names.
+   # --atp at piskorski.com, 2005/10/01 01:16 EDT
+
+   ##--- "all.equal(.)" for attributes ---
+   ##---  Auxiliary in all.equal(.) methods --- return NULL or character()
+   msg <- NULL
+   if(mode(target) != mode(current))
+      msg <- paste("Modes: ", mode(target), ", ", mode(current), sep = "")
+   if(length(target) != length(current))
+      msg <- c(msg, paste("Lengths: ", length(target), ", ",
+                          length(current), sep = ""))
+   ax <- attributes(target)
+   ay <- attributes(current)
+
+   local.compare.names <- function() {
+      msg <- c()
+      if(lx && ly) {
+         if(is.character(m <- all.equal.character(nx, ny ,debug.p=debug.p))) {
+            msg <- c(msg, paste("Names:", m))
+            not.in <- setdiff(ny ,nx)
+            if (length(not.in) > 0)
+               msg <- c(msg, paste(length(not.in) ,name.type.pretty
+                                   ,"not in Target:"
+                                   ,paste(not.in,collapse=", ")))
+            not.in <- setdiff(nx ,ny)
+            if (length(not.in) > 0)
+               msg <- c(msg, paste(length(not.in) ,name.type.pretty
+                                   ,"not in Current:"
+                                   ,paste(not.in,collapse=", ")))
+         }
+      } else if(lx) {
+         msg <- c(msg ,name.type.pretty ,"for Target but not for Current")
+      } else { msg <- c(msg ,name.type.pretty ,"for Current but not for Target") }
+      return(msg)
+   }
+
+   nx <- names(target) ; ny <- names(current)
+   if((lx <- length(nx)) | (ly <- length(ny))) {
+      ## names() treated now; hence NOT with attributes()
+      ax$names <- ay$names <- NULL
+      name.type.pretty <- "names"
+      msg <- c(msg ,local.compare.names())
+   }
+   if (any(names(ax) == "row.names") && any(names(ay) == "row.names")) {
+      nx <- row.names(target) ; ny <- row.names(current)
+      if((lx <- length(nx)) | (ly <- length(ny))) {
+         ## row.names() treated now; hence NOT with attributes():
+         ax$row.names <- ay$row.names <- NULL
+         name.type.pretty <- "row.names"
+         msg <- c(msg ,local.compare.names())
+      }
+   }
+   if (any(names(ax) == "dimnames") && any(names(ay) == "dimnames")) {
+      # We destructively remove dimnames, so loop from highest to lowest:
+      for (dim.i in length(dimnames(target)):1) {
+         nx <- dimnames(target)[[dim.i]] ; ny <- dimnames(current)[[dim.i]]
+         if((lx <- length(nx)) | (ly <- length(ny))) {
+            ## dimnames()[[dim.i]] treated now; hence NOT with attributes():
+            ax$dimnames[[dim.i]] <- ay$dimnames[[dim.i]] <- NULL
+            name.type.pretty <- paste("dimnames[[" ,dim.i ,"]]" ,sep="")
+            msg <- c(msg ,local.compare.names())
+         }
+      }
+   }
+
+   if(length(ax) || length(ay)) {# some (more) attributes
+      ## order by names before comparison:
+      nx <- names(ax)
+      ny <- names(ay)
+      if(length(nx))	    ax <- ax[order(nx)]
+      if(length(ny))	    ay <- ay[order(ny)]
+      tt <- all.equal(ax, ay, ... ,debug.p=debug.p)
+      if(is.character(tt)) msg <- c(msg, paste("Attributes: <", tt, ">"))
+   }
+
+   msg # NULL or character
 }
 

--k1lZvvs/B4yU6o8G--


From Knut-krueger at einthal.de  Sun Oct  9 19:19:06 2005
From: Knut-krueger at einthal.de (Knut Krueger)
Date: Sun, 09 Oct 2005 19:19:06 +0200
Subject: [Rd] Project suggestion: Interface between R and graphic devices
In-Reply-To: <43493E22.30408@sciviews.org>
References: <4348EC90.8030105@biostatistic.de>	<Pine.LNX.4.61.0510091117550.27441@gannet.stats>
	<43491862.9060102@einthal.de> <43493E22.30408@sciviews.org>
Message-ID: <4349510A.7080107@einthal.de>



Philippe Grosjean schrieb:

>
> This is not true. Version 0.8-8 of SciViews-R 
> (http://www.sciviews.org/SciViews-R) is compatible with R 2.1.1. There 
> were several months of delay between R 2.1.X and the compatible 
> SciViews-R version... There were a lot of changes required in my code, 
> because of the internationalization of R. I though translating R in 
> French was a priority, so, I have been working on "R French" first. 
> Also, I took a little time with my baby that was born in April... life 
> is not limited to programming R!

Congratulations I know the time when my boy was born.

>
> Remember that Open Source is a collaborative and voluntary approach of 
> developing software. 


Please don't misunderstand my question.
We developed a couple of (commercial) programs for medical university use.
On  of the required things were compatible interfaces between different 
hardware and software parts.
for example:
There was a definition of a function call:

function (Var1, Var2, ....., Version)
begin

case version of
version1:  ...
version2  ...

end {case}
end {function}

This functions and procedures did the communication between different 
versions of hard an software.

And the open source community is the best development environment to 
develop and take care for such API.
So back to my suggestion.
You told me that you must do a lot of changes in your GUI. If there 
would be one API which is serving a couple of old R Versions, then all 
running systems of GUIs would be running even the code for the latest 
R-version is changed. And only one part of the code must be changed not 
all available GUIs.


> If you want to use all the time the latest R version, just learn to 
> use its standard command line interface. 

Some of the user want to use the newest command line interface some of 
(the newbies) want to use GUIs

> If you prefer SciViews, JGR, R Commander, etc., then you should expect 
> some delay before R releases and compatible GUI releases. Indeed, one 
> must say that R Commander has always been released on time with the 
> latest R version, as fart as I know, and JGR is very close to. 

and this is the point that I thought maybe there could be some 
improvement with an universal API for GUIs

> Latest SciViews version was very, very late. I apologize for that. 

Please don't think that this was my intention  - it was just the other 
side. I realized that there was a long time especially for your nice GUI 
and I thought:
It seems to be wasted time if Mr Grosjean must always do such a lot work 
after there is a new version of R. And therefor I tough about something 
to do for the R-Community.

But dear community please see this suggestion in a manner that I do not 
have any knowledge about the work of the core team but that I am 
fascinated about the work, but that I am not able to win user for R 
because of problems with missing or not working GUIs.

Missing:
I do not know whether you know Wordperfect Office. They want the user to 
change from MS-Office.
They build in a function: Switch to Word Mode, or switch to Powerpoint 
Mode. and this is the point to get Statistica user and SPSS user away 
from their programs.

medium universities in Germany have between 500 and 1000 licences for 
SPSS. What a lot of money which is not available for the researchers

Conclusion.
I did not want a just ready solution, but I thought about some steps for 
the next years.
There is an API available if I understand Prof. Ripley right, but then I 
do not understand the problems of the GUI developer.

And please again I do not want to blame anybody of any development team 
I want to understand the project.



>


From simon.urbanek at r-project.org  Sun Oct  9 20:57:33 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Sun, 9 Oct 2005 14:57:33 -0400
Subject: [Rd] Project suggestion: Interface between R and graphic devices
In-Reply-To: <4349510A.7080107@einthal.de>
References: <4348EC90.8030105@biostatistic.de>	<Pine.LNX.4.61.0510091117550.27441@gannet.stats>
	<43491862.9060102@einthal.de> <43493E22.30408@sciviews.org>
	<4349510A.7080107@einthal.de>
Message-ID: <1B30AC09-9A1F-451B-9C6A-99010FD13C71@r-project.org>

Knut,

On Oct 9, 2005, at 1:19 PM, Knut Krueger wrote:

>> If you prefer SciViews, JGR, R Commander, etc., then you should  
>> expect
>> some delay before R releases and compatible GUI releases. Indeed, one
>> must say that R Commander has always been released on time with the
>> latest R version, as fart as I know, and JGR is very close to.
>>
>
> and this is the point that I thought maybe there could be some   
> improvement with an universal API for GUIs


As Brian was pointing out there is such an API and as with all APIs  
it is allowed to improve between releases. All projects allow this  
including unix UI projects you mentioned. In most cases the update of  
the GUI for a next R version consists of re-compiling the GUI, that's  
all. Again, this is always necessary, independent of the API, for  
various reasons (some of them platform-dependent such as that with  
new R version the location of the R dynamic library may have changed).

The API changes usually add new functionality and hence new  
possibilities. As Philippe was saying, the delays are then not  
because of API changes, but because the GUI authors want to take  
advantage of that new functionality. (In the last 6 releases of R I  
remember only two restructuring changes in the API, both taking less  
than 5 lines of code to adapt to - modulo graphics devices, of course).

I didn't check all the GUIs, but for JGR I can say that you can get  
it immediately at the time of R release if you compile it from  
sources. From my point of view I can say that building and testing of  
installers and binaries takes far more time than fixing the code for  
API changes. If you are willing to build and test binaries during the  
R beta phase, you're encouraged to do so - that would make the GUI  
available right on time for the R release.

Cheers,
Simon


From atp at piskorski.com  Sun Oct  9 21:04:44 2005
From: atp at piskorski.com (atp@piskorski.com)
Date: Sun,  9 Oct 2005 21:04:44 +0200 (CEST)
Subject: [Rd] [ subscripting sometimes loses names (PR#8192)
Message-ID: <20051009190444.CFC711C79C@slim.kubism.ku.dk>


--rwEMma7ioTxnRzrJ
Content-Type: text/plain; charset=us-ascii
Content-Disposition: inline

R, like recent versions of S-Plus, sometimes - but not always - loses
names when subscripting objects with "[".  (Earlier versions of S and
S-Plus had the correct, name-preserving behavior.)  This seems bad, it
would be better to remove names only by explicit request, not as an
accidental side-effect of some (but not all) subscripting operations.

This issue was also discusses back in 2001 on the S-News list:

  http://www.biostat.wustl.edu/archives/html/s-news/2001-09/msg00020.html

The attached file, "fix-names.s", is also available here:

  http://www.piskorski.com/R/patches/fix-names.s

It includes:

1. The function dtk.test.brace.names(), which demonstrates name losing
problem, and can automatically report which test cases pass/fail, etc.

2. Wrappers for the "[" and "[.data.frame" functions which fix the
losing names problem for all the cases I've tried.

Note that dtk.test.brace.names(T) will always run all its test cases
and return their output for human inspection.  However, its checks to
see whether each test passes or fails only work correctly with the
patched all.equal() in PR#8191.

My coworkers and I have been using these wrapper functions for ALL
code we run for many months now, with no problems so far.  However,
there are probably some cases we don't use, like objects with S4
classes, which don't work right with these wrappers.

I assume the R core team would NOT want to use these wrapper
functions, but would instead prefer to change the underlying code
directly.  However, I offer them as an example of one way to achieve
what we believe to be the correct name-preserving behavior in R.

I would appreciate any suggestions on how to better implement this
name-preserving behavior for all R subscripting operations.

-- 
Andrew Piskorski <atp at piskorski.com>
http://www.piskorski.com/

--rwEMma7ioTxnRzrJ
Content-Type: text/plain; charset=us-ascii
Content-Disposition: attachment; filename="fix-names.s"


dtk.null <- function(...) {}

#
# Fix loss of dimnames when subcripting with "[":
#
# According to Gary Sabot <gary at sabot.com>, S-Plus originally had the
# correct name-preserving behavior we want.  Then in 1996 Insightful
# broke that in Splus 3.4, which Gary fixed for his own use.  In 2001,
# Splus 6.0 broke something in Gary's fix, he posted questions to the
# s-news list, generating discussion, including some shock that anyone
# could think that arbitrarily losing dimnames made sense:
# 
#   http://www.biostat.wustl.edu/archives/html/s-news/2001-09/msg00020.html
#
# Unfortunately R seems to mimic much of the more recent buggy S-Plus
# behavior!  Thus our patches to both S-Plus and R below.  To test
# that they do the right thing, run dtk.test.brace.names().
#
# Note that currently these patches wrap the stock subscripting
# functions, they do NOT replace them.  TODO: Investigate fixing the
# stock implementation instead, especially for R.
#
# --atp at piskorski.com, 2005/09/27 17:03 EDT
#

if (!.R.) { # For S-Plus:

   # First make sure that if you run this twice, you still get the
   # real original function:
   data.frame.original.fcn <- get("[.data.frame", where="splus")

   # For S-Plus (at least version 6.2.1) we do not need to override
   # the "[" function, it already does the right thing.
   # --atp at piskorski.com, 2005/07/01 10:11 EDT

   "[.data.frame" <- function(x ,... ,drop=T) {

      # TODO: Problem: New lm() is dying with my patch, because it indexes something
      # and produces something that looks like it has 2 cols, but ncol returns 1.
      # I can detect/avoid this case since it has class = c("model.frame", "data.frame")
      # see test case below where I figured out this issue in case it needs further work.

      class.x <- class(x)
      caller <- sys.call(sys.parent())[[2]]
      if (length(class.x)==1 && class.x=="data.frame" &&
          (mode(caller) != "name" || (caller != "value"))) {
         # If caller is a name and it is "value", then it is the
         # lhs case that we just want the original fcn to handle:

         result <- data.frame.original.fcn(x, ..., drop=F)

         if (drop && length(ncol(result) > 0) && ncol(result)==1) {
            save.names <- dimnames(result)[[1]]
            #this approach works for factors too
            result <- result[[1]]
            names(result) <- save.names

            # TODO: Unfortunately still broken for objects with new
            # style classes, since it does not distinguish among
            # methods that have or do not have a getnames method.
            # library(missing) is an example: The multiple imputations
            # on an object get lost if subscripted with this function.
         } else {
            if (!missing(drop) && drop && length(nrow(result)) > 0 && nrow(result)==1) {
               #replicate documented behavior of [.data.frame: drop=T acts
               #differently then missing drop arg for this case!
               result <- as.list(result)
            } 
         }
      } else {
         result <- data.frame.original.fcn(x, ..., drop=F)     
      }
      result
   }

} else { # For R:
   # First make sure that if you run this twice, you still get the
   # real original function:

   # Also remove the obnoxious "drop argument will be ignored" warning
   # entirely from the function.  I would like to regsub out the whole
   # warning() call, but I can't seem to get that to work.  So, just
   # replace the first warning() call with a call to our dtk.null()
   # function which does nothing.  Fortunately, the warning() call we
   # want to get rid of is indeed the first (actually the only) one:
   # --atp at piskorski.com, 2005/07/01 17:53 EDT

   brace.original.fcn <- get("[",pos="package:base")
   data.frame.original.fcn.0 <- get("[.data.frame",pos="package:base")
   data.frame.original.fcn <- data.frame.original.fcn.0
   body(data.frame.original.fcn) <-
      parse(text=sub('warning(..?drop argument will be ignored..?)'  ,'dtk.null()'
              ,deparse(body(data.frame.original.fcn.0)) ,ignore.case=T))

   # For R (at least version 2.1.0) we need to override BOTH the
   # "[.data.frame" and "[" functions.
   # --atp at piskorski.com, 2005/07/01 10:11 EDT

   "[.data.frame" <- function(x ,i ,j ,... ,drop=T) {

      # The stock R default value for the drop arg is:
      #   drop=(if(missing(i)) TRUE else length(names(x)) == 1)
      # However, that DOES cause certain differences from S-Plus, so
      # we do NOT use it.  --atp at piskorski.com, 2005/07/01 13:18 EDT

      # TODO: Does above S-Plus problem with lm() also apply here?
      # --atp at piskorski.com, 2005/07/01 10:51 EDT

      class.x <- class(x)
      caller <- sys.call(sys.parent())[[2]]
      if (length(class.x)==1 && class.x=="data.frame" &&
          (mode(caller) != "name" || (caller != "value"))) {
         # If caller is a name and it is "value", then it is the
         # lhs case that we just want the original fcn to handle:

         code <- 'data.frame.original.fcn(x,'
         if (!missing(i))    code <- paste(code ,'i' ,sep="")
         if (length(dim(x)) > 1 && (missing(i) || length(dim(i)) <= 1))
            code <- paste(code ,',' ,sep="")
         if (!missing(j))    code <- paste(code ,'j' ,sep="")
         if (!missing(...))  code <- paste(code ,',...' ,sep="")
         code <- paste(code ,',drop=F' ,sep="")
         code <- paste(code ,')' ,sep="")
         #cat("Debug: code to eval:  ") ; print(code)
         result <- eval(parse(text=code))

         if (drop && length(ncol(result) > 0) && ncol(result)==1) {
            save.names <- dimnames(result)[[1]]
            #this approach works for factors too
            result <- result[[1]]
            names(result) <- save.names

            # TODO: Unfortunately still broken for objects with new
            # style classes, since it does not distinguish among
            # methods that have or do not have a getnames method.
            # library(missing) is an example: The multiple imputations
            # on an object get lost if subscripted with this function.
         } else {
            if (!missing(drop) && drop && length(nrow(result)) > 0 && nrow(result)==1) {
               #replicate documented behavior of [.data.frame: drop=T acts
               #differently then missing drop arg for this case!
               result <- as.list(result)
            } 
         }
      } else {
         if (missing(i))
            result <- data.frame.original.fcn(x ,... ,drop=F)
         else if (missing(j))
            result <- data.frame.original.fcn(x ,i ,... ,drop=F)
         else
            result <- data.frame.original.fcn(x ,i ,j ,... ,drop=F)
      }
      result
   }

   # R has this problem with NA names:
   # 
   #   # S-Plus 6.2.1:
   #   > foo <- c("a"=1,"b"=2,"c"=3)
   #   > foo[c("a","c","atp")]
   #    a c atp 
   #    1 3  NA
   # 
   #   # R 2.0.0, or 2.1.0:
   #   > foo <- c("a"=1,"b"=2,"c"=3)
   #   > foo[c("a","c","atp")]
   #      a    c <NA> 
   #      1    3   NA 
   #
   # This is very very bad, it causes soft "you just get different
   # results" bugs when running our nag.optimize() from R, and
   # probably in many other places in our code as well.
   # --atp at piskorski.com, 2005/06/30 17:40 EDT

   "[" <- function(x ,i ,j ,... ,drop=TRUE) {

      # We MUST be able to blank positional arguments, and it seems
      # that do.call() gives us no way to do that, so use eval():
      # --atp at piskorski.com, 2005/07/01 16:00 EDT

      code <- 'brace.original.fcn(x,'
      if (!missing(i))    code <- paste(code ,'i' ,sep="")
      if (length(dim(x)) > 1 && (missing(i) || length(dim(i)) <= 1))
         code <- paste(code ,',' ,sep="")
      if (!missing(j))    code <- paste(code ,'j' ,sep="")
      if (!missing(...))  code <- paste(code ,',...' ,sep="")
      if (!missing(drop)) code <- paste(code ,',drop=drop' ,sep="")
      code <- paste(code ,')' ,sep="")
      #cat("Debug: code to eval:  ") ; print(code)
      result <- eval(parse(text=code))

      # This fix is being really specific, it handles this:
      #      x[i]
      # But does not try to handle this:
      #      x[i, j, ... , drop = TRUE]
      # --atp at piskorski.com, 2005/06/30 17:40 EDT

      if (is.null(attributes(x)$class) && length(list(...)) == 0) {
         # Just a simple index operation on a vector or list:
         new.names <- names(result)
         if (length(new.names) > 0) {
            # Names are present:
            bad.names <- is.na(new.names)
            if (any(bad.names)) {
               # Some names are NA, so fix them:
               names(result)[bad.names] <- brace.original.fcn(i ,bad.names)
            }
         }
      }
      result
   }
}


dtk.test.brace.names <- function
(return.results.p=F  ,only="all") {
   # Some simple test cases for our patched "[.data.frame" and "[" functions:

   # Note that return.results.p=T will always work correctly, but
   # automatically deciding if those results are CORRECT will ONLY
   # work if using our patched all.equal() from PR#8191, which is
   # available here:
   #   http://r-bugs.biostat.ku.dk/cgi-bin/R/incoming?id=8191
   # --atp at piskorski.com, 2005/10/09 13:23 EDT

   ### Examples of correct output for the cases below:
   # > (c("a"=1,"b"=2,"c"=3)[c("a","c","no")])
   #  a c no 
   #  1 3 NA
   # > (cbind(col1=c(a=1,b=2,c=3) ,col2=c(4:6))[c(1,2),2])
   #  a b 
   #  4 5
   # > (cbind(col1=c(a=1,b=2,c=3) ,col2=c(4:6))[c(3,2,1),2])
   #  c b a 
   #  6 5 4
   # > (cbind(col1=c(a=1,b=2) ,col2=c(3:4))[,2])
   #  a b 
   #  3 4
   # > (cbind(col1=c(a=1,b=2) ,col2=c(3:4))[2,])
   #  col1 col2 
   #     2    4
   # > (cbind(col1=c(a=1,b=2) ,col2=c(3:4))[2,,drop=T])
   #  col1 col2 
   #     2    4
   # > (cbind(col1=c(a=1,b=2) ,col2=c(3:4))[2,,drop=F])
   #   col1 col2 
   # b    2    4

   mm <- matrix(1:25 ,nrow=5 ,ncol=5 ,dimnames=list(letters[1:5],letters[6:10]))
   idx <- 1:(dim(mm)[1])
   mm.df <- as.data.frame(mm)

   results <-
      list( "vec.1"=list((c("a"=1,"b"=2,"c"=3)[c("a","c","no")])  ,c(a=1 ,c=3 ,no=NA) )
           ,"diag.1"=list(   mm[cbind(idx,idx)]  ,c(1,7,13,19,25) )
           ,"diag.2"=list(mm.df[cbind(idx,idx)]  ,c(1,7,13,19,25) )
           ,"df.a.1"=list((           cbind(col1=c(a=1,b=2,c=3) ,col2=c(4:6)) [c(1,2),2])    ,c(a=4,b=5)                    ) 
           ,"df.b.1"=list((data.frame(cbind(col1=c(a=1,b=2,c=3) ,col2=c(4:6)))[c(1,2),2])    ,c(a=4,b=5)                    ) 
           ,"df.a.2"=list((           cbind(col1=c(a=1,b=2,c=3) ,col2=c(4:6)) [c(3,2,1),2])  ,c(c=6,b=5,a=4)                )
           ,"df.b.2"=list((data.frame(cbind(col1=c(a=1,b=2,c=3) ,col2=c(4:6)))[c(3,2,1),2])  ,c(c=6,b=5,a=4)                )
           ,"df.a.3"=list((           cbind(col1=c(a=1,b=2) ,col2=c(3:4)) [,2])              ,c(a=3,b=4)                    )
           ,"df.b.3"=list((data.frame(cbind(col1=c(a=1,b=2) ,col2=c(3:4)))[,2])              ,c(a=3,b=4)                    )
           ,"df.a.4"=list((           cbind(col1=c(a=1,b=2) ,col2=c(3:4)) [2,])              ,c(col1=2,col2=4)                     )
           ,"df.b.4"=list((data.frame(cbind(col1=c(a=1,b=2) ,col2=c(3:4)))[2,])              ,data.frame(col1=c(b=2) ,col2=c(b=4)) )
           ,"df.a.5"=list((           cbind(col1=c(a=1,b=2) ,col2=c(3:4)) [2,,drop=T])       ,c(   col1=2,col2=4)           )
           ,"df.b.5"=list((data.frame(cbind(col1=c(a=1,b=2) ,col2=c(3:4)))[2,,drop=T])       ,list(col1=2,col2=4)           )
           ,"df.a.6"=list((           cbind(col1=c(a=1,b=2) ,col2=c(3:4)) [2,,drop=F])       ,cbind(col1=c(b=2) ,col2=c(4)) )
           ,"df.b.6"=list((data.frame(cbind(col1=c(a=1,b=2) ,col2=c(3:4)))[2,,drop=F])       ,data.frame(cbind(col1=c(b=2) ,col2=c(4))) )
           )

   # TODO: I don't know how to check these cases:
   # --atp at piskorski.com, 2005/07/01 10:34 EDT

   # > (data.frame(a=letters[1:3] ,b=2:4)[,1])
   # [1] a b c
   # > structure(.Data = c(1, 2, 3)  ,levels = c("a", "b", "c")  ,class = "factor"  ,names = c("1", "2", "3"))
   # [1] a b c
   # > dput(data.frame(a=letters[1:3], b=2:4)[,1])
   # structure(.Data = c(1, 2, 3)
   # , levels = c("a", "b", "c")
   # , class = "factor"
   # , names = c("1", "2", "3")
   # )

   # > library("missing")
   # > data.frame.original.fcn(cholesterolImpExample,,3)
   #  [1]  NA  NA  NA  NA  NA  NA  NA  NA  NA 156 242 256 142 216 248 168 236 200 264 264
   # [21] 188 182 294 214 198 256 280 204
   # 
   # miVariable object with 5 sets of multiple imputations 
   #                  1        2        3        4        5 
   #  2.chol14 190.7459 209.3937 220.1499 213.2871 218.0670
   #  4.chol14 156.6425 101.6117 173.6432 129.3747 140.9941
   #  5.chol14 176.8996 257.0628 157.2997 227.3769 173.9429
   # 10.chol14 255.8360 275.2017 284.1347 257.6721 289.8643
   # 13.chol14 252.9045 209.9261 257.6222 228.4710 270.7223
   # 16.chol14 298.6389 252.4810 259.4355 332.3279 287.4087
   # 18.chol14 180.9732 204.0033 194.7192 199.9087 200.9603
   # 23.chol14 219.6375 216.8488 125.2673 213.3161 263.5186
   # 25.chol14 268.8816 289.2164 229.5734 273.3548 240.9536
   # > 
   # > cholesterolImpExample[,3]
   #   2  4  5 10 13 16 18 23 25   1   3   6   7   8   9  11  12  14  15  17  19  20  21 
   #  NA NA NA NA NA NA NA NA NA 156 242 256 142 216 248 168 236 200 264 264 188 182 294
   # 
   #   22  24  26  27  28 
   #  214 198 256 280 204
   # 
   # miVariable object with 5 sets of multiple imputations 
   #                  1        2        3        4        5 
   #  2.chol14 190.7459 209.3937 220.1499 213.2871 218.0670
   #  4.chol14 156.6425 101.6117 173.6432 129.3747 140.9941
   #  5.chol14 176.8996 257.0628 157.2997 227.3769 173.9429
   # 10.chol14 255.8360 275.2017 284.1347 257.6721 289.8643
   # 13.chol14 252.9045 209.9261 257.6222 228.4710 270.7223
   # 16.chol14 298.6389 252.4810 259.4355 332.3279 287.4087
   # 18.chol14 180.9732 204.0033 194.7192 199.9087 200.9603
   # 23.chol14 219.6375 216.8488 125.2673 213.3161 263.5186
   # 25.chol14 268.8816 289.2164 229.5734 273.3548 240.9536
   # > 

   tt <- rep(F ,times=length(results)) ; names(tt) <- names(results)
   for (jj in 1:length(results)) {
      tmp <- all.equal(results[[jj]][[1]] ,results[[jj]][[2]])
      tt[jj] <- (length(tmp) == 1 && tmp == T)
      results[[jj]][3] <- list("pass"=as.vector(tt[jj]))
   }

   if (return.results.p) {
      if (only == "bad")
         results[!tt]
      else if (only == "good")
         results[tt]
      else results
   } else if (all(tt)) T else F
}


--rwEMma7ioTxnRzrJ--


From pdbailey at uchicago.edu  Mon Oct 10 01:49:04 2005
From: pdbailey at uchicago.edu (pdbailey@uchicago.edu)
Date: Mon, 10 Oct 2005 01:49:04 +0200 (CEST)
Subject: [Rd] cor doesn't accept na.rm? (PR#8193)
Message-ID: <20051009234904.0D3841C72D@slim.kubism.ku.dk>

Full_Name: Paul Bailey
Version: 2.1.1
OS: OS X 10.3
Submission from: (NULL) (68.252.250.144)


?cor 
[tells me that it has a na.rm variable]

> cor(frame2[1,],frame2[2,],na.rm=T)
Error in cor(frame2[1, ], frame2[2, ], na.rm = T) : 
	unused argument(s) (na.rm ...)

hmm.


From andy_liaw at merck.com  Mon Oct 10 01:55:22 2005
From: andy_liaw at merck.com (Liaw, Andy)
Date: Sun, 9 Oct 2005 19:55:22 -0400
Subject: [Rd] cor doesn't accept na.rm? (PR#8193)
Message-ID: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED4E9@usctmx1106.merck.com>

Where in ?cor do you see the na.rm argument?  Mine says:

cor(x, y = NULL, use = "all.obs",
     method = c("pearson", "kendall", "spearman"))

There's na.rm on that page, but that's for var().  Please read the R FAQ
more carefully about reporting bugs.

Andy

> From: pdbailey at uchicago.edu
> 
> Full_Name: Paul Bailey
> Version: 2.1.1
> OS: OS X 10.3
> Submission from: (NULL) (68.252.250.144)
> 
> 
> ?cor 
> [tells me that it has a na.rm variable]
> 
> > cor(frame2[1,],frame2[2,],na.rm=T)
> Error in cor(frame2[1, ], frame2[2, ], na.rm = T) : 
> 	unused argument(s) (na.rm ...)
> 
> hmm.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>


From Achim.Zeileis at wu-wien.ac.at  Mon Oct 10 01:59:26 2005
From: Achim.Zeileis at wu-wien.ac.at (Achim Zeileis)
Date: Mon, 10 Oct 2005 01:59:26 +0200 (CEST)
Subject: [Rd] cor doesn't accept na.rm? (PR#8193)
In-Reply-To: <20051009234904.0D3841C72D@slim.kubism.ku.dk>
References: <20051009234904.0D3841C72D@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.58.0510100157110.7893@thorin.ci.tuwien.ac.at>

On Mon, 10 Oct 2005 pdbailey at uchicago.edu wrote:

> Full_Name: Paul Bailey
> Version: 2.1.1
> OS: OS X 10.3
> Submission from: (NULL) (68.252.250.144)
>
>
> ?cor
> [tells me that it has a na.rm variable]

>From which part of the man page do you infer that?
(Hint: Which of the functions on that man page takes the na.rm argument?)

> > cor(frame2[1,],frame2[2,],na.rm=T)
> Error in cor(frame2[1, ], frame2[2, ], na.rm = T) :
> 	unused argument(s) (na.rm ...)
>
> hmm.

Look at the `use' argument of cor.
Z

P.S.: no bug, of course.

> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From MSchwartz at mn.rr.com  Mon Oct 10 01:59:44 2005
From: MSchwartz at mn.rr.com (MSchwartz@mn.rr.com)
Date: Mon, 10 Oct 2005 01:59:44 +0200 (CEST)
Subject: [Rd] cor doesn't accept na.rm? (PR#8193)
Message-ID: <20051009235944.C3FBD1C72D@slim.kubism.ku.dk>

On Mon, 2005-10-10 at 01:49 +0200, pdbailey at uchicago.edu wrote:
> Full_Name: Paul Bailey
> Version: 2.1.1
> OS: OS X 10.3
> Submission from: (NULL) (68.252.250.144)
> 
> 
> ?cor 
> [tells me that it has a na.rm variable]
> 
> > cor(frame2[1,],frame2[2,],na.rm=T)
> Error in cor(frame2[1, ], frame2[2, ], na.rm = T) : 
> 	unused argument(s) (na.rm ...)
> 
> hmm.


Pray tell, where in ?cor do you see that cor() has a 'na.rm' argument?

cor() has a 'use' argument, which determines how missing values are
handled.

Please read ?cor more carefully before filing a bug report, which now
has to be manually handled by a member of R Core.

Marc Schwartz


From kwright68 at gmail.com  Mon Oct 10 04:46:24 2005
From: kwright68 at gmail.com (kwright68@gmail.com)
Date: Mon, 10 Oct 2005 04:46:24 +0200 (CEST)
Subject: [Rd] Help page links to index.html are dead (PR#8196)
Message-ID: <20051010024624.460721C79D@slim.kubism.ku.dk>

Full_Name: Kevin Wright
Version: 2.2.0
OS: windows
Submission from: (NULL) (66.185.0.208)



On the help pages for R is a little circle with an up arrow that links to:

file:///C:/R/R220/doc/html/index.htmlu

This link is dead.  I suspect the link should be:

file:///C:/R/R220/doc/html/rwin.html

P.S. It should be obvious, but just in case, I have R installed at 
c:/R/R220


From murdoch at stats.uwo.ca  Mon Oct 10 07:08:22 2005
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Mon, 10 Oct 2005 07:08:22 +0200 (CEST)
Subject: [Rd] Help page links to index.html are dead (PR#8196)
Message-ID: <20051010050822.B93381C756@slim.kubism.ku.dk>

kwright68 at gmail.com wrote:
> Full_Name: Kevin Wright
> Version: 2.2.0
> OS: windows
> Submission from: (NULL) (66.185.0.208)
> 
> 
> 
> On the help pages for R is a little circle with an up arrow that links to:
> 
> file:///C:/R/R220/doc/html/index.htmlu

That's a typo in Kevin's message:  the link is to 
.../doc/html/index.html.  The link is correct, but the file was not 
installed.  The Makefile creates it as a copy of rwin.html.  Do you 
remember why we have both files?  This bug has been around for a while...

Duncan
> 
> This link is dead.  I suspect the link should be:
> 
> file:///C:/R/R220/doc/html/rwin.html
> 
> P.S. It should be obvious, but just in case, I have R installed at 
> c:/R/R220
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From admin at biostatistic.de  Mon Oct 10 08:23:25 2005
From: admin at biostatistic.de (Knut Krueger)
Date: Mon, 10 Oct 2005 08:23:25 +0200
Subject: [Rd] Project suggestion: Interface between R and graphic devices
In-Reply-To: <1B30AC09-9A1F-451B-9C6A-99010FD13C71@r-project.org>
References: <4348EC90.8030105@biostatistic.de>	<Pine.LNX.4.61.0510091117550.27441@gannet.stats>	<43491862.9060102@einthal.de>
	<43493E22.30408@sciviews.org>	<4349510A.7080107@einthal.de>
	<1B30AC09-9A1F-451B-9C6A-99010FD13C71@r-project.org>
Message-ID: <434A08DD.1070901@biostatistic.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051010/85fdb46e/attachment.pl

From ripley at stats.ox.ac.uk  Mon Oct 10 08:58:47 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 10 Oct 2005 08:58:47 +0200 (CEST)
Subject: [Rd] Help page links to index.html are dead (PR#8196)
Message-ID: <20051010065847.706EF1C7D4@slim.kubism.ku.dk>

On Mon, 10 Oct 2005, Duncan Murdoch wrote:

> kwright68 at gmail.com wrote:
>> Full_Name: Kevin Wright
>> Version: 2.2.0
>> OS: windows
>> Submission from: (NULL) (66.185.0.208)
>> 
>> 
>> 
>> On the help pages for R is a little circle with an up arrow that links to:
>> 
>> file:///C:/R/R220/doc/html/index.htmlu
>
> That's a typo in Kevin's message:  the link is to .../doc/html/index.html. 
> The link is correct, but the file was not installed.  The Makefile creates it 
> as a copy of rwin.html.  Do you remember why we have both files?  This bug 
> has been around for a while...

Yes, rwin.html contains an additional link to rw-FAQ.html.  Now the 
Windows index.html should be the same: indeed, it is installed as such by 
fixed/Makefile.  So it's a bug in building the installer.

If you are asking why rwin.html is needed: until recently the sources 
contained doc/html/index.html so it was likely to be restored.


It seems to me there is another error in the message: the help pages 
contain no such link (which threw me for a while).  It does appear on the 
summary page for a package, and on packages.html.


>> This link is dead.  I suspect the link should be:
>> 
>> file:///C:/R/R220/doc/html/rwin.html
>> 
>> P.S. It should be obvious, but just in case, I have R installed at 
>> c:/R/R220
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From lgautier at altern.org  Mon Oct 10 14:33:44 2005
From: lgautier at altern.org (lgautier@altern.org)
Date: Mon, 10 Oct 2005 14:33:44 +0200 (CEST)
Subject: [Rd] 'R CMD check' gets apparently confused by '%' (PR#8198)
Message-ID: <20051010123344.999961C859@slim.kubism.ku.dk>

Full_Name: Laurent
Version: R-2.0.0-beta-from-a-week-ago
OS: linux
Submission from: (NULL) (202.156.6.77)


When running 'R CMD check' for a package that contains the symbol '%'
in the signature of a function (say the default parameter for a string argument
is like "10% - 20%"), the 'codoc' part of the check throws a warning
about mismatching doc and codoc.

While the '%' has apparently to be escaped in the .Rnw (otherwise latex soon
figures out that what is after on the same line is a comment), the warning
remains
whether or not '%' is escaped in the code.

The package 'splicegear' in Bioconductor (in the section "devel") is what
brought
me to submit a bug report.


L.


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Mon Oct 10 16:55:46 2005
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: Mon, 10 Oct 2005 16:55:46 +0200
Subject: [Rd] Catching warning and error output
Message-ID: <200510101655.46264.thomas.friedrichsmeier@ruhr-uni-bochum.de>

Hi all,

I'm working on a GUI frontend for R, and I'm looking for a good way to catch 
all warning- and error-output. The reason for this is mostly, that I would 
like to know, which sections of the output are "normal" output, warnings, and 
errors. This would allow for some nice features, such as highlighting 
warnings and errors in a different color, or popping up a message like e.g. 
"There were these warnings, while doing this-or-that:".
Maybe a good solution for this already exists, but I have not been able to 
find it. Therefore, I'll outline what I have tried/considered so far, and 
what I think might be ways to add a corresonding API. Of course, I'm not very 
familiar with R, so these suggestions are probably not "the right way to do 
it".

What I've tried so far:
1) Directing stderr-output to a file (using sink ()):
This solution splits warnings, and errors from "regular" output. Using
options (error=quote (myhandler ())
I can additionally tell warnings and errors apart after the fact. However, 
this solution is problematic, in that then the output is handled 
asynchronously, and I can not tell, at which position in the output a warning 
should have been printed. Further, if the user runs one "sink ()" too many 
(the user has a sort of console for direct interaction with R), the 
output-handling will be broken in my GUI.

2) Use options (warning.expression=...), and options (error=...):
Unfortunately, it turned out, that when setting warning.expression to 
something non-NULL, the warning is discarded completely. There is no way to 
get at the warning that would have been generated.

3) Use condition handlers:
3a) Wrap each call inside withCallingHandlers (...):
This would probably work, but add quite a bit of overhead for string 
manipulation, and parsing. The GUI runs a lot of small commands during normal 
operation. There are additional hazzles, such as error messages would then 
all look like "Error in withCallingHandlers(...", and I'd have to use yet 
more string operations to make them look normal.
Also: Can I be sure, that all warnings (i.e. even from C-code) are signalled 
as conditions? I'm afraid I do not fully understand the internal going-ons, 
here.
If all else fails, I'll have to use this, but I'm not very happy with this.
3b) Use ".Internal (.addCondHands (...))" once to set up persistent handlers:
This worked fine, when testing it in the R-console. However, in my GUI, calls 
are actually handled using R_tryEval (..., R_GlobalEnv, ...). It seems the 
condition handlers do not carry over between two successive calls of 
R_tryEval. So effectively, I'd once again be back at 3a.

What I would like to have:
Of course there would be many different ways to accomplish this. Here are some 
solutions I can think of:

1) In my programmers' dream, there'd simply be three callbacks that I can 
override: R_WriteConsole (exists), R_WriteWarning, and R_WriteError. 
R_WriteWarning, and R_WriteError would be called from vwarningcall_dflt, and 
verrorcall_dflt, respectively, instead of REprintf. The default 
implementation of those, would of course simply call REprintf. Drawbacks: 
a) REprintf is available for use in R_ext/Print.h. I'd miss out on any direct 
calls of REprintf, while those should probably still be recorded as a 
warning/error.
b) I'd have to add a fairly elaborate implementation in order to honor any 
sinks the user has (purposefully) created. If I can even access all necessary 
data/functions from my code (I have not investigated that, yet).

2) Similar, but add the hook a little later, in REvprintf. There, instead of 
directly calling R_WriteConsole, a new callback R_WriteError would be used 
(which defaults to R_WriteConsole). Using this callback I would get a stream 
of both warnings, and errors, separate from "regular" output. I could tell 
warnings and errors apart, using options (error=...).

3) Yet a little less intrusive: Somehow use a fake R_ErrorCon:
There I'd simply add my own callback for con->vprintf, and con->fflush. Then 
proceed as in 2. However, it seems Rconnection and the related functions are 
too tightly guarded against this approach. I simply don't see a way, how I 
could fake this connection (but maybe there is one?). Maybe a public API 
could be added to allow this.

Ok, so much on my helpless attempts. Could you help me with this?

Thanks!
Thomas


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Mon Oct 10 17:11:11 2005
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: Mon, 10 Oct 2005 17:11:11 +0200
Subject: [Rd] Catching warning and error output
In-Reply-To: <200510101655.46264.thomas.friedrichsmeier@ruhr-uni-bochum.de>
References: <200510101655.46264.thomas.friedrichsmeier@ruhr-uni-bochum.de>
Message-ID: <200510101711.11893.thomas.friedrichsmeier@ruhr-uni-bochum.de>

> What I would like to have:
> Of course there would be many different ways to accomplish this. Here are
> some solutions I can think of:

I just had an additional idea:
4) Export inError, and inWarning from errors.c:
I'm not entirely sure this would really work as expected, but if it did, it 
would be fairly neat. I would receive all output though R_WriteConsole. There 
(in my implementation of the callback), I'd check for "int inError", and "int 
inWarning", and classify the output accordingly. Just as in solution 1), I 
still could not figure out about a direct call of REprintf. Such output would 
still be classified as "regular".

Regards
Thomas


From Vidar.Hjellvik at imr.no  Mon Oct 10 17:23:04 2005
From: Vidar.Hjellvik at imr.no (Hjellvik Vidar)
Date: Mon, 10 Oct 2005 17:23:04 +0200
Subject: [Rd] using innov in arima.sim
Message-ID: <0D54094F69391A438650C6151B0A33E46FD371@post2.imr.no>

Hello,

I have used the arima.sim function to generate a lot of time series, but to day I got som results that I didn't quite understand. Generating two time series z0 and z1 as

eps <- rnorm(n, sd=0.03)
z0 <- arima.sim(list(ar=c(0.9)), n=n, innov=eps)

and 

z1 <- arima.sim(list(ar=c(0.9)), n=n, sd=0.03),

I would expect z0 and z1 to be qualitatively similar. However, with n=10 the two series could look like this:

z0 = -4.1258 -3.7326 -3.3269 -2.9813 -2.7314 -2.4416 -2.2223 -2.0083 -1.7848 -1.6016
z1 = -0.1001 -0.0885 -0.0767 -0.0531 -0.0647 -0.0268 -0.0118 -0.0153 0.0038 -0.0364

Using a larger n, z0 converges to the right level after some time, but it would have been nice to have it there from the first observation... I took a look into the code for arima.sim, and I think I found the reason for this behaviour in the line 

x <- ts(c(rand.gen(n.start, ...), innov[1:n]), start = 1 - n.start)

It seems like the "warming up" innovations are standard normal, and that that's why the first observations of z0 are so large in magnitude. So one solution is to generate

z0 <- arima.sim(list(ar=c(0.9)), n=n, innov=eps, sd=sd(eps)),

but I didn't figure out this before having taken a look at the code. So my question is:

Wouldn't it be a good idea to have the calculation of the standard deviation of the "warming up" observations done in arima.sim? Or maybe that the "warming up" observations were sampled from innov, in case the innovations are not gaussian?

Best regards,
Vidar Hjellvik


From ripley at stats.ox.ac.uk  Mon Oct 10 17:38:13 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 10 Oct 2005 16:38:13 +0100 (BST)
Subject: [Rd] using innov in arima.sim
In-Reply-To: <0D54094F69391A438650C6151B0A33E46FD371@post2.imr.no>
References: <0D54094F69391A438650C6151B0A33E46FD371@post2.imr.no>
Message-ID: <Pine.LNX.4.61.0510101635460.13760@gannet.stats>

On Mon, 10 Oct 2005, Hjellvik Vidar wrote:

> Hello,
>
> I have used the arima.sim function to generate a lot of time series, but to day I got som results that I didn't quite understand. Generating two time series z0 and z1 as
>
> eps <- rnorm(n, sd=0.03)
> z0 <- arima.sim(list(ar=c(0.9)), n=n, innov=eps)
>
> and
>
> z1 <- arima.sim(list(ar=c(0.9)), n=n, sd=0.03),
>
> I would expect z0 and z1 to be qualitatively similar. However, with n=10 the two series could look like this:
>
> z0 = -4.1258 -3.7326 -3.3269 -2.9813 -2.7314 -2.4416 -2.2223 -2.0083 -1.7848 -1.6016
> z1 = -0.1001 -0.0885 -0.0767 -0.0531 -0.0647 -0.0268 -0.0118 -0.0153 0.0038 -0.0364
>
> Using a larger n, z0 converges to the right level after some time, but it would have been nice to have it there from the first observation... I took a look into the code for arima.sim, and I think I found the reason for this behaviour in the line
>
> x <- ts(c(rand.gen(n.start, ...), innov[1:n]), start = 1 - n.start)
>
> It seems like the "warming up" innovations are standard normal, and that 
> that's why the first observations of z0 are so large in magnitude. So 
> one solution is to generate

Yes, that is what it says on the help page.

> z0 <- arima.sim(list(ar=c(0.9)), n=n, innov=eps, sd=sd(eps)),
>
> but I didn't figure out this before having taken a look at the code.

Reading the help page would have told you.  Make sure you look in the 
current version of R.

> So my question is:
>
> Wouldn't it be a good idea to have the calculation of the standard 
> deviation of the "warming up" observations done in arima.sim? Or maybe 
> that the "warming up" observations were sampled from innov, in case the 
> innovations are not gaussian?

Take a look at the R-devel version of arima.sim.

It _would_ be a good idea to read the posting guide and follow its 
requests.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From gavin.simpson at ucl.ac.uk  Mon Oct 10 18:29:42 2005
From: gavin.simpson at ucl.ac.uk (Gavin Simpson)
Date: Mon, 10 Oct 2005 17:29:42 +0100
Subject: [Rd] Documenting newly created generic versions of non-generic base
	R	functions
Message-ID: <1128961782.17225.33.camel@gsimpson.geog.ucl.ac.uk>

Hi,

Following the Writing R Extensions manual, I created a method for the
cor function. As cor is not a generic, I followed the advice of section
6.1 of the same manual and did the following:

cor <- function(x, ...) UseMethod("cor")
cor.default <- stats::cor
cor.symcoca <- function{ some code }

I used package.skeleton to create the basic set-up of my package,
containing the above functions.

Do I need to provide a .Rd file for cor and cor.default? - seeing as
cor.default is cor currently.

What is the best way to handle documenting functions produced using the
above hi-jack methodology?

Cheers

Gav
-- 
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%
Gavin Simpson                     [T] +44 (0)20 7679 5522
ENSIS Research Fellow             [F] +44 (0)20 7679 7565
ENSIS Ltd. & ECRC                 [E] gavin.simpsonATNOSPAMucl.ac.uk
UCL Department of Geography       [W] http://www.ucl.ac.uk/~ucfagls/cv/
26 Bedford Way                    [W] http://www.ucl.ac.uk/~ucfagls/
London.  WC1H 0AP.
%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%~%


From kompass at vision.wustl.edu  Mon Oct 10 19:00:09 2005
From: kompass at vision.wustl.edu (kompass@vision.wustl.edu)
Date: Mon, 10 Oct 2005 19:00:09 +0200 (CEST)
Subject: [Rd] bug loading libraries with winXP and 2.2.0 but not 2.1.1
	(PR#8200)
Message-ID: <20051010170009.5A8111C7D5@slim.kubism.ku.dk>

Full_Name: Ken Kompass
Version: 2.2.0
OS: winXP pro (2002 version, SP2)
Submission from: (NULL) (128.252.149.244)


Using R2.2.0 I get this error msg when loading certain bioconductor libraries
(depending on whether the library contains file named "all.rda" in R folder of
library) :

> library(multtest)
Error in open.connection(con, "rb") : unable to open connection
In addition: Warning message:
cannot open compressed file 'C:/PROGRA~1/R/R-22~1.0/library/multtest/R/all.rda'

Error in library(multtest) : .First.lib failed for 'multtest'
>

The error occurs with loading any library that doesn't have an "all.rda" file in
its R folder...


...With R2.1.1 the exact same version of multtest loads fine :

> library(multtest)
Loading required package: survival
Loading required package: splines
>


From Kurt.Hornik at wu-wien.ac.at  Mon Oct 10 21:01:01 2005
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Mon, 10 Oct 2005 21:01:01 +0200
Subject: [Rd] 'R CMD check' gets apparently confused by '%' (PR#8198)
In-Reply-To: <20051010123344.999961C859@slim.kubism.ku.dk>
References: <20051010123344.999961C859@slim.kubism.ku.dk>
Message-ID: <17226.47725.93572.909154@mithrandir.hornik.net>

>>>>> lgautier  writes:

> Full_Name: Laurent
> Version: R-2.0.0-beta-from-a-week-ago
> OS: linux
> Submission from: (NULL) (202.156.6.77)


> When running 'R CMD check' for a package that contains the symbol '%'
> in the signature of a function (say the default parameter for a string
> argument is like "10% - 20%"), the 'codoc' part of the check throws a
> warning about mismatching doc and codoc.

> While the '%' has apparently to be escaped in the .Rnw (otherwise
> latex soon figures out that what is after on the same line is a
> comment), the warning remains whether or not '%' is escaped in the
> code.

> The package 'splicegear' in Bioconductor (in the section "devel") is
> what brought me to submit a bug report.

If we run your splicegear from BioC devel (1.1.0) through R CMD check
from a current version of R (as you are actually supposed to when filing
a bug report), we get

* checking Rd \usage sections ... WARNING
Bad \usage lines found in documentation object 'buildSpliceSites':
  queryPALSdb(query, disp = c("data", "browser"),
              field = c("keyword", "ug_id", "gb_id", "cluster_count"),
              species = c("human", "mouse"),
              e.value = "1e-1",
              ident.threshold = c("90
              verbose = FALSE)
  getPALSdbURL(query, disp = c("data", "browser"),
              field = c("keyword", "ug_id", "gb_id", "cluster_count"),
              species = c("human", "mouse"),
              e.value = "1e-1",
              ident.threshold = c("90
              verbose = FALSE)
Bad \usage lines found in documentation object 'grid.expand.gp':
  grid.numeric2npc(x, xlim=NULL, lower.blank=0, upper.blank=0
Bad \usage lines found in documentation object 'grid.plot.Probes':
  grid.plot.SpliceExprSet(function (x, probes.opt = list(), expr.opt = list(col = NA, lty = 1:6),
      fig.xratio = c(2, 1), fig.yratio = c(2, 1), probepos.yscale = NULL,
      ylim = NULL, ...)

as the usage entries are syntactically invalid.

This is because (see R-exts) % in Rd files *ALWAYS* indicates an Rd
comment:

        The "comment" character `%' and unpaired braces(1) _always_ need
	to be escaped by `\' ...

in your case, your

splicegear/man/buildSpliceSites.Rd:            ident.threshold = c("90% 50b", "95% 50b", "90% 45b"),
splicegear/man/buildSpliceSites.Rd:            ident.threshold = c("90% 50b", "95% 50b", "90% 45b"),

should use

  ident.threshold = c("90\% 50b", "95\% 50b", "90\% 45b"),

Hth
-k


From apjaworski at mmm.com  Mon Oct 10 21:39:43 2005
From: apjaworski at mmm.com (apjaworski@mmm.com)
Date: Mon, 10 Oct 2005 14:39:43 -0500
Subject: [Rd] error compiling R-code
Message-ID: <OF905B928E.43F36766-ON86257096.006ABB47-86257096.006C01AC@mmm.com>

Hi,

I have been compiling R from source code with regularity (both R-patched
and R-devel) for several months now.  About two/three weeks ago I noticed a
compilation error in R-devel (see below).  I thought that the error will go
away in "due course" so I did not investigate it further.  Then I left on
vacation.

I just downloaded both versions of R sources (i.e., 2.2.0 patched and
2.3.0).  They both give me the same error, so my suspicion is that it is
just me having this problem.  Here is what I get:

...
gcc  -O2 -Wall -pedantic --std=gnu99 -DLEA_MALLOC -I../include
-DHAVE_CONFIG_H -DR_DLL_BUILD  -c arithmetic.c -o arithmetic.o
arithmetic.c: In function `do_math1':
arithmetic.c:886: error: `expm1' undeclared (first use in this function)
arithmetic.c:886: error: (Each undeclared identifier is reported only once
arithmetic.c:886: error: for each function it appears in.)
make[4]: *** [arithmetic.o] Error 1
make[3]: *** [rlibs] Error 2
make[2]: *** [../../bin/R.dll] Error 2
make[1]: *** [rbuild-no-mbcs] Error 2
make[1]: Leaving directory `/home/andyj/R-devel/src/gnuwin32'
make: *** [distribution] Error 2

I apologize if this was already asked.  I came back after about
week-an-a-half and I did not have time to go through hundreds of R
messages.  Hopefully this is something simple for somebody who is familiar
with the code.

I am on a Win2000 machine with all the necessary tools installed.  I have
not changed my setup in at least 2 months and, as I said above, I was able
to compile R with no problems until about 2/3 weeks ago, so perhaps I
missed some subtle change in the tools.

Thanks in advance,

Andy

__________________________________
Andy Jaworski
518-1-01
Process Laboratory
3M Corporate Research Laboratory
-----
E-mail: apjaworski at mmm.com
Tel:  (651) 733-6092
Fax:  (651) 736-3122


From rgentlem at fhcrc.org  Tue Oct 11 01:01:14 2005
From: rgentlem at fhcrc.org (Robert Gentleman)
Date: Mon, 10 Oct 2005 16:01:14 -0700
Subject: [Rd] bug loading libraries with winXP and 2.2.0 but not 2.1.1
 (PR#8200)
In-Reply-To: <20051010170009.5A8111C7D5@slim.kubism.ku.dk>
References: <20051010170009.5A8111C7D5@slim.kubism.ku.dk>
Message-ID: <434AF2BA.9020803@fhcrc.org>


Hi,
  thanks for the report - but it should have gone to the Bioconductor 
list, and the package maintainer, thanks.

  New versions of multtest and a few other packages will percolate up in 
the next few days to resolve the problem.

  Best wishes,
    Robert

kompass at vision.wustl.edu wrote:
> Full_Name: Ken Kompass
> Version: 2.2.0
> OS: winXP pro (2002 version, SP2)
> Submission from: (NULL) (128.252.149.244)
> 
> 
> Using R2.2.0 I get this error msg when loading certain bioconductor libraries
> (depending on whether the library contains file named "all.rda" in R folder of
> library) :
> 
> 
>>library(multtest)
> 
> Error in open.connection(con, "rb") : unable to open connection
> In addition: Warning message:
> cannot open compressed file 'C:/PROGRA~1/R/R-22~1.0/library/multtest/R/all.rda'
> 
> Error in library(multtest) : .First.lib failed for 'multtest'
> 
> 
> The error occurs with loading any library that doesn't have an "all.rda" file in
> its R folder...
> 
> 
> ...With R2.1.1 the exact same version of multtest loads fine :
> 
> 
>>library(multtest)
> 
> Loading required package: survival
> Loading required package: splines
> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Robert Gentleman, PhD
Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M2-B876
PO Box 19024
Seattle, Washington 98109-1024
206-667-7700
rgentlem at fhcrc.org


From rgentlem at fhcrc.org  Tue Oct 11 01:01:39 2005
From: rgentlem at fhcrc.org (rgentlem@fhcrc.org)
Date: Tue, 11 Oct 2005 01:01:39 +0200 (CEST)
Subject: [Rd] bug loading libraries with winXP and 2.2.0 but not 2.1.1
	(PR#8201)
Message-ID: <20051010230139.22B9C1C7D7@slim.kubism.ku.dk>


Hi,
  thanks for the report - but it should have gone to the Bioconductor 
list, and the package maintainer, thanks.

  New versions of multtest and a few other packages will percolate up in 
the next few days to resolve the problem.

  Best wishes,
    Robert

kompass at vision.wustl.edu wrote:
> Full_Name: Ken Kompass
> Version: 2.2.0
> OS: winXP pro (2002 version, SP2)
> Submission from: (NULL) (128.252.149.244)
> 
> 
> Using R2.2.0 I get this error msg when loading certain bioconductor libraries
> (depending on whether the library contains file named "all.rda" in R folder of
> library) :
> 
> 
>>library(multtest)
> 
> Error in open.connection(con, "rb") : unable to open connection
> In addition: Warning message:
> cannot open compressed file 'C:/PROGRA~1/R/R-22~1.0/library/multtest/R/all.rda'
> 
> Error in library(multtest) : .First.lib failed for 'multtest'
> 
> 
> The error occurs with loading any library that doesn't have an "all.rda" file in
> its R folder...
> 
> 
> ...With R2.1.1 the exact same version of multtest loads fine :
> 
> 
>>library(multtest)
> 
> Loading required package: survival
> Loading required package: splines
> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
Robert Gentleman, PhD
Program in Computational Biology
Division of Public Health Sciences
Fred Hutchinson Cancer Research Center
1100 Fairview Ave. N, M2-B876
PO Box 19024
Seattle, Washington 98109-1024
206-667-7700
rgentlem at fhcrc.org


From murdoch at stats.uwo.ca  Tue Oct 11 03:14:13 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 10 Oct 2005 21:14:13 -0400
Subject: [Rd] error compiling R-code
In-Reply-To: <OF905B928E.43F36766-ON86257096.006ABB47-86257096.006C01AC@mmm.com>
References: <OF905B928E.43F36766-ON86257096.006ABB47-86257096.006C01AC@mmm.com>
Message-ID: <434B11E5.1040002@stats.uwo.ca>

apjaworski at mmm.com wrote:
> Hi,
> 
> I have been compiling R from source code with regularity (both R-patched
> and R-devel) for several months now.  About two/three weeks ago I noticed a
> compilation error in R-devel (see below).  I thought that the error will go
> away in "due course" so I did not investigate it further.  Then I left on
> vacation.
> 
> I just downloaded both versions of R sources (i.e., 2.2.0 patched and
> 2.3.0).  They both give me the same error, so my suspicion is that it is
> just me having this problem.  Here is what I get:
> 
> ...
> gcc  -O2 -Wall -pedantic --std=gnu99 -DLEA_MALLOC -I../include
> -DHAVE_CONFIG_H -DR_DLL_BUILD  -c arithmetic.c -o arithmetic.o
> arithmetic.c: In function `do_math1':
> arithmetic.c:886: error: `expm1' undeclared (first use in this function)
> arithmetic.c:886: error: (Each undeclared identifier is reported only once
> arithmetic.c:886: error: for each function it appears in.)
> make[4]: *** [arithmetic.o] Error 1
> make[3]: *** [rlibs] Error 2
> make[2]: *** [../../bin/R.dll] Error 2
> make[1]: *** [rbuild-no-mbcs] Error 2
> make[1]: Leaving directory `/home/andyj/R-devel/src/gnuwin32'
> make: *** [distribution] Error 2
> 
> I apologize if this was already asked.  I came back after about
> week-an-a-half and I did not have time to go through hundreds of R
> messages.  Hopefully this is something simple for somebody who is familiar
> with the code.
> 
> I am on a Win2000 machine with all the necessary tools installed.  I have
> not changed my setup in at least 2 months and, as I said above, I was able
> to compile R with no problems until about 2/3 weeks ago, so perhaps I
> missed some subtle change in the tools.

You may not have the latest versions of the MinGW tools.  Check the 
Admin and installation manual, or http://www.murdoch-sutherland.com/Rtools/.

Duncan Murdoch


From Kurt.Hornik at wu-wien.ac.at  Mon Oct 10 21:01:01 2005
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Mon, 10 Oct 2005 21:01:01 +0200
Subject: [Rd] 'R CMD check' gets apparently confused by '%' (PR#8198)
In-Reply-To: <20051010123344.999961C859@slim.kubism.ku.dk>
References: <20051010123344.999961C859@slim.kubism.ku.dk>
Message-ID: <17226.47725.93572.909154@mithrandir.hornik.net>

>>>>> lgautier  writes:

> Full_Name: Laurent
> Version: R-2.0.0-beta-from-a-week-ago
> OS: linux
> Submission from: (NULL) (202.156.6.77)


> When running 'R CMD check' for a package that contains the symbol '%'
> in the signature of a function (say the default parameter for a string
> argument is like "10% - 20%"), the 'codoc' part of the check throws a
> warning about mismatching doc and codoc.

> While the '%' has apparently to be escaped in the .Rnw (otherwise
> latex soon figures out that what is after on the same line is a
> comment), the warning remains whether or not '%' is escaped in the
> code.

> The package 'splicegear' in Bioconductor (in the section "devel") is
> what brought me to submit a bug report.

If we run your splicegear from BioC devel (1.1.0) through R CMD check
from a current version of R (as you are actually supposed to when filing
a bug report), we get

* checking Rd \usage sections ... WARNING
Bad \usage lines found in documentation object 'buildSpliceSites':
  queryPALSdb(query, disp = c("data", "browser"),
              field = c("keyword", "ug_id", "gb_id", "cluster_count"),
              species = c("human", "mouse"),
              e.value = "1e-1",
              ident.threshold = c("90
              verbose = FALSE)
  getPALSdbURL(query, disp = c("data", "browser"),
              field = c("keyword", "ug_id", "gb_id", "cluster_count"),
              species = c("human", "mouse"),
              e.value = "1e-1",
              ident.threshold = c("90
              verbose = FALSE)
Bad \usage lines found in documentation object 'grid.expand.gp':
  grid.numeric2npc(x, xlim=NULL, lower.blank=0, upper.blank=0
Bad \usage lines found in documentation object 'grid.plot.Probes':
  grid.plot.SpliceExprSet(function (x, probes.opt = list(), expr.opt = list(col = NA, lty = 1:6),
      fig.xratio = c(2, 1), fig.yratio = c(2, 1), probepos.yscale = NULL,
      ylim = NULL, ...)

as the usage entries are syntactically invalid.

This is because (see R-exts) % in Rd files *ALWAYS* indicates an Rd
comment:

        The "comment" character `%' and unpaired braces(1) _always_ need
	to be escaped by `\' ...

in your case, your

splicegear/man/buildSpliceSites.Rd:            ident.threshold = c("90% 50b", "95% 50b", "90% 45b"),
splicegear/man/buildSpliceSites.Rd:            ident.threshold = c("90% 50b", "95% 50b", "90% 45b"),

should use

  ident.threshold = c("90\% 50b", "95\% 50b", "90\% 45b"),

Hth
-k


From v.moreno at ico.scs.es  Tue Oct 11 11:41:25 2005
From: v.moreno at ico.scs.es (v.moreno@ico.scs.es)
Date: Tue, 11 Oct 2005 11:41:25 +0200 (CEST)
Subject: [Rd] summary of Surv object  crashes R 2.2.0 (PR#8203)
Message-ID: <20051011094125.3A9511C81B@slim.kubism.ku.dk>

Full_Name: Victor Moreno
Version: 2.2.0
OS: windows
Submission from: (NULL) (213.151.99.160)


summary of an object class Surv (package survival) hangs and closes R 2.2.0

I would like to have Surv objects in a data frame to build models easier:

t<-rexp(100)
s<-rbinom(100,1,.3)
surv<-Surv(t,s)
x1<-rnorm(100,10,2)
x2<-rnorm(100,10,2)
dat<-data.frame(surv,x1,x2)
coxph(surv~.,data=dat)

so far no problems, but R crashes if I write

summary(dat)

I checked that the problem is in 
summary(surv)

Tested on previous versions of R (1.9.0, 2.1.0) in a friend's computer) gives no
results, but doesn't crash R


From admin at biostatistic.de  Tue Oct 11 11:45:47 2005
From: admin at biostatistic.de (Knut Krueger)
Date: Tue, 11 Oct 2005 11:45:47 +0200
Subject: [Rd] 8 char labels in read.spss
Message-ID: <434B89CB.70209@biostatistic.de>

I was wondering why it is possible to read long labels from the CVS 
files but not from the SPSS files.
I did not have much time to search for the code but I found:

in foreign_0.8-10 source file var.h.in

> /* Definition of the max length of a short string value, generally
>    eight characters.  */
> #define MAX_SHORT_STRING ((SIZEOF_DOUBLE)>=8 ? ((SIZEOF_DOUBLE)+1)/2*2 
> : 8)
> #define MIN_LONG_STRING (MAX_SHORT_STRING+1)
>
> /* FYI: It is a bad situation if sizeof(R_flt64) < MAX_SHORT_STRING:
>    then short string missing values can be truncated in system files
>    because there's only room for as many characters as can fit in a
>    R_flt64. */
> #if MAX_SHORT_STRING > 8
> #error MAX_SHORT_STRING must be less than 8.
> #endif

I am am right then there was a restriction in the year 2000 because the 
files are from the year 2000.

Now there are some questions:
Did I found the right code?
is it possible that anybody could recompile this with long value names
or where is the best manual for a quick start in compiling packages.


I found a couple of weeks before a tread where anybody wrote a complete 
way for building packages.
He described all problems of him and there were a lot of hints for the 
first steps, but I am not able to find it again - I don't know the 
search terms which I used before :-(


with regards
Knut


From jamatos at fc.up.pt  Tue Oct 11 13:25:59 2005
From: jamatos at fc.up.pt (=?UTF-8?B?Sm9zw6k=?= Matos)
Date: Tue, 11 Oct 2005 12:25:59 +0100
Subject: [Rd] Post processing need for installing packages in rpms.
Message-ID: <dig7g7$nq8$1@sea.gmane.org>

Hello,
        I maintain some packages in Fedora Extras for R related modules.

        Until R 2.2.0 I used for post processing (both after installing and
removing the package) the following lines:

%{_bindir}/R CMD perl %{_libdir}/R/share/perl/build-help.pl --htmllists
cat %{_libdir}/R/library/*/CONTENTS > %{_libdir}/R/doc/html/search/index.txt

        Typically %{_bindir} is /usr/bin and %{_libdir} is /usr/lib or
/usr/lib64

        The purpose of those lines is to enable the access to the module
documentation from R help. The first refers to html and the second to the
text help variant.

        With R 2.2.0 build-help.pl no longer has the --htmllists option. Is
there any easy replacement, or is there any other method to achieve the same
results?

        FWIW, I have searched trough the release notes as well as through the
documentation for sys admins and for package developers without any
success.

        Best regards,
-- 
Jos? Ab?lio


From ripley at stats.ox.ac.uk  Tue Oct 11 14:11:48 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 11 Oct 2005 13:11:48 +0100 (BST)
Subject: [Rd] Post processing need for installing packages in rpms.
In-Reply-To: <dig7g7$nq8$1@sea.gmane.org>
References: <dig7g7$nq8$1@sea.gmane.org>
Message-ID: <Pine.LNX.4.61.0510111247390.17417@gannet.stats>

On Tue, 11 Oct 2005, [UTF-8] Jos? Matos wrote:

> Hello,        I maintain some packages in Fedora Extras for R related modules.
>        Until R 2.2.0 I used for post processing (both after installing andremoving the package) the following lines:
> %{_bindir}/R CMD perl %{_libdir}/R/share/perl/build-help.pl --htmllistscat %{_libdir}/R/library/*/CONTENTS > %{_libdir}/R/doc/html/search/index.txt
>        Typically %{_bindir} is /usr/bin and %{_libdir} is /usr/lib or/usr/lib64
>        The purpose of those lines is to enable the access to the moduledocumentation from R help. The first refers to html and the second to thetext help variant.
>        With R 2.2.0 build-help.pl no longer has the --htmllists option. Isthere any easy replacement, or is there any other method to achieve the sameresults?

It is no longer needed: the information is now built by R at runtime.

>        FWIW, I have searched trough the release notes as well as through thedocumentation for sys admins and for package developers without anysuccess.

For an outsider it might not be obvious that the NEWS entry

     o   R_HOME/doc/html/packages.html is now remade by R not Perl code.
         This may result in small changes in layout and a change in
         encoding (to UTF-8 where supported).

refers to this.  (Note that build-help.pl --htmllists was never documented 
as part of R's API.)

I checked Martyn Plummer's R.spec on CRAN, but that is out-of-date. 
Please look at the R.spec in his current SRPM, which works for me.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From tlumley at u.washington.edu  Tue Oct 11 16:40:24 2005
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 11 Oct 2005 07:40:24 -0700 (PDT)
Subject: [Rd] 8 char labels in read.spss
In-Reply-To: <434B89CB.70209@biostatistic.de>
References: <434B89CB.70209@biostatistic.de>
Message-ID: <Pine.LNX.4.63a.0510110734250.27917@homer24.u.washington.edu>

On Tue, 11 Oct 2005, Knut Krueger wrote:

> I was wondering why it is possible to read long labels from the CVS
> files but not from the SPSS files.

The SPSS file formats are not documented, and so we rely on the code from 
PSPP.  At the time, PSPP did not read long variable names.  It now does, 
so it would be possible for someone update the SPSS-reading code to handle 
long variable names.  This is much more complicated than just changing a 
#define; the long variable names are stored in a different part of the 
file.

I don't expect anyone on R-core to get around to this any time soon. If 
you want to try, the current PSPP code is at
    http://savannah.gnu.org/projects/pspp

 	-thomas


> I did not have much time to search for the code but I found:
>
> in foreign_0.8-10 source file var.h.in
>
>> /* Definition of the max length of a short string value, generally
>>    eight characters.  */
>> #define MAX_SHORT_STRING ((SIZEOF_DOUBLE)>=8 ? ((SIZEOF_DOUBLE)+1)/2*2
>> : 8)
>> #define MIN_LONG_STRING (MAX_SHORT_STRING+1)
>>
>> /* FYI: It is a bad situation if sizeof(R_flt64) < MAX_SHORT_STRING:
>>    then short string missing values can be truncated in system files
>>    because there's only room for as many characters as can fit in a
>>    R_flt64. */
>> #if MAX_SHORT_STRING > 8
>> #error MAX_SHORT_STRING must be less than 8.
>> #endif
>
> I am am right then there was a restriction in the year 2000 because the
> files are from the year 2000.
>
> Now there are some questions:
> Did I found the right code?
> is it possible that anybody could recompile this with long value names
> or where is the best manual for a quick start in compiling packages.
>
>
> I found a couple of weeks before a tread where anybody wrote a complete
> way for building packages.
> He described all problems of him and there were a lot of hints for the
> first steps, but I am not able to find it again - I don't know the
> search terms which I used before :-(
>
>
> with regards
> Knut
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


From jamatos at fc.up.pt  Tue Oct 11 16:44:57 2005
From: jamatos at fc.up.pt (=?UTF-8?B?Sm9zw6k=?= Matos)
Date: Tue, 11 Oct 2005 15:44:57 +0100
Subject: [Rd] Post processing need for installing packages in rpms.
References: <dig7g7$nq8$1@sea.gmane.org>
	<Pine.LNX.4.61.0510111247390.17417@gannet.stats>
Message-ID: <digj5a$2oh$1@sea.gmane.org>

Prof Brian Ripley wrote:

> On Tue, 11 Oct 2005, [UTF-8] Jos? Matos wrote:
> 
>> Hello,        I maintain some packages in Fedora Extras for R related
>> modules.
>>        Until R 2.2.0 I used for post processing (both after installing
>>        andremoving the package) the following lines:
>> %{_bindir}/R CMD perl %{_libdir}/R/share/perl/build-help.pl
>> --htmllistscat %{_libdir}/R/library/*/CONTENTS >
>> %{_libdir}/R/doc/html/search/index.txt
>>        Typically %{_bindir} is /usr/bin and %{_libdir} is /usr/lib
>>        or/usr/lib64 The purpose of those lines is to enable the access to
>>        the moduledocumentation from R help. The first refers to html and
>>        the second to thetext help variant. With R 2.2.0 build-help.pl no
>>        longer has the --htmllists option. Isthere any easy replacement,
>>        or is there any other method to achieve the sameresults?
> 
> It is no longer needed: the information is now built by R at runtime.

  It is good to know that. My work becomes easier now. :-)

>>        FWIW, I have searched trough the release notes as well as through
>>        thedocumentation for sys admins and for package developers without
>>        anysuccess.
> 
> For an outsider it might not be obvious that the NEWS entry
> 
>      o   R_HOME/doc/html/packages.html is now remade by R not Perl code.
>          This may result in small changes in layout and a change in
>          encoding (to UTF-8 where supported).
> 
> refers to this.  (Note that build-help.pl --htmllists was never documented
> as part of R's API.)

  Actually I notice that line, it looked suspicious but then I got
distracted by the last sentence and I have focused on the layout changes.
"A posteriori" it is easy to justify most of our failures. :-)

> I checked Martyn Plummer's R.spec on CRAN, but that is out-of-date.
> Please look at the R.spec in his current SRPM, which works for me.

  Where do I get it?

  I checked the spec files in 
http://cran.at.r-project.org/bin/linux/redhat/SRPMS/R.spec
http://cran.at.r-project.org/bin/linux/redhat/SRPMS/R-2.2.0-2.fc3.src.rpm

  since they have different dates, and they both show the same line with the
--htmlists parameter:

# Update package indices
%{_bindir}/R CMD perl %{_libdir}/R/share/perl/build-help.pl --htmllists
> /dev/null 2>/dev/null

[Last line was wrapped by my email composer.]

-- 
Jos? Ab?lio


From plummer at iarc.fr  Tue Oct 11 17:44:19 2005
From: plummer at iarc.fr (Martyn Plummer)
Date: Tue, 11 Oct 2005 17:44:19 +0200
Subject: [Rd] Post processing need for installing packages in rpms.
In-Reply-To: <Pine.LNX.4.61.0510111247390.17417@gannet.stats>
References: <dig7g7$nq8$1@sea.gmane.org>
	<Pine.LNX.4.61.0510111247390.17417@gannet.stats>
Message-ID: <1129045459.3557.6.camel@seurat>

On Tue, 2005-10-11 at 13:11 +0100, Prof Brian Ripley wrote:
> On Tue, 11 Oct 2005, [UTF-8] Jos? Matos wrote:
> 
> > Hello,        I maintain some packages in Fedora Extras for R related modules.
> >        Until R 2.2.0 I used for post processing (both after installing andremoving the package) the following lines:
> > %{_bindir}/R CMD perl %{_libdir}/R/share/perl/build-help.pl --htmllistscat %{_libdir}/R/library/*/CONTENTS > %{_libdir}/R/doc/html/search/index.txt
> >        Typically %{_bindir} is /usr/bin and %{_libdir} is /usr/lib or/usr/lib64
> >        The purpose of those lines is to enable the access to the moduledocumentation from R help. The first refers to html and the second to thetext help variant.
> >        With R 2.2.0 build-help.pl no longer has the --htmllists option. Isthere any easy replacement, or is there any other method to achieve the sameresults?
> 
> It is no longer needed: the information is now built by R at runtime.
> 
> >        FWIW, I have searched trough the release notes as well as through thedocumentation for sys admins and for package developers without anysuccess.
> 
> For an outsider it might not be obvious that the NEWS entry
> 
>      o   R_HOME/doc/html/packages.html is now remade by R not Perl code.
>          This may result in small changes in layout and a change in
>          encoding (to UTF-8 where supported).
> 
> refers to this.  (Note that build-help.pl --htmllists was never documented 
> as part of R's API.)
> 
> I checked Martyn Plummer's R.spec on CRAN, but that is out-of-date. 
> Please look at the R.spec in his current SRPM, which works for me.

Sorry about that.  I had forgotten that I put a lone spec file in there.
I have removed it, since it seems likely that I will do the same thing
in the future.

The perl hack used to be required because rpmbuild installs R in a build
root which is different from the final installation directory. The
reason you don't see an error message from the post install script is
because it is redirected to /dev/null. I'll fix this in the next
version.

Martyn

-----------------------------------------------------------------------
This message and its attachments are strictly confidential. ...{{dropped}}


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Tue Oct 11 18:00:53 2005
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: Tue, 11 Oct 2005 18:00:53 +0200
Subject: [Rd] Catching warning and error output
In-Reply-To: <200510101655.46264.thomas.friedrichsmeier@ruhr-uni-bochum.de>
References: <200510101655.46264.thomas.friedrichsmeier@ruhr-uni-bochum.de>
Message-ID: <200510111800.53867.thomas.friedrichsmeier@ruhr-uni-bochum.de>

Dear R developers,

since nobody has pointed me to an existing solution so far, here is a more 
specific suggestion. Attached you will find two patches against R version 
2.2.0.

The first patch does two things:
1) Add a function R_WriteErrConsole similar to R_WriteConsole, and a 
corresponding ptr_R_WriteErrConsole.
2) Make inError, inWarning, and inPrintWarnings from errors.c accessible 
(read-only) in R_ext/Error.h
I believe these changes to be minimally invasive. I did not test-compile on 
windows, but the change in gnuwin32 should be trivial.

The second patch adds a test/example to tests/Embedding, showing how this 
added API can be used to identify warnings and errors in the output stream.

If you need any further comments / different format of patches, or anything 
else in order to evaluate this proposal, please let me know.

Thanks!
Thomas

From daniel_wong80 at yahoo.com.sg  Tue Oct 11 18:03:05 2005
From: daniel_wong80 at yahoo.com.sg (Daniel Wong)
Date: Wed, 12 Oct 2005 00:03:05 +0800 (CST)
Subject: [Rd] Compile problem R 2.2.0 + Solaris 10 x86
Message-ID: <20051011160305.80954.qmail@web35110.mail.mud.yahoo.com>

Hi!

I'm trying to compile R (32-bit) on Solaris 10 x86
using Sun Studio 10 + Sun Perflib (for BLAS and
LAPACK) but encountered issues with undefined symbol
"bratio". Appreciate any help.

Compiler options (from configure output):
==============================================
R is now configured for i386-pc-solaris2.10

  Source directory:          .
  Installation directory:    /usr/local

  C compiler:                cc -g -O -xtarget=opteron
-D__NO_MATH_INLINES -g -O -xtarget=opteron
  C++ compiler:              CC -gO -xtarget=opteron 
-gO -xtarget=opteron
  Fortran compiler:          f77 -g -O
-xtarget=opteron  -gO -xtarget=opteron

  Interfaces supported:      X11
  External libraries:        readline, BLAS(SunPerf)
  Additional capabilities:   PNG, JPEG, MBCS, NLS
  Options enabled:           R profiling

  Recommended packages:      yes

configure: WARNING: you cannot build DVI versions of
the R manuals
configure: WARNING: you cannot build PDF versions of
the R manuals
==============================================

Compile error:
==============================================
...
cc -g -O -xtarget=opteron  -L/opt/SUNWspro/lib
-L/usr/lib -L/usr/sfw/lib -L/opt/sfw/lib -o R.bin 
Rmain.o  CConverters.o CommandLineArgs.o  Rdynload.o
Renviron.o RNG.o  apply.o arithmetic.o apse.o array.o
attrib.o  base.o bind.o builtin.o  character.o
coerce.o colors.o complex.o connections.o context.o 
cov.o cum.o  dcf.o datetime.o debug.o deparse.o
deriv.o  dotcode.o dounzip.o dstruct.o duplicate.o 
engine.o envir.o errors.o eval.o  format.o fourier.o 
gevents.o gram.o gram-ex.o graphics.o  identical.o
internet.o iosupport.o  lapack.o list.o logic.o 
main.o mapply.o match.o memory.o model.o  names.o 
objects.o optim.o optimize.o options.o  par.o paste.o
pcre.o platform.o  plot.o plot3d.o plotmath.o  print.o
printarray.o printvector.o printutils.o qsort.o 
random.o regex.o registration.o relop.o  saveload.o
scan.o seq.o serialize.o size.o sort.o source.o
split.o  sprintf.o startup.o subassign.o subscript.o
subset.o summary.o sysutils.o  unique.o util.o 
version.o vfonts.o xxxpr.o ../unix/libunix.a
../appl/libappl.a ../nmath/libnmath.a 
-xlic_lib=sunperf -lsunmath -Rreg
-R/opt/SUNWspro/lib/sse2:/opt/SUNWspro/lib
-L/opt/SUNWspro/lib/sse2 -L/opt/SUNWspro/prod/lib/sse2
-L/opt/SUNWspro/prod/lib -L/usr/ccs/lib -lfui -lfai
-lfsu -lsunmath -lmtsk -lm  ../extra/zlib/libz.a
../extra/bzip2/libbz2.a ../extra/pcre/libpcre.a
../extra/intl/libintl.a -lreadline -lncurses -lnsl
-lsocket -ldl -lm
Undefined                       first referenced
 symbol                             in file
bratio                             
../nmath/libnmath.a(pbeta.o)
ld: fatal: Symbol referencing errors. No output
written to R.bin
*** Error code 1
make: Fatal error: Command failed for target `R.bin'
Current working directory
/tmp/apps/R-2.2.0-32/src/main
*** Error code 1
The following command caused the error:
make install-bin-local
make: Fatal error: Command failed for target `R'
Current working directory
/tmp/apps/R-2.2.0-32/src/main
*** Error code 1
The following command caused the error:
for d in scripts include extra appl nmath unix main
modules library; do \
  (cd ${d} && make R) || exit 1; \
done
make: Fatal error: Command failed for target `R'
Current working directory /tmp/apps/R-2.2.0-32/src
*** Error code 1
The following command caused the error:
for d in m4 tools doc etc share src tests  po; do \
  (cd ${d} && make R) || exit 1; \
done
make: Fatal error: Command failed for target `R'
==============================================

Thanks.

Regards,

Daniel


		
__________________________________ 
Meet your soulmate!


From W.E.Wolski at newcastle.ac.uk  Tue Oct 11 18:05:32 2005
From: W.E.Wolski at newcastle.ac.uk (nwew)
Date: Tue, 11 Oct 2005 17:05:32 +0100
Subject: [Rd] Error: .First.lib failed for 'SBMLodeSolveR'
Message-ID: <434BD494@webmail.ncl.ac.uk>

Dear R-developers,

I am getting the following error message (see bottom of e-mail) and can't make 
a clue out of it.

The zzz.R file contains 
.First.lib <- function(lib, pkg) library.dynam("SBMLodeSolveR",pkg,lib)
.Last.lib <- function(libpath) library.dynam.unload("SBMLodeSolveR", libpath)

There is a SBMLodeSolveR.so file in the src directory which works if loaded 
with 
dyn.load("/data/devel/SBMLodeSolveR/SBMLodeSolveR/src/SBMLodeSolveR.so")

The error/warning messages are:

* checking S3 generic/method consistency ... WARNING
Error: .First.lib failed for 'SBMLodeSolveR'
Call sequence:
2: stop(gettextf(".First.lib failed for '%s'", libraryPkgName(package)),
       domain = NA)
1: library(package, lib.loc = lib.loc, character.only = TRUE, verbose = FALSE)
Execution halted
See section 'Generic functions and methods' of the 'Writing R Extensions'
manual.
* checking replacement functions ... WARNING
Error: .First.lib failed for 'SBMLodeSolveR'
Call sequence:
2: stop(gettextf(".First.lib failed for '%s'", libraryPkgName(package)),
       domain = NA)
1: library(package, lib.loc = lib.loc, character.only = TRUE, verbose = FALSE)
Execution halted
In R, the argument of a replacement function which corresponds to the right
hand side must be named 'value'.
* checking foreign function calls ... WARNING
Error: .First.lib failed for 'SBMLodeSolveR'
Call sequence:
2: stop(gettextf(".First.lib failed for '%s'", libraryPkgName(package)),
       domain = NA)
1: library(package, lib.loc = lib.loc, character.only = TRUE, verbose = FALSE)
Execution halted
See section 'System and foreign language interfaces' of the 'Writing R
Extensions' manual.
*


Eryk


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Tue Oct 11 18:13:57 2005
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: Tue, 11 Oct 2005 18:13:57 +0200
Subject: [Rd] Catching warning and error output
In-Reply-To: <200510111800.53867.thomas.friedrichsmeier@ruhr-uni-bochum.de>
References: <200510101655.46264.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<200510111800.53867.thomas.friedrichsmeier@ruhr-uni-bochum.de>
Message-ID: <200510111813.57519.thomas.friedrichsmeier@ruhr-uni-bochum.de>

> since nobody has pointed me to an existing solution so far, here is a more
> specific suggestion. Attached you will find two patches against R version
> 2.2.0.

Sorry, seems the attachments were stripped (at least they don't show up in the 
archive). Here are links to the two diffs in question:

http://rkward.sourceforge.net/temp/classify_output_patch.diff
http://rkward.sourceforge.net/temp/classify_output_test.diff

Thomas


From ripley at stats.ox.ac.uk  Tue Oct 11 19:27:14 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 11 Oct 2005 18:27:14 +0100 (BST)
Subject: [Rd] summary of Surv object  crashes R 2.2.0 (PR#8203)
In-Reply-To: <20051011094125.3A9511C81B@slim.kubism.ku.dk>
References: <20051011094125.3A9511C81B@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.61.0510111803360.24727@gannet.stats>

This hasn't crashed R.  It is almost certainly stack overflow due to 
excessive recursion (which is what happens on Linux, and in R-patched on 
Windows).  (Note to people tempted to raise the evaluation limit in R: 
please check against the stack size.  We've raised the latter to 10Mb on 
Windows to compensate.)  I get

> summary(surv)
Error: evaluation nested too deeply: infinite recursion / options(expressions=)?

The issue is that surv is a matrix, and summary.matrix calls 
summary.data.frame which calls summary.matrix on the matrix column ....
And this happens because there is an as.data.frame method for class Surv.
You probably got a useful error message in 2.1.0: I did.

The current code come from

r33884 | maechler | 2005-04-11 11:37:04 +0100 (Mon, 11 Apr 2005) | 1 line

summary(data.frame(I(<matrix>)))

which is clearly not enough.  When Martin gets back perhaps he can remind 
us why unclass() was not good enough here.  I think we need

> summary.matrix
function (object, ...)
summary.data.frame(data.frame(unclass(object)), ...)

since there is no other way to guarantee that data.frame splits the matrix 
up into columns.  But a summary.Surv method would be a good idea.


On Tue, 11 Oct 2005 v.moreno at ico.scs.es wrote:

> Full_Name: Victor Moreno
> Version: 2.2.0
> OS: windows
> Submission from: (NULL) (213.151.99.160)
>
>
> summary of an object class Surv (package survival) hangs and closes R 2.2.0
>
> I would like to have Surv objects in a data frame to build models easier:
>
> t<-rexp(100)
> s<-rbinom(100,1,.3)
> surv<-Surv(t,s)
> x1<-rnorm(100,10,2)
> x2<-rnorm(100,10,2)
> dat<-data.frame(surv,x1,x2)
> coxph(surv~.,data=dat)
>
> so far no problems, but R crashes if I write
>
> summary(dat)
>
> I checked that the problem is in
> summary(surv)
>
> Tested on previous versions of R (1.9.0, 2.1.0) in a friend's computer) 
> gives no results, but doesn't crash R

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Oct 11 20:26:43 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 11 Oct 2005 19:26:43 +0100 (BST)
Subject: [Rd] Compile problem R 2.2.0 + Solaris 10 x86
In-Reply-To: <20051011160305.80954.qmail@web35110.mail.mud.yahoo.com>
References: <20051011160305.80954.qmail@web35110.mail.mud.yahoo.com>
Message-ID: <Pine.LNX.4.61.0510111923150.25793@gannet.stats>

I can't solve this as I think the problem occurred earlier.  bratio is 
defined in src/nmath/toms708.o included in src/nmath/libmath.a

Take a look at what was built in src/nmath.

On Wed, 12 Oct 2005, Daniel Wong wrote:

> Hi!
>
> I'm trying to compile R (32-bit) on Solaris 10 x86
> using Sun Studio 10 + Sun Perflib (for BLAS and
> LAPACK) but encountered issues with undefined symbol
> "bratio". Appreciate any help.
>
> Compiler options (from configure output):
> ==============================================
> R is now configured for i386-pc-solaris2.10
>
>  Source directory:          .
>  Installation directory:    /usr/local
>
>  C compiler:                cc -g -O -xtarget=opteron
> -D__NO_MATH_INLINES -g -O -xtarget=opteron
>  C++ compiler:              CC -gO -xtarget=opteron
> -gO -xtarget=opteron
>  Fortran compiler:          f77 -g -O
> -xtarget=opteron  -gO -xtarget=opteron
>
>  Interfaces supported:      X11
>  External libraries:        readline, BLAS(SunPerf)
>  Additional capabilities:   PNG, JPEG, MBCS, NLS
>  Options enabled:           R profiling
>
>  Recommended packages:      yes
>
> configure: WARNING: you cannot build DVI versions of
> the R manuals
> configure: WARNING: you cannot build PDF versions of
> the R manuals
> ==============================================
>
> Compile error:
> ==============================================
> ...
> cc -g -O -xtarget=opteron  -L/opt/SUNWspro/lib
> -L/usr/lib -L/usr/sfw/lib -L/opt/sfw/lib -o R.bin
> Rmain.o  CConverters.o CommandLineArgs.o  Rdynload.o
> Renviron.o RNG.o  apply.o arithmetic.o apse.o array.o
> attrib.o  base.o bind.o builtin.o  character.o
> coerce.o colors.o complex.o connections.o context.o
> cov.o cum.o  dcf.o datetime.o debug.o deparse.o
> deriv.o  dotcode.o dounzip.o dstruct.o duplicate.o
> engine.o envir.o errors.o eval.o  format.o fourier.o
> gevents.o gram.o gram-ex.o graphics.o  identical.o
> internet.o iosupport.o  lapack.o list.o logic.o
> main.o mapply.o match.o memory.o model.o  names.o
> objects.o optim.o optimize.o options.o  par.o paste.o
> pcre.o platform.o  plot.o plot3d.o plotmath.o  print.o
> printarray.o printvector.o printutils.o qsort.o
> random.o regex.o registration.o relop.o  saveload.o
> scan.o seq.o serialize.o size.o sort.o source.o
> split.o  sprintf.o startup.o subassign.o subscript.o
> subset.o summary.o sysutils.o  unique.o util.o
> version.o vfonts.o xxxpr.o ../unix/libunix.a
> ../appl/libappl.a ../nmath/libnmath.a
> -xlic_lib=sunperf -lsunmath -Rreg
> -R/opt/SUNWspro/lib/sse2:/opt/SUNWspro/lib
> -L/opt/SUNWspro/lib/sse2 -L/opt/SUNWspro/prod/lib/sse2
> -L/opt/SUNWspro/prod/lib -L/usr/ccs/lib -lfui -lfai
> -lfsu -lsunmath -lmtsk -lm  ../extra/zlib/libz.a
> ../extra/bzip2/libbz2.a ../extra/pcre/libpcre.a
> ../extra/intl/libintl.a -lreadline -lncurses -lnsl
> -lsocket -ldl -lm
> Undefined                       first referenced
> symbol                             in file
> bratio
> ../nmath/libnmath.a(pbeta.o)
> ld: fatal: Symbol referencing errors. No output
> written to R.bin
> *** Error code 1
> make: Fatal error: Command failed for target `R.bin'
> Current working directory
> /tmp/apps/R-2.2.0-32/src/main
> *** Error code 1
> The following command caused the error:
> make install-bin-local
> make: Fatal error: Command failed for target `R'
> Current working directory
> /tmp/apps/R-2.2.0-32/src/main
> *** Error code 1
> The following command caused the error:
> for d in scripts include extra appl nmath unix main
> modules library; do \
>  (cd ${d} && make R) || exit 1; \
> done
> make: Fatal error: Command failed for target `R'
> Current working directory /tmp/apps/R-2.2.0-32/src
> *** Error code 1
> The following command caused the error:
> for d in m4 tools doc etc share src tests  po; do \
>  (cd ${d} && make R) || exit 1; \
> done
> make: Fatal error: Command failed for target `R'
> ==============================================
>
> Thanks.
>
> Regards,
>
> Daniel
>
>
>
> __________________________________
> Meet your soulmate!
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Oct 11 20:31:11 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 11 Oct 2005 19:31:11 +0100 (BST)
Subject: [Rd] Error: .First.lib failed for 'SBMLodeSolveR'
In-Reply-To: <434BD494@webmail.ncl.ac.uk>
References: <434BD494@webmail.ncl.ac.uk>
Message-ID: <Pine.LNX.4.61.0510111927430.25793@gannet.stats>

What is 'SBMLodeSolveR'?

The standard advice is to check that you can install and load the package 
before you try R CMD check on it.  That way you may get a more informative 
error message.  You may also need to try loading after having started R 
with R_DEFAULT_PACKAGES=NULL.


On Tue, 11 Oct 2005, nwew wrote:

> Dear R-developers,
>
> I am getting the following error message (see bottom of e-mail) and can't make
> a clue out of it.
>
> The zzz.R file contains
> .First.lib <- function(lib, pkg) library.dynam("SBMLodeSolveR",pkg,lib)
> .Last.lib <- function(libpath) library.dynam.unload("SBMLodeSolveR", libpath)
>
> There is a SBMLodeSolveR.so file in the src directory which works if loaded
> with
> dyn.load("/data/devel/SBMLodeSolveR/SBMLodeSolveR/src/SBMLodeSolveR.so")
>
> The error/warning messages are:
>
> * checking S3 generic/method consistency ... WARNING
> Error: .First.lib failed for 'SBMLodeSolveR'
> Call sequence:
> 2: stop(gettextf(".First.lib failed for '%s'", libraryPkgName(package)),
>       domain = NA)
> 1: library(package, lib.loc = lib.loc, character.only = TRUE, verbose = FALSE)
> Execution halted
> See section 'Generic functions and methods' of the 'Writing R Extensions'
> manual.
> * checking replacement functions ... WARNING
> Error: .First.lib failed for 'SBMLodeSolveR'
> Call sequence:
> 2: stop(gettextf(".First.lib failed for '%s'", libraryPkgName(package)),
>       domain = NA)
> 1: library(package, lib.loc = lib.loc, character.only = TRUE, verbose = FALSE)
> Execution halted
> In R, the argument of a replacement function which corresponds to the right
> hand side must be named 'value'.
> * checking foreign function calls ... WARNING
> Error: .First.lib failed for 'SBMLodeSolveR'
> Call sequence:
> 2: stop(gettextf(".First.lib failed for '%s'", libraryPkgName(package)),
>       domain = NA)
> 1: library(package, lib.loc = lib.loc, character.only = TRUE, verbose = FALSE)
> Execution halted
> See section 'System and foreign language interfaces' of the 'Writing R
> Extensions' manual.
> *
>
>
> Eryk
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Roger.Bivand at nhh.no  Tue Oct 11 21:17:16 2005
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Tue, 11 Oct 2005 21:17:16 +0200 (CEST)
Subject: [Rd] Manual page example of plot.window needs fixing
Message-ID: <Pine.LNX.4.44.0510112113370.19419-100000@reclus.nhh.no>

I was looking at the example on the manual page of plot.window, and
noticed that it needs fixing - names(eurodist) should now be
labels(eurodist):

--- /home/rsb/topics/R-2.2.0/src/library/graphics/man/plot.window.Rd    
2005-04-18 12:18:59.000000000 +0200
+++ plot.window.Rd      2005-10-11 21:08:57.000000000 +0200
@@ -48,6 +48,6 @@
 ry <- range(y <- -loc[,2])
 plot(x, y, type="n", asp=1, xlab="", ylab="")
 abline(h = pretty(rx, 10), v = pretty(ry, 10), col = "lightgray")
-text(x, y, names(eurodist), cex=0.8)
+text(x, y, labels(eurodist), cex=0.8)
 }
 \keyword{aplot}

with reference to Prof. Ripley's message of 5 May:

http://finzi.psych.upenn.edu/R/Rhelp02a/archive/55417.html

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand at nhh.no


From dsamperi at DecisionSynergy.com  Tue Oct 11 21:27:08 2005
From: dsamperi at DecisionSynergy.com (Dominick Samperi)
Date: Tue, 11 Oct 2005 15:27:08 -0400
Subject: [Rd] MiKTeX/yap/Ghostcript issues with R-generated postscript
Message-ID: <434C120C.60708@DecisionSynergy.com>

Hello,

I wonder if anybody has encountered this problem?

While MiKTeX/yap/Ghostscript seems to work fine on most TeX files that I 
have
tested (including a great deal of postscript graphics), there is one 
file where the
graphics works ok for all postscript files except one, the only one that 
is generated
by R. I get an error "Some postscript specials could not be rendered", 
and the
details of the error message are in the attached file.

This same dvi file displays fine under Linux.

I'm using yap from MiKTeX 2.4 with the "most popular" installation option.

Any tips would be appreciated,
Dominick

-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: yapGhostscript.txt
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051011/574cb5a0/yapGhostscript.txt

From ripley at stats.ox.ac.uk  Tue Oct 11 21:44:44 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 11 Oct 2005 20:44:44 +0100 (BST)
Subject: [Rd] Manual page example of plot.window needs fixing
In-Reply-To: <Pine.LNX.4.44.0510112113370.19419-100000@reclus.nhh.no>
References: <Pine.LNX.4.44.0510112113370.19419-100000@reclus.nhh.no>
Message-ID: <Pine.LNX.4.61.0510112042050.26670@gannet.stats>

Yes, thanks will fix in R-patched shortly.

Some grep-ing shows that there is another example in optim.Rd.

On Tue, 11 Oct 2005, Roger Bivand wrote:

> I was looking at the example on the manual page of plot.window, and
> noticed that it needs fixing - names(eurodist) should now be
> labels(eurodist):
>
> --- /home/rsb/topics/R-2.2.0/src/library/graphics/man/plot.window.Rd
> 2005-04-18 12:18:59.000000000 +0200
> +++ plot.window.Rd      2005-10-11 21:08:57.000000000 +0200
> @@ -48,6 +48,6 @@
> ry <- range(y <- -loc[,2])
> plot(x, y, type="n", asp=1, xlab="", ylab="")
> abline(h = pretty(rx, 10), v = pretty(ry, 10), col = "lightgray")
> -text(x, y, names(eurodist), cex=0.8)
> +text(x, y, labels(eurodist), cex=0.8)
> }
> \keyword{aplot}
>
> with reference to Prof. Ripley's message of 5 May:
>
> http://finzi.psych.upenn.edu/R/Rhelp02a/archive/55417.html
>
> -- 
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand at nhh.no
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From admin at biostatistic.de  Tue Oct 11 21:55:12 2005
From: admin at biostatistic.de (Knut Krueger)
Date: Tue, 11 Oct 2005 21:55:12 +0200
Subject: [Rd] 8 char labels in read.spss
In-Reply-To: <Pine.LNX.4.63a.0510110734250.27917@homer24.u.washington.edu>
References: <434B89CB.70209@biostatistic.de>
	<Pine.LNX.4.63a.0510110734250.27917@homer24.u.washington.edu>
Message-ID: <434C18A0.2040406@biostatistic.de>



Thomas Lumley schrieb:

> On Tue, 11 Oct 2005, Knut Krueger wrote:
>
>> I was wondering why it is possible to read long labels from the CVS
>> files but not from the SPSS files.
>
>
> The SPSS file formats are not documented, and so we rely on the code 
> from PSPP.  At the time, PSPP did not read long variable names.  It 
> now does, so it would be possible for someone update the SPSS-reading 
> code to handle long variable names.  This is much more complicated 
> than just changing a #define; the long variable names are stored in a 
> different part of the file.
>
> I don't expect anyone on R-core to get around to this any time soon. 
> If you want to try, the current PSPP code is at
>    http://savannah.gnu.org/projects/pspp 

Thanks for your reply,
unfortunatlley the link is broken
and gnu.org is linking to the same page
http://www.gnu.org/software/pspp/pspp.html ...

Knut


From admin at biostatistic.de  Tue Oct 11 21:58:21 2005
From: admin at biostatistic.de (Knut Krueger)
Date: Tue, 11 Oct 2005 21:58:21 +0200
Subject: [Rd] 8 char labels in read.spss
In-Reply-To: <Pine.LNX.4.63a.0510110734250.27917@homer24.u.washington.edu>
References: <434B89CB.70209@biostatistic.de>
	<Pine.LNX.4.63a.0510110734250.27917@homer24.u.washington.edu>
Message-ID: <434C195D.3040909@biostatistic.de>



Thomas Lumley schrieb:

> On Tue, 11 Oct 2005, Knut Krueger wrote:
>
>> I was wondering why it is possible to read long labels from the CVS
>> files but not from the SPSS files.
>
>
> The SPSS file formats are not documented, and so we rely on the code 
> from PSPP.

I found a definition of the SPSS files.
http://www.wotsit.org/download.asp?f=spssdata
but they recommend to use the spss input/output dll to ensure upward 
compatbility

Regards Knut


From admin at biostatistic.de  Tue Oct 11 22:03:53 2005
From: admin at biostatistic.de (Knut Krueger)
Date: Tue, 11 Oct 2005 22:03:53 +0200
Subject: [Rd] 8 char labels in read.spss
In-Reply-To: <Pine.LNX.4.43.0510111243260.2871@hymn06.u.washington.edu>
References: <Pine.LNX.4.43.0510111243260.2871@hymn06.u.washington.edu>
Message-ID: <434C1AA9.1050508@biostatistic.de>



Thomas Lumley schrieb:

> On Tue, 11 Oct 2005, Knut Krueger wrote:
>
>> Thanks for your reply,
>> unfortunatlley the link is broken
>> and gnu.org is linking to the same page
>> http://www.gnu.org/software/pspp/pspp.html ...
>>
>
> It works for me now (as it did then) 


Mc Murpey was working ...
seems  that the server did not answer just in the 5 minutes I tried it ....

Regards Knut


>
>
>       -thomas
>
>

-- 
with regards
Knut Krueger
http://www.biostatistic.de


From ligges at statistik.uni-dortmund.de  Tue Oct 11 23:25:03 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Tue, 11 Oct 2005 23:25:03 +0200
Subject: [Rd] MiKTeX/yap/Ghostcript issues with R-generated postscript
In-Reply-To: <434C120C.60708@DecisionSynergy.com>
References: <434C120C.60708@DecisionSynergy.com>
Message-ID: <434C2DAF.7060606@statistik.uni-dortmund.de>

Dominick Samperi wrote:

> Hello,
> 
> I wonder if anybody has encountered this problem?
> 
> While MiKTeX/yap/Ghostscript seems to work fine on most TeX files that I 
> have
> tested (including a great deal of postscript graphics), there is one 
> file where the
> graphics works ok for all postscript files except one, the only one that 
> is generated
> by R. I get an error "Some postscript specials could not be rendered", 
> and the
> details of the error message are in the attached file.
> 
> This same dvi file displays fine under Linux.
> 
> I'm using yap from MiKTeX 2.4 with the "most popular" installation option.
>


Hmmm, has not happened for me within the last couple of years I was 
using R + MikTeX 2.4 ...

Can you specify a reproducible example for the R code that produces that 
PostScript file, please?
[Wild guess: Maybe you forgot to close the device by dev.off()?]

Uwe Ligges



> Any tips would be appreciated,
> Dominick
> 
> 
> ------------------------------------------------------------------------
> 
> Error: /undefined in 411 at endspecial
> Operand stack:
>    --nostringval--   PermitFileReading   --nostringval--   PermitFileWriting   --nostringval--
> Execution stack:
>    %interp_exit   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--   --nostringval--   --nostringval--   false   1   %stopped_push   1   3   %oparray_pop   1   3   %oparray_pop   1   3   %oparray_pop   1   3   %oparray_pop   .runexec2   --nostringval--   --nostringval--   --nostringval--   2   %stopped_push   --nostringval--
> Dictionary stack:
>    --dict:1125/1686(ro)(G)--   --dict:0/20(G)--   --dict:71/200(L)--   --dict:95/300(L)--   --dict:63/200(L)--
> Current allocation mode is local
> MiKTeX GPL Ghostscript 8.15: Unrecoverable error, exit code 1
> 
> 
> ------------------------------------------------------------------------
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From tlumley at u.washington.edu  Wed Oct 12 01:08:49 2005
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 11 Oct 2005 16:08:49 -0700 (PDT)
Subject: [Rd] 8 char labels in read.spss
In-Reply-To: <434C195D.3040909@biostatistic.de>
References: <434B89CB.70209@biostatistic.de>
	<Pine.LNX.4.63a.0510110734250.27917@homer24.u.washington.edu>
	<434C195D.3040909@biostatistic.de>
Message-ID: <Pine.LNX.4.63a.0510111605400.3867@homer21.u.washington.edu>

On Tue, 11 Oct 2005, Knut Krueger wrote:
>
> I found a definition of the SPSS files.
> http://www.wotsit.org/download.asp?f=spssdata
> but they recommend to use the spss input/output dll to ensure upward
> compatbility
>

"Well, they would say that, wouldn't they" (Rice-Davis 1963)

Unfortunately, that document is an old file format. It doesn't describe 
record 7 subtype 13, which is where the long variable names live.

 	-thomas


From dsamperi at DecisionSynergy.com  Wed Oct 12 01:29:39 2005
From: dsamperi at DecisionSynergy.com (Dominick Samperi)
Date: Tue, 11 Oct 2005 19:29:39 -0400
Subject: [Rd] MiKTeX/yap/Ghostcript issues with R-generated postscript
In-Reply-To: <434C2DAF.7060606@statistik.uni-dortmund.de>
References: <434C120C.60708@DecisionSynergy.com>
	<434C2DAF.7060606@statistik.uni-dortmund.de>
Message-ID: <434C4AE3.1040002@DecisionSynergy.com>

Uwe Ligges wrote:
> Dominick Samperi wrote:
>
>> Hello,
>>
>> I wonder if anybody has encountered this problem?
>>
>> While MiKTeX/yap/Ghostscript seems to work fine on most TeX files 
>> that I have
>> tested (including a great deal of postscript graphics), there is one 
>> file where the
>> graphics works ok for all postscript files except one, the only one 
>> that is generated
>> by R. I get an error "Some postscript specials could not be 
>> rendered", and the
>> details of the error message are in the attached file.
>>
>> This same dvi file displays fine under Linux.
>>
>> I'm using yap from MiKTeX 2.4 with the "most popular" installation 
>> option.
>>
>
>
> Hmmm, has not happened for me within the last couple of years I was 
> using R + MikTeX 2.4 ...
>
> Can you specify a reproducible example for the R code that produces 
> that PostScript file, please?
> [Wild guess: Maybe you forgot to close the device by dev.off()?]
>
> Uwe Ligges
Thank you Uwe,

Your wild guess is correct! I was not closing the device, and the 
postscript file indeed did not
have proper trailers. I am surprised that this did not cause problems on 
the Linux side...

Dominick


From daniel_wong80 at yahoo.com.sg  Wed Oct 12 09:59:41 2005
From: daniel_wong80 at yahoo.com.sg (Daniel Wong)
Date: Wed, 12 Oct 2005 15:59:41 +0800 (CST)
Subject: [Rd] make check seg faults at base-Ex.R [was Re: Compile problem R
	2.2.0 + Solaris 10 x86]
In-Reply-To: <Pine.LNX.4.61.0510111923150.25793@gannet.stats>
Message-ID: <20051012075942.7799.qmail@web35110.mail.mud.yahoo.com>

Hi Prof Ripley,

The "problem" seems to go away by using gmake instead
of /usr/ccs/bin/make. Compilation is successful, but
now, I get core dump during make check.

==========================
gmake[1]: Entering directory
`/tmp/apps/R-2.2.0-32/tests'
gmake[2]: Entering directory
`/tmp/apps/R-2.2.0-32/tests'
gmake[3]: Entering directory
`/tmp/apps/R-2.2.0-32/tests/Examples'
gmake[4]: Entering directory
`/tmp/apps/R-2.2.0-32/tests/Examples'
gmake[4]: Leaving directory
`/tmp/apps/R-2.2.0-32/tests/Examples'
gmake[4]: Entering directory
`/tmp/apps/R-2.2.0-32/tests/Examples'
collecting examples for package 'base' ...
gmake[5]: Entering directory
`/tmp/apps/R-2.2.0-32/src/library'
 >>> Building/Updating help pages for package 'base'
     Formats: text html latex example
gmake[5]: Leaving directory
`/tmp/apps/R-2.2.0-32/src/library'
running code in 'base-Ex.R' .../bin/bash: line 1:
24337 Segmentation Fault      (core dumped)
../../bin/R
 --vanilla <base-Ex.R >base-Ex.Rout 2>&1
gmake[4]: *** [base-Ex.Rout] Error 1
gmake[4]: Leaving directory
`/tmp/apps/R-2.2.0-32/tests/Examples'
gmake[3]: *** [test-Examples-Base] Error 2
gmake[3]: Leaving directory
`/tmp/apps/R-2.2.0-32/tests/Examples'
gmake[2]: *** [test-Examples] Error 2
gmake[2]: Leaving directory
`/tmp/apps/R-2.2.0-32/tests'
gmake[1]: *** [test-all-basics] Error 1
gmake[1]: Leaving directory
`/tmp/apps/R-2.2.0-32/tests'
gmake: *** [check] Error 2
==========================

Stack trace of core file:
==========================
# pstack tests/Examples/core
core 'tests/Examples/core' of 24337:   
/tmp/apps/R-2.2.0-32/bin/exec/R --vanilla
 08107de4 RunGenCollect (0) + c1c
 0810c424 do_memoryprofile (941180c, 832f178, 82e1f50,
94117d4) + 2a8
 081153c2 do_internal (9411844, 8325284, 82e1f50,
94117d4) + e2
 080da4f8 Rf_eval  (9411844, 94117d4) + 700
 080dab59 Rf_applyClosure (9411b00, 9411860, 82e1f50,
8336ff4, 82e1f50) + 335
 080da0ae Rf_eval  (9411b00, 8336ff4) + 2b6
 081025b7 R_ReplConsole (8336ff4, 0, 0) + 37b
 08103651 Rf_mainloop (bfffb824, 8047940, 8047a30,
8047978, 8065a1a, 2) + 45
 08065b7d main     (2, 8047984, 8047990) + 19
 08065a1a ???????? (2, 8047a98, 8047ab8, 0, 8047ac2,
8047ad9)
==========================

Have tried with no optimisation flags but still, make
check fails at the same spot. Any clues on what should
I be checking on?

Thanks for the help.

Cheers,

Daniel

--- Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:

> I can't solve this as I think the problem occurred
> earlier.  bratio is 
> defined in src/nmath/toms708.o included in
> src/nmath/libmath.a
> 
> Take a look at what was built in src/nmath.
> 
> On Wed, 12 Oct 2005, Daniel Wong wrote:
> 
> > Hi!
> >
> > I'm trying to compile R (32-bit) on Solaris 10 x86
> > using Sun Studio 10 + Sun Perflib (for BLAS and
> > LAPACK) but encountered issues with undefined
> symbol
> > "bratio". Appreciate any help.
> >
> > Compiler options (from configure output):
> > ==============================================
> > R is now configured for i386-pc-solaris2.10
> >
> >  Source directory:          .
> >  Installation directory:    /usr/local
> >
> >  C compiler:                cc -g -O
> -xtarget=opteron
> > -D__NO_MATH_INLINES -g -O -xtarget=opteron
> >  C++ compiler:              CC -gO
> -xtarget=opteron
> > -gO -xtarget=opteron
> >  Fortran compiler:          f77 -g -O
> > -xtarget=opteron  -gO -xtarget=opteron
> >
> >  Interfaces supported:      X11
> >  External libraries:        readline,
> BLAS(SunPerf)
> >  Additional capabilities:   PNG, JPEG, MBCS, NLS
> >  Options enabled:           R profiling
> >
> >  Recommended packages:      yes
> >
> > configure: WARNING: you cannot build DVI versions
> of
> > the R manuals
> > configure: WARNING: you cannot build PDF versions
> of
> > the R manuals
> > ==============================================
> >
> > Compile error:
> > ==============================================
> > ...
> > cc -g -O -xtarget=opteron  -L/opt/SUNWspro/lib
> > -L/usr/lib -L/usr/sfw/lib -L/opt/sfw/lib -o R.bin
> > Rmain.o  CConverters.o CommandLineArgs.o 
> Rdynload.o
> > Renviron.o RNG.o  apply.o arithmetic.o apse.o
> array.o
> > attrib.o  base.o bind.o builtin.o  character.o
> > coerce.o colors.o complex.o connections.o
> context.o
> > cov.o cum.o  dcf.o datetime.o debug.o deparse.o
> > deriv.o  dotcode.o dounzip.o dstruct.o duplicate.o
> > engine.o envir.o errors.o eval.o  format.o
> fourier.o
> > gevents.o gram.o gram-ex.o graphics.o  identical.o
> > internet.o iosupport.o  lapack.o list.o logic.o
> > main.o mapply.o match.o memory.o model.o  names.o
> > objects.o optim.o optimize.o options.o  par.o
> paste.o
> > pcre.o platform.o  plot.o plot3d.o plotmath.o 
> print.o
> > printarray.o printvector.o printutils.o qsort.o
> > random.o regex.o registration.o relop.o 
> saveload.o
> > scan.o seq.o serialize.o size.o sort.o source.o
> > split.o  sprintf.o startup.o subassign.o
> subscript.o
> > subset.o summary.o sysutils.o  unique.o util.o
> > version.o vfonts.o xxxpr.o ../unix/libunix.a
> > ../appl/libappl.a ../nmath/libnmath.a
> > -xlic_lib=sunperf -lsunmath -Rreg
> > -R/opt/SUNWspro/lib/sse2:/opt/SUNWspro/lib
> > -L/opt/SUNWspro/lib/sse2
> -L/opt/SUNWspro/prod/lib/sse2
> > -L/opt/SUNWspro/prod/lib -L/usr/ccs/lib -lfui
> -lfai
> > -lfsu -lsunmath -lmtsk -lm  ../extra/zlib/libz.a
> > ../extra/bzip2/libbz2.a ../extra/pcre/libpcre.a
> > ../extra/intl/libintl.a -lreadline -lncurses -lnsl
> > -lsocket -ldl -lm
> > Undefined                       first referenced
> > symbol                             in file
> > bratio
> > ../nmath/libnmath.a(pbeta.o)
> > ld: fatal: Symbol referencing errors. No output
> > written to R.bin
> > *** Error code 1
> > make: Fatal error: Command failed for target
> `R.bin'
> > Current working directory
> > /tmp/apps/R-2.2.0-32/src/main
> > *** Error code 1
> > The following command caused the error:
> > make install-bin-local
> > make: Fatal error: Command failed for target `R'
> > Current working directory
> > /tmp/apps/R-2.2.0-32/src/main
> > *** Error code 1
> > The following command caused the error:
> > for d in scripts include extra appl nmath unix
> main
> > modules library; do \
> >  (cd ${d} && make R) || exit 1; \
> > done
> > make: Fatal error: Command failed for target `R'
> > Current working directory /tmp/apps/R-2.2.0-32/src
> > *** Error code 1
> > The following command caused the error:
> > for d in m4 tools doc etc share src tests  po; do
> \
> >  (cd ${d} && make R) || exit 1; \
> > done
> > make: Fatal error: Command failed for target `R'
> > ==============================================
> >
> > Thanks.
> >
> > Regards,
> >
> > Daniel
> >
> >
> >
> > __________________________________
> > Meet your soulmate!
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> >
> 
> -- 
> Brian D. Ripley,                 
> ripley at stats.ox.ac.uk
> Professor of Applied Statistics, 
> http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865
> 272861 (self)
> 1 South Parks Road,                     +44 1865
> 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865
> 272595
>


From iggbig at gmail.com  Wed Oct 12 12:24:54 2005
From: iggbig at gmail.com (iggbig@gmail.com)
Date: Wed, 12 Oct 2005 12:24:54 +0200 (CEST)
Subject: [Rd] GUI error. (PR#8204)
Message-ID: <20051012102454.8555A1C859@slim.kubism.ku.dk>

Full_Name: Ian G
Version: latest
OS: win xp pro sp1
Submission from: (NULL) (193.1.209.251)


step one
 start the r project any way you like
step two
 type "demo()" and press return
step three
 press then shortcut button to open file 'just under the file menu'
while then demp screen is up
the program seem not to like to open a new file when the window demo window is
active.
the error can be reproduce easly.


From Heather.Turner at warwick.ac.uk  Wed Oct 12 15:19:01 2005
From: Heather.Turner at warwick.ac.uk (Heather Turner)
Date: Wed, 12 Oct 2005 14:19:01 +0100
Subject: [Rd] Using matprod from array.c
Message-ID: <s34d1b5f.066@liberator.csv.warwick.ac.uk>

Hi,

I was wondering if I could use the matprod function from array.c in my own C routine.  I tried the following as a test

/* my_matprod.c */

# include <Rinternals.h> /* for REAL, SEXP etc */
# include <R_ext/Applic.h> /* array.c says need for dgemm */

/* following copied from array.c */
static void matprod(double *x, int nrx, int ncx,
		    double *y, int nry, int ncy, double *z)
{
    char *transa = "N", *transb = "N";
    int i,  j, k;
    double one = 1.0, zero = 0.0, sum;
    Rboolean have_na = FALSE;

    if (nrx > 0 && ncx > 0 && nry > 0 && ncy > 0) {
	/* Don't trust the BLAS to handle NA/NaNs correctly: PR#4582
	 * The test is only O(n) here
	 */
	for (i = 0; i < nrx*ncx; i++)
	    if (ISNAN(x[i])) {have_na = TRUE; break;}
	if (!have_na)
	    for (i = 0; i < nry*ncy; i++)
		if (ISNAN(y[i])) {have_na = TRUE; break;}
	if (have_na) {
	    for (i = 0; i < nrx; i++)
		for (k = 0; k < ncy; k++) {
		    sum = 0.0;
		    for (j = 0; j < ncx; j++)
			sum += x[i + j * nrx] * y[j + k * nry];
		    z[i + k * nrx] = sum;
		}
	} else
	    F77_CALL(dgemm)(transa, transb, &nrx, &ncy, &ncx, &one,
			    x, &nrx, y, &nry, &zero, z, &nrx);
    } else /* zero-extent operations should return zeroes */
	for(i = 0; i < nrx*ncy; i++) z[i] = 0;
}

/* test function: matrix multiplication of nr by nc matrix with nc-vector */
SEXP my_matprod(SEXP M, SEXP v, SEXP nr, SEXP nc) {
  R_len_t  nrm = INTEGER(nr)[0], ncm = INTEGER(nc)[0];
  SEXP ans;

  PROTECT(ans = allocMatrix(REALSXP, nrm, 1));
  matprod(REAL(M), nrm, ncm,
	  REAL(v), ncm, 1, REAL(ans));
  UNPROTECT(1);
  return(ans);
}

When I try to make the DLL I get the following
D:\C_routines>RCMD SHLIB my_matprod.c
making my_matprod.d from my_matprod.c
gcc   -IC:/R/tex/R-2.2.0/include -Wall -O2   -c my_matprod.c -o my_matprod.o
ar cr my_matprod.a my_matprod.o
ranlib my_matprod.a
gcc  --shared -s  -o my_matprod.dll my_matprod.def my_matprod.a  -LC:/R/tex/R-2.
2.0/src/gnuwin32   -lg2c -lR
my_matprod.a(my_matprod.o)(.text+0x19a):my_matprod.c: undefined reference to `dg
emm_'
collect2: ld returned 1 exit status
make: *** [my_matprod.dll] Error 1

I'm using Windows XP and I'm using the MinGW gcc. It works fine if I comment out the Fortran call so that the method for have_na is always used. 

Do I need to include another header file to use dgemm? Is there a better way to use matprod than just to copy the code?

Any help appreciated,

Heather


Dr H Turner
Research Assistant
Dept. of Statistics
The University of Warwick
Coventry
CV4 7AL

Tel: 024 76575870
Url: www.warwick.ac.uk/go/heatherturner


From ripley at stats.ox.ac.uk  Wed Oct 12 15:56:24 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 12 Oct 2005 14:56:24 +0100 (BST)
Subject: [Rd] Using matprod from array.c
In-Reply-To: <s34d1b5f.066@liberator.csv.warwick.ac.uk>
References: <s34d1b5f.066@liberator.csv.warwick.ac.uk>
Message-ID: <Pine.LNX.4.61.0510121453040.10262@gannet.stats>

You need to link against -lRblas as well, since that is where the BLAS 
library entry points are.

See `Writing R Extensions' for a platform-independent way to do this via 
variables in Makevars (you need ${BLAS_LIBS) $(FLIBS)).

On Wed, 12 Oct 2005, Heather Turner wrote:

> Hi,
>
> I was wondering if I could use the matprod function from array.c in my own C routine.  I tried the following as a test
>
> /* my_matprod.c */
>
> # include <Rinternals.h> /* for REAL, SEXP etc */
> # include <R_ext/Applic.h> /* array.c says need for dgemm */
>
> /* following copied from array.c */
> static void matprod(double *x, int nrx, int ncx,
> 		    double *y, int nry, int ncy, double *z)
> {
>    char *transa = "N", *transb = "N";
>    int i,  j, k;
>    double one = 1.0, zero = 0.0, sum;
>    Rboolean have_na = FALSE;
>
>    if (nrx > 0 && ncx > 0 && nry > 0 && ncy > 0) {
> 	/* Don't trust the BLAS to handle NA/NaNs correctly: PR#4582
> 	 * The test is only O(n) here
> 	 */
> 	for (i = 0; i < nrx*ncx; i++)
> 	    if (ISNAN(x[i])) {have_na = TRUE; break;}
> 	if (!have_na)
> 	    for (i = 0; i < nry*ncy; i++)
> 		if (ISNAN(y[i])) {have_na = TRUE; break;}
> 	if (have_na) {
> 	    for (i = 0; i < nrx; i++)
> 		for (k = 0; k < ncy; k++) {
> 		    sum = 0.0;
> 		    for (j = 0; j < ncx; j++)
> 			sum += x[i + j * nrx] * y[j + k * nry];
> 		    z[i + k * nrx] = sum;
> 		}
> 	} else
> 	    F77_CALL(dgemm)(transa, transb, &nrx, &ncy, &ncx, &one,
> 			    x, &nrx, y, &nry, &zero, z, &nrx);
>    } else /* zero-extent operations should return zeroes */
> 	for(i = 0; i < nrx*ncy; i++) z[i] = 0;
> }
>
> /* test function: matrix multiplication of nr by nc matrix with nc-vector */
> SEXP my_matprod(SEXP M, SEXP v, SEXP nr, SEXP nc) {
>  R_len_t  nrm = INTEGER(nr)[0], ncm = INTEGER(nc)[0];
>  SEXP ans;
>
>  PROTECT(ans = allocMatrix(REALSXP, nrm, 1));
>  matprod(REAL(M), nrm, ncm,
> 	  REAL(v), ncm, 1, REAL(ans));
>  UNPROTECT(1);
>  return(ans);
> }
>
> When I try to make the DLL I get the following
> D:\C_routines>RCMD SHLIB my_matprod.c
> making my_matprod.d from my_matprod.c
> gcc   -IC:/R/tex/R-2.2.0/include -Wall -O2   -c my_matprod.c -o my_matprod.o
> ar cr my_matprod.a my_matprod.o
> ranlib my_matprod.a
> gcc  --shared -s  -o my_matprod.dll my_matprod.def my_matprod.a  -LC:/R/tex/R-2.
> 2.0/src/gnuwin32   -lg2c -lR
> my_matprod.a(my_matprod.o)(.text+0x19a):my_matprod.c: undefined reference to `dg
> emm_'
> collect2: ld returned 1 exit status
> make: *** [my_matprod.dll] Error 1
>
> I'm using Windows XP and I'm using the MinGW gcc. It works fine if I comment out the Fortran call so that the method for have_na is always used.
>
> Do I need to include another header file to use dgemm? Is there a better way to use matprod than just to copy the code?
>
> Any help appreciated,
>
> Heather
>
>
> Dr H Turner
> Research Assistant
> Dept. of Statistics
> The University of Warwick
> Coventry
> CV4 7AL
>
> Tel: 024 76575870
> Url: www.warwick.ac.uk/go/heatherturner
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From admin at biostatistic.de  Wed Oct 12 16:04:24 2005
From: admin at biostatistic.de (Knut Krueger)
Date: Wed, 12 Oct 2005 16:04:24 +0200
Subject: [Rd] SPSS I/O dll  was:  8 char labels in read.spss
In-Reply-To: <Pine.LNX.4.63a.0510111605400.3867@homer21.u.washington.edu>
References: <434B89CB.70209@biostatistic.de>	<Pine.LNX.4.63a.0510110734250.27917@homer24.u.washington.edu>	<434C195D.3040909@biostatistic.de>
	<Pine.LNX.4.63a.0510111605400.3867@homer21.u.washington.edu>
Message-ID: <434D17E8.1000307@biostatistic.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051012/44894b6a/attachment.pl

From tlumley at u.washington.edu  Wed Oct 12 16:31:56 2005
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Wed, 12 Oct 2005 07:31:56 -0700 (PDT)
Subject: [Rd] SPSS I/O dll  was:  8 char labels in read.spss
In-Reply-To: <434D17E8.1000307@biostatistic.de>
References: <434B89CB.70209@biostatistic.de>
	<Pine.LNX.4.63a.0510110734250.27917@homer24.u.washington.edu>
	<434C195D.3040909@biostatistic.de>
	<Pine.LNX.4.63a.0510111605400.3867@homer21.u.washington.edu>
	<434D17E8.1000307@biostatistic.de>
Message-ID: <Pine.LNX.4.63a.0510120727230.22756@homer22.u.washington.edu>

On Wed, 12 Oct 2005, Knut Krueger wrote:
> Thomas Lumley schrieb:
>> On Tue, 11 Oct 2005, Knut Krueger wrote:
>>> I found a definition of the SPSS files.
>>> http://www.wotsit.org/download.asp?f=spssdata
>>> but they recommend to use the spss input/output dll to ensure upward
>>> compatbility
>>>
>> "Well, they would say that, wouldn't they" (Rice-Davis 1963)
>>
>> Unfortunately, that document is an old file format. It doesn't describe
>> record 7 subtype 13, which is where the long variable names live.
>>
> What about using the SPSS input dll for those R users which would like to use their old SPSS files. Most universities here have SPSS licences and therefor the dll is available.
> I did not found yet any copyright notice on the developer part of the SPSS CD. Maybe the DLL is usable with the own program without the SPSS Licence. I will look for that if using the I/O dll is possible with R.
> All necessary C codes are delivered with the developer kit on the SPSS CD.
>

Yes, but it can't be incorporated in the  "foreign" package, which has a 
GPL license, and in any case wouldn't work off Windows.  It's not clear 
that it would be much easier than using the PSPP code in any case.

 	-thomas


From admin at biostatistic.de  Wed Oct 12 18:17:49 2005
From: admin at biostatistic.de (Knut Krueger)
Date: Wed, 12 Oct 2005 18:17:49 +0200
Subject: [Rd] SPSS I/O dll  was:  8 char labels in read.spss
In-Reply-To: <Pine.LNX.4.63a.0510120727230.22756@homer22.u.washington.edu>
References: <434B89CB.70209@biostatistic.de>	<Pine.LNX.4.63a.0510110734250.27917@homer24.u.washington.edu>	<434C195D.3040909@biostatistic.de>	<Pine.LNX.4.63a.0510111605400.3867@homer21.u.washington.edu>	<434D17E8.1000307@biostatistic.de>
	<Pine.LNX.4.63a.0510120727230.22756@homer22.u.washington.edu>
Message-ID: <434D372D.6080004@biostatistic.de>



Thomas Lumley schrieb:

>Yes, but it can't be incorporated in the  "foreign" package, which has a 
>GPL license, and in any case wouldn't work off Windows.  It's not clear 
>that it would be much easier than using the PSPP code in any case.
>
>  
>
Seems that it is easier to save as Excel files and using read.xls and if 
active pearl is not available open Excel and save as .csv file ...

or using 8 character variable identifier

Knut


From dsamperi at DecisionSynergy.com  Wed Oct 12 19:53:32 2005
From: dsamperi at DecisionSynergy.com (Dominick Samperi)
Date: Wed, 12 Oct 2005 13:53:32 -0400
Subject: [Rd] rgl package demo causes R memory corruption under Windows
Message-ID: <434D4D9C.9070506@DecisionSynergy.com>

Hello,

Running the rgl demo package (demo(rgl)) causes memory corruption when 
used with
R 2.2.0 under Windows. I tested on two Windows systems: Windows 2000 and 
Windows XP.

When you terminate R after running the demo you get a message about the 
application
trying to reference invalid memory. If you try to run another 
application in R after running
the rgl demo it typically fails.

Dominick


From tibshirani at gmail.com  Wed Oct 12 21:16:06 2005
From: tibshirani at gmail.com (Tib)
Date: Wed, 12 Oct 2005 15:16:06 -0400
Subject: [Rd] recommendation for web interface to R
Message-ID: <58618a620510121216r82b9334t6050e7ba80592a15@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051012/aef9da11/attachment.pl

From lai at lindaspaces.com  Wed Oct 12 22:34:24 2005
From: lai at lindaspaces.com (Jennifer Lai)
Date: Wed, 12 Oct 2005 16:34:24 -0400
Subject: [Rd] additional comments on building R with PGI compiler
Message-ID: <434D7350.3040505@lindaspaces.com>

Hi,
   I have additional comments on building R with PGI compiler.
If one wants to use external BLAS library, then pgf90 instead of pgf77 
should be used, and BLAS_LIBS flags should be set.

e.g.
F77 = $PG_HOME/bin/pgf90
BLAS_LIBS='-L/opt/acml2.7.0/pgi64/ -lacml'      # for ACML library
BLAS_LIBS='-L/usr/lib64 -lg2c -lblas'                 # for generic BLAS 
library that comes with OS distribution.

Regards,
Jennifer


From murdoch at stats.uwo.ca  Thu Oct 13 02:30:27 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed, 12 Oct 2005 20:30:27 -0400
Subject: [Rd] GUI error. (PR#8204)
In-Reply-To: <20051012102454.8555A1C859@slim.kubism.ku.dk>
References: <20051012102454.8555A1C859@slim.kubism.ku.dk>
Message-ID: <434DAAA3.3020508@stats.uwo.ca>

iggbig at gmail.com wrote:
> Full_Name: Ian G
> Version: latest

Please tell us which version.  There are at least three versions which 
might be called "latest", and by tomorrow two of them may well be different.

> OS: win xp pro sp1
> Submission from: (NULL) (193.1.209.251)
> 
> 
> step one
>  start the r project any way you like
> step two
>  type "demo()" and press return
> step three
>  press then shortcut button to open file 'just under the file menu'
> while then demp screen is up
> the program seem not to like to open a new file when the window demo window is
> active.
> the error can be reproduce easly.

Not reproducible for me in 2.2.0.  Things worked just as I'd expect.

Duncan Murdoch


From murdoch at stats.uwo.ca  Thu Oct 13 02:32:36 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed, 12 Oct 2005 20:32:36 -0400
Subject: [Rd] SPSS I/O dll  was:  8 char labels in read.spss
In-Reply-To: <434D17E8.1000307@biostatistic.de>
References: <434B89CB.70209@biostatistic.de>	<Pine.LNX.4.63a.0510110734250.27917@homer24.u.washington.edu>	<434C195D.3040909@biostatistic.de>	<Pine.LNX.4.63a.0510111605400.3867@homer21.u.washington.edu>
	<434D17E8.1000307@biostatistic.de>
Message-ID: <434DAB24.7000106@stats.uwo.ca>

Knut Krueger wrote:
> 
> Thomas Lumley schrieb:
> 
> 
>>On Tue, 11 Oct 2005, Knut Krueger wrote:
>> 
>>
>>
>>>I found a definition of the SPSS files.
>>>http://www.wotsit.org/download.asp?f=spssdata
>>>but they recommend to use the spss input/output dll to ensure upward
>>>compatbility
>>>
>>>   
>>>
>>
>>"Well, they would say that, wouldn't they" (Rice-Davis 1963)
>>
>>Unfortunately, that document is an old file format. It doesn't describe 
>>record 7 subtype 13, which is where the long variable names live.
>>
> 
> What about using the SPSS input dll for those R users which would like to use their old SPSS files. 

If you have that file, then presumably you have SPSS, and can ask it to 
output a documented file format.

Duncan Murdoch


From ripley at stats.ox.ac.uk  Thu Oct 13 09:18:45 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 13 Oct 2005 09:18:45 +0200 (CEST)
Subject: [Rd] GUI error. (PR#8204)
Message-ID: <20051013071845.3AEF01C79C@slim.kubism.ku.dk>

I was also unable to reproduce this in either 2.2.0 or current (from svn) 
R-devel.

On Wed, 12 Oct 2005, Duncan Murdoch wrote:

> iggbig at gmail.com wrote:
>> Full_Name: Ian G

I've never encountered anyone with full surname `G' ....

>> Version: latest
>
> Please tell us which version.  There are at least three versions which
> might be called "latest", and by tomorrow two of them may well be different.
>
>> OS: win xp pro sp1
>> Submission from: (NULL) (193.1.209.251)
>>
>>
>> step one
>>  start the r project any way you like
>> step two
>>  type "demo()" and press return
>> step three
>>  press then shortcut button to open file 'just under the file menu'
>> while then demp screen is up
>> the program seem not to like to open a new file when the window demo window is
>> active.
>> the error can be reproduce easly.
>
> Not reproducible for me in 2.2.0.  Things worked just as I'd expect.
>
> Duncan Murdoch
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ligges at statistik.uni-dortmund.de  Thu Oct 13 09:41:18 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 13 Oct 2005 09:41:18 +0200
Subject: [Rd] rgl package demo causes R memory corruption under Windows
In-Reply-To: <434D4D9C.9070506@DecisionSynergy.com>
References: <434D4D9C.9070506@DecisionSynergy.com>
Message-ID: <434E0F9E.9070004@statistik.uni-dortmund.de>

Dominick Samperi wrote:

> Hello,
> 
> Running the rgl demo package (demo(rgl)) causes memory corruption when 
> used with
> R 2.2.0 under Windows. I tested on two Windows systems: Windows 2000 and 
> Windows XP.
> 
> When you terminate R after running the demo you get a message about the 
> application
> trying to reference invalid memory. If you try to run another 
> application in R after running
> the rgl demo it typically fails.
> 
> Dominick
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


Dominick,

this report is package related. Please contact the package maintainer 
who might be willing to help to debug on your machine.
I cannot reproduce this neither on Windows NT4 SP6 nor on Windows Server 
2003 SP1.

Uwe


From ripley at stats.ox.ac.uk  Thu Oct 13 10:11:44 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Oct 2005 09:11:44 +0100 (BST)
Subject: [Rd] rgl package demo causes R memory corruption under Windows
In-Reply-To: <434E0F9E.9070004@statistik.uni-dortmund.de>
References: <434D4D9C.9070506@DecisionSynergy.com>
	<434E0F9E.9070004@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.61.0510130909060.2947@gannet.stats>

It does not fail for me either (on Windows XP).

I suspect it is hardware-related, that is that the GL support of the 
video driver may be implicated.

I see no evidence of `R memory corruption' as distinct from `memory 
corruption to the R process'.

On Thu, 13 Oct 2005, Uwe Ligges wrote:

> Dominick Samperi wrote:
>
>> Hello,
>>
>> Running the rgl demo package (demo(rgl)) causes memory corruption when
>> used with
>> R 2.2.0 under Windows. I tested on two Windows systems: Windows 2000 and
>> Windows XP.
>>
>> When you terminate R after running the demo you get a message about the
>> application
>> trying to reference invalid memory. If you try to run another
>> application in R after running
>> the rgl demo it typically fails.
>>
>> Dominick
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>
> Dominick,
>
> this report is package related. Please contact the package maintainer
> who might be willing to help to debug on your machine.
> I cannot reproduce this neither on Windows NT4 SP6 nor on Windows Server
> 2003 SP1.
>
> Uwe
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hin-tak.leung at cimr.cam.ac.uk  Thu Oct 13 12:08:27 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Thu, 13 Oct 2005 11:08:27 +0100
Subject: [Rd] R, Wine, and multi-threadedness.
Message-ID: <434E321B.3040603@cimr.cam.ac.uk>

Hi,

I managed to install Win32 R 2.2.0 with the CRAN Innosetup
installer under Wine on x86 linux a few days ago. However, on trying
to run it, MSVCP60.DLL is missing. So here is a sort of a bug
report, and a couple of questions:

(1) I think the R binary in the CRAN Innosetup installer was built with
mingw. The R-windows FAQ did mention that this DLL is required *for 
Chinese/Japanese/Korean* (which I wasn't trying to do). In this 
circumstance, it isn't particularly legal to copy the dll from
elsewhere. So I would suggest enhancing R-windows FAQ and even the main
R FAQ for this... also, is it possible *not* to have this dependency,
or have it runtime-determined (i.e. try to load the dll dynamically,
and fall back to US/ascii only when unsuccessful)?

(2) The interesting question: As I understand it (could be wrong),
R Win32 is (partly) multi-threaded, and the native linux R is not.
Is is possible to have better performance or CPU utilisation
on multi-CPU systems running Win32 R under Wine rather than natively?
At least on certain specific application areas?

Regards,
Hin-Tak Leung


From hin-tak.leung at cimr.cam.ac.uk  Thu Oct 13 13:19:17 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Thu, 13 Oct 2005 12:19:17 +0100
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <434E3D5C.3010105@stats.uwo.ca>
References: <434E321B.3040603@cimr.cam.ac.uk> <434E3D5C.3010105@stats.uwo.ca>
Message-ID: <434E42B5.6090005@cimr.cam.ac.uk>

Duncan Murdoch wrote:
<snipped>
> It's possible you have the wrong R.dll installed, because I don't see 
> any dependency on that file in the no-mbcs version of Rgui.exe or R.dll.
> Do you have pedump?  Can you see imports from MSVCP60.DLL in your copy 
> of R.dll?

I don't currently have pedump, but I have used it before and I can get 
it. I'll have a look around the R-shipped dll's and will report
back. During the installation, I just picked "English".
Apparently the extra DLL dependency is just for wide-char support?

Is the English version sensitive to Locale? My LANG is set to 
"en_GB.UTF-8" as is most recent Redhat linux systems, and Wine probably
does strange things with it. (and I have some CJK fonts installed).

<snipped>
>> (2) The interesting question: As I understand it (could be wrong),
>> R Win32 is (partly) multi-threaded, and the native linux R is not.
>> Is is possible to have better performance or CPU utilisation
>> on multi-CPU systems running Win32 R under Wine rather than natively?
>> At least on certain specific application areas?
> 
> 
> I doubt it, but you'll have to try.  R uses two threads on Windows so 
> that it can respond to Windows messages (repainting, etc.).  It won't 
> really offload any substantial amount of computation to a second CPU.

Wine on linux most of the time consists of at least two processes,
with a "wine server" process doing screen drawings, etc.

Hin-Tak Leung


From ripley at stats.ox.ac.uk  Thu Oct 13 13:28:21 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Oct 2005 12:28:21 +0100 (BST)
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <434E321B.3040603@cimr.cam.ac.uk>
References: <434E321B.3040603@cimr.cam.ac.uk>
Message-ID: <Pine.LNX.4.61.0510131158100.4655@gannet.stats>

On Thu, 13 Oct 2005, Hin-Tak Leung wrote:

> I managed to install Win32 R 2.2.0 with the CRAN Innosetup
> installer under Wine on x86 linux a few days ago. However, on trying
> to run it, MSVCP60.DLL is missing. So here is a sort of a bug
> report, and a couple of questions:

This is a sort of bug report on your report.  The rw-FAQ makes clear that 
DLL is _only_ required by R if you select East Asian support, and that is 
not the default.  It seems you chose a non-default option.  Please go back 
and reinstall R without East Asian support.

> (1) I think the R binary in the CRAN Innosetup installer was built with
> mingw. The R-windows FAQ did mention that this DLL is required *for
> Chinese/Japanese/Korean* (which I wasn't trying to do). In this
> circumstance, it isn't particularly legal to copy the dll from
> elsewhere. So I would suggest enhancing R-windows FAQ and even the main
> R FAQ for this...

For what?  As far as we know the rw-FAQ is accurate about all the 
dependencies.

(Note that all current and recently obselete versions of Windows do have 
it, so its absence is a problem of Wine, not for Windows users of R.)

> also, is it possible *not* to have this dependency,
> or have it runtime-determined (i.e. try to load the dll dynamically,
> and fall back to US/ascii only when unsuccessful)?

The MinGW project assumes a tolerably recent version of Windows (from 2000 
or later).

It would be tricky to have MSVCP60.dll loaded and linked on demand, but 
not impossible (and it was considered not to be a worthwile use of the 
core group's time).  We look forwards to your contributing code to do so 
if you think it is worthwhile.

> (2) The interesting question: As I understand it (could be wrong),
> R Win32 is (partly) multi-threaded, and the native linux R is not.
> Is is possible to have better performance or CPU utilisation
> on multi-CPU systems running Win32 R under Wine rather than natively?
> At least on certain specific application areas?

Rterm.exe is multithreaded, but the second thread is only used for input. 
RGui.exe is singlethreaded.  As R for Windows uses a DLL it is about the 
same speed (running Windows natively on the same hardware) as R under ix86 
Linux using a shared library, and that is appreciably slower than R under 
ix86 Linux without (see the R-admin manual).  R under Linux can make use 
of a multithreaded BLAS, but I know of none available for Windows.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hin-tak.leung at cimr.cam.ac.uk  Thu Oct 13 14:17:51 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Thu, 13 Oct 2005 13:17:51 +0100
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <Pine.LNX.4.61.0510131158100.4655@gannet.stats>
References: <434E321B.3040603@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131158100.4655@gannet.stats>
Message-ID: <434E506F.3080504@cimr.cam.ac.uk>

Prof Brian Ripley wrote:
> On Thu, 13 Oct 2005, Hin-Tak Leung wrote:
> 
>> I managed to install Win32 R 2.2.0 with the CRAN Innosetup
>> installer under Wine on x86 linux a few days ago. However, on trying
>> to run it, MSVCP60.DLL is missing. So here is a sort of a bug
>> report, and a couple of questions:
> 
> 
> This is a sort of bug report on your report.  The rw-FAQ makes clear 
> that DLL is _only_ required by R if you select East Asian support, and 
> that is not the default.  It seems you chose a non-default option.  
> Please go back and reinstall R without East Asian support.

Sorry - indeed you are right. In my last attempt, I (blindly) selected
every optional packages, and that includes East Asian support.

R does work under wine if that option is not selected.

However, that option is mixed in with other harmless options which 
obviously have no extra requirements (pdf docs, source files, etc) and 
dependencies, and that's somewhat misleading. I would suggest putting it
on a separate screen (and an warning?) in the installer?

I don't think I was particularly careless wanting to install every 
optional part - even without understanding the full implication of
doing so.

>> (1) I think the R binary in the CRAN Innosetup installer was built with
>> mingw. The R-windows FAQ did mention that this DLL is required *for
>> Chinese/Japanese/Korean* (which I wasn't trying to do). In this
>> circumstance, it isn't particularly legal to copy the dll from
>> elsewhere. So I would suggest enhancing R-windows FAQ and even the main
>> R FAQ for this...
> 
> 
> For what?  As far as we know the rw-FAQ is accurate about all the 
> dependencies.

This information can go into the main FAQ (under linux/wine).
Part of the interests (besides the "multi-threadedness") is the GUI
alternatives, which is a bit lacking on the unix front.

> (Note that all current and recently obselete versions of Windows do have 
> it, so its absence is a problem of Wine, not for Windows users of R.)

I did a search on Google, and this DLL is apparently not on win98
as shipped.

>> also, is it possible *not* to have this dependency,
>> or have it runtime-determined (i.e. try to load the dll dynamically,
>> and fall back to US/ascii only when unsuccessful)?
> 
> 
> The MinGW project assumes a tolerably recent version of Windows (from 
> 2000 or later).

That's quite incorrect. Mingw makes little assumption in that regard.
The dependency on that DLL among Mingw people seems to be
quite well-known, but somewhat restricted to wide-char support.

> It would be tricky to have MSVCP60.dll loaded and linked on demand, but 
> not impossible (and it was considered not to be a worthwile use of the 
> core group's time).  We look forwards to your contributing code to do so 
> if you think it is worthwhile.

The circumstance is somewhat more arguable in the other possibility of 
building a win32 executable, via a cross-compiler. There are also
less proprietary alternatives, such as libiconv?

>> (2) The interesting question: As I understand it (could be wrong),
>> R Win32 is (partly) multi-threaded, and the native linux R is not.
>> Is is possible to have better performance or CPU utilisation
>> on multi-CPU systems running Win32 R under Wine rather than natively?
>> At least on certain specific application areas?
> 
> 
> Rterm.exe is multithreaded, but the second thread is only used for 
> input. RGui.exe is singlethreaded.  As R for Windows uses a DLL it is 
> about the same speed (running Windows natively on the same hardware) as 
> R under ix86 Linux using a shared library, and that is appreciably 
> slower than R under ix86 Linux without (see the R-admin manual).  R 
> under Linux can make use of a multithreaded BLAS, but I know of none 
> available for Windows.

Is the Intel MKL not available form Windows? Somewhat surprising...

Hin-Tak Leung


From lai at lindaspaces.com  Thu Oct 13 14:36:10 2005
From: lai at lindaspaces.com (Jennifer Lai)
Date: Thu, 13 Oct 2005 08:36:10 -0400
Subject: [Rd] Building R on Windows
Message-ID: <434E54BA.6050702@lindaspaces.com>

Hi,
  I"m a newbie on building R on Windows. I followed the instructions 
cited here,
http://www.murdoch-sutherland.com/Rtools/ to build R-2.2.0.
Everything works fine up till when package base needs to be compiled.  
here is the error message,

---------- Making package base ------------
 adding build stamp to DESCRIPTION
Error in library.dynam(lib, package, package.lib) :
       shared library 'tools' not found
Execution halted
make[4]: *** [frontmatter] Error 1
make[3]: *** [all] Error 2
make[2]: *** [pkg-base] Error 2
make[1]: *** [rpackage] Error 2
make: *** [all] Error 2

Has anyone seen this error message before? Where can I find shared 
library tools?

Thanks,
Jennifer


From u9370004 at cc.kmu.edu.tw  Thu Oct 13 14:41:57 2005
From: u9370004 at cc.kmu.edu.tw (Chun-Ying Lee)
Date: Thu, 13 Oct 2005 20:41:57 +0800
Subject: [Rd] how to compiler the package bundles
Message-ID: <20051013123921.M77520@cc.kmu.edu.tw>

Dear R user:
    I would like to combine two packages together in one package,
So how do I compiler these two package simultaneously?
Would someone give me some suggestion?
Thanks in advance!!


From ripley at stats.ox.ac.uk  Thu Oct 13 14:44:58 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Oct 2005 13:44:58 +0100 (BST)
Subject: [Rd] Building R on Windows
In-Reply-To: <434E54BA.6050702@lindaspaces.com>
Message-ID: <Pine.GSO.4.31.0510131344130.15462-100000@toucan.stats>

On Thu, 13 Oct 2005, Jennifer Lai wrote:

> Hi,
>   I"m a newbie on building R on Windows. I followed the instructions
> cited here,
> http://www.murdoch-sutherland.com/Rtools/ to build R-2.2.0.
> Everything works fine up till when package base needs to be compiled.
> here is the error message,
>
> ---------- Making package base ------------
>  adding build stamp to DESCRIPTION
> Error in library.dynam(lib, package, package.lib) :
>        shared library 'tools' not found
> Execution halted
> make[4]: *** [frontmatter] Error 1
> make[3]: *** [all] Error 2
> make[2]: *** [pkg-base] Error 2
> make[1]: *** [rpackage] Error 2
> make: *** [all] Error 2
>
> Has anyone seen this error message before? Where can I find shared
> library tools?

It was built at the bootstrapping phase, or should have been.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From david.p.dean at pfizer.com  Thu Oct 13 15:47:57 2005
From: david.p.dean at pfizer.com (Dean, David P)
Date: Thu, 13 Oct 2005 09:47:57 -0400
Subject: [Rd] Installing R-2.2.0 package
Message-ID: <599089EF29304C44AF1D84B1C223AC63032EF461@groamrexm03.amer.pfizer.com>

Dear list,

I've just installed R-2.2.0 under Solaris and have a question about
installing packages. If a package fails to install for any reason and I go
to install another package, I get this message:

$ R-2.2.0-64bit --vanilla CMD INSTALL ~/srca/cran/RSQLite_0.4-0.tar.gz 
ERROR: failed to lock directory
'/app/openpkg/lib/R-2.2.0-64bit/lib/R/library' for modifying
Try removing '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library/00LOCK'

I can remove the lock directory by hand, and then the next package installs,
but this makes it quite difficult to download and install a batch of
packages from CRAN or Biocondctor! Is this lock directory a new feature with
R-2.2.0? Is there a work around in the R build itself or the installation
scripts?

Much thanks!!!
--------------------- 
David P Dean
Research Informatics
PGRD Groton Labs
(860)-441-5053
david.p.dean at pfizer.com
----------------------------------------------------------------------
LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}


From hin-tak.leung at cimr.cam.ac.uk  Thu Oct 13 16:07:29 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Thu, 13 Oct 2005 15:07:29 +0100
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <434E506F.3080504@cimr.cam.ac.uk>
References: <434E321B.3040603@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131158100.4655@gannet.stats>
	<434E506F.3080504@cimr.cam.ac.uk>
Message-ID: <434E6A21.1010800@cimr.cam.ac.uk>

Hin-Tak Leung wrote:
> Prof Brian Ripley wrote:
> 
>> On Thu, 13 Oct 2005, Hin-Tak Leung wrote:
<snipped>
>>> (2) The interesting question: As I understand it (could be wrong),
>>> R Win32 is (partly) multi-threaded, and the native linux R is not.
>>> Is is possible to have better performance or CPU utilisation
>>> on multi-CPU systems running Win32 R under Wine rather than natively?
>>> At least on certain specific application areas?
>>
>>
>>
>> Rterm.exe is multithreaded, but the second thread is only used for 
>> input. RGui.exe is singlethreaded.  As R for Windows uses a DLL it is 
>> about the same speed (running Windows natively on the same hardware) 
>> as R under ix86 Linux using a shared library, and that is appreciably 
>> slower than R under ix86 Linux without (see the R-admin manual).  R 
>> under Linux can make use of a multithreaded BLAS, but I know of none 
>> available for Windows.
> 
> 
> Is the Intel MKL not available form Windows? Somewhat surprising...

Sorry to reply to my own post.

Actually, FAQ 8.2 for r-on-windows and the netlib FAQ:
http://cran.r-project.org/bin/windows/base/rw-FAQ.html#Can-I-use-a-fast-BLAS_003f
http://www.netlib.org/blas/faq.html#9

seems to suggest otherwise - from what it says, (1) the BLAS dll can be 
conveniently replaced without recompiling, (2) most vendor BLAS 
implementations are multi-threaded. In fact the Atlas implementation
is explicitly named in both places.

Now, the interesting questions are: (1) is Atlas multi-threaded on 
*every* platform, or more specifically, on Windows?, (2) Can wine
use the atlas dll under x86 linux?

Hin-Tak Leung


From ripley at stats.ox.ac.uk  Thu Oct 13 16:53:38 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Oct 2005 15:53:38 +0100 (BST)
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <434E6A21.1010800@cimr.cam.ac.uk>
References: <434E321B.3040603@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131158100.4655@gannet.stats>
	<434E506F.3080504@cimr.cam.ac.uk> <434E6A21.1010800@cimr.cam.ac.uk>
Message-ID: <Pine.LNX.4.61.0510131546150.5818@gannet.stats>

On Thu, 13 Oct 2005, Hin-Tak Leung wrote:

> Hin-Tak Leung wrote:
>> Prof Brian Ripley wrote:
>> 
>>> On Thu, 13 Oct 2005, Hin-Tak Leung wrote:
> <snipped>
>>>> (2) The interesting question: As I understand it (could be wrong),
>>>> R Win32 is (partly) multi-threaded, and the native linux R is not.
>>>> Is is possible to have better performance or CPU utilisation
>>>> on multi-CPU systems running Win32 R under Wine rather than natively?
>>>> At least on certain specific application areas?
>>> 
>>> 
>>> 
>>> Rterm.exe is multithreaded, but the second thread is only used for input. 
>>> RGui.exe is singlethreaded.  As R for Windows uses a DLL it is about the 
>>> same speed (running Windows natively on the same hardware) as R under ix86 
>>> Linux using a shared library, and that is appreciably slower than R under 
>>> ix86 Linux without (see the R-admin manual).  R under Linux can make use 
>>> of a multithreaded BLAS, but I know of none available for Windows.
>> 
>> 
>> Is the Intel MKL not available form Windows? Somewhat surprising...

It is not as much available as msvcp60.dll, which you were complaining 
about.  It has strict licence conditions, as well as compiler conditions 
(and MinGW does not use the same calling conventions as the compilers 
which are supported).  It is certainly not straightforward how to use it 
with MinGW, and I rather doubt if it would work properly (the Goto BLAS 
only works partially).

> Sorry to reply to my own post.
>
> Actually, FAQ 8.2 for r-on-windows and the netlib FAQ:
> http://cran.r-project.org/bin/windows/base/rw-FAQ.html#Can-I-use-a-fast-BLAS_003f
> http://www.netlib.org/blas/faq.html#9
>
> seems to suggest otherwise - from what it says, (1) the BLAS dll can be 
> conveniently replaced without recompiling, (2) most vendor BLAS 
> implementations are multi-threaded. In fact the Atlas implementation
> is explicitly named in both places.
>
> Now, the interesting questions are: (1) is Atlas multi-threaded on *every* 
> platform, or more specifically, on Windows?,

By default it is not multi-threaded on any platform, and we have not 
succeeded in compiling a multi-threaded version on Windows except by using 
Cygwin extensions (i.e. not actually on Windows).

> (2) Can wine use the atlas dll under x86 linux?

`the atlas dll' being?  The ATLAS-based Rblas.dlls on CRAN are not 
multithreaded.  Who knows what wine can do?

Please be more reasonable in your support requests.  Yours is a rather 
unusual use, and we don't have time to support it.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ligges at statistik.uni-dortmund.de  Thu Oct 13 17:12:21 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 13 Oct 2005 17:12:21 +0200
Subject: [Rd] Installing R-2.2.0 package
In-Reply-To: <599089EF29304C44AF1D84B1C223AC63032EF461@groamrexm03.amer.pfizer.com>
References: <599089EF29304C44AF1D84B1C223AC63032EF461@groamrexm03.amer.pfizer.com>
Message-ID: <434E7955.4090108@statistik.uni-dortmund.de>

Dean, David P wrote:

> Dear list,
> 
> I've just installed R-2.2.0 under Solaris and have a question about
> installing packages. If a package fails to install for any reason and I go
> to install another package, I get this message:
> 
> $ R-2.2.0-64bit --vanilla CMD INSTALL ~/srca/cran/RSQLite_0.4-0.tar.gz 
> ERROR: failed to lock directory
> '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library' for modifying
> Try removing '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library/00LOCK'
> 
> I can remove the lock directory by hand, and then the next package installs,
> but this makes it quite difficult to download and install a batch of
> packages from CRAN or Biocondctor! Is this lock directory a new feature with
> R-2.2.0? Is there a work around in the R build itself or the installation
> scripts?

No, not a new feature in R-2.2.0, it has been there for some time now.
After a *successful* installation, the 00LOCK directory should be 
deleted by the installation tools themselves.
After an unsuccessful installation, the installation tools should 
restore the stuff in the 00LOCK directory.
Do you abort the installtion manually (this is the only way I figured 
out how not to remove 00LOCK automatically)?

Uwe Ligges



> 
> Much thanks!!!
> --------------------- 
> David P Dean
> Research Informatics
> PGRD Groton Labs
> (860)-441-5053
> david.p.dean at pfizer.com
> ----------------------------------------------------------------------
> LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From pgilbert at bank-banque-canada.ca  Thu Oct 13 17:19:07 2005
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 13 Oct 2005 11:19:07 -0400
Subject: [Rd] Installing R-2.2.0 package
In-Reply-To: <434E7955.4090108@statistik.uni-dortmund.de>
References: <599089EF29304C44AF1D84B1C223AC63032EF461@groamrexm03.amer.pfizer.com>
	<434E7955.4090108@statistik.uni-dortmund.de>
Message-ID: <434E7AEB.7030801@bank-banque-canada.ca>



Uwe Ligges wrote:

>Dean, David P wrote:
>
>  
>
>>Dear list,
>>
>>I've just installed R-2.2.0 under Solaris and have a question about
>>installing packages. If a package fails to install for any reason and I go
>>to install another package, I get this message:
>>
>>$ R-2.2.0-64bit --vanilla CMD INSTALL ~/srca/cran/RSQLite_0.4-0.tar.gz 
>>ERROR: failed to lock directory
>>'/app/openpkg/lib/R-2.2.0-64bit/lib/R/library' for modifying
>>Try removing '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library/00LOCK'
>>
>>I can remove the lock directory by hand, and then the next package installs,
>>but this makes it quite difficult to download and install a batch of
>>packages from CRAN or Biocondctor! Is this lock directory a new feature with
>>R-2.2.0? Is there a work around in the R build itself or the installation
>>scripts?
>>    
>>
>
>No, not a new feature in R-2.2.0, it has been there for some time now.
>  
>
I have the impression the feature behaves slightly differently as of 
R-2.2.0. Now the 00LOCK file is not removed in Solaris when there is an 
unsuccessful install. (In Linux I think it does get removed.)

Paul Gilbert

>After a *successful* installation, the 00LOCK directory should be 
>deleted by the installation tools themselves.
>After an unsuccessful installation, the installation tools should 
>restore the stuff in the 00LOCK directory.
>Do you abort the installtion manually (this is the only way I figured 
>out how not to remove 00LOCK automatically)?
>
>Uwe Ligges
>
>
>
>  
>
>>Much thanks!!!
>>--------------------- 
>>David P Dean
>>Research Informatics
>>PGRD Groton Labs
>>(860)-441-5053
>>david.p.dean at pfizer.com
>>----------------------------------------------------------------------
>>LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}
>>
>>______________________________________________
>>R-devel at r-project.org mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>    
>>
>
>______________________________________________
>R-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel
>  
>


From ligges at statistik.uni-dortmund.de  Thu Oct 13 17:31:28 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Thu, 13 Oct 2005 17:31:28 +0200
Subject: [Rd] Installing R-2.2.0 package
In-Reply-To: <434E7AEB.7030801@bank-banque-canada.ca>
References: <599089EF29304C44AF1D84B1C223AC63032EF461@groamrexm03.amer.pfizer.com>
	<434E7955.4090108@statistik.uni-dortmund.de>
	<434E7AEB.7030801@bank-banque-canada.ca>
Message-ID: <434E7DD0.9030208@statistik.uni-dortmund.de>

Paul Gilbert wrote:

> 
> 
> Uwe Ligges wrote:
> 
>> Dean, David P wrote:
>>
>>  
>>
>>> Dear list,
>>>
>>> I've just installed R-2.2.0 under Solaris and have a question about
>>> installing packages. If a package fails to install for any reason and 
>>> I go
>>> to install another package, I get this message:
>>>
>>> $ R-2.2.0-64bit --vanilla CMD INSTALL 
>>> ~/srca/cran/RSQLite_0.4-0.tar.gz ERROR: failed to lock directory
>>> '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library' for modifying
>>> Try removing '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library/00LOCK'
>>>
>>> I can remove the lock directory by hand, and then the next package 
>>> installs,
>>> but this makes it quite difficult to download and install a batch of
>>> packages from CRAN or Biocondctor! Is this lock directory a new 
>>> feature with
>>> R-2.2.0? Is there a work around in the R build itself or the 
>>> installation
>>> scripts?
>>>   
>>
>>
>> No, not a new feature in R-2.2.0, it has been there for some time now.
>>  
>>
> I have the impression the feature behaves slightly differently as of 
> R-2.2.0. Now the 00LOCK file is not removed in Solaris when there is an 
> unsuccessful install. (In Linux I think it does get removed.)

Yes, under both Linux and Windows it is removed.

Can anybody else check on Solaris, please? Or can David Dean debug on 
his machine?

In particular, we need exact system information, because it seems to be 
an OS/platform specific problem.

Uwe Ligges




> Paul Gilbert
> 
>> After a *successful* installation, the 00LOCK directory should be 
>> deleted by the installation tools themselves.
>> After an unsuccessful installation, the installation tools should 
>> restore the stuff in the 00LOCK directory.
>> Do you abort the installtion manually (this is the only way I figured 
>> out how not to remove 00LOCK automatically)?
>>
>> Uwe Ligges
>>
>>
>>
>>  
>>
>>> Much thanks!!!
>>> --------------------- David P Dean
>>> Research Informatics
>>> PGRD Groton Labs
>>> (860)-441-5053
>>> david.p.dean at pfizer.com
>>> ----------------------------------------------------------------------
>>> LEGAL NOTICE\ Unless expressly stated otherwise, this 
>>> messag...{{dropped}}
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>   
>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>  
>>


From ripley at stats.ox.ac.uk  Thu Oct 13 17:42:29 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Oct 2005 16:42:29 +0100 (BST)
Subject: [Rd] Installing R-2.2.0 package
In-Reply-To: <434E7DD0.9030208@statistik.uni-dortmund.de>
References: <599089EF29304C44AF1D84B1C223AC63032EF461@groamrexm03.amer.pfizer.com>
	<434E7955.4090108@statistik.uni-dortmund.de>
	<434E7AEB.7030801@bank-banque-canada.ca>
	<434E7DD0.9030208@statistik.uni-dortmund.de>
Message-ID: <Pine.LNX.4.61.0510131641160.5818@gannet.stats>

It works on Solaris 8 for me, and this is checked as part of the 
alpha/beta process.

The code is the same on Linux and Solaris, after all, so this would have 
to be a Solaris shell bug.

On Thu, 13 Oct 2005, Uwe Ligges wrote:

> Paul Gilbert wrote:
>
>>
>>
>> Uwe Ligges wrote:
>>
>>> Dean, David P wrote:
>>>
>>>
>>>
>>>> Dear list,
>>>>
>>>> I've just installed R-2.2.0 under Solaris and have a question about
>>>> installing packages. If a package fails to install for any reason and
>>>> I go
>>>> to install another package, I get this message:
>>>>
>>>> $ R-2.2.0-64bit --vanilla CMD INSTALL
>>>> ~/srca/cran/RSQLite_0.4-0.tar.gz ERROR: failed to lock directory
>>>> '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library' for modifying
>>>> Try removing '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library/00LOCK'
>>>>
>>>> I can remove the lock directory by hand, and then the next package
>>>> installs,
>>>> but this makes it quite difficult to download and install a batch of
>>>> packages from CRAN or Biocondctor! Is this lock directory a new
>>>> feature with
>>>> R-2.2.0? Is there a work around in the R build itself or the
>>>> installation
>>>> scripts?
>>>>
>>>
>>>
>>> No, not a new feature in R-2.2.0, it has been there for some time now.
>>>
>>>
>> I have the impression the feature behaves slightly differently as of
>> R-2.2.0. Now the 00LOCK file is not removed in Solaris when there is an
>> unsuccessful install. (In Linux I think it does get removed.)
>
> Yes, under both Linux and Windows it is removed.
>
> Can anybody else check on Solaris, please? Or can David Dean debug on
> his machine?
>
> In particular, we need exact system information, because it seems to be
> an OS/platform specific problem.
>
> Uwe Ligges
>
>
>
>
>> Paul Gilbert
>>
>>> After a *successful* installation, the 00LOCK directory should be
>>> deleted by the installation tools themselves.
>>> After an unsuccessful installation, the installation tools should
>>> restore the stuff in the 00LOCK directory.
>>> Do you abort the installtion manually (this is the only way I figured
>>> out how not to remove 00LOCK automatically)?
>>>
>>> Uwe Ligges
>>>
>>>
>>>
>>>
>>>
>>>> Much thanks!!!
>>>> --------------------- David P Dean
>>>> Research Informatics
>>>> PGRD Groton Labs
>>>> (860)-441-5053
>>>> david.p.dean at pfizer.com
>>>> ----------------------------------------------------------------------
>>>> LEGAL NOTICE\ Unless expressly stated otherwise, this
>>>> messag...{{dropped}}
>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>
>>>
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hin-tak.leung at cimr.cam.ac.uk  Thu Oct 13 17:45:49 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Thu, 13 Oct 2005 16:45:49 +0100
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <Pine.LNX.4.61.0510131546150.5818@gannet.stats>
References: <434E321B.3040603@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131158100.4655@gannet.stats>
	<434E506F.3080504@cimr.cam.ac.uk> <434E6A21.1010800@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131546150.5818@gannet.stats>
Message-ID: <434E812D.4040309@cimr.cam.ac.uk>

Prof Brian Ripley wrote:
<snipped>
>> Now, the interesting questions are: (1) is Atlas multi-threaded on 
>> *every* platform, or more specifically, on Windows?,
> 
> 
> By default it is not multi-threaded on any platform, and we have not 
> succeeded in compiling a multi-threaded version on Windows except by 
> using Cygwin extensions (i.e. not actually on Windows).

Thanks for the explanations. As I said, my main interests in running
R under Wine is mostly about having a GUI, but the multi-threading 
possibility is an interesting discussion; also re-compiling
the whole lot (either for win32 or linux) just for the *possibility* of 
speeding up is a bit painful, so having drop-in dll replacement
(or a shared-library replacement) for trying-out sounds rather attractive.

>> (2) Can wine use the atlas dll under x86 linux?
> 
> `the atlas dll' being?  The ATLAS-based Rblas.dlls on CRAN are not 
> multithreaded.  Who knows what wine can do?

Thanks for stating that. It wasn't clear that the Atlas-based Rblas is
not multi-threaded.

> Please be more reasonable in your support requests.  Yours is a rather 
> unusual use, and we don't have time to support it.

Thanks for the detailed explanations about threading implementations.
that's what I was after. Most of what I said is throwing ideas about, 
really.

As for the issue with msvcp60.dll, I am really sorry about it
- but since one of you had bothered enough to write an FAQ item for
it, I cannot be the first one getting bitten? It would be a good deal
more useful to separate that option from the other harmless ones in the 
Innosetup installer, and/or shouldn't be too much effort to say, put
it last instead or somehow mark it out differently or even add a note at 
the same screen instead? e.g. "**The Far East support options requires 
that you have Far East support in Windows**" (there are win32 software 
which can do CJK without OS support; e.g. some version of Acrobat
reader is known to run under Wine, and I would expect it doesn't
need extra windows bits to view CJK pdf's)...the misleading part
was that the other additional options are absolutely harmless.

Thanks a lot for the discussion. If I find any interesting R issues
under Wine, I'll report back.

Hin-Tak Leung


From david.p.dean at pfizer.com  Thu Oct 13 18:02:49 2005
From: david.p.dean at pfizer.com (Dean, David P)
Date: Thu, 13 Oct 2005 12:02:49 -0400
Subject: [Rd] Installing R-2.2.0 package
Message-ID: <599089EF29304C44AF1D84B1C223AC63032EF4F3@groamrexm03.amer.pfizer.com>

> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: Thursday, October 13, 2005 11:42 AM
> To: Uwe Ligges
> Cc: Paul Gilbert; r-devel at r-project.org; Dean, David P
> Subject: Re: [Rd] Installing R-2.2.0 package
> 
> It works on Solaris 8 for me, and this is checked as part of the
> alpha/beta process.
> 
> The code is the same on Linux and Solaris, after all, so this would have
> to be a Solaris shell bug.

I'm on Solaris 8 as well. R is compiled for 64-bits, but I wouldn't expect
that to be a factor. R was built and is run in an environment created with
OpenPKG and containing GNU equivalents to many utilities -- so it's not a
stock Solaris setup.

I'm not familiar with R internals but will be happy to try to debug if I
can. Does the installer call out to the shell somehow? Where would I start
to look for the relevant code?

Thanks!
David Dean
> On Thu, 13 Oct 2005, Uwe Ligges wrote:
> 
> > Paul Gilbert wrote:
> >
> >>
> >>
> >> Uwe Ligges wrote:
> >>
> >>> Dean, David P wrote:
> >>>
> >>>
> >>>
> >>>> Dear list,
> >>>>
> >>>> I've just installed R-2.2.0 under Solaris and have a question about
> >>>> installing packages. If a package fails to install for any reason and
> >>>> I go
> >>>> to install another package, I get this message:
> >>>>
> >>>> $ R-2.2.0-64bit --vanilla CMD INSTALL
> >>>> ~/srca/cran/RSQLite_0.4-0.tar.gz ERROR: failed to lock directory
> >>>> '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library' for modifying
> >>>> Try removing '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library/00LOCK'
> >>>>
> >>>> I can remove the lock directory by hand, and then the next package
> >>>> installs,
> >>>> but this makes it quite difficult to download and install a batch of
> >>>> packages from CRAN or Biocondctor! Is this lock directory a new
> >>>> feature with
> >>>> R-2.2.0? Is there a work around in the R build itself or the
> >>>> installation
> >>>> scripts?
> >>>>
> >>>
> >>>
> >>> No, not a new feature in R-2.2.0, it has been there for some time now.
> >>>
> >>>
> >> I have the impression the feature behaves slightly differently as of
> >> R-2.2.0. Now the 00LOCK file is not removed in Solaris when there is an
> >> unsuccessful install. (In Linux I think it does get removed.)
> >
> > Yes, under both Linux and Windows it is removed.
> >
> > Can anybody else check on Solaris, please? Or can David Dean debug on
> > his machine?
> >
> > In particular, we need exact system information, because it seems to be
> > an OS/platform specific problem.
> >
> > Uwe Ligges
> >
> >
> >
> >
> >> Paul Gilbert
> >>
> >>> After a *successful* installation, the 00LOCK directory should be
> >>> deleted by the installation tools themselves.
> >>> After an unsuccessful installation, the installation tools should
> >>> restore the stuff in the 00LOCK directory.
> >>> Do you abort the installtion manually (this is the only way I figured
> >>> out how not to remove 00LOCK automatically)?
> >>>
> >>> Uwe Ligges
> >>>
> >>>
> >>>
> >>>
> >>>
> >>>> Much thanks!!!
> >>>> --------------------- David P Dean
> >>>> Research Informatics
> >>>> PGRD Groton Labs
> >>>> (860)-441-5053
> >>>> david.p.dean at pfizer.com
> >>>> ---------------------------------------------------------------------
> -
> >>>> LEGAL NOTICE\ Unless expressly stated otherwise, this
> >>>> messag...{{dropped}}
> >>>>
> >>>> ______________________________________________
> >>>> R-devel at r-project.org mailing list
> >>>> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>>>
> >>>
> >>>
> >>> ______________________________________________
> >>> R-devel at r-project.org mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>>
> >>>
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> >
> 
> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mschwartz at mn.rr.com  Thu Oct 13 18:12:38 2005
From: mschwartz at mn.rr.com (Marc Schwartz (via MN))
Date: Thu, 13 Oct 2005 11:12:38 -0500
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <434E812D.4040309@cimr.cam.ac.uk>
References: <434E321B.3040603@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131158100.4655@gannet.stats>
	<434E506F.3080504@cimr.cam.ac.uk> <434E6A21.1010800@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131546150.5818@gannet.stats>
	<434E812D.4040309@cimr.cam.ac.uk>
Message-ID: <1129219958.5531.17.camel@localhost.localdomain>

On Thu, 2005-10-13 at 16:45 +0100, Hin-Tak Leung wrote:
> Prof Brian Ripley wrote:
> <snipped>
> >> Now, the interesting questions are: (1) is Atlas multi-threaded on 
> >> *every* platform, or more specifically, on Windows?,
> > 
> > 
> > By default it is not multi-threaded on any platform, and we have not 
> > succeeded in compiling a multi-threaded version on Windows except by 
> > using Cygwin extensions (i.e. not actually on Windows).
> 
> Thanks for the explanations. As I said, my main interests in running
> R under Wine is mostly about having a GUI, but the multi-threading 
> possibility is an interesting discussion; also re-compiling
> the whole lot (either for win32 or linux) just for the *possibility* of 
> speeding up is a bit painful, so having drop-in dll replacement
> (or a shared-library replacement) for trying-out sounds rather attractive.

Sorry for jumping in here and no disrespect intended to anyone, but I am
confused relative to the desire and benefits of running R under Wine on
Linux simply for the sake of using the RGui.exe menus, when there are
other substantive tradeoffs relative to running R natively on Linux, as
Prof. Ripley has noted.

The one "advantage" that I had seen some time ago, was the possibility
of being able to generate metafile graphics for inclusion with MS Office
apps by using the native Windows libs (in a dual-boot scenario as I
recall). However other substantively better options for generating high
quality graphics have been proposed and discussed here frequently.

If you want a more "full featured" GUI, if you are uncomfortable coding
from the command line, there is a list available at:

http://www.sciviews.org/_rgui/

some of which are cross-platform compatible.

Marc


From ripley at stats.ox.ac.uk  Thu Oct 13 18:19:45 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Oct 2005 17:19:45 +0100 (BST)
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <1129219958.5531.17.camel@localhost.localdomain>
References: <434E321B.3040603@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131158100.4655@gannet.stats>
	<434E506F.3080504@cimr.cam.ac.uk> <434E6A21.1010800@cimr.cam.ac.uk> 
	<Pine.LNX.4.61.0510131546150.5818@gannet.stats>
	<434E812D.4040309@cimr.cam.ac.uk>
	<1129219958.5531.17.camel@localhost.localdomain>
Message-ID: <Pine.LNX.4.61.0510131715170.5818@gannet.stats>

On Thu, 13 Oct 2005, Marc Schwartz (via MN) wrote:

> On Thu, 2005-10-13 at 16:45 +0100, Hin-Tak Leung wrote:
>> Prof Brian Ripley wrote:
>> <snipped>
>>>> Now, the interesting questions are: (1) is Atlas multi-threaded on
>>>> *every* platform, or more specifically, on Windows?,
>>>
>>>
>>> By default it is not multi-threaded on any platform, and we have not
>>> succeeded in compiling a multi-threaded version on Windows except by
>>> using Cygwin extensions (i.e. not actually on Windows).
>>
>> Thanks for the explanations. As I said, my main interests in running
>> R under Wine is mostly about having a GUI, but the multi-threading
>> possibility is an interesting discussion; also re-compiling
>> the whole lot (either for win32 or linux) just for the *possibility* of
>> speeding up is a bit painful, so having drop-in dll replacement
>> (or a shared-library replacement) for trying-out sounds rather attractive.
>
> Sorry for jumping in here and no disrespect intended to anyone, but I am
> confused relative to the desire and benefits of running R under Wine on
> Linux simply for the sake of using the RGui.exe menus, when there are
> other substantive tradeoffs relative to running R natively on Linux, as
> Prof. Ripley has noted.

One reason for doing so is to be able to prepare for teaching in a Windows 
environment: I believe this is why it is mentioned in the FAQ.  (I 
personally test on the machine to be used just to be sure things work.)

> The one "advantage" that I had seen some time ago, was the possibility
> of being able to generate metafile graphics for inclusion with MS Office
> apps by using the native Windows libs (in a dual-boot scenario as I
> recall). However other substantively better options for generating high
> quality graphics have been proposed and discussed here frequently.

I am not 100% convinced that they are `substantively better' in all 
environments, and I still do that sometimes.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Thu Oct 13 18:20:41 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Oct 2005 17:20:41 +0100 (BST)
Subject: [Rd] Installing R-2.2.0 package
In-Reply-To: <599089EF29304C44AF1D84B1C223AC63032EF4F3@groamrexm03.amer.pfizer.com>
References: <599089EF29304C44AF1D84B1C223AC63032EF4F3@groamrexm03.amer.pfizer.com>
Message-ID: <Pine.LNX.4.61.0510131706180.5818@gannet.stats>

On Thu, 13 Oct 2005, Dean, David P wrote:

>> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
>> Sent: Thursday, October 13, 2005 11:42 AM
>> To: Uwe Ligges
>> Cc: Paul Gilbert; r-devel at r-project.org; Dean, David P
>> Subject: Re: [Rd] Installing R-2.2.0 package
>>
>> It works on Solaris 8 for me, and this is checked as part of the
>> alpha/beta process.
>>
>> The code is the same on Linux and Solaris, after all, so this would have
>> to be a Solaris shell bug.
>
> I'm on Solaris 8 as well. R is compiled for 64-bits, but I wouldn't expect
> that to be a factor.

I tested this on a 64-bit setup, as it happens.

> R was built and is run in an environment created with
> OpenPKG and containing GNU equivalents to many utilities -- so it's not a
> stock Solaris setup.

I hope /bin/sh is Solaris and not bash.

> I'm not familiar with R internals but will be happy to try to debug if I
> can. Does the installer call out to the shell somehow? Where would I start
> to look for the relevant code?

INSTALL _is_ a shell script.

Rather than mess about with past code, can you first please try the 
current R-patched (see the FAQ) as I will shortly not have R-2.2.0 on 
Solaris but rather R-patched (I already have R-devel in 4 flavours).

>
> Thanks!
> David Dean
>> On Thu, 13 Oct 2005, Uwe Ligges wrote:
>>
>>> Paul Gilbert wrote:
>>>
>>>>
>>>>
>>>> Uwe Ligges wrote:
>>>>
>>>>> Dean, David P wrote:
>>>>>
>>>>>
>>>>>
>>>>>> Dear list,
>>>>>>
>>>>>> I've just installed R-2.2.0 under Solaris and have a question about
>>>>>> installing packages. If a package fails to install for any reason and
>>>>>> I go
>>>>>> to install another package, I get this message:
>>>>>>
>>>>>> $ R-2.2.0-64bit --vanilla CMD INSTALL
>>>>>> ~/srca/cran/RSQLite_0.4-0.tar.gz ERROR: failed to lock directory
>>>>>> '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library' for modifying
>>>>>> Try removing '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library/00LOCK'
>>>>>>
>>>>>> I can remove the lock directory by hand, and then the next package
>>>>>> installs,
>>>>>> but this makes it quite difficult to download and install a batch of
>>>>>> packages from CRAN or Biocondctor! Is this lock directory a new
>>>>>> feature with
>>>>>> R-2.2.0? Is there a work around in the R build itself or the
>>>>>> installation
>>>>>> scripts?
>>>>>>
>>>>>
>>>>>
>>>>> No, not a new feature in R-2.2.0, it has been there for some time now.
>>>>>
>>>>>
>>>> I have the impression the feature behaves slightly differently as of
>>>> R-2.2.0. Now the 00LOCK file is not removed in Solaris when there is an
>>>> unsuccessful install. (In Linux I think it does get removed.)
>>>
>>> Yes, under both Linux and Windows it is removed.
>>>
>>> Can anybody else check on Solaris, please? Or can David Dean debug on
>>> his machine?
>>>
>>> In particular, we need exact system information, because it seems to be
>>> an OS/platform specific problem.
>>>
>>> Uwe Ligges
>>>
>>>
>>>
>>>
>>>> Paul Gilbert
>>>>
>>>>> After a *successful* installation, the 00LOCK directory should be
>>>>> deleted by the installation tools themselves.
>>>>> After an unsuccessful installation, the installation tools should
>>>>> restore the stuff in the 00LOCK directory.
>>>>> Do you abort the installtion manually (this is the only way I figured
>>>>> out how not to remove 00LOCK automatically)?
>>>>>
>>>>> Uwe Ligges
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>> Much thanks!!!
>>>>>> --------------------- David P Dean
>>>>>> Research Informatics
>>>>>> PGRD Groton Labs
>>>>>> (860)-441-5053
>>>>>> david.p.dean at pfizer.com
>>>>>> ---------------------------------------------------------------------
>> -
>>>>>> LEGAL NOTICE\ Unless expressly stated otherwise, this
>>>>>> messag...{{dropped}}
>>>>>>
>>>>>> ______________________________________________
>>>>>> R-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>>
>>>>>
>>>>>
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>
>>>>>
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>>
>> --
>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>> University of Oxford,             Tel:  +44 1865 272861 (self)
>> 1 South Parks Road,                     +44 1865 272866 (PA)
>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From pgilbert at bank-banque-canada.ca  Thu Oct 13 18:32:00 2005
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 13 Oct 2005 12:32:00 -0400
Subject: [Rd] Installing R-2.2.0 package
In-Reply-To: <599089EF29304C44AF1D84B1C223AC63032EF4F3@groamrexm03.amer.pfizer.com>
References: <599089EF29304C44AF1D84B1C223AC63032EF4F3@groamrexm03.amer.pfizer.com>
Message-ID: <434E8C00.9000106@bank-banque-canada.ca>

I'm using SunOS 5.8, R compiled as a 32 bit app, and I didn't intend to 
set up anything special. Below is an example installing RMySQL (twice). 
The error the second time is because of the lock file. I think

ERROR: configuration failed for package 'RMySQL'
/apps/asd/unix/gnu/R/SunOS-sparc32/R-2.2.0/bin/INSTALL: test: argument 
expected

may be a clue.


(BTW. If there is a simple answer to  the libz problem then I would 
appreciate hearing.)

Paul Gilbert

 > install.packages(c("RMySQL"), Sys.getenv("R_LIBS"), repos = 
"http://cran.at.r-project.org")
trying URL 'http://cran.at.r-project.org/src/contrib/RMySQL_0.5-5.tar.gz'
Content type 'application/x-tar' length 280328 bytes
opened URL
==================================================
downloaded 273Kb

* Installing *source* package 'RMySQL' ...
creating cache ./config.cache
checking how to run the C preprocessor... /lib/cpp
checking for compress in -lz... no
checking for getopt_long in -lc... no
checking for mysql_init in -lmysqlclient... no
checking for mysql.h... no
checking for mysql_init in -lmysqlclient... no
checking for mysql_init in -lmysqlclient... no
checking for mysql_init in -lmysqlclient... no
checking for mysql_init in -lmysqlclient... no
checking for mysql_init in -lmysqlclient... no

Configuration error:
   Could not locate the library "libz" required by MySQL.

INSTRUCTIONS:

   The "libz" library is required by the MySQL client library
   in order to compress/uncompress connections between clients
   and the MySQL engine.

   Make sure you have "libz" installed properly and/or included
   in your $LD_LIBRARY_PATH.  Perhaps it is not in any of the
   standard directories (e.g., /usr/lib/, /usr/local/lib)?

Aborting the installation of RMySQL.

ERROR: configuration failed for package 'RMySQL'
/apps/asd/unix/gnu/R/SunOS-sparc32/R-2.2.0/bin/INSTALL: test: argument 
expected

The downloaded packages are in
        /tmp/Rtmp26660/downloaded_packages
Warning message:
installation of package 'RMySQL' had non-zero exit status in: 
install.packages(c("RMySQL"), Sys.getenv("R_LIBS"), repos = 
"http://cran.at.r-project.org")
 > install.packages(c("RMySQL"), Sys.getenv("R_LIBS"), repos = 
"http://cran.at.r-project.org")
trying URL 'http://cran.at.r-project.org/src/contrib/RMySQL_0.5-5.tar.gz'
Content type 'application/x-tar' length 280328 bytes
opened URL
==================================================
downloaded 273Kb

ERROR: failed to lock directory 
'/home/asd9/gnu/R/SunOS-sparc32/R-2.2.0/site-library' for modifying
Try removing '/home/asd9/gnu/R/SunOS-sparc32/R-2.2.0/site-library/00LOCK'

The downloaded packages are in
        /tmp/Rtmp26660/downloaded_packages
Warning message:
installation of package 'RMySQL' had non-zero exit status in: 
install.packages(c("RMySQL"), Sys.getenv("R_LIBS"), repos = 
"http://cran.at.r-project.org")
 >


Dean, David P wrote:

>>From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
>>Sent: Thursday, October 13, 2005 11:42 AM
>>To: Uwe Ligges
>>Cc: Paul Gilbert; r-devel at r-project.org; Dean, David P
>>Subject: Re: [Rd] Installing R-2.2.0 package
>>
>>It works on Solaris 8 for me, and this is checked as part of the
>>alpha/beta process.
>>
>>The code is the same on Linux and Solaris, after all, so this would have
>>to be a Solaris shell bug.
>>    
>>
>
>I'm on Solaris 8 as well. R is compiled for 64-bits, but I wouldn't expect
>that to be a factor. R was built and is run in an environment created with
>OpenPKG and containing GNU equivalents to many utilities -- so it's not a
>stock Solaris setup.
>
>I'm not familiar with R internals but will be happy to try to debug if I
>can. Does the installer call out to the shell somehow? Where would I start
>to look for the relevant code?
>
>Thanks!
>David Dean
>  
>
>>On Thu, 13 Oct 2005, Uwe Ligges wrote:
>>
>>    
>>
>>>Paul Gilbert wrote:
>>>
>>>      
>>>
>>>>Uwe Ligges wrote:
>>>>
>>>>        
>>>>
>>>>>Dean, David P wrote:
>>>>>
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>>>Dear list,
>>>>>>
>>>>>>I've just installed R-2.2.0 under Solaris and have a question about
>>>>>>installing packages. If a package fails to install for any reason and
>>>>>>I go
>>>>>>to install another package, I get this message:
>>>>>>
>>>>>>$ R-2.2.0-64bit --vanilla CMD INSTALL
>>>>>>~/srca/cran/RSQLite_0.4-0.tar.gz ERROR: failed to lock directory
>>>>>>'/app/openpkg/lib/R-2.2.0-64bit/lib/R/library' for modifying
>>>>>>Try removing '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library/00LOCK'
>>>>>>
>>>>>>I can remove the lock directory by hand, and then the next package
>>>>>>installs,
>>>>>>but this makes it quite difficult to download and install a batch of
>>>>>>packages from CRAN or Biocondctor! Is this lock directory a new
>>>>>>feature with
>>>>>>R-2.2.0? Is there a work around in the R build itself or the
>>>>>>installation
>>>>>>scripts?
>>>>>>
>>>>>>            
>>>>>>
>>>>>No, not a new feature in R-2.2.0, it has been there for some time now.
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>I have the impression the feature behaves slightly differently as of
>>>>R-2.2.0. Now the 00LOCK file is not removed in Solaris when there is an
>>>>unsuccessful install. (In Linux I think it does get removed.)
>>>>        
>>>>
>>>Yes, under both Linux and Windows it is removed.
>>>
>>>Can anybody else check on Solaris, please? Or can David Dean debug on
>>>his machine?
>>>
>>>In particular, we need exact system information, because it seems to be
>>>an OS/platform specific problem.
>>>
>>>Uwe Ligges
>>>
>>>
>>>
>>>
>>>      
>>>
>>>>Paul Gilbert
>>>>
>>>>        
>>>>
>>>>>After a *successful* installation, the 00LOCK directory should be
>>>>>deleted by the installation tools themselves.
>>>>>After an unsuccessful installation, the installation tools should
>>>>>restore the stuff in the 00LOCK directory.
>>>>>Do you abort the installtion manually (this is the only way I figured
>>>>>out how not to remove 00LOCK automatically)?
>>>>>
>>>>>Uwe Ligges
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>
>>>>>          
>>>>>
>>>>>>Much thanks!!!
>>>>>>--------------------- David P Dean
>>>>>>Research Informatics
>>>>>>PGRD Groton Labs
>>>>>>(860)-441-5053
>>>>>>david.p.dean at pfizer.com
>>>>>>---------------------------------------------------------------------
>>>>>>            
>>>>>>
>>-
>>    
>>
>>>>>>LEGAL NOTICE\ Unless expressly stated otherwise, this
>>>>>>messag...{{dropped}}
>>>>>>
>>>>>>______________________________________________
>>>>>>R-devel at r-project.org mailing list
>>>>>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>>
>>>>>>            
>>>>>>
>>>>>______________________________________________
>>>>>R-devel at r-project.org mailing list
>>>>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>
>>>>>
>>>>>          
>>>>>
>>>______________________________________________
>>>R-devel at r-project.org mailing list
>>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>>>      
>>>
>>--
>>Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>University of Oxford,             Tel:  +44 1865 272861 (self)
>>1 South Parks Road,                     +44 1865 272866 (PA)
>>Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>    
>>
>
>  
>


From mschwartz at mn.rr.com  Thu Oct 13 18:37:56 2005
From: mschwartz at mn.rr.com (Marc Schwartz (via MN))
Date: Thu, 13 Oct 2005 11:37:56 -0500
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <Pine.LNX.4.61.0510131715170.5818@gannet.stats>
References: <434E321B.3040603@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131158100.4655@gannet.stats>
	<434E506F.3080504@cimr.cam.ac.uk> <434E6A21.1010800@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131546150.5818@gannet.stats>
	<434E812D.4040309@cimr.cam.ac.uk>
	<1129219958.5531.17.camel@localhost.localdomain>
	<Pine.LNX.4.61.0510131715170.5818@gannet.stats>
Message-ID: <1129221476.5531.35.camel@localhost.localdomain>

On Thu, 2005-10-13 at 17:19 +0100, Prof Brian Ripley wrote:
> On Thu, 13 Oct 2005, Marc Schwartz (via MN) wrote:
> 
> > On Thu, 2005-10-13 at 16:45 +0100, Hin-Tak Leung wrote:
> >> Prof Brian Ripley wrote:
> >> <snipped>
> >>>> Now, the interesting questions are: (1) is Atlas multi-threaded on
> >>>> *every* platform, or more specifically, on Windows?,
> >>>
> >>>
> >>> By default it is not multi-threaded on any platform, and we have not
> >>> succeeded in compiling a multi-threaded version on Windows except by
> >>> using Cygwin extensions (i.e. not actually on Windows).
> >>
> >> Thanks for the explanations. As I said, my main interests in running
> >> R under Wine is mostly about having a GUI, but the multi-threading
> >> possibility is an interesting discussion; also re-compiling
> >> the whole lot (either for win32 or linux) just for the *possibility* of
> >> speeding up is a bit painful, so having drop-in dll replacement
> >> (or a shared-library replacement) for trying-out sounds rather attractive.
> >
> > Sorry for jumping in here and no disrespect intended to anyone, but I am
> > confused relative to the desire and benefits of running R under Wine on
> > Linux simply for the sake of using the RGui.exe menus, when there are
> > other substantive tradeoffs relative to running R natively on Linux, as
> > Prof. Ripley has noted.
> 
> One reason for doing so is to be able to prepare for teaching in a Windows 
> environment: I believe this is why it is mentioned in the FAQ.  (I 
> personally test on the machine to be used just to be sure things work.)

Good point. I had not considered that, not being in a teaching
environment. Running on a laptop, I always have a known machine with me,
even when doing presentations in front of a group/audience.

> > The one "advantage" that I had seen some time ago, was the possibility
> > of being able to generate metafile graphics for inclusion with MS Office
> > apps by using the native Windows libs (in a dual-boot scenario as I
> > recall). However other substantively better options for generating high
> > quality graphics have been proposed and discussed here frequently.
> 
> I am not 100% convinced that they are `substantively better' in all 
> environments, and I still do that sometimes.

No disagreement if there is a specific need for this. Where that need is
present, this is a better solution than using the Linux native libEMF
functionality, which is problematic as has been discussed in those same
threads.

I was more focused (and confused) on the Rgui.exe menus as the principal
justification for taking this approach, but again, perhaps I am lacking
context.

Marc


From ripley at stats.ox.ac.uk  Thu Oct 13 18:41:58 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Oct 2005 17:41:58 +0100 (BST)
Subject: [Rd] Installing R-2.2.0 package
In-Reply-To: <434E8C00.9000106@bank-banque-canada.ca>
References: <599089EF29304C44AF1D84B1C223AC63032EF4F3@groamrexm03.amer.pfizer.com>
	<434E8C00.9000106@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.61.0510131740210.7130@gannet.stats>

On Thu, 13 Oct 2005, Paul Gilbert wrote:

> I'm using SunOS 5.8, R compiled as a 32 bit app, and I didn't intend to
> set up anything special. Below is an example installing RMySQL (twice).
> The error the second time is because of the lock file. I think
>
> ERROR: configuration failed for package 'RMySQL'
> /apps/asd/unix/gnu/R/SunOS-sparc32/R-2.2.0/bin/INSTALL: test: argument
> expected
>
> may be a clue.

Please try R-patched, as I think it might already have been fixed (by 
adding quotes for a different reason).

> (BTW. If there is a simple answer to  the libz problem then I would
> appreciate hearing.)

Simple: install it.

> Paul Gilbert
>
> > install.packages(c("RMySQL"), Sys.getenv("R_LIBS"), repos =
> "http://cran.at.r-project.org")
> trying URL 'http://cran.at.r-project.org/src/contrib/RMySQL_0.5-5.tar.gz'
> Content type 'application/x-tar' length 280328 bytes
> opened URL
> ==================================================
> downloaded 273Kb
>
> * Installing *source* package 'RMySQL' ...
> creating cache ./config.cache
> checking how to run the C preprocessor... /lib/cpp
> checking for compress in -lz... no
> checking for getopt_long in -lc... no
> checking for mysql_init in -lmysqlclient... no
> checking for mysql.h... no
> checking for mysql_init in -lmysqlclient... no
> checking for mysql_init in -lmysqlclient... no
> checking for mysql_init in -lmysqlclient... no
> checking for mysql_init in -lmysqlclient... no
> checking for mysql_init in -lmysqlclient... no
>
> Configuration error:
>   Could not locate the library "libz" required by MySQL.
>
> INSTRUCTIONS:
>
>   The "libz" library is required by the MySQL client library
>   in order to compress/uncompress connections between clients
>   and the MySQL engine.
>
>   Make sure you have "libz" installed properly and/or included
>   in your $LD_LIBRARY_PATH.  Perhaps it is not in any of the
>   standard directories (e.g., /usr/lib/, /usr/local/lib)?
>
> Aborting the installation of RMySQL.
>
> ERROR: configuration failed for package 'RMySQL'
> /apps/asd/unix/gnu/R/SunOS-sparc32/R-2.2.0/bin/INSTALL: test: argument
> expected
>
> The downloaded packages are in
>        /tmp/Rtmp26660/downloaded_packages
> Warning message:
> installation of package 'RMySQL' had non-zero exit status in:
> install.packages(c("RMySQL"), Sys.getenv("R_LIBS"), repos =
> "http://cran.at.r-project.org")
> > install.packages(c("RMySQL"), Sys.getenv("R_LIBS"), repos =
> "http://cran.at.r-project.org")
> trying URL 'http://cran.at.r-project.org/src/contrib/RMySQL_0.5-5.tar.gz'
> Content type 'application/x-tar' length 280328 bytes
> opened URL
> ==================================================
> downloaded 273Kb
>
> ERROR: failed to lock directory
> '/home/asd9/gnu/R/SunOS-sparc32/R-2.2.0/site-library' for modifying
> Try removing '/home/asd9/gnu/R/SunOS-sparc32/R-2.2.0/site-library/00LOCK'
>
> The downloaded packages are in
>        /tmp/Rtmp26660/downloaded_packages
> Warning message:
> installation of package 'RMySQL' had non-zero exit status in:
> install.packages(c("RMySQL"), Sys.getenv("R_LIBS"), repos =
> "http://cran.at.r-project.org")
> >
>
>
> Dean, David P wrote:
>
>>> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
>>> Sent: Thursday, October 13, 2005 11:42 AM
>>> To: Uwe Ligges
>>> Cc: Paul Gilbert; r-devel at r-project.org; Dean, David P
>>> Subject: Re: [Rd] Installing R-2.2.0 package
>>>
>>> It works on Solaris 8 for me, and this is checked as part of the
>>> alpha/beta process.
>>>
>>> The code is the same on Linux and Solaris, after all, so this would have
>>> to be a Solaris shell bug.
>>>
>>>
>>
>> I'm on Solaris 8 as well. R is compiled for 64-bits, but I wouldn't expect
>> that to be a factor. R was built and is run in an environment created with
>> OpenPKG and containing GNU equivalents to many utilities -- so it's not a
>> stock Solaris setup.
>>
>> I'm not familiar with R internals but will be happy to try to debug if I
>> can. Does the installer call out to the shell somehow? Where would I start
>> to look for the relevant code?
>>
>> Thanks!
>> David Dean
>>
>>
>>> On Thu, 13 Oct 2005, Uwe Ligges wrote:
>>>
>>>
>>>
>>>> Paul Gilbert wrote:
>>>>
>>>>
>>>>
>>>>> Uwe Ligges wrote:
>>>>>
>>>>>
>>>>>
>>>>>> Dean, David P wrote:
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> Dear list,
>>>>>>>
>>>>>>> I've just installed R-2.2.0 under Solaris and have a question about
>>>>>>> installing packages. If a package fails to install for any reason and
>>>>>>> I go
>>>>>>> to install another package, I get this message:
>>>>>>>
>>>>>>> $ R-2.2.0-64bit --vanilla CMD INSTALL
>>>>>>> ~/srca/cran/RSQLite_0.4-0.tar.gz ERROR: failed to lock directory
>>>>>>> '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library' for modifying
>>>>>>> Try removing '/app/openpkg/lib/R-2.2.0-64bit/lib/R/library/00LOCK'
>>>>>>>
>>>>>>> I can remove the lock directory by hand, and then the next package
>>>>>>> installs,
>>>>>>> but this makes it quite difficult to download and install a batch of
>>>>>>> packages from CRAN or Biocondctor! Is this lock directory a new
>>>>>>> feature with
>>>>>>> R-2.2.0? Is there a work around in the R build itself or the
>>>>>>> installation
>>>>>>> scripts?
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> No, not a new feature in R-2.2.0, it has been there for some time now.
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>> I have the impression the feature behaves slightly differently as of
>>>>> R-2.2.0. Now the 00LOCK file is not removed in Solaris when there is an
>>>>> unsuccessful install. (In Linux I think it does get removed.)
>>>>>
>>>>>
>>>> Yes, under both Linux and Windows it is removed.
>>>>
>>>> Can anybody else check on Solaris, please? Or can David Dean debug on
>>>> his machine?
>>>>
>>>> In particular, we need exact system information, because it seems to be
>>>> an OS/platform specific problem.
>>>>
>>>> Uwe Ligges
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>
>>>>> Paul Gilbert
>>>>>
>>>>>
>>>>>
>>>>>> After a *successful* installation, the 00LOCK directory should be
>>>>>> deleted by the installation tools themselves.
>>>>>> After an unsuccessful installation, the installation tools should
>>>>>> restore the stuff in the 00LOCK directory.
>>>>>> Do you abort the installtion manually (this is the only way I figured
>>>>>> out how not to remove 00LOCK automatically)?
>>>>>>
>>>>>> Uwe Ligges
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>>>>> Much thanks!!!
>>>>>>> --------------------- David P Dean
>>>>>>> Research Informatics
>>>>>>> PGRD Groton Labs
>>>>>>> (860)-441-5053
>>>>>>> david.p.dean at pfizer.com
>>>>>>> ---------------------------------------------------------------------
>>>>>>>
>>>>>>>
>>> -
>>>
>>>
>>>>>>> LEGAL NOTICE\ Unless expressly stated otherwise, this
>>>>>>> messag...{{dropped}}
>>>>>>>
>>>>>>> ______________________________________________
>>>>>>> R-devel at r-project.org mailing list
>>>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>> ______________________________________________
>>>>>> R-devel at r-project.org mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>>
>>>>>>
>>>>>>
>>>>>>
>>>> ______________________________________________
>>>> R-devel at r-project.org mailing list
>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>
>>>>
>>>>
>>>>
>>> --
>>> Brian D. Ripley,                  ripley at stats.ox.ac.uk
>>> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
>>> University of Oxford,             Tel:  +44 1865 272861 (self)
>>> 1 South Parks Road,                     +44 1865 272866 (PA)
>>> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>>>
>>>
>>
>>
>>
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From hin-tak.leung at cimr.cam.ac.uk  Thu Oct 13 19:02:19 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Thu, 13 Oct 2005 18:02:19 +0100
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <Pine.LNX.4.61.0510131715170.5818@gannet.stats>
References: <434E321B.3040603@cimr.cam.ac.uk>	<Pine.LNX.4.61.0510131158100.4655@gannet.stats>	<434E506F.3080504@cimr.cam.ac.uk>
	<434E6A21.1010800@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131546150.5818@gannet.stats>	<434E812D.4040309@cimr.cam.ac.uk>	<1129219958.5531.17.camel@localhost.localdomain>
	<Pine.LNX.4.61.0510131715170.5818@gannet.stats>
Message-ID: <434E931B.1030509@cimr.cam.ac.uk>

Prof Brian Ripley wrote:
> On Thu, 13 Oct 2005, Marc Schwartz (via MN) wrote:
<snipped>
>>Sorry for jumping in here and no disrespect intended to anyone, but I am
>>confused relative to the desire and benefits of running R under Wine on
>>Linux simply for the sake of using the RGui.exe menus, when there are
>>other substantive tradeoffs relative to running R natively on Linux, as
>>Prof. Ripley has noted.
> 
> 
> One reason for doing so is to be able to prepare for teaching in a Windows 
> environment: I believe this is why it is mentioned in the FAQ.  (I 
> personally test on the machine to be used just to be sure things work.)

I agree; and being able to discuss it with another user who may be
on windows. Having alternatives and choices is good.

Actually my earlier failed incentive was to run the Sciview-R GUI. It
most certainly looks very useful and functional from the screenshots,
and I dare say it is probably one of the best available - it is hard
to imagine one "better" - the unix fanatics around me told me about
ESS and I do have it installed and configured, but it isn't
anywhere close to the Sciview-R GUI - sadly it is heavily .NET based
and won't run under wine, which only recently moved to emulate 2k
as default and have very little support for xp, 2k3 and the
more security-conscious part of the NT families. I did install
sciview-R successfully, but as soon as I see the manifest files,
I realise it won't run under wine, not a hope.

Would be interesting to see if they are can port that to GTK#/mono
on linux.

>>The one "advantage" that I had seen some time ago, was the possibility
>>of being able to generate metafile graphics for inclusion with MS Office
>>apps by using the native Windows libs (in a dual-boot scenario as I
>>recall). However other substantively better options for generating high
>>quality graphics have been proposed and discussed here frequently.
> 
> 
> I am not 100% convinced that they are `substantively better' in all 
> environments, and I still do that sometimes.

I agree on principle - until the linux port can do *exactly* the
same thing better and more, "substantively better" is a
rather subjective description and is just for the fanatics. If
it is missing just one feature, like WMF export - and since microsoft
is not going bankrupt any time soon, MS office integration is
fairly important to *some* people - one cannot say it is
'substantially better', because there is always one user who would
judge that one missing feature, over and above any other advantage.

Some software on linux uses libwmf for wmf import/export (I believe
it is gimp). Maybe R can do the same.

Hin-Tak Leung.


From hin-tak.leung at cimr.cam.ac.uk  Thu Oct 13 19:33:03 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Thu, 13 Oct 2005 18:33:03 +0100
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <1129221476.5531.35.camel@localhost.localdomain>
References: <434E321B.3040603@cimr.cam.ac.uk>	<Pine.LNX.4.61.0510131158100.4655@gannet.stats>	<434E506F.3080504@cimr.cam.ac.uk>
	<434E6A21.1010800@cimr.cam.ac.uk>	<Pine.LNX.4.61.0510131546150.5818@gannet.stats>	<434E812D.4040309@cimr.cam.ac.uk>	<1129219958.5531.17.camel@localhost.localdomain>	<Pine.LNX.4.61.0510131715170.5818@gannet.stats>
	<1129221476.5531.35.camel@localhost.localdomain>
Message-ID: <434E9A4F.2070609@cimr.cam.ac.uk>

Marc Schwartz (via MN) wrote:
<snipped>
> I was more focused (and confused) on the Rgui.exe menus as the principal
> justification for taking this approach, but again, perhaps I am lacking
> context.

I think you are confused about Rgui.exe, versus "having a GUI for R" 
(which is what I wrote - I never wrote "Rgui.exe", as that was *not*
what I meant all along). I did try but failed with the Sciview-R -
it would install but won't run. Since the actual GUI faq is hosted
by sciview on "http://www.sciviews.org/_rgui/" as you pointed out,
by association, my first guess was that it is a good bet to try
the Sciview-R one first.

If anybody can name a "better" GUI than sciview-R, windows or linux,
I am all ears - "better" in any sense of the word, preferably
not in the ESS sense, as I already have that - nothing obviously
against it, but I like alternatives, preferably covering different
usage areas.

Before anybody jump in again, the fact that sciview-R is somewhat .NET 
framework dependent (at least the binary installed by the
default installer seems to be) is justifiably a development issue?

Hin-Tak Leung


From mschwartz at mn.rr.com  Thu Oct 13 20:14:57 2005
From: mschwartz at mn.rr.com (Marc Schwartz (via MN))
Date: Thu, 13 Oct 2005 13:14:57 -0500
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <434E931B.1030509@cimr.cam.ac.uk>
References: <434E321B.3040603@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131158100.4655@gannet.stats>
	<434E506F.3080504@cimr.cam.ac.uk> <434E6A21.1010800@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131546150.5818@gannet.stats>
	<434E812D.4040309@cimr.cam.ac.uk>
	<1129219958.5531.17.camel@localhost.localdomain>
	<Pine.LNX.4.61.0510131715170.5818@gannet.stats>
	<434E931B.1030509@cimr.cam.ac.uk>
Message-ID: <1129227298.5531.82.camel@localhost.localdomain>

On Thu, 2005-10-13 at 18:02 +0100, Hin-Tak Leung wrote:
> Prof Brian Ripley wrote:
> > On Thu, 13 Oct 2005, Marc Schwartz (via MN) wrote:
> <snipped>
> >>Sorry for jumping in here and no disrespect intended to anyone, but I am
> >>confused relative to the desire and benefits of running R under Wine on
> >>Linux simply for the sake of using the RGui.exe menus, when there are
> >>other substantive tradeoffs relative to running R natively on Linux, as
> >>Prof. Ripley has noted.
> > 
> > 
> > One reason for doing so is to be able to prepare for teaching in a Windows 
> > environment: I believe this is why it is mentioned in the FAQ.  (I 
> > personally test on the machine to be used just to be sure things work.)
> 
> I agree; and being able to discuss it with another user who may be
> on windows. Having alternatives and choices is good.

No disagreement that choice is good and that is a significant predicate
in the open source world. Please don't misconstrue my comments as being
in the context of pure Linux advocacy. They are not.

It was more to gain an understanding of the requirements you have to
comprehend the desire to take this particular approach and to
differentiate specific "isolated" requirements versus day-to-day routine
needs.

> Actually my earlier failed incentive was to run the Sciview-R GUI. It
> most certainly looks very useful and functional from the screenshots,
> and I dare say it is probably one of the best available - it is hard
> to imagine one "better" - the unix fanatics around me told me about
> ESS and I do have it installed and configured, but it isn't
> anywhere close to the Sciview-R GUI - sadly it is heavily .NET based
> and won't run under wine, which only recently moved to emulate 2k
> as default and have very little support for xp, 2k3 and the
> more security-conscious part of the NT families. I did install
> sciview-R successfully, but as soon as I see the manifest files,
> I realise it won't run under wine, not a hope.
> 
> Would be interesting to see if they are can port that to GTK#/mono
> on linux.

Perhaps you would be willing to contribute your time to make that
happen, presuming that the technical hurdles are resolvable.

> >>The one "advantage" that I had seen some time ago, was the possibility
> >>of being able to generate metafile graphics for inclusion with MS Office
> >>apps by using the native Windows libs (in a dual-boot scenario as I
> >>recall). However other substantively better options for generating high
> >>quality graphics have been proposed and discussed here frequently.
> > 
> > 
> > I am not 100% convinced that they are `substantively better' in all 
> > environments, and I still do that sometimes.
> 
> I agree on principle - until the linux port can do *exactly* the
> same thing better and more, "substantively better" is a
> rather subjective description and is just for the fanatics. If
> it is missing just one feature, like WMF export - and since microsoft
> is not going bankrupt any time soon, MS office integration is
> fairly important to *some* people - one cannot say it is
> 'substantially better', because there is always one user who would
> judge that one missing feature, over and above any other advantage.
> 
> Some software on linux uses libwmf for wmf import/export (I believe
> it is gimp). Maybe R can do the same.

Well, we have shown that libEMF is problematic. So if you want better
functionality here, you would be better served working with the libEMF
developers to enhance their compatibility. Though, as Prof. Ripley has
noted, there are problems with WMF/EMF files being imported into Office
apps, even when natively generated on Windows.

MS may not be going out of business in the near future, but the
continued pressure of open standards (as just recently noted here in the
Commonwealth of Massachusetts) will pressure MS over time to either
adopt (and adapt to) open standards or to experience a decline in market
share. It is suggested that the just announced inclusion of PDF
functionality in the upcoming Office 12 is a direct result of the
Massachusetts decision to require either OpenDoc or PDF formats.

But that's a different discussion for a different forum...

Relative to the "there is always one user" notion, being a firm believer
in Pareto's 80/20 Rule, no business or venture, whether for profit or
otherwise, can afford to meet the needs of 100% of the target
marketplace. You will not survive if that is your goal. There are some
users, for whom taking the time to meet their needs, will result in your
inability to meet the needs of the majority of your users and you will
ultimately lose them. That is called the "Opportunity Cost" and is
intrinsic given the predicate that resources are finite. Having the
discipline to say "No", that there is some "business" that is not worth
having, is a critical part of the decision making process.

The advantage of open source, is that you can build upon the basic
"product" and tailor it to your specific needs, if you have the
motivation and the time to do it yourself, or the ability to pay someone
else to do it for you.

Marc


From mschwartz at mn.rr.com  Thu Oct 13 20:21:08 2005
From: mschwartz at mn.rr.com (Marc Schwartz (via MN))
Date: Thu, 13 Oct 2005 13:21:08 -0500
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <434E9A4F.2070609@cimr.cam.ac.uk>
References: <434E321B.3040603@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131158100.4655@gannet.stats>
	<434E506F.3080504@cimr.cam.ac.uk> <434E6A21.1010800@cimr.cam.ac.uk>
	<Pine.LNX.4.61.0510131546150.5818@gannet.stats>
	<434E812D.4040309@cimr.cam.ac.uk>
	<1129219958.5531.17.camel@localhost.localdomain>
	<Pine.LNX.4.61.0510131715170.5818@gannet.stats>
	<1129221476.5531.35.camel@localhost.localdomain>
	<434E9A4F.2070609@cimr.cam.ac.uk>
Message-ID: <1129227669.5531.90.camel@localhost.localdomain>

On Thu, 2005-10-13 at 18:33 +0100, Hin-Tak Leung wrote:
> Marc Schwartz (via MN) wrote:
> <snipped>
> > I was more focused (and confused) on the Rgui.exe menus as the principal
> > justification for taking this approach, but again, perhaps I am lacking
> > context.
> 
> I think you are confused about Rgui.exe, versus "having a GUI for R" 
> (which is what I wrote - I never wrote "Rgui.exe", as that was *not*
> what I meant all along). 

Indeed. I stand corrected on that point, given your comments above and
now going back to look at your prior posts. This helps to clarify my
mis-perception.

> I did try but failed with the Sciview-R -
> it would install but won't run. Since the actual GUI faq is hosted
> by sciview on "http://www.sciviews.org/_rgui/" as you pointed out,
> by association, my first guess was that it is a good bet to try
> the Sciview-R one first.
> 
> If anybody can name a "better" GUI than sciview-R, windows or linux,
> I am all ears - "better" in any sense of the word, preferably
> not in the ESS sense, as I already have that - nothing obviously
> against it, but I like alternatives, preferably covering different
> usage areas.

If you are so motivated, you might consider subscribing to and
contributing to the R-SIG-GUI list:

https://stat.ethz.ch/mailman/listinfo/r-sig-gui

As I mentioned in the post I just sent, this is a cooperative "venture"
in which things happen because people selflessly contribute their time
and energy to make it happen.

> Before anybody jump in again, the fact that sciview-R is somewhat .NET 
> framework dependent (at least the binary installed by the
> default installer seems to be) is justifiably a development issue?

HTH,

Marc


From hin-tak.leung at cimr.cam.ac.uk  Thu Oct 13 20:46:32 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Thu, 13 Oct 2005 19:46:32 +0100
Subject: [Rd] R, Wine, and multi-threadedness.
In-Reply-To: <1129227669.5531.90.camel@localhost.localdomain>
References: <434E321B.3040603@cimr.cam.ac.uk>	
	<Pine.LNX.4.61.0510131158100.4655@gannet.stats>	
	<434E506F.3080504@cimr.cam.ac.uk>
	<434E6A21.1010800@cimr.cam.ac.uk>	
	<Pine.LNX.4.61.0510131546150.5818@gannet.stats>	
	<434E812D.4040309@cimr.cam.ac.uk>	
	<1129219958.5531.17.camel@localhost.localdomain>	
	<Pine.LNX.4.61.0510131715170.5818@gannet.stats>	
	<1129221476.5531.35.camel@localhost.localdomain>	
	<434E9A4F.2070609@cimr.cam.ac.uk>
	<1129227669.5531.90.camel@localhost.localdomain>
Message-ID: <434EAB88.2000007@cimr.cam.ac.uk>

Marc Schwartz (via MN) wrote:
<snipped>
> If you are so motivated, you might consider subscribing to and
> contributing to the R-SIG-GUI list:
> 
> https://stat.ethz.ch/mailman/listinfo/r-sig-gui

Another poster has suggested JGR. Don't particularly like Java much.
At the moment I am more inclined (if it bugs me enough to do
something myself about it) to try porting sciview-R as a
hybrid libwine application with wingcc, and I did have a look
at the 14MB source code bundle - it has a lot of binary-only
bits which does not look as if they belong there or be redistributed.
(Sigh...).

Hin-Tak Leung


From david.p.dean at pfizer.com  Thu Oct 13 21:38:27 2005
From: david.p.dean at pfizer.com (Dean, David P)
Date: Thu, 13 Oct 2005 15:38:27 -0400
Subject: [Rd] Installing R-2.2.0 package
Message-ID: <599089EF29304C44AF1D84B1C223AC63032EF569@groamrexm03.amer.pfizer.com>

> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> Sent: Thursday, October 13, 2005 12:21 PM
> To: Dean, David P
> Cc: Uwe Ligges; r-devel at r-project.org; Paul Gilbert
> Subject: Re: [Rd] Installing R-2.2.0 package
> 
> On Thu, 13 Oct 2005, Dean, David P wrote:
> 
> >> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
> >> Sent: Thursday, October 13, 2005 11:42 AM
> >> To: Uwe Ligges
> >> Cc: Paul Gilbert; r-devel at r-project.org; Dean, David P
> >> Subject: Re: [Rd] Installing R-2.2.0 package
> >>
> >> It works on Solaris 8 for me, and this is checked as part of the
> >> alpha/beta process.
> >>
> >> The code is the same on Linux and Solaris, after all, so this would
> have
> >> to be a Solaris shell bug.
> >
> > I'm on Solaris 8 as well. R is compiled for 64-bits, but I wouldn't
> expect
> > that to be a factor.
> 
> I tested this on a 64-bit setup, as it happens.
> 
> > R was built and is run in an environment created with
> > OpenPKG and containing GNU equivalents to many utilities -- so it's not
> a
> > stock Solaris setup.
> 
> I hope /bin/sh is Solaris and not bash.
> 
> > I'm not familiar with R internals but will be happy to try to debug if I
> > can. Does the installer call out to the shell somehow? Where would I
> start
> > to look for the relevant code?
> 
> INSTALL _is_ a shell script.
> 
> Rather than mess about with past code, can you first please try the
> current R-patched (see the FAQ) as I will shortly not have R-2.2.0 on
> Solaris but rather R-patched (I already have R-devel in 4 flavours).
> 
> >
> > Thanks!
> > David Dean

OK, I'll try the current patched. I did locate the INSTALL script and added
a -x flag to see what is going on. (This is in the stock 2.2.0):

+ do_exit_on_error 
remove_R_package_dir=yes
+ test -z 
/net/gsun374/app/openpkg/lib/R-2.2.0-64bit/lib/R/bin/INSTALL: test: argument
expected

I think this line in do_exit_on_error causes an abend if bundlepkg isn't
set:

If test -z ${bundlepkg}; do

Cheers,
David Dean
----------------------------------------------------------------------
LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}


From ripley at stats.ox.ac.uk  Thu Oct 13 21:47:14 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Oct 2005 20:47:14 +0100 (BST)
Subject: [Rd] Installing R-2.2.0 package
In-Reply-To: <599089EF29304C44AF1D84B1C223AC63032EF569@groamrexm03.amer.pfizer.com>
References: <599089EF29304C44AF1D84B1C223AC63032EF569@groamrexm03.amer.pfizer.com>
Message-ID: <Pine.LNX.4.61.0510132046320.9129@gannet.stats>

On Thu, 13 Oct 2005, Dean, David P wrote:

>> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
>> Sent: Thursday, October 13, 2005 12:21 PM
>> To: Dean, David P
>> Cc: Uwe Ligges; r-devel at r-project.org; Paul Gilbert
>> Subject: Re: [Rd] Installing R-2.2.0 package
>>
>> On Thu, 13 Oct 2005, Dean, David P wrote:
>>
>>>> From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
>>>> Sent: Thursday, October 13, 2005 11:42 AM
>>>> To: Uwe Ligges
>>>> Cc: Paul Gilbert; r-devel at r-project.org; Dean, David P
>>>> Subject: Re: [Rd] Installing R-2.2.0 package
>>>>
>>>> It works on Solaris 8 for me, and this is checked as part of the
>>>> alpha/beta process.
>>>>
>>>> The code is the same on Linux and Solaris, after all, so this would
>> have
>>>> to be a Solaris shell bug.
>>>
>>> I'm on Solaris 8 as well. R is compiled for 64-bits, but I wouldn't
>> expect
>>> that to be a factor.
>>
>> I tested this on a 64-bit setup, as it happens.
>>
>>> R was built and is run in an environment created with
>>> OpenPKG and containing GNU equivalents to many utilities -- so it's not
>> a
>>> stock Solaris setup.
>>
>> I hope /bin/sh is Solaris and not bash.
>>
>>> I'm not familiar with R internals but will be happy to try to debug if I
>>> can. Does the installer call out to the shell somehow? Where would I
>> start
>>> to look for the relevant code?
>>
>> INSTALL _is_ a shell script.
>>
>> Rather than mess about with past code, can you first please try the
>> current R-patched (see the FAQ) as I will shortly not have R-2.2.0 on
>> Solaris but rather R-patched (I already have R-devel in 4 flavours).
>>
>>>
>>> Thanks!
>>> David Dean
>
> OK, I'll try the current patched. I did locate the INSTALL script and added
> a -x flag to see what is going on. (This is in the stock 2.2.0):
>
> + do_exit_on_error
> remove_R_package_dir=yes
> + test -z
> /net/gsun374/app/openpkg/lib/R-2.2.0-64bit/lib/R/bin/INSTALL: test: argument
> expected
>
> I think this line in do_exit_on_error causes an abend if bundlepkg isn't
> set:
>
> If test -z ${bundlepkg}; do

It is in R-patched, and indeed it has quotes too.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From lai at lindaspaces.com  Thu Oct 13 22:15:34 2005
From: lai at lindaspaces.com (Jennifer Lai)
Date: Thu, 13 Oct 2005 16:15:34 -0400
Subject: [Rd] Building R on Windows
In-Reply-To: <Pine.GSO.4.31.0510131344130.15462-100000@toucan.stats>
References: <Pine.GSO.4.31.0510131344130.15462-100000@toucan.stats>
Message-ID: <434EC066.7080406@lindaspaces.com>

Prof Brian Ripley wrote:

>On Thu, 13 Oct 2005, Jennifer Lai wrote:
>
>  
>
>>Hi,
>>  I"m a newbie on building R on Windows. I followed the instructions
>>cited here,
>>http://www.murdoch-sutherland.com/Rtools/ to build R-2.2.0.
>>Everything works fine up till when package base needs to be compiled.
>>here is the error message,
>>
>>---------- Making package base ------------
>> adding build stamp to DESCRIPTION
>>Error in library.dynam(lib, package, package.lib) :
>>       shared library 'tools' not found
>>Execution halted
>>make[4]: *** [frontmatter] Error 1
>>make[3]: *** [all] Error 2
>>make[2]: *** [pkg-base] Error 2
>>make[1]: *** [rpackage] Error 2
>>make: *** [all] Error 2
>>
>>Has anyone seen this error message before? Where can I find shared
>>library tools?
>>    
>>
>
>It was built at the bootstrapping phase, or should have been.
>
>  
>
Is there something like config.log for Windows port?
I didn't see anything suspcicious that helped me in finding where shared 
library tools should be built.
There were couple of warning messges related to dlapack, but these are 
not related to tools, right?

In file included from dlapack0.f:0:
dlapack0.f:203: warning: 'ipv' might be used uninitialized in this function
dlapack0.f:203: warning: 'jpv' might be used uninitialized in this function
dlapack0.f:204: warning: 'smin' might be used uninitialized in this function

Many Thanks,
Jennifer


From ripley at stats.ox.ac.uk  Thu Oct 13 22:55:06 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 13 Oct 2005 21:55:06 +0100 (BST)
Subject: [Rd] Building R on Windows
In-Reply-To: <434EC066.7080406@lindaspaces.com>
References: <Pine.GSO.4.31.0510131344130.15462-100000@toucan.stats>
	<434EC066.7080406@lindaspaces.com>
Message-ID: <Pine.LNX.4.61.0510132153520.9857@gannet.stats>

On Thu, 13 Oct 2005, Jennifer Lai wrote:

> Prof Brian Ripley wrote:
>
>> On Thu, 13 Oct 2005, Jennifer Lai wrote:
>> 
>> 
>>> Hi,
>>>  I"m a newbie on building R on Windows. I followed the instructions
>>> cited here,
>>> http://www.murdoch-sutherland.com/Rtools/ to build R-2.2.0.
>>> Everything works fine up till when package base needs to be compiled.
>>> here is the error message,
>>> 
>>> ---------- Making package base ------------
>>> adding build stamp to DESCRIPTION
>>> Error in library.dynam(lib, package, package.lib) :
>>>       shared library 'tools' not found
>>> Execution halted
>>> make[4]: *** [frontmatter] Error 1
>>> make[3]: *** [all] Error 2
>>> make[2]: *** [pkg-base] Error 2
>>> make[1]: *** [rpackage] Error 2
>>> make: *** [all] Error 2
>>> 
>>> Has anyone seen this error message before? Where can I find shared
>>> library tools?
>>> 
>> 
>> It was built at the bootstrapping phase, or should have been.
>> 
>> 
> Is there something like config.log for Windows port?

No.  You will need to start again and show us what happens around the boot 
it says it is bootstrapping.


> I didn't see anything suspcicious that helped me in finding where shared 
> library tools should be built.
> There were couple of warning messges related to dlapack, but these are not 
> related to tools, right?
>
> In file included from dlapack0.f:0:
> dlapack0.f:203: warning: 'ipv' might be used uninitialized in this function
> dlapack0.f:203: warning: 'jpv' might be used uninitialized in this function
> dlapack0.f:204: warning: 'smin' might be used uninitialized in this function

You will get many of those.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From lai at lindaspaces.com  Fri Oct 14 03:19:58 2005
From: lai at lindaspaces.com (Jennifer Lai)
Date: Thu, 13 Oct 2005 21:19:58 -0400
Subject: [Rd] Building R on Windows
In-Reply-To: <Pine.LNX.4.61.0510132153520.9857@gannet.stats>
References: <Pine.GSO.4.31.0510131344130.15462-100000@toucan.stats>
	<434EC066.7080406@lindaspaces.com>
	<Pine.LNX.4.61.0510132153520.9857@gannet.stats>
Message-ID: <434F07BE.1090609@lindaspaces.com>

Prof Brian Ripley wrote:

> On Thu, 13 Oct 2005, Jennifer Lai wrote:
>
>> Prof Brian Ripley wrote:
>>
>>> On Thu, 13 Oct 2005, Jennifer Lai wrote:
>>>
>>>
>>>> Hi,
>>>>  I"m a newbie on building R on Windows. I followed the instructions
>>>> cited here,
>>>> http://www.murdoch-sutherland.com/Rtools/ to build R-2.2.0.
>>>> Everything works fine up till when package base needs to be compiled.
>>>> here is the error message,
>>>>
>>>> ---------- Making package base ------------
>>>> adding build stamp to DESCRIPTION
>>>> Error in library.dynam(lib, package, package.lib) :
>>>>       shared library 'tools' not found
>>>> Execution halted
>>>> make[4]: *** [frontmatter] Error 1
>>>> make[3]: *** [all] Error 2
>>>> make[2]: *** [pkg-base] Error 2
>>>> make[1]: *** [rpackage] Error 2
>>>> make: *** [all] Error 2
>>>>
>>>> Has anyone seen this error message before? Where can I find shared
>>>> library tools?
>>>>
>>>
>>> It was built at the bootstrapping phase, or should have been.
>>>
>>>
>> Is there something like config.log for Windows port?
>
>
> No.  You will need to start again and show us what happens around the 
> boot it says it is bootstrapping.
>
>
>> I didn't see anything suspcicious that helped me in finding where 
>> shared library tools should be built.
>> There were couple of warning messges related to dlapack, but these 
>> are not related to tools, right?
>>
>> In file included from dlapack0.f:0:
>> dlapack0.f:203: warning: 'ipv' might be used uninitialized in this 
>> function
>> dlapack0.f:203: warning: 'jpv' might be used uninitialized in this 
>> function
>> dlapack0.f:204: warning: 'smin' might be used uninitialized in this 
>> function
>
>
> You will get many of those.
>
>
I was able to build R for Windows successfully with a clean copy of 
R-2.2.0, rather than using "make clean" to remove all object files.

Thanks,
Jennifer


From krcabrer at epm.net.co  Fri Oct 14 04:44:21 2005
From: krcabrer at epm.net.co (Kenneth Cabrera)
Date: Thu, 13 Oct 2005 21:44:21 -0500
Subject: [Rd] R in Spanish?
In-Reply-To: <434F07BE.1090609@lindaspaces.com>
References: <Pine.GSO.4.31.0510131344130.15462-100000@toucan.stats>
	<434EC066.7080406@lindaspaces.com>
	<Pine.LNX.4.61.0510132153520.9857@gannet.stats>
	<434F07BE.1090609@lindaspaces.com>
Message-ID: <434F1B85.6090900@epm.net.co>

Hi R developers:

I want to ask if there is a Spanish R installation,
if not, why not, and how can I help to
make the Spanish version, if you tell me how
I am willing to help with  it.

Kenneth

From goran.brostrom at gmail.com  Fri Oct 14 08:41:11 2005
From: goran.brostrom at gmail.com (=?UTF-8?Q?G=C3=B6ran_Brostr=C3=B6m?=)
Date: Fri, 14 Oct 2005 08:41:11 +0200
Subject: [Rd] expm1, R-2.2.0 and Windows
Message-ID: <148ed8180510132341o20efc8bel2a2c97a46795e569@mail.gmail.com>

A user of 'eha' told me that it failed to load in R-2.2.0 on Windows,
and ideed, I checked and it fails with the error message "The
procedure entry point expm1 could not be located in the dynamic link
libary R.dll". I'm using expm1 (from the C math library on Linux, I
would guess) in a couple of C functions.

This didn't happen with R-2.1.1 (and it doesn't happen with R-2.2.0 on
debian), so I need advise about what to do. File a bug report?

--
G?ran Brostr?m


From p.dalgaard at biostat.ku.dk  Fri Oct 14 08:50:05 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 14 Oct 2005 08:50:05 +0200
Subject: [Rd] R in Spanish?
In-Reply-To: <434F1B85.6090900@epm.net.co>
References: <Pine.GSO.4.31.0510131344130.15462-100000@toucan.stats>
	<434EC066.7080406@lindaspaces.com>
	<Pine.LNX.4.61.0510132153520.9857@gannet.stats>
	<434F07BE.1090609@lindaspaces.com> <434F1B85.6090900@epm.net.co>
Message-ID: <x2vf00pp7m.fsf@turmalin.kubism.ku.dk>

Kenneth Cabrera <krcabrer at epm.net.co> writes:

> Hi R developers:
> 
> I want to ask if there is a Spanish R installation,

http://developer.r-project.org/TranslationTeams.html

doesn't seem to have a Spanish team.

> if not, why not, 

well, someone has to write it.... I have been wondering about it,
since Spanish is one of the Worlds' largest languages (if not _the_
largest), with a substantial proportion of non-English speakers.

> and how can I help to
> make the Spanish version, 

There's a fairly elaborate set of beginners instructions to .po files
and all that, here:

http://developer.r-project.org/Translations.html

> if you tell me how
> I am willing to help with  it.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From ripley at stats.ox.ac.uk  Fri Oct 14 09:35:34 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 14 Oct 2005 08:35:34 +0100 (BST)
Subject: [Rd] expm1, R-2.2.0 and Windows
In-Reply-To: <148ed8180510132341o20efc8bel2a2c97a46795e569@mail.gmail.com>
References: <148ed8180510132341o20efc8bel2a2c97a46795e569@mail.gmail.com>
Message-ID: <Pine.LNX.4.61.0510140824190.19744@gannet.stats>

On Fri, 14 Oct 2005, [UTF-8] G?ran Brostr?m wrote:

> A user of 'eha' told me that it failed to load in R-2.2.0 on Windows,and 
> ideed, I checked and it fails with the error message "Theprocedure entry 
> point expm1 could not be located in the dynamic linklibary R.dll". I'm 
> using expm1 (from the C math library on Linux, Iwould guess) in a couple 
> of C functions.

> This didn't happen with R-2.1.1 (and it doesn't happen with R-2.2.0 
> ondebian), so I need advise about what to do. File a bug report?

Please do re-read the rw-FAQ Q4.1 for advice!

The eha binary on CRAN was built on Sept 12, before the release of 2.2.0
(and before the beta period).  It needs to be built under 2.2.0, when it 
will work.  (Uwe, could you please trigger rebuilds as some things were 
changed in the alpha period, including the version of the mingw-runtime 
that is required.)

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From goran.brostrom at gmail.com  Fri Oct 14 09:58:34 2005
From: goran.brostrom at gmail.com (=?UTF-8?Q?G=C3=B6ran_Brostr=C3=B6m?=)
Date: Fri, 14 Oct 2005 09:58:34 +0200
Subject: [Rd] expm1, R-2.2.0 and Windows
In-Reply-To: <Pine.LNX.4.61.0510140824190.19744@gannet.stats>
References: <148ed8180510132341o20efc8bel2a2c97a46795e569@mail.gmail.com>
	<Pine.LNX.4.61.0510140824190.19744@gannet.stats>
Message-ID: <148ed8180510140058p66f17295q24c6f3924cc4cf0b@mail.gmail.com>

On 10/14/05, Prof Brian Ripley <ripley at stats.ox.ac.uk> wrote:
> On Fri, 14 Oct 2005, [UTF-8] G?ran Brostr?m wrote:
>
> > A user of 'eha' told me that it failed to load in R-2.2.0 on Windows,and
> > ideed, I checked and it fails with the error message "Theprocedure entry
> > point expm1 could not be located in the dynamic linklibary R.dll". I'm
> > using expm1 (from the C math library on Linux, Iwould guess) in a couple
> > of C functions.
>
> > This didn't happen with R-2.1.1 (and it doesn't happen with R-2.2.0
> > ondebian), so I need advise about what to do. File a bug report?
>
> Please do re-read the rw-FAQ Q4.1 for advice!
>
> The eha binary on CRAN was built on Sept 12, before the release of 2.2.0
> (and before the beta period).  It needs to be built under 2.2.0, when it
> will work.  (Uwe, could you please trigger rebuilds as some things were
> changed in the alpha period, including the version of the mingw-runtime
> that is required.)

Thanks Brian, I'll do that ASAP!

G?ran

> --
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>


--
G?ran Brostr?m


From ernesto at ipimar.pt  Fri Oct 14 12:30:17 2005
From: ernesto at ipimar.pt (ernesto)
Date: Fri, 14 Oct 2005 11:30:17 +0100
Subject: [Rd] extending lattice to S4 classes
Message-ID: <434F88B9.1020600@ipimar.pt>

Hi,

I'm writing methods for a package called FLCore (see
http://flr-project.org/) in particular for a class called "FLQuant"
which extends array.

Previously I was able to write methods based on the class of "data" but
now I can not do it due to the single parameter "x". Is there a way to
do this ?

Regards

EJ


From ligges at statistik.uni-dortmund.de  Fri Oct 14 12:38:36 2005
From: ligges at statistik.uni-dortmund.de (Uwe Ligges)
Date: Fri, 14 Oct 2005 12:38:36 +0200
Subject: [Rd] expm1, R-2.2.0 and Windows
In-Reply-To: <Pine.LNX.4.61.0510140824190.19744@gannet.stats>
References: <148ed8180510132341o20efc8bel2a2c97a46795e569@mail.gmail.com>
	<Pine.LNX.4.61.0510140824190.19744@gannet.stats>
Message-ID: <434F8AAC.4050605@statistik.uni-dortmund.de>

Prof Brian Ripley wrote:

> On Fri, 14 Oct 2005, [UTF-8] G?ran Brostr?m wrote:
> 
>> A user of 'eha' told me that it failed to load in R-2.2.0 on 
>> Windows,and ideed, I checked and it fails with the error message 
>> "Theprocedure entry point expm1 could not be located in the dynamic 
>> linklibary R.dll". I'm using expm1 (from the C math library on Linux, 
>> Iwould guess) in a couple of C functions.
> 
> 
>> This didn't happen with R-2.1.1 (and it doesn't happen with R-2.2.0 
>> ondebian), so I need advise about what to do. File a bug report?
> 
> 
> Please do re-read the rw-FAQ Q4.1 for advice!
> 
> The eha binary on CRAN was built on Sept 12, before the release of 2.2.0
> (and before the beta period).  It needs to be built under 2.2.0, when it 
> will work.  (Uwe, could you please trigger rebuilds as some things were 
> changed in the alpha period, including the version of the mingw-runtime 
> that is required.)

Thanks for the pointer!
Hmmm, thought I did so after the release, but apparently not (most 
outdated builds are from 2005-09-11, hence a version of R-2.2.0 alpha).

eha has been rebuild now and will appear on CRAN master within 24 hours.

I will trigger rebuilds for the other packages as well, but it will take 
its time (don't expect any change on CRAN within 24 hours).

Nice occasion: Package mainatiner of failing packages will receive (yet 
another) message that some action is required ...

Uwe



> 
> ------------------------------------------------------------------------
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch at stats.uwo.ca  Fri Oct 14 12:45:38 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 14 Oct 2005 06:45:38 -0400
Subject: [Rd] Building R on Windows
In-Reply-To: <434F07BE.1090609@lindaspaces.com>
References: <Pine.GSO.4.31.0510131344130.15462-100000@toucan.stats>	<434EC066.7080406@lindaspaces.com>	<Pine.LNX.4.61.0510132153520.9857@gannet.stats>
	<434F07BE.1090609@lindaspaces.com>
Message-ID: <434F8C52.10106@stats.uwo.ca>

Jennifer Lai wrote:
> Prof Brian Ripley wrote:
> 
> 
>>On Thu, 13 Oct 2005, Jennifer Lai wrote:
>>
>>
>>>Prof Brian Ripley wrote:
>>>
>>>
>>>>On Thu, 13 Oct 2005, Jennifer Lai wrote:
>>>>
>>>>
>>>>
>>>>>Hi,
>>>>> I"m a newbie on building R on Windows. I followed the instructions
>>>>>cited here,
>>>>>http://www.murdoch-sutherland.com/Rtools/ to build R-2.2.0.
>>>>>Everything works fine up till when package base needs to be compiled.
>>>>>here is the error message,
>>>>>
>>>>>---------- Making package base ------------
>>>>>adding build stamp to DESCRIPTION
>>>>>Error in library.dynam(lib, package, package.lib) :
>>>>>      shared library 'tools' not found
>>>>>Execution halted
>>>>>make[4]: *** [frontmatter] Error 1
>>>>>make[3]: *** [all] Error 2
>>>>>make[2]: *** [pkg-base] Error 2
>>>>>make[1]: *** [rpackage] Error 2
>>>>>make: *** [all] Error 2
>>>>>
>>>>>Has anyone seen this error message before? Where can I find shared
>>>>>library tools?
>>>>>
>>>>
>>>>It was built at the bootstrapping phase, or should have been.
>>>>
>>>>
>>>
>>>Is there something like config.log for Windows port?
>>
>>
>>No.  You will need to start again and show us what happens around the 
>>boot it says it is bootstrapping.
>>
>>
>>
>>>I didn't see anything suspcicious that helped me in finding where 
>>>shared library tools should be built.
>>>There were couple of warning messges related to dlapack, but these 
>>>are not related to tools, right?
>>>
>>>In file included from dlapack0.f:0:
>>>dlapack0.f:203: warning: 'ipv' might be used uninitialized in this 
>>>function
>>>dlapack0.f:203: warning: 'jpv' might be used uninitialized in this 
>>>function
>>>dlapack0.f:204: warning: 'smin' might be used uninitialized in this 
>>>function
>>
>>
>>You will get many of those.
>>
>>
> 
> I was able to build R for Windows successfully with a clean copy of 
> R-2.2.0, rather than using "make clean" to remove all object files.

Generally to start over after important changes you'll need "make 
distclean".  "make clean" is intended to be used at the end of a build, 
to remove unnecessary files, but to leave all the important parts in 
place.  Since some of those parts are used in the build process (and in 
your case one of them was not built correctly), make clean wasn't enough.

Duncan Murdoch


From murdoch at stats.uwo.ca  Fri Oct 14 13:52:20 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Fri, 14 Oct 2005 07:52:20 -0400
Subject: [Rd] R in Spanish?
In-Reply-To: <434F1B85.6090900@epm.net.co>
References: <Pine.GSO.4.31.0510131344130.15462-100000@toucan.stats>	<434EC066.7080406@lindaspaces.com>	<Pine.LNX.4.61.0510132153520.9857@gannet.stats>	<434F07BE.1090609@lindaspaces.com>
	<434F1B85.6090900@epm.net.co>
Message-ID: <434F9BF4.6030004@stats.uwo.ca>

Kenneth Cabrera wrote:
> Hi R developers:
> 
> I want to ask if there is a Spanish R installation,
> if not, why not, and how can I help to
> make the Spanish version, if you tell me how
> I am willing to help with  it.

There isn't currently a Spanish translation.  Instructions on how to do 
translations are on the web page 
<http://developer.r-project.org/Translations.html>.  If you want to 
organize a Spanish translation team, I could list your name and contact 
information on <http://developer.r-project.org/TranslationTeams.html>.

Duncan Murdoch


From rkrug at sun.ac.za  Fri Oct 14 14:09:55 2005
From: rkrug at sun.ac.za (Rainer M Krug)
Date: Fri, 14 Oct 2005 14:09:55 +0200
Subject: [Rd] Compilation of R-2.2.0 under SUSE 10
Message-ID: <200510141409.55638.rkrug@sun.ac.za>

Hi

I hope this is the right list for the question.
I want to install R from source under SUSE 10. When executing ./Configure, I 
get the following error message:

checking for xmkmf... /usr/X11R6/bin/xmkmf
configure: WARNING: I could not determine FPICFLAGS.
configure: error: See the file INSTALL for more information.

and it taborts. Consequently, make does not work.

Any ideas?

Rainer


From p.dalgaard at biostat.ku.dk  Fri Oct 14 14:19:48 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 14 Oct 2005 14:19:48 +0200
Subject: [Rd] Compilation of R-2.2.0 under SUSE 10
In-Reply-To: <200510141409.55638.rkrug@sun.ac.za>
References: <200510141409.55638.rkrug@sun.ac.za>
Message-ID: <x28xwwthnf.fsf@viggo.kubism.ku.dk>

Rainer M Krug <rkrug at sun.ac.za> writes:

> Hi
> 
> I hope this is the right list for the question.
> I want to install R from source under SUSE 10. When executing ./Configure, I 
> get the following error message:
> 
> checking for xmkmf... /usr/X11R6/bin/xmkmf
> configure: WARNING: I could not determine FPICFLAGS.
> configure: error: See the file INSTALL for more information.
> 
> and it taborts. Consequently, make does not work.
> 
> Any ideas?

You probably want to look into config.log and see what caused the
FPICFLAGS message. It could be an oblique way of telling you that you
haven't installed a Fortran compiler.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From rkrug at sun.ac.za  Fri Oct 14 14:48:26 2005
From: rkrug at sun.ac.za (Rainer M Krug)
Date: Fri, 14 Oct 2005 14:48:26 +0200
Subject: [Rd] Compilation of R-2.2.0 under SUSE 10
In-Reply-To: <x28xwwthnf.fsf@viggo.kubism.ku.dk>
References: <200510141409.55638.rkrug@sun.ac.za>
	<x28xwwthnf.fsf@viggo.kubism.ku.dk>
Message-ID: <200510141448.26918.>

Could you give me a hint what I should look for? I am quite new to Linux.

Rainer


On Friday 14 October 2005 14:19, Peter Dalgaard wrote:
> Rainer M Krug <rkrug at sun.ac.za> writes:
> > Hi
> >
> > I hope this is the right list for the question.
> > I want to install R from source under SUSE 10. When executing
> > ./Configure, I get the following error message:
> >
> > checking for xmkmf... /usr/X11R6/bin/xmkmf
> > configure: WARNING: I could not determine FPICFLAGS.
> > configure: error: See the file INSTALL for more information.
> >
> > and it taborts. Consequently, make does not work.
> >
> > Any ideas?
>
> You probably want to look into config.log and see what caused the
> FPICFLAGS message. It could be an oblique way of telling you that you
> haven't installed a Fortran compiler.


From p.dalgaard at biostat.ku.dk  Fri Oct 14 15:30:21 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 14 Oct 2005 15:30:21 +0200
Subject: [Rd] Compilation of R-2.2.0 under SUSE 10
In-Reply-To: <200510141448.26918.>
References: <200510141409.55638.rkrug@sun.ac.za>
	<x28xwwthnf.fsf@viggo.kubism.ku.dk> <200510141448.26918.>
Message-ID: <x2y84wrzte.fsf@viggo.kubism.ku.dk>

Rainer M Krug <rkrug at sun.ac.za> writes:

> Could you give me a hint what I should look for? I am quite new to Linux.
> 
> Rainer

As long as you can see where it goes wrong, just ask again, citing the
relevant bit of the log. Finding this is a bit convoluted for the
FPICFLAGS issue because the failing test is just for whether the
variable was set earlier, which AFAICS should happen here:


## Step 2.  GNU compilers.
if test "${GCC}" = yes; then
  cpicflags="-fPIC"
  shlib_ldflags="-shared"
fi
if test "${G77}" = yes; then
  fpicflags="-fPIC"
fi
if test "${GXX}" = yes; then
  cxxpicflags="-fPIC"
  shlib_cxxldflags="-shared"
fi

Now, the natural guess is that ${G77} wasn't set earlier on, so look
for the place where it figures out the Fortran compiler.

 
> 
> On Friday 14 October 2005 14:19, Peter Dalgaard wrote:
> > Rainer M Krug <rkrug at sun.ac.za> writes:
> > > Hi
> > >
> > > I hope this is the right list for the question.
> > > I want to install R from source under SUSE 10. When executing
> > > ./Configure, I get the following error message:
> > >
> > > checking for xmkmf... /usr/X11R6/bin/xmkmf
> > > configure: WARNING: I could not determine FPICFLAGS.
> > > configure: error: See the file INSTALL for more information.
> > >
> > > and it taborts. Consequently, make does not work.
> > >
> > > Any ideas?
> >
> > You probably want to look into config.log and see what caused the
> > FPICFLAGS message. It could be an oblique way of telling you that you
> > haven't installed a Fortran compiler.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From detlef.steuer at hsu-hamburg.de  Fri Oct 14 15:37:48 2005
From: detlef.steuer at hsu-hamburg.de (Detlef Steuer)
Date: Fri, 14 Oct 2005 15:37:48 +0200
Subject: [Rd] Compilation of R-2.2.0 under SUSE 10
In-Reply-To: <200510141448.26918.>
References: <200510141409.55638.rkrug@sun.ac.za>
	<x28xwwthnf.fsf@viggo.kubism.ku.dk> <200510141448.26918.>
Message-ID: <20051014153748.079ee02b.detlef.steuer@hsu-hamburg.de>

Hi,

most probably you are missing xorg-devel packages.
But there is another problem:
At least the downloadable version of 10.0 does not contain _any_ fortran compiler. At least I?m unable to find one.
I don`t know about the retail box. 

Still looking for an easy way to build an rpm package for 10.0 using some additional yast sources.

Hope that helps
Detlef

On Fri, 14 Oct 2005 14:48:26 +0200
Rainer M Krug <rkrug at sun.ac.za> wrote:

> Could you give me a hint what I should look for? I am quite new to Linux.
> 
> Rainer
> 
> 
> On Friday 14 October 2005 14:19, Peter Dalgaard wrote:
> > Rainer M Krug <rkrug at sun.ac.za> writes:
> > > Hi
> > >
> > > I hope this is the right list for the question.
> > > I want to install R from source under SUSE 10. When executing
> > > ./Configure, I get the following error message:
> > >
> > > checking for xmkmf... /usr/X11R6/bin/xmkmf
> > > configure: WARNING: I could not determine FPICFLAGS.
> > > configure: error: See the file INSTALL for more information.
> > >
> > > and it taborts. Consequently, make does not work.
> > >
> > > Any ideas?
> >
> > You probably want to look into config.log and see what caused the
> > FPICFLAGS message. It could be an oblique way of telling you that you
> > haven't installed a Fortran compiler.
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From rkrug at sun.ac.za  Fri Oct 14 16:08:36 2005
From: rkrug at sun.ac.za (Rainer M Krug)
Date: Fri, 14 Oct 2005 16:08:36 +0200
Subject: [Rd] Compilation of R-2.2.0 under SUSE 10
In-Reply-To: <x2y84wrzte.fsf@viggo.kubism.ku.dk>
References: <200510141409.55638.rkrug@sun.ac.za> <200510141448.26918.>
	<x2y84wrzte.fsf@viggo.kubism.ku.dk>
Message-ID: <200510141608.36500.rkrug@sun.ac.za>

Hi

I solved the problem.

I hd a fortran compuiler installed and it is found:

configure:5331: g77 --version </dev/null >&5
GNU Fortran (GCC) 3.3.5 20050117 (prerelease) (SUSE Linux)
Copyright (C) 2002 Free Software Foundation, Inc.

butr it was not working. I installed another fortran compiler (gccfortran) and 
it worked.

Thanks a lot for your help Peter

Rainer


On Friday 14 October 2005 15:30, Peter Dalgaard wrote:
> Rainer M Krug <rkrug at sun.ac.za> writes:
> > Could you give me a hint what I should look for? I am quite new to Linux.
> >
> > Rainer
>
> As long as you can see where it goes wrong, just ask again, citing the
> relevant bit of the log. Finding this is a bit convoluted for the
> FPICFLAGS issue because the failing test is just for whether the
> variable was set earlier, which AFAICS should happen here:
>
>
> ## Step 2.  GNU compilers.
> if test "${GCC}" = yes; then
>   cpicflags="-fPIC"
>   shlib_ldflags="-shared"
> fi
> if test "${G77}" = yes; then
>   fpicflags="-fPIC"
> fi
> if test "${GXX}" = yes; then
>   cxxpicflags="-fPIC"
>   shlib_cxxldflags="-shared"
> fi
>
> Now, the natural guess is that ${G77} wasn't set earlier on, so look
> for the place where it figures out the Fortran compiler.
>
> > On Friday 14 October 2005 14:19, Peter Dalgaard wrote:
> > > Rainer M Krug <rkrug at sun.ac.za> writes:
> > > > Hi
> > > >
> > > > I hope this is the right list for the question.
> > > > I want to install R from source under SUSE 10. When executing
> > > > ./Configure, I get the following error message:
> > > >
> > > > checking for xmkmf... /usr/X11R6/bin/xmkmf
> > > > configure: WARNING: I could not determine FPICFLAGS.
> > > > configure: error: See the file INSTALL for more information.
> > > >
> > > > and it taborts. Consequently, make does not work.
> > > >
> > > > Any ideas?
> > >
> > > You probably want to look into config.log and see what caused the
> > > FPICFLAGS message. It could be an oblique way of telling you that you
> > > haven't installed a Fortran compiler.
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel


From rkrug at sun.ac.za  Fri Oct 14 16:14:29 2005
From: rkrug at sun.ac.za (Rainer M Krug)
Date: Fri, 14 Oct 2005 16:14:29 +0200
Subject: [Rd] Compilation of R-2.2.0 under SUSE 10
In-Reply-To: <20051014153748.079ee02b.detlef.steuer@hsu-hamburg.de>
References: <200510141409.55638.rkrug@sun.ac.za> <200510141448.26918.>
	<20051014153748.079ee02b.detlef.steuer@hsu-hamburg.de>
Message-ID: <200510141614.30267.rkrug@sun.ac.za>

As I wrote in my other email, I solved the problem and it is make'ing.

I agree - on the CD's there is no fortran compiler. I found it on a mirror of 
OpenSuse - including many more.

Concerning the rpm I don't know - never did it (anyway - that's my first 
compile under Linux...).

Rainer


On Friday 14 October 2005 15:37, Detlef Steuer wrote:
> Hi,
>
> most probably you are missing xorg-devel packages.
> But there is another problem:
> At least the downloadable version of 10.0 does not contain _any_ fortran
> compiler. At least I?m unable to find one. I don`t know about the retail
> box.
>
> Still looking for an easy way to build an rpm package for 10.0 using some
> additional yast sources.
>
> Hope that helps
> Detlef
>
> On Fri, 14 Oct 2005 14:48:26 +0200
>
> Rainer M Krug <rkrug at sun.ac.za> wrote:
> > Could you give me a hint what I should look for? I am quite new to Linux.
> >
> > Rainer
> >
> > On Friday 14 October 2005 14:19, Peter Dalgaard wrote:
> > > Rainer M Krug <rkrug at sun.ac.za> writes:
> > > > Hi
> > > >
> > > > I hope this is the right list for the question.
> > > > I want to install R from source under SUSE 10. When executing
> > > > ./Configure, I get the following error message:
> > > >
> > > > checking for xmkmf... /usr/X11R6/bin/xmkmf
> > > > configure: WARNING: I could not determine FPICFLAGS.
> > > > configure: error: See the file INSTALL for more information.
> > > >
> > > > and it taborts. Consequently, make does not work.
> > > >
> > > > Any ideas?
> > >
> > > You probably want to look into config.log and see what caused the
> > > FPICFLAGS message. It could be an oblique way of telling you that you
> > > haven't installed a Fortran compiler.
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel


From p.dalgaard at biostat.ku.dk  Fri Oct 14 16:19:44 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 14 Oct 2005 16:19:44 +0200
Subject: [Rd] Compilation of R-2.2.0 under SUSE 10
In-Reply-To: <20051014153748.079ee02b.detlef.steuer@hsu-hamburg.de>
References: <200510141409.55638.rkrug@sun.ac.za>
	<x28xwwthnf.fsf@viggo.kubism.ku.dk> <200510141448.26918.>
	<20051014153748.079ee02b.detlef.steuer@hsu-hamburg.de>
Message-ID: <x2u0fkrxj3.fsf@viggo.kubism.ku.dk>

Detlef Steuer <detlef.steuer at hsu-hamburg.de> writes:

> Hi,
> 
> most probably you are missing xorg-devel packages.
> But there is another problem:
> At least the downloadable version of 10.0 does not contain _any_ fortran compiler. At least I?m unable to find one.
> I don`t know about the retail box. 
> 
> Still looking for an easy way to build an rpm package for 10.0 using some additional yast sources.

Hmm. What's wrong with 

http://ftp.opensuse.org/pub/opensuse/distribution/SL-10.0-OSS/inst-source/suse/x86_64/gcc-fortran-4.0.2_20050901-3.x86_64.rpm

?

        -p

 
> Hope that helps
> Detlef
> 
> On Fri, 14 Oct 2005 14:48:26 +0200
> Rainer M Krug <rkrug at sun.ac.za> wrote:
> 
> > Could you give me a hint what I should look for? I am quite new to Linux.
> > 
> > Rainer
> > 
> > 
> > On Friday 14 October 2005 14:19, Peter Dalgaard wrote:
> > > Rainer M Krug <rkrug at sun.ac.za> writes:
> > > > Hi
> > > >
> > > > I hope this is the right list for the question.
> > > > I want to install R from source under SUSE 10. When executing
> > > > ./Configure, I get the following error message:
> > > >
> > > > checking for xmkmf... /usr/X11R6/bin/xmkmf
> > > > configure: WARNING: I could not determine FPICFLAGS.
> > > > configure: error: See the file INSTALL for more information.
> > > >
> > > > and it taborts. Consequently, make does not work.
> > > >
> > > > Any ideas?
> > >
> > > You probably want to look into config.log and see what caused the
> > > FPICFLAGS message. It could be an oblique way of telling you that you
> > > haven't installed a Fortran compiler.
> > 
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From ernesto at ipimar.pt  Fri Oct 14 18:11:46 2005
From: ernesto at ipimar.pt (ernesto)
Date: Fri, 14 Oct 2005 17:11:46 +0100
Subject: [Rd] extending lattice to S4 classes
In-Reply-To: <434F88B9.1020600@ipimar.pt>
References: <434F88B9.1020600@ipimar.pt>
Message-ID: <434FD8C2.205@ipimar.pt>

ernesto wrote:

>Hi,
>
>I'm writing methods for a package called FLCore (see
>http://flr-project.org/) in particular for a class called "FLQuant"
>which extends array.
>
>Previously I was able to write methods based on the class of "data" but
>now I can not do it due to the single parameter "x". Is there a way to
>do this ?
>
>Regards
>
>EJ
>
>______________________________________________
>R-devel at r-project.org mailing list
>https://stat.ethz.ch/mailman/listinfo/r-devel
>  
>

Hi,

I found an hack (see below) to make it work but it's terrible and hugly
... some suggestions are welcome. It simply tests if data belongs to
class "FLQuant" and transforms it into a data.frame before ploting.

Regards

EJ

if (!isGeneric("xyplot")) {
    setGeneric("xyplot", useAsDefault = xyplot)
}


setMethod("xyplot", signature("formula"), function(x, ...){

    dots <- list(...)
    if(class(dots$data)=="FLQuant") dots$data <- as.data.frame(dots$data)
    call.list <- c(x = x, dots)
   
# needed this to avoid an infinite loop because xyplot is defined only
for "x"
    xyplot <- lattice::xyplot   
    ans <- do.call("xyplot", call.list)
    ans$call <- match.call()
    ans

})


From pgilbert at bank-banque-canada.ca  Fri Oct 14 18:49:54 2005
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 14 Oct 2005 12:49:54 -0400
Subject: [Rd] checking S3 generic/method consistency
Message-ID: <434FE1B2.7010206@bank-banque-canada.ca>

In R-2.2.0,  how does   "checking S3 generic/method consistency"  
determine which generic to check against when there are two?  I have a 
generic "simulate" in dse1 and there is a new generic "simulate" in 
stats, and I don't seem to be able to get  my simulate methods to be 
checked consistently against one or the other. Is this deteremined by 
Depends in the DESCRIPTION file, the NAMESPACE, or something else?

Paul Gilbert


From ripley at stats.ox.ac.uk  Sat Oct 15 09:02:56 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 15 Oct 2005 08:02:56 +0100 (BST)
Subject: [Rd] extending lattice to S4 classes
In-Reply-To: <434FD8C2.205@ipimar.pt>
References: <434F88B9.1020600@ipimar.pt> <434FD8C2.205@ipimar.pt>
Message-ID: <Pine.LNX.4.61.0510150758480.27345@gannet.stats>

I think you are confusing us:  xyplot is an S3 generic with no 'data' 
argument.  It is xyplot.formula that you want to add dispatch on its 
'data' argument.  I don't really see why you want to mix S3 and S4 
systems, but you could make xyplot.formula an S3 or S4 generic and 
dispatch on 'data', just as you did earlier with xyplot.

Other xyplot methods need not (and probably do not) have a 'data' 
argument.

On Fri, 14 Oct 2005, ernesto wrote:

> ernesto wrote:
>
>> Hi,
>>
>> I'm writing methods for a package called FLCore (see
>> http://flr-project.org/) in particular for a class called "FLQuant"
>> which extends array.
>>
>> Previously I was able to write methods based on the class of "data" but
>> now I can not do it due to the single parameter "x". Is there a way to
>> do this ?

> I found an hack (see below) to make it work but it's terrible and hugly
> ... some suggestions are welcome. It simply tests if data belongs to
> class "FLQuant" and transforms it into a data.frame before ploting.
>
> Regards
>
> EJ
>
> if (!isGeneric("xyplot")) {
>    setGeneric("xyplot", useAsDefault = xyplot)
> }
>
>
> setMethod("xyplot", signature("formula"), function(x, ...){
>
>    dots <- list(...)
>    if(class(dots$data)=="FLQuant") dots$data <- as.data.frame(dots$data)
>    call.list <- c(x = x, dots)
>
> # needed this to avoid an infinite loop because xyplot is defined only
> for "x"
>    xyplot <- lattice::xyplot
>    ans <- do.call("xyplot", call.list)
>    ans$call <- match.call()
>    ans
>
> })

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From detlef.steuer at hsu-hamburg.de  Sat Oct 15 11:22:42 2005
From: detlef.steuer at hsu-hamburg.de (Detlef Steuer)
Date: Sat, 15 Oct 2005 11:22:42 +0200
Subject: [Rd] Compilation of R-2.2.0 under SUSE 10
In-Reply-To: <x2u0fkrxj3.fsf@viggo.kubism.ku.dk>
References: <200510141409.55638.rkrug@sun.ac.za>
	<x28xwwthnf.fsf@viggo.kubism.ku.dk> <200510141448.26918.>
	<20051014153748.079ee02b.detlef.steuer@hsu-hamburg.de>
	<x2u0fkrxj3.fsf@viggo.kubism.ku.dk>
Message-ID: <20051015112242.32245e1e.detlef.steuer@hsu-hamburg.de>

On 14 Oct 2005 16:19:44 +0200
Peter Dalgaard <p.dalgaard at biostat.ku.dk> wrote:

> Detlef Steuer <detlef.steuer at hsu-hamburg.de> writes:
> 
> > Hi,
> > 
> > most probably you are missing xorg-devel packages.
> > But there is another problem:
> > At least the downloadable version of 10.0 does not contain _any_
> > fortran compiler. At least I?m unable to find one. I don`t know
> > about the retail box. 
> > 
> > Still looking for an easy way to build an rpm package for 10.0 using
> > some additional yast sources.
> 
> Hmm. What's wrong with 
> 
> http://ftp.opensuse.org/pub/opensuse/distribution/SL-10.0-OSS/inst-source/suse/x86_64/gcc-fortran-4.0.2_20050901-3.x86_64.rpm
> 
> ?

Nothing, as far as I can see!
Thx for the hint. Don`t know why I missed it.

Detlef


> 
>         -p
> 
>  
> > Hope that helps
> > Detlef
> > 
> > On Fri, 14 Oct 2005 14:48:26 +0200
> > Rainer M Krug <rkrug at sun.ac.za> wrote:
> > 
> > > Could you give me a hint what I should look for? I am quite new to
> > > Linux.
> > > 
> > > Rainer
> > > 
> > > 
> > > On Friday 14 October 2005 14:19, Peter Dalgaard wrote:
> > > > Rainer M Krug <rkrug at sun.ac.za> writes:
> > > > > Hi
> > > > >
> > > > > I hope this is the right list for the question.
> > > > > I want to install R from source under SUSE 10. When executing
> > > > > ./Configure, I get the following error message:
> > > > >
> > > > > checking for xmkmf... /usr/X11R6/bin/xmkmf
> > > > > configure: WARNING: I could not determine FPICFLAGS.
> > > > > configure: error: See the file INSTALL for more information.
> > > > >
> > > > > and it taborts. Consequently, make does not work.
> > > > >
> > > > > Any ideas?
> > > >
> > > > You probably want to look into config.log and see what caused
> > > > the FPICFLAGS message. It could be an oblique way of telling you
> > > > that you haven't installed a Fortran compiler.
> > > 
> > > ______________________________________________
> > > R-devel at r-project.org mailing list
> > > https://stat.ethz.ch/mailman/listinfo/r-devel
> > 
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> > 
> 
> -- 
>    O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
>   c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
>  (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45)
>  35327918
> ~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45)
> 35327907
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
"Keinen Gedanken zweimal denken, au?er er ist sch?n." Unbekannte Quelle


From phgrosjean at sciviews.org  Sat Oct 15 14:50:17 2005
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Sat, 15 Oct 2005 14:50:17 +0200
Subject: [Rd] R GUI considerations (was: R, Wine, and multi-threadedness)
Message-ID: <4350FB09.3020503@sciviews.org>

Hello,

Following a discussion initiated on r-devel, that mentions SciViews-R 
and other GUIs issues for R, I would like to make comments (and would be 
happy if these comments would initiate interesting initiatives).

A big, big problem with SciViews-R is that a part of it is written in 
Visual Basic 6, a M$$$$ language, not supported any more, buggy, non 
transposable to other platforms, etc, etc. Last year, I started to 
rewrite SciViews-R, using much more native R code, which will ultimately 
give what I call a "R GUI API", currently partly implemented in the 
SciViews bundle available on CRAN. That "R GUI API" is a lot of work: 
thousands of lines of code for the full API, and as I said, only a part 
of it is currently implemented. That API is developed with reusability 
in mind: platform-independent, better basis to rewrite SciViews-R in a 
different language, and freely available for use by other GUIs. However, 
nobody seems to be interested by this API (may be because it is not 
documented enough?). Even simple functions like progress() in the svMisc 
package are ignored, although they could be useful to some people. Well, 
I regret this situation, but I don't care much more than that: after 
all, the main goal is to make it the basis of the future 
platform-independent implementation of SciViews-R.

Now, regarding the rewritting of SciViews-R itself in a 
platform-independent environment (i.e., language + graphical widget), 
this is not undertaken currently for the reason I am not satisfied 
enough with all curerently existing solutions for various reasons. I 
give just a few explanations here:

1) R + Tcl + Tk. The tcltk R package is widely available and largely 
debugged. However, there are still problems to make a 100% Tcl console 
for R (look at Peter Dalgaard's attempt in the package, not complete, 
not 100% operational, currently). Another problem: the Tk widgets are a 
little bit old-fashion, and I miss a lot of features provided by more 
advanded graphical widgets like wxWidgets, for instance. However, it 
seems to be the best bet, currently. So, I explore various kinds of 
additions that could make Tcl + Tk a better and more modern GUI 
implementation. Look at http://www.sciviews.org/SciViews-R... the 
"tcltk2" package. In that package, I add "Tile", a series of themable 
and more modern widgets, the famous "tkTable", a tooltip widget, a text 
widget with synthax colouring, a tree widget, etc. + some Windows 
specific stuff that help regarding problems like focusing on a Tk 
window, and communicating with other apps. However, I face the problem 
of installing all these additional widgets seemlessly under all 
paltforms supported by R. For the pure Tcl widgets, no problems. But for 
widgets with compiled code, like Tile or tkTable, this is much more 
difficult... And since I mainly work on Windows...

2) wxWidgets. This is a really great, very capable and 
platform-independent solution. I like very much James Wettenhal attemps 
of using wxPython (wxWidgets + Python) through RSPython and the 
experimental wxPython R package. However, it is still alpha, there are 
problems to finalize it, and his author is not continuing its 
development for reasons that are personal to him. So, I am not sure we 
will have a usable version available soon to integrate wxWidgets with R 
and use it for a R GUI.

3) JAVA. There is a good R GUI written in JAVA: JGR. Moreover, something 
like the Eclipse platform is a very promizing environment for a 
rich-featured R IDE. JAVA specialists in my University say such a GUI, 
written in JAVA will be relatively slow compared to other solutions. 
However, JGR is a good actual counter-example.

4) GTK2. Great widgets... but forgets Windows. I installed and used Gimp 
under Windows. This is certainly the best demonstration on what can be 
done with GTK2 under Windows. I must admit I am very disappointed as a 
Windows user: look&feel is very different, and irritating in several 
aspects.

So, a long mail to conclude that, if I still haven't started to 
implement the platform-independent version of SciViews-R, it is because 
I am not convinced that any of the currently available R + rich-featured 
and platform-independent widgets solutions available is the one that 
will make it possible to reimplement SciViews-R in a streamless and 
relatively bug-free manner. To summarize, the currently best candidate 
is R + tcltk + tcltk2. I am convinced that R + Python + wxWidgets is by 
far a much better solution, but it is still in alpha development. 
Eclipse + JGR looks promising, and GTK2 is there too, but not enough 
integrated under Windows for me to start using such a solution, as a 
Windows user.

I don't have much time to dedicate to SciViews-R and to the Sciviews R 
GUI API for the moment, and I will certainly focus on four hot topics: 
(1) developing the actual SciViews-R as a better teaching aid (I use and 
need it for my own courses!), (2) contributing to the development of 
Tinn-R, (3) further integrating R Commander with SciViews-R, and (4) 
integrating Rpad with SciViews-R. However, I will have various contracts 
in 2006-2007 where the development of SciViews-R is a part of the job. 
So, I will have the opportunity to hire one or two developers, and this 
will hopefully speed up SciViews-R development in a directly that will 
satisfy more users.

Otherwise, I am open to any suggestion, and more importantly, to any 
idea of collaboration with other R GUI developers, as it is currently 
the case with John Fox (R Commander integration with SciViews-R), 
Jose-Claudio Faria (Tinn-R developement and Tinn-R compatibility with 
SciViews-R), and Tom Short (Rpad developments and compatibility with 
SciViews-R). I think it is important to insist on this, in a world 
populated with a myriad of slowly developed, half finished, half 
featured R GUIs, made by people that look too individualist in my view 
to be able of working all together and to write a single R GUI that has 
any chance to be full-featured, well-documented, reasonnably bug-free, 
truly platform-independent, in a near future.

Best,

Philippe Grosjean

..............................................<?}))><........
  ) ) ) ) )
( ( ( ( (    Prof. Philippe Grosjean
  ) ) ) ) )
( ( ( ( (    Numerical Ecology of Aquatic Systems
  ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
  ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
( ( ( ( (
  ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
  ) ) ) ) )
( ( ( ( (    web:   http://www.umh.ac.be/~econum
  ) ) ) ) )          http://www.sciviews.org
( ( ( ( (
..............................................................


From ggrothendieck at gmail.com  Sat Oct 15 15:49:04 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 15 Oct 2005 09:49:04 -0400
Subject: [Rd] R GUI considerations (was: R, Wine, and multi-threadedness)
In-Reply-To: <4350FB09.3020503@sciviews.org>
References: <4350FB09.3020503@sciviews.org>
Message-ID: <971536df0510150649k22bdf047uf2ac6106bea1120b@mail.gmail.com>

The preferred solutions in the post all seem to involve another language:

- tcl to use tk
- Python to use wxWidgets

and other solutions mentioned also seem to involve other languages:

- Visual Basic
- Java (Swing?)

Is there some key missing feature in R with regards to GUIs
that requires interposing another language?

On 10/15/05, Philippe Grosjean <phgrosjean at sciviews.org> wrote:
> Hello,
>
> Following a discussion initiated on r-devel, that mentions SciViews-R
> and other GUIs issues for R, I would like to make comments (and would be
> happy if these comments would initiate interesting initiatives).
>
> A big, big problem with SciViews-R is that a part of it is written in
> Visual Basic 6, a M$$$$ language, not supported any more, buggy, non
> transposable to other platforms, etc, etc. Last year, I started to
> rewrite SciViews-R, using much more native R code, which will ultimately
> give what I call a "R GUI API", currently partly implemented in the
> SciViews bundle available on CRAN. That "R GUI API" is a lot of work:
> thousands of lines of code for the full API, and as I said, only a part
> of it is currently implemented. That API is developed with reusability
> in mind: platform-independent, better basis to rewrite SciViews-R in a
> different language, and freely available for use by other GUIs. However,
> nobody seems to be interested by this API (may be because it is not
> documented enough?). Even simple functions like progress() in the svMisc
> package are ignored, although they could be useful to some people. Well,
> I regret this situation, but I don't care much more than that: after
> all, the main goal is to make it the basis of the future
> platform-independent implementation of SciViews-R.
>
> Now, regarding the rewritting of SciViews-R itself in a
> platform-independent environment (i.e., language + graphical widget),
> this is not undertaken currently for the reason I am not satisfied
> enough with all curerently existing solutions for various reasons. I
> give just a few explanations here:
>
> 1) R + Tcl + Tk. The tcltk R package is widely available and largely
> debugged. However, there are still problems to make a 100% Tcl console
> for R (look at Peter Dalgaard's attempt in the package, not complete,
> not 100% operational, currently). Another problem: the Tk widgets are a
> little bit old-fashion, and I miss a lot of features provided by more
> advanded graphical widgets like wxWidgets, for instance. However, it
> seems to be the best bet, currently. So, I explore various kinds of
> additions that could make Tcl + Tk a better and more modern GUI
> implementation. Look at http://www.sciviews.org/SciViews-R... the
> "tcltk2" package. In that package, I add "Tile", a series of themable
> and more modern widgets, the famous "tkTable", a tooltip widget, a text
> widget with synthax colouring, a tree widget, etc. + some Windows
> specific stuff that help regarding problems like focusing on a Tk
> window, and communicating with other apps. However, I face the problem
> of installing all these additional widgets seemlessly under all
> paltforms supported by R. For the pure Tcl widgets, no problems. But for
> widgets with compiled code, like Tile or tkTable, this is much more
> difficult... And since I mainly work on Windows...
>
> 2) wxWidgets. This is a really great, very capable and
> platform-independent solution. I like very much James Wettenhal attemps
> of using wxPython (wxWidgets + Python) through RSPython and the
> experimental wxPython R package. However, it is still alpha, there are
> problems to finalize it, and his author is not continuing its
> development for reasons that are personal to him. So, I am not sure we
> will have a usable version available soon to integrate wxWidgets with R
> and use it for a R GUI.
>
> 3) JAVA. There is a good R GUI written in JAVA: JGR. Moreover, something
> like the Eclipse platform is a very promizing environment for a
> rich-featured R IDE. JAVA specialists in my University say such a GUI,
> written in JAVA will be relatively slow compared to other solutions.
> However, JGR is a good actual counter-example.
>
> 4) GTK2. Great widgets... but forgets Windows. I installed and used Gimp
> under Windows. This is certainly the best demonstration on what can be
> done with GTK2 under Windows. I must admit I am very disappointed as a
> Windows user: look&feel is very different, and irritating in several
> aspects.
>
> So, a long mail to conclude that, if I still haven't started to
> implement the platform-independent version of SciViews-R, it is because
> I am not convinced that any of the currently available R + rich-featured
> and platform-independent widgets solutions available is the one that
> will make it possible to reimplement SciViews-R in a streamless and
> relatively bug-free manner. To summarize, the currently best candidate
> is R + tcltk + tcltk2. I am convinced that R + Python + wxWidgets is by
> far a much better solution, but it is still in alpha development.
> Eclipse + JGR looks promising, and GTK2 is there too, but not enough
> integrated under Windows for me to start using such a solution, as a
> Windows user.
>
> I don't have much time to dedicate to SciViews-R and to the Sciviews R
> GUI API for the moment, and I will certainly focus on four hot topics:
> (1) developing the actual SciViews-R as a better teaching aid (I use and
> need it for my own courses!), (2) contributing to the development of
> Tinn-R, (3) further integrating R Commander with SciViews-R, and (4)
> integrating Rpad with SciViews-R. However, I will have various contracts
> in 2006-2007 where the development of SciViews-R is a part of the job.
> So, I will have the opportunity to hire one or two developers, and this
> will hopefully speed up SciViews-R development in a directly that will
> satisfy more users.
>
> Otherwise, I am open to any suggestion, and more importantly, to any
> idea of collaboration with other R GUI developers, as it is currently
> the case with John Fox (R Commander integration with SciViews-R),
> Jose-Claudio Faria (Tinn-R developement and Tinn-R compatibility with
> SciViews-R), and Tom Short (Rpad developments and compatibility with
> SciViews-R). I think it is important to insist on this, in a world
> populated with a myriad of slowly developed, half finished, half
> featured R GUIs, made by people that look too individualist in my view
> to be able of working all together and to write a single R GUI that has
> any chance to be full-featured, well-documented, reasonnably bug-free,
> truly platform-independent, in a near future.
>
> Best,
>
> Philippe Grosjean
>
> ..............................................<?}))><........
>  ) ) ) ) )
> ( ( ( ( (    Prof. Philippe Grosjean
>  ) ) ) ) )
> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>  ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
> ( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
>  ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
> ( ( ( ( (
>  ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
> ( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
>  ) ) ) ) )
> ( ( ( ( (    web:   http://www.umh.ac.be/~econum
>  ) ) ) ) )          http://www.sciviews.org
> ( ( ( ( (
> ..............................................................
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From phgrosjean at sciviews.org  Sat Oct 15 16:16:08 2005
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Sat, 15 Oct 2005 16:16:08 +0200
Subject: [Rd] [R-gui]  R GUI considerations
In-Reply-To: <971536df0510150649k22bdf047uf2ac6106bea1120b@mail.gmail.com>
References: <4350FB09.3020503@sciviews.org>
	<971536df0510150649k22bdf047uf2ac6106bea1120b@mail.gmail.com>
Message-ID: <43510F28.6020209@sciviews.org>

Gabor Grothendieck wrote:
> The preferred solutions in the post all seem to involve another language:
> 
> - tcl to use tk
> - Python to use wxWidgets
> 
> and other solutions mentioned also seem to involve other languages:
> 
> - Visual Basic
> - Java (Swing?)
> 
> Is there some key missing feature in R with regards to GUIs
> that requires interposing another language?

Yes, there is: R is designed for CLI, and this implies a different 
approach as for a GUI (sequential execution of commands versus 
event-driven application). A language more suitable for event-driven way 
of programming is thus often interposed between R and the GUI itself. 
Have you notice that none of "external" GUIs for R do all the job in R 
itself. Perhaps, the closest one from a 100% R coded GUI is R Commander, 
but it takes benefit from the specific event loop of tcltk (otherwise, 
the whole GUI would be completelly frozen during all R computations), 
and partly of Tcl (even if it is indirect). JGR is Java, SciViews-R is 
Visual Basic, Tinn-R is Delphi, RKward is C++, etc... Of course, it is 
possible to implement extensions in C directly within R (that is what 
RGui does), another altenative, not favoured by "external" GUI 
developpers, it seems.
best,

PhG

> On 10/15/05, Philippe Grosjean <phgrosjean at sciviews.org> wrote:
> 
>>Hello,
>>
>>Following a discussion initiated on r-devel, that mentions SciViews-R
>>and other GUIs issues for R, I would like to make comments (and would be
>>happy if these comments would initiate interesting initiatives).
>>
>>A big, big problem with SciViews-R is that a part of it is written in
>>Visual Basic 6, a M$$$$ language, not supported any more, buggy, non
>>transposable to other platforms, etc, etc. Last year, I started to
>>rewrite SciViews-R, using much more native R code, which will ultimately
>>give what I call a "R GUI API", currently partly implemented in the
>>SciViews bundle available on CRAN. That "R GUI API" is a lot of work:
>>thousands of lines of code for the full API, and as I said, only a part
>>of it is currently implemented. That API is developed with reusability
>>in mind: platform-independent, better basis to rewrite SciViews-R in a
>>different language, and freely available for use by other GUIs. However,
>>nobody seems to be interested by this API (may be because it is not
>>documented enough?). Even simple functions like progress() in the svMisc
>>package are ignored, although they could be useful to some people. Well,
>>I regret this situation, but I don't care much more than that: after
>>all, the main goal is to make it the basis of the future
>>platform-independent implementation of SciViews-R.
>>
>>Now, regarding the rewritting of SciViews-R itself in a
>>platform-independent environment (i.e., language + graphical widget),
>>this is not undertaken currently for the reason I am not satisfied
>>enough with all curerently existing solutions for various reasons. I
>>give just a few explanations here:
>>
>>1) R + Tcl + Tk. The tcltk R package is widely available and largely
>>debugged. However, there are still problems to make a 100% Tcl console
>>for R (look at Peter Dalgaard's attempt in the package, not complete,
>>not 100% operational, currently). Another problem: the Tk widgets are a
>>little bit old-fashion, and I miss a lot of features provided by more
>>advanded graphical widgets like wxWidgets, for instance. However, it
>>seems to be the best bet, currently. So, I explore various kinds of
>>additions that could make Tcl + Tk a better and more modern GUI
>>implementation. Look at http://www.sciviews.org/SciViews-R... the
>>"tcltk2" package. In that package, I add "Tile", a series of themable
>>and more modern widgets, the famous "tkTable", a tooltip widget, a text
>>widget with synthax colouring, a tree widget, etc. + some Windows
>>specific stuff that help regarding problems like focusing on a Tk
>>window, and communicating with other apps. However, I face the problem
>>of installing all these additional widgets seemlessly under all
>>paltforms supported by R. For the pure Tcl widgets, no problems. But for
>>widgets with compiled code, like Tile or tkTable, this is much more
>>difficult... And since I mainly work on Windows...
>>
>>2) wxWidgets. This is a really great, very capable and
>>platform-independent solution. I like very much James Wettenhal attemps
>>of using wxPython (wxWidgets + Python) through RSPython and the
>>experimental wxPython R package. However, it is still alpha, there are
>>problems to finalize it, and his author is not continuing its
>>development for reasons that are personal to him. So, I am not sure we
>>will have a usable version available soon to integrate wxWidgets with R
>>and use it for a R GUI.
>>
>>3) JAVA. There is a good R GUI written in JAVA: JGR. Moreover, something
>>like the Eclipse platform is a very promizing environment for a
>>rich-featured R IDE. JAVA specialists in my University say such a GUI,
>>written in JAVA will be relatively slow compared to other solutions.
>>However, JGR is a good actual counter-example.
>>
>>4) GTK2. Great widgets... but forgets Windows. I installed and used Gimp
>>under Windows. This is certainly the best demonstration on what can be
>>done with GTK2 under Windows. I must admit I am very disappointed as a
>>Windows user: look&feel is very different, and irritating in several
>>aspects.
>>
>>So, a long mail to conclude that, if I still haven't started to
>>implement the platform-independent version of SciViews-R, it is because
>>I am not convinced that any of the currently available R + rich-featured
>>and platform-independent widgets solutions available is the one that
>>will make it possible to reimplement SciViews-R in a streamless and
>>relatively bug-free manner. To summarize, the currently best candidate
>>is R + tcltk + tcltk2. I am convinced that R + Python + wxWidgets is by
>>far a much better solution, but it is still in alpha development.
>>Eclipse + JGR looks promising, and GTK2 is there too, but not enough
>>integrated under Windows for me to start using such a solution, as a
>>Windows user.
>>
>>I don't have much time to dedicate to SciViews-R and to the Sciviews R
>>GUI API for the moment, and I will certainly focus on four hot topics:
>>(1) developing the actual SciViews-R as a better teaching aid (I use and
>>need it for my own courses!), (2) contributing to the development of
>>Tinn-R, (3) further integrating R Commander with SciViews-R, and (4)
>>integrating Rpad with SciViews-R. However, I will have various contracts
>>in 2006-2007 where the development of SciViews-R is a part of the job.
>>So, I will have the opportunity to hire one or two developers, and this
>>will hopefully speed up SciViews-R development in a directly that will
>>satisfy more users.
>>
>>Otherwise, I am open to any suggestion, and more importantly, to any
>>idea of collaboration with other R GUI developers, as it is currently
>>the case with John Fox (R Commander integration with SciViews-R),
>>Jose-Claudio Faria (Tinn-R developement and Tinn-R compatibility with
>>SciViews-R), and Tom Short (Rpad developments and compatibility with
>>SciViews-R). I think it is important to insist on this, in a world
>>populated with a myriad of slowly developed, half finished, half
>>featured R GUIs, made by people that look too individualist in my view
>>to be able of working all together and to write a single R GUI that has
>>any chance to be full-featured, well-documented, reasonnably bug-free,
>>truly platform-independent, in a near future.
>>
>>Best,
>>
>>Philippe Grosjean
>>
>>..............................................<?}))><........
>> ) ) ) ) )
>>( ( ( ( (    Prof. Philippe Grosjean
>> ) ) ) ) )
>>( ( ( ( (    Numerical Ecology of Aquatic Systems
>> ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
>>( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
>> ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
>>( ( ( ( (
>> ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
>>( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
>> ) ) ) ) )
>>( ( ( ( (    web:   http://www.umh.ac.be/~econum
>> ) ) ) ) )          http://www.sciviews.org
>>( ( ( ( (
>>..............................................................
>>
>>______________________________________________
>>R-devel at r-project.org mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>
> 
> 
> _______________________________________________
> R-SIG-GUI mailing list
> R-SIG-GUI at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-gui
> 
>


From rolf at math.unb.ca  Sat Oct 15 16:52:39 2005
From: rolf at math.unb.ca (Rolf Turner)
Date: Sat, 15 Oct 2005 11:52:39 -0300 (ADT)
Subject: [Rd] Hiccup in installing R 2.2.0
Message-ID: <200510151452.j9FEqdRa010229@erdos.math.unb.ca>

Yesterday I downloaded R-2.2.0.tar.gz, gunzipped and untarred, and
did the usual ./configure and make.  Everything seemed to go smoothly
until it got to the bit about installing recommended packages.  It
got past ``spatial'' but turned up a fatal error in respect of the
``boot'' package.

Here is some of what appeared on the screen:

===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===
     .
     .
     .
  trls.influence                    text    html    latex   example
  trmat                             text    html    latex   example
  variogram                         text    html    latex   example
** building package indices ...
* DONE (spatial)
begin installing recommended package boot
* Installing *source* package 'boot' ...
mkdir: cannot create directory `/tmp/Rtmp9726': File exists
ERROR: cannot create temporary R session directory
ERROR: installing package DESCRIPTION failed
/home/faculty/rolf/Rinst/R-2.2.0/bin/INSTALL: test: argument expected
*** Error code 1
make: Fatal error: Command failed for target `boot.ts'
Current working directory /homes/faculty/rolf/Rinst/R-2.2.0/src/library/Recommended
*** Error code 1
make: Fatal error: Command failed for target `recommended-packages'
Current working directory /homes/faculty/rolf/Rinst/R-2.2.0/src/library/Recommended
*** Error code 1
make: Fatal error: Command failed for target `stamp-recommended'
===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===

The system I am working on is a ``sparc'' (from Sun) running
Solaris 2.9.

I checked on /tmp, and there was indeed a directory (empty) named
Rtmp9726, owned by another user on our system.  (It was dated October
7, 2005, i.e. about a week ago.)  Fortunately (???) I have superuser
priviledges, so I was able to remove this (empty) directory.  I then
tried ``make'' again, and this time it ran to completion.  So I'm
alright, Jack.  It would seem however that something is not
***quite*** as it should be in the installation procedure.  I thought
I'd just draw this to youse guys' attention. :-)

			cheers,

				Rolf Turner
				rolf at math.unb.ca


From ggrothendieck at gmail.com  Sat Oct 15 16:56:10 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Sat, 15 Oct 2005 10:56:10 -0400
Subject: [Rd] [R-gui]  R GUI considerations
In-Reply-To: <43510F28.6020209@sciviews.org>
References: <4350FB09.3020503@sciviews.org>
	<971536df0510150649k22bdf047uf2ac6106bea1120b@mail.gmail.com>
	<43510F28.6020209@sciviews.org>
Message-ID: <971536df0510150756w3021b278s4df4a166853e5ed6@mail.gmail.com>

I notice that there is some discussion on this at
http://developer.r-project.org/ under the links involving the
word threading.  Thus using the facilities of another language
seems to be one approach and building such facilities into
R itself another.

On 10/15/05, Philippe Grosjean <phgrosjean at sciviews.org> wrote:
> Gabor Grothendieck wrote:
> > The preferred solutions in the post all seem to involve another language:
> >
> > - tcl to use tk
> > - Python to use wxWidgets
> >
> > and other solutions mentioned also seem to involve other languages:
> >
> > - Visual Basic
> > - Java (Swing?)
> >
> > Is there some key missing feature in R with regards to GUIs
> > that requires interposing another language?
>
> Yes, there is: R is designed for CLI, and this implies a different
> approach as for a GUI (sequential execution of commands versus
> event-driven application). A language more suitable for event-driven way
> of programming is thus often interposed between R and the GUI itself.
> Have you notice that none of "external" GUIs for R do all the job in R
> itself. Perhaps, the closest one from a 100% R coded GUI is R Commander,
> but it takes benefit from the specific event loop of tcltk (otherwise,
> the whole GUI would be completelly frozen during all R computations),
> and partly of Tcl (even if it is indirect). JGR is Java, SciViews-R is
> Visual Basic, Tinn-R is Delphi, RKward is C++, etc... Of course, it is
> possible to implement extensions in C directly within R (that is what
> RGui does), another altenative, not favoured by "external" GUI
> developpers, it seems.
> best,
>
> PhG
>
> > On 10/15/05, Philippe Grosjean <phgrosjean at sciviews.org> wrote:
> >
> >>Hello,
> >>
> >>Following a discussion initiated on r-devel, that mentions SciViews-R
> >>and other GUIs issues for R, I would like to make comments (and would be
> >>happy if these comments would initiate interesting initiatives).
> >>
> >>A big, big problem with SciViews-R is that a part of it is written in
> >>Visual Basic 6, a M$$$$ language, not supported any more, buggy, non
> >>transposable to other platforms, etc, etc. Last year, I started to
> >>rewrite SciViews-R, using much more native R code, which will ultimately
> >>give what I call a "R GUI API", currently partly implemented in the
> >>SciViews bundle available on CRAN. That "R GUI API" is a lot of work:
> >>thousands of lines of code for the full API, and as I said, only a part
> >>of it is currently implemented. That API is developed with reusability
> >>in mind: platform-independent, better basis to rewrite SciViews-R in a
> >>different language, and freely available for use by other GUIs. However,
> >>nobody seems to be interested by this API (may be because it is not
> >>documented enough?). Even simple functions like progress() in the svMisc
> >>package are ignored, although they could be useful to some people. Well,
> >>I regret this situation, but I don't care much more than that: after
> >>all, the main goal is to make it the basis of the future
> >>platform-independent implementation of SciViews-R.
> >>
> >>Now, regarding the rewritting of SciViews-R itself in a
> >>platform-independent environment (i.e., language + graphical widget),
> >>this is not undertaken currently for the reason I am not satisfied
> >>enough with all curerently existing solutions for various reasons. I
> >>give just a few explanations here:
> >>
> >>1) R + Tcl + Tk. The tcltk R package is widely available and largely
> >>debugged. However, there are still problems to make a 100% Tcl console
> >>for R (look at Peter Dalgaard's attempt in the package, not complete,
> >>not 100% operational, currently). Another problem: the Tk widgets are a
> >>little bit old-fashion, and I miss a lot of features provided by more
> >>advanded graphical widgets like wxWidgets, for instance. However, it
> >>seems to be the best bet, currently. So, I explore various kinds of
> >>additions that could make Tcl + Tk a better and more modern GUI
> >>implementation. Look at http://www.sciviews.org/SciViews-R... the
> >>"tcltk2" package. In that package, I add "Tile", a series of themable
> >>and more modern widgets, the famous "tkTable", a tooltip widget, a text
> >>widget with synthax colouring, a tree widget, etc. + some Windows
> >>specific stuff that help regarding problems like focusing on a Tk
> >>window, and communicating with other apps. However, I face the problem
> >>of installing all these additional widgets seemlessly under all
> >>paltforms supported by R. For the pure Tcl widgets, no problems. But for
> >>widgets with compiled code, like Tile or tkTable, this is much more
> >>difficult... And since I mainly work on Windows...
> >>
> >>2) wxWidgets. This is a really great, very capable and
> >>platform-independent solution. I like very much James Wettenhal attemps
> >>of using wxPython (wxWidgets + Python) through RSPython and the
> >>experimental wxPython R package. However, it is still alpha, there are
> >>problems to finalize it, and his author is not continuing its
> >>development for reasons that are personal to him. So, I am not sure we
> >>will have a usable version available soon to integrate wxWidgets with R
> >>and use it for a R GUI.
> >>
> >>3) JAVA. There is a good R GUI written in JAVA: JGR. Moreover, something
> >>like the Eclipse platform is a very promizing environment for a
> >>rich-featured R IDE. JAVA specialists in my University say such a GUI,
> >>written in JAVA will be relatively slow compared to other solutions.
> >>However, JGR is a good actual counter-example.
> >>
> >>4) GTK2. Great widgets... but forgets Windows. I installed and used Gimp
> >>under Windows. This is certainly the best demonstration on what can be
> >>done with GTK2 under Windows. I must admit I am very disappointed as a
> >>Windows user: look&feel is very different, and irritating in several
> >>aspects.
> >>
> >>So, a long mail to conclude that, if I still haven't started to
> >>implement the platform-independent version of SciViews-R, it is because
> >>I am not convinced that any of the currently available R + rich-featured
> >>and platform-independent widgets solutions available is the one that
> >>will make it possible to reimplement SciViews-R in a streamless and
> >>relatively bug-free manner. To summarize, the currently best candidate
> >>is R + tcltk + tcltk2. I am convinced that R + Python + wxWidgets is by
> >>far a much better solution, but it is still in alpha development.
> >>Eclipse + JGR looks promising, and GTK2 is there too, but not enough
> >>integrated under Windows for me to start using such a solution, as a
> >>Windows user.
> >>
> >>I don't have much time to dedicate to SciViews-R and to the Sciviews R
> >>GUI API for the moment, and I will certainly focus on four hot topics:
> >>(1) developing the actual SciViews-R as a better teaching aid (I use and
> >>need it for my own courses!), (2) contributing to the development of
> >>Tinn-R, (3) further integrating R Commander with SciViews-R, and (4)
> >>integrating Rpad with SciViews-R. However, I will have various contracts
> >>in 2006-2007 where the development of SciViews-R is a part of the job.
> >>So, I will have the opportunity to hire one or two developers, and this
> >>will hopefully speed up SciViews-R development in a directly that will
> >>satisfy more users.
> >>
> >>Otherwise, I am open to any suggestion, and more importantly, to any
> >>idea of collaboration with other R GUI developers, as it is currently
> >>the case with John Fox (R Commander integration with SciViews-R),
> >>Jose-Claudio Faria (Tinn-R developement and Tinn-R compatibility with
> >>SciViews-R), and Tom Short (Rpad developments and compatibility with
> >>SciViews-R). I think it is important to insist on this, in a world
> >>populated with a myriad of slowly developed, half finished, half
> >>featured R GUIs, made by people that look too individualist in my view
> >>to be able of working all together and to write a single R GUI that has
> >>any chance to be full-featured, well-documented, reasonnably bug-free,
> >>truly platform-independent, in a near future.


From p.dalgaard at biostat.ku.dk  Sat Oct 15 17:41:14 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 15 Oct 2005 17:41:14 +0200
Subject: [Rd] Hiccup in installing R 2.2.0
In-Reply-To: <200510151452.j9FEqdRa010229@erdos.math.unb.ca>
References: <200510151452.j9FEqdRa010229@erdos.math.unb.ca>
Message-ID: <x2vezykcth.fsf@turmalin.kubism.ku.dk>

Rolf Turner <rolf at math.unb.ca> writes:

> Yesterday I downloaded R-2.2.0.tar.gz, gunzipped and untarred, and
> did the usual ./configure and make.  Everything seemed to go smoothly
> until it got to the bit about installing recommended packages.  It
> got past ``spatial'' but turned up a fatal error in respect of the
> ``boot'' package.
> 
> Here is some of what appeared on the screen:
> 
> ===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===
>      .
>      .
>      .
>   trls.influence                    text    html    latex   example
>   trmat                             text    html    latex   example
>   variogram                         text    html    latex   example
> ** building package indices ...
> * DONE (spatial)
> begin installing recommended package boot
> * Installing *source* package 'boot' ...
> mkdir: cannot create directory `/tmp/Rtmp9726': File exists
> ERROR: cannot create temporary R session directory
> ERROR: installing package DESCRIPTION failed
> /home/faculty/rolf/Rinst/R-2.2.0/bin/INSTALL: test: argument expected
> *** Error code 1
> make: Fatal error: Command failed for target `boot.ts'
> Current working directory /homes/faculty/rolf/Rinst/R-2.2.0/src/library/Recommended
> *** Error code 1
> make: Fatal error: Command failed for target `recommended-packages'
> Current working directory /homes/faculty/rolf/Rinst/R-2.2.0/src/library/Recommended
> *** Error code 1
> make: Fatal error: Command failed for target `stamp-recommended'
> ===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===+===
> 
> The system I am working on is a ``sparc'' (from Sun) running
> Solaris 2.9.
> 
> I checked on /tmp, and there was indeed a directory (empty) named
> Rtmp9726, owned by another user on our system.  (It was dated October
> 7, 2005, i.e. about a week ago.)  Fortunately (???) I have superuser
> priviledges, so I was able to remove this (empty) directory.  I then
> tried ``make'' again, and this time it ran to completion.  So I'm
> alright, Jack.  It would seem however that something is not
> ***quite*** as it should be in the installation procedure.  I thought
> I'd just draw this to youse guys' attention. :-)

This looks like it would be a generic issue, not particularly related
to installation. The code in question should be this:

#ifdef HAVE_MKDTEMP
        sprintf(tmp1, "%s/RtmpXXXXXX", tm);
        tmp = mkdtemp(tmp1);
        if(!tmp) R_Suicide(_("cannot mkdir R_TempDir"));
#else
        sprintf(tmp1, "rm -rf %s/Rtmp%u", tm, (unsigned int)getpid());
        R_system(tmp1);
        sprintf(tmp1, "%s/Rtmp%u", tm, (unsigned int)getpid());
        res = mkdir(tmp1, 0755);
        if(res) {
            /* Try one more time, in case a dir left around from that
               process number from another user */
            sprintf(tmp1, "rm -rf %s/Rtmp%u-%d", tm, (unsigned int)getpid(),
                    rand() % 1000);
            R_system(tmp1);
....

inside src/unix/sys-unix.c. I don't think Solaris has mkdtemp (ours
don't anyway), and the name of the conflicting dir indicates that the
code never went inside the if(res){...} so the conclusion would seem
to be that mkdir fails to fail when it should.

(Notice, BTW, that the name of the dir is keyed to the process ID of
R, so removing the exising directory doesn't really help you. The
thing that might help would be to remove all the Rtmp* directories at
boot and periodically before PID wraparound.)

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From murdoch at stats.uwo.ca  Sat Oct 15 18:51:09 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Sat, 15 Oct 2005 12:51:09 -0400
Subject: [Rd] [R-gui]  R GUI considerations
In-Reply-To: <971536df0510150756w3021b278s4df4a166853e5ed6@mail.gmail.com>
References: <4350FB09.3020503@sciviews.org>	<971536df0510150649k22bdf047uf2ac6106bea1120b@mail.gmail.com>	<43510F28.6020209@sciviews.org>
	<971536df0510150756w3021b278s4df4a166853e5ed6@mail.gmail.com>
Message-ID: <4351337D.7020604@stats.uwo.ca>

Gabor Grothendieck wrote:
> I notice that there is some discussion on this at
> http://developer.r-project.org/ under the links involving the
> word threading.  Thus using the facilities of another language
> seems to be one approach and building such facilities into
> R itself another.
> 
> On 10/15/05, Philippe Grosjean <phgrosjean at sciviews.org> wrote:
> 
>>Gabor Grothendieck wrote:
>>
>>>The preferred solutions in the post all seem to involve another language:
>>>
>>>- tcl to use tk
>>>- Python to use wxWidgets
>>>
>>>and other solutions mentioned also seem to involve other languages:
>>>
>>>- Visual Basic
>>>- Java (Swing?)
>>>
>>>Is there some key missing feature in R with regards to GUIs
>>>that requires interposing another language?

I think the Java/C++ style of object oriented programming is 
particularly well suited to writing GUIs.  GUIs contain a lot of objects 
that need to maintain their state, and that need to respond to messages. 
  The different kinds of objects have a lot in common with one another, 
and also some specific differences.

You don't need an OOP language to write a GUI (the Windows Rgui is 
written in C, for example), but it makes things easier.

You can write R in that style, but it's not the standard style to use, 
so it's not particularly easy.

Duncan Murdoch


From davison at uchicago.edu  Sat Oct 15 20:34:16 2005
From: davison at uchicago.edu (Dan Davison)
Date: Sat, 15 Oct 2005 13:34:16 -0500 (CDT)
Subject: [Rd] typo in R FAQ: sources.list entry for debian 'stable' backports
Message-ID: <Pine.GSO.4.62.0510151256170.11006@harper.uchicago.edu>

The R FAQ at 
http://cran.r-project.org/doc/FAQ/R-FAQ.html#Are-there-Unix-binaries-for-R_003f
advises the use of the following /etc/apt/sources.list entry

deb http://cran.R-project.org/bin/linux/debian stable
.
I think that this is missing a forward slash after the word 'stable'.

>From man sources.list:

[...] distribution can specify an exact path, in which case the components 
must be omitted and distribution must end with a slash (/) [...]

And empirically:

dd:/home/dan# cat /etc/apt/sources.list
deb http://cran.R-project.org/bin/linux/debian stable
dd:/home/dan# apt-get update
E: Malformed line 1 in source list /etc/apt/sources.list (dist parse)

versus

dd:/home/dan# cat /etc/apt/sources.list
deb http://cran.R-project.org/bin/linux/debian stable/

dd:/home/dan# apt-get update
Get:1 http://cran.R-project.org stable/ Packages [3155B]
Get:2 http://cran.R-project.org stable/ Release [71B]
Fetched 3226B in 0s (5206B/s)
Reading Package Lists... Done

Dan

p.s. Thanks for the help I received this week as a result of not reading 
the FAQ...


From Kurt.Hornik at wu-wien.ac.at  Sat Oct 15 21:44:53 2005
From: Kurt.Hornik at wu-wien.ac.at (Kurt Hornik)
Date: Sat, 15 Oct 2005 21:44:53 +0200
Subject: [Rd] checking S3 generic/method consistency
In-Reply-To: <434FE1B2.7010206@bank-banque-canada.ca>
References: <434FE1B2.7010206@bank-banque-canada.ca>
Message-ID: <17233.23605.541027.272159@mithrandir.hornik.net>

>>>>> Paul Gilbert writes:

> In R-2.2.0,  how does   "checking S3 generic/method consistency"  
> determine which generic to check against when there are two?  I have a 
> generic "simulate" in dse1 and there is a new generic "simulate" in 
> stats, and I don't seem to be able to get  my simulate methods to be 
> checked consistently against one or the other. Is this deteremined by 
> Depends in the DESCRIPTION file, the NAMESPACE, or something else?

It is attempted to use the generic "as seen from the package".
Actually, I made a code change to get things right for dse ...

-k


From davison at uchicago.edu  Sat Oct 15 21:46:33 2005
From: davison at uchicago.edu (Dan Davison)
Date: Sat, 15 Oct 2005 14:46:33 -0500 (CDT)
Subject: [Rd] drop() and "["(), and apply()
Message-ID: <Pine.GSO.4.62.0510111523350.23321@harper.uchicago.edu>

I have two queries about the behaviour of drop() and apply() regarding the 
dimnames and names(dimnames) of the answer. I would appreciate any 
comments on this behaviour. I will submit any of this as a bug report if I 
am encouraged to do so.

The first query, concerning drop(), seems to me to be a bug in ?drop, and 
possibly also in the function.

?drop:
[...] Any accompanying 'dimnames' attribute is adjusted and returned with 
'x'.

> x <- array(dim=c(3,2,1), dimnames=list(A=NULL, B=NULL, C=NULL))

> attributes(drop(x))
$dim
[1] 3 2

> attributes(x[,,])
$dim
[1] 3 2

I expected a dimnames attribute equivalent to list(A=NULL, B=NULL). I 
think ?drop is misleading. Is the behaviour intended?

###########################################

I am less confident that the second query, concerning apply(), is a bug in 
anything. But I would appreciate an explanation of the behaviour.

> x <- array(dim=c(3,2), dimnames=list(A=1:3, B=1:2))

> apply(x, 1, function(row) row)
    A
      1  2  3
   1 NA NA NA
   2 NA NA NA

> attributes(apply(x, 1, function(row) row))
$dim
[1] 2 3

$dimnames
$dimnames[[1]]
[1] "1" "2"

$dimnames$A
[1] "1" "2" "3"

What has happened to the name of the first element of the list of dimnames 
of the answer? It seems arguable that if the rows of the answer are 
allowed to keep their names, then the name of that dimension should also 
be preserved. Should the behaviour be better documented in ?apply (which 
only discusses the effect on the dim attribute AFAICS).


Thanks for any comments. Please let me know if I should submit any bug 
reports concerning any of the above.

Dan

> version
          _
platform i386-pc-linux-gnu
arch     i386
os       linux-gnu
system   i386, linux-gnu
status
major    2
minor    2.0
year     2005
month    10
day      06
svn rev  35749
language R

Debian linux
dan at dd:~$ uname -a
Linux dd.princeton.edu 2.6.6 #1 SMP Fri Jul 16 13:23:04 EDT 2004 i686 
GNU/Linux


From p.dalgaard at biostat.ku.dk  Sat Oct 15 22:19:49 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 15 Oct 2005 22:19:49 +0200
Subject: [Rd] drop() and "["(), and apply()
In-Reply-To: <Pine.GSO.4.62.0510111523350.23321@harper.uchicago.edu>
References: <Pine.GSO.4.62.0510111523350.23321@harper.uchicago.edu>
Message-ID: <x2y84uh6sa.fsf@turmalin.kubism.ku.dk>

Dan Davison <davison at uchicago.edu> writes:

> I have two queries about the behaviour of drop() and apply() regarding the 
> dimnames and names(dimnames) of the answer. I would appreciate any 
> comments on this behaviour. I will submit any of this as a bug report if I 
> am encouraged to do so.
> 
> The first query, concerning drop(), seems to me to be a bug in ?drop, and 
> possibly also in the function.
> 
> ?drop:
> [...] Any accompanying 'dimnames' attribute is adjusted and returned with 
> 'x'.
> 
> > x <- array(dim=c(3,2,1), dimnames=list(A=NULL, B=NULL, C=NULL))
> 
> > attributes(drop(x))
> $dim
> [1] 3 2
> 
> > attributes(x[,,])
> $dim
> [1] 3 2
> 
> I expected a dimnames attribute equivalent to list(A=NULL, B=NULL). I 
> think ?drop is misleading. Is the behaviour intended?

I think the logic is that if all dimnames are NULL, they are
discarded from the result. This probably predates the use of named
dimnames. Named NULL dimnames were not anticipated then, nor since...
 
> ###########################################
> 
> I am less confident that the second query, concerning apply(), is a bug in 
> anything. But I would appreciate an explanation of the behaviour.
> 
> > x <- array(dim=c(3,2), dimnames=list(A=1:3, B=1:2))
> 
> > apply(x, 1, function(row) row)
>     A
>       1  2  3
>    1 NA NA NA
>    2 NA NA NA
> 
> > attributes(apply(x, 1, function(row) row))
> $dim
> [1] 2 3
> 
> $dimnames
> $dimnames[[1]]
> [1] "1" "2"
> 
> $dimnames$A
> [1] "1" "2" "3"
> 
> What has happened to the name of the first element of the list of dimnames 
> of the answer? It seems arguable that if the rows of the answer are 
> allowed to keep their names, then the name of that dimension should also 
> be preserved. Should the behaviour be better documented in ?apply (which 
> only discusses the effect on the dim attribute AFAICS).
> 
> 
> Thanks for any comments. Please let me know if I should submit any bug 
> reports concerning any of the above.

I think this happens because vectors cannot have named dimnames.
Basically this happens because there's no obvious place to put it:

> dput(c(a=1))
structure(1, .Names = "a")

i.e., the names are in a vector, not a list. This is a bit of a
bother (and forces the use of 1D arrays in some places, which in turn
confuses code that expects a vector), but implementing code that
carries an extra "name-name" attribute through all possible
calculations have been considered unattractive...

So, the function inside your apply()  construct returns a vector with
the right names, but loses the name of the names, at which point there
is no way to retrieve them.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From duncan at wald.ucdavis.edu  Sun Oct 16 02:25:43 2005
From: duncan at wald.ucdavis.edu (Duncan Temple Lang)
Date: Sat, 15 Oct 2005 17:25:43 -0700
Subject: [Rd] [R-gui]  R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <971536df0510150649k22bdf047uf2ac6106bea1120b@mail.gmail.com>
References: <4350FB09.3020503@sciviews.org>
	<971536df0510150649k22bdf047uf2ac6106bea1120b@mail.gmail.com>
Message-ID: <43519E07.2000008@wald.ucdavis.edu>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


I think it is a little premature to entirely discount
Gtk2, especially if it is based on Philippe's remark
below.  Philippe, did you try other applications,
different themes, different configurations, or just the vanilla GIMP?
and when? While I don't necessarily disagree with the claim that it is
different from Windows look and feel, it requires a little bit more
evidence.

When I complete the SWIG module for R and the associated
more advanced tools, I may pursue an automatically
created interface to wxWidgets that would by-pass the
RSPython dependency.

Unfortunately, many people have become more vested in
Tcl and sub-optimal solutions because it is there.
We need to keep pushing infrastructural development and
what is feasible.  For some of us, the collection
of widgets and the possibilities that they introduce
are more important than cosmetic details, which of
course are important but won't necessarily advance
the paradigms of analysis.

Philippe, while you think that people are to individualistic
in their development of GUIs, I think perhaps a better
interpretation is that many of us are trying to develop
GUIs quite different from what you have in mind.  Your mail
talks as if there is a single, yet-to-be created GUI. There is no
single concept of a GUI and we have been over this many times
to little avail.  But many of us think that a generic GUI
is of little research or even practical value. But we do
think customized interfaces, e.g. to interactive, dynamic
documents, is worthwhile.  Hence the differences. And hence
also the development of truly extensible toolkits, rather than
specific views of what a GUI would like.  It is great that
you want to focus on a particular group of potential users;
likewise for JGR, Rcmdr, etc.


Also, while R is a functional language which Duncan Murdoch
has mentioned in another mail and so is different from
other languages such as C/C++, Python, etc. that have been used
to develop GUIs,  the ability to have mutable state via closures
has not inhibited us in developing GUIs in R.  And the event
loop is not intrinsically different in these other languages
(except Java). It is just something that some of us have to agree on.


Enough for now.

 D.


Gabor Grothendieck wrote:
> The preferred solutions in the post all seem to involve another language:
> 
> - tcl to use tk
> - Python to use wxWidgets
> 
> and other solutions mentioned also seem to involve other languages:
> 
> - Visual Basic
> - Java (Swing?)
> 
> Is there some key missing feature in R with regards to GUIs
> that requires interposing another language?
> 
> On 10/15/05, Philippe Grosjean <phgrosjean at sciviews.org> wrote:
> 
>>Hello,
>>
>>Following a discussion initiated on r-devel, that mentions SciViews-R
>>and other GUIs issues for R, I would like to make comments (and would be
>>happy if these comments would initiate interesting initiatives).
>>
>>A big, big problem with SciViews-R is that a part of it is written in
>>Visual Basic 6, a M$$$$ language, not supported any more, buggy, non
>>transposable to other platforms, etc, etc. Last year, I started to
>>rewrite SciViews-R, using much more native R code, which will ultimately
>>give what I call a "R GUI API", currently partly implemented in the
>>SciViews bundle available on CRAN. That "R GUI API" is a lot of work:
>>thousands of lines of code for the full API, and as I said, only a part
>>of it is currently implemented. That API is developed with reusability
>>in mind: platform-independent, better basis to rewrite SciViews-R in a
>>different language, and freely available for use by other GUIs. However,
>>nobody seems to be interested by this API (may be because it is not
>>documented enough?). Even simple functions like progress() in the svMisc
>>package are ignored, although they could be useful to some people. Well,
>>I regret this situation, but I don't care much more than that: after
>>all, the main goal is to make it the basis of the future
>>platform-independent implementation of SciViews-R.
>>
>>Now, regarding the rewritting of SciViews-R itself in a
>>platform-independent environment (i.e., language + graphical widget),
>>this is not undertaken currently for the reason I am not satisfied
>>enough with all curerently existing solutions for various reasons. I
>>give just a few explanations here:
>>
>>1) R + Tcl + Tk. The tcltk R package is widely available and largely
>>debugged. However, there are still problems to make a 100% Tcl console
>>for R (look at Peter Dalgaard's attempt in the package, not complete,
>>not 100% operational, currently). Another problem: the Tk widgets are a
>>little bit old-fashion, and I miss a lot of features provided by more
>>advanded graphical widgets like wxWidgets, for instance. However, it
>>seems to be the best bet, currently. So, I explore various kinds of
>>additions that could make Tcl + Tk a better and more modern GUI
>>implementation. Look at http://www.sciviews.org/SciViews-R... the
>>"tcltk2" package. In that package, I add "Tile", a series of themable
>>and more modern widgets, the famous "tkTable", a tooltip widget, a text
>>widget with synthax colouring, a tree widget, etc. + some Windows
>>specific stuff that help regarding problems like focusing on a Tk
>>window, and communicating with other apps. However, I face the problem
>>of installing all these additional widgets seemlessly under all
>>paltforms supported by R. For the pure Tcl widgets, no problems. But for
>>widgets with compiled code, like Tile or tkTable, this is much more
>>difficult... And since I mainly work on Windows...
>>
>>2) wxWidgets. This is a really great, very capable and
>>platform-independent solution. I like very much James Wettenhal attemps
>>of using wxPython (wxWidgets + Python) through RSPython and the
>>experimental wxPython R package. However, it is still alpha, there are
>>problems to finalize it, and his author is not continuing its
>>development for reasons that are personal to him. So, I am not sure we
>>will have a usable version available soon to integrate wxWidgets with R
>>and use it for a R GUI.
>>
>>3) JAVA. There is a good R GUI written in JAVA: JGR. Moreover, something
>>like the Eclipse platform is a very promizing environment for a
>>rich-featured R IDE. JAVA specialists in my University say such a GUI,
>>written in JAVA will be relatively slow compared to other solutions.
>>However, JGR is a good actual counter-example.
>>
>>4) GTK2. Great widgets... but forgets Windows. I installed and used Gimp
>>under Windows. This is certainly the best demonstration on what can be
>>done with GTK2 under Windows. I must admit I am very disappointed as a
>>Windows user: look&feel is very different, and irritating in several
>>aspects.
>>
>>So, a long mail to conclude that, if I still haven't started to
>>implement the platform-independent version of SciViews-R, it is because
>>I am not convinced that any of the currently available R + rich-featured
>>and platform-independent widgets solutions available is the one that
>>will make it possible to reimplement SciViews-R in a streamless and
>>relatively bug-free manner. To summarize, the currently best candidate
>>is R + tcltk + tcltk2. I am convinced that R + Python + wxWidgets is by
>>far a much better solution, but it is still in alpha development.
>>Eclipse + JGR looks promising, and GTK2 is there too, but not enough
>>integrated under Windows for me to start using such a solution, as a
>>Windows user.
>>
>>I don't have much time to dedicate to SciViews-R and to the Sciviews R
>>GUI API for the moment, and I will certainly focus on four hot topics:
>>(1) developing the actual SciViews-R as a better teaching aid (I use and
>>need it for my own courses!), (2) contributing to the development of
>>Tinn-R, (3) further integrating R Commander with SciViews-R, and (4)
>>integrating Rpad with SciViews-R. However, I will have various contracts
>>in 2006-2007 where the development of SciViews-R is a part of the job.
>>So, I will have the opportunity to hire one or two developers, and this
>>will hopefully speed up SciViews-R development in a directly that will
>>satisfy more users.
>>
>>Otherwise, I am open to any suggestion, and more importantly, to any
>>idea of collaboration with other R GUI developers, as it is currently
>>the case with John Fox (R Commander integration with SciViews-R),
>>Jose-Claudio Faria (Tinn-R developement and Tinn-R compatibility with
>>SciViews-R), and Tom Short (Rpad developments and compatibility with
>>SciViews-R). I think it is important to insist on this, in a world
>>populated with a myriad of slowly developed, half finished, half
>>featured R GUIs, made by people that look too individualist in my view
>>to be able of working all together and to write a single R GUI that has
>>any chance to be full-featured, well-documented, reasonnably bug-free,
>>truly platform-independent, in a near future.
>>
>>Best,
>>
>>Philippe Grosjean
>>
>>..............................................<?}))><........
>> ) ) ) ) )
>>( ( ( ( (    Prof. Philippe Grosjean
>> ) ) ) ) )
>>( ( ( ( (    Numerical Ecology of Aquatic Systems
>> ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
>>( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
>> ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
>>( ( ( ( (
>> ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
>>( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
>> ) ) ) ) )
>>( ( ( ( (    web:   http://www.umh.ac.be/~econum
>> ) ) ) ) )          http://www.sciviews.org
>>( ( ( ( (
>>..............................................................
>>
>>______________________________________________
>>R-devel at r-project.org mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>
> 
> 
> _______________________________________________
> R-SIG-GUI mailing list
> R-SIG-GUI at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-gui

- --
Duncan Temple Lang                duncan at wald.ucdavis.edu
Department of Statistics          work:  (530) 752-4782
371 Kerr Hall                     fax:   (530) 752-7099
One Shields Ave.
University of California at Davis
Davis, CA 95616, USA
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (Darwin)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFDUZ4G9p/Jzwa2QP4RArL/AJ0c4AhBc2ma+SxW+iuU0vCVjUdcagCfYxOA
JIYlMXy0mxRp0ZnNKBbzayA=
=FwyB
-----END PGP SIGNATURE-----


From wettenhall at wehi.EDU.AU  Sun Oct 16 05:27:41 2005
From: wettenhall at wehi.EDU.AU (James Wettenhall)
Date: Sun, 16 Oct 2005 13:27:41 +1000 (EST)
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
 and multi-threadedness)
In-Reply-To: <4350FB09.3020503@sciviews.org>
References: <4350FB09.3020503@sciviews.org>
Message-ID: <4660.138.217.40.89.1129433261.squirrel@homebase.wehi.edu.au>

Hi Philippe and everyone else,

As you know, I have certainly spent some time thinking about R-GUIs, and
developing some R-Tcl/Tk GUIs - limmaGUI and affylmGUI (available from
Bioconductor).  I have also spent some time wishing we could use a GUI
toolkit with a more modern look and feel.  Hence I have investigated
wxWidgets, and thought that using wxPython might be the easiest way to
interface it from R, but I ran into some technical problems (especially
because I was obsessed with trying to make the interface from R to wx seem
not-too-object-oriented, i.e. I like the idea of 1. create a dialog, 2.
add a button etc. like in Tcl/Tk rather defining a dialog class, then
defining an object which is an instance of that class and then invoking a
show method on that object etc.)

I can't really afford to make R-GUIs much of a priority in my work any
more (so I may not read these philosophical discussions about which GUI
toolkit is best as closely as I used to), but I'm happy to answer any
specific questions about my experience with R-GUI development.  I hope
that doesn't sound too presumptuous of me, but I think that John Fox's
R-Tcl/Tk GUI package (Rcmdr) and mine (limmaGUI and affylmGUI) are some of
the most sophisticated (and most popular in terms of users) attempts to
build a platform-independent GUI interface to a command-line R package (or
packages).  And then there are other really nice GUIs for R which are not
necessarily platform independent - like some of Philippe's SciViews
software, and I recently came across a really nice GUI using GraphApp
(Windows only) for connecting to ODBC - I think it was in Brian Ripley's
RODBC package.

One point I wanted to make here is that there are some people in the R
community who have really great experience to offer from trying to develop
better R GUIs, but who don't necessarily participate on the R-SIG-GUI
mailing list.  For example, I was talking to Jan de Leeuw on the R-SIG-MAC
mailing list and he mentioned that he has done some great work trying to
interface R-wxPython, but that it was difficult maintaining the glue
between the different components.  And there are people in Bioconductor
(e.g. Jianhua Zhang - widgetTools & tkWidgets,  Jeff Gentry -
widgetInvoke) and there are people who have been involved in OmegaHat e.g.
Duncan Temple Lang who all have great experience to offer.

But some of the 'philosophical' ideas that people would like to implement
e.g. interfacing R and wxWidgets 'directly' without going through Python
(e.g. using Cable Swig) (or interfacing R and Tk via C rather than via
Tcl) seem like a massive task, and no-one seems sufficiently motivated to
provide money to employ someone (or multiple people) to do something as
big as that.

Just my thoughts.  Feel free to ignore.
Regards,
James


From jusung at andrew.cmu.edu  Sun Oct 16 06:07:53 2005
From: jusung at andrew.cmu.edu (jusung@andrew.cmu.edu)
Date: Sun, 16 Oct 2005 06:07:53 +0200 (CEST)
Subject: [Rd] BIC doesn't work for glm(family=binomial()) (PR#8208)
Message-ID: <20051016040753.8F9F7868A@slim.kubism.ku.dk>

Full_Name: Ju-Sung Lee
Version: 2.2.0
OS: Windows XP
Submission from: (NULL) (66.93.61.221)


BIC() requires the attribute $nobs from the logLik object but the logLik of a
glm(formula,family=binomial()) object does not include $nobs.  Adding
attr(obj,'nobs') = value, seems to allow BIC() to work.

Reproducing the problem:
library(nmle);
BIC(logLik(glm(1~1,family=binomial())));


From p.dalgaard at biostat.ku.dk  Sun Oct 16 09:36:55 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 16 Oct 2005 09:36:55 +0200
Subject: [Rd] BIC doesn't work for glm(family=binomial()) (PR#8208)
In-Reply-To: <20051016040753.8F9F7868A@slim.kubism.ku.dk>
References: <20051016040753.8F9F7868A@slim.kubism.ku.dk>
Message-ID: <x2y84tj4ko.fsf@turmalin.kubism.ku.dk>

jusung at andrew.cmu.edu writes:

> Full_Name: Ju-Sung Lee
> Version: 2.2.0
> OS: Windows XP
> Submission from: (NULL) (66.93.61.221)
> 
> 
> BIC() requires the attribute $nobs from the logLik object but the logLik of a
> glm(formula,family=binomial()) object does not include $nobs.  Adding
> attr(obj,'nobs') = value, seems to allow BIC() to work.
> 
> Reproducing the problem:
> library(nmle);
> BIC(logLik(glm(1~1,family=binomial())));

It is not clear to me that "nobs" is a well-defined concept for
arbitrary likelihood functions. In particular, binomial models are
tricky: Is "13 successes in 79 trials" one (binomial) observation or
79 (Bernoulli) ones?? 

So BIC may not be defined. In which sense is this a bug, anyway? The
BIC function is defined inside the nlme package which is not designed
to work with anything but continuous data.


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From ripley at stats.ox.ac.uk  Sun Oct 16 10:12:33 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 16 Oct 2005 09:12:33 +0100 (BST)
Subject: [Rd] BIC doesn't work for glm(family=binomial()) (PR#8208)
In-Reply-To: <x2y84tj4ko.fsf@turmalin.kubism.ku.dk>
References: <20051016040753.8F9F7868A@slim.kubism.ku.dk>
	<x2y84tj4ko.fsf@turmalin.kubism.ku.dk>
Message-ID: <Pine.LNX.4.61.0510160906330.20389@gannet.stats>

On Sun, 16 Oct 2005, Peter Dalgaard wrote:

> jusung at andrew.cmu.edu writes:
>
>> Full_Name: Ju-Sung Lee
>> Version: 2.2.0
>> OS: Windows XP
>> Submission from: (NULL) (66.93.61.221)
>>
>>
>> BIC() requires the attribute $nobs from the logLik object but the logLik of a
>> glm(formula,family=binomial()) object does not include $nobs.  Adding
>> attr(obj,'nobs') = value, seems to allow BIC() to work.
>>
>> Reproducing the problem:
>> library(nmle);
>> BIC(logLik(glm(1~1,family=binomial())));
>
> It is not clear to me that "nobs" is a well-defined concept for
> arbitrary likelihood functions. In particular, binomial models are
> tricky: Is "13 successes in 79 trials" one (binomial) observation or
> 79 (Bernoulli) ones??
>
> So BIC may not be defined. In which sense is this a bug, anyway? The
> BIC function is defined inside the nlme package which is not designed
> to work with anything but continuous data.

Schwarz originally introduced BIC only for linear regressions (and in 
essentially the random regressors case as I recall).

It is perhaps worth pointing out that 'nobs' (and hence BIC) is not 
well-defined for a linear mixed model either: the appropriate multiplier 
suggested by the theory depends on the type of asymptotics which are 
assumed.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From phgrosjean at sciviews.org  Sun Oct 16 14:32:25 2005
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Sun, 16 Oct 2005 14:32:25 +0200
Subject: [Rd] [R-gui] R GUI considerations
In-Reply-To: <4660.138.217.40.89.1129433261.squirrel@homebase.wehi.edu.au>
References: <4350FB09.3020503@sciviews.org>
	<4660.138.217.40.89.1129433261.squirrel@homebase.wehi.edu.au>
Message-ID: <43524859.4040802@sciviews.org>

Hello James, Duncan and the others,

There are interesting arguments in your posts. I think I must react to 
one of Duncan's considerations:

"Philippe, while you think that people are to individualistic in their 
development of GUIs, I think perhaps a better interpretation is that 
many of us are trying to develop GUIs quite different from what you have 
in mind.  Your mail talks as if there is a single, yet-to-be created 
GUI. There is no single concept of a GUI and we have been over this many 
times to little avail."

We probably have the same feeling about the large palette of possible 
GUIs (look at the page http://www.sciviews.org/_rgui/rgui/GUIs.html, 
that I wrote more than one year ago). However, my idea is effectively to 
make a single GUI, flexible enough to accomodate all situations and uses 
(do I need to add that it is *not* necessarily derived from SciViews, 
but it must certainly arise from a collaborative work between all people 
interested in the R-SIG-GUI list and others).

There are several functions shared by the various R GUIs, and recoding 
the same function again and again is really a waste of time. If you 
carefully look at JGR, SciViews-R and R Commander, you will see that the 
same main paradigm is used: a script editor in top of bottom of a 
console window, plus "helpers" to ease beginner's work (menus & dialog 
boxes, object explorer, etc... Again, not the only possible GUI, but one 
that proves useful in some situations). For instance, the object 
explorer has been coded at least three times (once in JGR, once in 
SciViews-R, and again, a more static and basic one in R -browseEnv() in 
utils package-). What a waste of time that would have been avoided if 
there was an "R Object Explorer API" available that everybody can reuse. 
This is where I see too much individualism: nobody, including myself, 
considered that the functions they wrote for the object explorer should 
be done and documented in a way they would be reusable by others 
(exception of browseEnv(), of course). I could cite countless examples here.

Where I am more surprised, it is when I proposed that idea of a reusable 
R GUI API one year ago, and started to write it, I found no echo at all 
in other developers. Nobody seems to be interested by the idea of 
reusable building blocks for R GUIs, although reusability is really the 
key of successful software development nowodays. Duncan, I am pretty 
sure you feel that all you did in OmegaHat is underused, probably for 
the same reason.

Other reasons why a good and fully-featured R GUI takes very long to 
develop in an Open Source context: the lack of programmers. Good R 
programmers, those who actually make R, are more interested by enhancing 
R itself than by writting a GUI for it, because they don't need a GUI 
and are pretty satisfied with the CLI and/or ESS. Other kinds of 
programmers wanting to participate in the development of Open Source 
software are more encline to participate to widely used software like 
Apache, Mozilla, OpenOffice, etc... than to dedicate their free time for 
programming a GUI for an obscure statistical software, with marginal use 
compared to the previously cited software. Finally, the only programmers 
really interested by a R GUI have very specific needs, like the use of R 
for teaching (John Fox, and myself, for instance)... and it happens that 
the very few people ready to dedicate a part of their free time to the 
development of a R GUI all act as individualists, starting their own 
project alone and with no or little reusability between GUIs projects in 
mind.

In such a context, the situation is pretty desperate. Open Source means 
software made by users for users... but in the particular case of R 
GUIs, users that need them (beginners), usually are those that *cannot* 
participate to their development, and the Open Source paradigm simply 
does not work as well for that particular reason.

That said, we are intelligent and proactive people. So, once the 
situation is analyzed, could we react in a positive way? Could we decide 
to put each piece of experience, materialized by several half-finished R 
GUIs (the current R GUIs that are considered as finished are indeed less 
ambitious projects, satisfied with a couple of basic features, which is 
the same result as more ambitious projects flagged as half-finished).

Some thinkings in this direction lead me to build a bridge between R 
Commander and SciViews-R, and in a near future, between Rpad and 
SciViews-R. Also, with Jose Claudio Faria, we are thinking on a 
reimplementation of Tinn-R in a platform-independent way, probably 
Java-based... a possible bridge with JGR is obvious here. These 
thinkings are summarized in a document: 
http://www.sciviews.org/EclipseAndR_Evaluation.pdf. Also, for what I 
tell about the idea of a R GUI API, one could read part II of the 
SciViews-R manual (http://www.sciviews.org/SciViews-R/Manual.pdf).

I am not much interested by endless discussions and considerations. I 
would rather like to feel a serious willingness in starting a 
collaborative work between all people that will read this email... and I 
am waiting for real actions going in this direction. As I said, I will 
have a couple of contracts in 2006-2007 where the development of a R GUI 
is part of the job, leaving me the opportunity to hire one or two 
developers on it. Whether these developers will continue the work on the 
current Windows-only SciViews-R, or on a more general project will 
largely depend on the echo I got in the R GUI developers sphere, 
regarding my suggestion of a reusable R GUI API and a polymorphic and 
full features R GUI as sketched in the two document cited hereabove.
Best regards,

Philippe Grosjean




James Wettenhall wrote:
> Hi Philippe and everyone else,
> 
> As you know, I have certainly spent some time thinking about R-GUIs, and
> developing some R-Tcl/Tk GUIs - limmaGUI and affylmGUI (available from
> Bioconductor).  I have also spent some time wishing we could use a GUI
> toolkit with a more modern look and feel.  Hence I have investigated
> wxWidgets, and thought that using wxPython might be the easiest way to
> interface it from R, but I ran into some technical problems (especially
> because I was obsessed with trying to make the interface from R to wx seem
> not-too-object-oriented, i.e. I like the idea of 1. create a dialog, 2.
> add a button etc. like in Tcl/Tk rather defining a dialog class, then
> defining an object which is an instance of that class and then invoking a
> show method on that object etc.)
> 
> I can't really afford to make R-GUIs much of a priority in my work any
> more (so I may not read these philosophical discussions about which GUI
> toolkit is best as closely as I used to), but I'm happy to answer any
> specific questions about my experience with R-GUI development.  I hope
> that doesn't sound too presumptuous of me, but I think that John Fox's
> R-Tcl/Tk GUI package (Rcmdr) and mine (limmaGUI and affylmGUI) are some of
> the most sophisticated (and most popular in terms of users) attempts to
> build a platform-independent GUI interface to a command-line R package (or
> packages).  And then there are other really nice GUIs for R which are not
> necessarily platform independent - like some of Philippe's SciViews
> software, and I recently came across a really nice GUI using GraphApp
> (Windows only) for connecting to ODBC - I think it was in Brian Ripley's
> RODBC package.
> 
> One point I wanted to make here is that there are some people in the R
> community who have really great experience to offer from trying to develop
> better R GUIs, but who don't necessarily participate on the R-SIG-GUI
> mailing list.  For example, I was talking to Jan de Leeuw on the R-SIG-MAC
> mailing list and he mentioned that he has done some great work trying to
> interface R-wxPython, but that it was difficult maintaining the glue
> between the different components.  And there are people in Bioconductor
> (e.g. Jianhua Zhang - widgetTools & tkWidgets,  Jeff Gentry -
> widgetInvoke) and there are people who have been involved in OmegaHat e.g.
> Duncan Temple Lang who all have great experience to offer.
> 
> But some of the 'philosophical' ideas that people would like to implement
> e.g. interfacing R and wxWidgets 'directly' without going through Python
> (e.g. using Cable Swig) (or interfacing R and Tk via C rather than via
> Tcl) seem like a massive task, and no-one seems sufficiently motivated to
> provide money to employ someone (or multiple people) to do something as
> big as that.
> 
> Just my thoughts.  Feel free to ignore.
> Regards,
> James
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 

Duncan Temple Lang wrote:

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


I think it is a little premature to entirely discount
Gtk2, especially if it is based on Philippe's remark
below.  Philippe, did you try other applications,
different themes, different configurations, or just the vanilla GIMP?
and when? While I don't necessarily disagree with the claim that it is
different from Windows look and feel, it requires a little bit more
evidence.

When I complete the SWIG module for R and the associated
more advanced tools, I may pursue an automatically
created interface to wxWidgets that would by-pass the
RSPython dependency.

Unfortunately, many people have become more vested in
Tcl and sub-optimal solutions because it is there.
We need to keep pushing infrastructural development and
what is feasible.  For some of us, the collection
of widgets and the possibilities that they introduce
are more important than cosmetic details, which of
course are important but won't necessarily advance
the paradigms of analysis.

Philippe, while you think that people are to individualistic
in their development of GUIs, I think perhaps a better
interpretation is that many of us are trying to develop
GUIs quite different from what you have in mind.  Your mail
talks as if there is a single, yet-to-be created GUI. There is no
single concept of a GUI and we have been over this many times
to little avail.  But many of us think that a generic GUI
is of little research or even practical value. But we do
think customized interfaces, e.g. to interactive, dynamic
documents, is worthwhile.  Hence the differences. And hence
also the development of truly extensible toolkits, rather than
specific views of what a GUI would like.  It is great that
you want to focus on a particular group of potential users;
likewise for JGR, Rcmdr, etc.


Also, while R is a functional language which Duncan Murdoch
has mentioned in another mail and so is different from
other languages such as C/C++, Python, etc. that have been used
to develop GUIs,  the ability to have mutable state via closures
has not inhibited us in developing GUIs in R.  And the event
loop is not intrinsically different in these other languages
(except Java). It is just something that some of us have to agree on.


Enough for now.

  D.


From ripley at stats.ox.ac.uk  Sun Oct 16 15:04:41 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 16 Oct 2005 14:04:41 +0100 (BST)
Subject: [Rd] [R-gui]  R GUI considerations (was: R, Wine,
 and multi-threadedness)
In-Reply-To: <43519E07.2000008@wald.ucdavis.edu>
References: <4350FB09.3020503@sciviews.org>
	<971536df0510150649k22bdf047uf2ac6106bea1120b@mail.gmail.com>
	<43519E07.2000008@wald.ucdavis.edu>
Message-ID: <Pine.LNX.4.61.0510160915430.20389@gannet.stats>

On Sat, 15 Oct 2005, Duncan Temple Lang wrote:

> I think it is a little premature to entirely discount
> Gtk2, especially if it is based on Philippe's remark
> below.  Philippe, did you try other applications,
> different themes, different configurations, or just the vanilla GIMP?
> and when? While I don't necessarily disagree with the claim that it is
> different from Windows look and feel, it requires a little bit more
> evidence.

My main concern has been stability of gtk/gtk2 under Windows.  I've used 
it off and on for several years, and it has always been flaky -- sometimes 
it works on one computer but crashes on another, for example.

Personally, I have not seen any GTK2-based application that I find better 
than acceptable as a GUI, whereas I have seen some Qt-based ones I really 
liked.  But I realize this is a matter of individual taste (as it seems 
are Tk widgets - someone must like them!).

However, as an educator I see a lot of resistance to learning new tricks 
without good reason.  If the point of adding a GUI to R is to avoid people 
learning to use a command-line, it needs to be a GUI with which they are 
comfortable.  (I presume that is part of the reason why applications 
flocked to MS-Office style GUIs a few years ago.)  People (such as me) who 
are not comfortable with such styles are not in a good position to judge 
their needs.

[...]

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From edd at debian.org  Sun Oct 16 15:50:45 2005
From: edd at debian.org (Dirk Eddelbuettel)
Date: Sun, 16 Oct 2005 08:50:45 -0500
Subject: [Rd] [R-gui]    R GUI considerations (was: R, Wine,
 and multi-threadedness)
In-Reply-To: <Pine.LNX.4.61.0510160915430.20389@gannet.stats>
References: <4350FB09.3020503@sciviews.org>
	<971536df0510150649k22bdf047uf2ac6106bea1120b@mail.gmail.com>
	<43519E07.2000008@wald.ucdavis.edu>
	<Pine.LNX.4.61.0510160915430.20389@gannet.stats>
Message-ID: <17234.23221.482412.732757@basebud.nulle.part>


On 16 October 2005 at 14:04, Prof Brian Ripley wrote:
| whereas I have seen some Qt-based ones I really liked.  

Qt is C++, cross-platform using native widgets on OS X and Win and (since
more recently) available without fee or license woes provided it is used for
GPL'ed code.  

So it satisfies both the requirement to make it look and feel native
whereever possible, and satisfies the preference for an OO paradigm for GUI
programming.

Would it be an alternative?  Is it worth a prototype app?

Regards, Dirk

-- 
Statistics: The (futile) attempt to offer certainty about uncertainty.
         -- Roger Koenker, 'Dictionary of Received Ideas of Statistics'


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Sun Oct 16 16:53:00 2005
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: Sun, 16 Oct 2005 16:53:00 +0200
Subject: [Rd] [R-gui]    R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <17234.23221.482412.732757@basebud.nulle.part>
References: <4350FB09.3020503@sciviews.org>
	<Pine.LNX.4.61.0510160915430.20389@gannet.stats>
	<17234.23221.482412.732757@basebud.nulle.part>
Message-ID: <200510161653.00853.thomas.friedrichsmeier@ruhr-uni-bochum.de>

Hi,

> Qt is C++, cross-platform using native widgets on OS X and Win and (since
> more recently) available without fee or license woes provided it is used
> for GPL'ed code.
>
> So it satisfies both the requirement to make it look and feel native
> whereever possible, and satisfies the preference for an OO paradigm for GUI
> programming.
>
> Would it be an alternative?  Is it worth a prototype app?

If you seriously consider writing a Qt app, please have a look at RKWard (at 
least to find out, which portions of the code to reuse). RKWard is not a pure 
Qt app, however, but a KDE app. KDE 4 is promised to be cross-platform (but 
won't be released for another year or so), so I hope RKWard will be 
cross-platform, then.
Also, note that RKWard uses a somewhat different approach, than most other 
R-GUIs (as far as I know), in that _all_ the GUI stuff is done in C++-code 
(or plugins). There is no API to build GUI(-elements) from R in rkward, and I 
don't have plans to add that in the near future.
On the discussion iniated by Philippe: I don't think there will ever be a 
single united R GUI. It's not like this discussion has not come up before. I 
agree this has something to do with individualistic developers, and I'll 
admit to being one myself. But there are other reasons as well.
What I do believe, is that there could be collaboration in some areas. Years 
ago I proposed a standard for defining some GUI-elements. Philippe was pretty 
much the only person expressing interest at that time, but now uses an 
entirely different approach.
Another area could be drawing up a flexible output-format, and R-methods to 
create such output. R2HTML does a pretty good job, for the time being, but 
ultimately, we'll want an output format that does some more abstraction, for 
instance, to allow changing the number of digits to display on the fly, etc. 
If we could agree on a common standard for this, it could save all projects a 
lot of effort. (But no, I haven't worked out any specific ideas for this, 
yet).
I think you'll have a hard time, convincing any of the projects to give up 
their individualistic approaches (including any agreement, even on which 
programming language to use). All I can see is some projects might share some 
common standards.

Regards
Thomas


From ripley at stats.ox.ac.uk  Sun Oct 16 17:49:18 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sun, 16 Oct 2005 16:49:18 +0100 (BST)
Subject: [Rd] MBCS support and iconv
Message-ID: <Pine.LNX.4.61.0510161625590.3471@gannet.stats>

I am considering requiring HAVE_ICONV as part of SUPPORT_MBCS for 2.3.0.
This would require the iconv from glibc or libiconv if multi-byte 
character sets (notably UTF-8) are to be usable.

As far as I know this would only affect commercial Unixen, where libiconv 
could be installed. (We know that Linux, Mac OS X and Windows would be 
unaffected.  I suspect from its man pages that FreeBSD nowadays has 
libiconv installed, despite comments to the contrary in libiconv 
propaganda.) If anyone sees a problem with this, please let me know soon.

This is mainly to simplify support (including documentation) and testing.
There are too many paths through the code, and only that using iconv gets 
more than cursory testing.  Also, problems with wide-char support in some 
OSes are becoming apparent and we can circumvent them by using iconv to do 
conversions.

There are already a number of new internationalization features in 
R-patched/R-devel (thanks in good part to Ei-ji Nakama), including support 
for postscript()/pdf() in non-Latin-1 languages.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From phgrosjean at sciviews.org  Sun Oct 16 18:37:15 2005
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Sun, 16 Oct 2005 18:37:15 +0200
Subject: [Rd] [R-gui]    R GUI considerations
In-Reply-To: <200510161653.00853.thomas.friedrichsmeier@ruhr-uni-bochum.de>
References: <4350FB09.3020503@sciviews.org>	<Pine.LNX.4.61.0510160915430.20389@gannet.stats>	<17234.23221.482412.732757@basebud.nulle.part>
	<200510161653.00853.thomas.friedrichsmeier@ruhr-uni-bochum.de>
Message-ID: <435281BB.40502@sciviews.org>

Thomas Friedrichsmeier wrote:
> Hi,
> 
> 
>>Qt is C++, cross-platform using native widgets on OS X and Win and (since
>>more recently) available without fee or license woes provided it is used
>>for GPL'ed code.
>>
>>So it satisfies both the requirement to make it look and feel native
>>whereever possible, and satisfies the preference for an OO paradigm for GUI
>>programming.
>>
>>Would it be an alternative?  Is it worth a prototype app?
> 
> 
> If you seriously consider writing a Qt app, please have a look at RKWard (at 
> least to find out, which portions of the code to reuse). RKWard is not a pure 
> Qt app, however, but a KDE app. KDE 4 is promised to be cross-platform (but 
> won't be released for another year or so), so I hope RKWard will be 
> cross-platform, then.
> Also, note that RKWard uses a somewhat different approach, than most other 
> R-GUIs (as far as I know), in that _all_ the GUI stuff is done in C++-code 
> (or plugins). There is no API to build GUI(-elements) from R in rkward, and I 
> don't have plans to add that in the near future.
> On the discussion iniated by Philippe: I don't think there will ever be a 
> single united R GUI. It's not like this discussion has not come up before. I 
> agree this has something to do with individualistic developers, and I'll 
> admit to being one myself. But there are other reasons as well.
> What I do believe, is that there could be collaboration in some areas. Years 
> ago I proposed a standard for defining some GUI-elements. Philippe was pretty 
> much the only person expressing interest at that time, but now uses an 
> entirely different approach.
> Another area could be drawing up a flexible output-format, and R-methods to 
> create such output. R2HTML does a pretty good job, for the time being, but 
> ultimately, we'll want an output format that does some more abstraction, for 
> instance, to allow changing the number of digits to display on the fly, etc. 
> If we could agree on a common standard for this, it could save all projects a 
> lot of effort. (But no, I haven't worked out any specific ideas for this, 
> yet).
> I think you'll have a hard time, convincing any of the projects to give up 
> their individualistic approaches (including any agreement, even on which 
> programming language to use). All I can see is some projects might share some 
> common standards.
> 
> Regards
> Thomas

I suspect you are more interested by the challenge of making a R GUI 
than of having that GUI fully operational for everyday work. People like 
me *do need* a fully-featured R GUI for their everyday work... and miss 
it! I spend countless hours to achieve this goal, and I ultimately 
arrive to the conclusion that the entreprise is huge, and it is very 
difficult to reach the goal for a single person that dedicate a little 
bit of its free time to such a project. So, yes, I am ready to give up 
SciViews and all my convictions to work *collectively* on a common R GUI 
project. I hope there are other people out there that are more 
interested by the result than by the fun of starting and managing yet 
another project on their own,... and that they progressively arrive to 
the same conclusion: we need to harness several programmers on the same 
project to have any chance to finish a really full-featured R GUI in a 
reasonable amount of time.

Another problem, for a slowly moving project like SciViews-R is the fast 
evolution of R itself. It means that almost all the available time is 
spend making changes just to keep the GUI compatible with the latest R 
version, leaving very little time for programming new features and for 
writting the documentation.

I took a look at Qt a few times, and I was always stopped by the 
commercial license (at least under Windows). I just visit Qt web site. 
Yes, indeed, there is a GPL license now. Very good news!

Best,

Philippe Grosjean


From MSchwartz at mn.rr.com  Sun Oct 16 21:21:25 2005
From: MSchwartz at mn.rr.com (Marc Schwartz)
Date: Sun, 16 Oct 2005 14:21:25 -0500
Subject: [Rd] [R-gui]    R GUI considerations (was: R, Wine,
	and	multi-threadedness)
In-Reply-To: <200510161653.00853.thomas.friedrichsmeier@ruhr-uni-bochum.de>
References: <4350FB09.3020503@sciviews.org>
	<Pine.LNX.4.61.0510160915430.20389@gannet.stats>
	<17234.23221.482412.732757@basebud.nulle.part>
	<200510161653.00853.thomas.friedrichsmeier@ruhr-uni-bochum.de>
Message-ID: <1129490486.5518.140.camel@localhost.localdomain>

Greetings all,

While recognizing that "this is easier said, than done", is there any
logic in suggesting that for those who might be interested, a specific R
GUI session of sorts be added to the UseR! 2006 meeting schedule?

Since some quorum of interested GUI users may be planning to attend the
meeting or may be motivated to do so, it may be an opportunity to:

1. Leverage face to face interaction and visualize possible options

2. Define areas of commonality

3. Bring some level of focus to targeted segments of the user base that
would utilize a GUI and for whom there may be differing functional
requirements.

4. Identify cross-platform opportunities and technologies

5. See further notes below...


Some of the preliminary work could no doubt be done in advance to better
prepare and structure discussion.

This could be done as a "breakout" session or if there is sufficient
interest (and facility/funding issues can be resolved) perhaps a group
session held the day before or perhaps the day after the main conference
program.

If there is a core group that is interested in pursuing this, an
announcement could be made to the respective R e-mail lists (r-help,
r-devel, r-sig-gui, etc.) whereby, with the sufficient lead time as we
have, the requisite activities could be put in place to orchestrate the
session, define specific desired outcomes and identify individuals
willing to spend their time to coordinate and make this venture
successful (however success would be defined).

There is no business or financial motivation here for a GUI. If there
was and a for profit company decided that there would be a significant
return on investment, they would spend the money, hire the resources,
define a team leader and put forth a single development spec for a GUI
project based upon their own market research. It would be done in a
relatively authoritarian fashion and if you didn't agree, you would be
asked to find a job elsewhere.

Here, you would need to solicit voluntary resources, reconcile the
expected differences of opinion on the spectrum of matters that would
have to be addressed and define some common framework for operating,
perhaps based upon targeted user segments.

This subject, as mentioned, has come up on the lists previously, with no
common resolution, resulting of course in the individual activities that
have emerged.

Is there a group of motivated useRs out there, who have the time,
energy, and skills and are willing to work within the framework of a
design and development "team" environment, where a quid pro quo for
moving forward could evolve from the User! 2006 meeting? 

Is there an individual, who would need to emerge from that group, who
has the respect and requisite skills to drive a consensus of opinion and
keep a team focused and moving in the proper direction?

If so, that might be a step in the direction of evolving a GUI that
might make sense for some yet to be defined range of useRs, who would
not otherwise utilize the CLI or might need to evolve in that direction
over time.

If not, then the status quo continues...

There are some 300 Linux distributions out there and multiple X based
GUIs, which have evolved for reasons as varied as those behind the
available R GUIs and more. Yet there are a select few base Linux
distributions and largely two GUIs that have garnered any significant
market share. Perhaps, over time, lacking any coordinated activity, a
similar situation will evolve here, if the predicate that a broad demand
for a R GUI is valid.

If the predicate is false, then this process is perhaps rightly done by
individuals meeting narrowly focused, local requirements.

I should note, that I am not prospective GUI user, but a happy ESS user.
I simply thought that I would try to provoke some discussion on this
point, since I jumped into this thread earlier in the week.

Best regards,

Marc Schwartz


From blindglobe at gmail.com  Sun Oct 16 21:30:36 2005
From: blindglobe at gmail.com (A.J. Rossini)
Date: Sun, 16 Oct 2005 21:30:36 +0200
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <1129490486.5518.140.camel@localhost.localdomain>
References: <4350FB09.3020503@sciviews.org>
	<Pine.LNX.4.61.0510160915430.20389@gannet.stats>
	<17234.23221.482412.732757@basebud.nulle.part>
	<200510161653.00853.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<1129490486.5518.140.camel@localhost.localdomain>
Message-ID: <1abe3fa90510161230m43907a13g8c8be2e7e2584ced@mail.gmail.com>

Interesting.

So, we've got lots of people that want GUIs, lots of variants with
existing prototypes, and lots of clamor for skilled collaborators.

As most of the work has seemed to be of the "I know this, and this is
what I want to do", it will be interesting to see how it shakes out. 
I've still not seen a GUI that I'd call good.  There are many adequate
ones, and I've finally reached the point of appreciating the adequacy
of the MS approach (which is different than my previous attitude).

I hope someone creates a good one that is stable.  That's half the
problem right there, in that the implementation is a huge component of
the theory.

Widget sets are less interesting than the overall approach, but
unfortunately provide the basic characterizations of what might be
possible.

best,
-tony

blindglobe at gmail.com
Muttenz, Switzerland.
"Commit early,commit often, and commit in a repository from which we can easily
roll-back your mistakes" (AJR, 4Jan05).


From otter at otter-rsch.com  Sun Oct 16 21:46:06 2005
From: otter at otter-rsch.com (dave fournier)
Date: Sun, 16 Oct 2005 12:46:06 -0700
Subject: [Rd] Cross compiler  taqrgeting Mac OS X
Message-ID: <4352ADFE.7050403@otter-rsch.com>

Hi,

I have been asked to produce a binary of some software for somone 
running R on Mac OS X. I don't have a Mac and don't know anything about 
them.
The sloution would seem to be to obtain/build a crsoo compiler on
windows or probably easier on Linux i686. I would appreciate any advice 
on how how to go about this. I understand there are a number of 
different versions of Mac OS X. Are there compatability issues?
also 32/64 bit issues.

      Dave


-- 
David A. Fournier
P.O. Box 2040,
Sidney, B.C. V8l 3s3
Canada
http://otter-rsch.com


--


From jiesheng at bioteam.net  Mon Oct 17 04:00:07 2005
From: jiesheng at bioteam.net (jiesheng zhang)
Date: Mon, 17 Oct 2005 10:00:07 +0800
Subject: [Rd] How can I use the function in "Defn.h"?
Message-ID: <435305A7.3030200@bioteam.net>

Hi, all

I am in the process of writing my first R extesion package. My extension 
does not do statistics analysis. It serilizes the call, sends the call 
to remote computer. The remote compuer will evaluate the call and 
returns the result back to client machine. The idea is inspired by the 
taskPR package, which is much more complex than what I want to 
accomplish. I use some code from taskPR.
One of the function uses StrToInternal function(I copy it from taskPR 
package). I noticed the StrToInternal was defined in "Defn.h".

When I load my extension and library, I got this error
-------------------------------
 > library("btRRTest")
Error in dyn.load(x, as.logical(local), as.logical(now)) :
         unable to load shared library 
'/common/apps/lib/R/library/btRRTest/libs/btRRTest.so':
   /common/apps/lib/R/library/btRRTest/libs/btRRTest.so: undefined 
symbol: StrToInternal
Error in library("btRRTest") : .First.lib failed for 'btRRTest'
--------------------------------

My understand is that the "StrToInternal" should be compiled in a shared 
library such as R.so. How can I use this function in my code to avoid 
the "undefined symbol" error?

Thanks

-jason


From putler at sauder.ubc.ca  Mon Oct 17 10:39:24 2005
From: putler at sauder.ubc.ca (Dan Putler)
Date: Mon, 17 Oct 2005 01:39:24 -0700
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <4660.138.217.40.89.1129433261.squirrel@homebase.wehi.edu.au>
References: <4350FB09.3020503@sciviews.org>
	<4660.138.217.40.89.1129433261.squirrel@homebase.wehi.edu.au>
Message-ID: <6822F815-105F-4749-93F8-F9295EE543A9@sauder.ubc.ca>

Hi All,

While I don't have the "sweat equity" that either Philippe Grosjean  
and James Wettenhall have in developing R GUI's, I have been involved  
in two different projects (obveRsive as part of the founding  
development team, and R Commander as a contributor) over the past  
three years. In addition, my interest is in R GUIs that are not  
platform specific (such as Philippe's SciViews for Windows or Thomas  
Friedrichsmeier's RKward for KDE). Based on a combination of both my  
experience and my interest, I want to make two observations, and  
offer three opinions about issues people should consider when  
thinking about what they can do to move GUI's for R forward.

My first observation is that gluing R to any external, platform  
independent, widget tool kit is hard. James indicates that it isn't  
easy for wxWidgets. My memory is he got it to work under Window's,  
but had a hard time making it work under Linux, and Jan de Leeuw also  
found it to be a real challenge just to get the RSPython layer to  
work under Mac OS X. On the obveRsive project we decided to use the  
Fox tool kit because (1) it had a larger selection of more "modern"  
widgets compared to Tk, and (2) it was the only multi-platform  
toolkit that actually worked under Windows, Linux, and Mac OS X  
platforms at the time we started the project in late 2002 (at that  
time wxWindows hadn't actually been ported to OS X). In order to use  
the Fox toolkit, we decided to use R as a backend. However, we, along  
with a number of other failed early projects (we pretty much decided  
to admit the demise of obveRsive this past week), found this to be a  
Herculean task (Zed Shaw in his work on obveRsive spent many  
frustrating nights trying to think of ways to develop a backend  
approach that worked quickly and consistently). Ultimately, R does  
not behave the way Perl, Python, Ruby, and Tcl/Tk do, which makes  
gluing it to an external GUI toolkit a real chore.

The second observation is that the R Tcl/Tk package is incredibly  
robust (the efforts of Peter Dalgaard and others who have worked on  
this effort should really be applauded in my opinion). I've used  
Rcmdr (based on the R Tcl/Tk package) successfully in classes where  
students used a mix of Windows and Mac OS X machines. To be honest,  
that it works at all, let alone that it is so rock solid, under Mac  
OS X simply amazes me since the Tcl/TK widgets use a different  
windowing system (X11) than the R console application (run under  
Aqua) in a standard, CRAN based, setup on OS X.

My first opinion is that too much bandwidth on the R-sig-gui mailing  
list has been spent on philosophical arguments about which toolkit is  
the "right" one to use. From a practical perspective, the Tk toolkit  
works well on all major platforms. The only real potential  
alternative for multi-platform application seems to be Java (as  
Philippe indicates, GTK2 is problematic under Windows, but also has  
some issues under OS X). However, only the JGR project appears to be  
using Java for an ambitious multi-platform application. At this  
point, I would really like to hear Markus Helbig's, Simon Urbanek's,  
Martin Theus's, and other JGR developers' opinions about the  
suitability of Java as a general tool for developing GUI's for R  
since they would have well informed opinions on this topic.

Second, it is my belief that there is a huge potential benefit to  
devoting efforts to simplify the use of the available working tool  
kits (i.e., the R Tcl/Tk package and Java) so that it is easier to  
develop GUI dialogs for a package or a specific procedure. To that  
end, John Fox has developed a number of macro-based "helper  
functions" for Rcmdr that greatly simplifies the creation of GUI  
dialogs for this package. My guess is that some of these could be  
fairly easily included as part of the R Tcl/Tk package. Moreover,  
other helper functions, based on John's approach, could also be  
developed. Going a bit further, as part of the obveRsive project,  
Thomas Friedrichsmeier wrote a module that enabled obveRsive dialog  
writers to write their dialogs using xml tags. His xml tags approach  
really simplified dialog creation. However, porting what he did for  
obveRsive to R Tcl/Tk would be a very difficult task, but one that is  
worth considering.

  My final opinion (which is focused on the R Tcl/Tk package) is that  
having a limited and "ugly," but working, set of widgets is much more  
important than having an extensive collection of "modern" widgets  
that behave badly, or are only available for some OSs. This is not to  
say that I think no effort should be devoted to expanding the set of  
widgets available under the R Tcl/Tk package, rather, I think there  
is a need for a conversation and consensus about which additional  
widgets would likely provide the greatest improvement in GUI  
applications developed under R as a way of prioritizing any efforts  
in this area, and that the goal of these efforts should be to make  
the desired widgets available under all major operating systems on  
which R runs.

Overall, my belief is that R already has a number of useful tools for  
developing GUIs, and that there is probably much greater return to  
efforts to improve the usability of these existing tools than in  
developing completely new toolkits or developing an API from scratch  
as this moment in time.

My apologies for the length of this post.

Dan

On 15-Oct-05, at 8:27 PM, James Wettenhall wrote:

> Hi Philippe and everyone else,
>
> As you know, I have certainly spent some time thinking about R- 
> GUIs, and
> developing some R-Tcl/Tk GUIs - limmaGUI and affylmGUI (available from
> Bioconductor).  I have also spent some time wishing we could use a GUI
> toolkit with a more modern look and feel.  Hence I have investigated
> wxWidgets, and thought that using wxPython might be the easiest way to
> interface it from R, but I ran into some technical problems  
> (especially
> because I was obsessed with trying to make the interface from R to  
> wx seem
> not-too-object-oriented, i.e. I like the idea of 1. create a  
> dialog, 2.
> add a button etc. like in Tcl/Tk rather defining a dialog class, then
> defining an object which is an instance of that class and then  
> invoking a
> show method on that object etc.)
>
> I can't really afford to make R-GUIs much of a priority in my work any
> more (so I may not read these philosophical discussions about which  
> GUI
> toolkit is best as closely as I used to), but I'm happy to answer any
> specific questions about my experience with R-GUI development.  I hope
> that doesn't sound too presumptuous of me, but I think that John Fox's
> R-Tcl/Tk GUI package (Rcmdr) and mine (limmaGUI and affylmGUI) are  
> some of
> the most sophisticated (and most popular in terms of users)  
> attempts to
> build a platform-independent GUI interface to a command-line R  
> package (or
> packages).  And then there are other really nice GUIs for R which  
> are not
> necessarily platform independent - like some of Philippe's SciViews
> software, and I recently came across a really nice GUI using GraphApp
> (Windows only) for connecting to ODBC - I think it was in Brian  
> Ripley's
> RODBC package.
>
> One point I wanted to make here is that there are some people in the R
> community who have really great experience to offer from trying to  
> develop
> better R GUIs, but who don't necessarily participate on the R-SIG-GUI
> mailing list.  For example, I was talking to Jan de Leeuw on the R- 
> SIG-MAC
> mailing list and he mentioned that he has done some great work  
> trying to
> interface R-wxPython, but that it was difficult maintaining the glue
> between the different components.  And there are people in  
> Bioconductor
> (e.g. Jianhua Zhang - widgetTools & tkWidgets,  Jeff Gentry -
> widgetInvoke) and there are people who have been involved in  
> OmegaHat e.g.
> Duncan Temple Lang who all have great experience to offer.
>
> But some of the 'philosophical' ideas that people would like to  
> implement
> e.g. interfacing R and wxWidgets 'directly' without going through  
> Python
> (e.g. using Cable Swig) (or interfacing R and Tk via C rather than via
> Tcl) seem like a massive task, and no-one seems sufficiently  
> motivated to
> provide money to employ someone (or multiple people) to do  
> something as
> big as that.
>
> Just my thoughts.  Feel free to ignore.
> Regards,
> James
>
> _______________________________________________
> R-SIG-GUI mailing list
> R-SIG-GUI at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-gui
>


From hin-tak.leung at cimr.cam.ac.uk  Mon Oct 17 10:45:30 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Mon, 17 Oct 2005 09:45:30 +0100
Subject: [Rd] R GUI considerations (was: R, Wine, and multi-threadedness)
In-Reply-To: <4350FB09.3020503@sciviews.org>
References: <4350FB09.3020503@sciviews.org>
Message-ID: <435364AA.7000303@cimr.cam.ac.uk>

Hi,

Since you mentioned tcltk2 and python+wxWidgets, what about Tkinter 
(python's built-in binding to tk)? It is somewhere between the two,
and is shipped as standard these days with python 2.x. Also, if Perl/Tk
works, and Tkinter works, there is no reason why one can't do R/Tk,
without the Tcl (or the obvious Tcl-ish stuff) in the middle.

Just an idea.

Hin-Tak Leung

Philippe Grosjean wrote:
> Hello,
> 
> Following a discussion initiated on r-devel, that mentions SciViews-R 
> and other GUIs issues for R, I would like to make comments (and would be 
> happy if these comments would initiate interesting initiatives).
> 
> A big, big problem with SciViews-R is that a part of it is written in 
> Visual Basic 6, a M$$$$ language, not supported any more, buggy, non 
> transposable to other platforms, etc, etc. Last year, I started to 
> rewrite SciViews-R, using much more native R code, which will ultimately 
> give what I call a "R GUI API", currently partly implemented in the 
> SciViews bundle available on CRAN. That "R GUI API" is a lot of work: 
> thousands of lines of code for the full API, and as I said, only a part 
> of it is currently implemented. That API is developed with reusability 
> in mind: platform-independent, better basis to rewrite SciViews-R in a 
> different language, and freely available for use by other GUIs. However, 
> nobody seems to be interested by this API (may be because it is not 
> documented enough?). Even simple functions like progress() in the svMisc 
> package are ignored, although they could be useful to some people. Well, 
> I regret this situation, but I don't care much more than that: after 
> all, the main goal is to make it the basis of the future 
> platform-independent implementation of SciViews-R.
> 
> Now, regarding the rewritting of SciViews-R itself in a 
> platform-independent environment (i.e., language + graphical widget), 
> this is not undertaken currently for the reason I am not satisfied 
> enough with all curerently existing solutions for various reasons. I 
> give just a few explanations here:
> 
> 1) R + Tcl + Tk. The tcltk R package is widely available and largely 
> debugged. However, there are still problems to make a 100% Tcl console 
> for R (look at Peter Dalgaard's attempt in the package, not complete, 
> not 100% operational, currently). Another problem: the Tk widgets are a 
> little bit old-fashion, and I miss a lot of features provided by more 
> advanded graphical widgets like wxWidgets, for instance. However, it 
> seems to be the best bet, currently. So, I explore various kinds of 
> additions that could make Tcl + Tk a better and more modern GUI 
> implementation. Look at http://www.sciviews.org/SciViews-R... the 
> "tcltk2" package. In that package, I add "Tile", a series of themable 
> and more modern widgets, the famous "tkTable", a tooltip widget, a text 
> widget with synthax colouring, a tree widget, etc. + some Windows 
> specific stuff that help regarding problems like focusing on a Tk 
> window, and communicating with other apps. However, I face the problem 
> of installing all these additional widgets seemlessly under all 
> paltforms supported by R. For the pure Tcl widgets, no problems. But for 
> widgets with compiled code, like Tile or tkTable, this is much more 
> difficult... And since I mainly work on Windows...
> 
> 2) wxWidgets. This is a really great, very capable and 
> platform-independent solution. I like very much James Wettenhal attemps 
> of using wxPython (wxWidgets + Python) through RSPython and the 
> experimental wxPython R package. However, it is still alpha, there are 
> problems to finalize it, and his author is not continuing its 
> development for reasons that are personal to him. So, I am not sure we 
> will have a usable version available soon to integrate wxWidgets with R 
> and use it for a R GUI.
> 
> 3) JAVA. There is a good R GUI written in JAVA: JGR. Moreover, something 
> like the Eclipse platform is a very promizing environment for a 
> rich-featured R IDE. JAVA specialists in my University say such a GUI, 
> written in JAVA will be relatively slow compared to other solutions. 
> However, JGR is a good actual counter-example.
> 
> 4) GTK2. Great widgets... but forgets Windows. I installed and used Gimp 
> under Windows. This is certainly the best demonstration on what can be 
> done with GTK2 under Windows. I must admit I am very disappointed as a 
> Windows user: look&feel is very different, and irritating in several 
> aspects.
> 
> So, a long mail to conclude that, if I still haven't started to 
> implement the platform-independent version of SciViews-R, it is because 
> I am not convinced that any of the currently available R + rich-featured 
> and platform-independent widgets solutions available is the one that 
> will make it possible to reimplement SciViews-R in a streamless and 
> relatively bug-free manner. To summarize, the currently best candidate 
> is R + tcltk + tcltk2. I am convinced that R + Python + wxWidgets is by 
> far a much better solution, but it is still in alpha development. 
> Eclipse + JGR looks promising, and GTK2 is there too, but not enough 
> integrated under Windows for me to start using such a solution, as a 
> Windows user.
> 
> I don't have much time to dedicate to SciViews-R and to the Sciviews R 
> GUI API for the moment, and I will certainly focus on four hot topics: 
> (1) developing the actual SciViews-R as a better teaching aid (I use and 
> need it for my own courses!), (2) contributing to the development of 
> Tinn-R, (3) further integrating R Commander with SciViews-R, and (4) 
> integrating Rpad with SciViews-R. However, I will have various contracts 
> in 2006-2007 where the development of SciViews-R is a part of the job. 
> So, I will have the opportunity to hire one or two developers, and this 
> will hopefully speed up SciViews-R development in a directly that will 
> satisfy more users.
> 
> Otherwise, I am open to any suggestion, and more importantly, to any 
> idea of collaboration with other R GUI developers, as it is currently 
> the case with John Fox (R Commander integration with SciViews-R), 
> Jose-Claudio Faria (Tinn-R developement and Tinn-R compatibility with 
> SciViews-R), and Tom Short (Rpad developments and compatibility with 
> SciViews-R). I think it is important to insist on this, in a world 
> populated with a myriad of slowly developed, half finished, half 
> featured R GUIs, made by people that look too individualist in my view 
> to be able of working all together and to write a single R GUI that has 
> any chance to be full-featured, well-documented, reasonnably bug-free, 
> truly platform-independent, in a near future.
> 
> Best,
> 
> Philippe Grosjean
> 
> ..............................................<?}))><........
>   ) ) ) ) )
> ( ( ( ( (    Prof. Philippe Grosjean
>   ) ) ) ) )
> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>   ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
> ( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
>   ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
> ( ( ( ( (
>   ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
> ( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
>   ) ) ) ) )
> ( ( ( ( (    web:   http://www.umh.ac.be/~econum
>   ) ) ) ) )          http://www.sciviews.org
> ( ( ( ( (
> ..............................................................
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From hin-tak.leung at cimr.cam.ac.uk  Mon Oct 17 11:27:03 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Mon, 17 Oct 2005 10:27:03 +0100
Subject: [Rd] Cross compiler  taqrgeting Mac OS X
In-Reply-To: <4352ADFE.7050403@otter-rsch.com>
References: <4352ADFE.7050403@otter-rsch.com>
Message-ID: <43536E67.40904@cimr.cam.ac.uk>

If it is open-source work, get yourself an account on sourceforge -
they have a compile-farm for this sort of purpose, and they have one (or 
two?), I have used the Mac OS X machine there.  This way, at least
you can test your work natively on Mac OS X. A bit easier to do than
cross-compiling.

Good luck.

Hin-Tak Leung

dave fournier wrote:
> Hi,
> 
> I have been asked to produce a binary of some software for somone 
> running R on Mac OS X. I don't have a Mac and don't know anything about 
> them.
> The sloution would seem to be to obtain/build a crsoo compiler on
> windows or probably easier on Linux i686. I would appreciate any advice 
> on how how to go about this. I understand there are a number of 
> different versions of Mac OS X. Are there compatability issues?
> also 32/64 bit issues.
> 
>       Dave
> 
>


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Mon Oct 17 12:57:10 2005
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: Mon, 17 Oct 2005 12:57:10 +0200
Subject: [Rd] [R-gui]      R GUI considerations
In-Reply-To: <43537220.1070705@sciviews.org>
References: <4350FB09.3020503@sciviews.org>
	<1129490486.5518.140.camel@localhost.localdomain>
	<43537220.1070705@sciviews.org>
Message-ID: <200510171257.10940.thomas.friedrichsmeier@ruhr-uni-bochum.de>

Hi Philippe,

> I answer to Marc's email, because I think it is the most constructive
> one. I am a little bit dissapointed that the discussion about R GUIs,
> whatever the initial subject, inevitably shifts to an endless discussion
> about which graphical toolkit to use, and whether one should interface
> it directly, or by means of an intermediary language perhaps more
> suitable for handling widgets events.
>
> Should I recall that this thread is *not* about which graphical toolkit
> to use, but is trying to trigger a discussion on how could we work
> together to avoid duplication in coding for R GUIs, and perhaps, join in
> a common project. Something totally different!

ok, I misunderstood you then. I thought you were in fact talking about drawing 
up a common ultimate R GUI project. Then in fact, discussions about which 
toolkit to use, etc., would arise quite naturally. And that is, what I wrote 
in my last mail, what I don't think will ever lead anywhere.
If you're talking about finding certain defined areas of collaboration, I'm 
all for doing that. I don't think I will attend UseR, but I'm certainly open 
to discussions of this sort. I support the idea of a wiki.
Here are some thoughts, on what I think might be areas of collaboration:

1) You talk about an API for R GUIs written in R. To me personally, this is 
not an attractive topic, as my approach is to do _all_ GUI stuff outside of R 
(I think of R more as an evaluation backend in rkward). Of course this is no 
reason against starting such a discussion. However, in addition, I'd like to 
bring in my idea of xml-specified GUIs again (this is useful in my approach, 
but probably not so much in yours). This could be discussed as a _separate_ 
topic.
2) As I mentioned in the last mail: Drawing up a flexible output format, that 
will allow small modifications on the fly. This includes R functions to 
generate such an output format. Something like R2HTML, only more flexible, 
allowing for dynamic changes.
3) R library API enhancements. GUIs have some specific needs for the R 
(C/library) API. Such needs do not seem top priority for the R core 
developers (no offence intended). Last week I proposed some API additions to 
the R C API on r-devel, but never received a reply. I have several more items 
in mind that I would like to see added/changed in the main R library. 
Probably it would be good to have some collaboration on identifying, and 
elaborating our C-API needs.

Many more areas of collaboration could probably be identified. However, I'd 
strongly advise to keep such topics small, well defined, and separate from 
each other. Otherwise we'll once again end up in the discussion about the 
great merger of all R GUI projects, which I don't think will lead anywhere.

Regards
Thomas


From jfox at mcmaster.ca  Mon Oct 17 13:06:53 2005
From: jfox at mcmaster.ca (John Fox)
Date: Mon, 17 Oct 2005 07:06:53 -0400
Subject: [Rd] [R-gui]      R GUI considerations (was: R, Wine,
	and	multi-threadedness)
In-Reply-To: <1129490486.5518.140.camel@localhost.localdomain>
Message-ID: <web-106811152@cgpsrv2.cis.mcmaster.ca>

Dear Marc et al.,

As the author of an R GUI, I've been following this thread with
interest. 

I think that both a session at the UseR! conference and a more informal
meeting to provide an opportunity for discussion are a great idea. It's
hard to make much progress on this kind of issue via email discussion
because there doesn't seem to be general agreement on what is
problematic. For example, some of this thread has focused on the
provision of a tools for R GUI construction, while some has focused on
the relative merits of different GUI toolkits and how to make them
available in R.

Regards,
 John

On Sun, 16 Oct 2005 14:21:25 -0500
 Marc Schwartz <MSchwartz at mn.rr.com> wrote:
> Greetings all,
> 
> While recognizing that "this is easier said, than done", is there any
> logic in suggesting that for those who might be interested, a
> specific R
> GUI session of sorts be added to the UseR! 2006 meeting schedule?
> 
> Since some quorum of interested GUI users may be planning to attend
> the
> meeting or may be motivated to do so, it may be an opportunity to:
> 
> 1. Leverage face to face interaction and visualize possible options
> 
> 2. Define areas of commonality
> 
> 3. Bring some level of focus to targeted segments of the user base
> that
> would utilize a GUI and for whom there may be differing functional
> requirements.
> 
> 4. Identify cross-platform opportunities and technologies
> 
> 5. See further notes below...
> 
> 
> Some of the preliminary work could no doubt be done in advance to
> better
> prepare and structure discussion.
> 
> This could be done as a "breakout" session or if there is sufficient
> interest (and facility/funding issues can be resolved) perhaps a
> group
> session held the day before or perhaps the day after the main
> conference
> program.
> 
> If there is a core group that is interested in pursuing this, an
> announcement could be made to the respective R e-mail lists (r-help,
> r-devel, r-sig-gui, etc.) whereby, with the sufficient lead time as
> we
> have, the requisite activities could be put in place to orchestrate
> the
> session, define specific desired outcomes and identify individuals
> willing to spend their time to coordinate and make this venture
> successful (however success would be defined).
> 
> There is no business or financial motivation here for a GUI. If there
> was and a for profit company decided that there would be a
> significant
> return on investment, they would spend the money, hire the resources,
> define a team leader and put forth a single development spec for a
> GUI
> project based upon their own market research. It would be done in a
> relatively authoritarian fashion and if you didn't agree, you would
> be
> asked to find a job elsewhere.
> 
> Here, you would need to solicit voluntary resources, reconcile the
> expected differences of opinion on the spectrum of matters that would
> have to be addressed and define some common framework for operating,
> perhaps based upon targeted user segments.
> 
> This subject, as mentioned, has come up on the lists previously, with
> no
> common resolution, resulting of course in the individual activities
> that
> have emerged.
> 
> Is there a group of motivated useRs out there, who have the time,
> energy, and skills and are willing to work within the framework of a
> design and development "team" environment, where a quid pro quo for
> moving forward could evolve from the User! 2006 meeting? 
> 
> Is there an individual, who would need to emerge from that group, who
> has the respect and requisite skills to drive a consensus of opinion
> and
> keep a team focused and moving in the proper direction?
> 
> If so, that might be a step in the direction of evolving a GUI that
> might make sense for some yet to be defined range of useRs, who would
> not otherwise utilize the CLI or might need to evolve in that
> direction
> over time.
> 
> If not, then the status quo continues...
> 
> There are some 300 Linux distributions out there and multiple X based
> GUIs, which have evolved for reasons as varied as those behind the
> available R GUIs and more. Yet there are a select few base Linux
> distributions and largely two GUIs that have garnered any significant
> market share. Perhaps, over time, lacking any coordinated activity, a
> similar situation will evolve here, if the predicate that a broad
> demand
> for a R GUI is valid.
> 
> If the predicate is false, then this process is perhaps rightly done
> by
> individuals meeting narrowly focused, local requirements.
> 
> I should note, that I am not prospective GUI user, but a happy ESS
> user.
> I simply thought that I would try to provoke some discussion on this
> point, since I jumped into this thread earlier in the week.
> 
> Best regards,
> 
> Marc Schwartz
> 
> _______________________________________________
> R-SIG-GUI mailing list
> R-SIG-GUI at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-gui

--------------------------------
John Fox
Department of Sociology
McMaster University
Hamilton, Ontario, Canada
http://socserv.mcmaster.ca/jfox/


From RKrug at sun.ac.za  Mon Oct 17 13:13:35 2005
From: RKrug at sun.ac.za (Rainer M. Krug)
Date: Mon, 17 Oct 2005 13:13:35 +0200
Subject: [Rd] Control R from another program (written in Delphi)
Message-ID: <4353875F.8090908@sun.ac.za>

Hi

I want to analysis data (generatet in a simulation written in Delphi) in 
R and the user interface will also written in Delpni -0 i.e. I want to 
control R from another program which is written in Delphi.
At the moment I am using the (D)COM interface but as I would like to run 
R on a Linux Cluster, thits is not an option any more.
What is the easiest way of copntrolluing R over the network? I thought 
about sockets, but I am a little bit stuck.

Any tips welcome,

Rainer


-- 
NEW TELEPHONE NUMBER
Tel:		+27 - (0)72 808 2975 (w)

Rainer M. Krug, Dipl. Phys. (Germany), MSc Conservation
Biology (UCT)

Department of Conservation Ecology
University of Stellenbosch
Matieland 7602
South Africa

Tel:		+27 - (0)72 808 2975 (w)
Fax:		+27 - (0)21 808 3304
Cell:		+27 - (0)83 9479 042

email:	RKrug at sun.ac.za
       	Rainer at krugs.de


From richard.haney at duke.edu  Mon Oct 17 16:04:29 2005
From: richard.haney at duke.edu (Richard Haney)
Date: Mon, 17 Oct 2005 10:04:29 -0400
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <4350FB09.3020503@sciviews.org>
Message-ID: <OF7063A443.63DAFDA3-ON8525709D.0047971F-8525709D.004D4D82@notes.duke.edu>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051017/5735336f/attachment.pl

From pgilbert at bank-banque-canada.ca  Mon Oct 17 16:21:31 2005
From: pgilbert at bank-banque-canada.ca (Paul Gilbert)
Date: Mon, 17 Oct 2005 10:21:31 -0400
Subject: [Rd] checking S3 generic/method consistency
In-Reply-To: <17233.23605.541027.272159@mithrandir.hornik.net>
References: <434FE1B2.7010206@bank-banque-canada.ca>
	<17233.23605.541027.272159@mithrandir.hornik.net>
Message-ID: <4353B36B.9090905@bank-banque-canada.ca>

Kurt

Ok, but I'm still confused about what "as seen from the package" means. 
I'm especially confused because at first in my testing (on Linux) a 
method (in a package not in dse but using dse1) was being compared 
against the stats generic, so I put in a work around. Then I discovered 
in Solaris the comparison was made against the generic in dse1. And now, 
after some further ongoing development I find that in some of my 
packages in Linux it is compared against the dse1 generic, and I can't 
see what is different between the ones compared with dse1 and the ones 
compared with stats. This is all with the released version of R-2.2.0. I 
can't figure out what changes this, but I'm not even sure where to start 
looking. Is the package's view determined by its NAMESPACE, Depends in 
the DESCRIPTION file, or if there is requires() in the .onLoad will that 
override? This is all with a fairly "clean" test environment. What 
happens when other packages are attached? Where/how does it break when 
there are other packages attached that need conflicting generics (or can 
that actually work)?

Thanks,
Paul

Kurt Hornik wrote:
>>>>>>Paul Gilbert writes:
> 
> 
>>In R-2.2.0,  how does   "checking S3 generic/method consistency"  
>>determine which generic to check against when there are two?  I have a 
>>generic "simulate" in dse1 and there is a new generic "simulate" in 
>>stats, and I don't seem to be able to get  my simulate methods to be 
>>checked consistently against one or the other. Is this deteremined by 
>>Depends in the DESCRIPTION file, the NAMESPACE, or something else?
> 
> 
> It is attempted to use the generic "as seen from the package".
> Actually, I made a code change to get things right for dse ...
> 
> -k


From simon.urbanek at r-project.org  Mon Oct 17 16:43:02 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Mon, 17 Oct 2005 16:43:02 +0200
Subject: [Rd] Control R from another program (written in Delphi)
In-Reply-To: <4353875F.8090908@sun.ac.za>
References: <4353875F.8090908@sun.ac.za>
Message-ID: <8ADCAEAC-340B-467F-AA62-F551558F6611@r-project.org>

Rainer,

On Oct 17, 2005, at 1:13 PM, Rainer M. Krug wrote:

> At the moment I am using the (D)COM interface but as I would like  
> to run R on a Linux Cluster, thits is not an option any more.
> What is the easiest way of copntrolluing R over the network? I  
> thought  about sockets, but I am a little bit stuck.

We have been using snow+Rpvm very successfully. There are tons of  
other approaches and tools as well (mosix, rmpi, snowFT, ...). I  
would start with snow, because it is very flexible and even offers  
socket-only solution when necessary.

Cheers,
Simon


From wettenhall at wehi.EDU.AU  Mon Oct 17 16:44:43 2005
From: wettenhall at wehi.EDU.AU (James Wettenhall)
Date: Tue, 18 Oct 2005 00:44:43 +1000 (EST)
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
 and multi-threadedness)
In-Reply-To: <4350FB09.3020503@sciviews.org>
References: <4350FB09.3020503@sciviews.org>
Message-ID: <4314.138.217.40.89.1129560283.squirrel@homebase.wehi.edu.au>

Hi,

One point I forgot to make last time is that I'm a big fan of prototyping.
 I have almost no experience whatsoever in Java Swing, but there are
plenty of people in the R community who do - e.g. Simon Urbanek and the
JGR team.  In the past, I have had trouble finding any elegant prototypes
(e.g. "Hello, World" applications) interfacing R with Java Swing.

Similarly, I'd love to see "Hello, World" prototypes for R-Qt etc. Of
course for many of those GUI systems originally developed for Linux or
Unix, there is the question of how reliably you can port them to the most
popular operating system in the world and to MacOS X.  I love using GIMP
under Windows, but how many Windows software developers would say that
compiling GTK on Windows (e.g. within an R package) is easy?  That's why I
liked wxPython/wxWidgets because it didn't attempt the difficult task of
porting GTK to Windows - it just uses native Windows widgets on Windows
and GTK widgets on Linux.

I don't want to emphasize my interest in prototypes too strongly though -
I still think that there is a lot of work to be done beyond any prototype.
 Maybe the successful publication of Rcmdr in the Journal of Statistical
Software will give me hope that the academic community will eventually
feel more comfortable asking for money to employ people to do some
challenging GUI-related software development which may not immediately
promise publications within the core research aims of a particular
department/institute.   Or maybe [horrible thought], some business outside
the academic community will provide a very expensive but very good GUI
development system for R.

Best regards,
James


From p.dalgaard at biostat.ku.dk  Mon Oct 17 17:09:12 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 17 Oct 2005 17:09:12 +0200
Subject: [Rd] [R-gui]  R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <435364AA.7000303@cimr.cam.ac.uk>
References: <4350FB09.3020503@sciviews.org> <435364AA.7000303@cimr.cam.ac.uk>
Message-ID: <x2irvwtc2v.fsf@turmalin.kubism.ku.dk>

Hin-Tak Leung <hin-tak.leung at cimr.cam.ac.uk> writes:

> Hi,
> 
> Since you mentioned tcltk2 and python+wxWidgets, what about Tkinter 
> (python's built-in binding to tk)? It is somewhere between the two,
> and is shipped as standard these days with python 2.x. Also, if Perl/Tk
> works, and Tkinter works, there is no reason why one can't do R/Tk,
> without the Tcl (or the obvious Tcl-ish stuff) in the middle.

As far as I know, Tkinter does use Tcl as a glue language, just like
R. Perl/Tk tried the stunt of bypassing Tcl, which I think mainly has
bought them difficulties in keeping up with new Tk versions. Notice
that a direct Tk interface needs to map each and every piece of Tk
functionality, whereas you otherwise just need to implement tcl() and
a handful of object conversion routines. (OK, so it wasn't all _that_
simple, but you get the point...)

The Tcl C interface that gets used by the tcltk package is actually
one of the strong points of Tcl/Tk (as opposed to Tcl as a scripting
language for entire applications, which can be a bit of a pain.)
Especially with the Tcl_EvalObjv interface in place, things really
work quite smoothly, since the "quoting hell" of the string-based
interface is bypassed.
 
> Just an idea.
> 
> Hin-Tak Leung
> 
> Philippe Grosjean wrote:
> > Hello,
> > 
> > Following a discussion initiated on r-devel, that mentions SciViews-R 
> > and other GUIs issues for R, I would like to make comments (and would be 
> > happy if these comments would initiate interesting initiatives).
> > 
> > A big, big problem with SciViews-R is that a part of it is written in 
> > Visual Basic 6, a M$$$$ language, not supported any more, buggy, non 
> > transposable to other platforms, etc, etc. Last year, I started to 
> > rewrite SciViews-R, using much more native R code, which will ultimately 
> > give what I call a "R GUI API", currently partly implemented in the 
> > SciViews bundle available on CRAN. That "R GUI API" is a lot of work: 
> > thousands of lines of code for the full API, and as I said, only a part 
> > of it is currently implemented. That API is developed with reusability 
> > in mind: platform-independent, better basis to rewrite SciViews-R in a 
> > different language, and freely available for use by other GUIs. However, 
> > nobody seems to be interested by this API (may be because it is not 
> > documented enough?). Even simple functions like progress() in the svMisc 
> > package are ignored, although they could be useful to some people. Well, 
> > I regret this situation, but I don't care much more than that: after 
> > all, the main goal is to make it the basis of the future 
> > platform-independent implementation of SciViews-R.
> > 
> > Now, regarding the rewritting of SciViews-R itself in a 
> > platform-independent environment (i.e., language + graphical widget), 
> > this is not undertaken currently for the reason I am not satisfied 
> > enough with all curerently existing solutions for various reasons. I 
> > give just a few explanations here:
> > 
> > 1) R + Tcl + Tk. The tcltk R package is widely available and largely 
> > debugged. However, there are still problems to make a 100% Tcl console 
> > for R (look at Peter Dalgaard's attempt in the package, not complete, 
> > not 100% operational, currently). Another problem: the Tk widgets are a 
> > little bit old-fashion, and I miss a lot of features provided by more 
> > advanded graphical widgets like wxWidgets, for instance. However, it 
> > seems to be the best bet, currently. So, I explore various kinds of 
> > additions that could make Tcl + Tk a better and more modern GUI 
> > implementation. Look at http://www.sciviews.org/SciViews-R... the 
> > "tcltk2" package. In that package, I add "Tile", a series of themable 
> > and more modern widgets, the famous "tkTable", a tooltip widget, a text 
> > widget with synthax colouring, a tree widget, etc. + some Windows 
> > specific stuff that help regarding problems like focusing on a Tk 
> > window, and communicating with other apps. However, I face the problem 
> > of installing all these additional widgets seemlessly under all 
> > paltforms supported by R. For the pure Tcl widgets, no problems. But for 
> > widgets with compiled code, like Tile or tkTable, this is much more 
> > difficult... And since I mainly work on Windows...
> > 
> > 2) wxWidgets. This is a really great, very capable and 
> > platform-independent solution. I like very much James Wettenhal attemps 
> > of using wxPython (wxWidgets + Python) through RSPython and the 
> > experimental wxPython R package. However, it is still alpha, there are 
> > problems to finalize it, and his author is not continuing its 
> > development for reasons that are personal to him. So, I am not sure we 
> > will have a usable version available soon to integrate wxWidgets with R 
> > and use it for a R GUI.
> > 
> > 3) JAVA. There is a good R GUI written in JAVA: JGR. Moreover, something 
> > like the Eclipse platform is a very promizing environment for a 
> > rich-featured R IDE. JAVA specialists in my University say such a GUI, 
> > written in JAVA will be relatively slow compared to other solutions. 
> > However, JGR is a good actual counter-example.
> > 
> > 4) GTK2. Great widgets... but forgets Windows. I installed and used Gimp 
> > under Windows. This is certainly the best demonstration on what can be 
> > done with GTK2 under Windows. I must admit I am very disappointed as a 
> > Windows user: look&feel is very different, and irritating in several 
> > aspects.
> > 
> > So, a long mail to conclude that, if I still haven't started to 
> > implement the platform-independent version of SciViews-R, it is because 
> > I am not convinced that any of the currently available R + rich-featured 
> > and platform-independent widgets solutions available is the one that 
> > will make it possible to reimplement SciViews-R in a streamless and 
> > relatively bug-free manner. To summarize, the currently best candidate 
> > is R + tcltk + tcltk2. I am convinced that R + Python + wxWidgets is by 
> > far a much better solution, but it is still in alpha development. 
> > Eclipse + JGR looks promising, and GTK2 is there too, but not enough 
> > integrated under Windows for me to start using such a solution, as a 
> > Windows user.
> > 
> > I don't have much time to dedicate to SciViews-R and to the Sciviews R 
> > GUI API for the moment, and I will certainly focus on four hot topics: 
> > (1) developing the actual SciViews-R as a better teaching aid (I use and 
> > need it for my own courses!), (2) contributing to the development of 
> > Tinn-R, (3) further integrating R Commander with SciViews-R, and (4) 
> > integrating Rpad with SciViews-R. However, I will have various contracts 
> > in 2006-2007 where the development of SciViews-R is a part of the job. 
> > So, I will have the opportunity to hire one or two developers, and this 
> > will hopefully speed up SciViews-R development in a directly that will 
> > satisfy more users.
> > 
> > Otherwise, I am open to any suggestion, and more importantly, to any 
> > idea of collaboration with other R GUI developers, as it is currently 
> > the case with John Fox (R Commander integration with SciViews-R), 
> > Jose-Claudio Faria (Tinn-R developement and Tinn-R compatibility with 
> > SciViews-R), and Tom Short (Rpad developments and compatibility with 
> > SciViews-R). I think it is important to insist on this, in a world 
> > populated with a myriad of slowly developed, half finished, half 
> > featured R GUIs, made by people that look too individualist in my view 
> > to be able of working all together and to write a single R GUI that has 
> > any chance to be full-featured, well-documented, reasonnably bug-free, 
> > truly platform-independent, in a near future.
> > 
> > Best,
> > 
> > Philippe Grosjean
> > 
> > ..............................................<?}))><........
> >   ) ) ) ) )
> > ( ( ( ( (    Prof. Philippe Grosjean
> >   ) ) ) ) )
> > ( ( ( ( (    Numerical Ecology of Aquatic Systems
> >   ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
> > ( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
> >   ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
> > ( ( ( ( (
> >   ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
> > ( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
> >   ) ) ) ) )
> > ( ( ( ( (    web:   http://www.umh.ac.be/~econum
> >   ) ) ) ) )          http://www.sciviews.org
> > ( ( ( ( (
> > ..............................................................
> > 
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> _______________________________________________
> R-SIG-GUI mailing list
> R-SIG-GUI at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-gui
> 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From JHZhang at mdanderson.org  Mon Oct 17 17:16:13 2005
From: JHZhang at mdanderson.org (JHZhang@mdanderson.org)
Date: Mon, 17 Oct 2005 17:16:13 +0200 (CEST)
Subject: [Rd] Make problem (PR#8210)
Message-ID: <20051017151613.1D42120BE6@slim.kubism.ku.dk>

Solaris 8
Gnu Make 3.79.1
R-2.2.0

./configure --prefix=/path/to/here
is ok.
make error messages,

creating doc/html/resources.html
*** Error code 255
make: Fatal error: Command failed for target `../html/resources.html'
Current working directory /home/zhangj/apps/R/R-patched/doc/manual
cp: ../../bin: is a directory
install: cp ../../bin ./BATCH/bin failed 
*** Error code 2
make: Fatal error: Command failed for target `install-cmds'
Current working directory /home/zhangj/apps/R/R-patched/src/scripts
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /home/zhangj/apps/R/R-patched/src/scripts
*** Error code 1
make: Fatal error: Command failed for target `R'
Current working directory /home/zhangj/apps/R/R-patched/src
*** Error code 1
make: Fatal error: Command failed for target `R'

Jun H. Zhang
Biostatistics and Applied Mathematics
MD Anderson Cancer Center
713-792-2606
	[[alternative HTML version deleted]]


From ripley at stats.ox.ac.uk  Mon Oct 17 17:27:32 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Oct 2005 17:27:32 +0200 (CEST)
Subject: [Rd] Make problem (PR#8210)
Message-ID: <20051017152732.B0B351046A@slim.kubism.ku.dk>

In what sense is this a bug in R?

The R-admin manual tells you R 2.2.0 has been successfully compiled on 
several such systems.  There is something amiss with your Solaris 
setup, not generically with R.  By guess is that you are out of file 
space.

On Mon, 17 Oct 2005 JHZhang at mdanderson.org wrote:

> Solaris 8
> Gnu Make 3.79.1
> R-2.2.0
>
> ./configure --prefix=/path/to/here
> is ok.
> make error messages,
>
> creating doc/html/resources.html
> *** Error code 255
> make: Fatal error: Command failed for target `../html/resources.html'
> Current working directory /home/zhangj/apps/R/R-patched/doc/manual
> cp: ../../bin: is a directory
> install: cp ../../bin ./BATCH/bin failed
> *** Error code 2
> make: Fatal error: Command failed for target `install-cmds'
> Current working directory /home/zhangj/apps/R/R-patched/src/scripts
> *** Error code 1
> make: Fatal error: Command failed for target `R'
> Current working directory /home/zhangj/apps/R/R-patched/src/scripts
> *** Error code 1
> make: Fatal error: Command failed for target `R'
> Current working directory /home/zhangj/apps/R/R-patched/src
> *** Error code 1
> make: Fatal error: Command failed for target `R'
>
> Jun H. Zhang
> Biostatistics and Applied Mathematics
> MD Anderson Cancer Center
> 713-792-2606
> 	[[alternative HTML version deleted]]
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From jmaydt at mpi-sb.mpg.de  Mon Oct 17 18:17:16 2005
From: jmaydt at mpi-sb.mpg.de (jmaydt@mpi-sb.mpg.de)
Date: Mon, 17 Oct 2005 18:17:16 +0200 (CEST)
Subject: [Rd] formatC using a "single" as argument (PR#8211)
Message-ID: <20051017161716.15CEE205FE@slim.kubism.ku.dk>

Full_Name: Jochen Maydt
Version: R2.2.0
OS: Windows
Submission from: (NULL) (139.19.34.7)


formatC does not handle "single"s correctly:

> formatC(as.single(1))
[1] "5.264e-315"
attr(,"Csingle")
[1] TRUE

This seems to be an unlikely use-case, however.

Thank you for creating a great programming language,
Jochen


From vasu.akkineni at gmail.com  Mon Oct 17 18:18:02 2005
From: vasu.akkineni at gmail.com (Vasundhara Akkineni)
Date: Mon, 17 Oct 2005 12:18:02 -0400
Subject: [Rd] Display a plot in an applet.
Message-ID: <3b67376c0510170918v2e3ebfc6pae281067727d1f6e@mail.gmail.com>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051017/fe45a506/attachment.pl

From ripley at stats.ox.ac.uk  Mon Oct 17 18:32:56 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 17 Oct 2005 18:32:56 +0200 (CEST)
Subject: [Rd] formatC using a "single" as argument (PR#8211)
Message-ID: <20051017163256.8389ACBF0@slim.kubism.ku.dk>

Reading the help page for formatC

        x: an atomic numerical or character object, typically a vector
           of real numbers.

and that for as.single I think you got what you should have expected!
Nevertheless we will build some protection into 2.3.0.

On Mon, 17 Oct 2005 jmaydt at mpi-sb.mpg.de wrote:

> Full_Name: Jochen Maydt
> Version: R2.2.0
> OS: Windows
> Submission from: (NULL) (139.19.34.7)
>
>
> formatC does not handle "single"s correctly:
>
>> formatC(as.single(1))
> [1] "5.264e-315"
> attr(,"Csingle")
> [1] TRUE
>
> This seems to be an unlikely use-case, however.
>
> Thank you for creating a great programming language,
> Jochen
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Mon Oct 17 18:44:33 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 17 Oct 2005 17:44:33 +0100 (BST)
Subject: [Rd] Display a plot in an applet.
In-Reply-To: <3b67376c0510170918v2e3ebfc6pae281067727d1f6e@mail.gmail.com>
References: <3b67376c0510170918v2e3ebfc6pae281067727d1f6e@mail.gmail.com>
Message-ID: <Pine.LNX.4.61.0510171740370.27880@gannet.stats>

What sort of `Applet' did you have in mind?
Does package HTMLapplets do what you want?
Would package RSvgDevice help?

On Mon, 17 Oct 2005, Vasundhara Akkineni wrote:

> Hello,
> I am trying to display a plot produced in R as part of an Applet. Stating
> more clearly, i want to display a scatter plot(X axis data:1,2,4,5 and
> Y-axis data:4,6,5, 7)produced in R as an Applet. How can this be done?
> Please let me know.
> Thanks,
> Vasu.
>
> 	[[alternative HTML version deleted]]

PLEASE do read the posting guide, and not send HTML mail. Is this the 
appropriate list?

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From nguyentr at cmcic-am.fr  Mon Oct 17 19:09:12 2005
From: nguyentr at cmcic-am.fr (NGUYEN Truong Hoan)
Date: Mon, 17 Oct 2005 19:09:12 +0200
Subject: [Rd] Embedded R in C
Message-ID: <737E15D6A012E24CAE3E82EF0403F07916FDB7A4@gmilp-p1.cdm.cm-cic.fr>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051017/10b5e97f/attachment.pl

From hin-tak.leung at cimr.cam.ac.uk  Mon Oct 17 19:28:11 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Mon, 17 Oct 2005 18:28:11 +0100
Subject: [Rd] Embedded R in C
In-Reply-To: <737E15D6A012E24CAE3E82EF0403F07916FDB7A4@gmilp-p1.cdm.cm-cic.fr>
References: <737E15D6A012E24CAE3E82EF0403F07916FDB7A4@gmilp-p1.cdm.cm-cic.fr>
Message-ID: <4353DF2B.4040207@cimr.cam.ac.uk>

NGUYEN Truong Hoan wrote:
> 	Hello everyone,
> 
> 	I would like to call the R functions from the C++ language
> interface, for example from a program composed on Microsoft Visual C++.
> I have referred the manual Writing R Extensions but i don't understand
> exactly how to make a declaration for the headers Rinternals.h or R.h...

Section 7.2 and in particular, section 7.2.2. of R-ext manual has a
complete example for embedding R in C/C++ code under windows.
    7.2 Embedding R under Windows
    7.2.2 Calling R.dll directly
It looks fairly straight forward and alright to me?

(Granted, IMHO, the section is a bit hiddne and should be placed a
bit earlier and before that stuff in section 5
"The R API: entry points for C code".


HTL


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Mon Oct 17 19:35:56 2005
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: Mon, 17 Oct 2005 19:35:56 +0200
Subject: [Rd] RFC: API to allow identification of warnings and errors in the
	output stream
Message-ID: <200510171935.56499.thomas.friedrichsmeier@ruhr-uni-bochum.de>

Dear R developers,

this mail is basically a summary / clarification of some previous mails I sent 
to this list last week (subject "Catching warning and error output"). Duncan 
Murdoch pointed out that these were badly organized, and suggested I repost, 
collecting the main points previously spread out between several mails.

Problem statement:
In an application embedding R, I would like to identify warnings and errors in 
the output stream. That is, basically, I'm looking for a good way to find 
out, which portions of the output stream are warnings, which are error 
messages, and which are regular output. Such information could be used in a 
GUI to mark up different types of output in different colors, or to ensure 
warnings are brought to the user's attention in situations where output would 
normally be hidden.
I believe this is not currently possible in a good way. For a discussion of 
approaches using the current API, and their drawbacks, refer to 
https://stat.ethz.ch/pipermail/r-devel/2005-October/034975.html.

Suggested solution:
Here are two patches (against R-2.2.0), which I will describe in more detail 
below:
A) http://rkward.sourceforge.net/temp/classify_output_patch.diff
B) http://rkward.sourceforge.net/temp/classify_output_test.diff

Description of and rationale for patch A:
This patch does two things:
1) It adds a function R_WriteErrConsole corresponding to R_WriteConsole. Also, 
a corresponding interface pointer ptr_R_WriteErrConsole is added.
I think this change is highly consistent with output handling in R in general. 
There are different sink ()s for "output" and "message", there is the 
distinction between Rprintf/Rvprintf and REprintf/REvprintf. This basically 
just carries this distinction over to the interface pointers.
You will note that I wrote
ptr_R_WriteErrConsole = R_WriteConsole;
instead of
ptr_R_WriteErrConsole = Rstd_WriteErrConsole;
or
ptr_R_WriteErrConsole = ptr_R_WriteConsole;
This way, code that currently overrides ptr_R_WriteConsole, but does not know 
about ptr_R_WriteErrConsole, will still receive all output in 
ptr_R_WriteConsole. Hence this change is perfectly backwards compatible.
Of course, the naming may not be perfect?

2) While 1 makes it easy to split warning _and_ errors (and messages) from 
regular output, it does not suffice to differentiate _between_ warnings, 
errors, and messages on the error channel. The patch addresses this, by 
making inError, inWarning, and inPrintWarnings from errors.c accessible 
(read-only) in R_ext/Error.h.
This part of the patch may be slightly more delicate, in that inError, 
inWarning, and inPrintWarnings seem to be more internal status indications. 
So the question is: Are those potentially subject to change, if errors.c is 
redesigned some day? My feeling is that this is still relatively safe, 
however. Such indications can easily be set/unset at entry/exit points of the 
corresponding functions, as long as there are separate handlers for warnings, 
errors, and printWarnings. I guess this is not likely to ever change 
fundamentally.
As a slightly safer variation, R_inError (), R_inWarning (), and 
R_inPrintWarnings () could return a boolean indication only, instead of the 
int-code, which might be more subject to change.

Description of and rationale for patch B:
Patch B probably helps a lot to illustrate, how patch A works, and how this is 
useful. It adds an example to tests/embedding/. This example basically just 
generates a number of different types of messages, then catches the output, 
and classifies it into several categories.

I'll gladly provide more explanations or a different format of patches if 
needed.

Looking forward to your comments
Thomas Friedrichsmeier


From phgrosjean at sciviews.org  Mon Oct 17 19:50:40 2005
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Mon, 17 Oct 2005 19:50:40 +0200
Subject: [Rd] [R-gui]      R GUI considerations
In-Reply-To: <4353D875.5000409@wald.ucdavis.edu>
References: <4350FB09.3020503@sciviews.org>	<Pine.LNX.4.61.0510160915430.20389@gannet.stats>	<17234.23221.482412.732757@basebud.nulle.part>	<200510161653.00853.thomas.friedrichsmeier@ruhr-uni-bochum.de>	<1129490486.5518.140.camel@localhost.localdomain>
	<43537220.1070705@sciviews.org> <4353D875.5000409@wald.ucdavis.edu>
Message-ID: <4353E470.5010608@sciviews.org>

Duncan,

Could you, please, stop considering me as just a professor in 
biostatistics only interested by the results of my students and nothing 
else. Do you need a couple of evidences that I am working with other 
people, other applications, and that they require totally different 
GUIs? Here they are:

1) I am the instigator and main programmer of ZooImage 
(http://www.sciviews.org/zooimage/), an Open Source system combining 
ImageJ and R (mainly) to provide a complete numerical image analysis 
system for automating zooplankton samples processing. In the R side, 
image measurements gathered by ImageJ are analyzed with the powerfull 
machine learning algorithms implemented in R (like random forest, 
bundling, ...). After analysis of several samples, they usually form a 
space or time series to be analyzed by respective tools, still in R. 
Targetted users are biological oceanographers... most of them are 
reluctant to "programming" in R (i.e., to write and edit little scripts 
to run the analyses), and the others are more accustomished to Matlab.

2) I participate to the development of FLR (http://flr-project.org/), a 
framework for modelling fisheries entirely written with S4 objects. The 
project is now used in several fisheries evaluation programs, and we 
face some problems with modellers and advisors telling they don't want 
to have to "learn R" for running their models. Quite different 
application and targetted users.

3) One of the future contracts I mentioned earlier in this post is with 
IFREMER, to make a flexible reporting system mixing the report() 
functions of SciViews and Rpad to end up with dynamically recalculable 
HTML reports (hopefully web-based solution), for instance for weekly 
reports on the survey of water quality along the French coast. Again, a 
very different application and GUI.

4) Another contract consists in making an artificial human noise, 
analysing results from more than 200 artificial odor receptors. The 
people there agree for using R as the "calculation engine", but want a 
really simple point and click interface for their analyses, and all the 
machinery completely hidden.

That said, if you consider a polymorphic R GUI that mixes together the 
different paradigms (menu&dialog boxes, spreadsheet, notebook-like 
interactive documents, ...) is not something possible to do, it is your 
problem. My own experience, *including the various different situations 
cited here above* make me feel that it is something possible. I don't 
want to kill all R GUIs projects in favor of a single one, but I affirm 
that we should work in a more collaborative way.

Best regards,

Philippe

..............................................<?}))><........
  ) ) ) ) )
( ( ( ( (    Prof. Philippe Grosjean
  ) ) ) ) )
( ( ( ( (    Numerical Ecology of Aquatic Systems
  ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
  ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
( ( ( ( (
  ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
  ) ) ) ) )
( ( ( ( (    web:   http://www.umh.ac.be/~econum
  ) ) ) ) )          http://www.sciviews.org
( ( ( ( (
..............................................................

Duncan Temple Lang wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> 
> 
> Philippe Grosjean wrote:
> 
>>Hello Marc and the others (and the User!2006 organizing commitee),
>>
>>I answer to Marc's email, because I think it is the most constructive 
>>one. I am a little bit dissapointed that the discussion about R GUIs, 
>>whatever the initial subject, inevitably shifts to an endless discussion 
>>about which graphical toolkit to use, and whether one should interface 
>>it directly, or by means of an intermediary language perhaps more 
>>suitable for handling widgets events.
>>
>>Should I recall that this thread is *not* about which graphical toolkit 
>>to use, but is trying to trigger a discussion on how could we work 
>>together to avoid duplication in coding for R GUIs, and perhaps, join in 
>>a common project. Something totally different!
>>
> 
> 
> 
> I think all of us will agree that we have limited resources
> and should collaborate where possible.
> However, to do this, we must have a common set of interests
> that form a reason to collaborate.
> Your earlier mail mentioned the link
> (http://www.sciviews.org/_rgui/rgui/GUIs.html)
> to the different types of GUIs you were considering, be it
> a Web-based, or notebook style, or whatever.
> 
> I really think that you have to think about things from other peoples'
> perspectives and realize that many of us are not considering "the GUI"
> as you are. You seem to have an audience in mind which
>   a) need access to a broad range of R functions
>   b) are averse to the command line.
> It appears you have students in mind, probably non-statisticians
> in an introductory class.  That is great. And your approach is
> perfectly reasonable to address that need.
> 
> However, others of us have very different goals.
> Some of us want specialized GUIs, e.g. GeneGGobi, interfaces
> to specific functionality (e.g. random forests), ....
> Others of us have been buidling tools for interactive documents, much
> like a Web browser embedded in R with complex composite widgets
> embedded within the document to have dynamic, interactive documents.
> These are very different audiences, and accordingly very different
> GUIs.  They require not customization of a general GUI, but
> an ability to construct entirely new GUIs.
> 
> Where we can really collaborate is in the development of
> GUI components that can be used from within R to construct
> these different GUIs.
> 
> I really encourage you to try to consider what other people
> are thinking and hopefully this will help us get past the
> discussions of specific toolkits, etc.  I think they have
> originated from beliefs that we are all talking about variations
> of the same student-oriented GUI. In fact, we are talking about
> much richer forms of pedagogy and interface.
> 
>  D.
> 
> 
> 
> 
> 
>>I know people that already play the game of collaboration: those I am 
>>working with to bring bridges between their projects and SciViews-R. 
>>There is another person working on general improvements of R for GUIs: 
>>Duncan Murdoch, but this is about RGui.exe, thus for Windows only.
>>
>>I support the proposition of Marc Schwartz to dedicate a session in 
>>User!2006 to this subject... but I would like to precise this: it should 
>>be stated clearly that the GUI session would *not* be about discussing 
>>which graphical widgets to use, and *not* on the presentation of yet 
>>another new R GUI project. That session should be clearly focused on:
>>- actual examples of use of R GUIs, and the benefit their bring in practice,
>>- propositions for developping a common and reusable API for R GUIs 
>>(preferrably written in R to be independent of particular graphical 
>>widgets -I started such a thing in svDialogs, and I think that Simon 
>>Urbanek's Iwidgets is similar in philosophy-),
>>- bringing bridges between existing R GUI projects,
>>- identifying cross-platform opportunities.
>>That session should be followed by an extensive discussion (why not 
>>around a drink, or a good meal?), between interested people. The 
>>discussion should be best focused on:
>>
>>1) How and who will install tools for collaborative work on those common 
>>R GUI pieces of code (a CVS or SVN for instance)... we already have a 
>>web site and the R-SIG-GUI, even if these tools are currently under-used.
>>
>>2) How and who will sketch documents summarizing our goals. Of course, 
>>these documents should be editable by everybody. So, something like a 
>>WiKi sounds good here.
>>
>>3) In a near future, we will begin to add code in the "common R GUI 
>>tools", of course. This should be pieces of code extracted from the 
>>various R GUI projects. So, we have to draw an initial list of these 
>>pieces of code and who will provide them.
>>
>>I CC: this mail directly to the User!2006 organizing committee, because 
>>it is a direct call asking for such a session. Regarding the organizer, 
>>  I wouldn't propose names... someone from the R developer's team, or a 
>>key person in R GUIs topics...
>>Best,
>>
>>Philippe Grosjean
>>
>>..............................................<?}))><........
>>  ) ) ) ) )
>>( ( ( ( (    Prof. Philippe Grosjean
>>  ) ) ) ) )
>>( ( ( ( (    Numerical Ecology of Aquatic Systems
>>  ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
>>( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
>>  ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
>>( ( ( ( (
>>  ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
>>( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
>>  ) ) ) ) )
>>( ( ( ( (    web:   http://www.umh.ac.be/~econum
>>  ) ) ) ) )          http://www.sciviews.org
>>( ( ( ( (
>>..............................................................
>>
>>Marc Schwartz wrote:
>>
>>
>>>Greetings all,
>>>
>>>While recognizing that "this is easier said, than done", is there any
>>>logic in suggesting that for those who might be interested, a specific R
>>>GUI session of sorts be added to the UseR! 2006 meeting schedule?
>>>
>>>Since some quorum of interested GUI users may be planning to attend the
>>>meeting or may be motivated to do so, it may be an opportunity to:
>>>
>>>1. Leverage face to face interaction and visualize possible options
>>>
>>>2. Define areas of commonality
>>>
>>>3. Bring some level of focus to targeted segments of the user base that
>>>would utilize a GUI and for whom there may be differing functional
>>>requirements.
>>>
>>>4. Identify cross-platform opportunities and technologies
>>>
>>>5. See further notes below...
>>>
>>>
>>>Some of the preliminary work could no doubt be done in advance to better
>>>prepare and structure discussion.
>>>
>>>This could be done as a "breakout" session or if there is sufficient
>>>interest (and facility/funding issues can be resolved) perhaps a group
>>>session held the day before or perhaps the day after the main conference
>>>program.
>>>
>>>If there is a core group that is interested in pursuing this, an
>>>announcement could be made to the respective R e-mail lists (r-help,
>>>r-devel, r-sig-gui, etc.) whereby, with the sufficient lead time as we
>>>have, the requisite activities could be put in place to orchestrate the
>>>session, define specific desired outcomes and identify individuals
>>>willing to spend their time to coordinate and make this venture
>>>successful (however success would be defined).
>>>
>>>There is no business or financial motivation here for a GUI. If there
>>>was and a for profit company decided that there would be a significant
>>>return on investment, they would spend the money, hire the resources,
>>>define a team leader and put forth a single development spec for a GUI
>>>project based upon their own market research. It would be done in a
>>>relatively authoritarian fashion and if you didn't agree, you would be
>>>asked to find a job elsewhere.
>>>
>>>Here, you would need to solicit voluntary resources, reconcile the
>>>expected differences of opinion on the spectrum of matters that would
>>>have to be addressed and define some common framework for operating,
>>>perhaps based upon targeted user segments.
>>>
>>>This subject, as mentioned, has come up on the lists previously, with no
>>>common resolution, resulting of course in the individual activities that
>>>have emerged.
>>>
>>>Is there a group of motivated useRs out there, who have the time,
>>>energy, and skills and are willing to work within the framework of a
>>>design and development "team" environment, where a quid pro quo for
>>>moving forward could evolve from the User! 2006 meeting? 
>>>
>>>Is there an individual, who would need to emerge from that group, who
>>>has the respect and requisite skills to drive a consensus of opinion and
>>>keep a team focused and moving in the proper direction?
>>>
>>>If so, that might be a step in the direction of evolving a GUI that
>>>might make sense for some yet to be defined range of useRs, who would
>>>not otherwise utilize the CLI or might need to evolve in that direction
>>>over time.
>>>
>>>If not, then the status quo continues...
>>>
>>>There are some 300 Linux distributions out there and multiple X based
>>>GUIs, which have evolved for reasons as varied as those behind the
>>>available R GUIs and more. Yet there are a select few base Linux
>>>distributions and largely two GUIs that have garnered any significant
>>>market share. Perhaps, over time, lacking any coordinated activity, a
>>>similar situation will evolve here, if the predicate that a broad demand
>>>for a R GUI is valid.
>>>
>>>If the predicate is false, then this process is perhaps rightly done by
>>>individuals meeting narrowly focused, local requirements.
>>>
>>>I should note, that I am not prospective GUI user, but a happy ESS user.
>>>I simply thought that I would try to provoke some discussion on this
>>>point, since I jumped into this thread earlier in the week.
>>>
>>>Best regards,
>>>
>>>Marc Schwartz
>>>
>>>______________________________________________
>>>R-devel at r-project.org mailing list
>>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>>
>>
>>
>>_______________________________________________
>>R-SIG-GUI mailing list
>>R-SIG-GUI at stat.math.ethz.ch
>>https://stat.ethz.ch/mailman/listinfo/r-sig-gui
> 
> 
> - --
> Duncan Temple Lang                duncan at wald.ucdavis.edu
> Department of Statistics          work:  (530) 752-4782
> 371 Kerr Hall                     fax:   (530) 752-7099
> One Shields Ave.
> University of California at Davis
> Davis, CA 95616, USA
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.2 (Darwin)
> Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org
> 
> iD8DBQFDU9h19p/Jzwa2QP4RAmYjAJ992GZhsa2XXu+RgC2ma7WlnmfvJQCeK1AS
> nf7SVZeZsoS4Q9gaigI6U8c=
> =r1zP
> -----END PGP SIGNATURE-----
> 
>


From duncan at wald.ucdavis.edu  Mon Oct 17 20:20:11 2005
From: duncan at wald.ucdavis.edu (Duncan Temple Lang)
Date: Mon, 17 Oct 2005 11:20:11 -0700
Subject: [Rd] [R-gui]      R GUI considerations
In-Reply-To: <4353E470.5010608@sciviews.org>
References: <4350FB09.3020503@sciviews.org>	<Pine.LNX.4.61.0510160915430.20389@gannet.stats>	<17234.23221.482412.732757@basebud.nulle.part>	<200510161653.00853.thomas.friedrichsmeier@ruhr-uni-bochum.de>	<1129490486.5518.140.camel@localhost.localdomain>
	<43537220.1070705@sciviews.org> <4353D875.5000409@wald.ucdavis.edu>
	<4353E470.5010608@sciviews.org>
Message-ID: <4353EB5B.7090508@wald.ucdavis.edu>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


Hi Philippe.

 I am sorry that you are upset by what I wrote.
I did not intend to cause offense.  And I was
not considering you as "just a professor only interested
by the results of your students".  However,
the discussion has unfortunately degenerated to that
common denominator for several people, either implicitly
or explicitly and I believe it is important to make
certain that the real issues are identified and discussed
by being precise about what it is that is being discussed.

I most certainly do thing a "polymorphic" GUI
that mixes different components is feasible.
Indeed,  I have been working on the integration
in general terms for many years and have developed
a general infrastructure for integrating such tools
in various settings.  What we are discussing is
the software architecture for constructing this
distinctly focused GUIs.

I think experiments in GUI design are terrific and
we need them.  I applaud SciViews for this.
And JGR, etc. too. But they don't necessarily
allow others to experiment as they are not
customizable. Just as users don't necessarily
want to learn R to do statistics, R programmers
don't necessarily want to learn Java or C++
and the specifics of an application like
SciViews or JGR to try out small changes.
That is why I have long argued that we use
the existing common interest that we all have
which is R and that we allow people
to reuse components of SciViews, etc.

If these are integrated into R so that people can
really modify them and construct different GUIS
from their elements, that would be terrific.
In the meantime, the ability to easily and conveniently
do experiments in R does warrant discussing a software
architecture that facilitates that and so involves
bindings to toolkits, both modern ones and convenient ones.

 Anyway, apologies again for the misunderstanding. I was
not considering you in that narrow fashion that came
across in my mail.

 Enough said for the moment. All these experiments are good,
collaboration is good. The obvious place to do it in my book
is in the R language or else have some good glue between the
systems.  As much work as I have done on GUIs in the S language
in  the last 13 years, I still think we need more glue and
am working on that while we continue to experiment with the
design of GUIs for the next 5 years rather than the immediate needs.


 Thanks,
  D



Philippe Grosjean wrote:
> Duncan,
> 
> Could you, please, stop considering me as just a professor in
> biostatistics only interested by the results of my students and nothing
> else. Do you need a couple of evidences that I am working with other
> people, other applications, and that they require totally different
> GUIs? Here they are:
> 
> 1) I am the instigator and main programmer of ZooImage
> (http://www.sciviews.org/zooimage/), an Open Source system combining
> ImageJ and R (mainly) to provide a complete numerical image analysis
> system for automating zooplankton samples processing. In the R side,
> image measurements gathered by ImageJ are analyzed with the powerfull
> machine learning algorithms implemented in R (like random forest,
> bundling, ...). After analysis of several samples, they usually form a
> space or time series to be analyzed by respective tools, still in R.
> Targetted users are biological oceanographers... most of them are
> reluctant to "programming" in R (i.e., to write and edit little scripts
> to run the analyses), and the others are more accustomished to Matlab.
> 
> 2) I participate to the development of FLR (http://flr-project.org/), a
> framework for modelling fisheries entirely written with S4 objects. The
> project is now used in several fisheries evaluation programs, and we
> face some problems with modellers and advisors telling they don't want
> to have to "learn R" for running their models. Quite different
> application and targetted users.
> 
> 3) One of the future contracts I mentioned earlier in this post is with
> IFREMER, to make a flexible reporting system mixing the report()
> functions of SciViews and Rpad to end up with dynamically recalculable
> HTML reports (hopefully web-based solution), for instance for weekly
> reports on the survey of water quality along the French coast. Again, a
> very different application and GUI.
> 
> 4) Another contract consists in making an artificial human noise,
> analysing results from more than 200 artificial odor receptors. The
> people there agree for using R as the "calculation engine", but want a
> really simple point and click interface for their analyses, and all the
> machinery completely hidden.
> 
> That said, if you consider a polymorphic R GUI that mixes together the
> different paradigms (menu&dialog boxes, spreadsheet, notebook-like
> interactive documents, ...) is not something possible to do, it is your
> problem. My own experience, *including the various different situations
> cited here above* make me feel that it is something possible. I don't
> want to kill all R GUIs projects in favor of a single one, but I affirm
> that we should work in a more collaborative way.
> 
> Best regards,
> 
> Philippe
> 
> ..............................................<?}))><........
>  ) ) ) ) )
> ( ( ( ( (    Prof. Philippe Grosjean
>  ) ) ) ) )
> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>  ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
> ( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
>  ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
> ( ( ( ( (
>  ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
> ( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
>  ) ) ) ) )
> ( ( ( ( (    web:   http://www.umh.ac.be/~econum
>  ) ) ) ) )          http://www.sciviews.org
> ( ( ( ( (
> ..............................................................
> 
> Duncan Temple Lang wrote:
> 
> 
> 
> Philippe Grosjean wrote:
> 
>>>> Hello Marc and the others (and the User!2006 organizing commitee),
>>>>
>>>> I answer to Marc's email, because I think it is the most constructive
>>>> one. I am a little bit dissapointed that the discussion about R GUIs,
>>>> whatever the initial subject, inevitably shifts to an endless
>>>> discussion about which graphical toolkit to use, and whether one
>>>> should interface it directly, or by means of an intermediary language
>>>> perhaps more suitable for handling widgets events.
>>>>
>>>> Should I recall that this thread is *not* about which graphical
>>>> toolkit to use, but is trying to trigger a discussion on how could we
>>>> work together to avoid duplication in coding for R GUIs, and perhaps,
>>>> join in a common project. Something totally different!
>>>>
> 
> 
> 
> I think all of us will agree that we have limited resources
> and should collaborate where possible.
> However, to do this, we must have a common set of interests
> that form a reason to collaborate.
> Your earlier mail mentioned the link
> (http://www.sciviews.org/_rgui/rgui/GUIs.html)
> to the different types of GUIs you were considering, be it
> a Web-based, or notebook style, or whatever.
> 
> I really think that you have to think about things from other peoples'
> perspectives and realize that many of us are not considering "the GUI"
> as you are. You seem to have an audience in mind which
>   a) need access to a broad range of R functions
>   b) are averse to the command line.
> It appears you have students in mind, probably non-statisticians
> in an introductory class.  That is great. And your approach is
> perfectly reasonable to address that need.
> 
> However, others of us have very different goals.
> Some of us want specialized GUIs, e.g. GeneGGobi, interfaces
> to specific functionality (e.g. random forests), ....
> Others of us have been buidling tools for interactive documents, much
> like a Web browser embedded in R with complex composite widgets
> embedded within the document to have dynamic, interactive documents.
> These are very different audiences, and accordingly very different
> GUIs.  They require not customization of a general GUI, but
> an ability to construct entirely new GUIs.
> 
> Where we can really collaborate is in the development of
> GUI components that can be used from within R to construct
> these different GUIs.
> 
> I really encourage you to try to consider what other people
> are thinking and hopefully this will help us get past the
> discussions of specific toolkits, etc.  I think they have
> originated from beliefs that we are all talking about variations
> of the same student-oriented GUI. In fact, we are talking about
> much richer forms of pedagogy and interface.
> 
>  D.
> 
> 
> 
> 
> 
>>>> I know people that already play the game of collaboration: those I am
>>>> working with to bring bridges between their projects and SciViews-R.
>>>> There is another person working on general improvements of R for
>>>> GUIs: Duncan Murdoch, but this is about RGui.exe, thus for Windows only.
>>>>
>>>> I support the proposition of Marc Schwartz to dedicate a session in
>>>> User!2006 to this subject... but I would like to precise this: it
>>>> should be stated clearly that the GUI session would *not* be about
>>>> discussing which graphical widgets to use, and *not* on the
>>>> presentation of yet another new R GUI project. That session should be
>>>> clearly focused on:
>>>> - actual examples of use of R GUIs, and the benefit their bring in
>>>> practice,
>>>> - propositions for developping a common and reusable API for R GUIs
>>>> (preferrably written in R to be independent of particular graphical
>>>> widgets -I started such a thing in svDialogs, and I think that Simon
>>>> Urbanek's Iwidgets is similar in philosophy-),
>>>> - bringing bridges between existing R GUI projects,
>>>> - identifying cross-platform opportunities.
>>>> That session should be followed by an extensive discussion (why not
>>>> around a drink, or a good meal?), between interested people. The
>>>> discussion should be best focused on:
>>>>
>>>> 1) How and who will install tools for collaborative work on those
>>>> common R GUI pieces of code (a CVS or SVN for instance)... we already
>>>> have a web site and the R-SIG-GUI, even if these tools are currently
>>>> under-used.
>>>>
>>>> 2) How and who will sketch documents summarizing our goals. Of
>>>> course, these documents should be editable by everybody. So,
>>>> something like a WiKi sounds good here.
>>>>
>>>> 3) In a near future, we will begin to add code in the "common R GUI
>>>> tools", of course. This should be pieces of code extracted from the
>>>> various R GUI projects. So, we have to draw an initial list of these
>>>> pieces of code and who will provide them.
>>>>
>>>> I CC: this mail directly to the User!2006 organizing committee,
>>>> because it is a direct call asking for such a session. Regarding the
>>>> organizer,  I wouldn't propose names... someone from the R
>>>> developer's team, or a key person in R GUIs topics...
>>>> Best,
>>>>
>>>> Philippe Grosjean
>>>>
>>>> ..............................................<?}))><........
>>>>  ) ) ) ) )
>>>> ( ( ( ( (    Prof. Philippe Grosjean
>>>>  ) ) ) ) )
>>>> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>>>>  ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
>>>> ( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
>>>>  ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
>>>> ( ( ( ( (
>>>>  ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
>>>> ( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
>>>>  ) ) ) ) )
>>>> ( ( ( ( (    web:   http://www.umh.ac.be/~econum
>>>>  ) ) ) ) )          http://www.sciviews.org
>>>> ( ( ( ( (
>>>> ..............................................................
>>>>
>>>> Marc Schwartz wrote:
>>>>
>>>>
>>>>> Greetings all,
>>>>>
>>>>> While recognizing that "this is easier said, than done", is there any
>>>>> logic in suggesting that for those who might be interested, a
>>>>> specific R
>>>>> GUI session of sorts be added to the UseR! 2006 meeting schedule?
>>>>>
>>>>> Since some quorum of interested GUI users may be planning to attend the
>>>>> meeting or may be motivated to do so, it may be an opportunity to:
>>>>>
>>>>> 1. Leverage face to face interaction and visualize possible options
>>>>>
>>>>> 2. Define areas of commonality
>>>>>
>>>>> 3. Bring some level of focus to targeted segments of the user base that
>>>>> would utilize a GUI and for whom there may be differing functional
>>>>> requirements.
>>>>>
>>>>> 4. Identify cross-platform opportunities and technologies
>>>>>
>>>>> 5. See further notes below...
>>>>>
>>>>>
>>>>> Some of the preliminary work could no doubt be done in advance to
>>>>> better
>>>>> prepare and structure discussion.
>>>>>
>>>>> This could be done as a "breakout" session or if there is sufficient
>>>>> interest (and facility/funding issues can be resolved) perhaps a group
>>>>> session held the day before or perhaps the day after the main
>>>>> conference
>>>>> program.
>>>>>
>>>>> If there is a core group that is interested in pursuing this, an
>>>>> announcement could be made to the respective R e-mail lists (r-help,
>>>>> r-devel, r-sig-gui, etc.) whereby, with the sufficient lead time as we
>>>>> have, the requisite activities could be put in place to orchestrate the
>>>>> session, define specific desired outcomes and identify individuals
>>>>> willing to spend their time to coordinate and make this venture
>>>>> successful (however success would be defined).
>>>>>
>>>>> There is no business or financial motivation here for a GUI. If there
>>>>> was and a for profit company decided that there would be a significant
>>>>> return on investment, they would spend the money, hire the resources,
>>>>> define a team leader and put forth a single development spec for a GUI
>>>>> project based upon their own market research. It would be done in a
>>>>> relatively authoritarian fashion and if you didn't agree, you would be
>>>>> asked to find a job elsewhere.
>>>>>
>>>>> Here, you would need to solicit voluntary resources, reconcile the
>>>>> expected differences of opinion on the spectrum of matters that would
>>>>> have to be addressed and define some common framework for operating,
>>>>> perhaps based upon targeted user segments.
>>>>>
>>>>> This subject, as mentioned, has come up on the lists previously,
>>>>> with no
>>>>> common resolution, resulting of course in the individual activities
>>>>> that
>>>>> have emerged.
>>>>>
>>>>> Is there a group of motivated useRs out there, who have the time,
>>>>> energy, and skills and are willing to work within the framework of a
>>>>> design and development "team" environment, where a quid pro quo for
>>>>> moving forward could evolve from the User! 2006 meeting?
>>>>> Is there an individual, who would need to emerge from that group, who
>>>>> has the respect and requisite skills to drive a consensus of opinion
>>>>> and
>>>>> keep a team focused and moving in the proper direction?
>>>>>
>>>>> If so, that might be a step in the direction of evolving a GUI that
>>>>> might make sense for some yet to be defined range of useRs, who would
>>>>> not otherwise utilize the CLI or might need to evolve in that direction
>>>>> over time.
>>>>>
>>>>> If not, then the status quo continues...
>>>>>
>>>>> There are some 300 Linux distributions out there and multiple X based
>>>>> GUIs, which have evolved for reasons as varied as those behind the
>>>>> available R GUIs and more. Yet there are a select few base Linux
>>>>> distributions and largely two GUIs that have garnered any significant
>>>>> market share. Perhaps, over time, lacking any coordinated activity, a
>>>>> similar situation will evolve here, if the predicate that a broad
>>>>> demand
>>>>> for a R GUI is valid.
>>>>>
>>>>> If the predicate is false, then this process is perhaps rightly done by
>>>>> individuals meeting narrowly focused, local requirements.
>>>>>
>>>>> I should note, that I am not prospective GUI user, but a happy ESS
>>>>> user.
>>>>> I simply thought that I would try to provoke some discussion on this
>>>>> point, since I jumped into this thread earlier in the week.
>>>>>
>>>>> Best regards,
>>>>>
>>>>> Marc Schwartz
>>>>>
>>>>> ______________________________________________
>>>>> R-devel at r-project.org mailing list
>>>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>
>>>>>
>>>>
>>>>
>>>> _______________________________________________
>>>> R-SIG-GUI mailing list
>>>> R-SIG-GUI at stat.math.ethz.ch
>>>> https://stat.ethz.ch/mailman/listinfo/r-sig-gui
> 
> 
> 
> --
> Duncan Temple Lang                duncan at wald.ucdavis.edu
> Department of Statistics          work:  (530) 752-4782
> 371 Kerr Hall                     fax:   (530) 752-7099
> One Shields Ave.
> University of California at Davis
> Davis, CA 95616, USA
>>
>>

- --
Duncan Temple Lang                duncan at wald.ucdavis.edu
Department of Statistics          work:  (530) 752-4782
371 Kerr Hall                     fax:   (530) 752-7099
One Shields Ave.
University of California at Davis
Davis, CA 95616, USA
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (Darwin)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFDU+ta9p/Jzwa2QP4RAnppAJ9dv+LRlZttkmI8epiPrkU3aUsNjgCeIhGD
5bD+9bu3xIy6Oioy3a63JNo=
=s0yj
-----END PGP SIGNATURE-----


From phgrosjean at sciviews.org  Mon Oct 17 20:45:17 2005
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Mon, 17 Oct 2005 20:45:17 +0200
Subject: [Rd] [R-gui]      R GUI considerations
In-Reply-To: <4353EB5B.7090508@wald.ucdavis.edu>
References: <4350FB09.3020503@sciviews.org>	<Pine.LNX.4.61.0510160915430.20389@gannet.stats>	<17234.23221.482412.732757@basebud.nulle.part>	<200510161653.00853.thomas.friedrichsmeier@ruhr-uni-bochum.de>	<1129490486.5518.140.camel@localhost.localdomain>	<43537220.1070705@sciviews.org>
	<4353D875.5000409@wald.ucdavis.edu>	<4353E470.5010608@sciviews.org>
	<4353EB5B.7090508@wald.ucdavis.edu>
Message-ID: <4353F13D.6070800@sciviews.org>

Duncan,

I agree totally with you on all points, now that we clarified our 
respective ideas. I am afraid I probably agree also with your last 
point, from a theoretical point-of-view ("I still think we need more 
glue and am working on that while we continue to experiment with the 
design of GUIs for the next 5 years rather than the immediate needs.").

I say, from a theoretical point-of-view, because in practice I am not 
sure all these people waiting for GUIs, like in the projects I cited 
before, will appreciate we just continue to play in the sandbox for 
another 5 years!!! They want their GUI delivered... in the next years, 
or in the next six months, or even closer if possible!

So, a mix between the theoretical approach and the practical needs tells 
me that it is perhaps time to shorten a little bit the sandbox phase and 
to move forward right now.

Best,

Philippe

..............................................<?}))><........
  ) ) ) ) )
( ( ( ( (    Prof. Philippe Grosjean
  ) ) ) ) )
( ( ( ( (    Numerical Ecology of Aquatic Systems
  ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
  ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
( ( ( ( (
  ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
  ) ) ) ) )
( ( ( ( (    web:   http://www.umh.ac.be/~econum
  ) ) ) ) )          http://www.sciviews.org
( ( ( ( (
..............................................................

Duncan Temple Lang wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> 
> Hi Philippe.
> 
>  I am sorry that you are upset by what I wrote.
> I did not intend to cause offense.  And I was
> not considering you as "just a professor only interested
> by the results of your students".  However,
> the discussion has unfortunately degenerated to that
> common denominator for several people, either implicitly
> or explicitly and I believe it is important to make
> certain that the real issues are identified and discussed
> by being precise about what it is that is being discussed.
> 
> I most certainly do thing a "polymorphic" GUI
> that mixes different components is feasible.
> Indeed,  I have been working on the integration
> in general terms for many years and have developed
> a general infrastructure for integrating such tools
> in various settings.  What we are discussing is
> the software architecture for constructing this
> distinctly focused GUIs.
> 
> I think experiments in GUI design are terrific and
> we need them.  I applaud SciViews for this.
> And JGR, etc. too. But they don't necessarily
> allow others to experiment as they are not
> customizable. Just as users don't necessarily
> want to learn R to do statistics, R programmers
> don't necessarily want to learn Java or C++
> and the specifics of an application like
> SciViews or JGR to try out small changes.
> That is why I have long argued that we use
> the existing common interest that we all have
> which is R and that we allow people
> to reuse components of SciViews, etc.
> 
> If these are integrated into R so that people can
> really modify them and construct different GUIS
> from their elements, that would be terrific.
> In the meantime, the ability to easily and conveniently
> do experiments in R does warrant discussing a software
> architecture that facilitates that and so involves
> bindings to toolkits, both modern ones and convenient ones.
> 
>  Anyway, apologies again for the misunderstanding. I was
> not considering you in that narrow fashion that came
> across in my mail.
> 
>  Enough said for the moment. All these experiments are good,
> collaboration is good. The obvious place to do it in my book
> is in the R language or else have some good glue between the
> systems.  As much work as I have done on GUIs in the S language
> in  the last 13 years, I still think we need more glue and
> am working on that while we continue to experiment with the
> design of GUIs for the next 5 years rather than the immediate needs.
> 
> 
>  Thanks,
>   D
> 
> 
> 
> Philippe Grosjean wrote:
> 
>>Duncan,
>>
>>Could you, please, stop considering me as just a professor in
>>biostatistics only interested by the results of my students and nothing
>>else. Do you need a couple of evidences that I am working with other
>>people, other applications, and that they require totally different
>>GUIs? Here they are:
>>
>>1) I am the instigator and main programmer of ZooImage
>>(http://www.sciviews.org/zooimage/), an Open Source system combining
>>ImageJ and R (mainly) to provide a complete numerical image analysis
>>system for automating zooplankton samples processing. In the R side,
>>image measurements gathered by ImageJ are analyzed with the powerfull
>>machine learning algorithms implemented in R (like random forest,
>>bundling, ...). After analysis of several samples, they usually form a
>>space or time series to be analyzed by respective tools, still in R.
>>Targetted users are biological oceanographers... most of them are
>>reluctant to "programming" in R (i.e., to write and edit little scripts
>>to run the analyses), and the others are more accustomished to Matlab.
>>
>>2) I participate to the development of FLR (http://flr-project.org/), a
>>framework for modelling fisheries entirely written with S4 objects. The
>>project is now used in several fisheries evaluation programs, and we
>>face some problems with modellers and advisors telling they don't want
>>to have to "learn R" for running their models. Quite different
>>application and targetted users.
>>
>>3) One of the future contracts I mentioned earlier in this post is with
>>IFREMER, to make a flexible reporting system mixing the report()
>>functions of SciViews and Rpad to end up with dynamically recalculable
>>HTML reports (hopefully web-based solution), for instance for weekly
>>reports on the survey of water quality along the French coast. Again, a
>>very different application and GUI.
>>
>>4) Another contract consists in making an artificial human noise,
>>analysing results from more than 200 artificial odor receptors. The
>>people there agree for using R as the "calculation engine", but want a
>>really simple point and click interface for their analyses, and all the
>>machinery completely hidden.
>>
>>That said, if you consider a polymorphic R GUI that mixes together the
>>different paradigms (menu&dialog boxes, spreadsheet, notebook-like
>>interactive documents, ...) is not something possible to do, it is your
>>problem. My own experience, *including the various different situations
>>cited here above* make me feel that it is something possible. I don't
>>want to kill all R GUIs projects in favor of a single one, but I affirm
>>that we should work in a more collaborative way.
>>
>>Best regards,
>>
>>Philippe
>>
>>..............................................<?}))><........
>> ) ) ) ) )
>>( ( ( ( (    Prof. Philippe Grosjean
>> ) ) ) ) )
>>( ( ( ( (    Numerical Ecology of Aquatic Systems
>> ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
>>( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
>> ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
>>( ( ( ( (
>> ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
>>( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
>> ) ) ) ) )
>>( ( ( ( (    web:   http://www.umh.ac.be/~econum
>> ) ) ) ) )          http://www.sciviews.org
>>( ( ( ( (
>>..............................................................
>>
>>Duncan Temple Lang wrote:
>>
>>
>>
>>Philippe Grosjean wrote:
>>
>>
>>>>>Hello Marc and the others (and the User!2006 organizing commitee),
>>>>>
>>>>>I answer to Marc's email, because I think it is the most constructive
>>>>>one. I am a little bit dissapointed that the discussion about R GUIs,
>>>>>whatever the initial subject, inevitably shifts to an endless
>>>>>discussion about which graphical toolkit to use, and whether one
>>>>>should interface it directly, or by means of an intermediary language
>>>>>perhaps more suitable for handling widgets events.
>>>>>
>>>>>Should I recall that this thread is *not* about which graphical
>>>>>toolkit to use, but is trying to trigger a discussion on how could we
>>>>>work together to avoid duplication in coding for R GUIs, and perhaps,
>>>>>join in a common project. Something totally different!
>>>>>
>>
>>
>>
>>I think all of us will agree that we have limited resources
>>and should collaborate where possible.
>>However, to do this, we must have a common set of interests
>>that form a reason to collaborate.
>>Your earlier mail mentioned the link
>>(http://www.sciviews.org/_rgui/rgui/GUIs.html)
>>to the different types of GUIs you were considering, be it
>>a Web-based, or notebook style, or whatever.
>>
>>I really think that you have to think about things from other peoples'
>>perspectives and realize that many of us are not considering "the GUI"
>>as you are. You seem to have an audience in mind which
>>  a) need access to a broad range of R functions
>>  b) are averse to the command line.
>>It appears you have students in mind, probably non-statisticians
>>in an introductory class.  That is great. And your approach is
>>perfectly reasonable to address that need.
>>
>>However, others of us have very different goals.
>>Some of us want specialized GUIs, e.g. GeneGGobi, interfaces
>>to specific functionality (e.g. random forests), ....
>>Others of us have been buidling tools for interactive documents, much
>>like a Web browser embedded in R with complex composite widgets
>>embedded within the document to have dynamic, interactive documents.
>>These are very different audiences, and accordingly very different
>>GUIs.  They require not customization of a general GUI, but
>>an ability to construct entirely new GUIs.
>>
>>Where we can really collaborate is in the development of
>>GUI components that can be used from within R to construct
>>these different GUIs.
>>
>>I really encourage you to try to consider what other people
>>are thinking and hopefully this will help us get past the
>>discussions of specific toolkits, etc.  I think they have
>>originated from beliefs that we are all talking about variations
>>of the same student-oriented GUI. In fact, we are talking about
>>much richer forms of pedagogy and interface.
>>
>> D.
>>
>>
>>
>>
>>
>>
>>>>>I know people that already play the game of collaboration: those I am
>>>>>working with to bring bridges between their projects and SciViews-R.
>>>>>There is another person working on general improvements of R for
>>>>>GUIs: Duncan Murdoch, but this is about RGui.exe, thus for Windows only.
>>>>>
>>>>>I support the proposition of Marc Schwartz to dedicate a session in
>>>>>User!2006 to this subject... but I would like to precise this: it
>>>>>should be stated clearly that the GUI session would *not* be about
>>>>>discussing which graphical widgets to use, and *not* on the
>>>>>presentation of yet another new R GUI project. That session should be
>>>>>clearly focused on:
>>>>>- actual examples of use of R GUIs, and the benefit their bring in
>>>>>practice,
>>>>>- propositions for developping a common and reusable API for R GUIs
>>>>>(preferrably written in R to be independent of particular graphical
>>>>>widgets -I started such a thing in svDialogs, and I think that Simon
>>>>>Urbanek's Iwidgets is similar in philosophy-),
>>>>>- bringing bridges between existing R GUI projects,
>>>>>- identifying cross-platform opportunities.
>>>>>That session should be followed by an extensive discussion (why not
>>>>>around a drink, or a good meal?), between interested people. The
>>>>>discussion should be best focused on:
>>>>>
>>>>>1) How and who will install tools for collaborative work on those
>>>>>common R GUI pieces of code (a CVS or SVN for instance)... we already
>>>>>have a web site and the R-SIG-GUI, even if these tools are currently
>>>>>under-used.
>>>>>
>>>>>2) How and who will sketch documents summarizing our goals. Of
>>>>>course, these documents should be editable by everybody. So,
>>>>>something like a WiKi sounds good here.
>>>>>
>>>>>3) In a near future, we will begin to add code in the "common R GUI
>>>>>tools", of course. This should be pieces of code extracted from the
>>>>>various R GUI projects. So, we have to draw an initial list of these
>>>>>pieces of code and who will provide them.
>>>>>
>>>>>I CC: this mail directly to the User!2006 organizing committee,
>>>>>because it is a direct call asking for such a session. Regarding the
>>>>>organizer,  I wouldn't propose names... someone from the R
>>>>>developer's team, or a key person in R GUIs topics...
>>>>>Best,
>>>>>
>>>>>Philippe Grosjean
>>>>>
>>>>>..............................................<?}))><........
>>>>> ) ) ) ) )
>>>>>( ( ( ( (    Prof. Philippe Grosjean
>>>>> ) ) ) ) )
>>>>>( ( ( ( (    Numerical Ecology of Aquatic Systems
>>>>> ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
>>>>>( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
>>>>> ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
>>>>>( ( ( ( (
>>>>> ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
>>>>>( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
>>>>> ) ) ) ) )
>>>>>( ( ( ( (    web:   http://www.umh.ac.be/~econum
>>>>> ) ) ) ) )          http://www.sciviews.org
>>>>>( ( ( ( (
>>>>>..............................................................
>>>>>
>>>>>Marc Schwartz wrote:
>>>>>
>>>>>
>>>>>
>>>>>>Greetings all,
>>>>>>
>>>>>>While recognizing that "this is easier said, than done", is there any
>>>>>>logic in suggesting that for those who might be interested, a
>>>>>>specific R
>>>>>>GUI session of sorts be added to the UseR! 2006 meeting schedule?
>>>>>>
>>>>>>Since some quorum of interested GUI users may be planning to attend the
>>>>>>meeting or may be motivated to do so, it may be an opportunity to:
>>>>>>
>>>>>>1. Leverage face to face interaction and visualize possible options
>>>>>>
>>>>>>2. Define areas of commonality
>>>>>>
>>>>>>3. Bring some level of focus to targeted segments of the user base that
>>>>>>would utilize a GUI and for whom there may be differing functional
>>>>>>requirements.
>>>>>>
>>>>>>4. Identify cross-platform opportunities and technologies
>>>>>>
>>>>>>5. See further notes below...
>>>>>>
>>>>>>
>>>>>>Some of the preliminary work could no doubt be done in advance to
>>>>>>better
>>>>>>prepare and structure discussion.
>>>>>>
>>>>>>This could be done as a "breakout" session or if there is sufficient
>>>>>>interest (and facility/funding issues can be resolved) perhaps a group
>>>>>>session held the day before or perhaps the day after the main
>>>>>>conference
>>>>>>program.
>>>>>>
>>>>>>If there is a core group that is interested in pursuing this, an
>>>>>>announcement could be made to the respective R e-mail lists (r-help,
>>>>>>r-devel, r-sig-gui, etc.) whereby, with the sufficient lead time as we
>>>>>>have, the requisite activities could be put in place to orchestrate the
>>>>>>session, define specific desired outcomes and identify individuals
>>>>>>willing to spend their time to coordinate and make this venture
>>>>>>successful (however success would be defined).
>>>>>>
>>>>>>There is no business or financial motivation here for a GUI. If there
>>>>>>was and a for profit company decided that there would be a significant
>>>>>>return on investment, they would spend the money, hire the resources,
>>>>>>define a team leader and put forth a single development spec for a GUI
>>>>>>project based upon their own market research. It would be done in a
>>>>>>relatively authoritarian fashion and if you didn't agree, you would be
>>>>>>asked to find a job elsewhere.
>>>>>>
>>>>>>Here, you would need to solicit voluntary resources, reconcile the
>>>>>>expected differences of opinion on the spectrum of matters that would
>>>>>>have to be addressed and define some common framework for operating,
>>>>>>perhaps based upon targeted user segments.
>>>>>>
>>>>>>This subject, as mentioned, has come up on the lists previously,
>>>>>>with no
>>>>>>common resolution, resulting of course in the individual activities
>>>>>>that
>>>>>>have emerged.
>>>>>>
>>>>>>Is there a group of motivated useRs out there, who have the time,
>>>>>>energy, and skills and are willing to work within the framework of a
>>>>>>design and development "team" environment, where a quid pro quo for
>>>>>>moving forward could evolve from the User! 2006 meeting?
>>>>>>Is there an individual, who would need to emerge from that group, who
>>>>>>has the respect and requisite skills to drive a consensus of opinion
>>>>>>and
>>>>>>keep a team focused and moving in the proper direction?
>>>>>>
>>>>>>If so, that might be a step in the direction of evolving a GUI that
>>>>>>might make sense for some yet to be defined range of useRs, who would
>>>>>>not otherwise utilize the CLI or might need to evolve in that direction
>>>>>>over time.
>>>>>>
>>>>>>If not, then the status quo continues...
>>>>>>
>>>>>>There are some 300 Linux distributions out there and multiple X based
>>>>>>GUIs, which have evolved for reasons as varied as those behind the
>>>>>>available R GUIs and more. Yet there are a select few base Linux
>>>>>>distributions and largely two GUIs that have garnered any significant
>>>>>>market share. Perhaps, over time, lacking any coordinated activity, a
>>>>>>similar situation will evolve here, if the predicate that a broad
>>>>>>demand
>>>>>>for a R GUI is valid.
>>>>>>
>>>>>>If the predicate is false, then this process is perhaps rightly done by
>>>>>>individuals meeting narrowly focused, local requirements.
>>>>>>
>>>>>>I should note, that I am not prospective GUI user, but a happy ESS
>>>>>>user.
>>>>>>I simply thought that I would try to provoke some discussion on this
>>>>>>point, since I jumped into this thread earlier in the week.
>>>>>>
>>>>>>Best regards,
>>>>>>
>>>>>>Marc Schwartz
>>>>>>
>>>>>>______________________________________________
>>>>>>R-devel at r-project.org mailing list
>>>>>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>>>>>
>>>>>>
>>>>>
>>>>>
>>>>>_______________________________________________
>>>>>R-SIG-GUI mailing list
>>>>>R-SIG-GUI at stat.math.ethz.ch
>>>>>https://stat.ethz.ch/mailman/listinfo/r-sig-gui
>>
>>
>>
>>--
>>Duncan Temple Lang                duncan at wald.ucdavis.edu
>>Department of Statistics          work:  (530) 752-4782
>>371 Kerr Hall                     fax:   (530) 752-7099
>>One Shields Ave.
>>University of California at Davis
>>Davis, CA 95616, USA
>>
>>>
> 
> - --
> Duncan Temple Lang                duncan at wald.ucdavis.edu
> Department of Statistics          work:  (530) 752-4782
> 371 Kerr Hall                     fax:   (530) 752-7099
> One Shields Ave.
> University of California at Davis
> Davis, CA 95616, USA
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v1.4.2 (Darwin)
> Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org
> 
> iD8DBQFDU+ta9p/Jzwa2QP4RAnppAJ9dv+LRlZttkmI8epiPrkU3aUsNjgCeIhGD
> 5bD+9bu3xIy6Oioy3a63JNo=
> =s0yj
> -----END PGP SIGNATURE-----
> 
> _______________________________________________
> R-SIG-GUI mailing list
> R-SIG-GUI at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-gui
> 
>


From luke at stat.uiowa.edu  Mon Oct 17 21:50:41 2005
From: luke at stat.uiowa.edu (Luke Tierney)
Date: Mon, 17 Oct 2005 14:50:41 -0500 (CDT)
Subject: [Rd] RFC: API to allow identification of warnings and errors in
 the output stream
In-Reply-To: <200510171935.56499.thomas.friedrichsmeier@ruhr-uni-bochum.de>
References: <200510171935.56499.thomas.friedrichsmeier@ruhr-uni-bochum.de>
Message-ID: <Pine.LNX.4.63.0510171445140.20435@nokomis.stat.uiowa.edu>

I am strongly opposed to locking in anything from the C internals of
error handling that is not already part of the API.  This is all very
much subject to change and anything along the lines you propose will
make that change more difficult.

Condition handling was added to make this sort of thing possible.  If
there are aspects of condition handling, or your understanding of
condition handing, that need to be improved then we can work on that.

Best,

luke

On Mon, 17 Oct 2005, Thomas Friedrichsmeier wrote:

> Dear R developers,
>
> this mail is basically a summary / clarification of some previous mails I sent
> to this list last week (subject "Catching warning and error output"). Duncan
> Murdoch pointed out that these were badly organized, and suggested I repost,
> collecting the main points previously spread out between several mails.
>
> Problem statement:
> In an application embedding R, I would like to identify warnings and errors in
> the output stream. That is, basically, I'm looking for a good way to find
> out, which portions of the output stream are warnings, which are error
> messages, and which are regular output. Such information could be used in a
> GUI to mark up different types of output in different colors, or to ensure
> warnings are brought to the user's attention in situations where output would
> normally be hidden.
> I believe this is not currently possible in a good way. For a discussion of
> approaches using the current API, and their drawbacks, refer to
> https://stat.ethz.ch/pipermail/r-devel/2005-October/034975.html.
>
> Suggested solution:
> Here are two patches (against R-2.2.0), which I will describe in more detail
> below:
> A) http://rkward.sourceforge.net/temp/classify_output_patch.diff
> B) http://rkward.sourceforge.net/temp/classify_output_test.diff
>
> Description of and rationale for patch A:
> This patch does two things:
> 1) It adds a function R_WriteErrConsole corresponding to R_WriteConsole. Also,
> a corresponding interface pointer ptr_R_WriteErrConsole is added.
> I think this change is highly consistent with output handling in R in general.
> There are different sink ()s for "output" and "message", there is the
> distinction between Rprintf/Rvprintf and REprintf/REvprintf. This basically
> just carries this distinction over to the interface pointers.
> You will note that I wrote
> ptr_R_WriteErrConsole = R_WriteConsole;
> instead of
> ptr_R_WriteErrConsole = Rstd_WriteErrConsole;
> or
> ptr_R_WriteErrConsole = ptr_R_WriteConsole;
> This way, code that currently overrides ptr_R_WriteConsole, but does not know
> about ptr_R_WriteErrConsole, will still receive all output in
> ptr_R_WriteConsole. Hence this change is perfectly backwards compatible.
> Of course, the naming may not be perfect?
>
> 2) While 1 makes it easy to split warning _and_ errors (and messages) from
> regular output, it does not suffice to differentiate _between_ warnings,
> errors, and messages on the error channel. The patch addresses this, by
> making inError, inWarning, and inPrintWarnings from errors.c accessible
> (read-only) in R_ext/Error.h.
> This part of the patch may be slightly more delicate, in that inError,
> inWarning, and inPrintWarnings seem to be more internal status indications.
> So the question is: Are those potentially subject to change, if errors.c is
> redesigned some day? My feeling is that this is still relatively safe,
> however. Such indications can easily be set/unset at entry/exit points of the
> corresponding functions, as long as there are separate handlers for warnings,
> errors, and printWarnings. I guess this is not likely to ever change
> fundamentally.
> As a slightly safer variation, R_inError (), R_inWarning (), and
> R_inPrintWarnings () could return a boolean indication only, instead of the
> int-code, which might be more subject to change.
>
> Description of and rationale for patch B:
> Patch B probably helps a lot to illustrate, how patch A works, and how this is
> useful. It adds an example to tests/embedding/. This example basically just
> generates a number of different types of messages, then catches the output,
> and classifies it into several categories.
>
> I'll gladly provide more explanations or a different format of patches if
> needed.
>
> Looking forward to your comments
> Thomas Friedrichsmeier
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

-- 
Luke Tierney
Chair, Statistics and Actuarial Science
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:      luke at stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Mon Oct 17 22:20:52 2005
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: Mon, 17 Oct 2005 22:20:52 +0200
Subject: [Rd] RFC: API to allow identification of warnings and errors in
	the output stream
In-Reply-To: <Pine.LNX.4.63.0510171445140.20435@nokomis.stat.uiowa.edu>
References: <200510171935.56499.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<Pine.LNX.4.63.0510171445140.20435@nokomis.stat.uiowa.edu>
Message-ID: <200510172220.52983.thomas.friedrichsmeier@ruhr-uni-bochum.de>

> I am strongly opposed to locking in anything from the C internals of
> error handling that is not already part of the API.  This is all very
> much subject to change and anything along the lines you propose will
> make that change more difficult.

Let's discuss this in two separate parts, then. The first is: adding 
ptr_R_WriteErrConsole as an anologon to ptr_R_WriteConsole. I can see nothing 
wrong with that (of course I'm not an R developer), and it would already help 
me a lot. As I pointed out in the previous mail, a distinction between a 
"message" channel and an "output" channel is done everywhere in R, except in 
the interface pointers. The R_WriteErrConsole comes into play at the very end 
of the "message" channel (REvprintf), and only there, exactly parallel to how 
R_WriteConsole works/gets invoked.
Even if you're going to reject the other part of the proposed patch, please 
consider this small addition. If it helps, I can provide a stripped down 
patch for that.

I'll discuss the second part (making inError, inWarning and inPrintWarnings 
available) in more detail below.

> Condition handling was added to make this sort of thing possible.  If
> there are aspects of condition handling, or your understanding of
> condition handing, that need to be improved then we can work on that.

Both is quite possible. However I have reason to believe it's not just my 
understanding of condition handling that is lacking. If not so, I'll happily 
accept suggestions. Here's why I think condition handling will not help me 
much:

First, for clarification, let me tell you some more about what I need: Besides 
other GUI elements, there is a pseudo-console for running commands in R 
interactively (or at least providing that illusion). I reality, all commands 
are evaluated using R_tryEval (). Still, the user should not see any of this, 
and the "console" should behave mostly just like R in a plain terminal, 
including how errors are printed (+ marking up errors in another color, 
however).
So how could I use condition handlers?

a) Wrap each call inside withCallingHandlers (...) before evaluating it in 
R_tryEval ():
This would probably work, but add quite a bit of overhead for string 
manipulation, and parsing. The GUI runs a lot of small commands during normal 
operation. There are additional hazzles, such as error messages would then 
all look like "Error in withCallingHandlers(...", and I'd have to use yet 
more string operations to make them look normal.
Also: Can I be sure, that all warnings (i.e. even from C-code) are signalled 
as conditions? I'm afraid I do not fully understand the internal going-ons, 
here.

b) Use ".Internal (.addCondHands (...))" once to set up persistent handlers:
This worked fine, when testing it in the R-console. However, when testing in 
my GUI, it seems the condition handlers do not carry over between two 
successive calls of R_tryEval. So effectively, I'd once again be back at 3a.

Of course, if there was an API to efficiently set up condition handlers from 
C, and persist over at least one call of R_tryEval, I could in fact use that, 
and would happily do so. I have not found something like that, however.

Thanks!
Thomas


From tobias.verbeke at telenet.be  Mon Oct 17 22:48:09 2005
From: tobias.verbeke at telenet.be (Tobias Verbeke)
Date: Mon, 17 Oct 2005 22:48:09 +0200
Subject: [Rd] mauchly.test (instead of mauchley.test)  ?
Message-ID: <43540E09.4080405@telenet.be>

Wherever I look up the following reference
the name of the author is spelled Mauchly
contrary to the naming of the R function.

Mauchly, J.W.,
Significance test for sphericity
of a normal $n$-variate distribution,
Annals of mathematical statistics, 11(1940),
p. 204-209.

Is this a typo on the original article (which
R Core has corrected) or is it a typo in the
function name ?

Best regards,
Tobias


From p.dalgaard at biostat.ku.dk  Mon Oct 17 23:27:38 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 17 Oct 2005 23:27:38 +0200
Subject: [Rd] mauchly.test (instead of mauchley.test)  ?
In-Reply-To: <43540E09.4080405@telenet.be>
References: <43540E09.4080405@telenet.be>
Message-ID: <x2wtkbsuk5.fsf@turmalin.kubism.ku.dk>

Tobias Verbeke <tobias.verbeke at telenet.be> writes:

> Wherever I look up the following reference
> the name of the author is spelled Mauchly
> contrary to the naming of the R function.
> 
> Mauchly, J.W.,
> Significance test for sphericity
> of a normal $n$-variate distribution,
> Annals of mathematical statistics, 11(1940),
> p. 204-209.
> 
> Is this a typo on the original article (which
> R Core has corrected) or is it a typo in the
> function name ?

The latter... Thanks.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From luke at stat.uiowa.edu  Tue Oct 18 04:03:41 2005
From: luke at stat.uiowa.edu (Luke Tierney)
Date: Mon, 17 Oct 2005 21:03:41 -0500 (CDT)
Subject: [Rd] RFC: API to allow identification of warnings and errors in
 the output stream
In-Reply-To: <200510172220.52983.thomas.friedrichsmeier@ruhr-uni-bochum.de>
References: <200510171935.56499.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<Pine.LNX.4.63.0510171445140.20435@nokomis.stat.uiowa.edu>
	<200510172220.52983.thomas.friedrichsmeier@ruhr-uni-bochum.de>
Message-ID: <Pine.LNX.4.63.0510172007040.29053@itasca2.wildberry.org>

On Mon, 17 Oct 2005, Thomas Friedrichsmeier wrote:

>> I am strongly opposed to locking in anything from the C internals of
>> error handling that is not already part of the API.  This is all very
>> much subject to change and anything along the lines you propose will
>> make that change more difficult.
>
> Let's discuss this in two separate parts, then. The first is: adding
> ptr_R_WriteErrConsole as an anologon to ptr_R_WriteConsole. I can see nothing
> wrong with that (of course I'm not an R developer), and it would already help
> me a lot. As I pointed out in the previous mail, a distinction between a
> "message" channel and an "output" channel is done everywhere in R, except in
> the interface pointers. The R_WriteErrConsole comes into play at the very end
> of the "message" channel (REvprintf), and only there, exactly parallel to how
> R_WriteConsole works/gets invoked.
> Even if you're going to reject the other part of the proposed patch, please
> consider this small addition. If it helps, I can provide a stripped down
> patch for that.
>
> I'll discuss the second part (making inError, inWarning and inPrintWarnings
> available) in more detail below.

This looks less problematic, but others in R-core are more familiar
with the possible ramifications.  In any case but I also do not
believe you have made a solid case for the change.

>> Condition handling was added to make this sort of thing possible.  If
>> there are aspects of condition handling, or your understanding of
>> condition handing, that need to be improved then we can work on that.
>
> Both is quite possible. However I have reason to believe it's not just my
> understanding of condition handling that is lacking. If not so, I'll happily
> accept suggestions. Here's why I think condition handling will not help me
> much:
>
> First, for clarification, let me tell you some more about what I need: Besides
> other GUI elements, there is a pseudo-console for running commands in R
> interactively (or at least providing that illusion). I reality, all commands
> are evaluated using R_tryEval (). Still, the user should not see any of this,
> and the "console" should behave mostly just like R in a plain terminal,
> including how errors are printed (+ marking up errors in another color,
> however).
> So how could I use condition handlers?
>
> a) Wrap each call inside withCallingHandlers (...) before evaluating it in
> R_tryEval ():
> This would probably work, but add quite a bit of overhead for string
> manipulation, and parsing. The GUI runs a lot of small commands during normal
> operation.

How do you know the overhead added is significant?  The actual amount
of overhead depends on where the handler setup code is relative to the
UI loop, but even with the handler setup code pushed into the
innermost part I doubt very much that the overhead is noticeable in a
human/computer interaction context.

> There are additional hazzles, such as error messages would then
> all look like "Error in withCallingHandlers(...", and I'd have to use yet
> more string operations to make them look normal.

You need more than just withCallingHandlers if you want full control.
You will probably need a combination of withCallingHandlers, tryCatch
and withRestarts.  Look at the definition of .try_quietly in the tools
package for one example of this sort of thing.

> Also: Can I be sure, that all warnings (i.e. even from C-code) are signalled
> as conditions?

Yes--when handlers are established the internal errorcall and
warningcall functions produce and signal conditions.

> I'm afraid I do not fully understand the internal going-ons,
> here.

This remark from your earlier posting is the reson for the wording I
chose in my reply.  Instead of complicating the internals I would
prefer to help you get to the point were you understand what you need
know.

> b) Use ".Internal (.addCondHands (...))" once to set up persistent handlers:
> This worked fine, when testing it in the R-console. However, when testing in
> my GUI, it seems the condition handlers do not carry over between two
> successive calls of R_tryEval. So effectively, I'd once again be back at 3a.

There is a reason that .Internal (.addCondHands (...)) is only
documented in the primordial documentation (i.e. the source code) ...

> Of course, if there was an API to efficiently set up condition handlers from
> C, and persist over at least one call of R_tryEval, I could in fact use that,
> and would happily do so. I have not found something like that, however.

If efficiency in the sense of execution speed is really an issue we
can look into working on that.  Given my experience with similar
things on _much_ slower machines (33MHz Macintosh SE 30, for example)
I very much doubt that this is an issue.  If there are things that can
be done to make the condition system easier to work with then we can
look into that as well.

Best,

luke

-- 
Luke Tierney
Chair, Statistics and Actuarial Science
Ralph E. Wareham Professor of Mathematical Sciences
University of Iowa                  Phone:             319-335-3386
Department of Statistics and        Fax:               319-335-3017
    Actuarial Science
241 Schaeffer Hall                  email:      luke at stat.uiowa.edu
Iowa City, IA 52242                 WWW:  http://www.stat.uiowa.edu


From ripley at stats.ox.ac.uk  Tue Oct 18 09:03:51 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 18 Oct 2005 08:03:51 +0100 (BST)
Subject: [Rd] sort() and attributes
Message-ID: <Pine.LNX.4.61.0510180751520.13607@gannet.stats>

After the discussion a while back about how sort inconsistently handles 
attributes such as dim's, I have taken a closer look and found yet more 
anomalies.

That suggested trying out the principle that sort() should preserve only 
names (and sort those).  Now, sort(partial=) was preserving names and NOT 
sorting them, and since it was included for efficiency I decided it should 
just drop names.

One consequence of this is that sort() would drop S3 classes (which is 
necessary for e.g. time-series-like classes).

I have tested this out over CRAN packages and it is currently live in 
R-devel.  The only thing I can see it breaks is lattice (sorry Deepayan, 
please take a look at the changes made to axis.Date whose code you 
borrowed).

Given that this is close to what S does and sort() was not documented to 
preserve attributes, I was not expecting much impact from this change. 
Since it seems to have minimal impact this seems the best way forward, but 
I am open to counter-proposals.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Oct 18 09:27:22 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 18 Oct 2005 08:27:22 +0100 (BST)
Subject: [Rd] RFC: API to allow identification of warnings and errors in
 the output stream
In-Reply-To: <Pine.LNX.4.63.0510172007040.29053@itasca2.wildberry.org>
References: <200510171935.56499.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<Pine.LNX.4.63.0510171445140.20435@nokomis.stat.uiowa.edu>
	<200510172220.52983.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<Pine.LNX.4.63.0510172007040.29053@itasca2.wildberry.org>
Message-ID: <Pine.LNX.4.61.0510180704280.13607@gannet.stats>

On Mon, 17 Oct 2005, Luke Tierney wrote:

> On Mon, 17 Oct 2005, Thomas Friedrichsmeier wrote:
>
>>> I am strongly opposed to locking in anything from the C internals of
>>> error handling that is not already part of the API.  This is all very
>>> much subject to change and anything along the lines you propose will
>>> make that change more difficult.
>>
>> Let's discuss this in two separate parts, then. The first is: adding
>> ptr_R_WriteErrConsole as an anologon to ptr_R_WriteConsole. I can see nothing
>> wrong with that (of course I'm not an R developer), and it would already help
>> me a lot. As I pointed out in the previous mail, a distinction between a
>> "message" channel and an "output" channel is done everywhere in R, except in
>> the interface pointers. The R_WriteErrConsole comes into play at the very end
>> of the "message" channel (REvprintf), and only there, exactly parallel to how
>> R_WriteConsole works/gets invoked.
>> Even if you're going to reject the other part of the proposed patch, please
>> consider this small addition. If it helps, I can provide a stripped down
>> patch for that.
>>
>> I'll discuss the second part (making inError, inWarning and inPrintWarnings
>> available) in more detail below.
>
> This looks less problematic, but others in R-core are more familiar
> with the possible ramifications.  In any case but I also do not
> believe you have made a solid case for the change.

I second the point about not having made a case, and also that (from the 
part deleted below) about needing to understand the internals before 
proposing changes.

a) I took a quick look at the patch, and it seems to be only half the 
story.  R_WriteConsole is also supported under Windows, in a different 
(and more flexible) way.  I think the part not covered is a lot more 
problematic, as I don't see how to introduce R_WriteErrConsole in a 
backwards compatible way.

b) There are several inaccuracies in the account.  First, `channels' are 
not what we are talking about here.  sink() allow output and messages to 
be sent to different connections, but the console is connected to fixed 
terminal connections stdout() and stderr().  There is a long-standing 
design for R consoles (sketched in src/unix/system.txt) that has all the 
output going to the console.  This is even true of the standard Unix 
terminal front end.  The only circumstances in which stdout() and stderr() 
are separated are when R is used for scripting.  Part of the motivation 
for this is to ensure that stdout() and stderr() appear in an integrated 
way (in particular, interleaved in the correct order) on a console.

No other console designer has seen a need for this, and there is at least 
the potential for presenting very misleading information to end users. So 
one ramification of allowing consoles to present stdout() and stderr() 
separately would have to be a review of how they are used.  This is not 
hypothetical: I have struggled many times over the years with an R-like 
system which when scripted wrote error messages in inappropriate places on 
a file, at one point sending prompts to stderr yet echoed input to stdout. 
We've worked hard in R to avoid that kind of thing, mainly by having a 
single route to the console.  (There are still residual problems if C++ or 
Fortran I/O is used, BTW, and note that R_ReadConsole also *writes* to the 
console.)

c) Anything in R involving more than one of the three main families of 
platforms is NOT a `small addition': it involves testing and subsequent 
maintenance by two or three people.

d) There is an existing mechanism that could be used.  If you want 
file-like stderr and stdout, you could drive R via a file-like interface 
(e.g. ptys).  That is not easy on non-Unix-alike platforms (and was 
probably impossible on classic MacOS R), but I understood Thomas was using 
KDE.  (There are live examples of this route, even on Windows.)

[...]


I have spent far longer (and written more) than I intended on this.  The 
length of correspondence so far (and much in a prolix style) is all part 
of the support costs.  One thing the R project can not afford is to 
explain to individual users how internals work -- we have not even been 
able to find the time to write down for the core team how a lot of the 
internals work, and some developments are being held up by that.  So this 
has to weighed against considering proposals which would appear to help 
just one user.

I suspect that we will only want to go forward if a concise and strong 
case can be made from a group of developers who have tested it out on all 
three main families of platforms.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From fxcoudert at gmail.com  Tue Oct 18 09:57:20 2005
From: fxcoudert at gmail.com (=?ISO-8859-1?Q?Fran=E7ois-Xavier_Coudert?=)
Date: Tue, 18 Oct 2005 09:57:20 +0200
Subject: [Rd]  gfortran Makefile for windows
Message-ID: <19c433eb0510180057t4689ec16h9ed1f30f851e15a0@mail.gmail.com>

Hi,

I recently saw this posting in the r-devel list (while looking for
something completely unrelated) and just wanted to say: there are
gfortran binaries available for Windows/MinGW (in fact, I do build
them monthly just so that Windows users can use the compiler). The
exact adress (http://quatramaran.ens.fr/~coudert/gfortran/gfortran-windows.exe)
is written in the gcc/gfortran wiki: http://gcc.gnu.org/wiki/GFortran.

Happy hacking,
FX


From ripley at stats.ox.ac.uk  Tue Oct 18 10:08:16 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 18 Oct 2005 09:08:16 +0100 (BST)
Subject: [Rd] gfortran Makefile for windows
In-Reply-To: <19c433eb0510180057t4689ec16h9ed1f30f851e15a0@mail.gmail.com>
References: <19c433eb0510180057t4689ec16h9ed1f30f851e15a0@mail.gmail.com>
Message-ID: <Pine.LNX.4.61.0510180902360.16079@gannet.stats>

On Tue, 18 Oct 2005, Fran?ois-Xavier Coudert wrote:

> I recently saw this posting in the r-devel list

What posting (I see nothing included)? I guess you mean

https://stat.ethz.ch/pipermail/r-devel/2005-September/034811.html

?

> (while looking for something completely unrelated) and just wanted to 
> say: there are gfortran binaries available for Windows/MinGW (in fact, I 
> do build them monthly just so that Windows users can use the compiler). 
> The exact adress 
> (http://quatramaran.ens.fr/~coudert/gfortran/gfortran-windows.exe) is 
> written in the gcc/gfortran wiki: http://gcc.gnu.org/wiki/GFortran.

Thank you.  Please note that address does not say this is for MinGW, nor 
that it is compatible with the objects compiled from C by MinGW and with 
the MinGW binutils.  That's a crucial piece of information, as Windows has 
a compiler-specific ABI.  I used g95 because your Wiki did say so.
Will add the URL to the R-admin manual, and request you add a mention of 
MinGW on your Wiki.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

From fxcoudert at gmail.com  Tue Oct 18 11:22:31 2005
From: fxcoudert at gmail.com (=?ISO-8859-1?Q?Fran=E7ois-Xavier_Coudert?=)
Date: Tue, 18 Oct 2005 11:22:31 +0200
Subject: [Rd] gfortran Makefile for windows
In-Reply-To: <Pine.LNX.4.61.0510180902360.16079@gannet.stats>
References: <19c433eb0510180057t4689ec16h9ed1f30f851e15a0@mail.gmail.com>
	<Pine.LNX.4.61.0510180902360.16079@gannet.stats>
Message-ID: <19c433eb0510180222j6438b715yf513d316ba795eb@mail.gmail.com>

> What posting (I see nothing included)? I guess you mean
> https://stat.ethz.ch/pipermail/r-devel/2005-September/034811.html

Sorry, I thought I would add correct References and In-Reply-To
headers, but it was possible using gmail. And then I forgot to change
the wording...

> Thank you.  Please note that address does not say this is for MinGW, nor
> that it is compatible with the objects compiled from C by MinGW and with
> the MinGW binutils.  That's a crucial piece of information, as Windows has
> a compiler-specific ABI.

I changed the wiki to explicitly mention MinGW. It's been a bit hard
to choose a wording that suits both mingw users and Windows users that
have never heard of a thing called mingw, and still want to use the
compiler. Hope it's better!

FX


From maechler at stat.math.ethz.ch  Tue Oct 18 11:51:33 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Tue, 18 Oct 2005 11:51:33 +0200
Subject: [Rd] Documenting newly created generic versions of non-generic
	base	R	functions
In-Reply-To: <1128961782.17225.33.camel@gsimpson.geog.ucl.ac.uk>
References: <1128961782.17225.33.camel@gsimpson.geog.ucl.ac.uk>
Message-ID: <17236.50597.119877.624606@stat.math.ethz.ch>

>>>>> "GS" == Gavin Simpson <gavin.simpson at ucl.ac.uk>
>>>>>     on Mon, 10 Oct 2005 17:29:42 +0100 writes:

    GS> Hi,
    GS> Following the Writing R Extensions manual, I created a method for the
    GS> cor function. As cor is not a generic, I followed the advice of section
    GS> 6.1 of the same manual and did the following:

    GS> cor <- function(x, ...) UseMethod("cor")
    GS> cor.default <- stats::cor
    GS> cor.symcoca <- function{ some code }

    GS> I used package.skeleton to create the basic set-up of my package,
    GS> containing the above functions.

    GS> Do I need to provide a .Rd file for cor and cor.default? - seeing as
    GS> cor.default is cor currently.

    GS> What is the best way to handle documenting functions produced using the
    GS> above hi-jack methodology?

I'd probably write one help page, mainly for the "symcoca"
method, but also with

\alias{cor.default}
\alias{cor.symcoca}

and
\usage{
\method{cor}{symcoca}(..........)
}

and would mention 'cor.default' and your redifinition of cor,
also \code{\link[stats]{cor}}
in the \description{...} or \details{} and/or other appropriate
places.

Regards,
Martin


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Tue Oct 18 12:06:59 2005
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: Tue, 18 Oct 2005 12:06:59 +0200
Subject: [Rd] on ptr_R_WriteErrConsole (was: Re: RFC: API to allow
	identification of warnings and errors in the output stream)
In-Reply-To: <Pine.LNX.4.61.0510180704280.13607@gannet.stats>
References: <200510171935.56499.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<Pine.LNX.4.63.0510172007040.29053@itasca2.wildberry.org>
	<Pine.LNX.4.61.0510180704280.13607@gannet.stats>
Message-ID: <200510181206.59787.thomas.friedrichsmeier@ruhr-uni-bochum.de>

> I second the point about not having made a case, and also that (from the
> part deleted below) about needing to understand the internals before
> proposing changes.

I'll try to make the case below point d). I fully accept rejection of the more 
daring part of my proposal, but the part about ptr_R_WriteErrConsole is 
really straightforward, and I have really made sure to understand the 
internal going ons, here.
My reply will be lengthy, because this really is important to me.

> a) I took a quick look at the patch, and it seems to be only half the
> story.  R_WriteConsole is also supported under Windows, in a different
> (and more flexible) way.  I think the part not covered is a lot more
> problematic, as I don't see how to introduce R_WriteErrConsole in a
> backwards compatible way.

I admit I've been neglectant to the Windows code. I don't have a windows 
machine to compile and test any changes I make in my local sources, and that 
lead me to be careless. so probably the patch is not correct.
Do I believe there is still a backwards compatible way to introduce 
ptr_R_WriteErrConsole / R_WriteErrConsole?

void R_WriteErrConsole(char *buf, int len) {ptr_R_WriteErrConsole(buf, len);}
...
/* standard initialization: */
ptr_R_WriteErrConsole = R_WriteConsole;

*R_WriteConsole*. This ensures that if you do not touch the new 
ptr_R_WriteErrConsole, you get *exactly* the old behavior. I can't be much 
easier than that.

> b) There are several inaccuracies in the account.  First, `channels' are
> not what we are talking about here.  sink() allow output and messages to
> be sent to different connections, but the console is connected to fixed
> terminal connections stdout() and stderr().  There is a long-standing
> design for R consoles (sketched in src/unix/system.txt) that has all the
> output going to the console.  This is even true of the standard Unix
> terminal front end.  The only circumstances in which stdout() and stderr()
> are separated are when R is used for scripting.  Part of the motivation
> for this is to ensure that stdout() and stderr() appear in an integrated
> way (in particular, interleaved in the correct order) on a console.

Ok, so I have been simplifying, and using my own terminology. What I'm saying 
is, output generally goes two routes *throughout* R sources:

"message":
[warnings]->...->REprintf->REvprintf
[errors]->...->REprintf->REvprintf
REprintf->REvprintf

"output":
[print]->...->Rprintf->Rvprintf
Rprintf->Rvprintf

So it is not like I'm making up any new distinction, here. I'm referring to an 
existing one, avaible via already public API. See also this comment from 
printutils.c:

/* =========
 * Printing:
 * =========
 *
 * All printing in R is done via the functions Rprintf and REprintf
 * or their (v) versions Rvprintf and REvprintf.
 * These routines work exactly like (v)printf(3).  Rprintf writes to
 * ``standard output''.	 It is redirected by the sink() function,
 * and is suitable for ordinary output.	 REprintf writes to
 * ``standard error'' and is useful for error messages and warnings.
 * It is not redirected by sink().

All I'm dealing with is, what should happen in REvprintf, the last station in 
what I call the "message route":

Currently it is basically (and yes, I'm simplifying again):
void REvprintf(const char *format, va_list arg)
{
	/* A: if there is a sink(type="message"), print to that and return */ 
	/* B: if RConsoleFile is not NULL, print to that and return */ 
	/* C: if none of the above, call R_WriteConsole */ 
}

All I'm talking about is case C, and effectively, my proposal would change 
this to
	/* C: ptr_R_WriteErrConsole has been modified by stubborn developer, print to 
that and return */ 
	/* D: if none of the above, call R_WriteConsole */ 

> No other console designer has seen a need for this, and there is at least
> the potential for presenting very misleading information to end users.

Let me assure you this: The interface pointers give me enough rope already to 
shoot myself in the foot. I have enough opportunity to present extremely 
misleading information to end users. Re-read my answer to a) to see the 
change really, really, really would not affect any code that does not 
explicitely ask for this extra inch of rope.
Also let me assure you this: Other GUI designers are much interested in an 
easy way to find out which portions of the output have come the "message" 
route, as well. We do crazy stuff like using separate file-sinks, grepping 
for "warning", or "error", and things like that. I've seen hacks and hacks, 
and I've used hack after hack. But I think there is a good opportunity for a 
solid solution.

> So 
> one ramification of allowing consoles to present stdout() and stderr()
> separately would have to be a review of how they are used.  This is not
> hypothetical: I have struggled many times over the years with an R-like
> system which when scripted wrote error messages in inappropriate places on
> a file, at one point sending prompts to stderr yet echoed input to stdout.
> We've worked hard in R to avoid that kind of thing, mainly by having a
> single route to the console.  (There are still residual problems if C++ or
> Fortran I/O is used, BTW, and note that R_ReadConsole also *writes* to the
> console.)

And the single route to the console will remain intact using R_WriteConsole. 
I'm only asking for the *opportunity*, not the *obligation* to intercept the 
one call to R_WriteConsole in REvprintf.

> c) Anything in R involving more than one of the three main families of
> platforms is NOT a `small addition': it involves testing and subsequent
> maintenance by two or three people.

So, yes, somebody would have to add corresponding code to windows. 
Unfortunately, I don't think I qualify for this, as I just can't test on 
windows. I'm fairly confident, the change I did in gnuwin32 will ensure 
nothing is broken, but you would want a parallel to ptr_R_WriteErrConsole in 
windows for consistency's sake.
But please: Don't conjure up a maintenance nightmare for this simple change.

> d) There is an existing mechanism that could be used.  If you want
> file-like stderr and stdout, you could drive R via a file-like interface
> (e.g. ptys).  That is not easy on non-Unix-alike platforms (and was
> probably impossible on classic MacOS R), but I understood Thomas was using
> KDE.  (There are live examples of this route, even on Windows.)

And it's not like I haven't ventured along that route. Do you know how much 
fun it is to use two separate ptys, then try to make sure the output arrives 
in a sensible order, i.e. you don't get all warnings before all output or 
vice versa, or some strange mixture? I'm not the infailable programmer, and 
I'm not an expert in R internals. But before I go into lengthy discussions, I 
have checked my options.

So again: Why do I want something like this?
A GUI may want to do some things, which are not needed on the console. One 
such thing is to identify "message" output. There are several uses for this:
1) Highlight "message" output to bring it to the users attention
2) Offer context help on "message"s. Of course this is easier said that done, 
but the first step in this, would be to find out which portions of the output 
are messages.
3) Show "message"s that come up in operations that would usually redirect the 
output elsewhere, and not show it to the user directly. Much like the 
scripting situation you depicted in b)

And again: Why can't I just use current facilities?
1) Condition Handling: Probably the way to go for my advanced needs. But 
totally useless, if I want to catch messages generated using direct calls to 
REprintf/REvprintf. Those are abundant. They have to be dealt with. The only 
way to do this is to use a mechanism available in/below/after REvprintf.
2) Ptys, sinks: See above
3) Grepping: come on now. Could not even solve most needs, impossible due to 
internationalization...
4) Using mind reading? When I first posted about these matters to r-devel (and 
yes, before that I tried my luck on r-help), it was a plain support question: 
How can I do this? See also here:
https://stat.ethz.ch/pipermail/r-devel/2005-October/034975.html
I did not receive any reply on this. What should I conclude?

I'll gladly accept alternative solutions. They are not the above though. And 
I've written why they are not before.

> I have spent far longer (and written more) than I intended on this.  The
> length of correspondence so far (and much in a prolix style) is all part
> of the support costs.  One thing the R project can not afford is to
> explain to individual users how internals work -- we have not even been
> able to find the time to write down for the core team how a lot of the
> internals work, and some developments are being held up by that.  So this
> has to weighed against considering proposals which would appear to help
> just one user.

Sorry about writing more and more lengthy mails. I don't really want to. I 
have better things to do as well. But this is important, and - sorry to say - 
IMO you've simply overlooked a number of points. All I can do is restate 
them, trying to make extra sure to get my point across.

> I suspect that we will only want to go forward if a concise and strong
> case can be made from a group of developers who have tested it out on all
> three main families of platforms.

And where would you think, I could conjure such a group of developers, if not 
on this list?

Regards
Thomas Friedrichsmeier


From ernesto at ipimar.pt  Tue Oct 18 12:50:48 2005
From: ernesto at ipimar.pt (ernesto)
Date: Tue, 18 Oct 2005 11:50:48 +0100
Subject: [Rd] extending lattice to S4 classes
In-Reply-To: <Pine.LNX.4.61.0510150758480.27345@gannet.stats>
References: <434F88B9.1020600@ipimar.pt> <434FD8C2.205@ipimar.pt>
	<Pine.LNX.4.61.0510150758480.27345@gannet.stats>
Message-ID: <4354D388.9000209@ipimar.pt>

Prof Brian Ripley wrote:

> I think you are confusing us:  xyplot is an S3 generic with no 'data'
> argument.  It is xyplot.formula that you want to add dispatch on its
> 'data' argument.  I don't really see why you want to mix S3 and S4
> systems, but you could make xyplot.formula an S3 or S4 generic and
> dispatch on 'data', just as you did earlier with xyplot.
>
> Other xyplot methods need not (and probably do not) have a 'data'
> argument.
>
> On Fri, 14 Oct 2005, ernesto wrote:
>
>> ernesto wrote:
>>
>>> Hi,
>>>
>>> I'm writing methods for a package called FLCore (see
>>> http://flr-project.org/) in particular for a class called "FLQuant"
>>> which extends array.
>>>
>>> Previously I was able to write methods based on the class of "data" but
>>> now I can not do it due to the single parameter "x". Is there a way to
>>> do this ?
>>
>
>> I found an hack (see below) to make it work but it's terrible and hugly
>> ... some suggestions are welcome. It simply tests if data belongs to
>> class "FLQuant" and transforms it into a data.frame before ploting.
>>
>> Regards
>>
>> EJ
>>
>> if (!isGeneric("xyplot")) {
>>    setGeneric("xyplot", useAsDefault = xyplot)
>> }
>>
>>
>> setMethod("xyplot", signature("formula"), function(x, ...){
>>
>>    dots <- list(...)
>>    if(class(dots$data)=="FLQuant") dots$data <- as.data.frame(dots$data)
>>    call.list <- c(x = x, dots)
>>
>> # needed this to avoid an infinite loop because xyplot is defined only
>> for "x"
>>    xyplot <- lattice::xyplot
>>    ans <- do.call("xyplot", call.list)
>>    ans$call <- match.call()
>>    ans
>>
>> })
>
>

Hi,

Sorry to get back to this problem so late.

I want to use lattice plots for an array. In this specific case this
array is of class FLQuant which is defined by package FLCore.

This array has 5 dimensions age, year, unit, season and area. My aim is
to use formula to define what to plot and what to condition on. So
procedures like used for barchart.table are not usefull for me because
the user loses the option of defining the model to plot.

With the previous version of lattice I was able to use formula and data
to dispatch. So I defined S4 generic methods for most high level methods
(bwplot, stripplot, dotplot, xyplot, histogram, etc) and simply
transform FLQuant objects into dataframes that were passed to the
lattice methods. No harm done to other data objects.

With the new version only one object is available for dispatching "x" so
if I define some xyplot.FLQuant I will miss the formula argument.

My question is if there is a way of doing this or not.

Best regards

EJ


From stefan.albrecht at allianz.com  Tue Oct 18 14:21:41 2005
From: stefan.albrecht at allianz.com (stefan.albrecht@allianz.com)
Date: Tue, 18 Oct 2005 14:21:41 +0200 (CEST)
Subject: [Rd] Inconsistency with matrix indexing (PR#8214)
Message-ID: <20051018122141.55D698673@slim.kubism.ku.dk>

Full_Name: Stefan Albrecht
Version: 2.2.0
OS: Windows XP
Submission from: (NULL) (194.127.2.74)


Dear all,

in the new R 2.2.0, the matrix indexing has been changed. In my opinion, this
leads to an inconsistency when indexing one-row matrices.
Take
> (mat <- matrix(1:9, nrow = 3, dimnames = list(paste("r", 1:3, sep = ""),
paste("c", 1:3, sep = ""))))
   c1 c2 c3
r1  1  4  7
r2  2  5  8
r3  3  6  9

Now taking the first row of the first-row of mat preserves the column names
> mat[1, , drop = FALSE][1, ]
c1 c2 c3 
 1  4  7 

This is not true for the first column of the first-row of mat
> mat[1, , drop = FALSE][, 1]
[1] 1

However, for the first column of the first two rows of mat the row names are
retained
> mat[1:2, , drop = FALSE][, 1]
r1 r2 
 1  2 

This feature can lead to problems when indexing matrixes of different row
numbers, since the row names are not preserved in all cases.

I suggest to preseve the row names also for 
> mat[1, , drop = FALSE][, 1]

Would it be possible to implement this feature? Many thanks.

With best regards,

Stefan Albrecht


From murdoch at stats.uwo.ca  Tue Oct 18 14:24:34 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 18 Oct 2005 08:24:34 -0400
Subject: [Rd] on ptr_R_WriteErrConsole
In-Reply-To: <200510181206.59787.thomas.friedrichsmeier@ruhr-uni-bochum.de>
References: <200510171935.56499.thomas.friedrichsmeier@ruhr-uni-bochum.de>	<Pine.LNX.4.63.0510172007040.29053@itasca2.wildberry.org>	<Pine.LNX.4.61.0510180704280.13607@gannet.stats>
	<200510181206.59787.thomas.friedrichsmeier@ruhr-uni-bochum.de>
Message-ID: <4354E982.7010505@stats.uwo.ca>

I'll volunteer to do your testing on Windows, provided nobody suggests a 
way to do what you want without your patches.  That is, if there's a way 
for a custom front-end to separate the streams of text coming to 
ptr_R_WriteConsole through REvprintf from that coming through Rvprintf, 
then your changes are not needed.  If there is currently no way to do 
that, then I think there should be.

The justification for this change is to facilitate experimentation with 
different front ends, as you describe below.  That's something I think 
we should support.

Forcing both streams through ptr_R_WriteConsole without giving 
information about their origin is a decision about a particular kind of 
user interface.  Decisions like that should be made by the writer of the 
front-end.

I agree with Luke and Brian that your second suggestion (which would 
allow separation of text into regular output, warnings, and errors) 
would tie us down too much in the internal details.

Duncan Murdoch




Thomas Friedrichsmeier wrote:
>>I second the point about not having made a case, and also that (from the
>>part deleted below) about needing to understand the internals before
>>proposing changes.
> 
> 
> I'll try to make the case below point d). I fully accept rejection of the more 
> daring part of my proposal, but the part about ptr_R_WriteErrConsole is 
> really straightforward, and I have really made sure to understand the 
> internal going ons, here.
> My reply will be lengthy, because this really is important to me.
> 
> 
>>a) I took a quick look at the patch, and it seems to be only half the
>>story.  R_WriteConsole is also supported under Windows, in a different
>>(and more flexible) way.  I think the part not covered is a lot more
>>problematic, as I don't see how to introduce R_WriteErrConsole in a
>>backwards compatible way.
> 
> 
> I admit I've been neglectant to the Windows code. I don't have a windows 
> machine to compile and test any changes I make in my local sources, and that 
> lead me to be careless. so probably the patch is not correct.
> Do I believe there is still a backwards compatible way to introduce 
> ptr_R_WriteErrConsole / R_WriteErrConsole?
> 
> void R_WriteErrConsole(char *buf, int len) {ptr_R_WriteErrConsole(buf, len);}
> ...
> /* standard initialization: */
> ptr_R_WriteErrConsole = R_WriteConsole;
> 
> *R_WriteConsole*. This ensures that if you do not touch the new 
> ptr_R_WriteErrConsole, you get *exactly* the old behavior. I can't be much 
> easier than that.
> 
> 
>>b) There are several inaccuracies in the account.  First, `channels' are
>>not what we are talking about here.  sink() allow output and messages to
>>be sent to different connections, but the console is connected to fixed
>>terminal connections stdout() and stderr().  There is a long-standing
>>design for R consoles (sketched in src/unix/system.txt) that has all the
>>output going to the console.  This is even true of the standard Unix
>>terminal front end.  The only circumstances in which stdout() and stderr()
>>are separated are when R is used for scripting.  Part of the motivation
>>for this is to ensure that stdout() and stderr() appear in an integrated
>>way (in particular, interleaved in the correct order) on a console.
> 
> 
> Ok, so I have been simplifying, and using my own terminology. What I'm saying 
> is, output generally goes two routes *throughout* R sources:
> 
> "message":
> [warnings]->...->REprintf->REvprintf
> [errors]->...->REprintf->REvprintf
> REprintf->REvprintf
> 
> "output":
> [print]->...->Rprintf->Rvprintf
> Rprintf->Rvprintf
> 
> So it is not like I'm making up any new distinction, here. I'm referring to an 
> existing one, avaible via already public API. See also this comment from 
> printutils.c:
> 
> /* =========
>  * Printing:
>  * =========
>  *
>  * All printing in R is done via the functions Rprintf and REprintf
>  * or their (v) versions Rvprintf and REvprintf.
>  * These routines work exactly like (v)printf(3).  Rprintf writes to
>  * ``standard output''.	 It is redirected by the sink() function,
>  * and is suitable for ordinary output.	 REprintf writes to
>  * ``standard error'' and is useful for error messages and warnings.
>  * It is not redirected by sink().
> 
> All I'm dealing with is, what should happen in REvprintf, the last station in 
> what I call the "message route":
> 
> Currently it is basically (and yes, I'm simplifying again):
> void REvprintf(const char *format, va_list arg)
> {
> 	/* A: if there is a sink(type="message"), print to that and return */ 
> 	/* B: if RConsoleFile is not NULL, print to that and return */ 
> 	/* C: if none of the above, call R_WriteConsole */ 
> }
> 
> All I'm talking about is case C, and effectively, my proposal would change 
> this to
> 	/* C: ptr_R_WriteErrConsole has been modified by stubborn developer, print to 
> that and return */ 
> 	/* D: if none of the above, call R_WriteConsole */ 
> 
> 
>>No other console designer has seen a need for this, and there is at least
>>the potential for presenting very misleading information to end users.
> 
> 
> Let me assure you this: The interface pointers give me enough rope already to 
> shoot myself in the foot. I have enough opportunity to present extremely 
> misleading information to end users. Re-read my answer to a) to see the 
> change really, really, really would not affect any code that does not 
> explicitely ask for this extra inch of rope.
> Also let me assure you this: Other GUI designers are much interested in an 
> easy way to find out which portions of the output have come the "message" 
> route, as well. We do crazy stuff like using separate file-sinks, grepping 
> for "warning", or "error", and things like that. I've seen hacks and hacks, 
> and I've used hack after hack. But I think there is a good opportunity for a 
> solid solution.
> 
> 
>>So 
>>one ramification of allowing consoles to present stdout() and stderr()
>>separately would have to be a review of how they are used.  This is not
>>hypothetical: I have struggled many times over the years with an R-like
>>system which when scripted wrote error messages in inappropriate places on
>>a file, at one point sending prompts to stderr yet echoed input to stdout.
>>We've worked hard in R to avoid that kind of thing, mainly by having a
>>single route to the console.  (There are still residual problems if C++ or
>>Fortran I/O is used, BTW, and note that R_ReadConsole also *writes* to the
>>console.)
> 
> 
> And the single route to the console will remain intact using R_WriteConsole. 
> I'm only asking for the *opportunity*, not the *obligation* to intercept the 
> one call to R_WriteConsole in REvprintf.
> 
> 
>>c) Anything in R involving more than one of the three main families of
>>platforms is NOT a `small addition': it involves testing and subsequent
>>maintenance by two or three people.
> 
> 
> So, yes, somebody would have to add corresponding code to windows. 
> Unfortunately, I don't think I qualify for this, as I just can't test on 
> windows. I'm fairly confident, the change I did in gnuwin32 will ensure 
> nothing is broken, but you would want a parallel to ptr_R_WriteErrConsole in 
> windows for consistency's sake.
> But please: Don't conjure up a maintenance nightmare for this simple change.
> 
> 
>>d) There is an existing mechanism that could be used.  If you want
>>file-like stderr and stdout, you could drive R via a file-like interface
>>(e.g. ptys).  That is not easy on non-Unix-alike platforms (and was
>>probably impossible on classic MacOS R), but I understood Thomas was using
>>KDE.  (There are live examples of this route, even on Windows.)
> 
> 
> And it's not like I haven't ventured along that route. Do you know how much 
> fun it is to use two separate ptys, then try to make sure the output arrives 
> in a sensible order, i.e. you don't get all warnings before all output or 
> vice versa, or some strange mixture? I'm not the infailable programmer, and 
> I'm not an expert in R internals. But before I go into lengthy discussions, I 
> have checked my options.
> 
> So again: Why do I want something like this?
> A GUI may want to do some things, which are not needed on the console. One 
> such thing is to identify "message" output. There are several uses for this:
> 1) Highlight "message" output to bring it to the users attention
> 2) Offer context help on "message"s. Of course this is easier said that done, 
> but the first step in this, would be to find out which portions of the output 
> are messages.
> 3) Show "message"s that come up in operations that would usually redirect the 
> output elsewhere, and not show it to the user directly. Much like the 
> scripting situation you depicted in b)
> 
> And again: Why can't I just use current facilities?
> 1) Condition Handling: Probably the way to go for my advanced needs. But 
> totally useless, if I want to catch messages generated using direct calls to 
> REprintf/REvprintf. Those are abundant. They have to be dealt with. The only 
> way to do this is to use a mechanism available in/below/after REvprintf.
> 2) Ptys, sinks: See above
> 3) Grepping: come on now. Could not even solve most needs, impossible due to 
> internationalization...
> 4) Using mind reading? When I first posted about these matters to r-devel (and 
> yes, before that I tried my luck on r-help), it was a plain support question: 
> How can I do this? See also here:
> https://stat.ethz.ch/pipermail/r-devel/2005-October/034975.html
> I did not receive any reply on this. What should I conclude?
> 
> I'll gladly accept alternative solutions. They are not the above though. And 
> I've written why they are not before.
> 
> 
>>I have spent far longer (and written more) than I intended on this.  The
>>length of correspondence so far (and much in a prolix style) is all part
>>of the support costs.  One thing the R project can not afford is to
>>explain to individual users how internals work -- we have not even been
>>able to find the time to write down for the core team how a lot of the
>>internals work, and some developments are being held up by that.  So this
>>has to weighed against considering proposals which would appear to help
>>just one user.
> 
> 
> Sorry about writing more and more lengthy mails. I don't really want to. I 
> have better things to do as well. But this is important, and - sorry to say - 
> IMO you've simply overlooked a number of points. All I can do is restate 
> them, trying to make extra sure to get my point across.
> 
> 
>>I suspect that we will only want to go forward if a concise and strong
>>case can be made from a group of developers who have tested it out on all
>>three main families of platforms.
> 
> 
> And where would you think, I could conjure such a group of developers, if not 
> on this list?
> 
> Regards
> Thomas Friedrichsmeier
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch at stats.uwo.ca  Tue Oct 18 14:33:09 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 18 Oct 2005 08:33:09 -0400
Subject: [Rd] Inconsistency with matrix indexing (PR#8214)
In-Reply-To: <20051018122141.55D698673@slim.kubism.ku.dk>
References: <20051018122141.55D698673@slim.kubism.ku.dk>
Message-ID: <4354EB85.3000208@stats.uwo.ca>

stefan.albrecht at allianz.com wrote:
> Full_Name: Stefan Albrecht
> Version: 2.2.0
> OS: Windows XP
> Submission from: (NULL) (194.127.2.74)
> 
> 
> Dear all,
> 
> in the new R 2.2.0, the matrix indexing has been changed.

I just tried your code in R 2.0.1 and 2.1.1, and got the same output as 
you did.  Which version are you comparing to?

Duncan Murdoch


  In my opinion, this
> leads to an inconsistency when indexing one-row matrices.
> Take
> 
>>(mat <- matrix(1:9, nrow = 3, dimnames = list(paste("r", 1:3, sep = ""),
> 
> paste("c", 1:3, sep = ""))))
>    c1 c2 c3
> r1  1  4  7
> r2  2  5  8
> r3  3  6  9
> 
> Now taking the first row of the first-row of mat preserves the column names
> 
>>mat[1, , drop = FALSE][1, ]
> 
> c1 c2 c3 
>  1  4  7 
> 
> This is not true for the first column of the first-row of mat
> 
>>mat[1, , drop = FALSE][, 1]
> 
> [1] 1
> 
> However, for the first column of the first two rows of mat the row names are
> retained
> 
>>mat[1:2, , drop = FALSE][, 1]
> 
> r1 r2 
>  1  2 
> 
> This feature can lead to problems when indexing matrixes of different row
> numbers, since the row names are not preserved in all cases.
> 
> I suggest to preseve the row names also for 
> 
>>mat[1, , drop = FALSE][, 1]
> 
> 
> Would it be possible to implement this feature? Many thanks.
> 
> With best regards,
> 
> Stefan Albrecht
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From blindglobe at gmail.com  Tue Oct 18 14:36:35 2005
From: blindglobe at gmail.com (A.J. Rossini)
Date: Tue, 18 Oct 2005 14:36:35 +0200
Subject: [Rd] on ptr_R_WriteErrConsole
In-Reply-To: <4354E982.7010505@stats.uwo.ca>
References: <200510171935.56499.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<Pine.LNX.4.63.0510172007040.29053@itasca2.wildberry.org>
	<Pine.LNX.4.61.0510180704280.13607@gannet.stats>
	<200510181206.59787.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<4354E982.7010505@stats.uwo.ca>
Message-ID: <1abe3fa90510180536k5d26fd1k7d9bdb3190c6633a@mail.gmail.com>

I fully support Duncan M (though it's painless for me).

What I wanted to do, and explored, when I was visiting Peter D in
Copenhagen nearly 2 years ago, was to XML-ize the output stream, so
that I could mark it up.  From that, it would be reasonably simple to
parse output (provided you marked it up on the way out, which was the
difficult part, I fully admit, which was where I failed to get a
distributable implementation).

(the goal was to provide multimedia output streams, i.e. text, audio,
static graphics, or dynamic graphics, as required).

The person asking about a log4j a while back (or what I'm looking at
right now, log4cl) probably wanted the same thing.


On 10/18/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
> I'll volunteer to do your testing on Windows, provided nobody suggests a
> way to do what you want without your patches.  That is, if there's a way
> for a custom front-end to separate the streams of text coming to
> ptr_R_WriteConsole through REvprintf from that coming through Rvprintf,
> then your changes are not needed.  If there is currently no way to do
> that, then I think there should be.
>
> The justification for this change is to facilitate experimentation with
> different front ends, as you describe below.  That's something I think
> we should support.
>
> Forcing both streams through ptr_R_WriteConsole without giving
> information about their origin is a decision about a particular kind of
> user interface.  Decisions like that should be made by the writer of the
> front-end.
>
> I agree with Luke and Brian that your second suggestion (which would
> allow separation of text into regular output, warnings, and errors)
> would tie us down too much in the internal details.
>
> Duncan Murdoch
>
>
>
>
> Thomas Friedrichsmeier wrote:
> >>I second the point about not having made a case, and also that (from the
> >>part deleted below) about needing to understand the internals before
> >>proposing changes.
> >
> >
> > I'll try to make the case below point d). I fully accept rejection of the more
> > daring part of my proposal, but the part about ptr_R_WriteErrConsole is
> > really straightforward, and I have really made sure to understand the
> > internal going ons, here.
> > My reply will be lengthy, because this really is important to me.
> >
> >
> >>a) I took a quick look at the patch, and it seems to be only half the
> >>story.  R_WriteConsole is also supported under Windows, in a different
> >>(and more flexible) way.  I think the part not covered is a lot more
> >>problematic, as I don't see how to introduce R_WriteErrConsole in a
> >>backwards compatible way.
> >
> >
> > I admit I've been neglectant to the Windows code. I don't have a windows
> > machine to compile and test any changes I make in my local sources, and that
> > lead me to be careless. so probably the patch is not correct.
> > Do I believe there is still a backwards compatible way to introduce
> > ptr_R_WriteErrConsole / R_WriteErrConsole?
> >
> > void R_WriteErrConsole(char *buf, int len) {ptr_R_WriteErrConsole(buf, len);}
> > ...
> > /* standard initialization: */
> > ptr_R_WriteErrConsole = R_WriteConsole;
> >
> > *R_WriteConsole*. This ensures that if you do not touch the new
> > ptr_R_WriteErrConsole, you get *exactly* the old behavior. I can't be much
> > easier than that.
> >
> >
> >>b) There are several inaccuracies in the account.  First, `channels' are
> >>not what we are talking about here.  sink() allow output and messages to
> >>be sent to different connections, but the console is connected to fixed
> >>terminal connections stdout() and stderr().  There is a long-standing
> >>design for R consoles (sketched in src/unix/system.txt) that has all the
> >>output going to the console.  This is even true of the standard Unix
> >>terminal front end.  The only circumstances in which stdout() and stderr()
> >>are separated are when R is used for scripting.  Part of the motivation
> >>for this is to ensure that stdout() and stderr() appear in an integrated
> >>way (in particular, interleaved in the correct order) on a console.
> >
> >
> > Ok, so I have been simplifying, and using my own terminology. What I'm saying
> > is, output generally goes two routes *throughout* R sources:
> >
> > "message":
> > [warnings]->...->REprintf->REvprintf
> > [errors]->...->REprintf->REvprintf
> > REprintf->REvprintf
> >
> > "output":
> > [print]->...->Rprintf->Rvprintf
> > Rprintf->Rvprintf
> >
> > So it is not like I'm making up any new distinction, here. I'm referring to an
> > existing one, avaible via already public API. See also this comment from
> > printutils.c:
> >
> > /* =========
> >  * Printing:
> >  * =========
> >  *
> >  * All printing in R is done via the functions Rprintf and REprintf
> >  * or their (v) versions Rvprintf and REvprintf.
> >  * These routines work exactly like (v)printf(3).  Rprintf writes to
> >  * ``standard output''.        It is redirected by the sink() function,
> >  * and is suitable for ordinary output.        REprintf writes to
> >  * ``standard error'' and is useful for error messages and warnings.
> >  * It is not redirected by sink().
> >
> > All I'm dealing with is, what should happen in REvprintf, the last station in
> > what I call the "message route":
> >
> > Currently it is basically (and yes, I'm simplifying again):
> > void REvprintf(const char *format, va_list arg)
> > {
> >       /* A: if there is a sink(type="message"), print to that and return */
> >       /* B: if RConsoleFile is not NULL, print to that and return */
> >       /* C: if none of the above, call R_WriteConsole */
> > }
> >
> > All I'm talking about is case C, and effectively, my proposal would change
> > this to
> >       /* C: ptr_R_WriteErrConsole has been modified by stubborn developer, print to
> > that and return */
> >       /* D: if none of the above, call R_WriteConsole */
> >
> >
> >>No other console designer has seen a need for this, and there is at least
> >>the potential for presenting very misleading information to end users.
> >
> >
> > Let me assure you this: The interface pointers give me enough rope already to
> > shoot myself in the foot. I have enough opportunity to present extremely
> > misleading information to end users. Re-read my answer to a) to see the
> > change really, really, really would not affect any code that does not
> > explicitely ask for this extra inch of rope.
> > Also let me assure you this: Other GUI designers are much interested in an
> > easy way to find out which portions of the output have come the "message"
> > route, as well. We do crazy stuff like using separate file-sinks, grepping
> > for "warning", or "error", and things like that. I've seen hacks and hacks,
> > and I've used hack after hack. But I think there is a good opportunity for a
> > solid solution.
> >
> >
> >>So
> >>one ramification of allowing consoles to present stdout() and stderr()
> >>separately would have to be a review of how they are used.  This is not
> >>hypothetical: I have struggled many times over the years with an R-like
> >>system which when scripted wrote error messages in inappropriate places on
> >>a file, at one point sending prompts to stderr yet echoed input to stdout.
> >>We've worked hard in R to avoid that kind of thing, mainly by having a
> >>single route to the console.  (There are still residual problems if C++ or
> >>Fortran I/O is used, BTW, and note that R_ReadConsole also *writes* to the
> >>console.)
> >
> >
> > And the single route to the console will remain intact using R_WriteConsole.
> > I'm only asking for the *opportunity*, not the *obligation* to intercept the
> > one call to R_WriteConsole in REvprintf.
> >
> >
> >>c) Anything in R involving more than one of the three main families of
> >>platforms is NOT a `small addition': it involves testing and subsequent
> >>maintenance by two or three people.
> >
> >
> > So, yes, somebody would have to add corresponding code to windows.
> > Unfortunately, I don't think I qualify for this, as I just can't test on
> > windows. I'm fairly confident, the change I did in gnuwin32 will ensure
> > nothing is broken, but you would want a parallel to ptr_R_WriteErrConsole in
> > windows for consistency's sake.
> > But please: Don't conjure up a maintenance nightmare for this simple change.
> >
> >
> >>d) There is an existing mechanism that could be used.  If you want
> >>file-like stderr and stdout, you could drive R via a file-like interface
> >>(e.g. ptys).  That is not easy on non-Unix-alike platforms (and was
> >>probably impossible on classic MacOS R), but I understood Thomas was using
> >>KDE.  (There are live examples of this route, even on Windows.)
> >
> >
> > And it's not like I haven't ventured along that route. Do you know how much
> > fun it is to use two separate ptys, then try to make sure the output arrives
> > in a sensible order, i.e. you don't get all warnings before all output or
> > vice versa, or some strange mixture? I'm not the infailable programmer, and
> > I'm not an expert in R internals. But before I go into lengthy discussions, I
> > have checked my options.
> >
> > So again: Why do I want something like this?
> > A GUI may want to do some things, which are not needed on the console. One
> > such thing is to identify "message" output. There are several uses for this:
> > 1) Highlight "message" output to bring it to the users attention
> > 2) Offer context help on "message"s. Of course this is easier said that done,
> > but the first step in this, would be to find out which portions of the output
> > are messages.
> > 3) Show "message"s that come up in operations that would usually redirect the
> > output elsewhere, and not show it to the user directly. Much like the
> > scripting situation you depicted in b)
> >
> > And again: Why can't I just use current facilities?
> > 1) Condition Handling: Probably the way to go for my advanced needs. But
> > totally useless, if I want to catch messages generated using direct calls to
> > REprintf/REvprintf. Those are abundant. They have to be dealt with. The only
> > way to do this is to use a mechanism available in/below/after REvprintf.
> > 2) Ptys, sinks: See above
> > 3) Grepping: come on now. Could not even solve most needs, impossible due to
> > internationalization...
> > 4) Using mind reading? When I first posted about these matters to r-devel (and
> > yes, before that I tried my luck on r-help), it was a plain support question:
> > How can I do this? See also here:
> > https://stat.ethz.ch/pipermail/r-devel/2005-October/034975.html
> > I did not receive any reply on this. What should I conclude?
> >
> > I'll gladly accept alternative solutions. They are not the above though. And
> > I've written why they are not before.
> >
> >
> >>I have spent far longer (and written more) than I intended on this.  The
> >>length of correspondence so far (and much in a prolix style) is all part
> >>of the support costs.  One thing the R project can not afford is to
> >>explain to individual users how internals work -- we have not even been
> >>able to find the time to write down for the core team how a lot of the
> >>internals work, and some developments are being held up by that.  So this
> >>has to weighed against considering proposals which would appear to help
> >>just one user.
> >
> >
> > Sorry about writing more and more lengthy mails. I don't really want to. I
> > have better things to do as well. But this is important, and - sorry to say -
> > IMO you've simply overlooked a number of points. All I can do is restate
> > them, trying to make extra sure to get my point across.
> >
> >
> >>I suspect that we will only want to go forward if a concise and strong
> >>case can be made from a group of developers who have tested it out on all
> >>three main families of platforms.
> >
> >
> > And where would you think, I could conjure such a group of developers, if not
> > on this list?
> >
> > Regards
> > Thomas Friedrichsmeier
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


--
best,
-tony

blindglobe at gmail.com
Muttenz, Switzerland.
"Commit early,commit often, and commit in a repository from which we can easily
roll-back your mistakes" (AJR, 4Jan05).


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Tue Oct 18 14:51:49 2005
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: Tue, 18 Oct 2005 14:51:49 +0200
Subject: [Rd] on ptr_R_WriteErrConsole
In-Reply-To: <4354E982.7010505@stats.uwo.ca>
References: <200510171935.56499.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<200510181206.59787.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<4354E982.7010505@stats.uwo.ca>
Message-ID: <200510181451.49861.thomas.friedrichsmeier@ruhr-uni-bochum.de>

> I'll volunteer to do your testing on Windows, provided nobody suggests a
> way to do what you want without your patches.  That is, if there's a way
> for a custom front-end to separate the streams of text coming to
> ptr_R_WriteConsole through REvprintf from that coming through Rvprintf,
> then your changes are not needed.  If there is currently no way to do
> that, then I think there should be.

That would be great. Thank you. I have created a new version of the diff 
(still against R 2.2.0). This only contains the R_WriteErrConsole part, and 
the other part is stripped. Also, I have elaborated the windows version of 
the handling. I hope I have not overlooked anything:

http://rkward.sourceforge.net/temp/r_writeerrconsole.diff

If in addition you would like me to create a test case, that would be slightly 
more difficult for me to do, but I'd be happy to give it a try. Just send me 
a mail in this case. Probably, however, I would not be able to do this before 
tomorrow.

Regards
Thomas Friedrichsmeier


From murdoch at stats.uwo.ca  Tue Oct 18 15:08:15 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 18 Oct 2005 09:08:15 -0400
Subject: [Rd] on ptr_R_WriteErrConsole
In-Reply-To: <200510181451.49861.thomas.friedrichsmeier@ruhr-uni-bochum.de>
References: <200510171935.56499.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<200510181206.59787.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<4354E982.7010505@stats.uwo.ca>
	<200510181451.49861.thomas.friedrichsmeier@ruhr-uni-bochum.de>
Message-ID: <4354F3BF.3030406@stats.uwo.ca>

On 10/18/2005 8:51 AM, Thomas Friedrichsmeier wrote:
>> I'll volunteer to do your testing on Windows, provided nobody suggests a
>> way to do what you want without your patches.  That is, if there's a way
>> for a custom front-end to separate the streams of text coming to
>> ptr_R_WriteConsole through REvprintf from that coming through Rvprintf,
>> then your changes are not needed.  If there is currently no way to do
>> that, then I think there should be.
> 
> That would be great. Thank you. I have created a new version of the diff 
> (still against R 2.2.0). This only contains the R_WriteErrConsole part, and 
> the other part is stripped. Also, I have elaborated the windows version of 
> the handling. I hope I have not overlooked anything:
> 
> http://rkward.sourceforge.net/temp/r_writeerrconsole.diff
> 
> If in addition you would like me to create a test case, that would be slightly 
> more difficult for me to do, but I'd be happy to give it a try. Just send me 
> a mail in this case. Probably, however, I would not be able to do this before 
> tomorrow.

Thanks.  I don't think I'll need a test case.  I'll check that it 
compiles and doesn't change the behaviour, then see how easy it is to 
change the colour of error messages in the Windows GUI.

Duncan


From stefan.albrecht at allianz.com  Tue Oct 18 15:32:33 2005
From: stefan.albrecht at allianz.com (stefan.albrecht@allianz.com)
Date: Tue, 18 Oct 2005 15:32:33 +0200
Subject: [Rd] Antwort: Re:  Inconsistency with matrix indexing (PR#8214)
In-Reply-To: <4354EB85.3000208@stats.uwo.ca>
Message-ID: <OFF34F0367.DADB935A-ONC125709E.00489565-C125709E.004A647B@inside.allianz.de>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051018/e516548a/attachment.pl

From murdoch at stats.uwo.ca  Tue Oct 18 15:50:59 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Tue, 18 Oct 2005 09:50:59 -0400
Subject: [Rd] Antwort: Re: Inconsistency with matrix indexing (PR#8214)
In-Reply-To: <OFF34F0367.DADB935A-ONC125709E.00489565-C125709E.004A647B@inside.allianz.de>
References: <OFF34F0367.DADB935A-ONC125709E.00489565-C125709E.004A647B@inside.allianz.de>
Message-ID: <4354FDC3.7050801@stats.uwo.ca>

On 10/18/2005 9:32 AM, stefan.albrecht at allianz.com wrote:
> Dear Duncan,
> 
> you are right. In both R 2.2.0 and 2.1.1 you get the same result. What has 
> actually changed is the following:
> In R 2.1.1
>> mat[1, , drop = FALSE][1]
> r1 
>  1 
> 
> While in R 2.2.0
>> mat[1, , drop = FALSE][1]
> [1] 1

I don't agree with your suggestion.  mat[1, , drop = FALSE] is a  1x3 
matrix, with both row and column names.  Indexing it by [1] says that 
you want to treat it as a vector, and give the first element.  How could 
R know whether to keep the row or column name for that [1,1] element? 
What should it do with the expression

mat[1,1 , drop = FALSE][1]

?

If you are really concerned about the names, you should use matrix 
indexing in both places with drop = FALSE:

 > mat[1, , drop = FALSE][1,1,drop=FALSE]
    c1
r1  1

Duncan Murdoch

> 
> In both cases
>> mat[1, , drop = FALSE]
>    c1 c2 c3
> r1  1  4  7
> 
> I would strongly prefer to retain the row index r1 above.
> Of course, you could argue that mat[1, , drop = FALSE][1] relates to the 
> column name c1. However, I think the lower dimension is a vector and this 
> typically a column with row names. Most likely, a  wiser and more concise 
> interpretation than the mine is necessary, but the problem of dropping and 
> loosing information is quite evident in any case.
> 
> Still, I believe, my suggestion below is justified. Things like this 
> happen quite often to me and it regularly takes time and effort to rectify 
> the problem.
> Retaining the matrix features in sames could really be an advantage and 
> avoid many if's and other workarounds.
> 
> Many thanks and best regards,
> Stefan
> 
> 
> 
> Duncan Murdoch <murdoch at stats.uwo.ca> 
> 2005-10-18 14:33
> 
> An
> stefan.albrecht at allianz.com
> Kopie
> r-devel at stat.math.ethz.ch, R-bugs at biostat.ku.dk
> Thema
> Re: [Rd] Inconsistency with matrix indexing (PR#8214)
> 
> 
> 
> 
> 
> 
> stefan.albrecht at allianz.com wrote:
>> Full_Name: Stefan Albrecht
>> Version: 2.2.0
>> OS: Windows XP
>> Submission from: (NULL) (194.127.2.74)
>> 
>> 
>> Dear all,
>> 
>> in the new R 2.2.0, the matrix indexing has been changed.
> 
> I just tried your code in R 2.0.1 and 2.1.1, and got the same output as 
> you did.  Which version are you comparing to?
> 
> Duncan Murdoch
> 
> 
>   In my opinion, this
>> leads to an inconsistency when indexing one-row matrices.
>> Take
>> 
>>>(mat <- matrix(1:9, nrow = 3, dimnames = list(paste("r", 1:3, sep = ""),
>> 
>> paste("c", 1:3, sep = ""))))
>>    c1 c2 c3
>> r1  1  4  7
>> r2  2  5  8
>> r3  3  6  9
>> 
>> Now taking the first row of the first-row of mat preserves the column 
> names
>> 
>>>mat[1, , drop = FALSE][1, ]
>> 
>> c1 c2 c3 
>>  1  4  7 
>> 
>> This is not true for the first column of the first-row of mat
>> 
>>>mat[1, , drop = FALSE][, 1]
>> 
>> [1] 1
>> 
>> However, for the first column of the first two rows of mat the row names 
> are
>> retained
>> 
>>>mat[1:2, , drop = FALSE][, 1]
>> 
>> r1 r2 
>>  1  2 
>> 
>> This feature can lead to problems when indexing matrixes of different 
> row
>> numbers, since the row names are not preserved in all cases.
>> 
>> I suggest to preseve the row names also for 
>> 
>>>mat[1, , drop = FALSE][, 1]
>> 
>> 
>> Would it be possible to implement this feature? Many thanks.
>> 
>> With best regards,
>> 
>> Stefan Albrecht
>> 
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
> 
>


From efg at stowers-institute.org  Tue Oct 18 17:39:45 2005
From: efg at stowers-institute.org (Earl F. Glynn)
Date: Tue, 18 Oct 2005 10:39:45 -0500
Subject: [Rd] Why no .Machine$sizeof.double?
Message-ID: <dj3503$7us$1@sea.gmane.org>

Whis is there a .Machine$sizeof.longdouble but no .Machine$sizeof.double?

(.Machine$double.digits + .Machine$double.exponent) / 8
could be used for .Machine$sizeof.double, I guess, but why define the
structure of doubles in bits, and all other sizeof's in bytes (e.g.,
.Machine$size.long)?

efg
Stowers Institute for Medical Research


From sfalcon at fhcrc.org  Tue Oct 18 18:06:22 2005
From: sfalcon at fhcrc.org (Seth Falcon)
Date: Tue, 18 Oct 2005 09:06:22 -0700
Subject: [Rd] tryCatch, simpleCondition question
Message-ID: <m2k6ga24jl.fsf@macaroni.local>

Hi,

I'm trying to learn how to use the tryCatch condition system and am
confused about the behavior when I set the call arg of a
simpleCondition.

I want to catch an error if it meets a certain criteria and otherwise
reraise it.  I want the error message to indicate the function in
which the error occured (and not mention tryCatch).

Wanted:

  > g("foo")         ## error caught
  [1] "caught foo"

  > g("otherwise")   ## error reraised
  Error in g("otherwise") : otherwise

This works:

g <- function(msg) {
    mycall <- sys.call(0)
    tryCatch(stop(msg),
             error=function(e) {
                 if ("foo" == conditionMessage(e))
                   "caught foo"
                 else {
                     cond <- simpleCondition(conditionMessage(e),
                                             call=mycall)
                     stop(cond)
                 }
             })
}

But I think I should be able to use sys.parent, or sys.call inside the
simpleCondition call instead of saving my position.

I found that call=sys.call(-4) gives me the desired result, but can't
imagine that this would be a good thing to put into code.  Is there a
convenient way to say, "give me the call one up from the tryCatch I'm
currently in"?  Or is saving my call to pass into the tryCatch the
best way?

Thanks,

+ seth


From khansen at stat.Berkeley.EDU  Tue Oct 18 18:53:54 2005
From: khansen at stat.Berkeley.EDU (Kasper Daniel Hansen)
Date: Tue, 18 Oct 2005 09:53:54 -0700
Subject: [Rd] cross-compiling tools
Message-ID: <22ACEB9C-CE67-4FA6-BAE2-EA8F8A7E234B@stat.Berkeley.EDU>

Hi

We have been cross-compiling windows packages under Linux using the  
excellent Makefile and instructions by Tony Rossini and Jun Yan.  
Specifically we have been cross-compiling c++ code and it used to work.

Now the minGW tools located at www.stats.ox.ac.uk/pub/Rtools have  
changed from version 4 to version 5, and our cross-compiling have  
stopped working.

Inspecting the tarball we are unable to find the header files for c+ 
+, so it seems that c++ support has been left out. Has this been  
changed intentionally, because it used to work and in addition c++ is  
included in the list of "standard" minGW packages listed on  
www.murdoch-sutherland.com/Rtools

If the change is intentionally, should be just get the c++ code from  
minGW and merge it into the tarball?

Kasper and Jim


From phgrosjean at sciviews.org  Mon Oct 17 11:42:56 2005
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Mon, 17 Oct 2005 11:42:56 +0200
Subject: [Rd] [R-gui]    R GUI considerations
In-Reply-To: <1129490486.5518.140.camel@localhost.localdomain>
References: <4350FB09.3020503@sciviews.org>	<Pine.LNX.4.61.0510160915430.20389@gannet.stats>	<17234.23221.482412.732757@basebud.nulle.part>	<200510161653.00853.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<1129490486.5518.140.camel@localhost.localdomain>
Message-ID: <43537220.1070705@sciviews.org>

Hello Marc and the others (and the User!2006 organizing commitee),

I answer to Marc's email, because I think it is the most constructive 
one. I am a little bit dissapointed that the discussion about R GUIs, 
whatever the initial subject, inevitably shifts to an endless discussion 
about which graphical toolkit to use, and whether one should interface 
it directly, or by means of an intermediary language perhaps more 
suitable for handling widgets events.

Should I recall that this thread is *not* about which graphical toolkit 
to use, but is trying to trigger a discussion on how could we work 
together to avoid duplication in coding for R GUIs, and perhaps, join in 
a common project. Something totally different!

I know people that already play the game of collaboration: those I am 
working with to bring bridges between their projects and SciViews-R. 
There is another person working on general improvements of R for GUIs: 
Duncan Murdoch, but this is about RGui.exe, thus for Windows only.

I support the proposition of Marc Schwartz to dedicate a session in 
User!2006 to this subject... but I would like to precise this: it should 
be stated clearly that the GUI session would *not* be about discussing 
which graphical widgets to use, and *not* on the presentation of yet 
another new R GUI project. That session should be clearly focused on:
- actual examples of use of R GUIs, and the benefit their bring in practice,
- propositions for developping a common and reusable API for R GUIs 
(preferrably written in R to be independent of particular graphical 
widgets -I started such a thing in svDialogs, and I think that Simon 
Urbanek's Iwidgets is similar in philosophy-),
- bringing bridges between existing R GUI projects,
- identifying cross-platform opportunities.
That session should be followed by an extensive discussion (why not 
around a drink, or a good meal?), between interested people. The 
discussion should be best focused on:

1) How and who will install tools for collaborative work on those common 
R GUI pieces of code (a CVS or SVN for instance)... we already have a 
web site and the R-SIG-GUI, even if these tools are currently under-used.

2) How and who will sketch documents summarizing our goals. Of course, 
these documents should be editable by everybody. So, something like a 
WiKi sounds good here.

3) In a near future, we will begin to add code in the "common R GUI 
tools", of course. This should be pieces of code extracted from the 
various R GUI projects. So, we have to draw an initial list of these 
pieces of code and who will provide them.

I CC: this mail directly to the User!2006 organizing committee, because 
it is a direct call asking for such a session. Regarding the organizer, 
  I wouldn't propose names... someone from the R developer's team, or a 
key person in R GUIs topics...
Best,

Philippe Grosjean

..............................................<?}))><........
  ) ) ) ) )
( ( ( ( (    Prof. Philippe Grosjean
  ) ) ) ) )
( ( ( ( (    Numerical Ecology of Aquatic Systems
  ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
  ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
( ( ( ( (
  ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
  ) ) ) ) )
( ( ( ( (    web:   http://www.umh.ac.be/~econum
  ) ) ) ) )          http://www.sciviews.org
( ( ( ( (
..............................................................

Marc Schwartz wrote:
> Greetings all,
> 
> While recognizing that "this is easier said, than done", is there any
> logic in suggesting that for those who might be interested, a specific R
> GUI session of sorts be added to the UseR! 2006 meeting schedule?
> 
> Since some quorum of interested GUI users may be planning to attend the
> meeting or may be motivated to do so, it may be an opportunity to:
> 
> 1. Leverage face to face interaction and visualize possible options
> 
> 2. Define areas of commonality
> 
> 3. Bring some level of focus to targeted segments of the user base that
> would utilize a GUI and for whom there may be differing functional
> requirements.
> 
> 4. Identify cross-platform opportunities and technologies
> 
> 5. See further notes below...
> 
> 
> Some of the preliminary work could no doubt be done in advance to better
> prepare and structure discussion.
> 
> This could be done as a "breakout" session or if there is sufficient
> interest (and facility/funding issues can be resolved) perhaps a group
> session held the day before or perhaps the day after the main conference
> program.
> 
> If there is a core group that is interested in pursuing this, an
> announcement could be made to the respective R e-mail lists (r-help,
> r-devel, r-sig-gui, etc.) whereby, with the sufficient lead time as we
> have, the requisite activities could be put in place to orchestrate the
> session, define specific desired outcomes and identify individuals
> willing to spend their time to coordinate and make this venture
> successful (however success would be defined).
> 
> There is no business or financial motivation here for a GUI. If there
> was and a for profit company decided that there would be a significant
> return on investment, they would spend the money, hire the resources,
> define a team leader and put forth a single development spec for a GUI
> project based upon their own market research. It would be done in a
> relatively authoritarian fashion and if you didn't agree, you would be
> asked to find a job elsewhere.
> 
> Here, you would need to solicit voluntary resources, reconcile the
> expected differences of opinion on the spectrum of matters that would
> have to be addressed and define some common framework for operating,
> perhaps based upon targeted user segments.
> 
> This subject, as mentioned, has come up on the lists previously, with no
> common resolution, resulting of course in the individual activities that
> have emerged.
> 
> Is there a group of motivated useRs out there, who have the time,
> energy, and skills and are willing to work within the framework of a
> design and development "team" environment, where a quid pro quo for
> moving forward could evolve from the User! 2006 meeting? 
> 
> Is there an individual, who would need to emerge from that group, who
> has the respect and requisite skills to drive a consensus of opinion and
> keep a team focused and moving in the proper direction?
> 
> If so, that might be a step in the direction of evolving a GUI that
> might make sense for some yet to be defined range of useRs, who would
> not otherwise utilize the CLI or might need to evolve in that direction
> over time.
> 
> If not, then the status quo continues...
> 
> There are some 300 Linux distributions out there and multiple X based
> GUIs, which have evolved for reasons as varied as those behind the
> available R GUIs and more. Yet there are a select few base Linux
> distributions and largely two GUIs that have garnered any significant
> market share. Perhaps, over time, lacking any coordinated activity, a
> similar situation will evolve here, if the predicate that a broad demand
> for a R GUI is valid.
> 
> If the predicate is false, then this process is perhaps rightly done by
> individuals meeting narrowly focused, local requirements.
> 
> I should note, that I am not prospective GUI user, but a happy ESS user.
> I simply thought that I would try to provoke some discussion on this
> point, since I jumped into this thread earlier in the week.
> 
> Best regards,
> 
> Marc Schwartz
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>


From duncan at wald.ucdavis.edu  Mon Oct 17 18:59:33 2005
From: duncan at wald.ucdavis.edu (Duncan Temple Lang)
Date: Mon, 17 Oct 2005 09:59:33 -0700
Subject: [Rd] [R-gui]      R GUI considerations
In-Reply-To: <43537220.1070705@sciviews.org>
References: <4350FB09.3020503@sciviews.org>	<Pine.LNX.4.61.0510160915430.20389@gannet.stats>	<17234.23221.482412.732757@basebud.nulle.part>	<200510161653.00853.thomas.friedrichsmeier@ruhr-uni-bochum.de>	<1129490486.5518.140.camel@localhost.localdomain>
	<43537220.1070705@sciviews.org>
Message-ID: <4353D875.5000409@wald.ucdavis.edu>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1



Philippe Grosjean wrote:
> Hello Marc and the others (and the User!2006 organizing commitee),
> 
> I answer to Marc's email, because I think it is the most constructive 
> one. I am a little bit dissapointed that the discussion about R GUIs, 
> whatever the initial subject, inevitably shifts to an endless discussion 
> about which graphical toolkit to use, and whether one should interface 
> it directly, or by means of an intermediary language perhaps more 
> suitable for handling widgets events.
> 
> Should I recall that this thread is *not* about which graphical toolkit 
> to use, but is trying to trigger a discussion on how could we work 
> together to avoid duplication in coding for R GUIs, and perhaps, join in 
> a common project. Something totally different!
> 


I think all of us will agree that we have limited resources
and should collaborate where possible.
However, to do this, we must have a common set of interests
that form a reason to collaborate.
Your earlier mail mentioned the link
(http://www.sciviews.org/_rgui/rgui/GUIs.html)
to the different types of GUIs you were considering, be it
a Web-based, or notebook style, or whatever.

I really think that you have to think about things from other peoples'
perspectives and realize that many of us are not considering "the GUI"
as you are. You seem to have an audience in mind which
  a) need access to a broad range of R functions
  b) are averse to the command line.
It appears you have students in mind, probably non-statisticians
in an introductory class.  That is great. And your approach is
perfectly reasonable to address that need.

However, others of us have very different goals.
Some of us want specialized GUIs, e.g. GeneGGobi, interfaces
to specific functionality (e.g. random forests), ....
Others of us have been buidling tools for interactive documents, much
like a Web browser embedded in R with complex composite widgets
embedded within the document to have dynamic, interactive documents.
These are very different audiences, and accordingly very different
GUIs.  They require not customization of a general GUI, but
an ability to construct entirely new GUIs.

Where we can really collaborate is in the development of
GUI components that can be used from within R to construct
these different GUIs.

I really encourage you to try to consider what other people
are thinking and hopefully this will help us get past the
discussions of specific toolkits, etc.  I think they have
originated from beliefs that we are all talking about variations
of the same student-oriented GUI. In fact, we are talking about
much richer forms of pedagogy and interface.

 D.




> I know people that already play the game of collaboration: those I am 
> working with to bring bridges between their projects and SciViews-R. 
> There is another person working on general improvements of R for GUIs: 
> Duncan Murdoch, but this is about RGui.exe, thus for Windows only.
> 
> I support the proposition of Marc Schwartz to dedicate a session in 
> User!2006 to this subject... but I would like to precise this: it should 
> be stated clearly that the GUI session would *not* be about discussing 
> which graphical widgets to use, and *not* on the presentation of yet 
> another new R GUI project. That session should be clearly focused on:
> - actual examples of use of R GUIs, and the benefit their bring in practice,
> - propositions for developping a common and reusable API for R GUIs 
> (preferrably written in R to be independent of particular graphical 
> widgets -I started such a thing in svDialogs, and I think that Simon 
> Urbanek's Iwidgets is similar in philosophy-),
> - bringing bridges between existing R GUI projects,
> - identifying cross-platform opportunities.
> That session should be followed by an extensive discussion (why not 
> around a drink, or a good meal?), between interested people. The 
> discussion should be best focused on:
> 
> 1) How and who will install tools for collaborative work on those common 
> R GUI pieces of code (a CVS or SVN for instance)... we already have a 
> web site and the R-SIG-GUI, even if these tools are currently under-used.
> 
> 2) How and who will sketch documents summarizing our goals. Of course, 
> these documents should be editable by everybody. So, something like a 
> WiKi sounds good here.
> 
> 3) In a near future, we will begin to add code in the "common R GUI 
> tools", of course. This should be pieces of code extracted from the 
> various R GUI projects. So, we have to draw an initial list of these 
> pieces of code and who will provide them.
> 
> I CC: this mail directly to the User!2006 organizing committee, because 
> it is a direct call asking for such a session. Regarding the organizer, 
>   I wouldn't propose names... someone from the R developer's team, or a 
> key person in R GUIs topics...
> Best,
> 
> Philippe Grosjean
> 
> ..............................................<?}))><........
>   ) ) ) ) )
> ( ( ( ( (    Prof. Philippe Grosjean
>   ) ) ) ) )
> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>   ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
> ( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
>   ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
> ( ( ( ( (
>   ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
> ( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
>   ) ) ) ) )
> ( ( ( ( (    web:   http://www.umh.ac.be/~econum
>   ) ) ) ) )          http://www.sciviews.org
> ( ( ( ( (
> ..............................................................
> 
> Marc Schwartz wrote:
> 
>>Greetings all,
>>
>>While recognizing that "this is easier said, than done", is there any
>>logic in suggesting that for those who might be interested, a specific R
>>GUI session of sorts be added to the UseR! 2006 meeting schedule?
>>
>>Since some quorum of interested GUI users may be planning to attend the
>>meeting or may be motivated to do so, it may be an opportunity to:
>>
>>1. Leverage face to face interaction and visualize possible options
>>
>>2. Define areas of commonality
>>
>>3. Bring some level of focus to targeted segments of the user base that
>>would utilize a GUI and for whom there may be differing functional
>>requirements.
>>
>>4. Identify cross-platform opportunities and technologies
>>
>>5. See further notes below...
>>
>>
>>Some of the preliminary work could no doubt be done in advance to better
>>prepare and structure discussion.
>>
>>This could be done as a "breakout" session or if there is sufficient
>>interest (and facility/funding issues can be resolved) perhaps a group
>>session held the day before or perhaps the day after the main conference
>>program.
>>
>>If there is a core group that is interested in pursuing this, an
>>announcement could be made to the respective R e-mail lists (r-help,
>>r-devel, r-sig-gui, etc.) whereby, with the sufficient lead time as we
>>have, the requisite activities could be put in place to orchestrate the
>>session, define specific desired outcomes and identify individuals
>>willing to spend their time to coordinate and make this venture
>>successful (however success would be defined).
>>
>>There is no business or financial motivation here for a GUI. If there
>>was and a for profit company decided that there would be a significant
>>return on investment, they would spend the money, hire the resources,
>>define a team leader and put forth a single development spec for a GUI
>>project based upon their own market research. It would be done in a
>>relatively authoritarian fashion and if you didn't agree, you would be
>>asked to find a job elsewhere.
>>
>>Here, you would need to solicit voluntary resources, reconcile the
>>expected differences of opinion on the spectrum of matters that would
>>have to be addressed and define some common framework for operating,
>>perhaps based upon targeted user segments.
>>
>>This subject, as mentioned, has come up on the lists previously, with no
>>common resolution, resulting of course in the individual activities that
>>have emerged.
>>
>>Is there a group of motivated useRs out there, who have the time,
>>energy, and skills and are willing to work within the framework of a
>>design and development "team" environment, where a quid pro quo for
>>moving forward could evolve from the User! 2006 meeting? 
>>
>>Is there an individual, who would need to emerge from that group, who
>>has the respect and requisite skills to drive a consensus of opinion and
>>keep a team focused and moving in the proper direction?
>>
>>If so, that might be a step in the direction of evolving a GUI that
>>might make sense for some yet to be defined range of useRs, who would
>>not otherwise utilize the CLI or might need to evolve in that direction
>>over time.
>>
>>If not, then the status quo continues...
>>
>>There are some 300 Linux distributions out there and multiple X based
>>GUIs, which have evolved for reasons as varied as those behind the
>>available R GUIs and more. Yet there are a select few base Linux
>>distributions and largely two GUIs that have garnered any significant
>>market share. Perhaps, over time, lacking any coordinated activity, a
>>similar situation will evolve here, if the predicate that a broad demand
>>for a R GUI is valid.
>>
>>If the predicate is false, then this process is perhaps rightly done by
>>individuals meeting narrowly focused, local requirements.
>>
>>I should note, that I am not prospective GUI user, but a happy ESS user.
>>I simply thought that I would try to provoke some discussion on this
>>point, since I jumped into this thread earlier in the week.
>>
>>Best regards,
>>
>>Marc Schwartz
>>
>>______________________________________________
>>R-devel at r-project.org mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
> 
> 
> _______________________________________________
> R-SIG-GUI mailing list
> R-SIG-GUI at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-gui

- --
Duncan Temple Lang                duncan at wald.ucdavis.edu
Department of Statistics          work:  (530) 752-4782
371 Kerr Hall                     fax:   (530) 752-7099
One Shields Ave.
University of California at Davis
Davis, CA 95616, USA
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (Darwin)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFDU9h19p/Jzwa2QP4RAmYjAJ992GZhsa2XXu+RgC2ma7WlnmfvJQCeK1AS
nf7SVZeZsoS4Q9gaigI6U8c=
=r1zP
-----END PGP SIGNATURE-----


From tlumley at u.washington.edu  Tue Oct 18 19:44:04 2005
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 18 Oct 2005 10:44:04 -0700 (PDT)
Subject: [Rd] Why no .Machine$sizeof.double?
In-Reply-To: <dj3503$7us$1@sea.gmane.org>
References: <dj3503$7us$1@sea.gmane.org>
Message-ID: <Pine.LNX.4.63a.0510181039440.30016@homer24.u.washington.edu>

On Tue, 18 Oct 2005, Earl F. Glynn wrote:

> Whis is there a .Machine$sizeof.longdouble but no .Machine$sizeof.double?
>

sizeof(double) is always 8 and sizeof(int) is always 4, because R requires 
the IEEE/IEC standard arithmetic types.  R will not compile with any other 
sizes.

 	-thomas


From blindglobe at gmail.com  Tue Oct 18 19:45:24 2005
From: blindglobe at gmail.com (A.J. Rossini)
Date: Tue, 18 Oct 2005 19:45:24 +0200
Subject: [Rd] cross-compiling tools
In-Reply-To: <22ACEB9C-CE67-4FA6-BAE2-EA8F8A7E234B@stat.Berkeley.EDU>
References: <22ACEB9C-CE67-4FA6-BAE2-EA8F8A7E234B@stat.Berkeley.EDU>
Message-ID: <1abe3fa90510181045l79b06d3ai257723a215f0f39c@mail.gmail.com>

Technically,  "Jun Yan, based on work and documentation most likely by
Brian Ripley, with Tony prodding Jun".  Though I'm sure even that
would be corrected.

Sorry, no clue, as I'm not using R nor Linux at work these days.  I'm
sure someone else knows.

On 10/18/05, Kasper Daniel Hansen <khansen at stat.berkeley.edu> wrote:
> Hi
>
> We have been cross-compiling windows packages under Linux using the
> excellent Makefile and instructions by Tony Rossini and Jun Yan.
> Specifically we have been cross-compiling c++ code and it used to work.
>
> Now the minGW tools located at www.stats.ox.ac.uk/pub/Rtools have
> changed from version 4 to version 5, and our cross-compiling have
> stopped working.
>
> Inspecting the tarball we are unable to find the header files for c+
> +, so it seems that c++ support has been left out. Has this been
> changed intentionally, because it used to work and in addition c++ is
> included in the list of "standard" minGW packages listed on
> www.murdoch-sutherland.com/Rtools
>
> If the change is intentionally, should be just get the c++ code from
> minGW and merge it into the tarball?
>
> Kasper and Jim
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


--
best,
-tony

blindglobe at gmail.com
Muttenz, Switzerland.
"Commit early,commit often, and commit in a repository from which we can easily
roll-back your mistakes" (AJR, 4Jan05).


From ellis at stat.harvard.edu  Tue Oct 18 20:17:45 2005
From: ellis at stat.harvard.edu (Byron Ellis)
Date: Tue, 18 Oct 2005 11:17:45 -0700
Subject: [Rd] on ptr_R_WriteErrConsole
In-Reply-To: <1abe3fa90510180536k5d26fd1k7d9bdb3190c6633a@mail.gmail.com>
References: <200510171935.56499.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<Pine.LNX.4.63.0510172007040.29053@itasca2.wildberry.org>
	<Pine.LNX.4.61.0510180704280.13607@gannet.stats>
	<200510181206.59787.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<4354E982.7010505@stats.uwo.ca>
	<1abe3fa90510180536k5d26fd1k7d9bdb3190c6633a@mail.gmail.com>
Message-ID: <1E3E50E9-7664-43B3-8DD5-F3E61F9F6F11@stat.harvard.edu>

Yup, I like that idea too though it seems like it should be done by  
routing through the connection interface. It would be interesting to  
see how much the current stdout relies on information that wouldn't  
necessarily be available in an event stream. Of course, if you're  
going to go this route you may as well go for the gusto and push the  
eventloop up to the connection level a la CLIM.

On Oct 18, 2005, at 5:36 AM, A.J. Rossini wrote:

> I fully support Duncan M (though it's painless for me).
>
> What I wanted to do, and explored, when I was visiting Peter D in
> Copenhagen nearly 2 years ago, was to XML-ize the output stream, so
> that I could mark it up.  From that, it would be reasonably simple to
> parse output (provided you marked it up on the way out, which was the
> difficult part, I fully admit, which was where I failed to get a
> distributable implementation).
>
> (the goal was to provide multimedia output streams, i.e. text, audio,
> static graphics, or dynamic graphics, as required).
>
> The person asking about a log4j a while back (or what I'm looking at
> right now, log4cl) probably wanted the same thing.
>
>
> On 10/18/05, Duncan Murdoch <murdoch at stats.uwo.ca> wrote:
>
>> I'll volunteer to do your testing on Windows, provided nobody  
>> suggests a
>> way to do what you want without your patches.  That is, if there's  
>> a way
>> for a custom front-end to separate the streams of text coming to
>> ptr_R_WriteConsole through REvprintf from that coming through  
>> Rvprintf,
>> then your changes are not needed.  If there is currently no way to do
>> that, then I think there should be.
>>
>> The justification for this change is to facilitate experimentation  
>> with
>> different front ends, as you describe below.  That's something I  
>> think
>> we should support.
>>
>> Forcing both streams through ptr_R_WriteConsole without giving
>> information about their origin is a decision about a particular  
>> kind of
>> user interface.  Decisions like that should be made by the writer  
>> of the
>> front-end.
>>
>> I agree with Luke and Brian that your second suggestion (which would
>> allow separation of text into regular output, warnings, and errors)
>> would tie us down too much in the internal details.
>>
>> Duncan Murdoch
>>
>>
>>
>>
>> Thomas Friedrichsmeier wrote:
>>
>>>> I second the point about not having made a case, and also that  
>>>> (from the
>>>> part deleted below) about needing to understand the internals  
>>>> before
>>>> proposing changes.
>>>>
>>>
>>>
>>> I'll try to make the case below point d). I fully accept  
>>> rejection of the more
>>> daring part of my proposal, but the part about  
>>> ptr_R_WriteErrConsole is
>>> really straightforward, and I have really made sure to understand  
>>> the
>>> internal going ons, here.
>>> My reply will be lengthy, because this really is important to me.
>>>
>>>
>>>
>>>> a) I took a quick look at the patch, and it seems to be only  
>>>> half the
>>>> story.  R_WriteConsole is also supported under Windows, in a  
>>>> different
>>>> (and more flexible) way.  I think the part not covered is a lot  
>>>> more
>>>> problematic, as I don't see how to introduce R_WriteErrConsole in a
>>>> backwards compatible way.
>>>>
>>>
>>>
>>> I admit I've been neglectant to the Windows code. I don't have a  
>>> windows
>>> machine to compile and test any changes I make in my local  
>>> sources, and that
>>> lead me to be careless. so probably the patch is not correct.
>>> Do I believe there is still a backwards compatible way to introduce
>>> ptr_R_WriteErrConsole / R_WriteErrConsole?
>>>
>>> void R_WriteErrConsole(char *buf, int len) {ptr_R_WriteErrConsole 
>>> (buf, len);}
>>> ...
>>> /* standard initialization: */
>>> ptr_R_WriteErrConsole = R_WriteConsole;
>>>
>>> *R_WriteConsole*. This ensures that if you do not touch the new
>>> ptr_R_WriteErrConsole, you get *exactly* the old behavior. I  
>>> can't be much
>>> easier than that.
>>>
>>>
>>>
>>>> b) There are several inaccuracies in the account.  First,  
>>>> `channels' are
>>>> not what we are talking about here.  sink() allow output and  
>>>> messages to
>>>> be sent to different connections, but the console is connected  
>>>> to fixed
>>>> terminal connections stdout() and stderr().  There is a long- 
>>>> standing
>>>> design for R consoles (sketched in src/unix/system.txt) that has  
>>>> all the
>>>> output going to the console.  This is even true of the standard  
>>>> Unix
>>>> terminal front end.  The only circumstances in which stdout()  
>>>> and stderr()
>>>> are separated are when R is used for scripting.  Part of the  
>>>> motivation
>>>> for this is to ensure that stdout() and stderr() appear in an  
>>>> integrated
>>>> way (in particular, interleaved in the correct order) on a console.
>>>>
>>>
>>>
>>> Ok, so I have been simplifying, and using my own terminology.  
>>> What I'm saying
>>> is, output generally goes two routes *throughout* R sources:
>>>
>>> "message":
>>> [warnings]->...->REprintf->REvprintf
>>> [errors]->...->REprintf->REvprintf
>>> REprintf->REvprintf
>>>
>>> "output":
>>> [print]->...->Rprintf->Rvprintf
>>> Rprintf->Rvprintf
>>>
>>> So it is not like I'm making up any new distinction, here. I'm  
>>> referring to an
>>> existing one, avaible via already public API. See also this  
>>> comment from
>>> printutils.c:
>>>
>>> /* =========
>>>  * Printing:
>>>  * =========
>>>  *
>>>  * All printing in R is done via the functions Rprintf and REprintf
>>>  * or their (v) versions Rvprintf and REvprintf.
>>>  * These routines work exactly like (v)printf(3).  Rprintf writes to
>>>  * ``standard output''.        It is redirected by the sink()  
>>> function,
>>>  * and is suitable for ordinary output.        REprintf writes to
>>>  * ``standard error'' and is useful for error messages and warnings.
>>>  * It is not redirected by sink().
>>>
>>> All I'm dealing with is, what should happen in REvprintf, the  
>>> last station in
>>> what I call the "message route":
>>>
>>> Currently it is basically (and yes, I'm simplifying again):
>>> void REvprintf(const char *format, va_list arg)
>>> {
>>>       /* A: if there is a sink(type="message"), print to that and  
>>> return */
>>>       /* B: if RConsoleFile is not NULL, print to that and return */
>>>       /* C: if none of the above, call R_WriteConsole */
>>> }
>>>
>>> All I'm talking about is case C, and effectively, my proposal  
>>> would change
>>> this to
>>>       /* C: ptr_R_WriteErrConsole has been modified by stubborn  
>>> developer, print to
>>> that and return */
>>>       /* D: if none of the above, call R_WriteConsole */
>>>
>>>
>>>
>>>> No other console designer has seen a need for this, and there is  
>>>> at least
>>>> the potential for presenting very misleading information to end  
>>>> users.
>>>>
>>>
>>>
>>> Let me assure you this: The interface pointers give me enough  
>>> rope already to
>>> shoot myself in the foot. I have enough opportunity to present  
>>> extremely
>>> misleading information to end users. Re-read my answer to a) to  
>>> see the
>>> change really, really, really would not affect any code that does  
>>> not
>>> explicitely ask for this extra inch of rope.
>>> Also let me assure you this: Other GUI designers are much  
>>> interested in an
>>> easy way to find out which portions of the output have come the  
>>> "message"
>>> route, as well. We do crazy stuff like using separate file-sinks,  
>>> grepping
>>> for "warning", or "error", and things like that. I've seen hacks  
>>> and hacks,
>>> and I've used hack after hack. But I think there is a good  
>>> opportunity for a
>>> solid solution.
>>>
>>>
>>>
>>>> So
>>>> one ramification of allowing consoles to present stdout() and  
>>>> stderr()
>>>> separately would have to be a review of how they are used.  This  
>>>> is not
>>>> hypothetical: I have struggled many times over the years with an  
>>>> R-like
>>>> system which when scripted wrote error messages in inappropriate  
>>>> places on
>>>> a file, at one point sending prompts to stderr yet echoed input  
>>>> to stdout.
>>>> We've worked hard in R to avoid that kind of thing, mainly by  
>>>> having a
>>>> single route to the console.  (There are still residual problems  
>>>> if C++ or
>>>> Fortran I/O is used, BTW, and note that R_ReadConsole also  
>>>> *writes* to the
>>>> console.)
>>>>
>>>
>>>
>>> And the single route to the console will remain intact using  
>>> R_WriteConsole.
>>> I'm only asking for the *opportunity*, not the *obligation* to  
>>> intercept the
>>> one call to R_WriteConsole in REvprintf.
>>>
>>>
>>>
>>>> c) Anything in R involving more than one of the three main  
>>>> families of
>>>> platforms is NOT a `small addition': it involves testing and  
>>>> subsequent
>>>> maintenance by two or three people.
>>>>
>>>
>>>
>>> So, yes, somebody would have to add corresponding code to windows.
>>> Unfortunately, I don't think I qualify for this, as I just can't  
>>> test on
>>> windows. I'm fairly confident, the change I did in gnuwin32 will  
>>> ensure
>>> nothing is broken, but you would want a parallel to  
>>> ptr_R_WriteErrConsole in
>>> windows for consistency's sake.
>>> But please: Don't conjure up a maintenance nightmare for this  
>>> simple change.
>>>
>>>
>>>
>>>> d) There is an existing mechanism that could be used.  If you want
>>>> file-like stderr and stdout, you could drive R via a file-like  
>>>> interface
>>>> (e.g. ptys).  That is not easy on non-Unix-alike platforms (and was
>>>> probably impossible on classic MacOS R), but I understood Thomas  
>>>> was using
>>>> KDE.  (There are live examples of this route, even on Windows.)
>>>>
>>>
>>>
>>> And it's not like I haven't ventured along that route. Do you  
>>> know how much
>>> fun it is to use two separate ptys, then try to make sure the  
>>> output arrives
>>> in a sensible order, i.e. you don't get all warnings before all  
>>> output or
>>> vice versa, or some strange mixture? I'm not the infailable  
>>> programmer, and
>>> I'm not an expert in R internals. But before I go into lengthy  
>>> discussions, I
>>> have checked my options.
>>>
>>> So again: Why do I want something like this?
>>> A GUI may want to do some things, which are not needed on the  
>>> console. One
>>> such thing is to identify "message" output. There are several  
>>> uses for this:
>>> 1) Highlight "message" output to bring it to the users attention
>>> 2) Offer context help on "message"s. Of course this is easier  
>>> said that done,
>>> but the first step in this, would be to find out which portions  
>>> of the output
>>> are messages.
>>> 3) Show "message"s that come up in operations that would usually  
>>> redirect the
>>> output elsewhere, and not show it to the user directly. Much like  
>>> the
>>> scripting situation you depicted in b)
>>>
>>> And again: Why can't I just use current facilities?
>>> 1) Condition Handling: Probably the way to go for my advanced  
>>> needs. But
>>> totally useless, if I want to catch messages generated using  
>>> direct calls to
>>> REprintf/REvprintf. Those are abundant. They have to be dealt  
>>> with. The only
>>> way to do this is to use a mechanism available in/below/after  
>>> REvprintf.
>>> 2) Ptys, sinks: See above
>>> 3) Grepping: come on now. Could not even solve most needs,  
>>> impossible due to
>>> internationalization...
>>> 4) Using mind reading? When I first posted about these matters to  
>>> r-devel (and
>>> yes, before that I tried my luck on r-help), it was a plain  
>>> support question:
>>> How can I do this? See also here:
>>> https://stat.ethz.ch/pipermail/r-devel/2005-October/034975.html
>>> I did not receive any reply on this. What should I conclude?
>>>
>>> I'll gladly accept alternative solutions. They are not the above  
>>> though. And
>>> I've written why they are not before.
>>>
>>>
>>>
>>>> I have spent far longer (and written more) than I intended on  
>>>> this.  The
>>>> length of correspondence so far (and much in a prolix style) is  
>>>> all part
>>>> of the support costs.  One thing the R project can not afford is to
>>>> explain to individual users how internals work -- we have not  
>>>> even been
>>>> able to find the time to write down for the core team how a lot  
>>>> of the
>>>> internals work, and some developments are being held up by  
>>>> that.  So this
>>>> has to weighed against considering proposals which would appear  
>>>> to help
>>>> just one user.
>>>>
>>>
>>>
>>> Sorry about writing more and more lengthy mails. I don't really  
>>> want to. I
>>> have better things to do as well. But this is important, and -  
>>> sorry to say -
>>> IMO you've simply overlooked a number of points. All I can do is  
>>> restate
>>> them, trying to make extra sure to get my point across.
>>>
>>>
>>>
>>>> I suspect that we will only want to go forward if a concise and  
>>>> strong
>>>> case can be made from a group of developers who have tested it  
>>>> out on all
>>>> three main families of platforms.
>>>>
>>>
>>>
>>> And where would you think, I could conjure such a group of  
>>> developers, if not
>>> on this list?
>>>
>>> Regards
>>> Thomas Friedrichsmeier
>>>
>>> ______________________________________________
>>> R-devel at r-project.org mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
>
> --
> best,
> -tony
>
> blindglobe at gmail.com
> Muttenz, Switzerland.
> "Commit early,commit often, and commit in a repository from which  
> we can easily
> roll-back your mistakes" (AJR, 4Jan05).
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

---
Byron Ellis (ellis at stat.harvard.edu)
"Oook" -- The Librarian


From efg at stowers-institute.org  Tue Oct 18 22:08:59 2005
From: efg at stowers-institute.org (Earl F. Glynn)
Date: Tue, 18 Oct 2005 15:08:59 -0500
Subject: [Rd] Why no .Machine$sizeof.double?
References: <dj3503$7us$1@sea.gmane.org>
	<Pine.LNX.4.63a.0510181039440.30016@homer24.u.washington.edu>
Message-ID: <dj3kos$ur5$1@sea.gmane.org>

"Thomas Lumley" <tlumley at u.washington.edu> wrote in message
news:Pine.LNX.4.63a.0510181039440.30016 at homer24.u.washington.edu...
> On Tue, 18 Oct 2005, Earl F. Glynn wrote:
>
> > Whis is there a .Machine$sizeof.longdouble but no
.Machine$sizeof.double?
> >
>
> sizeof(double) is always 8 and sizeof(int) is always 4, because R requires
> the IEEE/IEC standard arithmetic types.  R will not compile with any other
> sizes.

But it's a common, recommended software engineering practice to define
mnemonic, named constants.

If I were to see code like .Machine$sizeof.double * N.COL * N.ROW, I know
that's the number of bytes in a matrix of doubles. If I see code that is 8 *
N.COL * N.ROW, I can guess what "8" means, but I could guess wrong.  I wrote
code that looks just like this today because I couldn't find the defined
constant.  Will someone else reading my code automatically know what the "8"
means?

The use of  literal constants should be discouraged.  I encourage more to
study Section 12.7 "Named Constants" in the book "Code Complete 2" (see
http://www.cc2e.com/).  At some point the R community should become more
receptive to named constant to make R code more readable and easier to
maintain.  But for now, I guess I still have a minority opinion on this
matter in the R community.

efg


From tlumley at u.washington.edu  Tue Oct 18 22:45:28 2005
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Tue, 18 Oct 2005 13:45:28 -0700 (PDT)
Subject: [Rd] Why no .Machine$sizeof.double?
In-Reply-To: <dj3kos$ur5$1@sea.gmane.org>
References: <dj3503$7us$1@sea.gmane.org>
	<Pine.LNX.4.63a.0510181039440.30016@homer24.u.washington.edu>
	<dj3kos$ur5$1@sea.gmane.org>
Message-ID: <Pine.LNX.4.63a.0510181332090.30016@homer24.u.washington.edu>

On Tue, 18 Oct 2005, Earl F. Glynn wrote:

> "Thomas Lumley" <tlumley at u.washington.edu> wrote in message
> news:Pine.LNX.4.63a.0510181039440.30016 at homer24.u.washington.edu...
>> On Tue, 18 Oct 2005, Earl F. Glynn wrote:
>>
>>> Whis is there a .Machine$sizeof.longdouble but no
> .Machine$sizeof.double?
>>>
>>
>> sizeof(double) is always 8 and sizeof(int) is always 4, because R requires
>> the IEEE/IEC standard arithmetic types.  R will not compile with any other
>> sizes.
>
> But it's a common, recommended software engineering practice to define
> mnemonic, named constants.
>
> If I were to see code like .Machine$sizeof.double * N.COL * N.ROW, I know
> that's the number of bytes in a matrix of doubles. If I see code that is 8 *
> N.COL * N.ROW, I can guess what "8" means, but I could guess wrong.  I wrote
> code that looks just like this today because I couldn't find the defined
> constant.  Will someone else reading my code automatically know what the "8"
> means?
>

But why would you ever want to write either .Machine$sizeof.double * N.COL 
* N.ROW or 8 * N.COL * N.ROW?

If you are doing memory allocation in R then numeric() automatically 
allocates things of the correct size. If you are doing memory allocation 
in C then you should use sizeof(double) or, even better, sizeof(*yourpointer).
In both cases, the language has the facility to let you work in the 
correct units without explicit constants, named or unnamed.

You would have a stronger case for arguing that there should be typedefs
in C so that you didn't need to remember that R's numeric type is double 
(rather than, er, float?)and its integer type is int (rather than long)
  and in fact we do provide
  typedef int Sint;
in R.h.

 	-thomas


From efg at stowers-institute.org  Tue Oct 18 23:55:10 2005
From: efg at stowers-institute.org (Earl F. Glynn)
Date: Tue, 18 Oct 2005 16:55:10 -0500
Subject: [Rd] Why no .Machine$sizeof.double?
References: <dj3503$7us$1@sea.gmane.org><Pine.LNX.4.63a.0510181039440.30016@homer24.u.washington.edu><dj3kos$ur5$1@sea.gmane.org>
	<Pine.LNX.4.63a.0510181332090.30016@homer24.u.washington.edu>
Message-ID: <dj3qvv$iq5$1@sea.gmane.org>

"Thomas Lumley" <tlumley at u.washington.edu> wrote in message
news:Pine.LNX.4.63a.0510181332090.30016 at homer24.u.washington.edu...
> But why would you ever want to write either .Machine$sizeof.double * N.COL
> * N.ROW or 8 * N.COL * N.ROW?

To troubleshoot a problem a post doc is having with a large matrix.  I was
trying to understand the size of the numbers in the matrix and the extra
overhead reported as part of object.size().

Often code fragments from "toy" examples and tests later find their way into
other problems over time, so I find it useful to write code that can be
easily understood if I look at it months or years later.

The disciplined use of named constants actually saves time in the long run.
I've spent years of my life reverse engineering code in several languages
(once on a medical device seized by a federal marshal  we were legally
ordered to reverse engineer the software under FDA scrutiny with none of the
original developers available).  I've seen enough "bad" code I like to
encourage good software engineering practices.

Can you find useful information from Google about "8"?

> You would have a stronger case for arguing that there should be typedefs
> in C so that you didn't need to remember that R's numeric type is double
> (rather than, er, float?)and its integer type is int (rather than long)

I was taught in software engineering and programming classes over 25 years
ago that it was a good idea to NEVER use literal constants. I don't think
that practice has changed in the software engineering world.

Many times I've had to lookup the meaning of R literal constants, especially
with R graphics parameters.  Just what does "1" or "2" mean, especially when
it's context sensitive?  Good mnemonics and named constants convey more
meaning, make code easier to read (and learn) and make it more maintainable.

Statisticians might be dismayed when someone applies a wrong statistical
test.  Likewise, computer folks should be concerned when good programming
practices are not followed.

efg


From mlopez at iattc.org  Wed Oct 19 00:37:23 2005
From: mlopez at iattc.org (Milton Lopez)
Date: Tue, 18 Oct 2005 15:37:23 -0700
Subject: [Rd] 64 bit R for Windows
Message-ID: <84B25EE9B4CB1A47A197E6AE76790D7801646334@mail1.lajolla.iattc.org>

One (delayed) follow-up question on this:

We are buying Dell workstations with 64-bit single-core Xeon processors,
and we could add a second processor for not much more. Is it possible to
make a generalized statement as to what kind of performance improvement
we would see with a single vs. dual processors when running R on these
systems?

Thanks again.

M.


-----Original Message-----
From: Thomas Lumley [mailto:tlumley at u.washington.edu] 
Sent: Friday, September 02, 2005 1:29 PM
To: Martin Maechler
Cc: R-devel at r-project.org; Milton Lopez
Subject: Re: [Rd] 64 bit R for Windows

On *Windows* there is an address space limit of about 3Gb (and on 
other 32bit systems)

On a 64bit system the limit is that a vector can't have length greater 
than 2^31, but this would be 8Gb for integers or 16Gb for doubles and so

represents larger objects than you would want to handle on most current 
64-bit systems.

 	-thomas


From berwin at maths.uwa.edu.au  Wed Oct 19 09:23:48 2005
From: berwin at maths.uwa.edu.au (berwin@maths.uwa.edu.au)
Date: Wed, 19 Oct 2005 09:23:48 +0200 (CEST)
Subject: [Rd] Documentation bug in complex.Rd (PR#8218)
Message-ID: <20051019072348.46FAB20C07@slim.kubism.ku.dk>

Dear all,

I noticed a documentation error in complex.Rd.  A patch that corrects
the error is as follows:

[bossiaea:R-devel-src]$ svn diff
Index: src/library/base/man/complex.Rd
===================================================================
--- src/library/base/man/complex.Rd     (revision 35935)
+++ src/library/base/man/complex.Rd     (working copy)
@@ -52,7 +52,8 @@
   complex values. Modulus and argument are also called the \emph{polar
       coordinates}. If \eqn{z = x + i y} with real \eqn{x} and \eqn{y},
   \code{Mod}\eqn{(z) = \sqrt{x^2 + y^2}}, and for
-  \eqn{\phi= Arg(z)}, \eqn{x = \cos(\phi)} and \eqn{y = \sin(\phi)}.
+  \eqn{\phi= \code{Arg}(z)}, \eqn{x = \code{Mod}(z)\cos(\phi)} and
+  \eqn{y = \code{Mod}(z)\sin(\phi)}.
   They are all generic functions: methods can be defined
   for them individually or via the \code{\link{Complex}} group generic.

Cheers,

        Berwin

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 2
 minor = 2.0
 year = 2005
 month = 10
 day = 06
 svn rev = 35749
 language = R

Locale:
C

Search Path:
 .GlobalEnv, package:methods, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, Autoloads, package:base


From Jens.Gloeckler at math.uni-giessen.de  Wed Oct 19 13:58:02 2005
From: Jens.Gloeckler at math.uni-giessen.de (Jens.Gloeckler@math.uni-giessen.de)
Date: Wed, 19 Oct 2005 13:58:02 +0200 (CEST)
Subject: [Rd] can't start csh (scripts) (PR#8220)
Message-ID: <20051019115802.22FAC15B21@slim.kubism.ku.dk>

Dear R developers,

after upgrading from R 2.1.1 to 2.2.0 I can't start csh (scripts) anymore.

While the following commands work fine

  > system("tcsh -c pwd")
  /hom1/users/gloeckler
  > system("bash -c pwd")
  /hom1/users/gloeckler
  > system("ksh -c pwd")
  /hom1/users/gloeckler

csh (in contrast to the shells used above) doesn't give any result:

  > system("csh -c pwd")
  > 

Outside of R csh and csh scripts do not cause any problems.

I tracked down a problem with starting an HTML browser down to this
problem with the invocation of any csh process.

The csh used is the normal C-Shell shipped with Solaris 9.

Thanks in advance,
Jens Gloeckler



--please do not edit the information below--

Version:
 platform = sparc-sun-solaris2.9
 arch = sparc
 os = solaris2.9
 system = sparc, solaris2.9
 status = 
 major = 2
 minor = 2.0
 year = 2005
 month = 10
 day = 06
 svn rev = 35749
 language = R

Locale:
C

Search Path:
 .GlobalEnv, package:methods, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, Autoloads, package:base


From maechler at stat.math.ethz.ch  Wed Oct 19 14:08:39 2005
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 19 Oct 2005 14:08:39 +0200 (CEST)
Subject: [Rd] Inconsistency with matrix indexing (PR#8214)
Message-ID: <20051019120839.C42A720A8C@slim.kubism.ku.dk>

>>>>> "Duncan" == Duncan Murdoch <murdoch at stats.uwo.ca>
>>>>>     on Tue, 18 Oct 2005 09:50:59 -0400 writes:

    Duncan> On 10/18/2005 9:32 AM, stefan.albrecht at allianz.com wrote:
    >> Dear Duncan,
    >> 
    >> you are right. In both R 2.2.0 and 2.1.1 you get the same result. What has 
    >> actually changed is the following:
    >> In R 2.1.1
    >>> mat[1, , drop = FALSE][1]
    >> r1 
    >> 1 
    >> 
    >> While in R 2.2.0
    >>> mat[1, , drop = FALSE][1]
    >> [1] 1

    Duncan> I don't agree with your suggestion.  mat[1, , drop = FALSE]
    Duncan> is a 1x3 matrix, with both row and column
    Duncan> names.  Indexing it by [1] says that you want to
    Duncan> treat it as a vector, and give the first element.
    Duncan> How could R know whether to keep the row or column
    Duncan> name for that [1,1] element?  What should it do with
    Duncan> the expression

    Duncan> mat[1,1 , drop = FALSE][1]

    Duncan> ?

    Duncan> If you are really concerned about the names, you should use matrix 
    Duncan> indexing in both places with drop = FALSE:

    >> mat[1, , drop = FALSE][1,1,drop=FALSE]
    Duncan> c1
    Duncan> r1  1

    Duncan> Duncan Murdoch

yes, definitely.  There's no bug here, and there was rather a
bug in previous behavior.

Just a simpler example {"for posteriority"}:

> (M <- cbind(a=0:1, b=c(A=2, B=3)))
  a b 
A 0 2
B 1 3
> M[1,2, drop=FALSE]
  b 
A 2
> M[1,2]
[1] 2
> M[2]  ### treat M as vector -> lose names
[1] 1
> M[2:3]
[1] 1 2
>


From ripley at stats.ox.ac.uk  Wed Oct 19 14:15:28 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 19 Oct 2005 14:15:28 +0200 (CEST)
Subject: [Rd] can't start csh (scripts) (PR#8220)
Message-ID: <20051019121528.83EAF20602@slim.kubism.ku.dk>

This works perfectly correctly in four separate configurations (32-/64-bit 
x gcc/cc) on our Solaris 8, and I can see no change in the R sources for 
do_system since Mar 2004.

Are you sure that it is not something in your build environment that has 
changed since 2.1.1 was built?

Please confirm that if you build 2.1.1 and 2.2.0 with the same tools they 
behave differently, and if so tell us what those tools are.

All R is doing here is to call the C system call and the output comes from 
the shell directly to the terminal, without any intervention from R.  You 
might try a command that actually does something permanent to confirm that 
csh is executing it: if that is the case the issue is how csh writes to 
your terminal.

On Wed, 19 Oct 2005 Jens.Gloeckler at math.uni-giessen.de wrote:

> Dear R developers,
>
> after upgrading from R 2.1.1 to 2.2.0 I can't start csh (scripts) anymore.
>
> While the following commands work fine
>
>  > system("tcsh -c pwd")
>  /hom1/users/gloeckler
>  > system("bash -c pwd")
>  /hom1/users/gloeckler
>  > system("ksh -c pwd")
>  /hom1/users/gloeckler
>
> csh (in contrast to the shells used above) doesn't give any result:
>
>  > system("csh -c pwd")
>  >
>
> Outside of R csh and csh scripts do not cause any problems.
>
> I tracked down a problem with starting an HTML browser down to this
> problem with the invocation of any csh process.
>
> The csh used is the normal C-Shell shipped with Solaris 9.
>
> Thanks in advance,
> Jens Gloeckler
>
>
>
> --please do not edit the information below--
>
> Version:
> platform = sparc-sun-solaris2.9
> arch = sparc
> os = solaris2.9
> system = sparc, solaris2.9
> status =
> major = 2
> minor = 2.0
> year = 2005
> month = 10
> day = 06
> svn rev = 35749
> language = R
>
> Locale:
> C
>
> Search Path:
> .GlobalEnv, package:methods, package:stats, package:graphics, package:grDevices, package:utils, package:datasets, Autoloads, package:base
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From maechler at stat.math.ethz.ch  Wed Oct 19 14:34:10 2005
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Wed, 19 Oct 2005 14:34:10 +0200 (CEST)
Subject: [Rd] [ subscripting sometimes loses names (PR#8192)
Message-ID: <20051019123410.352381C6EC@slim.kubism.ku.dk>

Andy,

that's interesting, but honestly your posting only *talked*
about your perceptions of bogous behavior of R and gave link to 
a quite extensive S source file --- which re-defines basic
functions so it's not a file I'd just want to source into my R
session.

Proper R bug reports provide short "cut & paste" executable
example code {i.e. no prompt, no output} or at least the 
transcript of such code {transcript : input (+ prompt) + output}.

Also your script is for R and S-plus and at least in some places 
it seems you think R has a bug because it behaves differently
than S or S-plus.   
Now I'm sure you know from the R-FAQ that there are quite a few
intentional differences between the two dialects of S,
and dealing with data frames is definitely one situation where
we have tried to do better than "the prototype", so we would say
the bug is with S(-plus).

In spite of all the above, I'd well expect that you still know
about problematic or even bogous behavior of "[" subscripting,
but we'd rather see small reproducible code snippets rather than
scripts that redefine "[" and "[.data.frame" and further assume
a patched all.equal()..

Best regards,
Martin Maechler


From RKrug at sun.ac.za  Wed Oct 19 15:29:34 2005
From: RKrug at sun.ac.za (Rainer M. Krug)
Date: Wed, 19 Oct 2005 15:29:34 +0200
Subject: [Rd] Socks under R
Message-ID: <43564A3E.90402@sun.ac.za>

Hi

when I use

con1 <- socketConnection(...)

in R and want to send text from another application written in Delphi to 
R, do I just have to send the text or do I have to implement more 
control characters and so on?
Is

con1 <- socketConnection(port=6011, server=TRUE)
writeLines("plot(rnorm(100))", con1)

just sending the text in "plot(rnorm(100))" to the socket or is it doing 
more (R specific protocoll for socks comminication)?

Thanks,

Rainer


-- 
NEW TELEPHONE NUMBER
Tel:		+27 - (0)72 808 2975 (w)

Rainer M. Krug, Dipl. Phys. (Germany), MSc Conservation
Biology (UCT)

Department of Conservation Ecology
University of Stellenbosch
Matieland 7602
South Africa

Tel:		+27 - (0)72 808 2975 (w)
Fax:		+27 - (0)21 808 3304
Cell:		+27 - (0)83 9479 042

email:	RKrug at sun.ac.za
       	Rainer at krugs.de


From deepayan.sarkar at gmail.com  Wed Oct 19 19:45:50 2005
From: deepayan.sarkar at gmail.com (Deepayan Sarkar)
Date: Wed, 19 Oct 2005 12:45:50 -0500
Subject: [Rd] extending lattice to S4 classes
In-Reply-To: <4354D388.9000209@ipimar.pt>
References: <434F88B9.1020600@ipimar.pt> <434FD8C2.205@ipimar.pt>
	<Pine.LNX.4.61.0510150758480.27345@gannet.stats>
	<4354D388.9000209@ipimar.pt>
Message-ID: <eb555e660510191045s5de87a89p714e5fa8929a053b@mail.gmail.com>

On 10/18/05, ernesto <ernesto at ipimar.pt> wrote:
> Prof Brian Ripley wrote:
>
> > I think you are confusing us:  xyplot is an S3 generic with no 'data'
> > argument.  It is xyplot.formula that you want to add dispatch on its
> > 'data' argument.  I don't really see why you want to mix S3 and S4
> > systems, but you could make xyplot.formula an S3 or S4 generic and
> > dispatch on 'data', just as you did earlier with xyplot.
> >
> > Other xyplot methods need not (and probably do not) have a 'data'
> > argument.
> >
> > On Fri, 14 Oct 2005, ernesto wrote:
> >
> >> ernesto wrote:
> >>
> >>> Hi,
> >>>
> >>> I'm writing methods for a package called FLCore (see
> >>> http://flr-project.org/) in particular for a class called "FLQuant"
> >>> which extends array.
> >>>
> >>> Previously I was able to write methods based on the class of "data" but
> >>> now I can not do it due to the single parameter "x". Is there a way to
> >>> do this ?
> >>
> >
> >> I found an hack (see below) to make it work but it's terrible and hugly
> >> ... some suggestions are welcome. It simply tests if data belongs to
> >> class "FLQuant" and transforms it into a data.frame before ploting.
> >>
> >> Regards
> >>
> >> EJ
> >>
> >> if (!isGeneric("xyplot")) {
> >>    setGeneric("xyplot", useAsDefault = xyplot)
> >> }
> >>
> >>
> >> setMethod("xyplot", signature("formula"), function(x, ...){
> >>
> >>    dots <- list(...)
> >>    if(class(dots$data)=="FLQuant") dots$data <- as.data.frame(dots$data)
> >>    call.list <- c(x = x, dots)
> >>
> >> # needed this to avoid an infinite loop because xyplot is defined only
> >> for "x"
> >>    xyplot <- lattice::xyplot
> >>    ans <- do.call("xyplot", call.list)
> >>    ans$call <- match.call()
> >>    ans
> >>
> >> })
> >
> >
>
> Hi,
>
> Sorry to get back to this problem so late.
>
> I want to use lattice plots for an array. In this specific case this
> array is of class FLQuant which is defined by package FLCore.
>
> This array has 5 dimensions age, year, unit, season and area. My aim is
> to use formula to define what to plot and what to condition on. So
> procedures like used for barchart.table are not usefull for me because
> the user loses the option of defining the model to plot.
>
> With the previous version of lattice I was able to use formula and data
> to dispatch. So I defined S4 generic methods for most high level methods
> (bwplot, stripplot, dotplot, xyplot, histogram, etc) and simply
> transform FLQuant objects into dataframes that were passed to the
> lattice methods. No harm done to other data objects.
>
> With the new version only one object is available for dispatching "x" so
> if I define some xyplot.FLQuant I will miss the formula argument.
>
> My question is if there is a way of doing this or not.

Prof Ripley gave you one (redefine xyplot.formula etc). You could
always add new arguments to your methods, so you could have (the S4
equivalent of)

xyplot.FLQuant <- function(x, formula, ...)
{
    xyplot(formula, data = as(x, "data.frame"), ...)
}

and then call

xyplot(flq.obj, formula = y ~ x, [...])

The cleanest solution would be to have a data argument in the xyplot
generic (with the expectation that it could be non-missing only for
methods where x is a formula). I'll try to implement that and see if
it causes any problems.

Deepayan


From atp at piskorski.com  Wed Oct 19 21:46:31 2005
From: atp at piskorski.com (atp@piskorski.com)
Date: Wed, 19 Oct 2005 21:46:31 +0200 (CEST)
Subject: [Rd] [ subscripting sometimes loses names (PR#8192)
Message-ID: <20051019194631.C1DC315B21@slim.kubism.ku.dk>

On Wed, Oct 19, 2005 at 02:33:50PM +0200, Martin Maechler wrote:

> Proper R bug reports provide short "cut & paste" executable
> example code {i.e. no prompt, no output} or at least the 
> transcript of such code {transcript : input (+ prompt) + output}.

My patch includes the function dtk.test.brace.names() which
demonstrates the problem.  If you source just that function into a
completely stock R, you can see the losing names problem by running:

  dtk.test.brace.names(return.results.p=T ,only="all")

To make it easier to see just what the problem is, I'll send example
output in my next email.

> Also your script is for R and S-plus and at least in some places 
> it seems you think R has a bug because it behaves differently
> than S or S-plus.   

No, I don't think that.  If comments in my code give that impression
then that's a bug in my comments, it was not my intention.

My coworkers and I originally fixed the name losing problem in S-Plus,
then later did so in R, so in some places I might have sloppily said,
"R is different than S-Plus" when what I REALLY meant was, "Stock R is
different than our fixed/patched S-Plus where we've already solved
these name-losing problems."

Stock S-Plus and R both suffer from losing names when they shouldn't.
Since I use both dialects, I've included (ugly) fixes for both.  Of
course you probably only care about the R part, but I didn't think it
would hurt to include both.

> Now I'm sure you know from the R-FAQ that there are quite a few
> intentional differences between the two dialects of S,

Yes, I'm aware of that FAQ.  I also just finished porting a large body
of code from S-Plus to R a few months ago, so I have a very concrete
appreciation of the MANY little S-Plus vs. R differences, many more
than are mentioned in that FAQ.

Some of those differences are simply arbitrary or accidental, but
others are places where S-Plus was basically doing something dumb and
the R behavior is better.  I have no complaints about this.  :)

(The converse, where R's behavior is definitely inferior to that of
S-Plus, seems to be a lot less common, and are usually more minor.)

-- 
Andrew Piskorski <atp at piskorski.com>
http://www.piskorski.com/


From atp at piskorski.com  Wed Oct 19 21:50:48 2005
From: atp at piskorski.com (atp@piskorski.com)
Date: Wed, 19 Oct 2005 21:50:48 +0200 (CEST)
Subject: [Rd] [ subscripting sometimes loses names (PR#8192)
Message-ID: <20051019195048.CE65215B21@slim.kubism.ku.dk>


Here is an example of the losing names problem in stock R 2.2.0.  Note
that below, only stock R packages are loaded, and then I manually
source in just my dtk.test.brace.names() testing function, nothing
else.

Since the list-of-lists output of dtk.test.brace.names() is very
lengthy, I've manually cut-and-pasted it into a tabular format to save
space and make inspection easier.  As you can see, out of its 15 test
cases, stock R 2.2.0 fails 4 of them while the other 12 are Ok.

Too see what these simple subscripting tests actually DO, please refer
to the body of dtk.test.brace.names() from my previous emails above.


R : Copyright 2005, The R Foundation for Statistical Computing
Version 2.2.0  (2005-10-06 r35749)
> search()
[1] ".GlobalEnv"        "package:methods"   "package:graphics" 
[4] "package:grDevices" "package:datasets"  "package:utils"    
[7] "package:stats"     "Autoloads"         "package:base"     

> dtk.test.brace.names(return.results.p=T ,only="all")

Ok?  Actual Result         Desired Result
---  ------------------    ------------------
     $vec.1
BAD  $vec.1[[1]]           $vec.1[[2]]
        a    c <NA>         a  c no
        1    3   NA         1  3 NA

     $diag.1
Ok   $diag.1[[1]]          $diag.1[[2]]
     [1]  1  7 13 19 25    [1]  1  7 13 19 25

     $diag.2
Ok   $diag.2[[1]]          $diag.2[[2]]
     [1]  1  7 13 19 25    [1]  1  7 13 19 25

     $df.a.1
Ok   $df.a.1[[1]]          $df.a.1[[2]]
     a b                   a b
     4 5                   4 5

     $df.b.1
BAD  $df.b.1[[1]]          $df.b.1[[2]]
     [1] 4 5               a b
                           4 5

     $df.a.2
Ok   $df.a.2[[1]]          $df.a.2[[2]]
     c b a                 c b a
     6 5 4                 6 5 4

     $df.b.2
BAD  $df.b.2[[1]]          $df.b.2[[2]]
     [1] 6 5 4             c b a
                           6 5 4

     $df.a.3
Ok   $df.a.3[[1]]          $df.a.3[[2]]
     a b                   a b
     3 4                   3 4

     $df.b.3
BAD  $df.b.3[[1]]          $df.b.3[[2]]
     [1] 3 4               a b
                           3 4

     $df.a.4
Ok   $df.a.4[[1]]          $df.a.4[[2]]
     col1 col2             col1 col2
        2    4                2    4

     $df.b.4
Ok   $df.b.4[[1]]          $df.b.4[[2]]
       col1 col2             col1 col2
     b    2    4           b    2    4

     $df.a.5
Ok   $df.a.5[[1]]          $df.a.5[[2]]
     col1 col2             col1 col2
        2    4                2    4

     $df.b.5
Ok   $df.b.5[[1]]          $df.b.5[[2]]
     $df.b.5[[1]]$col1     $df.b.5[[2]]$col1
     [1] 2                 [1] 2
     $df.b.5[[1]]$col2     $df.b.5[[2]]$col2
     [1] 4                 [1] 4

     $df.a.6
Ok   $df.a.6[[1]]          $df.a.6[[2]]
       col1 col2             col1 col2
     b    2    4           b    2    4

     $df.b.6
Ok   $df.b.6[[1]]          $df.b.6[[2]]
       col1 col2             col1 col2
     b    2    4           b    2    4

-- 
Andrew Piskorski <atp at piskorski.com>
http://www.piskorski.com/


From simon.urbanek at r-project.org  Thu Oct 20 00:05:42 2005
From: simon.urbanek at r-project.org (Simon Urbanek)
Date: Thu, 20 Oct 2005 00:05:42 +0200
Subject: [Rd] Socks under R
In-Reply-To: <43564A3E.90402@sun.ac.za>
References: <43564A3E.90402@sun.ac.za>
Message-ID: <407EAD0C-EC82-4EBB-A535-85B1E916027B@r-project.org>

Rainer,

On Oct 19, 2005, at 3:29 PM, Rainer M. Krug wrote:

> when I use
>
> con1 <- socketConnection(...)
>
> in R and want to send text from another application written in  
> Delphi to  R, do I just have to send the text or do I have to  
> implement more control characters and so on?

Sockets are just reliable bi-directional communication channels (in  
the default mode), so their use is entirely up to you (both on R side  
and other application's side).

> Is
>
> con1 <- socketConnection(port=6011, server=TRUE)
> writeLines("plot(rnorm(100))", con1)
>
> just sending the text in "plot(rnorm(100))" to the socket or is it  
> doing more (R specific protocoll for socks comminication)?

It basically equivalent to using "send" on the socket API level [i.e.  
the above effectively does send(s, "plot(rnorm(100))\n", 17, 0)], so  
it's up to the other side to receive it properly. There is no "R  
specific protocol" - socket connections in R use regular TCP (neither  
red nor white "socks" ;)), so the literature on socket programming is  
your friend (e.g. using readLines(con1) for incoming traffic in your  
example would be a bad idea).

Cheers,
Simon


From fparlamis at gmail.com  Thu Oct 20 00:26:43 2005
From: fparlamis at gmail.com (fparlamis@gmail.com)
Date: Thu, 20 Oct 2005 00:26:43 +0200 (CEST)
Subject: [Rd] spaces in application name of external editor (PR#8221)
Message-ID: <20051019222643.F380020BFF@slim.kubism.ku.dk>

Full_Name: Franklin Parlamis
Version: 2.1.1 (R.app 1.1.2)
OS: Mac OS X 10.4.2
Submission from: (NULL) (24.161.129.74)


Cocoa GUI 1.12 appears to have a problem opening an external editor when the
application name contains a space.  I use Aquamacs Emacs, which upon
installation names itself "Aquamacs Emacs.app"

Choosing that app as an external editor on the Preference Pane causes the
following error when I try to open a file from the Toolbar in the R Console:

    2005-10-18 00:59:49.985 open[9985] No such file: /Users/Franklin/R/Working
Directory/Emacs.app

However, if I rename the application "Aquamacs_Emacs.app" no error is returned
and the file opens.


From m1jjh00 at frb.gov  Thu Oct 20 00:43:46 2005
From: m1jjh00 at frb.gov (Jeffrey J. Hallman)
Date: Wed, 19 Oct 2005 18:43:46 -0400
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: Message from Philippe Grosjean <phgrosjean@sciviews.org> 
	of "Sat, 15 Oct 2005 14:50:17 +0200." <4350FB09.3020503@sciviews.org> 
Message-ID: <20051019224346.66B1D53585@mail.rsma.frb.gov>

If you're looking for a GUI toolkit that:

   1.  Is cross-platform,
   2.  Has a good collection of widgets that look good on all platforms, and
   3.  Is easy to work with from R

then it is hopeless.  There is no such toolkit.

As one poster mentioned, most of the better GUI toolkits are very
object-oriented, because that paradigm is a good fit for GUI programming. 
There are a few programming environments out there that do have nice GUI
abilities, but they all use base languages that are not very R-like, and so
the potential R GUI programmer is faced with having to use two very different
languages for his creation.  And even if that obstacle is surmounted, there
remains the difficulty of trying to package up his work in such a way as to
make it easily installed by others.  Things are always breaking in the
interfaces between R and whatever you're using.  Trying to keep it all running
and packaging it for deployment are thankless, gargantuan tasks.

There is a better way, and that is to give up on R.  Start over with
a better programming environment, one that is object oriented, as flexible and
dynamic as R, is cross platform, easy to program in, and has decent GUI
facilities already.  Then port the stuff in R that does statistical
programming, and you have the best of all worlds. 

The environment I am thinking about is VisualWorks Smalltalk, which is free
for noncommercial use.  As a language, Smalltalk is both simpler and more 
powerful than R, and the VM it runs on is much faster than the R interpreter.
It has superior garbage collection and the best IDE in the business.
Callouts to C are just as easy as they are in R, but would likely not be
needed as often due to the faster VM and much better programming facilities.
Interfaces to various databases are possible, and the most powerful web
toolkit (Seaside) is written in Smalltalk and runs under VisualWorks.

There are a couple of other Smalltalk environments around that could also be
considered.  Squeak is an open source cross-platform Smalltalk that is not as
fast as VisualWorks, but still must faster and more robust than the R
interpreter.  Smalltalk/X is another possibility, though it works only on
Windows and Unix. 

Think about it.  Once you have a basic math package that can handle matrix
programming and various mathematical functions, building the various
statistical modeling tools on top of them is not that hard.  What makes S and
R so much better than SAS is their programmability.  Smalltalk is like that,
only better.


Jeff Hallman


From deleeuw at stat.ucla.edu  Thu Oct 20 01:08:59 2005
From: deleeuw at stat.ucla.edu (Jan De Leeuw)
Date: Wed, 19 Oct 2005 16:08:59 -0700
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <20051019224346.66B1D53585@mail.rsma.frb.gov>
References: <20051019224346.66B1D53585@mail.rsma.frb.gov>
Message-ID: <37E16860-F4A0-436A-8C6F-9990C15274CE@stat.ucla.edu>

Ah. Let the language wars begin. Although I agree that going with R
is basically a sad mistake

http://www.jstatsoft.org/index.php?vol=13

giving up on R/S is no longer an option, I hope. Too much investment
from the community. Reculer pour mieux sauter, indeed.

On Oct 19, 2005, at 3:43 PM, Jeffrey J. Hallman wrote:

> If you're looking for a GUI toolkit that:
>
>    1.  Is cross-platform,
>    2.  Has a good collection of widgets that look good on all  
> platforms, and
>    3.  Is easy to work with from R
>
> then it is hopeless.  There is no such toolkit.
>
> As one poster mentioned, most of the better GUI toolkits are very
> object-oriented, because that paradigm is a good fit for GUI  
> programming.
> There are a few programming environments out there that do have  
> nice GUI
> abilities, but they all use base languages that are not very R- 
> like, and so
> the potential R GUI programmer is faced with having to use two very  
> different
> languages for his creation.  And even if that obstacle is  
> surmounted, there
> remains the difficulty of trying to package up his work in such a  
> way as to
> make it easily installed by others.  Things are always breaking in the
> interfaces between R and whatever you're using.  Trying to keep it  
> all running
> and packaging it for deployment are thankless, gargantuan tasks.
>
> There is a better way, and that is to give up on R.  Start over with
> a better programming environment, one that is object oriented, as  
> flexible and
> dynamic as R, is cross platform, easy to program in, and has decent  
> GUI
> facilities already.  Then port the stuff in R that does statistical
> programming, and you have the best of all worlds.
>
> The environment I am thinking about is VisualWorks Smalltalk, which  
> is free
> for noncommercial use.  As a language, Smalltalk is both simpler  
> and more
> powerful than R, and the VM it runs on is much faster than the R  
> interpreter.
> It has superior garbage collection and the best IDE in the business.
> Callouts to C are just as easy as they are in R, but would likely  
> not be
> needed as often due to the faster VM and much better programming  
> facilities.
> Interfaces to various databases are possible, and the most powerful  
> web
> toolkit (Seaside) is written in Smalltalk and runs under VisualWorks.
>
> There are a couple of other Smalltalk environments around that  
> could also be
> considered.  Squeak is an open source cross-platform Smalltalk that  
> is not as
> fast as VisualWorks, but still must faster and more robust than the R
> interpreter.  Smalltalk/X is another possibility, though it works  
> only on
> Windows and Unix.
>
> Think about it.  Once you have a basic math package that can handle  
> matrix
> programming and various mathematical functions, building the various
> statistical modeling tools on top of them is not that hard.  What  
> makes S and
> R so much better than SAS is their programmability.  Smalltalk is  
> like that,
> only better.
>
>
> Jeff Hallman
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From m1jjh00 at frb.gov  Thu Oct 20 01:25:50 2005
From: m1jjh00 at frb.gov (Jeffrey J. Hallman)
Date: Wed, 19 Oct 2005 19:25:50 -0400
Subject: [Rd] [R-gui]  R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: Message from Kasper Daniel Hansen <khansen@stat.Berkeley.EDU> 
	of "Wed, 19 Oct 2005 15:53:38 PDT."
	<250C8EE4-98EA-48D2-8372-F952A3E9E827@stat.berkeley.edu> 
Message-ID: <20051019232550.9E3B953585@mail.rsma.frb.gov>

>>>>> "K" == Kasper Daniel Hansen <khansen at stat.Berkeley.EDU> writes:
  K> On Oct 19, 2005, at 3:43 PM, Jeffrey J. Hallman wrote:

  K> <SNIP>

  >> Think about it.  Once you have a basic math package that can handle  
  >> matrix
  >> programming and various mathematical functions, building the various
  >> statistical modeling tools on top of them is not that hard.  What  
  >> makes S and
  >> R so much better than SAS is their programmability.  Smalltalk is  
  >> like that,
  >> only better.
  >> 
  >> 
  >> Jeff Hallman

  K> I would claim that this quote kind of shows that you have no idea  
  K> what you are talking about regarding good, debugged and trustworthy  
  K> statistical procedures. Why do you think people are actually using R?

Kasper, a few minutes spent Googling my name should disabuse you of the notion
that I have no idea of what I'm talking about.  But to answer your question: 
I think people are using R because it's readily available, with a lot of good
stuff already built in.  

I am not suggesting that you tell undergraduate statistics students to write
everything in Smalltalk, since the class libraries to support statistical
programming in Smalltalk do not exist yet.  What I am saying is that if you
compare the languages themselves, along with their programming environments,
Smalltalk is superior to R.  What it lacks are class libraries implementing
statistical procedures.  I do maintain that those really are not that hard,
once you have the matrix and math libraries.  My experience with S and R goes
way back to the days of blue book S version 3.  S called out to C code to
handle matrix and mathmetical stuff, but used S code itself to glue it all
together in a somewhat object-oriented way. 

  K> I could say "well, given an environment that could interface to C,  
  K> building a GUI on top of that is not really that hard", but that  
  K> would be incredible naive as well.

Indeed it would be.  But statistical programming is easier than that.


Jeff


From ggrothendieck at gmail.com  Thu Oct 20 01:29:42 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 19 Oct 2005 19:29:42 -0400
Subject: [Rd] is.na<- problem
Message-ID: <971536df0510191629q29acd508n5b2d488e8e3d8290@mail.gmail.com>

In the following the first element of xx should have
been set to 0 but remains NA.  Any comments?

> xx <- c(NA,1)
> is.na(xx) <- 0
> xx
[1] NA  1
> R.version.string # Windows XP
[1] "R version 2.2.0, 2005-09-20"


From pkleiweg at xs4all.nl  Thu Oct 20 01:59:32 2005
From: pkleiweg at xs4all.nl (Peter Kleiweg)
Date: Thu, 20 Oct 2005 01:59:32 +0200 (CEST)
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
 and multi-threadedness)
In-Reply-To: <37E16860-F4A0-436A-8C6F-9990C15274CE@stat.ucla.edu>
References: <20051019224346.66B1D53585@mail.rsma.frb.gov>
	<37E16860-F4A0-436A-8C6F-9990C15274CE@stat.ucla.edu>
Message-ID: <Pine.LNX.4.63.0510200126430.1082@kleigh.nl>


> On Oct 19, 2005, at 3:43 PM, Jeffrey J. Hallman wrote:


> > There is a better way, and that is to give up on R.  Start 
> > over with a better programming environment, one that is 
> > object oriented, as flexible and dynamic as R, is cross 
> > platform, easy to program in, and has decent GUI facilities 
> > already.  Then port the stuff in R that does statistical 
> > programming, and you have the best of all worlds.
> >
> > The environment I am thinking about is VisualWorks 
> > Smalltalk, which is free for noncommercial use.  As a 
> > language, Smalltalk is both simpler and more powerful than 
> > R, and the VM it runs on is much faster than the R 
> > interpreter. It has superior garbage collection and the best 
> > IDE in the business. Callouts to C are just as easy as they 
> > are in R, but would likely not be needed as often due to the 
> > faster VM and much better programming facilities. Interfaces 
> > to various databases are possible, and the most powerful web 
> > toolkit (Seaside) is written in Smalltalk and runs under 
> > VisualWorks.

My advice about VisualWorks Smalltalk: don't. It may work well 
on Windows. On Linux, it is a disaster. Nothing works the way it 
is supposed to on Linux. I have tried one application in 
VisualWorks: BottomFeeder. Dozens of versions and bug fixed. But 
there are no fixed for the incompatibility between the virtual 
machine and my Linux box. It can't display jpeg's. Windows keep 
jumping around the screen. It doesn't know about size of fonts, 
so on many parts of the interface, parts of text are missing. 
Standard key combinations, copy and paste, all work completely 
different from other Linux applications. You can't install the 
program in the Unix way. It saves its internal state in a binary 
form that gets being corrupted, and you have to make a clean 
install regularly, loosing all your old data.

Mind you, this is software developed by someone from 
VisualWorks, presenting this as the prize horse of what 
VisualWorks is capable of.


> > There are a couple of other Smalltalk environments around 
> > that could also be considered.  Squeak is an open source 
> > cross-platform Smalltalk that is not as fast as VisualWorks, 
> > but still must faster and more robust than the R 
> > interpreter.  Smalltalk/X is another possibility, though it 
> > works only on Windows and Unix.

Squeak works much better on Linux than VisualWorks, but it still 
shares many disadvantages with VisualWorks. The main obstacle is 
its use of a virtual machine for everything. It is like working 
in a completely different environment, were none of the rules of 
your usual environment apply. You cannot use your favourite 
software to do your programming and organising. I write programs 
in Python, C, PostScript, R, and half a dozen other regularly, 
all from Emacs. If I want to program VisualWorks or Squeak, I 
have to do so from within VisualWorks or Squeak, with its own 
editor. I can use none of the tools I rely on for all my other 
tasks. And of course, something written in VisualWorks is 
completely useless in Squeak, and vice versa.

> > Think about it.  Once you have a basic math package that can 
> > handle matrix programming and various mathematical 
> > functions, building the various statistical modeling tools 
> > on top of them is not that hard.  What makes S and R so much 
> > better than SAS is their programmability.  Smalltalk is like 
> > that, only better.

No. A program should respect the user's chose of platform. I 
write a program in Python with Tk. On Linux it looks and feels 
like a Linux program. On Windows, it looks and feels like a 
Windows program.

Why would you want a GUI for something like R in the first 
place? It is a programming language. That is its force. Nothing 
beats the command line. A GUI can never offer the same power, 
unless it offers the same openness as the OS it is running on. 
It has to incorporate an editor to do the programming. Except 
without the GUI, I can use any editor I like. I don't need a 
GUI. Linux running X and my favourite windows manager is all the 
GUI I need.


-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


From Ted.Harding at nessie.mcc.ac.uk  Thu Oct 20 02:13:42 2005
From: Ted.Harding at nessie.mcc.ac.uk ( (Ted Harding))
Date: Thu, 20 Oct 2005 01:13:42 +0100 (BST)
Subject: [Rd] is.na<- problem
In-Reply-To: <971536df0510191629q29acd508n5b2d488e8e3d8290@mail.gmail.com>
Message-ID: <XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>

On 19-Oct-05 Gabor Grothendieck wrote:
> In the following the first element of xx should have
> been set to 0 but remains NA.  Any comments?
> 
>> xx <- c(NA,1)
>> is.na(xx) <- 0
>> xx
> [1] NA  1
>> R.version.string # Windows XP
> [1] "R version 2.2.0, 2005-09-20"

I wonder, has it ever worked? I get the same as you on

R.version.string #Linux
[1] "R version 1.6.2, 2003-01-10"

R.version.string #Linux
[1] "R version 1.8.0, 2003-10-08"

R.version.string #Linux
[1] "R version 2.1.0, 2005-04-08"

with the exception of

R.version.string #Linux
[1] "R version 1.2.3, 2001-04-26"

which does know about is.na()<- at all.


Hmmm
Ted.






--------------------------------------------------------------------
E-Mail: (Ted Harding) <Ted.Harding at nessie.mcc.ac.uk>
Fax-to-email: +44 (0)870 094 0861
Date: 20-Oct-05                                       Time: 01:11:45
------------------------------ XFMail ------------------------------


From rich.fitzjohn at gmail.com  Thu Oct 20 02:43:02 2005
From: rich.fitzjohn at gmail.com (Rich FitzJohn)
Date: Thu, 20 Oct 2005 13:43:02 +1300
Subject: [Rd] is.na<- problem
In-Reply-To: <XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>
References: <971536df0510191629q29acd508n5b2d488e8e3d8290@mail.gmail.com>
	<XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>
Message-ID: <5934ae570510191743l54f7028fn6f38c3b66bedcab3@mail.gmail.com>

Hi,

It does seem to be working as advertised, but not particulary
intuitively.  From ?is.na

  The generic function 'is.na<-' sets elements to 'NA'

In fact:
xx <- c(NA, 1)
is.na(xx) <- 2
xx
[1] NA NA

or is.na(xx) <- 5
[1] NA  1 NA NA NA

Looks like this was introduced in 1.4.0; from NEWS:
    o	New generic function is.na<-(), from S4.  This is by default
	equivalent to x[value] <- NA but may differ, e.g. for factors
	where "NA" is a level.

Cheers,
Rich

On 10/20/05, Ted Harding <Ted.Harding at nessie.mcc.ac.uk> wrote:
> On 19-Oct-05 Gabor Grothendieck wrote:
> > In the following the first element of xx should have
> > been set to 0 but remains NA.  Any comments?
> >
> >> xx <- c(NA,1)
> >> is.na(xx) <- 0
> >> xx
> > [1] NA  1
> >> R.version.string # Windows XP
> > [1] "R version 2.2.0, 2005-09-20"
>
> I wonder, has it ever worked? I get the same as you on
>
> R.version.string #Linux
> [1] "R version 1.6.2, 2003-01-10"
>
> R.version.string #Linux
> [1] "R version 1.8.0, 2003-10-08"
>
> R.version.string #Linux
> [1] "R version 2.1.0, 2005-04-08"
>
> with the exception of
>
> R.version.string #Linux
> [1] "R version 1.2.3, 2001-04-26"
>
> which does know about is.na()<- at all.
>
>
> Hmmm
> Ted.
>
>
>
>
>
>
> --------------------------------------------------------------------
> E-Mail: (Ted Harding) <Ted.Harding at nessie.mcc.ac.uk>
> Fax-to-email: +44 (0)870 094 0861
> Date: 20-Oct-05                                       Time: 01:11:45
> ------------------------------ XFMail ------------------------------
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


--
Rich FitzJohn
rich.fitzjohn <at> gmail.com   |    http://homepages.paradise.net.nz/richa183
                      You are in a maze of twisty little functions, all alike


From MSchwartz at mn.rr.com  Thu Oct 20 02:46:04 2005
From: MSchwartz at mn.rr.com (Marc Schwartz)
Date: Wed, 19 Oct 2005 19:46:04 -0500
Subject: [Rd] is.na<- problem
In-Reply-To: <XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>
References: <XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>
Message-ID: <1129769164.5955.5.camel@localhost.localdomain>

On Thu, 2005-10-20 at 01:13 +0100, Ted Harding wrote:
> On 19-Oct-05 Gabor Grothendieck wrote:
> > In the following the first element of xx should have
> > been set to 0 but remains NA.  Any comments?
> > 
> >> xx <- c(NA,1)
> >> is.na(xx) <- 0
> >> xx
> > [1] NA  1
> >> R.version.string # Windows XP
> > [1] "R version 2.2.0, 2005-09-20"
> 
> I wonder, has it ever worked? I get the same as you on
> 
> R.version.string #Linux
> [1] "R version 1.6.2, 2003-01-10"
> 
> R.version.string #Linux
> [1] "R version 1.8.0, 2003-10-08"
> 
> R.version.string #Linux
> [1] "R version 2.1.0, 2005-04-08"
> 
> with the exception of
> 
> R.version.string #Linux
> [1] "R version 1.2.3, 2001-04-26"
> 
> which does know about is.na()<- at all.
> 
> 
> Hmmm
> Ted.

According to the documentation in ?is.na:

   The generic function is.na<- sets elements to NA.

and in the details section:

Function is.na<- may provide a safer way to set missingness. It behaves
differently for factors, for example.


In reviewing the Green Book on the top of page 143, it shows an example
in which the RHS of the assignment are the indices into the LHS object
which are to be set to NA. For example:

> xx <- c(0:5)

> xx
[1] 0 1 2 3 4 5

> is.na(xx) <- c(3, 4)

> xx
[1]  0  1 NA NA  4  5


Thus, back to Gabor's example, the proper approach would of course be:

> xx <- c(NA,1)

> xx
[1] NA  1

> xx[is.na(xx)] <- 0

> xx
[1] 0 1


HTH,

Marc Schwartz


From ggrothendieck at gmail.com  Thu Oct 20 03:09:52 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 19 Oct 2005 21:09:52 -0400
Subject: [Rd] is.na<- problem
In-Reply-To: <1129769164.5955.5.camel@localhost.localdomain>
References: <XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>
	<1129769164.5955.5.camel@localhost.localdomain>
Message-ID: <971536df0510191809v3a7cd3d0k753e95a71be027d3@mail.gmail.com>

On 10/19/05, Marc Schwartz <MSchwartz at mn.rr.com> wrote:
> On Thu, 2005-10-20 at 01:13 +0100, Ted Harding wrote:
> > On 19-Oct-05 Gabor Grothendieck wrote:
> > > In the following the first element of xx should have
> > > been set to 0 but remains NA.  Any comments?
> > >
> > >> xx <- c(NA,1)
> > >> is.na(xx) <- 0
> > >> xx
> > > [1] NA  1
> > >> R.version.string # Windows XP
> > > [1] "R version 2.2.0, 2005-09-20"
> >
> > I wonder, has it ever worked? I get the same as you on
> >
> > R.version.string #Linux
> > [1] "R version 1.6.2, 2003-01-10"
> >
> > R.version.string #Linux
> > [1] "R version 1.8.0, 2003-10-08"
> >
> > R.version.string #Linux
> > [1] "R version 2.1.0, 2005-04-08"
> >
> > with the exception of
> >
> > R.version.string #Linux
> > [1] "R version 1.2.3, 2001-04-26"
> >
> > which does know about is.na()<- at all.
> >
> >
> > Hmmm
> > Ted.
>
> According to the documentation in ?is.na:
>
>   The generic function is.na<- sets elements to NA.
>
> and in the details section:
>
> Function is.na<- may provide a safer way to set missingness. It behaves
> differently for factors, for example.
>
>
> In reviewing the Green Book on the top of page 143, it shows an example
> in which the RHS of the assignment are the indices into the LHS object
> which are to be set to NA. For example:
>
> > xx <- c(0:5)
>
> > xx
> [1] 0 1 2 3 4 5
>
> > is.na(xx) <- c(3, 4)
>
> > xx
> [1]  0  1 NA NA  4  5
>
>
> Thus, back to Gabor's example, the proper approach would of course be:
>
> > xx <- c(NA,1)
>
> > xx
> [1] NA  1
>
> > xx[is.na(xx)] <- 0
>
> > xx
> [1] 0 1
>
>
> HTH,
>
> Marc Schwartz
>
>
>


Thanks.  I actually had read ?is.na but obviously not closely enough.


From MSchwartz at mn.rr.com  Thu Oct 20 03:28:05 2005
From: MSchwartz at mn.rr.com (Marc Schwartz)
Date: Wed, 19 Oct 2005 20:28:05 -0500
Subject: [Rd] is.na<- problem
In-Reply-To: <971536df0510191809v3a7cd3d0k753e95a71be027d3@mail.gmail.com>
References: <XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>
	<1129769164.5955.5.camel@localhost.localdomain>
	<971536df0510191809v3a7cd3d0k753e95a71be027d3@mail.gmail.com>
Message-ID: <1129771685.5955.12.camel@localhost.localdomain>

On Wed, 2005-10-19 at 21:09 -0400, Gabor Grothendieck wrote:
> On 10/19/05, Marc Schwartz <MSchwartz at mn.rr.com> wrote:
> > On Thu, 2005-10-20 at 01:13 +0100, Ted Harding wrote:
> > > On 19-Oct-05 Gabor Grothendieck wrote:
> > > > In the following the first element of xx should have
> > > > been set to 0 but remains NA.  Any comments?
> > > >
> > > >> xx <- c(NA,1)
> > > >> is.na(xx) <- 0
> > > >> xx
> > > > [1] NA  1
> > > >> R.version.string # Windows XP
> > > > [1] "R version 2.2.0, 2005-09-20"
> > >
> > > I wonder, has it ever worked? I get the same as you on
> > >
> > > R.version.string #Linux
> > > [1] "R version 1.6.2, 2003-01-10"
> > >
> > > R.version.string #Linux
> > > [1] "R version 1.8.0, 2003-10-08"
> > >
> > > R.version.string #Linux
> > > [1] "R version 2.1.0, 2005-04-08"
> > >
> > > with the exception of
> > >
> > > R.version.string #Linux
> > > [1] "R version 1.2.3, 2001-04-26"
> > >
> > > which does know about is.na()<- at all.
> > >
> > >
> > > Hmmm
> > > Ted.
> >
> > According to the documentation in ?is.na:
> >
> >   The generic function is.na<- sets elements to NA.
> >
> > and in the details section:
> >
> > Function is.na<- may provide a safer way to set missingness. It behaves
> > differently for factors, for example.
> >
> >
> > In reviewing the Green Book on the top of page 143, it shows an example
> > in which the RHS of the assignment are the indices into the LHS object
> > which are to be set to NA. For example:
> >
> > > xx <- c(0:5)
> >
> > > xx
> > [1] 0 1 2 3 4 5
> >
> > > is.na(xx) <- c(3, 4)
> >
> > > xx
> > [1]  0  1 NA NA  4  5
> >
> >
> > Thus, back to Gabor's example, the proper approach would of course be:
> >
> > > xx <- c(NA,1)
> >
> > > xx
> > [1] NA  1
> >
> > > xx[is.na(xx)] <- 0
> >
> > > xx
> > [1] 0 1
> >
> >
> > HTH,
> >
> > Marc Schwartz
> >
> >
> >
> 
> 
> Thanks.  I actually had read ?is.na but obviously not closely enough.

Happy to help.

In all honesty, while I understood the concept from reading the help
page, it was not truly clear until I read the Green Book and saw the
example as to how to actually use the function.

It would probably be worthwhile to add an example of use to the help
page.

Best regards,

Marc


From ellis at stat.harvard.edu  Thu Oct 20 04:47:06 2005
From: ellis at stat.harvard.edu (Byron Ellis)
Date: Wed, 19 Oct 2005 19:47:06 -0700
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <20051019224346.66B1D53585@mail.rsma.frb.gov>
References: <20051019224346.66B1D53585@mail.rsma.frb.gov>
Message-ID: <B565AFC7-CEEB-4606-BF84-B1D8F2D7A217@stat.harvard.edu>

And I so wanted to stay out of this particular discussion, I hope  
you're proud of what you've done. *cracks knuckles* Right, lets get  
to it then.


On Oct 19, 2005, at 3:43 PM, Jeffrey J. Hallman wrote:

> If you're looking for a GUI toolkit that:
>
>    1.  Is cross-platform,
>    2.  Has a good collection of widgets that look good on all  
> platforms, and
>    3.  Is easy to work with from R
>
> then it is hopeless.  There is no such toolkit.

There is in fact such a toolkit. I'll give you a hint, its name ends  
in "step" and its heavily used under a different name by a company  
named after a fruit. It works quite well from R, doesn't require  
another language and frankly the binding between it and R was  
actually pretty pleasant as these things go. By my count it took 2727  
lines of C and 411 lines of R to bind, a good half of which are  
technically unnecessary. Right now it probably doesn't run under  
Windows and Linux/BSD/Solaris/Your Favorite POSIX Compliant UNIX at  
the present time, but thats mostly because I don't care rather than  
because it can't.

>
> As one poster mentioned, most of the better GUI toolkits are very
> object-oriented, because that paradigm is a good fit for GUI  
> programming.
> There are a few programming environments out there that do have  
> nice GUI
> abilities, but they all use base languages that are not very R- 
> like, and so
> the potential R GUI programmer is faced with having to use two very  
> different
> languages for his creation.  And even if that obstacle is  
> surmounted, there

This is only a problem because people seem to insist on using R's  
object system in a way that is not actually very compatible with R's.  
To misquote Robert at DSC, "their primary complaint about R is that  
its not Java." If you think about it for a moment, R's environment is  
actually quite well suited to GUI tasks because, well, because it has  
environments. Imagine drawing into a window (you're a plotting tool  
or something). Really, you're a function executing in an environment  
(oh ho!) that has access to certain system resources, in this case a  
canvas of a certain physical and logical dimension. Responding to  
events could take on a similar structure---you're really executing in  
an Event environment that has certain bound symbols. Obviously you  
get to keep your lexical environment so event handlers that need to  
share state can in the usual way. Its not particularly difficult and  
doesn't even need to involve objects in any real way, except as  
little stubby things with attributes you can modify or poll.

> remains the difficulty of trying to package up his work in such a  
> way as to
> make it easily installed by others.  Things are always breaking in the
> interfaces between R and whatever you're using.  Trying to keep it  
> all running
> and packaging it for deployment are thankless, gargantuan tasks.

How is this different than releasing any piece of software?

>
> There is a better way, and that is to give up on R.  Start over with
> a better programming environment, one that is object oriented, as  
> flexible and
> dynamic as R, is cross platform, easy to program in, and has decent  
> GUI
> facilities already.  Then port the stuff in R that does statistical
> programming, and you have the best of all worlds.
>
> The environment I am thinking about is VisualWorks Smalltalk, which  
> is free
> for noncommercial use.  As a language, Smalltalk is both simpler  
> and more

Did you just use the words "cross platform" and "VisualWorks  
Smallktalk" in the same email? Have you ever used VisualWorks on  
something other than Win32? I'd rather use Squeak. At least then I  
know it'll have an equally childish interface on every platform.

> powerful than R, and the VM it runs on is much faster than the R  
> interpreter.

Contrary to popular belief the speed of R's interpreter is rarely the  
limiting factor to R's speed. People treating R like C is typically  
the limiting factor. You have vector operations, USE THEM.

> It has superior garbage collection and the best IDE in the business.
> Callouts to C are just as easy as they are in R, but would likely  
> not be
> needed as often due to the faster VM and much better programming  
> facilities.

But not portable across Smalltalks. Whoops. Oh, and there's still a  
helluva lot of Fortran code out there that nobody wants to port.

> Interfaces to various databases are possible, and the most powerful  
> web
> toolkit (Seaside) is written in Smalltalk and runs under VisualWorks.

Because I spend all my time writing web shopping carts in R?

>
> There are a couple of other Smalltalk environments around that  
> could also be
> considered.  Squeak is an open source cross-platform Smalltalk that  
> is not as
> fast as VisualWorks, but still must faster and more robust than the R
> interpreter.  Smalltalk/X is another possibility, though it works  
> only on
> Windows and Unix.
>
> Think about it.  Once you have a basic math package that can handle  
> matrix
> programming and various mathematical functions, building the various
> statistical modeling tools on top of them is not that hard.  What  
> makes S and
> R so much better than SAS is their programmability.  Smalltalk is  
> like that,
> only better.
>

As it happens, I've thought about it. At length. To the point of  
having images that actual test out the idea of implementing these  
libraries whilst my simulations run in the background (we can discuss  
the effects on my degree progress at a later date). Smalltalk has  
some very clever features. I'm a particular fan of the notion that  
"breakpoint" and "exception" aren't different things for example.  
Unfortunately its also turns out that these "basic math packages"  
are, in fact, quite difficult to do well especially when multiple  
platforms are involved. For example, it took GSL 5 years to get to a  
'1.0' release and its still using CBLAS, an even older piece of code,  
to do most of its vector and matrix operations.

Assuming you manage to pull that off (see you in 2010!) I'm still not  
convinced it would work as most Smalltalks (Squeak especially) take  
on a self-contained nature, meaning that they Don't Play Well With  
Others. The only time *I* really use a GUI is when I'm preparing a  
presentation or a paper in which case I need to be table to talk to  
all manner of different pieces of software, something which is  
generally ignored Smalltalk. At least with the current R GUIs I can,  
you know, cut and paste. Sure, you can get Smalltalks to do this sort  
of thing too, VisualWorks can do a fair amount though how well varies  
widely with platform (hey! Just like R). Even better, the  
programmatic interfaces vary from platform to platform and Smalltalk  
to Smalltalk. I could continue, but I'm getting hungry---suffice it  
to say that Smalltalk isn't some sort of panacea despite being a very  
nice language, too much James Robertson for you.

So, you've got a lot of work (implementing a robust scientific  
library) ahead of you for dubious gains (a rich GUI, maybe a better  
programming language and a whole raft of new problems). It seems like  
the better idea would be to pull a Java and shameless hijack the  
interesting bits from Smalltalk rather than go the other direction.

Oh, and since you suggested googling yourself,

I gotta go with Alan Z on this one, a<-1 is ambiguous is the worst  
possible way, := would probably be a better choice. Looks less like  
the APL symbol, but who cares?

>
> Jeff Hallman
>
> _______________________________________________
> R-SIG-GUI mailing list
> R-SIG-GUI at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-gui
>

---
Byron Ellis (ellis at stat.harvard.edu)
"Oook" -- The Librarian


From khansen at stat.Berkeley.EDU  Thu Oct 20 05:56:22 2005
From: khansen at stat.Berkeley.EDU (Kasper Daniel Hansen)
Date: Wed, 19 Oct 2005 20:56:22 -0700
Subject: [Rd] cross-compiling tools
In-Reply-To: <1abe3fa90510181045l79b06d3ai257723a215f0f39c@mail.gmail.com>
References: <22ACEB9C-CE67-4FA6-BAE2-EA8F8A7E234B@stat.Berkeley.EDU>
	<1abe3fa90510181045l79b06d3ai257723a215f0f39c@mail.gmail.com>
Message-ID: <C6F88B91-6ACB-472C-9F30-A982BD0CDBF3@stat.Berkeley.EDU>

I have been told (off-list) that cross-compiling c++ no longer works.  
Because of this, the c++ stuff is left out from the new tar ball.

And I have also been corrected: most of the work on the cross- 
compiling tools were in fact done by Brian Ripley.

Kasper

On Oct 18, 2005, at 10:45 AM, A.J. Rossini wrote:

> Technically,  "Jun Yan, based on work and documentation most likely by
> Brian Ripley, with Tony prodding Jun".  Though I'm sure even that
> would be corrected.
>
> Sorry, no clue, as I'm not using R nor Linux at work these days.  I'm
> sure someone else knows.
>
> On 10/18/05, Kasper Daniel Hansen <khansen at stat.berkeley.edu> wrote:
>
>> Hi
>>
>> We have been cross-compiling windows packages under Linux using the
>> excellent Makefile and instructions by Tony Rossini and Jun Yan.
>> Specifically we have been cross-compiling c++ code and it used to  
>> work.
>>
>> Now the minGW tools located at www.stats.ox.ac.uk/pub/Rtools have
>> changed from version 4 to version 5, and our cross-compiling have
>> stopped working.
>>
>> Inspecting the tarball we are unable to find the header files for c+
>> +, so it seems that c++ support has been left out. Has this been
>> changed intentionally, because it used to work and in addition c++ is
>> included in the list of "standard" minGW packages listed on
>> www.murdoch-sutherland.com/Rtools
>>
>> If the change is intentionally, should be just get the c++ code from
>> minGW and merge it into the tarball?
>>
>> Kasper and Jim
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>>
>>
>
>
> --
> best,
> -tony
>
> blindglobe at gmail.com
> Muttenz, Switzerland.
> "Commit early,commit often, and commit in a repository from which  
> we can easily
> roll-back your mistakes" (AJR, 4Jan05).
>
>


From wettenhall at wehi.EDU.AU  Thu Oct 20 07:08:26 2005
From: wettenhall at wehi.EDU.AU (James Wettenhall)
Date: Thu, 20 Oct 2005 15:08:26 +1000 (EST)
Subject: [Rd] [R-gui]   R GUI considerations (was: R, Wine,
 and multi-threadedness)
In-Reply-To: <Pine.LNX.4.63.0510200126430.1082@kleigh.nl>
References: <20051019224346.66B1D53585@mail.rsma.frb.gov>
	<37E16860-F4A0-436A-8C6F-9990C15274CE@stat.ucla.edu>
	<Pine.LNX.4.63.0510200126430.1082@kleigh.nl>
Message-ID: <36467.192.168.97.37.1129784906.squirrel@homebase.wehi.edu.au>

Hi Peter and everyone,

[Hmmm, didn't I say I was not really interested in spending time getting
into these discussions anymore?  Oh well, I can't help myself. ;-) ]

> Why would you want a GUI for something like R in the first
> place? It is a programming language. That is its force. Nothing
> beats the command line.

I think there are many people who would strongly disagree with your
suggestion that there is no point in developing GUIs for R.  But there is
also some ambiguity about what is meant by a GUI - an Interactive
Development Environment (IDE) for developers or a GUI for users who are
highly intelligent, but have no interest whatsoever in ever learning how
to use a command-line interface, whilst still wanting to access some of
the functionality in R/Bioconductor.

Some statisticians / numerical computing specialists work in isolation and
like to advertise that some of their work is very "applied" e.g. they are
working on a project which will save the world or cure cancer or whatever
[sorry for the exaggeration] but this is a natural way for them to market
the importance of their field of research and feel good about themselves.

On the otherhand, there are people like the bioinformatics group I work in
who are a very successful research group, partly because we don't work in
isolation.  Instead we collaborate very closely with scientists from other
fields (i.e. biomedical scientists), but there is an extreme danger here
of being used as a service group (like I.T. support) by the biomedical
scientists who don't appreciate how much work is involved in computer
programming, statistics etc.  So one solution is to use a language like R,
with the philosophy "users become developers", i.e. rather than having to
learn an intimidating hierarchy of 100's of classes in some object
oriented language [OK, I'm exaggerating here], the user can begin using R
quite gently (but still do some powerful statistical calculations) and
then gradually become more advanced.  Now some of the (extremely
intelligent) biologists we collaborate with are very fearful of getting
started in a command-line interface, so they keep asking us to do mundane
things for them which are not going to lead to any research publications
for us - i.e. we feel like we are just being used as I.T. support.  So by
providing a GUI to them, getting started in R is less intimidating for
them, so then we can hopefully spend less time doing mundane numerical
computing tasks for our collaborators and have more time to do our own
serious research.  And we can even publish our work on developing GUIs
which we have - just a short article in Bioinformatics OUP so far - and
John Fox has published a full-length article on Rcmdr in the Journal of
Statistical Software - great stuff!

Does that make sense?
James


From blindglobe at gmail.com  Thu Oct 20 07:52:56 2005
From: blindglobe at gmail.com (A.J. Rossini)
Date: Thu, 20 Oct 2005 07:52:56 +0200
Subject: [Rd] cross-compiling tools
In-Reply-To: <C6F88B91-6ACB-472C-9F30-A982BD0CDBF3@stat.Berkeley.EDU>
References: <22ACEB9C-CE67-4FA6-BAE2-EA8F8A7E234B@stat.Berkeley.EDU>
	<1abe3fa90510181045l79b06d3ai257723a215f0f39c@mail.gmail.com>
	<C6F88B91-6ACB-472C-9F30-A982BD0CDBF3@stat.Berkeley.EDU>
Message-ID: <1abe3fa90510192252l46b56ad0te2d09c936e44447f@mail.gmail.com>

Though thanks to the obtuseness of the documentation, the makefile Jun
wrote has helped a great deal of folks.

While some have been appreciative, certain other folks have only
bothered to make snide, hostile remarks and not bothered to be polite
enough to suggest changes that might have prevented questions arising,
as they prefer to demonstrate to the world that no one else can
improve on their "satisfactory" work.

On 10/20/05, Kasper Daniel Hansen <khansen at stat.berkeley.edu> wrote:
> I have been told (off-list) that cross-compiling c++ no longer works.
> Because of this, the c++ stuff is left out from the new tar ball.
>
> And I have also been corrected: most of the work on the cross-
> compiling tools were in fact done by Brian Ripley.
>
> Kasper
>
> On Oct 18, 2005, at 10:45 AM, A.J. Rossini wrote:
>
> > Technically,  "Jun Yan, based on work and documentation most likely by
> > Brian Ripley, with Tony prodding Jun".  Though I'm sure even that
> > would be corrected.
> >
> > Sorry, no clue, as I'm not using R nor Linux at work these days.  I'm
> > sure someone else knows.
> >
> > On 10/18/05, Kasper Daniel Hansen <khansen at stat.berkeley.edu> wrote:
> >
> >> Hi
> >>
> >> We have been cross-compiling windows packages under Linux using the
> >> excellent Makefile and instructions by Tony Rossini and Jun Yan.
> >> Specifically we have been cross-compiling c++ code and it used to
> >> work.
> >>
> >> Now the minGW tools located at www.stats.ox.ac.uk/pub/Rtools have
> >> changed from version 4 to version 5, and our cross-compiling have
> >> stopped working.
> >>
> >> Inspecting the tarball we are unable to find the header files for c+
> >> +, so it seems that c++ support has been left out. Has this been
> >> changed intentionally, because it used to work and in addition c++ is
> >> included in the list of "standard" minGW packages listed on
> >> www.murdoch-sutherland.com/Rtools
> >>
> >> If the change is intentionally, should be just get the c++ code from
> >> minGW and merge it into the tarball?
> >>
> >> Kasper and Jim
> >>
> >> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >>
> >>
> >
> >
> > --
> > best,
> > -tony
> >
> > blindglobe at gmail.com
> > Muttenz, Switzerland.
> > "Commit early,commit often, and commit in a repository from which
> > we can easily
> > roll-back your mistakes" (AJR, 4Jan05).
> >
> >
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


--
best,
-tony

blindglobe at gmail.com
Muttenz, Switzerland.
"Commit early,commit often, and commit in a repository from which we can easily
roll-back your mistakes" (AJR, 4Jan05).


From dgrove at fhcrc.org  Thu Oct 20 08:08:22 2005
From: dgrove at fhcrc.org (dgrove@fhcrc.org)
Date: Thu, 20 Oct 2005 08:08:22 +0200 (CEST)
Subject: [Rd] numerical issues in chisq.test(simulate=TRUE) (PR#8224)
Message-ID: <20051020060822.CA694DD04@slim.kubism.ku.dk>

Hi,

This report deals with p-values coming from chisq.test using
the simulate.p=TRUE option.  The issue is numerical accuracy
and was brought up in previous bug reports 3486 and 3896.
The bug was considered fixed but apparently was only mostly
fixed.  Just the typical problem of two values that are
mathematically equal not ending up numerically equivalent.

Consider this series of three 2x2 tables:

[1,]    1    7
[2,]    0   15

[1,]    1    7
[2,]    0   16

[1,]    1    7
[2,]    0   17


The pvals returned from chisq.test(m, sim=TRUE)$p.value are
 0.3543228, 0.0004997501 and 0.3273363 respectively.

The 2nd seems a bit unlikely, huh?

I checked into it and the value I'm getting for the statistic
(calculated in R code) is 4*.Machine$double.eps less than the
value (which should be equal) that is returned from the C-code
that does the simulation.


Code for creating/testing the three matrices shown above:
m <- matrix(c(1,0,7,15),2,2) ; chisq.test(m, sim=TRUE)$p.value
m <- matrix(c(1,0,7,16),2,2) ; chisq.test(m, sim=TRUE)$p.value
m <- matrix(c(1,0,7,17),2,2) ; chisq.test(m, sim=TRUE)$p.value


Running SuSE9.3 on a AMD Athlon4000+


> version
platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status   Patched
major    2
minor    1.1
year     2005
month    07
day      29
language R


Thanks,
Doug


Douglas Grove
Statistical Research Associate
Fred Hutchinson Cancer Research Center
Seattle WA 98109


From Tom.Mulholland at dpi.wa.gov.au  Thu Oct 20 08:47:01 2005
From: Tom.Mulholland at dpi.wa.gov.au (Tom.Mulholland@dpi.wa.gov.au)
Date: Thu, 20 Oct 2005 08:47:01 +0200 (CEST)
Subject: [Rd] Windows 2000 crash while using rbind (PR#8225)
Message-ID: <20051020064701.3B75620BFE@slim.kubism.ku.dk>

Windows 2000 reports that "Rgui.exe has generated errors and will be =
closed by Windows. You will need to restart the program." when using =
rbind.=20


 df1 <- data.frame(cbind(x=3D1, y=3D1:1000), fac=3Dsample(LETTERS[1:3], =
1000, repl=3DTRUE))
 df2 <- data.frame(cbind(x=3D1, y=3D1:10), fac=3Dsample(LETTERS[4:6], =
10, repl=3DTRUE))
 df3 <- data.frame(cbind(x=3D1, y=3D1:1000000), =
fac=3Dsample(LETTERS[1:3], 1000000, repl=3DTRUE))
 df4 <- rbind(df1,df2)
 df5 <- rbind(df2,df3)
=20
=20
Since this only happens intermittantly and appears to be related to the =
size of the objects I ran the following code.

sink("rbind test.txt")
df1 <- data.frame(cbind(x=3D1, y=3D1:10), fac=3Dsample(LETTERS[4:6], 10, =
repl=3DTRUE))
for (j in seq(100000,1000000,10000)){
 df2 <- data.frame(cbind(x=3D1, y=3D1:j), fac=3Dsample(LETTERS[1:3], j, =
repl=3DTRUE))
 print(j)
 df3 <- rbind(df2,df1)
 }
sink()

the output of rbind test.txt is
[1] 100000
[1] 110000
[1] 120000
...
[1] 510000
[1] 520000

I then ran=20


sink("rbind test 2.txt")
df1 <- data.frame(cbind(a =3D 1, b =3D 2, c =3D 3, d =3D 4, e =3D 5, f =
=3D 6, x=3D1, y=3D1:10), fac=3Dsample(LETTERS[4:6], 10, repl=3DTRUE))
for (j in seq(100000,1000000,10000)){
 df2 <- data.frame(cbind(a =3D 1, b =3D 2, c =3D 3, d =3D 4, e =3D 5, f =
=3D 6, x=3D1, y=3D1:j), fac=3Dsample(LETTERS[1:3], j, repl=3DTRUE))
 print(j)
 df3 <- rbind(df2,df1)
 }
sink()

which also stopped at 520000.

I tried to narrow down where the crash takes place but it would appear =
that it is a moving feast, however both pieces of code always stopped =
with the same number, somewhere around 520000.

> version
         _             =20
platform i386-pc-mingw32
arch     i386          =20
os       mingw32       =20
system   i386, mingw32 =20
status                 =20
major    2             =20
minor    2.0           =20
year     2005          =20
month    10            =20
day      06            =20
svn rev  35749         =20
language R=20

One of the examples that has failed for me looks like
pop <- rbind(om.tp[,c(6,2,4,5,3)],eas[,c(2,1,3,4,5)])


> str(om.tp[,c(6,2,4,5,3)])
`data.frame':   1001384 obs. of  5 variables:
 $ age5 : Factor w/ 18 levels "0 to 4","5 to 9",..: 1 1 1 1 1 2 2 2 2 2 =
...
 $ sex  : Factor w/ 2 levels "Females","Males": 1 1 1 1 1 1 1 1 1 1 ...
 $ lga  : Factor w/ 142 levels "Albany (C)","Armadale (C)",..: 21 21 21 =
21 21 21 21 21 21 21 ...
 $ count: num  7.33 7.45 7.05 6.31 5.71 ...
 $ year : Factor w/ 41 levels "2001","2002",..: 1 1 1 1 1 1 1 1 1 1 ...
> str(eas[,c(2,1,3,4,5)])
`data.frame':   25342 obs. of  5 variables:
 $ age5 : Factor w/ 18 levels "0 to 4","5 to 9",..: 1 1 1 1 1 1 1 1 1 1 =
...
 $ sex  : Factor w/ 2 levels "Females","Males": 2 2 2 2 2 2 2 2 2 2 ...
 $ lga  : Factor w/ 142 levels "Albany (C)","Armadale (C)",..: 1 2 3 4 5 =
6 7 8 9 10 ...
 $ count: num  1107 2163  532  294  479 ...
 $ year : Factor w/ 5 levels "1991","1996",..: 1 1 1 1 1 1 1 1 1 1 ...
> gc()
           used  (Mb) gc trigger  (Mb) max used  (Mb)
Ncells  3255820  87.0    6193578 165.4  5266303 140.7
Vcells 22096825 168.6   32770865 250.1 32114295 245.1

Tom Mulholland
Senior Demographer
Spatial Information and Research
State and Regional Policy
Department for Planning and Infrastructure
Perth, Western Australia
+61 (08) 9264 7936


From ripley at stats.ox.ac.uk  Thu Oct 20 09:08:21 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 20 Oct 2005 09:08:21 +0200 (CEST)
Subject: [Rd] Windows 2000 crash while using rbind (PR#8225)
Message-ID: <20051020070821.2DBDCAC05@slim.kubism.ku.dk>

This is a stack-size issue.  Windows provides only a small stack by 
default (2Mb in R 2.2.0).  Your example will work in R-patched (which has 
a 10Mb stack) and R-devel (which has 10Mb and some stack-checking).

The non-technical summary is that you ran out of resources.  Fortunately 
we have been working on that issue and have builds with more resources.

Why this calculation is taking so much stack needs further investigation.


On Thu, 20 Oct 2005 Tom.Mulholland at dpi.wa.gov.au wrote:

> Windows 2000 reports that "Rgui.exe has generated errors and will be =
> closed by Windows. You will need to restart the program." when using =
> rbind.=20
>
>
> df1 <- data.frame(cbind(x=3D1, y=3D1:1000), fac=3Dsample(LETTERS[1:3], =
> 1000, repl=3DTRUE))
> df2 <- data.frame(cbind(x=3D1, y=3D1:10), fac=3Dsample(LETTERS[4:6], =
> 10, repl=3DTRUE))
> df3 <- data.frame(cbind(x=3D1, y=3D1:1000000), =
> fac=3Dsample(LETTERS[1:3], 1000000, repl=3DTRUE))
> df4 <- rbind(df1,df2)
> df5 <- rbind(df2,df3)
> =20
> =20
> Since this only happens intermittantly and appears to be related to the =
> size of the objects I ran the following code.
>
> sink("rbind test.txt")
> df1 <- data.frame(cbind(x=3D1, y=3D1:10), fac=3Dsample(LETTERS[4:6], 10, =
> repl=3DTRUE))
> for (j in seq(100000,1000000,10000)){
> df2 <- data.frame(cbind(x=3D1, y=3D1:j), fac=3Dsample(LETTERS[1:3], j, =
> repl=3DTRUE))
> print(j)
> df3 <- rbind(df2,df1)
> }
> sink()
>
> the output of rbind test.txt is
> [1] 100000
> [1] 110000
> [1] 120000
> ...
> [1] 510000
> [1] 520000
>
> I then ran=20
>
>
> sink("rbind test 2.txt")
> df1 <- data.frame(cbind(a =3D 1, b =3D 2, c =3D 3, d =3D 4, e =3D 5, f =
> =3D 6, x=3D1, y=3D1:10), fac=3Dsample(LETTERS[4:6], 10, repl=3DTRUE))
> for (j in seq(100000,1000000,10000)){
> df2 <- data.frame(cbind(a =3D 1, b =3D 2, c =3D 3, d =3D 4, e =3D 5, f =
> =3D 6, x=3D1, y=3D1:j), fac=3Dsample(LETTERS[1:3], j, repl=3DTRUE))
> print(j)
> df3 <- rbind(df2,df1)
> }
> sink()
>
> which also stopped at 520000.
>
> I tried to narrow down where the crash takes place but it would appear =
> that it is a moving feast, however both pieces of code always stopped =
> with the same number, somewhere around 520000.
>
>> version
>         _             =20
> platform i386-pc-mingw32
> arch     i386          =20
> os       mingw32       =20
> system   i386, mingw32 =20
> status                 =20
> major    2             =20
> minor    2.0           =20
> year     2005          =20
> month    10            =20
> day      06            =20
> svn rev  35749         =20
> language R=20
>
> One of the examples that has failed for me looks like
> pop <- rbind(om.tp[,c(6,2,4,5,3)],eas[,c(2,1,3,4,5)])
>
>
>> str(om.tp[,c(6,2,4,5,3)])
> `data.frame':   1001384 obs. of  5 variables:
> $ age5 : Factor w/ 18 levels "0 to 4","5 to 9",..: 1 1 1 1 1 2 2 2 2 2 =
> ...
> $ sex  : Factor w/ 2 levels "Females","Males": 1 1 1 1 1 1 1 1 1 1 ...
> $ lga  : Factor w/ 142 levels "Albany (C)","Armadale (C)",..: 21 21 21 =
> 21 21 21 21 21 21 21 ...
> $ count: num  7.33 7.45 7.05 6.31 5.71 ...
> $ year : Factor w/ 41 levels "2001","2002",..: 1 1 1 1 1 1 1 1 1 1 ...
>> str(eas[,c(2,1,3,4,5)])
> `data.frame':   25342 obs. of  5 variables:
> $ age5 : Factor w/ 18 levels "0 to 4","5 to 9",..: 1 1 1 1 1 1 1 1 1 1 =
> ...
> $ sex  : Factor w/ 2 levels "Females","Males": 2 2 2 2 2 2 2 2 2 2 ...
> $ lga  : Factor w/ 142 levels "Albany (C)","Armadale (C)",..: 1 2 3 4 5 =
> 6 7 8 9 10 ...
> $ count: num  1107 2163  532  294  479 ...
> $ year : Factor w/ 5 levels "1991","1996",..: 1 1 1 1 1 1 1 1 1 1 ...
>> gc()
>           used  (Mb) gc trigger  (Mb) max used  (Mb)
> Ncells  3255820  87.0    6193578 165.4  5266303 140.7
> Vcells 22096825 168.6   32770865 250.1 32114295 245.1
>
> Tom Mulholland
> Senior Demographer
> Spatial Information and Research
> State and Regional Policy
> Department for Planning and Infrastructure
> Perth, Western Australia
> +61 (08) 9264 7936
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From RKrug at sun.ac.za  Thu Oct 20 09:30:28 2005
From: RKrug at sun.ac.za (Rainer M. Krug)
Date: Thu, 20 Oct 2005 09:30:28 +0200
Subject: [Rd] Socks under R
In-Reply-To: <407EAD0C-EC82-4EBB-A535-85B1E916027B@r-project.org>
References: <43564A3E.90402@sun.ac.za>
	<407EAD0C-EC82-4EBB-A535-85B1E916027B@r-project.org>
Message-ID: <43574794.6050102@sun.ac.za>

That's brilliant!

Thanks a lot for your help,

Rainer

Simon Urbanek wrote:
> Rainer,
> 
> On Oct 19, 2005, at 3:29 PM, Rainer M. Krug wrote:
> 
>> when I use
>>
>> con1 <- socketConnection(...)
>>
>> in R and want to send text from another application written in  Delphi 
>> to  R, do I just have to send the text or do I have to  implement more 
>> control characters and so on?
> 
> Sockets are just reliable bi-directional communication channels (in  the 
> default mode), so their use is entirely up to you (both on R side  and 
> other application's side).
> 
>> Is
>>
>> con1 <- socketConnection(port=6011, server=TRUE)
>> writeLines("plot(rnorm(100))", con1)
>>
>> just sending the text in "plot(rnorm(100))" to the socket or is it  
>> doing more (R specific protocoll for socks comminication)?
> 
> It basically equivalent to using "send" on the socket API level [i.e.  
> the above effectively does send(s, "plot(rnorm(100))\n", 17, 0)], so  
> it's up to the other side to receive it properly. There is no "R  
> specific protocol" - socket connections in R use regular TCP (neither  
> red nor white "socks" ;)), so the literature on socket programming is  
> your friend (e.g. using readLines(con1) for incoming traffic in your  
> example would be a bad idea).
> 
> Cheers,
> Simon
> 



-- 
NEW TELEPHONE NUMBER
Tel:		+27 - (0)72 808 2975 (w)

Rainer M. Krug, Dipl. Phys. (Germany), MSc Conservation
Biology (UCT)

Department of Conservation Ecology
University of Stellenbosch
Matieland 7602
South Africa

Tel:		+27 - (0)72 808 2975 (w)
Fax:		+27 - (0)21 808 3304
Cell:		+27 - (0)83 9479 042

email:	RKrug at sun.ac.za
       	Rainer at krugs.de


From phgrosjean at sciviews.org  Thu Oct 20 09:57:12 2005
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Thu, 20 Oct 2005 09:57:12 +0200
Subject: [Rd] [R-gui] R GUI considerations
In-Reply-To: <B565AFC7-CEEB-4606-BF84-B1D8F2D7A217@stat.harvard.edu>
References: <20051019224346.66B1D53585@mail.rsma.frb.gov>
	<B565AFC7-CEEB-4606-BF84-B1D8F2D7A217@stat.harvard.edu>
Message-ID: <43574DD8.2070103@sciviews.org>

Byron Ellis wrote:
> [...]

> Contrary to popular belief the speed of R's interpreter is rarely the  
> limiting factor to R's speed. People treating R like C is typically  
> the limiting factor. You have vector operations, USE THEM.

Hey! I vote for a 'fortune' here!

> [...]

Otherwise, the discussion is taking a bad turn again (did someone 
suggested to trow away R, and rewrite it completelly?). So, here a 
couple of "rules" we should consider:

1) We love R, and we are really convinced that it is a nice statistical 
environment and a good statistical programming tool.

2) We want to build a GUI *around an existing software developped as a 
CLI*. As such, we know it is not straigthforward. We have to find 
workarounds for bad R behaviours (that happen because it was *not* 
conceived with a GUI in mind). We should just suggest a limited amount 
of changes, when really needed, remembering a GUI is not a priority in R 
development.

3) The S language is a strong force in R. Don't try to hide it under 
more sexy dialog boxes or other kinds of GUIs: expose R code (for 
instance, show R code constructed after selections done in that dialog 
box)... and give an opportunity to edit and reexecute that code to 
stimulate first experiments with the S language.

4) What is the language that is working an all platforms R runs, is 
perfectly compatible with R, and is always available once R is 
installed? Well, R itself (i.e., the S language), of course! So, to make 
sure your GUI code is most usable by the R community, write as much GUI 
code as you can in S language... and if you think you can write 
everything in you XXX language, think again, and you will realize that a 
large part of that code can actually be written directly in R as well.

5) There are new and better graphical widgets and languages appearing 
regularly in the computer world. The best ones for making a GUI today 
may be obsolete rapidly in the future. On the contrary, we all hope a 
longer life for R. Thus, write your GUI code in R as much as possible in 
a way it is independent from a particular GUI toolkit and interfacing 
language. I say, as much as possible, because this is a very diffcult 
task, given the specificities of each toolkit and language.

6) Write your code with reusability in mind; Reusability in your own 
GUI, but also, for sharing code between GUI projects. Remember writing a 
GUI for R is a very long and complex task, and you can hardly do it 
alone. Working all together, sharing code and ideas, would greatly 
improve our output.

I think if you disagree with these "rules", you'r wasting your time. You 
are then better to log off from R-SIG-GUI, even uninstall R if you are 
so angry,... and enjoy life instead of wasting time fighting against the 
$%*?&#! behaviour of R in your GUI.

Best,

Philippe Grosjean


From sgiannerini at gmail.com  Thu Oct 20 10:10:01 2005
From: sgiannerini at gmail.com (Simone Giannerini)
Date: Thu, 20 Oct 2005 10:10:01 +0200
Subject: [Rd] numerical issues in chisq.test(simulate=TRUE) (PR#8224)
In-Reply-To: <20051020060822.CA694DD04@slim.kubism.ku.dk>
References: <20051020060822.CA694DD04@slim.kubism.ku.dk>
Message-ID: <3c12769c0510200110oc99f32cn890340c7611544a3@mail.gmail.com>

Hi,

I obtain the same result under Win. XP SP2 on AMD 64 3700+

platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status
major    2
minor    2.0
year     2005
month    10
day      06
svn rev  35749
language R

> m <- matrix(c(1,0,7,15),2,2) ; chisq.test(m, sim=TRUE)$p.value
[1] 0.3598201

> m <- matrix(c(1,0,7,16),2,2) ; chisq.test(m, sim=TRUE)$p.value
[1] 0.0004997501

> m <- matrix(c(1,0,7,17),2,2) ; chisq.test(m, sim=TRUE)$p.value
[1] 0.3403298

Ciao
Simone

On 10/20/05, dgrove at fhcrc.org <dgrove at fhcrc.org> wrote:
> Hi,
>
> This report deals with p-values coming from chisq.test using
> the simulate.p=TRUE option.  The issue is numerical accuracy
> and was brought up in previous bug reports 3486 and 3896.
> The bug was considered fixed but apparently was only mostly
> fixed.  Just the typical problem of two values that are
> mathematically equal not ending up numerically equivalent.
>
> Consider this series of three 2x2 tables:
>
> [1,]    1    7
> [2,]    0   15
>
> [1,]    1    7
> [2,]    0   16
>
> [1,]    1    7
> [2,]    0   17
>
>
> The pvals returned from chisq.test(m, sim=TRUE)$p.value are
>  0.3543228, 0.0004997501 and 0.3273363 respectively.
>
> The 2nd seems a bit unlikely, huh?
>
> I checked into it and the value I'm getting for the statistic
> (calculated in R code) is 4*.Machine$double.eps less than the
> value (which should be equal) that is returned from the C-code
> that does the simulation.
>
>
> Code for creating/testing the three matrices shown above:
> m <- matrix(c(1,0,7,15),2,2) ; chisq.test(m, sim=TRUE)$p.value
> m <- matrix(c(1,0,7,16),2,2) ; chisq.test(m, sim=TRUE)$p.value
> m <- matrix(c(1,0,7,17),2,2) ; chisq.test(m, sim=TRUE)$p.value
>
>
> Running SuSE9.3 on a AMD Athlon4000+
>
>
> > version
> platform i686-pc-linux-gnu
> arch     i686
> os       linux-gnu
> system   i686, linux-gnu
> status   Patched
> major    2
> minor    1.1
> year     2005
> month    07
> day      29
> language R
>
>
> Thanks,
> Doug
>
>
> Douglas Grove
> Statistical Research Associate
> Fred Hutchinson Cancer Research Center
> Seattle WA 98109
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


--
______________________________________________________

Simone Giannerini
Dipartimento di Scienze Statistiche "Paolo Fortunati"
Universita' di Bologna
Via delle belle arti 41 - 40126  Bologna,  ITALY
Tel: +39 051 2098248  Fax: +39 051 232153
E-mail: giannerini at stat.unibo.it


From Emmanuel.Paradis at mpl.ird.fr  Thu Oct 20 10:40:49 2005
From: Emmanuel.Paradis at mpl.ird.fr (Emmanuel.Paradis@mpl.ird.fr)
Date: Thu, 20 Oct 2005 10:40:49 +0200 (CEST)
Subject: [Rd] read.fwf doesn't work with header = TRUE (PR#8226)
Message-ID: <20051020084049.2E29D8684@slim.kubism.ku.dk>

Full_Name: Emmanuel Paradis
Version: 2.1.1
OS: Linux
Submission from: (NULL) (193.49.41.105)


read.fwf(..., header = TRUE) does not work properly since:

1/ the original header is printed on the console and not in FILE;
2/ the different 'parts' of the header should be separated with tabs
   to work with the call to read.table.

Here is a suggested fix for src/library/utils/R/read.fwf.R:

38c38,40
<         cat(FILE, headerline, "\n")
---
>         headerline <- unlist(strsplit(headerline, " {1,}"))
>         headerline <- paste(headerline, collapse = "\t")
>         cat(file = FILE, headerline, "\n")

PS: my R is not updated by read.fwf.R does not seem to have been changed in R
2.2.0.


From ernesto at ipimar.pt  Thu Oct 20 11:00:16 2005
From: ernesto at ipimar.pt (ernesto)
Date: Thu, 20 Oct 2005 10:00:16 +0100
Subject: [Rd] extending lattice to S4 classes
In-Reply-To: <eb555e660510191045s5de87a89p714e5fa8929a053b@mail.gmail.com>
References: <434F88B9.1020600@ipimar.pt> <434FD8C2.205@ipimar.pt>	
	<Pine.LNX.4.61.0510150758480.27345@gannet.stats>	
	<4354D388.9000209@ipimar.pt>
	<eb555e660510191045s5de87a89p714e5fa8929a053b@mail.gmail.com>
Message-ID: <43575CA0.9060807@ipimar.pt>

Deepayan Sarkar wrote:

>On 10/18/05, ernesto <ernesto at ipimar.pt> wrote:
>  
>
>>Prof Brian Ripley wrote:
>>
>>    
>>
>>>I think you are confusing us:  xyplot is an S3 generic with no 'data'
>>>argument.  It is xyplot.formula that you want to add dispatch on its
>>>'data' argument.  I don't really see why you want to mix S3 and S4
>>>systems, but you could make xyplot.formula an S3 or S4 generic and
>>>dispatch on 'data', just as you did earlier with xyplot.
>>>
>>>Other xyplot methods need not (and probably do not) have a 'data'
>>>argument.
>>>
>>>On Fri, 14 Oct 2005, ernesto wrote:
>>>
>>>      
>>>
>>>>ernesto wrote:
>>>>
>>>>        
>>>>
>>>>>Hi,
>>>>>
>>>>>I'm writing methods for a package called FLCore (see
>>>>>http://flr-project.org/) in particular for a class called "FLQuant"
>>>>>which extends array.
>>>>>
>>>>>Previously I was able to write methods based on the class of "data" but
>>>>>now I can not do it due to the single parameter "x". Is there a way to
>>>>>do this ?
>>>>>          
>>>>>
>>>>I found an hack (see below) to make it work but it's terrible and hugly
>>>>... some suggestions are welcome. It simply tests if data belongs to
>>>>class "FLQuant" and transforms it into a data.frame before ploting.
>>>>
>>>>Regards
>>>>
>>>>EJ
>>>>
>>>>if (!isGeneric("xyplot")) {
>>>>   setGeneric("xyplot", useAsDefault = xyplot)
>>>>}
>>>>
>>>>
>>>>setMethod("xyplot", signature("formula"), function(x, ...){
>>>>
>>>>   dots <- list(...)
>>>>   if(class(dots$data)=="FLQuant") dots$data <- as.data.frame(dots$data)
>>>>   call.list <- c(x = x, dots)
>>>>
>>>># needed this to avoid an infinite loop because xyplot is defined only
>>>>for "x"
>>>>   xyplot <- lattice::xyplot
>>>>   ans <- do.call("xyplot", call.list)
>>>>   ans$call <- match.call()
>>>>   ans
>>>>
>>>>})
>>>>        
>>>>
>>>      
>>>
>>Hi,
>>
>>Sorry to get back to this problem so late.
>>
>>I want to use lattice plots for an array. In this specific case this
>>array is of class FLQuant which is defined by package FLCore.
>>
>>This array has 5 dimensions age, year, unit, season and area. My aim is
>>to use formula to define what to plot and what to condition on. So
>>procedures like used for barchart.table are not usefull for me because
>>the user loses the option of defining the model to plot.
>>
>>With the previous version of lattice I was able to use formula and data
>>to dispatch. So I defined S4 generic methods for most high level methods
>>(bwplot, stripplot, dotplot, xyplot, histogram, etc) and simply
>>transform FLQuant objects into dataframes that were passed to the
>>lattice methods. No harm done to other data objects.
>>
>>With the new version only one object is available for dispatching "x" so
>>if I define some xyplot.FLQuant I will miss the formula argument.
>>
>>My question is if there is a way of doing this or not.
>>    
>>
>
>Prof Ripley gave you one (redefine xyplot.formula etc). You could
>always add new arguments to your methods, so you could have (the S4
>equivalent of)
>
>xyplot.FLQuant <- function(x, formula, ...)
>{
>    xyplot(formula, data = as(x, "data.frame"), ...)
>}
>
>and then call
>
>xyplot(flq.obj, formula = y ~ x, [...])
>
>The cleanest solution would be to have a data argument in the xyplot
>generic (with the expectation that it could be non-missing only for
>methods where x is a formula). I'll try to implement that and see if
>it causes any problems.
>
>Deepayan
>  
>
Hi Deepayan,

I see that there are alternatives, I found one my self that works and
it's transparent for the user.

I don't want to implement solutions that force the user to use lattice
methods differently from your implementation.

The cleanest solution as you say is to add a data argument to xyplot but
I can't do it so I would not propose it.

Regards

EJ


From maechler at stat.math.ethz.ch  Thu Oct 20 11:00:02 2005
From: maechler at stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Thu, 20 Oct 2005 11:00:02 +0200 (CEST)
Subject: [Rd] numerical issues in chisq.test(simulate=TRUE) (PR#8224)
Message-ID: <20051020090002.1841DDD04@slim.kubism.ku.dk>

Thank you, Douglas (and Simone) for the bug report.

>>>>> "Simone" == Simone Giannerini <sgiannerini at gmail.com>
>>>>>     on Thu, 20 Oct 2005 10:10:01 +0200 writes:

    Simone> Hi,
    Simone> I obtain the same result under Win. XP SP2 on AMD 64 3700+

    Simone> platform i386-pc-mingw32
    Simone> arch     i386
    Simone> os       mingw32
    Simone> system   i386, mingw32
    Simone> status
    Simone> major    2
    Simone> minor    2.0
    Simone> year     2005
    Simone> month    10
    Simone> day      06
    Simone> svn rev  35749
    Simone> language R

    >> m <- matrix(c(1,0,7,15),2,2) ; chisq.test(m, sim=TRUE)$p.value
    Simone> [1] 0.3598201

    >> m <- matrix(c(1,0,7,16),2,2) ; chisq.test(m, sim=TRUE)$p.value
    Simone> [1] 0.0004997501

    >> m <- matrix(c(1,0,7,17),2,2) ; chisq.test(m, sim=TRUE)$p.value
    Simone> [1] 0.3403298

So, it's only the middle matrix giving problems for you.

It doesn't for me on a AMD 64-bit platform, even for 1000 simulations:

> m <- cbind(1:0, c(7,16))
> summary(p <- replicate(1000, chisq.test(m, sim=TRUE)$p.value))
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
 0.3043  0.3268  0.3338  0.3337  0.3405  0.3663 

but it does show the problem on 32-bit one.

A fix is easy and will be in R-patched (and R-devel of
course) soon.

Martin Maechler, ETH Zurich


    Simone> Ciao
    Simone> Simone

    Simone> On 10/20/05, dgrove at fhcrc.org <dgrove at fhcrc.org> wrote:
    >> Hi,
    >> 
    >> This report deals with p-values coming from chisq.test using
    >> the simulate.p=TRUE option.  The issue is numerical accuracy
    >> and was brought up in previous bug reports 3486 and 3896.
    >> The bug was considered fixed but apparently was only mostly
    >> fixed.  Just the typical problem of two values that are
    >> mathematically equal not ending up numerically equivalent.
    >> 
    >> Consider this series of three 2x2 tables:
    >> 
    >> [1,]    1    7
    >> [2,]    0   15
    >> 
    >> [1,]    1    7
    >> [2,]    0   16
    >> 
    >> [1,]    1    7
    >> [2,]    0   17
    >> 
    >> 
    >> The pvals returned from chisq.test(m, sim=TRUE)$p.value are
    >> 0.3543228, 0.0004997501 and 0.3273363 respectively.
    >> 
    >> The 2nd seems a bit unlikely, huh?
    >> 
    >> I checked into it and the value I'm getting for the statistic
    >> (calculated in R code) is 4*.Machine$double.eps less than the
    >> value (which should be equal) that is returned from the C-code
    >> that does the simulation.
    >> 
    >> 
    >> Code for creating/testing the three matrices shown above:
    >> m <- matrix(c(1,0,7,15),2,2) ; chisq.test(m, sim=TRUE)$p.value
    >> m <- matrix(c(1,0,7,16),2,2) ; chisq.test(m, sim=TRUE)$p.value
    >> m <- matrix(c(1,0,7,17),2,2) ; chisq.test(m, sim=TRUE)$p.value
    >> 
    >> 
    >> Running SuSE9.3 on a AMD Athlon4000+
    >> 
    >> 
    >> > version
    >> platform i686-pc-linux-gnu
    >> arch     i686
    >> os       linux-gnu
    >> system   i686, linux-gnu
    >> status   Patched
    >> major    2
    >> minor    1.1
    >> year     2005
    >> month    07
    >> day      29
    >> language R
    >> 
    >> 
    >> Thanks,
    >> Doug
    >> 
    >> 
    >> Douglas Grove
    >> Statistical Research Associate
    >> Fred Hutchinson Cancer Research Center
    >> Seattle WA 98109


From maechler at stat.math.ethz.ch  Thu Oct 20 11:34:18 2005
From: maechler at stat.math.ethz.ch (Martin Maechler)
Date: Thu, 20 Oct 2005 11:34:18 +0200
Subject: [Rd] is.na<- problem
In-Reply-To: <1129771685.5955.12.camel@localhost.localdomain>
References: <XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>
	<1129769164.5955.5.camel@localhost.localdomain>
	<971536df0510191809v3a7cd3d0k753e95a71be027d3@mail.gmail.com>
	<1129771685.5955.12.camel@localhost.localdomain>
Message-ID: <17239.25754.59979.321531@stat.math.ethz.ch>

>>>>> "Marc" == Marc Schwartz <MSchwartz at mn.rr.com>
>>>>>     on Wed, 19 Oct 2005 20:28:05 -0500 writes:
   .............

    >> > In reviewing the Green Book on the top of page 143, it shows an example
    >> > in which the RHS of the assignment are the indices into the LHS object
    >> > which are to be set to NA. For example:
    >> >
    >> > > xx <- c(0:5)
    >> >
    >> > > xx
    >> > [1] 0 1 2 3 4 5
    >> >
    >> > > is.na(xx) <- c(3, 4)
    >> >
    >> > > xx
    >> > [1]  0  1 NA NA  4  5
    >> >
    >> >

   ...........

    Marc> In all honesty, while I understood the concept from reading the help
    Marc> page, it was not truly clear until I read the Green Book and saw the
    Marc> example as to how to actually use the function.

    Marc> It would probably be worthwhile to add an example of use to the help
    Marc> page.

good idea. I've added a version of yours:

(xx <- c(0:4))
is.na(xx) <- c(2, 4)
xx                     #> 0 NA  2 NA  4

Martin


From MSchwartz at mn.rr.com  Thu Oct 20 14:58:24 2005
From: MSchwartz at mn.rr.com (Marc Schwartz)
Date: Thu, 20 Oct 2005 07:58:24 -0500
Subject: [Rd] is.na<- problem
In-Reply-To: <17239.25754.59979.321531@stat.math.ethz.ch>
References: <XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>
	<1129769164.5955.5.camel@localhost.localdomain>
	<971536df0510191809v3a7cd3d0k753e95a71be027d3@mail.gmail.com>
	<1129771685.5955.12.camel@localhost.localdomain>
	<17239.25754.59979.321531@stat.math.ethz.ch>
Message-ID: <1129813104.8394.1.camel@localhost.localdomain>

On Thu, 2005-10-20 at 11:34 +0200, Martin Maechler wrote:
> >>>>> "Marc" == Marc Schwartz <MSchwartz at mn.rr.com>
> >>>>>     on Wed, 19 Oct 2005 20:28:05 -0500 writes:
>    .............
> 
>     >> > In reviewing the Green Book on the top of page 143, it shows an example
>     >> > in which the RHS of the assignment are the indices into the LHS object
>     >> > which are to be set to NA. For example:
>     >> >
>     >> > > xx <- c(0:5)
>     >> >
>     >> > > xx
>     >> > [1] 0 1 2 3 4 5
>     >> >
>     >> > > is.na(xx) <- c(3, 4)
>     >> >
>     >> > > xx
>     >> > [1]  0  1 NA NA  4  5
>     >> >
>     >> >
> 
>    ...........
> 
>     Marc> In all honesty, while I understood the concept from reading the help
>     Marc> page, it was not truly clear until I read the Green Book and saw the
>     Marc> example as to how to actually use the function.
> 
>     Marc> It would probably be worthwhile to add an example of use to the help
>     Marc> page.
> 
> good idea. I've added a version of yours:
> 
> (xx <- c(0:4))
> is.na(xx) <- c(2, 4)
> xx                     #> 0 NA  2 NA  4
> 
> Martin

Great!

Thanks Martin!

Marc


From pkleiweg at xs4all.nl  Thu Oct 20 15:56:55 2005
From: pkleiweg at xs4all.nl (Peter Kleiweg)
Date: Thu, 20 Oct 2005 15:56:55 +0200 (CEST)
Subject: [Rd] [R-gui]   R GUI considerations (was: R, Wine,
 and multi-threadedness)
In-Reply-To: <36467.192.168.97.37.1129784906.squirrel@homebase.wehi.edu.au>
References: <20051019224346.66B1D53585@mail.rsma.frb.gov>   
	<37E16860-F4A0-436A-8C6F-9990C15274CE@stat.ucla.edu>   
	<Pine.LNX.4.63.0510200126430.1082@kleigh.nl>
	<36467.192.168.97.37.1129784906.squirrel@homebase.wehi.edu.au>
Message-ID: <Pine.LNX.4.63.0510201511480.1085@kleigh.nl>

James Wettenhall schreef op de 20e dag van de wijnmaand van het jaar 2005:

[...]
> providing a GUI to them, getting started in R is less 
> intimidating for them, so then we can hopefully spend less 
> time doing mundane numerical computing tasks for our 
> collaborators and have more time to do our own serious 
> research.  And we can even publish our work on developing GUIs 
> which we have - just a short article in Bioinformatics OUP so 
> far - and John Fox has published a full-length article on 
> Rcmdr in the Journal of Statistical Software - great stuff!
> 
> Does that make sense?

To me, it does not make sense. When I have to work with 
something like Word, I am intimidated by lots of buttons with 
cryptic icons, with menus and submenus I can't make heads or 
tails of, the program doing weird things with my text I don't 
understand. A simple, friendly prompt is much more inviting. 
Give me a well-organised documentation, and let me do my thing.

A GUI fits in a big-is-better marketing strategy. The more 
intimidating a GUI looks, the better. As a user, I always feel a 
prisoner of such monstrosities. Hundreds of options, but I 
cannot find the ones I actually need, with no possibility to use 
other software tools as auxiliaries.

I find, the biggest problems with operating on large and complex 
sets of data (like you do in R), are things like digitisation of 
the data, preparation, transformation, selection. You usually 
have to do quite some work on the data before you have something 
R can handle. This preparation is best done with the tools you 
feel comfortable with, a simple editor, shell scripts, Perl, 
make, etc. Once you have your data prepared, invoking another 
command through the command line is a small step. You can go 
forward and backward, doing data preparation and processing the 
prepared data with something like R, iteratively. Look at GRASS 
as an excellent example.

You want all the preprocessing done in a GUI? I don't see how 
that is possible in a way that makes sense. How do you tell the 
GUI what your raw data looks like? How do you tell it to prepare 
the data for processing by R? Does the user have to learn the 
GUI's own scripting language and filters?

If you want users to be productive, you have to give them 
something they can easily incorporate within the tools they use 
on a daily basis. No big applications with everything locked in, 
but a set of programs or commands that do specific tasks, with 
an easy to understand input and output. You need something that 
works in an open environment, so the user can use existing 
skills. With a GUI that does "everything", the user has to learn 
from scratch all the things that make "everything" happen.

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Thu Oct 20 16:34:20 2005
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: Thu, 20 Oct 2005 16:34:20 +0200
Subject: [Rd] [R-gui]   R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <Pine.LNX.4.63.0510201511480.1085@kleigh.nl>
References: <20051019224346.66B1D53585@mail.rsma.frb.gov>
	<36467.192.168.97.37.1129784906.squirrel@homebase.wehi.edu.au>
	<Pine.LNX.4.63.0510201511480.1085@kleigh.nl>
Message-ID: <200510201634.20728.thomas.friedrichsmeier@ruhr-uni-bochum.de>

> If you want users to be productive, you have to give them
> something they can easily incorporate within the tools they use
> on a daily basis. No big applications with everything locked in,
> but a set of programs or commands that do specific tasks, with
> an easy to understand input and output. You need something that
> works in an open environment, so the user can use existing
> skills. With a GUI that does "everything", the user has to learn
> from scratch all the things that make "everything" happen.

Maybe you're just seeking this discussion for the fun of it. In this case, I 
won't stop you. If not, do you really think it is going anywhere?
You don't want/need a GUI? Fine. Don't use one, and don't write one. Do some 
others feel the need for a GUI? Yes, they do. Could there be at least some 
reason for that? Well, it's not like you can just "start using R", even if 
you do have the statistical background, and even if you do have basic 
programming knowledge. Is a bloated GUI less intimidating to some than a 
command-line? Yes. Do all GUIs necessarily make extra sure to hide you from 
everything going on behind the scenes, so you will be kept locked in, and 
helpless for ever? No. Should everybody be forced to use a GUI? No. Does 
anybody advocate otherwise? Not as far as I can see.
I don't think there's anything more to be said on this topic.

Regards
Thomas Friedrichsmeier


From bullard at berkeley.edu  Thu Oct 20 16:44:28 2005
From: bullard at berkeley.edu (James Bullard)
Date: Thu, 20 Oct 2005 07:44:28 -0700
Subject: [Rd] calling fortran from C
In-Reply-To: <1129813104.8394.1.camel@localhost.localdomain>
References: <XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>
	<1129769164.5955.5.camel@localhost.localdomain>
	<971536df0510191809v3a7cd3d0k753e95a71be027d3@mail.gmail.com>
	<1129771685.5955.12.camel@localhost.localdomain>
	<17239.25754.59979.321531@stat.math.ethz.ch>
	<1129813104.8394.1.camel@localhost.localdomain>
Message-ID: <op.syx8kegag16iya@localhost.localdomain>


Hello, I had a question about calling some of R's fortran routines from C.  
Specifically, I would like to call: dqrfit from some C code which will be  
bundled as an R package. I was hoping someone knew of an example in some  
of R's code which does something like this (any fortran call from R's C  
would probably be a sufficient guide). So far I can only find locations  
where R calls the Fortran directly, but this is not an option for me.

Also, I am trying to gauge the overhead of making this call, does anyone  
have any knowledge of whether there might be some non-trivial constant  
time penalty on making such a call.

Thanks in advance, Jim


From andy_liaw at merck.com  Thu Oct 20 16:48:37 2005
From: andy_liaw at merck.com (Liaw, Andy)
Date: Thu, 20 Oct 2005 10:48:37 -0400
Subject: [Rd] [R-gui]      R GUI considerations
Message-ID: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED513@usctmx1106.merck.com>

> From: Philippe Grosjean
> 
> Duncan,
> 
> I agree totally with you on all points, now that we clarified our 
> respective ideas. I am afraid I probably agree also with your last 
> point, from a theoretical point-of-view ("I still think we need more 
> glue and am working on that while we continue to experiment with the 
> design of GUIs for the next 5 years rather than the immediate 
> needs.").
> 
> I say, from a theoretical point-of-view, because in practice I am not 
> sure all these people waiting for GUIs, like in the projects I cited 
> before, will appreciate we just continue to play in the sandbox for 
> another 5 years!!! They want their GUI delivered... in the 
> next years, 
> or in the next six months, or even closer if possible!

Er, how about yesterday?  (Sorry, couldn't resist...)

Andy

 
> So, a mix between the theoretical approach and the practical 
> needs tells 
> me that it is perhaps time to shorten a little bit the 
> sandbox phase and 
> to move forward right now.
> 
> Best,
> 
> Philippe
> 
> ..............................................<?}))><........
>   ) ) ) ) )
> ( ( ( ( (    Prof. Philippe Grosjean
>   ) ) ) ) )
> ( ( ( ( (    Numerical Ecology of Aquatic Systems
>   ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
> ( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
>   ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
> ( ( ( ( (
>   ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
> ( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
>   ) ) ) ) )
> ( ( ( ( (    web:   http://www.umh.ac.be/~econum
>   ) ) ) ) )          http://www.sciviews.org
> ( ( ( ( (
> ..............................................................
> 
> Duncan Temple Lang wrote:
> > -----BEGIN PGP SIGNED MESSAGE-----
> > Hash: SHA1
> > 
> > 
> > Hi Philippe.
> > 
> >  I am sorry that you are upset by what I wrote.
> > I did not intend to cause offense.  And I was
> > not considering you as "just a professor only interested
> > by the results of your students".  However,
> > the discussion has unfortunately degenerated to that
> > common denominator for several people, either implicitly
> > or explicitly and I believe it is important to make
> > certain that the real issues are identified and discussed
> > by being precise about what it is that is being discussed.
> > 
> > I most certainly do thing a "polymorphic" GUI
> > that mixes different components is feasible.
> > Indeed,  I have been working on the integration
> > in general terms for many years and have developed
> > a general infrastructure for integrating such tools
> > in various settings.  What we are discussing is
> > the software architecture for constructing this
> > distinctly focused GUIs.
> > 
> > I think experiments in GUI design are terrific and
> > we need them.  I applaud SciViews for this.
> > And JGR, etc. too. But they don't necessarily
> > allow others to experiment as they are not
> > customizable. Just as users don't necessarily
> > want to learn R to do statistics, R programmers
> > don't necessarily want to learn Java or C++
> > and the specifics of an application like
> > SciViews or JGR to try out small changes.
> > That is why I have long argued that we use
> > the existing common interest that we all have
> > which is R and that we allow people
> > to reuse components of SciViews, etc.
> > 
> > If these are integrated into R so that people can
> > really modify them and construct different GUIS
> > from their elements, that would be terrific.
> > In the meantime, the ability to easily and conveniently
> > do experiments in R does warrant discussing a software
> > architecture that facilitates that and so involves
> > bindings to toolkits, both modern ones and convenient ones.
> > 
> >  Anyway, apologies again for the misunderstanding. I was
> > not considering you in that narrow fashion that came
> > across in my mail.
> > 
> >  Enough said for the moment. All these experiments are good,
> > collaboration is good. The obvious place to do it in my book
> > is in the R language or else have some good glue between the
> > systems.  As much work as I have done on GUIs in the S language
> > in  the last 13 years, I still think we need more glue and
> > am working on that while we continue to experiment with the
> > design of GUIs for the next 5 years rather than the immediate needs.
> > 
> > 
> >  Thanks,
> >   D
> > 
> > 
> > 
> > Philippe Grosjean wrote:
> > 
> >>Duncan,
> >>
> >>Could you, please, stop considering me as just a professor in
> >>biostatistics only interested by the results of my students 
> and nothing
> >>else. Do you need a couple of evidences that I am working with other
> >>people, other applications, and that they require totally different
> >>GUIs? Here they are:
> >>
> >>1) I am the instigator and main programmer of ZooImage
> >>(http://www.sciviews.org/zooimage/), an Open Source system combining
> >>ImageJ and R (mainly) to provide a complete numerical image analysis
> >>system for automating zooplankton samples processing. In the R side,
> >>image measurements gathered by ImageJ are analyzed with the 
> powerfull
> >>machine learning algorithms implemented in R (like random forest,
> >>bundling, ...). After analysis of several samples, they 
> usually form a
> >>space or time series to be analyzed by respective tools, still in R.
> >>Targetted users are biological oceanographers... most of them are
> >>reluctant to "programming" in R (i.e., to write and edit 
> little scripts
> >>to run the analyses), and the others are more accustomished 
> to Matlab.
> >>
> >>2) I participate to the development of FLR 
> (http://flr-project.org/), a
> >>framework for modelling fisheries entirely written with S4 
> objects. The
> >>project is now used in several fisheries evaluation programs, and we
> >>face some problems with modellers and advisors telling they 
> don't want
> >>to have to "learn R" for running their models. Quite different
> >>application and targetted users.
> >>
> >>3) One of the future contracts I mentioned earlier in this 
> post is with
> >>IFREMER, to make a flexible reporting system mixing the report()
> >>functions of SciViews and Rpad to end up with dynamically 
> recalculable
> >>HTML reports (hopefully web-based solution), for instance for weekly
> >>reports on the survey of water quality along the French 
> coast. Again, a
> >>very different application and GUI.
> >>
> >>4) Another contract consists in making an artificial human noise,
> >>analysing results from more than 200 artificial odor receptors. The
> >>people there agree for using R as the "calculation engine", 
> but want a
> >>really simple point and click interface for their analyses, 
> and all the
> >>machinery completely hidden.
> >>
> >>That said, if you consider a polymorphic R GUI that mixes 
> together the
> >>different paradigms (menu&dialog boxes, spreadsheet, notebook-like
> >>interactive documents, ...) is not something possible to 
> do, it is your
> >>problem. My own experience, *including the various 
> different situations
> >>cited here above* make me feel that it is something 
> possible. I don't
> >>want to kill all R GUIs projects in favor of a single one, 
> but I affirm
> >>that we should work in a more collaborative way.
> >>
> >>Best regards,
> >>
> >>Philippe
> >>
> >>..............................................<?}))><........
> >> ) ) ) ) )
> >>( ( ( ( (    Prof. Philippe Grosjean
> >> ) ) ) ) )
> >>( ( ( ( (    Numerical Ecology of Aquatic Systems
> >> ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
> >>( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
> >> ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
> >>( ( ( ( (
> >> ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
> >>( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
> >> ) ) ) ) )
> >>( ( ( ( (    web:   http://www.umh.ac.be/~econum
> >> ) ) ) ) )          http://www.sciviews.org
> >>( ( ( ( (
> >>..............................................................
> >>
> >>Duncan Temple Lang wrote:
> >>
> >>
> >>
> >>Philippe Grosjean wrote:
> >>
> >>
> >>>>>Hello Marc and the others (and the User!2006 organizing 
> commitee),
> >>>>>
> >>>>>I answer to Marc's email, because I think it is the most 
> constructive
> >>>>>one. I am a little bit dissapointed that the discussion 
> about R GUIs,
> >>>>>whatever the initial subject, inevitably shifts to an endless
> >>>>>discussion about which graphical toolkit to use, and whether one
> >>>>>should interface it directly, or by means of an 
> intermediary language
> >>>>>perhaps more suitable for handling widgets events.
> >>>>>
> >>>>>Should I recall that this thread is *not* about which graphical
> >>>>>toolkit to use, but is trying to trigger a discussion on 
> how could we
> >>>>>work together to avoid duplication in coding for R GUIs, 
> and perhaps,
> >>>>>join in a common project. Something totally different!
> >>>>>
> >>
> >>
> >>
> >>I think all of us will agree that we have limited resources
> >>and should collaborate where possible.
> >>However, to do this, we must have a common set of interests
> >>that form a reason to collaborate.
> >>Your earlier mail mentioned the link
> >>(http://www.sciviews.org/_rgui/rgui/GUIs.html)
> >>to the different types of GUIs you were considering, be it
> >>a Web-based, or notebook style, or whatever.
> >>
> >>I really think that you have to think about things from 
> other peoples'
> >>perspectives and realize that many of us are not 
> considering "the GUI"
> >>as you are. You seem to have an audience in mind which
> >>  a) need access to a broad range of R functions
> >>  b) are averse to the command line.
> >>It appears you have students in mind, probably non-statisticians
> >>in an introductory class.  That is great. And your approach is
> >>perfectly reasonable to address that need.
> >>
> >>However, others of us have very different goals.
> >>Some of us want specialized GUIs, e.g. GeneGGobi, interfaces
> >>to specific functionality (e.g. random forests), ....
> >>Others of us have been buidling tools for interactive 
> documents, much
> >>like a Web browser embedded in R with complex composite widgets
> >>embedded within the document to have dynamic, interactive documents.
> >>These are very different audiences, and accordingly very different
> >>GUIs.  They require not customization of a general GUI, but
> >>an ability to construct entirely new GUIs.
> >>
> >>Where we can really collaborate is in the development of
> >>GUI components that can be used from within R to construct
> >>these different GUIs.
> >>
> >>I really encourage you to try to consider what other people
> >>are thinking and hopefully this will help us get past the
> >>discussions of specific toolkits, etc.  I think they have
> >>originated from beliefs that we are all talking about variations
> >>of the same student-oriented GUI. In fact, we are talking about
> >>much richer forms of pedagogy and interface.
> >>
> >> D.
> >>
> >>
> >>
> >>
> >>
> >>
> >>>>>I know people that already play the game of 
> collaboration: those I am
> >>>>>working with to bring bridges between their projects and 
> SciViews-R.
> >>>>>There is another person working on general improvements of R for
> >>>>>GUIs: Duncan Murdoch, but this is about RGui.exe, thus 
> for Windows only.
> >>>>>
> >>>>>I support the proposition of Marc Schwartz to dedicate a 
> session in
> >>>>>User!2006 to this subject... but I would like to precise this: it
> >>>>>should be stated clearly that the GUI session would 
> *not* be about
> >>>>>discussing which graphical widgets to use, and *not* on the
> >>>>>presentation of yet another new R GUI project. That 
> session should be
> >>>>>clearly focused on:
> >>>>>- actual examples of use of R GUIs, and the benefit 
> their bring in
> >>>>>practice,
> >>>>>- propositions for developping a common and reusable API 
> for R GUIs
> >>>>>(preferrably written in R to be independent of 
> particular graphical
> >>>>>widgets -I started such a thing in svDialogs, and I 
> think that Simon
> >>>>>Urbanek's Iwidgets is similar in philosophy-),
> >>>>>- bringing bridges between existing R GUI projects,
> >>>>>- identifying cross-platform opportunities.
> >>>>>That session should be followed by an extensive 
> discussion (why not
> >>>>>around a drink, or a good meal?), between interested people. The
> >>>>>discussion should be best focused on:
> >>>>>
> >>>>>1) How and who will install tools for collaborative work on those
> >>>>>common R GUI pieces of code (a CVS or SVN for 
> instance)... we already
> >>>>>have a web site and the R-SIG-GUI, even if these tools 
> are currently
> >>>>>under-used.
> >>>>>
> >>>>>2) How and who will sketch documents summarizing our goals. Of
> >>>>>course, these documents should be editable by everybody. So,
> >>>>>something like a WiKi sounds good here.
> >>>>>
> >>>>>3) In a near future, we will begin to add code in the 
> "common R GUI
> >>>>>tools", of course. This should be pieces of code 
> extracted from the
> >>>>>various R GUI projects. So, we have to draw an initial 
> list of these
> >>>>>pieces of code and who will provide them.
> >>>>>
> >>>>>I CC: this mail directly to the User!2006 organizing committee,
> >>>>>because it is a direct call asking for such a session. 
> Regarding the
> >>>>>organizer,  I wouldn't propose names... someone from the R
> >>>>>developer's team, or a key person in R GUIs topics...
> >>>>>Best,
> >>>>>
> >>>>>Philippe Grosjean
> >>>>>
> >>>>>..............................................<?}))><........
> >>>>> ) ) ) ) )
> >>>>>( ( ( ( (    Prof. Philippe Grosjean
> >>>>> ) ) ) ) )
> >>>>>( ( ( ( (    Numerical Ecology of Aquatic Systems
> >>>>> ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
> >>>>>( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
> >>>>> ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
> >>>>>( ( ( ( (
> >>>>> ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
> >>>>>( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
> >>>>> ) ) ) ) )
> >>>>>( ( ( ( (    web:   http://www.umh.ac.be/~econum
> >>>>> ) ) ) ) )          http://www.sciviews.org
> >>>>>( ( ( ( (
> >>>>>..............................................................
> >>>>>
> >>>>>Marc Schwartz wrote:
> >>>>>
> >>>>>
> >>>>>
> >>>>>>Greetings all,
> >>>>>>
> >>>>>>While recognizing that "this is easier said, than 
> done", is there any
> >>>>>>logic in suggesting that for those who might be interested, a
> >>>>>>specific R
> >>>>>>GUI session of sorts be added to the UseR! 2006 meeting 
> schedule?
> >>>>>>
> >>>>>>Since some quorum of interested GUI users may be 
> planning to attend the
> >>>>>>meeting or may be motivated to do so, it may be an 
> opportunity to:
> >>>>>>
> >>>>>>1. Leverage face to face interaction and visualize 
> possible options
> >>>>>>
> >>>>>>2. Define areas of commonality
> >>>>>>
> >>>>>>3. Bring some level of focus to targeted segments of 
> the user base that
> >>>>>>would utilize a GUI and for whom there may be differing 
> functional
> >>>>>>requirements.
> >>>>>>
> >>>>>>4. Identify cross-platform opportunities and technologies
> >>>>>>
> >>>>>>5. See further notes below...
> >>>>>>
> >>>>>>
> >>>>>>Some of the preliminary work could no doubt be done in 
> advance to
> >>>>>>better
> >>>>>>prepare and structure discussion.
> >>>>>>
> >>>>>>This could be done as a "breakout" session or if there 
> is sufficient
> >>>>>>interest (and facility/funding issues can be resolved) 
> perhaps a group
> >>>>>>session held the day before or perhaps the day after the main
> >>>>>>conference
> >>>>>>program.
> >>>>>>
> >>>>>>If there is a core group that is interested in pursuing this, an
> >>>>>>announcement could be made to the respective R e-mail 
> lists (r-help,
> >>>>>>r-devel, r-sig-gui, etc.) whereby, with the sufficient 
> lead time as we
> >>>>>>have, the requisite activities could be put in place to 
> orchestrate the
> >>>>>>session, define specific desired outcomes and identify 
> individuals
> >>>>>>willing to spend their time to coordinate and make this venture
> >>>>>>successful (however success would be defined).
> >>>>>>
> >>>>>>There is no business or financial motivation here for a 
> GUI. If there
> >>>>>>was and a for profit company decided that there would 
> be a significant
> >>>>>>return on investment, they would spend the money, hire 
> the resources,
> >>>>>>define a team leader and put forth a single development 
> spec for a GUI
> >>>>>>project based upon their own market research. It would 
> be done in a
> >>>>>>relatively authoritarian fashion and if you didn't 
> agree, you would be
> >>>>>>asked to find a job elsewhere.
> >>>>>>
> >>>>>>Here, you would need to solicit voluntary resources, 
> reconcile the
> >>>>>>expected differences of opinion on the spectrum of 
> matters that would
> >>>>>>have to be addressed and define some common framework 
> for operating,
> >>>>>>perhaps based upon targeted user segments.
> >>>>>>
> >>>>>>This subject, as mentioned, has come up on the lists previously,
> >>>>>>with no
> >>>>>>common resolution, resulting of course in the 
> individual activities
> >>>>>>that
> >>>>>>have emerged.
> >>>>>>
> >>>>>>Is there a group of motivated useRs out there, who have 
> the time,
> >>>>>>energy, and skills and are willing to work within the 
> framework of a
> >>>>>>design and development "team" environment, where a quid 
> pro quo for
> >>>>>>moving forward could evolve from the User! 2006 meeting?
> >>>>>>Is there an individual, who would need to emerge from 
> that group, who
> >>>>>>has the respect and requisite skills to drive a 
> consensus of opinion
> >>>>>>and
> >>>>>>keep a team focused and moving in the proper direction?
> >>>>>>
> >>>>>>If so, that might be a step in the direction of 
> evolving a GUI that
> >>>>>>might make sense for some yet to be defined range of 
> useRs, who would
> >>>>>>not otherwise utilize the CLI or might need to evolve 
> in that direction
> >>>>>>over time.
> >>>>>>
> >>>>>>If not, then the status quo continues...
> >>>>>>
> >>>>>>There are some 300 Linux distributions out there and 
> multiple X based
> >>>>>>GUIs, which have evolved for reasons as varied as those 
> behind the
> >>>>>>available R GUIs and more. Yet there are a select few base Linux
> >>>>>>distributions and largely two GUIs that have garnered 
> any significant
> >>>>>>market share. Perhaps, over time, lacking any 
> coordinated activity, a
> >>>>>>similar situation will evolve here, if the predicate 
> that a broad
> >>>>>>demand
> >>>>>>for a R GUI is valid.
> >>>>>>
> >>>>>>If the predicate is false, then this process is perhaps 
> rightly done by
> >>>>>>individuals meeting narrowly focused, local requirements.
> >>>>>>
> >>>>>>I should note, that I am not prospective GUI user, but 
> a happy ESS
> >>>>>>user.
> >>>>>>I simply thought that I would try to provoke some 
> discussion on this
> >>>>>>point, since I jumped into this thread earlier in the week.
> >>>>>>
> >>>>>>Best regards,
> >>>>>>
> >>>>>>Marc Schwartz
> >>>>>>
> >>>>>>______________________________________________
> >>>>>>R-devel at r-project.org mailing list
> >>>>>>https://stat.ethz.ch/mailman/listinfo/r-devel
> >>>>>>
> >>>>>>
> >>>>>
> >>>>>
> >>>>>_______________________________________________
> >>>>>R-SIG-GUI mailing list
> >>>>>R-SIG-GUI at stat.math.ethz.ch
> >>>>>https://stat.ethz.ch/mailman/listinfo/r-sig-gui
> >>
> >>
> >>
> >>--
> >>Duncan Temple Lang                duncan at wald.ucdavis.edu
> >>Department of Statistics          work:  (530) 752-4782
> >>371 Kerr Hall                     fax:   (530) 752-7099
> >>One Shields Ave.
> >>University of California at Davis
> >>Davis, CA 95616, USA
> >>
> >>>
> > 
> > - --
> > Duncan Temple Lang                duncan at wald.ucdavis.edu
> > Department of Statistics          work:  (530) 752-4782
> > 371 Kerr Hall                     fax:   (530) 752-7099
> > One Shields Ave.
> > University of California at Davis
> > Davis, CA 95616, USA
> > -----BEGIN PGP SIGNATURE-----
> > Version: GnuPG v1.4.2 (Darwin)
> > Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org
> > 
> > iD8DBQFDU+ta9p/Jzwa2QP4RAnppAJ9dv+LRlZttkmI8epiPrkU3aUsNjgCeIhGD
> > 5bD+9bu3xIy6Oioy3a63JNo=
> > =s0yj
> > -----END PGP SIGNATURE-----
> > 
> > _______________________________________________
> > R-SIG-GUI mailing list
> > R-SIG-GUI at stat.math.ethz.ch
> > https://stat.ethz.ch/mailman/listinfo/r-sig-gui
> > 
> >
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>


From ripley at stats.ox.ac.uk  Thu Oct 20 17:31:48 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 20 Oct 2005 16:31:48 +0100 (BST)
Subject: [Rd] calling fortran from C
In-Reply-To: <op.syx8kegag16iya@localhost.localdomain>
References: <XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>
	<1129769164.5955.5.camel@localhost.localdomain>
	<971536df0510191809v3a7cd3d0k753e95a71be027d3@mail.gmail.com>
	<1129771685.5955.12.camel@localhost.localdomain>
	<17239.25754.59979.321531@stat.math.ethz.ch>
	<1129813104.8394.1.camel@localhost.localdomain>
	<op.syx8kegag16iya@localhost.localdomain>
Message-ID: <Pine.LNX.4.61.0510201621080.19384@gannet.stats>

On Thu, 20 Oct 2005, James Bullard wrote:

>
> Hello, I had a question about calling some of R's fortran routines from C.
> Specifically, I would like to call: dqrfit from some C code which will be
> bundled as an R package. I was hoping someone knew of an example in some
> of R's code which does something like this (any fortran call from R's C
> would probably be a sufficient guide). So far I can only find locations
> where R calls the Fortran directly, but this is not an option for me.

Look in the lapack module, and also in the stats package for loess (and 
others, smooth.spline has both C and Fortran components).

> Also, I am trying to gauge the overhead of making this call, does anyone
> have any knowledge of whether there might be some non-trivial constant
> time penalty on making such a call.

Not significant (and C to Fortran is normally no different from C to C). 
In this case you will be calling from a DLL either into an executable or a 
DLL and that will be slower than calling within a DLL, how much depending 
on the platform.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From andy_liaw at merck.com  Thu Oct 20 17:53:41 2005
From: andy_liaw at merck.com (Liaw, Andy)
Date: Thu, 20 Oct 2005 11:53:41 -0400
Subject: [Rd] calling fortran from C
Message-ID: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED516@usctmx1106.merck.com>

This is in R-exts.  If the Fortran subroutine is called `dqrfit', you would
use something like:

F77_CALL(dqrfit)(...);

All arguments need to be pointers, as Fortran passes by reference.

Andy

> From: James Bullard
> 
> Hello, I had a question about calling some of R's fortran 
> routines from C.  
> Specifically, I would like to call: dqrfit from some C code 
> which will be  
> bundled as an R package. I was hoping someone knew of an 
> example in some  
> of R's code which does something like this (any fortran call 
> from R's C  
> would probably be a sufficient guide). So far I can only find 
> locations  
> where R calls the Fortran directly, but this is not an option for me.
> 
> Also, I am trying to gauge the overhead of making this call, 
> does anyone  
> have any knowledge of whether there might be some non-trivial 
> constant  
> time penalty on making such a call.
> 
> Thanks in advance, Jim
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>


From p.dalgaard at biostat.ku.dk  Thu Oct 20 17:55:27 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 20 Oct 2005 17:55:27 +0200
Subject: [Rd] calling fortran from C
In-Reply-To: <op.syx8kegag16iya@localhost.localdomain>
References: <XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>
	<1129769164.5955.5.camel@localhost.localdomain>
	<971536df0510191809v3a7cd3d0k753e95a71be027d3@mail.gmail.com>
	<1129771685.5955.12.camel@localhost.localdomain>
	<17239.25754.59979.321531@stat.math.ethz.ch>
	<1129813104.8394.1.camel@localhost.localdomain>
	<op.syx8kegag16iya@localhost.localdomain>
Message-ID: <x21x2g6v4g.fsf@viggo.kubism.ku.dk>

"James Bullard" <bullard at berkeley.edu> writes:

> Hello, I had a question about calling some of R's fortran routines from C.  
> Specifically, I would like to call: dqrfit from some C code which will be  
> bundled as an R package. I was hoping someone knew of an example in some  
> of R's code which does something like this (any fortran call from R's C  
> would probably be a sufficient guide). So far I can only find locations  
> where R calls the Fortran directly, but this is not an option for me.
> 
> Also, I am trying to gauge the overhead of making this call, does anyone  
> have any knowledge of whether there might be some non-trivial constant  
> time penalty on making such a call.
> 
> Thanks in advance, Jim

The penalty is no bigger than on ordinary C calls. The main issue is
to get the naming convention right (HAVE_F77_UNDERSCORE, etc) and call
dqrfit_(....) if required -- all in a portable way. 

The whole thing is described in the Writing R Extensions manual,
section 5.6 specifically.



-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From cberry at tajo.ucsd.edu  Thu Oct 20 17:55:58 2005
From: cberry at tajo.ucsd.edu (Charles C. Berry)
Date: Thu, 20 Oct 2005 08:55:58 -0700
Subject: [Rd] calling fortran from C
In-Reply-To: <op.syx8kegag16iya@localhost.localdomain>
References: <XFMail.051020011342.Ted.Harding@nessie.mcc.ac.uk>
	<1129769164.5955.5.camel@localhost.localdomain>
	<971536df0510191809v3a7cd3d0k753e95a71be027d3@mail.gmail.com>
	<1129771685.5955.12.camel@localhost.localdomain>
	<17239.25754.59979.321531@stat.math.ethz.ch>
	<1129813104.8394.1.camel@localhost.localdomain>
	<op.syx8kegag16iya@localhost.localdomain>
Message-ID: <Pine.LNX.4.63.0510200846560.9811@tajo.ucsd.edu>



Lapack.c is loaded with examples.

Try

$ cd <R source dir>
$ grep "F77_CALL" ./src/modules/lapack/Lapack.c

Did you see

 	5.6 Calling C from FORTRAN and vice versa

in 'Writing R Extensions' ??



On Thu, 20 Oct 2005, James Bullard wrote:

>
> Hello, I had a question about calling some of R's fortran routines from C.
> Specifically, I would like to call: dqrfit from some C code which will be
> bundled as an R package. I was hoping someone knew of an example in some
> of R's code which does something like this (any fortran call from R's C
> would probably be a sufficient guide). So far I can only find locations
> where R calls the Fortran directly, but this is not an option for me.
>
> Also, I am trying to gauge the overhead of making this call, does anyone
> have any knowledge of whether there might be some non-trivial constant
> time penalty on making such a call.
>
> Thanks in advance, Jim
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

Charles C. Berry                        (858) 534-2098
                                          Dept of Family/Preventive Medicine
E mailto:cberry at tajo.ucsd.edu	         UC San Diego
http://biostat.ucsd.edu/~cberry/         La Jolla, San Diego 92093-0717


From david.meyer at wu-wien.ac.at  Thu Oct 20 14:56:17 2005
From: david.meyer at wu-wien.ac.at (David Meyer)
Date: Thu, 20 Oct 2005 14:56:17 +0200
Subject: [Rd] [R-gui]    R GUI considerations
In-Reply-To: <43537220.1070705@sciviews.org>
References: <4350FB09.3020503@sciviews.org>
	<Pine.LNX.4.61.0510160915430.20389@gannet.stats>
	<17234.23221.482412.732757@basebud.nulle.part>
	<200510161653.00853.thomas.friedrichsmeier@ruhr-uni-bochum.de>
	<1129490486.5518.140.camel@localhost.localdomain>
	<43537220.1070705@sciviews.org>
Message-ID: <20051020145617.750188a6.david.meyer@wu-wien.ac.at>

Philippe,

> 
> I CC: this mail directly to the User!2006 organizing committee,
> because it is a direct call asking for such a session. Regarding the
> organizer, 
>   I wouldn't propose names... someone from the R developer's team, or
>   a 
> key person in R GUIs topics...

This topic should certainly be taken into account. We just want to wait
for all submissions, so we can better decide on what will suit best the
topic (or subtopics, if any): sessions, islands, round-tables ...

So I hope the abstracts will be coming in!

Cheers,

David 


-- 
Dr. David Meyer
Department of Information Systems and Operations

Vienna University of Economics and Business Administration
Augasse 2-6, A-1090 Wien, Austria, Europe
Fax: +43-1-313 36x746 
Tel: +43-1-313 36x4393
HP:  http://wi.wu-wien.ac.at/~meyer/


From walterj at ureach.com  Thu Oct 20 18:21:09 2005
From: walterj at ureach.com (Walter Johnston)
Date: Thu, 20 Oct 2005 12:21:09 -0400
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
Message-ID: <200510201621.MAA07599@www20.ureach.com>

A couple of non-flame comments and a question -

(1) I have used Smalltalk in various forms and recommend it
highly as an environment (try Squeak for a free implementation);
it is the origin of the model-view-controller paradigm for
interaction with a GUI. Tcl/Tk is also nice with its
event-driven model.

(2) DON'T keep re-implementing the same statistical algorithms
all over the place! Putting together software that can be
trusted is non-trivial - if you want to add to the available
resources I applaud you for it, but ADDing is not simply
translating to another language (though, if the "old" language
is no longer available or supported there are good reasons to do
so. :-) I use a package to accomplish something and I need to
trust the output from that package. I don't look for a "swiss
army knife" but rather a package that does what I need and does
it well (though I prefer packages that have more functionality).

(3) I like R because of the model which returns results in
"objects" (though, as a Smalltalker, I don't see much OO in the
language - maybe I missed something).

(4) AI seemed to make more demonstrable progress when they
started separting the reasoning mechanism from the rules and
data (as in the old "expert systems").

And the question:

Is there a "simple" way (e.g. some socket based mechanism) to
feed commands into R and retrieve the results of those commands?
 This would require that I program the sequence of commands I
want to use (or a means to generate them) and then be able parse
the resulting structure - I understand. But it would also allow
separation of the computation, the "statistical reasoning", and
the UI into (potentially) separate units which would not even
need to be on the same machine to inter-operate.  If there is a
reasonable way to do this, please tell me.

Thanks.

Walter Johnston



---- On Wed, 19 Oct 2005, Jeffrey J. Hallman (m1jjh00 at frb.gov)
wrote:

> If you're looking for a GUI toolkit that:
> 
>    1.  Is cross-platform,
>    2.  Has a good collection of widgets that look good on all
platforms, and
>    3.  Is easy to work with from R
> 
> then it is hopeless.  There is no such toolkit.
> 
> As one poster mentioned, most of the better GUI toolkits are
very
> object-oriented, because that paradigm is a good fit for GUI
programming. 
> There are a few programming environments out there that do
have nice GUI
> abilities, but they all use base languages that are not very
R-like, and so
> the potential R GUI programmer is faced with having to use two
very different
> languages for his creation.  And even if that obstacle is
surmounted, there
> remains the difficulty of trying to package up his work in
such a way as to
> make it easily installed by others.  Things are always
breaking in the
> interfaces between R and whatever you're using.  Trying to
keep it all running
> and packaging it for deployment are thankless, gargantuan
tasks.
> 
> There is a better way, and that is to give up on R.  Start
over with
> a better programming environment, one that is object oriented,
as flexible and
> dynamic as R, is cross platform, easy to program in, and has
decent GUI
> facilities already.  Then port the stuff in R that does
statistical
> programming, and you have the best of all worlds. 
> 
> The environment I am thinking about is VisualWorks Smalltalk,
which is free
> for noncommercial use.  As a language, Smalltalk is both
simpler and more 
> powerful than R, and the VM it runs on is much faster than the
R interpreter.
> It has superior garbage collection and the best IDE in the
business.
> Callouts to C are just as easy as they are in R, but would
likely not be
> needed as often due to the faster VM and much better
programming facilities.
> Interfaces to various databases are possible, and the most
powerful web
> toolkit (Seaside) is written in Smalltalk and runs under
VisualWorks.
> 
> There are a couple of other Smalltalk environments around that
could also be
> considered.  Squeak is an open source cross-platform Smalltalk
that is not as
> fast as VisualWorks, but still must faster and more robust
than the R
> interpreter.  Smalltalk/X is another possibility, though it
works only on
> Windows and Unix. 
> 
> Think about it.  Once you have a basic math package that can
handle matrix
> programming and various mathematical functions, building the
various
> statistical modeling tools on top of them is not that hard. 
What makes S and
> R so much better than SAS is their programmability.  Smalltalk
is like that,
> only better.
> 
> 
> Jeff Hallman
> 
> _______________________________________________
> R-SIG-GUI mailing list
> R-SIG-GUI at stat.math.ethz.ch
> https://stat.ethz.ch/mailman/listinfo/r-sig-gui
> 
>


From dgrove at fhcrc.org  Thu Oct 20 18:39:55 2005
From: dgrove at fhcrc.org (dgrove@fhcrc.org)
Date: Thu, 20 Oct 2005 18:39:55 +0200 (CEST)
Subject: [Rd] numerical issues in chisq.test(simulate=TRUE) (PR#8224)
Message-ID: <20051020163955.E2D4420BFE@slim.kubism.ku.dk>

Yes, only the middle matrix was problematic.  Others were included to show
what the value should (approx) be.  Sorry that I didn't mention I was
using 32 bit.  

There are of course very easy fixes to this, just wasn't sure what was
the "best" approach in this situation (i.e. wasn't sure if the usual
tolerance of sqrt(.Machine$double.eps) was too large.

Thanks much,
Doug


On Thu, 20 Oct 2005, Martin Maechler wrote:

> Thank you, Douglas (and Simone) for the bug report.
> 
> >>>>> "Simone" == Simone Giannerini <sgiannerini at gmail.com>
> >>>>>     on Thu, 20 Oct 2005 10:10:01 +0200 writes:
> 
>     Simone> Hi,
>     Simone> I obtain the same result under Win. XP SP2 on AMD 64 3700+
> 
>     Simone> platform i386-pc-mingw32
>     Simone> arch     i386
>     Simone> os       mingw32
>     Simone> system   i386, mingw32
>     Simone> status
>     Simone> major    2
>     Simone> minor    2.0
>     Simone> year     2005
>     Simone> month    10
>     Simone> day      06
>     Simone> svn rev  35749
>     Simone> language R
> 
>     >> m <- matrix(c(1,0,7,15),2,2) ; chisq.test(m, sim=TRUE)$p.value
>     Simone> [1] 0.3598201
> 
>     >> m <- matrix(c(1,0,7,16),2,2) ; chisq.test(m, sim=TRUE)$p.value
>     Simone> [1] 0.0004997501
> 
>     >> m <- matrix(c(1,0,7,17),2,2) ; chisq.test(m, sim=TRUE)$p.value
>     Simone> [1] 0.3403298
> 
> So, it's only the middle matrix giving problems for you.
> 
> It doesn't for me on a AMD 64-bit platform, even for 1000 simulations:
> 
> > m <- cbind(1:0, c(7,16))
> > summary(p <- replicate(1000, chisq.test(m, sim=TRUE)$p.value))
>    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
>  0.3043  0.3268  0.3338  0.3337  0.3405  0.3663 
> 
> but it does show the problem on 32-bit one.
> 
> A fix is easy and will be in R-patched (and R-devel of
> course) soon.
> 
> Martin Maechler, ETH Zurich
> 
> 
>     Simone> Ciao
>     Simone> Simone
> 
>     Simone> On 10/20/05, dgrove at fhcrc.org <dgrove at fhcrc.org> wrote:
>     >> Hi,
>     >> 
>     >> This report deals with p-values coming from chisq.test using
>     >> the simulate.p=TRUE option.  The issue is numerical accuracy
>     >> and was brought up in previous bug reports 3486 and 3896.
>     >> The bug was considered fixed but apparently was only mostly
>     >> fixed.  Just the typical problem of two values that are
>     >> mathematically equal not ending up numerically equivalent.
>     >> 
>     >> Consider this series of three 2x2 tables:
>     >> 
>     >> [1,]    1    7
>     >> [2,]    0   15
>     >> 
>     >> [1,]    1    7
>     >> [2,]    0   16
>     >> 
>     >> [1,]    1    7
>     >> [2,]    0   17
>     >> 
>     >> 
>     >> The pvals returned from chisq.test(m, sim=TRUE)$p.value are
>     >> 0.3543228, 0.0004997501 and 0.3273363 respectively.
>     >> 
>     >> The 2nd seems a bit unlikely, huh?
>     >> 
>     >> I checked into it and the value I'm getting for the statistic
>     >> (calculated in R code) is 4*.Machine$double.eps less than the
>     >> value (which should be equal) that is returned from the C-code
>     >> that does the simulation.
>     >> 
>     >> 
>     >> Code for creating/testing the three matrices shown above:
>     >> m <- matrix(c(1,0,7,15),2,2) ; chisq.test(m, sim=TRUE)$p.value
>     >> m <- matrix(c(1,0,7,16),2,2) ; chisq.test(m, sim=TRUE)$p.value
>     >> m <- matrix(c(1,0,7,17),2,2) ; chisq.test(m, sim=TRUE)$p.value
>     >> 
>     >> 
>     >> Running SuSE9.3 on a AMD Athlon4000+
>     >> 
>     >> 
>     >> > version
>     >> platform i686-pc-linux-gnu
>     >> arch     i686
>     >> os       linux-gnu
>     >> system   i686, linux-gnu
>     >> status   Patched
>     >> major    2
>     >> minor    1.1
>     >> year     2005
>     >> month    07
>     >> day      29
>     >> language R
>     >> 
>     >> 
>     >> Thanks,
>     >> Doug
>     >> 
>     >> 
>     >> Douglas Grove
>     >> Statistical Research Associate
>     >> Fred Hutchinson Cancer Research Center
>     >> Seattle WA 98109
>


From barry.rowlingson at gmail.com  Thu Oct 20 18:41:37 2005
From: barry.rowlingson at gmail.com (barry.rowlingson@gmail.com)
Date: Thu, 20 Oct 2005 18:41:37 +0200 (CEST)
Subject: [Rd] image() with all NAs fails (PR#8228)
Message-ID: <20051020164137.AD1E220BFF@slim.kubism.ku.dk>

Full_Name: Barry Rowlingson
Version: 2.2.0
OS: Linux
Submission from: (NULL) (194.80.32.8)


The image function with a matrix of all NA values fails with:

> xyz=list(x=1:3,y=1:4,z=matrix(NA,3,4))
> image(xyz)
Error in image.default(xyz) : invalid z limits
In addition: Warning messages:
1: no finite arguments to min; returning Inf
2: no finite arguments to max; returning -Inf

Image can handle any number of NAs as long as there is at least one data value:

> xyz=list(x=1:3,y=1:4,z=matrix(c(1,rep(NA,11)),3,4))
> image(xyz)

 and shows NAs as transparent. However if it is all NAs then the z-limit
calculation breaks down as above.

  It seems reasonable to me that image() with all NAs should produce a
completely transparent/empty image (after displaying the axes if add!=TRUE) and
not fail with an error.

Barry


From Jeffrey.J.Hallman at frb.gov  Thu Oct 20 18:47:07 2005
From: Jeffrey.J.Hallman at frb.gov (Jeffrey.J.Hallman@frb.gov)
Date: Thu, 20 Oct 2005 12:47:07 -0400
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <200510201621.MAA07599@www20.ureach.com>
Message-ID: <OF52C2FD24.EB73A559-ON852570A0.005B4728-852570A0.005C3456@frbog.frb.gov>



Walter Johnston <walterj at ureach.com> wrote on 10/20/2005 12:21:09 PM:

> A couple of non-flame comments and a question -
>
> (1) I have used Smalltalk in various forms and recommend it
> highly as an environment (try Squeak for a free implementation);
> it is the origin of the model-view-controller paradigm for
> interaction with a GUI. Tcl/Tk is also nice with its
> event-driven model.
>
> (2) DON'T keep re-implementing the same statistical algorithms
> all over the place! Putting together software that can be
> trusted is non-trivial - if you want to add to the available
> resources I applaud you for it, but ADDing is not simply
> translating to another language (though, if the "old" language
> is no longer available or supported there are good reasons to do
> so. :-) I use a package to accomplish something and I need to
> trust the output from that package. I don't look for a "swiss
> army knife" but rather a package that does what I need and does
> it well (though I prefer packages that have more functionality).
>
> (3) I like R because of the model which returns results in
> "objects" (though, as a Smalltalker, I don't see much OO in the
> language - maybe I missed something).

I agree with you here, and that is the reason why I disagree somewhat with
your second point.  If you have C code that implements statistical
algorithms and/or structures, and you want to use it in Smalltalk, it is
usually a good idea to write wrapper classes that put an object-oriented
face on the procedural code.  This is particularly true if you hope to
reuse the code.  You want to make the interface look and feel like
Smalltalk to reduce the cognitive dissonance of whoever is using the
wrapped code.  But as an experienced Smalltalker, I'm sure you already know
this.

>
> (4) AI seemed to make more demonstrable progress when they
> started separting the reasoning mechanism from the rules and
> data (as in the old "expert systems").
>
> And the question:
>
> Is there a "simple" way (e.g. some socket based mechanism) to
> feed commands into R and retrieve the results of those commands?
>  This would require that I program the sequence of commands I
> want to use (or a means to generate them) and then be able parse
> the resulting structure - I understand. But it would also allow
> separation of the computation, the "statistical reasoning", and
> the UI into (potentially) separate units which would not even
> need to be on the same machine to inter-operate.  If there is a
> reasonable way to do this, please tell me.
>
> Thanks.
>
> Walter Johnston

A couple of my VisualWorks apps communicate via sockets with R.  I am
sending the code to Walter via private email.  If anyone else wants it,
just ask.

Jeff


From m1jjh00 at frb.gov  Thu Oct 20 19:31:10 2005
From: m1jjh00 at frb.gov (Jeffrey J. Hallman)
Date: Thu, 20 Oct 2005 13:31:10 -0400
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: Message from Byron Ellis <ellis@stat.harvard.edu> of "Wed,
	19 Oct 2005 19:47:06 PDT."
	<B565AFC7-CEEB-4606-BF84-B1D8F2D7A217@stat.harvard.edu> 
Message-ID: <20051020173110.E5D8C53583@mail.rsma.frb.gov>

>>>>> "b" == Byron Ellis <ellis at stat.harvard.edu> writes:
  b> On Oct 19, 2005, at 3:43 PM, Jeffrey J. Hallman wrote:
  >> If you're looking for a GUI toolkit that:
  >> 
  >> 1.  Is cross-platform,
  >> 2.  Has a good collection of widgets that look good on all  
  >> platforms, and
  >> 3.  Is easy to work with from R
  >> 
  >> then it is hopeless.  There is no such toolkit.

  b> There is in fact such a toolkit. I'll give you a hint, its name ends  
  b> in "step" and its heavily used under a different name by a company  
  b> named after a fruit. It works quite well from R, doesn't require  
  b> another language and frankly the binding between it and R was  
  b> actually pretty pleasant as these things go. By my count it took 2727  
  b> lines of C and 411 lines of R to bind, a good half of which are  
  b> technically unnecessary. Right now it probably doesn't run under  
  b> Windows and Linux/BSD/Solaris/Your Favorite POSIX Compliant UNIX at  
  b> the present time, but thats mostly because I don't care rather than  
  b> because it can't.

  >> 
  >> As one poster mentioned, most of the better GUI toolkits are very
  >> object-oriented, because that paradigm is a good fit for GUI  
  >> programming.
  >> There are a few programming environments out there that do have  
  >> nice GUI
  >> abilities, but they all use base languages that are not very R- 
  >> like, and so
  >> the potential R GUI programmer is faced with having to use two very  
  >> different
  >> languages for his creation.  And even if that obstacle is  
  >> surmounted, there

  b> This is only a problem because people seem to insist on using R's  
  b> object system in a way that is not actually very compatible with R's.  
  b> To misquote Robert at DSC, "their primary complaint about R is that  
  b> its not Java." If you think about it for a moment, R's environment is  
  b> actually quite well suited to GUI tasks because, well, because it has  
  b> environments. Imagine drawing into a window (you're a plotting tool  
  b> or something). Really, you're a function executing in an environment  
  b> (oh ho!) that has access to certain system resources, in this case a  
  b> canvas of a certain physical and logical dimension. Responding to  
  b> events could take on a similar structure---you're really executing in  
  b> an Event environment that has certain bound symbols. Obviously you  
  b> get to keep your lexical environment so event handlers that need to  
  b> share state can in the usual way. Its not particularly difficult and  
  b> doesn't even need to involve objects in any real way, except as  
  b> little stubby things with attributes you can modify or poll.

This is interesting.  However, I wonder how you can do GUI programming with
the current R single event loop. If an event comes in while some other code is
executing, do you interrupt, handle the event, and then resume?  Would not R
require major surgery to make it reentrant?  What if I want to display a screen
while continuing to do other stuff?  It seems to me that R would need
something like the S setReader/setMonitor stuff to run a GUI.

  >> remains the difficulty of trying to package up his work in such a  
  >> way as to
  >> make it easily installed by others.  Things are always breaking in the
  >> interfaces between R and whatever you're using.  Trying to keep it  
  >> all running
  >> and packaging it for deployment are thankless, gargantuan tasks.

  b> How is this different than releasing any piece of software?

If your software is all done in a single environment that already handles
cross-platform issues for you, it becomes much easier.  As an example, I had
Splus code that handled a lot of date arithmetic by calling C code.  I had to
use C because S6 is so slow.  When I ported to R, I found that R was fast
enough that I didn't need the C code.  As a result, I no longer have to build
a .so for Linux and a .dll for Windows.  In fact, I never could get the .dll
for Windows working.
 
  >> 
  >> There is a better way, and that is to give up on R.  Start over with
  >> a better programming environment, one that is object oriented, as  
  >> flexible and
  >> dynamic as R, is cross platform, easy to program in, and has decent  
  >> GUI
  >> facilities already.  Then port the stuff in R that does statistical
  >> programming, and you have the best of all worlds.
  >> 
  >> The environment I am thinking about is VisualWorks Smalltalk, which  
  >> is free
  >> for noncommercial use.  As a language, Smalltalk is both simpler  
  >> and more

  b> Did you just use the words "cross platform" and "VisualWorks  
  b> Smallktalk" in the same email? Have you ever used VisualWorks on  
  b> something other than Win32? I'd rather use Squeak. At least then I  
  b> know it'll have an equally childish interface on every platform.

I use VisualWorks on Linux (and before that, on Solaris) every day.  I've only
played around with it a bit on Windows.

  >> powerful than R, and the VM it runs on is much faster than the R  
  >> interpreter.

  b> Contrary to popular belief the speed of R's interpreter is rarely the  
  b> limiting factor to R's speed. People treating R like C is typically  
  b> the limiting factor. You have vector operations, USE THEM.

That's not always possible.  Even when it is, sometimes 'vectorized' code is
less readable than slower code that handles one element at a time.  I really
value readability.

  >> It has superior garbage collection and the best IDE in the business.
  >> Callouts to C are just as easy as they are in R, but would likely  
  >> not be
  >> needed as often due to the faster VM and much better programming  
  >> facilities.

  b> But not portable across Smalltalks. Whoops. Oh, and there's still a  
  b> helluva lot of Fortran code out there that nobody wants to port.

I used f2c on some LINPACK routines and did a bit of cosmetic cleanup by hand.
My experience porting about 12000 lines of Fortran to C with f2c was pretty good.

  >> Interfaces to various databases are possible, and the most powerful  
  >> web
  >> toolkit (Seaside) is written in Smalltalk and runs under VisualWorks.

  b> Because I spend all my time writing web shopping carts in R?

No, but you might want to do something like Statserver, or present real-time
statistical analysis of a live data feed over the web.

  >> 
  >> There are a couple of other Smalltalk environments around that  
  >> could also be
  >> considered.  Squeak is an open source cross-platform Smalltalk that  
  >> is not as
  >> fast as VisualWorks, but still must faster and more robust than the R
  >> interpreter.  Smalltalk/X is another possibility, though it works  
  >> only on
  >> Windows and Unix.
  >> 
  >> Think about it.  Once you have a basic math package that can handle  
  >> matrix
  >> programming and various mathematical functions, building the various
  >> statistical modeling tools on top of them is not that hard.  What  
  >> makes S and
  >> R so much better than SAS is their programmability.  Smalltalk is  
  >> like that,
  >> only better.
  >> 

  b> As it happens, I've thought about it. At length. To the point of  
  b> having images that actual test out the idea of implementing these  
  b> libraries whilst my simulations run in the background (we can discuss  
  b> the effects on my degree progress at a later date). Smalltalk has  
  b> some very clever features. I'm a particular fan of the notion that  
  b> "breakpoint" and "exception" aren't different things for example.  
  b> Unfortunately its also turns out that these "basic math packages"  
  b> are, in fact, quite difficult to do well especially when multiple  
  b> platforms are involved. For example, it took GSL 5 years to get to a  
  b> '1.0' release and its still using CBLAS, an even older piece of code,  
  b> to do most of its vector and matrix operations.

True enough, but you don't have to do everything.  In my work, I couldn't care
less about sparse matrices.  Bluebook S got a lot of mileage out just the QR
and SVD decompositions.  The ATLAS kind of optimizations are only necessary if
your work is very compute intensive and/or uses big matrices that don't fit into
the processors L2 cache.  With processor speed and memory increasing
exponentially every year, I just haven't found it worth spending hours of
programming time to save seconds of run time, especially since the run times
decline every year.

  b> Assuming you manage to pull that off (see you in 2010!) I'm still not  
  b> convinced it would work as most Smalltalks (Squeak especially) take  
  b> on a self-contained nature, meaning that they Don't Play Well With  
  b> Others. The only time *I* really use a GUI is when I'm preparing a  
  b> presentation or a paper in which case I need to be table to talk to  
  b> all manner of different pieces of software, something which is  
  b> generally ignored Smalltalk. At least with the current R GUIs I can,  
  b> you know, cut and paste. Sure, you can get Smalltalks to do this sort  
  b> of thing too, VisualWorks can do a fair amount though how well varies  
  b> widely with platform (hey! Just like R). Even better, the  
  b> programmatic interfaces vary from platform to platform and Smalltalk  
  b> to Smalltalk. I could continue, but I'm getting hungry---suffice it  
  b> to say that Smalltalk isn't some sort of panacea despite being a very  
  b> nice language, too much James Robertson for you.

I think we're talking about different domains here. I'm not an academic, and
most of the programs I write are used by others who are not programmers.  

As for not playing well with others, VisualWorks is very buzzword compliant.
Web Services, Corba, sockets, XML, ODBC, etc...   Perhaps your real objection
is to source code in the image rather than in files.  You might look at Store,
the VisualWorks code management facility that does version control and such
using relation databases as the back end.

  b> So, you've got a lot of work (implementing a robust scientific  
  b> library) ahead of you for dubious gains (a rich GUI, maybe a better  
  b> programming language and a whole raft of new problems). It seems like  
  b> the better idea would be to pull a Java and shameless hijack the  
  b> interesting bits from Smalltalk rather than go the other direction.

Too bad they missed most of the best bits.  R already has more of them than
Java does.


From thomas.friedrichsmeier at ruhr-uni-bochum.de  Thu Oct 20 20:06:54 2005
From: thomas.friedrichsmeier at ruhr-uni-bochum.de (Thomas Friedrichsmeier)
Date: Thu, 20 Oct 2005 20:06:54 +0200
Subject: [Rd] =?iso-8859-1?q?_=5BR-gui=5D_R_GUI_considerations_=28was=3A_R?=
	=?iso-8859-1?q?=2C_Wine=2C_=09and_multi-threadedness=29?=
Message-ID: <200510202006.54590.thomas.friedrichsmeier@ruhr-uni-bochum.de>

> Is there a "simple" way (e.g. some socket based mechanism) to
> feed commands into R and retrieve the results of those commands?
> This would require that I program the sequence of commands I
> want to use (or a means to generate them) and then be able parse
> the resulting structure - I understand. But it would also allow
> separation of the computation, the "statistical reasoning", and
> the UI into (potentially) separate units which would not even
> need to be on the same machine to inter-operate.  If there is a
> reasonable way to do this, please tell me.

You're roughly describing, how things are done in rkward 
(http://rkward.sourceforge.net). R and GUI do not run on different machines, 
not even in different processes. They run in separate threads, however, and 
there's a high level of separation between the two. There are probably 
similar implementations, which can be reused more easily in new projects. 
However, if you want to have a look at one possible way to do it, this 
documentation may be useful to you:

Usage perspective/overview:
http://rkward.sourceforge.net/development/en/documentation/api/UsingTheInterfaceToR.html

Main low level interface:
http://rkward.sourceforge.net/development/en/documentation/api/classREmbedInternal.html

Regards
Thomas Friedrichsmeier


From murdoch at stats.uwo.ca  Thu Oct 20 20:24:45 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu, 20 Oct 2005 14:24:45 -0400
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <200510201621.MAA07599@www20.ureach.com>
References: <200510201621.MAA07599@www20.ureach.com>
Message-ID: <4357E0ED.9070305@stats.uwo.ca>

On 10/20/2005 12:21 PM, Walter Johnston wrote:

> And the question:
> 
> Is there a "simple" way (e.g. some socket based mechanism) to
> feed commands into R and retrieve the results of those commands?
>  This would require that I program the sequence of commands I
> want to use (or a means to generate them) and then be able parse
> the resulting structure - I understand. But it would also allow
> separation of the computation, the "statistical reasoning", and
> the UI into (potentially) separate units which would not even
> need to be on the same machine to inter-operate.  If there is a
> reasonable way to do this, please tell me.

Take a look at the Writing R Extensions manual.  There are several 
levels at which you can interact with R.  The simplest is to act as a 
console, feeding text in and getting text out.  If you actually want to 
work with things as binary objects you'll need lower level access.  It's 
not that bad if you just want to write a function that gets passed R 
objects.  I don't think it be called "simple" if you want to do away 
with the console completely, and start working directly with the evaluator.

Duncan Murdoch


From murdoch at stats.uwo.ca  Thu Oct 20 20:45:06 2005
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Thu, 20 Oct 2005 20:45:06 +0200 (CEST)
Subject: [Rd] image() with all NAs fails (PR#8228)
Message-ID: <20051020184506.BA06F20C07@slim.kubism.ku.dk>

On 10/20/2005 12:41 PM, barry.rowlingson at gmail.com wrote:
> Full_Name: Barry Rowlingson
> Version: 2.2.0
> OS: Linux
> Submission from: (NULL) (194.80.32.8)
> 
> 
> The image function with a matrix of all NA values fails with:
> 
>> xyz=list(x=1:3,y=1:4,z=matrix(NA,3,4))
>> image(xyz)
> Error in image.default(xyz) : invalid z limits
> In addition: Warning messages:
> 1: no finite arguments to min; returning Inf
> 2: no finite arguments to max; returning -Inf
> 
> Image can handle any number of NAs as long as there is at least one data value:
> 
>> xyz=list(x=1:3,y=1:4,z=matrix(c(1,rep(NA,11)),3,4))
>> image(xyz)
> 
>  and shows NAs as transparent. However if it is all NAs then the z-limit
> calculation breaks down as above.
> 
>   It seems reasonable to me that image() with all NAs should produce a
> completely transparent/empty image (after displaying the axes if add!=TRUE) and
> not fail with an error.

I agree, though I think the warnings are reasonable and a fix shouldn't 
remove them.  However, I'm not sure what the fix should be.  There's a 
test in image.default

         if (any(!is.finite(zlim)) || diff(zlim) < 0)
             stop("invalid z limits")


that is throwing the error.  We want the error if a user specifies 
diff(zlim) < 0 or non-finite z limits, we just don't want it if all the 
z's are NA.  But a test all(is.na(z)) looks a bit expensive for such a 
rare case.

Maybe the solution is to document this limitation?  Users can get the 
all transparent image by explicitly specifying zlim.  Folks who might 
accidentally pass in all missing data can test for it themselves.

Duncan Murdoch


From ggrothendieck at gmail.com  Thu Oct 20 21:09:36 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 20 Oct 2005 15:09:36 -0400
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <200510201621.MAA07599@www20.ureach.com>
References: <200510201621.MAA07599@www20.ureach.com>
Message-ID: <971536df0510201209r16ea3e01v390eecaf4d19aaee@mail.gmail.com>

On 10/20/05, Walter Johnston <walterj at ureach.com> wrote:
>
> Is there a "simple" way (e.g. some socket based mechanism) to
> feed commands into R and retrieve the results of those commands?
>  This would require that I program the sequence of commands I
> want to use (or a means to generate them) and then be able parse
> the resulting structure - I understand. But it would also allow
> separation of the computation, the "statistical reasoning", and
> the UI into (potentially) separate units which would not even
> need to be on the same machine to inter-operate.  If there is a
> reasonable way to do this, please tell me.

See ?make.socket for R's socket routines.  Also in addition to the
socket routines in R itself, the tcltk package supports sockets
and those can be used even if you don't intend to use the tk user
interface.  The rpad package and the svSocket package both make
use of that.


From cberry at tajo.ucsd.edu  Thu Oct 20 21:44:01 2005
From: cberry at tajo.ucsd.edu (Charles C. Berry)
Date: Thu, 20 Oct 2005 12:44:01 -0700
Subject: [Rd] md5sum for R-2.2.0-win32.exe ??
Message-ID: <Pine.LNX.4.63.0510201231270.9811@tajo.ucsd.edu>


I get

 	c1279b77fcccf40379f59a83523a440e *R-2.2.0-win32.exe

but I see

 	e8bdf765fe8013129045314c8e2605fd *rw2011.exe

on several USA  mirrors.

I hope the latter is merely in need of a replacement and not an 
indication of a problem with the web sites.

Chuck

Charles C. Berry                        (858) 534-2098
                                          Dept of Family/Preventive Medicine
E mailto:cberry at tajo.ucsd.edu	         UC San Diego
http://biostat.ucsd.edu/~cberry/         La Jolla, San Diego 92093-0717


From Nitin.Jain at pfizer.com  Thu Oct 20 21:28:51 2005
From: Nitin.Jain at pfizer.com (Jain, Nitin)
Date: Thu, 20 Oct 2005 15:28:51 -0400
Subject: [Rd] Error in building package indices
Message-ID: <657D11942721774D8BE305439F3E8E5801653246@groamrexm01.amer.pfizer.com>

Dear R-devel members,

We are building a new package (GeneticsBase) for analysis of genetic data . 
While doing "R CMD check with R-2.1.1,  I am getting the following error:

** building package indices ...
Error in "colnames<-"(`*tmp*`, value = c("family", "pid", "father",
"mother",  :
        length of 'dimnames' [2] not equal to array extent
Execution halted
ERROR: installing package indices failed
 ERROR
Installation failed.

We believe that this could be due to package versioning, but are not sure.

Any help is appreciated.

Thanks.

Best,
Nitin
______________________
Nitin Jain, PhD
<nitin.jain at pfizer.com>
Non Clinical Statistics
Pfizer, Inc. (Groton, CT)
Bldg: 260, # 1451
Ph:  (860) 686-2526 (Office)
Fax: (860) 686-6170


----------------------------------------------------------------------
LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}


From murdoch at stats.uwo.ca  Thu Oct 20 22:53:35 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu, 20 Oct 2005 16:53:35 -0400
Subject: [Rd] md5sum for R-2.2.0-win32.exe ??
In-Reply-To: <Pine.LNX.4.63.0510201231270.9811@tajo.ucsd.edu>
References: <Pine.LNX.4.63.0510201231270.9811@tajo.ucsd.edu>
Message-ID: <435803CF.9000706@stats.uwo.ca>

On 10/20/2005 3:44 PM, Charles C. Berry wrote:
> I get
> 
>  	c1279b77fcccf40379f59a83523a440e *R-2.2.0-win32.exe
> 
> but I see
> 
>  	e8bdf765fe8013129045314c8e2605fd *rw2011.exe
> 
> on several USA  mirrors.
> 
> I hope the latter is merely in need of a replacement and not an 
> indication of a problem with the web sites.

No, that was my error.  It's fixed now, and my md5sum agrees with yours.

Duncan Murdoch


From ripley at stats.ox.ac.uk  Thu Oct 20 22:56:20 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 20 Oct 2005 21:56:20 +0100 (BST)
Subject: [Rd] image() with all NAs fails (PR#8228)
In-Reply-To: <20051020184506.BA06F20C07@slim.kubism.ku.dk>
References: <20051020184506.BA06F20C07@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.61.0510202140010.7016@gannet.stats>

On Thu, 20 Oct 2005 murdoch at stats.uwo.ca wrote:

> On 10/20/2005 12:41 PM, barry.rowlingson at gmail.com wrote:
>> Full_Name: Barry Rowlingson
>> Version: 2.2.0
>> OS: Linux
>> Submission from: (NULL) (194.80.32.8)
>>
>>
>> The image function with a matrix of all NA values fails with:
>>
>>> xyz=list(x=1:3,y=1:4,z=matrix(NA,3,4))
>>> image(xyz)
>> Error in image.default(xyz) : invalid z limits
>> In addition: Warning messages:
>> 1: no finite arguments to min; returning Inf
>> 2: no finite arguments to max; returning -Inf
>>
>> Image can handle any number of NAs as long as there is at least one data value:
>>
>>> xyz=list(x=1:3,y=1:4,z=matrix(c(1,rep(NA,11)),3,4))
>>> image(xyz)
>>
>>  and shows NAs as transparent. However if it is all NAs then the z-limit
>> calculation breaks down as above.
>>
>>   It seems reasonable to me that image() with all NAs should produce a
>> completely transparent/empty image (after displaying the axes if add!=TRUE) and
>> not fail with an error.
>
> I agree, though I think the warnings are reasonable and a fix shouldn't
> remove them.  However, I'm not sure what the fix should be.  There's a
> test in image.default
>
>         if (any(!is.finite(zlim)) || diff(zlim) < 0)
>             stop("invalid z limits")
>
>
> that is throwing the error.  We want the error if a user specifies
> diff(zlim) < 0 or non-finite z limits, we just don't want it if all the
> z's are NA.  But a test all(is.na(z)) looks a bit expensive for such a
> rare case.

It is not actually documented that zlim can be omitted (something we need 
to fix too).  Why not just add a check for zlim not being missing to that 
test?


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Thu Oct 20 23:39:19 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 20 Oct 2005 22:39:19 +0100 (BST)
Subject: [Rd] Error in building package indices
In-Reply-To: <657D11942721774D8BE305439F3E8E5801653246@groamrexm01.amer.pfizer.com>
References: <657D11942721774D8BE305439F3E8E5801653246@groamrexm01.amer.pfizer.com>
Message-ID: <Pine.LNX.4.61.0510202234110.8052@gannet.stats>

There is not much context here, but it seems this is whilst trying to do 
an install.  I would expect R CMD INSTALL to fail in the same place.

It appears to indicate a bug in one of your datasets.

On Thu, 20 Oct 2005, Jain, Nitin wrote:

> Dear R-devel members,
>
> We are building a new package (GeneticsBase) for analysis of genetic data .
> While doing "R CMD check with R-2.1.1,  I am getting the following error:
>
> ** building package indices ...
> Error in "colnames<-"(`*tmp*`, value = c("family", "pid", "father",
> "mother",  :
>        length of 'dimnames' [2] not equal to array extent
> Execution halted
> ERROR: installing package indices failed
> ERROR
> Installation failed.
>
> We believe that this could be due to package versioning, but are not sure.

Not sure what you mean here.  No versioning is being used by R CMD check.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ehlers at math.ucalgary.ca  Thu Oct 20 23:46:20 2005
From: ehlers at math.ucalgary.ca (ehlers@math.ucalgary.ca)
Date: Thu, 20 Oct 2005 23:46:20 +0200 (CEST)
Subject: [Rd] plot.TukeyHSD (PR#8229)
Message-ID: <20051020214620.AC29A20C07@slim.kubism.ku.dk>

Full_Name: Peter Ehlers
Version: "R version 2.2.0, 2005-10-19"
OS: Windows XP
Submission from: (NULL) (136.159.71.162)


The newly added column of adjusted p-values in TukeyHSD output causes a problem
with plotting the confidence intervals; an extraneous vertical line segment is
plotted. 

plot.TukeyHSD expects a list of n-by-3 matrices. These are now n-by-4.

Suggested fix:
Replace:
plot.TukeyHSD <- function (x, ...)
{
    for (i in seq(along = x)) {
        xi <- x[[i]]

with:
plot.TukeyHSD <- function (x, ...)
{
    for (i in seq(along = x)) {
        xi <- x[[i]]
        xi <- xi[, -4]

I apologize if this is a known bug; I didn't see anything in my search.

Peter


From p.dalgaard at biostat.ku.dk  Fri Oct 21 00:05:06 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 21 Oct 2005 00:05:06 +0200
Subject: [Rd] md5sum for R-2.2.0-win32.exe ??
In-Reply-To: <Pine.LNX.4.63.0510201231270.9811@tajo.ucsd.edu>
References: <Pine.LNX.4.63.0510201231270.9811@tajo.ucsd.edu>
Message-ID: <x2br1jone5.fsf@turmalin.kubism.ku.dk>

"Charles C. Berry" <cberry at tajo.ucsd.edu> writes:

> I get
> 
>  	c1279b77fcccf40379f59a83523a440e *R-2.2.0-win32.exe
> 
> but I see
> 
>  	e8bdf765fe8013129045314c8e2605fd *rw2011.exe
> 
> on several USA  mirrors.
> 
> I hope the latter is merely in need of a replacement and not an 
> indication of a problem with the web sites.

Are you saying that you'd expect different versions of R to have the
same md5sum?... ;-)

CRAN master has the old md5sum.txt as well, so I guess that the
Windows maintainer just forgot to update it.

Incidentally, I don't think it's all that smart to have the md5sum
in the same location as the binary. If one is tampered with, the other
one could be too. For the main release, I always send the md5sums via
the mailing lists.

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From sfalcon at fhcrc.org  Fri Oct 21 00:46:20 2005
From: sfalcon at fhcrc.org (Seth Falcon)
Date: Thu, 20 Oct 2005 15:46:20 -0700
Subject: [Rd] UML + R
Message-ID: <m2oe5j6c3n.fsf@macaroni.local>

Hi all,

I'm considering building some tools to generate UML diagrams of R
packages.  

Q: Does anyone know of existing R code that does UML-ish stuff?


Thanks,

+ seth


From Robert.McGehee at geodecapital.com  Fri Oct 21 00:58:20 2005
From: Robert.McGehee at geodecapital.com (Robert.McGehee@geodecapital.com)
Date: Fri, 21 Oct 2005 00:58:20 +0200 (CEST)
Subject: [Rd] read.table error upon package installation (PR#8230)
Message-ID: <20051020225820.B812F20C08@slim.kubism.ku.dk>

Upon upgrading to R 2.2.0 on my Windows box, I found that one of my
packages no longer compiled, giving this error:

Error in read.table(zfile, header =3D TRUE) :
	more columns than column names
Execution halted

After removing every line of code from my package and still not being
able to compile it, I found the error to be related to a .txt file in my
data directory. I reduced my data file to a very simple example which
causes the error, and a nearly identical file which does not cause the
problem.

A file with these contents causes the error (I am using \t to indicate
the usual tab delimiter).
x	\t	y
A B C	\t	DEF

However, if I remove one of the spaces between A and B or B and C, the
package compiles fine:
x	\t	y
A BC	\t	DEF

I can only guess that there is some kind of parsing problem when there
is more than one space between tab delimiters.

Robert

> version
         _             =20
platform i386-pc-mingw32
arch     i386          =20
os       mingw32       =20
system   i386, mingw32 =20
status                 =20
major    2             =20
minor    2.0           =20
year     2005          =20
month    10            =20
day      06            =20
svn rev  35749         =20
language R        =20

This e-mail, and any attachments hereto, are intended for us...{{dropped}}


From ggrothendieck at gmail.com  Fri Oct 21 01:48:56 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Thu, 20 Oct 2005 19:48:56 -0400
Subject: [Rd] UML + R
In-Reply-To: <m2oe5j6c3n.fsf@macaroni.local>
References: <m2oe5j6c3n.fsf@macaroni.local>
Message-ID: <971536df0510201648q7eb42d06ub9eae6c5137a3a3f@mail.gmail.com>

The proto package can draw object inheritance diagrams.

On 10/20/05, Seth Falcon <sfalcon at fhcrc.org> wrote:
> Hi all,
>
> I'm considering building some tools to generate UML diagrams of R
> packages.
>
> Q: Does anyone know of existing R code that does UML-ish stuff?
>
>
> Thanks,
>
> + seth
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From murdoch at stats.uwo.ca  Fri Oct 21 02:04:34 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu, 20 Oct 2005 20:04:34 -0400
Subject: [Rd] image() with all NAs fails (PR#8228)
In-Reply-To: <Pine.LNX.4.61.0510202140010.7016@gannet.stats>
References: <20051020184506.BA06F20C07@slim.kubism.ku.dk>
	<Pine.LNX.4.61.0510202140010.7016@gannet.stats>
Message-ID: <43583092.9050600@stats.uwo.ca>

Prof Brian Ripley wrote:
> On Thu, 20 Oct 2005 murdoch at stats.uwo.ca wrote:
> 
> 
>>On 10/20/2005 12:41 PM, barry.rowlingson at gmail.com wrote:
>>
>>>Full_Name: Barry Rowlingson
>>>Version: 2.2.0
>>>OS: Linux
>>>Submission from: (NULL) (194.80.32.8)
>>>
>>>
>>>The image function with a matrix of all NA values fails with:
>>>
>>>
>>>>xyz=list(x=1:3,y=1:4,z=matrix(NA,3,4))
>>>>image(xyz)
>>>
>>>Error in image.default(xyz) : invalid z limits
>>>In addition: Warning messages:
>>>1: no finite arguments to min; returning Inf
>>>2: no finite arguments to max; returning -Inf
>>>
>>>Image can handle any number of NAs as long as there is at least one data value:
>>>
>>>
>>>>xyz=list(x=1:3,y=1:4,z=matrix(c(1,rep(NA,11)),3,4))
>>>>image(xyz)
>>>
>>> and shows NAs as transparent. However if it is all NAs then the z-limit
>>>calculation breaks down as above.
>>>
>>>  It seems reasonable to me that image() with all NAs should produce a
>>>completely transparent/empty image (after displaying the axes if add!=TRUE) and
>>>not fail with an error.
>>
>>I agree, though I think the warnings are reasonable and a fix shouldn't
>>remove them.  However, I'm not sure what the fix should be.  There's a
>>test in image.default
>>
>>        if (any(!is.finite(zlim)) || diff(zlim) < 0)
>>            stop("invalid z limits")
>>
>>
>>that is throwing the error.  We want the error if a user specifies
>>diff(zlim) < 0 or non-finite z limits, we just don't want it if all the
>>z's are NA.  But a test all(is.na(z)) looks a bit expensive for such a
>>rare case.
> 
> 
> It is not actually documented that zlim can be omitted (something we need 
> to fix too).  Why not just add a check for zlim not being missing to that 
> test?

Works fine, thanks for the suggestion.  I'll commit if you haven't already.

Duncan Murdoch

Duncan


From ellis at stat.harvard.edu  Fri Oct 21 03:56:25 2005
From: ellis at stat.harvard.edu (Byron Ellis)
Date: Thu, 20 Oct 2005 18:56:25 -0700
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <200510201621.MAA07599@www20.ureach.com>
References: <200510201621.MAA07599@www20.ureach.com>
Message-ID: <02E2EFCA-B442-424D-88CE-7F985142E2F5@stat.harvard.edu>


On Oct 20, 2005, at 9:21 AM, Walter Johnston wrote:

>
> And the question:
>
> Is there a "simple" way (e.g. some socket based mechanism) to
> feed commands into R and retrieve the results of those commands?
>  This would require that I program the sequence of commands I
> want to use (or a means to generate them) and then be able parse
> the resulting structure - I understand. But it would also allow
> separation of the computation, the "statistical reasoning", and
> the UI into (potentially) separate units which would not even
> need to be on the same machine to inter-operate.  If there is a
> reasonable way to do this, please tell me.
>


Yes, we had this discussion over two years ago:

https://stat.ethz.ch/pipermail/r-sig-gui/2003-April/000102.html

What StatPaper and RKWard do is start up a child R process that  
enters a server mode for exchanging information. StatPaper managed to  
pull off transmitting both text and graphics to render on the client  
side via OpenMath, which worked pretty damn well except for a couple  
of things:

1) Ideally I'd prefer to be running in a "kernel mode" rather than  
loading up an R packages. I don't recall exactly what the problem  
was, but I seem to recall weird things would happen occasionally.  
These days it would be pretty easy to implement a different front end  
that passed everything through an OpenMath socket (it uses UNIX or  
TCP sockets) but otherwise behaved as a Console. This is more or less  
analogous to what Mathematica does. Essentially an extension of the  
ESS mode.  R KERNEL anyone?

2) As was mentioned a couple of days in a different thread, extending  
the idea of I/O streams to event streams would be a nice thing. For  
example, instead of fixed-field formatting a table for your ANOVA you  
would actually "print" a table and leave the rendering of that table  
up to the front end. You could do this now by changing the print  
generic for everything, but doing it at the connection level seems  
somehow nicer. It also means that you can tell errors from output,  
which is a nice thing to have (StatPaper did this by wrapping  
everything in a "try" block. Warnings were a little tougher though)

3) StatPaper tended to bog down a bit during complex graphics  
(scatterplot of 100,000 points or something) because it had to  
serialize everything over the write and did so by mimicking R's  
internal graphics. I'm told that this actually worked quite well on  
dual processor machines, but on my iBook it was a bit slow.


---
Byron Ellis (ellis at stat.harvard.edu)
"Oook" -- The Librarian


From murdoch at stats.uwo.ca  Fri Oct 21 03:59:32 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu, 20 Oct 2005 21:59:32 -0400
Subject: [Rd] md5sum for R-2.2.0-win32.exe ??
In-Reply-To: <x2br1jone5.fsf@turmalin.kubism.ku.dk>
References: <Pine.LNX.4.63.0510201231270.9811@tajo.ucsd.edu>
	<x2br1jone5.fsf@turmalin.kubism.ku.dk>
Message-ID: <43584B84.10201@stats.uwo.ca>

Peter Dalgaard wrote:
> "Charles C. Berry" <cberry at tajo.ucsd.edu> writes:
> 
> 
>>I get
>>
>> 	c1279b77fcccf40379f59a83523a440e *R-2.2.0-win32.exe
>>
>>but I see
>>
>> 	e8bdf765fe8013129045314c8e2605fd *rw2011.exe
>>
>>on several USA  mirrors.
>>
>>I hope the latter is merely in need of a replacement and not an 
>>indication of a problem with the web sites.
> 
> 
> Are you saying that you'd expect different versions of R to have the
> same md5sum?... ;-)
> 
> CRAN master has the old md5sum.txt as well, so I guess that the
> Windows maintainer just forgot to update it.

That was part of it.  However, the md5sum.txt wasn't being built 
properly either.

> Incidentally, I don't think it's all that smart to have the md5sum
> in the same location as the binary. If one is tampered with, the other
> one could be too. For the main release, I always send the md5sums via
> the mailing lists.

Well, the bad file was online for two weeks before anyone noticed, so 
I'm not sure everyone is being diligent in checking it.

Duncan Murdoch


From stoffer at pitt.edu  Fri Oct 21 04:16:23 2005
From: stoffer at pitt.edu (stoffer@pitt.edu)
Date: Fri, 21 Oct 2005 04:16:23 +0200 (CEST)
Subject: [Rd] Error in arima reporting (PR#8231)
Message-ID: <20051021021623.C8B23BB72@slim.kubism.ku.dk>

When arima is used to fit a time series, the output gives an 
estimate of the mean of the series, but calls it the intercept.

For example, if x(t) = a + b x(t-1) + w(t) is a stationary AR(1)
and w(t) is white noise, then mu = a + b mu, or a = mu (1-b),
where mu = E(x(t)).  Unless b=0, the mean mu and the intercept a 
are not the same.  Here's a quick R example:

 > x = arima.sim(list(order=c(1,0,0), ar=.9), n=100) + 10
 > arima(x, order = c(1, 0, 0))

Coefficients:
          ar1  intercept
       0.8704     9.8067
s.e.  0.0496     0.6729

So x is an AR(1) with mean 10.  The "intercept" estimate
in this example should be 9.8067*(1-.8704).  Either change the 
output to read "mean" instead of "intercept", or report the 
intercept instead of the mean.

Thanks-
David

-- 


-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-
David S. Stoffer
Department of Statistics
University of Pittsburgh
Pittsburgh, PA  15260

phone: [412] 624-8496
   fax: [412] 648-8814
email: stoffer at pitt.edu
   web: http://www.stat.pitt.edu/stoffer
voice: hey dave


From wettenhall at wehi.EDU.AU  Fri Oct 21 06:46:48 2005
From: wettenhall at wehi.EDU.AU (James Wettenhall)
Date: Fri, 21 Oct 2005 14:46:48 +1000 (EST)
Subject: [Rd] [R-gui]   R GUI considerations (was: R, Wine,
 and multi-threadedness)
In-Reply-To: <Pine.LNX.4.63.0510201511480.1085@kleigh.nl>
References: <20051019224346.66B1D53585@mail.rsma.frb.gov>   
	<37E16860-F4A0-436A-8C6F-9990C15274CE@stat.ucla.edu>   
	<Pine.LNX.4.63.0510200126430.1082@kleigh.nl>
	<36467.192.168.97.37.1129784906.squirrel@homebase.wehi.edu.au>
	<Pine.LNX.4.63.0510201511480.1085@kleigh.nl>
Message-ID: <37266.192.168.97.37.1129870008.squirrel@homebase.wehi.edu.au>

Hi again,

Peter Kleiweg wrote:
> To me, it does not make sense. When I have to work with
> something like Word, I am intimidated by lots of buttons with
> cryptic icons, with menus and submenus I can't make heads or
> tails of, the program doing weird things with my text I don't
> understand. A simple, friendly prompt is much more inviting.
> Give me a well-organised documentation, and let me do my thing.

I feel the same way.  But a typical member of the target audience for my
GUIs is certainly not someone like you or me (although occasionally I put
features into a GUI which can protect me against making some of the
mistakes I typically make at the command-line).  A typical member of my
target audience is someone who is highly intelligent, but has never heard
of a command-line interface, and would find it quite intimidating.  I'm
certainly not claiming that you are one of those people, but if you like,
I can introduce you to plenty of people like that.

> A GUI fits in a big-is-better marketing strategy. The more
> intimidating a GUI looks, the better.

I disagree.  I don't try to compete with the intimidating commercial GUIs.
My academic-style GUIs don't look and feel as professional as commercial
GUIs, but I give the user a choice.  Do you want to pay $5,000 per user
per year for commercial software to analyze your data, or do you want to
try using Bioconductor's command-line interface yourself (an idea they
will very quickly shy away from), or do you want someone else to analyze
your data for you or do you want access to the latest high-quality
statistical methods in Bioconductor via our GUI without paying any money
for a commercial license and without having to be intimidated by the
command-line interface?

When we first started distributing our GUIs, we were unsure whether we
would get more requests for new buttons / new features or more requests
for a less-intimidating set of menus/buttons, or possibly a "novice mode"
where lots of default values are used automatically without asking the
user, so that the data analysis workflow feels simpler.  Almost all
requests have been for more features, rather than complaints from people
who are intimidated or overwhelmed by too many choices.  But nevertheless,
I still think it is a good idea to have a "novice mode" in a GUI, with
less menu items, less buttons, less dialogs, with the understanding that a
number of default values are decided upon automatically without
consultation with the user.

> As a user, I always feel a
> prisoner of such monstrosities. Hundreds of options, but I
> cannot find the ones I actually need, with no possibility to use
> other software tools as auxiliaries.

Understood.  But as I said, you are not a typical member of the target
audience my GUIs are written for.  Neither am I.

> I find, the biggest problems with operating on large and complex
> sets of data (like you do in R), are things like digitisation of
> the data, preparation, transformation, selection. You usually
> have to do quite some work on the data before you have something
> R can handle.

Certainly most of the email questions we get from strangers about using
our GUIs are about how to get started e.g. rather than using a standard
raw data format which our GUI knows how to read, they have tried to
preprocess the files themselves in Excel or equivalent (unnecessarily), so
then we have to tell them "Please read our input-file-format
documentation!  Please don't mess with the standard raw data formats!" 
Then once they get started with the analysis, they are generally very
happy.  And we can try to improve our requried-input-file-format
documentation after getting their feedback.

> This preparation is best done with the tools you
> feel comfortable with, a simple editor, shell scripts, Perl,
> make, etc.

Again, it sounds like we are talk about a different class of users /
target audience.  My users certainly wouldn't know how to write a shell
script or use Perl or make.  But they do want to be able to analyze their
own data, and try different normalization methods and see the effects
graphically, rather than just sending off their data to a statistician.

> Once you have your data prepared, invoking another
> command through the command line is a small step. You can go
> forward and backward, doing data preparation and processing the
> prepared data with something like R, iteratively. Look at GRASS
> as an excellent example.

That's why we like writing GUIs for R, rather than just encouraging people
to use proprietary commercial GUIs.  If they use a commercial GUI, and
they want something a little different from what the commercial GUI can
do, there is often very little we can do for them.  But with an R GUI, you
can provide a way for the user to dump out an .RData file or equivalent,
so that if they need something which the GUI currently cannot do, then the
statistician can do some command-line operations on their .RData file and
send them back some graphs to put into their PowerPoint slides or an
updated .RData file they can continue using in the GUI or whatever.  I've
certainly done this for some users and they have been very pleased with
the results.  For other users, I have actually added new buttons / menu
items to the GUI very quickly in response to their requests for features
not currently available.

> You want all the preprocessing done in a GUI? I don't see how
> that is possible in a way that makes sense. How do you tell the
> GUI what your raw data looks like? How do you tell it to prepare
> the data for processing by R? Does the user have to learn the
> GUI's own scripting language and filters?

No, the user is not expected to learn any scripting language.  I think it
would be very difficult to write a general GUI for all types of data
analysis in R.  But we are focusing on very specific classes of data, e.g.
gene expression microarray data, where most people are using some very
well-known, well-documented raw data formats.  Gradually the developer can
add support for more raw data formats to the GUI, but sometimes the
developer receives a request for supporting a data format which is so
obscure that it is not worth the GUI developer's time to implement it so
we can just say "Sorry, you'll have to collaborate with a statistician who
can do your analysis at the command-line, unless you want to learn the
command-line interface yourself."

> If you want users to be productive, you have to give them
> something they can easily incorporate within the tools they use
> on a daily basis.

I have no objection to software developers writing Visual Basic macros for
Excel or webservers with familiar-looking HTML forms if that's what they
want.  But in our case, we want them to use something closely related to
the tools that WE use on a daily basis (not just what THEY use), because
if they develop a need for a customization - something out of the
ordinary, it is going to be much easier for us to fulfill their special
request using a command-line analysis if they are using R (either directly
at the command-line interface or via a GUI), than if they are using an
expensive proprietary commercial system.  And just to clarify, I'm not
talking about things like Microsoft Office which they would have anyway,
I'm talking about scientists deciding whether to spend thousands of
dollars on commercial software for very specific types of data analysis
starting with well-documented raw data formats or whether to use our free
software instead.

> No big applications with everything locked in,
> but a set of programs or commands that do specific tasks, with
> an easy to understand input and output. You need something that
> works in an open environment, so the user can use existing
> skills. With a GUI that does "everything", the user has to learn
> from scratch all the things that make "everything" happen.

I certainly don't think talking about at GUI for R that does "everything"
is realistic, and I have never considered doing that.  I'm happy to admit
that my GUIs have limitations in terms of what the users can do by
point-and-click, but for the advanced user (or for a collaborating
statistician who can take .RData files saved from their GUI analysis),
there are ways of switching from GUI analysis to command-line analysis
when really necessary, so in a way, an R-GUI _can_ do "everything", but it
just can't do everything in a user-friendly way, and doesn't want to try
to do that, because that would mean a completely intimidating collection
of menus and buttons (which is how some people feel about Microsoft
Office).

We may have to agree to disagree about some things, but I hope this has
made my point of view a little clearer.

Best wishes,
James


From ripley at stats.ox.ac.uk  Fri Oct 21 07:57:30 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 21 Oct 2005 07:57:30 +0200 (CEST)
Subject: [Rd] read.table error upon package installation (PR#8230)
Message-ID: <20051021055730.CB454205F3@slim.kubism.ku.dk>

What is the R error here?

The default delimiter in read.table is not \t but whitespace, so the first 
example has 2 and 3 rows (fine for header=T) and the second has 2 and 4 
rows.

On Fri, 21 Oct 2005 Robert.McGehee at geodecapital.com wrote:

> Upon upgrading to R 2.2.0 on my Windows box, I found that one of my
> packages no longer compiled, giving this error:
>
> Error in read.table(zfile, header =3D TRUE) :
> 	more columns than column names
> Execution halted
>
> After removing every line of code from my package and still not being
> able to compile it, I found the error to be related to a .txt file in my
> data directory. I reduced my data file to a very simple example which
> causes the error, and a nearly identical file which does not cause the
> problem.
>
> A file with these contents causes the error (I am using \t to indicate
> the usual tab delimiter).
> x	\t	y
> A B C	\t	DEF
>
> However, if I remove one of the spaces between A and B or B and C, the
> package compiles fine:
> x	\t	y
> A BC	\t	DEF
>
> I can only guess that there is some kind of parsing problem when there
> is more than one space between tab delimiters.

Looks more like a user misunderstanding of ?data.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Fri Oct 21 09:36:34 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 21 Oct 2005 09:36:34 +0200 (CEST)
Subject: [Rd] read.fwf doesn't work with header = TRUE (PR#8226)
Message-ID: <20051021073634.300C88661@slim.kubism.ku.dk>

On Thu, 20 Oct 2005 Emmanuel.Paradis at mpl.ird.fr wrote:

> Full_Name: Emmanuel Paradis
> Version: 2.1.1
> OS: Linux
> Submission from: (NULL) (193.49.41.105)
>
>
> read.fwf(..., header = TRUE) does not work properly since:
>
> 1/ the original header is printed on the console and not in FILE;
> 2/ the different 'parts' of the header should be separated with tabs
>   to work with the call to read.table.
>
> Here is a suggested fix for src/library/utils/R/read.fwf.R:
>
> 38c38,40
> <         cat(FILE, headerline, "\n")
> ---
>>         headerline <- unlist(strsplit(headerline, " {1,}"))
>>         headerline <- paste(headerline, collapse = "\t")
>>         cat(file = FILE, headerline, "\n")

Thanks, but I don't think that is right.  It assumes the header line is 
space-delimited (or at least that spaces get converted to tabs).  We have 
not specified the format of the header line, and it cannot usefully be 
fixed format.  So I think we need to specify it is delimited by 'sep'
(not tab).


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From gbonafe at arpa.emr.it  Fri Oct 21 15:08:12 2005
From: gbonafe at arpa.emr.it (gbonafe@arpa.emr.it)
Date: Fri, 21 Oct 2005 15:08:12 +0200 (CEST)
Subject: [Rd] read.fwf(...,header=TRUE,...) (PR#8236)
Message-ID: <20051021130812.91B731C716@slim.kubism.ku.dk>

Full_Name: Giovanni Bonafe'
Version: 2.2.0
OS: Linux
Submission from: (NULL) (195.62.164.225)


If the file "example.dat" is like this:

aaa bbb ccc
3.4 1.2 5.6
4.6 10  32
667 343 1.7

With the older 1.9.1, as expected:

> data<-read.fwf(file = "example.dat",widths=c(3,4,4),header=TRUE)
> data
    aaa   bbb  ccc
1   3.4   1.2  5.6
2   4.6  10.0 32.0
3 667.0 343.0  1.7

While with the newer 2.2.0:

> data<-read.fwf(file = "example.dat",widths=c(3,4,4),header=TRUE)
> data
   X3.4 X1.2 X5.6
1   4.6   10 32.0
2 667.0  343  1.7

On the other side, if I use the option header=FALSE, no difference occurs
between the two versions:

> data<-read.fwf(file = "example.dat",widths=c(3,4,4))
> data
   V1   V2   V3
1 aaa  bbb  ccc
2 3.4  1.2  5.6
3 4.6  10    32
4 667  343  1.7


From Robert.McGehee at geodecapital.com  Fri Oct 21 15:21:51 2005
From: Robert.McGehee at geodecapital.com (McGehee, Robert)
Date: Fri, 21 Oct 2005 09:21:51 -0400
Subject: [Rd] read.table error upon package installation (PR#8230)
Message-ID: <67DCA285A2D7754280D3B8E88EB548020C9466E8@MSGBOSCLB2WIN.DMN1.FMR.COM>

Thanks for this. 

I tried switching the file extension from txt to tab, but it seems to
still split on whitespace rather than tabs.

My goal is to create a file that is both readable by R and by a
spreadsheet program, and that may contain white spaces. If tab-delimited
separation is not currently supported on load time, a CSV file would
also be a natural candidate. Unfortunately for me, it seems that R
expects the CSV file in the 'data' subdirectory to be delimited by
semi-colons rather than commas (which seems odd and might be worthy of
mention in the Writing R Extensions Manual), and the particular
spread-sheet program I use uses commas to delimit CSV files. So, then, I
think that I will be unable to use 'data' subdirectory to load this data
using data(), but any feedback on this is welcomed.

Thanks,
Robert


-----Original Message-----
From: ripley at stats.ox.ac.uk [mailto:ripley at stats.ox.ac.uk] 
Sent: Friday, October 21, 2005 1:58 AM
To: r-devel at stat.math.ethz.ch
Cc: R-bugs at biostat.ku.dk
Subject: Re: [Rd] read.table error upon package installation (PR#8230)


What is the R error here?

The default delimiter in read.table is not \t but whitespace, so the
first 
example has 2 and 3 rows (fine for header=T) and the second has 2 and 4 
rows.

On Fri, 21 Oct 2005 Robert.McGehee at geodecapital.com wrote:

> Upon upgrading to R 2.2.0 on my Windows box, I found that one of my
> packages no longer compiled, giving this error:
>
> Error in read.table(zfile, header =3D TRUE) :
> 	more columns than column names
> Execution halted
>
> After removing every line of code from my package and still not being
> able to compile it, I found the error to be related to a .txt file in
my
> data directory. I reduced my data file to a very simple example which
> causes the error, and a nearly identical file which does not cause the
> problem.
>
> A file with these contents causes the error (I am using \t to indicate
> the usual tab delimiter).
> x	\t	y
> A B C	\t	DEF
>
> However, if I remove one of the spaces between A and B or B and C, the
> package compiles fine:
> x	\t	y
> A BC	\t	DEF
>
> I can only guess that there is some kind of parsing problem when there
> is more than one space between tab delimiters.

Looks more like a user misunderstanding of ?data.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

______________________________________________
R-devel at r-project.org mailing list
https://stat.ethz.ch/mailman/listinfo/r-devel


From ripley at stats.ox.ac.uk  Fri Oct 21 15:58:35 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 21 Oct 2005 14:58:35 +0100 (BST)
Subject: [Rd] read.table error upon package installation (PR#8230)
In-Reply-To: <67DCA285A2D7754280D3B8E88EB548020C9466E8@MSGBOSCLB2WIN.DMN1.FMR.COM>
References: <67DCA285A2D7754280D3B8E88EB548020C9466E8@MSGBOSCLB2WIN.DMN1.FMR.COM>
Message-ID: <Pine.LNX.4.61.0510211457370.1092@gannet.stats>

On Fri, 21 Oct 2005, McGehee, Robert wrote:

> Thanks for this.
>
> I tried switching the file extension from txt to tab, but it seems to
> still split on whitespace rather than tabs.
>
> My goal is to create a file that is both readable by R and by a
> spreadsheet program, and that may contain white spaces. If tab-delimited
> separation is not currently supported on load time, a CSV file would
> also be a natural candidate. Unfortunately for me, it seems that R
> expects the CSV file in the 'data' subdirectory to be delimited by
> semi-colons rather than commas (which seems odd and might be worthy of
> mention in the Writing R Extensions Manual), and the particular
> spread-sheet program I use uses commas to delimit CSV files. So, then, I
> think that I will be unable to use 'data' subdirectory to load this data
> using data(), but any feedback on this is welcomed.

Using quotes, e.g. "A B C" may work?

>
> Thanks,
> Robert
>
>
> -----Original Message-----
> From: ripley at stats.ox.ac.uk [mailto:ripley at stats.ox.ac.uk]
> Sent: Friday, October 21, 2005 1:58 AM
> To: r-devel at stat.math.ethz.ch
> Cc: R-bugs at biostat.ku.dk
> Subject: Re: [Rd] read.table error upon package installation (PR#8230)
>
>
> What is the R error here?
>
> The default delimiter in read.table is not \t but whitespace, so the
> first
> example has 2 and 3 rows (fine for header=T) and the second has 2 and 4
> rows.
>
> On Fri, 21 Oct 2005 Robert.McGehee at geodecapital.com wrote:
>
>> Upon upgrading to R 2.2.0 on my Windows box, I found that one of my
>> packages no longer compiled, giving this error:
>>
>> Error in read.table(zfile, header =3D TRUE) :
>> 	more columns than column names
>> Execution halted
>>
>> After removing every line of code from my package and still not being
>> able to compile it, I found the error to be related to a .txt file in
> my
>> data directory. I reduced my data file to a very simple example which
>> causes the error, and a nearly identical file which does not cause the
>> problem.
>>
>> A file with these contents causes the error (I am using \t to indicate
>> the usual tab delimiter).
>> x	\t	y
>> A B C	\t	DEF
>>
>> However, if I remove one of the spaces between A and B or B and C, the
>> package compiles fine:
>> x	\t	y
>> A BC	\t	DEF
>>
>> I can only guess that there is some kind of parsing problem when there
>> is more than one space between tab delimiters.
>
> Looks more like a user misunderstanding of ?data.
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Fri Oct 21 16:08:56 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 21 Oct 2005 16:08:56 +0200 (CEST)
Subject: [Rd] read.fwf(...,header=TRUE,...) (PR#8236)
Message-ID: <20051021140856.AF25C20C03@slim.kubism.ku.dk>

This is the same as PR#8226, and is already fixed in R-patched.

Please note the searches you were asked to do before submitting a report.

On Fri, 21 Oct 2005 gbonafe at arpa.emr.it wrote:

> Full_Name: Giovanni Bonafe'
> Version: 2.2.0
> OS: Linux
> Submission from: (NULL) (195.62.164.225)
>
>
> If the file "example.dat" is like this:
>
> aaa bbb ccc
> 3.4 1.2 5.6
> 4.6 10  32
> 667 343 1.7
>
> With the older 1.9.1, as expected:
>
>> data<-read.fwf(file = "example.dat",widths=c(3,4,4),header=TRUE)
>> data
>    aaa   bbb  ccc
> 1   3.4   1.2  5.6
> 2   4.6  10.0 32.0
> 3 667.0 343.0  1.7
>
> While with the newer 2.2.0:
>
>> data<-read.fwf(file = "example.dat",widths=c(3,4,4),header=TRUE)
>> data
>   X3.4 X1.2 X5.6
> 1   4.6   10 32.0
> 2 667.0  343  1.7
>
> On the other side, if I use the option header=FALSE, no difference occurs
> between the two versions:
>
>> data<-read.fwf(file = "example.dat",widths=c(3,4,4))
>> data
>   V1   V2   V3
> 1 aaa  bbb  ccc
> 2 3.4  1.2  5.6
> 3 4.6  10    32
> 4 667  343  1.7
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Robert.McGehee at geodecapital.com  Fri Oct 21 16:14:33 2005
From: Robert.McGehee at geodecapital.com (McGehee, Robert)
Date: Fri, 21 Oct 2005 10:14:33 -0400
Subject: [Rd] read.table error upon package installation (PR#8230)
Message-ID: <67DCA285A2D7754280D3B8E88EB548020C9466E9@MSGBOSCLB2WIN.DMN1.FMR.COM>

Yes, but only, it seems, if you put quotes around all the fields (not
just the "A B C"). 

Also a note to Excel users, when adding quotes as suggested "A B C" is
saved as """A B C""" which R reads in differently than Excel.

For my purposes though, everyone who needs to edit this file can just do
so in emacs, and putting quotes around the fields is an easy fix. Thanks

Robert

-----Original Message-----
From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk] 
Sent: Friday, October 21, 2005 9:59 AM
To: McGehee, Robert
Cc: r-devel at stat.math.ethz.ch
Subject: RE: [Rd] read.table error upon package installation (PR#8230)


On Fri, 21 Oct 2005, McGehee, Robert wrote:

> Thanks for this.
>
> I tried switching the file extension from txt to tab, but it seems to
> still split on whitespace rather than tabs.
>
> My goal is to create a file that is both readable by R and by a
> spreadsheet program, and that may contain white spaces. If
tab-delimited
> separation is not currently supported on load time, a CSV file would
> also be a natural candidate. Unfortunately for me, it seems that R
> expects the CSV file in the 'data' subdirectory to be delimited by
> semi-colons rather than commas (which seems odd and might be worthy of
> mention in the Writing R Extensions Manual), and the particular
> spread-sheet program I use uses commas to delimit CSV files. So, then,
I
> think that I will be unable to use 'data' subdirectory to load this
data
> using data(), but any feedback on this is welcomed.

Using quotes, e.g. "A B C" may work?

>
> Thanks,
> Robert
>
>
> -----Original Message-----
> From: ripley at stats.ox.ac.uk [mailto:ripley at stats.ox.ac.uk]
> Sent: Friday, October 21, 2005 1:58 AM
> To: r-devel at stat.math.ethz.ch
> Cc: R-bugs at biostat.ku.dk
> Subject: Re: [Rd] read.table error upon package installation (PR#8230)
>
>
> What is the R error here?
>
> The default delimiter in read.table is not \t but whitespace, so the
> first
> example has 2 and 3 rows (fine for header=T) and the second has 2 and
4
> rows.
>
> On Fri, 21 Oct 2005 Robert.McGehee at geodecapital.com wrote:
>
>> Upon upgrading to R 2.2.0 on my Windows box, I found that one of my
>> packages no longer compiled, giving this error:
>>
>> Error in read.table(zfile, header =3D TRUE) :
>> 	more columns than column names
>> Execution halted
>>
>> After removing every line of code from my package and still not being
>> able to compile it, I found the error to be related to a .txt file in
> my
>> data directory. I reduced my data file to a very simple example which
>> causes the error, and a nearly identical file which does not cause
the
>> problem.
>>
>> A file with these contents causes the error (I am using \t to
indicate
>> the usual tab delimiter).
>> x	\t	y
>> A B C	\t	DEF
>>
>> However, if I remove one of the spaces between A and B or B and C,
the
>> package compiles fine:
>> x	\t	y
>> A BC	\t	DEF
>>
>> I can only guess that there is some kind of parsing problem when
there
>> is more than one space between tab delimiters.
>
> Looks more like a user misunderstanding of ?data.
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ggrothendieck at gmail.com  Fri Oct 21 16:19:20 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 21 Oct 2005 10:19:20 -0400
Subject: [Rd] Problems with example(Grid) in grid package
Message-ID: <971536df0510210719m535de052s4ea9d5737ccf4119@mail.gmail.com>

The following:

library(grid)
grid.newpage()
example(Grid)

has the yaxis label partly cut off and the x axis label does not appear at all.
Also ?grid.multipanel in that example brings up documentation for
grid-internal but this would not seem to be internal if its part of an example.

I am using:

> R.version.string  # Windows XP
[1] "R version 2.2.0, 2005-09-20"


From blindglobe at gmail.com  Fri Oct 21 16:49:05 2005
From: blindglobe at gmail.com (blindglobe@gmail.com)
Date: Fri, 21 Oct 2005 16:49:05 +0200 (CEST)
Subject: [Rd] new.packages() reports on packages installed with the
	install.packages option installWithVers=TRUE (PR#8237)
Message-ID: <20051021144905.5C5E0BB7C@slim.kubism.ku.dk>

Full_Name: AJ Rossini
Version: 2.2.0-patched
OS: RH9
Submission from: (NULL) (160.62.4.10)


(perhaps the search mechanism of the bugtracker is broken, I can't find my old
bug report -- but it's still broken)

new.packages() is only supposed to report on packages which are not installed.

When the packages are installed with installWithVers=TRUE, new.packages()
reports on installed packages.  This is a bug.


From pkleiweg at xs4all.nl  Fri Oct 21 17:53:28 2005
From: pkleiweg at xs4all.nl (Peter Kleiweg)
Date: Fri, 21 Oct 2005 17:53:28 +0200 (CEST)
Subject: [Rd] [R-gui]  R GUI considerations (was: R, Wine,
 and multi-threadedness)
In-Reply-To: <37266.192.168.97.37.1129870008.squirrel@homebase.wehi.edu.au>
References: <20051019224346.66B1D53585@mail.rsma.frb.gov>      
	<37E16860-F4A0-436A-8C6F-9990C15274CE@stat.ucla.edu>      
	<Pine.LNX.4.63.0510200126430.1082@kleigh.nl>   
	<36467.192.168.97.37.1129784906.squirrel@homebase.wehi.edu.au>   
	<Pine.LNX.4.63.0510201511480.1085@kleigh.nl>
	<37266.192.168.97.37.1129870008.squirrel@homebase.wehi.edu.au>
Message-ID: <Pine.LNX.4.63.0510211659070.1084@kleigh.nl>

James Wettenhall schreef op de 21e dag van de wijnmaand van het jaar 2005:
 
> We may have to agree to disagree about some things, but I hope 
> this has made my point of view a little clearer.

Actually, your elaborate response makes much sense to me. I 
understand now that it is not just about replacing the command 
line with a GUI. It is not like LaTeX versus Word (i.e. good 
versus bad), but about organising and streamlining tasks, doing 
"higher level" things. At least, that is what I think it is.

This is a topic I have been struggling with for quite some time. 
For years, I have been working on software for dialectometrics 
and cartography. At the beginning, just for doing research at 
our institute. But soon, it developed into something people from 
other institutes can use. A large set of command line programs, 
manual pages, an R interface, and quite an extensive tutorial 
with example material.

My employer urged me to add some sort of GUI. It would make more 
people willing to try using the software. I resisted the idea of 
a GUI. For one thing, I work on Linux but the GUI should be used 
on Windows. (Java is too bothersome. Smalltalk too clumsy. And I 
didn't know about Python yet.) But the main problem was: I had 
no idea what a GUI should look like, what it was supposed to do. 
It took me quite some time, working with my own software, before 
I was able to look at it from a distance. The software is just a 
toolkit. I didn't want a Graphical Toolkit. What I wanted was 
something like a Graphical Project Manager, something task 
oriented, with and interactive help system that guides the user 
through the work.

It is still fresh. I haven't had any responses on people using 
the GUI, so I don't know yet if this is what people helps. What 
I still think as one of the biggest obstacles for using my 
software is not cured by the GUI. You still need to select and 
prepare the data. If you want maps, you have to provide map 
data, in a format the software understands.

This GUI I built is quite specific. It assumes a quite narrow 
purpose (though parts of the software can be used independently 
for quite other purposes): you start with a set of dialect data, 
you do some calculations on that data to make estimates of 
differences between dialects, and you visualise these dialect 
differences on a geographic map.

I still don't see anything like that for R. A general GUI for R? 
What are the "higher level task" you use R for? It only makes 
sense to me if you want to use R in a specific field, such as in 
Bioconductor. You build a GUI to that specific higher level 
application of R.

Or does anyone want to transform R into something like a 
spreadsheet program? There are people making a GUI for LaTeX to 
make it look like Word, a WYSIWYG, but to me that seems like a 
very silly thing to do.

For those interested, here is my software:

    http://www.let.rug.nl/~kleiweg/L04/

And the GUI is here:

    http://www.let.rug.nl/~kleiweg/L04/pyL04/

-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


From Emmanuel.Paradis at mpl.ird.fr  Fri Oct 21 18:03:59 2005
From: Emmanuel.Paradis at mpl.ird.fr (Emmanuel.Paradis@mpl.ird.fr)
Date: Fri, 21 Oct 2005 18:03:59 +0200 (CEST)
Subject: [Rd] read.fwf doesn't work with header = TRUE (PR#8226)
Message-ID: <20051021160359.27481205FE@slim.kubism.ku.dk>

Prof Brian Ripley wrote:
> On Thu, 20 Oct 2005 Emmanuel.Paradis at mpl.ird.fr wrote:
> 
>> Full_Name: Emmanuel Paradis
>> Version: 2.1.1
>> OS: Linux
>> Submission from: (NULL) (193.49.41.105)
>>
>>
>> read.fwf(..., header = TRUE) does not work properly since:
>>
>> 1/ the original header is printed on the console and not in FILE;
>> 2/ the different 'parts' of the header should be separated with tabs
>>   to work with the call to read.table.
>>
>> Here is a suggested fix for src/library/utils/R/read.fwf.R:
>>
>> 38c38,40
>> <         cat(FILE, headerline, "\n")
>> ---
>>
>>>         headerline <- unlist(strsplit(headerline, " {1,}"))
>>>         headerline <- paste(headerline, collapse = "\t")
>>>         cat(file = FILE, headerline, "\n")
> 
> 
> Thanks, but I don't think that is right.  It assumes the header line is 
> space-delimited (or at least that spaces get converted to tabs).  We 
> have not specified the format of the header line, and it cannot usefully 
> be fixed format.  So I think we need to specify it is delimited by 'sep'
> (not tab).

I see, but suppose we read selectively some columns in a file, eg with 
widths=c(1, -4, 2), how can we know how many variables have been skipped 
and then select the appropriate names in the header line?

Here is another proposed fix, but this assumes the header line is in 
fixed-width format (as specified by 'widths'):

38c38,41
<         cat(FILE, headerline, "\n")
---
 >         head.last <- cumsum(widths)
 >         head.first <- head.last - widths + 1
 >         headerline <- substring(headerline, head.first, head.last)[drop]
 >         cat(file = FILE, headerline, "\n", sep = sep)

?read.fwf says clearly that sep is used internally.


From h.wickham at gmail.com  Fri Oct 21 19:03:10 2005
From: h.wickham at gmail.com (hadley wickham)
Date: Fri, 21 Oct 2005 12:03:10 -0500
Subject: [Rd] Problems with example(Grid) in grid package
In-Reply-To: <971536df0510210719m535de052s4ea9d5737ccf4119@mail.gmail.com>
References: <971536df0510210719m535de052s4ea9d5737ccf4119@mail.gmail.com>
Message-ID: <f8e6ff050510211003g29cb94a6o13fe5e33fe0a1335@mail.gmail.com>

I've also noticed the behaviour of grid.rect() has changed in 2.2.0. 
Before the fill defaulted to transparent, but now it defaults to
white.

Hadley

On 10/21/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
> The following:
>
> library(grid)
> grid.newpage()
> example(Grid)
>
> has the yaxis label partly cut off and the x axis label does not appear at all.
> Also ?grid.multipanel in that example brings up documentation for
> grid-internal but this would not seem to be internal if its part of an example.
>
> I am using:
>
> > R.version.string  # Windows XP
> [1] "R version 2.2.0, 2005-09-20"
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From mlopez at iattc.org  Fri Oct 21 19:35:10 2005
From: mlopez at iattc.org (Milton Lopez)
Date: Fri, 21 Oct 2005 10:35:10 -0700
Subject: [Rd] Single vs. dual CPUs
Message-ID: <84B25EE9B4CB1A47A197E6AE76790D7801646465@mail1.lajolla.iattc.org>

I've posted this earlier and have not heard much so far. I'd really appreciate any guidance on this as we are about to order new hardware.

We are buying Dell workstations with Red Hat Linux and 64-bit Xeon CPUs to run R. We could add a second processor to each system, or buy slightly faster single CPU systems. Is it possible to make a generalized statement as to what kind of performance improvement we would see with a single vs. dual processors when running R on these systems?

Thanks again.

Milton F. L?pez 
IT Guy
Inter-American Tuna Commission (IATTC)
8604 La Jolla Shores Drive 
La Jolla, CA 92037 
Tel: (858) 546-7041, Fax: (858) 546-7133 
mlopez at iattc.org 
http://www.iattc.org


From Nitin.Jain at pfizer.com  Fri Oct 21 19:40:37 2005
From: Nitin.Jain at pfizer.com (Jain, Nitin)
Date: Fri, 21 Oct 2005 13:40:37 -0400
Subject: [Rd] Error in building package indices
Message-ID: <657D11942721774D8BE305439F3E8E5801653250@groamrexm01.amer.pfizer.com>


Dear Prof. Ripley,

Thanks for your suggestion. 
Yes, R CMD INSTALL also failed and the problem was indeed in the data
directory.

There were some files (.R) in the data directory, which were creating the
error.
After removing them, R CMD check works fine.

Best,
Nitin



-----Original Message-----
From: Prof Brian Ripley [mailto:ripley at stats.ox.ac.uk]
Sent: Thursday, October 20, 2005 5:39 PM
To: Jain, Nitin
Cc: 'R-devel at lists.R-project.org'
Subject: Re: [Rd] Error in building package indices


There is not much context here, but it seems this is whilst trying to do 
an install.  I would expect R CMD INSTALL to fail in the same place.

It appears to indicate a bug in one of your datasets.

On Thu, 20 Oct 2005, Jain, Nitin wrote:

> Dear R-devel members,
>
> We are building a new package (GeneticsBase) for analysis of genetic data
.
> While doing "R CMD check with R-2.1.1,  I am getting the following error:
>
> ** building package indices ...
> Error in "colnames<-"(`*tmp*`, value = c("family", "pid", "father",
> "mother",  :
>        length of 'dimnames' [2] not equal to array extent
> Execution halted
> ERROR: installing package indices failed
> ERROR
> Installation failed.
>
> We believe that this could be due to package versioning, but are not sure.

Not sure what you mean here.  No versioning is being used by R CMD check.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

----------------------------------------------------------------------
LEGAL NOTICE\ Unless expressly stated otherwise, this messag...{{dropped}}


From p.dalgaard at biostat.ku.dk  Fri Oct 21 20:47:33 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 21 Oct 2005 20:47:33 +0200
Subject: [Rd] Single vs. dual CPUs
In-Reply-To: <84B25EE9B4CB1A47A197E6AE76790D7801646465@mail1.lajolla.iattc.org>
References: <84B25EE9B4CB1A47A197E6AE76790D7801646465@mail1.lajolla.iattc.org>
Message-ID: <x2wtk6n1ve.fsf@turmalin.kubism.ku.dk>

"Milton Lopez" <mlopez at iattc.org> writes:

> I've posted this earlier and have not heard much so far. I'd really appreciate any guidance on this as we are about to order new hardware.
> 
> We are buying Dell workstations with Red Hat Linux and 64-bit Xeon
> CPUs to run R. We could add a second processor to each system, or
> buy slightly faster single CPU systems. Is it possible to make a
> generalized statement as to what kind of performance improvement we
> would see with a single vs. dual processors when running R on these
> systems?

Well, if you ask that way, the answer is probably no...

It depends on the usage pattern. If you run multiple CPU-bound
processes in parallel without too much coordination (parallel make is
a good example, simulations another), then you get close to double up
from a dual. For a single R process, you can get something like 40%
improvement in large linear algebra problems, using a threaded ATLAS.
For other problems the speedup is basically nil. There is some
potential in threading R or (much easier) some of its vector
operations, but that is not even on the drawing board at this stage.

Also, these days you might want to consider another factor: noise.
Duals tend to be server machines with little emphasis on quietness,
where the single-CPU machines have heatpipes and whatnot. 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From khansen at stat.Berkeley.EDU  Fri Oct 21 21:13:20 2005
From: khansen at stat.Berkeley.EDU (Kasper Daniel Hansen)
Date: Fri, 21 Oct 2005 12:13:20 -0700
Subject: [Rd] [R-gui]  R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <Pine.LNX.4.63.0510211659070.1084@kleigh.nl>
References: <20051019224346.66B1D53585@mail.rsma.frb.gov>
	<37E16860-F4A0-436A-8C6F-9990C15274CE@stat.ucla.edu>
	<Pine.LNX.4.63.0510200126430.1082@kleigh.nl>
	<36467.192.168.97.37.1129784906.squirrel@homebase.wehi.edu.au>
	<Pine.LNX.4.63.0510201511480.1085@kleigh.nl>
	<37266.192.168.97.37.1129870008.squirrel@homebase.wehi.edu.au>
	<Pine.LNX.4.63.0510211659070.1084@kleigh.nl>
Message-ID: <243549AB-2123-47EA-B021-031E988CF36D@stat.berkeley.edu>


On Oct 21, 2005, at 8:53 AM, Peter Kleiweg wrote:

> James Wettenhall schreef op de 21e dag van de wijnmaand van het  
> jaar 2005:
>
>
>> We may have to agree to disagree about some things, but I hope
>> this has made my point of view a little clearer.
>>
>
> Actually, your elaborate response makes much sense to me. I
> understand now that it is not just about replacing the command
> line with a GUI. It is not like LaTeX versus Word (i.e. good
> versus bad), but about organising and streamlining tasks, doing
> "higher level" things. At least, that is what I think it is.
>
> This is a topic I have been struggling with for quite some time.
> For years, I have been working on software for dialectometrics
> and cartography. At the beginning, just for doing research at
> our institute. But soon, it developed into something people from
> other institutes can use. A large set of command line programs,
> manual pages, an R interface, and quite an extensive tutorial
> with example material.
>
> My employer urged me to add some sort of GUI. It would make more
> people willing to try using the software. I resisted the idea of
> a GUI. For one thing, I work on Linux but the GUI should be used
> on Windows. (Java is too bothersome. Smalltalk too clumsy. And I
> didn't know about Python yet.) But the main problem was: I had
> no idea what a GUI should look like, what it was supposed to do.
> It took me quite some time, working with my own software, before
> I was able to look at it from a distance. The software is just a
> toolkit. I didn't want a Graphical Toolkit. What I wanted was
> something like a Graphical Project Manager, something task
> oriented, with and interactive help system that guides the user
> through the work.
>
> It is still fresh. I haven't had any responses on people using
> the GUI, so I don't know yet if this is what people helps. What
> I still think as one of the biggest obstacles for using my
> software is not cured by the GUI. You still need to select and
> prepare the data. If you want maps, you have to provide map
> data, in a format the software understands.

For the applications James have in mind, the data format is basically  
standardized. From a certain level you might think of every  
observation residing in a separate file (in one out of a couple of  
different file formats), so all the user has to do is choose "file  
format" and basically label every file with eg.  
"control"/"treatment". This is somewhat simplifying of course, but  
basically the data input step is much more simple than in "general"  
cases.

> This GUI I built is quite specific. It assumes a quite narrow
> purpose (though parts of the software can be used independently
> for quite other purposes): you start with a set of dialect data,
> you do some calculations on that data to make estimates of
> differences between dialects, and you visualise these dialect
> differences on a geographic map.
>
> I still don't see anything like that for R. A general GUI for R?
> What are the "higher level task" you use R for? It only makes
> sense to me if you want to use R in a specific field, such as in
> Bioconductor. You build a GUI to that specific higher level
> application of R.

Yes, and this is exactly what James have been doing.

> Or does anyone want to transform R into something like a
> spreadsheet program? There are people making a GUI for LaTeX to
> make it look like Word, a WYSIWYG, but to me that seems like a
> very silly thing to do.

Agreed, although I am humble enough to know that there might be sense  
in doing so from a certain perspective which I am not aware of.

Kasper

> For those interested, here is my software:
>
>     http://www.let.rug.nl/~kleiweg/L04/
>
> And the GUI is here:
>
>     http://www.let.rug.nl/~kleiweg/L04/pyL04/
>
> -- 
> Peter Kleiweg
> http://www.let.rug.nl/~kleiweg/
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From kjetil at redcotel.bo  Sat Oct 22 04:01:05 2005
From: kjetil at redcotel.bo (kjetil@redcotel.bo)
Date: Sat, 22 Oct 2005 04:01:05 +0200 (CEST)
Subject: [Rd] new.packages --- wishlist (PR#8239)
Message-ID: <20051022020105.0E672DD04@slim.kubism.ku.dk>

new.packages() misses a destdir argument as in
update.packages() and
install.packages().


Adding this new argument is very little work, so please do it!


Kjetil


--


From phgrosjean at sciviews.org  Sat Oct 22 11:12:37 2005
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Sat, 22 Oct 2005 11:12:37 +0200
Subject: [Rd] [R-gui]  R GUI considerations
In-Reply-To: <Pine.LNX.4.63.0510211659070.1084@kleigh.nl>
References: <20051019224346.66B1D53585@mail.rsma.frb.gov>
	<37E16860-F4A0-436A-8C6F-9990C15274CE@stat.ucla.edu>
	<Pine.LNX.4.63.0510200126430.1082@kleigh.nl>
	<36467.192.168.97.37.1129784906.squirrel@homebase.wehi.edu.au>
	<Pine.LNX.4.63.0510201511480.1085@kleigh.nl>	<37266.192.168.97.37.1129870008.squirrel@homebase.wehi.edu.au>
	<Pine.LNX.4.63.0510211659070.1084@kleigh.nl>
Message-ID: <435A0285.8000008@sciviews.org>

... A couple of screenshots of your GUI would help those who don't have 
time to download and install your software to visualize what you did.
Best,

Philippe Grosjean

..............................................<?}))><........
  ) ) ) ) )
( ( ( ( (    Prof. Philippe Grosjean
  ) ) ) ) )
( ( ( ( (    Numerical Ecology of Aquatic Systems
  ) ) ) ) )   Mons-Hainaut University, Pentagone (3D08)
( ( ( ( (    Academie Universitaire Wallonie-Bruxelles
  ) ) ) ) )   8, av du Champ de Mars, 7000 Mons, Belgium
( ( ( ( (
  ) ) ) ) )   phone: + 32.65.37.34.97, fax: + 32.65.37.30.54
( ( ( ( (    email: Philippe.Grosjean at umh.ac.be
  ) ) ) ) )
( ( ( ( (    web:   http://www.umh.ac.be/~econum
  ) ) ) ) )          http://www.sciviews.org
( ( ( ( (
..............................................................

Peter Kleiweg wrote:
> James Wettenhall schreef op de 21e dag van de wijnmaand van het jaar 2005:
>  
> 
>>We may have to agree to disagree about some things, but I hope 
>>this has made my point of view a little clearer.
> 
> 
> Actually, your elaborate response makes much sense to me. I 
> understand now that it is not just about replacing the command 
> line with a GUI. It is not like LaTeX versus Word (i.e. good 
> versus bad), but about organising and streamlining tasks, doing 
> "higher level" things. At least, that is what I think it is.
> 
> This is a topic I have been struggling with for quite some time. 
> For years, I have been working on software for dialectometrics 
> and cartography. At the beginning, just for doing research at 
> our institute. But soon, it developed into something people from 
> other institutes can use. A large set of command line programs, 
> manual pages, an R interface, and quite an extensive tutorial 
> with example material.
> 
> My employer urged me to add some sort of GUI. It would make more 
> people willing to try using the software. I resisted the idea of 
> a GUI. For one thing, I work on Linux but the GUI should be used 
> on Windows. (Java is too bothersome. Smalltalk too clumsy. And I 
> didn't know about Python yet.) But the main problem was: I had 
> no idea what a GUI should look like, what it was supposed to do. 
> It took me quite some time, working with my own software, before 
> I was able to look at it from a distance. The software is just a 
> toolkit. I didn't want a Graphical Toolkit. What I wanted was 
> something like a Graphical Project Manager, something task 
> oriented, with and interactive help system that guides the user 
> through the work.
> 
> It is still fresh. I haven't had any responses on people using 
> the GUI, so I don't know yet if this is what people helps. What 
> I still think as one of the biggest obstacles for using my 
> software is not cured by the GUI. You still need to select and 
> prepare the data. If you want maps, you have to provide map 
> data, in a format the software understands.
> 
> This GUI I built is quite specific. It assumes a quite narrow 
> purpose (though parts of the software can be used independently 
> for quite other purposes): you start with a set of dialect data, 
> you do some calculations on that data to make estimates of 
> differences between dialects, and you visualise these dialect 
> differences on a geographic map.
> 
> I still don't see anything like that for R. A general GUI for R? 
> What are the "higher level task" you use R for? It only makes 
> sense to me if you want to use R in a specific field, such as in 
> Bioconductor. You build a GUI to that specific higher level 
> application of R.
> 
> Or does anyone want to transform R into something like a 
> spreadsheet program? There are people making a GUI for LaTeX to 
> make it look like Word, a WYSIWYG, but to me that seems like a 
> very silly thing to do.
> 
> For those interested, here is my software:
> 
>     http://www.let.rug.nl/~kleiweg/L04/
> 
> And the GUI is here:
> 
>     http://www.let.rug.nl/~kleiweg/L04/pyL04/
>


From phgrosjean at sciviews.org  Sat Oct 22 11:55:57 2005
From: phgrosjean at sciviews.org (Philippe Grosjean)
Date: Sat, 22 Oct 2005 11:55:57 +0200
Subject: [Rd] [R-gui] R GUI considerations (was: R, Wine,
	and multi-threadedness)
In-Reply-To: <4357E0ED.9070305@stats.uwo.ca>
References: <200510201621.MAA07599@www20.ureach.com>
	<4357E0ED.9070305@stats.uwo.ca>
Message-ID: <435A0CAD.2060202@sciviews.org>

Walter,

With the various answers you got to your "simple" question, you notice 
that there are several ways to feed commands into R and retrieve the 
results. If you just need to occasionnally feed commands that does not 
take a long time to process, and can afford to frozen your GUI during 
those calculations, this is a pretty simple way to solve the problem.

Things get more complicated when you add features to your GUI that 
require reintrancy (execute another command in R while the current one 
is not completed), asynchronous treatment (your GUI is not frozen and is 
not just "waiting for the answer" during long R calculations -well, a 
multithreade app using synchronous treatment works here too-), 
cancellation of long R treatments (like ESC under RGui, or Ctrl-C on the 
console), etc... A serious GUI needs all that, and its makes 
communication between R and your GUI more complex than just feeding 
commands and waiting for results.

One example: with SciViews-R, you have an object explorer that updates 
automatically, you have "calltips" (the syntax of a function is 
displayed in a tip when you enter something like 'myfunction('), you 
have completion lists, etc... All these features require the execution 
of R commands at any time, even if R is busy processing a long 
calculation. To get these features, I had to write a little bit more 
complex communication system with R. So, in practice, things are not so 
simple!

I wonder how you can add all these features to a GUI that use R just as 
an occasional backend calculator.
- How your GUI would know about the syntax of all functions (including 
your own custom ones) without asking the info to R?
- How the GUI would know what variables to propose in a list in a dialog 
box without asking R using something like 'ls()', or 'names(mydataframe)'?
- How to implement an object explorer that lists variables in the 
various environments, give some details about these variables, propose a 
contextual menu (that is, a list of function depending on the class of 
the object, the environment, the context of your analysis, ...), etc... 
without using a lot of reintrant communication with R?

Best,

Philippe Grosjean

Duncan Murdoch wrote:
> On 10/20/2005 12:21 PM, Walter Johnston wrote:
> 
> 
>>And the question:
>>
>>Is there a "simple" way (e.g. some socket based mechanism) to
>>feed commands into R and retrieve the results of those commands?
>> This would require that I program the sequence of commands I
>>want to use (or a means to generate them) and then be able parse
>>the resulting structure - I understand. But it would also allow
>>separation of the computation, the "statistical reasoning", and
>>the UI into (potentially) separate units which would not even
>>need to be on the same machine to inter-operate.  If there is a
>>reasonable way to do this, please tell me.
> 
> 
> Take a look at the Writing R Extensions manual.  There are several 
> levels at which you can interact with R.  The simplest is to act as a 
> console, feeding text in and getting text out.  If you actually want to 
> work with things as binary objects you'll need lower level access.  It's 
> not that bad if you just want to write a function that gets passed R 
> objects.  I don't think it be called "simple" if you want to do away 
> with the console completely, and start working directly with the evaluator.
> 
> Duncan Murdoch
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>


From ripley at stats.ox.ac.uk  Sat Oct 22 12:22:15 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sat, 22 Oct 2005 12:22:15 +0200 (CEST)
Subject: [Rd] new.packages --- wishlist (PR#8239)
Message-ID: <20051022102215.2A21121EB7@slim.kubism.ku.dk>

On Sat, 22 Oct 2005 kjetil at redcotel.bo wrote:

> new.packages() misses a destdir argument as in
> update.packages() and
> install.packages().
>
>
> Adding this new argument is very little work, so please do it!

Done in R-devel.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From pkleiweg at xs4all.nl  Sat Oct 22 14:11:49 2005
From: pkleiweg at xs4all.nl (Peter Kleiweg)
Date: Sat, 22 Oct 2005 14:11:49 +0200 (CEST)
Subject: [Rd] [R-gui]  R GUI considerations
In-Reply-To: <435A0285.8000008@sciviews.org>
References: <20051019224346.66B1D53585@mail.rsma.frb.gov>      
	<37E16860-F4A0-436A-8C6F-9990C15274CE@stat.ucla.edu>      
	<Pine.LNX.4.63.0510200126430.1082@kleigh.nl>   
	<36467.192.168.97.37.1129784906.squirrel@homebase.wehi.edu.au>   
	<Pine.LNX.4.63.0510201511480.1085@kleigh.nl>
	<37266.192.168.97.37.1129870008.squirrel@homebase.wehi.edu.au>
	<Pine.LNX.4.63.0510211659070.1084@kleigh.nl>
	<435A0285.8000008@sciviews.org>
Message-ID: <Pine.LNX.4.63.0510221406360.1083@kleigh.nl>

Philippe Grosjean schreef op de 22e dag van de wijnmaand van het jaar 2005:

> ... A couple of screenshots of your GUI would help those who don't have time
> to download and install your software to visualize what you did.

I did today:

http://www.let.rug.nl/~kleiweg/L04/pyL04/


-- 
Peter Kleiweg
http://www.let.rug.nl/~kleiweg/


From walton.green at yale.edu  Sun Oct 23 02:12:52 2005
From: walton.green at yale.edu (Walton A. Green)
Date: Sat, 22 Oct 2005 20:12:52 -0400 (EDT)
Subject: [Rd] Coloring leaves, twigs and labels in plot.dendrogram()
Message-ID: <Pine.LNX.4.44.0510222005200.25034-100000@ares.its.yale.edu>


Core developers,

I couldn't find any simple way to send a vector of colors to apply to each
terminal in plot.dendrogram() or plot.hclust()---I asked R-help about it a
few weeks ago and didn't get any response---so I hacked that functionality
into the plot.dendrgram code (see below for hacked function plus 
examples)....
    
Is there any chance this functionality could be added to the base code? 
Unquestionably it can be done more elegantly than below, but surely it 
would be a useful feature to have....

Or is there an easier way of doing this that I have missed?

Walton Green

*	*	*

my.dend.plot <- function (x, type = c("rectangle", "triangle"),
    center = FALSE, edge.root = is.leaf(x) || !is.null(attr(x,
    "edgetext")), nodePar = NULL, edgePar = list(),
    leaflab = c("perpendicular", "textlike", "none"), dLeaf = NULL,
    xlab = "", ylab = "", xaxt = "n", yaxt = "s", horiz = FALSE,
    frame.plot = FALSE, twig.col = NULL, lab.col = NULL, leaf.col = NULL, 
...){

############################## 80 Characters Wide 
##############################

plotNode <- function (x1, x2, subtree, type, center, leaflab, dLeaf, 
nodePar, 
    edgePar, horiz = FALSE, leafcounter = leafcounter, ...) 
{
	#cat('.') uncomment this for debugging...
    inner <- !is.leaf(subtree) && x1 != x2
    yTop <- attr(subtree, "height")
    bx <- plotNodeLimit(x1, x2, subtree, center)
    xTop <- bx$x
    hasP <- !is.null(nPar <- attr(subtree, "nodePar"))
    if (!hasP) 
        nPar <- nodePar
    if (getOption("verbose")) {
        cat(if (inner) 
            "inner node"
        else "leaf", ":")
        if (!is.null(nPar)) {
            cat(" with node pars\n")
            str(nPar)
        }
        cat(if (inner) 
            paste(" height", formatC(yTop), "; "), "(x1,x2)= (", 
            formatC(x1, wid = 4), ",", formatC(x2, wid = 4), 
            ")", "--> xTop=", formatC(xTop, wid = 8), "\n", sep = "")
    }
    Xtract <- function(nam, L, default, indx) rep(if (nam %in% 
        names(L)) 
        L[[nam]]
    else default, length.out = indx)[indx]
    asTxt <- function(x) if (is.character(x) || is.expression(x) || 
        is.null(x)) 
        x
    else as.character(x)
    i <- if (inner || hasP) 
        1
    else 2
    if (!is.null(nPar)) {
        pch <- Xtract("pch", nPar, default = 1:2, i)
        cex <- Xtract("cex", nPar, default = c(1, 1), i)
        col <- Xtract("col", nPar, default = par("col"), i)
        bg <- Xtract("bg", nPar, default = par("bg"), i)
		if(is.null(leaf.col) || inner){
		    leaf.col <- rep(col, x2)
		}
		if(!(is.null(leaf.col)) && (is.null(lab.col)) && 
(is.null(twig.col))){
		    leafcounter <- leafcounter + 1
		}
        points(if (horiz) 
            cbind(yTop, xTop)
        else cbind(xTop, yTop), pch = pch, bg = bg, col = 
leaf.col[leafcounter - 1], 
            cex = cex)
    }
    if (leaflab == "textlike") 
	p.col <- Xtract("p.col", nPar, default = "white", i)
    lab.cex <- Xtract("lab.cex", nPar, default = c(1, 1), i)
    lab.font <- Xtract("lab.font", nPar, default = par("font"), i)
    if (is.leaf(subtree)) {
        if (leaflab == "perpendicular") {
            if (horiz) {
                X <- yTop + dLeaf * lab.cex
                Y <- xTop
                srt <- 0
                adj <- c(0, 0.5)
            }
            else {
                Y <- yTop - dLeaf * lab.cex
                X <- xTop
                srt <- 90
                adj <- 1
            }
            nodeText <- asTxt(attr(subtree, "label"))
			if(!is.null(lab.col)){
			    lab.col <- lab.col[leafcounter - 1]
				if(is.null(twig.col) && 
is.null(leaf.col)){
				    leafcounter <- leafcounter + 1
				}
            }
			text(X, Y, nodeText, xpd = TRUE, srt = srt, adj = 
adj, 
                cex = lab.cex, col = lab.col, font = lab.font)
        }
    }
    else if (inner) {
        segmentsHV <- function(x0, y0, x1, y1, ...) {
            if (horiz) 
                segments(y0, x0, y1, x1, ...)
            else segments(x0, y0, x1, y1, ...)
        }
        for (k in 1:length(subtree)) {
            child <- subtree[[k]]
            yBot <- attr(child, "height")
            if (getOption("verbose")) 
                cat("ch.", k, "@ h=", yBot, "; ")
            if (is.null(yBot)) 
                yBot <- 0
            xBot <- if (center) 
                mean(bx$limit[k:(k + 1)])
            else bx$limit[k] + .midDend(child)
            hasE <- !is.null(ePar <- attr(child, "edgePar"))
            if (!hasE) 
                ePar <- edgePar
            i <- if (!is.leaf(child) || hasE) 
                1
            else 2
            col <- Xtract("col", ePar, default = par("col"), 
                i)
            lty <- Xtract("lty", ePar, default = par("lty"), 
                i)
            lwd <- Xtract("lwd", ePar, default = par("lwd"), 
                i)
            if (type == "triangle") {
                segmentsHV(xTop, yTop, xBot, yBot)
            }
            else {
			    if(is.null(twig.col)){
                    segmentsHV(xTop, yTop, xBot, yTop)
                    segmentsHV(xBot, yTop, xBot, yBot)
				}else{
				    if(is.leaf(child)){
                        # cat(leafcounter) uncomment this for debugging...
					    segmentsHV(xTop, yTop, xBot, 
yTop)
						segmentsHV(xBot, yTop, 
xBot, yBot, col = twig.col[leafcounter])
						leafcounter <- leafcounter 
+ 1
					}else{
					    segmentsHV(xTop, yTop, xBot, 
yTop)
						segmentsHV(xBot, yTop, 
xBot, yBot)
					}
				}
            }
            vln <- NULL
            if (is.leaf(child) && leaflab == "textlike") {
                nodeText <- asTxt(attr(child, "label"))
                if (getOption("verbose")) 
                  cat("-- with \"label\"", format(nodeText))
                hln <- 0.6 * strwidth(nodeText, cex = lab.cex)/2
                vln <- 1.5 * strheight(nodeText, cex = lab.cex)/2
                rect(xBot - hln, yBot, xBot + hln, yBot + 2 * 
                  vln, col = p.col)
                text(xBot, yBot + vln, nodeText, xpd = TRUE, 
                  cex = lab.cex, col = lab.col, font = lab.font)
            }
            if (!is.null(attr(child, "edgetext"))) {
                edgeText <- asTxt(attr(child, "edgetext"))
                if (getOption("verbose")) 
                  cat("-- with \"edgetext\"", format(edgeText))
                if (!is.null(vln)) {
                  mx <- if (type == "triangle") 
                    (xTop + xBot + ((xTop - xBot)/(yTop - yBot)) * 
                      vln)/2
                  else xBot
                  my <- (yTop + yBot + 2 * vln)/2
                }
                else {
                  mx <- if (type == "triangle") 
                    (xTop + xBot)/2
                  else xBot
                  my <- (yTop + yBot)/2
                }
                p.col <- Xtract("p.col", ePar, default = "white", 
                  i)
                p.border <- Xtract("p.border", ePar, default = par("fg"), 
                  i)
                p.lwd <- Xtract("p.lwd", ePar, default = lwd, 
                  i)
                p.lty <- Xtract("p.lty", ePar, default = lty, 
                  i)
                t.col <- Xtract("t.col", ePar, default = col, 
                  i)
                t.cex <- Xtract("t.cex", ePar, default = 1, i)
                t.font <- Xtract("t.font", ePar, default = par("font"), 
                  i)
                vlm <- strheight(c(edgeText, "h"), cex = t.cex)/2
                hlm <- strwidth(c(edgeText, "m"), cex = t.cex)/2
                hl3 <- c(hlm[1], hlm[1] + hlm[2], hlm[1])
                polygon(mx + c(-hl3, hl3), my + sum(vlm) * c(-1:1, 
                  1:-1), col = p.col, border = p.border, lty = p.lty, 
                  lwd = p.lwd)
                text(mx, my, edgeText, cex = t.cex, col = t.col, 
                  font = t.font)
			}
	            leafcounter <- 1 + plotNode(bx$limit[k], bx$limit[k + 
1], subtree = child, 
                type, center, leaflab, dLeaf, nodePar, edgePar, 
                horiz, leafcounter = leafcounter, ...)
        } # End of loop through k
	}
return(leafcounter - 1)
}

############################## 80 Characters Wide 
##############################

plotNodeLimit <- function (x1, x2, subtree, center) 
{
    inner <- !is.leaf(subtree) && x1 != x2
    if (inner) {
        K <- length(subtree)
        mTop <- .memberDend(subtree)
        limit <- integer(K)
        xx1 <- x1
        for (k in 1:K) {
            m <- .memberDend(subtree[[k]])
            xx1 <- xx1 + (if (center) 
                (x2 - x1) * m/mTop
            else m)
            limit[k] <- xx1
        }
        limit <- c(x1, limit)
    }
    else {
        limit <- c(x1, x2)
    }
    mid <- attr(subtree, "midpoint")
    center <- center || (inner && !is.numeric(mid))
    x <- if (center) 
        mean(c(x1, x2))
    else x1 + (if (inner) 
        mid
    else 0)
    list(x = x, limit = limit)
}

############################## 80 Characters Wide 
##############################

.memberDend <- function (x) 
{
    r <- attr(x, "x.member")
    if (is.null(r)) {
        r <- attr(x, "members")
        if (is.null(r)) 
            r <- 1:1
    }
    r
}

.midDend <- function (x) 
if (is.null(mp <- attr(x, "midpoint"))) 0 else mp

############################## 80 Characters Wide 
##############################
########## Body follows

    type <- match.arg(type)
    leaflab <- match.arg(leaflab)
    hgt <- attr(x, "height")
    if (edge.root && is.logical(edge.root)) 
        edge.root <- 0.0625 * if (is.leaf(x)) 
            1
        else hgt
    mem.x <- .memberDend(x)
    yTop <- hgt + edge.root
    if (center) {
        x1 <- 0.5
        x2 <- mem.x + 0.5
    }
    else {
        x1 <- 1
        x2 <- mem.x
    }
    xlim <- c(x1 - 1/2, x2 + 1/2)
    ylim <- c(0, yTop)
    if (horiz) {
        xl <- xlim
        xlim <- rev(ylim)
        ylim <- xl
        tmp <- xaxt
        xaxt <- yaxt
        yaxt <- tmp
    }
    plot(0, xlim = xlim, ylim = ylim, type = "n", xlab = xlab, 
        ylab = ylab, xaxt = xaxt, yaxt = yaxt, frame.plot = frame.plot, 
        ...)
    if (is.null(dLeaf)) 
        dLeaf <- 0.75 * (if (horiz) 
            strwidth("w")
        else strheight("x"))
    if (edge.root) {
        x0 <- plotNodeLimit(x1, x2, x, center)$x
        if (horiz){
            segments(hgt, x0, yTop, x0)
        }else{
            segments(x0, hgt, x0, yTop)
        }
        if (!is.null(et <- attr(x, "edgetext"))) {
            my <- mean(hgt, yTop)
            if (horiz) 
                text(my, x0, et)
            else text(x0, my, et)
        }
    }
    plotNode(x1, x2, x, type = type, center = center, leaflab = leaflab, 
        dLeaf = dLeaf, nodePar = nodePar, edgePar = edgePar, 
        horiz = horiz, leafcounter = 1, ...)
} # End of function

############################## 80 Characters Wide 
##############################

## Examples
hc <- hclust(dist(USArrests), "ave")
NewEnglandStates <- rep(0, 50)
NewEnglandStates[c(7, 19, 21, 29, 39, 45)] <- 1
my.dend.plot(as.dendrogram(hc, hang = 0.02),
             twig.col = (NewEnglandStates + 1)[hc$order],
			 lab.col = (NewEnglandStates + 1)[hc$order])
my.dend.plot(as.dendrogram(hc), twig.col = (NewEnglandStates + 
1)[hc$order],
             leaf.col = (NewEnglandStates + 1)[hc$order],
			 nodePar = list(pch = c(NA,1)))


From ripley at stats.ox.ac.uk  Sun Oct 23 18:59:11 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Sun, 23 Oct 2005 18:59:11 +0200 (CEST)
Subject: [Rd] read.fwf doesn't work with header = TRUE (PR#8226)
Message-ID: <20051023165911.AB3A221ED0@slim.kubism.ku.dk>

On Fri, 21 Oct 2005, Emmanuel Paradis wrote:

> Prof Brian Ripley wrote:
>> On Thu, 20 Oct 2005 Emmanuel.Paradis at mpl.ird.fr wrote:
>> 
>>> Full_Name: Emmanuel Paradis
>>> Version: 2.1.1
>>> OS: Linux
>>> Submission from: (NULL) (193.49.41.105)
>>> 
>>> 
>>> read.fwf(..., header = TRUE) does not work properly since:
>>> 
>>> 1/ the original header is printed on the console and not in FILE;
>>> 2/ the different 'parts' of the header should be separated with tabs
>>>   to work with the call to read.table.
>>> 
>>> Here is a suggested fix for src/library/utils/R/read.fwf.R:
>>> 
>>> 38c38,40
>>> <         cat(FILE, headerline, "\n")
>>> ---
>>> 
>>>>         headerline <- unlist(strsplit(headerline, " {1,}"))
>>>>         headerline <- paste(headerline, collapse = "\t")
>>>>         cat(file = FILE, headerline, "\n")
>> 
>> 
>> Thanks, but I don't think that is right.  It assumes the header line is 
>> space-delimited (or at least that spaces get converted to tabs).  We have 
>> not specified the format of the header line, and it cannot usefully be 
>> fixed format.  So I think we need to specify it is delimited by 'sep'
>> (not tab).
>
> I see, but suppose we read selectively some columns in a file, eg with 
> widths=c(1, -4, 2), how can we know how many variables have been skipped and 
> then select the appropriate names in the header line?

You do not: as the help file says

      Negative-width fields are used to indicate columns to be skipped,
      eg '-5' to skip 5 columns.  These fields are not seen by
      'read.table' and so should not be included in a 'col.names' or
      'colClasses' argument.

> Here is another proposed fix, but this assumes the header line is in 
> fixed-width format (as specified by 'widths'):

What happens if there are multi-line records?  Your `fix' crashes.

> 38c38,41
> <         cat(FILE, headerline, "\n")
> ---
>>         head.last <- cumsum(widths)
>>         head.first <- head.last - widths + 1
>>         headerline <- substring(headerline, head.first, head.last)[drop]
>>         cat(file = FILE, headerline, "\n", sep = sep)
>
> ?read.fwf says clearly that sep is used internally.

Not so: please check the current version.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From nikko at hailmail.net  Sun Oct 23 20:59:24 2005
From: nikko at hailmail.net (Nicholas Lewin-Koh)
Date: Sun, 23 Oct 2005 13:59:24 -0500
Subject: [Rd]  Coloring leaves, twigs and labels in plot.dendrogram()
In-Reply-To: <mailman.9.1130061601.17116.r-devel@r-project.org>
References: <mailman.9.1130061601.17116.r-devel@r-project.org>
Message-ID: <1130093964.4511.245816906@webmail.messagingengine.com>

Hi Walton,
Sorry I don't follow R-help very much, but here is a nice solution to
what you are looking for in the A2R package. I don't think it is on cran
yet.

http://addictedtor.free.fr/graphiques/graphcode.php?graph=79

Nicholas


> 
> Message: 3
> Date: Sat, 22 Oct 2005 20:12:52 -0400 (EDT)
> From: "Walton A. Green" <walton.green at yale.edu>
> Subject: [Rd] Coloring leaves, twigs and labels in plot.dendrogram()
> To: r-devel at stat.math.ethz.ch
> Message-ID:
> 	<Pine.LNX.4.44.0510222005200.25034-100000 at ares.its.yale.edu>
> Content-Type: TEXT/PLAIN; charset=US-ASCII
> 
> 
> Core developers,
> 
> I couldn't find any simple way to send a vector of colors to apply to
> each
> terminal in plot.dendrogram() or plot.hclust()---I asked R-help about it
> a
> few weeks ago and didn't get any response---so I hacked that
> functionality
> into the plot.dendrgram code (see below for hacked function plus 
> examples)....
>     
> Is there any chance this functionality could be added to the base code? 
> Unquestionably it can be done more elegantly than below, but surely it 
> would be a useful feature to have....
> 
> Or is there an easier way of doing this that I have missed?
> 
> Walton Green
> 
>*************************************


From thomas.baier at kirchnersoft.com  Mon Oct 24 10:12:30 2005
From: thomas.baier at kirchnersoft.com (TB)
Date: Mon, 24 Oct 2005 10:12:30 +0200
Subject: [Rd] R_MakeExternalPtr
Message-ID: <F05B338A1B21D9119FFF0004761A511301ECD6@MXS>

Hi,

I'm using R_MakeExternalPtr() to store handles to (COM) objects in a SEXP.

The code basically is

	sexp = R_MakeExternalPtr(handle,R_NilValue,R_NilValue);
	R_RegisterCFinalizerEx(...);

After creating the sexp, LENGTH(sexp) returns some quite large integer
value. It seems like an "unitialized" value.

Can I safely assume, that an SEXP of type EXTPTRSXP can only contain a
single pointer value and never represent a vector (an array) of pointers? Or
should I maybe explicitly add something like

	SETLENGTH(sexp,1);

Best wishes from sunny Austria,

Thomas Baier


From ripley at stats.ox.ac.uk  Mon Oct 24 10:33:14 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 24 Oct 2005 09:33:14 +0100 (BST)
Subject: [Rd] R_MakeExternalPtr
In-Reply-To: <F05B338A1B21D9119FFF0004761A511301ECD6@MXS>
References: <F05B338A1B21D9119FFF0004761A511301ECD6@MXS>
Message-ID: <Pine.LNX.4.61.0510240920250.8516@gannet.stats>

This is one of those undocumented things (AFAIK): LENGTH applies only to
'vectors'.  So don't use t and definitely don't set it for others.  The 
macro expands to

#define LENGTH(x)       (((VECSEXP) (x))->vecsxp.length)

What is a vector here?  Something which gets actually allocated by 
allocVector() AFAICS, that is an atomic or generic vector or an 
expression.  OTOH, an EXTPTRSXP is stored in a cons cell.

There is also a function length(), which is safer.

On Mon, 24 Oct 2005, TB wrote:

> Hi,
>
> I'm using R_MakeExternalPtr() to store handles to (COM) objects in a SEXP.
>
> The code basically is
>
> 	sexp = R_MakeExternalPtr(handle,R_NilValue,R_NilValue);
> 	R_RegisterCFinalizerEx(...);
>
> After creating the sexp, LENGTH(sexp) returns some quite large integer
> value. It seems like an "unitialized" value.
>
> Can I safely assume, that an SEXP of type EXTPTRSXP can only contain a
> single pointer value

It stores a pointer plus other things including a tag.

> and never represent a vector (an array) of pointers? Or
> should I maybe explicitly add something like
>
> 	SETLENGTH(sexp,1);
>
> Best wishes from sunny Austria,
>
> Thomas Baier
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From thomas.baier at kirchnersoft.com  Mon Oct 24 10:38:33 2005
From: thomas.baier at kirchnersoft.com (TB)
Date: Mon, 24 Oct 2005 10:38:33 +0200
Subject: [Rd] R_MakeExternalPtr
Message-ID: <F05B338A1B21D9119FFF0004761A511301ECD7@MXS>

Brian,

Prof Brian Ripley <mailto:ripley at stats.ox.ac.uk> wrote:
> This is one of those undocumented things (AFAIK): LENGTH applies only
> to 'vectors'.  So don't use t and definitely don't set it for others.
> The macro expands to
> 
> #define LENGTH(x)       (((VECSEXP) (x))->vecsxp.length)
> 
> What is a vector here?  Something which gets actually allocated by
> allocVector() AFAICS, that is an atomic or generic vector or an
> expression.  OTOH, an EXTPTRSXP is stored in a cons cell.
> 
> There is also a function length(), which is safer.

Thanks for your message. Things are much clearer now to me.

Can I safely assume that INTSXP, REALSXP, LGLSXP, STRSXP, CPLXSXP and VECSXP
are
vectors (while EXTPTRSXP is not).

Thomas


From ripley at stats.ox.ac.uk  Mon Oct 24 11:02:11 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 24 Oct 2005 10:02:11 +0100 (BST)
Subject: [Rd] R_MakeExternalPtr
In-Reply-To: <F05B338A1B21D9119FFF0004761A511301ECD7@MXS>
References: <F05B338A1B21D9119FFF0004761A511301ECD7@MXS>
Message-ID: <Pine.LNX.4.61.0510240958260.9046@gannet.stats>

On Mon, 24 Oct 2005, TB wrote:

> Brian,
>
> Prof Brian Ripley <mailto:ripley at stats.ox.ac.uk> wrote:
>> This is one of those undocumented things (AFAIK): LENGTH applies only
>> to 'vectors'.  So don't use t and definitely don't set it for others.
>> The macro expands to
>>
>> #define LENGTH(x)       (((VECSEXP) (x))->vecsxp.length)
>>
>> What is a vector here?  Something which gets actually allocated by
>> allocVector() AFAICS, that is an atomic or generic vector or an
>> expression.  OTOH, an EXTPTRSXP is stored in a cons cell.
>>
>> There is also a function length(), which is safer.
>
> Thanks for your message. Things are much clearer now to me.
>
> Can I safely assume that INTSXP, REALSXP, LGLSXP, STRSXP, CPLXSXP and VECSXP
> are
> vectors (while EXTPTRSXP is not).

Yes. RAWSXP and EXPRSXP are also vectors (and so in a sense is CHARSXP).

Brian

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From Emmanuel.Paradis at mpl.ird.fr  Mon Oct 24 15:22:51 2005
From: Emmanuel.Paradis at mpl.ird.fr (Emmanuel.Paradis@mpl.ird.fr)
Date: Mon, 24 Oct 2005 15:22:51 +0200 (CEST)
Subject: [Rd] read.fwf doesn't work with header = TRUE (PR#8226)
Message-ID: <20051024132251.552E020BE3@slim.kubism.ku.dk>

Prof Brian Ripley wrote:
> On Fri, 21 Oct 2005, Emmanuel Paradis wrote:
> 
>> Prof Brian Ripley wrote:
>>
>>> On Thu, 20 Oct 2005 Emmanuel.Paradis at mpl.ird.fr wrote:
>>>
>>>> Full_Name: Emmanuel Paradis
>>>> Version: 2.1.1
>>>> OS: Linux
>>>> Submission from: (NULL) (193.49.41.105)
>>>>
>>>>
>>>> read.fwf(..., header = TRUE) does not work properly since:
>>>>
>>>> 1/ the original header is printed on the console and not in FILE;
>>>> 2/ the different 'parts' of the header should be separated with tabs
>>>>   to work with the call to read.table.
>>>>
>>>> Here is a suggested fix for src/library/utils/R/read.fwf.R:
>>>>
>>>> 38c38,40
>>>> <         cat(FILE, headerline, "\n")
>>>> ---
>>>>
>>>>>         headerline <- unlist(strsplit(headerline, " {1,}"))
>>>>>         headerline <- paste(headerline, collapse = "\t")
>>>>>         cat(file = FILE, headerline, "\n")
>>>
>>>
>>>
>>> Thanks, but I don't think that is right.  It assumes the header line 
>>> is space-delimited (or at least that spaces get converted to tabs).  
>>> We have not specified the format of the header line, and it cannot 
>>> usefully be fixed format.  So I think we need to specify it is 
>>> delimited by 'sep'
>>> (not tab).
>>
>>
>> I see, but suppose we read selectively some columns in a file, eg with 
>> widths=c(1, -4, 2), how can we know how many variables have been 
>> skipped and then select the appropriate names in the header line?
> 
> 
> You do not: as the help file says
> 
>      Negative-width fields are used to indicate columns to be skipped,
>      eg '-5' to skip 5 columns.  These fields are not seen by
>      'read.table' and so should not be included in a 'col.names' or
>      'colClasses' argument.

OK, but it is strange to me to not have all variables named in a header 
line.

>> Here is another proposed fix, but this assumes the header line is in 
>> fixed-width format (as specified by 'widths'):
> 
> 
> What happens if there are multi-line records?  Your `fix' crashes.

It crashes anyway because it should be [!drop] and not [drop] ;)

>> 38c38,41
>> <         cat(FILE, headerline, "\n")
>> ---
>>
>>>         head.last <- cumsum(widths)
>>>         head.first <- head.last - widths + 1
>>>         headerline <- substring(headerline, head.first, head.last)[drop]
>>>         cat(file = FILE, headerline, "\n", sep = sep)
>>
>>
>> ?read.fwf says clearly that sep is used internally.
> 
> 
> Not so: please check the current version.

Here is what I have in R 2.2.0:

      sep: character; the separator used internally; should be a
           character that does not occur in the file.

So, should the fix be simply:

38c38
<         cat(FILE, headerline, "\n")
---
 >         cat(file = FILE, headerline, "\n")

?


From hin-tak.leung at cimr.cam.ac.uk  Mon Oct 24 16:29:25 2005
From: hin-tak.leung at cimr.cam.ac.uk (hin-tak.leung@cimr.cam.ac.uk)
Date: Mon, 24 Oct 2005 16:29:25 +0200 (CEST)
Subject: [Rd] Rgnome depends on obsolete components libglade/libxml (PR#8247)
Message-ID: <20051024142925.86DBE21ED2@slim.kubism.ku.dk>

Full_Name: Hin-Tak Leung
Version: R 2.2.0
OS: x86 linux
Submission from: (NULL) (131.111.126.242)


Rgnome depends libglade 0.x and libxml 1.x .

They are no longer shipped with Redhat EL4.
(I know they are still in fedora core 4).

Just a wish-list.


From p.dalgaard at biostat.ku.dk  Mon Oct 24 18:02:44 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 24 Oct 2005 18:02:44 +0200
Subject: [Rd] Rgnome depends on obsolete components libglade/libxml
	(PR#8247)
In-Reply-To: <20051024142925.86DBE21ED2@slim.kubism.ku.dk>
References: <20051024142925.86DBE21ED2@slim.kubism.ku.dk>
Message-ID: <x2mzky6gyj.fsf@viggo.kubism.ku.dk>

hin-tak.leung at cimr.cam.ac.uk writes:

> Full_Name: Hin-Tak Leung
> Version: R 2.2.0
> OS: x86 linux
> Submission from: (NULL) (131.111.126.242)
> 
> 
> Rgnome depends libglade 0.x and libxml 1.x .
> 
> They are no longer shipped with Redhat EL4.
> (I know they are still in fedora core 4).
> 
> Just a wish-list.

But what is the wish? 

You mean get it upgraded to xml2 and glade2? Patches would likely be
accepted... 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From hin-tak.leung at cimr.cam.ac.uk  Mon Oct 24 18:14:08 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Mon, 24 Oct 2005 17:14:08 +0100
Subject: [Rd] Rgnome depends on obsolete components libglade/libxml
	(PR#8247)
In-Reply-To: <x2mzky6gyj.fsf@viggo.kubism.ku.dk>
References: <20051024142925.86DBE21ED2@slim.kubism.ku.dk>
	<x2mzky6gyj.fsf@viggo.kubism.ku.dk>
Message-ID: <435D0850.9060309@cimr.cam.ac.uk>

Peter Dalgaard wrote:
> hin-tak.leung at cimr.cam.ac.uk writes:
> 
> 
>>Full_Name: Hin-Tak Leung
>>Version: R 2.2.0
>>OS: x86 linux
>>Submission from: (NULL) (131.111.126.242)
>>
>>
>>Rgnome depends libglade 0.x and libxml 1.x .
>>
>>They are no longer shipped with Redhat EL4.
>>(I know they are still in fedora core 4).
>>
>>Just a wish-list.
> 
> 
> But what is the wish? 
> 
> You mean get it upgraded to xml2 and glade2? Patches would likely be
> accepted... 
> 

:-). libglade went from 0.17 to 1.99 then 2.x, but the current Rgnome 
code depends on some of <0.17-specific stuff.

Already tried against libglade 2 - not trivial. It probably also 
requires changing to gtk2 also...

Just like to have it in the distant TODO list, and not forgotten...

Hin-Tak Leung


From mschwartz at mn.rr.com  Mon Oct 24 18:32:36 2005
From: mschwartz at mn.rr.com (mschwartz@mn.rr.com)
Date: Mon, 24 Oct 2005 18:32:36 +0200 (CEST)
Subject: [Rd] Rgnome depends on obsolete components libglade/libxml
	(PR#8248)
Message-ID: <20051024163236.EC04B20BE9@slim.kubism.ku.dk>

On Mon, 2005-10-24 at 17:14 +0100, Hin-Tak Leung wrote:
> Peter Dalgaard wrote:
> > hin-tak.leung at cimr.cam.ac.uk writes:
> > 
> > 
> >>Full_Name: Hin-Tak Leung
> >>Version: R 2.2.0
> >>OS: x86 linux
> >>Submission from: (NULL) (131.111.126.242)
> >>
> >>
> >>Rgnome depends libglade 0.x and libxml 1.x .
> >>
> >>They are no longer shipped with Redhat EL4.
> >>(I know they are still in fedora core 4).
> >>
> >>Just a wish-list.
> > 
> > 
> > But what is the wish? 
> > 
> > You mean get it upgraded to xml2 and glade2? Patches would likely be
> > accepted... 
> > 
> 
> :-). libglade went from 0.17 to 1.99 then 2.x, but the current Rgnome 
> code depends on some of <0.17-specific stuff.
> 
> Already tried against libglade 2 - not trivial. It probably also 
> requires changing to gtk2 also...
> 
> Just like to have it in the distant TODO list, and not forgotten...
> 
> Hin-Tak Leung


According to the R Admin manual (2.2.0) on page 34:

"This interface is experimental and incomplete. The console offers a
basic command line editing and history mechanism, along with tool and
button bars that give a point-and-click console to some R commands. Many
of the features of the console are currently stubs, and the console is
**no longer under development**: it has been kept available as an
example of adding a front-end to R."


This language (my emphasis added) would suggest that a TODO list does
not (or should not) exist...so Peter's suggestion would seem spot on.

HTH,

Marc Schwartz


From mschwartz at mn.rr.com  Mon Oct 24 18:32:09 2005
From: mschwartz at mn.rr.com (Marc Schwartz (via MN))
Date: Mon, 24 Oct 2005 11:32:09 -0500
Subject: [Rd] Rgnome depends on obsolete components
	libglade/libxml	(PR#8247)
In-Reply-To: <435D0850.9060309@cimr.cam.ac.uk>
References: <20051024142925.86DBE21ED2@slim.kubism.ku.dk>
	<x2mzky6gyj.fsf@viggo.kubism.ku.dk> <435D0850.9060309@cimr.cam.ac.uk>
Message-ID: <1130171529.4216.17.camel@localhost.localdomain>

On Mon, 2005-10-24 at 17:14 +0100, Hin-Tak Leung wrote:
> Peter Dalgaard wrote:
> > hin-tak.leung at cimr.cam.ac.uk writes:
> > 
> > 
> >>Full_Name: Hin-Tak Leung
> >>Version: R 2.2.0
> >>OS: x86 linux
> >>Submission from: (NULL) (131.111.126.242)
> >>
> >>
> >>Rgnome depends libglade 0.x and libxml 1.x .
> >>
> >>They are no longer shipped with Redhat EL4.
> >>(I know they are still in fedora core 4).
> >>
> >>Just a wish-list.
> > 
> > 
> > But what is the wish? 
> > 
> > You mean get it upgraded to xml2 and glade2? Patches would likely be
> > accepted... 
> > 
> 
> :-). libglade went from 0.17 to 1.99 then 2.x, but the current Rgnome 
> code depends on some of <0.17-specific stuff.
> 
> Already tried against libglade 2 - not trivial. It probably also 
> requires changing to gtk2 also...
> 
> Just like to have it in the distant TODO list, and not forgotten...
> 
> Hin-Tak Leung


According to the R Admin manual (2.2.0) on page 34:

"This interface is experimental and incomplete. The console offers a
basic command line editing and history mechanism, along with tool and
button bars that give a point-and-click console to some R commands. Many
of the features of the console are currently stubs, and the console is
**no longer under development**: it has been kept available as an
example of adding a front-end to R."


This language (my emphasis added) would suggest that a TODO list does
not (or should not) exist...so Peter's suggestion would seem spot on.

HTH,

Marc Schwartz


From duncan at wald.ucdavis.edu  Mon Oct 24 18:42:24 2005
From: duncan at wald.ucdavis.edu (Duncan Temple Lang)
Date: Mon, 24 Oct 2005 09:42:24 -0700
Subject: [Rd] Rgnome depends on obsolete components
	libglade/libxml	(PR#8247)
In-Reply-To: <435D0850.9060309@cimr.cam.ac.uk>
References: <20051024142925.86DBE21ED2@slim.kubism.ku.dk>	<x2mzky6gyj.fsf@viggo.kubism.ku.dk>
	<435D0850.9060309@cimr.cam.ac.uk>
Message-ID: <435D0EF0.7080206@wald.ucdavis.edu>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


It is probably more sensible to rewrite this using the bindings
to Gtk+-2 and keep it purely in R so that we can more
readily customize the GUI.  There is a simple prototype in
the RGtk package and if anyone was interested, they can
do this with the soon to be released RGtk2 package.



Hin-Tak Leung wrote:
> Peter Dalgaard wrote:
> 
>>hin-tak.leung at cimr.cam.ac.uk writes:
>>
>>
>>
>>>Full_Name: Hin-Tak Leung
>>>Version: R 2.2.0
>>>OS: x86 linux
>>>Submission from: (NULL) (131.111.126.242)
>>>
>>>
>>>Rgnome depends libglade 0.x and libxml 1.x .
>>>
>>>They are no longer shipped with Redhat EL4.
>>>(I know they are still in fedora core 4).
>>>
>>>Just a wish-list.
>>
>>
>>But what is the wish? 
>>
>>You mean get it upgraded to xml2 and glade2? Patches would likely be
>>accepted... 
>>
> 
> 
> :-). libglade went from 0.17 to 1.99 then 2.x, but the current Rgnome 
> code depends on some of <0.17-specific stuff.
> 
> Already tried against libglade 2 - not trivial. It probably also 
> requires changing to gtk2 also...
> 
> Just like to have it in the distant TODO list, and not forgotten...
> 
> Hin-Tak Leung
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

- --
Duncan Temple Lang                duncan at wald.ucdavis.edu
Department of Statistics          work:  (530) 752-4782
371 Kerr Hall                     fax:   (530) 752-7099
One Shields Ave.
University of California at Davis
Davis, CA 95616, USA
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (Darwin)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFDXQ7w9p/Jzwa2QP4RAr7CAJsErP04DaUfdksk7TmzZIMBVqSNMgCeKh1b
QbwAU9AVolMTfd4nyK01zgo=
=qaNk
-----END PGP SIGNATURE-----


From duncan at wald.ucdavis.edu  Mon Oct 24 18:44:12 2005
From: duncan at wald.ucdavis.edu (duncan@wald.ucdavis.edu)
Date: Mon, 24 Oct 2005 18:44:12 +0200 (CEST)
Subject: [Rd] Rgnome depends on obsolete components
	libglade/libxml	(PR#8247)
Message-ID: <20051024164412.6843020BE9@slim.kubism.ku.dk>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1


It is probably more sensible to rewrite this using the bindings
to Gtk+-2 and keep it purely in R so that we can more
readily customize the GUI.  There is a simple prototype in
the RGtk package and if anyone was interested, they can
do this with the soon to be released RGtk2 package.



Hin-Tak Leung wrote:
> Peter Dalgaard wrote:
> 
>>hin-tak.leung at cimr.cam.ac.uk writes:
>>
>>
>>
>>>Full_Name: Hin-Tak Leung
>>>Version: R 2.2.0
>>>OS: x86 linux
>>>Submission from: (NULL) (131.111.126.242)
>>>
>>>
>>>Rgnome depends libglade 0.x and libxml 1.x .
>>>
>>>They are no longer shipped with Redhat EL4.
>>>(I know they are still in fedora core 4).
>>>
>>>Just a wish-list.
>>
>>
>>But what is the wish? 
>>
>>You mean get it upgraded to xml2 and glade2? Patches would likely be
>>accepted... 
>>
> 
> 
> :-). libglade went from 0.17 to 1.99 then 2.x, but the current Rgnome 
> code depends on some of <0.17-specific stuff.
> 
> Already tried against libglade 2 - not trivial. It probably also 
> requires changing to gtk2 also...
> 
> Just like to have it in the distant TODO list, and not forgotten...
> 
> Hin-Tak Leung
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

- --
Duncan Temple Lang                duncan at wald.ucdavis.edu
Department of Statistics          work:  (530) 752-4782
371 Kerr Hall                     fax:   (530) 752-7099
One Shields Ave.
University of California at Davis
Davis, CA 95616, USA
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.2 (Darwin)
Comment: Using GnuPG with Thunderbird - http://enigmail.mozdev.org

iD8DBQFDXQ7w9p/Jzwa2QP4RAr7CAJsErP04DaUfdksk7TmzZIMBVqSNMgCeKh1b
QbwAU9AVolMTfd4nyK01zgo=
=qaNk
-----END PGP SIGNATURE-----


From Vu.Ha at honeywell.com  Mon Oct 24 19:48:43 2005
From: Vu.Ha at honeywell.com (Ha, Vu (MN65))
Date: Mon, 24 Oct 2005 12:48:43 -0500
Subject: [Rd] R interpreter in Java/R plugin or RCP for Eclipse
Message-ID: <A957475BF79B4D4AAEC1623F5DB27549A4CF98@MN65EV802.global.ds.honeywell.com>

I've been enjoying R a lot and want to say thanks to all R developers for a
fantastic stat environment. 

I also am a fan of the Eclipse computing environment, which I've been using
for Java/C(++)/Python. I was researching for an Eclipse plugin for R and
found StatET (http://www.walware.de/goto/statet). That's when I thought
about writing another Eclipse plugin with tighter integration with R.
Essentially I want to write an R parser/interpreter in Java based on which I
can write an Eclipse plugin with advanced source code editor/interactive
debugger/object browser (say, with roughly the same functionalities as
JDT's). The interpreter would delegate all actual evaluations to C/Fortran
codes via the Java Native Interface, and would natively support new
libraries written in Java.

The potential benefits are:

- Leveraging state-of-the-art Eclipse features, such as frameworks to
develop advanced source editor and debugger.

- Largely complete environment for (future) R users with familiarity with
Eclipse but not with command-line environments (Emacs/Unix Shells). With a
LaTex plugin (http://sourceforge.net/projects/etex/), a grad student can
accomplish lots of tasks within Eclipse. 

- R library developers can for example use CDT (http://www.eclipse.org/cdt/)
for C/C++ or photran http://www.eclipse.org/photran/ within Eclipse.

- Encourage Java development for R.

- Make it easy to call R from Java programs and Java from R scripts.

I have been reading the R language definition document and studying R's C
source code. The first step is to isolate the source files responsible for
parsing R sources to internal data structures. I would appreciate any
comments/suggestions regarding this direction. Directness is a plus ("No,
that's a dumb idea" is fine, as long as a good explanation is provided). 

My hope is that as the Eclipse environment (especially  the Rich Client
Platform RCP and the Standard Widget Toolkit SWT) evolves, we can piggy-back
on it and develop a free R environment that can compete with S-Plus in the
GUI-oriented circles. 

Thanks in advance,
Vu Ha, PhD.
Information and Decision Technology
Honeywell Aerospace
3660 Technology Dr. 
Minneapolis, MN 55418
612-951-7114
http://cs.uwm.edu/~vu
 

From hin-tak.leung at cimr.cam.ac.uk  Mon Oct 24 20:15:16 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Mon, 24 Oct 2005 19:15:16 +0100
Subject: [Rd] Rgnome depends on obsolete components
	libglade/libxml	(PR#8247)
In-Reply-To: <1130171529.4216.17.camel@localhost.localdomain>
References: <20051024142925.86DBE21ED2@slim.kubism.ku.dk>	
	<x2mzky6gyj.fsf@viggo.kubism.ku.dk>
	<435D0850.9060309@cimr.cam.ac.uk>
	<1130171529.4216.17.camel@localhost.localdomain>
Message-ID: <435D24B4.4080403@cimr.cam.ac.uk>

Marc Schwartz (via MN) wrote:
> On Mon, 2005-10-24 at 17:14 +0100, Hin-Tak Leung wrote:
> 
>>Peter Dalgaard wrote:
<snipped>
>>>You mean get it upgraded to xml2 and glade2? Patches would likely be
>>>accepted... 
<snipped>
> 
> According to the R Admin manual (2.2.0) on page 34:
> 
> "This interface is experimental and incomplete. The console offers a
> basic command line editing and history mechanism, along with tool and
> button bars that give a point-and-click console to some R commands. Many
> of the features of the console are currently stubs, and the console is
> **no longer under development**: it has been kept available as an
> example of adding a front-end to R."
> 
> 
> This language (my emphasis added) would suggest that a TODO list does
> not (or should not) exist...so Peter's suggestion would seem spot on.

Peter's suggestion is spot on ("patches would likely be accepted"), 
yours suggestion, on the other hand...

You do understand that, as an *example*, studying it and/or trying
to learn to modify it is useful for future R improvements in
similiar areas, and you have just managed to discourage a few 
individuals from studying a complete if out-dated example.
(yes, I have spent a few hours modifying the code for glade2).

A TODO list doesn't mean that it has to be done by the R foundation
- if you can identify small bug do-able areas that needs improvement,
some individual might come along just for the fun/fame, and in the
end, the R foundation gains an outsider who is knowledgeable about
embedding R. e.g. some college professor might assign that as a
final year computer programming project, or some student might pick
it as one. Is it such a bad thing to have a list of "inadequacies
but nowhere important enough to get fixed any time soon" issues?

The possible gain - somebody decides to take it up, and move forward,
and in so doing, learns some R internals - is it such a bad thing?

Hin-Tak Leung


From ehlers at math.ucalgary.ca  Mon Oct 24 21:33:08 2005
From: ehlers at math.ucalgary.ca (P Ehlers)
Date: Mon, 24 Oct 2005 13:33:08 -0600
Subject: [Rd] download problem: Windows binaries - patched/devel versions
Message-ID: <435D36F4.9010500@math.ucalgary.ca>

Lately, I get a "page cannot be found" error (IE 6.0, Windows XP)
when I try to download the following:

http://cran.us.r-project.org/R-2.2.0pat-win32.exe
http://cran.us.r-project.org/R-2.3.0dev-win32.exe

(Same for all other mirrors (about 6) that I've tried.
Could someone please check if these files are accessible to them?
I'm guessing there's something haywire in my setup.

Note that I can ftp the files without problem.

-- 
Peter Ehlers
Department of Mathematics and Statistics
University of Calgary, 2500 University Dr. NW       ph: 403-220-3936


From ripley at stats.ox.ac.uk  Mon Oct 24 21:59:35 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 24 Oct 2005 20:59:35 +0100 (BST)
Subject: [Rd] download problem: Windows binaries - patched/devel versions
In-Reply-To: <435D36F4.9010500@math.ucalgary.ca>
References: <435D36F4.9010500@math.ucalgary.ca>
Message-ID: <Pine.LNX.4.61.0510242055450.13748@gannet.stats>

The addresses are wrong.  We know there are some incorrect links due to 
mirroring errors, but

http://cran.r-project.org/bin/windows/base/R-2.2.0pat-win32.exe

etc are there.

On Mon, 24 Oct 2005, P Ehlers wrote:

> Lately, I get a "page cannot be found" error (IE 6.0, Windows XP)
> when I try to download the following:
>
> http://cran.us.r-project.org/R-2.2.0pat-win32.exe
> http://cran.us.r-project.org/R-2.3.0dev-win32.exe
>
> (Same for all other mirrors (about 6) that I've tried.
> Could someone please check if these files are accessible to them?
> I'm guessing there's something haywire in my setup.
>
> Note that I can ftp the files without problem.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ehlers at math.ucalgary.ca  Mon Oct 24 22:05:11 2005
From: ehlers at math.ucalgary.ca (P Ehlers)
Date: Mon, 24 Oct 2005 14:05:11 -0600
Subject: [Rd] Problem with Rchtml.dll in R-2.3.0dev-win32.exe?
Message-ID: <435D3E77.9060803@math.ucalgary.ca>

Not really a problem, but I can't figure this out:
(OS: Windows XP SP2)

I have both R-patched ("R version 2.2.0, 2005-10-21")
and R-devel ("R version 2.3.0, 2005-10-21") installed.
For both, I set options(chmhelp = TRUE).
R-patched has no problems, but in R-devel, attempts to access
help result in a Windows error message:

"The procedure entry point HtmlHelpA at 16 could not be located
in the dynamic link library hhctrl.ocx."

with an R error message:

Error in dyn.load(x, as.logical(local), as.logical(now)) :
  unable to load shared library
'C:/StatisticsPrograms/R/Rdevel/bin/Rchtml.dll':
  LoadLibrary failure:  The specified procedure could not be found.

Replacing Rchtml.dll in \bin with that from R-patched fixes the
problem.

A hex file compare claims the two versions of Rchtml.dll are
identical, except for the creation dates.

Any ideas?


Peter

-- 
Peter Ehlers
University of Calgary


From mschwartz at mn.rr.com  Mon Oct 24 22:13:43 2005
From: mschwartz at mn.rr.com (mschwartz@mn.rr.com)
Date: Mon, 24 Oct 2005 22:13:43 +0200 (CEST)
Subject: [Rd] Rgnome depends on obsolete components libglade/libxml
	(PR#8249)
Message-ID: <20051024201343.6FDF921ECD@slim.kubism.ku.dk>

On Mon, 2005-10-24 at 19:15 +0100, Hin-Tak Leung wrote:
> Marc Schwartz (via MN) wrote:
> > On Mon, 2005-10-24 at 17:14 +0100, Hin-Tak Leung wrote:
> > 
> >>Peter Dalgaard wrote:
> <snipped>
> >>>You mean get it upgraded to xml2 and glade2? Patches would likely be
> >>>accepted... 
> <snipped>
> > 
> > According to the R Admin manual (2.2.0) on page 34:
> > 
> > "This interface is experimental and incomplete. The console offers a
> > basic command line editing and history mechanism, along with tool and
> > button bars that give a point-and-click console to some R commands. Many
> > of the features of the console are currently stubs, and the console is
> > **no longer under development**: it has been kept available as an
> > example of adding a front-end to R."
> > 
> > 
> > This language (my emphasis added) would suggest that a TODO list does
> > not (or should not) exist...so Peter's suggestion would seem spot on.
> 
> Peter's suggestion is spot on ("patches would likely be accepted"), 
> yours suggestion, on the other hand...
> 
> You do understand that, as an *example*, studying it and/or trying
> to learn to modify it is useful for future R improvements in
> similiar areas, and you have just managed to discourage a few 
> individuals from studying a complete if out-dated example.
> (yes, I have spent a few hours modifying the code for glade2).

Respectfully, I would disagree with your characterization of my reply. 

I simply pointed out (as it states in the manual) that there should be
no expectation of further development from R Core and as a result no
expectation of an _officially_ maintained, much less reviewed, TODO list
for the package.

It plainly indicates that it has been left as an example for others,
with no implication that one should be dissuaded from using it as such.
It was done (as others have characterized in prior threads) as a "proof
of concept", not as a fully functioning GUI.

Your reporting a RFE to the R Bug Tracking System would imply an
expectation that the request be officially tracked by R Core in some
fashion (even if just to close out the report) and/or perhaps be acted
upon at some future date by _somebody other than yourself_.

Peter's words were direct in that patches would _likely_ be accepted,
but at the same time are not being actively solicited. A substantive
difference, given that a patch made available for an official R package,
would still take some effort on the part of R Core to implement and
test.

It seems to me that yet another option here would be for you to offer to
take over as the package maintainer and bring it up to date to Gtk2, if
you are so inclined. The package has been made available under the GPL,
thus there is nothing precluding you from doing so and even creating a
new CRAN package based upon it.

The same approach is available for the orphaned packages on CRAN, so
this is nothing new.

This brings us full circle to the whole GUI discussion taking place and
so I'll leave it for that thread.

> A TODO list doesn't mean that it has to be done by the R foundation
> - if you can identify small bug do-able areas that needs improvement,
> some individual might come along just for the fun/fame, and in the
> end, the R foundation gains an outsider who is knowledgeable about
> embedding R. e.g. some college professor might assign that as a
> final year computer programming project, or some student might pick
> it as one. Is it such a bad thing to have a list of "inadequacies
> but nowhere important enough to get fixed any time soon" issues?

I think that the question is more, what TODO list, where and maintained
by whom?

In this case, with a package that is no longer being actively maintained
by R Core, it may very well be appropriate to have a separate TODO list
or even Wiki someplace to address issues where participation by useRs is
being actively solicited. The R-sig-* mailing lists would certainly be
one place for such focused activities.

> The possible gain - somebody decides to take it up, and move forward,
> and in so doing, learns some R internals - is it such a bad thing?

Not bad at all. It is more a question of what is the appropriate
mechanism to facilitate such activity, in a fashion that does not have
an impact on R Core, unless it is truly required.

Best regards,

Marc


From keith at nissimo.net  Mon Oct 24 22:16:14 2005
From: keith at nissimo.net (keith@nissimo.net)
Date: Mon, 24 Oct 2005 22:16:14 +0200 (CEST)
Subject: [Rd] X11 redraw events dropped? (PR#8250)
Message-ID: <20051024201614.5A70521ED1@slim.kubism.ku.dk>

Full_Name: Keith Frost
Version: 2.1.0
OS: Debian Sarge
Submission from: (NULL) (66.162.141.10)


This has actually been a problem for some time in R under Linux. (I noticed 
it under previous builds for Redhat 9 as well.)  The graphics device windows
produced by the x11() function do not always get redrawn when they should, 
sometimes leaving the device blank when there should be a graph on it.  
I do not know for sure that this is an R-specific problem (I suppose the 
window manager could be failing to pass along the correct redraw information), 
but I thought I'd try to find out if other people are experiencing it, and 
if it can be tracked down and fixed.

To reproduce:

Bring up a number of plots with the x11() function, and graph things on them.  
Move 
other windows to cover, and then reveal, the various plot windows, until -- one
or more
of your graphs disappears.  Move the graphs over each other to get the graphs to
come
back.   Etc.


From p.murrell at auckland.ac.nz  Mon Oct 24 22:22:48 2005
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Tue, 25 Oct 2005 09:22:48 +1300
Subject: [Rd] Problems with example(Grid) in grid package
References: <971536df0510210719m535de052s4ea9d5737ccf4119@mail.gmail.com>
	<f8e6ff050510211003g29cb94a6o13fe5e33fe0a1335@mail.gmail.com>
Message-ID: <435D4298.8030703@stat.auckland.ac.nz>

Hi


hadley wickham wrote:
 > I've also noticed the behaviour of grid.rect() has changed in 2.2.0.
 > Before the fill defaulted to transparent, but now it defaults to
 > white.


The initial value of the 'gp' settings for the ROOT grid viewport has 
changed in 2.2.0 (see grid/doc/changes.txt).  Before it defaulted to 
transparent, but now it defaults to whatever the 'bg' is for the current 
device (on some, e.g., png() this is "white", though I'm not sure why 
right now) so on some devices something like grid.rect() behaves 
differently.

If before you had something like ...

   <draw, draw, draw ...>
   # Now I think I'll draw a nice border around the outside
   grid.rect()

... you should either do ...

   # I'll draw a rectangle first in case there is a non-transparent
   # fill in effect;  NOTE that if I was writing perfect grid code
   # I would always be aware that I might be being drawn in a viewport
   # that was defined by someone else who might have, for example,
   # defined a non-transparent fill, so it's not entirely
   # grid's fault that things suddenly aren't working as I planned
   grid.rect()
   <draw, draw, draw ...>

... or ...

   <draw, draw, draw ...>
   # Now I think I'll draw a nice border around the outside
   # AND I really want JUST the border;  I have absolutely no
   # intention of filling this rectangle, no matter what the
   # current fill setting happens to be
   grid.rect(gp=gpar(fill="transparent"))
	
Paul


 > On 10/21/05, Gabor Grothendieck <ggrothendieck at gmail.com> wrote:
 >
 >>The following:
 >>
 >>library(grid)
 >>grid.newpage()
 >>example(Grid)
 >>
 >>has the yaxis label partly cut off and the x axis label does not 
appear at all.
 >>Also ?grid.multipanel in that example brings up documentation for
 >>grid-internal but this would not seem to be internal if its part of 
an example.
 >>
 >>I am using:
 >>
 >>
 >>>R.version.string  # Windows XP
 >>
 >>[1] "R version 2.2.0, 2005-09-20"
 >>
 >>______________________________________________
 >>R-devel at r-project.org mailing list
 >>https://stat.ethz.ch/mailman/listinfo/r-devel
 >>
 >
 >
 > ______________________________________________
 > R-devel at r-project.org mailing list
 > https://stat.ethz.ch/mailman/listinfo/r-devel


-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/


From p.murrell at auckland.ac.nz  Mon Oct 24 22:29:12 2005
From: p.murrell at auckland.ac.nz (Paul Murrell)
Date: Tue, 25 Oct 2005 09:29:12 +1300
Subject: [Rd] Problems with example(Grid) in grid package
References: <971536df0510210719m535de052s4ea9d5737ccf4119@mail.gmail.com>
Message-ID: <435D4418.9010105@stat.auckland.ac.nz>

Hi


Gabor Grothendieck wrote:
> The following:
> 
> library(grid)
> grid.newpage()
> example(Grid)
> 
> has the yaxis label partly cut off and the x axis label does not appear at all.
> Also ?grid.multipanel in that example brings up documentation for
> grid-internal but this would not seem to be internal if its part of an example.


grid.multipanel() is just a demo hack function, not intended for people 
to use for anything serious, just meant to provide an example of what 
can be done.  It had some merit when grid was just a prototype package 
for people to play with.  Now that grid is more mature I should probably 
just kill grid.multipanel().

Paul
-- 
Dr Paul Murrell
Department of Statistics
The University of Auckland
Private Bag 92019
Auckland
New Zealand
64 9 3737599 x85392
paul at stat.auckland.ac.nz
http://www.stat.auckland.ac.nz/~paul/


From ripley at stats.ox.ac.uk  Mon Oct 24 22:41:04 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 24 Oct 2005 21:41:04 +0100 (BST)
Subject: [Rd] Problems with example(Grid) in grid package
In-Reply-To: <435D4298.8030703@stat.auckland.ac.nz>
References: <971536df0510210719m535de052s4ea9d5737ccf4119@mail.gmail.com>
	<f8e6ff050510211003g29cb94a6o13fe5e33fe0a1335@mail.gmail.com>
	<435D4298.8030703@stat.auckland.ac.nz>
Message-ID: <Pine.LNX.4.61.0510242138580.14299@gannet.stats>

On Tue, 25 Oct 2005, Paul Murrell wrote:

> hadley wickham wrote:
> > I've also noticed the behaviour of grid.rect() has changed in 2.2.0.
> > Before the fill defaulted to transparent, but now it defaults to
> > white.
>
>
> The initial value of the 'gp' settings for the ROOT grid viewport has
> changed in 2.2.0 (see grid/doc/changes.txt).  Before it defaulted to
> transparent, but now it defaults to whatever the 'bg' is for the current
> device (on some, e.g., png() this is "white", though I'm not sure why
> right now)

Because many (maybe even most) png viewers do not handle transparency 
correctly.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Mon Oct 24 22:56:35 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Mon, 24 Oct 2005 21:56:35 +0100 (BST)
Subject: [Rd] X11 redraw events dropped? (PR#8250)
In-Reply-To: <20051024201614.5A70521ED1@slim.kubism.ku.dk>
References: <20051024201614.5A70521ED1@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.61.0510242150390.14873@gannet.stats>

Please, your R is well out of date and you are asked NOT to submit bug 
reports on obselete versions.  Nor, BTW, on things you are not sure are R 
bugs.

The window manager hinting was changed in 2.2.0, and some people who used 
to experience this sort of thing say it is solved.


On Mon, 24 Oct 2005 keith at nissimo.net wrote:

> Full_Name: Keith Frost
> Version: 2.1.0
> OS: Debian Sarge
> Submission from: (NULL) (66.162.141.10)
>
>
> This has actually been a problem for some time in R under Linux. (I noticed
> it under previous builds for Redhat 9 as well.)  The graphics device windows
> produced by the x11() function do not always get redrawn when they should,
> sometimes leaving the device blank when there should be a graph on it.
> I do not know for sure that this is an R-specific problem (I suppose the
> window manager could be failing to pass along the correct redraw information),
> but I thought I'd try to find out if other people are experiencing it, and
> if it can be tracked down and fixed.
>
> To reproduce:
>
> Bring up a number of plots with the x11() function, and graph things on them.
> Move
> other windows to cover, and then reveal, the various plot windows, until -- one
> or more
> of your graphs disappears.  Move the graphs over each other to get the graphs to
> come
> back.   Etc.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ehlers at math.ucalgary.ca  Mon Oct 24 23:45:36 2005
From: ehlers at math.ucalgary.ca (P Ehlers)
Date: Mon, 24 Oct 2005 15:45:36 -0600
Subject: [Rd] download problem: Windows binaries - patched/devel versions
In-Reply-To: <Pine.LNX.4.61.0510242055450.13748@gannet.stats>
References: <435D36F4.9010500@math.ucalgary.ca>
	<Pine.LNX.4.61.0510242055450.13748@gannet.stats>
Message-ID: <435D5600.6030206@math.ucalgary.ca>

Thanks for the quick response.

-Peter

Prof Brian Ripley wrote:
> The addresses are wrong.  We know there are some incorrect links due to 
> mirroring errors, but
> 
> http://cran.r-project.org/bin/windows/base/R-2.2.0pat-win32.exe
> 
> etc are there.
> 
> On Mon, 24 Oct 2005, P Ehlers wrote:
> 
>> Lately, I get a "page cannot be found" error (IE 6.0, Windows XP)
>> when I try to download the following:
>>
>> http://cran.us.r-project.org/R-2.2.0pat-win32.exe
>> http://cran.us.r-project.org/R-2.3.0dev-win32.exe
>>
>> (Same for all other mirrors (about 6) that I've tried.
>> Could someone please check if these files are accessible to them?
>> I'm guessing there's something haywire in my setup.
>>
>> Note that I can ftp the files without problem.
> 
> 

-- 
Peter Ehlers
University of Calgary


From murdoch at stats.uwo.ca  Tue Oct 25 01:04:19 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 24 Oct 2005 19:04:19 -0400
Subject: [Rd] download problem: Windows binaries - patched/devel versions
In-Reply-To: <435D36F4.9010500@math.ucalgary.ca>
References: <435D36F4.9010500@math.ucalgary.ca>
Message-ID: <435D6873.7080400@stats.uwo.ca>

P Ehlers wrote:
> Lately, I get a "page cannot be found" error (IE 6.0, Windows XP)
> when I try to download the following:
> 
> http://cran.us.r-project.org/R-2.2.0pat-win32.exe
> http://cran.us.r-project.org/R-2.3.0dev-win32.exe
> 
> (Same for all other mirrors (about 6) that I've tried.
> Could someone please check if these files are accessible to them?
> I'm guessing there's something haywire in my setup.
> 
> Note that I can ftp the files without problem.

The files are where they have always been (in 
<mirror>/bin/windows/base), but the mirroring software has started 
playing around with the URLs, adding in lots of ".."'s to the path.  If 
you manually edit the path you'll find them.  We're working on fixing 
the mirroring.

To be explicit:  get them from

http://cran.us.r-project.org/bin/windows/base/R-2.2.0pat-win32.exe
http://cran.us.r-project.org/bin/windows/base/R-2.3.0dev-win32.exe

Duncan Murdoch


From ggrothendieck at gmail.com  Tue Oct 25 01:30:50 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 24 Oct 2005 19:30:50 -0400
Subject: [Rd] Problems with example(Grid) in grid package
In-Reply-To: <435D4418.9010105@stat.auckland.ac.nz>
References: <971536df0510210719m535de052s4ea9d5737ccf4119@mail.gmail.com>
	<435D4418.9010105@stat.auckland.ac.nz>
Message-ID: <971536df0510241630j4776d55cx3957f8c6717bf67a@mail.gmail.com>

On 10/24/05, Paul Murrell <p.murrell at auckland.ac.nz> wrote:
> Hi
>
>
> Gabor Grothendieck wrote:
> > The following:
> >
> > library(grid)
> > grid.newpage()
> > example(Grid)
> >
> > has the yaxis label partly cut off and the x axis label does not appear at all.
> > Also ?grid.multipanel in that example brings up documentation for
> > grid-internal but this would not seem to be internal if its part of an example.
>
>
> grid.multipanel() is just a demo hack function, not intended for people
> to use for anything serious, just meant to provide an example of what
> can be done.  It had some merit when grid was just a prototype package
> for people to play with.  Now that grid is more mature I should probably
> just kill grid.multipanel().

If you kill it I still think it would be a nice to provide a similar
example.  I am sorry that I missed knowing about it when initially
trying to learn how to do layouts since it might have saved me some
time.  Maybe it can be incorporated into the example section of one
of the help files or into a demo or even a vignette on grid.multipanel.

Also note that grid.multipanel is used not only in Grid but also in:
  http://www.stat.auckland.ac.nz/~paul/grid/doc/rotated.pdf


From mdsumner at utas.edu.au  Tue Oct 25 07:42:37 2005
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Tue, 25 Oct 2005 16:42:37 +1100
Subject: [Rd] strptime problem for 2004-10-03 02:00:00
Message-ID: <435DC5CD.7030803@utas.edu.au>

Hello, I at first thought this was a system or locale issue, but since 
it occurs on
both Windows and Linux and only for 2004 (AFAIK) I report it.

I have a problem with as.POSIXct for the hour between
"2004-10-03 02:00:00 GMT" and "2004-10-03 02:59:59 GMT".  

In short, the 2 AM (GMT) hour in 2004 (but not in other years) is 
interpreted as 1 AM by strptime:
(I use ISOdatetime as a convenience).

## Windows XP

ISOdatetime(2004, 10, 3, 2, 0, 0,  tz = "GMT")
##[1] "2004-10-03 01:00:00 GMT"
ISOdatetime(2004, 10, 3, 1, 0, 0,  tz = "GMT")
##[1] "2004-10-03 01:00:00 GMT"

 ISOdatetime(2005, 10, 3, 2, 0, 0,  tz = "GMT")
##[1] "2005-10-03 02:00:00 GMT"
 ISOdatetime(2005, 10, 3, 1, 0, 0,  tz = "GMT")
## [1] "2005-10-03 01:00:00 GMT"


I've not explored it for other years, but it is not a problem for the 
same time in previous and next years.
I only found it as I have a continuous sequence of date-times that cover 
that time period, the problem
is not created by traversing that time with seq.POSIXt.

I usually use Windows XP, below I also give results on Linux  (release 
"2.4.21-37.ELsmp").  On that
machine the times are incorrect in the other direction (in 2004, 2 AM is 
interpreted as 3 AM).

My (Windows) system is set to automatically adjust for daylight summer 
time, and if I uncheck this and restart R
the problem is "fixed".  I don't know how I would do that on Linux, but 
it's a server anyway so I couldn't.  

## R 2.2.0
## Windows XP, SP2
## System time is set to (GMT+10:00) Hobart  -  Tasmanian Summer Time (1 
hour forward of GMT+10)
Sys.getlocale()
## [1] 
"LC_COLLATE=English_Australia.1252;LC_CTYPE=English_Australia.1252;LC_MONETARY=English_Australia.1252;LC_NUMERIC=C;LC_TIME=English_Australia.1252"

#### Try for 2004

(t1 <- ISOdatetime(2004, 10, 3, 1, 0, 0, tz = "GMT"))
##[1] "2004-10-03 01:00:00 GMT"
(t2 <- ISOdatetime(2004, 10, 3, 2, 0, 0, tz = "GMT"))
##[1] "2004-10-03 01:00:00 GMT"

## no difference - why?  
 t2 - t1
## Time difference of 0 secs

## Try for 2005

(t1 <- ISOdatetime(2005, 10, 3, 1, 0, 0, tz = "GMT"))
##[1] "2005-10-03 01:00:00 GMT"

(t2 <- ISOdatetime(2005, 10, 3, 2, 0, 0, tz = "GMT") )
##[1] "2005-10-03 02:00:00 GMT"

## 1 hour difference - as expected  
t2 - t1
## Time difference of 1 hours


####
#### LINUX
####

## R 2.2.0
## Linux (release "2.4.21-37.ELsmp"
## System time is set to (EST) - summer time (I don't know how to find 
more about this)
Sys.getlocale()
## [1] 
"LC_CTYPE=en_AU.UTF-8;LC_NUMERIC=C;LC_TIME=en_AU.UTF-8;LC_COLLATE=en_AU.UTF-8;LC_MONETARY=en_AU.UTF-8;LC_MESSAGES=en_AU.UTF-8;LC_PAPER=C;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=C;LC_IDENTIFICATION=C"


#### Try for 2004

(t1 <- ISOdatetime(2004, 10, 3, 1, 0, 0, tz = "GMT"))
## [1] "2004-10-03 01:00:00 GMT"

 (t2 <- ISOdatetime(2004, 10, 3, 2, 0, 0, tz = "GMT"))
##[1] "2004-10-03 03:00:00 GMT"

## difference of 2 hours - why?
 t2 - t1
## Time difference of 2 hours


 ## Try for 2005

 (t1 <- ISOdatetime(2005, 10, 3, 1, 0, 0, tz = "GMT"))
##[1] "2005-10-03 01:00:00 GMT"

(t2 <- ISOdatetime(2005, 10, 3, 2, 0, 0, tz = "GMT") )
##[1] "2005-10-03 02:00:00 GMT"


## one hour difference as expected
 t2 - t1
## Time difference of 1 hours


From hin-tak.leung at cimr.cam.ac.uk  Tue Oct 25 10:54:30 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Tue, 25 Oct 2005 09:54:30 +0100
Subject: [Rd] Rgnome depends on obsolete components
	libglade/libxml	(PR#8247)
In-Reply-To: <1130184800.4216.112.camel@localhost.localdomain>
References: <20051024142925.86DBE21ED2@slim.kubism.ku.dk>	
	<x2mzky6gyj.fsf@viggo.kubism.ku.dk>
	<435D0850.9060309@cimr.cam.ac.uk>	
	<1130171529.4216.17.camel@localhost.localdomain>	
	<435D24B4.4080403@cimr.cam.ac.uk>
	<1130184800.4216.112.camel@localhost.localdomain>
Message-ID: <435DF2C6.5080805@cimr.cam.ac.uk>

Marc Schwartz (via MN) wrote:
<snipped>
> This brings us full circle to the whole GUI discussion taking place and
> so I'll leave it for that thread.

That's unfortunately correct. The three GUI's (out of the dozen listed 
at R-GUI FAQ) I have so far looked into, are all somewhat "officially"
endorsed:

(1) Sciview-R comes from the author/primary-maintainer of the R-GUI FAQ.
(2) RGUI is bundled with R.
(3) RgnomeGUI has been officially bundled with R in the past and only 
(recently?) splitted out as a separate contrib package.

I have started in the order of perceived "authenticity" (which may
obviously be misguided). The others of the dozen don't carry the
same "authenticity". e.g. JGR seems a fine one, and so does some of
the others. At the moment, I don't have a 4th candidate.

We have gone through this point before - it appears that
you don't need a GUI, I don't need it either, but somebody else may
need one, and as such, in a supervisory/teaching role one tries to
find a common denominator e.g. so students can exchange notes and
tips, and so that novices can ask "stupid" questions and expect
statistically significant number of sympathetic ears to offer
helpful advices without the self-confessed experts coming down
hard on them for being stupid.

Hin-Tak Leung


From hin-tak.leung at cimr.cam.ac.uk  Tue Oct 25 10:54:46 2005
From: hin-tak.leung at cimr.cam.ac.uk (hin-tak.leung@cimr.cam.ac.uk)
Date: Tue, 25 Oct 2005 10:54:46 +0200 (CEST)
Subject: [Rd] Rgnome depends on obsolete components
	libglade/libxml	(PR#8247)
Message-ID: <20051025085446.4777BBB7C@slim.kubism.ku.dk>

Marc Schwartz (via MN) wrote:
<snipped>
> This brings us full circle to the whole GUI discussion taking place and
> so I'll leave it for that thread.

That's unfortunately correct. The three GUI's (out of the dozen listed 
at R-GUI FAQ) I have so far looked into, are all somewhat "officially"
endorsed:

(1) Sciview-R comes from the author/primary-maintainer of the R-GUI FAQ.
(2) RGUI is bundled with R.
(3) RgnomeGUI has been officially bundled with R in the past and only 
(recently?) splitted out as a separate contrib package.

I have started in the order of perceived "authenticity" (which may
obviously be misguided). The others of the dozen don't carry the
same "authenticity". e.g. JGR seems a fine one, and so does some of
the others. At the moment, I don't have a 4th candidate.

We have gone through this point before - it appears that
you don't need a GUI, I don't need it either, but somebody else may
need one, and as such, in a supervisory/teaching role one tries to
find a common denominator e.g. so students can exchange notes and
tips, and so that novices can ask "stupid" questions and expect
statistically significant number of sympathetic ears to offer
helpful advices without the self-confessed experts coming down
hard on them for being stupid.

Hin-Tak Leung


From dsamperi at DecisionSynergy.com  Tue Oct 25 13:43:09 2005
From: dsamperi at DecisionSynergy.com (Dominick Samperi)
Date: Tue, 25 Oct 2005 07:43:09 -0400
Subject: [Rd] Small issue with R's C API
Message-ID: <435E1A4D.102@DecisionSynergy.com>

Consider the R code:
mat <- matrix(seq(1,20),4,5)
is.matrix(mat) # gives TRUE
is.vector(mat) # gives FALSE

On the other hand, if mat is passed through the .Call interface the
corresponding SEXP (call it smat) satisfies
isMatrix(smat)   // TRUE
isVector(smat)  // TRUE

Consequently, you cannot distinguish matrices from vectors. Looking
at the dim attribute of a vector doesn't help because this is garbage.

Dominick


From ripley at stats.ox.ac.uk  Tue Oct 25 14:01:20 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 25 Oct 2005 13:01:20 +0100 (BST)
Subject: [Rd] Small issue with R's C API
In-Reply-To: <435E1A4D.102@DecisionSynergy.com>
References: <435E1A4D.102@DecisionSynergy.com>
Message-ID: <Pine.LNX.4.61.0510251254220.10299@gannet.stats>

This is nothing to do with the C API: isVector and isMatrix are not part 
of the API (see Writing R Extensions for what it is).  That's the `issue' 
here.

On Tue, 25 Oct 2005, Dominick Samperi wrote:

> Consider the R code:
> mat <- matrix(seq(1,20),4,5)
> is.matrix(mat) # gives TRUE
> is.vector(mat) # gives FALSE
>
> On the other hand, if mat is passed through the .Call interface the
> corresponding SEXP (call it smat) satisfies
> isMatrix(smat)   // TRUE
> isVector(smat)  // TRUE
>
> Consequently, you cannot distinguish matrices from vectors. Looking
> at the dim attribute of a vector doesn't help because this is garbage.

You can look to see if it has a dim attribute ... you could also look at 
the C code for is.vector.

Where did you find a definition of isVector?  There is one in the comments 
in src/main/util.c.  It is not as you seem to be assuming a C analogue of
is.vector.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From dsamperi at DecisionSynergy.com  Tue Oct 25 14:38:31 2005
From: dsamperi at DecisionSynergy.com (Dominick Samperi)
Date: Tue, 25 Oct 2005 08:38:31 -0400
Subject: [Rd] Small issue with R's C API
In-Reply-To: <Pine.LNX.4.61.0510251254220.10299@gannet.stats>
References: <435E1A4D.102@DecisionSynergy.com>
	<Pine.LNX.4.61.0510251254220.10299@gannet.stats>
Message-ID: <435E2747.7090008@DecisionSynergy.com>

Prof Brian Ripley wrote:
> This is nothing to do with the C API: isVector and isMatrix are not 
> part of the API (see Writing R Extensions for what it is).  That's the 
> `issue' here.
>
> On Tue, 25 Oct 2005, Dominick Samperi wrote:
>
>> Consider the R code:
>> mat <- matrix(seq(1,20),4,5)
>> is.matrix(mat) # gives TRUE
>> is.vector(mat) # gives FALSE
>>
>> On the other hand, if mat is passed through the .Call interface the
>> corresponding SEXP (call it smat) satisfies
>> isMatrix(smat)   // TRUE
>> isVector(smat)  // TRUE
>>
>> Consequently, you cannot distinguish matrices from vectors. Looking
>> at the dim attribute of a vector doesn't help because this is garbage.
>
> You can look to see if it has a dim attribute ... you could also look 
> at the C code for is.vector.
>
> Where did you find a definition of isVector?  There is one in the 
> comments in src/main/util.c.  It is not as you seem to be assuming a C 
> analogue of
> is.vector.
>
I probably grep-ed Rinternals.h, or looked in the section of that file 
for definitions similar to isMatrix, or just guessed that
if there is an isMatix, there probably is an isVector (I realize that 
there is no substitute for the manual when it comes to
finding things like isNewList, instead of the "guess" isList).

Thanks for the tip about looking at the code for is.vector...

Dominick


From dsamperi at DecisionSynergy.com  Tue Oct 25 15:34:24 2005
From: dsamperi at DecisionSynergy.com (Dominick Samperi)
Date: Tue, 25 Oct 2005 09:34:24 -0400
Subject: [Rd] Small issue with R's C API
In-Reply-To: <Pine.LNX.4.61.0510251254220.10299@gannet.stats>
References: <435E1A4D.102@DecisionSynergy.com>
	<Pine.LNX.4.61.0510251254220.10299@gannet.stats>
Message-ID: <435E3460.3020203@DecisionSynergy.com>

Prof Brian Ripley wrote:
> This is nothing to do with the C API: isVector and isMatrix are not 
> part of the API (see Writing R Extensions for what it is).  That's the 
> `issue' here.
>
> On Tue, 25 Oct 2005, Dominick Samperi wrote:
>
>> Consider the R code:
>> mat <- matrix(seq(1,20),4,5)
>> is.matrix(mat) # gives TRUE
>> is.vector(mat) # gives FALSE
>>
>> On the other hand, if mat is passed through the .Call interface the
>> corresponding SEXP (call it smat) satisfies
>> isMatrix(smat)   // TRUE
>> isVector(smat)  // TRUE
>>
>> Consequently, you cannot distinguish matrices from vectors. Looking
>> at the dim attribute of a vector doesn't help because this is garbage.
>
> You can look to see if it has a dim attribute ... you could also look 
> at the C code for is.vector.
The first option here does not seem to work. The code

SEXP dimAttr = getAttrib(smat, R_DimSymbol)

does not set dimAttr to 0 (NULL) wheh smat is actually a vector.


From kkiii at indiana.edu  Tue Oct 25 15:54:57 2005
From: kkiii at indiana.edu (kkiii@indiana.edu)
Date: Tue, 25 Oct 2005 15:54:57 +0200 (CEST)
Subject: [Rd] Noncentral problems in pf() (PR#8251)
Message-ID: <20051025135457.8C17620BEF@slim.kubism.ku.dk>

Full_Name: Ken Kelley
Version: 2.2
OS: Windows XP
Submission from: (NULL) (156.56.3.241)


It seems that the pf() function when used with noncentral parameters can 
behave badly at times. I've included some examples below, but what is 
happening is that with some combinations of df and ncp parameters, 
regardless of how large the quantile gets, the same probability value is 
returned. Upon first glance noncentral values greater than 200 may seem 
large, but they are in some contexts not large at all. The problems with 
pf() can thus have serious implications (for example, in the context of 
sample size planning).

I noticed that in in 1999 and 2000 issues with large degrees of freedom 
came about (PR#138), but I couldn't find the present issue reported 
anywhere.

# <Begin example code>
X <- seq(10, 600, 10)

# Gets stuck at .99135
############################
round(pf(X, 10, 1000, 225), 5)
round(pf(X, 10, 200, 225), 5)

round(pf(X, 5, 1000, 225), 5)
round(pf(X, 5, 200, 225), 5)

round(pf(X, 1, 1000, 225), 5)
round(pf(X, 1, 200, 225), 5)

# Gets stuck at .97035
############################
round(pf(X, 10, 1000, 250), 5)
round(pf(X, 10, 200, 250), 5)

round(pf(X, 5, 1000, 250), 5)
round(pf(X, 5, 200, 250), 5)

round(pf(X, 1, 1000, 250), 5)
round(pf(X, 1, 200, 250), 5)

# Gets stuck at .93539
############################
round(pf(X, 10, 1000, 275), 5)
round(pf(X, 10, 200, 275), 5)

round(pf(X, 5, 1000, 275), 5)
round(pf(X, 5, 200, 275), 5)

round(pf(X, 1, 1000, 275), 5)
round(pf(X, 1, 200, 275), 5)
# <end example code>


From bullard at berkeley.edu  Tue Oct 25 16:31:02 2005
From: bullard at berkeley.edu (James Bullard)
Date: Tue, 25 Oct 2005 07:31:02 -0700
Subject: [Rd] native logistic regression
In-Reply-To: <435E2747.7090008@DecisionSynergy.com>
References: <435E1A4D.102@DecisionSynergy.com>	<Pine.LNX.4.61.0510251254220.10299@gannet.stats>
	<435E2747.7090008@DecisionSynergy.com>
Message-ID: <435E41A6.7020108@berkeley.edu>

Hello, thanks for the answers to my last questions and apologies for not 
seeing the answers staring me down in the manual. At the risk of asking 
another potentially obvious question ... we are currently using some of 
the NAG routines for model fitting and I am trying to re-write the 
relevant portions of the code to use R's built in utilities (dqrls).  
The next step is to implement logistic regression (iteratively 
reweighted least-squares logistic link fn). glm does the iteration in R 
and it is just not acceptable to call R's routine from C - my first 
inclination was just to rewrite the loop of R in C, but I thought I 
would ask first to see: 1) if there was a standard C or Fortran routine 
in R for doing iteratively reweighted least squares using the logistic 
link function, and 2) if there is no routine in the core libraries of R, 
do people have knowledge of R packages which have implemented this 
natively?

Thanks again for all of the help, jim


From RKrug at sun.ac.za  Tue Oct 25 17:16:59 2005
From: RKrug at sun.ac.za (Rainer M. Krug)
Date: Tue, 25 Oct 2005 17:16:59 +0200
Subject: [Rd] How to uninstall R when installed with "make install"
Message-ID: <435E4C6B.5050005@sun.ac.za>

Hi

How can I uninstall R when I installed it with "make install"?

Thanks,

Rainer


-- 
NEW TELEPHONE NUMBER
Tel:		+27 - (0)72 808 2975 (w)

Rainer M. Krug, Dipl. Phys. (Germany), MSc Conservation
Biology (UCT)

Department of Conservation Ecology
University of Stellenbosch
Matieland 7602
South Africa

Tel:		+27 - (0)72 808 2975 (w)
Fax:		+27 - (0)21 808 3304
Cell:		+27 - (0)83 9479 042

email:	RKrug at sun.ac.za
       	Rainer at krugs.de


From ripley at stats.ox.ac.uk  Tue Oct 25 17:22:05 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 25 Oct 2005 16:22:05 +0100 (BST)
Subject: [Rd] How to uninstall R when installed with "make install"
In-Reply-To: <435E4C6B.5050005@sun.ac.za>
References: <435E4C6B.5050005@sun.ac.za>
Message-ID: <Pine.LNX.4.61.0510251620400.17341@gannet.stats>

On Tue, 25 Oct 2005, Rainer M. Krug wrote:

> How can I uninstall R when I installed it with "make install"?

Did you try 'make uninstall' as the manual says?  Works for me.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Oct 25 17:26:13 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 25 Oct 2005 16:26:13 +0100 (BST)
Subject: [Rd] Small issue with R's C API
In-Reply-To: <435E3460.3020203@DecisionSynergy.com>
References: <435E1A4D.102@DecisionSynergy.com>
	<Pine.LNX.4.61.0510251254220.10299@gannet.stats>
	<435E3460.3020203@DecisionSynergy.com>
Message-ID: <Pine.LNX.4.61.0510251614550.17341@gannet.stats>

An R NULL does not map to a C NULL.

Please learn to distinguish documented facts from uninformed guesswork.

On Tue, 25 Oct 2005, Dominick Samperi wrote:

> Prof Brian Ripley wrote:
>> This is nothing to do with the C API: isVector and isMatrix are not
>> part of the API (see Writing R Extensions for what it is).  That's the
>> `issue' here.
>>
>> On Tue, 25 Oct 2005, Dominick Samperi wrote:
>>
>>> Consider the R code:
>>> mat <- matrix(seq(1,20),4,5)
>>> is.matrix(mat) # gives TRUE
>>> is.vector(mat) # gives FALSE
>>>
>>> On the other hand, if mat is passed through the .Call interface the
>>> corresponding SEXP (call it smat) satisfies
>>> isMatrix(smat)   // TRUE
>>> isVector(smat)  // TRUE
>>>
>>> Consequently, you cannot distinguish matrices from vectors. Looking
>>> at the dim attribute of a vector doesn't help because this is garbage.
>>
>> You can look to see if it has a dim attribute ... you could also look
>> at the C code for is.vector.
> The first option here does not seem to work. The code
>
> SEXP dimAttr = getAttrib(smat, R_DimSymbol)
>
> does not set dimAttr to 0 (NULL) wheh smat is actually a vector.
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From dsamperi at DecisionSynergy.com  Tue Oct 25 17:51:16 2005
From: dsamperi at DecisionSynergy.com (Dominick Samperi)
Date: Tue, 25 Oct 2005 11:51:16 -0400
Subject: [Rd] Small issue with R's C API
In-Reply-To: <Pine.LNX.4.61.0510251614550.17341@gannet.stats>
References: <435E1A4D.102@DecisionSynergy.com>
	<Pine.LNX.4.61.0510251254220.10299@gannet.stats>
	<435E3460.3020203@DecisionSynergy.com>
	<Pine.LNX.4.61.0510251614550.17341@gannet.stats>
Message-ID: <435E5474.1080407@DecisionSynergy.com>

Prof Brian Ripley wrote:
> An R NULL does not map to a C NULL.
>
> Please learn to distinguish documented facts from uninformed guesswork.
Any probably it should be added that users should not look at
Rinternals.h, because they will find things like NILSXP that are
defined to be 0 (C NULL).


From lai at lindaspaces.com  Tue Oct 25 18:54:12 2005
From: lai at lindaspaces.com (Jennifer Lai)
Date: Tue, 25 Oct 2005 12:54:12 -0400
Subject: [Rd] performance of nchar
Message-ID: <435E6334.5050003@lindaspaces.com>

Hi,
    Is nchar function knowingly slow in R? I'm doing some string 
formatting that requires multiple call to nchar, and nchar seems to be 
very slow.

Experiment 1, pass nchar inside sprintf, and it takes 0.7 seconds
 > system.time(for (i in 1:10000)
+ str = sprintf('0005%020d', nchar(op))
+ )[3]
[1] 0.7

Experiment 2, get the length of op separately using nchar, and then pass 
the value to sprintf.
 > len = nchar(op)
 > system.time(for (i in 1:10000)
+ str = sprintf('0005%020d', len)
+ )[3]
[1] 0.03

Experiment 3, time nchar for 10000 iterations
 > system.time(for (i in 1:10000)
+ nchar(op)
+ )[3]
[1] 0.66

Is there any faster way of getting the length of string in R?

Thank you in advance for your help!


Sincerely,
Jennifer


From ripley at stats.ox.ac.uk  Tue Oct 25 19:34:48 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 25 Oct 2005 18:34:48 +0100 (BST)
Subject: [Rd] performance of nchar
In-Reply-To: <435E6334.5050003@lindaspaces.com>
References: <435E6334.5050003@lindaspaces.com>
Message-ID: <Pine.LNX.4.61.0510251818380.18797@gannet.stats>

On Tue, 25 Oct 2005, Jennifer Lai wrote:

> Hi,
>    Is nchar function knowingly slow in R? I'm doing some string
> formatting that requires multiple call to nchar, and nchar seems to be
> very slow.

Is 70 usec 'very slow'?

Both nchar and sprintf are vectorized, so why not make use of that?

> str <- rep("foo", 10000)
> system.time(nchar(str))
[1] 0 0 0 0 0
> system.time(for(i in 1:10000) nchar(str[i]))
[1] 0.98 0.00 0.98 0.00 0.00

Not making use of vectorization is known to be slow.
In this case it is match.arg() taking the time:

> str <- rep("foo", 10000)
> Rprof()
> system.time(for(i in 1:10000) nchar(str[i]))
[1] 0.92 0.00 0.91 0.00 0.00
> Rprof(NULL)
> summaryRprof()
...
$by.total
                total.time total.pct self.time self.pct
"system.time"        0.94     100.0      0.00      0.0
"eval"               0.88      93.6      0.08      8.5
"nchar"              0.86      91.5      0.04      4.3
"match.arg"          0.82      87.2      0.04      4.3
"deparse"            0.58      61.7      0.12     12.8

so you could write a stripped-down version if really needed.

>
> Experiment 1, pass nchar inside sprintf, and it takes 0.7 seconds
> > system.time(for (i in 1:10000)
> + str = sprintf('0005%020d', nchar(op))
> + )[3]
> [1] 0.7
>
> Experiment 2, get the length of op separately using nchar, and then pass
> the value to sprintf.
> > len = nchar(op)
> > system.time(for (i in 1:10000)
> + str = sprintf('0005%020d', len)
> + )[3]
> [1] 0.03
>
> Experiment 3, time nchar for 10000 iterations
> > system.time(for (i in 1:10000)
> + nchar(op)
> + )[3]
> [1] 0.66
>
> Is there any faster way of getting the length of string in R?
>
> Thank you in advance for your help!
>
>
> Sincerely,
> Jennifer
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From koul at paco.net  Tue Oct 25 19:57:52 2005
From: koul at paco.net (koul)
Date: Tue, 25 Oct 2005 20:57:52 +0300
Subject: [Rd] MiKTeX/yap/Ghostcript issues with R-generated postscript"
	(continue)
Message-ID: <435E7220.2010308@paco.net>

Hi, I have the problem which resembles the situation described in " [Rd] 
MiKTeX/yap/Ghostcript issues with R-generated postscript 
<https://stat.ethz.ch/pipermail/r-devel/2005-October/035007.html>"
I run MikTeX 2.4  with Yap as dvi viewer and Ghostscript 8.15.
Some latex files with pstricks code included produce error message "some 
PS specials coud not be rendered".

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
Error: /typecheck in ifelse
Operand stack:
  --nostringval--   34.1137   -67.4567   PermitFileReading   
--nostringval--   --nostringval--
Execution stack:
  %interp_exit   .runexec2   --nostringval--   --nostringval--   
--nostringval--   2   %stopped_push   --nostringval--   
--nostringval--   --nostringval--   false   1   %stopped_push   1   3   
%oparray_pop   1   3   %oparray_pop   1   3   %oparray_pop   1   3   
%oparray_pop   .runexec2   --nostringval--   --nostringval--   
--nostringval--   2   %stopped_push   --nostringval--   --nostringval--
Dictionary stack:
  --dict:1125/1686(ro)(G)--   --dict:0/20(G)--   --dict:76/200(L)--   
--dict:95/300(L)--   --dict:37/200(L)--   --dict:80/200(L)--   
--dict:20/40(L)--
Current allocation mode is local
MiKTeX GPL Ghostscript 8.15: Unrecoverable error, exit code 1
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

For previous versions of MikTeX 2.1 and Ghostscript 7.04 there were any 
problems.
Sorry if posted the question not directly concerned with R-project.

Thank you in advance


From ldimitro at wfubmc.edu  Tue Oct 25 20:46:10 2005
From: ldimitro at wfubmc.edu (Latchezar Dimitrov)
Date: Tue, 25 Oct 2005 14:46:10 -0400
Subject: [Rd] download problem: Windows binaries - patched/devel versions
Message-ID: <F160BE32A2E5E04497668BBDFE83FEDF11CF7B9B@EXCHVS1.medctr.ad.wfubmc.edu>

Hello, 

> -----Original Message-----
> From: r-devel-bounces at r-project.org 
> [mailto:r-devel-bounces at r-project.org] On Behalf Of Duncan Murdoch
> Sent: Monday, October 24, 2005 7:04 PM
> To: P Ehlers
> Cc: r-devel at stat.math.ethz.ch
> Subject: Re: [Rd] download problem: Windows binaries - 
> patched/devel versions
> 
> P Ehlers wrote:
> > Lately, I get a "page cannot be found" error (IE 6.0, 
> Windows XP) when 
> > I try to download the following:
> > 
> > http://cran.us.r-project.org/R-2.2.0pat-win32.exe
> > http://cran.us.r-project.org/R-2.3.0dev-win32.exe
> > 
> > (Same for all other mirrors (about 6) that I've tried.
> > Could someone please check if these files are accessible to them?
> > I'm guessing there's something haywire in my setup.
> > 
> > Note that I can ftp the files without problem.
> 
> The files are where they have always been (in 
> <mirror>/bin/windows/base), but the mirroring software has 
> started playing around with the URLs, adding in lots of 
> ".."'s to the path.  If you manually edit the path you'll 
> find them.  We're working on fixing the mirroring.
> 
> To be explicit:  get them from
> 
> http://cran.us.r-project.org/bin/windows/base/R-2.2.0pat-win32.exe
> http://cran.us.r-project.org/bin/windows/base/R-2.3.0dev-win32.exe
> 
> Duncan Murdoch

That's true as well as it's true (although he/she did not mention it)
that one will get to their URL's if one follows the links on the web
pages.

Regards,
Latchezar

> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>


From dbeyer at u.washington.edu  Tue Oct 25 22:22:13 2005
From: dbeyer at u.washington.edu (Dick Beyer)
Date: Tue, 25 Oct 2005 13:22:13 -0700 (PDT)
Subject: [Rd] error from make: gcc -shared -L/usr/local/lib64 ... relocation
 R_X86_64_32...
Message-ID: <Pine.LNX.4.43.0510251322130.6843@hymn06.u.washington.edu>

I hope someone can point me, a newcomer to building R as well as 64-bit R, in 
a useful direction.  I have a dual Opteron 275 box running RedHat EL4.  I ran 
configure successfully, and, then, get the following error while running make:

make[4]: Entering directory `/tmp/R-2.2.0/src/modules/lapack'  
g77 -fPIC  -g -O2 -ffloat-store -c dlamc.f -o dlamc.lo  
g77  -fPIC  -g -O2 -c dlapack0.f -o dlapack0.lo  
g77  -fPIC  -g -O2 -c dlapack1.f -o dlapack1.lo  
g77  -fPIC  -g -O2 -c dlapack2.f -o dlapack2.lo  
g77  -fPIC  -g -O2 -c dlapack3.f -o dlapack3.lo  
g77  -fPIC  -g -O2 -c cmplx.f -o cmplx.lo  
g77  -fPIC  -g -O2 -c cmplxblas.f -o cmplxblas.lo  
gcc -shared -L/usr/local/lib64  -o libRlapack.so dlamc.lo dlapack0.lo  
dlapack1.lo dlapack2.lo dlapack3.lo cmplx.lo  cmplxblas.lo  -lg2c -lm -lgcc_s  
/usr/bin/ld: /usr/lib/gcc/x86_64-redhat-linux/3.4.4/libg2c.a(s_cat.o):  
relocation R_X86_64_32 against `a local symbol' can not be used when making a  
shared object; recompile with -fPIC  
/usr/lib/gcc/x86_64-redhat-linux/3.4.4/libg2c.a: could not read symbols: Bad  
value  
collect2: ld returned 1 exit status  
make[4]: *** [libRlapack.so] Error 1


I am confused by the error message "recompile with -fPIC" since it looks like  
all the lapack routines are already being compiled with -fPIC. I did struggle 
with getting all the right development packages installed, so maybe I am 
missing some critical package?

Any help, suggestions, or pointers to 64-bit RedHat EL4 would be greatly  
appreciated.

Thanks very much,  
Dick

******************************************************************************* 
Richard P. Beyer, Ph.D. University of Washington 
Tel.:(206) 616 7378 Env. & Occ. Health Sci. , Box 354695 
Fax: (206) 685 4696 4225 Roosevelt Way NE, # 100
    Seattle, WA 98105-6099 
http://depts.washington.edu/ceeh/ServiceCores/FC5/FC5.html 
http://staff.washington.edu/~dbeyer


From ripley at stats.ox.ac.uk  Tue Oct 25 22:33:54 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 25 Oct 2005 21:33:54 +0100 (BST)
Subject: [Rd] strptime problem for 2004-10-03 02:00:00
In-Reply-To: <435DC5CD.7030803@utas.edu.au>
References: <435DC5CD.7030803@utas.edu.au>
Message-ID: <Pine.LNX.4.61.0510252030330.24595@gannet.stats>

It's a bug, a rather rare one.  2004-10-03 02:00:00 does not exist in your 
time zone, and in trying to find out if the time is on DST or not it has 
failed to find out.  It needs to be told that GMT is never on DST so not 
to bother.

On Linux, running R with TZ="GMT" set should fix this.  Windows is harder 
to control since it does not distinguish the UK timezone from GMT.

There is a bugfix now in R-devel.  It may migrate to R-patched in due 
course.

On Tue, 25 Oct 2005, Michael Sumner wrote:

> Hello, I at first thought this was a system or locale issue, but since
> it occurs on
> both Windows and Linux and only for 2004 (AFAIK) I report it.
>
> I have a problem with as.POSIXct for the hour between
> "2004-10-03 02:00:00 GMT" and "2004-10-03 02:59:59 GMT".
>
> In short, the 2 AM (GMT) hour in 2004 (but not in other years) is
> interpreted as 1 AM by strptime:
> (I use ISOdatetime as a convenience).
>
> ## Windows XP
>
> ISOdatetime(2004, 10, 3, 2, 0, 0,  tz = "GMT")
> ##[1] "2004-10-03 01:00:00 GMT"
> ISOdatetime(2004, 10, 3, 1, 0, 0,  tz = "GMT")
> ##[1] "2004-10-03 01:00:00 GMT"
>
> ISOdatetime(2005, 10, 3, 2, 0, 0,  tz = "GMT")
> ##[1] "2005-10-03 02:00:00 GMT"
> ISOdatetime(2005, 10, 3, 1, 0, 0,  tz = "GMT")
> ## [1] "2005-10-03 01:00:00 GMT"
>
>
> I've not explored it for other years, but it is not a problem for the
> same time in previous and next years.
> I only found it as I have a continuous sequence of date-times that cover
> that time period, the problem
> is not created by traversing that time with seq.POSIXt.
>
> I usually use Windows XP, below I also give results on Linux  (release
> "2.4.21-37.ELsmp").  On that
> machine the times are incorrect in the other direction (in 2004, 2 AM is
> interpreted as 3 AM).
>
> My (Windows) system is set to automatically adjust for daylight summer
> time, and if I uncheck this and restart R
> the problem is "fixed".  I don't know how I would do that on Linux, but
> it's a server anyway so I couldn't.
>
> ## R 2.2.0
> ## Windows XP, SP2
> ## System time is set to (GMT+10:00) Hobart  -  Tasmanian Summer Time (1
> hour forward of GMT+10)
> Sys.getlocale()
> ## [1]
> "LC_COLLATE=English_Australia.1252;LC_CTYPE=English_Australia.1252;LC_MONETARY=English_Australia.1252;LC_NUMERIC=C;LC_TIME=English_Australia.1252"
>
> #### Try for 2004
>
> (t1 <- ISOdatetime(2004, 10, 3, 1, 0, 0, tz = "GMT"))
> ##[1] "2004-10-03 01:00:00 GMT"
> (t2 <- ISOdatetime(2004, 10, 3, 2, 0, 0, tz = "GMT"))
> ##[1] "2004-10-03 01:00:00 GMT"
>
> ## no difference - why?
> t2 - t1
> ## Time difference of 0 secs
>
> ## Try for 2005
>
> (t1 <- ISOdatetime(2005, 10, 3, 1, 0, 0, tz = "GMT"))
> ##[1] "2005-10-03 01:00:00 GMT"
>
> (t2 <- ISOdatetime(2005, 10, 3, 2, 0, 0, tz = "GMT") )
> ##[1] "2005-10-03 02:00:00 GMT"
>
> ## 1 hour difference - as expected
> t2 - t1
> ## Time difference of 1 hours
>
>
> ####
> #### LINUX
> ####
>
> ## R 2.2.0
> ## Linux (release "2.4.21-37.ELsmp"
> ## System time is set to (EST) - summer time (I don't know how to find
> more about this)
> Sys.getlocale()
> ## [1]
> "LC_CTYPE=en_AU.UTF-8;LC_NUMERIC=C;LC_TIME=en_AU.UTF-8;LC_COLLATE=en_AU.UTF-8;LC_MONETARY=en_AU.UTF-8;LC_MESSAGES=en_AU.UTF-8;LC_PAPER=C;LC_NAME=C;LC_ADDRESS=C;LC_TELEPHONE=C;LC_MEASUREMENT=C;LC_IDENTIFICATION=C"
>
>
> #### Try for 2004
>
> (t1 <- ISOdatetime(2004, 10, 3, 1, 0, 0, tz = "GMT"))
> ## [1] "2004-10-03 01:00:00 GMT"
>
> (t2 <- ISOdatetime(2004, 10, 3, 2, 0, 0, tz = "GMT"))
> ##[1] "2004-10-03 03:00:00 GMT"
>
> ## difference of 2 hours - why?
> t2 - t1
> ## Time difference of 2 hours
>
>
> ## Try for 2005
>
> (t1 <- ISOdatetime(2005, 10, 3, 1, 0, 0, tz = "GMT"))
> ##[1] "2005-10-03 01:00:00 GMT"
>
> (t2 <- ISOdatetime(2005, 10, 3, 2, 0, 0, tz = "GMT") )
> ##[1] "2005-10-03 02:00:00 GMT"
>
>
> ## one hour difference as expected
> t2 - t1
> ## Time difference of 1 hours
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ripley at stats.ox.ac.uk  Tue Oct 25 22:44:57 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 25 Oct 2005 21:44:57 +0100 (BST)
Subject: [Rd] error from make: gcc -shared -L/usr/local/lib64 ...
 relocation R_X86_64_32...
In-Reply-To: <Pine.LNX.4.43.0510251322130.6843@hymn06.u.washington.edu>
References: <Pine.LNX.4.43.0510251322130.6843@hymn06.u.washington.edu>
Message-ID: <Pine.LNX.4.61.0510252138120.904@gannet.stats>

It is libg2c.a you are being told to recompile.

There ought to be a lib2gc.so* on your system.  On FC3

gannet% rpm -q --whatprovides /usr/lib/libg2c.so.0
libf2c-3.4.4-2.fc3
gannet% rpm -q --filesbypkg libf2c-3.4.4-2.fc3
libf2c                    /usr/lib/libg2c.so.0
libf2c                    /usr/lib/libg2c.so.0.0.0

which looks like the problem if it is missing.


On Tue, 25 Oct 2005, Dick Beyer wrote:

> I hope someone can point me, a newcomer to building R as well as 64-bit 
> R, in a useful direction.  I have a dual Opteron 275 box running RedHat 
> EL4.  I ran configure successfully, and, then, get the following error 
> while running make:
>
> make[4]: Entering directory `/tmp/R-2.2.0/src/modules/lapack'
> g77 -fPIC  -g -O2 -ffloat-store -c dlamc.f -o dlamc.lo
> g77  -fPIC  -g -O2 -c dlapack0.f -o dlapack0.lo
> g77  -fPIC  -g -O2 -c dlapack1.f -o dlapack1.lo
> g77  -fPIC  -g -O2 -c dlapack2.f -o dlapack2.lo
> g77  -fPIC  -g -O2 -c dlapack3.f -o dlapack3.lo
> g77  -fPIC  -g -O2 -c cmplx.f -o cmplx.lo
> g77  -fPIC  -g -O2 -c cmplxblas.f -o cmplxblas.lo
> gcc -shared -L/usr/local/lib64  -o libRlapack.so dlamc.lo dlapack0.lo
> dlapack1.lo dlapack2.lo dlapack3.lo cmplx.lo  cmplxblas.lo  -lg2c -lm -lgcc_s
> /usr/bin/ld: /usr/lib/gcc/x86_64-redhat-linux/3.4.4/libg2c.a(s_cat.o):
> relocation R_X86_64_32 against `a local symbol' can not be used when making a
> shared object; recompile with -fPIC
> /usr/lib/gcc/x86_64-redhat-linux/3.4.4/libg2c.a: could not read symbols: Bad
> value
> collect2: ld returned 1 exit status
> make[4]: *** [libRlapack.so] Error 1
>
>
> I am confused by the error message "recompile with -fPIC" since it looks like
> all the lapack routines are already being compiled with -fPIC. I did struggle
> with getting all the right development packages installed, so maybe I am
> missing some critical package?
>
> Any help, suggestions, or pointers to 64-bit RedHat EL4 would be greatly
> appreciated.


-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From p.dalgaard at biostat.ku.dk  Tue Oct 25 22:48:00 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 25 Oct 2005 22:48:00 +0200
Subject: [Rd] error from make: gcc -shared -L/usr/local/lib64 ...
	relocation R_X86_64_32...
In-Reply-To: <Pine.LNX.4.43.0510251322130.6843@hymn06.u.washington.edu>
References: <Pine.LNX.4.43.0510251322130.6843@hymn06.u.washington.edu>
Message-ID: <x2ll0h8gsf.fsf@turmalin.kubism.ku.dk>

Dick Beyer <dbeyer at u.washington.edu> writes:

> I hope someone can point me, a newcomer to building R as well as 64-bit R, in 
> a useful direction.  I have a dual Opteron 275 box running RedHat EL4.  I ran 
> configure successfully, and, then, get the following error while running make:
> 
> make[4]: Entering directory `/tmp/R-2.2.0/src/modules/lapack'  
> g77 -fPIC  -g -O2 -ffloat-store -c dlamc.f -o dlamc.lo  
> g77  -fPIC  -g -O2 -c dlapack0.f -o dlapack0.lo  
> g77  -fPIC  -g -O2 -c dlapack1.f -o dlapack1.lo  
> g77  -fPIC  -g -O2 -c dlapack2.f -o dlapack2.lo  
> g77  -fPIC  -g -O2 -c dlapack3.f -o dlapack3.lo  
> g77  -fPIC  -g -O2 -c cmplx.f -o cmplx.lo  
> g77  -fPIC  -g -O2 -c cmplxblas.f -o cmplxblas.lo  
> gcc -shared -L/usr/local/lib64  -o libRlapack.so dlamc.lo dlapack0.lo  
> dlapack1.lo dlapack2.lo dlapack3.lo cmplx.lo  cmplxblas.lo  -lg2c -lm -lgcc_s  
> /usr/bin/ld: /usr/lib/gcc/x86_64-redhat-linux/3.4.4/libg2c.a(s_cat.o):  
> relocation R_X86_64_32 against `a local symbol' can not be used when making a  
> shared object; recompile with -fPIC  
> /usr/lib/gcc/x86_64-redhat-linux/3.4.4/libg2c.a: could not read symbols: Bad  
> value  
> collect2: ld returned 1 exit status  
> make[4]: *** [libRlapack.so] Error 1
> 
> 
> I am confused by the error message "recompile with -fPIC" since it looks like  
> all the lapack routines are already being compiled with -fPIC. I did struggle 
> with getting all the right development packages installed, so maybe I am 
> missing some critical package?
> 
> Any help, suggestions, or pointers to 64-bit RedHat EL4 would be greatly  
> appreciated.

I have a faint bell ringing in the distance... The proximate cause is
that the static libg2c.a is being picked up and it is likely not -fPIC
compiled (which is important on 64bit but AFAIR you get away with it
on 32bit). Now why is it that this happens... 

Is there a libg2c.so around?

- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From p.dalgaard at biostat.ku.dk  Tue Oct 25 23:24:49 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 25 Oct 2005 23:24:49 +0200
Subject: [Rd] error from make: gcc -shared -L/usr/local/lib64 ...
	relocation R_X86_64_32...
In-Reply-To: <Pine.LNX.4.61.0510252138120.904@gannet.stats>
References: <Pine.LNX.4.43.0510251322130.6843@hymn06.u.washington.edu>
	<Pine.LNX.4.61.0510252138120.904@gannet.stats>
Message-ID: <x2hdb58f32.fsf@turmalin.kubism.ku.dk>

Prof Brian Ripley <ripley at stats.ox.ac.uk> writes:

> It is libg2c.a you are being told to recompile.
> 
> There ought to be a lib2gc.so* on your system.  On FC3
> 
> gannet% rpm -q --whatprovides /usr/lib/libg2c.so.0
> libf2c-3.4.4-2.fc3
> gannet% rpm -q --filesbypkg libf2c-3.4.4-2.fc3
> libf2c                    /usr/lib/libg2c.so.0
> libf2c                    /usr/lib/libg2c.so.0.0.0
> 
> which looks like the problem if it is missing.

*ding*

Yup, that's it. It's actually the same on FC4, my pattern recognizer
just had a temporary defect:

[pd at titmouse ~]$ rpm -qf /usr/lib/libg2c.so.0.0.0
compat-libf2c-32-3.2.3-47.fc4
[pd at titmouse ~]$ rpm -qf /usr/lib/gcc-lib/i386-redhat-linux/3.2.3/libg2c.a
compat-gcc-32-g77-3.2.3-47.fc4

(Notice that they're not the same...)

So the point is to install the libf2c thingie, whatever the name is on
RHEL4.


-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From dbeyer at u.washington.edu  Wed Oct 26 00:32:21 2005
From: dbeyer at u.washington.edu (Dick Beyer)
Date: Tue, 25 Oct 2005 15:32:21 -0700 (PDT)
Subject: [Rd] error from make: gcc -shared -L/usr/local/lib64 ...
 relocation R_X86_64_32...
In-Reply-To: <x2d5lt8dg2.fsf@turmalin.kubism.ku.dk>
Message-ID: <Pine.LNX.4.43.0510251532210.29304@hymn01.u.washington.edu>

Dear Peter and Brian,

I have made progress.  I removed libf2c and installed it again.  Then 
libg2c.so.0 ended up in /usr/lib64.  make is getting much further now.  I think 
I had a messed up installation of the development packages, maybe. Weird.

Anyway, I appreciate all your great help.

Cheers,
Dick

*******************************************************************************
Richard P. Beyer, Ph.D.	University of Washington
Tel.:(206) 616 7378	Env. & Occ. Health Sci. , Box 354695
Fax: (206) 685 4696	4225 Roosevelt Way NE, # 100
			Seattle, WA 98105-6099
http://depts.washington.edu/ceeh/ServiceCores/FC5/FC5.html
http://staff.washington.edu/~dbeyer
*******************************************************************************

On 26 Oct 2005, Peter Dalgaard wrote:

> Dick Beyer <dbeyer at u.washington.edu> writes:
> 
>> Hi Peter,
>> 
>> Thanks very much for your help.
>> 
>> I did a up2date libf2c, and see that I already had libf2c on my system:
>> 
>> [root at localhost 3.4.4]# rpm -q --whatprovides /usr/lib/libg2c.so.0
>> libf2c-3.4.4-2
>> [root at localhost 3.4.4]# rpm -q --filesbypkg libf2c-3.4.4-2
>> libf2c                    /usr/lib/libg2c.so.0 libf2c
>> /usr/lib/libg2c.so.0.0.0
>> 
>> Is there something I haven't done with config.site or some Make* file
>> so make will not get libg2c.a instead of libg2c.so.0.0.0?
> 
> Hmm, pretty odd if the linker doesn't pick up .so files in /usr/lib.
> 
> It's a bit of a longshot, but is it registered in   the dynamic
> linker cache? As in
> 
> [pd at titmouse ~]$ /sbin/ldconfig -p | grep g2c
>        libg2c.so.0 (libc6) => /usr/lib/libg2c.so.0
> 
> 
> --
>   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
>  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
> (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907
>


From arnima at u.washington.edu  Wed Oct 26 01:54:15 2005
From: arnima at u.washington.edu (arnima@u.washington.edu)
Date: Wed, 26 Oct 2005 01:54:15 +0200 (CEST)
Subject: [Rd] pairs(oma) warnings (PR#8252)
Message-ID: <20051025235415.721F322152@slim.kubism.ku.dk>

Unlike R 2.1.1, version 2.2.0 generates warnings when an 'oma' argument as 
passed to pairs():

  A <- rnorm(100)
  B <- rnorm(100)
  pairs(cbind(A,B))                    # no warning
  pairs(cbind(A,B), oma=c(6,8,10,12))  # warnings in R 2.2.0

I think pairs() should draw the plot quietly, without warnings. Can't see 
anything in the documentation indicating that an 'oma' argument should not 
be passed in this way.

Thanks,
Arni

R 2.2.0pat on WinXP


From ripley at stats.ox.ac.uk  Wed Oct 26 08:08:14 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 26 Oct 2005 07:08:14 +0100 (BST)
Subject: [Rd] pairs(oma) warnings (PR#8252)
In-Reply-To: <20051025235415.721F322152@slim.kubism.ku.dk>
References: <20051025235415.721F322152@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.61.0510260702420.6967@gannet.stats>

On Wed, 26 Oct 2005 arnima at u.washington.edu wrote:

> Unlike R 2.1.1, version 2.2.0 generates warnings when an 'oma' argument as
> passed to pairs():
>
>  A <- rnorm(100)
>  B <- rnorm(100)
>  pairs(cbind(A,B))                    # no warning
>  pairs(cbind(A,B), oma=c(6,8,10,12))  # warnings in R 2.2.0
>
> I think pairs() should draw the plot quietly, without warnings. Can't see
> anything in the documentation indicating that an 'oma' argument should not
> be passed in this way.

Yes, but they are only warnings.  oma is actually mentioned in the docs 
....

My complaint is that they ever occur, in this case from axis which says

      ...: other graphical parameters may also be passed as arguments to
           this function, particularly, 'cex.axis', 'col.axis' and
           'font.axis' for axis annotation, 'mgp' and 'xaxp' or 'yaxp'
           for positioning, 'tck' or 'tcl' for tick mark length and
           direction, 'las' for vertical/horizontal label orientation,
           or 'fg' instead of 'col', see 'par' on these.

and does not say which or that others cannot be so passed.

Fixed in R-patched but not mentioned in NEWS as this is so minor.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mcintosh at research.telcordia.com  Wed Oct 26 14:26:24 2005
From: mcintosh at research.telcordia.com (mcintosh@research.telcordia.com)
Date: Wed, 26 Oct 2005 14:26:24 +0200 (CEST)
Subject: [Rd] PR#8210
Message-ID: <20051026122624.1BE8F2214D@slim.kubism.ku.dk>

This failure is reproducible:

1) This requires a machine without "makeinfo".  I ran into it on a 
RedHat 9.0 system, but I doubt the OS matters.
2) unpack the R-2.2.0 source tarball
3) cd R-2.2.0
4) ./configure ; make ; make check ; make install
	[add configure args as appropriate; works fine]
5) make distclean ; ./configure ; make ; make check ; make install
	[add configure args as appropriate]

The last "make install" fails because "make distclean" removed 
doc/html/resources.html and makeinfo is needed to rebuild it.

Quick fix:  extract R-2.2.0/doc/html/resources.html from the tarball and 
run "make install" again.


From ggrothendieck at gmail.com  Wed Oct 26 15:03:30 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 26 Oct 2005 09:03:30 -0400
Subject: [Rd] R patched for Windows missing
Message-ID: <971536df0510260603x517b3520v7bc507ef6e6ccf86@mail.gmail.com>

R patched for Windows seems to be missing. If one clicks on
R-2.2.0pat-win32.exe at, say,

   http://stat.ethz.ch/CRAN/bin/windows/base/rpatched.html

then an error occurs.  I tried it at several mirror sites with the same
result.  The web page in question says:

This directory contains a Windows binary build of R including patches
up to 2005-10-24.


From gilles.guillot at inapg.inra.fr  Wed Oct 26 15:10:23 2005
From: gilles.guillot at inapg.inra.fr (Gilles GUILLOT)
Date: Wed, 26 Oct 2005 15:10:23 +0200
Subject: [Rd] pb with dyn.load
Message-ID: <200510261510.23775.gilles.guillot@inapg.inra.fr>

Hi,

here are a couple of strange things happening with R.2.2.0 compiled 
under Mandrake-10.1

At the begining of the story I have segmentation fault 
using package RandomFields in conjuction with  some Fortran code of mine 
loaded with dyn.load.
One of my fortran programs contains a subroutine named fstat

Trying to trace , I simplified the sequence as much as possible 
and I end up with the the simple fortran programs and R code atached 
which give the result below.

Any explanation about the strange things below and what 
I should do to avoid them would help.

Gilles


#########################################


QUESTION 1:
[guillot at laplace guillot]$ R
R : Copyright 2005, The R Foundation for Statistical Computing
Version 2.2.0  (2005-10-06 r35749)
ISBN 3-900051-07-0

 >system("R CMD SHLIB ~/tmp/test1.f")
g77   -fPIC  -g -O2 -c /home/guillot/tmp/test1.f -o /home/guillot/tmp/test1.o
gcc -shared -L/usr/local/lib 
-o /home/guillot/tmp/test1.so /home/guillot/tmp/test1.o  -lg2c -lm -lgcc_s
> system("R CMD SHLIB ~/tmp/test2.f")
g77   -fPIC  -g -O2 -c /home/guillot/tmp/test2.f -o /home/guillot/tmp/test2.o
gcc -shared -L/usr/local/lib 
-o /home/guillot/tmp/test2.so /home/guillot/tmp/test2.o  -lg2c -lm -lgcc_s
>
> is.loaded("sub")
[1] FALSE
> is.loaded("sub_")
[1] FALSE
>
## OK
> dyn.load("~/tmp/test1.so")
> is.loaded("sub")
[1] FALSE
> is.loaded("sub_")
[1] TRUE
>
## it seems it does not comply with the 'value' section of the help 
## of function is.loaded: 
## "it needs the
##    name you would give to '.C' or '.Fortran' and *not* that remapped
##    by 'symbol.C' and 'symbol.For'."
##
## am i missing something ?
> q()

QUESTION 2:
[guillot at laplace guillot]$R

R : Copyright 2005, The R Foundation for Statistical Computing
Version 2.2.0  (2005-10-06 r35749)
ISBN 3-900051-07-0


>is.loaded("fstat")
[1] FALSE
> is.loaded("fstat_")
[1] FALSE
> dyn.load("~/tmp/test1.so")
> is.loaded("fstat")
[1] FALSE
> is.loaded("fstat_")
[1] TRUE
## why ?
> dyn.load("~/tmp/test2.so")
> .Fortran(name="fstat",
+          as.integer(999),
+          as.integer(100),
+          as.integer(200))
[[1]]
[1] 1073913012

[[2]]
[1] 0

[[3]]
[1] 200
## pb in memory management ?




-------------- next part --------------
system("R CMD SHLIB ~/tmp/test1.f")

system("R CMD SHLIB ~/tmp/test2.f")


is.loaded("sub")
is.loaded("sub_")



dyn.load("~/tmp/test1.so")
is.loaded("sub")
is.loaded("sub_")



q()

R

s.loaded("fstat")
is.loaded("fstat_")
dyn.load("~/tmp/test1.so")
is.loaded("fstat")

is.loaded("fstat_")

dyn.load("~/tmp/test2.so")
.Fortran(name="fstat",
	      as.integer(999),
	      as.integer(100),
	      as.integer(200))


From gilles.guillot at inapg.inra.fr  Wed Oct 26 15:14:40 2005
From: gilles.guillot at inapg.inra.fr (Gilles GUILLOT)
Date: Wed, 26 Oct 2005 15:14:40 +0200
Subject: [Rd] pb with dyn.load - fortran code now attached
Message-ID: <200510261514.40235.gilles.guillot@inapg.inra.fr>

Hi,

here are a couple of strange things happening with R.2.2.0 compiled 
under Mandrake-10.1

At the begining of the story I have segmentation fault 
using package RandomFields in conjuction with  some Fortran code of mine 
loaded with dyn.load.
One of my fortran programs contains a subroutine named fstat

Trying to trace , I simplified the sequence as much as possible 
and I end up with the the simple fortran programs and R code atached 
which give the result below.

Any explanation about the strange things below and what 
I should do to avoid them would help.

Gilles


#########################################


QUESTION 1:
[guillot at laplace guillot]$ R
R : Copyright 2005, The R Foundation for Statistical Computing
Version 2.2.0  (2005-10-06 r35749)
ISBN 3-900051-07-0

 >system("R CMD SHLIB ~/tmp/test1.f")
g77   -fPIC  -g -O2 -c /home/guillot/tmp/test1.f -o /home/guillot/tmp/test1.o
gcc -shared -L/usr/local/lib 
-o /home/guillot/tmp/test1.so /home/guillot/tmp/test1.o  -lg2c -lm -lgcc_s
> system("R CMD SHLIB ~/tmp/test2.f")
g77   -fPIC  -g -O2 -c /home/guillot/tmp/test2.f -o /home/guillot/tmp/test2.o
gcc -shared -L/usr/local/lib 
-o /home/guillot/tmp/test2.so /home/guillot/tmp/test2.o  -lg2c -lm -lgcc_s
>
> is.loaded("sub")
[1] FALSE
> is.loaded("sub_")
[1] FALSE
>
## OK
> dyn.load("~/tmp/test1.so")
> is.loaded("sub")
[1] FALSE
> is.loaded("sub_")
[1] TRUE
>
## it seems it does not comply with the 'value' section of the help 
## of function is.loaded: 
## "it needs the
##    name you would give to '.C' or '.Fortran' and *not* that remapped
##    by 'symbol.C' and 'symbol.For'."
##
## am i missing something ?
> q()

QUESTION 2:
[guillot at laplace guillot]$R

R : Copyright 2005, The R Foundation for Statistical Computing
Version 2.2.0  (2005-10-06 r35749)
ISBN 3-900051-07-0


>is.loaded("fstat")
[1] FALSE
> is.loaded("fstat_")
[1] FALSE
> dyn.load("~/tmp/test1.so")
> is.loaded("fstat")
[1] FALSE
> is.loaded("fstat_")
[1] TRUE
## why ?
> dyn.load("~/tmp/test2.so")
> .Fortran(name="fstat",
+          as.integer(999),
+          as.integer(100),
+          as.integer(200))
[[1]]
[1] 1073913012

[[2]]
[1] 0

[[3]]
[1] 200
## pb in memory management ?
-------------- next part --------------
system("R CMD SHLIB ~/tmp/test1.f")

system("R CMD SHLIB ~/tmp/test2.f")


is.loaded("sub")
is.loaded("sub_")



dyn.load("~/tmp/test1.so")
is.loaded("sub")
is.loaded("sub_")



q()

R

s.loaded("fstat")
is.loaded("fstat_")
dyn.load("~/tmp/test1.so")
is.loaded("fstat")

is.loaded("fstat_")

dyn.load("~/tmp/test2.so")
.Fortran(name="fstat",
	      as.integer(999),
	      as.integer(100),
	      as.integer(200))


From ggrothendieck at gmail.com  Wed Oct 26 15:45:32 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Wed, 26 Oct 2005 09:45:32 -0400
Subject: [Rd] Microsoft help files
Message-ID: <971536df0510260645m48d6a542l707e94244c042f45@mail.gmail.com>

I wonder if the software here:

http://morte.jedrea.com/~jedwin/projects/chmlib/

or at any of the links on that page might allow elimination of the
need for separately downloading the Microsoft Help compiler --
which is just one more task that one must perform to get
up and running to build your own R packages on Windows.


From hin-tak.leung at cimr.cam.ac.uk  Wed Oct 26 16:26:14 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Wed, 26 Oct 2005 15:26:14 +0100
Subject: [Rd] Microsoft help files
In-Reply-To: <971536df0510260645m48d6a542l707e94244c042f45@mail.gmail.com>
References: <971536df0510260645m48d6a542l707e94244c042f45@mail.gmail.com>
Message-ID: <435F9206.7010505@cimr.cam.ac.uk>

Gabor Grothendieck wrote:
> I wonder if the software here:
> 
> http://morte.jedrea.com/~jedwin/projects/chmlib/
> 
> or at any of the links on that page might allow elimination of the
> need for separately downloading the Microsoft Help compiler --
> which is just one more task that one must perform to get
> up and running to build your own R packages on Windows.

Actually, why does one need to depend on the Microsoft Help
compiler? The windows build of GNU makeinfo can generate MS
*.hlp file directly. That's more "native" MS windows than CHM
files.

Hin-Tak Leung


From roebuck at mdanderson.org  Wed Oct 26 17:22:07 2005
From: roebuck at mdanderson.org (Paul Roebuck)
Date: Wed, 26 Oct 2005 10:22:07 -0500 (CDT)
Subject: [Rd] pb with dyn.load - fortran code now attached
In-Reply-To: <200510261514.40235.gilles.guillot@inapg.inra.fr>
References: <200510261514.40235.gilles.guillot@inapg.inra.fr>
Message-ID: <Pine.OSF.4.58.0510260951360.171503@wotan.mdacc.tmc.edu>

On Wed, 26 Oct 2005, Gilles GUILLOT wrote:

> QUESTION 1:
> [guillot at laplace guillot]$ R
> R : Copyright 2005, The R Foundation for Statistical Computing
> Version 2.2.0  (2005-10-06 r35749)
> ISBN 3-900051-07-0
>
>  >system("R CMD SHLIB ~/tmp/test1.f")
> g77   -fPIC  -g -O2 -c /home/guillot/tmp/test1.f -o /home/guillot/tmp/test1.o
> gcc -shared -L/usr/local/lib
> -o /home/guillot/tmp/test1.so /home/guillot/tmp/test1.o  -lg2c -lm -lgcc_s
> > system("R CMD SHLIB ~/tmp/test2.f")
> g77   -fPIC  -g -O2 -c /home/guillot/tmp/test2.f -o /home/guillot/tmp/test2.o
> gcc -shared -L/usr/local/lib
> -o /home/guillot/tmp/test2.so /home/guillot/tmp/test2.o  -lg2c -lm -lgcc_s
> >
> > is.loaded("sub")
> [1] FALSE
> > is.loaded("sub_")
> [1] FALSE
> >
> ## OK
> > dyn.load("~/tmp/test1.so")
> > is.loaded("sub")
> [1] FALSE
> > is.loaded("sub_")
> [1] TRUE
> >
> ## it seems it does not comply with the 'value' section of the help
> ## of function is.loaded:
> ## "it needs the
> ##    name you would give to '.C' or '.Fortran' and *not* that remapped
> ##    by 'symbol.C' and 'symbol.For'."
> ##
> ## am i missing something ?
> > q()

The is.loaded method needs the argument to look exactly
like the associated output from 'nm' (i.e., symbol name).

$ nm ~/tmp/test1.so | grep sub

Thus, you are manually asking for the following

> is.loaded(symbol.For("sub"))

The call to .Fortran use the (lowercase) name of the subroutine
as it would appear in the Fortran source code.

.Fortran("sub", ...)

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From ripley at stats.ox.ac.uk  Wed Oct 26 17:32:17 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 26 Oct 2005 16:32:17 +0100 (BST)
Subject: [Rd] pb with dyn.load - fortran code now attached
In-Reply-To: <Pine.OSF.4.58.0510260951360.171503@wotan.mdacc.tmc.edu>
References: <200510261514.40235.gilles.guillot@inapg.inra.fr>
	<Pine.OSF.4.58.0510260951360.171503@wotan.mdacc.tmc.edu>
Message-ID: <Pine.LNX.4.61.0510261626050.5413@gannet.stats>

On Wed, 26 Oct 2005, Paul Roebuck wrote:

> On Wed, 26 Oct 2005, Gilles GUILLOT wrote:
>
>> QUESTION 1:
>> [guillot at laplace guillot]$ R
>> R : Copyright 2005, The R Foundation for Statistical Computing
>> Version 2.2.0  (2005-10-06 r35749)
>> ISBN 3-900051-07-0
>>
>> >system("R CMD SHLIB ~/tmp/test1.f")
>> g77   -fPIC  -g -O2 -c /home/guillot/tmp/test1.f -o /home/guillot/tmp/test1.o
>> gcc -shared -L/usr/local/lib
>> -o /home/guillot/tmp/test1.so /home/guillot/tmp/test1.o  -lg2c -lm -lgcc_s
>>> system("R CMD SHLIB ~/tmp/test2.f")
>> g77   -fPIC  -g -O2 -c /home/guillot/tmp/test2.f -o /home/guillot/tmp/test2.o
>> gcc -shared -L/usr/local/lib
>> -o /home/guillot/tmp/test2.so /home/guillot/tmp/test2.o  -lg2c -lm -lgcc_s
>>>
>>> is.loaded("sub")
>> [1] FALSE
>>> is.loaded("sub_")
>> [1] FALSE
>>>
>> ## OK
>>> dyn.load("~/tmp/test1.so")
>>> is.loaded("sub")
>> [1] FALSE
>>> is.loaded("sub_")
>> [1] TRUE
>>>
>> ## it seems it does not comply with the 'value' section of the help
>> ## of function is.loaded:
>> ## "it needs the
>> ##    name you would give to '.C' or '.Fortran' and *not* that remapped
>> ##    by 'symbol.C' and 'symbol.For'."
>> ##
>> ## am i missing something ?
>>> q()
>
> The is.loaded method needs the argument to look exactly
> like the associated output from 'nm' (i.e., symbol name).
>
> $ nm ~/tmp/test1.so | grep sub
>
> Thus, you are manually asking for the following
>
>> is.loaded(symbol.For("sub"))
>
> The call to .Fortran use the (lowercase) name of the subroutine
> as it would appear in the Fortran source code.
>
> .Fortran("sub", ...)

Not at all the whole story.  First (unfortunately), the case mapping is 
OS-dependent and even compiler-dependent.  Second, look at stats.so which 
has

00030cf0 T supsmu_

yet

> is.loaded("supsmu_")
[1] FALSE
> is.loaded("supsmu")
[1] TRUE

That is a Fortran entry point, and it complies with the description 
quoted.

What is.loaded() needs depends on how the symbol would be found 
and so it is not much use.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From andy_liaw at merck.com  Wed Oct 26 18:13:55 2005
From: andy_liaw at merck.com (Liaw, Andy)
Date: Wed, 26 Oct 2005 12:13:55 -0400
Subject: [Rd] Microsoft help files
Message-ID: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED51D@usctmx1106.merck.com>

> From: Hin-Tak Leung
> 
> Gabor Grothendieck wrote:
> > I wonder if the software here:
> > 
> > http://morte.jedrea.com/~jedwin/projects/chmlib/
> > 
> > or at any of the links on that page might allow elimination of the
> > need for separately downloading the Microsoft Help compiler --
> > which is just one more task that one must perform to get
> > up and running to build your own R packages on Windows.
> 
> Actually, why does one need to depend on the Microsoft Help
> compiler? The windows build of GNU makeinfo can generate MS
> *.hlp file directly. That's more "native" MS windows than CHM
> files.
> 
> Hin-Tak Leung

Personally my order of preference is

  CHM > plain text > HLP

Isn't it true that even MS is moving away from HLP?

Andy


From p.dalgaard at biostat.ku.dk  Wed Oct 26 18:24:01 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 26 Oct 2005 18:24:01 +0200
Subject: [Rd] R patched for Windows missing
In-Reply-To: <971536df0510260603x517b3520v7bc507ef6e6ccf86@mail.gmail.com>
References: <971536df0510260603x517b3520v7bc507ef6e6ccf86@mail.gmail.com>
Message-ID: <x264rkb61q.fsf@viggo.kubism.ku.dk>

Gabor Grothendieck <ggrothendieck at gmail.com> writes:

> R patched for Windows seems to be missing. If one clicks on
> R-2.2.0pat-win32.exe at, say,
> 
>    http://stat.ethz.ch/CRAN/bin/windows/base/rpatched.html
> 
> then an error occurs.  I tried it at several mirror sites with the same
> result.  The web page in question says:
> 
> This directory contains a Windows binary build of R including patches
> up to 2005-10-24.

Looks like an HTML issue. Almost all links on that page go to files in
the server root, and likewise for r-devel. The .exe files themselves
seem to be quite happily sitting alongside the release binary at e.g.

http://cran.r-project.org/bin/windows/base/R-2.2.0pat-win32.exe


The source for the link table in r-patched.html is currently looking like this:

<TABLE WIDTH="90%" BORDER="0">
<TBODY>
  <TR>
    <TD WIDTH="19%" VALIGN="top"><A HREF="../../../../../../../../../README.R-2.2.0pat">README.R-2.2.0pat</A></TD>
    <TD WIDTH="81%">Installation and other instructions.</TD>
  </TR>
  <TR>
    <TD WIDTH="19%" VALIGN="top"><A HREF="../../../../../../../../../CHANGES.R-2.2.0pat">CHANGES</A></TD>

    <TD WIDTH="81%">New features of this Windows version.</TD>
  </TR>
  <TR>
    <TD WIDTH="19%" VALIGN="top"><A HREF="../../../../../../../../../NEWS.R-2.2.0pat">NEWS</A></TD>
    <TD WIDTH="81%">New features of all versions.</TD>
  </TR>
  <TR>

    <TD WIDTH="19%" VALIGN="top"><A HREF="../../../../../../../../../R-2.2.0pat-win32.exe">R-2.2.0pat-win32.exe</A></TD>
    <TD WIDTH="81%">Setup program (about 25 megabytes). Please download this
    from a <A HREF="http://cran.r-project.org/mirrors.html">mirror near you</A>. <BR>
    This corresponds to the file named <B>SetupR.exe</B> or
    <B>rwXXXX.exe</B> in pre-2.2.0 releases.</TD>

  </TR>
</TBODY>
</TABLE>

<

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From hin-tak.leung at cimr.cam.ac.uk  Wed Oct 26 18:43:49 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Wed, 26 Oct 2005 17:43:49 +0100
Subject: [Rd] Microsoft help files
In-Reply-To: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED51D@usctmx1106.merck.com>
References: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED51D@usctmx1106.merck.com>
Message-ID: <435FB245.80208@cimr.cam.ac.uk>

Liaw, Andy wrote:
>> From: Hin-Tak Leung
>> 
>> Gabor Grothendieck wrote:
>> 
>>> I wonder if the software here:
>>> 
>>> http://morte.jedrea.com/~jedwin/projects/chmlib/
>>> 
>>> or at any of the links on that page might allow elimination of
>>> the need for separately downloading the Microsoft Help compiler
>>> -- which is just one more task that one must perform to get up
>>> and running to build your own R packages on Windows.
>> 
>> Actually, why does one need to depend on the Microsoft Help 
>> compiler? The windows build of GNU makeinfo can generate MS *.hlp
>> file directly. That's more "native" MS windows than CHM files.
> 
> 
> Personally my order of preference is
> 
> CHM > plain text > HLP
> 
> Isn't it true that even MS is moving away from HLP?

WINHLP comes with a built-in search-and-index functionalty, and rather
more user-friendly than CHM or plain text. I am talking about
indexing and searching sizeable documents with internal organizations
and structures. Even pdf is better the plain text. You want the 
R-reference manual as a text file?

I am against additional dependency (particularly at build-time, unless 
you bundle it), especially on software that has just been written
and may not be around/maintained in a few months' time
(one can at least say the microsoft CHM compiler will be around!).
Since much of R's documentation is already quite texinfo/makeinfo 
friendly, it is just an extra couple of line in the makefile to
generate hlp file, ditto for rtf and ditto for pdf.

HT


From murdoch at stats.uwo.ca  Wed Oct 26 19:54:42 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Wed, 26 Oct 2005 13:54:42 -0400
Subject: [Rd] R patched for Windows missing
In-Reply-To: <x264rkb61q.fsf@viggo.kubism.ku.dk>
References: <971536df0510260603x517b3520v7bc507ef6e6ccf86@mail.gmail.com>
	<x264rkb61q.fsf@viggo.kubism.ku.dk>
Message-ID: <435FC2E2.1020908@stats.uwo.ca>

Peter Dalgaard wrote:
> Gabor Grothendieck <ggrothendieck at gmail.com> writes:
> 
> 
>>R patched for Windows seems to be missing. If one clicks on
>>R-2.2.0pat-win32.exe at, say,
>>
>>   http://stat.ethz.ch/CRAN/bin/windows/base/rpatched.html
>>
>>then an error occurs.  I tried it at several mirror sites with the same
>>result.  The web page in question says:
>>
>>This directory contains a Windows binary build of R including patches
>>up to 2005-10-24.
> 
> 
> Looks like an HTML issue. Almost all links on that page go to files in
> the server root, and likewise for r-devel. The .exe files themselves
> seem to be quite happily sitting alongside the release binary at e.g.
> 
> http://cran.r-project.org/bin/windows/base/R-2.2.0pat-win32.exe
> 
> 
> The source for the link table in r-patched.html is currently looking like this:

See the thread on this with subject "Re: [Rd] download problem: Windows 
binaries - patched/devel versions".  We know about it and are working on 
it.  It's caused by the mirroring software being a little too helpful.

Duncan Murdoch

> 
> <TABLE WIDTH="90%" BORDER="0">
> <TBODY>
>   <TR>
>     <TD WIDTH="19%" VALIGN="top"><A HREF="../../../../../../../../../README.R-2.2.0pat">README.R-2.2.0pat</A></TD>
>     <TD WIDTH="81%">Installation and other instructions.</TD>
>   </TR>
>   <TR>
>     <TD WIDTH="19%" VALIGN="top"><A HREF="../../../../../../../../../CHANGES.R-2.2.0pat">CHANGES</A></TD>
> 
>     <TD WIDTH="81%">New features of this Windows version.</TD>
>   </TR>
>   <TR>
>     <TD WIDTH="19%" VALIGN="top"><A HREF="../../../../../../../../../NEWS.R-2.2.0pat">NEWS</A></TD>
>     <TD WIDTH="81%">New features of all versions.</TD>
>   </TR>
>   <TR>
> 
>     <TD WIDTH="19%" VALIGN="top"><A HREF="../../../../../../../../../R-2.2.0pat-win32.exe">R-2.2.0pat-win32.exe</A></TD>
>     <TD WIDTH="81%">Setup program (about 25 megabytes). Please download this
>     from a <A HREF="http://cran.r-project.org/mirrors.html">mirror near you</A>. <BR>
>     This corresponds to the file named <B>SetupR.exe</B> or
>     <B>rwXXXX.exe</B> in pre-2.2.0 releases.</TD>
> 
>   </TR>
> </TBODY>
> </TABLE>
> 
> <
>


From roebuck at mdanderson.org  Wed Oct 26 20:10:52 2005
From: roebuck at mdanderson.org (Paul Roebuck)
Date: Wed, 26 Oct 2005 13:10:52 -0500 (CDT)
Subject: [Rd] pb with dyn.load - fortran code now attached
In-Reply-To: <Pine.LNX.4.61.0510261626050.5413@gannet.stats>
References: <200510261514.40235.gilles.guillot@inapg.inra.fr>
	<Pine.OSF.4.58.0510260951360.171503@wotan.mdacc.tmc.edu>
	<Pine.LNX.4.61.0510261626050.5413@gannet.stats>
Message-ID: <Pine.OSF.4.58.0510261223330.171503@wotan.mdacc.tmc.edu>

On Wed, 26 Oct 2005, Prof Brian Ripley wrote:

> On Wed, 26 Oct 2005, Paul Roebuck wrote:
>
> > On Wed, 26 Oct 2005, Gilles GUILLOT wrote:
> >
> >> QUESTION 1:
> >> [guillot at laplace guillot]$ R
> >> R : Copyright 2005, The R Foundation for Statistical Computing
> >> Version 2.2.0  (2005-10-06 r35749)
> >> ISBN 3-900051-07-0
> >>
> >> >system("R CMD SHLIB ~/tmp/test1.f")
> >> g77   -fPIC  -g -O2 -c /home/guillot/tmp/test1.f -o /home/guillot/tmp/test1.o
> >> gcc -shared -L/usr/local/lib
> >> -o /home/guillot/tmp/test1.so /home/guillot/tmp/test1.o  -lg2c -lm -lgcc_s
> >>> system("R CMD SHLIB ~/tmp/test2.f")
> >> g77   -fPIC  -g -O2 -c /home/guillot/tmp/test2.f -o /home/guillot/tmp/test2.o
> >> gcc -shared -L/usr/local/lib
> >> -o /home/guillot/tmp/test2.so /home/guillot/tmp/test2.o  -lg2c -lm -lgcc_s
> >>>
> >>> is.loaded("sub")
> >> [1] FALSE
> >>> is.loaded("sub_")
> >> [1] FALSE
> >>>
> >> ## OK
> >>> dyn.load("~/tmp/test1.so")
> >>> is.loaded("sub")
> >> [1] FALSE
> >>> is.loaded("sub_")
> >> [1] TRUE
> >>>
> >> ## it seems it does not comply with the 'value' section of the help
> >> ## of function is.loaded:
> >> ## "it needs the
> >> ##    name you would give to '.C' or '.Fortran' and *not* that remapped
> >> ##    by 'symbol.C' and 'symbol.For'."
> >> ##
> >> ## am i missing something ?
> >>> q()
> >
> > The is.loaded method needs the argument to look exactly
> > like the associated output from 'nm' (i.e., symbol name).
> >
> > $ nm ~/tmp/test1.so | grep sub
> >
> > Thus, you are manually asking for the following
> >
> >> is.loaded(symbol.For("sub"))
> >
> > The call to .Fortran use the (lowercase) name of the subroutine
> > as it would appear in the Fortran source code.
> >
> > .Fortran("sub", ...)
>
> Not at all the whole story.  First (unfortunately), the case mapping is
> OS-dependent and even compiler-dependent.  Second, look at stats.so which
> has
>
> 00030cf0 T supsmu_
>
> yet
>
> > is.loaded("supsmu_")
> [1] FALSE
> > is.loaded("supsmu")
> [1] TRUE
>
> That is a Fortran entry point, and it complies with the description
> quoted.
>
> What is.loaded() needs depends on how the symbol would be found
> and so it is not much use.

My example using symbol.For was outdated as I haven't
used the function in some time. I would suggest a
modification to the man page for this method though.

Rather than using the vague word 'nowadays'
     available for use in '.C' or '.Fortran': nowadays it needs the
it might mention when this change took place.
     available for use in '.C' or '.Fortran': as of R-2.x.x, it needs the

I know it occurred after R-1.9.1 but don't know when.

----------------------------------------------------------
SIGSIG -- signature too long (core dumped)


From cberry at tajo.ucsd.edu  Wed Oct 26 21:24:53 2005
From: cberry at tajo.ucsd.edu (Charles C. Berry)
Date: Wed, 26 Oct 2005 12:24:53 -0700
Subject: [Rd] unexpected '[<-.data.frame' result
Message-ID: <Pine.LNX.4.63.0510261142050.11780@tajo.ucsd.edu>


Is this a bug?

If not, I am curious to know why '[<-.data.frame' was designed to yield 
a.frame$y != a.frame$z rather than refusing to carry out the operation at 
all.

> a.frame <- data.frame( x=letters[1:5] )
> a.frame[ 2:5, "y" ] <- letters[2:5]
> a.frame[[ "z" ]][ 2:5 ] <- letters[2:5]
> a.frame
   x    y    z
1 a    b <NA>
2 b    c    b
3 c    d    c
4 d    e    d
5 e <NA>    e

Chuck


Charles C. Berry                        (858) 534-2098
                                          Dept of Family/Preventive Medicine
E mailto:cberry at tajo.ucsd.edu	         UC San Diego
http://biostat.ucsd.edu/~cberry/         La Jolla, San Diego 92093-0717


From p.dalgaard at biostat.ku.dk  Wed Oct 26 22:25:32 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 26 Oct 2005 22:25:32 +0200
Subject: [Rd] unexpected '[<-.data.frame' result
In-Reply-To: <Pine.LNX.4.63.0510261142050.11780@tajo.ucsd.edu>
References: <Pine.LNX.4.63.0510261142050.11780@tajo.ucsd.edu>
Message-ID: <x2irvk6n5v.fsf@turmalin.kubism.ku.dk>

"Charles C. Berry" <cberry at tajo.ucsd.edu> writes:

> Is this a bug?
> 
> If not, I am curious to know why '[<-.data.frame' was designed to yield 
> a.frame$y != a.frame$z rather than refusing to carry out the operation at 
> all.
> 
> > a.frame <- data.frame( x=letters[1:5] )
> > a.frame[ 2:5, "y" ] <- letters[2:5]
> > a.frame[[ "z" ]][ 2:5 ] <- letters[2:5]
> > a.frame
>    x    y    z
> 1 a    b <NA>
> 2 b    c    b
> 3 c    d    c
> 4 d    e    d
> 5 e <NA>    e

It sure looks like a bug, and we're not even prototype-compatible:

turmalin:~/>Splus
S-PLUS : Copyright (c) 1988, 2003 Insightful Corp.
S : Copyright Lucent Technologies, Inc.
Version 6.2.1  for Linux 2.4.18 : 2003
Working data will be in /home/bs/pd/MySwork
> a.frame <- data.frame( x=letters[1:5] )
>  a.frame[ 2:5, "y" ] <- letters[2:5]
> a.frame
  x y
1 a
2 b b
3 c c
4 d d
5 e e

(S-PLUS doesn't know about character NA, so it's not surprising that
you get an empty cell, but it does fill in the right rows of y).

Why would you expect the operation to be refused?

The problem is not, BTW, restricted to character column indexing:

> a.frame
  x y   V3
1 a b    b
2 b b    c
3 c c    d
4 d d    e
5 e e <NA>

The problem would seem to be the else clause in

            if (jj <= nvars) {
                if (length(dim(x[jj])) != 2)
                  x[[jj]][iseq] <- vjj
                else x[[jj]][iseq, ] <- vjj
            }
            else {
                length(vjj) <- nrows
                x[[jj]] <- vjj
            }

which I think wants to be

            else {
                x[[jj]] <- vjj[FALSE]
                length(x[[jj]]) <- nrows
                x[[jj]][iseq] <- vjj
            }



-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From huzhou at hsph.harvard.edu  Wed Oct 26 23:07:38 2005
From: huzhou at hsph.harvard.edu (huanyu zhou)
Date: Wed, 26 Oct 2005 17:07:38 -0400
Subject: [Rd] Borland C++ and [R] dyn.load() for windows
Message-ID: <4364DEA5@www.webmail.hsph.harvard.edu>

Hi, 
I compiled a C program file on Borland C++ 5.5 compiler to get one dll output 
(as instructed in the file readme.package). 
The C program file is just the example on page 31 of "writing R extensions":

void convolve(double *a, int *na, double *b, int *nb, double *ab)
{
int i, j, nab = *na + *nb - 1;
for(i = 0; i < nab; i++)
ab[i] = 0.0;
for(i = 0; i < *na; i++)
for(j = 0; j < *nb; j++)
ab[i + j] += a[i] * b[j];
}

I used
"bcc32 -Ic:\Borland\bcc55\include -Lc:\Borland\bcc55\Lib -u- -6 -O2 -WDE 
c:\Borland\bcc55\convolve.c"
to get "convolve.dll". It seemed fine.

When I used dyn.load("C:\\Borland\\BCC55\\Bin\\convolve.dll") in R (Version 
2.0.1 ), it seemed fine also, no warning or error messages. However, when I 
used is.loaded("convolve") to check if it was loaded, it showed "False".

I am working on winXP.

What could be the possible reason for that?


thanks

huanyu


From ripley at stats.ox.ac.uk  Wed Oct 26 23:20:57 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 26 Oct 2005 22:20:57 +0100 (BST)
Subject: [Rd] Borland C++ and [R] dyn.load() for windows
In-Reply-To: <4364DEA5@www.webmail.hsph.harvard.edu>
References: <4364DEA5@www.webmail.hsph.harvard.edu>
Message-ID: <Pine.LNX.4.61.0510262211090.1455@gannet.stats>

On Wed, 26 Oct 2005, huanyu zhou wrote:

> Hi,
> I compiled a C program file on Borland C++ 5.5 compiler to get one dll output
> (as instructed in the file readme.package).
> The C program file is just the example on page 31 of "writing R extensions":
>
> void convolve(double *a, int *na, double *b, int *nb, double *ab)
> {
> int i, j, nab = *na + *nb - 1;
> for(i = 0; i < nab; i++)
> ab[i] = 0.0;
> for(i = 0; i < *na; i++)
> for(j = 0; j < *nb; j++)
> ab[i + j] += a[i] * b[j];
> }

> I used
> "bcc32 -Ic:\Borland\bcc55\include -Lc:\Borland\bcc55\Lib -u- -6 -O2 -WDE
> c:\Borland\bcc55\convolve.c"
> to get "convolve.dll". It seemed fine.
>
> When I used dyn.load("C:\\Borland\\BCC55\\Bin\\convolve.dll") in R (Version
> 2.0.1 ), it seemed fine also, no warning or error messages. However, when I
> used is.loaded("convolve") to check if it was loaded, it showed "False".
>
> I am working on winXP.
>
> What could be the possible reason for that?

The usual reason is that no symbols are exported from the DLL: please use 
pedump -e to check.  I don't see any evidence that you asked for any to be 
and the example in README.packages uses __declspec(dllexport) in the 
original source.  You are advised to look up the reference given there for 
further details.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From mdsumner at utas.edu.au  Wed Oct 26 23:33:34 2005
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Thu, 27 Oct 2005 08:33:34 +1100
Subject: [Rd] strptime problem for 2004-10-03 02:00:00
In-Reply-To: <mailman.13.1130320801.9508.r-devel@r-project.org>
References: <mailman.13.1130320801.9508.r-devel@r-project.org>
Message-ID: <435FF62E.2020105@utas.edu.au>

Great.  Thanks for confirmation.

Cheers, Mike.

 >>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>>

----------------------------

Message: 16
Date: Tue, 25 Oct 2005 21:33:54 +0100 (BST)
From: Prof Brian Ripley <ripley at stats.ox.ac.uk>
Subject: Re: [Rd] strptime problem for 2004-10-03 02:00:00
To: Michael Sumner <mdsumner at utas.edu.au>
Cc: r-devel at stat.math.ethz.ch
Message-ID: <Pine.LNX.4.61.0510252030330.24595 at gannet.stats>
Content-Type: TEXT/PLAIN; charset=US-ASCII; format=flowed

It's a bug, a rather rare one.  2004-10-03 02:00:00 does not exist in your 
time zone, and in trying to find out if the time is on DST or not it has 
failed to find out.  It needs to be told that GMT is never on DST so not 
to bother.

On Linux, running R with TZ="GMT" set should fix this.  Windows is harder 
to control since it does not distinguish the UK timezone from GMT.

There is a bugfix now in R-devel.  It may migrate to R-patched in due 
course.

On Tue, 25 Oct 2005, Michael Sumner wrote:


>> Hello, I at first thought this was a system or locale issue, but since
>> it occurs on
>> both Windows and Linux and only for 2004 (AFAIK) I report it.
>>
>> I have a problem with as.POSIXct for the hour between
>> "2004-10-03 02:00:00 GMT" and "2004-10-03 02:59:59 GMT".
>>
>> In short, the 2 AM (GMT) hour in 2004 (but not in other years) is
>> interpreted as 1 AM by strptime:
>> (I use ISOdatetime as a convenience).
>>
>> ## Windows XP
>>
>> ISOdatetime(2004, 10, 3, 2, 0, 0,  tz = "GMT")
>> ##[1] "2004-10-03 01:00:00 GMT"
>> ISOdatetime(2004, 10, 3, 1, 0, 0,  tz = "GMT")
>> ##[1] "2004-10-03 01:00:00 GMT"
>>
>> ISOdatetime(2005, 10, 3, 2, 0, 0,  tz = "GMT")
>> ##[1] "2005-10-03 02:00:00 GMT"
>> ISOdatetime(2005, 10, 3, 1, 0, 0,  tz = "GMT")
>> ## [1] "2005-10-03 01:00:00 GMT"
>>
>


From cberry at tajo.ucsd.edu  Thu Oct 27 00:37:07 2005
From: cberry at tajo.ucsd.edu (Charles C. Berry)
Date: Wed, 26 Oct 2005 15:37:07 -0700
Subject: [Rd] unexpected '[<-.data.frame' result
In-Reply-To: <x2irvk6n5v.fsf@turmalin.kubism.ku.dk>
References: <Pine.LNX.4.63.0510261142050.11780@tajo.ucsd.edu>
	<x2irvk6n5v.fsf@turmalin.kubism.ku.dk>
Message-ID: <Pine.LNX.4.63.0510261526530.11780@tajo.ucsd.edu>

On Wed, 26 Oct 2005, Peter Dalgaard wrote:

> "Charles C. Berry" <cberry at tajo.ucsd.edu> writes:
>
>> Is this a bug?
>>
>> If not, I am curious to know why '[<-.data.frame' was designed to yield
>> a.frame$y != a.frame$z rather than refusing to carry out the operation at
>> all.
>>
>>> a.frame <- data.frame( x=letters[1:5] )
>>> a.frame[ 2:5, "y" ] <- letters[2:5]
>>> a.frame[[ "z" ]][ 2:5 ] <- letters[2:5]
>>> a.frame
>>    x    y    z
>> 1 a    b <NA>
>> 2 b    c    b
>> 3 c    d    c
>> 4 d    e    d
>> 5 e <NA>    e
>
> It sure looks like a bug, and we're not even prototype-compatible:
>

[stuff deleted]

>
> Why would you expect the operation to be refused?
>

I was having trouble deciding if the use of "whole" in the 
Extract.data.frame help page was a warning against creating columns with 
only some entries present:

 	"The replacement methods can be used to add whole column(s)..."

[rest deleted]

Charles C. Berry                        (858) 534-2098
                                          Dept of Family/Preventive Medicine
E mailto:cberry at tajo.ucsd.edu	         UC San Diego
http://biostat.ucsd.edu/~cberry/         La Jolla, San Diego 92093-0717


From gilles.guillot at inapg.inra.fr  Thu Oct 27 10:30:45 2005
From: gilles.guillot at inapg.inra.fr (Gilles GUILLOT)
Date: Thu, 27 Oct 2005 10:30:45 +0200
Subject: [Rd] pb with dyn.load - fortran code now attached
In-Reply-To: <Pine.LNX.4.61.0510261626050.5413@gannet.stats>
References: <200510261514.40235.gilles.guillot@inapg.inra.fr>
	<Pine.OSF.4.58.0510260951360.171503@wotan.mdacc.tmc.edu>
	<Pine.LNX.4.61.0510261626050.5413@gannet.stats>
Message-ID: <200510271030.46103.gilles.guillot@inapg.inra.fr>


> > is.loaded("supsmu_")
>
> [1] FALSE
>
> > is.loaded("supsmu")
>
> [1] TRUE
>
> That is a Fortran entry point, and it complies with the description
> quoted.
>
> What is.loaded() needs depends on how the symbol would be found
> and so it is not much use.

OK, thanks.

But still 
> is.loaded("fstat_")
[1] FALSE
> dyn.load("~/tmp/test1.so")
> is.loaded("fstat_")
[1] TRUE

while test1.so does not contains any reference to fstat.
How does anything like fstat happens to be loaded ?

Gilles 



From ripley at stats.ox.ac.uk  Thu Oct 27 12:30:04 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 27 Oct 2005 11:30:04 +0100 (BST)
Subject: [Rd] X11 resources
Message-ID: <Pine.LNX.4.61.0510271114150.31101@gannet.stats>

As requested a while back, x11() and dataentry() in R-devel now respond to 
a few X11 resources, notably geometry, and x11() has xpos and ypos 
arguments for positioning (as windows() has long had).

I've tested these on three separate X11 window managers, but the code 
does depend on WM hints so would people who are interested please try them 
on their own systems.  (On Solaris/CDE the dataentry widget picks up 
system foreground and background colours, for example.)

Also, I have assumed Xt is available without specific testing.  Now as it 
has been part of X11 for a very long time one would think it is implied by 
the tests that are done,  but please let me know if this causes a problem.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ehlers at math.ucalgary.ca  Thu Oct 27 12:32:18 2005
From: ehlers at math.ucalgary.ca (ehlers@math.ucalgary.ca)
Date: Thu, 27 Oct 2005 12:32:18 +0200 (CEST)
Subject: [Rd] PR#8229
Message-ID: <20051027103218.5BA6E23776@slim.kubism.ku.dk>


platform i386-pc-mingw32
arch     i386
os       mingw32
system   i386, mingw32
status   Patched
major    2
minor    2.0
year     2005
month    10
day      24
svn rev  36016
language R


Re: plot.TukeyHSD

Thanks for the recent quick fix. Another small fix is needed.
I should have tested more thoroughly.

Replace:

xi <- x[[i]][, -4]

with:

xi <- x[[i]][, -4, drop = FALSE]

in order to keep nrow() functioning properly in

yvals <- nrow(xi):1

when xi has only one row as in the helpfile example with

plot(TukeyHSD(fm1, "wool"))


Peter Ehlers
U of Calgary


From kkr at dfu.min.dk  Thu Oct 27 18:50:49 2005
From: kkr at dfu.min.dk (Kasper Kristensen)
Date: Thu, 27 Oct 2005 12:50:49 -0400
Subject: [Rd] do_optimhess: ndeps parscale
Message-ID: <1130431849.1233.47.camel@box.dfu.local>

Dear list

I think there might be an inconsistency in the function "do_optimhess"
in src/main/optim.c. 
Consider changing the line
"eps = OS->ndeps[i]/(OS->parscale[i]);" 
to
"eps = OS->ndeps[i];"
Then "ndeps" is the finite-difference step on "par/parscale" as it
should be according to the documentation.

Motivation:

> ## EXAMPLE
> f <- function(x){sum(exp(.5*(a*x)^2))}
> a <- c(1e-3,1e3)
>
> ## On "par/parscale"-domain we want g(y)=sum(exp(.5*y^2))
> parscale <- 1/a
>
> ## Optimization works only when using a good parscale:
> xstart <- 1/a
> optim(xstart,f,hessian=FALSE,method="CG")$par
[1] 1.000000e+03 7.726989e-09
>
optim(xstart,f,hessian=FALSE,method="CG",control=list(parscale=parscale))$par
[1] -2.321611e-09 -2.277797e-15
>
> ## But even with a good parscale the hessian computation is wrong:
> xhat <- c(0,0)
> optim(xhat,f,hessian=TRUE,method="CG")$hessian
             [,1]    [,2]
[1,] 1.000089e-06       0
[2,] 0.000000e+00 3194528
>
optim(xhat,f,hessian=TRUE,method="CG",control=list(parscale=parscale))$hessian
             [,1]    [,2]
[1,] 1.000000e-06       0
[2,] 0.000000e+00 1648722

##### RECOMPILING WITH THE SUGGESTED CHANGE GIVES CORRECT HESSIAN:
>
optim(xhat,f,hessian=TRUE,method="CG",control=list(parscale=parscale))$hessian
             [,1]    [,2]
[1,] 1.000001e-06       0
[2,] 0.000000e+00 1000001


Best regards
Kasper Kristensen


From hin-tak.leung at cimr.cam.ac.uk  Thu Oct 27 15:10:35 2005
From: hin-tak.leung at cimr.cam.ac.uk (Hin-Tak Leung)
Date: Thu, 27 Oct 2005 14:10:35 +0100
Subject: [Rd] column names in pivoted matrix operations.
Message-ID: <4360D1CB.7010700@cimr.cam.ac.uk>

Hi,

Somebody gave me this little problem about QR decomposition and
Choleski Decomposition. The column names of the matrix (if the user 
choose to name them explicitly with dimname or it was composed from
named vectors) remains the same after the operation, although
the content has been swapped during pivoting in the
LAPACK/LINPACK C/fortran routines. Is this wrong, or at least, dubious?

Here are two patches against the two files in 
"R-2.2.0/src/library/base/R" - I have tested them both myself,
to obtain what I believe to be "sensible" behavior.

Feedbacks?

Hin-Tak Leung

=================================================
--- chol.R.orig 2005-04-18 11:19:15.000000000 +0100
+++ chol.R      2005-10-27 13:44:12.245692000 +0100
@@ -33,6 +33,7 @@
                        DUP = FALSE, PACKAGE = "base")
          if (!pivot && z$rank < n)
              stop("matrix not positive definite")
+        colnames(z$x) <- colnames(z$x)[z$piv]
          robj <- z$x
          if (pivot) {
              attr(robj, "pivot") <- z$piv
--- qr.R.orig   2005-04-18 11:19:14.000000000 +0100
+++ qr.R        2005-10-27 12:41:12.204974000 +0100
@@ -217,6 +217,7 @@
      if (!complete)
         R <- R[seq(min(dim(R))), , drop = FALSE]
      R[row(R) > col(R)] <- 0
+    colnames(R)= colnames(R)[qr$pivot]
      R
  }

=================================================
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: chol.R.patch
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051027/8375976a/chol.R.pl
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: qr.R.patch
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051027/8375976a/qr.R.pl

From g.toedt at dkfz.de  Thu Oct 27 15:24:31 2005
From: g.toedt at dkfz.de (g.toedt@dkfz.de)
Date: Thu, 27 Oct 2005 15:24:31 +0200 (CEST)
Subject: [Rd] Critical Bug in type conversions: as.integer, trunc,
	... (PR#8255)
Message-ID: <20051027132431.7DC9022150@slim.kubism.ku.dk>

Full_Name: Grischa T?dt
Version: 2.1.1
OS: windows XP
Submission from: (NULL) (192.108.25.32)


I have a strange behaviour in R, looks like type conversions are messed up.

To reproduce:

expected:
> typeof(3)
[1] "double"

> as.integer(3)
[1] 3

!!!! strange:
> typeof((0.3/0.1))
[1] "double"

> as.integer((0.3/0.1))
[1] 2

also for trunc:
>trunc(c(5,7))
>c(0.5,0.7)/c(0.1,0.1)

and now watch the amazing!!!!:
>trunc((c(0.5,0.7)/c(0.1,0.1)))




My R-Version:
platform i386-pc-mingw32
arch     i386           
os       mingw32        
system   i386, mingw32  
status                  
major    2              
minor    1.1            
year     2005           
month    06             
day      20             
language R


From g.toedt at dkfz-heidelberg.de  Thu Oct 27 15:40:09 2005
From: g.toedt at dkfz-heidelberg.de (g.toedt@dkfz-heidelberg.de)
Date: Thu, 27 Oct 2005 15:40:09 +0200 (CEST)
Subject: [Rd] Strange behaviour of type conversion (PR#8256)
Message-ID: <20051027134009.5BCDB2215C@slim.kubism.ku.dk>

Where is my error??
I have a strange behaviour in R, looks like type conversions are messed =
up.
Maybe i just make a stupid mistake, but help would be appreciated.

To reproduce:

expected:
> typeof(3)
[1] "double"

> as.integer(3)
[1] 3

> typeof((0.3/0.1))
[1] "double"

!!!! strange:
> as.integer((0.3/0.1))
[1] 2

also for trunc:
>trunc(c(5,7))
[1] 5 7

>c(0.5,0.7)/c(0.1,0.1)
[1] 5 7

and now watch:
>trunc((c(0.5,0.7)/c(0.1,0.1)))
[1] 5 6

My R-Version:
platform i386-pc-mingw32
arch     i386          =20
os       mingw32       =20
system   i386, mingw32 =20
status                 =20
major    2             =20
minor    1.1           =20
year     2005          =20
month    06            =20
day      20            =20
language R


Cheers,
Grischa T=F6dt


From murdoch at stats.uwo.ca  Thu Oct 27 15:40:05 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Thu, 27 Oct 2005 09:40:05 -0400
Subject: [Rd] Critical Bug in type conversions: as.integer, trunc,
 ... (PR#8255)
In-Reply-To: <20051027132431.7DC9022150@slim.kubism.ku.dk>
References: <20051027132431.7DC9022150@slim.kubism.ku.dk>
Message-ID: <4360D8B5.5040503@stats.uwo.ca>

On 10/27/2005 9:24 AM, g.toedt at dkfz.de wrote:
> Full_Name: Grischa T?dt
> Version: 2.1.1
> OS: windows XP
> Submission from: (NULL) (192.108.25.32)
> 
> 
> I have a strange behaviour in R, looks like type conversions are messed up.

This is not a bug, it's normal behaviour for floating point values, 
discussed in the FAQ item on "7.31 Why doesn't R think these numbers are 
equal?"

Duncan Murdoch

> 
> To reproduce:
> 
> expected:
>> typeof(3)
> [1] "double"
> 
>> as.integer(3)
> [1] 3
> 
> !!!! strange:
>> typeof((0.3/0.1))
> [1] "double"
> 
>> as.integer((0.3/0.1))
> [1] 2
> 
> also for trunc:
>>trunc(c(5,7))
>>c(0.5,0.7)/c(0.1,0.1)
> 
> and now watch the amazing!!!!:
>>trunc((c(0.5,0.7)/c(0.1,0.1)))
> 
> 
> 
> 
> My R-Version:
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    2              
> minor    1.1            
> year     2005           
> month    06             
> day      20             
> language R
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch at stats.uwo.ca  Thu Oct 27 15:40:18 2005
From: murdoch at stats.uwo.ca (murdoch@stats.uwo.ca)
Date: Thu, 27 Oct 2005 15:40:18 +0200 (CEST)
Subject: [Rd] Critical Bug in type conversions: as.integer, trunc,
	... (PR#8257)
Message-ID: <20051027134018.D34F221ED6@slim.kubism.ku.dk>

On 10/27/2005 9:24 AM, g.toedt at dkfz.de wrote:
> Full_Name: Grischa T?dt
> Version: 2.1.1
> OS: windows XP
> Submission from: (NULL) (192.108.25.32)
> 
> 
> I have a strange behaviour in R, looks like type conversions are messed up.

This is not a bug, it's normal behaviour for floating point values, 
discussed in the FAQ item on "7.31 Why doesn't R think these numbers are 
equal?"

Duncan Murdoch

> 
> To reproduce:
> 
> expected:
>> typeof(3)
> [1] "double"
> 
>> as.integer(3)
> [1] 3
> 
> !!!! strange:
>> typeof((0.3/0.1))
> [1] "double"
> 
>> as.integer((0.3/0.1))
> [1] 2
> 
> also for trunc:
>>trunc(c(5,7))
>>c(0.5,0.7)/c(0.1,0.1)
> 
> and now watch the amazing!!!!:
>>trunc((c(0.5,0.7)/c(0.1,0.1)))
> 
> 
> 
> 
> My R-Version:
> platform i386-pc-mingw32
> arch     i386           
> os       mingw32        
> system   i386, mingw32  
> status                  
> major    2              
> minor    1.1            
> year     2005           
> month    06             
> day      20             
> language R
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From MSchwartz at mn.rr.com  Thu Oct 27 15:41:03 2005
From: MSchwartz at mn.rr.com (Marc Schwartz)
Date: Thu, 27 Oct 2005 08:41:03 -0500
Subject: [Rd] Critical Bug in type conversions: as.integer, trunc,
	(PR#8255)
In-Reply-To: <20051027132431.7DC9022150@slim.kubism.ku.dk>
References: <20051027132431.7DC9022150@slim.kubism.ku.dk>
Message-ID: <1130420463.4196.37.camel@localhost.localdomain>

On Thu, 2005-10-27 at 15:24 +0200, g.toedt at dkfz.de wrote:
> Full_Name: Grischa T?dt
> Version: 2.1.1
> OS: windows XP
> Submission from: (NULL) (192.108.25.32)
> 
> 
> I have a strange behaviour in R, looks like type conversions are messed up.
> 
> To reproduce:
> 
> expected:
> > typeof(3)
> [1] "double"
> 
> > as.integer(3)
> [1] 3
> 
> !!!! strange:
> > typeof((0.3/0.1))
> [1] "double"

> > as.integer((0.3/0.1))
> [1] 2
> 
> also for trunc:
> >trunc(c(5,7))
> >c(0.5,0.7)/c(0.1,0.1)
> 
> and now watch the amazing!!!!:
> >trunc((c(0.5,0.7)/c(0.1,0.1)))


> trunc((c(0.5,0.7)/c(0.1,0.1)))
[1] 5 6


You are getting bitten (you know where) by floating point representation
issues here:

> print(0.3 / 0.1, digits = 20)
[1] 2.9999999999999995559

> print(0.7 / 0.1, digits = 20)
[1] 6.9999999999999991118

So as.integer() and trunc() is working as intended, since in both cases,
they truncate towards 0.


Bottom line:

NOTABUG


Read R FAQ 7.31 and the reference cited there for more information.

HTH,

Marc Schwartz


From p.c.j.kleiweg at rug.nl  Thu Oct 27 15:48:48 2005
From: p.c.j.kleiweg at rug.nl (Peter Kleiweg)
Date: Thu, 27 Oct 2005 15:48:48 +0200 (CEST)
Subject: [Rd] Strange behaviour of type conversion (PR#8256)
In-Reply-To: <20051027134009.5BCDB2215C@slim.kubism.ku.dk>
References: <20051027134009.5BCDB2215C@slim.kubism.ku.dk>
Message-ID: <Pine.LNX.4.63.0510271546500.1082@kleigh.nl>

g.toedt at dkfz-heidelberg.de schreef op de 27e dag van de wijnmaand van het...:

> Where is my error??
> I have a strange behaviour in R, looks like type conversions are messed =
> up.
> Maybe i just make a stupid mistake, but help would be appreciated.

Not maybe. You definately make a stupid mistake. There is no 
error here in the behavior of R.

-- 
Peter Kleiweg


From h.wickham at gmail.com  Thu Oct 27 15:49:48 2005
From: h.wickham at gmail.com (hadley wickham)
Date: Thu, 27 Oct 2005 08:49:48 -0500
Subject: [Rd] Strange behaviour of type conversion (PR#8256)
In-Reply-To: <20051027134009.5BCDB2215C@slim.kubism.ku.dk>
References: <20051027134009.5BCDB2215C@slim.kubism.ku.dk>
Message-ID: <f8e6ff050510270649n7497a2fcr40c0f420066763d4@mail.gmail.com>

> Where is my error??

You are assuming that numbers are represented exactly:
http://cran.r-project.org/doc/FAQ/R-FAQ.html#Why-doesn_0027t-R-think-these-numbers-are-equal_003f

> 0.3/0.1 == 3
[1] FALSE

Hadley


From p.dalgaard at biostat.ku.dk  Thu Oct 27 16:01:50 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 27 Oct 2005 16:01:50 +0200
Subject: [Rd] Strange behaviour of type conversion (PR#8256)
In-Reply-To: <20051027134009.5BCDB2215C@slim.kubism.ku.dk>
References: <20051027134009.5BCDB2215C@slim.kubism.ku.dk>
Message-ID: <x2ek67ukhd.fsf@viggo.kubism.ku.dk>

g.toedt at dkfz-heidelberg.de writes:

> Where is my error??
> I have a strange behaviour in R, looks like type conversions are messed =
> up.
> Maybe i just make a stupid mistake, but help would be appreciated.
> 
> To reproduce:
> 
> expected:
> > typeof(3)
> [1] "double"
> 
> > as.integer(3)
> [1] 3
> 
> > typeof((0.3/0.1))
> [1] "double"
> 
> !!!! strange:
> > as.integer((0.3/0.1))
> [1] 2
> 
> also for trunc:
> >trunc(c(5,7))
> [1] 5 7
> 
> >c(0.5,0.7)/c(0.1,0.1)
> [1] 5 7
> 
> and now watch:
> >trunc((c(0.5,0.7)/c(0.1,0.1)))
> [1] 5 6


None of this is bugs. Please read up on floating point representations
on a binary computer. Specifically:

> 0.3/0.1 - 3
[1] -4.440892e-16
> 0.7/0.1 - 7
[1] -8.881784e-16
> 0.5/0.1 - 5
[1] 0


 
> My R-Version:
> platform i386-pc-mingw32
> arch     i386          =20
> os       mingw32       =20
> system   i386, mingw32 =20
> status                 =20
> major    2             =20
> minor    1.1           =20
> year     2005          =20
> month    06            =20
> day      20            =20
> language R
> 
> 
> Cheers,
> Grischa T=F6dt
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 

-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From david.clayton at cimr.cam.ac.uk  Thu Oct 27 16:50:51 2005
From: david.clayton at cimr.cam.ac.uk (david.clayton@cimr.cam.ac.uk)
Date: Thu, 27 Oct 2005 16:50:51 +0200 (CEST)
Subject: [Rd] Column names in qr() and chol() (PR#8258)
Message-ID: <20051027145051.7B03820BF3@slim.kubism.ku.dk>

I am using 2.2.0

If the QR decomposition of an N*M matrix is such that the pivoting order
is not 1:M, Q%*%R  does not result in the original matrix but in a
matrix with the columns permuted. This is clearly intentional, and
probably to be expected if pivoting is used --- chol() behaves in the
same manner (it would perhaps be nice if the qr help page made that
clear in the same way that the chol() help page does). 

The small bug is that column names are not permuted in the same way, so
that, after permuting the columns of Q%*%R so that it is equal to the
input matrix, it is mislabelled. The same small bug is present in 
chol() when pivoting is switched on.

It's a minor matter but, perhaps, easily fixed. I think one line which
reordered the column names of the $qr list element of the object
returned by qr() would fix things (and similarly for chol)

Example:

> A <- 1:10
> B <- A^2
> C <- B-A
> D <- rep(1, 10)
> X <- cbind(A,B,C,D)
> qrX <- qr(X)
> qrX$pivot
[1] 1 2 4 3
> oo <- order(qrX$pivot)
> Q <- qr.Q(qrX)
> R <- qr.R(qrX)
> Q%*%R
       
         A   B C            D
   [1,]  1   1 1 2.875732e-14
   [2,]  2   4 1 2.000000e+00
   [3,]  3   9 1 6.000000e+00
   [4,]  4  16 1 1.200000e+01
   [5,]  5  25 1 2.000000e+01
   [6,]  6  36 1 3.000000e+01
   [7,]  7  49 1 4.200000e+01
   [8,]  8  64 1 5.600000e+01
   [9,]  9  81 1 7.200000e+01
  [10,] 10 100 1 9.000000e+01
> (Q%*%R)[,oo]
       
         A   B            D C
   [1,]  1   1 2.875732e-14 1
   [2,]  2   4 2.000000e+00 1
   [3,]  3   9 6.000000e+00 1
   [4,]  4  16 1.200000e+01 1
   [5,]  5  25 2.000000e+01 1
   [6,]  6  36 3.000000e+01 1
   [7,]  7  49 4.200000e+01 1
   [8,]  8  64 5.600000e+01 1
   [9,]  9  81 7.200000e+01 1
  [10,] 10 100 9.000000e+01 1

# Note: column names of last two columns have been interchanged 

> XtX <- t(X)%*%X
> U <- chol(XtX, pivot=T)
> oo <- order(attr(U, "pivot"))
> XtX
   
       A     B     C   D
  A  385  3025  2640  55
  B 3025 25333 22308 385
  C 2640 22308 19668 330
  D   55   385   330  10
> t(U[,oo])%*% U[,oo]
   
       D     A     B   C
  D  385  3025  2640  55
  A 3025 25333 22308 385
  B 2640 22308 19668 330
  C   55   385   330  10

# Matrix has been successfully reproduced but mislabelled



David Clayton


From gsa-rostock at t-online.de  Thu Oct 27 22:05:11 2005
From: gsa-rostock at t-online.de (gsa-rostock@t-online.de)
Date: Thu, 27 Oct 2005 20:05:11 +0000
Subject: [Rd] Microarray software - GENOM 2005
Message-ID: <1EVC9f-24Dk7K0@fwd31.sul.t-online.de>

Dear Sir or Madam,

the society for software development and analytic (GSA) is a business 
company settled in Germany (Rostock/Mecklenburg-Western Pomerania). 
In particular we concentrate on doing the planning and evaluation of 
Microarray-Geneexpression-experiments that are based on the Affymetrix(TM) tecnology.
This is done by our state of the art software GENOM 2005.

Range of functions:
    - analysis and visualization of all arrays of the company Affymetrix(TM)
    - normalization and migration of raw data
    - provision of additional information
    - methods of analysis and export functions to SPSS and R
    - classification into metabolic and regularization paths
    - integrated Pathway-Editor
    - functional prognosis - sequence analysis

Have we drawn your interest?
On our server there is a demo version of the program available for download.

GENOM 2005 Infos:       http://gsa-online.dynalias.net/eng/genom.html
GENOM 2005 Download:    http://gsa.nothingreal.biz/genom2005_demo.zip

There is also a video available wich explaints the program in detail.
If you are interisted in it write us a mail and we send it by post for free.

All price information concerning the analysis of 
Microarray-Geneexpression-experiment or the purchase of a software licence 
can be taken from our Internet site or contact us directly.
We gladly submit an offer to you.

With kind regards Thomas Scheel, Sven Bansemer
GSA - Softwaredevelopment and Analytics
___________________________________________________________________________
Phone: +49 (0)381 7006224
E-Mail: info at gsa-online.de
Website: http://www.gsa-online.de
Management: Thomas Scheel, Sven Bansemer
Bank: Commerzbank  - Account -Nr.: 102148400 - BLZ: 13040000
Ust-IdNr.: 081/151/07403


From jmoreira at fe.up.pt  Thu Oct 27 20:25:08 2005
From: jmoreira at fe.up.pt (=?iso-8859-1?Q?Jo=E3o_Mendes_Moreira?=)
Date: Thu, 27 Oct 2005 19:25:08 +0100
Subject: [Rd] Fw: Example where PPR crashes
Message-ID: <009101c5db23$c318ae00$5f7aa8c0@FEUPsig.fe.up.pt>

An embedded and charset-unspecified text was scrubbed...
Name: not available
Url: https://stat.ethz.ch/pipermail/r-devel/attachments/20051027/5ac40258/attachment.pl

From apjaworski at mmm.com  Thu Oct 27 23:47:35 2005
From: apjaworski at mmm.com (apjaworski@mmm.com)
Date: Thu, 27 Oct 2005 16:47:35 -0500
Subject: [Rd] R-devel CHTML problem
Message-ID: <OF643E0C35.EC24E314-ON862570A7.0072D6A2-862570A7.0077B6BF@mmm.com>

Hi,

I encountered this problem just before the 2.2.0 release.  Then it went
away for a while and came back at the beginning of this week.  Here is what
is happening (I am on Win2000 machine with all the necessary tools
installed).

I compile R-devel and R-patched trees every couple of days and install them
in separate directories.  Everything seems to work fine for R-patched.
Compilation of R-devel also goes without a problem, but when I try to use
help with the chmhelp=TRUE I get two errors:
1.  A separate error windows pops up saying: "The procedure entry point
HtmlHelpA at 16 could not be located in the dynamic link library hhctrl.ocx"
2.  I get the following on the R console
      Error in dyn.load(x, as.logical(local), as.logical(now)) :
                 unable to load shared library
'C:/local/R/rw230/bin/Rchtml.dll':
       LoadLibrary failure:  The specified procedure could not be found.

I tried to track down the problem but I do not know much about CHTML.  Here
is what I discovered:
1.  The problem is with the Rchtml.dll (as 2 above suggests).  If I simply
replace the Rchtml.dll in the bin directory of version 2.3 with Rchtml.dll
from version 2.2 everything works fine!!
2.  Rchtml.dll is being built in the .../R-devel/src/gnuwin32/help folder.
The contents of this folder is:
      Makefile  libhhctrl.a  Rchtml.c  hhctrl.def   Rchtml.o
      MkChmDll  logo.bmp     Rchm.css  Rchtml.dll*  R.stp
     This is identical to the corresponding help folder in R-patched.
3.  All files in the help folders in both versions are identical (under
diff) except: libhhctrl.a and Rchtml.dll
4.  Doing ar -t  libhhctrl.a produces:
      dclact.o
      dclach.o
      dclacs00000.o
      in R-dvel but
      dquxbt.o
      dquxbh.o
      dquxbs00000.o
      in R-patched.
5.  The make process output for building  libhhctrl.a and Rchtml.dll is
identical:
      ...
      echo EXPORTS > hhctrl.def
      echo HtmlHelpA at 16 >> hhctrl.def
      dlltool --as as -k --dllname hhctrl.ocx  --def hhctrl.def
--output-lib libhhctrl.a
      gcc   -I "C:/Program Files/HTML Help Workshop/include" -c Rchtml.c -o
Rchtml.o
      gcc  --shared  -s -o Rchtml.dll Rchtml.def Rchtml.o -L.  -lhhctrl
      cp Rchtml.dll ../../../bin/Rchtml.dll
      ...

I am not sure if this is a problem with my particular setup (version of
hhctrl.ocx perhaps, which BTW is 5.2.3790.309) or a bug in R-devel.  Again,
I do not understand the CHTML building process at all, so it is hard for me
to figure out what is going on.

Any help will be appreciated,

Andy


__________________________________
Andy Jaworski
518-1-01
Process Laboratory
3M Corporate Research Laboratory
-----
E-mail: apjaworski at mmm.com
Tel:  (651) 733-6092
Fax:  (651) 736-3122


From ripley at stats.ox.ac.uk  Fri Oct 28 00:19:35 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 27 Oct 2005 23:19:35 +0100 (BST)
Subject: [Rd] R-devel CHTML problem
In-Reply-To: <OF643E0C35.EC24E314-ON862570A7.0072D6A2-862570A7.0077B6BF@mmm.com>
References: <OF643E0C35.EC24E314-ON862570A7.0072D6A2-862570A7.0077B6BF@mmm.com>
Message-ID: <Pine.LNX.4.61.0510272308370.25494@gannet.stats>

It's due to a change in the way dlltool is called.  Easy to fix (I've just 
done so): add -k to the DLLTOOL line in MkChmDll.

On Thu, 27 Oct 2005 apjaworski at mmm.com wrote:

> Hi,
>
> I encountered this problem just before the 2.2.0 release.  Then it went
> away for a while and came back at the beginning of this week.  Here is what
> is happening (I am on Win2000 machine with all the necessary tools
> installed).
>
> I compile R-devel and R-patched trees every couple of days and install them
> in separate directories.  Everything seems to work fine for R-patched.
> Compilation of R-devel also goes without a problem, but when I try to use
> help with the chmhelp=TRUE I get two errors:
> 1.  A separate error windows pops up saying: "The procedure entry point
> HtmlHelpA at 16 could not be located in the dynamic link library hhctrl.ocx"
> 2.  I get the following on the R console
>      Error in dyn.load(x, as.logical(local), as.logical(now)) :
>                 unable to load shared library
> 'C:/local/R/rw230/bin/Rchtml.dll':
>       LoadLibrary failure:  The specified procedure could not be found.
>
> I tried to track down the problem but I do not know much about CHTML.  Here
> is what I discovered:
> 1.  The problem is with the Rchtml.dll (as 2 above suggests).  If I simply
> replace the Rchtml.dll in the bin directory of version 2.3 with Rchtml.dll
> from version 2.2 everything works fine!!
> 2.  Rchtml.dll is being built in the .../R-devel/src/gnuwin32/help folder.
> The contents of this folder is:
>      Makefile  libhhctrl.a  Rchtml.c  hhctrl.def   Rchtml.o
>      MkChmDll  logo.bmp     Rchm.css  Rchtml.dll*  R.stp
>     This is identical to the corresponding help folder in R-patched.
> 3.  All files in the help folders in both versions are identical (under
> diff) except: libhhctrl.a and Rchtml.dll
> 4.  Doing ar -t  libhhctrl.a produces:
>      dclact.o
>      dclach.o
>      dclacs00000.o
>      in R-dvel but
>      dquxbt.o
>      dquxbh.o
>      dquxbs00000.o
>      in R-patched.
> 5.  The make process output for building  libhhctrl.a and Rchtml.dll is
> identical:
>      ...
>      echo EXPORTS > hhctrl.def
>      echo HtmlHelpA at 16 >> hhctrl.def
>      dlltool --as as -k --dllname hhctrl.ocx  --def hhctrl.def
> --output-lib libhhctrl.a
>      gcc   -I "C:/Program Files/HTML Help Workshop/include" -c Rchtml.c -o
> Rchtml.o
>      gcc  --shared  -s -o Rchtml.dll Rchtml.def Rchtml.o -L.  -lhhctrl
>      cp Rchtml.dll ../../../bin/Rchtml.dll
>      ...
>
> I am not sure if this is a problem with my particular setup (version of
> hhctrl.ocx perhaps, which BTW is 5.2.3790.309) or a bug in R-devel.  Again,
> I do not understand the CHTML building process at all, so it is hard for me
> to figure out what is going on.
>
> Any help will be appreciated,
>
> Andy
>
>
> __________________________________
> Andy Jaworski
> 518-1-01
> Process Laboratory
> 3M Corporate Research Laboratory
> -----
> E-mail: apjaworski at mmm.com
> Tel:  (651) 733-6092
> Fax:  (651) 736-3122
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From kushler at oakland.edu  Fri Oct 28 01:21:31 2005
From: kushler at oakland.edu (kushler@oakland.edu)
Date: Fri, 28 Oct 2005 01:21:31 +0200 (CEST)
Subject: [Rd] where is Jim Lemon? (PR#8259)
Message-ID: <20051027232131.8BF4620BF2@slim.kubism.ku.dk>


This concerns the contributed package "concord".  Sorry to bother
you with it, but my attempt to contact the author/maintainer
failed (see below).  Perhaps you can forward it, or let me
know where to send it.

Regards,   Rob Kushler


------------------------------------------------------


This is the Postfix program at host tak.itd.uts.edu.au.

I'm sorry to have to inform you that your message could not be
be delivered to one or more recipients. It's attached below.

For further assistance, please send mail to <postmaster>

If you do so, please include this problem report. You can
delete your own text from the attached returned message.

			The Postfix program

<jim.lemon at uts.edu.au>: host 138.25.243.40[138.25.243.40] said: 550 5.1.6
     recipient no longer on server: jim.lemon at uts.edu.au (in reply to RCPT TO
     command)



Reporting-MTA: dns; tak.itd.uts.edu.au
X-Postfix-Queue-ID: 37A885D8027
X-Postfix-Sender: rfc822; kushler at oakland.edu
Arrival-Date: Fri, 28 Oct 2005 09:01:17 +1000 (EST)

Final-Recipient: rfc822; jim.lemon at uts.edu.au
Action: failed
Status: 5.0.0
Diagnostic-Code: X-Postfix; host 138.25.243.40[138.25.243.40] said: 550 5.1.6
     recipient no longer on server: jim.lemon at uts.edu.au (in reply to RCPT TO
     command)



Subject:
Page test in "concord" package
From:
Robert Kushler <kushler at oakland.edu>
Date:
Thu, 27 Oct 2005 19:01:01 -0400
To:
jim.lemon at uts.edu.au


I believe there is a bug in the "page.trend.test" code.  The line
that computes "p.table" should have >= instead of > in the ifelse
statements.  E.g., with 3 treatments and 6 blocks the value L=79
has a p-value of 0.0288 (based on Table A.23 in Hollander and
Wolfe), but the function reports "NS" (think of the crushing
disappointment the researcher must have felt :-)

I've attached the code for the example where I discovered this.
The data are from problem 7 in Chapter 4 of the Higgins text
"Introduction to Modern Nonparametric Statistics".

Regards,  Rob Kushler



k <- 3
b <- 6
prob47 <- data.frame(day=factor(rep(1:k,each=b)),blk=factor(rep(1:b,k)),
  dryhay <- c(1.5,2.1,1.9,2.8,1.4,1.8,1.8,2.0,2.0,2.7,1.6,2.3,1.9,2.5,2.5,2.6,2.1,2.4))
attach(prob47)
(ymat <- matrix(dryhay,nrow=b,ncol=k))
library(concord)
page.trend.test(ymat)
muL <- b*k*(k+1)2/4
varL <- b*(k2)*(k+1)*(k2 -1)/144
(zL <- (79 - muL)/sqrt(varL))
pnorm(zL,lower=F)


From aimcleod at uwo.ca  Fri Oct 28 19:02:24 2005
From: aimcleod at uwo.ca (aimcleod@uwo.ca)
Date: Fri, 28 Oct 2005 19:02:24 +0200 (CEST)
Subject: [Rd] optim possible bug "L-BFGS-B" (PR#8261)
Message-ID: <20051028170224.0612522151@slim.kubism.ku.dk>

Full_Name: Ian McLeod
Version: 2.10
OS: windows
Submission from: (NULL) (129.100.76.136)



Subject:  Apparent bug in optim with "L-BFGS-B".


I found that optim works most of the time but sometimes produced an incorrect
answer.   In order to document what is happening, I tried to simplify by
re-writing the objective function in the optimization.  The new objective
function when evaluated gives numerically identical results except that optim
now works!!

Below is the output from optim for the two cases.  There should not be a
difference.  This output is followed by a comparison of function values for the
two methods for phis<-seq(-0.99,0.99,length=200).  In all these cases, the
function values do not appear to differ significantly.
 

Perhaps someone familar with how this algorithm works exactly, can see what is
happening.

If you would like more details (R code etc), please contact me:
aimcleod at uwo.ca


###################################################################
##Case 1.
##original objective function
## optim produces incorrect answer
###################################################################
> optim(0, fn=function(b) -LLarma(z,b,0), method="L-BFGS-B", lower=-0.99,
upper=0.99, control=list(trace=6))
N = 1, M = 5 machine precision = 2.22045e-016
L = -0.99 
X0 = 0 
U = 0.99 
At X0, 0 variables are exactly at the bounds
At iterate     0  f=       619.18  |proj g|=         0.99
Iteration     0

---------------- CAUCHY entered-------------------

There are 1  breakpoints

Piece      1 f1, f2 at start point -4.5485e+003 4.5485e+003
Distance to the next break point =  1.4679e-002
Distance to the stationary point =  1.0000e+000
Variable  1  is fixed.
Cauchy X =  0.99 

---------------- exit CAUCHY----------------------

0  variables are free at GCP on iteration 1
LINE SEARCH 1 times; norm of step = 0.417877
X = 0.417877 
G = -47.1062 
Iteration     1

---------------- CAUCHY entered-------------------

There are 1  breakpoints

Piece      1 f1, f2 at start point -2.2190e+003 1.0799e+005
Distance to the next break point =  1.2145e-002
Distance to the stationary point =  2.0548e-002
Variable  1  is fixed.
Cauchy X =  0.99 

---------------- exit CAUCHY----------------------

0 variables leave; 0 variables enter
0  variables are free at GCP on iteration 2
LINE SEARCH 1 times; norm of step = 0.299499
X = 0.717376 
G = 1.91222 
Iteration     2

---------------- CAUCHY entered-------------------

There are 1  breakpoints

Piece      1 f1, f2 at start point -3.6566e+000 5.9847e+002
Distance to the next break point =  8.9288e-001
Distance to the stationary point =  6.1099e-003

GCP found in this segment
Piece      1 f1, f2 at start point -3.6566e+000 5.9847e+002
Distance to the stationary point =  6.1099e-003
Cauchy X =  0.705692 

---------------- exit CAUCHY----------------------

Variable 1 enters the set of free variables
0 variables leave; 1 variables enter
1  variables are free at GCP on iteration 3
Nonpositive definiteness in Cholesky factorization in formk;
   refresh the lbfgs memory and restart the iteration.
Iteration     2

---------------- CAUCHY entered-------------------

There are 1  breakpoints

Piece      1 f1, f2 at start point -3.6566e+000 3.6566e+000
Distance to the next break point =  8.9288e-001
Distance to the stationary point =  1.0000e+000
Variable  1  is fixed.
Cauchy X =  -0.99 

---------------- exit CAUCHY----------------------

Variable 1 leaves the set of free variables
0  variables are free at GCP on iteration 3
LINE SEARCH 0 times; norm of step = 1.70738
X = -0.99 
G = -95.712 

iterations 3
function evaluations 6
segments explored during Cauchy searches 4
BFGS updates skipped 0
active bounds at final generalized Cauchy point 1
norm of the final projected gradient 1.98
final function value 679.48

X = -0.99 
F = 679.48
final  value 679.479918 
converged
$par
[1] -0.99

$value
[1] 679.4799

$counts
function gradient 
       6        6 

$convergence
[1] 0

$message
[1] "CONVERGENCE: REL_REDUCTION_OF_F <= FACTR*EPSMCH"


##############################################################
## Case 2
## I simplified the objective function for this special case.
## It seems to give numerically identical results with the previous
## one but the answers are different.
##############################################################
> optim(0.0, fn=Entropy, method="L-BFGS-B", lower=-0.99, upper=0.99,
control=list(trace=6))
N = 1, M = 5 machine precision = 2.22045e-016
L = -0.99 
X0 = 0 
U = 0.99 
At X0, 0 variables are exactly at the bounds
At iterate     0  f=       619.18  |proj g|=         0.99
Iteration     0

---------------- CAUCHY entered-------------------

There are 1  breakpoints

Piece      1 f1, f2 at start point -4.5485e+003 4.5485e+003
Distance to the next break point =  1.4679e-002
Distance to the stationary point =  1.0000e+000
Variable  1  is fixed.
Cauchy X =  0.99 

---------------- exit CAUCHY----------------------

0  variables are free at GCP on iteration 1
LINE SEARCH 1 times; norm of step = 0.417877
X = 0.417877 
G = -47.1062 
Iteration     1

---------------- CAUCHY entered-------------------

There are 1  breakpoints

Piece      1 f1, f2 at start point -2.2190e+003 1.0799e+005
Distance to the next break point =  1.2145e-002
Distance to the stationary point =  2.0548e-002
Variable  1  is fixed.
Cauchy X =  0.99 

---------------- exit CAUCHY----------------------

0 variables leave; 0 variables enter
0  variables are free at GCP on iteration 2
LINE SEARCH 1 times; norm of step = 0.299499
X = 0.717376 
G = 1.91222 
Iteration     2

---------------- CAUCHY entered-------------------

There are 1  breakpoints

Piece      1 f1, f2 at start point -3.6566e+000 5.9847e+002
Distance to the next break point =  8.9288e-001
Distance to the stationary point =  6.1099e-003

GCP found in this segment
Piece      1 f1, f2 at start point -3.6566e+000 5.9847e+002
Distance to the stationary point =  6.1099e-003
Cauchy X =  0.705692 

---------------- exit CAUCHY----------------------

Variable 1 enters the set of free variables
0 variables leave; 1 variables enter
1  variables are free at GCP on iteration 3
Nonpositive definiteness in Cholesky factorization in formk;
   refresh the lbfgs memory and restart the iteration.
Iteration     2

---------------- CAUCHY entered-------------------

There are 1  breakpoints

Piece      1 f1, f2 at start point -3.6566e+000 3.6566e+000
Distance to the next break point =  8.9288e-001
Distance to the stationary point =  1.0000e+000
Variable  1  is fixed.
Cauchy X =  -0.99 

---------------- exit CAUCHY----------------------

Variable 1 leaves the set of free variables
0  variables are free at GCP on iteration 3
LINE SEARCH 2 times; norm of step = 0.00986778
X = 0.707508 
G = 7.19684e-005 
Iteration     3

---------------- CAUCHY entered-------------------

There are 1  breakpoints

Piece      1 f1, f2 at start point -5.1795e-009 1.0037e-006
Distance to the next break point =  2.3587e+004
Distance to the stationary point =  5.1606e-003

GCP found in this segment
Piece      1 f1, f2 at start point -5.1795e-009 1.0037e-006
Distance to the stationary point =  5.1606e-003
Cauchy X =  0.707508 

---------------- exit CAUCHY----------------------

Variable 1 enters the set of free variables
0 variables leave; 1 variables enter
1  variables are free at GCP on iteration 4
LINE SEARCH 0 times; norm of step = 3.71399e-007
X = 0.707508 
G = 9.24842e-008 

iterations 4
function evaluations 9
segments explored during Cauchy searches 5
BFGS updates skipped 0
active bounds at final generalized Cauchy point 0
norm of the final projected gradient 9.24842e-008
final function value 586.19

X = 0.707508 
F = 586.19
final  value 586.190487 
converged
$par
[1] 0.7075076

$value
[1] 586.1905

$counts
function gradient 
       9        9 

$convergence
[1] 0

$message
[1] "CONVERGENCE: REL_REDUCTION_OF_F <= FACTR*EPSMCH"

> 

###################################################################
##  Comparison of function values
###################################################################
> ansCompare
                phi 1stMethod 2ndMethod    difference
  [1,] -0.990000000  679.4799  679.4799  9.094947e-13
  [2,] -0.980050251  678.6556  678.6556  0.000000e+00
  [3,] -0.970100503  677.9723  677.9723 -3.410605e-13
  [4,] -0.960150754  677.3457  677.3457  1.136868e-13
  [5,] -0.950201005  676.7493  676.7493  1.136868e-13
  [6,] -0.940251256  676.1713  676.1713  3.410605e-13
  [7,] -0.930301508  675.6054  675.6054 -1.136868e-13
  [8,] -0.920351759  675.0477  675.0477  2.273737e-13
  [9,] -0.910402010  674.4959  674.4959  2.273737e-13
 [10,] -0.900452261  673.9483  673.9483  1.136868e-13
 [11,] -0.890502513  673.4037  673.4037 -2.273737e-13
 [12,] -0.880552764  672.8611  672.8611  1.136868e-13
 [13,] -0.870603015  672.3200  672.3200  1.136868e-13
 [14,] -0.860653266  671.7797  671.7797 -1.136868e-13
 [15,] -0.850703518  671.2399  671.2399  2.273737e-13
 [16,] -0.840753769  670.7003  670.7003 -2.273737e-13
 [17,] -0.830804020  670.1605  670.1605  0.000000e+00
 [18,] -0.820854271  669.6203  669.6203  0.000000e+00
 [19,] -0.810904523  669.0796  669.0796  0.000000e+00
 [20,] -0.800954774  668.5381  668.5381 -1.136868e-13
 [21,] -0.791005025  667.9957  667.9957 -1.136868e-13
 [22,] -0.781055276  667.4523  667.4523  0.000000e+00
 [23,] -0.771105528  666.9078  666.9078  0.000000e+00
 [24,] -0.761155779  666.3620  666.3620 -1.136868e-13
 [25,] -0.751206030  665.8149  665.8149  1.136868e-13
 [26,] -0.741256281  665.2665  665.2665  0.000000e+00
 [27,] -0.731306533  664.7166  664.7166  0.000000e+00
 [28,] -0.721356784  664.1651  664.1651 -1.136868e-13
 [29,] -0.711407035  663.6121  663.6121  0.000000e+00
 [30,] -0.701457286  663.0575  663.0575  1.136868e-13
 [31,] -0.691507538  662.5012  662.5012 -1.136868e-13
 [32,] -0.681557789  661.9432  661.9432  0.000000e+00
 [33,] -0.671608040  661.3834  661.3834 -1.136868e-13
 [34,] -0.661658291  660.8218  660.8218 -2.273737e-13
 [35,] -0.651708543  660.2584  660.2584 -2.273737e-13
 [36,] -0.641758794  659.6932  659.6932  1.136868e-13
 [37,] -0.631809045  659.1261  659.1261 -1.136868e-13
 [38,] -0.621859296  658.5570  658.5570  0.000000e+00
 [39,] -0.611909548  657.9861  657.9861  0.000000e+00
 [40,] -0.601959799  657.4132  657.4132  1.136868e-13
 [41,] -0.592010050  656.8383  656.8383  0.000000e+00
 [42,] -0.582060302  656.2614  656.2614  1.136868e-13
 [43,] -0.572110553  655.6825  655.6825 -1.136868e-13
 [44,] -0.562160804  655.1016  655.1016  0.000000e+00
 [45,] -0.552211055  654.5186  654.5186 -1.136868e-13
 [46,] -0.542261307  653.9336  653.9336 -1.136868e-13
 [47,] -0.532311558  653.3465  653.3465  0.000000e+00
 [48,] -0.522361809  652.7574  652.7574  0.000000e+00
 [49,] -0.512412060  652.1661  652.1661 -1.136868e-13
 [50,] -0.502462312  651.5728  651.5728  0.000000e+00
 [51,] -0.492512563  650.9774  650.9774  0.000000e+00
 [52,] -0.482562814  650.3799  650.3799 -1.136868e-13
 [53,] -0.472613065  649.7802  649.7802  0.000000e+00
 [54,] -0.462663317  649.1785  649.1785  0.000000e+00
 [55,] -0.452713568  648.5747  648.5747 -1.136868e-13
 [56,] -0.442763819  647.9687  647.9687  0.000000e+00
 [57,] -0.432814070  647.3607  647.3607 -1.136868e-13
 [58,] -0.422864322  646.7505  646.7505  0.000000e+00
 [59,] -0.412914573  646.1382  646.1382  0.000000e+00
 [60,] -0.402964824  645.5239  645.5239  0.000000e+00
 [61,] -0.393015075  644.9074  644.9074  0.000000e+00
 [62,] -0.383065327  644.2889  644.2889  0.000000e+00
 [63,] -0.373115578  643.6683  643.6683  1.136868e-13
 [64,] -0.363165829  643.0456  643.0456  0.000000e+00
 [65,] -0.353216080  642.4209  642.4209  0.000000e+00
 [66,] -0.343266332  641.7942  641.7942 -1.136868e-13
 [67,] -0.333316583  641.1654  641.1654  0.000000e+00
 [68,] -0.323366834  640.5346  640.5346  0.000000e+00
 [69,] -0.313417085  639.9019  639.9019  0.000000e+00
 [70,] -0.303467337  639.2672  639.2672  1.136868e-13
 [71,] -0.293517588  638.6305  638.6305  0.000000e+00
 [72,] -0.283567839  637.9920  637.9920  1.136868e-13
 [73,] -0.273618090  637.3515  637.3515  1.136868e-13
 [74,] -0.263668342  636.7093  636.7093  1.136868e-13
 [75,] -0.253718593  636.0651  636.0651  0.000000e+00
 [76,] -0.243768844  635.4192  635.4192  0.000000e+00
 [77,] -0.233819095  634.7716  634.7716 -1.136868e-13
 [78,] -0.223869347  634.1222  634.1222  1.136868e-13
 [79,] -0.213919598  633.4712  633.4712  0.000000e+00
 [80,] -0.203969849  632.8185  632.8185  0.000000e+00
 [81,] -0.194020101  632.1642  632.1642  1.136868e-13
 [82,] -0.184070352  631.5084  631.5084 -1.136868e-13
 [83,] -0.174120603  630.8512  630.8512  0.000000e+00
 [84,] -0.164170854  630.1925  630.1925  0.000000e+00
 [85,] -0.154221106  629.5324  629.5324  1.136868e-13
 [86,] -0.144271357  628.8710  628.8710  0.000000e+00
 [87,] -0.134321608  628.2084  628.2084  0.000000e+00
 [88,] -0.124371859  627.5446  627.5446  1.136868e-13
 [89,] -0.114422111  626.8797  626.8797  1.136868e-13
 [90,] -0.104472362  626.2138  626.2138 -1.136868e-13
 [91,] -0.094522613  625.5469  625.5469  0.000000e+00
 [92,] -0.084572864  624.8792  624.8792  0.000000e+00
 [93,] -0.074623116  624.2107  624.2107  0.000000e+00
 [94,] -0.064673367  623.5415  623.5415  0.000000e+00
 [95,] -0.054723618  622.8717  622.8717 -1.136868e-13
 [96,] -0.044773869  622.2014  622.2014  0.000000e+00
 [97,] -0.034824121  621.5308  621.5308  0.000000e+00
 [98,] -0.024874372  620.8599  620.8599  0.000000e+00
 [99,] -0.014924623  620.1888  620.1888 -1.136868e-13
[100,] -0.004974874  619.5177  619.5177  1.136868e-13
[101,]  0.004974874  618.8466  618.8466  0.000000e+00
[102,]  0.014924623  618.1758  618.1758 -1.136868e-13
[103,]  0.024874372  617.5054  617.5054  0.000000e+00
[104,]  0.034824121  616.8354  616.8354  0.000000e+00
[105,]  0.044773869  616.1661  616.1661  0.000000e+00
[106,]  0.054723618  615.4975  615.4975 -1.136868e-13
[107,]  0.064673367  614.8300  614.8300  1.136868e-13
[108,]  0.074623116  614.1635  614.1635  0.000000e+00
[109,]  0.084572864  613.4984  613.4984  0.000000e+00
[110,]  0.094522613  612.8347  612.8347  0.000000e+00
[111,]  0.104472362  612.1727  612.1727 -1.136868e-13
[112,]  0.114422111  611.5125  611.5125  1.136868e-13
[113,]  0.124371859  610.8544  610.8544  1.136868e-13
[114,]  0.134321608  610.1986  610.1986  0.000000e+00
[115,]  0.144271357  609.5452  609.5452  1.136868e-13
[116,]  0.154221106  608.8945  608.8945  1.136868e-13
[117,]  0.164170854  608.2468  608.2468  0.000000e+00
[118,]  0.174120603  607.6022  607.6022  1.136868e-13
[119,]  0.184070352  606.9609  606.9609 -1.136868e-13
[120,]  0.194020101  606.3234  606.3234  1.136868e-13
[121,]  0.203969849  605.6897  605.6897  0.000000e+00
[122,]  0.213919598  605.0602  605.0602  0.000000e+00
[123,]  0.223869347  604.4352  604.4352  1.136868e-13
[124,]  0.233819095  603.8148  603.8148 -1.136868e-13
[125,]  0.243768844  603.1995  603.1995  0.000000e+00
[126,]  0.253718593  602.5895  602.5895  0.000000e+00
[127,]  0.263668342  601.9851  601.9851  0.000000e+00
[128,]  0.273618090  601.3866  601.3866  0.000000e+00
[129,]  0.283567839  600.7943  600.7943  1.136868e-13
[130,]  0.293517588  600.2086  600.2086  0.000000e+00
[131,]  0.303467337  599.6297  599.6297  0.000000e+00
[132,]  0.313417085  599.0581  599.0581  0.000000e+00
[133,]  0.323366834  598.4941  598.4941  0.000000e+00
[134,]  0.333316583  597.9379  597.9379  0.000000e+00
[135,]  0.343266332  597.3900  597.3900  0.000000e+00
[136,]  0.353216080  596.8507  596.8507  0.000000e+00
[137,]  0.363165829  596.3204  596.3204 -1.136868e-13
[138,]  0.373115578  595.7994  595.7994  0.000000e+00
[139,]  0.383065327  595.2882  595.2882  0.000000e+00
[140,]  0.393015075  594.7870  594.7870  0.000000e+00
[141,]  0.402964824  594.2963  594.2963  0.000000e+00
[142,]  0.412914573  593.8164  593.8164 -1.136868e-13
[143,]  0.422864322  593.3477  593.3477  0.000000e+00
[144,]  0.432814070  592.8906  592.8906 -1.136868e-13
[145,]  0.442763819  592.4455  592.4455 -1.136868e-13
[146,]  0.452713568  592.0128  592.0128 -1.136868e-13
[147,]  0.462663317  591.5928  591.5928  0.000000e+00
[148,]  0.472613065  591.1859  591.1859 -1.136868e-13
[149,]  0.482562814  590.7924  590.7924 -1.136868e-13
[150,]  0.492512563  590.4128  590.4128 -1.136868e-13
[151,]  0.502462312  590.0474  590.0474  0.000000e+00
[152,]  0.512412060  589.6965  589.6965  0.000000e+00
[153,]  0.522361809  589.3606  589.3606  0.000000e+00
[154,]  0.532311558  589.0398  589.0398 -1.136868e-13
[155,]  0.542261307  588.7347  588.7347  0.000000e+00
[156,]  0.552211055  588.4454  588.4454 -2.273737e-13
[157,]  0.562160804  588.1724  588.1724 -1.136868e-13
[158,]  0.572110553  587.9159  587.9159 -1.136868e-13
[159,]  0.582060302  587.6761  587.6761  0.000000e+00
[160,]  0.592010050  587.4534  587.4534  0.000000e+00
[161,]  0.601959799  587.2481  587.2481  1.136868e-13
[162,]  0.611909548  587.0603  587.0603  0.000000e+00
[163,]  0.621859296  586.8904  586.8904 -1.136868e-13
[164,]  0.631809045  586.7384  586.7384 -1.136868e-13
[165,]  0.641758794  586.6047  586.6047  1.136868e-13
[166,]  0.651708543  586.4894  586.4894  0.000000e+00
[167,]  0.661658291  586.3927  586.3927 -1.136868e-13
[168,]  0.671608040  586.3146  586.3146  0.000000e+00
[169,]  0.681557789  586.2555  586.2555 -1.136868e-13
[170,]  0.691507538  586.2152  586.2152  0.000000e+00
[171,]  0.701457286  586.1940  586.1940  1.136868e-13
[172,]  0.711407035  586.1920  586.1920  0.000000e+00
[173,]  0.721356784  586.2091  586.2091  0.000000e+00
[174,]  0.731306533  586.2454  586.2454  0.000000e+00
[175,]  0.741256281  586.3010  586.3010  0.000000e+00
[176,]  0.751206030  586.3758  586.3758  1.136868e-13
[177,]  0.761155779  586.4698  586.4698 -1.136868e-13
[178,]  0.771105528  586.5831  586.5831  1.136868e-13
[179,]  0.781055276  586.7156  586.7156  1.136868e-13
[180,]  0.791005025  586.8673  586.8673 -1.136868e-13
[181,]  0.800954774  587.0380  587.0380 -1.136868e-13
[182,]  0.810904523  587.2278  587.2278  1.136868e-13
[183,]  0.820854271  587.4366  587.4366  1.136868e-13
[184,]  0.830804020  587.6644  587.6644  1.136868e-13
[185,]  0.840753769  587.9111  587.9111  0.000000e+00
[186,]  0.850703518  588.1767  588.1767  1.136868e-13
[187,]  0.860653266  588.4613  588.4613  0.000000e+00
[188,]  0.870603015  588.7649  588.7649 -1.136868e-13
[189,]  0.880552764  589.0876  589.0876 -3.410605e-13
[190,]  0.890502513  589.4296  589.4296 -1.136868e-13
[191,]  0.900452261  589.7914  589.7914  0.000000e+00
[192,]  0.910402010  590.1734  590.1734  1.136868e-13
[193,]  0.920351759  590.5766  590.5766  2.273737e-13
[194,]  0.930301508  591.0022  591.0022  1.136868e-13
[195,]  0.940251256  591.4524  591.4524 -2.273737e-13
[196,]  0.950201005  591.9306  591.9306  0.000000e+00
[197,]  0.960150754  592.4426  592.4426  2.273737e-13
[198,]  0.970100503  593.0001  593.0001  1.136868e-13
[199,]  0.980050251  593.6290  593.6290 -1.136868e-13
[200,]  0.990000000  594.4134  594.4134 -3.410605e-13


From mschwartz at mn.rr.com  Fri Oct 28 19:02:37 2005
From: mschwartz at mn.rr.com (Marc Schwartz (via MN))
Date: Fri, 28 Oct 2005 12:02:37 -0500
Subject: [Rd] Error in ?strsplit
Message-ID: <1130518957.4557.17.camel@localhost.localdomain>

Hi all,

Came across an error in ?strsplit in the details section:

Details:

     Arguments 'x' and 'split' will be coerced to character, so you
     will see uses with 'split = NULL' to mean 'split = character(0)',
     including in the examples below.


I caught myself trying to use strsplit() on a factor and the coercion on
'x' is not done.


According to the ONEWS file, the coercion on 'x' was removed in 1.8.0:

   o	strsplit(x, *) now preserves names() but won't work for
	non-character `x' anymore {formerly used as.character(x),
	destroying names(x)}.


The function prototype is:

> strsplit
function (x, split, extended = TRUE, fixed = FALSE, perl = FALSE)
.Internal(strsplit(x, as.character(split), as.logical(extended),
    as.logical(fixed), as.logical(perl)))
<environment: namespace:base>


So 'split' is coerced, but not 'x'.


This is on:

Version 2.2.0 Patched (2005-10-27 r36070)


A proposed patch is:


--- strsplit.Rd 2005-10-06 07:50:36.000000000 -0500
+++ strsplit.rev.Rd     2005-10-28 11:51:08.000000000 -0500
@@ -37,7 +37,7 @@
   contains the vector of splits of \code{x[i]}.
 }
 \details{
-  Arguments \code{x} and \code{split} will be coerced to character, so
+  Argument \code{split} will be coerced to character, so
   you will see uses with \code{split = NULL} to mean
   \code{split = character(0)}, including in the examples below.



HTH,

Marc Schwartz


From ripley at stats.ox.ac.uk  Fri Oct 28 19:22:35 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 28 Oct 2005 18:22:35 +0100 (BST)
Subject: [Rd] Error in ?strsplit
In-Reply-To: <1130518957.4557.17.camel@localhost.localdomain>
References: <1130518957.4557.17.camel@localhost.localdomain>
Message-ID: <Pine.LNX.4.61.0510281819340.25410@gannet.stats>

Thanks, easy to correct.  We will explicitly say that a factor 'x' is 
erroneous.

On Fri, 28 Oct 2005, Marc Schwartz (via MN) wrote:

> Hi all,
>
> Came across an error in ?strsplit in the details section:
>
> Details:
>
>     Arguments 'x' and 'split' will be coerced to character, so you
>     will see uses with 'split = NULL' to mean 'split = character(0)',
>     including in the examples below.
>
>
> I caught myself trying to use strsplit() on a factor and the coercion on
> 'x' is not done.
>
>
> According to the ONEWS file, the coercion on 'x' was removed in 1.8.0:
>
>   o	strsplit(x, *) now preserves names() but won't work for
> 	non-character `x' anymore {formerly used as.character(x),
> 	destroying names(x)}.
>
>
> The function prototype is:
>
>> strsplit
> function (x, split, extended = TRUE, fixed = FALSE, perl = FALSE)
> .Internal(strsplit(x, as.character(split), as.logical(extended),
>    as.logical(fixed), as.logical(perl)))
> <environment: namespace:base>
>
>
> So 'split' is coerced, but not 'x'.
>
>
> This is on:
>
> Version 2.2.0 Patched (2005-10-27 r36070)
>
>
> A proposed patch is:
>
>
> --- strsplit.Rd 2005-10-06 07:50:36.000000000 -0500
> +++ strsplit.rev.Rd     2005-10-28 11:51:08.000000000 -0500
> @@ -37,7 +37,7 @@
>   contains the vector of splits of \code{x[i]}.
> }
> \details{
> -  Arguments \code{x} and \code{split} will be coerced to character, so
> +  Argument \code{split} will be coerced to character, so
>   you will see uses with \code{split = NULL} to mean
>   \code{split = character(0)}, including in the examples below.
>
>
>
> HTH,
>
> Marc Schwartz
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>
>

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From tplate at acm.org  Fri Oct 28 23:13:52 2005
From: tplate at acm.org (Tony Plate)
Date: Fri, 28 Oct 2005 15:13:52 -0600
Subject: [Rd] unvectorized option for outer()
In-Reply-To: <8B08A3A1EA7AAC41BE24C750338754E69FDF14@HERMES.demogr.mpg.de>
References: <8B08A3A1EA7AAC41BE24C750338754E69FDF14@HERMES.demogr.mpg.de>
Message-ID: <43629490.9060204@acm.org>

[following on from a thread on R-help, but my post here seems more 
appropriate to R-devel]

Would a patch to make outer() work with non-vectorized functions be
considered?  It seems to come up moderately often on the list, which
probably indicates that many many people get bitten by the same
incorrect expectation, despite the documentation and the FAQ entry.  It
looks pretty simple to modify outer() appropriately: one extra function
argument and an if-then-else clause to call mapply(FUN, ...) instead of
calling FUN directly.

Here's a function demonstrating this:

outer2 <- function (X, Y, FUN = "*", ..., VECTORIZED=TRUE)
{
     no.nx <- is.null(nx <- dimnames(X <- as.array(X)))
     dX <- dim(X)
     no.ny <- is.null(ny <- dimnames(Y <- as.array(Y)))
     dY <- dim(Y)
     if (is.character(FUN) && FUN == "*") {
         robj <- as.vector(X) %*% t(as.vector(Y))
         dim(robj) <- c(dX, dY)
     }
     else {
         FUN <- match.fun(FUN)
         Y <- rep(Y, rep.int(length(X), length(Y)))
         if (length(X) > 0)
             X <- rep(X, times = ceiling(length(Y)/length(X)))
         if (VECTORIZED)
             robj <- FUN(X, Y, ...)
         else
             robj <- mapply(FUN, X, Y, MoreArgs=list(...))
         dim(robj) <- c(dX, dY)
     }
     if (no.nx)
         nx <- vector("list", length(dX))
     else if (no.ny)
         ny <- vector("list", length(dY))
     if (!(no.nx && no.ny))
         dimnames(robj) <- c(nx, ny)
     robj
}
# Some examples
f <- function(x, y, p=1) {cat("in f\n"); (x*y)^p}
outer2(1:2, 3:5, f, 2)
outer2(numeric(0), 3:5, f, 2)
outer2(1:2, numeric(0), f, 2)
outer2(1:2, 3:5, f, 2, VECTORIZED=F)
outer2(numeric(0), 3:5, f, 2, VECTORIZED=F)
outer2(1:2, numeric(0), f, 2, VECTORIZED=F)

# Output on examples
> f <- function(x, y, p=1) {cat("in f\n"); (x*y)^p}
> outer2(1:2, 3:5, f, 2)
in f
      [,1] [,2] [,3]
[1,]    9   16   25
[2,]   36   64  100
> outer2(numeric(0), 3:5, f, 2)
in f
      [,1] [,2] [,3]
> outer2(1:2, numeric(0), f, 2)
in f

[1,]
[2,]
> outer2(1:2, 3:5, f, 2, VECTORIZED=F)
in f
in f
in f
in f
in f
in f
      [,1] [,2] [,3]
[1,]    9   16   25
[2,]   36   64  100
> outer2(numeric(0), 3:5, f, 2, VECTORIZED=F)
      [,1] [,2] [,3]
> outer2(1:2, numeric(0), f, 2, VECTORIZED=F)

[1,]
[2,]
>

If a patch to add this feature would be considered, I'd be happy to
submit one (including documentation).  If so, and if there are any
potential traps I should bear in mind, please let me know!

-- Tony Plate

Rau, Roland wrote:
> Dear all,
> 
> a big thanks to Thomas Lumley, James Holtman and Tony Plate for their
> answers. They all pointed in the same direction => I need a vectorized
> function to be applied. Hence, I will try to work with a 'wrapper'
> function as described in the FAQ.
> 
> Thanks again,
> Roland
> 
> 
> 
>>-----Original Message-----
>>From: Thomas Lumley [mailto:tlumley at u.washington.edu] 
>>Sent: Thursday, October 27, 2005 11:39 PM
>>To: Rau, Roland
>>Cc: r-help at stat.math.ethz.ch
>>Subject: Re: [R] outer-question
>>
>>
>>You want FAQ 7.17 Why does outer() behave strangely with my function?
>>
>> 	-thomas
>>
>>On Thu, 27 Oct 2005, Rau, Roland wrote:
>>
>>
>>>Dear all,
>>>
>>>This is a rather lengthy message, but I don't know what I 
>>
>>made wrong in
>>
>>>my real example since the simple code works.
>>>I have two variables a, b and a function f for which I would like to
>>>calculate all possible combinations of the values of a and b.
>>>If f is multiplication, I would simply do:
>>>
>>>a <- 1:5
>>>b <- 1:5
>>>outer(a,b)
>>>
>>>## A bit more complicated is this:
>>>f <- function(a,b,d) {
>>>	return(a*b+(sum(d)))
>>>}
>>>additional <- runif(100)
>>>outer(X=a, Y=b, FUN=f, d=additional)
>>>
>>>## So far so good. But now my real example. I would like to plot the
>>>## log-likelihood surface for two parameters alpha and beta of
>>>## a Gompertz distribution with given data
>>>
>>>### I have a function to generate random-numbers from a
>>>Gompertz-Distribution
>>>### (using the 'inversion method')
>>>
>>>random.gomp <- function(n, alpha, beta) {
>>>           return( (log(1-(beta/alpha*log(1-runif(n)))))/beta)
>>>}
>>>
>>>## Now I generate some 'lifetimes'
>>>no.people <- 1000
>>>al <- 0.1
>>>bet <- 0.1
>>>lifetimes <- random.gomp(n=no.people, alpha=al, beta=bet)
>>>
>>>### Since I neither have censoring nor truncation in this 
>>
>>simple case,
>>
>>>### the log-likelihood should be simply the sum of the log of the
>>>### the densities (following the parametrization of 
>>
>>Klein/Moeschberger
>>
>>>### Survival Analysis, p. 38)
>>>
>>>loggomp <- function(alphas, betas, timep) {
>>> return(sum(log(alphas) + betas*timep + (alphas/betas *
>>>(1-exp(betas*timep)))))
>>>}
>>>
>>>### Now I thought I could obtain a matrix of the 
>>
>>log-likelihood surface
>>
>>>### by specifying possible values for alpha and beta with the given
>>>data.
>>>### I was able to produce this matrix with two for-loops. 
>>
>>But I thought
>>
>>>### I could use also 'outer' in this case.
>>>### This is what I tried:
>>>
>>>possible.alphas <- seq(from=0.05, to=0.15, length=30)
>>>possible.betas <- seq(from=0.05, to=0.15, length=30)
>>>
>>>outer(X=possible.alphas, Y=possible.betas, FUN=loggomp, 
>>
>>timep=lifetimes)
>>
>>>### But the result is:
>>>
>>>>outer(X=possible.alphas, Y=possible.betas, FUN=loggomp,
>>>
>>>timep=lifetimes)
>>>Error in outer(X = possible.alphas, Y = possible.betas, FUN 
>>
>>= loggomp,
>>
>>>:
>>>       dim<- : dims [product 900] do not match the length 
>>
>>of object [1]
>>
>>>In addition: Warning messages:
>>>...
>>>
>>>### Can somebody give me some hint where the problem is?
>>>### I checked my definition of 'loggomp' but I thought this 
>>
>>looks fine:
>>
>>>loggomp(alphas=possible.alphas[1], betas=possible.betas[1],
>>>timep=lifetimes)
>>>loggomp(alphas=possible.alphas[4], betas=possible.betas[10],
>>>timep=lifetimes)
>>>loggomp(alphas=possible.alphas[3], betas=possible.betas[11],
>>>timep=lifetimes)
>>>
>>>
>>>### I'd appreciate any kind of advice.
>>>### Thanks a lot in advance.
>>>### Roland
>>>
>>>
>>>+++++
>>>This mail has been sent through the MPI for Demographic 
>>
>>Rese...{{dropped}}
>>
>>>______________________________________________
>>>R-help at stat.math.ethz.ch mailing list
>>>https://stat.ethz.ch/mailman/listinfo/r-help
>>>PLEASE do read the posting guide! 
>>
>>http://www.R-project.org/posting-guide.html
>>
>>Thomas Lumley			Assoc. Professor, Biostatistics
>>tlumley at u.washington.edu	University of Washington, Seattle
>>
> 
> 
> +++++
> This mail has been sent through the MPI for Demographic Research.  Should you receive a mail that is apparently from a MPI user without this text displayed, then the address has most likely been faked. If you are uncertain about the validity of this message, please check the mail header or ask your system administrator for assistance.
> 
>


From ggrothendieck at gmail.com  Sat Oct 29 01:43:29 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Fri, 28 Oct 2005 19:43:29 -0400
Subject: [Rd] [R] unvectorized option for outer()
In-Reply-To: <43629490.9060204@acm.org>
References: <8B08A3A1EA7AAC41BE24C750338754E69FDF14@HERMES.demogr.mpg.de>
	<43629490.9060204@acm.org>
Message-ID: <971536df0510281643u50929fa6rf097c40948700804@mail.gmail.com>

If the default were changed to VECTORIZED=FALSE then it would
still be functionally compatible with what we have now so all existing
software would continue to run correctly yet would not cause
problems for the unwary.  Existing software would not have to be changed
to add VECTORIZED=TRUE except for those, presumbly few, cases
where outer performance is critical.   One optimization might be to
have the default be TRUE if the function is * or perhaps if its specified
as a single character and FALSE otherwise.

Having used APL I always regarded the original design of outer in R as
permature performance optimization and this would be a chance to get
it right.

On 10/28/05, Tony Plate <tplate at acm.org> wrote:
> [following on from a thread on R-help, but my post here seems more
> appropriate to R-devel]
>
> Would a patch to make outer() work with non-vectorized functions be
> considered?  It seems to come up moderately often on the list, which
> probably indicates that many many people get bitten by the same
> incorrect expectation, despite the documentation and the FAQ entry.  It
> looks pretty simple to modify outer() appropriately: one extra function
> argument and an if-then-else clause to call mapply(FUN, ...) instead of
> calling FUN directly.
>
> Here's a function demonstrating this:
>
> outer2 <- function (X, Y, FUN = "*", ..., VECTORIZED=TRUE)
> {
>     no.nx <- is.null(nx <- dimnames(X <- as.array(X)))
>     dX <- dim(X)
>     no.ny <- is.null(ny <- dimnames(Y <- as.array(Y)))
>     dY <- dim(Y)
>     if (is.character(FUN) && FUN == "*") {
>         robj <- as.vector(X) %*% t(as.vector(Y))
>         dim(robj) <- c(dX, dY)
>     }
>     else {
>         FUN <- match.fun(FUN)
>         Y <- rep(Y, rep.int(length(X), length(Y)))
>         if (length(X) > 0)
>             X <- rep(X, times = ceiling(length(Y)/length(X)))
>         if (VECTORIZED)
>             robj <- FUN(X, Y, ...)
>         else
>             robj <- mapply(FUN, X, Y, MoreArgs=list(...))
>         dim(robj) <- c(dX, dY)
>     }
>     if (no.nx)
>         nx <- vector("list", length(dX))
>     else if (no.ny)
>         ny <- vector("list", length(dY))
>     if (!(no.nx && no.ny))
>         dimnames(robj) <- c(nx, ny)
>     robj
> }
> # Some examples
> f <- function(x, y, p=1) {cat("in f\n"); (x*y)^p}
> outer2(1:2, 3:5, f, 2)
> outer2(numeric(0), 3:5, f, 2)
> outer2(1:2, numeric(0), f, 2)
> outer2(1:2, 3:5, f, 2, VECTORIZED=F)
> outer2(numeric(0), 3:5, f, 2, VECTORIZED=F)
> outer2(1:2, numeric(0), f, 2, VECTORIZED=F)
>
> # Output on examples
> > f <- function(x, y, p=1) {cat("in f\n"); (x*y)^p}
> > outer2(1:2, 3:5, f, 2)
> in f
>      [,1] [,2] [,3]
> [1,]    9   16   25
> [2,]   36   64  100
> > outer2(numeric(0), 3:5, f, 2)
> in f
>      [,1] [,2] [,3]
> > outer2(1:2, numeric(0), f, 2)
> in f
>
> [1,]
> [2,]
> > outer2(1:2, 3:5, f, 2, VECTORIZED=F)
> in f
> in f
> in f
> in f
> in f
> in f
>      [,1] [,2] [,3]
> [1,]    9   16   25
> [2,]   36   64  100
> > outer2(numeric(0), 3:5, f, 2, VECTORIZED=F)
>      [,1] [,2] [,3]
> > outer2(1:2, numeric(0), f, 2, VECTORIZED=F)
>
> [1,]
> [2,]
> >
>
> If a patch to add this feature would be considered, I'd be happy to
> submit one (including documentation).  If so, and if there are any
> potential traps I should bear in mind, please let me know!
>
> -- Tony Plate
>
> Rau, Roland wrote:
> > Dear all,
> >
> > a big thanks to Thomas Lumley, James Holtman and Tony Plate for their
> > answers. They all pointed in the same direction => I need a vectorized
> > function to be applied. Hence, I will try to work with a 'wrapper'
> > function as described in the FAQ.
> >
> > Thanks again,
> > Roland
> >
> >
> >
> >>-----Original Message-----
> >>From: Thomas Lumley [mailto:tlumley at u.washington.edu]
> >>Sent: Thursday, October 27, 2005 11:39 PM
> >>To: Rau, Roland
> >>Cc: r-help at stat.math.ethz.ch
> >>Subject: Re: [R] outer-question
> >>
> >>
> >>You want FAQ 7.17 Why does outer() behave strangely with my function?
> >>
> >>      -thomas
> >>
> >>On Thu, 27 Oct 2005, Rau, Roland wrote:
> >>
> >>
> >>>Dear all,
> >>>
> >>>This is a rather lengthy message, but I don't know what I
> >>
> >>made wrong in
> >>
> >>>my real example since the simple code works.
> >>>I have two variables a, b and a function f for which I would like to
> >>>calculate all possible combinations of the values of a and b.
> >>>If f is multiplication, I would simply do:
> >>>
> >>>a <- 1:5
> >>>b <- 1:5
> >>>outer(a,b)
> >>>
> >>>## A bit more complicated is this:
> >>>f <- function(a,b,d) {
> >>>     return(a*b+(sum(d)))
> >>>}
> >>>additional <- runif(100)
> >>>outer(X=a, Y=b, FUN=f, d=additional)
> >>>
> >>>## So far so good. But now my real example. I would like to plot the
> >>>## log-likelihood surface for two parameters alpha and beta of
> >>>## a Gompertz distribution with given data
> >>>
> >>>### I have a function to generate random-numbers from a
> >>>Gompertz-Distribution
> >>>### (using the 'inversion method')
> >>>
> >>>random.gomp <- function(n, alpha, beta) {
> >>>           return( (log(1-(beta/alpha*log(1-runif(n)))))/beta)
> >>>}
> >>>
> >>>## Now I generate some 'lifetimes'
> >>>no.people <- 1000
> >>>al <- 0.1
> >>>bet <- 0.1
> >>>lifetimes <- random.gomp(n=no.people, alpha=al, beta=bet)
> >>>
> >>>### Since I neither have censoring nor truncation in this
> >>
> >>simple case,
> >>
> >>>### the log-likelihood should be simply the sum of the log of the
> >>>### the densities (following the parametrization of
> >>
> >>Klein/Moeschberger
> >>
> >>>### Survival Analysis, p. 38)
> >>>
> >>>loggomp <- function(alphas, betas, timep) {
> >>> return(sum(log(alphas) + betas*timep + (alphas/betas *
> >>>(1-exp(betas*timep)))))
> >>>}
> >>>
> >>>### Now I thought I could obtain a matrix of the
> >>
> >>log-likelihood surface
> >>
> >>>### by specifying possible values for alpha and beta with the given
> >>>data.
> >>>### I was able to produce this matrix with two for-loops.
> >>
> >>But I thought
> >>
> >>>### I could use also 'outer' in this case.
> >>>### This is what I tried:
> >>>
> >>>possible.alphas <- seq(from=0.05, to=0.15, length=30)
> >>>possible.betas <- seq(from=0.05, to=0.15, length=30)
> >>>
> >>>outer(X=possible.alphas, Y=possible.betas, FUN=loggomp,
> >>
> >>timep=lifetimes)
> >>
> >>>### But the result is:
> >>>
> >>>>outer(X=possible.alphas, Y=possible.betas, FUN=loggomp,
> >>>
> >>>timep=lifetimes)
> >>>Error in outer(X = possible.alphas, Y = possible.betas, FUN
> >>
> >>= loggomp,
> >>
> >>>:
> >>>       dim<- : dims [product 900] do not match the length
> >>
> >>of object [1]
> >>
> >>>In addition: Warning messages:
> >>>...
> >>>
> >>>### Can somebody give me some hint where the problem is?
> >>>### I checked my definition of 'loggomp' but I thought this
> >>
> >>looks fine:
> >>
> >>>loggomp(alphas=possible.alphas[1], betas=possible.betas[1],
> >>>timep=lifetimes)
> >>>loggomp(alphas=possible.alphas[4], betas=possible.betas[10],
> >>>timep=lifetimes)
> >>>loggomp(alphas=possible.alphas[3], betas=possible.betas[11],
> >>>timep=lifetimes)
> >>>
> >>>
> >>>### I'd appreciate any kind of advice.
> >>>### Thanks a lot in advance.
> >>>### Roland
> >>>
> >>>
> >>>+++++
> >>>This mail has been sent through the MPI for Demographic
> >>
> >>Rese...{{dropped}}
> >>
> >>>______________________________________________
> >>>R-help at stat.math.ethz.ch mailing list
> >>>https://stat.ethz.ch/mailman/listinfo/r-help
> >>>PLEASE do read the posting guide!
> >>
> >>http://www.R-project.org/posting-guide.html
> >>
> >>Thomas Lumley                 Assoc. Professor, Biostatistics
> >>tlumley at u.washington.edu      University of Washington, Seattle
> >>
> >
> >
> > +++++
> > This mail has been sent through the MPI for Demographic Research.  Should you receive a mail that is apparently from a MPI user without this text displayed, then the address has most likely been faked. If you are uncertain about the validity of this message, please check the mail header or ask your system administrator for assistance.
> >
> >
>
> ______________________________________________
> R-help at stat.math.ethz.ch mailing list
> https://stat.ethz.ch/mailman/listinfo/r-help
> PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
>


From kimai at Princeton.Edu  Sat Oct 29 02:47:04 2005
From: kimai at Princeton.Edu (Kosuke Imai)
Date: Fri, 28 Oct 2005 20:47:04 -0400 (EDT)
Subject: [Rd] model.response() as a generic function?
Message-ID: <Pine.LNX.4.44.0510282028280.5529-100000@wws-6qcbw21.Princeton.EDU>

Dear R contributors, 
  Gary King, Olivia Lau (both at Harvard) and I are working on an R
package where we are trying to write functions equivalent to
model.frame(), model.matrix(), and model.response() for multiple equations
models (i.e., models that require the specification of multiple formulae).  
However, we noticed that while model.frame() and model.matrix() are
generic functions, model.response() is not. It would be nice if
model.response() is also a generic function so that we can make use of the
same function name for a large class of models we are working on. Is there
any possibility that this change can be made in the future version of R?
Thank you very much for your consideration in advance,
Kosuke

-----------------------------------------------------
Kosuke Imai               Office: Corwin Hall 041
Assistant Professor       Phone: 609-258-6601 
Department of Politics    eFax:  973-556-1929
Princeton University      Email: kimai at Princeton.Edu
Princeton, NJ 08544-1012  http://imai.princeton.edu


From ripley at stats.ox.ac.uk  Sat Oct 29 08:17:57 2005
From: ripley at stats.ox.ac.uk (Prof Brian Ripley)
Date: Sat, 29 Oct 2005 07:17:57 +0100 (BST)
Subject: [Rd] model.response() as a generic function?
In-Reply-To: <Pine.LNX.4.44.0510282028280.5529-100000@wws-6qcbw21.Princeton.EDU>
References: <Pine.LNX.4.44.0510282028280.5529-100000@wws-6qcbw21.Princeton.EDU>
Message-ID: <Pine.LNX.4.61.0510290713140.2665@gannet.stats>

There is a considerable difference: model.response is documented to work 
on a model frame.  Why does model.response(model.frame(object))) not work 
in the generality you need?

Please give us some examples of why you are trying to do, and how you 
would envisage a generic model.response being documented.  (It is 
currently documented as equivalent to model.extract(,"response").)

On Fri, 28 Oct 2005, Kosuke Imai wrote:

> Dear R contributors,
>  Gary King, Olivia Lau (both at Harvard) and I are working on an R
> package where we are trying to write functions equivalent to
> model.frame(), model.matrix(), and model.response() for multiple equations
> models (i.e., models that require the specification of multiple formulae).
> However, we noticed that while model.frame() and model.matrix() are
> generic functions, model.response() is not. It would be nice if
> model.response() is also a generic function so that we can make use of the
> same function name for a large class of models we are working on. Is there
> any possibility that this change can be made in the future version of R?
> Thank you very much for your consideration in advance,
> Kosuke

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From ihd at isds.duke.edu  Sat Oct 29 18:03:12 2005
From: ihd at isds.duke.edu (ihd@isds.duke.edu)
Date: Sat, 29 Oct 2005 18:03:12 +0200 (CEST)
Subject: [Rd] quirk in "sample" (PR#8264)
Message-ID: <20051029160312.6649C21EBB@slim.kubism.ku.dk>

Hi,
There is a property of "sample" that I believe is undesirable,
at least for me.
sample(1:3,1) 
chooses from the set {1,2,3}
but 
sample(3:3,1) 
chooses also from {1,2,3} even though
it would be used to sample from an interval [a,b] in general.
So  a program that generates an interval [a,b] for sampling will behave
differently when the endpoints are the same than when
the endpoints are different.

Ian


From ligges at statistik.uni-dortmund.de  Sat Oct 29 18:20:28 2005
From: ligges at statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Sat, 29 Oct 2005 18:20:28 +0200 (CEST)
Subject: [Rd] quirk in "sample" (PR#8264)
Message-ID: <20051029162028.5747E21EB9@slim.kubism.ku.dk>

ihd at isds.duke.edu wrote:

> Hi,
> There is a property of "sample" that I believe is undesirable,
> at least for me.
> sample(1:3,1) 
> chooses from the set {1,2,3}
> but 
> sample(3:3,1) 
> chooses also from {1,2,3} even though
> it would be used to sample from an interval [a,b] in general.
> So  a program that generates an interval [a,b] for sampling will behave
> differently when the endpoints are the same than when
> the endpoints are different.

No, this is not a bug:

 > (x1 <- 3:3)
[1] 3
 > (x2 <- c(3,3))
[1] 3 3

3:3 are not two points, but one point!

sample(x2, 1) always gives "3", but sample(x1, 1) gives a number between 
1 and 3, as documented: "If x has length 1, sampling takes place from 1:x."
See the Exmaple section how to circumvent the (for you!) undesired 
behaviour.

Uwe Ligges






> Ian
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From olau at fas.harvard.edu  Sat Oct 29 20:42:57 2005
From: olau at fas.harvard.edu (Olivia Lau)
Date: Sat, 29 Oct 2005 14:42:57 -0400
Subject: [Rd] model.response() as a generic function?
References: <Pine.LNX.4.44.0510282028280.5529-100000@wws-6qcbw21.Princeton.EDU>
	<Pine.LNX.4.61.0510290713140.2665@gannet.stats>
Message-ID: <00aa01c5dcb8$94b1f170$4802a8c0@OliviaIBM>

Hi,

We were thinking of the following:  R has a great user interface -- formula 
+ data, followed by terms, model.frame(), model.matrix(), 
model.response() -- for single equation models (e.g., univariate response 
models). We're trying to extend that user interface to multiple equation 
models so that multivariate response models, hierarchical models, 
multi-level models, etc. will have a similar, easy to use UI and programmer 
interface.

An example:  In a case like SURM, having Y as a matrix makes sense and we 
can implement that using the current model.response(model.frame(cbind(y1, 
y2) ~ X, data)).  In the case of multi-level models, however, you may want 
to manipulate the responses in each level separately and need a way to 
identify which response is associated with which formula.  For example, 
let's say that you are trying to write a user interface for a multi-level 
model that takes counties (or some other sub-unit) at the first level, and 
US states at the second level -- at the first level, there will be n_k 
units; at the second level, there will be k units -- clearly, cbind(y1, y2) 
will not work in this case.

One solution is to simply write a function that takes myfn(formula1, data1, 
formula2, data2, ...) for however many levels that are required for your 
model.  Using that approach, however, means that you need to either cobble 
together the RHS and LHS of the various formulas into one long formula (so 
that you can use model.matrix.default and model.frame.default) *or* write 
your own version of model.frame and model.matrix.  These are non-trivial 
tasks if your model accepts constraints across equations (e.g., users can 
specify that parameter effects be constrained to be equal for x1 in formula1 
and x1 in formula2).  You can ask users to input a constraint matrix, but 
this is (in practice) difficult for the average R user.  What we've been 
working on is a way to use formula plus some new specials that we've written 
to construct constraint matrices on the fly (e.g., in the formula).

To do this, we wrote a version of model.matrix.ourclass() that takes all the 
arguments of model.matrix.default() and an additional eqn argument, which 
specifies the equations (say mu, which corresponds to the sub-unit level, 
and gamma, which corresponds to the unit level) for which you would like to 
construct a model.matrix().  We would like to do the same to 
model.response(), which currently takes a model frame.  We are writing a 
version of model.response.ourclass() that takes a model frame and an 
additional argument that specifies the equation.  Since we are just adding 
an argument to the current model.response() function, the dispatch method 
would require a model frame as the first input, with dots being passed to 
other methods -- all code that currently works with model.response() will 
still work since the current model.response() would become 
model.response.default().

Let "MM" be a multi-level model with levels "mu" corresponding to the unit 
and "gamma" corresponding to the sub-unit, and let ourclass = "multiple". 
Then our proposed procedure is as follows:

fml <- parse.formula(formula, model = "MM")
            # checks formula input to make sure it corresponds to
            # what your model needs, where where fml is of class "multiple"
D <- model.frame(fml, data = mydata)
           # since fml is of class "multiple", this actually goes to 
model.frame.multiple()
           # D is a data.frame with classes c("multiple", "data.frame")
Xgamma <- model.matrix(fml, data = D, eqn = "gamma")
Ygamma <- model.response(D, eqn = "gamma")
            # Goes to model.response.multiple() since the first class of D 
is  "multiple"

The versions of model.frame.multiple() and model.matrix.multiple() that 
we've written also take terms as the first input rather than fml, and if 
data is null, looks in the parent environment for the appropriate data frame 
given in terms.  (e.g., works just as the .default() functions work, with 
the added eqn argument)

I've omitted a few details (esp re the parse.formula() function), but this 
is the general gist.  Please let me know if you have further questions!

Thanks,

Olivia Lau

----- Original Message ----- 
From: "Prof Brian Ripley" <ripley at stats.ox.ac.uk>
To: "Kosuke Imai" <kimai at princeton.edu>
Cc: <r-devel at r-project.org>; "Olivia Lau" <olau at fas.harvard.edu>; "Gary 
King" <king at harvard.edu>
Sent: Saturday, October 29, 2005 2:17 AM
Subject: Re: [Rd] model.response() as a generic function?


> There is a considerable difference: model.response is documented to work 
> on a model frame.  Why does model.response(model.frame(object))) not work 
> in the generality you need?
>
> Please give us some examples of why you are trying to do, and how you 
> would envisage a generic model.response being documented.  (It is 
> currently documented as equivalent to model.extract(,"response").)
>
> On Fri, 28 Oct 2005, Kosuke Imai wrote:
>
>> Dear R contributors,
>>  Gary King, Olivia Lau (both at Harvard) and I are working on an R
>> package where we are trying to write functions equivalent to
>> model.frame(), model.matrix(), and model.response() for multiple 
>> equations
>> models (i.e., models that require the specification of multiple 
>> formulae).
>> However, we noticed that while model.frame() and model.matrix() are
>> generic functions, model.response() is not. It would be nice if
>> model.response() is also a generic function so that we can make use of 
>> the
>> same function name for a large class of models we are working on. Is 
>> there
>> any possibility that this change can be made in the future version of R?
>> Thank you very much for your consideration in advance,
>> Kosuke
>
> -- 
> Brian D. Ripley,                  ripley at stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272866 (PA)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
>


From J.C.Rougier at durham.ac.uk  Sun Oct 30 11:48:28 2005
From: J.C.Rougier at durham.ac.uk (Jonathan Rougier)
Date: Sun, 30 Oct 2005 10:48:28 +0000
Subject: [Rd] [R] unvectorized option for outer()
In-Reply-To: <971536df0510281643u50929fa6rf097c40948700804@mail.gmail.com>
References: <8B08A3A1EA7AAC41BE24C750338754E69FDF14@HERMES.demogr.mpg.de>	<43629490.9060204@acm.org>
	<971536df0510281643u50929fa6rf097c40948700804@mail.gmail.com>
Message-ID: <4364A4FC.2030400@durham.ac.uk>

I'm not sure about this.  Perhaps I am a dinosaur, but my feeling is 
that if people are writing functions in R that might be subject to 
simple operations like outer products, then they ought to be writing 
vectorised functions!  Maybe it's not possible to hold this line, and 
maybe "outer" is not the right place to draw it, but I think we ought to 
respect the "x is a vector" mindset as much as possible in the base 
package.  As Tony notes, the documentation does try to be clear about 
what outer actually does, and how it can be used.

So I am not a fan of the VECTORIZED argument, and definitely not a fan 
of the VECTORIZED=FALSE default.

Jonathan.

Gabor Grothendieck wrote:
> If the default were changed to VECTORIZED=FALSE then it would
> still be functionally compatible with what we have now so all existing
> software would continue to run correctly yet would not cause
> problems for the unwary.  Existing software would not have to be changed
> to add VECTORIZED=TRUE except for those, presumbly few, cases
> where outer performance is critical.   One optimization might be to
> have the default be TRUE if the function is * or perhaps if its specified
> as a single character and FALSE otherwise.
> 
> Having used APL I always regarded the original design of outer in R as
> permature performance optimization and this would be a chance to get
> it right.
> 
> On 10/28/05, Tony Plate <tplate at acm.org> wrote:
> 
>>[following on from a thread on R-help, but my post here seems more
>>appropriate to R-devel]
>>
>>Would a patch to make outer() work with non-vectorized functions be
>>considered?  It seems to come up moderately often on the list, which
>>probably indicates that many many people get bitten by the same
>>incorrect expectation, despite the documentation and the FAQ entry.  It
>>looks pretty simple to modify outer() appropriately: one extra function
>>argument and an if-then-else clause to call mapply(FUN, ...) instead of
>>calling FUN directly.
>>
>>Here's a function demonstrating this:
>>
>>outer2 <- function (X, Y, FUN = "*", ..., VECTORIZED=TRUE)
>>{
>>    no.nx <- is.null(nx <- dimnames(X <- as.array(X)))
>>    dX <- dim(X)
>>    no.ny <- is.null(ny <- dimnames(Y <- as.array(Y)))
>>    dY <- dim(Y)
>>    if (is.character(FUN) && FUN == "*") {
>>        robj <- as.vector(X) %*% t(as.vector(Y))
>>        dim(robj) <- c(dX, dY)
>>    }
>>    else {
>>        FUN <- match.fun(FUN)
>>        Y <- rep(Y, rep.int(length(X), length(Y)))
>>        if (length(X) > 0)
>>            X <- rep(X, times = ceiling(length(Y)/length(X)))
>>        if (VECTORIZED)
>>            robj <- FUN(X, Y, ...)
>>        else
>>            robj <- mapply(FUN, X, Y, MoreArgs=list(...))
>>        dim(robj) <- c(dX, dY)
>>    }
>>    if (no.nx)
>>        nx <- vector("list", length(dX))
>>    else if (no.ny)
>>        ny <- vector("list", length(dY))
>>    if (!(no.nx && no.ny))
>>        dimnames(robj) <- c(nx, ny)
>>    robj
>>}
>># Some examples
>>f <- function(x, y, p=1) {cat("in f\n"); (x*y)^p}
>>outer2(1:2, 3:5, f, 2)
>>outer2(numeric(0), 3:5, f, 2)
>>outer2(1:2, numeric(0), f, 2)
>>outer2(1:2, 3:5, f, 2, VECTORIZED=F)
>>outer2(numeric(0), 3:5, f, 2, VECTORIZED=F)
>>outer2(1:2, numeric(0), f, 2, VECTORIZED=F)
>>
>># Output on examples
>>
>>>f <- function(x, y, p=1) {cat("in f\n"); (x*y)^p}
>>>outer2(1:2, 3:5, f, 2)
>>
>>in f
>>     [,1] [,2] [,3]
>>[1,]    9   16   25
>>[2,]   36   64  100
>>
>>>outer2(numeric(0), 3:5, f, 2)
>>
>>in f
>>     [,1] [,2] [,3]
>>
>>>outer2(1:2, numeric(0), f, 2)
>>
>>in f
>>
>>[1,]
>>[2,]
>>
>>>outer2(1:2, 3:5, f, 2, VECTORIZED=F)
>>
>>in f
>>in f
>>in f
>>in f
>>in f
>>in f
>>     [,1] [,2] [,3]
>>[1,]    9   16   25
>>[2,]   36   64  100
>>
>>>outer2(numeric(0), 3:5, f, 2, VECTORIZED=F)
>>
>>     [,1] [,2] [,3]
>>
>>>outer2(1:2, numeric(0), f, 2, VECTORIZED=F)
>>
>>[1,]
>>[2,]
>>
>>If a patch to add this feature would be considered, I'd be happy to
>>submit one (including documentation).  If so, and if there are any
>>potential traps I should bear in mind, please let me know!
>>
>>-- Tony Plate
>>
>>Rau, Roland wrote:
>>
>>>Dear all,
>>>
>>>a big thanks to Thomas Lumley, James Holtman and Tony Plate for their
>>>answers. They all pointed in the same direction => I need a vectorized
>>>function to be applied. Hence, I will try to work with a 'wrapper'
>>>function as described in the FAQ.
>>>
>>>Thanks again,
>>>Roland
>>>
>>>
>>>
>>>
>>>>-----Original Message-----
>>>>From: Thomas Lumley [mailto:tlumley at u.washington.edu]
>>>>Sent: Thursday, October 27, 2005 11:39 PM
>>>>To: Rau, Roland
>>>>Cc: r-help at stat.math.ethz.ch
>>>>Subject: Re: [R] outer-question
>>>>
>>>>
>>>>You want FAQ 7.17 Why does outer() behave strangely with my function?
>>>>
>>>>     -thomas
>>>>
>>>>On Thu, 27 Oct 2005, Rau, Roland wrote:
>>>>
>>>>
>>>>
>>>>>Dear all,
>>>>>
>>>>>This is a rather lengthy message, but I don't know what I
>>>>
>>>>made wrong in
>>>>
>>>>
>>>>>my real example since the simple code works.
>>>>>I have two variables a, b and a function f for which I would like to
>>>>>calculate all possible combinations of the values of a and b.
>>>>>If f is multiplication, I would simply do:
>>>>>
>>>>>a <- 1:5
>>>>>b <- 1:5
>>>>>outer(a,b)
>>>>>
>>>>>## A bit more complicated is this:
>>>>>f <- function(a,b,d) {
>>>>>    return(a*b+(sum(d)))
>>>>>}
>>>>>additional <- runif(100)
>>>>>outer(X=a, Y=b, FUN=f, d=additional)
>>>>>
>>>>>## So far so good. But now my real example. I would like to plot the
>>>>>## log-likelihood surface for two parameters alpha and beta of
>>>>>## a Gompertz distribution with given data
>>>>>
>>>>>### I have a function to generate random-numbers from a
>>>>>Gompertz-Distribution
>>>>>### (using the 'inversion method')
>>>>>
>>>>>random.gomp <- function(n, alpha, beta) {
>>>>>          return( (log(1-(beta/alpha*log(1-runif(n)))))/beta)
>>>>>}
>>>>>
>>>>>## Now I generate some 'lifetimes'
>>>>>no.people <- 1000
>>>>>al <- 0.1
>>>>>bet <- 0.1
>>>>>lifetimes <- random.gomp(n=no.people, alpha=al, beta=bet)
>>>>>
>>>>>### Since I neither have censoring nor truncation in this
>>>>
>>>>simple case,
>>>>
>>>>
>>>>>### the log-likelihood should be simply the sum of the log of the
>>>>>### the densities (following the parametrization of
>>>>
>>>>Klein/Moeschberger
>>>>
>>>>
>>>>>### Survival Analysis, p. 38)
>>>>>
>>>>>loggomp <- function(alphas, betas, timep) {
>>>>>return(sum(log(alphas) + betas*timep + (alphas/betas *
>>>>>(1-exp(betas*timep)))))
>>>>>}
>>>>>
>>>>>### Now I thought I could obtain a matrix of the
>>>>
>>>>log-likelihood surface
>>>>
>>>>
>>>>>### by specifying possible values for alpha and beta with the given
>>>>>data.
>>>>>### I was able to produce this matrix with two for-loops.
>>>>
>>>>But I thought
>>>>
>>>>
>>>>>### I could use also 'outer' in this case.
>>>>>### This is what I tried:
>>>>>
>>>>>possible.alphas <- seq(from=0.05, to=0.15, length=30)
>>>>>possible.betas <- seq(from=0.05, to=0.15, length=30)
>>>>>
>>>>>outer(X=possible.alphas, Y=possible.betas, FUN=loggomp,
>>>>
>>>>timep=lifetimes)
>>>>
>>>>
>>>>>### But the result is:
>>>>>
>>>>>
>>>>>>outer(X=possible.alphas, Y=possible.betas, FUN=loggomp,
>>>>>
>>>>>timep=lifetimes)
>>>>>Error in outer(X = possible.alphas, Y = possible.betas, FUN
>>>>
>>>>= loggomp,
>>>>
>>>>
>>>>>:
>>>>>      dim<- : dims [product 900] do not match the length
>>>>
>>>>of object [1]
>>>>
>>>>
>>>>>In addition: Warning messages:
>>>>>...
>>>>>
>>>>>### Can somebody give me some hint where the problem is?
>>>>>### I checked my definition of 'loggomp' but I thought this
>>>>
>>>>looks fine:
>>>>
>>>>
>>>>>loggomp(alphas=possible.alphas[1], betas=possible.betas[1],
>>>>>timep=lifetimes)
>>>>>loggomp(alphas=possible.alphas[4], betas=possible.betas[10],
>>>>>timep=lifetimes)
>>>>>loggomp(alphas=possible.alphas[3], betas=possible.betas[11],
>>>>>timep=lifetimes)
>>>>>
>>>>>
>>>>>### I'd appreciate any kind of advice.
>>>>>### Thanks a lot in advance.
>>>>>### Roland
>>>>>
>>>>>
>>>>>+++++
>>>>>This mail has been sent through the MPI for Demographic
>>>>
>>>>Rese...{{dropped}}
>>>>
>>>>
>>>>>______________________________________________
>>>>>R-help at stat.math.ethz.ch mailing list
>>>>>https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>PLEASE do read the posting guide!
>>>>
>>>>http://www.R-project.org/posting-guide.html
>>>>
>>>>Thomas Lumley                 Assoc. Professor, Biostatistics
>>>>tlumley at u.washington.edu      University of Washington, Seattle
>>>>
>>>
>>>
>>>+++++
>>>This mail has been sent through the MPI for Demographic Research.  Should you receive a mail that is apparently from a MPI user without this text displayed, then the address has most likely been faked. If you are uncertain about the validity of this message, please check the mail header or ask your system administrator for assistance.
>>>
>>>
>>
>>______________________________________________
>>R-help at stat.math.ethz.ch mailing list
>>https://stat.ethz.ch/mailman/listinfo/r-help
>>PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
>>
> 
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel

-- 
Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 334 3111, fax: +44 (0)191 334 3051
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


From dih69530 at syd.odn.ne.jp  Sun Oct 30 15:07:26 2005
From: dih69530 at syd.odn.ne.jp (dih69530@syd.odn.ne.jp)
Date: Sun, 30 Oct 2005 15:07:26 +0100 (CET)
Subject: [Rd] Yates' correction for continuity in chisq.test (PR#8265)
Message-ID: <20051030140726.95628205FA@slim.kubism.ku.dk>

Full_Name: foo ba baz
Version: R2.2.0
OS: Mac OS X (10.4)
Submission from: (NULL) (219.66.32.183)


chisq.test(matrix(c(9,10,9,11),2,2))

Chi-square value must be 0, and, P value must be 0
R does over correction

when | a d - b c | < n / 2 &#65292;chi-sq must be 0


From ehlers at math.ucalgary.ca  Sun Oct 30 15:49:00 2005
From: ehlers at math.ucalgary.ca (P Ehlers)
Date: Sun, 30 Oct 2005 07:49:00 -0700
Subject: [Rd] Yates' correction for continuity in chisq.test (PR#8265)
In-Reply-To: <20051030140726.95628205FA@slim.kubism.ku.dk>
References: <20051030140726.95628205FA@slim.kubism.ku.dk>
Message-ID: <4364DD5C.7090508@math.ucalgary.ca>


dih69530 at syd.odn.ne.jp wrote:
> Full_Name: foo ba baz
> Version: R2.2.0
> OS: Mac OS X (10.4)
> Submission from: (NULL) (219.66.32.183)
> 
> 
> chisq.test(matrix(c(9,10,9,11),2,2))
> 
> Chi-square value must be 0, and, P value must be 0
> R does over correction
> 
> when | a d - b c | < n / 2 &#65292;chi-sq must be 0
> 

(Presumably, you mean P-value = 1.)
If you don't want the correction, set correct=FALSE. (The
results won't differ much.)

A better example is

  chisq.test(matrix(c(9,10,9,10),2,2))

for which R probably should return X-squared = 0.

Peter Ehlers


From tlumley at u.washington.edu  Sun Oct 30 22:02:24 2005
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Sun, 30 Oct 2005 13:02:24 -0800 (PST)
Subject: [Rd] [R] unvectorized option for outer()
In-Reply-To: <4364A4FC.2030400@durham.ac.uk>
References: <8B08A3A1EA7AAC41BE24C750338754E69FDF14@HERMES.demogr.mpg.de>
	<43629490.9060204@acm.org>
	<971536df0510281643u50929fa6rf097c40948700804@mail.gmail.com>
	<4364A4FC.2030400@durham.ac.uk>
Message-ID: <Pine.LNX.4.63a.0510301300260.28148@homer23.u.washington.edu>

On Sun, 30 Oct 2005, Jonathan Rougier wrote:

> I'm not sure about this.  Perhaps I am a dinosaur, but my feeling is
> that if people are writing functions in R that might be subject to
> simple operations like outer products, then they ought to be writing
> vectorised functions!

I would agree.  How about an oapply() function that does multiway (rather 
than just two-way) outer products.  Basing the name on "apply" would 
emphasize the similarity to other flexible, not particularly optimized 
second-order functions.

 	-thomas



>		Maybe it's not possible to hold this line, and
> maybe "outer" is not the right place to draw it, but I think we ought to
> respect the "x is a vector" mindset as much as possible in the base
> package.  As Tony notes, the documentation does try to be clear about
> what outer actually does, and how it can be used.
>
> So I am not a fan of the VECTORIZED argument, and definitely not a fan
> of the VECTORIZED=FALSE default.
>
> Jonathan.
>
> Gabor Grothendieck wrote:
>> If the default were changed to VECTORIZED=FALSE then it would
>> still be functionally compatible with what we have now so all existing
>> software would continue to run correctly yet would not cause
>> problems for the unwary.  Existing software would not have to be changed
>> to add VECTORIZED=TRUE except for those, presumbly few, cases
>> where outer performance is critical.   One optimization might be to
>> have the default be TRUE if the function is * or perhaps if its specified
>> as a single character and FALSE otherwise.
>>
>> Having used APL I always regarded the original design of outer in R as
>> permature performance optimization and this would be a chance to get
>> it right.
>>
>> On 10/28/05, Tony Plate <tplate at acm.org> wrote:
>>
>>> [following on from a thread on R-help, but my post here seems more
>>> appropriate to R-devel]
>>>
>>> Would a patch to make outer() work with non-vectorized functions be
>>> considered?  It seems to come up moderately often on the list, which
>>> probably indicates that many many people get bitten by the same
>>> incorrect expectation, despite the documentation and the FAQ entry.  It
>>> looks pretty simple to modify outer() appropriately: one extra function
>>> argument and an if-then-else clause to call mapply(FUN, ...) instead of
>>> calling FUN directly.
>>>
>>> Here's a function demonstrating this:
>>>
>>> outer2 <- function (X, Y, FUN = "*", ..., VECTORIZED=TRUE)
>>> {
>>>    no.nx <- is.null(nx <- dimnames(X <- as.array(X)))
>>>    dX <- dim(X)
>>>    no.ny <- is.null(ny <- dimnames(Y <- as.array(Y)))
>>>    dY <- dim(Y)
>>>    if (is.character(FUN) && FUN == "*") {
>>>        robj <- as.vector(X) %*% t(as.vector(Y))
>>>        dim(robj) <- c(dX, dY)
>>>    }
>>>    else {
>>>        FUN <- match.fun(FUN)
>>>        Y <- rep(Y, rep.int(length(X), length(Y)))
>>>        if (length(X) > 0)
>>>            X <- rep(X, times = ceiling(length(Y)/length(X)))
>>>        if (VECTORIZED)
>>>            robj <- FUN(X, Y, ...)
>>>        else
>>>            robj <- mapply(FUN, X, Y, MoreArgs=list(...))
>>>        dim(robj) <- c(dX, dY)
>>>    }
>>>    if (no.nx)
>>>        nx <- vector("list", length(dX))
>>>    else if (no.ny)
>>>        ny <- vector("list", length(dY))
>>>    if (!(no.nx && no.ny))
>>>        dimnames(robj) <- c(nx, ny)
>>>    robj
>>> }
>>> # Some examples
>>> f <- function(x, y, p=1) {cat("in f\n"); (x*y)^p}
>>> outer2(1:2, 3:5, f, 2)
>>> outer2(numeric(0), 3:5, f, 2)
>>> outer2(1:2, numeric(0), f, 2)
>>> outer2(1:2, 3:5, f, 2, VECTORIZED=F)
>>> outer2(numeric(0), 3:5, f, 2, VECTORIZED=F)
>>> outer2(1:2, numeric(0), f, 2, VECTORIZED=F)
>>>
>>> # Output on examples
>>>
>>>> f <- function(x, y, p=1) {cat("in f\n"); (x*y)^p}
>>>> outer2(1:2, 3:5, f, 2)
>>>
>>> in f
>>>     [,1] [,2] [,3]
>>> [1,]    9   16   25
>>> [2,]   36   64  100
>>>
>>>> outer2(numeric(0), 3:5, f, 2)
>>>
>>> in f
>>>     [,1] [,2] [,3]
>>>
>>>> outer2(1:2, numeric(0), f, 2)
>>>
>>> in f
>>>
>>> [1,]
>>> [2,]
>>>
>>>> outer2(1:2, 3:5, f, 2, VECTORIZED=F)
>>>
>>> in f
>>> in f
>>> in f
>>> in f
>>> in f
>>> in f
>>>     [,1] [,2] [,3]
>>> [1,]    9   16   25
>>> [2,]   36   64  100
>>>
>>>> outer2(numeric(0), 3:5, f, 2, VECTORIZED=F)
>>>
>>>     [,1] [,2] [,3]
>>>
>>>> outer2(1:2, numeric(0), f, 2, VECTORIZED=F)
>>>
>>> [1,]
>>> [2,]
>>>
>>> If a patch to add this feature would be considered, I'd be happy to
>>> submit one (including documentation).  If so, and if there are any
>>> potential traps I should bear in mind, please let me know!
>>>
>>> -- Tony Plate
>>>
>>> Rau, Roland wrote:
>>>
>>>> Dear all,
>>>>
>>>> a big thanks to Thomas Lumley, James Holtman and Tony Plate for their
>>>> answers. They all pointed in the same direction => I need a vectorized
>>>> function to be applied. Hence, I will try to work with a 'wrapper'
>>>> function as described in the FAQ.
>>>>
>>>> Thanks again,
>>>> Roland
>>>>
>>>>
>>>>
>>>>
>>>>> -----Original Message-----
>>>>> From: Thomas Lumley [mailto:tlumley at u.washington.edu]
>>>>> Sent: Thursday, October 27, 2005 11:39 PM
>>>>> To: Rau, Roland
>>>>> Cc: r-help at stat.math.ethz.ch
>>>>> Subject: Re: [R] outer-question
>>>>>
>>>>>
>>>>> You want FAQ 7.17 Why does outer() behave strangely with my function?
>>>>>
>>>>>     -thomas
>>>>>
>>>>> On Thu, 27 Oct 2005, Rau, Roland wrote:
>>>>>
>>>>>
>>>>>
>>>>>> Dear all,
>>>>>>
>>>>>> This is a rather lengthy message, but I don't know what I
>>>>>
>>>>> made wrong in
>>>>>
>>>>>
>>>>>> my real example since the simple code works.
>>>>>> I have two variables a, b and a function f for which I would like to
>>>>>> calculate all possible combinations of the values of a and b.
>>>>>> If f is multiplication, I would simply do:
>>>>>>
>>>>>> a <- 1:5
>>>>>> b <- 1:5
>>>>>> outer(a,b)
>>>>>>
>>>>>> ## A bit more complicated is this:
>>>>>> f <- function(a,b,d) {
>>>>>>    return(a*b+(sum(d)))
>>>>>> }
>>>>>> additional <- runif(100)
>>>>>> outer(X=a, Y=b, FUN=f, d=additional)
>>>>>>
>>>>>> ## So far so good. But now my real example. I would like to plot the
>>>>>> ## log-likelihood surface for two parameters alpha and beta of
>>>>>> ## a Gompertz distribution with given data
>>>>>>
>>>>>> ### I have a function to generate random-numbers from a
>>>>>> Gompertz-Distribution
>>>>>> ### (using the 'inversion method')
>>>>>>
>>>>>> random.gomp <- function(n, alpha, beta) {
>>>>>>          return( (log(1-(beta/alpha*log(1-runif(n)))))/beta)
>>>>>> }
>>>>>>
>>>>>> ## Now I generate some 'lifetimes'
>>>>>> no.people <- 1000
>>>>>> al <- 0.1
>>>>>> bet <- 0.1
>>>>>> lifetimes <- random.gomp(n=no.people, alpha=al, beta=bet)
>>>>>>
>>>>>> ### Since I neither have censoring nor truncation in this
>>>>>
>>>>> simple case,
>>>>>
>>>>>
>>>>>> ### the log-likelihood should be simply the sum of the log of the
>>>>>> ### the densities (following the parametrization of
>>>>>
>>>>> Klein/Moeschberger
>>>>>
>>>>>
>>>>>> ### Survival Analysis, p. 38)
>>>>>>
>>>>>> loggomp <- function(alphas, betas, timep) {
>>>>>> return(sum(log(alphas) + betas*timep + (alphas/betas *
>>>>>> (1-exp(betas*timep)))))
>>>>>> }
>>>>>>
>>>>>> ### Now I thought I could obtain a matrix of the
>>>>>
>>>>> log-likelihood surface
>>>>>
>>>>>
>>>>>> ### by specifying possible values for alpha and beta with the given
>>>>>> data.
>>>>>> ### I was able to produce this matrix with two for-loops.
>>>>>
>>>>> But I thought
>>>>>
>>>>>
>>>>>> ### I could use also 'outer' in this case.
>>>>>> ### This is what I tried:
>>>>>>
>>>>>> possible.alphas <- seq(from=0.05, to=0.15, length=30)
>>>>>> possible.betas <- seq(from=0.05, to=0.15, length=30)
>>>>>>
>>>>>> outer(X=possible.alphas, Y=possible.betas, FUN=loggomp,
>>>>>
>>>>> timep=lifetimes)
>>>>>
>>>>>
>>>>>> ### But the result is:
>>>>>>
>>>>>>
>>>>>>> outer(X=possible.alphas, Y=possible.betas, FUN=loggomp,
>>>>>>
>>>>>> timep=lifetimes)
>>>>>> Error in outer(X = possible.alphas, Y = possible.betas, FUN
>>>>>
>>>>> = loggomp,
>>>>>
>>>>>
>>>>>> :
>>>>>>      dim<- : dims [product 900] do not match the length
>>>>>
>>>>> of object [1]
>>>>>
>>>>>
>>>>>> In addition: Warning messages:
>>>>>> ...
>>>>>>
>>>>>> ### Can somebody give me some hint where the problem is?
>>>>>> ### I checked my definition of 'loggomp' but I thought this
>>>>>
>>>>> looks fine:
>>>>>
>>>>>
>>>>>> loggomp(alphas=possible.alphas[1], betas=possible.betas[1],
>>>>>> timep=lifetimes)
>>>>>> loggomp(alphas=possible.alphas[4], betas=possible.betas[10],
>>>>>> timep=lifetimes)
>>>>>> loggomp(alphas=possible.alphas[3], betas=possible.betas[11],
>>>>>> timep=lifetimes)
>>>>>>
>>>>>>
>>>>>> ### I'd appreciate any kind of advice.
>>>>>> ### Thanks a lot in advance.
>>>>>> ### Roland
>>>>>>
>>>>>>
>>>>>> +++++
>>>>>> This mail has been sent through the MPI for Demographic
>>>>>
>>>>> Rese...{{dropped}}
>>>>>
>>>>>
>>>>>> ______________________________________________
>>>>>> R-help at stat.math.ethz.ch mailing list
>>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>>>>> PLEASE do read the posting guide!
>>>>>
>>>>> http://www.R-project.org/posting-guide.html
>>>>>
>>>>> Thomas Lumley                 Assoc. Professor, Biostatistics
>>>>> tlumley at u.washington.edu      University of Washington, Seattle
>>>>>
>>>>
>>>>
>>>> +++++
>>>> This mail has been sent through the MPI for Demographic Research.  Should you receive a mail that is apparently from a MPI user without this text displayed, then the address has most likely been faked. If you are uncertain about the validity of this message, please check the mail header or ask your system administrator for assistance.
>>>>
>>>>
>>>
>>> ______________________________________________
>>> R-help at stat.math.ethz.ch mailing list
>>> https://stat.ethz.ch/mailman/listinfo/r-help
>>> PLEASE do read the posting guide! http://www.R-project.org/posting-guide.html
>>>
>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
>
> -- 
> Jonathan Rougier                       Science Laboratories
> Department of Mathematical Sciences    South Road
> University of Durham                   Durham DH1 3LE
> tel: +44 (0)191 334 3111, fax: +44 (0)191 334 3051
> http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
>
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
>

Thomas Lumley			Assoc. Professor, Biostatistics
tlumley at u.washington.edu	University of Washington, Seattle


From p.dalgaard at biostat.ku.dk  Sun Oct 30 23:19:43 2005
From: p.dalgaard at biostat.ku.dk (Peter Dalgaard)
Date: 30 Oct 2005 23:19:43 +0100
Subject: [Rd] [R] unvectorized option for outer()
In-Reply-To: <Pine.LNX.4.63a.0510301300260.28148@homer23.u.washington.edu>
References: <8B08A3A1EA7AAC41BE24C750338754E69FDF14@HERMES.demogr.mpg.de>
	<43629490.9060204@acm.org>
	<971536df0510281643u50929fa6rf097c40948700804@mail.gmail.com>
	<4364A4FC.2030400@durham.ac.uk>
	<Pine.LNX.4.63a.0510301300260.28148@homer23.u.washington.edu>
Message-ID: <x2y84amyv4.fsf@turmalin.kubism.ku.dk>

Thomas Lumley <tlumley at u.washington.edu> writes:

> On Sun, 30 Oct 2005, Jonathan Rougier wrote:
> 
> > I'm not sure about this.  Perhaps I am a dinosaur, but my feeling is
> > that if people are writing functions in R that might be subject to
> > simple operations like outer products, then they ought to be writing
> > vectorised functions!
> 
> I would agree.  How about an oapply() function that does multiway (rather 
> than just two-way) outer products.  Basing the name on "apply" would 
> emphasize the similarity to other flexible, not particularly optimized 
> second-order functions.

In fairness, it should probably be said that not all problems
vectorize naturally. One example is

  ssd <- function(A,alpha) sum((Y - A*exp(-alpha*t))^2)

However, it should be worth noting that with the mapply() function at
hand, it is pretty easy to turn a non-vectorized function into a
vectorized one. 

  SSD <- function(A,alpha) mapply(ssd, A, alpha)

(Anybody want to try their hand on writing a general Vectorize()
function? I.e. one that allowed

   outer(Avec, alphavec, Vectorize(ssd))

to work.)
-- 
   O__  ---- Peter Dalgaard             ?ster Farimagsgade 5, Entr.B
  c/ /'_ --- Dept. of Biostatistics     PO Box 2099, 1014 Cph. K
 (*) \(*) -- University of Copenhagen   Denmark          Ph:  (+45) 35327918
~~~~~~~~~~ - (p.dalgaard at biostat.ku.dk)                  FAX: (+45) 35327907


From Weigand.Stephen at mayo.edu  Mon Oct 31 00:19:02 2005
From: Weigand.Stephen at mayo.edu (Weigand.Stephen@mayo.edu)
Date: Mon, 31 Oct 2005 00:19:02 +0100 (CET)
Subject: [Rd] possible typo in write.table.Rd (PR#8266)
Message-ID: <20051030231902.1A443205F6@slim.kubism.ku.dk>

In reading ?read.table I noticed what appears to be
a typo in the Details section. Below is a "patch" 
which changes an "is" to an "if". 

--- read.table.Rd       Thu Aug 25 10:48:06 2005
+++ read.table2.Rd      Sun Oct 30 16:42:01 2005
@@ -165,7 +165,7 @@
 }
 \details{
   A field or line is \sQuote{blank} if it contains nothing (except
-  whitespace is no separator is specified) before a comment character or
+  whitespace if no separator is specified) before a comment character or
   the end of the field or line.


::::::::::::::::::::::::::::::::::
Stephen Weigand
Division of Biostatistics
Mayo Clinic Rochester, Minn., USA
Phone (507) 266-1650, fax 284-9542


From Hong.Ooi at iag.com.au  Mon Oct 31 05:56:00 2005
From: Hong.Ooi at iag.com.au (Hong.Ooi@iag.com.au)
Date: Mon, 31 Oct 2005 05:56:00 +0100 (CET)
Subject: [Rd] (PR#7495) Function Body / Formals Bug
Message-ID: <20051031045600.767E51C687@slim.kubism.ku.dk>


_________________________________________________________________________=
______________

Note: This e-mail is subject to the disclaimer contained at the bottom of=
=20this message.
_________________________________________________________________________=
______________


Just a note on the reported bug; it seems to be related to having a NULL
function body.


# this works
> f <- function(a, b) a + b
> f
function(a, b) a + b
> formals(f) <- alist(a=3D, b=3D, c=3D, d=3D)
> f
function (a, b, c, d)=20
a + b


# this also works
> f2 <- function(a, b) invisible(NULL)
> f2
function(a, b) invisible(NULL)
> formals(f2) <- alist(a=3D, b=3D, c=3D, d=3D)
> f2
function (a, b, c, d)=20
invisible(NULL)


# this gives a funny result
> f3 <- function(a, b) NULL
> f3
function(a, b) NULL
> formals(f3) <- alist(a=3D, b=3D, c=3D, d=3D)
> f3
function (a, b, c)=20



Note the body of f3 becomes empty in the last example (not even a NULL).
This is with R 2.2.0 for Windows.



>I'd like to report two bugs in the R function definitions, the first
>slightly problematic, the second likely unimportant. Both of these are
>reproducible on both Windows and Linux, R 2.0.1
>
>First Bug:
>> a <- new("function")
>> formals(a) <- alist(a=3D, b=3D, c=3D, d=3D)
>> a
>function (a, b, c) ## the d argument disappeared!
>> formals(a) <- alist(a=3D, b=3D, c=3D, d=3D)
>> a
>function (a, b, c, d) ## the d argument reappeared!
>
>As you can see from above, the d=3D argument got chopped off completely
>the first time "formals<-"() is called, but not the second!=20


--=20
Hong Ooi
Senior Research Analyst
Insurance Australia Group, 388 George St, Sydney NSW 2000
(02) 9292 1566


_________________________________________________________________________=
______________

The information transmitted in this message and its attachments (if any) =
is intended=20
only for the person or entity to which it is addressed.
The message may contain confidential and/or privileged material. Any revi=
ew,=20
retransmission, dissemination or other use of, or taking of any action in=
=20reliance=20
upon this information, by persons or entities other than the intended rec=
ipient is=20
prohibited.

If you have received this in error, please contact the sender and delete =
this e-mail=20
and associated material from any computer.

The intended recipient of this e-mail may only use, reproduce, disclose o=
r distribute=20
the information contained in this e-mail and any attached files, with the=
=20permission=20
of the sender.

This message has been scanned for viruses with Symantec Scan Engine and c=
leared by=20
MailMarshal.


From ripley at stats.ox.ac.uk  Mon Oct 31 14:02:28 2005
From: ripley at stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 31 Oct 2005 14:02:28 +0100 (CET)
Subject: [Rd] Yates' correction for continuity in chisq.test (PR#8265)
Message-ID: <20051031130228.661A223895@slim.kubism.ku.dk>

On Sun, 30 Oct 2005, P Ehlers wrote:

> dih69530 at syd.odn.ne.jp wrote:
>> Full_Name: foo ba baz
>> Version: R2.2.0
>> OS: Mac OS X (10.4)
>> Submission from: (NULL) (219.66.32.183)
>>
>>
>> chisq.test(matrix(c(9,10,9,11),2,2))
>>
>> Chi-square value must be 0, and, P value must be 0
>> R does over correction
>>
>> when | a d - b c | < n / 2 &#65292;chi-sq must be 0
>
> (Presumably, you mean P-value = 1.)
> If you don't want the correction, set correct=FALSE. (The
> results won't differ much.)
>
> A better example is
>
>  chisq.test(matrix(c(9,10,9,10),2,2))
>
> for which R probably should return X-squared = 0.

R is using the correction that almost all the sources I looked at suggest. 
You can't go around adjusting X^2 for just some values of the data: the 
claim is that the adjusted statistic has a more accurate chisq 
distribution under the null.

I think at this remove it does not matter what Yates' suggested (although 
if I were writing a textbook I would find out), especially as the R 
documentation does not mention Yates.

-- 
Brian D. Ripley,                  ripley at stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272866 (PA)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


From andy_liaw at merck.com  Mon Oct 31 14:12:35 2005
From: andy_liaw at merck.com (Liaw, Andy)
Date: Mon, 31 Oct 2005 08:12:35 -0500
Subject: [Rd] [R] unvectorized option for outer()
Message-ID: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED53F@usctmx1106.merck.com>

> From: Thomas Lumley
> 
> On Sun, 30 Oct 2005, Jonathan Rougier wrote:
> 
> > I'm not sure about this.  Perhaps I am a dinosaur, but my feeling is
> > that if people are writing functions in R that might be subject to
> > simple operations like outer products, then they ought to be writing
> > vectorised functions!
> 
> I would agree.  How about an oapply() function that does 
> multiway (rather 
> than just two-way) outer products.  Basing the name on "apply" would 
> emphasize the similarity to other flexible, not particularly 
> optimized 
> second-order functions.
> 
>  	-thomas

I'll toss in my $0.02:  The following is my attempt at creating a "general
outer" that works with more than two arguments.

gouter <- function (x, FUN, ...) {
    xgrid <- as.list(do.call("expand.grid", x))
    names(xgrid) <- NULL
    array(do.call(deparse(substitute(FUN)), c(xgrid, list(...))), 
        dim = sapply(x, length), dimnames = x)
}


Here's an example:

> example(gouter)

gouter> gouter(list(letters[1:2], 1:3, 2:4), paste, sep = "")
, , 2

  1     2     3    
a "a12" "a22" "a32"
b "b12" "b22" "b32"

, , 3

  1     2     3    
a "a13" "a23" "a33"
b "b13" "b23" "b33"

, , 4

  1     2     3    
a "a14" "a24" "a34"
b "b14" "b24" "b34"

Andy

> 
> 
> >		Maybe it's not possible to hold this line, and
> > maybe "outer" is not the right place to draw it, but I 
> think we ought to
> > respect the "x is a vector" mindset as much as possible in the base
> > package.  As Tony notes, the documentation does try to be 
> clear about
> > what outer actually does, and how it can be used.
> >
> > So I am not a fan of the VECTORIZED argument, and 
> definitely not a fan
> > of the VECTORIZED=FALSE default.
> >
> > Jonathan.
> >
> > Gabor Grothendieck wrote:
> >> If the default were changed to VECTORIZED=FALSE then it would
> >> still be functionally compatible with what we have now so 
> all existing
> >> software would continue to run correctly yet would not cause
> >> problems for the unwary.  Existing software would not have 
> to be changed
> >> to add VECTORIZED=TRUE except for those, presumbly few, cases
> >> where outer performance is critical.   One optimization might be to
> >> have the default be TRUE if the function is * or perhaps 
> if its specified
> >> as a single character and FALSE otherwise.
> >>
> >> Having used APL I always regarded the original design of 
> outer in R as
> >> permature performance optimization and this would be a 
> chance to get
> >> it right.
> >>
> >> On 10/28/05, Tony Plate <tplate at acm.org> wrote:
> >>
> >>> [following on from a thread on R-help, but my post here seems more
> >>> appropriate to R-devel]
> >>>
> >>> Would a patch to make outer() work with non-vectorized 
> functions be
> >>> considered?  It seems to come up moderately often on the 
> list, which
> >>> probably indicates that many many people get bitten by the same
> >>> incorrect expectation, despite the documentation and the 
> FAQ entry.  It
> >>> looks pretty simple to modify outer() appropriately: one 
> extra function
> >>> argument and an if-then-else clause to call mapply(FUN, 
> ...) instead of
> >>> calling FUN directly.
> >>>
> >>> Here's a function demonstrating this:
> >>>
> >>> outer2 <- function (X, Y, FUN = "*", ..., VECTORIZED=TRUE)
> >>> {
> >>>    no.nx <- is.null(nx <- dimnames(X <- as.array(X)))
> >>>    dX <- dim(X)
> >>>    no.ny <- is.null(ny <- dimnames(Y <- as.array(Y)))
> >>>    dY <- dim(Y)
> >>>    if (is.character(FUN) && FUN == "*") {
> >>>        robj <- as.vector(X) %*% t(as.vector(Y))
> >>>        dim(robj) <- c(dX, dY)
> >>>    }
> >>>    else {
> >>>        FUN <- match.fun(FUN)
> >>>        Y <- rep(Y, rep.int(length(X), length(Y)))
> >>>        if (length(X) > 0)
> >>>            X <- rep(X, times = ceiling(length(Y)/length(X)))
> >>>        if (VECTORIZED)
> >>>            robj <- FUN(X, Y, ...)
> >>>        else
> >>>            robj <- mapply(FUN, X, Y, MoreArgs=list(...))
> >>>        dim(robj) <- c(dX, dY)
> >>>    }
> >>>    if (no.nx)
> >>>        nx <- vector("list", length(dX))
> >>>    else if (no.ny)
> >>>        ny <- vector("list", length(dY))
> >>>    if (!(no.nx && no.ny))
> >>>        dimnames(robj) <- c(nx, ny)
> >>>    robj
> >>> }
> >>> # Some examples
> >>> f <- function(x, y, p=1) {cat("in f\n"); (x*y)^p}
> >>> outer2(1:2, 3:5, f, 2)
> >>> outer2(numeric(0), 3:5, f, 2)
> >>> outer2(1:2, numeric(0), f, 2)
> >>> outer2(1:2, 3:5, f, 2, VECTORIZED=F)
> >>> outer2(numeric(0), 3:5, f, 2, VECTORIZED=F)
> >>> outer2(1:2, numeric(0), f, 2, VECTORIZED=F)
> >>>
> >>> # Output on examples
> >>>
> >>>> f <- function(x, y, p=1) {cat("in f\n"); (x*y)^p}
> >>>> outer2(1:2, 3:5, f, 2)
> >>>
> >>> in f
> >>>     [,1] [,2] [,3]
> >>> [1,]    9   16   25
> >>> [2,]   36   64  100
> >>>
> >>>> outer2(numeric(0), 3:5, f, 2)
> >>>
> >>> in f
> >>>     [,1] [,2] [,3]
> >>>
> >>>> outer2(1:2, numeric(0), f, 2)
> >>>
> >>> in f
> >>>
> >>> [1,]
> >>> [2,]
> >>>
> >>>> outer2(1:2, 3:5, f, 2, VECTORIZED=F)
> >>>
> >>> in f
> >>> in f
> >>> in f
> >>> in f
> >>> in f
> >>> in f
> >>>     [,1] [,2] [,3]
> >>> [1,]    9   16   25
> >>> [2,]   36   64  100
> >>>
> >>>> outer2(numeric(0), 3:5, f, 2, VECTORIZED=F)
> >>>
> >>>     [,1] [,2] [,3]
> >>>
> >>>> outer2(1:2, numeric(0), f, 2, VECTORIZED=F)
> >>>
> >>> [1,]
> >>> [2,]
> >>>
> >>> If a patch to add this feature would be considered, I'd 
> be happy to
> >>> submit one (including documentation).  If so, and if there are any
> >>> potential traps I should bear in mind, please let me know!
> >>>
> >>> -- Tony Plate
> >>>
> >>> Rau, Roland wrote:
> >>>
> >>>> Dear all,
> >>>>
> >>>> a big thanks to Thomas Lumley, James Holtman and Tony 
> Plate for their
> >>>> answers. They all pointed in the same direction => I 
> need a vectorized
> >>>> function to be applied. Hence, I will try to work with a 
> 'wrapper'
> >>>> function as described in the FAQ.
> >>>>
> >>>> Thanks again,
> >>>> Roland
> >>>>
> >>>>
> >>>>
> >>>>
> >>>>> -----Original Message-----
> >>>>> From: Thomas Lumley [mailto:tlumley at u.washington.edu]
> >>>>> Sent: Thursday, October 27, 2005 11:39 PM
> >>>>> To: Rau, Roland
> >>>>> Cc: r-help at stat.math.ethz.ch
> >>>>> Subject: Re: [R] outer-question
> >>>>>
> >>>>>
> >>>>> You want FAQ 7.17 Why does outer() behave strangely 
> with my function?
> >>>>>
> >>>>>     -thomas
> >>>>>
> >>>>> On Thu, 27 Oct 2005, Rau, Roland wrote:
> >>>>>
> >>>>>
> >>>>>
> >>>>>> Dear all,
> >>>>>>
> >>>>>> This is a rather lengthy message, but I don't know what I
> >>>>>
> >>>>> made wrong in
> >>>>>
> >>>>>
> >>>>>> my real example since the simple code works.
> >>>>>> I have two variables a, b and a function f for which I 
> would like to
> >>>>>> calculate all possible combinations of the values of a and b.
> >>>>>> If f is multiplication, I would simply do:
> >>>>>>
> >>>>>> a <- 1:5
> >>>>>> b <- 1:5
> >>>>>> outer(a,b)
> >>>>>>
> >>>>>> ## A bit more complicated is this:
> >>>>>> f <- function(a,b,d) {
> >>>>>>    return(a*b+(sum(d)))
> >>>>>> }
> >>>>>> additional <- runif(100)
> >>>>>> outer(X=a, Y=b, FUN=f, d=additional)
> >>>>>>
> >>>>>> ## So far so good. But now my real example. I would 
> like to plot the
> >>>>>> ## log-likelihood surface for two parameters alpha and beta of
> >>>>>> ## a Gompertz distribution with given data
> >>>>>>
> >>>>>> ### I have a function to generate random-numbers from a
> >>>>>> Gompertz-Distribution
> >>>>>> ### (using the 'inversion method')
> >>>>>>
> >>>>>> random.gomp <- function(n, alpha, beta) {
> >>>>>>          return( (log(1-(beta/alpha*log(1-runif(n)))))/beta)
> >>>>>> }
> >>>>>>
> >>>>>> ## Now I generate some 'lifetimes'
> >>>>>> no.people <- 1000
> >>>>>> al <- 0.1
> >>>>>> bet <- 0.1
> >>>>>> lifetimes <- random.gomp(n=no.people, alpha=al, beta=bet)
> >>>>>>
> >>>>>> ### Since I neither have censoring nor truncation in this
> >>>>>
> >>>>> simple case,
> >>>>>
> >>>>>
> >>>>>> ### the log-likelihood should be simply the sum of the 
> log of the
> >>>>>> ### the densities (following the parametrization of
> >>>>>
> >>>>> Klein/Moeschberger
> >>>>>
> >>>>>
> >>>>>> ### Survival Analysis, p. 38)
> >>>>>>
> >>>>>> loggomp <- function(alphas, betas, timep) {
> >>>>>> return(sum(log(alphas) + betas*timep + (alphas/betas *
> >>>>>> (1-exp(betas*timep)))))
> >>>>>> }
> >>>>>>
> >>>>>> ### Now I thought I could obtain a matrix of the
> >>>>>
> >>>>> log-likelihood surface
> >>>>>
> >>>>>
> >>>>>> ### by specifying possible values for alpha and beta 
> with the given
> >>>>>> data.
> >>>>>> ### I was able to produce this matrix with two for-loops.
> >>>>>
> >>>>> But I thought
> >>>>>
> >>>>>
> >>>>>> ### I could use also 'outer' in this case.
> >>>>>> ### This is what I tried:
> >>>>>>
> >>>>>> possible.alphas <- seq(from=0.05, to=0.15, length=30)
> >>>>>> possible.betas <- seq(from=0.05, to=0.15, length=30)
> >>>>>>
> >>>>>> outer(X=possible.alphas, Y=possible.betas, FUN=loggomp,
> >>>>>
> >>>>> timep=lifetimes)
> >>>>>
> >>>>>
> >>>>>> ### But the result is:
> >>>>>>
> >>>>>>
> >>>>>>> outer(X=possible.alphas, Y=possible.betas, FUN=loggomp,
> >>>>>>
> >>>>>> timep=lifetimes)
> >>>>>> Error in outer(X = possible.alphas, Y = possible.betas, FUN
> >>>>>
> >>>>> = loggomp,
> >>>>>
> >>>>>
> >>>>>> :
> >>>>>>      dim<- : dims [product 900] do not match the length
> >>>>>
> >>>>> of object [1]
> >>>>>
> >>>>>
> >>>>>> In addition: Warning messages:
> >>>>>> ...
> >>>>>>
> >>>>>> ### Can somebody give me some hint where the problem is?
> >>>>>> ### I checked my definition of 'loggomp' but I thought this
> >>>>>
> >>>>> looks fine:
> >>>>>
> >>>>>
> >>>>>> loggomp(alphas=possible.alphas[1], betas=possible.betas[1],
> >>>>>> timep=lifetimes)
> >>>>>> loggomp(alphas=possible.alphas[4], betas=possible.betas[10],
> >>>>>> timep=lifetimes)
> >>>>>> loggomp(alphas=possible.alphas[3], betas=possible.betas[11],
> >>>>>> timep=lifetimes)
> >>>>>>
> >>>>>>
> >>>>>> ### I'd appreciate any kind of advice.
> >>>>>> ### Thanks a lot in advance.
> >>>>>> ### Roland
> >>>>>>
> >>>>>>
> >>>>>> +++++
> >>>>>> This mail has been sent through the MPI for Demographic
> >>>>>
> >>>>> Rese...{{dropped}}
> >>>>>
> >>>>>
> >>>>>> ______________________________________________
> >>>>>> R-help at stat.math.ethz.ch mailing list
> >>>>>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>>>>> PLEASE do read the posting guide!
> >>>>>
> >>>>> http://www.R-project.org/posting-guide.html
> >>>>>
> >>>>> Thomas Lumley                 Assoc. Professor, Biostatistics
> >>>>> tlumley at u.washington.edu      University of Washington, Seattle
> >>>>>
> >>>>
> >>>>
> >>>> +++++
> >>>> This mail has been sent through the MPI for Demographic 
> Research.  Should you receive a mail that is apparently from 
> a MPI user without this text displayed, then the address has 
> most likely been faked. If you are uncertain about the 
> validity of this message, please check the mail header or ask 
> your system administrator for assistance.
> >>>>
> >>>>
> >>>
> >>> ______________________________________________
> >>> R-help at stat.math.ethz.ch mailing list
> >>> https://stat.ethz.ch/mailman/listinfo/r-help
> >>> PLEASE do read the posting guide! 
> http://www.R-project.org/posting-guide.html
> >>>
> >>
> >>
> >> 
> ______________________________________________
> >> R-devel at r-project.org mailing list
> >> https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> > -- 
> > Jonathan Rougier                       Science Laboratories
> > Department of Mathematical Sciences    South Road
> > University of Durham                   Durham DH1 3LE
> > tel: +44 (0)191 334 3111, fax: +44 (0)191 334 3051
> > http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html
> >
> > ______________________________________________
> > R-devel at r-project.org mailing list
> > https://stat.ethz.ch/mailman/listinfo/r-devel
> >
> 
> Thomas Lumley			Assoc. Professor, Biostatistics
> tlumley at u.washington.edu	University of Washington, Seattle
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>


From ehlers at math.ucalgary.ca  Mon Oct 31 17:12:13 2005
From: ehlers at math.ucalgary.ca (ehlers@math.ucalgary.ca)
Date: Mon, 31 Oct 2005 17:12:13 +0100 (CET)
Subject: [Rd] Yates' correction for continuity in chisq.test (PR#8265)
Message-ID: <20051031161213.BAA1022151@slim.kubism.ku.dk>



Prof Brian Ripley wrote:

> On Sun, 30 Oct 2005, P Ehlers wrote:
> 
>> dih69530 at syd.odn.ne.jp wrote:
>>
>>> Full_Name: foo ba baz
>>> Version: R2.2.0
>>> OS: Mac OS X (10.4)
>>> Submission from: (NULL) (219.66.32.183)
>>>
>>>
>>> chisq.test(matrix(c(9,10,9,11),2,2))
>>>
>>> Chi-square value must be 0, and, P value must be 0
>>> R does over correction
>>>
>>> when | a d - b c | < n / 2 &#65292;chi-sq must be 0
>>
>>
>> (Presumably, you mean P-value = 1.)
>> If you don't want the correction, set correct=FALSE. (The
>> results won't differ much.)
>>
>> A better example is
>>
>>  chisq.test(matrix(c(9,10,9,10),2,2))
>>
>> for which R probably should return X-squared = 0.
> 
> 
> R is using the correction that almost all the sources I looked at 
> suggest. You can't go around adjusting X^2 for just some values of the 
> data: the claim is that the adjusted statistic has a more accurate chisq 
> distribution under the null.
> 
> I think at this remove it does not matter what Yates' suggested 
> (although if I were writing a textbook I would find out), especially as 
> the R documentation does not mention Yates.
> 

You're quite right that, for consistency, the correction should be
applied even in the silly example I gave. And, of course, one
should not be doing a chisquare test on silly examples.

Peter Ehlers


From tplate at acm.org  Mon Oct 31 20:15:25 2005
From: tplate at acm.org (Tony Plate)
Date: Mon, 31 Oct 2005 12:15:25 -0700
Subject: [Rd] [R] unvectorized option for outer()
In-Reply-To: <x2y84amyv4.fsf@turmalin.kubism.ku.dk>
References: <8B08A3A1EA7AAC41BE24C750338754E69FDF14@HERMES.demogr.mpg.de>	<43629490.9060204@acm.org>	<971536df0510281643u50929fa6rf097c40948700804@mail.gmail.com>	<4364A4FC.2030400@durham.ac.uk>	<Pine.LNX.4.63a.0510301300260.28148@homer23.u.washington.edu>
	<x2y84amyv4.fsf@turmalin.kubism.ku.dk>
Message-ID: <43666D4D.7070602@acm.org>

When I read the preface to The Blue Book (The New S Language, Becker, 
Chambers & Wilks) I see comments along the lines of "high-level 
language", "primary goal of the S environment is to enable and encourage 
good data analysis", etc.  While vectorization is a great feature of S 
(and R), I don't see it, or programming efficiency, mentioned there at all.

Nonetheless, Peter's suggestion of a general Vectorize() function is 
intriguing, and could be useful with other functions that trip users up 
in the same way.  (Also, I do apprecicate Peter pointing out that not 
all functions vectorize naturally, as in his example density 
calculations over grids of parameters).

So, here's a first pass at a general Vectorize() function:

Vectorize <- function(FUN, vectorize.args) {
     if (!all(is.element(vectorize.args, names(formals(FUN)))))
         stop("some args to vectorize are not args of FUN")
     FUNV <- eval(substitute(function(x, ...) mapply(FUN, x, 
MoreArgs=list(...)), list(FUN=FUN)))
     formals(FUNV) <- formals(FUNV)[c(rep(1, length(vectorize.args)), 2)]
     names(formals(FUNV))[seq(along=vectorize.args)] <- vectorize.args
     body(FUNV) <- body(FUNV)[c(1, 2, rep(3, length(vectorize.args)), 4)]
     body(FUNV)[seq(3,len=length(vectorize.args))] <- 
lapply(vectorize.args, as.name)
     FUNV
}

ssd <- function(A,alpha,Y,t) sum((Y - A*exp(-alpha*t))2)
# SSD is a vectorized version of ssd
SSD <- function(Avec, alphavec, ...) mapply(ssd, Avec, alphavec, 
MoreArgs=list(...))
# Vectorize(ssd, c("A", "alpha")) should produce
# function(A, alpha, ...) mapply(ssd, A, alpha, MoreArgs=list(...))
Y <- 1:5; t <- 3
outer(1:3, 1:2, SSD, Y, t)
outer(1:3, 1:2, Vectorize(ssd, c("A", "alpha")), Y, t)

 > # transcript of running the above commands
 > Vectorize(ssd, c("A", "alpha"))
function (A, alpha, ...)
mapply(function (A, alpha, Y, t)
sum((Y - A * exp(-alpha * t))^2), A, alpha, MoreArgs = list(...))
<environment: 0x1361f40>
 > Y <- 1:5; t <- 3
 > outer(1:3, 1:2, SSD, Y, t)
          [,1]     [,2]
[1,] 53.51878 54.92567
[2,] 52.06235 54.85140
[3,] 50.63071 54.77719
 > outer(1:3, 1:2, Vectorize(ssd, c("A", "alpha")), Y, t)
          [,1]     [,2]
[1,] 53.51878 54.92567
[2,] 52.06235 54.85140
[3,] 50.63071 54.77719
 >

[There are a couple of minor design issues around syntax -- what is the 
best way of specifying the arguments to vectorize? (e.g., what about an 
interface that allowed Vectorize(ssd ~ A * alpha)?), and should the 
function name rather than the definition appear in the result of 
Vectorize()?  But those are issues of secondary importance.]

I have to confess I don't really understand how environments work with 
functions, so I don't know if this Vectorize() function will work in 
general.  What is the appropriate environment for returned value of 
Vectorize()?  Is this approach to creating a Vectorize() function on the 
right tack at all?  Any other improvements or fixes?

-- Tony Plate


Peter Dalgaard wrote:
> Thomas Lumley <tlumley at u.washington.edu> writes:
> 
> 
>>On Sun, 30 Oct 2005, Jonathan Rougier wrote:
>>
>>
>>>I'm not sure about this.  Perhaps I am a dinosaur, but my feeling is
>>>that if people are writing functions in R that might be subject to
>>>simple operations like outer products, then they ought to be writing
>>>vectorised functions!
>>
>>I would agree.  How about an oapply() function that does multiway (rather 
>>than just two-way) outer products.  Basing the name on "apply" would 
>>emphasize the similarity to other flexible, not particularly optimized 
>>second-order functions.
> 
> 
> In fairness, it should probably be said that not all problems
> vectorize naturally. One example is
> 
>   ssd <- function(A,alpha) sum((Y - A*exp(-alpha*t))^2)
> 
> However, it should be worth noting that with the mapply() function at
> hand, it is pretty easy to turn a non-vectorized function into a
> vectorized one. 
> 
>   SSD <- function(A,alpha) mapply(ssd, A, alpha)
> 
> (Anybody want to try their hand on writing a general Vectorize()
> function? I.e. one that allowed
> 
>    outer(Avec, alphavec, Vectorize(ssd))
> 
> to work.)


From ggrothendieck at gmail.com  Mon Oct 31 20:33:24 2005
From: ggrothendieck at gmail.com (Gabor Grothendieck)
Date: Mon, 31 Oct 2005 14:33:24 -0500
Subject: [Rd] [R] unvectorized option for outer()
In-Reply-To: <43666D4D.7070602@acm.org>
References: <8B08A3A1EA7AAC41BE24C750338754E69FDF14@HERMES.demogr.mpg.de>
	<43629490.9060204@acm.org>
	<971536df0510281643u50929fa6rf097c40948700804@mail.gmail.com>
	<4364A4FC.2030400@durham.ac.uk>
	<Pine.LNX.4.63a.0510301300260.28148@homer23.u.washington.edu>
	<x2y84amyv4.fsf@turmalin.kubism.ku.dk> <43666D4D.7070602@acm.org>
Message-ID: <971536df0510311133g38247e74j6450b68549b0a555@mail.gmail.com>

On 10/31/05, Tony Plate <tplate at acm.org> wrote:
>
> I have to confess I don't really understand how environments work with
> functions, so I don't know if this Vectorize() function will work in
> general.  What is the appropriate environment for returned value of
> Vectorize()?  Is this approach to creating a Vectorize() function on the

I think the environments of the input and output functions should be
the same which can be accomplished via:

environment(FUNV) <- environment(FUN)


From tlumley at u.washington.edu  Mon Oct 31 20:33:59 2005
From: tlumley at u.washington.edu (Thomas Lumley)
Date: Mon, 31 Oct 2005 11:33:59 -0800 (PST)
Subject: [Rd] [R] unvectorized option for outer()
In-Reply-To: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED53F@usctmx1106.merck.com>
References: <39B6DDB9048D0F4DAD42CB26AAFF0AFAFED53F@usctmx1106.merck.com>
Message-ID: <Pine.LNX.4.63a.0510311131070.24405@homer22.u.washington.edu>

On Mon, 31 Oct 2005, Liaw, Andy wrote:

>> From: Thomas Lumley
>>
>> On Sun, 30 Oct 2005, Jonathan Rougier wrote:
>>
>>> I'm not sure about this.  Perhaps I am a dinosaur, but my feeling is
>>> that if people are writing functions in R that might be subject to
>>> simple operations like outer products, then they ought to be writing
>>> vectorised functions!
>>
>> I would agree.  How about an oapply() function that does
>> multiway (rather
>> than just two-way) outer products.  Basing the name on "apply" would
>> emphasize the similarity to other flexible, not particularly
>> optimized
>> second-order functions.
>>
>>  	-thomas
>
> I'll toss in my $0.02:  The following is my attempt at creating a "general
> outer" that works with more than two arguments.
>
> gouter <- function (x, FUN, ...) {
>    xgrid <- as.list(do.call("expand.grid", x))
>    names(xgrid) <- NULL
>    array(do.call(deparse(substitute(FUN)), c(xgrid, list(...))),
>        dim = sapply(x, length), dimnames = x)
> }
>

Yes, that's the sort of thing I had in mind.  The name "gouter" isn't 
exactly to my taste -- the point was that outer() is the fast but 
restricted function and that the general but slow function should have a 
different name (eg xapply or oapply).


 	-thomas


From murdoch at stats.uwo.ca  Mon Oct 31 20:42:04 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 31 Oct 2005 14:42:04 -0500
Subject: [Rd] [R] unvectorized option for outer()
In-Reply-To: <43666D4D.7070602@acm.org>
References: <8B08A3A1EA7AAC41BE24C750338754E69FDF14@HERMES.demogr.mpg.de>	<43629490.9060204@acm.org>	<971536df0510281643u50929fa6rf097c40948700804@mail.gmail.com>	<4364A4FC.2030400@durham.ac.uk>	<Pine.LNX.4.63a.0510301300260.28148@homer23.u.washington.edu>	<x2y84amyv4.fsf@turmalin.kubism.ku.dk>
	<43666D4D.7070602@acm.org>
Message-ID: <4366738C.1080508@stats.uwo.ca>

On 10/31/2005 2:15 PM, Tony Plate wrote:
> When I read the preface to The Blue Book (The New S Language, Becker, 
> Chambers & Wilks) I see comments along the lines of "high-level 
> language", "primary goal of the S environment is to enable and encourage 
> good data analysis", etc.  While vectorization is a great feature of S 
> (and R), I don't see it, or programming efficiency, mentioned there at all.
> 
> Nonetheless, Peter's suggestion of a general Vectorize() function is 
> intriguing, and could be useful with other functions that trip users up 
> in the same way.  (Also, I do apprecicate Peter pointing out that not 
> all functions vectorize naturally, as in his example density 
> calculations over grids of parameters).
> 
> So, here's a first pass at a general Vectorize() function:
> 
> Vectorize <- function(FUN, vectorize.args) {
>      if (!all(is.element(vectorize.args, names(formals(FUN)))))
>          stop("some args to vectorize are not args of FUN")
>      FUNV <- eval(substitute(function(x, ...) mapply(FUN, x, 
> MoreArgs=list(...)), list(FUN=FUN)))
>      formals(FUNV) <- formals(FUNV)[c(rep(1, length(vectorize.args)), 2)]
>      names(formals(FUNV))[seq(along=vectorize.args)] <- vectorize.args
>      body(FUNV) <- body(FUNV)[c(1, 2, rep(3, length(vectorize.args)), 4)]
>      body(FUNV)[seq(3,len=length(vectorize.args))] <- 
> lapply(vectorize.args, as.name)
>      FUNV
> }

I'd think the formals of the result should be identical to the formals 
of the input.

Regarding the environment of the result:  it is used to determine the 
meaning of symbols that aren't defined within the function, e.g. things 
like "eval", "substitute", etc.  So I'd say that you don't want anything 
special there, as long as you make sure that FUN is always evaluated in 
its original environment.

Generally I don't like the look of that manipulation of the body of your 
result; it looks pretty fragile to me.  But I haven't worked out exactly 
what you're doing, or whether it's possible to avoid it.

Duncan Murdoch


> ssd <- function(A,alpha,Y,t) sum((Y - A*exp(-alpha*t))2)
> # SSD is a vectorized version of ssd
> SSD <- function(Avec, alphavec, ...) mapply(ssd, Avec, alphavec, 
> MoreArgs=list(...))
> # Vectorize(ssd, c("A", "alpha")) should produce
> # function(A, alpha, ...) mapply(ssd, A, alpha, MoreArgs=list(...))
> Y <- 1:5; t <- 3
> outer(1:3, 1:2, SSD, Y, t)
> outer(1:3, 1:2, Vectorize(ssd, c("A", "alpha")), Y, t)
> 
>  > # transcript of running the above commands
>  > Vectorize(ssd, c("A", "alpha"))
> function (A, alpha, ...)
> mapply(function (A, alpha, Y, t)
> sum((Y - A * exp(-alpha * t))^2), A, alpha, MoreArgs = list(...))
> <environment: 0x1361f40>
>  > Y <- 1:5; t <- 3
>  > outer(1:3, 1:2, SSD, Y, t)
>           [,1]     [,2]
> [1,] 53.51878 54.92567
> [2,] 52.06235 54.85140
> [3,] 50.63071 54.77719
>  > outer(1:3, 1:2, Vectorize(ssd, c("A", "alpha")), Y, t)
>           [,1]     [,2]
> [1,] 53.51878 54.92567
> [2,] 52.06235 54.85140
> [3,] 50.63071 54.77719
>  >
> 
> [There are a couple of minor design issues around syntax -- what is the 
> best way of specifying the arguments to vectorize? (e.g., what about an 
> interface that allowed Vectorize(ssd ~ A * alpha)?), and should the 
> function name rather than the definition appear in the result of 
> Vectorize()?  But those are issues of secondary importance.]
> 
> I have to confess I don't really understand how environments work with 
> functions, so I don't know if this Vectorize() function will work in 
> general.  What is the appropriate environment for returned value of 
> Vectorize()?  Is this approach to creating a Vectorize() function on the 
> right tack at all?  Any other improvements or fixes?
> 
> -- Tony Plate
> 
> 
> Peter Dalgaard wrote:
>> Thomas Lumley <tlumley at u.washington.edu> writes:
>> 
>> 
>>>On Sun, 30 Oct 2005, Jonathan Rougier wrote:
>>>
>>>
>>>>I'm not sure about this.  Perhaps I am a dinosaur, but my feeling is
>>>>that if people are writing functions in R that might be subject to
>>>>simple operations like outer products, then they ought to be writing
>>>>vectorised functions!
>>>
>>>I would agree.  How about an oapply() function that does multiway (rather 
>>>than just two-way) outer products.  Basing the name on "apply" would 
>>>emphasize the similarity to other flexible, not particularly optimized 
>>>second-order functions.
>> 
>> 
>> In fairness, it should probably be said that not all problems
>> vectorize naturally. One example is
>> 
>>   ssd <- function(A,alpha) sum((Y - A*exp(-alpha*t))^2)
>> 
>> However, it should be worth noting that with the mapply() function at
>> hand, it is pretty easy to turn a non-vectorized function into a
>> vectorized one. 
>> 
>>   SSD <- function(A,alpha) mapply(ssd, A, alpha)
>> 
>> (Anybody want to try their hand on writing a general Vectorize()
>> function? I.e. one that allowed
>> 
>>    outer(Avec, alphavec, Vectorize(ssd))
>> 
>> to work.)
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From murdoch at stats.uwo.ca  Mon Oct 31 20:44:27 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 31 Oct 2005 14:44:27 -0500
Subject: [Rd] [R] unvectorized option for outer()
In-Reply-To: <971536df0510311133g38247e74j6450b68549b0a555@mail.gmail.com>
References: <8B08A3A1EA7AAC41BE24C750338754E69FDF14@HERMES.demogr.mpg.de>	<43629490.9060204@acm.org>	<971536df0510281643u50929fa6rf097c40948700804@mail.gmail.com>	<4364A4FC.2030400@durham.ac.uk>	<Pine.LNX.4.63a.0510301300260.28148@homer23.u.washington.edu>	<x2y84amyv4.fsf@turmalin.kubism.ku.dk>
	<43666D4D.7070602@acm.org>
	<971536df0510311133g38247e74j6450b68549b0a555@mail.gmail.com>
Message-ID: <4366741B.3090301@stats.uwo.ca>

On 10/31/2005 2:33 PM, Gabor Grothendieck wrote:
> On 10/31/05, Tony Plate <tplate at acm.org> wrote:
>>
>> I have to confess I don't really understand how environments work with
>> functions, so I don't know if this Vectorize() function will work in
>> general.  What is the appropriate environment for returned value of
>> Vectorize()?  Is this approach to creating a Vectorize() function on the
> 
> I think the environments of the input and output functions should be
> the same which can be accomplished via:
> 
> environment(FUNV) <- environment(FUN)

No, definitely not.  For example, FUN may have been defined in an 
environment in which "eval" has been replaced, but if FUNV needs eval, 
it needs the original one.

At some point FUNV will call FUN.  As long as that evaluation of FUN 
keeps its original environment things will be fine.

Duncan Murdoch


From tplate at acm.org  Mon Oct 31 21:49:02 2005
From: tplate at acm.org (Tony Plate)
Date: Mon, 31 Oct 2005 13:49:02 -0700
Subject: [Rd] [R] unvectorized option for outer()
In-Reply-To: <4366738C.1080508@stats.uwo.ca>
References: <8B08A3A1EA7AAC41BE24C750338754E69FDF14@HERMES.demogr.mpg.de>	<43629490.9060204@acm.org>	<971536df0510281643u50929fa6rf097c40948700804@mail.gmail.com>	<4364A4FC.2030400@durham.ac.uk>	<Pine.LNX.4.63a.0510301300260.28148@homer23.u.washington.edu>	<x2y84amyv4.fsf@turmalin.kubism.ku.dk>
	<43666D4D.7070602@acm.org> <4366738C.1080508@stats.uwo.ca>
Message-ID: <4366833E.8000508@acm.org>

Duncan Murdoch wrote:
> On 10/31/2005 2:15 PM, Tony Plate wrote:
> 
>> [snipped comments irrelevant to this post]
>>
>> So, here's a first pass at a general Vectorize() function:
>>
>> Vectorize <- function(FUN, vectorize.args) {
>>      if (!all(is.element(vectorize.args, names(formals(FUN)))))
>>          stop("some args to vectorize are not args of FUN")
>>      FUNV <- eval(substitute(function(x, ...) mapply(FUN, x, 
>> MoreArgs=list(...)), list(FUN=FUN)))
>>      formals(FUNV) <- formals(FUNV)[c(rep(1, length(vectorize.args)), 2)]
>>      names(formals(FUNV))[seq(along=vectorize.args)] <- vectorize.args
>>      body(FUNV) <- body(FUNV)[c(1, 2, rep(3, length(vectorize.args)), 4)]
>>      body(FUNV)[seq(3,len=length(vectorize.args))] <- 
>> lapply(vectorize.args, as.name)
>>      FUNV
>> }
> 
> 
> I'd think the formals of the result should be identical to the formals 
> of the input.
> 
> Regarding the environment of the result:  it is used to determine the 
> meaning of symbols that aren't defined within the function, e.g. things 
> like "eval", "substitute", etc.  So I'd say that you don't want anything 
> special there, as long as you make sure that FUN is always evaluated in 
> its original environment.
> 
> Generally I don't like the look of that manipulation of the body of your 
> result; it looks pretty fragile to me.  But I haven't worked out exactly 
> what you're doing, or whether it's possible to avoid it.
> 
> Duncan Murdoch
> 

Thanks for explanation about the environment.

I should have said, that manipulation of the body creates the call
   mapply(FUN, A, alpha, MoreArgs=list(...))
from the original (x is a dummy argument)
   mapply(FUN, x, MoreArgs=list(...))

Are there better ways to create that call?  The difficulty is that the 
argument names in the call are derived from the actual arguments to 
Vectorize(), and there is an arbitrary number of them.

As for the formals of the result being identical to the formals of the 
input, I couldn't see any easy way to do that and still support optional 
arguments, e.g., if the input function formals were (a, b, t=1), then 
the result function would look something like:

function(a, b, t=1) mapply(FUN, a, b, t=t)

and missing(t) would not work correctly within FUN (with even more 
serious problems for optional arguments with no defaults).

-- Tony Plate


> 
>> ssd <- function(A,alpha,Y,t) sum((Y - A*exp(-alpha*t))2)
>> # SSD is a vectorized version of ssd
>> SSD <- function(Avec, alphavec, ...) mapply(ssd, Avec, alphavec, 
>> MoreArgs=list(...))
>> # Vectorize(ssd, c("A", "alpha")) should produce
>> # function(A, alpha, ...) mapply(ssd, A, alpha, MoreArgs=list(...))
>> Y <- 1:5; t <- 3
>> outer(1:3, 1:2, SSD, Y, t)
>> outer(1:3, 1:2, Vectorize(ssd, c("A", "alpha")), Y, t)
>>
>>  > # transcript of running the above commands
>>  > Vectorize(ssd, c("A", "alpha"))
>> function (A, alpha, ...)
>> mapply(function (A, alpha, Y, t)
>> sum((Y - A * exp(-alpha * t))^2), A, alpha, MoreArgs = list(...))
>> <environment: 0x1361f40>
>>  > Y <- 1:5; t <- 3
>>  > outer(1:3, 1:2, SSD, Y, t)
>>           [,1]     [,2]
>> [1,] 53.51878 54.92567
>> [2,] 52.06235 54.85140
>> [3,] 50.63071 54.77719
>>  > outer(1:3, 1:2, Vectorize(ssd, c("A", "alpha")), Y, t)
>>           [,1]     [,2]
>> [1,] 53.51878 54.92567
>> [2,] 52.06235 54.85140
>> [3,] 50.63071 54.77719
>>  >
>>
>> [There are a couple of minor design issues around syntax -- what is 
>> the best way of specifying the arguments to vectorize? (e.g., what 
>> about an interface that allowed Vectorize(ssd ~ A * alpha)?), and 
>> should the function name rather than the definition appear in the 
>> result of Vectorize()?  But those are issues of secondary importance.]
>>
>> I have to confess I don't really understand how environments work with 
>> functions, so I don't know if this Vectorize() function will work in 
>> general.  What is the appropriate environment for returned value of 
>> Vectorize()?  Is this approach to creating a Vectorize() function on 
>> the right tack at all?  Any other improvements or fixes?
>>
>> -- Tony Plate
>>
>>
>> Peter Dalgaard wrote:
>>
>>> Thomas Lumley <tlumley at u.washington.edu> writes:
>>>
>>>
>>>> On Sun, 30 Oct 2005, Jonathan Rougier wrote:
>>>>
>>>>
>>>>> I'm not sure about this.  Perhaps I am a dinosaur, but my feeling is
>>>>> that if people are writing functions in R that might be subject to
>>>>> simple operations like outer products, then they ought to be writing
>>>>> vectorised functions!
>>>>
>>>>
>>>> I would agree.  How about an oapply() function that does multiway 
>>>> (rather than just two-way) outer products.  Basing the name on 
>>>> "apply" would emphasize the similarity to other flexible, not 
>>>> particularly optimized second-order functions.
>>>
>>>
>>>
>>> In fairness, it should probably be said that not all problems
>>> vectorize naturally. One example is
>>>
>>>   ssd <- function(A,alpha) sum((Y - A*exp(-alpha*t))^2)
>>>
>>> However, it should be worth noting that with the mapply() function at
>>> hand, it is pretty easy to turn a non-vectorized function into a
>>> vectorized one.
>>>   SSD <- function(A,alpha) mapply(ssd, A, alpha)
>>>
>>> (Anybody want to try their hand on writing a general Vectorize()
>>> function? I.e. one that allowed
>>>
>>>    outer(Avec, alphavec, Vectorize(ssd))
>>>
>>> to work.)
>>
>>
>> ______________________________________________
>> R-devel at r-project.org mailing list
>> https://stat.ethz.ch/mailman/listinfo/r-devel
> 
>


From murdoch at stats.uwo.ca  Mon Oct 31 21:52:32 2005
From: murdoch at stats.uwo.ca (Duncan Murdoch)
Date: Mon, 31 Oct 2005 15:52:32 -0500
Subject: [Rd] [R] unvectorized option for outer()
In-Reply-To: <43666D4D.7070602@acm.org>
References: <8B08A3A1EA7AAC41BE24C750338754E69FDF14@HERMES.demogr.mpg.de>	<43629490.9060204@acm.org>	<971536df0510281643u50929fa6rf097c40948700804@mail.gmail.com>	<4364A4FC.2030400@durham.ac.uk>	<Pine.LNX.4.63a.0510301300260.28148@homer23.u.washington.edu>	<x2y84amyv4.fsf@turmalin.kubism.ku.dk>
	<43666D4D.7070602@acm.org>
Message-ID: <43668410.8060403@stats.uwo.ca>

Here's my entry for Vectorize:

Vectorize <- function(FUN, vectorize.args = names(fargs)) {

      fargs <- formals(FUN)
      dovec <- match(vectorize.args, names(fargs))

      FUNV <- function() { # will set the formals below
         args <- as.list(match.call())[-1]
         args <- lapply(args, eval, parent.frame())
      	mapply.args <- c(FUN = FUN,
      			    args[dovec],
      			    MoreArgs = list(args[-dovec]))
         do.call("mapply", mapply.args)
      }
      formals(FUNV) <- fargs
      FUNV
  }


I *think* this works fairly generally, but I'm not 100% sure of that, 
especially about how it handles default parameter values, e.g. in a 
weird case like

 > ssd <- function(A,alpha,Y,t=Time) {
+     Time <- 3
+     sum((Y - A*exp(-alpha*t))^2)
+ }
 >
 > SSD <- Vectorize(ssd, c("A", "alpha"))

It appears to give the right answer:

 > outer(1:3, 1:2, SSD, Y)
          [,1]     [,2]
[1,] 53.51878 54.92567
[2,] 52.06235 54.85140
[3,] 50.63071 54.77719

but that's a bit of a surprise, and I wouldn't be too surprised if there 
are other weird examples where it screws up.

Duncan Murdoch





On 10/31/2005 2:15 PM, Tony Plate wrote:
> When I read the preface to The Blue Book (The New S Language, Becker, 
> Chambers & Wilks) I see comments along the lines of "high-level 
> language", "primary goal of the S environment is to enable and encourage 
> good data analysis", etc.  While vectorization is a great feature of S 
> (and R), I don't see it, or programming efficiency, mentioned there at all.
> 
> Nonetheless, Peter's suggestion of a general Vectorize() function is 
> intriguing, and could be useful with other functions that trip users up 
> in the same way.  (Also, I do apprecicate Peter pointing out that not 
> all functions vectorize naturally, as in his example density 
> calculations over grids of parameters).
> 
> So, here's a first pass at a general Vectorize() function:
> 
> Vectorize <- function(FUN, vectorize.args) {
>      if (!all(is.element(vectorize.args, names(formals(FUN)))))
>          stop("some args to vectorize are not args of FUN")
>      FUNV <- eval(substitute(function(x, ...) mapply(FUN, x, 
> MoreArgs=list(...)), list(FUN=FUN)))
>      formals(FUNV) <- formals(FUNV)[c(rep(1, length(vectorize.args)), 2)]
>      names(formals(FUNV))[seq(along=vectorize.args)] <- vectorize.args
>      body(FUNV) <- body(FUNV)[c(1, 2, rep(3, length(vectorize.args)), 4)]
>      body(FUNV)[seq(3,len=length(vectorize.args))] <- 
> lapply(vectorize.args, as.name)
>      FUNV
> }
> 
> ssd <- function(A,alpha,Y,t) sum((Y - A*exp(-alpha*t))2)
> # SSD is a vectorized version of ssd
> SSD <- function(Avec, alphavec, ...) mapply(ssd, Avec, alphavec, 
> MoreArgs=list(...))
> # Vectorize(ssd, c("A", "alpha")) should produce
> # function(A, alpha, ...) mapply(ssd, A, alpha, MoreArgs=list(...))
> Y <- 1:5; t <- 3
> outer(1:3, 1:2, SSD, Y, t)
> outer(1:3, 1:2, Vectorize(ssd, c("A", "alpha")), Y, t)
> 
>  > # transcript of running the above commands
>  > Vectorize(ssd, c("A", "alpha"))
> function (A, alpha, ...)
> mapply(function (A, alpha, Y, t)
> sum((Y - A * exp(-alpha * t))^2), A, alpha, MoreArgs = list(...))
> <environment: 0x1361f40>
>  > Y <- 1:5; t <- 3
>  > outer(1:3, 1:2, SSD, Y, t)
>           [,1]     [,2]
> [1,] 53.51878 54.92567
> [2,] 52.06235 54.85140
> [3,] 50.63071 54.77719
>  > outer(1:3, 1:2, Vectorize(ssd, c("A", "alpha")), Y, t)
>           [,1]     [,2]
> [1,] 53.51878 54.92567
> [2,] 52.06235 54.85140
> [3,] 50.63071 54.77719
>  >
> 
> [There are a couple of minor design issues around syntax -- what is the 
> best way of specifying the arguments to vectorize? (e.g., what about an 
> interface that allowed Vectorize(ssd ~ A * alpha)?), and should the 
> function name rather than the definition appear in the result of 
> Vectorize()?  But those are issues of secondary importance.]
> 
> I have to confess I don't really understand how environments work with 
> functions, so I don't know if this Vectorize() function will work in 
> general.  What is the appropriate environment for returned value of 
> Vectorize()?  Is this approach to creating a Vectorize() function on the 
> right tack at all?  Any other improvements or fixes?
> 
> -- Tony Plate
> 
> 
> Peter Dalgaard wrote:
>> Thomas Lumley <tlumley at u.washington.edu> writes:
>> 
>> 
>>>On Sun, 30 Oct 2005, Jonathan Rougier wrote:
>>>
>>>
>>>>I'm not sure about this.  Perhaps I am a dinosaur, but my feeling is
>>>>that if people are writing functions in R that might be subject to
>>>>simple operations like outer products, then they ought to be writing
>>>>vectorised functions!
>>>
>>>I would agree.  How about an oapply() function that does multiway (rather 
>>>than just two-way) outer products.  Basing the name on "apply" would 
>>>emphasize the similarity to other flexible, not particularly optimized 
>>>second-order functions.
>> 
>> 
>> In fairness, it should probably be said that not all problems
>> vectorize naturally. One example is
>> 
>>   ssd <- function(A,alpha) sum((Y - A*exp(-alpha*t))^2)
>> 
>> However, it should be worth noting that with the mapply() function at
>> hand, it is pretty easy to turn a non-vectorized function into a
>> vectorized one. 
>> 
>>   SSD <- function(A,alpha) mapply(ssd, A, alpha)
>> 
>> (Anybody want to try their hand on writing a general Vectorize()
>> function? I.e. one that allowed
>> 
>>    outer(Avec, alphavec, Vectorize(ssd))
>> 
>> to work.)
> 
> ______________________________________________
> R-devel at r-project.org mailing list
> https://stat.ethz.ch/mailman/listinfo/r-devel


From mikek at cires.colorado.edu  Mon Oct 31 22:34:07 2005
From: mikek at cires.colorado.edu (mikek@cires.colorado.edu)
Date: Mon, 31 Oct 2005 22:34:07 +0100 (CET)
Subject: [Rd] Minor typos with UseMethod docs (PR#8269)
Message-ID: <20051031213407.4C3802388B@slim.kubism.ku.dk>

Full_Name: Mike Kay
Version: R-patched
OS: Linux
Submission from: (NULL) (137.75.70.37)


Hi,

The following patch cleans up some grammar in the docs for UseMethod
(library/base/help/UseMethod)

-mike

--- UseMethod   2005-09-28 20:06:39.000000000 +0000
+++ /tmp/UseMethod      2005-10-31 21:21:05.534708720 +0000
@@ -5,7 +5,7 @@
 Description:

      R possesses a simple generic function mechanism which can be used
-     for an object-oriented style of programming.  Method despatch
+     for an object-oriented style of programming.  Method dispatch
      takes place based on the class of the first argument to the
      generic function or on the object supplied as an argument to
      'UseMethod' or 'NextMethod'.
@@ -34,12 +34,12 @@
      have a class attribute, it has an implicit class.  Matrices and
      arrays have class '"matrix"' or'"array"' followed by the class of
      the underlying vector. Most vectors have class the result of
-     'mode(x)', expect that integer vectors have class 'c("integer",
+     'mode(x)', except that integer vectors have class 'c("integer",
      "numeric")' and real vectors have class 'c("double", "numeric")'.

      When a generic function 'fun' is applied to an object with class
      attribute 'c("first", "second")', the system searches for a
-     function called 'fun.first' and, if it finds it, applied it to the
+     function called 'fun.first' and, if it finds it, applies it to the
      object.  If no such function is found a function called
      'fun.second' is tried.  If no class name produces a suitable
      function, the function 'fun.default' is used, if it exists, or an


