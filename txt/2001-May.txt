From Kurt.Hornik@ci.tuwien.ac.at  Tue May  1 09:18:45 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 1 May 2001 10:18:45 +0200
Subject: [Rd] Re: [R] Re: two new packages
In-Reply-To: <5.0.0.25.1.20010501083348.03b2bb60@pop.jcu.edu.au>
References: <5.0.2.1.2.20010427224918.0193d588@mcmail.cis.mcmaster.ca>
 <5.0.0.25.1.20010501083348.03b2bb60@pop.jcu.edu.au>
Message-ID: <15086.29029.974238.133863@mithrandir.hornik.net>

>>>>> Richard Rowe writes:

> At 12:18 30/04/01 -0400, "Timothy H. Keitt" <Timothy.Keitt@StonyBrook.Edu> 
> wrote:
>> Great!  I think we should encourage people to upload complete, but not yet 
>> fully
>> tested packages to the "devel" section of CRAN.  It gets really hard to 
>> keep track
>> of source that is scattered all over the 'net.
>> 
>> Cheers,
>> Tim
>> 
>> John Fox wrote:
>> 
>> > I've prepared preliminary versions of two packages that I plan eventually
>> > to contribute to CRAN:

> I fear Tim's idea could lead to mayhem with a multitude of
> 'built-for-a-job, I-can-use-it' contributions sitting on the devel
> section.  Devel is being used as a beta test repository by people who
> seem to eventually produce full packages.

> Perhaps a 'midden' might fill Tim's requirements, there is something
> similar for Delphi where people contribute code.  Every bit of code
> would need to be identified logically and with the author's name and
> with appropriate copyright declarations (in Delphi many producers of
> snippets seem very proud and possessive of their frequently uninspired
> code ... the really good stuff comes unrestricted GNU style).  My gut
> feeling is that unless contributors were VERY disciplined this could
> be a problem ... and if the lump is worthwhile it will lead to a
> package in the hands of a disciplined author.

> Maybe people with 'bits' could get together and produce an e1071 type
> package?,

Richard:

At the r-core part of DSC-2001 we also talked about a ``useful bits of
code'' repository, so something along the lines of your suggestion is
coming along ...

Best,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Tue May  1 14:34:06 2001
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Tue, 01 May 2001 15:34:06 +0200
Subject: [Rd] graphics library fltk
Message-ID: <3AEEBB4E.714CF7B5@univie.ac.at>

we still do not have dynamic graphics in R natively.

i just found out about a widget library called fltk
info is at
www.fltk.org

it has all the stuff r currently can do only through tcl/tk or
(as i do it) excel: sliders, knobs, spinners and so on.

it is multiplatform, there are production versions for
unixen and windows, and there is a beta for macs.

this could be a way of getting some of luke's dynamic graphics tools
into R more easily.
  
perhaps this looks interesting enough that some r-core member will have
a look at it.


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue May  1 14:43:10 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 01 May 2001 06:43:10 -0700
Subject: [Rd] graphics library fltk
In-Reply-To: Erich Neuwirth's message of "Tue, 01 May 2001 15:34:06 +0200"
References: <3AEEBB4E.714CF7B5@univie.ac.at>
Message-ID: <87u235uqvl.fsf@jeeves.blindglobe.net>

>>>>> "EN" == Erich Neuwirth <erich.neuwirth@univie.ac.at> writes:

    EN> it is multiplatform, there are production versions for unixen
    EN> and windows, and there is a beta for macs.

    EN> this could be a way of getting some of luke's dynamic graphics
    EN> tools into R more easily.

Thomas has already shown how to do this with XLispStat with sockets;
we also have 2 ways to do this using Java/Java3d, both through sockets
as well as RJava.  Of course, this relies on RJava being stable, which
is a stretch of the imagination.

Note that everything you ask for is in both settings (XLispStat as
well as Java...).  I'm only not sure about the Mac interfaces...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (friday is unknown) --------
FHCRC: M--W : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy
CFAR:  ??   : 206-731-3647 (fax=3694)|Email is far better than phone
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  1 15:50:28 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 1 May 2001 15:50:28 +0100 (GMT Daylight Time)
Subject: [Rd] graphics library fltk
In-Reply-To: <3AEEBB4E.714CF7B5@univie.ac.at>
Message-ID: <Pine.WNT.4.31.0105011543000.1176-100000@gannet>

On Tue, 1 May 2001, Erich Neuwirth wrote:

> we still do not have dynamic graphics in R natively.

We do not intend to: that's what things like Duncan Murdoch's Rgl and
Rggobi are for.  It's called not re-inventing the wheel.

> i just found out about a widget library called fltk
> info is at
> www.fltk.org
>
> it has all the stuff r currently can do only through tcl/tk or
> (as i do it) excel: sliders, knobs, spinners and so on.
>
> it is multiplatform, there are production versions for
> unixen and windows, and there is a beta for macs.

That is equally true of the Graphapp toolkit we use (apart from the Mac
part).  The hard bit is to find a way to describe how to use this from
an R interface.  Things like the placement of widgets are in my experience
much easier with visual tools.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue May  1 18:49:31 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue, 01 May 2001 13:49:31 -0400
Subject: [Rd] graphics library fltk
In-Reply-To: <Pine.WNT.4.31.0105011543000.1176-100000@gannet>
References: <3AEEBB4E.714CF7B5@univie.ac.at> <Pine.WNT.4.31.0105011543000.1176-100000@gannet>
Message-ID: <7kstetsk8qsv4o04kbq84irjb31tvn68vv@4ax.com>

On Tue, 1 May 2001 15:50:28 +0100 (GMT Daylight Time), you wrote in
message <Pine.WNT.4.31.0105011543000.1176-100000@gannet>:

>On Tue, 1 May 2001, Erich Neuwirth wrote:
>
>> we still do not have dynamic graphics in R natively.
>
>We do not intend to: that's what things like Duncan Murdoch's Rgl and
>Rggobi are for.  It's called not re-inventing the wheel.

I guess there's a question of what "natively" means.  I don't think
dynamic graphics should be in the base, but I do think it should be
possible to install a package to get access to them.  That's what I'm
aiming for with RGL.

It's considerably more difficult for the user to install a separate
system (Java, GGobi, or whatever).  Just about all free software
packages are fairly unfriendly about installation, so learning two
sets of rules (both R's and the other's) is a substantial barrier to
entry.  There are also the different conventions about user
interaction with the 2nd package to learn.

To help people writing such packages, it would be nice if the
underpinnings to allow dynamic graphics were in the base, e.g. exposed
data in graphics objects that can be changed, and the ability to
request a redraw of the current plot once the data have changed.
("Data" here is not just the points being plotted, I'm thinking of all
the parts of the graph:  the axes, labels, transformations, etc.)

We don't want to re-invent wheels, but I think we do want to
facilitate experimentation with graphics. 

>The hard bit is to find a way to describe how to use this from
>an R interface.  Things like the placement of widgets are in my experience
>much easier with visual tools.

That's definitely true, but I don't see why a package that provided
some visual tools couldn't be written.  I'm not asking someone to
write it right away (nor volunteering!), but I think it's something
that would be easier if the graphics model changed a bit, and I know
that's something that Ross and Paul are thinking about a lot.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May  1 20:24:23 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 1 May 2001 21:24:23 +0200 (MET DST)
Subject: [Rd] Re: [R] Crazy plots of time-series against dates (PR#930)
Message-ID: <200105011924.VAA02145@pubhealth.ku.dk>

"Marco Taboga" <mtaboga@tiscalinet.it> writes:

> OK, it works.  xlab and ylab had to be set properly.
> If you want to see what actually goes on, try:
> a<-chron(1:2000)
> b<-1:2000
> plot(a,b,type="l")
> 

One of the standard blunders with R's lazy evaluation and substitute is
to change the value of part of a substitute expression before it is
evaluated. I think the chron maintainer even inserted a note in the
FAQ about that (Hi, Kurt ;) )

In plot.times insert the line below to fix it

    if (!is.null(type <- dots$type)) 
        if (any(type == c("l", "b", "o"))) {
            xlab ; ylab  # force promises
            nas <- is.na(x)
            ...

Cc'ed to R-bugs so that it gets filed and eventually fixed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From MALIKSA@apci.com  Wed May  2 14:51:41 2001
From: MALIKSA@apci.com (MALIKSA@apci.com)
Date: Wed, 2 May 2001 15:51:41 +0200 (MET DST)
Subject: [Rd] (PR#931)
Message-ID: <200105021351.PAA14786@pubhealth.ku.dk>

Hi

I have installed the R package on my NT machine, but I cannot get the TCL
demos to work, like demo(tktttest). There was nothing in the install about
this

Atique Malik


+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  2 15:10:09 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 2 May 2001 16:10:09 +0200 (MET DST)
Subject: [Rd] (PR#931)
Message-ID: <200105021410.QAA15096@pubhealth.ku.dk>

On Wed, 2 May 2001 MALIKSA@apci.com wrote:

> Hi
>
> I have installed the R package on my NT machine, but I cannot get the TCL
> demos to work, like demo(tktttest). There was nothing in the install about

It's demo(tkttest), not demo(tktttest)!

> this

There *are* detailed instructions in the README *and* in the rw-FAQ,
and there is no file `the install'.  Please do read the documentation
provided.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed May  2 21:16:50 2001
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 2 May 2001 22:16:50 +0200 (MET DST)
Subject: [Rd] subdirs in package src dir
Message-ID: <Pine.OSF.4.21.0105022157360.17798-100000@zidsrv.sci.uni-klu.ac.at>


Sometimes I find it useful to put C or Fortran sources under subdirs of 
"mypackage/src", especially to distinguish between my own files and
e.g. lapack or blas sources. To get this working I would need a Makefile
in my package which contains the appropriate dependencies to these sources
in subdirs. 

But I don't want to add a complete Makefile, I want only a Makevars file
containing e.g. "OBJS=myfunc.o lapack/somefunc.o ...", currently this
would not work, because nobody looks into Makevars for an OBJS
variable. The following patch adds this functionality to the INSTALL
script, allowing to add an OBJS (or SRCS) variable to Makeconf. I tested
it with R 1.2.1, 1.2.2. and 1.2.3 on Linux, FreeBSD, Tru64 and Solaris.

But of course it is only a suggestion.

(I hope the TABs in the Makefile snippets below are not mangled by my mail
program) 

--- ./etc/Makefile.in.objs-patch	Sat Dec  2 11:25:28 2000
+++ ./etc/Makefile.in	Sat Mar  3 17:53:20 2001
@@ -10,7 +10,7 @@
 
 include $(top_builddir)/Makeconf
 
-SOURCES = Makeconf.in Makeconf-tests.in Renviron.in
+SOURCES = Makeconf.in Makeconf-tests.in Renviron.in Makefrag.in
 OBJECTS = $(SOURCES:.in=)
 distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
 DISTFILES = \
--- ./etc/Makefrag.in.objs-patch	Sat Mar  3 17:53:20 2001
+++ ./etc/Makefrag.in	Sat Mar  3 17:53:20 2001
@@ -0,0 +1,5 @@
+echoobjs:
+	@echo $(OBJS)
+
+echosrcs:
+	@echo $(SRCS)
--- ./src/scripts/INSTALL.in.objs-patch	Tue Feb 20 22:37:53 2001
+++ ./src/scripts/INSTALL.in	Sat Mar  3 17:56:05 2001
@@ -243,7 +243,18 @@
 	cd ..
       else
         cd src;
-          srcs=`ls *.[cfC] *.cc *.cpp 2>/dev/null`
+          srcs=""
+          objs=""
+          if [ -r Makevars ]; then
+            srcs=`make -s -f Makevars -f ${R_HOME}/etc/Makefrag echosrcs` 
+            if [ -z "${srcs}" ]; then
+              objs=`make -s -f Makevars -f ${R_HOME}/etc/Makefrag echoobjs` 
+              srcs=${objs}
+            fi
+          fi
+          if [ -z "${srcs}" ]; then
+            srcs=`ls *.[cfC] *.cc *.cpp 2>/dev/null`
+          fi
 	  if test -n "${srcs}"; then
 	    sh ${R_HOME}/bin/SHLIB -o ${pkg}.@SHLIB_EXT@ ${srcs} \
 	      && cp *.@SHLIB_EXT@ ${lib}/${pkg}/libs \


Albrecht

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  3 07:32:13 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 3 May 2001 07:32:13 +0100 (BST)
Subject: [Rd] subdirs in package src dir
In-Reply-To: <Pine.OSF.4.21.0105022157360.17798-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.31.0105030720510.2475-100000@auk.stats>

On Wed, 2 May 2001, Albrecht Gebhardt wrote:

>
> Sometimes I find it useful to put C or Fortran sources under subdirs of
> "mypackage/src", especially to distinguish between my own files and
> e.g. lapack or blas sources. To get this working I would need a Makefile
> in my package which contains the appropriate dependencies to these sources
> in subdirs.
>
> But I don't want to add a complete Makefile, I want only a Makevars file
> containing e.g. "OBJS=myfunc.o lapack/somefunc.o ...", currently this
> would not work, because nobody looks into Makevars for an OBJS
> variable.

Err... that's not how I read the following section in SHLIB.in

makeobjs="OBJS=\"${objs}\""
if test -r Makevars; then
  makefiles="-f Makevars ${makefiles}"
  if grep '^ *OBJS *=' Makevars >/dev/null; then
    makeobjs=
  fi
fi

The intention seems to be that OBJS is looked for in Makevars, and if
it does not work for you it needs fixing in SHLIB, not INSTALL.
It *did* work for me when I tried it:

auk% cat foo/src/Makevars
OBJS=foo1.o
auk% Rdev INSTALL foo
Installing source package `foo' ...
 libs
gcc -I/opt/R/R-devel/include  -I/usr/local/include   -fPIC  -O2 -g -Wall
-pedantic -c foo1.c -o foo1.o
gcc -G  -o foo.so foo1.o -L/usr/local/lib
...
auk% ls foo/src
Makevars  foo.so*   foo1.c    foo1.o    foo2.c


[...]

> --- ./etc/Makefrag.in.objs-patch	Sat Mar  3 17:53:20 2001
> +++ ./etc/Makefrag.in	Sat Mar  3 17:53:20 2001
> @@ -0,0 +1,5 @@
> +echoobjs:
> +	@echo $(OBJS)
> +
> +echosrcs:
> +	@echo $(SRCS)

There is no such file in the current R sources that I can find: are
you working on the latest version?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Thu May  3 08:48:48 2001
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Thu, 3 May 2001 09:48:48 +0200 (MET DST)
Subject: [Rd] subdirs in package src dir
In-Reply-To: <Pine.GSO.4.31.0105030720510.2475-100000@auk.stats>
Message-ID: <Pine.OSF.4.21.0105030913250.26989-100000@zidsrv.sci.uni-klu.ac.at>

On Thu, 3 May 2001, Prof Brian D Ripley wrote:

> On Wed, 2 May 2001, Albrecht Gebhardt wrote:
> 
> > ...
>
> The intention seems to be that OBJS is looked for in Makevars, and if
> it does not work for you it needs fixing in SHLIB, not INSTALL.
> It *did* work for me when I tried it:
> ...

ok, if it is working in R-devel I'm completely happy. I was working with
1.2.x, and it doesn't work there for me (at least until 1.2.2, I didn't
try an unmodified 1.2.3)

> [...]
> 
> > --- ./etc/Makefrag.in.objs-patch	Sat Mar  3 17:53:20 2001
> ...
> There is no such file in the current R sources that I can find: are
> you working on the latest version?
> 

see above. Makefrag was only part of my workaround for 1.2.x.

I will check it once more, also with R-devel and come back with the
results later. 

Thanks,

Albrecht

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  3 09:02:36 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 3 May 2001 09:02:36 +0100 (BST)
Subject: [Rd] subdirs in package src dir
In-Reply-To: <Pine.OSF.4.21.0105030913250.26989-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.31.0105030859180.22611-100000@toucan.stats>

On Thu, 3 May 2001, Albrecht Gebhardt wrote:

> On Thu, 3 May 2001, Prof Brian D Ripley wrote:
>
> > On Wed, 2 May 2001, Albrecht Gebhardt wrote:
> >
> > > ...
> >
> > The intention seems to be that OBJS is looked for in Makevars, and if
> > it does not work for you it needs fixing in SHLIB, not INSTALL.
> > It *did* work for me when I tried it:
> > ...
>
> ok, if it is working in R-devel I'm completely happy. I was working with
> 1.2.x, and it doesn't work there for me (at least until 1.2.2, I didn't
> try an unmodified 1.2.3)

It worked for me in 1.2.3 as well as R-devel, and also specifying files in
a subdirectory. I don't have any earlier versions up at present, but
I can't see any recent changes on this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Thu May  3 09:58:26 2001
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Thu, 3 May 2001 10:58:26 +0200 (MET DST)
Subject: [Rd] subdirs in package src dir
In-Reply-To: <Pine.GSO.4.31.0105030859180.22611-100000@toucan.stats>
Message-ID: <Pine.OSF.4.21.0105031053010.26989-100000@zidsrv.sci.uni-klu.ac.at>

On Thu, 3 May 2001, Prof Brian Ripley wrote:

> On Thu, 3 May 2001, Albrecht Gebhardt wrote:
> ...
> > ok, if it is working in R-devel I'm completely happy. I was working with
> > 1.2.x, and it doesn't work there for me (at least until 1.2.2, I didn't
> > try an unmodified 1.2.3)
> 
> It worked for me in 1.2.3 as well as R-devel, and also specifying files in
> a subdirectory. I don't have any earlier versions up at present, but
> I can't see any recent changes on this.

Ok I found it, I had "SRCS=myfunc.c subdir/myfunc.f" in my Makevars file,
now it works using OBJS=... (I thought I did use OBJS but I did not
recognize that I used a SRCS variable instead, sorry)

Albrecht 

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Fri May  4 16:22:32 2001
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Fri, 4 May 2001 17:22:32 +0200 (MET DST)
Subject: [Rd] scoping error in xy.coords (PR#932)
Message-ID: <200105041522.RAA11759@pubhealth.ku.dk>

Hola!

> rm(list=ls(all=TRUE))

> x <- 1:20
> y <- 1+x+rnorm(x)

> xy.coords(y  ~ x,NULL)

... expected output, correct, but when called from inside lowess:

>   lowess(y ~ x)
Error in xy.coords(x, y) : x and y lengths differ
> debug(xy.coords)
>   lowess(y ~ x)
debugging in: xy.coords(x, y)

... long listing deleted

    if (is.language(x)) {
        if (inherits(x, "formula") && length(x) == 3) {
            ylab <- deparse(x[[2]])
            xlab <- deparse(x[[3]])
            y <- eval(x[[2]], parent.frame())
            x <- eval(x[[3]], parent.frame())
        }
        else stop("invalid first argument")
    }
    else
... deleted
debug: if (inherits(x, "formula") && length(x) == 3) {
    ylab <- deparse(x[[2]])
    xlab <- deparse(x[[3]])
    y <- eval(x[[2]], parent.frame())
    x <- eval(x[[3]], parent.frame())
} else stop("invalid first argument")
Browse[1]> n
debug: ylab <- deparse(x[[2]])
Browse[1]> n
debug: xlab <- deparse(x[[3]])
Browse[1]> n
debug: y <- eval(x[[2]], parent.frame())
Browse[1]> n
debug: x <- eval(x[[3]], parent.frame())
Browse[1]> n
debug: if (length(x) != length(y)) {
    if (recycle) {
        if ((nx <- length(x)) < (ny <- length(y))) 
            x <- rep(x, length = ny)
        else y <- rep(y, length = nx)
    }
    else stop("x and y lengths differ")
}
Browse[1]> x
y ~ x
Browse[1]> y
NULL

x and y have their original values from the call, the evaluation 
inside is.formula .... have failed.

Browse[1]> c
Error in xy.coords(x, y) : x and y lengths differ



Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May  4 16:40:48 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 4 May 2001 08:40:48 -0700 (PDT)
Subject: [Rd] scoping error in xy.coords (PR#932)
In-Reply-To: <200105041522.RAA11759@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0105040829370.73704-100000@homer25.u.washington.edu>

On Fri, 4 May 2001 kjetilh@umsanet.edu.bo wrote:

> Hola!
>
> > rm(list=ls(all=TRUE))
>
> > x <- 1:20
> > y <- 1+x+rnorm(x)
>
> > xy.coords(y  ~ x,NULL)
>
> ... expected output, correct, but when called from inside lowess:
>
> >   lowess(y ~ x)
> Error in xy.coords(x, y) : x and y lengths differ


If you don't call them x and y it works
> x<-1:10
> y<-1:10
> lowess(y~x)
Error in xy.coords(x, y) : x and y lengths differ
> z<-y
> w<-x
> lowess(z~w)
$x
 [1]  1  2  3  4  5  6  7  8  9 10

$y
 [1]  1  2  3  4  5  6  7  8  9 10

The problem is that the formula is evaluated in the parent frame, where y
evaluates to NULL, and x evaluates to y~x, rather than in the global
environment where they would both evaluate to vectors.

In order to handle formulas correctly I think xy.coords needs to use the
same sort of indirect evaluation as model.frame: eg
   xy <-substitute(xy.coords(X,Y),list(X=substitute(x),Y=substitute(y)))
   xy<-eval(xy,parent.frame())
works as a replacement for the first two lines of lowess().  I hadn't
realised that xy.coords() was supposed to handle formulas, and since it
doesn't have a data= argument it can't do it very well.

This seems a bit drastic, given the number of times xy.coords is used.
Perhaps there's a simpler solution.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle
^^^^^^^^^^^^^^^^^^^^^^^^
 NOTE NEW EMAIL ADDRESS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May  4 17:06:23 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 May 2001 18:06:23 +0200
Subject: [Rd] scoping error in xy.coords (PR#932)
In-Reply-To: Thomas Lumley's message of "Fri, 4 May 2001 08:40:48 -0700 (PDT)"
References: <Pine.A41.4.33.0105040829370.73704-100000@homer25.u.washington.edu>
Message-ID: <x2u231p08w.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> evaluates to NULL, and x evaluates to y~x, rather than in the global
> environment where they would both evaluate to vectors.
> 
> In order to handle formulas correctly I think xy.coords needs to use the
> same sort of indirect evaluation as model.frame: eg
>    xy <-substitute(xy.coords(X,Y),list(X=substitute(x),Y=substitute(y)))
>    xy<-eval(xy,parent.frame())
> works as a replacement for the first two lines of lowess().  I hadn't
> realised that xy.coords() was supposed to handle formulas, and since it
> doesn't have a data= argument it can't do it very well.
> 
> This seems a bit drastic, given the number of times xy.coords is used.
> Perhaps there's a simpler solution.

Perhaps use the new formula environments in xy.coords? Seems to work


        if (inherits(x, "formula") && length(x) == 3) {
            ylab <- deparse(x[[2]])
            xlab <- deparse(x[[3]])
            y <- eval(x[[2]], environment(x), parent.frame())
            x <- eval(x[[3]], environment(x), parent.frame())
	}

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May  4 17:18:46 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 4 May 2001 09:18:46 -0700 (PDT)
Subject: [Rd] scoping error in xy.coords (PR#932)
In-Reply-To: <x2u231p08w.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105040918080.73704-100000@homer25.u.washington.edu>

On 4 May 2001, Peter Dalgaard BSA wrote:
>
> Perhaps use the new formula environments in xy.coords? Seems to work

Yes, much better.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jorvutom@icaro.dic.uchile.cl  Sat May  5 21:17:38 2001
From: jorvutom@icaro.dic.uchile.cl (jorvutom@icaro.dic.uchile.cl)
Date: Sat, 5 May 2001 22:17:38 +0200 (MET DST)
Subject: [Rd] read.xport bug of foreign pkg (PR#933)
Message-ID: <200105052017.WAA15889@pubhealth.ku.dk>

Full_Name: Jorge A. Tomasevic
Version: 1.2.2
OS: Win98
Submission from: (NULL) (146.83.23.177)


As i'm not an "R-expert-user", i will describe what i do:

i) open Rgui.exe
ii) ivoke foreign library : >library(foreign)
iii) i try to read an .xpt file (from Systat 9): >datos <-
read.xport('ipoisson.xpt')
iv) then the program crashes. Norton CrashGuard alerts the multiple failures:

Windows 98 Version 4.10.1998
RGUI failure in no-valid page module KERNEL32.DLL of 0177:bff7b983.
Regiters:
EAX=00000020 CS=0177 EIP=bff7b983 EFLGS=00010202
EBX=0270f150 SS=017f ESP=0270f108 EBP=0270f120
ECX=78037c48 DS=017f ESI=00000020 FS=47b7
EDX=00000000 ES=017f EDI=00000000 GS=0000
Bytes on CS:EIP:
,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x

Pile errors :
,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x


i'm afraid that this is some kind of incompatibility bug, but i hope that it
could be 
repaired easily.

Hopping to help somehow, 


Jorge A. Tomasevic
University of Chile 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sat May  5 21:42:22 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 05 May 2001 15:42:22 -0500
Subject: [Rd] read.xport bug of foreign pkg (PR#933)
In-Reply-To: <200105052017.WAA15889@pubhealth.ku.dk>
References: <200105052017.WAA15889@pubhealth.ku.dk>
Message-ID: <6ritjf1qa9.fsf@franz.stat.wisc.edu>

jorvutom@icaro.dic.uchile.cl writes:

> Full_Name: Jorge A. Tomasevic
> Version: 1.2.2
> OS: Win98
> Submission from: (NULL) (146.83.23.177)
> 
> 
> As i'm not an "R-expert-user", i will describe what i do:
> 
> i) open Rgui.exe
> ii) ivoke foreign library : >library(foreign)
> iii) i try to read an .xpt file (from Systat 9): >datos <-
> read.xport('ipoisson.xpt')
> iv) then the program crashes. Norton CrashGuard alerts the multiple failures:
> 
> Windows 98 Version 4.10.1998
> RGUI failure in no-valid page module KERNEL32.DLL of 0177:bff7b983.
> Regiters:
> EAX=00000020 CS=0177 EIP=bff7b983 EFLGS=00010202
> EBX=0270f150 SS=017f ESP=0270f108 EBP=0270f120
> ECX=78037c48 DS=017f ESI=00000020 FS=47b7
> EDX=00000000 ES=017f EDI=00000000 GS=0000
> Bytes on CS:EIP:
> ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x
> 
> Pile errors :
> ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x
> 
> 
> i'm afraid that this is some kind of incompatibility bug, but i hope that it
> could be 
> repaired easily.
> 
> Hopping to help somehow, 

Does Systat create an XPORT file in the SAS format or in its own
format?  The read.xport function reads the SAS XPORT format.  We would
not expect it to read Systat files.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Mon May  7 06:15:05 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Mon, 7 May 2001 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200105070515.HAA11148@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 930 *
Subject: Re: [R] Crazy plots of time-series against dates
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 May 2001 21:33:53 +0200
--error in chron package
* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
--Only on a specific sample file: send to maintainer.
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

* PR# 899 *
Subject: documentation problems in str.Rd
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
Date: Sat, 7 Apr 2001 23:08:23 +0200

Directory:  Graphics

* PR# 917 *
Subject: boxplot
From: skala@incoma.cz
Date: Fri, 20 Apr 2001 08:43:29 +0200 (MET DST)
--fixed for 1.2.3  (one could consider the bug an `accidental feature',
--		  but the documentation and the other S implementations 
--		  differ).
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 924 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:58:17 +0200 (MET DST)
--same as 923
* PR# 923 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:56:59 +0200 (MET DST)
--too little information

Directory:  Language

* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 929 *
Subject:  Segmentation fault linked to memory? 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 30 Apr 2001 14:34:11 +0100 (BST)
--looks like 32-bit integer overflow error in counting allocation size
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 862 *
Subject: Wrong sign for Pearson residuals
From: faraway@umich.edu
Date: Mon, 5 Mar 2001 18:04:34 +0100 (MET)

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
--Not applied for 1.2.3 (why?)
* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
--(Should be taken care of for 1.2.3).
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500

Directory:  TooMuchAtOnce

* PR# 918 *
Subject: several bugs
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Sun, 22 Apr 2001 23:13:38 -0400 (EDT)
--1. as.numeric -> use as.double.FOO for methods -- doc.fixed for 1.2.3
--2. cannot set attribute on NULL -- no bug
--3. rep(list() ... ) :  a wish  fulfilled for 1.3.x
--4. %*% is not a generic in R (but is fast!) but in S+  -- not a bug
--5. S-plus (S4) compatibility  -- a wish but not for now
--6. list()s with dim() attribute -- an ongoing `research topic'  :-)
* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

* PR# 927 *
Subject: Rgui 1.2.3 for Windows crashes reading huge CSV file
From: znmeb@aracnet.com
Date: Mon, 30 Apr 2001 07:14:50 +0200 (MET DST)
--Not clear this is to do with Windows.
* PR# 926 *
Subject: Rgui crash
From: bellis@hsph.harvard.edu
Date: Sun, 29 Apr 2001 20:45:15 +0200 (MET DST)
--Unable to reproduce even on a Win2k machine
* PR# 912 *
Subject: Rgui.exe crash on Windows 2000
From: gilg.seeber@uibk.ac.at
Date: Thu, 12 Apr 2001 15:07:52 +0200 (MET DST)
--seems to be specific to the submitter's system.
--Cannot reproduce.
* PR# 906 *
Subject: Win98 wheelmouse graphics lock problem
From: cpaul@ucla.edu
Date: Tue, 10 Apr 2001 17:50:44 +0200 (MET DST)
--Cannot reproduce without more information
--In particular, does not happen with Microsoft Intellimouse on W2K

Directory:  incoming

* PR# 933 *
Subject: read.xport bug of foreign pkg
From: jorvutom@icaro.dic.uchile.cl
Date: Sat, 5 May 2001 22:17:37 +0200 (MET DST)
* PR# 932 *
Subject: scoping error in xy.coords
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 04 May 2001 11:20:57 -0400
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@auckland.ac.nz  Tue May  8 05:49:47 2001
From: mh.smith@auckland.ac.nz (mh.smith@auckland.ac.nz)
Date: Tue, 8 May 2001 06:49:47 +0200 (MET DST)
Subject: [Rd] ks.test in ctest package (PR#934)
Message-ID: <200105080449.GAA03028@pubhealth.ku.dk>


1.    There is, I believe, some redundant code in the calculation of the
test statistic in ks.test in the package ctest.

 Lines 34-37 of the code read

          x <- y(sort(x), ...) - (0:(n - 1))/n
        STATISTIC <- switch(alternative, two.sided = max(abs(c(x,
           x - 1/n))), greater = max(c(x, x - 1/n)), less = -min(c(x,
            x - 1/n)))


Lines 35-37 could read

        STATISTIC <- switch(alternative, two.sided = max(c(x,1/n - x)),
                        greater = max(x), less = max(1/n - x))

Because

    x > x - 1/n and  1/n - x  > -x,

and thus

max(abs(c(x, x - 1/n))) = max(c(x,1/n - x)),

max(c(x, x - 1/n)) = max(x)

and

-min(c(x, x - 1/n)) = max (1/n - x)

2.    The manual entry should also make it clear that the one-sided
tests are not about theactual cdf in relation to the null hypothsis cdf
Fo, but about the quantiles of the actual distribution in relation to
the quantiles of the null hypothesis cdf.

For example the "greater" test has the STATISTIC, from line 34,

       y(sort(x)) - (0:(n-1))/n

If this is large positive it would contain evidence that the actual cdf
F is less than the null hypothesis Fo. This is the traditional form of
the "less" alternative hypothesis.

    Ha:  F < Fo

is equivalent to the quantiles of the actual distribution being greater
than quantiles of the null hypothesised cdf Fo, consequently the manual
entry should make clear that the one sided alternatives "greater" or
"less" refers to the quantiles and not the cdf's.

3.    Another feature that it would be very useful to add to ks.test
would be the automatic return of  a confidence interval for the actual
cdf F.  Adding a conf.level argument and taking the form of the interval
from the value of the alternative argument would be a relatively simple
task, although it would require .  This would bring the value of the
function into line with the t.test function.


--
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Murray H. Smith,      Senior Lecturer in Engineering Statistics
Engineering Science Department
The University of Auckland
Private Bag 92019
Auckland
New Zealand
Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
email: mh.smith@auckland.ac.nz
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue May  8 07:42:01 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 8 May 2001 08:42:01 +0200
Subject: [Rd] Rnews 2001/2
Message-ID: <15095.38201.711541.2225@mithrandir.hornik.net>

Dear package author,

We are now accepting submissions for the second issue of the R
Newsletter.  For more information see

      http://cran.r-project.org/doc/Rnews/

If you are the author of a package on CRAN and you would like to promote
it a little bit, or if you simply have an interesting application using
R, we hope you can find some time to write a short article on it.  We
suggest that it be approximately 2 pages or less.  The idea of the
newsletter is that it be interesting to R users without being too
technical.  For example an article describing a package could begin by
briefly outlining the statistical background and go on to demonstrate
the usage on some typical data set.  Of course graphics are more than
welcome!

Bill Venables is also encouraging submissions to the more specialist
Programmer's Niche column.  In this case the technical level could be a
little higher, of course, but not necessarily: ingeniousness is the key.

Instructions for authors can be found in ``Writing Articles for R News''
in the first issue of Rnews; more detailed instructions will shortly be
available on the web page.  Remember that submissions have to be in
LaTeX, and that graphics are preferred in PDF or EPS format.  (Bitmaps
like JPG are also OK but please keep in mind that those cannot be scaled
easily and hence might look ugly in the final version.)

The deadline for submissions is

	 June 13, 2001

Keep the contributions rolling in!

For the Editorial Board,
-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Wed May  9 07:32:24 2001
From: telford@progsoc.uts.edu.au (Telford)
Date: Wed, 9 May 2001 06:32:24 +0000
Subject: [Rd] Quick note on R mirror site in Australia
Message-ID: <20010509063224.A7541@progsoc.uts.edu.au>

I've noticed http://mirror.aarnet.edu.au/CRAN has been consistently
giving 404's lately, might be worth keeping an eye on this see if
it is dead or just renovating.

-- 
S1G: 10610210 seconds remaining			- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wb@vestein.arb-phys.uni-dortmund.de  Wed May  9 12:42:26 2001
From: wb@vestein.arb-phys.uni-dortmund.de (wb@vestein.arb-phys.uni-dortmund.de)
Date: Wed, 9 May 2001 13:42:26 +0200 (MET DST)
Subject: [Rd] help.start() fails (PR#935)
Message-ID: <200105091142.NAA24335@pubhealth.ku.dk>


On my system help.start() failed with "could not write .R/doc/html/packages.html" 
or equivalent. This due to /usr/local/lib/R/doc/html/packages-head.html 
having protection -r--r--r--. After inserting 'chmod u+w ${PKGLIST}'
after 'cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}'in
/usr/local/lib/R/bin/help.links, it works.


--please do not edit the information below--

Version:
 platform = i386--freebsd4.2
 arch = i386
 os = freebsd4.2
 system = i386, freebsd4.2
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wb@vestein.arb-phys.uni-dortmund.de  Wed May  9 12:44:39 2001
From: wb@vestein.arb-phys.uni-dortmund.de (wb@vestein.arb-phys.uni-dortmund.de)
Date: Wed, 9 May 2001 13:44:39 +0200 (MET DST)
Subject: [Rd] help.start() failed (PR#936)
Message-ID: <200105091144.NAA24412@pubhealth.ku.dk>

On my system help.start() failed with "could not write .R/doc/html/packages.html
"
or equivalent. This due to /usr/local/lib/R/doc/html/packages-head.html
having protection -r--r--r--. After inserting 'chmod u+w ${PKGLIST}'
after 'cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}'in
/usr/local/lib/R/bin/help.links, it works.

BTW. bug.report() fails with "mailx: not found" also.

--please do not edit the information below--

Version:
 platform = i386--freebsd4.2
 arch = i386
 os = freebsd4.2
 system = i386, freebsd4.2
 status =
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed May  9 16:15:36 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 09 May 2001 11:15:36 -0400
Subject: [Rd] Windows binary directory
In-Reply-To: <14913.8539.45887.551220@celeborn.at>
References: <14913.8539.45887.551220@celeborn.at>
Message-ID: <icnift0cbv28os40cnm6534o2nrdeenf5c@4ax.com>

Fritz:

A while ago you hid the windows-9x and windows-NT directories on CRAN,
so that old scripts could still use them but they wouldn't be
displayed to confuse new users.  I was just looking at the cran.us
mirror, and apparently the directory hiding didn't propagate there.  I
checked several other mirrors (I couldn't get through to DK or HU) and
it appears that only the Austrian site does the hiding.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May  9 18:26:02 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 09 May 2001 13:26:02 -0400
Subject: [Rd] Package overview document?
References: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats> <3a4f5971.54339465@smtp1.sympatico.ca>
Message-ID: <3AF97DAA.BBFC6FC7@bank-banque-canada.ca>

This came from deep in my unresolved pile:
>>On Sun, 31 Dec 2000, Duncan Murdoch wrote:
>>> I'd like to write an overview of a package, and have it show up when

>>> someone types
>>>
>>>  library(help=mypackage)
  ...
>>The problem is ensuring that you have a non-clashing name. dse1 has
>>00General.Description which seems to me to be very likely to clash.
...
>I think the most obvious choice of name is the name of the package,
>but that would clash fairly often with the name of a function within
>it (e.g. boot), and it wouldn't show up first in alphabetical lists.

Is there yet any prescribed approach. If not, I would like to suggest
00General.Description.xxx  where xxx is replaced by the package name.
The 00 is to put it near the beginning of the index, but there may be a
better way.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 10 07:31:16 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 10 May 2001 08:31:16 +0200 (MET DST)
Subject: [Rd] Re: PR#929 and [R] matrix: suspected integer overflow
Message-ID: <200105100631.IAA01466@pubhealth.ku.dk>

On Wed, 9 May 2001 andreas.krause@pharma.novartis.com wrote:

> Is the following a known issue, in particular in terms of message clarity of the latter two?

Yes, bug PR#929.  It's a bug in asInteger, an internal C routine which
using (int) on a double.  coerce.c has better routines used to corce
vectors, and the comment

/* This section of code handles type conversion for elements */
/* of data vectors.  Type coercion throughout R should use these */
/* routines to ensure consistency. */

!

I have altered asInteger (etc) to use the same routines.

However, I am not happy with what IntegerFromReal does: it gives the
maximum integer and the message.  I think it would be much better to return
NA in that cirumstance, when most uses of asInteger would give up
(correctly) and generate a meaningful error.

Comments, R-core?

> > matrix(0, 10^8, 10^8)
> Error: cannot allocate vector of size 2064896 Kb
> > matrix(0, 20, 10^10)
> Error in matrix(0, 20, 10^10) : negative length vectors are not allowed
> > matrix(0, 10^10, 10^10)
> Error: cannot allocate vector of size 0 Kb

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed May  9 20:41:56 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 May 2001 21:41:56 +0200
Subject: [Rd] Package overview document?
In-Reply-To: <3AF97DAA.BBFC6FC7@bank-banque-canada.ca>
References: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats>
 <3a4f5971.54339465@smtp1.sympatico.ca>
 <3AF97DAA.BBFC6FC7@bank-banque-canada.ca>
Message-ID: <15097.40324.870687.597994@mithrandir.hornik.net>

>>>>> Paul Gilbert writes:

> This came from deep in my unresolved pile:
>>> On Sun, 31 Dec 2000, Duncan Murdoch wrote:
>>>> I'd like to write an overview of a package, and have it show up when

>>>> someone types
>>>> 
>>>> library(help=mypackage)
>   ...
>>> The problem is ensuring that you have a non-clashing name. dse1 has
>>> 00General.Description which seems to me to be very likely to clash.
> ...
>> I think the most obvious choice of name is the name of the package,
>> but that would clash fairly often with the name of a function within
>> it (e.g. boot), and it wouldn't show up first in alphabetical lists.

> Is there yet any prescribed approach. If not, I would like to suggest
> 00General.Description.xxx where xxx is replaced by the package name.
> The 00 is to put it near the beginning of the index, but there may be
> a better way.

Currently, library(help = PKG) shows the contents of the files TITLE,
DESCRIPTION and INDEX in that order.  For the time being, I would
recommend adding to INDEX, or maybe have something in INDEX pointing to
another file (e.g. contained in inst/doc so that it will be installed to
the doc subdir of the package).

More long term, we will have a better demo mechanism and better markup
for documentation ...

Best,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu May 10 08:23:36 2001
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 10 May 2001 09:23:36 +0200
Subject: [Rd] Re: Windows binary directory
In-Reply-To: <icnift0cbv28os40cnm6534o2nrdeenf5c@4ax.com>
References: <14913.8539.45887.551220@celeborn.at>
 <icnift0cbv28os40cnm6534o2nrdeenf5c@4ax.com>
Message-ID: <15098.16888.569772.436073@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 09 May 2001 11:15:36 -0400,
>>>>> Duncan Murdoch (DM) wrote:

  > Fritz:
  > A while ago you hid the windows-9x and windows-NT directories on CRAN,
  > so that old scripts could still use them but they wouldn't be
  > displayed to confuse new users.  I was just looking at the cran.us
  > mirror, and apparently the directory hiding didn't propagate there.  I
  > checked several other mirrors (I couldn't get through to DK or HU) and
  > it appears that only the Austrian site does the hiding.

Yes, that's because magic like this is done by the web server ... and
I have only control on what OUR server does ... but I think most new
new users will use the master site anyway (we had none of those ``bug
reports'' since ...

the links will be gone once 1.3 is out anyway (which is scheduled for
mid-june) 

.f


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 10 09:13:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 10 May 2001 09:13:27 +0100 (BST)
Subject: [Rd] Package overview document?
In-Reply-To: <3AF97DAA.BBFC6FC7@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0105100909160.15706-100000@auk.stats>

On Wed, 9 May 2001, Paul Gilbert wrote:

> This came from deep in my unresolved pile:
> >>On Sun, 31 Dec 2000, Duncan Murdoch wrote:
> >>> I'd like to write an overview of a package, and have it show up when
>
> >>> someone types
> >>>
> >>>  library(help=mypackage)
>   ...
> >>The problem is ensuring that you have a non-clashing name. dse1 has
> >>00General.Description which seems to me to be very likely to clash.
> ...
> >I think the most obvious choice of name is the name of the package,
> >but that would clash fairly often with the name of a function within
> >it (e.g. boot), and it wouldn't show up first in alphabetical lists.
>
> Is there yet any prescribed approach. If not, I would like to suggest
> 00General.Description.xxx  where xxx is replaced by the package name.
> The 00 is to put it near the beginning of the index, but there may be a
> better way.

Lot so unattributed quotes there ....

Note, things have changed since 2000 and functions.html is no longer built
(as from the next release).  So name clashes are less unimportant, and the
only place these names matter are in your own package unless you want

?00General.Description.dse1

to work.  (I really don't like the long name: what's wrong with
00Description or even 00Intro, the latter being the Unix man-pages
convention?)

However, for

library(help=mypackage)

the information should be in INDEX.  This is already done in several
packages, e.g. boot.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 10 10:07:19 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 May 2001 11:07:19 +0200
Subject: [Rd] Re: PR#929 and [R] matrix: suspected integer overflow
In-Reply-To: ripley@stats.ox.ac.uk's message of "Thu, 10 May 2001 08:31:16 +0200 (MET DST)"
References: <200105100631.IAA01466@pubhealth.ku.dk>
Message-ID: <x2g0ed608o.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> However, I am not happy with what IntegerFromReal does: it gives the
> maximum integer and the message.  I think it would be much better to return
> NA in that cirumstance, when most uses of asInteger would give up
> (correctly) and generate a meaningful error.
> 
> Comments, R-core?

Agreed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May 10 15:45:16 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 10 May 2001 10:45:16 -0400
Subject: [Rd] Package overview document?
References: <Pine.GSO.4.31.0105100909160.15706-100000@auk.stats>
Message-ID: <3AFAA97C.B6BB7671@bank-banque-canada.ca>

Brian

>Note, things have changed since 2000 and functions.html is no longer built
>(as from the next release).  So name clashes are less unimportant, and the
>only place these names matter are in your own package unless you want

>?00General.Description.dse1

>to work.  (I really don't like the long name: what's wrong with
>00Description or even 00Intro, the latter being the Unix man-pages
>convention?)

00Intro would be fine with me, but should that have the package name appended or not?

If not, what will happen to name clashes within a bundle?

When you say functions.html will not be built, does that mean there won't be an
overall index? That is the feature of the help system that I use the most.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 10 17:47:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 10 May 2001 17:47:27 +0100 (GMT Daylight Time)
Subject: [Rd] Package overview document?
In-Reply-To: <3AFAA97C.B6BB7671@bank-banque-canada.ca>
Message-ID: <Pine.WNT.4.31.0105101744310.1188-100000@gannet>

On Thu, 10 May 2001, Paul Gilbert wrote:

> Brian
>
> >Note, things have changed since 2000 and functions.html is no longer built
> >(as from the next release).  So name clashes are less unimportant, and the
> >only place these names matter are in your own package unless you want
>
> >?00General.Description.dse1
>
> >to work.  (I really don't like the long name: what's wrong with
> >00Description or even 00Intro, the latter being the Unix man-pages
> >convention?)
>
> 00Intro would be fine with me, but should that have the package name appended or not?
>
> If not, what will happen to name clashes within a bundle?
>
> When you say functions.html will not be built, does that mean there won't be an
> overall index? That is the feature of the help system that I use the most.

Yes, that has been the decision.  It's too hard to maintain: there is a
list of packages and a search facility (for all loaded packages, or
all packages in all currently specified libraries).

Note that the functions.html only worked on one platform (Unix) and
one browser (Netscape).  (Slight exaggeration.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sint@oeaw.ac.at  Thu May 10 22:31:59 2001
From: sint@oeaw.ac.at (sint@oeaw.ac.at)
Date: Thu, 10 May 2001 23:31:59 +0200 (MET DST)
Subject: [Rd] name creation with index arrays (PR#937)
Message-ID: <200105102131.XAA12164@pubhealth.ku.dk>

Full_Name: Peter Sint
Version: 1.22
OS: MacOS 9.04
Submission from: (NULL) (193.170.84.51)


The not so serious problem is probably not specific to Macintosh although I
found it there:

The small example from  R-intro works .
> x <- array(1:20,dim=c(4,5))
> i <- array(c(1:3,3:1),dim=c(3,2))
> i
  [,1] [,2]
[1,] 1 3
[2,] 2 2
[3,] 3 1
> x[i]
[1] 9 6 3

x[i] has no attribute!
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 9 13 17
[2,] 2 6 10 14 18
[3,] 3 7 11 15 19
[4,] 4 8 12 16 20
> x[i] <- 0
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 0 13 17
[2,] 2 0 10 14 18
[3,] 0 7 11 15 19
[4,] 4 8 12 16 20
>

>  colnames(x)<- c("c1","c2","c3","c4","c5")
> x[i]
[1] 9 6 3

BUT
> rownames(x)<- c("r1","r2","r3","r4")
> x[i]
NA NA r3 
 9  6  3 
> 
Rownames result in unsuccessful name formation (colnames do most likely not, but
this may depend on the order in the index array i). Better drop name making if
not o.k.

(Replacement [<- still works. 
Index matrices do not work on data frames, not a bug but a missing feature with
work around)
Reproduce:
x <- array(1:20,dim=c(4,5))
i <- array(c(1:3,3:1),dim=c(3,2))
i
x[i]
x
x[i] <- 0
x
colnames(x)<- c("c1","c2","c3","c4","c5")
x[i]
rownames(x)<- c("r1","r2","r3","r4")
x[i]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sint@oeaw.ac.at  Thu May 10 22:39:54 2001
From: sint@oeaw.ac.at (sint@oeaw.ac.at)
Date: Thu, 10 May 2001 23:39:54 +0200 (MET DST)
Subject: [Rd] name creation with index arrays (PR#938)
Message-ID: <200105102139.XAA12199@pubhealth.ku.dk>

Full_Name: Peter Sint
Version: 1.22
OS: MacOS 9.04
Submission from: (NULL) (193.170.84.51)


The not so serious problem is probably not specific to Macintosh although I
found it there:

The small example from  R-intro works .
> x <- array(1:20,dim=c(4,5))
> i <- array(c(1:3,3:1),dim=c(3,2))
> i
  [,1] [,2]
[1,] 1 3
[2,] 2 2
[3,] 3 1
> x[i]
[1] 9 6 3

x[i] has no attribute!
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 9 13 17
[2,] 2 6 10 14 18
[3,] 3 7 11 15 19
[4,] 4 8 12 16 20
> x[i] <- 0
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 0 13 17
[2,] 2 0 10 14 18
[3,] 0 7 11 15 19
[4,] 4 8 12 16 20
>

>  colnames(x)<- c("c1","c2","c3","c4","c5")
> x[i]
[1] 9 6 3

BUT
> rownames(x)<- c("r1","r2","r3","r4")
> x[i]
NA NA r3 
 9  6  3 
> 
Rownames result in unsuccessful name formation (colnames do most likely not, but
this may depend on the order in the index array i). Better drop name making if
not o.k.

(Replacement [<- still works. 
Index matrices do not work on data frames, not a bug but a missing feature with
work around)
Reproduce:
x <- array(1:20,dim=c(4,5))
i <- array(c(1:3,3:1),dim=c(3,2))
i
x[i]
x
x[i] <- 0
x
colnames(x)<- c("c1","c2","c3","c4","c5")
x[i]
rownames(x)<- c("r1","r2","r3","r4")
x[i]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Fri May 11 15:15:30 2001
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Fri, 11 May 2001 16:15:30 +0200
Subject: [Rd] new package 'strucchange'
Message-ID: <3AFBF402.F4EA7E9B@ci.tuwien.ac.at>

There is a new package in the devel-section of CRAN called 'strucchange'
providing functions for testing on structural change in linear
regression relationships.
It features tests/methods from the generalized fluctuation test
framework as well as from the F test (Chow test) framework. This
includes methods to fit, plot and test fluctuation processes (e.g.,
CUSUM, MOSUM, recursive/moving estimates) and F statistics,
respectively. Furthermore it is possible to monitor incoming data
online.

It only works with the current development version of R (forthcoming
1.3.x).

Package: strucchange
Version: 0.9
Date: 2001-05-09
Title: Tests on Structural Change
Author: Achim Zeileis, Bruce Hansen, Kurt Hornik,
        Christian Kleiber, Fritz Leisch, Andrea Peters
Maintainer: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Description: Various tests on structural change in linear regression
models.
Depends: R (>= 1.3.0)
License: GPL


--------------------------- 
Achim Zeileis
Institut fr Statistik
Technische Universitt Wien
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.firth@nuf.ox.ac.uk  Fri May 11 16:59:31 2001
From: david.firth@nuf.ox.ac.uk (david.firth@nuf.ox.ac.uk)
Date: Fri, 11 May 2001 17:59:31 +0200 (MET DST)
Subject: [Rd] Windows, RCMD INSTALL and path (PR#939)
Message-ID: <200105111559.RAA15284@pubhealth.ku.dk>

Full_Name: David Firth
Version: 1.2.3
OS: Windows NT4
Submission from: (NULL) (163.1.103.107)


Two things that look like bugs:

1.  RCMD INSTALL does not seem to cope with quotes in the Windows path.  With my
path set to

  PATH="C:\R\Rtools";"C:\R\rw1023\bin";C:\Perl\bin\;C:\WINNT\system32;C:\WINNT;C:\
 
  mingw2\bin

I get, for example, 

  C:\R>RCMD INSTALL boot
  RCMD INSTALL boot

  make: Entering directory `/cygdrive/c/R/rw1023/src/gnuwin32'
  make DLLNM=  EXTRADOCS= \
    -C C:/R/boot PKG=boot RHOME=C:/R/rw1023 RLIB=C:/R/rw1023/library \
    -f C:/R/rw1023/src/gnuwin32/MakePkg
  make: make: Command not found
  make: *** [pkg-boot] Error 127
  make: Leaving directory `/cygdrive/c/R/rw1023/src/gnuwin32'
  *** Installation of boot failed ***

But if I remove the quotes, as in

  PATH=C:\R\Rtools;C:\R\rw1023\bin;C:\Perl\bin\;C:\WINNT\system32;C:\WINNT;C:\ 

  mingw2\bin

then all goes as it should.

(Why do I have the quotes there anyway, you ask?  Well, I started out with

  PATH="C:Program Files\R\Rtools";"C:Program
Files\R\rw1023\bin";C:\Perl\bin\;C:\
  WINNT\system32;C:\WINNT;C:\mingw2.bin

but then RCMD INSTALL failed even more rapidly, presumably on account of the
space in the directory name?)

If this can't be fixed, perhaps add a note in the documentation about these
things?  (I looked in "Writing R Extensions" but found no mention of this
problem.)

2.  A smaller thing I noticed in help(INSTALL): under "Usage:" it should say
"Rcmd", not "Rcnd".

Best regards -- David


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 11 18:21:47 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 11 May 2001 18:21:47 +0100 (BST)
Subject: [Rd] Windows, RCMD INSTALL and path (PR#939)
In-Reply-To: <200105111559.RAA15284@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0105111815140.12696-100000@toucan.stats>

On Fri, 11 May 2001 david.firth@nuffield.oxford.ac.uk wrote:

> Full_Name: David Firth
> Version: 1.2.3
> OS: Windows NT4
> Submission from: (NULL) (163.1.103.107)
>
>
> Two things that look like bugs:
>
> 1.  RCMD INSTALL does not seem to cope with quotes in the Windows path.  With my

I'd say the other way round. Nowhere does it say that it will work with
quotes.

> path set to
>
>   PATH="C:\R\Rtools";"C:\R\rw1023\bin";C:\Perl\bin\;C:\WINNT\system32;C:\WINNT;C:\
>
>   mingw2\bin
>
> I get, for example,
>
>   C:\R>RCMD INSTALL boot
>   RCMD INSTALL boot
>
>   make: Entering directory `/cygdrive/c/R/rw1023/src/gnuwin32'
>   make DLLNM=  EXTRADOCS= \
>     -C C:/R/boot PKG=boot RHOME=C:/R/rw1023 RLIB=C:/R/rw1023/library \
>     -f C:/R/rw1023/src/gnuwin32/MakePkg
>   make: make: Command not found
>   make: *** [pkg-boot] Error 127
>   make: Leaving directory `/cygdrive/c/R/rw1023/src/gnuwin32'
>   *** Installation of boot failed ***
>
> But if I remove the quotes, as in
>
>   PATH=C:\R\Rtools;C:\R\rw1023\bin;C:\Perl\bin\;C:\WINNT\system32;C:\WINNT;C:\
>
>   mingw2\bin
>
> then all goes as it should.
>
> (Why do I have the quotes there anyway, you ask?  Well, I started out with
>
>   PATH="C:Program Files\R\Rtools";"C:Program
> Files\R\rw1023\bin";C:\Perl\bin\;C:\
>   WINNT\system32;C:\WINNT;C:\mingw2.bin
>
> but then RCMD INSTALL failed even more rapidly, presumably on account of the
> space in the directory name?)
>
> If this can't be fixed, perhaps add a note in the documentation about these
> things?  (I looked in "Writing R Extensions" but found no mention of this
> problem.)

We didn't ask you to stop beating your wife because it never occurred to
us that you would....

Note, though, this is a problem with the tools, not with anything we
provide, and the rw-FAQ does warn about spaces in paths.  Latex, for
example, will fail with spaces in path names.

Also

Building
--------

You also need the R source (R-1.3.0.tgz).

Then: untar R-1.3.0.tgz somewhere (with no spaces in the path names),

might be hint.

>
> 2.  A smaller thing I noticed in help(INSTALL): under "Usage:" it should say
> "Rcmd", not "Rcnd".

Already fixed.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Sat May 12 10:15:02 2001
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Sat, 12 May 2001 11:15:02 +0200 (MET DST)
Subject: [Rd] Re: [R] R for ARM Linux (moved from r-help to r-devel)
In-Reply-To: <CB38030C8A89D311B35400062950C38F8E0497@neimp5.nei.nih.gov>
Message-ID: <Pine.OSF.4.21.0105121018080.26392-100000@zidsrv.sci.uni-klu.ac.at>

On Fri, 11 May 2001, Cox, Terry (NEI) wrote:

> I am interested in your efforts to port R to ARM Linux.  If you are
> successful, then I have a good reason to spend the money to buy a Compaq
> iPAQ.

I have compiled R-1.2.2 for arm-linux (iPAQ) on the skiffcluster, an ARM
compile farm accessible at 

  http://www.handhelds.org/projects/skiffcluster.html

and R-1.2.3 using cross compilation tools on x86 linux (cross compilers
are also available at www.handhelds.org).

Compilation went smoothly, it is possible to start the resulting binary,
it prints its version as:
> version
         _                       
platform armv4l-unknown-linux-gnu
arch     armv4l                  
os       linux-gnu               
system   armv4l, linux-gnu       
status                           
major    1                       
minor    2.2                     
year     2001                    
month    02                      
day      26                      
language R                       

but it still fails to pass the tests ("make test"):
make test (with 1.2.2) stops at
......
running `simple-true.R'
comparing `simple-true.Rout' to `./simple-true.Rout.save' ...33c33
< [1] FALSE
---
> [1] TRUE
148c148
< [1] FALSE
---
> [1] TRUE

The problem is, that there is no FPU in these devices (ARM processors
generally can include FPUs but not the Intel StrongARM used in those
little PDAs), so arm-linux comes with a floating point emulation
and I guess this causes the troubles. 

Of course simple things like
 > x<-c(1,2,3)
 > mean(x)
 [1] 2 
work, but even when it comes to simple plots the next problems
arise (wrong plot coordinates resulting in strange pictures).

This reminds me the problems we had with R on alpha/tru64 some time ago
(they where also generated by numeric problems, 64 versus 32 bit in this
case) and had similar results (plots didnt work and so on).

Everybody who is interested can check it at one of the skiffcluster
machines:

telnet skiffclusterX.handhelds.org (X in 1,2,3,4,5,6) 
login guest, no password.

  skiffcluster6:~$ cd agebhars@uni-klu.ac.at
  skiffcluster6:~/agebhard@uni-klu.ac.at$ ls
  R-1.2.2  R-root  minicom-1.83.1

You'll find there a source tree (R-1.2.2), and a install tree (R-root).
So try runnning "./R-root/bin/R" or do a "make test" in R-1.2.2.

The next problem with R on iPAQ will be size: With standard settings you
have only 16MB flash which holds a minimum linux distribution and leaves
you with ~3MB of free space. But we would need this already for R.bin:

  skiffcluster6:~/agebhard@uni-klu.ac.at$ ls -l R-root/lib/R/bin/R.bin
  -rwxr-xr-x    1 guest    users     3221131 Mar 31 12:53 R-root/lib/R/bin/R.bin

and the base libraries would take the next 13MB:

  skiffcluster6:~/agebhard@uni-klu.ac.at$ du -s R-root/lib/R/library/
  13372   R-root/lib/R/library

So if you want to put R on the iPAQ there will be the need for extra
memory (IBM microdrive or CF flash memory). But you will come to this
conclusion anyway, whether installing R or not, because you will also need
other things like perl, python, tcltk, ... which alltogether won't fit
into the base 16MB flash. 

But nevertheless, one task in porting for PDAs like the iPAQ will be to
reduce the basic R installation in size, cutting of unnecessary help
formats, scripts, may be even some of the datasets, and reducing the size
of the base library by moving non core functions out to libraries.

Currently I'm experimenting with the crosscompiler setup on a x86 linux
machine and R-1.2.3. I'm running R on a H3600 iPAQ 

  http://www.compaq.com/products/quickspecs/10632_na/10632_na.HTML

with 16MB flash and 32MB RAM.

R resides NFS mounted across a serial ppp link on my x86 linux box, but I
will soon upgrade to additional flash memory so that I can put R directly
on the PDA.

> 
> Terry A. Cox, MD, PhD
> National Eye Institute
> 
> National Institutes of Health
> 31 Center Drive, MSC 2510
> Building 31, Room 6A52
> Bethesda, MD 20892-2510
> 
> Phone: 301-496-6583
> FAX: 301-496-2297
> Email: tac@nei.nih.gov
> 
> -----Original Message-----
> From: Kurt Hornik [mailto:Kurt.Hornik@ci.tuwien.ac.at]
> Sent: Friday, May 11, 2001 3:27 PM
> To: Cox, Terry (NEI)
> Cc: 'r-help@lists.R-project.org'
> Subject: Re: [R] R for ARM Linux
> 
> 
> >>>>> Cox, Terry (NEI) writes:
> 
> > Would it be possible to port R to ARM Linux for Compaq iPaq and similar
> > handheld computers?  (See http://handhelds.org/).
> 
> I think Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at> has mostly
> get this to work.

still some work to do, see above ;)

> 
> -k
> 

Albrecht

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun May 13 17:39:26 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 13 May 2001 18:39:26 +0200
Subject: [Rd] ks.test in ctest package (PR#934)
In-Reply-To: <200105080449.GAA03028@pubhealth.ku.dk>
References: <200105080449.GAA03028@pubhealth.ku.dk>
Message-ID: <15102.47294.305460.849618@mithrandir.hornik.net>

>>>>> mh smith writes:

> 1.  There is, I believe, some redundant code in the calculation of the
> test statistic in ks.test in the package ctest.

Thanks, fixed.

> 2.    The manual entry should also make it clear that the one-sided
> tests are not about theactual cdf in relation to the null hypothsis cdf
> Fo, but about the quantiles of the actual distribution in relation to
> the quantiles of the null hypothesis cdf.

> ...

THanks for catching this bug.  This should really give the usual
behavior that e.g. `alternative = "less"' means H_0: F >= F_0 for all
points vs H_a: F(t) < F_0(t) for some t.  Fixed now.

> 3.    Another feature that it would be very useful to add to ks.test
> would be the automatic return of  a confidence interval for the actual
> cdf F.  Adding a conf.level argument and taking the form of the interval
> from the value of the alternative argument would be a relatively simple
> task, although it would require .  This would bring the value of the
> function into line with the t.test function.

I am not sure whether we want to do this in the simple htest framework.
Attempting to print a confidence interval given by two functions rather
than two values will be confusing.  I'd much rather have users do

	confint(ecdf(x), conf.level = 0.95)

where a generic confint as in MASS with a method for objects of class
"ecdf" as in stepfun.

[The ``classical'' tests conceptually are really about a single
parameter only.  Should this be changed?  One could argue that if a
hypothesis about the underlying distribution function is tested ...]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Mon May 14 00:47:25 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sun, 13 May 2001 19:47:25 -0400 (EDT)
Subject: [Rd] Dynamic C Symbols and Embedding Suggestion
Message-ID: <Pine.GSO.4.10.10105131930300.12616-100000@hsph.harvard.edu>


Hello, I've been playing around w/ the new dynamic C symbol stuff (thank
you for doing that!) in the, um, 5/11/01 R-devel package and, unless I've
missed something incredibly obvious, there doesn't appear to be a
mechanism for registering functions of an embedding executable. It seems
like this would be a Good Thing to have. 

Since I'm doing most of my work in Windows at the moment (all of the
embedding apps I'm working on are Windows based so I've not really messed
w/ the *NIX embedding stuff) I did a little experiment to see if I could
bind my primary executable. Adding the code below to Rdynload.c seemed to
work (in the Windows case). You'll note the remarkable resemblance to
AddDLL. :-) My test code calls this to set up its function list just after
R_ReplDllinit() just before entering the do1-loop--- though perhaps this
should be integrated into some part of the setup procedure for embedding
apps.


DllInfo* R_RegisterEmbeddedExecutable(HINSTANCE handle,char* path)
{
	char* dpath,*name,DLLname[PATH_MAX], *p;

	DeleteDLL(path);
	if(CountDLL == MAX_NUM_DLLS) {
		strcpy(DLLerror,"unable to register embedded executable.
too many libraries");
		return 0;
	}

    dpath = malloc(strlen(path)+1);
    if(dpath == NULL) {
	strcpy(DLLerror,"Couldn't allocate space for 'path'");
	return 0;
    }
    strcpy(dpath, path);
    
    if(R_osDynSymbol->fixPath)
	R_osDynSymbol->fixPath(dpath);

    p = strrchr(dpath, R_DIR_SEPARATOR); 
    if(!p) p = dpath; else p++;
    strcpy(DLLname, p);
    p = strchr(DLLname, '.');
    if(p) *p = '\0';
    name = malloc(strlen(DLLname)+1);
    if(name == NULL) {
	strcpy(DLLerror,"Couldn't allocate space for 'name'");
	free(dpath);
	return 0;
    }
    strcpy(name, DLLname);

    LoadedDLL[CountDLL].path = dpath;
    LoadedDLL[CountDLL].name = name;
    LoadedDLL[CountDLL].handle = handle;

    LoadedDLL[CountDLL].numCSymbols = 0;
    LoadedDLL[CountDLL].numCallSymbols = 0;
    LoadedDLL[CountDLL].numFortranSymbols = 0;
    LoadedDLL[CountDLL].CSymbols = NULL;
    LoadedDLL[CountDLL].CallSymbols = NULL;
    LoadedDLL[CountDLL].FortranSymbols = NULL;

	return LoadedDLL + (CountDLL++);

}



Byron Ellis (bellis@hsph.harvard.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 14 11:04:53 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 14 May 2001 12:04:53 +0200
Subject: [Rd] solve( <complex> ) etc
Message-ID: <15103.44485.793022.830982@gargle.gargle.HOWL>

For porting some (time series related) software from S-plus,
I need  solve() {i.e.  solve.qr() }  to work with complex matrices.

I have had a similar request for this from a local user a while back already.
Till R-1.x.y {at least x=y=0} we have had complex Linpack and BLAS in R's 
sources src/appl/z*.f  but never had an R interface anyway and subsequently
have dropped it.

Should we have a package or a `module' (new in R-1.3) 
for providing complex linear algebra in R?
 
Has anyone done some of the work already?
R-devel readers, thanks for your  support!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Mon May 14 13:53:29 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 14 May 2001 08:53:29 -0400
Subject: [Rd] Dynamic C Symbols and Embedding Suggestion
In-Reply-To: <Pine.GSO.4.10.10105131930300.12616-100000@hsph.harvard.edu>; from bellis@hsph.harvard.edu on Sun, May 13, 2001 at 07:47:25PM -0400
References: <Pine.GSO.4.10.10105131930300.12616-100000@hsph.harvard.edu>
Message-ID: <20010514085329.S10120@jessie.research.bell-labs.com>

Byron Ellis wrote:
> 
> Hello, I've been playing around w/ the new dynamic C symbol stuff (thank
> you for doing that!) in the, um, 5/11/01 R-devel package and, unless I've
> missed something incredibly obvious, there doesn't appear to be a
> mechanism for registering functions of an embedding executable. It seems
> like this would be a Good Thing to have. 

Hi Byron,

You are correct. There is no way to explicitly make the symbols of the
host/embedding application available to R. As you point out, the code
below looks like the second half of the AddDLL() routine. And we
should arrange AddDLL() to perform the loading of the code and then
call another routine to register it at the end of the LoadedDLL
array. In this way, the host application can also call this second
routine itself (or even override it, if that should every be useful).


One reason for this omission is that I haven't yet found a need for
it. But the embedding R in another application is still reasonably recent
(at least on Unix), so the more we found out about what is needed, the better.

Here are some reasons I think we haven't needed to be able to access
the symbols in the host application.

Firstly, most C routines are not directly callable from R. Certainly
those accessed by .Call, .External require knowledge of R. Because of this
explicit dependency on libR.so, and the need to ensure that
they are called only after R has been initialized makes it more sensible
to load them as a regular R package as part of the post-initialization of R.

Routines accessed via .C and .Fortran typically need an extra layer
of indirection to handle arguments as they come from R to the native code.
For example, an S call
  .C("foo", x, length(x))
might map to the C routine
   void foo(double *x, Sint *len) {
      realFoo(x, *len);
   }

The real routine is realFoo() and we have to convert the length
argument to a scalar rather than a pointer to a scalar.  In this
setup, R need never know about realFoo() explicitly. It will be
resolved by the dynamic loader (for better or worse).  Luke and I (at
the very least) are keen to avoid the dynamic loader and to have
people explicitly link against libraries as it avoids
platform-specific nuances of the loader that are very hard to control.


The examples where it is useful for R to be able to see symbols in the
host application are those that take no arguments and whose value is
ignored. Are there any interesting examples of this? 

Thanks for pointing out the idea of separating the two task currently
performed by AddDLL(). I'll separate them later today.

 D.

> 
> Since I'm doing most of my work in Windows at the moment (all of the
> embedding apps I'm working on are Windows based so I've not really messed
> w/ the *NIX embedding stuff) I did a little experiment to see if I could
> bind my primary executable. Adding the code below to Rdynload.c seemed to
> work (in the Windows case). You'll note the remarkable resemblance to
> AddDLL. :-) My test code calls this to set up its function list just after
> R_ReplDllinit() just before entering the do1-loop--- though perhaps this
> should be integrated into some part of the setup procedure for embedding
> apps.
> 
> 
> DllInfo* R_RegisterEmbeddedExecutable(HINSTANCE handle,char* path)
> {
> 	char* dpath,*name,DLLname[PATH_MAX], *p;
> 
> 	DeleteDLL(path);
> 	if(CountDLL == MAX_NUM_DLLS) {
> 		strcpy(DLLerror,"unable to register embedded executable.
> too many libraries");
> 		return 0;
> 	}
> 
>     dpath = malloc(strlen(path)+1);
>     if(dpath == NULL) {
> 	strcpy(DLLerror,"Couldn't allocate space for 'path'");
> 	return 0;
>     }
>     strcpy(dpath, path);
>     
>     if(R_osDynSymbol->fixPath)
> 	R_osDynSymbol->fixPath(dpath);
> 
>     p = strrchr(dpath, R_DIR_SEPARATOR); 
>     if(!p) p = dpath; else p++;
>     strcpy(DLLname, p);
>     p = strchr(DLLname, '.');
>     if(p) *p = '\0';
>     name = malloc(strlen(DLLname)+1);
>     if(name == NULL) {
> 	strcpy(DLLerror,"Couldn't allocate space for 'name'");
> 	free(dpath);
> 	return 0;
>     }
>     strcpy(name, DLLname);
> 
>     LoadedDLL[CountDLL].path = dpath;
>     LoadedDLL[CountDLL].name = name;
>     LoadedDLL[CountDLL].handle = handle;
> 
>     LoadedDLL[CountDLL].numCSymbols = 0;
>     LoadedDLL[CountDLL].numCallSymbols = 0;
>     LoadedDLL[CountDLL].numFortranSymbols = 0;
>     LoadedDLL[CountDLL].CSymbols = NULL;
>     LoadedDLL[CountDLL].CallSymbols = NULL;
>     LoadedDLL[CountDLL].FortranSymbols = NULL;
> 
> 	return LoadedDLL + (CountDLL++);
> 
> }
> 
> 
> 
> Byron Ellis (bellis@hsph.harvard.edu)
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Mon May 14 16:28:18 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Mon, 14 May 2001 11:28:18 -0400 (EDT)
Subject: [Rd] Dynamic C Symbols and Embedding Suggestion
In-Reply-To: <20010514085329.S10120@jessie.research.bell-labs.com>
Message-ID: <Pine.GSO.4.10.10105141115380.13899-100000@hsph.harvard.edu>

On Mon, 14 May 2001, Duncan Temple Lang wrote:

> Byron Ellis wrote:
> > 
> 
> One reason for this omission is that I haven't yet found a need for
> it. But the embedding R in another application is still reasonably recent
> (at least on Unix), so the more we found out about what is needed, the better.
> 
> Here are some reasons I think we haven't needed to be able to access
> the symbols in the host application.
> 
> Firstly, most C routines are not directly callable from R. Certainly
> those accessed by .Call, .External require knowledge of R. Because of this
> explicit dependency on libR.so, and the need to ensure that
> they are called only after R has been initialized makes it more sensible
> to load them as a regular R package as part of the post-initialization of R.
> 
> Routines accessed via .C and .Fortran typically need an extra layer
> of indirection to handle arguments as they come from R to the native code.
> For example, an S call
>   .C("foo", x, length(x))
> might map to the C routine
>    void foo(double *x, Sint *len) {
>       realFoo(x, *len);
>    }
> 
> The real routine is realFoo() and we have to convert the length
> argument to a scalar rather than a pointer to a scalar.  In this
> setup, R need never know about realFoo() explicitly. It will be
> resolved by the dynamic loader (for better or worse).  Luke and I (at
> the very least) are keen to avoid the dynamic loader and to have
> people explicitly link against libraries as it avoids
> platform-specific nuances of the loader that are very hard to control.
> 
> 
> The examples where it is useful for R to be able to see symbols in the
> host application are those that take no arguments and whose value is
> ignored. Are there any interesting examples of this? 

I'm not thinking so much in terms of random C functions that we may want
to call from R--- but rather functions which are intended to be called
from R but need to be in the host application for one reason or another.
Two immediate examples come to my mind (at least on the Windows
platform--you should be able to get around this first one in X and the
second doesn't apply to *NIX platforms :-)):

1. GUI interfaces a la S-Plus. That is to say the ability to add menus or
other things (graphics devices, etc.) to the primary GUI interface from R.
For instance, I have a piece of code that lets me attach arbitrary R
expressions to menu items which are then executed by taking over the
console interface temporarily (with the option to suppress output). In the
case of the official R GUI obviously you don't have this problem since it
is relatively tightly coupled to the core engine and the executable itself
doesn't really do anything.

2. An ActiveX control (see, doesn't apply ;-)). In this situation
(specifically embedding R in Internet Explorer to match the SNetscape
control since IE has something like 97% of the Windows desktop
marketshare) I can't use the hack described in my original email since
GetModuleHandle(NULL) returns IEXPLORE.EXE not a handle to the COM DLL
(unfortunate, but true). In this case I'd like to add some links between
the Javascript event model and R so I need to expose the fire*
functionality.

> 
> Thanks for pointing out the idea of separating the two task currently
> performed by AddDLL(). I'll separate them later today.

Nifty.

> 
>  D.



Byron Ellis (bellis@hsph.harvard.edu)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May 15 17:51:01 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 15 May 2001 12:51:01 -0400
Subject: [Rd] truncate
Message-ID: <3B015E75.35CCF08@bank-banque-canada.ca>

I see in the devel snapshot there is a new generic method

> truncate
function (con, ...)
UseMethod("truncate")

which conflicts with a generic method in one of my packages:

> truncate
function (x, start = NULL, end = NULL)
{
    UseMethod("truncate")
}

I don't think there is a problem, but there used to be a recommendation to use the
same name for the first argument in generic and specific methods. Is that still
important?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 15 18:00:44 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 15 May 2001 18:00:44 +0100 (BST)
Subject: [Rd] truncate
In-Reply-To: <3B015E75.35CCF08@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>

On Tue, 15 May 2001, Paul Gilbert wrote:

> I see in the devel snapshot there is a new generic method
>
> > truncate
> function (con, ...)
> UseMethod("truncate")
>
> which conflicts with a generic method in one of my packages:
>
> > truncate
> function (x, start = NULL, end = NULL)
> {
>     UseMethod("truncate")
> }
>
> I don't think there is a problem, but there used to be a recommendation to use the
> same name for the first argument in generic and specific methods. Is that still
> important?

It is desirable in R, important in S, essential in S-PLUS 6.0.

There is already a truncate function in Rstreams, BTW, which this
is intended to supersede.  That (and that in R-devel) do mean the same as
the system call truncate(3c), which I guess yours does not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May 15 18:28:01 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 15 May 2001 13:28:01 -0400
Subject: [Rd] truncate
References: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>
Message-ID: <3B016720.73F88B23@bank-banque-canada.ca>

PG> I don't think there is a problem, but there used to be a recommendation to use
the
PG> same name for the first argument in generic and specific methods. Is that still
PG> important?

BDR>It is desirable in R, important in S, essential in S-PLUS 6.0.

BDR>There is already a truncate function in Rstreams, BTW, which this
BDR>is intended to supersede.  That (and that in R-devel) do mean the same as
BDR>the system call truncate(3c), which I guess yours does not.

I guess if functions are going to be moving from packages into base there will be a
lot more chance for name conflicts. Generic functions help a lot to solve this but it
seems a naming convention for the first argument may be a good idea too. Some time
ago I changed many of my generic functions to use "x" as the first argument (on
someone's recommendation).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thoffman@zappa.sax.de  Tue May 15 22:36:37 2001
From: thoffman@zappa.sax.de (thoffman@zappa.sax.de)
Date: Tue, 15 May 2001 23:36:37 +0200 (MET DST)
Subject: [Rd] GCircle(): fails for non-clippable devices under certain circumstances (see below) (PR#940)
Message-ID: <200105152136.XAA19124@pubhealth.ku.dk>

The following code snippet from graphics.c: GCircle() (around line 3100) fails for devices which 
can not clip (dd->dp.canClip==0) and try to plot a circle that does not fit into the plot region, but
fits into the device region, see inserted comments:

....
    result = clipCircleCode(x, y, coords, ir, dd);
// result>0, because circle does not fit into plot region (for dd->gp.xpd=0)

    switch (result) {
    case -2: /* No clipping;  draw all of circle */
        dd->dp.circle(x, y, coords, ir, bg, fg, dd);
        break;
    case -1: /* Total clipping; draw nothing */
        break;
    default: /* Partial clipping; draw poly[line|gon] */
// we proceed here:
        dd->gp.xpd = 2;
// check clipping for the device region:
        result = clipCircleCode(x, y, coords, ir, dd);
// ...if it fits, result=-2: ouch, we have thrown away the result from the 1st check!
        dd->gp.xpd = xpdsaved;
        if (dd->dp.canClip && result == -2) {
// ...but it does not matter if we can clip!
            GClip(dd);
            dd->dp.circle(x, y, coords, ir, bg, fg, dd);
        }
        else {
//...BUT if we can not clip, then we call for trouble:
            vmax = vmaxget();$

....
    default: /* Partial clipping; draw poly[line|gon] */
      if (dd->dp.canClip) {
	dd->gp.xpd = 2;
	result = clipCircleCode(x, y, coords, ir, dd);
	dd->gp.xpd = xpdsaved;
	if (result == -2) {
	    GClip(dd);
	    dd->dp.circle(x, y, coords, ir, bg, fg, dd);
	    break;
	}
      }
      vmax = vmaxget();
      xc = (double*)R_alloc(result+1, sizeof(double));
      yc = (double*)R_alloc(result+1, sizeof(double));
      GConvert(&x, &y, coords, DEVICE, dd);
      convertCircle(x, y, ir, result, xc, yc, dd);
      if (bg == NA_INTEGER) {
	dd->gp.col = fg;
	GPolyline(result+1, xc, yc, DEVICE, dd);
      }
      else {
	int npts;
	double *xcc, *ycc;
	xcc = ycc = 0;	/* -Wall */
	npts = GClipPolygon(xc, yc, result, DEVICE, 0, xcc, ycc, dd);
	if (npts > 1) {
	  xcc = (double*)R_alloc(npts, sizeof(double));
	  ycc = (double*)R_alloc(npts, sizeof(double));
	  npts = GClipPolygon(xc, yc, result, DEVICE, 1,
			      xcc, ycc, dd);
	  dd->dp.polygon(npts, xcc, ycc, DEVICE, bg, fg, dd);
	}
      }
      vmaxset(vmax);
    }
}


This works at least in my test case at

> version
         _
platform i386-pc-os2_emx
arch     i386
os       os2_emx
system   i386, os2_emx
status
major    1
minor    2.2
year     2001
month    02
day      26
language R


Thomas Hoffmann.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlm21@cam.ac.uk  Wed May 16 12:49:35 2001
From: tlm21@cam.ac.uk (tlm21@cam.ac.uk)
Date: Wed, 16 May 2001 13:49:35 +0200 (MET DST)
Subject: [Rd] Mistake in qbeta.c ? (PR#941)
Message-ID: <200105161149.NAA27502@pubhealth.ku.dk>

Full_Name: Tim Massingham
Version: 1.2.2
OS: Debian/Linux
Submission from: (NULL) (131.111.8.68)


In 1.2.2 sources (also in 0.90.1. I haven't been able to check other versions)
Line 103 in qbeta.c should read:
w = y * sqrt(h + r) / h - (t - s) * (r + 5. / 6. - 2 / (3 * h));

since otherwise the 5 / 6 will evaluate to zero (I think).
The Statlib fortran code uses five / six instead.

Cheers, thanks for great software.

	  TimM.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 16 15:21:59 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 16 May 2001 10:21:59 -0400
Subject: [Rd] truncate
References: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>
Message-ID: <3B028D07.2A00CDD6@bank-banque-canada.ca>

Brian

I've changed the name of my truncate function. In this case I think
problems of conflicts in code could easily be resolved, but I don't
understand how conflicts in the documentation would be resolved.

However, please do keep in mind that adding things to base is
problematic because of name space conflicts. This case was relatively
easy for me, but some functions would be much more difficult because of
all the implications for documentation and other code using the
packages.

Best,
Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 16 15:40:24 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 May 2001 16:40:24 +0200
Subject: [Rd] Mistake in qbeta.c ? (PR#941)
In-Reply-To: tlm21@cam.ac.uk's message of "Wed, 16 May 2001 13:49:35 +0200 (MET DST)"
References: <200105161149.NAA27502@pubhealth.ku.dk>
Message-ID: <x2ofst5pd3.fsf@blueberry.kubism.ku.dk>

tlm21@cam.ac.uk writes:

> Full_Name: Tim Massingham
> Version: 1.2.2
> OS: Debian/Linux
> Submission from: (NULL) (131.111.8.68)
> 
> 
> In 1.2.2 sources (also in 0.90.1. I haven't been able to check other versions)
> Line 103 in qbeta.c should read:
> w = y * sqrt(h + r) / h - (t - s) * (r + 5. / 6. - 2 / (3 * h));
> 
> since otherwise the 5 / 6 will evaluate to zero (I think).
> The Statlib fortran code uses five / six instead.
> 
> Cheers, thanks for great software.

Whoops! Fortunately it sits in code that calculates an initial
approximation, so one would hope it only affects speed of convergence. 
Thanks for pointing that out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 16 16:15:46 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 16 May 2001 16:15:46 +0100 (BST)
Subject: [Rd] truncate
In-Reply-To: <3B028D07.2A00CDD6@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0105161613080.14396-100000@gannet.stats>

On Wed, 16 May 2001, Paul Gilbert wrote:

> Brian
>
> I've changed the name of my truncate function. In this case I think
> problems of conflicts in code could easily be resolved, but I don't
> understand how conflicts in the documentation would be resolved.
>
> However, please do keep in mind that adding things to base is
> problematic because of name space conflicts. This case was relatively
> easy for me, but some functions would be much more difficult because of
> all the implications for documentation and other code using the
> packages.

A later version of R may well have namespaces.  But please do bear in mind
that the names of standard C-level functions are likely to be used for the
same purpose in R.  Little-used packages (and there are over 100 packages
by now) cannot be given veto rights.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 16 16:51:29 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 16 May 2001 11:51:29 -0400
Subject: [Rd] truncate
References: <Pine.LNX.4.31.0105161613080.14396-100000@gannet.stats>
Message-ID: <3B02A200.BD4DC773@bank-banque-canada.ca>

BDR>But please do bear in mind that the names of standard C-level
BDR>functions are likely to be used for the same purpose in R.

I understand that this is convenient but I don't know why it should be
true. Wouldn't a convention like "C.truncate" make more sense?  Do you
expect R users to know the names of standard C function so they can
avoid them?  I doubt that most do. Do fortran or perl have the same
privilege?

BDR>Little-used packages (and there are over 100 packages
BDR>by now) cannot be given veto rights.

I think that you should assume that anything that gets to the point of
being a package is used a lot by at least some users. If you say you are
going to clobber the name space in base whenever you feel like it, then
very quickly you will not have users or maintained packages (and then of
course you can do whatever you like with the name space).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jebacklund@dowagro.com  Wed May 16 18:58:15 2001
From: jebacklund@dowagro.com (jebacklund@dowagro.com)
Date: Wed, 16 May 2001 19:58:15 +0200 (MET DST)
Subject: [Rd] Minor documentation issue (PR#942)
Message-ID: <200105161758.TAA02511@pubhealth.ku.dk>

Full_Name: Jan Erik Backlund
Version: 1.2.3
OS: Windows 98
Submission from: (NULL) (216.99.65.32)


R is fantastic and I greatly appreciate your efforts and creativity in
developing it.

Minor documentation suggestion:
Include an 'objects' function listing in the base section of the reference
manual.  It need only say 'Please see function ls'.

Is this the preferred way of submitting suggestions regarding the documentation?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed May 16 20:11:07 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 16 May 2001 15:11:07 -0400
Subject: [Rd] Strange formatting
Message-ID: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com>

I've never noticed this before, though it's probably not new.  In
1.2.3 for Windows, if I print a short vector the formatting is
different than if I print a long one, whether or not they fit on one
line.  The short/long split appears to be between 9 and 10 elements:

 > 1:9
 [1] 1 2 3 4 5 6 7 8 9
 > 1:10
  [1]  1  2  3  4  5  6  7  8  9 10

 > sqrt(1:9)
 [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
2.828427
 [9] 3.000000
 > sqrt(1:10)
  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
2.828427
  [9] 3.000000 3.162278


The spacing between the integer values is different, and there's a
space before the "[1]" in the longer vectors.

Is this intentional?  What's the reasoning for this difference?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 16 20:31:14 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 May 2001 21:31:14 +0200
Subject: [Rd] Strange formatting
In-Reply-To: Duncan Murdoch's message of "Wed, 16 May 2001 15:11:07 -0400"
References: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com>
Message-ID: <x2u22lccql.fsf@blueberry.kubism.ku.dk>

Duncan Murdoch <murdoch@stats.uwo.ca> writes:

> I've never noticed this before, though it's probably not new.  In
> 1.2.3 for Windows, if I print a short vector the formatting is
> different than if I print a long one, whether or not they fit on one
> line.  The short/long split appears to be between 9 and 10 elements:
> 
>  > 1:9
>  [1] 1 2 3 4 5 6 7 8 9
>  > 1:10
>   [1]  1  2  3  4  5  6  7  8  9 10
> 
>  > sqrt(1:9)
>  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
> 2.828427
>  [9] 3.000000
>  > sqrt(1:10)
>   [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
> 2.828427
>   [9] 3.000000 3.162278
> 
> 
> The spacing between the integer values is different, and there's a
> space before the "[1]" in the longer vectors.
> 
> Is this intentional?  What's the reasoning for this difference?

The spacing is to print all elements in the same field width, and 10
wouldn't look good in a field of with 2. I don't think that could be
much different (compare 1:100 and 1:99). The labels would seem to be
generated to make room for the label with the longest possible width,
which is slightly botched since that width need not be used by any of
the labels. Submit a patch?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 16 20:59:25 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 16 May 2001 20:59:25 +0100 (BST)
Subject: [Rd] Strange formatting
In-Reply-To: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com>
Message-ID: <Pine.GSO.4.31.0105162056310.4660-100000@auk.stats>

On Wed, 16 May 2001, Duncan Murdoch wrote:

> I've never noticed this before, though it's probably not new.  In
> 1.2.3 for Windows, if I print a short vector the formatting is
> different than if I print a long one, whether or not they fit on one
> line.  The short/long split appears to be between 9 and 10 elements:
>
>  > 1:9
>  [1] 1 2 3 4 5 6 7 8 9
>  > 1:10
>   [1]  1  2  3  4  5  6  7  8  9 10
>
>  > sqrt(1:9)
>  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
> 2.828427
>  [9] 3.000000
>  > sqrt(1:10)
>   [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
> 2.828427
>   [9] 3.000000 3.162278
>
>
> The spacing between the integer values is different, and there's a
> space before the "[1]" in the longer vectors.
>
> Is this intentional?  What's the reasoning for this difference?

I guess so.  For the first, the elements will line up:

> options(width=40)
> 1:50
 [1]  1  2  3  4  5  6  7  8  9 10 11 12
[13] 13 14 15 16 17 18 19 20 21 22 23 24
[25] 25 26 27 28 29 30 31 32 33 34 35 36
[37] 37 38 39 40 41 42 43 44 45 46 47 48
[49] 49 50

and that shows you the reason for the space too.

FWIW, S-PLUS 3.4 does the same things.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed May 16 21:45:52 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 16 May 2001 16:45:52 -0400
Subject: [Rd] Strange formatting
In-Reply-To: <x2u22lccql.fsf@blueberry.kubism.ku.dk>
References: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com> <x2u22lccql.fsf@blueberry.kubism.ku.dk>
Message-ID: <jdp5gtom71ut5tuhmmedq7h8i78qs8dg4d@4ax.com>

Peter and Brian pointed out that 

>The spacing is to print all elements in the same field width...

Of course!  I knew that.  Must have had a temporary mental breakdown.
Thanks.

Peter suggested I should submit a patch for the fact that the width of
the index can be one char too wide.  I'll add it to my mental to-do
list (but we've just seen a demonstration of the reliability of my
memory...).

Duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed May 16 23:22:05 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 17 May 2001 10:22:05 +1200
Subject: [Rd] Strange formatting
References: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com> <x2u22lccql.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B02FD8D.320B2718@stat.auckland.ac.nz>

Peter Dalgaard BSA wrote:

> The spacing is to print all elements in the same field width, and 10
> wouldn't look good in a field of with 2. I don't think that could be
> much different (compare 1:100 and 1:99). The labels would seem to be
> generated to make room for the label with the longest possible width,
> which is slightly botched since that width need not be used by any of
> the labels. Submit a patch?

Believe it or not, this was deliberate for consistency with Splus 3.X.
	Ross

-- 
Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz
Department of Statistics           Phone:  (64-9) 373-7599 x 5054
University of Auckland             Fax:    (64-9) 373-7018
Private Bag 92019, Auckland
New Zealand
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Hoffmann" <thoffman@zappa.sax.de  Wed May 16 22:59:01 2001
From: Thomas Hoffmann" <thoffman@zappa.sax.de (Thomas Hoffmann)
Date: Wed, 16 May 01 22:59:01 +0100
Subject: [Rd] Double inclusion of Runix.h
Message-ID: <3b02f827.thoffman.zappa@zappa.sax.de>

Maybe I am overlooking something important, but why is Runix.h included twice
in sys-std.c?

....
#include "Runix.h"
#include "Startup.h"

#include "Runix.h"
....

In Runix.h, there is another iclusion of Startup.h ...

Was this an omission during clean up? 

Curious,
Thomas Hoffmann.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 17 00:58:51 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 May 2001 01:58:51 +0200
Subject: [Rd] Double inclusion of Runix.h
In-Reply-To: "Thomas Hoffmann"'s message of "Wed, 16 May 01 22:59:01 +0100"
References: <3b02f827.thoffman.zappa@zappa.sax.de>
Message-ID: <x2n18clubo.fsf@blueberry.kubism.ku.dk>

"Thomas Hoffmann" <thoffman@zappa.sax.de> writes:

> Maybe I am overlooking something important, but why is Runix.h included twice
> in sys-std.c?
> 
> ....
> #include "Runix.h"
> #include "Startup.h"
> 
> #include "Runix.h"
> ....
> 
> In Runix.h, there is another iclusion of Startup.h ...
> 
> Was this an omission during clean up? 
> 
> Curious,
> Thomas Hoffmann.

Looks like an omission. Runix.h has no guard against multiple
inclusion, so one ends up with a host of repeated declarations, which
is probably harmless, but might upset pedantic compilers(?)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu May 17 13:02:37 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 17 May 2001 14:02:37 +0200
Subject: [Rd] Minor documentation issue (PR#942)
In-Reply-To: <200105161758.TAA02511@pubhealth.ku.dk>
References: <200105161758.TAA02511@pubhealth.ku.dk>
Message-ID: <15107.48605.537609.899228@gargle.gargle.HOWL>

>>>>> "jebacklund" == jebacklund  <jebacklund@dowagro.com> writes:

    jebacklund> Full_Name: Jan Erik Backlund
    jebacklund> Version: 1.2.3
    .......

    jebacklund> R is fantastic and I greatly appreciate your efforts and
    jebacklund> creativity in developing it.
thanks for the flowers!

    jebacklund> Minor documentation suggestion: Include an 'objects'
    jebacklund> function listing in the base section of the reference
    jebacklund> manual.  It need only say 'Please see function ls'.

Can you tell me (maybe privately, not to the whole mailing list)
what you mean?  are you using the PDF or help.start() / HTML version of the
manual? on paper or on-line ?


    jebacklund> Is this the preferred way of submitting suggestions
    jebacklund> regarding the documentation?

not really; only bugs or really lacking things in the documentation should
 be reported as bugs;
Suggestions like yours you should send to any one (but not more than one) of
R-help, R-devel, or R-core.  
To which one really depends on how interesting, debatable, .... you think
this is to the corresponding audience.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu May 17 14:21:46 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 17 May 2001 15:21:46 +0200
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <3B028D07.2A00CDD6@bank-banque-canada.ca>
References: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>
 <3B028D07.2A00CDD6@bank-banque-canada.ca>
Message-ID: <15107.53354.670649.577003@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> Brian
    PaulG> I've changed the name of my truncate function. In this case I think
    PaulG> problems of conflicts in code could easily be resolved, but I don't
    PaulG> understand how conflicts in the documentation would be resolved.

    PaulG> However, please do keep in mind that adding things to base is
    PaulG> problematic because of name space conflicts. This case was
    PaulG> relatively easy for me, but some functions would be much more
    PaulG> difficult because of all the implications for documentation and
    PaulG> other code using the packages.

You are right, Paul, adding things to base is somewhat problematic
particularly for package writers.  That's why I now ask for comments:

One thing I *would* like to add to base (in a general sense -- note that
Brian mentioned that namespaces might well come in the not so distant future),
are the generic functions

    AIC
and
    logLik  {both a generic and a class!}

that Bates and Pinheiro use quite extensively in the nlme package
(and I did ask Doug about this two months ago) :

--------
After  library(nlme)

  > ls(pos=2,pat="AIC")
  [1] "AIC"        "AIC.gls"    "AIC.lm"     "AIC.lme"    "AIC.lmList"
  [6] "AIC.logLik" "AIC.nls"   
  > ls(pos=2,pat="^logLik")
   [1] "logLik.corStruct"    "logLik.gls"          "logLik.glsStruct"   
   [4] "logLik.gnls"         "logLik.gnlsStruct"   "logLik.lm"          
   [7] "logLik.lme"          "logLik.lmeStruct"    "logLik.lmeStructInt"
  [10] "logLik.lmList"       "logLik.reStruct"     "logLik.varComb"     
  [13] "logLik.varFunc"     
  > ls(pos=2,pat="logLik$")
  [1] "AIC.logLik"   "BIC.logLik"   "print.logLik"
  > AIC
  function (object, ...) 
  UseMethod("AIC")
  > str(AIC.lm)
  function (object, ...) 

--------

The nlme() also defines BIC(), which one might argue could also be
considered a special case of a more general "*IC" generic.

Package MASS has

  extractAIC.loglm <- function (fit, scale, k = 2, ...) 
  {
      edf <- fit$n - fit$df
      c(edf, fit$deviance + k * edf)
  }

which you can use for the BIC as well 
by replacing "k = 2" by "k = log(fit$n)".

And there are AIC like computations in many R packages.
which may or may not differ.
However it would make sense to have the generic and the lm (and glm?)
methods in standard base.  Similarly for "logLik".

------

Does anyone see problems?
Should the AIC generic {or only some of the methods} include something like
a "k = 2" argument  (why ``k'' , btw) ?

Thanks for constructive feedback!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Thu May 17 14:47:56 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 17 May 2001 09:47:56 -0400
Subject: [Rd] P-value printing in print.summary.lm
Message-ID: <OFCBB833AD.7244FB84-ON85256A4F.004AF00D@rtp.epa.gov>

The P-value for the overall F-statistic is being printed with formatC in
print.summary.lm (at least in R-1.2.3).  This results in P-values of 0,
which I suppose is practically unimportant, but logically offensive.
format.pval() gets around this (indeed, its help page says it was written
for print.summary.lm, though it is not explicitly called there, just in
print.coefmat!).  I'd suggest the following patch to lm.R:

337c337
<           formatC(1 - pf(x$fstatistic[1], x$fstatistic[2],
---
>           format.pval(1 - pf(x$fstatistic[1], x$fstatistic[2],



R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May 17 14:57:37 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 17 May 2001 09:57:37 -0400
Subject: [Rd] New generic functions in "R base" {was `truncate'}
References: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>
 <3B028D07.2A00CDD6@bank-banque-canada.ca> <15107.53354.670649.577003@gargle.gargle.HOWL>
Message-ID: <3B03D8D1.B4F6725@bank-banque-canada.ca>

Martin

>One thing I *would* like to add to base ... are the generic functions
> AIC and  logLik ...

Neither  AIC nor logLik conflict with anything in my packages. I do have a programs
that return log likelihood and information criteria along with a lot of other
information, so depending on your definitions I might start using your classes.

Thanks for asking,
Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May 18 09:58:43 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 18 May 2001 09:58:43 +0100 (BST)
Subject: [Rd] New package Oarray
Message-ID: <Pine.GSO.4.20.0105180944250.1622-100000@laplace>

Hi Everyone,

I recently uploaded the package Oarray to CRAN.  After a suggestion from
Martin M., I should just clarify that this is a generalisation of zmatrix
in the following respects:

1) Can handle arbitrary numbers of extents;

2) Can have arbitrary non-negative offsets (not just zero) that vary
across the extents;

3) Can be switched also to have negative offsets, in which case negative
subscripts *do not* drop components.

Oarray operates quite differently from zmatrix, depending upon the way
that match.call() parses the calls to "[.Oarray" and "[<-.Oarray" (I hope
that this is stable!).

I often use R as a general-purpose computing environment and I have
encountered several situations in which arrays with offsets that are not
zero or one are useful, hence the generalisation of zmatrix.  I would be
interested if anyone can suggest any applications in statistics, though!

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun May 20 01:32:41 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sun, 20 May 2001 02:32:41 +0200 (MET DST)
Subject: [Rd] legend() with xpd=T; omission of initial plot character (PR#943)
Message-ID: <200105200032.CAA02504@pubhealth.ku.dk>


In the following:

plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.

I obtained the same behaviour when placing a legend
in the margin following use of pairs()

-please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.3
  year = 2001
  month = 04
  day = 26
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun May 20 01:39:36 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sun, 20 May 2001 02:39:36 +0200 (MET DST)
Subject: [Rd] hist() ignores 'probability=T' (PR#944)
Message-ID: <200105200039.CAA02528@pubhealth.ku.dk>

In the following, 'probability=T' is ignored,
i.e. the vertical axis is labelled in
frequencies.

However hist(islands, freq=F) achieves the desired effect.

 > data(islands)
 > hist(islands, probability=T)  # Vertical axis gives frequencies
 > hist(islands, freq=F)              # Expected result

--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.3
  year = 2001
  month = 04
  day = 26
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun May 20 07:22:23 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 20 May 2001 07:22:23 +0100 (GMT Daylight Time)
Subject: [Rd] hist() ignores 'probability=T' (PR#944)
In-Reply-To: <200105200039.CAA02528@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.31.0105200720110.63-100000@tern.stats>

On Sun, 20 May 2001 john.maindonald@anu.edu.au wrote:

> In the following, 'probability=T' is ignored,
> i.e. the vertical axis is labelled in
> frequencies.

It's a 1.2.3-only bug already found (by Jonathan Marchini) and fixed in the
sources.  From NEWS in R-devel:

    o	hist.default() was ignoring its `probability' argument for
	equi-spaced breaks.


>
> However hist(islands, freq=F) achieves the desired effect.
>
>  > data(islands)
>  > hist(islands, probability=T)  # Vertical axis gives frequencies
>  > hist(islands, freq=F)              # Expected result
>
> --please do not edit the information below--
>
> Version:
>   platform = i386-pc-mingw32
>   arch = x86
>   os = Win32
>   system = x86, Win32
>   status =
>   major = 1
>   minor = 2.3
>   year = 2001
>   month = 04
>   day = 26
>   language = R
>
> Windows 98 SE 4.10 (build 2222)  A
>
> Search Path:
>   .GlobalEnv, package:ctest, Autoloads, package:base
> John Maindonald               email : john.maindonald@anu.edu.au
> Statistical Consulting Unit,  phone : (6125)3998
> c/o CMA, SMS,                 fax   : (6125)5549
> John Dedman Mathematical Sciences Building
> Australian National University
> Canberra ACT 0200
> Australia
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Mon May 21 06:15:06 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Mon, 21 May 2001 07:15:06 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200105210515.HAA17058@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 930 *
Subject: Re: [R] Crazy plots of time-series against dates
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 May 2001 21:33:53 +0200
--error in chron package
* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
--Only on a specific sample file: send to maintainer.
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

* PR# 899 *
Subject: documentation problems in str.Rd
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
Date: Sat, 7 Apr 2001 23:08:23 +0200
--fixed (both code and documentation) for 1.3  (MM).

Directory:  Graphics

* PR# 917 *
Subject: boxplot
From: skala@incoma.cz
Date: Fri, 20 Apr 2001 08:43:29 +0200 (MET DST)
--fixed for 1.2.3  (one could consider the bug an `accidental feature',
--		  but the documentation and the other S implementations 
--		  differ).
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 924 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:58:17 +0200 (MET DST)
--same as 923
* PR# 923 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:56:59 +0200 (MET DST)
--too little information

Directory:  Language

* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 929 *
Subject:  Segmentation fault linked to memory? 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 30 Apr 2001 14:34:11 +0100 (BST)
--looks like 32-bit integer overflow error in counting allocation size
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 862 *
Subject: Wrong sign for Pearson residuals
From: faraway@umich.edu
Date: Mon, 5 Mar 2001 18:04:34 +0100 (MET)

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 935 *
Subject:  help.start() fails 
From: "Wilhelm B. Kloke" <wb@vestein.arb-phys.uni-dortmund.de>
Date: Wed, 9 May 2001 13:43:49 +0200 (MET DST)
--Report on 1.2.1: on other systems the file is installed with 644.
* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
--Not applied for 1.2.3 (why?)
* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
--(Should be taken care of for 1.2.3).
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500

Directory:  TooMuchAtOnce

* PR# 918 *
Subject: several bugs
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Sun, 22 Apr 2001 23:13:38 -0400 (EDT)
--1. as.numeric -> use as.double.FOO for methods -- doc.fixed for 1.2.3
--2. cannot set attribute on NULL -- no bug
--3. rep(list() ... ) :  a wish  fulfilled for 1.3.x
--4. %*% is not a generic in R (but is fast!) but in S+  -- not a bug
--5. S-plus (S4) compatibility  -- a wish but not for now
--6. list()s with dim() attribute -- an ongoing `research topic'  :-)
* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

* PR# 927 *
Subject: Rgui 1.2.3 for Windows crashes reading huge CSV file
From: znmeb@aracnet.com
Date: Mon, 30 Apr 2001 07:14:50 +0200 (MET DST)
--Not clear this is to do with Windows.
* PR# 926 *
Subject: Rgui crash
From: bellis@hsph.harvard.edu
Date: Sun, 29 Apr 2001 20:45:15 +0200 (MET DST)
--Unable to reproduce even on a Win2k machine
* PR# 912 *
Subject: Rgui.exe crash on Windows 2000
From: gilg.seeber@uibk.ac.at
Date: Thu, 12 Apr 2001 15:07:52 +0200 (MET DST)
--seems to be specific to the submitter's system.
--Cannot reproduce.
* PR# 906 *
Subject: Win98 wheelmouse graphics lock problem
From: cpaul@ucla.edu
Date: Tue, 10 Apr 2001 17:50:44 +0200 (MET DST)
--Cannot reproduce without more information
--In particular, does not happen with Microsoft Intellimouse on W2K

Directory:  incoming

* PR# 944 *
Subject: hist() ignores 'probability=T'
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:42:13 +1000
* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
* PR# 932 *
Subject: scoping error in xy.coords
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 04 May 2001 11:20:57 -0400
* PR# 939 *
Subject: Windows, RCMD INSTALL and path
From: david.firth@nuf.ox.ac.uk
Date: Fri, 11 May 2001 17:59:29 +0200 (MET DST)
* PR# 938 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:39:53 +0200 (MET DST)
* PR# 941 *
Subject: Mistake in qbeta.c ?
From: tlm21@cam.ac.uk
Date: Wed, 16 May 2001 13:49:34 +0200 (MET DST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 942 *
Subject: Minor documentation issue
From: jebacklund@dowagro.com
Date: Wed, 16 May 2001 19:58:13 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May 22 16:57:09 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 22 May 2001 11:57:09 -0400
Subject: [Rd] qr.qty call to  "dqrqty"
Message-ID: <3B0A8C55.AE5E1C9E@bank-banque-canada.ca>

The .Fortran call to  "dqrqty" in qr.qty does not specify DUP which means it defaults
to TRUE.  I have looked through the fortan code for dqrqty and routines it calls and
also done some testing but cannot find any reason that would cause a problem with
DUP=FALSE.

I realize this is considered the "risky" option, but the change can result in
considerable memory saving in some problems. Can this .Fortran call can be changed?

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Tue May 22 19:07:59 2001
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Tue, 22 May 2001 14:07:59 -0400
Subject: [Rd] Job announcement
Message-ID: <20010522140759.F10945@jimmy.harvard.edu>

I realize this isn't quite the correct forum (but then I don't think
that there is one).
Anyways, I've just been given enough money to hire two programmer for
at least two years to work on the following project:
(for experienced programmers only, please, salary in the 70k range)


BRIEF DESCRIPTION FOR JOB POSTING
To develop a system for the manipulation and analysis of microarray
data.  The system will integrate database management, statistical
methodology and biologically relevant metadata.

Education and/or license: Bachelor's degree in Computer Science or
equivalent
Experience Required: Experience with database programming/ design,
systems design, embedded languages, scripting languages, background in
biology or statistics, image analysis.  Experience with C or C++
essential.



The job is in Boston and is posted at monster.com among other places. 
R will be a major component and hence any experience in that regard
would be an asset.
I guess you might even think of it as a very well paying postdoc if
one wanted to do stat computing etc.

I'll be happy to answer questions but you need to apply through the
regular channels if interested.
  Thanks.

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@ci.tuwien.ac.at  Wed May 23 19:37:52 2001
From: warnes@ci.tuwien.ac.at (Gregory Warnes)
Date: Wed, 23 May 2001 20:37:52 +0200 (CEST)
Subject: [Rd] New generic functions in "R base" {was `truncate'}
Message-ID: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII

1) What are the issues with making _existing_ functions in base into
generics?

EG, I've recently become annoyed that plot() is a generic which can be
applied to a formula:

	plot( outcome ~ predictor)

but functions like points, lowess, etc are not generic or don't have
methods defined for formulae.  I've created a points.formula() and a
generic lowess(), lowess.default(), and lowess.formula().

Are there any problems in replacing the current points() with a generic
function, provided that the default function does the same thing as the
original function?

2) I have a couple of other functions I just want to throw out:

- A generic ci()  (for confidence interval) with a method for lm and
summary.lm.   

- The function boxplot.n which gives a standard boxplot annotated with the
number of observations in each group. 

-Greg

Files are attached




---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="boxplot.n.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1010523203752.2129B@luthien.ci.tuwien.ac.at>
Content-Description: 

IyBjcmVhdGUgYSBib3hwbG90IGFuZCBhbm5vdGF0ZSB3aXRoIHRoZSBudW1i
ZXIgb2Ygb2JzZXJ2YXRpb25zIGluIGVhY2ggZ3JvdXAuDQojDQojIHBhcmFt
ZXRlcnMNCiMgIC4uLjogIHN0YW5kYXJkIGJveHBsb3QgcGFyYW1ldGVycw0K
Iw0KIyAgdG9wOiAgaWYgVCBwdXQgbidzIGF0IHRvcCBvZiBwbG90dGluZyBy
ZWdpb24sIG90aGVyd2lzZSBhdCB0aGUgYm90dG9tLg0KIw0KIyAgc2hyaW5r
OiB2YWx1ZSB0byBzaHJpbmsgY2hhcmFjdGVyIHNpemUgd2hlbiBhbm5vdGF0
aW5nLiAgKFRoaXMgdmFsdWUgaXMNCiMgICAgICAgICAgYXBwbGllZCB0byBj
ZXguKQ0KIw0KIyAgdGV4dGNvbG9yOiB0ZXh0IGNvbG9yDQojDQojIGV4YW1w
bGU6DQojDQojIGRhdGEgIDwtICBkYXRhLmZyYW1lKHk9cm5vcm0oMTAwKSwg
eD1mYWN0b3IocmVwKGMoIkEiLCJDIiwiRiIsIloiKSwyNSkpKQ0KDQogYm94
cGxvdC5uKCB5IH4geCwgZGF0YT1kYXRhKQ0KDQoNCg0KYm94cGxvdC5uICA8
LSBmdW5jdGlvbiggLi4uLCB0b3A9Riwgc2hyaW5rPTEuMCwgdGV4dGNvbG9y
PU5VTEwgKQ0KICB7DQogICAgYm94IDwtIG1hdGNoLmNhbGwoKSAgICAgICAg
ICAgIyBnZXQgY2FsbA0KICAgIGJveCR0b3AgIDwtIGJveCRzaHJpbmcgIDwt
IGJveCR0ZXh0Y29sb3IgIDwtIE5VTEwNCiAgICBib3hbWzFdXSAgPC0gYXMu
bmFtZSgiYm94cGxvdCIpDQogICAgYm94IDwtIGV2YWwoYm94LCBwYXJlbnQu
ZnJhbWUoKSkNCg0KICAgIGlmKHRvcCkNCiAgICAgIHdoZXJlICA8LSBwYXIo
InVzciIpWzRdDQogICAgZWxzZQ0KICAgICAgd2hlcmUgIDwtIHBhcigidXNy
IilbM10NCiAgICBjZXggPC0gcGFyKCJjZXgiKQ0KICAgIHBhcihjZXg9c2hy
aW5rKmNleCkNCiAgICB0ZXh0KCB4PTE6bGVuZ3RoKGJveCRuKSwgeT13aGVy
ZSwgbGFiZWxzPXBhc3RlKCJuPSIsYm94JG4sc2VwPSIiKSwgYWRqPWMoMC41
LDApLA0KICAgICAgICAgY29sPXRleHRjb2xvcikNCiAgICBwYXIoY2V4PWNl
eCkNCg0KICAgIGludmlzaWJsZShib3gpDQogIH0NCg==
---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="lowess.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1010523203752.2129C@luthien.ci.tuwien.ac.at>
Content-Description: 

bG93ZXNzLmRlZmF1bHQgIDwtIGdldCgibG93ZXNzIixwb3M9InBhY2thZ2U6
YmFzZSIpDQoNCmxvd2VzcyAgPC0gZnVuY3Rpb24oeCwuLi4pDQogIFVzZU1l
dGhvZCgibG93ZXNzIikNCg0KImxvd2Vzcy5mb3JtdWxhIiA8LQ0KICBmdW5j
dGlvbiAoZm9ybXVsYSwgZGF0YSA9IE5VTEwsIHN1YnNldCwgbmEuYWN0aW9u
LCAuLi4pIA0Kew0KICBpZiAobWlzc2luZyhmb3JtdWxhKSB8fCAobGVuZ3Ro
KGZvcm11bGEpICE9IDMpKSANCiAgICBzdG9wKCJmb3JtdWxhIG1pc3Npbmcg
b3IgaW5jb3JyZWN0IikNCiAgaWYgKG1pc3NpbmcobmEuYWN0aW9uKSkgDQog
ICAgbmEuYWN0aW9uIDwtIGdldE9wdGlvbigibmEuYWN0aW9uIikNCiAgbSA8
LSBtYXRjaC5jYWxsKGV4cGFuZC5kb3RzID0gRkFMU0UpDQogIGlmIChpcy5t
YXRyaXgoZXZhbChtJGRhdGEsIHBhcmVudC5mcmFtZSgpKSkpIA0KICAgIG0k
ZGF0YSA8LSBhcy5kYXRhLmZyYW1lKGRhdGEpDQogIG0kLi4uIDwtIE5VTEwN
CiAgbVtbMV1dIDwtIGFzLm5hbWUoIm1vZGVsLmZyYW1lIikNCiAgbWYgPC0g
ZXZhbChtLCBwYXJlbnQuZnJhbWUoKSkNCiAgcmVzcG9uc2UgPC0gYXR0cihh
dHRyKG1mLCAidGVybXMiKSwgInJlc3BvbnNlIikNCiAgbG93ZXNzKG1mW1st
cmVzcG9uc2VdXSwgbWZbW3Jlc3BvbnNlXV0sIC4uLikNCn0NCg==
---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="points.formula.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1010523203752.2129D@luthien.ci.tuwien.ac.at>
Content-Description: 

InBvaW50cy5mb3JtdWxhIiA8LQ0KICBmdW5jdGlvbiAoZm9ybXVsYSwgZGF0
YSA9IE5VTEwsIHN1YnNldCwgbmEuYWN0aW9uLCAuLi4pIA0Kew0KICBpZiAo
bWlzc2luZyhmb3JtdWxhKSB8fCAobGVuZ3RoKGZvcm11bGEpICE9IDMpKSAN
CiAgICBzdG9wKCJmb3JtdWxhIG1pc3Npbmcgb3IgaW5jb3JyZWN0IikNCiAg
aWYgKG1pc3NpbmcobmEuYWN0aW9uKSkgDQogICAgbmEuYWN0aW9uIDwtIGdl
dE9wdGlvbigibmEuYWN0aW9uIikNCiAgbSA8LSBtYXRjaC5jYWxsKGV4cGFu
ZC5kb3RzID0gRkFMU0UpDQogIGlmIChpcy5tYXRyaXgoZXZhbChtJGRhdGEs
IHBhcmVudC5mcmFtZSgpKSkpIA0KICAgIG0kZGF0YSA8LSBhcy5kYXRhLmZy
YW1lKGRhdGEpDQogIG0kLi4uIDwtIE5VTEwNCiAgbVtbMV1dIDwtIGFzLm5h
bWUoIm1vZGVsLmZyYW1lIikNCiAgbWYgPC0gZXZhbChtLCBwYXJlbnQuZnJh
bWUoKSkNCiAgcmVzcG9uc2UgPC0gYXR0cihhdHRyKG1mLCAidGVybXMiKSwg
InJlc3BvbnNlIikNCiAgcG9pbnRzKG1mW1stcmVzcG9uc2VdXSwgbWZbW3Jl
c3BvbnNlXV0sIC4uLikNCn0NCg==
---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="ci.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1010523203752.2129E@luthien.ci.tuwien.ac.at>
Content-Description: 

Y2kgIDwtICBmdW5jdGlvbih4LC4uLikgVXNlTWV0aG9kKCJjaSIpDQoNCmNp
LnN1bW1hcnkubG0gIDwtICBmdW5jdGlvbih4LGNvbmZpZGVuY2U9MC45NSxh
bHBoYT0xLWNvbmZpZGVuY2UpIHsNCiAgZXN0ICA8LSAgY29lZih4KVssMV0g
Ow0KICBjaS5sb3cgIDwtIGVzdCArIHF0KGFscGhhLzIsIHgkZGZbMl0pICog
Y29lZih4KVssMl0gOw0KICBjaS5oaWdoIDwtIGVzdCAtIHF0KGFscGhhLzIs
IHgkZGZbMl0pICogY29lZih4KVssMl0gOw0KICByZXR2YWwgIDwtIGNiaW5k
KEVzdGltYXRlPWVzdCwNCiAgICAgICAgICAgICAgICAgICAiQ0kgbG93ZXIi
PWNpLmxvdywNCiAgICAgICAgICAgICAgICAgICAiQ0kgdXBwZXIiPWNpLmhp
Z2gsDQogICAgICAgICAgICAgICAgICAgIlN0ZC4gRXJyb3IiPSBjb2VmKHgp
WywyXSwNCiAgICAgICAgICAgICAgICAgICAicC12YWx1ZSIgPSBjb2VmKHgp
Wyw0XSkNCiAgcm93bmFtZXMocmV0dmFsKSAgPC0gIHJvd25hbWVzKGNvZWYo
eCkpDQogIHJldHZhbA0KfQ0KDQpjaS5sbSAgPC0gIGZ1bmN0aW9uKHgsLi4u
KQ0Kew0KICB4ICA8LSAgc3VtbWFyeSh4KQ0KICByZXR1cm4oY2kuc3VtbWFy
eS5sbSh4KSkNCn0NCg0K
---2088752589-1867062326-990643072=:2129--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May 23 19:56:34 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 23 May 2001 14:56:34 -0400
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEAF4@groexmbcr02.pfizer.com>


> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: Friday, May 18, 2001 11:30 AM
> To: gregory_r_warnes@groton.pfizer.com
> Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
>

[...]

> Apropos  ci() :
>
>  There's the very generally useful  confint() function in MASS.
>  Since MASS will become one of the recommended packages `real soon now',
>  I doubt that we'd want yet another one in `base'.
>  Or do you have reasons to prefer your ci() over V&R's  confint() ?
>  If so, it may make quite some sense discussing that on R-devel..
>
> Regards, Martin

Actually, I wasn't aware of the confint() function in MASS.  My ci()
function doesn't have any particular advantage.  


Actually, this illustrates a problem and raises another issue.  As it turns
out, I'm not the only one to have (unnecessarily) re-implemented the
features of confint() because it didn't occur to me to look in MASS for it.
I'm sure that others have had the same thing happen.

Shouldn't such generally useful functions get moved into base or some other
package that is on the default search path?  

-Greg







LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 23 20:12:45 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 May 2001 21:12:45 +0200
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: Gregory Warnes's message of "Wed, 23 May 2001 20:37:52 +0200 (CEST)"
References: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at>
Message-ID: <x2k837swuq.fsf@blueberry.kubism.ku.dk>

Gregory Warnes <warnes@ci.tuwien.ac.at> writes:

> EG, I've recently become annoyed that plot() is a generic which can be
> applied to a formula:
> 
> 	plot( outcome ~ predictor)
> 
> but functions like points, lowess, etc are not generic or don't have
> methods defined for formulae.  I've created a points.formula() and a
> generic lowess(), lowess.default(), and lowess.formula().
> 
> Are there any problems in replacing the current points() with a generic
> function, provided that the default function does the same thing as the
> original function?

Ummm, points.formula has been in base R since february 2000... slipped
in between 0.99.0 and 1.0.0 apparently.

Also note that loess() (with the correct spelling, in the modreg
library) does have a formula interface.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 23 20:33:42 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 23 May 2001 20:33:42 +0100 (BST)
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at>
Message-ID: <Pine.LNX.4.21.0105232030020.4905-100000@localhost>

On Wed, 23 May 2001, Gregory Warnes wrote:

> 1) What are the issues with making _existing_ functions in base into
> generics?

There are some performance issues (not necessarily relevant here). Last
time I looked hard at this method dispatch was taking ca 0.2 secs (not on
my fastest machines ....), and some generics turn up rather high on
profiling list rather often.

The other issue I see is the argument list for the generic, given that
all method ought to agree with the generic (at least aesthetically).

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Wed May 23 20:39:09 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Wed, 23 May 2001 15:39:09 -0400
Subject: [Rd] New generic functions in "R base" {was `truncate'}
References: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at>
Message-ID: <3B0C11DD.501B427E@umsanet.edu.bo>



Gregory Warnes wrote:
> 
> 1) What are the issues with making _existing_ functions in base into
> generics?
> 
> EG, I've recently become annoyed that plot() is a generic which can be
> applied to a formula:
> 
>         plot( outcome ~ predictor)
> 
> but functions like points, lowess, etc are not generic or don't have
> methods defined for formulae.  I've created a points.formula() and a
> generic lowess(), lowess.default(), and lowess.formula().

lowess is supposed to handle formulas and will do so when the 
scope error in xy.coords is corrected.

Kjetil Halvorsen
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 23 20:40:34 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 23 May 2001 20:40:34 +0100 (BST)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEAF4@groexmbcr02.pfizer.com>
Message-ID: <Pine.LNX.4.21.0105232034390.4905-100000@localhost>

On Wed, 23 May 2001, Warnes, Gregory R wrote:

> 
> > From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> > Sent: Friday, May 18, 2001 11:30 AM
> > To: gregory_r_warnes@groton.pfizer.com
> > Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
> >
> 
> [...]
> 
> > Apropos  ci() :
> >
> >  There's the very generally useful  confint() function in MASS.
> >  Since MASS will become one of the recommended packages `real soon now',
> >  I doubt that we'd want yet another one in `base'.
> >  Or do you have reasons to prefer your ci() over V&R's  confint() ?
> >  If so, it may make quite some sense discussing that on R-devel..
> >
> > Regards, Martin
> 
> Actually, I wasn't aware of the confint() function in MASS.  My ci()
> function doesn't have any particular advantage.  
> 
> 
> Actually, this illustrates a problem and raises another issue.  As it turns
> out, I'm not the only one to have (unnecessarily) re-implemented the
> features of confint() because it didn't occur to me to look in MASS for it.
> I'm sure that others have had the same thing happen.
> 
> Shouldn't such generally useful functions get moved into base or some other
> package that is on the default search path?  

Interesting Q.  Partly for perfomance reasons and partly for embedded
applications, we are trying to make base a lot smaller.  The agreed idea
seems to be to have a tiny core for R and lots of added functionality.
Unfortunately whereas S seems to be able to have long search paths without
performance penalty, we haven't found the right tricks in R (although it is
much better than it once was).  So just adding MASS to the path has
something like a 5% penalty (last timed just pre-1.2.0).  And careful
observers may have noticed that R gets a little slower (on almost) each
release.

One step in this direction that 1.3.0 will have is load-on-demand modules,
that is compiled code that is not loaded until used.  This allowed us to
avoid a 50% increase in code size. 

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed May 23 20:54:06 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 23 May 2001 15:54:06 -0400 (EDT)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <Pine.LNX.4.21.0105232034390.4905-100000@localhost>
Message-ID: <Pine.LNX.4.30.0105231551210.18969-100000@bolker.zoo.ufl.edu>


  Just my two cents -- but --
  I don't really care if it's in the search path or not, I think the
biggest help to this particular problem would be getting a full-text
search engine going and incorporated into the R-project home page.  Of
course, it's easy for me to say this since I don't have the time or
expertise to do it myself ...
  (One minor can of worms that occurs to me is what sites (if any) to
index in addition to CRAN.  I often look at S-news, Jim Lindsey's site,
Frank Harrell's site, etc., etc., but there could be a problem with
indexing "unofficial" sites and then having to answer myriad questions
from people about how to make things work in R ...)

  Ben Bolker

On Wed, 23 May 2001, Prof Brian Ripley wrote:

> On Wed, 23 May 2001, Warnes, Gregory R wrote:
>
> >
> > > From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> > > Sent: Friday, May 18, 2001 11:30 AM
> > > To: gregory_r_warnes@groton.pfizer.com
> > > Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
> > >
> >
> > [...]
> >
> > > Apropos  ci() :
> > >
> > >  There's the very generally useful  confint() function in MASS.
> > >  Since MASS will become one of the recommended packages `real soon now',
> > >  I doubt that we'd want yet another one in `base'.
> > >  Or do you have reasons to prefer your ci() over V&R's  confint() ?
> > >  If so, it may make quite some sense discussing that on R-devel..
> > >
> > > Regards, Martin
> >
> > Actually, I wasn't aware of the confint() function in MASS.  My ci()
> > function doesn't have any particular advantage.
> >
> >
> > Actually, this illustrates a problem and raises another issue.  As it turns
> > out, I'm not the only one to have (unnecessarily) re-implemented the
> > features of confint() because it didn't occur to me to look in MASS for it.
> > I'm sure that others have had the same thing happen.
> >
> > Shouldn't such generally useful functions get moved into base or some other
> > package that is on the default search path?
>
> Interesting Q.  Partly for perfomance reasons and partly for embedded
> applications, we are trying to make base a lot smaller.  The agreed idea
> seems to be to have a tiny core for R and lots of added functionality.
> Unfortunately whereas S seems to be able to have long search paths without
> performance penalty, we haven't found the right tricks in R (although it is
> much better than it once was).  So just adding MASS to the path has
> something like a 5% penalty (last timed just pre-1.2.0).  And careful
> observers may have noticed that R gets a little slower (on almost) each
> release.
>
> One step in this direction that 1.3.0 will have is load-on-demand modules,
> that is compiled code that is not loaded until used.  This allowed us to
> avoid a 50% increase in code size.
>
> Brian
>
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 23 21:33:02 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 23 May 2001 16:33:02 -0400
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
References: <5429125E11E4D411AF7300805FE603A8014CEAF4@groexmbcr02.pfizer.com>
Message-ID: <3B0C1E7E.3DEECF5F@bank-banque-canada.ca>

>Actually, this illustrates a problem and raises another issue.  As it
turns
>out, I'm not the only one to have (unnecessarily) re-implemented the
>features of confint() because it didn't occur to me to look in MASS for
it.
>I'm sure that others have had the same thing happen.

Some search/browse capability sure would be nice and I think this
problem is going to get worse with the elimination of function.html in R
1.3.0.  Perhaps there is a possibility of putting a giant index of all
functions in all packages on CRAN?

>Shouldn't such generally useful functions get moved into base or some
>other package that is on the default search path?

The potential for name conflicts seems rather severe with this approach.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 23 22:30:49 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 23 May 2001 22:30:49 +0100 (BST)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <3B0C1E7E.3DEECF5F@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.21.0105232220160.7370-100000@localhost>

On Wed, 23 May 2001, Paul Gilbert wrote:

> >Actually, this illustrates a problem and raises another issue.  As it
> turns
> >out, I'm not the only one to have (unnecessarily) re-implemented the
> >features of confint() because it didn't occur to me to look in MASS for
> it.
> >I'm sure that others have had the same thing happen.
> 
> Some search/browse capability sure would be nice and I think this
> problem is going to get worse with the elimination of function.html in R
> 1.3.0.  Perhaps there is a possibility of putting a giant index of all
> functions in all packages on CRAN?

Not only is it nice, but we do already have it, twice, in fact!

There are two search/browse facilities for all current libraries (and I
mean that, not packages), namely help.search() and the Java-based HTML
search.  Try them some time!

> help.search("confidence interval")
Help files with alias or title matching `confidence interval':
Type `?FOO' to inspect entry `FOO(PKG) TITLE'.

confint(MASS)           Confidence Intervals for Model Parameters
[...]

So why would removing an *index* affect the ability to search?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May 23 22:40:27 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 23 May 2001 17:40:27 -0400
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEAF6@groexmbcr02.pfizer.com>

  > From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
  
  > > Warnes, Gregory R wrote:
  > >
  > > Shouldn't such generally useful functions get moved into base or some
other
  > > package that is on the default search path?  
  > 
  > Interesting Q.  Partly for performance reasons and partly for 
  > embedded applications, we are trying to make base a lot smaller.  
  > The agreed idea seems to be to have a tiny core for R and lots of added 
  > functionality.


I think the problem is that functions are not necessarily well grouped into
coherent packages.   Currently, what functionality is contained in each
package isn't being managed, per se.  Rather packages and functions within
packages seem to be accumulating organically.  

The need to trim down R-base to provides us with the opportunity to think
about how features are divided into packages.  We should make sure that the
packages that we create are coherently organized.  To do this , we will need
to "pull in" code from existing packages as well as "separating out" code
from R-base.

-Greg



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 23 22:52:32 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 May 2001 23:52:32 +0200
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: kjetil halvorsen's message of "Wed, 23 May 2001 15:39:09 -0400"
References: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at> <3B0C11DD.501B427E@umsanet.edu.bo>
Message-ID: <x2d78zu40v.fsf@blueberry.kubism.ku.dk>

kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:

> lowess is supposed to handle formulas and will do so when the 
> scope error in xy.coords is corrected.

...which we seem to have forgotten to do in r-devel. Does this have a
PR# ?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rpeng@stat.ucla.edu  Thu May 24 02:18:12 2001
From: rpeng@stat.ucla.edu (rpeng@stat.ucla.edu)
Date: Thu, 24 May 2001 03:18:12 +0200 (MET DST)
Subject: [Rd] Problem with hist(x, prob=T) (PR#947)
Message-ID: <200105240118.DAA15398@pubhealth.ku.dk>

Full_Name: Roger Peng
Version: 1.2.3
OS: Linux
Submission from: (NULL) (128.97.86.109)


In R version 1.2.3, the hist command does not respond to the probability=TRUE
parameter.  So 

hist(x, probability=FALSE) 

and 

hist(x, probability=TRUE) 

produce the same (graphical) output.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 24 07:15:33 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 24 May 2001 07:15:33 +0100 (BST)
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <x2d78zu40v.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.21.0105240714250.758-100000@localhost>

On 23 May 2001, Peter Dalgaard BSA wrote:

> kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:
> 
> > lowess is supposed to handle formulas and will do so when the 
> > scope error in xy.coords is corrected.
> 
> ...which we seem to have forgotten to do in r-devel. Does this have a
> PR# ?

PR# 932, as a search of BUGS in R-devel reveals.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 24 07:23:48 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 24 May 2001 08:23:48 +0200 (MET DST)
Subject: [Rd] Problem with hist(x, prob=T) (PR#947)
Message-ID: <200105240623.IAA15950@pubhealth.ku.dk>

On Thu, 24 May 2001 rpeng@stat.ucla.edu wrote:

> Full_Name: Roger Peng
> Version: 1.2.3
> OS: Linux
> Submission from: (NULL) (128.97.86.109)
> 
> 
> In R version 1.2.3, the hist command does not respond to the probability=TRUE
> parameter.  So 
> 
> hist(x, probability=FALSE) 
> 
> and 
> 
> hist(x, probability=TRUE) 
> 
> produce the same (graphical) output.

This is bug PR# 944, already fixed in R-devel when that was reported.
Use `freq' instaed for now.

You can search R-bugs to see if the problem has already been reported.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Thu May 24 17:37:31 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Thu, 24 May 2001 12:37:31 -0400
Subject: [Rd] New generic functions in "R base" {was `truncate'}
References: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at> <3B0C11DD.501B427E@umsanet.edu.bo> <x2d78zu40v.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B0D38CB.8C72AA3A@umsanet.edu.bo>



Peter Dalgaard BSA wrote:
> 
> kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:
> 
> > lowess is supposed to handle formulas and will do so when the
> > scope error in xy.coords is corrected.
> 
> ...which we seem to have forgotten to do in r-devel. Does this have a
> PR# ?

scoping error in xy.coords (PR#932)

Kjetil Halvorsen
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu May 24 18:04:50 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 24 May 2001 13:04:50 -0400
Subject: [Rd] New Package: gregmisc
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEAFC@groexmbcr02.pfizer.com>

I've thrown a couple of useful functions into a new package "gregmisc" and
uploaded them to ftp://ftp.ci.tuwien.ac.at/incoming/gregmisc_0.1.1.tgz 

Here's DESCRIPTION:

	Package: gregmisc
	Description: Misc Functions written/maintained by Gregory R. Warnes
	Title: Greg's Miscellaneous Functions
	Version: 0.1
	Date: 2001/05/24
	Depends: R 
	Maintainer: Gregory R. Warnes <Gregory_R_Warnes@groton.pfizer.com>

	Author: Gregory R. Warnes.  Includes code provided by William
Venables 
	        and Ben Bolker. 
	License: GPL (version 2 or later)

and INDEX:

	boxplot.n                Produce a Boxplot Annotated with the Number
of
	                         Observations
	ci                       Compute Confidence Intervals
	plotCI                   Plot Error Bars
	plotmeans                Plot Group Means and Confidence Intervals


I'm perfectly happy for these functions to get incorporated into other
packages.  Feel free to email comments/criticisms/whatever.

-Greg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri May 25 17:05:26 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 25 May 2001 12:05:26 -0400
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
References: <Pine.LNX.4.21.0105232220160.7370-100000@localhost>
Message-ID: <3B0E82C6.8E5C4405@bank-banque-canada.ca>

PG> Some search/browse capability sure would be nice and I think this
PG> problem is going to get worse with the elimination of function.html in R
PG> 1.3.0.  Perhaps there is a possibility of putting a giant index of all
PG> functions in all packages on CRAN?

BDR>Not only is it nice, but we do already have it, twice, in fact!
BDR>
BDR>There are two search/browse facilities for all current libraries (and I
BDR>mean that, not packages), namely help.search() and the Java-based HTML
BDR>search.  Try them some time!

Brian

Yes, I have tried these and they are very useful, but I believe they only work for
installed packages. If I am wrong about that then something else is broken since your
example gives this for me:

> help.search("confidence interval")
No help files found with alias or title matching `confidence interval'

What I had in mind was an ability to search available packages not just installed
ones. It is often difficult to find something unless you already know to install the
package that includes it, but often people don't know what package to look in. If
something does not exist in any package then one can never be sure without installing
all packages. (If this search facility is available on CRAN then I have missed it.)

Also, neither of these search facilities provide browsing. (The keyword by topic
gives some browsing capability but it is more like looking at a table of contents
than an index.)  I realize the list of functions would be extremely long, but
sometimes even matching the full text of the help description would not be enough
without some "fuzzy" matching (and I think we are a ways from this).  The problem may
be more severe for programming features than for statistics terms. Someone converting
from Matlab, Gauss, or APL will often know a term that describes exactly what they
want, but they don't know the R term to search for. Despite modern technology I still
often resort to browsing through the index of manuals.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 25 17:19:39 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 25 May 2001 17:19:39 +0100 (BST)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <3B0E82C6.8E5C4405@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0105251715400.1160-100000@gannet.stats>

On Fri, 25 May 2001, Paul Gilbert wrote:

> PG> Some search/browse capability sure would be nice and I think this
> PG> problem is going to get worse with the elimination of function.html in R
> PG> 1.3.0.  Perhaps there is a possibility of putting a giant index of all
> PG> functions in all packages on CRAN?
>
> BDR>Not only is it nice, but we do already have it, twice, in fact!
> BDR>
> BDR>There are two search/browse facilities for all current libraries (and I
> BDR>mean that, not packages), namely help.search() and the Java-based HTML
> BDR>search.  Try them some time!
>
> Brian
>
> Yes, I have tried these and they are very useful, but I believe they only work for
> installed packages. If I am wrong about that then something else is broken since your
> example gives this for me:
>
> > help.search("confidence interval")
> No help files found with alias or title matching `confidence interval'

Nothing does uninstalled packages, as R has no means of knowing about
them!  help.search does search un-loaded packages, as in my example.  In
fact the same set as the function list (on Unix).  Looks as if something
may be wrong your end: if MASS is in some library it should be found.

[1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base"
> help.search("confidence interval")
Help files with alias or title matching `confidence interval':
Type `?FOO' to inspect entry `FOO(PKG) TITLE'.

confint(MASS)                 Confidence Intervals for Model Parameters
...

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Fri May 25 18:17:14 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Fri, 25 May 2001 13:17:14 -0400 (EDT)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <Pine.LNX.4.31.0105251715400.1160-100000@gannet.stats>
Message-ID: <Pine.GSO.4.10.10105251311040.18933-100000@hsph.harvard.edu>

I think the proposal was for something along the lines of Perl's CPAN
module (or ActiveState's PPM for that matter)---sure, you have to update
indices periodically, but whatever. Perhaps some sort HTTP based system
for performing full text queries (since the database for that sort of
thing will undoubtably be large) would be in order, but the spirit of the
idea is certainly a good one---especially for new users (students, etc)
who don't know the system like the back of their hand. 'sides, kids these
days aren't used to things like manpages and apropos. ;-)

Byron Ellis (bellis@hsph.harvard.edu)

On Fri, 25 May 2001, Prof Brian Ripley wrote:

> On Fri, 25 May 2001, Paul Gilbert wrote:
> 
> > PG> Some search/browse capability sure would be nice and I think this
> > PG> problem is going to get worse with the elimination of function.html in R
> > PG> 1.3.0.  Perhaps there is a possibility of putting a giant index of all
> > PG> functions in all packages on CRAN?
> >
> > BDR>Not only is it nice, but we do already have it, twice, in fact!
> > BDR>
> > BDR>There are two search/browse facilities for all current libraries (and I
> > BDR>mean that, not packages), namely help.search() and the Java-based HTML
> > BDR>search.  Try them some time!
> >
> > Brian
> >
> > Yes, I have tried these and they are very useful, but I believe they only work for
> > installed packages. If I am wrong about that then something else is broken since your
> > example gives this for me:
> >
> > > help.search("confidence interval")
> > No help files found with alias or title matching `confidence interval'
> 
> Nothing does uninstalled packages, as R has no means of knowing about
> them!  help.search does search un-loaded packages, as in my example.  In
> fact the same set as the function list (on Unix).  Looks as if something
> may be wrong your end: if MASS is in some library it should be found.
> 
> [1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base"
> > help.search("confidence interval")
> Help files with alias or title matching `confidence interval':
> Type `?FOO' to inspect entry `FOO(PKG) TITLE'.
> 
> confint(MASS)                 Confidence Intervals for Model Parameters
> ...
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri May 25 18:34:36 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 25 May 2001 19:34:36 +0200
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <Pine.GSO.4.10.10105251311040.18933-100000@hsph.harvard.edu>
References: <Pine.LNX.4.31.0105251715400.1160-100000@gannet.stats>
 <Pine.GSO.4.10.10105251311040.18933-100000@hsph.harvard.edu>
Message-ID: <15118.38828.632164.173037@mithrandir.hornik.net>

>>>>> Byron Ellis writes:

> I think the proposal was for something along the lines of Perl's CPAN
> module (or ActiveState's PPM for that matter)---sure, you have to
> update indices periodically, but whatever. Perhaps some sort HTTP
> based system for performing full text queries (since the database for
> that sort of thing will undoubtably be large) would be in order, but
> the spirit of the idea is certainly a good one---especially for new
> users (students, etc) who don't know the system like the back of their
> hand. 'sides, kids these days aren't used to things like manpages and
> apropos. ;-)

> ...

Sorry for entering this a bit late.  The CRAN maintainers have actually
decided implementing something along the above lines a long time ago.
Unfortunately, it simply has not happened thus far.  In a way, this
would be a good project for a computer science student ...

In a nutshell, I see two approaches.  One amounts to having a web front
end for help.search() which Brian kindly pointed out.  I.e., CRAN would
have a prebuilt help db for all packages it provides, and a search
mechanism patterned after help.search() [you do not necessarily need an
R process for the search].  Full-text search fanatics might prefer us to
simply `install' all HTML files of the CRAN packages to some place and
provide full-text indexing and searching of that.

[To those who haven't read from me about this: full-text index/search
alone does not solve the problem.  You want fuzzy matching a la glimpse
along with that, otherwise e.g. spelling differences cannot be
resolved.]

As we hope that R 1.3.0 will support multiple package repositories, the
question *where* to search will become more delicated.  For example, the
packages by Jim Lindsey are not distributed via CRAN ...

If there are any volunteers for implementing this, pls let us know.

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Sat May 26 12:24:03 2001
From: p.malewski@tu-bs.de (p.malewski@tu-bs.de)
Date: Sat, 26 May 2001 13:24:03 +0200 (MET DST)
Subject: [Rd] xyplot,grid.text segfault (PR#948)
Message-ID: <200105261124.NAA27403@pubhealth.ku.dk>

First, thank you very much for that lattice-package, second, the code
below segfaults R:

zz <- data.frame(
                 y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                 g=as.character(rep(1:2,50)))
xyplot(y~ x|z,data=zz,groups=g,
            panel = function(x, y, subscripts, groups)  
            grid.text(x=x, y=y, label=groups[subscripts])
       )

I'm not sure if I have understood that panel stuff right, but anyway,
it shouldn't segfault. BTW: I also unsure if I have to use the
develop-version of R & whether lattice bugs should be submitted
(because of the devel-status??).

Peter

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat May 26 15:18:08 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 May 2001 16:18:08 +0200
Subject: [Rd] xyplot,grid.text segfault (PR#948)
In-Reply-To: p.malewski@tu-bs.de's message of "Sat, 26 May 2001 13:24:03 +0200 (MET DST)"
References: <200105261124.NAA27403@pubhealth.ku.dk>
Message-ID: <x2ae40p527.fsf@blueberry.kubism.ku.dk>

p.malewski@tu-bs.de writes:

> First, thank you very much for that lattice-package, second, the code
> below segfaults R:
> 
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)  
>             grid.text(x=x, y=y, label=groups[subscripts])
>        )
> 
> I'm not sure if I have understood that panel stuff right, but anyway,
> it shouldn't segfault. BTW: I also unsure if I have to use the
> develop-version of R & whether lattice bugs should be submitted
> (because of the devel-status??).

Well, it is easier for us to deal with erroneously submitted bug than
erroneously unsubmitted ones. We have an Add-Ons category on r-bugs to
put it in. 

Lattice is closely associated with the core team, so we'd be able to
track this kind of problem. With some other packages which we do not
maintain, we have some trouble figuring out whether a report has been
solved or whether it was even a bug in the first place (it would be
nice if the original submitters would lend a hand there).

As I remember it, Paul and Deepayan were somewhat vague about exactly
what was required, except that you'd need something relatively recent.
A segfault certainly looks like a real bug.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat May 26 17:30:18 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sat, 26 May 2001 18:30:18 +0200 (MET DST)
Subject: [Rd] xyplot,grid.text segfault (PR#948)
Message-ID: <200105261630.SAA28272@pubhealth.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:


> As I remember it, Paul and Deepayan were somewhat vague about exactly
> what was required, except that you'd need something relatively recent.
> A segfault certainly looks like a real bug.

...and your example crashes with the current development version of R
too, anyway.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat May 26 19:53:22 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 May 2001 20:53:22 +0200
Subject: [Rd] xyplot,grid.text segfault (PR#948)
In-Reply-To: p.malewski@tu-bs.de's message of "Sat, 26 May 2001 13:24:03 +0200 (MET DST)"
References: <200105261124.NAA27403@pubhealth.ku.dk>
Message-ID: <x2k834eycd.fsf@blueberry.kubism.ku.dk>

p.malewski@tu-bs.de writes:

> First, thank you very much for that lattice-package, second, the code
> below segfaults R:
> 
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)  
>             grid.text(x=x, y=y, label=groups[subscripts])
>        )
> 
> I'm not sure if I have understood that panel stuff right, but anyway,
> it shouldn't segfault. BTW: I also unsure if I have to use the
> develop-version of R & whether lattice bugs should be submitted
> (because of the devel-status??).
> 
> Peter

grid.text() seems unhappy with being passed a non-character vector for
the label argument. I think Paul muttered something to the effect that
he knew there would be that kind of weaknesses in the code.

The following runs successfully (well, at least it doesn't crash - the
result looks a bit weird):

library(lattice)
zz <- data.frame(
                 y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                 g=as.character(rep(1:2,50)))
xyplot(y~ x|z,data=zz,groups=g,
            panel = function(x, y, subscripts, groups)
            grid.text(x=x, y=y,
                      label=as.character(groups[subscripts]))
       )


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Sat May 26 22:28:59 2001
From: p.malewski@tu-bs.de (p.malewski@tu-bs.de)
Date: Sat, 26 May 2001 23:28:59 +0200 (MET DST)
Subject: [Rd] lattice: dev.print(postscript) gives probl. false background Info (PR#950)
Message-ID: <200105262128.XAA28793@pubhealth.ku.dk>

There seems to be a problem with the background margins (I only recognized it in a latex ):

xyplot(rnorm(100) ~ rnorm(100))
dev.print(postscript,"/tmp/tmp.ps")

whereas this works on the 1.2.3 version but not with 1.3.0:

dev.copy2eps("/tmp/tmp.ps")                 

both times a warning appears:
Warning message: 
unknown postscript font family, using Helvetica 


Here is the latex-file:

\documentclass{book}
\usepackage{graphicx}

\begin{document}
text texttext texttext texttext texttext texttext text
 \begin{figure}[htb!]
   \begin{center}
     \includegraphics[width=\columnwidth]{/tmp/tmp}      
     \caption{asdas}
   \end{center}
 \end{figure}
texttexttexttexttexttexttexttexttexttexttext
\end{document}

Peter


<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 05
 day = 25
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Sat May 26 22:28:57 2001
From: p.malewski@tu-bs.de (p.malewski@tu-bs.de)
Date: Sat, 26 May 2001 23:28:57 +0200 (MET DST)
Subject: [Rd] lattice: postscript() false margins (PR#949)
Message-ID: <200105262128.XAA28779@pubhealth.ku.dk>

Using lattice the posscript(file="") device gives false margins:

zz <- data.frame(
                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                  g=as.character(rep(1:2,50)))


postscript(file="/tmp/tmp.ps")
xyplot(x~y|g,data=xx)
dev.off()

whereas dev.print(postscript,file="") works fine 

dev.print(postscript,file="/tmp/tmp.ps")

Peter

<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 05
 day = 25
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon May 28 06:39:57 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Mon, 28 May 2001 01:39:57 -0400 (EDT)
Subject: [Rd] New Package: gregmisc
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEAFC@groexmbcr02.pfizer.com>
Message-ID: <Pine.LNX.4.30.0105280132420.5852-100000@bolker.zoo.ufl.edu>


   Do you have the latest version of plotCI?  (attached below, I didn't
send it as an attachment for the sake of R-devel)  It uses arrows()
instead of segments(), which simplifies the code a bit and incidentally
makes it work with logarithmic axes as well (since the sizes of the bar
ends are specified in absolute rather than user units).

  Should this code be the first entry in the "miscellaneous code"
repository at CRAN that was discussed a while back?

  By the way, something occurred to me ... my "miscellaneous packages"
function (which I haven't made available to CRAN yet, although I probably
will eventually) is called "bbmisc".  Yours is called "gregmisc".  Would
it make any sense to standardize these on "<lastname>misc" or
"<first_initial><lastname>misc" (bolkermisc, bbolkermisc) to avoid
confusion once we have a whole bunch of these packages?

  Also by the way, congratulations for actually getting around to posting
your miscellaneous functions to CRAN!  I hope to do as well.

  Ben Bolker

plotCI <- function (x, y = NULL, uiw, liw = uiw, aui=NULL, ali=aui,
                    err="y", ylim=NULL, xlim=NULL, sfrac = 0.01, gap=0, add=FALSE,
                    col=par("col"), lwd=par("lwd"), slty=par("lty"), xlab=NULL,
                    ylab=NULL, main="", pt.bg = NA, scol=col,
                    axes=TRUE, ...)  {
# from Bill Venables, R-list
  if (is.list(x)) {
    y <- x$y
    x <- x$x
  }
  if (is.null(y)) {
    if (is.null(x))
      stop("both x and y NULL")
    y <- as.numeric(x)
    x <- seq(along = x)
  }
  if (missing(xlab)) xlab <- deparse(substitute(x))
  if (missing(ylab)) ylab <- deparse(substitute(y))
  if (missing(uiw)) {  ## absolute limits
    ui <- aui
    li <- ali
  }
  else {  ## relative limits
    if (err=="y") z <- y else z <- x
    ui <- z + uiw
    li <- z - liw
  }
  if (err=="y" & is.null(ylim))
    ylim <- range(c(y, ui, li), na.rm=TRUE)
  else
    if (err=="x" & is.null(xlim))
      xlim <- range(c(x, ui, li), na.rm=TRUE)
  if (!add)
    plot(x, y, ylim = ylim, xlim = xlim, col=col, lwd=lwd, xlab=xlab, ylab=ylab,
         main=main, type="n", axes=axes, ...)
  if (gap==TRUE) gap <- 0.01  ## default gap size
  ul <- c(li, ui)
  if (err=="y") {
    gap <- rep(gap,length(x))*diff(par("usr")[3:4])
    smidge <- par("fin")[1] * sfrac
    arrows(x , li, x, pmax(y-gap,li), col=col, lwd=lwd, lty=slty, angle=90, length=smidge, code=1)
    arrows(x , ui, x, pmin(y+gap,ui), col=col, lwd=lwd, lty=slty, angle=90, length=smidge, code=1)
  }
  else if (err=="x") {
    gap <- rep(gap,length(x))*diff(par("usr")[1:2])
    smidge <- par("fin")[2] * sfrac
    arrows(li, y, pmax(x-gap,li), y, col=col, lwd=lwd, lty=slty, angle=90, length=smidge, code=1)
    arrows(ui, y, pmin(x+gap,ui), y, col=col, lwd=lwd, lty=slty, angle=90, length=smidge, code=1)
  }
  ## _now_ draw the points (in case we want to have "bg" set for points)
  points(x, y, col=col, lwd=lwd, bg=pt.bg, ...)
  invisible(list(x = x, y = y))
}

On Thu, 24 May 2001, Warnes, Gregory R wrote:

> I've thrown a couple of useful functions into a new package "gregmisc" and
> uploaded them to ftp://ftp.ci.tuwien.ac.at/incoming/gregmisc_0.1.1.tgz
>
> Here's DESCRIPTION:
>
> 	Package: gregmisc
> 	Description: Misc Functions written/maintained by Gregory R. Warnes
> 	Title: Greg's Miscellaneous Functions
> 	Version: 0.1
> 	Date: 2001/05/24
> 	Depends: R
> 	Maintainer: Gregory R. Warnes <Gregory_R_Warnes@groton.pfizer.com>
>
> 	Author: Gregory R. Warnes.  Includes code provided by William
> Venables
> 	        and Ben Bolker.
> 	License: GPL (version 2 or later)
>
> and INDEX:
>
> 	boxplot.n                Produce a Boxplot Annotated with the Number
> of
> 	                         Observations
> 	ci                       Compute Confidence Intervals
> 	plotCI                   Plot Error Bars
> 	plotmeans                Plot Group Means and Confidence Intervals
>
>
> I'm perfectly happy for these functions to get incorporated into other
> packages.  Feel free to email comments/criticisms/whatever.
>
> -Greg
>
>
>
>
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Nick.Guoth@anu.edu.au  Mon May 28 05:25:15 2001
From: Nick.Guoth@anu.edu.au (Nick.Guoth@anu.edu.au)
Date: Mon, 28 May 2001 06:25:15 +0200 (MET DST)
Subject: [Rd] Undeclared identifier in make compilation (PR#951)
Message-ID: <200105280425.GAA02627@pubhealth.ku.dk>

Full_Name: Nick Guoth
Version: 1.2.3
OS: SunOS 5.8 Generic_108528-03
Submission from: (NULL) (150.203.33.227)


>From running the make, the following error occurs:

gcc -I. -I../../../src/include -I../../../src/include -I/opt/x11r6.3/include
-I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
rbitmap.c: In function `R_SaveAsPng':
rbitmap.c:169: `PNG_INTERLACE_NONE' undeclared (first use in this function)
rbitmap.c:169: (Each undeclared identifier is reported only once
rbitmap.c:169: for each function it appears in.)
rbitmap.c:169: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in this
function)
rbitmap.c:170: `PNG_FILTER_TYPE_BASE' undeclared (first use in this function)
make[5]: *** [rbitmap.o] Error 1
make[5]: Leaving directory `/home/nick/R/R-1.2.3/src/unix/X11'
make[4]: *** [R] Error 2
make[4]: Leaving directory `/home/nick/R/R-1.2.3/src/unix/X11'
make[3]: *** [DLLs] Error 1
make[3]: Leaving directory `/home/nick/R/R-1.2.3/src/unix'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/home/nick/R/R-1.2.3/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/nick/R/R-1.2.3/src'
make: *** [R] Error 1


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Mon May 28 06:33:02 2001
From: deepayansarkar@yahoo.com (Mr deepayan sarkar)
Date: Sun, 27 May 2001 22:33:02 -0700 (PDT)
Subject: [Rd] lattice: postscript() false margins (PR#949)
In-Reply-To: <200105262128.XAA28779@pubhealth.ku.dk>
Message-ID: <20010528053302.24017.qmail@web13905.mail.yahoo.com>


This is not really a bug. grid is not compatible with 
standard R graphics, and just starting a device by 
calling postscript() or x11() will not work. You need 
to call the grid functions grid.start() and 
grid.stop() when you enter and exit grid graphics.

If you're only interested in the lattice stuff, then 
the proper way to initiate a postscript (or x11) 
device is to call 

trellis.device(postscript, file="foo"). 

You should probably also read the documentation for 
trellis.device, as you might not like the current 
defaults.



--- p.malewski@tu-bs.de wrote:
> Using lattice the posscript(file="") device gives
> false margins:
> 
> zz <- data.frame(
>                  
> y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                   g=as.character(rep(1:2,50)))
> 
> 
> postscript(file="/tmp/tmp.ps")
> xyplot(x~y|g,data=xx)
> dev.off()
> 
> whereas dev.print(postscript,file="") works fine 
> 
> dev.print(postscript,file="/tmp/tmp.ps")
> 
> Peter
> 
> <<insert bug report here>>
> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Under development (unstable)
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 05
>  day = 25
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:grid, package:lattice,
> package:ctest, Autoloads, package:base
> 
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:
> r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


__________________________________________________
Do You Yahoo!?
Yahoo! Auctions - buy the things you want at great prices
http://auctions.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 28 07:40:13 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 28 May 2001 08:40:13 +0200
Subject: [Rd] Recent spam -- should we forbid javascript?
In-Reply-To: <20010528012211.BIBB11152.mail2.rdc2.bc.home.com@[24.76.58.120]>
References: <20010528012211.BIBB11152.mail2.rdc2.bc.home.com@[24.76.58.120]>
Message-ID: <15121.62157.632639.321423@gargle.gargle.HOWL>

The recent spam that went to both R-devel and R-help would have been
 somewhat difficult to autodetect by the relatively simple filters we use.

One possibility to prevent these would be to disallow javascript at all
(in mails to the  mailing lists).
Does anyone see a reason against this measure?
     [note that there won't ever be a 100% spam proof system..]

Your list maintainer,

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 28 07:45:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 May 2001 08:45:08 +0200 (MET DST)
Subject: [Rd] Undeclared identifier in make compilation (PR#951)
Message-ID: <200105280645.IAA03866@pubhealth.ku.dk>

On Mon, 28 May 2001 Nick.Guoth@anu.edu.au wrote:

> Full_Name: Nick Guoth
> Version: 1.2.3
> OS: SunOS 5.8 Generic_108528-03
> Submission from: (NULL) (150.203.33.227)
>

I believe this means that the png headers were found but that they were
either way out of date or corrupt.  What is your png version?  Try
upgrading to the latest (1.0.10 last time I looked), or compile without the
png.h in your include path.

>
> >From running the make, the following error occurs:
>
> gcc -I. -I../../../src/include -I../../../src/include -I/opt/x11r6.3/include
> -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
> rbitmap.c: In function `R_SaveAsPng':
> rbitmap.c:169: `PNG_INTERLACE_NONE' undeclared (first use in this function)
> rbitmap.c:169: (Each undeclared identifier is reported only once
> rbitmap.c:169: for each function it appears in.)
> rbitmap.c:169: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in this
> function)
> rbitmap.c:170: `PNG_FILTER_TYPE_BASE' undeclared (first use in this function)
> make[5]: *** [rbitmap.o] Error 1
> make[5]: Leaving directory `/home/nick/R/R-1.2.3/src/unix/X11'
> make[4]: *** [R] Error 2
> make[4]: Leaving directory `/home/nick/R/R-1.2.3/src/unix/X11'
> make[3]: *** [DLLs] Error 1
> make[3]: Leaving directory `/home/nick/R/R-1.2.3/src/unix'
> make[2]: *** [R] Error 2
> make[2]: Leaving directory `/home/nick/R/R-1.2.3/src/main'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory `/home/nick/R/R-1.2.3/src'
> make: *** [R] Error 1
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Mon May 28 09:17:26 2001
From: p.malewski@tu-bs.de (Peter Malewski)
Date: Mon, 28 May 2001 10:17:26 +0200
Subject: [Rd] lattice: postscript() false margins (PR#949)
In-Reply-To: <20010528053302.24017.qmail@web13905.mail.yahoo.com>; from deepayansarkar@yahoo.com on Sun, May 27, 2001 at 10:33:02PM -0700
References: <200105262128.XAA28779@pubhealth.ku.dk> <20010528053302.24017.qmail@web13905.mail.yahoo.com>
Message-ID: <20010528101723.A8567@rzpool07.pool.rz.tu-bs.de>

On Sun, May 27, 2001 at 10:33:02PM -0700, Mr deepayan sarkar wrote:
> 
> This is not really a bug. grid is not compatible with 
> standard R graphics, and just starting a device by 
> calling postscript() or x11() will not work. You need 
> to call the grid functions grid.start() and 
> grid.stop() when you enter and exit grid graphics.
> 
> If you're only interested in the lattice stuff, then 
> the proper way to initiate a postscript (or x11) 
> device is to call 
> 
> trellis.device(postscript, file="foo"). 
> 
> You should probably also read the documentation for 
> trellis.device, as you might not like the current 
> defaults.

Thanks for your answer. Actually I've recognized that grid.start /grid.stop but 
forgot this using "postscript". 

Yesterday I've made some graphs with print.trellis --it is really flexible + 
handy. Of course I've to spend some more time to "grid" to really understand 
the concept.
 

Peter





-- 
P.Malewski, Limmerstr.47, 30451 Hannover, 0511-2135008
At work: http://www.MH-Hannover.de 0511 532 3194 / Fax: 0511 532 3190, 
P.Malewski@tu-bs.de, peter.malewski@gmx.de, malewski.peter@mh-hannover.de.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon May 28 09:39:28 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 28 May 2001 10:39:28 +0200 (MET DST)
Subject: [Rd] memory bug in is.na[n]() (PR#952)
Message-ID: <200105280839.KAA05566@pubhealth.ku.dk>

I've forgotten to submit this as bug report
(and haven't easily seen how to debug).  

The bug is both for  is.na() and is.nan()  {which makes much sense since
					the C code of the two is very similar!};
only one is shown below.

Martin

------- start of forwarded message -------
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: R-core@stat.math.ethz.ch
Subject: another is.nan  BUG  found by gctorture-testing demo(is.things)
Date: Thu, 12 Apr 2001 14:51:06 +0200

demo() being part of strict tests (since this morning),
reveals another bug in is.nan()
in both branches, but already in 1.2.2 
(ie. certainly not caused by Peter's recent fix) :

 gctorture(FALSE) # default
 is.nan(NULL)
 #-> logical(0)

 gctorture()
 is.nan(NULL)

Looks pretty strange :  {calling it subsequently does sometimes not reproduce}

> gctorture()
> is.nan(NULL)
$names
 [1] "is.nan() applied to non-(list or vector)"
 [2] ""                                        
 [3] ""                                        
 [4] ""                                        
 [5] ""                                        
 [6] ""                                        
 [7] ""                                        
 [8] ""                                        
 [9] ""                                        
[10] ""                                        
[11] ""                                        
[12] ""                                        
[13] ""                                        
[14] ""                                        
[15] ""                                        
[16] ""                                        
[17] ""                                        
[18] ""                                        
[19] ""                                        
[20] ""                                        
[21] ""                                        
[22] ""                                        
[23] ""                                        
[24] ""                                        
[25] ""                                        
[26] ""                                        
[27] ""                                        
[28] ""                                        
[29] ""                                        
[30] ""                                        
[31] ""                                        
[32] ""                                        
[33] ""                                        
[34] ""                                        
[35] ""                                        
[36] ""                                        
[37] ""                                        
[38] ""                                        
[39] ""                                        
[40] ""                                        
[41] ""                                        
[42] ""                                        
[43] ""                                        
[44] ""                                        
[45] ""                                        
[46] ""                                        
[47] ""                                        
[48] ""                                        
[49] ""                                        
[50] ""                                        

Warning message: 
is.nan() applied to non-(list or vector) in: is.nan(NULL) 
> 
------- end of forwarded message -------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon May 28 09:45:18 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 28 May 2001 10:45:18 +0200 (MET DST)
Subject: [Rd] bugs in deriv(*, *, function.arg = ) (PR#953)
Message-ID: <200105280845.KAA05650@pubhealth.ku.dk>

Also, this should have gone in R-bugs quite a while ago :

------- start of forwarded message -------
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: R-core@stat.math.ethz.ch
Subject: PROTECT() bugs in deriv(*, *, function.arg = ) 
Date: Mon, 16 Apr 2001 21:02:10 +0200

In R versions 0.50 and 0.64.2 ,
the following worked

      > deriv(expression(sin(cos(x) * y)), c("x","y"), function(x,y){})
      function (x, y) 
      {
	  .expr1 <- cos(x)
	  .expr2 <- .expr1 * y
	  .expr4 <- cos(.expr2)
	  .value <- sin(.expr2)
	  .grad <- array(0, c(length(.value), 2), list(NULL, c("x", 
	      "y")))
	  .grad[, "x"] <- -.expr4 * (sin(x) * y)
	  .grad[, "y"] <- .expr4 * .expr1
	  attr(.value, "gradient") <- .grad
	  .value
      }


    which *was* S(-plus) compatible.
    It stopped working with 0.65.1,
    and later someone added to  help(deriv) 's description of  function.arg

      \item{function.arg}{If specified, a character vector of arguments for
	a function return, or a function (with empty body) or \code{TRUE},
	the latter indicating that a function with argument names
	\code{namevec} should be used.

    the comment 
       >>>> \bold{Note:} this is incompatible with S.}

    Today, I've been looking a bit at the C code and I can't understand why
    giving the function.arg as a function doesn't work anymore.
    (it just returns the 'empty' function.arg).
    Interestingly, it *did* work when I ran things under gdb .. ? .. ?

    The result is the same under gctorture(),
    however, that does reveal a bug (missing PROTECT() ?),
    clearly even under 1.2.2 :

    > gctorture()

    > deriv(expression(sin(x + y^2)), c("x", "y"),c("x", "y"))
    [[1]]


    . 

    {
	.expr2 <- x + y^2
	.expr4 <- cos(.expr2)
	.value <- sin(.expr2)
	.grad <- array(0, c(length(.value), 2), list(NULL, c("x", 
	    "y")))
	.grad[, "x"] <- .expr4
	.grad[, "y"] <- .expr4 * (2 * y)
	attr(.value, "gradient") <- .grad
	.value
    }

    > 

which is a pretty funny beast.

Something for PROTECT() specialists; 
I think there really are two bugs, one when the `function.arg' is a
character vector (bug showing with gctorture()) and one when it is a
function (the body is just not set).

Note that I've committed a very slightly enhanced deriv.c for R-devel
but that should hopefully merge nicely once the bug is found and fixed on
R-release.

Martin

------- end of forwarded message -------


Note that the above "beast" is a "pairlist" ...
MM

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon May 28 18:07:37 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 28 May 2001 10:07:37 -0700 (PDT)
Subject: [Rd] memory bug in is.na[n]() (PR#952)
In-Reply-To: <200105280839.KAA05566@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0105281006010.24130-100000@homer41.u.washington.edu>

On Mon, 28 May 2001 maechler@stat.math.ethz.ch wrote:

> I've forgotten to submit this as bug report
> (and haven't easily seen how to debug).
>
> The bug is both for  is.na() and is.nan()  {which makes much sense since
> 					the C code of the two is very similar!};
> only one is shown below.

I think I've found it - I'll do a bit more testing.

Incidentally, on my machine if you do

gctorture()
is.nan(NULL)
is.nan(NULL)
is.nan(NULL)
...

it happens precisely on the second invocation.

	-thomas

>
> Martin
>
> ------- start of forwarded message -------
> From: Martin Maechler <maechler@stat.math.ethz.ch>
> To: R-core@stat.math.ethz.ch
> Subject: another is.nan  BUG  found by gctorture-testing demo(is.things)
> Date: Thu, 12 Apr 2001 14:51:06 +0200
>
> demo() being part of strict tests (since this morning),
> reveals another bug in is.nan()
> in both branches, but already in 1.2.2
> (ie. certainly not caused by Peter's recent fix) :
>
>  gctorture(FALSE) # default
>  is.nan(NULL)
>  #-> logical(0)
>
>  gctorture()
>  is.nan(NULL)
>
> Looks pretty strange :  {calling it subsequently does sometimes not reproduce}
>
> > gctorture()
> > is.nan(NULL)
> $names
>  [1] "is.nan() applied to non-(list or vector)"
>  [2] ""
>  [3] ""
>  [4] ""
>  [5] ""
>  [6] ""
>  [7] ""
>  [8] ""
>  [9] ""
> [10] ""
> [11] ""
> [12] ""
> [13] ""
> [14] ""
> [15] ""
> [16] ""
> [17] ""
> [18] ""
> [19] ""
> [20] ""
> [21] ""
> [22] ""
> [23] ""
> [24] ""
> [25] ""
> [26] ""
> [27] ""
> [28] ""
> [29] ""
> [30] ""
> [31] ""
> [32] ""
> [33] ""
> [34] ""
> [35] ""
> [36] ""
> [37] ""
> [38] ""
> [39] ""
> [40] ""
> [41] ""
> [42] ""
> [43] ""
> [44] ""
> [45] ""
> [46] ""
> [47] ""
> [48] ""
> [49] ""
> [50] ""
>
> Warning message:
> is.nan() applied to non-(list or vector) in: is.nan(NULL)
> >
> ------- end of forwarded message -------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle
^^^^^^^^^^^^^^^^^^^^^^^^
 NOTE NEW EMAIL ADDRESS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon May 28 18:31:22 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 May 2001 19:31:22 +0200
Subject: [Rd] memory bug in is.na[n]() (PR#952)
In-Reply-To: Thomas Lumley's message of "Mon, 28 May 2001 10:07:37 -0700 (PDT)"
References: <Pine.A41.4.33.0105281006010.24130-100000@homer41.u.washington.edu>
Message-ID: <x2wv71xtw5.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On Mon, 28 May 2001 maechler@stat.math.ethz.ch wrote:
> 
> > I've forgotten to submit this as bug report
> > (and haven't easily seen how to debug).
> >
> > The bug is both for  is.na() and is.nan()  {which makes much sense since
> > 					the C code of the two is very similar!};
> > only one is shown below.
> 
> I think I've found it - I'll do a bit more testing.

(I bet it was a copy+paste from my earlier fix re lists with NULL
elements... D*mn, I thought I checked that it wouldn't happen it the
list itself was NULL) 

> Incidentally, on my machine if you do
> 
> gctorture()
> is.nan(NULL)
> is.nan(NULL)
> is.nan(NULL)
> ...
> 
> it happens precisely on the second invocation.

Yes, with the new memory allocator you're not quite as sure to provoke
errors with gctorture() as with the old one. On the other hand it lets
base-Ex.R run through overnight rather than in two weeks...


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon May 28 18:44:57 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 28 May 2001 10:44:57 -0700 (PDT)
Subject: [Rd] memory bug in is.na[n]() (PR#952)
In-Reply-To: <x2wv71xtw5.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105281038580.24130-100000@homer41.u.washington.edu>

On 28 May 2001, Peter Dalgaard BSA wrote:

> Thomas Lumley <tlumley@u.washington.edu> writes:
>
> > On Mon, 28 May 2001 maechler@stat.math.ethz.ch wrote:
> >
> > > I've forgotten to submit this as bug report
> > > (and haven't easily seen how to debug).
> > >
> > > The bug is both for  is.na() and is.nan()  {which makes much sense since
> > > 					the C code of the two is very similar!};
> > > only one is shown below.
> >
> > I think I've found it - I'll do a bit more testing.
>

Committed.  The ans variable wasn't protected. This only matters when
is.nan returns a warning, as otherwise there is no more allocation before
the result is returned and protected by the caller.

Similar errors happened with is.na(.GlobalEnv) or is.na(new.env()).

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon May 28 21:58:20 2001
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Mon, 28 May 2001 22:58:20 +0200 (MET DST)
Subject: [Rd] deriv (PR#953)
Message-ID: <200105282058.WAA13802@pubhealth.ku.dk>


------- start of forwarded message -------
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: R-core@stat.math.ethz.ch
Subject: PROTECT() bugs in deriv(*, *, function.arg = )
Date: Mon, 16 Apr 2001 21:02:10 +0200

In R versions 0.50 and 0.64.2 ,
the following worked

      > deriv(expression(sin(cos(x) * y)), c("x","y"), function(x,y){})
      function (x, y)
      {
          .expr1 <- cos(x)
          .expr2 <- .expr1 * y
          .expr4 <- cos(.expr2)
          .value <- sin(.expr2)
          .grad <- array(0, c(length(.value), 2), list(NULL, c("x",
              "y")))
          .grad[, "x"] <- -.expr4 * (sin(x) * y)
          .grad[, "y"] <- .expr4 * .expr1
          attr(.value, "gradient") <- .grad
          .value
      }



The second bug (gctorture-provoked) is a missing PROTECT(), which I will
commit when I've run make check.

The first bug is very strange and I suspect there's something going on in
the memory management.  Supplying a function as the third argument should
cause the body of the function to be replaced by the derivative. This
sometimes works, but doesn't depend on the function in any simple way.

It seems to depend on how new the function is. With a new anonymous
function it never works, but with a base function like lm or log it always
works:

 ## works
 deriv(expression(sin(cos(x) * y)), c("x","y"), log)
 ## identical function
 LOG<-function (x, base = exp(1))
    if (missing(base)) .Internal(log(x)) else .Internal(log(x, base))
 ## doesn't work
 deriv(expression(sin(cos(x) * y)), c("x","y"), LOG)

Creating a new function somewhere else in the search path doesn't help
 assign("a",function(x,y){},pos=3)
 # doesn't work
 deriv(expression(sin(cos(x) * y)), c("x","y"), a)

but copying a loaded function does

  library(tcltk)
  a<-tkbind
  #works
  deriv(expression(sin(cos(x) * y)), c("x","y"), a)


????

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue May 29 00:50:31 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 29 May 2001 11:50:31 +1200
Subject: [Rd] xyplot,grid.text segfault (PR#948)
References: <200105261124.NAA27403@pubhealth.ku.dk> <x2k834eycd.fsf@blueberry.kubism.ku.dk>
Message-ID: <019001c0e7d0$fb44fc70$175dd882@stat.auckland.ac.nz>

Hi


> grid.text() seems unhappy with being passed a non-character vector for
> the label argument. I think Paul muttered something to the effect that
> he knew there would be that kind of weaknesses in the code.
>
> The following runs successfully (well, at least it doesn't crash - the
> result looks a bit weird):
>
> library(lattice)
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)
>             grid.text(x=x, y=y,
>                       label=as.character(groups[subscripts]))
>        )


The results look weird because the x and y locations in grid.text are in
"npc" units by default (that is, they are taken as proportions of the
dimensions of the region they are being drawn in).  This means that values
outside the range 0..1 are drawn outside the limits of the plotting region.
You need to specify "native" units in the call so that the x and y locations
are relative to the scales on the axes of the plotting region.  For example,

    grid.text(x=x, y=y,
                  label=as.character(groups[subscripts]),
                  default.units="native")

This unit stuff is a "feature" of the underlying grid graphics, which is
probably why you did not notice it.  The default panel functions do,
however, provide examples of what needs to be done.  See, for example,
panel.xyplot.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Tue May 29 00:49:32 2001
From: Richard.Beare@cmis.csiro.au (Richard.Beare@cmis.csiro.au)
Date: Tue, 29 May 2001 01:49:32 +0200 (MET DST)
Subject: [Rd] argument names in generic print functions (PR#955)
Message-ID: <200105282349.BAA14358@pubhealth.ku.dk>

Hello,

I think this is a bug, although it is possible that I'm doind something
silly.

I want to be able to determine the argument name for variables passed to
a generic print function

suppose we have

print.foo <- function(x, ...)
{
nm<-deparse(substitute(x))
cat("param name is ", nm, "\n")
}

d<-structure(1, class="foo")

Under R-1.2.[2,3]

> print(d)
param name is  d 

> d
param name is  structure(1, class = "foo") 


Under Splus 3.4 the responses are

> d<-structure(1, class="foo")
> d
param name is  d 
> print(d)
param name is  d 


If I'm going about this the wrong way then please let me know.

Thanks


-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue May 29 03:05:16 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 28 May 2001 19:05:16 -0700 (PDT)
Subject: [Rd] argument names in generic print functions (PR#955)
In-Reply-To: <200105282349.BAA14358@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0105281851480.158266-100000@homer03.u.washington.edu>

On Tue, 29 May 2001 Richard.Beare@cmis.csiro.au wrote:

> Hello,
>
> I think this is a bug, although it is possible that I'm doind something
> silly.
>
> I want to be able to determine the argument name for variables passed to
> a generic print function
<snip>

> Under R-1.2.[2,3]
>
> > print(d)
> param name is  d
>
> > d
> param name is  structure(1, class = "foo")
>
> Under Splus 3.4 the responses are
>
> > d<-structure(1, class="foo")
> > d
> param name is  d
> > print(d)
> param name is  d
>
> If I'm going about this the wrong way then please let me know.

I don't think there is a right way to do this in R.  The
read-evaluate-print loop in R prints the *value* of an expression that it
evaluates, not the expression itself. This means that your print()
function doesn't have any way of knowing what the expression was
originally called.  You have to use print() explicitly to get the
parameter name the way you want.

It's not a bug, though it seems to be an incompatibility.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 29 13:25:19 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 29 May 2001 14:25:19 +0200 (MET DST)
Subject: [Rd] unbelievable parser bug (PR#956)
Message-ID: <200105291225.OAA22283@pubhealth.ku.dk>

close to ``unbelievable'' but the following line
is not parsed correctly but gives a syntax error :

    x <- 1## A = 1


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue May 29 13:34:51 2001
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 29 May 2001 14:34:51 +0200
Subject: [Rd] unbelievable parser bug (PR#956)
In-Reply-To: <200105291225.OAA22283@pubhealth.ku.dk>
References: <200105291225.OAA22283@pubhealth.ku.dk>
Message-ID: <15123.38763.364918.656351@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST),
>>>>> maechler  (m) wrote:

  > close to ``unbelievable'' but the following line
  > is not parsed correctly but gives a syntax error :

  >     x <- 1## A = 1


what you don't see is that the ``spaces'' before the comment are no
spaces: if I copy & paste the thing to a vi buffer I see:

	 x <- 1\xa0\xa0## A = 1

...

I got the idea from sequentially deleting characters:

> x <- 1## A = 1
Error: syntax error
> x <- 1# A = 1
Error: syntax error
> x <- 1# A    
Error: syntax error
> x <- 1#   
Error: syntax error
> x <- 1
Error: syntax error


especially the last one look nice IMO ...

.f


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 29 14:11:05 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 29 May 2001 15:11:05 +0200 (MET DST)
Subject: [Rd] unbelievable parser bug (PR#956)
Message-ID: <200105291311.PAA23674@pubhealth.ku.dk>

>>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

>>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST),
>>>>> maechler  (m) wrote:

    >> close to ``unbelievable'' but the following line is not parsed
    >> correctly but gives a syntax error :

    >> x <- 1## A = 1


    FrL> what you don't see is that the ``spaces'' before the comment are
    FrL> no spaces: if I copy & paste the thing to a vi buffer I see:

    FrL> 	 x <- 1\xa0\xa0## A = 1

    FrL> ...

    FrL> I got the idea from sequentially deleting characters:

    >> x <- 1## A = 1
    FrL> Error: syntax error
    >> x <- 1# A = 1
    FrL> Error: syntax error
    >> x <- 1# A
    FrL> Error: syntax error
    >> x <- 1#
    FrL> Error: syntax error
    >> x <- 1
    FrL> Error: syntax error


    FrL> especially the last one look nice IMO ...

;-)  

thank you, Fritz.   
Now what about a "morale of the story" (<< probably a Germanism) ?

Don't cut and paste from e-mails any more, unless you have a really
ASCII only e-mail program or editor into which you paste.
Unfortunately, emacs doesn't seem to be among these anymore...  
aaargghh...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 29 15:25:22 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 May 2001 16:25:22 +0200
Subject: [Rd] unbelievable parser bug (PR#956)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 29 May 2001 15:11:05 +0200 (MET DST)"
References: <200105291311.PAA23674@pubhealth.ku.dk>
Message-ID: <x2itikb5bh.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> >>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:
> 
> >>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST),
> >>>>> maechler  (m) wrote:
> 
>     >> close to ``unbelievable'' but the following line is not parsed
>     >> correctly but gives a syntax error :
> 
>     >> x <- 1## A = 1
> 
> 
>     FrL> what you don't see is that the ``spaces'' before the comment are
>     FrL> no spaces: if I copy & paste the thing to a vi buffer I see:
> 
>     FrL> 	 x <- 1\xa0\xa0## A = 1
....
> 
> ;-)  
> 
> thank you, Fritz.   
> Now what about a "morale of the story" (<< probably a Germanism) ?
> 
> Don't cut and paste from e-mails any more, unless you have a really
> ASCII only e-mail program or editor into which you paste.
> Unfortunately, emacs doesn't seem to be among these anymore...  
> aaargghh...


Hmm. 0xa0 is M-SPC. These are fairly easily generated on non-English
keyboards: both Alt_L+SPC and AltGr+SPC on mine (and those three keys
are adjacent). It might make sense to force the parser to accept the
"metafied" whitespace characters?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 29 15:28:07 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 29 May 2001 16:28:07 +0200 (MET DST)
Subject: [Rd] unbelievable parser bug (PR#956)
Message-ID: <200105291428.QAA24734@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> >>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
    >> writes:
    >> 
    >> >>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST), >>>>> maechler
    >> (m) wrote:
    >> 
    >> >> close to ``unbelievable'' but the following line is not parsed >>
    >> correctly but gives a syntax error :
    >> 
    >> >> x <- 1## A = 1
    >> 
    >> 
    FrL> what you don't see is that the ``spaces'' before the comment are
    FrL> no spaces: if I copy & paste the thing to a vi buffer I see:
    >>
    FrL> x <- 1\xa0\xa0## A = 1
    PD> ....
    >>  ;-)
    >> 
    >> thank you, Fritz.  Now what about a "morale of the story" (<<
    >> probably a Germanism) ?

in the mean time I've learned:   ``moral of the story'' (is no Germanism)

    >> Don't cut and paste from e-mails any more, unless you have a really
    >> ASCII only e-mail program or editor into which you paste.
    >> Unfortunately, emacs doesn't seem to be among these anymore...
    >> aaargghh...


    PD> Hmm. 0xa0 is M-SPC. These are fairly easily generated on
    PD> non-English keyboards: both Alt_L+SPC and AltGr+SPC on mine (and
    PD> those three keys are adjacent). 

Thank you Peter;
in this cases, they text was from an e-mail (from a `R for MacOS' user who
 most proably had a SwissGerman keyboard {but probably no Emacs..})) but it
was smart Emacs (VM) dealing ``automagically'' with strange encodings ...

    PD> It might make sense to force the
    PD> parser to accept the "metafied" whitespace characters?

yes, I think that might be useful and make sense.
Compatibility with S(plus) might be a point here, but then we *do* have
locale dependent syntax anyway.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Tue May 29 18:00:26 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Tue, 29 May 2001 10:00:26 -0700
Subject: [Rd] unbelievable parser bug (PR#956)
In-Reply-To: <200105291311.PAA23674@pubhealth.ku.dk>
Message-ID: <200105291700.KAA73423@pine.frazmtn.com>


--Apple-Mail-503838107-1
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	format=flowed;
	charset=us-ascii

Martin

Re: Germanism, Not so. This is from "The Ballad of Frankie Lee
and Judas Priest" on Bob Dylan's "John Wesley Harding" album.
==========================
Well, the moral of the story,
the moral of this song
is simply that one should never be
where one does not belong
==========================
--- Jan

On Tuesday, May 29, 2001, at 06:11 AM, maechler@stat.math.ethz.ch wrote:

> thank you, Fritz.
> Now what about a "morale of the story" (<< probably a Germanism) ?
>

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/sounds/nomatter.au
========================================================

--Apple-Mail-503838107-1
Content-Transfer-Encoding: quoted-printable
Content-Type: text/enriched;
	charset=us-ascii

Martin


Re: Germanism, Not so. This is from "The Ballad of Frankie Lee=20

and Judas Priest" on Bob Dylan's "John Wesley Harding" album.

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D

Well, the moral of the story,

the moral of this song

is simply that one should never be

where one does not belong

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D

--- Jan


On Tuesday, May 29, 2001, at 06:11 AM, maechler@stat.math.ethz.ch
wrote:


<excerpt>thank you, Fritz.  =20

Now what about a "morale of the story" (<<<< probably a Germanism) ?


</excerpt>

<color><param>0000,6363,1212</param>=3D=3D=3D

Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;

US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554

phone (310)-825-9550;  fax (310)-206-5658;  email:
deleeuw@stat.ucla.edu

homepage:
=
</color><underline><color><param>1A1A,1A1A,FFFF</param>http://www.stat.ucl=
a.edu/~deleeuw</color></underline><color><param>0000,6363,1212</param>

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D

          No matter where you go, there you are. --- Buckaroo Banzai

                 =20
=
</color><underline><color><param>1A1A,1A1A,FFFF</param>http://www.stat.ucl=
a.edu/sounds/nomatter.au</color></underline><color><param>0000,6363,1212</=
param>

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D

</color>=

--Apple-Mail-503838107-1--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue May 29 20:58:30 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 29 May 2001 15:58:30 -0400
Subject: [Rd] New Package: gregmisc
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEB0B@groexmbcr02.pfizer.com>



  > From: ben@zoo.ufl.edu [mailto:ben@zoo.ufl.edu]
  > 
  > 
  >    Do you have the latest version of plotCI?  (attached 
  > below, I didn't
  > send it as an attachment for the sake of R-devel)  It uses arrows()
  > instead of segments(), which simplifies the code a bit and 
  > incidentally
  > makes it work with logarithmic axes as well (since the 
  > sizes of the bar
  > ends are specified in absolute rather than user units).

Hmmm.  I merged our two versions together.  The revised version is pasted in
below and is included in revisions 0.1.3 of gregmisc, as is an updated .Rd
file.

  > 
  >   Should this code be the first entry in the "miscellaneous code"
  > repository at CRAN that was discussed a while back?
  >
  >   By the way, something occurred to me ... my 
  > "miscellaneous packages"
  > function (which I haven't made available to CRAN yet, 
  > although I probably
  > will eventually) is called "bbmisc".  Yours is called 
  > "gregmisc".  Would
  > it make any sense to standardize these on "<lastname>misc" or
  > "<first_initial><lastname>misc" (bolkermisc, bbolkermisc) to avoid
  > confusion once we have a whole bunch of these packages?

I think that it is a better idea to create packages with coherent themes and
make it easy for people to submit single functions to them.  Perhaps we
should create:

	plotmisc    to hold things like boxplot.n(), plotCI(), plotmeans(),
...	
	modelmisc	to hold things like CI(),...
	datamisc	to hold example data sets
	...
	
and encourage contributions.
	
	
  > 
  >   Also by the way, congratulations for actually getting 
  > around to posting
  > your miscellaneous functions to CRAN!  I hope to do as well.

YES, the jump from "I wrote this useful function" to "posting to CRAN" is
too big.     Hence the idea of the "*misc" packages...

So, if you have some functions, just send along a function and a .Rd file
and I'll create the packages...

  > 
  >   Ben Bolker
  > 

=============== revised plotCI code ====================
plotCI <- function (x, y = NULL,
                    uiw, liw = uiw,   # bar widths  -OR-
                    ui, li, # bar ends
                    err='y', # bar direction, 'y' or 'x'
                    col=par("col"),
                    ylim=NULL,
                    xlim=NULL,
                    barcol=col,
                    sfrac = 0.01,
                    gap=1,
                    lwd=par("lwd"),
                    lty=par("lty"),
                    labels=FALSE,
                    add=FALSE,
                    xlab,
                    ylab,
                    ...
                    )
{
  if (is.list(x)) { 
    y <- x$y 
    x <- x$x 
  }

  if(missing(xlab))
    xlab <- deparse(substitute(x))
  
  if(missing(ylab))
    {
      if(is.null(y))
        {
          xlab  <- ""
          ylab <- deparse(substitute(x))
        }
      else
        ylab <- deparse(substitute(y))
    }

  if (is.null(y)) { 
    if (is.null(x)) 
      stop("both x and y NULL") 
    y <- as.numeric(x) 
    x <- seq(along = x) 
  }

  
  if(err=="y")
    z  <- y
  else
    z  <- x
  
  if(missing(ui))
    ui <- z + uiw
  if(missing(li)) 
    li <- z - liw
   
  if(err=="y" & is.null(ylim))
    {
      ylim <- range(c(y, ui, li), na.rm=TRUE)
    }
  else if(err=="x" & is.null(xlim))
    {
      xlim <- range(c(x, ui, li), na.rm=TRUE)
    }

    
  if(!add)
    {
      if(missing(labels) || labels==F )
        plot(x, y, ylim = ylim, xlim=xlim, col=col,
             xlab=xlab, ylab=ylab, ...)
      else
        {
          plot(x, y, ylim = ylim, xlim=xlim, col=col, type="n",
               xlab=xlab, ylab=ylab,  ...)
          text(x, y, label=labels, col=col )
        }
    }

 
  if(err=="y")
    {
      if(gap!=FALSE)
        gap <- strheight("O") * gap
      smidge <- par("fin")[1] * sfrac

      # draw upper bar
      if(!is.null(li))
          arrows(x , li, x, pmax(y-gap,li), col=barcol, lwd=lwd,
                 lty=lty, angle=90, length=smidge, code=1)
      # draw lower bar
      if(!is.null(ui))
          arrows(x , ui, x, pmin(y+gap,ui), col=barcol,
                 lwd=lwd, lty=lty, angle=90, length=smidge, code=1)
    }
  else
    {
      if(gap!=FALSE)
        gap <- strwidth("O") * gap
      smidge <- par("fin")[2] * sfrac

      # draw left bar
      if(li!=NULL)
        arrows(li, y, pmax(x-gap,li), y, col=col, lwd=lwd, lty=slty,
               angle=90, length=smidge, code=1)
      if(ui!=NULL)
        arrows(ui, y, pmin(x+gap,ui), y, col=col, lwd=lwd, lty=slty,
               angle=90, length=smidge, code=1)
      
    }
      
    

invisible(list(x = x, y = y)) 
} 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 29 23:35:00 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 May 2001 00:35:00 +0200
Subject: [Rd] deriv (PR#953)
In-Reply-To: tlumley@u.washington.edu's message of "Mon, 28 May 2001 22:58:20 +0200 (MET DST)"
References: <200105282058.WAA13802@pubhealth.ku.dk>
Message-ID: <x2ae3viy23.fsf@blueberry.kubism.ku.dk>

tlumley@u.washington.edu writes:

> The first bug is very strange and I suspect there's something going on in
> the memory management.  Supplying a function as the third argument should
> cause the body of the function to be replaced by the derivative. This
> sometimes works, but doesn't depend on the function in any simple way.
> 
> It seems to depend on how new the function is. With a new anonymous
> function it never works, but with a base function like lm or log it always
> works:
> 
>  ## works
>  deriv(expression(sin(cos(x) * y)), c("x","y"), log)
>  ## identical function
>  LOG<-function (x, base = exp(1))
>     if (missing(base)) .Internal(log(x)) else .Internal(log(x, base))
>  ## doesn't work
>  deriv(expression(sin(cos(x) * y)), c("x","y"), LOG)
> 
> Creating a new function somewhere else in the search path doesn't help
>  assign("a",function(x,y){},pos=3)
>  # doesn't work
>  deriv(expression(sin(cos(x) * y)), c("x","y"), a)
> 
> but copying a loaded function does
> 
>   library(tcltk)
>   a<-tkbind
>   #works
>   deriv(expression(sin(cos(x) * y)), c("x","y"), a)

<grin> 
You had me going there too.

Try stripping the "source" attribute from the template functions....
(or from the output of deriv() for that matter). I'll give it a think
how to do that inside the deriv function so as to preserve user
sanity.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue May 29 23:44:51 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 29 May 2001 15:44:51 -0700 (PDT)
Subject: [Rd] deriv (PR#953)
In-Reply-To: <x2ae3viy23.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105291539050.107374-100000@homer23.u.washington.edu>

On 30 May 2001, Peter Dalgaard BSA wrote:
>
> <grin>
> You had me going there too.
>
> Try stripping the "source" attribute from the template functions....
> (or from the output of deriv() for that matter). I'll give it a think
> how to do that inside the deriv function so as to preserve user
> sanity.

Ouch. Perhaps SET_BODY should remove the "source" attribute?

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 30 00:09:21 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 May 2001 01:09:21 +0200
Subject: [Rd] deriv (PR#953)
In-Reply-To: Thomas Lumley's message of "Tue, 29 May 2001 15:44:51 -0700 (PDT)"
References: <Pine.A41.4.33.0105291539050.107374-100000@homer23.u.washington.edu>
Message-ID: <x28zjfzra6.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On 30 May 2001, Peter Dalgaard BSA wrote:
> >
> > <grin>
> > You had me going there too.
> >
> > Try stripping the "source" attribute from the template functions....
> > (or from the output of deriv() for that matter). I'll give it a think
> > how to do that inside the deriv function so as to preserve user
> > sanity.
> 
> Ouch. Perhaps SET_BODY should remove the "source" attribute?

Hmm maybe, but it seems to me that elementary functions like that
should not do anything complicated, and body()<- and args() will
already lose *all* attributes. (The former might actually be
considered a buglet, but given the amount of use body()<- gets, I
think we can live with it).

I think I have another solution for deriv.c. That is, I thought I had,
but it didn't quite work...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Wed May 30 14:36:23 2001
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Wed, 30 May 2001 09:36:23 -0400
Subject: [Rd] new book
Message-ID: <20010530093623.L10945@jimmy.harvard.edu>

Just thought I would mention that there is a new O'Reilly book out,
"Developing Bioinformatics Computer Skills", which is ok, pretty
superficial about some things but at least it lets you know what is
happening and where.
R gets a few pages in there, 394-396, mostly nice press and accurate
except that Bill Venables (hi Bill) may be surprised to find out that
he is a member of the core development team.
  Robert
ps: they also have an Xgobi reference
-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed May 30 15:12:55 2001
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 30 May 2001 16:12:55 +0200 (CEST)
Subject: [Rd] new book
In-Reply-To: <20010530093623.L10945@jimmy.harvard.edu>
Message-ID: <XFMail.20010530161255.plummer@iarc.fr>

On 30-May-2001 Robert Gentleman wrote:
> Just thought I would mention that there is a new O'Reilly book out,
> "Developing Bioinformatics Computer Skills", which is ok, pretty
> superficial about some things but at least it lets you know what is
> happening and where.
> R gets a few pages in there, 394-396, mostly nice press and accurate
> except that Bill Venables (hi Bill) may be surprised to find out that
> he is a member of the core development team.
>   Robert
> ps: they also have an Xgobi reference

This came up a couple of weeks ago on Slashdot (which I should really
stop reading).  I got the impression from the ensuing discussion that
it was targetted at biologists,but if you found it useful I shall pick
up a copy.  In the same discussion, the monograph "Biological sequence
analysis: probabilistic methods of proteins and nucleic acids" by Durbin
(ed) was highly recommended by some people.  Do you have this?

Here is a link to the O'Reilly site which contains contents, and a
sample chapter.

http://www.oreilly.com/catalog/bioskills/

I remember buying an O'Reilly book called "The whole internet: a users
guide and catalogue". I wonder if this one will have an even shorter
shelf life.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed May 30 15:31:48 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 30 May 2001 07:31:48 -0700
Subject: [Rd] new book
In-Reply-To: Martyn Plummer's message of "Wed, 30 May 2001 16:12:55 +0200 (CEST)"
References: <XFMail.20010530161255.plummer@iarc.fr>
Message-ID: <87bsoa52nf.fsf@jeeves.blindglobe.net>

>>>>> "MP" == Martyn Plummer <plummer@iarc.fr> writes:

    MP> This came up a couple of weeks ago on Slashdot (which I should
    MP> really stop reading).  I got the impression from the ensuing
    MP> discussion that it was targetted at biologists,but if you
    MP> found it useful I shall pick up a copy.  In the same
    MP> discussion, the monograph "Biological sequence analysis:
    MP> probabilistic methods of proteins and nucleic acids" by Durbin
    MP> (ed) was highly recommended by some people.  Do you have this?

    MP> Here is a link to the O'Reilly site which contains contents,
    MP> and a sample chapter.

    MP> http://www.oreilly.com/catalog/bioskills/

    MP> I remember buying an O'Reilly book called "The whole internet:
    MP> a users guide and catalogue". I wonder if this one will have
    MP> an even shorter shelf life.

I commented privately, but since this comes up, I'll comment again: if
you know your way around genetic programs, perl and bioperl, and
understand general scripting tools, and have a smattering of
informatics knowledge, the book isn't too useful.  I've got a
protein-folding friend who plans on using it to teach a comp bio
course in microbiology; he considers the skills mentioned in the book
to be the bare-minimum for that, though it's short on theory.

The Durbin book is a nice intro to current state of the art DNA and
protein sequencing methods, but not much more (of course, it lives up
to its title).  That being said, I found it incredibly useful for
seeing what has been done recently.  YMMV.

I think part of the problem, and this is seen by those who recommend
the Durbin book, is that there are a number of different ways of
looking at the "bioinformatics" problem.  Problematically, you've got
something like:

A. Large quantities of data, and handling, storage, backup
B. Annotations and external (data) linkages
C. Computational Biology
D. Statistical issues (experimental design/analysis and exploratory
   approaches; 
E. Combinations of the above two, including such topics (one of many
   examples): stochastic DE modelling using mixed effects models.

and scientifically, you've got one or more of:

1. sequencing (DNA and/or protein)
2. protein structure (secondary/tertiary, based on the above)
3. gene expression arrays of many forms (cDNA, membrane, gold,
   oligios). 
4. SNPs 
5. genetics and evolutionary biology

and then there is the application area (cancer, HIV, other chronic
diseases; comparative studies and animal/plant/non-human organism
models, etc).

The classifications that I use are even up for grabs, depending on who
you are and who you talk with; it's just 2 possible views of this high
buzzword content area, sigh.  I know I've left out a few areas, here.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Wed May 30 15:45:44 2001
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Wed, 30 May 2001 10:45:44 -0400
Subject: [Rd] new book
In-Reply-To: <87bsoa52nf.fsf@jeeves.blindglobe.net>; from A.J. Rossini on Wed, May 30, 2001 at 07:31:48AM -0700
References: <XFMail.20010530161255.plummer@iarc.fr> <87bsoa52nf.fsf@jeeves.blindglobe.net>
Message-ID: <20010530104544.O10945@jimmy.harvard.edu>

On Wed, May 30, 2001 at 07:31:48AM -0700, A.J. Rossini wrote:
> >>>>> "MP" == Martyn Plummer <plummer@iarc.fr> writes:
> 
>     MP> This came up a couple of weeks ago on Slashdot (which I should
>     MP> really stop reading).  I got the impression from the ensuing
>     MP> discussion that it was targetted at biologists,but if you
>     MP> found it useful I shall pick up a copy.  In the same
>     MP> discussion, the monograph "Biological sequence analysis:
>     MP> probabilistic methods of proteins and nucleic acids" by Durbin
>     MP> (ed) was highly recommended by some people.  Do you have this?
> 
>     MP> Here is a link to the O'Reilly site which contains contents,
>     MP> and a sample chapter.
> 
>     MP> http://www.oreilly.com/catalog/bioskills/
> 
>     MP> I remember buying an O'Reilly book called "The whole internet:
>     MP> a users guide and catalogue". I wonder if this one will have
>     MP> an even shorter shelf life.
> 
> I commented privately, but since this comes up, I'll comment again: if
> you know your way around genetic programs, perl and bioperl, and
> understand general scripting tools, and have a smattering of
> informatics knowledge, the book isn't too useful.  I've got a
> protein-folding friend who plans on using it to teach a comp bio
> course in microbiology; he considers the skills mentioned in the book
> to be the bare-minimum for that, though it's short on theory.
> 

   I agree, but for those who are just getting started -- especially
   statistics grad students (or biology grad students or comp. sci) it
   can be very useful.
   I am actually a bit tempted to use it as a text for 1st year
   MSc/PhD's here, intro to stat computing. At least it gives them
   some examples that are relevant (and most know no Unix and no Perl
   and no....)

> The Durbin book is a nice intro to current state of the art DNA and
> protein sequencing methods, but not much more (of course, it lives up
> to its title).  That being said, I found it incredibly useful for
> seeing what has been done recently.  YMMV.
> 
  Yes, and Gusfield -- Algorithms on Strings Trees and Sequences is
  reasonable for what it does as well.

> I think part of the problem, and this is seen by those who recommend
> the Durbin book, is that there are a number of different ways of
> looking at the "bioinformatics" problem.  Problematically, you've got
> something like:
> 
> A. Large quantities of data, and handling, storage, backup
> B. Annotations and external (data) linkages

  I know very little about B. and found that DBCS at least gives some
  idea of what is available, what it looks like and how you might
  begin to deal with it.

  Yes, the field is developing so rapidly that it is useful now and
  won't be as good in 6 months and probably will be useless in 12 or
  18, but then so will the machine I'm typing at. 

> C. Computational Biology
> D. Statistical issues (experimental design/analysis and exploratory
>    approaches; 
> E. Combinations of the above two, including such topics (one of many
>    examples): stochastic DE modelling using mixed effects models.
> 
> and scientifically, you've got one or more of:
> 
> 1. sequencing (DNA and/or protein)
> 2. protein structure (secondary/tertiary, based on the above)
> 3. gene expression arrays of many forms (cDNA, membrane, gold,
>    oligios). 
> 4. SNPs 
> 5. genetics and evolutionary biology
> 
> and then there is the application area (cancer, HIV, other chronic
> diseases; comparative studies and animal/plant/non-human organism
> models, etc).
> 
> The classifications that I use are even up for grabs, depending on who
> you are and who you talk with; it's just 2 possible views of this high
> buzzword content area, sigh.  I know I've left out a few areas, here.
> 
> best,
> -tony
> 
> -- 
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------- (wednesday/friday is unknown) --------
> FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
> UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed May 30 15:55:20 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 30 May 2001 07:55:20 -0700
Subject: [Rd] new book
In-Reply-To: Robert Gentleman's message of "Wed, 30 May 2001 10:45:44 -0400"
References: <XFMail.20010530161255.plummer@iarc.fr>
 <87bsoa52nf.fsf@jeeves.blindglobe.net>
 <20010530104544.O10945@jimmy.harvard.edu>
Message-ID: <87vgmi3mzr.fsf@jeeves.blindglobe.net>

>>>>> "RG" == Robert Gentleman <rgentlem@jimmy.harvard.edu> writes:

    >> I commented privately, but since this comes up, I'll comment
    >> again: if you know your way around genetic programs, perl and
    >> bioperl, and understand general scripting tools, and have a
    >> smattering of informatics knowledge, the book isn't too useful.

    RG>    I agree, but for those who are just getting started --
    RG> especially statistics grad students (or biology grad students
    RG> or comp. sci) it can be very useful.  I am actually a bit
    RG> tempted to use it as a text for 1st year MSc/PhD's here, intro
    RG> to stat computing. At least it gives them some examples that
    RG> are relevant (and most know no Unix and no Perl and no....)

To clarify, I would agree that this is a good use of the book.  That
isn't the audience that I described it as "not very interesting for". 

However, a good number of people on R-devel are beyond that level, in
most respects (if this had been R-help, on the other hand...).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Wed May 30 17:45:14 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Wed, 30 May 2001 18:45:14 +0200 (MET DST)
Subject: [Rd] Rcmd REMOVE does not allow --library argument (PR#957)
Message-ID: <200105301645.SAA09749@pubhealth.ku.dk>

This is in Windows 98.  The problem exists in both rw1021 and rw1023, using
ActiveState Perl builds 620 and 626:

C:\>Rcmd REMOVE --library=C:/R/Rlibs RBMDS
Unknown option: library
Usage: Rcmd REMOVE [options] pkgs

Remove the add-on packages specified by pkgs from the default library
tree (/library) or the tree specified via `--library'.

Options:
  -l, --library=LIB     remove packages from library tree LIB
  -v, --version         print version info and exit

Report bugs to <r-bugs@r-project.org>.


The fix is to change line 37 in rw1023/bin/Remove:
from
my @knownoptions = ("help|h", "version|v");
to
my @knownoptions = ("help|h", "library|l:s", "version|v");

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 30 17:51:42 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 30 May 2001 18:51:42 +0200 (MET DST)
Subject: [Rd] Rcmd REMOVE does not allow --library argument (PR#957)
Message-ID: <200105301651.SAA09825@pubhealth.ku.dk>

On Wed, 30 May 2001 Setzer.Woodrow@epamail.epa.gov wrote:

Thanks, fixed.

> This is in Windows 98.  The problem exists in both rw1021 and rw1023, using
> ActiveState Perl builds 620 and 626:
>
> C:\>Rcmd REMOVE --library=C:/R/Rlibs RBMDS
> Unknown option: library
> Usage: Rcmd REMOVE [options] pkgs
>
> Remove the add-on packages specified by pkgs from the default library
> tree (/library) or the tree specified via `--library'.
>
> Options:
>   -l, --library=LIB     remove packages from library tree LIB
>   -v, --version         print version info and exit
>
> Report bugs to <r-bugs@r-project.org>.
>
>
> The fix is to change line 37 in rw1023/bin/Remove:
> from
> my @knownoptions = ("help|h", "version|v");
> to
> my @knownoptions = ("help|h", "library|l:s", "version|v");
>
> R. Woodrow Setzer, Jr.                                            Phone:
> (919) 541-0128
> Experimental Toxicology Division                       Fax:  (919) 541-5394
> Pharmacokinetics Branch
> NHEERL MD-74; US EPA; RTP, NC 27711
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed May 30 20:00:11 2001
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Wed, 30 May 2001 21:00:11 +0200 (MET DST)
Subject: [Rd] zero-extent matrices (PR#958)
Message-ID: <200105301900.VAA10463@pubhealth.ku.dk>


In 1.2.3
  matrix(nrow=10,ncol=0)%*%numeric(0)
returns a 10x1 matrix of 0s

In todays 1.3 it returns a 10x1 matrix of miscellaneous junk.

While both are probably wrong the latter is causing problems for survival.

	-thomas

platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status   Under development (unstable)
major    1
minor    3.0
year     2001
month    05
day      30
language R



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 30 20:13:30 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 30 May 2001 15:13:30 -0400
Subject: [Rd] perl 5.6.0
Message-ID: <3B15465A.78A367B8@bank-banque-canada.ca>

I am trying Perl 5.6.0 on Solaris and having trouble building R. It is
very possible our setup is not complete, but before I drive my system
adminstrator crazy, are there known problems building R (1.2.3 or devel)
using Perl 5.6.0?  Configure works ok, the first make problem is below.

Thanks,
Paul Gilbert
_______
make[2]: Entering directory
`/home/mfa5/gilp/R-versions/R-devel/src/library'
Can't locate File/Basename.pm in @INC (@INC contains:
/home/mfa5/gilp/R-versions/R-devel/share/perl
/apps/asd/unix/gnu/perl-5.6.0/lib/5.6.0/sun4-solaris
/apps/asd/unix/gnu/perl-5.6.0/lib/5.6.0
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl/5.6.0/sun4-solaris
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl/5.6.0
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl .) at
/home/mfa5/gilp/R-versions/R-devel/bin/build-help line 21.
BEGIN failed--compilation aborted at
/home/mfa5/gilp/R-versions/R-devel/bin/build-help line 21.
Can't locate File/Basename.pm in @INC (@INC contains:
/home/mfa5/gilp/R-versions/R-devel/share/perl
/apps/asd/unix/gnu/perl-5.6.0/lib/5.6.0/sun4-solaris
/apps/asd/unix/gnu/perl-5.6.0/lib/5.6.0
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl/5.6.0/sun4-solaris
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl/5.6.0
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl .) at
/home/mfa5/gilp/R-versions/R-devel/bin/Rd2contents line 3.
BEGIN failed--compilation aborted at
/home/mfa5/gilp/R-versions/R-devel/bin/Rd2contents line 3.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 30 20:31:45 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 May 2001 21:31:45 +0200
Subject: [Rd] zero-extent matrices (PR#958)
In-Reply-To: tlumley@u.washington.edu's message of "Wed, 30 May 2001 21:00:11 +0200 (MET DST)"
References: <200105301900.VAA10463@pubhealth.ku.dk>
Message-ID: <x24ru2y6ou.fsf@blueberry.kubism.ku.dk>

tlumley@u.washington.edu writes:

> In 1.2.3
>   matrix(nrow=10,ncol=0)%*%numeric(0)
> returns a 10x1 matrix of 0s
> 
> In todays 1.3 it returns a 10x1 matrix of miscellaneous junk.
> 
> While both are probably wrong the latter is causing problems for survival.

Acutally, I'd say that the 1.2.3 version is correct (sums over empty
sets being zero is a standard convention).

Hmm, 1.3.0 as of yesterday gives 10 zeros for me as does the one
updated and compiled about 18:00 CET...
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed May 30 20:36:56 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 30 May 2001 12:36:56 -0700 (PDT)
Subject: [Rd] zero-extent matrices (PR#958)
In-Reply-To: <x24ru2y6ou.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105301230000.130198-100000@homer40.u.washington.edu>

On 30 May 2001, Peter Dalgaard BSA wrote:

> tlumley@u.washington.edu writes:
>
> > In 1.2.3
> >   matrix(nrow=10,ncol=0)%*%numeric(0)
> > returns a 10x1 matrix of 0s
> >
> > In todays 1.3 it returns a 10x1 matrix of miscellaneous junk.
> >
> > While both are probably wrong the latter is causing problems for survival.
>
> Acutally, I'd say that the 1.2.3 version is correct (sums over empty
> sets being zero is a standard convention).

I was thinking that a 10x0 matrix times a 0x0 matrix should be a 10x0
matrix

>
> Hmm, 1.3.0 as of yesterday gives 10 zeros for me as does the one
> updated and compiled about 18:00 CET...

Initially it will give zero. The two operands contain pointers to the R
heap and the BLAS call is treating the objects pointed to as length 10 and
length 1 respectively and multiplying whatever happens to be there.
Initially this will be zeros.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed May 30 20:46:04 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 30 May 2001 12:46:04 -0700 (PDT)
Subject: [Rd] zero-extent matrices (PR#958)
In-Reply-To: <Pine.A41.4.33.0105301230000.130198-100000@homer40.u.washington.edu>
Message-ID: <Pine.A41.4.33.0105301244450.130198-100000@homer40.u.washington.edu>

On Wed, 30 May 2001, Thomas Lumley wrote:
>
> Initially it will give zero. The two operands contain pointers to the R
> heap and the BLAS call is treating the objects pointed to as length 10 and
> length 1 respectively and multiplying whatever happens to be there.
> Initially this will be zeros.
>

Actually I was wrong about the reason: It doesn't call BLAS. The junk is
whatever was sitting in the piece of the vector heap where the return
value was allocated.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Thu May 31 03:53:28 2001
From: Bill.Venables@CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Thu, 31 May 2001 12:53:28 +1000
Subject: [Rd] new book
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A99C1F@Roper-CV.qld.cmis.csiro.au>

Yes, Robert, I certainly am surprised.  I didn't think I was particularly a
"hard core" sort of person...  I guess I will have to look at it now.  :-S

Bill.

-----Original Message-----
From: Robert Gentleman [mailto:rgentlem@jimmy.harvard.edu]
Sent: Wednesday, 30 May 2001 11:36 PM
To: r-devel@stat.math.ethz.ch
Subject: [Rd] new book


Just thought I would mention that there is a new O'Reilly book out,
"Developing Bioinformatics Computer Skills", which is ok, pretty
superficial about some things but at least it lets you know what is
happening and where.
R gets a few pages in there, 394-396, mostly nice press and accurate
except that Bill Venables (hi Bill) may be surprised to find out that
he is a member of the core development team.
  Robert
ps: they also have an Xgobi reference
-- 
+---------------------------------------------------------------------------
+
| Robert Gentleman                 phone : (617) 632-5250
|
| Associate Professor              fax:   (617)  632-2444
|
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu
|
+---------------------------------------------------------------------------
+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 07:36:02 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 31 May 2001 07:36:02 +0100 (BST)
Subject: [Rd] zero-extent matrices (PR#958)
In-Reply-To: <Pine.A41.4.33.0105301230000.130198-100000@homer40.u.washington.edu>
Message-ID: <Pine.GSO.4.31.0105310733500.6529-100000@auk.stats>

On Wed, 30 May 2001, Thomas Lumley wrote:

> On 30 May 2001, Peter Dalgaard BSA wrote:
>
> > tlumley@u.washington.edu writes:
> >
> > > In 1.2.3
> > >   matrix(nrow=10,ncol=0)%*%numeric(0)
> > > returns a 10x1 matrix of 0s
> > >
> > > In todays 1.3 it returns a 10x1 matrix of miscellaneous junk.
> > >
> > > While both are probably wrong the latter is causing problems for survival.
> >
> > Acutally, I'd say that the 1.2.3 version is correct (sums over empty
> > sets being zero is a standard convention).
>
> I was thinking that a 10x0 matrix times a 0x0 matrix should be a 10x0
> matrix

It's a 10x0 matrix times a 0x1 matrix.  A length-n vector gets promoted to
a nx1 matrix, and that applies for n=0 too:

> dim(as.matrix(numeric(0)))
[1] 0 1


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu May 31 08:21:05 2001
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 31 May 2001 09:21:05 +0200 (MET DST)
Subject: [Rd] Re: R-WinEdt (PR#959)
Message-ID: <200105310721.JAA13287@pubhealth.ku.dk>

John Maindonald wrote:
> 
> Hello Uwe -
> I have been making some use of R-WinEdt.  I have just installed
> version 1.3.  For the most part it works fine.  An annoyance is
> however that when I type in data(), Windows comes up with an error
> message such as
> 
> File c:\windows\TEMP\R.5346 not found.
> 
> This happened with the earlier version also, which is why I
> upgraded.  It happens under Windows ME at home as well
> as under Windows 98 at work.  I am running R for windows 1.23
> 
> I suspect there is some simple action I can take to allow
> data() to work, but it is not clear to me what.


This is not a bug of R-WinEdt, but of R, so also a copy to R-Bugs.

The problem happens, if you set  pager != internal  in options(), e.g.:
  options(pager = "notepad")

After that,  data()  results in an error message like yours:
   File c:\windows\TEMP\R.5346 not found

The real error occurs in show.data() [or on.exit() ?]:

If you comment out the line 
    on.exit(file.remove(file))
in the function show.data(), showing the file works as expected, but
results in not deleting the temp-files.

file.show(file, delete.file = TRUE)  also doesn't delete the file.

Uwe Ligges



--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From John.Peters@tip.csiro.au  Thu May 31 08:27:58 2001
From: John.Peters@tip.csiro.au (John.Peters@tip.csiro.au)
Date: Thu, 31 May 2001 09:27:58 +0200 (MET DST)
Subject: [Rd] format() of a character matrix converts to vector (PR#960)
Message-ID: <200105310727.JAA13483@pubhealth.ku.dk>


Using R 1.2.3 under both windows 95 and linux, format() works fine on a 
numerical matrix, but converts a character matrix to a vector, apparently 
omitting to convert it back to a matrix:

> a_matrix(c("axx","b","c","d","e","f","g","h"),nrow=2)

> a
     [,1]  [,2] [,3] [,4]
[1,] "axx" "c"  "e"  "g" 
[2,] "b"   "d"  "f"  "h" 
 
> format(a)
[1] "axx" "b  " "c  " "d  " "e  " "f  " "g  " "h  "

> format(a,justify="right")
[1] "axx" "  b" "  c" "  d" "  e" "  f" "  g" "  h"

> format(a,justify="left")
[1] "axx" "b  " "c  " "d  " "e  " "f  " "g  " "h  "

> format(a,justify="none")
     [,1]  [,2] [,3] [,4]
[1,] "axx" "c"  "e"  "g" 
[2,] "b"   "d"  "f"  "h" 


Many thanks

----------------------------------------------------------------------------
John Peters
CSIRO National Measurement Laboratory
PO Box 218                                Phone:    +61 2 9413 7503
Lindfield NSW 2070                        Fax:      +61 2 9413 7202
Australia                                 Internet: John.Peters@tip.CSIRO.AU
----------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 09:45:15 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 31 May 2001 10:45:15 +0200 (MET DST)
Subject: [Rd] Re: R-WinEdt (PR#959)
Message-ID: <200105310845.KAA15095@pubhealth.ku.dk>

On Thu, 31 May 2001 ligges@statistik.uni-dortmund.de wrote:

> John Maindonald wrote:
> >
> > Hello Uwe -
> > I have been making some use of R-WinEdt.  I have just installed
> > version 1.3.  For the most part it works fine.  An annoyance is
> > however that when I type in data(), Windows comes up with an error
> > message such as
> >
> > File c:\windows\TEMP\R.5346 not found.
> >
> > This happened with the earlier version also, which is why I
> > upgraded.  It happens under Windows ME at home as well
> > as under Windows 98 at work.  I am running R for windows 1.23
> >
> > I suspect there is some simple action I can take to allow
> > data() to work, but it is not clear to me what.
>
>
> This is not a bug of R-WinEdt, but of R, so also a copy to R-Bugs.
>
> The problem happens, if you set  pager != internal  in options(), e.g.:
>   options(pager = "notepad")
>
> After that,  data()  results in an error message like yours:
>    File c:\windows\TEMP\R.5346 not found
>
> The real error occurs in show.data() [or on.exit() ?]:
>
> If you comment out the line
>     on.exit(file.remove(file))
> in the function show.data(), showing the file works as expected, but
> results in not deleting the temp-files.

That line is no longer in the sources.


> file.show(file, delete.file = TRUE)  also doesn't delete the file.

Right. That's because there is no way to know when e.g. notepad has
finished with the file.  Actually, one maybe could with notepad,
but not with multi-file editors like pfe (or winedt?)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 09:48:27 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 31 May 2001 10:48:27 +0200 (MET DST)
Subject: [Rd] format() of a character matrix converts to vector (PR#960)
Message-ID: <200105310848.KAA15153@pubhealth.ku.dk>

Thanks.  There is an easy fix.  In format.default

    f.char <- function(x, justify) {
	if(length(x) <= 1) return(x)
	nc <- nchar(x)
	w <- max(nc)
	all <- substring(paste(rep(" ", w), collapse=""), 1, w-nc)
	res <- if(justify == "left") paste(x, all, sep="")
	else paste(all, x, sep="")
        dim(res) <- dim(x)
        res
    }



On Thu, 31 May 2001 John.Peters@tip.csiro.au wrote:

>
> Using R 1.2.3 under both windows 95 and linux, format() works fine on a
> numerical matrix, but converts a character matrix to a vector, apparently
> omitting to convert it back to a matrix:
>
> > a_matrix(c("axx","b","c","d","e","f","g","h"),nrow=2)
>
> > a
>      [,1]  [,2] [,3] [,4]
> [1,] "axx" "c"  "e"  "g"
> [2,] "b"   "d"  "f"  "h"
>
> > format(a)
> [1] "axx" "b  " "c  " "d  " "e  " "f  " "g  " "h  "
>
> > format(a,justify="right")
> [1] "axx" "  b" "  c" "  d" "  e" "  f" "  g" "  h"
>
> > format(a,justify="left")
> [1] "axx" "b  " "c  " "d  " "e  " "f  " "g  " "h  "
>
> > format(a,justify="none")
>      [,1]  [,2] [,3] [,4]
> [1,] "axx" "c"  "e"  "g"
> [2,] "b"   "d"  "f"  "h"
>
>
> Many thanks
>
> ----------------------------------------------------------------------------
> John Peters
> CSIRO National Measurement Laboratory
> PO Box 218                                Phone:    +61 2 9413 7503
> Lindfield NSW 2070                        Fax:      +61 2 9413 7202
> Australia                                 Internet: John.Peters@tip.CSIRO.AU
> ----------------------------------------------------------------------------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From beebe@math.utah.edu  Thu May 31 16:19:37 2001
From: beebe@math.utah.edu (beebe@math.utah.edu)
Date: Thu, 31 May 2001 17:19:37 +0200 (MET DST)
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
Message-ID: <200105311519.RAA21000@pubhealth.ku.dk>

[This is not a bug report, just a suggestion.]

With complex packages, it is often useful to maintain multiple
versions installed, for bug checking, and performance comparisons, and
for developers, for a development history (e.g., I have about 30
versions of ghostscript, whose development I contribute to, and I have
on several occasions run tests files on with each them to find out
when a change in behavior was introduced).

The common way to do this is to suffix a version number to the
executable and any file tree(s) that it requires.

The R-1.2.3 release does not currently do this, but it looks like only
a couple of lines of changes are needed to accomplish the job, and
I've done so locally manually.

(1) In the R script, change

	R_HOME_DIR=/usr/local/lib/R

    to

	R_HOME_DIR=/usr/local/lib/R-1.2.3

    and name the tree that way during installation.

(2) At installation time, first install the executable as
    /usr/local/bin/R-1.2.3, then remove /usr/local/bin/R,
    then do "ln -s R-1.2.3 /usr/local/bin/R" or
    "ln R-1.2.3 /usr/local/bin/R", in that order.  This
    ensures that any existing version of R remains on the system,
    accessible as R-x.y.z.

[Obviously, in the above, "/usr/local" is really "$(prefix)".]

I suggest that the next round of R distribution consider incorporating
this change.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- Center for Scientific Computing       FAX: +1 801 585 1640, +1 801 581 4148 -
- University of Utah                    Internet e-mail: beebe@math.utah.edu  -
- Department of Mathematics, 322 INSCC      beebe@acm.org  beebe@computer.org -
- 155 S 1400 E RM 233                       beebe@ieee.org                    -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -
-------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 17:07:23 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 31 May 2001 18:07:23 +0200 (MET DST)
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
Message-ID: <200105311607.SAA21389@pubhealth.ku.dk>

On Thu, 31 May 2001 beebe@math.utah.edu wrote:

> [This is not a bug report, just a suggestion.]
>
> With complex packages, it is often useful to maintain multiple
> versions installed, for bug checking, and performance comparisons, and
> for developers, for a development history (e.g., I have about 30
> versions of ghostscript, whose development I contribute to, and I have
> on several occasions run tests files on with each them to find out
> when a change in behavior was introduced).
>
> The common way to do this is to suffix a version number to the
> executable and any file tree(s) that it requires.
>
> The R-1.2.3 release does not currently do this, but it looks like only
> a couple of lines of changes are needed to accomplish the job, and
> I've done so locally manually.
>
> (1) In the R script, change
>
> 	R_HOME_DIR=/usr/local/lib/R
>
>     to
>
> 	R_HOME_DIR=/usr/local/lib/R-1.2.3
>
>     and name the tree that way during installation.
>
> (2) At installation time, first install the executable as
>     /usr/local/bin/R-1.2.3, then remove /usr/local/bin/R,
>     then do "ln -s R-1.2.3 /usr/local/bin/R" or
>     "ln R-1.2.3 /usr/local/bin/R", in that order.  This
>     ensures that any existing version of R remains on the system,
>     accessible as R-x.y.z.
>
> [Obviously, in the above, "/usr/local" is really "$(prefix)".]
>
> I suggest that the next round of R distribution consider incorporating
> this change.

There is a serious problem with that. All the user-installed packages in
/usr/local/lib/R-1.2.3/library disappear from view on upgrade.  They would
need to be migrated.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu May 31 17:52:54 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 31 May 2001 09:52:54 -0700
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Thu, 31 May 2001 18:07:23 +0200 (MET DST)"
References: <200105311607.SAA21389@pubhealth.ku.dk>
Message-ID: <87lmnde9zt.fsf@jeeves.blindglobe.net>

>>>>> "r" == ripley  <ripley@stats.ox.ac.uk> writes:

    r> There is a serious problem with that. All the user-installed
    r> packages in /usr/local/lib/R-1.2.3/library disappear from view
    r> on upgrade.  They would need to be migrated.

One thought would be to emulate XEmacs in this regard -- lisp packages
are in equivalent of /usr/local/lib/R, while version-specific code is
in the equivalent of /usr/local/lib/R-version.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xyzzy@speakeasy.org  Thu May 31 18:48:26 2001
From: xyzzy@speakeasy.org (Trent Piepho)
Date: Thu, 31 May 2001 10:48:26 -0700 (PDT)
Subject: [Rd] paper size in postscript driver
Message-ID: <Pine.LNX.4.04.10105310901380.2031-100000@xyzzy.dsl.speakeasy.net>

I have a non-PS printer setup to print under linux using ghostscript as a
filter.  This printer has two paper trays, one has letter paper, the other
tabloid size paper.  If I print from a program that uses a PPD file to
configure the printer, like StarOffice or The Gimp, I can select the paper
size from a nifty list.  If I select letter size, the printer print with
paper from the letter tray.  If I select tabloid, the printer will use
the tabloid tray.

I added tabloid to R's list of supported paper sizes, which was pretty
trivial.  If I view the file with gv/ghostscript, I get a tabloid sized window
on the screen with my plot.  But if I print, the printer uses the letter tray
and the plot is cropped to the letter size paper.

I looked postscript from staroffice vs R, and noticed these lines:
%%BeginSetup
%%BeginFeature: *PageRegion Tabloid

        << /PageSize [792 1224] /ImagingBBox null >> setpagedevice
%%EndFeature
%%EndSetup

These follow the "%%EndProlog" line in the postscript file.  If I add these
lines to an R produced tabloid sized ps file, it will print on tabloid paper!

It doesn't view properly in gv though.  When looking at a plot in landscape
orientation, the right edge is cut off.  Tabloid is 11" x 17", and it looks
like the right 6" is cut off, as if the landscape plot is being clipped to a
bounding box of portrait oriented paper.  The plots do not get cut off when
viewed if I don't add that bit of code.  The plots do print fine, which is odd
since both the printer and gv use ghostscript to process the postscript file. 

Maybe some postscript guru could add this feature to R's PS driver?  It looks
like some kind of setpagedevice call is needed to tell the printer what paper
size to use.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Thu May 31 21:07:52 2001
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Thu, 31 May 2001 22:07:52 +0200 (MET DST)
Subject: [Rd] documentation for image(): zlim update (PR#962)
Message-ID: <200105312007.WAA22407@pubhealth.ku.dk>

Full_Name: Stephen Eglen
Version: 1.2.3
OS: Linux
Submission from: (NULL) (128.252.204.186)


The help file for image() currently says:

     The way in which `zlim' is divided into colours will be changed
     for the next major release (1.1.0) to divide the range into
     equal-length intervals.

According to NEWS, this was indeed changed in 1.1.0, so perhaps it can 
now be removed from the help?

Stephen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 22:55:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 31 May 2001 22:55:17 +0100 (BST)
Subject: [Rd] paper size in postscript driver
In-Reply-To: <Pine.LNX.4.04.10105310901380.2031-100000@xyzzy.dsl.speakeasy.net>
Message-ID: <Pine.GSO.4.31.0105312248180.22000-100000@auk.stats>

On Thu, 31 May 2001, Trent Piepho wrote:

> I have a non-PS printer setup to print under linux using ghostscript as a
> filter.  This printer has two paper trays, one has letter paper, the other
> tabloid size paper.  If I print from a program that uses a PPD file to
> configure the printer, like StarOffice or The Gimp, I can select the paper
> size from a nifty list.  If I select letter size, the printer print with
> paper from the letter tray.  If I select tabloid, the printer will use
> the tabloid tray.
>
> I added tabloid to R's list of supported paper sizes, which was pretty
> trivial.  If I view the file with gv/ghostscript, I get a tabloid sized window
> on the screen with my plot.  But if I print, the printer uses the letter tray
> and the plot is cropped to the letter size paper.
>
> I looked postscript from staroffice vs R, and noticed these lines:
> %%BeginSetup
> %%BeginFeature: *PageRegion Tabloid
>
>         << /PageSize [792 1224] /ImagingBBox null >> setpagedevice
> %%EndFeature
> %%EndSetup
>
> These follow the "%%EndProlog" line in the postscript file.  If I add these
> lines to an R produced tabloid sized ps file, it will print on tabloid paper!
>
> It doesn't view properly in gv though.  When looking at a plot in landscape
> orientation, the right edge is cut off.  Tabloid is 11" x 17", and it looks
> like the right 6" is cut off, as if the landscape plot is being clipped to a
> bounding box of portrait oriented paper.  The plots do not get cut off when
> viewed if I don't add that bit of code.  The plots do print fine, which is odd
> since both the printer and gv use ghostscript to process the postscript file.
>
> Maybe some postscript guru could add this feature to R's PS driver?  It looks
> like some kind of setpagedevice call is needed to tell the printer what paper
> size to use.

Let's not get confused here.  What you are asking for is the job of your
print spooling software.  Proper postscript should have a DSC comment
specifying the paper size, and R's does:

%!PS-Adobe-3.0
%%DocumentNeededResources: font Symbol
%%+ font Helvetica
%%+ font Helvetica-Bold
%%+ font Helvetica-Oblique
%%+ font Helvetica-BoldOblique
%%DocumentMedia: a4 595 841 0 () ()
...

If you use the paper size by "special" this is set, and it is the job of
your spooler to make use of it.  Looks like yours is deficient
(and that's not unlikely if you are not using a proper spooler).  *But*
we can't fix this in R without breaking it for those who do run
proper print management software.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 31 23:02:38 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Jun 2001 00:02:38 +0200
Subject: [Rd] documentation for image(): zlim update (PR#962)
In-Reply-To: eglen@pcg.wustl.edu's message of "Thu, 31 May 2001 22:07:52 +0200 (MET DST)"
References: <200105312007.WAA22407@pubhealth.ku.dk>
Message-ID: <x2itihxjlt.fsf@blueberry.kubism.ku.dk>

eglen@pcg.wustl.edu writes:

> Full_Name: Stephen Eglen
> Version: 1.2.3
> OS: Linux
> Submission from: (NULL) (128.252.204.186)
> 
> 
> The help file for image() currently says:
> 
>      The way in which `zlim' is divided into colours will be changed
>      for the next major release (1.1.0) to divide the range into
>      equal-length intervals.
> 
> According to NEWS, this was indeed changed in 1.1.0, so perhaps it can 
> now be removed from the help?
> 
> Stephen

This actually got fixed yesterday by Brian (coincidence or multiple
information pathways?)

----------------------------
revision 1.18
date: 2001/05/30 16:56:01;  author: ripley;  state: Exp;  lines: +0 -4
remove old note
----------------------------

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 31 23:13:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Jun 2001 00:13:53 +0200
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
In-Reply-To: rossini@blindglobe.net's message of "31 May 2001 09:52:54 -0700"
References: <200105311607.SAA21389@pubhealth.ku.dk> <87lmnde9zt.fsf@jeeves.blindglobe.net>
Message-ID: <x2g0dlxj32.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> >>>>> "r" == ripley  <ripley@stats.ox.ac.uk> writes:
> 
>     r> There is a serious problem with that. All the user-installed
>     r> packages in /usr/local/lib/R-1.2.3/library disappear from view
>     r> on upgrade.  They would need to be migrated.
> 
> One thought would be to emulate XEmacs in this regard -- lisp packages
> are in equivalent of /usr/local/lib/R, while version-specific code is
> in the equivalent of /usr/local/lib/R-version.

But R packages are not always binary compatible between releases. You
can't win. I think most of the development team just use the "run from
builddir" option.

Could we perhaps add a configure switch to install in R-$VERSION ?

--versioned-install or something like that. Kurt?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu May 31 23:13:04 2001
From: rossini@u.washington.edu (A. J. Rossini)
Date: Thu, 31 May 2001 15:13:04 -0700 (PDT)
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
In-Reply-To: <x2g0dlxj32.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105311511510.12492-100000@homer15.u.washington.edu>



On 1 Jun 2001, Peter Dalgaard BSA wrote:

> rossini@blindglobe.net (A.J. Rossini) writes:
>
> > >>>>> "r" == ripley  <ripley@stats.ox.ac.uk> writes:
> >
> >     r> There is a serious problem with that. All the user-installed
> >     r> packages in /usr/local/lib/R-1.2.3/library disappear from view
> >     r> on upgrade.  They would need to be migrated.
> >
> > One thought would be to emulate XEmacs in this regard -- lisp packages
> > are in equivalent of /usr/local/lib/R, while version-specific code is
> > in the equivalent of /usr/local/lib/R-version.
>
> But R packages are not always binary compatible between releases. You
> can't win. I think most of the development team just use the "run from
> builddir" option.
>
> Could we perhaps add a configure switch to install in R-$VERSION ?
>
> --versioned-install or something like that. Kurt?

Alternatively, let people do it both ways, and suffer (i.e. install
libraries in the versioned location, as well as in the "generic"
location).

(I'm feeling really grumpy this year).

best,
-tony


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 23:16:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Jun 2001 00:16:08 +0200 (MET DST)
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
Message-ID: <200105312216.AAA23027@pubhealth.ku.dk>

On 1 Jun 2001, Peter Dalgaard BSA wrote:

> rossini@blindglobe.net (A.J. Rossini) writes:
>
> > >>>>> "r" == ripley  <ripley@stats.ox.ac.uk> writes:
> >
> >     r> There is a serious problem with that. All the user-installed
> >     r> packages in /usr/local/lib/R-1.2.3/library disappear from view
> >     r> on upgrade.  They would need to be migrated.
> >
> > One thought would be to emulate XEmacs in this regard -- lisp packages
> > are in equivalent of /usr/local/lib/R, while version-specific code is
> > in the equivalent of /usr/local/lib/R-version.
>
> But R packages are not always binary compatible between releases. You
> can't win. I think most of the development team just use the "run from
> builddir" option.

I do manually version-install almost as suggested for the dept copy (I
would use /usr/local/lib/R/1.2.3 in the way that ghostscript does),
which is why I know I need to manually migrate the packages.

One can of course install packages in a private library.  For my own
installations I do, but it is not seamless, not least from the
version-incompatibility of installed packages (and also that --vanilla
stops the private library spec being picked up from .Renviron).

>
> Could we perhaps add a configure switch to install in R-$VERSION ?
>
> --versioned-install or something like that. Kurt?
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xyzzy@speakeasy.org  Thu May 31 23:23:06 2001
From: xyzzy@speakeasy.org (Trent Piepho)
Date: Thu, 31 May 2001 15:23:06 -0700 (PDT)
Subject: [Rd] paper size in postscript driver
In-Reply-To: <Pine.GSO.4.31.0105312248180.22000-100000@auk.stats>
Message-ID: <Pine.LNX.4.04.10105311519530.2312-100000@xyzzy.dsl.speakeasy.net>

On Thu, 31 May 2001, Prof Brian D Ripley wrote:
> > like some kind of setpagedevice call is needed to tell the printer what paper
> > size to use.
> 
> Let's not get confused here.  What you are asking for is the job of your
> print spooling software.  Proper postscript should have a DSC comment
> specifying the paper size, and R's does:

Then why do both staroffice and the gimp write postscript that uses the proper
paper size?  

> If you use the paper size by "special" this is set, and it is the job of
> your spooler to make use of it.  Looks like yours is deficient
> (and that's not unlikely if you are not using a proper spooler).  *But*
> we can't fix this in R without breaking it for those who do run
> proper print management software.

Why does it need to break anything?  Both staroffice and gimp produce
postscript that prints on the proper paper size.  Do they not work with
"proper" spooling software?  What is the "proper" spooling software for Linux?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue May  1 09:18:45 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 1 May 2001 10:18:45 +0200
Subject: [Rd] Re: [R] Re: two new packages
In-Reply-To: <5.0.0.25.1.20010501083348.03b2bb60@pop.jcu.edu.au>
References: <5.0.2.1.2.20010427224918.0193d588@mcmail.cis.mcmaster.ca>
 <5.0.0.25.1.20010501083348.03b2bb60@pop.jcu.edu.au>
Message-ID: <15086.29029.974238.133863@mithrandir.hornik.net>

>>>>> Richard Rowe writes:

> At 12:18 30/04/01 -0400, "Timothy H. Keitt" <Timothy.Keitt@StonyBrook.Edu> 
> wrote:
>> Great!  I think we should encourage people to upload complete, but not yet 
>> fully
>> tested packages to the "devel" section of CRAN.  It gets really hard to 
>> keep track
>> of source that is scattered all over the 'net.
>> 
>> Cheers,
>> Tim
>> 
>> John Fox wrote:
>> 
>> > I've prepared preliminary versions of two packages that I plan eventually
>> > to contribute to CRAN:

> I fear Tim's idea could lead to mayhem with a multitude of
> 'built-for-a-job, I-can-use-it' contributions sitting on the devel
> section.  Devel is being used as a beta test repository by people who
> seem to eventually produce full packages.

> Perhaps a 'midden' might fill Tim's requirements, there is something
> similar for Delphi where people contribute code.  Every bit of code
> would need to be identified logically and with the author's name and
> with appropriate copyright declarations (in Delphi many producers of
> snippets seem very proud and possessive of their frequently uninspired
> code ... the really good stuff comes unrestricted GNU style).  My gut
> feeling is that unless contributors were VERY disciplined this could
> be a problem ... and if the lump is worthwhile it will lead to a
> package in the hands of a disciplined author.

> Maybe people with 'bits' could get together and produce an e1071 type
> package?,

Richard:

At the r-core part of DSC-2001 we also talked about a ``useful bits of
code'' repository, so something along the lines of your suggestion is
coming along ...

Best,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Tue May  1 14:34:06 2001
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Tue, 01 May 2001 15:34:06 +0200
Subject: [Rd] graphics library fltk
Message-ID: <3AEEBB4E.714CF7B5@univie.ac.at>

we still do not have dynamic graphics in R natively.

i just found out about a widget library called fltk
info is at
www.fltk.org

it has all the stuff r currently can do only through tcl/tk or
(as i do it) excel: sliders, knobs, spinners and so on.

it is multiplatform, there are production versions for
unixen and windows, and there is a beta for macs.

this could be a way of getting some of luke's dynamic graphics tools
into R more easily.
  
perhaps this looks interesting enough that some r-core member will have
a look at it.


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue May  1 14:43:10 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 01 May 2001 06:43:10 -0700
Subject: [Rd] graphics library fltk
In-Reply-To: Erich Neuwirth's message of "Tue, 01 May 2001 15:34:06 +0200"
References: <3AEEBB4E.714CF7B5@univie.ac.at>
Message-ID: <87u235uqvl.fsf@jeeves.blindglobe.net>

>>>>> "EN" == Erich Neuwirth <erich.neuwirth@univie.ac.at> writes:

    EN> it is multiplatform, there are production versions for unixen
    EN> and windows, and there is a beta for macs.

    EN> this could be a way of getting some of luke's dynamic graphics
    EN> tools into R more easily.

Thomas has already shown how to do this with XLispStat with sockets;
we also have 2 ways to do this using Java/Java3d, both through sockets
as well as RJava.  Of course, this relies on RJava being stable, which
is a stretch of the imagination.

Note that everything you ask for is in both settings (XLispStat as
well as Java...).  I'm only not sure about the Mac interfaces...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (friday is unknown) --------
FHCRC: M--W : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy
CFAR:  ??   : 206-731-3647 (fax=3694)|Email is far better than phone
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  1 15:50:28 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 1 May 2001 15:50:28 +0100 (GMT Daylight Time)
Subject: [Rd] graphics library fltk
In-Reply-To: <3AEEBB4E.714CF7B5@univie.ac.at>
Message-ID: <Pine.WNT.4.31.0105011543000.1176-100000@gannet>

On Tue, 1 May 2001, Erich Neuwirth wrote:

> we still do not have dynamic graphics in R natively.

We do not intend to: that's what things like Duncan Murdoch's Rgl and
Rggobi are for.  It's called not re-inventing the wheel.

> i just found out about a widget library called fltk
> info is at
> www.fltk.org
>
> it has all the stuff r currently can do only through tcl/tk or
> (as i do it) excel: sliders, knobs, spinners and so on.
>
> it is multiplatform, there are production versions for
> unixen and windows, and there is a beta for macs.

That is equally true of the Graphapp toolkit we use (apart from the Mac
part).  The hard bit is to find a way to describe how to use this from
an R interface.  Things like the placement of widgets are in my experience
much easier with visual tools.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue May  1 18:49:31 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue, 01 May 2001 13:49:31 -0400
Subject: [Rd] graphics library fltk
In-Reply-To: <Pine.WNT.4.31.0105011543000.1176-100000@gannet>
References: <3AEEBB4E.714CF7B5@univie.ac.at> <Pine.WNT.4.31.0105011543000.1176-100000@gannet>
Message-ID: <7kstetsk8qsv4o04kbq84irjb31tvn68vv@4ax.com>

On Tue, 1 May 2001 15:50:28 +0100 (GMT Daylight Time), you wrote in
message <Pine.WNT.4.31.0105011543000.1176-100000@gannet>:

>On Tue, 1 May 2001, Erich Neuwirth wrote:
>
>> we still do not have dynamic graphics in R natively.
>
>We do not intend to: that's what things like Duncan Murdoch's Rgl and
>Rggobi are for.  It's called not re-inventing the wheel.

I guess there's a question of what "natively" means.  I don't think
dynamic graphics should be in the base, but I do think it should be
possible to install a package to get access to them.  That's what I'm
aiming for with RGL.

It's considerably more difficult for the user to install a separate
system (Java, GGobi, or whatever).  Just about all free software
packages are fairly unfriendly about installation, so learning two
sets of rules (both R's and the other's) is a substantial barrier to
entry.  There are also the different conventions about user
interaction with the 2nd package to learn.

To help people writing such packages, it would be nice if the
underpinnings to allow dynamic graphics were in the base, e.g. exposed
data in graphics objects that can be changed, and the ability to
request a redraw of the current plot once the data have changed.
("Data" here is not just the points being plotted, I'm thinking of all
the parts of the graph:  the axes, labels, transformations, etc.)

We don't want to re-invent wheels, but I think we do want to
facilitate experimentation with graphics. 

>The hard bit is to find a way to describe how to use this from
>an R interface.  Things like the placement of widgets are in my experience
>much easier with visual tools.

That's definitely true, but I don't see why a package that provided
some visual tools couldn't be written.  I'm not asking someone to
write it right away (nor volunteering!), but I think it's something
that would be easier if the graphics model changed a bit, and I know
that's something that Ross and Paul are thinking about a lot.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May  1 20:24:23 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 1 May 2001 21:24:23 +0200 (MET DST)
Subject: [Rd] Re: [R] Crazy plots of time-series against dates (PR#930)
Message-ID: <200105011924.VAA02145@pubhealth.ku.dk>

"Marco Taboga" <mtaboga@tiscalinet.it> writes:

> OK, it works.  xlab and ylab had to be set properly.
> If you want to see what actually goes on, try:
> a<-chron(1:2000)
> b<-1:2000
> plot(a,b,type="l")
> 

One of the standard blunders with R's lazy evaluation and substitute is
to change the value of part of a substitute expression before it is
evaluated. I think the chron maintainer even inserted a note in the
FAQ about that (Hi, Kurt ;) )

In plot.times insert the line below to fix it

    if (!is.null(type <- dots$type)) 
        if (any(type == c("l", "b", "o"))) {
            xlab ; ylab  # force promises
            nas <- is.na(x)
            ...

Cc'ed to R-bugs so that it gets filed and eventually fixed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From MALIKSA@apci.com  Wed May  2 14:51:41 2001
From: MALIKSA@apci.com (MALIKSA@apci.com)
Date: Wed, 2 May 2001 15:51:41 +0200 (MET DST)
Subject: [Rd] (PR#931)
Message-ID: <200105021351.PAA14786@pubhealth.ku.dk>

Hi

I have installed the R package on my NT machine, but I cannot get the TCL
demos to work, like demo(tktttest). There was nothing in the install about
this

Atique Malik


+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  2 15:10:09 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 2 May 2001 16:10:09 +0200 (MET DST)
Subject: [Rd] (PR#931)
Message-ID: <200105021410.QAA15096@pubhealth.ku.dk>

On Wed, 2 May 2001 MALIKSA@apci.com wrote:

> Hi
>
> I have installed the R package on my NT machine, but I cannot get the TCL
> demos to work, like demo(tktttest). There was nothing in the install about

It's demo(tkttest), not demo(tktttest)!

> this

There *are* detailed instructions in the README *and* in the rw-FAQ,
and there is no file `the install'.  Please do read the documentation
provided.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed May  2 21:16:50 2001
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 2 May 2001 22:16:50 +0200 (MET DST)
Subject: [Rd] subdirs in package src dir
Message-ID: <Pine.OSF.4.21.0105022157360.17798-100000@zidsrv.sci.uni-klu.ac.at>


Sometimes I find it useful to put C or Fortran sources under subdirs of 
"mypackage/src", especially to distinguish between my own files and
e.g. lapack or blas sources. To get this working I would need a Makefile
in my package which contains the appropriate dependencies to these sources
in subdirs. 

But I don't want to add a complete Makefile, I want only a Makevars file
containing e.g. "OBJS=myfunc.o lapack/somefunc.o ...", currently this
would not work, because nobody looks into Makevars for an OBJS
variable. The following patch adds this functionality to the INSTALL
script, allowing to add an OBJS (or SRCS) variable to Makeconf. I tested
it with R 1.2.1, 1.2.2. and 1.2.3 on Linux, FreeBSD, Tru64 and Solaris.

But of course it is only a suggestion.

(I hope the TABs in the Makefile snippets below are not mangled by my mail
program) 

--- ./etc/Makefile.in.objs-patch	Sat Dec  2 11:25:28 2000
+++ ./etc/Makefile.in	Sat Mar  3 17:53:20 2001
@@ -10,7 +10,7 @@
 
 include $(top_builddir)/Makeconf
 
-SOURCES = Makeconf.in Makeconf-tests.in Renviron.in
+SOURCES = Makeconf.in Makeconf-tests.in Renviron.in Makefrag.in
 OBJECTS = $(SOURCES:.in=)
 distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
 DISTFILES = \
--- ./etc/Makefrag.in.objs-patch	Sat Mar  3 17:53:20 2001
+++ ./etc/Makefrag.in	Sat Mar  3 17:53:20 2001
@@ -0,0 +1,5 @@
+echoobjs:
+	@echo $(OBJS)
+
+echosrcs:
+	@echo $(SRCS)
--- ./src/scripts/INSTALL.in.objs-patch	Tue Feb 20 22:37:53 2001
+++ ./src/scripts/INSTALL.in	Sat Mar  3 17:56:05 2001
@@ -243,7 +243,18 @@
 	cd ..
       else
         cd src;
-          srcs=`ls *.[cfC] *.cc *.cpp 2>/dev/null`
+          srcs=""
+          objs=""
+          if [ -r Makevars ]; then
+            srcs=`make -s -f Makevars -f ${R_HOME}/etc/Makefrag echosrcs` 
+            if [ -z "${srcs}" ]; then
+              objs=`make -s -f Makevars -f ${R_HOME}/etc/Makefrag echoobjs` 
+              srcs=${objs}
+            fi
+          fi
+          if [ -z "${srcs}" ]; then
+            srcs=`ls *.[cfC] *.cc *.cpp 2>/dev/null`
+          fi
 	  if test -n "${srcs}"; then
 	    sh ${R_HOME}/bin/SHLIB -o ${pkg}.@SHLIB_EXT@ ${srcs} \
 	      && cp *.@SHLIB_EXT@ ${lib}/${pkg}/libs \


Albrecht

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  3 07:32:13 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 3 May 2001 07:32:13 +0100 (BST)
Subject: [Rd] subdirs in package src dir
In-Reply-To: <Pine.OSF.4.21.0105022157360.17798-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.31.0105030720510.2475-100000@auk.stats>

On Wed, 2 May 2001, Albrecht Gebhardt wrote:

>
> Sometimes I find it useful to put C or Fortran sources under subdirs of
> "mypackage/src", especially to distinguish between my own files and
> e.g. lapack or blas sources. To get this working I would need a Makefile
> in my package which contains the appropriate dependencies to these sources
> in subdirs.
>
> But I don't want to add a complete Makefile, I want only a Makevars file
> containing e.g. "OBJS=myfunc.o lapack/somefunc.o ...", currently this
> would not work, because nobody looks into Makevars for an OBJS
> variable.

Err... that's not how I read the following section in SHLIB.in

makeobjs="OBJS=\"${objs}\""
if test -r Makevars; then
  makefiles="-f Makevars ${makefiles}"
  if grep '^ *OBJS *=' Makevars >/dev/null; then
    makeobjs=
  fi
fi

The intention seems to be that OBJS is looked for in Makevars, and if
it does not work for you it needs fixing in SHLIB, not INSTALL.
It *did* work for me when I tried it:

auk% cat foo/src/Makevars
OBJS=foo1.o
auk% Rdev INSTALL foo
Installing source package `foo' ...
 libs
gcc -I/opt/R/R-devel/include  -I/usr/local/include   -fPIC  -O2 -g -Wall
-pedantic -c foo1.c -o foo1.o
gcc -G  -o foo.so foo1.o -L/usr/local/lib
...
auk% ls foo/src
Makevars  foo.so*   foo1.c    foo1.o    foo2.c


[...]

> --- ./etc/Makefrag.in.objs-patch	Sat Mar  3 17:53:20 2001
> +++ ./etc/Makefrag.in	Sat Mar  3 17:53:20 2001
> @@ -0,0 +1,5 @@
> +echoobjs:
> +	@echo $(OBJS)
> +
> +echosrcs:
> +	@echo $(SRCS)

There is no such file in the current R sources that I can find: are
you working on the latest version?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Thu May  3 08:48:48 2001
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Thu, 3 May 2001 09:48:48 +0200 (MET DST)
Subject: [Rd] subdirs in package src dir
In-Reply-To: <Pine.GSO.4.31.0105030720510.2475-100000@auk.stats>
Message-ID: <Pine.OSF.4.21.0105030913250.26989-100000@zidsrv.sci.uni-klu.ac.at>

On Thu, 3 May 2001, Prof Brian D Ripley wrote:

> On Wed, 2 May 2001, Albrecht Gebhardt wrote:
> 
> > ...
>
> The intention seems to be that OBJS is looked for in Makevars, and if
> it does not work for you it needs fixing in SHLIB, not INSTALL.
> It *did* work for me when I tried it:
> ...

ok, if it is working in R-devel I'm completely happy. I was working with
1.2.x, and it doesn't work there for me (at least until 1.2.2, I didn't
try an unmodified 1.2.3)

> [...]
> 
> > --- ./etc/Makefrag.in.objs-patch	Sat Mar  3 17:53:20 2001
> ...
> There is no such file in the current R sources that I can find: are
> you working on the latest version?
> 

see above. Makefrag was only part of my workaround for 1.2.x.

I will check it once more, also with R-devel and come back with the
results later. 

Thanks,

Albrecht

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  3 09:02:36 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 3 May 2001 09:02:36 +0100 (BST)
Subject: [Rd] subdirs in package src dir
In-Reply-To: <Pine.OSF.4.21.0105030913250.26989-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.31.0105030859180.22611-100000@toucan.stats>

On Thu, 3 May 2001, Albrecht Gebhardt wrote:

> On Thu, 3 May 2001, Prof Brian D Ripley wrote:
>
> > On Wed, 2 May 2001, Albrecht Gebhardt wrote:
> >
> > > ...
> >
> > The intention seems to be that OBJS is looked for in Makevars, and if
> > it does not work for you it needs fixing in SHLIB, not INSTALL.
> > It *did* work for me when I tried it:
> > ...
>
> ok, if it is working in R-devel I'm completely happy. I was working with
> 1.2.x, and it doesn't work there for me (at least until 1.2.2, I didn't
> try an unmodified 1.2.3)

It worked for me in 1.2.3 as well as R-devel, and also specifying files in
a subdirectory. I don't have any earlier versions up at present, but
I can't see any recent changes on this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Thu May  3 09:58:26 2001
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Thu, 3 May 2001 10:58:26 +0200 (MET DST)
Subject: [Rd] subdirs in package src dir
In-Reply-To: <Pine.GSO.4.31.0105030859180.22611-100000@toucan.stats>
Message-ID: <Pine.OSF.4.21.0105031053010.26989-100000@zidsrv.sci.uni-klu.ac.at>

On Thu, 3 May 2001, Prof Brian Ripley wrote:

> On Thu, 3 May 2001, Albrecht Gebhardt wrote:
> ...
> > ok, if it is working in R-devel I'm completely happy. I was working with
> > 1.2.x, and it doesn't work there for me (at least until 1.2.2, I didn't
> > try an unmodified 1.2.3)
> 
> It worked for me in 1.2.3 as well as R-devel, and also specifying files in
> a subdirectory. I don't have any earlier versions up at present, but
> I can't see any recent changes on this.

Ok I found it, I had "SRCS=myfunc.c subdir/myfunc.f" in my Makevars file,
now it works using OBJS=... (I thought I did use OBJS but I did not
recognize that I used a SRCS variable instead, sorry)

Albrecht 

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Fri May  4 16:22:32 2001
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Fri, 4 May 2001 17:22:32 +0200 (MET DST)
Subject: [Rd] scoping error in xy.coords (PR#932)
Message-ID: <200105041522.RAA11759@pubhealth.ku.dk>

Hola!

> rm(list=ls(all=TRUE))

> x <- 1:20
> y <- 1+x+rnorm(x)

> xy.coords(y  ~ x,NULL)

... expected output, correct, but when called from inside lowess:

>   lowess(y ~ x)
Error in xy.coords(x, y) : x and y lengths differ
> debug(xy.coords)
>   lowess(y ~ x)
debugging in: xy.coords(x, y)

... long listing deleted

    if (is.language(x)) {
        if (inherits(x, "formula") && length(x) == 3) {
            ylab <- deparse(x[[2]])
            xlab <- deparse(x[[3]])
            y <- eval(x[[2]], parent.frame())
            x <- eval(x[[3]], parent.frame())
        }
        else stop("invalid first argument")
    }
    else
... deleted
debug: if (inherits(x, "formula") && length(x) == 3) {
    ylab <- deparse(x[[2]])
    xlab <- deparse(x[[3]])
    y <- eval(x[[2]], parent.frame())
    x <- eval(x[[3]], parent.frame())
} else stop("invalid first argument")
Browse[1]> n
debug: ylab <- deparse(x[[2]])
Browse[1]> n
debug: xlab <- deparse(x[[3]])
Browse[1]> n
debug: y <- eval(x[[2]], parent.frame())
Browse[1]> n
debug: x <- eval(x[[3]], parent.frame())
Browse[1]> n
debug: if (length(x) != length(y)) {
    if (recycle) {
        if ((nx <- length(x)) < (ny <- length(y))) 
            x <- rep(x, length = ny)
        else y <- rep(y, length = nx)
    }
    else stop("x and y lengths differ")
}
Browse[1]> x
y ~ x
Browse[1]> y
NULL

x and y have their original values from the call, the evaluation 
inside is.formula .... have failed.

Browse[1]> c
Error in xy.coords(x, y) : x and y lengths differ



Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May  4 16:40:48 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 4 May 2001 08:40:48 -0700 (PDT)
Subject: [Rd] scoping error in xy.coords (PR#932)
In-Reply-To: <200105041522.RAA11759@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0105040829370.73704-100000@homer25.u.washington.edu>

On Fri, 4 May 2001 kjetilh@umsanet.edu.bo wrote:

> Hola!
>
> > rm(list=ls(all=TRUE))
>
> > x <- 1:20
> > y <- 1+x+rnorm(x)
>
> > xy.coords(y  ~ x,NULL)
>
> ... expected output, correct, but when called from inside lowess:
>
> >   lowess(y ~ x)
> Error in xy.coords(x, y) : x and y lengths differ


If you don't call them x and y it works
> x<-1:10
> y<-1:10
> lowess(y~x)
Error in xy.coords(x, y) : x and y lengths differ
> z<-y
> w<-x
> lowess(z~w)
$x
 [1]  1  2  3  4  5  6  7  8  9 10

$y
 [1]  1  2  3  4  5  6  7  8  9 10

The problem is that the formula is evaluated in the parent frame, where y
evaluates to NULL, and x evaluates to y~x, rather than in the global
environment where they would both evaluate to vectors.

In order to handle formulas correctly I think xy.coords needs to use the
same sort of indirect evaluation as model.frame: eg
   xy <-substitute(xy.coords(X,Y),list(X=substitute(x),Y=substitute(y)))
   xy<-eval(xy,parent.frame())
works as a replacement for the first two lines of lowess().  I hadn't
realised that xy.coords() was supposed to handle formulas, and since it
doesn't have a data= argument it can't do it very well.

This seems a bit drastic, given the number of times xy.coords is used.
Perhaps there's a simpler solution.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle
^^^^^^^^^^^^^^^^^^^^^^^^
 NOTE NEW EMAIL ADDRESS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May  4 17:06:23 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 May 2001 18:06:23 +0200
Subject: [Rd] scoping error in xy.coords (PR#932)
In-Reply-To: Thomas Lumley's message of "Fri, 4 May 2001 08:40:48 -0700 (PDT)"
References: <Pine.A41.4.33.0105040829370.73704-100000@homer25.u.washington.edu>
Message-ID: <x2u231p08w.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> evaluates to NULL, and x evaluates to y~x, rather than in the global
> environment where they would both evaluate to vectors.
> 
> In order to handle formulas correctly I think xy.coords needs to use the
> same sort of indirect evaluation as model.frame: eg
>    xy <-substitute(xy.coords(X,Y),list(X=substitute(x),Y=substitute(y)))
>    xy<-eval(xy,parent.frame())
> works as a replacement for the first two lines of lowess().  I hadn't
> realised that xy.coords() was supposed to handle formulas, and since it
> doesn't have a data= argument it can't do it very well.
> 
> This seems a bit drastic, given the number of times xy.coords is used.
> Perhaps there's a simpler solution.

Perhaps use the new formula environments in xy.coords? Seems to work


        if (inherits(x, "formula") && length(x) == 3) {
            ylab <- deparse(x[[2]])
            xlab <- deparse(x[[3]])
            y <- eval(x[[2]], environment(x), parent.frame())
            x <- eval(x[[3]], environment(x), parent.frame())
	}

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May  4 17:18:46 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 4 May 2001 09:18:46 -0700 (PDT)
Subject: [Rd] scoping error in xy.coords (PR#932)
In-Reply-To: <x2u231p08w.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105040918080.73704-100000@homer25.u.washington.edu>

On 4 May 2001, Peter Dalgaard BSA wrote:
>
> Perhaps use the new formula environments in xy.coords? Seems to work

Yes, much better.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jorvutom@icaro.dic.uchile.cl  Sat May  5 21:17:38 2001
From: jorvutom@icaro.dic.uchile.cl (jorvutom@icaro.dic.uchile.cl)
Date: Sat, 5 May 2001 22:17:38 +0200 (MET DST)
Subject: [Rd] read.xport bug of foreign pkg (PR#933)
Message-ID: <200105052017.WAA15889@pubhealth.ku.dk>

Full_Name: Jorge A. Tomasevic
Version: 1.2.2
OS: Win98
Submission from: (NULL) (146.83.23.177)


As i'm not an "R-expert-user", i will describe what i do:

i) open Rgui.exe
ii) ivoke foreign library : >library(foreign)
iii) i try to read an .xpt file (from Systat 9): >datos <-
read.xport('ipoisson.xpt')
iv) then the program crashes. Norton CrashGuard alerts the multiple failures:

Windows 98 Version 4.10.1998
RGUI failure in no-valid page module KERNEL32.DLL of 0177:bff7b983.
Regiters:
EAX=00000020 CS=0177 EIP=bff7b983 EFLGS=00010202
EBX=0270f150 SS=017f ESP=0270f108 EBP=0270f120
ECX=78037c48 DS=017f ESI=00000020 FS=47b7
EDX=00000000 ES=017f EDI=00000000 GS=0000
Bytes on CS:EIP:
,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x

Pile errors :
,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x


i'm afraid that this is some kind of incompatibility bug, but i hope that it
could be 
repaired easily.

Hopping to help somehow, 


Jorge A. Tomasevic
University of Chile 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sat May  5 21:42:22 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 05 May 2001 15:42:22 -0500
Subject: [Rd] read.xport bug of foreign pkg (PR#933)
In-Reply-To: <200105052017.WAA15889@pubhealth.ku.dk>
References: <200105052017.WAA15889@pubhealth.ku.dk>
Message-ID: <6ritjf1qa9.fsf@franz.stat.wisc.edu>

jorvutom@icaro.dic.uchile.cl writes:

> Full_Name: Jorge A. Tomasevic
> Version: 1.2.2
> OS: Win98
> Submission from: (NULL) (146.83.23.177)
> 
> 
> As i'm not an "R-expert-user", i will describe what i do:
> 
> i) open Rgui.exe
> ii) ivoke foreign library : >library(foreign)
> iii) i try to read an .xpt file (from Systat 9): >datos <-
> read.xport('ipoisson.xpt')
> iv) then the program crashes. Norton CrashGuard alerts the multiple failures:
> 
> Windows 98 Version 4.10.1998
> RGUI failure in no-valid page module KERNEL32.DLL of 0177:bff7b983.
> Regiters:
> EAX=00000020 CS=0177 EIP=bff7b983 EFLGS=00010202
> EBX=0270f150 SS=017f ESP=0270f108 EBP=0270f120
> ECX=78037c48 DS=017f ESI=00000020 FS=47b7
> EDX=00000000 ES=017f EDI=00000000 GS=0000
> Bytes on CS:EIP:
> ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x
> 
> Pile errors :
> ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x
> 
> 
> i'm afraid that this is some kind of incompatibility bug, but i hope that it
> could be 
> repaired easily.
> 
> Hopping to help somehow, 

Does Systat create an XPORT file in the SAS format or in its own
format?  The read.xport function reads the SAS XPORT format.  We would
not expect it to read Systat files.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Mon May  7 06:15:05 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Mon, 7 May 2001 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200105070515.HAA11148@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 930 *
Subject: Re: [R] Crazy plots of time-series against dates
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 May 2001 21:33:53 +0200
--error in chron package
* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
--Only on a specific sample file: send to maintainer.
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

* PR# 899 *
Subject: documentation problems in str.Rd
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
Date: Sat, 7 Apr 2001 23:08:23 +0200

Directory:  Graphics

* PR# 917 *
Subject: boxplot
From: skala@incoma.cz
Date: Fri, 20 Apr 2001 08:43:29 +0200 (MET DST)
--fixed for 1.2.3  (one could consider the bug an `accidental feature',
--		  but the documentation and the other S implementations 
--		  differ).
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 924 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:58:17 +0200 (MET DST)
--same as 923
* PR# 923 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:56:59 +0200 (MET DST)
--too little information

Directory:  Language

* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 929 *
Subject:  Segmentation fault linked to memory? 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 30 Apr 2001 14:34:11 +0100 (BST)
--looks like 32-bit integer overflow error in counting allocation size
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 862 *
Subject: Wrong sign for Pearson residuals
From: faraway@umich.edu
Date: Mon, 5 Mar 2001 18:04:34 +0100 (MET)

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
--Not applied for 1.2.3 (why?)
* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
--(Should be taken care of for 1.2.3).
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500

Directory:  TooMuchAtOnce

* PR# 918 *
Subject: several bugs
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Sun, 22 Apr 2001 23:13:38 -0400 (EDT)
--1. as.numeric -> use as.double.FOO for methods -- doc.fixed for 1.2.3
--2. cannot set attribute on NULL -- no bug
--3. rep(list() ... ) :  a wish  fulfilled for 1.3.x
--4. %*% is not a generic in R (but is fast!) but in S+  -- not a bug
--5. S-plus (S4) compatibility  -- a wish but not for now
--6. list()s with dim() attribute -- an ongoing `research topic'  :-)
* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

* PR# 927 *
Subject: Rgui 1.2.3 for Windows crashes reading huge CSV file
From: znmeb@aracnet.com
Date: Mon, 30 Apr 2001 07:14:50 +0200 (MET DST)
--Not clear this is to do with Windows.
* PR# 926 *
Subject: Rgui crash
From: bellis@hsph.harvard.edu
Date: Sun, 29 Apr 2001 20:45:15 +0200 (MET DST)
--Unable to reproduce even on a Win2k machine
* PR# 912 *
Subject: Rgui.exe crash on Windows 2000
From: gilg.seeber@uibk.ac.at
Date: Thu, 12 Apr 2001 15:07:52 +0200 (MET DST)
--seems to be specific to the submitter's system.
--Cannot reproduce.
* PR# 906 *
Subject: Win98 wheelmouse graphics lock problem
From: cpaul@ucla.edu
Date: Tue, 10 Apr 2001 17:50:44 +0200 (MET DST)
--Cannot reproduce without more information
--In particular, does not happen with Microsoft Intellimouse on W2K

Directory:  incoming

* PR# 933 *
Subject: read.xport bug of foreign pkg
From: jorvutom@icaro.dic.uchile.cl
Date: Sat, 5 May 2001 22:17:37 +0200 (MET DST)
* PR# 932 *
Subject: scoping error in xy.coords
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 04 May 2001 11:20:57 -0400
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@auckland.ac.nz  Tue May  8 05:49:47 2001
From: mh.smith@auckland.ac.nz (mh.smith@auckland.ac.nz)
Date: Tue, 8 May 2001 06:49:47 +0200 (MET DST)
Subject: [Rd] ks.test in ctest package (PR#934)
Message-ID: <200105080449.GAA03028@pubhealth.ku.dk>


1.    There is, I believe, some redundant code in the calculation of the
test statistic in ks.test in the package ctest.

 Lines 34-37 of the code read

          x <- y(sort(x), ...) - (0:(n - 1))/n
        STATISTIC <- switch(alternative, two.sided = max(abs(c(x,
           x - 1/n))), greater = max(c(x, x - 1/n)), less = -min(c(x,
            x - 1/n)))


Lines 35-37 could read

        STATISTIC <- switch(alternative, two.sided = max(c(x,1/n - x)),
                        greater = max(x), less = max(1/n - x))

Because

    x > x - 1/n and  1/n - x  > -x,

and thus

max(abs(c(x, x - 1/n))) = max(c(x,1/n - x)),

max(c(x, x - 1/n)) = max(x)

and

-min(c(x, x - 1/n)) = max (1/n - x)

2.    The manual entry should also make it clear that the one-sided
tests are not about theactual cdf in relation to the null hypothsis cdf
Fo, but about the quantiles of the actual distribution in relation to
the quantiles of the null hypothesis cdf.

For example the "greater" test has the STATISTIC, from line 34,

       y(sort(x)) - (0:(n-1))/n

If this is large positive it would contain evidence that the actual cdf
F is less than the null hypothesis Fo. This is the traditional form of
the "less" alternative hypothesis.

    Ha:  F < Fo

is equivalent to the quantiles of the actual distribution being greater
than quantiles of the null hypothesised cdf Fo, consequently the manual
entry should make clear that the one sided alternatives "greater" or
"less" refers to the quantiles and not the cdf's.

3.    Another feature that it would be very useful to add to ks.test
would be the automatic return of  a confidence interval for the actual
cdf F.  Adding a conf.level argument and taking the form of the interval
from the value of the alternative argument would be a relatively simple
task, although it would require .  This would bring the value of the
function into line with the t.test function.


--
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Murray H. Smith,      Senior Lecturer in Engineering Statistics
Engineering Science Department
The University of Auckland
Private Bag 92019
Auckland
New Zealand
Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
email: mh.smith@auckland.ac.nz
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue May  8 07:42:01 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 8 May 2001 08:42:01 +0200
Subject: [Rd] Rnews 2001/2
Message-ID: <15095.38201.711541.2225@mithrandir.hornik.net>

Dear package author,

We are now accepting submissions for the second issue of the R
Newsletter.  For more information see

      http://cran.r-project.org/doc/Rnews/

If you are the author of a package on CRAN and you would like to promote
it a little bit, or if you simply have an interesting application using
R, we hope you can find some time to write a short article on it.  We
suggest that it be approximately 2 pages or less.  The idea of the
newsletter is that it be interesting to R users without being too
technical.  For example an article describing a package could begin by
briefly outlining the statistical background and go on to demonstrate
the usage on some typical data set.  Of course graphics are more than
welcome!

Bill Venables is also encouraging submissions to the more specialist
Programmer's Niche column.  In this case the technical level could be a
little higher, of course, but not necessarily: ingeniousness is the key.

Instructions for authors can be found in ``Writing Articles for R News''
in the first issue of Rnews; more detailed instructions will shortly be
available on the web page.  Remember that submissions have to be in
LaTeX, and that graphics are preferred in PDF or EPS format.  (Bitmaps
like JPG are also OK but please keep in mind that those cannot be scaled
easily and hence might look ugly in the final version.)

The deadline for submissions is

	 June 13, 2001

Keep the contributions rolling in!

For the Editorial Board,
-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Wed May  9 07:32:24 2001
From: telford@progsoc.uts.edu.au (Telford)
Date: Wed, 9 May 2001 06:32:24 +0000
Subject: [Rd] Quick note on R mirror site in Australia
Message-ID: <20010509063224.A7541@progsoc.uts.edu.au>

I've noticed http://mirror.aarnet.edu.au/CRAN has been consistently
giving 404's lately, might be worth keeping an eye on this see if
it is dead or just renovating.

-- 
S1G: 10610210 seconds remaining			- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wb@vestein.arb-phys.uni-dortmund.de  Wed May  9 12:42:26 2001
From: wb@vestein.arb-phys.uni-dortmund.de (wb@vestein.arb-phys.uni-dortmund.de)
Date: Wed, 9 May 2001 13:42:26 +0200 (MET DST)
Subject: [Rd] help.start() fails (PR#935)
Message-ID: <200105091142.NAA24335@pubhealth.ku.dk>


On my system help.start() failed with "could not write .R/doc/html/packages.html" 
or equivalent. This due to /usr/local/lib/R/doc/html/packages-head.html 
having protection -r--r--r--. After inserting 'chmod u+w ${PKGLIST}'
after 'cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}'in
/usr/local/lib/R/bin/help.links, it works.


--please do not edit the information below--

Version:
 platform = i386--freebsd4.2
 arch = i386
 os = freebsd4.2
 system = i386, freebsd4.2
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wb@vestein.arb-phys.uni-dortmund.de  Wed May  9 12:44:39 2001
From: wb@vestein.arb-phys.uni-dortmund.de (wb@vestein.arb-phys.uni-dortmund.de)
Date: Wed, 9 May 2001 13:44:39 +0200 (MET DST)
Subject: [Rd] help.start() failed (PR#936)
Message-ID: <200105091144.NAA24412@pubhealth.ku.dk>

On my system help.start() failed with "could not write .R/doc/html/packages.html
"
or equivalent. This due to /usr/local/lib/R/doc/html/packages-head.html
having protection -r--r--r--. After inserting 'chmod u+w ${PKGLIST}'
after 'cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}'in
/usr/local/lib/R/bin/help.links, it works.

BTW. bug.report() fails with "mailx: not found" also.

--please do not edit the information below--

Version:
 platform = i386--freebsd4.2
 arch = i386
 os = freebsd4.2
 system = i386, freebsd4.2
 status =
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed May  9 16:15:36 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 09 May 2001 11:15:36 -0400
Subject: [Rd] Windows binary directory
In-Reply-To: <14913.8539.45887.551220@celeborn.at>
References: <14913.8539.45887.551220@celeborn.at>
Message-ID: <icnift0cbv28os40cnm6534o2nrdeenf5c@4ax.com>

Fritz:

A while ago you hid the windows-9x and windows-NT directories on CRAN,
so that old scripts could still use them but they wouldn't be
displayed to confuse new users.  I was just looking at the cran.us
mirror, and apparently the directory hiding didn't propagate there.  I
checked several other mirrors (I couldn't get through to DK or HU) and
it appears that only the Austrian site does the hiding.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May  9 18:26:02 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 09 May 2001 13:26:02 -0400
Subject: [Rd] Package overview document?
References: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats> <3a4f5971.54339465@smtp1.sympatico.ca>
Message-ID: <3AF97DAA.BBFC6FC7@bank-banque-canada.ca>

This came from deep in my unresolved pile:
>>On Sun, 31 Dec 2000, Duncan Murdoch wrote:
>>> I'd like to write an overview of a package, and have it show up when

>>> someone types
>>>
>>>  library(help=mypackage)
  ...
>>The problem is ensuring that you have a non-clashing name. dse1 has
>>00General.Description which seems to me to be very likely to clash.
...
>I think the most obvious choice of name is the name of the package,
>but that would clash fairly often with the name of a function within
>it (e.g. boot), and it wouldn't show up first in alphabetical lists.

Is there yet any prescribed approach. If not, I would like to suggest
00General.Description.xxx  where xxx is replaced by the package name.
The 00 is to put it near the beginning of the index, but there may be a
better way.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 10 07:31:16 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 10 May 2001 08:31:16 +0200 (MET DST)
Subject: [Rd] Re: PR#929 and [R] matrix: suspected integer overflow
Message-ID: <200105100631.IAA01466@pubhealth.ku.dk>

On Wed, 9 May 2001 andreas.krause@pharma.novartis.com wrote:

> Is the following a known issue, in particular in terms of message clarity of the latter two?

Yes, bug PR#929.  It's a bug in asInteger, an internal C routine which
using (int) on a double.  coerce.c has better routines used to corce
vectors, and the comment

/* This section of code handles type conversion for elements */
/* of data vectors.  Type coercion throughout R should use these */
/* routines to ensure consistency. */

!

I have altered asInteger (etc) to use the same routines.

However, I am not happy with what IntegerFromReal does: it gives the
maximum integer and the message.  I think it would be much better to return
NA in that cirumstance, when most uses of asInteger would give up
(correctly) and generate a meaningful error.

Comments, R-core?

> > matrix(0, 10^8, 10^8)
> Error: cannot allocate vector of size 2064896 Kb
> > matrix(0, 20, 10^10)
> Error in matrix(0, 20, 10^10) : negative length vectors are not allowed
> > matrix(0, 10^10, 10^10)
> Error: cannot allocate vector of size 0 Kb

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed May  9 20:41:56 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 May 2001 21:41:56 +0200
Subject: [Rd] Package overview document?
In-Reply-To: <3AF97DAA.BBFC6FC7@bank-banque-canada.ca>
References: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats>
 <3a4f5971.54339465@smtp1.sympatico.ca>
 <3AF97DAA.BBFC6FC7@bank-banque-canada.ca>
Message-ID: <15097.40324.870687.597994@mithrandir.hornik.net>

>>>>> Paul Gilbert writes:

> This came from deep in my unresolved pile:
>>> On Sun, 31 Dec 2000, Duncan Murdoch wrote:
>>>> I'd like to write an overview of a package, and have it show up when

>>>> someone types
>>>> 
>>>> library(help=mypackage)
>   ...
>>> The problem is ensuring that you have a non-clashing name. dse1 has
>>> 00General.Description which seems to me to be very likely to clash.
> ...
>> I think the most obvious choice of name is the name of the package,
>> but that would clash fairly often with the name of a function within
>> it (e.g. boot), and it wouldn't show up first in alphabetical lists.

> Is there yet any prescribed approach. If not, I would like to suggest
> 00General.Description.xxx where xxx is replaced by the package name.
> The 00 is to put it near the beginning of the index, but there may be
> a better way.

Currently, library(help = PKG) shows the contents of the files TITLE,
DESCRIPTION and INDEX in that order.  For the time being, I would
recommend adding to INDEX, or maybe have something in INDEX pointing to
another file (e.g. contained in inst/doc so that it will be installed to
the doc subdir of the package).

More long term, we will have a better demo mechanism and better markup
for documentation ...

Best,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu May 10 08:23:36 2001
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 10 May 2001 09:23:36 +0200
Subject: [Rd] Re: Windows binary directory
In-Reply-To: <icnift0cbv28os40cnm6534o2nrdeenf5c@4ax.com>
References: <14913.8539.45887.551220@celeborn.at>
 <icnift0cbv28os40cnm6534o2nrdeenf5c@4ax.com>
Message-ID: <15098.16888.569772.436073@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 09 May 2001 11:15:36 -0400,
>>>>> Duncan Murdoch (DM) wrote:

  > Fritz:
  > A while ago you hid the windows-9x and windows-NT directories on CRAN,
  > so that old scripts could still use them but they wouldn't be
  > displayed to confuse new users.  I was just looking at the cran.us
  > mirror, and apparently the directory hiding didn't propagate there.  I
  > checked several other mirrors (I couldn't get through to DK or HU) and
  > it appears that only the Austrian site does the hiding.

Yes, that's because magic like this is done by the web server ... and
I have only control on what OUR server does ... but I think most new
new users will use the master site anyway (we had none of those ``bug
reports'' since ...

the links will be gone once 1.3 is out anyway (which is scheduled for
mid-june) 

.f


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 10 09:13:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 10 May 2001 09:13:27 +0100 (BST)
Subject: [Rd] Package overview document?
In-Reply-To: <3AF97DAA.BBFC6FC7@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0105100909160.15706-100000@auk.stats>

On Wed, 9 May 2001, Paul Gilbert wrote:

> This came from deep in my unresolved pile:
> >>On Sun, 31 Dec 2000, Duncan Murdoch wrote:
> >>> I'd like to write an overview of a package, and have it show up when
>
> >>> someone types
> >>>
> >>>  library(help=mypackage)
>   ...
> >>The problem is ensuring that you have a non-clashing name. dse1 has
> >>00General.Description which seems to me to be very likely to clash.
> ...
> >I think the most obvious choice of name is the name of the package,
> >but that would clash fairly often with the name of a function within
> >it (e.g. boot), and it wouldn't show up first in alphabetical lists.
>
> Is there yet any prescribed approach. If not, I would like to suggest
> 00General.Description.xxx  where xxx is replaced by the package name.
> The 00 is to put it near the beginning of the index, but there may be a
> better way.

Lot so unattributed quotes there ....

Note, things have changed since 2000 and functions.html is no longer built
(as from the next release).  So name clashes are less unimportant, and the
only place these names matter are in your own package unless you want

?00General.Description.dse1

to work.  (I really don't like the long name: what's wrong with
00Description or even 00Intro, the latter being the Unix man-pages
convention?)

However, for

library(help=mypackage)

the information should be in INDEX.  This is already done in several
packages, e.g. boot.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 10 10:07:19 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 May 2001 11:07:19 +0200
Subject: [Rd] Re: PR#929 and [R] matrix: suspected integer overflow
In-Reply-To: ripley@stats.ox.ac.uk's message of "Thu, 10 May 2001 08:31:16 +0200 (MET DST)"
References: <200105100631.IAA01466@pubhealth.ku.dk>
Message-ID: <x2g0ed608o.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> However, I am not happy with what IntegerFromReal does: it gives the
> maximum integer and the message.  I think it would be much better to return
> NA in that cirumstance, when most uses of asInteger would give up
> (correctly) and generate a meaningful error.
> 
> Comments, R-core?

Agreed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May 10 15:45:16 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 10 May 2001 10:45:16 -0400
Subject: [Rd] Package overview document?
References: <Pine.GSO.4.31.0105100909160.15706-100000@auk.stats>
Message-ID: <3AFAA97C.B6BB7671@bank-banque-canada.ca>

Brian

>Note, things have changed since 2000 and functions.html is no longer built
>(as from the next release).  So name clashes are less unimportant, and the
>only place these names matter are in your own package unless you want

>?00General.Description.dse1

>to work.  (I really don't like the long name: what's wrong with
>00Description or even 00Intro, the latter being the Unix man-pages
>convention?)

00Intro would be fine with me, but should that have the package name appended or not?

If not, what will happen to name clashes within a bundle?

When you say functions.html will not be built, does that mean there won't be an
overall index? That is the feature of the help system that I use the most.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 10 17:47:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 10 May 2001 17:47:27 +0100 (GMT Daylight Time)
Subject: [Rd] Package overview document?
In-Reply-To: <3AFAA97C.B6BB7671@bank-banque-canada.ca>
Message-ID: <Pine.WNT.4.31.0105101744310.1188-100000@gannet>

On Thu, 10 May 2001, Paul Gilbert wrote:

> Brian
>
> >Note, things have changed since 2000 and functions.html is no longer built
> >(as from the next release).  So name clashes are less unimportant, and the
> >only place these names matter are in your own package unless you want
>
> >?00General.Description.dse1
>
> >to work.  (I really don't like the long name: what's wrong with
> >00Description or even 00Intro, the latter being the Unix man-pages
> >convention?)
>
> 00Intro would be fine with me, but should that have the package name appended or not?
>
> If not, what will happen to name clashes within a bundle?
>
> When you say functions.html will not be built, does that mean there won't be an
> overall index? That is the feature of the help system that I use the most.

Yes, that has been the decision.  It's too hard to maintain: there is a
list of packages and a search facility (for all loaded packages, or
all packages in all currently specified libraries).

Note that the functions.html only worked on one platform (Unix) and
one browser (Netscape).  (Slight exaggeration.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sint@oeaw.ac.at  Thu May 10 22:31:59 2001
From: sint@oeaw.ac.at (sint@oeaw.ac.at)
Date: Thu, 10 May 2001 23:31:59 +0200 (MET DST)
Subject: [Rd] name creation with index arrays (PR#937)
Message-ID: <200105102131.XAA12164@pubhealth.ku.dk>

Full_Name: Peter Sint
Version: 1.22
OS: MacOS 9.04
Submission from: (NULL) (193.170.84.51)


The not so serious problem is probably not specific to Macintosh although I
found it there:

The small example from  R-intro works .
> x <- array(1:20,dim=c(4,5))
> i <- array(c(1:3,3:1),dim=c(3,2))
> i
  [,1] [,2]
[1,] 1 3
[2,] 2 2
[3,] 3 1
> x[i]
[1] 9 6 3

x[i] has no attribute!
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 9 13 17
[2,] 2 6 10 14 18
[3,] 3 7 11 15 19
[4,] 4 8 12 16 20
> x[i] <- 0
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 0 13 17
[2,] 2 0 10 14 18
[3,] 0 7 11 15 19
[4,] 4 8 12 16 20
>

>  colnames(x)<- c("c1","c2","c3","c4","c5")
> x[i]
[1] 9 6 3

BUT
> rownames(x)<- c("r1","r2","r3","r4")
> x[i]
NA NA r3 
 9  6  3 
> 
Rownames result in unsuccessful name formation (colnames do most likely not, but
this may depend on the order in the index array i). Better drop name making if
not o.k.

(Replacement [<- still works. 
Index matrices do not work on data frames, not a bug but a missing feature with
work around)
Reproduce:
x <- array(1:20,dim=c(4,5))
i <- array(c(1:3,3:1),dim=c(3,2))
i
x[i]
x
x[i] <- 0
x
colnames(x)<- c("c1","c2","c3","c4","c5")
x[i]
rownames(x)<- c("r1","r2","r3","r4")
x[i]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sint@oeaw.ac.at  Thu May 10 22:39:54 2001
From: sint@oeaw.ac.at (sint@oeaw.ac.at)
Date: Thu, 10 May 2001 23:39:54 +0200 (MET DST)
Subject: [Rd] name creation with index arrays (PR#938)
Message-ID: <200105102139.XAA12199@pubhealth.ku.dk>

Full_Name: Peter Sint
Version: 1.22
OS: MacOS 9.04
Submission from: (NULL) (193.170.84.51)


The not so serious problem is probably not specific to Macintosh although I
found it there:

The small example from  R-intro works .
> x <- array(1:20,dim=c(4,5))
> i <- array(c(1:3,3:1),dim=c(3,2))
> i
  [,1] [,2]
[1,] 1 3
[2,] 2 2
[3,] 3 1
> x[i]
[1] 9 6 3

x[i] has no attribute!
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 9 13 17
[2,] 2 6 10 14 18
[3,] 3 7 11 15 19
[4,] 4 8 12 16 20
> x[i] <- 0
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 0 13 17
[2,] 2 0 10 14 18
[3,] 0 7 11 15 19
[4,] 4 8 12 16 20
>

>  colnames(x)<- c("c1","c2","c3","c4","c5")
> x[i]
[1] 9 6 3

BUT
> rownames(x)<- c("r1","r2","r3","r4")
> x[i]
NA NA r3 
 9  6  3 
> 
Rownames result in unsuccessful name formation (colnames do most likely not, but
this may depend on the order in the index array i). Better drop name making if
not o.k.

(Replacement [<- still works. 
Index matrices do not work on data frames, not a bug but a missing feature with
work around)
Reproduce:
x <- array(1:20,dim=c(4,5))
i <- array(c(1:3,3:1),dim=c(3,2))
i
x[i]
x
x[i] <- 0
x
colnames(x)<- c("c1","c2","c3","c4","c5")
x[i]
rownames(x)<- c("r1","r2","r3","r4")
x[i]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Fri May 11 15:15:30 2001
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Fri, 11 May 2001 16:15:30 +0200
Subject: [Rd] new package 'strucchange'
Message-ID: <3AFBF402.F4EA7E9B@ci.tuwien.ac.at>

There is a new package in the devel-section of CRAN called 'strucchange'
providing functions for testing on structural change in linear
regression relationships.
It features tests/methods from the generalized fluctuation test
framework as well as from the F test (Chow test) framework. This
includes methods to fit, plot and test fluctuation processes (e.g.,
CUSUM, MOSUM, recursive/moving estimates) and F statistics,
respectively. Furthermore it is possible to monitor incoming data
online.

It only works with the current development version of R (forthcoming
1.3.x).

Package: strucchange
Version: 0.9
Date: 2001-05-09
Title: Tests on Structural Change
Author: Achim Zeileis, Bruce Hansen, Kurt Hornik,
        Christian Kleiber, Fritz Leisch, Andrea Peters
Maintainer: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Description: Various tests on structural change in linear regression
models.
Depends: R (>= 1.3.0)
License: GPL


--------------------------- 
Achim Zeileis
Institut fr Statistik
Technische Universitt Wien
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.firth@nuf.ox.ac.uk  Fri May 11 16:59:31 2001
From: david.firth@nuf.ox.ac.uk (david.firth@nuf.ox.ac.uk)
Date: Fri, 11 May 2001 17:59:31 +0200 (MET DST)
Subject: [Rd] Windows, RCMD INSTALL and path (PR#939)
Message-ID: <200105111559.RAA15284@pubhealth.ku.dk>

Full_Name: David Firth
Version: 1.2.3
OS: Windows NT4
Submission from: (NULL) (163.1.103.107)


Two things that look like bugs:

1.  RCMD INSTALL does not seem to cope with quotes in the Windows path.  With my
path set to

  PATH="C:\R\Rtools";"C:\R\rw1023\bin";C:\Perl\bin\;C:\WINNT\system32;C:\WINNT;C:\
 
  mingw2\bin

I get, for example, 

  C:\R>RCMD INSTALL boot
  RCMD INSTALL boot

  make: Entering directory `/cygdrive/c/R/rw1023/src/gnuwin32'
  make DLLNM=  EXTRADOCS= \
    -C C:/R/boot PKG=boot RHOME=C:/R/rw1023 RLIB=C:/R/rw1023/library \
    -f C:/R/rw1023/src/gnuwin32/MakePkg
  make: make: Command not found
  make: *** [pkg-boot] Error 127
  make: Leaving directory `/cygdrive/c/R/rw1023/src/gnuwin32'
  *** Installation of boot failed ***

But if I remove the quotes, as in

  PATH=C:\R\Rtools;C:\R\rw1023\bin;C:\Perl\bin\;C:\WINNT\system32;C:\WINNT;C:\ 

  mingw2\bin

then all goes as it should.

(Why do I have the quotes there anyway, you ask?  Well, I started out with

  PATH="C:Program Files\R\Rtools";"C:Program
Files\R\rw1023\bin";C:\Perl\bin\;C:\
  WINNT\system32;C:\WINNT;C:\mingw2.bin

but then RCMD INSTALL failed even more rapidly, presumably on account of the
space in the directory name?)

If this can't be fixed, perhaps add a note in the documentation about these
things?  (I looked in "Writing R Extensions" but found no mention of this
problem.)

2.  A smaller thing I noticed in help(INSTALL): under "Usage:" it should say
"Rcmd", not "Rcnd".

Best regards -- David


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 11 18:21:47 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 11 May 2001 18:21:47 +0100 (BST)
Subject: [Rd] Windows, RCMD INSTALL and path (PR#939)
In-Reply-To: <200105111559.RAA15284@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0105111815140.12696-100000@toucan.stats>

On Fri, 11 May 2001 david.firth@nuffield.oxford.ac.uk wrote:

> Full_Name: David Firth
> Version: 1.2.3
> OS: Windows NT4
> Submission from: (NULL) (163.1.103.107)
>
>
> Two things that look like bugs:
>
> 1.  RCMD INSTALL does not seem to cope with quotes in the Windows path.  With my

I'd say the other way round. Nowhere does it say that it will work with
quotes.

> path set to
>
>   PATH="C:\R\Rtools";"C:\R\rw1023\bin";C:\Perl\bin\;C:\WINNT\system32;C:\WINNT;C:\
>
>   mingw2\bin
>
> I get, for example,
>
>   C:\R>RCMD INSTALL boot
>   RCMD INSTALL boot
>
>   make: Entering directory `/cygdrive/c/R/rw1023/src/gnuwin32'
>   make DLLNM=  EXTRADOCS= \
>     -C C:/R/boot PKG=boot RHOME=C:/R/rw1023 RLIB=C:/R/rw1023/library \
>     -f C:/R/rw1023/src/gnuwin32/MakePkg
>   make: make: Command not found
>   make: *** [pkg-boot] Error 127
>   make: Leaving directory `/cygdrive/c/R/rw1023/src/gnuwin32'
>   *** Installation of boot failed ***
>
> But if I remove the quotes, as in
>
>   PATH=C:\R\Rtools;C:\R\rw1023\bin;C:\Perl\bin\;C:\WINNT\system32;C:\WINNT;C:\
>
>   mingw2\bin
>
> then all goes as it should.
>
> (Why do I have the quotes there anyway, you ask?  Well, I started out with
>
>   PATH="C:Program Files\R\Rtools";"C:Program
> Files\R\rw1023\bin";C:\Perl\bin\;C:\
>   WINNT\system32;C:\WINNT;C:\mingw2.bin
>
> but then RCMD INSTALL failed even more rapidly, presumably on account of the
> space in the directory name?)
>
> If this can't be fixed, perhaps add a note in the documentation about these
> things?  (I looked in "Writing R Extensions" but found no mention of this
> problem.)

We didn't ask you to stop beating your wife because it never occurred to
us that you would....

Note, though, this is a problem with the tools, not with anything we
provide, and the rw-FAQ does warn about spaces in paths.  Latex, for
example, will fail with spaces in path names.

Also

Building
--------

You also need the R source (R-1.3.0.tgz).

Then: untar R-1.3.0.tgz somewhere (with no spaces in the path names),

might be hint.

>
> 2.  A smaller thing I noticed in help(INSTALL): under "Usage:" it should say
> "Rcmd", not "Rcnd".

Already fixed.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Sat May 12 10:15:02 2001
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Sat, 12 May 2001 11:15:02 +0200 (MET DST)
Subject: [Rd] Re: [R] R for ARM Linux (moved from r-help to r-devel)
In-Reply-To: <CB38030C8A89D311B35400062950C38F8E0497@neimp5.nei.nih.gov>
Message-ID: <Pine.OSF.4.21.0105121018080.26392-100000@zidsrv.sci.uni-klu.ac.at>

On Fri, 11 May 2001, Cox, Terry (NEI) wrote:

> I am interested in your efforts to port R to ARM Linux.  If you are
> successful, then I have a good reason to spend the money to buy a Compaq
> iPAQ.

I have compiled R-1.2.2 for arm-linux (iPAQ) on the skiffcluster, an ARM
compile farm accessible at 

  http://www.handhelds.org/projects/skiffcluster.html

and R-1.2.3 using cross compilation tools on x86 linux (cross compilers
are also available at www.handhelds.org).

Compilation went smoothly, it is possible to start the resulting binary,
it prints its version as:
> version
         _                       
platform armv4l-unknown-linux-gnu
arch     armv4l                  
os       linux-gnu               
system   armv4l, linux-gnu       
status                           
major    1                       
minor    2.2                     
year     2001                    
month    02                      
day      26                      
language R                       

but it still fails to pass the tests ("make test"):
make test (with 1.2.2) stops at
......
running `simple-true.R'
comparing `simple-true.Rout' to `./simple-true.Rout.save' ...33c33
< [1] FALSE
---
> [1] TRUE
148c148
< [1] FALSE
---
> [1] TRUE

The problem is, that there is no FPU in these devices (ARM processors
generally can include FPUs but not the Intel StrongARM used in those
little PDAs), so arm-linux comes with a floating point emulation
and I guess this causes the troubles. 

Of course simple things like
 > x<-c(1,2,3)
 > mean(x)
 [1] 2 
work, but even when it comes to simple plots the next problems
arise (wrong plot coordinates resulting in strange pictures).

This reminds me the problems we had with R on alpha/tru64 some time ago
(they where also generated by numeric problems, 64 versus 32 bit in this
case) and had similar results (plots didnt work and so on).

Everybody who is interested can check it at one of the skiffcluster
machines:

telnet skiffclusterX.handhelds.org (X in 1,2,3,4,5,6) 
login guest, no password.

  skiffcluster6:~$ cd agebhars@uni-klu.ac.at
  skiffcluster6:~/agebhard@uni-klu.ac.at$ ls
  R-1.2.2  R-root  minicom-1.83.1

You'll find there a source tree (R-1.2.2), and a install tree (R-root).
So try runnning "./R-root/bin/R" or do a "make test" in R-1.2.2.

The next problem with R on iPAQ will be size: With standard settings you
have only 16MB flash which holds a minimum linux distribution and leaves
you with ~3MB of free space. But we would need this already for R.bin:

  skiffcluster6:~/agebhard@uni-klu.ac.at$ ls -l R-root/lib/R/bin/R.bin
  -rwxr-xr-x    1 guest    users     3221131 Mar 31 12:53 R-root/lib/R/bin/R.bin

and the base libraries would take the next 13MB:

  skiffcluster6:~/agebhard@uni-klu.ac.at$ du -s R-root/lib/R/library/
  13372   R-root/lib/R/library

So if you want to put R on the iPAQ there will be the need for extra
memory (IBM microdrive or CF flash memory). But you will come to this
conclusion anyway, whether installing R or not, because you will also need
other things like perl, python, tcltk, ... which alltogether won't fit
into the base 16MB flash. 

But nevertheless, one task in porting for PDAs like the iPAQ will be to
reduce the basic R installation in size, cutting of unnecessary help
formats, scripts, may be even some of the datasets, and reducing the size
of the base library by moving non core functions out to libraries.

Currently I'm experimenting with the crosscompiler setup on a x86 linux
machine and R-1.2.3. I'm running R on a H3600 iPAQ 

  http://www.compaq.com/products/quickspecs/10632_na/10632_na.HTML

with 16MB flash and 32MB RAM.

R resides NFS mounted across a serial ppp link on my x86 linux box, but I
will soon upgrade to additional flash memory so that I can put R directly
on the PDA.

> 
> Terry A. Cox, MD, PhD
> National Eye Institute
> 
> National Institutes of Health
> 31 Center Drive, MSC 2510
> Building 31, Room 6A52
> Bethesda, MD 20892-2510
> 
> Phone: 301-496-6583
> FAX: 301-496-2297
> Email: tac@nei.nih.gov
> 
> -----Original Message-----
> From: Kurt Hornik [mailto:Kurt.Hornik@ci.tuwien.ac.at]
> Sent: Friday, May 11, 2001 3:27 PM
> To: Cox, Terry (NEI)
> Cc: 'r-help@lists.R-project.org'
> Subject: Re: [R] R for ARM Linux
> 
> 
> >>>>> Cox, Terry (NEI) writes:
> 
> > Would it be possible to port R to ARM Linux for Compaq iPaq and similar
> > handheld computers?  (See http://handhelds.org/).
> 
> I think Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at> has mostly
> get this to work.

still some work to do, see above ;)

> 
> -k
> 

Albrecht

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun May 13 17:39:26 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 13 May 2001 18:39:26 +0200
Subject: [Rd] ks.test in ctest package (PR#934)
In-Reply-To: <200105080449.GAA03028@pubhealth.ku.dk>
References: <200105080449.GAA03028@pubhealth.ku.dk>
Message-ID: <15102.47294.305460.849618@mithrandir.hornik.net>

>>>>> mh smith writes:

> 1.  There is, I believe, some redundant code in the calculation of the
> test statistic in ks.test in the package ctest.

Thanks, fixed.

> 2.    The manual entry should also make it clear that the one-sided
> tests are not about theactual cdf in relation to the null hypothsis cdf
> Fo, but about the quantiles of the actual distribution in relation to
> the quantiles of the null hypothesis cdf.

> ...

THanks for catching this bug.  This should really give the usual
behavior that e.g. `alternative = "less"' means H_0: F >= F_0 for all
points vs H_a: F(t) < F_0(t) for some t.  Fixed now.

> 3.    Another feature that it would be very useful to add to ks.test
> would be the automatic return of  a confidence interval for the actual
> cdf F.  Adding a conf.level argument and taking the form of the interval
> from the value of the alternative argument would be a relatively simple
> task, although it would require .  This would bring the value of the
> function into line with the t.test function.

I am not sure whether we want to do this in the simple htest framework.
Attempting to print a confidence interval given by two functions rather
than two values will be confusing.  I'd much rather have users do

	confint(ecdf(x), conf.level = 0.95)

where a generic confint as in MASS with a method for objects of class
"ecdf" as in stepfun.

[The ``classical'' tests conceptually are really about a single
parameter only.  Should this be changed?  One could argue that if a
hypothesis about the underlying distribution function is tested ...]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Mon May 14 00:47:25 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sun, 13 May 2001 19:47:25 -0400 (EDT)
Subject: [Rd] Dynamic C Symbols and Embedding Suggestion
Message-ID: <Pine.GSO.4.10.10105131930300.12616-100000@hsph.harvard.edu>


Hello, I've been playing around w/ the new dynamic C symbol stuff (thank
you for doing that!) in the, um, 5/11/01 R-devel package and, unless I've
missed something incredibly obvious, there doesn't appear to be a
mechanism for registering functions of an embedding executable. It seems
like this would be a Good Thing to have. 

Since I'm doing most of my work in Windows at the moment (all of the
embedding apps I'm working on are Windows based so I've not really messed
w/ the *NIX embedding stuff) I did a little experiment to see if I could
bind my primary executable. Adding the code below to Rdynload.c seemed to
work (in the Windows case). You'll note the remarkable resemblance to
AddDLL. :-) My test code calls this to set up its function list just after
R_ReplDllinit() just before entering the do1-loop--- though perhaps this
should be integrated into some part of the setup procedure for embedding
apps.


DllInfo* R_RegisterEmbeddedExecutable(HINSTANCE handle,char* path)
{
	char* dpath,*name,DLLname[PATH_MAX], *p;

	DeleteDLL(path);
	if(CountDLL == MAX_NUM_DLLS) {
		strcpy(DLLerror,"unable to register embedded executable.
too many libraries");
		return 0;
	}

    dpath = malloc(strlen(path)+1);
    if(dpath == NULL) {
	strcpy(DLLerror,"Couldn't allocate space for 'path'");
	return 0;
    }
    strcpy(dpath, path);
    
    if(R_osDynSymbol->fixPath)
	R_osDynSymbol->fixPath(dpath);

    p = strrchr(dpath, R_DIR_SEPARATOR); 
    if(!p) p = dpath; else p++;
    strcpy(DLLname, p);
    p = strchr(DLLname, '.');
    if(p) *p = '\0';
    name = malloc(strlen(DLLname)+1);
    if(name == NULL) {
	strcpy(DLLerror,"Couldn't allocate space for 'name'");
	free(dpath);
	return 0;
    }
    strcpy(name, DLLname);

    LoadedDLL[CountDLL].path = dpath;
    LoadedDLL[CountDLL].name = name;
    LoadedDLL[CountDLL].handle = handle;

    LoadedDLL[CountDLL].numCSymbols = 0;
    LoadedDLL[CountDLL].numCallSymbols = 0;
    LoadedDLL[CountDLL].numFortranSymbols = 0;
    LoadedDLL[CountDLL].CSymbols = NULL;
    LoadedDLL[CountDLL].CallSymbols = NULL;
    LoadedDLL[CountDLL].FortranSymbols = NULL;

	return LoadedDLL + (CountDLL++);

}



Byron Ellis (bellis@hsph.harvard.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 14 11:04:53 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 14 May 2001 12:04:53 +0200
Subject: [Rd] solve( <complex> ) etc
Message-ID: <15103.44485.793022.830982@gargle.gargle.HOWL>

For porting some (time series related) software from S-plus,
I need  solve() {i.e.  solve.qr() }  to work with complex matrices.

I have had a similar request for this from a local user a while back already.
Till R-1.x.y {at least x=y=0} we have had complex Linpack and BLAS in R's 
sources src/appl/z*.f  but never had an R interface anyway and subsequently
have dropped it.

Should we have a package or a `module' (new in R-1.3) 
for providing complex linear algebra in R?
 
Has anyone done some of the work already?
R-devel readers, thanks for your  support!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Mon May 14 13:53:29 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 14 May 2001 08:53:29 -0400
Subject: [Rd] Dynamic C Symbols and Embedding Suggestion
In-Reply-To: <Pine.GSO.4.10.10105131930300.12616-100000@hsph.harvard.edu>; from bellis@hsph.harvard.edu on Sun, May 13, 2001 at 07:47:25PM -0400
References: <Pine.GSO.4.10.10105131930300.12616-100000@hsph.harvard.edu>
Message-ID: <20010514085329.S10120@jessie.research.bell-labs.com>

Byron Ellis wrote:
> 
> Hello, I've been playing around w/ the new dynamic C symbol stuff (thank
> you for doing that!) in the, um, 5/11/01 R-devel package and, unless I've
> missed something incredibly obvious, there doesn't appear to be a
> mechanism for registering functions of an embedding executable. It seems
> like this would be a Good Thing to have. 

Hi Byron,

You are correct. There is no way to explicitly make the symbols of the
host/embedding application available to R. As you point out, the code
below looks like the second half of the AddDLL() routine. And we
should arrange AddDLL() to perform the loading of the code and then
call another routine to register it at the end of the LoadedDLL
array. In this way, the host application can also call this second
routine itself (or even override it, if that should every be useful).


One reason for this omission is that I haven't yet found a need for
it. But the embedding R in another application is still reasonably recent
(at least on Unix), so the more we found out about what is needed, the better.

Here are some reasons I think we haven't needed to be able to access
the symbols in the host application.

Firstly, most C routines are not directly callable from R. Certainly
those accessed by .Call, .External require knowledge of R. Because of this
explicit dependency on libR.so, and the need to ensure that
they are called only after R has been initialized makes it more sensible
to load them as a regular R package as part of the post-initialization of R.

Routines accessed via .C and .Fortran typically need an extra layer
of indirection to handle arguments as they come from R to the native code.
For example, an S call
  .C("foo", x, length(x))
might map to the C routine
   void foo(double *x, Sint *len) {
      realFoo(x, *len);
   }

The real routine is realFoo() and we have to convert the length
argument to a scalar rather than a pointer to a scalar.  In this
setup, R need never know about realFoo() explicitly. It will be
resolved by the dynamic loader (for better or worse).  Luke and I (at
the very least) are keen to avoid the dynamic loader and to have
people explicitly link against libraries as it avoids
platform-specific nuances of the loader that are very hard to control.


The examples where it is useful for R to be able to see symbols in the
host application are those that take no arguments and whose value is
ignored. Are there any interesting examples of this? 

Thanks for pointing out the idea of separating the two task currently
performed by AddDLL(). I'll separate them later today.

 D.

> 
> Since I'm doing most of my work in Windows at the moment (all of the
> embedding apps I'm working on are Windows based so I've not really messed
> w/ the *NIX embedding stuff) I did a little experiment to see if I could
> bind my primary executable. Adding the code below to Rdynload.c seemed to
> work (in the Windows case). You'll note the remarkable resemblance to
> AddDLL. :-) My test code calls this to set up its function list just after
> R_ReplDllinit() just before entering the do1-loop--- though perhaps this
> should be integrated into some part of the setup procedure for embedding
> apps.
> 
> 
> DllInfo* R_RegisterEmbeddedExecutable(HINSTANCE handle,char* path)
> {
> 	char* dpath,*name,DLLname[PATH_MAX], *p;
> 
> 	DeleteDLL(path);
> 	if(CountDLL == MAX_NUM_DLLS) {
> 		strcpy(DLLerror,"unable to register embedded executable.
> too many libraries");
> 		return 0;
> 	}
> 
>     dpath = malloc(strlen(path)+1);
>     if(dpath == NULL) {
> 	strcpy(DLLerror,"Couldn't allocate space for 'path'");
> 	return 0;
>     }
>     strcpy(dpath, path);
>     
>     if(R_osDynSymbol->fixPath)
> 	R_osDynSymbol->fixPath(dpath);
> 
>     p = strrchr(dpath, R_DIR_SEPARATOR); 
>     if(!p) p = dpath; else p++;
>     strcpy(DLLname, p);
>     p = strchr(DLLname, '.');
>     if(p) *p = '\0';
>     name = malloc(strlen(DLLname)+1);
>     if(name == NULL) {
> 	strcpy(DLLerror,"Couldn't allocate space for 'name'");
> 	free(dpath);
> 	return 0;
>     }
>     strcpy(name, DLLname);
> 
>     LoadedDLL[CountDLL].path = dpath;
>     LoadedDLL[CountDLL].name = name;
>     LoadedDLL[CountDLL].handle = handle;
> 
>     LoadedDLL[CountDLL].numCSymbols = 0;
>     LoadedDLL[CountDLL].numCallSymbols = 0;
>     LoadedDLL[CountDLL].numFortranSymbols = 0;
>     LoadedDLL[CountDLL].CSymbols = NULL;
>     LoadedDLL[CountDLL].CallSymbols = NULL;
>     LoadedDLL[CountDLL].FortranSymbols = NULL;
> 
> 	return LoadedDLL + (CountDLL++);
> 
> }
> 
> 
> 
> Byron Ellis (bellis@hsph.harvard.edu)
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Mon May 14 16:28:18 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Mon, 14 May 2001 11:28:18 -0400 (EDT)
Subject: [Rd] Dynamic C Symbols and Embedding Suggestion
In-Reply-To: <20010514085329.S10120@jessie.research.bell-labs.com>
Message-ID: <Pine.GSO.4.10.10105141115380.13899-100000@hsph.harvard.edu>

On Mon, 14 May 2001, Duncan Temple Lang wrote:

> Byron Ellis wrote:
> > 
> 
> One reason for this omission is that I haven't yet found a need for
> it. But the embedding R in another application is still reasonably recent
> (at least on Unix), so the more we found out about what is needed, the better.
> 
> Here are some reasons I think we haven't needed to be able to access
> the symbols in the host application.
> 
> Firstly, most C routines are not directly callable from R. Certainly
> those accessed by .Call, .External require knowledge of R. Because of this
> explicit dependency on libR.so, and the need to ensure that
> they are called only after R has been initialized makes it more sensible
> to load them as a regular R package as part of the post-initialization of R.
> 
> Routines accessed via .C and .Fortran typically need an extra layer
> of indirection to handle arguments as they come from R to the native code.
> For example, an S call
>   .C("foo", x, length(x))
> might map to the C routine
>    void foo(double *x, Sint *len) {
>       realFoo(x, *len);
>    }
> 
> The real routine is realFoo() and we have to convert the length
> argument to a scalar rather than a pointer to a scalar.  In this
> setup, R need never know about realFoo() explicitly. It will be
> resolved by the dynamic loader (for better or worse).  Luke and I (at
> the very least) are keen to avoid the dynamic loader and to have
> people explicitly link against libraries as it avoids
> platform-specific nuances of the loader that are very hard to control.
> 
> 
> The examples where it is useful for R to be able to see symbols in the
> host application are those that take no arguments and whose value is
> ignored. Are there any interesting examples of this? 

I'm not thinking so much in terms of random C functions that we may want
to call from R--- but rather functions which are intended to be called
from R but need to be in the host application for one reason or another.
Two immediate examples come to my mind (at least on the Windows
platform--you should be able to get around this first one in X and the
second doesn't apply to *NIX platforms :-)):

1. GUI interfaces a la S-Plus. That is to say the ability to add menus or
other things (graphics devices, etc.) to the primary GUI interface from R.
For instance, I have a piece of code that lets me attach arbitrary R
expressions to menu items which are then executed by taking over the
console interface temporarily (with the option to suppress output). In the
case of the official R GUI obviously you don't have this problem since it
is relatively tightly coupled to the core engine and the executable itself
doesn't really do anything.

2. An ActiveX control (see, doesn't apply ;-)). In this situation
(specifically embedding R in Internet Explorer to match the SNetscape
control since IE has something like 97% of the Windows desktop
marketshare) I can't use the hack described in my original email since
GetModuleHandle(NULL) returns IEXPLORE.EXE not a handle to the COM DLL
(unfortunate, but true). In this case I'd like to add some links between
the Javascript event model and R so I need to expose the fire*
functionality.

> 
> Thanks for pointing out the idea of separating the two task currently
> performed by AddDLL(). I'll separate them later today.

Nifty.

> 
>  D.



Byron Ellis (bellis@hsph.harvard.edu)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May 15 17:51:01 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 15 May 2001 12:51:01 -0400
Subject: [Rd] truncate
Message-ID: <3B015E75.35CCF08@bank-banque-canada.ca>

I see in the devel snapshot there is a new generic method

> truncate
function (con, ...)
UseMethod("truncate")

which conflicts with a generic method in one of my packages:

> truncate
function (x, start = NULL, end = NULL)
{
    UseMethod("truncate")
}

I don't think there is a problem, but there used to be a recommendation to use the
same name for the first argument in generic and specific methods. Is that still
important?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 15 18:00:44 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 15 May 2001 18:00:44 +0100 (BST)
Subject: [Rd] truncate
In-Reply-To: <3B015E75.35CCF08@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>

On Tue, 15 May 2001, Paul Gilbert wrote:

> I see in the devel snapshot there is a new generic method
>
> > truncate
> function (con, ...)
> UseMethod("truncate")
>
> which conflicts with a generic method in one of my packages:
>
> > truncate
> function (x, start = NULL, end = NULL)
> {
>     UseMethod("truncate")
> }
>
> I don't think there is a problem, but there used to be a recommendation to use the
> same name for the first argument in generic and specific methods. Is that still
> important?

It is desirable in R, important in S, essential in S-PLUS 6.0.

There is already a truncate function in Rstreams, BTW, which this
is intended to supersede.  That (and that in R-devel) do mean the same as
the system call truncate(3c), which I guess yours does not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May 15 18:28:01 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 15 May 2001 13:28:01 -0400
Subject: [Rd] truncate
References: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>
Message-ID: <3B016720.73F88B23@bank-banque-canada.ca>

PG> I don't think there is a problem, but there used to be a recommendation to use
the
PG> same name for the first argument in generic and specific methods. Is that still
PG> important?

BDR>It is desirable in R, important in S, essential in S-PLUS 6.0.

BDR>There is already a truncate function in Rstreams, BTW, which this
BDR>is intended to supersede.  That (and that in R-devel) do mean the same as
BDR>the system call truncate(3c), which I guess yours does not.

I guess if functions are going to be moving from packages into base there will be a
lot more chance for name conflicts. Generic functions help a lot to solve this but it
seems a naming convention for the first argument may be a good idea too. Some time
ago I changed many of my generic functions to use "x" as the first argument (on
someone's recommendation).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thoffman@zappa.sax.de  Tue May 15 22:36:37 2001
From: thoffman@zappa.sax.de (thoffman@zappa.sax.de)
Date: Tue, 15 May 2001 23:36:37 +0200 (MET DST)
Subject: [Rd] GCircle(): fails for non-clippable devices under certain circumstances (see below) (PR#940)
Message-ID: <200105152136.XAA19124@pubhealth.ku.dk>

The following code snippet from graphics.c: GCircle() (around line 3100) fails for devices which 
can not clip (dd->dp.canClip==0) and try to plot a circle that does not fit into the plot region, but
fits into the device region, see inserted comments:

....
    result = clipCircleCode(x, y, coords, ir, dd);
// result>0, because circle does not fit into plot region (for dd->gp.xpd=0)

    switch (result) {
    case -2: /* No clipping;  draw all of circle */
        dd->dp.circle(x, y, coords, ir, bg, fg, dd);
        break;
    case -1: /* Total clipping; draw nothing */
        break;
    default: /* Partial clipping; draw poly[line|gon] */
// we proceed here:
        dd->gp.xpd = 2;
// check clipping for the device region:
        result = clipCircleCode(x, y, coords, ir, dd);
// ...if it fits, result=-2: ouch, we have thrown away the result from the 1st check!
        dd->gp.xpd = xpdsaved;
        if (dd->dp.canClip && result == -2) {
// ...but it does not matter if we can clip!
            GClip(dd);
            dd->dp.circle(x, y, coords, ir, bg, fg, dd);
        }
        else {
//...BUT if we can not clip, then we call for trouble:
            vmax = vmaxget();$

....
    default: /* Partial clipping; draw poly[line|gon] */
      if (dd->dp.canClip) {
	dd->gp.xpd = 2;
	result = clipCircleCode(x, y, coords, ir, dd);
	dd->gp.xpd = xpdsaved;
	if (result == -2) {
	    GClip(dd);
	    dd->dp.circle(x, y, coords, ir, bg, fg, dd);
	    break;
	}
      }
      vmax = vmaxget();
      xc = (double*)R_alloc(result+1, sizeof(double));
      yc = (double*)R_alloc(result+1, sizeof(double));
      GConvert(&x, &y, coords, DEVICE, dd);
      convertCircle(x, y, ir, result, xc, yc, dd);
      if (bg == NA_INTEGER) {
	dd->gp.col = fg;
	GPolyline(result+1, xc, yc, DEVICE, dd);
      }
      else {
	int npts;
	double *xcc, *ycc;
	xcc = ycc = 0;	/* -Wall */
	npts = GClipPolygon(xc, yc, result, DEVICE, 0, xcc, ycc, dd);
	if (npts > 1) {
	  xcc = (double*)R_alloc(npts, sizeof(double));
	  ycc = (double*)R_alloc(npts, sizeof(double));
	  npts = GClipPolygon(xc, yc, result, DEVICE, 1,
			      xcc, ycc, dd);
	  dd->dp.polygon(npts, xcc, ycc, DEVICE, bg, fg, dd);
	}
      }
      vmaxset(vmax);
    }
}


This works at least in my test case at

> version
         _
platform i386-pc-os2_emx
arch     i386
os       os2_emx
system   i386, os2_emx
status
major    1
minor    2.2
year     2001
month    02
day      26
language R


Thomas Hoffmann.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlm21@cam.ac.uk  Wed May 16 12:49:35 2001
From: tlm21@cam.ac.uk (tlm21@cam.ac.uk)
Date: Wed, 16 May 2001 13:49:35 +0200 (MET DST)
Subject: [Rd] Mistake in qbeta.c ? (PR#941)
Message-ID: <200105161149.NAA27502@pubhealth.ku.dk>

Full_Name: Tim Massingham
Version: 1.2.2
OS: Debian/Linux
Submission from: (NULL) (131.111.8.68)


In 1.2.2 sources (also in 0.90.1. I haven't been able to check other versions)
Line 103 in qbeta.c should read:
w = y * sqrt(h + r) / h - (t - s) * (r + 5. / 6. - 2 / (3 * h));

since otherwise the 5 / 6 will evaluate to zero (I think).
The Statlib fortran code uses five / six instead.

Cheers, thanks for great software.

	  TimM.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 16 15:21:59 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 16 May 2001 10:21:59 -0400
Subject: [Rd] truncate
References: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>
Message-ID: <3B028D07.2A00CDD6@bank-banque-canada.ca>

Brian

I've changed the name of my truncate function. In this case I think
problems of conflicts in code could easily be resolved, but I don't
understand how conflicts in the documentation would be resolved.

However, please do keep in mind that adding things to base is
problematic because of name space conflicts. This case was relatively
easy for me, but some functions would be much more difficult because of
all the implications for documentation and other code using the
packages.

Best,
Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 16 15:40:24 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 May 2001 16:40:24 +0200
Subject: [Rd] Mistake in qbeta.c ? (PR#941)
In-Reply-To: tlm21@cam.ac.uk's message of "Wed, 16 May 2001 13:49:35 +0200 (MET DST)"
References: <200105161149.NAA27502@pubhealth.ku.dk>
Message-ID: <x2ofst5pd3.fsf@blueberry.kubism.ku.dk>

tlm21@cam.ac.uk writes:

> Full_Name: Tim Massingham
> Version: 1.2.2
> OS: Debian/Linux
> Submission from: (NULL) (131.111.8.68)
> 
> 
> In 1.2.2 sources (also in 0.90.1. I haven't been able to check other versions)
> Line 103 in qbeta.c should read:
> w = y * sqrt(h + r) / h - (t - s) * (r + 5. / 6. - 2 / (3 * h));
> 
> since otherwise the 5 / 6 will evaluate to zero (I think).
> The Statlib fortran code uses five / six instead.
> 
> Cheers, thanks for great software.

Whoops! Fortunately it sits in code that calculates an initial
approximation, so one would hope it only affects speed of convergence. 
Thanks for pointing that out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 16 16:15:46 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 16 May 2001 16:15:46 +0100 (BST)
Subject: [Rd] truncate
In-Reply-To: <3B028D07.2A00CDD6@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0105161613080.14396-100000@gannet.stats>

On Wed, 16 May 2001, Paul Gilbert wrote:

> Brian
>
> I've changed the name of my truncate function. In this case I think
> problems of conflicts in code could easily be resolved, but I don't
> understand how conflicts in the documentation would be resolved.
>
> However, please do keep in mind that adding things to base is
> problematic because of name space conflicts. This case was relatively
> easy for me, but some functions would be much more difficult because of
> all the implications for documentation and other code using the
> packages.

A later version of R may well have namespaces.  But please do bear in mind
that the names of standard C-level functions are likely to be used for the
same purpose in R.  Little-used packages (and there are over 100 packages
by now) cannot be given veto rights.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 16 16:51:29 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 16 May 2001 11:51:29 -0400
Subject: [Rd] truncate
References: <Pine.LNX.4.31.0105161613080.14396-100000@gannet.stats>
Message-ID: <3B02A200.BD4DC773@bank-banque-canada.ca>

BDR>But please do bear in mind that the names of standard C-level
BDR>functions are likely to be used for the same purpose in R.

I understand that this is convenient but I don't know why it should be
true. Wouldn't a convention like "C.truncate" make more sense?  Do you
expect R users to know the names of standard C function so they can
avoid them?  I doubt that most do. Do fortran or perl have the same
privilege?

BDR>Little-used packages (and there are over 100 packages
BDR>by now) cannot be given veto rights.

I think that you should assume that anything that gets to the point of
being a package is used a lot by at least some users. If you say you are
going to clobber the name space in base whenever you feel like it, then
very quickly you will not have users or maintained packages (and then of
course you can do whatever you like with the name space).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jebacklund@dowagro.com  Wed May 16 18:58:15 2001
From: jebacklund@dowagro.com (jebacklund@dowagro.com)
Date: Wed, 16 May 2001 19:58:15 +0200 (MET DST)
Subject: [Rd] Minor documentation issue (PR#942)
Message-ID: <200105161758.TAA02511@pubhealth.ku.dk>

Full_Name: Jan Erik Backlund
Version: 1.2.3
OS: Windows 98
Submission from: (NULL) (216.99.65.32)


R is fantastic and I greatly appreciate your efforts and creativity in
developing it.

Minor documentation suggestion:
Include an 'objects' function listing in the base section of the reference
manual.  It need only say 'Please see function ls'.

Is this the preferred way of submitting suggestions regarding the documentation?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed May 16 20:11:07 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 16 May 2001 15:11:07 -0400
Subject: [Rd] Strange formatting
Message-ID: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com>

I've never noticed this before, though it's probably not new.  In
1.2.3 for Windows, if I print a short vector the formatting is
different than if I print a long one, whether or not they fit on one
line.  The short/long split appears to be between 9 and 10 elements:

 > 1:9
 [1] 1 2 3 4 5 6 7 8 9
 > 1:10
  [1]  1  2  3  4  5  6  7  8  9 10

 > sqrt(1:9)
 [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
2.828427
 [9] 3.000000
 > sqrt(1:10)
  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
2.828427
  [9] 3.000000 3.162278


The spacing between the integer values is different, and there's a
space before the "[1]" in the longer vectors.

Is this intentional?  What's the reasoning for this difference?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 16 20:31:14 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 May 2001 21:31:14 +0200
Subject: [Rd] Strange formatting
In-Reply-To: Duncan Murdoch's message of "Wed, 16 May 2001 15:11:07 -0400"
References: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com>
Message-ID: <x2u22lccql.fsf@blueberry.kubism.ku.dk>

Duncan Murdoch <murdoch@stats.uwo.ca> writes:

> I've never noticed this before, though it's probably not new.  In
> 1.2.3 for Windows, if I print a short vector the formatting is
> different than if I print a long one, whether or not they fit on one
> line.  The short/long split appears to be between 9 and 10 elements:
> 
>  > 1:9
>  [1] 1 2 3 4 5 6 7 8 9
>  > 1:10
>   [1]  1  2  3  4  5  6  7  8  9 10
> 
>  > sqrt(1:9)
>  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
> 2.828427
>  [9] 3.000000
>  > sqrt(1:10)
>   [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
> 2.828427
>   [9] 3.000000 3.162278
> 
> 
> The spacing between the integer values is different, and there's a
> space before the "[1]" in the longer vectors.
> 
> Is this intentional?  What's the reasoning for this difference?

The spacing is to print all elements in the same field width, and 10
wouldn't look good in a field of with 2. I don't think that could be
much different (compare 1:100 and 1:99). The labels would seem to be
generated to make room for the label with the longest possible width,
which is slightly botched since that width need not be used by any of
the labels. Submit a patch?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 16 20:59:25 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 16 May 2001 20:59:25 +0100 (BST)
Subject: [Rd] Strange formatting
In-Reply-To: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com>
Message-ID: <Pine.GSO.4.31.0105162056310.4660-100000@auk.stats>

On Wed, 16 May 2001, Duncan Murdoch wrote:

> I've never noticed this before, though it's probably not new.  In
> 1.2.3 for Windows, if I print a short vector the formatting is
> different than if I print a long one, whether or not they fit on one
> line.  The short/long split appears to be between 9 and 10 elements:
>
>  > 1:9
>  [1] 1 2 3 4 5 6 7 8 9
>  > 1:10
>   [1]  1  2  3  4  5  6  7  8  9 10
>
>  > sqrt(1:9)
>  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
> 2.828427
>  [9] 3.000000
>  > sqrt(1:10)
>   [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
> 2.828427
>   [9] 3.000000 3.162278
>
>
> The spacing between the integer values is different, and there's a
> space before the "[1]" in the longer vectors.
>
> Is this intentional?  What's the reasoning for this difference?

I guess so.  For the first, the elements will line up:

> options(width=40)
> 1:50
 [1]  1  2  3  4  5  6  7  8  9 10 11 12
[13] 13 14 15 16 17 18 19 20 21 22 23 24
[25] 25 26 27 28 29 30 31 32 33 34 35 36
[37] 37 38 39 40 41 42 43 44 45 46 47 48
[49] 49 50

and that shows you the reason for the space too.

FWIW, S-PLUS 3.4 does the same things.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed May 16 21:45:52 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 16 May 2001 16:45:52 -0400
Subject: [Rd] Strange formatting
In-Reply-To: <x2u22lccql.fsf@blueberry.kubism.ku.dk>
References: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com> <x2u22lccql.fsf@blueberry.kubism.ku.dk>
Message-ID: <jdp5gtom71ut5tuhmmedq7h8i78qs8dg4d@4ax.com>

Peter and Brian pointed out that 

>The spacing is to print all elements in the same field width...

Of course!  I knew that.  Must have had a temporary mental breakdown.
Thanks.

Peter suggested I should submit a patch for the fact that the width of
the index can be one char too wide.  I'll add it to my mental to-do
list (but we've just seen a demonstration of the reliability of my
memory...).

Duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed May 16 23:22:05 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 17 May 2001 10:22:05 +1200
Subject: [Rd] Strange formatting
References: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com> <x2u22lccql.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B02FD8D.320B2718@stat.auckland.ac.nz>

Peter Dalgaard BSA wrote:

> The spacing is to print all elements in the same field width, and 10
> wouldn't look good in a field of with 2. I don't think that could be
> much different (compare 1:100 and 1:99). The labels would seem to be
> generated to make room for the label with the longest possible width,
> which is slightly botched since that width need not be used by any of
> the labels. Submit a patch?

Believe it or not, this was deliberate for consistency with Splus 3.X.
	Ross

-- 
Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz
Department of Statistics           Phone:  (64-9) 373-7599 x 5054
University of Auckland             Fax:    (64-9) 373-7018
Private Bag 92019, Auckland
New Zealand
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Hoffmann" <thoffman@zappa.sax.de  Wed May 16 22:59:01 2001
From: Thomas Hoffmann" <thoffman@zappa.sax.de (Thomas Hoffmann)
Date: Wed, 16 May 01 22:59:01 +0100
Subject: [Rd] Double inclusion of Runix.h
Message-ID: <3b02f827.thoffman.zappa@zappa.sax.de>

Maybe I am overlooking something important, but why is Runix.h included twice
in sys-std.c?

....
#include "Runix.h"
#include "Startup.h"

#include "Runix.h"
....

In Runix.h, there is another iclusion of Startup.h ...

Was this an omission during clean up? 

Curious,
Thomas Hoffmann.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 17 00:58:51 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 May 2001 01:58:51 +0200
Subject: [Rd] Double inclusion of Runix.h
In-Reply-To: "Thomas Hoffmann"'s message of "Wed, 16 May 01 22:59:01 +0100"
References: <3b02f827.thoffman.zappa@zappa.sax.de>
Message-ID: <x2n18clubo.fsf@blueberry.kubism.ku.dk>

"Thomas Hoffmann" <thoffman@zappa.sax.de> writes:

> Maybe I am overlooking something important, but why is Runix.h included twice
> in sys-std.c?
> 
> ....
> #include "Runix.h"
> #include "Startup.h"
> 
> #include "Runix.h"
> ....
> 
> In Runix.h, there is another iclusion of Startup.h ...
> 
> Was this an omission during clean up? 
> 
> Curious,
> Thomas Hoffmann.

Looks like an omission. Runix.h has no guard against multiple
inclusion, so one ends up with a host of repeated declarations, which
is probably harmless, but might upset pedantic compilers(?)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu May 17 13:02:37 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 17 May 2001 14:02:37 +0200
Subject: [Rd] Minor documentation issue (PR#942)
In-Reply-To: <200105161758.TAA02511@pubhealth.ku.dk>
References: <200105161758.TAA02511@pubhealth.ku.dk>
Message-ID: <15107.48605.537609.899228@gargle.gargle.HOWL>

>>>>> "jebacklund" == jebacklund  <jebacklund@dowagro.com> writes:

    jebacklund> Full_Name: Jan Erik Backlund
    jebacklund> Version: 1.2.3
    .......

    jebacklund> R is fantastic and I greatly appreciate your efforts and
    jebacklund> creativity in developing it.
thanks for the flowers!

    jebacklund> Minor documentation suggestion: Include an 'objects'
    jebacklund> function listing in the base section of the reference
    jebacklund> manual.  It need only say 'Please see function ls'.

Can you tell me (maybe privately, not to the whole mailing list)
what you mean?  are you using the PDF or help.start() / HTML version of the
manual? on paper or on-line ?


    jebacklund> Is this the preferred way of submitting suggestions
    jebacklund> regarding the documentation?

not really; only bugs or really lacking things in the documentation should
 be reported as bugs;
Suggestions like yours you should send to any one (but not more than one) of
R-help, R-devel, or R-core.  
To which one really depends on how interesting, debatable, .... you think
this is to the corresponding audience.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu May 17 14:21:46 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 17 May 2001 15:21:46 +0200
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <3B028D07.2A00CDD6@bank-banque-canada.ca>
References: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>
 <3B028D07.2A00CDD6@bank-banque-canada.ca>
Message-ID: <15107.53354.670649.577003@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> Brian
    PaulG> I've changed the name of my truncate function. In this case I think
    PaulG> problems of conflicts in code could easily be resolved, but I don't
    PaulG> understand how conflicts in the documentation would be resolved.

    PaulG> However, please do keep in mind that adding things to base is
    PaulG> problematic because of name space conflicts. This case was
    PaulG> relatively easy for me, but some functions would be much more
    PaulG> difficult because of all the implications for documentation and
    PaulG> other code using the packages.

You are right, Paul, adding things to base is somewhat problematic
particularly for package writers.  That's why I now ask for comments:

One thing I *would* like to add to base (in a general sense -- note that
Brian mentioned that namespaces might well come in the not so distant future),
are the generic functions

    AIC
and
    logLik  {both a generic and a class!}

that Bates and Pinheiro use quite extensively in the nlme package
(and I did ask Doug about this two months ago) :

--------
After  library(nlme)

  > ls(pos=2,pat="AIC")
  [1] "AIC"        "AIC.gls"    "AIC.lm"     "AIC.lme"    "AIC.lmList"
  [6] "AIC.logLik" "AIC.nls"   
  > ls(pos=2,pat="^logLik")
   [1] "logLik.corStruct"    "logLik.gls"          "logLik.glsStruct"   
   [4] "logLik.gnls"         "logLik.gnlsStruct"   "logLik.lm"          
   [7] "logLik.lme"          "logLik.lmeStruct"    "logLik.lmeStructInt"
  [10] "logLik.lmList"       "logLik.reStruct"     "logLik.varComb"     
  [13] "logLik.varFunc"     
  > ls(pos=2,pat="logLik$")
  [1] "AIC.logLik"   "BIC.logLik"   "print.logLik"
  > AIC
  function (object, ...) 
  UseMethod("AIC")
  > str(AIC.lm)
  function (object, ...) 

--------

The nlme() also defines BIC(), which one might argue could also be
considered a special case of a more general "*IC" generic.

Package MASS has

  extractAIC.loglm <- function (fit, scale, k = 2, ...) 
  {
      edf <- fit$n - fit$df
      c(edf, fit$deviance + k * edf)
  }

which you can use for the BIC as well 
by replacing "k = 2" by "k = log(fit$n)".

And there are AIC like computations in many R packages.
which may or may not differ.
However it would make sense to have the generic and the lm (and glm?)
methods in standard base.  Similarly for "logLik".

------

Does anyone see problems?
Should the AIC generic {or only some of the methods} include something like
a "k = 2" argument  (why ``k'' , btw) ?

Thanks for constructive feedback!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Thu May 17 14:47:56 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 17 May 2001 09:47:56 -0400
Subject: [Rd] P-value printing in print.summary.lm
Message-ID: <OFCBB833AD.7244FB84-ON85256A4F.004AF00D@rtp.epa.gov>

The P-value for the overall F-statistic is being printed with formatC in
print.summary.lm (at least in R-1.2.3).  This results in P-values of 0,
which I suppose is practically unimportant, but logically offensive.
format.pval() gets around this (indeed, its help page says it was written
for print.summary.lm, though it is not explicitly called there, just in
print.coefmat!).  I'd suggest the following patch to lm.R:

337c337
<           formatC(1 - pf(x$fstatistic[1], x$fstatistic[2],
---
>           format.pval(1 - pf(x$fstatistic[1], x$fstatistic[2],



R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May 17 14:57:37 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 17 May 2001 09:57:37 -0400
Subject: [Rd] New generic functions in "R base" {was `truncate'}
References: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>
 <3B028D07.2A00CDD6@bank-banque-canada.ca> <15107.53354.670649.577003@gargle.gargle.HOWL>
Message-ID: <3B03D8D1.B4F6725@bank-banque-canada.ca>

Martin

>One thing I *would* like to add to base ... are the generic functions
> AIC and  logLik ...

Neither  AIC nor logLik conflict with anything in my packages. I do have a programs
that return log likelihood and information criteria along with a lot of other
information, so depending on your definitions I might start using your classes.

Thanks for asking,
Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May 18 09:58:43 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 18 May 2001 09:58:43 +0100 (BST)
Subject: [Rd] New package Oarray
Message-ID: <Pine.GSO.4.20.0105180944250.1622-100000@laplace>

Hi Everyone,

I recently uploaded the package Oarray to CRAN.  After a suggestion from
Martin M., I should just clarify that this is a generalisation of zmatrix
in the following respects:

1) Can handle arbitrary numbers of extents;

2) Can have arbitrary non-negative offsets (not just zero) that vary
across the extents;

3) Can be switched also to have negative offsets, in which case negative
subscripts *do not* drop components.

Oarray operates quite differently from zmatrix, depending upon the way
that match.call() parses the calls to "[.Oarray" and "[<-.Oarray" (I hope
that this is stable!).

I often use R as a general-purpose computing environment and I have
encountered several situations in which arrays with offsets that are not
zero or one are useful, hence the generalisation of zmatrix.  I would be
interested if anyone can suggest any applications in statistics, though!

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun May 20 01:32:41 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sun, 20 May 2001 02:32:41 +0200 (MET DST)
Subject: [Rd] legend() with xpd=T; omission of initial plot character (PR#943)
Message-ID: <200105200032.CAA02504@pubhealth.ku.dk>


In the following:

plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.

I obtained the same behaviour when placing a legend
in the margin following use of pairs()

-please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.3
  year = 2001
  month = 04
  day = 26
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun May 20 01:39:36 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sun, 20 May 2001 02:39:36 +0200 (MET DST)
Subject: [Rd] hist() ignores 'probability=T' (PR#944)
Message-ID: <200105200039.CAA02528@pubhealth.ku.dk>

In the following, 'probability=T' is ignored,
i.e. the vertical axis is labelled in
frequencies.

However hist(islands, freq=F) achieves the desired effect.

 > data(islands)
 > hist(islands, probability=T)  # Vertical axis gives frequencies
 > hist(islands, freq=F)              # Expected result

--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.3
  year = 2001
  month = 04
  day = 26
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun May 20 07:22:23 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 20 May 2001 07:22:23 +0100 (GMT Daylight Time)
Subject: [Rd] hist() ignores 'probability=T' (PR#944)
In-Reply-To: <200105200039.CAA02528@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.31.0105200720110.63-100000@tern.stats>

On Sun, 20 May 2001 john.maindonald@anu.edu.au wrote:

> In the following, 'probability=T' is ignored,
> i.e. the vertical axis is labelled in
> frequencies.

It's a 1.2.3-only bug already found (by Jonathan Marchini) and fixed in the
sources.  From NEWS in R-devel:

    o	hist.default() was ignoring its `probability' argument for
	equi-spaced breaks.


>
> However hist(islands, freq=F) achieves the desired effect.
>
>  > data(islands)
>  > hist(islands, probability=T)  # Vertical axis gives frequencies
>  > hist(islands, freq=F)              # Expected result
>
> --please do not edit the information below--
>
> Version:
>   platform = i386-pc-mingw32
>   arch = x86
>   os = Win32
>   system = x86, Win32
>   status =
>   major = 1
>   minor = 2.3
>   year = 2001
>   month = 04
>   day = 26
>   language = R
>
> Windows 98 SE 4.10 (build 2222)  A
>
> Search Path:
>   .GlobalEnv, package:ctest, Autoloads, package:base
> John Maindonald               email : john.maindonald@anu.edu.au
> Statistical Consulting Unit,  phone : (6125)3998
> c/o CMA, SMS,                 fax   : (6125)5549
> John Dedman Mathematical Sciences Building
> Australian National University
> Canberra ACT 0200
> Australia
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Mon May 21 06:15:06 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Mon, 21 May 2001 07:15:06 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200105210515.HAA17058@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 930 *
Subject: Re: [R] Crazy plots of time-series against dates
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 May 2001 21:33:53 +0200
--error in chron package
* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
--Only on a specific sample file: send to maintainer.
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

* PR# 899 *
Subject: documentation problems in str.Rd
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
Date: Sat, 7 Apr 2001 23:08:23 +0200
--fixed (both code and documentation) for 1.3  (MM).

Directory:  Graphics

* PR# 917 *
Subject: boxplot
From: skala@incoma.cz
Date: Fri, 20 Apr 2001 08:43:29 +0200 (MET DST)
--fixed for 1.2.3  (one could consider the bug an `accidental feature',
--		  but the documentation and the other S implementations 
--		  differ).
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 924 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:58:17 +0200 (MET DST)
--same as 923
* PR# 923 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:56:59 +0200 (MET DST)
--too little information

Directory:  Language

* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 929 *
Subject:  Segmentation fault linked to memory? 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 30 Apr 2001 14:34:11 +0100 (BST)
--looks like 32-bit integer overflow error in counting allocation size
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 862 *
Subject: Wrong sign for Pearson residuals
From: faraway@umich.edu
Date: Mon, 5 Mar 2001 18:04:34 +0100 (MET)

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 935 *
Subject:  help.start() fails 
From: "Wilhelm B. Kloke" <wb@vestein.arb-phys.uni-dortmund.de>
Date: Wed, 9 May 2001 13:43:49 +0200 (MET DST)
--Report on 1.2.1: on other systems the file is installed with 644.
* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
--Not applied for 1.2.3 (why?)
* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
--(Should be taken care of for 1.2.3).
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500

Directory:  TooMuchAtOnce

* PR# 918 *
Subject: several bugs
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Sun, 22 Apr 2001 23:13:38 -0400 (EDT)
--1. as.numeric -> use as.double.FOO for methods -- doc.fixed for 1.2.3
--2. cannot set attribute on NULL -- no bug
--3. rep(list() ... ) :  a wish  fulfilled for 1.3.x
--4. %*% is not a generic in R (but is fast!) but in S+  -- not a bug
--5. S-plus (S4) compatibility  -- a wish but not for now
--6. list()s with dim() attribute -- an ongoing `research topic'  :-)
* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

* PR# 927 *
Subject: Rgui 1.2.3 for Windows crashes reading huge CSV file
From: znmeb@aracnet.com
Date: Mon, 30 Apr 2001 07:14:50 +0200 (MET DST)
--Not clear this is to do with Windows.
* PR# 926 *
Subject: Rgui crash
From: bellis@hsph.harvard.edu
Date: Sun, 29 Apr 2001 20:45:15 +0200 (MET DST)
--Unable to reproduce even on a Win2k machine
* PR# 912 *
Subject: Rgui.exe crash on Windows 2000
From: gilg.seeber@uibk.ac.at
Date: Thu, 12 Apr 2001 15:07:52 +0200 (MET DST)
--seems to be specific to the submitter's system.
--Cannot reproduce.
* PR# 906 *
Subject: Win98 wheelmouse graphics lock problem
From: cpaul@ucla.edu
Date: Tue, 10 Apr 2001 17:50:44 +0200 (MET DST)
--Cannot reproduce without more information
--In particular, does not happen with Microsoft Intellimouse on W2K

Directory:  incoming

* PR# 944 *
Subject: hist() ignores 'probability=T'
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:42:13 +1000
* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
* PR# 932 *
Subject: scoping error in xy.coords
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 04 May 2001 11:20:57 -0400
* PR# 939 *
Subject: Windows, RCMD INSTALL and path
From: david.firth@nuf.ox.ac.uk
Date: Fri, 11 May 2001 17:59:29 +0200 (MET DST)
* PR# 938 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:39:53 +0200 (MET DST)
* PR# 941 *
Subject: Mistake in qbeta.c ?
From: tlm21@cam.ac.uk
Date: Wed, 16 May 2001 13:49:34 +0200 (MET DST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 942 *
Subject: Minor documentation issue
From: jebacklund@dowagro.com
Date: Wed, 16 May 2001 19:58:13 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May 22 16:57:09 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 22 May 2001 11:57:09 -0400
Subject: [Rd] qr.qty call to  "dqrqty"
Message-ID: <3B0A8C55.AE5E1C9E@bank-banque-canada.ca>

The .Fortran call to  "dqrqty" in qr.qty does not specify DUP which means it defaults
to TRUE.  I have looked through the fortan code for dqrqty and routines it calls and
also done some testing but cannot find any reason that would cause a problem with
DUP=FALSE.

I realize this is considered the "risky" option, but the change can result in
considerable memory saving in some problems. Can this .Fortran call can be changed?

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Tue May 22 19:07:59 2001
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Tue, 22 May 2001 14:07:59 -0400
Subject: [Rd] Job announcement
Message-ID: <20010522140759.F10945@jimmy.harvard.edu>

I realize this isn't quite the correct forum (but then I don't think
that there is one).
Anyways, I've just been given enough money to hire two programmer for
at least two years to work on the following project:
(for experienced programmers only, please, salary in the 70k range)


BRIEF DESCRIPTION FOR JOB POSTING
To develop a system for the manipulation and analysis of microarray
data.  The system will integrate database management, statistical
methodology and biologically relevant metadata.

Education and/or license: Bachelor's degree in Computer Science or
equivalent
Experience Required: Experience with database programming/ design,
systems design, embedded languages, scripting languages, background in
biology or statistics, image analysis.  Experience with C or C++
essential.



The job is in Boston and is posted at monster.com among other places. 
R will be a major component and hence any experience in that regard
would be an asset.
I guess you might even think of it as a very well paying postdoc if
one wanted to do stat computing etc.

I'll be happy to answer questions but you need to apply through the
regular channels if interested.
  Thanks.

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@ci.tuwien.ac.at  Wed May 23 19:37:52 2001
From: warnes@ci.tuwien.ac.at (Gregory Warnes)
Date: Wed, 23 May 2001 20:37:52 +0200 (CEST)
Subject: [Rd] New generic functions in "R base" {was `truncate'}
Message-ID: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII

1) What are the issues with making _existing_ functions in base into
generics?

EG, I've recently become annoyed that plot() is a generic which can be
applied to a formula:

	plot( outcome ~ predictor)

but functions like points, lowess, etc are not generic or don't have
methods defined for formulae.  I've created a points.formula() and a
generic lowess(), lowess.default(), and lowess.formula().

Are there any problems in replacing the current points() with a generic
function, provided that the default function does the same thing as the
original function?

2) I have a couple of other functions I just want to throw out:

- A generic ci()  (for confidence interval) with a method for lm and
summary.lm.   

- The function boxplot.n which gives a standard boxplot annotated with the
number of observations in each group. 

-Greg

Files are attached




---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="boxplot.n.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1010523203752.2129B@luthien.ci.tuwien.ac.at>
Content-Description: 

IyBjcmVhdGUgYSBib3hwbG90IGFuZCBhbm5vdGF0ZSB3aXRoIHRoZSBudW1i
ZXIgb2Ygb2JzZXJ2YXRpb25zIGluIGVhY2ggZ3JvdXAuDQojDQojIHBhcmFt
ZXRlcnMNCiMgIC4uLjogIHN0YW5kYXJkIGJveHBsb3QgcGFyYW1ldGVycw0K
Iw0KIyAgdG9wOiAgaWYgVCBwdXQgbidzIGF0IHRvcCBvZiBwbG90dGluZyBy
ZWdpb24sIG90aGVyd2lzZSBhdCB0aGUgYm90dG9tLg0KIw0KIyAgc2hyaW5r
OiB2YWx1ZSB0byBzaHJpbmsgY2hhcmFjdGVyIHNpemUgd2hlbiBhbm5vdGF0
aW5nLiAgKFRoaXMgdmFsdWUgaXMNCiMgICAgICAgICAgYXBwbGllZCB0byBj
ZXguKQ0KIw0KIyAgdGV4dGNvbG9yOiB0ZXh0IGNvbG9yDQojDQojIGV4YW1w
bGU6DQojDQojIGRhdGEgIDwtICBkYXRhLmZyYW1lKHk9cm5vcm0oMTAwKSwg
eD1mYWN0b3IocmVwKGMoIkEiLCJDIiwiRiIsIloiKSwyNSkpKQ0KDQogYm94
cGxvdC5uKCB5IH4geCwgZGF0YT1kYXRhKQ0KDQoNCg0KYm94cGxvdC5uICA8
LSBmdW5jdGlvbiggLi4uLCB0b3A9Riwgc2hyaW5rPTEuMCwgdGV4dGNvbG9y
PU5VTEwgKQ0KICB7DQogICAgYm94IDwtIG1hdGNoLmNhbGwoKSAgICAgICAg
ICAgIyBnZXQgY2FsbA0KICAgIGJveCR0b3AgIDwtIGJveCRzaHJpbmcgIDwt
IGJveCR0ZXh0Y29sb3IgIDwtIE5VTEwNCiAgICBib3hbWzFdXSAgPC0gYXMu
bmFtZSgiYm94cGxvdCIpDQogICAgYm94IDwtIGV2YWwoYm94LCBwYXJlbnQu
ZnJhbWUoKSkNCg0KICAgIGlmKHRvcCkNCiAgICAgIHdoZXJlICA8LSBwYXIo
InVzciIpWzRdDQogICAgZWxzZQ0KICAgICAgd2hlcmUgIDwtIHBhcigidXNy
IilbM10NCiAgICBjZXggPC0gcGFyKCJjZXgiKQ0KICAgIHBhcihjZXg9c2hy
aW5rKmNleCkNCiAgICB0ZXh0KCB4PTE6bGVuZ3RoKGJveCRuKSwgeT13aGVy
ZSwgbGFiZWxzPXBhc3RlKCJuPSIsYm94JG4sc2VwPSIiKSwgYWRqPWMoMC41
LDApLA0KICAgICAgICAgY29sPXRleHRjb2xvcikNCiAgICBwYXIoY2V4PWNl
eCkNCg0KICAgIGludmlzaWJsZShib3gpDQogIH0NCg==
---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="lowess.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1010523203752.2129C@luthien.ci.tuwien.ac.at>
Content-Description: 

bG93ZXNzLmRlZmF1bHQgIDwtIGdldCgibG93ZXNzIixwb3M9InBhY2thZ2U6
YmFzZSIpDQoNCmxvd2VzcyAgPC0gZnVuY3Rpb24oeCwuLi4pDQogIFVzZU1l
dGhvZCgibG93ZXNzIikNCg0KImxvd2Vzcy5mb3JtdWxhIiA8LQ0KICBmdW5j
dGlvbiAoZm9ybXVsYSwgZGF0YSA9IE5VTEwsIHN1YnNldCwgbmEuYWN0aW9u
LCAuLi4pIA0Kew0KICBpZiAobWlzc2luZyhmb3JtdWxhKSB8fCAobGVuZ3Ro
KGZvcm11bGEpICE9IDMpKSANCiAgICBzdG9wKCJmb3JtdWxhIG1pc3Npbmcg
b3IgaW5jb3JyZWN0IikNCiAgaWYgKG1pc3NpbmcobmEuYWN0aW9uKSkgDQog
ICAgbmEuYWN0aW9uIDwtIGdldE9wdGlvbigibmEuYWN0aW9uIikNCiAgbSA8
LSBtYXRjaC5jYWxsKGV4cGFuZC5kb3RzID0gRkFMU0UpDQogIGlmIChpcy5t
YXRyaXgoZXZhbChtJGRhdGEsIHBhcmVudC5mcmFtZSgpKSkpIA0KICAgIG0k
ZGF0YSA8LSBhcy5kYXRhLmZyYW1lKGRhdGEpDQogIG0kLi4uIDwtIE5VTEwN
CiAgbVtbMV1dIDwtIGFzLm5hbWUoIm1vZGVsLmZyYW1lIikNCiAgbWYgPC0g
ZXZhbChtLCBwYXJlbnQuZnJhbWUoKSkNCiAgcmVzcG9uc2UgPC0gYXR0cihh
dHRyKG1mLCAidGVybXMiKSwgInJlc3BvbnNlIikNCiAgbG93ZXNzKG1mW1st
cmVzcG9uc2VdXSwgbWZbW3Jlc3BvbnNlXV0sIC4uLikNCn0NCg==
---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="points.formula.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1010523203752.2129D@luthien.ci.tuwien.ac.at>
Content-Description: 

InBvaW50cy5mb3JtdWxhIiA8LQ0KICBmdW5jdGlvbiAoZm9ybXVsYSwgZGF0
YSA9IE5VTEwsIHN1YnNldCwgbmEuYWN0aW9uLCAuLi4pIA0Kew0KICBpZiAo
bWlzc2luZyhmb3JtdWxhKSB8fCAobGVuZ3RoKGZvcm11bGEpICE9IDMpKSAN
CiAgICBzdG9wKCJmb3JtdWxhIG1pc3Npbmcgb3IgaW5jb3JyZWN0IikNCiAg
aWYgKG1pc3NpbmcobmEuYWN0aW9uKSkgDQogICAgbmEuYWN0aW9uIDwtIGdl
dE9wdGlvbigibmEuYWN0aW9uIikNCiAgbSA8LSBtYXRjaC5jYWxsKGV4cGFu
ZC5kb3RzID0gRkFMU0UpDQogIGlmIChpcy5tYXRyaXgoZXZhbChtJGRhdGEs
IHBhcmVudC5mcmFtZSgpKSkpIA0KICAgIG0kZGF0YSA8LSBhcy5kYXRhLmZy
YW1lKGRhdGEpDQogIG0kLi4uIDwtIE5VTEwNCiAgbVtbMV1dIDwtIGFzLm5h
bWUoIm1vZGVsLmZyYW1lIikNCiAgbWYgPC0gZXZhbChtLCBwYXJlbnQuZnJh
bWUoKSkNCiAgcmVzcG9uc2UgPC0gYXR0cihhdHRyKG1mLCAidGVybXMiKSwg
InJlc3BvbnNlIikNCiAgcG9pbnRzKG1mW1stcmVzcG9uc2VdXSwgbWZbW3Jl
c3BvbnNlXV0sIC4uLikNCn0NCg==
---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="ci.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1010523203752.2129E@luthien.ci.tuwien.ac.at>
Content-Description: 

Y2kgIDwtICBmdW5jdGlvbih4LC4uLikgVXNlTWV0aG9kKCJjaSIpDQoNCmNp
LnN1bW1hcnkubG0gIDwtICBmdW5jdGlvbih4LGNvbmZpZGVuY2U9MC45NSxh
bHBoYT0xLWNvbmZpZGVuY2UpIHsNCiAgZXN0ICA8LSAgY29lZih4KVssMV0g
Ow0KICBjaS5sb3cgIDwtIGVzdCArIHF0KGFscGhhLzIsIHgkZGZbMl0pICog
Y29lZih4KVssMl0gOw0KICBjaS5oaWdoIDwtIGVzdCAtIHF0KGFscGhhLzIs
IHgkZGZbMl0pICogY29lZih4KVssMl0gOw0KICByZXR2YWwgIDwtIGNiaW5k
KEVzdGltYXRlPWVzdCwNCiAgICAgICAgICAgICAgICAgICAiQ0kgbG93ZXIi
PWNpLmxvdywNCiAgICAgICAgICAgICAgICAgICAiQ0kgdXBwZXIiPWNpLmhp
Z2gsDQogICAgICAgICAgICAgICAgICAgIlN0ZC4gRXJyb3IiPSBjb2VmKHgp
WywyXSwNCiAgICAgICAgICAgICAgICAgICAicC12YWx1ZSIgPSBjb2VmKHgp
Wyw0XSkNCiAgcm93bmFtZXMocmV0dmFsKSAgPC0gIHJvd25hbWVzKGNvZWYo
eCkpDQogIHJldHZhbA0KfQ0KDQpjaS5sbSAgPC0gIGZ1bmN0aW9uKHgsLi4u
KQ0Kew0KICB4ICA8LSAgc3VtbWFyeSh4KQ0KICByZXR1cm4oY2kuc3VtbWFy
eS5sbSh4KSkNCn0NCg0K
---2088752589-1867062326-990643072=:2129--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May 23 19:56:34 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 23 May 2001 14:56:34 -0400
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEAF4@groexmbcr02.pfizer.com>


> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: Friday, May 18, 2001 11:30 AM
> To: gregory_r_warnes@groton.pfizer.com
> Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
>

[...]

> Apropos  ci() :
>
>  There's the very generally useful  confint() function in MASS.
>  Since MASS will become one of the recommended packages `real soon now',
>  I doubt that we'd want yet another one in `base'.
>  Or do you have reasons to prefer your ci() over V&R's  confint() ?
>  If so, it may make quite some sense discussing that on R-devel..
>
> Regards, Martin

Actually, I wasn't aware of the confint() function in MASS.  My ci()
function doesn't have any particular advantage.  


Actually, this illustrates a problem and raises another issue.  As it turns
out, I'm not the only one to have (unnecessarily) re-implemented the
features of confint() because it didn't occur to me to look in MASS for it.
I'm sure that others have had the same thing happen.

Shouldn't such generally useful functions get moved into base or some other
package that is on the default search path?  

-Greg







LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 23 20:12:45 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 May 2001 21:12:45 +0200
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: Gregory Warnes's message of "Wed, 23 May 2001 20:37:52 +0200 (CEST)"
References: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at>
Message-ID: <x2k837swuq.fsf@blueberry.kubism.ku.dk>

Gregory Warnes <warnes@ci.tuwien.ac.at> writes:

> EG, I've recently become annoyed that plot() is a generic which can be
> applied to a formula:
> 
> 	plot( outcome ~ predictor)
> 
> but functions like points, lowess, etc are not generic or don't have
> methods defined for formulae.  I've created a points.formula() and a
> generic lowess(), lowess.default(), and lowess.formula().
> 
> Are there any problems in replacing the current points() with a generic
> function, provided that the default function does the same thing as the
> original function?

Ummm, points.formula has been in base R since february 2000... slipped
in between 0.99.0 and 1.0.0 apparently.

Also note that loess() (with the correct spelling, in the modreg
library) does have a formula interface.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 23 20:33:42 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 23 May 2001 20:33:42 +0100 (BST)
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at>
Message-ID: <Pine.LNX.4.21.0105232030020.4905-100000@localhost>

On Wed, 23 May 2001, Gregory Warnes wrote:

> 1) What are the issues with making _existing_ functions in base into
> generics?

There are some performance issues (not necessarily relevant here). Last
time I looked hard at this method dispatch was taking ca 0.2 secs (not on
my fastest machines ....), and some generics turn up rather high on
profiling list rather often.

The other issue I see is the argument list for the generic, given that
all method ought to agree with the generic (at least aesthetically).

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Wed May 23 20:39:09 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Wed, 23 May 2001 15:39:09 -0400
Subject: [Rd] New generic functions in "R base" {was `truncate'}
References: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at>
Message-ID: <3B0C11DD.501B427E@umsanet.edu.bo>



Gregory Warnes wrote:
> 
> 1) What are the issues with making _existing_ functions in base into
> generics?
> 
> EG, I've recently become annoyed that plot() is a generic which can be
> applied to a formula:
> 
>         plot( outcome ~ predictor)
> 
> but functions like points, lowess, etc are not generic or don't have
> methods defined for formulae.  I've created a points.formula() and a
> generic lowess(), lowess.default(), and lowess.formula().

lowess is supposed to handle formulas and will do so when the 
scope error in xy.coords is corrected.

Kjetil Halvorsen
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 23 20:40:34 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 23 May 2001 20:40:34 +0100 (BST)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEAF4@groexmbcr02.pfizer.com>
Message-ID: <Pine.LNX.4.21.0105232034390.4905-100000@localhost>

On Wed, 23 May 2001, Warnes, Gregory R wrote:

> 
> > From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> > Sent: Friday, May 18, 2001 11:30 AM
> > To: gregory_r_warnes@groton.pfizer.com
> > Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
> >
> 
> [...]
> 
> > Apropos  ci() :
> >
> >  There's the very generally useful  confint() function in MASS.
> >  Since MASS will become one of the recommended packages `real soon now',
> >  I doubt that we'd want yet another one in `base'.
> >  Or do you have reasons to prefer your ci() over V&R's  confint() ?
> >  If so, it may make quite some sense discussing that on R-devel..
> >
> > Regards, Martin
> 
> Actually, I wasn't aware of the confint() function in MASS.  My ci()
> function doesn't have any particular advantage.  
> 
> 
> Actually, this illustrates a problem and raises another issue.  As it turns
> out, I'm not the only one to have (unnecessarily) re-implemented the
> features of confint() because it didn't occur to me to look in MASS for it.
> I'm sure that others have had the same thing happen.
> 
> Shouldn't such generally useful functions get moved into base or some other
> package that is on the default search path?  

Interesting Q.  Partly for perfomance reasons and partly for embedded
applications, we are trying to make base a lot smaller.  The agreed idea
seems to be to have a tiny core for R and lots of added functionality.
Unfortunately whereas S seems to be able to have long search paths without
performance penalty, we haven't found the right tricks in R (although it is
much better than it once was).  So just adding MASS to the path has
something like a 5% penalty (last timed just pre-1.2.0).  And careful
observers may have noticed that R gets a little slower (on almost) each
release.

One step in this direction that 1.3.0 will have is load-on-demand modules,
that is compiled code that is not loaded until used.  This allowed us to
avoid a 50% increase in code size. 

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed May 23 20:54:06 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 23 May 2001 15:54:06 -0400 (EDT)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <Pine.LNX.4.21.0105232034390.4905-100000@localhost>
Message-ID: <Pine.LNX.4.30.0105231551210.18969-100000@bolker.zoo.ufl.edu>


  Just my two cents -- but --
  I don't really care if it's in the search path or not, I think the
biggest help to this particular problem would be getting a full-text
search engine going and incorporated into the R-project home page.  Of
course, it's easy for me to say this since I don't have the time or
expertise to do it myself ...
  (One minor can of worms that occurs to me is what sites (if any) to
index in addition to CRAN.  I often look at S-news, Jim Lindsey's site,
Frank Harrell's site, etc., etc., but there could be a problem with
indexing "unofficial" sites and then having to answer myriad questions
from people about how to make things work in R ...)

  Ben Bolker

On Wed, 23 May 2001, Prof Brian Ripley wrote:

> On Wed, 23 May 2001, Warnes, Gregory R wrote:
>
> >
> > > From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> > > Sent: Friday, May 18, 2001 11:30 AM
> > > To: gregory_r_warnes@groton.pfizer.com
> > > Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
> > >
> >
> > [...]
> >
> > > Apropos  ci() :
> > >
> > >  There's the very generally useful  confint() function in MASS.
> > >  Since MASS will become one of the recommended packages `real soon now',
> > >  I doubt that we'd want yet another one in `base'.
> > >  Or do you have reasons to prefer your ci() over V&R's  confint() ?
> > >  If so, it may make quite some sense discussing that on R-devel..
> > >
> > > Regards, Martin
> >
> > Actually, I wasn't aware of the confint() function in MASS.  My ci()
> > function doesn't have any particular advantage.
> >
> >
> > Actually, this illustrates a problem and raises another issue.  As it turns
> > out, I'm not the only one to have (unnecessarily) re-implemented the
> > features of confint() because it didn't occur to me to look in MASS for it.
> > I'm sure that others have had the same thing happen.
> >
> > Shouldn't such generally useful functions get moved into base or some other
> > package that is on the default search path?
>
> Interesting Q.  Partly for perfomance reasons and partly for embedded
> applications, we are trying to make base a lot smaller.  The agreed idea
> seems to be to have a tiny core for R and lots of added functionality.
> Unfortunately whereas S seems to be able to have long search paths without
> performance penalty, we haven't found the right tricks in R (although it is
> much better than it once was).  So just adding MASS to the path has
> something like a 5% penalty (last timed just pre-1.2.0).  And careful
> observers may have noticed that R gets a little slower (on almost) each
> release.
>
> One step in this direction that 1.3.0 will have is load-on-demand modules,
> that is compiled code that is not loaded until used.  This allowed us to
> avoid a 50% increase in code size.
>
> Brian
>
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 23 21:33:02 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 23 May 2001 16:33:02 -0400
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
References: <5429125E11E4D411AF7300805FE603A8014CEAF4@groexmbcr02.pfizer.com>
Message-ID: <3B0C1E7E.3DEECF5F@bank-banque-canada.ca>

>Actually, this illustrates a problem and raises another issue.  As it
turns
>out, I'm not the only one to have (unnecessarily) re-implemented the
>features of confint() because it didn't occur to me to look in MASS for
it.
>I'm sure that others have had the same thing happen.

Some search/browse capability sure would be nice and I think this
problem is going to get worse with the elimination of function.html in R
1.3.0.  Perhaps there is a possibility of putting a giant index of all
functions in all packages on CRAN?

>Shouldn't such generally useful functions get moved into base or some
>other package that is on the default search path?

The potential for name conflicts seems rather severe with this approach.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 23 22:30:49 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 23 May 2001 22:30:49 +0100 (BST)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <3B0C1E7E.3DEECF5F@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.21.0105232220160.7370-100000@localhost>

On Wed, 23 May 2001, Paul Gilbert wrote:

> >Actually, this illustrates a problem and raises another issue.  As it
> turns
> >out, I'm not the only one to have (unnecessarily) re-implemented the
> >features of confint() because it didn't occur to me to look in MASS for
> it.
> >I'm sure that others have had the same thing happen.
> 
> Some search/browse capability sure would be nice and I think this
> problem is going to get worse with the elimination of function.html in R
> 1.3.0.  Perhaps there is a possibility of putting a giant index of all
> functions in all packages on CRAN?

Not only is it nice, but we do already have it, twice, in fact!

There are two search/browse facilities for all current libraries (and I
mean that, not packages), namely help.search() and the Java-based HTML
search.  Try them some time!

> help.search("confidence interval")
Help files with alias or title matching `confidence interval':
Type `?FOO' to inspect entry `FOO(PKG) TITLE'.

confint(MASS)           Confidence Intervals for Model Parameters
[...]

So why would removing an *index* affect the ability to search?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May 23 22:40:27 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 23 May 2001 17:40:27 -0400
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEAF6@groexmbcr02.pfizer.com>

  > From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
  
  > > Warnes, Gregory R wrote:
  > >
  > > Shouldn't such generally useful functions get moved into base or some
other
  > > package that is on the default search path?  
  > 
  > Interesting Q.  Partly for performance reasons and partly for 
  > embedded applications, we are trying to make base a lot smaller.  
  > The agreed idea seems to be to have a tiny core for R and lots of added 
  > functionality.


I think the problem is that functions are not necessarily well grouped into
coherent packages.   Currently, what functionality is contained in each
package isn't being managed, per se.  Rather packages and functions within
packages seem to be accumulating organically.  

The need to trim down R-base to provides us with the opportunity to think
about how features are divided into packages.  We should make sure that the
packages that we create are coherently organized.  To do this , we will need
to "pull in" code from existing packages as well as "separating out" code
from R-base.

-Greg



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 23 22:52:32 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 May 2001 23:52:32 +0200
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: kjetil halvorsen's message of "Wed, 23 May 2001 15:39:09 -0400"
References: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at> <3B0C11DD.501B427E@umsanet.edu.bo>
Message-ID: <x2d78zu40v.fsf@blueberry.kubism.ku.dk>

kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:

> lowess is supposed to handle formulas and will do so when the 
> scope error in xy.coords is corrected.

...which we seem to have forgotten to do in r-devel. Does this have a
PR# ?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rpeng@stat.ucla.edu  Thu May 24 02:18:12 2001
From: rpeng@stat.ucla.edu (rpeng@stat.ucla.edu)
Date: Thu, 24 May 2001 03:18:12 +0200 (MET DST)
Subject: [Rd] Problem with hist(x, prob=T) (PR#947)
Message-ID: <200105240118.DAA15398@pubhealth.ku.dk>

Full_Name: Roger Peng
Version: 1.2.3
OS: Linux
Submission from: (NULL) (128.97.86.109)


In R version 1.2.3, the hist command does not respond to the probability=TRUE
parameter.  So 

hist(x, probability=FALSE) 

and 

hist(x, probability=TRUE) 

produce the same (graphical) output.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 24 07:15:33 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 24 May 2001 07:15:33 +0100 (BST)
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <x2d78zu40v.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.21.0105240714250.758-100000@localhost>

On 23 May 2001, Peter Dalgaard BSA wrote:

> kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:
> 
> > lowess is supposed to handle formulas and will do so when the 
> > scope error in xy.coords is corrected.
> 
> ...which we seem to have forgotten to do in r-devel. Does this have a
> PR# ?

PR# 932, as a search of BUGS in R-devel reveals.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 24 07:23:48 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 24 May 2001 08:23:48 +0200 (MET DST)
Subject: [Rd] Problem with hist(x, prob=T) (PR#947)
Message-ID: <200105240623.IAA15950@pubhealth.ku.dk>

On Thu, 24 May 2001 rpeng@stat.ucla.edu wrote:

> Full_Name: Roger Peng
> Version: 1.2.3
> OS: Linux
> Submission from: (NULL) (128.97.86.109)
> 
> 
> In R version 1.2.3, the hist command does not respond to the probability=TRUE
> parameter.  So 
> 
> hist(x, probability=FALSE) 
> 
> and 
> 
> hist(x, probability=TRUE) 
> 
> produce the same (graphical) output.

This is bug PR# 944, already fixed in R-devel when that was reported.
Use `freq' instaed for now.

You can search R-bugs to see if the problem has already been reported.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Thu May 24 17:37:31 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Thu, 24 May 2001 12:37:31 -0400
Subject: [Rd] New generic functions in "R base" {was `truncate'}
References: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at> <3B0C11DD.501B427E@umsanet.edu.bo> <x2d78zu40v.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B0D38CB.8C72AA3A@umsanet.edu.bo>



Peter Dalgaard BSA wrote:
> 
> kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:
> 
> > lowess is supposed to handle formulas and will do so when the
> > scope error in xy.coords is corrected.
> 
> ...which we seem to have forgotten to do in r-devel. Does this have a
> PR# ?

scoping error in xy.coords (PR#932)

Kjetil Halvorsen
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu May 24 18:04:50 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 24 May 2001 13:04:50 -0400
Subject: [Rd] New Package: gregmisc
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEAFC@groexmbcr02.pfizer.com>

I've thrown a couple of useful functions into a new package "gregmisc" and
uploaded them to ftp://ftp.ci.tuwien.ac.at/incoming/gregmisc_0.1.1.tgz 

Here's DESCRIPTION:

	Package: gregmisc
	Description: Misc Functions written/maintained by Gregory R. Warnes
	Title: Greg's Miscellaneous Functions
	Version: 0.1
	Date: 2001/05/24
	Depends: R 
	Maintainer: Gregory R. Warnes <Gregory_R_Warnes@groton.pfizer.com>

	Author: Gregory R. Warnes.  Includes code provided by William
Venables 
	        and Ben Bolker. 
	License: GPL (version 2 or later)

and INDEX:

	boxplot.n                Produce a Boxplot Annotated with the Number
of
	                         Observations
	ci                       Compute Confidence Intervals
	plotCI                   Plot Error Bars
	plotmeans                Plot Group Means and Confidence Intervals


I'm perfectly happy for these functions to get incorporated into other
packages.  Feel free to email comments/criticisms/whatever.

-Greg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri May 25 17:05:26 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 25 May 2001 12:05:26 -0400
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
References: <Pine.LNX.4.21.0105232220160.7370-100000@localhost>
Message-ID: <3B0E82C6.8E5C4405@bank-banque-canada.ca>

PG> Some search/browse capability sure would be nice and I think this
PG> problem is going to get worse with the elimination of function.html in R
PG> 1.3.0.  Perhaps there is a possibility of putting a giant index of all
PG> functions in all packages on CRAN?

BDR>Not only is it nice, but we do already have it, twice, in fact!
BDR>
BDR>There are two search/browse facilities for all current libraries (and I
BDR>mean that, not packages), namely help.search() and the Java-based HTML
BDR>search.  Try them some time!

Brian

Yes, I have tried these and they are very useful, but I believe they only work for
installed packages. If I am wrong about that then something else is broken since your
example gives this for me:

> help.search("confidence interval")
No help files found with alias or title matching `confidence interval'

What I had in mind was an ability to search available packages not just installed
ones. It is often difficult to find something unless you already know to install the
package that includes it, but often people don't know what package to look in. If
something does not exist in any package then one can never be sure without installing
all packages. (If this search facility is available on CRAN then I have missed it.)

Also, neither of these search facilities provide browsing. (The keyword by topic
gives some browsing capability but it is more like looking at a table of contents
than an index.)  I realize the list of functions would be extremely long, but
sometimes even matching the full text of the help description would not be enough
without some "fuzzy" matching (and I think we are a ways from this).  The problem may
be more severe for programming features than for statistics terms. Someone converting
from Matlab, Gauss, or APL will often know a term that describes exactly what they
want, but they don't know the R term to search for. Despite modern technology I still
often resort to browsing through the index of manuals.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 25 17:19:39 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 25 May 2001 17:19:39 +0100 (BST)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <3B0E82C6.8E5C4405@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0105251715400.1160-100000@gannet.stats>

On Fri, 25 May 2001, Paul Gilbert wrote:

> PG> Some search/browse capability sure would be nice and I think this
> PG> problem is going to get worse with the elimination of function.html in R
> PG> 1.3.0.  Perhaps there is a possibility of putting a giant index of all
> PG> functions in all packages on CRAN?
>
> BDR>Not only is it nice, but we do already have it, twice, in fact!
> BDR>
> BDR>There are two search/browse facilities for all current libraries (and I
> BDR>mean that, not packages), namely help.search() and the Java-based HTML
> BDR>search.  Try them some time!
>
> Brian
>
> Yes, I have tried these and they are very useful, but I believe they only work for
> installed packages. If I am wrong about that then something else is broken since your
> example gives this for me:
>
> > help.search("confidence interval")
> No help files found with alias or title matching `confidence interval'

Nothing does uninstalled packages, as R has no means of knowing about
them!  help.search does search un-loaded packages, as in my example.  In
fact the same set as the function list (on Unix).  Looks as if something
may be wrong your end: if MASS is in some library it should be found.

[1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base"
> help.search("confidence interval")
Help files with alias or title matching `confidence interval':
Type `?FOO' to inspect entry `FOO(PKG) TITLE'.

confint(MASS)                 Confidence Intervals for Model Parameters
...

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Fri May 25 18:17:14 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Fri, 25 May 2001 13:17:14 -0400 (EDT)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <Pine.LNX.4.31.0105251715400.1160-100000@gannet.stats>
Message-ID: <Pine.GSO.4.10.10105251311040.18933-100000@hsph.harvard.edu>

I think the proposal was for something along the lines of Perl's CPAN
module (or ActiveState's PPM for that matter)---sure, you have to update
indices periodically, but whatever. Perhaps some sort HTTP based system
for performing full text queries (since the database for that sort of
thing will undoubtably be large) would be in order, but the spirit of the
idea is certainly a good one---especially for new users (students, etc)
who don't know the system like the back of their hand. 'sides, kids these
days aren't used to things like manpages and apropos. ;-)

Byron Ellis (bellis@hsph.harvard.edu)

On Fri, 25 May 2001, Prof Brian Ripley wrote:

> On Fri, 25 May 2001, Paul Gilbert wrote:
> 
> > PG> Some search/browse capability sure would be nice and I think this
> > PG> problem is going to get worse with the elimination of function.html in R
> > PG> 1.3.0.  Perhaps there is a possibility of putting a giant index of all
> > PG> functions in all packages on CRAN?
> >
> > BDR>Not only is it nice, but we do already have it, twice, in fact!
> > BDR>
> > BDR>There are two search/browse facilities for all current libraries (and I
> > BDR>mean that, not packages), namely help.search() and the Java-based HTML
> > BDR>search.  Try them some time!
> >
> > Brian
> >
> > Yes, I have tried these and they are very useful, but I believe they only work for
> > installed packages. If I am wrong about that then something else is broken since your
> > example gives this for me:
> >
> > > help.search("confidence interval")
> > No help files found with alias or title matching `confidence interval'
> 
> Nothing does uninstalled packages, as R has no means of knowing about
> them!  help.search does search un-loaded packages, as in my example.  In
> fact the same set as the function list (on Unix).  Looks as if something
> may be wrong your end: if MASS is in some library it should be found.
> 
> [1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base"
> > help.search("confidence interval")
> Help files with alias or title matching `confidence interval':
> Type `?FOO' to inspect entry `FOO(PKG) TITLE'.
> 
> confint(MASS)                 Confidence Intervals for Model Parameters
> ...
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri May 25 18:34:36 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 25 May 2001 19:34:36 +0200
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <Pine.GSO.4.10.10105251311040.18933-100000@hsph.harvard.edu>
References: <Pine.LNX.4.31.0105251715400.1160-100000@gannet.stats>
 <Pine.GSO.4.10.10105251311040.18933-100000@hsph.harvard.edu>
Message-ID: <15118.38828.632164.173037@mithrandir.hornik.net>

>>>>> Byron Ellis writes:

> I think the proposal was for something along the lines of Perl's CPAN
> module (or ActiveState's PPM for that matter)---sure, you have to
> update indices periodically, but whatever. Perhaps some sort HTTP
> based system for performing full text queries (since the database for
> that sort of thing will undoubtably be large) would be in order, but
> the spirit of the idea is certainly a good one---especially for new
> users (students, etc) who don't know the system like the back of their
> hand. 'sides, kids these days aren't used to things like manpages and
> apropos. ;-)

> ...

Sorry for entering this a bit late.  The CRAN maintainers have actually
decided implementing something along the above lines a long time ago.
Unfortunately, it simply has not happened thus far.  In a way, this
would be a good project for a computer science student ...

In a nutshell, I see two approaches.  One amounts to having a web front
end for help.search() which Brian kindly pointed out.  I.e., CRAN would
have a prebuilt help db for all packages it provides, and a search
mechanism patterned after help.search() [you do not necessarily need an
R process for the search].  Full-text search fanatics might prefer us to
simply `install' all HTML files of the CRAN packages to some place and
provide full-text indexing and searching of that.

[To those who haven't read from me about this: full-text index/search
alone does not solve the problem.  You want fuzzy matching a la glimpse
along with that, otherwise e.g. spelling differences cannot be
resolved.]

As we hope that R 1.3.0 will support multiple package repositories, the
question *where* to search will become more delicated.  For example, the
packages by Jim Lindsey are not distributed via CRAN ...

If there are any volunteers for implementing this, pls let us know.

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Sat May 26 12:24:03 2001
From: p.malewski@tu-bs.de (p.malewski@tu-bs.de)
Date: Sat, 26 May 2001 13:24:03 +0200 (MET DST)
Subject: [Rd] xyplot,grid.text segfault (PR#948)
Message-ID: <200105261124.NAA27403@pubhealth.ku.dk>

First, thank you very much for that lattice-package, second, the code
below segfaults R:

zz <- data.frame(
                 y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                 g=as.character(rep(1:2,50)))
xyplot(y~ x|z,data=zz,groups=g,
            panel = function(x, y, subscripts, groups)  
            grid.text(x=x, y=y, label=groups[subscripts])
       )

I'm not sure if I have understood that panel stuff right, but anyway,
it shouldn't segfault. BTW: I also unsure if I have to use the
develop-version of R & whether lattice bugs should be submitted
(because of the devel-status??).

Peter

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat May 26 15:18:08 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 May 2001 16:18:08 +0200
Subject: [Rd] xyplot,grid.text segfault (PR#948)
In-Reply-To: p.malewski@tu-bs.de's message of "Sat, 26 May 2001 13:24:03 +0200 (MET DST)"
References: <200105261124.NAA27403@pubhealth.ku.dk>
Message-ID: <x2ae40p527.fsf@blueberry.kubism.ku.dk>

p.malewski@tu-bs.de writes:

> First, thank you very much for that lattice-package, second, the code
> below segfaults R:
> 
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)  
>             grid.text(x=x, y=y, label=groups[subscripts])
>        )
> 
> I'm not sure if I have understood that panel stuff right, but anyway,
> it shouldn't segfault. BTW: I also unsure if I have to use the
> develop-version of R & whether lattice bugs should be submitted
> (because of the devel-status??).

Well, it is easier for us to deal with erroneously submitted bug than
erroneously unsubmitted ones. We have an Add-Ons category on r-bugs to
put it in. 

Lattice is closely associated with the core team, so we'd be able to
track this kind of problem. With some other packages which we do not
maintain, we have some trouble figuring out whether a report has been
solved or whether it was even a bug in the first place (it would be
nice if the original submitters would lend a hand there).

As I remember it, Paul and Deepayan were somewhat vague about exactly
what was required, except that you'd need something relatively recent.
A segfault certainly looks like a real bug.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat May 26 17:30:18 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sat, 26 May 2001 18:30:18 +0200 (MET DST)
Subject: [Rd] xyplot,grid.text segfault (PR#948)
Message-ID: <200105261630.SAA28272@pubhealth.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:


> As I remember it, Paul and Deepayan were somewhat vague about exactly
> what was required, except that you'd need something relatively recent.
> A segfault certainly looks like a real bug.

...and your example crashes with the current development version of R
too, anyway.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat May 26 19:53:22 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 May 2001 20:53:22 +0200
Subject: [Rd] xyplot,grid.text segfault (PR#948)
In-Reply-To: p.malewski@tu-bs.de's message of "Sat, 26 May 2001 13:24:03 +0200 (MET DST)"
References: <200105261124.NAA27403@pubhealth.ku.dk>
Message-ID: <x2k834eycd.fsf@blueberry.kubism.ku.dk>

p.malewski@tu-bs.de writes:

> First, thank you very much for that lattice-package, second, the code
> below segfaults R:
> 
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)  
>             grid.text(x=x, y=y, label=groups[subscripts])
>        )
> 
> I'm not sure if I have understood that panel stuff right, but anyway,
> it shouldn't segfault. BTW: I also unsure if I have to use the
> develop-version of R & whether lattice bugs should be submitted
> (because of the devel-status??).
> 
> Peter

grid.text() seems unhappy with being passed a non-character vector for
the label argument. I think Paul muttered something to the effect that
he knew there would be that kind of weaknesses in the code.

The following runs successfully (well, at least it doesn't crash - the
result looks a bit weird):

library(lattice)
zz <- data.frame(
                 y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                 g=as.character(rep(1:2,50)))
xyplot(y~ x|z,data=zz,groups=g,
            panel = function(x, y, subscripts, groups)
            grid.text(x=x, y=y,
                      label=as.character(groups[subscripts]))
       )


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Sat May 26 22:28:59 2001
From: p.malewski@tu-bs.de (p.malewski@tu-bs.de)
Date: Sat, 26 May 2001 23:28:59 +0200 (MET DST)
Subject: [Rd] lattice: dev.print(postscript) gives probl. false background Info (PR#950)
Message-ID: <200105262128.XAA28793@pubhealth.ku.dk>

There seems to be a problem with the background margins (I only recognized it in a latex ):

xyplot(rnorm(100) ~ rnorm(100))
dev.print(postscript,"/tmp/tmp.ps")

whereas this works on the 1.2.3 version but not with 1.3.0:

dev.copy2eps("/tmp/tmp.ps")                 

both times a warning appears:
Warning message: 
unknown postscript font family, using Helvetica 


Here is the latex-file:

\documentclass{book}
\usepackage{graphicx}

\begin{document}
text texttext texttext texttext texttext texttext text
 \begin{figure}[htb!]
   \begin{center}
     \includegraphics[width=\columnwidth]{/tmp/tmp}      
     \caption{asdas}
   \end{center}
 \end{figure}
texttexttexttexttexttexttexttexttexttexttext
\end{document}

Peter


<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 05
 day = 25
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Sat May 26 22:28:57 2001
From: p.malewski@tu-bs.de (p.malewski@tu-bs.de)
Date: Sat, 26 May 2001 23:28:57 +0200 (MET DST)
Subject: [Rd] lattice: postscript() false margins (PR#949)
Message-ID: <200105262128.XAA28779@pubhealth.ku.dk>

Using lattice the posscript(file="") device gives false margins:

zz <- data.frame(
                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                  g=as.character(rep(1:2,50)))


postscript(file="/tmp/tmp.ps")
xyplot(x~y|g,data=xx)
dev.off()

whereas dev.print(postscript,file="") works fine 

dev.print(postscript,file="/tmp/tmp.ps")

Peter

<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 05
 day = 25
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon May 28 06:39:57 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Mon, 28 May 2001 01:39:57 -0400 (EDT)
Subject: [Rd] New Package: gregmisc
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEAFC@groexmbcr02.pfizer.com>
Message-ID: <Pine.LNX.4.30.0105280132420.5852-100000@bolker.zoo.ufl.edu>


   Do you have the latest version of plotCI?  (attached below, I didn't
send it as an attachment for the sake of R-devel)  It uses arrows()
instead of segments(), which simplifies the code a bit and incidentally
makes it work with logarithmic axes as well (since the sizes of the bar
ends are specified in absolute rather than user units).

  Should this code be the first entry in the "miscellaneous code"
repository at CRAN that was discussed a while back?

  By the way, something occurred to me ... my "miscellaneous packages"
function (which I haven't made available to CRAN yet, although I probably
will eventually) is called "bbmisc".  Yours is called "gregmisc".  Would
it make any sense to standardize these on "<lastname>misc" or
"<first_initial><lastname>misc" (bolkermisc, bbolkermisc) to avoid
confusion once we have a whole bunch of these packages?

  Also by the way, congratulations for actually getting around to posting
your miscellaneous functions to CRAN!  I hope to do as well.

  Ben Bolker

plotCI <- function (x, y = NULL, uiw, liw = uiw, aui=NULL, ali=aui,
                    err="y", ylim=NULL, xlim=NULL, sfrac = 0.01, gap=0, add=FALSE,
                    col=par("col"), lwd=par("lwd"), slty=par("lty"), xlab=NULL,
                    ylab=NULL, main="", pt.bg = NA, scol=col,
                    axes=TRUE, ...)  {
# from Bill Venables, R-list
  if (is.list(x)) {
    y <- x$y
    x <- x$x
  }
  if (is.null(y)) {
    if (is.null(x))
      stop("both x and y NULL")
    y <- as.numeric(x)
    x <- seq(along = x)
  }
  if (missing(xlab)) xlab <- deparse(substitute(x))
  if (missing(ylab)) ylab <- deparse(substitute(y))
  if (missing(uiw)) {  ## absolute limits
    ui <- aui
    li <- ali
  }
  else {  ## relative limits
    if (err=="y") z <- y else z <- x
    ui <- z + uiw
    li <- z - liw
  }
  if (err=="y" & is.null(ylim))
    ylim <- range(c(y, ui, li), na.rm=TRUE)
  else
    if (err=="x" & is.null(xlim))
      xlim <- range(c(x, ui, li), na.rm=TRUE)
  if (!add)
    plot(x, y, ylim = ylim, xlim = xlim, col=col, lwd=lwd, xlab=xlab, ylab=ylab,
         main=main, type="n", axes=axes, ...)
  if (gap==TRUE) gap <- 0.01  ## default gap size
  ul <- c(li, ui)
  if (err=="y") {
    gap <- rep(gap,length(x))*diff(par("usr")[3:4])
    smidge <- par("fin")[1] * sfrac
    arrows(x , li, x, pmax(y-gap,li), col=col, lwd=lwd, lty=slty, angle=90, length=smidge, code=1)
    arrows(x , ui, x, pmin(y+gap,ui), col=col, lwd=lwd, lty=slty, angle=90, length=smidge, code=1)
  }
  else if (err=="x") {
    gap <- rep(gap,length(x))*diff(par("usr")[1:2])
    smidge <- par("fin")[2] * sfrac
    arrows(li, y, pmax(x-gap,li), y, col=col, lwd=lwd, lty=slty, angle=90, length=smidge, code=1)
    arrows(ui, y, pmin(x+gap,ui), y, col=col, lwd=lwd, lty=slty, angle=90, length=smidge, code=1)
  }
  ## _now_ draw the points (in case we want to have "bg" set for points)
  points(x, y, col=col, lwd=lwd, bg=pt.bg, ...)
  invisible(list(x = x, y = y))
}

On Thu, 24 May 2001, Warnes, Gregory R wrote:

> I've thrown a couple of useful functions into a new package "gregmisc" and
> uploaded them to ftp://ftp.ci.tuwien.ac.at/incoming/gregmisc_0.1.1.tgz
>
> Here's DESCRIPTION:
>
> 	Package: gregmisc
> 	Description: Misc Functions written/maintained by Gregory R. Warnes
> 	Title: Greg's Miscellaneous Functions
> 	Version: 0.1
> 	Date: 2001/05/24
> 	Depends: R
> 	Maintainer: Gregory R. Warnes <Gregory_R_Warnes@groton.pfizer.com>
>
> 	Author: Gregory R. Warnes.  Includes code provided by William
> Venables
> 	        and Ben Bolker.
> 	License: GPL (version 2 or later)
>
> and INDEX:
>
> 	boxplot.n                Produce a Boxplot Annotated with the Number
> of
> 	                         Observations
> 	ci                       Compute Confidence Intervals
> 	plotCI                   Plot Error Bars
> 	plotmeans                Plot Group Means and Confidence Intervals
>
>
> I'm perfectly happy for these functions to get incorporated into other
> packages.  Feel free to email comments/criticisms/whatever.
>
> -Greg
>
>
>
>
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Nick.Guoth@anu.edu.au  Mon May 28 05:25:15 2001
From: Nick.Guoth@anu.edu.au (Nick.Guoth@anu.edu.au)
Date: Mon, 28 May 2001 06:25:15 +0200 (MET DST)
Subject: [Rd] Undeclared identifier in make compilation (PR#951)
Message-ID: <200105280425.GAA02627@pubhealth.ku.dk>

Full_Name: Nick Guoth
Version: 1.2.3
OS: SunOS 5.8 Generic_108528-03
Submission from: (NULL) (150.203.33.227)


>From running the make, the following error occurs:

gcc -I. -I../../../src/include -I../../../src/include -I/opt/x11r6.3/include
-I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
rbitmap.c: In function `R_SaveAsPng':
rbitmap.c:169: `PNG_INTERLACE_NONE' undeclared (first use in this function)
rbitmap.c:169: (Each undeclared identifier is reported only once
rbitmap.c:169: for each function it appears in.)
rbitmap.c:169: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in this
function)
rbitmap.c:170: `PNG_FILTER_TYPE_BASE' undeclared (first use in this function)
make[5]: *** [rbitmap.o] Error 1
make[5]: Leaving directory `/home/nick/R/R-1.2.3/src/unix/X11'
make[4]: *** [R] Error 2
make[4]: Leaving directory `/home/nick/R/R-1.2.3/src/unix/X11'
make[3]: *** [DLLs] Error 1
make[3]: Leaving directory `/home/nick/R/R-1.2.3/src/unix'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/home/nick/R/R-1.2.3/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/nick/R/R-1.2.3/src'
make: *** [R] Error 1


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Mon May 28 06:33:02 2001
From: deepayansarkar@yahoo.com (Mr deepayan sarkar)
Date: Sun, 27 May 2001 22:33:02 -0700 (PDT)
Subject: [Rd] lattice: postscript() false margins (PR#949)
In-Reply-To: <200105262128.XAA28779@pubhealth.ku.dk>
Message-ID: <20010528053302.24017.qmail@web13905.mail.yahoo.com>


This is not really a bug. grid is not compatible with 
standard R graphics, and just starting a device by 
calling postscript() or x11() will not work. You need 
to call the grid functions grid.start() and 
grid.stop() when you enter and exit grid graphics.

If you're only interested in the lattice stuff, then 
the proper way to initiate a postscript (or x11) 
device is to call 

trellis.device(postscript, file="foo"). 

You should probably also read the documentation for 
trellis.device, as you might not like the current 
defaults.



--- p.malewski@tu-bs.de wrote:
> Using lattice the posscript(file="") device gives
> false margins:
> 
> zz <- data.frame(
>                  
> y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                   g=as.character(rep(1:2,50)))
> 
> 
> postscript(file="/tmp/tmp.ps")
> xyplot(x~y|g,data=xx)
> dev.off()
> 
> whereas dev.print(postscript,file="") works fine 
> 
> dev.print(postscript,file="/tmp/tmp.ps")
> 
> Peter
> 
> <<insert bug report here>>
> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Under development (unstable)
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 05
>  day = 25
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:grid, package:lattice,
> package:ctest, Autoloads, package:base
> 
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:
> r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


__________________________________________________
Do You Yahoo!?
Yahoo! Auctions - buy the things you want at great prices
http://auctions.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 28 07:40:13 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 28 May 2001 08:40:13 +0200
Subject: [Rd] Recent spam -- should we forbid javascript?
In-Reply-To: <20010528012211.BIBB11152.mail2.rdc2.bc.home.com@[24.76.58.120]>
References: <20010528012211.BIBB11152.mail2.rdc2.bc.home.com@[24.76.58.120]>
Message-ID: <15121.62157.632639.321423@gargle.gargle.HOWL>

The recent spam that went to both R-devel and R-help would have been
 somewhat difficult to autodetect by the relatively simple filters we use.

One possibility to prevent these would be to disallow javascript at all
(in mails to the  mailing lists).
Does anyone see a reason against this measure?
     [note that there won't ever be a 100% spam proof system..]

Your list maintainer,

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 28 07:45:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 May 2001 08:45:08 +0200 (MET DST)
Subject: [Rd] Undeclared identifier in make compilation (PR#951)
Message-ID: <200105280645.IAA03866@pubhealth.ku.dk>

On Mon, 28 May 2001 Nick.Guoth@anu.edu.au wrote:

> Full_Name: Nick Guoth
> Version: 1.2.3
> OS: SunOS 5.8 Generic_108528-03
> Submission from: (NULL) (150.203.33.227)
>

I believe this means that the png headers were found but that they were
either way out of date or corrupt.  What is your png version?  Try
upgrading to the latest (1.0.10 last time I looked), or compile without the
png.h in your include path.

>
> >From running the make, the following error occurs:
>
> gcc -I. -I../../../src/include -I../../../src/include -I/opt/x11r6.3/include
> -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
> rbitmap.c: In function `R_SaveAsPng':
> rbitmap.c:169: `PNG_INTERLACE_NONE' undeclared (first use in this function)
> rbitmap.c:169: (Each undeclared identifier is reported only once
> rbitmap.c:169: for each function it appears in.)
> rbitmap.c:169: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in this
> function)
> rbitmap.c:170: `PNG_FILTER_TYPE_BASE' undeclared (first use in this function)
> make[5]: *** [rbitmap.o] Error 1
> make[5]: Leaving directory `/home/nick/R/R-1.2.3/src/unix/X11'
> make[4]: *** [R] Error 2
> make[4]: Leaving directory `/home/nick/R/R-1.2.3/src/unix/X11'
> make[3]: *** [DLLs] Error 1
> make[3]: Leaving directory `/home/nick/R/R-1.2.3/src/unix'
> make[2]: *** [R] Error 2
> make[2]: Leaving directory `/home/nick/R/R-1.2.3/src/main'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory `/home/nick/R/R-1.2.3/src'
> make: *** [R] Error 1
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Mon May 28 09:17:26 2001
From: p.malewski@tu-bs.de (Peter Malewski)
Date: Mon, 28 May 2001 10:17:26 +0200
Subject: [Rd] lattice: postscript() false margins (PR#949)
In-Reply-To: <20010528053302.24017.qmail@web13905.mail.yahoo.com>; from deepayansarkar@yahoo.com on Sun, May 27, 2001 at 10:33:02PM -0700
References: <200105262128.XAA28779@pubhealth.ku.dk> <20010528053302.24017.qmail@web13905.mail.yahoo.com>
Message-ID: <20010528101723.A8567@rzpool07.pool.rz.tu-bs.de>

On Sun, May 27, 2001 at 10:33:02PM -0700, Mr deepayan sarkar wrote:
> 
> This is not really a bug. grid is not compatible with 
> standard R graphics, and just starting a device by 
> calling postscript() or x11() will not work. You need 
> to call the grid functions grid.start() and 
> grid.stop() when you enter and exit grid graphics.
> 
> If you're only interested in the lattice stuff, then 
> the proper way to initiate a postscript (or x11) 
> device is to call 
> 
> trellis.device(postscript, file="foo"). 
> 
> You should probably also read the documentation for 
> trellis.device, as you might not like the current 
> defaults.

Thanks for your answer. Actually I've recognized that grid.start /grid.stop but 
forgot this using "postscript". 

Yesterday I've made some graphs with print.trellis --it is really flexible + 
handy. Of course I've to spend some more time to "grid" to really understand 
the concept.
 

Peter





-- 
P.Malewski, Limmerstr.47, 30451 Hannover, 0511-2135008
At work: http://www.MH-Hannover.de 0511 532 3194 / Fax: 0511 532 3190, 
P.Malewski@tu-bs.de, peter.malewski@gmx.de, malewski.peter@mh-hannover.de.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon May 28 09:39:28 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 28 May 2001 10:39:28 +0200 (MET DST)
Subject: [Rd] memory bug in is.na[n]() (PR#952)
Message-ID: <200105280839.KAA05566@pubhealth.ku.dk>

I've forgotten to submit this as bug report
(and haven't easily seen how to debug).  

The bug is both for  is.na() and is.nan()  {which makes much sense since
					the C code of the two is very similar!};
only one is shown below.

Martin

------- start of forwarded message -------
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: R-core@stat.math.ethz.ch
Subject: another is.nan  BUG  found by gctorture-testing demo(is.things)
Date: Thu, 12 Apr 2001 14:51:06 +0200

demo() being part of strict tests (since this morning),
reveals another bug in is.nan()
in both branches, but already in 1.2.2 
(ie. certainly not caused by Peter's recent fix) :

 gctorture(FALSE) # default
 is.nan(NULL)
 #-> logical(0)

 gctorture()
 is.nan(NULL)

Looks pretty strange :  {calling it subsequently does sometimes not reproduce}

> gctorture()
> is.nan(NULL)
$names
 [1] "is.nan() applied to non-(list or vector)"
 [2] ""                                        
 [3] ""                                        
 [4] ""                                        
 [5] ""                                        
 [6] ""                                        
 [7] ""                                        
 [8] ""                                        
 [9] ""                                        
[10] ""                                        
[11] ""                                        
[12] ""                                        
[13] ""                                        
[14] ""                                        
[15] ""                                        
[16] ""                                        
[17] ""                                        
[18] ""                                        
[19] ""                                        
[20] ""                                        
[21] ""                                        
[22] ""                                        
[23] ""                                        
[24] ""                                        
[25] ""                                        
[26] ""                                        
[27] ""                                        
[28] ""                                        
[29] ""                                        
[30] ""                                        
[31] ""                                        
[32] ""                                        
[33] ""                                        
[34] ""                                        
[35] ""                                        
[36] ""                                        
[37] ""                                        
[38] ""                                        
[39] ""                                        
[40] ""                                        
[41] ""                                        
[42] ""                                        
[43] ""                                        
[44] ""                                        
[45] ""                                        
[46] ""                                        
[47] ""                                        
[48] ""                                        
[49] ""                                        
[50] ""                                        

Warning message: 
is.nan() applied to non-(list or vector) in: is.nan(NULL) 
> 
------- end of forwarded message -------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon May 28 09:45:18 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 28 May 2001 10:45:18 +0200 (MET DST)
Subject: [Rd] bugs in deriv(*, *, function.arg = ) (PR#953)
Message-ID: <200105280845.KAA05650@pubhealth.ku.dk>

Also, this should have gone in R-bugs quite a while ago :

------- start of forwarded message -------
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: R-core@stat.math.ethz.ch
Subject: PROTECT() bugs in deriv(*, *, function.arg = ) 
Date: Mon, 16 Apr 2001 21:02:10 +0200

In R versions 0.50 and 0.64.2 ,
the following worked

      > deriv(expression(sin(cos(x) * y)), c("x","y"), function(x,y){})
      function (x, y) 
      {
	  .expr1 <- cos(x)
	  .expr2 <- .expr1 * y
	  .expr4 <- cos(.expr2)
	  .value <- sin(.expr2)
	  .grad <- array(0, c(length(.value), 2), list(NULL, c("x", 
	      "y")))
	  .grad[, "x"] <- -.expr4 * (sin(x) * y)
	  .grad[, "y"] <- .expr4 * .expr1
	  attr(.value, "gradient") <- .grad
	  .value
      }


    which *was* S(-plus) compatible.
    It stopped working with 0.65.1,
    and later someone added to  help(deriv) 's description of  function.arg

      \item{function.arg}{If specified, a character vector of arguments for
	a function return, or a function (with empty body) or \code{TRUE},
	the latter indicating that a function with argument names
	\code{namevec} should be used.

    the comment 
       >>>> \bold{Note:} this is incompatible with S.}

    Today, I've been looking a bit at the C code and I can't understand why
    giving the function.arg as a function doesn't work anymore.
    (it just returns the 'empty' function.arg).
    Interestingly, it *did* work when I ran things under gdb .. ? .. ?

    The result is the same under gctorture(),
    however, that does reveal a bug (missing PROTECT() ?),
    clearly even under 1.2.2 :

    > gctorture()

    > deriv(expression(sin(x + y^2)), c("x", "y"),c("x", "y"))
    [[1]]


    . 

    {
	.expr2 <- x + y^2
	.expr4 <- cos(.expr2)
	.value <- sin(.expr2)
	.grad <- array(0, c(length(.value), 2), list(NULL, c("x", 
	    "y")))
	.grad[, "x"] <- .expr4
	.grad[, "y"] <- .expr4 * (2 * y)
	attr(.value, "gradient") <- .grad
	.value
    }

    > 

which is a pretty funny beast.

Something for PROTECT() specialists; 
I think there really are two bugs, one when the `function.arg' is a
character vector (bug showing with gctorture()) and one when it is a
function (the body is just not set).

Note that I've committed a very slightly enhanced deriv.c for R-devel
but that should hopefully merge nicely once the bug is found and fixed on
R-release.

Martin

------- end of forwarded message -------


Note that the above "beast" is a "pairlist" ...
MM

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon May 28 18:07:37 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 28 May 2001 10:07:37 -0700 (PDT)
Subject: [Rd] memory bug in is.na[n]() (PR#952)
In-Reply-To: <200105280839.KAA05566@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0105281006010.24130-100000@homer41.u.washington.edu>

On Mon, 28 May 2001 maechler@stat.math.ethz.ch wrote:

> I've forgotten to submit this as bug report
> (and haven't easily seen how to debug).
>
> The bug is both for  is.na() and is.nan()  {which makes much sense since
> 					the C code of the two is very similar!};
> only one is shown below.

I think I've found it - I'll do a bit more testing.

Incidentally, on my machine if you do

gctorture()
is.nan(NULL)
is.nan(NULL)
is.nan(NULL)
...

it happens precisely on the second invocation.

	-thomas

>
> Martin
>
> ------- start of forwarded message -------
> From: Martin Maechler <maechler@stat.math.ethz.ch>
> To: R-core@stat.math.ethz.ch
> Subject: another is.nan  BUG  found by gctorture-testing demo(is.things)
> Date: Thu, 12 Apr 2001 14:51:06 +0200
>
> demo() being part of strict tests (since this morning),
> reveals another bug in is.nan()
> in both branches, but already in 1.2.2
> (ie. certainly not caused by Peter's recent fix) :
>
>  gctorture(FALSE) # default
>  is.nan(NULL)
>  #-> logical(0)
>
>  gctorture()
>  is.nan(NULL)
>
> Looks pretty strange :  {calling it subsequently does sometimes not reproduce}
>
> > gctorture()
> > is.nan(NULL)
> $names
>  [1] "is.nan() applied to non-(list or vector)"
>  [2] ""
>  [3] ""
>  [4] ""
>  [5] ""
>  [6] ""
>  [7] ""
>  [8] ""
>  [9] ""
> [10] ""
> [11] ""
> [12] ""
> [13] ""
> [14] ""
> [15] ""
> [16] ""
> [17] ""
> [18] ""
> [19] ""
> [20] ""
> [21] ""
> [22] ""
> [23] ""
> [24] ""
> [25] ""
> [26] ""
> [27] ""
> [28] ""
> [29] ""
> [30] ""
> [31] ""
> [32] ""
> [33] ""
> [34] ""
> [35] ""
> [36] ""
> [37] ""
> [38] ""
> [39] ""
> [40] ""
> [41] ""
> [42] ""
> [43] ""
> [44] ""
> [45] ""
> [46] ""
> [47] ""
> [48] ""
> [49] ""
> [50] ""
>
> Warning message:
> is.nan() applied to non-(list or vector) in: is.nan(NULL)
> >
> ------- end of forwarded message -------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle
^^^^^^^^^^^^^^^^^^^^^^^^
 NOTE NEW EMAIL ADDRESS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon May 28 18:31:22 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 May 2001 19:31:22 +0200
Subject: [Rd] memory bug in is.na[n]() (PR#952)
In-Reply-To: Thomas Lumley's message of "Mon, 28 May 2001 10:07:37 -0700 (PDT)"
References: <Pine.A41.4.33.0105281006010.24130-100000@homer41.u.washington.edu>
Message-ID: <x2wv71xtw5.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On Mon, 28 May 2001 maechler@stat.math.ethz.ch wrote:
> 
> > I've forgotten to submit this as bug report
> > (and haven't easily seen how to debug).
> >
> > The bug is both for  is.na() and is.nan()  {which makes much sense since
> > 					the C code of the two is very similar!};
> > only one is shown below.
> 
> I think I've found it - I'll do a bit more testing.

(I bet it was a copy+paste from my earlier fix re lists with NULL
elements... D*mn, I thought I checked that it wouldn't happen it the
list itself was NULL) 

> Incidentally, on my machine if you do
> 
> gctorture()
> is.nan(NULL)
> is.nan(NULL)
> is.nan(NULL)
> ...
> 
> it happens precisely on the second invocation.

Yes, with the new memory allocator you're not quite as sure to provoke
errors with gctorture() as with the old one. On the other hand it lets
base-Ex.R run through overnight rather than in two weeks...


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon May 28 18:44:57 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 28 May 2001 10:44:57 -0700 (PDT)
Subject: [Rd] memory bug in is.na[n]() (PR#952)
In-Reply-To: <x2wv71xtw5.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105281038580.24130-100000@homer41.u.washington.edu>

On 28 May 2001, Peter Dalgaard BSA wrote:

> Thomas Lumley <tlumley@u.washington.edu> writes:
>
> > On Mon, 28 May 2001 maechler@stat.math.ethz.ch wrote:
> >
> > > I've forgotten to submit this as bug report
> > > (and haven't easily seen how to debug).
> > >
> > > The bug is both for  is.na() and is.nan()  {which makes much sense since
> > > 					the C code of the two is very similar!};
> > > only one is shown below.
> >
> > I think I've found it - I'll do a bit more testing.
>

Committed.  The ans variable wasn't protected. This only matters when
is.nan returns a warning, as otherwise there is no more allocation before
the result is returned and protected by the caller.

Similar errors happened with is.na(.GlobalEnv) or is.na(new.env()).

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon May 28 21:58:20 2001
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Mon, 28 May 2001 22:58:20 +0200 (MET DST)
Subject: [Rd] deriv (PR#953)
Message-ID: <200105282058.WAA13802@pubhealth.ku.dk>


------- start of forwarded message -------
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: R-core@stat.math.ethz.ch
Subject: PROTECT() bugs in deriv(*, *, function.arg = )
Date: Mon, 16 Apr 2001 21:02:10 +0200

In R versions 0.50 and 0.64.2 ,
the following worked

      > deriv(expression(sin(cos(x) * y)), c("x","y"), function(x,y){})
      function (x, y)
      {
          .expr1 <- cos(x)
          .expr2 <- .expr1 * y
          .expr4 <- cos(.expr2)
          .value <- sin(.expr2)
          .grad <- array(0, c(length(.value), 2), list(NULL, c("x",
              "y")))
          .grad[, "x"] <- -.expr4 * (sin(x) * y)
          .grad[, "y"] <- .expr4 * .expr1
          attr(.value, "gradient") <- .grad
          .value
      }



The second bug (gctorture-provoked) is a missing PROTECT(), which I will
commit when I've run make check.

The first bug is very strange and I suspect there's something going on in
the memory management.  Supplying a function as the third argument should
cause the body of the function to be replaced by the derivative. This
sometimes works, but doesn't depend on the function in any simple way.

It seems to depend on how new the function is. With a new anonymous
function it never works, but with a base function like lm or log it always
works:

 ## works
 deriv(expression(sin(cos(x) * y)), c("x","y"), log)
 ## identical function
 LOG<-function (x, base = exp(1))
    if (missing(base)) .Internal(log(x)) else .Internal(log(x, base))
 ## doesn't work
 deriv(expression(sin(cos(x) * y)), c("x","y"), LOG)

Creating a new function somewhere else in the search path doesn't help
 assign("a",function(x,y){},pos=3)
 # doesn't work
 deriv(expression(sin(cos(x) * y)), c("x","y"), a)

but copying a loaded function does

  library(tcltk)
  a<-tkbind
  #works
  deriv(expression(sin(cos(x) * y)), c("x","y"), a)


????

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue May 29 00:50:31 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 29 May 2001 11:50:31 +1200
Subject: [Rd] xyplot,grid.text segfault (PR#948)
References: <200105261124.NAA27403@pubhealth.ku.dk> <x2k834eycd.fsf@blueberry.kubism.ku.dk>
Message-ID: <019001c0e7d0$fb44fc70$175dd882@stat.auckland.ac.nz>

Hi


> grid.text() seems unhappy with being passed a non-character vector for
> the label argument. I think Paul muttered something to the effect that
> he knew there would be that kind of weaknesses in the code.
>
> The following runs successfully (well, at least it doesn't crash - the
> result looks a bit weird):
>
> library(lattice)
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)
>             grid.text(x=x, y=y,
>                       label=as.character(groups[subscripts]))
>        )


The results look weird because the x and y locations in grid.text are in
"npc" units by default (that is, they are taken as proportions of the
dimensions of the region they are being drawn in).  This means that values
outside the range 0..1 are drawn outside the limits of the plotting region.
You need to specify "native" units in the call so that the x and y locations
are relative to the scales on the axes of the plotting region.  For example,

    grid.text(x=x, y=y,
                  label=as.character(groups[subscripts]),
                  default.units="native")

This unit stuff is a "feature" of the underlying grid graphics, which is
probably why you did not notice it.  The default panel functions do,
however, provide examples of what needs to be done.  See, for example,
panel.xyplot.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Tue May 29 00:49:32 2001
From: Richard.Beare@cmis.csiro.au (Richard.Beare@cmis.csiro.au)
Date: Tue, 29 May 2001 01:49:32 +0200 (MET DST)
Subject: [Rd] argument names in generic print functions (PR#955)
Message-ID: <200105282349.BAA14358@pubhealth.ku.dk>

Hello,

I think this is a bug, although it is possible that I'm doind something
silly.

I want to be able to determine the argument name for variables passed to
a generic print function

suppose we have

print.foo <- function(x, ...)
{
nm<-deparse(substitute(x))
cat("param name is ", nm, "\n")
}

d<-structure(1, class="foo")

Under R-1.2.[2,3]

> print(d)
param name is  d 

> d
param name is  structure(1, class = "foo") 


Under Splus 3.4 the responses are

> d<-structure(1, class="foo")
> d
param name is  d 
> print(d)
param name is  d 


If I'm going about this the wrong way then please let me know.

Thanks


-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue May 29 03:05:16 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 28 May 2001 19:05:16 -0700 (PDT)
Subject: [Rd] argument names in generic print functions (PR#955)
In-Reply-To: <200105282349.BAA14358@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0105281851480.158266-100000@homer03.u.washington.edu>

On Tue, 29 May 2001 Richard.Beare@cmis.csiro.au wrote:

> Hello,
>
> I think this is a bug, although it is possible that I'm doind something
> silly.
>
> I want to be able to determine the argument name for variables passed to
> a generic print function
<snip>

> Under R-1.2.[2,3]
>
> > print(d)
> param name is  d
>
> > d
> param name is  structure(1, class = "foo")
>
> Under Splus 3.4 the responses are
>
> > d<-structure(1, class="foo")
> > d
> param name is  d
> > print(d)
> param name is  d
>
> If I'm going about this the wrong way then please let me know.

I don't think there is a right way to do this in R.  The
read-evaluate-print loop in R prints the *value* of an expression that it
evaluates, not the expression itself. This means that your print()
function doesn't have any way of knowing what the expression was
originally called.  You have to use print() explicitly to get the
parameter name the way you want.

It's not a bug, though it seems to be an incompatibility.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 29 13:25:19 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 29 May 2001 14:25:19 +0200 (MET DST)
Subject: [Rd] unbelievable parser bug (PR#956)
Message-ID: <200105291225.OAA22283@pubhealth.ku.dk>

close to ``unbelievable'' but the following line
is not parsed correctly but gives a syntax error :

    x <- 1## A = 1


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue May 29 13:34:51 2001
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 29 May 2001 14:34:51 +0200
Subject: [Rd] unbelievable parser bug (PR#956)
In-Reply-To: <200105291225.OAA22283@pubhealth.ku.dk>
References: <200105291225.OAA22283@pubhealth.ku.dk>
Message-ID: <15123.38763.364918.656351@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST),
>>>>> maechler  (m) wrote:

  > close to ``unbelievable'' but the following line
  > is not parsed correctly but gives a syntax error :

  >     x <- 1## A = 1


what you don't see is that the ``spaces'' before the comment are no
spaces: if I copy & paste the thing to a vi buffer I see:

	 x <- 1\xa0\xa0## A = 1

...

I got the idea from sequentially deleting characters:

> x <- 1## A = 1
Error: syntax error
> x <- 1# A = 1
Error: syntax error
> x <- 1# A    
Error: syntax error
> x <- 1#   
Error: syntax error
> x <- 1
Error: syntax error


especially the last one look nice IMO ...

.f


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 29 14:11:05 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 29 May 2001 15:11:05 +0200 (MET DST)
Subject: [Rd] unbelievable parser bug (PR#956)
Message-ID: <200105291311.PAA23674@pubhealth.ku.dk>

>>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

>>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST),
>>>>> maechler  (m) wrote:

    >> close to ``unbelievable'' but the following line is not parsed
    >> correctly but gives a syntax error :

    >> x <- 1## A = 1


    FrL> what you don't see is that the ``spaces'' before the comment are
    FrL> no spaces: if I copy & paste the thing to a vi buffer I see:

    FrL> 	 x <- 1\xa0\xa0## A = 1

    FrL> ...

    FrL> I got the idea from sequentially deleting characters:

    >> x <- 1## A = 1
    FrL> Error: syntax error
    >> x <- 1# A = 1
    FrL> Error: syntax error
    >> x <- 1# A
    FrL> Error: syntax error
    >> x <- 1#
    FrL> Error: syntax error
    >> x <- 1
    FrL> Error: syntax error


    FrL> especially the last one look nice IMO ...

;-)  

thank you, Fritz.   
Now what about a "morale of the story" (<< probably a Germanism) ?

Don't cut and paste from e-mails any more, unless you have a really
ASCII only e-mail program or editor into which you paste.
Unfortunately, emacs doesn't seem to be among these anymore...  
aaargghh...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 29 15:25:22 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 May 2001 16:25:22 +0200
Subject: [Rd] unbelievable parser bug (PR#956)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 29 May 2001 15:11:05 +0200 (MET DST)"
References: <200105291311.PAA23674@pubhealth.ku.dk>
Message-ID: <x2itikb5bh.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> >>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:
> 
> >>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST),
> >>>>> maechler  (m) wrote:
> 
>     >> close to ``unbelievable'' but the following line is not parsed
>     >> correctly but gives a syntax error :
> 
>     >> x <- 1## A = 1
> 
> 
>     FrL> what you don't see is that the ``spaces'' before the comment are
>     FrL> no spaces: if I copy & paste the thing to a vi buffer I see:
> 
>     FrL> 	 x <- 1\xa0\xa0## A = 1
....
> 
> ;-)  
> 
> thank you, Fritz.   
> Now what about a "morale of the story" (<< probably a Germanism) ?
> 
> Don't cut and paste from e-mails any more, unless you have a really
> ASCII only e-mail program or editor into which you paste.
> Unfortunately, emacs doesn't seem to be among these anymore...  
> aaargghh...


Hmm. 0xa0 is M-SPC. These are fairly easily generated on non-English
keyboards: both Alt_L+SPC and AltGr+SPC on mine (and those three keys
are adjacent). It might make sense to force the parser to accept the
"metafied" whitespace characters?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 29 15:28:07 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 29 May 2001 16:28:07 +0200 (MET DST)
Subject: [Rd] unbelievable parser bug (PR#956)
Message-ID: <200105291428.QAA24734@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> >>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
    >> writes:
    >> 
    >> >>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST), >>>>> maechler
    >> (m) wrote:
    >> 
    >> >> close to ``unbelievable'' but the following line is not parsed >>
    >> correctly but gives a syntax error :
    >> 
    >> >> x <- 1## A = 1
    >> 
    >> 
    FrL> what you don't see is that the ``spaces'' before the comment are
    FrL> no spaces: if I copy & paste the thing to a vi buffer I see:
    >>
    FrL> x <- 1\xa0\xa0## A = 1
    PD> ....
    >>  ;-)
    >> 
    >> thank you, Fritz.  Now what about a "morale of the story" (<<
    >> probably a Germanism) ?

in the mean time I've learned:   ``moral of the story'' (is no Germanism)

    >> Don't cut and paste from e-mails any more, unless you have a really
    >> ASCII only e-mail program or editor into which you paste.
    >> Unfortunately, emacs doesn't seem to be among these anymore...
    >> aaargghh...


    PD> Hmm. 0xa0 is M-SPC. These are fairly easily generated on
    PD> non-English keyboards: both Alt_L+SPC and AltGr+SPC on mine (and
    PD> those three keys are adjacent). 

Thank you Peter;
in this cases, they text was from an e-mail (from a `R for MacOS' user who
 most proably had a SwissGerman keyboard {but probably no Emacs..})) but it
was smart Emacs (VM) dealing ``automagically'' with strange encodings ...

    PD> It might make sense to force the
    PD> parser to accept the "metafied" whitespace characters?

yes, I think that might be useful and make sense.
Compatibility with S(plus) might be a point here, but then we *do* have
locale dependent syntax anyway.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Tue May 29 18:00:26 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Tue, 29 May 2001 10:00:26 -0700
Subject: [Rd] unbelievable parser bug (PR#956)
In-Reply-To: <200105291311.PAA23674@pubhealth.ku.dk>
Message-ID: <200105291700.KAA73423@pine.frazmtn.com>


--Apple-Mail-503838107-1
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	format=flowed;
	charset=us-ascii

Martin

Re: Germanism, Not so. This is from "The Ballad of Frankie Lee
and Judas Priest" on Bob Dylan's "John Wesley Harding" album.
==========================
Well, the moral of the story,
the moral of this song
is simply that one should never be
where one does not belong
==========================
--- Jan

On Tuesday, May 29, 2001, at 06:11 AM, maechler@stat.math.ethz.ch wrote:

> thank you, Fritz.
> Now what about a "morale of the story" (<< probably a Germanism) ?
>

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/sounds/nomatter.au
========================================================

--Apple-Mail-503838107-1
Content-Transfer-Encoding: quoted-printable
Content-Type: text/enriched;
	charset=us-ascii

Martin


Re: Germanism, Not so. This is from "The Ballad of Frankie Lee=20

and Judas Priest" on Bob Dylan's "John Wesley Harding" album.

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D

Well, the moral of the story,

the moral of this song

is simply that one should never be

where one does not belong

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D

--- Jan


On Tuesday, May 29, 2001, at 06:11 AM, maechler@stat.math.ethz.ch
wrote:


<excerpt>thank you, Fritz.  =20

Now what about a "morale of the story" (<<<< probably a Germanism) ?


</excerpt>

<color><param>0000,6363,1212</param>=3D=3D=3D

Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;

US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554

phone (310)-825-9550;  fax (310)-206-5658;  email:
deleeuw@stat.ucla.edu

homepage:
=
</color><underline><color><param>1A1A,1A1A,FFFF</param>http://www.stat.ucl=
a.edu/~deleeuw</color></underline><color><param>0000,6363,1212</param>

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D

          No matter where you go, there you are. --- Buckaroo Banzai

                 =20
=
</color><underline><color><param>1A1A,1A1A,FFFF</param>http://www.stat.ucl=
a.edu/sounds/nomatter.au</color></underline><color><param>0000,6363,1212</=
param>

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D

</color>=

--Apple-Mail-503838107-1--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue May 29 20:58:30 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 29 May 2001 15:58:30 -0400
Subject: [Rd] New Package: gregmisc
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEB0B@groexmbcr02.pfizer.com>



  > From: ben@zoo.ufl.edu [mailto:ben@zoo.ufl.edu]
  > 
  > 
  >    Do you have the latest version of plotCI?  (attached 
  > below, I didn't
  > send it as an attachment for the sake of R-devel)  It uses arrows()
  > instead of segments(), which simplifies the code a bit and 
  > incidentally
  > makes it work with logarithmic axes as well (since the 
  > sizes of the bar
  > ends are specified in absolute rather than user units).

Hmmm.  I merged our two versions together.  The revised version is pasted in
below and is included in revisions 0.1.3 of gregmisc, as is an updated .Rd
file.

  > 
  >   Should this code be the first entry in the "miscellaneous code"
  > repository at CRAN that was discussed a while back?
  >
  >   By the way, something occurred to me ... my 
  > "miscellaneous packages"
  > function (which I haven't made available to CRAN yet, 
  > although I probably
  > will eventually) is called "bbmisc".  Yours is called 
  > "gregmisc".  Would
  > it make any sense to standardize these on "<lastname>misc" or
  > "<first_initial><lastname>misc" (bolkermisc, bbolkermisc) to avoid
  > confusion once we have a whole bunch of these packages?

I think that it is a better idea to create packages with coherent themes and
make it easy for people to submit single functions to them.  Perhaps we
should create:

	plotmisc    to hold things like boxplot.n(), plotCI(), plotmeans(),
...	
	modelmisc	to hold things like CI(),...
	datamisc	to hold example data sets
	...
	
and encourage contributions.
	
	
  > 
  >   Also by the way, congratulations for actually getting 
  > around to posting
  > your miscellaneous functions to CRAN!  I hope to do as well.

YES, the jump from "I wrote this useful function" to "posting to CRAN" is
too big.     Hence the idea of the "*misc" packages...

So, if you have some functions, just send along a function and a .Rd file
and I'll create the packages...

  > 
  >   Ben Bolker
  > 

=============== revised plotCI code ====================
plotCI <- function (x, y = NULL,
                    uiw, liw = uiw,   # bar widths  -OR-
                    ui, li, # bar ends
                    err='y', # bar direction, 'y' or 'x'
                    col=par("col"),
                    ylim=NULL,
                    xlim=NULL,
                    barcol=col,
                    sfrac = 0.01,
                    gap=1,
                    lwd=par("lwd"),
                    lty=par("lty"),
                    labels=FALSE,
                    add=FALSE,
                    xlab,
                    ylab,
                    ...
                    )
{
  if (is.list(x)) { 
    y <- x$y 
    x <- x$x 
  }

  if(missing(xlab))
    xlab <- deparse(substitute(x))
  
  if(missing(ylab))
    {
      if(is.null(y))
        {
          xlab  <- ""
          ylab <- deparse(substitute(x))
        }
      else
        ylab <- deparse(substitute(y))
    }

  if (is.null(y)) { 
    if (is.null(x)) 
      stop("both x and y NULL") 
    y <- as.numeric(x) 
    x <- seq(along = x) 
  }

  
  if(err=="y")
    z  <- y
  else
    z  <- x
  
  if(missing(ui))
    ui <- z + uiw
  if(missing(li)) 
    li <- z - liw
   
  if(err=="y" & is.null(ylim))
    {
      ylim <- range(c(y, ui, li), na.rm=TRUE)
    }
  else if(err=="x" & is.null(xlim))
    {
      xlim <- range(c(x, ui, li), na.rm=TRUE)
    }

    
  if(!add)
    {
      if(missing(labels) || labels==F )
        plot(x, y, ylim = ylim, xlim=xlim, col=col,
             xlab=xlab, ylab=ylab, ...)
      else
        {
          plot(x, y, ylim = ylim, xlim=xlim, col=col, type="n",
               xlab=xlab, ylab=ylab,  ...)
          text(x, y, label=labels, col=col )
        }
    }

 
  if(err=="y")
    {
      if(gap!=FALSE)
        gap <- strheight("O") * gap
      smidge <- par("fin")[1] * sfrac

      # draw upper bar
      if(!is.null(li))
          arrows(x , li, x, pmax(y-gap,li), col=barcol, lwd=lwd,
                 lty=lty, angle=90, length=smidge, code=1)
      # draw lower bar
      if(!is.null(ui))
          arrows(x , ui, x, pmin(y+gap,ui), col=barcol,
                 lwd=lwd, lty=lty, angle=90, length=smidge, code=1)
    }
  else
    {
      if(gap!=FALSE)
        gap <- strwidth("O") * gap
      smidge <- par("fin")[2] * sfrac

      # draw left bar
      if(li!=NULL)
        arrows(li, y, pmax(x-gap,li), y, col=col, lwd=lwd, lty=slty,
               angle=90, length=smidge, code=1)
      if(ui!=NULL)
        arrows(ui, y, pmin(x+gap,ui), y, col=col, lwd=lwd, lty=slty,
               angle=90, length=smidge, code=1)
      
    }
      
    

invisible(list(x = x, y = y)) 
} 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 29 23:35:00 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 May 2001 00:35:00 +0200
Subject: [Rd] deriv (PR#953)
In-Reply-To: tlumley@u.washington.edu's message of "Mon, 28 May 2001 22:58:20 +0200 (MET DST)"
References: <200105282058.WAA13802@pubhealth.ku.dk>
Message-ID: <x2ae3viy23.fsf@blueberry.kubism.ku.dk>

tlumley@u.washington.edu writes:

> The first bug is very strange and I suspect there's something going on in
> the memory management.  Supplying a function as the third argument should
> cause the body of the function to be replaced by the derivative. This
> sometimes works, but doesn't depend on the function in any simple way.
> 
> It seems to depend on how new the function is. With a new anonymous
> function it never works, but with a base function like lm or log it always
> works:
> 
>  ## works
>  deriv(expression(sin(cos(x) * y)), c("x","y"), log)
>  ## identical function
>  LOG<-function (x, base = exp(1))
>     if (missing(base)) .Internal(log(x)) else .Internal(log(x, base))
>  ## doesn't work
>  deriv(expression(sin(cos(x) * y)), c("x","y"), LOG)
> 
> Creating a new function somewhere else in the search path doesn't help
>  assign("a",function(x,y){},pos=3)
>  # doesn't work
>  deriv(expression(sin(cos(x) * y)), c("x","y"), a)
> 
> but copying a loaded function does
> 
>   library(tcltk)
>   a<-tkbind
>   #works
>   deriv(expression(sin(cos(x) * y)), c("x","y"), a)

<grin> 
You had me going there too.

Try stripping the "source" attribute from the template functions....
(or from the output of deriv() for that matter). I'll give it a think
how to do that inside the deriv function so as to preserve user
sanity.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue May 29 23:44:51 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 29 May 2001 15:44:51 -0700 (PDT)
Subject: [Rd] deriv (PR#953)
In-Reply-To: <x2ae3viy23.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105291539050.107374-100000@homer23.u.washington.edu>

On 30 May 2001, Peter Dalgaard BSA wrote:
>
> <grin>
> You had me going there too.
>
> Try stripping the "source" attribute from the template functions....
> (or from the output of deriv() for that matter). I'll give it a think
> how to do that inside the deriv function so as to preserve user
> sanity.

Ouch. Perhaps SET_BODY should remove the "source" attribute?

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 30 00:09:21 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 May 2001 01:09:21 +0200
Subject: [Rd] deriv (PR#953)
In-Reply-To: Thomas Lumley's message of "Tue, 29 May 2001 15:44:51 -0700 (PDT)"
References: <Pine.A41.4.33.0105291539050.107374-100000@homer23.u.washington.edu>
Message-ID: <x28zjfzra6.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On 30 May 2001, Peter Dalgaard BSA wrote:
> >
> > <grin>
> > You had me going there too.
> >
> > Try stripping the "source" attribute from the template functions....
> > (or from the output of deriv() for that matter). I'll give it a think
> > how to do that inside the deriv function so as to preserve user
> > sanity.
> 
> Ouch. Perhaps SET_BODY should remove the "source" attribute?

Hmm maybe, but it seems to me that elementary functions like that
should not do anything complicated, and body()<- and args() will
already lose *all* attributes. (The former might actually be
considered a buglet, but given the amount of use body()<- gets, I
think we can live with it).

I think I have another solution for deriv.c. That is, I thought I had,
but it didn't quite work...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Wed May 30 14:36:23 2001
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Wed, 30 May 2001 09:36:23 -0400
Subject: [Rd] new book
Message-ID: <20010530093623.L10945@jimmy.harvard.edu>

Just thought I would mention that there is a new O'Reilly book out,
"Developing Bioinformatics Computer Skills", which is ok, pretty
superficial about some things but at least it lets you know what is
happening and where.
R gets a few pages in there, 394-396, mostly nice press and accurate
except that Bill Venables (hi Bill) may be surprised to find out that
he is a member of the core development team.
  Robert
ps: they also have an Xgobi reference
-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed May 30 15:12:55 2001
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 30 May 2001 16:12:55 +0200 (CEST)
Subject: [Rd] new book
In-Reply-To: <20010530093623.L10945@jimmy.harvard.edu>
Message-ID: <XFMail.20010530161255.plummer@iarc.fr>

On 30-May-2001 Robert Gentleman wrote:
> Just thought I would mention that there is a new O'Reilly book out,
> "Developing Bioinformatics Computer Skills", which is ok, pretty
> superficial about some things but at least it lets you know what is
> happening and where.
> R gets a few pages in there, 394-396, mostly nice press and accurate
> except that Bill Venables (hi Bill) may be surprised to find out that
> he is a member of the core development team.
>   Robert
> ps: they also have an Xgobi reference

This came up a couple of weeks ago on Slashdot (which I should really
stop reading).  I got the impression from the ensuing discussion that
it was targetted at biologists,but if you found it useful I shall pick
up a copy.  In the same discussion, the monograph "Biological sequence
analysis: probabilistic methods of proteins and nucleic acids" by Durbin
(ed) was highly recommended by some people.  Do you have this?

Here is a link to the O'Reilly site which contains contents, and a
sample chapter.

http://www.oreilly.com/catalog/bioskills/

I remember buying an O'Reilly book called "The whole internet: a users
guide and catalogue". I wonder if this one will have an even shorter
shelf life.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed May 30 15:31:48 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 30 May 2001 07:31:48 -0700
Subject: [Rd] new book
In-Reply-To: Martyn Plummer's message of "Wed, 30 May 2001 16:12:55 +0200 (CEST)"
References: <XFMail.20010530161255.plummer@iarc.fr>
Message-ID: <87bsoa52nf.fsf@jeeves.blindglobe.net>

>>>>> "MP" == Martyn Plummer <plummer@iarc.fr> writes:

    MP> This came up a couple of weeks ago on Slashdot (which I should
    MP> really stop reading).  I got the impression from the ensuing
    MP> discussion that it was targetted at biologists,but if you
    MP> found it useful I shall pick up a copy.  In the same
    MP> discussion, the monograph "Biological sequence analysis:
    MP> probabilistic methods of proteins and nucleic acids" by Durbin
    MP> (ed) was highly recommended by some people.  Do you have this?

    MP> Here is a link to the O'Reilly site which contains contents,
    MP> and a sample chapter.

    MP> http://www.oreilly.com/catalog/bioskills/

    MP> I remember buying an O'Reilly book called "The whole internet:
    MP> a users guide and catalogue". I wonder if this one will have
    MP> an even shorter shelf life.

I commented privately, but since this comes up, I'll comment again: if
you know your way around genetic programs, perl and bioperl, and
understand general scripting tools, and have a smattering of
informatics knowledge, the book isn't too useful.  I've got a
protein-folding friend who plans on using it to teach a comp bio
course in microbiology; he considers the skills mentioned in the book
to be the bare-minimum for that, though it's short on theory.

The Durbin book is a nice intro to current state of the art DNA and
protein sequencing methods, but not much more (of course, it lives up
to its title).  That being said, I found it incredibly useful for
seeing what has been done recently.  YMMV.

I think part of the problem, and this is seen by those who recommend
the Durbin book, is that there are a number of different ways of
looking at the "bioinformatics" problem.  Problematically, you've got
something like:

A. Large quantities of data, and handling, storage, backup
B. Annotations and external (data) linkages
C. Computational Biology
D. Statistical issues (experimental design/analysis and exploratory
   approaches; 
E. Combinations of the above two, including such topics (one of many
   examples): stochastic DE modelling using mixed effects models.

and scientifically, you've got one or more of:

1. sequencing (DNA and/or protein)
2. protein structure (secondary/tertiary, based on the above)
3. gene expression arrays of many forms (cDNA, membrane, gold,
   oligios). 
4. SNPs 
5. genetics and evolutionary biology

and then there is the application area (cancer, HIV, other chronic
diseases; comparative studies and animal/plant/non-human organism
models, etc).

The classifications that I use are even up for grabs, depending on who
you are and who you talk with; it's just 2 possible views of this high
buzzword content area, sigh.  I know I've left out a few areas, here.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Wed May 30 15:45:44 2001
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Wed, 30 May 2001 10:45:44 -0400
Subject: [Rd] new book
In-Reply-To: <87bsoa52nf.fsf@jeeves.blindglobe.net>; from A.J. Rossini on Wed, May 30, 2001 at 07:31:48AM -0700
References: <XFMail.20010530161255.plummer@iarc.fr> <87bsoa52nf.fsf@jeeves.blindglobe.net>
Message-ID: <20010530104544.O10945@jimmy.harvard.edu>

On Wed, May 30, 2001 at 07:31:48AM -0700, A.J. Rossini wrote:
> >>>>> "MP" == Martyn Plummer <plummer@iarc.fr> writes:
> 
>     MP> This came up a couple of weeks ago on Slashdot (which I should
>     MP> really stop reading).  I got the impression from the ensuing
>     MP> discussion that it was targetted at biologists,but if you
>     MP> found it useful I shall pick up a copy.  In the same
>     MP> discussion, the monograph "Biological sequence analysis:
>     MP> probabilistic methods of proteins and nucleic acids" by Durbin
>     MP> (ed) was highly recommended by some people.  Do you have this?
> 
>     MP> Here is a link to the O'Reilly site which contains contents,
>     MP> and a sample chapter.
> 
>     MP> http://www.oreilly.com/catalog/bioskills/
> 
>     MP> I remember buying an O'Reilly book called "The whole internet:
>     MP> a users guide and catalogue". I wonder if this one will have
>     MP> an even shorter shelf life.
> 
> I commented privately, but since this comes up, I'll comment again: if
> you know your way around genetic programs, perl and bioperl, and
> understand general scripting tools, and have a smattering of
> informatics knowledge, the book isn't too useful.  I've got a
> protein-folding friend who plans on using it to teach a comp bio
> course in microbiology; he considers the skills mentioned in the book
> to be the bare-minimum for that, though it's short on theory.
> 

   I agree, but for those who are just getting started -- especially
   statistics grad students (or biology grad students or comp. sci) it
   can be very useful.
   I am actually a bit tempted to use it as a text for 1st year
   MSc/PhD's here, intro to stat computing. At least it gives them
   some examples that are relevant (and most know no Unix and no Perl
   and no....)

> The Durbin book is a nice intro to current state of the art DNA and
> protein sequencing methods, but not much more (of course, it lives up
> to its title).  That being said, I found it incredibly useful for
> seeing what has been done recently.  YMMV.
> 
  Yes, and Gusfield -- Algorithms on Strings Trees and Sequences is
  reasonable for what it does as well.

> I think part of the problem, and this is seen by those who recommend
> the Durbin book, is that there are a number of different ways of
> looking at the "bioinformatics" problem.  Problematically, you've got
> something like:
> 
> A. Large quantities of data, and handling, storage, backup
> B. Annotations and external (data) linkages

  I know very little about B. and found that DBCS at least gives some
  idea of what is available, what it looks like and how you might
  begin to deal with it.

  Yes, the field is developing so rapidly that it is useful now and
  won't be as good in 6 months and probably will be useless in 12 or
  18, but then so will the machine I'm typing at. 

> C. Computational Biology
> D. Statistical issues (experimental design/analysis and exploratory
>    approaches; 
> E. Combinations of the above two, including such topics (one of many
>    examples): stochastic DE modelling using mixed effects models.
> 
> and scientifically, you've got one or more of:
> 
> 1. sequencing (DNA and/or protein)
> 2. protein structure (secondary/tertiary, based on the above)
> 3. gene expression arrays of many forms (cDNA, membrane, gold,
>    oligios). 
> 4. SNPs 
> 5. genetics and evolutionary biology
> 
> and then there is the application area (cancer, HIV, other chronic
> diseases; comparative studies and animal/plant/non-human organism
> models, etc).
> 
> The classifications that I use are even up for grabs, depending on who
> you are and who you talk with; it's just 2 possible views of this high
> buzzword content area, sigh.  I know I've left out a few areas, here.
> 
> best,
> -tony
> 
> -- 
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------- (wednesday/friday is unknown) --------
> FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
> UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed May 30 15:55:20 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 30 May 2001 07:55:20 -0700
Subject: [Rd] new book
In-Reply-To: Robert Gentleman's message of "Wed, 30 May 2001 10:45:44 -0400"
References: <XFMail.20010530161255.plummer@iarc.fr>
 <87bsoa52nf.fsf@jeeves.blindglobe.net>
 <20010530104544.O10945@jimmy.harvard.edu>
Message-ID: <87vgmi3mzr.fsf@jeeves.blindglobe.net>

>>>>> "RG" == Robert Gentleman <rgentlem@jimmy.harvard.edu> writes:

    >> I commented privately, but since this comes up, I'll comment
    >> again: if you know your way around genetic programs, perl and
    >> bioperl, and understand general scripting tools, and have a
    >> smattering of informatics knowledge, the book isn't too useful.

    RG>    I agree, but for those who are just getting started --
    RG> especially statistics grad students (or biology grad students
    RG> or comp. sci) it can be very useful.  I am actually a bit
    RG> tempted to use it as a text for 1st year MSc/PhD's here, intro
    RG> to stat computing. At least it gives them some examples that
    RG> are relevant (and most know no Unix and no Perl and no....)

To clarify, I would agree that this is a good use of the book.  That
isn't the audience that I described it as "not very interesting for". 

However, a good number of people on R-devel are beyond that level, in
most respects (if this had been R-help, on the other hand...).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Wed May 30 17:45:14 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Wed, 30 May 2001 18:45:14 +0200 (MET DST)
Subject: [Rd] Rcmd REMOVE does not allow --library argument (PR#957)
Message-ID: <200105301645.SAA09749@pubhealth.ku.dk>

This is in Windows 98.  The problem exists in both rw1021 and rw1023, using
ActiveState Perl builds 620 and 626:

C:\>Rcmd REMOVE --library=C:/R/Rlibs RBMDS
Unknown option: library
Usage: Rcmd REMOVE [options] pkgs

Remove the add-on packages specified by pkgs from the default library
tree (/library) or the tree specified via `--library'.

Options:
  -l, --library=LIB     remove packages from library tree LIB
  -v, --version         print version info and exit

Report bugs to <r-bugs@r-project.org>.


The fix is to change line 37 in rw1023/bin/Remove:
from
my @knownoptions = ("help|h", "version|v");
to
my @knownoptions = ("help|h", "library|l:s", "version|v");

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 30 17:51:42 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 30 May 2001 18:51:42 +0200 (MET DST)
Subject: [Rd] Rcmd REMOVE does not allow --library argument (PR#957)
Message-ID: <200105301651.SAA09825@pubhealth.ku.dk>

On Wed, 30 May 2001 Setzer.Woodrow@epamail.epa.gov wrote:

Thanks, fixed.

> This is in Windows 98.  The problem exists in both rw1021 and rw1023, using
> ActiveState Perl builds 620 and 626:
>
> C:\>Rcmd REMOVE --library=C:/R/Rlibs RBMDS
> Unknown option: library
> Usage: Rcmd REMOVE [options] pkgs
>
> Remove the add-on packages specified by pkgs from the default library
> tree (/library) or the tree specified via `--library'.
>
> Options:
>   -l, --library=LIB     remove packages from library tree LIB
>   -v, --version         print version info and exit
>
> Report bugs to <r-bugs@r-project.org>.
>
>
> The fix is to change line 37 in rw1023/bin/Remove:
> from
> my @knownoptions = ("help|h", "version|v");
> to
> my @knownoptions = ("help|h", "library|l:s", "version|v");
>
> R. Woodrow Setzer, Jr.                                            Phone:
> (919) 541-0128
> Experimental Toxicology Division                       Fax:  (919) 541-5394
> Pharmacokinetics Branch
> NHEERL MD-74; US EPA; RTP, NC 27711
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed May 30 20:00:11 2001
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Wed, 30 May 2001 21:00:11 +0200 (MET DST)
Subject: [Rd] zero-extent matrices (PR#958)
Message-ID: <200105301900.VAA10463@pubhealth.ku.dk>


In 1.2.3
  matrix(nrow=10,ncol=0)%*%numeric(0)
returns a 10x1 matrix of 0s

In todays 1.3 it returns a 10x1 matrix of miscellaneous junk.

While both are probably wrong the latter is causing problems for survival.

	-thomas

platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status   Under development (unstable)
major    1
minor    3.0
year     2001
month    05
day      30
language R



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 30 20:13:30 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 30 May 2001 15:13:30 -0400
Subject: [Rd] perl 5.6.0
Message-ID: <3B15465A.78A367B8@bank-banque-canada.ca>

I am trying Perl 5.6.0 on Solaris and having trouble building R. It is
very possible our setup is not complete, but before I drive my system
adminstrator crazy, are there known problems building R (1.2.3 or devel)
using Perl 5.6.0?  Configure works ok, the first make problem is below.

Thanks,
Paul Gilbert
_______
make[2]: Entering directory
`/home/mfa5/gilp/R-versions/R-devel/src/library'
Can't locate File/Basename.pm in @INC (@INC contains:
/home/mfa5/gilp/R-versions/R-devel/share/perl
/apps/asd/unix/gnu/perl-5.6.0/lib/5.6.0/sun4-solaris
/apps/asd/unix/gnu/perl-5.6.0/lib/5.6.0
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl/5.6.0/sun4-solaris
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl/5.6.0
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl .) at
/home/mfa5/gilp/R-versions/R-devel/bin/build-help line 21.
BEGIN failed--compilation aborted at
/home/mfa5/gilp/R-versions/R-devel/bin/build-help line 21.
Can't locate File/Basename.pm in @INC (@INC contains:
/home/mfa5/gilp/R-versions/R-devel/share/perl
/apps/asd/unix/gnu/perl-5.6.0/lib/5.6.0/sun4-solaris
/apps/asd/unix/gnu/perl-5.6.0/lib/5.6.0
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl/5.6.0/sun4-solaris
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl/5.6.0
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl .) at
/home/mfa5/gilp/R-versions/R-devel/bin/Rd2contents line 3.
BEGIN failed--compilation aborted at
/home/mfa5/gilp/R-versions/R-devel/bin/Rd2contents line 3.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 30 20:31:45 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 May 2001 21:31:45 +0200
Subject: [Rd] zero-extent matrices (PR#958)
In-Reply-To: tlumley@u.washington.edu's message of "Wed, 30 May 2001 21:00:11 +0200 (MET DST)"
References: <200105301900.VAA10463@pubhealth.ku.dk>
Message-ID: <x24ru2y6ou.fsf@blueberry.kubism.ku.dk>

tlumley@u.washington.edu writes:

> In 1.2.3
>   matrix(nrow=10,ncol=0)%*%numeric(0)
> returns a 10x1 matrix of 0s
> 
> In todays 1.3 it returns a 10x1 matrix of miscellaneous junk.
> 
> While both are probably wrong the latter is causing problems for survival.

Acutally, I'd say that the 1.2.3 version is correct (sums over empty
sets being zero is a standard convention).

Hmm, 1.3.0 as of yesterday gives 10 zeros for me as does the one
updated and compiled about 18:00 CET...
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed May 30 20:36:56 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 30 May 2001 12:36:56 -0700 (PDT)
Subject: [Rd] zero-extent matrices (PR#958)
In-Reply-To: <x24ru2y6ou.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105301230000.130198-100000@homer40.u.washington.edu>

On 30 May 2001, Peter Dalgaard BSA wrote:

> tlumley@u.washington.edu writes:
>
> > In 1.2.3
> >   matrix(nrow=10,ncol=0)%*%numeric(0)
> > returns a 10x1 matrix of 0s
> >
> > In todays 1.3 it returns a 10x1 matrix of miscellaneous junk.
> >
> > While both are probably wrong the latter is causing problems for survival.
>
> Acutally, I'd say that the 1.2.3 version is correct (sums over empty
> sets being zero is a standard convention).

I was thinking that a 10x0 matrix times a 0x0 matrix should be a 10x0
matrix

>
> Hmm, 1.3.0 as of yesterday gives 10 zeros for me as does the one
> updated and compiled about 18:00 CET...

Initially it will give zero. The two operands contain pointers to the R
heap and the BLAS call is treating the objects pointed to as length 10 and
length 1 respectively and multiplying whatever happens to be there.
Initially this will be zeros.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed May 30 20:46:04 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 30 May 2001 12:46:04 -0700 (PDT)
Subject: [Rd] zero-extent matrices (PR#958)
In-Reply-To: <Pine.A41.4.33.0105301230000.130198-100000@homer40.u.washington.edu>
Message-ID: <Pine.A41.4.33.0105301244450.130198-100000@homer40.u.washington.edu>

On Wed, 30 May 2001, Thomas Lumley wrote:
>
> Initially it will give zero. The two operands contain pointers to the R
> heap and the BLAS call is treating the objects pointed to as length 10 and
> length 1 respectively and multiplying whatever happens to be there.
> Initially this will be zeros.
>

Actually I was wrong about the reason: It doesn't call BLAS. The junk is
whatever was sitting in the piece of the vector heap where the return
value was allocated.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Thu May 31 03:53:28 2001
From: Bill.Venables@CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Thu, 31 May 2001 12:53:28 +1000
Subject: [Rd] new book
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A99C1F@Roper-CV.qld.cmis.csiro.au>

Yes, Robert, I certainly am surprised.  I didn't think I was particularly a
"hard core" sort of person...  I guess I will have to look at it now.  :-S

Bill.

-----Original Message-----
From: Robert Gentleman [mailto:rgentlem@jimmy.harvard.edu]
Sent: Wednesday, 30 May 2001 11:36 PM
To: r-devel@stat.math.ethz.ch
Subject: [Rd] new book


Just thought I would mention that there is a new O'Reilly book out,
"Developing Bioinformatics Computer Skills", which is ok, pretty
superficial about some things but at least it lets you know what is
happening and where.
R gets a few pages in there, 394-396, mostly nice press and accurate
except that Bill Venables (hi Bill) may be surprised to find out that
he is a member of the core development team.
  Robert
ps: they also have an Xgobi reference
-- 
+---------------------------------------------------------------------------
+
| Robert Gentleman                 phone : (617) 632-5250
|
| Associate Professor              fax:   (617)  632-2444
|
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu
|
+---------------------------------------------------------------------------
+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 07:36:02 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 31 May 2001 07:36:02 +0100 (BST)
Subject: [Rd] zero-extent matrices (PR#958)
In-Reply-To: <Pine.A41.4.33.0105301230000.130198-100000@homer40.u.washington.edu>
Message-ID: <Pine.GSO.4.31.0105310733500.6529-100000@auk.stats>

On Wed, 30 May 2001, Thomas Lumley wrote:

> On 30 May 2001, Peter Dalgaard BSA wrote:
>
> > tlumley@u.washington.edu writes:
> >
> > > In 1.2.3
> > >   matrix(nrow=10,ncol=0)%*%numeric(0)
> > > returns a 10x1 matrix of 0s
> > >
> > > In todays 1.3 it returns a 10x1 matrix of miscellaneous junk.
> > >
> > > While both are probably wrong the latter is causing problems for survival.
> >
> > Acutally, I'd say that the 1.2.3 version is correct (sums over empty
> > sets being zero is a standard convention).
>
> I was thinking that a 10x0 matrix times a 0x0 matrix should be a 10x0
> matrix

It's a 10x0 matrix times a 0x1 matrix.  A length-n vector gets promoted to
a nx1 matrix, and that applies for n=0 too:

> dim(as.matrix(numeric(0)))
[1] 0 1


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu May 31 08:21:05 2001
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 31 May 2001 09:21:05 +0200 (MET DST)
Subject: [Rd] Re: R-WinEdt (PR#959)
Message-ID: <200105310721.JAA13287@pubhealth.ku.dk>

John Maindonald wrote:
> 
> Hello Uwe -
> I have been making some use of R-WinEdt.  I have just installed
> version 1.3.  For the most part it works fine.  An annoyance is
> however that when I type in data(), Windows comes up with an error
> message such as
> 
> File c:\windows\TEMP\R.5346 not found.
> 
> This happened with the earlier version also, which is why I
> upgraded.  It happens under Windows ME at home as well
> as under Windows 98 at work.  I am running R for windows 1.23
> 
> I suspect there is some simple action I can take to allow
> data() to work, but it is not clear to me what.


This is not a bug of R-WinEdt, but of R, so also a copy to R-Bugs.

The problem happens, if you set  pager != internal  in options(), e.g.:
  options(pager = "notepad")

After that,  data()  results in an error message like yours:
   File c:\windows\TEMP\R.5346 not found

The real error occurs in show.data() [or on.exit() ?]:

If you comment out the line 
    on.exit(file.remove(file))
in the function show.data(), showing the file works as expected, but
results in not deleting the temp-files.

file.show(file, delete.file = TRUE)  also doesn't delete the file.

Uwe Ligges



--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From John.Peters@tip.csiro.au  Thu May 31 08:27:58 2001
From: John.Peters@tip.csiro.au (John.Peters@tip.csiro.au)
Date: Thu, 31 May 2001 09:27:58 +0200 (MET DST)
Subject: [Rd] format() of a character matrix converts to vector (PR#960)
Message-ID: <200105310727.JAA13483@pubhealth.ku.dk>


Using R 1.2.3 under both windows 95 and linux, format() works fine on a 
numerical matrix, but converts a character matrix to a vector, apparently 
omitting to convert it back to a matrix:

> a_matrix(c("axx","b","c","d","e","f","g","h"),nrow=2)

> a
     [,1]  [,2] [,3] [,4]
[1,] "axx" "c"  "e"  "g" 
[2,] "b"   "d"  "f"  "h" 
 
> format(a)
[1] "axx" "b  " "c  " "d  " "e  " "f  " "g  " "h  "

> format(a,justify="right")
[1] "axx" "  b" "  c" "  d" "  e" "  f" "  g" "  h"

> format(a,justify="left")
[1] "axx" "b  " "c  " "d  " "e  " "f  " "g  " "h  "

> format(a,justify="none")
     [,1]  [,2] [,3] [,4]
[1,] "axx" "c"  "e"  "g" 
[2,] "b"   "d"  "f"  "h" 


Many thanks

----------------------------------------------------------------------------
John Peters
CSIRO National Measurement Laboratory
PO Box 218                                Phone:    +61 2 9413 7503
Lindfield NSW 2070                        Fax:      +61 2 9413 7202
Australia                                 Internet: John.Peters@tip.CSIRO.AU
----------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 09:45:15 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 31 May 2001 10:45:15 +0200 (MET DST)
Subject: [Rd] Re: R-WinEdt (PR#959)
Message-ID: <200105310845.KAA15095@pubhealth.ku.dk>

On Thu, 31 May 2001 ligges@statistik.uni-dortmund.de wrote:

> John Maindonald wrote:
> >
> > Hello Uwe -
> > I have been making some use of R-WinEdt.  I have just installed
> > version 1.3.  For the most part it works fine.  An annoyance is
> > however that when I type in data(), Windows comes up with an error
> > message such as
> >
> > File c:\windows\TEMP\R.5346 not found.
> >
> > This happened with the earlier version also, which is why I
> > upgraded.  It happens under Windows ME at home as well
> > as under Windows 98 at work.  I am running R for windows 1.23
> >
> > I suspect there is some simple action I can take to allow
> > data() to work, but it is not clear to me what.
>
>
> This is not a bug of R-WinEdt, but of R, so also a copy to R-Bugs.
>
> The problem happens, if you set  pager != internal  in options(), e.g.:
>   options(pager = "notepad")
>
> After that,  data()  results in an error message like yours:
>    File c:\windows\TEMP\R.5346 not found
>
> The real error occurs in show.data() [or on.exit() ?]:
>
> If you comment out the line
>     on.exit(file.remove(file))
> in the function show.data(), showing the file works as expected, but
> results in not deleting the temp-files.

That line is no longer in the sources.


> file.show(file, delete.file = TRUE)  also doesn't delete the file.

Right. That's because there is no way to know when e.g. notepad has
finished with the file.  Actually, one maybe could with notepad,
but not with multi-file editors like pfe (or winedt?)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 09:48:27 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 31 May 2001 10:48:27 +0200 (MET DST)
Subject: [Rd] format() of a character matrix converts to vector (PR#960)
Message-ID: <200105310848.KAA15153@pubhealth.ku.dk>

Thanks.  There is an easy fix.  In format.default

    f.char <- function(x, justify) {
	if(length(x) <= 1) return(x)
	nc <- nchar(x)
	w <- max(nc)
	all <- substring(paste(rep(" ", w), collapse=""), 1, w-nc)
	res <- if(justify == "left") paste(x, all, sep="")
	else paste(all, x, sep="")
        dim(res) <- dim(x)
        res
    }



On Thu, 31 May 2001 John.Peters@tip.csiro.au wrote:

>
> Using R 1.2.3 under both windows 95 and linux, format() works fine on a
> numerical matrix, but converts a character matrix to a vector, apparently
> omitting to convert it back to a matrix:
>
> > a_matrix(c("axx","b","c","d","e","f","g","h"),nrow=2)
>
> > a
>      [,1]  [,2] [,3] [,4]
> [1,] "axx" "c"  "e"  "g"
> [2,] "b"   "d"  "f"  "h"
>
> > format(a)
> [1] "axx" "b  " "c  " "d  " "e  " "f  " "g  " "h  "
>
> > format(a,justify="right")
> [1] "axx" "  b" "  c" "  d" "  e" "  f" "  g" "  h"
>
> > format(a,justify="left")
> [1] "axx" "b  " "c  " "d  " "e  " "f  " "g  " "h  "
>
> > format(a,justify="none")
>      [,1]  [,2] [,3] [,4]
> [1,] "axx" "c"  "e"  "g"
> [2,] "b"   "d"  "f"  "h"
>
>
> Many thanks
>
> ----------------------------------------------------------------------------
> John Peters
> CSIRO National Measurement Laboratory
> PO Box 218                                Phone:    +61 2 9413 7503
> Lindfield NSW 2070                        Fax:      +61 2 9413 7202
> Australia                                 Internet: John.Peters@tip.CSIRO.AU
> ----------------------------------------------------------------------------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From beebe@math.utah.edu  Thu May 31 16:19:37 2001
From: beebe@math.utah.edu (beebe@math.utah.edu)
Date: Thu, 31 May 2001 17:19:37 +0200 (MET DST)
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
Message-ID: <200105311519.RAA21000@pubhealth.ku.dk>

[This is not a bug report, just a suggestion.]

With complex packages, it is often useful to maintain multiple
versions installed, for bug checking, and performance comparisons, and
for developers, for a development history (e.g., I have about 30
versions of ghostscript, whose development I contribute to, and I have
on several occasions run tests files on with each them to find out
when a change in behavior was introduced).

The common way to do this is to suffix a version number to the
executable and any file tree(s) that it requires.

The R-1.2.3 release does not currently do this, but it looks like only
a couple of lines of changes are needed to accomplish the job, and
I've done so locally manually.

(1) In the R script, change

	R_HOME_DIR=/usr/local/lib/R

    to

	R_HOME_DIR=/usr/local/lib/R-1.2.3

    and name the tree that way during installation.

(2) At installation time, first install the executable as
    /usr/local/bin/R-1.2.3, then remove /usr/local/bin/R,
    then do "ln -s R-1.2.3 /usr/local/bin/R" or
    "ln R-1.2.3 /usr/local/bin/R", in that order.  This
    ensures that any existing version of R remains on the system,
    accessible as R-x.y.z.

[Obviously, in the above, "/usr/local" is really "$(prefix)".]

I suggest that the next round of R distribution consider incorporating
this change.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- Center for Scientific Computing       FAX: +1 801 585 1640, +1 801 581 4148 -
- University of Utah                    Internet e-mail: beebe@math.utah.edu  -
- Department of Mathematics, 322 INSCC      beebe@acm.org  beebe@computer.org -
- 155 S 1400 E RM 233                       beebe@ieee.org                    -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -
-------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 17:07:23 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 31 May 2001 18:07:23 +0200 (MET DST)
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
Message-ID: <200105311607.SAA21389@pubhealth.ku.dk>

On Thu, 31 May 2001 beebe@math.utah.edu wrote:

> [This is not a bug report, just a suggestion.]
>
> With complex packages, it is often useful to maintain multiple
> versions installed, for bug checking, and performance comparisons, and
> for developers, for a development history (e.g., I have about 30
> versions of ghostscript, whose development I contribute to, and I have
> on several occasions run tests files on with each them to find out
> when a change in behavior was introduced).
>
> The common way to do this is to suffix a version number to the
> executable and any file tree(s) that it requires.
>
> The R-1.2.3 release does not currently do this, but it looks like only
> a couple of lines of changes are needed to accomplish the job, and
> I've done so locally manually.
>
> (1) In the R script, change
>
> 	R_HOME_DIR=/usr/local/lib/R
>
>     to
>
> 	R_HOME_DIR=/usr/local/lib/R-1.2.3
>
>     and name the tree that way during installation.
>
> (2) At installation time, first install the executable as
>     /usr/local/bin/R-1.2.3, then remove /usr/local/bin/R,
>     then do "ln -s R-1.2.3 /usr/local/bin/R" or
>     "ln R-1.2.3 /usr/local/bin/R", in that order.  This
>     ensures that any existing version of R remains on the system,
>     accessible as R-x.y.z.
>
> [Obviously, in the above, "/usr/local" is really "$(prefix)".]
>
> I suggest that the next round of R distribution consider incorporating
> this change.

There is a serious problem with that. All the user-installed packages in
/usr/local/lib/R-1.2.3/library disappear from view on upgrade.  They would
need to be migrated.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu May 31 17:52:54 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 31 May 2001 09:52:54 -0700
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Thu, 31 May 2001 18:07:23 +0200 (MET DST)"
References: <200105311607.SAA21389@pubhealth.ku.dk>
Message-ID: <87lmnde9zt.fsf@jeeves.blindglobe.net>

>>>>> "r" == ripley  <ripley@stats.ox.ac.uk> writes:

    r> There is a serious problem with that. All the user-installed
    r> packages in /usr/local/lib/R-1.2.3/library disappear from view
    r> on upgrade.  They would need to be migrated.

One thought would be to emulate XEmacs in this regard -- lisp packages
are in equivalent of /usr/local/lib/R, while version-specific code is
in the equivalent of /usr/local/lib/R-version.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xyzzy@speakeasy.org  Thu May 31 18:48:26 2001
From: xyzzy@speakeasy.org (Trent Piepho)
Date: Thu, 31 May 2001 10:48:26 -0700 (PDT)
Subject: [Rd] paper size in postscript driver
Message-ID: <Pine.LNX.4.04.10105310901380.2031-100000@xyzzy.dsl.speakeasy.net>

I have a non-PS printer setup to print under linux using ghostscript as a
filter.  This printer has two paper trays, one has letter paper, the other
tabloid size paper.  If I print from a program that uses a PPD file to
configure the printer, like StarOffice or The Gimp, I can select the paper
size from a nifty list.  If I select letter size, the printer print with
paper from the letter tray.  If I select tabloid, the printer will use
the tabloid tray.

I added tabloid to R's list of supported paper sizes, which was pretty
trivial.  If I view the file with gv/ghostscript, I get a tabloid sized window
on the screen with my plot.  But if I print, the printer uses the letter tray
and the plot is cropped to the letter size paper.

I looked postscript from staroffice vs R, and noticed these lines:
%%BeginSetup
%%BeginFeature: *PageRegion Tabloid

        << /PageSize [792 1224] /ImagingBBox null >> setpagedevice
%%EndFeature
%%EndSetup

These follow the "%%EndProlog" line in the postscript file.  If I add these
lines to an R produced tabloid sized ps file, it will print on tabloid paper!

It doesn't view properly in gv though.  When looking at a plot in landscape
orientation, the right edge is cut off.  Tabloid is 11" x 17", and it looks
like the right 6" is cut off, as if the landscape plot is being clipped to a
bounding box of portrait oriented paper.  The plots do not get cut off when
viewed if I don't add that bit of code.  The plots do print fine, which is odd
since both the printer and gv use ghostscript to process the postscript file. 

Maybe some postscript guru could add this feature to R's PS driver?  It looks
like some kind of setpagedevice call is needed to tell the printer what paper
size to use.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Thu May 31 21:07:52 2001
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Thu, 31 May 2001 22:07:52 +0200 (MET DST)
Subject: [Rd] documentation for image(): zlim update (PR#962)
Message-ID: <200105312007.WAA22407@pubhealth.ku.dk>

Full_Name: Stephen Eglen
Version: 1.2.3
OS: Linux
Submission from: (NULL) (128.252.204.186)


The help file for image() currently says:

     The way in which `zlim' is divided into colours will be changed
     for the next major release (1.1.0) to divide the range into
     equal-length intervals.

According to NEWS, this was indeed changed in 1.1.0, so perhaps it can 
now be removed from the help?

Stephen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 22:55:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 31 May 2001 22:55:17 +0100 (BST)
Subject: [Rd] paper size in postscript driver
In-Reply-To: <Pine.LNX.4.04.10105310901380.2031-100000@xyzzy.dsl.speakeasy.net>
Message-ID: <Pine.GSO.4.31.0105312248180.22000-100000@auk.stats>

On Thu, 31 May 2001, Trent Piepho wrote:

> I have a non-PS printer setup to print under linux using ghostscript as a
> filter.  This printer has two paper trays, one has letter paper, the other
> tabloid size paper.  If I print from a program that uses a PPD file to
> configure the printer, like StarOffice or The Gimp, I can select the paper
> size from a nifty list.  If I select letter size, the printer print with
> paper from the letter tray.  If I select tabloid, the printer will use
> the tabloid tray.
>
> I added tabloid to R's list of supported paper sizes, which was pretty
> trivial.  If I view the file with gv/ghostscript, I get a tabloid sized window
> on the screen with my plot.  But if I print, the printer uses the letter tray
> and the plot is cropped to the letter size paper.
>
> I looked postscript from staroffice vs R, and noticed these lines:
> %%BeginSetup
> %%BeginFeature: *PageRegion Tabloid
>
>         << /PageSize [792 1224] /ImagingBBox null >> setpagedevice
> %%EndFeature
> %%EndSetup
>
> These follow the "%%EndProlog" line in the postscript file.  If I add these
> lines to an R produced tabloid sized ps file, it will print on tabloid paper!
>
> It doesn't view properly in gv though.  When looking at a plot in landscape
> orientation, the right edge is cut off.  Tabloid is 11" x 17", and it looks
> like the right 6" is cut off, as if the landscape plot is being clipped to a
> bounding box of portrait oriented paper.  The plots do not get cut off when
> viewed if I don't add that bit of code.  The plots do print fine, which is odd
> since both the printer and gv use ghostscript to process the postscript file.
>
> Maybe some postscript guru could add this feature to R's PS driver?  It looks
> like some kind of setpagedevice call is needed to tell the printer what paper
> size to use.

Let's not get confused here.  What you are asking for is the job of your
print spooling software.  Proper postscript should have a DSC comment
specifying the paper size, and R's does:

%!PS-Adobe-3.0
%%DocumentNeededResources: font Symbol
%%+ font Helvetica
%%+ font Helvetica-Bold
%%+ font Helvetica-Oblique
%%+ font Helvetica-BoldOblique
%%DocumentMedia: a4 595 841 0 () ()
...

If you use the paper size by "special" this is set, and it is the job of
your spooler to make use of it.  Looks like yours is deficient
(and that's not unlikely if you are not using a proper spooler).  *But*
we can't fix this in R without breaking it for those who do run
proper print management software.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 31 23:02:38 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Jun 2001 00:02:38 +0200
Subject: [Rd] documentation for image(): zlim update (PR#962)
In-Reply-To: eglen@pcg.wustl.edu's message of "Thu, 31 May 2001 22:07:52 +0200 (MET DST)"
References: <200105312007.WAA22407@pubhealth.ku.dk>
Message-ID: <x2itihxjlt.fsf@blueberry.kubism.ku.dk>

eglen@pcg.wustl.edu writes:

> Full_Name: Stephen Eglen
> Version: 1.2.3
> OS: Linux
> Submission from: (NULL) (128.252.204.186)
> 
> 
> The help file for image() currently says:
> 
>      The way in which `zlim' is divided into colours will be changed
>      for the next major release (1.1.0) to divide the range into
>      equal-length intervals.
> 
> According to NEWS, this was indeed changed in 1.1.0, so perhaps it can 
> now be removed from the help?
> 
> Stephen

This actually got fixed yesterday by Brian (coincidence or multiple
information pathways?)

----------------------------
revision 1.18
date: 2001/05/30 16:56:01;  author: ripley;  state: Exp;  lines: +0 -4
remove old note
----------------------------

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 31 23:13:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Jun 2001 00:13:53 +0200
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
In-Reply-To: rossini@blindglobe.net's message of "31 May 2001 09:52:54 -0700"
References: <200105311607.SAA21389@pubhealth.ku.dk> <87lmnde9zt.fsf@jeeves.blindglobe.net>
Message-ID: <x2g0dlxj32.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> >>>>> "r" == ripley  <ripley@stats.ox.ac.uk> writes:
> 
>     r> There is a serious problem with that. All the user-installed
>     r> packages in /usr/local/lib/R-1.2.3/library disappear from view
>     r> on upgrade.  They would need to be migrated.
> 
> One thought would be to emulate XEmacs in this regard -- lisp packages
> are in equivalent of /usr/local/lib/R, while version-specific code is
> in the equivalent of /usr/local/lib/R-version.

But R packages are not always binary compatible between releases. You
can't win. I think most of the development team just use the "run from
builddir" option.

Could we perhaps add a configure switch to install in R-$VERSION ?

--versioned-install or something like that. Kurt?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu May 31 23:13:04 2001
From: rossini@u.washington.edu (A. J. Rossini)
Date: Thu, 31 May 2001 15:13:04 -0700 (PDT)
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
In-Reply-To: <x2g0dlxj32.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105311511510.12492-100000@homer15.u.washington.edu>



On 1 Jun 2001, Peter Dalgaard BSA wrote:

> rossini@blindglobe.net (A.J. Rossini) writes:
>
> > >>>>> "r" == ripley  <ripley@stats.ox.ac.uk> writes:
> >
> >     r> There is a serious problem with that. All the user-installed
> >     r> packages in /usr/local/lib/R-1.2.3/library disappear from view
> >     r> on upgrade.  They would need to be migrated.
> >
> > One thought would be to emulate XEmacs in this regard -- lisp packages
> > are in equivalent of /usr/local/lib/R, while version-specific code is
> > in the equivalent of /usr/local/lib/R-version.
>
> But R packages are not always binary compatible between releases. You
> can't win. I think most of the development team just use the "run from
> builddir" option.
>
> Could we perhaps add a configure switch to install in R-$VERSION ?
>
> --versioned-install or something like that. Kurt?

Alternatively, let people do it both ways, and suffer (i.e. install
libraries in the versioned location, as well as in the "generic"
location).

(I'm feeling really grumpy this year).

best,
-tony


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 23:16:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Jun 2001 00:16:08 +0200 (MET DST)
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
Message-ID: <200105312216.AAA23027@pubhealth.ku.dk>

On 1 Jun 2001, Peter Dalgaard BSA wrote:

> rossini@blindglobe.net (A.J. Rossini) writes:
>
> > >>>>> "r" == ripley  <ripley@stats.ox.ac.uk> writes:
> >
> >     r> There is a serious problem with that. All the user-installed
> >     r> packages in /usr/local/lib/R-1.2.3/library disappear from view
> >     r> on upgrade.  They would need to be migrated.
> >
> > One thought would be to emulate XEmacs in this regard -- lisp packages
> > are in equivalent of /usr/local/lib/R, while version-specific code is
> > in the equivalent of /usr/local/lib/R-version.
>
> But R packages are not always binary compatible between releases. You
> can't win. I think most of the development team just use the "run from
> builddir" option.

I do manually version-install almost as suggested for the dept copy (I
would use /usr/local/lib/R/1.2.3 in the way that ghostscript does),
which is why I know I need to manually migrate the packages.

One can of course install packages in a private library.  For my own
installations I do, but it is not seamless, not least from the
version-incompatibility of installed packages (and also that --vanilla
stops the private library spec being picked up from .Renviron).

>
> Could we perhaps add a configure switch to install in R-$VERSION ?
>
> --versioned-install or something like that. Kurt?
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xyzzy@speakeasy.org  Thu May 31 23:23:06 2001
From: xyzzy@speakeasy.org (Trent Piepho)
Date: Thu, 31 May 2001 15:23:06 -0700 (PDT)
Subject: [Rd] paper size in postscript driver
In-Reply-To: <Pine.GSO.4.31.0105312248180.22000-100000@auk.stats>
Message-ID: <Pine.LNX.4.04.10105311519530.2312-100000@xyzzy.dsl.speakeasy.net>

On Thu, 31 May 2001, Prof Brian D Ripley wrote:
> > like some kind of setpagedevice call is needed to tell the printer what paper
> > size to use.
> 
> Let's not get confused here.  What you are asking for is the job of your
> print spooling software.  Proper postscript should have a DSC comment
> specifying the paper size, and R's does:

Then why do both staroffice and the gimp write postscript that uses the proper
paper size?  

> If you use the paper size by "special" this is set, and it is the job of
> your spooler to make use of it.  Looks like yours is deficient
> (and that's not unlikely if you are not using a proper spooler).  *But*
> we can't fix this in R without breaking it for those who do run
> proper print management software.

Why does it need to break anything?  Both staroffice and gimp produce
postscript that prints on the proper paper size.  Do they not work with
"proper" spooling software?  What is the "proper" spooling software for Linux?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue May  1 09:18:45 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 1 May 2001 10:18:45 +0200
Subject: [Rd] Re: [R] Re: two new packages
In-Reply-To: <5.0.0.25.1.20010501083348.03b2bb60@pop.jcu.edu.au>
References: <5.0.2.1.2.20010427224918.0193d588@mcmail.cis.mcmaster.ca>
 <5.0.0.25.1.20010501083348.03b2bb60@pop.jcu.edu.au>
Message-ID: <15086.29029.974238.133863@mithrandir.hornik.net>

>>>>> Richard Rowe writes:

> At 12:18 30/04/01 -0400, "Timothy H. Keitt" <Timothy.Keitt@StonyBrook.Edu> 
> wrote:
>> Great!  I think we should encourage people to upload complete, but not yet 
>> fully
>> tested packages to the "devel" section of CRAN.  It gets really hard to 
>> keep track
>> of source that is scattered all over the 'net.
>> 
>> Cheers,
>> Tim
>> 
>> John Fox wrote:
>> 
>> > I've prepared preliminary versions of two packages that I plan eventually
>> > to contribute to CRAN:

> I fear Tim's idea could lead to mayhem with a multitude of
> 'built-for-a-job, I-can-use-it' contributions sitting on the devel
> section.  Devel is being used as a beta test repository by people who
> seem to eventually produce full packages.

> Perhaps a 'midden' might fill Tim's requirements, there is something
> similar for Delphi where people contribute code.  Every bit of code
> would need to be identified logically and with the author's name and
> with appropriate copyright declarations (in Delphi many producers of
> snippets seem very proud and possessive of their frequently uninspired
> code ... the really good stuff comes unrestricted GNU style).  My gut
> feeling is that unless contributors were VERY disciplined this could
> be a problem ... and if the lump is worthwhile it will lead to a
> package in the hands of a disciplined author.

> Maybe people with 'bits' could get together and produce an e1071 type
> package?,

Richard:

At the r-core part of DSC-2001 we also talked about a ``useful bits of
code'' repository, so something along the lines of your suggestion is
coming along ...

Best,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From erich.neuwirth@univie.ac.at  Tue May  1 14:34:06 2001
From: erich.neuwirth@univie.ac.at (Erich Neuwirth)
Date: Tue, 01 May 2001 15:34:06 +0200
Subject: [Rd] graphics library fltk
Message-ID: <3AEEBB4E.714CF7B5@univie.ac.at>

we still do not have dynamic graphics in R natively.

i just found out about a widget library called fltk
info is at
www.fltk.org

it has all the stuff r currently can do only through tcl/tk or
(as i do it) excel: sliders, knobs, spinners and so on.

it is multiplatform, there are production versions for
unixen and windows, and there is a beta for macs.

this could be a way of getting some of luke's dynamic graphics tools
into R more easily.
  
perhaps this looks interesting enough that some r-core member will have
a look at it.


--
Erich Neuwirth, Computer Supported Didactics Working Group
Visit our SunSITE at http://sunsite.univie.ac.at
Phone: +43-1-4277-38624 Fax: +43-1-4277-9386
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Tue May  1 14:43:10 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 01 May 2001 06:43:10 -0700
Subject: [Rd] graphics library fltk
In-Reply-To: Erich Neuwirth's message of "Tue, 01 May 2001 15:34:06 +0200"
References: <3AEEBB4E.714CF7B5@univie.ac.at>
Message-ID: <87u235uqvl.fsf@jeeves.blindglobe.net>

>>>>> "EN" == Erich Neuwirth <erich.neuwirth@univie.ac.at> writes:

    EN> it is multiplatform, there are production versions for unixen
    EN> and windows, and there is a beta for macs.

    EN> this could be a way of getting some of luke's dynamic graphics
    EN> tools into R more easily.

Thomas has already shown how to do this with XLispStat with sockets;
we also have 2 ways to do this using Java/Java3d, both through sockets
as well as RJava.  Of course, this relies on RJava being stable, which
is a stretch of the imagination.

Note that everything you ask for is in both settings (XLispStat as
well as Java...).  I'm only not sure about the Mac interfaces...

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
UW Biostat/Center for AIDS Research	rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (friday is unknown) --------
FHCRC: M--W : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy
CFAR:  ??   : 206-731-3647 (fax=3694)|Email is far better than phone
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May  1 15:50:28 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Tue, 1 May 2001 15:50:28 +0100 (GMT Daylight Time)
Subject: [Rd] graphics library fltk
In-Reply-To: <3AEEBB4E.714CF7B5@univie.ac.at>
Message-ID: <Pine.WNT.4.31.0105011543000.1176-100000@gannet>

On Tue, 1 May 2001, Erich Neuwirth wrote:

> we still do not have dynamic graphics in R natively.

We do not intend to: that's what things like Duncan Murdoch's Rgl and
Rggobi are for.  It's called not re-inventing the wheel.

> i just found out about a widget library called fltk
> info is at
> www.fltk.org
>
> it has all the stuff r currently can do only through tcl/tk or
> (as i do it) excel: sliders, knobs, spinners and so on.
>
> it is multiplatform, there are production versions for
> unixen and windows, and there is a beta for macs.

That is equally true of the Graphapp toolkit we use (apart from the Mac
part).  The hard bit is to find a way to describe how to use this from
an R interface.  Things like the placement of widgets are in my experience
much easier with visual tools.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Tue May  1 18:49:31 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Tue, 01 May 2001 13:49:31 -0400
Subject: [Rd] graphics library fltk
In-Reply-To: <Pine.WNT.4.31.0105011543000.1176-100000@gannet>
References: <3AEEBB4E.714CF7B5@univie.ac.at> <Pine.WNT.4.31.0105011543000.1176-100000@gannet>
Message-ID: <7kstetsk8qsv4o04kbq84irjb31tvn68vv@4ax.com>

On Tue, 1 May 2001 15:50:28 +0100 (GMT Daylight Time), you wrote in
message <Pine.WNT.4.31.0105011543000.1176-100000@gannet>:

>On Tue, 1 May 2001, Erich Neuwirth wrote:
>
>> we still do not have dynamic graphics in R natively.
>
>We do not intend to: that's what things like Duncan Murdoch's Rgl and
>Rggobi are for.  It's called not re-inventing the wheel.

I guess there's a question of what "natively" means.  I don't think
dynamic graphics should be in the base, but I do think it should be
possible to install a package to get access to them.  That's what I'm
aiming for with RGL.

It's considerably more difficult for the user to install a separate
system (Java, GGobi, or whatever).  Just about all free software
packages are fairly unfriendly about installation, so learning two
sets of rules (both R's and the other's) is a substantial barrier to
entry.  There are also the different conventions about user
interaction with the 2nd package to learn.

To help people writing such packages, it would be nice if the
underpinnings to allow dynamic graphics were in the base, e.g. exposed
data in graphics objects that can be changed, and the ability to
request a redraw of the current plot once the data have changed.
("Data" here is not just the points being plotted, I'm thinking of all
the parts of the graph:  the axes, labels, transformations, etc.)

We don't want to re-invent wheels, but I think we do want to
facilitate experimentation with graphics. 

>The hard bit is to find a way to describe how to use this from
>an R interface.  Things like the placement of widgets are in my experience
>much easier with visual tools.

That's definitely true, but I don't see why a package that provided
some visual tools couldn't be written.  I'm not asking someone to
write it right away (nor volunteering!), but I think it's something
that would be easier if the graphics model changed a bit, and I know
that's something that Ross and Paul are thinking about a lot.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May  1 20:24:23 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Tue, 1 May 2001 21:24:23 +0200 (MET DST)
Subject: [Rd] Re: [R] Crazy plots of time-series against dates (PR#930)
Message-ID: <200105011924.VAA02145@pubhealth.ku.dk>

"Marco Taboga" <mtaboga@tiscalinet.it> writes:

> OK, it works.  xlab and ylab had to be set properly.
> If you want to see what actually goes on, try:
> a<-chron(1:2000)
> b<-1:2000
> plot(a,b,type="l")
> 

One of the standard blunders with R's lazy evaluation and substitute is
to change the value of part of a substitute expression before it is
evaluated. I think the chron maintainer even inserted a note in the
FAQ about that (Hi, Kurt ;) )

In plot.times insert the line below to fix it

    if (!is.null(type <- dots$type)) 
        if (any(type == c("l", "b", "o"))) {
            xlab ; ylab  # force promises
            nas <- is.na(x)
            ...

Cc'ed to R-bugs so that it gets filed and eventually fixed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From MALIKSA@apci.com  Wed May  2 14:51:41 2001
From: MALIKSA@apci.com (MALIKSA@apci.com)
Date: Wed, 2 May 2001 15:51:41 +0200 (MET DST)
Subject: [Rd] (PR#931)
Message-ID: <200105021351.PAA14786@pubhealth.ku.dk>

Hi

I have installed the R package on my NT machine, but I cannot get the TCL
demos to work, like demo(tktttest). There was nothing in the install about
this

Atique Malik


+

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May  2 15:10:09 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 2 May 2001 16:10:09 +0200 (MET DST)
Subject: [Rd] (PR#931)
Message-ID: <200105021410.QAA15096@pubhealth.ku.dk>

On Wed, 2 May 2001 MALIKSA@apci.com wrote:

> Hi
>
> I have installed the R package on my NT machine, but I cannot get the TCL
> demos to work, like demo(tktttest). There was nothing in the install about

It's demo(tkttest), not demo(tktttest)!

> this

There *are* detailed instructions in the README *and* in the rw-FAQ,
and there is no file `the install'.  Please do read the documentation
provided.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Wed May  2 21:16:50 2001
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Wed, 2 May 2001 22:16:50 +0200 (MET DST)
Subject: [Rd] subdirs in package src dir
Message-ID: <Pine.OSF.4.21.0105022157360.17798-100000@zidsrv.sci.uni-klu.ac.at>


Sometimes I find it useful to put C or Fortran sources under subdirs of 
"mypackage/src", especially to distinguish between my own files and
e.g. lapack or blas sources. To get this working I would need a Makefile
in my package which contains the appropriate dependencies to these sources
in subdirs. 

But I don't want to add a complete Makefile, I want only a Makevars file
containing e.g. "OBJS=myfunc.o lapack/somefunc.o ...", currently this
would not work, because nobody looks into Makevars for an OBJS
variable. The following patch adds this functionality to the INSTALL
script, allowing to add an OBJS (or SRCS) variable to Makeconf. I tested
it with R 1.2.1, 1.2.2. and 1.2.3 on Linux, FreeBSD, Tru64 and Solaris.

But of course it is only a suggestion.

(I hope the TABs in the Makefile snippets below are not mangled by my mail
program) 

--- ./etc/Makefile.in.objs-patch	Sat Dec  2 11:25:28 2000
+++ ./etc/Makefile.in	Sat Mar  3 17:53:20 2001
@@ -10,7 +10,7 @@
 
 include $(top_builddir)/Makeconf
 
-SOURCES = Makeconf.in Makeconf-tests.in Renviron.in
+SOURCES = Makeconf.in Makeconf-tests.in Renviron.in Makefrag.in
 OBJECTS = $(SOURCES:.in=)
 distdir = $(top_builddir)/$(PACKAGE)-$(VERSION)/$(subdir)
 DISTFILES = \
--- ./etc/Makefrag.in.objs-patch	Sat Mar  3 17:53:20 2001
+++ ./etc/Makefrag.in	Sat Mar  3 17:53:20 2001
@@ -0,0 +1,5 @@
+echoobjs:
+	@echo $(OBJS)
+
+echosrcs:
+	@echo $(SRCS)
--- ./src/scripts/INSTALL.in.objs-patch	Tue Feb 20 22:37:53 2001
+++ ./src/scripts/INSTALL.in	Sat Mar  3 17:56:05 2001
@@ -243,7 +243,18 @@
 	cd ..
       else
         cd src;
-          srcs=`ls *.[cfC] *.cc *.cpp 2>/dev/null`
+          srcs=""
+          objs=""
+          if [ -r Makevars ]; then
+            srcs=`make -s -f Makevars -f ${R_HOME}/etc/Makefrag echosrcs` 
+            if [ -z "${srcs}" ]; then
+              objs=`make -s -f Makevars -f ${R_HOME}/etc/Makefrag echoobjs` 
+              srcs=${objs}
+            fi
+          fi
+          if [ -z "${srcs}" ]; then
+            srcs=`ls *.[cfC] *.cc *.cpp 2>/dev/null`
+          fi
 	  if test -n "${srcs}"; then
 	    sh ${R_HOME}/bin/SHLIB -o ${pkg}.@SHLIB_EXT@ ${srcs} \
 	      && cp *.@SHLIB_EXT@ ${lib}/${pkg}/libs \


Albrecht

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  3 07:32:13 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 3 May 2001 07:32:13 +0100 (BST)
Subject: [Rd] subdirs in package src dir
In-Reply-To: <Pine.OSF.4.21.0105022157360.17798-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.31.0105030720510.2475-100000@auk.stats>

On Wed, 2 May 2001, Albrecht Gebhardt wrote:

>
> Sometimes I find it useful to put C or Fortran sources under subdirs of
> "mypackage/src", especially to distinguish between my own files and
> e.g. lapack or blas sources. To get this working I would need a Makefile
> in my package which contains the appropriate dependencies to these sources
> in subdirs.
>
> But I don't want to add a complete Makefile, I want only a Makevars file
> containing e.g. "OBJS=myfunc.o lapack/somefunc.o ...", currently this
> would not work, because nobody looks into Makevars for an OBJS
> variable.

Err... that's not how I read the following section in SHLIB.in

makeobjs="OBJS=\"${objs}\""
if test -r Makevars; then
  makefiles="-f Makevars ${makefiles}"
  if grep '^ *OBJS *=' Makevars >/dev/null; then
    makeobjs=
  fi
fi

The intention seems to be that OBJS is looked for in Makevars, and if
it does not work for you it needs fixing in SHLIB, not INSTALL.
It *did* work for me when I tried it:

auk% cat foo/src/Makevars
OBJS=foo1.o
auk% Rdev INSTALL foo
Installing source package `foo' ...
 libs
gcc -I/opt/R/R-devel/include  -I/usr/local/include   -fPIC  -O2 -g -Wall
-pedantic -c foo1.c -o foo1.o
gcc -G  -o foo.so foo1.o -L/usr/local/lib
...
auk% ls foo/src
Makevars  foo.so*   foo1.c    foo1.o    foo2.c


[...]

> --- ./etc/Makefrag.in.objs-patch	Sat Mar  3 17:53:20 2001
> +++ ./etc/Makefrag.in	Sat Mar  3 17:53:20 2001
> @@ -0,0 +1,5 @@
> +echoobjs:
> +	@echo $(OBJS)
> +
> +echosrcs:
> +	@echo $(SRCS)

There is no such file in the current R sources that I can find: are
you working on the latest version?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Thu May  3 08:48:48 2001
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Thu, 3 May 2001 09:48:48 +0200 (MET DST)
Subject: [Rd] subdirs in package src dir
In-Reply-To: <Pine.GSO.4.31.0105030720510.2475-100000@auk.stats>
Message-ID: <Pine.OSF.4.21.0105030913250.26989-100000@zidsrv.sci.uni-klu.ac.at>

On Thu, 3 May 2001, Prof Brian D Ripley wrote:

> On Wed, 2 May 2001, Albrecht Gebhardt wrote:
> 
> > ...
>
> The intention seems to be that OBJS is looked for in Makevars, and if
> it does not work for you it needs fixing in SHLIB, not INSTALL.
> It *did* work for me when I tried it:
> ...

ok, if it is working in R-devel I'm completely happy. I was working with
1.2.x, and it doesn't work there for me (at least until 1.2.2, I didn't
try an unmodified 1.2.3)

> [...]
> 
> > --- ./etc/Makefrag.in.objs-patch	Sat Mar  3 17:53:20 2001
> ...
> There is no such file in the current R sources that I can find: are
> you working on the latest version?
> 

see above. Makefrag was only part of my workaround for 1.2.x.

I will check it once more, also with R-devel and come back with the
results later. 

Thanks,

Albrecht

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May  3 09:02:36 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 3 May 2001 09:02:36 +0100 (BST)
Subject: [Rd] subdirs in package src dir
In-Reply-To: <Pine.OSF.4.21.0105030913250.26989-100000@zidsrv.sci.uni-klu.ac.at>
Message-ID: <Pine.GSO.4.31.0105030859180.22611-100000@toucan.stats>

On Thu, 3 May 2001, Albrecht Gebhardt wrote:

> On Thu, 3 May 2001, Prof Brian D Ripley wrote:
>
> > On Wed, 2 May 2001, Albrecht Gebhardt wrote:
> >
> > > ...
> >
> > The intention seems to be that OBJS is looked for in Makevars, and if
> > it does not work for you it needs fixing in SHLIB, not INSTALL.
> > It *did* work for me when I tried it:
> > ...
>
> ok, if it is working in R-devel I'm completely happy. I was working with
> 1.2.x, and it doesn't work there for me (at least until 1.2.2, I didn't
> try an unmodified 1.2.3)

It worked for me in 1.2.3 as well as R-devel, and also specifying files in
a subdirectory. I don't have any earlier versions up at present, but
I can't see any recent changes on this.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Thu May  3 09:58:26 2001
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Thu, 3 May 2001 10:58:26 +0200 (MET DST)
Subject: [Rd] subdirs in package src dir
In-Reply-To: <Pine.GSO.4.31.0105030859180.22611-100000@toucan.stats>
Message-ID: <Pine.OSF.4.21.0105031053010.26989-100000@zidsrv.sci.uni-klu.ac.at>

On Thu, 3 May 2001, Prof Brian Ripley wrote:

> On Thu, 3 May 2001, Albrecht Gebhardt wrote:
> ...
> > ok, if it is working in R-devel I'm completely happy. I was working with
> > 1.2.x, and it doesn't work there for me (at least until 1.2.2, I didn't
> > try an unmodified 1.2.3)
> 
> It worked for me in 1.2.3 as well as R-devel, and also specifying files in
> a subdirectory. I don't have any earlier versions up at present, but
> I can't see any recent changes on this.

Ok I found it, I had "SRCS=myfunc.c subdir/myfunc.f" in my Makevars file,
now it works using OBJS=... (I thought I did use OBJS but I did not
recognize that I used a SRCS variable instead, sorry)

Albrecht 

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Fri May  4 16:22:32 2001
From: kjetilh@umsanet.edu.bo (kjetilh@umsanet.edu.bo)
Date: Fri, 4 May 2001 17:22:32 +0200 (MET DST)
Subject: [Rd] scoping error in xy.coords (PR#932)
Message-ID: <200105041522.RAA11759@pubhealth.ku.dk>

Hola!

> rm(list=ls(all=TRUE))

> x <- 1:20
> y <- 1+x+rnorm(x)

> xy.coords(y  ~ x,NULL)

... expected output, correct, but when called from inside lowess:

>   lowess(y ~ x)
Error in xy.coords(x, y) : x and y lengths differ
> debug(xy.coords)
>   lowess(y ~ x)
debugging in: xy.coords(x, y)

... long listing deleted

    if (is.language(x)) {
        if (inherits(x, "formula") && length(x) == 3) {
            ylab <- deparse(x[[2]])
            xlab <- deparse(x[[3]])
            y <- eval(x[[2]], parent.frame())
            x <- eval(x[[3]], parent.frame())
        }
        else stop("invalid first argument")
    }
    else
... deleted
debug: if (inherits(x, "formula") && length(x) == 3) {
    ylab <- deparse(x[[2]])
    xlab <- deparse(x[[3]])
    y <- eval(x[[2]], parent.frame())
    x <- eval(x[[3]], parent.frame())
} else stop("invalid first argument")
Browse[1]> n
debug: ylab <- deparse(x[[2]])
Browse[1]> n
debug: xlab <- deparse(x[[3]])
Browse[1]> n
debug: y <- eval(x[[2]], parent.frame())
Browse[1]> n
debug: x <- eval(x[[3]], parent.frame())
Browse[1]> n
debug: if (length(x) != length(y)) {
    if (recycle) {
        if ((nx <- length(x)) < (ny <- length(y))) 
            x <- rep(x, length = ny)
        else y <- rep(y, length = nx)
    }
    else stop("x and y lengths differ")
}
Browse[1]> x
y ~ x
Browse[1]> y
NULL

x and y have their original values from the call, the evaluation 
inside is.formula .... have failed.

Browse[1]> c
Error in xy.coords(x, y) : x and y lengths differ



Kjetil Halvorsen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May  4 16:40:48 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 4 May 2001 08:40:48 -0700 (PDT)
Subject: [Rd] scoping error in xy.coords (PR#932)
In-Reply-To: <200105041522.RAA11759@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0105040829370.73704-100000@homer25.u.washington.edu>

On Fri, 4 May 2001 kjetilh@umsanet.edu.bo wrote:

> Hola!
>
> > rm(list=ls(all=TRUE))
>
> > x <- 1:20
> > y <- 1+x+rnorm(x)
>
> > xy.coords(y  ~ x,NULL)
>
> ... expected output, correct, but when called from inside lowess:
>
> >   lowess(y ~ x)
> Error in xy.coords(x, y) : x and y lengths differ


If you don't call them x and y it works
> x<-1:10
> y<-1:10
> lowess(y~x)
Error in xy.coords(x, y) : x and y lengths differ
> z<-y
> w<-x
> lowess(z~w)
$x
 [1]  1  2  3  4  5  6  7  8  9 10

$y
 [1]  1  2  3  4  5  6  7  8  9 10

The problem is that the formula is evaluated in the parent frame, where y
evaluates to NULL, and x evaluates to y~x, rather than in the global
environment where they would both evaluate to vectors.

In order to handle formulas correctly I think xy.coords needs to use the
same sort of indirect evaluation as model.frame: eg
   xy <-substitute(xy.coords(X,Y),list(X=substitute(x),Y=substitute(y)))
   xy<-eval(xy,parent.frame())
works as a replacement for the first two lines of lowess().  I hadn't
realised that xy.coords() was supposed to handle formulas, and since it
doesn't have a data= argument it can't do it very well.

This seems a bit drastic, given the number of times xy.coords is used.
Perhaps there's a simpler solution.


	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle
^^^^^^^^^^^^^^^^^^^^^^^^
 NOTE NEW EMAIL ADDRESS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Fri May  4 17:06:23 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 04 May 2001 18:06:23 +0200
Subject: [Rd] scoping error in xy.coords (PR#932)
In-Reply-To: Thomas Lumley's message of "Fri, 4 May 2001 08:40:48 -0700 (PDT)"
References: <Pine.A41.4.33.0105040829370.73704-100000@homer25.u.washington.edu>
Message-ID: <x2u231p08w.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> evaluates to NULL, and x evaluates to y~x, rather than in the global
> environment where they would both evaluate to vectors.
> 
> In order to handle formulas correctly I think xy.coords needs to use the
> same sort of indirect evaluation as model.frame: eg
>    xy <-substitute(xy.coords(X,Y),list(X=substitute(x),Y=substitute(y)))
>    xy<-eval(xy,parent.frame())
> works as a replacement for the first two lines of lowess().  I hadn't
> realised that xy.coords() was supposed to handle formulas, and since it
> doesn't have a data= argument it can't do it very well.
> 
> This seems a bit drastic, given the number of times xy.coords is used.
> Perhaps there's a simpler solution.

Perhaps use the new formula environments in xy.coords? Seems to work


        if (inherits(x, "formula") && length(x) == 3) {
            ylab <- deparse(x[[2]])
            xlab <- deparse(x[[3]])
            y <- eval(x[[2]], environment(x), parent.frame())
            x <- eval(x[[3]], environment(x), parent.frame())
	}

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Fri May  4 17:18:46 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Fri, 4 May 2001 09:18:46 -0700 (PDT)
Subject: [Rd] scoping error in xy.coords (PR#932)
In-Reply-To: <x2u231p08w.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105040918080.73704-100000@homer25.u.washington.edu>

On 4 May 2001, Peter Dalgaard BSA wrote:
>
> Perhaps use the new formula environments in xy.coords? Seems to work

Yes, much better.

	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jorvutom@icaro.dic.uchile.cl  Sat May  5 21:17:38 2001
From: jorvutom@icaro.dic.uchile.cl (jorvutom@icaro.dic.uchile.cl)
Date: Sat, 5 May 2001 22:17:38 +0200 (MET DST)
Subject: [Rd] read.xport bug of foreign pkg (PR#933)
Message-ID: <200105052017.WAA15889@pubhealth.ku.dk>

Full_Name: Jorge A. Tomasevic
Version: 1.2.2
OS: Win98
Submission from: (NULL) (146.83.23.177)


As i'm not an "R-expert-user", i will describe what i do:

i) open Rgui.exe
ii) ivoke foreign library : >library(foreign)
iii) i try to read an .xpt file (from Systat 9): >datos <-
read.xport('ipoisson.xpt')
iv) then the program crashes. Norton CrashGuard alerts the multiple failures:

Windows 98 Version 4.10.1998
RGUI failure in no-valid page module KERNEL32.DLL of 0177:bff7b983.
Regiters:
EAX=00000020 CS=0177 EIP=bff7b983 EFLGS=00010202
EBX=0270f150 SS=017f ESP=0270f108 EBP=0270f120
ECX=78037c48 DS=017f ESI=00000020 FS=47b7
EDX=00000000 ES=017f EDI=00000000 GS=0000
Bytes on CS:EIP:
,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x

Pile errors :
,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x


i'm afraid that this is some kind of incompatibility bug, but i hope that it
could be 
repaired easily.

Hopping to help somehow, 


Jorge A. Tomasevic
University of Chile 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bates@stat.wisc.edu  Sat May  5 21:42:22 2001
From: bates@stat.wisc.edu (Douglas Bates)
Date: 05 May 2001 15:42:22 -0500
Subject: [Rd] read.xport bug of foreign pkg (PR#933)
In-Reply-To: <200105052017.WAA15889@pubhealth.ku.dk>
References: <200105052017.WAA15889@pubhealth.ku.dk>
Message-ID: <6ritjf1qa9.fsf@franz.stat.wisc.edu>

jorvutom@icaro.dic.uchile.cl writes:

> Full_Name: Jorge A. Tomasevic
> Version: 1.2.2
> OS: Win98
> Submission from: (NULL) (146.83.23.177)
> 
> 
> As i'm not an "R-expert-user", i will describe what i do:
> 
> i) open Rgui.exe
> ii) ivoke foreign library : >library(foreign)
> iii) i try to read an .xpt file (from Systat 9): >datos <-
> read.xport('ipoisson.xpt')
> iv) then the program crashes. Norton CrashGuard alerts the multiple failures:
> 
> Windows 98 Version 4.10.1998
> RGUI failure in no-valid page module KERNEL32.DLL of 0177:bff7b983.
> Regiters:
> EAX=00000020 CS=0177 EIP=bff7b983 EFLGS=00010202
> EBX=0270f150 SS=017f ESP=0270f108 EBP=0270f120
> ECX=78037c48 DS=017f ESI=00000020 FS=47b7
> EDX=00000000 ES=017f EDI=00000000 GS=0000
> Bytes on CS:EIP:
> ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x ,02x
> 
> Pile errors :
> ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x ,08x
> 
> 
> i'm afraid that this is some kind of incompatibility bug, but i hope that it
> could be 
> repaired easily.
> 
> Hopping to help somehow, 

Does Systat create an XPORT file in the SAS format or in its own
format?  The read.xport function reads the SAS XPORT format.  We would
not expect it to read Systat files.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Mon May  7 06:15:05 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Mon, 7 May 2001 07:15:05 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200105070515.HAA11148@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 930 *
Subject: Re: [R] Crazy plots of time-series against dates
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 May 2001 21:33:53 +0200
--error in chron package
* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
--Only on a specific sample file: send to maintainer.
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

* PR# 899 *
Subject: documentation problems in str.Rd
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
Date: Sat, 7 Apr 2001 23:08:23 +0200

Directory:  Graphics

* PR# 917 *
Subject: boxplot
From: skala@incoma.cz
Date: Fri, 20 Apr 2001 08:43:29 +0200 (MET DST)
--fixed for 1.2.3  (one could consider the bug an `accidental feature',
--		  but the documentation and the other S implementations 
--		  differ).
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 924 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:58:17 +0200 (MET DST)
--same as 923
* PR# 923 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:56:59 +0200 (MET DST)
--too little information

Directory:  Language

* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 929 *
Subject:  Segmentation fault linked to memory? 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 30 Apr 2001 14:34:11 +0100 (BST)
--looks like 32-bit integer overflow error in counting allocation size
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 862 *
Subject: Wrong sign for Pearson residuals
From: faraway@umich.edu
Date: Mon, 5 Mar 2001 18:04:34 +0100 (MET)

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
--Not applied for 1.2.3 (why?)
* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
--(Should be taken care of for 1.2.3).
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500

Directory:  TooMuchAtOnce

* PR# 918 *
Subject: several bugs
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Sun, 22 Apr 2001 23:13:38 -0400 (EDT)
--1. as.numeric -> use as.double.FOO for methods -- doc.fixed for 1.2.3
--2. cannot set attribute on NULL -- no bug
--3. rep(list() ... ) :  a wish  fulfilled for 1.3.x
--4. %*% is not a generic in R (but is fast!) but in S+  -- not a bug
--5. S-plus (S4) compatibility  -- a wish but not for now
--6. list()s with dim() attribute -- an ongoing `research topic'  :-)
* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

* PR# 927 *
Subject: Rgui 1.2.3 for Windows crashes reading huge CSV file
From: znmeb@aracnet.com
Date: Mon, 30 Apr 2001 07:14:50 +0200 (MET DST)
--Not clear this is to do with Windows.
* PR# 926 *
Subject: Rgui crash
From: bellis@hsph.harvard.edu
Date: Sun, 29 Apr 2001 20:45:15 +0200 (MET DST)
--Unable to reproduce even on a Win2k machine
* PR# 912 *
Subject: Rgui.exe crash on Windows 2000
From: gilg.seeber@uibk.ac.at
Date: Thu, 12 Apr 2001 15:07:52 +0200 (MET DST)
--seems to be specific to the submitter's system.
--Cannot reproduce.
* PR# 906 *
Subject: Win98 wheelmouse graphics lock problem
From: cpaul@ucla.edu
Date: Tue, 10 Apr 2001 17:50:44 +0200 (MET DST)
--Cannot reproduce without more information
--In particular, does not happen with Microsoft Intellimouse on W2K

Directory:  incoming

* PR# 933 *
Subject: read.xport bug of foreign pkg
From: jorvutom@icaro.dic.uchile.cl
Date: Sat, 5 May 2001 22:17:37 +0200 (MET DST)
* PR# 932 *
Subject: scoping error in xy.coords
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 04 May 2001 11:20:57 -0400
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From mh.smith@auckland.ac.nz  Tue May  8 05:49:47 2001
From: mh.smith@auckland.ac.nz (mh.smith@auckland.ac.nz)
Date: Tue, 8 May 2001 06:49:47 +0200 (MET DST)
Subject: [Rd] ks.test in ctest package (PR#934)
Message-ID: <200105080449.GAA03028@pubhealth.ku.dk>


1.    There is, I believe, some redundant code in the calculation of the
test statistic in ks.test in the package ctest.

 Lines 34-37 of the code read

          x <- y(sort(x), ...) - (0:(n - 1))/n
        STATISTIC <- switch(alternative, two.sided = max(abs(c(x,
           x - 1/n))), greater = max(c(x, x - 1/n)), less = -min(c(x,
            x - 1/n)))


Lines 35-37 could read

        STATISTIC <- switch(alternative, two.sided = max(c(x,1/n - x)),
                        greater = max(x), less = max(1/n - x))

Because

    x > x - 1/n and  1/n - x  > -x,

and thus

max(abs(c(x, x - 1/n))) = max(c(x,1/n - x)),

max(c(x, x - 1/n)) = max(x)

and

-min(c(x, x - 1/n)) = max (1/n - x)

2.    The manual entry should also make it clear that the one-sided
tests are not about theactual cdf in relation to the null hypothsis cdf
Fo, but about the quantiles of the actual distribution in relation to
the quantiles of the null hypothesis cdf.

For example the "greater" test has the STATISTIC, from line 34,

       y(sort(x)) - (0:(n-1))/n

If this is large positive it would contain evidence that the actual cdf
F is less than the null hypothesis Fo. This is the traditional form of
the "less" alternative hypothesis.

    Ha:  F < Fo

is equivalent to the quantiles of the actual distribution being greater
than quantiles of the null hypothesised cdf Fo, consequently the manual
entry should make clear that the one sided alternatives "greater" or
"less" refers to the quantiles and not the cdf's.

3.    Another feature that it would be very useful to add to ks.test
would be the automatic return of  a confidence interval for the actual
cdf F.  Adding a conf.level argument and taking the form of the interval
from the value of the alternative argument would be a relatively simple
task, although it would require .  This would bring the value of the
function into line with the t.test function.


--
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++
Murray H. Smith,      Senior Lecturer in Engineering Statistics
Engineering Science Department
The University of Auckland
Private Bag 92019
Auckland
New Zealand
Phone: +64 9 373 7599 x4517, Fax: +64 9 373 7468
email: mh.smith@auckland.ac.nz
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Tue May  8 07:42:01 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Tue, 8 May 2001 08:42:01 +0200
Subject: [Rd] Rnews 2001/2
Message-ID: <15095.38201.711541.2225@mithrandir.hornik.net>

Dear package author,

We are now accepting submissions for the second issue of the R
Newsletter.  For more information see

      http://cran.r-project.org/doc/Rnews/

If you are the author of a package on CRAN and you would like to promote
it a little bit, or if you simply have an interesting application using
R, we hope you can find some time to write a short article on it.  We
suggest that it be approximately 2 pages or less.  The idea of the
newsletter is that it be interesting to R users without being too
technical.  For example an article describing a package could begin by
briefly outlining the statistical background and go on to demonstrate
the usage on some typical data set.  Of course graphics are more than
welcome!

Bill Venables is also encouraging submissions to the more specialist
Programmer's Niche column.  In this case the technical level could be a
little higher, of course, but not necessarily: ingeniousness is the key.

Instructions for authors can be found in ``Writing Articles for R News''
in the first issue of Rnews; more detailed instructions will shortly be
available on the web page.  Remember that submissions have to be in
LaTeX, and that graphics are preferred in PDF or EPS format.  (Bitmaps
like JPG are also OK but please keep in mind that those cannot be scaled
easily and hence might look ugly in the final version.)

The deadline for submissions is

	 June 13, 2001

Keep the contributions rolling in!

For the Editorial Board,
-kh
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From telford@progsoc.uts.edu.au  Wed May  9 07:32:24 2001
From: telford@progsoc.uts.edu.au (Telford)
Date: Wed, 9 May 2001 06:32:24 +0000
Subject: [Rd] Quick note on R mirror site in Australia
Message-ID: <20010509063224.A7541@progsoc.uts.edu.au>

I've noticed http://mirror.aarnet.edu.au/CRAN has been consistently
giving 404's lately, might be worth keeping an eye on this see if
it is dead or just renovating.

-- 
S1G: 10610210 seconds remaining			- Tel
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wb@vestein.arb-phys.uni-dortmund.de  Wed May  9 12:42:26 2001
From: wb@vestein.arb-phys.uni-dortmund.de (wb@vestein.arb-phys.uni-dortmund.de)
Date: Wed, 9 May 2001 13:42:26 +0200 (MET DST)
Subject: [Rd] help.start() fails (PR#935)
Message-ID: <200105091142.NAA24335@pubhealth.ku.dk>


On my system help.start() failed with "could not write .R/doc/html/packages.html" 
or equivalent. This due to /usr/local/lib/R/doc/html/packages-head.html 
having protection -r--r--r--. After inserting 'chmod u+w ${PKGLIST}'
after 'cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}'in
/usr/local/lib/R/bin/help.links, it works.


--please do not edit the information below--

Version:
 platform = i386--freebsd4.2
 arch = i386
 os = freebsd4.2
 system = i386, freebsd4.2
 status = 
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From wb@vestein.arb-phys.uni-dortmund.de  Wed May  9 12:44:39 2001
From: wb@vestein.arb-phys.uni-dortmund.de (wb@vestein.arb-phys.uni-dortmund.de)
Date: Wed, 9 May 2001 13:44:39 +0200 (MET DST)
Subject: [Rd] help.start() failed (PR#936)
Message-ID: <200105091144.NAA24412@pubhealth.ku.dk>

On my system help.start() failed with "could not write .R/doc/html/packages.html
"
or equivalent. This due to /usr/local/lib/R/doc/html/packages-head.html
having protection -r--r--r--. After inserting 'chmod u+w ${PKGLIST}'
after 'cp ${R_HOME}/doc/html/packages-head.html ${PKGLIST}'in
/usr/local/lib/R/bin/help.links, it works.

BTW. bug.report() fails with "mailx: not found" also.

--please do not edit the information below--

Version:
 platform = i386--freebsd4.2
 arch = i386
 os = freebsd4.2
 system = i386, freebsd4.2
 status =
 major = 1
 minor = 2.1
 year = 2001
 month = 01
 day = 15
 language = R

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed May  9 16:15:36 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 09 May 2001 11:15:36 -0400
Subject: [Rd] Windows binary directory
In-Reply-To: <14913.8539.45887.551220@celeborn.at>
References: <14913.8539.45887.551220@celeborn.at>
Message-ID: <icnift0cbv28os40cnm6534o2nrdeenf5c@4ax.com>

Fritz:

A while ago you hid the windows-9x and windows-NT directories on CRAN,
so that old scripts could still use them but they wouldn't be
displayed to confuse new users.  I was just looking at the cran.us
mirror, and apparently the directory hiding didn't propagate there.  I
checked several other mirrors (I couldn't get through to DK or HU) and
it appears that only the Austrian site does the hiding.

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May  9 18:26:02 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 09 May 2001 13:26:02 -0400
Subject: [Rd] Package overview document?
References: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats> <3a4f5971.54339465@smtp1.sympatico.ca>
Message-ID: <3AF97DAA.BBFC6FC7@bank-banque-canada.ca>

This came from deep in my unresolved pile:
>>On Sun, 31 Dec 2000, Duncan Murdoch wrote:
>>> I'd like to write an overview of a package, and have it show up when

>>> someone types
>>>
>>>  library(help=mypackage)
  ...
>>The problem is ensuring that you have a non-clashing name. dse1 has
>>00General.Description which seems to me to be very likely to clash.
...
>I think the most obvious choice of name is the name of the package,
>but that would clash fairly often with the name of a function within
>it (e.g. boot), and it wouldn't show up first in alphabetical lists.

Is there yet any prescribed approach. If not, I would like to suggest
00General.Description.xxx  where xxx is replaced by the package name.
The 00 is to put it near the beginning of the index, but there may be a
better way.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 10 07:31:16 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 10 May 2001 08:31:16 +0200 (MET DST)
Subject: [Rd] Re: PR#929 and [R] matrix: suspected integer overflow
Message-ID: <200105100631.IAA01466@pubhealth.ku.dk>

On Wed, 9 May 2001 andreas.krause@pharma.novartis.com wrote:

> Is the following a known issue, in particular in terms of message clarity of the latter two?

Yes, bug PR#929.  It's a bug in asInteger, an internal C routine which
using (int) on a double.  coerce.c has better routines used to corce
vectors, and the comment

/* This section of code handles type conversion for elements */
/* of data vectors.  Type coercion throughout R should use these */
/* routines to ensure consistency. */

!

I have altered asInteger (etc) to use the same routines.

However, I am not happy with what IntegerFromReal does: it gives the
maximum integer and the message.  I think it would be much better to return
NA in that cirumstance, when most uses of asInteger would give up
(correctly) and generate a meaningful error.

Comments, R-core?

> > matrix(0, 10^8, 10^8)
> Error: cannot allocate vector of size 2064896 Kb
> > matrix(0, 20, 10^10)
> Error in matrix(0, 20, 10^10) : negative length vectors are not allowed
> > matrix(0, 10^10, 10^10)
> Error: cannot allocate vector of size 0 Kb

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Wed May  9 20:41:56 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Wed, 9 May 2001 21:41:56 +0200
Subject: [Rd] Package overview document?
In-Reply-To: <3AF97DAA.BBFC6FC7@bank-banque-canada.ca>
References: <Pine.WNT.4.05.10012311402430.265-100000@tern.stats>
 <3a4f5971.54339465@smtp1.sympatico.ca>
 <3AF97DAA.BBFC6FC7@bank-banque-canada.ca>
Message-ID: <15097.40324.870687.597994@mithrandir.hornik.net>

>>>>> Paul Gilbert writes:

> This came from deep in my unresolved pile:
>>> On Sun, 31 Dec 2000, Duncan Murdoch wrote:
>>>> I'd like to write an overview of a package, and have it show up when

>>>> someone types
>>>> 
>>>> library(help=mypackage)
>   ...
>>> The problem is ensuring that you have a non-clashing name. dse1 has
>>> 00General.Description which seems to me to be very likely to clash.
> ...
>> I think the most obvious choice of name is the name of the package,
>> but that would clash fairly often with the name of a function within
>> it (e.g. boot), and it wouldn't show up first in alphabetical lists.

> Is there yet any prescribed approach. If not, I would like to suggest
> 00General.Description.xxx where xxx is replaced by the package name.
> The 00 is to put it near the beginning of the index, but there may be
> a better way.

Currently, library(help = PKG) shows the contents of the files TITLE,
DESCRIPTION and INDEX in that order.  For the time being, I would
recommend adding to INDEX, or maybe have something in INDEX pointing to
another file (e.g. contained in inst/doc so that it will be installed to
the doc subdir of the package).

More long term, we will have a better demo mechanism and better markup
for documentation ...

Best,
-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Thu May 10 08:23:36 2001
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Thu, 10 May 2001 09:23:36 +0200
Subject: [Rd] Re: Windows binary directory
In-Reply-To: <icnift0cbv28os40cnm6534o2nrdeenf5c@4ax.com>
References: <14913.8539.45887.551220@celeborn.at>
 <icnift0cbv28os40cnm6534o2nrdeenf5c@4ax.com>
Message-ID: <15098.16888.569772.436073@galadriel.ci.tuwien.ac.at>

>>>>> On Wed, 09 May 2001 11:15:36 -0400,
>>>>> Duncan Murdoch (DM) wrote:

  > Fritz:
  > A while ago you hid the windows-9x and windows-NT directories on CRAN,
  > so that old scripts could still use them but they wouldn't be
  > displayed to confuse new users.  I was just looking at the cran.us
  > mirror, and apparently the directory hiding didn't propagate there.  I
  > checked several other mirrors (I couldn't get through to DK or HU) and
  > it appears that only the Austrian site does the hiding.

Yes, that's because magic like this is done by the web server ... and
I have only control on what OUR server does ... but I think most new
new users will use the master site anyway (we had none of those ``bug
reports'' since ...

the links will be gone once 1.3 is out anyway (which is scheduled for
mid-june) 

.f


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 10 09:13:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 10 May 2001 09:13:27 +0100 (BST)
Subject: [Rd] Package overview document?
In-Reply-To: <3AF97DAA.BBFC6FC7@bank-banque-canada.ca>
Message-ID: <Pine.GSO.4.31.0105100909160.15706-100000@auk.stats>

On Wed, 9 May 2001, Paul Gilbert wrote:

> This came from deep in my unresolved pile:
> >>On Sun, 31 Dec 2000, Duncan Murdoch wrote:
> >>> I'd like to write an overview of a package, and have it show up when
>
> >>> someone types
> >>>
> >>>  library(help=mypackage)
>   ...
> >>The problem is ensuring that you have a non-clashing name. dse1 has
> >>00General.Description which seems to me to be very likely to clash.
> ...
> >I think the most obvious choice of name is the name of the package,
> >but that would clash fairly often with the name of a function within
> >it (e.g. boot), and it wouldn't show up first in alphabetical lists.
>
> Is there yet any prescribed approach. If not, I would like to suggest
> 00General.Description.xxx  where xxx is replaced by the package name.
> The 00 is to put it near the beginning of the index, but there may be a
> better way.

Lot so unattributed quotes there ....

Note, things have changed since 2000 and functions.html is no longer built
(as from the next release).  So name clashes are less unimportant, and the
only place these names matter are in your own package unless you want

?00General.Description.dse1

to work.  (I really don't like the long name: what's wrong with
00Description or even 00Intro, the latter being the Unix man-pages
convention?)

However, for

library(help=mypackage)

the information should be in INDEX.  This is already done in several
packages, e.g. boot.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 10 10:07:19 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 10 May 2001 11:07:19 +0200
Subject: [Rd] Re: PR#929 and [R] matrix: suspected integer overflow
In-Reply-To: ripley@stats.ox.ac.uk's message of "Thu, 10 May 2001 08:31:16 +0200 (MET DST)"
References: <200105100631.IAA01466@pubhealth.ku.dk>
Message-ID: <x2g0ed608o.fsf@blueberry.kubism.ku.dk>

ripley@stats.ox.ac.uk writes:

> However, I am not happy with what IntegerFromReal does: it gives the
> maximum integer and the message.  I think it would be much better to return
> NA in that cirumstance, when most uses of asInteger would give up
> (correctly) and generate a meaningful error.
> 
> Comments, R-core?

Agreed.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May 10 15:45:16 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 10 May 2001 10:45:16 -0400
Subject: [Rd] Package overview document?
References: <Pine.GSO.4.31.0105100909160.15706-100000@auk.stats>
Message-ID: <3AFAA97C.B6BB7671@bank-banque-canada.ca>

Brian

>Note, things have changed since 2000 and functions.html is no longer built
>(as from the next release).  So name clashes are less unimportant, and the
>only place these names matter are in your own package unless you want

>?00General.Description.dse1

>to work.  (I really don't like the long name: what's wrong with
>00Description or even 00Intro, the latter being the Unix man-pages
>convention?)

00Intro would be fine with me, but should that have the package name appended or not?

If not, what will happen to name clashes within a bundle?

When you say functions.html will not be built, does that mean there won't be an
overall index? That is the feature of the help system that I use the most.

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 10 17:47:27 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 10 May 2001 17:47:27 +0100 (GMT Daylight Time)
Subject: [Rd] Package overview document?
In-Reply-To: <3AFAA97C.B6BB7671@bank-banque-canada.ca>
Message-ID: <Pine.WNT.4.31.0105101744310.1188-100000@gannet>

On Thu, 10 May 2001, Paul Gilbert wrote:

> Brian
>
> >Note, things have changed since 2000 and functions.html is no longer built
> >(as from the next release).  So name clashes are less unimportant, and the
> >only place these names matter are in your own package unless you want
>
> >?00General.Description.dse1
>
> >to work.  (I really don't like the long name: what's wrong with
> >00Description or even 00Intro, the latter being the Unix man-pages
> >convention?)
>
> 00Intro would be fine with me, but should that have the package name appended or not?
>
> If not, what will happen to name clashes within a bundle?
>
> When you say functions.html will not be built, does that mean there won't be an
> overall index? That is the feature of the help system that I use the most.

Yes, that has been the decision.  It's too hard to maintain: there is a
list of packages and a search facility (for all loaded packages, or
all packages in all currently specified libraries).

Note that the functions.html only worked on one platform (Unix) and
one browser (Netscape).  (Slight exaggeration.)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sint@oeaw.ac.at  Thu May 10 22:31:59 2001
From: sint@oeaw.ac.at (sint@oeaw.ac.at)
Date: Thu, 10 May 2001 23:31:59 +0200 (MET DST)
Subject: [Rd] name creation with index arrays (PR#937)
Message-ID: <200105102131.XAA12164@pubhealth.ku.dk>

Full_Name: Peter Sint
Version: 1.22
OS: MacOS 9.04
Submission from: (NULL) (193.170.84.51)


The not so serious problem is probably not specific to Macintosh although I
found it there:

The small example from  R-intro works .
> x <- array(1:20,dim=c(4,5))
> i <- array(c(1:3,3:1),dim=c(3,2))
> i
  [,1] [,2]
[1,] 1 3
[2,] 2 2
[3,] 3 1
> x[i]
[1] 9 6 3

x[i] has no attribute!
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 9 13 17
[2,] 2 6 10 14 18
[3,] 3 7 11 15 19
[4,] 4 8 12 16 20
> x[i] <- 0
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 0 13 17
[2,] 2 0 10 14 18
[3,] 0 7 11 15 19
[4,] 4 8 12 16 20
>

>  colnames(x)<- c("c1","c2","c3","c4","c5")
> x[i]
[1] 9 6 3

BUT
> rownames(x)<- c("r1","r2","r3","r4")
> x[i]
NA NA r3 
 9  6  3 
> 
Rownames result in unsuccessful name formation (colnames do most likely not, but
this may depend on the order in the index array i). Better drop name making if
not o.k.

(Replacement [<- still works. 
Index matrices do not work on data frames, not a bug but a missing feature with
work around)
Reproduce:
x <- array(1:20,dim=c(4,5))
i <- array(c(1:3,3:1),dim=c(3,2))
i
x[i]
x
x[i] <- 0
x
colnames(x)<- c("c1","c2","c3","c4","c5")
x[i]
rownames(x)<- c("r1","r2","r3","r4")
x[i]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From sint@oeaw.ac.at  Thu May 10 22:39:54 2001
From: sint@oeaw.ac.at (sint@oeaw.ac.at)
Date: Thu, 10 May 2001 23:39:54 +0200 (MET DST)
Subject: [Rd] name creation with index arrays (PR#938)
Message-ID: <200105102139.XAA12199@pubhealth.ku.dk>

Full_Name: Peter Sint
Version: 1.22
OS: MacOS 9.04
Submission from: (NULL) (193.170.84.51)


The not so serious problem is probably not specific to Macintosh although I
found it there:

The small example from  R-intro works .
> x <- array(1:20,dim=c(4,5))
> i <- array(c(1:3,3:1),dim=c(3,2))
> i
  [,1] [,2]
[1,] 1 3
[2,] 2 2
[3,] 3 1
> x[i]
[1] 9 6 3

x[i] has no attribute!
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 9 13 17
[2,] 2 6 10 14 18
[3,] 3 7 11 15 19
[4,] 4 8 12 16 20
> x[i] <- 0
> x
  [,1] [,2] [,3] [,4] [,5]
[1,] 1 5 0 13 17
[2,] 2 0 10 14 18
[3,] 0 7 11 15 19
[4,] 4 8 12 16 20
>

>  colnames(x)<- c("c1","c2","c3","c4","c5")
> x[i]
[1] 9 6 3

BUT
> rownames(x)<- c("r1","r2","r3","r4")
> x[i]
NA NA r3 
 9  6  3 
> 
Rownames result in unsuccessful name formation (colnames do most likely not, but
this may depend on the order in the index array i). Better drop name making if
not o.k.

(Replacement [<- still works. 
Index matrices do not work on data frames, not a bug but a missing feature with
work around)
Reproduce:
x <- array(1:20,dim=c(4,5))
i <- array(c(1:3,3:1),dim=c(3,2))
i
x[i]
x
x[i] <- 0
x
colnames(x)<- c("c1","c2","c3","c4","c5")
x[i]
rownames(x)<- c("r1","r2","r3","r4")
x[i]

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From zeileis@ci.tuwien.ac.at  Fri May 11 15:15:30 2001
From: zeileis@ci.tuwien.ac.at (Achim Zeileis)
Date: Fri, 11 May 2001 16:15:30 +0200
Subject: [Rd] new package 'strucchange'
Message-ID: <3AFBF402.F4EA7E9B@ci.tuwien.ac.at>

There is a new package in the devel-section of CRAN called 'strucchange'
providing functions for testing on structural change in linear
regression relationships.
It features tests/methods from the generalized fluctuation test
framework as well as from the F test (Chow test) framework. This
includes methods to fit, plot and test fluctuation processes (e.g.,
CUSUM, MOSUM, recursive/moving estimates) and F statistics,
respectively. Furthermore it is possible to monitor incoming data
online.

It only works with the current development version of R (forthcoming
1.3.x).

Package: strucchange
Version: 0.9
Date: 2001-05-09
Title: Tests on Structural Change
Author: Achim Zeileis, Bruce Hansen, Kurt Hornik,
        Christian Kleiber, Fritz Leisch, Andrea Peters
Maintainer: Achim Zeileis <zeileis@ci.tuwien.ac.at>
Description: Various tests on structural change in linear regression
models.
Depends: R (>= 1.3.0)
License: GPL


--------------------------- 
Achim Zeileis
Institut fr Statistik
Technische Universitt Wien
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From david.firth@nuf.ox.ac.uk  Fri May 11 16:59:31 2001
From: david.firth@nuf.ox.ac.uk (david.firth@nuf.ox.ac.uk)
Date: Fri, 11 May 2001 17:59:31 +0200 (MET DST)
Subject: [Rd] Windows, RCMD INSTALL and path (PR#939)
Message-ID: <200105111559.RAA15284@pubhealth.ku.dk>

Full_Name: David Firth
Version: 1.2.3
OS: Windows NT4
Submission from: (NULL) (163.1.103.107)


Two things that look like bugs:

1.  RCMD INSTALL does not seem to cope with quotes in the Windows path.  With my
path set to

  PATH="C:\R\Rtools";"C:\R\rw1023\bin";C:\Perl\bin\;C:\WINNT\system32;C:\WINNT;C:\
 
  mingw2\bin

I get, for example, 

  C:\R>RCMD INSTALL boot
  RCMD INSTALL boot

  make: Entering directory `/cygdrive/c/R/rw1023/src/gnuwin32'
  make DLLNM=  EXTRADOCS= \
    -C C:/R/boot PKG=boot RHOME=C:/R/rw1023 RLIB=C:/R/rw1023/library \
    -f C:/R/rw1023/src/gnuwin32/MakePkg
  make: make: Command not found
  make: *** [pkg-boot] Error 127
  make: Leaving directory `/cygdrive/c/R/rw1023/src/gnuwin32'
  *** Installation of boot failed ***

But if I remove the quotes, as in

  PATH=C:\R\Rtools;C:\R\rw1023\bin;C:\Perl\bin\;C:\WINNT\system32;C:\WINNT;C:\ 

  mingw2\bin

then all goes as it should.

(Why do I have the quotes there anyway, you ask?  Well, I started out with

  PATH="C:Program Files\R\Rtools";"C:Program
Files\R\rw1023\bin";C:\Perl\bin\;C:\
  WINNT\system32;C:\WINNT;C:\mingw2.bin

but then RCMD INSTALL failed even more rapidly, presumably on account of the
space in the directory name?)

If this can't be fixed, perhaps add a note in the documentation about these
things?  (I looked in "Writing R Extensions" but found no mention of this
problem.)

2.  A smaller thing I noticed in help(INSTALL): under "Usage:" it should say
"Rcmd", not "Rcnd".

Best regards -- David


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 11 18:21:47 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 11 May 2001 18:21:47 +0100 (BST)
Subject: [Rd] Windows, RCMD INSTALL and path (PR#939)
In-Reply-To: <200105111559.RAA15284@pubhealth.ku.dk>
Message-ID: <Pine.GSO.4.31.0105111815140.12696-100000@toucan.stats>

On Fri, 11 May 2001 david.firth@nuffield.oxford.ac.uk wrote:

> Full_Name: David Firth
> Version: 1.2.3
> OS: Windows NT4
> Submission from: (NULL) (163.1.103.107)
>
>
> Two things that look like bugs:
>
> 1.  RCMD INSTALL does not seem to cope with quotes in the Windows path.  With my

I'd say the other way round. Nowhere does it say that it will work with
quotes.

> path set to
>
>   PATH="C:\R\Rtools";"C:\R\rw1023\bin";C:\Perl\bin\;C:\WINNT\system32;C:\WINNT;C:\
>
>   mingw2\bin
>
> I get, for example,
>
>   C:\R>RCMD INSTALL boot
>   RCMD INSTALL boot
>
>   make: Entering directory `/cygdrive/c/R/rw1023/src/gnuwin32'
>   make DLLNM=  EXTRADOCS= \
>     -C C:/R/boot PKG=boot RHOME=C:/R/rw1023 RLIB=C:/R/rw1023/library \
>     -f C:/R/rw1023/src/gnuwin32/MakePkg
>   make: make: Command not found
>   make: *** [pkg-boot] Error 127
>   make: Leaving directory `/cygdrive/c/R/rw1023/src/gnuwin32'
>   *** Installation of boot failed ***
>
> But if I remove the quotes, as in
>
>   PATH=C:\R\Rtools;C:\R\rw1023\bin;C:\Perl\bin\;C:\WINNT\system32;C:\WINNT;C:\
>
>   mingw2\bin
>
> then all goes as it should.
>
> (Why do I have the quotes there anyway, you ask?  Well, I started out with
>
>   PATH="C:Program Files\R\Rtools";"C:Program
> Files\R\rw1023\bin";C:\Perl\bin\;C:\
>   WINNT\system32;C:\WINNT;C:\mingw2.bin
>
> but then RCMD INSTALL failed even more rapidly, presumably on account of the
> space in the directory name?)
>
> If this can't be fixed, perhaps add a note in the documentation about these
> things?  (I looked in "Writing R Extensions" but found no mention of this
> problem.)

We didn't ask you to stop beating your wife because it never occurred to
us that you would....

Note, though, this is a problem with the tools, not with anything we
provide, and the rw-FAQ does warn about spaces in paths.  Latex, for
example, will fail with spaces in path names.

Also

Building
--------

You also need the R source (R-1.3.0.tgz).

Then: untar R-1.3.0.tgz somewhere (with no spaces in the path names),

might be hint.

>
> 2.  A smaller thing I noticed in help(INSTALL): under "Usage:" it should say
> "Rcmd", not "Rcnd".

Already fixed.


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From albrecht.gebhardt@uni-klu.ac.at  Sat May 12 10:15:02 2001
From: albrecht.gebhardt@uni-klu.ac.at (Albrecht Gebhardt)
Date: Sat, 12 May 2001 11:15:02 +0200 (MET DST)
Subject: [Rd] Re: [R] R for ARM Linux (moved from r-help to r-devel)
In-Reply-To: <CB38030C8A89D311B35400062950C38F8E0497@neimp5.nei.nih.gov>
Message-ID: <Pine.OSF.4.21.0105121018080.26392-100000@zidsrv.sci.uni-klu.ac.at>

On Fri, 11 May 2001, Cox, Terry (NEI) wrote:

> I am interested in your efforts to port R to ARM Linux.  If you are
> successful, then I have a good reason to spend the money to buy a Compaq
> iPAQ.

I have compiled R-1.2.2 for arm-linux (iPAQ) on the skiffcluster, an ARM
compile farm accessible at 

  http://www.handhelds.org/projects/skiffcluster.html

and R-1.2.3 using cross compilation tools on x86 linux (cross compilers
are also available at www.handhelds.org).

Compilation went smoothly, it is possible to start the resulting binary,
it prints its version as:
> version
         _                       
platform armv4l-unknown-linux-gnu
arch     armv4l                  
os       linux-gnu               
system   armv4l, linux-gnu       
status                           
major    1                       
minor    2.2                     
year     2001                    
month    02                      
day      26                      
language R                       

but it still fails to pass the tests ("make test"):
make test (with 1.2.2) stops at
......
running `simple-true.R'
comparing `simple-true.Rout' to `./simple-true.Rout.save' ...33c33
< [1] FALSE
---
> [1] TRUE
148c148
< [1] FALSE
---
> [1] TRUE

The problem is, that there is no FPU in these devices (ARM processors
generally can include FPUs but not the Intel StrongARM used in those
little PDAs), so arm-linux comes with a floating point emulation
and I guess this causes the troubles. 

Of course simple things like
 > x<-c(1,2,3)
 > mean(x)
 [1] 2 
work, but even when it comes to simple plots the next problems
arise (wrong plot coordinates resulting in strange pictures).

This reminds me the problems we had with R on alpha/tru64 some time ago
(they where also generated by numeric problems, 64 versus 32 bit in this
case) and had similar results (plots didnt work and so on).

Everybody who is interested can check it at one of the skiffcluster
machines:

telnet skiffclusterX.handhelds.org (X in 1,2,3,4,5,6) 
login guest, no password.

  skiffcluster6:~$ cd agebhars@uni-klu.ac.at
  skiffcluster6:~/agebhard@uni-klu.ac.at$ ls
  R-1.2.2  R-root  minicom-1.83.1

You'll find there a source tree (R-1.2.2), and a install tree (R-root).
So try runnning "./R-root/bin/R" or do a "make test" in R-1.2.2.

The next problem with R on iPAQ will be size: With standard settings you
have only 16MB flash which holds a minimum linux distribution and leaves
you with ~3MB of free space. But we would need this already for R.bin:

  skiffcluster6:~/agebhard@uni-klu.ac.at$ ls -l R-root/lib/R/bin/R.bin
  -rwxr-xr-x    1 guest    users     3221131 Mar 31 12:53 R-root/lib/R/bin/R.bin

and the base libraries would take the next 13MB:

  skiffcluster6:~/agebhard@uni-klu.ac.at$ du -s R-root/lib/R/library/
  13372   R-root/lib/R/library

So if you want to put R on the iPAQ there will be the need for extra
memory (IBM microdrive or CF flash memory). But you will come to this
conclusion anyway, whether installing R or not, because you will also need
other things like perl, python, tcltk, ... which alltogether won't fit
into the base 16MB flash. 

But nevertheless, one task in porting for PDAs like the iPAQ will be to
reduce the basic R installation in size, cutting of unnecessary help
formats, scripts, may be even some of the datasets, and reducing the size
of the base library by moving non core functions out to libraries.

Currently I'm experimenting with the crosscompiler setup on a x86 linux
machine and R-1.2.3. I'm running R on a H3600 iPAQ 

  http://www.compaq.com/products/quickspecs/10632_na/10632_na.HTML

with 16MB flash and 32MB RAM.

R resides NFS mounted across a serial ppp link on my x86 linux box, but I
will soon upgrade to additional flash memory so that I can put R directly
on the PDA.

> 
> Terry A. Cox, MD, PhD
> National Eye Institute
> 
> National Institutes of Health
> 31 Center Drive, MSC 2510
> Building 31, Room 6A52
> Bethesda, MD 20892-2510
> 
> Phone: 301-496-6583
> FAX: 301-496-2297
> Email: tac@nei.nih.gov
> 
> -----Original Message-----
> From: Kurt Hornik [mailto:Kurt.Hornik@ci.tuwien.ac.at]
> Sent: Friday, May 11, 2001 3:27 PM
> To: Cox, Terry (NEI)
> Cc: 'r-help@lists.R-project.org'
> Subject: Re: [R] R for ARM Linux
> 
> 
> >>>>> Cox, Terry (NEI) writes:
> 
> > Would it be possible to port R to ARM Linux for Compaq iPaq and similar
> > handheld computers?  (See http://handhelds.org/).
> 
> I think Albrecht Gebhardt <albrecht.gebhardt@uni-klu.ac.at> has mostly
> get this to work.

still some work to do, see above ;)

> 
> -k
> 

Albrecht

// Albrecht Gebhardt          Tel.: (++43 463) 2700/3118
// Institut fuer Mathematik   Fax : (++43 463) 2700/3198
// Universitaet Klagenfurt    mailto:albrecht.gebhardt@uni-klu.ac.at
// Universitaetsstr. 65       http://www-stat.uni-klu.ac.at/~agebhard
// A-9020 Klagenfurt, Austria 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Sun May 13 17:39:26 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Sun, 13 May 2001 18:39:26 +0200
Subject: [Rd] ks.test in ctest package (PR#934)
In-Reply-To: <200105080449.GAA03028@pubhealth.ku.dk>
References: <200105080449.GAA03028@pubhealth.ku.dk>
Message-ID: <15102.47294.305460.849618@mithrandir.hornik.net>

>>>>> mh smith writes:

> 1.  There is, I believe, some redundant code in the calculation of the
> test statistic in ks.test in the package ctest.

Thanks, fixed.

> 2.    The manual entry should also make it clear that the one-sided
> tests are not about theactual cdf in relation to the null hypothsis cdf
> Fo, but about the quantiles of the actual distribution in relation to
> the quantiles of the null hypothesis cdf.

> ...

THanks for catching this bug.  This should really give the usual
behavior that e.g. `alternative = "less"' means H_0: F >= F_0 for all
points vs H_a: F(t) < F_0(t) for some t.  Fixed now.

> 3.    Another feature that it would be very useful to add to ks.test
> would be the automatic return of  a confidence interval for the actual
> cdf F.  Adding a conf.level argument and taking the form of the interval
> from the value of the alternative argument would be a relatively simple
> task, although it would require .  This would bring the value of the
> function into line with the t.test function.

I am not sure whether we want to do this in the simple htest framework.
Attempting to print a confidence interval given by two functions rather
than two values will be confusing.  I'd much rather have users do

	confint(ecdf(x), conf.level = 0.95)

where a generic confint as in MASS with a method for objects of class
"ecdf" as in stepfun.

[The ``classical'' tests conceptually are really about a single
parameter only.  Should this be changed?  One could argue that if a
hypothesis about the underlying distribution function is tested ...]

-k
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Mon May 14 00:47:25 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Sun, 13 May 2001 19:47:25 -0400 (EDT)
Subject: [Rd] Dynamic C Symbols and Embedding Suggestion
Message-ID: <Pine.GSO.4.10.10105131930300.12616-100000@hsph.harvard.edu>


Hello, I've been playing around w/ the new dynamic C symbol stuff (thank
you for doing that!) in the, um, 5/11/01 R-devel package and, unless I've
missed something incredibly obvious, there doesn't appear to be a
mechanism for registering functions of an embedding executable. It seems
like this would be a Good Thing to have. 

Since I'm doing most of my work in Windows at the moment (all of the
embedding apps I'm working on are Windows based so I've not really messed
w/ the *NIX embedding stuff) I did a little experiment to see if I could
bind my primary executable. Adding the code below to Rdynload.c seemed to
work (in the Windows case). You'll note the remarkable resemblance to
AddDLL. :-) My test code calls this to set up its function list just after
R_ReplDllinit() just before entering the do1-loop--- though perhaps this
should be integrated into some part of the setup procedure for embedding
apps.


DllInfo* R_RegisterEmbeddedExecutable(HINSTANCE handle,char* path)
{
	char* dpath,*name,DLLname[PATH_MAX], *p;

	DeleteDLL(path);
	if(CountDLL == MAX_NUM_DLLS) {
		strcpy(DLLerror,"unable to register embedded executable.
too many libraries");
		return 0;
	}

    dpath = malloc(strlen(path)+1);
    if(dpath == NULL) {
	strcpy(DLLerror,"Couldn't allocate space for 'path'");
	return 0;
    }
    strcpy(dpath, path);
    
    if(R_osDynSymbol->fixPath)
	R_osDynSymbol->fixPath(dpath);

    p = strrchr(dpath, R_DIR_SEPARATOR); 
    if(!p) p = dpath; else p++;
    strcpy(DLLname, p);
    p = strchr(DLLname, '.');
    if(p) *p = '\0';
    name = malloc(strlen(DLLname)+1);
    if(name == NULL) {
	strcpy(DLLerror,"Couldn't allocate space for 'name'");
	free(dpath);
	return 0;
    }
    strcpy(name, DLLname);

    LoadedDLL[CountDLL].path = dpath;
    LoadedDLL[CountDLL].name = name;
    LoadedDLL[CountDLL].handle = handle;

    LoadedDLL[CountDLL].numCSymbols = 0;
    LoadedDLL[CountDLL].numCallSymbols = 0;
    LoadedDLL[CountDLL].numFortranSymbols = 0;
    LoadedDLL[CountDLL].CSymbols = NULL;
    LoadedDLL[CountDLL].CallSymbols = NULL;
    LoadedDLL[CountDLL].FortranSymbols = NULL;

	return LoadedDLL + (CountDLL++);

}



Byron Ellis (bellis@hsph.harvard.edu)

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 14 11:04:53 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 14 May 2001 12:04:53 +0200
Subject: [Rd] solve( <complex> ) etc
Message-ID: <15103.44485.793022.830982@gargle.gargle.HOWL>

For porting some (time series related) software from S-plus,
I need  solve() {i.e.  solve.qr() }  to work with complex matrices.

I have had a similar request for this from a local user a while back already.
Till R-1.x.y {at least x=y=0} we have had complex Linpack and BLAS in R's 
sources src/appl/z*.f  but never had an R interface anyway and subsequently
have dropped it.

Should we have a package or a `module' (new in R-1.3) 
for providing complex linear algebra in R?
 
Has anyone done some of the work already?
R-devel readers, thanks for your  support!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From duncan@research.bell-labs.com  Mon May 14 13:53:29 2001
From: duncan@research.bell-labs.com (Duncan Temple Lang)
Date: Mon, 14 May 2001 08:53:29 -0400
Subject: [Rd] Dynamic C Symbols and Embedding Suggestion
In-Reply-To: <Pine.GSO.4.10.10105131930300.12616-100000@hsph.harvard.edu>; from bellis@hsph.harvard.edu on Sun, May 13, 2001 at 07:47:25PM -0400
References: <Pine.GSO.4.10.10105131930300.12616-100000@hsph.harvard.edu>
Message-ID: <20010514085329.S10120@jessie.research.bell-labs.com>

Byron Ellis wrote:
> 
> Hello, I've been playing around w/ the new dynamic C symbol stuff (thank
> you for doing that!) in the, um, 5/11/01 R-devel package and, unless I've
> missed something incredibly obvious, there doesn't appear to be a
> mechanism for registering functions of an embedding executable. It seems
> like this would be a Good Thing to have. 

Hi Byron,

You are correct. There is no way to explicitly make the symbols of the
host/embedding application available to R. As you point out, the code
below looks like the second half of the AddDLL() routine. And we
should arrange AddDLL() to perform the loading of the code and then
call another routine to register it at the end of the LoadedDLL
array. In this way, the host application can also call this second
routine itself (or even override it, if that should every be useful).


One reason for this omission is that I haven't yet found a need for
it. But the embedding R in another application is still reasonably recent
(at least on Unix), so the more we found out about what is needed, the better.

Here are some reasons I think we haven't needed to be able to access
the symbols in the host application.

Firstly, most C routines are not directly callable from R. Certainly
those accessed by .Call, .External require knowledge of R. Because of this
explicit dependency on libR.so, and the need to ensure that
they are called only after R has been initialized makes it more sensible
to load them as a regular R package as part of the post-initialization of R.

Routines accessed via .C and .Fortran typically need an extra layer
of indirection to handle arguments as they come from R to the native code.
For example, an S call
  .C("foo", x, length(x))
might map to the C routine
   void foo(double *x, Sint *len) {
      realFoo(x, *len);
   }

The real routine is realFoo() and we have to convert the length
argument to a scalar rather than a pointer to a scalar.  In this
setup, R need never know about realFoo() explicitly. It will be
resolved by the dynamic loader (for better or worse).  Luke and I (at
the very least) are keen to avoid the dynamic loader and to have
people explicitly link against libraries as it avoids
platform-specific nuances of the loader that are very hard to control.


The examples where it is useful for R to be able to see symbols in the
host application are those that take no arguments and whose value is
ignored. Are there any interesting examples of this? 

Thanks for pointing out the idea of separating the two task currently
performed by AddDLL(). I'll separate them later today.

 D.

> 
> Since I'm doing most of my work in Windows at the moment (all of the
> embedding apps I'm working on are Windows based so I've not really messed
> w/ the *NIX embedding stuff) I did a little experiment to see if I could
> bind my primary executable. Adding the code below to Rdynload.c seemed to
> work (in the Windows case). You'll note the remarkable resemblance to
> AddDLL. :-) My test code calls this to set up its function list just after
> R_ReplDllinit() just before entering the do1-loop--- though perhaps this
> should be integrated into some part of the setup procedure for embedding
> apps.
> 
> 
> DllInfo* R_RegisterEmbeddedExecutable(HINSTANCE handle,char* path)
> {
> 	char* dpath,*name,DLLname[PATH_MAX], *p;
> 
> 	DeleteDLL(path);
> 	if(CountDLL == MAX_NUM_DLLS) {
> 		strcpy(DLLerror,"unable to register embedded executable.
> too many libraries");
> 		return 0;
> 	}
> 
>     dpath = malloc(strlen(path)+1);
>     if(dpath == NULL) {
> 	strcpy(DLLerror,"Couldn't allocate space for 'path'");
> 	return 0;
>     }
>     strcpy(dpath, path);
>     
>     if(R_osDynSymbol->fixPath)
> 	R_osDynSymbol->fixPath(dpath);
> 
>     p = strrchr(dpath, R_DIR_SEPARATOR); 
>     if(!p) p = dpath; else p++;
>     strcpy(DLLname, p);
>     p = strchr(DLLname, '.');
>     if(p) *p = '\0';
>     name = malloc(strlen(DLLname)+1);
>     if(name == NULL) {
> 	strcpy(DLLerror,"Couldn't allocate space for 'name'");
> 	free(dpath);
> 	return 0;
>     }
>     strcpy(name, DLLname);
> 
>     LoadedDLL[CountDLL].path = dpath;
>     LoadedDLL[CountDLL].name = name;
>     LoadedDLL[CountDLL].handle = handle;
> 
>     LoadedDLL[CountDLL].numCSymbols = 0;
>     LoadedDLL[CountDLL].numCallSymbols = 0;
>     LoadedDLL[CountDLL].numFortranSymbols = 0;
>     LoadedDLL[CountDLL].CSymbols = NULL;
>     LoadedDLL[CountDLL].CallSymbols = NULL;
>     LoadedDLL[CountDLL].FortranSymbols = NULL;
> 
> 	return LoadedDLL + (CountDLL++);
> 
> }
> 
> 
> 
> Byron Ellis (bellis@hsph.harvard.edu)
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Mon May 14 16:28:18 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Mon, 14 May 2001 11:28:18 -0400 (EDT)
Subject: [Rd] Dynamic C Symbols and Embedding Suggestion
In-Reply-To: <20010514085329.S10120@jessie.research.bell-labs.com>
Message-ID: <Pine.GSO.4.10.10105141115380.13899-100000@hsph.harvard.edu>

On Mon, 14 May 2001, Duncan Temple Lang wrote:

> Byron Ellis wrote:
> > 
> 
> One reason for this omission is that I haven't yet found a need for
> it. But the embedding R in another application is still reasonably recent
> (at least on Unix), so the more we found out about what is needed, the better.
> 
> Here are some reasons I think we haven't needed to be able to access
> the symbols in the host application.
> 
> Firstly, most C routines are not directly callable from R. Certainly
> those accessed by .Call, .External require knowledge of R. Because of this
> explicit dependency on libR.so, and the need to ensure that
> they are called only after R has been initialized makes it more sensible
> to load them as a regular R package as part of the post-initialization of R.
> 
> Routines accessed via .C and .Fortran typically need an extra layer
> of indirection to handle arguments as they come from R to the native code.
> For example, an S call
>   .C("foo", x, length(x))
> might map to the C routine
>    void foo(double *x, Sint *len) {
>       realFoo(x, *len);
>    }
> 
> The real routine is realFoo() and we have to convert the length
> argument to a scalar rather than a pointer to a scalar.  In this
> setup, R need never know about realFoo() explicitly. It will be
> resolved by the dynamic loader (for better or worse).  Luke and I (at
> the very least) are keen to avoid the dynamic loader and to have
> people explicitly link against libraries as it avoids
> platform-specific nuances of the loader that are very hard to control.
> 
> 
> The examples where it is useful for R to be able to see symbols in the
> host application are those that take no arguments and whose value is
> ignored. Are there any interesting examples of this? 

I'm not thinking so much in terms of random C functions that we may want
to call from R--- but rather functions which are intended to be called
from R but need to be in the host application for one reason or another.
Two immediate examples come to my mind (at least on the Windows
platform--you should be able to get around this first one in X and the
second doesn't apply to *NIX platforms :-)):

1. GUI interfaces a la S-Plus. That is to say the ability to add menus or
other things (graphics devices, etc.) to the primary GUI interface from R.
For instance, I have a piece of code that lets me attach arbitrary R
expressions to menu items which are then executed by taking over the
console interface temporarily (with the option to suppress output). In the
case of the official R GUI obviously you don't have this problem since it
is relatively tightly coupled to the core engine and the executable itself
doesn't really do anything.

2. An ActiveX control (see, doesn't apply ;-)). In this situation
(specifically embedding R in Internet Explorer to match the SNetscape
control since IE has something like 97% of the Windows desktop
marketshare) I can't use the hack described in my original email since
GetModuleHandle(NULL) returns IEXPLORE.EXE not a handle to the COM DLL
(unfortunate, but true). In this case I'd like to add some links between
the Javascript event model and R so I need to expose the fire*
functionality.

> 
> Thanks for pointing out the idea of separating the two task currently
> performed by AddDLL(). I'll separate them later today.

Nifty.

> 
>  D.



Byron Ellis (bellis@hsph.harvard.edu)


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May 15 17:51:01 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 15 May 2001 12:51:01 -0400
Subject: [Rd] truncate
Message-ID: <3B015E75.35CCF08@bank-banque-canada.ca>

I see in the devel snapshot there is a new generic method

> truncate
function (con, ...)
UseMethod("truncate")

which conflicts with a generic method in one of my packages:

> truncate
function (x, start = NULL, end = NULL)
{
    UseMethod("truncate")
}

I don't think there is a problem, but there used to be a recommendation to use the
same name for the first argument in generic and specific methods. Is that still
important?

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Tue May 15 18:00:44 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Tue, 15 May 2001 18:00:44 +0100 (BST)
Subject: [Rd] truncate
In-Reply-To: <3B015E75.35CCF08@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>

On Tue, 15 May 2001, Paul Gilbert wrote:

> I see in the devel snapshot there is a new generic method
>
> > truncate
> function (con, ...)
> UseMethod("truncate")
>
> which conflicts with a generic method in one of my packages:
>
> > truncate
> function (x, start = NULL, end = NULL)
> {
>     UseMethod("truncate")
> }
>
> I don't think there is a problem, but there used to be a recommendation to use the
> same name for the first argument in generic and specific methods. Is that still
> important?

It is desirable in R, important in S, essential in S-PLUS 6.0.

There is already a truncate function in Rstreams, BTW, which this
is intended to supersede.  That (and that in R-devel) do mean the same as
the system call truncate(3c), which I guess yours does not.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May 15 18:28:01 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 15 May 2001 13:28:01 -0400
Subject: [Rd] truncate
References: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>
Message-ID: <3B016720.73F88B23@bank-banque-canada.ca>

PG> I don't think there is a problem, but there used to be a recommendation to use
the
PG> same name for the first argument in generic and specific methods. Is that still
PG> important?

BDR>It is desirable in R, important in S, essential in S-PLUS 6.0.

BDR>There is already a truncate function in Rstreams, BTW, which this
BDR>is intended to supersede.  That (and that in R-devel) do mean the same as
BDR>the system call truncate(3c), which I guess yours does not.

I guess if functions are going to be moving from packages into base there will be a
lot more chance for name conflicts. Generic functions help a lot to solve this but it
seems a naming convention for the first argument may be a good idea too. Some time
ago I changed many of my generic functions to use "x" as the first argument (on
someone's recommendation).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From thoffman@zappa.sax.de  Tue May 15 22:36:37 2001
From: thoffman@zappa.sax.de (thoffman@zappa.sax.de)
Date: Tue, 15 May 2001 23:36:37 +0200 (MET DST)
Subject: [Rd] GCircle(): fails for non-clippable devices under certain circumstances (see below) (PR#940)
Message-ID: <200105152136.XAA19124@pubhealth.ku.dk>

The following code snippet from graphics.c: GCircle() (around line 3100) fails for devices which 
can not clip (dd->dp.canClip==0) and try to plot a circle that does not fit into the plot region, but
fits into the device region, see inserted comments:

....
    result = clipCircleCode(x, y, coords, ir, dd);
// result>0, because circle does not fit into plot region (for dd->gp.xpd=0)

    switch (result) {
    case -2: /* No clipping;  draw all of circle */
        dd->dp.circle(x, y, coords, ir, bg, fg, dd);
        break;
    case -1: /* Total clipping; draw nothing */
        break;
    default: /* Partial clipping; draw poly[line|gon] */
// we proceed here:
        dd->gp.xpd = 2;
// check clipping for the device region:
        result = clipCircleCode(x, y, coords, ir, dd);
// ...if it fits, result=-2: ouch, we have thrown away the result from the 1st check!
        dd->gp.xpd = xpdsaved;
        if (dd->dp.canClip && result == -2) {
// ...but it does not matter if we can clip!
            GClip(dd);
            dd->dp.circle(x, y, coords, ir, bg, fg, dd);
        }
        else {
//...BUT if we can not clip, then we call for trouble:
            vmax = vmaxget();$

....
    default: /* Partial clipping; draw poly[line|gon] */
      if (dd->dp.canClip) {
	dd->gp.xpd = 2;
	result = clipCircleCode(x, y, coords, ir, dd);
	dd->gp.xpd = xpdsaved;
	if (result == -2) {
	    GClip(dd);
	    dd->dp.circle(x, y, coords, ir, bg, fg, dd);
	    break;
	}
      }
      vmax = vmaxget();
      xc = (double*)R_alloc(result+1, sizeof(double));
      yc = (double*)R_alloc(result+1, sizeof(double));
      GConvert(&x, &y, coords, DEVICE, dd);
      convertCircle(x, y, ir, result, xc, yc, dd);
      if (bg == NA_INTEGER) {
	dd->gp.col = fg;
	GPolyline(result+1, xc, yc, DEVICE, dd);
      }
      else {
	int npts;
	double *xcc, *ycc;
	xcc = ycc = 0;	/* -Wall */
	npts = GClipPolygon(xc, yc, result, DEVICE, 0, xcc, ycc, dd);
	if (npts > 1) {
	  xcc = (double*)R_alloc(npts, sizeof(double));
	  ycc = (double*)R_alloc(npts, sizeof(double));
	  npts = GClipPolygon(xc, yc, result, DEVICE, 1,
			      xcc, ycc, dd);
	  dd->dp.polygon(npts, xcc, ycc, DEVICE, bg, fg, dd);
	}
      }
      vmaxset(vmax);
    }
}


This works at least in my test case at

> version
         _
platform i386-pc-os2_emx
arch     i386
os       os2_emx
system   i386, os2_emx
status
major    1
minor    2.2
year     2001
month    02
day      26
language R


Thomas Hoffmann.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlm21@cam.ac.uk  Wed May 16 12:49:35 2001
From: tlm21@cam.ac.uk (tlm21@cam.ac.uk)
Date: Wed, 16 May 2001 13:49:35 +0200 (MET DST)
Subject: [Rd] Mistake in qbeta.c ? (PR#941)
Message-ID: <200105161149.NAA27502@pubhealth.ku.dk>

Full_Name: Tim Massingham
Version: 1.2.2
OS: Debian/Linux
Submission from: (NULL) (131.111.8.68)


In 1.2.2 sources (also in 0.90.1. I haven't been able to check other versions)
Line 103 in qbeta.c should read:
w = y * sqrt(h + r) / h - (t - s) * (r + 5. / 6. - 2 / (3 * h));

since otherwise the 5 / 6 will evaluate to zero (I think).
The Statlib fortran code uses five / six instead.

Cheers, thanks for great software.

	  TimM.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 16 15:21:59 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 16 May 2001 10:21:59 -0400
Subject: [Rd] truncate
References: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>
Message-ID: <3B028D07.2A00CDD6@bank-banque-canada.ca>

Brian

I've changed the name of my truncate function. In this case I think
problems of conflicts in code could easily be resolved, but I don't
understand how conflicts in the documentation would be resolved.

However, please do keep in mind that adding things to base is
problematic because of name space conflicts. This case was relatively
easy for me, but some functions would be much more difficult because of
all the implications for documentation and other code using the
packages.

Best,
Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 16 15:40:24 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 May 2001 16:40:24 +0200
Subject: [Rd] Mistake in qbeta.c ? (PR#941)
In-Reply-To: tlm21@cam.ac.uk's message of "Wed, 16 May 2001 13:49:35 +0200 (MET DST)"
References: <200105161149.NAA27502@pubhealth.ku.dk>
Message-ID: <x2ofst5pd3.fsf@blueberry.kubism.ku.dk>

tlm21@cam.ac.uk writes:

> Full_Name: Tim Massingham
> Version: 1.2.2
> OS: Debian/Linux
> Submission from: (NULL) (131.111.8.68)
> 
> 
> In 1.2.2 sources (also in 0.90.1. I haven't been able to check other versions)
> Line 103 in qbeta.c should read:
> w = y * sqrt(h + r) / h - (t - s) * (r + 5. / 6. - 2 / (3 * h));
> 
> since otherwise the 5 / 6 will evaluate to zero (I think).
> The Statlib fortran code uses five / six instead.
> 
> Cheers, thanks for great software.

Whoops! Fortunately it sits in code that calculates an initial
approximation, so one would hope it only affects speed of convergence. 
Thanks for pointing that out.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 16 16:15:46 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 16 May 2001 16:15:46 +0100 (BST)
Subject: [Rd] truncate
In-Reply-To: <3B028D07.2A00CDD6@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0105161613080.14396-100000@gannet.stats>

On Wed, 16 May 2001, Paul Gilbert wrote:

> Brian
>
> I've changed the name of my truncate function. In this case I think
> problems of conflicts in code could easily be resolved, but I don't
> understand how conflicts in the documentation would be resolved.
>
> However, please do keep in mind that adding things to base is
> problematic because of name space conflicts. This case was relatively
> easy for me, but some functions would be much more difficult because of
> all the implications for documentation and other code using the
> packages.

A later version of R may well have namespaces.  But please do bear in mind
that the names of standard C-level functions are likely to be used for the
same purpose in R.  Little-used packages (and there are over 100 packages
by now) cannot be given veto rights.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 16 16:51:29 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 16 May 2001 11:51:29 -0400
Subject: [Rd] truncate
References: <Pine.LNX.4.31.0105161613080.14396-100000@gannet.stats>
Message-ID: <3B02A200.BD4DC773@bank-banque-canada.ca>

BDR>But please do bear in mind that the names of standard C-level
BDR>functions are likely to be used for the same purpose in R.

I understand that this is convenient but I don't know why it should be
true. Wouldn't a convention like "C.truncate" make more sense?  Do you
expect R users to know the names of standard C function so they can
avoid them?  I doubt that most do. Do fortran or perl have the same
privilege?

BDR>Little-used packages (and there are over 100 packages
BDR>by now) cannot be given veto rights.

I think that you should assume that anything that gets to the point of
being a package is used a lot by at least some users. If you say you are
going to clobber the name space in base whenever you feel like it, then
very quickly you will not have users or maintained packages (and then of
course you can do whatever you like with the name space).

Paul Gilbert

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From jebacklund@dowagro.com  Wed May 16 18:58:15 2001
From: jebacklund@dowagro.com (jebacklund@dowagro.com)
Date: Wed, 16 May 2001 19:58:15 +0200 (MET DST)
Subject: [Rd] Minor documentation issue (PR#942)
Message-ID: <200105161758.TAA02511@pubhealth.ku.dk>

Full_Name: Jan Erik Backlund
Version: 1.2.3
OS: Windows 98
Submission from: (NULL) (216.99.65.32)


R is fantastic and I greatly appreciate your efforts and creativity in
developing it.

Minor documentation suggestion:
Include an 'objects' function listing in the base section of the reference
manual.  It need only say 'Please see function ls'.

Is this the preferred way of submitting suggestions regarding the documentation?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed May 16 20:11:07 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 16 May 2001 15:11:07 -0400
Subject: [Rd] Strange formatting
Message-ID: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com>

I've never noticed this before, though it's probably not new.  In
1.2.3 for Windows, if I print a short vector the formatting is
different than if I print a long one, whether or not they fit on one
line.  The short/long split appears to be between 9 and 10 elements:

 > 1:9
 [1] 1 2 3 4 5 6 7 8 9
 > 1:10
  [1]  1  2  3  4  5  6  7  8  9 10

 > sqrt(1:9)
 [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
2.828427
 [9] 3.000000
 > sqrt(1:10)
  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
2.828427
  [9] 3.000000 3.162278


The spacing between the integer values is different, and there's a
space before the "[1]" in the longer vectors.

Is this intentional?  What's the reasoning for this difference?

Duncan Murdoch
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 16 20:31:14 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 16 May 2001 21:31:14 +0200
Subject: [Rd] Strange formatting
In-Reply-To: Duncan Murdoch's message of "Wed, 16 May 2001 15:11:07 -0400"
References: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com>
Message-ID: <x2u22lccql.fsf@blueberry.kubism.ku.dk>

Duncan Murdoch <murdoch@stats.uwo.ca> writes:

> I've never noticed this before, though it's probably not new.  In
> 1.2.3 for Windows, if I print a short vector the formatting is
> different than if I print a long one, whether or not they fit on one
> line.  The short/long split appears to be between 9 and 10 elements:
> 
>  > 1:9
>  [1] 1 2 3 4 5 6 7 8 9
>  > 1:10
>   [1]  1  2  3  4  5  6  7  8  9 10
> 
>  > sqrt(1:9)
>  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
> 2.828427
>  [9] 3.000000
>  > sqrt(1:10)
>   [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
> 2.828427
>   [9] 3.000000 3.162278
> 
> 
> The spacing between the integer values is different, and there's a
> space before the "[1]" in the longer vectors.
> 
> Is this intentional?  What's the reasoning for this difference?

The spacing is to print all elements in the same field width, and 10
wouldn't look good in a field of with 2. I don't think that could be
much different (compare 1:100 and 1:99). The labels would seem to be
generated to make room for the label with the longest possible width,
which is slightly botched since that width need not be used by any of
the labels. Submit a patch?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 16 20:59:25 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Wed, 16 May 2001 20:59:25 +0100 (BST)
Subject: [Rd] Strange formatting
In-Reply-To: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com>
Message-ID: <Pine.GSO.4.31.0105162056310.4660-100000@auk.stats>

On Wed, 16 May 2001, Duncan Murdoch wrote:

> I've never noticed this before, though it's probably not new.  In
> 1.2.3 for Windows, if I print a short vector the formatting is
> different than if I print a long one, whether or not they fit on one
> line.  The short/long split appears to be between 9 and 10 elements:
>
>  > 1:9
>  [1] 1 2 3 4 5 6 7 8 9
>  > 1:10
>   [1]  1  2  3  4  5  6  7  8  9 10
>
>  > sqrt(1:9)
>  [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
> 2.828427
>  [9] 3.000000
>  > sqrt(1:10)
>   [1] 1.000000 1.414214 1.732051 2.000000 2.236068 2.449490 2.645751
> 2.828427
>   [9] 3.000000 3.162278
>
>
> The spacing between the integer values is different, and there's a
> space before the "[1]" in the longer vectors.
>
> Is this intentional?  What's the reasoning for this difference?

I guess so.  For the first, the elements will line up:

> options(width=40)
> 1:50
 [1]  1  2  3  4  5  6  7  8  9 10 11 12
[13] 13 14 15 16 17 18 19 20 21 22 23 24
[25] 25 26 27 28 29 30 31 32 33 34 35 36
[37] 37 38 39 40 41 42 43 44 45 46 47 48
[49] 49 50

and that shows you the reason for the space too.

FWIW, S-PLUS 3.4 does the same things.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From murdoch@stats.uwo.ca  Wed May 16 21:45:52 2001
From: murdoch@stats.uwo.ca (Duncan Murdoch)
Date: Wed, 16 May 2001 16:45:52 -0400
Subject: [Rd] Strange formatting
In-Reply-To: <x2u22lccql.fsf@blueberry.kubism.ku.dk>
References: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com> <x2u22lccql.fsf@blueberry.kubism.ku.dk>
Message-ID: <jdp5gtom71ut5tuhmmedq7h8i78qs8dg4d@4ax.com>

Peter and Brian pointed out that 

>The spacing is to print all elements in the same field width...

Of course!  I knew that.  Must have had a temporary mental breakdown.
Thanks.

Peter suggested I should submit a patch for the fact that the width of
the index can be one char too wide.  I'll add it to my mental to-do
list (but we've just seen a demonstration of the reliability of my
memory...).

Duncan
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ihaka@stat.auckland.ac.nz  Wed May 16 23:22:05 2001
From: ihaka@stat.auckland.ac.nz (Ross Ihaka)
Date: Thu, 17 May 2001 10:22:05 +1200
Subject: [Rd] Strange formatting
References: <cmh5gts4movjvp4o4a91ropt5oarekdpfi@4ax.com> <x2u22lccql.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B02FD8D.320B2718@stat.auckland.ac.nz>

Peter Dalgaard BSA wrote:

> The spacing is to print all elements in the same field width, and 10
> wouldn't look good in a field of with 2. I don't think that could be
> much different (compare 1:100 and 1:99). The labels would seem to be
> generated to make room for the label with the longest possible width,
> which is slightly botched since that width need not be used by any of
> the labels. Submit a patch?

Believe it or not, this was deliberate for consistency with Splus 3.X.
	Ross

-- 
Ross Ihaka                         Email:  ihaka@stat.auckland.ac.nz
Department of Statistics           Phone:  (64-9) 373-7599 x 5054
University of Auckland             Fax:    (64-9) 373-7018
Private Bag 92019, Auckland
New Zealand
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Thomas Hoffmann" <thoffman@zappa.sax.de  Wed May 16 22:59:01 2001
From: Thomas Hoffmann" <thoffman@zappa.sax.de (Thomas Hoffmann)
Date: Wed, 16 May 01 22:59:01 +0100
Subject: [Rd] Double inclusion of Runix.h
Message-ID: <3b02f827.thoffman.zappa@zappa.sax.de>

Maybe I am overlooking something important, but why is Runix.h included twice
in sys-std.c?

....
#include "Runix.h"
#include "Startup.h"

#include "Runix.h"
....

In Runix.h, there is another iclusion of Startup.h ...

Was this an omission during clean up? 

Curious,
Thomas Hoffmann.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 17 00:58:51 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 17 May 2001 01:58:51 +0200
Subject: [Rd] Double inclusion of Runix.h
In-Reply-To: "Thomas Hoffmann"'s message of "Wed, 16 May 01 22:59:01 +0100"
References: <3b02f827.thoffman.zappa@zappa.sax.de>
Message-ID: <x2n18clubo.fsf@blueberry.kubism.ku.dk>

"Thomas Hoffmann" <thoffman@zappa.sax.de> writes:

> Maybe I am overlooking something important, but why is Runix.h included twice
> in sys-std.c?
> 
> ....
> #include "Runix.h"
> #include "Startup.h"
> 
> #include "Runix.h"
> ....
> 
> In Runix.h, there is another iclusion of Startup.h ...
> 
> Was this an omission during clean up? 
> 
> Curious,
> Thomas Hoffmann.

Looks like an omission. Runix.h has no guard against multiple
inclusion, so one ends up with a host of repeated declarations, which
is probably harmless, but might upset pedantic compilers(?)

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu May 17 13:02:37 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 17 May 2001 14:02:37 +0200
Subject: [Rd] Minor documentation issue (PR#942)
In-Reply-To: <200105161758.TAA02511@pubhealth.ku.dk>
References: <200105161758.TAA02511@pubhealth.ku.dk>
Message-ID: <15107.48605.537609.899228@gargle.gargle.HOWL>

>>>>> "jebacklund" == jebacklund  <jebacklund@dowagro.com> writes:

    jebacklund> Full_Name: Jan Erik Backlund
    jebacklund> Version: 1.2.3
    .......

    jebacklund> R is fantastic and I greatly appreciate your efforts and
    jebacklund> creativity in developing it.
thanks for the flowers!

    jebacklund> Minor documentation suggestion: Include an 'objects'
    jebacklund> function listing in the base section of the reference
    jebacklund> manual.  It need only say 'Please see function ls'.

Can you tell me (maybe privately, not to the whole mailing list)
what you mean?  are you using the PDF or help.start() / HTML version of the
manual? on paper or on-line ?


    jebacklund> Is this the preferred way of submitting suggestions
    jebacklund> regarding the documentation?

not really; only bugs or really lacking things in the documentation should
 be reported as bugs;
Suggestions like yours you should send to any one (but not more than one) of
R-help, R-devel, or R-core.  
To which one really depends on how interesting, debatable, .... you think
this is to the corresponding audience.

Martin
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Thu May 17 14:21:46 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Thu, 17 May 2001 15:21:46 +0200
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <3B028D07.2A00CDD6@bank-banque-canada.ca>
References: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>
 <3B028D07.2A00CDD6@bank-banque-canada.ca>
Message-ID: <15107.53354.670649.577003@gargle.gargle.HOWL>

>>>>> "PaulG" == Paul Gilbert <pgilbert@bank-banque-canada.ca> writes:

    PaulG> Brian
    PaulG> I've changed the name of my truncate function. In this case I think
    PaulG> problems of conflicts in code could easily be resolved, but I don't
    PaulG> understand how conflicts in the documentation would be resolved.

    PaulG> However, please do keep in mind that adding things to base is
    PaulG> problematic because of name space conflicts. This case was
    PaulG> relatively easy for me, but some functions would be much more
    PaulG> difficult because of all the implications for documentation and
    PaulG> other code using the packages.

You are right, Paul, adding things to base is somewhat problematic
particularly for package writers.  That's why I now ask for comments:

One thing I *would* like to add to base (in a general sense -- note that
Brian mentioned that namespaces might well come in the not so distant future),
are the generic functions

    AIC
and
    logLik  {both a generic and a class!}

that Bates and Pinheiro use quite extensively in the nlme package
(and I did ask Doug about this two months ago) :

--------
After  library(nlme)

  > ls(pos=2,pat="AIC")
  [1] "AIC"        "AIC.gls"    "AIC.lm"     "AIC.lme"    "AIC.lmList"
  [6] "AIC.logLik" "AIC.nls"   
  > ls(pos=2,pat="^logLik")
   [1] "logLik.corStruct"    "logLik.gls"          "logLik.glsStruct"   
   [4] "logLik.gnls"         "logLik.gnlsStruct"   "logLik.lm"          
   [7] "logLik.lme"          "logLik.lmeStruct"    "logLik.lmeStructInt"
  [10] "logLik.lmList"       "logLik.reStruct"     "logLik.varComb"     
  [13] "logLik.varFunc"     
  > ls(pos=2,pat="logLik$")
  [1] "AIC.logLik"   "BIC.logLik"   "print.logLik"
  > AIC
  function (object, ...) 
  UseMethod("AIC")
  > str(AIC.lm)
  function (object, ...) 

--------

The nlme() also defines BIC(), which one might argue could also be
considered a special case of a more general "*IC" generic.

Package MASS has

  extractAIC.loglm <- function (fit, scale, k = 2, ...) 
  {
      edf <- fit$n - fit$df
      c(edf, fit$deviance + k * edf)
  }

which you can use for the BIC as well 
by replacing "k = 2" by "k = log(fit$n)".

And there are AIC like computations in many R packages.
which may or may not differ.
However it would make sense to have the generic and the lm (and glm?)
methods in standard base.  Similarly for "logLik".

------

Does anyone see problems?
Should the AIC generic {or only some of the methods} include something like
a "k = 2" argument  (why ``k'' , btw) ?

Thanks for constructive feedback!

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Thu May 17 14:47:56 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Thu, 17 May 2001 09:47:56 -0400
Subject: [Rd] P-value printing in print.summary.lm
Message-ID: <OFCBB833AD.7244FB84-ON85256A4F.004AF00D@rtp.epa.gov>

The P-value for the overall F-statistic is being printed with formatC in
print.summary.lm (at least in R-1.2.3).  This results in P-values of 0,
which I suppose is practically unimportant, but logically offensive.
format.pval() gets around this (indeed, its help page says it was written
for print.summary.lm, though it is not explicitly called there, just in
print.coefmat!).  I'd suggest the following patch to lm.R:

337c337
<           formatC(1 - pf(x$fstatistic[1], x$fstatistic[2],
---
>           format.pval(1 - pf(x$fstatistic[1], x$fstatistic[2],



R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Thu May 17 14:57:37 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Thu, 17 May 2001 09:57:37 -0400
Subject: [Rd] New generic functions in "R base" {was `truncate'}
References: <Pine.LNX.4.31.0105151757200.7983-100000@gannet.stats>
 <3B028D07.2A00CDD6@bank-banque-canada.ca> <15107.53354.670649.577003@gargle.gargle.HOWL>
Message-ID: <3B03D8D1.B4F6725@bank-banque-canada.ca>

Martin

>One thing I *would* like to add to base ... are the generic functions
> AIC and  logLik ...

Neither  AIC nor logLik conflict with anything in my packages. I do have a programs
that return log likelihood and information criteria along with a lot of other
information, so depending on your definitions I might start using your classes.

Thanks for asking,
Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From J.C.Rougier@durham.ac.uk  Fri May 18 09:58:43 2001
From: J.C.Rougier@durham.ac.uk (Jonathan Rougier)
Date: Fri, 18 May 2001 09:58:43 +0100 (BST)
Subject: [Rd] New package Oarray
Message-ID: <Pine.GSO.4.20.0105180944250.1622-100000@laplace>

Hi Everyone,

I recently uploaded the package Oarray to CRAN.  After a suggestion from
Martin M., I should just clarify that this is a generalisation of zmatrix
in the following respects:

1) Can handle arbitrary numbers of extents;

2) Can have arbitrary non-negative offsets (not just zero) that vary
across the extents;

3) Can be switched also to have negative offsets, in which case negative
subscripts *do not* drop components.

Oarray operates quite differently from zmatrix, depending upon the way
that match.call() parses the calls to "[.Oarray" and "[<-.Oarray" (I hope
that this is stable!).

I often use R as a general-purpose computing environment and I have
encountered several situations in which arrays with offsets that are not
zero or one are useful, hence the generalisation of zmatrix.  I would be
interested if anyone can suggest any applications in statistics, though!

Cheers, Jonathan.

Jonathan Rougier                       Science Laboratories
Department of Mathematical Sciences    South Road
University of Durham                   Durham DH1 3LE
tel: +44 (0)191 374 2361, fax: +44 (0)191 374 7388
http://www.maths.dur.ac.uk/stats/people/jcr/jcr.html


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun May 20 01:32:41 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sun, 20 May 2001 02:32:41 +0200 (MET DST)
Subject: [Rd] legend() with xpd=T; omission of initial plot character (PR#943)
Message-ID: <200105200032.CAA02504@pubhealth.ku.dk>


In the following:

plot(0:1, 0:1)
legend(x=0, y=1.2, pch=c(1,2), legend=c("May","June"))

the first plot character is omitted when plotting to
the screen.

I obtained the same behaviour when placing a legend
in the margin following use of pairs()

-please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.3
  year = 2001
  month = 04
  day = 26
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From john.maindonald@anu.edu.au  Sun May 20 01:39:36 2001
From: john.maindonald@anu.edu.au (john.maindonald@anu.edu.au)
Date: Sun, 20 May 2001 02:39:36 +0200 (MET DST)
Subject: [Rd] hist() ignores 'probability=T' (PR#944)
Message-ID: <200105200039.CAA02528@pubhealth.ku.dk>

In the following, 'probability=T' is ignored,
i.e. the vertical axis is labelled in
frequencies.

However hist(islands, freq=F) achieves the desired effect.

 > data(islands)
 > hist(islands, probability=T)  # Vertical axis gives frequencies
 > hist(islands, freq=F)              # Expected result

--please do not edit the information below--

Version:
  platform = i386-pc-mingw32
  arch = x86
  os = Win32
  system = x86, Win32
  status =
  major = 1
  minor = 2.3
  year = 2001
  month = 04
  day = 26
  language = R

Windows 98 SE 4.10 (build 2222)  A

Search Path:
  .GlobalEnv, package:ctest, Autoloads, package:base
John Maindonald               email : john.maindonald@anu.edu.au
Statistical Consulting Unit,  phone : (6125)3998
c/o CMA, SMS,                 fax   : (6125)5549
John Dedman Mathematical Sciences Building
Australian National University
Canberra ACT 0200
Australia


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Sun May 20 07:22:23 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Sun, 20 May 2001 07:22:23 +0100 (GMT Daylight Time)
Subject: [Rd] hist() ignores 'probability=T' (PR#944)
In-Reply-To: <200105200039.CAA02528@pubhealth.ku.dk>
Message-ID: <Pine.WNT.4.31.0105200720110.63-100000@tern.stats>

On Sun, 20 May 2001 john.maindonald@anu.edu.au wrote:

> In the following, 'probability=T' is ignored,
> i.e. the vertical axis is labelled in
> frequencies.

It's a 1.2.3-only bug already found (by Jonathan Marchini) and fixed in the
sources.  From NEWS in R-devel:

    o	hist.default() was ignoring its `probability' argument for
	equi-spaced breaks.


>
> However hist(islands, freq=F) achieves the desired effect.
>
>  > data(islands)
>  > hist(islands, probability=T)  # Vertical axis gives frequencies
>  > hist(islands, freq=F)              # Expected result
>
> --please do not edit the information below--
>
> Version:
>   platform = i386-pc-mingw32
>   arch = x86
>   os = Win32
>   system = x86, Win32
>   status =
>   major = 1
>   minor = 2.3
>   year = 2001
>   month = 04
>   day = 26
>   language = R
>
> Windows 98 SE 4.10 (build 2222)  A
>
> Search Path:
>   .GlobalEnv, package:ctest, Autoloads, package:base
> John Maindonald               email : john.maindonald@anu.edu.au
> Statistical Consulting Unit,  phone : (6125)3998
> c/o CMA, SMS,                 fax   : (6125)5549
> John Dedman Mathematical Sciences Building
> Australian National University
> Canberra ACT 0200
> Australia
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pd@pubhealth.ku.dk  Mon May 21 06:15:06 2001
From: pd@pubhealth.ku.dk (Peter Dalgaard BSA)
Date: Mon, 21 May 2001 07:15:06 +0200
Subject: [Rd] Bug list summary (automatic post)
Message-ID: <200105210515.HAA17058@blueberry.kubism.ku.dk>

=================================================
This is an automated summary of the status of the R-bugs
repository.

Note that this may be neither complete nor perfectly
correct at any given instance: Not all bugs are reported,
and some reported bugs may have been fixed, but the
repository not yet updated.

Some bug fixes are difficult to verify because they pertain
to specific hardware or operating system versions. If you
have information to contribute, please do so.

If you happen to know how to fix a problem please send
patches to the bug repository, too.

New bugs are reported either through the web
interface at r-bugs.r-project.org or via email to
r-bugs@r-project.org. The bug.report() function can be
used to automate parts of the procedure on many systems.
Followups on older bugs can be done by including the string
"(PR#999)" in the Subject of an email (change 999 to the
actual reference number, of course!).
=================================================

Directory:  Accuracy

* PR# 751 *
Subject: BUG: polyroot()
From: "Li Dongfeng" <mavip1@inet.polyu.edu.hk>
Date: Tue, 28 Nov 2000 13:24:33 +0800
--Numerical instability. We may want a better algorithm!

Directory:  Add-ons

* PR# 930 *
Subject: Re: [R] Crazy plots of time-series against dates
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 01 May 2001 21:33:53 +0200
--error in chron package
* PR# 824 *
Subject: trouble with netCDF 
From: jasont@indigoindustrial.co.nz
Date: Thu, 25 Jan 2001 12:00:39 +1300
--Only on a specific sample file: send to maintainer.
* PR# 496 *
From: bonneau@epi.roazhon.inra.fr (en148)
Date: Tue, 21 Mar 2000 10:57:13 +0100 (MET)
--base R has no est.variogram function.
--This appears to be a bug report on sgeostat.

Directory:  Analyses

none

Directory:  Documentation

* PR# 899 *
Subject: documentation problems in str.Rd
From: Kurt Hornik <Kurt.Hornik@ci.tuwien.ac.at>
Date: Sat, 7 Apr 2001 23:08:23 +0200
--fixed (both code and documentation) for 1.3  (MM).

Directory:  Graphics

* PR# 917 *
Subject: boxplot
From: skala@incoma.cz
Date: Fri, 20 Apr 2001 08:43:29 +0200 (MET DST)
--fixed for 1.2.3  (one could consider the bug an `accidental feature',
--		  but the documentation and the other S implementations 
--		  differ).
* PR# 202 *
Subject: persp box occlusion bug
From: wsi@gcal.ac.uk
Date: Wed, 2 Jun 1999 15:02:03 +0200 (MET DST)
--The persp algorithm does not apply the occlusion rules to the frame, 
--which is always plotted first. 
--A bug, but not very simple to fix.
* PR# 750 *
Subject: abline() does not obey "xpd" (clipping rules)
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 27 Nov 2000 18:27:11 +0100
* PR# 660 *
Subject: identify.default ignores any setting of cex.
From: Prof Brian Ripley <ripley@stats.ox.ac.uk>
Date: Fri, 15 Sep 2000 10:23:39 +0100 (BST)
* PR# 791 *
Subject:  par(lab= *) / axis(*) bug 
From: maechler@stat.math.ethz.ch
Date: Fri, 22 Dec 2000 10:59:26 +0100
* PR# 776 *
Subject: strwidth does not take font into account
From: Martyn Plummer <plummer@iarc.fr>
Date: Tue, 19 Dec 2000 14:56:01 +0100 (CET)
--This needs a substantial redesign.
* PR# 820 *
Subject: interaction.plot
From: "Mark M. Span" <span@psy.uva.nl>
Date: Mon, 22 Jan 2001 10:47:39 +0100
--mtext is unscaled by default.  It is not clear if this should
--use the par("cex") setting or an inline cex setting such as cex.axis.
--It might make more sense to use axis rather than mtext, as boxplot does.
* PR# 816 *
Subject: dotplot: character size of labels
From: RINNER Heinrich <H.RINNER@TIROL.GV.AT>
Date: Thu, 18 Jan 2001 14:54:32 +0100
--Suggested fix is incorporated in 1.2.2.
--
--There is a deeper problem:  mtext() ignores par(cex=.5) in general.  
--To see the problem try:  par(cex=.5); mtext("hi")
--Paul thinks the right fix is to change the argument list for mtext so that
--cex=par(cex) by default rather than cex=NA by default (plus corresponding
--internal changes to  do_mtext in plot.c).
--This needs to be done very carefully because (i) the change suggested above 
--mayhave side-effects in many other pieces of interpreted code 
--(ii) do_mtext ignores dd->gp.cexbase unlike, for example, do_plot_xy 
--and anything to do with cexbase needs extreme care.
* PR# 831 *
Subject: screen can't go back to (split) screen with log="y" plot
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 30 Jan 2001 00:39:41 -0500
--Still there. Suggested fix included in followups, but we didn't get around to
--try it in time for 1.2.3
* PR# 828 *
Subject: termplot fails for composite non-factor terms
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sat, 27 Jan 2001 11:57:37 +1100 (EST)
--Neither of the proposed changes actually works in sufficient generality.
--
--The easy and unimportant part of this, the labels, is fixed in 1.2.2. Getting
--the data right is a project for 1.3
* PR# 857 *
Subject: Plotting points on a filled.contour plot
From: marchini@stats.ox.ac.uk
Date: Tue, 27 Feb 2001 10:00:30 +0100 (MET)
--This needs at least to be documented, and preferably par("usr")
--set to the coordinate system of the plotting region after use.
* PR# 837 *
Subject: screen doesn't handle redrawing properly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 01 Feb 2001 14:20:52 -0500
* PR# 916 *
Subject:  par(mgp) bug 
From: paul@stat.auckland.ac.nz
Date: Fri, 20 Apr 2001 08:33:45 +1200 (NZST)
* PR# 887 *
Subject: axis(adj=anything) has no effect
From: jhallman@frb.gov
Date: Wed, 28 Mar 2001 20:51:05 +0200 (MET DST)
* PR# 865 *
Subject:  axis(...,las=1) breaks postscript code in certain cases 
From: maechler@stat.math.ethz.ch
Date: Wed, 7 Mar 2001 18:08:58 +0100

Directory:  In-Out

none

Directory:  Installation

* PR# 924 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:58:17 +0200 (MET DST)
--same as 923
* PR# 923 *
Subject: bug when compiling using --with-f2c option
From: wang@rjka.com
Date: Thu, 26 Apr 2001 19:56:59 +0200 (MET DST)
--too little information

Directory:  Language

* PR# 921 *
Subject:  Managed to confuse match.arg 
From: J.C.Rougier@durham.ac.uk
Date: Wed, 25 Apr 2001 12:22:54 +0100 (BST)
* PR# 669 *
Subject: Bug(s) w/ rbind.data.frame(); fix also read.table(*, as.is = TRUE) ?
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Mon, 25 Sep 2000 10:17:15 +0200
--status of AsIs columns
* PR# 412 *
Subject: anomalies with call objects
From: Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk>
Date: 06 Feb 2000 01:18:50 +0100
* PR# 408 *
Subject: convolution bug
From: wsimpson@gcal.ac.uk
Date: Fri, 28 Jan 2000 11:17:36 +0100 (MET)

Directory:  Low-level

* PR# 929 *
Subject:  Segmentation fault linked to memory? 
From: J.C.Rougier@durham.ac.uk
Date: Mon, 30 Apr 2001 14:34:11 +0100 (BST)
--looks like 32-bit integer overflow error in counting allocation size
* PR# 505 *
Subject: interrupted save 
From: Thomas Lumley <thomas@biostat.washington.edu>
Date: Sat, 25 Mar 2000 12:16:50 -0800 (PST)

Directory:  Misc

none

Directory:  Models

* PR# 862 *
Subject: Wrong sign for Pearson residuals
From: faraway@umich.edu
Date: Mon, 5 Mar 2001 18:04:34 +0100 (MET)

Directory:  Startup

* PR# 486 *
Subject: Re: autoload error in profile {was anova-bug in R-version  1.0.0?}
From: Martin Maechler <maechler@stat.math.ethz.ch>
Date: Tue, 14 Mar 2000 10:32:43 +0100 (MET)
--workaround to the origin problem in 1.0.1
--New report: try does not work from the profile.

Directory:  System-specific

* PR# 935 *
Subject:  help.start() fails 
From: "Wilhelm B. Kloke" <wb@vestein.arb-phys.uni-dortmund.de>
Date: Wed, 9 May 2001 13:43:49 +0200 (MET DST)
--Report on 1.2.1: on other systems the file is installed with 644.
* PR# 863 *
Subject: src/main/arithmetic.c on OpenBSD
From: ian@darwinsys.com (Ian Darwin)
Date: Tue,  6 Mar 2001 19:49:53 -0500 (EST)
--Not applied for 1.2.3 (why?)
* PR# 851 *
Subject: Comments on R-1.2.1 builds
From: "Nelson H. F. Beebe" <beebe@math.utah.edu>
Date: Fri, 16 Feb 2001 17:44:17 -0700 (MST)
--These are only warnings: some have been eliminated for 1.2.2.
--Some are about constructs needed to satisfy other compilers.
--
--Also: configure problem with g77 on SGI.
--(Should be taken care of for 1.2.3).
* PR# 848 *
Subject: X11 device doesn't handle destroy events correcly
From: Thomas Vogels <tov@ece.cmu.edu>
Date: 13 Feb 2001 17:40:46 -0500

Directory:  TooMuchAtOnce

* PR# 918 *
Subject: several bugs
From: Rich Heiberger <rmh@surfer.sbm.temple.edu>
Date: Sun, 22 Apr 2001 23:13:38 -0400 (EDT)
--1. as.numeric -> use as.double.FOO for methods -- doc.fixed for 1.2.3
--2. cannot set attribute on NULL -- no bug
--3. rep(list() ... ) :  a wish  fulfilled for 1.3.x
--4. %*% is not a generic in R (but is fast!) but in S+  -- not a bug
--5. S-plus (S4) compatibility  -- a wish but not for now
--6. list()s with dim() attribute -- an ongoing `research topic'  :-)
* PR# 811 *
Subject: problem with strptime example (and mention of bug.report)
From: Stephen Eglen <stephen@anc.ed.ac.uk>
Date: Thu, 11 Jan 2001 19:18:39 GMT
--1) On OSF4, strptime is deficient. Nothing we can do.
--
--2) On Windows NT, the strptime problems are (i) German locale, English dates,
--(ii) Windows system errors with unknown DST (it move times to DST).
--(i) now has another warning in the help file (there already was one).
--(ii) was already worked around for 1.2.1.
--
--3) bug.report() uses a mailer option that does not exist on OSF4.

Directory:  Windows

* PR# 927 *
Subject: Rgui 1.2.3 for Windows crashes reading huge CSV file
From: znmeb@aracnet.com
Date: Mon, 30 Apr 2001 07:14:50 +0200 (MET DST)
--Not clear this is to do with Windows.
* PR# 926 *
Subject: Rgui crash
From: bellis@hsph.harvard.edu
Date: Sun, 29 Apr 2001 20:45:15 +0200 (MET DST)
--Unable to reproduce even on a Win2k machine
* PR# 912 *
Subject: Rgui.exe crash on Windows 2000
From: gilg.seeber@uibk.ac.at
Date: Thu, 12 Apr 2001 15:07:52 +0200 (MET DST)
--seems to be specific to the submitter's system.
--Cannot reproduce.
* PR# 906 *
Subject: Win98 wheelmouse graphics lock problem
From: cpaul@ucla.edu
Date: Tue, 10 Apr 2001 17:50:44 +0200 (MET DST)
--Cannot reproduce without more information
--In particular, does not happen with Microsoft Intellimouse on W2K

Directory:  incoming

* PR# 944 *
Subject: hist() ignores 'probability=T'
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:42:13 +1000
* PR# 937 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:31:58 +0200 (MET DST)
* PR# 932 *
Subject: scoping error in xy.coords
From: kjetil halvorsen <kjetilh@umsanet.edu.bo>
Date: Fri, 04 May 2001 11:20:57 -0400
* PR# 939 *
Subject: Windows, RCMD INSTALL and path
From: david.firth@nuf.ox.ac.uk
Date: Fri, 11 May 2001 17:59:29 +0200 (MET DST)
* PR# 938 *
Subject: name creation with index arrays
From: sint@oeaw.ac.at
Date: Thu, 10 May 2001 23:39:53 +0200 (MET DST)
* PR# 941 *
Subject: Mistake in qbeta.c ?
From: tlm21@cam.ac.uk
Date: Wed, 16 May 2001 13:49:34 +0200 (MET DST)
* PR# 940 *
Subject: GCircle(): fails for non-clippable devices under certain circumstances (see below)
From: "Thomas Hoffmann" <thoffman@zappa.sax.de>
Date: Tue, 15 May 01 23:34:17 +0100
* PR# 943 *
Subject: legend() with xpd=T; omission of initial plot character
From: John Maindonald <john.maindonald@anu.edu.au>
Date: Sun, 20 May 2001 10:35:16 +1000
* PR# 942 *
Subject: Minor documentation issue
From: jebacklund@dowagro.com
Date: Wed, 16 May 2001 19:58:13 +0200 (MET DST)
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Tue May 22 16:57:09 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Tue, 22 May 2001 11:57:09 -0400
Subject: [Rd] qr.qty call to  "dqrqty"
Message-ID: <3B0A8C55.AE5E1C9E@bank-banque-canada.ca>

The .Fortran call to  "dqrqty" in qr.qty does not specify DUP which means it defaults
to TRUE.  I have looked through the fortan code for dqrqty and routines it calls and
also done some testing but cannot find any reason that would cause a problem with
DUP=FALSE.

I realize this is considered the "risky" option, but the change can result in
considerable memory saving in some problems. Can this .Fortran call can be changed?

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Tue May 22 19:07:59 2001
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Tue, 22 May 2001 14:07:59 -0400
Subject: [Rd] Job announcement
Message-ID: <20010522140759.F10945@jimmy.harvard.edu>

I realize this isn't quite the correct forum (but then I don't think
that there is one).
Anyways, I've just been given enough money to hire two programmer for
at least two years to work on the following project:
(for experienced programmers only, please, salary in the 70k range)


BRIEF DESCRIPTION FOR JOB POSTING
To develop a system for the manipulation and analysis of microarray
data.  The system will integrate database management, statistical
methodology and biologically relevant metadata.

Education and/or license: Bachelor's degree in Computer Science or
equivalent
Experience Required: Experience with database programming/ design,
systems design, embedded languages, scripting languages, background in
biology or statistics, image analysis.  Experience with C or C++
essential.



The job is in Boston and is posted at monster.com among other places. 
R will be a major component and hence any experience in that regard
would be an asset.
I guess you might even think of it as a very well paying postdoc if
one wanted to do stat computing etc.

I'll be happy to answer questions but you need to apply through the
regular channels if interested.
  Thanks.

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From warnes@ci.tuwien.ac.at  Wed May 23 19:37:52 2001
From: warnes@ci.tuwien.ac.at (Gregory Warnes)
Date: Wed, 23 May 2001 20:37:52 +0200 (CEST)
Subject: [Rd] New generic functions in "R base" {was `truncate'}
Message-ID: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at>

  This message is in MIME format.  The first part should be readable text,
  while the remaining parts are likely unreadable without MIME-aware tools.
  Send mail to mime@docserver.cac.washington.edu for more info.

---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII

1) What are the issues with making _existing_ functions in base into
generics?

EG, I've recently become annoyed that plot() is a generic which can be
applied to a formula:

	plot( outcome ~ predictor)

but functions like points, lowess, etc are not generic or don't have
methods defined for formulae.  I've created a points.formula() and a
generic lowess(), lowess.default(), and lowess.formula().

Are there any problems in replacing the current points() with a generic
function, provided that the default function does the same thing as the
original function?

2) I have a couple of other functions I just want to throw out:

- A generic ci()  (for confidence interval) with a method for lm and
summary.lm.   

- The function boxplot.n which gives a standard boxplot annotated with the
number of observations in each group. 

-Greg

Files are attached




---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="boxplot.n.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1010523203752.2129B@luthien.ci.tuwien.ac.at>
Content-Description: 

IyBjcmVhdGUgYSBib3hwbG90IGFuZCBhbm5vdGF0ZSB3aXRoIHRoZSBudW1i
ZXIgb2Ygb2JzZXJ2YXRpb25zIGluIGVhY2ggZ3JvdXAuDQojDQojIHBhcmFt
ZXRlcnMNCiMgIC4uLjogIHN0YW5kYXJkIGJveHBsb3QgcGFyYW1ldGVycw0K
Iw0KIyAgdG9wOiAgaWYgVCBwdXQgbidzIGF0IHRvcCBvZiBwbG90dGluZyBy
ZWdpb24sIG90aGVyd2lzZSBhdCB0aGUgYm90dG9tLg0KIw0KIyAgc2hyaW5r
OiB2YWx1ZSB0byBzaHJpbmsgY2hhcmFjdGVyIHNpemUgd2hlbiBhbm5vdGF0
aW5nLiAgKFRoaXMgdmFsdWUgaXMNCiMgICAgICAgICAgYXBwbGllZCB0byBj
ZXguKQ0KIw0KIyAgdGV4dGNvbG9yOiB0ZXh0IGNvbG9yDQojDQojIGV4YW1w
bGU6DQojDQojIGRhdGEgIDwtICBkYXRhLmZyYW1lKHk9cm5vcm0oMTAwKSwg
eD1mYWN0b3IocmVwKGMoIkEiLCJDIiwiRiIsIloiKSwyNSkpKQ0KDQogYm94
cGxvdC5uKCB5IH4geCwgZGF0YT1kYXRhKQ0KDQoNCg0KYm94cGxvdC5uICA8
LSBmdW5jdGlvbiggLi4uLCB0b3A9Riwgc2hyaW5rPTEuMCwgdGV4dGNvbG9y
PU5VTEwgKQ0KICB7DQogICAgYm94IDwtIG1hdGNoLmNhbGwoKSAgICAgICAg
ICAgIyBnZXQgY2FsbA0KICAgIGJveCR0b3AgIDwtIGJveCRzaHJpbmcgIDwt
IGJveCR0ZXh0Y29sb3IgIDwtIE5VTEwNCiAgICBib3hbWzFdXSAgPC0gYXMu
bmFtZSgiYm94cGxvdCIpDQogICAgYm94IDwtIGV2YWwoYm94LCBwYXJlbnQu
ZnJhbWUoKSkNCg0KICAgIGlmKHRvcCkNCiAgICAgIHdoZXJlICA8LSBwYXIo
InVzciIpWzRdDQogICAgZWxzZQ0KICAgICAgd2hlcmUgIDwtIHBhcigidXNy
IilbM10NCiAgICBjZXggPC0gcGFyKCJjZXgiKQ0KICAgIHBhcihjZXg9c2hy
aW5rKmNleCkNCiAgICB0ZXh0KCB4PTE6bGVuZ3RoKGJveCRuKSwgeT13aGVy
ZSwgbGFiZWxzPXBhc3RlKCJuPSIsYm94JG4sc2VwPSIiKSwgYWRqPWMoMC41
LDApLA0KICAgICAgICAgY29sPXRleHRjb2xvcikNCiAgICBwYXIoY2V4PWNl
eCkNCg0KICAgIGludmlzaWJsZShib3gpDQogIH0NCg==
---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="lowess.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1010523203752.2129C@luthien.ci.tuwien.ac.at>
Content-Description: 

bG93ZXNzLmRlZmF1bHQgIDwtIGdldCgibG93ZXNzIixwb3M9InBhY2thZ2U6
YmFzZSIpDQoNCmxvd2VzcyAgPC0gZnVuY3Rpb24oeCwuLi4pDQogIFVzZU1l
dGhvZCgibG93ZXNzIikNCg0KImxvd2Vzcy5mb3JtdWxhIiA8LQ0KICBmdW5j
dGlvbiAoZm9ybXVsYSwgZGF0YSA9IE5VTEwsIHN1YnNldCwgbmEuYWN0aW9u
LCAuLi4pIA0Kew0KICBpZiAobWlzc2luZyhmb3JtdWxhKSB8fCAobGVuZ3Ro
KGZvcm11bGEpICE9IDMpKSANCiAgICBzdG9wKCJmb3JtdWxhIG1pc3Npbmcg
b3IgaW5jb3JyZWN0IikNCiAgaWYgKG1pc3NpbmcobmEuYWN0aW9uKSkgDQog
ICAgbmEuYWN0aW9uIDwtIGdldE9wdGlvbigibmEuYWN0aW9uIikNCiAgbSA8
LSBtYXRjaC5jYWxsKGV4cGFuZC5kb3RzID0gRkFMU0UpDQogIGlmIChpcy5t
YXRyaXgoZXZhbChtJGRhdGEsIHBhcmVudC5mcmFtZSgpKSkpIA0KICAgIG0k
ZGF0YSA8LSBhcy5kYXRhLmZyYW1lKGRhdGEpDQogIG0kLi4uIDwtIE5VTEwN
CiAgbVtbMV1dIDwtIGFzLm5hbWUoIm1vZGVsLmZyYW1lIikNCiAgbWYgPC0g
ZXZhbChtLCBwYXJlbnQuZnJhbWUoKSkNCiAgcmVzcG9uc2UgPC0gYXR0cihh
dHRyKG1mLCAidGVybXMiKSwgInJlc3BvbnNlIikNCiAgbG93ZXNzKG1mW1st
cmVzcG9uc2VdXSwgbWZbW3Jlc3BvbnNlXV0sIC4uLikNCn0NCg==
---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="points.formula.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1010523203752.2129D@luthien.ci.tuwien.ac.at>
Content-Description: 

InBvaW50cy5mb3JtdWxhIiA8LQ0KICBmdW5jdGlvbiAoZm9ybXVsYSwgZGF0
YSA9IE5VTEwsIHN1YnNldCwgbmEuYWN0aW9uLCAuLi4pIA0Kew0KICBpZiAo
bWlzc2luZyhmb3JtdWxhKSB8fCAobGVuZ3RoKGZvcm11bGEpICE9IDMpKSAN
CiAgICBzdG9wKCJmb3JtdWxhIG1pc3Npbmcgb3IgaW5jb3JyZWN0IikNCiAg
aWYgKG1pc3NpbmcobmEuYWN0aW9uKSkgDQogICAgbmEuYWN0aW9uIDwtIGdl
dE9wdGlvbigibmEuYWN0aW9uIikNCiAgbSA8LSBtYXRjaC5jYWxsKGV4cGFu
ZC5kb3RzID0gRkFMU0UpDQogIGlmIChpcy5tYXRyaXgoZXZhbChtJGRhdGEs
IHBhcmVudC5mcmFtZSgpKSkpIA0KICAgIG0kZGF0YSA8LSBhcy5kYXRhLmZy
YW1lKGRhdGEpDQogIG0kLi4uIDwtIE5VTEwNCiAgbVtbMV1dIDwtIGFzLm5h
bWUoIm1vZGVsLmZyYW1lIikNCiAgbWYgPC0gZXZhbChtLCBwYXJlbnQuZnJh
bWUoKSkNCiAgcmVzcG9uc2UgPC0gYXR0cihhdHRyKG1mLCAidGVybXMiKSwg
InJlc3BvbnNlIikNCiAgcG9pbnRzKG1mW1stcmVzcG9uc2VdXSwgbWZbW3Jl
c3BvbnNlXV0sIC4uLikNCn0NCg==
---2088752589-1867062326-990643072=:2129
Content-Type: TEXT/PLAIN; charset=US-ASCII; name="ci.R"
Content-Transfer-Encoding: BASE64
Content-ID: <Pine.LNX.3.96.1010523203752.2129E@luthien.ci.tuwien.ac.at>
Content-Description: 

Y2kgIDwtICBmdW5jdGlvbih4LC4uLikgVXNlTWV0aG9kKCJjaSIpDQoNCmNp
LnN1bW1hcnkubG0gIDwtICBmdW5jdGlvbih4LGNvbmZpZGVuY2U9MC45NSxh
bHBoYT0xLWNvbmZpZGVuY2UpIHsNCiAgZXN0ICA8LSAgY29lZih4KVssMV0g
Ow0KICBjaS5sb3cgIDwtIGVzdCArIHF0KGFscGhhLzIsIHgkZGZbMl0pICog
Y29lZih4KVssMl0gOw0KICBjaS5oaWdoIDwtIGVzdCAtIHF0KGFscGhhLzIs
IHgkZGZbMl0pICogY29lZih4KVssMl0gOw0KICByZXR2YWwgIDwtIGNiaW5k
KEVzdGltYXRlPWVzdCwNCiAgICAgICAgICAgICAgICAgICAiQ0kgbG93ZXIi
PWNpLmxvdywNCiAgICAgICAgICAgICAgICAgICAiQ0kgdXBwZXIiPWNpLmhp
Z2gsDQogICAgICAgICAgICAgICAgICAgIlN0ZC4gRXJyb3IiPSBjb2VmKHgp
WywyXSwNCiAgICAgICAgICAgICAgICAgICAicC12YWx1ZSIgPSBjb2VmKHgp
Wyw0XSkNCiAgcm93bmFtZXMocmV0dmFsKSAgPC0gIHJvd25hbWVzKGNvZWYo
eCkpDQogIHJldHZhbA0KfQ0KDQpjaS5sbSAgPC0gIGZ1bmN0aW9uKHgsLi4u
KQ0Kew0KICB4ICA8LSAgc3VtbWFyeSh4KQ0KICByZXR1cm4oY2kuc3VtbWFy
eS5sbSh4KSkNCn0NCg0K
---2088752589-1867062326-990643072=:2129--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May 23 19:56:34 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 23 May 2001 14:56:34 -0400
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEAF4@groexmbcr02.pfizer.com>


> From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> Sent: Friday, May 18, 2001 11:30 AM
> To: gregory_r_warnes@groton.pfizer.com
> Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
>

[...]

> Apropos  ci() :
>
>  There's the very generally useful  confint() function in MASS.
>  Since MASS will become one of the recommended packages `real soon now',
>  I doubt that we'd want yet another one in `base'.
>  Or do you have reasons to prefer your ci() over V&R's  confint() ?
>  If so, it may make quite some sense discussing that on R-devel..
>
> Regards, Martin

Actually, I wasn't aware of the confint() function in MASS.  My ci()
function doesn't have any particular advantage.  


Actually, this illustrates a problem and raises another issue.  As it turns
out, I'm not the only one to have (unnecessarily) re-implemented the
features of confint() because it didn't occur to me to look in MASS for it.
I'm sure that others have had the same thing happen.

Shouldn't such generally useful functions get moved into base or some other
package that is on the default search path?  

-Greg







LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 23 20:12:45 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 May 2001 21:12:45 +0200
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: Gregory Warnes's message of "Wed, 23 May 2001 20:37:52 +0200 (CEST)"
References: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at>
Message-ID: <x2k837swuq.fsf@blueberry.kubism.ku.dk>

Gregory Warnes <warnes@ci.tuwien.ac.at> writes:

> EG, I've recently become annoyed that plot() is a generic which can be
> applied to a formula:
> 
> 	plot( outcome ~ predictor)
> 
> but functions like points, lowess, etc are not generic or don't have
> methods defined for formulae.  I've created a points.formula() and a
> generic lowess(), lowess.default(), and lowess.formula().
> 
> Are there any problems in replacing the current points() with a generic
> function, provided that the default function does the same thing as the
> original function?

Ummm, points.formula has been in base R since february 2000... slipped
in between 0.99.0 and 1.0.0 apparently.

Also note that loess() (with the correct spelling, in the modreg
library) does have a formula interface.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 23 20:33:42 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 23 May 2001 20:33:42 +0100 (BST)
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at>
Message-ID: <Pine.LNX.4.21.0105232030020.4905-100000@localhost>

On Wed, 23 May 2001, Gregory Warnes wrote:

> 1) What are the issues with making _existing_ functions in base into
> generics?

There are some performance issues (not necessarily relevant here). Last
time I looked hard at this method dispatch was taking ca 0.2 secs (not on
my fastest machines ....), and some generics turn up rather high on
profiling list rather often.

The other issue I see is the argument list for the generic, given that
all method ought to agree with the generic (at least aesthetically).

[...]

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Wed May 23 20:39:09 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Wed, 23 May 2001 15:39:09 -0400
Subject: [Rd] New generic functions in "R base" {was `truncate'}
References: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at>
Message-ID: <3B0C11DD.501B427E@umsanet.edu.bo>



Gregory Warnes wrote:
> 
> 1) What are the issues with making _existing_ functions in base into
> generics?
> 
> EG, I've recently become annoyed that plot() is a generic which can be
> applied to a formula:
> 
>         plot( outcome ~ predictor)
> 
> but functions like points, lowess, etc are not generic or don't have
> methods defined for formulae.  I've created a points.formula() and a
> generic lowess(), lowess.default(), and lowess.formula().

lowess is supposed to handle formulas and will do so when the 
scope error in xy.coords is corrected.

Kjetil Halvorsen
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 23 20:40:34 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 23 May 2001 20:40:34 +0100 (BST)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEAF4@groexmbcr02.pfizer.com>
Message-ID: <Pine.LNX.4.21.0105232034390.4905-100000@localhost>

On Wed, 23 May 2001, Warnes, Gregory R wrote:

> 
> > From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> > Sent: Friday, May 18, 2001 11:30 AM
> > To: gregory_r_warnes@groton.pfizer.com
> > Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
> >
> 
> [...]
> 
> > Apropos  ci() :
> >
> >  There's the very generally useful  confint() function in MASS.
> >  Since MASS will become one of the recommended packages `real soon now',
> >  I doubt that we'd want yet another one in `base'.
> >  Or do you have reasons to prefer your ci() over V&R's  confint() ?
> >  If so, it may make quite some sense discussing that on R-devel..
> >
> > Regards, Martin
> 
> Actually, I wasn't aware of the confint() function in MASS.  My ci()
> function doesn't have any particular advantage.  
> 
> 
> Actually, this illustrates a problem and raises another issue.  As it turns
> out, I'm not the only one to have (unnecessarily) re-implemented the
> features of confint() because it didn't occur to me to look in MASS for it.
> I'm sure that others have had the same thing happen.
> 
> Shouldn't such generally useful functions get moved into base or some other
> package that is on the default search path?  

Interesting Q.  Partly for perfomance reasons and partly for embedded
applications, we are trying to make base a lot smaller.  The agreed idea
seems to be to have a tiny core for R and lots of added functionality.
Unfortunately whereas S seems to be able to have long search paths without
performance penalty, we haven't found the right tricks in R (although it is
much better than it once was).  So just adding MASS to the path has
something like a 5% penalty (last timed just pre-1.2.0).  And careful
observers may have noticed that R gets a little slower (on almost) each
release.

One step in this direction that 1.3.0 will have is load-on-demand modules,
that is compiled code that is not loaded until used.  This allowed us to
avoid a 50% increase in code size. 

Brian

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Wed May 23 20:54:06 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Wed, 23 May 2001 15:54:06 -0400 (EDT)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <Pine.LNX.4.21.0105232034390.4905-100000@localhost>
Message-ID: <Pine.LNX.4.30.0105231551210.18969-100000@bolker.zoo.ufl.edu>


  Just my two cents -- but --
  I don't really care if it's in the search path or not, I think the
biggest help to this particular problem would be getting a full-text
search engine going and incorporated into the R-project home page.  Of
course, it's easy for me to say this since I don't have the time or
expertise to do it myself ...
  (One minor can of worms that occurs to me is what sites (if any) to
index in addition to CRAN.  I often look at S-news, Jim Lindsey's site,
Frank Harrell's site, etc., etc., but there could be a problem with
indexing "unofficial" sites and then having to answer myriad questions
from people about how to make things work in R ...)

  Ben Bolker

On Wed, 23 May 2001, Prof Brian Ripley wrote:

> On Wed, 23 May 2001, Warnes, Gregory R wrote:
>
> >
> > > From: Martin Maechler [mailto:maechler@stat.math.ethz.ch]
> > > Sent: Friday, May 18, 2001 11:30 AM
> > > To: gregory_r_warnes@groton.pfizer.com
> > > Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
> > >
> >
> > [...]
> >
> > > Apropos  ci() :
> > >
> > >  There's the very generally useful  confint() function in MASS.
> > >  Since MASS will become one of the recommended packages `real soon now',
> > >  I doubt that we'd want yet another one in `base'.
> > >  Or do you have reasons to prefer your ci() over V&R's  confint() ?
> > >  If so, it may make quite some sense discussing that on R-devel..
> > >
> > > Regards, Martin
> >
> > Actually, I wasn't aware of the confint() function in MASS.  My ci()
> > function doesn't have any particular advantage.
> >
> >
> > Actually, this illustrates a problem and raises another issue.  As it turns
> > out, I'm not the only one to have (unnecessarily) re-implemented the
> > features of confint() because it didn't occur to me to look in MASS for it.
> > I'm sure that others have had the same thing happen.
> >
> > Shouldn't such generally useful functions get moved into base or some other
> > package that is on the default search path?
>
> Interesting Q.  Partly for perfomance reasons and partly for embedded
> applications, we are trying to make base a lot smaller.  The agreed idea
> seems to be to have a tiny core for R and lots of added functionality.
> Unfortunately whereas S seems to be able to have long search paths without
> performance penalty, we haven't found the right tricks in R (although it is
> much better than it once was).  So just adding MASS to the path has
> something like a 5% penalty (last timed just pre-1.2.0).  And careful
> observers may have noticed that R gets a little slower (on almost) each
> release.
>
> One step in this direction that 1.3.0 will have is load-on-demand modules,
> that is compiled code that is not loaded until used.  This allowed us to
> avoid a 50% increase in code size.
>
> Brian
>
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 23 21:33:02 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 23 May 2001 16:33:02 -0400
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
References: <5429125E11E4D411AF7300805FE603A8014CEAF4@groexmbcr02.pfizer.com>
Message-ID: <3B0C1E7E.3DEECF5F@bank-banque-canada.ca>

>Actually, this illustrates a problem and raises another issue.  As it
turns
>out, I'm not the only one to have (unnecessarily) re-implemented the
>features of confint() because it didn't occur to me to look in MASS for
it.
>I'm sure that others have had the same thing happen.

Some search/browse capability sure would be nice and I think this
problem is going to get worse with the elimination of function.html in R
1.3.0.  Perhaps there is a possibility of putting a giant index of all
functions in all packages on CRAN?

>Shouldn't such generally useful functions get moved into base or some
>other package that is on the default search path?

The potential for name conflicts seems rather severe with this approach.

Paul Gilbert


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 23 22:30:49 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Wed, 23 May 2001 22:30:49 +0100 (BST)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <3B0C1E7E.3DEECF5F@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.21.0105232220160.7370-100000@localhost>

On Wed, 23 May 2001, Paul Gilbert wrote:

> >Actually, this illustrates a problem and raises another issue.  As it
> turns
> >out, I'm not the only one to have (unnecessarily) re-implemented the
> >features of confint() because it didn't occur to me to look in MASS for
> it.
> >I'm sure that others have had the same thing happen.
> 
> Some search/browse capability sure would be nice and I think this
> problem is going to get worse with the elimination of function.html in R
> 1.3.0.  Perhaps there is a possibility of putting a giant index of all
> functions in all packages on CRAN?

Not only is it nice, but we do already have it, twice, in fact!

There are two search/browse facilities for all current libraries (and I
mean that, not packages), namely help.search() and the Java-based HTML
search.  Try them some time!

> help.search("confidence interval")
Help files with alias or title matching `confidence interval':
Type `?FOO' to inspect entry `FOO(PKG) TITLE'.

confint(MASS)           Confidence Intervals for Model Parameters
[...]

So why would removing an *index* affect the ability to search?

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Wed May 23 22:40:27 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Wed, 23 May 2001 17:40:27 -0400
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEAF6@groexmbcr02.pfizer.com>

  > From: Prof Brian Ripley [mailto:ripley@stats.ox.ac.uk]
  
  > > Warnes, Gregory R wrote:
  > >
  > > Shouldn't such generally useful functions get moved into base or some
other
  > > package that is on the default search path?  
  > 
  > Interesting Q.  Partly for performance reasons and partly for 
  > embedded applications, we are trying to make base a lot smaller.  
  > The agreed idea seems to be to have a tiny core for R and lots of added 
  > functionality.


I think the problem is that functions are not necessarily well grouped into
coherent packages.   Currently, what functionality is contained in each
package isn't being managed, per se.  Rather packages and functions within
packages seem to be accumulating organically.  

The need to trim down R-base to provides us with the opportunity to think
about how features are divided into packages.  We should make sure that the
packages that we create are coherently organized.  To do this , we will need
to "pull in" code from existing packages as well as "separating out" code
from R-base.

-Greg



LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 23 22:52:32 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 23 May 2001 23:52:32 +0200
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: kjetil halvorsen's message of "Wed, 23 May 2001 15:39:09 -0400"
References: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at> <3B0C11DD.501B427E@umsanet.edu.bo>
Message-ID: <x2d78zu40v.fsf@blueberry.kubism.ku.dk>

kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:

> lowess is supposed to handle formulas and will do so when the 
> scope error in xy.coords is corrected.

...which we seem to have forgotten to do in r-devel. Does this have a
PR# ?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rpeng@stat.ucla.edu  Thu May 24 02:18:12 2001
From: rpeng@stat.ucla.edu (rpeng@stat.ucla.edu)
Date: Thu, 24 May 2001 03:18:12 +0200 (MET DST)
Subject: [Rd] Problem with hist(x, prob=T) (PR#947)
Message-ID: <200105240118.DAA15398@pubhealth.ku.dk>

Full_Name: Roger Peng
Version: 1.2.3
OS: Linux
Submission from: (NULL) (128.97.86.109)


In R version 1.2.3, the hist command does not respond to the probability=TRUE
parameter.  So 

hist(x, probability=FALSE) 

and 

hist(x, probability=TRUE) 

produce the same (graphical) output.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 24 07:15:33 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Thu, 24 May 2001 07:15:33 +0100 (BST)
Subject: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <x2d78zu40v.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.LNX.4.21.0105240714250.758-100000@localhost>

On 23 May 2001, Peter Dalgaard BSA wrote:

> kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:
> 
> > lowess is supposed to handle formulas and will do so when the 
> > scope error in xy.coords is corrected.
> 
> ...which we seem to have forgotten to do in r-devel. Does this have a
> PR# ?

PR# 932, as a search of BUGS in R-devel reveals.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 24 07:23:48 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 24 May 2001 08:23:48 +0200 (MET DST)
Subject: [Rd] Problem with hist(x, prob=T) (PR#947)
Message-ID: <200105240623.IAA15950@pubhealth.ku.dk>

On Thu, 24 May 2001 rpeng@stat.ucla.edu wrote:

> Full_Name: Roger Peng
> Version: 1.2.3
> OS: Linux
> Submission from: (NULL) (128.97.86.109)
> 
> 
> In R version 1.2.3, the hist command does not respond to the probability=TRUE
> parameter.  So 
> 
> hist(x, probability=FALSE) 
> 
> and 
> 
> hist(x, probability=TRUE) 
> 
> produce the same (graphical) output.

This is bug PR# 944, already fixed in R-devel when that was reported.
Use `freq' instaed for now.

You can search R-bugs to see if the problem has already been reported.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From kjetilh@umsanet.edu.bo  Thu May 24 17:37:31 2001
From: kjetilh@umsanet.edu.bo (kjetil halvorsen)
Date: Thu, 24 May 2001 12:37:31 -0400
Subject: [Rd] New generic functions in "R base" {was `truncate'}
References: <Pine.LNX.3.96.1010523203540.2129A-500000@luthien.ci.tuwien.ac.at> <3B0C11DD.501B427E@umsanet.edu.bo> <x2d78zu40v.fsf@blueberry.kubism.ku.dk>
Message-ID: <3B0D38CB.8C72AA3A@umsanet.edu.bo>



Peter Dalgaard BSA wrote:
> 
> kjetil halvorsen <kjetilh@umsanet.edu.bo> writes:
> 
> > lowess is supposed to handle formulas and will do so when the
> > scope error in xy.coords is corrected.
> 
> ...which we seem to have forgotten to do in r-devel. Does this have a
> PR# ?

scoping error in xy.coords (PR#932)

Kjetil Halvorsen
> 
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Thu May 24 18:04:50 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Thu, 24 May 2001 13:04:50 -0400
Subject: [Rd] New Package: gregmisc
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEAFC@groexmbcr02.pfizer.com>

I've thrown a couple of useful functions into a new package "gregmisc" and
uploaded them to ftp://ftp.ci.tuwien.ac.at/incoming/gregmisc_0.1.1.tgz 

Here's DESCRIPTION:

	Package: gregmisc
	Description: Misc Functions written/maintained by Gregory R. Warnes
	Title: Greg's Miscellaneous Functions
	Version: 0.1
	Date: 2001/05/24
	Depends: R 
	Maintainer: Gregory R. Warnes <Gregory_R_Warnes@groton.pfizer.com>

	Author: Gregory R. Warnes.  Includes code provided by William
Venables 
	        and Ben Bolker. 
	License: GPL (version 2 or later)

and INDEX:

	boxplot.n                Produce a Boxplot Annotated with the Number
of
	                         Observations
	ci                       Compute Confidence Intervals
	plotCI                   Plot Error Bars
	plotmeans                Plot Group Means and Confidence Intervals


I'm perfectly happy for these functions to get incorporated into other
packages.  Feel free to email comments/criticisms/whatever.

-Greg

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Fri May 25 17:05:26 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Fri, 25 May 2001 12:05:26 -0400
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
References: <Pine.LNX.4.21.0105232220160.7370-100000@localhost>
Message-ID: <3B0E82C6.8E5C4405@bank-banque-canada.ca>

PG> Some search/browse capability sure would be nice and I think this
PG> problem is going to get worse with the elimination of function.html in R
PG> 1.3.0.  Perhaps there is a possibility of putting a giant index of all
PG> functions in all packages on CRAN?

BDR>Not only is it nice, but we do already have it, twice, in fact!
BDR>
BDR>There are two search/browse facilities for all current libraries (and I
BDR>mean that, not packages), namely help.search() and the Java-based HTML
BDR>search.  Try them some time!

Brian

Yes, I have tried these and they are very useful, but I believe they only work for
installed packages. If I am wrong about that then something else is broken since your
example gives this for me:

> help.search("confidence interval")
No help files found with alias or title matching `confidence interval'

What I had in mind was an ability to search available packages not just installed
ones. It is often difficult to find something unless you already know to install the
package that includes it, but often people don't know what package to look in. If
something does not exist in any package then one can never be sure without installing
all packages. (If this search facility is available on CRAN then I have missed it.)

Also, neither of these search facilities provide browsing. (The keyword by topic
gives some browsing capability but it is more like looking at a table of contents
than an index.)  I realize the list of functions would be extremely long, but
sometimes even matching the full text of the help description would not be enough
without some "fuzzy" matching (and I think we are a ways from this).  The problem may
be more severe for programming features than for statistics terms. Someone converting
from Matlab, Gauss, or APL will often know a term that describes exactly what they
want, but they don't know the R term to search for. Despite modern technology I still
often resort to browsing through the index of manuals.

Paul

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Fri May 25 17:19:39 2001
From: ripley@stats.ox.ac.uk (Prof Brian Ripley)
Date: Fri, 25 May 2001 17:19:39 +0100 (BST)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <3B0E82C6.8E5C4405@bank-banque-canada.ca>
Message-ID: <Pine.LNX.4.31.0105251715400.1160-100000@gannet.stats>

On Fri, 25 May 2001, Paul Gilbert wrote:

> PG> Some search/browse capability sure would be nice and I think this
> PG> problem is going to get worse with the elimination of function.html in R
> PG> 1.3.0.  Perhaps there is a possibility of putting a giant index of all
> PG> functions in all packages on CRAN?
>
> BDR>Not only is it nice, but we do already have it, twice, in fact!
> BDR>
> BDR>There are two search/browse facilities for all current libraries (and I
> BDR>mean that, not packages), namely help.search() and the Java-based HTML
> BDR>search.  Try them some time!
>
> Brian
>
> Yes, I have tried these and they are very useful, but I believe they only work for
> installed packages. If I am wrong about that then something else is broken since your
> example gives this for me:
>
> > help.search("confidence interval")
> No help files found with alias or title matching `confidence interval'

Nothing does uninstalled packages, as R has no means of knowing about
them!  help.search does search un-loaded packages, as in my example.  In
fact the same set as the function list (on Unix).  Looks as if something
may be wrong your end: if MASS is in some library it should be found.

[1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base"
> help.search("confidence interval")
Help files with alias or title matching `confidence interval':
Type `?FOO' to inspect entry `FOO(PKG) TITLE'.

confint(MASS)                 Confidence Intervals for Model Parameters
...

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bellis@hsph.harvard.edu  Fri May 25 18:17:14 2001
From: bellis@hsph.harvard.edu (Byron Ellis)
Date: Fri, 25 May 2001 13:17:14 -0400 (EDT)
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <Pine.LNX.4.31.0105251715400.1160-100000@gannet.stats>
Message-ID: <Pine.GSO.4.10.10105251311040.18933-100000@hsph.harvard.edu>

I think the proposal was for something along the lines of Perl's CPAN
module (or ActiveState's PPM for that matter)---sure, you have to update
indices periodically, but whatever. Perhaps some sort HTTP based system
for performing full text queries (since the database for that sort of
thing will undoubtably be large) would be in order, but the spirit of the
idea is certainly a good one---especially for new users (students, etc)
who don't know the system like the back of their hand. 'sides, kids these
days aren't used to things like manpages and apropos. ;-)

Byron Ellis (bellis@hsph.harvard.edu)

On Fri, 25 May 2001, Prof Brian Ripley wrote:

> On Fri, 25 May 2001, Paul Gilbert wrote:
> 
> > PG> Some search/browse capability sure would be nice and I think this
> > PG> problem is going to get worse with the elimination of function.html in R
> > PG> 1.3.0.  Perhaps there is a possibility of putting a giant index of all
> > PG> functions in all packages on CRAN?
> >
> > BDR>Not only is it nice, but we do already have it, twice, in fact!
> > BDR>
> > BDR>There are two search/browse facilities for all current libraries (and I
> > BDR>mean that, not packages), namely help.search() and the Java-based HTML
> > BDR>search.  Try them some time!
> >
> > Brian
> >
> > Yes, I have tried these and they are very useful, but I believe they only work for
> > installed packages. If I am wrong about that then something else is broken since your
> > example gives this for me:
> >
> > > help.search("confidence interval")
> > No help files found with alias or title matching `confidence interval'
> 
> Nothing does uninstalled packages, as R has no means of knowing about
> them!  help.search does search un-loaded packages, as in my example.  In
> fact the same set as the function list (on Unix).  Looks as if something
> may be wrong your end: if MASS is in some library it should be found.
> 
> [1] ".GlobalEnv"    "package:ctest" "Autoloads"     "package:base"
> > help.search("confidence interval")
> Help files with alias or title matching `confidence interval':
> Type `?FOO' to inspect entry `FOO(PKG) TITLE'.
> 
> confint(MASS)                 Confidence Intervals for Model Parameters
> ...
> 
> -- 
> Brian D. Ripley,                  ripley@stats.ox.ac.uk
> Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
> University of Oxford,             Tel:  +44 1865 272861 (self)
> 1 South Parks Road,                     +44 1865 272860 (secr)
> Oxford OX1 3TG, UK                Fax:  +44 1865 272595
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
> 

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Kurt.Hornik@ci.tuwien.ac.at  Fri May 25 18:34:36 2001
From: Kurt.Hornik@ci.tuwien.ac.at (Kurt Hornik)
Date: Fri, 25 May 2001 19:34:36 +0200
Subject: RE^2: [Rd] New generic functions in "R base" {was `truncate'}
In-Reply-To: <Pine.GSO.4.10.10105251311040.18933-100000@hsph.harvard.edu>
References: <Pine.LNX.4.31.0105251715400.1160-100000@gannet.stats>
 <Pine.GSO.4.10.10105251311040.18933-100000@hsph.harvard.edu>
Message-ID: <15118.38828.632164.173037@mithrandir.hornik.net>

>>>>> Byron Ellis writes:

> I think the proposal was for something along the lines of Perl's CPAN
> module (or ActiveState's PPM for that matter)---sure, you have to
> update indices periodically, but whatever. Perhaps some sort HTTP
> based system for performing full text queries (since the database for
> that sort of thing will undoubtably be large) would be in order, but
> the spirit of the idea is certainly a good one---especially for new
> users (students, etc) who don't know the system like the back of their
> hand. 'sides, kids these days aren't used to things like manpages and
> apropos. ;-)

> ...

Sorry for entering this a bit late.  The CRAN maintainers have actually
decided implementing something along the above lines a long time ago.
Unfortunately, it simply has not happened thus far.  In a way, this
would be a good project for a computer science student ...

In a nutshell, I see two approaches.  One amounts to having a web front
end for help.search() which Brian kindly pointed out.  I.e., CRAN would
have a prebuilt help db for all packages it provides, and a search
mechanism patterned after help.search() [you do not necessarily need an
R process for the search].  Full-text search fanatics might prefer us to
simply `install' all HTML files of the CRAN packages to some place and
provide full-text indexing and searching of that.

[To those who haven't read from me about this: full-text index/search
alone does not solve the problem.  You want fuzzy matching a la glimpse
along with that, otherwise e.g. spelling differences cannot be
resolved.]

As we hope that R 1.3.0 will support multiple package repositories, the
question *where* to search will become more delicated.  For example, the
packages by Jim Lindsey are not distributed via CRAN ...

If there are any volunteers for implementing this, pls let us know.

-k

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Sat May 26 12:24:03 2001
From: p.malewski@tu-bs.de (p.malewski@tu-bs.de)
Date: Sat, 26 May 2001 13:24:03 +0200 (MET DST)
Subject: [Rd] xyplot,grid.text segfault (PR#948)
Message-ID: <200105261124.NAA27403@pubhealth.ku.dk>

First, thank you very much for that lattice-package, second, the code
below segfaults R:

zz <- data.frame(
                 y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                 g=as.character(rep(1:2,50)))
xyplot(y~ x|z,data=zz,groups=g,
            panel = function(x, y, subscripts, groups)  
            grid.text(x=x, y=y, label=groups[subscripts])
       )

I'm not sure if I have understood that panel stuff right, but anyway,
it shouldn't segfault. BTW: I also unsure if I have to use the
develop-version of R & whether lattice bugs should be submitted
(because of the devel-status??).

Peter

--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat May 26 15:18:08 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 May 2001 16:18:08 +0200
Subject: [Rd] xyplot,grid.text segfault (PR#948)
In-Reply-To: p.malewski@tu-bs.de's message of "Sat, 26 May 2001 13:24:03 +0200 (MET DST)"
References: <200105261124.NAA27403@pubhealth.ku.dk>
Message-ID: <x2ae40p527.fsf@blueberry.kubism.ku.dk>

p.malewski@tu-bs.de writes:

> First, thank you very much for that lattice-package, second, the code
> below segfaults R:
> 
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)  
>             grid.text(x=x, y=y, label=groups[subscripts])
>        )
> 
> I'm not sure if I have understood that panel stuff right, but anyway,
> it shouldn't segfault. BTW: I also unsure if I have to use the
> develop-version of R & whether lattice bugs should be submitted
> (because of the devel-status??).

Well, it is easier for us to deal with erroneously submitted bug than
erroneously unsubmitted ones. We have an Add-Ons category on r-bugs to
put it in. 

Lattice is closely associated with the core team, so we'd be able to
track this kind of problem. With some other packages which we do not
maintain, we have some trouble figuring out whether a report has been
solved or whether it was even a bug in the first place (it would be
nice if the original submitters would lend a hand there).

As I remember it, Paul and Deepayan were somewhat vague about exactly
what was required, except that you'd need something relatively recent.
A segfault certainly looks like a real bug.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat May 26 17:30:18 2001
From: p.dalgaard@biostat.ku.dk (p.dalgaard@biostat.ku.dk)
Date: Sat, 26 May 2001 18:30:18 +0200 (MET DST)
Subject: [Rd] xyplot,grid.text segfault (PR#948)
Message-ID: <200105261630.SAA28272@pubhealth.ku.dk>

Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:


> As I remember it, Paul and Deepayan were somewhat vague about exactly
> what was required, except that you'd need something relatively recent.
> A segfault certainly looks like a real bug.

...and your example crashes with the current development version of R
too, anyway.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Sat May 26 19:53:22 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 26 May 2001 20:53:22 +0200
Subject: [Rd] xyplot,grid.text segfault (PR#948)
In-Reply-To: p.malewski@tu-bs.de's message of "Sat, 26 May 2001 13:24:03 +0200 (MET DST)"
References: <200105261124.NAA27403@pubhealth.ku.dk>
Message-ID: <x2k834eycd.fsf@blueberry.kubism.ku.dk>

p.malewski@tu-bs.de writes:

> First, thank you very much for that lattice-package, second, the code
> below segfaults R:
> 
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)  
>             grid.text(x=x, y=y, label=groups[subscripts])
>        )
> 
> I'm not sure if I have understood that panel stuff right, but anyway,
> it shouldn't segfault. BTW: I also unsure if I have to use the
> develop-version of R & whether lattice bugs should be submitted
> (because of the devel-status??).
> 
> Peter

grid.text() seems unhappy with being passed a non-character vector for
the label argument. I think Paul muttered something to the effect that
he knew there would be that kind of weaknesses in the code.

The following runs successfully (well, at least it doesn't crash - the
result looks a bit weird):

library(lattice)
zz <- data.frame(
                 y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                 g=as.character(rep(1:2,50)))
xyplot(y~ x|z,data=zz,groups=g,
            panel = function(x, y, subscripts, groups)
            grid.text(x=x, y=y,
                      label=as.character(groups[subscripts]))
       )


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Sat May 26 22:28:59 2001
From: p.malewski@tu-bs.de (p.malewski@tu-bs.de)
Date: Sat, 26 May 2001 23:28:59 +0200 (MET DST)
Subject: [Rd] lattice: dev.print(postscript) gives probl. false background Info (PR#950)
Message-ID: <200105262128.XAA28793@pubhealth.ku.dk>

There seems to be a problem with the background margins (I only recognized it in a latex ):

xyplot(rnorm(100) ~ rnorm(100))
dev.print(postscript,"/tmp/tmp.ps")

whereas this works on the 1.2.3 version but not with 1.3.0:

dev.copy2eps("/tmp/tmp.ps")                 

both times a warning appears:
Warning message: 
unknown postscript font family, using Helvetica 


Here is the latex-file:

\documentclass{book}
\usepackage{graphicx}

\begin{document}
text texttext texttext texttext texttext texttext text
 \begin{figure}[htb!]
   \begin{center}
     \includegraphics[width=\columnwidth]{/tmp/tmp}      
     \caption{asdas}
   \end{center}
 \end{figure}
texttexttexttexttexttexttexttexttexttexttext
\end{document}

Peter


<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 05
 day = 25
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Sat May 26 22:28:57 2001
From: p.malewski@tu-bs.de (p.malewski@tu-bs.de)
Date: Sat, 26 May 2001 23:28:57 +0200 (MET DST)
Subject: [Rd] lattice: postscript() false margins (PR#949)
Message-ID: <200105262128.XAA28779@pubhealth.ku.dk>

Using lattice the posscript(file="") device gives false margins:

zz <- data.frame(
                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
                  g=as.character(rep(1:2,50)))


postscript(file="/tmp/tmp.ps")
xyplot(x~y|g,data=xx)
dev.off()

whereas dev.print(postscript,file="") works fine 

dev.print(postscript,file="/tmp/tmp.ps")

Peter

<<insert bug report here>>



--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = Under development (unstable)
 major = 1
 minor = 3.0
 year = 2001
 month = 05
 day = 25
 language = R

Search Path:
 .GlobalEnv, package:grid, package:lattice, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From bolker@zoo.ufl.edu  Mon May 28 06:39:57 2001
From: bolker@zoo.ufl.edu (bolker@zoo.ufl.edu)
Date: Mon, 28 May 2001 01:39:57 -0400 (EDT)
Subject: [Rd] New Package: gregmisc
In-Reply-To: <5429125E11E4D411AF7300805FE603A8014CEAFC@groexmbcr02.pfizer.com>
Message-ID: <Pine.LNX.4.30.0105280132420.5852-100000@bolker.zoo.ufl.edu>


   Do you have the latest version of plotCI?  (attached below, I didn't
send it as an attachment for the sake of R-devel)  It uses arrows()
instead of segments(), which simplifies the code a bit and incidentally
makes it work with logarithmic axes as well (since the sizes of the bar
ends are specified in absolute rather than user units).

  Should this code be the first entry in the "miscellaneous code"
repository at CRAN that was discussed a while back?

  By the way, something occurred to me ... my "miscellaneous packages"
function (which I haven't made available to CRAN yet, although I probably
will eventually) is called "bbmisc".  Yours is called "gregmisc".  Would
it make any sense to standardize these on "<lastname>misc" or
"<first_initial><lastname>misc" (bolkermisc, bbolkermisc) to avoid
confusion once we have a whole bunch of these packages?

  Also by the way, congratulations for actually getting around to posting
your miscellaneous functions to CRAN!  I hope to do as well.

  Ben Bolker

plotCI <- function (x, y = NULL, uiw, liw = uiw, aui=NULL, ali=aui,
                    err="y", ylim=NULL, xlim=NULL, sfrac = 0.01, gap=0, add=FALSE,
                    col=par("col"), lwd=par("lwd"), slty=par("lty"), xlab=NULL,
                    ylab=NULL, main="", pt.bg = NA, scol=col,
                    axes=TRUE, ...)  {
# from Bill Venables, R-list
  if (is.list(x)) {
    y <- x$y
    x <- x$x
  }
  if (is.null(y)) {
    if (is.null(x))
      stop("both x and y NULL")
    y <- as.numeric(x)
    x <- seq(along = x)
  }
  if (missing(xlab)) xlab <- deparse(substitute(x))
  if (missing(ylab)) ylab <- deparse(substitute(y))
  if (missing(uiw)) {  ## absolute limits
    ui <- aui
    li <- ali
  }
  else {  ## relative limits
    if (err=="y") z <- y else z <- x
    ui <- z + uiw
    li <- z - liw
  }
  if (err=="y" & is.null(ylim))
    ylim <- range(c(y, ui, li), na.rm=TRUE)
  else
    if (err=="x" & is.null(xlim))
      xlim <- range(c(x, ui, li), na.rm=TRUE)
  if (!add)
    plot(x, y, ylim = ylim, xlim = xlim, col=col, lwd=lwd, xlab=xlab, ylab=ylab,
         main=main, type="n", axes=axes, ...)
  if (gap==TRUE) gap <- 0.01  ## default gap size
  ul <- c(li, ui)
  if (err=="y") {
    gap <- rep(gap,length(x))*diff(par("usr")[3:4])
    smidge <- par("fin")[1] * sfrac
    arrows(x , li, x, pmax(y-gap,li), col=col, lwd=lwd, lty=slty, angle=90, length=smidge, code=1)
    arrows(x , ui, x, pmin(y+gap,ui), col=col, lwd=lwd, lty=slty, angle=90, length=smidge, code=1)
  }
  else if (err=="x") {
    gap <- rep(gap,length(x))*diff(par("usr")[1:2])
    smidge <- par("fin")[2] * sfrac
    arrows(li, y, pmax(x-gap,li), y, col=col, lwd=lwd, lty=slty, angle=90, length=smidge, code=1)
    arrows(ui, y, pmin(x+gap,ui), y, col=col, lwd=lwd, lty=slty, angle=90, length=smidge, code=1)
  }
  ## _now_ draw the points (in case we want to have "bg" set for points)
  points(x, y, col=col, lwd=lwd, bg=pt.bg, ...)
  invisible(list(x = x, y = y))
}

On Thu, 24 May 2001, Warnes, Gregory R wrote:

> I've thrown a couple of useful functions into a new package "gregmisc" and
> uploaded them to ftp://ftp.ci.tuwien.ac.at/incoming/gregmisc_0.1.1.tgz
>
> Here's DESCRIPTION:
>
> 	Package: gregmisc
> 	Description: Misc Functions written/maintained by Gregory R. Warnes
> 	Title: Greg's Miscellaneous Functions
> 	Version: 0.1
> 	Date: 2001/05/24
> 	Depends: R
> 	Maintainer: Gregory R. Warnes <Gregory_R_Warnes@groton.pfizer.com>
>
> 	Author: Gregory R. Warnes.  Includes code provided by William
> Venables
> 	        and Ben Bolker.
> 	License: GPL (version 2 or later)
>
> and INDEX:
>
> 	boxplot.n                Produce a Boxplot Annotated with the Number
> of
> 	                         Observations
> 	ci                       Compute Confidence Intervals
> 	plotCI                   Plot Error Bars
> 	plotmeans                Plot Group Means and Confidence Intervals
>
>
> I'm perfectly happy for these functions to get incorporated into other
> packages.  Feel free to email comments/criticisms/whatever.
>
> -Greg
>
>
>
>
> LEGAL NOTICE
> Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
318 Carr Hall                                bolker@zoo.ufl.edu
Zoology Department, University of Florida    http://www.zoo.ufl.edu/bolker
Box 118525                                   (ph)  352-392-5697
Gainesville, FL 32611-8525                   (fax) 352-392-3704

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Nick.Guoth@anu.edu.au  Mon May 28 05:25:15 2001
From: Nick.Guoth@anu.edu.au (Nick.Guoth@anu.edu.au)
Date: Mon, 28 May 2001 06:25:15 +0200 (MET DST)
Subject: [Rd] Undeclared identifier in make compilation (PR#951)
Message-ID: <200105280425.GAA02627@pubhealth.ku.dk>

Full_Name: Nick Guoth
Version: 1.2.3
OS: SunOS 5.8 Generic_108528-03
Submission from: (NULL) (150.203.33.227)


>From running the make, the following error occurs:

gcc -I. -I../../../src/include -I../../../src/include -I/opt/x11r6.3/include
-I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
rbitmap.c: In function `R_SaveAsPng':
rbitmap.c:169: `PNG_INTERLACE_NONE' undeclared (first use in this function)
rbitmap.c:169: (Each undeclared identifier is reported only once
rbitmap.c:169: for each function it appears in.)
rbitmap.c:169: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in this
function)
rbitmap.c:170: `PNG_FILTER_TYPE_BASE' undeclared (first use in this function)
make[5]: *** [rbitmap.o] Error 1
make[5]: Leaving directory `/home/nick/R/R-1.2.3/src/unix/X11'
make[4]: *** [R] Error 2
make[4]: Leaving directory `/home/nick/R/R-1.2.3/src/unix/X11'
make[3]: *** [DLLs] Error 1
make[3]: Leaving directory `/home/nick/R/R-1.2.3/src/unix'
make[2]: *** [R] Error 2
make[2]: Leaving directory `/home/nick/R/R-1.2.3/src/main'
make[1]: *** [R] Error 1
make[1]: Leaving directory `/home/nick/R/R-1.2.3/src'
make: *** [R] Error 1


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deepayansarkar@yahoo.com  Mon May 28 06:33:02 2001
From: deepayansarkar@yahoo.com (Mr deepayan sarkar)
Date: Sun, 27 May 2001 22:33:02 -0700 (PDT)
Subject: [Rd] lattice: postscript() false margins (PR#949)
In-Reply-To: <200105262128.XAA28779@pubhealth.ku.dk>
Message-ID: <20010528053302.24017.qmail@web13905.mail.yahoo.com>


This is not really a bug. grid is not compatible with 
standard R graphics, and just starting a device by 
calling postscript() or x11() will not work. You need 
to call the grid functions grid.start() and 
grid.stop() when you enter and exit grid graphics.

If you're only interested in the lattice stuff, then 
the proper way to initiate a postscript (or x11) 
device is to call 

trellis.device(postscript, file="foo"). 

You should probably also read the documentation for 
trellis.device, as you might not like the current 
defaults.



--- p.malewski@tu-bs.de wrote:
> Using lattice the posscript(file="") device gives
> false margins:
> 
> zz <- data.frame(
>                  
> y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                   g=as.character(rep(1:2,50)))
> 
> 
> postscript(file="/tmp/tmp.ps")
> xyplot(x~y|g,data=xx)
> dev.off()
> 
> whereas dev.print(postscript,file="") works fine 
> 
> dev.print(postscript,file="/tmp/tmp.ps")
> 
> Peter
> 
> <<insert bug report here>>
> 
> 
> 
> --please do not edit the information below--
> 
> Version:
>  platform = i686-pc-linux-gnu
>  arch = i686
>  os = linux-gnu
>  system = i686, linux-gnu
>  status = Under development (unstable)
>  major = 1
>  minor = 3.0
>  year = 2001
>  month = 05
>  day = 25
>  language = R
> 
> Search Path:
>  .GlobalEnv, package:grid, package:lattice,
> package:ctest, Autoloads, package:base
> 
>
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read
> http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To:
> r-devel-request@stat.math.ethz.ch
>
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._


__________________________________________________
Do You Yahoo!?
Yahoo! Auctions - buy the things you want at great prices
http://auctions.yahoo.com/
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Martin Maechler <maechler@stat.math.ethz.ch>  Mon May 28 07:40:13 2001
From: Martin Maechler <maechler@stat.math.ethz.ch> (Martin Maechler)
Date: Mon, 28 May 2001 08:40:13 +0200
Subject: [Rd] Recent spam -- should we forbid javascript?
In-Reply-To: <20010528012211.BIBB11152.mail2.rdc2.bc.home.com@[24.76.58.120]>
References: <20010528012211.BIBB11152.mail2.rdc2.bc.home.com@[24.76.58.120]>
Message-ID: <15121.62157.632639.321423@gargle.gargle.HOWL>

The recent spam that went to both R-devel and R-help would have been
 somewhat difficult to autodetect by the relatively simple filters we use.

One possibility to prevent these would be to disallow javascript at all
(in mails to the  mailing lists).
Does anyone see a reason against this measure?
     [note that there won't ever be a 100% spam proof system..]

Your list maintainer,

Martin Maechler <maechler@stat.math.ethz.ch>	http://stat.ethz.ch/~maechler/
Seminar fuer Statistik, ETH-Zentrum  LEO D10	Leonhardstr. 27
ETH (Federal Inst. Technology)	8092 Zurich	SWITZERLAND
phone: x-41-1-632-3408		fax: ...-1228			<><
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Mon May 28 07:45:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Mon, 28 May 2001 08:45:08 +0200 (MET DST)
Subject: [Rd] Undeclared identifier in make compilation (PR#951)
Message-ID: <200105280645.IAA03866@pubhealth.ku.dk>

On Mon, 28 May 2001 Nick.Guoth@anu.edu.au wrote:

> Full_Name: Nick Guoth
> Version: 1.2.3
> OS: SunOS 5.8 Generic_108528-03
> Submission from: (NULL) (150.203.33.227)
>

I believe this means that the png headers were found but that they were
either way out of date or corrupt.  What is your png version?  Try
upgrading to the latest (1.0.10 last time I looked), or compile without the
png.h in your include path.

>
> >From running the make, the following error occurs:
>
> gcc -I. -I../../../src/include -I../../../src/include -I/opt/x11r6.3/include
> -I/usr/local/include -DHAVE_CONFIG_H  -fPIC  -g -O2 -c rbitmap.c -o rbitmap.o
> rbitmap.c: In function `R_SaveAsPng':
> rbitmap.c:169: `PNG_INTERLACE_NONE' undeclared (first use in this function)
> rbitmap.c:169: (Each undeclared identifier is reported only once
> rbitmap.c:169: for each function it appears in.)
> rbitmap.c:169: `PNG_COMPRESSION_TYPE_BASE' undeclared (first use in this
> function)
> rbitmap.c:170: `PNG_FILTER_TYPE_BASE' undeclared (first use in this function)
> make[5]: *** [rbitmap.o] Error 1
> make[5]: Leaving directory `/home/nick/R/R-1.2.3/src/unix/X11'
> make[4]: *** [R] Error 2
> make[4]: Leaving directory `/home/nick/R/R-1.2.3/src/unix/X11'
> make[3]: *** [DLLs] Error 1
> make[3]: Leaving directory `/home/nick/R/R-1.2.3/src/unix'
> make[2]: *** [R] Error 2
> make[2]: Leaving directory `/home/nick/R/R-1.2.3/src/main'
> make[1]: *** [R] Error 1
> make[1]: Leaving directory `/home/nick/R/R-1.2.3/src'
> make: *** [R] Error 1
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.malewski@tu-bs.de  Mon May 28 09:17:26 2001
From: p.malewski@tu-bs.de (Peter Malewski)
Date: Mon, 28 May 2001 10:17:26 +0200
Subject: [Rd] lattice: postscript() false margins (PR#949)
In-Reply-To: <20010528053302.24017.qmail@web13905.mail.yahoo.com>; from deepayansarkar@yahoo.com on Sun, May 27, 2001 at 10:33:02PM -0700
References: <200105262128.XAA28779@pubhealth.ku.dk> <20010528053302.24017.qmail@web13905.mail.yahoo.com>
Message-ID: <20010528101723.A8567@rzpool07.pool.rz.tu-bs.de>

On Sun, May 27, 2001 at 10:33:02PM -0700, Mr deepayan sarkar wrote:
> 
> This is not really a bug. grid is not compatible with 
> standard R graphics, and just starting a device by 
> calling postscript() or x11() will not work. You need 
> to call the grid functions grid.start() and 
> grid.stop() when you enter and exit grid graphics.
> 
> If you're only interested in the lattice stuff, then 
> the proper way to initiate a postscript (or x11) 
> device is to call 
> 
> trellis.device(postscript, file="foo"). 
> 
> You should probably also read the documentation for 
> trellis.device, as you might not like the current 
> defaults.

Thanks for your answer. Actually I've recognized that grid.start /grid.stop but 
forgot this using "postscript". 

Yesterday I've made some graphs with print.trellis --it is really flexible + 
handy. Of course I've to spend some more time to "grid" to really understand 
the concept.
 

Peter





-- 
P.Malewski, Limmerstr.47, 30451 Hannover, 0511-2135008
At work: http://www.MH-Hannover.de 0511 532 3194 / Fax: 0511 532 3190, 
P.Malewski@tu-bs.de, peter.malewski@gmx.de, malewski.peter@mh-hannover.de.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon May 28 09:39:28 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 28 May 2001 10:39:28 +0200 (MET DST)
Subject: [Rd] memory bug in is.na[n]() (PR#952)
Message-ID: <200105280839.KAA05566@pubhealth.ku.dk>

I've forgotten to submit this as bug report
(and haven't easily seen how to debug).  

The bug is both for  is.na() and is.nan()  {which makes much sense since
					the C code of the two is very similar!};
only one is shown below.

Martin

------- start of forwarded message -------
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: R-core@stat.math.ethz.ch
Subject: another is.nan  BUG  found by gctorture-testing demo(is.things)
Date: Thu, 12 Apr 2001 14:51:06 +0200

demo() being part of strict tests (since this morning),
reveals another bug in is.nan()
in both branches, but already in 1.2.2 
(ie. certainly not caused by Peter's recent fix) :

 gctorture(FALSE) # default
 is.nan(NULL)
 #-> logical(0)

 gctorture()
 is.nan(NULL)

Looks pretty strange :  {calling it subsequently does sometimes not reproduce}

> gctorture()
> is.nan(NULL)
$names
 [1] "is.nan() applied to non-(list or vector)"
 [2] ""                                        
 [3] ""                                        
 [4] ""                                        
 [5] ""                                        
 [6] ""                                        
 [7] ""                                        
 [8] ""                                        
 [9] ""                                        
[10] ""                                        
[11] ""                                        
[12] ""                                        
[13] ""                                        
[14] ""                                        
[15] ""                                        
[16] ""                                        
[17] ""                                        
[18] ""                                        
[19] ""                                        
[20] ""                                        
[21] ""                                        
[22] ""                                        
[23] ""                                        
[24] ""                                        
[25] ""                                        
[26] ""                                        
[27] ""                                        
[28] ""                                        
[29] ""                                        
[30] ""                                        
[31] ""                                        
[32] ""                                        
[33] ""                                        
[34] ""                                        
[35] ""                                        
[36] ""                                        
[37] ""                                        
[38] ""                                        
[39] ""                                        
[40] ""                                        
[41] ""                                        
[42] ""                                        
[43] ""                                        
[44] ""                                        
[45] ""                                        
[46] ""                                        
[47] ""                                        
[48] ""                                        
[49] ""                                        
[50] ""                                        

Warning message: 
is.nan() applied to non-(list or vector) in: is.nan(NULL) 
> 
------- end of forwarded message -------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Mon May 28 09:45:18 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Mon, 28 May 2001 10:45:18 +0200 (MET DST)
Subject: [Rd] bugs in deriv(*, *, function.arg = ) (PR#953)
Message-ID: <200105280845.KAA05650@pubhealth.ku.dk>

Also, this should have gone in R-bugs quite a while ago :

------- start of forwarded message -------
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: R-core@stat.math.ethz.ch
Subject: PROTECT() bugs in deriv(*, *, function.arg = ) 
Date: Mon, 16 Apr 2001 21:02:10 +0200

In R versions 0.50 and 0.64.2 ,
the following worked

      > deriv(expression(sin(cos(x) * y)), c("x","y"), function(x,y){})
      function (x, y) 
      {
	  .expr1 <- cos(x)
	  .expr2 <- .expr1 * y
	  .expr4 <- cos(.expr2)
	  .value <- sin(.expr2)
	  .grad <- array(0, c(length(.value), 2), list(NULL, c("x", 
	      "y")))
	  .grad[, "x"] <- -.expr4 * (sin(x) * y)
	  .grad[, "y"] <- .expr4 * .expr1
	  attr(.value, "gradient") <- .grad
	  .value
      }


    which *was* S(-plus) compatible.
    It stopped working with 0.65.1,
    and later someone added to  help(deriv) 's description of  function.arg

      \item{function.arg}{If specified, a character vector of arguments for
	a function return, or a function (with empty body) or \code{TRUE},
	the latter indicating that a function with argument names
	\code{namevec} should be used.

    the comment 
       >>>> \bold{Note:} this is incompatible with S.}

    Today, I've been looking a bit at the C code and I can't understand why
    giving the function.arg as a function doesn't work anymore.
    (it just returns the 'empty' function.arg).
    Interestingly, it *did* work when I ran things under gdb .. ? .. ?

    The result is the same under gctorture(),
    however, that does reveal a bug (missing PROTECT() ?),
    clearly even under 1.2.2 :

    > gctorture()

    > deriv(expression(sin(x + y^2)), c("x", "y"),c("x", "y"))
    [[1]]


    . 

    {
	.expr2 <- x + y^2
	.expr4 <- cos(.expr2)
	.value <- sin(.expr2)
	.grad <- array(0, c(length(.value), 2), list(NULL, c("x", 
	    "y")))
	.grad[, "x"] <- .expr4
	.grad[, "y"] <- .expr4 * (2 * y)
	attr(.value, "gradient") <- .grad
	.value
    }

    > 

which is a pretty funny beast.

Something for PROTECT() specialists; 
I think there really are two bugs, one when the `function.arg' is a
character vector (bug showing with gctorture()) and one when it is a
function (the body is just not set).

Note that I've committed a very slightly enhanced deriv.c for R-devel
but that should hopefully merge nicely once the bug is found and fixed on
R-release.

Martin

------- end of forwarded message -------


Note that the above "beast" is a "pairlist" ...
MM

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon May 28 18:07:37 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 28 May 2001 10:07:37 -0700 (PDT)
Subject: [Rd] memory bug in is.na[n]() (PR#952)
In-Reply-To: <200105280839.KAA05566@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0105281006010.24130-100000@homer41.u.washington.edu>

On Mon, 28 May 2001 maechler@stat.math.ethz.ch wrote:

> I've forgotten to submit this as bug report
> (and haven't easily seen how to debug).
>
> The bug is both for  is.na() and is.nan()  {which makes much sense since
> 					the C code of the two is very similar!};
> only one is shown below.

I think I've found it - I'll do a bit more testing.

Incidentally, on my machine if you do

gctorture()
is.nan(NULL)
is.nan(NULL)
is.nan(NULL)
...

it happens precisely on the second invocation.

	-thomas

>
> Martin
>
> ------- start of forwarded message -------
> From: Martin Maechler <maechler@stat.math.ethz.ch>
> To: R-core@stat.math.ethz.ch
> Subject: another is.nan  BUG  found by gctorture-testing demo(is.things)
> Date: Thu, 12 Apr 2001 14:51:06 +0200
>
> demo() being part of strict tests (since this morning),
> reveals another bug in is.nan()
> in both branches, but already in 1.2.2
> (ie. certainly not caused by Peter's recent fix) :
>
>  gctorture(FALSE) # default
>  is.nan(NULL)
>  #-> logical(0)
>
>  gctorture()
>  is.nan(NULL)
>
> Looks pretty strange :  {calling it subsequently does sometimes not reproduce}
>
> > gctorture()
> > is.nan(NULL)
> $names
>  [1] "is.nan() applied to non-(list or vector)"
>  [2] ""
>  [3] ""
>  [4] ""
>  [5] ""
>  [6] ""
>  [7] ""
>  [8] ""
>  [9] ""
> [10] ""
> [11] ""
> [12] ""
> [13] ""
> [14] ""
> [15] ""
> [16] ""
> [17] ""
> [18] ""
> [19] ""
> [20] ""
> [21] ""
> [22] ""
> [23] ""
> [24] ""
> [25] ""
> [26] ""
> [27] ""
> [28] ""
> [29] ""
> [30] ""
> [31] ""
> [32] ""
> [33] ""
> [34] ""
> [35] ""
> [36] ""
> [37] ""
> [38] ""
> [39] ""
> [40] ""
> [41] ""
> [42] ""
> [43] ""
> [44] ""
> [45] ""
> [46] ""
> [47] ""
> [48] ""
> [49] ""
> [50] ""
>
> Warning message:
> is.nan() applied to non-(list or vector) in: is.nan(NULL)
> >
> ------- end of forwarded message -------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle
^^^^^^^^^^^^^^^^^^^^^^^^
 NOTE NEW EMAIL ADDRESS

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Mon May 28 18:31:22 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 28 May 2001 19:31:22 +0200
Subject: [Rd] memory bug in is.na[n]() (PR#952)
In-Reply-To: Thomas Lumley's message of "Mon, 28 May 2001 10:07:37 -0700 (PDT)"
References: <Pine.A41.4.33.0105281006010.24130-100000@homer41.u.washington.edu>
Message-ID: <x2wv71xtw5.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On Mon, 28 May 2001 maechler@stat.math.ethz.ch wrote:
> 
> > I've forgotten to submit this as bug report
> > (and haven't easily seen how to debug).
> >
> > The bug is both for  is.na() and is.nan()  {which makes much sense since
> > 					the C code of the two is very similar!};
> > only one is shown below.
> 
> I think I've found it - I'll do a bit more testing.

(I bet it was a copy+paste from my earlier fix re lists with NULL
elements... D*mn, I thought I checked that it wouldn't happen it the
list itself was NULL) 

> Incidentally, on my machine if you do
> 
> gctorture()
> is.nan(NULL)
> is.nan(NULL)
> is.nan(NULL)
> ...
> 
> it happens precisely on the second invocation.

Yes, with the new memory allocator you're not quite as sure to provoke
errors with gctorture() as with the old one. On the other hand it lets
base-Ex.R run through overnight rather than in two weeks...


-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon May 28 18:44:57 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 28 May 2001 10:44:57 -0700 (PDT)
Subject: [Rd] memory bug in is.na[n]() (PR#952)
In-Reply-To: <x2wv71xtw5.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105281038580.24130-100000@homer41.u.washington.edu>

On 28 May 2001, Peter Dalgaard BSA wrote:

> Thomas Lumley <tlumley@u.washington.edu> writes:
>
> > On Mon, 28 May 2001 maechler@stat.math.ethz.ch wrote:
> >
> > > I've forgotten to submit this as bug report
> > > (and haven't easily seen how to debug).
> > >
> > > The bug is both for  is.na() and is.nan()  {which makes much sense since
> > > 					the C code of the two is very similar!};
> > > only one is shown below.
> >
> > I think I've found it - I'll do a bit more testing.
>

Committed.  The ans variable wasn't protected. This only matters when
is.nan returns a warning, as otherwise there is no more allocation before
the result is returned and protected by the caller.

Similar errors happened with is.na(.GlobalEnv) or is.na(new.env()).

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Mon May 28 21:58:20 2001
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Mon, 28 May 2001 22:58:20 +0200 (MET DST)
Subject: [Rd] deriv (PR#953)
Message-ID: <200105282058.WAA13802@pubhealth.ku.dk>


------- start of forwarded message -------
From: Martin Maechler <maechler@stat.math.ethz.ch>
To: R-core@stat.math.ethz.ch
Subject: PROTECT() bugs in deriv(*, *, function.arg = )
Date: Mon, 16 Apr 2001 21:02:10 +0200

In R versions 0.50 and 0.64.2 ,
the following worked

      > deriv(expression(sin(cos(x) * y)), c("x","y"), function(x,y){})
      function (x, y)
      {
          .expr1 <- cos(x)
          .expr2 <- .expr1 * y
          .expr4 <- cos(.expr2)
          .value <- sin(.expr2)
          .grad <- array(0, c(length(.value), 2), list(NULL, c("x",
              "y")))
          .grad[, "x"] <- -.expr4 * (sin(x) * y)
          .grad[, "y"] <- .expr4 * .expr1
          attr(.value, "gradient") <- .grad
          .value
      }



The second bug (gctorture-provoked) is a missing PROTECT(), which I will
commit when I've run make check.

The first bug is very strange and I suspect there's something going on in
the memory management.  Supplying a function as the third argument should
cause the body of the function to be replaced by the derivative. This
sometimes works, but doesn't depend on the function in any simple way.

It seems to depend on how new the function is. With a new anonymous
function it never works, but with a base function like lm or log it always
works:

 ## works
 deriv(expression(sin(cos(x) * y)), c("x","y"), log)
 ## identical function
 LOG<-function (x, base = exp(1))
    if (missing(base)) .Internal(log(x)) else .Internal(log(x, base))
 ## doesn't work
 deriv(expression(sin(cos(x) * y)), c("x","y"), LOG)

Creating a new function somewhere else in the search path doesn't help
 assign("a",function(x,y){},pos=3)
 # doesn't work
 deriv(expression(sin(cos(x) * y)), c("x","y"), a)

but copying a loaded function does

  library(tcltk)
  a<-tkbind
  #works
  deriv(expression(sin(cos(x) * y)), c("x","y"), a)


????

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From paul@stat.auckland.ac.nz  Tue May 29 00:50:31 2001
From: paul@stat.auckland.ac.nz (Paul Murrell)
Date: Tue, 29 May 2001 11:50:31 +1200
Subject: [Rd] xyplot,grid.text segfault (PR#948)
References: <200105261124.NAA27403@pubhealth.ku.dk> <x2k834eycd.fsf@blueberry.kubism.ku.dk>
Message-ID: <019001c0e7d0$fb44fc70$175dd882@stat.auckland.ac.nz>

Hi


> grid.text() seems unhappy with being passed a non-character vector for
> the label argument. I think Paul muttered something to the effect that
> he knew there would be that kind of weaknesses in the code.
>
> The following runs successfully (well, at least it doesn't crash - the
> result looks a bit weird):
>
> library(lattice)
> zz <- data.frame(
>                  y=rnorm(100),x=rnorm(100),z=round(rnorm(100)),
>                  g=as.character(rep(1:2,50)))
> xyplot(y~ x|z,data=zz,groups=g,
>             panel = function(x, y, subscripts, groups)
>             grid.text(x=x, y=y,
>                       label=as.character(groups[subscripts]))
>        )


The results look weird because the x and y locations in grid.text are in
"npc" units by default (that is, they are taken as proportions of the
dimensions of the region they are being drawn in).  This means that values
outside the range 0..1 are drawn outside the limits of the plotting region.
You need to specify "native" units in the call so that the x and y locations
are relative to the scales on the axes of the plotting region.  For example,

    grid.text(x=x, y=y,
                  label=as.character(groups[subscripts]),
                  default.units="native")

This unit stuff is a "feature" of the underlying grid graphics, which is
probably why you did not notice it.  The default panel functions do,
however, provide examples of what needs to be done.  See, for example,
panel.xyplot.

Paul


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Richard.Beare@cmis.csiro.au  Tue May 29 00:49:32 2001
From: Richard.Beare@cmis.csiro.au (Richard.Beare@cmis.csiro.au)
Date: Tue, 29 May 2001 01:49:32 +0200 (MET DST)
Subject: [Rd] argument names in generic print functions (PR#955)
Message-ID: <200105282349.BAA14358@pubhealth.ku.dk>

Hello,

I think this is a bug, although it is possible that I'm doind something
silly.

I want to be able to determine the argument name for variables passed to
a generic print function

suppose we have

print.foo <- function(x, ...)
{
nm<-deparse(substitute(x))
cat("param name is ", nm, "\n")
}

d<-structure(1, class="foo")

Under R-1.2.[2,3]

> print(d)
param name is  d 

> d
param name is  structure(1, class = "foo") 


Under Splus 3.4 the responses are

> d<-structure(1, class="foo")
> d
param name is  d 
> print(d)
param name is  d 


If I'm going about this the wrong way then please let me know.

Thanks


-- 
Richard Beare, CSIRO Mathematical & Information Sciences
Locked Bag 17, North Ryde, NSW 1670, Australia
Phone: +61-2-93253221 (GMT+~10hrs)  Fax: +61-2-93253200

Richard.Beare@cmis.csiro.au

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue May 29 03:05:16 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Mon, 28 May 2001 19:05:16 -0700 (PDT)
Subject: [Rd] argument names in generic print functions (PR#955)
In-Reply-To: <200105282349.BAA14358@pubhealth.ku.dk>
Message-ID: <Pine.A41.4.33.0105281851480.158266-100000@homer03.u.washington.edu>

On Tue, 29 May 2001 Richard.Beare@cmis.csiro.au wrote:

> Hello,
>
> I think this is a bug, although it is possible that I'm doind something
> silly.
>
> I want to be able to determine the argument name for variables passed to
> a generic print function
<snip>

> Under R-1.2.[2,3]
>
> > print(d)
> param name is  d
>
> > d
> param name is  structure(1, class = "foo")
>
> Under Splus 3.4 the responses are
>
> > d<-structure(1, class="foo")
> > d
> param name is  d
> > print(d)
> param name is  d
>
> If I'm going about this the wrong way then please let me know.

I don't think there is a right way to do this in R.  The
read-evaluate-print loop in R prints the *value* of an expression that it
evaluates, not the expression itself. This means that your print()
function doesn't have any way of knowing what the expression was
originally called.  You have to use print() explicitly to get the
parameter name the way you want.

It's not a bug, though it seems to be an incompatibility.

	-thomas

Thomas Lumley			Asst. Professor, Biostatistics
tlumley@u.washington.edu	University of Washington, Seattle

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 29 13:25:19 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 29 May 2001 14:25:19 +0200 (MET DST)
Subject: [Rd] unbelievable parser bug (PR#956)
Message-ID: <200105291225.OAA22283@pubhealth.ku.dk>

close to ``unbelievable'' but the following line
is not parsed correctly but gives a syntax error :

    x <- 1## A = 1


--please do not edit the information below--

Version:
 platform = i686-pc-linux-gnu
 arch = i686
 os = linux-gnu
 system = i686, linux-gnu
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Friedrich.Leisch@ci.tuwien.ac.at  Tue May 29 13:34:51 2001
From: Friedrich.Leisch@ci.tuwien.ac.at (Friedrich Leisch)
Date: Tue, 29 May 2001 14:34:51 +0200
Subject: [Rd] unbelievable parser bug (PR#956)
In-Reply-To: <200105291225.OAA22283@pubhealth.ku.dk>
References: <200105291225.OAA22283@pubhealth.ku.dk>
Message-ID: <15123.38763.364918.656351@galadriel.ci.tuwien.ac.at>

>>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST),
>>>>> maechler  (m) wrote:

  > close to ``unbelievable'' but the following line
  > is not parsed correctly but gives a syntax error :

  >     x <- 1## A = 1


what you don't see is that the ``spaces'' before the comment are no
spaces: if I copy & paste the thing to a vi buffer I see:

	 x <- 1\xa0\xa0## A = 1

...

I got the idea from sequentially deleting characters:

> x <- 1## A = 1
Error: syntax error
> x <- 1# A = 1
Error: syntax error
> x <- 1# A    
Error: syntax error
> x <- 1#   
Error: syntax error
> x <- 1
Error: syntax error


especially the last one look nice IMO ...

.f


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 29 14:11:05 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 29 May 2001 15:11:05 +0200 (MET DST)
Subject: [Rd] unbelievable parser bug (PR#956)
Message-ID: <200105291311.PAA23674@pubhealth.ku.dk>

>>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:

>>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST),
>>>>> maechler  (m) wrote:

    >> close to ``unbelievable'' but the following line is not parsed
    >> correctly but gives a syntax error :

    >> x <- 1## A = 1


    FrL> what you don't see is that the ``spaces'' before the comment are
    FrL> no spaces: if I copy & paste the thing to a vi buffer I see:

    FrL> 	 x <- 1\xa0\xa0## A = 1

    FrL> ...

    FrL> I got the idea from sequentially deleting characters:

    >> x <- 1## A = 1
    FrL> Error: syntax error
    >> x <- 1# A = 1
    FrL> Error: syntax error
    >> x <- 1# A
    FrL> Error: syntax error
    >> x <- 1#
    FrL> Error: syntax error
    >> x <- 1
    FrL> Error: syntax error


    FrL> especially the last one look nice IMO ...

;-)  

thank you, Fritz.   
Now what about a "morale of the story" (<< probably a Germanism) ?

Don't cut and paste from e-mails any more, unless you have a really
ASCII only e-mail program or editor into which you paste.
Unfortunately, emacs doesn't seem to be among these anymore...  
aaargghh...

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 29 15:25:22 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 29 May 2001 16:25:22 +0200
Subject: [Rd] unbelievable parser bug (PR#956)
In-Reply-To: maechler@stat.math.ethz.ch's message of "Tue, 29 May 2001 15:11:05 +0200 (MET DST)"
References: <200105291311.PAA23674@pubhealth.ku.dk>
Message-ID: <x2itikb5bh.fsf@blueberry.kubism.ku.dk>

maechler@stat.math.ethz.ch writes:

> >>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at> writes:
> 
> >>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST),
> >>>>> maechler  (m) wrote:
> 
>     >> close to ``unbelievable'' but the following line is not parsed
>     >> correctly but gives a syntax error :
> 
>     >> x <- 1## A = 1
> 
> 
>     FrL> what you don't see is that the ``spaces'' before the comment are
>     FrL> no spaces: if I copy & paste the thing to a vi buffer I see:
> 
>     FrL> 	 x <- 1\xa0\xa0## A = 1
....
> 
> ;-)  
> 
> thank you, Fritz.   
> Now what about a "morale of the story" (<< probably a Germanism) ?
> 
> Don't cut and paste from e-mails any more, unless you have a really
> ASCII only e-mail program or editor into which you paste.
> Unfortunately, emacs doesn't seem to be among these anymore...  
> aaargghh...


Hmm. 0xa0 is M-SPC. These are fairly easily generated on non-English
keyboards: both Alt_L+SPC and AltGr+SPC on mine (and those three keys
are adjacent). It might make sense to force the parser to accept the
"metafied" whitespace characters?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From maechler@stat.math.ethz.ch  Tue May 29 15:28:07 2001
From: maechler@stat.math.ethz.ch (maechler@stat.math.ethz.ch)
Date: Tue, 29 May 2001 16:28:07 +0200 (MET DST)
Subject: [Rd] unbelievable parser bug (PR#956)
Message-ID: <200105291428.QAA24734@pubhealth.ku.dk>

>>>>> "PD" == Peter Dalgaard BSA <p.dalgaard@biostat.ku.dk> writes:

    PD> maechler@stat.math.ethz.ch writes:
    >> >>>>> "FrL" == Friedrich Leisch <Friedrich.Leisch@ci.tuwien.ac.at>
    >> writes:
    >> 
    >> >>>>> On Tue, 29 May 2001 14:25:19 +0200 (MET DST), >>>>> maechler
    >> (m) wrote:
    >> 
    >> >> close to ``unbelievable'' but the following line is not parsed >>
    >> correctly but gives a syntax error :
    >> 
    >> >> x <- 1## A = 1
    >> 
    >> 
    FrL> what you don't see is that the ``spaces'' before the comment are
    FrL> no spaces: if I copy & paste the thing to a vi buffer I see:
    >>
    FrL> x <- 1\xa0\xa0## A = 1
    PD> ....
    >>  ;-)
    >> 
    >> thank you, Fritz.  Now what about a "morale of the story" (<<
    >> probably a Germanism) ?

in the mean time I've learned:   ``moral of the story'' (is no Germanism)

    >> Don't cut and paste from e-mails any more, unless you have a really
    >> ASCII only e-mail program or editor into which you paste.
    >> Unfortunately, emacs doesn't seem to be among these anymore...
    >> aaargghh...


    PD> Hmm. 0xa0 is M-SPC. These are fairly easily generated on
    PD> non-English keyboards: both Alt_L+SPC and AltGr+SPC on mine (and
    PD> those three keys are adjacent). 

Thank you Peter;
in this cases, they text was from an e-mail (from a `R for MacOS' user who
 most proably had a SwissGerman keyboard {but probably no Emacs..})) but it
was smart Emacs (VM) dealing ``automagically'' with strange encodings ...

    PD> It might make sense to force the
    PD> parser to accept the "metafied" whitespace characters?

yes, I think that might be useful and make sense.
Compatibility with S(plus) might be a point here, but then we *do* have
locale dependent syntax anyway.

Martin

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From deleeuw@stat.ucla.edu  Tue May 29 18:00:26 2001
From: deleeuw@stat.ucla.edu (Jan de Leeuw)
Date: Tue, 29 May 2001 10:00:26 -0700
Subject: [Rd] unbelievable parser bug (PR#956)
In-Reply-To: <200105291311.PAA23674@pubhealth.ku.dk>
Message-ID: <200105291700.KAA73423@pine.frazmtn.com>


--Apple-Mail-503838107-1
Content-Transfer-Encoding: 7bit
Content-Type: text/plain;
	format=flowed;
	charset=us-ascii

Martin

Re: Germanism, Not so. This is from "The Ballad of Frankie Lee
and Judas Priest" on Bob Dylan's "John Wesley Harding" album.
==========================
Well, the moral of the story,
the moral of this song
is simply that one should never be
where one does not belong
==========================
--- Jan

On Tuesday, May 29, 2001, at 06:11 AM, maechler@stat.math.ethz.ch wrote:

> thank you, Fritz.
> Now what about a "morale of the story" (<< probably a Germanism) ?
>

===
Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;
US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554
phone (310)-825-9550;  fax (310)-206-5658;  email: deleeuw@stat.ucla.edu
homepage: http://www.stat.ucla.edu/~deleeuw
========================================================
           No matter where you go, there you are. --- Buckaroo Banzai
                    http://www.stat.ucla.edu/sounds/nomatter.au
========================================================

--Apple-Mail-503838107-1
Content-Transfer-Encoding: quoted-printable
Content-Type: text/enriched;
	charset=us-ascii

Martin


Re: Germanism, Not so. This is from "The Ballad of Frankie Lee=20

and Judas Priest" on Bob Dylan's "John Wesley Harding" album.

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D

Well, the moral of the story,

the moral of this song

is simply that one should never be

where one does not belong

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D

--- Jan


On Tuesday, May 29, 2001, at 06:11 AM, maechler@stat.math.ethz.ch
wrote:


<excerpt>thank you, Fritz.  =20

Now what about a "morale of the story" (<<<< probably a Germanism) ?


</excerpt>

<color><param>0000,6363,1212</param>=3D=3D=3D

Jan de Leeuw; Professor and Chair, UCLA Department of Statistics;

US mail: 9432 Boulter Hall, Box 951554, Los Angeles, CA 90095-1554

phone (310)-825-9550;  fax (310)-206-5658;  email:
deleeuw@stat.ucla.edu

homepage:
=
</color><underline><color><param>1A1A,1A1A,FFFF</param>http://www.stat.ucl=
a.edu/~deleeuw</color></underline><color><param>0000,6363,1212</param>

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D

          No matter where you go, there you are. --- Buckaroo Banzai

                 =20
=
</color><underline><color><param>1A1A,1A1A,FFFF</param>http://www.stat.ucl=
a.edu/sounds/nomatter.au</color></underline><color><param>0000,6363,1212</=
param>

=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=3D=
=3D=3D=3D=3D=3D=3D

</color>=

--Apple-Mail-503838107-1--
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From gregory_r_warnes@groton.pfizer.com  Tue May 29 20:58:30 2001
From: gregory_r_warnes@groton.pfizer.com (Warnes, Gregory R)
Date: Tue, 29 May 2001 15:58:30 -0400
Subject: [Rd] New Package: gregmisc
Message-ID: <5429125E11E4D411AF7300805FE603A8014CEB0B@groexmbcr02.pfizer.com>



  > From: ben@zoo.ufl.edu [mailto:ben@zoo.ufl.edu]
  > 
  > 
  >    Do you have the latest version of plotCI?  (attached 
  > below, I didn't
  > send it as an attachment for the sake of R-devel)  It uses arrows()
  > instead of segments(), which simplifies the code a bit and 
  > incidentally
  > makes it work with logarithmic axes as well (since the 
  > sizes of the bar
  > ends are specified in absolute rather than user units).

Hmmm.  I merged our two versions together.  The revised version is pasted in
below and is included in revisions 0.1.3 of gregmisc, as is an updated .Rd
file.

  > 
  >   Should this code be the first entry in the "miscellaneous code"
  > repository at CRAN that was discussed a while back?
  >
  >   By the way, something occurred to me ... my 
  > "miscellaneous packages"
  > function (which I haven't made available to CRAN yet, 
  > although I probably
  > will eventually) is called "bbmisc".  Yours is called 
  > "gregmisc".  Would
  > it make any sense to standardize these on "<lastname>misc" or
  > "<first_initial><lastname>misc" (bolkermisc, bbolkermisc) to avoid
  > confusion once we have a whole bunch of these packages?

I think that it is a better idea to create packages with coherent themes and
make it easy for people to submit single functions to them.  Perhaps we
should create:

	plotmisc    to hold things like boxplot.n(), plotCI(), plotmeans(),
...	
	modelmisc	to hold things like CI(),...
	datamisc	to hold example data sets
	...
	
and encourage contributions.
	
	
  > 
  >   Also by the way, congratulations for actually getting 
  > around to posting
  > your miscellaneous functions to CRAN!  I hope to do as well.

YES, the jump from "I wrote this useful function" to "posting to CRAN" is
too big.     Hence the idea of the "*misc" packages...

So, if you have some functions, just send along a function and a .Rd file
and I'll create the packages...

  > 
  >   Ben Bolker
  > 

=============== revised plotCI code ====================
plotCI <- function (x, y = NULL,
                    uiw, liw = uiw,   # bar widths  -OR-
                    ui, li, # bar ends
                    err='y', # bar direction, 'y' or 'x'
                    col=par("col"),
                    ylim=NULL,
                    xlim=NULL,
                    barcol=col,
                    sfrac = 0.01,
                    gap=1,
                    lwd=par("lwd"),
                    lty=par("lty"),
                    labels=FALSE,
                    add=FALSE,
                    xlab,
                    ylab,
                    ...
                    )
{
  if (is.list(x)) { 
    y <- x$y 
    x <- x$x 
  }

  if(missing(xlab))
    xlab <- deparse(substitute(x))
  
  if(missing(ylab))
    {
      if(is.null(y))
        {
          xlab  <- ""
          ylab <- deparse(substitute(x))
        }
      else
        ylab <- deparse(substitute(y))
    }

  if (is.null(y)) { 
    if (is.null(x)) 
      stop("both x and y NULL") 
    y <- as.numeric(x) 
    x <- seq(along = x) 
  }

  
  if(err=="y")
    z  <- y
  else
    z  <- x
  
  if(missing(ui))
    ui <- z + uiw
  if(missing(li)) 
    li <- z - liw
   
  if(err=="y" & is.null(ylim))
    {
      ylim <- range(c(y, ui, li), na.rm=TRUE)
    }
  else if(err=="x" & is.null(xlim))
    {
      xlim <- range(c(x, ui, li), na.rm=TRUE)
    }

    
  if(!add)
    {
      if(missing(labels) || labels==F )
        plot(x, y, ylim = ylim, xlim=xlim, col=col,
             xlab=xlab, ylab=ylab, ...)
      else
        {
          plot(x, y, ylim = ylim, xlim=xlim, col=col, type="n",
               xlab=xlab, ylab=ylab,  ...)
          text(x, y, label=labels, col=col )
        }
    }

 
  if(err=="y")
    {
      if(gap!=FALSE)
        gap <- strheight("O") * gap
      smidge <- par("fin")[1] * sfrac

      # draw upper bar
      if(!is.null(li))
          arrows(x , li, x, pmax(y-gap,li), col=barcol, lwd=lwd,
                 lty=lty, angle=90, length=smidge, code=1)
      # draw lower bar
      if(!is.null(ui))
          arrows(x , ui, x, pmin(y+gap,ui), col=barcol,
                 lwd=lwd, lty=lty, angle=90, length=smidge, code=1)
    }
  else
    {
      if(gap!=FALSE)
        gap <- strwidth("O") * gap
      smidge <- par("fin")[2] * sfrac

      # draw left bar
      if(li!=NULL)
        arrows(li, y, pmax(x-gap,li), y, col=col, lwd=lwd, lty=slty,
               angle=90, length=smidge, code=1)
      if(ui!=NULL)
        arrows(ui, y, pmin(x+gap,ui), y, col=col, lwd=lwd, lty=slty,
               angle=90, length=smidge, code=1)
      
    }
      
    

invisible(list(x = x, y = y)) 
} 


LEGAL NOTICE
Unless expressly stated otherwise, this message is confidential and may be privileged. It is intended for the addressee(s) only. Access to this E-mail by anyone else is unauthorized. If you are not an addressee, any disclosure or copying of the contents of this E-mail or any action taken (or not taken) in reliance on it is unauthorized and may be unlawful. If you are not an addressee, please inform the sender immediately.
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Tue May 29 23:35:00 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 May 2001 00:35:00 +0200
Subject: [Rd] deriv (PR#953)
In-Reply-To: tlumley@u.washington.edu's message of "Mon, 28 May 2001 22:58:20 +0200 (MET DST)"
References: <200105282058.WAA13802@pubhealth.ku.dk>
Message-ID: <x2ae3viy23.fsf@blueberry.kubism.ku.dk>

tlumley@u.washington.edu writes:

> The first bug is very strange and I suspect there's something going on in
> the memory management.  Supplying a function as the third argument should
> cause the body of the function to be replaced by the derivative. This
> sometimes works, but doesn't depend on the function in any simple way.
> 
> It seems to depend on how new the function is. With a new anonymous
> function it never works, but with a base function like lm or log it always
> works:
> 
>  ## works
>  deriv(expression(sin(cos(x) * y)), c("x","y"), log)
>  ## identical function
>  LOG<-function (x, base = exp(1))
>     if (missing(base)) .Internal(log(x)) else .Internal(log(x, base))
>  ## doesn't work
>  deriv(expression(sin(cos(x) * y)), c("x","y"), LOG)
> 
> Creating a new function somewhere else in the search path doesn't help
>  assign("a",function(x,y){},pos=3)
>  # doesn't work
>  deriv(expression(sin(cos(x) * y)), c("x","y"), a)
> 
> but copying a loaded function does
> 
>   library(tcltk)
>   a<-tkbind
>   #works
>   deriv(expression(sin(cos(x) * y)), c("x","y"), a)

<grin> 
You had me going there too.

Try stripping the "source" attribute from the template functions....
(or from the output of deriv() for that matter). I'll give it a think
how to do that inside the deriv function so as to preserve user
sanity.

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Tue May 29 23:44:51 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Tue, 29 May 2001 15:44:51 -0700 (PDT)
Subject: [Rd] deriv (PR#953)
In-Reply-To: <x2ae3viy23.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105291539050.107374-100000@homer23.u.washington.edu>

On 30 May 2001, Peter Dalgaard BSA wrote:
>
> <grin>
> You had me going there too.
>
> Try stripping the "source" attribute from the template functions....
> (or from the output of deriv() for that matter). I'll give it a think
> how to do that inside the deriv function so as to preserve user
> sanity.

Ouch. Perhaps SET_BODY should remove the "source" attribute?

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 30 00:09:21 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 May 2001 01:09:21 +0200
Subject: [Rd] deriv (PR#953)
In-Reply-To: Thomas Lumley's message of "Tue, 29 May 2001 15:44:51 -0700 (PDT)"
References: <Pine.A41.4.33.0105291539050.107374-100000@homer23.u.washington.edu>
Message-ID: <x28zjfzra6.fsf@blueberry.kubism.ku.dk>

Thomas Lumley <tlumley@u.washington.edu> writes:

> On 30 May 2001, Peter Dalgaard BSA wrote:
> >
> > <grin>
> > You had me going there too.
> >
> > Try stripping the "source" attribute from the template functions....
> > (or from the output of deriv() for that matter). I'll give it a think
> > how to do that inside the deriv function so as to preserve user
> > sanity.
> 
> Ouch. Perhaps SET_BODY should remove the "source" attribute?

Hmm maybe, but it seems to me that elementary functions like that
should not do anything complicated, and body()<- and args() will
already lose *all* attributes. (The former might actually be
considered a buglet, but given the amount of use body()<- gets, I
think we can live with it).

I think I have another solution for deriv.c. That is, I thought I had,
but it didn't quite work...

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Wed May 30 14:36:23 2001
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Wed, 30 May 2001 09:36:23 -0400
Subject: [Rd] new book
Message-ID: <20010530093623.L10945@jimmy.harvard.edu>

Just thought I would mention that there is a new O'Reilly book out,
"Developing Bioinformatics Computer Skills", which is ok, pretty
superficial about some things but at least it lets you know what is
happening and where.
R gets a few pages in there, 394-396, mostly nice press and accurate
except that Bill Venables (hi Bill) may be surprised to find out that
he is a member of the core development team.
  Robert
ps: they also have an Xgobi reference
-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From plummer@iarc.fr  Wed May 30 15:12:55 2001
From: plummer@iarc.fr (Martyn Plummer)
Date: Wed, 30 May 2001 16:12:55 +0200 (CEST)
Subject: [Rd] new book
In-Reply-To: <20010530093623.L10945@jimmy.harvard.edu>
Message-ID: <XFMail.20010530161255.plummer@iarc.fr>

On 30-May-2001 Robert Gentleman wrote:
> Just thought I would mention that there is a new O'Reilly book out,
> "Developing Bioinformatics Computer Skills", which is ok, pretty
> superficial about some things but at least it lets you know what is
> happening and where.
> R gets a few pages in there, 394-396, mostly nice press and accurate
> except that Bill Venables (hi Bill) may be surprised to find out that
> he is a member of the core development team.
>   Robert
> ps: they also have an Xgobi reference

This came up a couple of weeks ago on Slashdot (which I should really
stop reading).  I got the impression from the ensuing discussion that
it was targetted at biologists,but if you found it useful I shall pick
up a copy.  In the same discussion, the monograph "Biological sequence
analysis: probabilistic methods of proteins and nucleic acids" by Durbin
(ed) was highly recommended by some people.  Do you have this?

Here is a link to the O'Reilly site which contains contents, and a
sample chapter.

http://www.oreilly.com/catalog/bioskills/

I remember buying an O'Reilly book called "The whole internet: a users
guide and catalogue". I wonder if this one will have an even shorter
shelf life.

Martyn
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed May 30 15:31:48 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 30 May 2001 07:31:48 -0700
Subject: [Rd] new book
In-Reply-To: Martyn Plummer's message of "Wed, 30 May 2001 16:12:55 +0200 (CEST)"
References: <XFMail.20010530161255.plummer@iarc.fr>
Message-ID: <87bsoa52nf.fsf@jeeves.blindglobe.net>

>>>>> "MP" == Martyn Plummer <plummer@iarc.fr> writes:

    MP> This came up a couple of weeks ago on Slashdot (which I should
    MP> really stop reading).  I got the impression from the ensuing
    MP> discussion that it was targetted at biologists,but if you
    MP> found it useful I shall pick up a copy.  In the same
    MP> discussion, the monograph "Biological sequence analysis:
    MP> probabilistic methods of proteins and nucleic acids" by Durbin
    MP> (ed) was highly recommended by some people.  Do you have this?

    MP> Here is a link to the O'Reilly site which contains contents,
    MP> and a sample chapter.

    MP> http://www.oreilly.com/catalog/bioskills/

    MP> I remember buying an O'Reilly book called "The whole internet:
    MP> a users guide and catalogue". I wonder if this one will have
    MP> an even shorter shelf life.

I commented privately, but since this comes up, I'll comment again: if
you know your way around genetic programs, perl and bioperl, and
understand general scripting tools, and have a smattering of
informatics knowledge, the book isn't too useful.  I've got a
protein-folding friend who plans on using it to teach a comp bio
course in microbiology; he considers the skills mentioned in the book
to be the bare-minimum for that, though it's short on theory.

The Durbin book is a nice intro to current state of the art DNA and
protein sequencing methods, but not much more (of course, it lives up
to its title).  That being said, I found it incredibly useful for
seeing what has been done recently.  YMMV.

I think part of the problem, and this is seen by those who recommend
the Durbin book, is that there are a number of different ways of
looking at the "bioinformatics" problem.  Problematically, you've got
something like:

A. Large quantities of data, and handling, storage, backup
B. Annotations and external (data) linkages
C. Computational Biology
D. Statistical issues (experimental design/analysis and exploratory
   approaches; 
E. Combinations of the above two, including such topics (one of many
   examples): stochastic DE modelling using mixed effects models.

and scientifically, you've got one or more of:

1. sequencing (DNA and/or protein)
2. protein structure (secondary/tertiary, based on the above)
3. gene expression arrays of many forms (cDNA, membrane, gold,
   oligios). 
4. SNPs 
5. genetics and evolutionary biology

and then there is the application area (cancer, HIV, other chronic
diseases; comparative studies and animal/plant/non-human organism
models, etc).

The classifications that I use are even up for grabs, depending on who
you are and who you talk with; it's just 2 possible views of this high
buzzword content area, sigh.  I know I've left out a few areas, here.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rgentlem@jimmy.harvard.edu  Wed May 30 15:45:44 2001
From: rgentlem@jimmy.harvard.edu (Robert Gentleman)
Date: Wed, 30 May 2001 10:45:44 -0400
Subject: [Rd] new book
In-Reply-To: <87bsoa52nf.fsf@jeeves.blindglobe.net>; from A.J. Rossini on Wed, May 30, 2001 at 07:31:48AM -0700
References: <XFMail.20010530161255.plummer@iarc.fr> <87bsoa52nf.fsf@jeeves.blindglobe.net>
Message-ID: <20010530104544.O10945@jimmy.harvard.edu>

On Wed, May 30, 2001 at 07:31:48AM -0700, A.J. Rossini wrote:
> >>>>> "MP" == Martyn Plummer <plummer@iarc.fr> writes:
> 
>     MP> This came up a couple of weeks ago on Slashdot (which I should
>     MP> really stop reading).  I got the impression from the ensuing
>     MP> discussion that it was targetted at biologists,but if you
>     MP> found it useful I shall pick up a copy.  In the same
>     MP> discussion, the monograph "Biological sequence analysis:
>     MP> probabilistic methods of proteins and nucleic acids" by Durbin
>     MP> (ed) was highly recommended by some people.  Do you have this?
> 
>     MP> Here is a link to the O'Reilly site which contains contents,
>     MP> and a sample chapter.
> 
>     MP> http://www.oreilly.com/catalog/bioskills/
> 
>     MP> I remember buying an O'Reilly book called "The whole internet:
>     MP> a users guide and catalogue". I wonder if this one will have
>     MP> an even shorter shelf life.
> 
> I commented privately, but since this comes up, I'll comment again: if
> you know your way around genetic programs, perl and bioperl, and
> understand general scripting tools, and have a smattering of
> informatics knowledge, the book isn't too useful.  I've got a
> protein-folding friend who plans on using it to teach a comp bio
> course in microbiology; he considers the skills mentioned in the book
> to be the bare-minimum for that, though it's short on theory.
> 

   I agree, but for those who are just getting started -- especially
   statistics grad students (or biology grad students or comp. sci) it
   can be very useful.
   I am actually a bit tempted to use it as a text for 1st year
   MSc/PhD's here, intro to stat computing. At least it gives them
   some examples that are relevant (and most know no Unix and no Perl
   and no....)

> The Durbin book is a nice intro to current state of the art DNA and
> protein sequencing methods, but not much more (of course, it lives up
> to its title).  That being said, I found it incredibly useful for
> seeing what has been done recently.  YMMV.
> 
  Yes, and Gusfield -- Algorithms on Strings Trees and Sequences is
  reasonable for what it does as well.

> I think part of the problem, and this is seen by those who recommend
> the Durbin book, is that there are a number of different ways of
> looking at the "bioinformatics" problem.  Problematically, you've got
> something like:
> 
> A. Large quantities of data, and handling, storage, backup
> B. Annotations and external (data) linkages

  I know very little about B. and found that DBCS at least gives some
  idea of what is available, what it looks like and how you might
  begin to deal with it.

  Yes, the field is developing so rapidly that it is useful now and
  won't be as good in 6 months and probably will be useless in 12 or
  18, but then so will the machine I'm typing at. 

> C. Computational Biology
> D. Statistical issues (experimental design/analysis and exploratory
>    approaches; 
> E. Combinations of the above two, including such topics (one of many
>    examples): stochastic DE modelling using mixed effects models.
> 
> and scientifically, you've got one or more of:
> 
> 1. sequencing (DNA and/or protein)
> 2. protein structure (secondary/tertiary, based on the above)
> 3. gene expression arrays of many forms (cDNA, membrane, gold,
>    oligios). 
> 4. SNPs 
> 5. genetics and evolutionary biology
> 
> and then there is the application area (cancer, HIV, other chronic
> diseases; comparative studies and animal/plant/non-human organism
> models, etc).
> 
> The classifications that I use are even up for grabs, depending on who
> you are and who you talk with; it's just 2 possible views of this high
> buzzword content area, sigh.  I know I've left out a few areas, here.
> 
> best,
> -tony
> 
> -- 
> A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
> U. of Washington Biostatistics		rossini@u.washington.edu	
> FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
> -------- (wednesday/friday is unknown) --------
> FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
> UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX
> 
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

-- 
+---------------------------------------------------------------------------+
| Robert Gentleman                 phone : (617) 632-5250                   |
| Associate Professor              fax:   (617)  632-2444                   |
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu   |
+---------------------------------------------------------------------------+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Wed May 30 15:55:20 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 30 May 2001 07:55:20 -0700
Subject: [Rd] new book
In-Reply-To: Robert Gentleman's message of "Wed, 30 May 2001 10:45:44 -0400"
References: <XFMail.20010530161255.plummer@iarc.fr>
 <87bsoa52nf.fsf@jeeves.blindglobe.net>
 <20010530104544.O10945@jimmy.harvard.edu>
Message-ID: <87vgmi3mzr.fsf@jeeves.blindglobe.net>

>>>>> "RG" == Robert Gentleman <rgentlem@jimmy.harvard.edu> writes:

    >> I commented privately, but since this comes up, I'll comment
    >> again: if you know your way around genetic programs, perl and
    >> bioperl, and understand general scripting tools, and have a
    >> smattering of informatics knowledge, the book isn't too useful.

    RG>    I agree, but for those who are just getting started --
    RG> especially statistics grad students (or biology grad students
    RG> or comp. sci) it can be very useful.  I am actually a bit
    RG> tempted to use it as a text for 1st year MSc/PhD's here, intro
    RG> to stat computing. At least it gives them some examples that
    RG> are relevant (and most know no Unix and no Perl and no....)

To clarify, I would agree that this is a good use of the book.  That
isn't the audience that I described it as "not very interesting for". 

However, a good number of people on R-devel are beyond that level, in
most respects (if this had been R-help, on the other hand...).

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Setzer.Woodrow@epamail.epa.gov  Wed May 30 17:45:14 2001
From: Setzer.Woodrow@epamail.epa.gov (Setzer.Woodrow@epamail.epa.gov)
Date: Wed, 30 May 2001 18:45:14 +0200 (MET DST)
Subject: [Rd] Rcmd REMOVE does not allow --library argument (PR#957)
Message-ID: <200105301645.SAA09749@pubhealth.ku.dk>

This is in Windows 98.  The problem exists in both rw1021 and rw1023, using
ActiveState Perl builds 620 and 626:

C:\>Rcmd REMOVE --library=C:/R/Rlibs RBMDS
Unknown option: library
Usage: Rcmd REMOVE [options] pkgs

Remove the add-on packages specified by pkgs from the default library
tree (/library) or the tree specified via `--library'.

Options:
  -l, --library=LIB     remove packages from library tree LIB
  -v, --version         print version info and exit

Report bugs to <r-bugs@r-project.org>.


The fix is to change line 37 in rw1023/bin/Remove:
from
my @knownoptions = ("help|h", "version|v");
to
my @knownoptions = ("help|h", "library|l:s", "version|v");

R. Woodrow Setzer, Jr.                                            Phone:
(919) 541-0128
Experimental Toxicology Division                       Fax:  (919) 541-5394
Pharmacokinetics Branch
NHEERL MD-74; US EPA; RTP, NC 27711


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Wed May 30 17:51:42 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Wed, 30 May 2001 18:51:42 +0200 (MET DST)
Subject: [Rd] Rcmd REMOVE does not allow --library argument (PR#957)
Message-ID: <200105301651.SAA09825@pubhealth.ku.dk>

On Wed, 30 May 2001 Setzer.Woodrow@epamail.epa.gov wrote:

Thanks, fixed.

> This is in Windows 98.  The problem exists in both rw1021 and rw1023, using
> ActiveState Perl builds 620 and 626:
>
> C:\>Rcmd REMOVE --library=C:/R/Rlibs RBMDS
> Unknown option: library
> Usage: Rcmd REMOVE [options] pkgs
>
> Remove the add-on packages specified by pkgs from the default library
> tree (/library) or the tree specified via `--library'.
>
> Options:
>   -l, --library=LIB     remove packages from library tree LIB
>   -v, --version         print version info and exit
>
> Report bugs to <r-bugs@r-project.org>.
>
>
> The fix is to change line 37 in rw1023/bin/Remove:
> from
> my @knownoptions = ("help|h", "version|v");
> to
> my @knownoptions = ("help|h", "library|l:s", "version|v");
>
> R. Woodrow Setzer, Jr.                                            Phone:
> (919) 541-0128
> Experimental Toxicology Division                       Fax:  (919) 541-5394
> Pharmacokinetics Branch
> NHEERL MD-74; US EPA; RTP, NC 27711
>
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed May 30 20:00:11 2001
From: tlumley@u.washington.edu (tlumley@u.washington.edu)
Date: Wed, 30 May 2001 21:00:11 +0200 (MET DST)
Subject: [Rd] zero-extent matrices (PR#958)
Message-ID: <200105301900.VAA10463@pubhealth.ku.dk>


In 1.2.3
  matrix(nrow=10,ncol=0)%*%numeric(0)
returns a 10x1 matrix of 0s

In todays 1.3 it returns a 10x1 matrix of miscellaneous junk.

While both are probably wrong the latter is causing problems for survival.

	-thomas

platform i686-pc-linux-gnu
arch     i686
os       linux-gnu
system   i686, linux-gnu
status   Under development (unstable)
major    1
minor    3.0
year     2001
month    05
day      30
language R



-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From pgilbert@bank-banque-canada.ca  Wed May 30 20:13:30 2001
From: pgilbert@bank-banque-canada.ca (Paul Gilbert)
Date: Wed, 30 May 2001 15:13:30 -0400
Subject: [Rd] perl 5.6.0
Message-ID: <3B15465A.78A367B8@bank-banque-canada.ca>

I am trying Perl 5.6.0 on Solaris and having trouble building R. It is
very possible our setup is not complete, but before I drive my system
adminstrator crazy, are there known problems building R (1.2.3 or devel)
using Perl 5.6.0?  Configure works ok, the first make problem is below.

Thanks,
Paul Gilbert
_______
make[2]: Entering directory
`/home/mfa5/gilp/R-versions/R-devel/src/library'
Can't locate File/Basename.pm in @INC (@INC contains:
/home/mfa5/gilp/R-versions/R-devel/share/perl
/apps/asd/unix/gnu/perl-5.6.0/lib/5.6.0/sun4-solaris
/apps/asd/unix/gnu/perl-5.6.0/lib/5.6.0
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl/5.6.0/sun4-solaris
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl/5.6.0
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl .) at
/home/mfa5/gilp/R-versions/R-devel/bin/build-help line 21.
BEGIN failed--compilation aborted at
/home/mfa5/gilp/R-versions/R-devel/bin/build-help line 21.
Can't locate File/Basename.pm in @INC (@INC contains:
/home/mfa5/gilp/R-versions/R-devel/share/perl
/apps/asd/unix/gnu/perl-5.6.0/lib/5.6.0/sun4-solaris
/apps/asd/unix/gnu/perl-5.6.0/lib/5.6.0
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl/5.6.0/sun4-solaris
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl/5.6.0
/apps/asd/unix/gnu/perl-5.6.0/lib/site_perl .) at
/home/mfa5/gilp/R-versions/R-devel/bin/Rd2contents line 3.
BEGIN failed--compilation aborted at
/home/mfa5/gilp/R-versions/R-devel/bin/Rd2contents line 3.


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Wed May 30 20:31:45 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 30 May 2001 21:31:45 +0200
Subject: [Rd] zero-extent matrices (PR#958)
In-Reply-To: tlumley@u.washington.edu's message of "Wed, 30 May 2001 21:00:11 +0200 (MET DST)"
References: <200105301900.VAA10463@pubhealth.ku.dk>
Message-ID: <x24ru2y6ou.fsf@blueberry.kubism.ku.dk>

tlumley@u.washington.edu writes:

> In 1.2.3
>   matrix(nrow=10,ncol=0)%*%numeric(0)
> returns a 10x1 matrix of 0s
> 
> In todays 1.3 it returns a 10x1 matrix of miscellaneous junk.
> 
> While both are probably wrong the latter is causing problems for survival.

Acutally, I'd say that the 1.2.3 version is correct (sums over empty
sets being zero is a standard convention).

Hmm, 1.3.0 as of yesterday gives 10 zeros for me as does the one
updated and compiled about 18:00 CET...
-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed May 30 20:36:56 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 30 May 2001 12:36:56 -0700 (PDT)
Subject: [Rd] zero-extent matrices (PR#958)
In-Reply-To: <x24ru2y6ou.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105301230000.130198-100000@homer40.u.washington.edu>

On 30 May 2001, Peter Dalgaard BSA wrote:

> tlumley@u.washington.edu writes:
>
> > In 1.2.3
> >   matrix(nrow=10,ncol=0)%*%numeric(0)
> > returns a 10x1 matrix of 0s
> >
> > In todays 1.3 it returns a 10x1 matrix of miscellaneous junk.
> >
> > While both are probably wrong the latter is causing problems for survival.
>
> Acutally, I'd say that the 1.2.3 version is correct (sums over empty
> sets being zero is a standard convention).

I was thinking that a 10x0 matrix times a 0x0 matrix should be a 10x0
matrix

>
> Hmm, 1.3.0 as of yesterday gives 10 zeros for me as does the one
> updated and compiled about 18:00 CET...

Initially it will give zero. The two operands contain pointers to the R
heap and the BLAS call is treating the objects pointed to as length 10 and
length 1 respectively and multiplying whatever happens to be there.
Initially this will be zeros.


	-thomas

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From tlumley@u.washington.edu  Wed May 30 20:46:04 2001
From: tlumley@u.washington.edu (Thomas Lumley)
Date: Wed, 30 May 2001 12:46:04 -0700 (PDT)
Subject: [Rd] zero-extent matrices (PR#958)
In-Reply-To: <Pine.A41.4.33.0105301230000.130198-100000@homer40.u.washington.edu>
Message-ID: <Pine.A41.4.33.0105301244450.130198-100000@homer40.u.washington.edu>

On Wed, 30 May 2001, Thomas Lumley wrote:
>
> Initially it will give zero. The two operands contain pointers to the R
> heap and the BLAS call is treating the objects pointed to as length 10 and
> length 1 respectively and multiplying whatever happens to be there.
> Initially this will be zeros.
>

Actually I was wrong about the reason: It doesn't call BLAS. The junk is
whatever was sitting in the piece of the vector heap where the return
value was allocated.

	-thomas


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From Bill.Venables@CMIS.CSIRO.AU  Thu May 31 03:53:28 2001
From: Bill.Venables@CMIS.CSIRO.AU (Bill.Venables@CMIS.CSIRO.AU)
Date: Thu, 31 May 2001 12:53:28 +1000
Subject: [Rd] new book
Message-ID: <E09E527B56BE2D438A3D6A246DDD27A99C1F@Roper-CV.qld.cmis.csiro.au>

Yes, Robert, I certainly am surprised.  I didn't think I was particularly a
"hard core" sort of person...  I guess I will have to look at it now.  :-S

Bill.

-----Original Message-----
From: Robert Gentleman [mailto:rgentlem@jimmy.harvard.edu]
Sent: Wednesday, 30 May 2001 11:36 PM
To: r-devel@stat.math.ethz.ch
Subject: [Rd] new book


Just thought I would mention that there is a new O'Reilly book out,
"Developing Bioinformatics Computer Skills", which is ok, pretty
superficial about some things but at least it lets you know what is
happening and where.
R gets a few pages in there, 394-396, mostly nice press and accurate
except that Bill Venables (hi Bill) may be surprised to find out that
he is a member of the core development team.
  Robert
ps: they also have an Xgobi reference
-- 
+---------------------------------------------------------------------------
+
| Robert Gentleman                 phone : (617) 632-5250
|
| Associate Professor              fax:   (617)  632-2444
|
| Department of Biostatistics      office: M1B28
| Harvard School of Public Health  email: rgentlem@jimmy.dfci.harvard.edu
|
+---------------------------------------------------------------------------
+
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.
-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._.
_._
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 07:36:02 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 31 May 2001 07:36:02 +0100 (BST)
Subject: [Rd] zero-extent matrices (PR#958)
In-Reply-To: <Pine.A41.4.33.0105301230000.130198-100000@homer40.u.washington.edu>
Message-ID: <Pine.GSO.4.31.0105310733500.6529-100000@auk.stats>

On Wed, 30 May 2001, Thomas Lumley wrote:

> On 30 May 2001, Peter Dalgaard BSA wrote:
>
> > tlumley@u.washington.edu writes:
> >
> > > In 1.2.3
> > >   matrix(nrow=10,ncol=0)%*%numeric(0)
> > > returns a 10x1 matrix of 0s
> > >
> > > In todays 1.3 it returns a 10x1 matrix of miscellaneous junk.
> > >
> > > While both are probably wrong the latter is causing problems for survival.
> >
> > Acutally, I'd say that the 1.2.3 version is correct (sums over empty
> > sets being zero is a standard convention).
>
> I was thinking that a 10x0 matrix times a 0x0 matrix should be a 10x0
> matrix

It's a 10x0 matrix times a 0x1 matrix.  A length-n vector gets promoted to
a nx1 matrix, and that applies for n=0 too:

> dim(as.matrix(numeric(0)))
[1] 0 1


-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ligges@statistik.uni-dortmund.de  Thu May 31 08:21:05 2001
From: ligges@statistik.uni-dortmund.de (ligges@statistik.uni-dortmund.de)
Date: Thu, 31 May 2001 09:21:05 +0200 (MET DST)
Subject: [Rd] Re: R-WinEdt (PR#959)
Message-ID: <200105310721.JAA13287@pubhealth.ku.dk>

John Maindonald wrote:
> 
> Hello Uwe -
> I have been making some use of R-WinEdt.  I have just installed
> version 1.3.  For the most part it works fine.  An annoyance is
> however that when I type in data(), Windows comes up with an error
> message such as
> 
> File c:\windows\TEMP\R.5346 not found.
> 
> This happened with the earlier version also, which is why I
> upgraded.  It happens under Windows ME at home as well
> as under Windows 98 at work.  I am running R for windows 1.23
> 
> I suspect there is some simple action I can take to allow
> data() to work, but it is not clear to me what.


This is not a bug of R-WinEdt, but of R, so also a copy to R-Bugs.

The problem happens, if you set  pager != internal  in options(), e.g.:
  options(pager = "notepad")

After that,  data()  results in an error message like yours:
   File c:\windows\TEMP\R.5346 not found

The real error occurs in show.data() [or on.exit() ?]:

If you comment out the line 
    on.exit(file.remove(file))
in the function show.data(), showing the file works as expected, but
results in not deleting the temp-files.

file.show(file, delete.file = TRUE)  also doesn't delete the file.

Uwe Ligges



--please do not edit the information below--

Version:
 platform = i386-pc-mingw32
 arch = x86
 os = Win32
 system = x86, Win32
 status = 
 major = 1
 minor = 2.3
 year = 2001
 month = 04
 day = 26
 language = R

Windows NT 4.0 (build 1381) Service Pack 6

Search Path:
 .GlobalEnv, package:ctest, Autoloads, package:base

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From John.Peters@tip.csiro.au  Thu May 31 08:27:58 2001
From: John.Peters@tip.csiro.au (John.Peters@tip.csiro.au)
Date: Thu, 31 May 2001 09:27:58 +0200 (MET DST)
Subject: [Rd] format() of a character matrix converts to vector (PR#960)
Message-ID: <200105310727.JAA13483@pubhealth.ku.dk>


Using R 1.2.3 under both windows 95 and linux, format() works fine on a 
numerical matrix, but converts a character matrix to a vector, apparently 
omitting to convert it back to a matrix:

> a_matrix(c("axx","b","c","d","e","f","g","h"),nrow=2)

> a
     [,1]  [,2] [,3] [,4]
[1,] "axx" "c"  "e"  "g" 
[2,] "b"   "d"  "f"  "h" 
 
> format(a)
[1] "axx" "b  " "c  " "d  " "e  " "f  " "g  " "h  "

> format(a,justify="right")
[1] "axx" "  b" "  c" "  d" "  e" "  f" "  g" "  h"

> format(a,justify="left")
[1] "axx" "b  " "c  " "d  " "e  " "f  " "g  " "h  "

> format(a,justify="none")
     [,1]  [,2] [,3] [,4]
[1,] "axx" "c"  "e"  "g" 
[2,] "b"   "d"  "f"  "h" 


Many thanks

----------------------------------------------------------------------------
John Peters
CSIRO National Measurement Laboratory
PO Box 218                                Phone:    +61 2 9413 7503
Lindfield NSW 2070                        Fax:      +61 2 9413 7202
Australia                                 Internet: John.Peters@tip.CSIRO.AU
----------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 09:45:15 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 31 May 2001 10:45:15 +0200 (MET DST)
Subject: [Rd] Re: R-WinEdt (PR#959)
Message-ID: <200105310845.KAA15095@pubhealth.ku.dk>

On Thu, 31 May 2001 ligges@statistik.uni-dortmund.de wrote:

> John Maindonald wrote:
> >
> > Hello Uwe -
> > I have been making some use of R-WinEdt.  I have just installed
> > version 1.3.  For the most part it works fine.  An annoyance is
> > however that when I type in data(), Windows comes up with an error
> > message such as
> >
> > File c:\windows\TEMP\R.5346 not found.
> >
> > This happened with the earlier version also, which is why I
> > upgraded.  It happens under Windows ME at home as well
> > as under Windows 98 at work.  I am running R for windows 1.23
> >
> > I suspect there is some simple action I can take to allow
> > data() to work, but it is not clear to me what.
>
>
> This is not a bug of R-WinEdt, but of R, so also a copy to R-Bugs.
>
> The problem happens, if you set  pager != internal  in options(), e.g.:
>   options(pager = "notepad")
>
> After that,  data()  results in an error message like yours:
>    File c:\windows\TEMP\R.5346 not found
>
> The real error occurs in show.data() [or on.exit() ?]:
>
> If you comment out the line
>     on.exit(file.remove(file))
> in the function show.data(), showing the file works as expected, but
> results in not deleting the temp-files.

That line is no longer in the sources.


> file.show(file, delete.file = TRUE)  also doesn't delete the file.

Right. That's because there is no way to know when e.g. notepad has
finished with the file.  Actually, one maybe could with notepad,
but not with multi-file editors like pfe (or winedt?)

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 09:48:27 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 31 May 2001 10:48:27 +0200 (MET DST)
Subject: [Rd] format() of a character matrix converts to vector (PR#960)
Message-ID: <200105310848.KAA15153@pubhealth.ku.dk>

Thanks.  There is an easy fix.  In format.default

    f.char <- function(x, justify) {
	if(length(x) <= 1) return(x)
	nc <- nchar(x)
	w <- max(nc)
	all <- substring(paste(rep(" ", w), collapse=""), 1, w-nc)
	res <- if(justify == "left") paste(x, all, sep="")
	else paste(all, x, sep="")
        dim(res) <- dim(x)
        res
    }



On Thu, 31 May 2001 John.Peters@tip.csiro.au wrote:

>
> Using R 1.2.3 under both windows 95 and linux, format() works fine on a
> numerical matrix, but converts a character matrix to a vector, apparently
> omitting to convert it back to a matrix:
>
> > a_matrix(c("axx","b","c","d","e","f","g","h"),nrow=2)
>
> > a
>      [,1]  [,2] [,3] [,4]
> [1,] "axx" "c"  "e"  "g"
> [2,] "b"   "d"  "f"  "h"
>
> > format(a)
> [1] "axx" "b  " "c  " "d  " "e  " "f  " "g  " "h  "
>
> > format(a,justify="right")
> [1] "axx" "  b" "  c" "  d" "  e" "  f" "  g" "  h"
>
> > format(a,justify="left")
> [1] "axx" "b  " "c  " "d  " "e  " "f  " "g  " "h  "
>
> > format(a,justify="none")
>      [,1]  [,2] [,3] [,4]
> [1,] "axx" "c"  "e"  "g"
> [2,] "b"   "d"  "f"  "h"
>
>
> Many thanks
>
> ----------------------------------------------------------------------------
> John Peters
> CSIRO National Measurement Laboratory
> PO Box 218                                Phone:    +61 2 9413 7503
> Lindfield NSW 2070                        Fax:      +61 2 9413 7202
> Australia                                 Internet: John.Peters@tip.CSIRO.AU
> ----------------------------------------------------------------------------
>
> -.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
> r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
> Send "info", "help", or "[un]subscribe"
> (in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
> _._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From beebe@math.utah.edu  Thu May 31 16:19:37 2001
From: beebe@math.utah.edu (beebe@math.utah.edu)
Date: Thu, 31 May 2001 17:19:37 +0200 (MET DST)
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
Message-ID: <200105311519.RAA21000@pubhealth.ku.dk>

[This is not a bug report, just a suggestion.]

With complex packages, it is often useful to maintain multiple
versions installed, for bug checking, and performance comparisons, and
for developers, for a development history (e.g., I have about 30
versions of ghostscript, whose development I contribute to, and I have
on several occasions run tests files on with each them to find out
when a change in behavior was introduced).

The common way to do this is to suffix a version number to the
executable and any file tree(s) that it requires.

The R-1.2.3 release does not currently do this, but it looks like only
a couple of lines of changes are needed to accomplish the job, and
I've done so locally manually.

(1) In the R script, change

	R_HOME_DIR=/usr/local/lib/R

    to

	R_HOME_DIR=/usr/local/lib/R-1.2.3

    and name the tree that way during installation.

(2) At installation time, first install the executable as
    /usr/local/bin/R-1.2.3, then remove /usr/local/bin/R,
    then do "ln -s R-1.2.3 /usr/local/bin/R" or
    "ln R-1.2.3 /usr/local/bin/R", in that order.  This
    ensures that any existing version of R remains on the system,
    accessible as R-x.y.z.

[Obviously, in the above, "/usr/local" is really "$(prefix)".]

I suggest that the next round of R distribution consider incorporating
this change.

-------------------------------------------------------------------------------
- Nelson H. F. Beebe                    Tel: +1 801 581 5254                  -
- Center for Scientific Computing       FAX: +1 801 585 1640, +1 801 581 4148 -
- University of Utah                    Internet e-mail: beebe@math.utah.edu  -
- Department of Mathematics, 322 INSCC      beebe@acm.org  beebe@computer.org -
- 155 S 1400 E RM 233                       beebe@ieee.org                    -
- Salt Lake City, UT 84112-0090, USA    URL: http://www.math.utah.edu/~beebe  -
-------------------------------------------------------------------------------

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 17:07:23 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Thu, 31 May 2001 18:07:23 +0200 (MET DST)
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
Message-ID: <200105311607.SAA21389@pubhealth.ku.dk>

On Thu, 31 May 2001 beebe@math.utah.edu wrote:

> [This is not a bug report, just a suggestion.]
>
> With complex packages, it is often useful to maintain multiple
> versions installed, for bug checking, and performance comparisons, and
> for developers, for a development history (e.g., I have about 30
> versions of ghostscript, whose development I contribute to, and I have
> on several occasions run tests files on with each them to find out
> when a change in behavior was introduced).
>
> The common way to do this is to suffix a version number to the
> executable and any file tree(s) that it requires.
>
> The R-1.2.3 release does not currently do this, but it looks like only
> a couple of lines of changes are needed to accomplish the job, and
> I've done so locally manually.
>
> (1) In the R script, change
>
> 	R_HOME_DIR=/usr/local/lib/R
>
>     to
>
> 	R_HOME_DIR=/usr/local/lib/R-1.2.3
>
>     and name the tree that way during installation.
>
> (2) At installation time, first install the executable as
>     /usr/local/bin/R-1.2.3, then remove /usr/local/bin/R,
>     then do "ln -s R-1.2.3 /usr/local/bin/R" or
>     "ln R-1.2.3 /usr/local/bin/R", in that order.  This
>     ensures that any existing version of R remains on the system,
>     accessible as R-x.y.z.
>
> [Obviously, in the above, "/usr/local" is really "$(prefix)".]
>
> I suggest that the next round of R distribution consider incorporating
> this change.

There is a serious problem with that. All the user-installed packages in
/usr/local/lib/R-1.2.3/library disappear from view on upgrade.  They would
need to be migrated.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu May 31 17:52:54 2001
From: rossini@u.washington.edu (A.J. Rossini)
Date: 31 May 2001 09:52:54 -0700
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
In-Reply-To: ripley@stats.ox.ac.uk's message of "Thu, 31 May 2001 18:07:23 +0200 (MET DST)"
References: <200105311607.SAA21389@pubhealth.ku.dk>
Message-ID: <87lmnde9zt.fsf@jeeves.blindglobe.net>

>>>>> "r" == ripley  <ripley@stats.ox.ac.uk> writes:

    r> There is a serious problem with that. All the user-installed
    r> packages in /usr/local/lib/R-1.2.3/library disappear from view
    r> on upgrade.  They would need to be migrated.

One thought would be to emulate XEmacs in this regard -- lisp packages
are in equivalent of /usr/local/lib/R, while version-specific code is
in the equivalent of /usr/local/lib/R-version.

best,
-tony

-- 
A.J. Rossini				Rsrch. Asst. Prof. of Biostatistics
U. of Washington Biostatistics		rossini@u.washington.edu	
FHCRC/SCHARP/HIV Vaccine Trials Net	rossini@scharp.org
-------- (wednesday/friday is unknown) --------
FHCRC: M-Tu : 206-667-7025 (fax=4812)|Voicemail is pretty sketchy/use Email
UW:    Th   : 206-543-1044 (fax=3286)|Change last 4 digits of phone to FAX

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xyzzy@speakeasy.org  Thu May 31 18:48:26 2001
From: xyzzy@speakeasy.org (Trent Piepho)
Date: Thu, 31 May 2001 10:48:26 -0700 (PDT)
Subject: [Rd] paper size in postscript driver
Message-ID: <Pine.LNX.4.04.10105310901380.2031-100000@xyzzy.dsl.speakeasy.net>

I have a non-PS printer setup to print under linux using ghostscript as a
filter.  This printer has two paper trays, one has letter paper, the other
tabloid size paper.  If I print from a program that uses a PPD file to
configure the printer, like StarOffice or The Gimp, I can select the paper
size from a nifty list.  If I select letter size, the printer print with
paper from the letter tray.  If I select tabloid, the printer will use
the tabloid tray.

I added tabloid to R's list of supported paper sizes, which was pretty
trivial.  If I view the file with gv/ghostscript, I get a tabloid sized window
on the screen with my plot.  But if I print, the printer uses the letter tray
and the plot is cropped to the letter size paper.

I looked postscript from staroffice vs R, and noticed these lines:
%%BeginSetup
%%BeginFeature: *PageRegion Tabloid

        << /PageSize [792 1224] /ImagingBBox null >> setpagedevice
%%EndFeature
%%EndSetup

These follow the "%%EndProlog" line in the postscript file.  If I add these
lines to an R produced tabloid sized ps file, it will print on tabloid paper!

It doesn't view properly in gv though.  When looking at a plot in landscape
orientation, the right edge is cut off.  Tabloid is 11" x 17", and it looks
like the right 6" is cut off, as if the landscape plot is being clipped to a
bounding box of portrait oriented paper.  The plots do not get cut off when
viewed if I don't add that bit of code.  The plots do print fine, which is odd
since both the printer and gv use ghostscript to process the postscript file. 

Maybe some postscript guru could add this feature to R's PS driver?  It looks
like some kind of setpagedevice call is needed to tell the printer what paper
size to use.

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From eglen@pcg.wustl.edu  Thu May 31 21:07:52 2001
From: eglen@pcg.wustl.edu (eglen@pcg.wustl.edu)
Date: Thu, 31 May 2001 22:07:52 +0200 (MET DST)
Subject: [Rd] documentation for image(): zlim update (PR#962)
Message-ID: <200105312007.WAA22407@pubhealth.ku.dk>

Full_Name: Stephen Eglen
Version: 1.2.3
OS: Linux
Submission from: (NULL) (128.252.204.186)


The help file for image() currently says:

     The way in which `zlim' is divided into colours will be changed
     for the next major release (1.1.0) to divide the range into
     equal-length intervals.

According to NEWS, this was indeed changed in 1.1.0, so perhaps it can 
now be removed from the help?

Stephen

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 22:55:17 2001
From: ripley@stats.ox.ac.uk (Prof Brian D Ripley)
Date: Thu, 31 May 2001 22:55:17 +0100 (BST)
Subject: [Rd] paper size in postscript driver
In-Reply-To: <Pine.LNX.4.04.10105310901380.2031-100000@xyzzy.dsl.speakeasy.net>
Message-ID: <Pine.GSO.4.31.0105312248180.22000-100000@auk.stats>

On Thu, 31 May 2001, Trent Piepho wrote:

> I have a non-PS printer setup to print under linux using ghostscript as a
> filter.  This printer has two paper trays, one has letter paper, the other
> tabloid size paper.  If I print from a program that uses a PPD file to
> configure the printer, like StarOffice or The Gimp, I can select the paper
> size from a nifty list.  If I select letter size, the printer print with
> paper from the letter tray.  If I select tabloid, the printer will use
> the tabloid tray.
>
> I added tabloid to R's list of supported paper sizes, which was pretty
> trivial.  If I view the file with gv/ghostscript, I get a tabloid sized window
> on the screen with my plot.  But if I print, the printer uses the letter tray
> and the plot is cropped to the letter size paper.
>
> I looked postscript from staroffice vs R, and noticed these lines:
> %%BeginSetup
> %%BeginFeature: *PageRegion Tabloid
>
>         << /PageSize [792 1224] /ImagingBBox null >> setpagedevice
> %%EndFeature
> %%EndSetup
>
> These follow the "%%EndProlog" line in the postscript file.  If I add these
> lines to an R produced tabloid sized ps file, it will print on tabloid paper!
>
> It doesn't view properly in gv though.  When looking at a plot in landscape
> orientation, the right edge is cut off.  Tabloid is 11" x 17", and it looks
> like the right 6" is cut off, as if the landscape plot is being clipped to a
> bounding box of portrait oriented paper.  The plots do not get cut off when
> viewed if I don't add that bit of code.  The plots do print fine, which is odd
> since both the printer and gv use ghostscript to process the postscript file.
>
> Maybe some postscript guru could add this feature to R's PS driver?  It looks
> like some kind of setpagedevice call is needed to tell the printer what paper
> size to use.

Let's not get confused here.  What you are asking for is the job of your
print spooling software.  Proper postscript should have a DSC comment
specifying the paper size, and R's does:

%!PS-Adobe-3.0
%%DocumentNeededResources: font Symbol
%%+ font Helvetica
%%+ font Helvetica-Bold
%%+ font Helvetica-Oblique
%%+ font Helvetica-BoldOblique
%%DocumentMedia: a4 595 841 0 () ()
...

If you use the paper size by "special" this is set, and it is the job of
your spooler to make use of it.  Looks like yours is deficient
(and that's not unlikely if you are not using a proper spooler).  *But*
we can't fix this in R without breaking it for those who do run
proper print management software.

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 31 23:02:38 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Jun 2001 00:02:38 +0200
Subject: [Rd] documentation for image(): zlim update (PR#962)
In-Reply-To: eglen@pcg.wustl.edu's message of "Thu, 31 May 2001 22:07:52 +0200 (MET DST)"
References: <200105312007.WAA22407@pubhealth.ku.dk>
Message-ID: <x2itihxjlt.fsf@blueberry.kubism.ku.dk>

eglen@pcg.wustl.edu writes:

> Full_Name: Stephen Eglen
> Version: 1.2.3
> OS: Linux
> Submission from: (NULL) (128.252.204.186)
> 
> 
> The help file for image() currently says:
> 
>      The way in which `zlim' is divided into colours will be changed
>      for the next major release (1.1.0) to divide the range into
>      equal-length intervals.
> 
> According to NEWS, this was indeed changed in 1.1.0, so perhaps it can 
> now be removed from the help?
> 
> Stephen

This actually got fixed yesterday by Brian (coincidence or multiple
information pathways?)

----------------------------
revision 1.18
date: 2001/05/30 16:56:01;  author: ripley;  state: Exp;  lines: +0 -4
remove old note
----------------------------

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From p.dalgaard@biostat.ku.dk  Thu May 31 23:13:53 2001
From: p.dalgaard@biostat.ku.dk (Peter Dalgaard BSA)
Date: 01 Jun 2001 00:13:53 +0200
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
In-Reply-To: rossini@blindglobe.net's message of "31 May 2001 09:52:54 -0700"
References: <200105311607.SAA21389@pubhealth.ku.dk> <87lmnde9zt.fsf@jeeves.blindglobe.net>
Message-ID: <x2g0dlxj32.fsf@blueberry.kubism.ku.dk>

rossini@blindglobe.net (A.J. Rossini) writes:

> >>>>> "r" == ripley  <ripley@stats.ox.ac.uk> writes:
> 
>     r> There is a serious problem with that. All the user-installed
>     r> packages in /usr/local/lib/R-1.2.3/library disappear from view
>     r> on upgrade.  They would need to be migrated.
> 
> One thought would be to emulate XEmacs in this regard -- lisp packages
> are in equivalent of /usr/local/lib/R, while version-specific code is
> in the equivalent of /usr/local/lib/R-version.

But R packages are not always binary compatible between releases. You
can't win. I think most of the development team just use the "run from
builddir" option.

Could we perhaps add a configure switch to install in R-$VERSION ?

--versioned-install or something like that. Kurt?

-- 
   O__  ---- Peter Dalgaard             Blegdamsvej 3  
  c/ /'_ --- Dept. of Biostatistics     2200 Cph. N   
 (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From rossini@u.washington.edu  Thu May 31 23:13:04 2001
From: rossini@u.washington.edu (A. J. Rossini)
Date: Thu, 31 May 2001 15:13:04 -0700 (PDT)
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
In-Reply-To: <x2g0dlxj32.fsf@blueberry.kubism.ku.dk>
Message-ID: <Pine.A41.4.33.0105311511510.12492-100000@homer15.u.washington.edu>



On 1 Jun 2001, Peter Dalgaard BSA wrote:

> rossini@blindglobe.net (A.J. Rossini) writes:
>
> > >>>>> "r" == ripley  <ripley@stats.ox.ac.uk> writes:
> >
> >     r> There is a serious problem with that. All the user-installed
> >     r> packages in /usr/local/lib/R-1.2.3/library disappear from view
> >     r> on upgrade.  They would need to be migrated.
> >
> > One thought would be to emulate XEmacs in this regard -- lisp packages
> > are in equivalent of /usr/local/lib/R, while version-specific code is
> > in the equivalent of /usr/local/lib/R-version.
>
> But R packages are not always binary compatible between releases. You
> can't win. I think most of the development team just use the "run from
> builddir" option.
>
> Could we perhaps add a configure switch to install in R-$VERSION ?
>
> --versioned-install or something like that. Kurt?

Alternatively, let people do it both ways, and suffer (i.e. install
libraries in the versioned location, as well as in the "generic"
location).

(I'm feeling really grumpy this year).

best,
-tony


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From ripley@stats.ox.ac.uk  Thu May 31 23:16:08 2001
From: ripley@stats.ox.ac.uk (ripley@stats.ox.ac.uk)
Date: Fri, 1 Jun 2001 00:16:08 +0200 (MET DST)
Subject: [Rd] R-1.2.3: a small suggestion (PR#961)
Message-ID: <200105312216.AAA23027@pubhealth.ku.dk>

On 1 Jun 2001, Peter Dalgaard BSA wrote:

> rossini@blindglobe.net (A.J. Rossini) writes:
>
> > >>>>> "r" == ripley  <ripley@stats.ox.ac.uk> writes:
> >
> >     r> There is a serious problem with that. All the user-installed
> >     r> packages in /usr/local/lib/R-1.2.3/library disappear from view
> >     r> on upgrade.  They would need to be migrated.
> >
> > One thought would be to emulate XEmacs in this regard -- lisp packages
> > are in equivalent of /usr/local/lib/R, while version-specific code is
> > in the equivalent of /usr/local/lib/R-version.
>
> But R packages are not always binary compatible between releases. You
> can't win. I think most of the development team just use the "run from
> builddir" option.

I do manually version-install almost as suggested for the dept copy (I
would use /usr/local/lib/R/1.2.3 in the way that ghostscript does),
which is why I know I need to manually migrate the packages.

One can of course install packages in a private library.  For my own
installations I do, but it is not seamless, not least from the
version-incompatibility of installed packages (and also that --vanilla
stops the private library spec being picked up from .Renviron).

>
> Could we perhaps add a configure switch to install in R-$VERSION ?
>
> --versioned-install or something like that. Kurt?
>
> --
>    O__  ---- Peter Dalgaard             Blegdamsvej 3
>   c/ /'_ --- Dept. of Biostatistics     2200 Cph. N
>  (*) \(*) -- University of Copenhagen   Denmark      Ph: (+45) 35327918
> ~~~~~~~~~~ - (p.dalgaard@biostat.ku.dk)             FAX: (+45) 35327907
>

-- 
Brian D. Ripley,                  ripley@stats.ox.ac.uk
Professor of Applied Statistics,  http://www.stats.ox.ac.uk/~ripley/
University of Oxford,             Tel:  +44 1865 272861 (self)
1 South Parks Road,                     +44 1865 272860 (secr)
Oxford OX1 3TG, UK                Fax:  +44 1865 272595


-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

From xyzzy@speakeasy.org  Thu May 31 23:23:06 2001
From: xyzzy@speakeasy.org (Trent Piepho)
Date: Thu, 31 May 2001 15:23:06 -0700 (PDT)
Subject: [Rd] paper size in postscript driver
In-Reply-To: <Pine.GSO.4.31.0105312248180.22000-100000@auk.stats>
Message-ID: <Pine.LNX.4.04.10105311519530.2312-100000@xyzzy.dsl.speakeasy.net>

On Thu, 31 May 2001, Prof Brian D Ripley wrote:
> > like some kind of setpagedevice call is needed to tell the printer what paper
> > size to use.
> 
> Let's not get confused here.  What you are asking for is the job of your
> print spooling software.  Proper postscript should have a DSC comment
> specifying the paper size, and R's does:

Then why do both staroffice and the gimp write postscript that uses the proper
paper size?  

> If you use the paper size by "special" this is set, and it is the job of
> your spooler to make use of it.  Looks like yours is deficient
> (and that's not unlikely if you are not using a proper spooler).  *But*
> we can't fix this in R without breaking it for those who do run
> proper print management software.

Why does it need to break anything?  Both staroffice and gimp produce
postscript that prints on the proper paper size.  Do they not work with
"proper" spooling software?  What is the "proper" spooling software for Linux?

-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-.-
r-devel mailing list -- Read http://www.ci.tuwien.ac.at/~hornik/R/R-FAQ.html
Send "info", "help", or "[un]subscribe"
(in the "body", not the subject !)  To: r-devel-request@stat.math.ethz.ch
_._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._._

